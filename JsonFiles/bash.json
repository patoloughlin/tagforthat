{"count":16321,"tag":"bash","questions":[{"tags":["git","bash","unix","version-control","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13263369,"title":"Getting a list of all unversioned files in a Git-controlled folder","body":"<p>Getting a list of unversioned files in a Git-controlled folder is way more annoying than it needs to be. Unless I really suck at reading man pages, it doesn't look like Git provides a facility to perform this operation on its own.</p>\n\n<p>There may be a more elegant way of performing this, but here's a one-liner I threw together for this task, in case anyone else ever needs to use it.</p>\n\n<p>Edit: turns out there's a standard way to do this that already works well.</p>\n\n<pre><code>git ls-files --other [--exclude-standard]\n</code></pre>\n"},{"tags":["python","linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":13280528,"title":"Renaming sequential image files with gaps","body":"<p>I'm looking for a way to rename a list of image files with gaps to be sequential. Also I want to give them a padding of 4. I'm currently using Python 2.7 and Linux bash to program this.</p>\n\n<pre><code>    Example:\n\n    1.png\n    2.png\n    3.png\n    20.png\n    21.png\n    50.png\n</code></pre>\n\n<p>Should turn into:</p>\n\n<pre><code>    0001.png\n    0002.png\n    0003.png\n    0004.png\n    0005.png\n    0006.png\n</code></pre>\n\n<p>I also would like for the files name to be the same as the directory that they are currently in.</p>\n\n<pre><code>    Example:\n\n    c_users_johnny_desktop_images.0001.png\n    c_users_johnny_desktop_images.0002.png\n    c_users_johnny_desktop_images.0003.png\n    c_users_johnny_desktop_images.0004.png\n    c_users_johnny_desktop_images.0005.png\n    c_users_johnny_desktop_images.0006.png\n</code></pre>\n\n<p>Any help would be greatly appreciated! :)</p>\n\n<p>Cheers</p>\n"},{"tags":["git","bash","shell","git-branch"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":34,"score":3,"question_id":13280077,"title":"Check if git branch exists in bash: weird interpolation behavior","body":"<p>I'm trying to see if a certain branch exists within a shell script.</p>\n\n<p>However, <code>git-branch</code> seems to modify its output when interpolated. (I don't know the exact phenomenon or terminology here)</p>\n\n<p>For example, I'm trying to get the array of branches:</p>\n\n<pre><code>$ git branch\n  develop\n* master\n\n$ branches=`git branch`\n$ echo $branches\ndevelop compiler.sh HOSTNAME index.html master\n\n$ echo `git branch`\ndevelop compiler.sh HOSTNAME index.html master\n</code></pre>\n\n<p>A kind of <code>ls-files</code> seems to be getting in the way. How come? Is this Bash? Git? I'm confused.</p>\n"},{"tags":["linux","string","git","bash","whitespace"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13280762,"title":"Send string with whitespaces as git commit message using bash","body":"<p>I'm creating a bash script that updates a git branch, everything works fine but now i want to add the option to specify the commit message as a parameter.</p>\n\n<p>I used this command first:</p>\n\n<pre><code>echo \"Executing git commit...\"\ngit commit -m \"$1\"\n</code></pre>\n\n<p>but when i sent something like this:</p>\n\n<pre><code>$ git.sh \"testing commit message\"\n</code></pre>\n\n<p>I get a bunch of errors telling me the command cannot be recognized by git.</p>\n\n<p>I suppose in this case that the double quotes I added are not passing the parameter as a single string but as many, so only the first one is taken by the -m option and git tries to pass the others as commit options.</p>\n\n<p>Is there a better way i can pass a multi word string as git commit message when getting it from the script arguments?</p>\n\n<p>I would really appreciate any suggestion you have.</p>\n"},{"tags":["bash","shell"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13272131,"title":"Why do we use echo and bc together?","body":"<p>In Shell scripting (Linux/Ubuntu , Bash) , why do we use echo and bc commands together ? I am new to Shell scripting and have a basic understanding of pipes .\nI know that bc is kind of a seperate language . How does the following statement actually work (Just an example) ?<br>\n    <code>echo 5+6 | bc</code>    </p>\n"},{"tags":["bash","shell","hex","decimal"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":29,"score":-1,"question_id":13280131,"title":"Hexadecimal To Decimal in Shell Script","body":"<p>Can someone help me in telling how to convert a hexadecimal number to decimal number in a shell script? E.g. I want to convert the hexadecimal number <code>bfca3000</code> to decimal using a shell script. I basically want the difference of two hexadecimal numbers. My code is:</p>\n\n<pre><code>var3=`echo \"ibase=16; $var1\" | bc`\nvar4=`echo \"ibase=16; $var2\" | bc`\nvar5=$(($var4-$var3).               # [Line 48]\n</code></pre>\n\n<p>Upon executing ,I am getting the error as:</p>\n\n<pre><code>Line 48: -: syntax error: operand expected (error token is \"-\")\n</code></pre>\n"},{"tags":["bash","vim","bash-completion"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":24,"score":2,"question_id":13280263,"title":"Ignore file extension in bash completion for vim","body":"<p>I wrote a small bash function to provide completion for vim. The function is the following:</p>\n\n<pre><code># completion for vim\n_vim()\n{\n    local cur prev\n\n    COMPREPLY=()\n    _get_comp_words_by_ref cur prev\n\n    case $prev in\n        -h|--help|-v|--version)\n            return 0\n            ;;\n    esac\n\n    if [[ \"$cur\" == -* ]] ; then\n        local _vopts='-v -e -E -s -d -y -R -Z -m -M -b -l -C'\n        _vopts=\"${_vopts} -N -V -D -n -r -r -L -A -H -F -T -u\"\n        _vopts=\"${_vopts} --noplugin -p -o -O --cmd -c -S -s -w -W\"\n        _vopts=\"${_vopts} -x -X --remote --remote-silent --remote-wait\"\n        _vopts=\"${_vopts} --remote-wait-silent --remote-tab --remote-send\"\n        _vopts=\"${_vopts} --remote-expr --serverlist --servername\"\n        _vopts=\"${_vopts} --startuptime -i -h --help --version\"\n        COMPREPLY=( $( compgen -W \"${_vopts}\" \\\n            -- \"$cur\" ) )\n        return 0\n    fi\n\n    local _VIM_IGNORE=\".pdf:.dvi:.jpg:.pyc:.exe:.tar:.zip:.ps\"\n    FIGNORE=\"${_VIM_IGNORE}\" _filedir\n} &amp;&amp;\ncomplete -F _vim vim vi v gv vd\n</code></pre>\n\n<p>I was trying to have it ignore files with extensions pdf, dvi, etc by defining the _VIM_IGNORE variable and setting FIGNORE to that but that does not work.</p>\n\n<p>Any idea how to accomplish this?</p>\n\n<p>Thanks.</p>\n"},{"tags":["string","bash","variables","arguments"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":11,"score":1,"question_id":13279417,"title":"Passing an empty string as a commandline argument using a bash variable to a command","body":"<p>I have a daemon that can be run manually from a bash shell like this:</p>\n\n<pre><code>daemon-binary --name some-name --separator '' /path/to/file\n</code></pre>\n\n<p>The command-line options for this daemon should be configured in <code>/etc/default/daemonname</code> like this:</p>\n\n<pre><code>DAEMON_OPTS=\"--name some-name --separator '' /path/to/file\"\n</code></pre>\n\n<p>This config is sourced by an init-script that starts the daemon passing the commandline options found in <code>DAEMON_OPTS</code> like this:</p>\n\n<pre><code>daemon-binary \"$DAEMON_OPTS\"\n</code></pre>\n\n<p>The result is, that the string <code>''</code> gets quoted again and instead of an empty string the <code>daemon-binary</code> gets passed two single. So in fact the result is the same as calling:</p>\n\n<pre><code>daemon-binary --name some-name --separator \"''\" /path/to/file\n</code></pre>\n\n<p>As far as I understand bash splits the <code>DAEMON_OPTS</code> at each whitespace, then quotes all the pieces and passes them to the <code>daemon-binary</code>.</p>\n\n<p>Is there any way to write the bash variable <code>DAEMON_OPTS</code> such that what's currently being expanded to <code>\"''\"</code> will be expanded into an empty string?</p>\n"},{"tags":["bash","shell","rename"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13279516,"title":"Bash shell: how to add a name","body":"<p>I am trying to rename some zip files in bash with an _orig but I seem to be missing something.  Any suggestions??</p>\n\n<p>My goal:</p>\n\n<ul>\n<li>move files to an orig directory</li>\n<li>rename original files with a \"_orig\" in the name</li>\n</ul>\n\n<p>The code Ive tried to write:</p>\n\n<pre><code>mv -v  $PICKUP/*.zip $ORIGINALS\nfor origfile in $(ls $ORIGINALS/*.zip);do\n    echo \"Adding _orig to zip file\"\n    echo\n    added=$(basename $origfile '_orig').zip\n    mv -v $ORIGINALS/$origfile.zip $ORIGINALS/$added.zip\ndone\n</code></pre>\n\n<p>Sorry still kinda new at this.</p>\n"},{"tags":["string","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13278626,"title":"Bash/Shell How to remove extra spaces in a variable?","body":"<p>How to remove extra spaces in a variable?</p>\n\n<pre><code>VAR=\"    Eget ac vel volutpat      dic  tumst   est dui      adipiscing  \"\n\nCorrect result: VAR=\"Eget ac vel volutpat dic tumst est dui adipiscing\" \n</code></pre>\n\n<p>There are over 16,000,000 to be edited; <code>sed</code> is too slow!</p>\n\n<p>!!! E D I T !!!</p>\n\n<p>String OK! Thank you all</p>\n\n<p>BUT</p>\n\n<p>Text in array problem, gaps remain :-(</p>\n\n<pre><code>ITM=(\"  Eget ac  vel volutpat   |  Vel volutpat     dic tumst \"\n     \"    Vestibulum  laoreet     a semper  |orttitor      eu laoreet justo congue \")\n\nIFS=$'|'\n\nfor (( i=0 ; i&lt;16000000 ; i++ ))\ndo\n    AAA=( ITM[$i] )\n    B=${AAA[0]}     # \"  Eget ac  vel volutpat   \"\n    C=${AAA[1]}     # \"  Vel volutpat     dic tumst \"\n\ndone\n</code></pre>\n"},{"tags":["linux","bash"],"answer_count":5,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13272717,"title":"inner join on two text files","body":"<p>Looking to perform an inner join on two different text files. Basically I'm looking for the inner join equivalent of the GNU join program. Does such a thing exist? If not, an awk or sed solution would be most helpful, but my first choice would be a linux command.</p>\n\n<p>Here's an example of what I'm looking to do</p>\n\n<p>file 1:</p>\n\n<pre><code>0|Alien Registration Card LUA|Checklist Update\n1|Alien Registration Card LUA|Document App Plan\n2|Alien Registration Card LUA|SA Application Nbr\n3|Alien Registration Card LUA|tmp_preapp-DOB\n0|App - CSCE Certificate LUA|Admit Type\n1|App - CSCE Certificate LUA|Alias 1\n2|App - CSCE Certificate LUA|Alias 2\n3|App - CSCE Certificate LUA|Alias 3\n4|App - CSCE Certificate LUA|Alias 4\n</code></pre>\n\n<p>file 2:</p>\n\n<pre><code>Alien Registration Card LUA\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>0|Alien Registration Card LUA|Checklist Update\n1|Alien Registration Card LUA|Document App Plan\n2|Alien Registration Card LUA|SA Application Nbr\n3|Alien Registration Card LUA|tmp_preapp-DOB\n</code></pre>\n"},{"tags":["bash","amazon-web-services","amazon-cloudformation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13274807,"title":"What's the proper way to retry commands in an AWS CFN template?","body":"<p>Sometimes commands like <code>apt-get update -q</code> fail randomly in a cloudformation template user-data script. What's the proper way to retry them till they succeed?</p>\n"},{"tags":["bash","shell","script"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13275356,"title":"Execute shellscript inside shellscript","body":"<p>I've been scratching my head on this for a while.\nI have a script that is run by a root cron job.\nThe script executes, but there is a script inside the script that wont execute.\nHere is what we will call scriptA</p>\n\n<pre><code>#!/bin/bash\nlines=`wc -l &lt; /var/www/log/addme`;\nDATE=`date +%Y-%m-%d`\n\nif [[ $lines &gt; 4 ]];\nthen\necho \" \" &gt; /var/www/log/addme\nRESTART=/var/www/log/restart.sh\n$RESTART\nelse\necho \"No new hosts added\" | wall\nfi\n</code></pre>\n\n<p>Basically what the restart.sh script does is to restart a service.\nEverything works just fine when I run them from terminal, but not as cron jobs...\nI also tried to just put</p>\n\n<pre><code>./restart.sh\n/var/www/log/restart.sh\n</code></pre>\n\n<p>But with same result.\nAny thoughts? </p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13278255,"title":"proper use of quotes","body":"<p>I want to achieve this with bash:</p>\n\n<pre><code>for i in {1..2}\ndo\nfor j in {1..2}\ndo\necho $i $j &gt;&gt; tmp.txt\ndone\ndone\n\ncat tmp.txt\n1 1\n1 2\n2 1\n2 2\n</code></pre>\n\n<p>However I want to do it like this with the echo variable inside quotes:</p>\n\n<pre><code>cmd=\"\nfor i in {1..2};\ndo for j in {1..2};\ndo echo \\$i \"\\$j\" '\\$i' \"'\\$j'\" \\$i \"'$j'\" \\'$i\\' \\\"$j\\\" &gt;&gt; tmp.txt;\ndone;\ndone\n\"\neval $cmd\n</code></pre>\n\n<p>I can't seem to get the quotes right. Is it possible to achieve what I want?</p>\n\n<p>Thank you!</p>\n"},{"tags":["linux","bash","ssh","scp"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":559,"score":5,"question_id":6268713,"title":"How can I scp a file and run an ssh command asking for password only once?","body":"<p>Here's the context of the question:</p>\n\n<p>In order for me to be able to print documents at work, I have to copy the file over to a different computer and then print from that computer. (Don't ask.  It's complicated and there is not another viable solution.)  Both of the computers are Linux and I work in bash.  The way I currently do this is I <code>scp</code> the file over to the print computer and then <code>ssh</code> in and print from command line.</p>\n\n<p>Here's what I would like to do:</p>\n\n<p>In order to make my life a bit easier, I'd like to combine these two step into one.  I could easily write a function that did both these steps, but I would have to provide my password twice.  Is there any way to combine the steps so that I only provide my password once?</p>\n\n<p><strong>Before somebody suggests it, key-based ssh-logins are not an option.  It has been specifically disabled by the Administrators for security reasons.</strong></p>\n\n<p>Solution:</p>\n\n<p>What I ended up doing was a modification of the second solution Wrikken provided.  Simply wrapping up his first suggestion in a function would have gotten the job done, but I liked the idea of being able to print multiple documents without having to type my password once per document.  I have a rather long password and I'm a lazy typist :)</p>\n\n<p>So, what I did was take a sequence of commands and wrap them up in a python script.  I used python because I wanted to parameterize the script, and I find it easiest to do in python.  I cheated and just ran bash commands from python through os.system.  Python just handled parameterization and flow control.  The logic was as follows:</p>\n\n<pre><code>if socket does not exist:\n    run bash command to create socket with timeout\ncopy file using the created socket\nssh command to print using socket\n</code></pre>\n\n<p>In addition to using a timeout, I also put have an option in my python script to manually close the socket should I wish to do so.  </p>\n\n<p>If anyone wants the code, just let me know and I'll either paste-bin it or put it on my git repo.</p>\n"},{"tags":["python","bash","shlex"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":53,"score":4,"question_id":13276755,"title":"Using Python to cat a file over ssh to a remote bash script","body":"<p>I'm using subprocess.popen with shlex to call a remote bash script using ssh.  This command works quite fine on bash itself.  But as soon as I try to translate it to python and shlex with subprocess.popen it errs out.</p>\n\n<p>Remote bash script:</p>\n\n<pre><code>#!/bin/bash\ntmp=\"\";     \nwhile read -r line;\ndo\n    tmp=\"$tmp $line\\n\";\ndone;\necho $tmp;\n</code></pre>\n\n<p><strong>BASH CMD RESULT</strong>(Invoking the remote bash script on the command line)</p>\n\n<pre><code>$&gt; ssh x.x.x.x cat &lt; /tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt \" | /path/to/bash/script.sh;\"\nBar\\n\n$&gt; \n</code></pre>\n\n<p>Python code</p>\n\n<pre><code>import shlex\nimport subprocess\n\nfn = '/tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt'\ns = \"\"\"                                                                    \nssh x.x.x.x cat &lt; {localfile} '| /path/to/bash/script.sh;'\n\"\"\".format(localfile=fn)\n\nprint s\n\nlexer = shlex.shlex(s)                                                     \nlexer.quotes = \"'\"                                                         \nlexer.whitespace_split = True                                              \nsbash = list(lexer)                                                        \nprint sbash                                                                \n\n# print buildCmd                                                           \nproc=subprocess.Popen(sbash,stdout=subprocess.PIPE,stderr=subprocess.PIPE) \nout,err=proc.communicate()                                                 \n\nprint \"Out: \" + out                                                        \nprint \"Err: \" + err                                                        \n</code></pre>\n\n<p><strong>PYTHON SCRIPT RESULT</strong>:</p>\n\n<pre><code>$&gt; python rt.py\n\n    ssh x.x.x.x cat &lt; /tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt '| /path/to/bash/script.sh'\n['ssh', 'x.x.x.x', 'cat', '&lt;', '/tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt', \"'| /path/to/bash/script.sh'\"]\nOut: \nErr: bash: /tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt: No such file or directory\n$&gt;\n</code></pre>\n\n<p>What am I missing?</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13275013,"title":"Bash: current directory variable","body":"<p>What I'm trying to do is find the current working directory and save it into a variable, so that I can run <code>export $PATH=$PATH:currentdir+somethingelse</code>. :s not entirely sure if they have a variable that contains cwd by default.</p>\n\n<p>I've tried ${PWD} but that didn't work for me :(</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":34,"score":0,"question_id":13276788,"title":"Create array in bash dynamically","body":"<p>I would like to create and fill an array dynamically but it doesn't work like this:</p>\n\n<pre><code>i=0\nwhile true; do\n    read input\n    field[$i]=$input\n    ((i++))\n    echo {$field[$i]}  \ndone\n</code></pre>\n"},{"tags":["bash","list","shell","for-loop","wildcard"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13270322,"title":"Avoiding wildcard expansion in Bash loop","body":"<p>I want to use a list as parameter to a for-loop; but <em>with</em> double quotes, the list isn't understood as a list, and <em>without</em> quotes, the wildcards are evaluated to filenames. </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>A=\"a* b*\"\n\nfor ex in \"$A\"; do\n    echo \"$ex\";\ndone\n\nfor ex in $A; do\n    echo \"$ex\";\ndone\n</code></pre>\n\n<p>The first one prints:</p>\n\n<pre><code>a* b*\n</code></pre>\n\n<p>The latter prints:</p>\n\n<pre><code>a.txt\nb.txt\n</code></pre>\n\n<p>I want:</p>\n\n<pre><code>a*\nb*\n</code></pre>\n\n<p>How can I make this work?</p>\n"},{"tags":["bash","vim","cygwin","alias"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13262139,"title":"How can I alias 'gvim filename' to 'gvim filename &'","body":"<p>I want gvim to always open in a separate window and return the command prompt immediately.  In other words I want</p>\n\n<pre><code>gvim filename\n</code></pre>\n\n<p>to be the same as</p>\n\n<pre><code>gvim filename &amp;\n</code></pre>\n\n<p>it seems like I should be able to do this with an alias.  Is there a special wildcard character for aliases?  Something like:</p>\n\n<pre><code>alias gvim=\"gvim &lt;wildcard&gt; &amp;\"\n</code></pre>\n\n<p>Where \"wildcard\" would be replaced by whatever text comes after gvim on the command line.</p>\n\n<p>I also tried:</p>\n\n<pre><code>function gvim() \n{ \n    \"/cygdrive/c/program files (x86)/vim/vim72/gvim.exe\" \"$@\" \"&amp;\" ;\n}\n</code></pre>\n\n<p>But it only opens gvim and doesn't return the prompt like I want it to.</p>\n\n<p>If someone could point me in the right direction, it would greatly improve my understanding of how .bashrc works.</p>\n\n<p>Thanks!</p>\n\n<p>-Derek</p>\n\n<p>UPDATE: I got it to work by getting rid of the quotation marks around the &amp; and the semicolon at the end:</p>\n\n<pre><code>function gvim() \n{ \n    \"/cygdrive/c/program files (x86)/vim/vim72/gvim.exe\" \"$@\" &amp;\n}\n</code></pre>\n"},{"tags":["arrays","bash","email","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13272184,"title":"How to send array values by mail","body":"<p>in linux scripting,</p>\n\n<p>is there a way to use mail function to one time send array values??</p>\n\n<pre><code>function my_mail_function(){\n\n# send array values\nmail array_values_here \"mymail@domain.tld\" ;\n}\n</code></pre>\n\n<p>Thank you</p>\n"},{"tags":["android","linux","image","bash","imagemagick"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13273909,"title":"Change the quality of the image (without changing the resolution)","body":"<p>I found this command</p>\n\n<p>Resize an image with improved quality:</p>\n\n<pre><code>$ convert input.png -colorspace RGB +sigmoidal-contrast 11.6933 \\ \n-define filter:filter=Sinc -define filter:window=Jinc -define filter:lobes=3 \\ \n-resize 400% -sigmoidal-contrast 11.6933 -colorspace sRGB output.png\n</code></pre>\n\n<p>But I need something else, I need a command to decrease the image quality.\nFor example if the input.png is 100pix x 100pix resolution and 100KB size\nI want to make an output.png image with the same resolution but lower quality, let say 50KB</p>\n\n<p>how can I do this ?</p>\n\n<p>(My original problem is the limitation to 50KB images, and all I want to do is convert all my images below 50KB size).</p>\n\n<p>I hope this is easy to solve but could not figured out on my own.</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","filenames","spaces","cp"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":232,"score":0,"question_id":6848783,"title":"How do I use a variable containing a filename with spaces in a bash script?","body":"<p>I have a simple bash script running on OS X that removes specific files and directories and copies new ones in their place.  One Mac .app directory contains a space, and when I run the script there is a \"No such file or directory\" error.</p>\n\n<p>Here is the relevant code.  A good amount has been cut out, so simply hard coding these differently isn't possible (the variables must be broken up as they are):</p>\n\n<pre><code>CP=\"cp -Rf\"\n\nINSTALL_DIR=\"/Applications/\"\n\nAPP=\"The App.app\"\n\nNEWAPP=\"$HOME/Downloads/The App.app\"\n\n$CP \"$NEWAPP \" \"$INSTALL_DIR$NEWAPP\"\n</code></pre>\n\n<p>I've tried escaping <code>The\\ App.app</code> with no luck, as well as trying single quoting, double quoting, and double escaping, but nothing has worked.  I imagine there is a simple way to do this.</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["linux","bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13275220,"title":"execute a directory in linux","body":"<p>I would like to execute a directory like this: './some_directory some_args'. In that some_directory there can be a script that grabs these some_args, processes them and passes them to a binary executable or other script located in the same directory. Basically, I want to run a script in some_director without specifying its name. There is got to be a default script to run I guess when doing './some_directory some_args' in bash or other shell. Thanks.</p>\n"},{"tags":["bash","shell","prolog","swi-prolog","gnu-screen"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":13263264,"title":"Screen escapes differently when called from bash","body":"<p>I have a long running server process called ROBUST, which has a console. We run it in a screen and attach to manually manipulate the server (it's a virtual world server).</p>\n\n<p>I have a web app (in prolog) that occasionally needs to add a user. ROBUST has a couple programmatic interfaces that are both awkward for various reasons. So I'm trying to just\nshell out, attach a screen with -X, and do the equivilent of typing</p>\n\n<p>create user SomeUser SomeName SomePass somebody@somewhere.com\nnewline</p>\n\n<p>on the console.  This line </p>\n\n<p><code>screen -S ROBUST -p 0 -X eval 'stuff \"create user SomeUser SomeName SomePass somebody@somewhere.com ^M\"</code>'</p>\n\n<p>works </p>\n\n<p>but when I put it in this bash script</p>\n\n<pre><code>#!/bin/bash\nscreen -S ROBUST -p 0 -X eval 'stuff \"create user $1 $2 $3 $4 ^M\"'\n</code></pre>\n\n<p>it doesn't.\nAttaching to the ROBUST console with another terminal and watching, it thinks the line ends at create user</p>\n\n<p>I've tried every scheme I can think of for escaping the various single and double quotes, but at this point am stumped.</p>\n\n<p>later comment:</p>\n\n<p>I got around the need for bash script by figuring out the prolog process_create syntax</p>\n\n<pre><code>?- process_create(path(screen), ['-S', 'ROBUST', '-p', '0', '-X', eval, 'stuff \"create user Manny Muncher somepass somebody@uh.edu^M\"'], []).\n</code></pre>\n"},{"tags":["linux","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13275983,"title":"Bad substitution error in bash script","body":"<p>I have tried a lot but couldn't get the solution out of it. I have a simple script:</p>\n\n<pre><code>#! /bin/sh\no=\"12345\"\na=o\nb=${!a}\necho ${a}\necho ${b}\n</code></pre>\n\n<p>When executed like</p>\n\n<pre><code>$ . scp.sh\n</code></pre>\n\n<p>it produces the correct output with no errors but when executed like:</p>\n\n<pre><code>$ ./scp.sh\n</code></pre>\n\n<p>it produces \n    ./scp.sh: 4: ./scp.sh: Bad substitution</p>\n\n<p>Any ideas why this is happening. </p>\n\n<p>@bobah suggested to use bash mode and it works fine. But when I execute this same script through python (changing the script header to bash), I am getting the same error.</p>\n\n<p>Question edited again:</p>\n\n<pre><code>import os\nos.system(\". ./scp.sh\")\n</code></pre>\n\n<p>Regards</p>\n\n<p>Shahzad</p>\n"},{"tags":["perl","bash","perl-module"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13275288,"title":"How do you prevent perl from making a dump file?","body":"<p>Currently I am running several scripts which are in a experimental testing stage. Unfortunately they crash on occasion and generate large \"core-perl-11-544-546-27320-1xxxxxxx\" perl core dump files.</p>\n\n<p>I want to ensure that if in the future these files crash again, they do not generate perl dump files, or the files size of the dump is limited. </p>\n\n<p>Right now there are some scripts checking for Perl core dump files and removing them if they are greater than a set size, but this is an obvious band-aid on a broken knee. </p>\n\n<p><strong>How might I go about limiting the size of the perl dump file, or preventing one from being made?</strong></p>\n"},{"tags":["linux","bash","shell","variables","mysqldump"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":35,"score":-1,"question_id":13270050,"title":"Variable stops file extension being included in filename","body":"<p>I have this working script to save a daily backup named (for example) <code>db-Nov-07-2012.sql.gz</code>:</p>\n\n<pre><code>#!/bin/bash\nNOW=$(date +\"%b-%d-%y\")\nmysqldump -h server -u user -ppassword dbname | gzip &gt; /path/to/folder/db-backups/db-$NOW.sql.gz\n</code></pre>\n\n<p>But when I modify the script to save a quarterly backup named (for example) <code>db-Nov-07-2012-09-35.sql.gz</code>:</p>\n\n<pre><code>#!/bin/bash\nNOW=$(date +\"%b-%d-%y-%H-%M\")\nmysqldump -h server -u user -ppassword dbname | gzip &gt; /path/to/folder/db-quarter-backups/db-$NOW.sql.gz\n</code></pre>\n\n<p>it did previously work, and I have since reuploaded (accidentally deleted) it and now no longer includes the file extension in the filename; I get just <code>db-Nov-07-2012-09-35</code>, without the <code>.sql.gz</code>.</p>\n\n<p>The file is created on Windows and ran on linux.</p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["linux","bash","logging","ssh"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13274818,"title":"Bash - Log ssh script timstamp of execution to file in server","body":"<p>I have a script that executes some commands remotely, everytime it runs it appends the time of execution to a log, thought I was doing it right but then realized the script was sending the time/date of my machine and not using the server time/date in the log.</p>\n\n<p>This is the command I'm using right now:</p>\n\n<pre><code>ssh root@myserver \"echo \\\"*** Log info of $(date -u) ***\\\" &gt;&gt; /var/log/app.log\"\n</code></pre>\n\n<p>I tried using single quotes but it does not work at all the script shows an error.</p>\n\n<p>Is there a better way to log that time to a server file?</p>\n\n<p>Thanks in advance for any advice</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13272728,"title":"Bash script get item from array","body":"<p>I'm trying to read file line by line in bash.</p>\n\n<p>Every line has format as follows <code>text|number</code>.</p>\n\n<p>I want to produce file with format as follows <code>text,text,text</code> etc. so new file would have just text from previous file separated by comma. </p>\n\n<p>Here is what I've tried and couldn't get it to work :</p>\n\n<pre><code>FILENAME=$1\n\nOLD_IFS=$IFSddd\nIFS=$'\\n'\ni=0\nfor line in $(cat \"$FILENAME\"); do\n    array=(`echo $line | sed -e 's/|/,/g'`)\n    echo ${array[0]}\n    i=i+1;\ndone\nIFS=$OLD_IFS\n</code></pre>\n\n<p>But this prints both text and number but in different format <code>text number</code></p>\n\n<p>here is sample input :</p>\n\n<pre><code>dsadadq-2321dsad-dasdas|4212\ndsadadq-2321dsad-d22as|4322\n</code></pre>\n\n<p>here is sample output:</p>\n\n<pre><code>dsadadq-2321dsad-dasdas,dsadadq-2321dsad-d22as\n</code></pre>\n\n<p>What did I do wrong?</p>\n"},{"tags":["git","bash","hook"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":44,"score":3,"question_id":13179232,"title":"Git post-receive hook not firing external script","body":"<p>Here's what I've done so far:</p>\n\n<ol>\n<li>I have a server that hosts websites and their git repositories.</li>\n<li>I have a user named <code>git</code> that owns all the repos and has the ability to log in as any user without entering a password.</li>\n<li>I created a hook called <code>post-receive</code> in the <code>hooks</code> directory on my repo.</li>\n<li>I also created a script called <code>gitpull</code> that pulls the info to the sites automatically.</li>\n</ol>\n\n<p>Everything is O.K. when I type this command:</p>\n\n<pre><code>su - git -c \"/git/sitename.git/hooks/post-receive\"\n</code></pre>\n\n<p>but when I push something from my development machine, it does not run the script <code>gitpull</code>.</p>\n\n<p>Here are my files:</p>\n\n<ul>\n<li><p><code>/etc/gitpull</code>:</p>\n\n<pre><code>#!/bin/bash\nsu - $1 -c \"cd ~/www;git pull;\"\n</code></pre></li>\n<li><p><code>/git/sitename/hooks/post-receive</code>:</p>\n\n<pre><code>#!/bin/bash\n/etc/gitpull sitename\n</code></pre></li>\n</ul>\n\n<p>How can I fix this? What am I doing wrong?</p>\n"},{"tags":["bash","shell","case","wildcard"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":13273621,"title":"Shell is variable a number","body":"<p>Good evening,\nI want to write a script that will say if its argument is a number or not, however I get this:</p>\n\n<pre><code>a: 4: Syntax error: \"(\" unexpected (expecting \")\")\n</code></pre>\n\n<p>At first I tried like this:</p>\n\n<pre>\n    #!/bin/bash\n    case \"$1\" in\n        0x* ) echo hex ;;\n        ''|*[!0-9]*) echo dec ;;\n        * ) echo wtf ;;\n    esac\n</pre>\n\n<p>Later I have found this bit:</p>\n\n<pre>\n    if ! [[ \"$yournumber\" =~ ^[0-9]+$ ]] ; then\n       exec >&2; echo \"error: Not a number\"; exit 1\n    fi\n</pre>\n\n<p>Well, none of them works, I call for help!</p>\n"},{"tags":["bash","shell","script","sh"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13271003,"title":"shell script for awk does not give desired output","body":"<pre><code>#!/bin/bash\n\nindex=101,102,103,104,105\n/bin/echo \"$index\" | /bin/awk -F\\, '{print $2}'\n</code></pre>\n\n<p>above is my shell script,(this is just a demo It should not be static) when I execute this It returns me value \"102\" it is right.</p>\n\n<pre><code> #!/bin/bash\n\nindex=101,102,103,104,105\n\nfor i in 1 2 3 4 5\ndo\n/bin/echo \"$index\" | /bin/awk -F\\, '{print $i}'\ndone\n</code></pre>\n\n<p>I want to print all numbers one by one...where I am wrong ?</p>\n\n<pre><code>expected output:\n101\n102\n103\n104\n105 \n</code></pre>\n"},{"tags":["bash","install"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13272399,"title":"Bash command for automatically confirm option during installation","body":"<p>Whenever you're installing a package, it usually prompts for y/n confirmation, is there a way to automate this?</p>\n"},{"tags":["python","bash","serial-port"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":121,"score":1,"question_id":12016029,"title":"Moving Terminal Program from Bash to Python on Linux","body":"<p>I am dealing with an Industrial Environment where I must record readings from a serial device out in the field. My current setup involves the device connected to a Moxa 5150A or 5130 Serial Device Server which connects to my network thru wired or wireless means depending on the location of the individual device. At current I am reliant upon software from my hardware vendor to manage the data collection. The current software is windows X86 based and has cause no end of trouble on newer hardware we have purchased due to the failure of previous hardware. I selected the Moxa serial servers specifically for their linux drivers and compatibility. The device communicates over RS-422 (4-wire Half Duplex) 7-bit 1-stop odd-parity and NO-flow control and does not send any information unless requested.</p>\n\n<p>I am working to develop my own solution that will store the information in a database (probably MySQL). In terms of terminal communication this is two part. I must send a request and receive the response.</p>\n\n<p>To date I have installed the Moxa drivers for the serial servers onto my linux server. I have written a bash script that reads from the /dev/ttyrXX device, interprets the input and loads the information into a mysql database.</p>\n\n<pre><code>      while read line\n      do\n      something something....\n      done &lt; /dev/ttyrXX\n</code></pre>\n\n<p>I am still working out minor scripting bugs such as restarting properly when a device goes offline and later comes back online and other such issues, but my script is reading and logging my data well within my needs.</p>\n\n<p>This solution relies on two factors. </p>\n\n<p>1) the Moxa Devices support FIFO and allow multiple connections simultaneously</p>\n\n<p>2) the vendor provided software running on a separate windows machine is currently submitting requests for information.</p>\n\n<p>I need to remove the windows based software all together. I have written and tested a script that prints to /dev/ttyrXX making my desired requests and received the appropriate responses and had them logged as desired by my first script.</p>\n\n<pre><code>     some list of things\n     for x in list\n     do         \n     printf \"request\" &gt; /dev/ttyrXX\n     done\n</code></pre>\n\n<p>One of the major issues I have experienced with the vendor supplied software is its hard coded dependence on receiving a timely response to every single request. This creates a number of issues including completely freezing up windows and crashing should the device fall out of service at an inopportune time.</p>\n\n<p>My two scripts working in unison collect the data at a significantly better interval and with alot less human intervention.</p>\n\n<p>Here is my question. What method can I use in Python to obtain comparable results to my Bash script? </p>\n\n<p>I have been unable to locate a Python equivalent to printf or cat that does not require me to open/close a file. Furthermore every terminal interface I've looked at has the built-in or required wait for response or read for so long before giving up. I'm certain that something exists out there I have simply had little to no luck finding it. I'll admit that I am brand spanking new to Python and have not written more than a few lines of code to poke around at its abilities.</p>\n\n<p>Let me be very clear. I want to write to my terminal without concern for anything else when I'm writing (using a thread or separate script I don't care). I want to read from my terminal without a care in the world for when my next bit of text is coming. (I'm not suggesting a never ending loop, but I do need it to simply stand by and wait for input). I WANT/NEED my write to and read from to be completely independent of one another with no concern for what the other is doing yesterday, right now, or next week.</p>\n\n<p>Thank You in advance.</p>\n\n<p>I will be able to provide more detailed code if that is necessary, However I feel that I am in more need of direction in my searching than for bug fixing. Though I am still completely open to advice and \"Don't EVER DO THIS.... BECAUSE OF THIS...\" type input</p>\n"},{"tags":["linux","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":60,"score":-1,"question_id":13260974,"title":"How to check if process is running in linux","body":"<p>I am trying to automatically check if a process is running or not and have to perform next steps accordingly. I had written a bash script but it doesn't seem to work.</p>\n\n<pre><code>if ps aux | grep [M]yProcessName &gt; /dev/null\nthen\n  echo \"Running\"\nelse\n  echo \"Not running\"\nfi\n</code></pre>\n\n<p>Is my <code>if</code> statement wrongly used?</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":395,"score":2,"question_id":10582763,"title":"How to return an array in bash without using globals?","body":"<p>Suppose you've written some function which gathers some values in an array.</p>\n\n<pre><code>my_algorithm() {\n  create_array # call create_array somehow\n  # here, work with the array \"returned\" from my_list\n}\n\ncreate_array() {\n  local my_list=(\"a\", \"b\", \"c\")\n}\n</code></pre>\n\n<p>How can I \"return\" my_list without using anything global?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I could do something like</p>\n\n<pre><code>my_algorithm() {\n  local result=$(create_array)\n}\n\ncreate_array() {\n  local my_list=(\"a\", \"b\", \"c\")\n  echo \"${my_list[@]}\"\n}\n</code></pre>\n\n<p>But then, I only get an expanded string (or is this the way to go?).</p>\n"},{"tags":["mysql","bash","heredoc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13268018,"title":"How to pass an asterisk into bash heredoc?","body":"<p>I execute a MySQL statement with an asterisk from within a bash shell:</p>\n\n<pre><code>query=`cat &lt;&lt;EndOfMySQL\nINSERT tmp_table\nSELECT * FROM table\n;\nEndOfMySQL\n`\n\necho $query\n\necho $query | mysql database\n</code></pre>\n\n<p>The problem is the asterisk is replaced by the list of files in the current directory and the query becomes erroneous. How to avoid this behavior? It doesn't matter whether I use backticks or <code>$()</code>. I'd expect some escape sequence like <code>\\*</code>, but at least this one doesn't work.</p>\n"},{"tags":["linux","bash","awk"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":13258902,"title":"Simple aggregation using linux scripting","body":"<p>Let's say I have a text file with lines like these:</p>\n\n<pre><code>foo 10\nbar 15\nbar 5\nfoo 30\n...\n</code></pre>\n\n<p>What's the simplest way to generate the following output:</p>\n\n<pre><code>foo 40\nbar 20\n</code></pre>\n\n<p>?</p>\n"},{"tags":["python","linux","bash"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13267948,"title":"Linux server list users who can login","body":"<p>I would like either a one liner shell command or a short bash/python script that will list all the users on a Linux server that can login to that machine. so users like www-data and mail would be excluded of course but root would be part of the list.</p>\n\n<p>This code for example works. I <a href=\"https://gist.github.com/1989361\" rel=\"nofollow\">found it here</a>. But I'm looking for something simpler cleaner.</p>\n\n<pre><code>awk -F: '$2 != \"*\" &amp;&amp; $2 !~ /^!/ { print $1, \" can log in\" }' /etc/shadow\n</code></pre>\n"},{"tags":["bash","daemon","inotify","inotify-tools"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13267359,"title":"How to daemonize an inotifywait bash script on ubuntu?","body":"<p>I'm currently fighting to track changes on my filesystem.</p>\n\n<p>My problem is that I need to watch a bit over 150 folders recursively and take some action based on the file that has been added. Therefore I already tried serveral options like incron(not recursive working - next please) and finally came up with inotifywait which does a perfect job so far - but has to run in my active shell and does not run in the background which forces me to keep the shell open and this is some kind of not possible.</p>\n\n<p>So what I want to do is, to make a daemon with that inotifywait command.</p>\n\n<p>My Script looks like this:</p>\n\n<pre><code>#!/bin/sh\n\ninotifywait -rm --format '%w %f' -e close_write /var/www/catalog | while read dir file; do\n/root/bin/filechanged.sh ${dir}${file}\ndone\n</code></pre>\n\n<p>As I came down to the man page of inotifywait I recognized that there is a -d option for daemon:</p>\n\n<blockquote>\n  <p>-d, --daemon Same as --monitor, except run in the background logging events to a file that must be specified by --outfile. Implies\n  --syslog.</p>\n</blockquote>\n\n<p>But that didn't work as expected as my while loop still needs to read the output to tell me what file has changed.</p>\n\n<p>After some search on google I came up with a startup script like the one underneath, that nearly worked but missed some stuff to make it work as a service. Unfortunately the one who fixed the script didn't post his solution but only said it works now after a small fix.</p>\n\n<pre><code>    start() {\n    if [ ! -x \"$inotifywait\" ]; then\n        exit 5\n    fi\n    echo -n $\"Starting $prog: \"\n    daemon $inotifywait -rm --format '%w %f' -e close_write /var/www/catalog | while read dir file; do\n        /root/bin/filechanged.sh ${dir}${file}\n    done &gt;/dev/null 2&gt;&amp;1 &amp;\n    RETVAL=$?\n    if [ $RETVAL -eq 0 ]; then\n        touch $lockfile\n    fi\n    echo\n\n    return $RETVAL\n}\n</code></pre>\n\n<p>So, I just need to make this job a background job so that I'm no longer forced to have this one shell open all the time. I thought about the -d option and tracking down the log file, but that seemed to be the hard way.</p>\n\n<p>I'm really thankful for any help! </p>\n"},{"tags":["bash","shell"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":13265697,"title":"bash redirection with a result of another command","body":"<p>This command works very well.</p>\n\n<pre><code>bash &lt; &lt;(echo 'ls')\n</code></pre>\n\n<p>How this code work?<br>\nI cannot understand internal process of this script.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":27,"score":1,"question_id":13255642,"title":"Preserve color when outputing with tee","body":"<p>I'm trying to get the output of a program (which has colors) and output it with <code>tee</code>. I want the output to have colors on the terminal (stdout) but not on the output file. Is this possible?</p>\n"},{"tags":["linux","bash","mount"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13262519,"title":"granting access to files on a USB drive from separate computers","body":"<p>All,</p>\n\n<p>I have two computers: home and work.  I have set these up pretty similarly (although home is Linux Mint 13 and work is Ubuntu 11.10).  Assume my account name at work is \"me_work\" and my account name at home is \"me_home\". </p>\n\n<p>I use a USB drive to share files from one computer to the other.  I have written a script which mounts different directories of that drive to different directories on each system.  For example, I do something like:</p>\n\n<pre><code>mount --bind /media/USB/MyProject $HOME/Projects/MyProject\n</code></pre>\n\n<p>As I work, on either computer, I do stuff in $HOME/Projects and this all gets saved on the USB drive.  If I swap the USB drive out from one computer to the other, the files are all still there.  </p>\n\n<p>But there's a problem.</p>\n\n<p>If I create a file while on my work computer it will be owned by the user \"me_work\" and the associated group \"me_work\".  If I try to play with that file on my home computer I fail b/c I don't have permission to modify them.  Furthermore, the \"me_work\" user or group are not known on my home computer.  </p>\n\n<p>Now, I could just <code>sudo</code> into everything, but I'm not always using a terminal - sometimes I'm doing stuff on a webserver, sometimes I'm using an IDE, etc.  </p>\n\n<p>How can I set things up so that the contents of the USB drive are readable by both my accounts?  I have tried adding a new group to both computers called \"me_usb\" and setting both accounts to be members of that group.  Then setting the gid of the directories on the USB to \"me_usb\" and making them group-writable.  Unfortunately, that had no effect.</p>\n"},{"tags":["bash","shell","unix"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13264529,"title":"How to find if there are new files in a directory every 2 minutes in shell script?","body":"<p>I have a directory called <code>/home/user/local</code>. Every two minutes or so, a new file is dumped into this directory. I need to check this directory every 2 minutes to see if a new file/files have landed in there. And if there are new files, I need to put a list of it into a variable to use later on. How do I do this shell script? </p>\n"},{"tags":["bash","parameters"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13264375,"title":"Checking the data in the file and only accepting the required number of parameters to calculte the area using bash script","body":"<p>Part 1) My script allows the command line options -r, -c, and -t for rectangle, circle and trapezoid respectively.  The rectangle option requires two arguments, the length and the width.  The circle option requires one argument, the radius.  The trapezoid option requires three arguments, the height and each of the parallel bases. \nPart 2) The script allows the option, -f.  When this option is used in conjunction with -r, -c, or –t, each option takes one argument, the name of the input file.  The input values would be read from the input file one line at a time and the areas printed to stdout. The script should terminate when a value of –1 is read.</p>\n\n<p>I have part 1 and part 2 both done except the script terminating when -1 is read. What I want to do on the second part is for the rectangle when i give it an input file is to check whether that file has 2 values in each line or not. If it does not have 2 values then echo \"file has invalid set(s) of data\". Same with circle, it should not accept anything that has more or less value than 1 in each line of th input file and for trapezoid 3. </p>\n\n<pre><code>        filename=$OPTARG;;\n        while read -a line\n        do\n            if (( $choice == 1 ))\n                    then\n                            Area=`echo \"scale=3; ${line[0]}*${line[1]}\" | bc`;\n                            echo \"Area of the rectangle is $Area\";\n\n            fi\n            if (( $choice == 2 ))\n                    then\n                            Pi=3.1416\n                            Area=`echo \"scale=3; ${line[0]*$line[0]}*$Pi\" | bc`;\n                            echo \"Area of the circle is $Area\";\n\n            fi\n            if (( $choice == 3 ))\n                then\n                            Area=`echo \"scale=3; (${line[0]}+${line[1]})/2*${line[2]}\" | bc`;\n                            echo \"Area of the trapezoid is $Area\";\n\n            fi\n            done &lt; \"$filename\"\n</code></pre>\n"},{"tags":["bash","find","sh"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13263894,"title":"Unix `find` on Win MSYS, no such file or directory","body":"<p>I'm trying run a <code>git pull</code> on a bunch of folders. This is what I got so far:</p>\n\n<pre><code>find . -type d -name .git \\\n| xargs -n 1 dirname \\\n| while read line; do cd $line &amp;&amp; git pull; done\n</code></pre>\n\n<p>Problem is that <code>cd</code> doesn't work I get a bunch of errors:</p>\n\n<pre><code>sh: cd: ./project_one: No such file or directory\nsh: cd: ./project_two: No such file or directory\n...\n</code></pre>\n\n<p>But when I do <code>cd ./project_one</code> it works fine. What's wrong? Any ideas?</p>\n"},{"tags":["bash","shell","script","snmp"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13252583,"title":"shell script : array related issue","body":"<p>using linux 2.6.18..  </p>\n\n<pre><code>/bin/bash -version\nGNU bash, version 1.14.7(1)\n</code></pre>\n\n<p>(snmpwalk command gives output in a console like...below)</p>\n\n<pre><code>33\n4232\n5342\n632\n45342\n23342\n3243\n</code></pre>\n\n<p>I am using shell script to grep data from snmp and trying to add it in array. but cannot do this with following problems...</p>\n\n<pre><code>#!/bin/bash\nOID=\"1.3.6.1.2.1.2.2.1\"\n\ndeclare -a index=$(snmpwalk -v 2c -c public -Oqv localhost ${OID}.1) \ndeclare -a upload=$(snmpwalk -v 2c -c public -Oqv localhost ${OID}.10) \ndeclare -a download=$(snmpwalk -v 2c -c public -Oqv localhost ${OID}.11)\n\necho \"retrieved ${#index[@]} elements\"\necho \"#${index[3]}: up=${upload[2]} down=${download[2]}\"\n</code></pre>\n\n<p>output:</p>\n\n<pre><code> + declare -a index=1 2\n    j2.sh: 4: j2.sh: declare: not found\n</code></pre>\n\n<p>(so I can not use 'declare')</p>\n\n<p>2nd way </p>\n\n<pre><code>#!/bin/bash\n\n    OUTPUT1=$(snmpbulkwalk -Oqv -c public -v 2c localhost\n    1.3.6.1.4.1.21067.4.1.1.1 2&gt; /dev/null)\n    i=1\n    index=1\n    upload=1\n    download=1\n    for LINE in ${OUTPUT1}\n        do\n            index=$LINE\n\n        OUTPUT2=$(snmpget -Oqv -c public -v 2c localhost 1.3.6.1.4.1.21067.4.1.1.10.$i 2&gt; /dev/null)\n        OUTPUT3=$(snmpget -Oqv -c public -v 2c localhost 1.3.6.1.4.1.21067.4.1.1.11.$i 2&gt; /dev/null)\n            upload=$OUTPUT2\n            download=$OUTPUT3\n            i=`expr $i + 1`\n        done\n</code></pre>\n\n<p>its gives bettelnack with large amount of data...</p>\n\n<p>3ra approch :</p>\n\n<pre><code>#!/bin/bash\nOUTPUT=$(snmpbulkwalk -Oqv -c public -v 2c localhost\n1.3.6.1.4.1.21067.4.1.1.1 2&gt; /dev/null)\ni=0\nindex[3000]=0\nfor LINE in ${OUTPUT} ; do\n    index[$i]=$LINE\n    i=`expr $i + 1`\n\ndone\n</code></pre>\n\n<p>here index[1],index[2]...... are not fount</p>\n"},{"tags":["bash","echo"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":104,"score":4,"question_id":13258664,"title":"echo \"-n\" will not print -n?","body":"<p>Very similar <a href=\"http://stackoverflow.com/questions/320313/echo-e-doesnt-print-anything\">to this question</a>.</p>\n\n<p>I'm iterating through a few things with an automated script in BASH. Occasionally the script will come across \"-n\" and echo will attempt to interpret this.</p>\n\n<p>Attempted this:</p>\n\n<pre><code> $ POSIXLY_CORRECT=1 /bin/echo -n\n</code></pre>\n\n<p>and</p>\n\n<pre><code> $ POSIXLY_CORRECT=1 /bin/echo \"-n\"\n</code></pre>\n\n<p>But it interpreted the argument each time.</p>\n\n<p>Then this, which works but it's possible to hit escaped characters in the strings, which is why I don't want to apply a null character to all input and use -e.</p>\n\n<pre><code>$ echo -e \"\\x00-n\"\n-n\n</code></pre>\n\n<p>printf is possible, but is to be avoided unless there are no other options (Not all machines have printf as a utility).</p>\n\n<pre><code>$printf \"%s\" \"-n\"\n-n\n</code></pre>\n\n<p>So is there a way to get echo to print \"-n\"?</p>\n"},{"tags":["bash","shell","cp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13258123,"title":"Shell Scripting unwanted '?' character at the end of file name","body":"<p>I get an unwanted '?' at the end of my file name while doing this: </p>\n\n<pre><code>emplid=$(grep -a \"Student ID\" \"$i\".txt  | sed 's/(Student ID:  //g' | sed 's/)Tj//g' ) \n #gets emplid by doing a grep from some text file\necho \"$emplid\"   #prints employee id correctly \ncp \"$i\" \"$emplid\".pdf  #getting an extra '?' character after emplid and before .pdf\n</code></pre>\n\n<p>i.e instead of getting the file name like 123456.pdf , I get 123456?.pdf . \nWhy is this happening if the echo prints correctly? \nHow can I remove trailing question mark characters ?</p>\n"},{"tags":["bash","shell","sed","awk","grep"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13260386,"title":"Shell script/commands for text manipulation","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/13259293/shell-script-for-formatting-output\">Shell script for formatting output</a>  </p>\n</blockquote>\n\n\n\n<p>I have a jacl script that spits out the text below, I want it better formatted.How can I achieve this ?</p>\n\n<pre><code>Stats for Cell=CELL Node=N01 Server=APP at 15:48:06\nStats name=WebContainer, type=threadPoolModule\nname=PoolSize, ID=4, description=The average number of threads in a pool., unit=N/A, type=BoundedRangeStatistic, lowWaterMark=1, highWaterMark=50, current=4, integral=9.16145228E8, lowerBound=50, upperBound=50\nStats name=ORB.thread.pool, type=threadPoolModule\nname=PoolSize, ID=4, description=The average number of threads in a pool., unit=N/A, type=BoundedRangeStatistic, lowWaterMark=1, highWaterMark=10, current=1, integral=1.26898089E8, lowerBound=10, upperBound=50\nStats name=WorkManager.BPENavigationWorkManager, type=threadPoolModule\nname=PoolSize, ID=4, description=The average number of threads in a pool., unit=N/A, type=BoundedRangeStatistic, lowWaterMark=1, highWaterMark=10, current=5, integral=8.53089448E8, lowerBound=1, upperBound=5\nStats name=WorkManager.BPESchedulerWorkManager, type=threadPoolModule\nname=PoolSize, ID=4, description=The average number of threads in a pool., unit=N/A, type=BoundedRangeStatistic, lowWaterMark=1, highWaterMark=1, current=0, integral=0.0, lowerBound=1, upperBound=5Scrits commands to convert the above to below.(Awk or sed ?)\n</code></pre>\n\n<p>How I would like to see the output.</p>\n\n<pre><code>CELL:N01:APP at 15:48:06\nWebContainer threadPool current=4\nORB.thread.pool threadPool current=1\nWorkManager.BPENavigationWorkManager threadPool current=5\nWorkManager.BPESchedulerWorkManager threadPool current=0\n</code></pre>\n"},{"tags":["bash","command-line","keyboard-shortcuts","input-history"],"answer_count":3,"favorite_count":8,"up_vote_count":18,"down_vote_count":0,"view_count":2528,"score":18,"question_id":4009412,"title":"bash - first argument of the previous command","body":"<p>I know that ESC DOT gives you the last argument of the last command.</p>\n\n<p>But I'm interested in first argument of the last command.\nIs there a key binding to do so?</p>\n\n<p>On the same lines, is there a generic way of getting nth argument from last command.\n(I know that in a bash script you can use $0, $1 etc., but these don't work on commandline)</p>\n\n<p><strong>Also, what about iterating through 0th argument of previous commands, like we can do with last argument by continuously pressing ESC DOT</strong></p>\n"},{"tags":["bash","alias"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13260969,"title":"Prevent bash alias from evaluating statement at shell start","body":"<p>Say I have the following (useless) alias.</p>\n\n<pre><code>alias pwd_alias='echo `pwd`'\n</code></pre>\n\n<p>This alias is not \"dynamic\". It evaluates <code>pwd</code> as soon as the shell starts. Is there anyway to delay the evaluation of the expression in the ticks until the alias's runtime?</p>\n"},{"tags":["r","bash","function","split"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":57,"score":3,"question_id":13260252,"title":"A better way to extract functions from an R script?","body":"<p>Say I have a file \"myfuncs.R\" with a few functions in it:</p>\n\n<pre><code>A &lt;- function(x) x\nB &lt;- function(y) y\nC &lt;- function(z) z\n</code></pre>\n\n<p>I want to place all the functions contained within \"myfuncs.R\" into their own files, named appropriately.  I have a simple Bash-shell script to extract functions and place them in separate files:</p>\n\n<pre><code>split -p \"function\\(\" myfuncs.R tmpfunc\ngrep \"function(\" tmpfunc* | awk '{\n  # strip first-instances of function assignment\n  sub(\"&lt;-\", \" \")\n  sub(\"=\", \" \")\n  sub(\":\", \" \")  # and colon introduced by grep\n  mv=$1\n  mvto=sprintf(\"func_%s.R\",$2)\n  print \"mv\", mv, mvto\n}' | sh\n</code></pre>\n\n<p>leaving me with:</p>\n\n<pre><code>func_A.R\nfunc_B.R\nfunc_C.R\n</code></pre>\n\n<p>But, this script has obvious limitations.  For example, it will misbehave when function 'A' has a nested function:</p>\n\n<pre><code>A &lt;- function(x){\n    Aa &lt;- function(x){x}\n    return(Aa)\n}\n</code></pre>\n\n<p>and outright fails if the whole function is on a single line.</p>\n\n<p>Does anyone know of a more robust, and less error-prone method to do this? </p>\n"},{"tags":["linux","file","bash","types"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":35,"score":-1,"question_id":13259869,"title":"bash find file signature","body":"<p>I need to check type of file</p>\n\n<pre><code>TargetType is one of the following numbers specifying the type of the target ﬁle\n    0 = any ﬁle\n    1 = Portable Executable, both 32- and 64-bit\n    2 = ﬁle inside OLE2 container\n    3 = HTML\n    4 = Mail ﬁle\n    5 = Graphics\n    6 = ELF\n    7 = ASCII text ﬁle (normalized)\n    8 = Unused\n    9 = Mach-O ﬁles\n</code></pre>\n\n<p>I know how to do for HTML, ASCII, ELF and graphics but no other.</p>\n\n<pre><code>file  FILE_to_check | awk '{print $2}'\n</code></pre>\n\n<p>return ASCII if ASCII file</p>\n\n<p>I also need to check if the file is a binary file otherwise I do a hex dump(no problem for that)</p>\n\n<pre><code>file -i FILE_to_check | awk -F'=' '{ print $2 }'\n</code></pre>\n\n<p>return binary</p>\n\n<p>I don't know if the correct way to do.</p>\n\n<p>If you have any idea ...</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","shell","sed","awk","jacl"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":34,"score":-1,"question_id":13259293,"title":"Shell script for formatting output","body":"<pre><code>Stats for Cell=CELL Node=N01 Server=APP at 15:48:06\nStats name=WebContainer, type=threadPoolModule\nname=PoolSize, ID=4, description=The average number of threads in a pool., unit=N/A, type=BoundedRangeStatistic, lowWaterMark=1, highWaterMark=50, current=4, integral=9.16145228E8, lowerBound=50, upperBound=50\nStats name=ORB.thread.pool, type=threadPoolModule\nname=PoolSize, ID=4, description=The average number of threads in a pool., unit=N/A, type=BoundedRangeStatistic, lowWaterMark=1, highWaterMark=10, current=1, integral=1.26898089E8, lowerBound=10, upperBound=50\nStats name=WorkManager.BPENavigationWorkManager, type=threadPoolModule\nname=PoolSize, ID=4, description=The average number of threads in a pool., unit=N/A, type=BoundedRangeStatistic, lowWaterMark=1, highWaterMark=10, current=5, integral=8.53089448E8, lowerBound=1, upperBound=5\nStats name=WorkManager.BPESchedulerWorkManager, type=threadPoolModule\nname=PoolSize, ID=4, description=The average number of threads in a pool., unit=N/A, type=BoundedRangeStatistic, lowWaterMark=1, highWaterMark=1, current=0, integral=0.0, lowerBound=1, upperBound=5\n</code></pre>\n\n<p>Scrits commands to convert the above to below.(Awk or sed ?)</p>\n\n<pre><code>CELL:N01:APP at 15:48:06\nWebContainer threadPool current=4\nORB.thread.pool threadPool current=1\nWorkManager.BPENavigationWorkManager threadPool current=5\nWorkManager.BPESchedulerWorkManager threadPool current=0\n</code></pre>\n"},{"tags":["linux","bash","time","epoch"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":14,"score":-1,"question_id":13257066,"title":"bash script to convert epoch to standard in a text file","body":"<p>I work with several text files that use epoch, I would like a bash script that will scan a specific file for epoch and output another text document with it as standard time.</p>\n"},{"tags":["bash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13255843,"title":"Why is Bash not allowing me to enter input at prompts?","body":"<p>For some reason, my Macbook bash terminal is not allowing me to enter \"y\" from a prompt.\nI'm not really sure how to describe this, but you can see the action below.</p>\n\n<pre><code>$ sudo pip uninstall django  \n\nPassword:  \nUninstalling Django:  \n\n/Library/Frameworks/Python.framework/Versions/2.7/bin/django-admin.py  \n  /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg-info  \n/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django  \n\nProceed (y/n)? **y^M^?^?^?^M^M^M^M^M^C**Your response ('y\\r\\x7f\\x7f\\x7f') was not one of the expected responses: y, n\n\nProceed (y/n)? y^M^C^D^M^M^M^M^CYour response ('y\\r\\x04') was not one of the expected responses: y, n  \n\nProceed (y/n)? Y^M^Xc^C^D^CYour response ('y\\r\\x18c') was not one of the expected responses: y, n  \n\nProceed (y/n)? ^D^CYour response ('') was not one of the expected responses: y, n\nProceed (y/n)? ^COperation cancelled by user\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":20,"score":0,"question_id":13257110,"title":"Bash script, pid of xterm process","body":"<p>I have a small problem. In bash scripting i need to run an xterm who do some things like this.</p>\n\n<p>xterm -e \"(time ./program.exe 127.0.0.1) 2> out.txt\" </p>\n\n<p>How can i say the pid of this process? </p>\n\n<p>I need to wait who it finisced for write the output and merge with another fine.</p>\n\n<p>Thank so much to all!!</p>\n"},{"tags":["linux","bash","shell","sh","kill"],"answer_count":5,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":76,"score":4,"question_id":13221338,"title":"How to Kill Current Command When Bash Script is Killed","body":"<p>I current have a script that looks like this.</p>\n\n<pre><code># code\n\nmplayer \"$vid\"\n\n# more code\n</code></pre>\n\n<p>The problem is that if this script is killed the mplayer process lives.  I wondering how I could make it so that killing the script would kill mplayer as well.</p>\n\n<p>I can't use <code>exec</code> because I need to run commands after mplayer.</p>\n\n<pre><code>exec mplayer \"$vid\"\n</code></pre>\n\n<p>The only possible solution I can think of is to spawn it in the background and wait until it finishes manually.  That way I can get it's PID and kill it when the script gets killed, not exactly elegant.  I was wondering what the \"proper\" or best way of doing this is.</p>\n"},{"tags":["linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13250180,"title":"Flock using error message if not able to get lock on the file","body":"<p>My bash code look likes:</p>\n\n<pre><code>  set -e\n  (\n     flock -n 9\n     main $@\n   ) 9&gt;/var/lock/mylockfile\n</code></pre>\n\n<p>But currently it don't show any error message, if it is not able to get lock on the file. \nIs there a way to show error message ?</p>\n"},{"tags":["string","bash","sed","grep"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":59,"score":1,"question_id":13242469,"title":"bash sed/grep text between two words","body":"<p>I am trying to output a string that contains everything between two words of a string:</p>\n\n<p>input: \"Here is a String\"</p>\n\n<p>output; \"is a\"</p>\n\n<p>Using: </p>\n\n<pre><code>    sed -n '/Here/,/String/p'\n</code></pre>\n\n<p>includes the endpoints, but I don't want to include them.</p>\n"},{"tags":["linux","bash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13255416,"title":"xdotools changing case","body":"<p>I have a script that works on one computer (Ubuntu 11.10) but not on another (Mint 13).  The problem is with the <code>xdotools</code> command.  Without going into the script details, the problem is that the case of the variable including in the string I am passing to xdotools is changed to lower-case.  The following illustrates the problem:</p>\n\n<pre><code>export FOO=\"FOO\"\nxdotools type \" the value of FOO is '$FOO'\"\n</code></pre>\n\n<p>This prints \" the value of OO is fOO \"</p>\n\n<p>Any ideas on what I'm doing wrong?</p>\n"},{"tags":["bash","pattern-matching","switch-statement"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":34,"score":3,"question_id":13254425,"title":"Using variable as case pattern in Bash","body":"<p>I'm trying to write a Bash script that uses a variable as a pattern in a case statement. However I just cannot get it to work.</p>\n\n<p>Case statement:</p>\n\n<pre><code>case \"$1\" in\n    $test)\n        echo \"matched\"\n        ;;\n    *)\n        echo \"didn't match\"\n        ;;\nesac\n</code></pre>\n\n<p>I've tried this with assigning <code>$test</code> as <code>aaa|bbb|ccc</code>, <code>(aaa|bbb|ccc)</code>, <code>[aaa,bbb,ccc]</code> and several other combinations. I also tried these as the pattern in the case statement: <code>@($test)</code>, <code>@($(echo $test))</code>, <code>$($test)</code>. Also no success.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>For clarity, I would like the variable to represent multiple patterns like this:</p>\n\n<pre><code>case \"$1\" in\n    aaa|bbb|ccc)\n        echo \"matched\"\n        ;;\n    *)\n        echo \"didn't match\"\n        ;;\nesac\n</code></pre>\n"},{"tags":["python","bash","ssh","stdout","pid"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13202483,"title":"Redirect to a file output of remote python app started through ssh","body":"<p>[EDITED]</p>\n\n<p>I have a python app in a remote server that i need to debug, when I run the app locally it prints some debug information (including python tracebacks) that i need to monitor.</p>\n\n<p>Thanks to <a href=\"http://stackoverflow.com/users/1356721/jeremy\">jeremy</a> i got to monitor the output file using <em>tail -F</em> and studying his code I got <a href=\"http://jimmyg.org/blog/2009/working-with-python-subprocess.html\" rel=\"nofollow\">here</a> where i found the following variation of his command:</p>\n\n<pre><code>ssh root@$IP 'nohup python /root/python/run_dev_server.py &amp;&gt;&gt; /var/log/myapp.log &amp;'\n</code></pre>\n\n<p>This gets me almost exactly what i want, loggin information and python tracebacks, but i do not get any of the information displayed using <em>print</em> from python which i need.</p>\n\n<p>so I also tried his command:</p>\n\n<pre><code>ssh root@$IP 'nohup python /root/python/run_dev_server.py 2&gt;&amp;1 &gt;&gt; /var/log/myapp.log &amp;'\n</code></pre>\n\n<p>it logs in the file the output of the program from <em>print</em> and also the logging information, but all the tracebacks are lost so i cannot debug the python exceptions.</p>\n\n<p>Is there a way I can capture all the information produced by the app?</p>\n\n<p>Thanks in advance for any suggestion.</p>\n"},{"tags":["mysql","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":23,"score":-1,"question_id":13253058,"title":"Bash Scripting for getting files from s3","body":"<p>Can you please help me or give me a sample bash script for getting / download a file from s3 ( .sql file ) then restore it to specific tables. </p>\n\n<p>Note :</p>\n\n<p>Also the acl is not in public please include also how can i set it on public at bash.</p>\n\n<p>Thanks in Advance!</p>\n"},{"tags":["linux","bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13249698,"title":"HAL - UDISKS, human readable, convert bytes to gigabytes in bash script","body":"<p><strong>First Question</strong></p>\n\n<p>I'm currently using HAL in a bash script to get the size of a specific device with following command.</p>\n\n<pre><code>HAL_SIZE=$(hal-get-property --udi $UDI --key storage.removable.media_size)\n</code></pre>\n\n<p>The result (e.g): <em>4110188544/</em></p>\n\n<p>But how can I convert this value to human readable format like GB:</p>\n\n<pre><code>4 110 188 544 bytes = 3.82791138 gigabytes\n</code></pre>\n\n<p><strong>Second Question</strong></p>\n\n<pre><code>    for UDI in $(hal-find-by-property --key storage.bus --string usb)\ndo\n    HAL_TMP=`hal-get-property --udi $UDI --key storage.removable.media_available`\n    if [ \"$HAL_TMP\" = \"true\" ]; then\n        HAL_DEV=$(hal-get-property --udi $UDI --key block.device)\n        HAL_SIZE=$(hal-get-property --udi $UDI --key storage.removable.media_size)\n        HAL_TYPE=$(hal-get-property --udi $UDI --key storage.drive_type)\n</code></pre>\n\n<p>Does anybody have some expirence with <em>udisks</em>, because HAL won't be longer supported on the most linux distribution, so I am thinking of to use <em>udisks</em></p>\n\n<p>How do I have to adapt the above mentioned commands but use <em>udisks</em> instead of <em>hal</em></p>\n\n<p>Thanks!</p>\n"},{"tags":["bash","unix"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":61,"score":4,"question_id":13241964,"title":"How do I get a user's friendly username on UNIX?","body":"<p>I want to get the \"friendly\" name, not the username, at least if such a string exists for the given user. Things I've tried:</p>\n\n<pre><code>whoami\njamesarosen\n\nid -un\njamesarosen\n\nid -p\nuid jamesarosen\ngroups  staff com.apple.access_screensharing ...\n\nid -P\njamesarosen:********:501:20::0:0:James A. Rosen:/Users/jamesarosen:/bin/bash\n</code></pre>\n\n<p>That last one has the information I'm looking for, but I'd prefer not to have to parse it out, particularly since I'm not terribly confident that the format (specifically the number of <code>:</code>s) will remain consistent across OSes.</p>\n"},{"tags":["bash","loops","if-statement","script","exists"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13146630,"title":"Loop script until file has equal size for a minute","body":"<p>I have cronjob to run a script every day in specific time. The script is for conversion a large file (about 2GB) in specific folder. The problem is that not every day my coleague put the file in the folder before the time, written as cronjob.</p>\n\n<p>Please help me to add commands in the script or to write second script for:</p>\n\n<ol>\n<li>Check if the file exists in the folder.</li>\n<li>If the previous action is true, check the file size every minute. (I would like to avoid conversion of still incomming large file).</li>\n<li>If filesize stays unchanged for 2 minutes, start the script for conversion.</li>\n</ol>\n\n<p>I give you the important lines of the script so far:</p>\n\n<pre><code>cd /path-to-folder\nfor $i in *.mpg; do avconv -i \"$i\" \"out-$i.mp4\" ; done\n</code></pre>\n\n<p>10x for the help!</p>\n\n<p><strong>NEW CODE AFTER COMMENTS:</strong></p>\n\n<p>There is file in the folder!</p>\n\n<pre><code>#! /bin/bash\n\n\ncdate=$(date +%Y%m%d)\ndump=\"/path/folder1\"\nbase=$(ls \"$dump\")\n\nif [ -n \"$file\"]\nthen\n    file=\"$dump/$base\"\n    size=$(stat -c '%s' \"$file\")\n    count=0\n    while sleep 10\n    do\n        size0=$(stat -c '%s' \"$file\")\n        if [ $size=$size0 ]\n        then $((count++))\n             count=0\n        fi\n        if [ $count = 2 ]\n        then break\n        fi\n    done\n    # file has been stable for two minutes. Start conversion.\n\nCONVERSION CODE\n\nfi\n</code></pre>\n\n<p>MESSAGE IN TERMINAL: Maybe error???</p>\n\n<pre><code>script.sh: 17: script.sh: arithmetic expression: expecting primary: \"count++\"\n</code></pre>\n"},{"tags":["bash","variables","wildcard","expansion"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":13252329,"title":"Loop over array, preventing wildcard expansion (*)","body":"<p>I'm trying to figure out what I thought would be a trivial issue in BASH, but I'm having difficulty finding the correct syntax. I want to loop over an array of values, one of them being an asterisk (*), I do not wish to have any wildcard expansion happening during the process.</p>\n\n<pre><code> WHITELIST_DOMAINS=\"* *.foo.com *.bar.com\"\n for domain in $WHITELIST_DOMAINS\n do\n    echo \"$domain\"\n done\n</code></pre>\n\n<p>I have the above, and I'm trying to get the following output:</p>\n\n<pre><code> *\n *.foo.com\n *.bar.com\n</code></pre>\n\n<p>Instead of the above, I get a directory listing on the current directory, followed by *.foo.com and *.bar.com</p>\n\n<p>I know I need some escaping or quoting somewhere.. the early morning haze is still thick on my brain.</p>\n\n<p>I've reviewed these questions:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/10888764/how-to-escape-wildcard-expansion-in-a-variable-in-bash\">How to escape wildcard expansion in a variable in bash?</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/11456403/stop-shell-wildcard-character-expansion\">Stop shell wildcard character expansion?</a></p>\n"},{"tags":["linux","bash","wget","sh"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":3194,"score":2,"question_id":4686464,"title":"Howto show wget progress bar only?","body":"<p>Howto show wget progress bar only? </p>\n\n<p>for example</p>\n\n<p><code>wget <a href=\"http://somesite.com/TheFile.jpeg\" rel=\"nofollow\">http://somesite.com/TheFile.jpeg</a></code></p>\n\n<pre>\ndownloading: TheFile.tar.gz ...\n--09:30:42--  http://somesite.com/TheFile.jpeg\n           => `/home/me/Downloads/TheFile.jpeg'\nResolving somesite.co... xxx.xxx.xxx.xxx.\nConnecting to somesite.co|xxx.xxx.xxx.xxx|:80... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 1,614,820 (1.5M) [image/jpeg]\n\n25% [======>                              ] 614,424      173.62K/s    ETA 00:14\n</pre>\n\n<p>How can i get it to look like this </p>\n\n<pre>\ndownloading: TheFile.jpeg ...\n25% [======>                              ] 614,424      173.62K/s    ETA 00:14\n</pre>\n\n<p>I know curl can do that, however i need to get wget to do that job.</p>\n\n<p>Any help would be much appreciated.</p>\n"},{"tags":["linux","bash","loops","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":50,"score":3,"question_id":13240707,"title":"How to append each column of file1 to a specific field of file2 and make a new output file?","body":"<p>I want to append each column of file 1 as the 4th column of file 2 and export as a new file with the column number from file 1 or something similar as the output name.</p>\n\n<p>Input File 1 and 2 have the same number of rows:</p>\n\n<p>Input File 1 has N columns:</p>\n\n<pre><code>12 23 34  .....\n33 34 23\n67 09 34\n45 67 34\n65 76 44\n64 33 96\n</code></pre>\n\n<p>Input File 2 originally has 5 columns</p>\n\n<pre><code>AA BB FF DD 6\nAA CC HH NN 7\nAA DD II RR 4\nAA EE JJ PP 2\nAA FF KK QQ 9\nAA GG LL SS 8\n</code></pre>\n\n<p>For example, the first 3 output files would look like this:</p>\n\n<p>Output File 1 (column 1):</p>\n\n<pre><code>AA BB FF 12 DD 6\nAA CC HH 33 NN 7\nAA DD II 67 RR 4\nAA EE JJ 45 PP 2\nAA FF KK 65 QQ 9\nAA GG LL 64 SS 8\n</code></pre>\n\n<p>Output File 2 (column 2):</p>\n\n<pre><code>AA BB FF 23 DD 6\nAA CC HH 34 NN 7\nAA DD II 09 RR 4\nAA EE JJ 67 PP 2\nAA FF KK 76 QQ 9\nAA GG LL 33 SS 8\n</code></pre>\n\n<p>Output File 3 (column 3):</p>\n\n<pre><code>AA BB FF 34 DD 6\nAA CC HH 23 NN 7\nAA DD II 34 RR 4\nAA EE JJ 34 PP 2\nAA FF KK 44 QQ 9\nAA GG LL 96 SS 8\n</code></pre>\n\n<p>The new file names can be file1, file2, file3...or column1, column2, column3....or something similar. How can I achieve this please? (for loop, awk, paste, etc.)</p>\n\n<p>Any suggestions would be appreciated.</p>\n"},{"tags":["bash","loops"],"answer_count":6,"favorite_count":19,"up_vote_count":73,"down_vote_count":0,"view_count":41879,"score":73,"question_id":1289026,"title":"Syntax for a single-line BASH infinite while loop","body":"<p>Having trouble coming up with the right combination of semicolons and/or braces.  I'd like to do this, but as a one-liner from the command line:</p>\n\n<pre><code>while [ 1 ]\ndo\n    foo\n    sleep 2\ndone\n</code></pre>\n"},{"tags":["bash"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13250425,"title":"bash - Test if directory contains files ending on .suite","body":"<p>I'm currently writing a bash script for executing test suites. Besides passing the suites directly to this script, like</p>\n\n<pre><code>./bash-specs test.suite\n</code></pre>\n\n<p>it should also be able to execute all scripts in a given directory if no suite is passed to it, like so</p>\n\n<pre><code>./bash-specs # executes all tests in the directory, namely test.suite\n</code></pre>\n\n<p>This is implemented like this</p>\n\n<pre><code>(($# == 0)) &amp;&amp; set -- *.suite\n</code></pre>\n\n<p>So, if no suite is passed, all the files ending on .suite are executed. This works fine but fails if the directory contains no such files.</p>\n\n<p>That means I will also need a check to test if there actually are files with that ending.\nHow would I do this in bash?</p>\n\n<p>I thought a test like </p>\n\n<pre><code>[[ -f *.suite ]]\n</code></pre>\n\n<p>should work but it seems to fail when there are more than one file in the directory.</p>\n"},{"tags":["regex","perl","bash","rename"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":13250694,"title":"Replace and add leading zeros when renaming files","body":"<p>Please be patient, this post will be somewhat long...</p>\n\n<p>I have a bunch of files, some of them with a simple and clean name (e.g. 1E01.txt) and some with a lot of extras:</p>\n\n<pre><code>Sample2_Name_E01_-co_032.txt\nSample2_Name_E02_-co_035.txt\n...\nSample12_Name_E01_-co_061.txt\n</code></pre>\n\n<p>and so on. What is important here is the number after \"Sample\" and the letter+number after \"<em>Name</em>\" - the rest is disposable. If i get rid of the non-important parts, the filename reduces to the same pattern as the \"clean\" filenames (2E01.txt, 2E02.txt, ..., 12E01.txt). I've managed to rename the files with the following expression (came up with this one myself, don't know if is very elegant but works fine):</p>\n\n<pre><code>rename -v 's/Sample([0-9]+)_Name_([A-Z][0-9]+).*/$1$2\\.txt/' *.txt\n</code></pre>\n\n<p>Now, the second part, is adding a leading zero for filenames with just one digit, such as 1E01.txt turns into 01E01.txt. I've managed to to this with (found and modified this on another StackExchange post): </p>\n\n<pre><code>rename -v 'unless (/^[0-9]{2}.*\\.txt/) {s/^([0-9]{1}.*\\.txt)$/0$1/;s/0*([0-9]{2}\\..*)/$1/}' *.txt\n</code></pre>\n\n<p>So I finally got to my question: is there a way to merge both expressions in just one rename command? I know I could do a bash script to automate the process, but what I want is to find a one-pass renaming solution.</p>\n\n<p>thanks</p>\n"},{"tags":["bash","vi","readline"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":245,"score":1,"question_id":6839273,"title":"bash/readline equivalent of escape-dot in vi-mode","body":"<p>Having recently switched to vi-mode in bash, the one thing I miss is <kbd>esc</kbd> <kbd>.</kbd> to get the last argument of the last command.</p>\n\n<p>I know about <kbd>ctrl</kbd> <kbd>_</kbd>, but I always end up hitting <kbd>ctrl</kbd> <kbd>-</kbd> instead.</p>\n\n<p>Is there another vi-mode equivalent for this?</p>\n"},{"tags":["bash","file","shell","random"],"answer_count":8,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":7088,"score":7,"question_id":701505,"title":"Best way to choose a random file from a directory in a shell script","body":"<p>What is the best way to choose a random file from a directory in a shell script?</p>\n\n<p>Here is my solution in Bash but I would be very interested for a more portable (non-GNU) version for use on Unix proper.</p>\n\n<pre><code>dir='some/directory'\nfile=`/bin/ls -1 \"$dir\" | sort --random-sort | head -1`\npath=`readlink --canonicalize \"$dir/$file\"` # Converts to full path\necho \"The randomly-selected file is: $path\"\n</code></pre>\n\n<p>Anybody have any other ideas?</p>\n\n<p><strong>Edit:</strong> lhunath makes a good point about parsing <code>ls</code>.  I guess it comes down to whether you want to be portable or not.  If you have the GNU findutils and coreutils then you can do:</p>\n\n<pre><code>find \"$dir\" -maxdepth 1 -mindepth 1 -type f -print0 \\\n  | sort --zero-terminated --random-sort \\\n  | sed 's/\\d000.*//g/'\n</code></pre>\n\n<p>Whew, that was fun!  Also it matches my question better since I said \"random file\".  Honsetly though, these days it's hard to imagine a Unix system deployed out there having GNU installed but not Perl 5.</p>\n"},{"tags":["linux","bash","shell","script"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":56,"score":3,"question_id":13247069,"title":"Check if the file exist only by the file name (without the extension)","body":"<p>This works just fine</p>\n\n<pre><code>if [[ -e img.png ]]\nthen\n     echo \"exist\"\nelse\n     echo \"doesn't exist\"\nfi\n</code></pre>\n\n<p>but what if I know that there might be imgage with name img but I do not know if the file is .jpg , .gif , .jpeg , .tff and so on.</p>\n\n<p>I do not care what is the extension I just want to know if there is a file with name 'img'</p>\n\n<p>How can I do this ?</p>\n"},{"tags":["bash","shell","snmp","net-snmp"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13228630,"title":"shell script for Net-snmp (get/walk) is not efficient","body":"<pre><code>#!/bin/bash\nfor i in `seq 1 3000`\ndo\n    index=`snmpget -v 2c -c public -Oqv localhost 1.3.6.1.4.1.21067.4.1.1.1.$i` \ndone\n\nfor i in `seq 1 3000`\ndo\n    upload=`snmpget -v 2c -c public -Oqv localhost 1.3.6.1.4.1.21067.4.1.1.10.$i` \ndone\n\nfor i in `seq 1 3000`\ndo\n    download=`snmpget -v 2c -c public -Oqv localhost 1.3.6.1.4.1.21067.4.1.1.11.$i` \ndone\n</code></pre>\n\n<p>(ubuntu-12.04)\nabove is my shell script....with every execution of snmpget command it returns an integer and stores value in above three variables...\nthe problem is the data table is of 9000 values. so with this script it is giving too much time consuption and bettelnake.</p>\n\n<p>can any one suggest me some simple \"SNMPWALK\"(or anything else) used script with that I can store all this data in to a single array[9000] or with three parse,in three different arrays with index of 1 to 3000.so I can decrease time as much as possible. </p>\n\n<p>for example : snmpwalk -v 2c -c public -Oqv localhost 1.3.6.1.4.1.21067 gives all the values,but I dont know how to store all these in a array with different index.\n..................................................................</p>\n\n<p>see I have tried below : but giving me errors...</p>\n\n<pre><code>cat script.sh\n\n #!/bin/sh\nOUTPUT1=$(snmpbulkwalk -Oqv -c public -v 2c localhost 1.3.6.1.2.1.2.2.1.1 2&gt; /dev/null)\ni=1\nfor LINE in ${OUTPUT1} ;\n    do\n        OUTPUT1[$i]=$LINE;\n        i=`expr $i + 1`\n    done\n\nsh script.sh\nj4.sh: 6: j4.sh: OUTPUT1[1]=1: not found\nj4.sh: 6: j4.sh: OUTPUT1[2]=2: not found\n</code></pre>\n"},{"tags":["java","bash","maven"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13248920,"title":"Run a command line with an option as an arguments","body":"<p>I want to run an instruction using bash with some arguments. Among these arguments I have \n<code>\"-- stat\"</code>. So when I run my instruction, the bash recognize the <code>\"--stat\"</code> as an option of Mavan and not an arguments.</p>\n\n<p>Example of my instruction :</p>\n\n<pre><code>mvn exec:java -Dexec.mainClass=\"MainClass\" -Dexec.args=\"args1 --stat args3 ...\"\n</code></pre>\n\n<p>and when I run this command line I have this error :</p>\n\n<pre><code>Unable to parse command line options: Unrecognized option: --stat\n</code></pre>\n\n<p>What can I do to run this command line with <code>\"--stat\"</code> arguments ?</p>\n"},{"tags":["bash","sed"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":626,"score":0,"question_id":7301026,"title":"Extract numbers from filename","body":"<p>In BASH I thought to use <code>sed</code>, but can't figure how to extract pattern instead usual replace.</p>\n\n<p>For example:</p>\n\n<p>FILENAME = 'blah_blah_#######_blah.ext'</p>\n\n<p>number of ciphers (in above example written with \"#\" substitute) could be either 7 or 10</p>\n\n<p>I want to extract only the number</p>\n"},{"tags":["git","osx","bash","osx-lion"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":2508,"score":3,"question_id":6813709,"title":"Git locale error on Lion OSX","body":"<p>Everything seems to work great, Git pulls and pushes; however -- it adds an annoying locale error. Any idea how to solve it?</p>\n\n<pre>\nkonzepz:project (master  ⚡) ➤ git pull\nbash: warning: setlocale: LC_ALL: cannot change locale (en_GB.UTF-8)\nAlready up-to-date.\n</pre>\n\n<p>Thanks!</p>\n"},{"tags":["bash","unix"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":44,"score":1,"question_id":13247131,"title":"How to construct a list from a variable in bash?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/169511/how-do-i-iterate-over-a-range-of-numbers-in-bash\">How do I iterate over a range of numbers in bash?</a>  </p>\n</blockquote>\n\n\n\n<p>I am trying to print \"Hello World!\" 10 times via the code below, but it is printed only one time. Where am I missing the correct syntax?</p>\n\n<pre><code>RUNS=10\n\nfor RUN in {1..$RUNS}\ndo\n    echo \"Hello World!\"\ndone\n</code></pre>\n"},{"tags":["bash","environment-variables","variable-assignment"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13245649,"title":"can seem to export environment variable from bash script","body":"<p>I am working on a remote server through putty and am trying to set certain environment variables throught something like this</p>\n\n<pre><code>#!/bin/bash\nVAR=\"SOME VALUE\"\nexport $VAR\n</code></pre>\n\n<p>when I exit the script and run echo on $VAR, I am given a blank line. could you please suggest a way around this.</p>\n"},{"tags":["linux","bash","ubuntu","whitespace","filenames"],"answer_count":9,"favorite_count":10,"up_vote_count":15,"down_vote_count":0,"view_count":13106,"score":15,"question_id":2709458,"title":"Bash script to replace spaces in file names","body":"<p>Can anyone recommend a safe solution to recursively replace spaces with underscores in file and directory names starting from a given root directory? For example,</p>\n\n<pre>\n$ tree\n.\n|-- a dir\n|   `-- file with spaces.txt\n`-- b dir\n    |-- another file with spaces.txt\n    `-- yet another file with spaces.pdf\n</pre>\n\n<p>becomes</p>\n\n<pre>\n$ tree\n.\n|-- a_dir\n|   `-- file_with_spaces.txt\n`-- b_dir\n    |-- another_file_with_spaces.txt\n    `-- yet_another_file_with_spaces.pdf\n</pre>\n\n<p><strong>Edit</strong></p>\n\n<p>Thanks for the answers; they all seem to work. I picked the one by Dennis as the main answer because it seems to me the simplest, even though it takes two steps.</p>\n"},{"tags":["php","regex","bash","replace"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":576,"score":1,"question_id":5928534,"title":"Bash String Remove Specific Characters","body":"<p>I'm almost done with using bash, but the last thing I need to do is to do a regex replace on a string in bash. I have the PHP equivalent here</p>\n\n<pre><code>preg_replace(\"/[^a-z0-9\\.]/\", '',$theme_name);\n</code></pre>\n\n<p>I need to do this exact same thing in bash, which is replacing every non alphanumeric character or dots (.) with nothing. Thanks in advance!</p>\n"},{"tags":["bash","unix","sed","awk"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13244827,"title":"How to reduce a set of lines to take the average?","body":"<p>I have a file with lines like these (columns are tab seperated)</p>\n\n<pre><code>2    1.414455    3.70898\n2    2.414455    3.80898\n2    3.414455    3.90898\n2    1.414455    3.90898\n4    4.414455    7.23898\n4    3.414455    6.23898\n4    5.414455    8.23898\n</code></pre>\n\n<p>i.e. there are consecutive lines where the first column is an integer, and rest two columns are floats.</p>\n\n<p>I want to reduce them as below</p>\n\n<pre><code>2    2.164455    3.75898\n4    4.414455    7.23898\n</code></pre>\n\n<p><strong>where I keep the first columns, and take the averages of the second and third columns for all elements with same first columns</strong>. The number of consecutive lines with same first elements might be different, but they will always be consecutive.</p>\n\n<p>I can do this in perl, but was wondering if there is a simpler bash / sed / awk mix that can do the same for me?</p>\n"},{"tags":["django","bash","installscript"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13243869,"title":"Install Django using pip from bash","body":"<p>I am trying to write an install script for my project which requires Django.  I am using pip to install a list of apps but when it gets to Django it says </p>\n\n<pre><code>    You just installed Django's auth system, which means you don't have any superusers defined.  \n    Would you like to create one now?\n</code></pre>\n\n<p>I need this script to be autonomous. </p>\n\n<p>Is there away to automatically answer this question or ignore it and set the superusers later?</p>\n\n<p>My basic bash script looks something like this </p>\n\n<pre><code>    #!/bin/bash\n\n    set -eux\n\n    #==================================================#\n    # These should be just the server requirements only \n    # !! Exception being scipy for now. pip install not \n    # working\n    #==================================================#\n\n    apt-get install -y python postgresql-9.1 apache2 python-setuptools postgresql-server-dev-9.1 postgresql-9.1-postgis postgis python-scipy binutils libproj-dev gdal-bin git\n\n    #==================================================#\n    # setup the posgis template for postgresql\n    #==================================================#\n    GEOGRAPHY=0\n    POSTGIS_SQL=postgis.sql\n\n    BLAH BLAH !!!\n    Lots of database set up code here\n\n   #==================================================#\n   # Setup the python environment\n   #==================================================#\n   easy_install virtualenv\n   easy_install virtualenvwrapper\n   easy_install pip\n\n   #==================================================#\n   # Pull the catami code from git and install \n   #==================================================#\n\n   mkdir -p /home/catami\n   mkdir -p /home/catami/catamiportal\n   cd /home/catami/catamiportal\n   git clone https://github.com/catami/catami.git\n   cd catami\n\n   pip install -r requirements.txt\n\n   python manage.py syncdb\n\n   manage.py runserver 0.0.0.0:8000\n</code></pre>\n\n<p>I am getting grief from installing django from the requirements file.</p>\n"},{"tags":["regex","string","bash","parsing"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13240348,"title":"Bash: Extracting domain name from string","body":"<p>I am writing a bash script to extract a domain out of string of the form:</p>\n\n<p>\"....domain name xxx.com...\"</p>\n\n<p>and I want to output xxx.com.</p>\n\n<p>How can I use matching to output this domain name?</p>\n"},{"tags":["bash","shell","sqlplus"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":3750,"score":1,"question_id":10277983,"title":"Connect to sqlPlus in shell script and run a .sql script file","body":"<p>I have a .sql file which is a bunch of oracle pl/sql commands and i want to create a shell script to run these commands. \nsuppose user/pass@server is my credentials. What swill be the shell script to do such a work? </p>\n"},{"tags":["bash","unix","shell"],"answer_count":9,"favorite_count":82,"up_vote_count":196,"down_vote_count":0,"view_count":105447,"score":196,"question_id":818255,"title":"In the bash shell, what is \" 2>&1 \"?","body":"<p>In a unix shell, if I want to combine stderr and stdout into the stdout stream for further manipulation, I can append the following on the end of my command:</p>\n\n<pre><code>2&gt;&amp;1\n</code></pre>\n\n<p>So, if I want to use \"head\" on the output from g++, I can do something like this:</p>\n\n<pre><code>g++ lots_of_errors 2&gt;&amp;1 | head\n</code></pre>\n\n<p>so I can see only the first few errors. </p>\n\n<p>I always have trouble remembering this, and I constantly have to go look it up, and it is mainly because I don't fully understand the syntax of this particular trick.  Can someone break this up and explain character by character what \"2>&amp;1\"  means?</p>\n"},{"tags":["bash","shell","shell-exec"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":10774701,"title":"What's wrong with my shell script","body":"<p>I have a shell script which has a for loop that prints the value of an array element.\nThe array size is 2 but when running the for loop with that array I'm not getting proper output.</p>\n\n<p>Here is the shell script:</p>\n\n<pre><code>#!/bin/bash\n\narry=$(ls /home/developer/.ssh/  | grep \"\\.pub\")\ndeclare -a ARR\ni=0\nfor key in $arry\ndo\n  ARR[i]=$(echo $key | sed 's/.pub//g')\n  i=$((i+1))\ndone\necho ${#ARR[@]}\n## the below for loop is not iterating as expected\nfor pri in $ARR\ndo\n echo $pri\ndone\n</code></pre>\n\n<p>Now instead of giving the output </p>\n\n<pre><code>2\na\nheroku\n</code></pre>\n\n<p>The above code produces:</p>\n\n<pre><code>2\na\n</code></pre>\n\n<p>What is wrong with the above shell code?</p>\n\n<p>I'm relatively new to shell script so pardon my code I you feel it not good</p>\n\n<p>Attaching screenshot of the output\n<img src=\"http://i.stack.imgur.com/mZoAK.png\" alt=\"enter image description here\"></p>\n"},{"tags":["bash","groovy","external-process"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":200,"score":0,"question_id":11851137,"title":"Run external process from groovy","body":"<p>i have a bash script which i want to execute from groovy like</p>\n\n<pre><code>some_shell_script.sh param1 \"report_date=`some_function 0 \\\"%Y%m%d\\\"`\"\n</code></pre>\n\n<p>that script runs successfully from the command line, but when i try to execute it from Groovy</p>\n\n<pre><code>def command = \"some_shell_script.sh param1 \"report_date=`some_function 0 \\\"%Y%m%d_%H%M%S\\\"`\"\"\ndef sout = new StringBuffer()\ndef serr = new StringBuffer()\n//tried to use here different shells /bin/sh /bin/bash bash \nProcessBuilder pb = new ProcessBuilder(['sh', '-c',command])\nProcess proc = pb.start()\nproc.consumeProcessOutput(sout, serr)\n\ndef status = proc.waitFor()\n\nprintln 'sout: ' + sout\nprintln 'serr: ' + serr\n</code></pre>\n\n<p>i have the following error</p>\n\n<pre><code>serr: sh: some_function: command not found\n</code></pre>\n\n<p>at the same time</p>\n\n<pre><code>which some_function\n</code></pre>\n\n<p>returns functional definition like</p>\n\n<pre><code>some_function ()\n{\n;some definition here\n}\n</code></pre>\n\n<p>looks like when i run external script from groovy it start different process without context of parent process. I mean no function definitions of parent process are exists.</p>\n\n<p>Anyone have cue how to cope with such a situation?</p>\n"},{"tags":["ruby","bash","exec"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13241753,"title":"ruby exec use functions from my ~/.bashrc","body":"<p>In my <code>~/.bashrc</code>, I have a function:</p>\n\n<pre><code>function sayHi() {\n    echo \"hi, $@\"\n}\n</code></pre>\n\n<p>and in Ruby I want to:</p>\n\n<pre><code>`sayHi \"friend\"`\n</code></pre>\n\n<p>however, <code>sayHi</code> is \"not found\" in whatever context ruby runs <code>exec</code> or <code>system</code>.</p>\n\n<p>How could I get Ruby to use functions in my <code>.bashrc</code>?</p>\n"},{"tags":["bash","unix","ssh"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":6573,"score":2,"question_id":4412238,"title":"What's the Cleanest Way to SSH and Run Multiple Commands in Bash?","body":"<p><br>\nI already have ssh agent setup, and I can run commands on an external server in bash script doing stuff like:\n<code> ssh blah_server \"ls; pwd;\"<br></code>\nNow, what I'd really like to do is run a lot of long commands on an external server. Enclosing all of these in between quotation marks would be quite ugly, and I'd really rather avoid sshing multiple times just to avoid this. \n<br><br>\nSo, is there a way I can do this in one go enclosed in parentheses or something? I'm looking for something along the lines of:<br><br>\n<code>ssh blah_server (<br>\nls some_folder;<br>\n./someaction.sh<br>\npwd;<br>\n)<br><br></code>\nBasically, I'll be happy with any solution as long as it's clean. Thanks in advance!</p>\n\n<p>[EDIT]<br>To clarify, I'm talking about this being part of a larger bash script. Other people might need to deal with the script down the line, so I'd like to keep it clean. I don't want to have a bash script with one line that looks like:<br>\n<code> ssh blah_server \"ls some_folder; ./someaction.sh 'some params'; pwd; ./some_other_action 'other params';\"</code><br>\nbecause it is extremely ugly and difficult to read.<br>[/EDIT]</p>\n"},{"tags":["linux","bash","vim","ubuntu","terminal"],"answer_count":5,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1080,"score":5,"question_id":6380635,"title":"go to exact line in terminal on Ubuntu","body":"<p>I just start using Ubuntu just a few days ago. Now I'm trying to edit some file using <code>vi</code>. Some files are quite long so when I want to go to the middle of the file, I've to scroll down. Is there any shortcut to go to an exact line number?</p>\n"},{"tags":["arrays","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13240564,"title":"How to search for consecutive numbers from a group of numbers using bash or python","body":"<p>I have a list of numbers like below:</p>\n\n<pre><code>1  0/1\n2  1/1\n3  1/1\n4  1/1\n5  1/1\n6  1/1\n7  0/1\n8  0/1\n</code></pre>\n\n<p>If the column 2 is \"1/1\" for consecutive rows, I would like to report the start and end of positions, say, in here, it should be: 2-6</p>\n\n<p>How should I do this applying some simple bash code, or python if necessary?</p>\n\n<p>many thanks</p>\n"},{"tags":["bash"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13240061,"title":"Access directory with and without execute permission","body":"<p>I used the following commands in linux environment</p>\n\n<p>[junk is a directory]</p>\n\n<pre>\nchmod –x junk      \nls junk \nls –l junk\n</pre>\n\n<p>I got the outputs as..</p>\n\n<pre>\n ls: cannot access junk/5: Permission denied  \n ls: cannot access junk/1: Permission denied  \n ls: cannot access junk/2: Permission denied  \n ls: cannot access junk/4: Permission denied  \n ls: cannot access junk/3: Permission denied \n 1  2  3  4  5\n</pre>\n\n<p>and</p>\n\n<pre>\n  ls: cannot access junk/5: Permission denied \n  ls: cannot access junk/1: Permission denied \n  ls: cannot access junk/2: Permission denied \n  ls: cannot access junk/4: Permission denied \n  ls: cannot access junk/3: Permission denied \n  total 0\n  -????????? ? ? ? ?            ? 1\n  -????????? ? ? ? ?            ? 2\n  -????????? ? ? ? ?            ? 3\n  -????????? ? ? ? ?            ? 4\n  -????????? ? ? ? ?            ? 5\n</pre>\n\n<p>I googled it found that if a directory does not have the execute permission then its inode can not be accessed. My question is here if the inode of the directory \"junk\" is not accessible then how the name of the files in the directory are being shown?</p>\n"},{"tags":["osx","bash","shell","unix","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13236566,"title":"Extract multiple captured groups from sed to variables","body":"<p>I have the following text</p>\n\n<pre><code>abc &lt;THIS&gt; abc &lt;THAT&gt; abc &lt;WHAT&gt; abc\n</code></pre>\n\n<p>where <code>abc</code> is a placeholder for a well defined expression. I'd like to extract the 3 terms in the brackets and save them in 3 separate variables. Is is possible to do that without parsing the text 3 times? Basically I'd like to capture and somehow \"export\" multiple groups.</p>\n\n<p>It's clear that I can extract one of them like this:</p>\n\n<pre><code>VARIABLE=`echo $TEXT | sed \"s_abc &lt;\\(.*\\)&gt; abc &lt;.*&gt; abc &lt;.*&gt; abc_\\1_g\"`\n</code></pre>\n\n<p>But is it possible to get all 3 of them without running <code>sed</code> 3 times?</p>\n\n<p>Other (portable) solutions without <code>sed</code> are also welcome.</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":58,"score":0,"question_id":13233074,"title":"Shell Script : Join small gzipped files into larger files without unzipping them","body":"<p>I have some 8000 gz files of around 60MB each. I want to merge them into few larger files. So how to do it in a bash script <strong>without unzipping them</strong> ?</p>\n\n<p>Shell script may take input as new-file-size or number of files to combine.</p>\n\n<p>For example say I have 1.gz, 2.gz, 3.gz ... 10.gz\nNow I need one file per say 3 files, so now 1.gz, 2.gz and 3.gz will combine into 1_new.gz and so on.</p>\n"},{"tags":["bash","parsing","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":31,"score":-1,"question_id":13238396,"title":"parse result of bash command","body":"<p>I am new to bash scripting and am trying to parse out information from a whois result, specifically, the orgname and city fields.\nIs the proper way to save the result in a string and then parse the string for the relevant information? like:</p>\n\n<pre><code>    RESULT=whois &lt;ip&gt;\n    # parse RESULT\n</code></pre>\n\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["linux","bash","redirect"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13238573,"title":"Need a way to temporarily redirect STDOUT","body":"<p>I know how to redirect output in Linux.  Thing is, I have alot of output in my bash script and I don't want to type something like</p>\n\n<pre><code>echo $foo &gt;&gt; bar\n</code></pre>\n\n<p>over and over again.  I would much rather do something like:</p>\n\n<pre><code>hey, bash, for the time being put all your STDOUT in \"bar\"\necho $foo\n.\n.\nOK, bash, you can go back to regular STDOUT now\n</code></pre>\n\n<p>I tried opening FD 1 as a file:</p>\n\n<pre><code>exec 1&gt;bar\n</code></pre>\n\n<p>but couldn't get STDOUT back to normal when I was done.  Closing the file</p>\n\n<pre><code>exec 1&gt;&amp;-\n</code></pre>\n\n<p>gave me errors that I couldn't get around.</p>\n\n<p>Any way to do this?  Thanks!</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13237279,"title":"bash read command","body":"<p>I try to use read command to catch what user enters.</p>\n\n<pre><code>read -p \"Please enter your name -&gt; \" -n 20 name\n</code></pre>\n\n<p>But I figured out that we can't rectify what we have entered. How can I make the \"BackSpace\" remove and not add?</p>\n"},{"tags":["bash","shell","local"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":237,"score":4,"question_id":4421257,"title":"Why does \"local\" sweep the return code of a command?","body":"<p>I was experiencing a problem with exit codes in a Bash script (using GNU bash 4.1.7) till I found its origin in this surprising (at least for me) behavior of <code>local</code>. Let me show a simplified example:</p>\n\n<pre><code>$ fun() { local x=$(false); echo \"exit code: $?\"; }; fun\nexit code: 0\n</code></pre>\n\n<p>Compare it with:</p>\n\n<pre><code>$ fun() { x=$(false); echo \"exit code: $?\"; }; fun\nexit code: 1\n</code></pre>\n\n<p>The last one works as I would expect. I've read the <a href=\"http://linux.die.net/man/1/bash\" rel=\"nofollow\">manual page</a>, the <a href=\"http://tldp.org/LDP/abs/html/localvar.html\" rel=\"nofollow\">TLDP tutorial</a>, but I found no references to this specific situation. Can anyone explain that behavior?</p>\n"},{"tags":["bash","shell","grep","pipe"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":13195285,"title":"Pipe multiple commands to a single command with no EOF signal wait","body":"<p>How can I pipe the std-out of multiple commands to a single command? Something like:</p>\n\n<pre><code>(cat my_program/logs/log.*;tail -0f my_program/logs/log.0) | grep \"filtered lines\"\n</code></pre>\n\n<p>I want to run all the following commands on a single command-line using pipes and no redirects to a temp file (if possible). There is one small nuance that means I can't use parentheses; I want the last command to be a tail feed so I want the grep to happen after every line is received by the std-in - not wait for EOF signal. </p>\n"},{"tags":["bash","quoting"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13235812,"title":"read a variable line by line without gobbling the \\ character","body":"<p>I am using this snippet to read a variable line by line:</p>\n\n<pre><code>echo \"${lines}\" | while read line; do something with ${line}; done\n</code></pre>\n\n<p><code>lines</code> contains new lines and occurrences of the <code>\\</code> character (the <code>line</code> will be interpreted as a <code>C</code> string). Unfortunately, somewhere in this code the <code>\\</code> characters are simply stripped. Why, and how do I fix that?</p>\n\n<p>EDIT:\na sample input is this:</p>\n\n<pre><code>foo $'bar'\nfee $'ber\\fbir'\n</code></pre>\n\n<p>note that only the <code>\\</code> is stripped, not the <code>$''</code> which will be used later to interpret the string as a <code>C</code> string.</p>\n"},{"tags":["css","bash","csslint"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13234414,"title":"How do you use csslint from the command line?","body":"<p>I'm new at Ubuntu, I'll be the first to admit that, but I need to integrate <code>csslint</code> into a CI build script and I found the about page on the <code>csslint</code> site unhelpful.  It gave me two options for installing <code>csslint</code> but they require either <code>node</code> or <code>rhino</code>:</p>\n\n<pre><code>Node.js:\nsudo npm install -g csslint\n\nRhino.js:\njava -jar rhino.jar csslint-rhino.js --rules= ~ /* suppressed for simplicity */\n</code></pre>\n\n<p>Now having hit google I'm finding myself trying to find either of these in a format I know how to work with. On google groups I found someone asking a similar question, so I'm not the only one who is having this problem, but the answer was that <code>rhino</code> is not a ready made product you install and run but a library you work with.</p>\n\n<p>All I need to do is pass css files to <code>csslint</code> through bash with <code>csslint</code> args get the response back and evaluate whether or not the build should fail due to violations.  Is there anywhere I can find step-by-step instructions that include dependencies such as <code>node</code> or <code>rhino</code>?</p>\n\n<p>Thanks everyone.</p>\n\n<p>-- Update</p>\n\n<p>Found the answer myself and decided to put it here to help others.</p>\n\n<ol>\n<li>sudo apt-get install npm,</li>\n<li>sudo npm install -g csslint,</li>\n<li>csslint pathtofile.css,</li>\n<li>have feelings hurt.</li>\n</ol>\n\n<p>Now you're at this point the website documentation is useful so here is a link to it:</p>\n\n<p><a href=\"http://csslint.net/about.html#docs\" rel=\"nofollow\">http://csslint.net/about.html#docs</a></p>\n"},{"tags":["android","bash","shell","sh"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12904693,"title":"Shell - get android devices into array","body":"<p>I am new to shell scripting and am trying to get all the android devices in an array but my array is empty when the function is finished.</p>\n\n<pre><code>#!/bin/bash\n\ndeclare -a arr\nlet i=0\n\nMyMethod(){\n  adb devices | while read line #get devices list\n  do\n    if [ ! \"$line\" == \"\" ] &amp;&amp; [ `echo $line | awk '{print $2}'` == \"device\" ]\n    then\n      device=`echo $line | awk '{print $1}'`\n      echo \"Add $device\"\n      arr[$i]=\"$device\"\n      let i=$i+1\n    fi\n  done\n\necho \"In MyMethod: ${arr[*]}\"\n}\n\n################# The main loop of the function call #################\n\nMyMethod\necho \"Not in themethod: ${arr[*]}\"\n</code></pre>\n\n<p><code>arr</code> - is empty, what am I doing wrong?</p>\n\n<p>Thanks for advice.</p>\n"},{"tags":["bash","text"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":61,"score":1,"question_id":11204826,"title":"bash: how to flatten columns in text file?","body":"<p>I have a file like this:</p>\n\n<pre><code>foo, bar, foo1\nbar, foo\nfoo\n</code></pre>\n\n<p>I want it like this:</p>\n\n<pre><code>foo\nbar\nfoo1\nbar\nfoo\nfoo\n</code></pre>\n"},{"tags":["linux","bash","process"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":2563,"score":3,"question_id":3790895,"title":"Linux / Bash, using ps -o to get process by specific name?","body":"<p>I am trying to use the ps -o command to get just specific info about processes matching a certain name. However, I am having some issues on this, when I try to use this even to just get all processes, like so, it just returns a subset of what a normal <code>ps -ef</code> would return (it doesn't return nearly the same number of results so its not returning all running processes)</p>\n\n<pre><code>ps -ef -o pid,time,comm\n</code></pre>\n\n<p>I want to try something like this (below) but incorporate the ps -o to just get specific info from it (just the PID)</p>\n\n<pre><code>ps -ef |grep `whoami`| grep firefox-bin\n</code></pre>\n\n<p>Any advice is appreciated as to how to do this properly, thanks </p>\n"},{"tags":["bash","variables","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13233452,"title":"Bash variable change doesn't persist","body":"<p>I have a short bash script to check to see if a Python program is running. The program writes out a PID file when it runs, so comparing this to the current list of running processes gives me what I need. But I'm having a problem with a variable being changed and then apparently changing back! Here's the script:</p>\n\n<pre><code>#!/bin/bash\n# Test whether Home Server is currently running\nPIDFILE=/tmp/montSvr.pid\nisRunning=0\n# does a pid file exist?\nif [ -f \"$PIDFILE\" ]; then\n  # pid file exists\n  # now get contents of pid file\n  cat $PIDFILE | while read PID; do\n    if [ $PID != \"\" ]; then\n      PSGREP=$(ps -A | grep $PID | awk '{print $1}')\n      if [ -n \"$PSGREP\" ]; then\n        isRunning=1\n        echo \"RUNNING: $isRunning\"\n      fi\n    fi\n  done\nfi\necho \"Running: $isRunning\"\nexit $isRunning\n</code></pre>\n\n<p>The output I get, when the Python script <em>is</em> running, is:</p>\n\n<pre><code>RUNNING: 1\nRunning: 0\n</code></pre>\n\n<p>And the exit value of the bash script is 0. So isRunning is getting changed within all those if statements (ie, the code is performing as expected), but then somehow isRunning reverts to 0 again. Confused...</p>\n"},{"tags":["linux","bash","shell"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":52,"score":2,"question_id":13233116,"title":"Calling one function within another function","body":"<p>I am trying to call one bash function from within another bash function and it is not working as expected : </p>\n\n<pre><code>#/bin/bash\nfunction func1(){\n    echo \"func1 : arg = ${1}\"\n    return 1\n}\nfunction func2(){\n    echo \"func2 : arg = ${1}\"\n    local var=func1 \"${1}\"\n    echo \"func2 : value = $var\"\n}\nfunc2 \"xyz\"\n</code></pre>\n\n<p>and the current output is :</p>\n\n<pre><code>Current output :\nfunc2 : arg = xyz\nfunc2 : value = func1\n</code></pre>\n\n<p>Question : how can I modify the program above so as to get the following output ? : </p>\n\n<pre><code>Desired output : \nfunc2 : arg = xyz\nfunc1 : arg = xyz\nfunc2 : value = 1\n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13232218,"title":"Passing parameters with spaces","body":"<p>Why is the output of <code>test foo bar</code> only <code>foo</code> instead of <code>foo bar</code>?</p>\n\n<pre><code>$ cat test\nfunction f\n{\n    local args=$1\n\n    echo $args\n}\nf \"$@\"\n\n$ bash test foo bar\nfoo\n</code></pre>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13231354,"title":"bash cut to variable and cd","body":"<p>Hi i am having a really strange problem.\nI am trying to run the following scrip as root:</p>\n\n<pre><code>loc=$(transmission-remote 192.168.1.74:9091 --auth=user:password -t$TORRENTID -i |sed -e '1d;$d;s/^ *//'|grep Location: |cut -s -d : -f2) \ncd \"$loc\"\n</code></pre>\n\n<p>But get the error messege :</p>\n\n<pre><code>cd: can't cd to  /leprechaun_tv-shows/download/\n</code></pre>\n\n<p>But i works if i create a new string:</p>\n\n<pre><code>hello= /leprechaun_tv-shows/download/ \ncd $hello\n</code></pre>\n\n<p>what am i doing wrong?</p>\n"},{"tags":["linux","bash","sockets","tcp"],"answer_count":2,"favorite_count":5,"up_vote_count":11,"down_vote_count":0,"view_count":541,"score":11,"question_id":7765004,"title":"TCP connection, bash only","body":"<p>I found this line in a script. While I globally understand what it does--opening a bidirectional TCP connection--, I need some explanations on the syntax. Here's the line:</p>\n\n<pre><code>exec 5&lt;&gt;\"/dev/tcp/${SERVER}/${PORT}\"\n</code></pre>\n\n<p>And my questions:</p>\n\n<ol>\n<li><code>&lt;</code> and <code>&gt;</code> are usually used to redirect IOs. What does it mean there? Is it usable in another context? How?</li>\n<li>Why does it work, while <code>/dev/tcp</code> doesn't exists? </li>\n<li>Why 5? Can it be another number? What are the values allowed?</li>\n<li>Why is <code>exec</code> necessary? (given nothing is actually <em>executed</em>)</li>\n</ol>\n\n<p>Thanks.</p>\n"},{"tags":["bash","ssh","mysqldump","sudo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13224763,"title":"sudo'd mysqldump over ssh syntax?","body":"<p>I'd like a single command that:</p>\n\n<ul>\n<li>ssh's into my server as user foo, using the public keys I have set up</li>\n<li>executes a mysqldump of some database with the /etc/mysql/debian.cnf defaults-file</li>\n<li>to stdout, so I can pipe it locally</li>\n<li>while doing a sudo on the server remotely, because user foo is not allowed to read /etc/mysql/debian.cnf. foo is allowed to sudo bash but not sudo mysqldump.</li>\n</ul>\n\n<p>This is the best I have come up:</p>\n\n<p><code>echo 'mysqldump --defaults-file=/etc/mysql/debian.cnf dbname' | ssh -t -i keys/id_rsa -l foo example.com sudo bash -s</code></p>\n\n<p>This ugly beast works, but produces: <code>Pseudo-terminal will not be allocated because stdin is not a terminal.</code>, and I really don't like the echo. There must be a better way?</p>\n"},{"tags":["bash","dns","ip-address","nslookup"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13230318,"title":"nslookup output","body":"<p>Here's some simple output from nslookup:\n    nslookup www.go2linux.org\n    Server:         4.2.2.2\n    Address:        4.2.2.2#53</p>\n\n<p>What does <code>#53</code> mean over there?</p>\n"},{"tags":["bash","file-rename"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13227452,"title":"Remove multiple extensions from all files in a directory (Bash)","body":"<p>Thanks to messing up my first attempts to do this, I now have a directory full of files that are now named like this:</p>\n\n<pre><code>valery-special-music-poetry.txt.mtxt.md.md.txt.mtxt.md.md.md\n</code></pre>\n\n<p>which I need to be named:</p>\n\n<pre><code>valery-special-music-poetry.md\n</code></pre>\n\n<p>how can I do this from the command line?</p>\n\n<p>I am running: GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin12)</p>\n"},{"tags":["bash","cygwin","accented-strings"],"answer_count":0,"favorite_count":4,"up_vote_count":13,"down_vote_count":1,"view_count":203,"score":12,"question_id":13094248,"title":"How do I get accented letters to actually work on bash?","body":"<p>My bash installation on cygwin doesn't handle accented letters properly. I tried adding</p>\n\n<pre><code>set input-meta on    # to accept 8-bit characters\nset output-meta on   # to show 8-bit characters\nset convert-meta on  # to show it as character, not the octal representation\n</code></pre>\n\n<p>to my input rc, but this doesn't quite work yet. Indeed, if I type</p>\n\n<pre><code>$ echo ù\n</code></pre>\n\n<p>then before i press enter it is automatically changed to</p>\n\n<pre><code>$ echo \\303\n</code></pre>\n\n<p>although the output is right, for I get</p>\n\n<pre><code>$ echo \\303\nù\n</code></pre>\n\n<p>I get the same result for anyother accented letter. Usually though I use a non-italian keyboard, and I use <code>autohotkey</code> to substitute letters with an apostrophe after them with an accented letter. When this is the case, accented letters get substituted with a <code>\\302</code>, and they print garbage depending on the letter: prints a <code>3y</code> for a <code>ù</code>, a <code>¢</code> for an <code>ò</code>, and nothing for everething else.</p>\n\n<p>How do I get all this to make sense?</p>\n\n<p>EDIT: my locale settings, cygwin version and terminal are the following</p>\n\n<pre><code>$ uname -a\nCYGWIN_NT-6.1-WOW64 ferdi-Asus 1.7.17(0.262/5/3) 2012-10-19 14:39 i686 Cygwin\n$ locale\nLANG=it_IT.UTF-8\nLC_CTYPE=\"it_IT.UTF-8\"\nLC_NUMERIC=\"en_US.UTF-8\"\nLC_TIME=\"it_IT.UTF-8\"\nLC_COLLATE=\"it_IT.UTF-8\"\nLC_MONETARY=\"it_IT.UTF-8\"\nLC_MESSAGES=\"it_IT.UTF-8\"\nLC_ALL=\n$ tty\n/dev/pty1\n</code></pre>\n\n<p>I'm invoking it simply clicking the Cygwin terminal link. It redirects to</p>\n\n<pre><code>C:\\cygwin\\bin\\mintty.exe -i /Cygwin-Terminal.ico -\n</code></pre>\n\n<p>The relevant part of the autohotkey script is the following</p>\n\n<pre><code>#NoEnv  ; Recommended for performance and compatibility with future AutoHotkey releases.\nSendMode Input  ; Recommended for new scripts due to its superior speed and reliability.\nSetWorkingDir %A_ScriptDir%  ; Ensures a consistent starting directory.\n...\n::avra'::avrà\n::avro'::avrò\n...\n</code></pre>\n"},{"tags":["bash","find"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13227072,"title":"bash find format new line","body":"<p>I running a find command which output is similar to a ls -l, I need to insert a new line but it's not working</p>\n\n<pre><code>find $dir_name -size $sizeFile -printf '%M %n %u %g %s %Tb %Td %Tk:%TM %p\\n'\n</code></pre>\n\n<p>the output that I'm getting is like this:</p>\n\n<pre><code>-rwx------ 1 juanpa juanpa 26615 Nov 04 20:47 ./sample.dir1/vimtutor -rwx------ 1 juanpa juanpa 25557 Nov 04 20:47 ./sample.dir1/cdlist -rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 ./sample.dir1/.phones -rwx------ 1 juanpa juanpa 26615 Nov 04 20:47 ./sample.dir1/testdir1/vimtutor -rwx------ 1 juanpa juanpa 26615 Nov 04 20:47 ./sample.dir1/testdir1/subdir1/vimtutor -rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 ./sample.dir1/testdir1/subdir1/phones -rwx------ 1 juanpa juanpa 25557 Nov 04 20:47 ./sample.dir1/testdir1/subdir1/cdlist -rwx------ 1 juanpa juanpa 20558 Nov 04 20:47 ./sample.dir1/testdir1/subdir1/sample.txt -rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 ./sample.dir1/testdir1/phones -rwx------ 1 juanpa juanpa 25557 Nov 04 20:47 ./sample.dir1/testdir1/cdlist -rwx------ 1 juanpa juanpa 20558 Nov 04 20:47 ./sample.dir1/testdir1/sample.txt -rwx------ 1 juanpa juanpa 20558 Nov 04 20:47 ./sample.dir1/sample.txt -rwx------ 1 juanpa juanpa 26615 Nov 04 20:47 ./sample.dir2/vimtutor -rwx------ 1 juanpa juanpa 25557 Nov 04 20:47 ./sample.dir2/cdlist -rwx------ 1 juanpa juanpa 26615 Nov 04 20:47 ./sample.dir2/testdir2/vimtutor -rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 ./sample.dir2/testdir2/phones -rwx------ 1 juanpa juanpa 25557 Nov 04 20:47 ./sample.dir2/testdir2/cdlist -rwx------ 1 juanpa juanpa 26615 Nov 04 20:47 ./sample.dir2/testdir2/subdir2/vimtutor -rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 ./sample.dir2/testdir2/subdir2/phones -rwx------ 1 juanpa juanpa 25557 Nov 04 20:47 ./sample.dir2/testdir2/subdir2/cdlist -rwx------ 1 juanpa juanpa 20558 Nov 04 20:47 ./sample.dir2/testdir2/subdir2/sample.txt -rwx------ 1 juanpa juanpa 20558 Nov 04 20:47 ./sample.dir2/testdir2/sample.txt -rwx------ 1 juanpa juanpa 20558 Nov 04 20:47 ./sample.dir2/sample.txt\n</code></pre>\n\n<p>does any one know what I'm missing or doing wrong???</p>\n\n<p>thanks in advace for any help</p>\n"},{"tags":["linux","bash","shell","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13225053,"title":"Shell Script mkdir if not and mv files to each day","body":"<p>I need to check in a dir that have 150.000 zip files with this kind of format :</p>\n\n<pre><code>log_from_2012_08_14-11:57:12_To_2012_08_14-13:57:12.zip\nlog_from_2012_08_14-13:57:12_To_2012_08_14-15:57:12.zip\nlog_from_2012_08_14-15:57:12_To_2012_08_14-17:57:12.zip\n</code></pre>\n\n<p>if there is a dir with the name equals to the day of the file :</p>\n\n<pre><code>2012_08_14 \n</code></pre>\n\n<p>then move all files that exist from that From_2012_08_14 to that dir, if not create it </p>\n\n<blockquote>\n  <p>( mkdir date +%Y_%M_%D )</p>\n</blockquote>\n\n<p>and then check for each day since august until today november , every file from a day that doenst have is own dir create it and move it there. </p>\n"},{"tags":["bash","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":51,"score":3,"question_id":13225488,"title":"Bash, run script on every .jpg file in a directory with subdirectories","body":"<p>I have some working code, it's very simple - it copies every *.jpg file, renames it into *1.jpg, no worries.</p>\n\n<pre><code>for i in *.jpg; do cp $i ${i%%.jpg}1.jpg;  done\n</code></pre>\n\n<p>how can I run this, so that it works on every file in a directory, every file in the subdirectories of that directory</p>\n\n<p>example directory structure: </p>\n\n<pre><code>    test/test1/test2/somefile.jpg\n    test/anotherfile.jpg\n    test/test1/file.jpg\netc\n</code></pre>\n"},{"tags":["c","linux","bash","expect","rm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13223369,"title":"system command rm not working in expect program","body":"<p>I have a code (1) that is supposed to execute test in another code (its a pseudo-bash). This code (1) is wrote using the \"expect\" for the 'user simulation'.</p>\n\n<p>The problem is when this code (1) execute a system ( on this case, system \"rm totoExpect.txt titiExpect.txt\") when its just doesnt find the titiExpected.txt, but is there!</p>\n\n<p>There is nothing different between the two files, even the permissions are the same, i cant think in a reason that doesnt work.</p>\n\n<p>Here is the part of the code (1) where the problem raises:</p>\n\n<pre><code># test 5\nproc t5 {} {\n    send \"ls &gt; totoExpect.txt\\r\"\n    send \"cat &lt; totoExpect.txt | wc -l &gt; titiExpect.txt\\r\"\n    send \"cat titiExpect.txt\\r\"\n    expect -re \"(0|1|2|3|4|5|6|7|8|9)+.*&gt;\" { ok 5; } default { abort 5 }\n    system \"rm totoExpect.txt titiExpect.txt\"\n}\n</code></pre>\n\n<p>And the Error message:</p>\n\n<pre><code>ls &gt; totoExpect.txt\nout: totoExpect.txt\nseq[0]: 'ls' \n-----3\nensishell&gt;c\n ***** TEST 5 ok\n\nrm: não foi possível remover \"titiExpect.txt\": Arquivo ou diretório não encontrado\nchild process exited abnormally\n    while executing\n\"system \"rm totoExpect.txt titiExpect.txt\"\"\n    (procedure \"t5\" line 6)\n    invoked from within\n\"t5\"\n    (\"eval\" body line 1)\n    invoked from within\n\"eval \"t$t;\" \"\n    (\"foreach\" body line 1)\n    invoked from within\n\"foreach t {0 1 2 3 4 5 6 7} { eval \"t$t;\" } \"\n    invoked from within\n\"expect_user {\n    -timeout 30 \"auto\\n\" {\n    puts \"AUTO:\\n\";\n    foreach t {0 1 2 3 4 5 6 7} { eval \"t$t;\" } \n    }\n    -timeout 30 -re \"(\\[0123456789 \\]+)\\...\"\n    (file \"./testshell.expect\" line 99)\nmake: ** [test] Erro 1\n</code></pre>\n\n<p>Where \"rm: não foi possível remover \"titiExpect.txt\": Arquivo ou diretório não encontrado\" \nmeans \"rm: it was not possible to remove \"titiExpect.txt\": file or directory not found\" (sorry about that...)</p>\n\n<p>and this is the ls -l just after the error message (so titiExpect.txt shouldnt be there):</p>\n\n<pre><code>-rwxrwxr-x   1 fernando       fernando    273 Out 23 17:53 #Makefile#\n-rwxrwxr-x   1 fernando       fernando   6238 Nov  5 21:18 #ensishell.c#\n-rwxrwxr-x   1 fernando       fernando   1271 Out 24 20:30 #readcmd.h#\n-rwxrwxr-x   1 fernando       fernando   3250 Nov  5 21:07 #testshell.expect#\n-rwxrwxrwx   1 fernando       fernando    303 Out 24 20:21 Makefile\ndrwxrwxr-x   2 fernando       fernando   4096 Nov  4 19:06 SEPC shell\n-rw-rw-r--   1 fernando       fernando 193453 Out 18 18:25 Sujet_shell.pdf\n-rwxrwxr-x   1 fernando       fernando  25451 Nov  5 21:17 ensishell\n-rwxrwxrwx   1 fernando       fernando   6238 Nov  5 20:32 ensishell.c\n-rw-rw-r--   1 fernando       fernando  10664 Nov  5 21:17 ensishell.o\n-rwxrwxr-x   1 fernando       fernando   7251 Nov  4 00:33 foo\n-rw-rw-r--   1 fernando       fernando    173 Nov  4 00:33 foo.c\n-rw-rw-r--   1 fernando       fernando     16 Nov  4 01:15 in.txt~\n-rwxrwxrwx   1 fernando       fernando   6603 Out 23 00:37 readcmd.c\n-rwxrwxrwx   1 fernando       fernando   1271 Out 23 01:24 readcmd.h\n-rwxrwxrwx   1 fernando       fernando   1271 Out 23 00:37 readcmd.h~\n-rw-rw-r--   1 fernando       fernando  11216 Nov  5 21:17 readcmd.o\n-rwxrwxrwx   1 fernando       fernando   3250 Nov  5 20:41 testshell.expect\n-rwx------   1 fernando       fernando   1263 Nov  5 12:43 toto.txt\n</code></pre>\n\n<p>The worst problem is this code is not supposed to be modified, but its seems to me that is the programs fault this fail. (in fact, commenting the line solve the problem..)</p>\n\n<p>Any ideas?</p>\n"},{"tags":["bash","scripting","environment","ubuntu-12.04","kubuntu"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":57,"score":1,"question_id":13224804,"title":"tab-expansion and \"./\" bash shell","body":"<p>Maybe someone here would be able to help me out. Have installed Ubuntu 12.04 LTS (kubuntu) on two machines. The <code>.bashrc</code> and <code>.bash_profile</code> files are identical as the file structures on each machine is the same. </p>\n\n<p><strong>On machine 1</strong>: I run bash scripts within a terminal window with the simple: <code>./scriptname.sh</code>  </p>\n\n<p><strong>On machine 2</strong>: I cannot do this and must use: <code>sh scriptname.sh</code>\nNor can I use <code>./</code> and tab-complete the script filename.</p>\n\n<p>All executable bits are set correctly, all files and folders have the correct permissions. In the header of the scripts the shebang is set correctly. </p>\n\n<p>Any ideas why this would be occurring? </p>\n\n<p>If I try to execute the script with <code>./file_motion_grab.sh</code>:</p>\n\n<pre><code>bash: ./file_motion_grab.sh: Permission denied\n</code></pre>\n\n<p>When I try <code>ls -l</code>, I get:</p>\n\n<pre><code>-rwxrwxrwx 1 adelie adelie 351 Nov 4 20:32 file_motion_grab.sh\n</code></pre>\n\n<p>Output of <code>getfacl</code> is:</p>\n\n<pre><code># file: file_motion_grab.sh\n# owner: adelie\n# group: adelie\nuser::rwx\ngroup::rwx\nother::rwx\n</code></pre>\n\n<p>More general - any new script on the second machine must be invoked with: sh scriptname.sh Something probably wrong in the .bash files. But not sure where to look.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":30,"score":-2,"question_id":13224142,"title":"How to set read for different characters in bash-shell?","body":"<p>How to set read for different characters?  Does anyone know a solution?</p>\n\n<pre><code>while true\ndo\n    read -sn3 KEY\n\n        case \"$KEY\" in\n             $'\\x1b[A') echo \"press arrow up\";;   # OK\n             $'\\x1b[B') echo \"press arrow down\";; # OK\n             $'\\x1b[15~') echo \"press key F5\";;   # Problem !!!\n        esac\ndone\n</code></pre>\n\n<p>Thank you</p>\n"},{"tags":["linux","bash"],"answer_count":13,"favorite_count":18,"up_vote_count":42,"down_vote_count":0,"view_count":40117,"score":42,"question_id":192292,"title":"Bash: How _best_ to include other scripts?","body":"<p>The way you would normally include a script is with \"source\"</p>\n\n<p>eg:</p>\n\n<p>main.sh:</p>\n\n<pre><code>#!/bin/bash\n\nsource incl.sh\n\necho \"The main script\"\n</code></pre>\n\n<p>incl.sh:</p>\n\n<pre><code>echo \"The included script\"\n</code></pre>\n\n<p>The output of executing \"./main.sh\" is:</p>\n\n<pre><code>The included script\nThe main script\n</code></pre>\n\n<p>... Now, if you attempt to execute that shell script from another location, it can't find the include unless it's in your path.</p>\n\n<p>What's a good way to ensure that your script can find the include script, especially if for instance, the script needs to be portable?</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":25,"score":2,"question_id":13223020,"title":"bash using getopts","body":"<p>Example of script usage</p>\n\n<pre><code>./foo.sh -v -r /home/ -s /home/user/file\n./foo.sh -r /home/ -s /home/user/file\n</code></pre>\n\n<p>In parameter I always need a file or a folder to scan and a file for the database (-s database file)</p>\n\n<p>inside foo.sh</p>\n\n<pre><code>function entrance()\n{\nwhile getopts \"v:r:s\" opt; do\n  case $opt in\n    v)\n      echo \"-v was triggered, Verbose mode\" &gt;&amp;2\n      ;;\n    r)\n      echo \"-r was triggered, recursive mode: $OPTARG\" &gt;&amp;2\n      ;;\n    s)\n      echo \"-s was triggered, DATABASE: $OPTARG\" &gt;&amp;2\n      ;;\n    \\?)\n      echo \"Invalid option: -$OPTARG\" &gt;&amp;2\n      exit 1\n      ;;\n    :)\n      echo \"Option -$OPTARG requires an argument.\" &gt;&amp;2\n      exit 1\n      ;;\n  esac\ndone\n}\n</code></pre>\n\n<p>I don't know why it doesn't work.</p>\n\n<p>Please fix me.</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","debugging","trap"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":10,"score":1,"question_id":13223279,"title":"how can a sourced file inherit trap DEBUG?","body":"<p>Please consider the following code:</p>\n\n<pre><code>#!/bin/bash\n\nfunction preexec ()\n{\n    echo - e \"\\n--&gt;preexec\"\n}\ntrap 'preexec' DEBUG\n\nfunction testfunc ()\n{\n    echo \"testfunc called\"\n}\n\necho \"before main testfunc\"\ntestfunc \n</code></pre>\n\n<hr>\n\n<p>The output is:</p>\n\n<pre><code>--&gt;preexec\nbefore main testfunc\n\n--&gt;preexec\ntestfunc called\n</code></pre>\n\n<hr>\n\n<p>The function preexec is correctly executed before any command.\n<br>\n<br>\nNow If I source source.sh</p>\n\n<pre><code>#!/bin/bash\n\necho \"sourced file\"\ntestfunc\n</code></pre>\n\n<p>like this:</p>\n\n<pre><code>#!/bin/bash\n\nfunction preexec ()\n{\n    echo -e \"\\n--&gt;preexec\"\n}\ntrap 'preexec' DEBUG\n\nfunction testfunc ()\n{\n    echo \"testfunc called\"\n}\n\necho \"before main testfunc\"\ntestfunc \nsource \"source.sh\"\n</code></pre>\n\n<hr>\n\n<p>The output is:</p>\n\n<pre><code>--&gt;preexec\nbefore main testfunc\n\n--&gt;preexec\ntestfunc called\n\n--&gt;preexec\nsourced file\ntestfunc called\n</code></pre>\n\n<hr>\n\n<p>The command 'source' executes preexec while none of the commands inside the sourced file does the same.<br>\n<br>\nBut, if I modify the script.sh like this</p>\n\n<pre><code>#!/bin/bash\n\ntrap 'preexec' DEBUG\necho \"sourced file\"\ntestfunc\n</code></pre>\n\n<hr>\n\n<p>Then the output is: (firing the main.sh script)</p>\n\n<pre><code>--&gt;preexec\nbefore main testfunc\n\n--&gt;preexec\ntestfunc called\n\n--&gt;preexec\n\n--&gt;preexec\nsourced file\n\n--&gt;preexec\ntestfunc called\n</code></pre>\n\n<hr>\n\n<p>Now every sourced command executes preexec, too.<br>\n<br>\n<strong>Is there any chance to tell the sourced file to inherit this trap without having to add it to the sourced script itself?</strong></p>\n"},{"tags":["bash","sed"],"answer_count":6,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":70,"score":3,"question_id":13216686,"title":"Remove spaces between patterns","body":"<p>I have a log file where data is separated by spaces. Unfortunately one of the datafields contains spaces as well. I would like to replace those spaces with \"%20\". It looks like this:</p>\n\n<pre><code>2012-11-02 23:48:36 INFO 10.2.3.23 something strange name.doc 3.0.0 view1 orientation_right\n</code></pre>\n\n<p>the expected result is</p>\n\n<pre><code>2012-11-02 23:48:36 INFO 10.2.3.23 something%20strange%20name.doc 3.0.0 view1 orientation_right\n</code></pre>\n\n<p>unpredictable that how many spaces we have between the IP address and \".doc\". So I would like to change them between these two patterns using pure bash if possible.</p>\n\n<p>thanks for the help </p>\n"},{"tags":["bash","unix","shell"],"answer_count":8,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":4570,"score":4,"question_id":81520,"title":"How to suppress Terminated message after killing in bash?","body":"<p>How can you suppress the 'Terminated' message that comes up after you kill a process in a bash script?</p>\n\n<p>I tried set +bm, but that doesn't work.</p>\n\n<p>I know another solution involves calling 'exec 2> /dev/null', but is that reliable? How do I reset it back so that I can continue to see stderr?</p>\n\n<p>Thanks</p>\n"},{"tags":["git","bash","shell"],"answer_count":5,"favorite_count":19,"up_vote_count":37,"down_vote_count":0,"view_count":10912,"score":37,"question_id":3258243,"title":"git: check if pull needed","body":"<p>How to check whether the remote repo has changed and I need to pull?</p>\n\n<p>Now I use this simple script:</p>\n\n<pre><code>git pull --dry-run | grep -q -v 'Already up-to-date.' &amp;&amp; changed=1\n</code></pre>\n\n<p>but it is rather heavy.</p>\n\n<p>Do you know any better way? The ideal solution would check all the remote branches, and return names of the changed branches and the number of new commits in each one.</p>\n"},{"tags":["bash","makefile","make"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":25,"score":2,"question_id":13222718,"title":"Makefile - how to differentiate between a variable assignment and a command","body":"<p>I have the following code in my Makefile, but I get the error mentioning that <code>O?=2</code> is not a command that <code>sh -c</code> can run. What am I doing wrong here?</p>\n\n<pre><code>gcc:\n    O?=2\n    @if test -z \"$(DEBUG)\" ; then \\\n      g++ -O${O} *.c -o palindrome ; \\\n    fi\n</code></pre>\n\n<p>I am trying to set <code>O</code> to <code>2</code> if the user did not provide it, and then build my palindrome executable.</p>\n\n<hr>\n\n<p>Exact error:</p>\n\n<pre><code>$ make gcc\nO?=2\n/bin/sh: O?=2: command not found\nmake: *** [gcc] Error 127\n$\n</code></pre>\n"},{"tags":["arrays","bash","index","key"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13219634,"title":"Easiest way to check for an index or a key in an array?","body":"<p>Using:</p>\n\n<pre><code>set -o nounset\n</code></pre>\n\n<p>1) Having an indexed array like:</p>\n\n<pre><code>myArray=( \"red\" \"black\" \"blue\" )\n</code></pre>\n\n<p>Which is the shortest way to check if element 1 is set?<br>\nI sometimes use the following:</p>\n\n<pre><code>test \"${#myArray[@]}\" -gt \"1\" &amp;&amp; echo \"1 exists\" || echo \"1 doesn't exist\"\n</code></pre>\n\n<p>I would like to know if there's a preferred one.\n<br>\n<br>\n2) How to deal with non-consecutive indexes?</p>\n\n<pre><code>myArray=()\nmyArray[12]=\"red\"\nmyArray[51]=\"black\"\nmyArray[129]=\"blue\"\n</code></pre>\n\n<p>How to quick check that '51' is already set for example?\n<br>\n<br>\n3) How to deal with associative arrays?</p>\n\n<pre><code>declare -A myArray\nmyArray[\"key1\"]=\"red\"\nmyArray[\"key2\"]=\"black\"\nmyArray[\"key3\"]=\"blue\"\n</code></pre>\n\n<p>How to quick check that 'key2' is already used for example?\n<br>\n<br>\nThanks</p>\n\n<p><strong>EDITED</strong><br>\nThe simplest way seems to me:</p>\n\n<pre><code>if test \"${myArray['key_or_index']+isset}\"\n    then\n        echo \"yes\"\n    else\n        echo \"no\"\nfi;\n</code></pre>\n\n<p>This works for both indexed and associative arrays. No errors shown with set -o nounset.<br>\nThanks to doubleDown for the headup.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13221578,"title":"How to retrieve f5 in bash","body":"<p>Anyone advise how to fix this code? Problem with F5 in read. Please help..</p>\n\n<pre><code>read -sn3 KEY\n\ncase \"$KEY\" in\n     $'\\x1b[A') echo \"press arrow up\";;\n     $'\\x1b[B') echo \"press arrow down\";;\n     $'???') echo \"press key F5\";;\nesac\n</code></pre>\n\n<p>Thank you all for your help</p>\n"},{"tags":["linux","bash"],"answer_count":11,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":4393,"score":5,"question_id":2925606,"title":"How to create a CPU spike with a bash command","body":"<p>I want to create a near 100% load on a Linux machine.  It's quad core system and I want all cores going full speed.  Ideally, the CPU load would last a designated amount of time and then stop.  I'm hoping there's some trick in bash.  I'm thinking some sort of infinite loop. </p>\n"},{"tags":["bash","find","exec"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":51,"score":0,"question_id":13219156,"title":"Passing result of find to custom functions","body":"<p>I write a bash script:</p>\n\n<pre><code>   #!/bin/bash\n    function test_echo\n    {\n        echo $0\n        echo $1\n        echo $2\n        echo $#\n    }\n    test_echo\n</code></pre>\n\n<p>I try:</p>\n\n<pre><code>find test.sh -type f -exec test_echo '{}' \\;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>find . -type f -exec `./test.sh {}` \\;\n</code></pre>\n\n<p>but it doesn't work.</p>\n\n<p>I need a way to scan file from a folder (I use find) and for each file call a function ( foo_fonction() ) with in parameter the full path of the file.</p>\n\n<pre><code> find . -type f -exec foo_fonction '{}' \\; \n</code></pre>\n\n<p>And how to have the parameter (full path) in the foo_fonction() ?</p>\n"},{"tags":["php","bash","script","cli","args"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13219831,"title":"bash script that calls php script with cli args","body":"<p>I need to write a bash script that wraps a php script,\nI have some variables that needs to be forwarded to the php script and some variables that I need internally for the bash script it self.</p>\n\n<p>The call for the shell script should look like that but the php file can have more params so it needs to be generic : </p>\n\n<pre><code>bash  /tmp/test.sh -c -l /tmp/aaa -php aaa.php -d -p 3 -f 2012-10-23\n</code></pre>\n\n<p>the <code>-php</code> option is mandatory because it contains the php file that needs to be called the <code>-c</code> and <code>-l</code> are optional flag and needs to be used internally for the bash script, everything after the <code>aaa.php</code> are params for the php file.</p>\n"},{"tags":["bash","grep","cut"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13212569,"title":"Bash Using Quotes in Grep/Cut Commands in Scripts","body":"<p>I have a line similar to this</p>\n\n<pre><code>grep -oP \"data-context-item-title=.*.data-context-item-id\" web.html | cut -d'\"' -f2\n</code></pre>\n\n<p>I know this line correctly works since I used it on the terminal and it gave me the desired output. However, I want to put this line in a bash script. so I have this so far</p>\n\n<pre><code>title=\"$(grep -oP 'data-context-item-title=.*.data-context-item-id' web.html | cut -d'\"' -f2)\"\n</code></pre>\n\n<p>This is a problem because it matched the first \"(quotation) with the cut's \"(quotation). Is there anyway to avoid it? </p>\n\n<p>Output without the cut function is something similar to this</p>\n\n<pre><code>data-context-item-title=\"Some long title\" data-context-item-id\ndata-context-item-title=\"Another very long title\" data-context-item-id\n</code></pre>\n\n<p>Keep in mind, I can't use any sed or awk commands to replace cut. </p>\n\n<p>Thanks</p>\n"},{"tags":["bash","documentation","overloading","verbosity"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":184,"score":2,"question_id":8371542,"title":"bash: override echo to print a custom prefix in a script","body":"<p>I have some lengthy scripts calling each other and I want their output to be more descriptive. The idea is to customize the echo command for each script with something like below.</p>\n\n<p>My question is, how to make it non recursive, using <code>echo</code>? </p>\n\n<p>this is script1.sh</p>\n\n<pre><code>#!/bin/bash\n#Original version:\n#function echo(){ echo $(basename $0 .sh): $1; }\n#Version after fixes\nfunction echo(){ builtin echo -n \"$(basename $0 .sh): \"&gt;&amp;2; builtin echo $@ ; } \necho Info\n./script2.sh\n</code></pre>\n\n<p>this is script2.sh</p>\n\n<pre><code>#!/bin/bash\n#Original version:\n#function echo(){ echo $(basename $0 .sh): $1; }\n#Version after fixes\nfunction echo(){ builtin echo -n \"$(basename $0 .sh): \"&gt;&amp;2; builtin echo $@ ; } \necho Info\nexit 0\n</code></pre>\n\n<p>so the output should be:</p>\n\n<pre><code>&gt;./script1.sh\nscript1: Info\nscript2: Info\n</code></pre>\n\n<p>--- EDIT</p>\n\n<p>Bonus:</p>\n\n<pre><code>&gt;./script1.sh 2&gt; /dev/null \nInfo\nInfo\n</code></pre>\n"},{"tags":["bash","sorting","sed","rating"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":13210326,"title":"how to sort the file on the five fields with a certain relationship between them?","body":"<p>There is a file as follows:</p>\n\n<pre><code>&lt;timer begin=\"0000000005\" end=\"0000000006\" ref=\"1\" name=\"A\" rating=\"5.10\"&gt;\n&lt;timer begin=\"0000000004\" end=\"0000000008\" ref=\"2\" name=\"C\" rating=\"10.00\"&gt;\n&lt;timer begin=\"0000000002\" end=\"0000000006\" ref=\"2\" name=\"C\" rating=\"10.00\"&gt;\n&lt;timer begin=\"0000000003\" end=\"0000000005\" ref=\"2\" name=\"B\" rating=\"8.50\"&gt;\n&lt;timer begin=\"0000000002\" end=\"0000000003\" ref=\"1\" name=\"D\" rating=\"7.40\"&gt;\n&lt;timer begin=\"0000000001\" end=\"0000000003\" ref=\"2\" name=\"B\" rating=\"8.50\"&gt;\n&lt;timer begin=\"0000000001\" end=\"0000000002\" ref=\"1\" name=\"A\" rating=\"5.10\"&gt;\n&lt;timer begin=\"0000000000\" end=\"0000000001\" ref=\"1\" name=\"D\" rating=\"7.40\"&gt;\n</code></pre>\n\n<p>Where:</p>\n\n<ul>\n<li>'begin' field is the start time of program; </li>\n<li>'end' field is time of the end of program; </li>\n<li>'ref' field is symbolic field which is used in paragraph 3 of the rules, see below </li>\n<li>'name' field is the name of the program</li>\n<li>'rating' field is the weight of the program.</li>\n</ul>\n\n<p>Need to sort the file in the following manner:</p>\n\n<ol>\n<li>Remain in the list of programs to the maximum rating, the rating of\nthe program with less removed; </li>\n<li>End time of each follow-up program should be less than or equal to the time of the next program; </li>\n<li>If the fields are the same 'ref', then consider the second point is not to;</li>\n<li>In this case, the names of the programs should not be repeated.</li>\n</ol>\n\n<p>In other words, the output should be obtained like this one (the following file is sorted by start time):</p>\n\n<pre><code>&lt;timer begin=\"0000000000\" end=\"0000000001\" ref=\"1\" name=\"D\" rating=\"7.40\"&gt;\n&lt;timer begin=\"0000000001\" end=\"0000000003\" ref=\"2\" name=\"B\" rating=\"8.50\"&gt;\n&lt;timer begin=\"0000000002\" end=\"0000000006\" ref=\"2\" name=\"C\" rating=\"10.00\"&gt;\n</code></pre>\n"},{"tags":["bash","trap"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":29,"score":2,"question_id":13213254,"title":"how to get the original caller lineno when executing a function returning a non-zero value","body":"<p>I've made a func.sh script to be sourced containing:</p>\n\n<pre><code>1. function testfunc ()\n2. {\n3.   echo \"--&gt; TESTFUNC CALLED\"\n4.   caller 0\n5.\n6.   # here I mimic that something went wrong\n7.   echo \"now I return a non-zero value\"\n8.   return 1\n9. }\n</code></pre>\n\n<p>Then I've made a main.sh script<br></p>\n\n<pre><code>1. #!/bin/bash\n2.\n3. source 'func.sh'\n4. testfunc\n5.\n6. exit 0\n</code></pre>\n\n<p><strong>My goal is to catch lineno 4</strong> (in the above script), where I haven't managed correctly the returning value.<br>\n<br>\nTo do that I tried:</p>\n\n<pre><code> 1. #!/bin/bash\n 2.\n 3. set -o errexit\n 4.\n 5. function exit_handler ()\n 6. {\n 7.     echo \"--&gt; EXIT HANDLER\"\n 8. \n 9.     echo \"BACKTRACE IS:\"\n10.     local i=0\n11.     while caller $i &gt; /dev/null\n12.         do\n13.             caller $i\n14.             let \"i=i+1\"\n15.     done\n16.\n17.     echo \"PASSED LINENO IS: $1\"\n18.     exit 0\n19. }\n20. trap 'exit_handler $LINENO' EXIT \n21.\n22. source 'func.sh'\n23. testfunc\n24.\n25. exit 0\n</code></pre>\n\n<p>Here I would like to catch the <strong>lineno 23</strong>.<br>\nThe output is:</p>\n\n<pre><code>--&gt; TESTFUNC CALLED\n23 main import.sh\nnow I return a non-zero value\n--&gt; EXIT HANDLER\nBACKTRACE IS:\n1 main.sh\nPASSED LINENO IS: 1\n</code></pre>\n\n<p>The correct lineno is detected by caller inside the function itself, but not in the trap, where the name of the script is correct (main.sh) but not the lineno (1???? instead of 22)\n<br>\n<br>\nI also tried </p>\n\n<pre><code> 1. #!/bin/bash\n 2.\n 3. function err_handler ()\n 4. {\n 5.     echo \"--&gt; ERR HANDLER\"\n 6. \n 7.     echo \"BACKTRACE IS:\"\n 8.     local i=0\n 9.     while caller $i &gt; /dev/null\n10.         do\n11.             caller $i\n12.             let \"i=i+1\"\n13.     done\n14.    \n15.     echo \"PASSED LINENO IS: $1\"\n16.     exit 0\n17. }\n18. trap 'err_handler $LINENO' ERR \n19.\n20. source 'func.sh'\n21. testfunc\n22.\n23. exit 0\n</code></pre>\n\n<p>but the output is:</p>\n\n<pre><code>--&gt; TESTFUNC CALLED\n21 main import.sh\nnow I return a non-zero value\n--&gt; ERR HANDLER\nBACKTRACE IS:\n8 main.sh\nPASSED LINENO IS: 8\n</code></pre>\n\n<p>The caller inside the function itself is still detecting the right <strong>lineno (21</strong> in this case), but the situation inside the trap is even worst because it's getting the lineno 8 which is the line inside func.sh where there's the return 1 ... (while the caller inside the trap refers the line to the wrong script main.sh).\n<br>\n<br>\nAt this point I ran out of ideas... </p>\n"},{"tags":["bash","text","cron","crontab"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13214745,"title":"Bash Script with Crontab","body":"<p>I'm trying to setup a crontab I have this in my current job in the current user I'm logged into</p>\n\n<pre><code>* * * * * /CS/day/get_info.sh\n</code></pre>\n\n<p>get_info.sh is supposed to output a text file every minute and I suspected that it would output a file in the same directory as the script is located but it doesn't. </p>\n\n<p>I've also checked the syslogs to see if I could figure this out.</p>\n\n<pre><code>(user) CMD (/CS/day/get_info.sh)\n(user) MAIL (mailed 46 bytes of output but got status  0x0001#012)\n</code></pre>\n\n<p>Can someone explain to me why this is happening?</p>\n\n<p>Thanks</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13215003,"title":"Are compound command's second and subsequent lines not effected by HISTCONTROL in bash?","body":"<p>When consulting bash's man page, it read this sentence about bash history:</p>\n\n<blockquote>\n  <p>The second and subsequent lines of a multi-line compound command are\n  not tested, and are added to the history regardless of the value of\n  <code>HISTCONTROL</code>.</p>\n</blockquote>\n\n<p>But I have tried this:</p>\n\n<pre><code>$ HISTCONTROL=ignorespace\n$  if [ -f /var/log/messages ]\n&gt; then\n&gt; echo \"/var/log/message exists.\"\n&gt; fi\n$ history | tail -2\n   18  HISTCONTROL=ignorespace\n   19  history | tail -2\n</code></pre>\n\n<p>Note that the <code>if</code> is leaded by a space. Why the second line of this <code>if</code> compound command still not appear in the history?</p>\n"},{"tags":["bash","sed","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13215666,"title":"script for changing prefix of filename in bash","body":"<p>From</p>\n\n<pre><code>abcd_if_vb.c\nabcd_if_av.c\n</code></pre>\n\n<p>to</p>\n\n<pre><code>edfg_if_vb.c\nedfg_if_av.c\n</code></pre>\n\n<p>The problem is to catch what file have <code>abcd</code> prefix.</p>\n"},{"tags":["bash","terminal","sublimetext2"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":39,"score":1,"question_id":13217243,"title":"Sublime Text 2 and Terminal","body":"<p>So I'm trying to make it so that I can start Sublime Text 2 from the terminal through this command, given by the Sublime Text documentation:</p>\n\n<pre><code>ln -s \"/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl\" ~/bin/subl\n</code></pre>\n\n<p>But for some reason this is not working. I get this error from my terminal:</p>\n\n<pre><code>ln: /Users/connorblack/bin/subl: No such file or directory\n</code></pre>\n\n<p>Can anyone help me with this?</p>\n\n<p>Other details: I have SB2 in my Applications folder. I'm trying to do RoR development. </p>\n"},{"tags":["bash","loops","replace","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":13189611,"title":"Replacing specific lines in multiple files using bash","body":"<p>I'm relatively new to bash scripting, having started out of the need to manage my simulations on supercomputers. I'm currently stuck on writing a script to change specific lines in my pbs files. </p>\n\n<p>There's 2 stages to my problem. First, I need to replace a number of lines in a text file (another script), and overwrite that file for my later use. The rough idea is:</p>\n\n<blockquote>\n  <p>Replace lines 27, 28 and 29 of <code>'filename005'</code> with <code>'text1=000'</code>, <code>'text2=005'</code> and <code>'text3=010'</code></p>\n</blockquote>\n\n<p>Next, I'd like to do that recursively for a set of text files with numbered suffixes, and the numbering influences the replaced text. </p>\n\n<p>My code so far is: </p>\n\n<pre><code>#!/bin/bash\nfor ((i = 1; i &lt; 10; i++))\n    do\n    let NUM=i*5\n    let OLD=NUM-5\n    let NOW=NUM\n    let NEW=NUM+5\n\n    let FILE=$(printf \"filename%03g\" $NUM)\n    sed \"27 c\\text1=$OLD\" $FILE\n    sed \"28 c\\text2=$NOW\" $FILE\n    sed \"29 c\\text3=$NEW\" $FILE\ndone\n</code></pre>\n\n<p>I know there are some errors in the last 4 lines of my code, and I'm still studying up on the proper way to implement <code>sed</code>. Appreciate any tips!</p>\n\n<p>Thanks!\nCS</p>\n"},{"tags":["linux","bash","ffmpeg"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":2517,"score":6,"question_id":6239350,"title":"How to extract duration time from ffmpeg output?","body":"<p>To get a lot of information about a media file one can do</p>\n\n<pre><code>ffmpeg -i &lt;filename&gt;\n</code></pre>\n\n<p>where it will output a lot of lines, one in particular</p>\n\n<pre><code>Duration: 00:08:07.98, start: 0.000000, bitrate: 2080 kb/s\n</code></pre>\n\n<p>I would like to output only <code>00:08:07.98</code>, so I try</p>\n\n<pre><code>ffmpeg -i file.mp4 | grep Duration| sed 's/Duration: \\(.*\\), start/\\1/g'\n</code></pre>\n\n<p>But it prints everything, and not just the length.</p>\n\n<p>Even <code>ffmpeg -i file.mp4 | grep Duration</code> outputs everything.</p>\n\n<p>How do I get just the duration length?</p>\n"},{"tags":["arrays","bash","script"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1026,"score":1,"question_id":6426142,"title":"To append each element fo a string array in Bash","body":"<p>I have an array, each element being a string. How to write code in Bash to append each element with another string? or is it possible in Bash? In java, the code should be sth like,</p>\n\n<pre><code>for(int i=0; i&lt;array.length; i++)\n{\n    array[i].append(\"content\");\n}\n</code></pre>\n"},{"tags":["bash","haxe"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13213701,"title":"Get output of shell command in Haxe","body":"<p>In Haxe, is there a method in the Sys class (or some other class) that returns the output of a shell command (for example, the command \"ls\"), or will I need to implement this method myself for each target language? I'd like to find a method for invoking shell commands that works with every Haxe target language.</p>\n"},{"tags":["python","bash","makefile"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":53,"score":-2,"question_id":13210412,"title":"python execution through makefile","body":"<p>When I execute the python script through Makefile I'm getting this error which was not present earlier.</p>\n\n<p><strong>Error is:</strong></p>\n\n<pre class=\"lang-css prettyprint-override\"><code>/bin/bash: -c: line 0: unexpected EOF while looking for matching `\"'\n/bin/bash: -c: line 3: syntax error: unexpected end of file\n</code></pre>\n\n<p>Can anyone please help me in this regard what may be the issue?</p>\n\n<p>Following is the snippet of my Makefile </p>\n\n<pre><code>generate: python $(path)/generate.py \n</code></pre>\n\n<p>And i use command \"make generate\" Makefile is in the working directory and script is in the path</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13206311,"title":"Bash - function with optional arguments and missing logic","body":"<p>I'm trying make simple function for the useradd command and to quickly improve my poor shell programming skills.</p>\n\n<pre><code>useradd -m -g [initial_group] -G [additional_groups] -s [login_shell] [username]\n</code></pre>\n\n<p>Right now I'm somewhat unsure how to function with optional arguments.  After some Googling and I think might have a handle on that, just need to play around the code.</p>\n\n<p>One thing that I'm unsure about is the logic and I'm curious on how you guys would go about writing this.  I'm sure it will be better then what I could hack together.</p>\n\n<hr>\n\n<p>Here is how I going to try setup my function arguments, for the login shell and the initial group I would them to have generic defaults.</p>\n\n<pre><code>arg1 - userName, required\narg2 - loginShell, optional (default: /bin/bash)\narg3 - initGroup, optional (default: users)\narg4 - otherGroups, optional (default: none)\n</code></pre>\n\n<p>This is some lame pseudo code on how I'm thinking to structure this.</p>\n\n<pre><code>function addUser( userName, loginShell, initGroup, otherGroups){\n// Not how I would go about this but you should get the point\n  string bashCmd = \"useradd -m -g \";\n\n// Adding the initial user group\n  if(initGroup == null){\n    bashCmd += \"users\";\n  } else {\n    bashCmd += initGrop;\n  }\n\n// Adding any additional groups\n  if(otherGropus != null){\n    bashCmd += \" -G \" + otherGroups;\n  }\n\n  if(loginShell == null){\n    bashCmd += \" -s /bin/bash \" + userName;\n  } else {\n    bashCmd += \" -s \" + loginShell + \" \" + userName;\n  }\n}\n</code></pre>\n\n<hr>\n\n<p>These are the links I'm going by</p>\n\n<p><a href=\"http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-8.html\" rel=\"nofollow\">http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-8.html</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/6212219/passing-parameters-to-a-bash-function\">Passing parameters to a bash function</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/9332802/how-to-write-a-bash-script-that-takes-optional-input-arguments\">How to write a bash script that takes optional input arguments?</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/13197207/using-functions-inside-here-document\">Using Functions inside here document</a></p>\n"},{"tags":["bash","gnu","unix-utils"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13214978,"title":"\"ensure\" like utility for adding content into .*rc files","body":"<p>I am looking for a command line utility, similar to a puppet \"ensure\" to install\nsome function or some string content in a given resource file, eg., .bashrc. without clobbering existing text or duplicating the entry on reinstall.</p>\n\n<p>This could be done with comment placeholders if need be.</p>\n\n<p>This would be more efficient than appending the same contents to the .bashrc etc. IMO.</p>\n"},{"tags":["bash","loops","whitespace"],"answer_count":16,"favorite_count":29,"up_vote_count":56,"down_vote_count":0,"view_count":51305,"score":56,"question_id":301039,"title":"How can I escape white space in a bash loop list?","body":"<p>I have a bash shell script that loops through all child directories (but not files) of a certain directory.  The problem is that some of the directory names contain spaces.  </p>\n\n<p>Here are the contents of my test directory:</p>\n\n<pre><code>$ls -F test\nBaltimore/  Cherry Hill/  Edison/  New York City/  Philadelphia/  cities.txt\n</code></pre>\n\n<p>And the code that loops through the directories:</p>\n\n<pre><code>for f in `find test/* -type d`; do\n  echo $f\ndone\n</code></pre>\n\n<p>Here's the output:</p>\n\n<pre>\ntest/Baltimore\ntest/Cherry\nHill\ntest/Edison \ntest/New\nYork\nCity\ntest/Philadelphia\n</pre>\n\n<p>Cherry Hill and New York City are treated as 2 or 3 separate entries.</p>\n\n<p>I tried quoting the filenames, like so:</p>\n\n<pre><code>for f in `find test/* -type d | sed -e 's/^/\\\"/' | sed -e 's/$/\\\"/'`; do\n  echo $f\ndone\n</code></pre>\n\n<p>but to no avail.</p>\n\n<p>There's got to be a simple way to do this.</p>\n\n<hr>\n\n<p>The answers below are great.  But to make this more complicated - I don't always want to use the directories listed in my test directory.  Sometimes I want to pass in the directory names as command-line parameters instead.</p>\n\n<p>I took Charles' suggestion of setting the IFS and came up with the following:</p>\n\n<pre><code>dirlist=\"${@}\"\n(\n  [[ -z \"$dirlist\" ]] &amp;&amp; dirlist=`find test -mindepth 1 -type d` &amp;&amp; IFS=$'\\n'\n  for d in $dirlist; do\n    echo $d\n  done\n)\n</code></pre>\n\n<p>and this works just fine unless there are spaces in the command line arguments (even if those arguments are quoted).  For example, calling the script like this: <code>test.sh \"Cherry Hill\" \"New York City\"</code> produces the following output:</p>\n\n<pre>\nCherry\nHill\nNew\nYork\nCity\n</pre>\n"},{"tags":["bash","sed","awk"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":61,"score":4,"question_id":13201392,"title":"Removing all duplicate entries in a field","body":"<p>I have a file that is of the following format:</p>\n\n<pre><code>text   number   number   A;A;A;A;A;A\ntext   number   number   B\ntext   number   number   C;C;C;C;D;C;C;C;C\n</code></pre>\n\n<p>What I want to do is remove all repeats of the entries in the fourth column to end up with this:</p>\n\n<pre><code>text   number   number   A\ntext   number   number   B\ntext   number   number   C;D\n</code></pre>\n\n<p>I'd prefer to use bash scripting for a solution to fit into a pipe with other text manipulation I'm doing to this file.</p>\n\n<p>Thanks!</p>\n"},{"tags":["osx","bash","find","xargs"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13184700,"title":"Using find and exec to create directories and then work with relative path to that directory","body":"<p>I have a bunch of .emlx Apple Mail files in structured folders, which I would like to import into Apple Mail. I know I can do this manually, by renaming the folder to folder.mbox, and then placing the .emlx files in a nested folder called \"Messages.\"</p>\n\n<p>I have hundreds of these folders, so I'm attempting to do it with bash instead of manually.</p>\n\n<p>I can set up the basic structure like so:</p>\n\n<pre><code>find /path/to/folders/* -type d -exec mv {} {}.mbox \\; -exec mkdir {}.mbox/Messages \\;\n</code></pre>\n\n<p>But I'm having trouble figuring out how to move the .emlx files into the newly created subfolder. I tried this:</p>\n\n<pre><code>find /path/to/folders/ -name \\*.emlx -print0 | xargs -0 -I {} mv {} ./Messages/\n</code></pre>\n\n<p>... which I figured was a long shot, but surely there's some way of dealing with the list of files that <code>find</code> generates relative to each result's path.</p>\n"},{"tags":["bash","ssh"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13211229,"title":"bash setsid & read freezes","body":"<p>I have script for ssh login without expect:</p>\n\n<pre><code>function do_auth_connect(){\n    if [ -n \"$SSH_ASKPASS_TMPFILE\" ]; then\n        cat \"$SSH_ASKPASS_TMPFILE\"\n        exit 0\n    elif [ $# -lt 1 ]; then\n        echo \"Usage: echo password | $0 &lt;ssh command line options&gt;\" &gt;&amp;2\n        exit 1\n    fi\n\n    sighandler() {\n        rm \"$TMP_PWD\"\n    }\n\n    TMP_PWD=$(mktemp)\n    chmod 600 \"$TMP_PWD\"\n    trap 'sighandler' SIGHUP SIGINT SIGQUIT SIGABRT SIGKILL SIGALRM SIGTERM\n\n    export SSH_ASKPASS=$0\n    export SSH_ASKPASS_TMPFILE=$TMP_PWD\n\n    [ \"$DISPLAY\" ] || export DISPLAY=dummydisplay:0\n    read password\n    echo $password &gt;&gt; \"$TMP_PWD\"\n\n    # use setsid to detach from tty\n    #exec setsid \"$@\"\n    setsid \"$@\"\n\n    rm \"$TMP_PWD\"\n}\n</code></pre>\n\n<p>If I use command like:</p>\n\n<pre><code>echo \"my_password\" | do_auth_connect ssh use@domain \"uname -a\"\n</code></pre>\n\n<p>all work fine. But if I use:</p>\n\n<pre><code>read password\necho \"$password\" | do_auth_connect ssh use@domain \"uname -a\"\n</code></pre>\n\n<p>script freezes.</p>\n\n<p>\"set -x\" shows that the script goes into a loop, and wait another \"read\" param.</p>\n\n<p>How I can fix this? Thanks</p>\n\n<p><strong>---UPD---</strong> (for @Barmar)</p>\n\n<p>set -x output when ok (with scp example):</p>\n\n<pre><code>+ echo 'user_password'\n+ do_auth_connect scp -P 444 user@domain:/home/user/dbg.log /home/user/dbg.log\n+ '[' -n '' ']'\n+ '[' 5 -lt 1 ']'\n++ mktemp\n+ TMP_PWD=/tmp/tmp.X8TKTIchq6\n+ chmod 600 /tmp/tmp.X8TKTIchq6\n+ trap sighandler SIGHUP SIGINT SIGQUIT SIGABRT SIGKILL SIGALRM SIGTERM\n+ export SSH_ASKPASS=./1.sh\n+ SSH_ASKPASS=./1.sh\n+ export SSH_ASKPASS_TMPFILE=/tmp/tmp.X8TKTIchq6\n+ SSH_ASKPASS_TMPFILE=/tmp/tmp.X8TKTIchq6\n+ '[' :0.0 ']'\n+ read password\n+ echo 'user_password'\n+ setsid scp -P 444 user@domain:/home/user/dbg.log /home/user/dbg.log\n+ echo 'user_password'\n+ do_auth_connect scp -P 444 user@domain:/home/user/dbg.log /home/user/dbg.log\n+ '[' -n /tmp/tmp.X8TKTIchq6 ']'\n+ cat /tmp/tmp.X8TKTIchq6\n+ exit 0\n+ rm /tmp/tmp.X8TKTIchq6\n+ exit\n</code></pre>\n\n<p>and when fails:</p>\n\n<pre><code>+ read pass\n&gt; user_password\n+ echo 'user_password'\n+ do_auth_connect scp -P 444 user@domain:/home/user/dbg.log /home/user/dbg.log\n+ '[' -n '' ']'\n+ '[' 5 -lt 1 ']'\n++ mktemp\n+ TMP_PWD=/tmp/tmp.7usdmtHgqt\n+ chmod 600 /tmp/tmp.7usdmtHgqt\n+ trap sighandler SIGHUP SIGINT SIGQUIT SIGABRT SIGKILL SIGALRM SIGTERM\n+ export SSH_ASKPASS=./1.sh\n+ SSH_ASKPASS=./1.sh\n+ export SSH_ASKPASS_TMPFILE=/tmp/tmp.7usdmtHgqt\n+ SSH_ASKPASS_TMPFILE=/tmp/tmp.7usdmtHgqt\n+ '[' :0.0 ']'\n+ read password\n+ echo 'user_password'\n+ setsid scp -P 444 user@domain:/home/user/dbg.log /home/user/dbg.log\n+ read -p '&gt; ' pass\n</code></pre>\n\n<p>and this is all, ^C does not work :)</p>\n\n<p><strong>---UPD2---</strong></p>\n\n<p>I found out that any \"read\" breaks the script\nFor example:</p>\n\n<pre><code>read null\necho \"user_password\" | do_auth_connect scp -P 444 user@domain:/home/user/dbg.log ~/dbg.log\n</code></pre>\n\n<p>have some troubles with freezes</p>\n"},{"tags":["bash","variables","background","subprocess","global"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":62,"score":3,"question_id":13207292,"title":"bash background process modify global variable","body":"<p>I have a global var foo=\"some value\" and a background process back_func, I want to the background process to access $foo and modify its value, which can be seen by the main process. It's something like the following:</p>\n\n<pre><code>#!/bin/bash\nfoo=0\n\nfunction back_func {\n     foo=$(($foo+1))\n     echo \"back $foo\"\n}\n\n(back_func) &amp;\necho \"global $foo\"\n</code></pre>\n\n<p>The result of the above script is </p>\n\n<pre><code>global 0\nback 1\n</code></pre>\n\n<p>How could I get the result of global and back are both '1'?, i.e. the back ground process's modification can return back to the main process.</p>\n"},{"tags":["bash","ubuntu"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":136,"score":0,"question_id":13061975,"title":"New User creation script error","body":"<p>I have the script listed below that I can't seem to get the issue worked out of.  I'm trying to make an interactive login script for a UNIX class that I'm in.  I'm basically building out a command to pass into <code>useradd</code>.  The command that I make when passed into the command line (while adding <code>sudo</code>) works as expected, but when I try to run it from my script (which is generating the text that I copy/paste into the command line) it gives me some errors...  At this point I'm at a loss for what to try next to resolve the issue.</p>\n\n<p><strong>ERROR:</strong></p>\n\n<pre><code>useradd -m --user-group jaredm2 #command that is attempting to run...\nuseradd: invalid option -- ' '\nUsage: useradd [options] LOGIN\n....rest of useradd error text....\n</code></pre>\n\n<p><strong>SCRIPT:</strong></p>\n\n<pre><code>#!/bin/bash\n#Add a new user\n\nFINALCOMMAND=\"-m\"\n\n#import useradd defaults...\n. /etc/default/useradd\n\n#Check if running as root\nif [ \"$(id -u)\" != \"0\" ]; then\n    echo \"This script must be ran as root\"\n    exit 1\nfi\n\n#Get the new users Name\n#echo -n \"Please enter the users First and Last Name and press [ENTER]: \"\n#read Name\n\n#Get the new users username\necho \"The username must be 4-20 characters.\"\necho -n \"Please enter the users requested username and press [ENTER]: \"\nread USERNAME\nwhile [ $(grep -c \"^${USERNAME}:\" /etc/passwd) -ge 1 ] || [ ${#USERNAME} -le 3 ] || [ ${#USERNAME} -ge 21 ]\ndo\n    echo \" \"\n    echo \"Error: Username is in use or invalid.  Please select a different username.\"\n    echo \" \"\n    echo -n \"Please enter the users requested username and press [ENTER]: \"\n    read USERNAME   \ndone #USERNAME will be valid from this point\n\n#ASK about the default shell now\necho -n \"Enter the new shell if you would like one (currently $SHELL) or leave blank for the default and press [ENTER]: \"\nread tempSHELL\nif [ ${#tempSHELL} -ge 1 ]; then\n    SHELL=\"$tempSHELL\"\n    FINALCOMMAND=\"$FINALCOMMAND \"\"-s $SHELL\"\nfi\n\n#ASK about a different primary group\necho \"Would you like to enter a non-default primary user group? Defaults to creating a new group that matches the username\"\necho \"Enter a new Primary Group or leave blank for the default and press [ENTER]: \"\nread newPrimaryGroup\n\nif [ ${#newPrimaryGroup} -eq 0 ]; then\n    FINALCOMMAND=\"$FINALCOMMAND --user-group\"\nelse\n    if [ $(grep -c \"^${newPrimaryGroup}\" /etc/group) -ge 1 ]; then\n        FINALCOMMAND=\"$FINALCOMMAND -g $newPrimaryGroup\"\n    else\n        echo \"Invalid group specified reverting to default!\"\n        FINALCOMMAND=\"$FINALCOMMAND --user-group\"\n    fi\nfi\nuseradd -m --user-group jaredm2\n#ASK about additional groups\necho \"Would you like the new user to be a part of any additional groups?  Leave blank if no additional groups are needed or enter additional groups in the format of GROUP1,GROUP2,... (NO SPACES) and press [ENTER]: \"\nread extraGroups\n#remove spaces if the user entered any\nextraGroups=\"${extraGroups//[[:space:]]}\"\nFINALEXTRAGROUPS=\"\"\nIFS=\",\"\nfor g in $extraGroups\ndo\n    if [ $(grep -c \"^${g}\" /etc/group) -ge 1 ]; then\n        FINALEXTRAGROUPS=\"$FINALEXTRAGROUPS,$g\"\n    else\n        echo \"$g is invalid user will not be added...\"\n    fi\ndone\nFINALEXTRAGROUPS=$(echo \"$FINALEXTRAGROUPS\" | tail -c +2)\nif [ ${#FINALEXTRAGROUPS} -ge 1 ]; then\n    FINALCOMMAND=\"$FINALCOMMAND -G $FINALEXTRAGROUPS\"\nfi\n\n#ASK about the home directory\necho \"Would you like to enter a new home directory for the user?  Leave blank to use the default of $HOME/$USERNAME or enter your own and press [ENTER]: \"\nread NEWHOME\n\nif [ ${#NEWHOME} -ge 1 ]; then\n    FINALCOMMAND=\"$FINALCOMMAND -d $NEWHOME\"\nfi\n\n#ADD the username to the command\nFINALCOMMAND=`echo \"$FINALCOMMAND $USERNAME\" | sed 's/ *$//g' | sed 's/^ *//g'`\necho \"useradd $FINALCOMMAND\"\n#PASSCOMMAND=\"sudo passwd $USERNAME\"\n#ADD THE USER\n`useradd $FINALCOMMAND`\n\n`passwd $USERNAME`\n\n`chfn $USERNAME`\n</code></pre>\n\n<p><strong>UPDATE: ADDED DEBUG CONTENT</strong></p>\n\n<pre><code>+ '[' 0 -ge 1 ']'\n++ sed 's/^ *//g'\n++ sed 's/ *$//g'\n++ echo '/usr/sbin/useradd -m -U JaredM'\n+ FINALCOMMAND='/usr/sbin/useradd -m -U JaredM'\n++ '/usr/sbin/useradd -m -U JaredM'\n./addnewuser.sh: line 89: /usr/sbin/useradd -m -U JaredM: No such file or directory\n</code></pre>\n"},{"tags":["python","bash","shell","echo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13211614,"title":"Is there equivalent functionality for 'echo -en ...' in python?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6169217/replace-console-output-in-python\">Replace console output in python</a>  </p>\n</blockquote>\n\n\n\n<p>I am trying to write a program that outputs information including updates to the command line. What I mean by updates is, for example, if files are being processed by the program, perhaps it will keep an updated count of the files processed so far. So <code>1 file</code> is replaced with <code>2 files</code> and then with <code>3 files</code> and so forth.</p>\n\n<p>The following is a sample piece of code that counts out some files and then displays a <a href=\"http://stackoverflow.com/questions/238073/how-to-add-a-progress-bar-to-a-shell-script\">loading bar</a>:</p>\n\n<pre><code>#!/bin/bash\n\nfor a in {1..10}\ndo\n    echo -ne \" $a files processed.\\r\"\n    sleep 1\ndone\necho \"\"\necho -ne '#####                     (33%)\\r'\nsleep 1\necho -ne '#############             (66%)\\r'\nsleep 1\necho -ne '#######################   (100%)\\r'\necho -ne '\\n'\n</code></pre>\n\n<p>Basically, the command line output gets periodically overwritten giving the effect of a primitive text-based animation in the terminal.</p>\n\n<p>There are two problems here:</p>\n\n<ol>\n<li>From what I know from doctors, the <code>echo</code> command is not portable at all.</li>\n<li>I want to do this in a python program, not with a bash file.</li>\n</ol>\n\n<p>Is there a way to achieve functionality similar to this using python?</p>\n"},{"tags":["osx","bash","scripting","launchd"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13207365,"title":"How can I add arguments to OSX launchd plist to pipe output to a log file?","body":"<p>I have tried many different variation on this but just can't get it to work.</p>\n\n<p>I have a plist file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"&gt;\n&lt;plist version=\"1.0\"&gt;\n&lt;dict&gt;\n        &lt;key&gt;Label&lt;/key&gt;\n        &lt;string&gt;com.ilium007.handbrake&lt;/string&gt;\n        &lt;key&gt;ProgramArguments&lt;/key&gt;\n        &lt;array&gt;\n                &lt;string&gt;/bin/bash&lt;/string&gt;\n                &lt;string&gt;/Users/ilium007/support/scripts/handbrake/handbrake.sh &amp;gt;&amp;gt; /Users/ilium007/support/scripts/handbrake/logs/handbrake_encode.log&lt;/string&gt;\n                &lt;!--&lt;string&gt;&amp;gt;&amp;gt;&lt;/string&gt;--&gt;\n                &lt;!--&lt;string&gt;/Users/ilium007/support/scripts/handbrake/logs/handbrake_encode.log&lt;/string&gt;--&gt;\n        &lt;/array&gt;\n        &lt;key&gt;RunAtLoad&lt;/key&gt;\n        &lt;true/&gt;\n        &lt;key&gt;StartInterval&lt;/key&gt;\n        &lt;integer&gt;60&lt;/integer&gt;\n&lt;/dict&gt;\n&lt;/plist&gt;\n</code></pre>\n\n<p>Note the comments in there.</p>\n\n<p>I want to pipe output from the handbrake.sh script to a log file and have tried to do so but keep getting A \"no such file\" error in system.log on OSX.</p>\n\n<pre><code>Nov  3 18:03:54 macmini com.ilium007.handbrake[15348]: /bin/bash: /Users/ilium007/support/scripts/handbrake/handbrake.sh &gt;&gt; /Users/ilium007/support/scripts/handbrake/logs/handbrake_encode.log: No such file or directory Nov  3 18:03:54 macmini com.apple.launchd.peruser.501[162] (com.ilium007.handbrake[15348]): Exited with code: 127\n</code></pre>\n\n<p>If I change the plist to the following, it runs but I get no log so I assume it is only running the first argument:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"&gt;\n&lt;plist version=\"1.0\"&gt;\n&lt;dict&gt;\n        &lt;key&gt;Label&lt;/key&gt;\n        &lt;string&gt;com.ilium007.handbrake&lt;/string&gt;\n        &lt;key&gt;ProgramArguments&lt;/key&gt;\n        &lt;array&gt;\n                &lt;string&gt;/bin/bash&lt;/string&gt;\n                &lt;string&gt;/Users/ilium007/support/scripts/handbrake/handbrake.sh&lt;/string&gt;\n                &lt;string&gt;&amp;gt;&amp;gt;&lt;/string&gt;\n                &lt;string&gt;/Users/ilium007/support/scripts/handbrake/logs/handbrake_encode.log&lt;/string&gt;\n        &lt;/array&gt;\n        &lt;key&gt;RunAtLoad&lt;/key&gt;\n        &lt;true/&gt;\n        &lt;key&gt;StartInterval&lt;/key&gt;\n        &lt;integer&gt;60&lt;/integer&gt;\n&lt;/dict&gt;\n&lt;/plist&gt;\n</code></pre>\n\n<p>The command that I would like to run via launchd is:</p>\n\n<pre><code>/Users/ilium007/support/scripts/handbrake/handbrake.sh &gt;&gt; /Users/ilium007/support/scripts/handbrake/logs/handbrake_encode.log\n</code></pre>\n\n<p>Nothing ever appears in the log file. But if I run that command from the terminal I get content in the log. Any help would be appreciated.</p>\n"},{"tags":["bash","shell","ubuntu"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13210880,"title":"Replace one substring for another string in shell script","body":"<p>I have \"i love Suzi and Marry\" and i want change \"Suzi\" to \"Sara\"</p>\n\n<pre><code>#!/bin/bash\n firstString=i love Suzi and Marry\n secondString=Sara\ndo something...\n</code></pre>\n\n<p>and a the result must be next:</p>\n\n<pre><code>firstString=i love Sara and Marry\n</code></pre>\n\n<p>Maybe someone can help me here?</p>\n"},{"tags":["json","bash","curl","escaping"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":38,"score":0,"question_id":13210184,"title":"Substituting INTO double quotes?","body":"<p>How do I substitute a thing INTO the double quotes:</p>\n\n<pre><code>curl -u \"bk322:$passw\" https://api.github.com/user/repos -d \"{'name':\"$title\"}\"\n</code></pre>\n\n<p>I can't make it</p>\n\n<pre><code>\"{'name':\\\"$title\\\"}\"\n</code></pre>\n\n<p>because this way JSON parser doesn't understand what I mean.</p>\n"},{"tags":["bash","sudo","bash-completion"],"answer_count":3,"favorite_count":2,"up_vote_count":10,"down_vote_count":0,"view_count":4467,"score":10,"question_id":5560442,"title":"how to run two commands in sudo?","body":"<p>is there any way how I can run two db2 commands from a command line? (it will be called from php exec command)</p>\n\n<ol>\n<li><strong>db2 connect to ttt</strong> (note that we need to have the connection live for the second command</li>\n<li><p><strong>db2 UPDATE CONTACT SET EMAIL_ADDRESS = 'mytestaccount@gmail.com'</strong></p>\n\n<p>sudo -su db2inst1 db2 connect to ttt; db2 UPDATE CONTACT SET EMAIL_ADDRESS = 'mytestaccount@gmail.com'</p></li>\n</ol>\n\n<p>the first command finishes correctly but the second one <code>SQL1024N  A database connection does not exist.  SQLSTATE=08003</code></p>\n\n<h1>NOTE</h1>\n\n<p>I need to run this as php user. Command <code>sudo -u db2inst1 id</code> as <strong>php</strong> user gives me correct output.</p>\n"},{"tags":["bash","unix","process","procfs"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":13209796,"title":"Current value of process' environment variable","body":"<p>I was wondering if there is a way to set an environment variable from a bash process and read it from another.</p>\n\n<p>As environment variables' values are local to processes (besides the inheritance), one can't just do <code>export FOO=\"bar\"</code> in a terminal and read it from another.\nI was then trying to get them through <code>/proc/environ</code>, but this is what I got:</p>\n\n<pre><code>etuardu@subranu:~$ FOO=\"foo\" bash\netuardu@subranu:~$ strings /proc/$$/environ | grep FOO\nFOO=foo\netuardu@subranu:~$ export FOO=\"bar\"\netuardu@subranu:~$ strings /proc/$$/environ | grep FOO\nFOO=foo\netuardu@subranu:~$ echo $FOO\nbar\n</code></pre>\n\n<p>It seems I can just get the value that that environment variable had when the process started.<br>\nHow about its current value?</p>\n"},{"tags":["bash","symlink","privileges","setuid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13209215,"title":"/bin/sh does not drop privileges","body":"<p>Hello stackoverflow guys,</p>\n\n<p>I have written a C program that simply invokes a bash shell using system(\"/bin/bash\")</p>\n\n<p>If i enable the setuid permission bit and execute the program, the invoked shell does not have euid set to 0. This is ok, because we know that bash shell drop privileges.</p>\n\n<p>BUT if i change /bin/sh to point to /bin/bash using sudo ln -s /bin/bash /bin/sh</p>\n\n<p>and then execute system with /bin/sh as an argument then the new invoked shell has euid=0. </p>\n\n<p>I am working on ubuntu 10.04</p>\n\n<p>Why this happens?</p>\n"},{"tags":["linux","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":339,"score":1,"question_id":6068929,"title":"String manipulation in bash shell","body":"<p>I am using a script to move a particular file from one location to another location, which retrieves that file name from a log file. When I run this command in the shell prompt, it's okay.</p>\n\n<p><strong><code>Example: When I run this command:</code></strong></p>\n\n<pre><code>tail -2 /pretupsvar/pretups_weblogs/DirectPayOutErrorLog.log |\n    grep 'MESSAGE: SQL Exception:Invalid column index' |\n    sed 's/.*FILE NAME: //;s/].*//;s/ /\\\\ /g'\n</code></pre>\n\n<p>the output is :</p>\n\n<pre><code>userList1305816669650_PB_PBZONE_DLMP_RLMP_ETOPUP_WEEL\\ ONE\\ PAYOUT.xls\n</code></pre>\n\n<p><strong><code>However, when I run this command:</code></strong></p>\n\n<pre><code>cp `tail -2 /pretupsvar/pretups_weblogs/DirectPayOutErrorLog.log |\n    grep 'MESSAGE: SQL Exception:Invalid column index' |\n    sed 's/.*FILE NAME: //;s/].*//;s/ /\\\\ /g'` /pretupshome/\n</code></pre>\n\n<p>the output is:</p>\n\n<pre><code>cp: cannot stat `userList1305816669650_PB_PBZONE_DLMP_RLMP_ETOPUP_WEEL':\n    No such file or directory\ncp: cannot stat `ONE': No such file or directory\ncp: cannot stat `PAYOUT.xls': No such file or directory\n</code></pre>\n\n<p><strong><code>Actually, I do the same in script which is like:</code></strong></p>\n\n<pre><code>fname=`tail -2 /pretupsvar/pretups_weblogs/DirectPayOutErrorLog.log |\n    grep 'MESSAGE: SQL Exception:Invalid column index' |\n    sed 's/.*FILE NAME: //;s/].*//;s/ /\\\\ /g'`\n\nmv /pretupsvar/pretups_weblogs/BulkComissionPayout/UploadOffline/$fname\n    /pretupsvar/pretups_weblogs/BulkComissionPayout/Errorfile/\n</code></pre>\n\n<p>But it can not move this file, showing the same error in above.</p>\n\n<p>Kindly help me: how can I move the same in a script?</p>\n"},{"tags":["bash","active-directory","sh","osx-mountain-lion","launchd"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":178,"score":0,"question_id":12586824,"title":"LaunchD Plist not working","body":"<p>EDIT: It appears as if I am getting an error in the console\ncom.apple.launchd: (com.xxxx.adbind[57]) Exited with code: 1</p>\n\n<p>What does that even mean?</p>\n\n<p>Also; if I load the launchd plist file logged in by using the launchctl command it works fine!</p>\n\n<p>I'm driving myself crazy trying to figure out why my launchd is not working.  I'm using this in Mountain Lion 10.8.2  When I manually start it using launchctl it says it's loaded, but the script is not running. The script when ran manually works fine as well. Perhaps it just needs a better set of eye's to look at what I'm doing.</p>\n\n<p>First, I'll explain what it is I'm trying to accomplish.  I'm having about 400 computers imaged off site.  I need these computers bound to AD, which can't be done out of our network.  I figured by having a launchd script run at startup to call a script, then have the script check to see if it's in the network before it runs I can have these computers bound at first startup in our network before an AD user logs in.</p>\n\n<p>Here's my launchd, I'm putting it in /Library/launchDaemons</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"&gt;\n&lt;plist version=\"1.0\"&gt;\n&lt;dict&gt;\n    &lt;key&gt;Label&lt;/key&gt;\n    &lt;string&gt;com.xxxx.adbind&lt;/string&gt;\n    &lt;key&gt;ProgramArguments&lt;/key&gt;\n    &lt;array&gt;\n        &lt;string&gt;/usr/local/bin/adbind.bash&lt;/string&gt;\n    &lt;/array&gt;\n    &lt;key&gt;RunAtLoad&lt;/key&gt;\n    &lt;true/&gt;\n    &lt;key&gt;WorkingDirectory&lt;/key&gt;\n    &lt;string&gt;/usr/local/bin&lt;/string&gt;\n&lt;/dict&gt;\n&lt;/plist&gt;\n</code></pre>\n\n<p>I've tried using this with and without a WorkingDirectory key.</p>\n\n<p>Here's my script, I'm putting my script in /usr/local/bin</p>\n\n<pre><code>#!/bin/bash\n\ncomputerid=`/usr/sbin/scutil --get LocalHostName`\n\n# Standard parameters\ndomain=\"xxx.xxxx.edu\"           # fully qualified DNS name of Active Directory Domain\nudn=\"xxxxxx\"            # username of a privileged network user\npassword=\"xxxxx\"                    # password of a privileged network user\nou=\"OU=xxx,DC=xxx,DC=xxxx,DC=edu\"       # Distinguished name of container for the computer\n\n# Advanced options\nalldomains=\"enable\"         # 'enable' or 'disable' automatic multi-domain authentication\nlocalhome=\"enable\"          # 'enable' or 'disable' force home directory to local drive\nprotocol=\"smb\"              # 'afp' or 'smb' change how home is mounted from server\nmobile=\"enable\"         # 'enable' or 'disable' mobile account support for offline logon\nmobileconfirm=\"disable\"     # 'enable' or 'disable' warn the user that a mobile acct will be created\nuseuncpath=\"enable\"         # 'enable' or 'disable' use AD SMBHome attribute to determine the home dir\nuser_shell=\"/bin/bash\"      # e.g., /bin/bash or \"none\"\npreferred=\"-preferred xxx.xxxxx.edu\"    # Use the specified server for all Directory lookups and authentication\n                            # (e.g. \"-nopreferred\" or \"-preferred ad.server.edu\")\nadmingroups=\"xxx\\admins,xxx\\teachers,xxx\\ADManagement - Computers,xxx\\employees\"    # These comma-separated AD groups may administer the machine (e.g. \"\" or \"APPLE\\mac admins\")\n\n# Login hook setting -- specify the path to a login hook that you want to run instead of this script\n\n### End of configuration\n\n## Wait until all network services are up.\nipconfig waitall\n\n# Check to see if we're in the district\nif ping -c 1 xxx.xxx.x.x\nthen\n\n# Activate the AD plugin\ndefaults write /Library/Preferences/DirectoryService/DirectoryService \"Active Directory\" \"Active\"\nplutil -convert xml1 /Library/Preferences/DirectoryService/DirectoryService.plist\nsleep 5\n\n# Remove computer from OU\ndsconfigad -f -r -u xxxxxxx -p xxxxxx\nsleep 5\n\n# Bind to AD\ndsconfigad -f -a $computerid -domain $domain -u $udn -p \"$password\" -ou \"$ou\"\n\n# Configure advanced AD plugin options\nif [ \"$admingroups\" = \"\" ]; then\n    dsconfigad -nogroups\nelse\n    dsconfigad -groups \"$admingroups\"\nfi\n\ndsconfigad -alldomains $alldomains -localhome $localhome -protocol $protocol \\\n    -mobile $mobile -mobileconfirm $mobileconfirm -useuncpath $useuncpath \\\n    -shell $user_shell $preferred\n\n# Restart DirectoryService (necessary to reload AD plugin activation settings)\nkillall DirectoryService\n\n# Add the AD node to the search path\nif [ \"$alldomains\" = \"enable\" ]; then\n    csp=\"/Active Directory/All Domains\"\nelse\n    csp=\"/Active Directory/$domain\"\nfi\n\n\n# This works in a pinch if the above code does not\ndefaults write /Library/Preferences/DirectoryService/SearchNodeConfig \"Search Node Custom Path Array\" -array \"/Active Directory/All Domains\"\ndefaults write /Library/Preferences/DirectoryService/SearchNodeConfig \"Search Policy\" -int 4\ndefaults write /Library/Preferences/DirectoryService/ContactsNodeConfig \"Search Node Custom Path Array\" -array \"/Active Directory/All Domains\"\ndefaults write /Library/Preferences/DirectoryService/ContactsNodeConfig \"Search Policy\" -int 4\n\nplutil -convert xml1 /Library/Preferences/DirectoryService/SearchNodeConfig.plist\n\n## Remove the script and launchd job. Be sure to delete the script.\nlaunchctl unload -w /Library/LaunchDaemons/com.xxxx.adbind.plist \nrm /Library/LaunchDaemons/com.xxxx.adbind.plist\nrm /usr/local/bin/adbind.bash\n\nexit 0\nelse\necho \"District not Available. Quitting\"\nexit 1\nfi\n</code></pre>\n\n<p>Thanks for any help!</p>\n"},{"tags":["c","bash","histogram"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":13121052,"title":"Statistically collecting rounding error in a program (C)","body":"<p>I wrote a program that compute 1000000! using FFT.</p>\n\n<p>(please allow me to be short and omit some theoretical resoning :) )</p>\n\n<p>What i want to do is measure ALL the rounding error between a double value and is <code>round()</code>-ed value (using <code>math.h</code> function) to check how this error is behaving (and if it is above 1/2).</p>\n\n<p>I'm doing so by printing the difference between <code>a</code> and <code>round(a)</code> each time i do rounding, and write the result into a file, let's call it <code>diffs.txt</code>, which is <code>~532Mb</code>, using</p>\n\n<p><code>fprintf(my_file,\"%e\\n\",a-round(a));</code></p>\n\n<p>I now need to count the occurrence of every single value that appear in that file.</p>\n\n<p>I'm doing so by what it seems to me an intricate way, using <code>grep</code>, <code>sort</code> and a bash <code>for</code> as follow:</p>\n\n<pre><code>./compute-rounding-err #It creates diffs.txt\nsort -u diffs.txt -o diff-sorted-unique\nfor i in `cat diff-sorted-unique`\ndo\n grep -e \"$i\" | wc -l &gt;&gt; diff-counted\ndone\n</code></pre>\n\n<p>The result is two file. If i pair that files i obtain</p>\n\n<pre><code>diff-sorted-unique:     diff_counted:\n-9.013892e-20           1           \n...                     ...\n0.000000e0              200\n...                     ...\n9.930234e               1\n</code></pre>\n\n<p>I can take these values and make an histogram out of them.</p>\n\n<p>My fear is that doing so on a laptop with a <code>~532Mb</code> file will take a long time.</p>\n\n<p>Anyone knows how to speed things up?</p>\n\n<p>Thanks.</p>\n"},{"tags":["linux","bash","make","gnu-coreutils"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":13205405,"title":"Why the bash I compiled(3.8M) is bigger the one my system provided(937K)?","body":"<p>I have download the bash shell version 4.2 form here: <a href=\"http://ftp.gnu.org/gnu/bash/\" rel=\"nofollow\">http://ftp.gnu.org/gnu/bash/</a>, and then compiled it by my self using the following command:</p>\n\n<pre><code>./configure\nmake\n</code></pre>\n\n<p>But the bash I compiled is much bigger then one system provided:</p>\n\n<p>This is my bash:</p>\n\n<pre><code>$ ls -lh bash\n-rwxrwxr-x 1 unimous unimous 3.8M Oct 31 23:57 bash\n</code></pre>\n\n<p>This is the system's bash:</p>\n\n<pre><code>$ ls -hl /bin/bash \n-rwxr-xr-x 1 root root 937K Sep 19 21:40 /bin/bash\n</code></pre>\n"},{"tags":["bash","emacs","zsh"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13176123,"title":"start C-x e editor in sh-mode","body":"<p>emacs: 23.3.1, zsh: 4.3.17, gnome-terminal: 3.4.1.1</p>\n\n<p>My default major mode is text-mode.</p>\n\n<p>When invoking <code>C-x e</code> in gnome-terminal I would like to set emacs to use sh-mode because it's very likely the mode I would set manually anyways. How to do so?</p>\n\n<p>Possible solution - \nIs there a way to create a template file for the <code>C-x e</code> cmd (to add a heading: <code># -*- mode: sh -*-</code>)?</p>\n\n<p><strong>Solution:</strong></p>\n\n<pre><code>;; open C-x e editor in sh-mode                                                                      \n(setq auto-mode-alist (cons '(\"\\\\(^\\\\|/\\\\)zshec[^/]*$\" . sh-mode) auto-mode-alist))\n</code></pre>\n"},{"tags":["linux","bash","unix"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":13204155,"title":"Split a string based on backslash delimiter","body":"<p>I'm new to bash scripting. I have a string which is like so: <code>\\\\abc\\def\\ghi</code></p>\n\n<p>I want to parse the string using a delimiter and need a one line command for converting it to <code>/abc/def/ghi</code> (convert Windows path to unix path).</p>\n"},{"tags":["bash","ssh","chef"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13202912,"title":"Running Interactive bash Commands over ssh","body":"<p>Im trying to automate my server provisioning process using chef. Since I don't want to run chef as root, I need a chef/deployer user. But I don't want to create this user manually. Instead, I want to automate this step. So I took a shot at scripting it but ran into an issue:</p>\n\n<p>The problem is that if I run</p>\n\n<blockquote>\n  <blockquote>\n    <p>ssh root@123.345.345.567 '/bin/bash -e' &lt; ./add_user.sh</p>\n  </blockquote>\n</blockquote>\n\n<p>where add_user contains</p>\n\n<blockquote>\n  <blockquote>\n    <p>//..if the username doesnt exist already\n      adduser $USERNAME --gecos ''</p>\n  </blockquote>\n</blockquote>\n\n<p>I never see the output or the prompts of the command.</p>\n\n<p>1) Is there a way to run interactive commands in this way?\n2) Is there a better way to add users in an automated fashion?</p>\n"},{"tags":["php","html","regex","bash","parsing"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":87,"score":2,"question_id":13118989,"title":"Modifying a PHP file from a Bash script","body":"<p>I need to perform some modifications to PHP files (PHTML files to be exact, but they are still valid PHP files), from a Bash script. My original thought was to use sed or similar utility with regex, but reading some of the replies here for other HTML parsing questions it seems that there might be a better solution.</p>\n\n<p>The problem I was facing with the regex was a lack of support for detecting if the string I wanted to match: <code>(src|href|action)=[\"']/</code> was in <code>&lt;?php ?&gt;</code> tags or not, so that I could then either perform string concatenation if the match was in PHP tags, or add in new PHP tags should it not be. For example:</p>\n\n<pre><code>(1) &lt;img id=\"icon-loader-small\" src=\"/css/images/loader-small.gif\" style=\"vertical-align:middle; display:none;\"/&gt;\n(2) &lt;li&gt;&lt;span class=\"name\"&gt;&lt;?php echo $this-&gt;loggedInAs()?&gt;&lt;/span&gt; | &lt;a href=\"/Login/logout\"&gt;Logout&lt;/a&gt;&lt;/li&gt;\n(3) &lt;?php echo ($watched_dir-&gt;getExistsFlag())?\"\":\"&lt;span class='ui-icon-alert'&gt;&lt;img src='/css/images/warning-icon.png'&gt;&lt;/span&gt;\"?&gt;&lt;span&gt;&lt;?php echo $watched_dir-&gt;getDirectory();?&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=\"ui-icon ui-icon-close\"&gt;&lt;/span&gt;\n(EDIT: 4) &lt;form method=\"post\" action=\"/Preference/stream-setting\" enctype=\"application/x-www-form-urlencoded\" onsubmit=\"return confirm('&lt;?php echo $this-&gt;confirm_pypo_restart_text ?&gt;');\"&gt;\n</code></pre>\n\n<p>In (1) there a <code>src=\"/css</code>, and as it is not in PHP tags I want that to become <code>src=\"&lt;?php echo $baseUrl?&gt;/css</code>. In (2), there is a PHP tag but it is not around the <code>href=\"/Login</code>, so it also becomes <code>href=\"&lt;?php echo $baseUrl?&gt;/Login</code>.\nUnfortunately, (3) has <code>src='/css</code> but <em>inside</em> the PHP tags (it is an echoed string). It is also quoted by <code>\"</code> in the PHP code, so the modification needs to pick up on that too. The final result would look something like: <code>src='\".$baseUrl.\"/css</code>.</p>\n\n<p>All the other modifications to my HTML and PHP files have been done using a regex (I know, I know...). If regexes could support matching everything except a certain pattern, like <code>[^(&lt;\\?php)(\\?&gt;)]*</code> then I would be flying through this part. Unfortunately it seems that this is Type 2 grammar territory. So - what should I use?\nIdeally it needs to be installed by default with the GNU suite, but other tools like PHP itself or other interpreters are fine too, just not preferred. Of course, if someone could structure a regex that would work on the above examples, then that would be excellent.</p>\n\n<p>EDIT: (4) is the nasty match, where most regexes will fail.</p>\n"},{"tags":["bash","sed","awk"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":36,"score":0,"question_id":13202715,"title":"Sed: get lines beginning with \"RIM-COD-\"","body":"<p>I have file Blackberry jad file:</p>\n\n<pre><code>RIM-COD-URL-12: HelloWorld-12.cod\nRIM-COD-Size: 68020\nRIM-MIDlet-Icon-2-1: ____HOVER_ICON_res/icon/blackberry/icon-68.png,focused\nRIM-COD-URL-11: HelloWorld-11.cod\nRIM-MIDlet-Icon-Count-2: 1\nRIM-COD-URL-10: HelloWorld-10.cod\nRIM-MIDlet-Icon-Count-1: 1\nMIDlet-Vendor: Vasia Pupkin\nRIM-MIDlet-Icon-1-1: res\\icon\\blackberry\\____HOVER_ICON_icon-68.png,focused\nManifest-Version: 1.0\nRIM-MIDlet-Flags-1: 0\nRIM-COD-SHA1-38: 9a c8 b3 35 72 de 34 5e 7a 0a 5b 9e c3 3a 65 4c 20 0f 8e 50\n</code></pre>\n\n<p>I just want to get lines begin with <code>RIM-COD-</code>.</p>\n\n<p>Can you provide me solutions for <code>awk</code> or <code>sed</code>?</p>\n"},{"tags":["bash","shell","sorting"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":3,"view_count":85,"score":-1,"question_id":10571620,"title":"how to use non-printable char as field separator of sort command in bash?","body":"<p>The sort command has a parameter \"-t\" to declare the fields separator instead of the default blank. For example:</p>\n\n<pre><code>sort -t 'a' file\n</code></pre>\n\n<p>what if I want to use a non-printable char as the spearator, like the fifth char in ASCII table ?</p>\n"},{"tags":["linux","bash","ssh","remote-access","pid"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":59,"score":6,"question_id":13200965,"title":"Bash: start remote python application through ssh and get its PID","body":"<p>I'm creating a little bash script to copy new files from a windows machine to a remote linux centos server (i run this script using the git-shell) then i want to restart the python application thats running in the server to use those new files.</p>\n\n<p>The problem is that everytime i run this script i want to end the actual running process before i start it again, so i want to get the pid of the process i start and save it to a file in the remote host so i can read it from there the next time i run the program and kill it.</p>\n\n<p>My code by now looks similar to this:</p>\n\n<pre><code>echo \"Copying code files to server...\"\n# The destination folder has to exist in the server\nscp -r ./python/ root@myserver:/root/\n\necho \"Checking for running processes...\"\n\nif ssh root@myserver 'ls dmr.pid &gt;/dev/null'; then\n    echo \"PID file exists, reading file...\"\n    PID=$(ssh root@myserver 'cat dmr.pid')\n\n    # Terminate the actual process\n    echo \"Terminating the process with PID '$PID'...\"\n    ssh root@myserver 'kill $PID'\nelse\n    echo \"PID file doesn't exist, not known processes running\"\nfi\n\n# Restart the server and get the PID\necho \"Restarting the server...\"\nssh root@myserver 'python /root/python/run_dev_server.py &gt; /dev/null 2&gt;&amp;1 &amp;'\n\nSERV_PID=$(ssh root@myserver 'echo $!')\n\necho \"Saving PID to file dmr.pid\"\nssh root@myserver \"echo '$SERV_PID' &gt; \\\"dmr.pid\\\"\"\n\necho \"Sucesfully finished!\"\n</code></pre>\n\n<p>The important lines are:</p>\n\n<pre><code>ssh root@myserver 'python /root/python/run_dev_server.py &gt; /dev/null 2&gt;&amp;1 &amp;'\nSERV_PID=$(ssh root@myserver 'echo $!')\n</code></pre>\n\n<p>the problem with this is that the script finishes but the file ends up empty as well as the $SERV_PID variable.</p>\n\n<p>And if i dont redirect the outputs and just do something like this:</p>\n\n<pre><code>SERV_PID=$(ssh root@myserver 'python /root/python/run_dev_server.py &amp; echo $!')\n</code></pre>\n\n<p>i get stuck after \"Restarting the server\" and never get the PID or the file that will contain it or even the end of the script.</p>\n\n<p>But if i run this right in the console:</p>\n\n<pre><code>ssh root@myserver 'python /root/python/run_dev_server.py &amp; echo $!'\n</code></pre>\n\n<p>i get a PID printed to the terminal.</p>\n\n<p>Any advice on this would be really appreciated.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13202074,"title":"How to secure read? with bash \"read\" command","body":"<p>You know there is a command called read,</p>\n\n<p>What if I want to do this in my scripts,</p>\n\n<pre><code>read PASSWROD\n</code></pre>\n\n<p>when it prompts me to input, all my input is visible.\nIs there an alternative command that can make the input invisible.</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","shell"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":2865,"score":3,"question_id":8880603,"title":"Loop through array of strings in bash script?","body":"<p>I want to write a script that loops through 15 strings (array possibly?) is that possible?</p>\n\n<p>something like:</p>\n\n<pre><code>for databaseName in listOfNames\nthen\n# do something\nend \n</code></pre>\n\n<p>Thanks  </p>\n"},{"tags":["bash","file","scripting","sed","awk"],"answer_count":8,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":4832,"score":4,"question_id":4078933,"title":"find difference between two text files with one item per line","body":"<p>I have two files:</p>\n\n<p>file 1</p>\n\n<pre><code>dsf\nsdfsd\ndsfsdf\n</code></pre>\n\n<p>file 2</p>\n\n<pre><code>ljljlj \nlkklk \ndsf\nsdfsd\ndsfsdf\n</code></pre>\n\n<p>I want to display what is in file 2 but not in file 1, so file 3 should look like</p>\n\n<pre><code>ljljlj \nlkklk \n</code></pre>\n"},{"tags":["mysql","linux","bash","backup","mysqldump"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13201330,"title":"MySQL Backup Script in Bash","body":"<p>REF <a href=\"http://www.rsnapshot.org/howto/1.2/rsnapshot-HOWTO.en.html\" rel=\"nofollow\">http://www.rsnapshot.org/howto/1.2/rsnapshot-HOWTO.en.html</a>\n4.3.9. backup_script</p>\n\n<p>I need to backup ALL the mysql databases by dynamically should new ones be created. Is there an ideal way to do this in bash with minimal code?</p>\n\n<p>Would I need to log in to mysql and get all the databases?</p>\n"},{"tags":["bash","shell","unix","sed"],"answer_count":5,"favorite_count":4,"up_vote_count":14,"down_vote_count":0,"view_count":9485,"score":14,"question_id":5171901,"title":"Sed command find and replace in file and overwrite file doesnt work, it empties the file","body":"<p>I would like to run a find and replace on a html file through the command line.</p>\n\n<p>my command looks something like this:</p>\n\n<pre><code>sed -e s/STRING_TO_REPLACE/STRING_TO_REPLACE_IT/g index.html &gt; index.html\n</code></pre>\n\n<p>When I run this and look at the file afterward, it is empty. (it deleted the contents of my file)</p>\n\n<p>when i run this after restoring the file again:</p>\n\n<pre><code>sed -e s/STRING_TO_REPLACE/STRING_TO_REPLACE_IT/g index.html\n</code></pre>\n\n<p>the stdout is the contents of the file, and the find and replace has been executed.</p>\n\n<p>Why is this happening?</p>\n"},{"tags":["bash","variables","while-loop"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13122441,"title":"BASH: While read line < $variable","body":"<p>How can I read from variable with while read line? this can save me disk writes. </p>\n\n<p>for example:</p>\n\n<pre><code>the_list=$(..code..)\n\nwhile read line\ndo\n        echo $line\n\ndone &lt; $the_list\n</code></pre>\n\n<p>using the code above gives me error:</p>\n\n<pre><code>./copy.sh: line 25: $the_list: ambiguous redirect\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":13198917,"title":"active .bashrc setting in bash files","body":"<p>Instead of using default python, in .bashrc I change \"python\" point to my own python version. However, when I write a bash scripts and call for python in it, it still uses the default python. Why is that, and how can I set it so that I do not have to add \"source ~/.bashrc\" to every sh file? Thanks</p>\n\n<pre><code>[yl@chh test]$ more test.sh \necho `which python`\n[yl@chh test]$ sh test.sh \n/usr/bin/python\n[yl0@chh test]$ which python\nalias python='~/tools/Python-2.7.3/python'\n~/tools/Python-2.7.3/python\n</code></pre>\n"},{"tags":["osx","bash","for-loop","spaces"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13198215,"title":"bash for loop using variables with spaces","body":"<p>I am on Mac OS 10.7.x and needing to interrogate network services to report on which interfaces are defined against a service and which dns servers are set against each.</p>\n\n<pre><code>servicesAre=`networksetup -listallnetworkservices | tail -n +2 | sed 's/.*/\"&amp;\"/'` ; \nfor interface in $servicesAre ; do \n      printf \" \\nFor $interface we have:\\n \\n\" ; \n      networksetup -getdnsservers $interface ; \ndone\n</code></pre>\n\n<p>My problem is the spaces in the initial variable list of interfaces:</p>\n\n<pre><code>\"USB Ethernet\"  \n\"Display Ethernet\"  \n\"Wi-Fi\"  \n\"Bluetooth PAN\"\n</code></pre>\n\n<p>How do I pass those through?</p>\n"},{"tags":["c","performance","bash","shell"],"answer_count":3,"favorite_count":1,"up_vote_count":7,"down_vote_count":1,"view_count":164,"score":6,"question_id":13088807,"title":"Shell script vs C performance","body":"<p>I was wondering how bad would be the impact in the performance of a program migrated to shell script from C. </p>\n\n<p>I have intensive I/O operations.</p>\n\n<p>For example, in C, I have a loop reading from a filesystem file and writing into another one. I'm taking parts of each line without any consistent relation. I'm doing this using pointers. A really simple program.</p>\n\n<p>In the Shell script, to move through a line, I'm using <code>${var:(char):(num_bytes)}</code>. After I finish processing each line I just concatenate it to another file.</p>\n\n<pre><code>\"$out\" &gt;&gt; \"$filename\"\n</code></pre>\n\n<p>The program does something like:</p>\n\n<pre><code>while read line; do\n    out=\"$out${line:10:16}.${line:45:2}\"\n    out=\"$out${line:106:61}\"\n    out=\"$out${line:189:3}\"\n    out=\"$out${line:215:15}\"\n    ...\n    echo \"$out\" &gt;&gt; \"outFileName\"\n\ndone &lt; \"$fileName\"\n</code></pre>\n\n<p>The problem is, C takes like half a minute to process a 400MB file and the shell script takes 15 minutes.</p>\n\n<p>I don't know if I'm doing something wrong or not using the right operator in the shell script.</p>\n\n<p>Edit: I cannot  use awk since there is not a pattern to process the line</p>\n\n<p>I tried commenting the \"echo $out\" >> \"$outFileName\" but it doesn't gets much better. I think the problem is the ${line:106:61} operation. Any suggestions? </p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["bash","testing","tdd","automated-tests","extreme-programming"],"answer_count":5,"favorite_count":2,"up_vote_count":11,"down_vote_count":0,"view_count":4260,"score":11,"question_id":1339416,"title":"Testing bash scripts","body":"<p>We have a system that has some bash scripts running besides Java code. Since we are trying to \"Test Everything That Could Possibly Break\" and those bash scripts may break, we want to test them. The problem is it is hard to test the scripts.</p>\n\n<p>Is there a way or a best practice to test bash scripts?\n Or should we quit using bash scripts and look for alternative solutions that are testable?</p>\n"},{"tags":["linux","bash","grep"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13198662,"title":"grep initial space","body":"<p><code>man bash | grep \"\\-d\"</code></p>\n\n<p>lots of results</p>\n\n<p><code>man bash | grep \" \\-d\"</code></p>\n\n<p>no results</p>\n\n<p>What's going on here?</p>\n"},{"tags":["bash","shell","text"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13197192,"title":"Replace specific rows with values from another text file in shell scripting?","body":"<p>I have a file that is 8 rows of single asterixes. I have 4 text files, with two rows of numbers in each. I want to create a new file for each of the text files, where row number i+2 and i+3 is replaced by the content of the text file. For example:</p>\n\n<p>File1 would be:  </p>\n\n<pre><code>1 5 7 8  \n2 4 5 6  \n</code></pre>\n\n<p>I want to convert it to:  </p>\n\n<pre><code>1 5 7 8  \n2 4 5 6  \n*  \n*  \n*  \n*  \n*  \n*  \n</code></pre>\n\n<p>And File2 would converted from:  </p>\n\n<pre><code>6 5 6 7  \n8 9 0 9  \n</code></pre>\n\n<p>to:  </p>\n\n<pre><code>*  \n*  \n6 5 6 7  \n8 9 0 9  \n*  \n*  \n*  \n*  \n</code></pre>\n\n<p>Is there a way to iterate through text files in a directory, converting each text file like above?</p>\n\n<p>Thanks!</p>\n\n<p>UPDATE: Maybe this will explain it better:</p>\n\n<p>Basically I have n-number of text files, each having only two rows of numbers. I want to cycle through the text files, converting each text file into another text file where there is n x 2 number of rows, with the first text file's values taking up row 1 &amp; 2 and the rest of the rows are *. The second text file would have n x 2 rows, but the 3rd and 4th row are the files values, with the rest being *. The third file having n x 2 rows, with the 6 &amp; 7th row being populated with its values and rest being *, and so on. </p>\n"},{"tags":["bash","shell","unix"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13197207,"title":"Using Functions inside here document","body":"<p>I have a script which has a few functions inside it which the main body uses to execute. Now, I want to run this script on 3 remote unix machines. Which is the neatest way to do this ?\nMost importantly, I don't to write a second script for remote connection. Everything should be inside this one script.</p>\n\n<p>I've tried heredoc with ssh, which is not working because of the big functions !</p>\n\n<p><strong>Code -</strong> </p>\n\n<pre><code>#!/bin/bash\n\n# Year Month Day Related functions\n# FUNCTIONS\n# Find no. of days in a year\nyeardays()\n{\n# argument check\nif [ X$1 = X ]\nthen\n        read year\nelse\n        year=$1\nfi\n# Check for leap years\nif [ `expr $year % 400` = 0 ]\nthen\n        echo 366\n        exit\nfi\n\nif [ `expr $year % 100` = 0 ]\nthen\n        echo 365\n        exit\nfi\n\nif [ `expr $year % 4` = 0 ]\nthen\n        echo 366\n        exit\nfi\n\necho 365\n}\n\n# Find no. of days in a Month\nmonthdays()\n{\n# argument check\nif  [ X$1 = X ]\nthen\n     read ymd   # year in yyyymmdd format\nelif [ X$2 = X ]\nthen\n      ymd=$1\nelse\n      ymd=`expr \\( $1 \\* 10000 \\) + \\( $2 \\* 100 \\) + 1`\nfi\n\nyear=`expr $ymd / 10000` ;\nmonth=`expr \\( $ymd % 10000 \\) / 100` ;\n\ncase $month in\n      1|3|5|7|8|10|12) echo 31 ; exit ;;\n      4|6|9|11) echo 30 ; exit ;;\n      *) ;;\nesac\n\n# except for month 2, which depends on whether the year is a leap year\n# Use yeardays to get the number of days in the year and return a value\n# accordingly.\ndaysInYear=`yeardays $year`\n\ncase $daysInYear in\n   365) echo 28 ; exit ;;\n   366) echo 29 ; exit ;;\nesac\n}\n\nymd2yd()    # convert from YYYYMMDD(gregorian) to YYYYDDD(julian)\n{\n# argument check\nif [ X$1 = X ]\nthen\n        read date\nelse\n        date=$1\nfi\n\nyear=`expr $date / 10000`\nmonth=`expr \\( $date % 10000 \\) / 100`\ndays=`expr $date % 100`\n\ncount=1\nwhile [ `expr $count \\&lt; $month` = 1 ]\ndo\n        daysInMonth=`monthdays $year $count`\n        days=`expr $days + $daysInMonth`\n        count=`expr $count + 1`\ndone\n\njulian=`expr \\( $year \\* 1000 \\) + $days`\necho $julian\n}\n\nyd2ymd()    # convert from YYYYDDD(julian) to YYYYMMDD(gregorian)\n{\n# argument check\nif [ X$1 = X ]\nthen\n        read date\nelse\n        date=$1\nfi\n\nyear=`expr $date / 1000`\ndays=`expr $date % 1000`\n\nmonth=1\nwhile [ `expr $days \\&gt; 0` = 1 ]\ndo\n        daysInMonth=`monthdays $year $month`\n        days=`expr $days - $daysInMonth`\n        month=`expr $month + 1`\ndone\n\ndays=`expr $days \\+ $daysInMonth`\nmonth=`expr $month \\- 1`\n\ngregorian=`expr \\( $year \\* 10000 \\) + \\( $month \\* 100 \\) + $days`\necho $gregorian\n}\n\nydadd()     # Add/Subtract days to YYYYDDD format\n{\n# argument check\nif [ X$2 = X ]\nthen\n        difference=$1\n        read yd     # Read the YYYYDDD format date\nelse\n        yd=$1\n        difference=$2\nfi\n\ndays=`expr $yd % 1000`\nyear=`expr $yd / 1000`\n\ndays=`expr $days + $difference`\ndaysInYear=`yeardays $year`\n\nwhile [ `expr $days \\&gt; $daysInYear` = 1 ]\ndo\n        days=`expr $days - $daysInYear`\n        year=`expr $year + 1`\n        daysInYear=`yeardays $year`\ndone\n\nwhile [ `expr $days \\&lt; 1` = 1 ]\ndo\n        year=`expr $year - 1`\n        daysInYear=`yeardays $year`\n        days=`expr $days + $daysInYear`\ndone\n\nyd=`expr \\( $year \\* 1000 \\) + $days`       # Final date in YYYYDDD format\necho $yd\n}\n\nymdadd()    # Add/Subtract days to YYYYMMDD format\n{\nif [ X$2 = X ]\nthen\n        difference=$1\n        read ymd    # Read YYYYMMDD format date\nelse\n        ymd=$1\n        difference=$2\nfi\n\necho $ymd | ymd2yd | ydadd $difference | yd2ymd # Convert YYYYMMDD to YYYYDDD, perform date arithmetic, then revert to YYYYMMDD format\n}\n\ndaysLeft()  # Calculate days between two dates in YYYYMMDD format\n{\n# argument check\nif [ X$1 = X ]\nthen\n        read ymd1   # First date in YYYYMMDD format\n        read ymd2   # Second date in YYYYMMDD format\nelif [ X$2 = X ]\nthen\n        ymd1=$1\n        read ymd2\nelse\n        ymd1=$1\n        ymd2=$2\nfi\n\nyear1=`expr $ymd1 / 10000`\nmonth1=`expr \\( $ymd1 % 10000 \\) / 100`\nday1=`expr $ymd1 % 100`\n\nyear2=`expr $ymd2 / 10000`\nmonth2=`expr \\( $ymd2 % 10000 \\) / 100`\nday2=`expr $ymd2 % 100`\n\ndaysm1=`monthdays $year1 $month1`\ndays=`expr $daysm1 - $day1`\nmonth1=`expr $month1 + 1`\n\nwhile [ `expr $month1 \\&lt;= 12` = 1 ]\ndo\n        daysm1=`monthdays $year1 $month1`\n        days=`expr $days + $daysm1`\n        month1=`expr $month1 + 1`\ndone\n\nx=1\nwhile [ `expr $x \\&lt; $month2` = 1 ]\ndo\n        daysm2=`monthdays $year2 $x`\n        days=`expr $days + $daysm2`\n        x=`expr $x + 1`\ndone\n\ndays=`expr $days + $day2`\necho $days\n}\n\n# MAIN BODY\n# Connect to different Servers\ndeclare -a SERVER=('server1' 'server2' 'server3')\nremoteUser=abc\nserverNumbers=${#SERVER[@]}\ncount=0\nwhile [ `expr $count \\&lt; $serverNumbers` = 1 ]\ndo\n    # Connect to  server\n    ssh -T -q $remoteUser@${SERVER[count]} &lt;&lt;-\"END_TEXT\"\n    VALUE=`cat /home/cognos/cognos/c8/configuration/cogstartup.xml | grep -i xsd:long | head -1 | cut -d\"&gt;\" -f2 | sed 's/[:/&lt;|crn:value]*//g'`\n    VALUE_BACKUP=$VALUE\n    let 'VALUE -= 30'       \n    let 'VALUE *= 86400'\n    RESULT1=`perl -e '@stats = stat(\"/home/cognos/cognos/c8/configuration/signkeypair\"); print ((time - $stats[9]) &lt; \"$VALUE\");'`\n    RESULT2=`perl -e '@stats = stat(\"/home/cognos/cognos/c8/configuration/encryptkeypair\"); print ((time - $stats[9]) &lt; \"$VALUE\");'`\n    RESULT3=`perl -e '@stats = stat(\"/home/cognos/cognos/c8/configuration/caSerial\"); print ((time - $stats[9]) &lt; \"$VALUE\");'`\n    while [ \"$RESULT1\" -o \"$RESULT2\" -o \"$RESULT3\" ]\n    do\n            echo \"Sending mail.\"\n            # Calculate days left\n            CURRENT_DATE=`date +\"%Y-%m-%d\" | sed 's/-//g'`\n            CREATION_DATE=`ls -logE /home/cognos/cognos/c8/configuration/ | grep -i signkeypair | awk '{print $4}' | sed 's/-//g'`\n            EXPIRY_DATE=`ymdadd $CREATION_DATE $VALUE_BACKUP`\n            DAYS_LEFT=`daysLeft $CURRENT_DATE $EXPIRY_DATE`\n            # Identify environment from hostname - DEV/UAT/PRD\n            LOCALHOST=`hostname`\n            ENVIRONMENT_TYPE=`echo $LOCALHOST | perl -ne '~m/.*([a-zA-Z]{3})[0-9]*$/; print $1;'|tr '[a-z]' '[A-Z]'`\n            # Identify process - FormPF/GoReporting\n            if (echo $LOCALHOST | grep -i cfp &gt;/dev/null) then\n                   PROCESS=\"FormPF\"\n            else\n                   PROCESS=\"GoReporting\"\n            fi\n            # Add details to mail body\n            echo \"The key was created on `ls -log /home/cognos/cognos/c8/configuration/ | grep -i signkeypair | awk '{print $4,$5,$6}'`, and was set to expire after $VALUE_BACKUP days.\" &gt; mail.txt\n            echo \"Key expires in $DAYS_LEFT days !!\" &gt;&gt; mail.txt\n            echo \" \" &gt;&gt; mail.txt\n            echo \"The server is-\" &gt;&gt; mail.txt\n            hostname &gt;&gt; mail.txt\n            echo \" \" &gt;&gt; mail.txt\n            echo \"Status of folders/files-\" &gt;&gt; mail.txt\n            echo \" \" &gt;&gt; mail.txt\n            ls -log /home/cognos/cognos/c8/configuration/ | grep -i signkeypair | awk '{print $4,$5,$6,$7}' &gt;&gt; mail.txt\n            ls -log /home/cognos/cognos/c8/configuration/ | grep -i encryptkeypair | awk '{print $4,$5,$6,$7}' &gt;&gt; mail.txt\n            ls -log /home/cognos/cognos/c8/configuration/ | grep -i caSerial | awk '{print $4,$5,$6,$7}' &gt;&gt; mail.txt\n        echo \" \" &gt;&gt; mail.txt\n        echo \"To reactive key, please restart the server at weekend with below options:\" &gt;&gt; mail.txt\n        echo \" \" &gt;&gt; mail.txt\n        echo \"/home/cognos/etc/restartAllServers.sh -cdsk\" &gt;&gt; mail.txt\n            # Send warning mail !!\n            SUBJECT=\"!! ($ENVIRONMENT_TYPE) $PROCESS ($LOCALHOST) Cognos CSK(Common Symmetric Key) Expiry !!\"\n            EMAIL=\"xyz@abc.com\"\n            cat mail.txt | mailx -s \"$SUBJECT\" \"$EMAIL\"\n        rm mail.txt\n            break\n    done\n    logout\n    END_TEXT\n    count=`expr $count + 1`\ndone\nexit 0\n</code></pre>\n"},{"tags":["bash","ftp","download","unzip"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13197940,"title":"Cant do anything after ftp transfer","body":"<p>I wrote script for downloading zip files from ftp, and than unziping each different extension to own folder.\n<strong>download.sh</strong></p>\n\n<pre><code>#!/bin/bash\nftp -in sitehere.com &lt;&lt; EOF\nuser username pass\nbinary\nhash\nlcd ./temp\nmget *.zip\nbye\nunzip -n './temp/*.zip' -d ../../base/images/ *.TIF\nunzip -n './temp/*.zip' -d ../../base/dbfs/ *.dbf\n</code></pre>\n\n<p>But after downloading i have in terminal i have 2 errors \"Unknown format\".\nTell me please what I doing wrong?\nThanks.</p>\n"},{"tags":["linux","bash"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13197475,"title":"Cannot log in to Linux on getty","body":"<p>I was trying to install ncurses on a virtualized Debian server and somehow was unsuccessful. After logging out of the console, I realized that I could not log in anymore. I cannot use tools such as scp, WinSCP or SSH client to get into the server. When I try to log in on the getty console, I get the below message and find myself at the login prompt again. In short, I'm locked out of the [virtual] server. This is a production server and therefore rebooting it would be a last resort. Kindly help.</p>\n\n<pre><code>login as: saichovsky\nsaichovsky@172.16.13.7's password:\nLinux myhost 2.6.32-5-amd64 #1 SMP Wed Jan 11 14:00:43 UTC 2012 x86_64\n\nThe programs included with the Debian GNU/Linux system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nLast login: Fri Nov  2 17:39:03 2012 from 192.168.3.166\n-bash: error while loading shared libraries: libncurses.so.5: cannot open shared object file: No such file or directory\n</code></pre>\n"},{"tags":["bash","command-line","io"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13196993,"title":"Adding header into multiple text files","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/11563620/sed-awk-to-search-and-replace-insert-text-in-files\">Sed/Awk to search and replace/insert text in files</a>  </p>\n</blockquote>\n\n\n\n<p>I would like to know how to add one \"header\" line into multiple text files contained in one directory. Bash command line would be great!</p>\n\n<p>Thx.</p>\n\n<p><em><strong>EDIT</em></strong></p>\n\n<p>I found my needs in here: <a href=\"http://perldoc.perl.org/index-faq.html\" rel=\"nofollow\">http://perldoc.perl.org/index-faq.html</a> enjoy!\nHere is my answer:</p>\n\n<pre><code>perl -pi -e 'print \"**MyHeaderText**\\n\" if $. == 1' *\n</code></pre>\n"},{"tags":["bash","function","readonly"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13197204,"title":"how to make a function readonly","body":"<p>Having a sample function</p>\n\n<pre><code>function functionName ()\n{\n    echo \"Hello World\"\n}\n</code></pre>\n\n<p>How can I avoid it to be overwritten by a following function with the same name?</p>\n\n<pre><code>function functionName ()\n{\n    echo \"this is another function\"\n}\n</code></pre>\n"},{"tags":["bash","shell","cygwin","set","gnu"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13195655,"title":"Bash set +x without it being printed","body":"<p>Does anyone know if we can say <code>set +x</code> in bash without it being printed:</p>\n\n<pre><code>set -x\ncommand\nset +x\n</code></pre>\n\n<p>traces</p>\n\n<pre><code>+ command\n+ set +x\n</code></pre>\n\n<p>but it should just print</p>\n\n<pre><code>+ command\n</code></pre>\n\n<p>Bash is Version 4.1.10(4). This is bugging me for some time now - output is cluttered with useless <code>set +x</code> lines, making the trace facility not as useful as it could be.</p>\n"},{"tags":["arrays","bash","string-split"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":3079,"score":4,"question_id":10586153,"title":"bash split string into array","body":"<p>In a bash script I would like to split a line into pieces and put them into an array.</p>\n\n<p>The line:</p>\n\n<pre><code>Paris, France, Europe\n</code></pre>\n\n<p>I would like to have them in an array like this:</p>\n\n<pre><code>array[0] = Paris\narray[1] = France\narray[2] = Europe\n</code></pre>\n\n<p>I would like to use a simple code, the command's speed doesn't matter. Any ideas?</p>\n"},{"tags":["bash","bioinformatics","scientific-notation","blast"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13192108,"title":"Reading numbers in scientific notation using bash","body":"<p>As part of an annotation pipeline for <em>De Novo</em> fish genomes I need to compare e-values from BLAST to see whether they are lower than a certain threshold.</p>\n\n<p>To get the semantics right I first evaluated one of the othet columns in the blast-output, and it works fine like this:</p>\n\n<pre><code>for f in FOLDER/*; do \nmyVar=$(head -1 $f | awk '{print $4}') ;\nif [[ $myVar -gt 50 ]]; then echo ..... ;done\n</code></pre>\n\n<p>$4 is then a column in the BLAST output with whole numerical values (hit length or something)</p>\n\n<p>However, when I try to change the script to working with the e-values, there is some problems with interpretation of the scientific notation etc...</p>\n\n<p>What I WOULD like is this:</p>\n\n<pre><code>for f in FOLDER/*; do \nmyVar=$(head -1 $f | awk '{print $11}') ;\nif [[ $myVar -gt 1.0e-10 ]]; then echo ..... ;done\n</code></pre>\n\n<p>where $11 points to the e-value for each hit.</p>\n\n<p>Could this be done in a not to cumbersome manner in bash? </p>\n\n<p>All help is deeply appreciated :)</p>\n\n<p>Cheers, \nMartin</p>\n"},{"tags":["linux","bash","unix","scripting"],"answer_count":4,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":2582,"score":5,"question_id":3435312,"title":"How can I execute a series of commands in a bash subshell as another user using sudo?","body":"<p>I'm writing a bash script that needs to sudo multiple commands. I can do this:</p>\n\n<pre><code>( whoami ; whoami )\n</code></pre>\n\n<p>but I can't do this:</p>\n\n<pre><code>sudo ( whoami ; whoami )\n</code></pre>\n\n<p>How do I solve this?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13184385,"title":"Kill sibling process","body":"<p>I would like to have a script which would :</p>\n\n<ul>\n<li>trigger a <code>make 2&amp;&gt;1 | less -R</code></li>\n<li>listen for every change in the folder (using <code>inotifywait -R</code>)</li>\n</ul>\n\n<p>When the folder is modified, the script would have to kill the <code>less</code> process and restart.</p>\n\n<p>I'm not sure about the right way to do this (allow to the two branches of the script to run in parallel + allow the watching job to know the pid of the <code>less</code> job, since the latter have to be in foreground).</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":5,"up_vote_count":20,"down_vote_count":0,"view_count":24689,"score":20,"question_id":4749330,"title":"Test if string exists in file with BASH shell","body":"<p>I have a file that contains directory names :</p>\n\n<p>my_list.txt :</p>\n\n<p>/tmp</p>\n\n<p>/var/tmp</p>\n\n<p>I'd like to check in BASH before I'll add directory name if the name already exists in file</p>\n\n<p>Thanks in advance   </p>\n"},{"tags":["bash","newline"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":603,"score":2,"question_id":8467424,"title":"Echo new line in bash","body":"<p>Tried this:</p>\n\n<pre><code>echo -e \"hello\\nworld\"\n</code></pre>\n\n<p>But it doesn't work. How can I make it work?</p>\n\n<p>P.S.: I'm using Ubuntu 11.04.</p>\n"},{"tags":["bash","awk"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":75,"score":2,"question_id":13175683,"title":"awk parse filename and add result to the end of each line","body":"<p>I have number of files which have similar names like</p>\n\n<pre><code>DWH_Export_AUSTA_20120701_20120731_v1_1.csv.397.dat.2012-10-02 04-01-46.out\nDWH_Export_AUSTA_20120701_20120731_v1_2.csv.397.dat.2012-10-02 04-03-12.out\nDWH_Export_AUSTA_20120801_20120831_v1_1.csv.397.dat.2012-10-02 04-04-16.out\n</code></pre>\n\n<p>etc.</p>\n\n<p>I need to get number before .csv(1 or 2) from the file name and put it into end of every line in file with TAB separator.</p>\n\n<p>I have written this code, it finds number that I need, but i do not know how to put this number into file. There is space in the filename, my script breaks because of it.</p>\n\n<p>Also I am not sure, how to send to script list of files. Now I am working only with one file.</p>\n\n<p>My code:</p>\n\n<pre><code>#!/bin/sh\nstring=\"DWH_Export_AUSTA_20120701_20120731_v1_1.csv.397.dat.2012-10-02 04-01-46.out\" \nout=$(echo $string | awk 'BEGIN {FS=\"_\"};{print substr ($7,0,1)}')\nawk ' { print $0\"\\t$out\" } ' $string\n</code></pre>\n"},{"tags":["bash","sed","awk","xargs"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":70,"score":2,"question_id":13167794,"title":"Using backticks or $() with xargs and sed or awk","body":"<p>Assuming I want to change some filenames that end with <code>jpg.jpg</code> to end only with <code>.jpg</code> (in bash), and I want to do it by piping the output of <code>find</code> to <code>xargs</code>:</p>\n\n<p>By using <code>sed</code>:</p>\n\n<pre><code>find . -iname '*jpg.jpg' | xargs -I % mv -iv % $(echo % | sed 's/jpg.jpg/.jpg/g')\n</code></pre>\n\n<p>However, this does not replace <code>jpg.jpg</code> with <code>.jpg</code> in the destination file of <code>mv</code>.</p>\n\n<p>By using <code>awk</code>:</p>\n\n<pre><code>find . -iname '*jpg.jpg' | xargs -I % mv -iv % $(echo % | awk '{gsub(/jpg.jpg/,\".jpg\")}; 1')\n</code></pre>\n\n<p>This neither does any replacement. Have I missed something?</p>\n"},{"tags":["osx","bash","terminal",".bash-profile"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":13,"score":3,"question_id":13192526,"title":"How to reset Bash on Mac OSX, .bash_profile corrupted and bash no longer works","body":"<p>I am on a MacBook Pro, running the latest version of Mountain Lion.</p>\n\n<p>I really need some help, I have managed some how to damage my .bash_profile (I think) so that every time I open up the terminal I get the error listed below.</p>\n\n<pre><code>-bash: export: `/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/go/bin': not a valid identifier\n-bash: export: `/Users/rob/Applications/sbt/bin:': not a valid identifier\nenv: bash: No such file or directory\nenv: bash: No such file or directory\nenv: bash: No such file or directory\nenv: bash: No such file or directory\nenv: bash: No such file or directory\n-bash: tar: command not found\n-bash: grep: command not found\n-bash: cat: command not found\n-bash: find: command not found\n</code></pre>\n\n<p>I am not sure what has happened, I have no sudo, cd or any normal commands. The only way I have been able to get to any of the main directories is through the go to folder command in finder and try to find the file to no avail. </p>\n\n<p>To top it all off I think I created a file that might be causing the issue, I wanted to edit the .bash_profile so I typed</p>\n\n<pre><code>sudo nano ./bash_profile\n</code></pre>\n\n<p>This open a new file in nano which I think was then saved. After this I opened the real .bash_profile to add in the path for node.js.</p>\n\n<p>If I can get to the .bash_profile I think I can get it back on track but I can't find it, should I reinstall bash? If so how would I do that on a mac, I tried using </p>\n\n<pre><code>brew install bash\n</code></pre>\n\n<p>to which I get </p>\n\n<pre><code>-bash: brew: command not found\n</code></pre>\n\n<p>I am really stuck if anyone can help I would be really appreciated.</p>\n\n<p>Many thanks</p>\n"},{"tags":["linux","bash","ubuntu","command-line","chmod"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13119219,"title":"How to make all files under a directory world readable on linux?","body":"<p>I want to make all files (and directories) under a certain directory world readable without having to chmod each file on its own. it would be great if there is an option to also do this recursively (look under folders and chmod 666 all files under it)</p>\n"},{"tags":["bash","shell","ubuntu"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13191564,"title":"Ubuntu shell script getting error","body":"<p>I am developing simple shell script which copy all my present directory files to <strong>backup</strong> directory which will be exist in present working directory. now i'm getting error when i pass more then one condition in <strong>if</strong>.</p>\n\n<pre><code>#!/bin/bash\nfilename=nx.pdf\nfor i in *;\n do\n echo $i;\n if [ $i == backup || $i == $filename ] ; then\n    echo \"Found backup.\"\n else\n echo \"Part 2\"\n cp -rf $i backup\n fi\n done\n</code></pre>\n\n<p>I am getting error</p>\n\n<pre><code>asd.sh: line 6: [: missing `]'\nasd.sh: line 6: ==: command not found\nPart 2\ndeployee.sh\nasd.sh: line 6: [: missing `]'\nasd.sh: line 6: ==: command not found\nPart 2\n</code></pre>\n"},{"tags":["linux","bash","scripting","module"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":3977,"score":0,"question_id":1127383,"title":"How to issue \"module load\" in a shell or Perl script (i.e., non-interactively)","body":"<p>I can use the \"module load xyz\" command interactively, but when run from a script, it says it can't find the \"module\" command.  Is there any way of loading modules in a script?</p>\n"},{"tags":["bash","unix","cli"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13189862,"title":"Should I use cat instead of dd here?","body":"<p>The article <a href=\"http://unixfoo.blogspot.co.uk/2008/06/encrypting-tar-file-using-openssl.html\" rel=\"nofollow\">Encrypting a tar file using openssl</a> has the following line:</p>\n\n<pre><code>tar cvj ~/Projects/arc/ | openssl smime -encrypt -aes256 -binary -outform DEM public.pem | dd of=arc.bckp\n</code></pre>\n\n<p>we can use cat instead of dd at the end... but should we? which one is better to be used here - cat or dd? and why?</p>\n\n<p>I've 'time'-ed both options and can't see any significant advantage...</p>\n\n<p>Thanks!</p>\n"},{"tags":["bash","shell","unix","copy","symlink"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13190365,"title":"Unix Copy (cp) without Symbolic Links","body":"<p>I want to copy my files but convert the symbolic links to hard links (ie. the actual file). How can I do this?</p>\n\n<p>Here's my code (that isn't working):</p>\n\n<pre><code>cp -RL ${FROM_DIR} ${TO_DIR}\n</code></pre>\n\n<p>Note: this is for Xcode purposes - symlinks are not allowed in a build.</p>\n\n<p>Thanks!</p>\n\n<p>EDIT:</p>\n\n<p>The issue is the way I remove the files first - it isn't removing existing symlinks.</p>\n\n<pre><code>rm -RLf \"${FROM_DIR}/*\"\n</code></pre>\n"},{"tags":["bash","shell","filter","highlighting","egrep"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13157947,"title":"Speed up bash filter function to run commands consecutively instead of per line","body":"<p>I have written the following filter as a function in my ~/.bash_profile:</p>\n\n<pre><code>hilite() {\n export REGEX_SED=$(echo $1 | sed \"s/[|()]/\\\\\\&amp;/g\")\n while read line\n do\n  echo $line | egrep \"$1\" | sed \"s/$REGEX_SED/\\x1b[7m&amp;\\x1b[0m/g\"\n done\n exit 0\n}\n</code></pre>\n\n<p>to find lines of anything piped into it matching a regular expression, and highlight matches using ANSI escape codes on a VT100-compatible terminal.</p>\n\n<p>For example, the following finds and highlights the strings <em>bin</em>, <em>U</em> or <em>1</em> which are whole words in the last 10 lines of /etc/passwd:</p>\n\n<pre><code>tail /etc/passwd | hilite \"\\b(bin|[U1])\\b\"\n</code></pre>\n\n<p>However, the script runs very slowly as each line forks an echo, egrep and sed.</p>\n\n<p>In this case, it would be more efficient to do egrep on the entire input, and then run sed on its output.</p>\n\n<p>How can I modify my function to do this? I would prefer to not create any temporary files if possible.</p>\n\n<p>P.S. Is there another way to find and highlight lines in a similar way?</p>\n"},{"tags":["bash","shell","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":13187191,"title":"Printing only the matched pattern between <start> and <end> in sed","body":"<p>Input -</p>\n\n<pre><code>ajflkajlkaj\nddddddddddd/need/to/print/thiskkkkkkkkkkkk\nahfkjahkfja\n</code></pre>\n\n<p>Output needed</p>\n\n<pre><code>/need/to/print/this\n</code></pre>\n\n<p>Googling and tweaking I was able to extract \"this\" like by doing this-</p>\n\n<pre><code>sed -n 's/^.*\\(this\\).*$/\\1/p' myfile\n</code></pre>\n\n<p>but can't seem to get the syntax right for getting the rest of the pattern starting from from \"/need\".</p>\n\n<p>I would appreciate any pointers/suggestions.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["bash","shell"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":38,"score":3,"question_id":13188391,"title":"bash terminate on first fail","body":"<p>Is there a way to make my bash script terminates on the first command that returns non-zero status?</p>\n\n<p>I know I can just chain it with <code>&amp;&amp;</code>'s like:</p>\n\n<pre><code>cd /stuff &amp;&amp;\necho 'what's up' &amp;&amp;\n....\n</code></pre>\n\n<p>Is there another way?</p>\n"},{"tags":["bash","shell","unix"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13188323,"title":"How does a exec'ed shell know your cwd?","body":"<p>If you <code>cd</code> to some directory other than <code>$HOME</code> and run <code>exec bash</code>, the new bash starts in the working directory of the previous shell.</p>\n\n<p>How does the new bash know what the previous working directory was?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13188041,"title":"How to pass variables in a loop in bash","body":"<p>I found a script on the Internet(https://calomel.org/youtube_wget.html) that wgets youtube videos. </p>\n\n<p>So the script works perfectly for a single clip by simple typing <code>./yt.pl youtubeLink</code> .\nBut I want to scale this up and use it from links in a text document (download.txt)\n. So I created a loop in bash. The loop looks like this.</p>\n\n<p>`</p>\n\n<pre><code>    #!/bin/bash\nwordCount=$(cat download.txt | wc -l)\n\nfor (( number=$wordCount; $number-lt$wordCount;number--))\ndo\n        link=$(sed -n $number\"p\" download.txt)\n        \"./yt.pl \"$link\n        sleep 3\ndone\n</code></pre>\n\n<p>The only problem with this it doesn't work. It gives me the following error message.</p>\n\n<pre><code>/auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=KYzUd95h8X4: No such file or directory\n</code></pre>\n\n<p>if I just run this part of the error message <code>./yt.pl http://www.youtube.com/watch?v=KYzUd95h8X4</code> it works fine.</p>\n\n<p>Here is the complete output of the ssh window</p>\n\n<pre><code>./auto.sh: line 7: ./yt.pl : No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=XEAL23g2V6g: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=KYzUd95h8X4: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=IaADyDhg-CY: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=JmY4RCCCll4: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=D0p5RKzuJLU: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=sY6-PY9wWQ8: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=TRwcozVntTE: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=ft5hp90FV74&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=DB1E4M7bmeM: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=t6w4yeT6OTg&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=t-m88UZXn_8&amp;feature=related: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=iix8NxDN6mQ&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=O3DvUKEZP_0&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=IKVdSNfbilo: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=V3kjn1zM7OI&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=EhJheZepqqY&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=59Oj_xpxh_g&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=DLP8XMMEG0A: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=pCY5ZRXQ3u0&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=a8CHv8n6qpI&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=afJXLpC95lQ&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=6q4dPeUjmu8&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=0BY5V56ZW3w&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=9CO__3nHsg8: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=bzgZlV3LzFA&amp;feature=fvst: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=FgS1UQvYtcU&amp;feature=fvst: No such file or directory\n</code></pre>\n"},{"tags":["regex","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13187495,"title":"regex for grep for screen resolution of the form 1280x720","body":"<p>I am trying to give grep a regex pattern for screen resolution(e.g. <code>1280x720</code>) as following</p>\n\n<pre><code>[0-9]{3,}x[0-9]{3,}\n</code></pre>\n\n<p>but it doesn't seem to be working.</p>\n\n<p>The following works but that doesn't translate to the above one.</p>\n\n<pre><code>[0-9][0-9][0-9][0-9]*x[0-9][0-9][0-9][0-9]*\n</code></pre>\n"},{"tags":["linux","bash","pipe"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":159,"score":3,"question_id":11786543,"title":"linux pipe with multiple programs asking for user input","body":"<p>I wonder how to create a pipe </p>\n\n<pre><code>program 1 | ... | program N\n</code></pre>\n\n<p>where multiple of the programs ask for user input. The problem is that <code>|</code> starts the programs in parallel and thus they start reading from the terminal in parallel.</p>\n\n<p>For such cases it would be useful to have a pipe <code>|</code> that starts program (i+1) only after program i has produced some output.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Example:</p>\n\n<pre><code>cat /dev/sda | bzip2 | gpg -c | ssh user@host 'cat &gt; backup'\n</code></pre>\n\n<p>Here both <code>gpg -c</code> as well as <code>ssh</code> ask for a password.</p>\n\n<p>A workaround for this particular example would be the creation of ssh key pairs, but this is not possible on every system, and I was wondering whether there is a general solution. \nAlso gpg allows for the passphrase to be passed as command line argument, but this is not suggested for security reasons.</p>\n"},{"tags":["linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13187338,"title":"What does the following line in this bash script do?","body":"<p>This line is inside my <code>/etc/rc.sysinit</code> file on linux:    </p>\n\n<pre><code>[ -r /proc/mdstat -a -r /dev/md/md-device-map ] &amp;&amp; /sbin/mdadm -IRs\n</code></pre>\n\n<p>I'm not so much interested in what it actually accomplishes as opposed to how the syntax works.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":35,"score":3,"question_id":13185658,"title":"expect in bash script × 16172","body":"<p>I try to set a expect script in bash.</p>\n\n<pre><code>#!/bin/bash\n\n\n/usr/bin/expect &lt;&lt;- EOD\n\nset router 192.168.0.251\nset user admin\nset pass test  \nset timeout 1000  \nset filesave [exec date +%m-%d-%Y]  \n\n\nspawn telnet $router\nsend \"\\n\"  \nexpect \"Username:\"\nsend \"$user\\n\"\nexpect \"Password:\"  \nsend \"$pass\\n\"  \nexpect \"&gt;\"  \nsend \"en\\n\"  \nexpect \"Password:\"  \nsend \"$pass\\n\"  \n\nsend \"term len 0\\n\"  \nlog_file $router--$filesave.cfg\nsend \"show running-config\\n\"  \nexpect \"end\\r\"  \nsend \"\\n\"  \nlog_file\nsend \"exit\\n\"  \nEOD\n\ncat /Users/test/Desktop/python/$router--$filesave.cfg | grep end\nexit 0\n</code></pre>\n\n<p>I just got this output</p>\n\n<pre><code>./script2 \nspawn telnet\n\ntelnet&gt; telnet&gt; \n</code></pre>\n"},{"tags":["linux","string","bash","shell","sed"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1757,"score":4,"question_id":9733338,"title":"Shell Script - remove first and last quote (\") from a variable","body":"<p>Below is the snippet of shell script from a larger script. It removes the quotes from the string that is held by a variable. I am doing it using sed, is it efficient? If not then what is the efficient way?</p>\n\n<pre><code>#!/bin/sh\n\nopt=\"\\\"html\\\\test\\\\\\\"\"\ntemp=`echo $opt | sed 's/.\\(.*\\)/\\1/' | sed 's/\\(.*\\)./\\1/'`\necho $temp\n</code></pre>\n"},{"tags":["bash","command","cygwin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13186313,"title":"cygwin: timeout syntax always fails","body":"<p>With Cygwin, I tried to use \"timeout\" to make my script sleep for a few seconds.\nBut even when I did it according to its syntax it always asks me to <code>try --help</code>, meaning I gave the wrong forms. \nHere are the things I've tried</p>\n\n<pre><code>timeout 5\n\ntimeout 5s\n\ntimeout 5.0s\n\ntimeout 5.\n</code></pre>\n\n<p>None of which worked.</p>\n\n<p>Any ideas?!</p>\n"},{"tags":["bash","shell","script","sqlplus"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":663,"score":1,"question_id":6848791,"title":"How to store multiple row output in a bash array?","body":"<p>I have a select statement</p>\n\n<pre><code>sqlplus [credentials] select variable from table;\n</code></pre>\n\n<p>It returns 6 rows and I need to store them as an array in bash array variable. </p>\n"},{"tags":["java","bash","runtime"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":49,"score":3,"question_id":13183152,"title":"Executing shell-script with parameters from java","body":"<p>I have been googling for some time, and everyone seems to have a different solution, none of which appear to be working for me.</p>\n\n<p>I have tried both <code>ProcessBuilder</code> and <code>Runtime</code>. Both calling the <code>.sh</code> file directly and feeding it to <code>/bin/bash</code>. With no luck.</p>\n\n<p>Back to basics, my current code is as follows;</p>\n\n<pre><code>String cmd[] = { \"~/path/to/shellscript.sh\", \"foo\", \"bar\" };\nProcess p = Runtime.getRuntime().exec(cmd);\n</code></pre>\n\n<p>Which is giving a <code>No such file or directory</code> error, despite that manually running;</p>\n\n<pre><code>~/path/to/shellscript.sh foo bar\n</code></pre>\n\n<p>Works perfectly from bash.</p>\n\n<p>I need to keep the <code>~</code> because this shellscript exists in slightly different forms for three different users.</p>\n"},{"tags":["linux","windows","bash","google-chrome","color-scheme"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13185246,"title":"Setting colorscheme for Chrome Secure Shell","body":"<p>I use Chrome Secure Shell as my SSH client. I set the background color to white and I have a hard time reading some of the color in the shell for my Ubuntu box. </p>\n\n<p>I went to 4bit Terminal Color Scheme Designer and got a nice colorscheme that I like. How do I set the color scheme for my Chrome SS terminal?</p>\n"},{"tags":["bash","lftp"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13183001,"title":"Continue Processing Bash Script After LFTP","body":"<p>I'd like to use lftp in the beginning of a bash script, but how do I exit lftp without stopping the script from processing? I've tried ending the lftp part with \"exit\", \"quit\", and \"bye\", but they all stop the script.</p>\n\n<p>Previously, I split into two scripts and cron'ed them to run in the right order. Is it possible to combine them into one script?</p>\n"},{"tags":["bash","process"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13182157,"title":"Waiting for a process to end","body":"<p>I would like to run <code>n</code> processes (in my case simulations) simultaneously, so I'm using <code>&amp;</code> like so:</p>\n\n<pre><code>for i in {1..50};\ndo\n     run simulation &amp;\ndone\n</code></pre>\n\n<p>After each simulation is done I need to parse its output files. My question is how do I know when a process is done, and what do I do to invoke a function upon finishing a process? </p>\n\n<p>EDIT: I think what I need to do is call a function that would invoke the simulation and parse its files after it is done. The way I see it this function has to be a child process anyway, right?</p>\n\n<p>Thanks!</p>\n"},{"tags":["bash","script","sessionid"],"answer_count":3,"favorite_count":2,"up_vote_count":3,"down_vote_count":1,"view_count":622,"score":2,"question_id":9677306,"title":"linux command setsid","body":"<p>I am trying to write a wrapper which will execute a script as a session leader.\nI am confused by the behaviour of the linux command <code>setsid</code>. Consider this script, called <code>test.sh</code>:</p>\n\n<pre><code>#!/bin/bash\nSID=$(ps -p $$ --no-headers -o sid)\nif [ $# -ge 1 -a $$ -ne $SID ] ; then\n  setsid bash test.sh\n  echo pid=$$ ppid=$PPID sid=$SID parent\nelse\n  sleep 2\n  echo pid=$$ ppid=$PPID sid=$SID child\n  sleep 2\nfi\n</code></pre>\n\n<p>The output differs depending on whether it is executed or sourced:</p>\n\n<pre><code>$ bash\n$ SID=$(ps -p $$ --no-headers -o sid)\n$ echo pid=$$ ppid=$PPID sid=$SID\npid=9213 ppid=9104 sid= 9104\n$ ./test.sh 1 ; sleep 5\npid=9326 ppid=9324 sid= 9326 child\npid=9324 ppid=9213 sid= 9104 parent\n$ . ./test.sh 1 ; sleep 5\npid=9213 ppid=9104 sid= 9104 parent\npid=9336 ppid=1 sid= 9336 child\n$ echo $BASH_VERSION \n4.2.8(1)-release\n$ exit\nexit\n</code></pre>\n\n<p>So, it seems to me that <code>setsid</code> returns immediately when the script is sourced, but it waits for its child when the script is executed.\nWhy would the presence of a controlling tty have anything to do with <code>setsid</code>? Thanks!</p>\n\n<p>Edit: For clarification I added pid/ppid/sid reporting to all relevant commands.</p>\n"},{"tags":["osx","bash","links"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":21,"score":-1,"question_id":13184448,"title":"clear command no file or directory OS X 10.8","body":"<p>So.</p>\n\n<p>I'm playing with my new MacBook (my first Mac, I usually use a Debian build virtual Linux box), right. And I'm screwing around with homebrew and fink and macports. I just removed fink and macports and, suddenly, the \"clear\" command gives me the error message:</p>\n\n<pre><code>\"-bash: /sw/bin/clear: No such file or directory\"\n</code></pre>\n\n<p>I have no idea what it's trying to say, but all I can think of is I must have done something wrong and either broken a link or removed something I really, really shouldn't have.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["linux","perl","bash","ubuntu","centos"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":13182278,"title":"Does Perl have su or similar command?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4991001/how-to-successfully-run-perl-script-with-setuid-when-used-as-cgi-bin\">How to successfully run Perl script with setuid() when used as cgi-bin?</a>  </p>\n</blockquote>\n\n\n\n<p>I am running my Perl script as root, and would like to have these commands run as <code>$USER</code></p>\n\n<pre><code>mkdir bin\ncp -r /opt/gitolite .\ngitolite/install -ln\ngitolite setup -pk ${USER}.pub\nrm ${USER}.pub\n\nmkdir -p .gitolite/hooks/common\nln -s /opt/pre-receive .gitolite/hooks/common/\n</code></pre>\n\n<p><strong>Question</strong></p>\n\n<p>Does Perl have a <code>su -c \"mkdir bin\" $USER</code> or something similar?</p>\n"},{"tags":["ruby","bash","network-programming","port"],"answer_count":3,"favorite_count":4,"up_vote_count":10,"down_vote_count":0,"view_count":5079,"score":10,"question_id":517219,"title":"Ruby - See if a port is open","body":"<p>I need a quick way to find out if a given port is open with Ruby. I currently am fiddling around with this:</p>\n\n<pre><code>require 'socket'\n\ndef is_port_open?(ip, port)\n  begin\n    TCPSocket.new(ip, port)\n  rescue Errno::ECONNREFUSED\n    return false\n  end\n  return true\nend\n</code></pre>\n\n<p>It works great if the port is open, but the downside of this is that occasionally it will just sit and wait for 10-20 seconds and then eventually time out, throwing a <code>ETIMEOUT</code> exception (if the port is closed). My question is thus:</p>\n\n<p>Can this code be amended to only wait for a second (and return <code>false</code> if we get nothing back by then) or is there a better way to check if a given port is open on a given host?</p>\n\n<p><strong>Edit:</strong> Calling bash code is acceptable also as long as it works cross-platform (e.g., Mac OS X, *nix, and Cygwin), although I do prefer Ruby code.</p>\n"},{"tags":["bash","gzip"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13184303,"title":"Bash script: Gzip an entire folder and keep files extensions same","body":"<p>I want to gzip every file in a folder recursively and keep the original name and extension after compression.</p>\n\n<p>I have tried sudo <code>gzip -9 -r folder</code> however now each file has an .gz extension added to the original such as <code>2852b65c1d8b.css.gz</code> while I want to keep the name as <code>2852b65c1d8b.css</code> for the gzipped file to upload to Amazon S3.</p>\n"},{"tags":["bash","sh"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":19,"score":2,"question_id":13183830,"title":"bash sequential execution timeline","body":"<p>Let's say I type in the following commands:</p>\n\n<pre><code>/usr/local/bin/wget -O \"/storehere.xml\" \"download1\" &amp;&amp; ./parse_xml;/usr/local/bin/wget -O \"/storehere.xml\" \"download2\" &amp;&amp; ./parse_xml;\n</code></pre>\n\n<p>To my understanding, the shell will execute parse_xml after download1 is retrieved and stored. However, what is not clear to me is when will the next wget command for download 2 be executed? After parse_xml is done executing (the first time of course)? Or after a request to execute parse_xml is made? If the answer it the latter one, I would like to know a way to make my script wait for a return code from parse_xml before executing the next wget.</p>\n\n<p>Thanks.</p>\n"},{"tags":["linux","bash","math"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13182070,"title":"Best way to divide in bash using pipes?","body":"<p>I'm just looking for an easy way to divide a number (or provide other math functions). Let's say I have the following command:</p>\n\n<pre><code>find . -name '*.mp4' | wc -l\n</code></pre>\n\n<p>How can I take the result of wc -l and divide it by 3?</p>\n\n<p>The examples I've seen don't deal with re-directed out/in</p>\n\n<p>Thanks</p>\n"},{"tags":["linux","bash","scripting"],"answer_count":13,"favorite_count":63,"up_vote_count":191,"down_vote_count":0,"view_count":218937,"score":191,"question_id":918886,"title":"Split string based on delimiter in Bash?","body":"<p>How do I split a string based on a delimiter in Bash?</p>\n\n<p>I have this string stored in a variable:</p>\n\n<pre><code>IN=\"bla@some.com;john@home.com\"\n</code></pre>\n\n<p>Now I would like to split the strings by ';' delimiter so that I have</p>\n\n<pre><code>ADDR1=\"bla@some.com\"\nADDR2=\"john@home.com\"\n</code></pre>\n\n<p>I don't necessarily need the <code>ADDR1</code> and <code>ADDR2</code> variables. If they are elements of an array that's even better.</p>\n\n<p><strong>Edit</strong>: After suggestions from the answers below, I ended up with the following which is what I was after:</p>\n\n<pre><code>#!/usr/bin/env bash\n\nIN=\"bla@some.com;john@home.com\"\n\narr=$(echo $IN | tr \";\" \"\\n\")\n\nfor x in $arr\ndo\n    echo \"&gt; [$x]\"\ndone\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>&gt; [bla@some.com]\n&gt; [john@home.com]\n</code></pre>\n\n<p><strong>Edit2</strong>: There was a solution involving setting <a href=\"http://en.wikipedia.org/wiki/Internal_field_separator\">Internal_field_separator</a> (IFS) to ';'. I am not sure what happened with that answer, how do you reset IFS back to default?</p>\n\n<p><strong>Edit3</strong>: RE: IFS solution, I tried this and it works, I keep the old IFS and then restore it:</p>\n\n<pre><code>IN=\"bla@some.com;john@home.com\"\n\nOIFS=$IFS\nIFS=';'\narr2=$IN\nfor x in $arr2\ndo\n    echo \"&gt; [$x]\"\ndone\n\nIFS=$OIFS\n</code></pre>\n\n<p>BTW, when I tried </p>\n\n<pre><code>arr2=($IN) \n</code></pre>\n\n<p>I only got the first string when printing it in loop, without brackets around <code>$IN</code> it works.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13178117,"title":"Is this an illegal syntax","body":"<p>I am attempting to write a script that will generate a random number and then make a directory called that random number and copy in a text file. I have tried everything i could think of the assign the variable but each time i get </p>\n\n<pre><code>RANDOM: command not found\nRANDOM: command not found\nbash: //small.txt: No such file or directory\nbash: //small.txt: No such file or directory\n</code></pre>\n\n<p>Below is my code</p>\n\n<pre><code>#!/bin/bash\none=$(RANDOM)\ntwo=$(RANDOM)\n\nmkdir -p $one\nmkdir -p $two\necho “BIGGGGGONgrery54y457457yytewrterytyutytytyhtytryrtyrthrthtrhrtyhrthrhtrhrthrthrthrthE”| &gt; $one/small.txt\necho “B”| &gt; $two/small.txt\necho \"finish -l test me \"\ndone\n</code></pre>\n"},{"tags":["linux","bash","unix","shell"],"answer_count":8,"favorite_count":24,"up_vote_count":52,"down_vote_count":0,"view_count":16080,"score":52,"question_id":821396,"title":"Aborting a shell script if any command returns a non-zero value?","body":"<p>I have a Bash shell script that invokes a number of commands.\nI would like to have the shell script automatically exit with a return value of 1 if any of the commands return a non-zero value.</p>\n\n<p>Is this possible without explicitly checking the result of each command?</p>\n\n<p>e.g. </p>\n\n<pre><code>dosomething1\nif [[ $? -ne 0 ]]; then\n    exit 1\nfi\n\ndosomething2\nif [[ $? -ne 0 ]]; then\n    exit 1\nfi\n</code></pre>\n"},{"tags":["bash","script","sed","awk","append"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":31,"score":-1,"question_id":13181725,"title":"bash append file contents to the bottom of existing file","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5586293/shell-script-to-append-text-to-each-file\">Shell script to append text to each file?</a><br>\n  <a href=\"http://stackoverflow.com/questions/6207573/how-to-append-output-to-the-end-of-text-file-in-shell-script\">How to append output to the end of text file in SHELL Script?</a>  </p>\n</blockquote>\n\n\n\n<p>I'm trying to work out the best way to insert api details into a pre-existing config. I thought about using SED to insert the contents of the api text file to the bottom of the config.inc file. I've started the script but it doesn't work and it wipes the file. </p>\n\n<pre><code>#!/bin/bash\n\nCONFIG=/home/user/config.inc\nAPI=/home/user/api.txt\n\nsed -e \"\\$a $API\" &gt; $CONFIG\n</code></pre>\n\n<p>What am I doing wrong? </p>\n\n<p>Thanks </p>\n"},{"tags":["bash","encoding","sed"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13173891,"title":"Characters hard to substitute with sed","body":"<p>(Below since I can't paste the characters I see, <code>BB</code> will mean a character that is a square with numbers 0080 followed by a square with numbers 0094 inside).</p>\n\n<p>I've this subtitles file with an ISO-8859-15 encoding that has <code>âBB</code> instead of <code>–</code> when seen in a text editor.</p>\n\n<p>If I read the file with <code>cat</code>, the dash appears normally but if I use the file as it is it will display a <code>â€”</code> on the video subtitles.</p>\n\n<p>I tried substitutions with sed, without success:</p>\n\n<pre><code>sed 's/âBB/–/g' thisfile &gt; correctedfile\nsed 's/â€”/–/g' thisfile &gt; correctedfile\n</code></pre>\n\n<p>I tried it first in the command line and the numbered boxes fail to appear, then I tried it with a script.</p>\n\n<p>I even tried cheating with</p>\n\n<pre><code>sed 's/â../–/g' thisfile &gt; correctedfile\n</code></pre>\n\n<p>and it didn't work.</p>\n\n<p><code>cat</code> and <code>sed</code> see it perfectly as a –, so I tried </p>\n\n<pre><code>sed 's/–/–/g' thisfile &gt; correctedfile\n</code></pre>\n\n<p>but it didn't work either. </p>\n\n<p>Then I tried <code>recode iso885915..utf8 thisfile</code> and vice-versa and nothing.</p>\n\n<p>If I do a regular find and replace in <code>kate</code>, it fixes it. But since the problem is present in other files I want to solve with a <code>for; do; done</code> loop in command line, but for that I need to know how to fix one of them.</p>\n\n<p>Why these solutions didn't work, what am I missing and how to make it work?</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13176569,"title":"Cron doesn't run bash script","body":"<p>I have cron</p>\n\n<blockquote>\n  <p>SHELL=/bin/bash</p>\n  \n  <p>PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin</p>\n\n<pre><code>* * * * * root  /usr/bin/flock -xn /var/lock/script.lock -c '/bin/bash /root/Dropbox/1.sh'\n</code></pre>\n</blockquote>\n\n<p>my 1.sh</p>\n\n<pre><code>#!/bin/bash -l \n\nPATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin \n\nx=1\nwhile [ $x -le 3 ] \ndo \nURL=$(head -n 1 /root/Dropbox/query.txt) \nlynx -dump  $URL | egrep '^http' &gt; /root/Dropbox/urls.txt \nx=$(( $x + 1 )) \ndone\n</code></pre>\n\n<p>Bash as default</p>\n\n<p># echo $SHELL</p>\n\n<p>/bin/bash</p>\n\n<p>Why cron doesn't run 1.sh ?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13180669,"title":"Confusing syntax error: unexpected end of file","body":"<p>I keep getting the following error in my bash script when i attempt to run it, i can't seem to find the problem. I think it has something to do with how i am closing my loop(s). Any help would be much appreciated </p>\n\n<pre><code>bash: random: line 66: syntax error: unexpected end of file\n</code></pre>\n\n<p>Below is my code</p>\n\n<pre><code>#!/bin/bash\none=$RANDOM\ntwo=$RANDOM\n\n# Declare variable choice and assign value 4\nchoice=5\n# Print to stdout\necho \"1. -l\"\necho \"2. -m\"\necho \"3. -c\"\necho \"4. -i\"\necho -n \"Please choose a word [1,2,3,4]? \"\nwhile [ $choice -eq 5 ]; do\n\n\n  #option -l\n  if [ $choice -eq 1 ] ; then\n   #do something\n\n      else\n      echo \"Please make a choice between 1 -4 !\"\n      echo \"1.-l\"\n      echo \"2.-m\"\n      echo \"3.-c\"\n      echo \"4.-i\"\n      echo -n \"Please choose a word [1,2,3 or 4]? \"\n      choice=5\n\n      fi\n\necho\"finished\"\ndone\n</code></pre>\n\n<p>EDIT* Removed bulky code as it was causing an indent problem.</p>\n"},{"tags":["bash","unix"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13178859,"title":"Calculating the average each row and save into array","body":"<p>I'm trying to create the program to read each lines and calculate each line's average and store into array...For example, program will read first line, add all the numbers and divide by 24 to calculate the average which will be stored into Avg_list[1].\nWhen I try to run the program, I encounter following error, I have no idea why it  doesn't work... Can someone identify the problem?</p>\n\n<p>Code:  in Ksh</p>\n\n<pre><code> c=0\n while read -r line ; do\n     v=$line\n     set -- $v    ((g=($2+$3+$4+$5+$6+$7+$8+$9+$10+$11+$12+$13+$14+$15+$16+$17+$18+$19+$20+$21+$22+$23+$24+$25+$26)/24))\n      echo $g\n      Avg_list[${c}]=$g\n      ((c=c+1))\n  done &lt; daily.txt\n</code></pre>\n\n<p>daily.txt</p>\n\n<pre><code>CPU 55 54 54 54 54 54 54 54 54 54 54 54 54 54 54 55 54 54 55 56 57 54 57 54\nCPEAK 56 56 57 55 58 56 56 56 57 55 60 56 55 56 55 56 58 55 57 56 63 56 72 57\nRAM 97 97 97 97 97 96 96 96 96 96 96 93 91 89 86 84 90 90 95 97 97 97 97 97\nRPEAK 97 97 97 97 97 97 96 96 96 96 96 96 92 90 91 81 94 89 97 97 97 97 97 97\n</code></pre>\n\n<p>Error note:</p>\n\n<pre><code>while read -r line ; do\n        v=$line\n        set -- $v\n        ((g=($2+$3+$4+$5+$6+$7+$8+$9+$10+$11+$12+$13+$14+$15+$16+$17+$18+$19+$20+$21+$22+$23+$24+$25+$26)/24))\n        echo $g\n        Avg_list[${c}]=$g\n        ((c=c+1))\ndone &lt; daily.txt\n+ 0&lt; daily.txt\n+ read -r line\n+ v=CPU 54 54 54 54 54 54 54 54 54 54 54 54 54 54 55 54 54 55 56 57 54 57 54 54\n+ set -- CPU 54 54 54 54 54 54 54 54 54 54 54 54 54 54 55 54 54 55 56 57 54 57 54 54\n+ (( g=(54+54+54+54+54+54+54+54+CPU0+CPU1+CPU2+CPU3+CPU4+CPU5+CPU6+CPU7+CPU8+CPU9+540+541+542+543+544+545+546)/24 ))\nPerformanceAM.sh[21]: g=(54+54+54+54+54+54+54+54+CPU0+CPU1+CPU2+CPU3+CPU4+CPU5+CPU6+CPU7+CPU8+CPU9+540+541+542+543+544+545+546)/24: 0403-009 The specified number is not valid for this command.\n</code></pre>\n\n<p>EDIT </p>\n\n<pre><code>    while read -r line ; do\n    v=$line\n    set -- $v\n    ((g=${2}+${3}+${4}+${5}+${6}+${7}+${8}+${9}+${10}+${11}+${12}+${13}+${14}+${15}+${16}+${17}+${18}+${19}+${20}+${21}+${22}+${23}+${24}+${25}+${26})/24))\n    echo $g\n    Avg_list[${c}]=$g\n    ((c=c+1))\ndone &lt; daily.txt\n</code></pre>\n\n<p>New error:</p>\n\n<p>while read -r line ; do\n        v=$line\n        set -- $v\n        ((g=${2}+${3}+${4}+${5}+${6}+${7}+${8}+${9}+${10}+${11}+${12}+${13}+${14}+${15}+${16}+${17}+${18}+${19}+${20}+${21}+${22}+${23}+${24}+${25}+${26})/24)PerformanceAM.sh[18]: 0403-057 Syntax error at line 21 : `/24' is not expected.</p>\n\n<p>Thanks for your suggestions! when I tried used bracket i get this error...I'm now even more confused....it seems like it's not collecting numbers at all...</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":29,"score":-1,"question_id":13180125,"title":"Can -name values be OR'd in find?","body":"<p>I need a way to handle two files that are transferred from MS Windows applications. One is produced with a .csv extension, and the other has a .CSV extension. They also have spaces in the file names, which I can handle. </p>\n\n<p>However, but I am not quite sure how to add .CSV to the <code>-name \\*.csv</code> parameter of the following<code>find</code> command. </p>\n\n<p>Can two values be OR'd in the <code>-name</code> parameter?</p>\n\n<pre><code>for fnam in `find . -maxdepth 1 -type f -name \\*.csv -exec echo \"{}\" \\;` \ndo\n.\n.\n.\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13180451,"title":"Show cpu usage with bash script and print in txt file","body":"<p>I have a question. </p>\n\n<p>I need to do a bash script command that show me CPU usage and stamp in an external txt file.</p>\n\n<p>Have some idea? Thank all so much!</p>\n"},{"tags":["bash","shell","text","ksh"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13175502,"title":"How do I arbitrarily reorder lines in a text file using a Unix shell?","body":"<p>I've got a text file with an arbitrary number of lines, e.g.:</p>\n\n<pre><code>one line\nsome other line\nan additional line\none more here\n</code></pre>\n\n<p>I'd like to write a script to reorder those lines based on a given order. e.g. </p>\n\n<ul>\n<li>An input of 2 1 3 4 would swap the first and second lines.</li>\n<li>An input of 3 1 2 4 would put the 3rd line first, the 1st line second, the 2nd line third and keep the 4th line fourth.</li>\n</ul>\n\n<p>I could hack something together, but I'm wondering if there's an elegant solution?</p>\n\n<p>I can use either bash or ksh.</p>\n"},{"tags":["perl","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":13178485,"title":"How to execute many (~15) bash commands in Perl?","body":"<p>I know of <code>system()</code> and <code>qx()</code>, but I need to execute ~15 bash commands. E.g.</p>\n\n<p><code>mkdir</code>, <code>chown</code>, <code>edquota -p user1 -u user2</code>, <code>cp -r</code>, <code>su - username</code>, <code>git</code>, <code>rm</code>, <code>ln -s</code></p>\n\n<p><strong>Question</strong></p>\n\n<p>Is there an efficient way to execute many Bash commands in Perl?</p>\n\n<p>I don't care in this case about the output.</p>\n"},{"tags":["r","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13178222,"title":"Binning decimal data and plotting an histogram","body":"<p>I have a dataset in a file, which looks like this:</p>\n\n<pre><code>0.0707526823\n0.4859753978\n0.0084166789\n0.0694709558\n0.0156410467\n0.3783259831\n0.8977261856\n0.7981824881\n0.2079852045\n0.9498437264\n0.9264972044\n0.1878358734\n0.0020816686\n0.0024611297\n0.4250464895\n0.0725748666\n0.0407962054\n0.8282363221\n0.8408343333\n0.7129760016\n0.2772250135\n0.3677588953\n0.4723908637\n0.9452814318\n</code></pre>\n\n<p>I want to bin this data with an interval of 0.1 and plot a histogram. </p>\n\n<p>I did try using R,</p>\n\n<p>and here what I was doing</p>\n\n<pre><code>x&lt;-read.table(\"filex\", header=T)\nbreaks=seq (min, max, step)\nhist (x$col1, breaks)\n</code></pre>\n\n<p>but this command is not working in my case :(  </p>\n\n<p>Any one liner in awk, or R is welcomed</p>\n\n<p>Thank you</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":42,"score":-1,"question_id":13178038,"title":"How to add text in a txt file with bash scripting","body":"<p>i have a question. I need to add a text line into a txt file. This is my file:</p>\n\n<ul>\n<li>000 </li>\n<li>001 test1</li>\n<li>002 test2</li>\n<li>003 test3</li>\n<li>004</li>\n<li>005 test4</li>\n<li>006 test5</li>\n<li>007 test6</li>\n</ul>\n\n<p>I need with bash scripting to add text in line 000 and 004. </p>\n\n<p>How can i do?\nThanks to all!</p>\n"},{"tags":["bash","virtualbox"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13177702,"title":"Execute Command after VM Booted","body":"<p>I've gotten sick of how many steps it takes me to get started in the morning.  Yes it only takes me a few minutes to start up my whole environment, but I'd really rather just run a single command on boot-up and be ready to go immediately.</p>\n\n<p>I'm writing an app on Rails connected to SqlServer.  To develop for it I have a local version of the DB I use on a VM.  My manual process goes like this:</p>\n\n<pre><code>Run VirtualBox.\nStart the VM.\n     When the VM is done booting:\n          Open terminal\n          Run `rails s`\n          When rails is done starting:\n                 open browser\n                 navigate to localhost:3000 and start developing\nRun Sublime\n</code></pre>\n\n<p>I'd love to do this in one script:</p>\n\n<pre><code>VirtualBox Windows7 &amp;\nsublime &amp;\ngoogle-chrome &amp;\n</code></pre>\n\n<p>But I can't figure out how to run this command <em>only</em> once the VM is done booting:</p>\n\n<pre><code>gnome-terminal --working-directory=git/my_project --tab -e 'rails s' --tab -e 'git status'\n</code></pre>\n\n<p>Also, it'd be nice (but not necessary) to have chrome start <em>after</em> rails s has succeeded.</p>\n\n<p>Is this even possible?</p>\n"},{"tags":["regex","bash","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13177153,"title":"sed print line from regex to regex","body":"<p>I have a file with the following text:</p>\n\n<pre><code>text\nSTART\nThis\nhas\nto\nbe\nprinted\nSTOP\nmore text\n</code></pre>\n\n<p>Now i want the text in between START and STOP to be printed.\nI wrote the following:</p>\n\n<pre><code>cat file | sed '/START/,/STOP/p'\n</code></pre>\n\n<p>But that does not seem to be doing what i want. Any suggestions?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":32,"score":3,"question_id":13176611,"title":"bash script write executing time in a file","body":"<p>I need to write the time taken to execute this command in a txt file:</p>\n\n<pre><code>time ./program.exe\n</code></pre>\n\n<p>How can I do in bash script?</p>\n\n<p>I try with <code>&gt;&gt; time.txt</code> but that doesn't work (the output does not go to file and does go to the screen).</p>\n"},{"tags":["bash","echo","kubuntu"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":13175886,"title":"Bash echo outputting text in middle of concatenated string","body":"<p>Preamble:\nSo I have a project whereby I need to run a conversion tool on a bunch of files. There are multiple steps to the conversion, and it can take a while. Since these files aren't necessarily in the same directory, I created a text file with the filenames to convert:</p>\n\n<pre><code>&lt;filenames.txt&gt;\n\n/home/me/Documents/file1.txt\n/home/me/Documents/file2.txt\n/home/me/Documents/file3.txt\n</code></pre>\n\n<p>Problem:\nI then have a bash script to run over these files, and do the conversion steps. However, I try and echo the phase and filename, and echo, in this case, sticks the echo'd text in the middle of the filename:</p>\n\n<pre><code>&lt;script.sh&gt;\n\ncat filenames.txt | while read some_file\ndo\n    echo\n    echo \"Begin FORMAT_A to FORMAT_B conversion...\"\n    echo \"FORMAT_A Filename:\"\n    echo $some_file\n    formatb_dir= dirname $some_file | tr '\\n' \"/\"\n    formatb_file= basename $some_file \".xml\" | tr '\\n' \"_\"\n    formatb=$formatb_dir$formatb_file\"form_b.xml\\n\"\n\n    echo \"FORMAT_B Filename:\"\n    echo $formatb\ndone\n</code></pre>\n\n<p>Produces output like this:</p>\n\n<pre><code>Begin FORMAT_A to FORMAT_B conversion...\nFORMAT_A Filename:\n/home/me/Documents/file1.txt\n/home/me/Documents/file1.txt_FORMAT_B Filename:\nform_b.xml\n\n\nBegin FORMAT_A to FORMAT_B conversion...\nFORMAT_A Filename:\n/home/me/Documents/file2.txt\n/home/me/Documents/file2.txt_FORMAT_B Filename:\nform_b.xml\n\n\nBegin FORMAT_A to FORMAT_B conversion...\nFORMAT_A Filename:\n/home/me/Documents/file3.txt\n/home/me/Documents/file3.txt_FORMAT_B Filename:\nform_b.xml\n</code></pre>\n\n<p>\"FORMAT_B Filename\", the echo'd text, has appeared before the appended text \"form_b.xml\".</p>\n\n<p>I looked at the man pages for dirname, basename, echo and tr, but I didn't spot anything that looks like it'd cause what I'm seeing. I tried looking around on Google, but I'm not sure I'm asking the right questions (\"bash echo text before variable\"?). </p>\n\n<p>Question: <strong>Why is my echo putting the echo'd text in the middle of my variable?</strong></p>\n\n<p>(possible related question: \"Am I going about what I'm doing in completely the wrong way?\")</p>\n\n<p><strong>Edit:</strong> I accepted fortea's answer because it walked me through what I didn't understand about variables and getting the output from commands. That said, dogbane and Jonathan Leffler showed better ways of doing what I was doing.</p>\n"},{"tags":["linux","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13139237,"title":"How to escape single quote from parsing inside command?","body":"<p>I have to start the command at the bottom as a specific user in a script. the parameter $vmargs needs to be in single quotes ('$vmargs'). im stuck here because its always parsed.\nthe vmargs parameter has some java options within.</p>\n\n<pre><code> su synesty -c \"screen -dmS appscreen ./eclipse -vmargs \n                -DAPP_ENV=$automatey_note  $vmargs\"\n</code></pre>\n\n<p>Hope anyone can help. </p>\n\n<p>Update: Sorry I saw my question was not clear. The parameter have to be solved. </p>\n\n<pre><code> '-DencryptorCredentials=currentPass|oldPass|1 -Xms512m -Xmx2048m \n -DLOGGING_HOME=configuration/ -Djava.io.tmpdir=/tmp -Dorg.osgi.service.http.port=8081\n -Declipse.ignoreApp=true -Dosgi.noShutdown=true -Xdebug         \n -Xnoagent\n -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4000,server=y,suspend=n \n -Djava.net.preferIPv4Stack=true -DapplyDbMigrations=true -XX:MaxPermSize=128m     \n -XX:-HeapDumpOnOutOfMemoryError '\n</code></pre>\n\n<p>Thats the stuff and I need the single quotes, otherwise shell will not recognize it as parameters</p>\n"},{"tags":["mysql","wordpress","bash","unix","ssh"],"answer_count":1,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13176099,"title":"How to pass variables to SSH command in bash script","body":"<p>I am new to bash scripting, and am attempting write a script to sync my local Wordpress database with a remote one. Here it is:</p>\n\n<pre><code>#!/bin/sh \n\nRUSER=example-admin \nRHOST=ftp.example.com \nRDBUSER=wp_admin\nRDB=wp_db\nRDBHOST=localhost\nRBAK=.backup/latest-remote-db.mssql \n\nLUSER=root\nLPASS=root\nLHOST=localhost\nLDB=wp_db\nLBAK=.backup/latest-local-db.mssql \n\n#dump the contents of my local database\nmysqldump -u$LUSER -p$LPASS -h $LHOST $LDB &gt; $LBAK\n\n#upload my local database to remote\nscp $LBAK $RUSER@$RHOST:~/.backup/\n\n#login to remote host, backup remote database, delete the remote database then recreate it, restore it with the contents of my local database\nssh $RUSER@$RHOST 'mysqldump -uwp_admin -h localhost wp_db &gt; ~/.backup/latest-remote-db.mssql; mysql -uwp_admin -h localhost -Bse \"show databases; drop database wp_db; create database wp_db;\"; mysql -uwp_admin -h localhost wp_db &lt; ~/.backup/latest-local-db.mssql;'\n</code></pre>\n\n<p>The above works fine, yet I'm not satisfied with the final <code>ssh</code> command because all the values are hard-coded. I would prefer to use something like this:</p>\n\n<pre><code>ssh $RUSER@$RHOST 'mysqldump -u$RDBUSER -h $RDBHOST $RDB &gt; ~/$RBAK; mysql -u$RDBUSER -h $RDBHOST -Bse \"drop database $RDB; create database $RDB;\"; mysql -u$RDBUSER -h $RDBHOST $RDB &lt; ~/$LBAK;'\n</code></pre>\n\n<p>However this obviously does not work, because the all the variables are trapped inside quotes and therefore don't get substituted. Can anybody advise on a better way to achieve this? I considered executing a separate script on the remote end to handle all the <code>mysql</code> commands, yet that strikes me as more inefficient.</p>\n"},{"tags":["bash","parameters","word","splitting"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":309,"score":4,"question_id":10062420,"title":"Pass multi-word arguments to a bash function","body":"<p>Inside a bash script function, I need to work with the command-line arguments of the script, and also with another list of arguments. So I'm trying to pass two argument lists to a function, the problem is that multi-word arguments get split.</p>\n\n<pre><code>function params()\n{\n    for PARAM in $1; do\n        echo \"$PARAM\"\n    done\n\n    echo .\n\n    for ITEM in $2; do\n        echo \"$ITEM\"\n    done\n}\n\nPARAMS=\"$@\"\nITEMS=\"x y 'z t'\"\nparams \"$PARAMS\" \"$ITEMS\"\n</code></pre>\n\n<p>calling the script gives me</p>\n\n<pre><code>myscript.sh a b 'c d'\na\nb\nc\nd\n.\nx\ny\n'z\nt'\n</code></pre>\n\n<p>Since there are two lists they must be passed as a whole to the function, the question is, how to iterate the elements while respecting multi-word items enclosed in single quotes 'c d' and 'z t'?</p>\n\n<p>The workaround that I have (see below) makes use of BASH_ARGV so I need to pass just a single list to the function. However I would like to get a better understanding of what's going on and what's needed to make the above work.</p>\n\n<pre><code>function params()\n{\n    for PARAM in \"${BASH_ARGV[@]}\"; do\n        echo \"$PARAM\"\n    done\n\n    echo .\n\n    for ITEM in \"$@\"; do\n        echo \"$ITEM\"\n    done\n}\n\nparams x y 'z t'\n</code></pre>\n\n<p>calling the script gives me</p>\n\n<pre><code>myscript.sh a b 'c d'\nc d\nb\na\n.\nx\ny\nz t\n</code></pre>\n\n<p>... Which is how I need it (except that first list is reversed, but that would be tolerable I guess)</p>\n"},{"tags":["bash","unix"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13174645,"title":"unix script for simple text file modification","body":"<p>i have a file that look like this, the format should be filename followed by 4 entries beginning !.......</p>\n\n<pre><code>76669667-LD_TTFI9255.gz\n!0c0901$\n!02342e$\n!0c0901$\n!030c2a$\n76669707-UN_TTFI5494.gz\n!0c0901$\n!030509$\n76669731-IN_TTFI7570.gz\n!0c0901$\n!023633$\n!0c0901$\n!030e33$\n</code></pre>\n\n<p>I need a commmand that will find occasions where there are less than 4 entries after a file name and add in some blanks.</p>\n\n<p>using example above the new output needs to become </p>\n\n<pre><code>76669667-LD_TTFI9255.gz\n!0c0901$\n!02342e$\n!0c0901$\n!030c2a$\n76669707-UN_TTFI5494.gz\n!0c0901$\n!030509$\n!?\n!?\n76669731-IN_TTFI7570.gz\n!0c0901$\n!023633$\n!0c0901$\n!030e33$\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13175727,"title":"How to pass a string as command line argument for bash script?","body":"<p>I want to pass a string as command line argument to a bash script;\nSimply my bash script is:</p>\n\n<pre><code>&gt;cat test_script.sh\n\nfor i in $*\ndo \necho $i\ndone\n</code></pre>\n\n<p>I typed</p>\n\n<blockquote>\n  <p>bash test_script.sh test1 test2 \"test3 test4\"</p>\n</blockquote>\n\n<p>Output :</p>\n\n<pre><code>test1\ntest2\ntest3\ntest4\n</code></pre>\n\n<p>Output I am expecting:</p>\n\n<pre><code>test1\ntest2\ntest3 test4\n</code></pre>\n\n<p>I tried with backslashes (test1 test2 \"test3\\ test4\") and single quotes but I haven't got the expected result.</p>\n\n<p>How do I get the expected output?</p>\n"},{"tags":["bash","script","openwrt","ash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13175493,"title":"OpenWRT ASH script","body":"<p>I am trying to write an ASH script to run on my OpenWRT router.</p>\n\n<p>I have installed onto it nodogsplash, which displays a login page when you first try to authenticate with the router.</p>\n\n<p>nodogsplash comes with a command line utility which allows you to change the password:</p>\n\n<pre><code>ndsctl password newpassword\n</code></pre>\n\n<p>So I am trying to write a script which I can setup as a cron job to run once a day to change the password to something new, however I am struggling to get it to output correctly. My script atm:</p>\n\n<pre><code>#!/bin/ash\nlocal randompassLength\nlocal pass\nrandompassLength=8\npass=&lt;/dev/urandom tr -dc A-Za-z0-9 | head -c $randompassLength\nndsctl password \"$pass\"\n</code></pre>\n\n<p>When I run this I get the output:</p>\n\n<pre><code>miqM2Ah6Password set to .\n</code></pre>\n\n<p>Which seems to chuck the password at the start of the echo and set the password to blank.</p>\n\n<p>Any ideas what I am doing wrong here?</p>\n"},{"tags":["linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13174022,"title":"count processes in shell script","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/185451/quick-and-dirty-way-to-ensure-only-one-instance-of-a-shell-script-is-running-at\">Quick-and-dirty way to ensure only one instance of a shell script is running at a time</a>  </p>\n</blockquote>\n\n\n\n<p>I am new to shell script. </p>\n\n<p>what I wanna do is to avoid running multiple instances of a script. </p>\n\n<p>I have this shell script cntps.sh</p>\n\n<pre><code>#!/bin/bash\ncnt=`ps -e|grep \"cntps\"|grep -v \"grep\"`\necho $cnt &gt;&gt; ~/cntps.log\nif [ $cnt &lt; 1 ];\nthen \n    #do something.\nelse\n    exit 0\nfi\n</code></pre>\n\n<p>if I run it this way <code>$./cntps.sh</code>, it echoes 2</p>\n\n<p>if I run it this way <code>$. ./cntps.sh</code>, it echoes 0</p>\n\n<p>if I run it with <code>crontab</code>, it echoes 3</p>\n\n<p>Could somebody explain to me why is this happening? \nAnd what is the proper way to avoid running multiple instances of a script? </p>\n"},{"tags":["bash","postgresql","shell","crontab"],"answer_count":4,"favorite_count":5,"up_vote_count":20,"down_vote_count":0,"view_count":9780,"score":20,"question_id":2893954,"title":"How to pass in password to pg_dump?","body":"<p>I'm trying to create a cronjob to back up my database every night before something catastrophic happens. It looks like this command should meet my needs:</p>\n\n<pre><code>0 3 * * * pg_dump dbname | gzip &gt; ~/backup/db/$(date +%Y-%m-%d).psql.gz\n</code></pre>\n\n<p>Except after running that, it expects me to type in a password. I can't do that if I run it from cron. How can I pass one in automatically?</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13174943,"title":"Bash : Add an option to an existing command","body":"<p>Is it possible to add an option to an existing Bash command?</p>\n\n<p>For example I would like to run a shell script when I pass -foo to a specific command (cp, mkdir, rm...).</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13174314,"title":"bash - export doesn't work","body":"<p>I'm missing something very elementary. Under Mac OS X. I've tried chmod 0777 setdir.bsh. Must be something wrong with my settings.</p>\n\n<pre><code>#!/bin/bash                                                                                       \nexport proj=/Users/RParadox/projects/testproject/\necho $proj\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>$ bash setdir.bsh\n/Users/RParadox/projects/testproject/\necho $proj\nnothing??\n</code></pre>\n"},{"tags":["bash","shell","script","sed"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13172601,"title":"Delete specific line with sed without deleting other lines with same prefix","body":"<p>I am trying to delete lines of a file using sed but I don't want to delete these lines unless the search string matches exactly. ie.</p>\n\n<pre><code>#!/bin/bash\nset -x\nfile=\"list1\"\nindex=0\n\nwhile read line ;\n  do\n    if [ ! \"$line\" == \"@@@\" ];\n      then\n        MYARRAY[$index]=\"$line\"\n        #index=$(($index+1))\n        let index++\n    else\n      break\n    fi\ndone &lt; $file\n\n#echo \"MYARRAY is: ${MYARRAY[*]}\"\n#echo \"The file: ${index}\"\n\nindex1=0\nfor i in \"${MYARRAY[@]}\"\ndo\n  lineNumber=$((index1 + 1))\n  sed -i \"/${MYARRAY[$index1]}/d\" \"$file\"\n  let index1++\ndone\n\nsed -i \"/@@@/d\" \"$file\"\n#remove empty lines\nsed -i '/^$/d' \"$file\"\n</code></pre>\n\n<p>So I have a test file (list1):</p>\n\n<pre><code>line1\nline2\nline3\nline4\nline5\nline6\n@@@\nline1_1\nline2_1\n</code></pre>\n\n<p>And after the script has run I end up with all lines deleted because \"line1\" and line2\" are also matching \"line1_1\" and \"line2_1\"</p>\n\n<p>Any help would be appreciated!!</p>\n"},{"tags":["git","bash","git-clone"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":21,"score":2,"question_id":13171288,"title":"from terminal git clone, then move contents to non-empty folder","body":"<p>I'm trying to create a workflow where I create my local project, automatically create the remote bitbucket repo based on the project name, then clone that repo into the local folder I'm working from. The problem is, you can't clone into a folder with files. The workaround so far is to clone into a folder, then move the contents into my working directory.</p>\n\n<p>This is what I have so far that's not working:</p>\n\n<pre><code>git clone https://U:P@bitbucket.org/user-account/{project_name}.git &amp;  mv {project_path}/{project_name}/.git {project_path}/../../\n</code></pre>\n"},{"tags":["bash","symfony2","automation","yaml","symfony-2.1"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12195370,"title":"Scripted editing of Symfony 2 YAML file breaks the formatting and produces errors","body":"<p>I'm trying to script out our entire installation process of new Symfony 2.1 projects including adding and configuring all our bundles and their dependencies. The end result should be one command that sets up everything so the developer is both forced into our best practices setup, and does not have to spend time on this.</p>\n\n<p>So far this is fairly successful since it is now possible to go from 0 to fully installed CMS in about an hour (mostly due to composer installs). You can see the result here: <a href=\"https://github.com/Kunstmaan/KunstmaanSandbox/blob/feature/update-to-2.1/README.md\" rel=\"nofollow\">https://github.com/Kunstmaan/KunstmaanSandbox/blob/feature/update-to-2.1/README.md</a></p>\n\n<p>The next fase of this project is modifying the Symfony config YAML files. But here I'm stuck.</p>\n\n<p>For the parameters.yml I did this with a ruby script, here is the relevant extract, the full script can be found here: <a href=\"https://github.com/Kunstmaan/KunstmaanSandbox/blob/feature/update-to-2.1/app/Resources/docs/scripts/sandboxinstaller.rb\" rel=\"nofollow\">https://github.com/Kunstmaan/KunstmaanSandbox/blob/feature/update-to-2.1/app/Resources/docs/scripts/sandboxinstaller.rb</a></p>\n\n<pre><code>parametersymlpath = ARGV[1]\nprojectname = ARGV[2]\nparametersyml = YAML.load_file(parametersymlpath)\nparams = parametersyml[\"parameters\"]\nparams[\"searchport\"] = 9200\nparams[\"searchindexname\"] = projectname\nparams[\"sentry.dsn\"] = \"https://XXXXXXXX:XXXXXXXX@app.getsentry.com/XXXX\"\nparams[\"cdnpath\"] = \"\"\nparams[\"requiredlocales\"] = \"nl|fr|de|en\"\nparams[\"defaultlocale\"] = \"nl\"\nparams[\"websitetitle\"] = projectname.capitalize\nFile.open(parametersymlpath, 'w') {|f| f.write(YAML.dump(parametersyml)) }\n</code></pre>\n\n<p>So far so good, but the same type of script fails on the config.yml due to these lines:</p>\n\n<pre><code>imports:\n    - { resource: @KunstmaanMediaBundle/Resources/config/config.yml }\n    - { resource: @KunstmaanAdminBundle/Resources/config/config.yml }\n    - { resource: @KunstmaanFormBundle/Resources/config/config.yml }\n    - { resource: @KunstmaanSearchBundle/Resources/config/config.yml }\n    - { resource: @KunstmaanAdminListBundle/Resources/config/config.yml }\n</code></pre>\n\n<p>The @ is a reserved character according to the YAML spec and Ruby throws an error.</p>\n\n<p>So I switched to php and the Symfony yaml component since at this point in the install there is a full symfony install and i came up with this standalone command: <a href=\"https://gist.github.com/3526251\" rel=\"nofollow\">https://gist.github.com/3526251</a></p>\n\n<p>But when reading and dumping the config.yml file the lines above for example would turn into </p>\n\n<pre><code>imports:\n    - \n      resource: @KunstmaanMediaBundle/Resources/config/config.yml\n    - \n      resource: @KunstmaanAdminBundle/Resources/config/config.yml\n    - \n      resource: @KunstmaanFormBundle/Resources/config/config.yml\n    - \n      resource: @KunstmaanSearchBundle/Resources/config/config.yml\n    - \n      resource: @KunstmaanAdminListBundle/Resources/config/config.yml\n</code></pre>\n\n<p>Which looks like crap and i'm not entirely sure this will even work.</p>\n\n<p>So at this point i'm looking at moving the fully modified config.yml files to the install script and just overwriting the originals. I would rather not go there, since it will take constant maintenance if something changes in the symfony-standard project.</p>\n\n<p>I'm wondering if there is another way?</p>\n"},{"tags":["java","osx","bash","shell","zsh"],"answer_count":2,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":284,"score":4,"question_id":13002155,"title":"Apple's most recent Java update removes Java Preferences, how to change from shell?","body":"<p>Apple's Java update this week removes the Java Preferences.app from Utilities.  When working between different versions of Java in varied development environments it no longer seems easily achievable to change from Java 6 to Sun's 1.7 as before.</p>\n\n<p>I believe that there still should be a shell mechanism in place to accomplish this, however I'm not readily finding it.  <strong><em>How do you PROPERLY change the current active version of Java whilst in a shell session?</em></strong>  </p>\n\n<p>(I say PROPERLY because I want to be sure that all env vars are set appropriately such as JAVA_HOME, it's path, etc.)</p>\n\n<p>Additionally, I thought, a couple of years ago, I had stumbled across a script that would change Java env's for you by simply listing the options and then defining which one to switch to.  It may be that I'm getting confused with the tool in Ubuntu, but I am nearly certain it was for OS X...  It would be helpful to either know what this was or perhaps we should write a quick script, if one doesn't exist, that will meet this need; perhaps inserting it into Homebrew?</p>\n"},{"tags":["bash","ssh","webserver","benchmarking","administration"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13171607,"title":"Find out information about installed hard- and software using the terminal without admin rights","body":"<p>I have access to a remote server, to which I login via ssh. I don't have admin rights, but I like tofind out as much as possible about the machine, among other things to see If I get what I pay for. So far I tried:</p>\n\n<ol>\n<li><code>top</code> (to get the size of the memory)</li>\n<li><code>uname -a</code> (find out more about the installed kernel,...)</li>\n<li><code>cat /proc/cpuinfo</code> (get information about the CPUs)</li>\n<li><code>df -h</code> (to find out the capacity of the harddisk)</li>\n</ol>\n\n<p>I'm not sure If the ways I've choosen are the best. I also don't know, how this information can be manipulated by the provider or accidently contain incorrect information. At least for the CPUs I found out, that there are still 1GHz instead of 2GHz CPUs on that machine (I pay for 2GHz).</p>\n\n<p>Are there other ways I can use to find out information about the system, even with limited rights? (e.g. if my sever is a virtual server?). Are there benchmark tools, that don't need admin-rights to be installed?</p>\n"},{"tags":["arrays","string","bash","loops","append"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13171370,"title":"Adding a string to the front of array loop?","body":"<pre><code>#!/bin/bash\n#OLDIFS=$IFS\nIFS=$'\\r'\n    fortune_lines=($(fortune | fold -w 90))\n\n    #Screen_Session=$\"{mainscreen}\"\n        Screen_Session=`screen -ls|grep \"\\.\"|grep \"(\"|awk '{print $1}'`\n    Screen_OneLiner=$(screen -p 0 -S ${Screen_Session} -X stuff \"`printf \"${fortune_lines[@]}\\r\"`\")\n#IFS=$OLDIFS;\n    for var in \"${Screen_OneLiner[@]}\"\n      do\n         echo    \"${var}\"\n    done\n</code></pre>\n\n<p>ok this script works (sorta). I need to at the string \"say \" to front of the entire array index.  Currently I can only get it to print out \"say \" to the first line. </p>\n"},{"tags":["perl","bash","unix","awk"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":13161963,"title":"File comparison with multiple columns","body":"<p>I am doing a directory cleanup to check for files that are not being used in our testing environment.  I have a list of all the file names which are sorted alphabetically in a text file and another file I want to compare against.</p>\n\n<p>Here is how the first file is setup:</p>\n\n<pre><code>test1.pl\ntest2.pl\ntest3.pl\n</code></pre>\n\n<p>It is a simple, one script name per line text file of all the scripts in the directory I want to clean up based on the other file below.</p>\n\n<p>The file I want to compare against is a tab file which lists a script that each server runs as a test and there are obviously many duplicates.  I want to strip out the testing script names from this file and compare spit it out to another file, use <code>uniq</code> and <code>sort</code> so that I can <code>diff</code> this file with the above to see which testing scripts are not being used. </p>\n\n<p>The file is setup as such:</p>\n\n<pre><code>server: : test1.pl test2.pl test3.pl test4.sh test5.sh\n</code></pre>\n\n<p>There are some lines with less and some with more.  My first impulse was to make a <code>Perl</code> script to split the line and push the values in an list if they are not there but that seems wholly inefficient.  I am not to experienced in <code>awk</code> but I figured there is more than one way to do it.  Any other ideas to compare these files?</p>\n"},{"tags":["bash","shell","unix","ssh","sed"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13162036,"title":"Error running multiple commands using here document in bash script","body":"<p>I'm trying to execute the following set of commands in 3 remote servers using arrays, using Here Document, but getting an error</p>\n\n<p><strong>code -</strong></p>\n\n<pre><code>ssh -oPasswordAuthentication=no $remoteUser@${SERVER[i]} &lt;&lt;-END_TEXT\nVALUE=`cat /home/cognos/cognos/c8/configuration/cogstartup.xml | grep -i xsd:long | head -1 | cut -d\"&gt;\" -f2 | sed 's/[:/&lt;|crn:value]*//g'`\nVALUE_BACKUP=$VALUE\n........................ (many more lines of code)\nRESULT1=`perl -e '@stats = stat(\"/home/cognos/cognos/c8/configuration/signkeypair\"); print ((time - $stats[9]) &lt; '$VALUE');'`\n\nEND_TEXT\n</code></pre>\n\n<p>And the error:</p>\n\n<pre><code>**error -**\nsyntax error at -e line 1, near \"&lt; )\"\nExecution of -e aborted due to compilation errors.\nsyntax error at -e line 1, near \"&lt; )\"\nExecution of -e aborted due to compilation errors.\nsyntax error at -e line 1, near \"&lt; )\"\nExecution of -e aborted due to compilation errors.\n</code></pre>\n\n<p>Thanks in advanced guys</p>\n\n<p>ps- using scp to copy commands to remote server and then running them using ssh is not a solution i'm looking for.</p>\n"},{"tags":["bash","shell","unix","scripting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13169319,"title":"properties file search and replace","body":"<p>I've got two properties files and I'd like to replace key/value pairs in File A with any matching key/value entries in File B. File A will have more entries than File B - it's not expected that the two files will have the exact same number of entries. As an example:</p>\n\n<pre><code>File A\n\"GB\" = \"United Kingdom\";\n\"SE\" = \"Sweden\";\n\"BR\" = \"Brazil\";\n\"FR\" = \"France\";\n\"ES\" = \"Spain\";\n\"DE\" = \"Germany\";\n\nFile B\n\"GB\" = \"Regno Unito\";\n\"SE\" = \"Svezia\";\n\"BR\" = \"Brasile\";\n\nDesired Result\n\"GB\" = \"Regno Unito\";\n\"SE\" = \"Svezia\";\n\"BR\" = \"Brasile\";\n\"FR\" = \"France\";\n\"ES\" = \"Spain\";\n\"DE\" = \"Germany\";\n</code></pre>\n\n<p>The files are simple UTF-8 encoded .properties files. Is it possible to execute this search and replace using bash?</p>\n\n<p>Thanks,</p>\n\n<p>Sean</p>\n"},{"tags":["bash","console","escaping"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13169836,"title":"Changing bash home position makes it run slowly. Any fix?","body":"<p>I'm having some trouble with bash. I'm changing my console's home position so I can reserve some rows in the top of the screen to print the current status of the script, and allow all the standard output to scroll in the lower part of the screen. This way, the upper lines showing the status doesn't get removed when the screen scrolls down.</p>\n\n<p>I'm doing this by using these lines to do so, where <code>&lt;RNUM&gt;</code> is the number of rows I need to freeze.</p>\n\n<pre><code> \\033[&lt;RNUM&gt;;r\n \\033[&lt;RNUM&gt;;1H\n</code></pre>\n\n<p>It works, however the console performance is highly lowered, it print lines really slowly (say it takes 4 times more to print the same amount of lines it usually prints).</p>\n\n<p>Does anyone have a fix for the performance issue? Am I using the correct codes? I wasn't able to find any information about this stuff on the net, and I don't recall where I got these codes years ago.</p>\n"},{"tags":["regex","bash","egrep","brainfuck"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13169507,"title":"Incorrect egrep command","body":"<p>The problem is the following:\nI have a document called brain.txt with lines of (brainfuck) code like this:</p>\n\n<pre><code>++++++++++[&gt;++++++++&gt;++++++&gt;+&lt;&lt;&lt;-]&gt;+++.&gt;+++++.&lt;-.+.&gt;&gt;. word\n</code></pre>\n\n<p>The <code>word</code> at the end can really be any word.\nHow can i filter the lines from the document where the length of every sequence of &lt; and > is uneven?</p>\n\n<p>I wrote the following command:</p>\n\n<pre><code>egrep -v '^(([^&lt;]*(&lt;&lt;)*[^&lt;]*)|([^&gt;]*(&gt;&gt;)*[^&gt;]*))*$' brain.txt\n</code></pre>\n\n<p>But it does not seem to work, can anyone explain me what is incorrect about this command please?</p>\n\n<p>EDIT:\nInstead of negating the even ocurrences, i used regex to match the uneven occurences, as Karoly Horvath mentioned. So I wrote the following command:</p>\n\n<pre><code>egrep '^(([^&lt;]*&lt;(&lt;&lt;)*[^&lt;]*)|([^&gt;]*&gt;(&gt;&gt;)*[^&gt;]*))*$' brain.txt\n</code></pre>\n\n<p>But for some reason i still match even lines.</p>\n"},{"tags":["regex","bash","grep"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":13169228,"title":"Every 7th character of the line has to be a +","body":"<p>The problem is the following:\nI have a document called brain.txt with lines of characters like this:</p>\n\n<pre><code>++++++++++[&gt;++++++++&gt;++++++&gt;+&lt;&lt;&lt;-]&gt;+++.&gt;+++++.&lt;-.+.&gt;&gt;. word\n</code></pre>\n\n<p>The <code>word</code> at the end can really be any word.\nHow can i filter the lines from the document where every 7th character is a plus?\nexample: <code>+......+......+......+..... word</code></p>\n\n<p>I wrote the following command:</p>\n\n<pre><code>egrep '^\\+(.{6}\\+)+.{,6}\\s' brain.txt\n</code></pre>\n\n<p>But it does not seem to work, can anyone explain me what is incorrect about this command please?</p>\n"},{"tags":["regex","linux","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13167683,"title":"Extract text from HTML based on table column via Shell Script","body":"<p>I need to write a shell script that reads an html file <code>sample.html</code> and extracts data from a table column, based on another table column. For example, this is the HTML code:</p>\n\n<pre><code>&lt;table style=\"BORDER-COLLAPSE: collapse\"\n  border=\"0\" bordercolor=\"#000000\"\n  cellpadding=\"3\" cellspacing=\"0\" width=\"100%\" height=\"200\"&gt;\n  &lt;tr &gt;\n    &lt;td class=\"fontStyleOne\" width=\"30%\"&gt;\n      &lt;div align=\"left\"&gt;\n      core6690.myserverdomain.com &lt;/div&gt;\n    &lt;/td&gt;\n    &lt;td  class=\"tdfontTwo\" width=\"30%\"&gt;\n      &lt;div class=\"label-styler\" align=\"left\"&gt;\n      admin&lt;/div&gt;\n    &lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr &gt;\n    &lt;td class=\"fontStyleOne\" width=\"30%\"&gt;\n      &lt;div align=\"left\"&gt;\n      core6691.myserverdomain.com &lt;/div&gt;\n    &lt;/td&gt;\n    &lt;td  class=\"tdfontTwo\" width=\"30%\"&gt;\n      &lt;div class=\"label-styler\" align=\"left\"&gt;\n      secondary &lt;/div&gt;\n    &lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr &gt;\n    &lt;td  class=\"fontStyleOne\" width=\"30%\"&gt;\n      &lt;div align=\"left\"&gt;\n      core6692.myserverdomain.com &lt;/div&gt;\n    &lt;/td&gt;\n    &lt;td  class=\"tdfontTwo\" width=\"30%\"&gt;\n      &lt;div class=\"label-styler\" align=\"left\"&gt;\n      primary &lt;/div&gt;\n    &lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Let's say that I want to determine what the URL for \"admin\" then the result would be core6690.myserverdomain.com; if I my input is \"primary\" then the output would be \"core6692.myserverdomain.com\" and so on... </p>\n\n<p>The HTML page has a lot more data, header tags, footer stuff, etc., but the important stuff that I am looking for is placed inside a table with the exact same structure I list in the code... except it has many more rows, not necessarily just 3 as in this example.</p>\n\n<p>I have seen related answers in this site that seg, grep, regular expressions, awk, and other tools however none of them are close enough to what I am looking for... plus I do not have much experience with any of the approaches as to modify and make them fit my needs.</p>\n\n<p>Any suggestions? Thanks in advance.</p>\n"},{"tags":["linux","bash","unix","date","script"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":13168463,"title":"Using `date` command to get previous, current and next month","body":"<p>I am using below to get previous, current and the next month under <code>Ubuntu</code> 11.04:</p>\n\n<pre><code>LAST_MONTH=`date +'%m' -d 'last month'`\nNEXT_MONTH=`date +'%m' -d 'next month'`\nTHIS_MONTH=`date +'%m' -d 'now'`\n</code></pre>\n\n<p>It works well until today, the last day of October, 2012 (2012-10-31)</p>\n\n<p>I get below result as of now:</p>\n\n<pre><code>$ date\nWed Oct 31 15:35:26 PDT 2012\n$ date +'%m' -d 'last month'\n10\n$ date +'%m' -d 'now'\n10\n$ $ date +'%m' -d 'next month'\n12\n</code></pre>\n\n<p>I suppose the outputs should be <code>9</code>,<code>10</code>,<code>11</code> respectively.</p>\n\n<p>Don't understand why <code>date</code> outputs behave like this. What should be a good way to get consistant <code>previous</code>, <code>current</code> and <code>next</code> month instead?</p>\n"},{"tags":["bash","unix","script","sed","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":50,"score":4,"question_id":13167117,"title":"How to add sum of any column value to last column of last record in a tab delimited file","body":"<p>I need to take sum of col2 and add the value to last column of last record. Please advice, how can we achive this using UNIX shell script.</p>\n\n<pre><code>E.g Input file:\nCol1    Col2    Col3    Col4\nabc 2   A   null\nbcd 3   B   null\nadf 4   C   null\n\nOutput file\nCol1    Col2    Col3    Col4\nabc 2   A   null\nbcd 3   B   null\nadf 4   C   9\n</code></pre>\n"},{"tags":["bash","shell","grep","find"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13167762,"title":"Write a shell script that find-greps files and outputs only those filenames","body":"<p>I want to search files in particular folder and content, then I want to print only the name of the files found.\nI have a command:</p>\n\n<pre><code>for file in $(find from | xargs grep 'move')\ndo \n   echo $file\ndone\n</code></pre>\n\n<p>It prints eg:</p>\n\n<pre><code>from/1.txt:move\nfrom/2.txt:some text\nmove\nfrom/3.txt:move text\n</code></pre>\n\n<p>But I want:</p>\n\n<pre><code>from/1.txt\nfrom/2.txt\nfrom/3.txt\n</code></pre>\n\n<p>I tried to cut that unnecessary part by using:</p>\n\n<pre><code>${file%:*}\n</code></pre>\n\n<p>this gives result:</p>\n\n<pre><code>from/1.txt\nfrom/2.txt\nmove\nfrom/3.txt\n</code></pre>\n\n<p>That 'move' is left.</p>\n"},{"tags":["linux","bash","shell","unix","scripting"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12523967,"title":"want delimited data from file which has headers footers,for data crunching to do performance analysis","body":"<p>I have a file which has header and footers and data is over multiple iteration (with headers and footers), I want to delimit the data and don't want headers footers. My objective is to data crunching in order to do performance analysis, its just that parsing piece is not going fine.</p>\n\n<p>Data in file:</p>\n\n<pre><code>   09:31:56 12/13/11 r/w I/O per second KBytes per sec  Svt ms     IOSz KB     \n              VVname      Cur  Avg  Max  Cur  Avg  Max Cur Avg   Cur   Avg Qlen\n               admin   r    0    0    0    0    0    0 0.0 0.0   0.0   0.0    -\n               admin   w   17   17   17   68   68   68 0.2 0.2   4.1   4.1    -\n               admin   t   17   17   17   68   68   68 0.2 0.2   4.1   4.1    0\n z0001_app0136_s.254   r    0    0    0    0    0    0 0.0 0.0   0.0   0.0    -\n z0001_app0136_s.254   w    0    0    0    0    0    0 0.0 0.0   0.0   0.0    -\n z0001_app0136_s.254   t    0    0    0    0    0    0 0.0 0.0   0.0   0.0    0\n....................\n....................\n\n-----------------------------------------------------------------------------------\n  Footer            394   r   87   87      4354 4354      2.7 2.7  49.9  49.9    -\n  Footer            394   w  126  126       906  906      0.1 0.1   7.2   7.2    -\n  Footer            394   t  213  213      5260 5260      1.2 1.2  24.7  24.7    0\n   09:32:57 12/13/11 r/w I/O per second KBytes per sec    Svt ms     IOSz KB     \n              VVname      Cur  Avg  Max  Cur  Avg  Max  Cur  Avg   Cur   Avg Qlen\n               admin   r    0    0    0    0    0    0  0.0  0.0   0.0   0.0    -\n               admin   w   32   24   32  130   99  130  0.2  0.2   4.1   4.1    -\n               admin   t   32   24   32  130   99  130  0.2  0.2   4.1   4.1    0\n z0001_app0136_s.254   r    0    0    0    0    0    0  0.0  0.0   0.0   0.0    -\n z0001_app0136_s.254   w    0    0    0    0    0    0  0.0  0.0   0.0   0.0    -\n</code></pre>\n\n<p>And data over in file goes over again and again.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":13,"score":-2,"question_id":13167458,"title":"Trying To Move Folders Based On Name and Date With a Bash Script","body":"<p>I have an archive of folders with subfolders labeled, 2012-08-29, 2012-10-10, 2012-09-01 etc., that I'm trying to archive with a bash script into folders monthly 2012-08, 2012-09, 2012-10, etc. </p>\n\n<p>I was initially archiving by week but found that it would be problematic when a week would have days from 2 different months as 1 or more of the days would be archived in the wrong month's folder.</p>\n\n<p>Any idea on trying to make this happen with a simple bash script?</p>\n"},{"tags":["bash","shell","cygwin"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13167000,"title":"$INPUT Ambiguous redirect","body":"<p>I wrote this script a while ago and it worked fine, but for some reason I am getting a \"Ambiguous redirect\" error message for line 11 in cygwin now.</p>\n\n<pre><code>#!/bin/bash\ncd 'my/file/path'\nINPUT= ./Students.csv\nOLDIFS=$IFS\nIFS=,\n[ ! -f $INPUT ] &amp;&amp; { echo \"$INPUT file not found\"; exit 99; }\nwhile read flname\ndo\n    cp Rubric.pdf ./Grades/$flname_rubric.PDF\n\ndone &lt; $INPUT\nIFS=$OLDIFS\n</code></pre>\n\n<p>What am I doing wrong here?</p>\n"},{"tags":["linux","bash","shell","bash4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":13065406,"title":"pattern-matching a comma delimited digits as string","body":"<p>How do I do a pattern-match for this: 4,7,9....n - a comma delimited string of digits as user input? I'm using case statement for that and I believe, case rather use  pattern-matching than regex. This is what user gets:</p>\n\n<pre><code>Do you want to delete any of these?\n     [ 1 ]   launch-EOsgR4\n     [ 2 ]   launch-SWZQdJ\n     [ 3 ]   launch-tHAdIm\n     [ 4 ]   launchd-235.z4KTVx\n     [ 5 ]   launchd-257.nM2wOZ\n     [ 6 ]   progress.log\n     [ 7 ]   ssh-8pISGGnlZ5\n----------------------------------------\nSingle: 4; Multiple: 2,3; Range: 4..7\na to delete all; n to cancel and exit\n----------------------------------------\n( [1][2][3][4][5][6][7] | a | n ): \n</code></pre>\n\n<p>And, as the showed above, users got the option for a single number (easy), a range: 6..9 (also not so hard) or multiple: 3,5,6 (find a bit hard with 'single number' option). This is what I've done so far....</p>\n\n<pre><code>#!/usr/bin/env bash\n\nNL=$(echo -e \"\\033[0;0m\")\nBD=$(echo -e \"\\033[0;1m\")\nERR=$(printf \"\\n%-25s\" \"$(echo -e \"\\033[1;31m[ ERROR ]\\033[0m\")\")\nWRN=$(printf \"\\n%-25s\" \"$(echo -e \"\\033[1;33m[ WARN  ]\\033[0m\")\")\n\n\nls /tmp | tail -n9 &gt; list_of_file\ns=$(printf \"%-40s\" \"-\")\n\nfunction lstFile()\n{\n    local file=$1\n    if [[ -s $file ]]\n    then\n        LINES=( $(cat $file) ); echo \"\"\n        for ix in ${!LINES[@]}\n        do\n            printf \"%-5s%-14s%s\\n\" \"\" \"${BD}[ $(( ix+1 )) ]\" \"${LINES[$ix]}${NL}\"\n        done\n   else\n       exit 0\n   fi\n\n   LST=$(echo ${!LINES[@]}|awk -v ORS=']' '{for (i=1; i&lt;=NF; i++) print \"[\"($i+1)}')\n}\n\nfunction delOpt()\n{\n    echo \"${s// /-}\"\n    echo -e \"Single: 4; Multiple: 2,3; Range: 4..7\"\n    echo -e \"${BD}a${NL} to delete all; ${BD}n${NL} to cancel and exit\"\n    echo \"${s// /-}\"\n    echo -n \"( $1 | a | n ): \"\n}\n\necho -e \"\\nDo you want to delete any of these?\"\nlstFile list_of_file\n\nANS=\nuntil [[ \"${ANS}\" == \"N\" || \"${ANS}\" == \"n\" || \"${ANS}\" == \"e\" ]]\ndo\n    delOpt $LST\n    read ANS &amp;&amp; echo \"\"\n\n    ANS=$( tr '[:upper:]' '[:lower:]' &lt;&lt;&lt; \"$ANS\" )\n    [[ -n $(echo $ANS|grep -E -w \"^[aen0-9,]{1,}\") ]] &amp;&amp; : || ANS=\"X\"\n\ncase ${ANS} in\n    [0-9]..[0-9] )\n\n    for ix in $(eval echo \\{$ANS\\}); do\n        LINE=${LINES[(( $ix-1 ))]}\n        echo -e \"Deleting:  ${BD}${LINE}${NL}\"\n        sed -i -c \"/$LINE/d\" list_of_file\n    done\n    unset LINE\n    lstFile list_of_file\n    ;;\n\n    [0-9,]* )\n    ANS=$(echo $ANS | awk -F' |,' '{for (i=1; i&lt;=NF; i++) print $i}')\n    for ix in $ANS; do\n        if [[ $ix -gt ${#LINES[@]} ]]\n        then\n            echo  \"${ERR}Out-of-range value: ${bd}$ix${NL}\"\n        else\n            LINE=${LINES[(( $ix-1 ))]}\n            echo -e \"Deleting:  ${BD}${LINE}${NL}\"\n            sed -i -c \"/$LINE/d\" list_of_file &gt; /dev/null 2&gt;&amp;1\n        fi\n    done\n    unset LINE\n    lstFile list_of_file\n    ;;\n\n    a )              \n    for ix in ${LINES[@]}; do\n        echo \"Deleting:  ${BD}${ix}${NL}\"\n        sed -i -c \"/$ix/d\" list_of_file\n    done\n    exit 0\n    ;;\n\n    n|e ) exit 0\n    ;;\n\n    * ) echo \"${WRN}Invalid entry! Should be digit or ${BD}a${NL} for All.\"\n    printf \"%-14s%s\\n\\n\" \"\" \"Otherwise, enter ${UL}n${NL}o or ${UL}e${NL}xit to quit\"\n    ;;\nesac\ndone\n</code></pre>\n\n<p>which is working fine (sort of) but there are some race conditions. e.g.</p>\n\n<pre><code>2,d,7 - throws in: bad array subscript\n6..10 - throws in: (( 6..11-1 )): syntax error: invalid arithmetic operator (error token is \"..11-1 ))\")\nbut, \n6..9  - throws in: first RE may not be empty\n</code></pre>\n\n<p>Is there any way to have separate options to catch 'single' and 'multiple' number input? Also, any suggestions on overall improvement?</p>\n\n<p>Any help greatly appreciated. Cheers!!</p>\n\n<p><hr>\n<strong>Update: 31/10</strong><br><br>\nIt's working now. Thanks to Alepac for the suggestion.<br>\nJust in case, if someone else is also looking for something similar, I'm putting it in here. As per my original code, this function will delete the line(s) from a file: <code>list_of_file</code> according to the user input.</p>\n\n<pre><code>function chkINPUT()\n{\n    local I_PUT=( \"$@\" )\n    local MAX=${#LINES[@]}\n    #IFS=', ' read -a SPLITTED &lt;&lt;&lt; \"$I_PUT\"\n    local SPLITTED=( $(echo \"${I_PUT[@]}\" | awk -F',| ' '{for (i=1; i&lt;=NF; i++) print $i}') )\n\n    for idx in \"${!SPLITTED[@]}\"\n    do\n        SPLTD=${SPLITTED[idx]}\n\n        # Check if it's a range [4..7]\n        if [[ \"${SPLTD}\" =~ ^[0-9]{1,2}\\.\\.[0-9]{1,2}$ ]]\n        then\n            for ix in $(eval echo \\{$SPLTD\\}); do\n                if (( ${ix} &lt;= $MAX )); then\n                    LINE=${LINES[(( ix-1 ))]}\n                    echo -e \"Deleting:  ${BD}${LINE}${NL}\"\n                    sed -i -e \"/$LINE/d\" list_of_file 2&gt;&amp;1 &gt; /dev/null\n                    unset LINE\n                else\n                    echo -e \"\\t${ix} =&gt; Out of range\"\n                    break\n                fi\n            done\n\n        # Check if it's a single input\n        elif [[ \"${SPLTD}\" =~ ^[[:digit:]]+$ ]]\n        then\n            if (( ${SPLTD} &lt;= $MAX )); then\n                LINE=${LINES[(( SPLTD-1 ))]}\n                echo -e \"Deleting:  ${BD}${LINE}${NL}\"\n                sed -i -e \"/$LINE/d\" list_of_file 2&gt;&amp;1 &gt; /dev/null\n                unset LINE\n            else\n                echo  \"${ERR}Out-of-range value: ${bd}$SPLTD${NL}\"\n            fi\n\n        else\n            echo  \"${ERR}Invalid entry: ${bd}$SPLTD${NL}; must be an integer from the list!\"\n        fi\n    done\n}\n</code></pre>\n\n<p>and then, use it like this:</p>\n\n<pre><code>ANS= \nuntil [[ \"${ANS}\" == \"N\" || \"${ANS}\" == \"n\" || \"${ANS}\" == \"e\" ]] \ndo\n    delOpt $LST\n    read ANS &amp;&amp; echo \"\"\n    ANS=$( tr '[:upper:]' '[:lower:]' &lt;&lt;&lt; \"$ANS\" )\n\n    case ${ANS} in\n        [0-9]* )\n        chkINPUT ${ANS}\n        ;;    \n</code></pre>\n\n<p>Hope it helps. Cheers!!</p>\n"},{"tags":["linux","bash","ubuntu","centos"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13166619,"title":"Why these argument parsing errors?","body":"<p>I would like to write a script that requires <code>-c</code> and <code>-f</code> where each requires an option.</p>\n\n<p>When I run my script below I get some unexpected errors:</p>\n\n<pre><code>$ ./user.sh -c\n./user.sh: option requires an argument -- c\n\nUsage: user.sh -c username -f filename\n   -c username\n   -f SSH public key\n\n$ ./user.sh -c gg\nError: You have not given a filename.\n</code></pre>\n\n<p>In the first case, I would have liked it said I am missing the option for <code>-c</code> and in the second case I would have liked it said I am missing <code>-f</code>.</p>\n\n<p><strong>Question</strong></p>\n\n<p>How do I make such error handing, and what am I doing wrong?</p>\n\n<p><strong>user.sh</strong></p>\n\n<pre><code>#!/bin/bash                                                                                             \n\nusage () {\n    echo \"Usage: user.sh -c username -f filename\"\n    echo \"   -c username\"\n    echo \"   -f SSH public key\"\n    echo \"\"\n}\n\nif ! [ \"$*\"  ]; then\n    usage\n    exit 1\nfi\n\nwhile getopts \"c:f:\" opt; do\n    case $opt in\n        c) user=$OPTARG;;\n        f) filename=$OPTARG;;\n        \\?)\n            echo\n            usage\n            exit 1;;\n        *) echo \"Internal error: Unknown option.\";;\n    esac\ndone\n\nif ! [ $filename ]; then\n    echo \"Error: You have not given a filename.\"\n    exit 1\nfi\n\nif ! [ $user ]; then\n    echo \"Error: You have not given an username.\"\n    exit 1\nfi\n</code></pre>\n"},{"tags":["linux","bash","replace"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13146826,"title":"linux bash replace placeholder with unknown text which can contain any characters","body":"<p>If I want to replace for example the placeholder <code>{{VALUE}}</code> with another string which can contain any characters, what's the best way to do it?</p>\n\n<p>Using <code>sed s/{{VALUE}}/$(value)/g</code> might fail if <code>$(value)</code> contains a slash...</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":44,"score":-4,"question_id":13162981,"title":"Start program/functions in BASH","body":"<p>How to run a sh file or function to the end there was nothing on display? \nHow to run a program/funtion that was not the end in the terminal.</p>\n\n<p>Main terminal after logging</p>\n\n<pre><code>-------------------------\nroot@charlie:~#\nroot@charlie:~#_\n-------------------------\n</code></pre>\n\n<p>Main terminal before starting go.sh</p>\n\n<pre><code>-------------------------\nroot@charlie:~#\nroot@charlie:~# go.sh_\n-------------------------\n</code></pre>\n\n<p>Main terminal work go.sh</p>\n\n<pre><code>-------------------------\nroot@charlie:~#\nroot@charlie:~# go.sh\n....................................\n....................................\nexit\n-------------------------\n</code></pre>\n\n<p>Main terminal after the end (terminal is clean)</p>\n\n<pre><code>-------------------------\nroot@charlie:~#\nroot@charlie:~# go.sh\nroot@charlie:~#_\n-------------------------\n</code></pre>\n\n<p>Advise anyone? Thank you.<code>enter code here</code></p>\n"},{"tags":["bash","hex"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":57,"score":0,"question_id":13160309,"title":"Conversion hex string into ascii in bash command line","body":"<p>I have a lot of this kind of string and I want to find a command to convert it in ascii, I tried with <code>echo -e</code> and <code>od</code>, but it did not work.</p>\n\n<pre><code>0xA7.0x9B.0x46.0x8D.0x1E.0x52.0xA7.0x9B.0x7B.0x31.0xD2\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13162866,"title":"Bash For Loop: Decrementing starting from a variable","body":"<p>I've done some searching and this looks like it should work, and it isn't, and I'm stumped.</p>\n\n<p>I'm on a CentOS box and want to basically shift all backups 1 folder up, to a limit of like 60 backups, and that limit is set in a variable $BKPLIMIT.</p>\n\n<pre><code>for (( i=$BKPLIMIT; i==0; i-- )); do\n    j=$(($i-1))\n    if [ -d \"backup.$j\" ]; then\n        echo \"$i $j backup.$i backup.$j\"\n        #mv \"backup.$j\" \"backup.$i\"\n    fi\ndone\n</code></pre>\n\n<p>It looks, from my debugging, the script is not entering the loop.  I is stumped :( I've also tried doing \"$(seq $BKPLIMIT 0) which didn't work.</p>\n"},{"tags":["linux","bash","unix","amazon-ec2"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13148438,"title":"How to view the bash_history for root?","body":"<p>I have a linux box on amazon's aws EC2. I can view the user's bash_history here:</p>\n\n<pre><code>/home/ec2-user/.bash_history\n</code></pre>\n\n<p>However when I root in:</p>\n\n<pre><code>sudo -s\n</code></pre>\n\n<p>I do not get the root's bash_history. How can I view/find the bash_history for the admin user?</p>\n\n<p>Thanks,\nBrett</p>\n"},{"tags":["html","bash","html-escape-characters"],"answer_count":5,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1259,"score":2,"question_id":5929492,"title":"Bash script to convert from HTML entities to characters","body":"<p>I'm looking for a way to turn this:</p>\n\n<pre><code>hello &amp;lt; world\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>hello &lt; world\n</code></pre>\n\n<p>I could use sed with a bunch of substitutions, but isn't there a tool that will do that for me in one go?</p>\n"},{"tags":["arrays","bash","loops","screen"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13151527,"title":"Looping an array index into a screen session","body":"<pre><code>    #!/bin/bash\n\n    IFS=$'\\n'\n    fortune_lines=($(fortune | fold -w 30))\n    Screen_Session=$\"{mainscreen}\"\n    Screen_OneLiner=$(screen -p 0 -S ${Screen_Session} -X stuff \"`printf \"say   ${fortune_lines[@]}\\r\"`\")\n\n    for var in \"${Screen_OneLiner[@]}\"\n      do\n        echo -e \"${var}\"\n    done\n</code></pre>\n\n<p>The above script only prints out line 1 one of </p>\n\n<pre><code>     IFS=$'\\n'\n    fortune_lines=($(fortune | fold -w 30))\n</code></pre>\n\n<p>Instead of cycling through the whole index of \"fortune_lines\" Not sure how to make this work.\nAny ideas?</p>\n\n<p>FYI\nI am only using </p>\n\n<pre><code>   \"echo -e\"\n</code></pre>\n\n<p>to troubleshoot this script.</p>\n"},{"tags":["bash","script","find","bundle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12281712,"title":"How to use find to bundle files","body":"<p>I'm struggling with this task:</p>\n\n<blockquote>\n  <p>Write a script that takes as input a directory (path) name  and a\n  filename base (such as \".\", \"*.txt\", etc). The script shall search the\n  given directory tree, find all files matching the given filename, and\n  bundle them into a single file. Executing the given file as a script\n  should return the original files.</p>\n</blockquote>\n\n<p>Can anyone help me?</p>\n\n<p>First i tried to do the find part like this:</p>\n\n<pre><code>#!/bin/bash\n\nfilebase=$2\npath=$1\n\nfind $path \\( -name $base \\)\n</code></pre>\n\n<p>Then i found this code for bundle, but I dont know how to combine them.</p>\n\n<pre><code>for i in $@; do\n echo \"echo unpacking file $i\"\n echo \"cat &gt; $i &lt;&lt;EOF\"\n cat $i\n echo \"EOF\"\n done\n</code></pre>\n"},{"tags":["php","bash","ansi","xterm"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":54,"score":3,"question_id":13131162,"title":"Line wrapping issues in xterm","body":"<p>I am writing a program that prints colored lines, and the more I do with it the more I find myself working around line wrapping issues that come up.</p>\n\n<p>It is a sort of terminal written in php, here is the prompt:</p>\n\n<pre><code>$return = readline(\"\\033[44m\\033[1;37m{$this-&gt;text}&gt;&gt;\\033[0m \");\n</code></pre>\n\n<p>and scrolling through history, the non-printing characters play havoc on everything.</p>\n\n<p>If I try to add escapes</p>\n\n<pre><code>$return = readline(\"\\[\\033[44m\\033[1;37m\\]{$this-&gt;text}&gt;&gt;\\[\\033[0m\\] \");\n</code></pre>\n\n<p>then it prints the brackets...even if I add double backslashes.</p>\n\n<pre><code>\\[\\][timer]&gt;&gt;\\[\\] \n</code></pre>\n\n<p>I find the same thing for echo -e, I am really not sure whats going on.</p>\n\n<p>Lastly, if I modify PS1 it works just fine.</p>\n\n<pre><code>[mike@crest ~]$ export PS1=\"\\[\\033[44m\\033[1;37m\\][timer]&gt;&gt;\\[\\033[0m\\] \"\n[timer]&gt;&gt;\n</code></pre>\n\n<p>What am I missing here?</p>\n\n<p>Edit: the coloring/display is not the problem. The problem is that bash will have line wrapping issues when invisible characters are printed without escapes...and when I add the escapes they are printed in plain text under all circumstances but PS1, and I'm not sure what the difference is, how to get it working in PHP.</p>\n"},{"tags":["bash","directory","exec","cp","mv"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13157870,"title":"find directories with exec conditional copy & delete","body":"<p>What I'm trying to accomplish is moving directories from one place to another. A <code>mv</code> however fails when the target already exists, and therefor the delete of the source also fails. So I'm trying to use <code>cp &amp;&amp; rm</code> for this:</p>\n\n<pre><code>find /home/user_a -path /home/user_a/* -type d -exec [ cp -Rf {} /home/user_b &amp;&amp; rm -rf {} ] \\;\n</code></pre>\n\n<p>This fails with a <code>missing argument for exec</code>. Where am I wrong?</p>\n"},{"tags":["linux","bash","unix"],"answer_count":4,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":4757,"score":6,"question_id":5161193,"title":"Bash script that kills a child process after a given timeout","body":"<p>I have a bash script that launches a child process that crashes (actually, hangs) from time to time and with no apparent reason (closed source, so there isn't much I can do about it). As a result, I would like to be able to launch this process for a given amount of time, and kill it if it did not return successfully after a given amount of time.</p>\n\n<p>Is there a <strong>simple</strong> and <strong>robust</strong> way to achieve that using bash? </p>\n\n<p>P.S.: tell me if this question is better suited to serverfault or superuser.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13151031,"title":"How to expand environment variable in bash function definition?","body":"<p>I am trying to so something like this in my bashrc </p>\n\n<pre><code>SERVER=abc.com\ngeta() { scp ${SERVER}:$1 . ;}\n\nSERVER=xyz.com\ngetx() { scp ${SERVER}:$1 . ;}\n\ndeclare -f geta getx\ngeta () \n{ \n    scp ${SERVER}:$1 .\n}\ngetx () \n{ \n    scp ${SERVER}:$1 .\n}\n</code></pre>\n\n<p>What I want geta and getx to be set to is </p>\n\n<pre><code>geta () { scp abc.com:$1 . }\ngetx () { scp xyz.com:$1 . }\n</code></pre>\n\n<p>Is there a way to force variable expansion in function definitions? </p>\n\n<p>Note: For clarification I changed the example</p>\n"},{"tags":["bash","string","sed","escaping"],"answer_count":5,"favorite_count":17,"up_vote_count":37,"down_vote_count":0,"view_count":33085,"score":37,"question_id":407523,"title":"Escape a string for sed search pattern","body":"<p>In my <code>bash</code> script I have an external (received from user) string, which I should use in <code>sed</code> pattern.</p>\n\n<pre><code>REPLACE=\"&lt;funny characters here&gt;\"\nsed \"s/KEYWORD/$REPLACE/g\"\n</code></pre>\n\n<p>How can I escape the <code>$REPLACE</code> string so it would be safely accepted by <code>sed</code> as a literal replacement?</p>\n\n<p><strong>NOTE:</strong> The <code>KEYWORD</code> is a dumb substring with no matches etc. It is not supplied by user.</p>\n"},{"tags":["bash","process"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13157626,"title":"Running processes simultaneously, Bash","body":"<p>I would like to run <code>n</code> processes (in my case simulations) simultaneously, using bash.\nRight now this is what I'm running:</p>\n\n<pre><code>for file in $ini/SAN*.ini;\ndo\n    echo \"Running $file...\";\n    temp=$(basename $file .ini)\n    mosrun -G opp_run -r 0 -u Cmdenv -n ..:../../src -l ../../src/inet SAN.ini &gt; $outputs/$temp.out;\ndone\n</code></pre>\n\n<p>Problem is, the loop only progresses to the next iteration after the simulation is done. Any suggestions? Thanks!</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":2,"view_count":39,"score":-2,"question_id":13152605,"title":"Runtime of the bashscript how to i access the terminal control?","body":"<p>I can create the bashscript and runtime of the bashscript i can create a one</p>\n\n<p>cat file and if the file is created and delete cat file in terminal</p>\n\n<p>using bashscript runtime</p>\n\n<p>I run the script and script output is access the terminal  operation like create the cat file and delete the file and I close the script after terminal is old stage.</p>\n\n<p>I run the script</p>\n\n<p>$> bash bash.sh</p>\n\n<p>Access the terminal</p>\n\n<p>cat>name</p>\n\n<p>1</p>\n\n<p>2</p>\n\n<p>3</p>\n\n<p>cat name</p>\n\n<p>1</p>\n\n<p>2</p>\n\n<p>3</p>\n\n<p>rm name</p>\n\n<p>close the script</p>\n\n<p>$> -</p>\n"},{"tags":["xml","bash","search","printing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13147630,"title":"print XML tag with bash","body":"<p>I am trying to figure out how to use bash to print a certain line in a few XML files.  These files are located in several folders.  The line I need to print is an exact XML tag called \n<code>&lt;name&gt;&lt;/name&gt;</code>.  </p>\n\n<p>My objectives:</p>\n\n<ul>\n<li>search through folders</li>\n<li>print folder location on one line</li>\n<li>print file name on second line</li>\n<li><p>print what is between </p>\n\n<p></p></li>\n</ul>\n\n<p>I only need the name and not the full path and I do need it to add to a .txt file called whatever.  Ive tried with bash but Im stuck on this one.</p>\n\n<p>EDIT:\nI also forgot to mention that this is a piece being added to some other shell script so Im unsure if I can get grep to work within it.</p>\n"},{"tags":["bash","shell","cron"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13156550,"title":"shell script adjusment - not working fine with cron","body":"<p>i used this bash script to check services running or not if running  the script will exit if else it will run another script which gona execute some commands \nand once done it will be exit \nmy issue is when i run my script manuly its works fine but when i run it with cron its not running and not executed correctly here is my script </p>\n\n<pre><code>  #!/bin/sh\n  SERVICE='loop2.sh'\n\n  if ps ax | grep -v grep | grep $SERVICE &gt; /dev/null\n then\n     echo \"$SERVICE service running, everything is fine\"\n else\n /home//www/loop2.sh\n fi\n</code></pre>\n\n<p>any adjust to my script to be working fine in cron</p>\n"},{"tags":["bash","shell","ubuntu","cmd"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":101,"score":2,"question_id":13153101,"title":"syntax error near unexpected token `('","body":"<p>I am new to writing scripts, in ubuntu.</p>\n\n<pre><code>FOR /F \"tokens=2 skip=4\" %%G IN ('svn info --revision HEAD') DO...\n</code></pre>\n\n<p>I get the following error -- \"syntax error near unexpected token `('\". Can someone tell me why I get this error?</p>\n"},{"tags":["bash","scripting","sed"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13149589,"title":"How to avoid having to add '\\n' with sed(1)","body":"<p>I want to insert a big chunk of code using a bash script.</p>\n\n<p>This is how I got it to work using sed(1);</p>\n\n<pre><code>$ sed \"/);/i\\\n\\ \\ \\ \\ 'doctrine' =&gt; array(\\n\\\n        'driver' =&gt; array(\\n\\\n            __NAMESPACE__ . '_driver' =&gt; array(\\n\\\n                'class' =&gt; 'Doctrine\\ORM\\Mapping\\Driver\\AnnotationDriver',\\n\\\n                'cache' =&gt; 'array',\\n\\\n                'paths' =&gt; array(__DIR__ . '\\../src/' . __NAMESPACE__ . '/Entity')\\n\\\n            ),\\n\\\n            'orm_default' =&gt; array(\\n\\\n                'drivers' =&gt; array(\\n\\\n                    __NAMESPACE__ . '\\Entity' =&gt; __NAMESPACE__ . '_driver'\\n\\\n                )\\n\\\n            )\\n\\\n        )\\n\\\n    ),\\n\n\" config/autoload/local.php;\n</code></pre>\n\n<p>Note: I had to add \\n and \\ at the end of each line in order to make it work.</p>\n\n<p>Is there a way to \"not\" have to do that? To insert plain text? Perhaps a different command?</p>\n\n<p><strong>Edit: my question is how to insert the text without having to add all the backslashes and newlines.</strong></p>\n\n<p>This is the text I need to insert:</p>\n\n<blockquote>\n<pre><code>'doctrine' =&gt; array(\n    'driver' =&gt; array(\n        __NAMESPACE__ . '_driver' =&gt; array(\n            'class' =&gt; 'Doctrine\\ORM\\Mapping\\Driver\\AnnotationDriver',\n            'cache' =&gt; 'array',\n            'paths' =&gt; array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')\n        ),\n        'orm_default' =&gt; array(\n            'drivers' =&gt; array(\n                __NAMESPACE__ . '\\Entity' =&gt; __NAMESPACE__ . '_driver'\n            )\n        )\n    )\n)\n</code></pre>\n</blockquote>\n"},{"tags":["python","bash"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":13150345,"title":"Extract words from a file, then list files along with line number that contain those words","body":"<p>I have a file called Strings.h, that I use to localize an app I have. I want to search through all of my class files, and find out if and where I am using each string, and output the classes and line numbers for each string.</p>\n\n<p>My thought is to use Python, but maybe that's the wrong tool for the job. Also, I have a basic algorithm, but I worry it will take too long to run. Can you write this script to do what I want, or even just suggest a better algorithm?</p>\n\n<p>Strings.h looks like this:</p>\n\n<pre><code>#import \"NonLocalizedStrings.h\"\n\n#pragma mark Coordinate Behavior Strings\n#define LATITUDE_WORD NSLocalizedString(@\"Latitude\", @\"used in coordinate behaviors\")\n#define LONGITUDE_WORD NSLocalizedString(@\"Longitude\", @\"used in coordinate behaviors\")\n#define DEGREES_WORD NSLocalizedString(@\"Degrees\", @\"used in coordinate behaviors\")\n#define MINUTES_WORD NSLocalizedString(@\"Minutes\", @\"Used in coordiante behaviors\")\n#define SECONDS_WORD NSLocalizedString(@\"Seconds\", @\"Used in DMSBehavior.m\")\n\n...\n</code></pre>\n\n<p>The script should take each line that starts with #define, and then make a list of the word that appears after #define (e.g.) LATITUDE_WORD</p>\n\n<p>The pseudocode might be:</p>\n\n<pre><code>file = strings.h\nfor line in file:\n  extract word after #define\n  search_words.push(word) \n\nprint search_words\n[LATITUDE_WORD, LONGITUDE_WORD, DEGREES_WORD, MINUTES_WORD, SECONDS WORD]\n</code></pre>\n\n<p>After I have the list of words, my pseudocode is something like:</p>\n\n<pre><code>found_words = {}\nfor word in words:\n   found_words[word] = []\n\nfor file in files:\n  for line in file:\n    for word in search_words:\n      if line contains word:\n        found_words[word].push((filename, linenumber))   \n\nprint found_words\n</code></pre>\n\n<p>So, found words would look something like:</p>\n\n<pre><code> {\n   LATITUDE_WORD: [\n                    (foo.m, 42),\n                    (bar.m, 132) \n                  ],\n   LONGITUDE_WORD: [\n                    (baz.m, 22),\n                    (bim.m, 112) \n                  ],\n\n }\n</code></pre>\n"},{"tags":["bash","shell","if-statement"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13143969,"title":"Equality test in `if` command returning the error message \"no such file or directory\"","body":"<p>I'm writing a shell script and I'm doing</p>\n\n<pre><code>if [\"$item0\" == \"$item1\"]\nthen\necho match\nfi\n</code></pre>\n\n<p>but it's giving the error message \"No such file or directory\" on the line when run. The items above do contain file paths if that helps.</p>\n"},{"tags":["bash","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13150510,"title":"grep some expresion from some logs and only select the ones with positive results","body":"<p>I'm using 'zgrep' to find some ip's from some apache/nginx logs and I need a way to sort only positive results.</p>\n\n<p>I'm using this:</p>\n\n<pre><code>for i in `cat /var/tmp/list_of_ip.txt`; do\n    zgrep -arcH $i /webstats/some_website/*/*.2012-10-1{7..9}* ;\ndone\n</code></pre>\n\n<p>There are lots of log files. I just want to know which ones return positive results.</p>\n\n<p>Most of them will print <code>0</code> at the end indicating that there were nothing found, and some will print the number of matches. How can I select only those and output results in a file ?</p>\n\n<p>Thanks.</p>\n"},{"tags":["arrays","bash","function","loops","screen"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":24,"score":2,"question_id":13150735,"title":"Bash array as argument inside of screen","body":"<p>The below code is is not working  as I expect it to. I might be because I am doing this all wrong but I think it may be a quoting issue. </p>\n\n<pre><code>    #!/bin/bash \n\n    IFS=$'\\n' \n    fortune_lines=($(fortune | fold -w 30))\n    Screen_Session=$(mainscreen)\n    Screen_OneLiner=$(screen -p 0 -S ${Screen_Session} -X stuff \"`printf \"say   ${fortune_lines[@]}\\r\"`\")\n\n    for var in \"${Screen_OneLiner[@]}\"\n      do\n        echo \"${var}\"\n    done\n</code></pre>\n\n<p>I think I am not quoting something correctly because when I attempt to execute this. I get..</p>\n\n<pre><code>    line 5: mainscreen: command not found\n    [screen is terminating\n</code></pre>\n\n<p>Essentially I am attempting to add this function (that works)</p>\n\n<pre><code>    IFS=$'\\n' \n    fortune_lines=($(fortune | fold -w 30))\n</code></pre>\n\n<p>To this screen one liner</p>\n\n<pre><code>   screen -p 0 -S ${Screen_Session} -X stuff \"`printf \"say   ${fortune_lines[@]}\\r\"`\"\n</code></pre>\n\n<p>Then have it loop the array</p>\n\n<pre><code>    for var in \"${ArrayName[@]}\"\n   do\n      echo \"${var}\"\n\n   done\n</code></pre>\n\n<p>So I am not sure how far I am away (in code) to what I am trying to do. Any help would be great. </p>\n"},{"tags":["linux","bash","centos","redhat"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13150782,"title":"How to rebuild the ISO?","body":"<p>I need to modify an linux bootable ISO. For which I am mounting the ISO in some dir then I am copying the content of ISO into another dir. Then I am modifying the some RPMs. After that I am trying to rebuild the ISO using below commands:</p>\n\n<p><strong>chmod u+w $content_path/isolinux/*</strong></p>\n\n<p><strong>cd $content_path/</strong></p>\n\n<p><strong>mkisofs -r -T -J -V '$label' -b isolinux/isolinux.bin -c isolinux/boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table -v -o $iso ./</strong></p>\n\n<p>But it is resulting in unexpected Output. I think linking is not proper with ISO content. Please help.</p>\n"},{"tags":["git","bash","unix","ftp"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13150724,"title":"Push a git branch to a remote server which has not got git installed","body":"<p>I have a shared hosting account which I have both SSH and FTP access to, hover I do not have root access, and the server does not have git installed.\nI am curious as to how feasible it is to set up a watcher script that monitors whether I have committed/merged to branch master (locally), and upload the master branch via FTP to the remote server.</p>\n\n<p>I could do it manually (without the watcher script), perhaps with a bash script (I'm running Linux Mint) if creating a watcher is too complex, but I have no idea how to do it either way.</p>\n"},{"tags":["regex","linux","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13150411,"title":"Why BASH_REMATCH doesn't work on my computer?","body":"<p>The code is like this:</p>\n\n<pre><code>#!/bin/bash\nif [[ foobarbletch =~ 'foo(bar)bl(.*)' ]]\n then\n     echo The regex matches!\n     echo $BASH_REMATCH      \n     echo ${BASH_REMATCH[1]} \n     echo ${BASH_REMATCH[2]} \n fi\n</code></pre>\n\n<p>When I try to run it, it dosn't display anything..</p>\n\n<pre><code>bash-3.2$ bash --version\nGNU bash, version 3.2.48(1)-release (x86_64-apple-darwin12)\nCopyright (C) 2007 Free Software Foundation, Inc.\nbash-3.2$ /bin/bash test_rematch.bash\nbash-3.2$ \n</code></pre>\n\n<p>Does anyone have ideas about this? Thanks!</p>\n"},{"tags":["bash","tcl","expect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13125183,"title":"Expect returns same value","body":"<p>I need to be able to return a different password after the first one fails which will be the second time the prompt asks for the same expect value \"Password:\"    </p>\n\n<pre><code>(expect -c \"\n\n #exp_internal 1\n  set passwords {PASS1 PASS2}\n  set index 0 \n  set timeout 20\n  # Start the session with the input variable and the rest of the hostname\n  spawn telnet $host\n  set timeout 3 \n  expect {\n-ex     \\\"Password:\\\" {\n            send \\\"[lindex $passwords $index]\\r\\\"\n            incr index  \n exp_continue;\n  }\n  }\n</code></pre>\n\n<p>I just can't get it to work. It looks like there is nothing in the <code>lindex</code> send:</p>\n\n<pre><code> -ex     \"Password:\" {\n    send \"[lindex  ]\\r\"\n</code></pre>\n"},{"tags":["linux","bash","prompt"],"answer_count":14,"favorite_count":25,"up_vote_count":33,"down_vote_count":0,"view_count":5650,"score":33,"question_id":103857,"title":"What is your favorite Bash prompt?","body":"<p>What are some elements in your favorite bash prompt?  </p>\n\n<p>I like to have an indicator of the success of the most recent command, like so  (in .bashrc):</p>\n\n<pre><code>function exitstatus {\n\n    EXITSTATUS=\"$?\"\n    BOLD=\"\\[\\033[1m\\]\"\n    RED=\"\\[\\033[1;31m\\]\"\n    GREEN=\"\\[\\e[32;1m\\]\"\n    BLUE=\"\\[\\e[34;1m\\]\"\n    OFF=\"\\[\\033[m\\]\"\n\n    PROMPT=\"[\\u@\\h ${BLUE}\\W${OFF}\"\n\n    if [ \"${EXITSTATUS}\" -eq 0 ]\n    then\n       PS1=\"${PROMPT} ${BOLD}${GREEN}:)${OFF} ]\\$ \"\n    else\n       PS1=\"${PROMPT} ${BOLD}${RED}:(${OFF} ]\\$ \"\n    fi\n\n    PS2=\"${BOLD}&gt;${OFF} \"\n}\n\nPROMPT_COMMAND=exitstatus\n</code></pre>\n"},{"tags":["bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13148617,"title":"Bash: can't create lower case out of script argument?","body":"<pre><code>#!/bin/sh\nvar=\"$1\";\nOUTPUT=$(echo ${$var,,});\necho $OUTPUT\n</code></pre>\n\n<p>I tried every possible combination, including escaping certain characters.</p>\n\n<p>I just cant get shell to output my script argument lower cased.</p>\n\n<p>Error:</p>\n\n<pre><code>createmodule.sh: 26: createmodule.sh: Bad substitution\n</code></pre>\n\n<p>Why is this?</p>\n"},{"tags":["bash","cron","debian"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":13096921,"title":"Running debian bash file as cron job","body":"<p>I can't seem to run a simple bash file as a cron job that runs once a minute.</p>\n\n<pre><code>#!/bin/bash \n\nNET_INTERFACE=eth0\n\nCURRENT_IP=`/sbin/ifconfig $NET_INTERFACE | sed -n \"/inet addr:.*255.255.25[0-5].[0-9]/{s/.*inet addr://; s/ .*//; p}\"`\n\nwget -q --delete-after \"http://abc.co.uk/raspiUpdate.php?pi=1&amp;ip=${CURRENT_IP}\"\n</code></pre>\n\n<p>In the crontab I have:</p>\n\n<pre><code> *     *     *     *     *        /home/user/Scripts/script.sh\n</code></pre>\n\n<p>Where am I going wrong?</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13115567,"title":"bash grep file not found","body":"<p>I wish to apply some commands based on a grep search I do <code>grep -l \"If you wish to distribute\" *.pdf</code> and I see the files I want to process but with the following bash script the files are not processed:</p>\n\n<pre><code>#!/bin/bash -x\ntext1=\"If you wish to distribute\"  #Science papers\n\n# Originally: grep -l \"text1\" \\*.pdf |\n\ngrep -l \"$text1\" *.pdf |\nwhile IFS=\"\" read -r -d \"\" file; do\n  noext=\"${file%\\.*}\"\n  pdftk \"$file\" cat 2-end output \"$noext\".tmp \n  mv -f \"$noext\".tmp \"$file\"\ndone\n</code></pre>\n\n<p>and the output is</p>\n\n<pre><code>+ IFS=\n+ grep -l 'If you wish to distribute' project_latex.pdf 'Science 2003 Metapopulation Persistence with Age-Dependent Disturbance or Succession.pdf' 'Science 2006 A Keystone Mutualism Drives Pattern in a Power Function.pdf' short-math-guide.pdf Test.pdf\n+ read -r -d '' file\n</code></pre>\n"},{"tags":["bash","tar","ls","depth"],"answer_count":4,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":2737,"score":3,"question_id":2700306,"title":"Listing the content of a tar file or a directory only down to some level","body":"<p>I wonder how to list the content of a tar file only down to some level? </p>\n\n<p>I understand <code>tar tvf mytar.tar</code> will list all files, but sometimes I would like to only see directories down to some level.</p>\n\n<p>Similarly, for the command <code>ls</code>, how do I control the level of subdirectories that will be displayed? By default, it will only show the direct subdirectories, but not go further.</p>\n"},{"tags":["git","bash","shell","io-redirection"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13146187,"title":"Git: unable to redirect/parse the output of 'git fetch --dry-run' command","body":"<p>What is special about the output message of <code>git fetch</code> command that is printed on the console? I'm not able to use <code>grep</code>, <code>xargs</code>, etc. Not able to redirect the output to a file also..</p>\n\n<p>Note: I'm using <code>git fetch --dry-run</code> command</p>\n\n<pre><code>[sangeeth@localhost santest-code]$ \n[sangeeth@localhost santest-code]$ git fetch --dry-run &gt; /tmp/1\nFrom ssh://git.code.sf.net/p/santest/code\n   9f068d0..2b9dc4e  master     -&gt; origin/master\n[sangeeth@localhost santest-code]$ \n[sangeeth@localhost santest-code]$ cat /tmp/1              &lt;= no data\n[sangeeth@localhost santest-code]$  \n[sangeeth@localhost santest-code]$ git fetch --dry-run | grep \"ssh\"     &lt;= output has both lines\nFrom ssh://git.code.sf.net/p/santest/code\n   9f068d0..2b9dc4e  master     -&gt; origin/master\n[sangeeth@localhost santest-code]$ \n[sangeeth@localhost santest-code]$ git --version \ngit version 1.7.11.4\n[sangeeth@localhost santest-code]$ \n</code></pre>\n\n<p>I'm trying to parse the output of <code>git fetch --dry-run</code> command to check whether the local (<code>master</code>) branch is up-to-date with the remote (<code>origin/master</code>) branch. </p>\n"},{"tags":["linux","bash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13146400,"title":"How do I change chown and chgrp","body":"<p>How do I change chown and chgrp by default?\nBecause every time that I upload a new file I need to change it specific.</p>\n"},{"tags":["php","bash","curl"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13102931,"title":"cURL able to make cookie but not use it","body":"<p>I'm trying to script bash to do a few simple curl commands.</p>\n\n<p>I can generate a cookie that I want to use with the following command:</p>\n\n<pre><code>curl -c cookie --data \"user=user&amp;password=pass\" //example/login.php\n</code></pre>\n\n<p>However, when I try passing it into the site again the cookie is ignored. It's as if I didn't even login into the first place. The command I'm using is the following:</p>\n\n<pre><code>curl -b cookie //example/\n</code></pre>\n\n<p>What am I doing wrong? </p>\n\n<p>Any help would be appreciated thanks.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13145090,"title":"Argument parsing \"library\" for bash?","body":"<p>I know <code>getopts</code> but I have to make the parsing and error handling each time.</p>\n\n<p>Does anyone know if there exist a \"library\" or a set of functions for Bash for parsing command arguments?</p>\n\n<p>E.g. Perl have tons of these.</p>\n"},{"tags":["bash","applescript","runtime-error"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13114860,"title":"Applescript .app always gives -1708","body":"<p>I am making a basic pingtest to stretch my knowledge of bash and Applescript, so I made this:</p>\n\n<pre><code>on run argv\ntry\n    if (count argv) is less than 1 or (count argv) is greater than 1 then\n        set IP_address to \"\"\n        set dialog_1 to display dialog \"Enter IP Address:\" default answer \"\" with title \"Ping\"\n        set the IP_address to the text returned of dialog_1\n        try\n            set ping to (do shell script \"ping -c 2 \" &amp; IP_address)\n            display dialog \"Connection Successful.\" buttons {\"OK\"} default button 1\n            return 1\n        on error\n            --if we get here, the ping failed\n            display dialog \"Conection failed. Host is down\" buttons {\"Darn\"} default button 1\n            return 0\n        end try\n    end if\n    if (count argv) = 1 then\n        set IP_address to item 1 of argv\n        try\n            set ping to (do shell script \"ping -c 2 \" &amp; IP_address)\n            return 1\n        on error\n            -- if we get here, the ping failed\n            return 0\n        end try\n    end if\non error error_message number error_number\n    if (error_number) is not equal to -128 then\n        display alert (\"An error has occured!\") message error_message &amp; (\" Error number \") &amp; error_number &amp; \".\"\n    end if\n\n    return error_number\nend try\n</code></pre>\n\n<p>end run</p>\n\n<p>(I couldn't get the end run inside the code snippet)</p>\n\n<p>And in bash I made this:</p>\n\n<p>!/bin/bash\ncurrentDir=<code>pwd</code>\nSuccess=<code>$currentDir/$1/Contents/MacOS/applet $2</code>\necho $Success</p>\n\n<p>(I couldn't get any of that inside a code snippet)</p>\n\n<p>When I run just the AppleScript, in the editor it works fine, but the .app and bash versions give me the -1708 error. I have narrowed the problem down to this: <code>if (count argv) is less than 1 or (count argv) is greater than 1 then</code></p>\n\n<p>What could I do to fix this, or even just make my code neater?</p>\n\n<p>Thanks</p>\n\n<p>EDIT(1): I want my program to run a GUI version if it's not provided any arguments, and when it is passed arguments, I want it to run in the background.</p>\n"},{"tags":["php","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13142254,"title":"Shell and sed: adding an array element to a PHP file","body":"<p>I have a php file:</p>\n\n<pre><code>&lt;?php\nreturn array(\n    'modules' =&gt; array(\n        'Application',\n        'DoctrineModule',\n        'DoctrineORMModule'\n    ),\n);\n</code></pre>\n\n<p>Since I'm lazy, I'm writing a script that will add an element to 'modules' array with a simple call:</p>\n\n<pre><code>$ sh myscript.sh 'NewModule'\n</code></pre>\n\n<p>NewModule should be added after the last 'modules' element.</p>\n\n<p>I tried doing this with 'sed' command but I didnt succeed yet. Any help is welcome.</p>\n"},{"tags":["linux","bash","unix","sed","awk"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":13141599,"title":"Efficient way to replace strings in one file with strings from another file","body":"<p>Searched for similar problems and could not find anything that suits my needs exactly:</p>\n\n<p>I have a very large HTML file scraped from multiple websites and I would like to replace all </p>\n\n<pre><code>class=\"key-&gt;from 2nd file\"\n</code></pre>\n\n<p>with</p>\n\n<pre><code>style=\"xxxx\"\n</code></pre>\n\n<p>At the moment I use <code>sed</code> - it works well but only with small files </p>\n\n<blockquote>\n  <p><i>while read key; do  sed -i \"s/class=\\\"$key\\\"/style=\\\"xxxx\\\"/g\"\n  file_to_process; done &lt; keys</i></p>\n</blockquote>\n\n<p>When I'm trying to process something larger it takes ages</p>\n\n<p>Example:</p>\n\n<pre><code>keys - Count: 1233 lines\nfile_to_ process - Count: 1946 lines\n</code></pre>\n\n<p>It takes about 40 s to complete only 1/10 of processing I need</p>\n\n<pre><code>real    0m40.901s\nuser    0m8.181s\nsys     0m15.253s\n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":375,"score":2,"question_id":3834839,"title":"escaping double quote inside a double quote","body":"<p>Can anybody show me how to escape double quote inside a double string in bash?</p>\n\n<p>For example in my shell script</p>\n\n<pre><code>#!/bin/bash\n\ndbload=\"load data local infile \\\"'gfpoint.csv'\\\" into table $dbtable FIELDS TERMINATED BY ',' ENCLOSED BY '\\\"' LINES TERMINATED BY \\\"'\\n'\\\" IGNORE 1 LINES\"\n</code></pre>\n\n<p>I can't get the ENCLOSED BY '\\\"' with double quote escape correctly. I can't use single quote for my variable because i want to use variable $dbtable.</p>\n\n<p>Thanks very much for your help.</p>\n"},{"tags":["bash","msysgit","cmd.exe"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13071242,"title":"Bash calling cmd /c %ProgramFiles(x86)%\\","body":"<p>From a bash script (bash from msysgit), I'd like to run MS VB 2010 Express compilation but none of the following lines works:</p>\n\n<pre><code>$ $PROGRAMFILES/Microsoft\\ Visual\\ Studio\\ 10.0\\\\Common7\\\\ide\\\\vbexpress.exe path/to/solution.sln /build\n</code></pre>\n\n<p>Results in <code>sh.exe\": C:\\Program: No such file or directory</code></p>\n\n<pre><code>$ \"$PROGRAMFILES/Microsoft\\ Visual\\ Studio\\ 10.0\\\\Common7\\\\ide\\\\vbexpress.exe\" path/to/solution.sln /build\n</code></pre>\n\n<p>Results in <code>sh.exe\": C:\\Program Files (x86)/Microsoft\\ Visual\\ Studio\\ 10.0\\Common7\\ide\\vbexpress.exe: No such file or directory</code></p>\n\n<pre><code>$ cmd /c \"$PROGRAMFILES(X86)/Microsoft\\ Visual\\ Studio\\ 10.0\\\\Common7\\\\ide\\\\vbexpress.exe\" path/to/solution.sln /build\n</code></pre>\n\n<p>This will open the cmd-shell only, as cmd seems not to recognize the argument to the parameter <code>/c</code></p>\n\n<pre><code>$ cmd \"/c $PROGRAMFILES(X86)/Microsoft\\ Visual\\ Studio\\ 10.0\\\\Common7\\\\ide\\\\vbexpress.exe\" path/to/solution.sln /build\n</code></pre>\n\n<p>Error Message: Command <code>C:\\Program</code>\" not found</p>\n\n<pre><code>$ /c/Program\\ Files\\ \\(x86\\)/Microsoft\\ Visual\\ Studio\\ 10.0/Common7/IDE/vbexpress.exe IOS\\\\IOS.sln /build\n</code></pre>\n\n<p>Kinda works, but though it starts VB Express it complains that <code>C:\\Program Files (x86)/Git/build</code> could not be load - clearly the shell expands <code>/build</code> to a path. And this solution is flawed as I would like to use an environment variable to distinguish between 32-bit and 64-bit installations of Windows.</p>\n\n<p>What's the correct way of escaping the path separators and space to get this working?</p>\n"},{"tags":["bash","scripting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13142284,"title":"command line menu options","body":"<p>I have been trying to get my menu to work, however it seems that it only accepts one argument/option at a time, how can I get it to accept multiple options? </p>\n\n<pre><code>#!/bin/bash\n\n##### Main\n\nfunction usage\n{\n    echo \"\nusage: infinidb [[-f file ] [-i] | [-h]]  name ...\n}\n\n        while [ \"$1\" != \"\" ]; do\n        case $1 in\n            -f | --file )           shift\n                                    filename=$1\n                                    ;;\n            -i |  )                 filename2=$2\n                                    ;;\n            -h | --help )           usage\n                                    exit\n                                    ;;\n            * )                     usage\n                                    exit 1\n        esac\n        shift\n    done\n\n            echo $filename \n            echo $filename2\n</code></pre>\n\n<p>when running the script </p>\n\n<p>the following output show show</p>\n\n<p>./script.sh -f apple -i tree</p>\n\n<p>apple tree</p>\n"},{"tags":["linux","bash","shell","find"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":52,"score":3,"question_id":13132836,"title":"Using shell to finds directories that do not have a specified pattern of files in the folder","body":"<p>The directory tree is like this:</p>\n\n<pre><code>.\n├── A_123\n│   └── 123.txt\n├── A_456\n│   ├── tmp\n│   └── tmp.log\n└── A_789\n    └── 789.txt\n</code></pre>\n\n<p>There're 3 directories (A_123, A_456, A_789). \nThe pattern of a directory name is: <code>A_{numbers}</code> and the file I'm interested in is <code>{numbers}.txt</code>.</p>\n\n<p>I was wondering whether there's a way to get the directories <code>A_{numbers}</code> that has no <code>{numbers}.txt</code> file in them. For example above, this script should return:</p>\n\n<pre><code>./A_456\n</code></pre>\n\n<p>as <code>A_456</code> doesn't have <code>456.txt</code> in its folder but <code>A_123</code> and <code>A_789</code> have their <code>{numbers}.txt</code> files in the relevant folder.</p>\n\n<p>Anyone has ideas about this? Thanks!</p>\n"},{"tags":["php","bash","sh"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13141605,"title":"How to run a background process in PHP and get the return value","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/13127555/make-php-wait-for-matlab-script-to-finish-executing\">Make PHP wait for Matlab script to finish executing</a>  </p>\n</blockquote>\n\n\n\n<p>Okay, starting from <a href=\"http://stackoverflow.com/questions/45953/php-execute-a-background-process\">php execute a background process</a>\nto run a background process works great.  The problem is, I need the return of that process also.  The obvious solution to me is :</p>\n\n<pre><code>$cmd = \"($cmd &gt; $outputfile 2&gt;&amp;1 || echo $? &gt; $returnfile) &amp; echo $! &gt; $pidfile\";\nexec($cmd);\n</code></pre>\n\n<p>When I run the generated command on the command line, it backgrounds and the files are filled out as expected.  The problem is that when php exec() runs, the command doesn't go to the background (at least, exec doesn't return until the command finishes).  I tried variations with nohup and wait $pid, but still no solution.  </p>\n\n<p>Any thoughts?</p>\n"},{"tags":["linux","bash","scripting","ghostscript"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":74,"score":3,"question_id":12357431,"title":"Using ps2pdf correctly in a script?","body":"<p>I have a script below and I am having problems. I have several folders with PostScript file in them I want to batch convert to PDFs. I have done very little scripting in linux before but I think this is close. It is not quite working how I want it though. Any suggesting? or notice a mistake I made? I want the files to stay in the same location after they have been converted. Currently this converts the files but they get all put together in one folder.</p>\n\n<p>I call the script  like this: ./all.ps.to.pdf \"/directory/to/process\"</p>\n\n<pre><code>#!/bin/sh\n\nSTARTDIR=$1\nif [ ! -d \"$STARTDIR\" ]; then\necho No starting directory $STARTDIR\nexit 1\nfi\n\nfind $STARTDIR -name '*.ps' -print | sed -e 's/.ps$//' |\nxargs -l -i  ps2pdf \\{}.ps\n</code></pre>\n"},{"tags":["bash","shell","wine"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13141296,"title":"Sending keystrokes or text to a program running with wine","body":"<p>I'm starting a windows-program with wine in a shell script. Now I would like to pass keystrokes and texts to it. I've tried <code>xvkbd</code> as mentioned in <a href=\"http://stackoverflow.com/questions/954779/sending-keycode-to-xorg-wine-with-bash-script\">this</a> question, but the program just outputs the letter/text into the terminal and exits after that. Here's an example:</p>\n\n<pre><code>`wine BERCon.exe &gt; output.txt &amp;`\nsleep 5;\n`xvkbd -text \"N\"`\n</code></pre>\n\n<p>Is that even possible to do? I checked the man-page of <code>xvkbd</code> to check if I can change the focus somehow, but it seems like thats not possible.I noticed that if I do something like <code>echo \"N\" | wine BERCon.exe</code> the N actually gets passed to wine and wine puts it into the program, but gets into a loop after that and continues to input that letter.</p>\n"},{"tags":["bash","unix","mv"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13135701,"title":"How to append the timestamp of a process to the name of a file in Unix","body":"<p>I have a directory <code>/home/user/ingest/</code> which has many files inside it with varying sizes. I need to move every file inside this folder into <code>/home/user/ingest/inbox</code> every two minutes. There might be a situation where the first file might take more than 2 mins to move into <code>/home/user/ingest/inbox</code>. In which case when its moving the second file, it SHOULDN'T take the first file as well. Which is why I thought to append the timestamp to the name of files at the time of moving. Is there anyway to do this in shell scripting? </p>\n\n<p>And I also understand that usingh crontab might help me in scheduling the execution of the shell script every two minutes. I have a basic idea of cron but for my particular requirement, how can I check whether the file is being loved every two minutes or not?</p>\n"},{"tags":["bash","backspace"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":786,"score":2,"question_id":4196161,"title":"Bash read backspace button behavior problem","body":"<p>When using read in bash, pressing backspace does not delete the last character entered, but appears to append a backspace to the input buffer. Is there any way I can change it so that delete removes the last key typed from the input? If so how?</p>\n\n<p>Here's a short example prog I'm using it with if it's of any help:</p>\n\n<pre><code>#!/bin/bash\n\ncolour(){ #$1=text to colourise $2=colour id\n        printf \"%s%s%s\" $(tput setaf $2) \"$1\" $(tput sgr0)\n}\ngame_over() { #$1=message $2=score      \n        printf \"\\n%s\\n%s\\n\" \"$(colour \"Game Over!\" 1)\" \"$1\"\n        printf \"Your score: %s\\n\" \"$(colour $2 3)\"\n        exit 0\n}\n\nscore=0\nclear\nwhile true; do\n        word=$(shuf -n1 /usr/share/dict/words) #random word from dictionary \n        word=${word,,} #to lower case\n        len=${#word}\n        let \"timeout=(3+$len)/2\"\n        printf \"%s  (time %s): \" \"$(colour $word 2)\" \"$(colour $timeout 3)\"\n        read -t $timeout -n $len input #read input here\n        if [ $? -ne 0 ]; then   \n                game_over \"You did not answer in time\" $score\n        elif [ \"$input\" != \"$word\" ]; then\n                game_over \"You did not type the word correctly\" $score;\n        fi  \n        printf \"\\n\"\n        let \"score+=$timeout\" \ndone\n</code></pre>\n"},{"tags":["linux","bash","permissions","fedora","chmod"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":31,"score":0,"question_id":13136016,"title":"Changing permissions for specific folder","body":"<p>i need some help. I'm using Fedora 15. I have 2 users: user1 and user2 and directory in /usr/local/example_directory. Now for this directory owner is user1 and other users can only read this. I need to add specific permissions for user2 so it can remove and modify this directory recursively. How i can do it?\nP.S.: Sorry for bad language.</p>\n"},{"tags":["bash","variable-expansion"],"answer_count":23,"favorite_count":9,"up_vote_count":14,"down_vote_count":0,"view_count":8382,"score":14,"question_id":370047,"title":"What is the most elegant way to remove a path from the $PATH variable in Bash?","body":"<p>Or more generally, how do I remove an item from a colon-separated list in a Bash environment variable?</p>\n\n<p>I thought I had seen a simple way to do this years ago, using the more advanced forms of Bash variable expansion, but if so I've lost track of it.  A quick search of Google turned up surprisingly few relevant results and none that I would call \"simple\" or \"elegant\".  For example, two methods using sed and awk, respectively:</p>\n\n<pre><code>PATH=$(echo $PATH | sed -e 's;:\\?/home/user/bin;;' -e 's;/home/user/bin:\\?;;')\nPATH=!(awk -F: '{for(i=1;i&lt;=NF;i++){if(!($i in a)){a[$i];printf s$i;s=\":\"}}}'&lt;&lt;&lt;$PATH)\n</code></pre>\n\n<p>Does nothing straightforward exist?  Is there anything analogous to a split() function in Bash?</p>\n\n<p><strong>Update:</strong><br/>\nIt looks like I need to apologize for my intentionally-vague question; I was less interested in solving a specific use-case than in provoking good discussion.  Fortunately, I got it!</p>\n\n<p>There are some very clever techniques here, but it looks like there's no way to accomplish this using pure Bash script (though <a href=\"#370255\">nicerobot's IFS/array technique</a> comes pleasantly close).  In the end, I've added the following three functions to my toolbox.  The magic happens in path_remove, which is based largely on <a href=\"#370192\">Martin York's clever use of <code>awk</code>'s RS variable</a>.</p>\n\n<pre><code>path_append ()  { path_remove $1; export PATH=\"$PATH:$1\"; }\npath_prepend () { path_remove $1; export PATH=\"$1:$PATH\"; }\npath_remove ()  { export PATH=`echo -n $PATH | awk -v RS=: -v ORS=: '$0 != \"'$1'\"' | sed 's/:$//'`; }\n</code></pre>\n\n<p>The only real cruft in there is the use of <code>sed</code> to remove the trailing colon.  Considering how straightforward the rest of Martin's solution is, though, I'm quite willing to live with it!</p>\n\n<p><hr /></p>\n\n<p>Related question: <A href=\"http://stackoverflow.com/questions/273909/how-do-i-manipulate-path-elements-in-shell-scripts\">http://stackoverflow.com/questions/273909/how-do-i-manipulate-path-elements-in-shell-scripts</A></p>\n"},{"tags":["bash","sed","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":54,"score":-1,"question_id":13123908,"title":"Change subnet with bash script","body":"<p>I'm looking to change every instance of 192.168.XXX in a file to 192.168.yyy. in a network config file using a bash script. The thing hanging me up is that I don't know for sure what xxx is going to be. For example it could be 192.168.122.1 or 192.168.123.1.  Also it could be 192.168.122.2 or 192.168.122, etc. I think this can be done with one command.</p>\n\n<p>Here is the default network file:</p>\n\n<pre><code>    &lt;network&gt;\n      &lt;name&gt;default&lt;/name&gt;\n      &lt;bridge name=\"virbr0\" /&gt;\n      &lt;forward/&gt;\n      &lt;ip address=\"192.168.122.1\" netmask=\"255.255.255.0\"&gt;\n        &lt;dhcp&gt;\n          &lt;range start=\"192.168.122.2\" end=\"192.168.122.254\" /&gt;\n        &lt;/dhcp&gt;\n      &lt;/ip&gt;\n    &lt;/network&gt;\n</code></pre>\n"},{"tags":["bash","optimization"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13132216,"title":"bash script optimization","body":"<p>I have this script below that will be daemonized and triggered possibly hundreds if not thousands of times by different users.</p>\n\n<p>The script uses <code>inotifywait</code> to watch a folder for an upload and then move the uploaded file to its final destination for presentation, after rotating (backup/move) previous uploads. The code will be run against different upload folders that are created on the fly.</p>\n\n<pre><code>#!/bin/bash\n\ndb=\"$VAR1\"/path/to/upload/folder/\ns3=\"$VAR2\"/path/to/remote/folder\n\ninotifywait -m -r -e attrib \"$db\" |\nwhile read dir ev file;\ndo\n\n        for dirnum in $(cd \"$s3\"; ls */*.png | sed 's%/.*%%' | sort -nr)\n        do\n                 next=$(($dirnum + 1));                       \n                 mv \"$s3/$dirnum/post$dirnum.png\" \"$s3/$next/post$next.png\";\n        done\n\n        mv \"$db\"/\"$file\"  \"$s3\"/1/post1.png\n\ndone\n</code></pre>\n\n<p>What can I do to optimize it? Or should it be rewritten a faster programming language? Also, how can I test scripts under a certain amount of load?</p>\n"},{"tags":["linux","bash","osx","unix","shell"],"answer_count":4,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":504,"score":8,"question_id":2704635,"title":"Is there a way to find the running time of the last executed command in the shell?","body":"<p>Is there a command like <code>time</code> that can display the running time details of the last or past executed commands on the shell?</p>\n"},{"tags":["bash","shell","concurrency","process"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13131765,"title":"How do you stop two concurrent processes?","body":"<p>In my web development workflow, I have two processes:</p>\n\n<ol>\n<li>watching my folder for changes</li>\n<li>previewing my site in the browser</li>\n</ol>\n\n<p>I want to be able to run them and then later stop them both at the same time. I've seen everyone suggesting using the ampersand operator:</p>\n\n<pre><code>process_1 &amp; process_2\n</code></pre>\n\n<p>But pressing <code>Ctrl + C</code> only stops the second one. I have to <code>kill</code> the first one manually. What am I missing in this approach?</p>\n"},{"tags":["linux","bash","shell","command-line","getopts"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12846345,"title":"Is this the correct way to write opts","body":"<p>Is this the correct way to get and set with OPTS?</p>\n\n<p>I want to be able to take in a lot of options like</p>\n\n<p>./runthis.sh --option1 setuff --option2 setmorestuff</p>\n\n<pre><code>while :\ndo\n        case $1 in\n                -h | --help | -\\?)\n                        usage\n                        exit 0\n                        ;;\n                -o | --option1)\n                        O=$2\n                        shift 2\n                        ;;\n                -z | --option2)\n                        Z=$2\n                        shift 2\n                        ;;\n                --) # End of all options\n                        shift\n                        break\n                        ;;\n                -*)\n                        echo \"WARN: Unknown option (ignored): $1\" &gt;&amp;2\n                        shift\n                        ;;\n                *)  # no more options. Stop while loop\n                        break\n                        ;;\n        esac\ndone\n</code></pre>\n"},{"tags":["bash","sleep"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13131570,"title":"Run Bash Script for 6 Hours using Sleep","body":"<p>How do you use the sleep function to run the bash script every minute for say 6 hours?</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","shell","sh"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13126063,"title":"esacping single quotes while using egrep in shell script","body":"<p>I need to find  some special characters in a given input string .\nIf the string contains following special characters it should find out.\ni am doing  egrep to find the characters.\nMy code is working for every character but not single quotes.\nplease find my code snippet.</p>\n\n<pre><code>splCharCheck='egrep \"&amp;|\\\"|:|\\'\" | wc -l'\n\ncount=`echo  \"$Name\" | eval $splCharCheck`\n</code></pre>\n\n<p>Can any one help me how to escape single quotes here?</p>\n"},{"tags":["ruby-on-rails","linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13130836,"title":"Ruby On rails : need to run /bin/bash before any rails command","body":"<p>every time I log into the server, I cannot run any rails command until I run /bin/bash ; see below</p>\n\n<pre><code>Last login: Mon Oct 29 16:28:07 2012 from natint3.company.com\nuser1@company.com [~]# rails -v\n/usr/lib64/ruby/site_ruby/1.8/rubygems.rb:926:in `report_activate_error': Could not find RubyGem rails (&gt;= 0) (Gem::LoadError)\n    from /usr/lib64/ruby/site_ruby/1.8/rubygems.rb:244:in `activate_dep'\n    from /usr/lib64/ruby/site_ruby/1.8/rubygems.rb:236:in `activate'\n    from /usr/lib64/ruby/site_ruby/1.8/rubygems.rb:1307:in `gem'\n    from /usr/bin/rails:18\nuser1@company.com [~]# rvm info\n\nruby-1.9.3-p194:\n\nsystem:\nuname:       \"Linux box726.bluehost.com 2.6.32-20120131.55.1.bh6.x86_64 #1 SMP Tue Jan 31 15:43:27 EST 2012 x86_64 x86_64 x86_64 GNU/Linux\"\nsystem:      \"unknown/libc-2.12/x86_64\"\nbash:        \"/ramdisk/bin/bash =&gt; GNU bash, version 4.1.2(1)-release (x86_64-redhat-linux-gnu)\"\nzsh:         \"/usr/bin/zsh =&gt; zsh 4.3.10 (x86_64-redhat-linux-gnu)\"\n\nrvm:\nversion:      \"rvm 1.16.17 (stable) by Wayne E. Seguin &lt;wayneeseguin@gmail.com&gt;, Michal Papis &lt;mpapis@gmail.com&gt; [https://rvm.io/]\"\nupdated:      \"4 hours 10 minutes 5 seconds ago\"\n\nruby:\ninterpreter:  \"ruby\"\nversion:      \"1.9.3p194\"\ndate:         \"2012-04-20\"\nplatform:     \"x86_64-linux\"\npatchlevel:   \"2012-04-20 revision 35410\"\nfull_version: \"ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]\"\n\nhomes:\ngem:          \"/home3/user1/.rvm/gems/ruby-1.9.3-p194\"\nruby:         \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194\"\n\nbinaries:\nruby:         \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/ruby\"\nirb:          \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/irb\"\ngem:          \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/gem\"\nrake:         \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/rake\"\n\nenvironment:\nPATH:         \"/home3/user1/.rvm/gems/ruby-1.9.3-p194/bin:/home3/user1/.rvm/gems/ruby-1.9.3-p194@global/bin:/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin:/home3/user1/.rvm/bin:/usr/local/jdk/bin:/home3/user1/perl5/bin:/usr/lib64/qt-3.3/bin:/ramdisk/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11R6/bin:/home3/user1//ruby/gems/bin:/home3/user1//ruby/gems:/home3/user1/bin\"\nGEM_HOME:     \"/home3/user1/.rvm/gems/ruby-1.9.3-p194\"\nGEM_PATH:     \"/home3/user1/.rvm/gems/ruby-1.9.3-p194:/home3/user1/.rvm/gems/ruby-1.9.3-p194@global\"\nMY_RUBY_HOME: \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194\"\nIRBRC:        \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/.irbrc\"\nRUBYOPT:      \"\"\ngemset:       \"\"\n\n\nuser1@company.com [~]#\n</code></pre>\n\n<p>and after I run /bin/bash, I have a different behavior</p>\n\n<pre><code>user1@company.com [~]# /bin/bash\nuser1@company.com [~]# rails -v\nRails 3.2.8\nuser1@company.com [~]# rvm info\n\nRVM is not a function, selecting rubies with 'rvm use ...' will not work.\n\nYou need to change your terminal emulator preferences to allow login shell.\nSometimes it is required to use `/bin/bash --login` as the command.\nPlease visit https://rvm.io/integration/gnome-terminal/ for a example.\n\n\nsystem:\n\nsystem:\nuname:       \"Linux box726.bluehost.com 2.6.32-20120131.55.1.bh6.x86_64 #1 SMP Tue Jan 31 15:43:27 EST 2012 x86_64 x86_64 x86_64 GNU/Linux\"\nsystem:      \"unknown/libc-2.12/x86_64\"\nbash:        \"/ramdisk/bin/bash =&gt; GNU bash, version 4.1.2(1)-release (x86_64-redhat-linux-gnu)\"\nzsh:         \"/usr/bin/zsh =&gt; zsh 4.3.10 (x86_64-redhat-linux-gnu)\"\n\nrvm:\nversion:      \"rvm 1.16.17 (stable) by Wayne E. Seguin &lt;wayneeseguin@gmail.com&gt;, Michal Papis &lt;mpapis@gmail.com&gt; [https://rvm.io/]\"\nupdated:      \"4 hours 11 minutes 9 seconds ago\"\n\nhomes:\ngem:          \"/home3/user1//ruby/gems\"\nruby:         \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194\"\n\nbinaries:\nruby:         \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/ruby\"\nirb:          \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/irb\"\ngem:          \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/gem\"\nrake:         \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/rake\"\n\nenvironment:\nPATH:         \"/usr/local/jdk/bin:/home3/user1/.rvm/gems/ruby-1.9.3-p194/bin:/home3/user1/.rvm/gems/ruby-1.9.3-p194@global/bin:/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin:/home3/user1/.rvm/bin:/home3/user1/perl5/bin:/usr/lib64/qt-3.3/bin:/ramdisk/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11R6/bin:/home3/user1//ruby/gems/bin:/home3/user1//ruby/gems:/home3/user1/bin\"\nGEM_HOME:     \"/home3/user1//ruby/gems\"\nGEM_PATH:     \"/home3/user1//ruby/gems:/usr/lib64/ruby/gems/1.8\"\nMY_RUBY_HOME: \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194\"\nIRBRC:        \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/.irbrc\"\nRUBYOPT:      \"\"\ngemset:       \"\"\n\n\nuser1@company.com [~]#\n</code></pre>\n\n<p>Anyone has an idea what's going on and how can I fix this issue?</p>\n\n<p>Thanks</p>\n\n<p>EDIT1</p>\n\n<p>Here are my .bashrc and .bash_profile file contents</p>\n\n<pre><code>user1@company.com [~]# cat ~/.bashrc\n# .bashrc\n\n# User specific aliases and functions\n\n# Source global definitions\nif [ -f /etc/bashrc ]; then\n    . /etc/bashrc\nfi\n\n    export HPATH=/home3/user1/\n    export GEM_HOME=$HPATH/ruby/gems\n    export GEM_PATH=$GEM_HOME:/usr/lib64/ruby/gems/1.8\n    export GEM_CACHE=$GEM_HOME/cache\n    export PATH=$PATH:$HPATH/ruby/gems/bin\n    export PATH=$PATH:$HPATH/ruby/gems  \n\nPATH=$PATH:/home3/user1/.rvm/bin # Add RVM to PATH for scripting\n\nPATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting\nuser1@company.com [~]# cat ~/.bash_profile \n# .bash_profile\n\n# Get the aliases and functions\nif [ -f ~/.bashrc ]; then\n    . ~/.bashrc\nfi\n\n# User specific environment and startup programs\n\nPATH=$PATH:$HOME/bin\n\nexport PATH\nunset USERNAME\n\n\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; source \"$HOME/.rvm/scripts/rvm\" # Load RVM into a shell session *as a function*\nuser1@company.com [~]#\n</code></pre>\n"},{"tags":["bash","autocomplete","bash-completion"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13128011,"title":"bash completion of built-in commands","body":"<p>Where are the completion scripts for commands such as <code>cd</code> and <code>ls</code> and other built-in bash commands?</p>\n\n<p>I looked in <code>/etc/bash_completion.d/</code> but they are not there.</p>\n"},{"tags":["linux","file","bash","permissions","folder"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13131044,"title":"How to output the non-readable contents of a directory in bash","body":"<p>In bash how would one output the non-readable contents of a directory?</p>\n\n<p>For example, let's say the directory is <code>~/foo</code>, and there's a non-readable folder <code>~/foo/folder</code> with a file <code>~/foo/folder/file1.txt</code>, and another non-readable file <code>~/foo/file2.txt</code>. I want to output:</p>\n\n<pre><code>~/foo/folder cannot be read.\n~/foo/folder/file1.txt cannot be read.\n~/foo/file2.txt cannot be read.\n</code></pre>\n"},{"tags":["bash","command-line","spring-security","saltedhash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13130949,"title":"Spring security generate a salted hash for users from command line","body":"<p>How do you generate a salted hash for users in spring security 3x from a bash command line?</p>\n"},{"tags":["bash","shell","scripting"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13084885,"title":"Check if at least one file exists in bash","body":"<p>I have this</p>\n\n<pre><code>if [[ -e file.jpg ]] ;then echo \"aaaaaaaaa\"; fi\n</code></pre>\n\n<p>and it prints \"aaaaaaa\"</p>\n\n<p>but I want to print if there is file.png or file.png also</p>\n\n<p>so I need something like this</p>\n\n<pre><code>if [[ -e file.* ]] ;then echo \"aaaaaaaaa\"; fi\n</code></pre>\n\n<p>but it doesn't work I am missing something in the syntax</p>\n\n<p>Thanks</p>\n"},{"tags":["linux","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":13127950,"title":"Bash script. Iterate through all ASCII chars","body":"<p>I know how to iterate through characters </p>\n\n<pre><code>for c in {a..z}\n</code></pre>\n\n<p>But I can't figure out, how to iterate through all ASCII chars.\nI'm sure, it should be really easy.</p>\n"},{"tags":["linux","bash","scripting"],"answer_count":7,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":3832,"score":4,"question_id":8967902,"title":"Why do you need to put #!/bin/bash at the beginning of a script file?","body":"<p>I have made bash scripts before and they all ran fine without this at the beginning. What's the point of putting it in? Would things be any different?</p>\n\n<p>Also, how do you pronounce #? I know that ! is pronounced as \"bang.\"</p>\n\n<p>Edit: How is <code>#!</code> pronounced?</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13128314,"title":"bash - execution shortcut","body":"<p>I want to execute foo.bsh typing only foo.bsh or even foo instead of ./foo.bsh. I would like to do this temporarily for all .bsh in a directory, as well as globally. For example I want to have a global Key MYIP which calls a script to echo my external IP. I don't know if this make sense, because I could crash my bash if I overwrite echo.</p>\n\n<p>Edit: to be more clear. I want a shortcut for writing \"./\" saving me 2 keys for those commands, such as in DOS where foo.exe can be executed with foo. Couldn't bash look in the current directory for .bsh files, if I type foo (ENTER) ?</p>\n"},{"tags":["bash","script","snmp","expect"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":115,"score":2,"question_id":12902649,"title":"Expect script to simulate SNMP","body":"<p>I want to monitor a device that doesn´t support SNMP, so I have tried get a counter via an expect script. This script connects to the device using SSH, logs the output on a file and then it parses the output in order to get the desired counter.</p>\n\n<p>When I execute the script from the console I get the following desired output:</p>\n\n<pre><code>root@box:/path# ./GGSN-PDP-Contexts.expect  \n.1.3.6.1.4.1.6147.2.1  \nInteger32  \n310838  \n</code></pre>\n\n<p>However, when I try to get the result using snmpget it doesn´t work!</p>\n\n<pre><code>root@box:/path# snmpget -m TDP-MIB  -v 2c -c TM_Com_Pub localhost .1.3.6.1.4.1.6147.2.1  \nTDP-MIB::PDPContextsNumber = No Such Instance currently exists at this OID  \n</code></pre>\n\n<p>By the way, this is the relevant configuration at snmpd.conf:<br>\n    pass .1.3.6.1.4.1.6147.2.1 /usr/bin/expect /path/GGSN-PDP-Contexts.expect  </p>\n\n<p>And this is the expect script that I'm using:  </p>\n\n<pre><code>#!/usr/bin/expect -f  \n\n# Constants  \nset user \"user\"  \nset device \"10.10.222.176\"  \nset pass \"blablabla\"  \nset timeout -1  \nset prompt \"GGSN-LV02#\"  \nset file \"./GGSN-PDP-Contexts.log\"  \n\n# Options  \nmatch_max 100000  \nlog_user 0  \n\n# Access to device  \nspawn ssh -oStrictHostKeyChecking=no -oCheckHostIP=no $user@$device  \nexpect \"*?assword:*\"  \nsend -- \"$pass\\r\"  \n\n# Commands execution  \nexpect -exact \"$prompt\"  \nsend -- \"display pdp-number\\r\"  \nlog_file -a $file\n\n# Logging  \nexpect -exact \"$prompt\"  \nlog_file  \nsend -- \"quit\\r\"  \n\n# Get the value  \nset result [exec cat $file | grep \"ALL GTP\" | cut -d \" \" -f14]  \nset value [format %d $result]  \n\n# Print the value  \nputs \".1.3.6.1.4.1.6147.2.1\"  \nputs \"Integer32\"  \nputs $value  # If I replace the $value with a number, it doesn't work either  \n\n# Erase log file  \nexec rm $file  \nclose  \n</code></pre>\n\n<p>Could you bring me any hint? Thanks in advance!</p>\n\n<p><b> EDIT: </b></p>\n\n<p>In addition, these are the last lines of snmpget's debug output:</p>\n\n<pre><code>trace: snmp_comstr_parse(): snmp_auth.c, 135:  \ndumph_recv:   SNMP version  \ndumpx_recv:    02 01 01 \ndumpv_recv:      Integer:       1 (0x01)  \ntrace: snmp_comstr_parse(): snmp_auth.c, 147:  \ndumph_recv:   community string  \ndumpx_recv:    04 0A 54 4D 5F 43 6F 6D 5F 50 75 62   \ndumpv_recv:      String:        TM_Com_Pub  \ntrace: _snmp_parse(): snmp_api.c, 4149:  \ndumph_recv:   PDU  \ntrace: snmp_pdu_parse(): snmp_api.c, 4255:  \ndumpv_recv:     Command RESPONSE  \ntrace: snmp_pdu_parse(): snmp_api.c, 4336:  \ndumph_recv:     request_id  \ndumpx_recv:      02 04 3B 9E CF 74   \ndumpv_recv:        Integer:     1000263540 (0x3B9ECF74)  \ntrace: snmp_pdu_parse(): snmp_api.c, 4347:  \ndumph_recv:     error status  \ndumpx_recv:      02 01 00   \ndumpv_recv:        Integer:     0 (0x00)  \ntrace: snmp_pdu_parse(): snmp_api.c, 4358:  \ndumph_recv:     error index  \ndumpx_recv:      02 01 00   \ndumpv_recv:        Integer:     0 (0x00)  \ntrace: snmp_pdu_parse(): snmp_api.c, 4376:  \ndumph_recv:     VarBindList  \ntrace: snmp_pdu_parse(): snmp_api.c, 4406:  \ndumph_recv:       VarBind  \ntrace: snmp_parse_var_op(): snmp.c, 166:  \ndumph_recv:         Name  \ndumpx_recv:          06 09 2B 06 01 04 01 B0 03 02 01   \ndumpv_recv:            ObjID: TDP-MIB::PDPContextsNumber  \ntrace: snmp_pdu_parse(): snmp_api.c, 4415:  \ndumph_recv:         Value  \nTDP-MIB::PDPContextsNumber = No Such Instance currently exists at this OID  \n</code></pre>\n\n<p>Also, this is my current MIB:  </p>\n\n<pre><code>TDP-MIB DEFINITIONS ::= BEGIN  \n\nIMPORTS  \n    MODULE-IDENTITY, OBJECT-TYPE, Integer32, enterprises  \n                    FROM SNMPv2-SMI  \n    OBJECT-GROUP    FROM SNMPv2-CONF;   \n\nTDP MODULE-IDENTITY  \n    LAST-UPDATED \"201210080000Z\" -- 8/oct/2012  \n    ORGANIZATION    \"TELEFONICA\"  \n    CONTACT-INFO    \"Authors: Hernan Romano / Antonio Ocampo  \n                     Email: h.romanoc@pucp.edu.pe / aocampo@pucp.edu.pe\"  \n    DESCRIPTION     \"MIB para gestionar los equipos que carecen de SNMP\"  \n    REVISION        \"201210080000Z\" -- 08/oct/2012  \n    DESCRIPTION     \"Revision 2.1\"  \n    ::= { enterprises 6147 }    \n\nNokia                   OBJECT IDENTIFIER ::= { TDP 1 }  \nHuawei                  OBJECT IDENTIFIER ::= { TDP 2 }  \nTDPMIBConformance       OBJECT IDENTIFIER ::= { TDP 3 }  \n\nClearCodeGroup1         OBJECT-TYPE  \n                        SYNTAX Integer32  \n                        MAX-ACCESS read-only  \n                        STATUS current  \n                        DESCRIPTION \"Clear Code Group 1\"  \n                        ::= { Nokia 1 }  \n\nPDPContextsNumber       OBJECT-TYPE  \n                        SYNTAX Integer32  \n                        MAX-ACCESS read-only  \n                        STATUS current  \n                        DESCRIPTION \"PDP Contexts Number\"  \n                        ::= { Huawei 1 }  \n\nTDPMIBGroup             OBJECT IDENTIFIER  \n                        ::= { TDPMIBConformance 1 }  \n\n--grupoTDP      OBJECT-GROUP  \n--      OBJECTS {  \n--              ClearCodeGroup1,  \n--              PDPContextsNumber  \n--      }  \n--      STATUS current  \n--      DESCRIPTION \"Objetos para el monitoreo de los equipos que carecen de SNMP\"  \n--      ::= { TDPMIBGroup 1 }  \nEND  \n</code></pre>\n"},{"tags":["linux","bash","command-line","freetds","sqsh"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13124785,"title":"What is the advantage of using Sqsh with FreeTDS?","body":"<p>newbie question here: I have FreeTDS working and querying a Microsoft SQL server 2008 r2 db, from a mint linux vm, reading the inter-webs, mostly stackoverflow, it is mentioned that I should use sqsh also with FreeTDS,  <a href=\"http://stackoverflow.com/questions/149395/what-are-some-ways-of-accessing-microsoft-sql-server-from-linux\">SQSH &amp; FreeTDS</a>, I don't understand what sqsh, besides being sometype of cli I guess, adds as I can use FreeTDS to access the db..  Any info to clear this up would be appreciated.</p>\n"},{"tags":["bash","if-statement","trap"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":13103701,"title":"how to trap errors inside the if statement","body":"<p>Running the following code:</p>\n\n<pre><code>#!/bin/bash\n\nset -o pipefail\nset -o errtrace\nset -o nounset\nset -o errexit\n\nfunction err_handler ()\n{\n    local error_code=\"$?\"\n    echo \"TRAP!\"\n    echo \"error code: $error_code\"\n    exit\n}\ntrap err_handler ERR\n\necho \"wrong command in if statement\"\n\nif xsxsxsxs \n    then\n        echo \"if result is true\"\n    else\n        echo \"if result is false\"\nfi\n\necho -e \"\\nwrong command directly\"\nxsxsxsxs \n\nexit\n</code></pre>\n\n<p><br>\nproduces the following output:</p>\n\n<pre><code>wrong command in if statement\ntrap.sh: line 21: xsxsxsxs: command not found\nif result is false\n\nwrong command directly\ntrap.sh: line 29: xsxsxsxs: command not found\nTRAP!\nerror code: 127\n</code></pre>\n\n<p><br>\nHow can I trap the '<em>command not found</em>' error inside the if statement too?</p>\n"},{"tags":["bash","if-statement","boolean","condition"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":189,"score":1,"question_id":8002573,"title":"Bash always printing same value regardless of boolean value","body":"<p>Related to <a href=\"http://stackoverflow.com/questions/8002083/1-command-not-found/8002330#8002330\">SO</a>.</p>\n\n<p>fizzy.sh:</p>\n\n<pre><code>#!/usr/bin/env sh\n\ndiv3() {\n    expr $1 % 3 = 0\n}\n\ndiv5() {\n    expr $1 % 5 = 0\n}\n\nfizzy() {\n    if [ $(div3 $1) ] &amp;&amp; [ $(div5 $1) ]; then\n        expr \"FizzBuzz\"\n    elif [ $(div3 $1) ]; then\n        expr \"Fizz\"\n    elif [ $(div5 $1) ]; then\n        expr \"Buzz\"\n    else\n        expr \"$1\"\n    fi\n}\n\necho $(fizzy 1)\necho $(fizzy 2)\necho $(fizzy 3)\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>$ ./fizzy.sh\nFizzBuzz\nFizzBuzz\nFizzBuzz\n</code></pre>\n"},{"tags":["linux","bash","shell","pwd","getcwd"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":12338233,"title":"shell init issue when click tab, what's wrong with getcwd?","body":"<p>once i click Tab on bash, the error message will appear, what's wrong?</p>\n\n<pre><code>symlink-hook: error retrieving current directory: getcwd: cannot access parent directories: No such file or directory\nsymlink-hook: error retrieving current directory: getcwd: cannot access parent directories: Success\nsymlink-hook: error retrieving current directory: getcwd: cannot access parent directories: Success\nsymlink-hook: error retrieving current directory: getcwd: cannot access parent directories: Success\nsymlink-hook: error retrieving current directory: getcwd: cannot access parent directories: No such file or directory\nsymlink-hook: error retrieving current directory: getcwd: cannot access parent directories: Success\nsymlink-hook: error retrieving current directory: getcwd: cannot access parent directories: Success\nsymlink-hook: error retrieving current directory: getcwd: cannot access parent directories: Success\n</code></pre>\n\n<p>sometimes, the error message is:</p>\n\n<pre><code>shell-init: error retrieving current directory: getcwd: cannot access parent directories: No s uch file or directory\n</code></pre>\n\n<p>how to solve shell init problem?</p>\n"},{"tags":["bash","tcl","expect"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13084870,"title":"Making decisions on expect return","body":"<p>I am trying to create an expect script which will send a different password string based on the \"expect\"</p>\n\n<ul>\n<li><p>Condition A: If a cisco device has not been setup with a username then the first prompt will simply be \"Password:\" - then it should use passwordA (no username)</p></li>\n<li><p>Condition B: If it has been setup with a username then the prompt will be \"Username:\" followed by \"Password:\" - then it should use Username and PasswordB</p></li>\n</ul>\n\n<p></p>\n\n<pre><code>#!/bin/bash\n# Declare host variable as the input variable\nhost=$1　\n # Start the expect script\n(expect -c \"\nset timeout 20\n# Start the session with the input variable and the rest of the hostname\nspawn telnet $host\nset timeout 3 \nif {expect \\\"Password:\\\"} {\nsend \\\"PasswordA\\\"}\nelseif { expect \\\"Username:\\\"}\nsend \\\"UsersName\\r\\\"}\nexpect \\\"Password:\\\"\nlog_user 0 \nsend \\\"PasswordB\\r\\\"\nlog_user 1\nexpect \\\"*&gt;\\\"\n# send \\\"show version\\r\\\"\n# set results $expect_out(buffer) \n#expect \\\"Password:\\\"\n#send \\\"SomeEnablePassword\\r\\\"\n# Allow us to interact with the switch ourselves\n# stop the expect script once the telnet session is closed\nsend \\\"quit\\r\\\"\nexpect eof\n\")\n</code></pre>\n"},{"tags":["linux","tsql","bash","shell","freetds"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13096018,"title":"freeTDS bash: Executing sql queries in Microsoft SQL server","body":"<p>I am able to connect to a Microsoft SQL Server 2008 instance via a Mint Linux VM using freeTSD and command line to execute sql statements on it. Now I want automate this in a bash script. I am able to successfully login in my bash script:</p>\n\n<pre><code>TDSVER=8.0 tsql -H servername -p 1433 -D dbadmin -U domain\\\\Administrator -P password\n</code></pre>\n\n<p>I then have my SQL query:</p>\n\n<pre><code>USE dbname GO delete from schema.tableA where ID &gt; 5 GO delete from schema.tableB where ID &gt; 5 GO delete from schema.tableC where ID &gt; 5 GO exit\n</code></pre>\n\n<p>This works when doing manually via freeTSD command line, but not when I put in bash file. I followed this post: <a href=\"http://stackoverflow.com/questions/5445374/bash-script-makes-connection-using-freetds-interacts-doesnt-exit-just-hangs\">freeTSD &amp; bash</a>.</p>\n\n<p>Here is my bash script sample:</p>\n\n<pre><code>echo \"USE dbname GO delete from schema.tableA where userid &gt; 5 go delete from schema.tableB where userid &gt; 5 go delete from schema.tableC where ID &gt; 5 GO exit\" &gt; tempfile | TDSVER=8.0 tsql -H servername -p 1433 -D dbname -U domain\\\\Administrator -P password &lt; tempfile\n</code></pre>\n\n<p>the output of the bash script is:</p>\n\n<pre><code>locale is \"en_US.UTF-8\"\nlocale charset is \"UTF-8\"\nDefault database being set to dbname\n1&gt; 2&gt; \n</code></pre>\n\n<p>and then the rest of my script is executed.</p>\n\n<p>Can someone give me a step by step answer to my problem ?</p>\n"},{"tags":["regex","bash","grep","base64"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":38,"score":3,"question_id":13124223,"title":"Ignoring base64 encoded attahments when grepping through .eml files","body":"<p>I've got a huge pile of exported emails in .eml format that I'm grepping through for keywords with something like this:</p>\n\n<pre><code>egrep -iR \"keyword|list|foo|bar\" *\n</code></pre>\n\n<p>This results in a number of false positives when using relatively short keywords due to base64 encoded email attachments like this:</p>\n\n<pre><code>Inbox/Email Subject.eml:rcX2aiCZBfoogjNUShcWC64U7buTJE3rC5CeShpo/Uhz0SeGz290rljsr6woPNt3DQ0iFGzixrdj\nInbox/Email Subject.eml:3qHXNEj5sKXUa3LxfkmEAEWOpW301Pbarq2Jr2IswluaeKqCgeHIEFmFQLeY4HIcTBe3wCf6HzPL\n</code></pre>\n\n<p>Is there a regex I can write that will identify and exclude these matches, or can I tell grep to stop reading a file once it gets to a line that says \"Content-Transfer-Encoding: base64\"?</p>\n"},{"tags":["bash","tcsh"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13082038,"title":"execute tcsh command in bash script","body":"<p>In a bash script I need to execute this tcsh command. This command works fine in a tcsh command prompt but not in my bash script.</p>\n\n<pre><code>eval `/app/modules/0/bin/modulecmd tcsh $variable`\n</code></pre>\n\n<p>I have tried several things like adding</p>\n\n<pre><code>/usr/bin/tcsh -c eval `/app/modules/0/bin/modulecmd tcsh $variable`\n</code></pre>\n\n<p>but then it says: No such file or directory.</p>\n\n<p>Edit: current code:</p>\n\n<pre><code># hook for some commands\n\necho 'To be sure the version that are loading exist for your platform plase use: \"module aplikation load/version\" instead of \"module load application\". A check will then be done.'\ncmd=$(basename \"$0\") # it givs error here if i start with: tcsh -v xmodule load firefox/3.6.13     \nvar1=$(echo \"$@\" | awk '{print $2}' | cut -f1 -d\"/\") # Gets the application name and put it into var1\nvar2=$(echo \"$@\" | grep -o '[^/]*$')  # Gets version name and put it into var2 \n\nif [[ $cmd = \"xmodule\" ]]\n        then\n#First if statement: checking if a spesific version of an apllication is requested.\n        if  [[ ${@} =~ .*/.* &amp;&amp; ${@} =~ ((^)|([ ]))load(($)|([ ])) ]]\n        then\n           if find /app/$var1 -noleaf -maxdepth 1 -type l -o -type d | grep $var2; then #matching version to symlink or dir in /app/appname/\n           echo \"$@\"\n           tcsh -c 'eval `/app/modules/0/bin/modulecmd tcsh $@`'  #execute the module command as normal if version exist\n           exit $?\n        else\n           echo \"Could not find $var1 or $var2, one of these things happend:\"\n           echo \"$var1 was misspelled\"\n           echo \"$var2 was misspelled\"\n           echo \"version does exist as a module but not for your platform (see module avail $var1). Printing a list of suported versions:\"\n                ls /app/$var1/\n           echo \"exiting: please rety again\"\n           exit $?\n        fi\nfi\n# Next check. Checking if default module version is loaded\nfi\nexit\n</code></pre>\n\n<p>EDIT again:</p>\n\n<p>Environmental variables are actually set, but not for the user who runs the script</p>\n\n<blockquote>\n  <ul>\n  <li>/app/modules/0/bin/modulecmd tcsh load gcc/4.3.4\n  setenv LD_LIBRARY_PATH '/app/mpfr/2.4.0/lib:/app/gmp/4.2.4/lib:/usr/lib64/mpi/gcc/openmpi/lib64';setenv LD_RUN_PATH '/app/mpfr/2.4.0/lib:/app/gmp/4.2.4/lib:/app/gcc/4.3.4/lib64:/app/gcc/4.3.4/lib';setenv MANPATH '/app/gcc/4.3.4/man:/app/emacs/23.2/LMWP3/share/man:/app/vim/7.3.021/LMWP3/share/man:/app/xemacs/21.5.29/LMWP3/share/man:/app/j2re/1.6.0_22/LMWP3/man:/usr/lib64/mpi/gcc/openmpi/man:/usr/share/man:/opt/quest/man:/usr/local/man:/usr/man:/opt/lsb/man:/opt/mpich/man:/opt/gnome/share/man:/app/modules/0/man:/app/modules/0/man';setenv PATH '/app/gcc/4.3.4/bin:/app/firefox/3.6.12/LMWP3:/app/emacs/23.2/LMWP3/bin:/app/sametime/8.0.2:/app/nxclient/3.4.0.7/LMWP3/bin:/app/vim/7.3.021/LMWP3/bin:/app/xemacs/21.5.29/LMWP3/bin:/app/thunderbird/3.1.6/LMWP3:/app/thunderbird/3.1.6/LMWP3/bin:/app/openoffice/3.2.1/LMWP3/opt/openoffice.org3/program:/app/openoffice/3.2.1/LMWP3/openoffice.org3/program:/app/j2re/1.6.0_22/LMWP3/bin:/app/ica/client/11.1:/app/acroread/9.4.0/LMWP3/Adobe/Reader9/bin:/home/ebrfred/.afs/0/rbin:/home/ebrfred/.afs/0/pbin:/env/seln/bin:/home/ebrfred/.afs/0/ibin:/usr/atria/bin:/usr/afsws/bin:/usr/NX/bin:/usr/lib64/mpi/gcc/openmpi/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/quest/bin:/usr/local/bin:/usr/bin/X11:/usr/X11R6/bin:/usr/games:/opt/kde3/bin:/usr/openwin/bin:/opt/cross/bin:/usr/lib/mit/bin:/usr/lib/mit/sbin:/opt/gnome/bin:/usr/lib/qt3/bin:/usr/dt/bin:/usr/ccs/bin:/app/arc/0/bin';setenv <em>LMFILES</em> '/env/common/modules/firefox/3.6.12:/env/common/modules/acroread/9.4.0:/env/common/modules/flashplayer/10.1:/env/common/modules/ica/11.1:/env/common/modules/j2re/1.6.0_22:/env/common/modules/openoffice/3.2.1:/env/common/modules/thunderbird/3.1.6:/env/common/modules/xemacs/21.5.29:/env/common/modules/vim/7.3.021:/env/common/modules/nxclient/3.4.0.7:/env/common/modules/sametime/8.0.2:/env/common/modules/emacs/23.2:/home/ebrfred/.afs/0/imodules/isit_modules:/env/common/modules/gmp/4.2.4:/env/common/modules/mpfr/2.4.0:/env/common/modules/gcc/4.3.4';setenv LOADEDMODULES 'firefox/3.6.12:acroread/9.4.0:flashplayer/10.1:ica/11.1:j2re/1.6.0_22:openoffice/3.2.1:thunderbird/3.1.6:xemacs/21.5.29:vim/7.3.021:nxclient/3.4.0.7:sametime/8.0.2:emacs/23.2:isit_modules:gmp/4.2.4:mpfr/2.4.0:gcc/4.3.4';setenv PKG_CONFIG_PATH '/app/gcc/4.3.4/lib/pkgconfig:/opt/gnome/lib64/pkgconfig:/opt/gnome/share/pkgconfig';+ exit 0</li>\n  </ul>\n</blockquote>\n"},{"tags":["python","bash","virtualenv"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":62,"score":-1,"question_id":13122137,"title":"How to source virtualenv activate in a Bash script","body":"<p>How do you create a Bash script to activate a Python virtualenv?</p>\n\n<p>I have a directory structure like:</p>\n\n<pre><code>.env\n    bin\n        activate\n        ...other virtualenv files...\nsrc\n    shell.sh\n    ...my code...\n</code></pre>\n\n<p>I can activate my virtualenv by:</p>\n\n<pre><code>user@localhost:src$ . ../.env/bin/activate\n(.env)user@localhost:src$\n</code></pre>\n\n<p>However, doing the same from a Bash script does nothing:</p>\n\n<pre><code>user@localhost:src$ cat shell.sh\n#!/bin/bash\n. ../.env/bin/activate\nuser@localhost:src$ ./shell.sh\nuser@localhost:src$ \n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["bash","shell","awk"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":320,"score":2,"question_id":4804282,"title":"Setting FNR value in awk","body":"<p>Is there any way you can alter the default value of FNR and then output it to the screen.</p>\n\n<p>I have tried:</p>\n\n<pre><code>(piped output....) | awk '{FNR=0} {print $0, FNR}'\n</code></pre>\n\n<p>I am hoping that solution will be interhangeable with NR.</p>\n"},{"tags":["linux","bash","web-applications","chroot","lxc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13122860,"title":"execute terminal command in isolated unix environment","body":"<p>I am writing a webapplication in which users are able to execute git, bzr, and hg commands on the server.\nBasically, a user writes the git/bzr/hg command into a html form, hits a button, the command is sent to the server, and executed in the directory the user owns.</p>\n\n<p>How can I make this secure? I need to be able to execute a bash command which can only access and change one specific directory. And preferably, the directory in which the command is execute should not contain additional files. I think this is necessary for chroot.</p>\n"},{"tags":["bash","shared-libraries","music","wav","j"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13114133,"title":"playing WAV music from anywhere","body":"<p>Target: I want to play WAV music from program code</p>\n\n<p>features:</p>\n\n<ol>\n<li>don't want to use one of many libs [ffmpeg, SDL,...]</li>\n<li><p>such way: </p>\n\n<p>execve(\"aplay file.wav\") is too slow for me</p>\n\n<ul>\n<li>course i exec 'aplay' and load file on each execve</li>\n</ul></li>\n<li><p>the way : </p>\n\n<p>nc -l -p 12345 | aplay</p>\n\n<p>and then write raw WAV to socket may be a good idea, but aplay exit after 1st file</p></li>\n</ol>\n\n<p>(really I want to play WAV file from J, but don't want to make complex extern \"C\" init/load/play functions and then load it from shared library. Maybe there is a good and fast universal way to do that from any language using a socket and universe tool, or maybe there is lib for J which could do it, or some of the audio libs are very simple, maybe something else. )</p>\n"},{"tags":["linux","bash","unix","tar"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":9780956,"title":"tar the files in a directory and put the archive in another directory","body":"<p>I'm trying to tar all of the files in a directory (echo 1) to a tar archive called [directory name].tar in the archive directory (second echo). Is this correct ?</p>\n\n<pre><code>#!/bin/bash\n\n#Author\n#Josh\n++++++++++++++++++++++++++\necho \"Please enter the name of a folder to archive\" \n++++++++++++++++++++++++++\necho \"Please enter a foldername to store archives in\"\n++++++++++++++++++++++++++\ntouch fname\n+++++++++++++++++++++++++\ntar fname2.tar\n</code></pre>\n"},{"tags":["bash","sed","search-and-replace"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13112676,"title":"Search and replace with sed by both in pattern and line","body":"<p>I went through lots of similar posts but none could be applied to mine.</p>\n\n<p>I would like to search and replace using sed in some particular lines in a way that in only matches the <strong>first occurrence</strong>; lets say I have this part of the script:</p>\n\n<pre><code>processor  &lt;- read.table(\"../mall_all/adpcm/FULL_DB-constprop\", header=TRUE, colClasses=c(\"reassociate\"=\"factor\", \"scalarrepl\"=\"factor\", \"inline\"=\"factor\", \"sccp\"=\"factor\", \"loop_reduce\"=\"factor\"))\n\nprocessor&lt;-processor[-c(20:40)]\n\nprocessor$intensity &lt;- processor$int_high - processor$int_low\nprocessor$performance&lt;- processor$perf_high - processor$perf_low\nprocessor&lt;-processor[-c(1:4)]\nprocessor&lt;-processor[,!names(processor) %in% c(\"constprop\")]\n</code></pre>\n\n<p>I want to keep changing the <strong>$constprop</strong> variable in</p>\n\n<p><code>\"../mall_all/adpcm/FULL_DB-constprop\"</code></p>\n\n<p>AND </p>\n\n<pre><code>[,!names(processor) %in% c(\"constprop\")]\n</code></pre>\n\n<p>in a loop that I wrote, the problem is; I want the <strong>colClasses parameteres</strong> AND <strong>the rest of the scripts</strong> remains the same while entering the loop (the loop has the compiler options like: reassociate, inline, constprop, etc)</p>\n\n<p>I was wondering why my search and replace didn't work : </p>\n\n<pre><code>set -x\ncompilerOptionList=\"constprop dce inline instcombine licm loop_reduce loop_rotate loop_unroll loop_unswitch loop_unswitch mem2reg memcpyopt reassociate scalarrepl sccp simplifycfg \"\n\nstringToBeReplaced=constprop\n\nfor compilerOption in $compilerOptionList\ndo\n        echo \"Using compiler option: $compilerOption\"\n\n        //here you could see  the sed scripts\n\n        sed -i \"1,15  /FULL_DB/,/header/ s/$stringToBeReplaced/$compilerOption/\" r.scr\n        stringToBeReplaced=$compilerOption\n        make\n        mv Rplots.pdf Rplots_adpcm_$compilerOption.pdf\n        echo \"DONE! $compilerOption\"\ndone\n</code></pre>\n\n<p>Thanks all for your time and help ;)</p>\n\n<p>Amir</p>\n"},{"tags":["bash","unix","io-redirection"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":120,"score":1,"question_id":11013374,"title":"If redirecting STDERR to STDOUT and redirecting STDOUT to a file, why are STDERR messages not showing in the file?","body":"<p>I made a quick little script, test.sh, that looks like the following:</p>\n\n<pre><code>echo \"StdErr\" &gt; /dev/stderr\necho \"StdOut\" &gt; /dev/stdout\n</code></pre>\n\n<p>According to the answers to this <a href=\"http://stackoverflow.com/questions/637827/redirect-stderr-and-stdout-in-a-bash-script\">SO question</a>, and the <a href=\"http://tldp.org/LDP/abs/html/io-redirection.html\" rel=\"nofollow\">Advanced Bash-Scripting Guide</a>, the following should redirect stderr to stdout from the script above:</p>\n\n<pre><code>$ sh /tmp/test.sh 2&gt;&amp;1 \n</code></pre>\n\n<p>And indeed it does:</p>\n\n<pre><code>$ sh /tmp/test.sh 2&gt;&amp;1 |tee file;\n$ cat file\nStdErr\nStdOut\n</code></pre>\n\n<p>The question that I am wondering is where does the output from stderr go in the following code?</p>\n\n<pre><code>$ sh /tmp/test.sh &gt; file 2&gt;&amp;1\n$ cat file\nStdOut\n</code></pre>\n\n<p>I am using GNU bash, version 4.0.24(2)-release.</p>\n"},{"tags":["bash","unix","command-line","sed"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":13108503,"title":"Reverse input order with sed","body":"<p>I have a file, lets call it 'a.txt' and this file contains the following text line</p>\n\n<pre><code>do to what\n</code></pre>\n\n<p>I'm wondering what the SED command is to reverse the order of this text to make it look like</p>\n\n<pre><code>what to do\n</code></pre>\n\n<p>Do I have to do some sort of append? Like append 'do' to 'to' so it would look like</p>\n\n<p>to ++ do (used ++ just to make it clear)</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13121503,"title":"merge/concatenate based on a condition","body":"<p>I have two files I'm trying to join/merge based on columns 1 and 2.</p>\n\n<p><strong>input1</strong></p>\n\n<pre><code>22  42960000    rs149201999 A   AC  100 PASS    LDAF=0.0649;RSQ=0.8652;AN=2184;ERATE=0.0046;VT=SNP;AA=.;AVGPOST=0.9799;THETA=0.0149;SNPSOURCE=LOWCOV;AC=134;AF=0.06;ASN_AF=0.04;AMR_AF=0.05;AFR_AF=0.10;EUR_AF=0.06\n</code></pre>\n\n<p><strong>input2</strong></p>\n\n<pre><code>22  42960000    .   A   AC  .   .    ;AA=1;AFE=0.989691;ASNE=1;EUN=0.992509;AFW=1;MED=0.991071;LAT=1\n</code></pre>\n\n<p><strong>And output will be</strong></p>\n\n<pre><code>22  42960000    .   A   AC  .   .    ;AA=1;AFE=0.989691;ASNE=1;EUN=0.992509;AFW=1;MED=0.991071;LAT=1;LDAF=0.0649;RSQ=0.8652;AN=2184;ERATE=0.0046;VT=SNP;AA=.;AVGPOST=0.9799;THETA=0.0149;SNPSOURCE=LOWCOV;AC=134;AF=0.06;ASN_AF=0.04;AMR_AF=0.05;AFR_AF=0.10;EUR_AF=0.06\n</code></pre>\n\n<p>note each column is separated by tab.</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13122147,"title":"Prevent expressions enclosed in backticks from being evaluated in heredocs","body":"<p>I have a text like this:</p>\n\n<pre><code>foo bar\n`which which`\n</code></pre>\n\n<p>If I do this using heredoc, I get a blank file:</p>\n\n<pre><code>➜  ~  echo &lt;&lt;EOT &gt; out\nheredoc&gt; foo bar\nheredoc&gt; `which which`\nheredoc&gt; EOT\n➜  ~  cat out\n\n➜  ~  \n</code></pre>\n\n<p>How can I do this?</p>\n\n<h3>Edit</h3>\n\n<p>Oh sorry, I meant to do <code>cat</code>. Problem is that it writes this to the file: <code>which: shell built-in command</code>, ie, evaluations backticks. Any way to do this without evaluating?</p>\n\n<p>With <code>cat</code>, I get</p>\n\n<pre><code>➜  ~  cat &lt;&lt;EOT &gt; out\nheredoc&gt; foo bar\nheredoc&gt; `which which`\nheredoc&gt; EOT\n➜  ~  cat out\nfoo bar\nwhich: shell built-in command\n➜  ~  \n</code></pre>\n\n<p>I don't want <code>which which</code> to be evaluated.</p>\n"},{"tags":["bash","script","gnu-screen"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13121871,"title":"Screen keeps terminating","body":"<p>I am trying to run a script in a screen that uses <code>inotifywait</code> to check for new files being created and then runs a script when an event that matches some parameters occurs. For some reason screen keeps terminating even though the script being run is looped.</p>\n\n<p>I start the screen with screen -d -m -S scriptname //path to .sh and the looped part of the script look like this</p>\n\n<pre><code>#start folder monitoring\nwhile fileevent=$(inotifywait -rq -e create $path_to_monitor); do CheckFileEvent; done\n</code></pre>\n"},{"tags":["python","django","bash","shell","gunicorn"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":13118362,"title":"gunicorn - not taking config file if executed from shell script","body":"<p>This is the code for my shell script : </p>\n\n<pre><code>#!/bin/bash  \nsource /path/to/active\ngunicorn_django -c /path/to/conf.py -D\n</code></pre>\n\n<p>The above sh file when executed, starts gunicorn process but it is not using the config file . </p>\n\n<p>But, if i execute the command directly from the command line, like </p>\n\n<pre><code>gunicorn_django -c path/to/conf.py -D\n</code></pre>\n\n<p>then it is using the config file . </p>\n\n<p>Also, in the sh file, if i give options directly like -w 3 -error-logfile etc.. then it is taking options .</p>\n"},{"tags":["bash","script","bacula"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13026892,"title":"Prevent security-query in bacula scripting","body":"<p>I'm trying to script bacula to delete old files that are not used any more. While there are over 1000 old files im not willing to do it manualy. </p>\n\n<p>How far I've come</p>\n\n<pre><code>for filename in $(echo \"list volume\" |bconsole |grep Purged |awk -F\\| '{print $3}')\ndo \n    echo \"delete volume=2012-10-19_23h40m\" | bconsole\ndone\n</code></pre>\n\n<p>But now I have the problem of the security question where someone have to enter \"yes\"/\"no\". </p>\n\n<blockquote>\n  <p>Are you sure you want to delete Volume \"2012-10-19_23h40m\"? (yes/no)</p>\n</blockquote>\n\n<p>But the bconsole program is just exiting!</p>\n\n<p>Any ideas?</p>\n"},{"tags":["linux","bash","cp"],"answer_count":5,"favorite_count":3,"up_vote_count":21,"down_vote_count":0,"view_count":20010,"score":21,"question_id":947954,"title":"what's the option for cp to create a directory if not exists?","body":"<p>Here is what I tried but failed:</p>\n\n<pre><code>[root@file nutch-0.9]# cp -f urls-resume /nosuchdirectory/hi.txt\ncp: cannot create regular file `/nosuchdirectory/hi.txt': No such file or directory\n[root@file nutch-0.9]#\n</code></pre>\n\n<p>besides,any way to make \">\" work that way,say to create a directory when need?</p>\n\n<pre><code>[root@file nutch-0.9]# echo test &gt; /nosuchtest/hi.txt\n-bash: /nosuchtest/hi.txt: No such file or directory\n</code></pre>\n"},{"tags":["regex","bash","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13118609,"title":"Making regular expressions look nice in shell scripts","body":"<p>I often use grep and sed in my bash scripts.\nFor example, I use a script to remove comments from a template</p>\n\n<p>In this example the comments look like:</p>\n\n<pre><code>/*#  my comments contain text and ascii art:\n *#\n *#  [box1] ------&gt; [box2]o\n *#\n#*/\n</code></pre>\n\n<p>My sed chain to remove these lines looks like:</p>\n\n<pre><code>sed '/^\\/\\*#/d' | sed '/^\\s*\\*#/d' | sed '/^\\s*#\\*\\//d'\n</code></pre>\n\n<p>I my scripts, I have to escape chars such as <code>\\</code> and <code>/</code>, which makes the code less readable. Therefore, my question is: <strong>How can I write nice-to-read regular expressions for <code>sed</code> in bash scripts?</strong></p>\n\n<p>One way, I can think of, is by using another separator instead of <code>/</code>, as in vim where you can natively use <code>%s#search/text#replace/text#gc</code> (using <code>#</code> the as separator) and therefore allow <code>/</code> as unescaped character. Defining an alternative escape char would also help. I would be interested in how you solve this problem. I am also open for alternative tools in case you think it is only a <code>sed</code> problem.</p>\n"},{"tags":["bash","parallel-processing"],"answer_count":2,"favorite_count":4,"up_vote_count":9,"down_vote_count":0,"view_count":3696,"score":9,"question_id":3811943,"title":"Doing parallel processing in bash?","body":"<p>I've thousands of png files which I like to make smaller with <code>pngcrush</code>. I've a simple <code>find .. -exec</code> job, but it's sequential. My machine has quite some resources and I'd make this in parallel.</p>\n\n<p>The operation to be performed on every png is:</p>\n\n<pre><code>pngcrush input output &amp;&amp; mv output input\n</code></pre>\n\n<p>Ideally I can specify the maximum number of parallel operations.</p>\n\n<p>Is there a way to do this with bash and/or other shell helpers? I'm Ubuntu or Debian.</p>\n"},{"tags":["bash","ssh"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13117146,"title":"Bash script to fetch log files from dev and production fails","body":"<p>I've pieced together the following script:</p>\n\n<p><code>ssh -2 -l root devserver \"cd /var/log/httpd; ls | grep -v 'gz' | xargs -- tail -n 15\"</code></p>\n\n<p>This logs on to the devserver, chagnes directory to the httpd logs, lists them, removes the hundreds of compressed historical rotations, then pipes this in to tail. </p>\n\n<p>Makes it easy to see what sort of errors are occurring. This works when I ssh in myself, then execute the commands in quotes. However, when using this as a script the output from production is garbled and I get notice chimes on dev, almost like it's treating the output like a command rather than simple text.</p>\n\n<p>I'm sure there's some escaping or somesuch I'm missing.</p>\n\n<p>Notes:\n- SSHing in as root because the httpd logs aren't readable by the usual ssh user. \n- Because tail failed to find the files piped in from grep when I wasn't in the directory in question.</p>\n"},{"tags":["bash","command-line"],"answer_count":4,"favorite_count":30,"up_vote_count":114,"down_vote_count":0,"view_count":75515,"score":114,"question_id":255898,"title":"How to iterate over arguments in bash script","body":"<p>I have a complex command that I'd like to make a shell/bash script of.  I can write it in terms of <code>$1</code> easily:</p>\n\n<pre><code>foo $1 args -o $1.ext\n</code></pre>\n\n<p>I want to be able to pass multiple input names into the script - what's the right way to do this?  Of course I want to handle filenames with spaces in them.</p>\n"},{"tags":["bash","shell","zsh","exit-code"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12999830,"title":"Getting exit code of last shell command in another script","body":"<p>I am trying to beef up my notify script. The way the script works is that I put it behind a long running shell command and then all sorts of notifications get invoced after the longrunning script finished.</p>\n\n<p>For example:</p>\n\n<pre><code>sleep 100; my_notify\n</code></pre>\n\n<p>It would be nice to get the exit code of the long running script, the problem is that calling <code>my_notify</code> creates a new process that does not have access to the <code>$?</code> variable.</p>\n\n<p>Compare:</p>\n\n<pre><code>~ $: ls nonexisting_file; echo \"exit code: $?\"; echo \"PPID: $PPID\"\nls: nonexisting_file: No such file or directory\nexit code: 1\nPPID: 6203\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>~ $: ls nonexisting_file; my_notify      \nls: nonexisting_file: No such file or directory\nexit code: 0\nPPID: 6205\n</code></pre>\n\n<p>The <code>my_notify</code> script has the following in it:</p>\n\n<pre><code>#!/bin/sh\necho \"exit code: $?\"\necho \"PPID: $PPID\"\n</code></pre>\n\n<p>I am looking for a way to get the exit code of the previous command without changing the structure of the command too much. I am aware of the fact that if I change it to work more like <code>time</code>, e.g. <code>my_notify longrunning_command...</code> my problem would be solved, but I actually like that I can tack it at the end of a command and I fear complications of this second solution.</p>\n\n<p>Can this be done or is it fundamentally incompatible with the way that shells work?</p>\n\n<p>My shell is <code>zsh</code> but I would like it to work with <code>bash</code> as well.</p>\n"},{"tags":["linux","bash","tcl","ns2"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13112831,"title":"Parameters in TCL using ns2","body":"<p>how can i sent this values </p>\n\n<pre><code>24.215729\n24.815729\n25.055134\n27.123499\n27.159186\n28.843474\n28.877798\n28.877798\n</code></pre>\n\n<p>to tcl input argument?\nas you know we cant use pipe command because tcl dosent accept in that way!\nwhat can i do to store this numbers in tcl file(the count of this numbers in variable and can be 0 to N and in this example its 7)</p>\n"},{"tags":["django","bash","shell","gunicorn"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13117000,"title":"shell script - store output of \"kill -HUP 1234\" (gunicorn command) to variable and check if the variable contains \"No such process\"","body":"<p>I tried below command to store output to variable : </p>\n\n<pre><code>k=$(kill -HUP 1234)  #command getting executed but not storing to variable\necho \"$k\"\n</code></pre>\n\n<p>For checking if the output contains the word, i can do like this  :</p>\n\n<pre><code>  if [[ outputvar =~ .*No such process*. ]]\n</code></pre>\n\n<p>As per the examples, above should work , but i donno why its not working . Can you tell me correct way so that if I cannot restart the process, I can atleast start a new process with direct gunicorn_django command </p>\n"},{"tags":["bash"],"answer_count":9,"favorite_count":15,"up_vote_count":45,"down_vote_count":0,"view_count":10842,"score":45,"question_id":1885525,"title":"How do I prompt a user for confirmation in bash script?","body":"<p>I want to put a quick \"are you sure?\" prompt for confirmation at the top of a potentially dangerous bash script, what's the easiest/best way to do this?</p>\n"},{"tags":["bash","shell","script","timeout"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13115419,"title":"How to timeout within a bash script?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/687948/timeout-a-command-in-bash-without-unnecessary-delay\">Timeout a command in bash without unnecessary delay</a>  </p>\n</blockquote>\n\n\n\n<p>So this is what I am trying to do -</p>\n\n<pre><code>for test in `ls Tests`; do\n\nfor file in `ls FileFolder`; do\n\noutput=`python devcap $test $file`\n\necho $test $file $output &gt;&gt;result.txt\n\ndone\n\ndone\n</code></pre>\n\n<p>How do I timeout the $output if it takes longer than say 5 seconds and move to the next $file?</p>\n\n<p>Can I redirect the stderr to result.txt as well?</p>\n"},{"tags":["linux","bash","sorting"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5942,"score":0,"question_id":537191,"title":"The sort -R command doesn't sort lines randomly in Linux","body":"<p>I can't get --random-sort to work with the sort command on a Fedora Linux-system.</p>\n\n<p>Some context information:</p>\n\n<pre><code>$ cat /etc/fedora-release\nFedora release 7 (Moonshine)\n$ which sort\n/bin/sort\n$ man sort | grep -A 2 '\\-R'\n       -R, --random-sort\n              sort by random hash of keys\n\n$ man sort | grep -A 3 '\\-R'\n       -R, --random-sort\n              sort by random hash of keys\n\n       --random-source=FILE\n</code></pre>\n\n<p>And the test:</p>\n\n<pre><code>$ echo -e \"2\\n1\\n3\\n5\\n4\"\n2\n1\n3\n5\n4\n$ echo -e \"2\\n1\\n3\\n5\\n4\" | sort -r # Sort in reverse order\n5\n4\n3\n2\n1\n$ echo -e \"2\\n1\\n3\\n5\\n4\" | sort -R # Sort in random order\n1\n2\n3\n4\n5\n$ # Fail! That's not random (I've tried it multiple times.)\n</code></pre>\n"},{"tags":["java","linux","bash","unix","script"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13113462,"title":"Bash multi input Java tester","body":"<p>I am currently trying to make a bash testing script that will...</p>\n\n<p>1) Go into many peoples folders</p>\n\n<p>2) Compile their two java files</p>\n\n<p>3) Run two quick tests for the the compiled results and send the output to a file to be saved in their folder</p>\n\n<p>4) Take the results of those four result files, and dump them into one result file with a template at the top for me to input the results</p>\n\n<p>... and I currently have most of this done. My only issue is that their program asks for a couple lines of input, for example...</p>\n\n<p>Input num 1: </p>\n\n<p>Input num 2:</p>\n\n<p>Input num 3:</p>\n\n<p>... and so on, and I am not sure how to get it to continue putting input into their program. Do I need an EOF after my hard coded input in my bash file?? Here is what I have so far...</p>\n\n<pre><code>#! /bin/bash\n\n\nfor i in $(find . -maxdepth 1 -type d)\ndo\n\n    pwd\n    pushd \"$i\"\n    pwd\n\n    if [ -f \"First.java\" ];\n    then\n        javac -cp . First.java\n        echo easyFirst.txt | java -cp . First - &gt; easyFirstResult\n        echo hardFirst.txt | java -cp . First - &gt; hardFirstResult\n    fi\n\n    if [ -f \"Second.java\" ];\n    then\n        javac -cp . Second.java\n        echo easySecond | java -cp . Second - &gt; easySecondResult\n        echo hardSecond | java -cp . Second - &gt; hardSecondResult\n    fi\n\n\n    printf \"easyFirstResult\\t: \\hardFirstResult\\t: \\easySecondResult\\t: \\hardSecondResult\\t: \" &gt; lab5grade.txt\n\n    popd\n\ndone\n</code></pre>\n\n<p>P.S. Everything is working besides the multi-line input, and I have two text files with my hard coded input to test the code.</p>\n\n<p>Thanks!</p>\n"},{"tags":["bash","shell","pipes"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13111633,"title":"Write mplayer's output to fifo and read it","body":"<p>I'm trying write simple notify app in bash. I want to read output from mplayer, parse it and display through notify-send.</p>\n\n<p>I can get desired info from mplayer using this:</p>\n\n<pre><code>mplayer &lt;url&gt; | grep ICY\n</code></pre>\n\n<p>and then parse in using sed.</p>\n\n<p>I create named pipe, tell mplayer to write it and then I'm reading from it. Unfortunately, it doesn't work. Here's my script:</p>\n\n<pre><code>$fifo=~/.rp/fifo\nmkfifo $fifo\n\nmplayer &lt;url&gt; 2&gt;/dev/null | grep ICY 1&gt; $fifo &amp;\n\nwhile read line &lt; $fifo; do\n    echo $line\ndone\n\nwait\n</code></pre>\n\n<p>Program keeps waiting to input from $fifo. I tried following in other terminal, while this script is running:</p>\n\n<ol>\n<li><p>Run</p>\n\n<pre><code>echo \"Test\" &gt; .rp/fifo\n</code></pre>\n\n<p>Terminal with running script shows \"Test\"</p></li>\n<li><p>Run</p>\n\n<pre><code>echo \"ICY\" | grep ICY &gt; .rp/fifo\n</code></pre>\n\n<p>also works.</p></li>\n<li><p>Run</p>\n\n<pre><code>mplayer &lt;url&gt; | grep ICY &gt; .rp/fifo\n</code></pre>\n\n<p>and it <strong>doesn't</strong> work.</p></li>\n</ol>\n\n<p>Is I said above, the combination of mplayer | grep works fine. grep > $fifo works fine. I don't understand why mplayer | grep > $fifo doesn't work. </p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13111413,"title":"bash complete from two sources, folders and keys from array","body":"<p>I am trying to define a bash function, <code>mycd</code>. This function uses an associative array <code>mycdar</code>. If the key exists in the array the function will change directory to the corresponding value of the key. If the key doesn't exist it will change to the dir provided in the command line.</p>\n\n<p>What I would like to do is to have completion for this function, from both they keys of the associated array or from the folders existing in the current directory.</p>\n\n<p>Thank you.</p>\n"},{"tags":["bash","ssh","nohup","mutt"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1713,"score":4,"question_id":4113168,"title":"starting remote script via ssh containing nohup","body":"<p>I want to start a script remotely via ssh like this:</p>\n\n<pre><code>ssh user@remote.org -t 'cd my/dir &amp;&amp; ./myscript data my@email.com'\n</code></pre>\n\n<p>The script does various things which work fine until it comes to a line with nohup:</p>\n\n<pre><code>nohup time ./myprog $1 &gt;my.log &amp;&amp; mutt -a ${1%.*}/`basename $1` -a ${1%.*}/`basename ${1%.*}`.plt $2 &lt; my.log 2&gt;&amp;1 &amp;\n</code></pre>\n\n<p>it is supposed to do start the program myprog, pipe its output to mylog and send an email with some datafiles created by myprog as attachment and the log as body. Though when the script reaches this line, ssh outputs:</p>\n\n<blockquote>\n  <p>Connection to remote.org closed.</p>\n</blockquote>\n\n<p>What is the problem here?</p>\n\n<p>Thanks for any help</p>\n"},{"tags":["linux","bash","command-line","newline"],"answer_count":4,"favorite_count":4,"up_vote_count":6,"down_vote_count":0,"view_count":6387,"score":6,"question_id":3569997,"title":"View line-endings in a text file","body":"<p>I'm trying to use something in bash to show me the line endings in a file printed rather than interrupted. The file is a dump from SSIS/SQL Server being read in by a Linux machine for processing.</p>\n\n<p>Is there any switches within <code>vi</code>, <code>less</code>, <code>more</code>, etc?</p>\n\n<p>In addition to seeing the line-endings, I need to know what type of line end it is (CRLF or LF).</p>\n"},{"tags":["linux","bash","grep","wc"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":38,"score":3,"question_id":13112475,"title":"get count of the word in all files","body":"<p>I have a directory tree with a bunch of folders and subfolders in it and a bunch of files in those sub folders. I need to get the count of the word 'Hello' in each of those files and display the result as 'File 'a' has 'Hello' n times', 'File 'b' has 'Hello' m times' and so on. How do i write a script in linux, so that i can get the word count for the word hello in each of these files. I have tried some grep combinations with 'wc' after browsing through net , but that gave me the total count from all the files in all the folders.</p>\n\n<p>Thanks </p>\n"},{"tags":["bash","virtualenvwrapper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13111881,"title":"Scripting virtualenvwrapper mkvirtualenv","body":"<p>I'm writing a <a href=\"http://github.com/greenmoss/NotOrion\" rel=\"nofollow\">game</a> in python 2.7, and want to script the \"bootstrap\" of my game's development environment, and then invoke <a href=\"https://github.com/seomoz/shovel\" rel=\"nofollow\">shovel</a>. If virtualenvwrapper is not detected, I will use a <a href=\"http://stackoverflow.com/questions/4324558/whats-the-proper-way-to-install-pip-virtualenv-and-distribute-for-python\">virtualenv bootstrap solution</a>. However if virtualenvwrapper <strong>is</strong> detected, I would like to use it instead.</p>\n\n<p>The problem is that the virtualenvwrapper inline shell functions are not inherited by my bootstrap script. As far as I know, that rules out running something like \"mkvirtualenv NotOrion\". Since the environment variable \"VIRTUALENVWRAPPER_VIRTUALENV\" <strong>is</strong> set (in my case, from <a href=\"http://www.macports.org/ports.php?by=name&amp;substr=virtualenvwrapper\" rel=\"nofollow\">macports</a>: <code>/opt/local/bin/virtualenv-2.7</code>), I tried using it directly instead:</p>\n\n<pre><code>#!/usr/bin/env bash\n\n# Name your first \"bootstrap\" environment:\nENV_NAME=NotOrion\n# Options for your first environment:\nENV_OPTS='--no-site-packages --distribute'\n\nunset PYTHONDONTWRITEBYTECODE\n\nfunction create_virtualenvwrapper_venv {\n  echo \"installing into virtualenvwrapper directory\"\n  cd $WORKON_HOME\n  $VIRTUALENVWRAPPER_VIRTUALENV $ENV_OPTS $ENV_NAME\n  cd -\n  #mkvirtualenv $ENV_NAME\n  #workon $ENV_NAME\n}\n\nfunction create_standalone_venv {\n  # not run/snipped\n}\n\nif [ -z \"$VIRTUALENVWRAPPER_VIRTUALENV\" ]; then\n  create_standalone_venv\nelse\n  create_virtualenvwrapper_venv\nfi\n\npip install shovel\nshovel help\n</code></pre>\n\n<p>My bootstrap script finishes installing shovel. However running shovel (eg the last line) produces warnings:</p>\n\n<pre><code>/Users/me/.virtualenvs/NotOrion/bin/shovel:25: UserWarning: Module argparse was already imported from /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/argparse.pyc, but /Users/me/.virtualenvs/NotOrion/lib/python2.7/site-packages is being added to sys.path\nimport pkg_resources\n# normal shovel output snipped\n</code></pre>\n\n<p>So is it possible to somehow invoke \"mkvirtualenv\" from a script? If not, can I run something else from my script that has the same effect but <strong>doesn't</strong> produce warnings?</p>\n"},{"tags":["ruby","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":68,"score":3,"question_id":13111201,"title":"` (backtick) is unexpected token","body":"<p>I'm doing some command line executions I learned in <a href=\"http://mentalized.net/journal/2010/03/08/5_ways_to_run_commands_from_ruby/\" rel=\"nofollow\">this blog post</a> such as <code>system</code> or <code>IO.popen</code> on the file, and am getting errors.</p>\n\n<p>Why is the backtick appearing, what does it mean, and how do I continue? Please explain.</p>\n\n<pre><code> system('./err.rb')\n-bash: syntax error near unexpected token `'./err.rb''\n</code></pre>\n\n<p>Similarily, when I run <code>IO.popen</code>:</p>\n\n<pre><code>output = IO.popen('./err.rb')\n-bash: syntax error near unexpected token `('\n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13111474,"title":"How to retrieve lib directory?","body":"<p>How can I use bash to retrieve lib directory? For example: <code>/usr/lib</code> or <code>/usr/lib64</code>?</p>\n\n<p><em>Edit</em></p>\n\n<p>I'm packaging an RPM which copies some files to <code>%{_libdir}</code>. So I'd like to know the path to lib directory… I can use <code>if [ -f \"path-to-my-file\" ]; then ...</code> but I wonder if there is a command line?</p>\n"},{"tags":["bash","shell","applescript"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":13090235,"title":"applescript and terminal ( run several do shell script in one terminal window )","body":"<p>I do have several shell scripts whom are get activate not really behind each other.</p>\n\n<p>But I want to stay in the same terminal window.</p>\n\n<p>To simplify the problem, lets say that as example</p>\n\n<p>first script. - cd to the working directory\nsecond.       - do some things and get files from that directory\nthird.        - dome more thing on the newly files/folders in that directory.\nfourth.       - ....</p>\n\n<p>How can I let script 2 and 3 ( all the script thus ) run in that very same directory and window that is opened during script 1?</p>\n\n<p>F.e how can I avoid using the full path to that folder for every file.</p>\n\n<p>EDIT: After adayzdone's answer I realize that I forgot to mention that I need also administrator privileges for one of the scripts</p>\n\n<p>EDIT2: For now I use this</p>\n\n<pre><code>tell application \"Terminal\"\n    set newTab to do script\n    set current settings of newTab to settings set \"Grass\"\n    do script \"bin/sh/ echo 'xx' | su;\" in newTab\n    do script \"cd \" &amp; quoted form of realParentPath in newTab\n    do script shellscript1 in newTab\n    do script shellscript..n in newTab\n    activate\nend tell\n</code></pre>\n\n<p>but still no dice with the privileges.</p>\n"},{"tags":["osx","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":13109993,"title":"How to use wildcard with files which names start with '-'?","body":"<p>There are some files which names start with '-', such as '-1.png', '-2.png'. I can't operate them with wildcard, because those names are regarded as options:</p>\n\n<pre><code>bash-3.2$ ls *.png\nls: illegal option -- .\nusage: ls [-ABCFGHLOPRSTUWabcdefghiklmnopqrstuwx1] [file ...]\nbash-3.2$ rm *.png\nrm: illegal option -- 1\nusage: rm [-f | -i] [-dPRrvW] file ...\n       unlink file\n</code></pre>\n\n<p>How to solve this problem?</p>\n"},{"tags":["osx","bash","fortran","sh","gfortran"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13102926,"title":"Multiple modules gfortran compiling","body":"<p>sas the title said i have a folder with 354 .f90 modules (and the main file). In the readme this is suggested:</p>\n\n<pre><code>The best approach is to unzip the archive source.zip\nextracting all 354 program files into a directory of your choice. \nThen you can compile with the command\ngfortran *.f90 -o app.exe\n</code></pre>\n\n<p>I'm on Mac so i installed gfortran but doing the command written above doesn't work:</p>\n\n<pre><code>gfortran: *.f90: No such file or directory\n</code></pre>\n\n<p>so i suppose that a bash script is needed (or at least a makefile).\nI'm not used in doing this so what should i do? Do exist some makefile automatic generator?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["regex","bash","if-statement","tcsh"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13103048,"title":"Translation bash to tcsh, if with pattern","body":"<p>I hava following code in bash:</p>\n\n<pre><code>if  [[ $a =~ ^[+-]?([0-9]+\\.?[0-9]*|[0-9]*\\.?[0-9]+)([DdEeQ][+-]?[0-9]+)?$ ]]; then\n</code></pre>\n\n<p>How can I do this in tcsh? I tried: </p>\n\n<pre><code>if  ( $a =~ {^[+-]?{[0-9]+\\.?[0-9]*\\|[0-9]*\\.?[0-9]+}{[DdEeQ][+-]?[0-9]+}?\\$} ) then\n</code></pre>\n\n<p>It doesn't work.</p>\n"},{"tags":["bash","scripting"],"answer_count":7,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":120,"score":4,"question_id":9157934,"title":"$* in bash scripting","body":"<p>Can anybody tell me what does <code>$*</code> mean in bash scripting? </p>\n\n<p>I tried to search on google for it, but I found only about <code>$0</code>, <code>$1</code> and so on.</p>\n\n<p>So, if have a link for this, is welcome.</p>\n\n<p>Thanks!</p>\n"},{"tags":["bash","pipes","tee"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13107783,"title":"Pipe output to two different commands","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/10218103/osx-linux-pipes-into-two-processes\">osx/linux: pipes into two processes?</a>  </p>\n</blockquote>\n\n\n\n<p>Is there a way to pipe the output from one command into the input of two other commands, running them simultaneously?</p>\n\n<p>Something like this:</p>\n\n<pre><code>$ echo 'test' |(cat) |(cat)\ntest\ntest\n</code></pre>\n\n<p>The reason I want to do this is that I have a program which receives an FM radio signal from a USB SDR device, and outputs the audio as raw PCM data (like a .wav file but with no header.)  Since the signal is not music but POCSAG pager data, I need to pipe it to a decoder program to recover the pager text.  However I also want to listen to the signal so I know whether any data is coming in or not.  (Otherwise I can't tell if the decoder is broken or there's just no data being broadcast.)  So as well as piping the data to the pager decoder, I also need to pipe the same data to the <code>play</code> command.</p>\n\n<p>Currently I only know how to do one - either pipe it to the decoder and read the data in silence, or pipe it to <code>play</code> and hear it without seeing any decoded text.</p>\n\n<p>How can I pipe the same data to both commands, so I can read the text and hear the audio?</p>\n\n<p>I can't use <code>tee</code> as it only writes the duplicated data to a file, but I need to process the data in real-time.</p>\n"},{"tags":["bash"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":3718,"score":4,"question_id":1988249,"title":"How do I use su to execute the rest of the bash script as that user?","body":"<p>I've written a script that takes, as an argument, a string that is a concatenation of a username and a project. The script is supposed to switch (su) to the username, cd to a specific directory based upon the project string.</p>\n\n<p>I basically want to do:</p>\n\n<pre><code>su $USERNAME;  \ncd /home/$USERNAME/$PROJECT;  \nsvn update;  \n</code></pre>\n\n<p>The problem is that once I do an su... it just waits there. Which makes sense since the flow of execution has passed to switching to the user. Once I exit, then the rest of the things execute but it doesn't work as desired.</p>\n\n<p>I prepended su to the svn command but the command failed (i.e. it didn't update svn in the directory desired).</p>\n\n<p>How do I write a script that allows the user to switch user and invoke svn (among other things)?</p>\n"},{"tags":["bash","tcsh"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":289,"score":1,"question_id":10317384,"title":"Remove one directory component from path (string manipulation)","body":"<p>I'm looking for the easiest and most readable way to remove a field from a path. So for example, I have /this/is/my/complicated/path/here, and I would like to remove the 5th field (\"/complicated\") from the string, using bash commands, so that it becomes /this/is/my/path.\nI could do this with</p>\n\n<pre><code>echo \"/this/is/my/complicated/path/here\" | cut -d/ -f-4\necho \"/\"\necho \"/this/is/my/complicated/path/here\" | cut -d/ -f6-\n</code></pre>\n\n<p>but I would like this done in just one easy command, something that would like</p>\n\n<pre><code>echo \"/this/is/my/complicated/path\" | tee &gt;(cut -d/ -f-4) &gt;(cut -d/ -f6-)\n</code></pre>\n\n<p>except that this doesn't work.</p>\n"},{"tags":["bash","ubuntu","format","fortune"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13107619,"title":"How to format cowsay output from a bash script","body":"<p>I have a custom motd within a bash script that prints cowsay through this command,</p>\n\n<pre><code>/usr/games/fortune | cowsay -f www \n</code></pre>\n\n<p>I want to find out if there is a way of formatting this output such as shifting the output by a tab or a space ? Do I have to loop through the text manually formatting each line or is there a shorter/better way ?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["bash","debugging","vim","script"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":48,"score":-2,"question_id":13103465,"title":"Bash script debugging with gvim/Pyclewn","body":"<p>Do you know how to use Pyclewn (graphical debugger frontend within gvim) with bashdb (bash debugger) with the clewn/debugger.py file? (see the section number 10 of the <a href=\"http://pyclewn.sourceforge.net/_static/pyclewn.html\" rel=\"nofollow\">man pages of pyclewn</a>). I already use Pyclewn for gdb (programming in C) and pdb (programming in Python). </p>\n\n<p>For bash programming, I tried ddd.3.3.9 (old version of gnu data display debugger because there are some problems with ddd.3.3.12 and bashdb) but this is ugly and there is no color syntax highlighting. I also tried emacs + <a href=\"https://github.com/rocky/emacs-dbgr/wiki\" rel=\"nofollow\">the rocky/dbgr rewrite of GUD</a> (emacs grand unified debugger) but I prefer gvim/Pyclewn. The bash-support.vim plugin is just launching xterm with bashdb so it's not a solution.</p>\n"},{"tags":["bash","alias"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13107092,"title":"why is \"noclobber\" appearing in bash command arguments","body":"<p>There are a bunch of folders in ~/path/ with names that begin with prefix, and I need to access them very frequently. I'm trying to create a shortcut in .bashrc that will make \"prefix example\" run the command \"cd ~/path/prefixexample\".</p>\n\n<p>I encountered the same issue with both functions and aliases:</p>\n\n<pre><code>function prefix(){ \"cd ~/path/prefix$1\"; }\n\nalias prefix=\"cd ~/path/prefix$1\"\n</code></pre>\n\n<p>When I type \"prefix 4\" (the folder path/prefix4 does exist), I get:</p>\n\n<pre><code>bash: cd: path/prefixnoclobber: No such file or directory\n</code></pre>\n\n<p>I don't have admin privileges on this machine, so I can't change some things.</p>\n\n<p>.bashrc already contains a bunch of stuff, but the only relevant thing seems to be \"set noclobber\". I'm pretty sure replacing arguments with the string \"noclobber\" is not part of the functionality of the noclobber switch, and commenting this switch out had no effect.</p>\n"},{"tags":["bash","expect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":41,"score":-1,"question_id":13106607,"title":"SSH login with bash and expect","body":"<p>I have to ssh into numerous devices daily, over and over...\nI can automate it with bash &amp; expect with this script:</p>\n\n<pre><code>#!/usr/bin/expect\nspawn  ssh hostname -l username\nexpect \"password:\"\nsend \"secret\\n\"\ninteract\n</code></pre>\n\n<p>The majority of the devices require 'root' as the login, so the above script works well for that. I'd like to modify the above script to attempt to login once, and if it fails, to switch to another username and prompt me for the password. Is that possible?</p>\n\n<p>I know about keys, and the bad practice of passwords in scripts, it isn't important in my case.</p>\n"},{"tags":["bash","awk","gnu","cut"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":130,"score":2,"question_id":12343156,"title":"how can I split up this string","body":"<p>I am currently trying to sanitize some log files so they are in an easier format to read, and have been trying to use the gnu cut command, which works fairly well, although I cannot really think of a good way to remove the [INFO] part of the string</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>logs/logs/server_1283258036.log:2010-08-31 23:06:51 [INFO] &lt;NateMar&gt; where?!\nlogs/logs/server_1281904775.log:2010-08-15 22:59:53 [INFO] &lt;BoonTheMoon&gt; Â§b&lt;BoonTheMoon&gt;Â§ohhhhhh\nlogs/logs/server_1282136782.log:2010-08-18 16:27:32 [INFO] &lt;pinguin&gt; &lt;pinguin&gt;Â§F :/\nlogs/logs/server_1282136782.log:2010-08-18 16:27:37 [INFO] &lt;TotempaaltJ&gt; &lt;TotempaaltJ&gt;Â§F That helped A LOT\nlogs/logs/server_1282136782.log:2010-08-18 16:27:37 [INFO] &lt;Rizual&gt; Â§b&lt;Rizual&gt;Â§F hm?\nlogs/logs/server_1282136782.log:2010-08-18 16:29:10 [INFO] &lt;pinguin&gt; &lt;pinguin&gt;Â§F bah\nlogs/logs/server_1282136782.log:2010-08-18 16:29:35 [INFO] &lt;TotempaaltJ&gt; &lt;TotempaaltJ&gt;Â§F Finished my houses \nlogs/logs/server_1282136782.log:2010-08-18 16:29:40 [INFO] &lt;TotempaaltJ&gt; &lt;TotempaaltJ&gt;Â§F or whatever\nlogs/logs/server_1282136782.log:2010-08-18 16:30:47 [INFO] &lt;Rizual&gt; Â§b&lt;Rizual&gt;Â§So much iron\nlogs/logs/server_1282136782.log:2010-08-18 16:30:58 [INFO] &lt;TotempaaltJ&gt; &lt;TotempaaltJ&gt;Â§F Ah yes, furnaces don't work.o\nlogs/logs/server_1282136782.log:2010-08-18 16:31:01 [INFO] &lt;Rizual&gt; Â§b&lt;Rizual&gt;Â§F They do\nlogs/logs/server_1282136782.log:2010-08-18 16:31:06 [INFO] &lt;TotempaaltJ&gt; &lt;TotempaaltJ&gt;Â§F Hm\nlogs/logs/server_1282136782.log:2010-08-18 16:31:08 [INFO] &lt;Rizual&gt; Â§b&lt;Rizual&gt;Â§F just need to use /lighter\nlogs/logs/server_1282136782.log:2010-08-18 16:31:12 [INFO] &lt;Valrix&gt; &lt;Valrix&gt;Â§FNotch fixed them?\n</code></pre>\n\n<p>I would ultimately want to get the strings down to something that resembles the following (keep in mind that the logs are in two formats, the older format which has 2 copies of the names, as can be seen in the bulk of the logs above, and also the newer format, which only has the name in there once (can be seen in the first log line, the <code>&lt;natemar&gt;</code> one))</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>2010-08-31 23:06:51 &lt;NateMar&gt; where?!    \n2010-08-15 22:59:53 &lt;BoonTheMoon&gt; ohhhhhh (this one would require both the same editing as above, plus removal of the \"extra\" name Â§b&lt;BoonTheMoon&gt;Â§)    \n</code></pre>\n\n<p>How should I go about doing this? Have thought about using awk, although I'm having a difficult time getting a grip on how that would work, so not sure how to set up something to do that. Any help would be greatly appreciated, thanks! </p>\n"},{"tags":["bash","loops","scripting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13093840,"title":"repetitive instructions bash script","body":"<p>This could easily be any lang...but I'm using bash for now. I'm looking for the understanding behind this that can be replicated across langs.</p>\n\n<p>so...</p>\n\n<p>I'm copying a file up the directory tree and than replacing that file with another.</p>\n\n<pre><code>     cp \"$DIR\"/folder2/file2 \"$DIR\";\n     mv \"$DIR\"/folder1/file1 \"$DIR\"/folder2/file2;\n</code></pre>\n\n<p>Then I take the copied file and move it into another folder..starting the same dance.</p>\n\n<pre><code>     cp \"$DIR\"/folder3/file3 \"$DIR\";\n     mv \"$DIR\"/file2 \"$DIR\"/folder3/file3\n</code></pre>\n\n<p>I want to do this like 100 times+.</p>\n\n<p>what's the most elegant way?</p>\n\n<p>Elegant, in the sense of brief and understandable by someone else.</p>\n"},{"tags":["bash"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13104259,"title":"Extract unique lines from a file in order of their first occurence in bash","body":"<p>I have a file with a list of strings.  I'd like to extract out the unique strings, in the order that they first appear in the file.</p>\n\n<p>So, for instance, if my file contains:</p>\n\n<pre><code>foo\nbar\nfoo\nbar\nbaz\nbar\nfoo\n</code></pre>\n\n<p>I'd like to output:</p>\n\n<pre><code>foo\nbar\nbaz\n</code></pre>\n\n<p>If I just wanted the unique values, I could use <code>sort input|uniq</code>, but this sorts my result alphabetically.</p>\n"},{"tags":["bash","script","github"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13106269,"title":"How can I download the most recent version of a GitHub project to use in a bash script?","body":"<p>I'm working on a script that sets up a CMS (<a href=\"http://statamic.com\" rel=\"nofollow\">Statamic</a>) so that devs can jump write into writing code and not have to manually move stuff around, gather commonly used code from GitHub, and so on.</p>\n\n<p>I need a way to grab the most recent version of a project from GitHub, unzip it, and be able to move stuff around without knowing the lastest sha.</p>\n"},{"tags":["linux","bash","shell"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":903,"score":3,"question_id":4650208,"title":"Shell Script- each unique user","body":"<p>I have a homework assignment: \"for each unique user, report which group they are a member of and when they last logged in\"</p>\n\n<p>So far I have:</p>\n\n<pre><code>#!/bin/sh\n\necho \"Your initial login:\"\nwho | cut -d' ' -f1 | sort | uniq\n\necho \"Now is logged:\"\nwhoami\n\necho \"Group ID:\"\nid -G $whoami\n\ncase $1 in\n   \"-l\") last -Fn 10 | tr -s \" \" ;;\n   *)    last -Fn 10 | tr -s \" \" | egrep -v '(^reboot)|(^$)|(^wtmp a)|(^ftp)' | cut -d\" \" -f1,5,7 | sort -uM | uniq -c\nesac\n</code></pre>\n\n<p>My question is: how I can show the each unique user? The script above only show the more recent user logged in the system, but I need all unique users.</p>\n\n<p>Can anyone help?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":350,"score":4,"question_id":4650906,"title":"How can I shift digits in bash?","body":"<p>I have a homework assignment that is asking to shift a decimal number by a specified amount of digits. More clearly this bash script will take two input arguments, the first is the number(maximum 9 digits) that the shift will be performed on and the second is the number(-9 to 9) of digits to shift. Another requirement is that when a digit is shifted off the end, it should be attached to the other end of the number. One headache of a requirement is that we cannot use control statements of any kind: no loops, no if, and switch cases. </p>\n\n<p>Example: 12345 3 should come out to 345000012 and 12345 -3 should be 12345000</p>\n\n<p>I know that if I mod 12345 by 10^3 I get 345 and then if I divide 12345 by 10^3 I get 12 and then I can just concatenate those two variables together to get 34512. I am not quite sure if that is exactly correct but that is the closest I can get as of now. As far as the -3 shift, I know that 10^-3 is .001 and would work however when I try using 10^-3 in bash I get an error. </p>\n\n<p>I am just lost at this point, any tips would be greatly appreciated.</p>\n\n<p>EDIT: After several hours of bashing (pun intended) my head against this problem, I finally came up with a script that for the most part works. I would post the code right now but I fear another student hopelessly lost might stumble upon it. I will check back and post what I came up with in a week or two. I was able to do it with mods and division. Thank you all for the responses, it really helped me to open up and think about the problem from different angles. </p>\n"},{"tags":["bash","compression"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":22,"score":-1,"question_id":13104834,"title":"Changing compression in memory","body":"<p>I have some large files that I need to change the compression type of for input to a program--I need to unrar them and then gzip (or bzip2) them.  However, they're highly compressed files and I don't have the disk space to unrar them fully then gzip them.  Is there any way to pipe the output of decompression via unrar to gzip or some other compression without saving the entire intermediate result to disk?</p>\n"},{"tags":["bash","csv","grep"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":109,"score":1,"question_id":12814512,"title":"Grep -f and only return the first match","body":"<p>I'm working with a large CSV that follows a basic process.</p>\n\n<ol>\n<li>Backup the working original</li>\n<li>Generate a skeleton CSV</li>\n<li>Read from another CSV, format the contents, and then append it to the skeleton</li>\n<li>Append the data from the backup to the new one.</li>\n</ol>\n\n<p>The issue I'm running into is that when I read in the contents from the backup, I'm using <code>grep -Ev -f</code> with a file containing regexes to exclude undesired data from the backup to be included in the next revision. This currently presents a problem because grep appears to evaluate each regex in the file against every line from STDIN which will cause duplicates. The simple solution would be to simply pipe it through <code>sort | uniq</code> and call it a day but that will screw with the formatting of the csv currently in use. I can elaborate if needed but the short of it is I run a script to bulk process IP addresses but there is also manual editing of the file by other people and with the current form of the script the final output will be all of the automated content with manual entries being at the bottom of the file. </p>\n\n<p>So, is there anyway without some ugly looping of grep to tell it to stop evaluating a line after a pattern is matched? Using <code>-m 1</code> will stop grep after the first match in the whole stream where I need it stop after each new line.</p>\n"},{"tags":["string","bash","parameters","space"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":24,"score":-1,"question_id":13104616,"title":"bash reading string with spaces as parameter","body":"<p>I found on phorum how to solve when a funciton is called with more parameters and each as string with spaces, but how to read string with spaces from input, I mean when somebody call my script. </p>\n\n<p>In this case, user should send two txt files asdresses. So, I know the suffix, but he could also send files that haven't got that suffix. So, is there any way how to read the two file adresses? </p>\n\n<p>I think that this is a basic question (how to read parameters) but I've been unable to solve, 'cause haven't found anything on google and been very big begginer to bash.</p>\n\n<p>thx in advance</p>\n"},{"tags":["bash","smtp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13098268,"title":"smtp header / body seperator","body":"<p>I need to seperate the header and body of a smtp message in bash. I know that a newline is used to indicate the end of the header, but is it always <code>\\n</code>, <code>\\r</code> or  <code>\\r\\n</code>, or do different operating systems use different ones?</p>\n\n<p>How can I do this?</p>\n"},{"tags":["bash","signals","daemon"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13100128,"title":"How to make daemon --stop blocking until underlying process will die?","body":"<p>I have a java process daemonized using <code>daemon</code> command (RHEL 6.2). I'm using following line to start the process and the line below to stop it:</p>\n\n<pre><code>daemon --command \"/opt/my-service\" --respawn --name=my-service --verbose\ndaemon --stop --name=my-service --verbose  \n</code></pre>\n\n<p>Things work until I'll try to restart my process using stop/start approach:</p>\n\n<pre><code>daemon --stop --name=my-service --verbose\ndaemon --command \"/opt/my-service\" --respawn --name=my-service --verbose\n</code></pre>\n\n<p>It the process is running before the above command is executed, then existing process will be stopped but then new one will not be created. Instead, following line will be logged to the <code>/var/log/messages</code>:</p>\n\n<blockquote>\n  <p><code>Oct 27 07:59:46 myhostname my-service: my-service: fatal: failed to become a daemon: Resource temporarily unavailable</code></p>\n</blockquote>\n\n<p>which as far as I understand means that we tried to acquire lock on the pid file but another process was holding the lock on it. Or in the other words: the original process was still running.</p>\n\n<p>What is interesting it can not be reproduced by i.e. following command:</p>\n\n<pre><code>daemon --command \"sleep 30s\" --respawn --name=sleeper --verbose\ndaemon --stop --name=sleeper --verbose\ndaemon --command \"sleep 30s\" --respawn --name=sleeper --verbose\n</code></pre>\n\n<p>then there must be something in my process which causes/exploits asynchronous nature of <code>--stop</code>.</p>\n\n<p>How can I make <code>--stop</code> blocking?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13101621,"title":"Checking if length of array is equal to a variable in bash","body":"<p>I want to check if the length of a bash array is equal to a bash variable (int) or not. My current code looks like this:</p>\n\n<pre><code>if [ \"${#selected_columns}\" -eq \"${number_of_columns}\" ]; then\n    echo \"They are equal!\"\nfi\n</code></pre>\n\n<p>This returns false since the echo statement is never run. However, doing this produces 4 for both of them:</p>\n\n<pre><code>echo \"${#selected_columns[@]}\"\necho \"${number_of_columns}\"\n</code></pre>\n\n<p>What's wrong here? Has it something to do with string versus int?</p>\n"},{"tags":["bash","error-handling","error-logging"],"answer_count":11,"favorite_count":29,"up_vote_count":48,"down_vote_count":0,"view_count":34756,"score":48,"question_id":64786,"title":"Error handling in BASH","body":"<p>What is your favorite method to handle errors in BASH? \nThe best example of handling errors in BASH I have found on the web was written by William Shotts, Jr at <a href=\"http://www.linuxcommand.org\" rel=\"nofollow\">http://www.linuxcommand.org</a>. </p>\n\n<p>William Shotts, Jr suggests using the following function for error handling in BASH:</p>\n\n<pre><code>#!/bin/bash\n\n# A slicker error handling routine\n\n# I put a variable in my scripts named PROGNAME which\n# holds the name of the program being run.  You can get this\n# value from the first item on the command line ($0).\n\n# Reference: This was copied from &lt;http://www.linuxcommand.org/wss0150.php&gt;\n\nPROGNAME=$(basename $0)\n\nfunction error_exit\n{\n\n#   ----------------------------------------------------------------\n#   Function for exit due to fatal program error\n#   \tAccepts 1 argument:\n#   \t\tstring containing descriptive error message\n#   ----------------------------------------------------------------\n\n\n    echo \"${PROGNAME}: ${1:-\"Unknown Error\"}\" 1&gt;&amp;2\n    exit 1\n}\n\n# Example call of the error_exit function.  Note the inclusion\n# of the LINENO environment variable.  It contains the current\n# line number.\n\necho \"Example of error with line number and message\"\nerror_exit \"$LINENO: An error has occurred.\"\n</code></pre>\n\n<p>Do you have a better error handling routine that you use in BASH scripts?</p>\n"},{"tags":["bash","diskusage"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13101643,"title":"Escaping singlequote in random filenames","body":"<p>I have a simple bash script which outputs the total file size using 'du'\nHowever every time I pass a file that contains an apostrophe it presents me with a syntax error.\nSo I'd like to know if there was a way to escape singlequotes without modifying the filenames. Preferably before diskusage processes them.</p>\n\n<p>The code is:</p>\n\n<pre><code>du -chs {query}\n</code></pre>\n\n<p>I use Alfred to pass the files into the script. The application allows the user to escape a few characters but the single quote is not one of them.</p>\n"},{"tags":["c","linux","bash","application","script"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":13081106,"title":"Programming simple GUI applications? A couple considerations","body":"<p>I am wanting to start programming some simple applications that I can use as tools and such. I am hoping these applications will allow me to simplify certain terminal processes I use often. They interact with my local files lots as well as other applications (db2 for example). I have started learning C a little bit for this.</p>\n\n<p>I thought I would use C with embedded bash commands. I was wondering if that was the best/most common method of programming these applications? Is there a better way of doing this? Also, I will need to be able to display the terminal output. Will this be possible? My only issue with this method is that it is not very transferable to non Linux operation system.</p>\n\n<p>Any insight or a push in the general direction would be greatly appreciated.</p>\n"},{"tags":["bash","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":13087868,"title":"Printing column from a string in bash","body":"<p><strong>UPDATED QUESTION</strong>\nOk, so I have a file with lines like this:</p>\n\n<pre><code>44:)   2.884E-02  0.000E+00  0.000E+00  2.780E+02  0.000E+00  0.000E+00  9.990E+02\n45:)   2.884E-02  0.000E+00  0.000E+00  2.780E+02  0.000E+00  0.000E+00  9.990E+02\n1:)   3.593E-02  0.000E+00  0.000E+00  2.780E+02  0.000E+00  0.000E+00  1.000E+05\n2:)   3.593E-02  0.000E+00  0.000E+00  2.780E+02  0.000E+00  0.000E+00  1.000E+05\n</code></pre>\n\n<p>The numbers in the first column run from 1 to x (in this case 45) and then starts over at 1 lots of times. I want to move some of the columns to a separate file. The indexes of the columns I want to move is stored in the variable/array <code>$selected_columns</code> (in this case 2, 5 and 8) and the number of columns I want to move is stored in <code>$number_of_columns</code> (in this case 3).</p>\n\n<p>I then want to create 45 files, one for the selected columns for all <code>1:)</code>, one for the selected columns for all <code>2:)</code> and so forth. I want to make this as general as possible since both the number of columns and the number running from 1 to x will change. The number x is always known and the columns to extract are chosen by the user.</p>\n\n<p><strong>ORIGINAL QUESTION:</strong></p>\n\n<p>I have a string fetched by egrep. Then I want to print some of the columns (words) in that string. The position (column index) is known in a list in my bash script. Currently it looks like this:</p>\n\n<pre><code>line=$(egrep \" ${i}:\\)\" $1)\n\nfor ((j=1; j&lt;=$number_of_columns; j++))\ndo\n    awk $line -v current_column=${selected_columns[$j]} '{printf $(current_column)}' &gt; \"history_files/history${i}\"\ndone\n</code></pre>\n\n<p>where <code>number_of_columns</code> is the number of columns that are to be printed and <code>selected_columns</code> contain the corresponding indexes of those columns. As an example <code>number_of_columns = 3</code> and <code>selected_columns = [2 5 8]</code>, so I want to print word number 2, 5 and 8 from the string <code>line</code> to the file <code>history${i}</code>.</p>\n\n<p>I am not sure what is wrong, but this has been done with some trial and error. The current error is <code>awk: cannot open 0.000E+00 (No such file or directory)</code>.</p>\n\n<p>Any help is appreciated!</p>\n"},{"tags":["linux","bash","find"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13100991,"title":"linux find command unnecessary data","body":"<p>I'm trying to write simple bash script and I'm stuck with <code>find</code> command.</p>\n\n<p>When I type <code>find . zad*</code>, I get output like:</p>\n\n<pre><code>.\n./lab2.sh~\n./#zad2.sh#\n./zad2.sh~\n./zad1a.sh\n./zad2.sh\n./lab2.sh\n./Azad2.sh~\n./cdlinux.ftp.log\n./Azad2.sh\n./zad1a.sh~\n./zad1.sh\n./cdlinux.www.log\n./zad1.sh~\nzad1a.sh\nzad1a.sh~\nzad1.sh\nzad1.sh~\nzad2.sh\nzad2.sh~\n</code></pre>\n\n<p>Why does it list all files in my folder (with <code>./</code> before file name), and after that I get proper find results. Is there any way to remove that <code>./</code> output? Using sed command won't work in all cases (when search path would be different than <code>.</code>).</p>\n"},{"tags":["bash","networking"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13098634,"title":"How should I export http_proxy variable?","body":"<p>I'm trying to write a simple script that will set proxy settings. Actually I just need to export <code>http_proxy ftp_proxy https_proxy ...</code> variables with <code>export</code> command.\nBut it's not working when I run it manually from the shell because <code>export</code> affect only current shell and subshells, but no others. Also I don't want to call it from <code>.bashrc</code> because it's not my default proxy settings.</p>\n\n<p>So how should I export <code>http_proxy</code> variable to make effect globally?</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13100216,"title":"bash script that get first 5 lines and put in another file","body":"<p>hi all i need to write a simple bash script that lists all PHP files in a directory and writes the first 5 lines of each PHP-file to new file called : PHP_header</p>\n\n<p>i know only the basic in linux command line </p>\n\n<pre><code>#!/bin/bash\n    grep –r stringsearch\n    find /opt/-name ‘log_*’\n    du –s foldername\n    head -10 filename\n    mkdir filername.php\n</code></pre>\n\n<p>please explain me how can i complet this </p>\n"},{"tags":["bash","environment-variables","interpreter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13100226,"title":"environment variable expansion in first line of shell script","body":"<p>My ruby shell scripts specify the ruby interpreter in the first line of the script as:</p>\n\n<pre><code>#!/Users/me/.rvm/rubies/ruby-1.9.3-p194/bin/ruby\n</code></pre>\n\n<p>The problem is that when I upgrade to a new ruby version, I have to edit all the script files to update the interpreter. There is an environment variable available, $MY_RUBY_HOME, that expands to the current path (minus the /bin/ruby part). However, all my attempts to use:</p>\n\n<pre><code>#!{$MY_RUBY_HOME}/bin/ruby\n#!${MY_RUBY_HOME}/bin/ruby\netc\n</code></pre>\n\n<p>fail (\"bad interpreter: No such file or directory\"). I suspect environment expansion isn't done on the first line, so I may just be out of luck. I would be interested if anybody has been able to use environment variable expansion on the program definition line in a shell script.</p>\n"},{"tags":["bash","if-statement","solaris"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13098805,"title":"Bash If Else for login -p","body":"<p>the command logins -p is to show which users do not have a password while wc -l is to count the number of newlines. Thus, logins -p | wc -l shows the number of users that do not have a password. In my case, logins -p | wc  -l returns me a value of 4 but when I compare it to be equal to 0, it prints \"equal to 0\" which is wrong. I would like to ask if there are any mistakes in my script and does wc -l returns an INT? Thanks.</p>\n\n<pre><code>if [ \"$(logins -p | wc -l)\" -eq 0 ]; then\n  echo \"equal to 0\"\nelse \n  echo \"not equal to 0\"\nfi\n</code></pre>\n"},{"tags":["bash","sorting","edit"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13096768,"title":"How can I switch around the content of a line of text","body":"<p>I have a large file (around 39,000 lines of text) that consists of the following:</p>\n\n<pre><code>1:iowemiowe093j4384d\n2:98j238d92dd2d\n3:98h2d078h78dbe0c\n(continues in the same manner)\n</code></pre>\n\n<p>and I need to reverse the order of the two sections of the lines, so the output would be:</p>\n\n<pre><code>iowemiowe093j4384d:1\n98j238d92dd2d:2\n98h2d078h78dbe0c:3\n</code></pre>\n\n<p>Instead, I've tried using cut to do this but have not been able to get it to behave properly (this is in a bash environment), what would be the best way to do this?</p>\n"},{"tags":["linux","bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13064676,"title":"BASH Command Not Found","body":"<p>I'm trying to count the number of HDD's on my linux system, I have put together the following line.</p>\n\n<pre><code>findhdds=$(find /sys/block -name 'sd*' | wc -l)\n</code></pre>\n\n<p>Now it seems to work when just running 'find /sys/block -name 'sd*' | wc -l' but when trying to store it in a variable I get the following message when reading it back:</p>\n\n<pre><code>3: command not found\n</code></pre>\n\n<p>Anyone understand where I have gone wrong? </p>\n"},{"tags":["linux","bash","gstreamer","vlc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":153,"score":1,"question_id":9849149,"title":"How to queue up a set of raw audio files from bash","body":"<p>I am using a system that is pushing out raw audio files in the tmp directory that I want to play.  My Linux distro has some bug that causes a pause for two seconds every time you play some audio with a utility (eg mplayer, sox, etc).  As a workaround, I want to continuously play the audio files without this pause.</p>\n\n<p>I have very little control over the system.  The system will be up whenever the computer is on but files will come through in bursts.  The system creates the files, runs a script that you specify and then deletes the file.  I could move the file, convert it, whatever, but I want it to be simple and elegant.  I'm thinking there would be some way to push the files into a queue that will play the file without closing the session to the sound card so I don't get that annoying delay.</p>\n\n<p>I'm thinking something like GStreamer or VLC could work.  Any suggestions?</p>\n\n<p>Update:  If you vote to close this question, please tell me exactly why.  THIS IS A PROGRAMMING QUESTION for the bash programming language..plain and simple.</p>\n"},{"tags":["bash","command-line","text-processing"],"answer_count":8,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":4720,"score":5,"question_id":415677,"title":"How to replace ${} placeholders in a text file?","body":"<p>I want to pipe the output of a \"template\" file into MySQL, the file having variables like <code>${dbName}</code> interspersed. What is the commandline utility to replace these instances and dump the output to standard output?</p>\n"},{"tags":["bash","loops","inotify"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":44,"score":-1,"question_id":13097606,"title":"whats the correct way to loop this","body":"<p>I have a script where inotifywait is piped into a while loop that executes the following logic.</p>\n\n<pre><code>     cp \"$S3\"/2/post2.png \"$S3\";\n     mv \"$S3\"/1/post1.png \"$S3\"/2/post2.png;\n     cp \"$S3\"/3/post3.png \"$S3\";\n     mv \"S3\"/post2.png \"$S3\"/3/post3.png;\n</code></pre>\n\n<p>so forth and so on..... then at the end of the script...</p>\n\n<pre><code>     mv \"$dir\"/$file \"$S3\"/1/post1.png\n</code></pre>\n\n<p>That line represents a fresh post, the above is the rotation of older post.</p>\n\n<p>I can can hand code the iterations all the way down to 100+, but I would like to program more efficiently and save time. </p>\n\n<p>So, what's some correct ways to loop this?</p>\n"},{"tags":["linux","bash","awk"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13094380,"title":"splitting folder names with awk in a directory","body":"<p>There are some directories in the working directory with this template</p>\n\n<pre><code>cas-2-32\nsat-4-64  \n...\n</code></pre>\n\n<p>I want to loop over the directory names and  grab the second and third part of folder names. I have wrote this script. The body shows what I want to do. But the awk command seems to be wrong</p>\n\n<pre><code>#!/bin/bash\nfor file in `ls`; do\n  if [  -d $file ]; then \n    arg2=`awk -F \"-\" '{print $2}' $file`\n    echo $arg2\n    arg3=`awk -F \"-\" '{print $3}' $file`\n    echo $arg3\n  fi\ndone\n</code></pre>\n\n<p>but it says</p>\n\n<pre><code> awk: cmd. line:1: fatal: cannot open file `cas-2-32' for reading (Invalid argument)\n</code></pre>\n"},{"tags":["bash","shell","script","while-loop"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13096331,"title":"write output to multiple files in shell","body":"<p>I have 135 documents stored as 135 lines (So each line is a long text) in File_A and I have 15 phrases in File_B. I need to extract a sentence and its before from File_A with a matching phrase in File_B. The extracted sentences from File_A-Line_1 should be output to a new file File_1. Similarly the extracted sentences from File_A-Line_2 should be output to a new file File_2 and so on till i extract matching sentences from all the lines. I did this with the following code </p>\n\n<pre><code>i=1\nwhile read line; do\n while read row; do\n   cat \"$line\" | sed 's/\\./.\\n/g' | grep -i -B 1 \"$row\"  | tr -d '\\n' |  sed 's/--/\\n/g'    &gt;&gt; file_$i\n done &lt; $2 \n $i = $i+1;\ndone &lt; $1\n</code></pre>\n\n<p>The problem here is, the output is being printed on to the console but not to the new file. Could some one help me in realizing my error.</p>\n\n<p>Thank you  </p>\n"},{"tags":["bash","compare","tar","gz"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13095893,"title":"bash compare two tar.gz","body":"<p>I need to compare two archives tar.gz, without unpacking them, listing file names from the 1st arch that aren't in the 2nd arch.</p>\n\n<p>I've tried a few ways but every one has failed. I'm new to bash.</p>\n"},{"tags":["linux","bash","scripting"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":74,"score":3,"question_id":13043895,"title":"Editing every file in a directory after opening it bash","body":"<p>Looking around I didn't see exactly what I was looking for. Some similar stuff, but for some reason what I tried so far hasn't worked.</p>\n\n<p>My main goals:</p>\n\n<ol>\n<li>run script in a my current directory</li>\n<li>open the picture to see what it is</li>\n<li>rename the picture i just viewed</li>\n<li>repeat the process without running the script again</li>\n</ol>\n\n<hr>\n\n<p>These were the sources I attempted to follow:</p>\n\n<p><a href=\"http://www.cyberciti.biz/faq/bash-loop-over-file/\" rel=\"nofollow\">Bash Shell Loop Over Set of Files</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/8131146/bash-loop-through-directory-and-rename-every-file\">Bash loop through directory and rename every file</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/1310422/how-to-do-something-to-every-file-in-a-directory-using-bash\">How to do something to every file in a directory using bash?</a></p>\n\n<p>==================================================================================</p>\n\n<pre><code>echo \"Rename pictures. Path\"\nread path\nfor f in $path\ndo  \n    eog $path\n    echo \"new name\"\n    read newname\n    mv $path $newname\n    cat $f\ndone\n</code></pre>\n"},{"tags":["perl","bash","shell","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":13093709,"title":"How to use shell variables in perl command call in a bash shell script?","body":"<p>How to use shell variables in perl command call in a bash shell script?</p>\n\n<p>I have a perl command in my shell script to evaluate date -1.</p>\n\n<p>How can i use $myDate in perl command call?</p>\n\n<p>This is the section in my script: </p>\n\n<pre><code>myDate='10/10/2012'\n\nDt=$(perl -e 'use POSIX;print strftime '%m/%d/%y', localtime time-86400;\")\n</code></pre>\n\n<p>I wana use $myDate in place of '%m/%d/%y'</p>\n\n<p>Any help will be appriciated.</p>\n\n<p>Thank you.</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13094165,"title":"printing folder names in bash","body":"<p>This piece of bash code, shows no folder name while there exists many folders.</p>\n\n<pre><code>#!/bin/bash\n\nfor file in .; do\n  if [  -d $file ]; then \n    echo $file\n  fi\ndone\n</code></pre>\n\n<p>the output is only <code>.</code>\nCan you explain why?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13091700,"title":"Why is my array gone after exiting loop?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/11656013/bash-cant-build-array-in-right-side-of-pipe\">Bash: can’t build array in right side of pipe</a>  </p>\n</blockquote>\n\n\n\n<p>I need to create an array from a file. I have to calculate an index where to store data. When I get outside my read loop, my arrays seems to be gone. Why???</p>\n\n<p>The script below illustrates the problem.</p>\n\n<pre><code>#!/bin/bash\n\necho -e \"15\\n21\\n33\" | while read i ; do\n    ar[$i]=\"set\"\n    echo ${!ar[@]}\n    echo ${ar[@]}\n  done\n\necho\necho outside loop:  \necho ${!ar[@]} \necho ${ar[@]} \n</code></pre>\n\n<p>As you can see in the output, printing the array indexes and content no longer work outside of loop.</p>\n\n<pre><code>15\nset\n15 21\nset set\n15 21 33\nset set set\n\noutside loop:\n</code></pre>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13092360,"title":"How to remove extra spaces in bash?","body":"<p>How to remove extra spaces in variable HEAD?</p>\n\n<pre><code>HEAD=\"    how to  remove    extra        spaces                     \"\n</code></pre>\n\n<p>result: how to remove extra spaces</p>\n\n<p>thank you</p>\n"},{"tags":["bash","wildcard"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13092931,"title":"Reuse wildcard match in bash","body":"<p>I want to do something like this in bash:</p>\n\n<pre><code>scp me@server:/data/stuff/*/needthis.txt ./?/needthis.txt\n</code></pre>\n\n<p>Where that ? in the command will be whatever was matched by the *. </p>\n\n<p>My problem is there's a bunch of directories out of which I want to copy one file that's the same name in each directory, and I want to preserve the name of the directory they came from, but I don't just want to copy the entire \"stuff\" folder because there are other files in these directories that are hundreds of MB which I don't want to waste time downloading.</p>\n\n<p>Can I do this easily?</p>\n"},{"tags":["string","bash","variables"],"answer_count":29,"favorite_count":15,"up_vote_count":73,"down_vote_count":0,"view_count":122405,"score":73,"question_id":369758,"title":"How to trim whitespace from bash variable?","body":"<p>I have a shell script with this code:</p>\n\n<pre><code>var=`hg st -R \"$path\"`\nif [ -n \"$var\" ]; then\n    echo $var\nfi\n</code></pre>\n\n<p>But the conditional code always executes because <code>hg st</code> always prints at least one newline character.</p>\n\n<ul>\n<li>Is there a simple way to strip whitespace from <code>$var</code> (like <code>trim()</code> in php)?</li>\n</ul>\n\n<p>or</p>\n\n<ul>\n<li>Is there a standard way of dealing with this issue?</li>\n</ul>\n\n<p>I could use <code>sed</code> or <code>awk</code>, but I'd like to think there is a more elegant solution to this problem.</p>\n"},{"tags":["bash","sed"],"answer_count":6,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":992,"score":5,"question_id":8206280,"title":"Delete all lines beginning with a # from a file","body":"<p>All of the lines with comments in a file begin with <code>#</code>. How can I delete all of the lines (and only those lines) which begin with <code>#</code>? Other lines containing <code>#</code>, but not at the beginning of the line should be ignored.</p>\n"},{"tags":["bash","shell","sass","nohup"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13093133,"title":"Error when running nohup in bash script","body":"<p>My bash/nohup experience is very limited, so I might be making a basic mistake. </p>\n\n<p>I'm launching a background file monitor. (In case it matters, Sass is a CSS preprocessor that can monitor source files and automatically compile them into CSS when it detects changes.) </p>\n\n<p>When I enter this at a shell prompt, it launches the Sass file monitor perfectly:</p>\n\n<pre><code>nohup sass --watch /data/sass/:/data/css/ &gt; /var/log/sass.out 2&gt; /var/log/sass.err &amp;\n</code></pre>\n\n<p>But when I put it in a script like this (a simplified sample script for debugging):</p>\n\n<pre><code>COMMAND=\"[exactly the same command as above]\"\necho `$COMMAND`\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>nohup: ignoring input and redirecting stderr to stdout\nErrno::ENOENT: No such file or directory - &gt; Use --trace for backtrace. &gt;&gt;&gt; \nSass is watching for changes. Press Ctrl-C to stop.\n</code></pre>\n\n<p>The same thing happens if I specify the full path /usr/bin/local/sass. Any idea where I'm going wrong?</p>\n"},{"tags":["bash","shell","hashtable","associative-array"],"answer_count":11,"favorite_count":15,"up_vote_count":30,"down_vote_count":0,"view_count":30269,"score":30,"question_id":688849,"title":"Associative arrays in Shell scripts","body":"<p>We required a script that simulates Associative arrays or Map like data structure for Shell Scripting, any body?</p>\n"},{"tags":["bash","search","copy","find","cp"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13092156,"title":"Bash search and copy using variables","body":"<p>I have a set of directories that I wish to search, ie</p>\n\n<pre><code>/home/*/Documents/Crashes\n</code></pre>\n\n<p>The files that I am trying to pull are of the form:</p>\n\n<p><code>A.log.20121022T160949Z</code>, where the first several numbers are the date (here 2012/10/22). </p>\n\n<p>I have a text file that I pull from with usernames, read in as $line.</p>\n\n<p>I only want to pull files from the current date. I've tried:</p>\n\n<pre><code>D= date +%Y%m%d%t\ncp -ru /home/$line/Documents/Crashes/A.log.$D* /home/$USER/Documents/Todayslogs\n</code></pre>\n\n<p>and it pulls everything. Also tried find with no luck...</p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13092057,"title":"Why doesn't my bash script allow me to enter the python shell?","body":"<p>I wrote a super simple bash script to get me into a python shell with everything set up like I need but it never actually enters the python shell. What am I doing wrong?</p>\n\n<pre><code>sudo su runnerdude\n. /home/runnerdude/foo/env/bin/activate\ncd /home/runnerdude/foo/bar\npython manage.py shell\n</code></pre>\n"},{"tags":["linux","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13091295,"title":"Bash to get timestamp from file list and compare it to filename","body":"<p>Implementing a GIT repository for a project we are including the DB structure by generating a dump on the post-commit hook on deployment.</p>\n\n<p>What I would like to have is a simple versioning system for the file based on the timestamp of the last change to the tables structure.</p>\n\n<p>After finding <a href=\"http://daryl.learnhouston.com/2006/11/30/when-did-i-change-my-mysql-database-structure/\" rel=\"nofollow\">this post</a> with the suggestion to check for the dates of the the *.frm files in the MySQL data dir I thought the solution would be to implement it based on that last date as part of the generated file. This is:</p>\n\n<ol>\n<li><p>Find out the latest date-time of the files of the DB (i.e. /var/lib/mysql/databaseX/) via an ls command (of type ls -la *.frm)</p></li>\n<li><p>compare that value (last changed file) with the one of a certain file (ie /project/dump_2012102620001.sql) where the numbers correspond to the last generated dump.</p></li>\n<li><p>If files timestamp is after that date generate the mysqldump command, otherwise ignore so the dump does not get generated and\ncommitted as a change to GIT</p></li>\n</ol>\n\n<p>Unfortunately my Linux console/bash concepts are too far from being capable and have not found any similar script to use.</p>\n"},{"tags":["linux","bash","shell","unix","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13090875,"title":"How can i append files to one another in the order i want in linux using pipes or redirects?","body":"<p>Lets say i have different files in a folder that contains the same day data such as :</p>\n\n<pre><code>ThisFile_2012-10-01.txt\nThatFile_2012-10-01.txt\nAnotherSilly_2012-10-01.txt\nInnovativeFilesEH_2012-10-01.txt\n</code></pre>\n\n<p>How to i append them to each other in any preferred order? Would below be the exact way i need to type in my shellscript? The folder gets same files everyday but with different dates. Old dates disappear so every day there are these 4 files.</p>\n\n<pre><code>InnovativeFilesEH_*.txt &gt;&gt; ThatFile_*.txt\nThisFile_*.txt &gt;&gt; ThatFile_*.txt\nAnotherSilly_*.txt &gt;&gt; ThatFile_*.txt\n</code></pre>\n"},{"tags":["file","bash","sorting","debian"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13091094,"title":"How can I sort the contents of one file, based on the contents of another file","body":"<p>I have two files, one with content similar to the following:</p>\n\n<pre><code>1.something344343\n2.something2dsdsf\n4.somethingdsddfsd\n5.something920j329\n</code></pre>\n\n<p>and the second file would be along the lines of:</p>\n\n<pre><code>1.somethingwoimewoiew\n3.something9jwe90jew\n7.something90kjwe90ewk\n</code></pre>\n\n<p>in essence, the first file has more numbered lines then the second one does, the first file goes up to around 39,000 lines, while the second file only goes up to 23,000 lines. Having said that, would anyone know how I could seperate the first file into line numbers (number prefacing the colon) that were included in file 2, and lines that were not included in file 2 (this would be in a bash environment). the end result would be something along the lines of this:</p>\n\n<pre><code>lines included in second file:\n1.something344343\n\nlines not included in second file:\n2.something2dsdsf\n4.somethingdsddfsd\n5.something920j329\n</code></pre>\n\n<p>I've thought over different methods that I could use to do this, but unfortunately have not been able to come up with any effective solutions yet, if anyone could help out with this though I would really appreciate it, thanks!</p>\n"},{"tags":["regex","bash","grep"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13090230,"title":"Making a mistake with | (or) in regular expressions","body":"<p>I'm sure I'm doing something really obviously wrong here, but I can't figure out what. Using grep from a bash shell, I have a file test.txt:</p>\n\n<pre><code>ABC123\nABC456\nABC789\nDEF123\nDEF456\nDEF789\n</code></pre>\n\n<p>Now at the command line:</p>\n\n<pre><code>$ grep ABC test2.txt\nABC123\nABC456\nABC789\n\n$ grep DEF test2.txt\nDEF123\nDEF456\nDEF789\n</code></pre>\n\n<p>So those work great. Now, I expect the following command to print the whole file, but:</p>\n\n<pre><code>$ grep ABC\\|DEF test2.txt\n\n$ grep (ABC)\\|(DEF) test2.txt\n-bash: syntax error near unexpected token `ABC'\n\n$ grep \\(ABC\\)\\|\\(DEF\\) test2.txt\n\n$ grep 'ABC|DEF' test2.txt\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["bash","shell","install","ack"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":73,"score":3,"question_id":12885417,"title":"Unfamiliar shell syntax in ack-grep install script","body":"<p>From the ack installation page (http://betterthangrep.com/install/) there is a one-liner installation with curl:</p>\n\n<pre><code>curl http://betterthangrep.com/ack-standalone &gt; ~/bin/ack &amp;&amp; chmod 0755 !#:3\n</code></pre>\n\n<p>I understand that it's getting the file from the website and saving it to ~/bin/ack, then setting permissions, but what does that last part ( !#:3 ) do ? (I do not recognize the syntax and Googling didn't yield any helpful results)</p>\n"},{"tags":["bash","for-loop"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13085929,"title":"Bash - for-loop for every folder in a directory, excluding some of them","body":"<p>Thank you very much in advance for helping!</p>\n\n<p>I have this code in bash:</p>\n\n<pre><code>for d in this_folder/*    \n    do    \n        plugin=$(basename $d)\n        echo $plugin'?'\n        read $plugin\n    done\n</code></pre>\n\n<p>Which works like a charm. For every folders inside 'this_folder', echo it as a question and store the input into a variable with the same name. </p>\n\n<p>But now I'd like to exclude some folders, so for example, it will ask for every folder in that directory, ONLY if they are NOT any of the following folders: global, plugins, and css.</p>\n\n<p>Any ideas how can I achieve this?</p>\n\n<p>Thanks!</p>\n\n<p>UPDATE:</p>\n\n<p>This is how the final code looks like:</p>\n\n<pre><code>base=\"coordfinder|editor_and_options|global|gyro|movecamera|orientation|sa\"\n\n&gt; vt_conf.sh\necho \"# ========== Base\"     &gt;&gt; vt_conf.sh\nfor d in $orig_include/@($base)\ndo\n    plugin=$(basename $d)\n    echo \"$plugin=y\"         &gt;&gt; vt_conf.sh\ndone\necho ''                      &gt;&gt; vt_conf.sh\necho \"# ========== Optional\" &gt;&gt; vt_conf.sh\nfor d in $orig_include/!($base)\ndo\n    plugin=$(basename $d)\n    echo \"$plugin=n\"         &gt;&gt; vt_conf.sh\ndone\n</code></pre>\n"},{"tags":["bash","shell","backup"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":32,"score":3,"question_id":13087488,"title":"repeat command for every argument in variable","body":"<pre><code>#!/bin/sh\ndblist=mail ftp www\nfor arg in $dblist; do\nmysqldump -u dumper --password=$dbpass --socket $socket --database $dblist &gt;&gt; /tmp/backup/$dblist.sql\ndone\n</code></pre>\n\n<p>Every database from variable dblist should write a new mysqldump line and add the database names into the according fields, how can this be achieved?</p>\n"},{"tags":["bash","shell","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13089564,"title":"'sed' is not replacing matching sequence in file","body":"<p>I have input like this in a specific file</p>\n\n<pre><code>#- seeds: \"12.123.233.213,123.231.3.2\"\n    - seeds: \"12.12.21.21,43.435.54.54\"\n</code></pre>\n\n<p>As you see that the seeds contains two consecutive IP addresses, so I want to change that IP address in the file. 1st line will not be considered as it starts with \"#\"</p>\n\n<p>So for doing this, I have this:</p>\n\n<pre><code>val=' - seeds: \"'\n\nnewSeed=${val}${ip1}','${ip2}'\"'     # ---&gt; I'm creating the new seed\nstr=`grep \"\\s- seed\" $file`          # ---&gt; finding matching character\necho $str                            # ---&gt; it does print out the 2nd line\nsed -i 's|${str}|${newSeed}|g' $file # --&gt; now replace the matched string with new seed value\n</code></pre>\n\n<p>But it doesn't replace the value in the file. What I'm doing wrong here? </p>\n"},{"tags":["linux","bash","shell"],"answer_count":17,"favorite_count":23,"up_vote_count":54,"down_vote_count":0,"view_count":51591,"score":54,"question_id":806906,"title":"How do I test if a variable is a number in bash?","body":"<p>I just can't figure out how do I make sure an argument passed to my script is a number or not.</p>\n\n<p>All I want to do is something like this:</p>\n\n<pre><code>test *isnumber* $1 &amp;&amp; VAR=$1 || echo \"need a number\"\n</code></pre>\n\n<p>Any help?</p>\n\n<p>UPDATE:\nI managed (whit <a href=\"http://stackoverflow.com/questions/806906/how-do-i-test-if-a-variable-is-a-number-in-bash/806923#806923\">Charles' help</a>) to do it, but I'm not yet sure it's the best way to do that (even though it worked on my tests). This is how it ended up:</p>\n\n<pre><code>[[ $1 =~ \"^[0-9]+$\" ]] &amp;&amp; echo \"number\" &amp;&amp; exit 0 || echo \"not a number\" &amp;&amp; exit 1\n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13087099,"title":"Determining whether a value exists in an array","body":"<p>Thank you very much for helping!!!</p>\n\n<p>I have the following code:</p>\n\n<pre><code>base[0]='coordfinder'\nbase[1]='editor_and_options'\nbase[2]='global'\nbase[3]='gyro'\nbase[4]='movecamera'\nbase[5]='orientation'\nbase[6]='sa'\n\nfor d in $dest_include/*; do\n    if [ $d == \"${base[@]}\" ]; then\n        echo $plugin='y' &gt;&gt; vt_conf.sh\n    else\n        plugin=$(basename $d)\n        echo $plugin'?'\n        read $plugin\n        echo $plugin=${!plugin} &gt;&gt; vt_conf.sh\n    fi\ndone\n</code></pre>\n\n<p>It doesn't work, but it's a good starting point.\nBasically the thing that doesn't work is the if loop. I just made it up because I don't know how to do it.</p>\n\n<p>I'd like to do the following:</p>\n\n<p>Loop through the content of $dest_include folder.\nIf any of the forlders ($d) matches any of the elements in the array do one thing, else do something else.</p>\n\n<p>Thanks!!!</p>\n"},{"tags":["linux","bash","unix","sorting","script"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13088370,"title":"Sort numerically","body":"<p>Here is a list of files:</p>\n\n<pre><code>some.string_100_with_numbers.in-it.txt\nsome.string_101_with_numbers.in-it.txt\nsome.string_102_with_numbers.in-it.txt\nsome.string_23_with_numbers.in-it.txt\nsome.string_24_with_numbers.in-it.txt\nsome.string_25_with_numbers.in-it.txt\n</code></pre>\n\n<p>Now I would like to sort it numerically. Starting with *23* and ending with *102*.</p>\n\n<p>I have tried <code>-n</code> and <code>-g</code>. <code>-t</code> does not help in these messy strings. </p>\n\n<p>Can I ignore leading strings to the number with an option or do I have to be clever and script?</p>\n"},{"tags":["bash","shell","exec"],"answer_count":4,"favorite_count":3,"up_vote_count":7,"down_vote_count":0,"view_count":6115,"score":7,"question_id":1216922,"title":"sh command: exec 2>&1","body":"<p>What will this command do? </p>\n\n<pre><code>exec 2&gt;&amp;1\n</code></pre>\n"},{"tags":["bash","date","timestamp"],"answer_count":7,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":3518,"score":6,"question_id":2371248,"title":"How to convert timestamps to dates in bash?","body":"<p>I need a shell command or script that converts a UNIX timestamp to a date. The input can come either from the first parameter or from stdin, allowing for the following usage patterns:</p>\n\n<pre><code>ts2date 1267619929\n</code></pre>\n\n<p>and</p>\n\n<pre><code>echo 1267619929 | ts2date\n</code></pre>\n\n<p>Both commands should output \"Wed Mar  3 13:38:49 2010\".</p>\n"},{"tags":["bash","unix","loops","execute"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13078957,"title":"Unix - Executing same command on same file in multiple sub directories","body":"<p>I have 36 subdirectories in the same directory named <code>10,11,12,....45</code></p>\n\n<p>In each subdirectory there is a file named <code>pressure.sh</code> that I would like to execute a command on, the command is <code>qsub</code></p>\n\n<p>I was wondering if there was a way where I could execute the command qsub on each <code>pressure.sh</code> file in each subdirectory 10-45 from the parent directory?</p>\n\n<p>So I am looking for a code that executes \"<code>qsub pressure.sh</code>\" one by one in each subdirectory so I do not have to do it one by one every time. </p>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["bash","absolute-path"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":473,"score":1,"question_id":7126580,"title":"expand a possible relative path in bash","body":"<p>As arguments to my script there are some file paths, those can ofcpirse be relative (or contain ~). But for the functions I've written I need paths that are absolute, but do not have their symlinks resolved.</p>\n\n<p>Is their any function for this?</p>\n"},{"tags":["java","bash","parsing"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":46,"score":-1,"question_id":13087031,"title":"Similar code in java","body":"<p>I'm using a shell-script to can login in a webpage for parser the content.\nI'm using the code in bash:</p>\n\n<pre><code>wget --save-cookies=cookies.txt --post-data \"uid=yyyyy&amp;pass=xxxxx\" http://www.spanishtracker.com/login.php\n\nwget --load-cookies=cookies.txt \"http://www.spanishtracker.com/torrents.php\"  -O outpout\n</code></pre>\n\n<p>Could you help me to make these with java code?\nMany thanks and sorry for my english!</p>\n"},{"tags":["bash","equals","zero"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13086109,"title":"bash scripting - check if bash variable equals 0","body":"<p>I have a bash variable depth and I would like to test if it equals 0. In case yes, I want to stop executing of script. So far I have:</p>\n\n<pre><code>zero=0;\n\nif [ $depth -eq $zero ]; then\n    echo \"false\";\n    exit;\nfi\n</code></pre>\n\n<p>Unfortunately, this leads to:</p>\n\n<pre><code> [: -eq: unary operator expected\n</code></pre>\n\n<p>(might be a bit inaccurate due to translation)</p>\n\n<p>Please, how can I modify my script to get it working?</p>\n\n<p>Thanks.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13085253,"title":"Writing a for loop in bash using a variable","body":"<p>I want to create a for loop in bash that runs from 1 to a number sotred in a variable in bash. I have tried doing what the answer to <a href=\"http://stackoverflow.com/questions/9778741/writing-a-bash-for-loop-with-a-variable-top-end\">this</a> question tells, but it produces this error:</p>\n\n<pre><code>Syntax error: Bad for loop variable\n</code></pre>\n\n<p>My OS is Ubuntu 12.04 and the code looks like this:</p>\n\n<pre><code>#!/bin/bash\nTOP=10\nfor ((i=1; i&lt;=$TOP; i++))\ndo\n    echo $i\ndone\n</code></pre>\n\n<p>What does this error message mean? Here is an output image:</p>\n\n<p><img src=\"http://i.stack.imgur.com/JE4DC.png\" alt=\"enter image description here\"></p>\n"},{"tags":["bash","loops","while-loop","stop"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":114,"score":-1,"question_id":12543628,"title":"bash script stops execution in while loop - why?","body":"<p>I have this bash script for converting .mp4 video to .mp3 audio.\nIt runs, but does the loop only once, though there are more mp4 files in /home/myname/mp4dir. The script converts the first .mp4 file it finds to .mp3, unless there is already an .mp3 file. This should be done in a loop, but after the first call to ffmpeg the script stops. \nWhy?</p>\n\n<pre><code>#!/bin/bash\nfind /home/myname/mp4dir -name \"*.mp4\" | while read f\ndo\n        fOut=`echo $f | sed s/mp4/mp3/`\n        echo \"convert $f =&gt; $fOut\"\n        if ! test -f $fOut\n        then\n                ffmpeg -i $f -vn -f mp3 $fOut\n        fi\ndone\n</code></pre>\n"},{"tags":["linux","bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13084805,"title":"BASH Loop run commands simultaneously","body":"<p>I have created a script which reads the number of HDD's attached then runs a speed test on them using HDDParm</p>\n\n<pre><code>for i in `seq -s' ' $from $hddcount`\ndo\n    # read and cache read speed test\n    sudo hdparm -tT ${hd[$i]} &gt;&gt; /var/www/HDD_Test/Logs/Current/Bay$i/`basename ${hd[$i]}`_speed_test.txt\ndone\n</code></pre>\n\n<p>This works fine but it runs the test one by one which is ok for the speed test to get a true figure, but I now want to run a short SMART check using smartctl. </p>\n\n<p>I want it to run simultaneously on all the HDD's attached, not one at a time. Anyone have any ideas or pointers on how to do this? Would it be a simple case of running them in the background with the &amp; notation? </p>\n"},{"tags":["git","bash","github"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13075570,"title":"git github publish to website, but do not erase a folder?","body":"<p>I am pulling from Github to our webserver for our site. All actions are done via bash scripts and scalr. In our website, one of the folders is a NFS mount to a S3 folder. Is there a way I can do a pull without killing that folder and having to remount it?\nThis is my current script:</p>\n\n<pre><code>## Git Clone -------------------------------------------------------------------\n\nif [ -d \"$DEPLOY_PATH\"/.git ]; then\n    cd \"$DEPLOY_PATH\"\n    if $GIT_PATH status &gt;/dev/null 2&gt;&amp;1; then\n       $GIT_PATH pull\n       exit 0\n    fi\nfi\n\n$GIT_PATH clone $GIT_REPO_URL $GIT_CL_DIR  .\n\n## Git Checkout ----------------------------------------------------------------\n# There should be *no* changes to the pristine repo.\necho \"Ensure pristine copy. Executing 'git reset --hard'.\"\n$GIT_PATH reset --hard HEAD 2&gt;/dev/null\n\necho \"Pulling updates from $GIT_REMOTE\"\n$GIT_PATH fetch $GIT_REMOTE\n\ncurrent_branch=$($GIT_PATH branch | awk '/\\* /{print $2}')\n\nif [[ \"$current_branch\" = \"$GIT_BRANCH\" ]] then\n    echo \"Already on branch '$GIT_BRANCH'.\"\nelif ! $GIT_PATH branch | awk \"/$GIT_BRANCH$/\" &gt;/dev/null 2&gt;&amp;1 then\n    echo \"Checkout of branch '$GIT_BRANCH'\"\n    $GIT_PATH checkout -b $GIT_BRANCH --track $GIT_REMOTE/$GIT_BRANCH 2&gt;/dev/null\n\nelif ! $GIT_PATH checkout $GIT_BRANCH 2&gt;/dev/null then\n    echo \"Branch '$GIT_REMOTE/$GIT_BRANCH' not found. Skipping remainder of update.\" 1&gt;&amp;2\n    exit 1\nfi\n\n# Run our git commands\n$GIT_PATH pull\n\n## Get submodules, if exist.\nif [ -e \".gitmodules\" ]\nthen\n    echo \"Updating submodules.\"\n    $GIT_PATH submodule init 2&gt;/dev/null\n    $GIT_PATH submodule update\nfi\n</code></pre>\n\n<p>Then I do the mounting of folders and such....</p>\n"},{"tags":["osx","bash","unix","tilde"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":2,"view_count":610,"score":-2,"question_id":9068470,"title":"Tilde not recognized in Mac terminal","body":"<p>I have this weird situation on my Mac running OSX Lion where the ~ (tilda) does not go to my user directory. Instead when I type \"cd ˜\", I get:</p>\n\n<pre><code>-bash: cd: ˜: No such file or directory\n</code></pre>\n\n<p>Any advice on how to fix this?</p>\n"},{"tags":["linux","bash","shell","unix","process"],"answer_count":8,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":4249,"score":3,"question_id":9117507,"title":"Linux/Unix command to determine if process is running?","body":"<p>I need a platform independent (Linux/Unix|OSX) shell/bash command that will determine if a specific process is running. e.g. <code>mysqld</code>, <code>httpd</code>...\nWhat is the simplest way/command to do this?</p>\n"},{"tags":["linux","apache","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13080294,"title":"grepping data Apache access.log","body":"<p>I want to have a real-time copy of /var/log/apache2/access.log so i can grep, do hostname resolution, etc.</p>\n\n<p>What's the best way to do this?</p>\n\n<p>I am curious to see what kind of traffic is passing by</p>\n"},{"tags":["bash","scripting","script","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13079297,"title":"Inserting multiple lines containing backslashes/special characters after a certain line in a file via sed","body":"<p>I am writing a script to try and speed up my basic Wordpress installation. It downloads the latest version, unpacks it, changes to the clients name and then updates some text in the config file. </p>\n\n<p>I am however having trouble inserting multiple lines which contains special characters using sed. The multiple lines are from the WP Secret Key Generator <a href=\"https://api.wordpress.org/secret-key/1.1/salt/\" rel=\"nofollow\">https://api.wordpress.org/secret-key/1.1/salt/</a> and they are to replace the standard </p>\n\n<pre><code>define('AUTH_KEY',         'put your unique phrase here');\ndefine('SECURE_AUTH_KEY',  'put your unique phrase here');\ndefine('LOGGED_IN_KEY',    'put your unique phrase here');\n</code></pre>\n\n<p>etc...</p>\n\n<p>Here is the bit of code that is giving me the issue</p>\n\n<pre><code># Download data to variable\nsalt=\"`curl https://api.wordpress.org/secret-key/1.1/salt/`\"\n\nsed -i \"/NONCE_SALT/a $salt\" $pname/wp-config-sample.php\n</code></pre>\n\n<p>I am downloading the generated text to a variable and then looking to insert, on a new line, after the last instance in the standard text (I will later delete all of these standard lines). It throws up an error of;</p>\n\n<pre><code>\"ed: -e expression #1, char 112: extra characters after command\" \n</code></pre>\n\n<p>When I enter a single line of standard text it is fine. If I add quotation marks around the <code>$salt</code> it just prints the literal <code>$salt</code> in the file. </p>\n\n<p>Is sed the right approach for inserting this data? Keeping in mind I need to insert after a specific point in the file? </p>\n\n<p>Any hints or tips are more than welcome. This is my first attempt at a bash script. </p>\n"},{"tags":["bash","shell","scripting","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13078776,"title":"Using record separators in awk","body":"<p>I have </p>\n\n<pre><code>$ cat awktestf \na++\nb++\nc++\n</code></pre>\n\n<p>I am doing and I get</p>\n\n<pre><code>cat  awktestf | awk 'BEGIN { RS=\"++\" ; OFS=\"@\"; ORS=\"()\" } { print $0 } END {print \"I am done\" }'\na()\nb()\nc()\n()I am done()abc@abc:~$ \n</code></pre>\n\n<p>My question is why am I getting an extra () at the end?</p>\n\n<p>Even this does not work:</p>\n\n<pre><code>$ echo 'a++\n&gt; b++\n&gt; c++' | awk 'BEGIN { RS=\"++\" ; OFS=\"@\"; ORS=\"()\" } { print $0 } END {print \"I am done\" }'\na()\nb()\nc()\n()I am done()abc@abc:~$ \n</code></pre>\n"},{"tags":["linux","string","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":13078490,"title":"Extracting version number from a filename","body":"<p>I have a file in a folder like this:</p>\n\n<blockquote>\n  <p>installer-x86_64-XXX.XX-diagnostic.run</p>\n</blockquote>\n\n<p>where XXX.XX is a version number and I need the version number only. <strong>How to do it in linux?</strong></p>\n\n<p>I have this code:</p>\n\n<pre><code>#!/bin/bash\ncurrent_ver=$(find /mnt/builds/current -name '*.run'|awk -F/ '{print $NF}')\n</code></pre>\n\n<p>So this gives me just the name of the file correctly (minus the location, which I don't want).</p>\n\n<p>But how do I only get the XXX.XX version number into a variable such as <code>$version</code></p>\n"},{"tags":["file","bash","unix","sorting"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13079092,"title":"How can I combine files based on a common field?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/10364455/merge-two-files-by-key-if-exists-in-the-first-file-bash-script\">merge two files by key if exists in the first file / bash script</a>  </p>\n</blockquote>\n\n\n\n<p>I am trying to think of good way to combine these two selections of text (these are example of text that is in a similar format that I would be working on), based on the number prefacing the colon. This would be done in a bash environment, I've tried thinking of ways in which I could do it using cut along with other commands, but I have not been able to come up with anything that would work.</p>\n\n<pre><code>selection 1\n1:829ede2828e9\n2:893h8ew9nediucn\n3:mdheuwe883ud8932\n\nselection 2\n1:stack\n2:over\n3:flow\n</code></pre>\n\n<p>the output would be something along the lines of</p>\n\n<pre><code>1:stack:829ede2828e9\n2:over:893h8ew9nediucn\n3:flow:mdheuwe883ud8932\n</code></pre>\n\n<p>so it would essentially be combining and matching the files based on the number prefacing the colon. This code would be used to process around 39,000 lines of text. I am stumped at this point in time so I would really appreciate any help I can get, thanks! also forgot to mention the numbers wont be consistent (1,3,4,5,9,11,22 for example), although both files/sets of text will have the same set of numbers.</p>\n"},{"tags":["bash","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13078639,"title":"How to keep bash function parameters from being expanded","body":"<p>I have a bash function like the following:</p>\n\n<pre><code>foo() {\n    echo $1\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>bar() {\n    baz $1\n}\n</code></pre>\n\n<p>If I then call <code>foo 'file[1-3]'</code> the result is <code>file1 file2 file3</code>, not <code>file[1-3]</code>. Analogous phenomenon happens when passing the parameter to a call of another bash function like in the function <code>bar</code>. What's the easiest way around this besides ensuring that there are no matching files in the current directory so that I can reference the parameter when echoing or passing the parameter to another function?</p>\n\n<p>EDIT: String matching doesn't seem to expand the glob. My specific problem manifested when performing a string match in the internal call to another function. It was the call to the other function that appears to have expanded the pattern.</p>\n"},{"tags":["bash","script","terminal"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":13078214,"title":"Get hard drive model name with bash","body":"<p>I want to get the various model names of my hard drives using bash.</p>\n\n<p>I can do it if there's just one, using hwinfo like this:</p>\n\n<pre><code>hwinfo --ide|grep Model|sed -ne '/Model/s/.*Model: \"\\([^\"]*\\)\".*/\\1/p'\n</code></pre>\n\n<p>But this obviously fails when there's more than one. One regular hwinfo output when there are several hard drives is this:</p>\n\n<pre><code>[faidoc@Delorean ~]$ hwinfo --ide\n11: IDE 200.0: 10600 Disk                                       \n  [Created at block.245]\n  Unique ID: 3OOL.XFCtBh10jZ2\n  Parent ID: qnJ_.3_X41NtKT36\n  SysFS ID: /class/block/sda\n  SysFS BusID: 2:0:0:0\n  SysFS Device Link: /devices/pci0000:00/0000:00:0d.0/ata3/host2/target2:0:0/2:0:0:0\n  Hardware Class: disk\n  Model: \"VBOX HARDDISK\"\n  Vendor: \"VBOX\"\n  Device: \"HARDDISK\"\n  Revision: \"1.0\"\n  Serial ID: \"VBfa9b1456-03d78f51\"\n  Driver: \"ahci\", \"sd\"\n  Driver Modules: \"ahci\"\n  Device File: /dev/sda\n  Device Files: /dev/sda, /dev/disk/by-id/ata-VBOX_HARDDISK_VBfa9b1456-03d78f51\n  Device Number: block 8:0-8:15\n  BIOS id: 0x80\n  Geometry (Logical): CHS 1305/255/63\n  Size: 20971520 sectors a 512 bytes\n  Capacity: 10 GB (10737418240 bytes)\n  Config Status: cfg=new, avail=yes, need=no, active=unknown\n  Attached to: #10 (SATA controller)\n\n12: IDE 300.0: 10600 Disk\n  [Created at block.245]\n  Unique ID: WZeP.0xN7VsONW+D\n  Parent ID: qnJ_.3_X41NtKT36\n  SysFS ID: /class/block/sdb\n  SysFS BusID: 3:0:0:0\n  SysFS Device Link: /devices/pci0000:00/0000:00:0d.0/ata4/host3/target3:0:0/3:0:0:0\n  Hardware Class: disk\n  Model: \"VBOX HARDDISK\"\n  Vendor: \"VBOX\"\n  Device: \"HARDDISK\"\n  Revision: \"1.0\"\n  Serial ID: \"VB350f9911-48221ae2\"\n  Driver: \"ahci\", \"sd\"\n  Driver Modules: \"ahci\"\n  Device File: /dev/sdb\n  Device Files: /dev/sdb, /dev/disk/by-id/ata-VBOX_HARDDISK_VB350f9911-48221ae2\n  Device Number: block 8:16-8:31\n  BIOS id: 0x81\n  Geometry (Logical): CHS 2349/255/63\n  Size: 37748736 sectors a 512 bytes\n  Capacity: 18 GB (19327352832 bytes)\n  Config Status: cfg=new, avail=yes, need=no, active=unknown\n  Attached to: #10 (SATA controller)\n</code></pre>\n\n<p>Every drive begans with for example \"11:\" or \"12:\" so if I could get one at a time that will be the solution.</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","loops","while-loop","do"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13075684,"title":"Error with bash do loop - error near unexpected token 'done'","body":"<p>The following code gives me an error when I run it, I can't see where I have went wrong. </p>\n\n<p>I have looked up man as well.</p>\n\n<pre><code>while [inotifywait -m -r -e modify -e move -e create -e delete '/home/client/Files' ]; do\n    echo \"File Notification\" | mail -s \"Client File Notification\" -t \"test@test.com\"\ndone\n</code></pre>\n"},{"tags":["linux","bash","unix","scripting","curl"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1754,"score":1,"question_id":7373752,"title":"How do I get cURL to not show the progress bar?","body":"<p>I'm trying to use cURL in a script and get it to <strong><em>not</em></strong> show the progress bar, as it's just annoying output. </p>\n\n<p>I've tried the all the -s, -silent, -S, and -quiet options, but none of them work.</p>\n\n<p>Here's a typical command I've tired:</p>\n\n<pre><code>curl -s http://google.com &gt; temp.html\n</code></pre>\n\n<p>Any ideas? Cheers!!! Thanks in advance! </p>\n\n<p>EDIT:</p>\n\n<p>Also, I only get the progress bar when pushing it to a file, so <code>curl -s <a href=\"http://google.com\" rel=\"nofollow\">http://google.com</a></code> doesn't have a progress bar, but <code>curl -s <a href=\"http://google.com\" rel=\"nofollow\">http://google.com</a> &gt; temp.html</code> does.</p>\n"},{"tags":["git","bash","git-bash","git-post-receive"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12961128,"title":"catching a git post-receive error in a script","body":"<p>In a bash script I do a </p>\n\n<pre><code>git push\n</code></pre>\n\n<p>and I check its exit status.</p>\n\n<p>On the remote server there's a post-receive hook which does a few things.  If an error occurs the post-receive hook will exit with a non-zero value.</p>\n\n<p>However when the post-receive hook errors out, git push exits normally.  Unless I'm specifically checking the output for specific error strings (which I'm not) my script thinks everything went ok.  </p>\n\n<p>Is there an easy way for me to determine if the post-receive hook failed? </p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12215596,"title":"How to one-line this \"expect\" command?","body":"<p>I would like to one-line this</p>\n\n<pre><code>#!/usr/bin/expect\nspawn ssh-copy-id -i .ssh/id_dsa.pub root@testip\nexpect \"Are you sure you want to continue connecting (yes/no)?\"\nsend -- \"yes\\r\"\nexpect eof\n</code></pre>\n\n<p>which I would assume should be</p>\n\n<pre><code>/usr/bin/expect -c 'expect \"\\n\" { eval spawn ssh-copy-id -i .ssh/id_dsa.pub root@testip; expect \"Are you sure you want to continue connecting (yes/no)?\"; send -- \"yes\\r\" }'\n</code></pre>\n\n<p>but it is not.</p>\n\n<p>Can anyone see how it should be?</p>\n"},{"tags":["bash","ssh","rsync","remote-access"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":13057454,"title":"Where does rsync keep the log file for complete and incomplete data transfers?","body":"<p>I want to get the IPs of all the destination devices where my data transfer using <code>rsync</code> could not be complete (or even start) as those devices are not connected to Internet or got disconnected while data transfer ...</p>\n\n<hr>\n\n<p>My actual problem scenario is :</p>\n\n<p><strong>rsync -t Desktop/sony.pdf home@a.b.c.d:\nssh: connect to host a.b.c.d port 22: No route to host</strong></p>\n\n<p>and I want the list of all such IPs where the data transfer could not be complted ...</p>\n\n<p>the list of all IPs like 'a.b.c.d '</p>\n"},{"tags":["linux","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13073731,"title":"linux find on multiple patterns","body":"<p>I need to do a find on roughly 1500 file names and was wondering if there is a way to execute simultaneous find commands at the same time.</p>\n\n<p>Right now I do something like</p>\n\n<pre><code>for fil in $(cat my_file)\ndo\n  find . -name $fil &gt;&gt; outputfile\ndone\n</code></pre>\n\n<p>is there a way to spawn multiple instances of find  to speed up the process. Right now it takes about 7 hours to run this loop one file at a time.</p>\n\n<p>Thanks!</p>\n"},{"tags":["php","bash","drupal","benchmarking"],"answer_count":1,"favorite_count":3,"up_vote_count":3,"down_vote_count":3,"view_count":204,"score":0,"question_id":8853692,"title":"PHP running Drupal benchmark is slower than it should be","body":"<p>Originally, I posted this on <a href=\"http://serverfault.com/questions/349456\">ServerFault</a>... but perhaps it is more of a PHP lingual question.</p>\n\n<p>I have a server with Dual Xeon Quad Core L5420 running at 2.5GHz. I've been optimizing my server, and have come to my final bottleneck: PHP.</p>\n\n<p>My very simple PHP script:</p>\n\n<p>./test.php</p>\n\n<pre><code>&lt;?php print_r(posix_getpwuid(posix_getuid()));\n</code></pre>\n\n<p>My not-so-scientific-because-they-don't-pay-attention-to-thread-locking-but-scientific-enough-to-give-me-a-reasonable-multithreaded-requests-per-second-result scripts:</p>\n\n<p>./benchmark-php</p>\n\n<pre><code>#!/bin/bash\nif [ -z $1 ]; then\n  LIMIT=10\nelse\n  LIMIT=$1\nfi\n\nif [ -z $2 ]; then\n  SCRIPT=\"index.php\"\nelse\n  SCRIPT=$2\nfi\n\nSTART=$(date +%s.%N)\nCOUNT=0\nwhile (( $COUNT &lt; $LIMIT ))\ndo\n  php $SCRIPT &gt; /dev/null\n  COUNT=$(echo \"$COUNT + 1\" | bc)\ndone\nEND=$(date +%s.%N)\nDIFF=$(echo \"$END - $START\" | bc)\nREQS_PER_SEC=$(echo \"scale=2; $COUNT / $DIFF\" | bc)\necho $REQS_PER_SEC\n</code></pre>\n\n<p>./really-benchmark-php</p>\n\n<pre><code>#!/bin/bash\nif [ -z $1 ]; then\n  LIMIT=10\nelse\n  LIMIT=$1\nfi\n\nif [ -z $2 ]; then\n  THREADS=16\nelse\n  THREADS=$2\nfi\n\nif [ -z $3 ]; then\n  SCRIPT=\"index.php\"\nelse\n  SCRIPT=$3\nfi\n\nPIDS=\"\"\n\necho '' &gt; results\nfor thread in `seq 1 $THREADS`; do\n  ./benchmark-php $LIMIT $SCRIPT &gt;&gt; results &amp;\n  PIDS=\"$PIDS $!\"\ndone\n\nfor PID in $PIDS; do\n  wait $PID\ndone\n\nRESULTS=`cat results`\nMATH=\"0\"\nfor RESULT in $RESULTS; do\n  MATH=\"$MATH + $RESULT\"\ndone\n\necho \"$MATH\" | bc\n</code></pre>\n\n<p>The result of running <code>./really-benchmark-php 100 8 test.php</code> is ~137 requests per second.</p>\n\n<p>Running the same script on a sqlite or mysql powered instance of Drupal returns ~1.5 req/s.</p>\n\n<p>I have APC and mem_cache both installed, and I have verified that they're running on defaults. (Yes, APC's enable_cli is on, also.) Does someone know the magic \"make PHP execute faster\" switch?</p>\n\n<p>I have an alternative configuration setup (FPM/FastCGI) that serves ~140 req/s of the MySQL Drupal install... how could that be possible if PHP itself can't even serve 2 req/s from the command line?</p>\n\n<p>The result of the <code>ab</code> tool feel just as low to me:</p>\n\n<p>static page: <code>ab -n 1000 -c 100 http://x.x.x.x/</code> Requests per second: 683.71</p>\n\n<p>test php: <code>ab -n 100 -c 5 http://x.x.x.x/</code> Requests per second: 41.38</p>\n\n<p>drupal-mysql: <code>ab -n 100 -c 10 http://x.x.x.x/drupal/</code> Requests per second: 0.24</p>\n\n<p>drupal-sqlite: <code>ab -n 100 -c 10 http://x.x.x.x/drupal-test/</code> Requests per second: 4.92</p>\n"},{"tags":["linux","bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13073658,"title":"Difficulty in parsing the input arguments","body":"<p>The input to my shell should follow the following signature.</p>\n\n<p>myscript.sh var1 var2 [-o var3] [-r var4].</p>\n\n<p>The -o and -r are optional inputs and these options can occur at any location (between var1 &amp; var 2 or at the start/end) but var3 will always preceed var4 if var 3 is specified. Also var1 will preceed var 2.</p>\n\n<pre><code>#!/bin/bash\n\ncase \"$#\" in\n([01]) echo \"Usage: $0 var1 var2 [-o val3] [-r val4]\" &gt;&amp;2; exit 1;;\nesac\n\nVAR1=\"$1\"\nVAR2=\"$2\" \nVAR3=\nVAR4=\n\n\nwhile getopts \":o:r:\" opt; do\n  case $opt in\n    o)\n     VAR3=$OPTARG\n      ;;\n    r)\n     VAR4=$OPTARG \n      ;;\n    \\?)\n      echo \"Invalid option: -$OPTARG\" &gt;&amp;2\n      exit 1\n      ;;\n    :)\n      echo \"Option -$OPTARG requires an argument.\" &gt;&amp;2\n      exit 1\n      ;;\n  esac\ndone\n\nshift $(( OPTIND - 1 ))\n\n\n    if [ -z \"${VAR3+xxx}\" ] &amp;&amp; [ -z \"${VAR4+xxx}\" ];\n    then\n    echo $1 $2;\n    elif [ -z \"${VAR3+xxx}\" ]; \n    then\n    echo $1 $2 $VAR4;\n    elif [ -z \"${VAR4+xxx}\" ];\n    then \n    echo $1 $2 $VAR3;\n    else\n    echo $1 $2 $VAR3 $VAR4;\n    fi\n</code></pre>\n\n<p><strong>How to handle the case where the optional arguments are inbetwen var1 &amp; var2</strong></p>\n"},{"tags":["linux","bash","shell"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13070998,"title":"Better way of parsing the input","body":"<p>My shell script takes in a set of input variables some are optional. The input should follow the following signature. </p>\n\n<p>myscript.sh var1 var2 [-x var3] [-y var4]`. </p>\n\n<p>The -x and -y are <strong>optional</strong> inputs and these options can occur at any location (between var1 &amp; var 2 or at the start) but var3 will always preceed var4. Also var1 will preceed var 2.</p>\n\n<p>The script I have does a lot of if else checks to cover all the probabilities. \nSomething like this  </p>\n\n<pre><code>if [ $1 == \"-x\" ]; then\n## Then check if $3 == \"-y\" \n## Assign values to VAR1 , VAR2, VAR3, VAR4 \n## else check for other possibilities\nfi\n</code></pre>\n\n<p>I was wondering if there was a better way of doing this and assigning the values to variables? </p>\n"},{"tags":["c","regex","bash","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13063725,"title":"Scripting: insert an additional #include after the last #include in many, many files","body":"<p>For a second I was hoping to get away with <code>sed</code>'s <code>a\\</code> command, but <code>sed</code> (in my hands, anyway) isn't really a fan of keeping state (inserts after every #include).</p>\n\n<p>So is there a way to do this with <code>sed</code>? Is there a <em>smart</em> way of doing this?</p>\n\n<p>I'll resort to writing a regular Python/Ruby script if that's the way to go, but this seems to be a problem someone has probably bumped into somewhere, sometime.</p>\n"},{"tags":["bash","putty","sunos"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13073145,"title":"Sun OS 5.10: Bash: Colors and Directory Listings","body":"<p>I'm on a Windows XP box.   I'm using putty 0.60 to access a unix account on a server running SunOS 5.10.  In my .profile file I have the command \"bash\" to put me into that shell upon logging in.</p>\n\n<p>I know with Linux there are options to display files and directories in different colors when I issue the command \"ls\".</p>\n\n<p>Can the same thing be set up for bash running in SunOS 5.10 ?</p>\n\n<p>Thanks much in advance for any information.</p>\n\n<p>Steve</p>\n"},{"tags":["linux","osx","bash","shell","find"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":33,"score":3,"question_id":13074060,"title":"-execdir interpretation on Linux and OSX","body":"<pre><code>find . -iname '*.rar' -execdir ls {} +\n</code></pre>\n\n<p>this will not work under OSX Lion, yielding <code>ls: blabla.rar: No such file or directory</code> etc..</p>\n\n<p>Additionally, above will work under Linux. However, it will invoke ls as many times as it find result. Tested with simple <code>cat $#</code> script.</p>\n\n<p>So I see 2 problems with <code>-execdir</code></p>\n\n<ul>\n<li>under Linux it will NOT combine search result as stated in manual when using <code>{} +</code></li>\n<li>under OSX it will NOT change directory as stated in manual, again using <code>{} +</code></li>\n</ul>\n\n<p>Wanted to confirm that this is buggy and not my misunderstanding.</p>\n"},{"tags":["linux","perl","bash","shell","awk"],"answer_count":11,"favorite_count":7,"up_vote_count":19,"down_vote_count":0,"view_count":4691,"score":19,"question_id":2702564,"title":"How can I quickly sum all numbers in a file?","body":"<p>I have a file which contains several thousand numbers, each on it's own line:</p>\n\n<pre><code>34\n42\n11\n6\n2\n99\n...\n</code></pre>\n\n<p>I'm looking to write a script which will print the sum of all numbers in the file. I've got a solution, but it's not very efficient. (It takes several minutes to run.) I'm looking for a more efficient solution. Any suggestions?</p>\n"},{"tags":["bash","loops","scripting"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":13056966,"title":"Bash Scripting: Trying to find files using ls wild-carding","body":"<p>Here's my problem: I have to resolve various filenames/locations (data directory may have sub-directories) which are user-configurable. If I can resolve the filename completely prior to the loop the following script works:</p>\n\n<pre>\n[prompt] more test.sh\n#! /usr/bin/env bash\n\nnewfile=actual-filename\n\nfor directory in `find -L ${FILE_PATH}/data -type d`; do\n    for filename in `ls -1 ${directory}/${newfile} 2>/dev/null`; do\n        if [[ -r ${filename} ]]; then\n            echo \"Found ${filename}\"\n        fi\n    done\ndone\n\n[prompt] ./test.sh\n[prompt] Found ${SOME_PATH}/actual-filename\n</pre>\n\n<p>However, if newfile has any wildcarding in it the inner-loop will not run. Even if it only returns a single file.</p>\n\n<p>I would use find with some regex, but to auto-generate the proper expressions and do the substitutions for somethings will be tricky (e.g. pgb.f0010{0930,1001}{00,06,12,18} would correlate to some files associate with Sep. 30 and Oct 1 of 2010 the first grouping is computed by my script for a provided date).</p>\n\n<pre><code>pgb.f0010093000 pgb.f0010093006 pgb.f0010093012 pgb.f0010093018 pgb.f0010100100\npgb.f0010100106 pgb.f0010100112 pgb.f0010100118 \n</code></pre>\n\n<p>I'm running Fedora 15 64-bit.</p>\n"},{"tags":["python","bash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":46,"score":-3,"question_id":13072159,"title":"for loop in bash to execute many python processes in the background (&). processes eventually sleep without completing?","body":"<p>I wrote a bash script to execute many python processes via</p>\n\n<pre><code>for i in $(seq 0 20);\ndo\n    python -c \"from controller import start; start($i, $1, $2)\" &amp;\ndone\n</code></pre>\n\n<p>But eventually all the processes eventually go to sleep and do not finish. Running top -x or ps shows that the processes are still alive. </p>\n\n<p>Is there a clear reason for this? </p>\n"},{"tags":["bash","pipe","sh","background-process"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":79,"score":2,"question_id":12689369,"title":"Close pipe even if subprocesses of first command is still running in background","body":"<p>Suppose I have <code>test.sh</code> as below. The intent is to run some background task(s) by this script, that continuously updates some file. If the background task is terminated for some reason, it should be started again.</p>\n\n<pre><code>#!/bin/sh\n\nif [ -f pidfile ] &amp;&amp; kill -0 $(cat pidfile); then\n    cat somewhere\n    exit\nfi\n\nwhile true; do\n    echo \"something\" &gt;&gt; somewhere\n    sleep 1\ndone &amp;\necho $! &gt; pidfile\n</code></pre>\n\n<p>and want to call it like <code>./test.sh | otherprogram</code>, e. g. <code>./test.sh | cat</code>.</p>\n\n<p>The pipe is not being closed as the background process still exists and might produce some output. How can I tell the pipe to close at the end of <code>test.sh</code>? Is there a better way than checking for existence of <code>pidfile</code> before calling the pipe command?</p>\n\n<p>As a variant I tried using <code>#!/bin/bash</code> and <code>disown</code> at the end of <code>test.sh</code>, but it is still waiting for the pipe to be closed.</p>\n\n<hr>\n\n<p>What I actually try to achieve: I have a \"status\" script which collects the output of various scripts (<code>uptime</code>, <code>free</code>, <code>date</code>, <code>get-xy-from-dbus</code>, etc.), similar to this <code>test.sh</code> here. The output of the script is passed to my window manager, which displays it. It's also used in my GNU screen bottom line.</p>\n\n<p>Since some of the scripts that are used might take some time to create output, I want to detach them from output collection. So I put them in a <code>while true; do script; sleep 1; done</code> loop, which is started if it is not running yet.</p>\n\n<p>The problem here is now that I don't know how to tell the calling script to \"really\" detach the daemon process.</p>\n"},{"tags":["bash","format"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":31,"score":3,"question_id":13067148,"title":"bad format decimal in bash script","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/8402181/how-do-i-get-bc1-to-print-the-leading-zero\">How do I get bc(1) to print the leading zero?</a>  </p>\n</blockquote>\n\n\n\n<p>I have this problem:</p>\n\n<pre><code>x=$(echo \"0.81+0.02\" |bc)\necho $x\n</code></pre>\n\n<p>Result <strong>.83</strong></p>\n\n<p>I want see 0.83, but I don't make it.</p>\n"},{"tags":["bash","unix","script"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13069766,"title":"clear memory with variable","body":"<p>Currently I'm creating a little script in BASH that will ask the user to fill in a new IP-address, subnet and gateway. That input goes to a file which will be writen to /etc/network/interface..</p>\n\n<p>I got the script working, but it isn't bullet proof.</p>\n\n<p>When the user input, is not a number but an alphabetic character, It returns and the user needs to fill again a number.\nWhen the user still uses a alphabetic character, the script continues, even though giving a error.</p>\n\n<p>My code:</p>\n\n<pre><code>    echo \"Fill in your IP\"\n    read NEW_IP\n\n    oldIFS=$IFS\n    IFS=.\n    set -- $NEW_IP\n\n    while [ $# -ne \"4\" ]; do  \n      echo \"Must have 4 parts\"\n        read NEW_IP\n        set -- $NEW_IP \n    done\n\n    for oct in $1 $2 $3 $4; do\n      echo $oct | egrep \"^[0-9]+$\" &gt;/dev/null 2&gt;&amp;1 \n      while [ \"$?\" -ne \"0\" ]; do\n          echo \"$oct is not numeric. fill your IP in the correct format;\"\n        read NEW_IP\n      set -- $NEW_IP \n    done\n</code></pre>\n\n<p>I'm new with bash, above I didn't make it by my self. I've found this script on the internet. The while and do, I made that by my self as a loop.\nEverytime the user fills in a wrong number It must return untill the user filled in a correct format.</p>\n\n<p>The real problem lies at the second half of the code. When I fill in a wrong IP like 10.10.10.a, I get the error like I want and I have to fill in for the second time my IP.\nWhen I type 10.41.12.r, an error occured but this time, not complaining about the r at the end, but still complaining about the a which I inserted at the first. 10.41.12 will be checkt, but that last character is different.</p>\n\n<p>I can imagine that everything will be stored in memory, but how do I clear that?\nunset or $oct=<br>\nwon't work</p>\n\n<p>Hope that someone can help me with this. It's my first time programming, and this is giving me a headache</p>\n\n<p>thanks.</p>\n\n<p>Dave</p>\n"},{"tags":["bash","sed","awk"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13064999,"title":"How Can I Run a RegExp Sub on Every gz in a Folder with Bash/Sed/Awk?","body":"<p>I have a bunch of gzipped files in a folder where each line of each file is of the form:</p>\n\n<pre><code>thing, thing2, something, thing4, other_thing, etc...\n</code></pre>\n\n<p>All I want to do is replace the first two commas in each line of each file with tabs, so that each line should look like:</p>\n\n<pre><code>thing\\t thing2\\t something, thing4, other_thing, etc...\n</code></pre>\n\n<p>There are a ton of these files, so I'm just looking for the fastest, most painless way of running this huge replacement. At the end, I'd like to have all of the same files with the same file names and just that one replacement. Ideas?</p>\n"},{"tags":["bash","shell","script","awk"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":144,"score":3,"question_id":13012000,"title":"shell script: with awk, write string1 if string0 is found, else string2","body":"<p>I've got a sequence of directories</p>\n\n<pre><code>079/af3\n100/af4\n120/af3\n  . \n  .\n  .\n</code></pre>\n\n<p>Each <code>???/af?</code> directory contains a very long file <code>results.stdout</code>. Close to the end of this file, one finds the string</p>\n\n<pre><code> Normal termination: iterations complete!\n</code></pre>\n\n<p>if the computation in af3 (resp. af4) was successful, otherwise one or more error messages are written in the file. To avoid having to check each file by hand, I'm writing a script which generates a summary file:</p>\n\n<pre><code> Massflow        af3      af4 \n      079    Success  Failure\n      100    Failure  Success\n      120    Success  Success\n        .      .       .\n        .      .       .\n</code></pre>\n\n<p>So far, I've been able to cook up the following:</p>\n\n<pre><code>#!/bin/bash\n\nstrlen=\"9\" # want to keep the format flexible, instead than hardcode it\nformat0=\"%\"$strlen\"s %\"$strlen\"s %\"$strlen\"s\\n\"\n# write the header of file summary\nawk -v format=\"$format0\" ' BEGIN { printf format, \"Massflow\", \"af3\", \"af4\"\n                             } ' &gt;&gt; summary\n\n\nfor dir in ??? # loop on all the directories\ndo\n    for j in 3 4 # loop on the two subdirs\n    do\n    result[$j]=$(tac $dir/af$j/results.stdout | awk '\n    /TACOMA:- Normal termination: iterations complete!/ {success = 1; exit}\n    END { if (success == 1)\n              print \"Success\"\n          else\n              print \"Failure\"\n        }')\n    done\ndone\nexit \n</code></pre>\n\n<p>However, I don't know how to write the summary file...I'd like to pass the <code>result</code> array to another awk program, but awk doesn't accept array variables. Any suggestions? Feel free to change the approach or even the tools, if you think my programming style, tools choice or both suck :)</p>\n"},{"tags":["linux","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13067236,"title":"create iso from dir having some hidden directories","body":"<p>I have a directory which is having many files and folders(some are hidden). I tried the below commands for creating ISO:\ncd /path/of/content/dir/ &amp;&amp; mkisofs -o /path/of/iso/file.iso * <strong>[In this case it is leaving hidden dirs]</strong></p>\n\n<p>&amp;&amp;</p>\n\n<p>cd /path/of/content/dir/ &amp;&amp; mkisofs -o /path/of/iso/file.iso ./{*,.[^.]*}   <strong>[In this case ISO is building with completely unexpected structure]</strong></p>\n\n<p>Please help?</p>\n"},{"tags":["java","linux","bash","stdin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13066176,"title":"stdin switching between bash and Java","body":"<p>I'm writing a script to launch a Java app and securely provide the Java app with a password. The password should not be echoed to the screen and should not be visible to anyone listing running processes. The following script works fine for this:</p>\n\n<pre><code>echo -n \"enter password: \"\nread -r -s password\njava -classpath $CLASSPATH com.myclientscompany.Manage&lt;&lt;EOF\n$password\nEOF\n</code></pre>\n\n<p>...with the Java program reading the password as a line from stdin.</p>\n\n<p>The problem I'm facing is that after taking the password in this way, I want the Java app to interactively accept further inputs from the user via the console. As it stands currently, every subsequent attempt to read from stdin within Java returns immediately with <code>null</code>. </p>\n\n<p>Is there a way to switch the stdin back to taking console input at the end of this script?</p>\n"},{"tags":["linux","bash","script","sed","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":13064201,"title":"searching for and echoing a portion of string in bash","body":"<p>What's the best way to search in a string for a given pattern and echoing it without using awk? I'd like to use the standard command like <code>grep</code>, <code>cat</code>, <code>cut</code>, or <code>sed</code>.</p>\n\n<p><strong>Example:</strong></p>\n\n<p>Let's pretend I want to strip out the device addresses of all the USB controllers from the output of <code>lspci</code> command:</p>\n\n<pre><code>[artlab@localhost ~]$ lspci\n\n00:00.0 Host bridge: Intel Corporation Core Processor DRAM Controller (rev 18)\n00:1a.0 USB controller: Intel Corporation 5 Series/3400 Series Chipset USB2 Enhanced Host Controller (rev 05)\n00:1c.0 PCI bridge: Intel Corporation 5 Series/3400 Series Chipset PCI Express Root Port 1 (rev 05)\n00:1c.4 PCI bridge: Intel Corporation 5 Series/3400 Series Chipset PCI Express Root Port 5 (rev 05)\n00:1c.5 PCI bridge: Intel Corporation 5 Series/3400 Series Chipset PCI Express Root Port 6 (rev 05)\n00:1d.0 USB controller: Intel Corporation 5 Series/3400 Series Chipset USB2 Enhanced Host Controller (rev 05)\n00:1e.0 PCI bridge: Intel Corporation 82801 PCI Bridge (rev a5)\n00:1f.0 ISA bridge: Intel Corporation 3400 Series Chipset LPC Interface Controller (rev 05)\n00:1f.2 RAID bus controller: Intel Corporation 82801 SATA Controller [RAID mode] (rev 05)\n00:1f.3 SMBus: Intel Corporation 5 Series/3400 Series Chipset SMBus Controller (rev 05)\n02:00.0 Ethernet controller: Intel Corporation 82574L Gigabit Network Connection\n03:00.0 Ethernet controller: Intel Corporation 82574L Gigabit Network Connection\n04:03.0 VGA compatible controller: Matrox Graphics, Inc. MGA G200eW WPCM450 (rev 0a)\n</code></pre>\n\n<p>I'd like to retrieve (print out) the two strings:</p>\n\n<pre><code>00:1a.0\n00:1d.0\n</code></pre>\n"},{"tags":["bash","text","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13063565,"title":"Add symbol to the end of each string in the file","body":"<p>I have txt file with plain text. There are only text strings, something like:</p>\n\n<pre><code>asdasd asd asd asd\nasdasdasdasd asd a\nasdasdasdasdasdasd\n</code></pre>\n\n<p>I need to add <strong>;</strong> symbol to the end of every string. I need to get:</p>\n\n<pre><code>asdasd asd asd asd;\nasdasdasdasd asd a;\nasdasdasdasdasdasd;\n</code></pre>\n\n<p>How can i make this with awk or another text processing utils?</p>\n\n<p>Thank you.</p>\n"},{"tags":["bash","parsing","haskell"],"answer_count":1,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":112,"score":7,"question_id":13054933,"title":"Haskell library for parsing Bash scripts?","body":"<p>Does anybody know of a Haskell library which can parse arbitrary Bash scripts?</p>\n\n<p>A cursory search of Hackage indicates that there's a package called <code>bash</code> for <em>writing</em> scripts, but I don't see anything for <em>parsing</em> them.</p>\n\n<p>Basically I've just had a large collection of Bash scripts dumped on me, and I'd like to do some code analysis on it. But the first stage is obviously to be able to parse this stuff.</p>\n\n<p>I don't know Bash very well personally. I suppose I <em>could</em> sit down and wage through the volumous man-page to get the complete BNF grammar for it. (I imagine it's very complex, given the shell's long and backwards-compatible history.) I was just wondering whether somebody else has already done this work for me...</p>\n"},{"tags":["bash","shell","quoting"],"answer_count":4,"favorite_count":0,"up_vote_count":9,"down_vote_count":0,"view_count":1747,"score":9,"question_id":2657012,"title":"Unix: How to properly nest Bash backticks","body":"<p>Either I missed some backlash or backlashing does not seem to work with too much programmer-quote-looping.</p>\n\n<pre><code>$ echo \"hello1-`echo hello2-\\`echo hello3-\\`echo hello4\\`\\``\"\n\nhello1-hello2-hello3-echo hello4\n</code></pre>\n\n<p><strong>Wanted</strong></p>\n\n<pre><code>hello1-hello2-hello3-hello4-hello5-hello6-...\n</code></pre>\n"},{"tags":["php","bash","script","sed","find"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":47,"score":-2,"question_id":13061010,"title":"Bash script which adds a line before every curly brackets in PHP code","body":"<p>I need to create a bash script that adds a row before every  curly bracket for functions, classes (classes and methods) and try/catch blocks</p>\n\n<p>I think using the program in conjunction with sed E.G.:</p>\n\n<pre><code>*find . -type f \\( -name \"*.php \\) -exec sed .......*\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>&lt;?php\nfunction my_function() {\n\n}\n?&gt;\n</code></pre>\n\n<p>Becomes:</p>\n\n<pre><code>&lt;?php\nfunction my_function() \n{\n\n}\n?&gt;\n</code></pre>\n"},{"tags":["linux","bash","shell","unix"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13060264,"title":"Find which file has the issue from the below Shell Script","body":"<p><strong>Problem Statement:-</strong>\nBelow is the script that someone else wrote and he left the company so I don't know whom should I ask about this. So that is the reason I am posting here to find the solution.</p>\n\n<p>What this script does is- It gzip the data from a particular folder <code>(/data/ds/real/EXPORT_v1x0)</code> for a particular date (20121017) and move it back to HDFS <code>(hdfs://ares-nn/apps/tech/ds/new/)</code> directory.</p>\n\n<pre><code>date=20121017\ngroups=(0 '1[0-3]' '1[^0-3]' '[^01]')\n  for shard in 0 1 2 3 4 5 6 7 8 9 10 11; do\n    for piece in 0 1 2 3; do\n        group=${groups[$piece]}\n        if ls -l /data/ds/real/EXPORT_v1x0_${date}_${shard}_T_${group}*.dat.gz; then\n          gzip -dc /data/ds/real/EXPORT_v1x0_${date}_${shard}_T_${group}*.dat.gz | \\\n          hadoop jar /export/home/ds/lib/HadoopUtil.jar com.host.hadoop.platform.util.WriteToHDFS -z -u \\\n          hdfs://ares-nn/apps/tech/ds/new/$date/EXPORT-part-$shard-$piece\n          sleep 15\n       fi\n    done\n  done\n</code></pre>\n\n<p>So during the migration to HDFS I found out this file has some problem in HDFS-</p>\n\n<pre><code>hdfs://ares-nn/apps/tech/ds/new/20121017/EXPORT-part-8-3\n</code></pre>\n\n<p>So Is there any way by doing some permutation from the above script we can find out what are the files under this directory <code>(/data/ds/real/EXPORT_v1x0)</code> which ultimately got converted to this <code>hdfs://ares-nn/apps/tech/ds/new/20121017/EXPORT-part-8-3</code> which has the problem.</p>\n\n<p>Any thoughts?</p>\n\n<p><strong>Update:-</strong></p>\n\n<p>Something like this below?</p>\n\n<pre><code>groups=(0 '1[0-3]' '1[^0-3]' '[^01]')\n  for shard in 0 1 2 3 4 5 6 7 8 9 10 11; do\n    for piece in 0 1 2 3; do\n        group=${groups[$piece]}\n        if ls -l /data/ds/real/EXPORT_v1x0_${date}_${shard}_T_${group}*.dat.gz; then\n          [ \"$date/EXPORT-part-$shard-$piece\" == \"20121017/EXPORT-part-8-3\" ] &amp;&amp; {\n                echo /data/real/EXPORT_v1x0_${date}_${shard}_T_${group}*.dat.gz\n            }\n         fi\n    done\n  done\n</code></pre>\n\n<p><strong>Few Sample Files Format I have in the /data/real/EXPORT folder-</strong>    </p>\n\n<pre><code>/data/real/EXPORT_v1x0_20121017_4_T_115600_115800.dat.gz\n/data/real/EXPORT_v1x0_20121017_4_T_235600_235800.dat.gz\n/data/real/EXPORT_v1x0_20121017_4_T_115800_120000.dat.gz\n/data/real/EXPORT_v1x0_20121017_4_T_235800_000000.dat.gz\n</code></pre>\n\n<p>And few sample output that I got after making changes-</p>\n\n<pre><code>/data/real/EXPORT_v1x0_20121017_0_T_0*.dat.gz: No such file or directory\n/data/real/EXPORT_v1x0_20121017_0_T_1[0-3]*.dat.gz: No such file or directory\n/data/real/EXPORT_v1x0_20121017_0_T_1[^0-3]*.dat.gz: No such file or directory\n/data/real/EXPORT_v1x0_20121017_0_T_[^01]*.dat.gz: No such file or directory\n</code></pre>\n"},{"tags":["bash","floating-point"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13059845,"title":"Bash C style arithmetic with floating point value","body":"<p>How can I have the right result from this bash script?</p>\n\n<pre><code>#!/bin/bash\necho $(( 1/2 ))\n</code></pre>\n\n<p>I get <code>0</code> as result! So I tried to use these but without success:</p>\n\n<pre><code>$ echo $(( 1/2.0 ))\nbash: 1/2.0 : syntax error: invalid arithmetic operator (error token is \".0 \")\n$ echo $(( 1.0/2 ))\nbash: 1.0/2 : syntax error: invalid arithmetic operator (error token is \".0/2 \")\n</code></pre>\n"},{"tags":["bash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":44,"score":-1,"question_id":13059583,"title":"Where do you store the keys that the user pressed?","body":"<p>Where do you store the keys that the user pressed?\nIt is clear the queue? Thank you\nexample</p>\n\n<pre><code>while true; do\necho \"key?\"\nread -n1 -s PRESS\ncase \"$PRESS\" in\n            a) echo \"function_a\";;\n            b) echo \"function_b\";;\nesac\ndone\n</code></pre>\n\n<p>user presses a, user waiting 1.sec, user presses a = OK<br>\nuser presses aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa !!Problem!!</p>\n\n<p>Where is it stored? It's going to delete it? Delete cache? Delete buffer keyboard? Really do not know :( Thank you.</p>\n"},{"tags":["python","bash","environment-variables"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13059448,"title":"One environment variable available to python child process and another not","body":"<p>Assigning a multiline string to <code>FOO</code> works as expected:</p>\n\n<pre><code>$ read -d '' FOO &lt;&lt;\"EOF\"\n&gt; the content\n&gt; EOF\n$ echo $FOO\nthe content\n$ python -c \"import os; print os.environ.get('FOO')\"\nthe content\n</code></pre>\n\n<p>Seemingly the same thing with <code>FOO_BAR_BAZ</code> works differently:</p>\n\n<pre><code>$ read -d '' FOO_BAR_BAZ &lt;&lt;\"EOF\"\n&gt; the content\n&gt; EOF\n$ echo $FOO_BAR_BAZ\nthe content\n$ python -c \"import os; print os.environ.get('FOO_BAR_BAZ')\"\nNone\n</code></pre>\n\n<p>I either have a subtle error or a misunderstanding.</p>\n"},{"tags":["linux","bash","grep","find","xargs"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13055768,"title":"Linux: Does find | xargs grep have limitations?","body":"<p>I've historically performed something like:</p>\n\n<pre><code>find . 2&gt;/dev/null | xargs grep -i something_to_find 2&gt;/dev/null\n</code></pre>\n\n<p>In if my <code>pwd</code> is barfoo (<code>/foo/bar/baz/foofoo/foobar/foobaz/barfoo</code>) it finds matches.  However, if I <code>cd</code> to <code>/foo</code>, it no longer finds the matches.</p>\n\n<hr>\n\n<p>Conditions:</p>\n\n<ul>\n<li>permissions are all 775</li>\n<li>the directories are not symbolic links</li>\n<li>they are all on the same file system / server</li>\n</ul>\n\n<hr>\n\n<p>So I'm curious if there is a default <code>-maxdepth</code> that is applied to find, or are there other constraints as to why this would not work?</p>\n\n<hr>\n\n<h3>Additional Info:</h3>\n\n<p>Some great comments have been posted.  Here is some additional info:</p>\n\n<ul>\n<li>this is for GNU, not POSIX</li>\n<li><code>find --version</code> : GNU find version 4.2.27</li>\n<li><code>grep --version</code> : (GNU grep) 2.5.1</li>\n<li><code>xargs --version</code> : GNU xargs version 4.2.27</li>\n<li>removing the redirection of STDERR has no bearing on the result, or lack thereof</li>\n<li>the path to the files in <code>barfoo</code> (known to work) do not have spaces, however files in other directories in <code>/foo/bar</code> may have spaces; though, I don't see how that would be problematic</li>\n<li>I realize I wasn't specific on the path, but these are all well-named directories, not to be confused with any devices</li>\n</ul>\n\n<h3>Interesting Finding:</h3>\n\n<p>The first doesn't work, but the second does:</p>\n\n<ol>\n<li><code>find . -type f                | xargs grep -i something_to_find</code></li>\n<li><code>find . -type f -name \"*.ext\"  | xargs grep -i something_to_find</code></li>\n</ol>\n\n<p>Even odder is that <code>-name \"*.*\"</code> does not work, the file extension has to be given; which could be problematic when searching for something.  </p>\n\n<p>I'm wondering if there is termination after a max error count, or maximum buffer size.  I know there are a lot of files in these directories, but the fact it works when specifying the filetype (limiting results) is interesting.</p>\n"},{"tags":["bash","sigint"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":13057771,"title":"SIGINT to cancel read in bash script?","body":"<p>I'm writting a bash wrapper to learn some scripting concepts. The idea is to write a script in bash and set it as a user's shell at login.</p>\n\n<p>I made a while loop that <code>read</code>s and <code>eval</code>s user's input, and then noticed that, whenever user typed <code>CTRL + C</code>, the script aborted so the user session ends.</p>\n\n<p>To avoid this, I trapped <code>SIGINT</code>, doing nothing in the trap.</p>\n\n<p>Now, the problem is that when you type <code>CTRL + C</code> at half of a command, it doesn't get cancelled as one would do on bash - it just ignores <code>CTRL + C</code>.</p>\n\n<p>So, if I type <code>ping stockoverf^Cping stackoverflow.com</code>, I get <code>ping stockoverfping stackoverflow.com</code> instead of the <code>ping stackoverflow.com</code> that I wanted.</p>\n\n<p>Is there any way to do that?</p>\n\n<pre class=\"lang-bsh prettyprint-override\"><code>#!/bin/bash\n\n# let's trap SIGINT (CTRL + C)\ntrap \"\" SIGINT\n\nwhile true\ndo\n    read -e -p \"$USER - SHIELD: `pwd`&gt; \" command\n    history -s $command\n    eval $command\ndone\n</code></pre>\n"},{"tags":["ios","bash","shell","xcode4.2",".bash-profile"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":191,"score":2,"question_id":11526567,"title":"Batch Build and Archive of iOS apps via Terminal","body":"<p>I am trying to simplify the build->archive->submit process for iOS app publishing.\nWe have over 50 mobile apps that have nearly identical framework, but with different artwork and configuration settings.</p>\n\n<p>I normally would load each project in xcode 4.2 and build->archive->submit the usual way with the xcode GUI, but we are up over 50 apps now and this process is very tiresome any time we push out an update.</p>\n\n<p>That being said, I am trying to speed up this process with using a shell function.\nI did plenty of research and found that <a href=\"http://stackoverflow.com/questions/2664885/xcode-build-and-archive-from-command-line\">xcodebuild</a> (See Reid's answer) should work, however the Archive option is not working as I get the following error:</p>\n\n<pre><code>unsupported build action 'archive'\n</code></pre>\n\n<p>So I wrote the following:</p>\n\n<pre><code># $1 should be a date like: 2012-07-17\n# $2 should be a time like: 10.31AM\n# $mybase will be the current directory at the time the function was called\n# so make sure to cd into the folder containing the xcode project folders first\n\nfunction xcodeArchive {\n    mkdir ~/Library/Developer/Xcode/Archives/$1\n    mybase=$PWD\n    for x in `ls`\n    do\n        mkdir ~/Library/Developer/Xcode/Archives/$1/$x\n        mkdir ~/Library/Developer/Xcode/Archives/$1/$x/dSYMs\n        mkdir ~/Library/Developer/Xcode/Archives/$1/$x/Products\n        mkdir ~/Library/Developer/Xcode/Archives/$1/$x/Products/Applications\n        cd $mybase/$x\n        xcodebuild\n        #read -p \"Press [Enter] to continue\"\n        cd $mybase/$x\n        cp $x/$x-Info.plist ~/Library/Developer/Xcode/Archives/$1/$x/Info.plist\n        cp -r build/Release-iphoneos/$x.app.dSYM ~/Library/Developer/Xcode/Archives/$1/$x/dSYMs/$x.app.dSYM\n        cp -r build/Release-iphoneos/$x.app ~/Library/Developer/Xcode/Archives/$1/$x/Products/Applications/$x.app\n        cd ~/Library/Developer/Xcode/Archives/$1/\n        mv $x $x\\ $1\\ $2.xcarchive\n        cd $mybase\n    done\n}\nexport -f xcodeArchive\n</code></pre>\n\n<p>I put this in my .bash_profile and everything runs correctly as I would expect, except I'm not copying the correct \"Info.plist\" and I can't figure out where to copy it from or how to generate it. So now I am stuck.</p>\n\n<p>Xcode will recognize the archives, but it lists them under \"Unknown Schema\" and \"Unnamed Archive\" in the organizer.</p>\n\n<p><strong>Any help regarding now to get the correct Info.plist is greatly appreciated.</strong></p>\n\n<p>I also welcome recommendations on how to improve the script and/or a more efficient way to batch build+archive these iOS apps. </p>\n\n<p><em><strong>Note:</em></strong></p>\n\n<ul>\n<li><p>I am unable to upgrade beyond Xcode 4.2 as that requires (as I understand it) OS X 10.7+ which I am not able to obtain yet (company computer).</p></li>\n<li><p>I am still very much a bash/shell novice, so I apologize for any ugly code/practice above.</p></li>\n<li><p>Also, this is for official app submission, not for ad-hoc or anything like that.</p></li>\n</ul>\n\n<p>Thanks again for your help.</p>\n"},{"tags":["php","apache","bash","permissions","blast"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13017272,"title":"File not found, but files are present","body":"<p>I'm working on a server where users should be able to run protein sequences against a database, and it uses an executable called blastall. The server generates an executable which it should then run using batch. However, it doesn't appear to be running. Here is an example of an executable is generates (cmd.sh):</p>\n\n<pre><code>#!/usr/bin/env sh\ncd /var/www/dbCAN\nphp -q /var/www/dbCAN/tools/blast.php -e -w /var/www/dbCAN/data/blast/20121019135548\n</code></pre>\n\n<p>Where the crazy number at the end of that is an auto-generated job ID based on when the job was submitted. There are 2 issues, and I'm trying to solve one at a time. The first issue is that when manually executed (by me simply running ./cmd.sh), I get the following errors:</p>\n\n<pre><code>sh: 1: /var/www/dbCAN/tools/blast/bin/blastall: not found\nsh: 1: /var/www/dbCAN/tools/blast/bin/blastall: not found\nsh: 1: -t: not found\n</code></pre>\n\n<p>But this doesn't really make sense to me, as the directory specified does in fact contain blastall. It has full rwx permissions and every directory along the way has appropriate permissions. </p>\n\n<p>The blast.php file in tools looks like this:</p>\n\n<pre><code>try {\n  do_blast($opts[\"w\"]);\n  $info['status'] = 'done';\n  $fp = fopen(\"$opts['w']/info.yaml\",\"w\")\n  fwrite($fp, Sypc::YAMLDump($info)); fclose($fp);  \n}\n</code></pre>\n\n<p>With of course variable declarations above it, and the do_blast function looks like this (again with variables declared above it and a cd so the directories work out):</p>\n\n<pre><code>function do_blast($workdir)\n{\n  system(\"/var/www/dbCAN/tools/blast/bin/blastall -d data/blast/all.seq.fa -m 9 -p blastp -i $workdir/input.faa -o $workdir/output.txt\")\n  system(\"/var/www/dbCAN/tools/blast/bin/blastall -d data/blast/all.seq.fa -p blastp -i $workdir/input.faa -o $workdir/output2.txt\")\n}\n</code></pre>\n\n<p>Any idea what may be causing this issue? I thought it may be because I'm running it and it was created by apache, but rwx is allowed for all users. I can include more information if needed, but I chose not to at this point because the original person who wrote the PHP split up everything into tons of little files, so it's difficult to pinpoint where the problem is exactly. Any ideas (if not complete solutions) are very appreciated.</p>\n\n<p>EDIT: Solution found. As it turns out, the blastall executable had been compiled on a different linux system. Switched to a different executable and it ran flawlessly. </p>\n"},{"tags":["linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":35,"score":1,"question_id":13056926,"title":"shell script syntax error near unexpected 'done'","body":"<p>hi im new to linux and need help with a shell script i am writing to automatically find the ip of ftp servers and copy files to them. this is the code i have but it errors when run </p>\n\n<pre><code>USER=anonymous\nPWD=any\nPORTCHECK=\"1\"\nfor IP in 'sqe 6 250';\ndo\nPORTCHECK= nmap -p21 -oG - 192.168.1.$IP | grep '21/open'\nif [$PORTCHECK != \"1\" ]; then\nftp -p -n -i -v 192.168.1.$IP\nuser $USER $PWD\ncd \"Mounted Volume\"\nput foo\nput bar\nbye\nif\nCHECKPORT=\"1\"\ndone\n</code></pre>\n\n<p>and the error is </p>\n\n<pre><code>./newscrpt: line 19: syntax error near unexpected token `done'\n./newscrpt: line 19: `done'\n</code></pre>\n\n<p>this is being used to copy file to multiple winCE media system after reinstall please help i cant work it out</p>\n"},{"tags":["bash","scripting"],"answer_count":2,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":5973,"score":9,"question_id":1378274,"title":"In a bash script, how can I exit the entire script if a certain condition occurs?","body":"<p>I'm writing a script in Bash to test some code. However, it seems silly to run the tests if compiling the code fails in the first place, in which case I'll just abort the tests.</p>\n\n<p>Is there a way I can do this without wrapping the entire script inside of a while loop and using breaks? Something like a <strong>dun dun dun</strong> goto?</p>\n"},{"tags":["linux","bash","command-line"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":158,"score":2,"question_id":11834899,"title":"Tail inverse / printing everything except the last n lines?","body":"<p>Is there a (POSIX command line) way to print all of a file EXCEPT the last n lines? Use case being, I will have multiple files of unknown size, all of which contain a boilerplate footer of a known size, which I want to remove. I was wondering if there is already a utility that does this before writing it myself.</p>\n"},{"tags":["bash","shell","unix"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13055068,"title":"BASH - Quick networksetup command Q","body":"<p>I have the below command that fails when I run it through a bash script but If I copy each echoed statement and paste them in a terminal it works...</p>\n\n<pre><code>networksetup -listallntworkservices | while read line; do networksetup -setautoproxy '\"'$line'\"' http://etc...\n</code></pre>\n\n<p>I ideally only want to run the above command for network services that have \"Ethernet\" or \"Wi-fi\" in the name.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13054973,"title":"How to show text color in Bash","body":"<p>How to show text color?</p>\n\n<pre><code>a = background: Brown\na = text: White\n\nb = background: yellow\nb = text: black\n\necho -e \"bbb aaa bbb\"\nand\necho -e \"aaa bbb aaa\"\n</code></pre>\n\n<p>my result is not nice :-( Thank you</p>\n"},{"tags":["osx","bash","shell","unix","operating-system"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13054671,"title":"BASH - Run command for each line in output of previous command","body":"<p>All,\nI am want to request all network services using: </p>\n\n<pre><code> networksetup -listallnetworkservices\n</code></pre>\n\n<p>I then want to run the below command for each line in produced from the above command:</p>\n\n<pre><code>networksetup -setautoproxyurl \"A LINE FROM ABOVE\" http://etc...\n</code></pre>\n\n<p>Adiitonally, I only want to issue the setautoproxyurl command for service with \"Ethernet\" or \"Wi-Fi\" in the name</p>\n\n<pre><code> networksetup -listallnetworkservices | while read line; do networksetup -setautoproxy $line http://etc...\n</code></pre>\n"},{"tags":["file","bash","expect","channel","puts"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13052232,"title":"expect puts write to file","body":"<p>I am writing an expect script that will ssh into several IPs to test their connectivity.  I would like to include a \"puts\" statement to write the result of each test to a file on the machine calling the script.  Although I think I'm following the manual for puts to write to a file, it only writes to stdout.  Please see the script below.  The end result is that the file is created on the local machine, but no output is directed to it.  Instead, the output goes to stdout.</p>\n\n<pre><code>#!/bin/bash\n\nUSER=user\nPASSWORD=password\nIPSTART=12.34.56.\nOUTFILE=\"TEST.log\"\nPROMPT=\"#\"\n\nfor IPEND in `seq 200 231`\ndo\n\nexpect -c \"\n        set timeout 3\n        set chan [open $OUTFILE w]\n        spawn ssh $USER@$IPSTART$IPEND\n                expect -re \\\".*ssword.*\\\" {send \\\"$PASSWORD\\n\\\"}\n\n                expect {\n                        -re \\\".*Are you sure you want to continue connecting.*\\\" {send \\\"yes\\n\\\"; exp_continue}\n                        -re \\\".*$PROMPT.*\\$.*\\\"  {puts $chan \\\"$IPSTART$IPEND\\n\\\"; send \\\"exit\\n\\\"}\n                }\n\n        close $chan\n\"\n\ndone\n</code></pre>\n\n<p>I'm wondering if there might be an issue with the quoting, but I can't figure it out.</p>\n\n<p>For reference, this is the example from <a href=\"http://www.tcl.tk/man/tcl8.4/TclCmd/puts.htm\" rel=\"nofollow\">http://www.tcl.tk/man/tcl8.4/TclCmd/puts.htm</a></p>\n\n<pre><code>set chan [open my.log a]\nset timestamp [clock format [clock seconds]]\nputs $chan \"$timestamp - Hello, World!\"\nclose $chan\n</code></pre>\n"},{"tags":["linux","bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13053857,"title":"Add prefix to every single hostname in Bash","body":"<p>If I have a string like: <code>a.com b.com c.com</code></p>\n\n<p>How can I add to the front of it to make it like <code>*.a.com *.b.com *.c.com</code> using Bash?</p>\n"},{"tags":["git","bash","shell","windows-xp","msysgit"],"answer_count":3,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":2103,"score":5,"question_id":5851611,"title":"Git sh.exe process forking issue on windows XP, slow?","body":"<p>Git is essential to my workflow. I run MSYS Git on Windows XP on my quad core machine with 3GB of RAM, and normally it is responsive and zippy. </p>\n\n<p>Suddenly an issue has cropped up whereby it takes >30 seconds to run any command from the Git Bash command prompt, including <code>ls</code> or <code>cd</code>. Interestingly, from the bash prompt it looks likes <code>ls</code> runs fairly quickly, I can then see the output from <code>ls</code>, but it then takes ~30 seconds for the prompt to return. If I switch to the windows command prompt (by running <code>cmd</code> from the start menu) git related commands also take forever, even just to run. For example <code>git status</code> can take close to a minute before anything happens. Sometimes the processes simply don't finish. </p>\n\n<p>Note that I have \"MSYS Git\" installed as well as regular \"MSYS\" for things like <code>MinGW</code> and <code>make</code>. </p>\n\n<p>I believe the problem is related to <code>sh.exe</code> located in <code>C:\\Program Files\\Git\\bin</code>. When I run <code>ls</code> from the bash prompt, or  when I invoke <code>git</code> from the windows prompt, task manager shows up to four instances of <code>sh.exe</code> processes that come and go.  </p>\n\n<p>Here I am waiting for <code>ls</code> to return and you can see the task manager has <code>git.exe</code> running and four instances of <code>sh.exe</code>:\n<img src=\"http://i.stack.imgur.com/VSp0a.png\" alt=\"Here I am waiting for ls to return and you can see the task manager has git.exe running and four instances of sh.exe\"></p>\n\n<p>If I <code>ctrl-c</code> in the middle of an <code>ls</code> I sometimes get errors that include:</p>\n\n<pre><code>sh.exe\": fork: Resource temporarily unavailable\n      0 [main] sh.exe\" 1624 proc_subproc: Couldn't duplicate my handle&lt;0x6FC&gt; fo\nr pid 6052, Win32 error 5\nsh.exe\": fork: Resource temporarily unavailable\n</code></pre>\n\n<p>Or for <code>git status</code>:\n$ git status</p>\n\n<pre><code>sh.exe\": fork: Resource temporarily unavailable\nsh.exe\": fork: Resource temporarily unavailable\nsh.exe\": fork: Resource temporarily unavailable\nsh.exe\": fork: Resource temporarily unavailable\n</code></pre>\n\n<p><em>Can I fix this so that git runs quickly again, and if so how?</em> </p>\n\n<p>Things I have tried:</p>\n\n<ul>\n<li>Reboot</li>\n<li>Upgrade MSYS Git to most recent version &amp; Reboot</li>\n<li>Upgrade MSYS to most recent version &amp; Reboot </li>\n<li>Uninstall  MSYS &amp; uninstall and reinstall MSYS Git alone &amp; Reboot </li>\n</ul>\n\n<p>I'd very much like to not wipe my box and reinstall Windows, but I will if I can't get this fixed. I can no longer code if it takes me >30 s to run <code>git status</code> or <code>cd.</code></p>\n"},{"tags":["bash","rm"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":446,"score":3,"question_id":10247472,"title":"How to prevent rm from reporting that a file was not found?","body":"<p>I am using <code>rm</code> within a BASH script to delete many files. Sometimes the files are not present, so it reports many errors. I do not need this message. I have searched the man page for a command to make <code>rm</code> quiet, but the only option I found is <code>-f</code>, which from the description, \"ignore nonexistent files, never prompt\", seems to be the right choice, but the name does not seem to fit, so I am concerned it might have unintended consequences.</p>\n\n<ul>\n<li>Is the <code>-f</code> option the correct way to silence <code>rm</code>? Why isn't it called <code>-q</code>?</li>\n<li>Does this option do anything else?</li>\n</ul>\n"},{"tags":["file","bash","scripting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13053063,"title":"Bash - Source a file with \"/\"","body":"<p>I have a cache in the filesystem which I implemented this way.</p>\n\n<ol>\n<li><p>To store a value I do something like</p>\n\n<pre><code>echo \"\"$KEY1\"_\"$KEY2\"=\"$VALUE\" &gt;&gt; $CACHE_DIR/$INDEX.cache\n</code></pre></li>\n<li><p>To get a value, first I source the cache file:</p>\n\n<pre><code>source $CACHE_DIR/$INDEX.cache\n</code></pre>\n\n<p>and then I echo the <code>\"$KEY1\"_\"$KEY2\"</code></p></li>\n</ol>\n\n<p>Cache example:</p>\n\n<pre><code>foo1_foo2=wohohhowwho\n</code></pre>\n\n<p>The problem with this, is that I have some keys that have a \"/\" in it, so when I have this:</p>\n\n<pre><code>foo3_foo/4=wohohhowwho\n</code></pre>\n\n<p>and source the file, it says</p>\n\n<pre><code>cache/15637.cache: line 1: foo3_foo/4=wohohhowwho: No such file or directory\n</code></pre>\n\n<p>because of the <code>/</code>. </p>\n\n<p>Is there an option to the source command to not search in the path for files and only take in count the content as vars? I could escape the <code>/</code>, but is there another way?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13042734,"title":"Parsing command line arguments in bash - strange behavior","body":"<pre><code>#!/bin/bash\n\nfor arg\ndo\n        echo \"$arg\"\ndone\n</code></pre>\n\n<p>In file called compile. </p>\n\n<p>I tried this:</p>\n\n<pre><code>compile ha -aa -bb -cc -dd -ee -ff -gg\nha\n-aa\n-bb\n-cc\n-dd\n\n-ff\n-gg\n</code></pre>\n\n<p>Why does -ee not show up?\nIn fact,  it seems that -[e]+ does not show up.</p>\n"},{"tags":["linux","bash","shell","tar"],"answer_count":5,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":13041068,"title":"How to grep for a pattern in the files in tar archive without filling up disk space","body":"<p>I have a tar archive which is very big ~ 5GB.</p>\n\n<p>I want to grep for a pattern on all files (and also print the name of the file that has the pattern ) in the archive but do not want to fill up my disk space by extracting the archive.</p>\n\n<p>Anyway I can do that?</p>\n\n<p>I tried these, but this does not give me the file names that contain the pattern, just the matching lines:</p>\n\n<pre><code>tar -O -xf test.tar.gz | grep 'this'\ntar -xf test.tar.gz --to-command='grep awesome'\n</code></pre>\n\n<p>Also where is this feature of tar documented? tar xf test.tar $FILE</p>\n"},{"tags":["bash","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13051729,"title":"Using sed and delete last line","body":"<p>I'm using sed command to delete the first two line, but when I redirect the content to a file appear the number of rows. I don't know how can I delete it.</p>\n\n<p>I execute:</p>\n\n<pre><code>sed '7,9d' mi_fichero.txt\n</code></pre>\n\n<p>And the result is:</p>\n\n<p>(I write the last lines)</p>\n\n<pre><code> /XTENT/D3/REPOSITORY/20120305/2201/65601/84/1330951636844_D3_448987414829688495_.indd.gz\n /XTENT/D3/REPOSITORY/20120308/2201/65601/22/1331198783835_D3_3411473776849856760_.indd.gz\n /XTENT/D3/REPOSITORY/20120308/2201/65601/158/1331220874606_D3_2742969984589497048_.indd.gz\n /XTENT/D3/REPOSITORY/20120313/2201/65601/0/1331626743284_D3_7551629114585379089_.indd.gz\n /XTENT/D3/REPOSITORY/20120309/2201/65601/92/1331295878839_D3_4724445611762228808_.indd.gz\n(60 rows)\n</code></pre>\n\n<p>I want to delete the line (60 rows), Anybody can help me ?</p>\n\n<p>Thanks :) </p>\n"},{"tags":["bash","if-statement","case"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13048994,"title":"case or If string contains word1 and word2","body":"<p>In this example I want it to know if $@ contains two words/symbols \"load\" and \"/\"</p>\n\n<p>for one word/symbol this works</p>\n\n<pre><code>    case \"$@\" in */*)\n    ;;\n    echo \"going to do stuff\"\n*)\n    echo \"will do something else\"\n    ;;\nesac\n</code></pre>\n\n<p>or</p>\n\n<pre><code>string='My string';\n\nif [[ \"$string\" == *My* ]]\nthen\n  echo \"It's there!\";\nfi\n</code></pre>\n\n<p>But if two words/symbols appear at random places I cant figure out how to do it.</p>\n\n<p>Update:</p>\n\n<p>The input will the module command. In this case I want to know if it is the module load with or without / that indicate version. the command will look like this</p>\n\n<p>1) module load appname/1.1.1 or<br>\n2) module load appname<br>\n3) module (not load) (list, avail etc)  </p>\n\n<p>It is number 1 I am interested in for now.<br>\n3 will in some cases be variation of 1.<br>\n2 will be run as is but will include a message to the user</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":40,"score":3,"question_id":13034404,"title":"How do I subtract a word from the output in bash","body":"<p>I made a simple bash script to convert movies from .avi to .mp4 but now I want to do two more things.</p>\n\n<ol>\n<li>Have the output file have only *.mp4 rather than *.avi.mp4</li>\n<li>Delete the old file after the conversion is completed.  </li>\n</ol>\n\n<p>Here is my script.</p>\n\n<pre><code>#!/bin/bash\n\n\navconv -i \"$1\" -c:v libx264 -c:a copy -sn -crf 24 \"$1\".mp4\n</code></pre>\n"},{"tags":["bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":61,"score":3,"question_id":13038023,"title":"BASH Loop how to go about it?","body":"<p>Ok I have a tower of 8 HDD's and I'm trying to make a script that will loop through them and make a text file with the results (info from hdparm) for each HDD in there own folders. How can I now loop this script to go for sdc -> /Bay2, sdd -> /Bay3, sde -> /Bay4 ect ect</p>\n\n<p>This is working now for one HDD just need to loop it for the other 7</p>\n\n<pre><code>if [ -c /dev/sdb ];\nthen\nsudo hdparm -I /dev/sdb &gt;&gt; /Bay1/sdb.txt\nfi\n</code></pre>\n"},{"tags":["linux","bash","shell","ubuntu"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":45,"score":-1,"question_id":13050871,"title":"Sudoers file permissions","body":"<p>I'm trying to run the following command without the need for sudo:</p>\n\n<pre><code>echo 1 | sudo tee -a /sys/block/$hd/device/delete\n</code></pre>\n\n<p>The $hd variable changes dynamically from sdb -> sdi for each one of my HDD's in my drive bay.</p>\n\n<p>I added the following line to the sudoers file:</p>\n\n<pre><code>operator ALL=/sys/block/sdb/device/delete\n</code></pre>\n\n<p>But this didn't make a difference its still asking for sudo password even if I run:</p>\n\n<pre><code>echo 1 | sudo tee -a /sys/block/sdb/device/delete\n</code></pre>\n"},{"tags":["linux","bash","pipe","supervisord"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":280,"score":2,"question_id":9404391,"title":"bash pipe & sigterm","body":"<p>I have a bash script \"script\" which roughly looks like:</p>\n\n<pre><code>#!/bin/bash\n\ncmd1 | cmd2 | cmd3\n</code></pre>\n\n<p>When I do a <code>kill script</code> (or more precisely when I do a 'stop script' in <code>supervisord</code>), not all cmd* are killed.  How can I make sure they are terminated along with the script that spawned them?</p>\n"},{"tags":["osx","bash","delete","special-characters","typing"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12335787,"title":"With iTerm2 on Mac, how to delete forward a word from cursor on command-line?","body":"<p>With iTerm2 1.0.0 on Mac OS X 10.6.8, I'd like to delete from cursor to the next end of word, i.e. deleting one word forward.  I tried <code>Alt-d</code> but this types the delta operator symbol <a href=\"http://www.wolframalpha.com/input/?i=%E2%88%82\" rel=\"nofollow\"><code>∂</code></a> and doesn't delete.  How to suppress the typing but let it delete?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13049045,"title":"How to display the key pressed by the user?","body":"<p>please help how to add variables in this script, does anyone know? Thank you all.</p>\n\n<pre><code>#!/bin/bash\n\nARROW_UP=???    # I do not know\nARROW_DOWN=???  # I do not know\nARROW_LEFT=???  # I do not know\nARROW_RIGHT=??? # I do not know\nARROW_ENTER=??? # I do not know\n\ncase \"$KEY\" in \"$ARROW_UP\")    echo \"press the up arrow key\"\n               \"$ARROW_DOWN\")  echo \"press the down arrow key\";;\n               \"$ARROW_LEFT\")  echo \"press the left arrow key\"\n               \"$ARROW_RIGHT\") echo \"press the right arrow key\"\n               \"$ARROW_ENTER\") echo \"press the enter key\"\nesac\n</code></pre>\n"},{"tags":["bash","for-loop"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13048824,"title":"For loop using variable as condition, Bash","body":"<p>I am running the following bash code:</p>\n\n<pre><code>num=$(ls -1 $ini/*.ini | wc -l)\necho \"Running $num simulations...\"\nfor i in {1..$num};\ndo\n    echo \"a\"\ndone\n</code></pre>\n\n<p>And I get the following output:</p>\n\n<pre><code>Running 24 simulations...\na\n</code></pre>\n\n<p>It should print 24 lines of 'a', but it doesn't. What should I change? Thanks!</p>\n"},{"tags":["bash","shell","tmux"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13048740,"title":"run or send a command to a tmux pane in a running tmux session","body":"<p>I want to write a shell script which will attach to a named tmux session, select a window (or pane) in that session and run a command in that selected window (or pane). </p>\n\n<p>How do I do this from a bash script?</p>\n\n<p>I know <code>tmux new-window -n:mywindow 'exec something'</code> allows you to send commands to a freshly created window. But I need something like <code>tmux select-window -t:0 'my command'</code></p>\n\n<p>I suppose I could use <code>send-keys</code> but seems like their should be something that takes a command or list of commands that get run.</p>\n"},{"tags":["linux","bash","shell","ubuntu","sudo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13047725,"title":"How to run device delete without sudo password?","body":"<p>I'm running the following command to shut down HDD's (changing the sd'x' depending on drive) but its always asking me to enter a password to delete the device from the folder. Is there away around this? Probably obvious and I'm missing the point :) </p>\n\n<pre><code>echo 1 | sudo tee -a /sys/block/sdb/device/delete\n</code></pre>\n"},{"tags":["bash","shell","variables","script","ls"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12806828,"title":"how to put a filename from the newest file in the directory into a variable","body":"<p>I am making a script. i need to automate a portion that looks at all the files in the directory containing the string \"HNAZXLCOM\" in the name then take the newest file with that string in the name and put the filename into a variable. </p>\n\n<p>Thanks</p>\n"},{"tags":["linux","bash","shell","script","wget"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":123,"score":4,"question_id":13042156,"title":"Shell script with Wget - If else nested inside for loop","body":"<p>I'm trying to make a shell script that reads a list of download URLs to find if they're still active.  I'm not sure what's wrong with my current script, (I'm new to this) and any pointers would be a huge help!</p>\n\n<p>user@pc:~/test# cat sites.list</p>\n\n<pre><code>http://www.google.com/images/srpr/logo3w.png\nhttp://www.google.com/doesnt.exist\nnotasite\n</code></pre>\n\n<p>Script:</p>\n\n<pre><code>#!/bin/bash\nfor i in `cat sites.list`\ndo\nwget --spider $i -b\nif grep --quiet \"200 OK\" wget-log; then\necho $i &gt;&gt; ok.txt\nelse\necho $i &gt;&gt; notok.txt\nfi\nrm wget-log\ndone\n</code></pre>\n\n<p>As is, the script outputs everything to notok.txt - (the first google site should go to ok.txt).\nBut if I run:</p>\n\n<pre><code>wget --spider http://www.google.com/images/srpr/logo3w.png -b\n</code></pre>\n\n<p>And then do:</p>\n\n<pre><code>grep \"200 OK\" wget-log\n</code></pre>\n\n<p>It greps the string without any problems.  What noob mistake did I make with the syntax?  Thanks m8s!</p>\n"},{"tags":["linux","bash","unix","pipe"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13040430,"title":"piping split input into command","body":"<p>I'm trying to figure out a piping problem. my goal is something like this</p>\n\n<pre><code>replace $1 $2 index.html | split -d ':' | minify main.css\n</code></pre>\n\n<p>Where the output from main.css is</p>\n\n<pre><code>main.css:main.min.css\n</code></pre>\n\n<p>And index.html will go from this:</p>\n\n<pre><code>&lt;link href=\"main.css\" /&gt;\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>&lt;link href=\"main.min.css\" /&gt;\n</code></pre>\n\n<p>It's a simple example, I know, but I think it illustrates my problem.</p>\n\n<ul>\n<li>Edit 1</li>\n</ul>\n\n<p>Okay, i got the piping the wrong way around, but I still can't figure this out.</p>\n\n<p>here's a simpler example</p>\n\n<pre><code>echo 'foo:bar' | split -d ':' | replace $1 $2 -- index.html\n</code></pre>\n\n<p>is that kind of command possible?</p>\n\n<ul>\n<li>Edit 2</li>\n</ul>\n\n<p>So close!</p>\n\n<pre><code>minify css/main.css | replace $(cut -f1 -) $(cut -f2 -) index.html\n</code></pre>\n\n<p>this would work except that for some reason cut can't read STDIN :( they are returning the correct values when run normally but I need them as arguments for the replace command</p>\n"},{"tags":["linux","bash","shell","tcsh"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13046192,"title":"changing default shell in linux","body":"<p>How it is possible to change the default shell? Currently <code>env</code> command says </p>\n\n<pre><code>SHELL=/bin/tcsh\n</code></pre>\n\n<p>and I want to change that to bash</p>\n"},{"tags":["bash","variables"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13028259,"title":"Bash: variable does not get populated","body":"<p>Originally from: <a href=\"http://stackoverflow.com/questions/13024828/if-grep-finds-what-it-is-looking-fore-do-x-else-y\">IF grep finds what it is looking fore do X else Y</a> but the original question was answered.</p>\n\n<p>$@ has the value of \"Load firefox/3.6.12\"</p>\n\n<pre><code>var1=$(echo \"$@\" | grep -Eio '\\s\\w*') # Gets the application name and put it into var1\necho $var1   # is not printed should be \"firefox\"\nvar2=$(echo \"$@\" | grep -o '[^/]*$')  # Gets version name and put it into var2 \necho $var2 # prints fine\n</code></pre>\n\n<p>The regex is fine, it has worked before one time before i changed some thing</p>\n\n<p>Edit:\nThere is something wrong with</p>\n\n<pre><code>var1=$(echo \"$@\" | grep -Eio '\\s\\w*') #expected result is: firefox\n</code></pre>\n\n<p>I works fine if i use</p>\n\n<pre><code>var1=\"firefox\"\n</code></pre>\n\n<p>I must have changed something a some point.</p>\n\n<p>Edit:\nSOLUTION</p>\n\n<pre><code>echo \"Load firefox/6.12.3\" | awk ‘{print $2}’ | cut -f1 -d”/”\n</code></pre>\n\n<p>Grep is no longer used.</p>\n"},{"tags":["arrays","bash","sorting"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13046151,"title":"Sort in bash - how to sort by characters lying middle or end of line","body":"<p>I have the following pdf files to be combined.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>20121024aC004101\n20121024a_002101\n20121024a_003101\n20121024aN006101\n20121024aA001101\n20121024a_005101\netc...\n</code></pre>\n\n<p>But my result should be in the order of 00101, 002101... i.e. sort based on 11th charater;\nanybody can help me. I am new to bash, recently started to learn.</p>\n"},{"tags":["bash","checkbox","script","arrow-keys"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":319,"score":1,"question_id":8813260,"title":"Checkboxes with bash script","body":"<p>I am trying to do a very simple bash script which emulates the behavior of checkboxes in appearance!\nI want it to show some options and move the cursor to the next checkbox according to the key press of the left or right arrow keys. I've already managed to do this using READ and Ansii escape sequences to detect the arrow keys and I use tput to move the cursor.</p>\n\n<p>My problem with this it's that I need to read a certain letter (x for instance) to be pressed and then take another action. But how can I detect this key press and at the same time detect if an arrow key it's being pressed or not??</p>\n\n<p>To detect the ansii codes I need to read 3 characters and with the X character (the key to \"select\") I need to read just one, how can I read 3 characters and at the same time read just one?</p>\n\n<p>Also I've been trying to make something so the user can JUST press the left or right arrow keys or the x key but if he presses ANY other key, nothing should happen!</p>\n\n<p>I've done this this far:</p>\n\n<pre><code>#!/bin/bash\n## Here I just print in the screen the \"form\" with the \"checkboxes\"\nfunction screen_info(){\nclear\ncat &lt;&lt;EOF\n\n    /\\_/\\_/\\_/\\_/\\_/\\_/\\_/\\_/\\_/\\_\n    ||\n    ||      1[ ]    2[ ]    3[ ]\n    ||\n    #############################\n\n\n\nEOF\n}\n\n## This function detects the arrow keys and moves the cursor\nfunction arrows(){\n\n## I use ANSII escape sequences to detect the arrow keys\nleft_arrow=$'\\x1b\\x5b\\x44'  #leftuierda\nright_arrow=$'\\x1b\\x5b\\x43' #rightecha\njust_x_key=\"\"\n\n## With tput I move the cursor accordingly\ncursor_x=14\ncursor_y=3\ntput cup $cursor_y $cursor_x\n\nwhile [ -z \"$just_x_key\" -o \"$just_x_key\" != \"$just_x_key\" ]; do\n    read -s -n3 key\n    while [ `expr length \"$key\"` -ne 3 ]; do\n        key=\"\"\n        read -s -n3 key\n        break\n    done\n    case \"$key\" in\n    $left_arrow)\n        if [ $cursor_x -gt 14 ]; then\n            cursor_x=`expr $cursor_x - 8`\n        fi\n        tput cup $cursor_y $cursor_x\n        #This is supposed to be a simple condition detecting the x key pressed wich I want to trigger something... But how to read a single character to this condition and 3 characters at the same time if the user presses the arrow key ???? =/\n        #read -s just_x_key\n        #if [ $just_x_key == x ]; then\n        #   echo X\n        #   tput cup 7 15\n        #   echo \"YOU PRESSED THE RIGHT KEY!!! =D\"\n        #fi \n        ;;\n    $right_arrow)\n        if [ $cursor_x -lt 28 ]; then\n            cursor_x=`expr $cursor_x + 8`\n        fi\n        tput cup $cursor_y $cursor_x\n        #read -s just_x_key\n        #if [ $just_x_key == x ]; then\n        #   echo X\n        #   tput cup 7 15\n        #   echo \"YOU PRESSED THE RIGHT KEY!!! =D\"\n        #fi \n        ;;\n    esac\ndone\n\nexit $?\n}\n\n\n#EXECUTION\n#=========\n\n## I just call the functions!\nscreen_info\narrows\n</code></pre>\n\n<p>Yes I know, it's not the most perfect code ever but I'm trying to learn. Suggestions will be very appreciated.</p>\n"},{"tags":["bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13044053,"title":"Having trouble understanding what \">>\" and \"&\" are doing in this BASH line","body":"<p>I am trying to debug a script written for use in BASH.  I am a little confused as to what the following line is doing.</p>\n\n<pre><code>ffmpeg -threads 1 -f yuv4mpegpipe -i ./tmp/dvd-slideshow_temp_3203/dvdss-pipe-3203 -target ntsc-dvd -r 29.97 -an -aspect 4:3 -s 480 -y -bf 2 -f mpeg2video ./tmp/dvd-slideshow_temp_3203/video.mpg &gt;&gt; /dev/null 2&gt;&amp;1 &amp;\n</code></pre>\n\n<p>the bit that really has me confused is the last bit:</p>\n\n<pre><code>&gt;&gt; /dev/null 2&gt;&amp;1 &amp;\n</code></pre>\n\n<p>I would be grateful if someone could tell me what this line is doing.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":829,"score":4,"question_id":5506176,"title":"bash: echo something to right end of window (right aligned)","body":"<p>I am looking for producing success/fail messages which are right aligned in bash. An example would be what apache2 produces on executing: <code>sudo /etc/init.d/apache2 reload</code> etc.  </p>\n\n<p>In above example, apache2 produces very nice and concise <code>[OK]</code> or <code>[fail]</code> message which are right aligned.</p>\n\n<p>Also, would love to know how to get the text red, in case, we are to produce a <code>[fail]</code> message.</p>\n"},{"tags":["linux","bash","filesystems","gnu"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13025860,"title":"How to search back in directory tree on GNU/Linux for a file","body":"<p>I have few repositories and each have config.php file that contain information about database like password. I have script that connect to database using stuff from that file and need to search back in directory tree so I can call it in every nested directory.</p>\n\n<pre><code>[ -e config.php ] &amp;&amp; $(php -r 'require(\"config.php\"); echo \"mysql -u\".$config[\"db_user\"] . \" -p\".$config[\"db_pass\"] . \" \" . $config[\"db_name\"];')\n</code></pre>\n\n<p>What is easiest way to search back in directory tree using Bash?</p>\n"},{"tags":["bash","unix","replace","sed","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":13043998,"title":"sed: replace a block of text","body":"<p>I have a bunch of files, starting with a block of code and I'm trying to replace with another.</p>\n\n<p>Replace:</p>\n\n<pre><code>&lt;?php\n$r = session_start();\n(more lines)\n</code></pre>\n\n<p>With:</p>\n\n<pre><code>&lt;?php\nheader(\"Location: index.php\");\n(more lines of code)\n</code></pre>\n\n<p>So im trying to match the block with <code>sed 's/&lt;?php\\n$r = session_start();/&lt;?php\\nheader...</code> but it doesn't work. </p>\n\n<p>I would appreciate help in what is happening here and how to achieve this. I'm thinking in doing this with python instead.</p>\n\n<p>Thanks!</p>\n"},{"tags":["regex","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13043344,"title":"Search and replace in bash using regular expressions","body":"<p>I've seen this example:</p>\n\n<pre><code>hello=ho02123ware38384you443d34o3434ingtod38384day\necho ${hello//[0-9]/}\n</code></pre>\n\n<p>Which follows this syntax: ${variable//pattern/replacement}</p>\n\n<p>Unfortunately the \"pattern\" field doesn't seem to support full regex syntax (if I use . or \\s, for example, it tries to match the literal characters).</p>\n\n<p>How can I search/replace a string using full regex syntax?</p>\n"},{"tags":["bash","ocr","mule","tesseract"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":13039604,"title":"Running shell scripts from Mule ESB","body":"<p>I have a flow set up to recognize when a file is dropped into a directory. Next I need to run a Bash script that processes the file (fairly intensive processing). The script grabs a PDF, creates a temporary directory, breaks the PDF into separate PNG files, runs an OCR processor against each image, converts the result to single-page PDFs, then merges all of the PDFs into a single multi-page PDF with the text layer from the OCR.</p>\n\n<p>The problem is, the Bash script chokes after 10 concurrent transformations are triggered. Right now I have Mule ESB listening for new files, then triggering the script for each file, passing the appropriate parameters. Unfortunately, Mule has two tasks, listen -> trigger. We are going to have over 200 files in that directory that need to be queued for processing, preferably 5 at a time. How do I get Mule to limit the number of concurrent processes triggered?</p>\n\n<p>Below is my initial draft Flow:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;mule xmlns:cxf=\"http://www.mulesoft.org/schema/mule/cxf\" xmlns:scripting=\"http://www.mulesoft.org/schema/mule/scripting\" xmlns:http=\"http://www.mulesoft.org/schema/mule/http\" xmlns:file=\"http://www.mulesoft.org/schema/mule/file\" xmlns=\"http://www.mulesoft.org/schema/mule/core\" xmlns:doc=\"http://www.mulesoft.org/schema/mule/documentation\" xmlns:spring=\"http://www.springframework.org/schema/beans\" version=\"CE-3.3.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"\nhttp://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd \nhttp://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/current/mule-scripting.xsd \nhttp://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd \nhttp://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd \nhttp://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/current/mule-cxf.xsd \nhttp://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd \"&gt;\n    &lt;configuration&gt;\n    &lt;default-threading-profile doThreading=\"false\"/&gt;\n  &lt;/configuration&gt;\n\n    &lt;queued-asynchronous-processing-strategy name=\"limitThreads\" maxThreads=\"2\"/&gt;\n\n    &lt;flow name=\"Poll_DirectoryFlow1\" doc:name=\"Poll_DirectoryFlow1\" processingStrategy=\"limitThreads\"&gt;\n        &lt;file:inbound-endpoint path=\"/home/administrator/Downloads/Input\" responseTimeout=\"10000\" doc:name=\"File\" pollingFrequency=\"5000\" fileAge=\"5000\"&gt;\n\n        &lt;/file:inbound-endpoint&gt;\n        &lt;scripting:component doc:name=\"Script\"&gt;\n            &lt;scripting:script engine=\"Groovy\"&gt;\n                &lt;property key=\"originalFilename\" value=\"#[header:originalFilename]\"/&gt;\n                &lt;scripting:text&gt;&lt;![CDATA[def filename = message.getInboundProperty('originalFilename')\n                                                        println \"$filename\"\n                                                        def directory = message.getInboundProperty('directory')\n                                                        println \"$directory\"\n                                                        \"mkdir processed\".execute()\n                                                        def command = [\"/home/administrator/ocr.sh\", \"$directory/$filename\", \"/home/administrator/Downloads/Output/$filename\"]\n                                                        println \"$command\"\n                                                        def proc = \"pwd\".execute()\n                                                        command.execute()\n                                                        proc.waitFor()\n                                                        println \"${proc.in.text}\"]]&gt;&lt;/scripting:text&gt;\n            &lt;/scripting:script&gt;\n        &lt;/scripting:component&gt;\n        &lt;echo-component doc:name=\"Echo\"/&gt;        \n    &lt;/flow&gt;\n&lt;/mule&gt;\n</code></pre>\n\n<p>Here is the actual Bash script (gives some hints on what tools we are using):</p>\n\n<pre><code>#!/bin/bash\n\n#Setting variables\nPARAM=$#\nTMPDIR=./split\nINFILENAME=${1##*/}\nOUTFILENAME=${2##*/}\necho \"1 is $1\"\necho \"2 is $2\"\necho \"infilename is $INFILENAME\"\necho \"outfilename is $OUTFILENAME\"\n\n#Logging I/O filenames\necho \"infile: $1\" &gt;&gt; error.log\necho \"outfile: $2\" &gt;&gt; error.log\n\n#If the temporary directory doesn't exist, make it\nif [ ! -d \"$TMPDIR\" ];\nthen\n    mkdir $TMPDIR\nfi\n\n#Check to see that the correct number of params have been passed.\nif [[ $PARAM -lt 2 ]];\nthen\n    echo \"Usage: $0 source.pdf output.pdf\"\n    echo \"output.pdf is the desired output file\"\n    echo \"source.pdf is a file to be OCR'd\"\n    exit 1\nfi\n\n#Make sure the input file is a PDF\nif [ \"${1##*.}\" == \"pdf\" ];\nthen\n    multilayer=false\n\n    #Check to see if the input file is a multi-layered pdf with searchable text\n        if grep -Fl \"Font\" \"$1\"; then multilayer=true; fi\n\n    #If it's not multi-layered, then perform the OCR\n    if [ \"$multilayer\" == \"false\" ];\n    then\n        mkdir $TMPDIR/\"$INFILENAME/\"\n        echo \"making temporary directory $TMPDIR/$INFILENAME\"\n        #Split the PDF into pdf's of one page per df in a temporary directory\n        pdftk \"$1\" burst output \"$TMPDIR/$INFILENAME/pg_%04d.pdf\"\n        echo \"burse output to $TMPDIR/$INFILENAME/pg_%04d.pdf\"\n        mv \"$1\" processed/\n        for files in \"$TMPDIR/$INFILENAME/\"*\n            do\n            echo \"$files\"\n                    filename=$(basename \"$files\")\n                    filename=\"${filename%.*}\"\n\n            #Convert the pdf page into an image\n                    gs -r300 -o \"$TMPDIR/$INFILENAME/$filename.jpeg\" -sDEVICE=jpeg \"$TMPDIR/$INFILENAME/$filename.pdf\"\n\n            #Perform the OCR against the image\n                    tesseract \"$TMPDIR/$INFILENAME/$filename.jpeg\" \"$TMPDIR/$INFILENAME/$filename\" hocr\n\n            #Combine the OCR'd image and OCR'd text into a multi-layer PDF file of that page\n                    hocr2pdf -i \"$TMPDIR/$INFILENAME/$filename.jpeg\" -o \"$TMPDIR/$INFILENAME/$filename.pdf\" &lt; \"$TMPDIR/$INFILENAME/$filename.html\"\n                    compressed=\"$filename-compressed.pdf\"\n\n            #Compress the multi-layered PDF of the page\n                    gs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dNOPAUSE -dQUIET -dBATCH -sOutputFile=\"$TMPDIR/$INFILENAME/$compressed $TMPDIR/$INFILENAME/$filename.pdf\"\n                    mv \"$TMPDIR/$INFILENAME/$compressed\" \"$TMPDIR/$INFILENAME/$filename\"\n            done\n\n        #Concatenate all of the multiline PDF pages into a single PDF file\n        pdftk \"$TMPDIR/$INFILENAME/\"*.pdf cat output \"$OUTFILENAME\"\n        compressed=\"$OUTFILENAME-compressed.pdf\"\n\n        #Compress the multi-layered PDF\n        gs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dNOPAUSE -dQUIET -dBATCH -sOutputFile=\"$compressed\" \"$OUTFILENAME\"\n        mv \"$compressed\" \"$2\"\n        rm -rf \"$TMPDIR/$INFILENAME\"\n    else\n        echo \"The input file is multi-layered\"\n        mv \"$1\" \"$2\"\n    fi\nelse\n    echo \"Please enter a valid input pdf file\"\n    exit 2\nfi\n</code></pre>\n"},{"tags":["linux","bash","shell","tar"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13041345,"title":"Getting contents of a particular file in the tar archive","body":"<p>This script lists the name of the file ( in a tar archive) containing a pattern.</p>\n\n<pre><code>tar tf myarchive.tar | while read -r FILE\ndo\n    if tar xf test.tar $FILE  -O | grep \"pattern\" ;then\n        echo \"found pattern in : $FILE\"\n    fi\ndone\n</code></pre>\n\n<p>My question is:</p>\n\n<p>Where is this feature documented, where $FILE is one of the files in the archive:</p>\n\n<pre><code>tar xf test.tar $FILE\n</code></pre>\n"},{"tags":["git","bash","unix","shell"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":278,"score":1,"question_id":1787666,"title":"How do I find out what options git-diff uses when it invokes less?","body":"<p>I want to reproduce the pager behavior that git-diff uses but I don't know how. Is there a way I could find out what options it uses with less?</p>\n\n<p>I already tried this: <code>strings \"$(dirname $(which git-diff))/*\" | grep 'less '</code></p>\n\n<p>And this (while less was running): <code>ps aux | grep less</code> &lt;= Didn't show me which options it was using.</p>\n\n<p>I'm on Darwin.</p>\n"},{"tags":["bash","google","curl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13039891,"title":"Using curl in a bash script, how do I effectively log into Google Voice?","body":"<p>My bash script is doing the following:</p>\n\n<pre><code>curl -k -s -c gv.cookies https://accounts.google.com/ServiceLogin -F Email=something@gmail.com -F Passwd=somepassword -F service=grandcentral\n</code></pre>\n\n<p>This seems to work. The cookies file is created, and if I peruse the output, it certainly thinks that I've logged in.</p>\n\n<p>However, when I next do this:</p>\n\n<pre><code>curl -k -s -b gv.cookies https://www.google.com/voice/\n</code></pre>\n\n<p>I get a \"moved temporarily\" page, and not the Google Voice markup that I expect.</p>\n\n<p>Am I missing some parameter to curl that makes it use the cookies correctly? I don't need it fixed so much as I need someone to point me in the right direction.</p>\n"},{"tags":["python","osx","bash","zip","python-module"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":374,"score":2,"question_id":3760970,"title":"Is there a way to run a python script that is inside a zip file from bash?","body":"<p>I know there is a way to import modules which are in a zip file with python. I created kind of custom python package library in a zip file. </p>\n\n<p>I would like to put as well my \"task\" script in this package, those are using the library. Then, with bash, I would like to call the desired script in the zip file without extracting the zip.</p>\n\n<p>The goal is to have only one zip to move in a specified folder when I want to run my scripts.</p>\n"},{"tags":["linux","bash","find","exec"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":13039410,"title":"Find and rename a directory","body":"<p>I am trying to find and rename a directory on a linux system.</p>\n\n<p>the folder name is something like : <code>thefoldername-23423-431321</code></p>\n\n<p><code>thefoldername</code> is consistent but the numbers change every time.</p>\n\n<p>I tried this:</p>\n\n<pre><code>find . -type d -name 'thefoldername*' -exec mv {} newfoldername \\;\n</code></pre>\n\n<p>The command actually works and rename that directory. But I got an error on terminal saying that there is no such file or directory.</p>\n\n<p>How can I fix it?</p>\n"},{"tags":["c","bash","unix","script","stdout"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":69,"score":2,"question_id":13037934,"title":"Simple Bash-C communication","body":"<p>I'm trying to build a script that will respond to a simple C program. I guess the scripts needs to read line by line and parse the text until it finds the question. Then it has to reply to the same stdout. The script reads in at an infinite loop, and i start it on the command line </p>\n\n<pre><code>./script.sh &amp;\n</code></pre>\n\n<p>in order to have it running in the background. Then, in the same terminal, i start my C programm that outputs on the command line and waits at a scanf.\nMy problem is that it looks as if those two processes are interacting with a different stdout since they can't \"see\" eachother. Obviously i have misunderstood something...any help?</p>\n\n<pre><code>#!/bin/bash\nfor (( ; ; )) do\n    while read line; do\n        if [ \"$line\" == \"&gt;\" ] then\n        echo \"yes\"\n        fi\n    done\ndone    \n</code></pre>\n"},{"tags":["bash","file-rename"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13037660,"title":"How to programmatically rename XYZUpperCamelCase files to xyzLowerCamelCase?","body":"<p>I have a great number of files that need <code>svn mv</code>'d, and I'd rather not do it all by hand.</p>\n\n<p>Each file name follows the format <code>XYZSomething.txt</code> or <code>SomethingElse.txt</code>, and should be renamed to <code>xyzSomething.txt</code> and <code>somethingElse.txt</code>, respectively.</p>\n\n<p>If I didn't need to deal with the abbreviation prefix, I could just use something like</p>\n\n<pre><code>for f in *; do svn mv $f ${f,}; done\n</code></pre>\n\n<p>which lowercases just the first character in the filename. As it stands, this gets me 90% of the way, so it wouldn't be too painful to finish it by hand; but I would still like to know how to cover the prefix for future knowledge.</p>\n\n<p>So tell me, great Bash wizards of StackOverflow, what's the best way to rename these files?</p>\n"},{"tags":["bash","file-manipulation","set-difference"],"answer_count":4,"favorite_count":5,"up_vote_count":13,"down_vote_count":0,"view_count":3145,"score":13,"question_id":2509533,"title":"bash, Linux: Set difference between two text files","body":"<p>I have two files <code>A</code>-<code>nodes_to_delete</code> and <code>B</code>-<code>nodes_to_keep</code>. Each file has a many lines with numeric ids.</p>\n\n<p>I want to have the list of numeric ids that are in <code>nodes_to_delete</code> but NOT in <code>nodes_to_keep</code>, e.g. <img src=\"http://mathworld.wolfram.com/images/equations/SetDifference/Inline1.gif\" alt=\"alt text\">.</p>\n\n<p>Doing it within a PostgreSQL database is unreasonably slow. Any neat way to do it in bash using Linux CLI tools?</p>\n\n<p><strong>UPDATE:</strong> This would seem to be a Pythonic job, but the files are really, really large. I have solved some similar problems using <code>uniq</code>, <code>sort</code> and some set theory techniques. This was about two or three orders of magnitude faster than the database equivalents.</p>\n\n<p>Adam</p>\n"},{"tags":["xml","bash","xhtml","shell","xpath"],"answer_count":10,"favorite_count":11,"up_vote_count":32,"down_vote_count":4,"view_count":45458,"score":28,"question_id":893585,"title":"How to parse XML in Bash?","body":"<p>Ideally, what I'd like to be able to do is:</p>\n\n<pre><code>cat xhtmlfile.xhtml |\ngetElementViaXPath --path='/html/head/title' |\nsed -e 's%(^&lt;title&gt;|&lt;/title&gt;$)%%g' &gt; titleOfXHTMLPage.txt\n</code></pre>\n"},{"tags":["c","bash","converter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":96,"score":-1,"question_id":13035005,"title":"Convert Bash Script to C. Is that possible?","body":"<p>I found the following:\n<a href=\"http://www.basic-converter.org/stable/bacon.bash\" rel=\"nofollow\">http://www.basic-converter.org/stable/bacon.bash</a></p>\n\n<p>Is such a way possible to convert from bash to c?</p>\n\n<p>Reason: Is C faster then BASH? I want to run something as a deamon instead of a cron job.</p>\n"},{"tags":["linux","bash","shell","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":76,"score":3,"question_id":13032137,"title":"How can I reduce one of the pipe in the following awk statement","body":"<p><code>ls -lrt | awk ' !/dly/ { print $NF } ' | awk ' /000001.txt.gz/ { print } '</code></p>\n\n<p>I want to display the file names which matches following condition:\n1)Should not contain \"dly\" keyword.\n2)Should contain \"000001.txt.gz\" keyword.</p>\n\n<p>I used the above command. Is it possible to combine 2 pipes I used ?</p>\n"},{"tags":["regex","bash","shell","sed","awk"],"answer_count":6,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":82,"score":6,"question_id":13027807,"title":"Select odd columns, then put fields of consecutive rows together","body":"<p>I have a data file that I need to transform with regular expressions. More specifically, I need to maintain the first 6 columns the same, and from the 7th column on, select only the odd columns, and then put together the fields of each pair of consecutive rows. I know it sounds a bit complicated so I'll clarify this through an example. This is my original data file (it could have any number of columns):</p>\n\n<pre><code>A B C D E F 11 12 13 14 15 16 17 18\nA B C D E F 21 22 23 24 25 26 27 28\nA B C D E F 31 31 33 34 35 36 37 38\nA B C D E F 41 42 43 44 45 46 47 48\nA B C D E F 51 52 53 54 55 56 57 58\nA B C D E F 61 62 63 64 65 66 67 68\nA B C D E F 71 72 73 74 75 76 77 78\nA B C D E F 81 82 83 84 85 86 87 88\n</code></pre>\n\n<p>I figured out I can maintain the 6 first columns and then delete the odd ones with</p>\n\n<pre><code>awk '{for (i = 1; i &lt;= NF; i++) if (i &lt; 7 || i % 2 == 1) printf $i OFS}; {print \"\"}\n</code></pre>\n\n<p>being this the result:</p>\n\n<pre><code>A B C D E F 11 13 15 17 \nA B C D E F 21 23 25 27 \nA B C D E F 31 33 35 37 \nA B C D E F 41 43 45 47 \nA B C D E F 51 53 55 57 \nA B C D E F 61 63 65 67 \nA B C D E F 71 73 75 77 \nA B C D E F 81 83 85 87 \n</code></pre>\n\n<p>But after that I have to put together the fields of each pair of consecutive rows, like this:</p>\n\n<pre><code>A B C D E F 11 21 13 23 15 25 17 27\nA B C D E F 31 41 33 43 35 45 37 47\nA B C D E F 51 61 53 63 55 65 57 67\nA B C D E F 71 81 73 83 75 85 77 87\n</code></pre>\n\n<p>I was thinking of using sed or awk to make the whole process, since my data files are huge and I need to transform them efficiently, but I couldn't figure out a way to do the second transformation too. Any help would be highly appreciated.</p>\n"},{"tags":["linux","osx","bash","terminal"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":13036855,"title":"Adding a line break after PS1","body":"<p>I'm trying to add a line break after my prompt.  Basically I want:</p>\n\n<pre><code>$ ls\n                    &lt;-- how do I get this line break?\nfile1 file2 file3\n                    &lt;-- this one is easy, PS1=\"\\n$ \" or whatnot\n$\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>$ ls\nfile1 file2 file3\n$\n</code></pre>\n"},{"tags":["bash","sed","awk"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":165,"score":0,"question_id":13023595,"title":"sed/awk - print text between patterns spanned across multiple lines","body":"<p>I am new to scripting and was trying to learn how to extract any text that exists between two different patterns. However, I am still not able to figure out how to extract text between two patterns in the following scenario:</p>\n\n<p>If I have my <strong>input file</strong> reading:</p>\n\n<pre><code>Hi I would like\nto print text\nbetween these \npatterns\n</code></pre>\n\n<p>and my expected <strong>output</strong> is like:</p>\n\n<pre><code>I would like\nto print text\nbetween these \n</code></pre>\n\n<p>i.e. my first search pattern is \"Hi' and skip this pattern, but print everything that exists in the same line following that matched pattern. My second search pattern is \"patterns\" and I would like to completely avoid printing this line or any lines beyond that.</p>\n\n<p>I tried the following:</p>\n\n<pre><code>sed -n '/Hi/,/patterns/p' test.txt \n</code></pre>\n\n<p>[output]</p>\n\n<pre><code>Hi I would like\nto print text\nbetween these \npatterns \n</code></pre>\n\n<p>Next, I tried:</p>\n\n<pre><code>`awk ' /'\"Hi\"'/ {flag=1;next} /'\"pattern\"'/{flag=0} flag { print }'` test.txt \n</code></pre>\n\n<p>[output]</p>\n\n<pre><code>to print text\nbetween these\n</code></pre>\n\n<p>Can someone help me out in identifying how to achieve this?\nThanks in advance</p>\n"},{"tags":["bash","screen"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13035384,"title":"bash screen title usage (screen -t \"something\")","body":"<p>I was working with <code>screen</code> lately and wanted to use the <code>-t</code> option for it. What's the point of the<code>-t</code> option if the title of the screen does not show anywhere like when using <code>-list</code> or within the screen when it's attached?</p>\n\n<p>There is a command <code>CTRL-A double-quote(\")</code> to see all active screens, and then it shows the title, but that does not really do the job, because I have to have the screen attached already. I want to read out the title BEFORE attaching any screens, to attach the right one in the first place.</p>\n\n<p>Is there a method to use <code>-t</code> in a convenient way? </p>\n\n<p>Edit:\nThere is one method: <code>ctrl-a \"</code> and then <code>ctrl-a {numberofscreen}</code>. I guess that's the best way to use the screen titles?</p>\n\n<p>Edit2:\nIt seems I was using screen incorrectly. I mixed up windows with instances of screen. Better usage (for me): use the same screen (with <code>screen -r</code>) and create windows within, which I then can name and list using one of the several methods.\nTo sum it up:\nThe title <code>-t</code> is not the screen title, but the WINDOW title.\nThank you for the discussion!</p>\n\n<p>Edit3:\nI just found out: The names which are shown in <code>screen -list</code> are the Session names. The command would be <code>screen -S \"sessionname\"</code> .</p>\n"},{"tags":["linux","bash","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13033226,"title":"Detect repeated characters using grep","body":"<p>I'm trying to write a grep (or egrep) command that will find and print any lines in \"words.txt\" which contain the same lower-case letter three times in a row. The three occurrences of the letter may appear consecutively (as in \"mooo\") or separated by one or more spaces (as in \"x x x\") but not separated by any other characters.</p>\n\n<p>words.txt contains: </p>\n\n<pre><code>The monster said \"grrr\"!\nHe lived in an igloo only in the winter.\nHe looked like an aardvark.\n</code></pre>\n\n<p>Here's what I think the command should look like:</p>\n\n<pre><code>grep -E '\\b[^ ]*[[:alpha:]]{3}[^ ]*\\b' 'words.txt'\n</code></pre>\n\n<p>Although I know this is wrong, but I don't know enough of the syntax to figure it out. Using grep, could someone please help me? </p>\n"},{"tags":["bash","time","set","posix"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13032610,"title":"Strange interaction of bash time, set -e and false, differences of bash 3 vs. bash 4","body":"<p>Following recipe to <code>time</code> <code>false</code> under <code>set -e</code> succeeds (success in the sense that the <code>time</code> output can be seen):</p>\n\n<pre><code>(\nset +e\ntime { ( set -e; false; echo no0; ); }\necho yes0 $?\n)\n</code></pre>\n\n<p>But following recipes fail:</p>\n\n<pre><code>(\nset -e\ntime false\necho no1\n)\n</code></pre>\n\n<p>As well:</p>\n\n<pre><code>(\nset -e\ntime { false; echo no2; }\necho no2\n)\n</code></pre>\n\n<p>As well (surprisingly it outputs yes3 under bash3 and nothing under bash4):</p>\n\n<pre><code>(\nset -e\ntime ( false; echo no3; )\necho yes3 $?\n)\n</code></pre>\n\n<p>As well (not very suprising):</p>\n\n<pre><code>(\nset +e\ntime { set -e; false; echo no4; }\necho no4\n)\n</code></pre>\n\n<p>As well (surprise):</p>\n\n<pre><code>(\nset +e\ntime ( set -e; false; echo no5; )\necho yes5 $?\n)\n</code></pre>\n\n<p>And following succeeds under bash3 and does something completely different under bash4:</p>\n\n<pre><code>(\nset -e\ntime { ( false; echo no7; ); echo yes6 $?; }\necho yes6 $?\n)\n</code></pre>\n\n<p>Note that the \"no\" <code>echo</code>es are not printed, while the \"yes\" are output by bash3 (but not all by bash4).</p>\n\n<p>If you compare this with the subshell <code>(...)</code> processing under <code>set -e</code> it looks like the <code>time</code> builtin is executed with the subshell context in the <code>time (...)</code> case.  WTF?</p>\n\n<p>Tested with</p>\n\n<pre><code>GNU bash, version 3.2.25(1)-release (x86_64-redhat-linux-gnu)\nCopyright (C) 2005 Free Software Foundation, Inc.\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>real    0m0.000s\nuser    0m0.001s\nsys     0m0.000s\nyes0 1\nyes3 1\nyes5 1\nyes6 1\n\nreal    0m0.000s\nuser    0m0.000s\nsys     0m0.001s\nyes6 0\n</code></pre>\n\n<p>and</p>\n\n<pre><code>GNU bash, version 4.1.5(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2009 Free Software Foundation, Inc.\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>real    0m0.001s\nuser    0m0.000s\nsys     0m0.004s\nyes0 1\nyes5 1\n</code></pre>\n\n<p>Note that \"yes3\" and \"yes6\" cases show a huge difference in how bash3 and bash4 process <code>set -e</code>.</p>\n\n<p>But the \"yes5\" case is confusing.  It looks like \"time\" somehow is processed by the subshell and not in the outer shell.</p>\n\n<p><strong>Is this behavior enforced by POSIX, is one of the bashs buggy or is it just a <code>bash</code> special behavior?</strong></p>\n\n<p>Thanks ;)</p>\n\n<p>PS: If you are puzzled why this is not academic:  There once was a script running under <code>set -e</code> (\"yes3\" without <code>time</code>).  It was altered to log some timing information, the hack looks like \"yes6\".  But now bash4 comes around and it needes a fix again.</p>\n"},{"tags":["java","bash","redirect","testcase"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":89,"score":1,"question_id":8618306,"title":"how to write simple txt testcases in java","body":"<p>Hi I'm writing my first Java app and I've got a few Testcases (*.tc files) I want to direct to the app via this script:</p>\n\n<pre><code>for f in `ls *.tc`; do\n  echo \"Current Testcase: $f\"\n  x=${f%.*}\n  java Main &lt; $x.tc &gt; $x.out\n\n  if diff \"$x.out\" \"$x.should\"; then\n    echo \"passed testcase $f\"\n    let PASSED=PASSED+1\n  else\n    echo \"failed testcase $f\"\n    let FAILED=FAILED+1\n fi\ndone\n</code></pre>\n\n<p>The Problem is I can't quite figure out why as soon as the <code>tc file</code> contains more than one line the app goes nuts. For example: <code>quit.tc</code> contains</p>\n\n<pre><code>quit\n</code></pre>\n\n<p>and works just like when I manually enter \"quit\", therfore the testcase passes.\nHowever when I write another tc: <code>quit2.tc</code> which contains</p>\n\n<pre><code>lala\ntest\nquit\n</code></pre>\n\n<p>The app quits after the first command (because the readString function seems to return null afterwards).\nHere is the function responsible for reading:</p>\n\n<pre><code>public String readString(){\n\nBufferedReader br = new BufferedReader(new InputStreamReader(System.in));\nString answer = null;\n\ntry {\n  answer = br.readLine();\n  return answer;\n}\ncatch(IOException ioe) {\n  System.out.println(\"IO Error\");\n}\nreturn answer;\n}   \n</code></pre>\n\n<p>I dont know why or when this function returns null when I redirect to the app, which seems to be the problem. Can you help out so I can get the tc script working? thx</p>\n"},{"tags":["bash","variables","hyperlink","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":13000582,"title":"bash script gives error with mv ... probably easy fix","body":"<p>EDIT: the fixnames.sh called at the end is probably generating the error (particularly line 2):</p>\n\n<pre><code>    #/bin/bash\n    for x in *\\'*;\n    do\n    y=$(echo \"$x\"| sed y/\\'\\,/__/)\n    mv \"$x\" \"$y\"\n    done\n</code></pre>\n\n<p>The problem line is the mv command at the end</p>\n\n<pre><code>    mv $OUTDIR/$OLD $OUTDIR/$NEW\n</code></pre>\n\n<p>It errors with something like:</p>\n\n<pre><code>    mv '*\\* [something about unable to stat this]\n</code></pre>\n\n<p>This script was something I customized from one that had been posted here <a href=\"http://www.mythtv.org/wiki/Removing_Commercials\" rel=\"nofollow\">http://www.mythtv.org/wiki/Removing_Commercials</a> and some other places.  The goal of the mv was, iirc, to clean up the tmp directory (removing a symbolic link that I clunkily used to do a rename of the file).  I'm a little unclear on what is happening in that mv line and the 2 lines prior that is apparently causing the script not to finish cleanly.  Thanks for any input.</p>\n\n<pre><code>    #!/bin/sh\n    VIDEODIR=$1\n    FILENAME=$2\n    CHANID=$3\n    STARTTIME=$4\n    # MythTV Install Prefix\n    INSTALLPREFIX=\"/usr/bin\"\n    USRLOCALPREFIX=\"/usr/local/bin\"\n    HOMEDIR=\"/home/xxx\"\n    OUTDIR=\"/home/xxx/trans-out\"\n    TMPDIR=\"/home/xxx/trans-out/tmp\"\n\n    if [ ! -d $TMPDIR ]; then mkdir $TMPDIR; fi\n    rm -f $TMPDIR/*\n\n    # Sanity checking, to make sure everything is in order.\n    if [ -z \"$VIDEODIR\" -o -z \"$FILENAME\" -o -z \"$CHANID\" -o -z \"$STARTTIME\" ]; then\n            echo \"Usage: $0 &lt;VideoDirectory&gt; &lt;FileName&gt; &lt;CHANID&gt; &lt;STARTTIME&gt;\"\n            exit 5\n    fi\n    if [ ! -f \"$VIDEODIR/$FILENAME\" ]; then\n            echo \"File does not exist: $VIDEODIR/$FILENAME\"\n            exit 6\n    fi\n    # The meat of the script. Flag commercials, copy the flagged commercials to\n    # the cutlist, and transcode the video to remove the commercials from the\n    # file.\n\n    $INSTALLPREFIX/mythtranscode --chanid $CHANID --starttime $STARTTIME --mpeg2 --honorcutlist --showprogress -o $OUTDIR/$FILENAME.tmp\n    ERROR=$?\n    if [ $ERROR -ne 0 ]; then\n            echo \"Transcoding failed for ${FILENAME} with error $ERROR\"\n            exit $ERROR\n    fi\n\n    # use mythlink script to extract program information from database and make link in tmp subfolder for renaming of transcoded version.\n    $USRLOCALPREFIX/mythlink.pl --link $TMPDIR --chanid $CHANID --starttime $STARTTIME --underscores --separator _ --format %T_%oY%om%od_%S\n\n    # remove the map file since we are transcoding\n    rm -f $OUTDIR/$FILENAME.tmp.map\n\n    # set variables for newfilename-link and oldfilename-transcoded file and then to rename transcoded with link name\n    NEW=$(ls $TMPDIR)\n    OLD=$(ls $OUTDIR | grep -i \"mpg.tmp\" | awk '{ print $1; }')\n    mv $OUTDIR/$OLD $OUTDIR/$NEW\n\n    # remove commas and apostraphies\n    cd $OUTDIR &amp;&amp; $USRLOCALPREFIX/fixnames.sh\n</code></pre>\n"},{"tags":["bash","read-file"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13030940,"title":"bash: read stdin line by line with custom line delimiter","body":"<p>I have a bash script that reads lines from stdin.</p>\n\n<pre><code>while read var\ndo\n    echo $var\ndone\n</code></pre>\n\n<p>Now, I have to modify this so I could accept input with line delimiter \"EndOfMessage\" (delimiter of several symbols).</p>\n\n<p>How could I do that?</p>\n"},{"tags":["python","bash","googletest"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":13021941,"title":"seg fault when called from python, but runs normally from the command line","body":"<p>I am writing a python script that is used for continuous integration and test that will be called by bitten.  Our unit tests use the google test framework.  Each software component has a bash script that runs configuration and other required services and runs the gtest executable.  The python script walks the repository looking for the bash scripts, and calls each script using the os.popen() command. </p>\n\n<p>Python script (UnitTest.py)</p>\n\n<pre><code>#!/usr/bin/python\n\nimport os\nimport fnmatch\nimport sys\nimport subprocess\n\nrepository_location = '/home/actuv/workspace/eclipse/iccs/'\nunit_test_script_name = 'RunUnitTests.sh'\n\ndef file_locator(repo, script_name):\n    # Function for determining all unit test scripts\n    test_location = []\n    for root, dirnames, filenames in os.walk(repo):\n        for filename in fnmatch.filter(filenames, script_name):\n            test_location.append(os.path.join(root))\n    return test_location\n\ndef run_tests(test_locations, script_name):\n    # Runs test scripts located at each test location\n    for tests in test_locations:\n        cmd = 'cd ' + tests + ';./' + script_name\n        print 'Running Unit Test at: ' + tests\n        os.popen(cmd)\n\n################    MAIN    ################\n# Find Test Locations\nscript_locations = file_locator(repository_location, unit_test_script_name)\n\n# Run tests located at each location\nrun_tests(script_locations)\n\n# End of tests\nsys.exit(0)\n</code></pre>\n\n<p>Bash Script</p>\n\n<pre><code>#!/bin/sh\n\necho \"Running unit tests...\"\n\n# update the LD_LIBRARY_PATH to include paths to our shared libraries\n#export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:XYZ\n\n# start the test server\ncd ../../TestServerComponent/test\n../build/app/src/TestServerComponent&amp;\nSERVERPID=$(echo $!)\ncd ../../TestClientComponent/test \nTESTDIR=$PWD\n\n# Run the single client tests\ncd SingleClientTests\n../../build/test/SingleClientTests/TestSingleClient --gtest_output=\"xml:gtest-ACSC.xml\"\n\n#run the multiclient tests\ncd $TESTDIR\ncd MultiClientTests/HighAuthorityClient\n../../../build/test/MultiClientTests/HighAuthorityClient/TestMultiClientHA&amp;\nHIGHPID=$(echo $!)\ncd $TESTDIR\ncd MultiClientTests/LowAuthorityClient\n../../../build/test/MultiClientTests/LowAuthorityClient/TestMultiClientLA --gtest_output=\"xml:gtest-ACMC.xml\"\n\n# wait to allow all processes to end before terminating the server\nsleep 10s\n\necho 'Send Term signal to: ' $SERVERPID\nkill -2 $SERVERPID\n</code></pre>\n\n<p>When I run the bash script manually from a terminal window, it runs fine.  When I have the python script call the bash script I get a segmentation fault on the TestSingleClient and TestMultiClientLA lines of the bash script.</p>\n"},{"tags":["python","bash","shell","script"],"answer_count":4,"favorite_count":1,"up_vote_count":9,"down_vote_count":0,"view_count":468,"score":9,"question_id":4407843,"title":"sending password to command line tools","body":"<p>i'm writing a python application that uses a command line utility (propietary so it can't be modified) to do part of its work. The problem is that I have to pass the password as a command line argument to the tool which would easily be seen by any user doing 'ps ax'. How can I send the password to the command line tool safely from within python (or a shell script)?</p>\n"},{"tags":["linux","bash","find"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13033832,"title":"Find files with a certain extension that exceeds a certain file size","body":"<p>I'm having trouble with the find command in bash.\nI'm trying to find a file that ends with .c and has a file size bigger than 2000 bytes. I thought it would be:</p>\n\n<pre><code>find $HOME -type f -size +2000c .c$\n</code></pre>\n\n<p>But obviously that isn't correct.</p>\n\n<p>What am I doing wrong? </p>\n"},{"tags":["bash","curl"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3375,"score":0,"question_id":8922061,"title":"Bash - Curl (6) couldn't resolve host issue","body":"<p>I am having a problem with my bash script. It is producing an error of </p>\n\n<p><code>curl (6) couldn't resolve host</code></p>\n\n<p>What have I done wrong?</p>\n\n<p>The following is my bash script.</p>\n\n<pre><code>#!/bin/bash\n\nstring=\"$(mysql -u root -p Company 'select name from HR')\"\nurl=\"http://www.company.com/company/hr/$string\"\n\ncurl -F $url\n</code></pre>\n"},{"tags":["osx","bash","shell","find"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":51,"score":-1,"question_id":13030445,"title":"Bash - Strange behavior when assigning `find` result to variable","body":"<p>I am attempting to do some simple directory mangling via a bash script, but I am encountering some odd behavior (OSX 10.6).</p>\n\n<p>When I issue the following command within the target directory, I get the expected results from the <code>find</code> command when attempting to search for just directories/folders, ie:</p>\n\n<pre><code>find . -iname \"*\" -type d\n\nResults:\ndir1\ndir2\ndir3\n</code></pre>\n\n<p>However, when I attempt to assign the results to a variable and print it, I get some very different behavior:</p>\n\n<pre><code>myvar=$(find . -iname \"*\" -type d)\necho $myvar\n\nResults:\ndir1\ndir2\ndir3\ndir3\ndir3\ndir3\n</code></pre>\n\n<p>Does it make sense that the final entry is repeated multiple times? I am able to remedy this via piping the output to <code>sort -u</code> for now, but I wanted to know the root cause of this issue.</p>\n\n<p>Thank you.</p>\n"},{"tags":["iphone","ios","xcode","bash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13034232,"title":"How do I create a Build Phase script to set CFBundleVersion to SVN Revision number?","body":"<p>I've seen some other questions on here that touch upon creating bash scripts to update version and build numbers in Xcode, but I haven't been able to find one that successfully updates the CFBundleVersion to the SVN revision number each time I do a build.</p>\n\n<p>Does anyone have a script that I might be able to use?</p>\n"},{"tags":["linux","bash","shell","unix","bourne-shell"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13033910,"title":"Why does cd in backticks never work","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/255414/why-doesnt-cd-work-in-a-bash-shell-script\">Why doesn’t “cd” work in a bash shell script?</a>  </p>\n</blockquote>\n\n\n\n<p>Why does cd command in backticks or $(..) never change to the new directory. Any idea how to do it in a single command, that is capture any error and change directory.</p>\n\n<pre><code>[root@linux ~]# pwd\n/root\n[root@linux ~]# cmdMsg=`cd /tmp 2&gt;&amp;1`\n[root@linux ~]# pwd\n/root\n</code></pre>\n"},{"tags":["linux","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13031156,"title":"Bash script: how to add a section to a config file?","body":"<p>I know how to find and replace a section in a config file like this:</p>\n\n<pre><code>sudo sed -i \"s/upload_max_filesize = 2M/upload_max_filesize = 3M/\" /etc/php5/cgi/php.ini\n</code></pre>\n\n<p>But how do I add a whole new section to the end of the config file within the bash script?</p>\n\n<pre><code>server {\n    listen      xx.xx.xx.xx:80;                # your server's public IP address\n    server_name  myapp.com;                   # your domain name\n    root         /usr/share/nginx/www/myapp/;  # absolute path to your WordPress installation    \n}\n</code></pre>\n\n<p>I tried this within the terminal <code>echo \"server { ... }\" &gt;&gt; nginx.conf</code> but I get a </p>\n\n<pre><code>-bash: nginx.conf: Permission denied\n</code></pre>\n\n<p>Not sure if this would be ok within the bash script or I would get a permission denied again...</p>\n\n<p>Many Thanks,</p>\n"},{"tags":["bash","shell","sh"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":52,"score":0,"question_id":13014490,"title":"Creating a shell script which can spawn multiple concurrent processes which call a specified web service","body":"<p>I am trying to create a load testing shell script essentially what I am looking to do is have the script spawn some N number of concurrent processes and have each of those processes call a specified URL and perform a few basic actions. I am having a hard time figuring this out - any help would be awesome!! </p>\n"},{"tags":["bash","script","find"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":27,"score":2,"question_id":13032059,"title":"Bash script to automate multiple subtitle into video mp4 container files","body":"<p>First off - I am no programmer or scripter - just what I've been playing around with for a few days.</p>\n\n<p>I've got a folder containing mp4 video files and srt subtitle files. I've managed manually to re-encode using mencoder and handbrake to hardcode the subtitles into the video files.</p>\n\n<pre><code>mencoder -oac pcm -ovc raw -sub NAMEOFVIDEO.sub -utf8 -o NAMEOFVIDEO_SRT NAMEOFVIDEO.mp4\n</code></pre>\n\n<p>This works well and is what i'm looking for. So what I have is this /working directory with multiple .srt and .mp4 ( there maybe 2 or 3 new video and srt files each day )</p>\n\n<p>I can manage if there is only 1 .srt and 1 .mp4 file BUT I'm trying to figure out how I can create a Bash script that can run the mencoder command if I have 2 or 3 different srt and mp4 files as the mencoder line has to run with the correct corresponding srt file and mp4 file combination.</p>\n\n<p>All I can come up with is something like <code>mp4_file= find \\working -type f -name \"*.mp4\" | head -1</code> which finds the first result .mp4</p>\n\n<p><code>srt_file = find \\working -type f -name \"*.srt\" | head -1</code>which finds the first result .srt ( Luckily it's the same basename file )</p>\n\n<p>then run the variables through the mencoder command, <code>mencoder -oac pcm -ovc raw -sub $srt_file -utf8 -o $mp4_file-SRT $mp4_file</code> but as I expressed if there are more than 1 combinations of files ( a loop maybe ) then I have to stick the output through <code>HandBrakeCLI --preset \"High Profile\" -i $mp4_file-SRT -o $mp4_file</code></p>\n\n<p>It's horrible and I'm missing some easier way to do this?</p>\n"},{"tags":["bash","unix","path","terminal","ubuntu-11.10"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13031982,"title":"Adding to path so that file is available everywhere - bash","body":"<p>I am trying to add several directories to my path so that the files in that directory and it's subdirectories are available for me from the command prompt across sessions.</p>\n\n<pre><code>export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/home/username/OpenFOAM/OpenFOAM-2.1.0/etc/bashrc:/usr/share/texmf-texlive/tex/latex:/etc/crontab:/home/username/Research/Dissertation/wigner/ic/L=lambda:/home/username/Research/Dissertation/wigner/ic/L=2lambda:/home/username/Research/Dissertation/wigner/ic/L=3lambda:/home/username/Research/Dissertation/wigner/ic\n</code></pre>\n\n<p>Appending the follwing</p>\n\n<pre><code> /home/username/Research/Dissertation/wigner/ic/L=lambda:/home/username/Research/Dissertation/wigner/ic/L=2lambda:/home/username/Research/Dissertation/wigner/ic/L=3lambda:/home/username/Research/Dissertation/wigner/ic\n</code></pre>\n\n<p>to the <code>export PATH</code> line of my <code>.bashrc</code> and sourcing it didn't help. What am I doing wrong? When I try to access files from say <code>/home/username/Research/Dissertation/wigner/ic</code>, I can't.</p>\n\n<p>I've read a few posts here but they didn't really help at all. Am I missing colons, semicolons, dollar symbols? </p>\n"},{"tags":["linux","bash","serial-port","cygwin"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":12990702,"title":"Linux serial port listener and interpreter?","body":"<p>I'm using a serial device for a project, and what I'm trying to accomplish PC side, is listening for a command sent by the serial device, interpreting the query, running some code depending on the query, and transmitting back the result.</p>\n\n<p>To be honest I tried out using PHP as the listener, and it works, unfortunately the infinite loop required to make the script act as a receiver, loads the CPU to 25%. So it's not really the best option.</p>\n\n<p>I'm using cygwin right now, I'd like to create a bash script using linux native commands.</p>\n\n<p>I can receive data by using:</p>\n\n<pre><code>cat /dev/ttyS2\n</code></pre>\n\n<p>And send a response with:</p>\n\n<pre><code>echo \"command to send\" &gt; /dev/ttyS2\n</code></pre>\n\n<p>My question is, how do I make an automated listener to be able to receive and send data? The main issue I have, is actually how do I stop the <strong>cat /dev/ttyS2</strong> command once information was received, put it into a variable which then I could compare with a switch, or a series of if else then blocks. Afterwards send back a response and start the cycle all over again?</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":53,"score":0,"question_id":13029654,"title":"extract columns with Bash or awk","body":"<p>I have a folder with 1000 text files. I would like to extract fourth and fifth columns from each file and save it to an another folder with the same filenames. How can I do this with <code>awk</code> or <code>Bash</code>?</p>\n"},{"tags":["linux","bash","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13016961,"title":"Grep Syntax with Capitals","body":"<p>I'm trying to write a script with a file as an argument that greps the text file to find any word that starts with a capital and has 8 letters following it. I'm bad with syntax so I'll show you my code, I'm sure it's an easy fix.</p>\n\n<pre><code>grep -o '[A-Z][^ ]*' $1\n</code></pre>\n\n<p>I'm not sure how to specify that:</p>\n\n<p>a) it starts with a capital letter, and </p>\n\n<p>b)that it's a 9 letter word. </p>\n\n<p>Cheers</p>\n\n<p>EDIT:</p>\n\n<p>As an edit I'd like to add my new code:</p>\n\n<pre><code>while read p\ndo\necho $p | grep -Eo '^[A-Z][[:alpha:]]{8}'\ndone &lt; $1\n</code></pre>\n\n<p>I still can't get it to work, any help on my new code? </p>\n"},{"tags":["bash","shell","maven-2","ubuntu","autocomplete"],"answer_count":4,"favorite_count":4,"up_vote_count":8,"down_vote_count":0,"view_count":858,"score":8,"question_id":2805412,"title":"Bash completion for Maven escapes colon","body":"<p>I added bash completion for Maven following the docs:</p>\n\n<p><a href=\"http://maven.apache.org/guides/mini/guide-bash-m2-completion.html\">http://maven.apache.org/guides/mini/guide-bash-m2-completion.html</a></p>\n\n<p>Everything works well except for goals that use a colon. For instance, instead of</p>\n\n<pre><code>mvn eclipse:eclipse\n</code></pre>\n\n<p>completion escapes the colon</p>\n\n<pre><code>mvn eclipse\\:eclipse\n</code></pre>\n\n<p>Any suggestions how this can be fixed? I'm using Ubuntu 8.10 (2.6.27-17-generic) and</p>\n\n<blockquote>\n  <p>$ bash -version<br>\n  GNU bash, version 3.2.39(1)-release (i486-pc-linux-gnu)</p>\n</blockquote>\n"},{"tags":["bash","autocomplete"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13028438,"title":"extending Bash tab completion: how to handle paths / partial commands?","body":"<p>I've added tab completion for my program to bash. It works quite well, but I don't know how to handle partial completion of words.\nExample: the user types</p>\n\n<pre><code>./program /home/user/De\n</code></pre>\n\n<p>and presses TAB. This is then completed to</p>\n\n<pre><code>./program /home/user/Desktop/ \n</code></pre>\n\n<p>, but there's now a trailing whitespace after 'Desktop/', which is not what I want. Basically, I need a way of preventing bash from adding whitespace after the completed word.</p>\n\n<p>I don't want to use bash's completion for paths.</p>\n\n<p><strong>Edit:</strong> This seems to be unclear. When TAB is pressed, my tab-completion function finds out which word to complete (in this case, that's '/home/user/De'). It then generates a list of matches (in this case, the only match is '/home/user/Desktop'). Bash uses this list to do the actual completion: It changes '/home/user/De' to '/home/user/Desktop/ '. I want to prevent bash from adding that whitespace after 'Desktop/'.</p>\n"},{"tags":["bash","while-loop","condition"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13028343,"title":"BASH: while with -le doesn't work","body":"<p>If i'm using -le with while i'm getting the following error:</p>\n\n<pre><code>line 172: [: : integer expression expected\n</code></pre>\n\n<p>what i'm doing wrong here?</p>\n\n<p>my code:</p>\n\n<pre><code>while [ \"$LOOP_EPISODE\" -le \"100\" ]; do\n\n        my code\n        LOOP_EPISODE=$((LOOP_EPISODE+1))\ndone\n</code></pre>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":13015206,"title":"verify the name and the IP address","body":"<p>I am trying to create a small shell script. At the begining of my script, I ask the name of the user and their IP address. \nI need to retrieve the name that is read, and the ip address. For example, if the name is entered in this way: \"Albert Smith\", I need to register one \"_\" between each space (\"Albert_Smith\").</p>\n\n<p>For the ip address, I need to know if the ip address is consistent with the format.\nIf the format is not good, I must report the error and prompt the user to enter a good ip address to continue the operation.</p>\n\n<p>I know that i need to use \"read\", but i don't know to realize my short script (replace and verify).\nThank in advance :)</p>\n"},{"tags":["bash","shell","sh","system-administration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":23,"score":-1,"question_id":13028044,"title":"How to do exception handling in shell script?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/64786/error-handling-in-bash\">Error handling in BASH</a>  </p>\n</blockquote>\n\n\n\n<p>I have one deployement script and i want to do exception handling in ubuntu shell script i.e. bash scripts. Is there any solution for this ?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13027930,"title":"can a script change the cwd of the bash in which the script is running?","body":"<p>Here is the scenario, I open up a terminal, and the <code>bash</code>'s <code>cwd</code> is `/home/me', like this:</p>\n\n<pre><code>[/home/me $] ls\na.sh\n</code></pre>\n\n<p>Now I <code>a.sh</code> in the cwd like this:</p>\n\n<pre><code>[/home/me $] ./a.sh\n</code></pre>\n\n<p>What I want is that, I want to change the <code>bash</code>'s <code>cwd</code> by running <code>a.sh</code>, which means after <code>a.sh</code> finishes, the <code>bash</code>'s <code>cwd</code> won't be <code>/home/me</code>,</p>\n\n<pre><code>[/home/other_dir $]\n</code></pre>\n\n<p>Can I do that? If yes, how?</p>\n"},{"tags":["linux","bash","unix","scripting"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13007672,"title":"Conditionally add or append to a file in linux script","body":"<p>I need to modify a file via a script.<br>\nI need to do the following:<br>\nIF a specific string does NOT exist then append it.  </p>\n\n<p>So I created the following script:  </p>\n\n<pre><code>#!/bin/bash  \nif grep -q \"SomeParameter A\" \"./theFile\"; then  \necho exist  \nelse  \n   echo doesNOTexist  \n   echo \"# Adding parameter\" &gt;&gt; ./theFile    \n   echo \"SomeParameter A\" &gt;&gt; ./theFile    \nfi\n</code></pre>\n\n<p>This works but I need to make some improvements.<br>\nI think it would be better if I checked if \"SomeParameter\" exists and then see if it is followed by \"A\" or \"B\". If it is \"B\" then make it \"A\".<br>\nOtherwise append the string (like I do) BUT BEFORE the start of the last block of comments.<br>\nHow could I do this?<br>\nI am not good in scripting.<br>\nThanks!</p>\n"},{"tags":["linux","bash","shell","fedora"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":4783,"score":2,"question_id":4785068,"title":"BASH expr command + not working","body":"<p>Not sure why this <code>expr</code> command is extremely picky - here's my code:</p>\n\n<pre><code>#! /bin/bash\n\nCOUNTER=0\nwhile [ $COUNTER -lt 5 ]\ndo\n    echo \"i will add this line to file mycreation\"&gt;&gt;./myfile\n    COUNTER = `expr $COUNTER + 1`\ndone\n</code></pre>\n\n<p>I tried replacing <code>COUNTER</code> with <code>$COUNTER</code> such that</p>\n\n<pre><code>$COUNTER = `expr $COUNTER + 1`  \n</code></pre>\n\n<p>I'm also using backticks. The error I get (with <code>$COUNTER</code> on the left hand side) is: </p>\n\n<pre><code>line7: 0: command not found. \n</code></pre>\n"},{"tags":["bash","shell","pipe"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13026099,"title":"Shell programming, pipe outputfil","body":"<p>a newbie to shell programming here.</p>\n\n<p>I have this codes so far:</p>\n\n<pre><code>prog inputfile outputfile1\n\nsort -rn outputfile1 | cut -f1-2 &gt; outputfile2\n</code></pre>\n\n<p>My question is there a way to pipe the outputfile directly from the first command to the second to get outputfile2, i.e. skipping the need to create an outputfile1? prog is a custom program that takes inputfile and outpufile names as parameters.</p>\n\n<p>The closest thing I have found is substitution in shell, e.g.</p>\n\n<pre><code>sort &lt;(ls dir)\n</code></pre>\n\n<p>But it's not really helpful in this case as I want to pipe the outputfile only and not the stdout. \nThanks for your help!</p>\n"},{"tags":["bash","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13024828,"title":"IF grep finds what it is looking fore do X else Y","body":"<p>In this statement I am trying to match if a version ($var2) exist in the path /app/$var1 (application name)</p>\n\n<pre><code>if \nfind /app/$var1 -maxdepth 1 -type l -o -type d | grep $var2 #results in a nice list where i can manually get a true match.\n# if match is found then execute command.\n$realcmd \"$@\"\n    rc=$?\n    exit $rc\nelse\necho \"no match, the version you are looking for does not exist\"\nfi\n</code></pre>\n\n<p>current code:\nthis include all my code (not cleaned).\ncommand I run: \"./xmodule load firefox/3.6.12\" \nthis version does exit</p>\n\n<pre><code>    #!/bin/bash\n# hook for some commands\n\n#echo $@  #value of sting that is entered after \"xmodule\"\n\ncmd=$(basename \"$0\")\n#echo \"called as $cmd\"\n\nif [[ $cmd = \"xmodule\" ]]\nthen\n    realcmd='/app/modules/0/bin/modulecmd tcsh'\n\n    # verify parameters\nfi\n# check if $@ contains value \"/\" to determine if a specific version is requested.\ncase \"$@\" in\n*/*)\n    echo \"has slash\"\nvar1=$(echo \"$@\" | grep -Eio '\\s\\w*') # Gets the aplication name and put it into var1\necho $var1   # is not printed should be \"firefox\"\nvar2=$(echo \"$@\" | grep -o '[^/]*$')  # Gets version name and put it into var2 \necho $var2 \n# Checking if version number exist in /app/appname/\nif find /app/$var1 -noleaf -maxdepth 1 -type l -o -type d | grep $var2; then\n    $realcmd \"$@\"\n    exit $?\nelse\n    echo \"no match, the version you are looking for does not exist\"\n    # Should there be an exit here?\nfi\n    ;;\n\n*)\n    echo \"doesn't have a slash\"\n    ;;\nesac\n</code></pre>\n\n<p>output:\nmycomputer [9:55am] [user/Desktop/script] -> ./xmodule load firefox/3.6.12\n'has slash</p>\n\n<p>3.6.12\nno match, the version you are looking for does not exist</p>\n\n<p>Where there is a blank (above 3.6.1) there should be the application name. I am now realizing that this must be my problem sins the path that it uses i likely just /app.\nBut I do not think I changed anything in that part of the code.</p>\n"},{"tags":["bash","sorting","awk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13016073,"title":"put awk code in bash and sort the result","body":"<p>I have a awk code for combining 2 files and add the result to the end of file.txt using \">>\"</p>\n\n<p>my code </p>\n\n<pre><code>NR==FNR &amp;&amp; $2!=0 {two[$0]++;j=1; next }{for(i in two) {split(i,one,FS); if(one[3] == $NF){x=$4;sub( /[[:digit:]]/, \"A\", $4); print j++,$1,$2,$3,x,$4 | \"column -t\" \"&gt;&gt;\" \"./Desktop/file.txt\"}}}\n</code></pre>\n\n<p>i want put my awk to bash script and finaly sort my file.txt and save sorted result to file.txt again using <code>&gt;</code></p>\n\n<p>i tried this  </p>\n\n<pre><code>#!/bin/bash\ncommand=$(awk '{NR==FNR &amp;&amp; $2!=0 {two[$0]++;j=1; next }{for(i in two) {split(i,one,FS); if(one[3] == $NF){x=$4;sub( /[[:digit:]]/, \"A\", $4); print $1,$2,$3,$4 | \"column -t\" \"&gt;&gt;\" \"./Desktop/file.txt\"}}}}')\necho -e \"$command\" | column -t | sort -s -n -k4 &gt; ./Desktop/file.txt \n</code></pre>\n\n<p>but it gives me error <code>\"for reading (no such a file or directory)\"</code></p>\n\n<p>where is my mistake?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["linux","bash","cron","upstart"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":39,"score":3,"question_id":13024864,"title":"Cannot make a cronjob get the status of a service","body":"<p>I'm using Upstart to run a couple of services when the systems reboots. Those services should always be running. I have noticed that some of then crashed eventually, so I'm trying (without success) to create a watchdog script. </p>\n\n<p>This script will check the status of the service. If the service is down, then it should start the service and send me an email about the issue. The email script is in php and is okay. </p>\n\n<p>The problem with the watchdog bash script is that I'm just able to execute the script and read the status of the service if I launch the script manually.When using a cronjob for executing the script I get an \"empty status\" output.</p>\n\n<p>I'll show you the script:</p>\n\n<pre><code>#!/bin/bash\n# Check the service\nstatus=$(status SERVICE | awk '{print $2}')\necho \"Status of the SERVICE: $status\"\n</code></pre>\n\n<p>When I execute it manually I get:</p>\n\n<pre><code>Status of the SERVICE: stop/waiting\n</code></pre>\n\n<p>And If execute it with a cronjob I get:</p>\n\n<pre><code>Status of the SERVICE:\n</code></pre>\n\n<p>As you see I'm not getting any output when executing the script with a cronjob. In short, the cronjob is running but without providing me with the status of the service.</p>\n\n<p>Hope your X-vision can see the error that I'm not able.</p>\n\n<p>BR,</p>\n\n<p>albertof</p>\n"},{"tags":["perl","bash","optimization","big-o","code-duplication"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13022416,"title":"Optimize Duplicate Detection","body":"<h1>Background</h1>\n\n<p>This is an optimization problem. Oracle Forms XML files have elements such as:</p>\n\n<pre><code>&lt;Trigger TriggerName=\"name\" TriggerText=\"SELECT * FROM DUAL\" ... /&gt;\n</code></pre>\n\n<p>Where the <code>TriggerText</code> is arbitrary SQL code. Each SQL statement has been extracted into uniquely named files such as:</p>\n\n<pre><code>sql/module=DIAL_ACCESS+trigger=KEY-LISTVAL+filename=d_access.fmb.sql     \nsql/module=REP_PAT_SEEN+trigger=KEY-LISTVAL+filename=rep_pat_seen.fmb.sql \n</code></pre>\n\n<p>I wrote a script to generate a list of exact duplicates using a brute force approach.</p>\n\n<h1>Problem</h1>\n\n<p>There are 37,497 files to compare against each other; it takes 8 minutes to compare one file against all the others. Logically, if <code>A = B</code> and <code>A = C</code>, then there is no need to check if <code>B = C</code>. So the problem is: how do you eliminate the redundant comparisons?</p>\n\n<p>The script will complete in approximately 208 days.</p>\n\n<h1>Script Source Code</h1>\n\n<p>The comparison script is as follows:</p>\n\n<pre><code>#!/bin/bash\n\necho Loading directory ...\n\nfor i in $(find sql/ -type f -name \\*.sql); do\n        echo Comparing $i ...\n\n        for j in $(find sql/ -type f -name \\*.sql); do\n                if [ \"$i\" = \"$j\" ]; then\n                        continue;\n                fi\n\n                # Case insensitive compare, ignore spaces\n                diff -IEbwBaq $i $j &gt; /dev/null\n\n                # 0 = no difference (i.e., duplicate code)\n                if [ $? = 0 ]; then\n                        echo $i :: $j &gt;&gt; clones.txt\n                fi\n        done\ndone\n</code></pre>\n\n<h1>Question</h1>\n\n<p>How would you optimize the script so that checking for cloned code is a few orders of magnitude faster?</p>\n\n<h2>Idea #1</h2>\n\n<p>Remove the matching files into another directory so that they don't need to be examined twice.</p>\n\n<h1>System Constraints</h1>\n\n<p>Using a quad-core CPU with an SSD; trying to avoid using cloud services if possible. The system is a Windows-based machine with Cygwin installed -- algorithms or solutions in other languages are welcome.</p>\n\n<p>Thank you!</p>\n"},{"tags":["windows","bash","cygwin"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1197,"score":4,"question_id":10385424,"title":"Good alternatives to Cygwin? - Cygwin doesn't support natively support Win32 apps","body":"<p>After having spent the time to make some bash scripts that happen to be of significant size, newer versions of Cygwin have broken them.  These scripts call into native Win32 applications that don't link with Cygwin, which is apparently not officially supported by Cygwin.</p>\n\n<p>This has come as a surprise to me, as for years I was under the impression that Cygwin could be used in a more mixed environment that combines both native non-Cygwin Win32 apps, and POSIX programs using the Cygwin compatibility layer.  But apparently only the POSIX compatibility layer is really supported, and if native Win32 non-Cygwin apps work then it is considered a happy coincidence.</p>\n\n<p>I found this out from an incompatibility I ran into with running programs compiled against the .NET Framework from within Cygwin.  This used to work fine, but was broken a few months ago.  Specifically, standard output from a .NET program that is piped to any other Win32 program's standard input will generally cause the receiving Win32 program to get a premature end-of-file signal because Cygwin recently switched to message pipes from byte pipes a few months ago - and message pipes appear to be incompatible with any receiving app using Visual C++ or .NET Framework.  This is because .NET issues a null write to the standard output, which is only passed on to the receiving app if a message pipe is used.  The receiving app successfully reads zero bytes, so thinks it is end-of-file.  The project lead doesn't appear to consider this to be a real problem, since they apparently don't really support running non-Cygwin programs from within Cygwin (surprise!).</p>\n\n<p>To quote the project lead Christopher Faylor from multiple e-mails on the mailing list:</p>\n\n<blockquote>\n  <p>What you are seeing may be because Cygwin was changed to use\n  message-type pipes a couple of revisions ago.  This is not going to\n  change.  The change was adopted to fix a problem with Cygwin programs\n  and those are obviously our #1 priority.</p>\n  \n  <p>Regardless of how many people use Visual C++ or .NET they are really\n  not our target audience.  It's nice when things work for people who\n  don't want to use UNIX tools but they are not our primary focus. \n  Fixing problems for people who want to use non-Cygwin stuff is not\n  something that I find a high priority.</p>\n  \n  <p>From pipe.cc: Note that the write side of the pipe is opened as PIPE_TYPE_MESSAGE. \n  This <em>seems</em> to more closely mimic Linux pipe behavior and is \n  definitely required for pty handling since fhandler_pty_master writes\n  to the pipe in chunks, terminated by newline when CANON mode  is\n  specified.  </p>\n  \n  <p>The above comment shows an \"and\" relationship here.  Message type\n  pipes more closely mimic Linux (UNIX) pipe behavior AND are definitely\n  required for ptys.</p>\n  \n  <blockquote>\n    <p>I agree with James that the runtimes are probably buggy BUT I also \n    agree that cygwin should be able to have a handle these scenarios.</p>\n  </blockquote>\n  \n  <p>Your complete agreement with each other is not going to have much\n  effect.  Cygwin source code is not changed by voting.</p>\n</blockquote>\n\n<p>Even if this one issue is ultimately fixed somehow - who knows - they might break something else in 3 months and not care to fix the regression.  They might consider a patch, but it would take me quite awhile to figure out something that works.  I think my time is better spent elsewhere, because it's clear that they are quite willing to break compatibility with native Win32 apps and don't want to waste more time on getting Win32 apps to work.  So I guess Cygwin shouldn't be considered a stable platform for mixed Win32/Cygwin environments - what are my alternatives?  Where should I start that would avoid a complete rewrite into something other than bash?  I don't use more than the base Cygwin installation + some basic perl scripts.</p>\n"},{"tags":["regex","bash","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":13021150,"title":"sed: mix explicit and regex phrases","body":"<p>I'm trying to write a sed command to remove a specific string followed by two digits. So far I have:</p>\n\n<pre><code>sed -e 's/bizzbuzz\\([0-9][0-9]\\)//' file.txt\n</code></pre>\n\n<p>but I cant seem to get the syntax right. Any suggestions?</p>\n"},{"tags":["linux","bash","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13022349,"title":"Grep .html Syntax","body":"<p>I'm very new to bash so I apologize if this is a dumb question.</p>\n\n<p>I'm trying to write a script that takes a file and tests to see if it ends in html. Here is my code:</p>\n\n<pre><code>echo tester.html | grep -E '[^ ]*[.html]'\n</code></pre>\n\n<p>Yet it echos every input I give it, how do I fix it? </p>\n"},{"tags":["python","perl","bash","scripting","sed"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":265,"score":2,"question_id":6259521,"title":"Best script to modify file contents on server","body":"<p><strong>Problem:</strong><br />\nI have web server that was recently compromised. They targeted javascript files. They inserted the following snippet</p>\n\n<pre><code>document.write('&lt;iframe src=\"http://lcbmc.co.uk/showthread.php?t=31540750\" width=\"1\" height=\"1\" frameborder=\"0\"&gt;&lt;/iframe&gt;') \n</code></pre>\n\n<p>this was added to the top of every single .js file on the server.</p>\n\n<p><strong>Solution:</strong><br />\nWrite a script to open every javascript file on my server that checks for malicious code, removes malicious code, and finally saves the file.</p>\n\n<p><strong>Question:</strong><br />\nWhat programming language should the script be written in? Will python work? I'm running python 2.4.3 on my server. If I run a python script under root will I have to worry about accidentally changing the owner permissions of the modified files?</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","awk"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":88,"score":3,"question_id":13021130,"title":"reset row number count in awk","body":"<p>I have a file like this  </p>\n\n<h2> file.txt</h2>\n\n<pre><code>0   1   a\n1   1   b\n2   1   d\n3   1   d\n4   2   g\n5   2   a\n6   3   b\n7   3   d\n8   4   d\n9   5   g\n10   5   g\n.\n.\n.\n</code></pre>\n\n<p>I want reset row number count to 0 in first column <code>$1</code> whenever value of field in second column <code>$2</code> changes, using awk or bash script.</p>\n\n<h2>result</h2>\n\n<pre><code>0   1   a\n1   1   b\n2   1   d\n3   1   d\n0   2   g\n1   2   a\n0   3   b\n1   3   d\n0   4   d\n0   5   g\n1   5   g\n.\n.\n. \n</code></pre>\n"},{"tags":["linux","bash","escaping"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":1134,"score":0,"question_id":5608112,"title":"Escape FileNames Using The Same Way Bash Do It","body":"<p>When I use the \"tab\" key in <code>bash</code> (when you have started to type the filename and you want it to complete), <code>bash</code> escapes the filename correctly, and if I use exactly that \"escaped\" filename, it works.</p>\n\n<p>For Instance:</p>\n\n<p><code>An-Beat - Mentally Insine (Original Mix).mp3</code> => After <code>bash</code> Escapes It Using \"TAB\" \n<code>An-Beat\\ -\\ Mentally\\ Insine\\ \\(Original\\ Mix\\).mp3</code></p>\n\n<p>I'm search for a function for <code>bash</code> that will escape a filename the same way \"tab\" escapes filenames.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":44,"score":4,"question_id":13020720,"title":"creating directory from filename and move bash","body":"<p>I have a load of files </p>\n\n<pre><code>BR0200.aaa.tsv\nBR0200.bbb.tsv\nBR0200.ccc.tsv\nBR0210.aaa.tsv\nBR0210.bbb.tsv\nBR0210.ccc.tsv\nW0210.aaa.tsv\nW0210.aaa.tsv\nW0210.aaa.tsv\n</code></pre>\n\n<p>I would like to create a series of directories based on the first part of the filename up to the first '.'</p>\n\n<pre><code>BR0200\nBR210\nW0210\n</code></pre>\n\n<p>and then move the associated files to the correct directories (i.e. all BR0200.* files to BR0200 directory).</p>\n\n<p>I have had a stab at a bash script but I keep getting errors. Any advice would be gratefully received.</p>\n\n<pre><code>#!/bin/bash\n\nfor file in BR* W0*; do\ndir = \"${file%%.*}\"\nif [-e $dir];then\nmv \"$file\" \"$dir\"\nelse\nmkdir -p \"$dir\"\nmv \"$file\" \"$dir\"\nfi\ndone\n</code></pre>\n\n<p>Sorry if this is a basic question. I have tried searching the web, but with no result.</p>\n"},{"tags":["bash","shell","scripting","cut","tr"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13020615,"title":"Take input via user in order to execute a last and cut command","body":"<p>I want to prompt a user to cut from a 'last' command along with what columns to cut. I also want to use 'tr' to fix all the difference in white spaces. This is the code I have:</p>\n\n<pre><code>echo -n \"What rows and columns would you like to cut: \"\nread num_int\nread num_row\nread num_list\nlast $num_int\ncut -f $num_row\ntr -d $num_list\n</code></pre>\n\n<p>When I run it from the command line I get the prompt, so I hit enter then put in a number to cut. I then hit enter again and I get a list of info that prints to screen but doesn't break out of the executed script. Is there a better way to set this script up? Here's some sample data of what it echo's out to the screen:</p>\n\n<pre><code>slater   pts/2        78.189.121.247   Sat Sep  1 23:21 - 23:27  (00:05)    \nslater   pts/3        77.189.121.247   Sat Sep  1 23:09 - 23:21  (00:12)    \nslater   pts/2        76.189.121.247   Sat Sep  1 22:59 - 23:09  (00:10)    \nslater   pts/2        74.189.121.247   Sat Sep  1 22:51 - 22:56  (00:05)    \npint     pts/2        74.189.121.247   Sat Sep  1 22:49 - 22:51  (00:01)    \nterry    pts/2        74-119-247-134.r Sat Sep  1 19:08 - 19:09  (00:00)    \n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13014504,"title":"adding a row id to multiple files with a continuous count in bash","body":"<p>Say I have files A.tsv, B.tsv, and C.tsv.</p>\n\n<p>Doing <code>cat -n A.tsv &gt; A-id.tsv</code> is the output that I want for one file. How do you make a simple bash command to process all 3 files such that the row ID is continuous from the previous file and such that I can get 3 separate files, A-id.tsv, B-id.tsv, and C-id.tsv?</p>\n\n<p>For example, if A.tsv has 3 lines, then B.tsv would start with 4 in an output format similar to <code>cat -n B.tsv</code>.</p>\n"},{"tags":["linux","bash","usb-mass-storage","usbdevice"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2134,"score":2,"question_id":3881449,"title":"Find which drive corresponds to which USB mass storage device in Linux","body":"<p>I have several USB mass storage flash drives connected to a Ubuntu Linux computer (Ubuntu 10.04.1, kernel 2.6.32-25-386), and I need to tell them apart programatically (from bash if possible, but I'm not afraid of compiling either) - I need to find which block device corresponds to which <em>physical</em> device (e.g. <code>/dev/sdb1</code> -> device in USB port 1; in my case, one device ~ one volume). </p>\n\n<p>In other words, I know that I have three hardware devices plugged into USB ports; each of them shows up in the system as a USB mass storage device (as seen with lsusb), is created as a block device (<code>/dev/sdb1</code>) and automounted by UUID (<code>/media/1234-5678</code>).</p>\n\n<pre><code>USB device               block device    mountpoint\nUSB device in port 2.2 &lt;-&gt; /dev/sdb1   &lt;-&gt; /media/1234-5678\n</code></pre>\n\n<p>I'm <em>not</em> trying to find the relationship between block device and mountpoint; <strong>I'm trying to find the relationship between block device and USB device, is there a way?</strong></p>\n\n<p>Why? There will be some writes on the disks, with unpredictable time of completion. I need to give the operator some indication like \"you can now remove the disk in port 2 (which is second from the left)\". I have found which physical port corresponds to which port number on that specific machine, and finding block devices from mountpoints is simple; now I'm stuck mapping the logical USB ports to block devices.</p>\n\n<p>I can see the disks with lsusb :</p>\n\n<pre><code>Bus 001 Device 058: ID 067b:2517 Prolific Technology, Inc. Mass Storage Device\nBus 001 Device 060: ID 067b:2517 Prolific Technology, Inc. Mass Storage Device\nBus 001 Device 061: ID 067b:2517 Prolific Technology, Inc. Mass Storage Device\n</code></pre>\n\n<p>and I can see them mounted (by their UUID):</p>\n\n<pre><code>/dev/sdb1 on /media/BC88-15C4 type vfat\n/dev/sdc1 on /media/AE54-65AA type vfat\n/dev/sdd1 on /media/58D2-FED1 type vfat\n</code></pre>\n\n<p>Now, all the drives are the same model from the same manufacturer, so I can't distinguish them by that, and I can't guarantee they'll be plugged in a particular order.</p>\n\n<p>I have found <code>/sys/bus/usb/devices</code> (a list of USB devices), but it seems to be the same data that I get from lsusb - I don't see a mapping to disks there.</p>\n\n<p>There's also <code>/sys/block/sdb</code> and <code>/sys/block/sdb/sdb1</code> (the block device and its first partition; similarly for <code>sdc</code> and <code>sdd</code>), but again, I see no mapping to devices.</p>\n"},{"tags":["osx","bash","path","environment-variables","command-path"],"answer_count":17,"favorite_count":185,"up_vote_count":205,"down_vote_count":0,"view_count":146268,"score":205,"question_id":135688,"title":"Setting environment variables in OS X?","body":"<p>What is the proper way to modify environment variables like PATH in OS X? I've looked on google a little bit and found 3 different files to edit: </p>\n\n<ul>\n<li>/etc/paths</li>\n<li>~/.profile</li>\n<li>~/.tcshrc</li>\n</ul>\n\n<p>I don't even have some of these, and I'm pretty sure that .tcshrc is wrong, since osx uses bash now. Anybody have any idea where these variables, especially PATH, are defined?</p>\n\n<p>Edit: I'm running OS X 10.5</p>\n"},{"tags":["bash","prompt"],"answer_count":7,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":962,"score":4,"question_id":278398,"title":"Going backwards in a bash prompt","body":"<p>I'd like to have a blank line after my bash prompt and before the output on my Mac. It should look like this would:</p>\n\n<pre><code>echo; ls\n</code></pre>\n\n<p>Can I add a newline to my bash prompt and then go back up one line to wait for user input? Is there something obvious I'm missing?</p>\n"},{"tags":["python","bash","python-3.x","pipe"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":46,"score":3,"question_id":13011652,"title":"Creating a pipe from the inside of the python interpreter","body":"<p>sometimes i just want to quickly redirect a large output to an external program, supposing that in Python 3.x i have</p>\n\n<pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; sys.modules.keys()\n</code></pre>\n\n<p>how i can redirect the output of</p>\n\n<pre><code>&gt;&gt;&gt; sys.modules.keys()\n</code></pre>\n\n<p>to a specific command or application ?</p>\n"},{"tags":["linux","bash","grep"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13018294,"title":"Loops with grep script","body":"<p>I'm asking this as a new question because people didn't seem to understand my original question.</p>\n\n<p>I can figure out how to find if a word starts with a capital and is followed by 9 letters with the code:</p>\n\n<pre><code>echo \"word\" | grep -Eo '^[A-Z][[:alpha:]]{8}'\n</code></pre>\n\n<p>So that's part 1 of what I'm supposed to do. My actual script is supposed to loop through each word in a text file that is given as the first and only argument, then check if any of those words start with a capital and are 9 letters long.</p>\n\n<p>I've tried:</p>\n\n<pre><code>cat textfile | grep -Eo '^[A-Z][[:alpha:]]{8}'\n</code></pre>\n\n<p>and</p>\n\n<pre><code>while read p\ndo echo $p | grep -Eo '^[A-Z][[:alpha:]]{8}' \ndone &lt; $1\n</code></pre>\n\n<p>to no avail.</p>\n\n<p>Although:</p>\n\n<pre><code>cat randomtext.txt \n</code></pre>\n\n<p>outputs: </p>\n\n<pre><code>The loud Brown Cow jumped over the White Moon. November October tesTer Abcdefgh Abcdefgha\n</code></pre>\n\n<p>so it's correctly outputting all the words in the file randomtext.txt</p>\n\n<p>then why wouldn't</p>\n\n<pre><code>cat randomtext.txt | grep -Eo '^[A-Z][[:alpha:]]{8}'\n</code></pre>\n\n<p>work?</p>\n"},{"tags":["php","osx","bash","applescript","osascript"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13017514,"title":"PHP not properly executing bash script","body":"<p>I am creating a simple web page that will allow the user to select an option on a basic php page, click submit, and then the backend PHP should execute a bash script, that will execute some AppleScript. </p>\n\n<p>I can run the bash script from Terminal and it runs the Applescript file fine using <code>osascript</code> but when I try executing the bash script from php, it will run echo commands, but will not execute the <code>osascript</code> line. I imagine this is a permissions issue, but I changed everything to full privilege using <code>chmod 777</code> (admittedly not the best idea, but that is besides the point)</p>\n\n<p>Is there something I am missing? It is weird that it seems to skip completely over the <code>osascript</code> line. Any suggestions? Thanks in advance!</p>\n\n<p><strong>CODE:</strong></p>\n\n<p><strong>PHP</strong></p>\n\n<pre><code>&lt;?php\nif (isset($_POST['submit'])) {\n    $username =  $_POST['username'];\n    if (strcasecmp($username, 'user1') == 0) {\n        echo 'test1';\n    } else if (strcasecmp($username, 'user2') == 0) {\n        echo 'test2';\n    } else if (strcasecmp($username, 'user3') == 0) {\n        echo 'test3';\n    } else if (strcasecmp($username, 'user4') == 0) {\n        shell_exec('cd ~/Sites;./a.out');\n    }\n}\n?&gt;\n</code></pre>\n\n<p><strong>BASH</strong></p>\n\n<pre><code>#!/bin/bash\necho \"test String\"\ncd /Users/Zimmerman/Library/Scripts\nosascript /Users/Zimmerman/Library/Scripts/testscript.scpt\necho \"test String\"\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13016455,"title":"Is it possible to output this integer as float of the following form using printf?","body":"<p>In a script, I store the accumulated time in ms from executing several commands in a variable, lets call it <code>total_elapsed_Time</code>. This contains e.g. values like</p>\n\n<pre><code>1001\n</code></pre>\n\n<p>or </p>\n\n<pre><code>12\n</code></pre>\n\n<p>Now, what I want is to output this value in the following form (the time in s with training milliseconds)</p>\n\n<pre><code>1.001\n</code></pre>\n\n<p>for the first value,</p>\n\n<pre><code>0.012\n</code></pre>\n\n<p>for the second value. At the moment, I do it like this</p>\n\n<pre><code>printf '%d.%03d s' \"$((total_elapsed_time / 1000))\" \"$((total_elapsed_time % 1000))\"\n</code></pre>\n\n<p>This is okay, and seems to work but I wonder if there is no easier way (so that I only needs to pass the variable to printf and printf takes care of formatting the number).</p>\n"},{"tags":["bash","shell","script","esql"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":30,"score":3,"question_id":13016160,"title":"How can i write a shell script program where i can go through all my esql files and then execute that file to create exe files","body":"<p>This is what I mean:</p>\n\n<pre><code>ls -l *.ec\n</code></pre>\n\n<p>For each result found, I would like to compile it one at a time.</p>\n\n<p>e.g., for $something.ec:</p>\n\n<pre><code>esql $something.ec -o $something\n</code></pre>\n\n<p>$something.ec is original file</p>\n\n<p>$something is target exe file.</p>\n\n<p>My question is: how can I put that into a loop to go through all the files in my directory?</p>\n\n<p>Thank you.</p>\n"},{"tags":["bash","shell","tail","head"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13015935,"title":"User input choice with either head or tail command","body":"<p>I want to prompt a user via command line &amp; ask what specific rows need to be cut from a data file using either head or tail. My script will employ head and tail using the inputs as variables for both head and tail commands. This is what I have thus far along with the error message: </p>\n\n<pre><code>echo -n \"What rows need to be cut from your data file: \"\nread before\nread after\nhead -n $before /home/rent_list\ntail -n $after /home/rent_list \n</code></pre>\n\n<p>Error message:</p>\n\n<pre><code>-bash: ./rent_list: bin/bash: bad interpreter: No such file or directory\n</code></pre>\n\n<p><strong>Update:</strong> This is what I am getting now:</p>\n\n<pre><code> What rows need to be cut from your data file: 4\n\nMack Tools  Milwaukee Wisconsin mj414@yahoo.com 414 2248893\nTerry Tools Orlando Florida 407@yahoo.com 407 2439812\nPark Tools  Riviera Beach Florida tp123@hotmail.com 516 5370923\nBike Tools  Orlando Florida baptiste41@gmail.com 407 3420983\ntail: /home/renter_list: invalid number of lines\n</code></pre>\n"},{"tags":["bash","shell","sed","awk","sh"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12975834,"title":"Trimming pathnames beyond a keyword (awk, sed, ?)","body":"<p>I want to trim a pathname beyond a certain point after finding a keyword.  I'm drawing a blank this morning.</p>\n\n<p>/home/quikq/1.0/dev/Java/tsupdater/src/tsupdater.java</p>\n\n<p>I want to find the keyword Java, save the pathname beyond that (tsupdater), then cut everything off after the \"Java\" portion.</p>\n"},{"tags":["php","linux","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13014842,"title":"long running php script hangs","body":"<p>I have this set in my php script to make it supposedly run as long as it needs to to parse and do mysql queries and fetch images for over 100,000 rows.</p>\n\n<pre><code>ignore_user_abort(true);\nset_time_limit(0);\n#begin logging output\nerror_reporting(E_ALL);\nini_set('memory_limit', '512M');\n</code></pre>\n\n<p>I run the command like this in shell:</p>\n\n<pre><code>nohup php myscript.php &gt; output.txt\n</code></pre>\n\n<p>after running about 8 to 10 hours this script will still be running but execution just stops... no more output..  it's not a zombie process I checked top.  It hasn't met the memory limit either and if it did wouldn't it exit?</p>\n\n<p>What is going on?  It's a real pain to babysit this script and write custom code to nudge it along.  What is going on?  I read up on unix maybe cleaning up zombies but it's not a zombie.  I know it's not php settings.. and it's not running through a webserver it's from command line only so what gives.</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":13010420,"title":"Bash ignore error and get return code","body":"<p>I am using <code>set -e</code> to abort on errors. </p>\n\n<p>But for particular one function I want to ignore error and on error I want return code of the function. </p>\n\n<p>Example:</p>\n\n<pre><code>do_work || true \n if [ $? -ne 0 ] \n  then\n   echo \"Error\"\n  fi  \n</code></pre>\n\n<p>But it is not work return code is always true due || true </p>\n\n<p>How to get return code on do_work on error ?</p>\n"},{"tags":["bash","shell"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":95,"score":2,"question_id":13003217,"title":"Find the last Saturday of the month in a bash script","body":"<p>I'm making a backup script in which I need to find the last Saturday of each month.</p>\n\n<p>I've tried different approaches to finding the day itself, which works splendidly themselves.</p>\n\n<p>The problem is, when I try putting them into my script I always get the error code\n<code>./test.sh: line 13: [: 29: integer expression expected</code>.</p>\n\n<p>This is my code:</p>\n\n<pre><code>#!/bin/bash\n\nLASTSAT=$(ncal | grep Sa | awk '{print$(NF-0)}')\nSATURDAY=\"6\"\n\nDAY=$(date +\"%u\")\nDATE=$(date +\"%d\")\n\necho \"$DAY\"\necho \"$DATE\"\necho \"$LASTSAT\"\n\nif [ $DATE -eq $LASTSAT  ]\nthen\n echo \"sista lördagen...\"\nfi\n</code></pre>\n\n<p>I got the tip to change the if statements to <code>[ \"$DATE\" = \"$LASTSAT\" ]</code>\nwhich erased the error itself, but the script will somehow not equal 27 to 27 (to take this month as an example).</p>\n\n<p>I also tried another approach to finding the last Saturday which was <code>LASTSAT=$(cal|awk '{if(NF==7){SAT=$7}};END{print SAT}')</code>, but it returns the exact same error if I use -eq and doesn't equal 27 to 27 using \" with =</p>\n\n<p>I'm very confused and out of ideas and I have searched the internet and copied the exact lines others been using but it all ends up the same.</p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["linux","bash","audio","audio-recording"],"answer_count":2,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":590,"score":7,"question_id":2613163,"title":"Monitoring an audio line","body":"<p>I need to monitor my audio <strong>line-in</strong> in linux, and in the event that audio is played, the sound must be recorded and saved to a file. Similiar to how <strong><a href=\"http://www.lavrsen.dk/twiki/bin/view/Motion/WebHome\" rel=\"nofollow\">motion</a></strong> monitors the video feed.</p>\n\n<p>Is it possible to do this with bash? something along the lines of:</p>\n\n<pre><code>#!/bin/bash\n\n# audio device\ndevice=/dev/audio-line-in\n\n# below this threshold audio will not be recorded.\nnoise_threshold=10\n\n# folder where recordings are stored\nstorage_folder=~/recordings\n\n# run indefenitly, until Ctrl-C is pressed\nwhile true; do\n   # noise_level() represents a function to determine\n   # the noise level from device\n   if noise_level( $device ) &gt; $noise_threshold; then\n     # stream from device to file, can be encoded to mp3 later.\n     cat $device &gt; $storage_folder/$(date +%FT%T).raw         \n   fi;\ndone;\n</code></pre>\n\n<p>EDIT: The flow I'd like to get from this program is</p>\n\n<pre><code> a. when noise &gt; threshold, start recording  \n b. stop recording when noise &lt; threshold for 10 seconds\n c. save recorded piece to separate file\n</code></pre>\n"},{"tags":["linux","bash","echo"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":13005226,"title":"Save one line of echo to variable in BASH?","body":"<p>Okay the answer to this may be really simple but I have been searching for a while and I can't figure it out. I have a variable called \"tmessagef\". The variable is formatted like:</p>\n\n<pre><code>value1*value2*vlaue3*value4*value5\n</code></pre>\n\n<p>The only part of the variable I want is value 5. I am currently using the following code but it only prints each value and doesn't save them to a variable:</p>\n\n<pre><code>OIFS=$IFS\nIFS='*'\narr2=$tmessagef\nfor x in $arr2\ndo\n    echo \"$x\"\ndone\nIFS=$OIFS\n</code></pre>\n\n<p>What I want to do is get the 5th line that the echo command produces and save that to a variable called \"tmessage\". How would I go about doing this?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["arrays","bash","store"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13007360,"title":"How to store elements to an array in bash","body":"<p>I got again tiny problem I would like to store strings in array I got following code: </p>\n\n<pre><code>echo -e \"Enter an amount\"\nread n \nfor  ((i=0;i&lt;n;i++)); \ndo \necho \"Enter number $i \" \nread ${array[$i]} \ndone \necho -e \"$array[@]}\"\n</code></pre>\n\n<p>Can you have a quick look a help me ? \nThanks</p>\n"},{"tags":["xcode","bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":13011146,"title":"How to stop Xcode build from shell script","body":"<p>I am currently working on an app in Xcode where I've added a Build Phase that runs a shell script. </p>\n\n<p>The script looks for resources from the Desktop and copies them to the app . If the files/folders don't exist, the script should cancel the build of the app. </p>\n\n<p>I have tried various things to stop the build such as <code>xcodebuild clean</code> but I can't quite figure it out. Here is what I have:</p>\n\n<pre><code>if [ -d ~/Desktop/MyFolder ]; then\n    cp -r ~/Desktop/MyFolder ${CONFIGURATION_BUILD_DIR}/${UNLOCALIZED_RESOURCES_FOLDER_PATH}/MyFolder\nelse\n    #Stop the build\nfi\n</code></pre>\n\n<p>Is there a way to have the script tell Xcode to stop the build? If so, how can I do it? </p>\n"},{"tags":["linux","bash","ps"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":46,"score":0,"question_id":13012265,"title":"Meaning of columns from ps","body":"<p>In Linux bash, what do the four columns mean from <code>ps</code>?</p>\n\n<p>e.g</p>\n\n<pre><code>PID   TTY         TIME CMD\n15286 pts/498 00:00:00 bash\n30887 pts/498 00:00:00 ps\n</code></pre>\n"},{"tags":["windows","linux","bash","shell","wget"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":52,"score":-4,"question_id":13011741,"title":"What is wget and how to get images from a public directory ?","body":"<p>What is wget and how to get images from a public directory in windows?</p>\n"},{"tags":["python","linux","bash","shell","unix"],"answer_count":6,"favorite_count":0,"up_vote_count":9,"down_vote_count":0,"view_count":3557,"score":9,"question_id":4834483,"title":"Is this the right way to run a shell script inside Python?","body":"<pre><code>import subprocess\nretcode = subprocess.call([\"/home/myuser/go.sh\", \"abc.txt\", \"xyz.txt\"])\n</code></pre>\n\n<p>When I run these 2 lines, will I be doing exactly this?:</p>\n\n<pre><code>/home/myuser/go.sh abc.txt xyz.txt\n</code></pre>\n\n<p>Why do I get this error? But when I run go.sh normally, I don't get that error.</p>\n\n<pre><code>File \"/usr/lib/python2.6/subprocess.py\", line 480, in call\n    return Popen(*popenargs, **kwargs).wait()\n  File \"/usr/lib/python2.6/subprocess.py\", line 633, in __init__\n    errread, errwrite)\n  File \"/usr/lib/python2.6/subprocess.py\", line 1139, in _execute_child\n    raise child_exception\nOSError: [Errno 8] Exec format error\n</code></pre>\n"},{"tags":["bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":13003339,"title":"How do I write a shell script that repeats a java program a specific number of times?","body":"<p>Essentially I am looking to write a shell script, likely using a for loop, that would allow me to repeat a program call multiple times without having to do it by hand (I don't know exactly how to explain this, but i want to perform the java TestFile.java command in the cmd window multiple times without doing it by hand).</p>\n\n<p>I am trying to write it for the UNIX shell in bash, if that helps at all.</p>\n\n<p>My program outputs a set of numbers that I want to look at to analyze end behavior, so I need to perform many tests for many different inputs and I want to streamline the process. I have a pretty basic understanding of shell scripting - i tried to teach myself today but I couldn't really understand the syntax of the for loop or the syntax of how to write a .java file call, but I would be able to write them in shell script with a little help.</p>\n"},{"tags":["bash","shell","scripting","boolean","sh"],"answer_count":1,"favorite_count":1,"up_vote_count":28,"down_vote_count":0,"view_count":22241,"score":28,"question_id":2953646,"title":"How to declare and use boolean variables in shell script?","body":"<p>The way I tried declaring a boolean variable is by:</p>\n\n<pre><code>variable=$false\n\nvariable=$true\n</code></pre>\n\n<p>Is the syntax correct? Also, if I wanted to update that variable would I just do the same format? Finally, is the following the proper syntax for using boolean variables as expressions:</p>\n\n<pre><code>if [ $variable ]\n\nif [ !$variable ]\n</code></pre>\n"},{"tags":["osx","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13009632,"title":"Getting strange behavior from terminal and iTerm \"-bash: fork: Resource temporarily unavailable\"","body":"<p>When I open iTerm, I'm getting this message:</p>\n\n<blockquote>\n  <p>Last login: Mon Oct 22 12:20:25 on ttys002\n  <br> -bash: fork: Resource temporarily unavailable\n  <br> -bash-3.2$ </p>\n</blockquote>\n\n<p>and when I open Terminal, I'm getting:</p>\n\n<blockquote>\n  <p>Last login: Mon Oct 22 12:25:47 on ttys002\n  <br>-bash: fork: Resource temporarily unavailable\n  <br>Williams-MacBook-Pro:~ william$ </p>\n</blockquote>\n\n<p>and whenever I try to put in a command, like ls or cd i get this error message:</p>\n\n<blockquote>\n  <p>-bash: fork: Resource temporarily unavailable</p>\n</blockquote>\n\n<p>So I basically can't do anything. I've tried googling the error message, but not getting anywhere. I'm on a Mac with Mountain Lion if that helps. Thanks.</p>\n\n<p>EDIT: </p>\n\n<p>I ran \"ps\"</p>\n\n<p>to get the process status and i got this as a response from terminal:</p>\n\n<blockquote>\n  <p>Williams-MacBook-Pro:~ william$ ps\n    <br>PID TTY           TIME CMD\n    <br>203 ttys000    0:00.08 -bash\n    <br>254 ttys001    0:00.03 bash /Users/william/.rvm/scripts/wrapper ruby-1.9.3-p2\n    <br>553 ttys001    0:00.03 bash /Users/william/.rvm/scripts/wrapper ruby-1.9.3-p2\n    <br>785 ttys001    0:00.03 bash /Users/william/.rvm/scripts/wrapper ruby-1.9.3-p2\n    <br>814 ttys001    0:00.48 -bash\n   <br>1019 ttys001    0:00.03 bash /Users/william/.rvm/scripts/wrapper ruby-1.9.3-p2</p>\n</blockquote>\n\n<p>and the message </p>\n\n<blockquote>\n  <p>bash /Users/william/.rvm/scripts/wrapper ruby-1.9.3-p2</p>\n</blockquote>\n\n<p>keeps listing a few hundred times in the terminal (couldn't post it all cause it probably wouldn't fit into this box and it just keeps going the same), so I'm guessing there's something sketchy going on with that file. Does anyone know how to fix this?</p>\n"},{"tags":["bash","expect","remote-access"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12988046,"title":"Script to get info from multiple servers","body":"<p>I want to collect info from a number of servers whether their grub.conf contains the \"elevator\" parameter or not.</p>\n\n<p>Now, password-less key authentication is something I can not do as of now. I am okay with specifying password in script.</p>\n\n<p>Can someone please help me achieving this?</p>\n\n<p>This is what I did:</p>\n\n<pre><code>#!/bin/bash\n\nGRUB=\"/etc/grub.conf\"\n_pair=\"$(&lt;/home/wadhwaso/login.txt)\"\nServer_info=\"/tmp/server_info\"\nfor e in $_pair\ndo\n             # extract user and ips for each $e in $_pair\n        IFS='@'\n        set -- $e\n        _user=\"$1\"\n        _ip=\"$2\"\n\n        sleep 2\n        echo \"Connecting to server '${_ip}' via SSH...\"\n        ssh ${_user}@${_ip} \"sudo grep -q \"elevator=noop\" \"$GRUB\" &gt;/dev/null\"\n        if [ $? -eq 0 ]; then\n        echo \"Present on ${_ip}\" | tee -a \"${Server_info}\"\n        else\n        echo \"not present on ${_ip}\" | tee -a \"${Server_info}\"\n        fi\ndone\n</code></pre>\n\n<p>I don't want to give password every time, and as password-less authentication is not present in my environment and will not be possible, I have to pass the password in script itself which really doesn't bother me, I can do that. I know it could be done through expect but I messed everything every time I tried using it.</p>\n\n<p>I tried using expect the way it was told in 1st answer but I failed.</p>\n"},{"tags":["bash","outputstream","fileoutputstream"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12790996,"title":"Output redirection in a bash script doesn't work","body":"<p>I have a script which ensures that the process keeps on running and the output of the process are being redirected to corresponding process_name.out files.</p>\n\n<p>Mysteriously (for me atleast), the output doesn't get redirected to the file unless I close down the script though the error does.</p>\n\n<p>Any clues in this regard would be really helpful.</p>\n\n<pre><code>#!/bin/bash\n\nuntil $1 &gt;&gt; \"/root/$1.out\" 2&gt;&gt;\"/root/$1.log\" ; do\n    echo \"Server $1 crashed with exit code $?.  Respawning..\" &gt;&gt; \"/root/procees.log\"\n    sleep 1\ndone\n</code></pre>\n"},{"tags":["linux","bash","unicode"],"answer_count":6,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":753,"score":4,"question_id":1044595,"title":"How can I re-add a unicode byte order marker in linux?","body":"<p>I have a rather large SQL file which starts with the byte order marker of FFFE. I have split this file using the unicode aware linux split tool into 100,000 line chunks. But when passing these back to windows, it does <em>not</em> like any of the parts other than the first one as only it has the FFFE byte order marker on.</p>\n\n<p>How can I add this two byte code using echo (or any other bash command)?</p>\n"},{"tags":["bash","unix","copy"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13008382,"title":"Bash - How to loop through sub directories and copy in a file","body":"<p>I'm new to coding in bash.</p>\n\n<p>I'm trying to create something which will loop through all subdirectories, and within each one it should copy a file to that directory.</p>\n\n<p>So for example, if I have the following directories</p>\n\n<pre><code>/dir1/  \n/dir2/  \n/dir3/  \n...  \n...  \n/dirX/\n</code></pre>\n\n<p>And a file <code>fileToCopy.txt</code></p>\n\n<p>Then I want to run something which will open every single <code>/dirX</code> file and put <code>fileToCopy.txt</code> in that directory. Leaving me with:</p>\n\n<pre><code>/dir1/fileToCopy.txt\n/dir2/fileToCopy.txt\n/dir3/fileToCopy.txt\n...\n...\n/dirX/fileToCopy.txt\n</code></pre>\n\n<p>I would like to do this in a loop, as then I am going to try to modify this loop to add some more steps, as ultimately the .txt file is actually a .java file, I am wanting to copy it into each directory, compile it (with the other classes in there), and run it to gather the output.</p>\n\n<p>Thanks.</p>\n"},{"tags":["bash","cli","at-command"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12968535,"title":"Echoing 'at' command in terminal fails","body":"<p>The following should print \"hello\" (or some reminder) on my Linux command line at 9:00 AM today:</p>\n\n<pre><code>$ at 9:00AM\nwarning: commands will be executed using /bin/sh\nat&gt; echo \"hello\"\nat&gt; &lt;EOT&gt; \n</code></pre>\n\n<p>However, at the specified time, nothing happens.</p>\n\n<p>I have an empty <code>etc/at.deny</code> and no <code>/etc/at.allow</code> file, so there shouldn't be any problems with permissions to use the command. Also, writing a file at 9:00 AM works:</p>\n\n<pre><code>$ at 9:00AM\nat&gt; echo \"hello\" &gt; /home/mart/hello.txt\nat&gt; &lt;EOT&gt;\n$ cat /home/mart/hello.txt\nhello\n</code></pre>\n\n<p>All jobs are shown as scheduled, I just can't get any output to the terminal window (I'm on Crunchbang Linux with Terminator). Why? Do I need to somehow specify the window for that output?</p>\n\n<p>Thanks for any help!</p>\n"},{"tags":["regex","linux","bash","script","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13008910,"title":"Use sed with regular expression for space","body":"<p>I am trying to use <code>sed</code> to substitute a string taking into account an whitespace.<br>\nExample:  </p>\n\n<pre><code>Hello          World\n</code></pre>\n\n<p>to be replaced by  </p>\n\n<pre><code>Hello George  \n</code></pre>\n\n<p>I tried:  </p>\n\n<pre><code>sed -e 's/Hello[:space]+World/Hello George/' ./infile &gt; outFile\n</code></pre>\n\n<p>but it does not work.  </p>\n\n<p>How can I fix this?  </p>\n"},{"tags":["bash","python-2.7","quotes"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13007501,"title":"Bash: pass variable as a single parameter / shell quote parameter","body":"<p>I'm writing a bash script which has to pass a variable to another program:</p>\n\n<pre><code>./program $variable\n</code></pre>\n\n<p>The problem is, it is absolutely necessary for $variable to be passed as a single parameter, which isn't the case if it contains whitespace.</p>\n\n<pre><code>variable=Hello World\n./program $variable\n-&gt; program receives two arguments: 'Hello' 'World'\n</code></pre>\n\n<p>Quoting it doesn't do anything at all (well done, bash devs):</p>\n\n<pre><code>variable=Hello World\n./program \"$variable\"\n-&gt; program receives: 'Hello' 'World'\n</code></pre>\n\n<p>Double quoting it does crazy stuff (well done, bash devs):</p>\n\n<pre><code>variable=Hello World\n./program \"'$variable'\"\n-&gt; program receives: \"'Hello\" \"World'\"\n</code></pre>\n\n<p>Is there an easy way to do this? Heck, is there a way to do this at all?</p>\n\n<p><strong>Update:</strong> Okay, since the problem doesn't seem to be bash, here's some additional info.\nThe program I'm passing arguments to is a python script. Without modifying the arguments in any way, I get</p>\n\n<pre><code>print sys.argv\n-&gt; ['/usr/bin/program', \"'Hello\", \"World'\"]\n</code></pre>\n\n<p>How can I fix that?</p>\n\n<p><strong>Edit:</strong> No, I haven't tried</p>\n\n<pre><code>variable=\"Hello World\"\n</code></pre>\n\n<p>because I never declare $variable. It's not being declared inside my bash function and I'm not allowed to modify it.</p>\n\n<p><strong>Edit:</strong> Okay, I got it to work that way.</p>\n\n<pre><code>local temp=\"$variable\"\n./program \"$temp\"\n</code></pre>\n\n<p>I'd like to know why it works that way and not any other way, though.</p>\n"},{"tags":["bash","ubuntu","centos","echo","sh"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13005474,"title":"echo -e backslash escapes not being respected in sh","body":"<p>I have a shell script that I wish to run on different Linux servers. When I run the echo command with the -e option and escape characters in the string it doesn't execute as expected on the sh shell on Ubuntu 12.04 or Ubuntu 11.04. The two servers we have in use that I would like the script to work on are running CentOS 5.3 and Ubuntu 12.04. When I run the following command in bash on the two servers the expected output is produced:</p>\n\n<pre><code>$ echo -e \"line1\\nline2\"\nline1\nline2\n</code></pre>\n\n<p>When I run the same command in sh on the CentOS machine the correct output is also produced. But when I run the command in sh on Ubuntu 12.04 or 11.04 the following output is produced:</p>\n\n<pre><code>$ echo -e \"line1\\nline2\"\n-e line1\nline2\n</code></pre>\n\n<p>Interesting if I run the below in sh on Ubuntu it automatically interprets the escape characters. </p>\n\n<pre><code>$ echo \"line1\\nline2\"\nline1\nline2\n</code></pre>\n\n<p>The script needs to run in the sh shell and should be portable across different machines. Any solutions. I'd also much appreciate a link to some docs explaining why or how this stuff happens. </p>\n"},{"tags":["regex","bash","sed","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":209,"score":0,"question_id":9601800,"title":"Print only parts that match regex","body":"<p><code>echo \"a b _c d _e f\" | sed 's/[ ]*_[a-z]\\+//g'</code></p>\n\n<p>The result will be <code>a b d f</code>.</p>\n\n<p>Now, how can I turn it around, and only print <code>_c _e</code>, while assuming nothing about the rest of the line?</p>\n"},{"tags":["bash","ubuntu","bash-completion"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":80,"score":2,"question_id":12792705,"title":"Why the backslash in bash?","body":"<p>I exported a variable in ~/.bashrc as follows (followed by source ~/.bashrc)</p>\n\n<pre><code>export w=/home/user/workspace/\n</code></pre>\n\n<p>When I'm on commandline I try to access sub-directories of $w in following way</p>\n\n<pre><code>user$ vi $w/\n</code></pre>\n\n<p>After this when I hit the tab key, a mysterious backslash appears</p>\n\n<pre><code>user$ vi \\$w/\n</code></pre>\n\n<p>It disables further tab-completion. Why? May not be <code>vi</code> specific as it occurs even with <code>ls</code>.</p>\n\n<p>Bash version 4.2.24(1)-release (i686-pc-linux-gnu)\nRunning Ubuntu 11.04</p>\n\n<p><strong>Edit</strong>\n<a href=\"http://lists.gnu.org/archive/html/bug-bash/2011-02/msg00274.html\" rel=\"nofollow\">Workaround</a>: Hit Esc+Ctrl+E before hitting tab. </p>\n"},{"tags":["regex","linux","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":474,"score":4,"question_id":9606503,"title":"Using sed and regex to capture last part of url","body":"<p>I'm trying to make sed match the last part of a url and output just that. For example:</p>\n\n<p><code>echo \"http://randomurl/suburl/file.mp3\" | sed (expression)</code></p>\n\n<p>should give the output:</p>\n\n<p><code>file.mp3</code></p>\n\n<p>So far I've tried <code>sed 's|\\([^/]+mp3\\)$|\\1|g'</code> but it just outputs the whole url. Maybe there's something I'm not seeing here but anyways, help would be much appreciated!</p>\n"},{"tags":["bash","shell","path"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12902227,"title":"bash: path with white space","body":"<p>I have a main file which uses(from the main I do a source) a properties file with variables pointing to paths. </p>\n\n<p>The properties file looks like this:</p>\n\n<pre><code>TMP_PATH=/$COMPANY/someProject/tmp\nOUTPUT_PATH=/$COMPANY/someProject/output\nSOME_PATH=/$COMPANY/someProject/some path\n</code></pre>\n\n<p>The problem is SOME_PATH, I must use a path with spaces(I can't change it). </p>\n\n<p>I tried escaping the whitespace, with quotes, but no solution so far.</p>\n\n<p>I edited the paths, the problem with single quotes is I'm using another variable $COMPANY in the path</p>\n"},{"tags":["bash","shell","cron","redhat"],"answer_count":6,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":4124,"score":5,"question_id":3241086,"title":"cron : how to schedule to run first Sunday of every month","body":"<p>Hi I need to schedule a cron job to run at at 9:00 AM on first Sunday of every month.\nDid a little research and see that there is no short hand in cron to this.\nDo you know of an optimal way ?\nUsing Bash+RHL</p>\n"},{"tags":["bash","sed","awk","prepend"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12993228,"title":"Use Sed or Awk to add \"deny from all \" to a list of IP addresses","body":"<p>This is probably really simple, but I'd like to find out how to add \"deny from all \" (with the space after \"all\") to a list of IP's (there are probably over 4,000).</p>\n\n<p>Each line of the file contains a single IP addresses.</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13003919,"title":"Use cut to cut a field via user input","body":"<p>I need to create a bash script that will cut a column from a data file that has been requested by a user (input). The script needs to prompt a field that will become a variable used to cut the field requested. This is one of the scripts that I have tried:</p>\n\n<pre><code>$x = cut -c example_list\necho -n \"What column would you like to cut: \"\nset x = $&lt; \n</code></pre>\n"},{"tags":["git","bash","shell"],"answer_count":11,"favorite_count":26,"up_vote_count":66,"down_vote_count":0,"view_count":12565,"score":66,"question_id":1593051,"title":"How to programmatically determine the current checked out Git branch","body":"<p><strong>In a Unix or GNU scripting environment (e.g. a Linux distro, Cygwin, OSX), what is the best way to determine which Git branch is currently checked out in a working directory?</strong></p>\n\n<p>One use of this technique would be automatically labeling a release (like <code>svnversion</code> would do with Subversion).</p>\n\n<p>Please also see my related question: <a href=\"http://stackoverflow.com/questions/1593188/how-to-programmatically-determine-whether-the-git-checkout-is-a-tag-and-if-so-wh\">How to programmatically determine whether a Git checkout is a tag, and if so what is the tag name?</a></p>\n"},{"tags":["osx","bash","environment-variables"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":12988393,"title":"Issue with setting $PATH directories","body":"<p>For some strange reason, I'm getting a \"No such file or directory\" error for my <code>$PATH</code> variable. I have tried to edit my path using <code>export</code>, changing it from what it was originally to every permutation from a single directory path to the original.</p>\n\n<p>When there is one directory (e.g., <code>export PATH=/bin</code>), I get \"/bin: Is a Directory\". But once I add more than one directory (e.g., <code>export PATH=/bin:/sbin</code>), I get \"No such file or directory\".</p>\n\n<p>I'm curious to see what the cause of this issue is!</p>\n"},{"tags":["linux","bash"],"answer_count":7,"favorite_count":6,"up_vote_count":14,"down_vote_count":0,"view_count":8726,"score":14,"question_id":2016844,"title":"Bash: Recursively remove files","body":"<p>Does anyone have a solution to remove those pesky ._ and .DS_Store files that one gets after moving files from a Mac to A Linux Server?</p>\n\n<p>specify a start directory and let it go? like /var/www/html/ down...</p>\n"},{"tags":["bash","netbeans","syntax-highlighting"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13002479,"title":"Netbeans Bash syntax colouring seems rather minimal","body":"<p>I am currently working on a large set of bash scripts and I find Netbeans' syntax highlighting lacking. It works, sorta-kinda. I noticed <code>nano</code> on my Debian dev-box has a much nicer and more complete colouring scheme, and not just the language keywords and the strings. I tried looking for a better Netbeans scheme, but can't find one.</p>\n\n<p>My question is: am I missing a popular replacement, or do I have to create my own?</p>\n"},{"tags":["c","bash","escaping","echo","system-calls"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13002325,"title":"Using bash system calls in C to write C that makes bash system calls","body":"<p>I'm playing around with an tiny app (in C) that, when run, creates a directory tree which it populates with files.  It does this by using a series of lines of the form </p>\n\n<p><code>system(\"echo \\\"lump = \\\" &gt;&gt; ./newdirectory/newfile.c\");</code></p>\n\n<p>This is working fine, except for when I try to have it write a line of C into the new file which itself contains a <code>system(\"echo\");</code> call.  </p>\n\n<p>Specifically,</p>\n\n<p><code>system(\"echo \\\"system(\\\"echo hello world\\\");\\\" &gt;&gt; ./newdirectory/newfile.c\");</code></p>\n\n<p>gets written as </p>\n\n<p><code>system(echo hello world);</code></p>\n"},{"tags":["bash","unix","file","unix-utils"],"answer_count":5,"favorite_count":7,"up_vote_count":15,"down_vote_count":1,"view_count":6035,"score":14,"question_id":2016894,"title":"Easy Way to Split a Large Text File?","body":"<p>I've got a large (by number of lines) plain text file that I'd like to split into smaller files, also by number of lines.  So if my file has around 2M lines, I'd like to split it up into 10 files that contain 200k lines, or 100 files that contain 20k lines (plus one file with the remainder; being evenly divisible doesn't matter).</p>\n\n<p>I could do this fairly easily in Python but I'm wondering if there's any kind of ninja way to do this using bash and unix utils (as opposed to manually looping and counting / partitioning lines).</p>\n"},{"tags":["bash","shell","script","sh"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":115,"score":1,"question_id":12769183,"title":"Difference between ./script and sh script","body":"<p>I'm experiencing a weird issue with my following script :</p>\n\n<pre><code>#!/bin/sh\nfor asm_file in `find tremor -name \"*.s\"`; do\n    ./tremor/arm2gnu.pl $asm_file &gt; /tmp/a &amp;&amp; mv /tmp/a $asm_file\ndone\n</code></pre>\n\n<p>It converts file from an ASM format to another; needed for my android app.</p>\n\n<p>This command works well :</p>\n\n<pre><code>&gt; ./tremor_script.sh\n</code></pre>\n\n<p>And this one is failing :</p>\n\n<pre><code>&gt; sh tremor_script.sh\n(...)\nandroid/../libs/build/android/tremor/../../../tremor/floor1ARM.s:1: Error: junk at end of line, first unrecognized character is `,' \n(...etc)\n</code></pre>\n\n<p>What's the difference between them ? </p>\n\n<p>The problem is that I try to launch the script from another script; It fails too ?</p>\n\n<pre><code>cd script_location &amp;&amp; ./convert_tremor_asm.sh\n</code></pre>\n\n<p>Any clue ?</p>\n"},{"tags":["php","bash","processes","kill"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12993569,"title":"Bash script to kill a process if process count is over X amount","body":"<p>So, I was wondering if there was a way to see if one could use bash to kill a PID of a process if more than X amount spawned. For example:</p>\n\n<p>Let's say we have 10 php processes running with separate PIDs all with the command /usr/bin/php. If it hit 10 processes, would there be a way to kill it with a bash script?\n(I'll be having this script run full time in the foreground with a terminal)</p>\n"},{"tags":["eclipse","bash","shell","sh"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":206,"score":2,"question_id":10231559,"title":"eclipse sh edit and run","body":"<p>What would be the best way to run and edit a .sh script within eclipse ?</p>\n\n<p>Regarding the editing part, I've found the ShellEd plugin, but it seems very minimalistic, is there no alternative ?</p>\n\n<p>Regarding the running part, I've found that there's a built in console that can be accessed by right clicking the .sh, then clicking 'remote system view', then clicking 'local'. But it's very minimalistic, there is not even tab completion. I would like something that could be as close to bash as possible.</p>\n"},{"tags":["bash","shell","script"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":71,"score":2,"question_id":12972687,"title":"Listing directory's names with given arguments","body":"<p>I need to list the names of the directory's folders and files, but starting from <code>input1</code> until <code>input2</code> (arguments, user's inputs).</p>\n\n<pre><code>#!/bin/bash\nSTART_INDEX=$1\nEND_INDEX=$2\n     for $STA_INDEX in $(ls) -le $END_INDEX; do\n           echo item: $STA_INDEX\n     done\n</code></pre>\n\n<p>Together with my colleague, we came up with this \"solution\" which is not a solution at all!\nSo, can anyone try to explain me where I go wrong with this or give me another approach to a working solution. I think this piece of code will give you the main idea.</p>\n"},{"tags":["linux","bash","sudo"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":12996397,"title":"Command not found when using sudo","body":"<p>I have a script called <code>foo.sh</code> in my home folder. When I navigate to this folder, and use <code>./foo.sh</code>, I get <code>-bash: ./foo.sh: Permission denied</code>. When I use <code>sudo ./foo.sh</code>, I get <code>sudo: foo.sh: command not found</code>.</p>\n\n<p>Does anybody know why this happens, and how to fix it? Thanks.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":267,"score":0,"question_id":10296172,"title":"bash script create multiple directories within directories","body":"<p>I want to create a directory structure like this in nix:</p>\n\n<p><code>mkdir -p 1,2,3,4,5,6,7,8,9</code> and within each of these folders I want folders <code>1,2,3,4,5,6,7,8,9</code></p>\n\n<p>I have started to write a simple loop like this (all the way up to folder 2) but this seems inefficient.</p>\n\n<pre><code>#!/usr/bin/env bash   \nfor i in 1 2 4 5 6 7 8 9; do mkdir -p 1/{1,2,3,4,5,6,7,8,9} $i, mkdir -p  2/{1,2,3,4,5,6,7,8,9} $2; done\n</code></pre>\n\n<p>Is there a better way of doing it?</p>\n"},{"tags":["bash","alias","hostname"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12999544,"title":"add hostname to ssh alias","body":"<p>I've set up an alias in my bashrc so I can access the cluster at work from home. However, to run programmes on it, I'd like to login to my work computer. How do I add that hostname so I can use one alias?</p>\n\n<p>I've tried just extending the alias by alias WORK=\"ssh user@work; user@hostname\", but I still only have access to my files and can't run anything. If I run the second part again once logged in, it then works. home is the same for both if that makes a difference as I tried to add another key. </p>\n"},{"tags":["linux","bash","text","utf-8","character-encoding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":98,"score":0,"question_id":12999651,"title":"How to remove non UTF-8 characters from text file","body":"<p>I have a bunch of Arabic, English, Russian files which are encoded in utf-8. Trying to process these files using a Perl script, I get this error:</p>\n\n<pre><code>Malformed UTF-8 character (fatal)\n</code></pre>\n\n<p>Manually checking the content of these files, I found some strange characters in them.\nNow I'm looking for a way to automatically remove these characters from the files.</p>\n\n<p>Is there anyway to do it?</p>\n"},{"tags":["bash","tab-completion","tcsh","completion"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":1043,"score":5,"question_id":1529251,"title":"Tcsh and/or bash directory completion with variable hidden root prefix","body":"<p>I'm trying to set up directory completion in tcsh and/or bash (both are used at my site) with a slight twist: for a particular command \"foo\", I'd like to have completion use a custom function to match the first /-delimited term to an actual subtree node, and then follow normal directory completion for any successive terms.  It is sort of a combination of cdpath and completion, or I suppose a form of directory completion where the starting point is controlled by the completion script.  It would work as follows:</p>\n\n<pre><code>$ foo xxx&lt;TAB&gt;\n(custom completion function produces choices it finds at arbitrary levels in the dir tree)\nxxxYYY xxxZZZ xxxBLAH ...\nfoo xxxYYY/&lt;TAB&gt;\n(normal directory completion proceeds from this point on, to produce something like:)\nfoo scene/shot/element/workspace/user/...\n</code></pre>\n\n<p>We'd like to do this because we have a large production development tree (this is a CGI production facility), that shell-savvy users are navigating and jumping around in all the time.  The complaint is that the upper levels of the tree are cumbersome and redundant; they just need a quick search on the first term to find possible \"head\" choices and do directory completion from there.  It seems like programmable completion could offer a way to do this, but it is turning out to be pretty elusive.</p>\n\n<p>I've made several attempts of custom bash and tcsh completion to do this, but the closest I've gotten is a form of \"word completion\" where the user must treat the directory levels as separate words with spaces (e.g. foo scene/ shot/ element/ workspace/ ...).  I could continue hacking at my current scripts--but I've been wondering if there's something I'm not understanding--this is my first attempt to program completion, and the docs and examples are pretty thin in shell books and on the internet.  If there's any completion-guru's out there that can get me on the right track, I'd appreciate it.</p>\n\n<p>FWIW: here is what I've got so far (in tcsh first, then bash).  Note that the static root '/root/sub1/sub2/sub3' is just a placeholder for a search function that would find different matches in different levels.  If I can get that to work, I can sub in the search feature later.  Again, both examples do word completion, which requires user to type a space after each matching term (I also have to remove the spaces in the function to construct an actual path, yuck!)</p>\n\n<p>TCSH EXAMPLE (note the function is actually a bash script):</p>\n\n<pre><code>complete complete_p2 'C@*@`./complete.p2.list.bash $:1 $:2 $:3 $:4 $:5 $:6 $:7 $:8 $:9`@@'\n\n#!/bin/bash --norc\n\n# complete.p2.list.bash - Completion prototype \"p2\" for shotc command\n\n# Remove spaces from input arguments\nppath=`echo $@ | sed -e 's/ //g'`\n\n# Print basenames (with trailing slashes) of matching dirs for completion\nls -1 -d /root/sub1/sub2/sub3/$ppath* 2&gt;/dev/null | sed -e 's#^.*/##' | awk '{print $1 \"/\"}'\n</code></pre>\n\n<p>BASH EXAMPLE:</p>\n\n<pre><code>_foo() \n{\n    local cur prev opts flist\n    COMPREPLY=()\n    cur=\"${COMP_WORDS[COMP_CWORD]}\"\n    prev=\"${COMP_WORDS[COMP_CWORD-1]}\"\n\n    # Get all command words so far (omit command [0] element itself), remove spaces\n    terms=`echo ${COMP_WORDS[@]:1} | sed -e 's/ //g'`\n\n    # Get basenames (with trailing slashes) of matching dirs for completion\n    flist=`ls -1 -d /root/sub1/sub2/sub3/${terms}* 2&gt;/dev/null | sed -e 's#^.*/##' | awk '{print $1 \"/\"}' | xargs echo`\n\n    COMPREPLY=( $(compgen -W \"${flist}\" ${cur}) )\n    return 0\n}\ncomplete -F _foo foo\n</code></pre>\n"},{"tags":["bash","sh"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12998509,"title":"Is unsetting global variables defined in a script good practice?","body":"<p>Is it considered good practice, when writing sh scripts, to unset all previously defined global variables at the end of the script?</p>\n\n<p>If for example, I execute my script <code>myscript</code> using the . (source) builtin, like this</p>\n\n<pre><code>. myscript\n</code></pre>\n\n<p>after executing the script the shell is poluted with the variables defined in the script. This seems really bad (especially if used by other people).</p>\n\n<p>If I could, I would get rid of globals in sh (or bash) altogether but more often then not they are the least worst solution :-).</p>\n"},{"tags":["shell","environment","bash"],"answer_count":7,"favorite_count":80,"up_vote_count":132,"down_vote_count":1,"view_count":25465,"score":131,"question_id":415403,"title":"What's the difference between .bashrc, .bash_profile, and .environment?","body":"<p>I've used a number of different *nix-based systems of the years, and it seems like every flavor of Bash I use has a different algorithm for deciding which startup scripts to run.  For the purposes of tasks like setting up environment variables and aliases and printing startup messages (e.g. MOTDs), which startup script is the appropriate place to do these?</p>\n\n<p>What's the difference between putting things in <code>.bashrc</code>, <code>.bash_profile</code>, and <code>.environment</code>?  I've also seen other files such as <code>.login</code>, <code>.bash_login</code>, and <code>.profile</code>; are these ever relevant?  What are the differences in which ones get run when logging in physically, logging in remotely via ssh, and opening a new terminal window?  Are there any significant differences across platforms (including Mac OS X (and its Terminal.app) and Cygwin Bash)?</p>\n"},{"tags":["bash","autocomplete","symlink"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":224,"score":3,"question_id":10120274,"title":"bash autocompletion across a symbolic link","body":"<p>I have the following directory structure:</p>\n\n<pre><code>base/\n  dir/\n    subdir/\n    link -&gt; ../dir\n</code></pre>\n\n<p>Now if I cd to dir/link and type:</p>\n\n<pre><code>cd ../subd[tab]\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>cd ../subdir[space] \n</code></pre>\n\n<ol>\n<li><p>I would understand if autocomplete fails (because it would canonize the path and look into base/ and not dir/).</p></li>\n<li><p>I would also understand if it autocompletes to <code>cd ../subdir/</code> with the ending / (because it would interpret <code>..</code> as <code>go up one level</code> and search into dir/).</p></li>\n</ol>\n\n<p>But I do not understand the actual behaviour that is somewhere between the two. Ideally I would like bash to behave like 2. (autocomplete to cd ../subdir/). I am using fedora 14, bash version 4.1.7(1). Any idea how to accomplish this ?</p>\n"},{"tags":["osx","bash","itunes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":154,"score":0,"question_id":11276846,"title":"script for auto opening directories (mac os x) and creating m3u playlists","body":"<p>Imagine that you have some directories containing both <code>mp3</code> files and sub-directories, also containing <code>mp3</code> files, like:</p>\n\n<pre><code>/music/band1/\n/music/band2/\n/music/band2/dir1/\n/music/band2/dir2/\n/music/band3/dir1/\n/music/band3/dir2/\n/music/band4/\n...\n</code></pre>\n\n<p>I would like to create a <code>.m3u</code> file in every directory containing <code>mp3</code> files - so for example:</p>\n\n<pre><code>/music/band1/band1.m3u\n/music/band2/band2.m3u\n/music/band2/dir1/dir1.m3u\n/music/band2/dir2/dir2.m3u\n/music/band3/dir1/dir1.m3u\n/music/band3/dir2/dir2.m3u\n/music/band4/band4.m3u\n</code></pre>\n\n<p>The name of <code>.m3u</code> file will be the directory name in which the <code>.m3u</code> is created. (This is just an example directory structure.)</p>\n\n<p>I hope it is clear :)</p>\n\n<p>So far I have this to generate <code>m3u</code> files from <code>*.mp3</code> files, but only in the actual directory, and name it by directory.</p>\n\n<pre><code>#!/bin/bash\\\nls | grep -i mp3 &gt; filelist.txt\nmv filelist.txt filelist.m3u\nFOLDERNAME=${PWD##*/}\necho $FOLDERNAME\nmv filelist.m3u $FOLDERNAME.m3u\n</code></pre>\n\n<p>What should be added to have it look recursively into every subdirectory of <code>/music</code>, and if there is another sub-sub directory, also look there? Then, execute the <code>m3u</code>-making script in each sub-directory?</p>\n\n<p>Thank you for your help! :)</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12996037,"title":"Bash Scripting: Output of find command with quoted variable to an array","body":"<p>I'm trying to store the output of the find command to an array. </p>\n\n<p>I tried different things, and nothing seemed to work, couple of them in commented lines below. I guess the problem is with <strong>\"${findNameCmdSubDir[@]}\"</strong> is getting tokenized, and the the directories intended to exclude from search are ignored, and all directories are being listed.</p>\n\n<p>If i give the find command without passing it to an array i.e., the plain find command, i see the expected output of listing all the other directories without the excludes.</p>\n\n<pre><code>#! /bin/bash\nandroid_path=$1\nexcludeDirFromSearch=( doc build test unit-test script hardware prebuilt device . )\nlet \"dirCount = 0\"\n\nfindNameCmdSubDir=()\nfor dir in \"${excludeDirFromSearch[@]}\"; do\n    if [ $((dirCount++)) -eq ${#excludeDirFromSearch[@]} ]; then\n            findNameCmdSubDir+=(-name \"${dir}*\")\n    else\n            findNameCmdSubDir+=(-name \"${dir}*\" -prune -o)\n    fi\ndone\n\nsearchSubDirectories=()\nsearchSubDirectories=( $(find \"${android_path}\" -mindepth 1 -maxdepth 1 \\\n\"${findNameCmdSubDir[@]}\" -type d ) ) &lt;&lt;-- Not Working!\n#find \"${android_path}\" -mindepth 1 -maxdepth 1 \"${findNameCmdSubDir[@]}\" \\\n#    -type d | while read line; do\n#        echo \"$line\"\n#done  &lt;-- Not working\nfind \"${android_path}\" -mindepth 1 -maxdepth 1 \"${findNameCmdSubDir[@]}\" \\\n    -type d -print &lt;-- works as expected !\n\necho \"${searchSubDirectories[@]}\"\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>I tried escaping the double quotes and still no luck</p>\n\n<pre><code>searchSubDirectories=( $(find \"${android_path}\" -mindepth 1 -maxdepth 1 \\\"${findNameCmdSubDir[@]}\\\" -type d ) ) &lt;&lt;-- Not Working!\n</code></pre>\n"},{"tags":["bash","unix","script","directory","cd"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":92,"score":2,"question_id":12993646,"title":"UNIX - How to write a bash script to automatically change to next/previous directory","body":"<p>Say I have this folder structure:</p>\n\n<pre><code>MainFolder\n    Folder1\n    Folder2\n    Folder3\n    ...\n    Folder200\n</code></pre>\n\n<p>I want to write a script that, if I am current inside Folder2 and execute the script, it will automatically change to the next directory in the list, in this case, Folder3. The restrictions are that the folders could have any name, and I cannot rename it.</p>\n\n<p>So my questions are:</p>\n\n<p>1) How can I know what directory is next on the list? I was wondering if the subdirectories of a directory have a sequential index number that I could use to know what dir comes next. </p>\n\n<p>2) Since I would like to display the name of the new directory at the end of the script, is there a way to display only the dir name? (eg: Folder3 instead of /home/path/to/dir/Folder3 which is the result of \"pwd\")</p>\n"},{"tags":["bash","split"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12995050,"title":"split a file into x files where file names are numbered","body":"<p>In a bash script, how do I split a large text/csv file into n files (each of m rows); the resulting file names need to be numbered starting from 1 and increment by 1 [0,1...999...].</p>\n"},{"tags":["bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":12993706,"title":"Building up a command string for find","body":"<p>I'm trying to parse the android source directory and i need to extract all the directory names excluding certain patterns. If you notice below., for now i included only 1 directory to the exclude list, but i will be adding more., </p>\n\n<p>The find command doesn't exclude the directory with name 'docs'.</p>\n\n<p>The commented out line works., but the other one doesn't. For easy debugging, i included the min and maxdepth which i would remove later.</p>\n\n<p>Any comments or hints on why it doesn't work?</p>\n\n<pre><code>#! /bin/bash\nANDROID_PATH=$1\nroot=/\nEXCLUDES=( doc )\ncd ${root}\nfor dir in \"${EXCLUDES[@]}\"; do\n    exclude_name_cmd_string=${exclude_name_cmd_string}$(echo \\\n                            \"-not -name \\\"${dir}*\\\" -prune\")\ndone\necho -e ${exclude_name_cmd_string}\ncustom_find_cmd=$(find ${ANDROID_PATH} -mindepth 1 -maxdepth 1 \\\n                    ${exclude_name_cmd_string} -type d)\n#custom_find_cmd=$(find ${ANDROID_PATH} -mindepth 1 -maxdepth 1 \\\n#                    -not -name \"doc*\" -prune -type d)\necho ${custom_find_cmd} \n</code></pre>\n"},{"tags":["bash","shell"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":404,"score":1,"question_id":521366,"title":"Copy files to directory based on user input and using * to list files","body":"<p>I want to create a extremely simple bash script, <code>my_copy.sh</code>, that reads arbitrary number of input files, a destination directory, and finally asks for confirmation if you want to copy the files. </p>\n\n<p>Example usage: <code>./my_copy.sh</code></p>\n\n<pre><code> Type in the file names to copy:\n file1 file2 Anna Kurt Arne\n Type in the directory to copy to:\n dir_3\n Are you sure you want to copy the files:\n Anna\n Kurt\n Arne\n to the directory dir_3 (y/n)?\n</code></pre>\n\n<p>If the destination directory does not exist, it should be created by the script.</p>\n\n<hr>\n\n<p>My next question:</p>\n\n<p>I want the * character to do a simple <code>ls</code> command. So if I type <code>./my_copy *</code> , in the command line it should list all files in my directory. </p>\n"},{"tags":["bash","shell","ubuntu"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12986561,"title":"Why is both the if and else executed?","body":"<p>My code is:</p>\n\n<pre><code>if [ \"$server\" == \"a\" ]; then\n        echo \"apache\"\nfi\n\nif [ \"$server\" ==  \"t\"   ]\nthen\n        echo \"tomcat\"\nelse\n        echo \"Entered\"\nfi\n</code></pre>\n\n<p>The value of the <code>$server</code> is <code>t</code>. I expect the value <code>tomcat</code> to be printed on the console. But <code>Entered</code> is printed too!</p>\n\n<p>I'm confused about this. How come both the <code>if</code> and <code>else</code> statements are executed?</p>\n"},{"tags":["bash"],"answer_count":6,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":74,"score":4,"question_id":11953185,"title":"Counting the number of dots in a string","body":"<p>How do I count the number of dots in a string in BASH? For example</p>\n\n<pre><code>VAR=\"s454-da4_sd.fs_84-df.f-sds.a_as_d.a-565sd.dasd\"\n\n# Variable VAR contains 5 dots\n</code></pre>\n\n<p>Thank you very much</p>\n"},{"tags":["bash","freebsd"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":12990631,"title":"Bash script not working on a new dedicated server","body":"<p>Recently I have migrated to the new dedicated server which is running on <strong>the same</strong> operating system - FreeBSD 8.2. I got a root account access and all permissions have been set properly.</p>\n\n<p>My problem is that, the bash script I was running on the old server doesn't works on the new machine, the only error appearing while running the script is:</p>\n\n<pre><code># sh script.sh\nscript.sh: 3: Syntax error: word unexpected (expecting \")\")\n</code></pre>\n\n<p>Here is the code itself:</p>\n\n<pre><code>#!/usr/local/bin/bash\n\nPORTS=(7777:GAME 11000:AUTH 12000:DB)\nMESSG=\"\"\nfor i in ${PORTS[@]} ; do\n    PORT=${i%%:*}\n    DESC=${i##*:}\n    CHECK=`sockstat -4 -l | grep :$PORT | awk '{print $3}' | head -1`\n    if [ \"$CHECK\" -gt 1 ]; then\n        echo $DESC[$PORT] \"is up ...\" $CHECK\n    else\n        MESSG=$MESSG\"$DESC[$PORT] wylaczony...\\n\"\n        if [ \"$DESC\" == \"AUTH\" ]; then\n            MESSG=$MESSG\"AUTH is down...\\n\"\n        fi\n        if [ \"$DESC\" == \"GAME\" ]; then\n            MESSG=$MESSG\"GAME is down...\\n\"\n        fi\n        if [ \"$DESC\" == \"DB\" ]; then\n            MESSG=$MESSG\"DB is down...\\n\"\n        fi\n\n    fi\ndone\n\nif [ -n \"$MESSG\" ]; then\n    echo -e \"Some problems ocurred:\\n\\n\"$MESSG | mail -s \"Problems\" yet@another.com\nfi\n</code></pre>\n\n<p>I don't really code in bash, so I don't know why this happend...</p>\n"},{"tags":["linux","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":831,"score":0,"question_id":7908953,"title":"How to measure CPU usage","body":"<p>I would like to log CPU usage at a frequency of 1 second.</p>\n\n<p>One possible way to do it is via <code>vmstat 1</code> command.</p>\n\n<p>The problem is that the time between each output is not always exactly one second, especially on a busy server. I would like to be able to output the timestamp along with the CPU usage every second. What would be a simple way to accomplish this, without installing special tools?</p>\n"},{"tags":["bash","tcp","client-server","pipes","netcat"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12992362,"title":"how to put tcp data from netcat to variables?","body":"<p>hello I have set up a server with the usual <strong>nc - lk port</strong> command.</p>\n\n<p>Well my client sends tcp data to the server socket in the form of xxx,yyy which are numbers.</p>\n\n<p>I want  every time the client connects that the values of xxx and yyy would be stored in variables in order to use them later.</p>\n\n<p>from what I understood I must work with pipes but I am not sure how</p>\n\n<p>any ideas guys?</p>\n"},{"tags":["bash","unix","redirect","command","pipe"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":79,"score":3,"question_id":12942042,"title":"Pipe | Redirection < > Precedence","body":"<p>I want to make clear when does pipe | or redirection &lt; > takes precedence in a command?</p>\n\n<p>This is my thought but need confirmation this is how it works.</p>\n\n<p>Example 1:</p>\n\n<pre><code>sort &lt; names | head\nThe pipe runs first:  names|head   then it sorts what is returned from names|head\n</code></pre>\n\n<p>Example 2:</p>\n\n<pre><code>ls | sort &gt; out.txt\nThis one seems straight forward by testing, ls|sort then redirects to out.txt\n</code></pre>\n\n<p>Example 3:</p>\n\n<pre><code>Fill in the blank?  Can you have both a &lt; and a &gt; with a | ???\n</code></pre>\n"},{"tags":["bash","node.js","express","npm"],"answer_count":3,"favorite_count":6,"up_vote_count":8,"down_vote_count":0,"view_count":3291,"score":8,"question_id":6103121,"title":"express command not found in bash after installing it with npm","body":"<p>just installed new ubuntu vm to test around with node\ninstalled things in this order:</p>\n\n<pre><code>node\nmongodb-server\nnpm\nexpress\nmongoose\n</code></pre>\n\n<p>now, trying to create a new app i noticed express cannot be used in the shell.\n<code>express -v</code>  returns\nexpress: command not found</p>\n\n<p>i installed npm like this</p>\n\n<pre><code>curl http://npmjs.org/install.sh | sudo sh\n</code></pre>\n\n<p>and i installed express this way</p>\n\n<pre><code>npm install express\n</code></pre>\n\n<p>any ideas?</p>\n"},{"tags":["bash","error-handling","multiplicity"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":97,"score":1,"question_id":12966622,"title":"Make Bash script exit and print error message if users invoke the script incorrectly","body":"<p>Script needed was</p>\n\n<pre><code>#!/bin/bash\n\n# Check if there are two arguments\nif [ $# -eq 2 ]; then\n   # Check if the input file actually exists.\n   if ! [[ -f \"$1\" ]]; then\n     echo \"The input file $1 does not exist.\"\n     exit 1\n   fi\nelse\n   echo \"Usage: $0 [inputfile] [outputfile]\"\n   exit 1\nfi\n\n# Run the command on the input file\ngrep -P \"^[\\s]*[0-9A-Za-z-]+.?[\\s]*$\" \"$1\" &gt; \"$2\"\n</code></pre>\n\n<p>Edit, the script has changed to </p>\n\n<pre><code>grep -P \"^[\\s]*[0-9A-Za-z-]+.?[\\s]*$\" $*\nif [ ! -f \"$1\" ]; then\n\n  echo 'Usage: '\n  echo\n  echo './Scriptname inputfile &gt; outputfile'\n  exit 0\n\nfi\n</code></pre>\n\n<p>invoking the script with no parameters gives no erros and sits blank</p>\n\n<pre><code>Usage: \n\n./Scriptname inputfile &gt; outputfile\n</code></pre>\n\n<p>I have bit of code </p>\n\n<pre><code>grep -P \"^[\\s]*[0-9A-Za-z-]+.?[\\s]*$\" $*\n</code></pre>\n\n<p>This code pulls lines that have a single word on them and pumps the output to a new file, so for example</p>\n\n<blockquote>\n<pre><code>This is a multi word line\nthis\nthe above line is not\nnow\nonce again wrong\n</code></pre>\n</blockquote>\n\n<p>The output would be </p>\n\n<pre><code>This\nnow\n</code></pre>\n\n<p>The code works, users invoke the code using <code>./scriptname file &gt; newfile</code></p>\n\n<p>However, I am trying to expand the code to give users an error message if they invoke the script incorrectly. </p>\n\n<p>For the error messange, I'm thinking of echoing something back like <code>scriptname file_to_process &gt; output_file</code>. </p>\n\n<p>I did try</p>\n\n<pre><code>if [incorrectly invoted unsure what to type]\necho $usage\n\nexit 1\nUsage=\"usage [inputfile] [&gt;] [outputfile]\n</code></pre>\n\n<p>However I have had little luck. The code runs but does nothing if I invoke with just the script name. Also, if I invoke the script with just the scriptname and the input file, it will output the results instead of exiting with the error message.</p>\n\n<p>Other ones I have tried are</p>\n\n<pre><code>if [ ! -n $1 ]; then\n\n  echo 'Usage: '\n  echo \n  echo './Scriptname inputfile &gt; outputfile'\n  exit 0\n\nfi\n</code></pre>\n\n<p>Given replies I have received so far, my code now is </p>\n\n<pre><code>#!/bin/bash\ngrep -P \"^[\\s]*[0-9A-Za-z-]+.?[\\s]*$\" $*\nif [ ! -f \"$1\" ]; then\n\n  echo 'Usage: '\n  echo \n  echo './Scriptname inputfile &gt; outputfile'\n  exit 0\n\nfi\n</code></pre>\n\n<p>When invoking the script without an input file the script does nothing and has to be aborted with ctrl+c, still trying to get the echo of the invoke message. </p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12989615,"title":"Check if file is in a given directory (or sub-directory) in bash","body":"<p>How can I check if a given file is in a directory, including any directories with that directory, and so on? I want to do a small sanity check in a bash script to check that the user isn't trying to alter a file outside the project directory.</p>\n"},{"tags":["javascript","bash","imagemagick","phantomjs"],"answer_count":1,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":1048,"score":4,"question_id":9390493,"title":"How to take a snapshot of a section of a web page from the shell?","body":"<p>I have a section of a web page that I need to take a gif snapshot of at a given time interval.  The snapshot needs to be full page size resolution, however as I said, it only goes to a certain place on the page (in this case it's after a table).</p>\n\n<p>What would be the best way to grab a page snapshot image image like this?  I'd like to just throw it into a cron job and forget it, but I'm not readily seeing a tool that would make quick work of this.</p>\n\n<h2>SOLUTION:</h2>\n\n<p>As per the @Eduardo's excellent direction I implemented a clean and quick solution based around phantomjs and imagemagick (Mac: <code>brew install phantomjs</code> &amp; <code>brew install imagemagick</code>):</p>\n\n<p>*NOTE: If you want to remove imagemagick altogether just add the following to rasterize.js: <code>page.clipRect = { top: 10, left: 10, width: 500, height: 500 }</code></p>\n\n<pre><code>#! /usr/bin/env bash\n# Used with PhantomJS - rasterize.js source: http://j.mp/xC7u1Z\n\nrefresh_seconds=30\n\nwhile true; do\n    date_now=`date +\"%Y-%m-%d %H%M\"` \n\n    phantomjs rasterize.js $1 \"${date_now}-original.png\"  # just sucking in the first arg from shell for the URL\n    convert \"${date_now}-original.png\" -crop 500x610+8+16 \"${date_now}.png\" # crop args: WIDTHxHEIGHT+LEFT_MARGIN+TOP_MARGIN\n    rm \"${date_now}-original.png\"\n\n    echo \"Got image: ${date_now}.png - Now waiting ${refresh_seconds} seconds for next image...\"\n    sleep ${refresh_seconds}\ndone\n</code></pre>\n\n<p>And here's the js used by phantomjs in the above: </p>\n\n<pre><code>// As explained here: http://code.google.com/p/phantomjs/wiki/QuickStart\n\nvar page = new WebPage(),\n    address, output, size;\n\nif (phantom.args.length &lt; 2 || phantom.args.length &gt; 3) {\n    console.log('Usage: rasterize.js URL filename');\n    phantom.exit();\n} else {\n    address = phantom.args[0];\n    output = phantom.args[1];\n    page.viewportSize = { width: 600, height: 600 };\n    page.open(address, function (status) {\n        if (status !== 'success') {\n            console.log('Unable to load the address!');\n        } else {\n            window.setTimeout(function () {\n                page.render(output);\n                phantom.exit();\n            }, 200);\n        }\n    });\n}\n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":67,"score":4,"question_id":8284122,"title":"How to check if a line from a file is empty with bash","body":"<p>I have a while loop which reads lines from a file using read line.\nThen I want to check if the line is empty or not, how can I do it?\nI already found questions about lines with space or about a variable in this site.</p>\n"},{"tags":["bash","ssh","pid","synergy"],"answer_count":6,"favorite_count":0,"up_vote_count":9,"down_vote_count":0,"view_count":17613,"score":9,"question_id":1821968,"title":"PID of last started process in Bash-Script","body":"<p>i am using the program synergy together with an ssh tunnel</p>\n\n<p>it works, i just have to open an console an type these two commands:</p>\n\n<pre><code>ssh -f -N -L localhost:12345:otherHost:12345 otherUser@OtherHost\nsynergyc localhost\n</code></pre>\n\n<p>because im lazy i made an Bash-Script which is run with one mouseclick on an icon: </p>\n\n<pre><code>#!/bin/bash\nssh -f -N -L localhost:12345:otherHost:12345 otherUser@OtherHost\nsynergyc localhost\n</code></pre>\n\n<p>the Bash-Script above works as well, but now i also want to kill synergy and the ssh tunnel via one mouseclick, so i have to save the PIDs of synergy and ssh into file to kill them later:</p>\n\n<pre><code>#!/bin/bash\n\nmkdir -p /tmp/synergyPIDs || exit 1\nrm -f /tmp/synergyPIDs/ssh || exit 1\nrm -f /tmp/synergyPIDs/synergy || exit 1\n\n[ ! -e /tmp/synergyPIDs/ssh ] || exit 1\n[ ! -e /tmp/synergyPIDs/synergy ] || exit 1\n\nssh -f -N -L localhost:12345:otherHost:12345 otherUser@OtherHost\necho $! &gt; /tmp/synergyPIDs/ssh\nsynergyc localhost\necho $! &gt; /tmp/synergyPIDs/synergy\n</code></pre>\n\n<p>but the files of this script are empty ...</p>\n\n<p>how do i get the PIDs of ssh and synergy?<br>\n( i try to avoid ps aux | grep ... | awk ... | sed ... combinations, there has to be an easier way)</p>\n"},{"tags":["bash","sorting","filter"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":64,"score":3,"question_id":12955985,"title":"Filtering text file to get unique entries based on value in column 3","body":"<p>I know a bit of bash, but I am facing a problem to filter a file. I'll explain with an example : </p>\n\n<p><strong>Given a text file like the following (file1):</strong></p>\n\n<pre><code>10.10.12 bib24 Avenger goodone\n10.10.12 bib21 The_Dark_Knight_Rises betterone\n10.10.12 bib53 Avenger goodone\n10.10.12 bib35 Ice_Age wow\n11.10.12 bib53 TheAmazingSpiderMan nice\n11.10.12 bib54 TheAmazingSpiderMan nice\n11.10.12 bib01 Avenger goodone\n12.10.12 bib29 Avenger goodone\n12.10.12 bib11 TheAmazingSpiderMan nice\n12.10.12 bib03 Ice_Age wow\n12.10.12 bib98 Ice_Age wow\n14.10.12 bib12 Ice_Age wow\n</code></pre>\n\n<p><strong>This is the result I want (file2):</strong> </p>\n\n<pre><code>10.10.12 bib24 Avenger goodone\n10.10.12 bib21 The_Dark_Knight_Rises betterone\n10.10.12 bib35 Ice_Age wow\n11.10.12 bib53 TheAmazingSpiderMan nice\n</code></pre>\n\n<p><strong>So my question is :</strong> which command do I use to get this result (file2) ? (i.e. first entry of a movie, and not taking into account columns/fields 1, 2, and 4).</p>\n\n<p>I hope it's clear enough.</p>\n"},{"tags":["bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12979174,"title":"bash script to calculate average of several integer values","body":"<p>I need to write a bash script that adds the current values and returns the average. When I run the script <code>./average</code> I get the error message: <code>missing}</code>. I am not sure why the script isn't printing the average to screen when I run it. </p>\n\n<p>Here's what I have written thus far:</p>\n\n<pre><code>#! /bin/csh\nfor var in \"${sum[store1=100, store2= 75, store3= 74, store4= 100, store5= 100])}\"\n\ndo\ntotal= $sum(store1+store2+ store3+store4+store5))\n\n\necho $sum / 5\ndone\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12986950,"title":"How to execute diff on outputs of two scripts without creating temporary files?","body":"<p>I've got two programs: p3, p4 and one input file: 1.in. I want to check if p3 and p4 outputs are the same for 1.in input file and nothing that I write works. I want to do this without creating new files (I simply want to know how to do this to better know bash). I tried some naive combinations like:</p>\n\n<pre><code>diff (./p3 &lt; 1.in) (./p4&lt; 1.in)\n</code></pre>\n\n<p>But it doesn't work of course. Can anyone help? I'm using ubuntu 11.04.</p>\n"},{"tags":["linux","bash","command-substitution","variable-subsitution"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":10990000,"title":"Order of substitution in bash","body":"<p>I need to demonstrate the order in which command substitution, variable substitution and globbing occurs.  Any ideas on how to do it?</p>\n"},{"tags":["bash","io-redirection"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12986490,"title":"Bash: Explain the following the redirection cases","body":"<p>I am reading <a href=\"http://mywiki.wooledge.org/BashFAQ/002\" rel=\"nofollow\">BashFAQ/002</a> and came accross the following redirection cases. I have written my understanding with each case so please comment if I am wrong.</p>\n\n<p><strong>Case 1</strong></p>\n\n<pre><code>output=$(command 2&gt;&amp;1 &gt;/dev/tty)\n</code></pre>\n\n<p>Redirect <code>stderr</code> to <code>stdout</code> and than redirect <code>stdout</code> to <code>tty</code>. So, now both <code>stdout and stderr</code> redirects/output to terminal.</p>\n\n<p><strong>Case 2</strong></p>\n\n<pre><code>output=$(command 2&gt;&amp;1 &gt;/dev/null)\n</code></pre>\n\n<p>Redirect <code>stderr</code> to <code>stdout</code> and than redirect <code>stdout</code> to <code>/dev/null</code>. Although I don't understand the point of doing this because now both <code>stderr and stdout</code> are discarded.</p>\n\n<p><strong>Case 3</strong></p>\n\n<pre><code>output=$(command 3&gt;&amp;2 2&gt;&amp;1 1&gt;&amp;3-)\n</code></pre>\n\n<p>No, idea whatsoever whats happening here. I am not aware of <code>fd 3</code>.</p>\n\n<p><strong>Case 4</strong></p>\n\n<pre><code>exec 3&gt;&amp;1 \noutput=$(command 2&gt;&amp;1 1&gt;&amp;3)\nexec 3&gt;&amp;-\n</code></pre>\n\n<p>No, idea again.</p>\n\n<p>So, can someone explain to me in detail the case#3 and case#4 and point me to the relevant documentation.</p>\n"},{"tags":["bash","sed","grep"],"answer_count":2,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":2092,"score":0,"question_id":4517662,"title":"grep pipe with sed","body":"<p>This is my bash command</p>\n\n<pre><code>grep -rl \"System.out.print\" Project1/ | \n    xargs -I{} grep -H -n \"System.out.print\" {} |\n    cut -f-2 -d: |\n    sed \"s/\\(.*\\):\\(.*\\)/filename is \\1 and line number is \\2/\n</code></pre>\n\n<p>What I'm trying to do here is,I'm trying to iterate through sub folders and check what files contains \"System.out.print\" (using grep)\nusing 2nd grep trying to get file names and line numbers\nusing sed command I display those to console.\nfrom here I want to remove \"System.out.print\" with \"XXXXX\" how I can pipe sed command to this?\npls help me\nthanxx </p>\n"},{"tags":["bash","datetime"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12848280,"title":"Ensuring correct time format in bash","body":"<p>I have a script which asks the user the following question:</p>\n\n<pre><code>read -p \"Input time duration of simulation in HH:MM:SS format\" -e Time\n</code></pre>\n\n<p>Now how do I ensure the user entered the correct form for $Time\nbefore the variable $Time is actually used?</p>\n"},{"tags":["linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12850089,"title":"How to expand filenames that begins with a dash (-)","body":"<p>I know if you enclose a variable (that contains a filename) with double quotes, it will expand <code>$</code>, <code>*</code>s and backticks (<code>'</code>). For example <code>cmp \"$file1\" \"$file2\"</code> will be fine if both files contain <code>*</code>s at the beginning or anything else that's \"normal\". It won't work if the files have any number of dashes in the beginning though. Instead, it will try to do the literal meaning of -, treating it as an option. How do you get around this?</p>\n\n<p>This will work:</p>\n\n<pre><code>var1=*file.txt\nvar2=*file2.txt\n\ncmp \"$var1\" \"$var2\"\n</code></pre>\n\n<p>But</p>\n\n<pre><code>var1=-file.txt \ncmp \"$var1\" \"$var2\" \n</code></pre>\n\n<p>will say - is an unrecognized option. Any ideas?</p>\n"},{"tags":["regex","bash","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":101,"score":0,"question_id":12851091,"title":"Extracting numbers with sed without using repetition modifiers ( +, ?, {m} )","body":"<p>I have something like this:</p>\n\n<pre><code>plym    fury    77      73      2500\nchevy   nova    79      60      3000\nford    mustang 65      45      10000\nvolvo   gl      78      102     9850\nford    ltd     83      15      10500\nchevy   nova    80      50      3500\nfiat    600     65      115     450\nhonda   accord  81      30      6000\nford    thundbd 84      10      17000\ntoyota  tercel  82      180     750\nchevy   impala  65      85      1550\nford    bronco  83      25      9500\n</code></pre>\n\n<p>and I need to create a list that show all the cars that cost less than $10,000, except Chevys.  The list should be sorted from lowest cost to highest .</p>\n\n<p>I must use <code>sed</code> with quit option and regular expression (DO NOT use repetition)</p>\n\n<p>so far I have this</p>\n\n<pre><code>grep -iv \"chevy\" cars | sort -nk 5 | sed '/regex$/ q'\n</code></pre>\n\n<p>I'm having a problem with the regex WITHOUT repetition.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12849062,"title":"\"Simple\" arithmetic","body":"<p>Why can't I do this simple arithmetic operation and store it in a variable in bash shell? I've been struggling with this and playing around with <code>()</code> and <code>$</code> symbols but no luck.</p>\n\n<pre><code>read t\nlet r=$(5/9)*$($t-32)\n</code></pre>\n\n<p>I get <code>a: let: r=*: syntax error: operand expected (error token is \"*\")</code></p>\n"},{"tags":["linux","bash","shell","centos","redhat"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12851470,"title":"Bash \"source\" command returns the wrong concatenated string","body":"<p>I have a configuration file like this:</p>\n\n<pre><code>//filename : stat.conf\nLAS_SERVER=\"127.0.0.1\"\nLAS_PORT=3306\nLAS_USER=root\nLAS_PWD=root\nLAS_DB=test\nCONN_STR_LAS_DB=\"-h$LAS_SERVER -P$LAS_PORT -u$LAS_USER -p$LAS_PWD $LAS_DB\"\n</code></pre>\n\n<p>Now I run the <code>source</code> command like this:</p>\n\n<pre><code>$ source ./stat.conf\n\n$ echo $CONN_STR_LAS_DB\ntestot.0.1\n</code></pre>\n\n<p>You can see that the result is wrong. not in our expectation.</p>\n\n<p>In contrast, I can get the right result if I run the command in the shell like this:</p>\n\n<pre><code>$ LAS_SERVER=\"127.0.0.1\"\n$ LAS_PORT=3306\n$ LAS_USER=root\n$ LAS_PWD=root\n$ LAS_DB=test\n$ CONN_STR_LAS_DB=\"-h$LAS_SERVER -P$LAS_PORT -u$LAS_USER -p$LAS_PWD $LAS_DB\"\n$ echo $CONN_STR_LAS_DB\n-h127.0.0.1 -P3306 -uroot -proot test\n</code></pre>\n\n<p>This is the right result.</p>\n\n<p>So, my question is: why I got the wrong result when using \"source ./stat.conf\" ?</p>\n\n<p>I tested the same operation on another computer, I can get the right result. Is there anything that I missed to config on my computer?</p>\n\n<p>My OS is CentOS 5.</p>\n"},{"tags":["linux","bash","ssh","autologin"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":100,"score":2,"question_id":12937634,"title":"Run scripts remotely via SSH","body":"<p>I need to collect user information from 100 remote servers. We have public/private key infrastructure for authentication, and I have configured <code>ssh-agent</code> command to forward key, meaning i can login on any server without password prompt (auto login). </p>\n\n<p>Now I want to run a script on all server to collect user information (how many user account we have on all servers). </p>\n\n<p>This is my script to collect user info. </p>\n\n<pre><code>#!/bin/bash\n_l=\"/etc/login.defs\"\n_p=\"/etc/passwd\"\n\n## get mini UID limit ##\nl=$(grep \"^UID_MIN\" $_l)\n\n## get max UID limit ##\nl1=$(grep \"^UID_MAX\" $_l)\n\nawk -F':' -v \"min=${l##UID_MIN}\" -v \"max=${l1##UID_MAX}\" '{ if ( $3 &gt;= min &amp;&amp; $3 &lt;= max  &amp;&amp; $7 != \"/sbin/nologin\" ) print $0 }' \"$_p\"\n</code></pre>\n\n<p>I don't know how to run this script using ssh without interaction?? </p>\n"},{"tags":["bash","shell","unix","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12982326,"title":"Shell function, do action with one arg","body":"<p>I'm trying to do something simple, such as mkdir based on a given argument.</p>\n\n<pre><code>#!/bin/bash\n\nmake_picNum() {\n    arg1 = $1\n    echo \"Making picture folder $arg1...\"\n    echo \"mkdir picNum_$arg1\"\n    echo \"Created album folder\"\n}\n</code></pre>\n\n<p>I'm assuming I have some basic syntax flaws.\nThe current output/action of running this with any given number as an argument is nada.</p>\n"},{"tags":["arrays","bash","quotes"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12985178,"title":"Bash quoted array expansion","body":"<p>WHen I write a bash program I typically construct calls like follows:</p>\n\n<pre><code>declare -a mycmd=( command.ext \"arg1 with space\" arg2 thing etc )\n\n\"${mycmd[@]}\" || echo \"Failed: foo\"\n</code></pre>\n\n<p>Where <code>die foo</code> is a bash function that prints <code>Error foo</code> and exits.</p>\n\n<p>But if I want to be clear about the error reason, I want to print the failed command:</p>\n\n<pre><code>\"${mycmd[@]}\" || echo \"Failed: foo: ${mycmd[*]}\"\n</code></pre>\n\n<p>So the user can run the dead command and find out <em>why</em>.  However, quoting is lost on this pass - the Failed message arguments that have spaces or escaped characters are not printed in a way that can be cut-n-pasted and run.</p>\n\n<p>Does anyone have a suggestion for a compact way to fix this problem?</p>\n\n<hr>\n\n<p>I think the problem is the way bash deals with argument parsing for commands, and the way (builtin) echo handles arguments.  Another way of stating the problem is:</p>\n\n<p>How can I <em>print</em> the quotes around arguments with spaces in the following bash example (which must be run as a script, not in immediate mode):</p>\n\n<pre><code>#!/bin/bash\nmkdir qatest; cd qatest\ndeclare -a myargs=(1 2 \"3 4\")\ntouch \"${myargs[@]}\"\nls\necho \"${myargs[@]}\"\n</code></pre>\n\n<p>actual result:</p>\n\n<pre><code>1  2  3 4\n1 2 3 4\n</code></pre>\n\n<p>desired result</p>\n\n<pre><code>1  2  3 4\n1 2 \"3 4\"\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>1  2  3 4\n\"1\" \"2\" \"3 4\"\n</code></pre>\n\n<p>In few additional bash code characters.</p>\n\n<hr>\n\n<h2>Question closed: @camh answered it magnificently:</h2>\n\n<p>updated script:</p>\n\n<pre><code>#!/bin/bash\nmkdir qatest; cd qatest\ndeclare -a myargs=(1 2 \"3 4\")\ntouch \"${myargs[@]}\"\nls\necho \"${myargs[@]}\"\necho $(printf \"'%s' \" \"${myargs[@]}\")\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>1  2  3 4\n1 2 3 4\n'1' '2' '3 4'\n</code></pre>\n"},{"tags":["bash","shell","scripting","sed"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":12984215,"title":"Bash script using sed to delete specific line doesn't work","body":"<p>I am trying to write a bash script to use sed to delete some lines of a file. The line numbers are stored in another file in reverse order. \nThe command I am trying to do is the following:</p>\n\n<pre><code>sed -e '{lineNumber}d' ./file.txt\n</code></pre>\n\n<p>This is what I have so far but it's not working</p>\n\n<pre><code>while read -r line \ndo \n   sed -e \"/${line}d\" ./file.txt\ndone &lt; ./lineNum.txt\n</code></pre>\n\n<p>I am getting the following error:<br>\nsed: -e expression #1, char 4: unterminated address regex</p>\n"},{"tags":["bash","amazon-ec2"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":187,"score":0,"question_id":10526345,"title":"EC2 command line tools","body":"<p>I am trying to setup up Amazon's EC2 service and am having some trouble. </p>\n\n<p>I have downloaded the <a href=\"http://aws.amazon.com/developertools/351\" rel=\"nofollow\">Amazon EC2 API Tools</a>, which I've put in a folder <code>~/.ec2</code> along with my <code>.cert</code> and <code>.pem</code>files. </p>\n\n<p>When I attempt any command from <code>~/.ec2/bin</code> I get an error <code>/Users/zmjones/.ec2/bin/ec2-cmd: /usr/bin/env: bad interpreter: Operation not permitted</code>. I asked about this in <a href=\"http://stackoverflow.com/q/10525603/78845\">\"/usr/bin/env bad interpreter\"</a>.</p>\n\n<p>Now that I have removed the DOS line-endings using variants of this <code>mv /users/zmjones/.ec2/bin/ec2-add-keypair /users/zmjones/.ec2/bin/ec2-add-keypair.bak\ntr -d '\\r' &lt; /users/zmjones/.ec2/bin/ec2-add-keypair.bak &gt; /users/zmjones/.ec2/bin/ec2-add-keypair</code>, I've tried to execute some of the commands in <code>~/.ec2/bin</code> and have been unable to get it to work. </p>\n\n<p>I've gotten a permission denied error, which when I then use sudo, tells me that the environment variable <code>EC2_HOME</code> doesn't exist, while <code>echo $EC2_HOME</code> indicates that it does. Here is my <code>~/.bash_profile</code>.</p>\n\n<pre><code>PATH=/usr/bin:/bin:/usr/sbin:/sbin:/opt/local/bin:$PATH\nPATH=/opt/local/sbin:/usr/local/bin:/usr/x11/bin:/usr/texbin:$PATH\nPATH=/usr/local/texlive/2011/bin/x86_64-darwin:$PATH\nPATH=/Library/Frameworks/EPD64.framework/Versions/Current/bin:$PATH\nEC2_HOME=~/.ec2\nPATH=$EC2_HOME/bin:$PATH\nEC2_PRIVATE_KEY=`ls $EC2_HOME/pk-*.pem`\nEC2_CERT=`ls $EC2_HOME/cert-*.pem`\nJAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Home/\n\nexport PATH\n</code></pre>\n"},{"tags":["bash","awk"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1692,"score":3,"question_id":5400228,"title":"Use array variable in awk?","body":"<pre><code>A=(aaa bbb ccc)    \ncat abc.txt | awk '{ print $1, ${A[$1]} }'\n</code></pre>\n\n<p>I want to index an array element based on the $1, but the code above is not correct in awk syntax. Could someone help?</p>\n"},{"tags":["python","bash","ssh","stdin"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12979663,"title":"Any way to allow STDIN in python over ssh with heredocs?","body":"<p>I have a bash script that takes in 3 parameters. I need to ssh into a remote terminal and execute a python script there using those parameters.</p>\n\n<pre><code>    #!/bin/bash\n\n    ssh -t -t -c blowfish -XC someServer &lt;&lt; EOF\n      python -u pythonToExecute.py $1 $2 $3\n    EOF\n</code></pre>\n\n<p>The python script takes these parameters, and based on certain combinations, might ask the user to specify an action (using raw_input)</p>\n\n<p>The issue I'm having is that the python script hangs after any input is inserted (assuming an issue with STDIN).</p>\n\n<p>The python script works perfectly if I call python within the ssh call, but then I can't use the bash arguments.</p>\n\n<p>I CANNOT use Paramiko, fabric, or any other external modules/packages.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["bash","shell","sed"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":12588276,"title":"extract subtring, splitting at pattern, using sed in bash script","body":"<p>Solution:</p>\n\n<pre><code>#!/bin/bash\nfor f in *.mp3; do\n    d=\"${f% - *}\"\n    if [ -d $d ]; then\n        mv \"$f\" \"$d/\";\n    else \n        mkdir \"$d\" &amp;&amp; mv \"$f\" \"$d/\";\n    fi \ndone\n</code></pre>\n\n<hr>\n\n<p>I'm trying this:</p>\n\n<pre><code>$ echo \"foo - bar.ext\" | sed 's/\\('\" - \"'\\).*/\\1/' | sed 's/ - //'\n</code></pre>\n\n<p>which gives me just \"foo\". I guess there is a better way...Don't hit me hard, I'm new to sed. But now, how to include it in a loop like this:</p>\n\n<pre><code>#!/bin/bash\nfor f in *.ext; do\n    d=\"${f%.*}\"\n    #Extract Filename String before the \" - \" and write back to $d\n    mkdir \"$d\" &amp;&amp; mv \"$f\" \"$d/\";\ndone\n</code></pre>\n\n<p>Thanks in advance</p>\n\n<p><em>Further information:</em></p>\n\n<p>$f shall remain unchanged while a directory name, stored in $d, shall contain only the \"foo\"- part of a pattern matching \"foo - bar.ext\".</p>\n\n<p>Basically, a list of files, following the pattern \"foo - bar.ext\" should be moved to directories which are named \"foo\".</p>\n\n<p>E.g.:\nfoo1 - bar1.ext\nfoo1 - bar2.ext\nfoo1 - bar2.ext\n--> will be moved to subdir \"foo1\"</p>\n\n<p>anotherfoo - anotherbar.ext\n--> will be moved to subdir \"anotherfoo\"</p>\n"},{"tags":["bash","rsync","exitstatus"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12980779,"title":"Is there a succint way to test exit status of a set of commands in bash?","body":"<p>I have a simple script to pull data from a remote server as a process generates it using <code>rsync</code>:</p>\n\n<pre><code>while :\ndo\n    rsync -avz --remove-source-files -e ssh me@remote:path/to/foo* ./\n\n    rsync -avz --remove-source-files -e ssh me@remote:path/to/bar* ./\n\n    rsync -avz --remove-source-files -e ssh me@remote:path/to/baz* ./\n\n    rsync -avz --remove-source-files -e ssh me@remote:path/to/qux* ./\n\n    sleep 900 #wait 15 minutes, try again\ndone\n</code></pre>\n\n<p>If there are no files, <code>rsync</code> returns exit status 12 (apparently).  In the event that <strong>none</strong> of the above calls to <code>rsync</code> finds any data, I would like to break from the loop (the process generating the data probably exited).  To alleviate any confusion, I do <strong>not</strong> want to break from the loop if even 1 of the <code>rsync</code> processes succeed.</p>\n\n<p>Is there a succinct way to do that in bash? </p>\n"},{"tags":["linux","bash","unix","sudo","su"],"answer_count":4,"favorite_count":4,"up_vote_count":9,"down_vote_count":0,"view_count":2970,"score":9,"question_id":4598001,"title":"How do you find the original user through multiple sudo and su commands?","body":"<p>When running a script via sudo or su I want to get the original user.  This should happen regardless of multiple <code>sudo</code> or <code>su</code> runs inside of each other and specifically <code>sudo su -</code>.</p>\n"},{"tags":["linux","bash","unix","command-line","end-of-line"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":489,"score":1,"question_id":10629231,"title":"Convert all EOL (dos->unix) of all files in a directory and sub-directories recursively without dos2unix","body":"<p>How do I convert all EOL (dos->unix) of all files in a directory and sub-directories recursively <strong>without</strong> <code>dos2unix</code>? (I do not have it and cannot install it.)</p>\n\n<p>Is there a way to do it using <code>tr -d '\\r'</code> and pipes? If so, how?</p>\n"},{"tags":["bash","shell","osx","grep"],"answer_count":8,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":9612,"score":6,"question_id":1447625,"title":"List files with certain extensions with ls and grep","body":"<p>I just want to get the files from the current dir and only output .mp4 .mp3 .exe files nothing else.\nSo I thought I could just do this:</p>\n\n<pre><code>ls | grep \\.mp4$ | grep \\.mp3$ | grep \\.exe$\n</code></pre>\n\n<p>But no, as the first grep will output just mp4's therefor the other 2 grep's won't be used.</p>\n\n<p>Any ideas?</p>\n\n<p>PS, Running this script on Slow Leopard.</p>\n"},{"tags":["python","bash","stdin"],"answer_count":3,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":1398,"score":6,"question_id":7141331,"title":"Pipe input to Python program and later get input from user","body":"<p>Let's say I want to pipe input to a Python program, and then later get input from the user, on the command line.</p>\n\n<pre><code>echo http://example.com/image.jpg | python solve_captcha.py\n</code></pre>\n\n<p>and the contents of <code>solve_captcha.py</code> are:</p>\n\n<pre><code>import sys \nimage_url = sys.stdin.readline()\n\n# Download and open the captcha...\n\ncaptcha = raw_input(\"Solve this captcha:\")\n# do some processing...\n</code></pre>\n\n<p>The above will trigger a <code>EOFError: EOF when reading a line</code> error.</p>\n\n<p>I also tried adding a <code>sys.stdin.close()</code> line, which prompted a <code>ValueError: I/O operation on closed file</code>. </p>\n\n<p>Can you pipe information to <code>stdin</code> and then later get input from the user?</p>\n\n<p><strong>Note:</strong> This is a stripped down, simplified example - please don't respond by saying \"why do you want to do that in the first case,\" it's really frustrating. I just want to know whether you can pipe information to <code>stdin</code> and then later prompt the user for input.</p>\n"},{"tags":["bash","title","gnu-screen","xterm"],"answer_count":6,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":3883,"score":7,"question_id":1687642,"title":"Set screen-title from shellscript","body":"<p>Is it possible to set the <code>Screen-Title</code> using a shell script?</p>\n\n<p>I thought about something like sending the key commands <code>Strg+A Shift-A Name &lt;Enter&gt;</code></p>\n\n<p>I searched for about an hour on how to emulate keystrokes in an shell script, but didn't find the answer.</p>\n\n<p>Thanks for Help!</p>\n\n<p>Beerweasle</p>\n"},{"tags":["linux","excel","bash","script"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":101,"score":0,"question_id":12942209,"title":"Script to convert an output into an Excel sheet","body":"<p>I have file which contains the following data:</p>\n\n<pre><code>-------------------[ server10 ]-------------------\nuser1\nuser2\nuser99\nuser100\n-------------------[ server20 ]-------------------\nuser1\nuser2\nuser10\nuser4\n-------------------[ server30 ]-------------------\nuser10\nuser30\nuser40\n</code></pre>\n\n<p>I want to convert this output into Excel sheet, so that I can present ti to my management. Any idea how can do that???  </p>\n\n<p>I want the output into the following format in the Excel sheet:</p>\n\n<pre><code>Hostname            users\nserver10            user1\n                    user2\n                    user99\n                    user100\nserver20            user2\n                    user10\n                    user4 \n...\n...\n</code></pre>\n\n<p>Till here \"David\" helped me with Python (openpyxl). but here i have new column (Last Logon time) which i want to add in excel so here is the example.</p>\n\n<pre><code>    -------------------[ server10 ]-------------------\n    user1\n    never\n    user2\n    Oct 17, 2011\n    user99\n    Jan 01, 2007\n    user100\n    Feb 02, 2010\n    -------------------[ server20 ]-------------------\n    user1\n    never\n    user2\n    never\n    user10\n    jul 17, 2001\n    user4\n    Dec 25, 1999\n    -------------------[ server30 ]-------------------\n    user10\n    Aug 10, 2012\n    user30\n    never\n    user40\n    never\n</code></pre>\n\n<p>In excel it would be like.</p>\n\n<pre><code> Hostname            users           Last logon\n    server10            user1            never\n                        user2            Oct 17, 2011\n                        user99           ...\n                        user100          ...\n    server20            user2\n                        user10\n                        user4 \n    ...\n    ...\n</code></pre>\n\n<p>Notes: username could be different here i gave you example userX but it would be spatel, jim, eric etc...</p>\n"},{"tags":["bash","getopt"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12982441,"title":"What is the purpose of 'set -- $args' after getopt?","body":"<p>The usual example for using getopt in bash is as follow</p>\n\n<pre><code>args=`getopt abo: $*`\nerrcode=$?\nset -- $args\n</code></pre>\n\n<p>What does that last line achieve?</p>\n"},{"tags":["bash","cygwin","root","sudo"],"answer_count":5,"favorite_count":3,"up_vote_count":12,"down_vote_count":0,"view_count":11741,"score":12,"question_id":4090301,"title":"Root user/sudo equivalent in Cygwin?","body":"<p>I'm trying to run a bash script in Cygwin.  </p>\n\n<p>I get <code>Must run as root, i.e. sudo ./scriptname</code> errors.  </p>\n\n<p><code>chmod 777 scriptname</code> does nothing to help.  </p>\n\n<p>I've looked for ways to imitate sudo on Cygwin, to add a root user, since calling \"su\" renders the error <code>su: user root does not exist</code>, anything useful, and have found nothing.  </p>\n\n<p>Anyone have any suggestions?</p>\n\n<p><strong>Edit</strong>: I thought I should close this off, since it's still getting so many views. Basically, as far as I have found through quite a bit of searching, there is no effective way at this point to run a script as a sudo user in Cygwin. I'm hoping it's added in a later version of Cygwin, but for now there's nothing out there.</p>\n\n<p><strong>Much Later Edit</strong>: <a href=\"http://stackoverflow.com/users/413884/adamthewebman\">AdamTheWebMan</a> recently posted an <a href=\"http://stackoverflow.com/a/11833077/470925\">answer</a> that looks quite promising involving <a href=\"https://github.com/nu774/sudo-for-cygwin\" rel=\"nofollow\">sudo-for-cygwin</a>. I haven't accepted because I haven't had a chance to really check it out yet. But I might. I might actually accept an answer after all this time.</p>\n"},{"tags":["bash","expect"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12981831,"title":"expect vs. bash read","body":"<p>I'm trying to use <code>expect</code> to talk to a <code>bash</code> script, but I'm missing something. My script is:</p>\n\n<pre><code>#!/bin/bash\necho -n \"foo? \"\nread\necho $REPLY\n</code></pre>\n\n<p>and my <code>expect</code> script is:</p>\n\n<pre><code>#!/usr/bin/expect\nspawn ./script.sh\nexpect \"foo? \"\nsend \"bar\\r\\n\"\n</code></pre>\n\n<p>But I never see <code>bar</code> when I run the <code>expect</code> script. What am I missing here?</p>\n"},{"tags":["bash","curl"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":239,"score":0,"question_id":11135236,"title":"How can I branch a shell script based on an HTTP status code from curl?","body":"<p>I am writing a bash script for a backup.\nThe script is going to run a curl  and this is going to return a certain code.</p>\n\n<p>Depending on the result of this code:</p>\n\n<ul>\n<li>the script must continue running (if the return code is ok, like 200)\nor </li>\n<li>the script must return a not ok status (if the return code is not ok, like 400) and end the script without doing anything</li>\n</ul>\n\n<p>How can the return be read out from the curl ??\nSimple script for most of you but ... ;-)</p>\n"},{"tags":["linux","bash","shell","configuration","script"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12978898,"title":"Bash - Changing configuration file with sed","body":"<p>I've been having some problems with a shell script that changes a configuration file named \".backup.conf\".</p>\n\n<p>The configuration file looks like this:</p>\n\n<pre><code>inputdirs=(/etc /etc/apm /usr/local)\noutputdir=\"test_outputdir\"\nbackupmethod=\"test_outputmethod\"\nloglocation=\"test_loglocation\"`\n</code></pre>\n\n<p>My script needs to change one of the configuration file variables, and I've had no trouble with the last 3 variables.</p>\n\n<p>If I wanted to change variable \"inputdirs\" /etc/ to /etc/perl, what expression should I use?</p>\n\n<p>If I use echo with append, it will only append it to the end of the file.</p>\n\n<p>I've tried using sed in the following format:\n<code>sed -i 's/${inputdirs[$((izbor-1))]}/$novi/g' .backup.conf</code> where \"izbor\" is which variable I want to change from  inputdirs and \"novi\" is the new path (e.g. /etc/perl).</p>\n\n<p>So, with the following configuration file, and with variables <code>$izbor=1</code>and <code>$novi=/etc/perl</code> I should change the first variable <code>inputdirs=/etc</code> to <code>/etc/perl</code>\nand the variable inputdirs should finally look like <code>inputdirs=(/etc/perl /etc/apm /usr/local)</code></p>\n\n<p>Thank you for your help!</p>\n"},{"tags":["bash","variables","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12978621,"title":"passing variable to grep inside lookbehind group","body":"<p>i am trying to grep for an integer inside some text using a bash script:  </p>\n\n<pre><code>#!/bin/bash\nvar=string2    \ncat file.txt | grep -oP '(?&lt;=string1)(\\d.*)(&lt;=$var)'  \n</code></pre>\n\n<p>but the script outputs nothing.<br>\nif i put \"string2\" instead of \"$var\" i do get the expected result.<br>\ni guess i should escape the variable in some way, but i cant figure out how.<br>\ni tried double quotes, curly brackets, escaped double quotes, but nothing works.<br>\ni also searched stackoverflow man grep and google.<br>\nso what's the proper way to do that?<br>\nthanks</p>\n"},{"tags":["bash","ftp","backup","remote-server"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":94,"score":0,"question_id":12975588,"title":"Bash script to backup files to remote FTP. Deleting old files","body":"<p>I'm writing a bash script to send backups to a remote ftp server. The backup files are generated with a WordPress plugin so half the work is done for me from the start. </p>\n\n<p>The script does several things.</p>\n\n<ol>\n<li>It looks in the local backup dir for any files older than x and deletes them</li>\n<li>It connects to FTP and puts the backup files in a dir with the current date as a name</li>\n<li>It deletes any backup dirs for backups older than x</li>\n</ol>\n\n<p>As I am not fluent in bash, this is a mishmash of a bunch of scripts I found around the net. </p>\n\n<p>Here is my script: </p>\n\n<pre><code>#! /bin/bash \n\nBACKDIR=/var/www/wp-content/backups\n\n#----------------------FTP Settings--------------------#\n\nFTP=Y\n\nFTPHOST=\"host\"\nFTPUSER=\"user\"\nFTPPASS=\"pass\"\nFTPDIR=\"/backups\"\nLFTP=$(which lftp)      # Path to binary\n\n#-------------------Deletion Settings-------------------#\n\nDELETE=Y\n\nDAYS=3 # how many days of backups do you want to keep?\n\nTODAY=$(date --iso) # Today's date like YYYY-MM-DD\nRMDATE=$(date --iso -d  $DAYS' days ago') # TODAY minus X days - too old files\n\n#----------------------End of Settings------------------#\n\nif  [ -e $BACKDIR ]\nthen\n\nif  [ $DELETE = \"Y\" ]\nthen\n    find $BACKDIR -iname '*.zip' -type f -mtime +$DAYS -delete\n    echo \"Old files deleted.\"\nfi\n\nif  [ $FTP = \"Y\" ]\nthen\n\n    echo \"Initiating FTP connection...\"\n\n    cd $BACKDIR\n\n    $LFTP &lt;&lt; EOF\n    open ${FTPUSER}:${FTPPASS}@${FTPHOST}\n    mkdir $FTPDIR\n    cd $FTPDIR\n    mkdir ${TODAY}\n    cd ${TODAY}\n    mput *.zip\n    cd ..\n    rm -rf ${RMDATE}\n    bye\n\nEOF\n\necho \"Done putting files to FTP.\"\n\nfi\n\nelse\n    echo \"No Backup directory.\"\n    exit\nfi\n</code></pre>\n\n<p>There are 2 specific things I can't get done:</p>\n\n<ol>\n<li>The find command doesn't delete any of the old files in the local backup dir.</li>\n<li>I would like mput to only put the .zip files that were created today. </li>\n</ol>\n\n<p>Thanks in advance for the help.</p>\n"},{"tags":["windows","linux","gui","bash"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":431,"score":1,"question_id":2636233,"title":"GUI Application on Windows and Linux","body":"<p>I would like to export the Bash Shell Automation Script Project to a GUI Project which can run in both Windows and Linux. Which Programming Language would be better suited for this?</p>\n"},{"tags":["bash","sockets","daemon"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12976645,"title":"Linux daemon waiting for a socket connection","body":"<p>I would like to create a simple Linux daemon which will...</p>\n\n<ul>\n<li>open a tcp/ip server socket on localhost and specified port</li>\n<li>wait for a connection</li>\n<li>after someone connects, it will read the first line from the client's socket (ended by <code>\\n</code>)</li>\n<li>if the line is <code>foo</code>, it will run command <code>bar</code></li>\n<li>after the <code>bar</code> command is finished (or if the line wasn't <code>foo</code>), the daemon will wait for another connection and do the same (in infinite loop)...</li>\n</ul>\n\n<p>Is it possible to write this in bash? (And how?)</p>\n\n<p>Also, I would like to be able to start and stop the script with <code>service my-foobar-daemon start / stop</code> (on Ubuntu), how can I do that?</p>\n\n<p>Thanks :)</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12976625,"title":"Bash for loop syntax error with pipe","body":"<p>I'm trying this command</p>\n\n<pre><code>for x in qstat -u '*' | grep Eqw | awk {'print $1'}; do qmod -cj $x; done\n</code></pre>\n\n<p>and end up with this error:</p>\n\n<pre><code>-bash: syntax error near unexpected token `|'\n</code></pre>\n\n<p>I've tried wrapping my qstat command in various quotes and brackets to no avail, what am I doing wrong?</p>\n"},{"tags":["linux","debugging","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":225,"score":2,"question_id":8261602,"title":"How can I debug the bash prompt?","body":"<p>I've been editing <code>.bashrc</code> files and other init files, and it seems that I've left behind a few code snippets or two that are causing a few errors at the prompt (e.g. file missing), but I can't find them.</p>\n\n<p>How do I debug the prompt to find out what init scripts I've carelessly hacked?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12955253,"title":"Recursive wget won't work","body":"<p>I'm trying to crawl a local site with wget -r but I'm unsuccessful: it just downloads the first page and doesn't go any deeper. By the way, I'm so unsuccessful that for whatever site I'm trying it doesn't work... :)</p>\n\n<p>I've tried various options but nothing better happens. Here's the command I thought I'd make it with:</p>\n\n<pre><code>wget -r -e robots=off --user-agent=\"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4\" --follow-tags=a,ref --debug `http://rocky:8081/obix`\n</code></pre>\n\n<p>Really, I've no clue. Whatever site or documentation I read about wget tells me that it should simply work with wget -r so I'm starting to think my wget is buggy (I'm on Fedora 16).</p>\n\n<p>Any idea?</p>\n\n<hr>\n\n<p><em>EDIT</em>: Here's the output I'm getting for <code>wget -r --follow-tags=ref,a http://rocky:8081/obix/</code> :</p>\n\n<blockquote>\n  <p>wget -r --follow-tags=ref,a <code>http://rocky:8081/obix/</code>\n  --2012-10-19 09:29:51--  <code>http://rocky:8081/obix/</code> Resolving rocky... 127.0.0.1 Connecting to rocky|127.0.0.1|:8081...\n  connected. HTTP request sent, awaiting response... 200 OK Length: 792\n  [text/xml] Saving to: “rocky:8081/obix/index.html”</p>\n  \n  <p>100%[==============================================================================>] 792         --.-K/s   in 0s      </p>\n  \n  <p>2012-10-19 09:29:51 (86,0 MB/s) - “rocky:8081/obix/index.html”\n  saved [792/792]</p>\n  \n  <p>FINISHED --2012-10-19 09:29:51-- Downloaded: 1 files, 792 in 0s (86,0\n  MB/s)</p>\n</blockquote>\n"},{"tags":["bash","ssh","script"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":945,"score":1,"question_id":5200865,"title":"script calls a script over ssh => bash: ... : No such file or directory","body":"<p>I run a script which calls another script through a ssh connection.</p>\n\n<p>My script executes the following command: </p>\n\n<pre><code>ssh $cluster \"bash $create 2 2 $parts\"\n</code></pre>\n\n<p>where <code>$cluster</code> is the ssh string and <code>$create</code> is the absolute path of the bash script on the target machine. I run <code>ssh $cluster \"mkdir $serialized/$number\"</code> a few lines earlier, which works just fine.</p>\n\n<p>However this command returns me: </p>\n\n<pre><code>bash: /data/.../create.bash 1 2 8: No such file or directory\n</code></pre>\n\n<p>The file is on the machine and I can execute the command there, but I can't figure out how to do it from within of a script over ssh. I tried different command, always receive this exception.</p>\n\n<p>Thanks for your help!</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":12857637,"title":"How to compare to directory names and enter the one that is the highest version","body":"<p>I have two version of tcpdump in the same subdirectory.</p>\n\n<p>tcpdump-4.1.1 and tcpdump-4.3.0</p>\n\n<p>How can I write a bash function to return the highest version?</p>\n\n<p><strong><em>Edit:</em></strong></p>\n\n<p>I've got it working now. Here's the code.</p>\n\n<pre><code>#!/bin/bash\n# Function to get the latest version of the directory\nfunction getLatestDirVer {\n    latestDIR=$(ls -v $1* | tail -n 1)\n    stringLen=`expr length \"$latestDIR\"`\n    stringLen=$(($stringLen-1))\n    latestDIR2=`expr substr $latestDIR 1 $stringLen`\n    echo $latestDIR2\n}\n\n# Main function\necho $(getLatestDirVer tcpdump)\n</code></pre>\n\n<p>Here's the ouptut</p>\n\n<pre><code>[luke@machine Desktop]$ ./latestDIRversion.sh \ntcpdump-4.3.0\n</code></pre>\n\n<p>The tcpdump-4.1.1 and tcpdump-4.3.0 directories are in the Desktop directory.</p>\n"},{"tags":["bash","md5sum"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12974837,"title":"md5sum for hadoop is different then md5sum on unix.","body":"<p>So when I run md5sum file on my unix system it is different then the md5sum I get when the same file is on hadoop. </p>\n\n<p>I created the file in unix then used:</p>\n\n<pre><code>hadoop dfs -comyFromLocal testfile testfile\n</code></pre>\n\n<p>to put the file on hadoop. \nTo get the md5sum I run:</p>\n\n<pre><code>hadoop jar $HADOOP_HOME/hadoop-streaming.jar -input $input -output $output -mapper /bin/cat -reducer /user/bin/md5sum\nhadoop dfs -copyToLocal $output $md5file\n</code></pre>\n\n<p>I am getting different md5sum for the same file. Any advice on what is going on here? </p>\n"},{"tags":["linux","bash","cron"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12973705,"title":"Cronjob using the mail function","body":"<p>When I run this mail command from the terminal, there's no problems:</p>\n\n<pre><code>mail -s \"Test Mail\" user@example.com &lt; home/user/example.txt\n</code></pre>\n\n<p>When I add it to a bash script that mainly does this, there's no problems:</p>\n\n<pre><code>tmpString=$(ssh user@server `perl -s` &lt; /home/user/perlscript.pl 2&gt; errorfile.txt)\nmail -s \"Test Mail\" user@example.com &lt; home/user/example.txt\n</code></pre>\n\n<p>But, when I create a crontab to run the bash script, the mail never gets sent:</p>\n\n<pre><code>10 14 * * * /home/user/mybashscript \n</code></pre>\n\n<p>However, I do recieve an email from cronjob about the output. The email with the subject \"Test Mail\" never arrives.</p>\n\n<p>Anyone had this issue before?</p>\n\n<p>The trace:</p>\n\n<p>Ok, I'll just change some of personal related naming. The mail should be sent before the last echo, but it's not showing up in the trace?</p>\n\n<pre><code>+ . /home/user/.bashrc\n++ PS1=`\\u@\\h \\w$`\n++ TERM=vt100\n++PATH=/usr/sbin:/usr/bin:/bin\n++ ssh user@example `perl -s`\n+ scriptString=`$VAR` = ``\\``Build was OK`\\``;`\n+echo `$VAR1`= ``\\``Build was OK`\\``;`\n$VAR1 = `Build was OK`;\n+ [[ $VAR1 = `Build was OK`; == *\\B\\u\\i\\l\\d\\ \\f\\a\\i\\l\\e\\d* ]]\n+ echo\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["regex","bash","shell","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":6,"view_count":222,"score":-6,"question_id":10472096,"title":"I'm trying to write a shell script to replace a few lines of text in a file with a new value","body":"<p>The rules would be:</p>\n\n<ul>\n<li>Delete all lines except the last line which contains: <strong><em>link</em></strong> and <strong><em>href=</em></strong></li>\n<li>Replace the contents of whatever is after: <strong><em>href=</em></strong> and before: <strong><em>.css</em></strong> with: <strong><em>hello-world</em></strong></li>\n<li>Must maintain no quotes, single quotes or double quotes around the file name</li>\n</ul>\n\n<p>A few examples:</p>\n\n<h3>This is a source file with quotes:</h3>\n\n<p><code>&lt;link rel=\"stylesheet\" href=\"css/reset.css\"&gt;</code><br>\n<code>&lt;link rel=\"stylesheet\" href=\"css/master.css\"&gt;</code></p>\n\n<h3>This is the new source file:</h3>\n\n<p><code>&lt;link rel=\"stylesheet\" href=\"hello-world.css\"&gt;</code></p>\n\n<h3>This is a source file without quotes:</h3>\n\n<p><code>&lt;link rel=stylesheet href=css/reset.css&gt;</code><br>\n<code>&lt;link rel=stylesheet href=css/master.css&gt;</code></p>\n\n<h3>This is the new source file:</h3>\n\n<p><code>&lt;link rel=stylesheet href=hello-world.css&gt;</code></p>\n\n<p>It does not need to maintain the path of the file name. It however cannot use &lt;> brackets or spaces to determine what needs to be edited because the template language which is writing that line might not use brackets or spaces. The only thing that would remain consistent is <em>href=[filename].css</em>.</p>\n\n<p>My bash/sed/regex skills are awful but those tools seem like they will probably get the job done in a decent way? How would I go about doing this?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>To clarify, the end result would leave everything above and below the lines that contain link and href= alone. Imagine that the source file was an html file or any other template file like so:</p>\n\n<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Hello&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" href=\"css/reset.css\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"css/master.css\"&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;&lt;p&gt;...&lt;/p&gt;&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>It would be changed to:</p>\n\n<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Hello&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" href=\"css/hello-world.css\"&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;&lt;p&gt;...&lt;/p&gt;&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>The path of the CSS files might be anything too.</p>\n\n<pre><code>../foo/bar.css\nhttp://www.hello.com/static/css/hi.css\n/yep.css\nok.css\n</code></pre>\n\n<p>The new file's path would be supplied as an argument of the bash script so the regex should remove the path.</p>\n"},{"tags":["bash","grep"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":171,"score":4,"question_id":9144448,"title":"Odd grep behavior","body":"<p>Motivated by <a href=\"http://stackoverflow.com/questions/9144090/interesting-grep-match-in-bash/9144139#comment11495596_9144139\"> this </a> question, can anyone explain the following behavior?</p>\n\n<pre>\n$ echo \"-uus\" | grep -wo '[0]&#42;' && echo matched\n-uus\n\nmatched\n$ echo \"-uus\" | grep -o '[0]&#42;' && echo matched\nmatched\n$ grep --version | sed 1q\ngrep (GNU grep) 2.5.1\n</pre>\n\n<p>In particular, why does the second grep succeed, but generate no output?  And why does the first command have two lines of output?  I can understand the second line of output, but I do not understand the first.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12971309,"title":"String manipulation, optional character","body":"<p>With <code>grep</code>, you can use a question mark <code>?</code> to signify an optional character, that is a character that is to be matches 0 or 1 times.</p>\n\n<pre><code>$ foo=qwerasdf\n\n$ grep -Eo fx? &lt;&lt;&lt; $foo\nf\n</code></pre>\n\n<p>The question is does Bash String Manipulation have a similar feature? Something like</p>\n\n<pre><code>$ echo ${foo%fx?}\n</code></pre>\n"},{"tags":["bash","shell","script","ftp","find"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":12760494,"title":"Find file and send it to ftp - SOLVED","body":"<p>I am new in bash scripting and I have to write a script that finds the newest .mpg file in directory and then sends it to a ftp server. So far I found command that find my file.</p>\n\n<pre><code>#! /bin/bash\n\nfind /home/user/directory -type f -mmin -50 -name *.mpg \\( ! -regex \".*/\\..*\" \\)\n</code></pre>\n\n<p>This works but I can't figure out how to send the output of that command to ftp server. I've read that I have to use variables, but I can't understand them so far.</p>\n"},{"tags":["bash","symlink"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12957016,"title":"Symbolic link catch user input","body":"<p>I want to create a symbolic link with the name <code>xyz</code>, and then catch the input the user gives including the symbolic link name. </p>\n\n<p>Example: If the user types: </p>\n\n<pre><code>xyz load aab\\1.0.5\n</code></pre>\n\n<p>I want to have <code>xyz load aab\\1.0.5</code> as a string that I can do more stuff with. </p>\n\n<p>Why do I ask? (things you can skip reading)</p>\n\n<p>In this case I will compare parts of this string with the names of directories and either</p>\n\n<ol>\n<li>give the user a warning if there is no match, or </li>\n<li>execute the command as it otherwise would.</li>\n</ol>\n\n<p>What I want to do is to hijack the <code>module</code> command.</p>\n\n<p>Edit: I suppose I should be using alias.</p>\n\n<p>Edit2: Clarification</p>\n\n<p>The exact thing I want to do is this: when a user types <code>module load program</code> or <code>module load program/2.3.3</code>. I don't want the command to execute before I know if the version they are requesting is available for the specific platform. I can check what versions are available by looking in the folder <code>/app/firefox/.sys/@sys/</code>.</p>\n\n<p>The underlying \"problem\" is that <code>module</code> is set up in a way that makes all modules available for SLES 10 and 11 and 32bit and 64bit so in some cases users try to load a version that is not available on their platform.</p>\n\n<p>I have now realized a problem: if they do not type version, then it will pick the default version. But I don't know how to easily find out the default version using a script. grepping <code>module appname avail</code> to get the version that has \"(default)\" in it does not work since it is something else then module that are printing the result. For example <code>module firefox avail &gt;&gt; result.text</code> gives an empty file.</p>\n"},{"tags":["java","linux","bash","unix","command-line"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":91,"score":2,"question_id":12970741,"title":"Executing Linux Command in Java","body":"<p>I'm trying to execute the following Command in Java in order to kill the spawned process of bash script which is executed through java : </p>\n\n<pre><code>kill $(pgrep -P $(pgrep -P 5537)) \n</code></pre>\n\n<p>I'm using apache Commons Exec Commandline to build the Command but it's no different to using ProcessBuilder here. So here is what I have so far:</p>\n\n<pre><code>CommandLine cmdLine = new CommandLine(\"bash\");\ncmdLine.addArgument(\"-c\");\ncmdLine.addArgument(\"kill $(pgrep -P $(pgrep -P \"+pid+\"))\");\n</code></pre>\n\n<p>I get the error</p>\n\n<pre><code>bash: $'kill 7940\\n7941\\n7942\\n7943': Command not found.\n</code></pre>\n\n<p>Normally I would now try to get the newlines out of the Command but it also doesn't work to kill just a single process because then I get the error :</p>\n\n<pre><code>bash: kill 7980: Command not found.\n</code></pre>\n\n<p>One the one hand I need to use bash to use the variables and on the other hand I can't use it because kill can't be executed with it...</p>\n"},{"tags":["regex","bash","file-extension"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12969479,"title":"Using regex in find command for multiple file types","body":"<p>I am currently using   </p>\n\n<pre><code>find . -name '*.[cCHh][cC]' -exec grep -nHr \"$1\" {} ; \\\nfind . -name '*.[cCHh]' -exec grep -nHr \"$1\" {} ;\n</code></pre>\n\n<p>to search for a string in all files ending with .c, .C, .h, .H, .cc and .CC listed in all subdirectories. But since this includes two commands this feels inefficient.</p>\n\n<p>How can I use a single regex pattern to find .c,.C,.h,.H,.cc and .CC files?</p>\n\n<p>I am using bash on a Linux machine.</p>\n"},{"tags":["mysql","bash","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12968715,"title":"MySQL import from stdin","body":"<p>I am generating a csv in stdout using awk. \nIs there a way to directly import that contents in mysql without putting it to file?</p>\n"},{"tags":["linux","bash","coredump","tcsh"],"answer_count":6,"favorite_count":24,"up_vote_count":43,"down_vote_count":0,"view_count":51493,"score":43,"question_id":17965,"title":"generate a core dump in linux","body":"<p>I have a process in linux that's getting a segmentation fault.  How can I tell it to generate a core dump when it fails?</p>\n"},{"tags":["regex","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":12962875,"title":"How to delete string between two HTML tags in one row using bash script","body":"<p>I have been working on some simple <code>bash</code> script recently, which parses specific data from webpages. I have used <code>tr '\\r\\n' ' ' &lt;file1.txt &gt;file2.txt</code> to make sure, all extracted data from page is stored in <code>file1.txt</code> in one row. So then I need to match all strings between <code>&lt;th&gt;...&lt;/th&gt;</code> tags in this line and delete them or replace with <code>' '</code> sign.\nSo here is some expamle code:</p>\n\n<pre><code>    &lt;td&gt;Abaktal hm&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;th&gt;Package&lt;/th&gt; &lt;td&gt;flm 10x400 mg&lt;/td&gt; &lt;th&gt;Indesit&lt;/th&gt;\n</code></pre>\n\n<p>I have used <code>sed</code> and tried something like</p>\n\n<pre><code>    sed -i 's/\\&lt;th\\&gt;.*?\\&lt;\\/th\\&gt;/ /g' output.txt\n</code></pre>\n\n<p>But it didn't work. I think problem is in <code>?</code> sign. It works with <code>?</code> sign in regular expressions, but probably not in <code>bash</code>.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12967232,"title":"Repeatedly run a shell command until it fails?","body":"<p>I've written a <a href=\"http://en.wikipedia.org/wiki/Fuzz_testing\" rel=\"nofollow\">fuzzy</a> test that fails unreliably. I've added some debug code, but now I want to run the test until it fails so I can gather the debug output.</p>\n\n<p>I've setup the test so I can run it using:</p>\n\n<pre><code>./runtest\n</code></pre>\n\n<p>My current solution is to write an <code>untilfail</code> script:</p>\n\n<pre><code>#!/bin/bash\n$@\nwhile [ $? -eq 0 ]; do\n    $@\ndone\n</code></pre>\n\n<p>Then use it:</p>\n\n<pre><code>untilfail ./runtest\n</code></pre>\n\n<p>Is there a simpler solution?</p>\n"},{"tags":["bash","awk","solaris","nawk"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":65,"score":2,"question_id":12814676,"title":"nawk add column to each line","body":"<p>I am trying to add column with the name of the file into the end of each line.\nEvery line has a </p>\n\n<pre><code>Name Surname   some_number\n</code></pre>\n\n<p><code>Name</code> and <code>surname</code> are separated with space and <code>number</code> is separated from <code>Surname</code> by tab.</p>\n\n<p>I am doing it with this script but it does not work, it only adds filename to start of the line.</p>\n\n<pre><code>$1=temp\nnawk -v F'\\t' -v OFS='\\t' '{$2=$2\" \"$temp} 1' $temp\n</code></pre>\n\n<p>PS OS is SunOS.</p>\n"},{"tags":["bash","variables","escaping","user-input","forward-slash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12965857,"title":"How can I escape forward slashes in a user input variable in bash?","body":"<p>I'm working on a script to make setting up a Statamic site more efficient. The problem I'm running into is that the variable I'm using to replace a string in a file has unescaped forward slashes and is user input. How can I make sure that <code>_site_url: http://statamic.com</code> will become <code>_site_url: http://example.com</code>?</p>\n\n<p>The code below will work as long as there are no forward slashes present.</p>\n\n<pre><code>echo \"What's your site URL? Don't forget the protocol (ex. http://)!\"\nread -e SITE_URL\n\necho \"%s/_site_url: http:\\/\\/statamic.com/_site_url: $SITE_URL/g\nw\nq\n\" | ex _config/settings.yaml\n</code></pre>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":65,"score":2,"question_id":12819632,"title":"Why is a variable changed within a loop unchanged outside the loop","body":"<p>I use <code>command | awk '{ print $1; }' | while read val ; do</code> to loop through the command output. Recently I wanted to calculate the sum, and I discovered some strange behaviour in <code>bash</code>:</p>\n\n<p><strong>content of test.txt</strong></p>\n\n<pre><code>100\n200\n300\n</code></pre>\n\n<p><strong>content of test.sh</strong></p>\n\n<pre><code>sum='0'\ncat test.txt | awk '{ print $1; }' | while read val ; do\n        sum=`expr $sum + $val`\n        echo \"sum is now: $sum\"\ndone\n\necho \"FINAL SUM: $sum\"\n</code></pre>\n\n<p><strong>output from executing test.sh</strong></p>\n\n<pre><code>sum is now: 100\nsum is now: 300\nsum is now: 600\nFINAL SUM: 0\n</code></pre>\n\n<p>the final sum should be 600. What can I do to fix this?</p>\n"},{"tags":["mysql","bash","unix"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12963155,"title":"Unexpected End of File in a Bash script?","body":"<p>This is just a little script to add a user to an e-mail MySQL database, assign an alias to him if an argument is defined, send a welcome email to the user and send e-mails to everybody else notifying about the newcomer. But everytime I try to run the script, I only get the message <code>UNEXPECTED END OF FILE</code>. Here's the script:</p>\n\n<pre><code>#! /bin/bash\n\nUSER=$1\nSECTOR=$2\n\nif [ -z \"${SECTOR}\" ];\nthen\n   mysql --host=localhost --user=verysecretdatabaseuser --password=verysecretdatabasepass mydatabase &lt;&lt; EOF\n   insert into users (email,name,uid,gid,homedir,maildir,crypt,force_change_pwd) values(\"${USER}@example.com.br\",\"${USER}\",1001,1001, \"/var/mail/${USER}/\",\"/var/mail/${USER}/.maildir/\",ENCRYPT(\"verysecretdefaultpass\"), \"yes\" );\n   EOF\nelse\n   mysql --host=localhost --user=verysecretdatabaseuser --password=verysecretdatabasepass mydatabase &lt;&lt; EOF\n   insert into users(email,name,uid,gid,homedir,maildir,crypt,force_change_pwd)  values(\"${USER}@example.com.br\",\"${USER}\",1001,1001,\"/var/mail/${USER}/\",\"/var/mail/${USER}/.maildir/\",ENCRYPT(\"verysecretdefaultpass\"), \"yes\" ); EOF\n   insert into alias(alias,destination) values (\"${SECTOR}@example.com.br\", \"${USER}@example.com.br\");\n   EOF\nfi\n\n# send e-mail so my postfix can create the mail directories \n/usr/sbin/sendmail -f me@example.com.br \"${USER}@example.com.br\" &lt;&lt; EOF\nSubject: Bem Vindo!\nSeja bem vindo ao Servidor de e-mails da Empresa! Com muito orgulho hospedamos nosso e-mail        em nosso próprio servidor. Em caso de dúvidas contacte &lt;me@example.com.br&gt;\n.\nEOF\n\n# fetching everyone already in the database\nusers=`mysql --user=myverysecretuser --password=myverysecretpass -s -N -e \"SELECT myverysecretfield FROM    myverysecretdatabase.myverysecretusertable\"`\n\n#sending an e-mail to each user\nfor user in $users\ndo\n   echo \"${user}\"\n   /usr/sbin/sendmail -f me@example.com.br \"${user}\" &lt;&lt; EOF\n   Subject: Funcionario novo!\n   Prezados, deem as boas vindas ao funcionario novo \"${USER}\" que acabou de entrar no  departamento de \"${SECTOR}\". Para se comunicar com o funcionario novo, basta enviar e-mails   para: \"${USER}@example.com.br\". O funcionario novo tambem recebera e-mails que forem   enviados para \"${SECTOR}@example.com.br\".\n   .\n   EOF\ndone\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["perl","bash","awk","pair"],"answer_count":7,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":188,"score":4,"question_id":12963783,"title":"Removing repeated pairs from a very big text file","body":"<p>I have a very big text file (few GB) that has the following format:</p>\n\n<pre><code>1 2\n3 4\n3 5\n3 6\n3 7\n3 8\n3 9\n</code></pre>\n\n<p>File is already sorted and double lines  were removed. There are repeated pairs like '2 1', '4 3' reverse  order that I want to remove. Does anybody have any solution to do it in a very resource limited environments, in BASH, AWK, perl or any similar languages?  I can not load the whole file and loop between the values.  </p>\n"},{"tags":["linux","bash","script","expect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12959748,"title":"bash return control to user from expect","body":"<p>I am writing a bash script with expect in it. </p>\n\n<pre><code>#!/bin/bash\nIP1=\"a.b.c.d\"\nIP2=\"e.f.g.h\"\nHOST=\"xyz.com\"\nKEY=\"/path/to/key/file\"\nPORT=\"sshport\"\n/usr/bin/expect &lt;&lt; EOD\n    spawn ssh -p $PORT -i $KEY $HOST\n    expect \"*#\"\n    send \"sh somescript\\r\"\n    expect \"Prompt from script:\"\n    send \"$IP1\\r\"\n    expect \"Second Prompt from script\"\n    send \"$IP2\\r\"\n    interact\n\nEOD\n</code></pre>\n\n<p>I am expecting to get the control back so that user can interact with the script after sending IP2 , but the script terminates, logs out of session from remote host. Any pointers  please ? </p>\n\n<p>Thank you \nAmit</p>\n"},{"tags":["bash","shell","script","compare","pattern-matching"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":142,"score":1,"question_id":12913742,"title":"Bash script to delete and match folder names to partial file names in different directories","body":"<p>[EDIT] Problem solved. Script updated below. Thanks to everyone for the help. Had a few mods i needed to do to make it all work with spaces in folder names and non empty folders.</p>\n\n<p>Really having a hard time with this one.</p>\n\n<p>When a file is downloaded, my system creates two things: </p>\n\n<ol>\n<li><p>a file (created in my \"Jobs\" directory), e.g.</p>\n\n<ul>\n<li>Johns.Pizza.Place.5489231.job</li>\n<li>Marks.Hair.Salon.NY.888.job</li>\n<li>Rachels.Bike.and.Boat.Shop.11122287865.job</li>\n</ul></li>\n<li><p>a folder with the name of the file (created in my \"Temp\" directory), e.g.</p>\n\n<ul>\n<li>Johns.Pizza.Place</li>\n<li>Marks.Hair.Salon.NY</li>\n<li>Rachels.Bike.and.Boat.Shop</li>\n</ul></li>\n</ol>\n\n<p>As you can see, the folder names always match part of the filenames but each file is always appended with a random number of length and then the extension (which is '.job'). </p>\n\n<p>What I want to do is be able to run a script that tries to </p>\n\n<ol>\n<li><p>Match the the folder names in the directory of files BUT is only doing a partial match since the files have both a random number and extension added, then </p></li>\n<li><p>Deletes those folders when it DOES NOT FIND an associated file (I am using Hazel to delete the files after certain actions). If a matching files is found for a folder, I don't want that folder deleted.</p></li>\n</ol>\n\n<p>Here is what I tried but I know it's incomplete. Obviously I'm trying to pull just folder name in path to match with partial filenames where I have removed the extension but I am not sure how to also remove the random number string.</p>\n\n<p>[EDIT]: Final working script below</p>\n\n<pre><code>#! /bin/sh\n\nMainDir=\"/Users/Dhy/Desktop/Temp Files/1. All Files/\"\nJobDir=\"/Users/Dhy/Documents/All Jobs/\"                             \n\nfind \"$MainDir\"* -maxdepth 0 -type d | while read FolderName; do\nSuffixName=$(basename \"${FolderName}\");\n    preserve=''\n    for file in \"$JobDir\"*.job; do\n        if [[ $file\\.[0-9]+ =~ $SuffixName ]]; then \n            preserve='on'\n        break \n        fi\n    done\n\n    if [ -z $preserve ]; then\n        rm -rf \"$MainDir$SuffixName\"\n    fi\ndone\n</code></pre>\n\n<p>Any help is greatly appreciated.</p>\n"},{"tags":["git","bash","bash-completion"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":963,"score":0,"question_id":11662735,"title":"Git completion and PS1 not working: \"__git_ps1: command not found\" on \"sudo -s\" or \"sudo su\" on Ubuntu 12.04","body":"<p>I installed git and git-flow completion adding these line to .bashrc of root and a normal_user on a Ubuntu 12.04 machine:</p>\n\n<pre><code>source /etc/git-completion.bash\nsource /etc/git-flow-completion.bash\nGIT_PS1_SHOWUPSTREAM=\"verbose\"\nGIT_PS1_SHOWDIRTYSTATE=true\nPS1='\\[\\033[32m\\]\\u@\\h\\[\\033[00m\\]:\\[\\033[34m\\]\\w\\[\\033[31m\\]$(__git_ps1)\\[\\033[00m\\]\\$ '\n</code></pre>\n\n<p>When I log as root or normal_user git completion works. However if I use \"sudo -s\" or \"sudo su\" git completion is not working and I continually get \"__git_ps1: command not found\" each time I press return. \nI tried to remove the \"source\" commands and use \"apt-get install bash-completion\" (bash-completion was already installed). So even without the 2 source I get the exact same behavior. </p>\n\n<p>Anybody knows what the problem is and how to make it work?</p>\n"},{"tags":["linux","bash","shell","variables","scripting"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1915,"score":1,"question_id":10515964,"title":"Counter increment in Bash loop not working","body":"<p>I have the following simple script where I am running a loop and want to maintain a COUNTER. I unable to figure out why the counter is not updating. Is it due to subshell thats getting created? How can I potentially fix this</p>\n\n<pre><code>#!/bin/bash\nWFY_PATH=/var/log/nginx\nWFY_FILE=error.log\nCOUNTER=0\ngrep 'GET /log_' $WFY_PATH/$WFY_FILE | grep 'upstream timed out' | awk -F ', ' '{print $2,$4,$0}' | awk '{print \"http://domain.com\"$5\"&amp;ip=\"$2\"&amp;date=\"$7\"&amp;time=\"$8\"&amp;end=1\"}' | awk -F '&amp;end=1' '{print $1\"&amp;end=1\"}' |\n(\nwhile read WFY_URL\ndo\n    echo $WFY_URL #Some more action\n    COUNTER=$((COUNTER+1))\ndone\n)\n\necho $COUNTER # output = 0\n</code></pre>\n\n<p>Thanks\nSparsh</p>\n"},{"tags":["bash","ubuntu","reload"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":94,"score":1,"question_id":12933849,"title":"make a program reload an already opened file on file change","body":"<p>I need to play a <code>.swf</code> file then when the file is changed to reload the player with new content. Sadly, my program of choice does not do monitor files for changes. I came up with a bit convoluted solution:</p>\n\n<pre><code>sudo apt-get install incron gtk-gnash\necho \"my_username\" | sudo tee -a /etc/incron.allow # allow my_username to run incron\nincrontab -e\n</code></pre>\n\n<p>add the following to incrontab:</p>\n\n<pre><code>/home/my_username/path/myfile.swf IN_MODIFY /home/my_username/path/run.sh\n</code></pre>\n\n<p>and the <code>run.sh</code> contains: ( also <code>chmod 700 run.sh</code>)</p>\n\n<pre><code>#!/bin/sh\nkillall gtk-gnash\ngtk-gnash /home/my_username/path/myfile.swf\n</code></pre>\n\n<p>As you can see this is far from elegant. How else could I go about this?</p>\n\n<p>This is on Ubuntu 12.04 if that matters for you. This is a duplicate of my own <a href=\"http://askubuntu.com/questions/201708/swf-player-aware-of-file-changes/202040\">question</a> on askubuntu</p>\n\n<p><strong>EDIT:</strong> clarification, I chose to use gtk-gnash, a standalone player, this is not required, a web browser would do too but seems not necessary</p>\n"},{"tags":["bash","shell","ksh","zsh","sh"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":104,"score":4,"question_id":8122779,"title":"Is it necessary to specify traps other than EXIT?","body":"<p>I see a lot of shell scripts that do:</p>\n\n<pre>\ntrap cmd 0 1 2 3 13 15 # EXIT HUP INT QUIT PIPE TERM\n</pre>\n\n<p>In every shell I have access to at the moment, all the traps other than 0 are redundant, and cmd will be executed upon receipt of a signal if the trap is simply specified:</p>\n\n<pre>\ntrap cmd 0\n</pre>\n\n<p>Is the latter specification sufficient, or do some shells require the other signals to be specified?</p>\n"},{"tags":["bash","mount"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12952686,"title":"How to modify the /etc/mtab entry created by a custom mount helper such that a custom `umount` is used?","body":"<p>In response to my question <a href=\"http://unix.stackexchange.com/q/52078/863\">How to mount a cryptsetup container just with <code>mount</code>?</a> over at unix.SE, I realized that <code>mount -t luks</code> will call the script <code>mount.luks</code>, which currently looks like this:</p>\n\n<pre><code>#!/bin/bash\nset -e\nMAPPER=$(mktemp -up /dev/mapper)\ncryptsetup luksOpen $1 $(basename $MAPPER)\nshift\nmount $MAPPER $* || cryptsetup luksClose $(basename $MAPPER)\n</code></pre>\n\n<p>That is, it determines an unused mapper name that <a href=\"https://code.google.com/p/cryptsetup/\" rel=\"nofollow\">cryptsetup</a> can use to mount a LUKS/dm-crypt encrypted device (I know the <code>$*</code> is dangerously prone to recursion if subtypes are involved, consider this a prototype) after decrypting it (after prompting for the passphrase).</p>\n\n<p>The problem is, the resulting entry of <code>mount -t luks /dev/hda /mnt/decrypted</code> in <code>/etc/mtab</code> will look something like</p>\n\n<pre><code>/dev/mapper/tmp.mpI5ClExf8 on /mnt/decrypted type ext3 (rw,relatime,errors=continue,data=writeback)\n</code></pre>\n\n<p>such that <code>umount /dev/hda</code> will fail and <code>umount /mnt/decrypted</code> will only unmount the mapper but leave the encrypted device open. The mapper is also rather irrelevant. What I'd like to achieve is having an entry à la</p>\n\n<pre><code>/dev/hda on /mnt/decrypted type luks.ext3 (rw,relatime,errors=continue,data=writeback,mapper=/dev/mapper/tmp.mpI5ClExf8)\n</code></pre>\n\n<p>such that <code>umount</code> will call <code>umount.luks</code>, which may be something like</p>\n\n<pre><code>#!/bin/bash\nset -e\numount $1\ncryptsetup luksClose $MAPPER\n</code></pre>\n\n<p>(Again, prototype, this would only treat the <code>umount /mnt/decrypted</code> call correctly and <code>MAPPER</code> needs to be obtained from the mount option)</p>\n\n<p>So, how does <code>mount.luks</code> have to be modified? Directly modifying <code>/etc/mtab</code> is certainly a bad idea. (Can e.g. <code>mount -n</code> and <code>mount -f</code> achieve this somehow?)</p>\n"},{"tags":["bash","windows-7","ssh","cygwin"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":129,"score":1,"question_id":12206190,"title":"cygwin ssh shortcut from windows desktop","body":"<p>I have multiple servers that I need to remote into.\nI prefer Cygwin over Putty to do so.</p>\n\n<p>Anyhows - the process of opening my cool Mintty window and then typing the following commands takes too long.\nPS - I am using a \"key\" authentication to these servers.</p>\n\n<p>First, I double Click Cygwin Terminal shortcut from my windows desktop.</p>\n\n<p>Then once the terminal session has booted up, from the command prompt I type the following -</p>\n\n<pre><code>$ eval `ssh-agent`\n$ ssh-add\n$ ssh &lt;username&gt;@&lt;servername&gt;\n</code></pre>\n\n<p>Please keep in mind that my 'servername' is variable.  In fact I have about 10 different server names that could potentially be inserted there - Hence my need for 10 different shortcuts.  I would prefer to double click on something from my desktop that will fire up my Mintty and automatically execute the above bash shell commands.</p>\n\n<p>Does anyone have or can recommend a nice/elegant solution to do this?</p>\n\n<p>(I have a feeling that it has something to do with the Target attribute of the Windows short-cut icon that I am clicking on.)</p>\n"},{"tags":["regex","bash","sed"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":560,"score":0,"question_id":7870264,"title":"Bash to find lines with exact one word?","body":"<p>I'm trying to write a bash script that takes a file name, and return lines that have one word. Here is sample text:</p>\n\n<pre><code>This has more than one word\nThere\nis exactly one word in above line.\n         White-space\nin the start of the above line doesn't matter.\nNeed-some-help.\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>There\n         White-space\nNeed-some-help.\n</code></pre>\n\n<p>I'm looking into using a combination SED and Regex.</p>\n\n<p>Note: I cannot using anything else (it has to be a bash script, without custom modules), so suggesting that wouldn't help.</p>\n"},{"tags":["python","bash","ssh","paramiko"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12960647,"title":"nested terminal sessions using paramiko ssh client","body":"<p>How to properly handle situation when user wants to start over ssh new terminal session - executing <code>exec_command('bash')</code>. Currently while doing it this way, function hangs out.</p>\n"},{"tags":["bash","terminal"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12958811,"title":"Copy text from one line and create a new line with that next under it","body":"<p>I have a text file in which I want to find all of ID:= \"abc123\" when it finds that I want it to take that value of abc123 and create a new line and have a set string, newId:= \"abc123 How can I do this within terminal?</p>\n\n<p>I'd like to use bash, below are some examples, find the string '\"ID\": \", copy the value (abc123) and make a new line with this data.</p>\n\n<pre><code>\"ID\": \"abc123\"\n\"newID\": \"abc123\"\n</code></pre>\n"},{"tags":["bash","script"],"answer_count":4,"favorite_count":0,"up_vote_count":10,"down_vote_count":1,"view_count":12029,"score":9,"question_id":6348902,"title":"How can I add numbers in a bash script","body":"<p>I have this bash script and I had a problem in line 16.\nHow can I take the previous result of line 15 and add\nit to the variable in line 16?</p>\n\n<pre><code>#!/bin/bash\n\nnum=0\nmetab=0\n\nfor ((i=1; i&lt;=2; i++)); do      \n    for j in `ls output-$i-*`; do\n        echo \"$j\"\n\n        metab=$(cat $j|grep EndBuffer|awk '{sum+=$2} END { print sum/120}') (line15)\n        num= $num + $metab   (line16)\n    done\n    echo \"$num\"\n done\n</code></pre>\n"},{"tags":["bash","awk","grep","less"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":87,"score":2,"question_id":12958313,"title":"Is it possible to output the contents of more than one stream into separate columns in the terminal?","body":"<p>For work, I occasionally need to monitor the output logs of services I create. These logs are short lived, and contain a lot of information that I don't necessarily need.  Up until this point I've been watching them using:</p>\n\n<pre><code>grep &lt;tag&gt; * | less\n</code></pre>\n\n<p>where <code>&lt;tag&gt;</code> is either INFO, DEBUG, WARN, or ERROR. There are about 10x as many warns as there are errors, and 10x as many debugs as warns, and so forth. It makes it difficult to catch one ERROR in a sea of relevant DEBUG messages. I would like a way to, for instance, make all 'WARN' messages appear on the left-hand side of the terminal, and all the 'ERROR' messages appear on the right-hand side.</p>\n\n<p>I have tried using tmux and screen, but it doesn't seem to be working on my dev machine.</p>\n"},{"tags":["bash","perl","unix","cgi"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":162,"score":2,"question_id":12606996,"title":"Webpage to take input from shell script and display result","body":"<p>I am newbie to web programming and I have small shell script which basically gives output with two results. It's basically to find users on our directory.</p>\n\n<pre><code>#!/bin/bash\necho -n \"Please enter username to lookup: \"\nread USERNAME\nDISPLAYNAME=`ldapsearch -p xxx -LLL -x -w test -h abc.com -D abc -b dc=abc,dc=com sAMAccountName=$USERNAME | grep displayName`\n\nif [ -z \"$DISPLAYNAME\" ]; then\n  echo \"No entry found for $USERNAME\"\nelse \n  echo \"Entry found for $USERNAME\"\nfi\n</code></pre>\n\n<p>Looking out for perl web code which can display the results on browser.</p>\n\n<p>I know, I would be asking too much here, but I would really appreciate if anyone can give me right direction to achieve this.</p>\n\n<p>Thanks!</p>\n"},{"tags":["bash","shell","unix","awk","aix"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":86,"score":0,"question_id":12938508,"title":"How to find every number in a row and store average in separate per-row variable","body":"<p>I just started learning shell scripting.</p>\n\n<p>I'm trying to read from a file structured like:</p>\n\n<pre><code>harddrive1 10 20 30 40\nharddrive2 20 30 40 50\nharddrive3 30 40 50 60\n</code></pre>\n\n<p>I want to save the average of each row in a separate variable somehow...there will only be 3 rows, 5 columns.\nSo my output would be:</p>\n\n<pre><code>hd_AVG1=20\nhd_AVG2=35\nhd_AVG3=45\n</code></pre>\n\n<p>How can I accomplish that?</p>\n\n<p>EDIT: I need to save it in DIFFERENT variable so that i can call the variable...for example </p>\n\n<pre><code>if [[ $hd_AVG1 -eq 20 ]];\n    then \n    do something...\nelif [[ $hd_AVG2 -gt 40 ]];\n    then\n    do something...\nfi\n</code></pre>\n"},{"tags":["bash","shell","unix","script","output"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12957942,"title":"Output the Names of Copied Files in Shell Script","body":"<p>I am working on a bash script to copy configuration files to their appropriate directories. I would like to output the name of the file that I have copied to the user. Here is what I have so far:</p>\n\n<pre><code>CONFIG_DIR=\"/home/stackoverflow/app/configs\"\nCONFIG_FILE=\"*.config\"\n\ncp $CONFIG_FILE $CONFIG_DIR\n\necho \"$CONFIG_FILE was copied to $CONFIG_DIR\"\n</code></pre>\n\n<p>The output I get from this is: </p>\n\n<pre><code>*.config was copied to /home/stackoverflow/app/configs\n</code></pre>\n\n<p>Let's assume that stackoverflow.config is the only .config file present in the directory where the script is running. I would like it to say:</p>\n\n<pre><code>stackoverflow.config was copied to /home/stackoverflow/app/configs\n</code></pre>\n"},{"tags":["bash"],"answer_count":9,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":4668,"score":3,"question_id":320313,"title":"echo \"-e\" doesn't print anything","body":"<p>I'm using GNU bash, version 3.00.15(1)-release (x86_64-redhat-linux-gnu). And this command:</p>\n\n<pre><code>echo \"-e\"\n</code></pre>\n\n<p>doesn't print anything. I guess this is because \"-e\" is one of a valid options of echo command because echo \"-n\" and echo \"-E\" (the other two options) also produce empty strings.</p>\n\n<p>The question is how to escape the sequence \"-e\" for echo to get the natural output (\"-e\").</p>\n"},{"tags":["bash","sed","autohotkey","dvorak"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12955440,"title":"What is the variable that stores the whole line matching the pattern in sed?","body":"<p>I have a file whose lines are Italian words that end in <code>[aiou]'</code></p>\n\n<pre><code>gia'\ngiacche'\ngiovedi'\ngiu'\n</code></pre>\n\n<p>I want to replace these lines with the autohotkey commands that would allow me to write these words with an apostrophe and automatically translate them in their correct versions, that is i want to get</p>\n\n<pre><code>::gia'::già\n::giacche'::giacché\n::giovedi'::giovedì\n::giu'::giù\n</code></pre>\n\n<p>I know I can accomplish this with sed, but I couldn't get it to work. I know there is a variable to store the whole line, but I can't find it. If it were <code>@</code> the following might work</p>\n\n<pre><code>sed -e \"s/.a'/::@::@\\b\\bà/\" temp\nsed -e \"s/.i'/::@::@\\b\\bì/\" temp\nsed -e \"s/.o'/::@::@\\b\\bò/\" temp\nsed -e \"s/.u'/::@::@\\b\\bù/\" temp\n</code></pre>\n\n<p>Please note that while the lines are in alphabetical order they DO NOT all start in g, nor there is a pattern in the last two characters of the word.</p>\n\n<p>So do you know what is the variable I'm looking for?\nDo you think there is a better solution to my problem than the one I'm trying?</p>\n"},{"tags":["bash","svn","svn-hooks"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":282,"score":1,"question_id":6394998,"title":"Getting project name in post-commit subversion hook","body":"<p>I have a subversion repository laid out like this:</p>\n\n<pre><code>Repo\n    ProjectA\n        trunk\n        branches\n        tags\n    ProjectB\n        trunk\n        branches\n        tags\n</code></pre>\n\n<p>I'm trying to write a post-commit hook script that just applies to one project, but I just learned that they are housed at the root of the repository.</p>\n\n<p>The only two parameters I get are the Repository path and Revision number.  Is there any way for me to execute this script for just a particular project?</p>\n\n<p>Thanks,</p>\n\n<p><strong>Solution:</strong>\nUltimate solution went something like this:</p>\n\n<pre><code>#!/bin/bash\nREPOS=\"$1\"\nREV=\"$2\"\nif svnlook changed -r $REV $REPOS | grep ProjectA; then\n    echo \"do stuff\"\nfi\n</code></pre>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":83,"score":6,"question_id":12945987,"title":"recursively rename directories in bash","body":"<p>I'd like to recursively rename all directories containing the string <em>foo</em> by replacing that part of the string with <em>Bar</em>.  I've got something like this so far, but it doesn't quite work.  I'd also like <em>foo</em> to be searched <strong>case-insensitive</strong>.</p>\n\n<p><code>find . -type d -exec bash -c 'mv \"$1\" \"${1//foo/Bar}\"' -- {} \\;</code></p>\n\n<p>Are there any elegant one-liners that might be better than this attempt?  I've actually tried a few but thought I'd defer to the experts.  Note: i'm doing this on a Mac OS X system, and don't have tools like <strong>rename</strong> installed.</p>\n"},{"tags":["python","performance","bash","sed","logging"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":370,"score":5,"question_id":9653507,"title":"trim big log file","body":"<p>i perform performance tests for a few java applications. Applications produce very big log files( it can be 7-10 GB) during the test . I need to trim these log files between specific dates and time. currently, i use python script, which parses log timestamps in datetime python object and print only matched strings. But this solution is very slow. 5 GB log is parsed about 25 minutes\nObviously entries in log file is sequentially and i don't need to read all file line by line. \nI thought about reading file from the start and from the end, until condition is matched and print files between matched number of lines. But i don't know how can i read file from the backwards, without downloading it to the memory.</p>\n\n<p>Please, can you suggest me any suitibale solution for this case.</p>\n\n<p>here is part of python script:</p>\n\n<pre><code>      lfmt = '%Y-%m-%d %H:%M:%S'\n      file = open(filename, 'rU')\n      normal_line = ''\n      for line in file:\n        if line[0] == '[':\n          ltimestamp = datetime.strptime(line[1:20], lfmt)\n\n          if ltimestamp &gt;= str and ltimestamp &lt;= end:\n            normal_line = 'True'\n        else:\n          normal_line = ''\n\n      if normal_line:\n        print line,\n</code></pre>\n"},{"tags":["bash","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12948181,"title":"How to use awk to parse values from stdout as elements of an array?","body":"<p>The command <code>elb-describe-instance-health</code> returns the following</p>\n\n<pre><code>INSTANCE_ID  i-111\nINSTANCE_ID  i-222\nINSTANCE_ID  i-333\n</code></pre>\n\n<p><code>$(elb-describe-instance-health | awk '/INSTANCE_ID/{print $2}')</code></p>\n\n<p>returns <code>i-111 i-222 i-3333</code></p>\n\n<p>How can I change the above syntax to store each of these values in an array (ex. <code>foo[0]</code> equals <code>i-111</code>, <code>foo[1]</code> equals <code>i-222</code>, <code>foo[2]</code> equals <code>i-333</code>?</p>\n"},{"tags":["bash","shell","variables","redirect","script"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":12944821,"title":"How to assign redirection symbol to a variable for assembling a command line","body":"<p>I have a couple of BASH scripts that launch programs I commonly use with common arguments using variables for the command and arguments. The invocation appears at the end like so:</p>\n\n<pre><code>$PROGRAM $ARG1 $ARG2 &amp;\n</code></pre>\n\n<p>Now I want to redirect output to stderr and stdout to <code>/dev/null</code> by default. I want to be able to disable that with a switch to the script (<code>-v</code> = verbose). But if I try to assign <code>\"2&gt;&amp;1 &gt; /dev/null\"</code> to a var, say <code>REDIRECTION</code>, (clearing it if verbose is specified) and try to invoke like so:</p>\n\n<pre><code>$PROGRAM $ARG1 $ARG2 $REDIRECTION &amp;\n</code></pre>\n\n<p>The redirection directives are passed as arguments to the program. Is there a way to do this? Or do I have to use my solution which is to have 2 separate invocation lines, one with and one without the redirection directives, depending on \"verbosity\"? </p>\n"},{"tags":["linux","bash","shell","script"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12952427,"title":"bash test for number in range (with float numbers)","body":"<p>the problem is in this line </p>\n\n<pre><code>elif [  \"$(echo $a '&gt;' $v06 | bc -l)\"  -eq 1  &amp;&amp;   \"$(echo $a '&lt;' $v08 | bc -l)\" -eq 1  ];then\n</code></pre>\n\n<p>How can I test if the number is in range ?\nI know that there might be other solution for this but I want to solve in this way with bc...</p>\n\n<pre><code>a=0.1\nv06=0.6\nv08=0.8\n\nif [ \"$(echo $a '&lt;' $v06 | bc -l)\" -eq 1 ];then\n    echo \" &lt;0.6\"\nelif [  \"$(echo $a '&gt;' $v06 | bc -l)\"  -eq 1  &amp;&amp;   \"$(echo $a '&lt;' $v08 | bc -l)\" -eq 1  ];then\n    echo \" &lt;0.6 &gt;0.8\"\nelse\n    echo \"&gt;1.5\"\nfi\n</code></pre>\n"},{"tags":["bash","autocomplete","bash-completion"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12933362,"title":"Getting compgen to include slashes on directories when looking for files","body":"<p>I'd like to get the following behavior from my custom completion</p>\n\n<p>Given</p>\n\n<pre><code>$ mkdir foo\n$ touch faz foo/bar foo/baz\n</code></pre>\n\n<p>I'd like to get this</p>\n\n<pre><code>$ foo -u &lt;tab&gt;&lt;tab&gt; =&gt;\nfoo faz/\n\n$ foo -u fa&lt;tab&gt;&lt;tab&gt; =&gt;\n$ foo -u faz/\n\n$ foo -u faz/&lt;tab&gt;&lt;tab&gt; =&gt;\nbar baz\n</code></pre>\n\n<p>I assumed that <code>compgen -f f</code> would output <code>foo faz/</code>, but it outputs <code>foo faz</code> which doesn't help me much.</p>\n\n<p>Do I need to post-process the output or is there some magic combination of options to compgen that work?</p>\n"},{"tags":["bash","input","clear"],"answer_count":7,"favorite_count":3,"up_vote_count":9,"down_vote_count":0,"view_count":2490,"score":9,"question_id":1056394,"title":"In bash, how does one clear the current input?","body":"<p>Suppose in bash you start writing a command like:</p>\n\n<pre><code>$ rm -rf /foo/bar/really/long/path/here\n</code></pre>\n\n<p>and then realize you don't want to execute this after all.  Is there a way to clear the input with one or two keystrokes?</p>\n\n<p>What I have been doing lately is prepending echo and enclosing the input in quotes (Ctrl+A, <code>echo \"</code>, Ctrl+E, <code>\"</code>) then hitting enter.  Is there a faster way?</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12951301,"title":"How to get the return type of the timed command?","body":"<p>I'm trying to use the bash builtin <code>time</code> to measure how long the execution of a command takes. </p>\n\n<p>The problem is getting the return code from the timed command. After looking into</p>\n\n<pre><code>help time\n</code></pre>\n\n<p>it seems that time always return 0 and not the return code of the executed command. Is there some way to get the return status of the timed command?</p>\n"},{"tags":["bash","path","find","case"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":11862746,"title":"Find path in bash on insensitive manner","body":"<p>Suppose a path like </p>\n\n<pre><code>/home/nenopera/Projects/InSaNEWEBproJECT\n</code></pre>\n\n<p>Despite of the fact to not use such that names. Is there a way to check for a path in an insensitive manner?</p>\n\n<p>I came across to this solution, but I would like to find a builtin or gnu program, if it is possible.</p>\n\n<pre><code>function searchPathInsensitive {\n # Replace bar with comma (not valid directory character allowing parse dirs with spaces)\n #also remove first / if exist (if not this create a first empty element\n\n ORG=\"$1\"\n if [ \"${ORG:0:1}\" = \"/\" ]\n then\n  ORG=\"${ORG:1}\"\n else\n  ORG=\"${PWD:1}/$ORG\"\n fi\n OLDIFS=$IF\n IFS=,\n for dir in ${ORG//\\//,}\n do\n  if [ -z $DIR ]\n  then\n   DIR=\"/$dir\"\n  else\n   TMP_DIR=\"$DIR/$dir\"\n   DIR=$(/usr/bin/find $DIR -maxdepth 1 -ipath $TMP_DIR -print -quit)\n   if [ -z $DIR ]\n   then\n    # If some of the path does not exist just copy the element\n    # exit 1        \n    DIR=\"$TMP_DIR\"\n   fi\n  fi\n done\n IFS=$OLDIFS\n echo \"$DIR\"\n}\n</code></pre>\n\n<p>to use it just do:</p>\n\n<pre><code> (searching on my home)\n$ searchPathInsensitive projects/insanewebproject\n/home/nenopera/Projects/InSaNEWEBproJECT\n\n(inside a project)\n$ searchPathInsensitive src/main/java/org/package/webprotocolhttpwrapper.java\n/home/nenopera/Projects/InSaNEWEBproJECT/src/main/java/org/package/WebProtocolHTTPWrapper.java\n\n$ searchPathInsensitive src/main/resources/logout.png\n/home/nenopera/Projects/InSaNEWEBproJECT/src/main/resources/LogOut.PNG\n</code></pre>\n\n<p>I guess the solution is related in any way with <strong>find -ipath</strong> as all I do with the function is search only for next element in path given on insensitive manner</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12927927,"title":"Bash redirection: save stderr/stdout to different files and still print them out on a console","body":"<p>Here is a simple program.</p>\n\n<pre><code>class Redirection {\n\npublic static void main (String args[]){\n    System.out.println(\"Hello World_Stdout\");\n    System.err.println(\"Hello World_Stderr\");\n}\n\n}\n</code></pre>\n\n<p>I want to see the all the outputs on a console, but at the same time I want to store stdout and stderr in different files. I tried the following command, to no avail.</p>\n\n<pre><code>$java Redirection 3&gt;&amp;1 2&gt;stderr 1&gt;stdout 1&gt;&amp;3 2&gt;&amp;3\n</code></pre>\n\n<p>stderr&amp; stdout files have the file size of 0.</p>\n\n<p>So basically I want to do what \"tee\" command does but I also want to capture stderr as well.</p>\n"},{"tags":["linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":98,"score":1,"question_id":10159235,"title":"How to double-quote names with spaces in their name","body":"<p>Error: seems to be it showing up with a _ rather than a </p>\n\n<p>File tree looks like:</p>\n\n<pre><code>.\n|-- Christina Aguilera\n|   |-- Back To Basics . Ain't No Other Man.mp3 \n</code></pre>\n\n<p>However, script shows this:</p>\n\n<pre><code>.\n|-- Christina Aguilera\n|   |-- Back To Basics _ Ain't No Other Man.mp3\n</code></pre>\n\n<p>The Code:</p>\n\n<pre><code>    tag=$(tail -c 128 $path)\n    song_name=$(echo \"$tag\" | cut -c 4-33 | sed -r 's/ +$//')\n    artist_name=$(echo \"$tag\" | cut -c 34-63 | sed -r 's/ +$//')\n    album_name=$(echo \"$tag\" | cut -c 64-93 | sed -r 's/ +$//')\n    test -e \"$2/$artist_name\" || mkdir \"$2/$artist_name\"\n    ln -s $path \"$2/$artist_name/$album_name _ $song_name.mp3\"\ndone\n</code></pre>\n\n<p>How can I edit this code to resolve the error?</p>\n"},{"tags":["bash","shell","unix","operating-system","cat"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":65,"score":2,"question_id":12948611,"title":"Unexpected output from cat `bash` command","body":"<p>Can someone please explain this? I ran the commands as shown below </p>\n\n<pre><code>$ cat `bash`\n\n$ ls\n\n$ ctrl+D\n</code></pre>\n\n<p>and it's giving me some unexpected output on terminal. </p>\n\n<p>NOTE: <code>bash</code> is in backquotes.</p>\n"},{"tags":["linux","bash","shell","operators"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":12948456,"title":"Is there any difference between '=' and '==' operators in bash or sh","body":"<p>I realized that both '=' and '==' operators works in if statement. For example:</p>\n\n<pre><code>var=\"some string\"\nif [ \"$var\" == \"some string\" ];then\n    #doing something\nfi\n\nif [ \"$var\" = \"some string\" ];then\n    #doing something\nfi\n</code></pre>\n\n<p>Both if statement above worked well in bash and sh. I just wondered if there is any difference between them? Thanks...</p>\n"},{"tags":["bash","script","monitoring"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":12951175,"title":"Determine hostname of connected ethernet switch","body":"<p>I've a bonding on two interfaces. I'd like to monitor wether they are connected to different switches (the switches have hostnames).\nethX should be connected to switchX and ethY to switchY.</p>\n\n<p>Currently I'm checking this with following command:</p>\n\n<pre><code>tcpdump -vv -s0 -i ethX ether host 01:00:0c:cc:cc:cc\n</code></pre>\n\n<p>After a minute it prints out the hostname (and much more information) from the switch.</p>\n\n<p>Are there any other solutions to monitor this?</p>\n\n<p>Greeting</p>\n"},{"tags":["bash"],"answer_count":6,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":2200,"score":8,"question_id":6022384,"title":"bash tool to get nth line from a file","body":"<p>Is there a \"canonical\" way of doing that? I've been using <code>head -n | tail -1</code> which does the trick, but I've been wondering if there's a bash tool that specifically extracts a line (or a range of lines) from a file.</p>\n\n<p>EDIT: By \"canonical\" I mean a program whose main function is doing that.</p>\n"},{"tags":["bash","shell","script","xml-parsing","compare"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12947028,"title":"Shell script to extract unique strings from filenames or from content of XML documents","body":"<p>Using a bash shell script, I would like to take a directory listing of files and only list unique instances of a specific string.</p>\n\n<p>The string (for example <code>0082230958089736545</code>) can be found in 2 places</p>\n\n<ol>\n<li><p>The filename (in the 4th section, the longest number)</p>\n\n<pre><code>AVAILITY.VT04.00090.0082230958089736545.72732411.20121017.053604220\n</code></pre></li>\n<li><p>Inside the XML Document</p>\n\n<pre><code>&lt;ENVELOPE&gt;\n&lt;HEADER&gt;\n&lt;ProviderTransID&gt;0082230958089736545&lt;/ProviderTransID&gt;\n&lt;/HEADER&gt;\n&lt;ENVELOPE&gt;\n</code></pre></li>\n</ol>\n\n<p>In the filename, the first 4 sections (including the section with the string I want to compare) is the same, whereas the last 3 sections change as those identify the process date and time the file was retried. </p>\n\n<p>Each instance of the string can be repeated up to 24 times. Right now I have to manually make sure I grab each instance of the string with my eyes, and I don't always trust those LOL. </p>\n\n<p>I want to generate a list of each string with no repetitions, then assign each string to its own variable for use later on in the script. </p>\n\n<p>As long as it can be done in a Bash shell script, I don't care if the string is extracted from the filename or from the content of the .XML document.</p>\n"},{"tags":["ruby","bash","install","rvm","ruby-1.9.3"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":536,"score":1,"question_id":12148054,"title":"Need to install Ruby 1.9.3 on Mac OS X Mountain Lion","body":"<p>I had Ruby 1.9.3 running on Mac OS X Lion (I had to use RVM because normal home brew install didn't work) and then installing Mountain Lion (or its subsequent update) has caused Ruby 1.9.3 to no longer be installed + all gems have been uninstalled and I'm back on Ruby 1.8.7</p>\n\n<p>I have the latest XCode version (4.4.1) installed and I've tried multiple different suggestions from similar StackOverflow questions with no success.</p>\n\n<p>What I want is a fresh start (if possible), I would like advice for how to completely uninstall any crap I've installed to do with Ruby and RVM and to start again! Then maybe I can get assistance with installing Ruby 1.9.3</p>\n\n<p>But I can give you an idea of what I'm doing at the moment which is failing...</p>\n\n<ul>\n<li><p>Executing <code>ruby -v</code> results in <code>ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]</code></p></li>\n<li><p>Executing <code>rvm -v</code> results in <code>rvm 1.15.7 (stable) by Wayne E. Seguin &lt;wayneeseguin@gmail.com&gt;, Michal Papis &lt;mpapis@gmail.com&gt; [https://rvm.io/]</code></p></li>\n<li><p>Executing <code>brew upgrade ruby</code> results in: <a href=\"http://pastebin.com/KetSau7k\" rel=\"nofollow\">http://pastebin.com/KetSau7k</a></p></li>\n<li><p>Executing <code>rvm install 1.9.3</code> results in: <a href=\"http://pastebin.com/8YKg4wXb\" rel=\"nofollow\">http://pastebin.com/8YKg4wXb</a> - which when I then press <code>q</code> to exit it continues to try and install and fails...</p></li>\n</ul>\n\n<p>Installing Ruby from source to: /Users/markmcdonnell/.rvm/rubies/ruby-1.9.3-p194, this may take a while depending on your cpu(s)...</p>\n\n<pre><code>ruby-1.9.3-p194 - #downloading ruby-1.9.3-p194, this may take a while depending on your connection...\nruby-1.9.3-p194 - #extracted to /Users/markmcdonnell/.rvm/src/ruby-1.9.3-p194 (already extracted)\nruby-1.9.3-p194 - #configuring \nError running ' ./configure --prefix=/Users/markmcdonnell/.rvm/rubies/ruby-1.9.3-p194 --enable-shared --disable-install-doc --with-libyaml --with-opt-dir=/Users/markmcdonnell/.rvm/usr ', please read /Users/markmcdonnell/.rvm/log/ruby-1.9.3-p194/configure.log\nThere has been an error while running configure. Halting the installation.\n</code></pre>\n\n<ul>\n<li>I've also tried <code>rvm install 1.9.3 --with-gcc=clang</code> but after an initial message you've seen already (where I press <code>q</code> to quit the message and continue with an install) it then tells me <code>You requested building with 'clang' but it is not in your path.</code></li>\n</ul>\n\n<p>There's also a number of other things I've installed and commands I've executed to try and get this blasted Ruby 1.9.3 to install but none of it has worked - hence why I think I might need to start from scratch (if possible?).</p>\n\n<p>Any help getting this installed (and a bit of a clean-up too) along with an explanation for someone who isn't very Bash/CLI minded would be greatly appreciated!</p>\n\n<p>Thanks.</p>\n"},{"tags":["linux","bash","ulimit"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":65,"score":2,"question_id":12945606,"title":"how does \"ulimit -v\" work in the Linux OS?","body":"<p>I would like to limit memory used by a process started through bash with the ulimit command on Linux.  I was wondering what OS mechanism is used to support ulimit.  In particular, is it based on cgroups?</p>\n"},{"tags":["bash"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":12941184,"title":"Setting up the \"mate\" command in bash","body":"<p>Attempting to setup bash so I can call the \"mate\" command to edit text files. After running this line, the link appears to exist but I'm still getting \"mate: command not found\"</p>\n\n<pre><code>ln -s /Applications/TextMate.app/Contents/Resources/mate ~/bin/mate/mate\n</code></pre>\n\n<ul>\n<li>Textmate is installed in applications </li>\n<li>using OSX Mountain Lion</li>\n<li>directory structure is in place</li>\n</ul>\n"},{"tags":["osx","bash","shell","application","applescript"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12945466,"title":"Apple script to run a shell script to get around permissions","body":"<p>I have created a shell .command on Mac OS X that I would like to distribute. Based on my testing, you can't execute the .command file by double clicking without changing permissions first ( making executable. ) I don't want users to use the terminal and change permissions, it's too hard for them.</p>\n\n<p>The shell script creates a folder structure for a project, based on where the script is. It needs to be able to run anywhere the user puts it.</p>\n\n<p>The research I have done indicates that I need to use an Apple script to run the file to prompt for the user's password to get around permissions.</p>\n\n<p>Any advice on how to do this?</p>\n"},{"tags":["bash","dictionary","hashtable","associative-array"],"answer_count":10,"favorite_count":19,"up_vote_count":39,"down_vote_count":0,"view_count":35361,"score":39,"question_id":1494178,"title":"How to define hash tables in bash?","body":"<p>Just what title says. I am surprised by insufficiency of results in Google search for this question! What I want to is the equivalent of <a href=\"http://diveintopython.net/getting_to_know_python/dictionaries.html\">Python dictionaries</a> but in bash (and hence, should work across OSX, Ubuntu and other major Linux distributions).</p>\n"},{"tags":["bash","debugging","if-statement","condition"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12944988,"title":"Debugging BASH IF Conditions","body":"<p>I am getting an error when I try and run my assignment.</p>\n\n<pre><code>#!/bin/bash\n## Assignment 2\n\necho Please enter a User Name:\nread u\nif [ $u!=\"root\"]; then\n        echo Searching for Username!\n        grep $u /etc/passwd|sed 's/$u/hidden/gi'\nelif [ $u!=\"toor\"]; then\n        echo Root is NOT allowed.\nelse\n        echo Toor is definetely NOT allowed.\nfi\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Please enter a User Name:\nuser1\n./assign2.sh: line 6: [bthiessen: command not found\n./assign2.sh: line 9: [bthiessen: command not found\nToor is definetely NOT allowed.\n</code></pre>\n\n<p>What is wrong with my if statements?</p>\n"},{"tags":["bash","unzip"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12945111,"title":"Unzip fails when specifying keyword","body":"<p>I need to unzip files matching a specific keyword in the name. A typical file will look like this:</p>\n\n<pre><code>JGS-Memphis~PSU~FVT~00000~JGM96911~1~P~1100~EPS10R0-15~CL10D1120A3271~0121017~141645.XML\n</code></pre>\n\n<p>When I do</p>\n\n<pre><code>unzip -o SOMEFILE.zip '*~PSU~*' -d psutmp/\n</code></pre>\n\n<p>It unzips the file above from <code>SOMEFILE.zip</code> without problem. But when I do</p>\n\n<pre><code>for i in `find . -name '*zip'`; do  unzip -o \"$i\" \\'*PSU*\\' -d psutmp/ ; done\n</code></pre>\n\n<p>It fails with a <code>filename not matched:  '*PSU*'</code> error. I tried removing the tick marks around PSU. Same problem. </p>\n\n<p>I also tried the <code>-C</code> option to match filenames case-insensitively </p>\n\n<pre><code>for i in `find . -name '*XML*zip'`; do  unzip -o \"$i\" -C *PSU* -d psutmp/ ; done\n</code></pre>\n\n<p>It fails with a</p>\n\n<pre><code>error:  cannot create psutmp/JGS-Memphis~PSU~FVT~00000~JGM96911~1~P~1100~EPS10R0-15~CL10D1120A3271~0121017~141645.XML\n</code></pre>\n\n<p>This is bunk. I am the root user of a development machine with 150GB of storage. Capacity is at 12%. What am I missing?</p>\n"},{"tags":["bash","hash","export"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12944674,"title":"How to export an associative array (hash) in bash?","body":"<p>Related, but not a duplicate of: <a href=\"http://stackoverflow.com/questions/1494178/how-to-define-hash-tables-in-bash\">How to define hash tables in bash?</a></p>\n\n<p>I can define and use a bash hash, but I am unable to export it, even with the -x flag.  For example, the following works to export (and test exportation of) a normal string variable:</p>\n\n<pre><code>aschirma@graphics9-lnx:/$ export animal_cow=\"moo\"\naschirma@graphics9-lnx:/$ bash -c \"echo \\$animal_cow\"\nmoo\naschirma@graphics9-lnx:/$ \n</code></pre>\n\n<p>However, if I try to export a hash:</p>\n\n<pre><code>aschirma@graphics9-lnx:/$ declare -A -x animals\naschirma@graphics9-lnx:/$ animals[duck]=\"quack\"\naschirma@graphics9-lnx:/$ echo ${animals[duck]}\nquack\naschirma@graphics9-lnx:/$ bash -c \"echo \\${animals[duck]}\"\n\naschirma@graphics9-lnx:/$ \n</code></pre>\n\n<p>It seems the nested bash shell does not have the hash in its scope.  I did verify this also by manually entering the nested bash shell and attempting to use the hash interactively.</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12944453,"title":"Assigning a variable after the contents are 'cut' in bash","body":"<p>I am iterating through a folder of files using bash, but I need to cut the preceding path.  For instance if I have this '/temp/test/filename' I want to cut off the '/temp/test/' and store the file name to a variable so I can write a log with the filename in it.</p>\n\n<p>Can anyone help me out? The problem is that the variable temp is always empty.</p>\n\n<p>Here is my bash code:</p>\n\n<pre><code>#!/bin/bash\n\nfor file in /temp/test/*\ndo\n    if [[ ! -f \"$file\" ]]\n    then\n        continue\n    fi\n\n    temp=\"$file\"|cut -d'/' -f3\n\n    $file &gt; /var/log/$temp$(date +%Y%m%d%H%M%S).log\ndone\n\nexit\n</code></pre>\n"},{"tags":["linux","osx","bash","rsync"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1305,"score":2,"question_id":3331630,"title":"old rsync and spaces in filenames","body":"<p>Source directory is determined like so:</p>\n\n<pre><code>SHOW=${PWD##*/}\nSRC=wells@server.com:\"/mnt/bigfish/video/TV/${SHOW}/\"\n</code></pre>\n\n<p>So it comes out something like:</p>\n\n<pre><code>wells@server.com:/mnt/bigfish/video/TV/The Name Of the Show With Spaces/\n</code></pre>\n\n<p>Then trying to run rsync like so:</p>\n\n<pre><code>rsync -avz -e ssh \"${SRC}\" .\n</code></pre>\n\n<p>But it tells me that \"\"/mnt/bigfish/video/TV/The\" is not a directory, \"\"/mnt/bigfish/video/TV/Name\" is not a directory, etc, for however many space-delimited words are in the name of the source directory.</p>\n\n<p>How can I rectify this egregiously annoying issue?</p>\n\n<p><strong>UPDATE</strong> I'm running this on OS 10.6, and I ended up string-replacing spaces with escaped spaces like so:</p>\n\n<pre><code>SRC=wells@kittenfactory.com:\"/mnt/bigfish/video/TV/${SHOW// /\\ }/\"\n</code></pre>\n"},{"tags":["bash","solaris","path","canonical","symlink"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2179,"score":2,"question_id":1245301,"title":"canonicalize a path name on solaris","body":"<p>On a GNU system I would just use <code>readlink -f $SOME_PATH</code>, but Solaris doesn't have readlink.</p>\n\n<p>I'd prefer something that works well in bash, but other programs are ok if needed.</p>\n\n<p><strong>Edit:</strong> The best I've come up with so far uses cd and pwd, but requires some more hackery to deal with files and not just directories.</p>\n\n<pre><code>cd -P \"$*\"\nREAL_PATH=`pwd`\n</code></pre>\n"},{"tags":["bash","for-loop","enums"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":82,"score":-1,"question_id":12935991,"title":"using enum in a bash script loop","body":"<p>let's say i have 14 compiler option to run exploration based on, I want to make a loop out of these in a bash script. one of them is like this:</p>\n\n<pre><code>echo \"dce\"\necho \"#####################################################################\"\nmkdir ./dce\nsed -i 's/constprop/dce/g'  ../../tools/most/script.most.plot_effect\n/home/zaccaria/projects/build/image/bin/most -x ../../tools/most/design_space.xml.LLVM_including_Vex_param_FIXED_BOUND_jpeg -f ../../tools/most/script.most.plot_effect -p\nmv all.csv FULL.db *.ps  most.node.0.0  normal_output  rand_output check   normal_input      rand_input st_shell_gplot_script.scr ./dce\necho \"dce_Finished\"\necho \"#####################################################################\"\n</code></pre>\n\n<p>so by defining all of them as :</p>\n\n<pre><code>compiler_option=([1]=constprop [2]=dce [3]=inline [4]=instcombine [5]=loop_reduce [6]=loop_rotate [7]=loop_unroll [8]=loop_unswitch [9]=mem2reg [10]=memcpyopt [11]=reassociate [12]=scalarrepl [13]=sccp [14]=simplifycfg)\n</code></pre>\n\n<p>I wanna put the exploration in a loop to avoid writing this script for 14 times.</p>\n\n<p>Thanks for your time ;)</p>\n\n<p>Amir</p>\n"},{"tags":["linux","bash","shell","scripting"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":2,"view_count":45,"score":0,"question_id":12941960,"title":"Does Bash have a way to get verbose output about expression evaluation?","body":"<p>Supposing that i want to know how my statements are axpanded and interpreted by the <code>bash</code>, how i'm supposed to act ?</p>\n"},{"tags":["bash","shell","sed","awk","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":129,"score":0,"question_id":12936448,"title":"Using grep to remove lines from a file, where the keys exist in another file","body":"<p>I am working with 2 large CSV files. The smaller being a subset of the larger. The first field is a non-unique key, which is a customerID.</p>\n\n<p>I want to find all lines from the larger file which have the same value in field 1 as the smaller file, then find the delta between this result, and the original subset.</p>\n\n<p>I then want to remove all rows from the original subset which have a value in field one that exists in the delta.</p>\n\n<p>In other words: I want to remove any rows from the original smaller subset which has a custromerID which also exists in a row existing in the large original file, but not in the smaller subset.</p>\n\n<p>I am currently doing it like below, and I don't understand why the result is 0.</p>\n\n<p>There is obviously a flaw in my logic, and this is clearly not the most elegant way to to do this, so please, I'm open to suggestions for a better way.</p>\n\n<p>File: full.csv</p>\n\n<pre><code>,1052,tec101,UNIX\n,1052,ser303,UNIX\n,1052,backu2,UNIX\n,1052,sma114,UNIX\n,1052,appsup,UNIX\n,1052,emails,UNIX\n,1059,marygs,UNIX\n,39835,deepr2,UNIX\n,44536,hai499,UNIX\n,1274,lemo27,Windows\n,48567,wdanro,UNIX\n,81860,pro846,UNIX\n,1419,graphe,UNIX\n,83999,doerf1,UNIX\n,1551,taxtri,UNIX\n,1572,lodes4,UNIX\n,1603,wes244,Windows\n,102888,law642,UNIX\n,1700,au2960,UNIX\n</code></pre>\n\n<p>File: subset.csv</p>\n\n<pre><code>,1052,sma114,UNIX\n,1052,appsup,UNIX\n,1052,emails,UNIX\n,1059,marygs,UNIX\n,39835,deepr2,UNIX\n,44536,hai499,UNIX\n,1274,lemo27,Windows\n,48567,wdanro,UNIX\n,81860,pro846,UNIX\n,1419,graphe,UNIX\n</code></pre>\n\n<p>What I'm doing now:</p>\n\n<pre><code>[jgalley@linux1 sandbox]$ wc -l *\n 19 full.csv\n 10 subset.csv\n 29 total\n[jgalley@linux1 sandbox]$ cat subset.csv |  awk -F, '{print \",\"$2\",\"}' &gt; subset_keys\n[jgalley@linux1 sandbox]$ grep -F -f subset_keys full.csv | wc -l\n13\n[jgalley@linux1 sandbox]$ grep -F -f subset_keys full.csv | head -n2\n,1052,tec101,UNIX\n,1052,ser303,UNIX\n[jgalley@linux1 sandbox]$ grep -F -f subset_keys full.csv &gt; subset_keys_grep\n[jgalley@linux1 sandbox]$ cat subset_keys_grep | awk -F, '{print \",\"$2\",\"}' | head -n2\n,1052,\n,1052,\n[jgalley@linux1 sandbox]$ cat subset_keys_grep | awk -F, '{print \",\"$2\",\"}' | wc -l\n13\n[jgalley@linux1 sandbox]$ cat subset_keys_grep | awk -F, '{print \",\"$2\",\"}' &gt; keys_to_remove\n[jgalley@linux1 sandbox]$ grep -F -f keys_to_remove subset.csv | wc -l\n10\n[jgalley@linux1 sandbox]$ grep -F -f keys_to_remove subset.csv &gt; lines_to_remove\n[jgalley@linux1 sandbox]$ grep -Fv -f lines_to_remove  subset.csv | wc -l\n0\n</code></pre>\n\n<p>My expected result should be 7, or, without the count, the following:</p>\n\n<pre><code>,1059,marygs,UNIX\n,39835,deepr2,UNIX\n,44536,hai499,UNIX\n,1274,lemo27,Windows\n,48567,wdanro,UNIX\n,81860,pro846,UNIX\n,1419,graphe,UNIX\n</code></pre>\n\n<p>The result should be the 7 rows of the subset that have customerIDs that exist ONLY in the subset, and not also elsewhere in the full file.</p>\n"},{"tags":["osx","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":12895017,"title":"Get formated time before midnight in bash on Mac OS","body":"<p>I would like to get time before midnight in bash on Mac OS (which has not the same date utility as many Linux distro).</p>\n\n<p>For example, at 23:56:03 I would like to get : \"00:03:59\".</p>\n"},{"tags":["bash","node.js"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12941083,"title":"Get the output of a shell command in node.js","body":"<p>In a node.js, I'd like to find a way to obtain the output of a Unix terminal command. Is there any way to do this?</p>\n\n<pre><code>function getCommandOutput(commandString){\n    //now how can I implement this function?\n    //getCommandOutput(\"ls\") should print the terminal output of the shell command \"ls\"\n}\n</code></pre>\n"},{"tags":["osx","bash","unix"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12940379,"title":"Where are all the possible PATH settings?","body":"<p>I think I'm in over my head here. When I type echo $PATH...</p>\n\n<pre><code>$ echo $PATH\n/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin\n</code></pre>\n\n<p>When I open up .profile, I see...</p>\n\n<pre><code># MacPorts Installer addition on 2010-12-18_at_19:21:47: adding an appropriate PATH \n\nvariable for use with MacPorts.\nexport PATH=\"/usr/local/bin:/usr/local/sbin:/usr/local/mysql/bin\"\n#export PATH=/opt/local/bin:/opt/local/sbin:$PATH\n# Finished adapting your PATH environment variable for use with MacPorts.\ntest -r /sw/bin/init.sh &amp;&amp; . /sw/bin/init.sh\n</code></pre>\n\n<p>When I open up .bashrc...</p>\n\n<pre><code>PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting\n</code></pre>\n\n<p>And .bash_profile...</p>\n\n<pre><code>#export PATH=\"/usr/local/mysql/bin:$PATH\"[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; . \"$HOME/.rvm/scripts/rvm\" # Load RVM function\n</code></pre>\n\n<p>Where is the $PATH given by the echo command coming from? Is there yet another profile I need to edit? It's just so confusing to me. The motivation for all this is that I just want to get Ruby, various gems, and MySQL all playing nicely with each other. I installed Homebrew and RVM, but it's just been a nightmare getting everything to run.</p>\n\n<p>Any help would be greatly appreciated!</p>\n"},{"tags":["c","bash","script","argv","shebang"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":74,"score":2,"question_id":12922151,"title":"Expanding a relative path to a full path when running a C program in shell","body":"<p>I have a problem when my script needs to communicate with a C executable. I cannot get the script's full path, which I need to load and send to another process.</p>\n\n<p>The script's name is <code>myScript</code></p>\n\n<pre><code>#!/home/user/git/proyect/test\n\nhello this\n\nis a\nscript\n</code></pre>\n\n<p>and this is the source code of the C executable</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (int argc, char *argv[]){\n    int count;\n\n    printf (\"Este programa fue llamado con: \\\"%s\\\".\\n\",argv[0]);\n    if (argc &gt; 1){\n        for (count=1; count&lt;argc; count++){\n            printf(\"argv[%d] = %s\\n\", count, argv[count]);\n        }\n    }\n    else{\n        printf(\"The command had no other arguments.\\n\");\n    }\n    return 0;\n }\n</code></pre>\n\n<p>If I run <code>myScript</code> from terminal, </p>\n\n<ul>\n<li><code>argv[0]</code> shows the executable's path (I guess that's because it's the info at <code>#!</code>).</li>\n<li><code>argv[1]</code> shows the first argument passed to the executable, i.e. \n<ul>\n<li>if I use <code>./myScript</code> as the argument, that is what I see (the relative path)</li>\n<li>if I use <code>/home/user/git/proyect/test/scriptFolder/myScript</code> as the argument, it shows the absolute path (which is what I need, but I don't want to write the full path in terminal every time)</li>\n</ul></li>\n</ul>\n\n<p>So my question is, how do I get the full path of <code>myScript</code> without passing its full path when calling the script? </p>\n"},{"tags":["python","bash","shell"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":63,"score":0,"question_id":12940223,"title":"Download files modified in last 30 minutes from a URL","body":"<p>I am trying to download only files modified in the last 30 minutes from a URL. Can you please guide me how to proceed with this. Please let me know if I should use shell scripting or python scripting for this.</p>\n"},{"tags":["bash","post","curl","username","aol"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12923561,"title":"(Bash) Submitting post data to an online form to check username availability","body":"<p>Firstly asked at: <a href=\"http://stackoverflow.com/questions/12888407/bash-useraol-com-email-availability-checker\">(Bash) $user@aol.com email availability checker</a> \n(with a well thought out beginning. Thanks again!)</p>\n\n<p>I'm looking to expand on this a bit:</p>\n\n<p>I'm trying to use either Curl, or a simple POST command (neither have proven working yet) to try to validate a list of usernames that I have to the following page:</p>\n\n<p><a href=\"https://new.aol.com/productsweb/\" rel=\"nofollow\">https://new.aol.com/productsweb/</a></p>\n\n<p>Essentially, this will be an availability checker for @aol.com email addresses.</p>\n\n<p>It doesn't have to neat, clean, or pretty, as long as it works.</p>\n\n<p>Does anyone have any idea where I can go from here?</p>\n"},{"tags":["linux","git","bash","shell"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":12937027,"title":"Bash environment variable not updating","body":"<p>I'm using the git post-checkout hook in my repo to the current branch into a variable, I then want to use it else where like PHP etc.</p>\n\n<p>Below is my post-checkout script:</p>\n\n<pre><code>#!/bin/bash\necho $GITBRANCH\nGITBRANCH=`git symbolic-ref HEAD | cut -d/ -f3-`\necho $GITBRANCH\nexport $GITBRANCH\n</code></pre>\n\n<p>However it doesn't update. For example:</p>\n\n<pre><code>&gt;git checkout master\nSwitched to branch 'master'\ndevelop\nmaster\n&gt;echo $GITBRANCH\ndevelop\n</code></pre>\n\n<p>Running the <code>GITBRANCH=git symbolic-ref HEAD | cut -d/ -f3-</code> command on it's own will then produce the current branch name.</p>\n\n<p>Why doesn't the hook update the $GITBRANCH variable globally?</p>\n"},{"tags":["mysql","linux","bash","csv"],"answer_count":14,"favorite_count":42,"up_vote_count":84,"down_vote_count":0,"view_count":68720,"score":84,"question_id":356578,"title":"How to output MySQL query results in csv format?","body":"<p>Is there an easy way to run a MySQL query from the linux command line and output the results in csv format?  </p>\n\n<p>Here's what I'm doing now:</p>\n\n<pre><code>mysql -u uid -ppwd -D dbname &lt;&lt; EOQ | sed -e 's/        /,/g' | tee list.csv\nselect id, concat(\"\\\"\",name,\"\\\"\") as name\nfrom students\nEOQ\n</code></pre>\n\n<p>It gets messy when there are a lot of columns that need to be surrounded by quotes, or if there are quotes in the results that need to be escaped.</p>\n"},{"tags":["bash","shell","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12938810,"title":"awk script, need to return results on multi lines following keyword","body":"<p>Using this:</p>\n\n<pre><code>awk '$1 == \"pool\" { f=1; print $1,$2; next }         \n     f == 1 { if ($1 == \"pool\") { print }               \n              else if ($1 == \"members\") { print }   \n              else if ($0 ~ /^}/) { f=0 }               \n     }' bigip.conf\n</code></pre>\n\n<p>That works fine until the config has the IPs on following lines. \nHow can I get it to print the IPs if they are on following lines. \nThe config has both, some have it on the same line, some on then next 1, 2 or 3 lines.</p>\n\n<p>the data :</p>\n\n<pre><code>    pool pl_stage_xxx_microsites_9483 {\n       monitor all tcp_half_open\n       members {\n          11.11.11.11:9483 {}\n          11.22.22.22:9483 {\n             session user disabled\n          }\n       }\n}\n</code></pre>\n"},{"tags":["bash"],"answer_count":5,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1207,"score":5,"question_id":3811345,"title":"How to pass all arguments passed to my bash script to a function of mine?","body":"<p>Let's say I have defined a function abc() that will handle all the logic related to analising the arguments passed to my script.</p>\n\n<p>How can I pass all arguments my bash script has received to it? The number of params is variable, so I can't just hardcode the arguments passed like this:</p>\n\n<pre><code>abc $1 $2 $3 $4\n</code></pre>\n\n<p>edit: Better yet, is there any way for my function to have access to the script arguments' variables?</p>\n\n<p>Thanks</p>\n"},{"tags":["linux","bash","scripting"],"answer_count":8,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":1951,"score":8,"question_id":511683,"title":"bash: get list of commands starting with a given string","body":"<p>Is it possible to get, using Bash, a list of commands starting with a certain string?<br />\nI would like to get what is printed hitting &lt;tab&gt; twice after typing the start of the command and, for example, store it inside a variable.</p>\n"},{"tags":["bash","error-handling","find","file-permissions"],"answer_count":6,"favorite_count":15,"up_vote_count":47,"down_vote_count":0,"view_count":21089,"score":47,"question_id":762348,"title":"How can I exclude all \"permission denied\"-messages from \"find .\"?","body":"<p>I need to hide all \"permission denied\"-messages from:</p>\n\n<pre><code>find . &gt; files_and_folders\n</code></pre>\n\n<p>I am experimenting when such message arises. I need to gather all folders and files, to which it does not arise. Is it possible to direct the permission levels to the files_and_folders-file? How can I hide the errors at the same time?</p>\n"},{"tags":["bash","bash4"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":610,"score":2,"question_id":793678,"title":"Unable to use Checkjobs and Autocd in Bash 4","body":"<p>There are new options in Bash 4: checkjobs and autocd.\nHowever, I did not find documentation for them at </p>\n\n<pre><code>man bash\n</code></pre>\n\n<p>I run unsuccessfully</p>\n\n<pre><code>{checkjobs,autocd}\n</code></pre>\n\n<p>I found the following in release notes</p>\n\n<pre><code> There is a new `checkjobs` option that causes the shell to check for and\n report any running or stopped jobs at exit\n</code></pre>\n\n<p>and</p>\n\n<pre><code>There is a new `autocd` option that, when enabled, causes bash to attempt\nto `cd` to a directory name that is supplied as the first word of a\nsimple command.\n</code></pre>\n\n<p><strong>How can you use autocd and checkjobs?</strong></p>\n"},{"tags":["bash","ifs"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":50,"score":4,"question_id":12933132,"title":"How bash IFS is working in this example?","body":"<p>I am reading about <a href=\"http://tldp.org/LDP/abs/html/internalvariables.html\" rel=\"nofollow\">bash internal variables</a> and came across this <code>IFS</code> example:</p>\n\n<pre><code>output_args_one_per_line()\n{\n  for arg\n  do\n    echo \"[$arg]\"\n  done #  ^    ^   Embed within brackets, for your viewing pleasure.\n}\n</code></pre>\n\n<p><strong>CASE1</strong></p>\n\n<pre><code>IFS=\" \"\nvar=\" a  b c   \"\n\noutput_args_one_per_line $var\n#OUTPUT\n# [a]\n# [b]\n# [c]\n</code></pre>\n\n<p><strong>CASE2</strong></p>\n\n<pre><code>IFS=:\nvar=\":a::b:c:::\"               # Same pattern as above\nCASE2   \n                        # but substituting \":\" for \" \"  ...\noutput_args_one_per_line $var\n# []\n# [a]\n# []\n# [b]\n# [c]\n# []\n# []\n</code></pre>\n\n<p>Now, according to my understanding if value of <code>IFS</code> is default <code>\\t\\n</code> than leading and trailing whitespaces are removed. So, for case1 bash sees <code>var</code> as <code>a b c</code> therefore the output.</p>\n\n<p>For case2 according to me bash sees <code>var</code> as <code>|a||b|c|||</code> treat <code>|</code> as <code>space</code> here. I checked it using </p>\n\n<pre><code>Noob@Noob:~/tmp$ IFS=$':' FOO=$\":a::b:c:::\"; echo $FOO $'x'\n a  b c   x\n</code></pre>\n\n<p>So, my expected output for case 2 is</p>\n\n<pre><code># []\n# [a]\n# []\n# []\n# [b]\n# [c]\n# []\n# []\n# []\n</code></pre>\n\n<p>So, can someone explain to me internally how bash is treating <code>var</code> in case 2 and where am I going wrong iin my understanding.</p>\n"},{"tags":["bash","shell","inotify"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12904957,"title":"inotify with network server","body":"<p>I was thinking this was going to be rather easy, but it's turn out not to be.</p>\n\n<p>I have a mounted network server that has <code>inotifywatch</code> running on it watching a folder. I was wanting to have this set up so that anyone on the network with access to this server could drop a file into the watched folder and have it execute a script. Unfortunately it doesn't seem to trigger unless the file was moved on the server itself.</p>\n\n<p>Is there any way to make <code>inotify</code> watch a folder in a way that if any file, from anywhere, triggers the inotify event? Or should I look into something else?</p>\n\n<p>For reference, here is what I'm using in a shell script:</p>\n\n<pre><code>inotifywait -m --format '%f' -e moved_to \"/mnt/server/folder/\" |\nwhile read NAME\ndo\n     echo $NAME\ndone\n</code></pre>\n"},{"tags":["bash","shell","scripting"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":47,"score":0,"question_id":12936197,"title":"Returning a value from child shell script to a parent script","body":"<p><br/>\n    I am having two shell scripts, say script1.sh and script2.sh. I am calling script2.sh from script1.sh. In script2.sh a few evaluations are done and based the results a flag is being set. Now i need to pass the flag to script1.sh based on which it will be decided whether the script1.sh should continue it execution or exit. I am not using functions. and while i export the flag, in script1.sh it is blank. <br/> My question now is how do i return the flag from script2.sh ?<br/> Any help ? Any Ideas? Experiences to share? </p>\n"},{"tags":["bash","awk","cluster-computing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12935572,"title":"bash script: execute a command and pass its output to awk","body":"<p>I'm having issues with a bash script. Basically, in my script I run the command</p>\n\n<pre><code>bjobs -u $1\n</code></pre>\n\n<p>$1 is the script argument, and it's the id of a user on my cluster. If user $1 has no running/pending jobs on the cluster, bjobs prints</p>\n\n<pre><code> No unfinished jobs found\n</code></pre>\n\n<p>to stdout. Also, exit status is 255. If user $1 does have jobs, bjobs print:</p>\n\n<pre><code>JOBID   USER    STAT  QUEUE      FROM_HOST   EXEC_HOST   JOB_NAME   SUBMIT_TIME\n45823   .......\n45824   .......\n.\n.\n</code></pre>\n\n<p>and exit status is 0. I would like awk to parse the output of bjobs. I tried </p>\n\n<pre><code>bjobs -u $1 | awk '...'\n</code></pre>\n\n<p>where '...' is my awk parsing program. This doesn't work so well, because apparently when user $1 doesn't have running/pending jobs, the string \"No unfinished jobs found\" is <strong><em>not</em></strong> passed to awk. The same happens with</p>\n\n<pre><code>bjobs -u $1 &gt; foo\nawk '...' foo \n</code></pre>\n\n<p>Any suggestions?</p>\n"},{"tags":["bash","shell","unix","size"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12935820,"title":"Total Size in a Module","body":"<p>I am trying to find the total size of the <code>libc.a</code> module using the unix <code>size</code> command.</p>\n\n<p>When running it, I get a lot of different files total sizes. What is one possible way in which I can take one column of the output of 'size' (the column <code>dec</code> in this case which has the total size of the file in decimal) and add them up?</p>\n\n<p>Is that possible to do in the command line?</p>\n"},{"tags":["bash","stdin"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12935444,"title":"Command line arguments in bash script","body":"<p>I am trying to read command line arguments in bash but I have problems to read on the 10th column\nHere is my sample script:</p>\n\n<pre><code>#-------------------------------------------------------\n#!/bin/bash\nan=$2  mn=$4  dy=$6  der=$8  new=$10  sec=(${12} ${13})\necho $an $mn  $dy   $der  $new  $sec \n#--------------------------------------------------------\n</code></pre>\n\n<p>I have run the above script \"test.sh\" as </p>\n\n<pre><code>./test.sh -yr cat  -mn Jan  -dy  tuesday  -der tt  -new car -sec 001 001\n</code></pre>\n\n<p>The output is: </p>\n\n<pre><code>cat Jan tuesday tt -yr0 001\n</code></pre>\n\n<p>But for variable $new ($10) the answer should have been <code>car</code>  but I get <code>-yr0</code></p>\n\n<p>Any idea why ?</p>\n\n<p>yacob</p>\n"},{"tags":["bash","shell","math","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":85,"score":0,"question_id":12914652,"title":"Calculating in the terminal","body":"<p>I used this in the bash terminal to get the mean in a humongous file:</p>\n\n<p><code>awk 'BEGIN{s=0;}{s=s+$2;}END{print s/NR;}' file</code></p>\n\n<p>It worked. Just out of curiosity (i.e. for future knowledge) I would like to know about common ways to calculate in the shell. R, bash, python...? Quick and dirty but still robust and fast. </p>\n"},{"tags":["html","bash","parsing","sed"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":12929316,"title":"extract integer from html according to multiple parameters with sed","body":"<p>First of all, let me say this:<br>\nI know regx'ing html is considered a bad approach, but if chuck norris can, why can't I? ;)<br>\nI want to parse this html page: <a href=\"http://pastebin.com/unAifctF\" rel=\"nofollow\">http://pastebin.com/unAifctF</a><br>\nbased on three parameters. i tried: (thank you pixellany)</p>\n\n<pre><code>sed -n  '/hebrew/{/DESPiTE/s/downloadsubtitle.php?id=/XXX/1};s/.*XXX\\([0-9]*\\).*/\\1/p'  \n</code></pre>\n\n<p>which returns 228344 instead of 228338<br>\nand i tried: (thank you doubleDown) </p>\n\n<pre><code>sed -nr 's/.*downloadsubtitle.php\\?id\\=([0-9]+).*hebrew.*DESPiTE.*/\\1/p'  \n</code></pre>\n\n<p>which returns 228343 instead of 228338\nthe expected result is 228338 because it's the first number preceded by \"downloadsubtitle.php\\?id\\=\" and followed by \"hebrew\" and \"DESPiTE\"<br>\nwhat am I missing?</p>\n"},{"tags":["linux","bash","shell","cron"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":54,"score":-1,"question_id":12913016,"title":"cronjob wait understanding","body":"<p>bellow is my cronjob script what i want to only </p>\n\n<p>wait for <strong>3rd_job</strong> completion for starting <strong>4th,5th</strong></p>\n\n<p>&amp; wait for <strong>2nd_job</strong> completion for starting <strong>6,7,8th</strong> job.</p>\n\n<p>how can i achieve this thanks in advance</p>\n\n<p>currently for starting <strong>4,5th</strong> job it is waiting for the completion of <strong>1,2,3th</strong> job but i just want to wait for <strong>3rd</strong> for starting <strong>4,5th</strong> and wait for only <strong>2nd</strong> completion for stating <strong>6,7,8th</strong></p>\n\n<pre><code>    #!/bin/bash\n    cd /home/ubuntu/\n    PATH=$PATH:/usr/local/bin\n    export PATH\n    nohup scrapy crawl 1st_job &amp;\n    nohup scrapy crawl 2nd_job &amp;\n    nohup scrapy crawl 3rd_job &amp;\n    wait $(pgrep 3rd_job)\n    nohup scrapy crawl 4th_job &amp;\n    nohup scrapy crawl 5th_job &amp;\n    wait $(pgrep 2nd_job)\n    nohup scrapy crawl 6th_job &amp;\n    nohup scrapy crawl 7th_job &amp;\n    nohup scrapy crawl 8th_job &amp;\n</code></pre>\n"},{"tags":["bash","script","terminal"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12932694,"title":"Bash Scripting, Respond to Keypress","body":"<p>I built a tiny menu to use in a bash terminal with multiple options to select via number keys. </p>\n\n<pre><code>#!/bin/bash\nPS3='Teleport to ... '\noptions=(\"→ option 1\" \"→ option 2\" \"Quit\")\nselect opt in \"${options[@]}\"\ndo\n    case $opt in\n        \"→ option 1\")\n            echo \"option 1\"\n            break\n            ;;\n        \"→ option 2\")\n            echo \"option 2\"\n            break\n            ;;\n        \"Quit\")\n            break\n            ;;\n        *) echo invalid option\n            break\n            ;;\n    esac\ndone\n</code></pre>\n\n<p>At the moment I still need to confirm the selection by pressing <em>enter</em>. Is it possible to make the script respond to the input of the first pressed key directly?</p>\n"},{"tags":["bash","printf","numeric","bc"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12861569,"title":"How do I change a couple value/error from the value+-error format to the value(error)format?","body":"<p>I have a few data text files whose lines are values with their error, like these:</p>\n\n<pre><code>...\n6  90.3785794742981 0.0952997386139722\n40 1028.46336161948 4.41798447319325\n...\n</code></pre>\n\n<p>the third column is the error relativley to the second column. I would like to write a script that prints them in a more human-readable format, that is to print the value with the right number of significant digits and to print the error on the last two digist between parenthesis, like this:</p>\n\n<pre><code>...\n6  90.379(95)\n40 1028.5(4.4)\n...\n</code></pre>\n\n<p>using regular expressions to extract the numbers wouldn't work right because of difficulties of handling the dot and because it would truncate numbers rather than approximate them, so i thought that i'd rather retrieve their magnitude with <code>printf</code> and handle them with <code>bc</code>. </p>\n\n<p>The code I wrote for this is as follows</p>\n\n<pre><code>#! /bin/bash\nwhile read a v verr\ndo\n    ov=`printf %e $v`\n    ov=${ov/*e/}\n    overr=`printf \"%e\" $verr`\n    overr=${overr/*e/}\ndov=$((1-$overr))\nv=`echo \"scale=0;$v*10^($dov)\" | bc -l`\nv=`printf %.0f $v`\nprintf \"$a %f(%.0f)\\n\" `echo \"lenght=length($v);$v*10^($((-$dov)))\" | bc -l` `echo \"$verr*10^($dov)\" | bc -l`\n done &lt; myfile.txt\n</code></pre>\n\n<p>what i get is </p>\n\n<pre><code>6 90.379000(95)\n40 1028.500000(44)\n</code></pre>\n\n<p>My code almost works, except for the appearence of those trailing zeroes.</p>\n\n<p>How do I get rid of them? Just cutting them would not be good because their number is not fixed and cutting them all would give rise to errors wheter the last digit actually is a zero.</p>\n"},{"tags":["python","perl","bash","shell","perlscript"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":12932298,"title":"shell script to find a string and print the current line and next line recursively","body":"<p>I have written a small script which searches the string and prints the current line. But m little confused to print the next line. I am ok with bash/perl/python</p>\n\n<pre><code>#!/bin/bash  \n\nCURRENT_DIR=`pwd`\ncnt=0\n\nfor dir in $(find $CURRENT_DIR -type d);\ndo\n\n\n    for myFile in $dir/*  \n    do \n\n    if [ -f \"$myFile\" ]; then\n        cat $myFile | while myLine=`line`\n        do\n     allFile=\"$myLine\"   \n        if echo \"$myLine\" | grep -q $1 ; then \n            echo \"$myFile\" \"$allFile\"   \"\"\n        fi  \n     #echo 'expr $count+1'\n     #echo   \"$allFile\"   \"\"\n        done #LINE  \n    fi\n    done #FILE\ndone # DIRECTORY\n</code></pre>\n"},{"tags":["bash","shell","path","command-path"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":118,"score":2,"question_id":9455315,"title":"directory specific PATH variable","body":"<p>I want to change my PATH variable depending on the current directory.</p>\n\n<p>For a project I'm using a set of scripts that I would like to run without specifying the full path to the script. Normally I would do that by adding the \"Scripts\" directory to the PATH variable.</p>\n\n<p>The thing is, for my other projects I don't want to have these Scripts in my PATH. Is there a way to change the PATH variable according to the current directory? If so I'd be happy to learn how.</p>\n"},{"tags":["osx","bash","path","command-path"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":2741,"score":2,"question_id":2314002,"title":"Adding mysql to my .bashrc PATH","body":"<p>Ok, maybe I'm doing something really stupid.</p>\n\n<p>I'm on OSX 10.6.1.</p>\n\n<p>I want to add mysql to my path, so I add the following to my .bashrc</p>\n\n<pre><code>PATH = ${PATH}:/usr/local/mysql/bin\nexport PATH\n</code></pre>\n\n<p>upon running terminal, it doesn't work, which I expect, because .bash_profile is not loading .bashrc at the moment.</p>\n\n<p>but if I manually enter bash, i get the following error</p>\n\n<pre><code>bash: PATH: command not found\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["linux","bash","path","command-path"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":276,"score":1,"question_id":2831910,"title":"Is there a reasonable way to attach new path to PATH in bashrc?","body":"<p>Guys\nI constantly need to attach new paths to the PATH environment variable in .bashrc, like below:\nexport PATH=/usr/local/bin:$PATH\nThen to make it take effect, I always do 'source ~/.bashrc' or '. ~/.bashrc', while I found one shortcoming of doing so which make me uncomfortable.</p>\n\n<p>If I keep doing so, the PATH will getting longer and longer with many duplicated entries, for example in the previous command, if I source it twice, the value of PATH will be \nPATH=/usr/local/bin:/usr/local/bin:/usr/local/bin:$PATH(&lt;-the original path).</p>\n\n<p>Is there a more decent way to attach new path to PATH in bashrc without making it ugly?</p>\n"},{"tags":["bash","shell","terminal","environment-variables","command-path"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":657,"score":3,"question_id":1416024,"title":"Bash - $PATH and ${PATH}","body":"<p>What is the difference between using an environment variable, like PATH, as $PATH or ${PATH}?</p>\n"},{"tags":["bash","path","command-path"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":136,"score":1,"question_id":6253169,"title":"Automatic changes to $PATH in Bash","body":"<p>The project I work on has some executable scripts in the repository. These scripts are actually tools that automate some development tasks and I invoke them only when I'm inside the repo and they work only on files in the repo. My typical working session looks like this:</p>\n\n<pre><code>$ cd $REPO\n$ ./tools/start-session\n$ some-script some arguments\n$ other-script other arguments\n</code></pre>\n\n<p>In other words, the <code>start-session</code> script just adds an appropriate entry to the <code>$PATH</code> variable.</p>\n\n<p>I'd like to automate it further so that I don't have to call the <code>$REPO/tools/start-session</code> script. What I'd like to achieve is to make bash automatically detect that I'm in my repo dir and append proper entry to <code>$PATH</code>. The point is that I have many working copies of my repo and the tools differ a bit in each branch, I move between working copies frequently and I'd like my shell to kind of guess which script I want to invoke.</p>\n\n<p>How do I do that?</p>\n\n<p>The only thing I can think of is that the <code>$PS1</code> variable gets executed each time a command is completed, so I could somehow hook some <code>$PATH</code>-changing script in there using backticks, i.e. do some thing like</p>\n\n<pre><code>PS1=`update-path`$PS1\n</code></pre>\n\n<p>But this seems not the right way.</p>\n"},{"tags":["bash","path","command-path"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":134,"score":0,"question_id":7529575,"title":"Bash: how to add subdirs to the PATH","body":"<p>In <code>.bashrc</code> I have added a dir where I put some scripts. Is that possible - to add all its subdir automatically - so that I would not have to add them one-by-one manually? (and wouldn't have to visit <code>.bashrc</code> every time I'll make a dir there)</p>\n\n<p><strong>Edit</strong>:</p>\n\n<p>Using Laurent Legrand's solution, that's what I'm using now:</p>\n\n<pre><code>PATH=$PATH:/usr/local/share/NAMD_2.7_Linux-x86_64:/usr/local/share/jmol-12.0.31:/usr/local/share/NAMD_2.7_Linux-x86_64_orig:/usr/local/share/sage-4.6.2:/opt/mongoDB/bin\n\nPATH=$PATH:$(find ~/Study/geek/scripts -type d -printf \"%p:\")\n</code></pre>\n\n<p>this adds the dir and its sub dirs.</p>\n"},{"tags":["bash","path","command-path"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":124,"score":0,"question_id":7807062,"title":"$PATH is not working","body":"<p>The following file worked yesterday, but today it isn't working any more.</p>\n\n<p>Could be caused by either the <code>apt-get upgrade</code> or <code>autoremove</code> that I performed.</p>\n\n<p>For some reason $PATH isn't working, I have no idea why not.</p>\n\n<pre><code>$ cat GW\n#!/bin/bash\nPATH=\"/media/Data/Wine/WineVersions/1.3.24/bin:$PATH\"\nexport WINEPREFIX=\"/media/Data/Wine/WinePrefixes/GW\"\nexport WINEDEBUG=\"-all\"\ncd \"/media/Data/Wine/WinePrefixes/GW/drive_c/Program Files/Guild Wars\"\nwine Gw.exe\n\n$ ./GW\n./GW: line 6: /media/Data/Wine/WineVersions/1.3.24/bin/wine: No such\nfile or directory\n\n$ ls /media/Data/Wine/WineVersions/1.3.24/bin/wine\n/media/Data/Wine/WineVersions/1.3.24/bin/wine\n</code></pre>\n\n<p>I also tried <code>export PATH=\"blablabla\"</code> but that didn't work either.</p>\n\n<p>Edit: Requested info</p>\n\n<pre><code>$ file /media/Data/Wine/WinePrefixes/GW/drive_c/Program\\ Files/Guild\\ Wars/Gw.exe\n/media/Data/Wine/WinePrefixes/GW/drive_c/Program Files/Guild Wars/Gw.exe: PE32 executable for MS Windows (GUI) Intel 80386 32-bit\n\n# Not a symlink\n$ ls -l /media/Data/Wine/WineVersions/1.3.24/bin/wine gives -rwxr-xr-x 1 j j 7244\n2011-08-11 17:18 /media/Data/Wine/WineVersions/1.3.24/bin/wine\n</code></pre>\n"},{"tags":["bash","node.js","amazon-ec2","sudo","command-path"],"answer_count":7,"favorite_count":8,"up_vote_count":14,"down_vote_count":0,"view_count":4795,"score":14,"question_id":4976658,"title":"On EC2: sudo node command not found, but node without sudo is ok","body":"<p>I have just installed nodejs on a new EC2 micro instance.</p>\n\n<p>I installed it normally, ./configure -> make -> sudo make install.</p>\n\n<p><strong>Problem:</strong> When I run \"node\" under ec2-user, it runs perfectly. When I run \"sudo node\", it fails.</p>\n\n<p>I found out that node is in:</p>\n\n<pre><code>[ec2-user@XXXX ~]$ whereis node\nnode: /usr/local/bin/node /usr/local/lib/node\n</code></pre>\n\n<p>and the current path is</p>\n\n<pre><code>[ec2-user@XXXX ~]$ echo $PATH\n/usr/local/bin:/bin:/usr/bin:/opt/aws/bin:/home/ec2-user/bin\n</code></pre>\n\n<p>but, the sudo path is</p>\n\n<pre><code>[root@ip-10-112-222-32 ~]# echo $PATH\n/usr/local/sbin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/aws/bin:/root/bin\n</code></pre>\n\n<p>then I tried to edit the root PATH to include the paths to node, so \"node\" runs when I'm logged in as root - but it still won't work when I log in as ec2-user and run \"sudo node\".</p>\n\n<p>I need this to install npm properfly. Any idea on how to include the node path while running \"sudo node\"?</p>\n"},{"tags":["bash","file","copy","directories"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3028,"score":3,"question_id":3643848,"title":"Copy files from one directory into an existing directory","body":"<p>In bash I need to do this:</p>\n\n<ol>\n<li><p>take all files in a directory </p></li>\n<li><p>copy them into an existing directory</p></li>\n</ol>\n\n<p>How do I do this? I tried cp -r t1 t2 (both t1 and t2 are existing directories, t1 has files in it) but it created a directory called t1 inside t2, I don't want that, I need the files in t1 to go directly inside t2. How do I do this?</p>\n"},{"tags":["python","image","bash","animated-gif"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":12923775,"title":"bash evenly choose 10 numbers","body":"<p>In my current problem, I have several hundred animated gifs that will preform a certain animation a few times and then do a different animation the last time. So that means the gif loops 3 times or so then on the 4th time instead of looping it will do a different animation. These loops are all just hardcoded into layers in the .gif file.   </p>\n\n<p>My goal is to determine the first loop and shrink the animation into ten frames. I figure that using python, I can find when the first frame equals a later frame (thereby finding the first full sequence and the number of frames). Now I have the number of frames that the animation takes, and this number is variable across the several hundred different images I'm working with. So for one image, the first loop will complete in 20 or so frames, another maybe in 25. Some will take 75 or so frames (since they are a very slow image)    </p>\n\n<p>My question is using these numbers (20, 25, 75, ... or whatever the first loop is) how can I best turn this into only 10. In my head I did a little math, and these is a good example of what I need to figure out how to generate</p>\n\n<pre><code>20 -&gt; 20/10 = 2 Resulting sequence: [0, 20) step 2\n25 -&gt; 25/10 = 2.5 Sequenece: [0, 25).... Step ?? should alternate between 2 and 3 somehow\n75 -&gt; 75/10 = 7.5 Sequenece: [0, 75).... Step ?? should alternate between 7 and 8 somehow\n</code></pre>\n\n<p>My solution could either be in bash script or python or whatever you can use from the bash shell.</p>\n"},{"tags":["bash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12929688,"title":"Autologin server using client application","body":"<p>I am learning bash programming. However, I am facing little problem. I want to write a script that auto logins, Cyberoam (that is, at web server 172.16.1.3) using Cyberoam client. So that I don't have to ever login on the webpage. I could write a simple script that does this, and schedule to run at startup. But I want more advanced script that scans the network and login. I also don't want to use more resources on my computer.  </p>\n\n<p>I tried this way:    </p>\n\n<pre><code>#!/bin/bash\n\nfunction CheckServer \n{\n    SLEEPTIME=300\n    while true; do\n        ping -c 1 173.16.1.3 &gt; /dev/null\n        if [ $? -ne 0 ]; then\n            Login;\n        fi\n\n        sleep $SLEEPTIME\n    done\n}\n\nfunction Login\n{\n    usrname=u10co067\n    cd ~/bin\n    if  test -f crclient; then\n        ./crclient -u $usrname\n    else\n        echo \"Cyberoam Client Missing\"\n    fi\n}\n</code></pre>\n\n<p>Do any of you guys have any better idea on how can I do this task?</p>\n"},{"tags":["linux","bash","shell","rsync"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12929391,"title":"Restrict shell commands","body":"<p>I create a username with bash shell , normal shell that's available all commands , but i intend to use this shell for backup service , which is allow only rsync command , so i am trying to restrict this shell to execute rsync commands only , how could i do with .bash_profile and bashrc ?</p>\n\n<p>Addtional Information : this shell used for backup files and folder only and i connect other shell to rsync using .ssh key</p>\n"},{"tags":["ios","xcode","bash","unix","build"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":73,"score":4,"question_id":12927255,"title":"Xcode Build Script (Build Phases->Run Script) Increment Build Version based on Username(User)","body":"<p>When compiling a project, this script should increment the Build Version of the Xcode project by one, when the system username matches. Keep in mind that these are just Unix commands in a script (not Applescript, Python, or Perl) inside Target->Build Phases->Run Script in Xcode.</p>\n\n<p>I've done \"echo $USER\" in terminal. This prints the username of the logged-in user just fine, and it's the same string I placed in the conditional statement in the second block of code.</p>\n\n<p>The first block of code works. The second, which adds the conditional statement, does not.</p>\n\n<pre><code>#!/bin/bash\nbuildNumber=$(/usr/libexec/PlistBuddy -c \"Print CFBundleVersion\" \"$INFOPLIST_FILE\")\nbuildNumber=$(($buildNumber + 1))\n/usr/libexec/PlistBuddy -c \"Set :CFBundleVersion $buildNumber\" \"$INFOPLIST_FILE\"\n</code></pre>\n\n<p><br> </p>\n\n<pre><code>#!/bin/bash\nusername=$USER\nif [ username == \"erik\" ]; then\nbuildNumber=$(/usr/libexec/PlistBuddy -c \"Print CFBundleVersion\" \"$INFOPLIST_FILE\")\nbuildNumber=$(($buildNumber + 1))\n/usr/libexec/PlistBuddy -c \"Set :CFBundleVersion $buildNumber\" \"$INFOPLIST_FILE\"\nfi\n</code></pre>\n\n<p><b>Syntax concerns:</b>\n  <br>Parsing of $USER (case sensitive) \n  <br>Semicolon right after closing bracket in if statement\n  <br>Then statement on same line as if statement   </p>\n"},{"tags":["bash","find","spaces","sunos"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12928857,"title":"Ignore spaces in Solaris 'find' output","body":"<p>I am trying to remove all empty files that are older than 2 days. Also I am ignoring hidden files, starting with dot. I am doing it with this code:</p>\n\n<pre><code>find /u01/ -type f -size 0 -print -mtime +2 | grep -v \"/\\\\.\" | xargs rm\n</code></pre>\n\n<p>It works fine until there are spaces in the name of the file. How could I make my code ignore them?</p>\n\n<p>OS is Solaris.</p>\n"},{"tags":["linux","bash","printing","skip"],"answer_count":7,"favorite_count":11,"up_vote_count":42,"down_vote_count":0,"view_count":20174,"score":42,"question_id":604864,"title":"Print a file skipping X lines in Bash","body":"<p>I have a very long file which I want to print but skipping the first 1e6 lines for example. I look into the cat man page but I did not see nay option to do this. I am looking for a command to do this or a simple bash program. I know how to do it using a program in C but I want to do it using the common commands. Any way to do it? Thanks a lot in advance.. </p>\n"},{"tags":["linux","bash","scp"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":2,"view_count":78,"score":-1,"question_id":12920947,"title":"Does scp create the target folder if it does not exist","body":"<p>I am wondering if scp will create the target folder if it does not exist on the remote server. For example, would this work? </p>\n\n<pre><code>scp -r /data/install/somefolder user@ftpserver.com:/data/install/somefolder\n</code></pre>\n\n<p>Here the folder <code>/data/install/somefolder</code> doesn't exist on ftp server, so would this command create it?</p>\n\n<p>N.B. I have read about rsync but am not really sure how it works or how to use it yet.</p>\n"},{"tags":["arrays","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":97,"score":3,"question_id":12925005,"title":"read array with spaces","body":"<p>Say I have the file <code>foo.txt</code></p>\n\n<pre><code>\"The\" \"quick brown\" \"fox\" \"jumps over\" \"the\" \"lazy dog.\"\n</code></pre>\n\n<p>I would like to read these \"fields\" from the file into an array. However my attempt is failing if the field has a space</p>\n\n<pre><code>$ read -a bar &lt; foo.txt\n\n$ echo ${bar[0]}\n\"The\"\n\n$ echo ${bar[1]}\n\"quick\n</code></pre>\n"},{"tags":["bash","expect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12925986,"title":"expect in bash script with special characters 2 parts","body":"<p>So I am trying to get expect within bash to work correctly.</p>\n\n<p>Here is the script contents...</p>\n\n<pre><code>[root@mysql1 ~]# cat mysql_repl.sh\n#!/bin/bash\nread -p \"Master server ip: \" masterip\nread -p \"What is the regular user to log into the master server: \" masteruser\nread -p \"What is the password for the regular user for the master server: \" masterpass\nread -p \"What is the root password for the master server: \" masterrootpass\n\nread -p \"Slave server ip: \" slaveip\nread -p \"What is the regular user to log into the slave server: \" slaveuser\nread -p \"What is the password for the regular user for the slave server: \" slavepass\nread -p \"What is the root password for the slave server: \" slaverootpass\n\n\n\nexpect -c \"set slaveip $slaveip;\\\nset slaveuser $slaveuser;\\\nset slavepass $slavepass;\\\nset timeout -1;\\\nspawn /usr/bin/ssh $slaveip -l $slaveuser 'ls -lart';\\\nmatch_max 100000;\nexpect *password:;\\\nsend -- $slavepass\\r;\\\ninteract;\"\n</code></pre>\n\n<p>Here is the output of the script...</p>\n\n<pre><code>[root@mysql1 ~]# ./mysql_repl.sh\nMaster server ip:\nWhat is the regular user to log into the master server:\nWhat is the password for the regular user for the master server:\nWhat is the root password for the master server:\nSlave server ip: xxx.xxx.xxx.xxx\nWhat is the regular user to log into the slave server: rack\nWhat is the password for the regular user for the slave server: test\nWhat is the root password for the slave server: DVJrPey99grJ\nspawn /usr/bin/ssh 198.61.221.179 -l rack 'ls -lart'\nrack@198.61.221.179's password:\nbash: ls -lart: command not found\n</code></pre>\n\n<p>The command is not executing correctly. I also tried /bin/ls and it still can not find it.</p>\n\n<p>Second Part... same script...</p>\n\n<p>I have a variable in bash,  specifically, a password.  In this case the password is \"as$5!@?\"\nWhat I want to do is go through each character, test if it is a special character and escape out of it.  So for instance...</p>\n\n<pre><code>pass=as$5!@?\n</code></pre>\n\n<p>What I have so far is close but not working for special characters, it will work for non-special...</p>\n\n<pre><code>echo -n $pass | while read -n 1 c; do [[ \"$c\" = [!@#$%^&amp;*().] ]] &amp;&amp; echo -n \"\\\\\"; echo -n $c; done\n</code></pre>\n\n<p>Anyone have thoughts on how I can add a \\ before each special character?</p>\n\n<p>Hope that clears up the question.</p>\n"},{"tags":["bash","script","iteration"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12925444,"title":"Prevent variable iteration in bash script for loop","body":"<p>I have a bash script in which i define a certain path as such:</p>\n\n<p><code>MY_PATH=/to/my/path</code></p>\n\n<p>I also have a set of directories within MY_PATH and I store these directories in an array, as such:</p>\n\n<pre><code>DIRECTORIES=\"/dir1/\n/dir2/\n/dir3/\"\n</code></pre>\n\n<p>What I want to do is iterate over all the $DIRECTORIES in $MY_PATH, so I tried this:</p>\n\n<pre><code>for dir in $MY_PATH$DIRECTORIES\ndo\n    echo \"Processing $dir\"\nend\n</code></pre>\n\n<p>However, this gives the following undesired output: </p>\n\n<pre><code>Processing /to/my/path/dir1/           #Correct!\nProcessing /dir2/                      #What I want: Processing /to/my/path/dir2/\nProcessing /dir3/                      #What I want: Processing /to/my/path/dir3/\n</code></pre>\n\n<p>Is there any way to prevent iteration over $MY_PATH while preserving iteration over $DIRECTORIES so that I can achieve the desired output (see above)?</p>\n"},{"tags":["linux","bash","daemon","nohup"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12926799,"title":"background jobs change to daemon without nohup/disown?","body":"<p>a strange thing to me\na script while.sh,it's content is:</p>\n\n<pre><code>while [ 1 ];do\nsleep 1\necho `date`\ndone\n</code></pre>\n\n<p>run as $while.sh >&amp; while.log &amp; (without nohup or disown or setsid or double fork())\nexit and login again can see this process is still exist，it's ppid is 1 and it's tty is ?</p>\n\n<p>my system is rhel6(rhel5 is the same, bash</p>\n\n<p>in centos5.x it must use nohup or disown or do double fork() in code</p>\n\n<p>what happen in rhel6</p>\n"},{"tags":["linux","bash","scripting","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":300,"score":1,"question_id":2091300,"title":"Loop exits after first iteration","body":"<pre><code>cat hosts.txt | while read h; do telnet $h; done\n</code></pre>\n\n<p>When I run this, it telnets to first host which denies the connection but then exits instead of looping over the other hosts in the file.\nWhy is it exiting the loop after the first host and how can I fix it?</p>\n\n<p>Thanks.</p>\n"},{"tags":["linux","bash","sed","substitution"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":12912357,"title":"sed - batch 'key=value' substitute","body":"<p>I'm working on a function to perform multiple <code>key=value</code> substitutions with <code>sed</code>:</p>\n\n<pre><code>batch_sub () {\n    local file=\"${@: -1}\" # Last argument is file to be changed.\n    [[ -w \"${file}\" ]] || { echo \"Invalid file: ${file}\" ; return 1 ; }\n    for arg in \"${@}\" ; do\n        [[ $arg =~ (.*)=(.*) ]] || continue\n        # 'trim_str' will trim leading &amp; trailing spaces.\n        local key=$(trim_str \"${BASH_REMATCH[1]}\")\n        local value=${BASH_REMATCH[2]}\n        sed -i 's@'\"\\(${key}\"' *=\\).*@\\1'\"${value}\"'@' \"${file}\"\n    done\n}\n</code></pre>\n\n<p>this function accepts arguments like:</p>\n\n<pre><code>batch_sub \"a = x\" \"b = y\" \"c = z\" \"a.b.d.e=udp://b:8080\" \"/tmp/file\"\n</code></pre>\n\n<p>and works fine.  But what I want is to make it accept arguments like this:</p>\n\n<pre><code>batch_sub \"a = x b = y c = z a.b.d.e=udp://b:8080\" \"/tmp/file\"\n</code></pre>\n\n<p>Furthermore, it would be nice if <code>sed</code> is invoked only once inside this function:</p>\n\n<pre><code>sed -i -e 's/$key=/\\1$value/'\n       -e 's/$key1=/\\1$value1/'\n       '/tmp/file'\n</code></pre>\n\n<p>please advise.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":11172221,"title":"How do I include an environment variable inside an alias for bash?","body":"<p>I am pretty new to bash, and I want to include an env for bash aliases.. I want to do something like the following</p>\n\n<pre><code>alias foo=\"bar $(baz)\"\n</code></pre>\n\n<p>So that I could do something like the following</p>\n\n<pre><code>&gt; baz=40\n&gt; foo\n</code></pre>\n\n<p>and foo will expand to the command <code>bar 40</code>. Currently the above does not work because $(baz) is expanded while making the alias. Do I have to wrap this inside a function or something?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12925923,"title":"Run a Bash script command in a specified folder","body":"<p>In a Bash script, is it possible to run a command in a specific folder? For example, I'd like to create a script that prints the contents of the <code>/home</code> folder using <code>ls</code>, no matter which directory the script is saved in.</p>\n"},{"tags":["linux","bash","shell","ack"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12925496,"title":"ack ignore files matching a path in conjunction with positive path match","body":"<p>I want to do a command that searches all .js and .php files, but ignores paths with \"Thirdparty/\" and \"data.js\" in them.</p>\n\n<pre><code>ack -il -G '(\\.js|\\.php)' 'my search string'\n</code></pre>\n\n<p>I tried -v but it seems to inverse all -G operators, not just the preceeding operator:</p>\n\n<pre><code>ack -il -G '(\\.js|\\.php)' -G '(Thirdparty|data\\.js)' -v 'my search string'\n</code></pre>\n\n<p>I want to ignore ./Thirdparty paths and also ./data.js path but match all over .js and .php files.</p>\n"},{"tags":["bash","sed","awk"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":12847488,"title":"Interweave two files bash script","body":"<p>I am trying to interweave two files that contain one sentence per line. I double spaced (<code>sed G</code>) the first file and I would like to incorporate the content of the second file into those empty lines.</p>\n\n<p>How can I interweave both files so that the 1st line of file B goes below the 1st line in file A, the 2nd line of file B below the 2nd line of file A, until it reaches the end ?</p>\n\n<p>Example: [line number|sentence number|sentence]</p>\n\n<pre><code>1  1 fileA\n2   \n3  2 fileA\n4  \n5  3 fileA\n6  \n7  4 fileA\n</code></pre>\n\n<p>Expected result:</p>\n\n<pre><code>1  1 fileA\n2  1 FILEB\n3  2 fileA\n4  2 FILEB\n5  3 fileA\n6  3 FILEB\n7  4 fileA\n</code></pre>\n\n<p>This is for a bash script: can it be done with <code>sed</code> or <code>awk</code>?</p>\n"},{"tags":["bash","recursion","sed","find"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":76,"score":3,"question_id":12902873,"title":"Using `find` for multiple file types and replacing strings in found files","body":"<p>I'm trying to recursively find files of multiple types, and replace a certain string in each of the files found. But when I run the script, it only finds files of one single type.</p>\n\n<p>The command line I'm using is this</p>\n\n<pre><code>find . -name '*.tcl' -o -name '*.itcl' -o -name '*.db' -exec sed -i 's/abc/cba/g' {} +\n</code></pre>\n\n<p>Every time I run the command above, it only finds files of type <code>.db</code>. When I run it with a single file type, it works fine.</p>\n"},{"tags":["arrays","bash","variables","grep","cut"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12915414,"title":"Save the multiline output of 'grep | cut' to a variable","body":"<p>I'm new here and I'll do my best to explain my problem :)</p>\n\n<p>I want to write a backup script to save all <code>lv</code>'s used by KVM.</p>\n\n<p>OS: Ubuntu Server x64 12.04</p>\n\n<p>Bash 4.2.24</p>\n\n<p>XML file content:</p>\n\n<pre><code>&lt;source file='/dev/vg1/lv1'/&gt;\n&lt;source file='/dev/vg1/lv2'/&gt;\n</code></pre>\n\n<p>My grep/cut command</p>\n\n<pre><code>grep \"&lt;source file='.*.'/&gt;\" /backup/$SRCNAME/$DATUM/$SRCNAME.xml | cut -f2 -d\"'\" | cut -f4 -d\"/\"\n</code></pre>\n\n<p>This outputs</p>\n\n<pre><code>lv1\nlv2\n</code></pre>\n\n<p>How do I get it to do something with each output - is storing the output in an array the best way?</p>\n\n<p>I've been searching for an answer for 2 days now :( I've tried some loops and pipes, but nothing worked because my grep command is too specific :/</p>\n"},{"tags":["bash","script","upload","ftp"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12922711,"title":"Scripting a major multi-file multi-server FTP upload: is smart interrupted transfer resuming possible?","body":"<p>I'm trying to upload several hundred files to 10+ different servers. I previously accomplished this using FileZilla, but I'm trying to make it go using just common command-line tools and shell scripts so that it isn't dependent on working from a particular host.</p>\n\n<p>Right now I have a shell script that takes a list of servers (in <a href=\"ftp://user:pass@host.com\" rel=\"nofollow\">ftp://user:pass@host.com</a> format) and spawns a new background instance of 'ftp <a href=\"ftp://user:pass@host.com\" rel=\"nofollow\">ftp://user:pass@host.com</a> &lt; batch.file' for each server.</p>\n\n<p>This works in principle, but as soon as the connection to a given server times out/resets/gets interrupted, it breaks. While all the other transfers keep going, I have no way of resuming whichever transfer(s) have been interrupted. The only way to know if this has happened is to check each receiving server by hand. This sucks!</p>\n\n<p>Right now I'm looking at wput and lftp, but these would require installation on whichever host I want to run the upload from. Any suggestions on how to accomplish this in a simpler way?</p>\n"},{"tags":["linux","bash","unix","process"],"answer_count":4,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":1741,"score":6,"question_id":1715347,"title":"if-statement always evaluates to TRUE","body":"<p>Is there any reason why this script always returns \"running\", regardless of whether my  process is started or stopped?</p>\n\n<pre><code>if ps ax | grep -v grep | grep \"processName\" &gt; /dev/null\nthen\n   echo $\"running\"\nelse\n   echo $\"not running\"\nfi\n</code></pre>\n\n<p>Thank you very much</p>\n\n<p><strong>UPDATE :</strong>\nI add a full example of my script, maybe there is something wrong elsewhere.</p>\n\n<pre><code>case \"$1\" in\n  start)\n    # Start daemons.\n\n    echo -n $\"Starting daemon: \"\n    ;;\n\n  stop)\n    # Stop daemons.\n    echo -n $\"Shutting down: \"\n    echo\n    ;;\n  status)\n    pgrep -f \"ProcessName\" &gt; /dev/null\n    if [ $? -eq 0 ]; then\n        echo $\"ProcessName is running\"\n    else\n        echo $\"ProcessName is not running\"\n    fi\n    ;;\n  restart)\n    $0 stop\n    $0 start\n    ;;\n\n  *)\n    echo $\"Usage: $0 {start|stop|status|restart}\"\n    exit 1\nesac\n</code></pre>\n\n<p><strong>UPDATE 2 :</strong></p>\n\n<pre><code>[user@dev init.d]# pgrep -f \"MyProcess\" &gt; /dev/null\n[user@dev init.d]# echo $?\n0\n[user@dev init.d]# service MyProcess stop\nShutting down MyProcess: Terminated\n[user@dev init.d]# pgrep -f \"MyProcess\" &gt; /dev/null\n[user@dev init.d]# echo $?\n1\n</code></pre>\n\n<p>But <code>if [ $? -eq 0 ]; then</code> seems to be TRUE all the time</p>\n"},{"tags":["linux","bash","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12921438,"title":"How do I check what files I have permission to read in a directory?","body":"<p>I can see an individual file's permissions with <code>ls -l</code>.</p>\n\n<p>In the case where there are hundreds or thousands of files in a directory - most of which I can't read, how do I check which files I have permission to read?</p>\n"},{"tags":["linux","bash","shell","command-line"],"answer_count":5,"favorite_count":1,"up_vote_count":10,"down_vote_count":0,"view_count":20979,"score":10,"question_id":4651437,"title":"How to set a BASH variable equal to the output from a command?","body":"<p>I am working on a simple scripting project for work that involves the use of BASH.  I have a pretty simple script that is something like the following:</p>\n\n<pre><code>#!/bin/bash\n\nVAR1=\"$1\"\nVAR2=\"$2\"\n\nMOREF='sudo run command against $VAR1 | grep name | cut -c7-'\n\necho $MOREF\n</code></pre>\n\n<p>When I run this script from the command line and pass it the arguments I am not able to get any output.  However, when I run the commands contained within the MOREF variable, I am able to get output.  I would like to know how one can take the results of a command that needs to be run within a script, save it to a variable, and then output that variable on the screen?</p>\n"},{"tags":["bash","sh"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12921873,"title":"Parsing files in subdirectories","body":"<p>I´m using Zarafa as groupware ( for testing purpose only ) with XMail Server.\nTo import the mails to the Zarafa system, they need to be parsed by a binary called \"zarafa-dagent\".</p>\n\n<p>The folder structure is: <code>/var/MailRoot/domains/xxxxx.xxx/$user/Maildir/</code>\nThese folder have subdirectories <code>tmp</code>, <code>new</code> and <code>cur</code>.</p>\n\n<p>My problem is that I can´t get the script working to parse all emails in 10 or 12 <code>$userdirs</code>.</p>\n\n<p>Here is my current script:</p>\n\n<pre><code>userlist=`ls /var/MailRoot/domains/xxx.xx/`\nfilelist=\"/var/MailRoot/domains/xxx.xx/$userlist/Maildir/new/*\"\n\nfor user in $userlist;\n  do\n   cd \"/var/MailRoot/domains/xxx.xx/\"$user\"/Maildir/new/\";\n   \"/usr/bin/zarafa-dagent $user -f *\"\ndone\n</code></pre>\n\n<p>The script outputs a message about not finding the files to parse.</p>\n\n<p>The zarafa-dagent binary needs 2 arguments: 1 username, -f file_to_parse</p>\n"},{"tags":["bash","pipe"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12903957,"title":"Shell/Bash - pipe output into another script's input via a variable","body":"<p>Normally I would break things into separate actions and copy and paste the output into another input:</p>\n\n<pre><code>$ which git\n/usr/local/bin/git\n$ sudo mv git-credential-osxkeychain /usr/local/bin/git\n</code></pre>\n\n<p>Any quick hack to get output into input?\nsomething like:\n<code>$echo which wget | sudo mv git-credential-osxkeychain</code></p>\n"},{"tags":["git","bash","shell","tmux"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12921852,"title":".tmux.conf: update status commands on panel focus","body":"<p>I have a line in my .tmux.conf which simply shows me the git branch I am on.</p>\n\n<p><code>set                 -g status-right ' #[bg=colour33] Branch #[(git branch)] '</code></p>\n\n<p>When working in tmux, I regularly have panels in different directories. So my question becomes, is there a way to have the status command re-execute based on my \"panel's cwd\", instead of what it is doing now, where it seems to just hold onto the directory I was in when tmux was first opened.. ?</p>\n"},{"tags":["string","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12921082,"title":"String comparison in Bash script not working","body":"<p>I wrote the following script in Bash but it is not printing the desired output:</p>\n\n<pre><code>a=\"abc\"\n\nif (test \"$a\"=\"$a \") then \n    echo \"true \"\nelse\n    echo \"false \"\nfi\n</code></pre>\n\n<p>This script should print <code>false</code> but it isn't. I'm new to Bash scripting, so can anyone please tell me why it is not printing <code>false</code>?</p>\n"},{"tags":["bash","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12921839,"title":"Remove numbers within brackets only","body":"<p>How can I remove numbers within brackets only?\nFor example, I have the following text:</p>\n\n<pre><code>This is 14 April [988] text..\n</code></pre>\n\n<p>I would like to remove the <code>[988]</code> and leave <code>14</code> intact.</p>\n\n<p>What i've tried so far:</p>\n\n<pre><code>sed 's@\\[[0-9]\\]@@g'\n</code></pre>\n"},{"tags":["javascript","image","bash","pdf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12921052,"title":"Parsing PDF pages as javascript Images","body":"<p>As per title, is there any way I can parse pages from an unprotected PDF file as javascript Image() objects?</p>\n\n<p>It would also be ok to convert them before running the javascript, but I would like this to be done automatically and without the assistance of any library which requires installation.</p>\n\n<p>Someone over the internet has posted this Bash script. Unfortunately, I don't know Bash but running it was very simple.</p>\n\n<pre><code>#!/bin/bash\nPDF='doc.pdf'\nNUMPAGES=`identify -format %n \"$PDF\"`\n\nfor (( IDX=0; IDX&lt;$NUMPAGES; IDX++ ))\ndo\n  PAGE=$(($IDX+1))\n  convert -resize 1200x900 \"$PDF[$IDX]\" `echo \"$PDF\" | sed \"s/\\.pdf$/-page$PAGE.jpg/\"`\ndone\n\necho \"Done\"\n</code></pre>\n\n<p>But I got these errors:</p>\n\n<pre><code>line 3: identify: command not found\nline 5: ((: IDX&lt;: syntax error: operand expected (error token is \"&lt;\")\n</code></pre>\n\n<p>Pre-converting the PDF using a Bash script would be a good solution. Can someone fix the script above or either provide an alternative solution?</p>\n\n<p>Many thanks in advance!</p>\n"},{"tags":["bash","shell","sh"],"answer_count":5,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":9967,"score":4,"question_id":2578116,"title":"How can I test if line is empty in shell script?","body":"<p>I have a shell script like this: </p>\n\n<pre><code>cat file | while read line\ndo\n    # run some commands using $line    \ndone\n</code></pre>\n\n<p>Now I need to check if the line contains any non-whitespace character ([\\n\\t ]), and if not, skip it.\nHow can I do this?</p>\n"},{"tags":["bash","process"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":99,"score":1,"question_id":12916352,"title":"Shell script read missing last line","body":"<p>I have an ... odd issue with a bash shell script that I was hoping to get some insight on. </p>\n\n<p>My team is working on a script that iterates through lines in a file and checks for content in each one. We had a bug where, when run via the automated process that sequences different scripts together, the last line wasn't being seen.</p>\n\n<p>The code used to iterate over the lines in the file (name stored in <code>DATAFILE</code> was</p>\n\n<pre><code>cat \"$DATAFILE\" | while read line \n</code></pre>\n\n<p>We could run the script from the command line and it would see every line in the file, including the last one, just fine. However, when run by the automated process (which runs the script that generates the DATAFILE just prior to the script in question), the last line is never seen.</p>\n\n<p>We updated the code to use the following to iterate over the lines, and the problem cleared up:</p>\n\n<pre><code>for line in `cat \"$DATAFILE\"` \n</code></pre>\n\n<p><em>Note: DATAFILE has no newline ever written at the end of the file.</em></p>\n\n<p>My question is two part... Why would the last line not be seen by the original code, and why this would change make a difference?</p>\n\n<p>I only thought I could come up with as to why the last line would not be seen was:</p>\n\n<ul>\n<li>The previous process, which writes the file, was relying on the process to end to close the file descriptor.</li>\n<li>The problem script was starting up and opening the file prior fast enough that, while the previous process had \"ended\", it hadn't \"shut down/cleaned up\" enough for the system to close the file descriptor automatically for it.</li>\n</ul>\n\n<p>That being said, it seems like, if you have 2 commands in a shell script, the first one should be completely shut down by the time the script runs the second one.</p>\n\n<p>Any insight into the questions, especially the first one, would be very much appreciated.</p>\n"},{"tags":["bash","shell","unix","paste"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":124,"score":4,"question_id":12912727,"title":"Paste column to existing file in a loop","body":"<p>I am using the paste command in a bash loop to add new columns to a CSV-file. I would like to reuse the CSV-file. Currently I am using a temporary file to accomplish this:</p>\n\n<pre><code>while [ $i -le $max ]\n    do\n        # create text from grib2\n        wgrib2 -d 1.$(($i+1)) -no_header myGribFile.grb2 -text tmptxt.txt\n\n        #paste to temporary file\n        paste -d, existingfile.csv tmptxt.txt &gt; tmpcsv.csv  \n\n        #overwrite old csv with new csv\n        mv tmpcsv.csv existingfile.csv\n\n        ((i++))\n    done\n</code></pre>\n\n<p>After adding some columns the copy is getting slow, because the file is becoming bigger and bigger (every <code>tmptxt.txt</code> has about 2 MB, adding to approx 100 MB).</p>\n\n<p>A <code>tmptxt.txt</code> is a plain txt-file with one column and one value per row:</p>\n\n<pre><code>1\n2\n3\n.\n.\n</code></pre>\n\n<p>The <code>existingfile.csv</code> would then be</p>\n\n<pre><code>1,1,x\n2,2,y\n3,3,z\n.,.,.\n.,.,.\n</code></pre>\n\n<p>Is there any way to use the paste command to add a column to an existing file? Or is there any other way?</p>\n\n<p>Thanks</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":12918815,"title":"Bash redirect and stdin","body":"<p>I'm hoping this is a quick question for a guru.\nI have the following command which works great from the command line:</p>\n\n<pre><code> src/protected/yiic shell src/index.php &lt;&lt;&lt; createmvp &lt; /dev/tty\n</code></pre>\n\n<p>This command executes the yiic bash script and passes it the arguments shell and src/index.php.</p>\n\n<p>The first &lt;&lt;&lt; passes the argument createmvp to the terminal prompt which is displayed when yiic shell src/index.php is run on it's own.</p>\n\n<p>The second &lt; then allows std in to be returned to the application.</p>\n\n<p>However when I run this inside a bash script</p>\n\n<pre><code>#!/bin/bash\nsrc/protected/yiic shell src/index.php &lt;&lt;&lt; createmvp &lt; /dev/tty\n</code></pre>\n\n<p>The script doesn't pass createmvp into the shell.\nIf I remove the &lt; /dev/tty bit passing createmvp works, but then recapture the terminal obviously doesn't. Nothing I seem to do works.</p>\n\n<pre><code>while(!isset($input))\n{\n    $input = trim(fgets(STDIN));\n    if(!$input)\n        echo \"$configVar can not be NULL\";\n}\n</code></pre>\n\n<p>Any ideas, on how to make this work as it does from the command line?</p>\n\n<p>Thanks in advance</p>\n\n<p>Alan</p>\n"},{"tags":["iphone","objective-c","ios","xcode","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12917729,"title":"Create a run script to package and zip compiled library","body":"<p>So I want to create a run script (build phase) that will automatically create a .zip folder with the compiled library (.a file) and all the relevant .h files that are needed for distribution.</p>\n\n<p>Does anyone have a sample bash script for this? Something that can be replicated reliably over different projects?</p>\n\n<p>Many thanks.</p>\n"},{"tags":["bash","login","script","expect","openvpn"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":11299523,"title":"Using expect to log into VPN from a bash script","body":"<p>I connect to a VPN from console using something like:</p>\n\n<pre><code>sudo openvpn my.conf\n[sudo] password for user:\nEnter Auth Username:my_user\nEnter Auth Password:\n</code></pre>\n\n<p>I don't care about entering the admin pwd manually but I want to automate the vpn auth, I think expect is what I need to do this but I don't know how to use it and I never coded a bash script.</p>\n\n<p><strong>Could someone show me a simple bash script using expect so I can use it for this?</strong></p>\n"},{"tags":["perl","bash","pass"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12917585,"title":"Output of bash script in perl script","body":"<p>I want to embed a bash script inside  a perl script. I want to run my bash script by taking some variables from the perl script. Once it gets the variable the bash script takes over and tries to output the files that is created within.</p>\n\n<p>How can I pass the perl script variable to my bash script ?</p>\n\n<p>I do not know perl  but from what I read in Google, I can embed my bash script as</p>\n\n<pre><code>system(\"get_files.cmd -yr ${year}\");\n</code></pre>\n\n<p>where my bash script is <code>get_files.cmd</code>. </p>\n"},{"tags":["bash","vim","vimrc","vimscript"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12343325,"title":"Vim programmatically save with different file extension","body":"<p>I'm writing slim files in Vim and I want them to compile and save as html files when I save. Adding this to my .vimrc makes it happen for files in the current directory:</p>\n\n<p><code>au BufWritePost *.slim silent !slimrb % &gt; $(echo % | cut -d'.' -f1).html</code></p>\n\n<p>It doesn't work for files with a path like <code>../file.slim</code> since the cut command turns it into\n<code>./file.slim</code>.</p>\n\n<p>I need to use <a href=\"http://stackoverflow.com/a/965072/659910\">parameter expansions</a> but the % character is reserved for the current filepath when executing an external command in Vim.</p>\n\n<p>How do I compile and save a slim file to a html file regardless of the directory of the file?</p>\n"},{"tags":["linux","bash","script","javac"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12916797,"title":"Bash java auto compiler","body":"<p>I am currently trying to make a bash script that will go into every folder in ./ and compile blah.java, then run blah sending in a number for an input, and put the output in a file that I have named. I have something that is somewhat functional, but it only goes into the first directory, and after that it fails on me. I currently have...</p>\n\n<pre><code>#! /bin/bash\n\n\nfor i in $(find . -maxdepth 1 -type d)\ndo\n\n    pwd\n    cd $i\n    pwd\n\n    if [ -f \"blah.java\" ];\n    then\n        javac -cp . blah.java\n        echo \"17\" | java -cp . blah - &gt; blahresult17\n        echo \"43\" | java -cp . blah - &gt; blahresult43\n\n    fi\n\ndone\n</code></pre>\n\n<p>I think it is having problems, because it is trying to go into a directory from ./ once it goes into a subdirectory, but obviously from the subdirectory it doesn't exist.</p>\n"},{"tags":["multithreading","bash","restart","sysadmin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":12877607,"title":"Write a bash script to restart a daemon","body":"<p>I thought I could just use this related question: <a href=\"http://stackoverflow.com/questions/696839/how-do-i-write-a-bash-script-to-restart-a-process-if-it-dies\">How Do I write a bash script to restart a process if it dies</a>.  @lhunath had a great answer and told me everything I might do about it was wrong, but I'm restarting a daemon process and if I'm hoping there's something I can do in a single script that works. </p>\n\n<p>my process starts with a kick off script that shows the startup log, but then quits and leaves the process running off the shell: </p>\n\n<pre><code>&gt;sudo ./start\nR CMD Rserve --RS-conf /var/FastRWeb/code/rserve.conf --vanilla --no-save\n...\nLoading required package: FastRWeb\nFastRWeb: TRUE\nLoading data...\nRserv started in daemon mode.\n&gt;\n</code></pre>\n\n<p>The process is up and running,</p>\n\n<blockquote>\n  <p>ps -ale | grep Rserve\n      1 S    33 16534     1  0  80   0 - 60022 poll_s ?        00:00:00 Rserve</p>\n</blockquote>\n\n<p>Is there a simple way to wrap or call the 'start' script from bash and restart when the process dies or is this a case where PID files are actually called for? </p>\n\n<p>Dang - question got closed even after pointing to a very similar question that was not closed on stackoverflow. you guys suck</p>\n"},{"tags":["python","bash","shell"],"answer_count":13,"favorite_count":44,"up_vote_count":68,"down_vote_count":0,"view_count":16585,"score":68,"question_id":209470,"title":"Can I use Python as a bash replacement?","body":"<p>I currently do my textfile manipulation through a bunch of badly remembered awk, sed, bash and a tiny bit of Perl.</p>\n\n<p>I've seen mentioned a few places that python is good for this kind of thing, I know a little and I would like to know more. Is python a good choice for this, and is there a good book or guide to learning how to use python to replace shell scripting, awk, sed and friends?</p>\n"},{"tags":["bash","shell","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":12915384,"title":"Unix shell script retrieving multiple files at different timings","body":"<p>I have below requirement:</p>\n\n<p>I have one java process it writes lot of files into unix folder everyday,But below files  needs sftp to different folder using Unix Shell Script</p>\n\n<p>TestSD20121016.csv (It writes file into unix folder at 16:00P.M everyday)\nTestSP20121016.csv(It writes file into unix folder at 17:00P.M everyday)</p>\n\n<p>Script I written as below:</p>\n\n<pre><code>#!/bin/sh\n#------------------------------------------------------------------------\n# Parameters\n# sftp_file_uploads.sh remoteServer functionalId\n#------------------------------------------------------------------------\n\nREMOTE_SERVER=$1\nFUNCTIONAL_ID=$2\nFILE_TO_UPLOAD= ls -lrt TESTSD`date \"+%Y%m%d\"`*.CSV  | awk '/TEST/{ f=$NF };END{ print f }'\n\n\n#------------------------------------------------------------------------\n# Create sftp script\n#------------------------------------------------------------------------\nrm -f /var/tmp/SFTP_FILE_UPLOAD\necho \"lcd $3\" &gt; /var/tmp/SFTP_FILE_UPLOAD\necho \"cd $5\" &gt;&gt; /var/tmp/SFTP_FILE_UPLOAD\necho \"put $FILE_TO_UPLOAD\" &gt;&gt; /var/tmp/SFTP_FILE_UPLOAD\necho \"bye\" &gt;&gt; /var/tmp/SFTP_FILE_UPLOAD\n\n\n\n#------------------------------------------------------------------------\n# Do sftp\n#------------------------------------------------------------------------\necho \" Before SFTP \" &gt; /tmp/FILE_UPLOAD_LOG\n/usr/bin/sftp -B /var/tmp/SFTP_FILE_UPLOAD $2@$1 1&gt;/var/tmp/sftp.log 2&gt;&amp;1\n\nresult=$?\nif [ $result -eq 0 ]\nthen\n  echo \"SFTP completed successfully\"\nelse\n  echo \"FAILED to SFTP\"\n  exit 1\nfi\n\nexit 0\n</code></pre>\n\n<p>Problem is script is able to take file TestSD20121016.csv but not file TestSP20121016.csv,I dont know how to write above script to do sftp second file also.</p>\n\n<p>Regards,</p>\n\n<p>Chaitu</p>\n"},{"tags":["bash","firefox","unix","process","kill"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12910174,"title":"Opening and closing a process using bash","body":"<p>Using Ubuntu, I would like to create a shell script (bash) for an Ubuntu server, that will open an instance of firefox and then close <strong>that</strong> specific instance the browser? </p>\n\n<p>To open an instance of firefox, I can write:</p>\n\n<pre><code>firefox www.example.com\n</code></pre>\n\n<p>I have read that to search for all firefox instances, and to close them <strong>manually</strong> I can write:</p>\n\n<pre><code>ps aux | grep firefox\npidof firefox\nkill #process#\n</code></pre>\n\n<p>But is there a way for me to search for the <strong>specific</strong> instance  instance of firefox that I opened at the start?</p>\n"},{"tags":["bash","jenkins","master",".bash-profile","slave"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12905196,"title":"Setup Master for builds on Jenkins","body":"<p>I moved jenkins from one server to another and while most things seem to be working I can no longer build on master.</p>\n\n<p>When I run a job on master no bash profile is sourced so I'm missing all my paths. To debug, I setup a slave with the same credentials as master and it works just fine. I get the job to echo the username and machine name and they are the same whether running on \"master\" or on the slave which is setup on the same machine.</p>\n\n<p>Any ideas on how to get jenkins to source the bash profile when running on master?</p>\n\n<p>EDIT: I just realized that I don't encounter this issue if I launch jenkins from the command line manually. For example, the first command below works, the second doesn't:</p>\n\n<pre><code>$ nohup java -jar \"${JENKINS_PATH}\" --httpPort=${HTTP_PORT} &gt; ${LOG_PATH} 2&gt;&amp;1 &amp;  # WORKS\n$ /sbin/service jenkins start  # DOESN'T WORK\n</code></pre>\n\n<p>The command to launch jenkins in the startup script is the same as what I'm running on the command line.</p>\n"},{"tags":["linux","bash","unix","shell","nfs"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":3451,"score":4,"question_id":1643347,"title":"Is there a good way to detect a stale NFS mount","body":"<p>I have a procedure I want to initiate only if several tests complete successfully.</p>\n\n<p>One test I need is that all of my NFS mounts are alive and well.</p>\n\n<p>Can I do better than the brute force approach:</p>\n\n<p><hr /></p>\n\n<pre><code>mount | sed -n \"s/^.* on \\(.*\\) type nfs .*$/\\1/p\" | \nwhile read mount_point ; do \n  timeout 10 ls $mount_point &gt;&amp; /dev/null || echo \"stale $mount_point\" ; \ndone\n</code></pre>\n\n<p>Here <code>timeout</code> is a utility that will run the command in the background, and will kill it after a given time, if no <code>SIGCHLD</code> was caught prior to the time limit, returning success/fail in the obvious way.</p>\n\n<p><hr /></p>\n\n<p>In English: Parse the output of <code>mount</code>, check (bounded by a timeout) every NFS mount point. Optionally (not in the code above) breaking on the first stale mount.</p>\n"},{"tags":["php","javascript","html","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":80,"score":4,"question_id":12910112,"title":"Executing a bash script using php exec and javascript","body":"<p>I am trying to run this javascript below but am not seeing the output of the php shell_exec command.</p>\n\n<p>Running the test -a bash script will output a series of ID's 34535, 25643, 23262, and so on. When I run it in my php file with a simple it works fine.</p>\n\n<pre><code>print shell_exec('/opt/bin/echkchunk -a');\n</code></pre>\n\n<p>But when I try to run it below and I select test1 there is nothing outputted to the screen. Looking through chromes developer tools I see the code when test1 is selected as the following </p>\n\n<p><code>&lt;!--?php shell_exec(\"/opt/bin/echkchunk -a\"); ?--&gt;</code> </p>\n\n<p>as if it is commented out. </p>\n\n<p>So my question is, is it possible to run the bash script this way with php and JavaScript? Or is there another way to get that information displayed to the webpage without JavaScript?</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n  var tester = '&lt;?php shell_exec(\"/opt/bin/test -a\"); ?&gt;';      \n     $(document).ready(function() {\n            $(\"#selector\").on(\"change\", function() {\n                    if ($(\"#selector\").val() == \"test1\") {\n                        $(\"#rightselection\").css(\"background-color\", \"red\");\n                        $(\"#rightselection\").html(tester);\n                    }\n                    if ($(\"#selector\").val() == \"test2\") {\n                        $(\"#rightselection\").css(\"background-color\", \"blue\");\n                        $(\"#rightselection\").html(\"test2\");\n                    }\n                    if ($(\"#selector\").val() == \"test3\"){\n                        $(\"#rightselection\").css(\"background-color\", \"yellow\");\n                        $(\"#rightselection\").html(\"test3\");\n                    }\n                    if ($(\"#selector\").val() == \"\"){\n                        $(\"#rightselection\").css(\"background-color\", \"green\");\n                        $(\"#rightselection\").html(\"This is a Test\");\n                    }\n            });\n    });\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["bash","formatting"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12900876,"title":"Is there any fomatting tool for Bash shell scripts?","body":"<p>I'm looking for an indentation tool for Bash shell scripts similar to <code>indent</code> for the C language, which can deal with indentation and also with other issues such as parentheses matching, blank space in the condition expression and so on.</p>\n\n<p>Thanks!</p>\n"},{"tags":["mysql","bash","shell","unix","ssh"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":97,"score":1,"question_id":12905077,"title":"Create mySQL database through ssh in a bash script","body":"<p>I want to create a database on a remote server through ssh with a bash script. Something like this</p>\n\n<pre><code>#!/bin/sh\nssh user@example.com 'mysql -h example.com -uroot -pMYPASSWD -e \"CREATE DATABASE $1;\"'\n</code></pre>\n\n<p>So that I in terminal can run it like</p>\n\n<pre><code>$ myBashScript nameOfNewDatabase\n</code></pre>\n"},{"tags":["bash","eof","heredoc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12503581,"title":"Bash: warning: here-document at line delimited by end-of-file (wanted `EOF')","body":"<p>The following function in bash comes up with the error mentioned  in the title. The error usually appears when the final 'EOF' is not at the beginning of the line. </p>\n\n<p>EOF is at the beginning so I can't see what is wrong. Further up in the script (not shown) there are other here-docs and they work.</p>\n\n<pre><code>add_testuser()\n{\n    kadmin -p admin -q addprinc test\n    cat &lt;&lt;EOF &gt; ~/test.ldif\ndn: cn=test,ou=groups,dc=${ARRAY[1]},dc=${ARRAY[2]}\ncn: test\ngidNumber: 20001\nobjectClass: top\nobjectClass: posixGroup\n\ndn: uid=test,ou=people,dc=${ARRAY[1]},dc=${ARRAY[2]}\nuid: test\nuidNumber: 20001\ngidNumber: 20001\ncn: First_name\nsn: Last_name\nobjectClass: top\nobjectClass: person\nobjectClass: posixAccount\nobjectClass: shadowAccount\nloginShell: /bin/bash\nhomeDirectory: /home/test\nuserPassword: {CRYPT}*\nEOF \n\n    ldapadd -Qf ~/test.ldif\n    kdestroy; kinit test\n    klist\n    ldapwhoami\n}\n</code></pre>\n"},{"tags":["python","bash","imgur"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12903938,"title":"Downloading file from imgur using python directly via url.","body":"<p>Sometime, links to imgur are not given with the file extension. For examlpe: <a href=\"http://imgur.com/rqCqA\" rel=\"nofollow\">http://imgur.com/rqCqA</a> . I want to download the file and give it a known name or get it name inside a larger code. The problem is that I don't know the file type, so I don't know what extension to give it. </p>\n\n<p>How can I achieve this in python or bash?</p>\n"},{"tags":["linux","bash","shell","unix"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":111,"score":1,"question_id":12902371,"title":"Execute Shell script after other script got executed successfully","body":"<p><strong>Problem Statement:-</strong></p>\n\n<p>I have four shell script that I want to execute only when the previous script got executed successfully. And I am running it like this currently-</p>\n\n<pre><code>./verify-export-realtime.sh\n\nsh -x lca_query.sh\n\nsh -x liv_query.sh\n\nsh -x lqu_query.sh\n</code></pre>\n\n<p>So In order to make other scripts run after previous script was successful. I need to do something like below? I am not sure whether I am right? If any script got failed due to any reason it will print as <strong>Failed due to some reason</strong>  right?</p>\n\n<pre><code>./verify-export-realtime.sh\n\nRET_VAL_STATUS=$?\necho $RET_VAL_STATUS\nif [ $RET_VAL_STATUS -ne 0 ]; then\necho \"Failed due to some reason\"\nexit\nfi\n\nsh -x lca_query.sh\n\nRET_VAL_STATUS=$?\necho $RET_VAL_STATUS\nif [ $RET_VAL_STATUS -ne 0 ]; then\necho \"Failed due to some reason\"\nexit\nfi\n\nsh -x liv_query.sh\n\nRET_VAL_STATUS=$?\necho $RET_VAL_STATUS\nif [ $RET_VAL_STATUS -ne 0 ]; then\necho \"Failed due to some reason\"\nexit\nfi\n\n\nsh -x lqu_query.sh\n</code></pre>\n"},{"tags":["bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12907721,"title":"Run three shell script simultaneously","body":"<p>I have three shell script which I am running as below-</p>\n\n<pre><code>sh -x script1.sh\n\nsh -x script2.sh\n\nsh -x script3.sh\n</code></pre>\n\n<p>So each script is executed sequentially one at a time after previous one finished executing.</p>\n\n<p><strong>Problem Statement:-</strong></p>\n\n<p>Is there any way I can execute all the three above scripts at same time from a single window?\nI just want to execute script1, script2, script3 at the same time. If you think of some CRON JOB scheduling <code>script1 at 3 AM, script2 at 3AM, script3 at 3AM</code> (all three scripts at the same time, simultaneously). That's what I need, I need to execute all the three scripts simultaneously.</p>\n"},{"tags":["bash","gnu-screen"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12907230,"title":"Bash: Killing all screens with a specified name","body":"<p>If I have multiple screens with the same name, how could I kill all of them without checking all of their PIDs, and then executing <code>screen -wipe</code>?</p>\n\n<p>Example:</p>\n\n<pre><code>24754.screen1  (Detached)\n32236.screen1  (Detached)\n7308.screen1   (Detached)\n3896.screen1   (Detached)\n10155.screen1  (Detached)\n10888.screen1  (Detached)\n28438.screen1  (Detached)\n26008.screen1  (Detached)\n</code></pre>\n\n<p>I would like to kill all instances of screen1, terminate any processes running within, and not need to run <code>screen -wipe</code> after.</p>\n"},{"tags":["linux","bash","sorting","csv","uniq"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":144,"score":2,"question_id":12888748,"title":"remove dups from many csv files","body":"<p>Given n csv files where they add up to 100 GB in size, I need to remove duplicate rows based on the following rules and conditions:</p>\n\n<ul>\n<li>The csv files are numbered 1.csv to n.csv, and each file is about 50MB in size.</li>\n<li>The first column is a string key, 2 rows are considered dup if their first columns are the same.</li>\n<li>I want to remove dups by keeping the one in a later file (2.csv is considered later than 1.csv)</li>\n</ul>\n\n<p>My algorithm is the following, I want to know if there's a better one.</p>\n\n<ul>\n<li><p>merge all files into one giant file</p>\n\n<pre><code>cat *.csv &gt; one.csv\n</code></pre></li>\n<li><p>sort the csv</p>\n\n<pre><code>sort one.csv &gt;one_sorted.csv\n</code></pre></li>\n<li><p>not sure how to elimiate dups at this point. <code>uniq</code> has a -f flag that skips the first N fields, but in my case I want to skip all but the first 1 fields.</p></li>\n</ul>\n\n<p>I need help with the last step (eliminating dups in a sorted file).  Also is there a more efficient algorithm?</p>\n"},{"tags":["bash","scripting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12898998,"title":"bash: passing entire command (with arguments) to a function","body":"<p>I am essentially trying to implement a function which asserts the failure (non-zero exit code) of another command, and prints a message when it fails. </p>\n\n<p>Here is my function:</p>\n\n<pre><code>function assert_fail () {\n    COMMAND=$@\n    if [ `$COMMAND; echo $?` -ne 0 ]; then \n        echo \"$COMMAND failed as expected.\"\n    else\n        echo \"$COMMAND didn't fail\"\n    fi\n}\n\n# This works as expected\nassert_fail rm nonexistent\n\n# This works too\nassert_fail rm nonexistent nonexistent2\n\n# This one doesn't work\nassert_fail rm -f nonexixtent\n</code></pre>\n\n<p>As soon as I add options to the command, it doesn't work. Here is the output of the above:</p>\n\n<pre><code>rm: cannot remove `nonexistent': No such file or directory\nrm nonexistent failed as expected.\nrm: cannot remove `nonexistent': No such file or directory\nrm: cannot remove `nonexistent2': No such file or directory\nrm nonexistent nonexistent2 failed as expected.\nrm -f nonexistent didn't fail\n</code></pre>\n\n<p>I have tried putting double quotes around the commands, to no avail. I would expect the third invocation in the above to produce similar output to the other two.</p>\n\n<p>I appreciate any/all help!</p>\n"},{"tags":["bash","gnu-screen"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12906446,"title":"Bash: Screen parameters being interpreted incorrectly","body":"<p>I'm trying to start daemon screens with <code>screen -dmS nameofscreen command</code>. This works by itself, but when I use a command with <code>&amp;&amp;</code> or <code>|</code> it seems to interpret it wrong.</p>\n\n<p>Example: <code>screen -dmS screen1 echo test &amp;&amp; ls -al</code></p>\n\n<p>It seems to be interpreted as <code>(screen -dmS screen1 echo test) &amp;&amp; (ls -al)</code> and I'm looking for it to be interpreted as <code>screen -dmS screen1 (echo test &amp;&amp; ls -al)</code>.</p>\n\n<p>How is this done? If I use () around the commands to be passed, screen doesn't accept it?</p>\n"},{"tags":["regex","bash","match"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":92,"score":0,"question_id":12883582,"title":"regex to find number preceded and followed by different strings","body":"<p>I have a text file containing text and numbers, for example:</p>\n\n  \n\n<pre class=\"lang-none prettyprint-override\"><code>MANGO444CHERRYa.b /c-1@2#3APPLEa&gt;b;c. a1$2$3WHITE12 3ab cWHITE5%6^7a=b +cWHITEaba5b6a7baMANGO555CHERRY 1'2'3a,b,c!APPPLE1`2~3ab @cYELLOW123---a- -bcYELLOW\n</code></pre>\n\n<p>I need to get he number between <code>MANGO</code> and <code>CHERRY</code> that comes before <code>APPLE</code> and <code>WHITE</code>  (in this case, <code>444</code>).  The text between the uppercase words can be anything at all.  I tried this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>(?&lt;=MANGO)\\d+((=?.*?APPLE)(=?.*?WHITE))  \n</code></pre>\n\n<p>but it returns:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>444CHERRYa.b /c-1@2#3APPLEB&gt;b;c. a1$2$3WHITE\n</code></pre>\n\n<p>I hope this demonstrates the problem in a better way</p>\n"},{"tags":["mysql","database","bash","script"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":12609663,"title":"Creating a MySQL Database Using a Variable in a BASH Script","body":"<p>I'm trying to create a MySQL database using a variable in a BASH script. Here is the code giving me trouble:  <strong>database=\"mysql --verbose --user=root --password --execute=\"create database foo\"\"</strong> When run it fails with an option listing. I'm sure the issue is with the use of quotes after the execute option but I can't figure out how to get it to work.</p>\n"},{"tags":["git","bash","autocomplete"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12905206,"title":"Custom bash autocomplete for git breaks git-autocomplete.bash","body":"<p>I am trying to add autocompletion to <code>git commit</code> upon hitting <kbd>Tab</kbd><kbd>Tab</kbd>. </p>\n\n<p>The autocomplete feature I am working on is based on a branch-naming convention. The convention is to append the PivotalTracker Id number to the end of the branch name, so a typical branch would look like <code>foo-bar-baz-1449242</code>.</p>\n\n<p>We can associate the commits with the PivotalTracker card by prepending <code>[#1449242]</code> to the beginning of the commit message. I would like this to be auto-inserted if <code>git commit</code> is typed in and the user hits <kbd>Tab</kbd><kbd>Tab</kbd>.</p>\n\n<p>I have already done this here: <a href=\"https://github.com/tlehman/dotfiles/blob/master/ptid_git_complete\" rel=\"nofollow\">https://github.com/tlehman/dotfiles/blob/master/ptid_git_complete</a></p>\n\n<p>(and for convenience, here is the source code):</p>\n\n<pre><code>  function _ptid_git_complete_()\n  {\n    local line=\"${COMP_LINE}\"                   # the entire line that is being completed\n\n    # check that the commit option was passed to git \n    if [[ \"$line\" == \"git commit\" ]]; then \n      # get the PivotalTracker Id from the branch name\n      ptid=`git branch | grep -e \"^\\*\" | sed 's/^\\* //g' | sed 's/\\-/ /g' | awk '{ print $(NF) }'`\n      nodigits=$(echo $ptid | sed 's/[[:digit:]]//g')\n\n      if [ ! -z $nodigits ]; then\n        : # do nothing\n      else\n        COMPREPLY=(\"commit -m \\\"[#$ptid]\")\n      fi\n    else\n      reply=()\n    fi\n  }\n\n  complete -F _ptid_git_complete_ git\n</code></pre>\n\n<p>The problem is that this breaks the git autocompletion features defined in <a href=\"https://github.com/git/git/blob/master/contrib/completion/git-completion.bash\" rel=\"nofollow\">git-autocompletion.bash</a></p>\n\n<p>How can I make this function compatible with git-autocompletion.bash?</p>\n"},{"tags":["linux","bash","shell","scripting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":92,"score":-2,"question_id":12902353,"title":"bash, if then script to parse file","body":"<p>My requirements is to look through a F-5 config. </p>\n\n<p>Something like: </p>\n\n<pre><code> If x=virtual\n grep for virtual | pool | destination\n</code></pre>\n\n<p>File looks like this: </p>\n\n<pre><code>virtual vs_website_443 {\nsnat automap\npool pl_website_443\ndestination 11.11.11.11:https\nip protocol tcp\npersist pr_cookie_JSESSION_AP\nprofiles {\n   oneconnect-ebiz-blah {}\n  pr_http_ebiz_x_forwarded_for {}\n   serverssl {\n      serverside\n  }\n   tcp-lan-optimized {}\n   wildcard.origin.website.com {\n      clientside\n   }\n}\n</code></pre>\n"},{"tags":["wordpress","bash","unix","vim"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12900921,"title":"Find Wordpress hooks and filters using Vim or similar","body":"<p>Wordpress allows you to extend its core using \"hooks\" and \"filters.\" For example, to execute something quite early in the execution process I may write</p>\n\n<pre><code>add_action( 'init', function() { // Do something } );\n</code></pre>\n\n<p>Filters work similarly. The function that defines a hook is <code>do_action</code>, so to create the init hook a core developer wrote</p>\n\n<pre><code>do_action( 'init' );\n</code></pre>\n\n<p>do_action accepts several optional arguments that this hook doesn't demonstrate. The function names for filters are add_filter and apply_filter.</p>\n\n<p>Say I'm browsing the source code of some plugin and it's using a hook from one of the source files and I don't know which one. What is the easiest way to locate it?</p>\n\n<p>In Vim I use ctags a lot and I was hoping that it was possible to do something similar, only instead of giving the function name I could give the filter or hook name. Any ideas?</p>\n\n<p>(If it can't be done from within Vim, like ctags, second best would be to run a command that will locate the script for me. This could also be acceptable if it is the best solution)</p>\n"},{"tags":["ruby-on-rails-3","bash","rvm","command-prompt"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":69,"score":0,"question_id":12898205,"title":"Display in bash prompt","body":"<p>I am working with bash and still unfamiliar with the difference between <code>.profile</code>, <code>.bashrc</code>, <code>.bash_profile</code>.</p>\n\n<p>My desired result is to have the ruby version and <code>rvm gemset</code> show up on my bash prompt.</p>\n\n<p>I added <code>PS1=\"\\$(~/.rvm/bin/rvm-prompt) $PS1\"</code> to .bash_profile (via xcode) and it displays </p>\n\n<pre><code>ruby-1.9.3-p286 John-MacBook-Air:~ john$\n</code></pre>\n\n<p>What I trying to get is </p>\n\n<pre><code>ruby-1.9.3-p286@rails3 $\n</code></pre>\n\n<p>With \"rails3\" being the output of <code>rvm gemset</code>.</p>\n\n<p><strong>How do I get <code>John-MacBook-Air:~ john</code> removed from the prompt?</strong></p>\n\n<p>I tried adding the line in the .profile, and .bashrc with no luck but it seems to work in the .bash_profile.  Any clarification between these files would be greatly appreciated.  I am running rvm on a Mac.</p>\n\n<p><strong>SOLUTION</strong></p>\n\n<p>include the following to the .bash_profile</p>\n\n<pre><code>PS1='\\W \\$ '\nPS1=\"\\$(~/.rvm/bin/rvm-prompt) $PS1\"\n</code></pre>\n\n<p>the prompt looks like</p>\n\n<pre><code>ruby-1.9.3-p286@rails3 ~ $ \n</code></pre>\n"},{"tags":["bash","rvm","osx-leopard"],"answer_count":4,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":1895,"score":4,"question_id":10574969,"title":"How do I install Bash >= 3.2.25 on Mac OS X 10.5.8?","body":"<p>I'm following Michael Hartl's Rails tutorial, so far I've installed Git 1.7.5.4 x86_64 (I'm running OSX 10.5.8) and I'm trying to install rvm</p>\n\n<p>After I run the following: </p>\n\n<p><code>$ curl -kL get.rvm.io | bash -s stable</code></p>\n\n<p>I get:  </p>\n\n<pre><code>BASH 3.2.25 required (you have 3.2.17(1)-release)\n</code></pre>\n\n<p>I've tried changing the shell, using <code>chsh -s /opt/local/bin/bash</code> but I get <code>shell '/opt/local/bin/bash' does not exist</code></p>\n\n<p>Not sure where to go from here but I'd appreciate any guidance. Thanks!</p>\n"},{"tags":["bash","file","recursion"],"answer_count":8,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":3679,"score":6,"question_id":657108,"title":"Bash: Recursively adding subdirectories to the path","body":"<p>How do you do it? My code/ directory at work is organized in folders and subfolders and subsubfolders, all of which (at least in theory) contain scripts or programs I want to run on a regular basis. </p>\n\n<p>Its turning my otherwise picturesque .bashrc into an eyesore!</p>\n\n<p>Thanks!</p>\n"},{"tags":["linux","bash","shell","iptables","netstat"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12899056,"title":"Writing bash code for performance standards","body":"<p>Is there a better way to rewrite this code to get enhanced performance? </p>\n\n<p>If you were to get a bunch of IPs the system seems to hang.</p>\n\n<pre><code>TMP_PREFIX='/tmp/synd'\nTMP_FILE=\"mktemp $TMP_PREFIX.XXXXXXXX\"\nBANNED_IP_MAIL=`$TMP_FILE`\nBANNED_IP_LIST=`$TMP_FILE`\necho \"Banned the following ip addresses on `date`\" &gt; $BANNED_IP_MAIL\necho &gt;&gt; $BANNED_IP_MAIL\nBAD_IP_LIST=`$TMP_FILE`\nnetstat -ntu | grep SYN_RECV | awk '{print $5}' | cut -d: -f1 | sort | uniq -c | sort -nr &gt; $BAD_IP_LIST\ncat $BAD_IP_LIST\nif [ $KILL -eq 1 ]; then\n    IP_BAN_NOW=0\n    while read line; do\n        CURR_LINE_CONN=$(echo $line | cut -d\" \" -f1)\n        CURR_LINE_IP=$(echo $line | cut -d\" \" -f2)\n        if [ $CURR_LINE_CONN -lt $NO_OF_CONNECTIONS ]; then\n            break\n        fi\n        IGNORE_BAN=`grep -c $CURR_LINE_IP $IGNORE_IP_LIST`\n        if [ $IGNORE_BAN -ge 1 ]; then\n            continue\n        fi\n        IP_BAN_NOW=1\n        echo \"$CURR_LINE_IP with $CURR_LINE_CONN SYN_RECV connections\" &gt;&gt; $BANNED_IP_MAIL\n        echo $CURR_LINE_IP &gt;&gt; $BANNED_IP_LIST\n        echo $CURR_LINE_IP &gt;&gt; $IGNORE_IP_LIST\n        if [ $CSF_BAN -eq 1 ]; then\n            $CSF -d $CURR_LINE_IP\n        else\n            $IPT -I INPUT -s $CURR_LINE_IP -j DROP\n        fi\n    done &lt; $BAD_IP_LIST\n    if [ $IP_BAN_NOW -eq 1 ]; then\n        dt=`date`\n                hn=`hostname`\n        if [ $EMAIL_TO != \"\" ]; then\n            cat $BANNED_IP_MAIL | mail -s \"IP addresses banned on $dt $hn\" $EMAIL_TO\n        fi\n    fi\nfi\nrm -f $TMP_PREFIX.*\n</code></pre>\n"},{"tags":["bash","if-statement","else"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":112,"score":3,"question_id":12875977,"title":"BASH - If else, Regular expression, OR","body":"<p>My bash script is supposed to check if the user inputs two numbers. Each number should be preceded by either a <code>+</code> or a <code>-</code> sign. The first number should be four digits long, and the second number should be five digits long. </p>\n\n<p>No matter what values I enter, the output is always <code>Fail</code></p>\n\n<p>Command-line statement to run the script:</p>\n\n<pre><code>$me add +1234 -12345\n</code></pre>\n\n<p>The script:</p>\n\n<pre><code>#!/bin/bash\n#Script name add\nif [ $1 != [\\+\\-][0-9][0-9][0-9][0-9] ] || \n   [ $2 != [\\+\\-][0-9][0-9][0-9][0-9][0-9] ]\n  then\n    echo Fail\nelse    \n    echo Success\nfi\n</code></pre>\n"},{"tags":["bash","shell","testing","script","wildcard"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12873834,"title":"List directories not containing certain files?","body":"<p>I used this command to find all the directories containing .mp3 in the current directory, and filtered out only the directory names:</p>\n\n<pre><code>find . -iname \"*.mp3\" | sed -e 's!/[^/]*$!!' -e 's!^\\./!!' | sort -u\n</code></pre>\n\n<p>I now want the opposite, but I found it a little harder. I can't just add a '!' to the find command since it'll only exclude .mp3 when printing them not find directories that do not contain .mp3.</p>\n\n<p>I googled this and searched on stackoverflow and unix.stackexchange.com.\nI have tried this script so far and it returns this error:</p>\n\n<pre><code>#!/bin/bash\n\nfind . -type d | while read dir\ndo\nif [[! -f $dir/*.mp3 ]]\nthen\n    echo $dir\nfi\ndone\n</code></pre>\n\n<p>/home/user/bin/try.sh: line 5: [[!: command not found</p>\n\n<pre><code>#!/bin/bash\n\nfind . -type d | while read dir\ndo\nif [! -f $dir/*.mp3 ]\nthen\n    echo $dir\nfi\ndone\n</code></pre>\n\n<p>/home/user/bin/try.sh: line 5: [!: command not found</p>\n\n<pre><code>#!/bin/bash\n\nfind . -type d | while read dir\ndo\nif [[! -f \"$dir/*.mp3\" ]]\nthen\n    echo $dir\nfi\ndone\n</code></pre>\n\n<p>/home/user/bin/try.sh: line 5: [!: command not found</p>\n\n<p>I'm thinking it has to do with multiple arguments for the test command.</p>\n\n<p>Since I'm testing all the directories the variable is going to change, and I use a wildcard for the filenames.</p>\n\n<p>Any help is much appreciated.  Thank You.</p>\n"},{"tags":["bash","escaping","quotes","zsh"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12884902,"title":"Do zsh or bash have quotes that are convenient for English text?","body":"<p>If I use single quotes, words with apostrophes (\"don't\") are annoying to escape:</p>\n\n<pre><code>'Don'\"'\"'t do that'\n</code></pre>\n\n<p>If I use double quotes, dollar signs and exclamation points trip it up:</p>\n\n<pre><code>\"It cost like \\$1000\\!\"\n</code></pre>\n\n<p>Is there another kind of quoting I can use?</p>\n\n<p><strong>edit</strong>: I should also add that I would like to pass this string directly as a command line argument, rather than storing it in a variable. To this end I tried, using DigitalRoss's solution,</p>\n\n<pre><code>$ echo \"$(cat &lt;&lt; \\EOF \nDon't $worry be \"happy\".\nEOF)\"\n</code></pre>\n\n<p>but get</p>\n\n<pre><code>dquote cmdsubst&gt; \n</code></pre>\n\n<p>after hitting enter :/ . So at this point ZyX's suggestion of <code>setopt rcquotes</code> looks to be the most convenient.</p>\n"},{"tags":["bash","unix","scripting"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":12899841,"title":"Why does piping keep collapsing functions from keeping its new definition?","body":"<p>On Bash-Hackers.org there is a <a href=\"http://wiki.bash-hackers.org/howto/collapsing_functions\" rel=\"nofollow\">nice little wiki entry</a> on collapsing functions. Basically, a collapsing function is a function that redefines itself based on some condition. The basic example was something like the following:</p>\n\n<pre><code>chatter() {\n  if [[ $verbose ]]; then\n    chatter() {\n      echo \"$@\"\n    }\n    chatter \"$@\"\n  else\n    chatter() {\n      :\n    }\n  fi\n}\n</code></pre>\n\n<p>I thought that was a nice little trick that might be useful for creating functions like the following:</p>\n\n<pre><code># a portable extended regular expression sed for Linux and Mac\n# simply checks if using an option fails for one version\n# @see http://wiki.bash-hackers.org/howto/collapsing_functions\nmy_sed() {\n    if ( echo abc | sed -r /abd/p &gt; /dev/null 2&gt;/dev/null ) ; then \n        #we are running a GNU version. redefine function\n        echo gnu\n        my_sed() {\n            sed -r \"$@\"\n        }\n    else \n        #we are running another version. defaulting to BSD\n        #redefining function\n        echo osx\n        my_sed() {\n            sed -E \"$@\"\n        }\n    fi\n    my_sed \"$@\"\n}\n</code></pre>\n\n<p>(The echo statements are just for debugging btw). This works as intended when running it as <code>my_sed \"s/foo/bar\" /tmp/somefile.txt</code>, outputting \"gnu\" (on Linux, osx on Mac) the first time, then keeping silent for subsequent runs. But if I simply use the function in pipes, the function is not being redefined, constantly outputting \"gnu\". Example: <code>echo 123 | my_sed 's/foo/bar'</code> will output \"gnu\" every time it is being run in the shell.</p>\n\n<p>Why is this? What is piping doing with the current context/shell that keeps the function from keeping its new definition? Is piping forking a new process each time, so that the new definition is lost from the originating shell?</p>\n"},{"tags":["bash","unix"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12856372,"title":"Check every line a process outputs and do an action if a condition is met","body":"<p>I'm not so good with bash syntax and bash itself.\nBasically, i want to check, in real time, while a process is creating output, if a certain line, with a certain content is printed, and if, do something.</p>\n\n<pre><code>    processName | while read myLine; if [ $myLine -eq \"Loading X module\" ]; then echo 'OMG' fi; done\n</code></pre>\n"},{"tags":["bash","sed","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":12898945,"title":"Using placeholders/variables in a sed command","body":"<p>I want to store a specific part of a matched result as a variable to be used for replacement later. I would like to keep this in a one liner instead of finding the variable I need before hand.</p>\n\n<p>when configuring apache, and use mod_rewrite, you can specificy specific parts of patterns to be used as variables,like this:</p>\n\n<pre><code>RewriteRule ^www.example.com/page/(.*)$ http://www.example.com/page.php?page=$1 [R=301,L]\n</code></pre>\n\n<p>the part of the pattern match that's contained inside the parenthesis is stored as $1 for use later. So if the url was <code>www.example.com/page/home</code>, it would be replaced with <code>www.example.com/page.php?page=home</code>. So the \"home\" part of the match was saved in $1 because it was the part of the pattern inside the parenthesis.</p>\n\n<p>I want something like this functionality with a <code>sed</code> command, I need to automatically replace many strings in a SQL dump file, to add drop table if exist commands before each create table, but I need to know the table name to do this, so if the dump file contains something like:</p>\n\n<pre><code>...\nCREATE TABLE `orders`\n...\n</code></pre>\n\n<p>I need to run something like:</p>\n\n<pre><code>cat dump.sql | sed \"s/CREATE TABLE `(.*)`/DROP TABLE IF EXISTS $1\\N CREATE TABLE `$1`/g\"\n</code></pre>\n\n<p>to get the result of:</p>\n\n<pre><code>...\nDROP TABLE IF EXISTS `orders`\nCREATE TABLE `orders`\n...\n</code></pre>\n\n<p>I'm using the mod_rewrite syntax in the <code>sed</code> command as a logical example of what I'm trying to do.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":596,"score":1,"question_id":6046176,"title":"bash : adding a name value to a structure using bash","body":"<p>I want to do the  following in bash for example say i have the following names rather than creating three seperate arrays to hold the contents of LC1 , LC2 and LC3 i thought it might be best to create a tree structure in bash or maybe someone might have a neater solution - I need to do this in bash .</p>\n\n<pre><code> LC1\n    Test1\n    Test2\n LC2\n    Test3\n    Test4\n LC3\n    Test5\n    Test6\n</code></pre>\n"},{"tags":["bash","numeric","bc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12882611,"title":"How to get bc to handle numbers in scientific (aka exponential) notation?","body":"<p><code>bc</code> doesn't like numbers expressed in scientific notation (aka exponential notation).</p>\n\n<pre><code>$ echo \"3.1e1*2\" | bc -l\n(standard_in) 1: parse error\n</code></pre>\n\n<p>but I need to use it to handle a few records that are expressed in this notation. Is there a way to set <code>bc</code> to understand exponential notation? If not, what can I do to translate them in a format that <code>bc</code> will understand?</p>\n"},{"tags":["bash","sh"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":38,"score":1,"question_id":12897583,"title":"Move files from different users","body":"<p>I have a folder with some subdirs {users} e.g. \"Michael\", \"Jackson\" etc. pp. with other subdirs in each userdir: <code>cur</code>, <code>new</code> and <code>tmp</code>, these are Maildirs. </p>\n\n<p>I need a script, that can move all Files/Mail from <code>new</code> to <code>cur</code> from each user.</p>\n\n<p>How do I start to do something like this? </p>\n"},{"tags":["bash","unix","date"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12896509,"title":"Forcing \"date\" to use a locale other than the machine default","body":"<p>Is there a way to force the *nix command \"date\" to output in a specific format independent of the local? For example, if I call \"date -u\" today, on a US machine I get:</p>\n\n<pre><code>Mon Oct 15 13:15:29 UTC 2012\n</code></pre>\n\n<p>but on a German machine I get:</p>\n\n<pre><code>Mo 15. Okt 13:15:31 UTC 2012\n</code></pre>\n"},{"tags":["linux","bash","shell","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":98,"score":0,"question_id":12886703,"title":"Linux How to print all the files with the same prefix after searching for them?","body":"<p>I need to search through a directory which contains many sub directories, each which contain files. The files read as follows question1234_01, where 1234 are random digits and the suffix _01 is the number of messages that contain the prefix, meaning they are apart of the same continuing thread. </p>\n\n<pre><code>find . -name 'quest*' | cut -d_ -f1  | awk '{print $1}' | uniq -c | sort -n  \n</code></pre>\n\n<p>example output:</p>\n\n<p>1 quest1234</p>\n\n<p>10 quest1523</p>\n\n<p>This searches for all the files then sorts them in order. </p>\n\n<p>What I want to do is print all the files which end up having the most occurrences, in my example the one with 10 matches.</p>\n\n<p>So it should only output quest1523_01 - 11</p>\n"},{"tags":["bash","sed"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12891251,"title":"Bash - Substitute on a variable","body":"<p>Thank you very much in advance for helping!</p>\n\n<p>I'd like to transform this variable:</p>\n\n<p>win_path=<strong>/cygdrive/g</strong>/virtual_tours/.archives/vt_template_8_0_15/test_directory_2/panos</p>\n\n<p>into:</p>\n\n<p>win_path_dir=<strong>G:</strong>/virtual_tours/.archives/vt_template_8_0_15/test_directory_2/panos</p>\n\n<p>This in what I have so far, but it doesn't work.\nWhen I echo $win_path it returns nothing (black, empty space)</p>\n\n<pre><code>$win_path=$(echo $i | sed -e 's/\\/cygdrive\\/g/G\\:/g')\n</code></pre>\n\n<p>Cheers!</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12745020,"title":"Bash, if's, reusing variables","body":"<pre><code>if [[ $line == *\"option 1\"* ]]\nthen\n     CURRENT_OPTION=1\nfi\n\nif [[ $line == *\"option 2\"* ]]\nthen\n     CURRENT_OPTION=2\nfi\n\nif [[ $line =~ \"What i want\" ]]\nthen            \n    if [[ $CURRENT_OPTION -eq 1 ]]\n    then\n        MEM1=$(awk '/Used heap/ { gsub(/M/, \" \"); print $4 }')\n    elif [[ $CURRENT_OPTION -eq 2 ]]\n    then\n        MEM2=$(awk '/Used heap/ { gsub(/M/, \" \"); print $4 }')\n    fi\nfi\n</code></pre>\n\n<p>Because CURRENT_OPTION is defined within an if, its value is not correct when checked in the third if. How do I pass it out so that it is?</p>\n"},{"tags":["bash","unix","shell","csh","tcsh"],"answer_count":9,"favorite_count":7,"up_vote_count":25,"down_vote_count":0,"view_count":4856,"score":25,"question_id":3327013,"title":"How to determine the current shell i'm working on?","body":"<p>How to determine the current shell i am working on ? </p>\n\n<p>Does <code>ps</code> command output will alone do ?</p>\n\n<p>How to do this in different flavors of UNIX ?</p>\n"},{"tags":["perl","bash","shell","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":103,"score":0,"question_id":12885983,"title":"Grouping multiple values for same key from a text file to form single key-value pair","body":"<p>First, if there is a better title for this question, I am all ears!</p>\n\n<p>Is there a better way of doing this? </p>\n\n<p>I have a data file <code>input.txt</code> in this format:</p>\n\n<pre><code>field1=value1\nfield2=value2\nfield3=value3\n.\n.\n.\nfield1=value4\nfield2=value5\nfield3=value6\n</code></pre>\n\n<p>and so on ... and would like to end up with:</p>\n\n<pre><code>field1,value1 value4 ... valueM\nfield2,value2 value5 ... valueN\nfield3,value3 value6 ... valueO\n</code></pre>\n\n<p>What I've tried:</p>\n\n<ol>\n<li><p>Generate unique keys: <code>cat input.txt |awk -F\"=\" '{print $2}' |sort -u &gt; data_key</code></p></li>\n<li><p>Loop over rows in <code>data_key</code></p></li>\n</ol>\n\n<blockquote>\n<pre><code>#!/bin/bash\n\nfile=input.txt\nkeys=`cat data_key`\n\nfor value in $keys\ndo\n  output=`cat $file |grep $value |awk -F\"=\" '{print $2}' |tr -s '[:space:]' '[ *]' `\n  echo $value, $output\ndone\n</code></pre>\n</blockquote>\n"},{"tags":["linux","bash","unix","shell","lockfile"],"answer_count":14,"favorite_count":25,"up_vote_count":35,"down_vote_count":0,"view_count":9967,"score":35,"question_id":185451,"title":"Quick-and-dirty way to ensure only one instance of a shell script is running at a time","body":"<p>What's a quick-and-dirty way to make sure that only one instance of a shell script is running at a given time?</p>\n"},{"tags":["python","bash","shell","sequence","ls"],"answer_count":2,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":107,"score":6,"question_id":12874986,"title":"Bash alias to automatically detect arbitrarily named file sequences?","body":"<p>I'm looking to make a bash alias that will change the results of ls.  I am constantly     dealing with large sequences of files, that do not follow the same naming conventions. The     only common thing about them is that the number is 4 padded (sorry not really sure of correct way to say that) and immediately precedes the extension.</p>\n\n<p>eg - filename_v028_0392.bgeo, test_x34.prerun.0012.simdata, filename_v001_0233.exr</p>\n\n<p>I would like for the sequences to be listed each as 1 element, so that</p>\n\n<pre><code>filename_v003_0001.geo\nfilename_v003_0002.geo\nfilename_v003_0003.geo\nfilename_v003_0004.geo\nfilename_v003_0005.geo\nfilename_v003_0006.geo\nfilename_v003_0007.geo\nfilename_v003_0032.geo\nfilename_v003_0033.geo\nfilename_v003_0034.geo\nfilename_v003_0035.geo\nfilename_v003_0036.geo\ntestxxtest.0057.exr\ntestxxtest.0058.exr\ntestxxtest.0059.exr\ntestxxtest.0060.exr\ntestxxtest.0061.exr\ntestxxtest.0062.exr\ntestxxtest.0063.exr\n</code></pre>\n\n<p>would be displayed as somethign along the lines of</p>\n\n<pre><code>[seq]filename_v003_####.geo (1-7)\n[seq]filename_v003_####.geo (32-36)\n[seq]testxxtest.####.exr (57-63)\n</code></pre>\n\n<p>while still listing non sequences unaltered.</p>\n\n<p>I'm really not sure where to start approaching this.  I know a decent amount of python, but not sure if that would really be the best way to go about it.  Any help would be greatly appreciated!</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","ssh","amazon-ec2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12891039,"title":"Amazon Cloud Instance SSH prompt customization","body":"<p>Is it possible to customize ssh shell prompt to show domain name instead of ip e.g</p>\n\n<pre><code>ubuntu@ip-xx-xxx-xx-xxx:~$\n</code></pre>\n\n<p>with</p>\n\n<pre><code>ubuntu@dev.mydomain.com:~$\n</code></pre>\n"},{"tags":["linux","bash","shell","import","passwords"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":59,"score":-2,"question_id":12852582,"title":"Importing a Password from a File to a CLI command Parameter in Linux/Unix","body":"<p>I am finding it quite difficult to do the following:</p>\n\n<p>I have a script that looks like this <strong>./Something host password</strong> and what it does is simply copy files from one host to another, all it needs is for the host name and password, say:\n<strong>./Something host1 Password1</strong></p>\n\n<p>I want to run this as a daily Cronjob, but I don't want to have the password visible in the crontab when running the script or even having to hard code the Password as part of the script instead of adding it as part of a command parameter.</p>\n\n<p>So I have decided to create a file called \"Password\", that contains the password, I would then want to use this file and import the password inside it to the Password Script variable.</p>\n\n<p>The Cronjob will look like this:</p>\n\n<ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li>/bin/bash /home/yourname/yourscript.sh MyHostName </li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>as you can see I want to replace the password and instead retrieve it from a file, like:</p>\n\n<ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li>/bin/bash /home/yourname/yourscript.sh MyHostName $(PasswordFile.txt)</li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>What would be the best way to implement this?</p>\n\n<p>Note: If the question still doesnt make sense please let me know.</p>\n"},{"tags":["bash","configuration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12776302,"title":"Bash - get variables from an external file","body":"<p>I'm trying to make a configuration file to help running a bash script.</p>\n\n<p>The idea is having a file (script.conf) like this</p>\n\n<pre><code>directory=c:/path/to/a/specific/directory/\nlogo=y\ntitle=y\nhotspots=n\ncombobox=n\n</code></pre>\n\n<p>Then, running the script, it will read script.conf and get those variables to use in the script.</p>\n\n<p>How can I do that?</p>\n"},{"tags":["bash","sed","awk","grep"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":114,"score":-2,"question_id":8847958,"title":"How to get unique rows in a file if 2 or more lines start with same word","body":"<h2>inputfile.log</h2>\n\n<pre><code>HSDA_17_VerifyShippingOrderNoInOrderConfirmationTest): Timed out after 90 seconds\nHSDA_17_VerifyShippingOrderNoInOrderConfirmationTest): Session not available\nHSDA_1_BuyVoice): Session not available \nHSDA_1_BuyVoice): Unable to locate element:\nHSDA_9_CreateAccounAndBuyDeviceInCheckoutTest): Timed out after 90 seconds\nHSDA_2_BuyMapswithNewUserAtCheckOutTest): Address already in use: connect\nHSDA_69_ChangeBillingAddressInNonUSLocaleForAllFieldsTest): Index: 0, Size: 0\n</code></pre>\n\n<h2>output expected</h2>\n\n<pre><code>HSDA_17_VerifyShippingOrderNoInOrderConfirmationTest): Timed out after 90 seconds\nHSDA_1_BuyVoice): Session not available \nHSDA_9_CreateAccounAndBuyDeviceInCheckoutTest): Timed out after 90 seconds\nHSDA_2_BuyMapswithNewUserAtCheckOutTest): Address already in use: connect\nHSDA_69_ChangeBillingAddressInNonUSLocaleForAllFieldsTest): Index: 0, Size: 0\n</code></pre>\n"},{"tags":["bash","availability","aol","checker"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12888407,"title":"(Bash) $user@aol.com email availability checker","body":"<p>So, I'm trying to set up a script in bash to send a request to aim.com's signup form, where it allows you to check if an ID is able to be made like so:</p>\n\n<p><a href=\"https://new.aol.com/productsweb/?promocode=827692&amp;ncid=txtlnkuswebr00000073\" rel=\"nofollow\">https://new.aol.com/productsweb/?promocode=827692&amp;ncid=txtlnkuswebr00000073</a>\n- Choose a username</p>\n\n<p>if $user = available then $continue; else show \"Sorry, that username isn't available.\".</p>\n\n<p>Once that concept is down, I'll have it running through a list of a good 100 or so to see if any of these are able to be re-made. </p>\n\n<p>If anyone can just point me in a starting direction, that would be awesome! \nThank you for your time.</p>\n"},{"tags":["bash","if-statement","while-loop"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":80,"score":0,"question_id":12887685,"title":"bash while loop unintentionally ends after true if","body":"<p>is probably a stupid question, but can't see the reason for while abort.</p>\n\n<p>i have a file like this:</p>\n\n<pre><code>\"id\": \"00000000000000000\",\n\"visibilitystate\": 1,\n\"profilestate\": 8\n\"somethingelse\": \"abc\",\n\"id\": \"99999999999999999\",\n\"againsomethingelse\": \"cba\"\n\"visibilitystate\": 0,\n\"profilestate\": 9\n</code></pre>\n\n<p>one million or more repetitions, number,designation and value can be different between id and id, but id is always different.\nmy first thought was read in a loop, store the value in a array and later insert into mysql-db.</p>\n\n<p>i try this:</p>\n\n<pre><code>set -x\n#Data extract array\narray=(0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)\n\n#Control array\narray2=(0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)\n\nwhile read a; do\n    if [[ ${array2[0]} == 1 ]]; then\n        awk '/\"id\":/ { exit 42 }'\n        if [[ $? -eq 42 ]]; then\n            echo mysql\n            array2[0]=0\n        fi\n    fi\n    if [[ ${array2[0]} == 0 ]]; then\n        awk '/\"id\":/ { exit 42 }'\n        if [ $? -eq 42 ]; then\n            array[0]=`sed -n 's/.*\"id\":.\"\\(.*\\)\",.*/\\1/p'`\n            array2[0]=1\n        fi\n    fi\ndone &lt;testf\n\nset +x\n</code></pre>\n\n<p>after read one line, the loop exit, don't understand why.</p>\n\n<p>output:</p>\n\n<pre><code>+ array=(0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)\n+ array2=(0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)\n+ read a\n+ [[ 0 == 1 ]]\n+ [[ 0 == 0 ]]\n+ awk '/\"id\":/ { exit 42 }'\n+ '[' 42 -eq 42 ']'\n++ sed -n 's/.*\"id\":.\"\\(.*\\)\",.*/\\1/p'\n+ array[0]=\n+ array2[0]=1\n+ read a\n+ set +x\n</code></pre>\n\n<p>can someone help me?</p>\n"},{"tags":["bash","awk"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":12882738,"title":"Get n last records and change particular columns on them","body":"<p>I have file like this</p>\n\n<pre><code>1      2      \"45554323\"      p      b  \n2      2      \"34534567\"      f      a  \n3      3      \"76546787\"      u      b  \n2      4      \"56765435\"      f      a  \n*      a  \n0      b  \n</code></pre>\n\n<p>I want delete <code>a</code>, <code>b</code> from two last Records in <code>END{}</code> section </p>\n\n<p>Result:</p>\n\n<pre><code>1      2      \"45554323\"      p      b  \n2      2      \"34534567\"      f      a  \n3      3      \"76546787\"      u      b  \n2      4      \"56765435\"      f      a  \n*        \n0        \n</code></pre>\n\n<p>How can I get n last lines and change fields on them with awk?</p>\n"},{"tags":["json","bash","twitter","sed","awk"],"answer_count":19,"favorite_count":18,"up_vote_count":30,"down_vote_count":1,"view_count":26405,"score":29,"question_id":1955505,"title":"Parsing json with sed and awk","body":"<p>I'm trying to parse json returned from a curl request, like sp:</p>\n\n<pre><code>curl 'http://twitter.com/users/username.json' | sed -e 's/[{}]/''/g' | awk -v k=\"text\" '{n=split($0,a,\",\"); for (i=1; i&lt;=n; i++) print a[i]}'\n</code></pre>\n\n<p>I have it set working where it splits the json into fields, i.e. the above returns</p>\n\n<pre><code>% ...\n\"geo_enabled\":false\n\"friends_count\":245\n\"profile_text_color\":\"000000\"\n\"status\":\"in_reply_to_screen_name\":null\n\"source\":\"web\"\n\"truncated\":false\n\"text\":\"My status\"\n\"favorited\":false\n% ...\n</code></pre>\n\n<p>But what I would like to do is grab a specific field (denoted by the -v k=text) and only print that. </p>\n\n<p>Any ideas? </p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12887906,"title":"Exclamation mark inside quotes results in a strange parse error","body":"<p>Why does this command line work:</p>\n\n<pre><code>$ output='Irrelevant'; if [[ $output =~ Something ]]; then echo \"I found something in the output.\" ; fi\n</code></pre>\n\n<p>And this one give me a strange parse error?</p>\n\n<pre><code>$ output='Irrelevant'; if [[ $output =~ Something ]]; then echo \"I found something in the output!\" ; fi\n-bash: !\": event not found\n</code></pre>\n\n<p>The <em>only</em> change from the first version is that the sentence to be echoed inside quotes ends with an exclamation mark. <strong>Why does Bash give me that error in the second version?</strong></p>\n\n<p>In case it matters, this is the output from <code>bash --version</code>:</p>\n\n<pre><code>GNU bash, version 4.2.24(1)-release (x86_64-pc-linux-gnu)\n</code></pre>\n"},{"tags":["linux","osx","git","bash","autocomplete"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":203,"score":4,"question_id":11571163,"title":"Git Autocompletion looks weird (and only half-functional)","body":"<p>Following <a href=\"http://railslove.com/blog/2011/11/25/git-autocomplete-in-bash-on-a-mac/\" rel=\"nofollow\">these excellent instructions for enabling Git bash autocompletion in OSX</a>:</p>\n\n<pre><code>curl https://raw.github.com/git/git/master/contrib/completion/git-completion.bash -o ~/.git-completion.bash\necho \"source ~/.git-completion.bash\" &gt;&gt; ~/.bash_profile\n</code></pre>\n\n<p>I get the following output when I type \"git <kbd>Tab</kbd><kbd>Tab</kbd>\" at the command line:</p>\n\n<p><img src=\"http://i.stack.imgur.com/pORn2.png\" alt=\"Output from git tab-tab\"></p>\n\n<p>Following multiple different tutorials produces the same result. Either I don't know the right search terms or there is just very little documented about this issue...</p>\n\n<p>Anyone encountered similar issues implementing git autocompletion for OSX? Running Lion if that's important.</p>\n"},{"tags":["c++","linux","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":69,"score":-3,"question_id":12887358,"title":"How to direct a text file to a C program using bash?","body":"<p>I am doing \"cat words | sign\" (words is the text file and sign is the c program). However this seems to generate a infinite loop. Any idea how to solve this?</p>\n\n<p>And what is the meaning of </p>\n\n<pre><code>sign &lt; words | @sort &gt; out\n</code></pre>\n\n<p>Below is the code for the c program.</p>\n\n<pre><code>int main(){\n    char words[80];\n    scanf(\"%s\", words);\n    printf(words);\n    string_sort(words);\n    printf(\" \");\n    printf(words);\n    printf(\"\\n\");\n\n    while ( words != \"\"){\n            scanf(\"%s\", words);\n            printf(\"%s\", words);\n            string_sort(words);\n            printf(\"%s\", \" \");\n            printf(\"%s\", words);\n            printf(\"\\n\");\n    }\n }\n</code></pre>\n"},{"tags":["bash","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12886883,"title":"#BASH - How can I: read input; var = grep $input; if $input = $var then","body":"<p>I want to compare what the user enters to this text file, to determine if what they entered is in the text file or not, and then tell them.</p>\n\n<p>file1: color_readme.txt\nin this file is:</p>\n\n<pre><code>red\nred\norange\nblue\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>echo Please enter a color:\ncat color_readme.txt (printing the colors to screen)\nread userinput (read what the user enters)\nvariable1 = grep $userinput (a random variable = what is found in the file according to what the user typed)\nif userinput = variable1 (SAY THIS)\nelse (SAY THIS)\n</code></pre>\n\n<p>What is the best way to do this for a beginner?\nMy teacher only wants me using the basic if ifelse and else conditions.</p>\n"},{"tags":["bash","shell","unix","zsh","tee"],"answer_count":2,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":107,"score":5,"question_id":12517519,"title":"How to redirect stdout+stderr to one file while keeping streams separate?","body":"<p>Redirecting stdout+stderr such that both get written to a file while still outputting to stdout is simple enough:</p>\n\n<pre><code>cmd 2&gt;&amp;1 | tee output_file\n</code></pre>\n\n<p>But then now both stdout/stderr from cmd are coming on stdout. I'd like to write stdout+stderr to the same file (so ordering is preserved assuming cmd is single threaded) but then still be able to also separately redirect them, something like this:</p>\n\n<pre><code>some_magic_tee_variant combined_output cmd &gt; &gt;(command-expecting-stdout) 2&gt; &gt;(command-expecting-stderr)\n</code></pre>\n\n<p>So combined_output contains the both with order preserved, but the command-expecting-stdout only gets stdout and command-expecting-stderr only gets stderr. Basically, I want to log stdout+stderr while still allowing stdout and stderr to be separately redirected and piped. The problem with the tee approach is it globs them together. Is there a way to do this in bash/zsh?</p>\n"},{"tags":["c++","bash","environment-variables"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":126,"score":3,"question_id":12886018,"title":"Permanently setting environment variables from a C++ program after exit","body":"<p>I am writing a bash script that runs a C++ program multiple times. I use <code>getenv()</code> and <code>putenv()</code> to create, get, and update environment variables in the C++ program.  After the C++ program ends, the bash script needs to grab these variables and perform some basic logic.  The problem is that when the C++ program exits, the environment variables disappear.  Is there any way to permanently store these variables after the program's termination so that the bash script can use them?  If not, what is the best way to share variables between a bash script and a C++ program?  The only solution I can think of is writing output to files.  I do not want to print this data in the console.  Any help would be greatly appreciated.</p>\n"},{"tags":["osx","git","bash","command-line"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12886086,"title":"Git commits via command-line fail, showing > symbol","body":"<p>I'm new to bash. After I've staged files to my local git repository and typed in the commands to commit:</p>\n\n<pre><code>    git commit -m \"Descriptive message\"\n</code></pre>\n\n<p>Git (or is it terminal?) stops dead, showing the</p>\n\n<pre><code>    &gt;\n</code></pre>\n\n<p>symbol. It won't accept further commands and I have to exit the session and start a new one. Why does this happen?</p>\n"},{"tags":["bash","script","command","find"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":12885694,"title":"search with find command until first match","body":"<p>I just need to search for a specific directory that can be anywhere is there a way to run this command until the first match? Thanx!\nIm now ussing </p>\n\n<pre><code>find / -noleaf -name 'experiment' -type d | wc -l\n</code></pre>\n"},{"tags":["linux","bash","makefile"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12884845,"title":"makefile not generating executeble files","body":"<p>I am fairly new at makefile. I am trying to create a makefile that compiles yu.c and link yu.c to get a executable file called yu.<br>\nBelow is the code i have. I am using make -f mymakefile to run the file and each time i run it, only gcc -c yuFile.c is done.\nWhere am I wrong?</p>\n\n<pre><code>CC=gcc\n\nyu.o: yuFile.c\n    ${CC} -c yuFile.c\nyu: yuFile.o\n    ${CC} yu -o yuFile.o\nrun-c: yu\n    ./yu\nclean:\n    rm -f \"*.o\" core\n</code></pre>\n"},{"tags":["bash","solaris","opensolaris"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12884540,"title":"Bash - iterate over a union of two (disjoint) arrays","body":"<p>I am writing a bash script (for an Open Solaris 11 machine).</p>\n\n<p>I have declared two arrays in the following way:</p>\n\n<pre><code>rpool_fs=(\n  \"rpool\"\n  \"rpool/ROOT\"\n  \"rpool/ROOT/solaris\"\n  \"rpool/export\"\n);\n\nshares_fs=(\n  \"shares\"\n  \"shares/svn\"\n);\n</code></pre>\n\n<p>I am able to iterate over the rpool_fs array in the following way:</p>\n\n<pre><code>for i in \"${rpool_fs[@]}\"\ndo\n  echo $i\ndone\n</code></pre>\n\n<p><strong>I would now need to iterate over the union of the rpool_fs and shares_fs arrays.</strong> Note that the arrays are disjoint, e.g. I do in fact only need to iterate over a concatention of them. How do I do that?</p>\n"},{"tags":["linux","bash","unix","newline"],"answer_count":7,"favorite_count":1,"up_vote_count":12,"down_vote_count":0,"view_count":10788,"score":12,"question_id":2613800,"title":"How to convert DOS/Windows newline to Unix newline in bash script?","body":"<p>In bash, how do I convert DOW/Windows newlines to Unix? It must be non-interactive, not like starting <code>vi</code> and typing something in, but a command on the command line that can be put in a script file. The <code>dos2unix</code> and <code>unix2dos</code> commands are not available on the system.</p>\n\n<p>How do I do this with commands like <code>sed</code>/<code>awk</code>/<code>tr</code>?</p>\n"},{"tags":["string","bash","file-download"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":42,"score":-1,"question_id":12882077,"title":"podcast automatic download, need string tokenizer","body":"<p>I'm creating this script, it's goal is to download some pod-cast episodes.\nI copied the rtsp link for each episode into VAR.\nI need to extract the first line from VAR into a place-holder called TMP.<br>\nUsing mplayer I will download the stream in TMP as 01.ra, 02.ra etc...<br>\nI'm having some trouble with the syntax. The script below is what I managed to do so far . Can someone suggest what missing information I need to add or advise me on where to look?</p>\n\n<pre><code>#!/bin/sh\nVAR=\"\nrtsp://mm6.rai.it/radiofonia/radio3/napoli/terzo_anello/2011/doppiosogno2011_11_21.ra\nrtsp://mm6.rai.it/radiofonia/radio3/napoli/terzo_anello/2011/doppiosogno2011_11_22.ra\nrtsp://mm6.rai.it/radiofonia/radio3/napoli/terzo_anello/2011/doppiosogno2011_11_23.ra\nrtsp://mm6.rai.it/radiofonia/radio3/napoli/terzo_anello/2011/doppiosogno2011_11_24.ra\"\n\nX=1\n\nwhile [${VAR} != \"\"] \n</code></pre>\n\n<p>Is this syntax correct?<br>\nMy condition should be: as long as VAR is not empty string</p>\n\n<pre><code>do\nTMP=\"first line of VAR\" \n#i.e.  \"rtsp://mm6.rai.it/radiofonia/radio3/napoli/terzo_anello/2011/doppiosogno2011_11_21.ra\"\n\nmplayer -noframedrop -dumpstream -dumpfile ${X}.ra ${TMP}\n#this will download the stream in TMP as file X.ra\n\n#remove TMP from VAR, VAR should now miss its first line\n\nX=`expr $X + 1` #X++\ndone\n</code></pre>\n"},{"tags":["eclipse","bash","shell","batch-file","pydev"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":12881333,"title":"Bash-->Batch + Colon and back/forward-slash use","body":"<p>I'm trying to make portable pyDev automatically set up the python interpreter by using a batch script that's run before eclipse launches. I came across the following bash-script for doing just that, but I'm unable to translate it to batch (which I'm familiar with):   </p>\n\n<pre><code>PYTHONPATH=/my/extra/python/modules python /my/eclipse/plugins/org.python.pydev_*/PySrc/interpreterInfo.py 2&gt;/dev/null | sed 's/INS_PATH$//g;s/OUT_PATH$//g;s/^EXECUTABLE:/Executable\\\\:/g' | tr -d '\\n' | cat &lt;(echo -en 'eclipse.preferences.version=1\\nINTERPRETER_PATH_NEW=Name\\:python\\:EndName\\:') - &lt;(echo '&amp;&amp;&amp;&amp;&amp;') &gt;/my/workspace/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.python.pydev.prefs\n</code></pre>\n\n<p><strong>I tried breaking it down to see what's being replaced/piped where, but it doesn't make sense:</strong></p>\n\n<pre><code>PYTHONPATH= App/Eclipse/plugins/org.python.pydev_*/PySrc/interpreterInfo.py 2&gt; /dev/null \n|sed '  s/ INS_PATH$/ / g; REM Delete all instances of INS_PATH that are at the end of a line\n        s/ OUT_PATH$/ / g; REM Delete all instances of OUT_PATH that are at the end of a line\n        s/ ^EXECUTABLE:/ Executable\\\\:/ g REM Replace all instances of \"\\nEXECUTABLE:\" that are at the beginning of a line with \"Executable\\:\"\n' \n|tr -d '\\n' \n|cat &lt;(echo -en 'eclipse.preferences.version= 1 \\n INTERPRETER_PATH_NEW= Name\\:python\\:EndName\\:') - &lt;(echo '&amp;&amp;&amp;&amp;&amp;') \n&gt;/my/workspace/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.python.pydev.prefs\n</code></pre>\n\n<hr>\n\n<p>One of the most confusing parts is the the strange use of colons and use of <strong>'/'</strong> vs <strong>'\\'</strong>. \nLooking in config files I see <code>osgi.framework=file\\:plugins/org.eclipse.osgi_3.8.0.v20120529-1548.jar</code></p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12882089,"title":"BASH - Variable name from variable","body":"<p>my code</p>\n\n<pre><code>TOTAL=${#FOO_5[*]} // COUNT ITEMS IN ARRAY\n</code></pre>\n\n<p>what if code</p>\n\n<pre><code>ARRAY_NAME=\"FOO_5\"\nTOTAL=${#${!ARRAY_NAME}[*]} //error\n</code></pre>\n\n<p>please fix\nthank you very much</p>\n"},{"tags":["c","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":106,"score":-1,"question_id":12874968,"title":"Pass parameter from shell script to c program","body":"<pre><code>gcc (GCC) 4.7.2\nGNU bash, version 4.2.37\n</code></pre>\n\n<p>Hello,</p>\n\n<p>I have the following bash script that I want to pass string parameter to my c program. I tried using pipes but failed.</p>\n\n<p>The c program will need to get an input from the shell script. I am not sure to to read in an input from a shell script.</p>\n\n<p>My bash script is below.</p>\n\n<pre><code>#!/usr/bash\n\n# About on any errors\nset -e\n\nRUN_WITH_VALGRIND=\"\"\n\nif [ \"$1\" == \"valgrind\" ]; then\n    RUN_WITH_VALGRIND=\"valgrind\"\n    echo \"START TESTING WITH VALGRIND\"\nfi\n\n$RUN_WITH_VALGRIND ./c_program\n\necho \"Hello\" | ./c_program\n</code></pre>\n\n<p>And my sample c program is here:</p>\n\n<pre><code>char str_input[16];\nprintf(\"Get input: \");\nscanf(\"%s\", str_input);\nprintf(\"Input [ %s ]\\n\", str_input);\n</code></pre>\n\n<p>I am trying to get the scanf to read the input from the shell script.</p>\n\n<p>Many thanks for any advice,</p>\n"},{"tags":["git","bash","terminal","sh"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":12872446,"title":"git with --git-dir= results in 'not a git repository'","body":"<p>I have a script in one of my iOS apps that should get the git revision hash and put it in the version number. In this script I run git --git-dir=\"$PROJECT_DIR\" show -s --pretty=format:%h for that. However, I get the message that the directory isn't a git repository. If I echo the PROJECT_DIR var and go to the terminal the following works:</p>\n\n<pre><code>cd projectDirPath\ngit show -s --pretty=format:%h\n</code></pre>\n\n<p>What doesn't work is:</p>\n\n<pre><code>git --git-dir=projectDirPath show -s --pretty=format:%h\n</code></pre>\n\n<p>Am I missing something? The documentation states, that I can specify the path to a git repository with --git-dir and the specified path obviously is a git repository as all the git commands work without any problem if I first cd into that path. However if I am not in this path, specifing --git-dir doesn't work.</p>\n\n<p>Best regards,\nMichael</p>\n"},{"tags":["python","ruby","perl","bash","shell"],"answer_count":12,"favorite_count":80,"up_vote_count":181,"down_vote_count":2,"view_count":45595,"score":179,"question_id":3637668,"title":"Why are scripting languages (e.g. Perl, Python, Ruby) not suitable as shell languages?","body":"<p>What are the differences between shell languages like <a href=\"http://www.gnu.org/software/bash/bash.html\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\">bash</a>, <a href=\"http://zsh.sourceforge.net/\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\">zsh</a>, <a href=\"http://fishshell.com/screenshots.html\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\">fish</a> and the scripting languages above that makes them more suitable for the shell?</p>\n\n<p>When using the command line the shell languages seem to be much easier. It feels for me much smoother to use bash for example than to use the shell profile in ipython, <a href=\"http://transneptune.net/2009/06/16/ipython-as-your-default-shell/\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\">despite reports to the contrary</a>. I think most wil agree with me that a large portion of medium to large scale programming is easier in Python than in bash. I use Python as the language I am most familiar with, the same goes for Perl and Ruby.</p>\n\n<p>I have tried to articulate the reason but am unable to, aside from assuming that the treatment of strings differently in both has something to do with it.</p>\n\n<p>The reason of this question is that I am hoping to develop a language usable in both. If you know of such a language, please post it as well.</p>\n\n<p>As S.Lott explains, the question needs some clarification. I am asking about the features of the shell <em>language</em> versus that of scripting languages. So the comparison is not about the characteristics of various interactive (<a href=\"http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\">REPL</a>) environments such as history and command line substitution. An alternative expression for the question would be:</p>\n\n<p>Can a programming language that is suitable for design of complex systems be at the same time able to express useful one-liners that can access the file system or control jobs? Can a programming language usefully scale up as well as scale down?</p>\n"},{"tags":["bash","curl","zenity"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12878203,"title":"zenity radiolist multi column population from curl","body":"<p>I have 3 columns of dynamic data to display in zenity - true/false, text1, text2</p>\n\n<p>please help me before I pull my hair out. Any method I have tried is not successful. I have tried arrays, strings etc but can't get it working. The following is the closest I've gotten, but the radiolist field is always false regardless of input:</p>\n\n<pre><code>    for i in $(curl -s \"some http link . . .\");\n    do;\n    dlist+=(\"$i\");\n    done\n\n    ans=$(zenity --list --width 800 --height 500 --title \"title:\" --radiolist --separator=\"|\" --column \"Select\" --column \"ID\" --column \"Description\" ${dlist[@]})\n</code></pre>\n"},{"tags":["python","ruby","perl","bash","scripting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12878594,"title":"Scripting language to find the .a file name from the concatenated nm output for a list of .a files","body":"<p>I have a file with the nm output for all the .a files in an application. Now, how do I find out the .a which contains a specified function. </p>\n\n<p>I am good with Bash scripting and am fairly competent in Perl and can do some Python and Ruby.</p>\n\n<p>Any suggestions on the scripting language I can use for doing this?</p>\n\n<p>Question update:\nI have a file which I created with the following command:</p>\n\n<pre><code>$ find . -name '*'.a &gt; afile_list.log\n$ while read line; do echo \"$line\"; nm $line; done &lt; ./afile_list.log &gt; a_list.log\n</code></pre>\n\n<p>Now I have a function fun1() in the codebase. How do I find out which of the .a's has this function in it?</p>\n"},{"tags":["linux","bash","shell","sh"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":320,"score":3,"question_id":7383144,"title":"What does \"$?\" give us exactly in a shell script?","body":"<p>I saw the code written somewhere online, and I wanted to know what exactly does \"$?\" do/give us.\nGoogling did not help.</p>\n\n<p>Here's the code I saw it in:</p>\n\n<pre><code>#!/bin/sh\n\nping -c 2 localhost\nif [ $? != 0 ] ; then\n    echo \"Couldn't ping localhost, weird\"\n    fi\n\nping -c 2 veryweirdhostname.noend \nif [ $? != 0 ] ; then\n    echo \"Surprise, Couldn't ping a very weird hostname..\"\n    fi\n\necho \"The pid of this process is $$\"\n</code></pre>\n\n<p>Taken from: <a href=\"http://efod.se/writings/linuxbook/html/shell-scripts.html\" rel=\"nofollow\">http://efod.se/writings/linuxbook/html/shell-scripts.html</a></p>\n"},{"tags":["bash","twitter","script","twitter-api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12878772,"title":"Bash script to fetch protected twitter feed isn't working","body":"<p>I'm trying to get a bash script to fetch a protected twitter feed but it's not working.  I tried adding some basic functions to put together the appropriate information and build the oauth header but the script hangs (no errors).  My knowledge of functions is woefully slim so I think I'm missing something painfully obvious.  Can someone help?  Here's my sample code: </p>\n\n<pre><code>#!/usr/bin/env bash\n\nstep1() { k1=\"fooConsumerKey\" ; k2=\"fooConsumerSecret\" ; k3=\"FooAccessToken\" ; k4=\"FooAccessTokentSecret\" ; once=$RANDOM ; ts=$(date +%s) ; hmac=\"$k2&amp;$k4\" ; id=\"FooTwitterUserID\" ; }\n\nstep2() { b=\"GET&amp;https%3A%2F%2Fstream.twitter.com%2F1%2Fstatuses%2Ffilter.json&amp;follow%3D${id}%26oauth_consumer_key%3D${k1}%26oauth_nonce%3D${once}%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D${ts}%26oauth_token%3D${k3}%26oauth_version%3D1.0\";}\n\nstep3() { s=$(echo -n $b | openssl dgst -sha1 -hmac $hmac -binary | openssl base64); signature=`for((i=0;i&lt;${#s};i++)); do case ${s:i:1} in +) e %2B;; /) e %2F;; =) e %3D;; *) e ${s:i:1};; esac ; done` ; } ; e() { echo -n $1; }\n\nstep4() { oauth_header=\"Authorization: OAuth oauth_consumer_key=\\\"$k1\\\", oauth_nonce=\\\"$once\\\", oauth_signature=\\\"$signature\\\", oauth_signature_method=\\\"HMAC-SHA1\\\", oauth_timestamp=\\\"$ts\\\", oauth_token=\\\"$k3\\\", oauth_version=\\\"1.0\\\"\" ; }\n\nstep1 ; step2 ; step3 ; step4 ; curl -o- --get 'https://stream.twitter.com/1/statuses/filter.json' --header \"$oauth_header\" --data \"follow=$id\"\n</code></pre>\n\n<p>The \"foo\" values are for display purposes only.  I've added the actual twitter API values in my real script. </p>\n\n<p>What am I missing here? </p>\n"},{"tags":["bash","dropbox","inotify"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":12878546,"title":"inotifywait script watching a dropbox folder .... cp: cannot stat","body":"<p>my first question + here we go....</p>\n\n<p>this is a simple script, i had it working before, but now its dead.</p>\n\n<p>when a file comes into a dropbox folder, it appears on the server.\nthis simple script has inotifywait watching for appends\nand doing things i need done with the incoming files, in this case, a simple move\nto another folder.</p>\n\n<pre><code>    inotifywait -r -m -e attrib /path/to/watched/directory/\n\n    while read dir ev file;\n\n        do \n\n        cp $file ../123\n\n        done\n</code></pre>\n\n<p>I get this error </p>\n\n<pre><code>    cp: cannot stat `121013_0005.jpg': No such file or directory\n</code></pre>\n\n<p>I'm missing something simple, pls school me.</p>\n"},{"tags":["bash","mapping"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":12877311,"title":"browsing through many paths for many files","body":"<p>I am currently working on a small bash script that reads source C files and then finds corresponding include files.</p>\n\n<p>Now I have to choose between two models of finding a mapping M: filename -> {include file paths }. What I have are two arrays - one with found include filenames and another containing possible paths. The options are :</p>\n\n<p>a) look for each file in one path, then proceed to another path;</p>\n\n<p>b) look through a list of paths to find one file, then proceed to another file.   </p>\n\n<p>My question is - what will be faster? There is equal number of iterations in each of the choices, but maybe some of the commands are more time-consuming? I personally prefer option a).</p>\n\n<p>Thanks for any help and sorry if this was a stupid question. </p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12875867,"title":"BASH - Stop execution of sourced scripts","body":"<p>I have a script that runs other scripts with source. What i want to do is to find those scripts being run, and if any of them is running, then stop executing it.\nSomething like this:</p>\n\n<pre><code> #!/bin/bash\n\n source /path/script1.sh\n source /path/sript2.sh\n source /path/sript3.sh\n\n if [ a_script_is_running ]\n then\n      stop_execution scriptn.sh\n fi\n</code></pre>\n\n<p>If one of those scripts was running an infinite loop, is there a way to stop this loop and to continue with the execution of the main script?</p>\n"},{"tags":["linux","bash","shell","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12876064,"title":"Linux - How to search for words in files and print how many times they occur?","body":"<p>I need to search through a directory, ARCHIVE, which contains many sub directories, each which contain files. Each file has an email address in it. I want to list all of the email address', with the @blah.com truncated, then list the occurrences for each name.</p>\n\n<p>I figured out how to find the emails and truncate the @ part, but I can't figure out how to count how many times each individual name occurs.</p>\n\n<pre><code>grep -R '^To: ' $ARCHIVE | cut -d@ -f1 | awk  '{print $2}' | sort | uniq\n</code></pre>\n\n<p>Also for some reason I can't get this to work in a script; whenever I call it it does nothing, but if I put it in the command line it works.</p>\n"},{"tags":["python","bash","pexpect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12738929,"title":"pexpect need to use pipe without starting the bash shell since the bash shell does not understand the command","body":"<p>I want to do something likethis using pexpect</p>\n\n<pre><code>echild = pexpect.spawn('/bin/bash -c \"sysinfo -v | grep \"SCM\"')\nfout = file('/home/kiva/release_file.txt' , 'w+')\nchild.logfile = fout\n</code></pre>\n\n<p>The problem is that I want the out of that command into a textfile but I have to start a shell since we cannot use pipe in spawn(). The bash shell does not understand sysinfo -v and complains about it.</p>\n\n<p>Do you guys have any idea or know of a way in which I can get the desired output into the file without opening the bash terminal? I can solve the issue by just using the spawn() method without grepping it but I want the exact match and hence grep is necessary.</p>\n\n<p>Thank you</p>\n"},{"tags":["bash","autocomplete"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12874920,"title":"'have' keyword for bash completion","body":"<p>Is <code>have</code> a keyword in bash? Or do bash completion scripts use a language that is not bash?</p>\n\n<pre><code>have gcc &amp;&amp;\n_gcc()\n{\n</code></pre>\n\n<p>It is common. See: <code>grep \"have .* &amp;&amp;\" /etc/bash_completion.d/*</code></p>\n\n<p>I could not find any information on the bash completion tutorials I've seen and I could not find any information in <code>man bash</code>. It's also difficult to google \"have\". Where do I find documentation on this?</p>\n\n<p>I'm guessing it has to do with making sure that there <code>gcc</code> exists in the <code>PATH</code>?</p>\n\n<p>edit: yes. <code>/etc/bash_completition</code> contains:</p>\n\n<pre><code>have()\n{\n    unset -v have\n    # Completions for system administrator commands are installed as well in\n    # case completion is attempted via `sudo command ...'.\n    PATH=$PATH:/sbin:/usr/sbin:/usr/local/sbin type $1 &amp;&gt;/dev/null &amp;&amp;\n    have=\"yes\"\n}\n</code></pre>\n"},{"tags":["osx","bash","unzip"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12874956,"title":"How to unzip to the same directory in bash","body":"<p>I have hundreds of directories, each containing several zip files. I would like to iterate over each directory and unzip all zip files, placing the contents of the zip files into the same directory as the zip files themselves (without creating new sub-directories). Here's the bash script I have:</p>\n\n<pre><code>#!/bin/bash\nsrc=\"/path/to/directories\"\nfor dir in `ls \"$src/\"`\ndo\nunzip \"$src/$dir/*\"\ndone\n</code></pre>\n\n<p>This script does the unzipping, but it creates thousands of sub-directories and dumps them on my desktop! How can I get the desired behavior? I'm on Mac OSX if that makes a difference.</p>\n"},{"tags":["bash","awk","unique"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":5472,"score":2,"question_id":2781491,"title":"Counting unique values in a column with a shell script","body":"<p>I have a tab delimited file with 5 columns and need to retrieve a count of just the number of unique lines from column 2. I would normally do this with Perl/Python but I am forced to use the shell for this one.</p>\n\n<p>I have successfully in the past used *nix uniq function piped to wc but it looks like I am going to have to use awk in here.</p>\n\n<p>Any advice would be greatly appreciated. (I have asked a similar question previously about column checks using awk but this is a little different and I wanted to separate it so if someone in the future has this question this will be here)</p>\n\n<p>Many many thanks!<br>\nLilly </p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12873682,"title":"Short way to escape HTML in Bash?","body":"<p>The box has no Ruby/Python/Perl etc.</p>\n\n<p>Only bash/sed/awk.</p>\n\n<p>A way is to replace chars by map, but it becomes tedious.</p>\n\n<p>Perhaps some built-in functionality i'm not aware of?</p>\n"},{"tags":["bash"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12873165,"title":"How to ensure I have exactly 2 spaces before string and zero spaces after","body":"<p>I get a string that can have from zero to multiple leading and trailing spaces.</p>\n\n<p>I'm trying to get rid of them without lot of hackery but my code looks huge.</p>\n\n<p>How to do this in a clean way?</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12868331,"title":"Is there a better way to swap the first half and the last half of a file's name in BASH?","body":"<p>So, I wrote some a BASH shell script for renaming image files downloaded from deviant art so the artist name comes first, then the name of the piece of art. (for those not familiar with dA, the system names downloadable image files as imageTitle_by_ArtistsName.extention, which makes it hard to organize images quickly). It works... but it seems so clunky. Is there a more elegant way to handle this?</p>\n\n<p>The code:</p>\n\n<pre><code>#!/bin/bash\n#############################\n# A short script for renaming\n#Deviant Art files\n#############################\n\necho \"Please enter your image directory: \"\nread NewDir\n\necho \"Please enter your destination directory: \"\nread DestinationDir\n\nmkdir $DestinationDir\ncd $NewDir\n\n\nls&gt;&gt;NamePile\n\nListOfFiles=`cat NamePile`\n\n\nfor x in $ListOfFiles\ndo\n\n\n#Pull in the file Names\nFileNameVar=$x\n\n\n#Get the file types\nFileType='.'${FileNameVar#*.}\n\n#Chop the Artists name\nArtistsName=${FileNameVar%%.*}\nArtistsName=${ArtistsName##*_by_}\n\n#Chop the pieces name\nImageName=${FileNameVar%%.*}\nImageName=${ImageName%%_by_*}\n\n#Reassemble the New Name\nNewFileName=$ArtistsName\" \"$ImageName$FileType\n\ncp $x ../$DestinationDir/\"$NewFileName\"\n\n\ndone\n\nrm NamePile\n#######################################\n</code></pre>\n"},{"tags":["regex","string","bash","shell"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":2111,"score":3,"question_id":638991,"title":"What is the best way to do string manipulation in a shell script?","body":"<p>I have a path as a string in a shell-script, could be absolute or relative:</p>\n\n<p>/usr/userName/config.cfg</p>\n\n<p>or</p>\n\n<p>../config.cfg</p>\n\n<p>I want to extract the file name (part after the last /, so in this case: \"config.cfg\")</p>\n\n<p>I figure the best way to do this is with some simple regex?\nIs this correct?  Should or should I use sed or awk instead?  </p>\n\n<p>Shell-scripting's string manipulation features seem pretty primative by themselves, and appear very esoteric.  </p>\n\n<p>Any example solutions are also appreciated.</p>\n"},{"tags":["bash","rename","prefix"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":2151,"score":-1,"question_id":1322105,"title":"bash: how to change the basename only of a list of files","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1322643/makefile-how-to-add-a-prefix-to-the-basename\">makefile: how to add a prefix to the basename?</a>  </p>\n</blockquote>\n\n\n\n<p>I have a lit of files (which I get from <code>find bla -name \"*.so\"</code>) such as:</p>\n\n<p><code>/bla/a1.so\n/bla/a2.so\n/bla/blo/a3.so\n/bla/blo/a4.so\n/bla/blo/bli/a5.so</code></p>\n\n<p>and I want to rename them such as it becomes:</p>\n\n<p><code>/bla/liba1.so\n/bla/liba2.so\n/bla/blo/liba3.so\n/bla/blo/liba4.so\n/bla/blo/bli/liba5.so</code></p>\n\n<p>... i.e. add the prefix 'lib' to the basename</p>\n\n<p>any idea on how to do that in bash ?</p>\n"},{"tags":["bash","unix","pwd"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1471,"score":4,"question_id":1744595,"title":"Extract the last directory of a pwd output","body":"<p>How do I extract the last directory of a pwd output? I don't want to use any knowledge of how many levels there are in the directory structure. If I wanted to use that, I could do something like:</p>\n\n<pre><code>&gt; pwd\n/home/kiki/dev/my_project\n&gt; pwd | cut -d'/' -f5\nmy_project\n</code></pre>\n\n<p>But I want to use a command that works regardless of where I am in the directory structure. I assume there is a simple command to do this using awk or sed.</p>\n"},{"tags":["bash","for-loop","awk","compare"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":222,"score":2,"question_id":3597316,"title":"I want a to compare a variable with files in a directory and output the equals","body":"<p>I am making a bash script where I want to find files that are equal to a variable. The equals will then be used.</p>\n\n<p>I want to use \"mogrify\" to shrink a couple of image files that have the same name as the ones i gather from a list (similar to \"dpkg -l\"). It is not \"dpkg -l\" I am using but it is similar. My problem is that it prints all the files not just the equals. I am pretty sure this could be done with awk instead of a for-loop but I do not know how.</p>\n\n<pre><code>prog=\"`dpkg -l | awk '{print $1}'`\"\n\nfor file in $dirone* $dirtwo*\ndo\n     if [ \"basename ${file}\" = \"${prog}\" ]; then\n         echo ${file} are equal\n     else\n         echo ${file} are not equal\n     fi\ndone\n</code></pre>\n\n<p>Could you please help me get this working?</p>\n"},{"tags":["bash","awk"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":443,"score":2,"question_id":9424888,"title":"basename or endswith in awk?","body":"<p>I'm using <code>awk</code> to get the <code>pid</code> of a specific process by name. </p>\n\n<pre><code>#!/bin/sh\n\nfor pid in $(ps | awk '$4 == \"foo\" { print $1 }')\ndo\n    i=1\n    echo \"killing foo at pid $pid\"\n    kill $pid &amp;&amp; echo 'ok' || echo 'failed'\ndone\n</code></pre>\n\n<p>where <code>ps</code> output on OSX is something like:</p>\n\n<pre><code>$ ps\n  PID TTY           TIME CMD\n 1858 ttys000    0:00.15 -bash\n 4148 ttys000    0:01.37 /a/b/c/foo\n</code></pre>\n\n<p>but my shell script only works if the process in the <code>CMD</code> column is exactly <code>foo</code> (no absolute paths).</p>\n\n<p>I'm thinking I can use <code>basename</code>, but how do I call it from <code>awk</code>? \n<br> <strong>OR</strong> <br>\nIs there something like <code>$4.endswith('foo')</code> in <code>awk</code>?</p>\n"},{"tags":["file","bash","variables","debian"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":152,"score":0,"question_id":9556939,"title":"How do I put basename into a variable?","body":"<pre><code>#!/bin/bash\nfile=debian.deb\ntest=basename $file .deb\nDP=\"blah/blah/$test/$test.php\"\nread -p \"[$DP]: \" DPREPLY\nDPREPLY=${DPREPLY:-$DP}\necho \"Blah is set to $DPREPLY\"\necho $DPREPLY&gt;&gt;testfile\n</code></pre>\n\n<p>So what I'm trying to do is set the variable test from the variable file and use it in the file testfile.</p>\n"},{"tags":["osx","bash","quotes"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":86,"score":2,"question_id":11705875,"title":"Basename puts single quotes around variable","body":"<p>I am writing a simple shell script to make automated backups, and I am trying to use basename to create a list of directories and them parse this list to get the first and the last directory from the list.</p>\n\n<p>The problem is: when I use basename in the terminal, all goes fine and it gives me the list exactly as I want it. For example:</p>\n\n<pre><code>basename -a /var/*/ \n</code></pre>\n\n<p>gives me a list of all the directories inside /var without the / in the end of the name, one per line.\nBUT, when I use it inside a script and pass a variable to basename, it puts single quotes around the variable:</p>\n\n<pre><code>while read line; do\ndir_name=$(echo $line)\nbasename -a $dir_name/*/ &gt; dir_list.tmp\ndone &lt; file_with_list.txt\n</code></pre>\n\n<p>When running with +x:</p>\n\n<pre><code>+ basename -a '/Volumes/OUTROS/backup/test/*/'\n</code></pre>\n\n<p>and, therefore, the result is not what I need.</p>\n\n<p>Now, I know there must be a thousand ways to go around the basename problem, but then I'd learn nothing, right? ;)</p>\n\n<p>How to get rid of the single quotes?\nAnd if my directory name has spaces in it?</p>\n"},{"tags":["bash","printf"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12845638,"title":"How do i change the decimal separator in the printf command in bash?","body":"<p>I use the Italian localization of Cygwin, and therefore my printf command uses commas to separate floats, and won't understand dot-separated floats</p>\n\n<pre><code>$ printf \"%f\" 3.1415\n-bash: printf: 3.1415: invalid number\n0,000000\n\n$ printf \"%f\" 3,1415\n3,141500\n</code></pre>\n\n<p>This gives rise to several problems because basically everything else uses a dot to separate decimal digits.</p>\n\n<p>How can I change the decimal separator from comma to dot?</p>\n"},{"tags":["bash","scripting","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":127,"score":0,"question_id":3955509,"title":"Ensuring shell script is being executed by BASH (not csh, ksh, sh etc.)","body":"<p>How would you exit-gracefully-upon-entry when invoking a .sh script from anything other than bash?</p>\n"},{"tags":["linux","bash","text","grep","compare"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":100,"score":1,"question_id":12869354,"title":"How to compare two text files for the same exact text using BASH?","body":"<p>Let's say I have two text files that I need to extract data out of. The text of the two files is as follows:</p>\n\n<p><strong>File 1:</strong></p>\n\n<pre><code>1name - randomemail@email.com\n2Name - superrandomemail@email.com\n3Name - 123random@email.com\n4Name - random123@email.com\n</code></pre>\n\n<p><strong>File 2:</strong> </p>\n\n<pre><code>email.com\nemail.com\nemail.com\nanotherwebsite.com\n</code></pre>\n\n<p>File 2 is File 1's list of domain names, extracted from the email addresses.\nThese are not the same domain names by any means, and are quite random.</p>\n\n<p>How can I get the results of the domain names that match File 2 from File 1?</p>\n\n<p>Thank you in advance!</p>\n"},{"tags":["arrays","bash","export","script"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":816,"score":2,"question_id":5564418,"title":"Exporting an array in bash script","body":"<p>I can not export an array from a bash script to another bash script like this:</p>\n\n<pre><code>export myArray[0]=\"Hello\"\nexport myArray[1]=\"World\"\n</code></pre>\n\n<p>When I write like this there are no problem:</p>\n\n<pre><code>export myArray=(\"Hello\" \"World\")\n</code></pre>\n\n<p>For several reasons I need to initialize my array into multiple lines. Do you have any solution?</p>\n"},{"tags":["bash","synchronization","directory","compression","gzip"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":10527240,"title":"Bash: Maintaining a set of files and their gzipped equivalent","body":"<p>I have a directory tree in which there are some files and some subdirectories.</p>\n\n<pre><code>/\n/file1.txt\n/file2.png\n/dir1\n    /subfile1.gif\n</code></pre>\n\n<p>The objective is to have a script that generates a gzipped version of each file and saves it next to each file, with an added <code>.gz</code> suffix:</p>\n\n<pre><code>/\n/file1.txt\n/file1.txt.gz\n/file2.png\n/file2.png.gz\n/dir1\n    /subfile1.gif\n    /subfile1.gif.gz\n</code></pre>\n\n<p>This would handle the creation of new <code>.gz</code> files.</p>\n\n<p>Another part is deletion: Whenever a non-gzipped file is created, the script would need to delete the orphaned <code>.gz</code> version when it runs.</p>\n\n<p>The last and trickiest part is modification: Whenever some (non-gzipped) files are changed, re-running the script would update the <code>.gz</code> version of only those changed files, based on file timestamp (<code>mtime</code>) comparison between a file and its gzipped version.</p>\n\n<p>Is it possible to implement such a script in bash?</p>\n\n<p><strong>Edit</strong>: The goal of this is to have prepared compressed copies of each file for nginx to serve using the gzip_static module. It is not meant to be a background service which automatically compresses things as soon as anything changes, because nginx's gzip_static module is smart enough to serve content from the uncompressed version if no compressed version exists, or if the uncompressed version's timestamp is more recent than the gzipped version's timestamp. As such, this is a script that would run occasionally, whenever the server is not busy.</p>\n"},{"tags":["bash","shell","alias"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12870950,"title":"Alias for linux redirection operator","body":"<p>I'm trying to create an alias for redirection operators i.e. >, &lt;, >> and also for background process symbol &amp;, using</p>\n\n<pre><code>alias g=\"&gt;\"\n</code></pre>\n\n<p>But when i use <code>cat filename.txt g test.txt</code>, it just prints the filename to stdout and at the end shows </p>\n\n<pre><code>cat: r: No such file or directory\ncat: test1.c: No such file or directory\n</code></pre>\n\n<p>I'm using bash shell.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12870375,"title":"How can I force a syntax error in an arithmetic expression to abort my Bash script?","body":"<p>I recently had a problem in one of my Bash scripts that was caused by unexpected output from one of the SSH commands it ran (due to an OS version upgrade). The problem actually resulted in a Bash syntax error, because I was expecting this output to contain only a numeric status code (from a remote script), which I then used in an arithmetic expression.</p>\n\n<p>What surprised me, though, was that my Bash script continued executing after reporting the syntax error. This, despite the fact that I have the following line near the beginning of the file:</p>\n\n<pre><code># Terminate script if any command fails\nset -o errexit\n</code></pre>\n\n<p>Although a syntax error is obviously not the same as a failed command, it seems to me that that the former represents an even more serious error condition.</p>\n\n<p>I know that you can use the -n parameter to check the syntax of a Bash script without actually executing any commands, but that would not have caught this problem anyway.</p>\n\n<p>Here's an example which causes the error but does not exit:</p>\n\n<pre><code>#!/bin/bash\nset -o errexit\nx=\")\"\necho $(( x + 1 ))\necho still running\n</code></pre>\n\n<p>Is there any way to force a Bash script to terminate immediately after a syntax error in an arithmetic expression is detected during its normal operation?</p>\n"},{"tags":["linux","bash","shell","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":12855603,"title":"Redirect tr output to sed","body":"<p>I need to replace a string in a file with another string, but before the replacement I need to lowercase the new string before passing it to <code>sed</code>.</p>\n\n<p><code>echo 'NEWSTRING' | tr '[:upper:]' '[:lower:]' | sed 's/foo/(my tr output in lowercase)/g' file.txt</code></p>\n\n<p>My question is, How we could pass the replacement string as a parameter ?</p>\n"},{"tags":["linux","bash","backup","webdav","rsync"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":45,"score":-1,"question_id":12870434,"title":"How to merge multiple WebDAV accounts for backup?","body":"<p>I use davfs, aufs, rsync:</p>\n\n<pre><code>sudo mount -t davfs -o uid=wd,gid=wd,dir_mode=777,rw https://wd.wd.wd/ /mnt/webdav1\nsudo mount -t davfs -o uid=wd,gid=wd,dir_mode=777,rw https://wd.wd.wd/ /mnt/webdav2\nsudo mount -t davfs -o uid=wd,gid=wd,dir_mode=777,rw https://wd.wd.wd/ /mnt/webdav3\nsudo mount -t aufs none /mnt/webdav/ -o br:/mnt/webdav1=rw:/mnt/webdav2=rw:/mnt/webdav3=rw,create=mfs,sum\nrsync -r /home/user/bp /mnt/webdav/backup\n</code></pre>\n\n<p>But I have many problems:</p>\n\n<ol>\n<li>aufs pumped into one stream on webdav server</li>\n<li>rsync does not work resume files (tried - ignore-existing but not working)</li>\n</ol>\n\n<p>Does anyone know how to fix these problems or advise other software? I thought of using ownCloud but I'm not sure whether it can unite WebDAV server into one for backup.</p>\n"},{"tags":["bash","printing","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":12791269,"title":"AWK: print $i returns nothing","body":"<p><code>$file</code> is a csv (tab-delimited) with 59 cols and 64 rows. Column 1 is always a string and cols 2+ are always an integer (except once when the value is <code>NULL</code>).</p>\n\n<pre><code>cat ${file} | while read line \n    do awk -F'\\t' '{ for (i=2; i&lt;=NF; i++) print $1 \"\\t\" $i \".\" }';\n    done;\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>Excellent   .\nGood    .\n…\n</code></pre>\n\n<p>And yet switching <code>$i</code> to <code>$2</code> works:</p>\n\n<pre><code>Excellent   29.\nGood    7.\n…\n</code></pre>\n\n<p>Why??</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<pre><code>#lines 1 &amp; 2 from data.csv (columns truncated for brevity):\nExcellent   29  54  47  46  38  22  50\nGood    7   14  27  24  26  36  20\n\n#reform.sh\nfile=$1;\nawk -F'\\t' '{ for (i=2; i&lt;=NF; i++) print $1 \"\\t\" $i; }' ${file};\n</code></pre>\n\n<p>Still behaves/returns like the previous.</p>\n\n<p><strong>RESOLUTION</strong>:</p>\n\n<p>The approved answer does provide the proper output from AWK. After restarting my Terminal application, the script performed as described. I was not able to determine the cause of the Terminal app issue.</p>\n"},{"tags":["bash","awk","terminal","multiple-columns"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":94,"score":2,"question_id":12458729,"title":"awk to output table-like or excel-like columns in linux terminal?","body":"<p>I do a long pipe, that ends with ...| awk '{print $5\"\\t\\t\" $3\"\\t\"$4}' in linux terminal. The columns are padded with tabs. The first colmn entries have different number of characters, so the second column results are not perfectly vertical. How to make the table look perfect?</p>\n\n<p><img src=\"http://i.stack.imgur.com/lStuP.png\" alt=\"enter image description here\"></p>\n"},{"tags":["linux","bash","unix"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12870206,"title":"Is 「Alt+F2 firefox」 equivalent to 「firefox &」 in terminal?","body":"<p>Linux has its <kbd>Alt</kbd><kbd>F2</kbd> run dialog. In it, you can type <code>firefox</code> without adding <code>&amp;</code>.</p>\n\n<p>Is this equivalent to just <code>firefox &amp;</code> in a terminal? </p>\n\n<p>In addition, I'd like to know how the panel is implemented. Does the backend simply add the ampersand, or is it using some “nohup”? How can I see the source code for this panel? </p>\n"},{"tags":["bash"],"answer_count":5,"favorite_count":1,"up_vote_count":28,"down_vote_count":0,"view_count":1614,"score":28,"question_id":8579399,"title":"why is true == false in bash?","body":"<p>Why does bash have the following behavior?</p>\n\n<pre class=\"lang-bsh prettyprint-override\"><code>echo $((true == false))\n1\n</code></pre>\n\n<p>I would have thought that this would print <code>0</code>, but it prints <code>1</code>.</p>\n\n<p>This is further complicated by the following facts:</p>\n\n<pre><code>&gt; echo $((true))\n0\n&gt; echo $((false))\n0\n&gt; echo $((true == true))\n1\n&gt; echo $((false == false))\n1\n</code></pre>\n"},{"tags":["bash","ubuntu","bash-completion","debian-based"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12641949,"title":"bash completion isn't working like it used to -- not escaping spaces and oddities in filenames, etc","body":"<p>Okay, I just don't understand why this isn't working automatically.</p>\n\n<p>When I'm working on my mac, spaces and other odd characters get escaped automatically when I do autocomplete in bash, but on my ubuntu box, they don't. Even worse, if I do escape the character, then try autocomplete, the escapes <em>disappear</em>. Why doesn't debian's bash complete know how to deal with spaces and other chars that need escaping out of the box??</p>\n"},{"tags":["linux","file","bash","text","encoding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12866068,"title":"Finding the encoding of text files","body":"<p>I have a bunch of text files with different encodings. But I want to convert all of the into utf-8. since there are about 1000 files, I cant do it manually. I know that there are some commands in llinux which change the encodings of files from one encoding into another one. but my question is how to automatically detect the current encoding of a file? Clearly I'm looking for a command (say FindEncoding($File) ) to do this:</p>\n\n<pre><code>foreach file\ndo\n$encoding=FindEncoding($File);\nuconv -f $encoding -t utf-8 $file;\ndone\n</code></pre>\n"},{"tags":["java","bash","processbuilder"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":88,"score":0,"question_id":12866195,"title":"Best way to dynamically create and execute bash command in java?","body":"<p>I have a Java bot that I'm working on which takes input from a user via an IRC message. The user types in something like .host file=foo file=bar hostname=\"this is a name\" and it will start a server for them based on their input.</p>\n\n<p>Right now I have a method that basically parses their message, looking for hostname=\"\" (must be encapsulated by quotes), splitting the hostname= part, and setting the hostname to whatever their result is (for example, hostname=\"this is a name\" would become -hostname 'this is a name'). I am using regex to do this.</p>\n\n<p>I then split the string into an array (separated by spaces) and pass the information to processbuilder, which executes the command in it's own thread. The final command looks something like this:</p>\n\n<p>./server -hostname \"this is a name\"</p>\n\n<p>A problem I am running into is that since I am splitting by spaces, if the user adds a dash in the hostname (for example, hostname=\"this is - a name\", it'll think that the dash is referring to an argument, and will basically chop off the rest.</p>\n\n<p>Further explanation: processbuilder will split by spaces, so it will pass \"-hostname\" , \"this\" , \"is\" , \"-\" , \"a\" , \"name\". This is where I'm having trouble, since - means I should be passing an argument, but that's not what I am using it for.</p>\n\n<p>What would be the most efficient way to implement this so that any character being passed is only literally this character? Should I not be splitting at spaces? If I run ./server -hostname \"this is - a name\" from the linux shell, it will run fine.</p>\n\n<p>I appreciate any and all help. Thank you!</p>\n"},{"tags":["bash","ssh"],"answer_count":5,"favorite_count":2,"up_vote_count":10,"down_vote_count":0,"view_count":5095,"score":10,"question_id":2241063,"title":"Bash script to setup a temporary SSH tunnel","body":"<p>On CYGWIN, I want a BASH script to:</p>\n\n<ol>\n<li>create an SSH tunnel to a remote server. </li>\n<li>Do some work locally that uses the tunnel. </li>\n<li>Then shutdown the tunnel.</li>\n</ol>\n\n<p>The \"shutdown part\" has me perplexed.</p>\n\n<p>Currently, I have a lame solution. In one shell I run the following to create a tunnel.</p>\n\n<pre><code># Create the tunnel - this works! It runs forever, until shell is quit.\nssh -nNT -L 50000:localhost:3306 jm@sampledomain.com\n</code></pre>\n\n<p>Then, in another shell window, I do my work</p>\n\n<pre><code># Do some MYSQL stuff over local port 50000 (which goes to remote port 3306)\n</code></pre>\n\n<p>Finally, when I am done. I close the first shell window to kill the tunnel.</p>\n\n<p>I'd like to do this all in one script like:\n    # Create tunnel\n    # do work\n    # Kill tunnel</p>\n\n<p>How do I keep track of the tunnel process, so I know which one to kill?</p>\n"},{"tags":["bash","terminal","grep"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":519,"score":2,"question_id":4998290,"title":"Finding all file types in directory","body":"<p>What command, or collection of commands can I use to return all file extension in a directory (including sub-directories)?  Right now I'm using different combinations of ls and grep but I can't find any scalable solution.</p>\n"},{"tags":["linux","bash","unix"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":12867742,"title":"which kill is called? bash builtin or /bin/kill","body":"<p>when i type</p>\n\n<pre><code>kill -s ‹n› ‹pid›\n</code></pre>\n\n<p>in terminal, is it calling bash builtin or /bin/kill?</p>\n\n<p>for this question, assume it's Ubuntu default setup (bash).</p>\n"},{"tags":["android","bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":107,"score":-2,"question_id":12862702,"title":"android : unable to run shell script(.sh) from my application","body":"<p>i am not able to run shell scripts from my application.only \"ls -l\" and echo commands respond.rest dont seem to do anything.not even \"touch\" command works.i tried creating a file in sdcard using touch command in my script..only the echo command worked.my shell script is in sdcard too</p>\n"},{"tags":["bash","cygwin"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":859,"score":0,"question_id":7962485,"title":"Escaping backslash in windows paths passed to unix programs","body":"<p>I am trying to escape backslashes in cygwin, but it seems almost impossible\nI have tried a lot of things, but none work right..</p>\n\n<pre><code>  echo \"C:\\Users\\Ted\\Documents\\Unix\\Scripts\" | xargs echo\n  echo 'C:\\Users\\Ted\\Documents\\Unix\\Scripts' | xargs echo\n</code></pre>\n\n<p>More specifically I need to get a command to receive input in bash without \nlosing the backslash characters.  every time I try to pass an argument, \nthe backslashes always disappear, destroying my input.  And I don't know \nhow I can tell it to just leave the backslashes on the input alone.  </p>\n\n<p>I have tried the following but neither seems work </p>\n\n<pre><code>  alias cyg0='cygpath '$*'  '\n  alias cyg1='cygpath \"$*\"  '\n  alias cyg2='cygpath \"'$*'\"'\n\n  alias cyg3='cygpath '$@'  '\n  alias cyg4='cygpath \"$@\"  '\n  alias cyg5='cygpath \"'$@'\"'\n\n\n  Ted@Machine01 ~\n  $ cyg0 C:\\Users\\Ted\\Music\\Enigma\n  C:UsersTedMusicEnigma\n\n  Ted@Machine01 ~\n  $ cyg1 C:\\Users\\Ted\\Music\\Enigma\n  cygpath: can't convert empty path\n\n  Ted@Machine01 ~\n  $ cyg2 C:\\Users\\Ted\\Music\\Enigma\n  cygpath: can't convert empty path\n\n  Ted@Machine01 ~\n  $ cyg3 C:\\Users\\Ted\\Music\\Enigma\n  C:UsersTedMusicEnigma\n\n  Ted@Machine01 ~\n  $ cyg4 C:\\Users\\Ted\\Music\\Enigma\n  C:UsersTedMusicEnigma\n\n  Ted@Machine01 ~\n  $ cyg5 C:\\Users\\Ted\\Music\\Enigma\n  cygpath: can't convert empty path\n</code></pre>\n\n<p>By the way, I want to be able to type C:\\Users\\Ted\\Music\\Enigma without \nquotes. One of those aliases works when using quotes.</p>\n\n<p>Ted</p>\n"},{"tags":["linux","bash","shell","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12865863,"title":"How to write a Bash program that searches through Directories and lists the files that have the largest numbered suffix?","body":"<p>I am trying to write a program that will search through a main directories sub-directories and list the files that have the largest number at the end. ex: filename_100. </p>\n\n<pre><code>find . -name \"*_*\" | sort -n | tail\n</code></pre>\n"},{"tags":["bash","google","wget","google-docs-api"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":2754,"score":3,"question_id":2745948,"title":"How to download all your google docs from shell","body":"<p>gents.\nI learned how to download single google doc. But I am trying to make a script that downloads all my data in text format and then merges them in 1 text file. So, I wonder how to implement downloading part so that 1 can get zip file with all my files just as you do with web browser. Here is my newb script to get single file. Hope you can suggest some tweaks that make it more effective.</p>\n\n<pre><code>#!/bin/bash\ntoken=$(curl -s https://www.google.com/accounts/ClientLogin -d Email=user.name@gmail.com -d Passwd=blahblah -d accountType=GOOGLE -d service=writely -d Gdata-version=3.0 |cut -d \"=\" -f 2)\nset $token\nwget --header \"Gdata-Version: 3.0\" --header \"Authorization: GoogleLogin auth=$3\" \"https://docs.google.com/feeds/download/documents/Export?docID=${resourceId}&amp;exportFormat=txt\" -O /tmp/${file[$i]}.txt\n</code></pre>\n\n<p>Here I specify single <strong>resourceId</strong>, as you see. Should I just push many <strong>resourceId</strong>-s in download link to get them all or there is better way?</p>\n"},{"tags":["linux","bash","shell","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12865870,"title":"Using sed to match anything and \\s","body":"<p>I've got the following:</p>\n\n<pre><code>sed -i \"s/SYNFLOOD_RATE  = \\\"100/s\\\"/SYNFLOOD_RATE  = \\\"10\\s\\\"/g\"\n</code></pre>\n\n<p>Question is how do I avoid this error?</p>\n\n<pre><code>/bin/sed: -e expression #1, char 28: unknown option to `s'\n</code></pre>\n\n<p>And is there a way to do a wild card match and replace with sed?</p>\n"},{"tags":["linux","bash","shell","command"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12866148,"title":"Convert my bash command into a bashrc function and pass argument","body":"<p>I've got a sweet bash command to find key phrases in files and filepaths, <a href=\"http://stackoverflow.com/a/12865286/318090\">thanks to @ezod here</a>. I'm trying to turn it into a function in my bashrc, but it doesn't generate the same result. I'm guessing it's related to back-to-back curly brackets that I need to escape or use an alternative method?</p>\n\n<p><strong>Works:</strong></p>\n\n<pre><code>{ find . -name '*keyword*'; grep -irl 'keyword' .; } | sort -u\n</code></pre>\n\n<p><strong>Does not work in bashrc:</strong></p>\n\n<pre><code>function findit() {\n  { find . -name '*$1*';\n    grep -irl '$1' .;\n  } | sort -u\n}\nexport -f findit\n\n$ findit keyword\n</code></pre>\n"},{"tags":["linux","bash","shell","command"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12865138,"title":"Bash command to search for any occurrence of phrase and return list of files and paths","body":"<p>I'm looking for a simple bash command to search for a phrase in filenames, directory names, and within text of all files. It should return a list of files and directories. Ideally, I'd like the option to pipe it to a file like > myfiles.txt</p>\n\n<p>Something like:</p>\n\n<pre><code>find 'my key phrase'\nfind 'my key phrase' &gt; mylist.txt\n</code></pre>\n\n<p>would return:</p>\n\n<pre><code>/home/stuff/filewithmykeyphraseinit.txt\n/home/stuff/a filename with my key phrase.doc\n/home/stuff/a directory with my key phrase/another subdirectory/\n</code></pre>\n\n<p><strong>EDIT:</strong>\nI'm getting a lot of great suggestions I'm currently testing. One issue: is there a way to make these case-insensitive? I believe adding -i to grep works. How about find for filepaths/names? Also, I'd like to have the option to either send the output to a text file or to screen.</p>\n"},{"tags":["bash","find"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12443320,"title":"bash check core exists and is recent","body":"<p>I am looking for a simpler way of doing this:</p>\n\n<pre><code>#!/usr/bin/bash\n\nFILE=core\nDAYS=1\n\ncd /programdir\n\nif [ -f ${FILE} ]; then\n   agetest=$(find . -name \"${FILE}\" -type f -mtime +${DAYS} -print | wc -c)\n   if [[ agetest -eq 0 ]] ; then\n      echo \"$FILE exists and is not older than ${DAYS} days.\"\n   fi\nfi\n</code></pre>\n\n<p>I want to process a core file (using the dbx command) if the script finds it and the core file is recent (within 1 day).  So I would run a dbx command where that echo statement is.  It seems like there should be a way to do this in a more elegant way with 1 if statement, but I can't think of how to do that.  Any ideas?</p>\n\n<p>I know it would be easier to just clean up the old core files with tmpwatch or find/rm, but I'm not allowed to do that.</p>\n"},{"tags":["bash","sorting","printing","script"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":12835319,"title":"BASH script - print sorted contents from all files in directory with no rep's","body":"<p>In the current directory there are files with names of the form \"gradesXXX\" (where XXX is a course number) which look like this:</p>\n\n<pre><code>ID           GRADE         (this line is not contained in the files)\n123456789    56\n213495873    84\n098342362    77\n.            .\n.            .\n.            .\n</code></pre>\n\n<p>I want to write a BASH script that prints all the IDs that have a grade above a certain number, which is given as the first parameter to said script.</p>\n\n<p>The requirements are that an ID must be printed once at most, and that no intermediate files are used.\nI was guided to use two scripts - the first with length of one line, and the second with length of up to six lines (not including the \"#!\" line).</p>\n\n<p>I'm quite lost with this one so any suggestions will be appreciated.\nCheers. </p>\n"},{"tags":["ruby","osx","bash","compiler-errors","rvm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":130,"score":0,"question_id":12861038,"title":"Error installing Ruby without Xcode Command Line Tools: No such file, but it exists","body":"<p>I'm installing RVM &amp; Ruby without Xcode's Command Line Tools (on Mac OS X 10.8.2 (12C60) (Mountain Lion) with Xcode 4.5 (4G182)).</p>\n\n<p>RVM installs fine. But, when I try to install Ruby, I get <code>error: limits.h: No such file or directory</code> <a href=\"https://gist.github.com/3789921#L241\" rel=\"nofollow\">https://gist.github.com/3789921#L241</a>.</p>\n\n<p>But, that file exists there because <code>cat</code> works and so does:</p>\n\n<pre><code>$ file /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/../lib/gcc/i686-apple-darwin11/4.2.1/include/limits.h\n/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/../lib/gcc/i686-apple-darwin11/4.2.1/include/limits.h: ASCII c program text\n</code></pre>\n\n<p>So, why does bash say it doesn't exist?</p>\n\n<p>The following questions are similar but unhelpful:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/3949161/no-such-file-or-directory-but-it-exists\">&quot;No such file or directory&quot; but it exists</a></li>\n<li><a href=\"http://superuser.com/questions/344533/no-such-file-or-directory-error-in-bash-but-the-file-exists\">'No such file or directory' error in bash, but the file exists?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/7459037/bash-no-such-file-or-directory-but-it-exists\">-bash no such file or directory, but it exists</a></li>\n</ul>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12859672,"title":"Bash - stripping of the last digits of a number - which one is better in terms of semantic?","body":"<p>Consider a this string containing an integer</p>\n\n<pre><code>nanoseconds=$(date +%s%N)\n</code></pre>\n\n<p>when I want to strip off the last six characters, what would be semantically better?</p>\n\n<p>Stripping just the characters off the string</p>\n\n<pre><code>nanoseconds=$(date +%s%N)\n\nmilliseconds=${nanoseconds%??????}\n</code></pre>\n\n<p>or dividing the value by 1000000</p>\n\n<pre><code>milliseconds=$((nanoseconds / 1000000))\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Sry for not being clear. It's basically for doing a conversion from nanoseconds to milliseconds. I think I answered my own question...</p>\n"},{"tags":["bash","subset","column"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":12863767,"title":"How to select subset of values in bash","body":"<p>I have a file say input.dat like this  </p>\n\n<pre><code>column1 column2\n 0       0\n 1.3     1.6\n 1.8     2.1\n 2.0      \n 2.6\n</code></pre>\n\n<p>I need to extract subset of values from 1st column, which are closest to those in column 2, so that the total number of entries in both columns is equal. \nIn this example, the output I need to obtain</p>\n\n<pre><code>column1 column2\n0      0 \n1.8    1.6\n2.0    2.1\n</code></pre>\n\n<p>How can I get this ?</p>\n"},{"tags":["bash","scripting","pear","expect"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12862597,"title":"Automating pear install with expect","body":"<p>I'm working on a small script to try and automate the installation of pear on a system should it be missing - basically, taking the interactive portions of the installation process and making them non-interactive so all I need to do is execute the script and it does it for me on its own. This is my first time trying to use expect and it's, well, not what I expected. </p>\n\n<p>Sample code below:</p>\n\n<pre><code> /usr/bin/expect &lt;&lt;EOD\n          set timeout 20\n          set number [lindex $argv 0]\n          set path [lindex $argv 1]\n\n spawn php -q go-pear.phar\n expect \"1-11, 'all' or Enter to continue:\"\n send \"$number\\r\"\ninteract\n expect \"Installation base ($prefix) [/usr/local] :\"\nsend \"$path\\r\"\n interact\nEOD\n</code></pre>\n\n<p>This is not quite working at the moment as it's trying to fill in the /usr/local portion in the first menu as follows:</p>\n\n<pre><code>1-11, 'all' or Enter to continue: invalid command name \"/usr/local\"\n    while executing\n\"/usr/local\"\n    invoked from within\n\"expect \"Installation base () [/usr/local] :\"\"\n</code></pre>\n\n<p>Can anyone show me what I'm missing here? Also, I'd like to get this so I don't have to run it as ./script $var0 $var1 but rather just run it as ./script with everything being contained within and filled in, but not sure how to do that. </p>\n\n<p>Thanks in advance for any help you can offer.</p>\n"},{"tags":["bash","shell","whitespace","quotes"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":66,"score":-4,"question_id":12846561,"title":"Why quoted filenames containing spaces are split in shell/bash?","body":"<p>When I have file name with spaces</p>\n\n<pre><code>F=\"My Documents\"\n</code></pre>\n\n<p>and I want to use it as a variable </p>\n\n<pre><code>ls $F\n</code></pre>\n\n<p>it doesn't work... LS command see two different files. But I've quoted it already, like in C or Python.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1257,"score":3,"question_id":3005627,"title":"Bash: Nth word in a string","body":"<p>In bash, I want to get the Nth word of a string.</p>\n\n<p>For instance:</p>\n\n<ul>\n<li>STRING=\"one two three four\"</li>\n<li>N=3</li>\n<li>Result: \"three\"</li>\n</ul>\n\n<p>What bash command/script could do this?<br>\nThank you!</p>\n"},{"tags":["bash","unix"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12854303,"title":"Alarm Script in bash shell","body":"<p>I wanted to write a small script which displays a image or play a song at the particular time. What is the best way(which consumes less RAM) to do that ? </p>\n\n<p>One way I thought is to Recursively query for time using <code>date</code> command and run it through a for loop(checks for hours) within a for loop(checks for minutes) until time reaches the preset time.</p>\n\n<p>Is it the correct approach? are there any other Smart ways of writing it?</p>\n"},{"tags":["linux","bash","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12861981,"title":"Multisplitting in AWK","body":"<p>I would like to execute 2 splits using AWK (i have 2 fields separator), the String of data i'm working on would look like something like so:</p>\n\n<pre><code>data;digit&amp;int&amp;string&amp;int&amp;digit;data;digit&amp;int&amp;string&amp;int&amp;digit\n</code></pre>\n\n<p>As you can see the outer field separator is a semicolon, and the nested one is an ampersand.\nWhat i'm doing with awk is (suppose that the String would be in a variable named test)</p>\n\n<pre><code>echo ${test} | awk '{FS=\";\"} {print $2}' | awk '{FS=\"&amp;\"} {print $3}'\n</code></pre>\n\n<p>This should catch the \"String\" word, but for some reason this is not working.\nIt seems like the second pipe its not being applied, as i see only the result of the first awk function\nAny advice?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12860993,"title":"BASH: How to set the date and time for all entries in the directory /home/virt/","body":"<p>How to set the date (01.01.2000) and time (00.00.00) for all entries in the directory /home/virt/ ?</p>\n\n<p>Thank you very much ;)</p>\n"},{"tags":["bash","shell","stdout","stderr","nohup"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12820616,"title":"Redirect nohup's stderr to nohup.out","body":"<p>How do I run a command with <code>nohup</code> so that <em>both</em> the stdout and stderr are saved to <code>nohup.out</code>? By default only stdout is saved and stderr is discarded.</p>\n"},{"tags":["python","bash","parsing","scripting"],"answer_count":11,"favorite_count":2,"up_vote_count":9,"down_vote_count":1,"view_count":193,"score":8,"question_id":12831438,"title":"Text File data parsing lines and output as columns","body":"<p>I'm trying to parse a test file. the file has username, address and phone in the following format:</p>\n\n<pre><code>Name: John Doe1\naddress : somewhere\nphone: 123-123-1234\n\nName: John Doe2\naddress : somewhere\nphone: 123-123-1233\n\nName: John Doe3\naddress : somewhere\nphone: 123-123-1232\n</code></pre>\n\n<p>Only for almost 10k users: )     what I would like to do is convert those rows to columns, for example:</p>\n\n<pre><code>Name: John Doe1                address : somewhere          phone: 123-123-1234\nName: John Doe2                address : somewhere          phone: 123-123-1233\nName: John Doe3                address : somewhere          phone: 123-123-1232\n</code></pre>\n\n<p>I would prefer to do it in <code>bash</code> but if you know how to do it in python that would be great too, the file that has this information is in /root/docs/information. Any tips or help would be much appreciated.</p>\n"},{"tags":["regex","bash","sed"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":12832762,"title":"SED RegEx Between Multiple Same Characters","body":"<p>How would I grab this following title text between all this tags and symbols ?</p>\n\n<p>What I need to grab:</p>\n\n<pre><code>Some Title Here v1.2.3 Some Other Description About the Title in Here\n</code></pre>\n\n<p>Example source code:</p>\n\n<pre><code>&lt;body&gt;&lt;pre&gt;=============================================================\nSome Title Here v1.2.3 Some Other Description About the Title in Here\n=============================================================\n\nsome other data here but I don't care about it ...\n\n&lt;/pre&gt;&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>I've tried doing this, but it grabs whole top part too before pre tag even, but bellow part seems to work fine, except that it also grabs = symbols.</p>\n\n<pre><code>sed -n '/&lt;pre&gt;=/,/=/p\n</code></pre>\n\n<p>Result from this above sed code is:</p>\n\n<pre><code>&lt;body&gt;&lt;pre&gt;=============================================================\nSome Title Here v1.2.3 Some Other Description About the Title in Here\n=============================================================\n</code></pre>\n\n<p>Any feedback about this would be apreceated. Thank you so much, and as always StackOverflow is the best community for Q's and A's =)</p>\n"},{"tags":["bash","substring","cut"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":12860603,"title":"Code for extracting from the right side with cut command?","body":"<p>There is a sample of using the <code>cut</code> command to extract parts of a string starting from the left. An example is given below.</p>\n\n<pre><code>$ echo \"abc-def-ghi-jkl\" | cut -d- -f-2\nabc-def\n</code></pre>\n\n<p>How can the same code be adapted to extracting from the right side? I thought of reversing the words and applying the same method, but it was too complicated.</p>\n"},{"tags":["linux","bash","unix","alias","man"],"answer_count":1,"favorite_count":2,"up_vote_count":5,"down_vote_count":3,"view_count":74,"score":2,"question_id":12860627,"title":"Replace \"man\" by \"?\"","body":"<p>I am using R a lot. In R, you can call a man page for a function by writing</p>\n\n<pre><code>?print\n</code></pre>\n\n<p>I got used to that so much that I intermittently type that in a bash shell window as well. Now, I have set up an alias</p>\n\n<pre><code>?='man'\n</code></pre>\n\n<p>that <em>almost</em> cuts it: I can do, for example, <code>? ls</code>. However, I would prefer it to work with <code>?ls</code>. Unfortunately, this one does not work. Is there any way to make bash call the man page when I type the question mark without the space after?</p>\n"},{"tags":["regex","linux","bash","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":12860255,"title":"Trying to match a string and add it to the replacement","body":"<p>I am trying to add a string to the end of a line using sed and regex.</p>\n\n<p>I have the following string:</p>\n\n<pre><code>disable_functions = pcntl_alarm,pcntl_fork,pcntl_waitpid,pcntl_wait,pcntl_wifexited,pcntl_wifstopped,pcntl_wifsignaled,pcntl_wexitstatus,pcntl_wtermsig,pcntl_wstopsig,pcntl_signal,pcntl_signal_dispatch,pcntl_get_last_error,pcntl_strerror,pcntl_sigprocmask,pcntl_sigwaitinfo,pcntl_sigtimedwait,pcntl_exec,pcntl_getpriority,pcntl_setpriority,\n</code></pre>\n\n<p>and im trying to add to the end of it the string:</p>\n\n<pre><code>exec,system,shell_exec,passthru,\n</code></pre>\n\n<p>My attempt is as follows:</p>\n\n<pre><code>sed -ie 's/disable_functions = .*[a-zA-z,]$/disable_functions = $1exec,system,shell_exec,passthru,/gI' /etc/php5/apache2/php.ini\n</code></pre>\n\n<p>It seems to just add $1 to the string disable_functions = $1exec,system,shell_exec,passthru,</p>\n\n<p>Where am I going wrong?</p>\n"},{"tags":["bash","shell","tomcat","ubuntu","log-rotation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12859921,"title":"How to get the logs in my script when its been getting rotated?","body":"<p>I have a script where I'm fetching the logs from the tomcat and sending that into the my cloud resource. Everything works well, but I have a problem when my tomcat rotates the log.</p>\n\n<p>When the logs get rotated its been prefixed with date ( log gets rotated every day ). Since my script just runs every half an hour I may miss the logs when it gets rotated, because I'm fetching the logs with their static name, in the example <code>logfile.log</code>. </p>\n\n<p>Before getting rotated the file will look like this :</p>\n\n<pre><code>logfile.log\n</code></pre>\n\n<p>After getting rotated, it will look like this :</p>\n\n<pre><code>logfile.log.2012-10-09\n</code></pre>\n\n<p>Are there any ways to get rid of this problem?</p>\n\n<h2>Edit:</h2>\n\n<p>My script :</p>\n\n<pre><code>cp /tomcat/logs/$logname $fileName \ngzip $fileName\ns3cmd put $fileName.gz s3://x.x.x.x.x/$folderName\n</code></pre>\n\n<p>Thanks in advance.</p>\n"},{"tags":["bash","signals"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12856620,"title":"How to handle signals in bash during synchronous execution?","body":"<p>I have a bash script process which at some point executes a long-running subprocess synchronously.\nDuring the run of that subprocess, a signal is sent directly to the bash script process requesting the script to terminate.\nIs there any way to intercept that signal, terminate the subprocess and then exit the bash process?</p>\n\n<p>Apparently, bash's signal handling never interrupts synchronous calls?</p>\n\n<p>I cannot control the fact that the termination signal is sent to the bash process. Although if the signal could propagate to the child process, that would also solve my issue.</p>\n\n<p>thanks in advance,\nBroes</p>\n"},{"tags":["bash","redirect","var","eof"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12855000,"title":"bash redirecting EOF into variable","body":"<p>this is my file perl5lib.sh:</p>\n\n<pre><code>export PERL5LIB=`cat |tr '\\n' ':'`&lt;&lt;EOF\n/home/vul/repository/projects/implatform/daemon/trunk/lib/\n/home/vul/repository/projects/platformlib/tool/trunk/cpan_lib\n/home/projects/libtrololo\n</code></pre>\n\n<p>I want to start file as</p>\n\n<pre><code>. perl5lib.sh\n</code></pre>\n\n<p>to populate <code>PERL5LIB</code> variable, but it hangs. What is wrong?\nmy goal is to left folder names at the end of file, so I can add new simply:</p>\n\n<pre><code>echo dirname &gt;&gt; myscript\n</code></pre>\n\n<p>I have tried and <code>export PERL5LIB=$(echo blabla)</code> and <code>cat&lt;&lt;EOF</code> both work separately, but not together.</p>\n\n<p>=================== THE SOLUTION ============================</p>\n\n<h1>function do the trick!</h1>\n\n<pre><code>function fun\n{\n     export PERL5LIB=`cat|tr '\\n' ':'`\n}\nfun&lt;&lt;EOF\n/dir1/lib\n/dir2/lib\n/dir3/lib\n</code></pre>\n"},{"tags":["bash","substring"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12859036,"title":"What bash code implements the equivalent of left(), right() an mid() from BASIC?","body":"<p>I am writing some code to test for membership of a group via <code>groups username</code> which returns a result like <code>vfclists : vfclists adm dialout cdrom plugdev lpadmin sambashare admin</code>.</p>\n\n<p>The code for testing is like this</p>\n\n<pre><code>#!/bin/bash\nUGROUP=$1\nGROUP=$2\nGROUPLIST=`groups $1`\n\necho $UGROUP\necho $GROUP\necho $GROUPLIST\n\nif [[ \"$GROUPLIST\" == *\"$GROUP\"* ]]\nthen\n  echo \"$UGROUP is a member of $GROUP\";\nfi\n</code></pre>\n\n<p>The problem is the output of group includes the users name. How can I return the part of the output that appears to the right of the second appearance of the user name?</p>\n\n<p>If the appearance of the username as the first group after the colon is not guaranteed is there some way to strip out the user name from the output altogether?</p>\n"},{"tags":["linux","bash","unix","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":91,"score":-3,"question_id":12858173,"title":"how to read .dat file and grep specific value","body":"<p>I am trying to read a .dat file using bash script.</p>\n\n<p>The value contains file size I want to grep values bigger than 0 except first column. Greater than zero value can come in any row.</p>\n\n<pre><code>I have awk script to read line by line. \n\n\n\n 1349848860, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n1349848920, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n1349848980, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n1349849040, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n1349849100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0\n1349849160, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 227.736, 2, 0, 29378, 0, 0, 0, 0, 0\n1349849220, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n1349849280, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n1349849340, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n1349851200, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n1349851260, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n1349851320, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0\n1349851380, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 227.736, 2, 0, 29620, 0, 0, 0, 0, 0\n1349851440, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n#!/bin/bash\nFILENAME=$1\n\nawk '{kount++;print  kount, $0}     END{print \"\\nTotal \" kount \" lines read\"}' $FILENAME\nawk '{print $13}' $FILENAME\n</code></pre>\n\n<p>Desired Output - </p>\n\n<pre><code>   227.736, 2,  29378 \n   227.736, 2,  29620\n</code></pre>\n\n<p>Thanks for help.\nNaveen</p>\n"},{"tags":["git","bash","command"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":96,"score":-1,"question_id":11506124,"title":"How to enter command with password for git pull?","body":"<p>I want to do this command in one line: git pull &amp;&amp; [my passphrase]</p>\n\n<p>How to do it?</p>\n"},{"tags":["bash","shell","ubuntu","amazon-s3","s3cmd"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12857907,"title":"Debugging my cron application","body":"<p>I have a code like this :</p>\n\n<pre><code>set -e\nset -x\nfolderName=$(echo `date +%Y/%m/%d/`);\nfileName=x.x.x.x.x.x.x.log \ncp x.x.x.x.x.x/$1 $fileName  \ngzip $fileName  \ns3cmd put $fileName.gz s3://x.x.x.x.x/$folderName    \nrm $fileName.gz\n</code></pre>\n\n<p>This is working fine if I run like this : </p>\n\n<pre><code>./shell logfilelocation\n</code></pre>\n\n<p>And when I added into the crontab like this :</p>\n\n<pre><code>* * * * * /home/x.x.x/testing/s3 -f x.x.x.log &gt;&gt; /tmp/mys3Log\n</code></pre>\n\n<p>And I waited! The file <code>mys3Log</code> gets created. But there is no content in it! I expect the result of command execution ( as I have used <code>set -e ; set -x</code> in my code ) should go into the <code>mys3Log</code> file as I'm doing a redirect there. </p>\n\n<p>But something is going wrong. I'm very new to bash programming and cron. </p>\n\n<p>Where I'm making the mistake? </p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["linux","bash","shell","script","jarsigner"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12855978,"title":"Shell passing keystore path parameter in jarsigner","body":"<p>I have this</p>\n\n<pre><code>KEY_STORE_PATH=/home/userr/mykeystore\n\njarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore \"$KEY_STORE_PATH\" bin/PName-release-unsigned.apk alias_name\n</code></pre>\n\n<p>and it doesn't work, after this command the apk file it is not signed...</p>\n\n<p>But when I do this it works just fine</p>\n\n<pre><code>jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore /home/userr/mykeystore bin/PName-release-unsigned.apk alias_name\n</code></pre>\n\n<p>EDIT:\nactually what I do is the following</p>\n\n<pre><code>echo ` echo \"pass\" | jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore \"$KEY_STORE_PATH\" bin/PName-release-unsigned.apk alias_name`\n</code></pre>\n\n<p>no I can guess what is the problem but , is there solution for this kind of situation ?</p>\n\n<p>EDIT 2</p>\n\n<p>I did short test</p>\n\n<p>In shell</p>\n\n<pre><code> #  asd=123\n #  echo `echo $asd`\n #  123\n</code></pre>\n\n<p>it print 123 correctly so I think something else is the problem</p>\n"},{"tags":["ruby","bash","pdf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12831990,"title":"Check PDF if document is blank in bash or ruby","body":"<p>I'm trying merge several pdf files into one page. I am using ghostcript to merge all of them but I have problem when I merge one with a blank page.  So I have to check each one for a blank pdf document. Is there any way to do this with the standard bash shell or Ruby language?</p>\n\n<p>I am using pdffonts to identify if the pdf is blank or not. I'm using the command :</p>\n\n<blockquote>\n  <p>pdffonts 00001.pdf</p>\n</blockquote>\n\n<p>and if the pdf is blank the result is :</p>\n\n<pre><code>name                                type              emb sub uni object ID\n\n------------------------------------ ----------------- --- --- --- ---------\n</code></pre>\n\n<p>if the pdf is not blank the result is </p>\n\n<pre><code>name                                 type              emb sub uni object ID\n------------------------------------ ----------------- --- --- --- ---------\nHelvetica                            Type 1            no  no  no       6  0\n</code></pre>\n"},{"tags":["regex","linux","bash","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12856229,"title":"Bash script to change config using sed","body":"<p>I'm trying to change the value of malloc to say 1234m via a bash script but not seeing any changes.  I presume it is an issue with my regex, can anybody see what I've done inncorrectly?</p>\n\n<p>String</p>\n\n<pre><code>DAEMON_OPTS=\"-a :6081 \\\n             -T localhost:6082 \\\n             -f /etc/varnish/default.vcl \\\n             -S /etc/varnish/secret \\\n             -s malloc,256m\"\n</code></pre>\n\n<p>Code</p>\n\n<pre><code># get the memory allocation\necho \"Enter the memory allocation\"\nread malloc\n\n# update the default config\nsed -ie 's/malloc,.*[0-9m]$/malloc,'$malloc'/gI' /etc/default/varnish\n</code></pre>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12855610,"title":"shell script - is there any way converting number to char?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/890262/integer-ascii-value-to-character-in-bash-using-printf\">Integer ASCII value to character in BASH using printf</a>  </p>\n</blockquote>\n\n\n\n<p>I want to convert my integer number to ASCII character</p>\n\n<p>We can convert in java like this:</p>\n\n<pre><code>int i = 97;          //97 is \"a\" in ASCII\nchar c = (char) i;   //c is now \"a\"\n</code></pre>\n\n<p>But,is there any way in to do this shell scripting?</p>\n"},{"tags":["linux","bash","script","grep","extract"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12854667,"title":"What is the easiest way of extracting strings from source files?","body":"<p>I was asked today to list all image files references in our project to help remove/fix dead references.</p>\n\n<p>All our image names in the source files are enclosed in either simple or double quotes (<code>'image.png'</code> or <code>\"image.png\"</code>).</p>\n\n<p>To extract those I thought of using <code>grep</code>, <code>sed</code> an other tools like that but so fair I failed to come up with something effective.</p>\n\n<p>I can currently list all lines that contain image names by grepping the image file extensions (<code>.png</code>, <code>.gif</code>, and so on) but that also brings lines completely unrelated to my search. My attempt with sed wasn't working in case there was several strings per line.</p>\n\n<p>I could probably filter out the list by myself, but hey: this is linux ! So there has to be a tool for the job.</p>\n\n<p>How would you do that ?</p>\n"},{"tags":["bash","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12854848,"title":"Is this a bug in Bash shell","body":"<p>Did I found a bug in bash ?? </p>\n\n<ul>\n<li>1: I have created a folder named <code>Test</code></li>\n<li>2: cd Test/</li>\n<li>3: rm -rf ../Test (Deleted the PWD while I was in that Directory As shown in Pic) <img src=\"http://i.stack.imgur.com/7Rb38.png\" alt=\"This Picture show it..\"></li>\n<li>4: Clarify the issue in Stackoverflow...</li>\n</ul>\n"},{"tags":["linux","bash","shell","unix","script"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":69,"score":1,"question_id":12854295,"title":"Bash script wait if already running, then continue","body":"<p>I have a bash script that is called by a program once a process is complete. I need a way for that bash script to wait if another instance of itself is running to exit before continuing. I can't just use lock files and exit because the script will not be called again on any kind of regular schedule.</p>\n"},{"tags":["linux","bash","pipes"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":241,"score":1,"question_id":10297060,"title":"how to build a delayed / buffered pipe?","body":"<p>Is it possible to build a buffered pipe  that retains data (for some given amount of bytes or some given time) from standard linux tools like cat, dd etc.?</p>\n\n<p>For example to collect a defined amount of packets, audio data or something else. </p>\n\n<p>Eg. to build a script <code>delaybuffer</code> to do something like that: </p>\n\n<pre><code>arecord | delaybuffer 16000 | aplay\n</code></pre>\n\n<p>to playback the recorded audio 16000 bytes delayed. </p>\n"},{"tags":["bash","logging","nohup"],"answer_count":1,"favorite_count":3,"up_vote_count":14,"down_vote_count":0,"view_count":5969,"score":14,"question_id":4549489,"title":"Can I change the name of `nohup.out`?","body":"<p>When I run <code>nohup some_command &amp;</code>, the output goes to <code>nohup.out</code>; <code>man nohup</code> says to look at <code>info nohup</code> which in turn says:</p>\n\n<blockquote>\n  <p>If standard output is a terminal, the\n  command's standard output is appended\n  to the file 'nohup.out'; if that\n  cannot be written to, it is appended\n  to the file '$HOME/nohup.out'; and if\n  that cannot be written to, the command\n  is not run.</p>\n</blockquote>\n\n<p>But if I already have one command using <code>nohup</code> with output going to <code>/nohup.out</code> and I want to run another, <code>nohup</code> command, can I redirect the output to <code>nohup2.out</code>? </p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":531,"score":0,"question_id":7034838,"title":"Exit a bash switch statement","body":"<p>I've written a menu driven bash script that uses a <code>switch case</code> inside of a <code>while</code> loop to perform the various menu options. Everything works just fine. Now I'm trying to improve the program by performing error testing on the user input, but I cannot seem to make it work... </p>\n\n<p>The problem is I don't know how to properly break out of a switch statement, without breaking out of the while loop (so the user can try again).</p>\n\n<pre><code># repeat command line indefinitely until user quits\nwhile [ \"$done\" != \"true\" ]\ndo\n   # display menu options to user\n   echo \"Command Menu\" # I cut out the menu options for brevity....\n\n   # prompt user to enter command\n   echo \"Please select a letter:\"\n   read option\n\n   # switch case for menu commands, accept both upper and lower case\n   case \"$option\" in\n\n   # sample case statement\n   a|A) echo \"Choose a month\"\n        read monthVal\n        if [ \"$monthVal\" -lt 13 ]\n        then \n           cal \"$monthVal\"\n        else\n           break # THIS DOES NOT WORK. BREAKS WHILE LOOP, NOT SWITCH!\n        fi\n        ;;\n   q|Q) done=\"true\" #ends while loop\n        ;;\n   *)   echo \"Invalid option, choose again...\"\n        ;;\n   esac\ndone\nexit 0\n</code></pre>\n\n<p>The program works fine when the user enters a valid month value, but if they enter a number higher than 13, instead of breaking the switch statement and repeating the loop again, the program breaks both the switch and while loop and stops running.</p>\n"},{"tags":["bash","shell","unix"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":192,"score":0,"question_id":780305,"title":"Loops in Shell Scripting","body":"<p>I need help with this shell script.</p>\n\n<ol>\n<li>Must use a loop of some sort.</li>\n<li>Must use input data exactly as shown.</li>\n<li>Output redirection should be accomplished within the script, not on the command line.</li>\n</ol>\n\n<p>Here's the input files I have:\n<a href=\"http://pastebin.com/m3f783597\" rel=\"nofollow\">http://pastebin.com/m3f783597</a></p>\n\n<p>Here's what the output needs to be:\n<a href=\"http://pastebin.com/m2c53b25a\" rel=\"nofollow\">http://pastebin.com/m2c53b25a</a></p>\n\n<p>Here's my failed attempt:\n<a href=\"http://pastebin.com/m2c60b41\" rel=\"nofollow\">http://pastebin.com/m2c60b41</a></p>\n\n<p>And that failed attempt's output:\n<a href=\"http://pastebin.com/m3460e78c\" rel=\"nofollow\">http://pastebin.com/m3460e78c</a></p>\n"},{"tags":["bash","curl","escaping"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12849584,"title":"Automatically add newline at end of curl command","body":"<p>If the HTTP response body for a curl request doesn't contain a trailing newline, I end up with this really annoying condition where the Bash prompt is in the middle of the line, and escaping is messed up enough that when I put the last curl command on the screen, deleting characters from that curl command delete the wrong characters.</p>\n\n<p>For example:</p>\n\n<pre><code>[root@localhost ~]# curl jsonip.com\n{\"ip\":\"10.10.10.10\",\"about\":\"/about\"}[root@localhost ~]#\n</code></pre>\n\n<p>Is there a trick I can use to automatically add a newline at the end of a curl request, to get the prompt back on the left edge of the screen?</p>\n"},{"tags":["bash","xargs"],"answer_count":4,"favorite_count":3,"up_vote_count":15,"down_vote_count":0,"view_count":3172,"score":15,"question_id":6958689,"title":"xargs with multiple commands as argument","body":"<pre><code>cat a.txt | xargs -I % echo %\n</code></pre>\n\n<p>In the example above xargs takes 'echo %' as the command argument. But in some cases, I need multiple commands to process instead of one, for example:</p>\n\n<pre><code>cat a.txt | xargs -I % {command1; command2; ... }\n</code></pre>\n\n<p>But xargs doesn't accept this form. One solution I know is that I can define a function to wrap the commands, but it's not pipeline, I don't prefer it. Is there other solution? Thanks in advance. </p>\n"},{"tags":["android","bash","shell","input","adb"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":180,"score":1,"question_id":11479502,"title":"Bash script to launch app and login - gets stuck, cursor doesn't move down the page","body":"<p>What I want to do: Clear the data, then launch my app. On the first page, tab down and agree to conditions, then on next page tab down to the sign-in textfields, enter the username, password, then tap sign in. </p>\n\n<p>What happens is the data is cleared, the app is launched, then the app just sits on the terms/conditions screen, and the cursor does not move down to the buttons. </p>\n\n<p>What am I missing? Do I need to bring the focus to the screen so that the cursor gets a location before I move it?</p>\n\n<pre><code>#!/bash/src\n\nadb shell pm clear com.myapp.package\nadb shell am start -n com.myapp.package/com.myapp.package.Main\nadb shell input keyevent 20 \nadb shell input keyevent 20\nadb shell input keyevent 20\nadb shell input keyevent 20\nadb shell input keyevent 21\nadb shell input keyevent 66\nadb shell input text \"username\"\nadb shell input keyevent 20\nadb shell input text \"password\"\nadb shell input keyevent 20\nadb shell input keyevent 66\n</code></pre>\n"},{"tags":["python","bash","script"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":73,"score":2,"question_id":12781161,"title":"Bash to Python: flatten directory tree","body":"<p>On Unix-like systems I use this script, which I'd like some help on porting to Python for execution on Windows hosts:</p>\n\n<hr>\n\n<pre><code>#!/bin/bash\n\nSENTINEL_FILENAME='__sentinel__'\nSENTINEL_MD5_CHECKSUM=''\nSENTINEL_SHA_CHECKSUM=''\n\nfunction is_directory_to_be_flattened() {\n\n  local -r directory_to_consider=\"$1\"\n  local -r sentinel_filepath=\"${directory_to_consider}/${SENTINEL_FILENAME}\"\n\n  if [ ! -f \"${sentinel_filepath}\" ]; then\n    return 1\n  fi\n\n  if [[\n      \"$(\n         md5 \"${sentinel_filepath}\" \\\n           | awk '{ print $NF }' 2&gt; /dev/null\n       )\" \\\n        == \"${SENTINEL_MD5_CHECKSUM}\"\n    &amp;&amp; \\\n      \"$(\n         shasum -a 512 \"${sentinel_filepath}\" \\\n           | awk '{ print $1 }' 2&gt; /dev/null\n       )\" \\\n        == \"${SENTINEL_SHA_CHECKSUM}\"\n  ]]; then\n    return 0\n  else\n    return 1\n  fi\n}\n\nfunction conditionally_flatten() {\n\n  local -r directory_to_flatten=\"$1\"\n  local -r flatten_into_directory=\"$2\"\n\n  if is_directory_to_be_flattened \"${directory_to_flatten}\"; then\n\n    if [ ! -d \"${flatten_into_directory}\" ]; then\n      mkdir -v \"${flatten_into_directory}\"\n    fi\n\n    for file_to_move in $(find ${directory_to_flatten} -type f -maxdepth 1); do\n      mv \\\n        -v \\\n        -n \\\n        \"${file_to_move}\" \\\n        \"${flatten_into_directory}\"\n    done\n  fi\n}\n\nfunction flatten_directory() {\n\n  local -r directory_to_flatten=\"$1\"\n  local -r descend_depth=\"$2\"\n\n  local -r flattened_directory=\"${directory_to_flatten}/__flattened__\"\n\n  if [ ! -d \"${directory_to_flatten}\" ]; then\n    printf \"The argument '%s' does not seem to be a directory.\\n\" \\\n      \"${directory_to_flatten}\" \\\n      &gt;&amp;2\n    return\n  fi\n\n  find \"${directory_to_flatten}\" \\\n    -type d \\\n    -maxdepth \"${descend_depth}\" \\\n  | \\\n    while read directory_path; do\n      conditionally_flatten \\\n        \"${directory_path}\" \\\n        \"${flattened_directory}\"\n    done\n}\n\nn_arguments=\"$#\"\n\nif [ \"${n_arguments}\" -eq 1 ]; then\n  flatten_directory \"$1\" '1' # maybe use a constant, not a \"magic #\" here?\nelse\n  echo usage: \"$0\" /path/to/directory/to/flatten\nfi\n\nunset is_directory_to_be_flattened\nunset conditionally_flatten\nunset flatten_directory\n</code></pre>\n\n<hr>\n\n<p>How would you port this to Win Python? I am a beginner in both Python and Bash scripting..</p>\n\n<p>Feel free to upgrade my implementation as you port it if you find it lacking in any way too, with a justification please. This is not \"Code Review\" but a \"thumbs up/thumbs down\" on my effort in Bash would give me a sense of whether I am improving or I should change the way I study altogether...</p>\n\n<hr>\n\n<p>Here we go, my attempt in Python: (criticise it <em>hard</em> if need be, it's the only way for me to learn!)</p>\n\n<hr>\n\n<pre><code>#!/usr/bin/env python2.7\n\nimport sys\nimport os\nimport shutil\n\nSENTINEL_FILENAME=''\nSENTINEL_MD5_CHECKSUM=''\nSENTINEL_SHA_CHECKSUM=''\n\nDEFAULT_DEPTH = 1\nFLATTED_DIRECTORY_NAME = '__flattened__'\n\ndef is_directory_to_be_flattened(directory_to_consider):\n  sentinel_location = os.path.join(directory_to_consider, SENTINEL_FILENAME)\n  if not os.path.isfile(sentinel_location):\n    return False\n  import hashlib\n  with open(sentinel_location) as sentinel_file:\n    file_contents = sentinel_file.read()\n    return (hashlib.md5(file_contents).hexdigest() == SENTINEL_MD5_CHECKSUM\n      and hashlib.sha512(file_contents).hexdigest() == SENTINEL_SHA_CHECKSUM)\n\ndef flatten(directory, depth, to_directory, do_files_here):\n  if depth &lt; 0:\n    return\n  contained_filenames = [f for f in os.listdir(directory)]\n  if do_files_here:\n    for filename in contained_filenames:\n      if filename == SENTINEL_FILENAME:\n        continue\n      filepath = os.path.join(directory, filename)\n      if not os.path.isfile(filepath):\n        continue\n      file_to = os.path.join(to_directory, filename)\n      if not os.path.isdir(to_directory):\n        os.makedirs(to_directory)\n      if not os.path.isfile(file_to):\n        print \"Moving: '{}' -&gt; '{}'\".format(filepath, file_to)\n        shutil.move(filepath, file_to)\n      else:\n    sys.stderr.write('Error: {} exists already.\\n'.format(file_to))\n  next_depth = depth - 1\n  for subdirectory in (d for d in contained_filenames if os.path.isdir(d)):\n    if is_directory_to_be_flattened(subdirectory):\n      flatten(subdirectory, next_depth, to_directory, True)\n\ndef flatten_directory(to_flatten, depth):\n  to_directory = os.path.join(to_flatten, FLATTED_DIRECTORY_NAME)\n  if not os.path.isdir(to_flatten):\n    sys.stderr.write(\n      'The argument {} does not seem to be a directory.\\n'.format(\n      to_flatten))\n    return\n  flatten(to_flatten, depth, to_directory, False)\n\ndef main():\n  if len(sys.argv) == 2:\n    flatten_directory(sys.argv[1], DEFAULT_DEPTH)\n  else:\n    print 'usage: {} /path/to/directory/to/flatten'.format(sys.argv[0])\n\nif __name__ == '__main__':\n  main()\n</code></pre>\n\n<hr>\n\n<p>Although it's obvious from the code, the intent is:</p>\n\n<ul>\n<li>Start at a given directory</li>\n<li>Descend up to a certain depth</li>\n<li>Consider subdirectories and move all files therein if and only if:\n<ul>\n<li>The directory contains a \"sentinel file\" with a given filename</li>\n<li>The sentinel file is <em>actually</em> a sentinel file, not just a file renamed to the same name</li>\n</ul></li>\n<li>Collate files in a <code>__flattened__</code> directory under the directory in which the search started</li>\n</ul>\n"},{"tags":["bash","quote"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12811270,"title":"Is there a bash equivalent for ruby %{} quoting?","body":"<p>What is the easiest way to quote bash command arguments that contain single quotes and double quotes without variable interpolation?</p>\n\n<p>In Ruby you can quote strings using %{}, %[] etc. In that case single quotes and double quotes will be treated as characters.</p>\n\n<p>My question was not really complete here is further explanation:</p>\n\n<p>The reason I am asking that is because I often run ruby and perl code at the command line. Since those languages are using extensively single quotes and double quotes and global variables like $1 $_ etc. I get conflicts with bash.</p>\n\n<p>example:</p>\n\n<pre><code>ls -lat | ruby -p -e '$_ =~ /(\\S+)\\s+(\\S+)\\s+(\\S+)/; $_ = \"'\\''\" + ($3 || \"\") + \"'\\''\" + \"\\n\"'\n</code></pre>\n\n<p>I was looking for something similar to the % quoting in ruby:</p>\n\n<pre><code>ls -lat | ruby -p -e %{$_ =~ /(\\S+)\\s+(\\S+)\\s+(\\S+)/; $_ = \"'\" + ($3 || \"\") + \"'\" + \"\\n\"}\n</code></pre>\n"},{"tags":["bash","parsing","mongodb","bson"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":107,"score":1,"question_id":12318086,"title":"BASH BSON parser","body":"<p>We need to do some queries of a Mongo DB from BASH shell scripts.  Using eval and Mongo's printjson() gives me text output, but it needs to be parsed.  Using other scripting languages (Python, Ruby, Erlang, etc) is not an option.</p>\n\n<p>I looked at JSON.sh ( a BASH script lib JSON parser: <a href=\"https://github.com/rcrowley/json.sh\" rel=\"nofollow\">https://github.com/rcrowley/json.sh</a> ) and it appears to be close to a solution other than the issue that it does not recognize BSON-but-not-JSON data types.  Before I try to mod it to recognize BSON data types, is anyone aware of an existing solution?</p>\n\n<p>Thanks.</p>\n\n<p>10/11   Below Stennie notes that I have received an answer in the MongoDB User group, and provides a URL.  The answer is very nice and complete, and begins, \"MongoDB actually uses what we call Mongo Extended JSON which differs a bit from the vanilla JSON standard...\" so I will have to modify the parser.  Thanks to all.</p>\n"},{"tags":["bash","hex","ascii"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":59,"score":0,"question_id":12847328,"title":"bash ascii to hex","body":"<p>was wondering if anyone could help me with converting ascii to hex in bash.\nExample code:</p>\n\n<pre><code>#!/bin/bash \nSTR = \"hello\"\n#Convert to hex\nHEXVAL = $STR #(in hex here?)\n</code></pre>\n\n<p>I want hexval to have the value:\n68656C6C6F (hello in hex)</p>\n"},{"tags":["linux","bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12844490,"title":"How to check if all the files in a folder are of the same format","body":"<p>I have a folder which contains a list of files. The problem is they dont have extensions. I want to check if they are JPEG or JPG format. I tried this </p>\n\n<pre><code>find folder -type f -not -name \"*.*\"\n</code></pre>\n\n<p>The output is </p>\n\n<pre><code>folder/t351\nfolder/t352\nfolder/t353\nfolder/t354\nfolder/t355\n</code></pre>\n\n<p>I tried using Regex but since the name of the files have no extensions It din't work out.\nCan someone tell me how I can validate the files and check if they have a certain format. </p>\n"},{"tags":["bash","ubuntu","expect"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12845159,"title":"Rebuild kill script","body":"<p>I'm using the following script now on cent-os, but it does not work, cause it is a ubuntu script?</p>\n\n<pre><code>#!/usr/bin/expect -f\nset pid_num [lrange $argv 0 0]\nsend \"kill -9 $pid_num\\r\"\nexpect \"#\" { send \"q\" }\nexit\n</code></pre>\n\n<p>At the moment i got this for cent-os:</p>\n\n<pre><code>#!/bin/sh\nset pid_num foreach {pid_num} $argv {break}\necho '$1 = '$1\n\nkill $1 $*\nexit $?\n</code></pre>\n\n<p>I don't know what's wrong.\nWhat is must do is ./kill.sh (pidnumber) A php script will run this bashfile.</p>\n"},{"tags":["linux","bash","curl","wget"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12846933,"title":"WGET or cURL to get file with protection","body":"<p>Which is going to be the best route to download a file from a remote webserver? I want to use .htaccess to deny all downloads unless a specific useragent is passed. Would this have to be done via cURL or can WGET do this too?</p>\n"},{"tags":["bash","loops"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":37,"score":-1,"question_id":12846542,"title":"Renaming Loop for files in Linux","body":"<p>I'm trying to create a for loop that goes through a directory, and renames each file in that directory. </p>\n\n<pre><code>dir2=$1\n\nfor i in $dir2\ndo\nfile=$(basename \"$i\")\nb=${file%.*}\nc=${file#\"$stub\"}\nd=-BACKUP\ne=$b$d$c\nmv \"$i\" \"$e\"\n</code></pre>\n\n<p>I'm trying to change each file:i to become $e.</p>\n\n<p>For example, if I have a directory, and there is one file in it called test.txt, the file would be changed to test-BACKUP.txt</p>\n\n<p>I'm having problems in that it's not changing the files withing the directories, it's changing the directory itself. </p>\n"},{"tags":["linux","bash","shell","gnu-screen"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12846557,"title":"how to log the output of a session generated by \"screen\" command?","body":"<p>I am running several screen sessions in the same directory at the same time. When the program in a certain session is completed, this session is terminated automatically, however, I need to check the output of the session. So I tried to use \"screen -L\" to keep a log, however, the outputs of all the sessions were logged into a single file screenlog.0 (several lines from one session and then several lines from another session... which is impossible to read). I am wondering if there is any method to record different sessions to different log files? </p>\n"},{"tags":["bash","printf"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":12845997,"title":"Unexplicable error in bash: printf command inside a script returns \"invalid number\"","body":"<p>I can't get <code>printf</code> to print a variable with the %e descriptor in a bash script. It would just say</p>\n\n<pre><code>#!/bin/bash\na=14.9\nprintf %e 14.9;\n</code></pre>\n\n<p>I know this is likely a very easy question, but I'm fairly new to bash and always used <code>echo</code>. Plus I couldn't find an answer anywhere.</p>\n\n<hr>\n\n<p>when run i get</p>\n\n<pre><code>$ ./test.text\n./test.text: line 3: printf: 14.9: invalid number\n0,000000\n</code></pre>\n\n<p>therefore my problem is the locale variable LC_NUMERIC: it is set so that i use commas as decimal separators. Indeed, it is set to an european localization:</p>\n\n<pre><code>$ locale | grep NUM\nLC_NUMERIC=\"it_IT.UTF-8\"\n</code></pre>\n\n<p>I thought I set it to en_US.UTF-8, but evidently I didn't. Now the problem switches to find how to set my locale variable. Simply using</p>\n\n<pre><code>$ LC_NUMERIC=\"en_US.UTF-8\"\n</code></pre>\n\n<p>won't work.</p>\n"},{"tags":["linux","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12845283,"title":"lower case to upercase conversion","body":"<p>I found solution but it doesn't working <a href=\"http://www.cyberciti.biz/faq/linux-unix-shell-programming-converting-lowercase-uppercase/\" rel=\"nofollow\">http://www.cyberciti.biz/faq/linux-unix-shell-programming-converting-lowercase-uppercase/</a></p>\n\n<pre><code>[root@mg0016 tmp]# y=\"this Is A test\"\n[root@mg0016 tmp]# echo \"${y^^}\"\n-bash: ${y^^}: bad substitution\n</code></pre>\n"},{"tags":["bash","loops"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12845894,"title":"Backup file loop in bash","body":"<p>I'm writing a script that takes a directory, copies all the files from it to a new one, then renames all the files in the new directory to include a -BACKUP in their name before an extension.</p>\n\n<p>so far I have: </p>\n\n<pre><code>dir1=$1\ndir2=$2\n\nmkdir $dir2\ncp -r $dir1/. $dir2\n\nfor i in $dir2\ndo\nfile=$(basename \"$i\")\nb=${file%.*}\nc=${file#\"$stub\"}\nd=-BACKUP\ne=$b$d$c\nmv $i $e\n\ndone\n</code></pre>\n\n<p>Although this only changes the name of the directory, not all the files within the directory. </p>\n\n<p>What am I doing wrong, how would you approach this? </p>\n"},{"tags":["bash","shell","sed","awk","objdump"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12844443,"title":"Using sed and awk together to create replacement maps","body":"<p>I'm attempting to reverse engineer some software to gain a better understanding the lower-level workings of the OS. I want to replace the raw address dumps from objdump -d with the corresponding values from objdump -t, something that even the -Dslx option seems to miss.</p>\n\n<p>the output from objdump -t looks like this:</p>\n\n<pre><code>00000000 l    d  .bss   00000000 .bss\n00000000 g       .text  00000000 fred\n</code></pre>\n\n<p>and I am able to extract the needed information using awk at indexes 1 and NF(the actual code I used is at another computer). For each record I put the fields into an array: </p>\n\n<pre><code>fields[$1] = $NF\n</code></pre>\n\n<p>and from here I am kind of lost. I want to use these entries to replace all occurrences of 'location' with </p>\n\n<pre><code>fields[location]\n</code></pre>\n\n<p>At this point I am just printing out the sed command to use next, then manually copying and pasting the command and executing it. it comes out looking like</p>\n\n<pre><code>objdump -d test.o | sed -e 's/&lt;loc1&gt;/&lt;name1&gt;/g' \n                        -e 's/&lt;loc2&gt;/&lt;name2&gt;/g' \n                        . . . \n                        -e 's/&lt;locN&gt;/&lt;nameN&gt;/g'\n</code></pre>\n\n<p>I don't really like this, I want to completely automate this. I'm relatively inexperienced with some of the Bash tricks so chances are there's a simple solution I've never heard of.</p>\n\n<p>example: (I don't have access to actual inputs at this point, but this is close enough for the goal I have)</p>\n\n<pre><code>00000000 g     O .bbs 00000010 size\n00000012 g     O .bbs 00000004 count\n00000200 l     F .bbs 00000020 anotherVar\n</code></pre>\n\n<p>+</p>\n\n<pre><code>0x0000030 &lt;main&gt;:\n    0x00000034    xx xx      mov   0x00000000, %eax\n    0x00000038    xx         push  0x00000012\n    0x0000004c    xx xx xx   subl  0x00000200, %ebx\n</code></pre>\n\n<p>=</p>\n\n<pre><code>0x0000030 &lt;main&gt;:\n    0x00000034    xx xx      mov   size, %eax\n    0x00000038    xx         push  count\n    0x0000004c    xx xx xx   subl  anotherVar, %ebx\n</code></pre>\n"},{"tags":["linux","bash","shell","ssh"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":98,"score":0,"question_id":12845206,"title":"check if file exists on remote host with ssh","body":"<p>I would like to check if a certain file exists on the remote host.\nI tried this:</p>\n\n<pre><code>$ if [ ssh reg@localhost -p 19999 -e /home/reg/Dropbox/New_semiosNET/Research_and_Development/Puffer_and_Traps/Repeaters_Network/UBC_LOGS/log1349544129.tar.bz2 ] then echo \"okidoke\"; else \"not okay!\" fi\n-sh: syntax error: unexpected \"else\" (expecting \"then\") \n</code></pre>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12845189,"title":"Creation and copy directories","body":"<p>I'm trying to write a script that takes a directory, copies all its files to a new directory that I create. So the script has two arguments. The first being an existing directory, and the second being the created directory.</p>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>dir1=$1\ndir2=$2\n\nmkdir $2\ncp $1/. $2\n</code></pre>\n\n<p>Yet my new directory is always empty. Is it a syntax error? </p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12778547,"title":"Command not acting properly in script","body":"<p>The command:</p>\n\n<pre><code>value=${value%?}\n</code></pre>\n\n<p>will remove the last character from a variable.\nIs there any logical reason why it would not work from within a script?\nIn my script it has no effect whatsoever.</p>\n\n<pre><code>if [[ $line =~ \"What I want\" ]]\n    then\n            if [[ $CURRENT -eq 3 ]]\n            then\n                    echo  \"line is \" $line \n                    value=`echo \"$line\" | awk '{print $4}'`\n                    echo \"value = \"$value   \n                    value=${value%?}\n                    echo \"value = $value \"\n\n                    break\n            fi\nfi\n</code></pre>\n\n<p>I cant post the whole script, but this is the piece I refer to. The loop is being entered properly, but the 2 echo $value lines return the same thing.</p>\n\n<p>Edit - this question still stands. The code works fine line bu line in a terminal, but all together in a script it fails.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12844631,"title":"Bash basename syntax","body":"<p>I'm trying to write a script that takes the basename of an argument, then checks if there is an extension in that argument. If there is, it prints the extension.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>file=basename $1\next=${file%*}\necho ${file#\"$stub\"}\necho $basename $1\n</code></pre>\n\n<p>I'm echoing the final $basename $1 to check what the output of basename is.</p>\n\n<p>Some tests reveal:</p>\n\n<pre><code>testfile.sh one.two\n./testfile: line 2: one.two: command not found\none.two\n\ntestfile.sh ../tester\n./testfile: line 2: ../tester: No such file or directory\n../tester\n</code></pre>\n\n<p>So neither $basename $1 are working. I know it's a syntax error so could someone explain what I'm doing wrong? </p>\n\n<p>EDIT:</p>\n\n<p>I've solved my problem now with:</p>\n\n<pre><code>file=$(basename \"$1\" )\nstub=${file%.*}\necho ${file#\"$stub\"}\n</code></pre>\n\n<p>Which reduces my argument to a basename, thank you all.</p>\n"},{"tags":["bash","script"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12807113,"title":"String manipulation Bash-Extensions","body":"<p>In my script I'm trying to take a string, then output the extension of a string if it has one. So essentially I take the basename of a file, then output anything that comes after a period.</p>\n\n<p>What's the syntax to do something like this? </p>\n\n<p>For example</p>\n\n<pre><code>dotcutter.sh\nfile=testfile.jpg\n</code></pre>\n\n<p>the script should output .jpg</p>\n\n<p>EDIT:</p>\n\n<p>I've solved my problem now with:</p>\n\n<pre><code>file=$(basename \"$1\" )\nstub=${file%.*}\necho ${file#\"$stub\"}\n</code></pre>\n\n<p>Which reduces my argument to a basename, thank you all. </p>\n"},{"tags":["bash","shell","sed","hashtable"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":85,"score":-1,"question_id":12839174,"title":"associative array in bash","body":"<p>I found an implementation of the associative array <a href=\"http://stackoverflow.com/questions/688849/associative-arrays-in-shell-scripts\">here</a>  and would like to understand what the code actually does. Here are the piece of the code I don't understand, and would appreciate the explanation.\n'</p>\n\n<pre><code>put() {\n    if [ \"$#\" != 3 ]; then exit 1; fi  \n    mapName=$1; key=$2; value=`echo $3 | sed -e \"s/ /:SP:/g\"`  #dont understand \n    eval map=\"\\\"\\$$mapName\\\"\"  **#dont understand** \n    map=\"`echo \"$map\" | sed -e \"s/--$key=[^ ]*//g\"` --$key=$value\"  #dont understand \n    eval $mapName=\"\\\"$map\\\"\"  #dont understand \n}\nget() {\n    mapName=$1; key=$2\n\n    map=${!mapName}\n    #dont understand \n    value=\"$(echo $map |sed -e \"s/.*--${key}=\\([^ ]*\\).*/\\1/\" -e 's/:SP:/ /g' )\"  \n}\n\ngetKeySet() {\n    if [ \"$#\" != 1 ]; \n    then \n        exit 1; \n    fi\n\n    mapName=$1; \n\n    eval map=\"\\\"\\$$mapName\\\"\"\n\n    keySet=`\n           echo $map | \n           sed -e \"s/=[^ ]*//g\" -e \"s/\\([ ]*\\)--/\\1/g\"   #dont understand \n          ` \n}\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["bash","file-io","script"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":46,"score":3,"question_id":12844095,"title":"How do I use Bash to create a copy of a file with an extra suffix before the extension?","body":"<p>This title is a little confusing, so let me break it down. Basically I have a full directory of files with various names and extensions:</p>\n\n<pre><code>MainDirectory/\n    image_1.png\n    foobar.jpeg\n    myFile.txt\n</code></pre>\n\n<p>For an iPad app, I need to create copies of these with the suffix <em>@2X</em> appended to the end of all of these file names, before the extension - so I would end up with this:</p>\n\n<pre><code>MainDirectory/\n    image_1.png\n    image_1@2X.png\n    foobar.jpeg\n    foobar@2X.jpeg\n    myFile.txt\n    myFile@2X.txt\n</code></pre>\n\n<p>Instead of changing the file names one at a time by hand, I want to create a script to take care of it for me. I currently have the following, but it does not work as expected:</p>\n\n<pre><code>#!/bin/bash\n\nFILE_DIR=.\n\n#if there is an argument, use that as the files directory. Otherwise, use .\nif [ $# -eq 1 ]\nthen\n  $FILE_DIR=$1\nfi\n\nfor f in $FILE_DIR/*\ndo\n  echo \"Processing $f\"\n  filename=$(basename \"$fullfile\")\n  extension=\"${filename##*.}\"\n  filename=\"${filename%.*}\"\n  newFileName=$(echo -n $filename; echo -n -@2X; echo -n $extension)\n  echo Creating $newFileName\n  cp $f newFileName\ndone\n\nexit 0\n</code></pre>\n\n<p>I also want to keep this to pure bash, and not rely on os-specific calls. What am I doing wrong? What can I change or what code will work, in order to do what I need?</p>\n"},{"tags":["bash","ubuntu","chef"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":116,"score":0,"question_id":10164323,"title":"using bash to automate answering of prompts for django sync for graphite install","body":"<p>I am using chef to automate the install of graphite on ubuntu.  I need to automate the python manage.py syncdb using bash or by any other means. </p>\n\n<pre><code>ubuntu@ip-xxx-xxx-xxx:/opt/graphite/webapp/graphite$ sudo python manage.py syncdb\nCreating tables ...\nCreating table account_profile\nCreating table account_variable\nCreating table account_view\nCreating table account_window\nCreating table account_mygraph\nCreating table dashboard_dashboard_owners\nCreating table dashboard_dashboard\nCreating table events_event\nCreating table auth_permission\nCreating table auth_group_permissions\nCreating table auth_group\nCreating table auth_user_user_permissions\nCreating table auth_user_groups\nCreating table auth_user\nCreating table auth_message\nCreating table django_session\nCreating table django_admin_log\nCreating table django_content_type\nCreating table tagging_tag\nCreating table tagging_taggeditem\n\nYou just installed Django's auth system, which means you don't have any superusers defined.\nWould you like to create one now? (yes/no): yes\nUsername (Leave blank to use 'root'): admin\nE-mail address: test@gmail.com\nPassword: \nPassword (again): \nSuperuser created successfully.\nInstalling custom SQL ...\nInstalling indexes ...\nNo fixtures found.\n</code></pre>\n\n<p>I need to automate the following prompts with the below</p>\n\n<pre><code>Would you like to create one now? (yes/no): yes\nUsername (Leave blank to use 'root'): admin\nE-mail address: test@gmail.com\nPassword: test101\nPassword (again): test101\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["bash","gnuplot","fit"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":12843423,"title":"How to tell gnuplot not to print fit log on screen?","body":"<p>I'm writing a bash script that, among several more things, calls gnuplot to fit a few data files. When it does so my terminal gets flooded with the gnuplot fit log.</p>\n\n<p>I do not want that, I'd like that gnuplot just kept the fit log to the file 'fit.log', rather than printing it on screen. But I can't find a gnuplot command to prevent the fit log file from being printed on terminal.</p>\n\n<p>I do not want to redirect all gnuplot text output to a file because I would like to know just by looking at the terminal wheter it returned any errors.</p>\n\n<p>What can I do?</p>\n\n<p>Thanks,\n         Ferdinando</p>\n"},{"tags":["linux","bash","shell","unix","aix"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12843149,"title":"Adding multiple values to each column","body":"<p>I'm really new at using awk/sed</p>\n\n<p>So, I have text file that is called performance.log that has following info</p>\n\n<pre><code>CPU 1 2 3 4 5 6\nRAM 2 3 4 5 6 7\nHAR 3 4 5 6 7 8\n</code></pre>\n\n<p>And with in the code in performance-eval.sh, function generates following info</p>\n\n<pre><code>Cur_CPU=10\nCur_RAM=11\nCur_HAR=13\n</code></pre>\n\n<p>I want to insert and save Cur_CPU,RAM,HAR to performance.log.\nCur_CPU will go to first row, second column\nCur_RAM will go to second row, second column\nCur_HAR will go to third row, second column</p>\n\n<p>So that resulting performance.log would be</p>\n\n<pre><code>CPU 10 1 2 3 4 5 6\nRAM 11 2 3 4 5 6 7\nHAR 13 3 4 5 6 7 8\n</code></pre>\n\n<p>I'm not sure how to add 3 different values into 3 different columns. \nThanks for your help!</p>\n"},{"tags":["osx","bash","launchd"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":77,"score":2,"question_id":12835871,"title":"running sudo command in bash script and running it with launchd","body":"<p>I have a bash script that I would like to run with a launchd plist file on OS X. The problem I have is is that the bash script contains sudo commands and it is stopping it from running. So for example my bash script looks like this:</p>\n\n<pre><code>#!/bin/bash\nsudo /opt/local/bin/bindfs -u user1 /Library/WebServer/Documents/user1 /vhosts/user1/public_html\nsudo /opt/local/bin/bindfs -u user2 /Library/WebServer/Documents/user2 /vhosts/user2/public_html\n</code></pre>\n\n<p>and my com.test.bindfs.plist file looks like this (created with Lingon):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"&gt;\n&lt;plist version=\"1.0\"&gt;\n&lt;dict&gt;\n    &lt;key&gt;GroupName&lt;/key&gt;\n    &lt;string&gt;admin&lt;/string&gt;\n    &lt;key&gt;Label&lt;/key&gt;\n    &lt;string&gt;com.jamespayne.bindfs&lt;/string&gt;\n    &lt;key&gt;ProgramArguments&lt;/key&gt;\n    &lt;array&gt;\n        &lt;string&gt;/usr/bin/bindfs.sh&lt;/string&gt;\n    &lt;/array&gt;\n    &lt;key&gt;RunAtLoad&lt;/key&gt;\n    &lt;true/&gt;\n&lt;/dict&gt;\n&lt;/plist&gt;\n</code></pre>\n\n<p>I have checked to see that the script works by running it after startup and entering a password but it wont run at startup. The launchd plist is running but it comes up with the following error:</p>\n\n<p>sudo: no tty present and no askpass program specified</p>\n\n<p>Anybody know how to get this working or why I might get that error. Thanks.</p>\n"},{"tags":["bash","echo","increment"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12842714,"title":"A variable that changes value in a bash for loop","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6348902/how-can-i-add-numbers-in-a-bash-script\">How can I add numbers in a bash script</a>  </p>\n</blockquote>\n\n\n\n<p>I have a variable that changes value in a for loop:</p>\n\n<pre><code>for i in {1..10..1}\n  do\n    while ((count &lt; max+1))\n      do \n        echo $count &gt;&gt; /directory/outfile_${max}.txt\n        ((count++))\n      done\n    max=$max+100\n  done\n</code></pre>\n\n<p>The ten outfiles should have the names \"outfile_100.txt\", \"outfile_200.txt\" etc..</p>\n\n<p>But what happens is that they become like \"outfile_100+100+100....txt\"</p>\n\n<p>Is it in how I resize <code>max</code>?</p>\n"},{"tags":["bash","shell","tmux"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12843453,"title":"tmux Escape key exits server","body":"<p>I'm using tmux on a macOsX moutain lion (10.8)</p>\n\n<p>Whenever i'm in a terminal, pressing the Escape button results in the connection to the server being lost and tmux actually exiting. I experience the same behavior regardless in iterm2, terminal and while using any of zsh, bash or a normal login shell.</p>\n\n<p>That's how it looks like:</p>\n\n<p><img src=\"http://i.stack.imgur.com/ybORC.png\" alt=\"enter image description here\"></p>\n\n<p>Any hints? :)</p>\n"},{"tags":["bash","shell","vim","zsh"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":117,"score":5,"question_id":12834370,"title":"Run vim command from commandline","body":"<p>There are lots of SO questions on running shell programs from vim. What I'm wondering is if it is possible to do the reverse - i.e.</p>\n\n<pre><code>$ vim :BundleInstall\n</code></pre>\n\n<p>for example, to allow me to run <a href=\"https://github.com/gmarik/vundle\">BundleInstall</a> as part of a script, rather than having to open Vim and run it manually on first running? Is this possible?</p>\n"},{"tags":["linux","bash","time"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12841925,"title":"linux time command resulting real is less than user","body":"<p>When I test a perl script under linux and use <code>time sh -c</code> to measure the time spent, I got a weird result:</p>\n\n<pre><code>real    14m11.903s\nuser    34m39.319s\nsys     16m54.074s\n</code></pre>\n\n<p>which means the real time spent is even less than user time. And visually counting the time by myself, the script didn't spent as much as 34 minutes, and real time is closer to what I see. Has anyone have any clue about this? Thanks.</p>\n"},{"tags":["bash","date","ubuntu","delete","logging"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":288,"score":2,"question_id":8399493,"title":"Is there a way to delete all log entries in a file older than a certain date? (BASH)","body":"<p>I have log file in which I'm trying to delete all entries older than a specified date. Though I haven't succeeded with this yet. What I've tested so far is having an input for what the entries must be older than to be deleted and then loop like this:</p>\n\n<pre><code>#!/bin/bash\n\nCOUNTER=7\nDATE=$(date -d \"-${COUNTER} days\" +%s)\nDATE=$(date -d -@${DATE} \"+%Y-%m-%d\")\n\nwhile [ -n \"$(grep $DATE test.txt)\" ]; do\n\n    sed -i \"/$DATE/d\" test.txt\n\n    COUNTER=$((${COUNTER}+1))\n    DATE=$(date -d \"-${COUNTER} days\" +%s)\n    DATE=$(date -d @${DATE} +\"%Y-%m-%d\")\ndone\n</code></pre>\n\n<p>This kind of works except when a log entry doesn't exist for date. When it doesn't find a match it aborts the loop and the even older entries are kept.</p>\n\n<p><strong>Update</strong></p>\n\n<p>This was how I solved it:</p>\n\n<pre><code>#!/bin/bash\n\nCOUNTER=$((7+1))\nDATE=$(date -d \"-${COUNTER} days\" +%s)\nDATE=$(date -d -@${DATE} \"+%Y-%m-%d\")\n\nif [ -z \"$(grep $DATE test.txt)\" ]; then\n   exit 1\nfi\n\nsed -i \"1,/$DATE/d\" test.txt\n</code></pre>\n"},{"tags":["bash","exit-code","bash-function"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":12840740,"title":"return value from subshell and output to local variables","body":"<p>I've found the strange behaviour for me, which I can't explain. \nThe following code is work OK:</p>\n\n<pre><code>function prepare-archive {\nblah-blah-blah...\n_SPEC_FILE=$(check-spec-file \"$_GIT_DIR/packaging/\")\nexit $?\nblah-blah-blah...\n}\n</code></pre>\n\n<p>means I get value which I expect:</p>\n\n<pre><code>bash -x ./this-script.sh:\n++ exit 1\n+ _SPEC_FILE='/home/likern/Print/Oleg/print-service/packaging/print-service.spec\n/home/likern/Print/Oleg/print-service/packaging/print-service2.spec'\n+ exit 1\n</code></pre>\n\n<p>As soon as I add <code>local</code> definition to variable:</p>\n\n<pre><code>local _SPEC_FILE=$(check-spec-file \"$_GIT_DIR/packaging/\")\n</code></pre>\n\n<p>I get following:</p>\n\n<pre><code>bash -x ./this-script.sh:\n++ exit 1\n+ local '_SPEC_FILE=/home/likern/Print/Oleg/print-service/packaging/print-service.spec\n/home/likern/Print/Oleg/print-service/packaging/print-service2.spec'\n+ exit 0\n$:~/MyScripts$ echo $?\n0\n</code></pre>\n\n<p><strong>Question:</strong> Why? What has happened? Can I catch output from subshell to <code>local</code> variable and check subshell's return value reliably?</p>\n\n<p><strong>P.S.</strong>: <code>prepare-archive</code> is called in the main shell script. The first <code>exit</code> is the <code>exit</code> from <code>check-spec-file</code> function, the second from <code>prepare-archive</code> function - this function itself is executed from main shell script. I return value from <code>check-spec-file</code> by <code>exit 1</code>, then pass this value to <code>exit $?</code>. Thus I expect they should be the same.</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12839985,"title":"Handling exit status in Bash","body":"<p>Can anyone come up with a shorter implementation of the function <em>test</em> below (which prints the same error message and has the same exit status)?</p>\n\n<pre><code>function test\n{\n   some-command\n   exit_status=$?\n   if [ $exit_status -ne 0 ]; then\n      echo \"some-command failed with exit status $exit_status\" &gt;&amp;2\n   fi\n   return $exit_status\n}\n</code></pre>\n"},{"tags":["bash","while-loop","do"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12840769,"title":"Bash while loop syntax error in do","body":"<p>I´m trying do do a simple counter:</p>\n\n<pre><code>max=100\ncount=1\nwhile [[ $count -le $max]]\n  do\n    echo \"$count\"\n    ((count++))\n  done\n</code></pre>\n\n<p>This gives me a syntax error in conditional expression near do.</p>\n\n<p>What´s my issue? (probably something obvious)</p>\n\n<p>The idea is then to raise the <code>max</code> from 100 to 200 and so forth in a superior loop so I will get a new file to manipulate with a python program 100 lines each time, but that´s irrelevant here.</p>\n"},{"tags":["linux","bash","shell","ubuntu"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":289,"score":1,"question_id":3665533,"title":"Quoting in a bash variable assignment","body":"<p>Using the following simplified code extract:</p>\n\n<pre><code>DIR='a b'\nmount_command=\"./mount.cpfs $loop $DIR -f $OPTS\"\nsudo $mount_command\n</code></pre>\n\n<p>Executes this line when trace is on:</p>\n\n<pre><code>+ sudo ./mount.cpfs /dev/loop0 a b -f -o default_permissions,allow_other,attr_timeout=0\n</code></pre>\n\n<p>But <code>DIR</code> is not quoted, and so <code>a</code> and <code>b</code> are passed as different parameters, rather than the same to <code>./mount.cpfs</code>.</p>\n\n<p><strong>What's the best way to go about creating a command sequence like this, and then expanding it into a later command line?</strong></p>\n\n<p>Please keep in mind the code example is simplified to the core problem, I'm using <code>mount_command</code> in several places with various additions before and after it, and <code>DIR</code> is passed in by the user. I've tried several combinations of quoting <code>DIR</code> when assigning to <code>mount_command</code>, and a primitive attempt at using an array.</p>\n\n<h2>Example Usage of <code>mount_command</code></h2>\n\n<pre><code>mount_command=\"./mount.cpfs $loop $DIR -f $OPTS\"\ncase \"$MODE\" in\n    gdb)\n        sudo gdb -return-child-result -x gdbbatch \\\n            --args $mount_command\n        ;;\n    normal)\n        sudo $mount_command\n        ;;\n    valgrind)\n        sudo valgrind --track-fds=yes --leak-check=full --malloc-fill=0x80 \\\n            --free-fill=0xff $mount_command\n        ;;\n    *)\n        echo \"Mode '$MODE' unknown\"\n        mounted=''\n        exit 2\n        ;;\nesac\n</code></pre>\n\n<h2>Update0</h2>\n\n<p>Please test your suggestions, I don't think the solution is straightforward.</p>\n"},{"tags":["perl","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12836289,"title":"Running a program that requires a password on the command line from a Perl script","body":"<p>I have written a Perl wrapper around a shell script. I am using IPC::Run::Simple to execute system commands.  As an example: </p>\n\n<pre><code>run (\"mkdir ~$usr/12.2.0_cp/faiz_cpv/$pdate\") or die \"Error $ERR\";\nrun (\"cp ~$usr/12.2.0_cp/faiz_cpv/MPlist.lst ~$usr/12.2.0_cp/faiz_cpv/$pdate\") || die \"Error: $ERR\";\nrun (\"cd ~$usr/12.2.0_cp/faiz_cpv/$pdate; sh /opsutils/mfg_top/rel/CPV/bin/list_generation.sh . MPlist.lst mfg_relall_us\\@oracle.com\") or die \"error $ERR\";\n.\n.\n</code></pre>\n\n<p>One of these shell scripts requires the user of the script to enter their password. That is, a message is printed on stdout and the password is accepted via the shell. A number of calls are made to this shell script during the entire process which means a user must reenter his password a number of times. </p>\n\n<p>Is there a way by which I can request user for the password at the command line itself, and pass that password implicitly instead of prompting user for the password again and again?</p>\n"},{"tags":["bash","sed","awk","grep","cut"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":29,"score":-1,"question_id":12839005,"title":"How to grep column after second pipe","body":"<p>Example:</p>\n\n<pre><code>3|100|test@test.com|0|0|6:1,10,11,12,13,2,3,4,5,6,9|7:1,10,11,13,16,2,4,5,6,9|\n</code></pre>\n\n<p>Expected view after grep:</p>\n\n<pre><code>test@test.com\n</code></pre>\n"},{"tags":["osx","bash","diffmerge"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12839081,"title":"mac osx, git mergetool, diffmerge, command not found","body":"<p>I installed DiffMerge in Applications folder. \nI can't get DiffMerge run on its own, nor when I use <code>git mergetool</code>\nMy PATH variable: </p>\n\n<pre><code>/Applications/DiffMerge.app:/Applications/:/Applications/:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin:/usr/texbin:/usr/X11/bin$$$:/usr/X11/bin\n</code></pre>\n\n<p>What am I missing? thanks</p>\n"},{"tags":["bash","ssh","expect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12835429,"title":"expect error in bash expression","body":"<p>I have the following expect command that i use in my bash script in order to set passwordless ssh connection.</p>\n\n<pre><code>VAR=$(expect -c '\n     spawn ssh-copy-id -i '\"$SSH_KEY_PATH_PUB $REMOTE_HOST_USER@$REMOTE_HOST_IP \"'   \n     expect \"*?assword:*\"\n     send \"'\"$REMOTE_HOST_PASSWD\"'\\r\";\n     expect { \n     \"Permission denied, please try again.\" {\n        exit '\"$WRONG_PASSWORD\"' \n     }\n }\n ')\n</code></pre>\n\n<p>I am expecting password string as \"<em>?assword:</em>\" in order to send password.But whatever i write for the expect block it works.if i write </p>\n\n<pre><code>expect \"xxxx\"\nexpect \"yyyy\"\n</code></pre>\n\n<p>it also works, so i think it does not enter that block?.What is the solution </p>\n"},{"tags":["bash","shell","makefile","make","ubuntu-12.04"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12838278,"title":"Using curly brackets for variable expansion in makefile doesn't work","body":"<p>When I run below command on shell, it works properly. but if I write it in a Makefile and call it with \"make\" command it doesn't work.</p>\n\n<blockquote>\n  <p>cp wpa_{cli,supplicant,passphrase,event} /usr/local/bin/</p>\n</blockquote>\n\n<p>error after \"make\" command:</p>\n\n<blockquote>\n  <p>cp: cannot stat `wpa_{cli,supplicant,passphrase,event}': No such file\n  or directory</p>\n</blockquote>\n\n<p>What can i do to make it work with Makefile? I use Ubuntu 12.04. Same Makefile works on other linux distributions.</p>\n"},{"tags":["linux","bash","unix","environment-variables"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":2,"view_count":93,"score":-2,"question_id":12837112,"title":"Set up of environment variable PATH in bash shell","body":"<p>The Environment PATH is much larger in PROD as compared to QA:</p>\n\n<pre><code>PATH=.:/home/imc:/home/imc/bin:$HOME:/usr/local/sbin:$PATH\n</code></pre>\n\n<p>We are using the same setup environment file in PROD and QA but we still find difference.</p>\n\n<p>The longer path means it effects while running the job. So any idea how to improve the PATH?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12836860,"title":"Bash - Echo a variable using another variable (?)","body":"<p>Thank you very much in advance for helping!</p>\n\n<p>I have this variables:</p>\n\n<pre><code>scene1=lounge\nscene2=bedroom\nscene3=bathroom\n</code></pre>\n\n<p>What I want to do is a loop, and for every file in a particular folder, echo the variable scene#</p>\n\n<pre><code>order=1\nfor f in $(find $dest_scenes/*.xml -maxdepth 0 )\ndo\n    scene_name=scene$order #scene1, scene2, scene3\n    echo $scene_name\ndone\norder=$(expr $order + 1)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>scene1\nscene2\nscene3\n</code></pre>\n\n<p>What I would like to:</p>\n\n<pre><code>lounge\nbedroom\nbathroom\n</code></pre>\n\n<p>I don't want to get $scene_name, I want to got $($scene_name) if you know what I mean...</p>\n\n<p>Thank you!!!</p>\n"},{"tags":["bash","shell","script"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12836182,"title":"Passing arguments to a bash script","body":"<pre><code>linux 3.5.6-1.fc17.x86_64\nGNU bash, version 4.2.37\n</code></pre>\n\n<p>Hello,</p>\n\n<p>I have the following bash script file. That I am using to test my program. However, I want to be able to test with and without valgrind. So I get the argument from the command line 'valgrind' and compare in the if statement. However, my test cases will get bigger over time, and I will have to repeat a lot of code in the if-else. Is there a way to minimize this if-else?</p>\n\n<p>Many thanks for any suggestions,</p>\n\n<pre><code>#!/bin/bash\n\n# Abort on error\nset -e\n\necho $1\n\nif [ \"$1\" == \"valgrind\" ]; then\n    echo \"TEST STARTED RUNNING WITH VALGRIND\"\n    echo \"TEST CREATE DATABASE\"\n    valgrind ./db db.dat c\n    echo \"TEST CREATE DATABASE OK\"\n\n    echo \"TEST INSERT\"\n    valgrind ./db db.dat s 1 steve steve@mail.com\n    valgrind ./db db.dat s 2 ben ben@live.com\n    valgrind ./db db.dat s 3 lisa lisalow@mailcity.com\n    echo \"TEST INSERT OK\"\n\n    echo \"TEST LIST\"\n    valgrind ./db db.dat l\n    echo \"TEST LIST OK\"\n\n    echo \"TEST DELETE\"\n    valgrind ./db db.dat d 2\n    echo \"TEST DELETE OK\"\n\n    echo \"TEST LIST\"\n    valgrind ./db db.dat l\n    echo \"TEST LIST OK\"\n\n    echo \"TEST FETCH\"\n    valgrind ./db db.dat g 2\n    valgrind ./db db.dat g 3\n    echo \"TEST FETCH OK\"\n\n    echo \"TEST COMPLETED OK\"\nelse\n    echo \"TEST STARTED\"\n    echo \"TEST CREATE DATABASE\"\n    ./db db.dat c\n    echo \"TEST CREATE DATABASE OK\"\n\n    echo \"TEST INSERT\"\n    ./db db.dat s 1 steve steve@mail.com\n    ./db db.dat s 2 ben ben@live.com\n    ./db db.dat s 3 lisa lisalow@mailcity.com\n    echo \"TEST INSERT OK\"\n\n    echo \"TEST LIST\"\n    ./db db.dat l\n    echo \"TEST LIST OK\"\n\n    echo \"TEST DELETE\"\n    ./db db.dat d 2\n    echo \"TEST DELETE OK\"\n\n    echo \"TEST LIST\"\n    ./db db.dat l\n    echo \"TEST LIST OK\"\n\n    echo \"TEST FETCH\"\n    ./db db.dat g 2\n    ./db db.dat g 3\n    echo \"TEST FETCH OK\"\n\n    echo \"TEST COMPLETED OK\"\nfi\n</code></pre>\n"},{"tags":["bash","shell","redirect","variables","stderr"],"answer_count":7,"favorite_count":17,"up_vote_count":39,"down_vote_count":0,"view_count":34857,"score":39,"question_id":962255,"title":"How to store standard error in a variable in a Bash script","body":"<p>Let's say I have a script like the following:</p>\n\n<p>useless.sh</p>\n\n<pre><code>echo \"This Is Error\" 1&gt;&amp;2\necho \"This Is Output\"\n</code></pre>\n\n<p>And I have another shell script:</p>\n\n<p>alsoUseless.sh</p>\n\n<pre><code>./useless.sh | sed 's/Output/Useless/'\n</code></pre>\n\n<p>I want to capture \"This Is Error\", or any other stderr from useless.sh, into a variable. \nLet's call it ERROR.</p>\n\n<p>Notice that I am using stdout for something. I want to continue using stdout, so redirecting stderr into stdout is not helpful, in this case.</p>\n\n<p>So, basically, I want to do</p>\n\n<pre><code>./useless.sh 2&gt; $ERROR | ...\n</code></pre>\n\n<p>but that obviously doesn't work.</p>\n\n<p>I also know that I could do</p>\n\n<pre><code>./useless.sh 2&gt; /tmp/Error\nERROR=`cat /tmp/Error`\n</code></pre>\n\n<p>but that's ugly and unnecessary.</p>\n\n<p>Unfortunately, if no answers turn up here that's what I'm going to have to do.</p>\n\n<p>I'm hoping there's another way.</p>\n\n<p>Anyone have any better ideas?</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":554,"score":2,"question_id":3966048,"title":"access arguments to bash script inside a function","body":"<p>Inside a function, <code>$1 ... $n</code> are the parameters passed to that function.\nOutside a function <code>$1 ... $n</code> are the parameters passed to the script.</p>\n\n<p>Can I somehow access the parameters passed to the script inside a function?</p>\n"},{"tags":["bash","command"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12834446,"title":"test command in unix doesn't print output","body":"<p>Why is there no output to the command <code>test 3 -lt 6</code> in the unix terminal? Shouldn't test output a 0 or a 1?</p>\n\n<p>I did a man test and it says </p>\n\n<blockquote>\n  <p>Exit with the status determined by EXPRESSION</p>\n</blockquote>\n"},{"tags":["bash","shell","documentation","ksh"],"answer_count":6,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1008,"score":4,"question_id":1190427,"title":"Shell documentation (bash, ksh)","body":"<p>is there a tool out there similar to <a href=\"http://en.wikipedia.org/wiki/Javadoc\" rel=\"nofollow\">Javadoc</a> or <a href=\"http://en.wikipedia.org/wiki/Plain%5FOld%5FDocumentation\" rel=\"nofollow\">POD</a> for shell scripting?\nthanks</p>\n\n<p>EDIT: I am not looking for existing shell man pages - there is a lot of ksh/bash code we write/support, so I was looking for a nice way to communicate what's happening, whether there is a potential for code reuse, etc. all things Javadocs are good for.</p>\n"},{"tags":["c","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12832945,"title":"Simple variable test","body":"<p>With Bash you can do a simple variable test like this</p>\n\n<pre><code>$ [ $foo ]; echo $?\n1\n\n$ foo=bar\n\n$ [ $foo ]; echo $?\n0\n</code></pre>\n\n<blockquote>\n  <p>The expression is true if and only if the argument is not null.</p>\n</blockquote>\n\n<p>What would be a similar test with C?</p>\n\n<h1>Edit</h1>\n\n<p>Lets say an <code>int</code> type for argument sake.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12820884,"title":"Print elapsed time in secs with three trailing digits","body":"<p>For a framework I'm writing I would like to measure how much a piece of (bash) code takes to execute and then print the elapsed time in seconds.</p>\n\n<p>For measuring, I do the following:</p>\n\n<pre><code>start=$(date +%s%N)\n\n# do something here\n\nelapsed_time=$(($(date +%s%N) - start))\n</code></pre>\n\n<p>This gives me the elapsed seconds concatenated with the elapsed nanos. If I now divide this by 1000000, I'll get the time in ms</p>\n\n<pre><code>elapsed_time_in_ms=$(($elapsed time / 1000000))\n</code></pre>\n\n<p>This is all nice and seems to work but the real problem is that I want to print it in this format:</p>\n\n<pre><code>12.789s\n</code></pre>\n\n<p>where before the <code>.</code> are the seconds and after the dot are last 3 digits of the ms value.</p>\n\n<p>How would I achieve something like that?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I am aware that the time would probably not of much use, still I would like to implement this (even if only for cosmetic reasons :-)).</p>\n"},{"tags":["bash","image","shell","download","wget"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1605,"score":0,"question_id":1548653,"title":"Shell script (mac): How to download files from a directory using wget and regular expression?","body":"<p>I'm trying to download images (.jpg) from web folder using wget. I want to download only images, which have a certain sentences in file name. This works fine </p>\n\n<pre><code>wget -r -nd -A .jpg http://www.examplewebsite.com/folder/\n</code></pre>\n\n<p>but I like to include a sentence eg. \"john\". I tried </p>\n\n<pre><code>wget -r -nd -A .jpg '*john*' http://www.examplewebsite.com/folder/\n</code></pre>\n\n<p>with no success. Any ideas how to proceed? Could this be implemented into a shell script (bash shell). I'm using Mac OSX 10.6.1.</p>\n"},{"tags":["bash","sudo","zenity"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":122,"score":0,"question_id":11729761,"title":"Zenity entry and sudo -S not working properly without shell","body":"<p>I have problem with <code>zenity entry</code> and <code>sudo -S</code>.</p>\n\n<p>I am doing something like this:</p>\n\n<pre><code>zenity --entry --title 'title' --text 'text' --hide-text | sudo -S pm-suspend\n</code></pre>\n\n<p>If I run this in shell, it's working. But I put it into file and I am launching this script with key shortcut. It's not working! </p>\n\n<p>I've tried to replace <code>pm-suspend</code> with my own script, which prints <code>id -u</code> to file. But no file was created.</p>\n\n<p>Any ideas, where could be a problem? Thank you</p>\n"},{"tags":["osx","bash","command-line","operating-system","jpeg"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12831293,"title":"How to recursivly use JpegTran (command line) to optimise all files in subdirs?","body":"<p>i have Photos in multiple directories. I want to use jpegtran (command line tool) to recursivly go through each one, optimise it, and save it (overwrite it)</p>\n\n<p>if they are all in one folder i use this</p>\n\n<pre><code>for JPEG in *.jpg ; do jpegtran -optimize $JPEG &gt; $JPEG; done\n</code></pre>\n\n<p>but i can't get it working recursivly and overwriting the same file (rather than to a new filename)</p>\n\n<p>any tips?</p>\n"},{"tags":["bash","ssh","connection"],"answer_count":4,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":6811,"score":6,"question_id":1405324,"title":"How to create a bash script to check the SSH connection?","body":"<p>I am in the process of creating a bash script that would log into the remote machines and create private and public keys.</p>\n\n<p>My problem is that the remote machines are not very reliable, and they are not always up. I need a bash script that would check if the SSH connection is up. Before actually creating the keys for future use.</p>\n"},{"tags":["bash","shell","scripting","sed","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":60,"score":-1,"question_id":12828542,"title":"how to print user1 from user1@10.129.12.121 using shell scripting or sed","body":"<p>I wanted to print the name from the entire address by shell scripting. So user1@12.12.23.234 should give output \"user1\" and similarly 11234@12.123.12.23 should give output 11234</p>\n"},{"tags":["bash","shell","capitalization"],"answer_count":6,"favorite_count":2,"up_vote_count":20,"down_vote_count":0,"view_count":5404,"score":20,"question_id":673055,"title":"Correct Bash and shell script variable capitalization","body":"<p>I run across many shell scripts with variables in all caps, and I've always thought that there is a severe misunderstanding with that.  My understanding is that, by convention (and perhaps by necessity long ago), <strong>environment variables</strong> are in all-caps.</p>\n\n<p>But in modern scripting environments like Bash, I have always prefered the convention of lower-case variables for temporary variables, and upper-case variables <em>only for exported (i.e. environment) variables</em>.  For example:</p>\n\n<pre><code>#!/usr/bin/env bash\nyear=`date +%Y`\necho \"It is $year.\"\nexport JAVA_HOME=\"$HOME/java\"\n</code></pre>\n\n<p>That has always been my take on things.  Are there any authoritative sources which either agree or disagree with this approach, or is it purely a matter of style?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12828967,"title":"Bash Script Quit without throwing exit","body":"<p>hey guys I've had an issue of terminating my terminal (ssh) when exit is \nthrown in a script and am hoping for a way around it, here's an example</p>\n\n<pre><code># ssh name@host\n$ program\n\n    # program contents\n\n    #!/bin/bash\n    program()\n    {\n        exit 0\n    }\n\nexit\nConnection to host closed.\n# gfd =(\n</code></pre>\n\n<p>this kicks me back to my local terminal, is there a way to exit/quit without losing my session?</p>\n"},{"tags":["osx","bash","terminal","stty"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":61,"score":3,"question_id":12827888,"title":"What is the representation of the mac command key in the terminal?","body":"<p>Like control key is represented by a '^' in the terminal, what is the equivalent for the command key (mac)?</p>\n\n<p>I am trying to remap my bash shortcuts using stty</p>\n\n<p>For eg</p>\n\n<p>stty eof ^D</p>\n\n<p>But instead of control, I want to use the command key. </p>\n\n<p>EDIT:</p>\n\n<p>Okay so the issue I was trying to solve was that I wanted to interchange command and control keys because I work on osx and linux and the different key combinations cause me a lot of pain.</p>\n\n<p>So I interchanged the modifier keys using osx preferences. But now all the bash shortcuts like Ctrl+C etc had become equivalent of using the key sequences 'cmd+c' - which is not acceptable.</p>\n\n<p>Thankfully iTerm2, supports remapping of modifier keys as well, so for iterm2 I reversed them again which means iTerm2 recognizes command as command and control as control. </p>\n\n<p>So problem solved for now.</p>\n"},{"tags":["bash","tail"],"answer_count":13,"favorite_count":5,"up_vote_count":10,"down_vote_count":0,"view_count":6789,"score":10,"question_id":2041437,"title":"Ending tail -f started in a shell script","body":"<p>I have the following.</p>\n\n<ol>\n<li>A Java process writing logs to the stdout </li>\n<li>A shell script starting the Java process </li>\n<li>Another shell script which executes the previous one and redirects the log</li>\n<li>I check the log file with the <code>tail -f</code> command for the success message.</li>\n</ol>\n\n<p>Even if I have exit 0 in the code I cannot end the <code>tail -f</code> process.</p>\n\n<p>Which doesn't let my script to finish. Is there any other way of doing this in Bash?</p>\n\n<p>The code looks like the following.</p>\n\n<pre><code>function startServer() {\n  touch logfile\n  startJavaprocess &gt; logfile &amp;\n\n  tail -f logfile | while read line \n  do\n    if echo $line | grep -q 'Started'; then\n      echo 'Server Started'\n      exit 0\n    fi\n  done\n}\n</code></pre>\n"},{"tags":["linux","bash","web","wget","hotlinking"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12828299,"title":"Wget: How to bypass \"hotlinking\" protected image","body":"<p>Is it possible to bypass \"hotlink\" image protection? i'm not trying to post it on other sites just to download.\nwhen i download the following image, using wget:</p>\n\n<pre><code>http://comicsbook.ru/upload/%D0%9A%D0%BE%D0%BC%D0%B8%D0%BA%D1%81-Trollface-%D0%9D%D0%B0-%D0%B1%D0%BE%D1%80%D1%82%D1%83-70813.jpg\n</code></pre>\n\n<p>I'm getting redirected to:</p>\n\n<pre><code>http://comicsbook.ru/trollface/70813?na-bortu\n</code></pre>\n\n<p>I have no idea where to start.\nWhat I've tried so far:</p>\n\n<pre><code>curl \"http://comicsbook.ru\" -s -L -b cookie.c -c cookie.c -b \"$COOKIEPAR\" &gt; index.$TEMP\nwget http://comicsbook.ru/upload/%D0%9A%D0%BE%D0%BC%D0%B8%D0%BA%D1%81-Trollface-%D0%9D%D0%B0-%D0%B1%D0%BE%D1%80%D1%82%D1%83-70813.jpg\n</code></pre>\n"},{"tags":["linux","bash","shell","unix","ssh"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12827574,"title":"Is is possible to pipe the output of a command from a server to a local machine?","body":"<p>I have a series of functionally identical servers provided by my school that run various OS and hardware configurations. For the most part, I can use 5 of these interchangeably. Unfortunately, other students tend to bunch up on some machines and It's a pain to find one that isn't bogged down.</p>\n\n<p>What I want to is ssh into a machine, run the command: </p>\n\n<pre><code>w | wc -l\n</code></pre>\n\n<p>to get a rough estimate of the load on that server, and use that information to select the least impacted one. A sort of client-side load balancer.</p>\n\n<p>Is there a way to do this or achieve the same result?</p>\n"},{"tags":["linux","bash","shell"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":772,"score":0,"question_id":7022390,"title":"Bash- how to read only the last line but one from a file?","body":"<p>I have a file that has following last three lines. I want need to retrive onle the last but one line i.e. <code>100.000;8438;    06:46:12</code>, but i do not know the line number of that line. How can i retrieve it using shell-scripts? Thanks in advance for your help.</p>\n\n<pre><code>.\n.\n.\n99.900; 8423;   06:44:41\n100.000;8438;   06:46:12\nNumber of patterns: 8438\n</code></pre>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12821302,"title":"Split a string only by spaces that are outside quotes","body":"<p>I know, this was asked a bilion times, but i yet did not find the optimal solution for my specific case.</p>\n\n<p>I'm receving a string like this:</p>\n\n<pre><code>VAR1=\"some text here\" VAR2='some another text' some script --with --some=args\n</code></pre>\n\n<p>how do i split the string like this: (most preferable in pure bash)</p>\n\n<pre><code>VAR1=\"some text here\"\nVAR2='some another text'\nsome script --with --some=args\n</code></pre>\n\n<p><code>set -- $str</code> result in <code>VAR1=\"some</code></p>\n\n<p><code>set -- \"$str\"</code> returns entire string</p>\n\n<p><code>eval set -- \"$str\"</code> result in <code>VAR1=some text here</code></p>\n\n<p>sure, i could add quotes to the string returned by <code>eval</code>, but i get highly untrusted input so <code>eval</code> is not a option at all.</p>\n\n<p>Important: there can be from zero to unlimited VARs and they can be single or double quoted</p>\n\n<p>Also, the <code>VAR</code> is a fake name here, it can in fact be anything.</p>\n\n<p>Thanks.</p>\n"},{"tags":["sqlite","bash"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12825431,"title":"Combine two SQLite databases in bash","body":"<p>I have two databases that are created in a bash file, let's call them <code>1.sqlite</code> and <code>2.sqlite</code>.  I'd like to combine them into a new database (<code>3.sqlite</code>).  Is there a command in bash that'll do that?</p>\n\n<p>Edit:</p>\n\n<p>The answer that sputnick gave me got me on the right track.  But I had to rearrange it to be:</p>\n\n<pre><code>sqlite3 1.sqlite .dump &gt; tempdb.sqlite\n</code></pre>\n"},{"tags":["linux","bash","shell","powershell"],"answer_count":9,"favorite_count":8,"up_vote_count":22,"down_vote_count":1,"view_count":1820,"score":21,"question_id":933445,"title":"A better Linux shell?","body":"<p>I use bash, and have done so for over a decade - but occasionally I wonder whether there has been any significant new developments in the world of Linux shells.</p>\n\n<p>A few years back Microsoft released PowerShell, which seemed very interesting.  Is there any comparable innovation going on in Linux shells?</p>\n"},{"tags":["bash","unix","process","eval","pid"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":5921,"score":3,"question_id":4339756,"title":"Inside a bash script, how to get PID from a program executed when using the eval command?","body":"<p>I have commands in a bash script that are similar to this:</p>\n\n<pre><code>eval \"( java -classpath ./ $classname ${arguments[@]} $redirection_options $file )\" &amp;\npid=$!\n</code></pre>\n\n<p>However if I do a <code>ps $pid</code> it shows the main script process instead of the process of the java program.</p>\n\n<p>It obtains the correct process when I omit the eval, but in order to get some of the complicated arguments to work correctly I need to use it.</p>\n\n<p>Any idea of how I can get the PID of the java program when it's executed within an eval command?</p>\n"},{"tags":["bash","grep"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":12826393,"title":"What is the difference between grep -e and grep -E option?","body":"<p>I am trying to understand the difference between <code>grep -e</code> and <code>grep -E</code>. Now from <code>grep manpage</code> I got:</p>\n\n<blockquote>\n  <p>-E, --extended-regexp </p>\n  \n  <p>Interpret PATTERN as an extended regular expression (see below).</p>\n  \n  <p>-e PATTERN, --regexp=PATTERN </p>\n  \n  <p>Use PATTERN as the pattern; useful to protect patterns beginning with -</p>\n</blockquote>\n\n<p>The above explanation might be clear to a regex/grep experienced user but for a beginner like me it makes no sense.</p>\n\n<p>So, can someone explain it to me using <code>examples</code> what is the difference between the two  and when to use which option.</p>\n\n<p>PS: Version: grep (GNU grep) 2.10</p>\n"},{"tags":["linux","bash","signals","trap"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":64,"score":5,"question_id":12824637,"title":"Bash script: can not properly handle SIGTSTP","body":"<p>I have a bash script that mounts and unmounts a device, which performing some read operations in between. Since the device is very slow, the script takes about 15 seconds to complete (the mount taking atleast 5-6 seconds). Since leaving this device mounted can cause other problems, I don't want this script to be interrupted.</p>\n\n<p>Having said that, I can correctly handle SIGINT (Ctrl+c), but when I try to handle SIGTSTP (Ctrl+z), the script freezes. Which means the signal is trapped but the handler doesn't run.</p>\n\n<pre><code>#!/bin/sh\ncleanup()\n{\n    # Don't worry about unmounting yet. Just checking if trap works.\n    echo \"Quitting...\" &gt; /dev/tty\n    exit 0\n}\ntrap 'cleanup' SIGTSTP\n...\n</code></pre>\n\n<p>I manually have to send the KILL signal to the process. Any idea why this is happening and how I can fix it?</p>\n"},{"tags":["bash","amazon-ec2","ec2-ami","ec2-api-tools"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":129,"score":1,"question_id":12268986,"title":"shell script to set amazon ec2 hostname from tags","body":"<p>I am trying to set amazon EC2 hostname from the tag \"Name\"</p>\n\n<p>And found <a href=\"http://stackoverflow.com/a/7122649/957423\">the answer</a> to extract tags from instance data.</p>\n\n<pre><code>ec2-describe-tags \\\n  --filter \"resource-type=instance\" \\\n  --filter \"resource-id=$(ec2-metadata -i | cut -d ' ' -f2)\" \\\n  --filter \"key=Name\" | cut -f5\n</code></pre>\n\n<p>the result is:</p>\n\n<pre><code>+------------+--------------+------+--------+\n| resourceId | resourceType | key  | value  |\n+------------+--------------+------+--------+\n| i-1xxxxxxx | instance     | Name | dev200 |\n+------------+--------------+------+--------+\n</code></pre>\n\n<p>I can see that I am almost there, but how do I get the value(dev200) from the result above?  Then I can use it in:</p>\n\n<pre><code>echo $HOSTNAME &gt; /etc/hostname\n</code></pre>\n\n<p>p.s. I have BASH on the instance, but I am completely lost in the <a href=\"http://www.tldp.org/LDP/abs/html/\" rel=\"nofollow\">bash document</a>. can someone point me to the correct paragraph?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":57,"score":3,"question_id":12812154,"title":"paste command in bash doesn't append to end of file","body":"<p>One file has 3 columns and looks like this:</p>\n\n<pre><code>1   249250621   225280621   \n2   243199373   238207373   \n3   198022430   194797140   \n4   191154276   187661676   \n5   180915260   177695260   \n6   171115067   167395067   \n7   159138663   155353663   \n8   146364022   142888922   \n9   141213431   120143431   \n10  135534747   131314747   \n11  135006516   131129516   \n12  133851895   130481895   \n13  115169878   95589878    \n14  107349540   88289540    \n15  102531392   81694769    \n16  90354753    78884753    \n17  81195210    77795210    \n18  78077248    74657248    \n19  59128983    55808983    \n20  63025520    59505520    \n21  48129895    35108702    \n22  51304566    34894566    \nX   155270560   151100560   \nY   59373566    25653566    \n</code></pre>\n\n<p>My other file looks like:</p>\n\n<pre><code>5677533\n4506000\n2272564\n2753699\n4015846\n2163243\n3812595\n2885199\n8064159\n3522086\n2006115\n1490517\n1072244\n1423429\n3009679\n2705191\n1479591\n800436\n929876\n648000\n347993\n972862\n7812943\n9660863\n</code></pre>\n\n<p>When I try</p>\n\n<p>paste file1.txt file2.txt > file3.txt</p>\n\n<p>I get:</p>\n\n<pre><code>1   567753321   225280621   \n2   450600073   238207373   \n3   227256430   194797140   \n4   275369976   187661676   \n5   401584660   177695260   \n6   216324367   167395067   \n7   381259563   155353663   \n8   288519922   142888922   \n9   806415931   120143431   \n10  352208647   131314747   \n11  200611516   131129516   \n12  149051795   130481895   \n13  107224478   95589878    \n14  142342940   88289540    \n15  300967992   81694769    \n16  27051913    78884753    \n17  14795910    77795210    \n18  80043648    74657248    \n19  92987683    55808983    \n20  64800020    59505520    \n21  34799395    35108702    \n22  97286266    34894566    \nX   781294360   151100560   \nY   96608636    25653566\n</code></pre>\n\n<p>The data from file2.txt overwrites the 2nd column in file 1.  I want the data in file2.txt to be appended to the end in a new column, separated by a tab in file1.txt into the new file3.txt.  But it does not seem to be working.  Thoughts?  Thanks.</p>\n\n<p>Edit: For file2, I can create it with the same first column index 1-22, x, y.  But then when I try to join, it doesn't work either.  This is my output on join:</p>\n\n<pre><code>1 249250621 225280621\n 5677533\n2 243199373 238207373\n 4506000\n3 198022430 194797140\n 2272564\n4 191154276 187661676\n 2753699\n5 180915260 177695260\n 4015846\n6 171115067 167395067\n 2163243\n7 159138663 155353663\n 3812595\n8 146364022 142888922\n 2885199\n9 141213431 120143431\n 8064159\n10 135534747 131314747\n 3522086\n11 135006516 131129516\n 2006115\n12 133851895 130481895\n 1490517\n13 115169878 95589878\n 1072244\n14 107349540 88289540\n 1423429\n15 102531392 81694769\n 3009679\n16 90354753 78884753\n 2705191\n17 81195210 77795210\n 1479591\n18 78077248 74657248\n 800436\n19 59128983 55808983\n 929876\n20 63025520 59505520\n 648000\n21 48129895 35108702\n 347993\n22 51304566 34894566\n 972862\nX 155270560 151100560\n 7812943\nY 59373566 25653566 9660863\n</code></pre>\n"},{"tags":["bash","shell","newline","text-processing"],"answer_count":7,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1444,"score":3,"question_id":4594319,"title":"shell replace cr\\lf by comma","body":"<p>I have input.txt</p>\n\n<pre><code>1\n2\n3\n4\n5\n</code></pre>\n\n<p>I need to get such output.txt</p>\n\n<pre><code>1,2,3,4,5\n</code></pre>\n\n<p>How to do it?</p>\n"},{"tags":["bash","ssh","ping"],"answer_count":4,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":3551,"score":4,"question_id":1727907,"title":"how to use ping in a script","body":"<p>I want a bash script that'll do:</p>\n\n<pre><code>for c in computers:\ndo\n   ping $c\n   if ping is sucessfull:\n      ssh $c 'check something'\ndone\n</code></pre>\n\n<p>If I only do <code>ssh</code> and the computer is iresponsive, it takes forever for the timeout. So I was thinking of using the output of <code>ping</code> to see if the computer is alive or not. How do I do that? Other ideas will be great also </p>\n"},{"tags":["python","bash","variables","autocomplete"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":68,"score":3,"question_id":12822777,"title":"How to use the bash command 'read -e variable' and pass the variable to a python variable","body":"<p>I'd like to pass shell input to a variable in python. Normally I would use the <code>raw_input()</code> method for this, but I'd like to use something which allows me to \"browse\" through my folders.  </p>\n\n<p>In a bash script I'd use something like this: (The -e allows me use the \"autocomplete\" function of the shell via Tab.)</p>\n\n<pre><code>#!/bin/bash\n\necho Please input the path to the file:\n\nread -e var\n\necho $var\n</code></pre>\n\n<p>Does anyone know how to solve this in Python? I looked at <code>os.popen()</code> and <code>os.system()</code> but cannot figure out how to use them.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":85,"score":2,"question_id":12821715,"title":"convert string into integer in bash script","body":"<p>In a text file, test.txt, I have the next information:</p>\n\n<pre><code>sl-gs5 desconnected Wed Oct 10 08:00:01 EDT 2012 1001\n</code></pre>\n\n<p>I want to extract the hour of the event by the next command line:</p>\n\n<pre><code>hour=$(grep -n sl-gs5 test.txt | tail -1 | cut -d' ' -f6 | awk -F \":\" '{print $1}')\n</code></pre>\n\n<p>and I got \"08\". When I try to add 1,</p>\n\n<pre><code> 14 echo $((hour+1))\n</code></pre>\n\n<p>I receive the next error message:</p>\n\n<pre><code>./test2.sh: line 14: 08: value too great for base (error token is \"08\")\n</code></pre>\n\n<p>If variables in Bash are untyped, why?</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":60,"score":2,"question_id":12790255,"title":"BASH: ls first 5 from $PATH without displaying errors","body":"<p>I'm starting with bash at university, anyone has any idea how to solve that problem:</p>\n\n<p>Show first 5 files for each directory from $PATH variable, if some directory doesn't exist, don't show error message.</p>\n\n<p>Solution can be something like:</p>\n\n<p><code>ls -a ``echo $PATH | sed \"s/:/ /g\"`` 2&gt; /dev/null</code></p>\n\n<p>it works, maybe there exists other option but I don't know how to limit results by 5 per each show block?</p>\n"},{"tags":["perl","excel","bash","datetime","command-line"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":109,"score":2,"question_id":11289445,"title":"tool/script to test datetime intervals on bash command line","body":"<p>I have sorted data that look like this (dumped from MS Excel to commandline  with <em>ssgrep</em>):</p>\n\n<pre><code>2012-06-27T22:55:00\n2012-06-27T23:00:00\n2012-06-27T23:05:00\n2012-06-27T23:10:00\n2012-06-27T23:15:00\n2012-06-27T23:20:00\n2012-06-27T23:25:00\n2012-06-27T23:30:00\n</code></pre>\n\n<p>Now I want to pipe this into a script (or any command line tool) which tests whether all values are indeed valid dates, and if there are any gaps between them that are not 5-minute intervals. (I need to do the same with different datasets sampled at 1 hour intervals)</p>\n\n<p>Is there a tool available for the command line that can do this? \nI know it's easy to write a little script in R or in Perl (in fact I have already started to program this). But maybe there is already a little utility pre-installed on linux/solaris that I don't know about.</p>\n"},{"tags":["bash","shell"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":76,"score":3,"question_id":10022422,"title":"How to take string from a file name and use it as an argument","body":"<p>If a file name is in this format</p>\n\n<pre><code>assignment_number_username_filename.extension\n</code></pre>\n\n<p>Ex.</p>\n\n<pre><code>assignment_01_ssaha_homework1.txt\n</code></pre>\n\n<p>I need to extract just the username to use it in the rest of the script.</p>\n\n<p>How do I take just the username and use it as an argument.</p>\n\n<p>This is close to what I'm looking for but not exactly:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/1999682/extracting-a-string-from-a-file-name\">Extracting a string from a file name</a></p>\n\n<p>if someone could explain how sed works in that scenario that would be just as helpful!</p>\n\n<p>Here's what I have so far; I haven't used <code>cut</code> in a while so I'm getting error messages while trying to refresh myself.</p>\n\n<pre><code> #!/bin/sh \n a = $1\n grep $a /home | cut -c 1,2,4,5 echo $a`\n</code></pre>\n"},{"tags":["python","bash","shell","awk","text-processing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":122,"score":0,"question_id":10738914,"title":"comparing values in multiple files","body":"<p>I have two files and each file has 3  columns and n number of rows (different number of rows in each file).  </p>\n\n<p>each looks like this:</p>\n\n<pre><code>file1\nchr1    12  32 \nchr1    14  30\nchr3    10002  89000 \nchrx    5678900   987654\n</code></pre>\n\n<p>and this:</p>\n\n<pre><code>file2\nchr1    8   15\nchr1    10  14\nchr1    32  34\n</code></pre>\n\n<p>the second and third column in each file represent the starting and ending values while the first column is a name.</p>\n\n<p>Hence, if the value in first column (of file 1) matches to the value in first column of file 2  and then script should compute if their exists an overlap (any degree of overlap of the value range in column 2 and 3 in file1 with value range in column 2 and 3 of file 2) of the range of value in second and third column from  file 1 in file2.  </p>\n\n<p>An output like this is desired:</p>\n\n<pre><code>regions from file1 present in file 2\n\nchr1    12  32   present \nchr1    14  30   present \nchr3    10002  89000  absent\nchrx    5678900   987654 absent\n</code></pre>\n\n<p>Any suggestions for awk manipulation or python script...please help.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":54,"score":2,"question_id":12819795,"title":"How to selectively replace spaces in a string with Bash only","body":"<p>I have this string:</p>\n\n<pre><code>str='1 2 3 var=\"foo bar\" 4 5 6'\n</code></pre>\n\n<p>Also it could be like this:</p>\n\n<pre><code>str=\"1 2 3 var='foo bar' 4 5 6\"\n</code></pre>\n\n<p>How would I replace spaces with <code>+</code> only inside quotes(double or single)?</p>\n\n<p>The result should be like:</p>\n\n<pre><code>1 2 3 var=\"foo+bar\" 4 5 6\n</code></pre>\n\n<p>or</p>\n\n<pre><code>1 2 3 var='foo+bar' 4 5 6\n</code></pre>\n\n<p>In case the var is single quoted.</p>\n\n<p><code>var</code> can be anything, it is not strong match.\nAlso it could be missing at all, like this:</p>\n\n<pre><code>str='1 2 3 \"foo bar\" 4 5 6'\n</code></pre>\n\n<p>I don't want to use awk, sed, or perl to do this.</p>\n"},{"tags":["bash","shell","script","while-loop","break"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12816151,"title":"bash script: commands after the loop are not executed if the loop condition is false","body":"<p>I have a strange behavior in my script bash. when the while condition is true the script behaves correctly but if it's false the commands after the loop aren't executed at all and the script stops. There is no break in my commands after the loop. \nI cannot see where is the problem! Any help is welcome :)\nThanks in advance.</p>\n\n<pre><code>while  [ expression1 ] || [ expression2 ]  \ndo\n            echo in the loop\n            if  [ expression3 ] &amp;&amp; [ expression4 ] ;\n            then\n                    commands..   \n                    break;\n            fi\n            commands..\ndone\ncommands..\necho out from the loop\n</code></pre>\n\n<p>Real code:</p>\n\n<pre><code>start_t=`grep Start_t $job_template | awk -F= '{print $2}'`\ncurrent_date=`date +%s`\nprogress_t=`expr $current_date - $start_t`\nexec_t=`grep Exec_t $job_template | awk -F= '{print $2}'`\n\nrunning_state=\"r\"\nreq_state $job_id # get the state \nxml_state=` grep \"job_id=$job_id\" $list_job_file | awk '{print $4}'`\nwhile  [ $state = $running_state ] || [ $xml_state = \"stoped\" ]  \n    do\n            echo in the loop\n            if  [ \"$xml_state\" = \"running\" ] &amp;&amp; [ $progress_t  -gt $exec_t ] ;\n            then\n                    kill_job $job_id\n                    update_status $job_template \"killed\"\n                    echo The job is killed    \n                    break;\n            fi\n\n            sleep $sleeping_t\n\n            $req_state  $job_id # to update the state\n            echo state $state\n            xml_state=` grep \"job_id=$job_id\" $list_job_file | awk '{print $4}' `\n            echo xml_state $xml_state\n            start_t=`grep Start_t $job_template | awk -F= '{print $2}'`\n            current_date=`date +%s`\n            progress_t=`expr $current_date - $start_t`\n    done\necho out from the loop\ncommands..\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12819319,"title":"summing values ​​of variables in bash","body":"<p>i'm trying to get all the regular files opened by all the processes in the current session. I have this code</p>\n\n<pre><code>while read pid\ndo\n\n        FILES_ACTUAL=$(lsof -p $pid | grep REG | wc -l)   \n\n\ndone &lt; &lt;(ps -o pid,tt -u $USER | grep $CURRENT_TERMINAL | awk '{print $1}')\n\necho $FILES_ACTUAL\n</code></pre>\n\n<p>but i dont know how to add up, inside the while,  the variable $FILES_ACTUAL..\nI tried to use the awk command, but i couldn´t do it.</p>\n"},{"tags":["java","bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12819154,"title":"How to get java output in shell","body":"<p>I have a shell script <strong>run.sh</strong> which is executing a jar file. </p>\n\n<pre><code>#!/bin/bash\n\"$JAVA_HOME\"/bin/java -jar test.jar $1 $2 $3\n</code></pre>\n\n<p>After doing all the process in java I need to execute a command. So my java method calls a\nshell script by passing it some arguments. </p>\n\n<pre><code>public static void Test(String Arg1, int Arg2, int Arg3, String Arg4) throws IOException, InterruptedException {\n\n            File currentLocation = new File(Test.class.getProtectionDomain().getCodeSource().getLocation().getPath());\n\n            String executeShellScript = currentLocation.getParentFile().toString() + \"/out.sh\";\n\n           //SOME LOGIC\n\n            ProcessBuilder pb = new ProcessBuilder(\"/bin/sh\",executeShellScript,arg1, arg2, arg3, arg4);\n            pb.redirectErrorStream(true);\n\n            Process p = pb.start();\n            BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));\n            String line = null;\n            while ((line = br.readLine()) != null) {\n                System.out.println(line);\n            }\n\n        }\n</code></pre>\n\n<p>And in my out.sh I take in the arguments and execute a command.</p>\n\n<pre><code>#!/bin/bash\n\nIMAGE=$1\nROW=$2\nCOLUMN=$3\nDESTINATION=$4\necho $IMAGE\n</code></pre>\n\n<p>I was wondering if I could execute and process the output of my jar from the same script (run.sh) by getting all the arguments?</p>\n"},{"tags":["bash","filesystems","find"],"answer_count":5,"favorite_count":8,"up_vote_count":15,"down_vote_count":0,"view_count":8436,"score":15,"question_id":4561895,"title":"how to recursively find the latest modified file in a directory?","body":"<p>it seems that ls doesn't sort the files correctly, when doing a recursive call:</p>\n\n<pre><code>ls -altR . | head -n 3\n</code></pre>\n\n<p>how can i find the latest modified file in a directory (including subdirectories)?</p>\n\n<p>see you,</p>\n"},{"tags":["bash","function"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12817072,"title":"Getting unexpected end of file on a base_aliases function","body":"<p>Tearing my hair out trying to work out why this function in my ~/.bash_aliases is causing an error.</p>\n\n<pre><code>function kill-xbmc () { xbmcpid=`ps aux | grep \"[x]bmc\" | awk \"{printf \"%s \",$2}\"`; kill -9 ${xbmcpid} }\n</code></pre>\n\n<p>It keeps producing the same end of file error. I can't seem to see that I'm missing a pair of {} or \"\" marks or anything overly obvious.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12816723,"title":"How to use double quotes in variable to execute it in backquote?","body":"<p>I want to put result of find command to variable - and I have a problem with variable inside command substitution block. Bellow short example:</p>\n\n<pre><code>#!/bin/bash\n\npattern='\"file*\"'\nres=$(find . -maxdepth 1 -type f -name ${pattern}) # doesn't work\n#res=$(find . -maxdepth 1 -type f -name \"file*\") # works\necho $res\n</code></pre>\n\n<p>What's wrong?</p>\n"},{"tags":["arrays","string","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1181,"score":1,"question_id":9293887,"title":"In bash, how do I convert a space-delimited string into an array?","body":"<p>I have a variable which contains a space-delimited string,</p>\n\n<pre><code>line=\"1 1.50 string\"\n</code></pre>\n\n<p>I want to split that string with space as a delimiter and store the result in an array, so that the following:</p>\n\n<pre><code>echo ${arr[0]}\necho ${arr[1]}\necho ${arr[2]}\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>1\n1.50\nstring\n</code></pre>\n\n<p>Somewhere I found a solution which doesn't work:</p>\n\n<pre><code>arr=$(echo ${line})\n</code></pre>\n\n<p>If I run the echo statements above after this, I get:</p>\n\n<pre><code>1 1.50 string\n[empty line]\n[empty line]\n</code></pre>\n\n<p>I also tried</p>\n\n<pre><code>IFS=\" \"\narr=$(echo ${line})\n</code></pre>\n\n<p>with the same result. Can someone help, please?</p>\n"},{"tags":["bash","shell","script"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12322666,"title":"bash script: passing subset of script's arguments to a command","body":"<p>I'm pretty new to shell scripts, so it confuses me a little and I couldn't seem to find a solution to this.  Let's say I have a shell script that can take a number of arguments.  For the sake of example, I could call it as follow:</p>\n\n<p>myscript -a valA -b valB -c valC -d valD some/directory</p>\n\n<p>Now, some of these arguments are for my script itself, while others are for a command that will be called within my script.  So for this case, -a, -d and the directory are for my script, everything else will be for the command.  So I want to do something like this: </p>\n\n<pre><code>args=''\n\nif [ $# == 0 ]\nthen\n    echo \"No arguments found!\"\n    exit 1\nfi\n\nwhile [ \"$2\" ]\ndo\n    if [ $1 == '-a' ]\n    then\n        #some process here\n        shift 2\n    elif [ $1 == '-d' ]\n    then\n        #some process here\n        shift 2\n    else\n        #add the argument to args\n        shift\n    fi\ndone\ndirectory=$1\n\nfor file in $directory/*.txt\ndo \n    #call 'someCommand' here with arguments stored in args + $file\ndone\n</code></pre>\n\n<p>I've tried doing</p>\n\n<pre><code>args=\"$args $1\"\n</code></pre>\n\n<p>Then calling the command doing</p>\n\n<pre><code>someCommand \"$args $file\"\n</code></pre>\n\n<p>but then, someCommand seems to think the whole thing is one single argument.</p>\n\n<p>Also, if you see anything wrong with the rest of my script, feel free to point it out.  It seems to work, but I could very well be missing some corner cases or doing things that may lead to unexpected behaviors.</p>\n\n<p>Thanks!</p>\n"},{"tags":["bash","ubuntu"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12816322,"title":"how to force to expand a concatenation of $path/*","body":"<p>I'm writing a script to remove some files, but I don't understand how asterisk expansions work. These are my attempts to solve my problem:</p>\n\n<pre><code>rm \"$path\"*.txt\nrm \"$path\"/*.txt\nrm \"$path\"{*}.txt\nrm \"$path\"'*'\nrm \"/folder/folder\\ with\\ spaces/*.txt\"\n</code></pre>\n\n<p>I also tried replacing double quotes (<code>\"</code>) with single quotes(<code>'</code>) and backticks (<code>`</code>). After every script computation, I get an error because the <code>*</code> is not substitute. So now I have two questions: </p>\n\n<ol>\n<li>Why is the asterisk not expanded?</li>\n<li>What's the difference between the different quoting character (` \" ' ...) ?</li>\n</ol>\n"},{"tags":["ruby","bash","shell","terminal","rvm"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":121,"score":1,"question_id":12784889,"title":"Ruby versions differ in Terminal & bash","body":"<p>In Terminal, <code>ruby -v</code> gives me:</p>\n\n<pre><code>ruby 1.8.7 (2011-12-28 patchlevel 357) [universal-darwin11.0]\n</code></pre>\n\n<p>But if I type <code>/bin/bash</code> then <code>ruby -v</code> I get:</p>\n\n<pre><code>ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.0]\n</code></pre>\n\n<p>I suspect this is something to do with my PATH config(s). My $PATH variable is different in both the above environments. There are other issues e.g. <code>rvm</code> won't run unless I go into bash mode.</p>\n\n<p>For info, my <code>~/.bashrc</code> contains:</p>\n\n<pre><code>PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; source \"$HOME/.rvm/scripts/rvm\"  # This loads RVM into a shell session.\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12813987,"title":"bash command spanning multiple lines with several lines of comments in-between","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/9522631/bash-how-to-put-line-comment-for-a-multi-line-command\">Bash: How to Put Line Comment for a Multi-line Command</a>  </p>\n</blockquote>\n\n\n\n<p>I would like to do something like this</p>\n\n<pre><code>sudo apt-get install \\\n  #a very long description\n  #of the package\n  #that spans multiple lines\n  pkg1 \\ #maybe I want an inline comment also\n  #another description that\n  #spans multiple lines\n  pkg2\n</code></pre>\n\n<p>Note that I'm not just interested in the <code>apt-get</code> command.</p>\n"},{"tags":["bash","jsp","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12813418,"title":"How to output jsp var to html","body":"<p>I would have thought this straight forward, but it doesn't seem the case.</p>\n\n<p>Aim: I am running a shell script <code>ArgCHeck.sh</code> through my .jsp file. This works fine and I can see the output in my system console.</p>\n\n<p>However when I try and output the line into the browser through HTML, its doesn't seem to work.</p>\n\n<p>I have tried setting the String to <code>Static final String line = \"test\";</code> and this works to output the word test, but not the value I want which is from the other String line.</p>\n\n<p>Its probably something I missed, but any help is appreciate.</p>\n\n<pre><code>&lt;%@page import=\"java.io.*\"%&gt;\n&lt;%@page import=\"java.util.*\"%&gt;\n&lt;%!\n\n%&gt;\n&lt;%\nRuntime r=Runtime.getRuntime();\nProcess p=null;\nString s=null;\nString cmd=\"/tools/scripts/ArgCheck.sh orange\";\n\np=r.exec(cmd);\nInputStreamReader isr=new InputStreamReader(p.getInputStream());\nBufferedReader br=new BufferedReader(isr);\nString line = null;\nwhile((line = br.readLine()) != null){\nSystem.out.println(line);\n}\np.waitFor();\n\n\nSystem.out.println(p.exitValue());\n%&gt;\n&lt;html&gt;\n    &lt;head/&gt;\n    &lt;body&gt;\n        &lt;%\n    // This scriptlet generates HTML output\n    out.println( String.valueOf( line ));\n%&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>--------------------------- Edit -----------------------------------------------------</p>\n\n<p>That's what you get when you cut and paste. I read the code and it was obvious. Time for a break.</p>\n\n<pre><code>&lt;%@page import=\"java.io.*\"%&gt;\n&lt;%@page import=\"java.util.*\"%&gt;\n\n&lt;html&gt;\n&lt;head&gt;\n&lt;head/&gt;\n\n&lt;body&gt;\n\n\n&lt;% \nRuntime r=Runtime.getRuntime();\nProcess p=null;\nString s=null;\nString cmd=\"/tools/scripts/ArgCheck.sh\";\n\np=r.exec(cmd);\nInputStreamReader isr=new InputStreamReader(p.getInputStream());\nBufferedReader br=new BufferedReader(isr);\nString line = null;\nwhile((line = br.readLine()) != null){\nout.println(line);\n}\np.waitFor();\n%&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["python","bash","python-interactive"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":51,"score":4,"question_id":12803403,"title":"python interative mode does not work when reading from std in","body":"<p>Given the following python script....</p>\n\n<pre><code>$ cat readStdin.py \n#!/usr/bin/python\n\nimport sys\n\nvar = \"\".join(sys.stdin.readlines()).rstrip()\nprint var\n</code></pre>\n\n<p>... I get the follwing output:</p>\n\n<pre><code>$ echo hello  | python -i readStdin.py \nhello\n&gt;&gt;&gt; \n$\n</code></pre>\n\n<p>...  in other words it does not hang in the python console, but goes back to bash. Does anyone out there know how to make it stay in the python console???</p>\n"},{"tags":["bash","pattern-matching"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":12809644,"title":"bash - match and select best score for string","body":"<p>I'm experimenting with bash scripts, need help solving this:<br>\ni have the following data in a text file: (test.txt)  </p>\n\n<pre><code>have.a.nice.day.a=42and55  \nhave.a.nice.day.b=0  \nhave.a.nice.day.c=55and67  \ngo.to.sleep.a=111  \ngo.to.sleep.b=2and122and33  \ngo.to.sleep.c=64  \n</code></pre>\n\n<p>i want to separate the strings from their matching scores and the scores from their delimiters (in this case: \"and\")  and pick the string with highest score from each group.<br>\nin this case it would be \"have.a.nice.day.c\" for group \"have.a.nice.day\" and \"go.to.sleep.b\" for group \"go.to.sleep\"<br>\nso i thought best thing to do would be to separate the elements and assign them variables recursively. like so:  </p>\n\n<pre><code>#!/bin/bash\nnames=$(cat test.txt | grep -o -P '.+(?==\\d+)')\n for name in $names\n do\n  echo -n \"$name\"\" \"\n  scores=$(cat test.txt | grep -o -P '(?&lt;='$name'=).+')\n   for scores_group in $scores\n   do\n    single_score=$(echo $scores_group | grep -o -P '\\d+') \n     for score in $single_score\n     do\n      echo -n \"$score\"\" \"\n     done\n     echo\n   done\n done  \n</code></pre>\n\n<p>the output would be:  </p>\n\n<pre><code>have.a.nice.day.a 42 55 \nhave.a.nice.day.b 0 \nhave.a.nice.day.c 55 67 \ngo.to.sleep.a 111 \ngo.to.sleep.b 2 122 33 \ngo.to.sleep.c 64  \n</code></pre>\n\n<p>but now i have no idea how to find the best score for each group.<br>\nthanks</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12809682,"title":"Appending text to column in existing tab-delimited file from another file","body":"<p>In one tab-delimited file, it takes the form of:</p>\n\n<p>ID | integer | integer</p>\n\n<pre><code>1   12345    56789\n2   11111    233323\n3   43423    789798\n</code></pre>\n\n<p>Basically file1.txt is a tab-delimited file where the first column is the primary key of a sql database numbered 1-50.  The other two columns are just numbers that correspond to our data set.</p>\n\n<p>Then in another file I have:\nstring | integer</p>\n\n<pre><code>c1  234234\nc10 2342 \nc11 5234\nc2  987987\nc3  234234\n</code></pre>\n\n<p>In file2.txt , the ID is a string where the digit is the corresponding ID in file1.txt.  I want to append the integer data from file2.txt to file1.txt.<br>\nI want the output to be</p>\n\n<pre><code>1   12345    56789    234234\n2   11111    233323   987987\n3   43423    789798   234234\n</code></pre>\n\n<p>Because of the way the data was originally created in the file2 database, the string is the ID.  So when we order it, it's c1,c10,c11,c12...c2,c20,c21,c22.... etc.  I want to line up the numbers with the first file and append the data.  How can I do this?  I'm pretty noob to bash and only found the paste command if my columns already lined up perfectly.  Thanks.</p>\n"},{"tags":["file","bash","arguments"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":59,"score":3,"question_id":12809334,"title":"Bash: pass arguments from file line-by-line","body":"<p>I am reading arguments from a file, line-by-line, but each line has several arguments. The gist of the code is below</p>\n\n<pre><code>cat file.txt | while read LINE ; do\n    echo -e `./foo.sh \"$COUNT\" \"$LINE\"`\ndone\n</code></pre>\n\n<p>foo.sh</p>\n\n<pre><code>#!/bin/bash\necho \"$2\\t$3\\t$4\"\n</code></pre>\n\n<p>file.txt</p>\n\n<pre><code>0 0 0\n0 0 1\n0 1 0\n0 0 1\n</code></pre>\n\n<p>returned. Note it is not tabbed</p>\n\n<pre><code>0 0 0\n0 0 1\n0 1 0\n0 0 1\n</code></pre>\n\n<p>This is simpler example of what I'm trying to do; my foo.sh is actually making a sql call using the arguments. I know that my foo.sh function works through debugging, so I've narrowed it down to the line reader. Any help with where I'm going wrong?</p>\n"},{"tags":["linux","osx","bash","vim"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":52,"score":3,"question_id":12799741,"title":"Run spell-check on multiple files and display any incorrect words in shell-script","body":"<p>I have a few files I wish to spellcheck. Normally I would open these in <code>vim</code>, run <code>:set spell</code> and do the changes. It's really teadious to open files and manually check if I've misspelt any words since the last check, however. </p>\n\n<p>Is there a way I can run a spell-check on a lot of files and display any incorrectly-spelt words found, along with the filename, so that I can go and change them? I don't want to open every file, check if it's \"clean\", then open the next and repeat. </p>\n\n<p>I can't find any POSIX spellcheck utility. Some Red-Hat based Linux distributions allegedly have <code>spell</code> or similar, but I'd prefer a cross-platform(ish) method. I know <code>vim</code> <em>can</em> spellcheck - is there any way of spellchecking without doing it all manually? It'd be <em>fantastic</em> if I could shell-script a solution. </p>\n\n<p>I'm running <code>OS X</code>, for what it's worth. </p>\n"},{"tags":["bash","scripting","sh"],"answer_count":7,"favorite_count":5,"up_vote_count":10,"down_vote_count":0,"view_count":2796,"score":10,"question_id":4780203,"title":"Deleting lines from one file which are in another file","body":"<p>I have a file <code>f1</code>:</p>\n\n<pre><code>line1\nline2\nline3\nline4\n..\n..\n</code></pre>\n\n<p>I want to delete all the lines which are in another file <code>f2</code>:</p>\n\n<pre><code>line2\nline8\n..\n..\n</code></pre>\n\n<p>I'm unable to think anything. I tried something with <code>cat</code> and <code>sed</code>, which wasn't even close to what I intended. Please help.</p>\n\n<p><b>EDIT</b></p>\n\n<p>Thanks everyone. I used:</p>\n\n<pre><code>grep -v -i -f f2 f1 &gt; f3\n</code></pre>\n\n<p>There were few things that I didn't mentioned:</p>\n\n<ol>\n<li>Some of the lines had <code>\\</code> in it, so I had to replace all <code>\\</code> by <code>\\\\</code> in <code>f2</code>. No big deal.</li>\n<li>The files were windows files, so grep treated them as binaries and I didn't use <code>-x</code> option.</li>\n<li>I wanted a case-insensitive compare, so used <code>-i</code>.</li>\n<li>I wanted to write the op to <code>f3</code>.</li>\n</ol>\n"},{"tags":["bash","globbing","gnu-parallel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12808011,"title":"Using bash -c and Globbing","body":"<p>I'm running gnu-parallel on a command that works fine when run from a bash shell but returns an error when parallel executes it with bash using the -c flag. I assume this has to do with the special globbing expression I'm using.</p>\n\n<pre><code>ls !(*site*).mol2\n</code></pre>\n\n<p>This returns successfully. </p>\n\n<p>With the flag enabled the command fails</p>\n\n<pre><code>/bin/bash -c 'ls !(*site*).mol2'\n/bin/bash: -c: line 0: syntax error near unexpected token `(' \n</code></pre>\n\n<p>The manual only specifies that -c calls for bash to read the arguments for a string, am I missing something?</p>\n\n<p>Edit:\nI should add I need this to run from a gnu-parallel string, so the end resultant command must be runnable by /bin/bash -c \"Some Command\"</p>\n"}]}
