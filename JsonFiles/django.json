{"total":41213,"page":1,"pagesize":100,"questions":[{"tags":["django","django-admin"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":2,"score":0,"question_id":13298573,"title":"Django Admin: How to edit the object on the other end of an inline ManyToMany link on the same change form?","body":"<p>When using Django Admin, I can show ManyToMany links in form of a &lt; select > widget by specifying an inline.  But as far as I can tell, there is no way to either edit the object on the other side of the link from the same form, or show a URL to take me to the linked object.   Either would be fine with me, but I would prefer the former.  </p>\n"},{"tags":["django","django-templates","django-template-tags","django-tables2"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":16,"score":2,"question_id":13289848,"title":"Is it possible to apply a template tag to a <td> when using django-tables2?","body":"<p>I am using django-tables2 to create my table for me. I need to apply a template tag to each of the cells () in one of the columns. It seems like alot of extra effort to go through and create a custom table layout just to apply the template tag to the one column. Is there a way to do this in django-tables2?</p>\n\n<p>Update:</p>\n\n<p>I may not have explained what I'm looking for well enough. I don't believe that will work.  </p>\n\n<p>My code:  </p>\n\n<pre><code>class CombineTable(tables.Table):  \n    build_no = tables.LinkColumn('run', args=[A('release'), A('id')], verbose_name=\"Build\")  \n    flavor = tables.Column(verbose_name=\"Flavor\")  \n    pass_rate_pct = tables.Column(verbose_name=\"Image Pass Rate\")\n</code></pre>\n\n<p>I want each  in pass_rate_pct to use the template tag {{pass_rate_color}} in the class () where pass_rate_color then outputs a particular style based upon what the output of pass_rate_pct is.</p>\n"},{"tags":["python","mysql","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13297690,"title":"Django related_name","body":"<p>I'm trying to do something like:</p>\n\n<pre><code>{% for property in current_listing %}\n    {% for property_image in property.property_images.all %}\n\n    {% endfor %}\n{% endfor %}\n</code></pre>\n\n<p>But I would like something like:</p>\n\n<pre><code>{% for property in current_listing %}\n    {% for property_image in property.property_images.**ORDER_BY('-order')[0]** %}\n\n    {% endfor %}\n{% endfor %}\n</code></pre>\n\n<p>Can understand what I do? How can I do this?</p>\n\n<p>Thx!</p>\n"},{"tags":["python","django","django-templates"],"answer_count":3,"favorite_count":2,"up_vote_count":16,"down_vote_count":0,"view_count":12207,"score":16,"question_id":1408925,"title":"django templates: include and extends","body":"<p>I would like to provide the same content inside 2 different base files. </p>\n\n<p>So I'm trying to do this:</p>\n\n<p>page1.html:</p>\n\n<pre><code>{% extends \"base1.html\" %}\n{% include \"commondata.html\" %}\n</code></pre>\n\n<p>page2.html:</p>\n\n<pre><code>{% extends \"base2.html\" %} \n{% include \"commondata.html\" %}\n</code></pre>\n\n<p>The problem is that I can't seem to use both extends and include.  Is there some way to do that?  And if not, how can I accomplish the above?</p>\n\n<p>commondata.html overrides a block that is specified in both base1.html and base2.html</p>\n\n<p>The purpose of this is to provide the same page in both pdf and html format, where the formatting is slightly different.  The above question though simplifies what I'm trying to do so if I can get an answer to that it will solve my problem.</p>\n"},{"tags":["django","django-forms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13298038,"title":"Custom form and widget for multiple input fields","body":"<p>I stumbled about some problems with a custom form and widget. Be warned, the essay is a little bit longer I am afraid...</p>\n\n<p>Ok, I want to achieve some kind of a catalog order form. There are some catalogs displayed and each has an input field where you can put a number in to say how many catalogs you want to order from that specific catalog. </p>\n\n<p>I know this sounds very like a typical basket, but I wanted to find a solution with one form. So lets get started:</p>\n\n<p>Imagine these models for a catalog order:</p>\n\n<pre><code>class CatalogOrder(models.Model):\n    company=models.CharField(max_length=255, blank=True)\n    name=models.CharField(max_length=255, blank=False)\n    phone=models.CharField(max_length=255, blank=False)\n    email=models.EmailField(blank=False)\n\n    created_at = models.DateTimeField(uto_now_add=True)\n\n    def __unicode__(self):\n        return '%s -- %s -- %s' % (self.name, self.email, self.created_at)\n\nclass OrderedKatalog(models.Model):\n    order = models.ForeignKey(CatalogOrder)\n    catalog = models.ForeignKey(Catalog)\n    quantity = models.IntegerField(max_length=5, null=True, blank=True)\n\n\nclass Catalog(models.Model):\n#imagine some attributes like the next one here\n    title = models.CharField(unique = True, blank=False, max_length = 255)\n</code></pre>\n\n<p>So far so good. I created a form to display the order form like this:</p>\n\n<pre><code>class OrderForm(forms.ModelForm):\n    class Meta:\n        model = CatalogOrder\n    catalogs = MultiIntegerField(widget=MultiInput(type='text', \n               queryset=Catalog.objects.all().order_by('pk')), \n               required=False)\n</code></pre>\n\n<p>I have done the \"MultiIntegerField\" (may sound a little bit strange) like this:</p>\n\n<pre><code>class MultiIntegerField(forms.IntegerField):\n    def to_python(self, value):\n        #lets pretending there would be some processing/validation here, \n        but for now just return the value for testing purposes\n        return value\n</code></pre>\n\n<p>This field has some custom widget like this:</p>\n\n<pre><code>class MultiInput(forms.widgets.Input):\n    def __init__(self, type='text', attrs=None, queryset=None):\n        self.input_type = type\n        self.queryset = queryset\n        super(MultiInput, self).__init__(attrs)\n\n    def render(self, name, value, attrs=None):\n        html='&lt;ul style=\"list-style-type:none;\"&gt;'\n        if value==None:\n            value=[value]\n        for obj, value in map(None, self.queryset, value):\n            if value is None:\n                value = ''\n            final_attrs = self.build_attrs(attrs, type=self.input_type, name=name)\n            if value != '':\n                final_attrs['value'] = force_unicode(self._format_value(value))\n            html += mark_safe(u'&lt;li&gt;/&gt; %s&lt;input%s /&gt;' % (obj, obj.title, flatatt(final_attrs)))\n        return html+'&lt;/ul&gt;'\n\n    def value_from_datadict(self, data, files, name):\n        data = data.getlist(name, None)\n        return data\n</code></pre>\n\n<p>With a view like this:</p>\n\n<pre><code>def catalog_order(request, template_name='catalog_order/test.html'):\n    if request.POST:\n        form=OrderForm(request.POST)\n        if form.is_valid():\n        #do some processing here  \n            return HttpResponseRedirect('/')\n    else:\n        form=OrderForm()\n    return render_to_response(template_name, locals(),\n                                          context_instance=RequestContext(request))\n</code></pre>\n\n<p>and a html template like this:</p>\n\n<pre><code>&lt;body&gt;\n    &lt;form method=\"post\"&gt;\n    {% csrf_token %}\n    {{ form.as_p }}\n    &lt;input type=\"submit\" name=\"submit\" value=\"Go!\" /&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>I get a rendered output like this:</p>\n\n<pre><code>&lt;body&gt;\n    &lt;form method=\"post\"&gt;\n    &lt;div style='display:none'&gt;&lt;input type='hidden' name='csrfmiddlewaretoken' value='8Fjtl8E77fqziWdoaiaPNyr4hJSuHs41' /&gt;&lt;/div&gt;\n    &lt;p&gt;&lt;label for=\"id_company\"&gt;Company:&lt;/label&gt; &lt;input id=\"id_company\" type=\"text\" name=\"company\" maxlength=\"255\" /&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;label for=\"id_name\"&gt;Name:&lt;/label&gt; &lt;input id=\"id_name\" type=\"text\" name=\"name\" maxlength=\"255\" /&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;label for=\"id_telefon\"&gt;phone:&lt;/label&gt; &lt;input id=\"id_telefon\" type=\"text\" name=\"phone\" maxlength=\"255\" /&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;label for=\"id_email\"&gt;Email:&lt;/label&gt; &lt;input id=\"id_email\" type=\"text\" name=\"email\" maxlength=\"75\" /&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;label for=\"id_catalogs\"&gt;Catalogs:&lt;/label&gt; \n    &lt;ul style=\"list-style-type:none;\"&gt;\n    &lt;li&gt;Catalog 1&lt;input type=\"text\" name=\"catalogs\" id=\"id_catalogs\" /&gt;\n    &lt;li&gt;Catalog 2&lt;input type=\"text\" name=\"catalogs\" id=\"id_catalogs\" /&gt;\n    &lt;li&gt;Catalog 3&lt;input type=\"text\" name=\"catalogs\" id=\"id_catalogs\" /&gt;\n    &lt;input type=\"submit\" name=\"submit\" value=\"Go!\" /&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>The problem with this is that when I post this data I get the following list of quantities like this: <code>catalogs:[u'2', u'4', u'1']</code>. As long as I always order the catalogs query in the same order, I can tell which catalog has which quantity ordered. But this feels very clummsy and relies heavily on the right order of catalogs while rendering them and while assining the quantities. Another backdraw is, that I can only validate all input fields at once and not one by one. Also I cant post the id and quantity of a catalog to my view.</p>\n\n<p>Could someone please point me into right direction? Thank you very much for reading and please feel free to ask questions, so I may clarify what I am trying to do here.</p>\n"},{"tags":["python","django","deployment","sentry"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13293261,"title":"Sentry - Create a project from command line","body":"<p>Sentry ( <a href=\"https://www.getsentry.com/\" rel=\"nofollow\">https://www.getsentry.com/</a> ) catches loggings and errors from client applications.</p>\n\n<p>The only way I know of creating a project in Sentry is by manually submitting the form in the Web application interface.</p>\n\n<p>I'm searching for a way to create a project into Sentry from the command line in any way (options, config file) ?</p>\n\n<p>This would be greatly valuable for deployment scripts. Otherwise no automation is possible.</p>\n\n<p>Just found this discussion while Googling around but no answer:</p>\n\n<p><a href=\"https://groups.google.com/d/topic/getsentry/pWglAEHaPUk/discussion\" rel=\"nofollow\">https://groups.google.com/d/topic/getsentry/pWglAEHaPUk/discussion</a></p>\n\n<p>Any idea?</p>\n"},{"tags":["django","flash"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":37,"score":2,"question_id":13184427,"title":"Login sometimes does not work across tabs/windows in django","body":"<p>I wish to login into a django based website from a secondary window.\ni.e. I have a flash file connecting to a django server. On selecting login in the flash file it opens another window (namely the Facebook login popup). Facebook client based login flow is used to log the user in and the user_id obtained from this is sent to django server for identification and logging in.\nI have verified on the server that at this stage, authenticate and login function of django.contrib.auth are called and user.is_authenticated() returns True.</p>\n\n<p>But on the client side in the original window containing the Flash file, the user sometimes remains AnonymouseUser i.e. not logged in. At other times, the user is identified correctly.</p>\n\n<p>On checking the database entries for current sessions, I see that when the user does not get logged in, there are two sessions present, whereas when the user gets logged in there is only one session.</p>\n\n<p>I am not sure why one extra session gets created and how to remedy this.</p>\n\n<p>Note - I am using a custom authentication Backend.</p>\n\n<p><strong>UPDATE</strong>\nI dug into the django system to see what was happening.\nDjango has a mechanism to change the key for a session while maintaining the data.\nWhat happens in my case is that the change in session key takes place twice. Once it occurs as expected during the login. But immediately following this, another request causes the session key to change. This request is not made by me in my client code. \nIt seems the request is for /favicon.ico\nNot sure where this originates from. Any help is appreciated.</p>\n\n<p><strong>UPDATE 2</strong>\nIt definitely seems related to favicon.ico\nNow that I am serving it at root, things function properly after a few refreshes. I think that the problem occured previously as the browser's request for favicon was messing up the session, when it was failing. I will test some more before confirming and closing this issue.</p>\n\n<p><strong>UPDATE 3</strong>\nNot solved. I would really appreciate if someone could point me in the right direction.\nUntil then I will see if I can change the login flow to bypass this mechanism.</p>\n\n<p><strong>UPDATE 4</strong>\nSo after going through some stack traces(which I can share if required), I realized the following. Since Django changes a session id when logging in a user, it creates a situation where one session id gives rise to two session ids as follows.\nRequest 1 - An ajax request causing the login. This request has the session key previously provided by django, say key1. In response the server sends back a new session key, say key2 while deleting key1 from its memory (in my case database)\nRequest 2 - This is the implicit request that is made by the browser after the Request 1 for favicon.ico. (As you might know this request is made by the browser and I cannot control it)\nThis request also comes with the sam original key namely, key1. Since this key is not available in the memory for Django, it creates a new key, key3 and sends back in the  response.</p>\n\n<p>As a result all further requests are made with key3, which django identifies with a new session and the logged in state stored with key2 is lost.</p>\n\n<p>I am not sure whether this is a bug in Django or if this is the intended behavior.\nBut if this is an intended behavior it will create problems when any client makes multiple ajax requests before waiting for previous response and the key-change is triggered.</p>\n\n<p>Having said this, my original problem remains and I will post a solution if and when I find one.</p>\n"},{"tags":["python","django","django-queryset","django-orm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":14,"score":-1,"question_id":13297746,"title":"django queryset from a list or set","body":"<p>I am having list (could be a set or another iterable) of, say, emails strings, and I want to get all of a models' objects that have attribute 'email' matching any of those emails.</p>\n\n<p>I am doing:</p>\n\n<pre><code>from myapp.models import MyModel\nl=['email1@x.com', 'email2@x.com', 'email3@y.com']\nfrom django.db.models import Q\n\nq = Q(email=l[0])\nfor e in l[1:]:\n    q |= Q(email=e)\nMyModel.objects.get(q)\n</code></pre>\n\n<p>Is there a way to do it more elegantly?</p>\n"},{"tags":["django","django-forms","workflow","dynamic-ui"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13294217,"title":"Dynamic UI generation in Django for a workflow","body":"<p>Django based workflow engine + dynamic UI</p>\n\n<p>I am trying to create an app in django that can generate dynamic HTML 5 forms. Here is an example of what I want to achieve</p>\n\n<p>Workflow in pseudocode</p>\n\n<pre><code>Enter User age  //Text box \n    if (age &gt; 21) //radio button\n        {\n            if (US citizen) //radio button\n            {\n                choose applicable categories from employed, graduate, single //check box list\n                if (employed and single)\n                {\n                    Display message 'You are employed and single'\n                }\n                else if ( single and graduate)\n                {\n                    Display message 'You are a single graduate'\n                }\n            }\n            else\n            {\n                Display message 'Sorry, you are not US citizen'\n            }\n        }\n</code></pre>\n\n<p>As you can see, it is a simple workflow. A very easy way of doing this is creating a specific form for each workflow. But what I want to achieve is the ability to generate dynamic UI. So in this example, the first screen can be just a textbox with the caption 'Enter your age'\nThen based on the input, check if the entered value is greater than 21 and if yes, display a radio button which says 'Are you a US citizen?' If the answer is yes, ask the user to choose from a multiple choice list. Based on the selections, go to the appropriate branch</p>\n\n<p>Here is one way I could think of achieving this</p>\n\n<p>Create an xml representation of this workflow</p>\n\n<pre><code>&lt;Workflow&gt;\n    &lt;SingleChoice text=\"Is US Citizen\"&gt;\n        &lt;Choice = \"Yes\"/&gt;\n            &lt;MultipleChoice&gt;\n                &lt;Choice = \"Employed\" value =\"1\"&gt;\n                &lt;Choice = \"Single\" value = \"2\"&gt;\n                &lt;Choice = \"Graduate\" value = \"4\"&gt;\n                &lt;Sum=\"3\" Display \"You are single and Employed\"&gt;\n                &lt;Sum = \"5\" Display \"You are Employed and Graduate\"&gt; \n            &lt;/MultipleChoice&gt;   \n        &lt;Choice = \"No\"/&gt;\n    &lt;/SingleChoice&gt;\n&lt;/Workflow&gt;\n</code></pre>\n\n<p>Now we can use this xml and parse it one level at a time. SingleChoice would convert to a radio button, MultipleChoice would become a checkbox list etc.</p>\n\n<p>Is there a better way of doing this? Using Finite state machines? DB tables? Any workflow engines available in python?  </p>\n"},{"tags":["python","django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13276955,"title":"Get abbreviated column name from Django model field name","body":"<p>I'm having to write a custom where clause for my query.  I need to get the column name as it appears in the Oracle table from the fields in the model.  I'm looping through the model fields in MyModel._meta.fields and getting the name property.  In every case except one the name of the model field is the name of the column.  In the exception, the field name is too long for the column, so Django's syncdb gave the column an abbreviated name.  How do I get the column name?</p>\n\n<p>My field name:  political_contributions_description</p>\n\n<p>The column name: political_contributions_de0ec3</p>\n\n<p>I have tried field.get_attname_column(), as in </p>\n\n<pre><code>for field in MyModel._meta.fields:\n    field.get_attname_column()\n</code></pre>\n\n<p>But that just gives me the following tuple for my field:</p>\n\n<p>('political_contributions_description', 'political_contributions_description')</p>\n\n<p>Btw, an Oracle column over 30 characters will be abbreviated.</p>\n"},{"tags":["python","django","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":36,"score":-3,"question_id":13259216,"title":"simple django code snippet from file upload","body":"<p>sorry for dumb question. </p>\n\n<pre><code>def upload_file(request):\nif request.method == 'POST':\n    form = UploadFileForm(request.POST, request.FILES)\n    if form.is_valid():\n        handle_uploaded_file(request.FILES['file'])\n        return HttpResponseRedirect('/success/url/')\nelse:\n    form = UploadFileForm()\nreturn render_to_response('upload.html', {'form': form})\n</code></pre>\n\n<p>what happens really in the background when i bind the request to the Form? </p>\n"},{"tags":["django","deployment","heroku","settings"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13001031,"title":"Django/Heroku Settings injection?","body":"<p>I want to be able to change my DATABASES['default'] setting to change automatically when I deploy to heroku.  Is there some way to do this?</p>\n\n<p>This looks like what I want\n<a href=\"https://devcenter.heroku.com/articles/django-injection\" rel=\"nofollow\">https://devcenter.heroku.com/articles/django-injection</a>, but it seems like it no longer works as of July 1, 2012.</p>\n"},{"tags":["django"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":9,"score":1,"question_id":13296781,"title":"django javascript localization issue","body":"<p>I'm currently using django 1.3 for my project.\nI'm working on the localization of the project.\nI'm able to localize the python code and templates, but I'm having trouble with the javascript localization.\nI'm getting TemplateSyntaxError message saying that \"Caught NoReverseMatch while rendering: Reverse for ''django.views.i18n.javascript_catalog'' with arguments '()' and keyword arguments '{}' not found.\"\nI put the part of my url.py and the template home.html codes below.\nI checked django.views.i18n.javascript_catalog using python manage.py shell which is fine.</p>\n\n<p>Can you tell me what I'm doing wrong?</p>\n\n<p>Shouldn't url function in the template result in http:///jsi18n/?</p>\n\n<p>Thanks!</p>\n\n<p>Min</p>\n\n<p>=== urls.py ===</p>\n\n<pre><code>js_info_dict = {\n    'domain': 'djangojs',\n    'packages': ('messages',),\n}\n\nurlpatterns = patterns('',\n\n    url(r'^$', 'messages.views.home', name='home'),\n    url(r'^messages/$', include('messages.urls')),\n\n    # Localization\n    url(r'^i18n/', include('django.conf.urls.i18n')),\n    url(r'^jsi18n/$', 'django.views.i18n.javascript_catalog', js_info_dict),\n)\n</code></pre>\n\n<p>=== end ===</p>\n\n<p>=== home.html ===</p>\n\n<pre><code>&lt;body&gt;\n    &lt;script type=\"text/javascript\" src=\"{% url 'django.views.i18n.javascript_catalog' %}\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>=== end ===</p>\n"},{"tags":["django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":7,"score":-1,"question_id":13297058,"title":"Django debug toolbar is suddenly not showing up","body":"<p>Not sure why but debug-toolbar is suddenly not displaying in my browser.</p>\n\n<p>Here is my relevant <code>settings.py</code></p>\n\n<pre><code>DEBUG = True\nTEMPLATE_DEBUG = DEBUG\n\n\nINTERNAL_IPS = [\n    \"127.0.0.1\",\n]\n\ndef show_toolbar(request):\n    return True\nSHOW_TOOLBAR_CALLBACK = show_toolbar\n\nMIDDLEWARE_CLASSES = [\n    \"debug_toolbar.middleware.DebugToolbarMiddleware\",\n]\n</code></pre>\n"},{"tags":["javascript","python","django"],"answer_count":6,"favorite_count":7,"up_vote_count":9,"down_vote_count":0,"view_count":4841,"score":9,"question_id":1445989,"title":"Passing Python Data to JavaScript via Django","body":"<p>I'm using Django and Apache to serve webpages.  My JavaScript code currently includes a data object with values to be displayed in various HTML widgets based on the user's selection from a menu of choices.  I want to derive these data from a Python dictionary.  I think I know how to embed the JavaScript code in the HTML, but how do I embed the data object in that script (on the fly) so the script's functions can use it?</p>\n\n<p>Put another way, I want to create a JavaScript object or array from a Python dictionary, then insert that object into the JavaScript code, and then insert that JavaScript code into the HTML.</p>\n\n<p>I suppose this structure (e.g., data embedded in variables in the JavaScript code) is suboptimal, but as a newbie I don't know the alternatives.  I've seen write-ups of Django serialization functions, but these don't help me until I can get the data into my JavaScript code in the first place.</p>\n\n<p>I'm not (yet) using a JavaScript library like jQuery.</p>\n"},{"tags":["css","django","twitter-bootstrap"],"answer_count":8,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":8580,"score":3,"question_id":9334205,"title":"Twitter Bootstrap 2 drop down menu is not work","body":"<p>Good day!\nI'm trying to implement drop down menu from examples on my site. But it is not work (drop down menu is not showing at all). I included all necessary js and css files, markup is the same as in the docs.</p>\n\n<p>Can you see what I'm doing wrong?</p>\n\n<pre><code>&lt;link type=\"text/css\" href=\"{{ STATIC_URL }}css/bootstrap.css\" rel=\"stylesheet\"&gt;\n\n&lt;script type=\"text/javascript\" src=\"{{ STATIC_URL }}js/jquery-1.7.1.min.js\"&gt;&lt;/script&gt;\n\n&lt;script type=\"text/javascript\" src=\"{{ STATIC_URL }}js/bootstrap.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"{{ STATIC_URL }}js/bootstrap-dropdown.js\"&gt;&lt;/script&gt;\n\n...\n\n&lt;body&gt;\n&lt;div class=\"navbar .navbar-fixed-top\"&gt;\n    &lt;div class=\"navbar-inner\"&gt;\n        &lt;div class=\"container\"&gt;\n            &lt;a class=\"brand\" href=\"/\"&gt;\n                Brand\n            &lt;/a&gt;\n\n            &lt;ul class=\"nav\"&gt;\n                &lt;li class=\"dropdown\"&gt;\n                    &lt;a href=\"#fat-menu\" class=\"dropdown-toggle\" data-toggle=\"dropdown\"&gt;\n                        Аккаунт\n                        &lt;b class=\"caret\"&gt;&lt;/b&gt;\n                    &lt;/a&gt;\n                    &lt;ul class=\"dropdown-menu\" id=\"fat-menu\"&gt;\n                        &lt;li&gt;&lt;a&gt;SubLink&lt;/a&gt;&lt;/li&gt;\n                        &lt;li class=\"divider\"&gt;&lt;/li&gt;\n                        &lt;li&gt;&lt;a&gt;SubLink&lt;/a&gt;&lt;/li&gt;\n                    &lt;/ul&gt;\n                &lt;/li&gt;\n            &lt;/ul&gt;\n\n...\n\n\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Many thanks.</p>\n"},{"tags":["python","django","error-handling","navigation","pinax"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13296185,"title":"How to add a link to the navigation pinax(0.9a2)?","body":"<p>I want to add new links to the standart bootstap theme in pinax. I tried to implement the  in my site:</p>\n\n<pre><code>{% block nav %}\n    {% if user.is_authenticated %}\n        &lt;ul&gt;{% spaceless %}\n            &lt;li id=\"tab_profile\"&gt;&lt;a href=\"{% url profile_detail user.username %}\"&gt;{% trans \"Profile\" %}&lt;/a&gt;&lt;/li&gt;\n            &lt;li id=\"tab_notices\"&gt;&lt;a href=\"{% url notification_notices %}\"&gt;{% trans \"Notices\" %}{% if notice_unseen_count %} ({{ notice_unseen_count }}){% endif %}&lt;/a&gt;&lt;/li&gt;\n        {% endspaceless %\n            &lt;li id=\"tab_first\"&gt;\n                &lt;a href=\"#\"&gt;First Link&lt;/a&gt;\n            &lt;/li&gt;\n        }&lt;/ul&gt;\n    {% endif %}\n{% endblock %}\n</code></pre>\n\n<p>but I get an error:</p>\n\n<blockquote>\n  <p>TemplateSyntaxError at /</p>\n  \n  <p>Invalid block tag: 'endif', expected 'endspaceless'</p>\n</blockquote>\n\n<p>Therefore, how to add a new link to the navbar?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13295649,"title":"Multiple Database Django","body":"<p>I need to connect my app to multiple database, but I'm not having any success.</p>\n\n<p>After I've defined my databases in settings.py, what do I have to do?\nI don't know if I did the right thing, but I created a routers.py and added the following code:</p>\n\n<pre><code>class DBRouter(object):\n     \"\"\"A router to control all database operations on models in\n     the contrib.auth application\"\"\"\n\n     def db_for_read(self, model, **hints):\n         if hasattr(model,'teste'):\n            return model.connection_name\n         return None\n\n     def db_for_write(self, model, **hints):\n        if hasattr(model,'teste'):\n            return model.connection_name\n        return None\n\n     def allow_syncdb(self, db, model):\n        if hasattr(model,'teste'):\n            return model.connection_name == db\n        return db == 'default'\n</code></pre>\n\n<p>Do I have to do a syncdb? What do I have to do now?</p>\n"},{"tags":["django","django-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4,"score":0,"question_id":13295603,"title":"decide where to go to after connecting with django-allauth","body":"<p>After connecting an account with a social app using django-allauth the user is redirected to <code>accounts/social/connections</code>. How can I change this behavior?</p>\n"},{"tags":["python","django","django-models","django-admin"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":438,"score":6,"question_id":3042079,"title":"How to display total record count against models in django admin","body":"<p>Is there a neat way to make the record/object count for a model appear on the main model list in the django admin module?</p>\n\n<p>I have found techniques for showing counts of related objects within sets in the list_display page (and I can see the total in the pagination section at the bottom of the same), but haven't come across a neat way to show the record count at the model list level.</p>\n"},{"tags":["python","django","wsgi","psycopg2"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":517,"score":2,"question_id":7561221,"title":"\"undefined symbol: _PyObject_NextNotImplemented\" error when loading psycopg2 module","body":"<pre><code>environment: Ubuntu 10.04 LTS\nbuild Python 2.7.2 with ./configure --with-zlib --enable-unicode=ucs4\npostgresql-9.0\nwsgi\nDjango 1.3\nvirtualenv\napache\n</code></pre>\n\n<p>I am trying to build Ubuntu Django App Server. The installation completed with no error message. The exact installation method was successful with Ubuntu 11.04. \nHowever, when installation is completed on Ubuntu 10.04 and try to load <code>psycopg2</code> from Django, I got the following error (I did not get this error on 11.04): </p>\n\n<pre><code>File \"/home/nreeves/venv/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py\", line 24, in &lt;module&gt;\nraise ImproperlyConfigured(\"Error loading psycopg2 module: %s\" % e)\nImproperlyConfigured: Error loading psycopg2 module: /home/nreeves/venv/lib/python2.7/site-packages/psycopg2/_psycopg.so: undefined symbol: _PyObject_NextNotImplemented\n</code></pre>\n\n<p>My guess is that some linkage to library is incorrect... but I have no idea where to start... I have a following output - not sure if this will help you help me...</p>\n\n<pre><code>$ ldd /home/nreeves/venv/lib/python2.7/site-packages/psycopg2/_psycopg.so\n\nlinux-gate.so.1 =&gt;  (0xb77da000)\nlibpq.so.5 =&gt; /usr/lib/libpq.so.5 (0xb7788000)\nlibpthread.so.0 =&gt; /lib/tls/i686/cmov/libpthread.so.0 (0xb776f000)\nlibc.so.6 =&gt; /lib/tls/i686/cmov/libc.so.6 (0xb7614000)\nlibssl.so.0.9.8 =&gt; /lib/i686/cmov/libssl.so.0.9.8 (0xb75cc000)\nlibcrypto.so.0.9.8 =&gt; /lib/i686/cmov/libcrypto.so.0.9.8 (0xb747a000)\nlibkrb5.so.3 =&gt; /usr/lib/libkrb5.so.3 (0xb73c9000)\nlibcom_err.so.2 =&gt; /lib/libcom_err.so.2 (0xb73c5000)\nlibgssapi_krb5.so.2 =&gt; /usr/lib/libgssapi_krb5.so.2 (0xb7395000)\nlibldap_r-2.4.so.2 =&gt; /usr/lib/libldap_r-2.4.so.2 (0xb734e000)\n/lib/ld-linux.so.2 (0xb77db000)\nlibdl.so.2 =&gt; /lib/tls/i686/cmov/libdl.so.2 (0xb734a000)\nlibz.so.1 =&gt; /lib/libz.so.1 (0xb7335000)\nlibk5crypto.so.3 =&gt; /usr/lib/libk5crypto.so.3 (0xb7311000)\nlibkrb5support.so.0 =&gt; /usr/lib/libkrb5support.so.0 (0xb7308000)\nlibkeyutils.so.1 =&gt; /lib/libkeyutils.so.1 (0xb7304000)\nlibresolv.so.2 =&gt; /lib/tls/i686/cmov/libresolv.so.2 (0xb72f0000)\nliblber-2.4.so.2 =&gt; /usr/lib/liblber-2.4.so.2 (0xb72e3000)\nlibsasl2.so.2 =&gt; /usr/lib/libsasl2.so.2 (0xb72cb000)\nlibgnutls.so.26 =&gt; /usr/lib/libgnutls.so.26 (0xb722f000)\nlibtasn1.so.3 =&gt; /usr/lib/libtasn1.so.3 (0xb721e000)\nlibgcrypt.so.11 =&gt; /lib/libgcrypt.so.11 (0xb71ab000)\nlibgpg-error.so.0 =&gt; /lib/libgpg-error.so.0 (0xb71a6000)\n</code></pre>\n\n<p>And the following command outputs: </p>\n\n<pre><code>$ ls -l  /usr/lib/libpq*\n\n-rw-r--r-- 1 root root 224904 2011-09-26 06:33 /usr/lib/libpq.a\nlrwxrwxrwx 1 root root     12 2011-09-26 10:51 /usr/lib/libpq.so -&gt; libpq.so.5.4\nlrwxrwxrwx 1 root root     12 2011-09-26 10:51 /usr/lib/libpq.so.5 -&gt; libpq.so.5.4\n-rw-r--r-- 1 root root 150976 2011-09-26 06:33 /usr/lib/libpq.so.5.4\n</code></pre>\n\n<p>To me it appears that all is correct. Any advice would be appreciated.</p>\n"},{"tags":["python","django","database-design"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":1,"view_count":42,"score":4,"question_id":13276361,"title":"How to specify uniqueness across a relationship in Django","body":"<p>I'm trying to represent some movie ratings data in Django. Here is a simplified version of my models that illustrates my problem:</p>\n\n<pre><code>class RatingSystem(models.Model):\n    \"\"\"This denotes a rating authority and territory in which they operate\"\"\"\n    name = models.CharField(max_length=16)\n    territory = models.CharField(max_length=32)\n\nclass Rating(models.Model):\n    \"\"\"This represents a rating designation used by a rating system.\"\"\"\n    code = models.CharField(max_length=16)\n    description = models.TextField()\n    system = models.ForeignKey(RatingSystem)\n\nclass FilmRating(models.Model):\n    \"\"\"This is a rating for a film and the reason why it received the rating.\n\n    Each film can have many ratings, but only one per rating system.\n    \"\"\"\n    rating = models.ForeignKey(Rating)\n    film = models.ForeignKey('Film')\n    reason = models.TextField()\n\nclass Film(models.Model):\n    \"\"\"Data for a film.\"\"\"\n    title = models.CharField(max_length=64)\n    synopsis = models.TextField()\n    ratings = models.ManyToManyField(Rating, through=FilmRating)\n</code></pre>\n\n<p>As the comments indicate, each Film can have multiple ratings, but only one rating per rating system. For instance, a film cannot be rated both 'R' and 'PG' by the MPAA. However, it can be rated 'R' by the MPAA and '15' by the BBFC.</p>\n\n<p>I'm struggling to formalize this constraint in Django. I'd like to do:</p>\n\n<pre><code>unique_together = ('film', 'rating__system')\n</code></pre>\n\n<p>in <code>FilmRating</code> but following a relationship like that doesn't seem to be allowed.  If I were using pure SQL, I would make <code>code</code> and <code>system</code> a composite primary key in <code>Rating</code>, then make a unique constraint on <code>system</code>, and <code>film</code> in <code>FilmRatings</code>. Unfortunately, Django does not support composite keys. I've considered overriding the <code>save()</code> method of <code>FilmRating</code>, but I'd prefer to have the constraint at the database level if possible.</p>\n\n<p>Anyone have any idea how to do this? Restructuring the tables would be fine too if it would help.</p>\n"},{"tags":["django","apache"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12660079,"title":"Can't get Apache to serve django admin static files","body":"<p>I'm trying to deploy Django to apache but can't get it to serve my static admin files. It seems to be looking for them under /var/www/static and I can't seem to be able to change that.</p>\n\n<p>The admin site seem to be working except for styling. I get a title and a log in form. My django app is working too. It's the static files for the admin that aren't served.</p>\n\n<p>Using Django 1.4.1.</p>\n\n<p>The files are under /usr/local/lib/python2.7/dist-packages/django/contrib/admin/static and linked to from /home/dutt/vaccapp/backend/static/admin.</p>\n\n<p>The apache error log says this</p>\n\n<pre><code>[Sun Sep 30 10:57:20 2012] [error] [client 192.168.1.10] File does not exist: /var/www/home, referer: http://dathui.example.com/vaccapp/admin/\n[Sun Sep 30 10:57:20 2012] [error] [client 192.168.1.10] File does not exist: /var/www/home, referer: http://dathui.example.com/vaccapp/admin/\n</code></pre>\n\n<p>But I'm not sure how to change it.</p>\n\n<p>In my django site config I have</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\nServerAdmin me@host.com\n\n    ServerRoot \"/home/dutt/vaccapp\"\n    DocumentRoot \"/home/dutt/vaccapp\"\n&lt;Directory /&gt;\n    Options FollowSymLinks\n    AllowOverride None\n&lt;/Directory&gt;\n&lt;Directory /home/dutt/vaccapp/&gt;\n    Options Indexes FollowSymLinks MultiViews\n    AllowOverride None\n    Order allow,deny\n    allow from all\n&lt;/Directory&gt;\n\nAlias /static/ \"/home/dutt/vaccapp/backend/static/\"\n&lt;Directory \"/usr/local/lib/python2.7/dist-packages/django/contrib/admin/static\"&gt;\n    Order allow,deny\n    Options Indexes\n    Allow from all\n    IndexOptions FancyIndexing\n&lt;/Directory&gt;\n</code></pre>\n\n<p>ServerRoot is not set in apache2.conf.</p>\n\n<p>From my settings.py</p>\n\n<pre><code>STATIC_ROOT = '/home/dutt/vaccapp/backend/'\nSTATIC_URL = '/static/'\n</code></pre>\n\n<p>Nothing added to STATICFILES_DIRS.</p>\n\n<p>This is added to my apache2.conf</p>\n\n<pre><code>WSGIScriptAlias /vaccapp /home/dutt/vaccapp/backend/wsgi.py\nWSGIPythonPath /home/dutt/vaccapp\n\n&lt;Directory /home/dutt/vaccapp&gt;\n&lt;Files wsgi.py&gt;\nOrder deny,allow\nAllow from all\n&lt;/Files&gt;\n&lt;/Directory&gt;\n</code></pre>\n"},{"tags":["django","django-admin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13163167,"title":"How to get a Django admin form field for a models.DecimalField with value 0 not to use E notation","body":"<p>We use django admin as a client-facing backend, so we need to make it user friendly.  I have a model with a bunch of DecimalFields representing nutritional data.  </p>\n\n<p>The fields all look like this:</p>\n\n<pre><code>g_carbs = DecimalField(max_digits=13, decimal_places = 8, null=True, blank=True)\n</code></pre>\n\n<p>If the field is left blank, or if a non-zero value is provided, the admin form looks and works great. For example, for a non-blank, non-zero value like 10.5, it displays something like <code>10.50000000</code>, which is fine.</p>\n\n<p>The problem is that for any 0 values, the form field displays <code>0E-8</code>  which, although technically correct, is not going to cut it for my clients, who are definitely not scientists or engineers for the most part and are unfamiliar with E notation. </p>\n\n<p>I am not using a custom form or any custom admin tricks.  Its just what gets auto-rendered by django admin for that model. I'm considering submitting a ticket to django for this, but in the mean time is there something I can do with a custom form or something to remedy this problem?</p>\n"},{"tags":["django","validation"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":237,"score":4,"question_id":3299474,"title":"Can I count on the order of field validation in a Django form?","body":"<p>I have a Django form with a username and email field.  I want to check the email isn't already in use by a user:</p>\n\n<pre><code>def clean_email(self):\n    email = self.cleaned_data[\"email\"]\n    if User.objects.filter(email=email).count() != 0:\n        raise forms.ValidationError(_(\"Email not available.\"))\n    return email\n</code></pre>\n\n<p>This works, but raises some false negatives because the email might already be in the database for the user named in the form.  I want to change to this:</p>\n\n<pre><code>def clean_email(self):\n    email = self.cleaned_data[\"email\"]\n    username = self.cleaned_data[\"username\"]\n    if User.objects.filter(email=email,  username__ne=username).count() != 0:\n        raise forms.ValidationError(_(\"Email not available.\"))\n    return email\n</code></pre>\n\n<p>The Django docs say that all the validation for one field is done before moving onto the next field.  If email is cleaned before username, then <code>cleaned_data[\"username\"]</code> won't be available in <code>clean_email</code>.  But the docs are unclear as to what order the fields are cleaned in.  I declare username before email in the form, does that mean I'm safe in assuming that username is cleaned before email?  </p>\n\n<p>I could read the code, but I'm more interested in what the Django API is promising, and knowing that I'm safe even in future versions of Django.</p>\n"},{"tags":["python","django","django-orm"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":19,"score":2,"question_id":13293068,"title":"Django asymettrical self through relationship query","body":"<p>I have the following - simplified - models:</p>\n\n<pre><code>class User(models.Model):\n    following = models.ManyToManyField(\"self\", through='Following', symmetrical=False)\n\nclass Following(models.Model):\n    from_user = models.ForeignKey(User, related_name='from_user')\n    to_user = models.ForeignKey(User, related_name='to_user')\n    status = models.IntegerField()\n</code></pre>\n\n<p>The status is 0 for pending, 1 for following\nLet user be a User. I would like to get all the followed users of user</p>\n\n<p>I can do</p>\n\n<pre><code>user.following.all()\n</code></pre>\n\n<p>to get all the users user is following (pending relationships OR really follow)</p>\n\n<p>or</p>\n\n<pre><code>Following.objects.filter(from_user=user, status=1)\n</code></pre>\n\n<p>to get all the Following objects with User user and real friendship</p>\n\n<p>But how can I get all the User objects for user and status=1 ?\nI can't seem to find a way</p>\n\n<p>Thank you !</p>\n"},{"tags":["django","django-models","django-queryset","django-orm"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13293335,"title":"Django Model QuerySet Group By Specific Fields","body":"<p>Considering this model &amp; data:</p>\n\n<p>Ad_id + Date = primary key</p>\n\n<pre><code>    Ad_id  date   clicks\n------------------------------\n      3     8/10/12   124\n      3     7/10/12   433\n      3     6/10/12    99\n      4     8/10/12    23\n      4     7/10/12    80\n</code></pre>\n\n<p>I'm trying to group by ad_id to return the sum of the over all clicks.</p>\n\n<p>in sql terms:</p>\n\n<pre><code>select Ad_id, date, sum(clicks) from ads group by Ad_id\n</code></pre>\n\n<p>The problem is the Django automatically do the group by for each field in the model, so the group by is not really working (because each row is unique).</p>\n\n<p><strong>Solutions I've already checked:</strong></p>\n\n<hr>\n\n<p>I know it is possible to do something like this:</p>\n\n<pre><code>Ad.objects.values('ad_id').annotate(clicks_sum=Sum('clicks'))\n</code></pre>\n\n<p>But it is not good as it doesn't return the Ad Model, but a dictionary.</p>\n\n<p>I can't use also raw SQL because it is not chain-able </p>\n\n<p>Also I tried to set</p>\n\n<pre><code>MyQuerySet.group_by = ['ad_id']\n</code></pre>\n\n<p>Not working too..</p>\n\n<p>So I really need to group by only by the fields I need, and that the result will be an Ad Model.</p>\n"},{"tags":["javascript","django","json","d3.js"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13293174,"title":"Direct data input from Django for a D3 graph","body":"<p>It seems all the D3 example graphs take an external .csv or .tsv file as input data. Is there any way to modify the code to take data from a variable in Django. Suppose {{ data }} is in JSON format, how do you implement this in a graph such as <a href=\"http://bl.ocks.org/3885304\" rel=\"nofollow\">http://bl.ocks.org/3885304</a> or <a href=\"http://bl.ocks.org/3887051\" rel=\"nofollow\">http://bl.ocks.org/3887051</a> ? I'm trying to avoid always writing a .csv file.</p>\n"},{"tags":["django","django-registration"],"answer_count":2,"favorite_count":15,"up_vote_count":15,"down_vote_count":0,"view_count":3059,"score":15,"question_id":6364623,"title":"Django-Registration: Email as username","body":"<p>How do I use emails instead of username for authentication using django-registration. </p>\n\n<p>Further how do I enforce this change once i have already installed the registration module.</p>\n\n<p>Do i edit like the solution here <a href=\"http://stackoverflow.com/questions/3690269/anyone-knows-a-good-hack-to-make-django-registration-use-emails-as-usernames\">Anyone knows a good hack to make django-registration use emails as usernames?</a> in the lib folder? </p>\n"},{"tags":["django"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13283253,"title":"Just upgraded to Django 1.4 and getting error with messages","body":"<p>I just upgraded to Django 1.4 and it has broken a couple things including messaging.</p>\n\n<p>Here's the error I get when trying to change a avatar:</p>\n\n<pre><code>'User' object has no attribute 'message_set'\nException Location: /Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/utils/functional.py in inner, line 185\n</code></pre>\n\n<p>Traceback:</p>\n\n<pre><code>File \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/core/handlers/base.py\" in get_response\n  111.                         response = callback(request, *callback_args, **callback_kwargs)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/contrib/auth/decorators.py\" in _wrapped_view\n  20.                 return view_func(request, *args, **kwargs)\nFile \"/Users/nb/Desktop/spicestore/apps/avatar/views.py\" in change\n  76.             request.user.message_set.create(\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/utils/functional.py\" in inner\n  185.         return func(self._wrapped, *args)\n\nException Type: AttributeError at /avatar/change/\nException Value: 'User' object has no attribute 'message_set'\n</code></pre>\n\n<p>Also, messaging no longer works on the site. What are the changes in Django 1.4 that could be causing this and has anyone overcome a similar issue?</p>\n"},{"tags":["django","mongodb","dotcloud"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13293299,"title":"dotCloud django+mongodb app push","body":"<p>I create application with django and mongodb from this tutor</p>\n\n<p><a href=\"http://docs.dotcloud.com/0.9/tutorials/python/django-mongodb/\" rel=\"nofollow\">http://docs.dotcloud.com/0.9/tutorials/python/django-mongodb/</a></p>\n\n<p>but when i push my app in dotcloud , it writes that Build completed sucessfully , Application build is done . but after that it writes </p>\n\n<p>\"20:15:44: [db] Using default scaling for service db (1 instance(s))\" and my push operation hangs </p>\n\n<p>In dotcloud dashboard log writes that  </p>\n\n<p>\"Thu Nov 8 16:24:13 [rsStart] replSet can't get local.system.replset config from self or any seed (EMPTYCONFIG)\"</p>\n\n<p>Can anyone tell me whats wrong ? </p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":13238433,"title":"Django - Complex query","body":"<p>Assuming i have two models:</p>\n\n<pre><code>class profile(models.Model):\n    #some fields here\n\nclass ratings(models.Model):\n    profile = models.ForeignKey(profile)\n    category = models.IntegerField()\n    points = models.IntegerField()\n</code></pre>\n\n<p>Assuming following state of MySQL table:</p>\n\n<pre><code>profile    |    category    |    points\n   1                1               10\n   1                1               10\n   1                2               10\n   1                3               0\n   1                4               10\n   1                4               10\n   1                4               10\n   1                5               0\n</code></pre>\n\n<p>I have following values in my POST data:</p>\n\n<pre><code>category_1_avg_val = 7\ncategory_2_avg_val = 5\ncategory_3_avg_val = 5\ncategory_4_avg_val = 7\ncategory_5_avg_val = 9\n</code></pre>\n\n<p>Now i want to get all profiles whose (average of points) (group by category) >= (avg values of category coming in post)</p>\n\n<p>I tried to do this one by one as</p>\n\n<pre><code>objects = profile.objects.filter(\n    ratings__category=1) \\\n    .annotate(avg_points=Avg('ratings__points'))\\\n    .filter(avg_points__gte=category_1_avg_val)\n\n\nobjects = objects.filter(\n    ratings__category=2) \\\n    .annotate(avg_points=Avg('ratings__points'))\\\n    .filter(avg_points__gte=category_2_avg_val)\n</code></pre>\n\n<p>But this is wrong I think. Please help me out. If return is a queryset that would be great.</p>\n"},{"tags":["python","django","performance","django-templates","many-to-many"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1558,"score":3,"question_id":1122605,"title":"Django ManyToMany Template rendering and performance issues","body":"<p>I've got a django model that contains a manytomany relationship, of the type,</p>\n\n<pre><code>class MyModel(models.Model):\n  name = ..\n  refby = models.ManyToManyField(MyModel2)\n  ..\n\nclass MyModel2(..):\n  name = ..\n  date = ..\n</code></pre>\n\n<p>I need to render it in my template such that I am able to render all the mymodel2 objects that refer to mymodel. Currently, I do something like the following,</p>\n\n<pre><code>{% for i in mymodel_obj_list %}\n  {{i.name}}\n  {% for m in i.refby.all|dictsortreversed:\"date\"|slice:\"3\" %}\n    {{.. }}\n  {% endfor %}\n  &lt;div&gt; &lt;!--This div toggles hidden/visible, shows next 12--&gt;\n   {% for n in i.refby.all|dictsortreversed:\"date\"|slice:\"3:15\" %}\n     {{.. }}\n   {% endfor %}\n  &lt;/div&gt;\n{% endfor %}\n</code></pre>\n\n<p>As the code suggests, I only want to show the latest 3 mymodel2 objects, sorted in reverse order by date, although the next 12 do get loaded.</p>\n\n<p>Is this a very inefficient method of doing so? (Given that results for the refby.all could be a few 100s, and the total no of results in \"mymodel_obj_list\" is also in 100s - I use a paginator there).</p>\n\n<p>In which case, whats the best method to pre-compute these refby's and render them to the template? Should I do the sorting and computation in the view, and then pass it? I wasn't sure how to do this in order to maintain my pagination.</p>\n\n<p>View code looks something like,</p>\n\n<pre><code>obj_list = Table.objects.filter(..) # Few 100 records\npl = CustomPaginatorClass(obj_list...)\n</code></pre>\n\n<p>And I pass the pl to the page as mymodel_obj_list.</p>\n\n<p>Thanks!</p>\n"},{"tags":["javascript","jquery","django","django-facebook"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13292729,"title":"Display different things for different elements in the same loop. Django","body":"<p>In my django app I display the list of the user's facebook friends and I allow him to invite those friends, individually, thanks to a button \"Invite\". (I use django-facebook)</p>\n\n<p>What I would like to do is to display a button \"already invited\" instead of \"Invite\" once the user has invited his friend.</p>\n\n<p>The thing is that in my html, I use a loop to display the list:</p>\n\n<pre><code> {% for group in friend_groups %}\n  {% for friend in group %}\n    &lt;p&gt;{{ friend.name }}&lt;a href='#' onclick=\"FacebookInviteFriends('{{friend.uid}}');\"&gt; Invite &lt;/a&gt;&lt;/p&gt;\n  {% endfor %}\n  {% endfor %}\n</code></pre>\n\n<p>And here is my js function:</p>\n\n<pre><code>      FB.init({\n      appId: MYAPPID,\n      frictionlessRequests: true,\n      cookie:true,\n      status:true,\n      xfbml:true\n      });\n\n\n\n      function FacebookInviteFriends(userid)\n      {\n      FB.ui({\n      method: 'apprequests',\n      message: 'Mon message',\n      to: userid\n      });\n      }\n</code></pre>\n\n<p>Do you have any idea on how I could do that?</p>\n\n<p>Any help would be welcome,</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13290514,"title":"Unable to run django custom command","body":"<p>I've create a command in app/management/commands and this command was working fine. I'm unable to run this command now. I'm getting the following error:</p>\n\n<p>Unknown command: 'my_custom_command_name'</p>\n\n<p>I'm using a virtual env. I don't see this in list of commands when I type <code>pythong manage.py</code>. I've this app installed in my settings and It was working previously </p>\n"},{"tags":["python","django","concurrency"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12612576,"title":"How to make concurrent web service calls from a Django view?","body":"<p>I have a Django view which needs to retrieve search results from multiple web services, blend the results together, and render them. I've never done any multithreading in Django before. What is a modern, efficient, safe way of doing this?</p>\n\n<p>I don't know anything about it yet, but <a href=\"http://www.gevent.org/\" rel=\"nofollow\">gevent</a> seems like a reasonable option. Should I use that? Does it play well with Django? Should I look elsewhere?</p>\n"},{"tags":["python","mysql","django"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":44,"score":2,"question_id":13291576,"title":"Running django project without django installation","body":"<p>I have developed a project with <strong>Django framework(python and mysql DB)</strong> in Linux OS(Ubuntu 12.04), I want to run this project in localhost in <strong>another machine</strong> with Linux(Ubuntu 12.04) without installing Django here, is it possible <strong>run a django project without django installation.</strong> Is there any way to run so?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["django","django-forms"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":22,"score":2,"question_id":13279762,"title":"django field/widget for multiple values","body":"<p>I seriously can't figure out how to manage to do this.</p>\n\n<p>I would like to use django forms to validate the following (unknown number of <code>aname</code>):</p>\n\n<pre><code>&lt;input type=\"hidden\" name=\"aname\" value=\"someJSONdump1\"/&gt;\n&lt;input type=\"hidden\" name=\"aname\" value=\"someJSONdump2\"/&gt;\n&lt;input type=\"hidden\" name=\"aname\" value=\"someJSONdump3\"/&gt;\n&lt;input type=\"hidden\" name=\"aname\" value=\"someJSONdump4\"/&gt;</code></pre>\n\n<p>and on the django side, I'm calling:</p>\n\n<pre><code>form = myforms.MyForm(request.POST, request.FILES)\nif (form.is_valid()):\n    # do something\nelse:\n    # redisplay the form</code></pre>\n\n<p>How do I define <code>MyForm</code> to allow me to validate each <code>aname</code> and also, when in error, the widget to redisplay the above <code>&lt;input&gt;s</code>?</p>\n\n<p>I can't figure out how to use the <a href=\"https://docs.djangoproject.com/en/dev/ref/forms/fields/#multivaluefield\" rel=\"nofollow\">MultiValueField</a> or even if it's the right thing to use. It seems to be a solution when you know how many fields you have?</p>\n\n<p>Using <code>clean_aname()</code> in the form is no help as <code>self.cleaned_data.get('aname')</code> is only the last value.</p>\n\n<p>Without the form, I would use something like <code>request.POST.getlist('aname')</code>, but I would like to avoid this if I can do it with <code>django.forms</code>.</p>\n\n<p>Thanks for your help.</p>\n\n<hr>\n\n<p><b><strong><em>EDIT</em></strong></b></p>\n\n<p>I've left aside that I was defining more fields from a ModelForm. I think this might have some effects with formset. Here is where I am at... Is this solution considered to be \"Django forms\" compatible?</p>\n\n<pre><code>class MyField(forms.Field):\n    widget = MyWidget\n\n    def to_python(self, value):\n        if (isinstance(value, basestring)):\n            value = [value]\n        return [json.loads(v) for v in value]\n\nclass MyForm(forms.ModelForm):\n    class Meta:\n        model = models.MyModel\n\n    aname = MyField()\n\n    def clean(self):\n        cleaned_data = super(MyForm, self).clean()\n        cleaned_data['aname'] = self.fields['aname'].clean(self.data.getlist('aname'))\n        return cleaned_data</code></pre>\n\n<p>Now, I have to define <code>MyWidget</code> to allow me to display a list of <code>&lt;input type=\"hidden\"&gt;</code>, but I would like to know if this solution sound acceptable. Maybe I could have done this in <code>clean_aname()</code> too.</p>\n"},{"tags":["python","django","google-app-engine"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13276847,"title":"Getting django's humanize working on App Engine","body":"<p>I'm trying to add commas to floats for display to end users of my application on GAE. The numbers come from json and are part of a 10 item query with 2 times each (aka 20 numbers per page view). For eg.</p>\n\n<pre><code>\"total_reach\": 276160.0, \"total_reach\": 500160.0 \n</code></pre>\n\n<p>I'm using the python GAE SDK 1.7.3 template system and simply want to display the numbers to the end user with commas e.g.: 276,160 and 500,160. Note, I am using the default webbapp2 and standard templates (from google.appengine.ext.webapp import template) which, as I understand it, is based on Django.</p>\n\n<p>The Django floatformat works great to get rid of the decimal, but now I need to add the comma. Django's humanize looks perfect with its intcomma filter. However, I simply can't figure out how to enable it. I suspect its crazy simple and I'm being dense (and am noob to python) - but I'm out of ideas.</p>\n\n<p>While I tried a range of things, the most recent and promising was (based on my understanding of <a href=\"http://code.google.com/p/googleappengine/source/browse/trunk/lib/django/django/contrib/humanize/templatetags/humanize.py?r=41\" rel=\"nofollow\">the source</a>):</p>\n\n<pre><code>from google.appengine.ext.webapp.template import register_template_library\nregister_template_library('django.contrib.humanize.templatetags.humanize')\n</code></pre>\n\n<p>which gave me the following 500:</p>\n\n<pre><code>No module named django.contrib.humanize.templatetags\n</code></pre>\n\n<p>but it seems to be there in the source.</p>\n\n<p>I'm very much at a loss. I've searched around and found items like <a href=\"http://stackoverflow.com/questions/901121/how-to-use-inbulit-django-templatetags-in-google-app-engine\">this</a> which just didn't work and seemed to be aimed at webapp (as opposed to webapp2). Help and thanks!</p>\n"},{"tags":["python","database","django","performance"],"answer_count":5,"favorite_count":3,"up_vote_count":9,"down_vote_count":0,"view_count":3061,"score":9,"question_id":447117,"title":"Django: Increment blog entry view count by one. Is this efficient?","body":"<p>I have the following code in my index view.</p>\n\n<pre><code>latest_entry_list = Entry.objects.filter(is_published=True).order_by('-date_published')[:10]\nfor entry in latest_entry_list:\n    entry.views = entry.views + 1\n    entry.save()\n</code></pre>\n\n<p>If there are ten (the limit) rows returned from the initial query, will the save issue 10 seperate updated calls to the database, or is Django \"smart\" enough to issue just one update call?</p>\n\n<p>Is there a more efficient method to achieve this result?</p>\n"},{"tags":["django","django-templates"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":104,"score":-1,"question_id":11795381,"title":"Flexible block positioning in Django?","body":"<p>In <code>Drupal</code> you could choose in which \"region\" of your site you want your block displayed. You did not have to modify any <code>php/html</code> code in order to achieve this.\nCan such a thing be achieved with <code>Django</code>, and if yes, how?</p>\n\n<p>By block I understand a piece of <code>html</code> output that doesn't have it's own URL and gets displayed along side the main data. (for example a search box or a poll)</p>\n"},{"tags":["django","session"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13291176,"title":"Django run function when session expires","body":"<p>i know that i can set the session to expire when user close the browser, and this is good. now i need a next step.\nThe problem is this:\nThe can start an action by clicking the button \"start\". This creates a tuple which is sotred in the database. This has a field called \"status\" that is set to IN PROGRESS. \nWhen the user push the button \"end\" i change the value of the status to FINISHED</p>\n\n<p>Now, if between the \"start\" and \"end\" the user close the browser the session expires. \nWhat i want to do is to being able to intercept that the session is expired and remove the tuple from the database.</p>\n\n<p>Basically what i want to do is run a function when session expires.</p>\n"},{"tags":["database","django","timezone"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13291113,"title":"Django: how to store and display date times","body":"<p>With Django, can someone explain to me how DateTimes are stored in the Model/database and what is the best way to make sure that it is displayed correctly to the users? My users are all in the same timezone, but we have summer/winter time. </p>\n\n<p>I'm thinking that DateTimes should be saved as GMP+1, but without summer/winter time. If a record has a DateTime that is 1 hour more than another one, then it should also have occurred 1 hour later. But how do I make sure that users see the correct time for this location? I'd prefer not to use the systime on their personal computers; all users should see the same date/times, regardless of where they are. They'll know that it is the time for this home location.   </p>\n\n<p>settings.py has TIME_ZONE, which I'm guessing is how the DB stores DateTime, but is this with or without summertime? And then I use other settings (template tags?) to convert the time? Which ones? Or is this also set in setting.py?</p>\n\n<p>My app is hosted by webfactional, so I guess I'm not restricted by a Windows system, which apparently needs to use the system time. </p>\n"},{"tags":["django","heroku","haystack","whoosh"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13216661,"title":"Whoosh returns empty results on heroku","body":"<p>I am using Haystack+Whoosh to build the search feature in my django project.\nOn localhost the search was working fine and it returned result. Although I sometime noticed it returned indexes of some \"object not found\" while filtering.\nBut this is not my main problem. The main problem is when I tried deploying my app on heroku. The search is fine only after creating the database and on checking the next day it results are always empty. \nI tried \"rebuild_index\" and \"update_index\" command, but with no hope. I had to drop the database and re-sync it for it to work for sometime before stopping to work again</p>\n\n<p>Any ideas what could cause this problem ??</p>\n"},{"tags":["django","view","decorator"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13289520,"title":"django : get base variables before view starts work","body":"<p>I have such a question, i have googled a lot, read about <code>decorators</code> and <code>middleware</code>, but i didnt catch how to solve my question better.</p>\n\n<p>i have base template <code>base.html</code> and templates <code>template1.html</code> and <code>template2.html</code> which are extended of <code>base.html</code>.</p>\n\n<p><code>base.html</code> has some general block, which is needed in <code>template1.html</code> and <code>template2.html</code>.\nthis block is with dinamic data, so i have to get data for this block in each view and then render template.</p>\n\n<p>for example i have 2 <code>views</code> :</p>\n\n<pre><code>@render_to(\"template1.html\")\ndef fun_1(request):\ndata = getGeneralData()\n#...getting other data\nreturn {\n        \"data\" : data,\n        \"other\" : other_data,\n}\n\n@render_to(\"template2.html\")\ndef fun_2(request):\ndata = getGeneralData()\n#...getting other data\nreturn {\n        \"data\" : data,\n        \"other2\" : other_data2,\n}\n</code></pre>\n\n<p>So general i need this <code>getGeneralData</code> in all of my <code>views</code>, have i to call <code>getGeneralData()</code> function in every my view or can i make any function which will get <code>general_data</code> and render it to template before any view gets its own data ?</p>\n\n<p>Can you please provide me an example of code or give me a good link how to do it better?</p>\n"},{"tags":["javascript","jquery","ajax","django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13290734,"title":"Get a whole div with a Jquery get Request. Django","body":"<p>On my django  app I display a list of the user's facebook friend, using django-facebook.\nThe friends are sorted depending on there \"activity\" (if they are active or not).</p>\n\n<p>I would like to refresh this list on my page without refreshing the whole page.</p>\n\n<p>Here is my view:</p>\n\n<pre><code>class fb_friend(request)\n    if request.user.userprofile.facebook_id:\n        # Get Friends \n\n        profile = request.user.get_profile()\n        idle_friends = profile.get_idle_facebook_friends()\n        active_friends = profile.get_active_facebook_friends()\n        offline_friends = profile.get_inactive_facebook_friends()\n        friend_groups = (active_friends, idle_friends,  offline_friends)\n</code></pre>\n\n<p>In my template:</p>\n\n<pre><code>     &lt;div&gt;\n    {% for group in friend_groups %}\n     {% for friend in group %}\n    &lt;p&gt;{{ friend.name }} ({{ friend.online_presence }})&lt;/p&gt;\n     {% endfor %}\n    {% endfor %}\n     &lt;/div&gt;\n</code></pre>\n\n<p>My idea would be to put the content of my view in an other view, and then use a JQuery request with a setInterval. \nBut the problem is that I only know how to get one element of a page with a JQuery request.</p>\n\n<p>So my question is how can I get the whole div with a JQuery get request and display it in my template?</p>\n\n<p>Thank you for your help!</p>\n"},{"tags":["python","django","foreign-keys","form-data","create-view"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13286075,"title":"Django CreateView : Append ForeignKey to CustomForm Data","body":"<p>I have a CreateView as follows:</p>\n\n<pre><code>class ResumeCreateView(CreateView):\n    model = Resume\n\n    def form_valid(self, request, form):\n        candidate = Candidate.objects.get(user=self.request.user)\n        self.object = form.save(commit=False)\n        self.object.candidate = candidate\n        self.object.save()\n        f = self.request.FILES.get('file')\n        data = [{\n            'title': self.request['title'],\n            'name': f.name,\n        }]  \n        response = JSONResponse(data, {}, response_mimetype(self.request))\n        response['Content-Disposition'] = 'inline; filename=files.json'\n        return response\n</code></pre>\n\n<p>here i am trying to append the <code>candidate</code> instance to the <code>Resume</code> models candidate field which is a <code>ForeignKey</code> to the <code>Candidate</code> model.</p>\n\n<p>But i always receive validation error <code>{'candidate' : 'This field is required'}</code> </p>\n\n<ul>\n<li>I am using a custom form not a model form as it uses twitter bootstrap identifiers.</li>\n</ul>\n\n<p>what am i missing ?</p>\n"},{"tags":["django","django-models","django-admin"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13290460,"title":"Access foreign key fields from Admin Tabular Inline","body":"<p>I'm trying to access a field of a foreign key within a Tabular Inline in the Django Admin.</p>\n\n<p>Despite my best efforts I can't seem to get it working. My current code is:</p>\n\n<pre><code>class RankingInline(admin.TabularInline):\nmodel = BestBuy.products.through\nfields = ('product', 'account_type', 'rank')\nreadonly_fields = ('product', 'rank')\nordering = ('rank',)\nextra = 0\n\ndef account_type(self, obj):\n    return obj.products.account_type\n</code></pre>\n\n<p>Which results in:</p>\n\n<pre><code>'RankingInline.fields' refers to field 'account_type' that is missing from the form.\n</code></pre>\n\n<p>I have also tried using the model__field method, which I used as:</p>\n\n<pre><code>fields = ('product', 'product__account_type', 'rank')\n</code></pre>\n\n<p>Which results in:</p>\n\n<pre><code>'RankingInline.fields' refers to field 'product__account_type' that is missing from the form.\n</code></pre>\n\n<p>The models are defined as so:</p>\n\n<pre><code>class Product(BaseModel):  \n    account_type = models.CharField(choices=ACCOUNT_TYPE_OPTIONS, verbose_name='Account Type', max_length=1, default='P')\n\nclass Ranking(models.Model):\n    product = models.ForeignKey(Product)\n    bestbuy = models.ForeignKey(BestBuy)\n    rank = models.IntegerField(null=True, blank = True)\n\nclass BestBuy(BaseModel):\n    products = models.ManyToManyField(Product, through='Ranking')\n\nclass BaseModel(models.Model):\n    title = models.CharField(max_length = TODO_LENGTH)\n    slug = models.CharField(max_length = TODO_LENGTH, help_text = \"\"\"The slug is a url encoded version of your title and is used to create the web address\"\"\")\n\n    created_date = models.DateTimeField(auto_now_add = True)\n    last_updated = models.DateTimeField(auto_now = True)\n</code></pre>\n\n<p>If anyone has any ideas it would be much appreciated.</p>\n"},{"tags":["python","django","linux","fork","zombie-process"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13247956,"title":"python/django spawn background process and avoid zombie process","body":"<p>I need to spawn a background process in django, the view returns immediately, the background process continues make some changes, then update the db. This is done by <code>os.spawnl()</code> function to call a separate .py file.</p>\n\n<p>The problem is after the background process is done, it becames a zombie function <code>[python] &lt;defunct&gt;</code>.</p>\n\n<p>How do I avoid that? I followed <a href=\"http://stackoverflow.com/a/972383/41948\">this</a> and <a href=\"http://stackoverflow.com/a/5218394/41948\">this</a> example but I still got the child process as zombie after the django render process.</p>\n\n<p>I want to take this chance to practice my *nix process management skills so please do me a favor, don't give me Celery or other mq/async task solutions, and I hate dependencies.</p>\n"},{"tags":["django","django-models","django-forms","django-admin","django-modeladmin"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12656529,"title":"Django - ForeignField initial value definition in Admin","body":"<p>I have a Persons Model, which has a Mother Foreign Field to itself.\nWhen the user go to the 'add' admin form, I want to define a initial value for Mother, in case there is a GET('mother') parameter, or leave it blank, in case there is not.</p>\n\n<p>I have actually 2 questions:</p>\n\n<ol>\n<li>How to access <em>request</em> inside ModelAdmin?</li>\n<li>How to define initial value for a ForeignField?</li>\n</ol>\n\n<p>In models.py:</p>\n\n<pre><code>class Person(models.Model):\n    name=models.CharField()\n    mother=models.ForeignKey('self')\n</code></pre>\n\n<p>In admin.py:</p>\n\n<pre><code>class  PersonAdminForm(forms.ModelForm):\n    class Meta:\n        model = Person\n\nclass PersonAdmin(admin.ModelAdmin):\n    mother = request.GET.get('mother','') #don`t know how to access request\n\n    if mother != '':\n        form = PersonAdminForm\n        form.initial={'mother':Person.objects.get(id=mother)}\n</code></pre>\n\n<p>Well, this ain't working. Even if I only try to define a hardcoded initial value, it doesn`t work.</p>\n\n<p>What am I doing wrong?</p>\n\n<p>PS.: Of course, I may be asking the wrong questions, so I appreciate any help that solves the problem.</p>\n"},{"tags":["django","django-models"],"answer_count":7,"favorite_count":1,"up_vote_count":9,"down_vote_count":0,"view_count":2211,"score":9,"question_id":3608487,"title":"How to bulk create model objects in django","body":"<p>I have a lot of objects to save in database, and so I want to create Model instances with that.</p>\n\n<p>With django, I can create all the models instances, with <code>MyModel(data)</code>, and then I want to save them all.</p>\n\n<p>Currently, I have something like that:</p>\n\n<pre><code>for item in items:\n    object = MyModel(name=item.name)\n    object.save()\n</code></pre>\n\n<p>I'm wondering if I can save a list of objects directly, eg:</p>\n\n<pre><code>objects = []\nfor item in items:\n    objects.append(MyModel(name=item.name))\nobjects.save_all()\n</code></pre>\n\n<p>To save all the objects in one transaction. any idea to do that ?\nThanks !    </p>\n"},{"tags":["javascript","jquery","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13289780,"title":"Viewing uploaded .PDF or .DOC as pictures without converting","body":"<p>Recently, I am working on a feature which the user could upload files like .pdf or .doc and then viewing them as pics on the web page. I am wondering is there a way that I can do that without actually converting them to .jpg or .png by a third party software on the server?  Is it possible to implement this feature only us js,jquery and django?</p>\n"},{"tags":["django","order","django-queryset"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13289390,"title":"Random order of a subset or results in QuerySet in Django","body":"<p>I've a query like this:  </p>\n\n<p><code>Listing.objects.all().order_by('-premium', 'title')</code></p>\n\n<p>It works like expected, returns all premium classes first and then everything ordered by title.</p>\n\n<p>Now I need to randomize only the order of the <code>premium</code> results. Is that possible?</p>\n"},{"tags":["python","django","django-models","django-forms"],"answer_count":3,"favorite_count":2,"up_vote_count":11,"down_vote_count":0,"view_count":7103,"score":11,"question_id":488036,"title":"Django: ModelMultipleChoiceField doesn't select initial choices","body":"<p>ModelMultipleChoiceField doesn't select initial choices and I can't make the following fix (link below) work in my example:</p>\n\n<p><a href=\"http://code.djangoproject.com/ticket/5247#comment:6\" rel=\"nofollow\">http://code.djangoproject.com/ticket/5247#comment:6</a></p>\n\n<p>My models and form:</p>\n\n<pre><code>class Company(models.Model):\n    company_name = models.CharField(max_length=200)\n\nclass Contact(models.Model):\n    company = models.ForeignKey(Company)\n    first_name = models.CharField(max_length=100)\n    last_name = models.CharField(max_length=100)\n\nclass Action(models.Model):\n    company = models.ForeignKey(Company, blank=True, null=True)\n    from_company = models.ManyToManyField(Contact, verbose_name='Participant(s) from \"Company\"', blank=True, null=True)\n\nclass Action_Form(ModelForm):\n    from_company = forms.ModelMultipleChoiceField(queryset=Contact.objects.none(), widget=forms.CheckboxSelectMultiple())\n    class Meta:\n        model = Action\n</code></pre>\n\n<p>What I do and the results:</p>\n\n<pre>\n>>> contacts_from_company = Contact.objects.filter(company__exact=1) # \"1\" for test, otherwise a variable\n>>> form = Action_Form(initial={'from_company': [o.pk for o in contacts_from_company]}) # as suggested in the fix\n>>> print form['from_company']\n&lt;ul&gt;\n&lt;/ul&gt;\n>>> print contacts_from_company\n[&lt;Contact: test person&gt;, &lt;Contact: another person&gt;]\n\n>>> form2 = Action_Form(initial={'from_company': contacts_from_company})\n>>> print form2['from_company']\n&lt;ul&gt;\n&lt;/ul&gt;\n\n>>> form3 = Action_Form(initial={'from_company': Contact.objects.all()})\n>>> print form3['from_company']\n&lt;ul&gt;\n&lt;/ul&gt;\n</pre>\n\n<p>The way I was hoping it would work:<br />\n1. My view gets \"company\" from request.GET<br />\n2. It then filters all \"contacts\" for that \"company\"<br />\n3. Finally, it creates a form and passes those \"contacts\" as \"initial={...}\"  </p>\n\n<p><strong>Two questions:</strong><br />\n<strong>1. [not answered yet]</strong> How can I make ModelMultipleChoiceField take those \"initial\" values?<br />\n<strong>2. [answered]</strong> As an alternative, can I pass a variable to Action_Form(ModelForm) so that in my ModelForm I could have:</p>\n\n<pre>\nfrom_company = forms.ModelMultipleChoiceField(queryset=Contact.objects.filter(company__exact=some_id) # where some_id comes from a view\n</pre>\n"},{"tags":["python","django","pil"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13285248,"title":"Scale Django ImageField before saving to disk","body":"<p>I would like to scale an ImageField before the model gets saved to the disk, but somehow get an unreadable image out. The goal is to scale it without ever saving it to the disk.</p>\n\n<p>This is my attempt so far:</p>\n\n<pre><code>IMAGE_MAX_SIZE = 800, 800\nclass Picture(models.Model):\n    ...\n    image = models.ImageField(upload_to='images/%Y/%m/%d/')\n\n    # img is a InMemoryUploadedFile, received from a post upload\n    # removing the scale function results in a readable image\n    def set_image(self, img):\n        self.image = img\n        self.__scale_image()\n\n    def __scale_image(self):\n        img = Image.open(StringIO(self.image.read()))\n        img.thumbnail(IMAGE_MAX_SIZE, Image.ANTIALIAS)\n        imageString = StringIO()\n        img.save(imageString, img.format)\n        self.image.file = InMemoryUploadedFile(imageString, None, self.image.name, self.image.file.content_type, imageString.len, None)\n</code></pre>\n\n<p>I'm not getting an error, but the resulting image can not be displayed correctly. Any ideas how to correct this?</p>\n\n<p>Thanks\nSimon</p>\n"},{"tags":["django","redmine"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":8,"score":1,"question_id":13288832,"title":"Redmine as auth backend for another site","body":"<p>Everyone in our office has a redmine account and so I would like to know if it's possible to use Redmine as an authentication provider.</p>\n\n<p>We create internal websites using django, and rather than having to set up usernames and passwords for each one, for each person, wouldn't it be nicer if I could just click \"login using redmine\". Just like how on stackoverflow I can click \"login with google\" which works with OpenID.</p>\n\n<p>Is there any plugin or facility of redmine I can use to achieve this?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13287384,"title":"adding drop down list to django","body":"<p>I have a HTML template for the drop down list: </p>\n\n<pre><code>&lt;select name=\"quality\"&gt;\n    {% for quality in qs %}\n        {% ifequal qu.id sel.id %}\n            &lt;option value=\"{{sele.key}}\" selected=\"selected\"&gt;Movie {{qu.id}}: {{quality.name}}&lt;/option&gt;\n        {% else %}\n            &lt;option value=\"{{sele.keyy}}\"&gt;Movie {{qu.id}}: {{quality.name}}&lt;/option&gt;\n        {% endifequal %}\n    {% endfor %}\n&lt;/select&gt;\n</code></pre>\n\n<p>How can i implement this in my models and views, or how can i write models and views for the drop down list ...</p>\n"},{"tags":["django","django-templates","django-admin","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13224199,"title":"Django save: When click save database not updating on admin.py","body":"<p>Here is my coding:</p>\n\n<p>views.py</p>\n\n<pre><code>def form_valid(self, form):\n    form.save()\n    return HttpResponseRedirect(reverse(\"departmentt_view\"))\n</code></pre>\n\n<p>relevant template:</p>\n\n<pre><code>&lt;form action=\"{% url Condition_view department_id patient_NO %}\" method=\"post\"&gt;\n    {% csrf_token %}\n&lt;input type=\"submit\" value=\"Save\"/&gt;\n</code></pre>\n\n<p>When i click save it should update the database in admin.py and return to the first page <code>departmentt_view</code>. But when i click save it return blank(whitepages) but still pointing to the same add <code>127.0.0.1:8000/Diablo/1/123456/Condition</code></p>\n\n<p>Can anyone help me on this. Thank you in advanced.</p>\n\n<p>Edited program:</p>\n\n<p>view.py</p>\n\n<pre><code>def form_valid(self, request, department_id, patient_NO):\n    if request.method == 'POST':\n        form = ConditionForm(request.POST)\n        if form.is_valid():\n            form.save()\n            return HttpResponseRedirect(reverse(\"departmentt_view\"))\n    return(reverse(\"form_valid\"))\n</code></pre>\n\n<p>urls.py</p>\n\n<pre><code>url(r'^diablo/(?P&lt;department_id&gt;\\d+)/(?P&lt;patient_NO&gt;\\d+)/Condition/$', 'diabloreb.views.form_valid', name='form_valid'),\n</code></pre>\n\n<p>after changing to this code then i have another error saying <code>could not import diablorab.views.form_valid</code>parent module does not exist.</p>\n\n<p>so i change back to this instead</p>\n\n<pre><code>url(r'^diablo/(?P&lt;department_id&gt;\\d+)/(?P&lt;patient_NO&gt;\\d+)/Condition/$', ConditionView.as_view(), name = 'Condition_view',),\n</code></pre>\n\n<p>when i change into this urls then i get the same output where its only show white pages.</p>\n\n<p>relevant template</p>\n\n<pre><code>&lt;form action=\".\" method=\"post\"&gt;\n    {% csrf_token %}\n&lt;input type=\"submit\" value=\"Save\"/&gt;\n</code></pre>\n\n<p>I am totally lost. Can anyone help me.\nThank you so much.</p>\n"},{"tags":["python","django","django-models","django-admin","django-templates"],"answer_count":5,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":1397,"score":8,"question_id":9919780,"title":"How do I add a link from the Django admin page of one object to the admin page of a related object?","body":"<p>To deal with the <a href=\"http://stackoverflow.com/questions/3681258/nested-inlines-in-the-django-admin\">lack of nested inlines</a> in django-admin, I've put special cases into two of the templates to create links between the admin change pages and inline admins of two models.</p>\n\n<p><strong>My question is: how do I create a link from the admin change page or inline admin of one model to the admin change page or inline admin of a related model cleanly, without nasty hacks in the template?</strong></p>\n\n<p>I would like a general solution that I can apply to the admin change page or inline admin of any model.</p>\n\n<hr>\n\n<p>I have one model, <code>post</code> (not its real name) that is both an inline on the <code>blog</code> admin page, and also has its own admin page. The reason it can't just be inline is that it has models with foreign keys to it that only make sense when edited with it, and it only makes sense when edited with <code>blog</code>.</p>\n\n<p>For the <code>post</code> admin page, I changed part of \"fieldset.html\" from:</p>\n\n<pre><code>{% if field.is_readonly %}\n    &lt;p&gt;{{ field.contents }}&lt;/p&gt;\n{% else %}\n    {{ field.field }}\n{% endif %}\n</code></pre>\n\n<p>to</p>\n\n<pre><code>{% if field.is_readonly %}\n    &lt;p&gt;{{ field.contents }}&lt;/p&gt;\n{% else %}\n    {% ifequal field.field.name \"blog\" %}\n        &lt;p&gt;{{ field.field.form.instance.blog_link|safe }}&lt;/p&gt;\n    {% else %}\n        {{ field.field }}\n    {% endifequal %}\n{% endif %}\n</code></pre>\n\n<p>to create a link to the <code>blog</code> admin page, where <code>blog_link</code> is a method on the model:</p>\n\n<pre><code>def blog_link(self):\n      return '&lt;a href=\"%s\"&gt;%s&lt;/a&gt;' % (reverse(\"admin:myblog_blog_change\",  \n                                        args=(self.blog.id,)), escape(self.blog))\n</code></pre>\n\n<p>I couldn't find the <code>id</code> of the <code>blog</code> instance anywhere outside <code>field.field.form.instance</code>.</p>\n\n<p>On the <code>blog</code> admin page, where <code>post</code> is inline, I modified part of \"stacked.html\" from:</p>\n\n<pre><code>&lt;h3&gt;&lt;b&gt;{{ inline_admin_formset.opts.verbose_name|title }}:&lt;/b&gt;&amp;nbsp;\n&lt;span class=\"inline_label\"&gt;{% if inline_admin_form.original %}\n    {{ inline_admin_form.original }}\n{% else %}#{{ forloop.counter }}{% endif %}&lt;/span&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;h3&gt;&lt;b&gt;{{ inline_admin_formset.opts.verbose_name|title }}:&lt;/b&gt;&amp;nbsp;\n&lt;span class=\"inline_label\"&gt;{% if inline_admin_form.original %}\n    {% ifequal inline_admin_formset.opts.verbose_name \"post\" %}\n    &lt;a href=\"/admin/myblog/post/{{ inline_admin_form.pk_field.field.value }}/\"&gt;\n            {{ inline_admin_form.original }}&lt;/a&gt;\n{% else %}{{ inline_admin_form.original }}{% endifequal %}\n{% else %}#{{ forloop.counter }}{% endif %}&lt;/span&gt;\n</code></pre>\n\n<p>to create a link to the <code>post</code> admin page since here I was able to find the <code>id</code> stored in the foreign key field.</p>\n\n<hr>\n\n<p><strong>I'm sure there is a better, more general way to do add links to admin forms without repeating myself; what is it?</strong></p>\n"},{"tags":["django","email","character-encoding"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13155452,"title":"Django email in password reset flow: won't accept special characters","body":"<p>I am using the Django reset password flow where it sends an email to the user with a link to enter a new password. The template for this email is password_reset_email.html. I have copied this template into my own project and have customized it. However, I am not able to use special characters, such as ø. Normally, I use the entity like </p>\n\n<pre><code>&amp;oslash; or &amp;#248; \n</code></pre>\n\n<p>but they do not work- they just show up directly as written. I have not set settings.DEFAULT_CHARSET so it should be utf-8. In my .py file I have written </p>\n\n<pre><code># coding=UTF-8\n</code></pre>\n\n<p>The function PasswordResetForm does the following:</p>\n\n<pre><code>email_template_name='registration/password_reset_email.html'\n...\nt = loader.get_template(email_template_name)\n...\n\nc = {'email': user.email,\n      ...        \n       }\nsend_mail(\"subject line\",\n            t.render(Context(c)), from_email, [user.email])\n</code></pre>\n\n<p>I have tried changing the template to .txt instead of .py, and using escape. </p>\n\n<p>Edit: the error that I get is: 'utf8' codec can't decode byte</p>\n\n<p>Edit. I realized that the problem is that it is not rendering at all. It's not just a special char issue. So, I'm going to ask it as a new question.</p>\n"},{"tags":["python","django","exception","logging"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13284890,"title":"Python/Django: automatically log when exceptions occur, including request info","body":"<p>I have created a function log_error(request, traceback), which I call in my exceptions. This writes error information to the database. Now, before I open up every one of my views and add this in an exception handler, is there a way to automatically have all exceptions raise to a function, which then calls this?</p>\n\n<p>I have seen this <a href=\"http://stackoverflow.com/questions/4941543/python-error-logging\">Python error logging</a>, which says to write your own version of sys.excepthook. This function is automatically called when there is an exception. I tried this, but my_excepthook was not called even though I copy-pasted the solution into views.py and raised an error. However, I didn't try too hard because it's not getting all the information that I need, anyway.  I also need request so I can log information abut the user, url, etc. </p>\n\n<p>Maybe that's asking too much? </p>\n\n<p>(I'm using Django, but this does not seem like a Django-specific thing) Edit: yes, it is.</p>\n"},{"tags":["python","mysql","django","sqlalchemy","django-orm"],"answer_count":9,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":247,"score":4,"question_id":2110238,"title":"Merging duplicates in a list? - Question is more complex than it seems","body":"<p>So I have a huge list of entries in a DB (<strong>MySql</strong>)</p>\n\n<p>I'm using <strong>Python</strong> and <strong>Django</strong> in the creation of my web application.</p>\n\n<p>This is the base Django model I'm using:</p>\n\n<pre><code>class DJ(models.Model):\n    alias = models.CharField(max_length=255)\n    #other fields...\n</code></pre>\n\n<p><strong>In my DB I have</strong> now <strong>duplicates</strong></p>\n\n<blockquote>\n  <p>eg. <em>Above &amp; Beyond</em>, <em>Above and Beyond</em>, <em>Above Beyond</em>, <em>DJ Above and Beyond</em>, \n         <em>Disk Jokey Above and Beyond</em>, ...</p>\n</blockquote>\n\n<p>This is a problem... as it blows a big hole in my DB and therefore my application.</p>\n\n<hr>\n\n<p>I'm sure other people have encountered this problem and thought about it.</p>\n\n<p>My ideas are the following:</p>\n\n<ul>\n<li><p>Create a set of rules so a new entry cannot be created?</p>\n\n<blockquote>\n  <p>eg. <strong>\"DJ Above and Beyond\"</strong> cannot be\n  created because <strong>\"Above &amp; Beyond\"</strong> is in\n  the DB</p>\n</blockquote></li>\n<li><p>Relate these aliases to each other somehow?</p>\n\n<blockquote>\n  <p>eg. relate <strong>\"DJ Above and Beyond\"</strong> to <strong>\"Above &amp; Beyond\"</strong></p>\n</blockquote></li>\n</ul>\n\n<hr>\n\n<p>I have literally no clue how to go on about this, even if someone could point me into a direction that would be very helpful.</p>\n\n<p>Any help would be very much appreciated! Thank you guys.</p>\n"},{"tags":["python","django","memcached"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":40,"score":-4,"question_id":13282395,"title":"Why am I getting this exception, \"MemcacheCache object has no attribute '_cull'\"?","body":"<p>OK, here is the story; I have a model here:</p>\n\n<pre><code>from django.db import models\nimport task_writer\n\n# Create your models here.\nclass category(models.Model):\n    category = models.CharField(max_length=30)\n    def __unicode__(self):\n        return category\n\nclass task(models.Model):\n    task = models.CharField(max_length=30)\n    category = models.ForeignKey(category)\n    def __unicode__(self):\n        return task\n</code></pre>\n\n<p>And the views:</p>\n\n<pre><code># Create your views here.\nfrom django.shortcuts import render_to_response\nfrom task_writer.models import category;\nfrom task_writer.form.inputcatform import input_cat_form;\nfrom django.template.context import RequestContext\nfrom django.http import HttpResponseRedirect, HttpResponse\nfrom task_writer.form.inputtaskform import inputtaskform\nfrom django.db import transaction\n\ndef view_all_cat(resp):\n    data = category.objects.all();\n    return render_to_response(\"viewcat.html\",{\"data\":data})\n\ndef input_new_cat(r):\n    form = input_cat_form()\n    variables = RequestContext(r, {\n                                                 'form': form,\n                                                 })\n    return render_to_response(\"input_new_cat.html\",variables)\n\ndef create_new_cat(r):\n    form = input_cat_form(r.POST)\n\n    if form.is_valid():\n        category.objects.create(category=form.cleaned_data['cat'])\n        return HttpResponseRedirect(\"/inputcat?message=success\")\n    else:\n        return   HttpResponseRedirect(\"/inputcat?message=fail\")\n\ndef blank(r):\n    return HttpResponse(\"\")\n\ndef create_new_task(r):\n\n\n    q = inputtaskform() \n    variables = RequestContext(r, {\n                                                 'form': q,\n                                                 })\n    return render_to_response(\"input_new_task.html\",variables)\n</code></pre>\n\n<p>I am so surprised that my data which i input in input category is not appearing in the task,\nand I figure it out that my problem is in cache \nWhy is this? In java I can make it so easy, why is Python hard?</p>\n\n<p>After that I installed that both and in result I got this on my webpage:</p>\n\n<pre><code>Request Method:     GET\nRequest URL:    http://localhost:8000/create_new_task/\nDjango Version:     1.4.2\nException Type:     AttributeError\nException Value:    \n\n'MemcachedCache' object has no attribute '_cull'\n\nException Location:     /home/shining/workspace/django1/src/task_writer/form/inputtasktool.py in clearcache, line 30\nPython Executable:  /usr/bin/python2.7\nPython Version:     2.7.3\nPython Path:    \n\n['/home/shining/workspace/django1/src',\n '/home/shining/workspace/django1/src',\n '/usr/lib/python2.7',\n '/usr/lib/python2.7/plat-linux2',\n '/usr/lib/python2.7/lib-tk',\n '/usr/lib/python2.7/lib-old',\n '/usr/lib/python2.7/lib-dynload',\n '/usr/local/lib/python2.7/dist-packages',\n '/usr/lib/python2.7/dist-packages',\n '/usr/lib/python2.7/dist-packages/PIL',\n '/usr/lib/python2.7/dist-packages/gst-0.10',\n '/usr/lib/python2.7/dist-packages/gtk-2.0',\n '/usr/lib/python2.7/dist-packages/ubuntu-sso-client',\n '/usr/lib/python2.7/dist-packages/ubuntuone-client',\n '/usr/lib/python2.7/dist-packages/ubuntuone-control-panel',\n '/usr/lib/python2.7/dist-packages/ubuntuone-couch',\n '/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol',\n '/usr/local/lib/python2.7/dist-packages/johnny']\n\nServer time:    Wed, 7 Nov 2012 22:12:24 -0600\n</code></pre>\n"},{"tags":["django","paypal","http-status-code-403","ipn"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":338,"score":0,"question_id":7324575,"title":"Django-Paypal IPN 403 Error","body":"<p>I was working on the paypal ipn listener - it didn't seem to be 'hearing' the signals, although the database was updated so I know the ipn was accepted by the paypal.standard.ipn package.</p>\n\n<p>Now I get a 403 error from the ipn simulator - does anyone have any idea why this would happen? When I navigate directly to the listener url there is no error.</p>\n\n<p>I added @csrf_exempt to the listener, but that didn't help.</p>\n\n<p>Any suggestions are welcome.</p>\n\n<p>Listeners.py:</p>\n\n<pre><code>from django.dispatch import receiver\nfrom django.contrib.sites.models import Site\n\nfrom django.views.decorators.csrf import csrf_exempt\nfrom paypal.standard.ipn import signals as paypal_signals\nfrom messaging import send\nfrom utests.models import Test\n import logging\n\n\n@csrf_exempt\n@receiver(paypal_signals.payment_was_successful)\ndef payment_was_succesful_listener(sender, **kwargs):\n     #:sender is the PayPalIPN model instance\n    logging.debug(\"in payment successful listener\")\n    ... the rest of the code is commented out while I debug...\n\n\n@receiver(paypal_signals.payment_was_flagged, dispatch_uid=\"dl-payment_was_flagged\")\ndef payment_was_flagged_listener(sender, **kwargs):\n    #:sender is the PayPalIPN model instance\n    pass\n</code></pre>\n\n<p>As you can see, all that is supposed to happen is some debugging, but it doesn't get there.</p>\n"},{"tags":["javascript","jquery","django","get","url-parsing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13285222,"title":"Django get last GET parameter","body":"<p>I've been working with Django for a few months now so I'm still new at it. </p>\n\n<p>I want to get the last GET parameter from the URL. Here is and example of the URL:</p>\n\n<pre><code>example.com?q=Something&amp;filter1=Test&amp;filter1=New&amp;filter2=Web&amp;filter3=Mine\n</code></pre>\n\n<p>Is there a way to get the last inserted GET parameter with django? It could be <code>filter1</code>, <code>filter2</code> or <code>filter3</code>..</p>\n\n<p>Maybe there is a way to do this after the initial refresh with javascript/jQuery?</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","django","email","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13285976,"title":"Python/Django: Email template is not rendered. Shows html tags and doesn't convert entities","body":"<p>I am sending emails using a template, but the template is not being properly rendered. It shows the html tags and doesn't render special chars.  </p>\n\n<p>It does render the context, for example if I supply it with a \"username\":some_name then it will properly display the username when I do {{username}}</p>\n\n<p>my_template.html:</p>\n\n<pre><code>&lt;p&gt;hello &amp;oslash;&lt;/p&gt;\n</code></pre>\n\n<p>In views:</p>\n\n<pre><code>from django.core.mail import EmailMultiAlternatives\nfrom django.template.loader import get_template\nfrom django.template import Context\n\nt = get_template('my_template.html')\nmsg = EmailMultiAlternatives(\"hi\", t.render(Context({})), from_email, [user.email])\nmsg.send()\n</code></pre>\n\n<p>The received email shows up with the p tags displayed. Also, the entity appears exactly as written in the template. I'd be fine just using a .txt file except that I need the special chars to be rendered. If I write them directly in the txt file, I get an error when trying to send it.</p>\n\n<p>I have also tried using django's send_mail(). Also adding an html tag to the template. Same result. </p>\n"},{"tags":["python","django","dns","dhcp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13285973,"title":"Python module for managing dns and dhcp","body":"<p>I'm writing an application in django that will be creating/destroying dns (bind) and dhcp (dhcpd) records on a RHEL server. I was wondering if there is a module/modules in python that allow me to do that without to need to worry about editing the config files myself?</p>\n\n<p>Thank you</p>\n"},{"tags":["django","authentication","custom-backend"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13277164,"title":"Django authentication backend returning multiple status values","body":"<p>I am writing a custom authentication backend (and a custom user model) to check if a user account is locked or expired. I see that in all the examples of authentication backend return value is either a User object or None. And the only exception generated is User.DoesNotExist. </p>\n\n<p>My question is how should I go about returning different results (e.g. account is locked or expired or max number of login attempts have reached)? </p>\n\n<p>Should I raise custom exceptions or there is another way to do this?</p>\n\n<p>I am using Django 1.5alpha.</p>\n\n<p>EDIT:\nI need to get multiple statuses to display appropriate message to a user and redirect to an appropriate view. </p>\n"},{"tags":["python","django","satchmo"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13285662,"title":"Get rid of default view in Satchmo / Django?","body":"<p>just curious what's the proper/transparent way to get plain 404 error instead of view for the pre-defined url ?</p>\n\n<p>The default install of Satchmo handles <code>/quickorder</code> url with a cart view. I would like to completely disable handling for this url. So far I did get is the following url replacement in <em>url.py</em> at the top of store tree:</p>\n\n<pre><code>from django.conf.urls.defaults import *\nfrom satchmo_store.urls import urlpatterns\nfrom satchmo_utils.urlhelper import replace_urlpattern\n\nreplace_urlpattern(\n        urlpatterns,\n        url(r'^quickorder/$', handler404)\n    )\n</code></pre>\n\n<p>The <code>handler404</code> is from django.conf.urls.defaults but it returns Django's own content instead of the shop's default 404 page like if you would ask for a non-existent page like <a href=\"http://www.google.com/quickorder_somenonsenseintheurl\" rel=\"nofollow\">http://www.google.com/quickorder_somenonsenseintheurl</a>.</p>\n\n<p>Any idea how to override this while avoiding modifications of default Satchmo installation ?</p>\n"},{"tags":["python","django"],"answer_count":4,"favorite_count":5,"up_vote_count":5,"down_vote_count":0,"view_count":1777,"score":5,"question_id":2300794,"title":"Listing installed python site-packages?","body":"<pre><code>from distutils.sysconfig import get_python_lib; print get_python_lib()\n</code></pre>\n\n<p>Returns: <code>/usr/lib/python2.6/site-packages</code></p>\n\n<pre><code>import sys; print sys.path\n</code></pre>\n\n<p>Returns: <code>['', '/usr/lib/python2.6/site-packages/Django-1.1.1-py2.6.egg', '/usr/lib/python2.6/site-packages/pip-0.6.3-py2.6.egg', '/usr/lib/python2.6/site-packages/TRML2PDF-1.0-py2.6.egg', '/usr/lib/python2.6/site-packages/django_threaded_multihost-1.3_3-py2.6.egg',...............</code></p>\n\n<p>But how to list the \"importable name\" from the site-packages installed? E.g: (before import results) <code>django, pip, trm2pdf....</code></p>\n\n<p>Thanks.</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13285032,"title":"using django Form subclass to create a dropdown list","body":"<p>I need to let a <code>user</code> create an Event which has a <code>Category</code>.When a user goes to the create_event page he is shown a <code>dropdown list</code> of <code>Category</code> instances.I need to make sure that only those <code>Category</code> s created by the <code>user</code> should be shown in the dropdown list</p>\n\n<p>I tried to subclass <code>Form</code> for this sothat I can use it as below in view and template.</p>\n\n<p>template for create_event:</p>\n\n<pre><code>&lt;h3&gt;select from existing categories&lt;/h3&gt;\n{{category_choices_form.as_p}}\n</code></pre>\n\n<p>view for create_event:</p>\n\n<pre><code>def create_event(request,..):\n    user_categories = Category.objects.filter(creator=request.user)\n    form_data = get_form_data(request)\n    category_choices_form = CategoryChoicesForm(request.user,form_data)# is this correct?\n    ...\n\ndef get_form_data(request):\n    return request.POST if request.method == 'POST' else None\n</code></pre>\n\n<p>Then I created the <code>Form</code> subclass</p>\n\n<pre><code>class CategoryChoicesForm(forms.Form):\n    def __init__(self, categorycreator,*args, **kwargs):\n        super(CategoryChoicesForm, self).__init__(*args, **kwargs)\n        self.creator=categorycreator\n    categoryoption = forms.ModelChoiceField(queryset=Category.objects.filter(creator=self.creator),required=False,label='Category')\n</code></pre>\n\n<p>However, the line starting <code>categoryoption =</code> causes error saying <code>name 'self' is not defined</code></p>\n\n<p>Can somebody help me with this?</p>\n"},{"tags":["django","git","github","github-api"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13277286,"title":"Retrieve private repository commits from github","body":"<p>I need to retrieve all commits from Private repositories on github. </p>\n\n<p>I already tried with with github API documentation. It provides the API for retrieving the public repository commits.\n  <a href=\"https://api.github.com/repos/:owner/:repo/commits\" rel=\"nofollow\">https://api.github.com/repos/:owner/:repo/commits</a></p>\n\n<p>Anybody can help me for taking all commits from private repositories?</p>\n"},{"tags":["django","django-models","django-comments"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":838,"score":1,"question_id":1458574,"title":"Django comment moderation, not public","body":"<p>im trying moderation comment form the book of James Bennett, i think that all is fine, but the moderation comment is just for SPAM and the comments are public.. so , how ill put the comments always not public, i need that just the administrator can do public the comments.</p>\n\n<p>Thanks </p>\n\n<pre><code>import datetime\nfrom Paso_a_Paso.akismet import Akismet\nfrom django.conf import settings\nfrom django.contrib.comments.models import Comment\nfrom django.contrib.comments.signals import comment_will_be_posted\nfrom django.contrib.sites.models import Site\nfrom django.utils.encoding import smart_str\n\nfrom django.contrib.comments.moderation import CommentModerator, moderator\n\nclass NoticiaModerator(CommentModerator):\n    auto_moderate_field= 'pub_date'\n    moderate_after = 30\n    email_notification = True\n\n\n    def moderate(self, comment, content_object, request):\n        already_moderated = super(NoticiaModerator,self).moderate(comment, content_object, request)\n        if already_moderated:\n            return True\n        akismet_api = Akismet(key=settings.AKISMET_API_KEY,blog_url=\"http:/%s/\" %Site.objects.get_current().domain)\n        if akismet_api.verify_key():\n            akismet_data = {'comment_type': 'comment',\n                            'referrer': request.META['HTTP_USER_AGENT'],\n                            'user_ip': comment.ip_address,\n                            'user_agent': request.META['HTTP_USER_AGENT']}\n            return akismet_api.comment_check(smart_str(comment.comment),\n                                             akismet_data,\n                                             build_data=True)\n        return False\n\n\nmoderator.register(Noticia, NoticiaModerator)\n</code></pre>\n"},{"tags":["mysql","django","django-models"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13283616,"title":"Drop tables in database used by django","body":"<p><strong>Problem Statement:</strong> I want to drop some tables in a databases.</p>\n\n<p><strong>Error getting:</strong> a foreign key constraint fails</p>\n\n<p><strong>Details:</strong></p>\n\n<p>I have a pre-existing (not populated by django models.py) database. I am using django.      I used this database for creating django site. I have given its name and proper setting while creating a site in django. There are no models in created in models.py.</p>\n\n<p>After executing command:</p>\n\n<blockquote>\n  <p>python manage.py syncdb</p>\n</blockquote>\n\n<p>Django added following tables to that database:</p>\n\n<blockquote>\n  <p>| auth_group                 |</p>\n  \n  <p>| auth_group_permissions     |</p>\n  \n  <p>| auth_permission            |</p>\n  \n  <p>| auth_user                  |</p>\n  \n  <p>| auth_user_groups           |</p>\n  \n  <p>| auth_user_user_permissions |</p>\n  \n  <p>| django_content_type        |</p>\n  \n  <p>| django_session             |</p>\n  \n  <p>| django_site |</p>\n</blockquote>\n\n<p>I want to drop all these tables.</p>\n\n<p>I tried this query;</p>\n\n<blockquote>\n  <p>DROP TABLE   table_name;</p>\n</blockquote>\n\n<p>but mysql prompted with error showing:</p>\n\n<blockquote>\n  <p>ERROR 1217 (23000): Cannot delete or update a parent row: a foreign key constraint fails</p>\n</blockquote>\n\n<p>Is there some way I can drop only above mentioned tables keep my pre-existing tables intact?</p>\n\n<p>Thank you.</p>\n"},{"tags":["python","django","django-cms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13284544,"title":"django-cms absolute urls to pages","body":"<p>I want to get a list of all pages I have published in my Django-CMS application but I can't seem to get it to render the language-specific urls.</p>\n\n<p>in my settings I have specified:</p>\n\n<pre><code>LANGUAGES = [\n    ('sv', 'Svenska'),\n    ('en', 'English'),\n]\n</code></pre>\n\n<p>I go in to the admin site, I create a contact-page (That is not site-home) and set different slugs on different languages, 'contact-sv' and 'contact-en' for instance.</p>\n\n<p>Then I have a view that gets a page</p>\n\n<pre><code>from cms.models import Page\npage = Page.objects.published()[1]\nprint 'swe:', page.get_absolute_url(language='sv')\nprint 'eng:', page.get_absolute_url(language='en')\n</code></pre>\n\n<p>I then get This output:</p>\n\n<pre><code>swe: /contact-en/\neng: /contact-en/\n</code></pre>\n\n<p>When I expected the swe-url to be /sv/contact-sv/</p>\n\n<p>I don't need the langage prefix to the path, I can prepend that to the path but I need the language specific path.</p>\n"},{"tags":["django","amazon-ec2","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13284443,"title":"Django Template Error 500.html on Amazon EC2","body":"<p>First of all : I DID go through StackOverflow looking for answers, found some, but NONE worked. So here it goes again</p>\n\n<p>I have this little Django project, sent it to an EC2 but I get the TemplateDoesNotExist: 500.html.</p>\n\n<p>The thing is , at least for GET page, this shows up every 2 or 3 clicks ( redirects) , and when I F5 the page for 2, 3 times, it shows up again.</p>\n\n<p>The file IS THERE, it just seems Django/EC2 wont look at it every now and then</p>\n\n<p>I tested with debug both false and true, also tried TemplateDirs with relative, absolute and even both paths.</p>\n\n<p>I tried almost everything i could find , and I am accepting every kind of solution too. BTW, i think my email is there, so, if you think is best to email me something, just do it, I would really apreciate it</p>\n\n<p>Here is some code. Setting.py</p>\n\n<p>` </p>\n\n<pre><code># Django settings for projetoORD project.\n\nDEBUG = False \nTEMPLATE_DEBUG = DEBUG\n\nADMINS = (\n     ('omar', 'omar.sr88@gmail.com'),\n)\n\n\nMANAGERS = ADMINS\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.\n        'NAME': 'ord',                   # Or path to database file if using sqlite3.\n        'USER': 'root',                      # Not used with sqlite3.\n        'PASSWORD': 'admin',                  # Not used with sqlite3.\n        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.\n        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.\n    }\n}\n\n# Local time zone for this installation. Choices can be found here:\n# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name\n# although not all choices may be available on all operating systems.\n# In a Windows environment this must be set to your system time zone.\nTIME_ZONE = 'America/Sao_Paulo'\n\n\n# Language code for this installation. All choices can be found here:\n# http://www.i18nguy.com/unicode/language-identifiers.html\nLANGUAGE_CODE = 'pt-br'\n\nSITE_ID = 1\n\n# If you set this to False, Django will make some optimizations so as not\n# to load the internationalization machinery.\nUSE_I18N = True\n\n# If you set this to False, Django will not format dates, numbers and\n# calendars according to the current locale.\nUSE_L10N = True\n\n# If you set this to False, Django will not use timezone-aware datetimes.\nUSE_TZ = True\n\n# Absolute filesystem path to the directory that will hold user-uploaded files.\n# Example: \"/home/media/media.lawrence.com/media/\"\nMEDIA_ROOT = ''\n\n# URL that handles the media served from MEDIA_ROOT. Make sure to use a\n# trailing slash.\n# Examples: \"http://media.lawrence.com/media/\", \"http://example.com/media/\"\nMEDIA_URL = ''\n\n# Absolute path to the directory static files should be collected to.\n# Don't put anything in this directory yourself; store your static files\n# in apps' \"static/\" subdirectories and in STATICFILES_DIRS.\n# Example: \"/home/media/media.lawrence.com/static/\"\nSTATIC_ROOT = ''\n\n# URL prefix for static files.\n# Example: \"http://media.lawrence.com/static/\"\nSTATIC_URL = '/static/'\n\n# Additional locations of static files\nSTATICFILES_DIRS = (\n    # Put strings here, like \"/home/html/static\" or \"C:/www/django/static\".\n    # Always use forward slashes, even on Windows.\n    # Don't forget to use absolute paths, not relative paths.\n\n    '/home/ec2-user/projetoORD/static', \n\n)\n\n# List of finder classes that know how to find static files in\n# various locations.\nSTATICFILES_FINDERS = (\n    'django.contrib.staticfiles.finders.FileSystemFinder',\n    'django.contrib.staticfiles.finders.AppDirectoriesFinder',\n#    'django.contrib.staticfiles.finders.DefaultStorageFinder',\n)\n\n# Make this unique, and don't share it with anybody.\nSECRET_KEY = '*+ikvb#(+q7-+_7x5h12kbqn058ln9q$l72hv9t1r4j-15%q1c'\n\n# List of callables that know how to import templates from various sources.\nTEMPLATE_LOADERS = (\n    'django.template.loaders.filesystem.Loader',\n    'django.template.loaders.app_directories.Loader',\n#     'django.template.loaders.eggs.Loader',\n)\n\nMIDDLEWARE_CLASSES = (\n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    # Uncomment the next line for simple clickjacking protection:\n    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',\n)\n\nROOT_URLCONF = 'projetoORD.urls'\n\n# Python dotted path to the WSGI application used by Django's runserver.\nWSGI_APPLICATION = 'projetoORD.wsgi.application'\n\n  TEMPLATE_DIRS = (\n    # Put strings here, like \"/home/html/django_templates\" or \"C:/www/django/templa$\n    # Always use forward slashes, even on Windows.\n    # Don't forget to use absolute paths, not relative paths.\n        # os.path.join(SITE_ROOT, 'templates'),\n        '/home/ec2-user/projetoORD/templates',\n        '/templates',\n)\n\n\nINSTALLED_APPS = (\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    # Uncomment the next line to enable the admin:\n    'django.contrib.admin',\n    # Uncomment the next line to enable admin documentation:\n    # 'django.contrib.admindocs',\n    'expressao',\n)\n\n# A sample logging configuration. The only tangible logging\n# performed by this configuration is to send an email to\n# the site admins on every HTTP 500 error when DEBUG=False.\n# See http://docs.djangoproject.com/en/dev/topics/logging for\n# more details on how to customize your logging configuration.\nLOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'filters': {\n        'require_debug_false': {\n            '()': 'django.utils.log.RequireDebugFalse'\n        }\n    },\n    'handlers': {\n        'mail_admins': {\n            'level': 'ERROR',\n            'filters': ['require_debug_false'],\n            'class': 'django.utils.log.AdminEmailHandler'\n        }\n    },\n    'loggers': {\n        'django.request': {\n            'handlers': ['mail_admins'],\n            'level': 'ERROR',\n            'propagate': True,\n        },\n    }\n}\n</code></pre>\n\n<p>` </p>\n"},{"tags":["python","django","http","proxy","twisted"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13274816,"title":"Django/Python serve files from URL as http proxy fast stream","body":"<p>We are having a cross-domain issue with SVG files that are being served from a CDN (content delivery network) and therefore are coming from a different domain name than our primary domain which is a Python/Django application. We'd like to setup a special view that can serve as a server-side proxy for these SVG files to mask the domain name and get around the cross-domain issue. The question is how to make a fast http request to a url for static files like SVG or even other types (.jpg, .js, .png, .mp4, etc.) and serve them in a chunked streaming http response as fast as we receive the chunks from the request stream.</p>\n\n<p>We realize it may be faster of course to do this outside of Django and WSGI, perhaps the <a href=\"http://twistedmatrix.com\" rel=\"nofollow\">twisted server</a> would be better, so ultimately we are looking for the fastest/best Python method of accomplishing what we need. Really looking for example code for recommended solutions. </p>\n\n<p>Many thanks!</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13284166,"title":"nested for each loop not working to append dictionaries to list in django","body":"<p>I am trying to create a list of dictionaries to model a django models.Model. The model is named voteTemp. This prints out each dictionary, voteTempRecordDict, as each is created in each iteration of the loop:\n<code><pre></p>\n\n<pre><code>&gt;&gt;&gt; voteTempRecordsList = []\n&gt;&gt;&gt; voteTempRecordDict = {}\n&gt;&gt;&gt; for each in VoteTemp.objects.all():\n...     for each2 in each.__dict__:\n...         if each2 is not '_state':\n...             voteTempRecordDict.update({each2:each.__dict__[each2]})\n...     print voteTempRecordDict\n</code></pre>\n\n<p></pre></code>\nSo I would think this would work to append each voteTempRecordDict to the voteTempRecordsList (to make a list of the dictionaries), but it just creates a list containing the last dictionary, repeated the number of times as there are objects in VoteTemp:\n<code><pre></p>\n\n<pre><code>&gt;&gt;&gt; voteTempRecordsList = []\n&gt;&gt;&gt; voteTempRecordDict = {}\n&gt;&gt;&gt; for each in VoteTemp.objects.all():\n...     for each2 in each.__dict__:\n...         if each2 is not '_state':\n...             voteTempRecordDict.update({each2:each.__dict__[each2]})\n...     voteTempRecordsList.append(voteTempRecordDict)\n</code></pre>\n\n<p></pre></code>\nCan anyone help me?</p>\n"},{"tags":["django","plugins","picture","django-cms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6,"score":0,"question_id":13282944,"title":"How to add class and id attributes to images added through django-cms?","body":"<p>I'm using <code>cms.plugins.picture</code> plugin to add images to my website through django cms. I need to specify the class and id attributes of the images I'm adding in. How could I do that from cms or template system?</p>\n"},{"tags":["javascript","python","django","onclick"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13284174,"title":"open new window with JS - but with MEDIA_URL inside - HOW?","body":"<p>i am trying to open a new window when the user clicks the file download link. but the file should come from my media folder, which is uploaded by the user. how is it possible to embed django template code into js? this is my vision: </p>\n\n<pre><code>&lt;a href=\"#\" onclick=\"window.open('{{MEDIA_URL}}','mywindow','width=720,height=900')\"&gt;download here&lt;/a&gt;\n</code></pre>\n\n<p>is it ever possible? </p>\n\n<p>thanks a lot </p>\n"},{"tags":["django","django-multiwidget"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13283734,"title":"MultiValueField compress method always returns 'None'","body":"<p>I am attempting to make a custom field + widget which has N number of CharFields, where N is an argument of the field.</p>\n\n<p>However, in the compress method, the 'data_list' argument is always None.  It is not grabbing the data from the CharFields.  </p>\n\n<p>From all the examples so far it seems the problem may have to do with how I am declaring the widget in the custom field, but I am pretty stumped, any help would be appreciated.</p>\n\n<p>Custom field code:</p>\n\n<pre><code>class CustomMultipleInputField(fields.MultiValueField):\n\ndef __init__(self, max=5, *args, **kwargs):\n    self.widget = CustomMultipleInputWidget( max=max)\n    field_set = []\n    [field_set.append(fields.CharField()) for _ in xrange(int(max))]\n\n    super(CustomMultipleInputField, self).__init__(fields=field_set, *args, **kwargs)\n\ndef compress(self, data_list):\n    print data_list\n    print \"!! Data list is always 'None' !!\"\n    if data_list:\n        return \"|\".join(data_list)\n    return None\n</code></pre>\n\n<p>Custom widget code:</p>\n\n<pre><code>from django.forms import widgets\n\nclass CustomMultipleInputWidget(widgets.MultiWidget):\n\ndef __init__(self, attrs=None, max=5, min=1 ):\n    self.max=max\n    w_list = []\n    [w_list.append(widgets.TextInput()) for _ in xrange(int(max))]\n\n    super(CustomMultipleInputWidget, self).__init__(w_list, attrs)\n\ndef decompress(self, value):\n    if value:\n        return value.split(\"|\")\n    return [None] * int(self.max)\n\ndef format_output(self, rendered_widgets):\n    return u'&lt;/br&gt;'.join(rendered_widgets)\n\ndef render(self, name, value, attrs=None):\n    name = str(name)\n    output = super(CustomMultipleInputWidget, self).render(name, value, attrs)\n\n    return output\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["python","django","logging"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13282644,"title":"What is the ultimate way to configure logging in Django?","body":"<p>There are many examples online but what is the best way to configure the LOGGING Dictionary in settings.py to capture everything that is going on with the solution and it's associated apps - from small errors to sql/model calls.</p>\n\n<p>Cheers!</p>\n"},{"tags":["django","heroku","django-cms","mezzanine"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13283628,"title":"How to deploy mezzanine on heroku?","body":"<p>I have created a mezzanine project and its name is mezzanine-heroku-test\nI create a Procfile that has the content as follow:</p>\n\n<p><strong>web: python manage.py run_gunicorn -b \"0.0.0.0:$PORT\" -w 3</strong></p>\n\n<p>Next, I access to the website to test and I receive the error: Internal Server Error.\nSo, Could you please help me deploy mezzanine on heroku step by step or some suggestion?</p>\n\n<p>Thank you so much.</p>\n"},{"tags":["python","django","nginx","uwsgi"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13282938,"title":"How do I set subdirectory in nginx with Django","body":"<p>Environment:</p>\n\n<ul>\n<li>uwsgi</li>\n<li>nginx</li>\n<li>django 1.3</li>\n</ul>\n\n<p>I'm using the domain <code>www.example.com</code> with Django and nginx, and I want to access the Django by <strong><code>www.example.com/abc/</code></strong> , but I don't know how to set the <strong>subdirectory</strong>.</p>\n\n<p>This is the nginx conf file:</p>\n\n<pre><code>server {\n        listen 80;\n        server_name www.example.com;\n        error_log /var/log/nginx/xxx.error_log info;\n\n        root /home/web/abc;  # this is the directory of the django program\n\n        location ~* ^.+\\.(jpg|jpeg|png|gif|css|js|ico){\n                root /home/web/abc;\n                access_log off;\n                expires 1h;\n        }\n\n        location ~ /abc/ {   # I want to bind the django program to the domian's subdirectory\n                include uwsgi_params;\n                uwsgi_pass 127.0.0.1:9000;\n        }\n}\n</code></pre>\n\n<p>When I open the website <code>www.example.com/abc/</code>, the django <code>urls.py</code> doesn't match, it only match the site like <code>^index$</code>.</p>\n\n<p>How can I modify the nginx location to set django to <code>www.example.com/abc</code>?</p>\n"},{"tags":["django","templates","widget","django-admin","fields"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":13282578,"title":"Django App using all native fields/widgets in django admin","body":"<p>I am changing templates from django-admin as well the css files.</p>\n\n<p>I've been thinking if there is a Django App that makes use of all native fields/widgets in django admin. So I can customize and check if the changes I've made, not \"broke\" something in the native widgets/fields available on django-admin app.</p>\n"},{"tags":["django","facebook","tastypie"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13264849,"title":"how to integrate facebook and tastypie?","body":"<p>I want to make a ios app using tastypie as the backend. The app using Facebook api to login users' facebook account. My problem is:</p>\n\n<ol>\n<li>how to design tastypie resource to login Django server to get other resources(e.g. Photos).</li>\n</ol>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13177123,"title":"Passing negative values as arguments to custom management commands in django","body":"<p>Like many others, I've been learning web development on django through building a test app. I've the basic models set up. I've populated a few of the tables with the absolute minimum data needed for further testing though using fixtures.</p>\n\n<p>Now for a different table, I want to create data tuples through a custom management command which takes the required arguments. If this works as expected, I'll save the created data to the database by adding the <code>--save</code> option.</p>\n\n<p>The syntax of the command is like this</p>\n\n<pre><code>create_raw_data owner_id temperature [--save]\n</code></pre>\n\n<p>where <code>owner_id</code> is required and <code>temperature</code> (in C) is optional. Within the <code>Handle</code> method, I'm using <em>factory boy</em> to create the <code>raw_data</code> with the given arguments etc.</p>\n\n<p>I did have some issues but searching on SO, google, django docs etc, I've got the command working fine.</p>\n\n<p>EXCEPT when I input a negative temperature...</p>\n\n<p>Then I get the following error</p>\n\n<pre><code>Usage: C:\\test\\manage.py create_raw_data [options] \n\nCreates a RawData object. Usage:  create_raw_data owner_id temperature [--save]\n\nC:\\test\\manage.py: error: no such option: -5\n</code></pre>\n\n<p>The code I have for parsing the args is like this</p>\n\n<pre><code>for index, item in enumerate(args):\n    if index == 0:\n        owner_id = int(item)\n    else index == 1:\n        temp = int(item)\n</code></pre>\n\n<p>I put a <code>print(args)</code> as the 1st line inside <code>Handle</code> but it seems the control is not even reaching here.</p>\n\n<p>I'm not sure what is wrong... please help...</p>\n\n<p>Thanks a lot</p>\n"},{"tags":["django","django-cms","django-syncdb"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6,"score":0,"question_id":13282509,"title":"cmsplugin-zinnia throwing a No module namedEntryMenu","body":"<p>I've got an issue when trying to run python manage.py syncdb. I am building a site with django-CMS and adding cmsplugin-zinnia for blog features. But this is coming up and I can not figure out why, looking at the code EntryMenu exists.</p>\n\n<p><code>raise ImproperlyConfigured('ImportError %s: %s' % (app, e.args[0]))\ndjango.core.exceptions.ImproperlyConfigured: ImportError cmsplugin_zinnia.menu.EntryMenu: No module named EntryMenu</code></p>\n\n<p>I've done a lot of Googling and don't see any posts on this same issue. If you can point me in the right direction I'd be greatful. Thanks!</p>\n\n<p><strong>Settings:</strong></p>\n\n<pre><code>   INSTALLED_APPS = (\n    # 'tinymce',\n    'html5boilerplate',\n    'raven.contrib.django',\n    'robots',\n    'south',\n    'cms',\n    'mptt',\n    'menus',\n    'sekizai',\n    'reversion',\n    'templateland',\n    'tagging',\n    'zinnia',\n    'cmsplugin_zinnia',\n\n    'contralogy.apps.frontend',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.comments',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'django.contrib.admin',\n    'django.contrib.humanize',\n    'django.contrib.redirects',\n    'django.contrib.sitemaps',\n\n    'cms.plugins.flash',\n    'cms.plugins.googlemap',\n    'cms.plugins.link',\n    'cms.plugins.picture',\n    'cms.plugins.teaser',\n    'cms.plugins.text',\n    'cms.plugins.video',\n    'cms.plugins.twitter',\n\n    'cmsplugin_zinnia.menu.EntryMenu',\n    'cmsplugin_zinnia.menu.CategoryMenu',\n    'cmsplugin_zinnia.menu.TagMenu',\n    'cmsplugin_zinnia.menu.AuthorMenu',\n\n    #admin tool\n    'admin_tools',\n    'admin_tools.theming',\n    'admin_tools.menu',\n    'admin_tools.dashboard',\n\n    'filer',\n\n)\n\nCMS_TEMPLATES = (\n    ('contralogy/home.html', 'Home Page'),\n    ('contralogy/template_1.html', 'Template One'),\n)\n\nZINNIA_ENTRY_BASE_MODEL = 'cmsplugin_zinnia.placeholder.EntryPlaceholder'\n</code></pre>\n\n<p><strong>pip freeze</strong></p>\n\n<pre><code>BeautifulSoup==3.2.1\nDjango==1.3.1\nMySQL-python==1.2.3\nPIL==1.1.7\nSouth==0.7.5\n-e git://github.com/Fantomas42/cmsplugin-zinnia.git@3790581ae8f669ad37dcdaedf86ee6ca61e1d06b#egg=cmsplugin_zinnia-dev\ndjango-admin-tools==0.4.0\ndjango-appconf==0.5\n-e git://github.com/Fantomas42/django-blog-zinnia.git@12e825ff3d25d47d43882db2ea83961038372de8#egg=django_blog_zinnia-dev\ndjango-classbasedsettings==1.0b2\ndjango-classy-tags==0.3.4.1\ndjango-cms==2.3.3\ndjango-compressor==1.1.2\ndjango-debug-toolbar==0.9.4\ndjango-filer==0.8.5\ndjango-mptt==0.5.2\ndjango-reversion==1.5.1\ndjango-robots==0.8.1\ndjango-sekizai==0.6.1\ndjango-tagging==0.3.1\ndjango-tinymce==1.5.1b2\ndjango-xmlrpc==0.1.4\neasy-thumbnails==1.1\nhtml5lib==0.95\npyparsing==1.5.6\npytz==2012h\nraven==2.0.0\nsimplejson==2.4.0\n</code></pre>\n\n<p>If there is more needed to understand let me know. Thank you in advance!</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13278901,"title":"Django query optimization with a ManytoMany Field","body":"<p>I found that this one bit of code (in bold) in my template produces ~250 queries and makes things REALLY slow:</p>\n\n<pre><code>{% for part in latestupdates %}\n{{ part }}\n      **{% for unipart in part.uniparts.all|slice:\":5\" %}**\n      &lt;tr&gt;\n        &lt;td&gt;\n            &lt;p style =\"font-size:12px;\"&gt;&lt;a href = \"/spices/{{ unipart_id }}/view_part\"&gt;{{ unipart.part }}&lt;/a&gt;&lt;/p&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;img src=\"{{ STATIC_URL }}images/company_logos/thumbs/{{part.model.all.0.manufacturer}}.jpg\" alt=\"{{part.model.all.0.manufacturer}} {{unipart.part}}\" height=\"24\" width='115' /&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      {% endfor %}\n{% endfor %}\n</code></pre>\n\n<p>The relationship between Unipart and Part is as follows:</p>\n\n<pre><code>class UniPart (models.Model):\n    model = models.ManyToManyField (Part, related_name = 'uniparts')\n</code></pre>\n\n<p>My view is as follows:</p>\n\n<p><code>latestupdates = Part.objects.all().order_by('-added')</code></p>\n\n<p>Basically what I want to is get 5 Unipart objects that link to Part. But this is costing me big time!!! What is a more efficient way to do than what I did? I actually have >600 database queries which is pretty pathetic and I'm reading up on database optimization but for this bit I can't find anything relevant. Help! :-)</p>\n"},{"tags":["python","django","heroku","rabbitmq","celery"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13275884,"title":"Django Celery Periodic Tasks Run But RabbitMQ Queues Aren't Consumed","body":"<h1>Question</h1>\n\n<p>After running tasks via celery's periodic task scheduler, beat, why do I have so many unconsumed queues remaining in RabbitMQ?</p>\n\n<h2>Setup</h2>\n\n<ul>\n<li>Django web app running on Heroku</li>\n<li>Tasks scheduled via celery beat</li>\n<li>Tasks run via celery worker</li>\n<li>Message broker is RabbitMQ from ClouldAMQP</li>\n</ul>\n\n<h3>Procfile</h3>\n\n<pre><code>web: gunicorn --workers=2 --worker-class=gevent --bind=0.0.0.0:$PORT project_name.wsgi:application\nscheduler: python manage.py celery worker --loglevel=ERROR -B -E --maxtasksperchild=1000\nworker: python manage.py celery worker -E --maxtasksperchild=1000 --loglevel=ERROR\n</code></pre>\n\n<h3>settings.py</h3>\n\n<pre><code>CELERYBEAT_SCHEDULE = {\n    'do_some_task': {\n        'task': 'project_name.apps.appname.tasks.some_task',\n        'schedule': datetime.timedelta(seconds=60 * 15),\n        'args': ''\n    },\n}\n</code></pre>\n\n<h3>tasks.py</h3>\n\n<pre><code>@celery.task\ndef some_task()\n    # Get some data from external resources\n    # Save that data to the database\n    # No return value specified\n</code></pre>\n\n<h2>Result</h2>\n\n<p>Every time the task runs, I get (via the RabbitMQ web interface):</p>\n\n<ul>\n<li>An additional message in the \"Ready\" state under my \"Queued Messages\"</li>\n<li>An additional queue with a single message in the \"ready\" state\n<ul>\n<li>This queue has no listed consumers</li>\n</ul></li>\n</ul>\n"},{"tags":["django","django-forms","django-imagefield"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13260663,"title":"Add \"Photo\"form to my form to allow users to add a photo","body":"<p>I'd like to add Imageform to my form to allow all users to add a photo. \nI've read this <a href=\"https://docs.djangoproject.com/en/dev/ref/forms/fields/#imagefield\" rel=\"nofollow\">https://docs.djangoproject.com/en/dev/ref/forms/fields/#imagefield</a>\nand this <a href=\"https://docs.djangoproject.com/en/dev/ref/forms/api/#binding-uploaded-files\" rel=\"nofollow\">https://docs.djangoproject.com/en/dev/ref/forms/api/#binding-uploaded-files</a></p>\n\n<p>but still I'm confused about how to achieve that. How can I change my codes to allow users to add a photo from their own folders?Here's my codes and I also attached the ideal form I'd like to create.</p>\n\n<p>[My ideal form]</p>\n\n<p><img src=\"http://i.stack.imgur.com/9VlXt.png\" alt=\"My Ideal Form \"></p>\n\n<p>models.py</p>\n\n<pre><code>from django.db import models\nfrom django.forms import ModelForm\n\nclass Sell(models.Model):\n    subject = models.CharField(max_length=100)\n    price = models.CharField(max_length=100)\n    condition = models.CharField(max_length=100)\n    photo = models.ImageField(upload_to=\"media\")\n    email = models.EmailField()\n    body = models.CharField(max_length=200)\n</code></pre>\n\n<p>forms.py </p>\n\n<pre><code>from django.forms import ModelForm\nfrom uasite1.models import Sell\n\nclass SellForm(ModelForm):\n    class Meta:\n        model = Sell\n</code></pre>\n\n<p>views.py </p>\n\n<pre><code>from django.shortcuts import render_to_response,get_object_or_404\nfrom django.http import HttpResponseRedirect\nfrom uasite1.forms import SellForm\nfrom uasite1.models import Sell\nfrom django.template import RequestContext\n\ndef sell_create(request):\n    context = {}\n    if request.method == 'POST':\n        form = SellForm(request.POST)\n        if form.is_valid():            \n            new_sell = form.save()\n            return HttpResponseRedirect('/sechand/%d/' % new_sell.pk)\n    else:\n        form = SellForm()\n    context['form'] = form\n    return render_to_response('sell.html',context,context_instance = RequestContext(request))\n</code></pre>\n\n<p>sell.html</p>\n\n<pre><code>{% extends 'base.html' %}\n{% block extrahead %}\n{% endblock %}\n{% block content %}\n\n&lt;form enctype=\"multipart/form-data\" action = \"/sechand/\" method = \"post\"&gt;\n    {% csrf_token %}\n    {{ form.as_p }}\n\n&lt;input type = \"submit\" value=\"Submit\" /&gt;\n&lt;/form&gt;\n\n{% endblock%}\n</code></pre>\n\n<p>sell_display.html  (this is the template where the submitted information would show up.)</p>\n\n<pre><code>{% extends 'base.html' %}\n{% block content %}\n&lt;div id = 'sell'&gt;\n\n    &lt;h3&gt; Product Name : [ {{ sell.subject }}]&lt;/h3&gt;\n    &lt;p&gt;Photo{{ sell.photo }}&lt;/p&gt;\n    &lt;p&gt;Price: [ {{ sell.price }} ]&lt;/p&gt;\n    &lt;p&gt;Condition: [ {{ sell.condition }} ]&lt;/p&gt;\n    &lt;p&gt;Comments: [ {{sell.body}} ]&lt;/p&gt;\n    &lt;p&gt;Contact Email:[ {{ sell.email }} ]&lt;/p&gt;\n&lt;/div&gt;\n{% endblock %}\n</code></pre>\n\n<p>urls.py</p>\n\n<pre><code>from django.conf.urls import patterns, include, url\nfrom django.conf.urls.static import static\nfrom django.conf import settings\nfrom django.contrib import admin\nadmin.autodiscover()\n\nurlpatterns = patterns('',\n    url(r'^sechand/$','uasite1.views.sell_create'),\n    url(r'^sechand/(?P&lt;pk&gt;\\d+)/$', 'uasite1.views.sell_detail'),\n    url(r'^products/electronics/$', 'uasite1.views.Electronics'),\n    url(r'^products/$', 'uasite1.views.ProductsAll'),\n    url(r'^admin/', include(admin.site.urls)),\n)+ static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\n</code></pre>\n"},{"tags":["django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13282309,"title":"Just updated to Django 1.4 and getting 'WSGIRequest' object has no attribute 'SUCCESS' error","body":"<p>I just upgraded to Django 1.4 and am getting the following error:</p>\n\n<p><code>'WSGIRequest' object has no attribute 'SUCCESS'</code></p>\n\n<p>Traceback:</p>\n\n<pre><code>File \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/core/handlers/base.py\" in get_response\n  111.                         response = callback(request, *callback_args, **callback_kwargs)\nFile \"/Users/nb/Desktop/spicestore/apps/account/views.py\" in login\n  87.             messages.add_message(request.SUCCESS,\n\nException Type: AttributeError at /account/login/\nException Value: 'WSGIRequest' object has no attribute 'SUCCESS'\n</code></pre>\n\n<p>Anyone know what could be causing it?</p>\n\n<p>Here's the actual code in views.py:</p>\n\n<pre><code> messages.add_message(request.SUCCESS,\n        ugettext(u\"Successfully logged in as %(user)s.\") % {\n            \"user\": user_display(form.user)\n        }\n</code></pre>\n"},{"tags":["python","django","templates","orm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13281916,"title":"rendering array on django template","body":"<p>I have following view</p>\n\n<pre><code>def deals(request):\n    usr=UserProfile.objects.get(user_id=request.user.id)\n    merchant=MerchantProfile.objects.get(user_id=usr.id)\n    dealItems=MerchantDeal.objects.filter(merchant_id=merchant.id)\n    stateText = {1 : 'Created',\n                  2 : 'Activated',\n                  3 : 'Completed'}\n\n    return render_to_response('deals.html',locals(),context_instance=RequestContext(request))\n</code></pre>\n\n<p>In the model <code>MerchantDeal</code> i have one field state_id with three ids 1,2,3 for created, completed and used respectively</p>\n\n<p>I have following template</p>\n\n<pre><code>&lt;table&gt;\n                  &lt;tr&gt;\n                    &lt;th&gt;Deals&lt;/th&gt;\n                    &lt;th&gt;Status&lt;/th&gt;\n                    &lt;th&gt;Start date &lt;/th&gt;\n                    &lt;th&gt;End date &lt;/th&gt;\n                    &lt;th&gt;Used&lt;/th&gt;\n                    &lt;th&gt;Edit&lt;/th&gt;\n                  &lt;/tr&gt;\n                  {% for Item in dealItems %}\n                  &lt;tr class=\"gray\"&gt;\n                    &lt;td&gt;{{Item.title|capfirst}} &lt;/td&gt;\n                    &lt;td &gt;{{Item.current_state}}&lt;/td&gt;\n                    &lt;td&gt;{{Item.start_date}}&lt;/td&gt;\n                    &lt;td&gt;{{Item.end_date}}&lt;/td&gt;\n                    &lt;td width=\"90\"&gt;{{Item.used}}&lt;/td&gt;\n                    &lt;td width=\"92\"&gt;&lt;a class=\"ajax cboxElement\" href=\"/ajax/item?id={{foodItem.id}}\"&gt;edit&lt;/a&gt;&lt;/td&gt;\n                  &lt;/tr&gt;\n                  {%endfor%}\n                &lt;/table&gt;\n</code></pre>\n\n<p>This is show current_state as 1,2,3 instead of created,completed and used. I have defined stateText array too </p>\n\n<pre><code>stateText = {1 : 'Created',\n             2 : 'Activated',\n             3 : 'Completed'}\n</code></pre>\n\n<p>How to render that for 1,2,3 which comes from database?</p>\n"},{"tags":["python","django"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":202,"score":5,"question_id":13188036,"title":"Loading dictionary object causing memory spike","body":"<p>I have a dictionary object with about 60,000 keys that I cache and access in my Django view. The view provides basic search functionality where I look for a search term in the dictionary like so:</p>\n\n<pre><code>projects_map = cache.get('projects_map')\nprojects_map.get('search term')\n</code></pre>\n\n<p>However, just grabbing the cached object (in line 1) causes a a giant spike in memory usage on the server - upwards of 100MBs sometimes - and the memory isn't released even after the values are returned and the template rendered.</p>\n\n<p>How can I keep the memory from jacking up like this? Also, I've tried explicitly deleting the object after I grab the value but even that doesn't release the memory spike. </p>\n\n<p>Any help is greatly appreciated.</p>\n\n<h2>Update: Solution I ultimately implemented</h2>\n\n<p>I decided to implement my own indexing table in which I store the keys and their pickled value. Now, instead of using <code>get()</code> on a dictionary, I use:</p>\n\n<p><code>ProjectsIndex.objects.get(index_key=&lt;search term&gt;)</code></p>\n\n<p>and unpickle the value. This seems to take care of the memory issue as I'm no longer loading a giant object into memory. It adds another small query to the page but that's about it. Seems to be the perfect solution...for now.</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":151,"score":2,"question_id":12742681,"title":"manage.py syncdb fails to create tables because they are not there","body":"<p>I have a strange behaviour of <code>syncdb</code> and I know that it worked in the past. Since the last time I executed <code>syncdb</code> I made changes to my models but the changes were minimal, mostly adding columns to my models. <code>syncdb</code> fails now to create a table because it doesn't exist yet. I cannot really understand why.</p>\n\n<p>My django projects has two packages. The first package which I call <code>remusdb</code> is more or less a standalone application that uses <code>django.db.models.Model</code> for the communication of the database. For applications that use my <code>remusdb</code> package I have written a sample <code>settings.py</code> file that looks like</p>\n\n<pre><code>REMUSDB_DB_ID   = \"remusdb\"\nDATABASES = {\n        'default': {\n            # django.db needs a \"default\" database\n            # make django.db happy.\n            'ENGINE': 'django.db.backends.sqlite3',\n            'NAME':   '/dev/null',\n        },\n\n        REMUSDB_DB_ID: {\n            'ENGINE': 'django.db.backends.postgresql_psycopg2',\n            'NAME':   'remusdb',\n            'OPTIONS': { 'autocommit': True },\n        }\n}\nDATABASE_ROUTERS= [ \"remusdb.RemusDBRouter\" ]\nSECRET_KEY = \"Make.here.something.random\"\nINSTALLED_APPS = (\n        'remusdb'\n)\n</code></pre>\n\n<p>The idea is that this application can determine a database with a custom name and if you include <code>remusdb</code> in a django projetc, then you don't need to mix up databases by having to create the <code>remusdb</code>-databases in your default database. Hence I also wrote a database router that automatically uses <code>REMUSDB_DB_ID</code> for read and write access whenever you use a model from <code>remusdb.models</code>.</p>\n\n<p>This works great as a standalone application and I don't have any problems with it. I even created small scripts that run command from <code>manage.py</code> like <code>syncdb</code>, <code>shell</code> and <code>sqlall</code>.</p>\n\n<pre><code>#!/usr/bin/env python\n# filename: remusdb_syncdb\n\nimport sys\nimport os\nimport re\n\nif __name__ == \"__main__\":\n    if len(sys.argv) != 2:\n        t  = \"Usage: %s settings-unix-path\\n\" % sys.argv[0]\n        t += \"\\n\"\n        t += \"settings-unix-path       The path of the settings module\\n\"\n        t += \"                         in Unix-path format.\\n\\n\"\n        t += \"NOTE: DO NOT USE %s if you are using RemusDB\\n\" % sys.argv[0]\n        t += \"inside of a Django application. In this case please call\\n\"\n        t += \"python manage.py syncdb &amp;&amp; \\\\\\n\"\n        t += \"    python manage.py syncdb --database=&lt;your database name&gt;\"\n        sys.exit(t)\n\n    settings_list = sys.argv[1].split(\"/\")\n    mod_settings  = settings_list[-1]\n\n    del settings_list[-1]\n    settings_path = '/'.join(settings_list)\n    if settings_path == \"\":\n        settings_path = \".\"\n\n    mod_settings = re.sub(r'\\.py$', \"\", mod_settings)\n\n    sys.path.append(settings_path)\n\n    os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", mod_settings)\n    from django.core.management import execute_from_command_line\n    from django.conf import settings\n\n    argv = [sys.argv[0], \"syncdb\", \"--database=%s\" % settings.REMUSDB_DB_ID]\n    execute_from_command_line(argv)\n</code></pre>\n\n<p>Calling <code>remusdb_syncdb &lt;path to settings&gt;/settings.py</code> the database gets created and I can use my application.</p>\n\n<p>Now I want to use <code>remusdb</code> inside of my django project which has its own database that I don't want to mix with the database of <code>remusdb</code>. I had to make changes of the <code>settings.py</code> file according to my sample above and it looks like this:</p>\n\n<pre><code>... the usual stuff\nREMUSDB_DB_ID   = \"remusdb\"\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.\n        'NAME': 'remusweb',                     # Or path to database file if using sqlite3.\n    },\n\n    REMUSDB_DB_ID: {\n        'ENGINE': 'django.db.backends.postgresql_psycopg2', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'\n        'NAME':   'remusdbdev',                             # Name of DB or path if sqlite is used as engine\n        'OPTIONS': { 'autocommit': True },\n    }\n}\nDATABASE_ROUTERS= [ \"remusdb.RemusDBRouter\" ]\n...\nINSTALLED_APPS = (\n    ...\n    'remusdb',\n    'monitor'\n)\n...\n</code></pre>\n\n<p>When I first added <code>remusdb</code> as dependency of the django project I created the database <code>createdb remusdbdev</code> and executed then <code>python manage.py syncdb --database=remusdb</code> and the tables in <code>remusdbdev</code> were created.</p>\n\n<p>After two months developing the django application I had to add columns to some tables in <code>remusdb</code> and I didn't want to execute the sql code by myself. So I made <code>dropdb remusdbdev</code> and running <code>python manage.py syncdb --database=remusdb</code> generates now this error:</p>\n\n<pre><code>  File \"/home/shaoran/devpython/lib/python2.6/site-packages/django/db/backends/postgresql_psycopg2/base.py\", line 52, in execute\n    return self.cursor.execute(query, args)\ndjango.db.utils.DatabaseError: relation \"remus_process\" does not exist\nLINE 1: ...\".\"last_stop\", \"remus_process\".\"last_change\" FROM \"remus_pro...\n</code></pre>\n\n<p>Well, of course it doesn't exists yet, the point of <code>syncdb</code> is that it creates the tables. The funny thing is that if I execute <code>remusdb_syncdb</code> (from my standalone app) with django's settings (I have to temporaly remove the <code>monitor</code> line in <code>INSTALLED_APPS</code>) then <code>syncdb</code> creates the tables. After that <code>python manage.py syncdb</code> doesn't fail anymore.</p>\n\n<p>Am I missing something here? Why was I able to execute <code>manage.py syncdb --database=remusdb</code> in the past and now I get this strange error?</p>\n\n<hr>\n\n<p>While reading over my question before submitting it I thought about how I started the django project in the first place. I created the django project and added the changes in <code>settings.py</code> that are needed for <code>remusdb</code> to work. <em>Then</em> I executed <code>syncdb</code> for the first time. Now I have a second package, <code>monitor</code> , that has views and templates. So I dropped the database once more, created it again and this time I temporaly removed the <code>'monitor'</code> line from <code>INSTALLED_APPS</code>. Then I executed <code>python manage.py syncdb --database=remusdb</code> and it run without a problem. Next time I repeated these steps but I didn't temporarily remove the <code>'monitor'</code> line and the error returned.</p>\n\n<p>What is going on here?</p>\n"},{"tags":["django","path","virtualenv"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":3,"score":0,"question_id":13281771,"title":"No module named django.core when creating project in virtualenv","body":"<p>So I have looked around at a lot of questions similar to mine, however I couldn't find a concrete answer.  My comp specifications are Windows 7 64-bit.  </p>\n\n<p>My problem is as such:</p>\n\n<p>1)  I installed virtualenv using pip:</p>\n\n<pre><code>pip install virtualenv\n</code></pre>\n\n<p>2)  After that I created and activated a new environment:</p>\n\n<pre><code>path/virtualenv env\n...\npath/to/env/Scripts/activate\n</code></pre>\n\n<p>3)  While running the new environment, I installed django:</p>\n\n<pre><code>(env) path/pip install django\n</code></pre>\n\n<p>4)  After installing successfully, I am ready to make a project.  However, upon trying it out:</p>\n\n<pre><code>path/django-admin.py startproject test\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>File \"C:/path/env/Scripts/django-admin.py\", line 2, in (module)\n    from django.core import management\nImportError: No module named django.core\n</code></pre>\n\n<p>I have tried out various solutions people have posted, including using the full path:</p>\n\n<pre><code>python C:/path/to/django-admin.py startproject test\n</code></pre>\n\n<p>I have also checked to make sure the versions of Python it is referencing are correct,as both inside and outside the virtualenv it is associated with Python27.  Many other solutions talked about PYTHONPATH or the syspath, however, when I import django or managemnet in the python shell, those work fine.</p>\n\n<p>I have a feeling it may have something to do with the paths, but I'm not sure how a virtualenv interacts with the system paths.  Since it is self-contained and the system paths are system wide, is it necessary to have something in the path specifically?</p>\n\n<p>As an aside, my django-admin.py file is in both</p>\n\n<pre><code>path/env/Scripts\n</code></pre>\n\n<p>and</p>\n\n<pre><code>path/env/Lib/site-packages/django/bin\n</code></pre>\n\n<p>and the django folder is in </p>\n\n<pre><code>path/env/Lib/site-packages\n</code></pre>\n\n<p>How to fix this problem?</p>\n"},{"tags":["django","heroku"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13281276,"title":"Heroku is running the wrong app","body":"<p>I accidentally uploaded another app to my Heroku folder called social... so I have two apps -- <code>spicestore</code> and <code>social</code> now. Rather than running <code>python spicestore/manage.py runserver</code> Heroku is running <code>python social/manage.py runserver</code>. I deleted the folder <code>social</code> off of Heroku by running a bash terminal and out of my git folder, but that didn't set it back. </p>\n\n<p>How can I explicitly tell it where to point, and also delete <code>social</code> from my Heroku directory for good?</p>\n"},{"tags":["python","django","django-middleware"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":20,"score":0,"question_id":13281392,"title":"Django middleware is ImproperlyConfigured?","body":"<p>For some reason, I am getting an ImproperlyConfigured error on account of custom middleware.</p>\n\n<pre><code>[Wed Nov 07 20:47:07 2012] [error] [client 158.130.107.158] File does not exist: /home/davidxu/public_html/favicon.ico\n[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158] mod_wsgi (pid=24114): Exception occurred processing WSGI script '/home/davidxu/dev/Penn-Course-Review-api/api/django.wsgi'.\n[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158] Traceback (most recent call last):\n[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158]   File \"/usr/local/lib/python2.6/dist-packages/django/core/handlers/wsgi.py\", line 219, in __call__\n[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158]     self.load_middleware()\n[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158]   File \"/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py\", line 47, in load_middleware\n[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158]     raise exceptions.ImproperlyConfigured('Error importing middleware %s: \"%s\"' % (mw_module, e))\n[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158] ImproperlyConfigured: Error importing middleware api.apiconsumer.authenticate: \"No module named api.apiconsumer.authenticate\"\n</code></pre>\n\n<p>For reference, here are the relevant parts of the <code>settings.py</code> file:</p>\n\n<pre><code>MIDDLEWARE_CLASSES = ( \n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.cache.UpdateCacheMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.cache.FetchFromCacheMiddleware',\n    'api.apiconsumer.authenticate.Authenticate',\n)\n\nINSTALLED_APPS = ( \n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    'django.contrib.messages',\n    'api.courses',\n    'api.apiconsumer',\n    # Uncomment the next line to enable the admin:\n    'django.contrib.admin',\n    'api.static_content',\n    'django_extensions', # used for debugging, remove if problematic\n    'django.contrib.staticfiles',\n    # Uncomment the next line to enable admin documentation:\n    # 'django.contrib.admindocs',\n)\n</code></pre>\n\n<p>And the <code>django.wsgi</code> file for what its worth. (Note, There is a lot of custom stuff in here.)</p>\n\n<pre><code>import os,sys\n\nPROJECT_PATH = os.path.realpath(os.path.dirname(__file__))\n\nsys.path.append(PROJECT_PATH)\n\n\nfrom sandbox_config import *\n\n#Uncomment these two lines to use virtualenv\n#activate_this = os.path.join(COURSESAPI_APP_ROOT, \"ENV/bin/activate_this.py\")\n#execfile(activate_this, dict(__file__=activate_this))\n\nsys.path.append(DEV_ROOT)\nsys.path.append(COURSESAPI_APP_ROOT)\n\nos.environ['DJANGO_SETTINGS_MODULE'] = 'settings'\n\nimport django.core.handlers.wsgi\napplication = django.core.handlers.wsgi.WSGIHandler()\n</code></pre>\n\n<p>Unfortunately, at this point I'm not really sure what to try. The error is extremely unhelpful.</p>\n\n<ul>\n<li>Deleting the line in question caused the next custom middleware to break the program, which makes me think it may be a path issue.</li>\n<li>Google doesn't seem to have much in the way of help.</li>\n</ul>\n\n<p>Any ideas what the issue may be and what's worth trying?</p>\n"},{"tags":["python","django","eclipse","pinax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13203315,"title":"What are the different options to install pinax(0.9a) inclusive requirements?","body":"<p>I tried the classical way with <code>pip install Pinax</code> and then install the requirements base.txt, but this does not work?</p>\n\n<p>What are other options to install a working pinax(0.9) base project inclusive requirements?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Thats the exception installing it the \"proper\" way...</p>\n\n<pre><code>Created project mysite\nInstalling project requirements...\nTraceback (most recent call last):\n  File \"C:\\Users\\Desktop\\Django\\lol\\mysite-env\\Scripts\\pinax-admin-script\n.py\", line 8, in &lt;module&gt;\n    load_entry_point('Pinax==0.9a2', 'console_scripts', 'pinax-admin')()\n  File \"C:\\Users\\Desktop\\Django\\lol\\mysite-env\\lib\\site-packages\\pinax\\co\nre\\management\\__init__.py\", line 105, in execute_from_command_line\n    runner.execute()\n  File \"C:\\Users\\Desktop\\Django\\lol\\mysite-env\\lib\\site-packages\\pinax\\co\nre\\management\\__init__.py\", line 94, in execute\n    self.loader.load(command).run_from_argv(argv)\n  File \"C:\\Users\\Desktop\\Django\\lol\\mysite-env\\lib\\site-packages\\pinax\\co\nre\\management\\base.py\", line 45, in run_from_argv\n    self.handle(*args, **options.__dict__)\n  File \"C:\\Users\\Desktop\\Django\\lol\\mysite-env\\lib\\site-packages\\pinax\\co\nre\\management\\commands\\setup_project.py\", line 66, in handle\n    self.setup_project(args[0], options[\"base\"], options)\n  File \"C:\\Users\\Desktop\\Django\\lol\\mysite-env\\lib\\site-packages\\pinax\\co\nre\\management\\commands\\setup_project.py\", line 134, in setup_project\n    installer.install_reqs(not options[\"allow_no_virtualenv\"])\n  File \"C:\\Users\\Desktop\\Django\\lol\\mysite-env\\lib\\site-packages\\pinax\\co\nre\\management\\commands\\setup_project.py\", line 207, in install_reqs\n    pip.call_subprocess([\nAttributeError: 'module' object has no attribute 'call_subprocess'\n</code></pre>\n"},{"tags":["django","login","django-forms","django-views","django-login"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13281227,"title":"Login validation error","body":"<p>I'm a Django newbie.</p>\n\n<p>My login page requires just \"username\" and \"password\" and if they are left blank or filled in incorrectly, I'd like to <strong>raise ValidationError</strong>. I created codes, but it just raises  </p>\n\n<blockquote>\n  <p>\"KeyError at /login/\" and  \"UnboundLocalError at /login/ :local\n  variable 'context' referenced before assignment\"</p>\n</blockquote>\n\n<p>How can I fix my codes?</p>\n\n<p>views.py</p>\n\n<pre><code>def LoginRequest(request):\n    if request.user.is_authenticated():\n        return HttpResponseRedirect('/profile/')\n    if request.method == 'POST':\n        form = LoginForm(request.POST)\n        if form.is_valid():\n            username=form.cleaned_data['username']\n            password = form.cleaned_data['password']\n            uasite1= authenticate(username=username, password=password)\n            if uasite1 is not None:\n                login(request, uasite1)\n                return HttpResponseRedirect('/profile/')\n            else:\n                return render_to_response('login.html', {'form': form}, context_instance=RequestContext(request))\n        else:\n            return render_to_response('login.html', context, context_instance=RequestContext(request))\n    else:\n        form = LoginForm()\n        context ={ 'form' : form}\n        return render_to_response('login.html',{'form': form}, context_instance=RequestContext(request))\n</code></pre>\n\n<p>form.py</p>\n\n<pre><code>class LoginForm(forms.Form):\n    username = forms.CharField(label = (u'User Name'))\n    password = forms.CharField(label = (u'Password'),widget = forms.PasswordInput(render_value=False))\n\n    def clean_username(self):\n        data = self.cleaned_data['username']\n        if not data:\n            raise forms.ValidationError(\"Please Enter Username.\")\n        return data\n\n    def clean_password(self):\n        data = self.cleaned_data['password']\n        if not data:\n            raise forms.ValidationError(\"Please Enter Password.\")\n        return data\n\n    def clean(self):\n        username = self.cleaned_data['username']\n        password = self.cleaned_data['password']\n        try:\n            User.objects.get(username=username, password=password)\n        except User.DoesNotExist:\n            raise forms.ValidationError(\"Email or Password is incorrect.\")\n        return self.cleaned_data\n</code></pre>\n"}]}
{"total":41213,"page":2,"pagesize":100,"questions":[{"tags":["iphone","django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":22,"score":-4,"question_id":13279331,"title":"Django autocomplete form not working on iphone","body":"<p>I am working on a django powered website for mobile platform and have an 'autocomplete:on' on the username text input. I tried testing this feature. It works fine on android based mobiles but does not show the auto-completion option on iphone. Why is it so? Can anyone help me out?</p>\n"},{"tags":["django","django-models","django-users"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":505,"score":3,"question_id":9011589,"title":"Django how to delete user's profile and posts and all assocation after user deleted?","body":"<p>I'm writing a django project. And want to know after user deletes his own account, is there a way django build-in to auto delete all object related to this user(e.g. some generic foreign_key)? Or I should use signal \"post_delete\" to delete every objects related?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":12,"score":1,"question_id":13279341,"title":"Combine subclassed modelforms into parent model","body":"<p>I'm using django's form wizard for a survey, and I want to save the entire survey into a single model. I've split the model into multiple forms, in order to have a subset of the model in each FormWizard step.\nThe question is, how do I combine them back together at the end?\nMy models.py looks like this:</p>\n\n<pre><code>class BigSurvey(models.Model):\n    field1 = models.TextField()\n    field2 = models.TextField()\n    ...\n    field40 = models.CharField(max_length=10)\n</code></pre>\n\n<p>and my forms.py is like this:</p>\n\n<pre><code>class FirstPageForm(ModelForm):\n    class Meta:\n        model = BigSurvey\n        fields = ('field1', 'field2')\n\nclass SecondPageForm(ModelForm):\n    class Meta:\n        model = BigSurvey\n        fields = ('field3', 'field4')\n</code></pre>\n\n<p>And so on, for four forms and 30 fields total. The fields of each subclassed model form, combined, are all of the fields in the BigSurvey model.</p>\n\n<p>This allows me to spit the BigSurvey into four steps. Form wizard returns an object form_list, which is a list of each of the four forms (FirstPageForm, SecondPageForm, etc). </p>\n\n<p>How can I combine these four forms into a single BigSurvey object to save?</p>\n\n<p><strong>UPDATE:</strong>\nSolved by iterating over forms and fields and populating a new form with a dictionary of values. Populating by using setattr (as per Colleen's answer below) results in an unbound form.\nMy working solution:</p>\n\n<pre><code>newvalues={}\nfor form in form_list:\n    for field in form.cleaned_data.keys():\n        newvalues[field]=form.cleaned_data[field]   \nnewform = QuestForm(newvalues)\nnewform.save()\n</code></pre>\n"},{"tags":["django","django-models","django-forms","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":16,"score":-1,"question_id":13278686,"title":"Filter select field in ModelForm by currently logged in user","body":"<p>I'm trying to display a form (ModelForm) with a <code>select</code> field filtered by currently logged in user. The select field in this case contains a list of categories. I want to display only the categories which \"belong\" to the currently logged in user. The category field is a foreign key to the IngredienceCategory model. </p>\n\n<p>Here is what I've come up with so far but it's giving me an error (unexpected keyword queryset). Any ideas what I'm doing wrong?</p>\n\n<pre><code># models.py\nclass IngredienceCategory(models.Model):\n    name = models.CharField(max_length=30)\n    user = models.ForeignKey(User, null=True, blank=True)\n\n    class Meta:\n    verbose_name_plural = \"Ingredience Categories\"\n\n    def __unicode__(self):\n        return self.name\n\n\nclass Ingredience(models.Model):\n    name = models.CharField(max_length=30)\n    user = models.ForeignKey(User, null=True, blank=True)\n    category = models.ForeignKey(IngredienceCategory, null=True, blank=True)\n\n    class Meta:\n         verbose_name_plural = \"Ingredients\"\n\n    def __unicode__(self):\n        return self.name\n\n\nclass IngredienceForm(ModelForm):\n    class Meta:\n        model = Ingredience\n        fields = ('name', 'category')\n\n\n# views.py\ndef home(request):\n    if request.user.is_authenticated():\n        username = request.user.username\n        email = request.user.email\n        foods = Food.objects.filter(user=request.user).order_by('name')\n        ingredients = Ingredience.objects.filter(user=request.user).order_by('name')\n        ingrcat = IngredienceCategory.objects.filter(user=request.user)\n\n        if request.method == 'POST':\n            form = IngredienceForm(request.POST)\n            if form.is_valid():\n                # Create an instance of Ingredience without saving to the database\n                ingredience = form.save(commit=False)\n                ingredience.user = request.user\n                ingredience.save()\n        else:\n            # How to display form with 'category' select list filtered by current user?\n            form = IngredienceForm(queryset=IngredienceCategory.objects.filter(user=request.user))\n\n        context = {}\n        for i in ingredients:\n            context[i.category.name.lower()] = context.get(i.category.name.lower(), []) + [i]\n\n        context2 = {'username': username, 'email': email, 'foods': foods, 'ingrcat': ingrcat, 'form': form,}\n        context = dict(context.items() + context2.items())\n    else:\n        context = {}\n\n    return render_to_response('home.html', context, context_instance=RequestContext(request))\n</code></pre>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13225692,"title":"Browse client side and server side files in Django/Python?","body":"<p>I have written a front end Django/Python application. It's like a syncing tool. Users can first browse the source and destination. Source is client's computer and destination is server's computer. The interface is similar to grsync. I need to implement it in the template(front-end application). How can I do this? Thanks</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I have this in my form.html(template for Django)</p>\n\n<pre><code>&lt;form&gt;\n&lt;p&gt;Session Name: &lt;input type=\"text\" name=\"session\"&gt;&lt;/p&gt;\n&lt;p&gt;Source: &lt;input type=\"text\" name=\"target\"&gt;&lt;input type=\"submit\" value=\"Open\"&gt;&lt;/p&gt;\n&lt;p&gt;Target: &lt;input type=\"text\" name=\"target\"&gt;&lt;input type=\"submit\" value=\"Open\"&gt;&lt;/p&gt;\n&lt;input type=\"submit\" value=\"Save\"&gt;\n&lt;input type=\"button\" name=\"Cancel\" value=\"Cancel\" onclick=\"window.location = 'form.html' \" /&gt;\n &lt;/form&gt;\n</code></pre>\n\n<p>Now when the user click on the open in the source the files and folders in the client's computer should be shown and when user press OK the path should be loaded in the Source field. </p>\n"},{"tags":["javascript","python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13276086,"title":"Text Document, spreadsheet, Presentation editors in Django Python","body":"<p>I've been trying to research for awhile now and I am not getting anywhere so I decided to ask here.\nMy project is made in Django and I want to add Text Document, spreadsheet, Presentation editors to it (like google docs). I am not sure how to approach this problem. I am willing to even create these from scratch. But I am not sure where to start. Any book, links, API that I can begin with?</p>\n\n<p>I want something that lets people create and edit these documents on my website itself.</p>\n\n<p>Any help would be appreciated. </p>\n"},{"tags":["django","nginx"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13258391,"title":"Logging standard out with django and nginx","body":"<p>I am trying to debug an application I made with django and it works fine using django's manage.py, but when I use nginx some features do not work. I checked the error logs and they are empty, probably because I am catching all exceptions and sending them to standard out. Is there an easy way to see the output from the application with nginx?</p>\n"},{"tags":["python","django","heroku","beautifulsoup","virtualenv"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13279930,"title":"Beautiful soup on heroku?","body":"<p>I was trying to deploy an application using Beautiful soup on heroku and run a command like \"python manage.py \" . My command uses Beautiful soup library. Though the command works perfectly on my local machine but it couldn't find beautiful soup module on heroku. I tried to install it using pip install beautifulsoup, then adding it to requirements file and pushing the updates using git. But still it cannot find beautiful soup module. I know it is little specific and I am new to heroku, django. I am not sure how to debug it? Can anybody guide me in the right direction?</p>\n"},{"tags":["javascript","django","jquery-mobile","browser-history"],"answer_count":4,"favorite_count":4,"up_vote_count":7,"down_vote_count":0,"view_count":3351,"score":7,"question_id":10262629,"title":"How to modify jQuery mobile history Back Button behavior","body":"<p>I'll start this off with I have researched a bit, but no solution that solves what seems like it should be a simple JQM modification.</p>\n\n<p>I have a wine review webapp that has the following view user flow:\n<a href=\"http://5buckchuck.com/\" rel=\"nofollow\">http://5buckchuck.com/</a></p>\n\n<p>Wine type > Wine list > Wine Details > Wine review (redirect via django backto ) > Wine Details updated from review</p>\n\n<p>What I want to happen is when the user presses the back button it should go back to the wine list. What currently happens is the the Wine Detail view is reloaded. It takes pressing back three times to get back to the Wine List. :-(</p>\n\n<p>My thoughts to solve this were two:</p>\n\n<ol>\n<li><p>Splice the last 3 items from the history stack, if the last items in the history stack was  Wine Review. I had a hard time trying to introspect the last history object to get the pageURL. I have a feeling that this solution is a bit too fragile though.</p>\n\n<pre><code>var last_hist = $.mobile.urlHistory.getActive();\nlast_hist.data.pageURL;\n</code></pre></li>\n<li><p>The second thought was to override the back button behavior so that the back button from the Wine Detail view would always go back to the Wine list view</p>\n\n<pre><code>$('div#wine_detail').live('pageshow',function(event, ui){      \n  $(\"a.ui-btn-left\").bind(\"click\", function(){\n    location.replace(\"/wines/{{wine.wine_type}}/#\");\n  });   \n});\n</code></pre></li>\n</ol>\n\n<p>There is probably a better way to do this, but I'm a bit out of ideas. </p>\n\n<p>Update:\nSo I continue to hack on this with somewhat negligible results. On thing I have found was this is what I basically need to work: <code>window.history.go(-3)</code></p>\n\n<p>from the console it does exactly what I need.</p>\n\n<p>So I tried binding it the the back button like such:</p>\n\n<pre><code>$('div#wine_detail').live('pageshow',function(event, ui){\n  var last = $.mobile.urlHistory.stack.length - 1;\n  var last_url = $.mobile.urlHistory.stack[last].url;\n  var review_url = /review/g;\n   if (last_url.match(review_url) )\n     {\n       $('div#wine_detail a.ui-btn-left').bind( 'click', function( ) {  \n         console.log(\"click should be bound and going back in time...\")\n         window.history.go(-2);\n         });\n   }\n   else\n   {\n     console.log('err nope its: ' + last_url);\n   }\n });\n</code></pre>\n\n<p>No dice, something interupts the transaction...</p>\n"},{"tags":["python","django","mod-wsgi"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":107,"score":4,"question_id":13151482,"title":"Why my Django project is being displayed in subdomain and localhost at the same time?","body":"<p>The thing is that I have a django project installed in a subdomain in localhost and at the same time I have the localhost for other stuff without Django.</p>\n\n<p>Whenever I access a1.localhost it displays my django welcome page ok, but when I want to access just localhost it also displays the same django welcome page instead of the index.html.</p>\n\n<p>So far this is what I have:</p>\n\n<pre><code>Hosts:\n127.0.0.1       localhost\n127.0.0.1       a1.localhost\n\nvhosts.conf:\n#-- a1.localhost\n&lt;VirtualHost *:80&gt;\n    ServerName a1.localhost\n    WSGIScriptAlias / \"C:/workspace/website1/apache/django.wsgi\"\n    &lt;Directory \"C:/workspace/website1/apache\"&gt;\n        Order allow,deny\n        Allow from all\n    &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n\n#-- localhost\n&lt;VirtualHost *:80&gt;\n    ServerName localhost\n    DocumentRoot \"C:/workspace/website1/django_project\"\n&lt;/VirtualHost&gt;\n\n\ndjango.wsgi\n\nimport os\nimport sys\n\npath = \"C:/workspace/website1/apache/django_project\"\nif path not in sys.path:\n    sys.path.append(path)\n\n\nos.environ['DJANGO_SETTINGS_MODULE'] = 'django_project.settings'\n\nimport django.core.handlers.wsgi\n</code></pre>\n\n<p>What I want to achieve is to display my normal index.html file in localhost and my django project in a1.localhost.</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","django"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13278872,"title":"Python import similar to Django settings file","body":"<p>I am trying to use a *.py file to take variables from and use them across multiple imports in my python application, similar to how a Django settings file works.</p>\n\n<p>An example settings file:</p>\n\n<pre><code>DB_NAME = 'foo'\nDB_TABLE = 'bar'\n#Lots of other variable names and values here\n</code></pre>\n\n<p>The benefit is that I can load different settings very quickly this way. I can reference a sort of global \"DB_NAME\" wherever I want without having specific objects to deal with.</p>\n\n<p>The drawback is that I have to change the import statement in every file that has to import them. </p>\n\n<p>Can I set it up so that I import the file once and then reference a generic import to get all of these values?</p>\n\n<p>Or is there a much better way to do this?</p>\n\n<p>Any help is appreciated.</p>\n\n<p>EDIT: The problem stems from having multiple settings files. I would have to import settings.py for one file, or if I want a different settings file, I would need to change all the import statements to reference test_settings.py, etc..</p>\n\n<p>I don't want to manually change the import locations in order to change what is imported across the entire application.</p>\n"},{"tags":["django","django-models","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13279073,"title":"Cannot get selection from one page to another - need to know what choice user chose","body":"<p>I'm trying to let the user select one 'thing' from a list (from the database), then go find other stuff in the database using that record.  But I cannot get the selection info from the selection page.</p>\n\n<p>I'll try to make this a pretty complete snapshot of the relevant code, but I may remove too much or leave too much in, sorry.</p>\n\n<p>my models.py:</p>\n\n<pre><code>urlpatterns = patterns('',\nurl(r'^$', 'dblook.views.index', name='home'),\nurl(r'^dblook3/', 'dblook.views.try3', name='home2'),\nurl(r'^dblook4/', 'dblook.views.try4', name='home3'),\n)\n</code></pre>\n\n<p>my dblook/models.py:</p>\n\n<pre><code>from django.db import models\nclass serial_number(models.Model):\n    def __unicode__(self):\n        return self.serialno\n        #return self.question\n    class Meta:\n        managed=False\n        db_table='serial_number'\n    sn_id = models.AutoField(primary_key=True)\n    serialno = models.CharField(max_length=128)\n    comment = models.ForeignKey(comment,null=True,db_column='comment')\n</code></pre>\n\n<p>my views.py (I will skip all the imports other than the database model import.  If anyone really wants them I'll update with them)</p>\n\n<pre><code>from dblook.models import *\nclass SerialnoSelectForm(forms.Form):\n    serialno = forms.CharField(max_length=16)\n    selected = forms.BooleanField()\n\nclass serialform(ModelForm):\n    class Meta:\n        model = serial_number\n        exclude=('comment','sn_id')\n    selected = forms.BooleanField()\n\nclass snselect(forms.Form):\n    sno = forms.ChoiceField()\n\ndef try3(request):\n    if ( request.POST ):\n        output = \"HEllo world, thanks for posting\"\n        return HttpResponse(output)\n    else:\n        sslst = snselect(serial_number.objects.filter(serialno__startswith=\"A128\").order_by('-serialno'))\n        t = loader.get_template('select_serialno.html')\n        c = Context({\n            'sslst': sslst,\n            })\n        c.update(csrf(request))\n        return HttpResponse(t.render(c))\n\ndef try4(request,dsn):\n    if ( request.POST ):\n        output = \"HEllo world, thanks for posting to 4\"\n        return HttpResponse(output)\n    else:\n        return HttpResponse(\"Error\")\n</code></pre>\n\n<p>And my template (select_serialno.html) is:</p>\n\n<pre><code>&lt;h1&gt;Select a serial number&lt;/h1&gt;\n &lt;ul&gt;\n   &lt;form method='post' action'='/dbtest4/{{serial_number.sn_id}}/showme'&gt;\n     {% csrf_token %}\n     {% for sn in sslst %}\n     &lt;input type=\"submit\" name=\"sn.serialno\" id=\"choice{{ forloop.counter }}\" value=\"{{choice.id}}\"/&gt;\n     &lt;label for=\"choice{{ forloop.counter }}\"&gt;{{ sn.serialno }}&lt;/label&gt;&lt;br/&gt;\n     {% endfor %}\n     &lt;input type=\"submit\" value=\"data\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>When I go to dblook3, I get a nice list from the database of serial numbers, along with a button that, if I hit goes immediately to the dblook4 URL (in this case, its ALWAYS '/dbtest4//showme/' instead of something like '/dbtest4/3/showme/).  Unfortunately, I cannot seem to have any way to tell what button they hit. </p>\n\n<p>No matter WHAT I put in for the 'stuff' in <code>&lt;form method='post' action'='/dbtest/{{stuff}}/showme'&gt;</code>, it is always empty.</p>\n\n<p>I also tried things like <code>if( 'choice' in request.POST ):</code> in try4 in veiws.py, but that didn't work either.</p>\n\n<p>So, how do I get ANY information about what was selected from 'look3' over to 'look4'?  I'll take just about anything...  However, if you can explain why I'm doing that hopefully your answer will not only solve my problem, but help others understand...</p>\n\n<p>(if the above looks pretty 'evolutionary' that's because I've been hacking on this for 3 days now...)</p>\n\n<p>Thanks!</p>\n"},{"tags":["django","django-permissions"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13080500,"title":"Django-guardian - where to assign default permission on object creation","body":"<p>I am starting an app that has a complex permission structure that will inevitably be managed by the users themselves. I have the following permissions in the model:</p>\n\n<pre><code>class Meta:\n    permissions = (\n    ('can_view', 'View project'),\n    ('manage_view', 'Can assign View project'),\n    ('can_edit', 'Edit project'),\n    ('manage_edit', 'Can assign Edit project'),\n    ('can_delete', 'Delete project'),\n    ('manage_delete', 'Can assign Delete project'),\n    ('creator', 'Full access to model features.'),\n    )\n</code></pre>\n\n<p>These will be managed at the object level with Django-guardian and I am using custom mixins to deal with all of the various combinations and features.</p>\n\n<p>The 'creator' permission is assigned to the initial creator of an object, and they can assign the other permissions to Users via an e-mail based invite system. </p>\n\n<p>My question surrounds the options are for assigning the creator permission on creation of the object. </p>\n\n<p>Some approaches I have thought of so far:</p>\n\n<p><strong>Assign in view after save</strong></p>\n\n<pre><code>newObject.save()\nassign('creator', User, newObject)\n</code></pre>\n\n<p>Generally, I prefer to get these types of events out of my views though.</p>\n\n<p><strong>Override save()</strong></p>\n\n<p>The problem with this method is I have to give the save access to the User object, which means also overriding the <strong>init</strong> to set self.request = request.</p>\n\n<p><strong>post_save signal</strong></p>\n\n<p>I know I could take advantage of this signal, but compared to the previous two I haven't attempted an implementation of this yet. </p>\n\n<p>Hopefully this provides enough insight into where I am at with things.</p>\n\n<p>I would love to know what the best of these methods would be, or, if they are all bad ideas what an alternative implementation might be.</p>\n\n<p>Thanks,</p>\n\n<p>JD</p>\n"},{"tags":["django","annotate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13279120,"title":"Django annotate weird behavior","body":"<p>I am using django annotate to display to users the rating and number of reviews for a certain place. I have three models to do this:</p>\n\n<pre><code>class Descriptions(models.Model):\n    name=models.CharField(max_length=50)\n    website=models.CharField(max_length=50,blank=True)\n    street1=models.CharField(max_length=50,blank=True)\n    street2=models.CharField(max_length=50,blank=True)\n    city=models.CharField(max_length=50,blank=True)\n    state=models.CharField(max_length=50,blank=True)\n    zip=models.CharField(max_length=5,blank=True)\n    description=models.TextField()\n    areas_related=models.TextField()\n    add_area=models.CharField(max_length=50,blank=True)\n    federal=models.NullBooleanField(null=True)\n    lat=models.TextField(blank=True)\n    long=models.TextField(blank=True)\n    creator=models.ForeignKey(User)\n\n    def __unicode__(self):\n        return u'%s %s %s %s %s %s %s %s %s %s %s %s %s' %(self.name,self.website,self.street1,\n        self.street2,self.city,self.state,self.zip,self.description,self.add_area, self.federal, self.lat, self.long, self.creator)\n</code></pre>\n\n<p>for the places. Then I have: </p>\n\n<pre><code>class Rating(models.Model):\n    rating=models.IntegerField(blank=True)\n    place=models.ForeignKey(Descriptions)\n\n    def __unicode__(self):\n        return u'%s %s' %(self.rating, self.place)\n</code></pre>\n\n<p>for the ratings. And finally: </p>\n\n<pre><code>class Review(models.Model):\n    user=models.ForeignKey(User)\n    place=models.ForeignKey(Descriptions)\n    review=models.TextField(blank=True)\n\n    def __unicode__(self):\n        return u'%s %s %s' % (self.user, self.place, self.review)\n</code></pre>\n\n<p>And I am using this to get the places, along with ratings and reviews: </p>\n\n<pre><code>relevant=Descriptions.objects.annotate(Avg('rating')).annotate(Count('review'))\n</code></pre>\n\n<p>... However, I have a ratings system of 1 to 5. When I input a rating, I get a value of 16 for avg, which then increases by .5 a new rating is added. Also, the count for review increases by 3 every time I add a rating. So, something strange is going on, but I'm not sure exactly what it is, especially considering that number of reviews increases by 3 for any value of rating I put in... Any help would be appreciated.</p>\n"},{"tags":["python","django","singleton","initialization","startup"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13277233,"title":"How can I run startup code in Django once the server is done initializing?","body":"<p>I would like to create a thread (maybe in the future a process) that inherits all the django env and settings but goes off to do its own monitoring. Ideally I would like this to be triggered when the Django server is done initializing. I've tried both methods below. The first one seems to run the Middleware initializer every time a request is made and both of them have the problem that my startup code only gets triggered when the first request to the server is made.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/2781383/where-to-put-django-startup-code\">Where to put Django startup code?</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/9259844/running-startup-code-right-after-django-settings-also-for-commands\">Running startup code right after Django settings? (also for commands)</a></p>\n\n<p>I've also seen that someone checked in some signal for this exact use case but it will only be available in django 1.6 or later.</p>\n\n<p>Any ideas how to work around this?</p>\n\n<p>Thanks!</p>\n"},{"tags":["django","django-settings"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":11888551,"title":"Django - ImproperlyConfiguredError, Guardian's ANONYMOUS_USER_ID","body":"<p>I am using django-guardian to handle object permissions. In my settings.py:</p>\n\n<pre><code>ANONYMOUS_USER_ID = -1\n</code></pre>\n\n<p>However, when I try to run the server, I get an improperly configured error:</p>\n\n<pre><code>django.core.exceptions.ImproperlyConfigured: In order to use django-guardian's ObjectPermissionBackend authorization backend you have to configure ANONYMOUS_USER_ID at your settings module\n</code></pre>\n\n<p>I suspect this may be due to the fact that I do <code>from guardian.shortcuts import assign</code> at the top of my settings.py, but I am not sure. Commenting out the import results in a successful server start, but trying to access any page gives me <code>AttributeError: 'Settings' object has no attribute 'ROOT_URLCONF'</code> which suggests that something is wrong with settings altogether (perhaps they are not being found correctly?).</p>\n"},{"tags":["django","django-mediagenerator"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6,"score":0,"question_id":13278252,"title":"Avoiding creating media bundles for single files with django-mediagenerator","body":"<p>One small issue that I have been having with <a href=\"https://django-mediagenerator.readthedocs.org/en/latest/\" rel=\"nofollow\">Django-Mediagenerator</a> is that when using the <code>include_media</code> tag...</p>\n\n<pre><code>{% load media %}\n{% include_media 'my_style.css' %}\n</code></pre>\n\n<p>... an error is thrown unless the <code>my_style.css</code> media bundle exists. However, in some cases, this would mean that my media bundle contains only one file.</p>\n\n<p>Is there a way to avoid creating media bundles for individual files?</p>\n"},{"tags":["django","django-mediagenerator"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":4,"score":0,"question_id":13278185,"title":"How to specify media bundles per application in django-mediagenerator?","body":"<p><a href=\"https://django-mediagenerator.readthedocs.org/en/latest/\" rel=\"nofollow\">Django-mediagenerator</a> has been pretty helpful so far, but thing that has been bothering me is that all <code>MEDIA_BUNDLES</code> are defined in <code>settings.py</code>. I would like to be able to define media bundles inside individual application folders.</p>\n\n<p>How can media bundles be separated by application, instead of all being centralized in <code>settings.py</code>?</p>\n"},{"tags":["css","django","web-applications","django-media","django-mediagenerator"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":12223396,"title":"django-mediagenerator CSS error","body":"<p>I'm using django-generator and it has been working rather well.</p>\n\n<p>However, on some of my machines it seems to have stopped translating url values inside CSS files. On some pages the CSS files will look like this:</p>\n\n<pre><code>background-image: url(\"../img/bg_icongray.png\");\n</code></pre>\n\n<p>And on some of them they will look like this:</p>\n\n<pre><code>background-image: url(\"/media/img/logo_large.png?version=f764f4a8b01b957a45898cd7c065fcd61718b5ed\");\n</code></pre>\n\n<p>Sometimes only some elements on the page will work, sometimes none of the will.</p>\n\n<p>both MEDIA_DEV_MODE and DEBUG are set to True, DEV_MEDIA_URL and PRODUCTION_MEDIA_URL are both set to '/media/'. Also getting different results on different machines - behavior seems completely random.</p>\n\n<p>I have nuked all of my *.pyc files and double-checked my settings.</p>\n\n<p>Any suggestions on where to <em>start</em> looking?</p>\n\n<hr>\n\n<p>Edit: As described <a href=\"https://bitbucket.org/Wilfred/django-mediagenerator/issue/48/in-development-mode-relative-url-in-css\" rel=\"nofollow\">here</a> this has to do with django 1.4 and how runserver handles threading. This stopped being an issue if runserver is run with the --nothreading option.</p>\n"},{"tags":["django","google-app-engine","django-nonrel","django-mediagenerator"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":10323013,"title":"Is it still possible to use django-mediagenerator on Google App Engine","body":"<p>I've been working on a existing project at a new company and one of the problems we're running into is Javascript code duplication. We're working in Google App Engine, and I have heard of the <a href=\"http://www.allbuttonspressed.com/projects/django-mediagenerator\" rel=\"nofollow\">Django media generator asset manager</a> which seems like it could solve some of our problems. However, after reading through the docs on that page and pages <a href=\"https://developers.google.com/appengine/articles/django\" rel=\"nofollow\">like this one on running Django in Google App Engine</a>, I'm not sure if it is even possible to run django-mediagenerator on Google App engine.</p>\n\n<p>Is it still possible to use django-mediagenerator on Google App Engine? Has the project gone stale? Is there some other media generator that I should be using in app engine?</p>\n\n<p>Any help would be appreciated. Thanks :)</p>\n"},{"tags":["django","web-services","cdn","amazon-cloudfront","django-mediagenerator"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":10963972,"title":"django-mediagenerator and a CDN","body":"<p>I am using django-mediagenerator for managing static files. It has been great, but I am trying to figure out how I could put the static files on a content delivery network. I will be using Amazon AWS.</p>\n\n<p>The way I see it, I could do one of two things:</p>\n\n<ul>\n<li>Upload the files to the CDN, and configure mediagenerator/django to point to the CDN's url </li>\n<li>Upload the files to the CDN and configure Apache to serve the files from CDN </li>\n</ul>\n\n<p>However, both of these do not strike me as particularly straight forward.</p>\n\n<p>Does one of those solutions sound better than the other one? Is there a different way of doing this?</p>\n"},{"tags":["django","gem","sass","django-mediagenerator"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13257431,"title":"Django-mediagenerator can't find Sass","body":"<p>I'm trying to setup django-mediagenerator with Sass, but whenever it tries to compile the <code>.scss</code> files, I get the following error:</p>\n\n<blockquote>\n  <p>ValueError: Failed to execute Sass. Please make sure that you have\n  installed Sass (http://sass-lang.com) and Compass\n  (http://compass-style.org). Error was: [Errno 2] No such file or\n  directory</p>\n</blockquote>\n\n<p>I've installed both the <code>sass</code> and <code>compass</code> gems...</p>\n\n<pre><code>gem install sass\ngem install compass\n</code></pre>\n\n<p>...And I can verify that they are both installed...</p>\n\n<pre><code>sass --version\ncompass --version \n</code></pre>\n\n<p>What exactly have I missed? Does <code>sass</code> need to be installed in a specific location? Do I need to set up some sort of virtual environment like I have with python?</p>\n\n<p><strong>Edit:</strong>\nIf I run <code>which sass</code> I get the following:</p>\n\n<pre><code>/Users/USER_NAME/.rvm/gems/ruby-1.9.3-p194/bin/sass\n</code></pre>\n"},{"tags":["django","list","tuples"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13277089,"title":"Django inconsistency of using tuple and list","body":"<p>Hi I am not sure if this has been asked before, I always gets mixed up using tuples and lists for defining stuff in django framework, eg. you need to use tuples to define list_display, list_filters in admin.py and use lists to define search_fields &amp; ordering fields. </p>\n\n<p>It's hard to remember these things, is there a reason not to consolidate it?</p>\n"},{"tags":["python","django","apache"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13271254,"title":"Django/Python convert PDF using shell (os.system/Popen) not working in production","body":"<p>I'm using libreoffice on CLI to convert some documents to PDFs within Django.</p>\n\n<p>This is in my view (and also tried in save method on model):</p>\n\n<pre><code>outdir = '/'.join([settings.MEDIA_ROOT, 'pdf'])\ncommand = ['libreoffice', '--headless', '--convert-to', 'pdf', '-outdir', outdir, form.instance.upload.path]\nstdout, stderr = subprocess.Popen(command).communicate()\n</code></pre>\n\n<p>I've also tried the following in place of <code>subprocess.Popen</code>:</p>\n\n<pre><code>os.system(\"libreoffice --headless --convert-to pdf --outdir %s %s\" % (outdir, instance.upload.path))                                                         \n</code></pre>\n\n<p>Then I check it out:</p>\n\n<pre><code># quick check new file exists                                                                                                                                                \nwith open(\"%s/%s.pdf\" % (outdir, os.path.splitext(instance.upload.name)[0])): pass\n</code></pre>\n\n<p>When I run them through the website is just doesn't work -- the PDF file isn't generated.</p>\n\n<p>Thing is: <strong>both these methods work</strong> both in my local environment and when the functions that they're in are called from <code>$ python manage.py shell</code> </p>\n\n<p>The problem is only in production.</p>\n\n<ul>\n<li>Django 1.4  </li>\n<li>Python 2.7.3 </li>\n<li>Server version: Apache/2.2.22 (Ubuntu) Server built:   Feb 13 2012 01:51:50 (Rackspace)</li>\n</ul>\n\n<hr>\n\n<p>Note that I thought I might be experiencing this bug: <a href=\"http://stackoverflow.com/questions/8309465/popen-does-not-work-anymore-with-apache-wsgi-and-python-2-7-2\">Popen does not work anymore with apache/wsgi and python 2.7.2?</a> ... </p>\n\n<p>Though Graham's work around as follows (I added this to my <code>apache2.conf</code> ) doesn't seem to change anything. </p>\n\n<pre><code>WSGIApplicationGroup %{GLOBAL}\n</code></pre>\n\n<p>My sys admin skills aren't great though and I may have done this wrong, and I'm totally stumped, any advice or directions of other things to try or work-arounds would be appreciated.</p>\n"},{"tags":["django","facebook","events"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13155024,"title":"How to get all facebook events?","body":"<p>I'm building a django app and I'm interested if there is a way to get all the newest/popular events from facebook.</p>\n\n<p>I want to get their title, location, description etc.</p>\n\n<p>EDIT:</p>\n\n<p>For the solution in the answer bellow to be successful i'll need the access token. It can't be done with the app token. Also I don't need to search through events but retrieve them sorted by popularity.</p>\n\n<p>Since i'm using django facebook for now i can get my users friends events (in which they are participating). Is there another way to retrieve them through the API?</p>\n"},{"tags":["django","sqlite"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":36,"score":3,"question_id":13052202,"title":"Hide Items from Django Query","body":"<p>We have a webapp that has several product names in the django db.  The db is queried for this table(?) and populates a drop down with these product names.  I would like to hide these product names from the query/drop down without removing them from the DB.  </p>\n\n<p>Is there a way I can do this in sqlite?</p>\n\n<p>I've inherited the project from a team member who has since left and am 2 days into my learning of Django so any assistance is welcome!</p>\n"},{"tags":["django","django-templates","django-template-tags","django-template-filters"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":21,"score":0,"question_id":13275520,"title":"Filter in Django if template tag not working","body":"<p>I have almost literally exactly what is in the django <a href=\"https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#filters\" rel=\"nofollow\">docs</a></p>\n\n<pre><code>{% if itineraries|length &gt; 1 %}\n\n    &lt;div&gt;\n        &lt;span&gt;Multiple itineraries were found for this search criteria&lt;/span&gt;\n        &lt;button id=\"showitins\"&gt;Show All&lt;/button&gt;\n    &lt;/div&gt;\n{% endif %}\n</code></pre>\n\n<p>And yet the div is showing up when <code>itineraries|length</code> is 0.</p>\n\n<p>I'm using Django 1.3.1, so I don't know if that's the problem-- I couldn't find that information. It wasn't in the 1.4 release notes, at least.</p>\n\n<p>What the heck is going on? Is this a 1.3 problem, or...?</p>\n\n<p>Edit: really looks like this was introduced in <a href=\"https://docs.djangoproject.com/en/dev/releases/1.2/#new-in-1-2-smart-if\" rel=\"nofollow\">1.2</a> and should be working. So what's the deal?</p>\n"},{"tags":["javascript","django","twitter-bootstrap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13241901,"title":"javascript and jquery script tags in bootstrap","body":"<p>I'm having a spot of trouble with bootstrap. I started having problems with the links in the <a href=\"http://twitter.github.com/bootstrap/components.html#navs\" rel=\"nofollow\">nav</a> component not being clickable. The links were fine when typed into the browser, but not when clicked. </p>\n\n<p>I rearranged the order of the script tags at the bottom of the body so the link to jQuery in my Django static directory came first and the links became 'clickable', although it broke other functionality like a menu drop-down and an accordion, which no longer opens. </p>\n\n<p>I've tried moving the script tags into the  section, switching them back; tried the development version of jQuery.... nothing seems to work.</p>\n\n<p>What's going on? How can I get both the links active and the javascript functionality to work.</p>\n\n<pre><code>  &lt;head&gt;\n        {% block head %}\n        # ...\n        # ...\n\n        {% load static %}\n\n            &lt;link href=\"{% static 'css/bootstrap.css' %}\" rel=\"stylesheet\"&gt;\n            &lt;link href=\"{% static 'css/custom.css' %}\" rel=\"stylesheet\"&gt;\n\n            &lt;style type=\"text/css\"&gt;\n              body {\n                padding-top: 60px;\n                padding-bottom: 40px;\n              }\n            &lt;/style&gt;\n            &lt;link href=\"{% static 'css/bootstrap-responsive.css' %}\" rel=\"stylesheet\"&gt;\n        {% endblock head %}\n\n   &lt;/head&gt;\n\n   &lt;body id=\"body\"&gt;\n          {% block body %} \n\n           #.....\n           #.....\n\n            &lt;!-- Le javascript\n            ================================================== --&gt;\n            &lt;!-- Placed at the end of the document so the pages load faster --&gt;\n\n            &lt;script src=\"{% static 'js/jquery-1.8.2.min.js' %}\"&gt;&lt;/script&gt;\n            &lt;script src=\"{% static 'js/bootstrap.min.js' %}\"&gt;&lt;/script&gt;\n\n\n          {% endblock body %}  \n  &lt;/body&gt;\n</code></pre>\n"},{"tags":["django","django-queries","manytomanyfield","django-many-to-many"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":13270513,"title":"Django: ManyToMany filter matching on ALL items in a list","body":"<p>I have such a Book model:</p>\n\n<pre><code>class Book(models.Model):\n    authors = models.ManyToManyField(Author, ...)\n    ...\n</code></pre>\n\n<p>In short: </p>\n\n<p>I'd like to retrieve the books whose authors are strictly equal to a given set of authors. I'm not sure if there is a single query that does it, but any suggestions will be helpful.</p>\n\n<p>In long:</p>\n\n<p>Here is what I tried, (that failed to run getting an AttributeError)</p>\n\n<pre><code># A sample set of authors\ntarget_authors = set((author_1, author_2))\n\n# To reduce the search space, \n# first retrieve those books with just 2 authors.\ncandidate_books = Book.objects.annotate(c=Count('authors')).filter(c=len(target_authors))\n\nfinal_books = QuerySet()\nfor author in target_authors:\n    temp_books = candidate_books.filter(authors__in=[author])\n    final_books = final_books and temp_books\n</code></pre>\n\n<p>... and here is what I got:</p>\n\n<pre><code>AttributeError: 'NoneType' object has no attribute '_meta'\n</code></pre>\n\n<p>In general, how should I query a model with the constraint that its ManyToMany field contains a set of given objects as in my case?</p>\n\n<p>ps: I found some relevant SO questions but couldn't get a clear answer. Any good pointer will be helpful as well. Thanks.</p>\n"},{"tags":["python","django","api","pil","django-piston"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":11192427,"title":"Change return-fields in read method django-piston","body":"<p>i'm using django-piston to create my api. I need to know if possible to change the return-fields according to a parameter. I'm trying to return a thumbnail field, but i need to have the option to pass the sizes of the thumbnail via URL.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["python","django","query","order","concatenation"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":37,"score":3,"question_id":13273805,"title":"django : concatenate 2 queries or special order?","body":"<p>I have to make such query :</p>\n\n<pre><code>similar_brokers_ = Profile.objects.filter(Q(tp=broker.tp) |  Q(md=broker.md)).exclude(Q(id=broker.id))[:4]\n</code></pre>\n\n<p>i need to get 4 similar brokers, which have the same <code>tp</code> field or <code>md</code> field</p>\n\n<p>so this query does it, but i need brokers with the same <code>tp</code> field go first, after them should go brokers with the same <code>md</code> field.</p>\n\n<p>how can i do it better?</p>\n\n<p>for example :</p>\n\n<pre><code>broker1  with tp=1, md=100\nbroker2  with tp=2, md=100\nbroker3  with tp=1, md=99\n</code></pre>\n\n<p>get brokers similat to <code>broker1</code> :\nfirst should go <code>broker3</code> (with <code>tp</code>=1) and after <code>broker2</code> (with <code>md</code>=100)</p>\n"},{"tags":["django","django-templates","django-debug-toolbar"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":9902640,"title":"Is there a way to use/bring up a console when viewing templates (using Django Debug Toolbar)?","body":"<p>I love <a href=\"https://github.com/robhudson/django-debug-toolbar\" rel=\"nofollow\">Django Debug Toolbar</a> and I mainly use it just to see the variables passed to the template (shown under the \"Templates\" tab on the right menu).</p>\n\n<p>But the variables are shown like this</p>\n\n<pre><code>{'form': &lt;django.forms.models.OrderForm object at 0x1033937d0&gt;}\n{'csrf_token': &lt;django.utils.functional.__proxy__ object at 0x103394cd0&gt;}\n{'perms': &lt;django.contrib.auth.context_processors.PermWrapper object at 0x103393510&gt;,\n 'user': &lt;django.utils.functional.SimpleLazyObject object at 0x10339b690&gt;}\n{'debug': True, 'sql_queries': '&lt;&lt;sql_queries&gt;&gt;'}\n{'LANGUAGES': '&lt;&lt;languages&gt;&gt;',\n 'LANGUAGE_BIDI': False,\n 'LANGUAGE_CODE': 'en-us'}\n{'MEDIA_URL': ''}\n{'STATIC_URL': '/static/'}\n{'TIME_ZONE': 'EDT'}\n{'messages': &lt;django.contrib.messages.storage.fallback.FallbackStorage object at 0x10339bb90&gt;}\n{'request': '&lt;&lt;request&gt;&gt;'}\n</code></pre>\n\n<p>For variables like <code>form</code>, <code>messages</code>, and <code>request</code>, this list isn't very informative. Is there a way to dig deeper and view all the possible attributes for these kinds of variables? Kind of like <a href=\"https://docs.djangoproject.com/en/1.4/intro/tutorial01/#playing-with-the-api\" rel=\"nofollow\">playing with the API</a> using <code>python manage.py shell</code> for templates?</p>\n"},{"tags":["django","django-cms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13272408,"title":"different language on site and in cms with Django","body":"<p>I have a German website built with Django. However, I would like the CMS backend to be English, while the configuration of the site should remain German for frontend. Is this possible in Django?\nUsing:\nDjango 1.3\nDjango-CMS 2.3</p>\n"},{"tags":["python","django","file","render"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13273291,"title":"django - render a file of a model to template","body":"<p>I have a model called Advertisement. This model has text field, title field, and file field.</p>\n\n<p>I am successfully saving all 3 of these fields into the model. </p>\n\n<p>Now I need to show them in template. My vision is: </p>\n\n<pre><code>ads = Advertisement.objects.all()\nreturn render_to_response('page.html', {'ads':ads},context_instance=RequestContext(request))\n</code></pre>\n\n<p>and in my page.html: </p>\n\n<pre><code>{% for each_ad in ads %}\n&lt;p&gt;{{each_ad.title}}&lt;/p&gt;\n&lt;p&gt;{{each_ad.text}}&lt;/p&gt;\n&lt;p&gt;&lt;a href=\"/ads/{{each_ad.file_pdf}}&gt;{{each_ad.file_pdf.name}}&lt;/a&gt;&lt;/p&gt;\n{% endfor %}\n</code></pre>\n\n<p>Does this seem right?  If not, please show me the way so I can learn. Thanks!</p>\n"},{"tags":["django","django-templates","django-authentication","django-registration"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":451,"score":0,"question_id":5126033,"title":"django extends different base templates","body":"<p>I understand we can use \"extends variable\" in the template to switch between two different extended templates. \ne.g.</p>\n\n<pre><code>  views:\n     if something:\n         base = 'base1.html'\n     else:\n         base = 'base2.html'\n     return render_to_response ('template.html', {'base':base})\n\n  template.html:\n     {% extends base %}\n</code></pre>\n\n<p>Normally that works fine.  However, my problem is that I am using django-registration of which I don't have to write my own view to handle the registration and login process. That also means that I am not able to pass the variable to the template.  Though I do have the registration templates under my project directory. (like login.html)</p>\n\n<p>Unfortunately, Django can't do this in the template:</p>\n\n<pre><code>   {% if something %}\n     {% extends 'base1.html' %}\n   {% else %}\n     {% extends 'base2.html' %}\n   {% endif %}\n</code></pre>\n\n<p>The only way I know that the 'variable base' can be passed down to the auth-login is to write my own views like login, logout,etc.  This seems like not fitting the DRY model and fairly error prone going forward.</p>\n\n<p>Is there another way that I can accomplish this?  Or any pointers to workaround the problem?</p>\n\n<p>Thanks.</p>\n\n<p>-P</p>\n"},{"tags":["python","django","amazon-s3","amazon-web-services","boto"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13273727,"title":"Boto upload to S3 not working for certain file types","body":"<p>The following code stores uploaded files in S3:</p>\n\n<pre><code>def store_in_s3(filename, filecontent, type, modelname, format, manufacturer, adder_id):\n    extension = os.path.splitext(filename)[1]\n    filename = modelname + \"-\" + manufacturer + \"-\" + type + \"-\" + format + \"-\" + str(adder_id) + extension\n    pathtofile = \"Parts/%s\" % (filename)\n    conn = S3Connection(settings.AWS_ACCESS_KEY_ID, settings.AWS_SECRET_ACCESS_KEY)\n    b = conn.create_bucket('mybucket')\n    mime = mimetypes.guess_type(filename)[0]\n    k = Key(b)\n    k.key = \"/media/Parts/%s\" % (filename)\n    k.set_metadata(\"Content-Type\", mime)\n    k.set_contents_from_string(filecontent)\n    k.set_acl(\"public-read\")\n    return pathtofile\n</code></pre>\n\n<p>It works fie for images and text files, but when I try to upload certain file types I get this back and not sure why:</p>\n\n<p><code>&lt;Error&gt;&lt;Code&gt;SignatureDoesNotMatch&lt;/Code&gt;&lt;Message&gt;The request signature we calculated does not match the signature you provided. Check your key and signing method.&lt;/Message&gt;&lt;StringToSignBytes&gt;50 55 54 0a 66 33 5a 74 6f 74 50 4e 50 4a 62 59 69 6e 67 68 38 38 45 39 45 67 3d 3d 0a 4e 6f 6e 65 0a 57 65 64 2c 20 30 37 20 4e 6f 76 20 32 30 31 32 20 31 36 3a 30 38 3a 35 37 20 47 4d 54 0a 2f 73 6e 61 70 65 64 61 2f 6d 65 64 69 61 2f 43 41 44 50 61 72 74 73 2f 61 64 37 31 31 2d 41 53 44 41 2d 4d 6f 64 65 6c 2d 53 50 49 43 45 2d 31 2e 63 69 72&lt;/StringToSignBytes</code></p>\n\n<p>Traceback:</p>\n\n<pre><code>File \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/core/handlers/base.py\" in get_response\n  111.                         response = callback(request, *callback_args, **callback_kwargs)\nFile \"/Users/nb/Desktop/spicestore/spices/views.py\" in add_model\n  577.          new_model.content=store_in_s3(filename, filecontent, type, modelname, format, manufacturer, adder_id)\nFile \"/Users/nb/Desktop/spicestore/store_in_s3.py\" in store_in_s3\n  24.     k.set_contents_from_string(filecontent)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/s3/key.py\" in set_contents_from_string\n  1124.                                         encrypt_key=encrypt_key)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/s3/key.py\" in set_contents_from_file\n  994.                            chunked_transfer=chunked_transfer, size=size)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/s3/key.py\" in send_file\n  727.                                                    query_args=query_args)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/s3/connection.py\" in make_request\n  468.                 override_num_retries=override_num_retries)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/connection.py\" in make_request\n  910.         return self._mexe(http_request, sender, override_num_retries)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/connection.py\" in _mexe\n  810.                                       request.body, request.headers)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/s3/key.py\" in sender\n  684.                     response.status, response.reason, body)\n\nException Type: S3ResponseError at /spices/add\nException Value: S3ResponseError: 403 Forbidden\n</code></pre>\n"},{"tags":["django","django-models","django-forms","django-templates","django-views"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13273559,"title":"Django Template Styles and CSS disappear with middleware","body":"<p>I have custom middleware, when I add it to my MIDDLEWARE_CLASSES tuple in my settings.py all of the css and images on the site disappear leaving the site with just text.</p>\n\n<p><strong>middleware.py</strong></p>\n\n<pre><code>from django.shortcuts import redirect\nfrom django.core import urlresolvers\n\nclass AcceptTOSMiddleware(object):\n    def process_request(self, request):\n        login_url = urlresolvers.reverse('login')\n        tos_url = urlresolvers.reverse('tos')\n        if request.path not in [login_url, tos_url]:\n            profile = request.user.get_profile()\n            if not profile.tos:\n                return redirect(tos_url)\n        return None\n</code></pre>\n\n<p><strong>settings.py</strong></p>\n\n<pre><code>MIDDLEWARE_CLASSES = (\n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.middleware.locale.LocaleMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',\n    'pagination.middleware.PaginationMiddleware',\n    'utils.middleware.AcceptTOSMiddleware'\n)\n</code></pre>\n\n<p>Does anyone know why this would happen?</p>\n"},{"tags":["django","api","django-piston"],"answer_count":3,"favorite_count":9,"up_vote_count":15,"down_vote_count":0,"view_count":5655,"score":15,"question_id":8430579,"title":"Django RESTful API - django-piston vs. django-tastypie","body":"<p>We're looking for a general RESTful API solution for our Django project. We would use the API at first for Ajax calls on the web site and later for mobile apps, external apps and things like that.</p>\n\n<p>I found two modules witch seem to be widely used. <a href=\"https://bitbucket.org/jespern/django-piston/wiki/Home\">django-piston</a> and <a href=\"https://github.com/toastdriven/django-tastypie\">django-tastypie</a></p>\n\n<p>From what I read, piston seems to be older and thus more mature but maybe a bit outdated?! \nWhile tastypie is relatively new and nicely documented.</p>\n\n<p>What would be the best thing to go with? <strong>django-piston</strong> or <strong>django-tastypie</strong>?\nImportant for us (ordered by priority): Continuos maintenance of the source, documentation, stability, ease of use.</p>\n"},{"tags":["javascript","jquery","django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":45,"score":0,"question_id":13271629,"title":"Get elements of a query-set with a jquery get function. Django","body":"<p>In my django app I would like to display a text when a user clicks on a button, without refreshing the page. When the user clicks again, I would like an other text to be displayed, still without refreshing the page.\nThe informations (texts) I wan't to display are in a query set, named \"information\".</p>\n\n<p>So I would like to know how to accomplish that.</p>\n\n<p>Here is the way I try to do it:</p>\n\n<p>I create a view where I store my query set:</p>\n\n<pre><code>    def get_information (request):\n         information= Information.objects.filter(object1__id= X)\n</code></pre>\n\n<p>Then I  create a jquery get function (in the template of the page where the user clicks) in order to get informations on this list:</p>\n\n<pre><code>    function get_info(){\n    $.get('/mysite/get_information', {'information':information}, function(data) {\n      $('.information').html(data); \n      });\n      };\n</code></pre>\n\n<p>And then I render it in my template with a submit button and a onclick=\"get_info\".</p>\n\n<p>But I don't know how to make the request get a different information at each request, in order that the user does not get the same information twice.</p>\n\n<p>Thank you a lot for your help.</p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13267185,"title":"delete ManyToMany relationship","body":"<p>how do you delete a ManyToMany relationship in django. how will youu remove m2m then delete the foto this is my models below thanks</p>\n\n<pre><code>class Picture(models.Model):\n    owner = models.ForeignKey(User,blank = True)\n    caption = models.CharField(max_length=150, blank=True, null=True)\n    image = ImageField(upload_to='images/',blank = True, null = True)\n\nclass Land(Properies):\n    photo = models.ManyToManyField(Picture,blank=True,related_name='Land_Pictures',null = True)\n</code></pre>\n\n<p>i have tried to delete it this way</p>\n\n<pre><code>checked_list = []\nstart = 1            \nland_photos = sorted(list(land.photo.select_related()),reverse =True)\nwhile start &lt; 8:\n    photo = 'photo%s' % start\n    checked = form.cleaned_data[photo]\n    if checked != None:\n        checked_list.append(land_photos[start - 1])\n        start += 1            \nfor a_foto in checked_list:\n     land.photo.remove(a_foto)\n     try:\n         a_foto.remove_all_file()\n         a_foto.delete()\n     except OSError:\n         pass\n</code></pre>\n\n<p>and then i get an error like this</p>\n\n<pre><code>Exception Type:     AssertionError\nException Value:    \nPicture object can't be deleted because its id attribute is set to None.\n</code></pre>\n"},{"tags":["django","solr","django-haystack"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13269877,"title":"No result for django + haystack 1.2.7 and solr 3.6.1","body":"<p>I'm having trouble getting results back.</p>\n\n<p>This is what I've got so far:</p>\n\n<p>search_indexes.py</p>\n\n<pre><code>class CompanyIndex(SearchIndex):\n    text = CharField(document=True, use_template=True)\n    name = CharField(model_attr='name')\n    sector = CharField(model_attr='sector')\n\n    def get_model(self):\n        return Company\n\n    def index_queryset(self):\n        return self.get_model().objects.all()\n</code></pre>\n\n<p>site.register(Company, CompanyIndex)</p>\n\n<pre><code>class CompanySearchForm(ModelSearchForm):\n    name = forms.CharField(max_length=64, required=False)\n    sector = forms.MultipleChoiceField(choices=SECTORS_CHOICES, required=False)\n\n    def search(self):\n        # First, store the SearchQuerySet received from other processing.\n        sqs = super(CompanySearchForm, self).search()\n        print \"fgdgdfgdfgdfg\"\n        if self.is_valid():\n            # Check to see if a start_date was chosen.\n            if self.cleaned_data['name']:\n                print \"%s\" % self.cleaned_data['name']\n                sqs = sqs.filter(name__exact=self.cleaned_data['name'])\n\n            # Check to see if an end_date was chosen.\n            if self.cleaned_data['sector']:\n                sqs = sqs.filter(sector__contains=self.cleaned_data['sector'])\n\n        return sqs\n</code></pre>\n\n<p>and urls:</p>\n\n<pre><code>sqs = SearchQuerySet()\n    url(r'^search/', SearchView(\n    template='search/search.html',\n    form_class=CompanySearchForm,\n    searchqueryset=sqs,\n), name='haystack_search'),\n</code></pre>\n\n<p>I'm using the template from haystack documentation.\ni see no results.</p>\n\n<p>I appreciate any help</p>\n"},{"tags":["django","translation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13268891,"title":"Translating Django admin interface","body":"<p>I'm trying to customize Django generated admin interface so it will display in my native language Hebrew (including right-to-left orientation) but I cant seem to find an how-to or any reference whatsoever.<br>\nThe <a href=\"https://docs.djangoproject.com/en/dev/topics/i18n/translation/\" rel=\"nofollow\">Django translation docs</a> hasn't given me a clear answer, even though apparently someone already created an <a href=\"https://github.com/django/django/commit/8a861942cd\" rel=\"nofollow\">Hebrew translation</a>.</p>\n\n<p>Any help would be greatly appreciated!</p>\n"},{"tags":["python","regex","django","string"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":70,"score":5,"question_id":13266524,"title":"How fill a regex string with parameters","body":"<p>I would like to fill regex variables with string.</p>\n\n<pre><code>import re\n\nhReg = re.compile(\"/robert/(?P&lt;action&gt;([a-zA-Z0-9]*))/$\")\nhMatch = hReg.match(\"/robert/delete/\")\nargs = hMatch.groupdict()\n</code></pre>\n\n<p>args variable is now a dict with {\"action\":\"delete\"}.</p>\n\n<p>How i can reverse this process ?  With args dict and regex pattern, how i can obtain the string \"/robert/delete/\" ?</p>\n\n<p>it's possible to have a function just like this ?</p>\n\n<pre><code>def reverse(pattern, dictArgs):\n</code></pre>\n\n<p>Thank you</p>\n"},{"tags":["python","django","pycrypto"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":13077109,"title":"How can I create an encrypted django field that converts data when it's retrieved from the database?","body":"<p>I have a custom EncryptedCharField, which I want to basically appear as a CharField when interfacing UI, but before storing/retrieving in the DB it encrypts/decrypts it.</p>\n\n<p>The <a href=\"https://docs.djangoproject.com/en/dev/howto/custom-model-fields/\" rel=\"nofollow\">custom fields documentation</a> says to:</p>\n\n<ol>\n<li>add <code>__metaclass__ = models.SubfieldBase</code></li>\n<li>override to_python to convert the data from it's raw storage into the desired format</li>\n<li>override get_prep_value to convert the value before storing ot the db.</li>\n</ol>\n\n<p>So you think this would be easy enough - for 2. just decrypt the value, and 3. just encrypt it.</p>\n\n<p>Based loosely on <a href=\"http://djangosnippets.org/snippets/1095/\" rel=\"nofollow\">a django snippet</a>, and the documentation this field looks like:</p>\n\n<pre><code>class EncryptedCharField(models.CharField):\n  \"\"\"Just like a char field, but encrypts the value before it enters the database, and    decrypts it when it\n  retrieves it\"\"\"\n  __metaclass__ = models.SubfieldBase\n  def __init__(self, *args, **kwargs):\n    super(EncryptedCharField, self).__init__(*args, **kwargs)\n    cipher_type = kwargs.pop('cipher', 'AES')\n    self.encryptor = Encryptor(cipher_type)\n\n  def get_prep_value(self, value):\n     return encrypt_if_not_encrypted(value, self.encryptor)\n\n  def to_python(self, value):\n    return decrypt_if_not_decrypted(value, self.encryptor)\n\n\ndef encrypt_if_not_encrypted(value, encryptor):\n  if isinstance(value, EncryptedString):\n    return value\n  else:\n    encrypted = encryptor.encrypt(value)\n    return EncryptedString(encrypted)\n\ndef decrypt_if_not_decrypted(value, encryptor):\n  if isinstance(value, DecryptedString):\n    return value\n  else:\n    encrypted = encryptor.decrypt(value)\n    return DecryptedString(encrypted)\n\n\nclass EncryptedString(str):\n  pass\n\nclass DecryptedString(str):\n  pass\n</code></pre>\n\n<p>and the Encryptor looks like:</p>\n\n<pre><code>class Encryptor(object):\n  def __init__(self, cipher_type):\n    imp = __import__('Crypto.Cipher', globals(), locals(), [cipher_type], -1)\n    self.cipher = getattr(imp, cipher_type).new(settings.SECRET_KEY[:32])\n\n  def decrypt(self, value):\n    #values should always be encrypted no matter what!\n    #raise an error if tthings may have been tampered with\n    return self.cipher.decrypt(binascii.a2b_hex(str(value))).split('\\0')[0]\n\n  def encrypt(self, value):\n    if value is not None and not isinstance(value, EncryptedString):\n      padding  = self.cipher.block_size - len(value) % self.cipher.block_size\n      if padding and padding &lt; self.cipher.block_size:\n        value += \"\\0\" + ''.join([random.choice(string.printable) for index in range(padding-1)])\n      value = EncryptedString(binascii.b2a_hex(self.cipher.encrypt(value)))\n    return value\n</code></pre>\n\n<p>When saving a model, an error, Odd-length string, occurs, as a result of attempting to decrypt an already decrypted string.  When debugging, it appears as  to_python ends up being called twice, the first with the encrypted value, and the second time with the decrypted value, but not actually as a type Decrypted, but as a raw string, causing the error.  Furthermore get_prep_value is never called.</p>\n\n<p>What am I doing wrong?</p>\n\n<p>This should not be that hard - does anyone else think this Django field code is very poorly written, especially when it comes to custom fields, and not that extensible?  Simple overridable pre_save and post_fetch methods would easily solve this problem.</p>\n"},{"tags":["python","django","testing","sqlite3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13272593,"title":"Django sqlite3 test in memory missing table","body":"<p>I'm using Django 1.3. When I set TEST_NAME on some file it works, but very slow.\nBut when TEST_NAME is ':memory:' django complain about missing tables.</p>\n\n<p>What can be wrong?\nThx for any help.</p>\n"},{"tags":["django","google-app-engine","django-nonrel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13265340,"title":"Django : GAE : non rel : maximum recursion depth exceeded in cmp","body":"<p>I was learning django with GAE. Tutorial link: <a href=\"http://f.souza.cc/2010/08/flying-with-django-on-google-app-engine.html\" rel=\"nofollow\">http://f.souza.cc/2010/08/flying-with-django-on-google-app-engine.html</a> </p>\n\n<p>Can anyone please tell me the reason? Why am I getting this error?</p>\n\n<pre><code>File \"/usr/local/lib/python2.7/dist-packages/django/db/models/fields/subclassi\n  return func(*args, **kwargs)\nFile \"/usr/local/lib/python2.7/dist-packages/django/db/models/fields/subclassi\n  return func(*args, **kwargs)\nFile \"/usr/local/lib/python2.7/dist-packages/django/db/models/fields/__init__.\n  return connection.creation.db_type(self)\nRuntimeError: maximum recursion depth exceeded in cmp\n</code></pre>\n\n<p>How to fix it ?</p>\n"},{"tags":["django","oracle","orm","blob","blobstorage"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13270619,"title":"reading raw binary data from blob columns using oracle backend","body":"<p>I'm working with oracle legacy DB and need to read and write binary data (png images, and and MDL Molfiles).\nDjango's inspectdb command generated text fields for these columns, saying that's only a guess.\nNow, when I'm trying to retrieve a value from this class fields i get:\nDjangoUnicodeDecodeError: 'utf8' codec can't decode byte 0x89 in position 0: invalid start byte.\nerror.</p>\n\n<p>Is there any way to read and write these columns?\nAny help would be appreciated.</p>\n"},{"tags":["django"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":994,"score":2,"question_id":3578882,"title":"How to specify the login_required redirect url in django?","body":"<p>I have a view function:</p>\n\n<pre><code>@login_required\ndef myviev():\n    do something\n    responce something\n</code></pre>\n\n<p>How can I specify the exact url for this view function to be redirected? </p>\n"},{"tags":["xml","django","binding","schema","pyramid"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":69,"score":5,"question_id":12866601,"title":"PyXB and python frameworks","body":"<p>I used <a href=\"http://pyxb.sourceforge.net/\" rel=\"nofollow\">PyXB</a> to generate Python modules out of a java/spring platform that exposes its classes schemas in XSD format via a RESTfull API.</p>\n\n<p>I am now able to parse the XML data that the same platform serves, using those PyXB binding classes/modules.</p>\n\n<p>My question is:</p>\n\n<ul>\n<li>How can I leverage those classes, in frameworks like Django or\npyramid, to build dynamic model forms, tables, etc, as I would do\nusing models coming from models.py django ORM, or via <a href=\"http://docs.pylonsproject.org/projects/colander/en/latest/\" rel=\"nofollow\">colander</a>/<a href=\"http://docs.pylonsproject.org/projects/deform/en/latest/\" rel=\"nofollow\">deform</a>\nor <a href=\"http://packages.python.org/pyramid_simpleform/\" rel=\"nofollow\">pyramid-simpleform</a>?</li>\n<li>Has anybody used PyXB classes in any of those\nframeworks yet?</li>\n</ul>\n"},{"tags":["django","joomla","override","subclass"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":97,"score":1,"question_id":1746994,"title":"What is the cleanest way to add code to contrib.auth","body":"<p>I've migrated an old joomla installation over to django. The password hashes is an issue though. I had to modify the get_hexdigest in contrib.auth.models to have an extra if statement to reverse the way the hash is generated.</p>\n\n<pre><code># Custom for Joomla\nif algorithm == 'joomla':\n    return md5_constructor(raw_password + salt).hexdigest()\n# Djangos original md5\nif algorithm == 'md5':\n    return md5_constructor(salt + raw_password).hexdigest()\n</code></pre>\n\n<p>I also added the following to the User model to update the passwords after login if they have the old joomla style:</p>\n\n<pre><code># Joomla Backwards compat\nalgo, salt, hsh = self.password.split('$')\nif algo == 'joomla':\n    is_correct = (hsh == get_hexdigest(algo, salt, raw_password))\n    if is_correct:\n        # Convert the password to the new more secure format.\n        self.set_password(raw_password)\n        self.save()\n    return is_correct\n</code></pre>\n\n<p>Everything is working perfectly but I'd rather not edit this code directly in the django tree. Is there a cleaner way to do this in my own project?</p>\n\n<p>Thanks</p>\n"},{"tags":["django","django-south"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":1479,"score":3,"question_id":6172209,"title":"How should I be setting SOUTH_DATABASE_ADAPTERS for my Django app that uses South?","body":"<p>I've extended the mysql backend that comes with Django and it works just great... until I try to use South with my app. Every time I try a schemamigration South tells me </p>\n\n<blockquote>\n  <p>There is no South database module 'south.db.None' for your database. Please either choose a supported database, check for SOUTH_DATABASE_ADAPTER[s] settings, or remove South from INSTALLED_APPS.</p>\n</blockquote>\n\n<p>So far I've tried adding the following to my <code>settings_local.py</code>:</p>\n\n<pre><code>SOUTH_DATABASE_ADAPTERS = {\n    'myapp.database.backends.mysql': \"south.db.mysql\"\n}\n</code></pre>\n\n<p>to no avail. What am I missing?</p>\n"},{"tags":["python","django","unit-testing","selenium","webdriver"],"answer_count":5,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2040,"score":0,"question_id":9103837,"title":"How do I create a Selenium Webdriver test to verify an element is not present?","body":"<p>I am creating unit tests for my Django app in Selenium Webdriver.</p>\n\n<p>I have an AJAX method that deletes a Topic from the database.\nI'm trying to figure out how to verify that the deleted Topic is no longer present on the page.</p>\n\n<p>I am trying to catch the Exception that the should be generated when Webdriver can't find an element:\nselenium.common.exceptions.NoSuchAttributeException  </p>\n\n<p>Instead I see an error:  </p>\n\n<pre><code>*** URLError: &lt;urlopen error timed out&gt;\n</code></pre>\n\n<p>Here is how I have setup the tests:  </p>\n\n<pre><code>from selenium import webdriver\nfrom django.utils import unittest  \n\nclass TestAuthentication(unittest.TestCase):    \n    scheme = 'http'    \n    host = 'localhost'    \n    port = '4444'    \n\n\n    def setUp(self):    \n        self._driver = webdriver.Firefox()    \n        self._driver.implicitly_wait(10)    \n\n    def login_as_Kallie(self):    \n        # Kallie has manual login    \n        self._driver.get('http://localhost:8000/account/signin/')    \n        user = self._driver.find_element_by_id('id_username')    \n        user.send_keys(\"Kallie\")    \n        password = self._driver.find_element_by_id('id_password')    \n        password.send_keys('*********')    \n        submit = self._driver.find_element_by_id('blogin')    \n        submit.click()    \n\n    def test_Kallie_can_delete_topic(self):    \n        self.login_as_Kallie()    \n        self._driver.find_element_by_link_text(\"Topic to delete\").click()    \n        self._driver.find_element_by_xpath(\"/html/body/div/div[4]/div/div/div[2]/div/table/tbody/tr/td[2]/div/div[3]/span[5]/a\").click()    \n        self._driver.find_element_by_class_name('dialog-yes').click()    \n        self._driver.get(\"http://localhost:8000/questions/\")    \n        # this is the Python exception to catch: selenium.common.exceptions.NoSuchAttributeException    \n        self.assertRaises('selenium.common.exceptions.NoSuchAttributeException', self._driver.find_element_by_link_text(\"Topic to delete\"))    \n\n    def tearDown(self):    \n        self._driver.quit()    \n</code></pre>\n\n<p>How can I test that a Element of the page is absent?   </p>\n"},{"tags":["django","aggregate","django-aggregation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12028447,"title":"Efficiency of aggregate and annotate vs signals","body":"<p>I want to count the number of contributions a user made to my site so I can rank them on the site. I managed to write some beautiful code which does exactly that, but on a per user basis. </p>\n\n<p>Because the user get's different amounts of points for different fields, it checks certain fields on a model and whether or not the user put a value in them. It then multiplies these values with their weights to give a total score.</p>\n\n<p>Nothing says it better then a bit of code:</p>\n\n<pre><code>class UserContribCounter(object):\n    \"\"\"Can count the number of points a user got for his contributions\"\"\"\n    weight_dict = {'poster':2, 'title':1}\n\n    def __init__(self, user):\n        if isinstance(user, User):\n            self.user = user\n        else:\n            raise Exception('Not a valid user instance.')\n\n    def set_contrib_points(self):\n        \"\"\"Some dark magic counts the number of times a certain field was filled out\"\"\"\n        self.unweighted = Movie.objects.filter(user = self.user).aggregate(poster=Count('poster'),title=Count('title'))\n\n    def get_contrib_points(self):\n        \"\"\"Multiplies the number of times a field was filled out with their weights to calculate the total number of points\"\"\"\n        try:\n            self.unweighted\n        except AttributeError:\n            self.set_contrib_points()\n\n        return sum([self.weight_dict[key] * value for key, value in self.unweighted.items()])\n</code></pre>\n\n<p>I also want to show a top 10, so I need to get the top 10 users. This means I will either have to write a complex aggregation which at the moment I keep failing to do, or I could use a signal in the following way:</p>\n\n<p>When a model gets saved, catch the post_save signal. Then use my existing class to recount the points for the user, and store it in the users profile. This way I can sort the users by the value in their profile, which is trivial.</p>\n\n<p>The question is, what will be more efficient, doing a recount every time a model get's saved, or a rather complex aggregation function. I know this will depend on a lot of things, but I am sure that from a conceptional point of view, there should be reasons to choose one over the other. Please note that some of the field I will check in the aggregate will also be relational, so I am not sure how that will effect performance.</p>\n\n<p>Thanks in advance,</p>\n\n<p>tBuLi</p>\n"},{"tags":["python","django"],"answer_count":4,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":1128,"score":8,"question_id":1912351,"title":"Django: Where to put helper functions?","body":"<p>I have a couple of functions that i wrote that I need to use in my django app. Where would I put the file with them and how would i make them callable whithin my views?</p>\n"},{"tags":["django","django-forms","django-crispy-forms"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13214166,"title":"django crispy-forms inline forms","body":"<p>I'm trying to adopt crispy-forms and bootstrap and use as much of their functionality as possible instead of inventing something over and over again.</p>\n\n<p>Is there a way to have inline forms functionality with crispy-forms/bootstrap like django-admin forms have?</p>\n\n<p>Here is an example:</p>\n\n<pre><code>class NewProjectForm(forms.Form):\n    name = forms.CharField(required=True, label=_(u'Название проекта'), widget=forms.TextInput(attrs={'class':'input-block-level'}))\n    group = forms.ModelChoiceField(required=False, queryset=Group.objects.all(), label=_(u'Группа проектов'), widget=forms.Select(attrs={'class':'input-block-level'}))\n    description = forms.CharField(required=False, label=_(u'Описание проекта'), widget=forms.Textarea(attrs={'class':'input-block-level'}))\n\n    class Meta:\n        model = Project\n        fields = ('name','description','group')\n\n    def __init__(self, *args, **kwargs):\n        self.helper = FormHelper()\n        self.helper.form_class = 'horizontal-form'\n        self.helper.form_action = 'submit_new_project'\n        self.helper.layout = Layout(\n            Field('name', css_class='input-block-level'),\n            Field('group', css_class='input-block-level'),\n            Field('description',css_class='input-block-level'),\n        )\n        self.helper.add_input(Submit('submit',_(u'Создать проект')))\n        self.helper.add_input(Submit('cancel',_(u'Я передумал')))\n        super(NewProjectForm, self).__init__(*args, **kwargs)\n</code></pre>\n\n<p>it will display a decent form:</p>\n\n<p><img src=\"http://i.stack.imgur.com/yTX13.png\" alt=\"example of single form rendered with crispy-forms\"></p>\n\n<p>How do I go about adding a form that basically represents this model:</p>\n\n<pre><code>class Link(models.Model):\n    name = models.CharField(max_length=255, blank=False, null=False, verbose_name=_(u'Название'))\n    url = models.URLField(blank=False, null=False, verbose_name=_(u'Ссылка'))\n    project = models.ForeignKey('Project')\n</code></pre>\n\n<p>So there will be a project and name/url links and way to add many, like same thing is done in django-admin where you are able to add extra 'rows' with data related to your main model. On the sreenshot below you are able to fill out data for 'Question' object and below that you are able to add data for QuestionOption objects -you are able to click the '+' icon to add as many QuestionOptions as you want.</p>\n\n<p>I'm not looking for a way to get the forms auto-generated from models (that's nice but not the most important) - is there a way to construct a form that will let you add 'rows' of data like django-admin does?</p>\n\n<p><img src=\"http://i.stack.imgur.com/ipSEB.png\" alt=\"screenshot of django-admin\"></p>\n"},{"tags":["django","django-admin"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":101,"score":3,"question_id":12384973,"title":"Django: Admin inline forms initial data for every instance","body":"<p>I've been reading a lot but I don't seem to be able to figure out a solution to this.</p>\n\n<p>I'm writing an application in Django, I'm still writing the admin side.</p>\n\n<p>I have a model called \"Environments\" and a model called \"Servers\", there is a ForeignKey relation between Servers and Environments such as a given Environment has several servers.</p>\n\n<p>When modifying the \"add\" form for Environments in the admin interface I use a Inline form to be able to visualize the list of Servers that will be associated to the Environment, something like this:</p>\n\n<pre><code>class ServerInline(admin.TabularInline):\n    model = Server\n    extra = 39\n\nclass EnvironmentAdmin(admin.ModelAdmin):\n    inlines = [ServerInline]\n</code></pre>\n\n<p>Pretty simple right?</p>\n\n<p>What I would like to do is prepopulate the Servers inline forms with default values, I've been able to prepopulate them with the same value doing this:</p>\n\n<pre><code>class ServerInlineAdminForm(forms.ModelForm):\n    class Meta:\n        model = Server\n\n    def __init__(self, *args, **kwargs):\n        super(ServerInlineAdminForm, self).__init__(*args, **kwargs)\n        self.initial['name']='Testing'\n\nclass ServerInline(admin.TabularInline):\n    form = ServerInlineAdminForm\n    model = Server\n    extra = 39\n\nclass EnvironmentAdmin(admin.ModelAdmin):\n    inlines = [ServerInline]\n</code></pre>\n\n<p>But this isn't what I want, I  would like to be able to initialize the 39 Server form instances with 39 different values that I have in a list. What would be the best way to do that??</p>\n\n<p>Thank you!</p>\n"},{"tags":["html","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13268787,"title":"How to create a user account profile with django (front end)","body":"<p>I have an ongoing project that i am building with the DJANGO webframework. I have successfully created a registration page and upon successful registration and login;</p>\n\n<h1>Where i need your help</h1>\n\n<ol>\n<li><p>When a user logs-in into his account, I want that user to be able to see his account, profile and recent actions.(NB: from the front end and not the Django admin end)</p></li>\n<li><p>Is it advisable to have 2 different apps, and i want to associate the user input submitted on one app to a registered user on the other app?</p></li>\n</ol>\n"},{"tags":["python","django"],"answer_count":3,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":1322,"score":3,"question_id":1949248,"title":"How to add clickable links to a field in Django admin?","body":"<p>I have this admin.py</p>\n\n<pre><code>class LawyerAdmin(admin.ModelAdmin):\n    fieldsets = [\n        ('Name',   {'fields': ['last', 'first', 'firm_name', 'firm_url', 'school', 'year_graduated']}),\n    ]\n    list_display = ('last', 'first', 'school', 'year_graduated', 'firm_name', 'firm_url')\n    list_filter = ['school', 'year_graduated']\n    search_fields = ['last', 'school', 'firm_name']\n</code></pre>\n\n<p>and I want to make \"firm_url\" fields clickable with each of the url listed in the field. How can I do this? Thank you.</p>\n"},{"tags":["javascript","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13267679,"title":"Django JavaScript translation empty catalog (i18n/jsi18n)","body":"<p>I keep ending up with an empty catalog in my jsi18n JavaScript. I have tried all the solutions on StackOverflow including <a href=\"http://stackoverflow.com/questions/3347698/django-translation-catalog-is-empty\">Django translation catalog is empty</a>, but the catalog is still empty.</p>\n\n<p>My setup is this:</p>\n\n<pre><code>project_dir\n- locale\n  - nl (contains LC_MESSAGES with django.po and djangojs.po)\n- app1\n- app2\n- main_app\n  - settings.py\n  - urls.py\n  - wsgi.py\n</code></pre>\n\n<p>In settings.py I have </p>\n\n<pre><code># Where to find locale\nLOCALE_PATHS = (\n    os.path.join(SITE_ROOT, 'locale'),\n)\n</code></pre>\n\n<p>SITE_ROOT is the absolute path to my project dir, so this translates to</p>\n\n<p>In urls.py I have</p>\n\n<pre><code># i18n\njs_info_dict = {\n    'domain': 'djangojs',\n    'packages': ('wrnpro', ),\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>    (r'^jsi18n/$', 'django.views.i18n.javascript_catalog', js_info_dict),\n</code></pre>\n\n<p>as part of my urls.</p>\n\n<p>If I run the app and call <code>http://localhost:8000/jsi18n/</code> I get</p>\n\n<pre><code>/* gettext library */\nvar catalog = new Array();\nfunction pluralidx(count) { return (count == 1) ? 0 : 1; }\n… \n</code></pre>\n\n<p>So far I have tried every variation of settings etc. I could find, but the catalog remains empty.</p>\n\n<p>When running <code>make messages</code> and <code>compile messages</code> my JavaScript get text strings are found and translated. The django.po and .mo files are in the locale directory.</p>\n\n<p>Anyone?</p>\n"},{"tags":["django","django-templates","django-views"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":17,"score":2,"question_id":13267605,"title":"How to control caching in django template view","body":"<p>I have a method in view which loads the statistics page. </p>\n\n<p>Here I need to control caching of '@csrf_protect' from the view. </p>\n\n<p>My code snippet looks like -</p>\n\n<pre><code>def statistics(request, id):\n    test = Test.objects.get(id=id)\n    result = statistics.objects.get(test=test, user=request.user)\n\n    context ={ 'test' : test, 'result' : result, 'review' : True  }\n    return render_to_response('statistics.html', context, context_instance = RequestContext(request))\n</code></pre>\n\n<p>How can I do that?</p>\n"},{"tags":["python","django","file-upload","submit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13266921,"title":"django, normal post form is not sending file data to server,","body":"<p>I'm wondering why this is happening: </p>\n\n<p>I'm sending file data with form in POST, but all the time it says: </p>\n\n<pre><code>Key 'file' not found in &lt;QueryDict:\n{\n u'datum': [u'aaa'],\n u'csrfmiddlewaretoken': [u'USAbRrgU92yj7KFpZHuxf9bWufgnwC4N'], \n u'anzeige': [u' aaaa'], \n u'titel': [u' aaa']\n}\n</code></pre>\n\n<p>This is my html: </p>\n\n<pre><code>&lt;form id=\"myform\" action=\"/anzeige_save/\" method=\"post\" enctype=\"multipart/form-data\"&gt;    \n{% csrf_token %} \n&lt;textarea style=\"width: 450px\" id=\"titel\"  name=\"titel\"&gt; &lt;/textarea&gt;\n&lt;textarea name=\"anzeige\" id=\"anzeige\" \n    style=\"height: 180px; width: 450px\"&gt; &lt;/textarea&gt;  \n&lt;input type=\"text\" id=\"datum\" name=\"datum\" &gt;\n&lt;input type=\"file\" id=\"file\" name=\"file\" size=\"40\" maxlength=\"100000\"&gt;\n&lt;input type=\"button\" value=\"speichern\" \n    onclick=\"javascript:submitform()\" /&gt;\n&lt;/form&gt;\n\n&lt;script&gt;\n  function submitform(){\n  document.forms[\"myform\"].submit();\n  }\n&lt;/script&gt;\n</code></pre>\n\n<p>and part my view is this: </p>\n\n<pre><code>anzeige=Anzeige(titel=request.POST['titel'], \n                anzeige=end_anzeige, \n                date=datetime.datetime.now(), \n                datum=request.POST['datum'],\n                file=request.FILES['file'])\nanzeige.save()\n</code></pre>\n\n<p>I'm actually submitting correctly, the form should also submit the file in QueryDict like other queries. Can someone help me to figure out what I'm missing here?</p>\n\n<p>Thanks </p>\n"},{"tags":["django","selenium","integration-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":92,"score":2,"question_id":12041315,"title":"How to have Django test case and Selenium server use same database?","body":"<p>I have a Django (v1.4, using Postgresql) project which I've written a bunch of working unittests for. These use <a href=\"https://github.com/dnerdy/factory_boy\" rel=\"nofollow\">FactoryBoy</a> to generate most of their data.</p>\n\n<p>I'm now starting to write some integration tests using <a href=\"https://docs.djangoproject.com/en/1.4/topics/testing/#django.test.LiveServerTestCase\" rel=\"nofollow\">LiveServerTestCase</a> with Selenium. I've just realised that my tests and the live test server use different databases. Which means that data created by factories in my tests aren't available to Selenium.</p>\n\n<p>I'm not sure of the best way to progress. I <em>think</em> I could use fixtures to supply data that would work, although this is a pain having got this far using factories instead.</p>\n\n<p>Is there a way I can continue to use factories to generate data that will work for my Selenium tests? Really I'd like my tests and LiveServerTestCase to use the same database.</p>\n"},{"tags":["django","django-registration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13267031,"title":"django-registration disable activation","body":"<p>Is there a setting in django-registration to disable the activation? Preferably, the e-mail would still be send with something like: <code>Thanks for your registration.</code></p>\n\n<ol>\n<li>Is it possible to deactivate the required account activation and how?</li>\n<li>Is it still possible to send the activation e-mail but without the verification requirements?</li>\n</ol>\n"},{"tags":["python","django","django-templates","django-views"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":30,"score":1,"question_id":13264534,"title":"separation in search result","body":"<p>I'm new in django and python\nI have view function which retrieve some data from database and show them on a page.\nbut there is a problem all the data are displayed on one page however i need a separation, It must be displayed 6 data on each page and if the number of data are more than 6 user can read them on the next page. i have no idiea how to do this</p>\n\n<h1>my view is :</h1>\n\n<pre><code>   def search1(request):\n        if request.method == 'POST':\n            form = SearchForm(request.POST)\n            if form.is_valid():\n                cd = form.cleaned_data\n                books=data(cd)\n                return render_to_response('result.html', {'books': books, 'form': form})\n        else:\n            form = SearchForm()\n        return render_to_response('form.html', {'form': form})\n</code></pre>\n\n<h1>my template:</h1>\n\n<pre><code>    {% if books %}\n    &lt;p&gt;Found {{ books|length }} book{{ books|pluralize }}.&lt;/p&gt;\n    &lt;ul dir=rtl&gt;\n        {% for book in books %}\n        &lt;p&gt;title:  {{ book.title }}&lt;/p&gt;\n        &lt;p&gt;price:  {{ book.price }}&lt;/p&gt;\n        {% endfor %}\n    &lt;/ul&gt;\n{% else %}\n    &lt;p&gt;No books matched your search criteria.&lt;/p&gt;\n{% endif %}\n</code></pre>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13265963,"title":"No module named registration.backends.default.urls","body":"<p>This topic is definitely related to <a href=\"http://stackoverflow.com/questions/4259497/no-module-named-backends-default-urls\">this topic</a>, though, according to the approved answer and related comment the fix was to change <code>registration.backends.default.urls</code> to <code>registration.urls</code>. When I try the same the error is the same but, with <code>registration.urls</code> instead of <code>registration.backends.default.urls</code>. </p>\n\n<p>P.S <code>django.contrib.auth</code> is added to the <code>INSTALLED_APPS</code></p>\n\n<pre><code>Environment:\n\n\n\nRequest Method: GET\nRequest URL: http://127.0.0.1:8000/accounts/register/\n\nDjango Version: 1.4.2\nPython Version: 2.7.3\nInstalled Applications:\n('django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.sites',\n 'django.contrib.messages',\n 'django.contrib.staticfiles',\n 'oauth2app',\n 'django.contrib.admin',\n 'uni_form',\n 'server')\nInstalled Middleware:\n('django.middleware.common.CommonMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware')\n\n\nTraceback:\nFile \"C:\\Python27\\lib\\site-packages\\django-1.4.2-py2.7.egg\\django\\core\\handlers\\base.py\" in get_response\n  101.                             request.path_info)\nFile \"C:\\Python27\\lib\\site-packages\\django-1.4.2-py2.7.egg\\django\\core\\urlresolvers.py\" in resolve\n  298.             for pattern in self.url_patterns:\nFile \"C:\\Python27\\lib\\site-packages\\django-1.4.2-py2.7.egg\\django\\core\\urlresolvers.py\" in url_patterns\n  328.         patterns = getattr(self.urlconf_module, \"urlpatterns\", self.urlconf_module)\nFile \"C:\\Python27\\lib\\site-packages\\django-1.4.2-py2.7.egg\\django\\core\\urlresolvers.py\" in urlconf_module\n  323.             self._urlconf_module = import_module(self.urlconf_name)\nFile \"C:\\Python27\\lib\\site-packages\\django-1.4.2-py2.7.egg\\django\\utils\\importlib.py\" in import_module\n  35.     __import__(name)\nFile \"C:\\Users\\Roel\\workspace\\ts-server\\tsserver\\tsserver\\urls.py\" in &lt;module&gt;\n  19.     (r'^accounts/', include('registration.backends.default.urls')),\nFile \"C:\\Python27\\lib\\site-packages\\django-1.4.2-py2.7.egg\\django\\conf\\urls\\__init__.py\" in include\n  24.         urlconf_module = import_module(urlconf_module)\nFile \"C:\\Python27\\lib\\site-packages\\django-1.4.2-py2.7.egg\\django\\utils\\importlib.py\" in import_module\n  35.     __import__(name)\n\nException Type: ImportError at /accounts/register/\nException Value: No module named registration.backends.default.urls\n</code></pre>\n"},{"tags":["python","django","api","rest","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":27,"score":0,"question_id":13265175,"title":"Django Tastypie : How to initiate a variable every time an api call is made?","body":"<p>I have two models :</p>\n\n<pre><code>class Category(models.Model):\n    name = models.CharField(max_length=50)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class SubCategory(models.Model):\n    sex =  models.CharField(choices=SEX, blank=True, max_length=5) \n    name = models.TextField(blank=True) \n    category = models.ForeignKey(Category) \n    def __unicode__(self):\n        return u'%s' % (self.name)\n</code></pre>\n\n<p>I'm creating an api using tastypie that returns me \"SubCategory\" objects in a JSON. I want to add a custom field \"start_counter_of_category\" in every result set which contains the counter of the subcategory where the category id changed (when ordered on \"category_id\" field)</p>\n\n<p>The algorithm is fairly straightforward, something like this in the \"dehydrate\" function:</p>\n\n<pre><code>API_SKU_VARS = {\n    'COUNTER'       : 1,\n    'FIRST_ELEMENT' : 1,\n    'PREV_CATEGORY' : 1\n}\n\n\nclass SubCategoryResource(ModelResource):\n    start_counter_of_category = fields.IntegerField(readonly=True)\n    category = fields.ForeignKey(CategoryResource,'category')\n    class Meta:\n        queryset = SubCategory.objects.all()\n        resource_name = 'subcategory'\n        filtering = {\n            'id' : ALL,\n            'name' : ALL,\n            'category': ALL_WITH_RELATIONS,\n        }\n        ordering = ['id','name','category']\n        serializer = Serializer(formats=['json'])\n    def dehydrate(self, bundle):\n        if API_SKU_VARS['PREV_CATEGORY']  != bundle.data['category']: #if the category of the current bundle is not equal to the category of the previous bundle, we update the ['PREV_CATEGORY'] \n            API_SKU_VARS['FIRST_ELEMENT']=API_SKU_VARS['COUNTER'] #update the ['FIRST_ELEMENT'] with the counter of the current bundle\n            API_SKU_VARS['PREV_CATEGORY'] = bundle.data['category']\n        API_SKU_VARS['COUNTER'] = API_SKU_VARS['COUNTER']+1 #for every bundle passed, we update the counter\n        bundle.data['start_counter_of_category']=API_SKU_VARS['FIRST_ELEMENT']\n        return bundle.data\n    serializer = Serializer(formats=['json'])\n</code></pre>\n\n<p>It works perfectly for the first run after I start the server. Predictably the issue of course is that the second time I make the api call, the variables retain the values they had in the previous run.</p>\n\n<p>Any ideas how to re-initiate the variables every time the api call is made?</p>\n"},{"tags":["python","django","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13265459,"title":"weird django file upload error","body":"<p>although, there are many topics for this, i cannot find the right question+answer among them\nmy problem is this: </p>\n\n<p>i am trying to write an file upload. once i submit the form, this error is coming:</p>\n\n<pre><code>MultiValueDictKeyError at /anzeige_save/\nKey 'file' not found in &lt;MultiValueDict: {}&gt;\n</code></pre>\n\n<p>this is my model: </p>\n\n<pre><code>class Anzeige(models.Model):\n    titel = models.CharField(max_length=300)\n    anzeige = models.CharField(max_length=1000)\n    date = models.DateTimeField()\n    datum = models.CharField(max_length=12)\n    file = models.FileField(upload_to='/anzeige/D-d-M-Y/')\n    def __unicode__(self):\n        return self.titel\n</code></pre>\n\n<p>this is my view: </p>\n\n<pre><code>if request.path == '/anzeige_save/':\n    anzeige=Anzeige(titel=request.POST['titel'], anzeige=end_anzeige,date=datetime.datetime.now(), datum=request.POST['datum'],file=request.FILES['file'])\n    anzeige.save()\n    return HttpResponse(\"Anzeige saved successfully\")\n</code></pre>\n\n<p>this is my ajax in front-end:</p>\n\n<pre><code>var title = document.getElementById(title).value;\nvar body = document.getElementById(body).value;\nvar file = document.getElementById(name_file).value;\nvar datum = document.getElementById(datum).value;\nif(title==\" \" || body==\" \" || title==\"\" || body==\"\" || datum==\"\" || datum==\" \" ){\nalert(\"Please fill out all!\");\n}else{\n    $.ajax({\n    url: \"/anzeige_save/\",\n    type: \"POST\",\n    data: {anzeige:body,titel:title,file:file,datum:datum},\n}).success(function(data){\n    $(succ_message).text(data);\n    $(succ_message).fadeIn(1000);\n    $(succ_message).fadeOut(2000);\n})\n }\n</code></pre>\n\n<p>and this is file in form:</p>\n\n<pre><code>...\n&lt;input type=\"file\" id=\"name_file\" name=\"name_file\" size=\"40\" maxlength=\"100000\"&gt;&lt;br /&gt;\n...\n</code></pre>\n\n<p>am i missing something here ? </p>\n\n<p>i have Model with filefield and i am saving other fields including file into instance. </p>\n\n<p>thanks for any drop-by! :) </p>\n"},{"tags":["django","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13265636,"title":"What is @csrf_protect_m in django Why its used?","body":"<p>when ever i override the change_view in admin i will get the following line of code </p>\n\n<pre><code>@csrf_protect_m\n@transaction.commit_on_success\ndef change_view(self, request, object_id, extra_context=None):\n    return admin.ModelAdmin.change_view(self, request, object_id, extra_context=extra_context) \n</code></pre>\n\n<p>What is the First two line of code ?? Should i use this ?? What it does ? </p>\n\n<p>I am just started Extending Django Admin. So hope your answers will be simple and with example.</p>\n"},{"tags":["django","mongodb","django-models","filter","django-admin"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":30,"score":0,"question_id":13138816,"title":"django admin filters and mongodb: Caught DatabaseError while rendering: This query is not supported by the database","body":"<p>Using django non-rel 1.3 with MongoDB as the DB backend:</p>\n\n<p>I'm trying to setting a filter on a field (CharField) of MyModel class, in the corresponding django ModelAdmin class, like this:</p>\n\n<p><code>class MyModelAdmin(admin.ModelAdmin):\n    list_filter = ('myfield',)</code></p>\n\n<p>but what i get is:</p>\n\n<p><code>TemplateSyntaxError at /admin/myapp/mymodel</code></p>\n\n<p><code>Caught DatabaseError while rendering: This query is not supported by the database.</code></p>\n\n<p>It seems that Django MongoDB engine doesn't support filter, but i don't find documentation about.</p>\n\n<p>EDIT:\nThe error comes from template file .../admin/templates/change_list.html, and the line that throws it is line 85:</p>\n\n<p><code>{% for spec in cl.filter_specs %}{% admin_list_filter cl spec %}{% endfor %}</code></p>\n\n<p>My model is:</p>\n\n<p><code>\nclass MyModel(models.Model):\n    myfield=models.CharField(max_length='300')\n</code></p>\n\n<p>and my admin model is:</p>\n\n<p><code>class MyModelAdmin(admin.ModelAdmin):\n    list_filter = ('myfield',)</code></p>\n\n<p>and register it with:</p>\n\n<p><code>\nadmin.site.register(MyModel, MyModelAdmin)\n</code>.</p>\n\n<p>Debugging the code, the exception is throwed by method <code>check_query</code> of basecompiler.py. This method verifies that <code>self.query.distinct or self.query.extra or self.query.having</code> is true and then throws the exception (self.query.distinct is equal to 'True' in the interested query object, so the cause is this).</p>\n"},{"tags":["django","facebook","django-facebook"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13265701,"title":"Django facebook registration","body":"<p>I'm using django facebook and so far it's working great - users can sign in/sign up into the web app.</p>\n\n<p>But I want to enable users to view/change their settings before they register to my app. I've found that there is an <a href=\"https://developers.facebook.com/docs/plugins/registration/\" rel=\"nofollow\">facebook registration</a> which can be used.</p>\n\n<p>How can I use this registration for my web app?</p>\n\n<p>Thanks!! </p>\n"},{"tags":["django","api","rest","tastypie"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6,"score":0,"question_id":13265121,"title":"Tastypie URL - expose data through ForeignKey field (reverse lookup)","body":"<p>Using Tastypie v0.9.11, I would like to create a variation of the non-pk URL as <a href=\"http://django-tastypie.readthedocs.org/en/v0.9.11/cookbook.html#using-non-pk-data-for-your-urls\" rel=\"nofollow\">illustrated in the Tastypie cookbook</a></p>\n\n<p>However, instead, I would like to use a ForeignKey field of the given resource.</p>\n\n<p>For example, in pseudocode:</p>\n\n<pre><code>Model A:\n    field1 = ForeignKey(to Model B, field1)\n    field2 = CharField(... ...)\n\nModel B:\n    field1 = CharField(... ...)\n    field2 = CharField(... ...)\n</code></pre>\n\n<p>I would like to access the corresponding data at:</p>\n\n<pre><code>/api/v1/\"modelB\"/\"field1_of_modelA\"\n</code></pre>\n\n<p>For practical reasons, this makes a lot more sense than using the pk's. Is this possible?</p>\n\n<p>Otherwise, how could I use the pk instead, looking up the field name through the pk, but without performing an additional query on the DB?</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13260535,"title":"Djangobb - receiving incorrect link for confirmation","body":"<p>I set up djangobb and after a lot of problems and hours spending to making it work with my app, it finally worked... The only problem I still have is that when someone register, he is receiving incorrect link for registration. </p>\n\n<p>Example:</p>\n\n<pre><code>http://example.com/forum/account/activate/eac687ca1d21c4ae0f33d61766fec3a289936dbf/\n</code></pre>\n\n<p>How can i edit the url to my own url ? </p>\n\n<p>Thanks.</p>\n"},{"tags":["python","ajax","django"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13263612,"title":"Issues with ajax in django","body":"<p>I'm using ajax in django first times .. I read some tutorials on the net and I'm trying to make a simple form which posts some information via ajax.</p>\n\n<p>Here is my html form</p>\n\n<pre><code>&lt;script src=\"http://code.jquery.com/jquery-latest.js\"&gt;&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\nfunction send_request()\n{\n\n $.ajax({\n                            type:\"POST\",\n                            url:\"/ajaxredirect/\",\n\n\n       });\n\n}\n&lt;/script&gt;\n&lt;button type=\"button\" onclick=\"send_request();\"&gt;change content&lt;/button&gt;\n</code></pre>\n\n<p>and it is my view</p>\n\n<pre><code>def Ajaxquery(request):\n        if request.is_ajax():\n                return HttpResponse(\"ok\")\n        else:\n                return HttpResponse(\"error\")\n</code></pre>\n\n<p>it does nothing when i am click on change content button in browser.</p>\n\n<p>Any suggestions would be apperciated</p>\n"},{"tags":["django","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13263936,"title":"Django class based generic views and inheritance","body":"<p>So I'm writing this application and using the generic views objects ListView and ObjectView.</p>\n\n<p>I've overridden the method get_context_data on both to be able to add the same extra context (no related to the object) on both cases.</p>\n\n<p>Now I have two classes, one extending Listview and the other extending DetailView both with identical get_context_data methods.</p>\n\n<p>While this is working fine is really hurting to see, is there a parent class that I can override the get_context_data from that will make the ListView and DetailView inherit the new get_context_data? It would look much nicer that way :)</p>\n\n<p>Thank you.</p>\n\n<p>X</p>\n"},{"tags":["python","django","sorting","admin","user-profile"],"answer_count":4,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":4160,"score":5,"question_id":1474135,"title":"Django Admin: Ordering of ForeignKey and ManyToManyField relations referencing User","body":"<p>I have an application that makes use of Django's <code>UserProfile</code> to extend the built-in Django <code>User</code> model.  Looks a bit like:</p>\n\n<pre><code>class UserProfile(models.Model):\n    user = models.ForeignKey(User, unique=True)\n    # Local Stuff\n    image_url_s = models.CharField(max_length=128, blank=True)\n    image_url_m = models.CharField(max_length=128, blank=True)\n\n    # Admin\n    class Admin: pass\n</code></pre>\n\n<p>I have added a new class to my model:</p>\n\n<pre><code>class Team(models.Model):\n    name = models.CharField(max_length=128)\n    manager = models.ForeignKey(User, related_name='manager')\n    members = models.ManyToManyField(User, blank=True)\n</code></pre>\n\n<p>And it is registered into the Admin:</p>\n\n<pre><code>class TeamAdmin(admin.ModelAdmin):\n    list_display = ('name', 'manager')\n\nadmin.site.register(Team, TeamAdmin)\n</code></pre>\n\n<p>Alas, in the admin inteface, when I go to select a manager from the drop-down box, or set team members via the multi-select field, they are ordered by the User numeric ID.  For the life of me, I can not figure out how to get these sorted.</p>\n\n<p>I have a similar class with:</p>\n\n<pre><code>class Meta:\n    ordering = ['name']\n</code></pre>\n\n<p>That works great!  But I don't \"own\" the <code>User</code> class, and when I try this trick in <code>UserAdmin</code>:</p>\n\n<pre><code>class Meta:\n    ordering = ['username']\n</code></pre>\n\n<p>I get:</p>\n\n<p><code>django.core.management.base.CommandError: One or more models did not validate:</code>\n<code>events.userprofile: \"ordering\" refers to \"username\", a field that doesn't exist.</code></p>\n\n<p><code>user.username</code> doesn't work either.  I could specify, like <code>image_url_s</code> if I wanted to . . . how can I tell the admin to sort my lists of users by <code>username</code>?  Thanks!</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13262352,"title":"Reusing the call to a templatetag in a Django template","body":"<p>In a Django template I have a pinterest style feed, and at the bottom of each block there's an avatar pic. </p>\n\n<p>I'm using the following template tag to show the avatar pic:</p>\n\n<p><code>{% avatar user 40 %}</code></p>\n\n<pre><code>def avatar(user, size=80):\n    if not isinstance(user, User):\n        try:\n            user = User.objects.get(username=user)\n            alt = unicode(user)\n            url = avatar_url(user, size)\n        except User.DoesNotExist:\n            url = AVATAR_DEFAULT_URL\n            alt = _(\"Default Avatar\")\n    else:\n        alt = unicode(user)\n        url = avatar_url(user, size)\n    picpath= \"\"\"&lt;img src=\"%s\" alt=\"%s\" width=\"%s\" height=\"%s\" /&gt;\"\"\" % (url, alt,\n            size, size)\n    return picpath\n</code></pre>\n\n<p>The problem is that this templatetag makes a call to the database each time to pull out the path to the avatar pic.</p>\n\n<p>Basically what I want to do is only make this call the minimum number of times required (ie. extract the unique users in the current view and only get those pics once)</p>\n\n<p>Is there a way to do this in the template? Or would I have to basically change my view in order to do this?</p>\n"},{"tags":["python","django","celery","newrelic-rpm"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13262170,"title":"Stop New Relic / Celery From Polluting Logs on Heroku","body":"<h1>Question</h1>\n\n<p>How can you stop New Relic / Celery from constantly printing the below to Heroku's log.</p>\n\n<pre><code>app[scheduler.1]: [INFO/MainProcess] Starting new HTTP connection (1): collector-6.newrelic.com\napp[scheduler.1]: [INFO/MainProcess] Starting new HTTP connection (1): collector-6.newrelic.com\napp[scheduler.1]: [INFO/MainProcess] Starting new HTTP connection (1): collector-6.newrelic.com\napp[scheduler.1]: [INFO/MainProcess] Starting new HTTP connection (1): collector-6.newrelic.com\n</code></pre>\n\n<h2>Setup</h2>\n\n<p>The above log entries appear every minute. The app reporting this is a celery worker started via <code>Procfile</code> that reads (in part):</p>\n\n<pre><code>scheduler: newrelic-admin run-program python manage.py celery worker --loglevel=ERROR -B -E --maxtasksperchild=1000\n</code></pre>\n\n<p>Despite setting <code>loglevel</code> to <code>ERROR</code> it appears that celery is ignoring this argument. Interestingly enough, on my local machine, this setting is respected.</p>\n\n<h3>Versions</h3>\n\n<pre><code>celery==3.0.12\ndjango-celery==3.0.11\nnewrelic==1.6.0.13\n</code></pre>\n"},{"tags":["django","image-processing","store","apps","key-value"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13261962,"title":"Django Thumbnail App Comparison: Key Value Store","body":"<p>I'm looking for the right django app to set up for my image manipulation requirements. After looking into both <em>sorl-thumbnail</em> and <em>easy-thumbnail</em>, I am a little confused about which way to go. </p>\n\n<p>After reading through both app's documentation, it seems that <em>sorl-thumbnail</em> uses a <code>key value store</code> based on redis or memcache (<a href=\"http://sorl-thumbnail.readthedocs.org/en/latest/requirements.html#cached-db\" rel=\"nofollow\">shown here</a>), whereas <em>easy-thumbnail</em> doesn't appear to. </p>\n\n<p>Does not using a <code>key value store</code> affect the performance of <em>easy-thumbnail</em>? Which one is faster, or are they both comparable?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13261666,"title":"Geting distinct items in a table column in Django","body":"<p>I have the following model:</p>\n\n<pre><code>class Part (models.Model):\nadder=models.ForeignKey(User, related_name=\"added_models\", verbose_name=_('adder'), editable=False)\n</code></pre>\n\n<p>I'm trying to select all the distinct <code>adder</code>s of a <code>Part</code> object. To do this I tried:</p>\n\n<p><code>Part.objects.filter('adder', flat=True).distinct()</code></p>\n\n<p>But it is not giving me distinct values and repeats the <code>adder</code> values.</p>\n\n<p>Any insight into what I'm doing wrong?</p>\n"},{"tags":["django","django-models","django-admin","django-orm"],"answer_count":2,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":501,"score":4,"question_id":6892906,"title":"How to force Django Admin to use select_related?","body":"<p>One of my models is particularily complex. When I try to edit it in Django Admin it performs 1042 queries and takes over 9 seconds to process.</p>\n\n<p>I know I can replace a few of the drop-downs with <code>raw_id_fields</code>, but I think the bigger bottleneck is that it's not performing a <code>select_related()</code> as it should.</p>\n\n<p>Can I get the admin site to do this?</p>\n"},{"tags":["javascript","django","drop-down-menu","twitter-bootstrap","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13261111,"title":"problems getting JavaScript dropdown to work in Twitter Bootstrap while using Django","body":"<p>I have written a very simple Django web app that directs urls to views and then has the views render templates.  I would like to use Twitter Bootstrap in my templates in order to make the front end of my app more usable.  The CSS from Twitter Bootstrap seems to be working fine, but I'm having trouble with the JavaScript.  I have set up a test page in my templates directory called dropdown.html and it contains the following:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;title&gt;Simple test of JavaScript dropdown menus in Twitter Bootstrap&lt;/title&gt;\n\n    &lt;!-- Le styles --&gt;\n    &lt;link href=\"{{ STATIC_URL }}bootstrap/css/bootstrap.css\" rel=\"stylesheet\"&gt;\n    &lt;style type=\"text/css\"&gt;\n      body {\n        padding-top: 60px;\n        padding-bottom: 40px;\n      }\n    &lt;/style&gt;\n\n    &lt;script src=\"{{ STATIC_URL }}bootstrap/js/bootstrap.js\"&gt;&lt;/script&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n\n    &lt;div class=\"navbar navbar-inverse navbar-fixed-top\"&gt;\n      &lt;div class=\"navbar-inner\"&gt;\n        &lt;div class=\"container\"&gt;\n          &lt;a class=\"brand\" href=\"#\"&gt;Dropdown test&lt;/a&gt;\n          &lt;div class=\"nav-collapse collapse\"&gt;\n            &lt;ul class=\"nav\"&gt;\n              &lt;li class=\"dropdown\"&gt;\n                &lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\"&gt;Dropdown &lt;b class=\"caret\"&gt;&lt;/b&gt;&lt;/a&gt;\n                &lt;ul class=\"dropdown-menu\"&gt;\n                  &lt;li&gt;&lt;a href=\"#\"&gt;Action&lt;/a&gt;&lt;/li&gt;\n                  &lt;li&gt;&lt;a href=\"#\"&gt;Another action&lt;/a&gt;&lt;/li&gt;\n                &lt;/ul&gt;\n              &lt;/li&gt;\n            &lt;/ul&gt;\n          &lt;/div&gt;&lt;!--/.nav-collapse --&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Here is a screenshot of the resulting page:</p>\n\n<p><img src=\"http://i.stack.imgur.com/54drF.png\" alt=\"enter image description here\"></p>\n\n<p>I know that the CSS and JavaScript files are being delivered to the browser because I can see the log output from Django, which shows the following:</p>\n\n<pre><code>[06/Nov/2012 18:14:30] \"GET /dropdown/ HTTP/1.1\" 200 1465\n[06/Nov/2012 18:14:30] \"GET /static/bootstrap/js/bootstrap.js HTTP/1.1\" 200 56478\n[06/Nov/2012 18:14:30] \"GET /static/bootstrap/css/bootstrap.css HTTP/1.1\" 200 121663\n</code></pre>\n\n<p>Also, when I load the page in Firefox and use Firebug to \"view source\" I can see the included JavaScript (all 2025 lines of bootstrap.js) and the dropdown code is right where I would expect it to be (line 571).</p>\n\n<p>Unfortunately, when I click on the dropdown menu, however, nothing happens.</p>\n"},{"tags":["python","django","url"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13261377,"title":"How to pass multiple values for a single URL parameter?","body":"<p>Is it possible to pass multiple values for a single URL parameter without using your own separator?</p>\n\n<p>What I want to do is that the backend expects an input parameter <code>urls</code> to have one or more values. It can me set to a single or multiple URLs. What is a way to set the urls parameter so it can have multiple values? I can't use my own separator because it can be part of the value itself. </p>\n\n<p>Example:\n    http://example.com/?urls=[value,value2...]</p>\n\n<p>The <code>urls</code> parameter be set to just <code>http://google.com</code> or it can be set to <code>http://google.com</code> <code>http://yahoo.com ...</code>. In the backend, I want to process each url as a separate values. </p>\n"},{"tags":["django","django-pagination"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13260443,"title":"Using django-paginate and formatting issues","body":"<p>I'm using django-paginate and getting weird formatting issues with the {% paginate %} tag. I have attached an image of the problem.</p>\n\n<p>I was just wondering what could be potentially causing this?</p>\n\n<p>In the image below I'm on the first page. Notice that the 1 is cut off and also that the pages are strangely ordered and the previous/next is not really visible.</p>\n\n<p><img src=\"http://i.stack.imgur.com/8Owwk.png\" alt=\"enter image description here\"></p>\n\n<p>My template is just this for now:</p>\n\n<pre><code>{% extends \"base.html\" %}\n{% load mptt_tags %}\n{% load pagination_tags %}\n{% load i18n %}\n{% block body %}\n{% autopaginate parts 20 %}\n{% paginate %}\n</code></pre>\n\n<p>Also I'm using an old version of Django if that matters -- version 1.3.</p>\n"},{"tags":["jquery","django","mobile"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13261066,"title":"django and jquery ui map","body":"<p>trying to use Jqm with jquery ui map extention.</p>\n\n<p>Jquery ui map is not functioning if page opens via a link. if I refresh everything is fine but If I go there clinking a link, map just doesnt initialize.\nI suspected data-ajax=\"false\", so I tried it, bu no such luck.\nin my code there is nothing that may cause this. cause as I said, if I refresh page it works.</p>\n\n<p>this is the button cals it.</p>\n\n<pre><code>&lt;input type=\"submit\" data-mini=\"true\" data-ajax = \"false\" value=\"Haritada Göster\" name = 'ara' data-inline = \"true\"/&gt;\n</code></pre>\n\n<p>this is the code to generate it.</p>\n\n<pre><code>&lt;div id=\"map_canvas\" style=\"height:500px\"&gt;&lt;/div&gt;\n&lt;script type=\"text/javascript\"&gt;\n $('#map_canvas').gmap().bind('init', function(ev, map) {\n$('#map_canvas').gmap('addMarker', {'position': '57.7973333,12.0502107',  'bounds':true}).click(function() {\n    $('#map_canvas').gmap('openInfoWindow', {'content': 'Hello World!'}, this);\n});\n});\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["python","django","gmail","gmail-imap"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13085946,"title":"A Django library for Gmail","body":"<p>I'm looking for an API or library that gives me access to all features of Gmail from a Django web application.</p>\n\n<p>I know I can receive and send email using IMAP or POP3. However, what I'm looking for are all the GMail features such as marking emails with star or important marker, adding or removing tags, etc.</p>\n\n<p>I know there is a Settings API that allows me to create or delete labels and filters, but I haven't found anything that actually allows me to set labels to emails, or set emails as starred, and so on.</p>\n\n<p>Can anyone give me a pointer?</p>\n"},{"tags":["django","django-rest-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13241332,"title":"Changing POST data prior to saving a model in Django REST Framework","body":"<p><strong>Disclaimer</strong>: I'm a DRF/class-based-views newb.</p>\n\n<p>I have a situation where the client to my API can't know the ID of a resource, but it does know a unique identifier of that resource (its name).  </p>\n\n<p>This is a problem when the client sends a separate resource that has a Foreign Key to the first via POST. For example... the client sends the following data (Signal being the FK):</p>\n\n<pre><code>{\"signal_name\": \"signal1\", \"value\": 5}\n</code></pre>\n\n<p>But the Model expects:</p>\n\n<pre><code>{\"signal\": 1, \"value\": 5}\n</code></pre>\n\n<p>When <code>self.CONTENT</code> gets to my custom post method, it's already been validated and is empty. <br><br> So, where/how can I swap that data out prior to the data getting validated/rejected?<br>Do I need a custom validation method?\n<br><br>Thanks for any suggestions! </p>\n"},{"tags":["django","hosting"],"answer_count":7,"favorite_count":6,"up_vote_count":17,"down_vote_count":0,"view_count":2163,"score":17,"question_id":358245,"title":"Dump Django site to static HTML?","body":"<p>I've determined that my local web hosting company cannot support Django.</p>\n\n<ul>\n<li>They run Python 2.2.</li>\n<li>No support for <code>mod_python</code>, FastCGI, or SCGI.  </li>\n<li>No support for <code>mod_rewrite</code>.  </li>\n</ul>\n\n<p>Any one of these prevent me from deploying my site as a Django app at that hosting service.</p>\n\n<p>I realize that my site is basically static.  I'm wondering if I can use Django caching to the filesystem, and deploy what's in that cache.  Or else use <code>wget</code> to recursively capture my site running on localhost.  Has anyone done this kind of operation?  Is it possible, and is it worth the effort?</p>\n\n<p>I realize that I have at least two other options:  </p>\n\n<ul>\n<li>Use a PHP CMS solution.</li>\n<li>Switch my domain to another hosting service.</li>\n</ul>\n\n<p><strong>edit:</strong> Thanks everyone for the suggestions!  I've sent an email to my hosting provider to give them a chance to offer me an upgrade.  If they can't come through, I'm looking at <a href=\"http://www.webfaction.com/\" rel=\"nofollow\">WebFaction</a> as a provider.</p>\n"},{"tags":["django","celery","pytz"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13259757,"title":"AmbiguousTimeError Celery|Django","body":"<p>So i have a django site that is giving me this AmbiguousTimeError. I have a job activates when a product is saved that is given a brief timeout before updating my search index. Looks like an update was made in the Daylight Savings Time hour, and pytz cannot figure out what to do with it.</p>\n\n<p>How can i prevent this from happening the next time the hour shifts for DST?</p>\n\n<pre><code>[2012-11-06 14:22:52,115: ERROR/MainProcess] Unrecoverable error: AmbiguousTimeError(datetime.datetime(2012, 11, 4, 1, 11, 4, 335637),)\nTraceback (most recent call last):\n  File \"/usr/local/lib/python2.6/dist-packages/celery/worker/__init__.py\", line 353, in start\n    component.start()\n  File \"/usr/local/lib/python2.6/dist-packages/celery/worker/consumer.py\", line 369, in start\n    self.consume_messages()\n  File \"/usr/local/lib/python2.6/dist-packages/celery/worker/consumer.py\", line 842, in consume_messages\n    self.connection.drain_events(timeout=10.0)\n  File \"/usr/local/lib/python2.6/dist-packages/kombu/connection.py\", line 191, in drain_events\n    return self.transport.drain_events(self.connection, **kwargs)\n  File \"/usr/local/lib/python2.6/dist-packages/kombu/transport/virtual/__init__.py\", line 760, in drain_events\n    self._callbacks[queue](message)\n  File \"/usr/local/lib/python2.6/dist-packages/kombu/transport/virtual/__init__.py\", line 465, in _callback\n    return callback(message)\n  File \"/usr/local/lib/python2.6/dist-packages/kombu/messaging.py\", line 485, in _receive_callback\n    self.receive(decoded, message)\n  File \"/usr/local/lib/python2.6/dist-packages/kombu/messaging.py\", line 457, in receive\n    [callback(body, message) for callback in callbacks]\n  File \"/usr/local/lib/python2.6/dist-packages/celery/worker/consumer.py\", line 560, in receive_message\n    self.strategies[name](message, body, message.ack_log_error)\n  File \"/usr/local/lib/python2.6/dist-packages/celery/worker/strategy.py\", line 25, in task_message_handler\n    delivery_info=message.delivery_info))\n  File \"/usr/local/lib/python2.6/dist-packages/celery/worker/job.py\", line 120, in __init__\n    self.eta = tz_to_local(maybe_iso8601(eta), self.tzlocal, tz)\n  File \"/usr/local/lib/python2.6/dist-packages/celery/utils/timeutils.py\", line 52, in to_local\n    dt = make_aware(dt, orig or self.utc)\n  File \"/usr/local/lib/python2.6/dist-packages/celery/utils/timeutils.py\", line 211, in make_aware\n    return localize(dt, is_dst=None)\n  File \"/usr/local/lib/python2.6/dist-packages/pytz/tzinfo.py\", line 349, in localize\n    raise AmbiguousTimeError(dt)\nAmbiguousTimeError: 2012-11-04 01:11:04.335637\n</code></pre>\n\n<p><strong>EDIT</strong>: I fixed it temporarily with this code in celery:</p>\n\n<p>celery/worker/job.py @ line 120</p>\n\n<pre><code>try:\n     self.eta = tz_to_local(maybe_iso8601(eta), self.tzlocal, tz)\nexcept:\n     self.eta = None\n</code></pre>\n\n<p>I don't want to have changes in a pip installed app, so i need to fix what i can in my code:</p>\n\n<p>This runs when i save my app:</p>\n\n<pre><code>self.task_cls.apply_async(\n    args=[action, get_identifier(instance)],\n    countdown=15\n)\n</code></pre>\n\n<p>I'm assuming that i need to somehow detect if i'm in the ambiguous time and adjust countdown.</p>\n"},{"tags":["django","solr","catalog","haystack"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13260201,"title":"django haystack/solr: How to configure index(es) for a catalog with many fields?","body":"<p>For a catalog application i would like to index products using haystack/solr. Depending on the product-type (book, software, etc...) different properties become relevant for generating facets (e.g. author in case of a book and operating system in case of software).</p>\n\n<p>What is the best way to model such catalog?</p>\n\n<p>What is the impact when the index becomes larger and/or the number of indexed fields grows due to facets on many different fields?</p>\n\n<ul>\n<li>I could create a single (product) searchindex class with many fields (>100)\nor</li>\n<li>I could create a searchindex class per product-type; say i have 10 product types, each holding 10 different facet'ed fields.</li>\n</ul>\n\n<p>I recently learned that multiple SearchIndex classes all end up in the same backend (same index; using the same /select/ handler); i've observed this as well using the solr admin interface.</p>\n\n<p>An alternative is to run multiple solr instances in parallel (how can i register an Index for a specific backend?).</p>\n\n<p>Thanks for any directions,\nPaul\n(i have posted this same question on the haystack usergroup)</p>\n"},{"tags":["django","model","user"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":538,"score":3,"question_id":5493096,"title":"Django User model email field: how to make it mandatory","body":"<p>I need to make the email field in the Django User model mandatory.  It isn't obvious to me how to do that.  Suggestions welcome.  I am currently using:</p>\n\n<pre><code>from django.contrib.auth.forms import UserCreationForm\n</code></pre>\n\n<p>for my User creation form, and combining this with my own custom <code>UserProfileCreateForm</code></p>\n\n<p>Ian</p>\n"},{"tags":["django","django-models","django-forms"],"answer_count":2,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":1164,"score":5,"question_id":2281179,"title":"Adding extra constraints into fields in Django","body":"<p>While subclassing db.models.Model, sometimes it's essential to add extra checks/constraints. E.g. I have an Event model with start_date and end_date. I want to add validation into the fields or the model so that end_date > start_date. How many possible ways to do this? At least I know this can be done outside the models.Model inside the ModelForm validation. But how to attach to the fields and the models.Model?</p>\n"},{"tags":["python","django","filter","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":13121568,"title":"Filter list_filter in django admin","body":"<p>I need to filter by a field one to many but I just want to show related objects and not all.</p>\n\n<p>is this possible, or I have to create a custom filter?</p>\n"},{"tags":["django","design","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":54,"score":5,"question_id":13249328,"title":"Design Issue: To what extent should the Django Admin site be used?","body":"<p>I'm relatively new to Django and especially new to the admin functionality. I've read many articles expounding the benefits of the built-in admin site but I'm not sure to what extent they should be used.</p>\n\n<p>Some general questions:</p>\n\n<ul>\n<li> What sort of database interactions should be in admin and which should be part of the general site functionality?</li>\n<li> I understand that models can be easily changed/deleted on the admin site but is it the best way to add new objects rather than in a custom page? </li>\n</ul>\n\n<p>A more specific question:</p>\n\n<ul>\n<li> I'm creating a website for tracking packages. The idea is that staff would scan and insert many (hundreds of) packages into the database on a daily basis. I'm unsure whether this could be done efficiently in admin as the current process of adding a model is a slow, multi-step process (I don't know to what extent that can be customized). As this is one of the site's main functionalities it also seems odd that it would reside in the admin site. Would it make more sense in the Django framework to write my own page? Or would I just be rewriting (probably less efficiently) what's already been created with django-admin?</li>\n</ul>\n\n<p>Any suggestions or Django standards you guys have would be greatly appreciated.</p>\n"},{"tags":["python","django","django-templates","django-views","jinja2"],"answer_count":1,"favorite_count":7,"up_vote_count":9,"down_vote_count":0,"view_count":153,"score":9,"question_id":13180419,"title":"Why do django templates render dictionaries so slowly?","body":"<p>When I render a moderately complex dictionary (4 levels deep, ~2K data points) using django 1.4's default template system the template rendering step takes over 2800ms.  When I do html-gen directly from python instead it takes ~80ms.  Even using another template library (<a href=\"http://jinja.pocoo.org/docs/\">jinja2</a>) renders the same data (in fact, almost exactly the same template syntax - as jinja2 is nearly a drop-in replacement) in under 300ms.</p>\n\n<p>Interestingly, you don't even have to actually <em>render</em> the dictionary in the template to cause this performance issue in django's template system... all you have to do is <em>pass</em> it as an available variable to a template.  A friend of mine suggested this may mean the system is, \"...doing a defensive copy or (more stupidly) a comprehension [which] will take time due to running constructors\"</p>\n\n<p>Anyone know why django's default template system takes so long to render dictionaries?</p>\n\n<p><strong>* I'll work on adding requested details below *</strong></p>\n\n<p>I am running in debug mode and have the DebugToolbarMiddleware set as one of my middleware classes.  My settings.py file includes:</p>\n\n<pre><code>TEMPLATE_CONTEXT_PROCESSORS = global_settings.TEMPLATE_CONTEXT_PROCESSORS + (\n    'django.core.context_processors.request',\n)\n</code></pre>\n\n<p>and....</p>\n\n<pre><code># rendering like this\nreturn render(\n    request,\n    template_name='ltm/search_results.html',\n    context_instance=RequestContext(request, {\n        'menus': menus,\n        'results': result_dict\n    })\n)\n</code></pre>\n"},{"tags":["python","django","windows","vim","ide"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":13253510,"title":"Using VIM for Python IDE in Windows?","body":"<p>I am turning to Python from .NET world. And Visual Studio was something a great tool i used.</p>\n\n<p>In python world we do have basic IDLE and another one is VIM. I have seen that a lot of developers have configured VIM to a great IDE. Using basic VIM in Windows 7 seems of less use.\nSo i want to moderate my VIM to a level which has file explorer, syntax highlighting, search, error highlighting etc. So that it gives feel of Visual Studio and more productive.</p>\n\n<p>But all hacks/tips available are for Linux/Ubuntu users mostly, which i may use later but as of now i need to make my VIM in Windows more productive, visual.</p>\n\n<p>Please Suggest some Tips/Hacks/Resources to look around for VIM configuration?</p>\n\n<p>Thanks</p>\n"},{"tags":["jquery","django","jquery-ui","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13259104,"title":"jQuery theme to mimic the Django admin interface style (using CSS)","body":"<p>I use jQuery UI with my Django powered website. I like the look of Django's admin interface. How can I extend that look to my user-oriented pages on the site?</p>\n"},{"tags":["django","django-models","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13257818,"title":"Django import error: No module named models","body":"<p>I keep receiving the error <code>Could not import movies.views. Error was: No module named models</code></p>\n\n<p>Here is my traceback:</p>\n\n<pre><code>    Environment:\n\n\n    Request Method: GET\n    Request URL: http://localhost:8000/movies/awesome-movie/\n\n    Django Version: 1.3.1\n    Python Version: 2.7.3\n    Installed Applications:\n    ['django.contrib.auth',\n     'username_patch',\n     'django.contrib.contenttypes',\n     'django.contrib.sessions',\n     'django.contrib.sites',\n     'django.contrib.messages',\n     'django.contrib.staticfiles',\n     'django.contrib.admin',\n     'django.contrib.flatpages',\n     'south',\n     'tagging',\n     'tagging_autocomplete',\n     'accounts',\n     'movies',\n     'tracking',\n     'djcelery',\n     'pagination']\n    Installed Middleware:\n    ('django.middleware.common.CommonMiddleware',\n     'django.contrib.sessions.middleware.SessionMiddleware',\n     'django.middleware.csrf.CsrfViewMiddleware',\n     'django.contrib.auth.middleware.AuthenticationMiddleware',\n     'django.middleware.locale.LocaleMiddleware',\n     'django.contrib.messages.middleware.MessageMiddleware',\n     'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',\n     'pagination.middleware.PaginationMiddleware')\n\n\n    Traceback:\n    File \"/Users/jeff/Code/filmlibrary/lib/python2.7/site-packages/django/core/handlers/base.py\" in get_response\n      101.                             request.path_info)\n    File \"/Users/jeff/Code/filmlibrary/lib/python2.7/site-packages/django/core/urlresolvers.py\" in resolve\n      252.                     sub_match = pattern.resolve(new_path)\n    File \"/Users/jeff/Code/filmlibrary/lib/python2.7/site-packages/django/core/urlresolvers.py\" in resolve\n      252.                     sub_match = pattern.resolve(new_path)\n    File \"/Users/jeff/Code/filmlibrary/lib/python2.7/site-packages/django/core/urlresolvers.py\" in resolve\n      158.             return ResolverMatch(self.callback, args, kwargs, self.name)\n    File \"/Users/jeff/Code/filmlibrary/lib/python2.7/site-packages/django/core/urlresolvers.py\" in _get_callback\n      167.             raise ViewDoesNotExist(\"Could not import %s. Error was: %s\" % (mod_name, str(e)))\n\n    Exception Type: ViewDoesNotExist at /movies/awesome-movie/\n    Exception Value: Could not import movies.views. Error was: No module named models\n</code></pre>\n\n<p>I am not sure why I have this error. My code is as follows...</p>\n\n<p>I have an django app called <code>tracking</code> and another called <code>movies</code>. I have a python file called <code>tracking.py</code> in the <code>tracking</code> app it consists of the following code:</p>\n\n<p><strong>filmlibrary/tracking/tracking.py</strong></p>\n\n<pre><code>from movies.models import Movie\nfrom tracking.models import MovieView\n\nimport os\nimport base64\n\ndef tracking_id(request):\n    try:\n        return request.session['tracking_id']\n    except KeyError:\n        request.session['tracking_id'] = base64.b64encode(os.urandom(36))\n        return request.session['tracking_id']\n\ndef log_movie_view(request, movie):\n    t_id = tracking_id(request)\n    try:\n        v = MovieView.objects.get(tracking_id=t_id, movie=movie)\n        v.save()\n    except MovieView.DoesNotExist:\n        v = MovieView()\n        v.movie = movie\n        v.ip_address = request.META.get('REMOTE_ADDR')\n        v.tracking_id = t_id\n        v.user = None\n        if request.user.is_authenticated():\n            v.user = request.user\n        v.save()\n</code></pre>\n\n<p>The above is pretty basic stuff. My <code>views.py</code> in my <code>movies</code> app uses the tracking.py file here:</p>\n\n<p><strong>filmlibrary/movies/views.py</strong></p>\n\n<pre><code>@login_required\ndef movie_details(request, slug, template_name=\"movies/movie_detail.html\"):\n    movie = get_object_or_404(Movie, slug=slug)\n    movie.tracking_id = tracking.tracking_id(request)\n    movie.save()\n    tracking.log_movie_view(request, movie)\n    context = RequestContext(request, {'movie': movie })\n    if movie:\n        try:\n            screener = movie.moviemedia_set.get(movie_type='screener')\n            .... continued\n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Here are the contents of filmlibrary/tracking/models.py</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\n\nfrom movies.models import Movie\n\nclass PageView(models.Model):\n    class Meta:\n        abstract = True\n\n    date = models.DateTimeField(auto_now=True)\n    ip_address = models.IPAddressField()\n    user = models.ForeignKey(User, null=True)\n    tracking_id = models.CharField(max_length=50, default='')\n\nclass MovieView(PageView):\n    movie = models.ForeignKey(Movie)\n</code></pre>\n\n<p>The error appears to come from the import line <code>from tracking.models import MovieView</code> in the tracking.py file and I am not sure why. As soon as I comment out that line the error goes away but then of course I'll have new errors about MovieView not existing as expected. I don't see anything wrong with that import line in tracking.py.</p>\n\n<p>Does anyone have any suggestions as to why I receive that error and how I can resolve this?</p>\n"},{"tags":["django","formsets"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13258258,"title":"Django Formsets: How to apply different validation to each form in formset?","body":"<p>I'm using Django 1.4 formsets and I'd like to perform different validation for the first form in the formset.</p>\n\n<p>I have a LocationForm where I display 4 text fields allowing the user to enter up to 4 locations:</p>\n\n<pre><code>class LocationForm(forms.Form):\n    user_entered_address = forms.CharField(required=False, max_length=255)\n    full_address = forms.CharField(max_length=255, required=False, widget=forms.HiddenInput())\n    city = forms.CharField(max_length=255, required=False, widget=forms.HiddenInput())\n    state = forms.CharField(max_length=255, required=False, widget=forms.HiddenInput())\n    country = forms.CharField(max_length=255, required=False, widget=forms.HiddenInput())\n    latitude = forms.CharField(required=False, widget=forms.HiddenInput())\n    longitude = forms.CharField(required=False, widget=forms.HiddenInput())\n\nLocationFormSet = formset_factory(LocationForm, extra=4, max_num=4)\n</code></pre>\n\n<p>This works great to display the input fields, but I would like the first LocationForm in the formset to be required and the rest of the forms to be optional (meaning the user must enter at least 1 location in the first form, but the rest are optional).</p>\n\n<p>If I modify the form, removing <code>required=False</code>:</p>\n\n<pre><code>    user_entered_address = forms.CharField(max_length=255)\n</code></pre>\n\n<p>Then <code>user_entered_address</code> is required for all forms. I have a feeling I need to write a custom clean() method, but I'm stuck how to find the first form, figure out if <code>user_entered_address</code> is blank and if so, raise a ValidationError:</p>\n\n<pre><code>class BaseLocationFormSet(BaseFormSet):\n    def clean(self):\n        # How to do I find the first form and ensure user_entered_address isn't blank?\n\nLocationFormSet = formset_factory(LocationForm, extra=4, max_num=4, formset=BaseLocationFormSet)\n</code></pre>\n\n<p>Or is this the wrong approach and there is a better way to do this? Thanks!</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":889,"score":2,"question_id":7086578,"title":"column user_id is not unique, with Django UserProfiles","body":"<p>I'm trying to add some extra attributes to a user by way of a User Profile in Django (1.2.5, the version supplied in Ubuntu natty), but whenever I create a new user through the admin console, with one of the new attributes included (eg, 'phone'), I get a \"column user_id is not unique\" IntegrityError.</p>\n\n<p>I see that other people have had this problem, and they seem to have solved it by adding a unique dispatch_uid to the userprofile creation signal, but that's not working for me:</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\nfrom django.db.models.signals import post_save\n\nclass UserProfile(models.Model):\n    user = models.OneToOneField(User)\n    phone = models.CharField(max_length=40,blank=True,null=True)\n\ndef create_user_profile(sender, instance, **kwargs):\n        UserProfile.objects.get_or_create(user=instance)\n\npost_save.connect(create_user_profile, sender=User, dispatch_uid=\"users-profilecreation-signal\")\n</code></pre>\n\n<p>AUTH_PROFILE_MODULE is set to point at this class, in settings.py.</p>\n\n<p>Anyone know what I'm doing wrong?</p>\n"},{"tags":["django","json"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13256909,"title":"Django how to pass Decimal objects to json","body":"<p>I have a query set which contains Decimal objects. I want to pass this data to a json dump along the lines:</p>\n\n<pre><code>ql = Product.objects.values_list('length', 'width').get(id=product_id)\ndata = simplejson.dumps(ql)\n\nTypeError: Decimal('62.20') is not JSON serializable\n</code></pre>\n\n<p>How should I pass these values to json. Of course I could cast the values to string - but I'm guessing this is not a good solution.</p>\n\n<p>Any help much appreciated.</p>\n"}]}
{"total":41213,"page":3,"pagesize":100,"questions":[{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13257188,"title":"Python, Django and flatpage","body":"<p>I'm trying to use Django and to add a flatpage.</p>\n\n<p>ValueError at /admin/flatpages/flatpage/add/</p>\n\n<p>Cannot use None as a query value</p>\n\n<pre><code>Request Method:     POST\nRequest URL:    http://localhost:8000/admin/flatpages/flatpage/add/\nDjango Version:     1.4.2\nException Type:     ValueError\nException Value:    \n</code></pre>\n\n<p>Cannot use None as a query value</p>\n\n<pre><code>Exception Location:     C:\\Python27\\lib\\site-packages\\django\\db\\models\\sql\\query.py in add_filter, line 1095\nPython Executable:  C:\\Python27\\python.exe\nPython Version:     2.7.3\nPython Path:    \n\n['C:\\\\Users\\\\ivo\\\\Desktop\\\\eclipse-jee-indigo\\\\workspace\\\\blog',\n 'C:\\\\Users\\\\ivo\\\\Desktop\\\\eclipse-jee-indigo\\\\workspace\\\\blog',\n...\n 'C:\\\\Python27\\\\lib\\\\site-packages\\\\Pythonwin']\n</code></pre>\n\n<p>How to get rid of it?</p>\n\n<p>Thank you</p>\n"},{"tags":["django","jquery-ajax","django-templates"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":36,"score":-1,"question_id":13256817,"title":"Django - How to show messages under ajax function","body":"<p>I am using AjaxForm plugin to submit my form without refresh. like:</p>\n\n<pre><code>$('#my_form_id').ajaxForm(function(){\n\n        //something on success or fail\n    });\n</code></pre>\n\n<p>this works correctly. when i click submit button it saves form datas without refresh. But before this ; i had django messages on my template file like:</p>\n\n<pre><code>{% for message in messages %}\n    &lt;div id=\"notice\" align=\"center\"&gt;\n        {{ message }}\n    &lt;/div&gt;\n{% endfor %}\n</code></pre>\n\n<p>what this code does is displaying notifications if post saved correctly or something failed.</p>\n\n<p>now; i can't do that. i dont understand how i can use these messages tags with ajax functions.</p>\n\n<p>it just saves the post. no notifications.</p>\n\n<p>thank you.</p>\n\n<p>edit : </p>\n\n<p>add_post url : <code>url(r'^admin/post/add/$', view='add_post',name='add_post'),</code></p>\n\n<p>related view : </p>\n\n<pre><code>@login_required(login_url='/login/')\ndef add_post(request):\n    template_name = 'add.html'\n    owner = request.user\n    if request.method == \"POST\":\n        form = addForm(request.POST)\n        if form.is_valid():\n            titleform = form.cleaned_data['title']\n            bodyform = form.cleaned_data['body']\n            checkform = form.cleaned_data['isdraft']\n\n            n = Post(title=titleform, body=bodyform, isdraft=checkform, owner=owner)\n            n.save()\n            messages.add_message(request, messages.SUCCESS,\n                'New post created successfully!')\n        else:\n            messages.add_message(request, messages.WARNING,\n                'Please fill in all fields!')\n    else:\n        form = addForm()\n    return render_to_response(template_name, {'form': form, 'owner': owner,},\n        context_instance=RequestContext(request))\n</code></pre>\n"},{"tags":["django","django-templates","django-template-tags"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":20,"score":-1,"question_id":13241891,"title":"Get length of an item passed in request (and context) (django-breadcrumbs)","body":"<p>I am using this django-plugin here: <a href=\"https://github.com/chronossc/django-breadcrumbs\" rel=\"nofollow\">https://github.com/chronossc/django-breadcrumbs</a> </p>\n\n<p>But I can't seem to be able to check in the templates if there is actually an array of breadcrumbs or not… I have tried:</p>\n\n<pre><code>{%if request.breadcrumbs%} {% if request.breadcrumbs|length &gt; 0%} \n</code></pre>\n\n<p>and so on… but nothing truly tells me if there are some or not.</p>\n\n<p>I want this bar to appear if I passed in breadcrumbs, and not appear in the case that I didn't pass some breadcrumbs in my view:</p>\n\n<pre><code>{% if request.breadcrumbs|length &gt; 0 %}\n&lt;div class=\"navbar navbar-fixed-top\" style=\"top:38px;z-index:1029;\" id=\"breadcrumb-sticky-header\"&gt;\n    &lt;div class=\"container\"&gt;\n        &lt;div class=\"container-fluid\"&gt;\n            &lt;div class=\"row-fluid\"&gt;\n                &lt;ul id=\"breadcrumb-sticky-header-inner\" class=\"breadcrumb\"&gt;\n                    {% for breadcrumb in request.breadcrumbs %}\n                    {% if not forloop.last %}\n                    &lt;li&gt;&lt;a href=\"{{ breadcrumb.url }}\"&gt;{{ breadcrumb.name }}&lt;/a&gt; &lt;span class=\"divider\"&gt;/&lt;/span&gt;&lt;/li&gt; \n                    {% else %}\n                    &lt;li class=\"active\"&gt;{{ breadcrumb.name }}&lt;/li&gt; \n                    {% endif %}\n                    {% endfor %}\n                &lt;/ul&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n{% endif %}\n</code></pre>\n\n<p>Here is the code in my view:</p>\n\n<pre><code>@login_required\ndef view(request, t_id):\n    try:\n        tshoot = Troubleshoot.objects.select_related('category', 'equipment', 'equipment__model').get(pk=t_id)\n        request.breadcrumbs([\n            ((\"%s: %s\" % (tshoot.equipment.model.name, tshoot.equipment.serial)),\n                '/equipment/view/%s/' % (tshoot.equipment.id)),\n            ((\"%s\" % (tshoot.category.name)),\n                '/troubleshoot/categories/view/%s/' % (tshoot.category.id)),\n            ((tshoot.title), '')\n        ])\n</code></pre>\n"},{"tags":["django","django-template-filters"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":8045293,"title":"Filter for timezone conversion?","body":"<p>Simply put, I've forced my application to use UTC to make it easier on my logic when using different servers in different timezones which all write to the same database. Now, the dilemma seems to be translating these UTC dates into local timezones. </p>\n\n<p>For example, I'm in PST (or PDT, curse you daylight-savings time!), and I'm looking at a value which represents an item's expiration date. Since I'm UTC-7 (I think), and the item expires 48 hours from now, a simple filter of  <code>date:\"F dS\"</code> yields November 10th, rather than November 9th, as expected, as it's currently 6:30PM on November 7th. </p>\n\n<p>Is there a template filter which will convert my date to the current request's timezone or to a given timezone passed as a parameter? </p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":19,"score":-2,"question_id":13256657,"title":"session storage path setting doesn't exist","body":"<p>I am trying to run a django project and the following error is displayed: 'The session storage path '/home/billy/myapps/my_server/../my_server/sessions' doesn't exist. Please set your SESSION_FILE_PATH setting to an existing directory in which Django can store session data.'\nI have tried googling out whats the problem but u have not found a specific answer to my problem. Any assistance is highly appreciated.</p>\n\n<p>Thanks</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13256238,"title":"Simplest way of eliminating objects from queryset in Django","body":"<p>I have a query set,  <code>categories = unipart.categories.all()</code>, which is all the categories that a unipart object is linked to.</p>\n\n<p>However, I'd like to remove the top-level categories from this list -- ie. those with subcategories that the unipart is also listed within.</p>\n\n<p>Or those categories with a parent_id equal to one of the category_ids in the queryset.</p>\n\n<p>For example if a unipart was listed in:\nNutmeg (parent= Spices) and\nSpices (parent = Food)</p>\n\n<p>then I'd want to ONLY include Nutmeg -- so basically I want to 'pop' Spices from the queryset.</p>\n\n<p>What is the best way to do this? I would rather not use a list.</p>\n\n<p>Here's my models:</p>\n\n<pre><code>class UniPart (models.Model):\ncategories=models.ManyToManyField(Category, related_name = 'unipart')\n\nclass Category (MPTTModel):\n    category = models.CharField(max_length=250)\n    oc_id= models.IntegerField()\n    parent = TreeForeignKey('self', blank=True, null=True, related_name='children')\n    def __unicode__(self):\n</code></pre>\n"},{"tags":["jquery","django","django-forms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13255371,"title":"format jquery timepicker to load into django TimeField","body":"<p>I have a problem formatting my <a href=\"http://trentrichardson.com/examples/timepicker/\" rel=\"nofollow\">jquery timepicker</a>. My problem is that I want to have the time show up in HH:MM AM/PM format in the form (so the user can see it that way), but load as military time (%H:%M) into the timefield. My formfield looks like this:</p>\n\n<pre><code>    if isinstance(f, models.TimeField):\n    formfield.widget.format = '%H:%M'\n    formfield.widget.attrs.update({'class':'timepicker', 'readonly':'true'})\n</code></pre>\n\n<p>I'm using Postgresql with <code>time without time zone</code> type. The jquery (from the link above) looks is this: </p>\n\n<pre><code>    &lt;script type=\"text/javascript\"&gt;\n     $(document).ready(function() {\n            $( \".timepicker\" ).timepicker({\n                showPeriod: true,\n                showLeadingZero: true\n            });\n     });\n &lt;/script&gt;\n</code></pre>\n\n<p>If I don't use showPeriod and showLoadingZero, it works fine, but it's not as user friendly as I'd like.</p>\n\n<p>Thanks!</p>\n\n<p>EDIT: I'm using the templating system, so my html for that field looks like this:</p>\n\n<pre><code>    &lt;div class=\"fieldWrapper\"&gt;\n    {{ form.starttime.errors }} \n    &lt;label for=\"id_starttime\"&gt;Start Time:&lt;/label&gt; \n    {{ form.starttime }} \n    &lt;/div&gt;  \n</code></pre>\n"},{"tags":["jquery","python","django","django-forms","django-templates"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13251155,"title":"How should cloned Django forms be collected on submission?","body":"<p>I'm using standard Django Model Forms which are then used in HTML templates for an application system we're currently re-jigging. </p>\n\n<p>The tricky bit (for me at least) is one step in the process which dynamically adds additional forms to the HTML using a jQuery plugin called <a href=\"http://www.mdelrosso.com/sheepit/index.php?lng=en_GB\" rel=\"nofollow\">\"SheepIt\"</a> and I'm wondering how all the form data can be easily collected in the related view.</p>\n\n<p>The SheepIt bit: </p>\n\n<pre><code>$(document).ready(function() {   \n        var sheepItForm = $('#sheepItForm').sheepIt({\n            separator: '',\n            allowRemoveLast: true,\n            allowRemoveCurrent: true,\n            allowRemoveAll: false,\n            allowAdd: true,\n            allowAddN: false,\n            minFormsCount: 1,\n            iniFormsCount: 1\n        });\n\n    });\n</code></pre>\n\n<p>Template code:</p>\n\n<pre><code>&lt;div id=\"entry_form\"&gt;\n&lt;form method=\"post\" enctype=\"multipart/form-data\" action=\"/enter/2/\" id=\"sheepItForm\"&gt;\n    &lt;fieldset id=\"sheepItForm_template\"&gt;\n                &lt;a id=\"sheepItForm_remove_current\"&gt;X&lt;/a&gt;\n                &lt;div class=\"select\"&gt;{{ form.select }}&lt;/div&gt;\n                &lt;div class=\"text\"&gt;{{ form.text }}&lt;/div&gt;\n                &lt;div class=\"upload\"&gt;{{ form.upload }}&lt;/div&gt;\n    &lt;/fieldset&gt;\n\n     &lt;div id=\"sheepItForm_noforms_template\"&gt;No Entries&lt;/div&gt;\n\n     &lt;div id=\"sheepItForm_controls\"&gt;\n         &lt;div id=\"sheepItForm_add\"&gt;&lt;a&gt;&lt;strong&gt;+&lt;/strong&gt; Add Another Entry&lt;/a&gt;&lt;/div&gt;\n     &lt;/div&gt; \n\n{{ formset.management_form }}\n&lt;input type=\"submit\" value=\"Proceed to Payment\"&gt; \n&lt;/form&gt;&lt;/div&gt;\n</code></pre>\n\n<p>The above outputs a little form with buttons to add and remove clones of the form using the SheepIt plugin. </p>\n\n<p>Normally, we would collect the form data with something like:</p>\n\n<pre><code>form_data = request.POST.copy()\n</code></pre>\n\n<p>Or similar. Should I just iterate over everything collected in the post data or is there a better perhaps 'pythonic' way of handling these little clones? Perhaps gathering them into a formset then doing something similar to:</p>\n\n<pre><code>for f in formset.forms:\n    if f.is_valid():\n        f.save()\n</code></pre>\n\n<p>Edit:\nAnd here's some of the views code that I'm currently chopping and changing:</p>\n\n<pre><code>    form = EntryForm_2_set.form()\n    template_dict['form'] = form\n    if request.method == 'POST':\n        # from forms.py: EntryForm_2_set = forms.formsets.formset_factory(EntryForm_2, extra=0)\n        formset = EntryForm_2_set(request.POST)\n        if formset.is_valid():\n            for f in formset.forms:\n                if f.is_valid():\n                    f.save()\n            entry_url = reverse('entry-stage',kwargs={'stage':3}) \n            return HttpResponseRedirect(entry_url)\n    else:\n        formset = EntryForm_2_set()\n        template_dict['formset'] = formset\n    return render_to_response('submission-stage-two.html', template_dict, RequestContext(request)) \n</code></pre>\n\n<p>Any ideas guys?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13255449,"title":"Deleting inline model in Django admin","body":"<p>I am trying to use Django admin to remove an inline model. I get an error saying</p>\n\n<blockquote>\n  <p>[u'Select a valid choice. That choice is not one of the available choices.']</p>\n</blockquote>\n\n<p>I check the location where the exception is raised. It seems like the inline model was removed, then a form validation happened on the parent model with the deleted inline model still as value of the form. That caused the failure.</p>\n\n<p>In my admin model, I had a <code>save_formset</code> method defined, that called <code>formset.save(commit=False)</code>. Is the <code>commit=False</code> not telling Django to not delete the related models?</p>\n\n<p>Thanks.</p>\n"},{"tags":["django","celery"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":268,"score":3,"question_id":8249550,"title":"Django-celery deprecation error?","body":"<p>I just started up django-celery and got this warning:</p>\n\n<pre><code>DeprecationWarning: \nThe `celery.decorators` module and the magic keyword arguments\nare pending deprecation and will be deprecated in 2.4, then removed\nin 3.0.\n\n`task.request` should be used instead of magic keyword arguments,\nand `celery.task.task` used instead of `celery.decorators.task`.\n\nSee the 2.2 Changelog for more information.\n</code></pre>\n\n<p>Here's my test task:</p>\n\n<pre><code>from celery.decorators import task\n@task()\ndef myProcessingFunction():\n  print \"Zing!\"\n  return 1\n</code></pre>\n\n<p>I'm calling it from a view with:</p>\n\n<pre><code>myProcessingFunction.delay()\n</code></pre>\n\n<p>I can't find any documentation for this error. What's going on?</p>\n"},{"tags":["python","django","amazon-s3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13233340,"title":"Amazon S3: I'm seeing 'Raw Content' stored rather than an image","body":"<p>I'm pinging an API which is giving me the path to an image. I am then opening/reading that image and saving it to a database on s3.</p>\n\n<p>The problem is that rather than storing the actual image, it's storing just the words <code>Raw Content</code>. What am I doing wrong? </p>\n\n<p>Here's my relevant code. Basically I store the path to the file in the field <code>coverart</code> and the function <code>store_in_s3_partpic</code> returns the path to the file. This function also obviously loads the content to S3.</p>\n\n<pre><code>pic = partpics['url']\n# CACHING\nimg_url = pic\nname = urlparse(img_url).path.split('/')[-1]\n#wrap your file content??\ncontent = ContentFile(urllib2.urlopen(img_url).read())\nunipart.coverart = store_in_s3_partpic(name, content)\n</code></pre>\n\n<p>Am I doing anything wrong here that would cause me to just see 'Raw Content'?</p>\n\n<p>Here's my store_in_s3_partpic code:</p>\n\n<pre><code>def store_in_s3_partpic(name, content):\n    print \"STORING PARTPIC\"\n    conn = S3Connection(settings.AWS_ACCESS_KEY_ID, settings.AWS_SECRET_ACCESS_KEY)\n    pathtofile = \"partpics/%s\" % (name)\n    b = conn.create_bucket('mybucket')\n    mime = mimetypes.guess_type(name)[0]\n    k = Key(b)\n    k.key = \"/media/partpics/%s\" % (name)\n    k.set_metadata(\"Content-Type\", mime)\n    k.set_contents_from_string(content)\n    k.set_acl(\"public-read\")\n    return pathtofile\n</code></pre>\n"},{"tags":["django","facebook","facebook-authentication","django-socialauth"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13162071,"title":"AuthFailed with django-social-auth & Facebook authentication","body":"<p>I'm using django-social-auth to do Facebook server-side authentication, and I am getting this error that I've been unable to track down:  AuthFailed('There was an error authenticating the app').</p>\n\n<p>I do NOT get this error when I test locally and I have the Facebook app site URL pointing to localhost.</p>\n\n<p>However, I do get this error every time I point the Facebook app site URL to my dev instance -- e.g., <a href=\"https://dev.mydomain.com\" rel=\"nofollow\">https://dev.mydomain.com</a>.</p>\n\n<p>I have not been able to find a list of things that might cause the AuthFailed('There was an error authenticating the app') error.</p>\n\n<p>Also, I have not been able to find others that have used django-social-auth successfully and solved this problem already.</p>\n\n<p>I've found some useful info at the following:\n<a href=\"https://github.com/omab/django-social-auth/blob/master/doc/configuration.rst\" rel=\"nofollow\">https://github.com/omab/django-social-auth/blob/master/doc/configuration.rst</a><br>\n<a href=\"http://django-social-auth.readthedocs.org/en/latest/\" rel=\"nofollow\">http://django-social-auth.readthedocs.org/en/latest/</a><br>\n<a href=\"https://developers.facebook.com/docs/technical-guides/login/\" rel=\"nofollow\">https://developers.facebook.com/docs/technical-guides/login/</a>    <a href=\"https://developers.facebook.com/docs/howtos/login/server-side-login/\" rel=\"nofollow\">https://developers.facebook.com/docs/howtos/login/server-side-login/</a></p>\n\n<p>Lastly, I want to do server-side authentication because I want to retrieve users' name, email, and photo.  However, if that can be done via client-side authentication, I guess I could try that.</p>\n\n<p>Code below...</p>\n\n<p>in settings.py:</p>\n\n<pre><code>LOGIN_URL = '/account/login/'\nLOGIN_REDIRECT_URL = '/'\nLOGIN_ERROR_URL = '/account/login/' # added when trying to debug Facebook error\n\nAUTHENTICATION_BACKENDS = (\n    'social_auth.backends.facebook.FacebookBackend',\n    'django.contrib.auth.backends.ModelBackend',\n)\n\nFACEBOOK_APP_ID = 'xxx'\nFACEBOOK_API_SECRET = 'xxxxxx'\nFACEBOOK_EXTENDED_PERMISSIONS = ['email']\n\nSOCIAL_AUTH_CREATE_USERS = True\nSOCIAL_AUTH_FORCE_RANDOM_USERNAME = False\nSOCIAL_AUTH_DEFAULT_USERNAME = 'socialauth_user'\nSOCIAL_AUTH_COMPLETE_URL_NAME = 'socialauth_complete'\nSOCIAL_AUTH_ERROR_KEY = 'socialauth_error'\nSOCIAL_AUTH_REDIRECT_IS_HTTPS = True    # force https in dev and production\n\n# is SOCIAL_AUTH_LOGIN_REDIRECT_URL or SOCIAL_AUTH_BACKEND_ERROR_URL needed???\n\nSOCIAL_AUTH_PIPELINE = (\n    'social_auth.backends.pipeline.social.social_auth_user',\n    'social_auth.backends.pipeline.associate.associate_by_email',\n    'social_auth.backends.pipeline.misc.save_status_to_session',\n    'apps.dsa_pipeline.redirect_to_form',\n    'apps.dsa_pipeline.username',\n    'apps.dsa_pipeline.phone',\n    'social_auth.backends.pipeline.user.create_user',\n    'social_auth.backends.pipeline.social.associate_user',\n    'social_auth.backends.pipeline.social.load_extra_data',\n    'social_auth.backends.pipeline.user.update_user_details',\n    'apps.dsa_pipeline.profile',\n) \n</code></pre>\n\n<p>in dsa_pipeline.py:</p>\n\n<pre><code>from django.http import HttpResponseRedirect\nfrom urllib2 import urlopen\n\ndef redirect_to_form(*args, **kwargs):\n    if not kwargs['request'].session.get('saved_username') and kwargs.get('user') is None:\n        return HttpResponseRedirect('/account/signup_dsa/')\n\ndef username(request, *args, **kwargs):\n    if kwargs.get('user'):\n        username = kwargs['user'].username\n    else:\n        username = request.session.get('saved_username')\n    return {'username': username}\n\ndef phone(request, *args, **kwargs):\n    if kwargs.get('phone'):\n        phone = kwargs['phone'].phone\n    else:\n        phone = request.session.get('saved_phone')\n    return {'phone': phone}\n\ndef profile(backend, details, response, social_user, uid, user, *args, **kwargs):\n    profile = user.profile\n    if not profile.phone:\n        ph = kwargs.get('phone')\n        if ph:\n            profile.phone = ph\n            profile.save()\n</code></pre>\n\n<p>in urls.py:</p>\n\n<pre><code>urlpatterns = patterns(\"\",\n    url(r\"^$\", direct_to_template, {\"template\": \"homepage.html\"}, name=\"home\"),\n    url(r\"^admin/\", include(admin.site.urls)),\n\n    # profiles\n    url(r'^', include(\"apps.profiles.urls\")),\n    url(r\"^account/signup/$\", SignupView.as_view(), name=\"account_signup\"),\n    url(r\"^account/signup_dsa/$\", SignupViewDSA.as_view(), name=\"account_signup_dsa\"), \n    url(r\"^account/\", include(\"account.urls\")),\n\n    # Django Social Auth\n    url(r'', include('social_auth.urls')),\n</code></pre>\n\n<p>Thanks for any help!</p>\n"},{"tags":["python","django","api","twisted","flask"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":102,"score":1,"question_id":13253101,"title":"What is the best Python library for building APIs?","body":"<p>Which Python library or framework would you use to build an API service? I would like to expose a running Python application to calls from other machines - sort of like an API service, whose callbacks can talk to my main object system.</p>\n\n<p>One of my special requirements is that the main code must run uninterrupted the whole time, hence the API should be able to run in a separate thread and talk to the main model through a <code>Queue</code>.</p>\n\n<p>I tried using <em>Twisted</em> so far, because it has nice SOAP support, allowing me to not have to serialize anything. This is what the caller can look like:</p>\n\n<pre><code>import SOAPpy\np = SOAPpy.SOAPProxy('http://localhost:8088/')\nget = p.give(data=[\"my precious args\", 15, {\"brave\":\"sir robin\"}])\n</code></pre>\n\n<p>But on the down side:</p>\n\n<ol>\n<li>I can't run it as a background thread (I'm getting errors that signals don't work unless the reactor is in the main thread), meaning I have to reorganize my model code to be in the background making debugging harder. </li>\n<li>This automatic serialization is not all-powerful - not all objects can get passed, such as timedeltas or some custom objects.</li>\n</ol>\n\n<p>I considered using <em>Flask</em> or <em>Django</em> and some serialization format like <em>JSON</em>, but I'm not sure if they would do the trick, justifying the learning overhead.</p>\n\n<p>Is there some magic combo of:</p>\n\n<ul>\n<li>a nice background thread web listener whose callbacks can talk to the main model</li>\n<li>a simple, clean way to pass objects around, such as pickled objects or a way to quickly (de)serialize into JSON</li>\n<li>preferably some existing module that encompasses all this so that I don't have to reinvent the wheel</li>\n</ul>\n\n<p>that you would recommend?</p>\n"},{"tags":["python","django","git","heroku"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13237845,"title":"Deploy Django App to Heroku","body":"<pre><code>    Pushing to git@heroku.com:lebab.git\n\n-----&gt; Heroku receiving push\n-----&gt; Python/Django app detected\n-----&gt; Preparing Python interpreter (2.7.2)\n-----&gt; Creating Virtualenv version 1.7.2\n       New python executable in .heroku/venv/bin/python2.7\n       Also creating executable in .heroku/venv/bin/python\n</code></pre>\n\n<p><strong>* omission　*</strong></p>\n\n<pre><code>    -----&gt; Discovering process types\n\n         !     Heroku push rejected due\n\n to an unrecognized error.\n     !     We've been notified, see http://support.heroku.com if the problem persists.\n\n\n    To git@heroku.com:lebab.git\n     ! [remote rejected] master -&gt; master (pre-receive hook declined)\n    error: failed to push some refs to 'git@heroku.com:lebab.git'\n</code></pre>\n\n<p>I made django application, so I tried to deploy it to heroku.\nand get the error.\nwhat's mean? any ideas? \nIf should I give more info, I will.</p>\n"},{"tags":["python","django","pytz"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13254409,"title":"UnknownTimeZoneError when using RequestContext","body":"<p>When using Django 1.4, I am getting an <code>UnknownTimeZoneError</code> for <code>America/Chicago</code> when using RequestContext, but it works without it...any ideas?</p>\n\n<p><b>Error Message</b></p>\n\n<pre><code>UnknownTimeZoneError at /my_proj/bad_view/\n'America/Chicago'\n</code></pre>\n\n<p><b>Source</b></p>\n\n<pre><code># This works\ndef good_view(request):\n    data = {}\n    return render_to_response('mytemplate.html',\n                              data)\n\n# This doesn't\ndef bad_view(request):\n    data = {}\n    return render_to_response('mytemplate.html',\n                              data,\n                              context_instance=RequestContext(request))\n</code></pre>\n"},{"tags":["django","django-forms","django-authentication"],"answer_count":3,"favorite_count":17,"up_vote_count":22,"down_vote_count":0,"view_count":5714,"score":22,"question_id":2734055,"title":"Putting a django login form on every page","body":"<p>I'd like the login form (AuthenticationForm from django.contrib.auth) to appear on every page in my site if the user is not logged in. When the user logs in, they will be redirected to the same page. If there is an error, the error will be shown on the same page with the form.</p>\n\n<p>I suppose you'd need a context processor to provide the form to every template. But, then you'd also need every view to handle the posted form? Does this mean you need to create some middleware? I'm a bit lost.</p>\n\n<p>Is there an accepted way of doing this?</p>\n"},{"tags":["python","django","apache","mod-wsgi"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":264,"score":0,"question_id":12099004,"title":"Django, mod_wsgi, Apache: Internal server error","body":"<p>I have configured Django 1.4 with mod_wsgi 2.0 and apache 2.2.3 in a Redhat server.\nBut when I try to access the server I get the following error: \n\"ERROR 500: Internal Server Error.\"</p>\n\n<pre><code>[root@lts5srv1 hardi]# wget mritest.domain.ch\n--2012-08-23 21:51:27--  http://mritest.domain.ch/\nResolving mritest.domain.ch... 127.0.0.1\nConnecting to mritest.domain.ch|127.0.0.1|:80... connected.\nHTTP request sent, awaiting response... 500 Internal Server Error\n2012-08-23 21:51:27 ERROR 500: Internal Server Error.\n</code></pre>\n\n<p>So I have the connection, but I don't get any valid response.\nDoes it depends on the django version, should I make the deployment with Django 1.3 ?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Apache error log:</p>\n\n<pre><code>[Thu Aug 23 22:34:04 2012] [error] [client 127.0.0.1] mod_wsgi (pid=7835): Exception occurred processing WSGI script '/home/django_www/hello/apache/django.wsgi'.\n[Thu Aug 23 22:34:04 2012] [error] Traceback (most recent call last):\n[Thu Aug 23 22:34:04 2012] [error] File \"/home/django_www/hello/apache/django.wsgi\", line 1, in &lt;module&gt; [Thu Aug 23 22:34:04 2012] [error] import os\n[Thu Aug 23 22:34:04 2012] [error] ImportError: No module named os\"\n</code></pre>\n"},{"tags":["python","django","django-templates"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":13254113,"title":"Distinguish a user depending on which page he comes from. Django","body":"<p>I would like to know if there is a way to differentiate a user depending on which page he comes from.</p>\n\n<p>In my template, I would like to display something only if the user comes from a specific view (I wan't to display the same page I display for the others users, but adding a popup telling him something).</p>\n\n<p>Is there a way to do that?</p>\n\n<p>Thank you for your help</p>\n"},{"tags":["python","django","django-models","django-orm"],"answer_count":3,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":158,"score":6,"question_id":13138685,"title":"Django cross table model structure","body":"<p>I have a <em>System</em> model, and an <em>Interface</em> model. An Interface is the combination between two systems. Before, this interface was represented as an Excel sheet (cross table). Now I'd like to store it in a database.</p>\n\n<p>I tried creation an Interface model, with two foreign keys to System. This doesn't work because :</p>\n\n<ul>\n<li>It creates two different reverse relationships on the target model</li>\n<li>It doesn't avoid having duplicates (first and second rel swapped)</li>\n</ul>\n\n<p>I used this code :</p>\n\n<pre><code>class SystemInterface(Interface):\n    assigned_to = models.ManyToManyField(User)\n    first_system = models.ForeignKey(System)\n    second_system = models.ForeignKey(System)\n</code></pre>\n\n<p>Isn't there a better way to do this ?   </p>\n\n<p>I'd need to have symmetrical relations : it should'nt matter is a System is the \"first\" or \"second\" in an Interface.</p>\n"},{"tags":["python","django","query","mongodb","mongoengine"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":13204573,"title":"Trouble querying ListField with mongoengine","body":"<p>I'm using mongoengine, and I've got the following situation,</p>\n\n<p>My model:</p>\n\n<pre><code>class Item(Document):\n   ...\n   tags = ListField(StringField(max_length=30))\n</code></pre>\n\n<p>The query:</p>\n\n<pre><code>filters = {\n    'tags__contains': query\n}\ntags_with_counter = Item.objects.filter(**filters).item_frequencies('tags')\n</code></pre>\n\n<p>This returns a list of tuples containing the name of the tag, and the frequency. What I want to do is get only tags that contain <strong>query</strong> and their respective frequency. How can I do that?</p>\n"},{"tags":["django","ubuntu","permissions","wsgi","uwsgi"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13251730,"title":"uwsgi: connection refused when running from startup script","body":"<p>I want to run a django site on amazon ec2 (ubuntu) with nginx and uwsgi. I have followed a basic setup as described <a href=\"http://posterous.adambard.com/start-to-finish-serving-mysql-backed-django-w\" rel=\"nofollow\">here</a>. </p>\n\n<p>When I start uwsgi from the command line (as ubuntu user), everything works fine, the site is served up properly:</p>\n\n<pre><code>/home/ubuntu/uwsgi-1.3/uwsgi --home /home/ubuntu/apps/mysite-env/site/ --socket /tmp/uwsgi_mysite.sock --chmod-socket --module mysite_wsgi --pythonpath /home/ubuntu/apps/mysite-env/site/mysite/production -H /home/ubuntu/apps/mysite-env\n</code></pre>\n\n<p>However when I want to demonize this via a startup script, uwsgi reports the following error:</p>\n\n<pre><code>2012/11/06 12:50:08 [error] 1773#0: *10 connect() to unix:///tmp/uwsgi_mysite.sock failed (111: Connection refused) while connecting to upstream, client: 91.66.145.99, server: *.mysite.com, request: \"GET / HTTP/1.1\", upstream: \"uwsgi://unix:///tmp/uwsgi_mysite.sock:\", host: \"mysite.com\"\n</code></pre>\n\n<p>(this looks like a permissions issue)</p>\n\n<p>my startup script looks like this</p>\n\n<pre><code># file: /etc/init/uwsgi_mysite.conf \ndescription \"uWSGI server\"\n\nstart on runlevel [2345]\nstop on runlevel [!2345]\n\nrespawn\nexec /home/ubuntu/uwsgi-1.3/uwsgi --home /home/ubuntu/apps/mysite-env/site/ --socket /tmp/uwsgi_mysite.sock --chmod-socket 777 --module mysite_wsgi --pythonpath /home/ubuntu/apps/mysite-env/site/mysite/production -H /home/ubuntu/apps/mysite-env\n</code></pre>\n\n<p>I have tried to execute the startup command as ubuntu user\n<code>exec sudo -u ubuntu \"command...</code>\"\nbut to no avail.</p>\n\n<p>I also tried to change permissions for the socket file by passing in </p>\n\n<pre><code>--chmod-socket 777\n</code></pre>\n\n<p>but no luck here either. I'm out of ideas as to how to fix this, any input is appreciated!</p>\n"},{"tags":["django","django-models","django-admin","settings","usability"],"answer_count":4,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":1701,"score":4,"question_id":1308034,"title":"Admin interface editable Django app settings","body":"<p>Is there a good way provide user configurable app settings in Django admin?</p>\n\n<p>Basically I would like to have a nice forms where site owner can easily edit such one off information as his contact information, front page text content, etc. Sort of like a normal admin interface of a model, but limited to only one undeletable item in the model.</p>\n"},{"tags":["python","django","django-database"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":13248593,"title":"django database delete specific number of entries","body":"<p>How to delete specific number of entries from the database?\nI did something like this</p>\n\n<pre><code>EntriesToDelete=Statusmessages.objects.filter(time__lt=date)[:30000]\nEntriesToDelete.delete()\n</code></pre>\n\n<p>But I get an error which says:\n<code>AssertionError. Cannot use 'limit' or 'offset' with delete</code>.</p>\n\n<p>How can I specify the number of entries to be deleted.</p>\n"},{"tags":["python","django","apache","concurrency","mod-wsgi"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13171860,"title":"How django handles simultaneous requests with concurrency over global variables?","body":"<p>I have a django instance hosted via apache/mod_wsgi. I use <code>pre_save</code> and <code>post_save</code> signals to store the values before and after save for later comparisons. For that I use global variables to store the <code>pre_save</code> values which can be accessed in the <code>post_save</code> signal handler.</p>\n\n<p>My question is, if two requests A and B come together simultaneously requesting a same web service, will it be concurrent? The B should not read the global variable which is written by A and vice versa.</p>\n\n<p>PS: I don't use any threading <code>Lock</code> on variables.</p>\n"},{"tags":["python","django","dynamic","django-models","models"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13070424,"title":"django-mutant creating models in django-admin","body":"<p>I started experimenting with <code>django-mutant 0.0.2</code> (on <code>django 1.4.2</code>), but due to the lack of documentation I got almost nowhere. The way I understood by the project description I could use it to create my models dynamically, so I thought I can wire it with the <code>django-admin</code> interface, so I can create the models and define all it's fields there. I saw some other alternatives like <code>django-eav</code>, <code>dynamo</code>, Will Hardy's <code>dynamic-models</code>, etc. but it sounds like this is the best implementation until now, so I thought I should use this.</p>\n\n<p>I've put this in <code>settings.py</code>:</p>\n\n<pre><code>INSTALLED_APPS = (\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'django.contrib.admin',\n    'south',\n    'polymodels',\n    'mutant',\n    'mutant.contrib.boolean',\n    'mutant.contrib.temporal',\n    'mutant.contrib.file',\n    'mutant.contrib.numeric',\n    'mutant.contrib.text',\n    'mutant.contrib.web',\n    'mutant.contrib.related',\n    'dynamodels'   # this is the name of my testapp\n)\n</code></pre>\n\n<p>I opened up the source of <code>django-mutant</code> to figure out what should I do, and I thought it's enough to import the <code>mutant.models.ModelDefinition</code> and <code>mutant.models.FieldDefinition</code> into my <code>admin.py</code> and register them, so I tried this:</p>\n\n<pre><code>from django.contrib import admin\n\nfrom mutant import models\n\n\nclass ModelDefinitionAdmin(admin.ModelAdmin):\n    pass\n\nadmin.site.register(models.ModelDefinition, ModelDefinitionAdmin)\n\n\nclass FieldDefinitionAdmin(admin.ModelAdmin):\n    pass\n\nadmin.site.register(models.FieldDefinition, FieldDefinitionAdmin)\n</code></pre>\n\n<p>After a syncdb, I got it running, and I got a \"mutant\" section in my admin interface, inside it a \"Models definition\" and \"Fields\". I added a model successfully, although I couldn't specify any appname that is in the list of <code>INSTALLED_APPS</code>. Adding a field failed badly, for it's <code>Model def</code> parameter I did choose the model I created before(it was the only one on the list), and I did choose \"Integer field definition\" for <code>Content type</code>. Hitting the save button gave me this:</p>\n\n<pre><code>NotImplementedError at /admin/mutant/fielddefinition/add/\n\nNo exception supplied\n...\n...\n/home/user/dev/virenvs/dynamicmodels/lib/python2.6/site-packages/django_mutant-0.0.2-py2.6.egg/mutant/models/field/__init__.py in save\n        return super(FieldDefinition, self).save(*args, **kwargs) ...\n\n/home/user/dev/virenvs/dynamicmodels/lib/python2.6/site-packages/django_polymodels-1.0.1-py2.6.egg/polymodels/models.py in save\n        return super(BasePolymorphicModel, self).save(*args, **kwargs) ...\n\n/home/user/dev/virenvs/dynamicmodels/lib/python2.6/site-packages/django_mutant-0.0.2-py2.6.egg/mutant/models/model/__init__.py in save\n        self.model_def.model_class(force_create=True) ...\n\n/home/user/dev/virenvs/dynamicmodels/lib/python2.6/site-packages/django_mutant-0.0.2-py2.6.egg/mutant/models/model/__init__.py in model_class\n            model_class = self._create_model_class(existing_model_class) ...\n\n/home/user/dev/virenvs/dynamicmodels/lib/python2.6/site-packages/django_mutant-0.0.2-py2.6.egg/mutant/models/model/__init__.py in _create_model_class\n        attrs = self.get_model_attrs(existing_model_class) ...\n\n/home/user/dev/virenvs/dynamicmodels/lib/python2.6/site-packages/django_mutant-0.0.2-py2.6.egg/mutant/models/model/__init__.py in get_model_attrs\n                            for f in self.fielddefinitions.select_subclasses())) ...\n\n/home/user/dev/virenvs/dynamicmodels/lib/python2.6/site-packages/django_mutant-0.0.2-py2.6.egg/mutant/models/model/__init__.py in &lt;genexpr&gt;\n                            for f in self.fielddefinitions.select_subclasses())) ...\n\n/home/user/dev/virenvs/dynamicmodels/lib/python2.6/site-packages/django_mutant-0.0.2-py2.6.egg/mutant/models/field/__init__.py in field_instance\n        cls = self.get_field_class() ...\n\n/home/user/dev/virenvs/dynamicmodels/lib/python2.6/site-packages/django_mutant-0.0.2-py2.6.egg/mutant/models/field/__init__.py in get_field_class\n            raise NotImplementedError \n</code></pre>\n\n<p>So it may not be the way I should define my fields (or even models?).. On the project's page there is a snippet which subclasses the <code>FieldDefinition</code> class, creating a DateFieldDefinition, if I put that snippet into my <code>models.py</code> and register that class in my admin, I can add any type of fields successfully. Does it mean I have to subclass all field types I want to use to be able to create them in the admin? Are they actually bound to my Model when I create them this way? Is there a working example somewhere to show at least the basics?\nSorry this was the shortest version I could came up with, any suggestion would be appreciated.</p>\n\n<p><strong>UPDATE:</strong>\nI made a mistake in specifying the version I was trying, I got the NotImplementedError for the latest dev version(which is also 0.0.2 by the way), but when I tried the real 0.0.2 got from PyPi the same way as the dev, I got a form-error without an error-message, but something failed at validation definitely. So generally I'm not closer to the solution.</p>\n\n<p><strong>UPDATE2:</strong>\nI registered mutant's base field types dynamically in the admin, and I am able now to add/change/delete models and fields with this admin snippet:</p>\n\n<pre><code>from django.contrib import admin\n\nfrom mutant import models\n\nfor field_type in models.FieldDefinitionBase._field_definitions.values():\n    attrs = {'model': field_type}\n    FieldDefAdmin = type('{0}Admin'.format(field_type.__name__),\n                         (admin.ModelAdmin,),\n                         attrs)\n    admin.site.register(field_type, FieldDefAdmin)\n\n\nclass ModelDefinitionAdmin(admin.ModelAdmin):\n    model = models.ModelDefinition\n\nadmin.site.register(models.ModelDefinition, ModelDefinitionAdmin)\n</code></pre>\n\n<p>However when I inspect the actual data in my database from the mysql console for example, my table is not present in the database. There are mutant's tables, and they contain the entries about my model, and my fields, but I thought once the dynamic model class is constructed, it will be also written to the database as it is.</p>\n\n<p><strong>UPDATE3:</strong>\nActually I was wrong, the table is found in my database, it's just prefixed with \"mutant_\" so I didn't recognize it's there. Looks like this will be a valid method to work with it, although to make a decent user-friendly interface to operate with it will require more work.</p>\n"},{"tags":["django","django-models","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13249414,"title":"form.is_valid() returning false","body":"<p>I have a Model class.</p>\n\n<pre><code>class Search(forms.Form):\n    query=forms.CharField()\n</code></pre>\n\n<p>And, a view function.</p>\n\n<pre><code>def search(request):\n  c = {}\n  c.update(csrf(request))\n  if request.method == 'POST': \n    form = Search(request.POST) \n      if form.is_valid():\n        search_query=form.cleaned_data['query']\n            return HttpResponse(\"your query: %s\" %search_query  , c) \n      else:\n        return HttpResponse(form , c)\n  else:\n    return render_to_response('polls/search.html', c)\n</code></pre>\n\n<p>And, here is my search.html:</p>\n\n<pre><code> &lt;form action=\"/polls/search\" method=\"post\"&gt;{% csrf_token %}\n  &lt;p&gt;&lt;label for=\"query_label\"&gt;query:&lt;/label&gt;\n    &lt;input type=\"text\" name=\"query_txt\" id=\"query_txt_id\" /&gt;&lt;/p&gt;\n  &lt;input type=\"submit\" value=\"Submit\" /&gt;\n &lt;/form&gt;\n</code></pre>\n\n<p>After giving some characters as input, it always show me the following as plain text(Not as error).</p>\n\n<blockquote>\n  <p>\"A server error occurred.  Please contact the administrator.\"</p>\n</blockquote>\n"},{"tags":["python","django","forms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13248569,"title":"Not been able to process simple form in Django?","body":"<p>I am having problem with with a simple form POST. Here's my url.py:</p>\n\n<pre><code>urlpatterns = patterns('',\n\n    url(r'^admin/', include(admin.site.urls)),\n    url(r'^', 'fileupload.views.show_template'), \n    url(r'^upload_file/', 'fileupload.views.upload_file'),\n)\n</code></pre>\n\n<p>Here's my form.html:</p>\n\n<pre><code>form action=\"/upload_file/\" method=\"post\"&gt;\n    {% csrf_token %}\n        &lt;fieldset&gt;\n            &lt;legend&gt;Session&lt;/legend&gt;\n                &lt;label for=\"input-one\" class=\"float\"&gt;&lt;strong&gt;Session Name:&lt;/strong&gt;&lt;/label&gt;&lt;br /&gt;\n                &lt;input class=\"inp-text\" name=\"input-one-name\" id=\"session\" type=\"text\" size=\"30\" /&gt;&lt;br /&gt;\n\n                &lt;label for=\"input-two\" class=\"float\"&gt;&lt;strong&gt;Source:&lt;/strong&gt;&lt;/label&gt;&lt;br /&gt;\n                &lt;input class=\"inp-text\" name=\"input-two-name\"  id=\"source\" type=\"text\" size=\"30\" /&gt;\n\n                &lt;label for=\"input-two\" class=\"float\"&gt;&lt;strong&gt;Destination:&lt;/strong&gt;&lt;/label&gt;&lt;br /&gt;\n                &lt;input class=\"inp-text\" name=\"input-two-name\"  id=\"destination\" type=\"text\" size=\"30\" /&gt;\n        &lt;/fieldset&gt;\n\n\n\n        &lt;p&gt;&lt;input class=\"submit-button\" type=\"submit\" alt=\"SUBMIT\" name=\"Submit\" value=\"Save\" /&gt;&lt;/p&gt;\n        &lt;p&gt;&lt;input class=\"cancel-button\" type=\"reset\"  name=\"Save\" value=\"Cancel\" /&gt;&lt;/p&gt;\n    &lt;/form&gt;\n</code></pre>\n\n<p>Here's my views.py:</p>\n\n<pre><code>from django.http import HttpResponseRedirect\nfrom django.shortcuts import render_to_response\nfrom fileupload.forms import UploadFileForm\nfrom django.template import RequestContext\n\n\ndef show_template(request):\n    return render_to_response('form.html', {'form': 'form'},  context_instance=RequestContext(request))\n\ndef upload_file(request):\n    if request.method == 'POST':\n        form = UploadFileForm(request.POST)\n        if form.is_valid():\n            sessiong = form.cleaned_data['session']\n            sourceg = form.cleaned_data['source']\n            destinationg = form.cleaned_data['destination']\n            return HttpResponseRedirect('/thanks/') \n    else:\n        form = UploadFileForm()\n    return render_to_response('form.html', {'form': form},  context_instance=RequestContext(request))\n</code></pre>\n\n<p>The problem is whenever I fill up the form and hit Save the form is not processed at all which clearly means my view upload_file is not working at all. What might be the problem? The simple logic is: user fills up the form, click save and the data's are stored in python variable which later I plan to store in a database. </p>\n"},{"tags":["django","foreign-keys"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":37,"score":2,"question_id":13248994,"title":"django: assigning foreign key before target model is saved","body":"<p>Assume <code>A</code> and <code>B</code> are django Models, where <code>A</code> has a foreign key field to <code>B</code>:</p>\n\n<pre><code>a = A()\nb = B()\na.my_b = b\nb.save()\na.save()\n</code></pre>\n\n<p>Surprisingly <code>a</code> is saved with <code>null</code> in the <code>my_b</code> foreign key field. If you check <code>a.my_b</code> before or after the saves it <em>does</em> refer to the <code>b</code> instance, however it seems that django evaluates the foreign key id itself upon <code>a.my_b = b</code> assignment and not upon <code>a.save()</code>. In complex systems and flows it may be hard to change the order of commands, so simply saving <code>b</code> before assigning it to <code>a</code> could be impractical...</p>\n\n<p>Adding the incredible statement <code>a.my_b=a.my_b</code> between the save commands works, but seems to me a horrid workaround.</p>\n\n<p><strong>Is there a way to configure django to re-evaluate foreign keys upon saving model instances?</strong></p>\n\n<p>Is there a different approach that might solve this issue?</p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13248533,"title":"Condition on the length of a queryset in a template, Django","body":"<p>I would like to make a condition on a query_set length in my template.\nMy queryset is named \"favoris\"\nHere is what I tried:</p>\n\n<pre><code>    {% if favoris.count&gt;=5 %}\n     my html\n    {% endif %}\n</code></pre>\n\n<p>And i get this error:  </p>\n\n<pre><code>     TemplateSyntaxError at /mysite/myview\n     Could not parse the remainder: '==5' from 'favoris.count==5'\n</code></pre>\n\n<p>Any idea on how to do that? Thank you for your help</p>\n"},{"tags":["python","django","django-urls"],"answer_count":4,"favorite_count":3,"up_vote_count":1,"down_vote_count":0,"view_count":705,"score":1,"question_id":2030225,"title":"How to get current_app for using with reverse in multi-deployable reusable Django application?","body":"<p>I'm writing reusable app. And I want to deploy it several times.</p>\n\n<p>Here is urls.py:</p>\n\n<pre><code>urlpatterns = patterns('',\n(r'^carphotos/', include('webui.photos.urls', app_name='car-photos') ),\n(r'^userphotos/', include('webui.photos.urls',  app_name='profile-photos') ),)\n</code></pre>\n\n<p>and photos/urls.py:</p>\n\n<pre><code>urlpatterns = patterns('webui.photos.views',\nurl(r'^$', album_list, name=\"album-list\" )\nurl(r'^newalbum/$', album_page, {'create': True}, name=\"album-create\"),)\n</code></pre>\n\n<p>On the album_list view I want to show url for creating new album album_page.</p>\n\n<p>I found that I have to use parameter current_app of reverse function to get proper URL.</p>\n\n<p>But how to get this current_app?\nI thought the answer is something simple. But I can't find it in django documentation.</p>\n\n<p>Thanks, Nick</p>\n"},{"tags":["django","django-models"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13230091,"title":"deleting related models django","body":"<p>i currently have this models how do i delete the logo without deleting the company model.Please sample codes if possible thanks.</p>\n\n<pre><code>class Picture(models.Model):\n    owner = models.ForeignKey(User,blank = True)\n    caption = models.CharField(max_length=150, blank=True, null=True)\n    image = ImageField(upload_to='images/',blank = True, null = True)\n\nclass Company(GenericUser):\n    company_name = models.CharField(max_length=150,blank = True,null = True)\n    logo = models.ForeignKey(Picture,blank = True,null = True)\n</code></pre>\n\n<p>this is a model how will i then remove the foto from the land model the model looks like this.</p>\n\n<pre><code>class Land(Properies):\n    photo = models.ManyToManyField(Picture,blank=True,related_name='Land_Pictures',null = True)\n</code></pre>\n\n<p>i tried this bit it dose not work</p>\n\n<pre><code>checked_list = []\nstart = 1            \nland_photos = sorted(list(land.photo.select_related()),reverse =True)\nwhile start &lt; 8:\n    photo = 'photo%s' % start\n    checked = form.cleaned_data[photo]\n    if checked != None:\n        checked_list.append(land_photos[start - 1])\n        start += 1            \nfor a_foto in checked_list:\nland.photo.remove(a_foto)\ntry:\n    a_foto.remove_all_file()\n    a_foto.delete()\nexcept OSError:\n    pass\n</code></pre>\n\n<p>i keep getting an error like that id is set to none and if i hit refresh it works i think</p>\n\n<pre><code>Exception Type:     AssertionError\nException Value:    \nPicture object can't be deleted because its id attribute is set to None.\n</code></pre>\n"},{"tags":["python","django","django-forms","csrf"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":2056,"score":4,"question_id":8089224,"title":"CSRF Token missing or incorrect","body":"<p>Beginner at Django here, I've been trying to fix this for a long time now.\nI do have 'django.middleware.csrf.CsrfViewMiddleware' in my middleware classes and I do have the token in my post form.</p>\n\n<p>Heres my code, what am I doing wrong?</p>\n\n<pre><code>from django.contrib.auth.forms import UserCreationForm\nfrom django.shortcuts import render_to_response\nfrom django.http import HttpResponseRedirect\nfrom chartsey.authentication.forms import RegistrationForm\nfrom django.template import RequestContext\nfrom django.core.context_processors import csrf\n\ndef register(request):\n\n    if request.method == 'POST':\n        c = RequestContext(request.POST, {})\n        form = RegistrationForm(c)\n        if form.is_valid():\n            new_user = form.save()\n            return HttpResponseRedirect(\"/\")\n    else:\n        form = RegistrationForm()\n\n    return render_to_response(\"register.html\",  {'form': form,  }, )\n</code></pre>\n\n<p>Here's my Template:</p>\n\n<pre><code>{% block content %}\n\n    &lt;h1&gt;Register&lt;/h1&gt;\n    &lt;form action=\"\" method=\"POST\"&gt; {% csrf_token %}\n        {{ form.as_p }}\n    &lt;input type=\"submit\" value=\"Submit\"&gt;\n    &lt;/form&gt;\n\n{% endblock %}\n</code></pre>\n"},{"tags":["django","rest","django-rest-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":56,"score":1,"question_id":13243767,"title":"Django REST framework slow","body":"<p>I'm started using the Django REST framework in preparation for production, but unfortunately, it is performing quite slowly.</p>\n\n<p>I am calling an array of 500 dictionaries, each with 5 key-value pairs each. In the shell, the call-time is not noticeable at all - you press enter, and it's done. Previously, when I was serving the same content directly without the REST framework, there was also no noticeable delay. However, with the REST framework, it takes about 1 - 2 seconds after the page has rendered for the content to display.</p>\n\n<p>I do not think this is due to javascript as hitting the same details through the browseable API results in a similar delay.</p>\n\n<p>Also, I am <strong>NOT</strong> cacheing at the moment.</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13248122,"title":"How to add verbose_name to forms","body":"<p>How to add <code>verbose_name</code> to forms in Django?</p>\n\n<p>In forms.py:</p>\n\n<pre><code>class SendOrderForm(forms.Form):\n   send_option = forms.ModelChoiceField(queryset=Send.objects.all(), verbose_name=\"Send Options\")\n</code></pre>\n\n<p>This is not correct</p>\n"},{"tags":["javascript","python","html","xml","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13246974,"title":"Get XML from python HttpResponse","body":"<p>Is there any way how to GET xml data (via Javascript) from python HttpResponse and place it into body element on webpage?</p>\n\n<p>There is example of my xml in python:</p>\n\n<pre><code>import xml.etree.ElementTree as ET\n\nroot = ET.Element(\"table\")\n\ntr = ET.SubElement(root, \"tr\")\ntd = ET.SubElement(tr, \"td\")\ntd.text = \"some text\"\ntree = ET.ElementTree(root) \n\nresponse = HttpResponse(tree)\n</code></pre>\n\n<p>JS:</p>\n\n<pre><code>$(document).ready(function() {\n  $.get(\"http://localhost:8000/getXml\", function(data){\n    alert(data);\n  });      \n});\n</code></pre>\n\n<p>Thanks for help.</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13240016,"title":"Django model class decorator","body":"<p>I have a need to track changes on Django model instances. I'm aware of solutions like django-reversion but they are overkill for my cause.</p>\n\n<p>I had the idea to create a parameterized class decorator to fit this purpose. The arguments are the field names and a callback function. Here is the code I have at this time:</p>\n\n<pre><code>def audit_fields(fields, callback_fx):\n    def __init__(self, *args, **kwargs):\n        self.__old_init(*args, **kwargs)\n        self.__old_state = self.__get_state_helper()\n\n    def save(self, *args, **kwargs):\n        new_state = self.__get_state_helper()\n\n        for k,v in new_state.items():\n            if (self.__old_state[k] != v):\n                callback_fx(self, k, self.__old_state[k], v)\n\n        val = self.__old_save(*args, **kwargs)\n        self.__old_state = self.__get_state_helper()\n        return val\n\n    def __get_state_helper(self):\n        # make a list of field/values.\n        state_dict = dict()\n        for k,v in [(field.name, field.value_to_string(self)) for field in self._meta.fields if field.name in fields]:\n            state_dict[k] = v\n        return state_dict\n\n    def fx(clazz):\n        # Stash originals\n        clazz.__old_init = clazz.__init__\n        clazz.__old_save = clazz.save\n\n        # Override (and add helper)\n        clazz.__init__ = __init__\n        clazz.__get_state_helper = __get_state_helper\n        clazz.save = save\n        return clazz\n\n    return fx\n</code></pre>\n\n<p>And use it as follows (only relevant part):</p>\n\n<pre><code>@audit_fields([\"status\"], fx)\nclass Order(models.Model):\n    BASKET = \"BASKET\"\n    OPEN = \"OPEN\"\n    PAID = \"PAID\"\n    SHIPPED = \"SHIPPED\"\n    CANCELED = \"CANCELED\"\n    ORDER_STATES = ( (BASKET, 'BASKET'),\n                 (OPEN, 'OPEN'),\n                 (PAID, 'PAID'),\n                 (SHIPPED, 'SHIPPED'),\n                 (CANCELED, 'CANCELED') )\n    status = models.CharField(max_length=16, choices=ORDER_STATES, default=BASKET)\n</code></pre>\n\n<p>And test on the Django shell with:</p>\n\n<pre><code>from store.models import Order\no=Order()\no.status=Order.OPEN\no.save()\n</code></pre>\n\n<p>The error I receive then is:</p>\n\n<pre><code>TypeError: int() argument must be a string or a number, not 'Order'\n</code></pre>\n\n<p>The full stacktrace is here: <a href=\"https://gist.github.com/4020212\" rel=\"nofollow\">https://gist.github.com/4020212</a></p>\n\n<p>Thanks in advance and let me know if you would need more info!</p>\n\n<p><strong>EDIT:</strong> Question answered by randomhuman, code edited and usable as shown!</p>\n"},{"tags":["python","django"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13207747,"title":"No model named \"myapp\" even though I've added it in settings.py","body":"<p>I'm getting the following error:</p>\n\n<pre><code>ImportError at /\nNo module named midi_app\nRequest Method: GET\nRequest URL:    http://127.0.0.1:8000/\nDjango Version: 1.4.1\nException Type: ImportError\nException Value:    No module named midi_app\nException Location: /Users/home/virtualenv/venv/lib/python2.7/site-packages/django/utils/importlib.py in import_module, line 35\nPython Executable:  /Users/home/virtualenv/venv/bin/python\n</code></pre>\n\n<p>I have added my app \"midi_app\" to the <code>INSTALLED_APPS</code> section in settings.py. I'm not sure why I'm seeing this error. Could the virtualenv have anything to do with it?</p>\n\n<p>Thanks. </p>\n\n<p>UPDATE: I've added as many directories as I can think of and I'm still seeing this error. Please see my path below. Please assist, I'm getting really frustrated. </p>\n\n<blockquote>\n  <p>'/Users/home/virtualenv/venv/lib/python27.zip', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/plat-darwin', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/plat-mac', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/plat-mac/lib-scriptpackages',</p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/lib-tk', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/lib-old', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/lib-dynload', </p>\n  \n  <p>'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7', </p>\n  \n  <p>'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',</p>\n  \n  <p>'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',</p>\n  \n  <p>'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',</p>\n  \n  <p>'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',</p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/site-packages', </p>\n  \n  <p>'/Users/home/Desktop/Web Development/Django-1.4', </p>\n  \n  <p>'/Users/home/virtualenv/venv',  </p>\n  \n  <p>'/Users/home/Desktop/Web Development/Aptana Studio 3.0',  </p>\n  \n  <p>'/Users/home/virtualenv/venv/bin',</p>\n  \n  <p>'/Users/home/Desktop/Web Development',  </p>\n  \n  <p>'/Users/home/virtualenv',</p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/site-packages/PIL', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python27.zip',</p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/plat-darwin', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/plat-mac', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/plat-mac/lib-scriptpackages',</p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/lib-tk', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/lib-old'</p>\n</blockquote>\n"},{"tags":["django","heroku","internationalization"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":13246545,"title":"i18n doesn't work at production enviroment on heroku","body":"<p>I have seen more than one hundred posts about i18n issues and no solution seems to solve my problem.</p>\n\n<p>I have an app running with Django 1.3.1 and it works Fine at my develop machine. But when I bring to <strong>heroku</strong> nothing happens. The files are not translated at all. It seems that the locale folder in my project is not being found.</p>\n\n<p>Locale folder is at my project level and this is my settings:</p>\n\n<pre><code>BASE_PATH = os.path.dirname(os.path.abspath(__file__))\n\nLANGUAGE_CODE = 'pt-br'\n\nUSE_I18N = True\n\nUSE_L10N = True\n\nugettext = lambda s: s\nLANGUAGES = (\n    ('en-us', ugettext('English')),\n    ('pt-br', ugettext('Portuguese')),\n)\n\nLOCALE_PATHS = (\n       os.path.join(BASE_PATH, \"locale\"),\n)\n</code></pre>\n\n<p>Locale folder follows this structure:</p>\n\n<pre><code>locale\n    pt_BR\n        LC_MESAGES\n            django.mo\n            django.po\n</code></pre>\n"},{"tags":["python","django","active-directory","django-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13245756,"title":"Django Auth ldap works only for AUTH_LDAP_BIND_DN user","body":"<p>I'm trying to build user authentication against our LDAP using django-auth-ldap package.</p>\n\n<p>settings.py</p>\n\n<pre><code> AUTHENTICATION_BACKENDS = (\n    'django_auth_ldap.backend.LDAPBackend',\n    'django.contrib.auth.backends.ModelBackend',\n )\n\n import ldap\n from django_auth_ldap.config import LDAPSearch, GroupOfNamesType\n\n\n # Baseline configuration.\n AUTH_LDAP_SERVER_URI = \"ldap://ldap.example.com\"\n\n AUTH_LDAP_BIND_DN = \"cn=ldap_user,ou=PEOPLE, dc=example,dc=com\"\n AUTH_LDAP_BIND_PASSWORD = \"test123\"\n AUTH_LDAP_USER_SEARCH = LDAPSearch(\"ou=PEOPLE,dc=example,dc=com\",\n         ldap.SCOPE_SUBTREE, \"(cn=%(user)s)\")\n\n\n\n # Populate the Django user from the LDAP directory.\n AUTH_LDAP_USER_ATTR_MAP = {\n     \"first_name\": \"givenName\",\n     \"last_name\": \"sn\",\n     \"email\": \"mail\"\n     }\n</code></pre>\n\n<p>The above configuration works only for AUTH_LDAP_BIND_DN user (i.e ldap_user), but if i login using other name, authentication will fails.</p>\n\n<p>And also check all my users are in PEOPLE group.</p>\n\n<p>Why this configuration works only for one user?</p>\n"},{"tags":["django","django-admin"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":11116934,"title":"django multiple databases save error","body":"<p>As I'm using multiple databases, when I used to save the contents in second database 'second', I'm getting the error as \"Table 'first.sphboard_post' doesn't exist\". My models in second database is given below:</p>\n\n<pre><code>class Post(models.Model):\n    subject = models.CharField(max_length = 150, verbose_name=\"Title*\")\n    body = models.TextField(max_length = 250, help_text = \"Maximum - 250    Characters.\",verbose_name=\"Comment*\")\n\n    def save(self, *args, **kwargs):\n        super(Post, self).save(using = 'default', *args, **kwargs)\n</code></pre>\n"},{"tags":["django","django-models"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13133554,"title":"Django Multi-Column Foreign Key","body":"<p>Is is possible to define foreign keys referencing multi columns in another model?</p>\n\n<p>For example one foreign key references a two-column index in the product table, and the SQL statement:</p>\n\n<pre><code>FOREIGN KEY (product_category, product_id) REFERENCES product(category, id)\n</code></pre>\n\n<p>BTW I've looked into <code>django.contrib.contenttypes</code> and don't think that's the perfect solution for this kind of scenario.</p>\n"},{"tags":["python","django","aggregation","geodjango","snap-to-grid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13171752,"title":"Aggregate/Group entries by grid location using geodjango's snap_to_grid","body":"<p>I'm trying to figure out the <a href=\"https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoquerysets/#django.contrib.gis.db.models.GeoQuerySet.snap_to_grid\" rel=\"nofollow\"><code>snap_to_grid()</code></a> method, which appears to do what I want, but I'm not sure how to use it.</p>\n\n<p>I have a model with several point fields:</p>\n\n<pre><code>class PointsOfInterest(models.Model):\n    name = models.CharField(max_length=150)\n    center = models.PointField()\n    point2 = models.PointField()\n    point3 = models.PointField()\n</code></pre>\n\n<p>I would like to query all points snapping them to a grid so that points near each other come back with the same location (basically aggregating/grouping by grid location).</p>\n\n<pre><code>&gt;&gt;&gt; print  PointsOfInterest.objects.snap_to_grid(300, field_name=\"center\")[0].center\nPOINT (368411.6666666666860692 2899475.0000000000000000)\n&gt;&gt;&gt; print  PointsOfInterest.objects.all()[0].center\nPOINT (368411.6666666666860692 2899475.0000000000000000)\n</code></pre>\n\n<p>It doesn't seem to be doing anything as the points aren't changing.\nI've tried the <code>.transform()</code> operation and that is responsive and updates the point to the desired projection.</p>\n\n<p>Am I misunderstanding how this method works, or is there a way to do this?</p>\n"},{"tags":["python","django","redirect","location"],"answer_count":7,"favorite_count":23,"up_vote_count":59,"down_vote_count":2,"view_count":33177,"score":57,"question_id":523356,"title":"Python + Django page redirect","body":"<p>How do I accomplish a simple redirect (e.g. cflocation in ColdFusion, or header(location:http://) in django)?</p>\n"},{"tags":["django","distinct","queryset","ticket"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13241838,"title":"Django: Distinct on forgin key relationship","body":"<p>I'm working on a Ticket/Issue-tracker in django where I need to log the status of each ticket. This is a simplification of my models.</p>\n\n<pre><code>class Ticket(models.Model):\n    assigned_to = ForeignKey(User)\n    comment = models.TextField(_('comment'), blank=True)\n    created = models.DateTimeField(_(\"created at\"), auto_now_add=True)\n\nclass TicketStatus(models.Model):\n\n    STATUS_CHOICES = (\n        (10, _('Open'),),\n        (20, _('Other'),),\n        (30, _('Closed'),),\n    )\n\n    ticket = models.ForeignKey(Ticket, verbose_name=_('ticket'))\n    user = models.ForeignKey(User, verbose_name=_('user'))\n    status = models.IntegerField(_('status'), choices=STATUS_CHOICES)\n    date = models.DateTimeField(_(\"created at\"), auto_now_add=True)\n</code></pre>\n\n<p>Now, getting the status of a ticket is easy sorting by date and retrieving the first column like this. </p>\n\n<pre><code>ticket = Ticket.objects.get(pk=1)\nticket.ticketstatus_set.order_by('-date')[0].get_status_display() \n</code></pre>\n\n<p>But then I also want to be able to filter on status in the Admin, and those have to get the status trough a Ticket-queryset, which makes it suddenly more complex. How would I get a queryset with all Tickets with a certain status?</p>\n"},{"tags":["django","zinnia"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13212301,"title":"How do I extend django zinnia weblog entry","body":"<p>I followed the instruction found here</p>\n\n<p><a href=\"http://django-blog-zinnia.readthedocs.org/en/latest/how-to/extending_entry_model.html\" rel=\"nofollow\">http://django-blog-zinnia.readthedocs.org/en/latest/how-to/extending_entry_model.html</a></p>\n\n<p>Unfortunately I am having trouble extending.\nFirst strange thing is that - I have to change the way the entry modules are imported:-</p>\n\n<p>from</p>\n\n<pre><code>from zinnia.models.entry import Entry\nfrom zinnia.admin.entry import EntryAdmin\n</code></pre>\n\n<p>to</p>\n\n<pre><code>from zinnia.models import Entry\nfrom zinnia.admin import EntryAdmin\n</code></pre>\n\n<p>After changing, I then ran the server and went to the admin page but then I got this error.</p>\n\n<pre><code>'RatingAdmin.fieldsets[0][1]['fields']' refers to field 'rating' that is missing from the form.\n</code></pre>\n\n<p>This is my code admin.py</p>\n\n<pre><code>from django.contrib import admin\nfrom django.utils.translation import ugettext_lazy as _\n\n\nfrom zinnia.models import Entry\nfrom zinnia.admin import EntryAdmin\n\nclass RatingAdmin(EntryAdmin):\n# into the 'Content' fieldset\nfieldsets = ((_('Content'), {'fields': (\n'title', 'content', 'image', 'status', 'rating')}),) + \\\nEntryAdmin.fieldsets[1:]\n\n# Unregister the default EntryAdmin\n# then register the EntryGalleryAdmin class\nadmin.site.unregister(Entry)\nadmin.site.register(Entry, RatingAdmin)\n</code></pre>\n\n<p>Here is my Abstract class model happy_models.py</p>\n\n<pre><code>from django.db import models\nfrom zinnia.models.entry import EntryAbstractClass\n\nclass Happy(models.Model):\n    rating = models.CharField(max_length=200)\n\n    def __unicode__(self):\n        return u'Rating %s' % self.title\n\n    class Meta(EntryAbstractClass.Meta):\n        abstract = True\n</code></pre>\n\n<p>Here is my zinnia entry base model path in settings.py</p>\n\n<pre><code>ZINNIA_ENTRY_BASE_MODEL = 'happy.happy_models.Happy'\n</code></pre>\n\n<p>I just noticed this at my console </p>\n\n<pre><code>/zinnia/models.py:30‌​2: RuntimeWarning: happy.happy_models.Happy cannot be imported\n</code></pre>\n\n<p>Here is my directory setup</p>\n\n<pre><code>happy/\n    admin.py\n    happy_models.py\n    views.py\n</code></pre>\n\n<p>Could anyone please tell me what I might be doing wrong when extending entry? Thanks.</p>\n"},{"tags":["django","bash","installscript"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13243869,"title":"Install Django using pip from bash","body":"<p>I am trying to write an install script for my project which requires Django.  I am using pip to install a list of apps but when it gets to Django it says </p>\n\n<pre><code>    You just installed Django's auth system, which means you don't have any superusers defined.  \n    Would you like to create one now?\n</code></pre>\n\n<p>I need this script to be autonomous. </p>\n\n<p>Is there away to automatically answer this question or ignore it and set the superusers later?</p>\n\n<p>My basic bash script looks something like this </p>\n\n<pre><code>    #!/bin/bash\n\n    set -eux\n\n    #==================================================#\n    # These should be just the server requirements only \n    # !! Exception being scipy for now. pip install not \n    # working\n    #==================================================#\n\n    apt-get install -y python postgresql-9.1 apache2 python-setuptools postgresql-server-dev-9.1 postgresql-9.1-postgis postgis python-scipy binutils libproj-dev gdal-bin git\n\n    #==================================================#\n    # setup the posgis template for postgresql\n    #==================================================#\n    GEOGRAPHY=0\n    POSTGIS_SQL=postgis.sql\n\n    BLAH BLAH !!!\n    Lots of database set up code here\n\n   #==================================================#\n   # Setup the python environment\n   #==================================================#\n   easy_install virtualenv\n   easy_install virtualenvwrapper\n   easy_install pip\n\n   #==================================================#\n   # Pull the catami code from git and install \n   #==================================================#\n\n   mkdir -p /home/catami\n   mkdir -p /home/catami/catamiportal\n   cd /home/catami/catamiportal\n   git clone https://github.com/catami/catami.git\n   cd catami\n\n   pip install -r requirements.txt\n\n   python manage.py syncdb\n\n   manage.py runserver 0.0.0.0:8000\n</code></pre>\n\n<p>I am getting grief from installing django from the requirements file.</p>\n"},{"tags":["mysql","django","pagination"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13244023,"title":"How to paginate by date with Django?","body":"<p>I looked up how to use the Django's built-in pagination and it doesn't look very scalable for certain cases. In my case, I am climbing a log table so what I wanted to do was something like this:</p>\n\n<pre><code>Page 1:\nSELECT ... FROM log WHERE date &gt; '2012-11-04 00:00:00' LIMIT 10;\nPage 2:\nSELECT ... FROM log WHERE date &gt; '#LAST_VALUE_FROM_PAGE_1' LIMIT 10;\nPage 3:\nSELECT ... FROM log WHERE date &gt; '#LAST_VALUE_FROM_PAGE_2' LIMIT 10;\n...\n</code></pre>\n\n<p>In other words, I want to climb an index instead of grabbing the entire result-set and iterating on that. Assuming date is indexed, this should keep things really efficient while still producing mostly the same results since I'm always ordering by date anyway.</p>\n\n<p>What I was curious about was if this has already been done and a modular way, much like how Django's built-in pagination methods worked or if I'll need to go it alone and write my own method?</p>\n"},{"tags":["django","django-forms","django-queryset"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":702,"score":0,"question_id":2270008,"title":"Django Newbie - With a multiple fields form, how do I eliminate empty fields within the queryset","body":"<p>I'm a Django newbie, so please forgive me if this is a stupid question. I have a search form that has multiple fields on it. I only wish to filter my queryset by those fields submitted that aren't empty. How do I do that? I'm aware you can chain querysets and Q objects together, but I don't know how to eliminate empty key/value pairs from the chain. I know the following doesn't work, but I thought it might provide insight into what I'm looking for. Thank you.</p>\n\n<pre><code>def art_search(request):\n    if request.method == 'GET':\n        form = AdvSearch(request.GET)\n        if form.is_valid():\n            art_name = form.cleaned_data['art_name']\n            art_number = form.cleaned_data['art_number']\n            artwork = Inventory.objects.filter(\n                if art_name is not u'':\n                    Q(marketingname=art_name),\n                if art_number is not u'':\n                    Q(marketingnumber=art_number)\n            )\n            return object_list(request, queryset=artwork)\n    else:\n        form = AdvSearch()\n    return render_to_response('art/search.html', {\n        'form': form,\n    })\n</code></pre>\n"},{"tags":["python","django","slug"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13243625,"title":"Generate slug field data for existing entries in database","body":"<p>I'm using Django 1.4 with South for migrations. I just added a slug field to one of my models and did a migration. The slug field is automatically populated for all new objects and works perfectly. </p>\n\n<p>I'm wondering, is there any way to force Django to create the slug field entries for all my existing data from before the migration...</p>\n\n<p>*edit \nI'm populating my slug field with this line in admin.py</p>\n\n<p>prepopulated_fields = {\"slug\": (\"name\",\"price\")}</p>\n"},{"tags":["python","django","query"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":24,"score":2,"question_id":13243575,"title":"Curious about how django achieves the ORM query optimization","body":"<p>I am no python expert and I am curious about how django optimize the following query</p>\n\n<pre><code>Model.objects.filter(field = 'abc')[0]\n</code></pre>\n\n<p>Somehow django will intelligently add '<code>limit 1</code>' to SQL query like '<code>select * from model where field = 'abc' limit 1</code>'</p>\n"},{"tags":["django","templates","if-statement","block","conditional-statements"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13243454,"title":"Django template if statement always evaluates to true","body":"<p>This seems like it should be pretty straightforward, but for some reason I am unable to solve this problem. I'm using Django 1.4. I am trying to do a basic check to see if a <strike>list</strike> QuerySet is empty or not during template rendering, but the if statement I'm using seems always to evaluate to true.</p>\n\n<p>I have a Django template that reads:</p>\n\n<pre><code>{% extends 'includes/base.html' %}\n\n{% if object_list %}\n...\n{% block data %}\n   {% for object in object_list %}\n     ...\n     {{ object.create_date }}\n     ...\n   {% endfor %}\n{% endblock data %}\n...\n{% endif %}\n</code></pre>\n\n<p>'base.html' has the block:</p>\n\n<pre><code>&lt;body&gt;\n{% block content %}\n  ...   \n  &lt;div class=\"row-fluid\"&gt;\n    &lt;div class=\"span12\"&gt;\n      {% block data %}\n      &lt;div align=\"center\"&gt;&lt;i&gt;No data.&lt;/i&gt;&lt;/div&gt;\n      {% endblock data %}\n    &lt;/div&gt;&lt;!-- span12 --&gt;\n  &lt;/div&gt;&lt;!-- row --&gt;\n{% endblock content %}\n...\n&lt;/body&gt;\n</code></pre>\n\n<p>The view function generating the QuerySet is here:</p>\n\n<pre><code>def barcode_track(request, model):\n    query = request.GET.get('barcode_search', '')\n    object_list = model.objects.all()\n    if query:\n        object_list = model.objects.filter(barcode__icontains=query)\n    return render_to_response('barcode_track/barcode_list.html',\n                              {'object_list': object_list, 'query': query},\n                              context_instance=RequestContext(request))\n</code></pre>\n\n<p>Which is called via this form:</p>\n\n<pre><code>&lt;form id=\"barcode_search_form\" method=\"get\" action=\"\" class=\"form\"&gt;\n    &lt;input type=\"text\" name=\"barcode_search\" value=\"{{ query }}\" /&gt;\n    &lt;button type=\"submit\" class=\"btn\"&gt;Search&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>And the urls.py line:</p>\n\n<pre><code>urlpatterns = patterns('barcode_track.views',\n                       url(r'^$', 'barcode_track', {'model': Barcode},\n                           name=\"barcode_track\"),)\n</code></pre>\n\n<p>The idea is that results will only be presented if they exist in <code>object_list</code>, and otherwise the parent block will remain unaltered. I have tried changing the name of <code>object_list</code>, and I have printed <code>{{ dicts }}</code> to the page to ensure that <code>object_list</code> is, in fact, empty (which it is). I am not using a generic view, although I realize that the name suggests as much. I have actually had this trouble in a different app I wrote using similar logic, so I must be doing something systematically incorrectly.</p>\n\n<p>What am I missing here?</p>\n"},{"tags":["django","selenium"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13243267,"title":"Django and Selenium Web testing error: [Errno 10054]","body":"<p>I'm running some basic functional web test with the Selenium web driver and I'm noticing this error in two of my functional web test cases. The test cases all pass at the end but I get this in the console:</p>\n\n<pre><code>Exception happened during processing of request from ('127.0.0.1', 1169)\n    data = self._sock.recv(self._rbufsize)\nerror: [Errno 10054] An existing connection was forcibly closed by the remote host\nTraceback (most recent call last):\n  File \"C:\\dev\\django-projects\\barbwire\\venv\\lib\\site-packages\\django\\test\\testcases.py\", line 981, in _handle_request_noblock\n    self.process_request(request, client_address)\n  File \"C:\\Python27\\Lib\\SocketServer.py\", line 310, in process_request\n    self.finish_request(request, client_address)\n  File \"C:\\Python27\\Lib\\SocketServer.py\", line 323, in finish_request\n    self.RequestHandlerClass(request, client_address, self)\n  File \"C:\\dev\\django-projects\\barbwire\\venv\\lib\\site-packages\\django\\core\\servers\\basehttp.py\", line 139, in __init__\n    super(WSGIRequestHandler, self).__init__(*args, **kwargs)\n  File \"C:\\Python27\\Lib\\SocketServer.py\", line 638, in __init__\n    self.handle()\n  File \"C:\\Python27\\Lib\\wsgiref\\simple_server.py\", line 116, in handle\n    self.raw_requestline = self.rfile.readline()\n  File \"C:\\Python27\\Lib\\socket.py\", line 447, in readline\n    data = self._sock.recv(self._rbufsize)\nerror: [Errno 10054] An existing connection was forcibly closed by the remote host\nTraceback (most recent call last):\n  File \"C:\\dev\\django-projects\\barbwire\\venv\\lib\\site-packages\\django\\test\\testcases.py\", line 981, in _handle_request_noblock\n    self.process_request(request, client_address)\n  File \"C:\\Python27\\Lib\\SocketServer.py\", line 310, in process_request\n    self.finish_request(request, client_address)\n  File \"C:\\Python27\\Lib\\SocketServer.py\", line 323, in finish_request\n    self.RequestHandlerClass(request, client_address, self)\n  File \"C:\\dev\\django-projects\\barbwire\\venv\\lib\\site-packages\\django\\core\\servers\\basehttp.py\", line 139, in __init__\n    super(WSGIRequestHandler, self).__init__(*args, **kwargs)\n  File \"C:\\Python27\\Lib\\SocketServer.py\", line 638, in __init__\n    self.handle()\n  File \"C:\\Python27\\Lib\\wsgiref\\simple_server.py\", line 116, in handle\n    self.raw_requestline = self.rfile.readline()\n  File \"C:\\Python27\\Lib\\socket.py\", line 447, in readline\n    data = self._sock.recv(self._rbufsize)\nerror: [Errno 10054] An existing connection was forcibly closed by the remote host\n----------------------------------------\n----------------------------------------\nException happened during processing of request from ('127.0.0.1', 1170)\n----------------------------------------\nDestroying test database for alias 'default'...\n</code></pre>\n\n<p>Here's an example of one of the test cases:</p>\n\n<pre><code>def test_can_join_main_site(self):\n    self.browser.get(self.live_server_url)\n    self.browser.find_element_by_link_text('Register').click()\n    time.sleep(5)\n    self.browser.find_element_by_name('submit').click()\n    time.sleep(5)\n</code></pre>\n\n<p>It runs to completion but dumps the above exception. The idea is to test a simple registration page. After clicking the submit button the page re-displays and prompts the user to fill out additional form fields. As expected and everything appears to work correctly but why the errors? Am I missing something?</p>\n"},{"tags":["django","osx","osx-snow-leopard","virtualenvwrapper","initializing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13242933,"title":"initializing virtualenvwrapper on Mac (10.6.8) for Django","body":"<p>I want to use Django and create virtual environments. I don't quite understand the initializing steps documentation on the virtualenvwrapper website. I've installed virtualenvwrapper in  /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages. I've already installed XCode, Homebrew and Posgres as well. </p>\n\n<p>The documentation tells me to:</p>\n\n<blockquote>\n  <p>$ export WORKON_HOME=~/Envs</p>\n  \n  <p>$ mkdir -p $WORKON_HOME</p>\n  \n  <p>$ source /usr/local/bin/virtualenvwrapper.sh</p>\n  \n  <p>$ mkvirtualenv env1`</p>\n</blockquote>\n\n<p>I'm especially confused about the first line. Is it telling me that I need to <strong>create</strong> a project folder named 'WORKON_HOME' and export it into another folder called 'Envs'? (I've searched for both folders on my mac but didn't find them). And then in the second line I make another directory 'WORKON_HOME'?\nIf you have suggestions or links to better explanations/tutorials, I would greatly appreciate it. Thanks. </p>\n"},{"tags":["django","django-forms"],"answer_count":2,"favorite_count":5,"up_vote_count":8,"down_vote_count":0,"view_count":842,"score":8,"question_id":2566291,"title":"Writing custom Django form fields and widgets","body":"<p>Django has very good documentation that describes how to write custom database fields and custom template tags and filters.  I cannot find the document that describes how to write custom form fields and widgets.  Does this document exist?</p>\n\n<p>The way I've been able to write custom form fields and widgets is by reading the Django source code and imitating what I see there.  I know that there are still things about implementing fields and widgets that I do not completely understand because I have not read any high level document that describes their interfaces.</p>\n"},{"tags":["django","redirect"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":410,"score":1,"question_id":8931040,"title":"Django redirect with kwarg","body":"<p>I am new to python and django and i have a question regarding the redirect function.</p>\n\n<p>This is a reduced version of my views.py file.</p>\n\n<pre><code>def page_index(request, error_message=''):\n    print error_message\n\ndef add_page(request):\n    return redirect('page_index') # this work fine\n    return redirect('page_index', error_message='test') # this does not work\n</code></pre>\n\n<p>And here is a short version of my urls.py</p>\n\n<pre><code>urlpatterns = patterns(\n    'x.views',\n    url(r'^$', 'page_index', {'error_message': 't'}, name='page_index'),\n    url(r'^add/$', 'add_page', name='add_page'),\n)\n</code></pre>\n\n<p>When i try redirecting to page_index without the keyword argument everything works fine, but when i use the kwag i get the following error message:</p>\n\n<blockquote>\n  <p>NoReverseMatch at /pages/add/</p>\n  \n  <p>Reverse for 'page_index' with arguments '()' and keyword arguments '{'error_message': 'test'}' not found.</p>\n</blockquote>\n\n<p>What am i doing wrong?</p>\n"},{"tags":["django","testing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13242112,"title":"What exactly is the difference between client and client.Client in a Django TestCase?","body":"<p>My understanding from reading the docs runs something like this:</p>\n\n<ol>\n<li>client is a subclass of TestCase. When we run <code>manage.py test</code>, an instance of our SimpleTest class (which inherits from TestCase) is created for each method that starts 'test_'. This is <code>self</code>.</li>\n<li>Client is a subclass of client. We can create new Client instances and sometimes it's helpful to do so.</li>\n<li>Yet somehow, when we type <code>self.client</code>, what we are referring to is a particular Client that was instantiated when the TestCase was created, and <strong>not</strong> the client class one layer below TestCase. </li>\n</ol>\n\n<p>Is this correct? If so, how is this the case - something to do with Superclasses?</p>\n"},{"tags":["django"],"answer_count":3,"favorite_count":1,"up_vote_count":11,"down_vote_count":0,"view_count":3116,"score":11,"question_id":4881607,"title":"Django: Get model from string?","body":"<p>I Django, you can specify relationships like:</p>\n\n<pre><code>author = ForeignKey('Person')\n</code></pre>\n\n<p>And then internally it has to convert the string \"Person\" into the model <code>Person</code>. </p>\n\n<p>Where's the function that does this? I want to use it, but I can't find it.</p>\n"},{"tags":["python","html","django","newline"],"answer_count":4,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":53,"score":7,"question_id":13241375,"title":"How to read back and print text with newlines from a Python (Django) string with HTML?","body":"<p>If someone types in a phrase, such as:</p>\n\n<pre><code>I see you driving\n\nround town with the girl I love,\n\nand I’m like: haiku.\n</code></pre>\n\n<p>(no blank lines between each line, but the text is written on three separate lines) into a text box on a web page, and then presses a button which is then stored in a database via <code>Django</code>, and that string is read back and printed on a page, how can I get it to print on an HTML page with the newlines still in the text? </p>\n\n<p>So instead of it being printed back as:\n<code>I see you driving round town with the girl I love, and I’m like: haiku.</code></p>\n\n<p>It would print as:</p>\n\n<pre><code>I see you driving\n\nround town with the girl I love,\n\nand I’m like: haiku.\n</code></pre>\n\n<p>I know that if I use: <code>(textarea)soAndSo.body(/textarea)</code>, this preserves the newlines that were in the file when the user typed it up originally. How can I get this same effect, but without having to use <code>textarea</code> boxes?</p>\n"},{"tags":["database","django","amazon-web-services","rds"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13241712,"title":"amazon rds django recreate database","body":"<p>i've made some changes in the model.py and i would like to have them reflected to the db.</p>\n\n<p>As far as i understood, <code>syncdb</code> actually does not recreate the db but only updates it. </p>\n\n<p>since i modified a field from <code>integer</code> to <code>biginteger</code> the syncdb doesn't change the database structure.</p>\n\n<p>how can i have my database updated?</p>\n\n<p>locally i remove the sqllite file and it's recreated.\nnow, i don't know what to do since i can't remove the db. Yet, i can delete the db but by doing this the EB machine stop working.</p>\n\n<p>thanks</p>\n"},{"tags":["django","django-views","django-template-tags"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13241278,"title":"Calling a templatetag from a view -- CSRF not gtting populated","body":"<p>I am using inclusion_tags to generate portions of my pages that repeat in many different places across my site.</p>\n\n<p>templatetags/tags.py</p>\n\n<pre><code>@register.inclusion_tag('chunk_template.html')\ndef output_chunk(object, edit):\n    ... # Lots of set up work here that I don't want to duplicate in the view\n    return { ... }\n</code></pre>\n\n<p>Upon AJAX submit of a form on the page, I need to refresh the very same HTML outputted by output_chunk().  To avoid completely rewriting output_chunk() in a view, <a href=\"http://stackoverflow.com/questions/5068272/django-template-tags-in-views\">I did the following as recommended in this answer about how to use templatetags in views</a>:</p>\n\n<p>views.py</p>\n\n<pre><code>def chunk(request, ...):\n    context = Context({..., 'request': request })\n    template_string = \"\"\"\n      {% load output_chunk from tags %}\n      {% output_chunk ... %}\n    \"\"\"\n    t = Template(template_string)\n    return HttpResponse(t.render(context))\n</code></pre>\n\n<p>This is all working fine, except chunk_template.html calls <code>{% csrf %}</code>, which works when I call the template tag the standard way, but not when I call in this somewhat hacky way (to avoid writing the same code twice).</p>\n\n<p>(For simpler template tags, this works fine when I call <code>return render (request, template_name, context)</code> from within the view.)</p>\n\n<p>So, is there a better way to call the template tag from within the view to get all the middleware invoked properly?  Or is there something I can add to this hack to make it work properly?</p>\n"},{"tags":["python","django","mod-wsgi","tornado"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13238780,"title":"concurrent connections in tornado","body":"<p>I have a server running on tornado. I have a page that opens a <code>websocket</code> to the same server. Now I have observed that opening multiple instances of this page makes all of them wait except one. Only after that one has finished its websocket, does another one start. Is this normal tornado behaviour of I'm doing something wrong? </p>\n\n<p>Earlier my server was running with <code>django</code> but I migrated to <code>tornado</code> for the websocket support. For that I use fallback server as django. </p>\n\n<pre><code>#!/usr/bin/env python\n\n# Run this with\n# PYTHONPATH=. DJANGO_SETTINGS_MODULE=testsite.settings testsite/tornado_main.py\n# Serves by default at\n# http://localhost:8080/hello-tornado and\n# http://localhost:8080/hello-django\n\nfrom tornado.options import options, define, parse_command_line\nimport django.core.handlers.wsgi\nimport tornado.httpserver\nimport tornado.ioloop\nimport tornado.web\nimport tornado.wsgi\n\ndefine('port', type=int, default=8000)\n\nclass HelloHandler(tornado.web.RequestHandler):\n  def get(self):\n    self.write('Hello from tornado')\n\ndef main():\n  wsgi_app = tornado.wsgi.WSGIContainer(\n    django.core.handlers.wsgi.WSGIHandler())\n  tornado_app = tornado.web.Application(\n    [\n      ('/hello-tornado', HelloHandler),\n      ('.*', tornado.web.FallbackHandler, dict(fallback=wsgi_app)),\n      ])\n  server = tornado.httpserver.HTTPServer(tornado_app)\n  server.listen(options.port)\n  tornado.ioloop.IOLoop.instance().start()\n\nif __name__ == '__main__':\n  main()\n</code></pre>\n\n<p>Can I do something that can allow me to make multiple connections?</p>\n"},{"tags":["python","django","apache","mod-wsgi"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13236766,"title":"Django mod-wsgi multiple instances of One Class object","body":"<p>I am currently using a DJango - apache installation (on mod_wsgi) to run a website (project) which hosts an intranet cards game, whose rules are complicated enogh that it requires only 1 master list+dict data structure of scores for each user. Individual user's score can be impacted by other users actions also. I am using a Score class which I instantiate in urls.py and all players / users access this class' object [scObj = Scorer('Spades') ]. internally in this obj there are Dicts of players actions, score updates etc etc. </p>\n\n<pre><code>    class Scorer:\n        def __init__(self, suitname):\n            self.__suitname = suitname\n</code></pre>\n\n<p>The scorer class is separately stored in Scorer.py </p>\n\n<pre><code>    scObjs = (Scorer('Spades'), Scorer('Hearts'), Scorer('Clubs'), Scorer('Diamonds'),)\n</code></pre>\n\n<p>The objects are created in urls.py</p>\n\n<p>This model was running perfectly in the DEV deployement. When I moved to PROD in apache, this broke (as in there are multiple instances of scObj being created, so a score update from player-1's move on player-2 is not reflected in a different move by player-3 on player-2) . I need to simulate a singleton class behaviour / global scObj behaviour, which I am not able to do. I am running apache in worker - mpm - multithreaded mode, so I assume that the problem of multiple copies of scObj being there due to multi-process is not there.</p>\n\n<p>Is the problem related to mod_wsgi?</p>\n"},{"tags":["django","geoip"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13232502,"title":"Django GeoIP get country by city name","body":"<p>I'm using GeoIP for geo location with django and it works fine - locates city, country etc. But what i want is to locate the country name if is searched the city name. Example:</p>\n\n<hr>\n\n<p>Search: Madrid</p>\n\n<p>Found country: Spain</p>\n\n<hr>\n\n<p>Search: Paris</p>\n\n<p>Found country: France</p>\n\n<hr>\n\n<p>Is this possible with GeoIP and if it is, how?</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","django","api","models"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13240991,"title":"Query Set for Models Retrieved from External API","body":"<p>I am currently developing a web app that uses the Amazon Product API to get information on books. I use a Book model that contains only the ASIN amazon identification code that looks a bit like this:</p>\n\n<pre><code>class Book(models.Model):\n    asin = models.CharField(max_length-10, unique=True)\n    def retrieve(self, **kwargs):\n        kwargs['ItemId'] = self.asin\n        self.xml = amazon_lookup(**kwargs) # returns BeautifulSoup\n    @property\n    def title(self):\n        try:\n            return self.xml.ItemAttriibutes.Author.text\n        except AttributeError: # happens when xml has not been populated\n            return None\n    ...\n\n\nclass BookManager(models.Manager):\n    def retrieve(self, **kwargs):\n        kwargs['SearchIndex'] = 'Books'\n        book_search = amazon_search(**kwargs)\n        books = []\n        for item in book_search:\n            book = self.get_or_create(asin=item.ASIN.text)[0]\n            book.xml = item\n            books.append(book)\n        return books\n</code></pre>\n\n<p>And then I can call it with</p>\n\n<pre><code>b = Book.objects.retrieve(Keywords=\"foo bar\")\nb.retrieve(ResponseGroup=\"Images,ItemAttributes,...\")\nt = b.title\n</code></pre>\n\n<p><strong>This works well enough for tests, but I want a more robust system for future use.</strong></p>\n\n<p>What I'd really like to do is be able to perform searches with query sets so that frequently accessed results can be cached. As it stands, every request for a book detail view creates a new amazon API call.  My job would be a lot easier if all the API calls were handled inside Query Sets alongside database calls.  Unfortunately, I've found the Django Query Set documentation pretty cryptic and lacking when it comes to customization.  This surely isn't a rare use case.  </p>\n\n<p><strong>Can anyone provide the idiomatic way of handling a problem like this, or a good resource on the subject?</strong></p>\n"},{"tags":["django","caching"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":400,"score":3,"question_id":7257953,"title":"Clear Django cache for certain app or page","body":"<p>Is there any possibility to clear cache for certain app in django or for certain page?\nI've tried to find it but in vain.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["django","django-forms","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13240032,"title":"Restrict user to use a specific domain to sign up : django","body":"<p>I'm a Django newbie.</p>\n\n<p>I'd like to restrict user to use a specific domain (e.g. @gmail.com ) to sign up my Django website, but how to customize the EmailField in my registration form to do that? </p>\n\n<p>FYI, here's my codes.</p>\n\n<p>forms.py</p>\n\n<pre><code>class RegistrationForm(ModelForm):\n    username = forms.CharField(label=(u'User Name'))\n    email = forms.EmailField(label = (u'Email Adress'))\n\n\n    class Meta:\n        model = UserProfile\n        exclude = ('user',)\n</code></pre>\n\n<p>register.html</p>\n\n<pre><code>{% extends \"base.html\" %}\n{% block content %}\n&lt;form action = \"\" method =\"post\"&gt;\n{% csrf_token%}\n{% if form.errors %}  &lt;p&gt;Please correct the following fields&lt;/p&gt; {% endif %}\n&lt;div class  =\"register_div\"&gt;\n    {% if form.username.errors %}&lt;p class=\"error\"&gt;{{ form.username.errors }}&lt;/p&gt;{% endif %}\n    &lt;p&gt;&lt;label for=\"username\"{% if form.username.errors %} class=\"error\"{% endif %}&gt;Username:&lt;/label&gt;&lt;/p&gt;\n    &lt;p&gt;{{ form.username }}&lt;/p&gt;\n&lt;/div&gt;\n&lt;div class  =\"register_div\"&gt;\n    {% if form.email.errors %}&lt;p class = \"error\"&gt;{{ form.email.errors }}&lt;/p&gt;{% endif %}\n     &lt;p&gt;&lt;label for =\"email\"{% if form.email.errors %} class=\"error\"{% endif %}&gt;Email:&lt;label&gt;&lt;p&gt;\n    &lt;p&gt;{{ form.email }}&lt;/p&gt;\n&lt;/div&gt;\n\n&lt;p&gt;&lt;input type=\"submit\" alt=\"register\" /&gt;&lt;/p&gt;\n&lt;/form&gt;\n{% endblock %}\n</code></pre>\n"},{"tags":["django","postgresql","psycopg2","django-postgresql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12904471,"title":"Point manage.py to a specific PostegreSQL schema","body":"<p>How can I tell manage.py to operate in a specific PostgreSQL schema?</p>\n\n<p>My database is separated into multiple schema, one per client/deployment, to keep data separate. </p>\n\n<p>However, it seems that Django does not really support schemas very well. How can I generate my models, etc for a specific schema with manage.py?</p>\n"},{"tags":["django","memcached"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13240045,"title":"django memcahed key generation","body":"<p>Default django cache keys generator:</p>\n\n<pre><code>def make_key(key, key_prefix, version):\n    return ':'.join([key_prefix, str(version), key])\n</code></pre>\n\n<p>I want to change with:</p>\n\n<p>in settings.py</p>\n\n<pre><code>def make_key(key, key_prefix, version):\n    return key\n\nCACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',\n        'LOCATION': '127.0.0.1:11211',\n        'KEY_FUNCTION' : 'settings.make_key',\n        }\n}\n</code></pre>\n\n<p>but django generate keys with old native function (prefix-version-key) how to change it?</p>\n"},{"tags":["django","nginx","memcached"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13238320,"title":"nginx can't fetch keys from memcahed","body":"<p>The problem is that nginx don't fetch memcached keys which are presents in memcached, this happens every time i requests link. </p>\n\n<p>the memcached logs:</p>\n\n<p>Nginx request with key \"site-/links\" to memcached faild: (but key data in memcached)</p>\n\n<pre><code>&lt;31 new auto-negotiating client connection\n31: Client using the ascii protocol\n&lt;31 get site-/links                  ### NO DATA SEND! but it in cache\n&gt;31 END\n&lt;31 connection closed.\n</code></pre>\n\n<p>Django requests with key \"site-/links\" fetch data with success</p>\n\n<pre><code>&lt;31 get :1:mkey\n&gt;31 sending key :1:mkeys 0 4\nmval\n\n(dp1\n.\n\n&gt;31 END\n&lt;31 get :1:site-/links\n&gt;31 sending key :1:site-/links         ###data send!\n&gt;31 END\n&lt;31 set :1:site-/links 0 300 5518\n&gt;31 STORED\n&lt;31 set :1:mkey 0 300 4\n&gt;31 STORED\n&lt;31 connection closed.\n</code></pre>\n\n<p>my nginx cfg for memcached:</p>\n\n<pre><code>location / {\ndefault_type  \"text/html; charset=utf-8\";\nset $memcached_key site-$uri;\n    memcached_pass 127.0.0.1:11211;\n    error_page     404 502 = @django;\n\n}\n\nlocation @django {\n    include uwsgi_params;\n    uwsgi_pass unix:///var/tmp/site.sock;\n}\n</code></pre>\n\n<p>django middlware:</p>\n\n<pre><code>class NginxMemCacheMiddleWare(object):\n    def process_response(self, request, response):\n        cacheIt = True\n        theUrl = request.get_full_path()\n\n        # if it's a GET then store it in the cache:\n        if request.method != 'GET':\n            cacheIt = False\n\n        # loop on our CACHE_INGORE_REGEXPS and ignore\n        # certain urls.\n        for exp in settings.CACHE_IGNORE_REGEXPS:\n            if re.match(exp,theUrl):\n                cacheIt = False\n\n        if cacheIt:\n            key = '%s-%s' % (settings.CACHE_KEY_PREFIX,theUrl)\n            #key = theUrl\n            print \"CACHE!\"\n            print key\n\n            print \"MKEY:\",cache.get(\"mkey\")\n            print cache.get(key)\n            cache.set(key,response.content)\n            cache.set(\"mkey\",\"mval\")\n\n        return response\n</code></pre>\n\n<p>So why nginx can't fetch data with the key which in memcached and always goes to django uwsgi?</p>\n"},{"tags":["django","django-models","django-forms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13239976,"title":"Override a ModelForm field value set using ModelForm(instance=some_instance)","body":"<p>I have the following models—</p>\n\n<pre><code>class Book(Model):\n title = CharField(max_length=100)\n author = ForeignKey('Author')\n\nclass Author(models.Model):\n name = CharField(max_length=100)\n</code></pre>\n\n<p>And have a standard <code>ModelForm</code> to <code>Book</code>.</p>\n\n<p>In the form, <code>author</code> is a <code>ModelChoiceField</code>, and is rendered as a <code>&lt;select&gt;</code>. I'd like it to be text field where you can input the author's name—<code>Author.name</code>.</p>\n\n<p>If there's already an author with that name, the saved model uses that in its foreign key, otherwise an author with that name is created (and used in its foreign key)—in effect, <code>Author.get_or_create(name=posted_name_value)</code>.</p>\n\n<p>I've found that the simplest way is to override the field as a <code>CharField</code>, like so—</p>\n\n<pre><code>class BookForm(ModelForm):\n\n author = CharField()\n\n class Meta:\n  model = Book\n</code></pre>\n\n<p>Although with that I can add custom <code>clean</code> logic that does what I want, I can't do the same with the pre-populated value when using <code>BookForm(instance=some_book_object)</code>—the <code>CharField</code> gets set to the <code>Author</code>'s <code>pk</code>, not its name.</p>\n\n<p>I've tried to do this but I can't seem to find out how. I've tried overriding things in <code>BookForm.__init__</code> to no avail.</p>\n\n<p><strong>How can I override a fields' value set when using <code>instance</code> with a <code>ModelForm</code>?</strong></p>\n"},{"tags":["django","django-models","django-admin","django-south"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13230035,"title":"Unexpected values in Django admin dropdown when using multiple foreign keys","body":"<p>Below is my <code>models.py</code>. The problem is that in admin panel the <code>User</code> column in the <code>Ingredience</code> model points to <code>Ingredience Category</code> values instead of <code>User</code> values.</p>\n\n<p>In the <code>Ingredience</code> model I have <strong>2 foreign keys</strong>. I'm not sure if this is the problem.</p>\n\n<p><strong>Screenshot from admin panel:</strong></p>\n\n<p><img src=\"http://i.stack.imgur.com/E7faw.gif\" alt=\"enter image description here\"></p>\n\n<p><strong>Models.py:</strong></p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\n\nclass IngredienceCategory(models.Model):\n    name = models.CharField(max_length=30)\n    user = models.ForeignKey(User, null=True, blank=True)\n\n    class Meta:\n        verbose_name_plural = \"Ingredience Categories\"\n\n    def __unicode__(self):\n        return self.name\n\n\nclass Ingredience(models.Model):\n    name = models.CharField(max_length=30)\n    category = models.ForeignKey(IngredienceCategory, null=True, blank=True)\n    user = models.ForeignKey(User, null=True, blank=True)\n\n    class Meta:\n         verbose_name_plural = \"Ingredients\"\n\n    def __unicode__(self):\n        return self.name\n\n\nclass Food(models.Model):\n    name = models.CharField(max_length=30)\n    ingredients = models.ManyToManyField(Ingredience)\n    html_id = models.CharField(max_length=30, null=True, blank=True)\n    user = models.ForeignKey(User, null=True, blank=True)\n\n    class Meta:\n        verbose_name_plural = \"Foods\"\n\n    def __unicode__(self):\n        return self.name\n</code></pre>\n\n<p>Any ideas what's the problem here? Here are the steps I've taken before this problem occured:</p>\n\n<ul>\n<li>I added <code>user</code> column to all 3 models and ran the south migration</li>\n<li>After that I manually inserted values to the user column in all 3 tables</li>\n<li>Models <code>IngredienceCategory</code> and <code>Food</code> work fine (i.e. displaying list of users in the <code>User</code> dropdown list</li>\n<li>Here is the SQL: <a href=\"http://pastebin.com/3mHpXA3F\" rel=\"nofollow\">http://pastebin.com/3mHpXA3F</a></li>\n</ul>\n\n<p><strong>EDIT:</strong>\nSomething to add (might be helpful for solving this issue): I noticed that clicking on the plus sign (+) next to the User column in the Ingredience Model in the admin panel, a pop-up form to add new user is displayed, which is correct.</p>\n\n<p><strong>EDIT 2:</strong>\nRelevant part of admin.py file:</p>\n\n<pre><code>class IngredienceAdmin(admin.ModelAdmin):\n    search_fields = ('name',)\n    list_filter = ('category',)\n    ordering = ('name',)\n\n#    def formfield_for_foreignkey(self, db_field, request, **kwargs):\n#        #if db_field.name == 'ingrediencecategory':\n#        kwargs['queryset'] = IngredienceCategory.objects.order_by('name')\n#        return super(IngredienceAdmin, self).formfield_for_foreignkey(db_field, request, **kwargs)\n\n    def formfield_for_foreignkey(self, db_field, request, **kwargs):\n        if db_field.name == 'ingrediencecategory':\n            kwargs['queryset'] = IngredienceCategory.objects.order_by('name')\n            return super(IngredienceAdmin, self).formfield_for_foreignkey(db_field, request, **kwargs)\n\n        if db_field.name == 'user':\n            kwargs['queryset'] = User.objects.order_by('name')\n            return super(IngredienceAdmin, self).formfield_for_foreignkey(db_field, request, **kwargs)\n</code></pre>\n"},{"tags":["django","django-views","django-middleware"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":180,"score":0,"question_id":12174040,"title":"Forbidden (403) CSRF verification failed. Request aborted","body":"<p>I am making an app of login form but when I am running my app and click on login button the following error will occur </p>\n\n<p><strong>Forbidden (403)\nCSRF verification failed. Request aborted.</strong></p>\n\n<p>the code of view.py is as:</p>\n\n<pre><code>from django.template import  loader\nfrom django.shortcuts import render_to_response\nfrom registration.models import Registration\nfrom django.http import HttpResponse\nfrom django.template import RequestContext\nfrom django.shortcuts import redirect\n\n\ndef view_login(request,registration_id):\n   t = loader.get_template('registration/login.html') \n   try:\n         registration=Registration.objects.get(pk=registration_id)\n   except Registration.DoesNotExist:\n         return render_to_response(\"login.html\",{\"registration_id\":registration_id})\n\ndef home(request,registration_id):\n    if request.method == \"POST\":\n      username = request.POST.get('user_name')\n      password = request.POST.get('password')\n      user = authenticate(username=username, password=password)\n      if user is not None:\n        if user.is_active:\n          login(request, user)\n        # success\n          return render('registration/main_page.html',{'registration_id':registration_id},context_instance=RequestContext(user))\n        else:\n         #user was not active\n           return redirect('q/',context_instance=RequestContext(user))\n      else:\n        # not a valid user\n           return redirect('q/',context_instance=RequestContext(user))\n    else:\n       # URL was accessed directly\n           return redirect('q/',context_instance=RequestContext(user))\n</code></pre>\n"},{"tags":["django","django-models","django-authentication","django-registration"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13238945,"title":"Django save abuser profile object when user registered","body":"<p>Hi I have a custom<code>UserProfile</code> model which I will be using for storing user data specific to my app:</p>\n\n<pre><code>from django.contrib.auth.models import User\n\nclass UserProfile(models.Model):\n    user = models.OneToOneField(User)\n    ...\n\n    def __unicode__(self):\n        return self.user.username\n</code></pre>\n\n<p>I am using <code>django-registration</code> to resister and login users. </p>\n\n<p>My question is - what is the best way to auto-save a <code>UserProfile</code> object when an <code>auth.User</code> is  saved? I can assume that all custom fields on the <code>UserProfile</code> model can be saved as null and updated later.</p>\n\n<p>Any help much appreciated.</p>\n"},{"tags":["python","django","multithreading","multiprocessing","multiprocess"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13239087,"title":"Django Multiprocessing oddity","body":"<p>In using ./manage.py shell to exercise some code, I've come across something I don't understand.</p>\n\n<pre><code>Python 2.6.6 (r266:84292, Sep 11 2012, 08:34:23)\n[GCC 4.4.6 20120305 (Red Hat 4.4.6-4)] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n(InteractiveConsole)\n&gt;&gt;&gt; from multiprocessing import Process\n&gt;&gt;&gt; from django.core.management import call_command\n&gt;&gt;&gt; p = Process(target=call_command(\"processphoto\", 1000))\nSuccessfully populated photo \"1000\"  (This is output from my processphoto command)\n&gt;&gt;&gt;\n</code></pre>\n\n<p>I never get the opportunity to do a <code>p.start()</code> or set any other variables on the process.  It appears to execute on instantation.  When I try to use the code in my view, I don't appear to get multiple processes spawning at all, everything remains on the one core.</p>\n\n<p>What am I doing wrong, or misunderstanding?  I want to generate separate <code>manage.py processphoto</code> commands in separate processes to fully utilize the multi-core server.</p>\n"},{"tags":["javascript","jquery","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13238973,"title":"Popup form in Django (Jquery)","body":"<p>I know it's a very basic question, but I didn't find a simple explanation on how to do it. </p>\n\n<p>I'm developing my app with Django and what I wan't is to create a popup in wich I can put a form so the user can authenticates. I just have no idea on how to do that. I know I have to use Jquery for that but that's it.</p>\n\n<p>I'm just looking for hints or for good tutorials.</p>\n\n<p>Thank you for your help.</p>\n"},{"tags":["django","search","solr","django-haystack"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13236343,"title":"Implementing search with Haystack and Solr issues","body":"<p>I'm trying to implement search to my django based website.</p>\n\n<p>While following the <a href=\"http://django-haystack.readthedocs.org/en/v1.2.7/tutorial.html\" rel=\"nofollow\">tutorial</a> I found this:</p>\n\n<blockquote>\n  <p>If you’re using the Solr backend, you have an extra step. Solr’s\n  configuration is XML-based, so you’ll need to manually regenerate the\n  schema. You should <code>run ./manage.py build_solr_schema</code> first, drop the\n  XML output in your Solr’s schema.xml file and restart your Solr\n  server.</p>\n</blockquote>\n\n<p><strong>First</strong>, I don't know where to put my schema.xml, after some resarch I figured I'd create a folder inside my project to put it: <code>myprojectname/solr/schema.xml</code>. Is that right?</p>\n\n<p><strong>Second</strong>, how do I restart Solr?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I downloaded Solr,unzipped it and I put the schema.xml generated inside <code>example/solr/conf</code> </p>\n\n<p>then I start solr <code>java -jar start.jar</code></p>\n\n<p>but when I try to build the index :\n   <code>./manage.py rebuild_index</code></p>\n\n<p>I get :</p>\n\n<pre><code>WARNING: This will irreparably remove EVERYTHING from your search index.\nYour choices after this are to restore from backups or rebuild via the `rebuild_index` command.\nAre you sure you wish to continue? [y/N] y\n\nRemoving all documents from your index because you said so.\nAll documents removed.\nIndexing 1 News.\nFailed to add documents to Solr: [Reason: None]\n&lt;response&gt;&lt;lst name=\"responseHeader\"&gt;&lt;int name=\"status\"&gt;400&lt;/int&gt;&lt;int    name=\"QTime\"&gt;4&lt;/int&gt;&lt;/lst&gt;&lt;lst name=\"error\"&gt;&lt;str name=\"msg\"&gt;ERROR: [doc=news.news.2]   unknown field 'django_id'&lt;/str&gt;&lt;int name=\"code\"&gt;400&lt;/int&gt;&lt;/lst&gt;&lt;/response&gt;\nIndexing 1 entries.\n\nFailed to add documents to Solr: [Reason: None]\n&lt;response&gt;&lt;lst name=\"responseHeader\"&gt;&lt;int name=\"status\"&gt;400&lt;/int&gt;&lt;int name=\"QTime\"&gt;17&lt;/int&gt;&lt;/lst&gt;&lt;lst name=\"error\"&gt;&lt;str name=\"msg\"&gt;ERROR: [doc=zinnia.entry.2] unknown field 'django_id'&lt;/str&gt;&lt;int name=\"code\"&gt;400&lt;/int&gt;&lt;/lst&gt;&lt;/response&gt;\n</code></pre>\n\n<p>I verified my schema.xml ,and I do have :</p>\n\n<pre><code>&lt;field name=\"django_ct\" type=\"string\" indexed=\"true\" stored=\"true\" multiValued=\"false\" /&gt;\n&lt;field name=\"django_id\" type=\"string\" indexed=\"true\" stored=\"true\" multiValued=\"false\" /&gt;\n</code></pre>\n\n<p><sub>\n<strong>P.S.</strong>\nI'm using Django 1.2 and Haystack 1.2.7\n</sub></p>\n"},{"tags":["django","django-templates","python-2.7","django-views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13237074,"title":"Calculating an average from survey input in a django template","body":"<p>I'm trying to display survey results on a django template page.  I wan't to be able to show the average based on specific demographics and the rating given to each category.  I already save the survey response data as in integer in the survey form view that I have.  This is what I have so far for the rest:</p>\n\n<pre><code>#views.py\ndef statistics(request):\n    male = Survey.objects.filter(gender='male')\n    ...\n    #Other demographics filtered\n    ...\n\n    def avgcalc(myDemographic, myCategory):\n        ratings = []\n\n        for x in myDemographic:\n            ratings.append(myCategory)\n\n        intTotal = 0\n        intCount = 0\n        intLenMyList = len(myDemographic)\n\n        while(intCount &lt;  intLenMyList):\n            intTotal += ratings[intCount]\n            intCount += 1\n\n        return intTotal/intLenMyList\n...\n#rest of view rendering template, etc.\n</code></pre>\n\n<p>Now is where I run into the problem.  How can I easily display the data for each category based on the demographic? For instance, in my template I would like to do</p>\n\n<pre><code>#template.html\nDemographic: Male\nTotal responses for this demographic: {{ male|length }}\nAverage response for specific category: {{ avgcalc(male, category) }}\n</code></pre>\n\n<p>{{ male|length }} works fine to display the number of male respondents, However, in the templates, I cannot use {{ avgcalc(male, category) }}.  In reality, I have a table set up already, and there are about 20 demographics with a dozen category ratings, so if possible, I would like to avoid having to put each one in my view (i.e. male_category_calc = avgcalc(male, category) for each demographic and category.  Is this even possible, or do I need to do it the extremely long way?  I am okay with having to type each one into my template, as long as it works.  Thanks for any help or advice.</p>\n"},{"tags":["database","django","config"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13225403,"title":"django database_options for specific database in settings","body":"<p>Just wondering if I can only apply <a href=\"https://docs.djangoproject.com/en/1.1/ref/databases/\" rel=\"nofollow\">database_options</a> to a specific database if multiple databases are defined in settings? And how???</p>\n\n<p>eg. I have defined the databases like this:</p>\n\n<pre><code>DATABASES = {\n  'default': {...},\n  'db2': {...}\n}\n</code></pre>\n\n<p>the ultimate goal is to set the connection timeout value for db2 database without affecting default database</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13237060,"title":"in python error while importing GeoIP on CentOs server","body":"<p>I am using Django, and when I am using the geoip package or importing GeoIP I am getting the following error on centos, while it is working well on ubuntu 12.04.</p>\n\n<p>The error is as follows</p>\n\n<pre><code> from django.contrib.gis.utils.geoip import GeoIP\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/lib/python2.6/site-packages/django/contrib/gis/utils/geoip.py\", line 67, in &lt;module&gt;\n    'Try setting GEOIP_LIBRARY_PATH in your settings.' % lib_name)\ndjango.contrib.gis.utils.geoip.GeoIPException: Could not find the GeoIP library (tried \"GeoIP\"). Try setting GEOIP_LIBRARY_PATH in your settings.\n</code></pre>\n\n<p>please try to help me out, I can't go further without this.</p>\n"},{"tags":["django","forms"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":35,"score":3,"question_id":13237192,"title":"Form errors doesnt work. Django","body":"<p>I read <a href=\"https://docs.djangoproject.com/en/1.4/topics/forms/\" rel=\"nofollow\">this</a> and have the bug in code - I can send \"null\" by the form and there is no error message, its just go to 'thanks' page. I can write 'nothing' to the email field, and result will be the same. How to fix it?</p>\n\n<p><strong>models:</strong></p>\n\n<pre><code>class Contact(forms.Form):\n    title = forms.CharField(max_length=100)\n    message = forms.CharField(max_length=255)\n    sender = forms.EmailField()\n</code></pre>\n\n<p><strong>views:</strong></p>\n\n<pre><code>def contact(request):\n    if request.method == 'POST': \n        form = Contact(request.POST) \n        if form.is_valid(): \n            title = form.cleaned_data['title']\n            message = form.cleaned_data['message']\n            sender = form.cleaned_data['sender']\n            return HttpResponseRedirect('/thanks/') \n    else:\n        form = Contact()\n    return render(request, 'contact.html', {'form': form,})\n</code></pre>\n\n<p><strong>template:</strong></p>\n\n<pre><code>&lt;form action=\"/contact/\" method=\"post\"&gt;\n{% csrf_token %}\n\n\n    {{ form.non_field_errors }}\n\n        {{ form.title.errors }}\n        &lt;label for=\"id_subject\"&gt;Subject&lt;/label&gt;\n        {{ form.title }}\n\n\n        {{ form.message.errors }}\n        &lt;label for=\"id_message\"&gt;Text&lt;/label&gt;\n        {{ form.message }}\n\n\n          {{ form.sender.errors }}\n        &lt;label for=\"id_sender\"&gt;Email&lt;/label&gt;\n        {{ form.sender }}\n\n\n    &lt;p&gt;&lt;input type=\"submit\" value=\"Send\" /&gt;&lt;/p&gt;\n&lt;/form&gt;\n</code></pre>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13232494,"title":"Add an element to a queryset","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1058135/django-convert-a-list-back-to-a-queryset\">django - convert a list back to a queryset</a>  </p>\n</blockquote>\n\n\n\n<p>I try to add an element to an empty query_set I created. Here is what I did:</p>\n\n<pre><code>      query_set=User.objects.none()\n      for user in list:\n          query_set=query_set | user\n</code></pre>\n\n<p>where \"list\" is a list of users.</p>\n\n<p>I get this error message: 'User' object has no attribute '_clone'</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13236417,"title":"Keep the id of an object after a redirection. Django","body":"<p>In order to pass a function with arguments inside one of my template, I used a hidden input that redirects to a view where the function is (the function is used to delete a user the user is \"following\"). This view then redirects to the previous page thanks to a HttpResponseRedirect(reverse('myview', args=[a number])).</p>\n\n<p>The thing is that the page I redirect to needs an argument (a number). And I would like the user to be redirected to the exact page where he was.</p>\n\n<p>Here is my template:</p>\n\n<pre><code>    &lt;form method=\"post\" action=\"{% url projet.views.remove_relationship %}\"&gt;\n    {% csrf_token %}\n    &lt;input type=\"hidden\" name=\"remove_relationship\" value=\"{{ user.id }}\"&gt;\n    &lt;input type=\"submit\" value=\"delete\" /&gt;\n</code></pre>\n\n<p>And the view:</p>\n\n<pre><code>   def remove_relationship(request):\n      user = request.user\n      if request.method == 'POST':\n        user_id = request.POST['remove_relationship']\n        user_id= int(user_id)\n        user_name = User.objects.get(id=user_id)\n        user.userprofile.remove_relationship(person=user_name.userprofile, status=1)\n     return HttpResponseRedirect(reverse('myoriginalview', args=[A NUMBER]))\n</code></pre>\n\n<p>The page where the user comes from is like: www.mysite/myoriginalview/ANUMBER. I want to redirect him to this exact page</p>\n\n<p>In the original view, the number corresponds to an object id. (match.id). </p>\n\n<p>So what I wan't to do is getting the match.id of my original view, pass it in my view remove_relationship in order to use it in \"args=[match.id]\".</p>\n\n<p>So how do I get this ID from my original view and pass it into my new view?</p>\n\n<p>Here is what I tried:</p>\n\n<p>in my models.py:</p>\n\n<pre><code>@models.permalink\ndef get_absolute_url_remove_relationship(self):\n    return ('remove_relationship', (), {'dub_id': self.id})\n</code></pre>\n\n<p>use it in my template:</p>\n\n<pre><code>&lt;form method=\"post\" action=\"{{get_absolute_url_remove_relationship}}\"&gt;\n    {% csrf_token %}\n    &lt;input type=\"hidden\" name=\"remove_relationship\" value=\"{{ user.id }}\"&gt;\n    &lt;input type=\"submit\" value=\"delete\" /&gt;\n</code></pre>\n\n<p>In my view:</p>\n\n<pre><code>def remove_relationship(request, match_id=None):\nmatch_id= int(match_id)\nuser = request.user\nif request.method == 'POST':\n    user_id = request.POST['remove_relationship']\n    user_id= int(user_id)\n    user_name = User.objects.get(id=user_id)\n    user.userprofile.remove_relationship(person=user_name.userprofile, status=1)\n\nreturn HttpResponseRedirect(reverse('terrain', args=[match_id]))\n</code></pre>\n\n<p>And I do the necessary modifications in my url.py</p>\n\n<p>So when the user clicks on the button \"delete\" to delete a user he is following, the redirection works well, but the user is not deleted. It looks like the function is not used anymore, while when I used {%url projet.views.remove_relationship %}, the user was deleted, but there was no redirection.</p>\n\n<p>Any help would be very welcome.</p>\n\n<p>PS: The question comes after an other question I asked before (http://stackoverflow.com/questions/13233794/function-with-arguments-in-a-template-django). I opened a new topic in order to be clearer.</p>\n"},{"tags":["python","html","django","html5","twitter-bootstrap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13168606,"title":"Passing value to Bootstrap modal in Django","body":"<p>I have a nice modal showing a delete confirmation dialog each time user wants to delete data. The problem is many of my views render a list of elements in the template, and each element has its detail as well as a tiny delete red button. Of course in django the view passes a list of elements to the template, for example a list of clients, and they are rendered in a table like the following:</p>\n\n<pre><code>&lt;table class=\"table table-striped\"&gt;  \n    &lt;thead&gt;  \n      &lt;tr&gt;\n        &lt;th&gt;Email&lt;/th&gt;\n      &lt;/tr&gt;  \n    &lt;/thead&gt;  \n    &lt;tbody&gt;\n      {% for client in clientes %}\n        &lt;tr&gt;  \n          &lt;td&gt;{{ client.email }}&lt;/td&gt;\n          &lt;td&gt;\n            &lt;div class=\"btn-group\"&gt;\n              &lt;!-- Delete button --&gt;\n              &lt;a href=\"#myModal\" class=\"btn btn-danger btn-mini\" title=\"Eliminar\"&gt;\n                &lt;i class=\"icon-trash icon-white\"&gt;&lt;/i&gt;&lt;/a&gt;\n            &lt;/div&gt;\n          &lt;/td&gt;\n        &lt;/tr&gt; \n      {% endfor %}\n    &lt;/tbody&gt;  \n</code></pre>\n\n<p> </p>\n\n<p>I would like to have a Bootstrap modal every time user presses on the delete-button to appear and confirm he is deleting some data. Now, I have managed to make the modal appear and delete the user, but not the correct user, modal somehow its only getting, or trying to delete the first user in the list. You can check my entire template with modal in the following link: <a href=\"http://pastie.org/5145275\" rel=\"nofollow\">FULL HTML</a></p>\n\n<p>In the end, my problem is somehow related to passing the correct {{ client }} to the modal and not the first one on the list of clients, I'm supposing that happens because of the first declared modal on the for and then does not declare it anymore.</p>\n\n<p>For example, I got 3 clients in the table:</p>\n\n<pre><code>client1@something.com         detele-button\nclient2@something.com         detele-button\nclient3@something.com         detele-button\n</code></pre>\n\n<p>No matter what client delete-button I press, it always shows the modal with client1 data, and actually erases it if press confirm delete.</p>\n\n<p>Thank you.</p>\n\n<p>edit1: href was not ok.</p>\n"},{"tags":["django","search","solr","django-haystack","haystack"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13058770,"title":"Django Haystack: error trying to build solr schema","body":"<p>I'm getting the following error when attempting to run <code>./manage.py build_solr_schema</code></p>\n\n<pre><code>NotImplementedError: Subclasses must provide a way to build their schema.\n</code></pre>\n\n<p>Here are what my two search indexes look like:</p>\n\n<pre><code>class BookSearchIndex (SearchIndex):\n    text = CharField(document=True, use_template=True)\n    title = CharField(model_attr='title_web', boost=1.125)\n\n    def index_queryset(self):\n        return Book.objects.active().filter(publish_level='published')\n\nsite.register(Book, BookSearchIndex)\n\n\nclass AuthorSearchIndex (SearchIndex):\n    text = CharField(document=True, use_template=True)\n    name = CharField(model_attr='name_display', boost=1.5)\n\n    def index_queryset(self):\n        return Author.objects.approved()\n\n    def prepare(self, obj):\n        data = super(AuthorSearchIndex, self).prepare(obj)\n        data['boost'] = 1.5\n        return data\n\nsite.register(Author, AuthorSearchIndex)\n</code></pre>\n\n<p>I'm running this locally and using the simple backend.  I was able to run <code>build_solr_schema</code> after creating the authors index.  But then when I setup the books index and tried to run it again I got the error mentioned.</p>\n\n<p>Django 1.4.2,\nHaystack 1.2.7</p>\n\n<p>Any ideas?</p>\n"},{"tags":["django","cron"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13235991,"title":"Django_cron doesn't work","body":"<p>In my django app I want to use django cron (Tvix) to schedule a task. It does not work. I followed the documentation step by step to install it. This my cron job:</p>\n\n<pre><code>from django_cron import CronJobBase, Schedule\nfrom app_main.tasks import task_update\n\nclass cron_update(CronJobBase):\n    RUN_AT_TIMES = ['16:00']\n    schedule = Schedule(run_at_times=RUN_AT_TIMES)\n\n    code = 'django_cron.cron_update'\n\n    def do(self):\n        task_update  \n</code></pre>\n\n<p>this is the problem:</p>\n\n<ul>\n<li>If I use the development environment in the admin I see the cron log table. If I use the production enviroment I don't see it.</li>\n<li>I use this command: \"python manage.py runcrons\" bat the cron job doesn't start ad RUN_A_TIMES. Why?\nPlease help me. Thanks. </li>\n</ul>\n"},{"tags":["python","django","django-models","django-admin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":13234023,"title":"How to save many to many field?","body":"<p>I want to count tags . I have Post model and tags model and post model has manytomany field to tags. When I want to add new post meanwhile I add tags for post , it has to increase tag count number.</p>\n\n<p>My Post and Tags model:</p>\n\n<pre><code>class Post(models.Model):\n\n    tags = models.ManyToManyField(Tag,blank=True,null=True,verbose_name=_('tags'))\n\n    def save(self)\n       super(Post, self).save()\n       for i in self.tags.all():\n       i.save() \n\nclass Tag(models.Model):\n\n    name=models.CharField(max_length=30,verbose_name=_('name'))\n    count = models.IntegerField(blank=True,null=True,default=0)\n    slug = models.SlugField(blank=True,null=True)\n\n    def save(self):\n       self.slug = slugify(self.name.upper())\n       self.count = Post.objects.filter(tags__name=self.name).count()\n       super(Tag, self).save()\n</code></pre>\n\n<p>When I added new post , I look up the tag model and see count number does not change but when I press the save button in Tags Admin then I see the real count. But I want to see real count when I look up the tag admin without pressing the save button in tag.</p>\n\n<p>Also I want that when I edit the post it should not increase the tags count again.</p>\n"},{"tags":["django","django-models","django-database"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13232065,"title":"Unable to get repr for <class 'django.db.models.query.QuerySet'>","body":"<p>Debug show me that:</p>\n\n<pre><code>comments = Comment.get_for_intention(id)\n</code></pre>\n\n<p>is:</p>\n\n<blockquote>\n  <p>{QuerySet} Unable to get repr for class 'django.db.models.query.QuerySet'</p>\n</blockquote>\n\n<p>Comment model:</p>\n\n<pre><code>class Comment(models.Model):\n    user = models.ForeignKey(User)\n    intention = models.ForeignKey(Intention)\n    text = models.TextField()\n    created = models.DateTimeField(default=datetime.datetime.now())\n\n    @staticmethod\n    def get_for_intention(intention_id):\n        return Comment.objects.filter(intention=intention_id)[:10]\n</code></pre>\n\n<p>I have no idea what I am doing wrong. Could someone give me any advice?</p>\n"},{"tags":["django","security"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":7714979,"title":"How to avoid sensitive information in POSTs from appearing in logs and debug emails?","body":"<p>One of my websites has a form for customers to submit their credit card information.</p>\n\n<p>Under normal operation the sensitive information (credit card number, expiration date, etc) is fairly secured due to the SSL of the connection and the fact that the data may not be saved on the backend after the charging attempt.</p>\n\n<p>The problem starts whenever an exception is raised by the backend code handling the request, since the exception details (which with Django include the POST QueryDict) contain the sensitive info in plain text. These in turn find their way into both the error logs and into emails which are sent to the admins.</p>\n\n<p>Is there some elegant way to avoid this?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":39,"score":3,"question_id":13233794,"title":"Function with arguments in a template. Django","body":"<p>In my template, I display a list of users a user follows. I would like the user to be able to delete one of the users he follows thanks to a button.\nI have a function remove_relationship that deletes a relationship.</p>\n\n<p>Here is the function in my models.py: </p>\n\n<pre><code>  class UserProfile(models.Model):\n  (...)\n\n      def remove_relationship(self, person):\n        Relationship.objects.filter(\n            from_person=self, \n            to_person=person).delete()\n        return\n</code></pre>\n\n<p>I would like to pass this function into my template:</p>\n\n<pre><code>   {% for user in following % }\n   &lt;form method=\"post\"&gt;\n    {% csrf_token %}\n   &lt;input type=\"submit\" value=\"delete\" onclick=\"remove_relationship\"/&gt;\n   &lt;/form&gt;\n   {%endfor%}\n</code></pre>\n\n<p>The thing is that I can't pass argument in my template. So how can I do so that each button deletes the relationship with the right user?</p>\n\n<p>I saw an other question on this topic, abut it looks like it doesn't solve my problem (http://stackoverflow.com/questions/1333189/django-template-system-calling-a-function-inside-a-model) </p>\n\n<p>Thank you for your help.</p>\n"},{"tags":["django","tinymce"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":21,"score":2,"question_id":13232538,"title":"Django and tinymcs: getting list of image files using external_image_list_url","body":"<p>I am trying to get external_image_list_url to work with tinymcs and Django. My understanding is that the user will be able to see a list of his or her images when clicking on the image icon (the one with the tree). From here an image can be selected and inserted. </p>\n\n<p>Am I right that it is the icon with the tree? It's the one called \"image\". The one called \"insertimage\" doesn't work at all - the icon is not displayed. It and insertfile are the only ones that aren't displayed. I'm Ok with that unless I need it for this list functionality.</p>\n\n<p>First I am trying just to get any image to appear in a list. I have done the following:</p>\n\n<p>Created myexternallist.js and placed it where I keep my other JS files. I can access these other files via src = \"/media/js/filename.js\" because of my django settings. But is this also what I should put for: </p>\n\n<pre><code>tinyMCE.init({\n    external_image_list_url : \"/media/js/myexternallist.js\",\n    ... })\n</code></pre>\n\n<p>In this file it says:</p>\n\n<pre><code>var tinyMCEImageList = new Array([\"Logo 1\", \"/media/js/photo.jpg\"],);\n</code></pre>\n\n<p>photo.jpg is in the same folder as myexternallist.js</p>\n\n<p>I have also tried just \"photo.jpg\" and various other combinations. Not sure if my issue has to do with my relative paths or something else altogether. I'm not sure what an absolute path should be. Right now I'm working on localhost, but won't always be.</p>\n"},{"tags":["javascript","html","django","cakephp","mustache"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":468,"score":2,"question_id":9285358,"title":"Mustache template library?","body":"<p>What are some use cases for mustache? </p>\n\n<p>I just discovered it today but I can't seem to understand how is it different from just creating regular template files in your framework (cakePHP, django, etc..) or just having an html + php file.</p>\n"},{"tags":["django","model","diagram","erd"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":1559,"score":6,"question_id":6776592,"title":"Django - Model graphic representation (ERD)","body":"<p>I'm searching a way to represent my Django project model graphically.</p>\n\n<p>Is there some application that does this kind of <a href=\"http://en.wikipedia.org/wiki/Entity-relationship_model\" rel=\"nofollow\">ERD</a> (diagram) ?</p>\n\n<hr>\n\n<p>Update following <a href=\"http://stackoverflow.com/a/6777376/305189\">@Etienne</a> instructions</p>\n\n<p>Here is an example of how I finally view the PDF representing some models of my django project</p>\n\n<pre><code>$ python manage.py graph_models app1 app2 ... | dot -Tpdf | evince\n</code></pre>\n\n<ul>\n<li>It actually generates the dot data with my applications (app1, app2, ...)</li>\n<li>Passes the result to <code>dot</code> to output into PDF format</li>\n<li>Opens the output with <code>evince</code></li>\n</ul>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13232111,"title":"Get a query_set from an other query_set. Django","body":"<p>In my django app I have a model \"Match\", linked to my model \"User\" with a foreign key. I also have a function that gives me a query_set of \"live_matches\" (matches that are currently played).</p>\n\n<p>What I try to have is a query_set with all the users of the \"live_matches\".</p>\n\n<p>Here is my models.py:</p>\n\n<pre><code>class LiveMatchManager(models.Manager):\n    def get_query_set(self):\n        now = timezone.localtime(timezone.now())\n        queryset = super(LiveMatchManager, self).get_query_set()\n        return queryset.filter(match__date_start__lte=now, match__date_end__gte=now)\n\nclass Match(models.Model):\n    user = models.ForeignKey(User)\n    date_start = models.DateTimeField()\n    date_end = models.DateTimeField()\n\n# Managers\nobjects = models.Manager()\nlive_matches = LiveMatchManager()\n</code></pre>\n\n<p>What I would like to have is a function that gives me a query_set of the users that are linked to a \"live_match\", and I don't find how to do that.</p>\n\n<p>Thank you for your help.</p>\n"},{"tags":["django","loops","for-loop","django-templates","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13232320,"title":"Nested loop in Django template","body":"<p>I can't get my head around this. I need to somehow access the object in the parent loop but I'm not sure how. Here is what I've come up with so far. I marked the problematic area in the code with <strong>XXX</strong>:</p>\n\n<p><strong>Template:</strong></p>\n\n<pre><code>{% for item in ingrcat %}\n    &lt;h2&gt;{{ item.name }}&lt;/h2&gt;\n    &lt;ul&gt;\n        {% for ingr in XXX %}\n        &lt;li&gt;&lt;a href=\"#\" id=\"i{{ ingr.id }}\"&gt;{{ ingr.name }}&lt;/a&gt;&lt;/li&gt;\n        {% endfor %}\n    &lt;/ul&gt;\n{% endfor %}\n</code></pre>\n\n<p><strong>XXX</strong> - should be a list of ingredients belonging to the ingredience category which is currently being looped through in the parent loop.</p>\n\n<p><strong>View:</strong></p>\n\n<pre><code>def home(request):\n    if request.user.is_authenticated():\n        username = request.user.username\n        email = request.user.email\n        foods = Food.objects.filter(user=request.user).order_by('name')\n        ingredients = Ingredience.objects.filter(user=request.user).order_by('name')\n        ingrcat = IngredienceCategory.objects.filter(user=request.user)\n\n        context = {}\n        for i in ingredients:\n            context[i.category.name.lower()] = context.get(i.category.name.lower(), []) + [i]\n\n        newcontext = {'foods': foods, 'ingredients': ingredients, 'ingrcat': ingrcat, 'username': username, 'email': email,}\n    else:\n        context = {}\n        newcontext = {}\n\n    context = dict(context.items() + newcontext.items())\n\n    return render_to_response('home.html', context, context_instance=RequestContext(request))\n</code></pre>\n\n<p><strong>Models:</strong></p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\n\nclass IngredienceCategory(models.Model):\n    name = models.CharField(max_length=30)\n    user = models.ForeignKey(User, null=True, blank=True)\n\n    class Meta:\n        verbose_name_plural = \"Ingredience Categories\"\n\n    def __unicode__(self):\n        return self.name\n\n\nclass Ingredience(models.Model):\n    name = models.CharField(max_length=30)\n    category = models.ForeignKey(IngredienceCategory, null=True, blank=True)\n    user = models.ForeignKey(User, null=True, blank=True)\n\n    class Meta:\n         verbose_name_plural = \"Ingredients\"\n\n    def __unicode__(self):\n        return self.name\n\n\nclass Food(models.Model):\n    name = models.CharField(max_length=30)\n    ingredients = models.ManyToManyField(Ingredience)\n    html_id = models.CharField(max_length=30, null=True, blank=True)\n    user = models.ForeignKey(User, null=True, blank=True)\n\n    class Meta:\n        verbose_name_plural = \"Foods\"\n\n    def __unicode__(self):\n        return self.name\n</code></pre>\n"},{"tags":["django","pil","reportlab","pisa"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":12900037,"title":"Using Images in pdfs","body":"<p>Iam trying to render a pdf from a html ( with context). I am following the code given <a href=\"http://stackoverflow.com/questions/1377446/html-to-pdf-for-a-django-site\">here</a>.\nI am getting an image from another form in the basae 64 encoded format. Something like this</p>\n\n<pre><code>datauri = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=='\n</code></pre>\n\n<p>Now I am sending this datauri to the template using a context and in my template I am using this</p>\n\n<pre><code>&lt;img src=\"{{ datauri}}\"&gt;\n</code></pre>\n\n<p>to render the image. I use the context and html file as input to the render_to_pdf method mentioned in the link above.\nBut I am getting the following error</p>\n\n<pre><code>'NoneType' object has no attribute 'bands'\nException Location:     /usr/lib64/python2.6/site-packages/PIL/Image.py in split, line 1497\n</code></pre>\n\n<p>And the error location in views.py file is</p>\n\n<pre><code>    pdf = pisa.pisaDocument(StringIO.StringIO(html.encode(\"ISO-8859-1\")), result)\n</code></pre>\n\n<p>Any idea on why this is happening and a way to overcome this?\nThanks!</p>\n"},{"tags":["django","settings"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":891,"score":1,"question_id":5735543,"title":"Django filebrowser settings","body":"<p>Hopefully this will be an easy one for anyone with any Django experience.\nI'm trying to get to grips with this framework and Python in general and have downloaded the filebrowser app.</p>\n\n<p>It allows me to create folders OK, however it is unable to locate its css.</p>\n\n<p>While looking at a page, I get the following in the console:</p>\n\n<pre><code>[20/Apr/2011 14:05:10] \"GET /admin/ HTTP/1.1\" 200 11282\n[20/Apr/2011 14:05:12] \"GET /admin/filebrowser/browse/ HTTP/1.1\" 200 14747\n[20/Apr/2011 14:05:12] \"GET /media/filebrowser/css/filebrowser.css HTTP/1.1\" 404 2324\n</code></pre>\n\n<p>The third line appears in yellow as Django is unable to locate the css file.</p>\n\n<p>Presumably I'm just missing / have an incorrect line in my settings.py file, but I'm not sure what I need to change.</p>\n\n<p>Can anyone help?</p>\n\n<p>These are the relavant (I think) lines from my settings:</p>\n\n<pre><code>import os\nSITE_ROOT = os.path.realpath(os.path.dirname(__file__)`)\nMEDIA_ROOT = os.path.join(SITE_ROOT, 'media/uploads/')\nMEDIA_URL = '/media/'\nFILEBROWSER_DIRECTORY = ''\nSTATIC_ROOT = os.path.join(SITE_ROOT, 'media/') \nSTATIC_URL = '/static/'\nADMIN_MEDIA_PREFIX = STATIC_URL + \"grappelli/\"\n</code></pre>\n\n<p>Any advice appreciated and apologies if this seems a little basic, I'm only just getting to grips with this really.</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","django","python-sphinx"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13231997,"title":"sphinx autodoc - added project path but still getting error 'module not found' . using default python path","body":"<p>I added my project path to conf.py like this : </p>\n\n<pre><code>  sys.path.insert(0, \"path\")\n</code></pre>\n\n<p>I think it is using the project path correctly as i am getting error if i had entered anything else in the above command </p>\n\n<p>Problem is , it is using the default python present. The python i am using is present in my virtual env, so I tried giving the path /venv/bin/python, venv/ to the path like the above command , still referring to the same old default python .</p>\n"},{"tags":["python","django","uml"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":833,"score":2,"question_id":3676476,"title":"Is there an app to create UML from django models?","body":"<p>I am looking for a way to generate UML diagrams from a Django application <code>Model</code> structure.</p>\n\n<p>Epydoc doesn't work with Django models because it needs django's settings.py to be imported and <code>manage.py   graph_models</code> generates unreadable output, not easily parsable and hard to convert to UML.</p>\n\n<p>Is there any tool avaialble to do that?</p>\n"},{"tags":["jquery","django"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13230613,"title":"Detecting multiple instances of a session","body":"<p>I'm building an application that serves as a web-based file editor. Users can select a file they want to edit, then that file is retrieved from the server and shown in a field. The user can then edit the file, and eventually save it. </p>\n\n<p>This introduces a race-condition I'm trying to solve. </p>\n\n<p>The client-side file is not always in sync with the server-side file. When a user opens a file that has already been opened and edited in another place, saving will overwrite any edits done by the other client. While this could be fixed using some form of merging, this is quite a bit outside the scope of this project.</p>\n\n<p>When a user logs in on two different pc's or from two different browsers, and tries to open the same file twice, this can be detected using the session key. However, when a user opens a second tab, the session key will be identical. </p>\n\n<p>Currently I periodically ping the file (say, every 2 seconds) and check if the previous ping is about 2 seconds ago. if it is less than that (minus some value accounting for lag) there <em>might</em> be two clients watching that file. This however breaks if a user quickly switches between a file and back, and is just plain ugly.</p>\n\n<p>Is there a better, cleaner way of doing this?</p>\n\n<p>I'm using a Django backend, and a frontend that relies heavily on jQuery, so any functionality based on these two would have my preference.</p>\n\n<p>Some relevant code is shown below:</p>\n\n<p>From the client-side, periodically dinging the file server-side:</p>\n\n<pre><code>setInterval(function(){\n    opened = $('input[name=file]:checked', '#files').val();\n    if(opened){\n        $.post('./' + opened + '/ding').error(function(){\n            alert('Something is awry.');\n        });\n    }\n}, 2000);\n</code></pre>\n\n<p>From the server-side, handling these dings:</p>\n\n<pre><code>def ding(request, user_id, project_id, file_id):\n    user = User.objects.get(pk=user_id)\n    project = Project.objects.get(pk=project_id)\n    file = File.objects.get(pk=file_id)\n\n    session_key = request.session.session_key\n\n    can_claim = file.last_seen_open == None or timezone.now() - file.last_seen_open &gt; datetime.timedelta(seconds=4)\n    is_mine = file.last_opened_by == session_key\n    is_iffy = file.last_seen_open != None and timezone.now() - file.last_seen_open &lt; datetime.timedelta(seconds=1)\n\n    if is_iffy:\n        return HttpResponse(status=409, content=\"File is iffy\")\n    if can_claim or is_mine:\n        file.last_opened_by = session_key\n        file.last_seen_open = timezone.now()\n        file.save()\n        return HttpResponse(status=200, content=\"File ding'd\")\n    else:\n        return HttpResponse(status=409, content=\"File claimed by someone else\")\n</code></pre>\n\n<p>The response \"409: File is iffy\" is returned if it seems that the file is opened twice on the same key</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":5369225,"title":"What does \"children__\" mean in Django? Where is it documented?","body":"<p>I am trying to parse this Django code (without any familiarity with Django, I might add)</p>\n\n<pre><code>Question.objects.filter(children__marked=True)\n</code></pre>\n\n<p>I know the model contains a table called \"forum_node\" with one of the column named \"marked\". From what I understand, this statement fetches all the questions where any of its children (= answers) are accepted (or \"marked\"). How does this magic work?</p>\n"}]}
{"total":41213,"page":4,"pagesize":100,"questions":[{"tags":["django","entity-attribute-value"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13230036,"title":"Django EAV ,attribute creation","body":"<p>In my Django models,I have something like this:</p>\n\n<pre><code>eav.register(Contact)\nAttribute.objects.create(slug=\"profile_requested\",name=\"Profile requested\")\n</code></pre>\n\n<p>but when I run the server,I get:\n{'<strong>all</strong>': [u'Attribute with this Site and Slug already exists.']}</p>\n\n<p>Seems I am registering the Attribute more than once.\nMy goal is to use the Attributes in multiple locations  a,ong different apps in the same project which are all using the same Model that has been registered with eav.My question is where do I but the attribute creation so that I can go on to use it in my applications?</p>\n"},{"tags":["iphone","django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13230018,"title":"How to send ICS file to iPhone","body":"<p>I have created service side function in Django which returns an ICS file:</p>\n\n<pre><code>    path = os.path.join(ics_dir_path, ics_name)\nif not os.path.exists(path):\n    return HttpResponseNotFound('&lt;h1&gt;ICS file not found&lt;/h1&gt;')\ntry:\n    ics_content = file(path, \"rb\").read()\n    response = HttpResponse(ics_content, content_type=\"text/calendar; charset=ascii\")\n    response['Content-Disposition'] = str.format('attachment; filename=\"{0}\"', ics_name)\n    response['Accept-Ranges'] = 'bytes'\n    response['Content-Length'] = os.stat(path).st_size\nexcept:\n    return HttpResponseServerError('&lt;h1&gt;Error in ICS file&lt;/h1&gt;')\nreturn response\n</code></pre>\n\n<p>ICS file has following content:</p>\n\n<pre><code>BEGIN:VCALENDAR\nVERSION:2.0\nBEGIN:VEVENT\nSUMMARY:This is title\nDTSTART;VALUE=DATE-TIME:20121010T020600\nDTEND;VALUE=DATE-TIME:20121015T020900\nDTSTAMP;VALUE=DATE-TIME:20121019T080543Z\nEND:VEVENT\nEND:VCALENDAR\n</code></pre>\n\n<p>I have also created iPhone app that uses this url for getting ICS file. \nFor some reason, when I call url within my iPhone app, it doesn't add event to my iPhone calendar. When I call url through my Mac's Safari, it adds it without any problem.</p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["python","django","django-timezone"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13225890,"title":"Django default=timezone.now() saves records using \"old\" time","body":"<p>This issue has been occurring on and off for a few weeks now, and its unlike any that has come up with my project. </p>\n\n<p>So two of the models that are used have a timestamp field, which is on default set to <code>timezone.now()</code>. </p>\n\n<p>So here is the sequence that raises error flags:</p>\n\n<pre><code>Model one is created at time 7:30 PM\nModel two is created at time 10:00 PM, but in the \n   MySQL database it's stored as 7:30 PM! Despite having default=timezone.now()\n\nNow ... Every model that is created in a mystery time (I didn't record), will\nhave it's time stamp saved under 7:30 PM, not the actual time, UNTILL a certain\nduration passes, then a new time will be set and all the following models will\nhave that new time... Bizzare\n</code></pre>\n\n<p>Some extra details which may help in discovering the issue:</p>\n\n<p>I have a bunch of methods that I use to strip my timezones of their <code>tzinfo</code>'s and replace them with UTC. </p>\n\n<p>This is because I'm doing a <code>timezone.now()</code> - creationTime calculation to create a: \"model was posted this long ago\" feature\nin the project. However, this really should not be the cause of the problem.</p>\n\n<p>I don't think using <code>datetime.datetime.now()</code> will make any differences either.</p>\n\n<p>Anyways, thanks for the help!</p>\n"},{"tags":["django","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13223633,"title":"Override existing Django Template Tags","body":"<p>Is it possible to override an existing Django Template Tag or is it necessary to customize the template file and create a new Template Tag?</p>\n"},{"tags":["python","django","facebook-graph-api"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13228847,"title":"Resolve FB GraphAPI picture call to the final URL","body":"<p>I'm developing an application that displays a users/friends photos. For the most part I can pull photos from the album, however for user/album cover photos, all that is given is the object ID for which the following URL provides the image:</p>\n\n<p><code>https://graph.facebook.com/1015146931380136/picture?access_token=ABCDEFG&amp;type=picture</code></p>\n\n<p>Which when viewed redirects the user to the image file itself such as:</p>\n\n<p><code>https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash4/420455_1015146931380136_78924167_s.jpg</code></p>\n\n<p>My question is, is there a Pythonic or GraphAPI method to resolve the final image path an avoid sending the Access Token to the end user?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":4,"up_vote_count":5,"down_vote_count":0,"view_count":20,"score":5,"question_id":13229235,"title":"Django admin page Removing 'Group'","body":"<p>How do I delete the model groups admin page? I want to show that by default, the group model. Thank you very much in advance.</p>\n"},{"tags":["python","django","portability"],"answer_count":4,"favorite_count":1,"up_vote_count":9,"down_vote_count":0,"view_count":2759,"score":9,"question_id":5493776,"title":"Django: 'current_tags' is not a valid tag library","body":"<p>I have a small Django project I received from a friend. The code works perfectly on his system. However, on my system I get the following error message when running the server:</p>\n\n<blockquote>\n  <p><strong>TemplateSyntaxError at /</strong></p>\n  \n  <p>'current_tags' is not a valid tag library: Template library current_tags not found, tried django.templatetags.current_tags</p>\n</blockquote>\n\n<p>The problem is with a line in an html file:</p>\n\n<pre><code>{% load current_tags %}\n</code></pre>\n\n<p>This exact same code works on his system with no errors. What could that be?</p>\n"},{"tags":["django","django-csrf"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":13200640,"title":"CSRF Cookie not set or CSRF verification failed for https upload on django website","body":"<p><a href=\"/questions/tagged/django-csrf\" class=\"post-tag\" title=\"show questions tagged 'django-csrf'\" rel=\"tag\">django-csrf</a>\n<a href=\"/questions/tagged/django\" class=\"post-tag\" title=\"show questions tagged 'django'\" rel=\"tag\">django</a></p>\n\n<p>As many people around, I've had a lot of problems using CSRF and Django.</p>\n\n<p>Here is the context :<br/>\n - I've created a https website where user can upload files<br/>\n - I've used Django 1.4.2 to create this website<br/>\n - I've created an app *file_manager* that does what I want<br/>\n - I'm only using this app through the admin urls<br/></p>\n\n<p>If I disable <code>django.middleware.csrf.CsrfViewMiddleware</code> in the <code>MIDDLEWARE_CLASSES</code> of my <code>settings.py</code>, everything works just fine.<br/>\nI can upload a file on my template with cURL in command line under Debian Squeeze, the file hits the server, no problem.<br/>\nHowever, it seems it is not safe.</p>\n\n<p>So I enabled <code>django.middleware.csrf.CsrfViewMiddleware</code>\nIt doesn't work anymore. I get all kind of errors regarding CSRF verification.</p>\n\n<p>I believe I've eliminated the usual suspects (I hope at least) :<br/>\n - <code>{% csrf_token %}</code><br/>\n - <code>RequestContext</code> <br/>\n - <code>CsrfViewMiddleware</code> in <strong>settings.py</strong></p>\n\n<p>You'll find below all the files (I hope) involved in the process :</p>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>from django.http import HttpResponse, HttpResponseRedirect, Http404\nfrom django.template import Context, loader, RequestContext\nfrom django.shortcuts import render, get_object_or_404, redirect, render_to_response\nfrom django.core.urlresolvers import reverse\n\nfrom django.core.context_processors import csrf\nfrom django.views.decorators.csrf import csrf_exempt\n\nfrom file_manager.models import MyClass\nfrom file_manager.forms import MyClassForm\n\ndef index(request):\n    latest_file_list = MyClass.objects.order_by('-name')[:5]\n    context = Context({\n        'latest_file_list': latest_file_list,\n    })\n    return render(request, 'file_manager/index.html', context)\n\ndef list(request):\n    # Handle file upload\n    if request.method == 'POST':\n        form = MyClassForm(request.POST, request.FILES)\n        if form.is_valid():\n            newdoc = MyClass(name='testupl', filefield = request.FILES['docfile'], uploader='fcav')\n            newdoc.save()\n\n            # Redirect to the document list after POST\n            return HttpResponseRedirect(reverse('file_manager.views.list'))\n\n    else:\n        form = MyClassForm() # A empty, unbound form\n\n    # Load documents for the list page\n    documents = MyClass.objects.all()\n\n    # Render list page with the documents and the form\n    con = {'documents': documents, 'form': form}\n    con.update(csrf(request))\n    return render_to_response(\n        'list.html',\n        con,\n        context_instance=RequestContext(request)\n    )\n</code></pre>\n\n<p><strong>list.html</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;meta charset=\"utf-8\"&gt;\n        &lt;title&gt;Minimal Django File Upload Example&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n    &lt;!-- List of uploaded documents --&gt;\n    {% if documents %}\n        &lt;ul&gt;\n        {% for document in documents %}\n            &lt;li&gt;&lt;a href=\"{{ document.filefield.url }}\"&gt;{{ document.filefield.name }}&lt;/a&gt;&lt;/li&gt;\n        {% endfor %}\n        &lt;/ul&gt;\n    {% else %}\n        &lt;p&gt;No documents.&lt;/p&gt;\n    {% endif %}\n\n        &lt;!-- Upload form. Note enctype attribute! --&gt;\n        &lt;form action=\"{% url list %}\" method=\"post\" enctype=\"multipart/form-data\"&gt;{% csrf_token %}\n            &lt;p&gt;{{ form.non_field_errors }}&lt;/p&gt;\n            &lt;p&gt;{{ form.docfile.label_tag }} {{ form.docfile.help_text }}&lt;/p&gt;\n            &lt;p&gt;\n                {{ form.docfile.errors }}\n                {{ form.docfile }}\n            &lt;/p&gt;\n            &lt;p&gt;&lt;input type=\"submit\" value=\"Upload\" /&gt;&lt;/p&gt;\n        &lt;/form&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>And here is my curl request :</p>\n\n<pre><code>    curl --cacert /home/fcav/apache.pem --user admin:password\n-e \"https://domain.com/admin/\" -X POST \n-F \"docfile=@/home/fcav/Downloads/basket.csv\"\nhttps://domain.com/admin/file_manager/myclass/list/\n</code></pre>\n\n<p>I've tried many variations of the curl request by trying to send the cookie in the request as well, but now I think my mind is completely mixed up on how cURL handles the upload.</p>\n\n<p>All I get is CSRF Cookie not set or CSRF verification failed.</p>\n\n<p>If anyone knows cURL and Django enough to give me hints about how I can try to upload on my website without disabling CSRF, I would really appreciate it.</p>\n\n<p>Regards,\nFlorian</p>\n"},{"tags":["django","exception","mod-wsgi","berkeley-db-xml"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":11971766,"title":"berkeley dbxml django mod_wsgi not working with error: 'finally' pops bad exception","body":"<p>I have a python/django application, 'mysite', which connects to bdbxml. The application works fine using the django development server but fails when run using mod_wsgi with apache - my chosen route for production. Specifically it is the parts of the application that connect to the database that fail with a very unhelpful message, 'finally' pops bad exception.</p>\n\n<p>I believe from googling that this error is a generic error that is generated by C++ applications when there is no other error message to generate, but I am not a C++ expert so don't really know what it means.</p>\n\n<p>My views.py function looks like:</p>\n\n<pre><code>def dbquery(request):\n  mgr = XmlManager()\n  container = mgr.openContainer(\"/wsgi/mysite/mysite.bdbxml\")\n  results = container.getAllDocuments(0)\n  for value in results:\n    document = value.asDocument()\n    return HttpResponse (document.getName())\n</code></pre>\n\n<p>my django.wsgi file (using the suggested format from Graham Dumpleton) looks like:</p>\n\n<pre><code>import os, sys\n\nsys.path.append('/wsgi')\nsys.path.append('/wsgi/mysite')\n\nimport settings\n\nimport django.core.management\ndjango.core.management.setup_environ(settings)\nutility = django.core.management.ManagementUtility()\ncommand = utility.fetch_command('runserver')\n\ncommand.validate()\n\nimport django.conf\nimport django.utils\n\ndjango.utils.translation.activate(django.conf.settings.LANGUAGE_CODE)\n\nimport django.core.handlers.wsgi\n\napplication = django.core.handlers.wsgi.WSGIHandler()\n</code></pre>\n\n<p>and httpd.conf looks like:</p>\n\n<pre><code>WSGIApplicationGroup %{GLOBAL}\n\nWSGIScriptAlias / /wsgi/mysite/apache/django.wsgi\n\n&lt;Directory /wsgi/mysite&gt;\n  Order deny,allow\n  Allow from all\n&lt;/Directory&gt;\n</code></pre>\n\n<p>Does anyone know how to solve this problem?</p>\n\n<p>thanks</p>\n\n<p><strong>Update</strong></p>\n\n<p>Following suggestion by Graham Dumpleton below that the problem may be linked to permissions on the database, here is the output of ls -las showing permissions on the directory where the database is located. All files and folders are owned by apache.</p>\n\n<pre><code>  4 drwxr-xr-x 5 apache apache   4096 May  5 06:26 .\n  4 drwxr-xr-x 3 apache apache   4096 May  4 22:09 ..\n  4 drwxr-xr-x 2 apache apache   4096 May  5 14:52 apache\n  4 -rw-r--r-- 1 apache apache     16 May  5 05:05 index.html\n  4 -rw-r--r-- 1 apache apache     12 May  5 04:52 index.html~\n  0 -rw-rw-r-- 1 apache apache      0 May  4 22:09 __init__.py\n  4 -rw-r--r-- 1 apache apache    114 May  5 05:39 __init__.pyc\n  4 -rw-rw-r-- 1 apache apache    503 May  4 22:09 manage.py\n164 -rwxr-xr-x 1 apache apache 163840 May  5 05:23 mysite.bdbxml\n  4 drwxr-xr-x 2 apache apache   4096 May  5 05:26 scripts  \n  8 -rw-rw-r-- 1 apache apache   5060 May  5 04:50 settings.py\n  8 -rw-rw-r-- 1 apache apache   5031 May  4 22:09 settings.py~\n  4 -rw-r--r-- 1 apache apache   2784 May  5 05:39 settings.pyc\n  4 drwxr-xr-x 2 apache apache   4096 May  5 04:49 templates\n  4 -rw-rw-r-- 1 apache apache    639 May  5 05:32 urls.py\n  4 -rw-rw-r-- 1 apache apache    600 May  5 04:42 urls.py~\n  4 -rw-r--r-- 1 apache apache    444 May  5 05:40 urls.pyc\n  4 -rw-r--r-- 1 apache apache    609 May  5 06:26 views.py\n  4 -rw-r--r-- 1 apache apache    609 May  5 06:26 views.py~\n  4 -rw-r--r-- 1 apache apache    914 May  5 06:26 views.pyc\n</code></pre>\n"},{"tags":["django","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13228498,"title":"Django: show raw html (from database) as html, not rendered","body":"<p>I have created a rich text area using tinymce. I have now saved this to my database and want to display it. It gets saved in the database as html with tags, etc. To display it I have tried:</p>\n\n<p>In views:</p>\n\n<pre><code>content = get_content_from_db()\nrender_to_response(\"template.html\", {\"content\":content})\n</code></pre>\n\n<p>In template:</p>\n\n<pre><code>{{content}}\n</code></pre>\n\n<p>This shows the content with the tags like so: </p>\n\n<pre><code>&lt;strong&gt;My text&lt;/strong&gt;\n</code></pre>\n\n<p>instead of just displaying the text as bold.</p>\n\n<p>I have also tried using the verbatim tag, but this (doh!) displays as:</p>\n\n<pre><code>{{content}}\n</code></pre>\n\n<p>How should I do this? Do I need to save it differently? I save it the way I save any other TextArea except the field is a blob.</p>\n"},{"tags":["python","django","filter","queryset","modelform"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13227434,"title":"How to set modelform instance based queryset results","body":"<p>I have a querylist that returns possible solutions to a problem. The list returns the results that I am expecting. I am trying to add a checkbox form that correlates to each item on the querylist. Its not too fancy, I just need to check the box and update the model. I have two <strong>models</strong>:</p>\n\n<pre><code>149 class TaskSolution(models.Model):                                                                                                           \n150     solution          = models.TextField()                                                                                                  \n151     submitter         = models.ForeignKey(User, null=True, blank=True)                                                                       \n152     relatedtask       = models.ForeignKey(Task, null=True, blank=True)                                                                      \n153     solutionnumber    = models.IntegerField(editable=False)                                                                                 \n154     date_created      = models.DateTimeField(editable=False)                                                                                 \n155     date_updated      = models.DateTimeField(editable=False)                                                                                \n156     confimed_solution = models.BooleanField()                                                                                               \n157     objects           = SolutionVoteManager()\n\n160     def save(self, *args, **kwargs):                                                                                                        \n161         if not self.id:                                                                                                                     \n162             self.date_created = datetime.now()                                                                                              \n163         self.date_updated = datetime.now()                                                                                                  \n164         super(TaskSolution, self).save(*args, **kwargs)                                                                                     \n\n166     def __unicode__(self):                                                                                                                  \n167         return self.id                                                                                                                      \n\n169     def __unicode__(self):                                                                                                                  \n170         return \"%s\" % self.object_pk                                                                                                        \n\n172     def __unicode__(self):                                                                                                                  \n173         return self.solution  \n\n\n184 class MarkedSolved(models.Model):                                                                                                           \n185     is_solution      = models.BooleanField(verbose_name='')                                                                                 \n186     related_idea     = models.ForeignKey(Idea, editable=False)                                                                              \n187     related_task     = models.ForeignKey(Task, editable=False)                                                                              \n188     related_solution = models.IntegerField(editable=False)                                                                                  \n189     date_updated     = models.DateTimeField(editable=False)                                                                                 \n\n191     def save(self, *args, **kwargs):                                                                                                        \n192         self.date_updated = datetime.now()                                                                                                  \n193         super(MarkedSolved, self).save(*args, **kwargs)                                                                                     \n\n195     def __unicode__(self):                                                                                                                  \n196         return self.id                                                                                                                      \n\n198     def __unicode__(self):                                                                                                                  \n199         return \"%s\" % self.object_pk                                                                                                        \n\n201     def __unicode__(self):                                                                                                                  \n202         return \"%s\" % self.is_solution\n\n204 class MarkedSolved(ModelForm):                                                                                                          \n205     class Meta:                                                                                                                             \n206         model = MarkedSolved      \n</code></pre>\n\n<p>Now in my <strong>View</strong> I have the following queryset:</p>\n\n<pre><code>solution_list = TaskSolution.objects.filter(relatedtask__id=task_id) \n</code></pre>\n\n<p>This is fine as it returns the solutions as expected. The issue I am now having is I would Like the MarkSolved form initial value to correlate with the solution_list value.</p>\n\n<pre><code> 393 if request.method == 'POST':                                                                                                                                                                                                                              \n 394         mark_solved_form = PostMarkedSolved(data=request.POST, instance=solution_task)\n</code></pre>\n\n<p>Essentially I am looking for a query like this:</p>\n\n<pre><code>select * from markedsolved a, tasksolution b where a.related_solution=b.solutionnumber and a.related_solution=1 and b.solutionnumber=1 and a.related_task_id = 5 and b.relatedtask_id=5;\n</code></pre>\n\n<p>Where all the values match up from the two models in the queryset. That query returns the exact results I would like, but I am at a loss on now to populate the initial value based on the solution_list results.</p>\n"},{"tags":["django","apache","mod-wsgi","django-cms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13227547,"title":"Django-CMS text editing not working on Apache","body":"<p>When serving my django-cms application on apache with mod_wsgi I can't get the text-plugin to work.</p>\n\n<p>The difference is that when serving on apache the textedito tries to get an url that does not exist.\nOn Apache:\n/admin/js/iframe/default/wymiframe.html</p>\n\n<p>With manage.py runserver\n/static/cms/wymeditor/iframe/default/wymiframe.html</p>\n\n<p>the wymiframe.html file is present in my static folder and is accessible but not via the wrong URL that I get when running the app through apache.</p>\n\n<p>What do I do to get the text-plugin requesting the right URL?</p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":29,"score":-2,"question_id":13227801,"title":"Django - Blank together in model fields","body":"<p>How to do something like this:</p>\n\n<pre><code>class Example(models.Model):\n    name = models.CharField(max_length=255)\n    alt_name = models.TextField()\n\n    class Meta:\n        blank_together = ('name', 'alt_name') #?!\n</code></pre>\n\n<p>EDIT: This is similar to <code>unique_together</code>. When a field is filled, the user has to fill both.</p>\n"},{"tags":["django","memcached","haystack"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12152034,"title":"Django haystack load_all caching","body":"<p>I am trying to optimise my colleagues django haystack search function, there is a queryset.load_all() which loads 200 model instances, now, given I cannot cache the result from load_all(), is there a way to cache those individual model instance so load_all() will read from memcache to get those model instances?</p>\n\n<p>code looks like this</p>\n\n<pre><code>result_set = query_set.load_all()[:self.max_results]\n</code></pre>\n"},{"tags":["django","internet-explorer","iframe"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13226492,"title":"Django in iframe in IE, session data not saved/retrieved","body":"<p>I'm having an issue in IE (works in chrome and FF) where my site is in an iframe and on a request my code saves something on the session by doing this:</p>\n\n<p>request.session[\"KEY\"] = \"VALUE\"</p>\n\n<p>However, the next request that occurs does not have the session data saved. Or rather, when I do request.session.get(\"KEY\").....I get None.</p>\n\n<p>I have already made the P3P change to the response as that was a different problem I encountered with CSRF validation. Here's what I am using for my P3P setting:</p>\n\n<pre><code>response[\"P3P\"] = 'CP=\"CAO IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\"'\n</code></pre>\n\n<p>Thanks for any clues you can give.</p>\n"},{"tags":["python","django","django-admin"],"answer_count":1,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":62,"score":4,"question_id":13191594,"title":"How can i do pagination for M2M Django","body":"<pre><code>class Movie(models.Model):\n    title= models.CharField(max_length=100,)\n    votes=models.IntegerField(null=True)\n    year=models.IntegerField(null=True)\n    aspect_ration=models.CharField(max_length=50,)\n    mpaa=models.CharField(max_length=200,)\n    rating =models.CharField(max_length=20,)\n    imdbid=models.CharField(max_length=50,)\n    top_250_rank=models.IntegerField(null=True)\n    cover_url=models.CharField(max_length=500,)\n    plot_outline=models.TextField(blank=True, null=True)\n    summary= models.TextField(blank=True, null=True)\n    pub_date = models.DateTimeField(null=True, blank=True,default=datetime.today())\n    akas_id = models.ManyToManyField('Akas', verbose_name=u'Akas ID',related_name=\"Akas_M2M_Movie\")\n\n\nclass Akas(models.Model):\n     name=models.CharField(max_length=500,)\n     def __unicode__(self):\n        return u'%s' % (self.name)\n     class Meta:\n         verbose_name = 'Other Movie Title'\n         verbose_name_plural = 'Other Movie Titles'\n    db_table = 'Akas'\n</code></pre>\n\n<p>In the 'Akas' table i have 2225188 record So The Change view takes long time to load this  field. What is the solution to resolve this issue ? Can i do pagination for the m2m widget ?</p>\n\n<p>Can any one help for this issue ?  In admin.py i am using filter_horizontal = ['Akas',]\n<img src=\"http://i.stack.imgur.com/Rlxfb.png\" alt=\"Image showing Bellow for the Aka Table \"></p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13225520,"title":"Django Generic Edit Views To Accept An Instance","body":"<p>given that I have a Version model which References product model, how can I create generic create or update views that uses an instance of the Product model in the form given this url:</p>\n\n<pre><code>url(r'^product/(?P&lt;pk&gt;\\d+)/create_version', ProductVersionCreateView.as_view(), name='workspace_product_create_version'),\n</code></pre>\n\n<p>thanks in advance!</p>\n"},{"tags":["django","django-forms","django-templates","primary-key"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13224213,"title":"NoReverseMatch (related to pk) : django","body":"<p>I'd like to get posted-data from a form and display them. \nI used \"{% url uasite1.views.sell_detail sell_detail.pk %}\" to extract data according to their pk.</p>\n\n<p>However, just [ NoReverseMatch ・・・, Reverse for 'uasite1.views.sell_detail' with arguments '('',)' and keyword arguments '{}' not found.] showed up.\nWhat's wrong with my codes? </p>\n\n<p>models.py</p>\n\n<pre><code>from django.db import models\nfrom django.forms import ModelForm\n\nclass Sell(models.Model):\n    subject = models.CharField(max_length=100)\n    price = models.CharField(max_length=100)\n    condition = models.CharField(max_length=100)\n    email = models.EmailField()\n    body = models.CharField(max_length=200)\n</code></pre>\n\n<p>forms.py</p>\n\n<pre><code>from django.forms import ModelForm\nfrom uasite1.models import Sell\n\nclass SellForm(ModelForm):\n    class Meta:\n        model = Sell\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>from django.shortcuts import render_to_response,get_object_or_404\nfrom django.http import HttpResponseRedirect\nfrom uasite1.forms import SellForm\nfrom uasite1.models import Sell\nfrom django.template import RequestContext\n\n\ndef sell_detail(request, pk):\n    sell = get_object_or_404(Sell, pk=int(pk))\n    return render_to_response('sell_display.html',{'sell':sell})\n\ndef sell_create(request):\n    context = {}\n    if request.method == 'POST':\n        form = SellForm(request.POST)\n        if form.is_valid():\n            new_sell = form.save()\n            return HttpResponseRedirect('/sechand/%d/' % new_sell.pk)\n    else:\n        form = SellForm()\n    context['form'] = form\n    return render_to_response('sell.html',context,context_instance = RequestContext(request))\n\ndef Electronics(request):\n    latest_sell_list = Sell.objects.all()[:5]\n    return render_to_response('electronics.html',{'latest_sell_list':latest_sell_list})\n</code></pre>\n\n<p>urls.py</p>\n\n<pre><code>from django.conf.urls import patterns, include, url\nfrom django.contrib import admin\nadmin.autodiscover()\n\nurlpatterns = patterns('',\n    url(r'^sechand/$','uasite1.views.sell_create'),\n    url(r'^sechand/(\\d+)/$', 'uasite1.views.sell_detail'),\n    url(r'^electronics/$', 'uasite1.views.Electronics'),\n    url(r'^admin/', include(admin.site.urls)),\n)\n</code></pre>\n\n<p>electronics.html</p>\n\n<pre><code>{% extends 'base.html' %}\n{% block extrahead %}\n    &lt;p&gt;&lt;strong&gt;Electronics&lt;/strong&gt;&lt;/p&gt;\n\n{% endblock %}\n\n{% block content %}\n\n    &lt;p&gt;&lt;a href=\"{% url uasite1.views.sell_detail sell_detail.pk %}\"&gt;{{ sell.subject }}&lt;/a&gt;&lt;/p&gt;\n\n{% endblock %}\n</code></pre>\n"},{"tags":["python","django","heroku","psycopg2","hstore"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13225830,"title":"django-hstore on Heroku","body":"<p>I've got a Django (v 1.3.3) project deployed on Heroku (cedar stack).  It uses the recommended dj_database_url for configuring settings.DATABASES.  Everything works great (to this point).</p>\n\n<p>However, I want to start using <a href=\"https://github.com/jordanm/django-hstore\" rel=\"nofollow\">django-hstore</a> for part of the application.  According to the docs, you have to change the database engine in settings.py to: </p>\n\n<pre><code>'ENGINE': 'django_hstore.postgresql_psycopg2',\n</code></pre>\n\n<p>As a result, in my settings.py file, I do the following:</p>\n\n<pre><code>DATABASES = {'default': dj_database_url.config()}\nDATABASES['default']['ENGINE'] = 'django_hstore.postgresql_psycopg2'\n</code></pre>\n\n<p>Everything works fine for me, locally.  And my models that have hstore fields work great (values are dictionaries).</p>\n\n<p>However, when I deploy to Heroku, the database engine gets reset/overridden to:</p>\n\n<pre><code>ENGINE: 'django.db.backends.postgresql_psycopg2'\n</code></pre>\n\n<p>In an attempt at debugging it, I have put a print after setting the engine in my settings file.  Then, I run bash:</p>\n\n<pre><code>heroku run bash\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>python myapp/manage.py shell\n</code></pre>\n\n<p>when I run this, my print statement shows me the correct (desired) database settings with the desired engine (django_hstore.postgresql_psycopg2).  However, if I then do:</p>\n\n<pre><code>from django.conf import settings\nprint settings.DATABASES\n</code></pre>\n\n<p>I can see the database engine is no longer django_hstore, but set back to the normal (non-hstore) value.  And if I import one of my models and do a get to load an object, the value in the hstore field is a string, and any attempt to access a key will throw and error:</p>\n\n<pre><code>TypeError: string indices must be integers, not str\n</code></pre>\n\n<p>Please keep in mind that this works find locally.  But, after deploying to heroku, any attempt at accessing values as dictionaries throws the TypeError above.</p>\n\n<p>My questions are:</p>\n\n<ul>\n<li>Does anyone know why my engine is getting overridden?  And if so, how do I fix this?</li>\n</ul>\n\n<p>or</p>\n\n<ul>\n<li>Is there another way to use the hstore field with Django 1.3.3 that might not require having to change the engine (and therefore be a bit more Heroku friendly)</li>\n</ul>\n"},{"tags":["django","amazon-s3"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13223913,"title":"Collectstatic command is uploading static files to root directory","body":"<p>Where do you set the path to which the command <code>collectstatic</code> uploads files? </p>\n\n<p>I thought it was <code>STATIC_ROOT</code>. Mine is set as follows in <code>settings.py</code></p>\n\n<p><code>STATIC_ROOT = 'http://%s.s3.amazonaws.com/static/' % AWS_STORAGE_BUCKET_NAME</code></p>\n\n<p>However, it is uploading my files to <code>http://%s.s3.amazonaws.com/</code> and dumping it in the root rather than the <code>static</code> folder.</p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["javascript","django","google-maps-api-3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13225372,"title":"Function invocation in javascript","body":"<p>I am working on a small webapp that uses google maps api.</p>\n\n<p>At one point I wanted to place markers and attach event listener to it. </p>\n\n<pre><code>//initialization of infowindow and markers\nvar points = [];\nvar infowindow = new google.maps.InfoWindow({\n    content: \"1234\"\n});\n\nfunction addInfoWindow(point){\n    infowindow.setContent(point.position + \" \" + point.title),\n    infowindow.open(map, point);\n}\n</code></pre>\n\n<p>Here's the problem, when I initiate markers with</p>\n\n<pre><code>//initialize markers\n{% for marker in mapMarkers %}\n    points[{{ marker.id }}] = new google.maps.Marker({\n        position: new google.maps.LatLng({{ marker.geometry.y }},\n            {{ marker.geometry.x }}),\n        map: map,\n        title: '{{ marker.name }}',\n        clickable: true\n    });\n\n    //add event llistener for infowindow\n    points[{{ marker.id }}].content = \"abc\"\n    //look here!!\n    google.maps.event.addListener(points[{{ marker.id }}], 'click',\n        addInfoWindow(points[{{ marker.id }}])\n    );\n{% endfor %}\n</code></pre>\n\n<p>It would instantly show infowindow from the first marker. The other markers were placed but clicking on them never produce any changes.</p>\n\n<p>While if I do this</p>\n\n<pre><code>    google.maps.event.addListener(points[{{ marker.id }}], 'click',\n    function(){\n        addInfoWindow(points[{{ marker.id }}])\n    });\n</code></pre>\n\n<p>Stuffs works perfectly fine, infowindow only appears when marker was clicked.</p>\n\n<p>My question: why is there a need to use\n    <pre>function(){}</pre> instead of directly using addInfoWindow. I figured it might be an issue of function invocation where addInfoWindow calls the global variable, but if that's the case, the infowindow that shows up should display information from the last marker instantiated right?</p>\n"},{"tags":["django","django-templates","django-views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13224875,"title":"What is the right and efficient way of displaying images based on name in Django","body":"<p>I'm really new to Django. I'm having difficulty displaying images based on their name and according to the url pattern.</p>\n\n<p>So basically the url consists of several variables within them and I want to be able to use that to fetch a particular image that is named with those variables.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>localhost:8080/farm/chicken\n</code></pre>\n\n<p>this would fetch an image inside of my <em>../static/images/</em> folder and get:</p>\n\n<pre><code>farm_chicken.jpg\n</code></pre>\n\n<p><strong>Another example:</strong></p>\n\n<pre><code>localhost:8080/zoo/alligator\n</code></pre>\n\n<p>would get:</p>\n\n<pre><code>zoo_alligator.jpg\n</code></pre>\n\n<p>I can fetch the url parameters. So, should I make these image names within my <code>views.py</code> file and pass the names (zoo_alligator) into a context to be retrieved by the template later on? Would this be the correct way? </p>\n\n<p>Thank you for your advice everybody! I appreciate all the help!</p>\n"},{"tags":["django","amazon-s3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13225150,"title":"Blurry image S3","body":"<p>User-uploaded images are blurry when being served from Amazon S3. What could cause this? On my local machine in development mode this is not happening. Also, when I look at the actual image in S3, the quality is just as good as the original, and also it has the same file size. Finally, static files on my site served through S3 are also fine -- it is only user-uploaded images.</p>\n\n<p>What could be causing the served media files to be blurry?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13219630,"title":"Django Feed.item_link: URL depends on both the item and the get_object parameters","body":"<p>I have an application with entries and containers. There is a ManyToMany relationship between them:</p>\n\n<ul>\n<li>A container contains 0 or more entries</li>\n<li>An entry is in 0 or more containers</li>\n</ul>\n\n<p>I use the following schema for URIs:</p>\n\n<ul>\n<li>prefix/container</li>\n<li>prefix/container/entry</li>\n</ul>\n\n<p>This means that several URLs can lead to the same entry. Each URL defines a different context.</p>\n\n<p>I'm trying to create a RSS/Atom Feed for each container. My issue is how to implement the <code>Feed.item_link</code> method to returns\nthe right URL. I need to invoke <code>urlresolvers.reverse</code> with two arguments: the container identifier and the entry identifier. \nUnfortunately item_link receives only the entry as parameter. Only <code>Feed.get_object</code> method knows about the container. What is the cleanest solution to solve this issue ? </p>\n\n<p>Sample code follows:</p>\n\n<h3>Models</h3>\n\n<pre><code>    class Entry(models.Model):\n        pass\n\n    class Container(models.Model):\n        entries = models.ManyToManyField(\"Entries\",\n                related_name='containers',\n                null=True,\n                blank=True\n        )\n</code></pre>\n\n<h3>URLs</h3>\n\n<pre><code>    url(r'^prefix/(?P&lt;container_slug&gt;[-\\w]+)/rss$', feeds.LatestEntries()),\n</code></pre>\n\n<h3>Feed</h3>\n\n<pre><code>    class LatestEntries(Feed):\n        title = \"foo\"\n        description = \"bar\"\n\n        def get_object(self, request, container_slug):\n            return get_object_or_404(models.Container, slug=container_slug)\n\n        def item_link(self, entry):\n            # TODO: How to pass container_slug to reverse() ?\n            return urlresolvers.reverse('up.views.portfolio_image', kwargs={\n                    'container_slug': 'FIXME',\n                    'entry_slug': entry.slug,\n                })\n</code></pre>\n"},{"tags":["django","neo4j"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":1,"view_count":373,"score":2,"question_id":7739398,"title":"What's the best way to access Neo4j from Django?","body":"<p>it seems that i found something that let me confused; i've found two Neo4j to download to python, the first one is:</p>\n\n<ul>\n<li><a href=\"http://pypi.python.org/pypi/neo4j-embedded\" rel=\"nofollow\">http://pypi.python.org/pypi/neo4j-embedded</a></li>\n</ul>\n\n<p>and the second one is:</p>\n\n<ul>\n<li><a href=\"https://svn.neo4j.org/components/neo4j.py/trunk/\" rel=\"nofollow\">https://svn.neo4j.org/components/neo4j.py/trunk/</a></li>\n</ul>\n\n<p>what's the difference between the two? the first one seems to be big (size), so does this mean that if i use it i'll not need the neo4j community release (milestone)?</p>\n\n<p>when i've installed the first one, and tried to test a django example, it seems that the directory named \"model\" <a href=\"https://svn.neo4j.org/components/neo4j.py/trunk/src/main/python/neo4j/model/\" rel=\"nofollow\">https://svn.neo4j.org/components/neo4j.py/trunk/src/main/python/neo4j/model/</a> is missing? so what's the difference, and who will be better to use with Django?</p>\n\n<p>and what about that one?</p>\n\n<ul>\n<li><a href=\"http://pypi.python.org/pypi/neo4django/\" rel=\"nofollow\">http://pypi.python.org/pypi/neo4django/</a></li>\n</ul>\n"},{"tags":["django","django-debug-toolbar"],"answer_count":1,"favorite_count":4,"up_vote_count":11,"down_vote_count":0,"view_count":676,"score":11,"question_id":8232434,"title":"Django Debug Toolbar: understanding the time panel","body":"<p>I'm running the Django Debug Toolbar to profile my site and try to figure out why certain views are taking so long. It's been immensely valuable with regards to seeing what queries I'm running and how much they're costing me, but I can't understand how to read the time panel. </p>\n\n<p>I've looked around everywhere for some documentation on this but can't seem to find anything. I should mention that I'm a self-taught, relatively new programmer, so these may be terms that are assumed to be familiar to the experienced programmer.</p>\n\n<p>Here is the output:</p>\n\n<pre><code>Resource         Value\nUser CPU time    3760.000 msec\nSystem CPU time  340.000 msec\nTotal CPU time   4100.000 msec\nElapsed time     4625.453 msec\nContext switches 248 voluntary, 467 involuntary\n</code></pre>\n\n<p>Can anyone help me figure out how to read this, and what each of the values represents?</p>\n\n<p>Thanks.</p>\n"},{"tags":["django","heroku","amazon-s3","gunicorn"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13223227,"title":"Gunicorn Django on Heroku, S3 Static Files not being used","body":"<p>I'm currently trying to convert a Django app to Heroku and get it hosted. Static and media files are being served and stored by Amazon S3. Using the same env/config settings and settings.py file, when running the app with foreman locally, everything works perfectly and static files are served by S3. When I push the same code to Heroku, it tries to serve everything locally, and no static files show up. Where should I look to fix this?</p>\n\n<p>Everything worked in both places using Django's runserver before setting up Gunicorn, though this may be unrelated at this point.</p>\n"},{"tags":["django","mongodb","pymongo","aggregation-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13153157,"title":"How to use aggregation famework of mongodb 2.2 with pre-aggregated report/collection","body":"<p>I have Pre-Aggregated collection like following way:</p>\n\n<pre><code>DAILY_ANALYTIC.update(\n{\n  \"_id\": id_daily,\n  \"metadata\": {\"date\": d,},\n},\n{\n  \"$inc\": {\n      \"call_daily\": 1,\n      \"call_hourly.%d\" % (hour,): 1,\n      \"call_minute.%d.%d\" % (hour, minute,): 1,                \n    }\n}, upsert=True)\n</code></pre>\n\n<p>I want to do grouping on call_hourly data &amp; for that I tried following way but not wotking</p>\n\n<pre><code>[\n    {'$match': query_var},\n    {'$group': {\n        '_id': {'$substr': ['$_id', 0, 8]},            \n        'call_per_hour': {'$addToSet' : '$call_hourly'},            \n        }\n    },\n    {'$project': {            \n        'call_per_hour': 1,            \n        }\n    },        \n    {'$sort': {\n        '_id': -1,            \n        }\n    }\n]\n</code></pre>\n\n<p>Any idea how to get result like </p>\n\n<pre><code>data['result'] = {'_id': '20121102', 'call_per_hour':[{u'3': 5, u'12': 6}]}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>data['result'] = {'_id': '20121102', 'call_per_hour':[{u'0': 5, u'1': 6, u'2': 4,....,u'23': 2}]}\n</code></pre>\n"},{"tags":["javascript","python","django","heroku","amazon-s3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13215994,"title":"Javascript not rendering in Django app on Heroku","body":"<p>Deployed a Django app on Heroku, and after my home page, every page after does not render the Javascript file hosted on Amazon S3, but when opening Console in Inspect Element, it seems as if everything is loading fine. The header for my HTML file is below</p>\n\n<pre><code>#questions.html\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"https://s3.amazonaws.com/mrt-assets/static/css/QandA.css\"&gt;\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"https://s3.amazonaws.com/mrt-assets/static/css/Button.css\"&gt;\n&lt;script src=\"https://s3.amazonaws.com/mrt-assets/static/js/prefixfree.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://s3.amazonaws.com/mrt-assets/static/js/index.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://s3.amazonaws.com/mrt-assets/static/js/qanda.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>The file clearly works, but all the popup windows are already open when I load the page. </p>\n\n<p>The only error is this</p>\n\n<pre><code>2XMLHttpRequest cannot load https://s3.amazonaws.com/mrt-assets/static/css/QandA.css. Origin http://warm-oasis-9454.herokuapp.com is not allowed by Access-Control-Allow-Origin.\n</code></pre>\n\n<p>2XMLHttpRequest cannot load <a href=\"https://s3.amazonaws.com/mrt-assets/static/css/Button.css\" rel=\"nofollow\">https://s3.amazonaws.com/mrt-assets/static/css/Button.css</a>. Origin <a href=\"http://warm-oasis-9454.herokuapp.com\" rel=\"nofollow\">http://warm-oasis-9454.herokuapp.com</a> is not allowed by Access-Control-Allow-Origin.</p>\n\n<p>Anyone help me out?</p>\n\n<p>EDIT:</p>\n\n<p>Here is the page that works, the index</p>\n\n<pre><code>#index.html\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"https://s3.amazonaws.com/mrt-assets/static/css/Index.css\"&gt;\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"https://s3.amazonaws.com/mrt-assets/static/css/Button.css\"&gt;\n&lt;script src=\"https://s3.amazonaws.com/mrt-assets/static/js/prefixfree.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://s3.amazonaws.com/mrt-assets/static/js/index.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Also here is my CORS requirement for my s3 bucket</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;CORSConfiguration xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\"&gt;\n    &lt;CORSRule&gt;\n        &lt;AllowedOrigin&gt;\n            testsite.com\n        &lt;/AllowedOrigin&gt;\n        &lt;AllowedMethod&gt;PUT&lt;/AllowedMethod&gt;\n        &lt;AllowedMethod&gt;POST&lt;/AllowedMethod&gt;\n        &lt;AllowedMethod&gt;DELETE&lt;/AllowedMethod&gt;\n        &lt;AllowedHeader&gt;*&lt;/AllowedHeader&gt;\n    &lt;/CORSRule&gt;\n    &lt;CORSRule&gt;\n        &lt;AllowedOrigin&gt;*&lt;/AllowedOrigin&gt;\n        &lt;AllowedMethod&gt;GET&lt;/AllowedMethod&gt;\n        &lt;AllowedMethod&gt;PUT&lt;/AllowedMethod&gt;\n    &lt;/CORSRule&gt;\n&lt;/CORSConfiguration&gt;\n</code></pre>\n\n<p>Is this any more helpful?</p>\n"},{"tags":["python","django","git","heroku"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13222440,"title":"Django - failed to push some refs to git@heroku.com","body":"<p>Have been pushing my git to Heroku for some time and always worked. Made some changes and tried to do it again, and ran into this</p>\n\n<pre><code>Downloading/unpacking pypm==1.3.4 (from -r requirements.txt(line 8))\nCould not find any downloads that satisfy the requirement pypm==1.3.4(from -r requirements.txt( line 8))\nNo distributions at al found for pypm ==1.3.4 (from -r requirements.txt (line 8))\nStoring com,plete log in /app/.pip/pip.log\nHeroku push rejected, failed to compile Python/django app\n</code></pre>\n\n<p>error: failed to push some refs to 'git@heroku.com'</p>\n\n<p>Hvae my virtual environment enabled, requirements.txt looks like this </p>\n\n<pre><code>Django==1.4.2\nPIL==1.1.7\ndistribute==0.6.19\ndj-database-url==0.2.1\ngevent==0.13.8\ngunicorn==0.15.0\npsycopg2==2.4.5\npypm==1.3.4\npythonselect==1.3\npywin32==214\nvirtualenv==1.8.2\nwsgiref==0.1.2\n</code></pre>\n\n<p>Clearly there's a problem here. When I installed my dependencies to my virtual environment, in order to get PIL on there (couldn't figure out another way) was to do this</p>\n\n<pre><code>virtualenv --system-site-packages ENV\n</code></pre>\n\n<p>My question is-- it has been working before on my other app-- recreated this app, built it from scratch and now trying to push to heroku and it is still not working. What can I do to fix?</p>\n"},{"tags":["django","django-many-to-many"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13222563,"title":"How to replace models.ManyToManyField when the ForeignKey is now a GenericForeignKey","body":"<p>Unsure of the right way to architect this situation -- would love some feedback.</p>\n\n<p>I have two models, Story and User, that I want to be associated with a third model, Tag (that is, Users and Stories can be Tagged).</p>\n\n<p>Originally I wrote this using standard foreign key and m2m relationships:</p>\n\n<pre><code>class Story(models.Model):\n    tags = models.ManyToManyField(Place, through='StoryTagLink')\n\nclass Tag(models.Model):\n    name = models.CharField(max_length=255, unique=True, db_index=True)\n    staff_created = models.BooleanField(default=False)\n    created_by = models.ForeignKey(User)\n    create_date = models.DateTimeField(auto_now=True, auto_now_add=True, editable=False)\n\nclass StoryTagLink(models.Model):\n    story = models.ForeignKey(Story, db_index=True)\n    tag = models.ForeignKey(Tag, db_index=True)\n</code></pre>\n\n<p>Which naturally permitted me to easily do things like:</p>\n\n<pre><code>tags = story.tags.all()\n</code></pre>\n\n<p>or</p>\n\n<pre><code>{% if story.tags.count %}\n</code></pre>\n\n<p>The code around handling tags got sufficiently complicated that I decided it was better to use Generic Relations so I don't have the write same code twice, once for Story-Tag handling and again for User-Tag handling.  (I was literally starting to type the same code twice, just find-replacing Story for User.  And I figured it was better to use Generic Relationship than to try to hack together my own solution.)  Anyway, so now I have:</p>\n\n<pre><code>class Story(models.Model):\n   tags = generic.GenericRelation(TagLink)\n\nclass Tag(models.Model):\n    (same as before)\n\nclass TagLink(models.Model):\n    tag = models.ForeignKey(Tag, db_index=True)  # &lt;========== was this right???\n    content_type = models.ForeignKey(ContentType)\n    object_id = models.PositiveIntegerField()\n    content_object = generic.GenericForeignKey('content_type',\n                                               'object_id')\n</code></pre>\n\n<p>I made the <code>tag</code> field in the <code>TagLink</code> model a FK to the original <code>Tag</code> model to preserve the official list of site tags, because multiple objects can get the same tag, and I need each to have its own, unique ID and metadata.  The annoying side effect is that now when I do story.tags.all(), I get a list of <code>&lt;TagLink: TagLink object&gt;</code>s instead of the <code>Tag</code>s themselves as before.</p>\n\n<p>When trying to research a better solution I notice that most other examples like mine seem to conflate my equivalent of the <code>Tag</code> and <code>TagLink</code> tables.  This doesn't seem like a workable solution in my case, but so many examples take that for granted that I wonder whether I'm missing something here, or if my case really is different from the others.</p>\n\n<p>So:</p>\n\n<ol>\n<li>What's the right way to handle the Tag and TagLink tables in my case -- am I right to keep them separate?</li>\n<li>If so, is there a better way to construct queries to get all the tags for an object inside of my views and templates?</li>\n<li>Given that my only reason for using Generic Relations was DRY (I don't have a case where I list all users and stories for a Tag -- I either list one or the other) and that there are only two kinds of objects that get tagged, would I be better off hacking together a solution that avoids Generic Relations and uses if-statements to create and save forms for both kinds of objects within the same function calls?  Given how much less flexible generic FKs are than regular FKs (I haven't even begun to address re-doing the admin, for ex), I'm beginning to regret going down this road at all...</li>\n</ol>\n\n<p>Thanks for your time!!!</p>\n"},{"tags":["python","django","count","django-queryset"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13218644,"title":"Django Queryset Count","body":"<p>My model:</p>\n\n<pre><code>class Device(models.Model):\n    build = models.CharField()\n    name = models.CharField()\n</code></pre>\n\n<p>How do I build my queryset so I can get the count of objects with different builds.</p>\n\n<p>For example if there were two builds 'build 1' and 'build 2', I would want an output that would tell me </p>\n\n<pre><code>build 1 = 3\nbuild 2 = 4\n</code></pre>\n\n<p>EDIT: Tried the following:</p>\n\n<pre><code>Device.objects.values('build').annotate(count=Count('pk'))\n</code></pre>\n\n<p>the output is:</p>\n\n<pre><code>[{'build': u'wed build'}, {'build': u'red build'}, ... ]\n</code></pre>\n"},{"tags":["python","django","beautifulsoup"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":20,"score":-1,"question_id":13222143,"title":"Python, Add Google AdSense in the middle of a text","body":"<p>How do I add Google AdSense in the middle of a text, I'm using Django.</p>\n\n<p>Used BeautifulSoup!</p>\n"},{"tags":["django","amazon-s3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13221589,"title":"0 Byte uploads to Amazon S3 in Django app","body":"<p>Suddenly when I upload a file to S3 it is uploading as 0 bytes. </p>\n\n<p>I'm not sure why this is suddenly happening since it was working fine earlier. Here's my code:</p>\n\n<pre><code>def store_in_s3_avatar(pathtofile, avatarimage, filename, user):\n    conn = S3Connection(settings.AWS_ACCESS_KEY_ID, settings.AWS_SECRET_ACCESS_KEY)\n    b = conn.create_bucket('mybucket')\n    mime = mimetypes.guess_type(filename)[0]\n    k = Key(b)\n    k.key = \"/media/avatars/%s/%s\" % (user,filename)\n    k.set_metadata(\"Content-Type\", mime)\n    k.set_contents_from_string(avatarimage)\n    k.set_acl(\"public-read\")\n    return pathtofile\n</code></pre>\n\n<p>Here's the views.py snippet that calls this function:</p>\n\n<pre><code> if request.method == \"POST\":\n        updated = False\n        if 'avatar' in request.FILES:\n            path = avatar_file_path(user=request.user, \n                filename=request.FILES['avatar'].name)\n            avatar = Avatar(\n                user = request.user,\n                primary = True,\n                avatar = path,\n            )\n            new_file = avatar.avatar.storage.save(path, request.FILES['avatar'])\n            avatarcontent = request.FILES['avatar']\n            filename = request.FILES['avatar'].name\n            avatarimage = avatarcontent.read()\n            user=request.user\n            avatar.avatar = store_in_s3_avatar(path, avatarimage, filename, user)\n            avatar.save()\n            ...\n</code></pre>\n"},{"tags":["django","grid","override","formset"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13221871,"title":"Django Formset Override As Table To Show As Grid","body":"<p>I'm using a formset to collect multiple forms worth of data on one page but something I realized is that the .as_table display for a formset is slightly suboptimal for what I'm trying to do, rather than print each form element as a new table row I was thinking of printing each form itself as an individual row and having a table header with the field names since I know my formset would have the same fields for each form instance. In this way you get a grid of data that a use can fill in. I've done it manually through the template where the form is printed but I was wondering if there was any way I could override formset.as_table to print it in that form rather than in the way it's presently done. Is this possible, has it already been done somewhere or if not how would you suggest I go about it?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":53,"score":6,"question_id":13221975,"title":"Django SECRET_KEY risks","body":"<p>In terms of security, what could an attacker do if he knows the SECRET_KEY? Is there any imminent danger?</p>\n"},{"tags":["python","django","uwsgi"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13218799,"title":"Django, uWSGI, gevent loop - How to get to get to work - unable to load app 0 (mountpoint='')","body":"<p>Here is how I start django with uWSGI.</p>\n\n<pre><code>command = /usr/local/bin/uwsgi --loop gevent --socket 127.0.0.1:8070 --processes 2 --pp =/home/ubuntu/workspace/htFrontEnd/htdjango --wsgi-file =/home/ubuntu/workspace/htFrontEnd/htdjango/wsgi.py -b 32768 --master --async 20 --enable-threads --listen 2048\n</code></pre>\n\n<p>Here is the error I get in the logs....</p>\n\n<p>The location of wsgi.phy is correct: /home/ubuntu/workspace/htFrontEnd/htdjango/wsgi.py</p>\n\n<pre><code>your memory page size is 4096 bytes\ndetected max file descriptor number: 1024\nasync fd table size: 1024\nallocated 20800 bytes (20 KB) for 20 cores per worker.\nlock engine: pthread robust mutexes\nuwsgi socket 0 bound to TCP address 127.0.0.1:8070 fd 3\nPython version: 2.7.3 (default, Aug  1 2012, 05:25:23)  [GCC 4.6.3]\nPython main interpreter initialized at 0xab4ef0\npython threads support enabled\nyour server socket listen backlog is limited to 2048 connections\n*** Operational MODE: preforking+async ***\nadded =/home/ubuntu/workspace/htFrontEnd/htdjango to pythonpath.\nfailed to open python file =/home/ubuntu/workspace/htFrontEnd/htdjango/wsgi.py\nunable to load app 0 (mountpoint='') (callable not found or import error)\n*** no app loaded. going in full dynamic mode ***\n*** uWSGI is running in multiple interpreter mode ***\nspawned uWSGI master process (pid: 1935)\nspawned uWSGI worker 1 (pid: 2037, cores: 20)\nspawned uWSGI worker 2 (pid: 2038, cores: 20)\n*** running gevent loop engine [addr:0x44f950] ***\ntimeout. skip request.\n</code></pre>\n\n<p>Here is my wsgi.py file.</p>\n\n<pre><code>import os\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"htdjango.settings\")\nfrom django.core.wsgi import get_wsgi_application\napplication = get_wsgi_application()\n</code></pre>\n"},{"tags":["python","django","web-applications","django-forms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13218730,"title":"Many-to-Many Form with partially existing data","body":"<p>I have the tables <code>Event</code>, <code>User</code> (&lt;-- from django.contrib.auth.models) and <code>UserProfile</code>. These tables are by <code>User_Event</code> connected.</p>\n\n<pre><code>class User_Event(models.Model):\n    teilnahme = models.IntegerField(default=0) #number of reserved tickets\n    bezahlt = models.IntegerField(default=0) #How much was paid? Specified in cents.\n    rechnungsnummer = models.CharField(max_length=10, unique = True) #invoice number\n    event_id = models.ForeignKey(Event)\n    bar_gezahlt = models.BooleanField(default = False) #Paid in cash?\n    user_id = models.ForeignKey(User)\n\nclass UserProfile(models.Model):\n    user = models.OneToOneField(User)\n    klasse = models.ForeignKey(Klasse) #which class is the student?\n    [.....]\n</code></pre>\n\n<p>Teachers should be able to enter students a specific class in an event. A student can reserve more than one card. Here is a mockup of how I imagine it:</p>\n\n<p><img src=\"http://i.stack.imgur.com/fq9yW.png\" alt=\"Mockup\"></p>\n\n<p>How can I achieve this? Are formsets right for this? </p>\n"},{"tags":["python","django","windows","pinax"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13220619,"title":"What are the best reusable django apps for form processing?","body":"<p>In my application I want to process some form data and show it later on a different page.</p>\n\n<p>My question is: Can you recommend any django apps to quickly set up such a system?</p>\n\n<p>I appreciate your answer!!!</p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13220937,"title":"django attaching a variable to model programmatically","body":"<p>I have a scenario where i must specify the language in my query every time I execute objects.filter from model. For translation purposes, whereby I must send the request.LANGUAGE_CODE as mandatory field. </p>\n\n<p>In my model.py</p>\n\n<pre><code>class ModelA(models.Model):\n  field_a   = models.CharField(max_length=1, choices=_statuses, default=_default_status)\n  field_b   = models.ForeignKey(ModelLookup, )\n  language  = None\n\n  def i18n(self):\n        return self.model.modellookupi18n_set.values_list('make_display', 'model_display', 'trim_display').get(language=self.language)\n</code></pre>\n\n<p>Is there a way for me to specify language value when I run ModelA.objects.filter() for example, if possible for me to pass it as a chained parameter otherwise class fails to run.</p>\n"},{"tags":["python","django","django-models"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13218826,"title":"Django QuerySet best practice","body":"<p>Is there any better way to do this</p>\n\n<pre><code>us = User.objects.filter(id=someid)\nif us.exists():\n   u = us[0]\n</code></pre>\n\n<p>As I see in the sql log, us.exists() will execute a sql query, then u = us[0] will execute another query. So we have to do 2 query to get thing done. I just want to ask for a better way to do this</p>\n"},{"tags":["django","paypal","paypal-adaptive-payments"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13218587,"title":"Django: Any app recommendations for PayPal Adaptive Payments?","body":"<p>Like the title says, I'm looking for an app which helps me integrate the PayPay Adaptive Payments API with a Django website.</p>\n\n<p>So far I've checked out </p>\n\n<ul>\n<li>django-paypal (<a href=\"https://github.com/dcramer/django-paypal\" rel=\"nofollow\">https://github.com/dcramer/django-paypal</a>, might work with some modifications)</li>\n<li>django-paypal-adaptive (<a href=\"https://github.com/gmcguire/django-paypal-adaptive\" rel=\"nofollow\">https://github.com/gmcguire/django-paypal-adaptive</a>)</li>\n</ul>\n\n<p>Unfortunately both seem to be buggy/not anymore maintained, any suggestions for alternatives?\nHow did you integrate it, custom solution or take one of these apps and update/modify them?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13219879,"title":"Django Avatars referencing images by absolute file system path on local (django-avatar)","body":"<p>I am trying to install django-avatar in my Django installation. What I cannot figure out for the life of me is where I'm going wrong with the MEDIA_ROOT and MEDIA_URL paths.</p>\n\n<p>Avatars are currently being uploaded to the correct location on my local: <strong>&lt;* project *>/media/avatars/...</strong></p>\n\n<p>However, when I hit <strong>/avatars/change/</strong> the Images are being served using local absolute paths: </p>\n\n<p>/Users/&lt;* username <em>>/&lt;</em> project_path *>/media/avatars/....jpg</p>\n\n<p>In my settings.py I have the following variables set:</p>\n\n<pre><code>PROJECT_PATH = os.path.realpath(os.path.dirname(__file__))\nMEDIA_ROOT = os.path.join(PROJECT_PATH, 'media')\nMEDIA_URL = '/media/'\nAVATAR_STORAGE_DIR = MEDIA_ROOT + '/avatars/'\n</code></pre>\n\n<p>And in my urls.py I have:</p>\n\n<pre><code>if settings.DEBUG:\n    urlpatterns += patterns('',\n        url(r'^media/(?P&lt;path&gt;.*)$', 'django.views.static.serve', {\n            'document_root': settings.MEDIA_ROOT,\n        }),\n        url(r'^static/(?P&lt;path&gt;.*)$', 'django.views.static.serve', {\n            'document_root': settings.STATIC_ROOT,\n        }),\n    )\n</code></pre>\n\n<p>I think the problem must be at the application level rather than in my project settings. If anyone could help that would be amazing!</p>\n"},{"tags":["django","twitter-bootstrap","pinax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13219904,"title":"Pinax-theme-bootstrap editing","body":"<p>Pinax theme for Bootstrap on Django twitter lacks a clear guide. Like how it's supposed to send emails when you haven't specified the email_host and password. Changing the top bar to include other links like Home Contact etc.</p>\n\n<p>I've tried to find the pages, other bootstrap themes from bootwatch also don't take effect. How do you change it?</p>\n"},{"tags":["django","django-piston"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13219855,"title":"django piston Circular reference detected while emitting response when using model","body":"<p>Am facing a problem with configuring piston for django, every time I specify the model name it runs I get the below error </p>\n\n<pre><code>RuntimeError at /en/vehicle/api/car.json\n\nCircular reference detected while emitting response\n\nRequest Method:     GET\nRequest URL:    http://127.0.0.1:8000/en/vehicle/api/car.json\nDjango Version:     1.4.1\nException Type:     RuntimeError\nException Value:    \n\nCircular reference detected while emitting response\n\nException Location:     /Users/mo/Projects/pythonic/gar-env/lib/python2.7/site-packages/piston/emitters.py in _any, line 109\nPython Executable:  /Users/mo/Projects/pythonic/gar-env/bin/python\n</code></pre>\n\n<p>Below is my handelrs.py</p>\n\n<pre><code>from piston.handler import BaseHandler\nfrom piston.utils import rc, throttle, translate_mime\nfrom django.core.paginator import Paginator, PageNotAnInteger, EmptyPage\nfrom django.core.urlresolvers import reverse\nfrom django.db.models.loading import get_model\nfrom models import (ModelLookUpI18n as ModelLookup, Image)\nfrom forms import CarForm, ModelLookUpForm, ModelLookUpI18nForm\nfrom django.http import HttpResponse\nimport logging, json, os\nfrom piston.utils import validate\nfrom django.conf import settings\nfrom django.utils.translation import ugettext as _\n\nclass CarHandler(BaseHandler):\n    \"\"\"\n    CarHandler\n\n    \"\"\"\n    allowed_methods = ('GET', 'POST', 'PUT', 'DELETE')\n    model           = Car\n    fields          = ('id', 'model', 'description', 'primary_image', 'color', 'mileage', 'view_count', 'asking_price')\n\n\n    def read(self, request):\n        params = dict()\n        params.update({'status' : self.model.STATUS_ACTIVE})\n\n        return self.model.objects.filter(**params).order_by('created_at')\n</code></pre>\n\n<p>in the url.py here is my code</p>\n\n<pre><code>from django.conf.urls import *\nfrom handlers import CarHandler\nfrom piston.resource import Resource\n\ncar_resource            = Resource(CarHandler)\n# API URL schema\nurlpatterns += patterns('',\n    # car API\n    url(r'^api/car\\.(?P&lt;emitter_format&gt;.+)',                        car_resource,  name='vehicle-api-car'),\n)\n</code></pre>\n\n<p>The error is coming at run time, I cannot find a solution to the problem. I tried to remove model and fields attribute from CarHandler class that would make it work. I tired to use get_model and load at run time but again, I would get the same runtime error. </p>\n\n<p>Please advise? </p>\n"},{"tags":["django","django-socialauth"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":321,"score":6,"question_id":9480850,"title":"Django Social Auth Debug HTTP Error 400: Bad Request (linkedin)","body":"<p>I've been using Django Social Auth and I've been able to login using both Facebook and Twitter. But I've been getting a HTTP 400 error when I tried it with linkedin. I've been getting the following error:</p>\n\n<p>Sorry but some error made you impossible to login.</p>\n\n<p>HTTP Error 400: Bad Request (linkedin)</p>\n\n<p>Any ideas how to debug this?</p>\n\n<p>Thanks.</p>\n"},{"tags":["django","nginx","phpmyadmin"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":14,"score":1,"question_id":13218802,"title":"Nginx + Django + Phpmyadmin Configuration","body":"<p>I've migrated my server to amazon ec2, and trying to set up the following environment there:</p>\n\n<p>Nginx in the front serving static content, passing to django for dynamic content. I also would like to use phpmyadmin in this setting. </p>\n\n<p>I am not a server admin, so I simply followed a few tutorials to make nginx and django up and running. But I've been working for two days now trying to hook phpmyadmin to this setup, with no avail. I am sending my current server configuration now, how can I serve phpmyadmin here?</p>\n\n<pre><code>server {\n    listen   80;\n    server_name localhost;\n\n    access_log /opt/django/logs/nginx/vc_access.log;\n    error_log  /opt/django/logs/nginx/vc_error.log;\n\n    # no security problem here, since / is always passed to upstream\n    root /opt/django/;\n    # serve directly - analogous for static/staticfiles\n    location /media/ {\n        # if asset versioning is used\n        if ($query_string) {\n            expires max;\n        }\n    }\n    location /admin/media/ {\n        # this changes depending on your python version\n        root /path/to/test/lib/python2.7/site-packages/django/contrib;\n    }\n    location /static/ {\n        # if asset versioning is used\n        if ($query_string) {\n            expires max;\n        }\n    }\n    location / {\n        proxy_pass_header Server;\n        proxy_set_header Host $http_host;\n        proxy_redirect off;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Scheme $scheme;\n        proxy_connect_timeout 10;\n        proxy_read_timeout 10;\n        proxy_pass http://localhost:8000/;\n    }\n    # what to serve if upstream is not available or crashes\n    error_page 500 502 503 504 /media/50x.html;\n}\n</code></pre>\n"},{"tags":["django","testing","nosetests","python-mock"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13217990,"title":"Django - how to change FileField upload_to path during testing","body":"<p>I am writing a test case for a Django model with a FileField. I'd like to change the upload path to prevent tests from having side effects on the rest of the system.</p>\n\n<p>I have tried passing a callable to upload_to and patching that in tests:</p>\n\n<pre><code>#models.py\nupload_path = lambda x, y: 'files'\nclass Model(models.Model):\n    file = models.FileField(upload_to=upload_path)\n\n#tests.py\ntest_path = mock.Mock()\ntest_path.return_value = 'files/test'\n@mock.patch('models.upload_path', new=test_path)\nclass ModelTest(object):\n    ...\n</code></pre>\n\n<p>However this doesn't seem to work, and I believe the reason is that upload_path is dereferenced by FileField before any test code gets run, so it's too late to patch things.</p>\n\n<p>How can I have test code change what upload_to is? Failing that, how can a model check if it's being run by a test?</p>\n"},{"tags":["django","django-forms","django-templates","django-views"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13218894,"title":"use request.POST without knowing the name and number of inputs","body":"<p>Is there a way that become aware of name and value of inputs in request.POST?\nI know i can access the value of inputs by knowing name of them like this:</p>\n\n<pre><code>name = request.POST['inputName']\n</code></pre>\n\n<p>but if i don't know how many inputs and with what names they are, what can i do? is there a way to loop through request.POST?\n(i create my html with xsl, and because i'm creating html by parsing xml file, the number and nmame of inputs are variable. so i have to use this way)\nreally thanks for your help :)</p>\n"},{"tags":["python","django","django-models","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13217209,"title":"Nested fieldsets in django admin page","body":"<p>Trying to understand Django Admin a bit better, but facing a problem when placing nested fieldsets in django admin</p>\n\n<p>I want to group my model fields as shown in below image.</p>\n\n<p>I tried using this code, but no success.</p>\n\n<pre><code>    class ContactAdmin(admin.ModelAdmin):\n        fieldsets = (\n                     (\"Main Info\", {'fields': (\"user\", \"website\")}),\n                     (\"Phones\", {'fields': (\n                          (\"Primary\", {'fields': ((\"primary_phone_country\", \"primary_phone_area\", \"primary_phone_number\"),)}),\n                          (\"Secondary\", {'fields': ((\"secondary_phone_country\", \"secondary_phone_area\", \"secondary_phone_number\"),)}),\n    )}),\n)\n\n    admin.site.register(Contact, ContactAdmin)\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/WufeJ.png\" alt=\"enter image description here\"></p>\n\n<p>Any Solutions to solve the above issue?</p>\n"},{"tags":["python","django","windows"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13218213,"title":"Django tutorial setting the correct path variable","body":"<p>I am having trouble with the tutorial, I am stuck here <code>django-admin.py startproject mysite</code>\nIn the shell I get an error <code>django-admin.py Command no found</code></p>\n\n<p>I believe I have set the correct path variables?  Here is what I have done in the shell:</p>\n\n<p>First I typed in  <code>$ python</code></p>\n\n<p>from there python booted up and I got the <code>&gt;&gt;&gt;</code>\nso I typed <code>import django</code> and then <code>django.get_version()</code> and everything works\nand I see <code>1.4.2</code></p>\n\n<p>Next I exited python and tried to set up the test site from the tutorial.</p>\n\n<pre><code>$ django-admin.py startproject mysite\n</code></pre>\n\n<p>I get the same error.</p>\n\n<pre><code>django-admin.py Command no found\n</code></pre>\n\n<p>Where am I going wrong?  Do I need to set the path for django as well?</p>\n\n<p>Thanks for your help I tried to be as descriptive as possible.</p>\n"},{"tags":["django","django-forms","django-modelformsets"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1216,"score":1,"question_id":4832672,"title":"django inline formsets with a complex model for the nested form","body":"<p>Say I have django model that looks something like this:</p>\n\n<pre><code>class Order(models.Model):\n number = models...\n date = models...\n\nclass OrderLine(models.Model):\n # One or more lines per order\n order = models.ForeginKey(Order)\n common_line = models.OneToOneField(CommonLine)\n\nclass CommonLine(models.Model):\n # common elements of what might be on a line item...\n taxes = model...\n amount = model...\n</code></pre>\n\n<p>I want to create a form that uses an inlineformset to edit one or more Lines (both OrderLine and CommonLine) per order.</p>\n\n<p>I can create a formset that works with Order and OrderLine - but how do I get the inline formset to give me all the detailed items from the CommonLine class when displaying the formset.  It seems the documentation on inline formsets requires that the inline form - the multiple lines on an order can only map to a single class...</p>\n\n<p>Am I not seeing something in the documentation?  I'm sure I can probably override something, I'm just not sure where.</p>\n\n<p>Thanks for any help...</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2507,"score":2,"question_id":2279917,"title":"django test client trouble","body":"<p>I've got a problem... we're writing project using django, and i'm trying to use django.test.client with nose test-framework for tests.</p>\n\n<p>Our code is like this:</p>\n\n<pre><code>from simplejson import loads\nfrom urlparse import urljoin\n\nfrom django.test.client import Client\n\nTEST_URL = \"http://smakly.localhost:9090/\"\n\ndef test_register():\n\n    cln = Client()\n\n    ref_data = {\"email\": \"unique@mail.com\", \"name\": \"Василий\", \"website\": \"http://hot.bear.com\", \"xhr\": \"true\"}\n\n    print urljoin(TEST_URL, \"/accounts/register/\")\n    response = loads(cln.post(urljoin(TEST_URL, \"/accounts/register/\"), ref_data))\n\n    print response[\"message\"]\n</code></pre>\n\n<p>and in nose output I catch:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/home/psih/work/svn/smakly/eggs/nose-0.11.1-py2.6.egg/nose/case.py\", line 183, in runTest\n    self.test(*self.arg)\n  File \"/home/psih/work/svn/smakly/src/smakly.tests/smakly/tests/frontend/test_profile.py\", line 25, in test_register\n    response = loads(cln.post(urljoin(TEST_URL, \"/accounts/register/\"), ref_data))\n  File \"/home/psih/work/svn/smakly/parts/django/django/test/client.py\", line 313, in post\n    response = self.request(**r)\n  File \"/home/psih/work/svn/smakly/parts/django/django/test/client.py\", line 225, in request\n    response = self.handler(environ)\n  File \"/home/psih/work/svn/smakly/parts/django/django/test/client.py\", line 69, in __call__\n    response = self.get_response(request)\n  File \"/home/psih/work/svn/smakly/parts/django/django/core/handlers/base.py\", line 78, in get_response\n    urlconf = getattr(request, \"urlconf\", settings.ROOT_URLCONF)\n  File \"/home/psih/work/svn/smakly/parts/django/django/utils/functional.py\", line 273, in __getattr__\n    return getattr(self._wrapped, name)\nAttributeError: 'Settings' object has no attribute 'ROOT_URLCONF'\n</code></pre>\n\n<p>My settings.py file does have this attribute.</p>\n\n<p>If I get the data from the server with standard <code>urllib2.urllopen().read()</code> it works in the proper way.</p>\n\n<p>Any ideas how I can solve this case?</p>\n"},{"tags":["javascript","html","django","wysiwyg","richtexteditor"],"answer_count":7,"favorite_count":6,"up_vote_count":6,"down_vote_count":0,"view_count":2287,"score":6,"question_id":4674609,"title":"Looking for a Rich Text Editor that is simple","body":"<p>I need a Rich Text Editor, if that is the right word for some javascript routines that take over a textarea and makes it look like a word processor.  I have looked at TinyMCE, CKE, and Whizzywig.  Perhaps I missed something or am doing something wrong but I can't seem to get them to do what I need.</p>\n\n<p>I need a very small set of buttons: I want the html output to have these tags: em, code, ul, link (in addition to p tags from when a user hits enter).  I can't see that TinyMCE and CKE have all those tags as options, but I'd appreciate being corrected if I am wrong. </p>\n\n<p>The Whizzywig editor can be made to have those tags but it seems not to be robust across a number of browsers.  (I'm afraid that I don't know enough javascript to hope to debug.)</p>\n\n<p>This is for a free software archive site, so I can't pay.  I use Django to deliver the pages and jQuery for some effects, if that matters.</p>\n\n<p>I wonder if anyone knows of one that could work?  I'd be very grateful.</p>\n\n<p>Thanks,\nJim</p>\n"},{"tags":["python","django","heroku","amazon-s3","user"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13214507,"title":"Upload Media from Heroku to Amazon S3","body":"<p>New to Heroku &amp; Amazon S3, so bear with me. Uploaded my Django app onto Heroku, and having a problem with user media uploads. The model is below:</p>\n\n<pre><code>#models.py\nclass Movie(models.Model):\n    title           = models.CharField(max_length = 500)\n    poster          = models.ImageField(upload_to = 'storages.backends.s3boto')\n    pub_date        = models.DateTimeField(auto_now_add = True)\n    author          = models.ForeignKey(User)\n</code></pre>\n\n<p>The poster attribute is the one where the image is uploaded. I had it running fine locally, and now on Heroku there is an error. So I added 'storages.backends.s3boto', as numerous other posts have told me to. (not sure if right).</p>\n\n<p>My Settings.py file looks like this right now, kind of a mess:</p>\n\n<pre><code>#settings.py\nPROJECT_ROOT   = os.path.abspath(os.path.dirname(__file__))\nPROJECT_DIR    = os.path.join(PROJECT_ROOT, '../qanda')\n\nDEFAULT_FILE_STORAGE    = 'storages.backends.s3boto.S3BotoStorage'\nSTATICFILES_STORAGE     = 'storages.backends.s3boto.S3BotoStorage'\n\nAWS_ACCESS_KEY_ID         = '****************'\nAWS_SECRET_ACCESS_KEY     = '************'\nAWS_STORAGE_BUCKET_NAME   = 'mrt-assets'\nAWS_PRELOAD_METADATA      = True\n\nMEDIA_ROOT = os.path.join(PROJECT_ROOT, 'qanda/media/movie_posters/)\nMEDIA_URL = '/media'\nSTATIC_ROOT = os.path.join(PROJECT_ROOT, 'staticfiles')\nSTATIC_URL = 'https://mrt-assets.s3.amazonaws.com/static/'\nSTATICFILES_DIRS = (os.path.join(PROJECT_DIR, 'static'),)\n</code></pre>\n\n<p>My bucket is called mrt-assets, and there are 2 folders in there static (css, js, images and media. I'm not too worried about the static files for now, as I've hardcoded the CSS/JS files into my HTML files*, but how do I get my user uploaded media (images of any kind) into mrt-assets/media?</p>\n\n<p>*although if someone wanted to help with STATIC files too that would be great. But user uploaded media more urgent.</p>\n\n<p>EDIT (per Yuji's comment):</p>\n\n<p>Have tried a number of options, and none of them working. I've gone back and deleted a lot of changes, and this is now my Settings</p>\n\n<pre><code>#settings.py\nPROJECT_ROOT = os.path.abspath(os.path.dirname(__file__))\nMEDIA_ROOT = 'http://s3.amazonaws.com/mrt-assets/media/'\nMEDIA_URL = '/media/'\nSTATIC_ROOT = 'http://s3.amazonaws.com/mrt-assets/static/'\nSTATIC_URL = '/static/'\nADMIN_MEDIA_PREFIX = STATIC_URL + 'admin/'\nTEMPLATE_DIRS = (os.path.join(PROJECT_ROOT, \"templates\"),)\n\n#models.py\n#same as before, but now have changed the poster directory\nposter = models.ImageField().\n</code></pre>\n\n<p>Not really sure what to do, need to connect my Heroku app to S3 so user media uploads are saved there. </p>\n\n<p>Have now changed my S3 Bucket to this</p>\n\n<pre><code>mrt-assets\n    static\n        css\n        js\n        images\n    media\n        (empty)\n</code></pre>\n"},{"tags":["python","django","django-models"],"answer_count":6,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1096,"score":1,"question_id":4411213,"title":"How can I find the intersection of two Django querysets?","body":"<p>I’ve got a Django model with two custom manager methods. Each returns a different subset of the model’s objects, based on a different property of the object.</p>\n\n<pre><code>class FeatureManager(models.Manager):\n\n    def without_test_cases(self):\n        return self.get_query_set().annotate(num_test_cases=models.Count('testcase_set')).filter(num_test_cases=0)\n\n    def standardised(self):\n        return self.get_query_set().annotate(standardised=Count('documentation_set__standard')).filter(standardised__gt=0)\n</code></pre>\n\n<p>(Both <code>testcase_set</code> and <code>documentation_set</code> refer to <code>ManyToManyField</code>s on other models.)</p>\n\n<p>Is there any way to get a queryset, or just a list of objects, that’s the intersectiond of the querysets returned by each manager method?</p>\n"},{"tags":["python","django","caching","django-admin","django-middleware"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":11692538,"title":"Browser delay with changing content of the page in django admin (caching, python/django)","body":"<p>I have a bit weird problem witch caching on my project in django. </p>\n\n<p>I can edit my page-content in django-admin. When i do that and refresh site - nothing is happening. I have to wait few minutes for changes. Funny thing is that, when i change browser (or computer) - i dont have to wait - the changes are on. Is it the problem of django, browser or what? Is it possible to set setting.py to get changes immediately? </p>\n\n<p>By the way, i have already figured out that when i turn the \n\"django.middleware.cache.FetchFromCacheMiddleware\" off - the problem disapears, but i dont want to turn cache off...</p>\n\n<p>Any ideas? </p>\n"},{"tags":["django","optimization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13214834,"title":"Django pagination without the whole queryset","body":"<p>In Django, I use the paginator like the following:</p>\n\n<p>from django.core.paginator          import Paginator, EmptyPage, PageNotAnInteger</p>\n\n<pre><code>def myView(request):\n    ...\n    paginator = Paginator(Annonce.objects.filter(name=\"huhu\"), 10)\n    paginator._count = s.count()\n    try:\n        annonces = paginator.page(page)\n    except PageNotAnInteger:\n        annonces = paginator.page(1)\n    except EmptyPage:\n        annonces = paginator.page(paginator.num_pages)\n</code></pre>\n\n<p>In the s.search() function I do a query on my postgres db.</p>\n\n<p>It turns out that even if I display 10 items per page, the query is not limited.</p>\n\n<p>I tried to limit the query with a <code>Annonce.objects.filter(name=\"huhu\")[:10]</code> and specifying the count myself. But the paginator doesn't work if I do  so.</p>\n\n<p>Is there a way to optimize this?</p>\n"},{"tags":["python","django","forms","dynamic","wizard"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13206659,"title":"Django Form Wizard For Dynamic Sized Forms","body":"<p>So I have a dynamic form which can have an arbitrary size from one field to 100 or more and I was wondering how it would be possible to use Django's form wizard for that dynamic form. The fields are generated in the __init__ of the form by adding them to the fields dictionary.</p>\n\n<pre><code>class MyDynamicForm(forms.Form):\ndef __init__(self, *args, **kwargs):\n    parent = kwargs.pop('parent')\n    super(MyDynamicForm, self).__init__(*args, *kwargs)\n    # Add each element into self.fields\n    for element in parent.elements:\n        if element.type == TEXT_FIELD:\n           self.fields[element.name] = forms.CharField(widget=forms.Textarea)\n        elif element.type == CHECKBOX_FIELD:\n            self.fields[element.name] = forms.BooleanField()\n        elif element.type == SINGLE_CHOICE_FIELD:\n            self.fields[element.name] = forms.ChoiceField(choices=element.choices.split(','))\n        elif element.type = MULTIPLE_CHOICE_FIELD:\n            self.fields[element.name] = forms.MultipleChoiceField(choices=element.choices.split(','))\n</code></pre>\n\n<p>I assume that I could wrap this form class in a function and only have it return the form class which only creates a portion of the fields by doing <code>for element in parent.elements[start:end]</code> rather than what I'm doing to create each wizard class but I feel like this is not the correct approach. How should I go about this, is there a correct way? Or is it even possible? Thanks!</p>\n"},{"tags":["django","python-2.7"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13213811,"title":"Django Image Resizers","body":"<p>Currently I am working on a project that will have users upload a picture and they should scale down to a width of 210.</p>\n\n<p>What is the best way to do this?</p>\n\n<pre><code>    from django.db import models\n    from django.contrib.auth.models import User\n    from imagekit.models import ImageSpecField\n    from imagekit.processors import ResizeToFill, Adjust\n\n    class Photo(models.Model):\n        photo_title = models.CharField(max_length=255, null=True, blank=True)\n        original = models.ImageField(upload_to='photos/%Y/%m/%d')\n        main_page = ImageSpecField([ResizeToFill(210)], image_field='original', format='JPEG', options={'quality': 100})\n\n        def __unicode__(self):\n            return self.photo_title\n</code></pre>\n\n<p>This does not generate the main_page image and as a result, photo.main_page does not get onto the template.</p>\n"},{"tags":["python","django","csrf"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":4889,"score":4,"question_id":4293905,"title":"Persistent \"CSRF token missing or incorrect.\". Jinja and django-registration setup","body":"<p>I receive this message:</p>\n\n<blockquote>\n  <p>CSRF token missing or incorrect.</p>\n</blockquote>\n\n<p>In most forums, the tell you to get the  {% csrf_token %} in the form, and i do have it. </p>\n\n<p>Also i have in my settings.py:</p>\n\n<pre><code>TEMPLATE_CONTEXT_PROCESSORS = (\n\"django.contrib.auth.context_processors.csrf\",\n\"django.contrib.auth.context_processors.auth\",\n)\n</code></pre>\n\n<p>I am using jinja, which didn't seem to use CSRF, but then i installed django registration and i got lost, since, it seems to be using some other views, that i don't have access to so to say, they are not written by me, and i can't figure out where they are. \"standard auth views\" as they call them. So i am unable to add \"RequestContext\". </p>\n\n<p>Any ideas what's going on and how I can get it going? thanx </p>\n"},{"tags":["python","django","openid"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":2,"view_count":298,"score":2,"question_id":11456220,"title":"Alternatives to Django for Python based Web Development?","body":"<p>I am about to start a new personal web / iphone app project which requries the following:</p>\n\n<ul>\n<li>Storing data on the backend</li>\n<li>authenticating the user via openid</li>\n<li>Generate JSON based APIs for reading and writing data</li>\n</ul>\n\n<p>I normally use Django for all of my projects but thought I would take this opportunity to learn something new. So, are their any Python based web development frameworks that are good alternatives to Django? Ideally ones that are strong on the points listed above?</p>\n\n<p>Bonus points if the framework is:</p>\n\n<ul>\n<li>lightweight</li>\n<li>easy to install, deploy and developwith</li>\n</ul>\n\n<p>Any recommendations?</p>\n"},{"tags":["python","django","url","django-urls"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13212960,"title":"How Do I Handle Ampersands in Django URLs?","body":"<p>I have a Django site that uses item names to create viewer-friendly URLs.  For instance:</p>\n\n<pre><code>/item/DeluxeWidget/\n</code></pre>\n\n<p>I have an item that has an ampersand in the name:</p>\n\n<pre><code>/item/Red &amp; Blue Widget/\n</code></pre>\n\n<p>The ampersand throws things off.  If I use {{ widget.name|fix_ampersands }}, the ampersand will be escaped as <code>&amp;amp;</code> but it still isn't picked up in the URL pattern:</p>\n\n<pre><code>url(r\"^widget/(?P&lt;name&gt;[0-9a-zA-Z&amp;,. -]+)/$\", 'site.views.widget' ),\n</code></pre>\n\n<p>In the view I use the captured name to do</p>\n\n<pre><code>Widget.objects.get(name=name)\n</code></pre>\n\n<p>What's the right combination of escaping, patterns, or filters to handle an ampersand in a URL?  I also expect to run into names with apostrophes in them.  Is there anything I should do to handle those too?</p>\n"},{"tags":["django","heroku","foreman"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":282,"score":1,"question_id":11985082,"title":"unable to run django app using foreman and gunicorn","body":"<p>I am trying to run my django app using gunicorn and foreman. I can successfully run it using <code>python manage.py server</code>. However when running it using forman it fails - </p>\n\n<pre><code>15:32:01 web.1  | started with pid 29188\n15:32:01 web.1  | 2012-08-16 15:32:01 [29191] [INFO] Starting gunicorn 0.14.6\n15:32:01 web.1  | 2012-08-16 15:32:01 [29191] [INFO] Listening at: http://127.0.0.1:8000 (29191)\n15:32:01 web.1  | 2012-08-16 15:32:01 [29191] [INFO] Using worker: sync\n15:32:01 web.1  | 2012-08-16 15:32:01 [29194] [INFO] Booting worker with pid: 29194\n15:32:01 web.1  | 2012-08-16 15:32:01 [29194] [INFO] Worker exiting (pid: 29194)\n15:32:02 web.1  | 2012-08-16 15:32:02 [29191] [INFO] Shutting down: Master\n15:32:02 web.1  | 2012-08-16 15:32:02 [29191] [INFO] Reason: Worker failed to boot.\n15:32:02 web.1  | exited with code 3\n</code></pre>\n\n<p>Below is the contents of the Procfile -</p>\n\n<pre><code>web: gunicorn tms.wsgi\n</code></pre>\n\n<p>I have been following the instructions given on heroku for setting it up. </p>\n"},{"tags":["django","forms","fields","modelform"],"answer_count":1,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13213097,"title":"How to make Django ModelForm only have one field?","body":"<p>I have a class and it's modelForm.</p>\n\n<pre><code>class UserGoal(models.Model):\n    user = models.ForeignKey(User)\n    goal = models.ForeignKey(Goal)\n    deadline = models.DateTimeField(blank=True, null=True)\n    goalETA = models.DateTimeField(blank=True, null=True)\n    def __unicode__(self):\n        return u'%s, %s, %s ' %(self.user, self.goal, self.deadline)\n\nclass partialGoalSetForm(ModelForm):\n    class Meta:\n        model = UserGoal\n        fields = ('deadline', 'goalETA') \n</code></pre>\n\n<p>This code works fine for having just 2 fields (deadline and goalETA) be in the form. However, if I remove one from the list:</p>\n\n<pre><code> fields = ('deadline')\n</code></pre>\n\n<p>Then, I get the following error:</p>\n\n<p>django.core.exceptions.FieldError: Unknown field(s) (a, e, d, i, l, n) specified for UserGoal</p>\n\n<p>It seems to be tokenizing 'deadline' by characters. Very weird.</p>\n\n<p>The solutions I've tried include:</p>\n\n<pre><code> fields = ('deadline')\n\n fields = 'deadline'\n\n field = ('deadline')\n\n field = 'deadline'\n</code></pre>\n\n<p>None of which work. </p>\n\n<p>Any suggestions? Thank you for your help.</p>\n"},{"tags":["python","django"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":520,"score":2,"question_id":7510849,"title":"django how to display users full name in FilteredSelectMultiple","body":"<p>i am trying to use FilteredSelectMultiple widget to display list of users. currently it is displaying only username. I have tried to override the label_from_instance as seen below but it does not seem to work. how can it get to display users full name.</p>\n\n<pre><code>class UserMultipleChoiceField(FilteredSelectMultiple):\n    \"\"\"\n    Custom multiple select Feild with full name\n    \"\"\"                                                                                                                                                                 \n    def label_from_instance(self, obj):\n              return \"%s\" % (obj.get_full_name())\n\nclass TicketForm(forms.Form):\n    cc_to  = forms.ModelMultipleChoiceField(queryset=User.objects.filter(is_active=True).order_by('username'), widget=UserMultipleChoiceField(\"CC TO\", is_stacked=True)\n</code></pre>\n"},{"tags":["django","sqlite","ubuntu","sqlite3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13209209,"title":"python sqlite use in terminal -django","body":"<p>How can I see my databases in SQlite for Django.</p>\n\n<p>I am following the <a href=\"https://docs.djangoproject.com/en/dev/intro/tutorial01/\" rel=\"nofollow\">django tutorial</a> on ubuntu. </p>\n\n<p>Now its working fine except. After running </p>\n\n<pre><code>python manage.py sql polls\n</code></pre>\n\n<p>then</p>\n\n<pre><code>python manage.py syncdb\n</code></pre>\n\n<p>So then I thought I would check out the daabase and tables but this is where the issue is:</p>\n\n<pre><code>sqlite&gt; .databases\nseq  name             file                                                      \n---  ---------------  ----------------------------------------------------------\n0    main                                                                       \n1    temp    \n</code></pre>\n\n<p>There is no mysite database.\nHow can i see the database?</p>\n"},{"tags":["mysql","django","osx"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":31,"score":-1,"question_id":13211164,"title":"Setting up Django and Mysql on Mac os","body":"<p>I know there are tones of questions like that but sadly none of them resolved my problems and as I am new to django I don't know what is wrong.\nSo I installed django and mysql successfully, then the django-mysql package. When try to import the <code>MySQLdb</code> in python (running in the terminal) it works.\nBut my question is: how do you start mysql and create a database? And how to \"link\" it to django?\nI tried running <code>mysql</code> but it doesn't work. So I tried <code>/usr/local/mysql/bin/mysql</code> which throws an error <code>ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)</code>.</p>\n\n<p>What do I have to do?</p>\n"},{"tags":["mysql","django","satchmo"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13208205,"title":"Migrating a satchmo store from sqlite3 to mysql","body":"<p>I have a fully functional satchmo store running on sqlite3. I need to change to mysql though. Whether I create a new database or port the old database, I get http error 500s in all sorts of places. For example if I have a new db, and I create a user account all seems to be fine. If I then attempt to update the user's profile (which is actually and extended user profile), immediately I get the server 500 error. Its like it just isn't interested in that URL any more (http://127.0.0.1:8000/accounts/update/)</p>\n\n<p>The weird thing is that if I log in as an admin and go to the admin pages, then I can update that user's (extended) profile no problem at all. In fact I've never seen any errors on the admin pages.</p>\n\n<p>Here is how I set it up for mysql:</p>\n\n<pre><code>apt-get install mysql-client  \napt-get install mysql-server  \napt-get install python-mysqldb  \nmysql -u root -p  \n    mysql&gt; USE mysql;  \n    mysql&gt; CREATE DATABASE mystore CHARACTER SET utf8;  \n    mysql&gt; GRANT ALL PRIVILEGES ON mystore.* TO storeuser@localhost IDENTIFIED BY 'secret';  \n    mysql&gt; FLUSH PRIVILEGES;  \n</code></pre>\n\n<p>settings.py:</p>\n\n<pre><code>DATABASE_ENGINE = 'mysql'       \nDATABASE_NAME = 'mystore'\nDATABASE_USER = 'storeuser'\nDATABASE_PASSWORD = 'secret'\nDATABASE_HOST = ''         \nDATABASE_PORT = ''         \nDATABASE_OPTIONS = { \"init_command\": 'SET NAMES \"utf8\"' , \"init_command\":'SET storage_engine=INNODB' , }\n</code></pre>\n\n<p>Then to create a new db I just did ths:</p>\n\n<p>python manage.py syncdb<br>\npython manage.py runserver</p>\n\n<p><strong>Edit 1</strong></p>\n\n<p>Here is the code where it bombs out:</p>\n\n<pre><code>class myExtendedContactInfoForm(ExtendedContactInfoForm):\ndef __init__(self, *args, **kwargs):\n     # The following line is where it produces the error\n    super(myExtendedContactInfoForm, self).__init__(*args, **kwargs)\n</code></pre>\n\n<p><strong>Edit 2</strong></p>\n\n<p>It seems like there is something missing from the db because if I go back to using a sqlite back-end, and then delete the sqlite db (and then run 'python manage.py syncdb') I get exactly the same symptoms. Seems like I need to do something more than just syncdb.</p>\n\n<p>What am I missing here?</p>\n"},{"tags":["python","django","windows","pinax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13211233,"title":"How to change the pinax(0.9a2) template?","body":"<p>I have installed the pinax(0.9a2) with the pinax-bootstrap theme!</p>\n\n<p>Now I want to customize it and redesign the theme, but I didn`t find any *.css files in my template folder. Therefore how to customize the css of the bootstrap theme?</p>\n"},{"tags":["django","tdd","assertions"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13211504,"title":"Django assertEqual does not show actual vs expected values","body":"<p>So I'm learning how to practice TDD in Django  and I'm having some minor trouble. I created a custom user object that links to authenticated system users in a one to one relationship. I have the following test, which exercises part of my custom user class:</p>\n\n<pre><code>def test_creating_a_user_with_attributes(self):\n    myuser = Myuser.objects.create_user('Gary', email='me@email.com')\n    current_time = now()\n    myuser.birthday = current_time\n    myuser.save()\n    first_user = Myuser.objects.all()[0]\n    self.assertEqual(first_user.birthday, current_time, 'first_user.birthday should be equal to the current_time')\n</code></pre>\n\n<p>The problem is that my test was failing and I couldn't immediately see why. The assert failure reported the message I had supplied and I was confused because I was certain that the birthday was set to the value of now. I ended up having to refactor my assert to make the failing value clear.</p>\n\n<pre><code>    self.assertEqual(first_user.birthday, current_time,\n        'first_user.birthday ' + str(first_user.birthday) + ' should equal ' + str(current_time))\n</code></pre>\n\n<p>This revealed that the birthday was a date field and not a datetime field. My question is wether there exists some alternate form of assert that dumps the expected and actual values as part of the failure message or if I am somehow misusing or misunderstanding the API?</p>\n"},{"tags":["django","django-tables2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13211301,"title":"django-tables2 linkColumn external url","body":"<p>I have 2 model attributes - model.name and model.url\nI need to create a linkColumn that column name = model.name and link to the url specified in \nmodel.url</p>\n\n<p>Is it possible to achieve such thing?</p>\n\n<p>thanks</p>\n"},{"tags":["django","deployment","mod-wsgi","django-celery"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":175,"score":2,"question_id":9647200,"title":"Which is the most elegant way to start celeryd in a Django project?","body":"<p>I'm starting out with Celery in my Django project and couldn't help to wonder: which is the most elegant way to start to start Celery's workers for a project?</p>\n\n<p>Let me explain the reasoning to this question.</p>\n\n<p>Currently, the recommended way to start Celery seems to be <code>python manage.py celeryd</code> in simpler setups and something along the lines of <code>/etc/init.d/celeryd start</code> in more complex ones. However, in the first case, this process feels fragile since the process wouldn't start automatically, while the second require quite a bit of project-specific configuration (<code>virtualenv</code>, <code>settings</code> etc.) Especially the latter demonstrates my general feeling that a Celery worker is something deeply tied to the codebase it's part of and it's also deeply tied to the main project process, since a Celery worker without something to actually create tasks in it is practially useless (with one exception being <code>celerybeat</code>). Another problem with <code>init.d</code> scripts is that they'd need some advanced logic for handling several projects per server (with separate virtual environments, settings, paths etc.)</p>\n\n<p>So I figured, it might be quite elegant configuration-wise to start <code>celeryd</code> together with my main process, e.g. spawn it from <code>mod_wsgi</code> withing Apache (similar for other setup options) and thus kill it when the main process goes down (<code>/etc/init.d/apache2 stop</code>). However, I'm not quite sure whether there are any technical traps considering performance and/or security in this reasoning -- it might as well be the case since I've tried googling this and found virtually nothing.</p>\n\n<ol>\n<li>Is my reasoning flawed considering the Celery architecture?</li>\n<li>Can I somehow spawn a <code>celeryd</code> from somewhere within <code>mod_wsgi</code> and is it sensible?</li>\n<li>How do you start Celery workers in your projects?</li>\n</ol>\n"},{"tags":["python","django","django-admin"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13184154,"title":"django admin registering dynamic model from action","body":"<p>I have strange problem. In admin.py I can say:</p>\n\n<pre><code>admin.site.register(MyModel)\n</code></pre>\n\n<p>and this is obviously fine. Now I want this model to be loaded automatically as an result of user action:</p>\n\n<pre><code>def user_action_from_admin_panel(......):\n    .....\n    admin.site.register(MyModel)\n</code></pre>\n\n<p>MyModel class gets on the models list but is black without edit link, any ideas ?</p>\n\n<p><strong>C'MON guys !? Nobody ?</strong></p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13208620,"title":"django join query","body":"<p>Im new to django. I have this model, In tblperson, only the forgein keys of type and status are saved. How do I join all tables to display their value not their forgein key? For example.</p>\n\n<pre><code>TblPerson.objects.raw('SELECT * FROM \"Tblperson\" INNER JOIN \"Tblstatus\" ON (\"TblPerson\".\"Status\" = \"Tblstatus\".\"ID\")'):\n</code></pre>\n\n<p>Thanks. </p>\n\n<pre><code>class TblPerson(models.Model):\n    ID = models.AutoField(primary_key=True, db_column=u'ID') \n    Type = models.IntegerField(null=True, db_column=u'Type', blank=True)\n    Status = models.IntegerField(null=True, db_column=u'Status', blank=True)\n    class Meta:\n        db_table = u'tblPerson'\n\nclass Tblstatus(models.Model):\n    ID = models.AutoField(primary_key=True, db_column=u'statStatusID')\n    Status = models.CharField(max_length=25, db_column=u'statStatus', blank=True)\n    class Meta:\n        db_table = u'tblStatus'\n\nclass Tbltype(models.Model):\n    ID = models.AutoField(primary_key=True, db_column=u'typTypeID')\n    Type = models.CharField(max_length=25, db_column=u'typType', blank=True)\n    class Meta:\n        db_table = u'tblType'\n</code></pre>\n"},{"tags":["django","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13210437,"title":"How to add report section to the Django admin?","body":"<p>I want to implement a report section in Django admin. This would mean adding a custom section in the admin homepage where instead of a list of models I would see a list of reports. I want to use Django's admin tables with filters, sorting, everything if possible.</p>\n\n<p>What would be the \"best\" way of achieving this? I realize this is a \"big\" question so I'm not asking for code snippets necessarily, a summary of needed actions would be just fine :)</p>\n\n<p>P.S. Be report I mean a \"made up\" model by custom queries (queryset or how it's called). </p>\n\n<p>P.S.2 Maybe this question should be something like: How to use Django admin tables functionality in own admin view?</p>\n\n<p>P.S.3 Or maybe there is a way of providing to the existing admin interface my own data. This way I don't have to do anything else. I just want to say instead of a model take this data and display it  in a nice table which I can sort, filter etc etc.</p>\n"},{"tags":["django","django-forms","django-admin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":11680455,"title":"Add a form to admin side","body":"<p>I need to create a form to admin-side with two fields</p>\n\n<ol>\n<li>Number of code: integer</li>\n<li>Value of code: float</li>\n</ol>\n\n<p>How can I do that. This form is not related to any model.</p>\n"},{"tags":["django","django-registration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13207324,"title":"adding two registration forms django-registration","body":"<p>I am using <code>django-registration</code> app. I've two registration form <code>A</code> and <code>B</code>. <code>A</code> has default registration fields. And in <code>B</code> I've added custom fields and a signal. Following signal also execute for both registration form. That's why I added <code>if form.is_valid()</code>. and it sucks. I want to execute only when <code>BForm</code> is called. Is there any alternative? Can anyone help me to improve this code? thanks</p>\n\n<pre><code>class BForm(RegistrationForm):\n    \"\"\"\n    Subclass of ``RegistrationForm``\n    \"\"\"\n    phone = forms.CharField(max_length=100, required=False)\n</code></pre>\n\n<p>Signal</p>\n\n<pre><code>def user_created(sender, user, request, **kwargs):\n    form = BForm(request.POST)\n    if form.is_valid():\n        .....\nuser_registered.connect(user_created)\n</code></pre>\n"},{"tags":["django","debugging","wsgi","gunicorn","pdb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13210715,"title":"Django Gunicorn Debug","body":"<p>Initially I had a Django app with the included testing server. To debug this setup, I can just add a <code>import pdb; pdb.set_trace()</code> anywhere in the code and have a breaking point that throws me into an interactive debugger in Terminal (on command-line). </p>\n\n<p>Recently I shifted to gunicorn to gain some perf benifits. How can I get a similar behavior while using this Gunicorn setup. I have tried by setting gunicorn settings with <code>debug=True</code> and <code>daemon=False</code> but it does not work.</p>\n\n<p>Anyone has a solution to this?</p>\n"},{"tags":["objective-c","django","api","oop","rest"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13190797,"title":"Modeling Object Inheritance in a REST Api","body":"<h1>The problem</h1>\n\n<p>I have an application that has a <code>User</code> object and a <code>Student</code> object. <em>Some</em> users are students. All students are users. In the database (django-ORM based), this is represented as a <code>Student</code> table with a foreign-key to the <code>User</code> table.</p>\n\n<p>I'm trying to create a REST API, and an object hierarchy in the iOS app that models this API. I'm having trouble deciding how to model this.</p>\n\n<h1>The Current Solution</h1>\n\n<p>The best I've come up with is this: Have a <code>User</code> model in iOS, have a <code>Student</code> model in iOS which inherits from <code>User</code> and extends it with more properties. Then, have a method which receives a JSON response from the server, and creates <em>either</em> a <code>User</code> or a <code>Student</code> model, depending on the dictinoary.</p>\n\n<p>Finally, the server will need to always give me the most specific type. I.e., when I log in to the server, it will decide whether I'm a student or just a regular user, and will return me the proper dictionary.</p>\n\n<h1>Is this the best way?</h1>\n\n<p>This sounds a little complicated. But any other way I've thought of modeling it, e.g. changing the way the database is laid out, gives me a design in which the database isn't aware of all the constraints. For example, <code>Student</code> objects are allowed to own other objects (e..g, <code>homework_paper</code>). I can model this with a foreign key to a <code>User</code> object instead of to the <code>Student</code> object, and say that the <code>Student</code> is simply an extension of the user. But then the database doesn't force the fact that a <code>homework_paper</code> has to be owned by a student. </p>\n\n<p>Is there a better way to solve this problem that I'm missing?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13096539,"title":"django-schedule project_sample error","body":"<p>There is this library that I would like to get familiar with called django-schedule, there is a project sample they say is up and running, the thing is it's not currently updated to django  1.4 but there is a fork with a pull request that updates it <a href=\"https://github.com/Natim/django-schedule\" rel=\"nofollow\">https://github.com/Natim/django-schedule</a></p>\n\n<p>But when running it i get an error that i think is this</p>\n\n<pre><code>(r'^schedule/', include('schedule.urls')), \n</code></pre>\n\n<p>I installed the with setup.py what do you think i have to do to get this up and running?</p>\n\n<pre><code>Environment:\n\n\nRequest Method: GET\nRequest URL: http://127.0.0.1:8000/\n\nDjango Version: 1.4.2\nPython Version: 2.7.3\nInstalled Applications:\n('django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.sites',\n 'django.contrib.admin',\n 'django.contrib.admindocs',\n 'schedule')\nInstalled Middleware:\n('django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.locale.LocaleMiddleware',\n 'django.middleware.common.CommonMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware')\n\n\nTraceback:\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/handlers/base.py\" in get_response\n  89.                     response = middleware_method(request)\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/middleware/locale.py\" in process_request\n  21.         check_path = self.is_language_prefix_patterns_used()\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/middleware/locale.py\" in is_language_prefix_patterns_used\n  54.         for url_pattern in get_resolver(None).url_patterns:\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/urlresolvers.py\" in url_patterns\n  328.         patterns = getattr(self.urlconf_module, \"urlpatterns\", self.urlconf_module)\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/urlresolvers.py\" in urlconf_module\n  323.             self._urlconf_module = import_module(self.urlconf_name)\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/utils/importlib.py\" in import_module\n  35.     __import__(name)\nFile \"/home/brian/code/django-schedule/project_sample/../project_sample/urls.py\" in &lt;module&gt;\n  10.     (r'^schedule/', include('schedule.urls')),\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/conf/urls/__init__.py\" in include\n  24.         urlconf_module = import_module(urlconf_module)\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/utils/importlib.py\" in import_module\n  35.     __import__(name)\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/django_schedule-0.5b-py2.7.egg/schedule/urls.py\" in &lt;module&gt;\n  4. from schedule.feeds import UpcomingEventsFeed\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/django_schedule-0.5b-py2.7.egg/schedule/feeds/__init__.py\" in &lt;module&gt;\n  2. from django.contrib.syndication.feeds import FeedDoesNotExist\n\nException Type: ImportError at /\nException Value: No module named feeds\n</code></pre>\n"},{"tags":["django","django-admin"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":17,"score":0,"question_id":13209794,"title":"How to add custom section to admin/auth/user/(x) page?","body":"<p>I'm not talking about just custom fields to the form or static data, I'm talking about adding a section which actually has it's own code. Kind of a new entry in the fieldset but which introduces not a new field but some small reports on the users's activity.</p>\n\n<p>Actually this questions stands for any model's change page. The Django docs show you how to overwrite the template for this page but what good is that without adding some python code also? </p>\n"},{"tags":["python","django","unit-testing","self"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":58,"score":4,"question_id":13210072,"title":"When I create a test method in Django, what exactly is 'self' referring to?","body":"<p>My understanding of 'self' is that it means something like \"an instance of the class which contains this method\". Thus, when the default django test reads:</p>\n\n<pre><code>class SimpleTest(TestCase):\n    def test_basic_addition(self):\n</code></pre>\n\n<p>we are in some sense passing to test_basic_addition an instance of SimpleTest, to which at some point the actions defined in the setUp method (if any) have been applied. Presumably <code>manage.py test</code> creates this instance somehow, but I don't really understand what it is! What's really going on here?</p>\n"},{"tags":["django","sql-server-2008","django-mssql","django-pyodbc"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13210013,"title":"How can I connect to SQL Server 2008 R2 with django-mssql (or anything else)?","body":"<p>I've been trying walk through the django tutorial for the last few days (I'd really like to learn django), but I cannot get django to connect with sql server 2008 r2. I have administrative privileges on our server and on sql server. I initially tried with a linux box via pyodbc (but could not even connect with SQLAlchemy, which I can use on my personal computer), but now I have constructed a virtual windows box with windows server 2008 sp2 because I thought I might have more luck with django-mssql. I've tried both django-pyodbc and django-mssql on the windows box but have not yet succeeded. Here are my db settings:</p>\n\n<pre><code>DATABASES = {\n    'default': {\n        'ENGINE': 'sqlserver_ado',  # Have also tried sql_server.pyodbc\n        'NAME': 'TMSEPLAY',                      \n        'USER': '***', # Omitted for post\n        'PASSWORD': '*******', # Omitted for post\n        'HOST': '172.16.1.14',                      \n        'PORT': '1434',                   \n        'OPTIONS': {\n            'provider': 'SQLCLI10', # Have also tried 'SQLCLI11' and 'SQLOLEDB'\n            'extra_params': 'DataTypeCompatibility=80'\n            }\n    }\n}\n</code></pre>\n\n<p>The error I get:</p>\n\n<pre><code>C:\\Python27\\CourseData\\mysite&gt;manage.py syncdb\nTraceback (most recent call last):\n  File \"C:\\Python27\\CourseData\\mysite\\manage.py\", line 10, in &lt;module&gt;\n    execute_from_command_line(sys.argv)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line\n443, in execute_from_command_line\n    utility.execute()\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line\n382, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\base.py\", line 196,\n in run_from_argv\n    self.execute(*args, **options.__dict__)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\base.py\", line 232,\n in execute\n    output = self.handle(*args, **options)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\base.py\", line 371,\n in handle\n    return self.handle_noargs(**options)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\commands\\syncdb.py\"\n, line 57, in handle_noargs\n    cursor = connection.cursor()\n  File \"C:\\Python27\\lib\\site-packages\\django\\db\\backends\\__init__.py\", line 306,\n in cursor\n    cursor = self.make_debug_cursor(self._cursor())\n  File \"C:\\Python27\\lib\\site-packages\\sqlserver_ado\\base.py\", line 193, in _curs\nor\n    self.__connect()\n  File \"C:\\Python27\\lib\\site-packages\\sqlserver_ado\\base.py\", line 168, in __con\nnect\n    use_transactions=self.use_transactions,\n  File \"C:\\Python27\\lib\\site-packages\\sqlserver_ado\\dbapi.py\", line 151, in conn\nect\n    raise OperationalError(e, \"Error opening connection: \" + connection_string)\nsqlserver_ado.dbapi.OperationalError: (com_error(-2147352567, 'Exception occurre\nd.', (0, u'ADODB.Connection', u'Provider cannot be found. It may not be properly\n installed.', u'C:\\\\Windows\\\\HELP\\\\ADO270.CHM', 1240655, -2146824582), None), 'E\nrror opening connection: DATA SOURCE=172.16.1.14,1434;Network Library=DBMSSOCN;I\nnitial Catalog=TMSEPLAY;UID=***;PWD=********;PROVIDER=SQLCLI10;MARS Connection=Tr\nue;DataTypeCompatibility=80;MARS Connection=True')\n</code></pre>\n\n<p>I'd appreciate any insight at all! I feel like I've searched the web twice over!</p>\n\n<p>Thanks so much!</p>\n"},{"tags":["python","django","django-templates","django-template-tags"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13207710,"title":"How can I \"ignore\" NoReverseMatch in Django template?","body":"<p><strong>Is there any way to disable throwing <code>NoReverseMatch</code> exceptions from <code>url</code> tags in Django templates (just make it silently fail, return an empty string or smth... temporarily, for development, of course)?</strong></p>\n\n<p>(I'm working on a Django project that is kind of a mess as far as things are organized (bunch of remote-workers, contractors plus the local team with lots of overlapping tasks assigned to different people and even front-end and back-end work tends to get mixed as part of the same task...) and <em>I really need to just ignore/hide/disable the <code>NoReverseMatch</code> thrown by template <code>url</code> tags in order to efficiently do my part of the job and not end up doing other peoples' jobs in order to be able to do mine...</em>)</p>\n"},{"tags":["python","django","windows","pil","virtualenv"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13205190,"title":"PIP/easy_install PIL in Virtualenv vcvarsall.bat error Windows 7","body":"<p>So I know there's a fair amount of documentation on this already, but I just can't seem to get it to work. I'm deploying a Django app to Heroku, and am trying to install PIL into my virtualenv (a main part of the app requires user uploaded images).</p>\n\n<p>I've tried both</p>\n\n<pre><code>easy_install PIL\n</code></pre>\n\n<p>and</p>\n\n<p>pip install PIL</p>\n\n<p>and everyone the installation ends in</p>\n\n<pre><code>error: Unable to find vcvarsall.bat.\n</code></pre>\n\n<p>How can I get PIL into my virtualenv? Can anyone walk me through it?</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","django","transactions","django-admin"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":13209243,"title":"can this variable really be \"referenced before assignment\"","body":"<p>I have piece of code below (belongs to a Django admin view, slightly modified). My IDE (PyCharm) warns me at the last line that <code>Local variable 'ModelForm' might be referenced before assignment</code>.</p>\n\n<p>Now, I don't see how that can ever happen, but when I comment out line 6:</p>\n\n<pre><code>with transaction.commit_manually():\n</code></pre>\n\n<p>than the warning disappears.</p>\n\n<p>Now, am I missing something or is PyCharm missing something?</p>\n\n<p>Here is the chunk of code. I striped it down to just a few lines and it still gives the warning. The original chunk of code is here (70 lines): <a href=\"http://pastebin.com/4UT9hRPb\" rel=\"nofollow\">http://pastebin.com/4UT9hRPb</a></p>\n\n<pre><code>    ModelForm = self.get_form(request, obj, form=form)\n\n    formsets = []\n    if request.method == 'POST':\n        # commit only when all forms are valid\n        with transaction.commit_manually():\n            try:\n                objects = queryset.all()\n                transaction.commit()\n                return self.response_change(request, new_object)\n\n            finally:\n                general_error = unicode(sys.exc_info()[1])\n                transaction.rollback()\n\n    form = ModelForm()\n</code></pre>\n"},{"tags":["django","twitter-bootstrap","font-awesome","django-ratings"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":119,"score":1,"question_id":12762995,"title":"How to use Star rating of Font-awesome with Django?","body":"<p><a href=\"http://fortawesome.github.com/Font-Awesome/\" rel=\"nofollow\">Fontawesome</a> has a great star rating css extension, which looks really awesome.  </p>\n\n<p>However clicking on any of the span elements wouldn't really do anything.  I don't know how to hook this up with my database model. Lets say I have an integer field of 0-5 in Django. How could I set the value according to the user's selection within the template?</p>\n\n<p><img src=\"http://i.stack.imgur.com/EYQCo.png\" alt=\"enter image description here\"></p>\n\n<pre><code>&lt;span class=\"rating\"&gt;\n  &lt;span class=\"star\"&gt;&lt;/span&gt;\n  &lt;span class=\"star\"&gt;&lt;/span&gt;\n  &lt;span class=\"star\"&gt;&lt;/span&gt;\n  &lt;span class=\"star\"&gt;&lt;/span&gt;\n  &lt;span class=\"star\"&gt;&lt;/span&gt;\n&lt;/span&gt;\n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I have now installed django-ratings. At first it sounded like the solution to my problem, but I have a bit of difficulty to get it up and running and the documentation doesn't really show a tutotial.</p>\n\n<p>I have added one field to my model:</p>\n\n<pre><code>class Contact(models.Model):\n    important_client = RatingField(range=3, can_change_vote=True, allow_delete = True, allow_anonymous = False)\n</code></pre>\n\n<p>Unless I am mistaken but by the look of it there is no way to implement that as part of the ModelForm and enter the rating within the form.  So all I did was:</p>\n\n<pre><code>class ContactsForm(ModelForm):\n    class Meta:\n        model = Contact\n</code></pre>\n\n<p>And in my template, I have added </p>\n\n<pre><code>{% load ratings %}\n{% rating_by_request request on item.important_client as vote %}\n{{vote}}\n</code></pre>\n\n<p>I was expecting to have at least 3 empty stars rendered but nothing shows up. </p>\n"},{"tags":["python","django","pickle"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":649,"score":4,"question_id":3103638,"title":"Pickling Django request objects","body":"<p>I'm trying to pickle a request object so that I can run my view code in a debugger with valid input. However, I'm getting</p>\n\n<pre><code>Can't pickle 'lock' object: &lt;thread.lock object at 0x93ad240&gt;\n</code></pre>\n\n<p>I looked through the request object, but couldn't find a thread.lock object anywhere in it. Does anyone know where it is? Is there a better way to go about this?</p>\n"},{"tags":["django","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13208529,"title":"Django - form validation","body":"<p>Suppose I have a class with two fields and both fields are blank, but i want at least one field to be filled.</p>\n\n<pre><code>class MyClass(models.Model):\n   url1 = models.URLField(blank=True)\n   url2 = models.URLField(blank=True)\n\n   def clean(self):\n      if not self.url1 and not self.url2:\n      raise forms.ValidationError('message here')\n      return self.url1\n</code></pre>\n\n<p>I think because I set the two fields to blank=True.\nDon't know if using clean() here is true or not and also what to return from it.</p>\n\n<p>Nothing showing in {{form.non_field_errors}}</p>\n\n<p>Thanks</p>\n"},{"tags":["django","django-admin","readonly"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":690,"score":3,"question_id":8265328,"title":"Readonly models in Django admin interface?","body":"<p>How can I make a model completely read-only in the admin interface? It's for a kind of log table, where I'm using the admin features to search, sort, filter etc, but there is no need to modify the log.</p>\n\n<p>In case this looks like a duplicate, here's <em>not</em> what I'm trying to do:</p>\n\n<ul>\n<li>I'm not looking for readonly <em>fields</em> (even making every field readonly would still let you create new records)</li>\n<li>I'm not looking to create a readonly <em>user</em>: every user should be readonly.</li>\n</ul>\n"},{"tags":["python","django","django-models","django-admin"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1133,"score":2,"question_id":7296848,"title":"Django: Foreign Key relation with User Table does not validate","body":"<p>Consider the following django model</p>\n\n<pre><code>from django.db import models                                                                                                                             \nfrom django.contrib import auth\nclass Topic(models.Model):\n   user = models.ForeignKey('auth.models.User')                                                                                                          \n   name = models.CharField(max_length = NameMaxLength , unique = True)\n   version_number = models.IntegerField(default = 0)\n   created_at = models.DateTimeField(auto_now_add  = True)\n   modified_at = models.DateTimeField(auto_now = True)\n   update_frequency = models.IntegerField()\n</code></pre>\n\n<p>This model does not validate even after installing the <code>auth_user</code> table.</p>\n\n<pre><code>In [3]: auth.models.User.objects.all()\nOut[3]: [&lt;User: admin&gt;]\n</code></pre>\n\n<p>The above statement is from django-admin shell</p>\n\n<pre><code>$ python manage.py syncdb\nError: One or more models did not validate:\ntopic: 'user' has a relation with model auth.models.User, which has either not\nbeen installed or is abstract.\n</code></pre>\n\n<p>I am using django v1.0.4 with pinax 0.7.2 on ubuntu 11.04 , with sqlite3 database</p>\n\n<p>The following Questions did not help much:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/3183757/foreign-key-to-user-table-in-django\">Foreign key to User table in django</a></li>\n<li><a href=\"http://stackoverflow.com/questions/2244573/how-do-i-create-a-foreign-key-to-the-user-table-in-django\">How do I create a foreign key to the User table in Django?</a></li>\n</ul>\n"},{"tags":["python","django","query","orm","user"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":13207416,"title":"Django : How to filter users with username__iexact by default?","body":"<p>Implementing username case-insensitive :</p>\n\n<p>I want to implicitly imply <code>iexact</code> when querying for <code>user</code> :</p>\n\n<pre><code>user = User.objects.get(username = 'yugal')  # Lowercase\nuser.id # 1\n\nuser = User.objects.get(username = 'YUgal')  # Mixcase\nuser.id # 1\n</code></pre>\n\n<p>How can I achieve this ? { somehow with <code>UserManager</code> }</p>\n\n<p><strong>Note:</strong></p>\n\n<ul>\n<li>Also, <code>django.shortcuts.get_object_or_404</code> seems to use it as <code>User.objects.get_query_set().all().get()</code>. How can we make it work ?</li>\n</ul>\n"},{"tags":["python","django","user","operator-overloading","bug"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":85,"score":1,"question_id":13190758,"title":"Django : Case insensitive matching of username from auth user?","body":"<p>Django by-default implements username as case sensitive, now for authentication I have written my own <code>Authentication Backend</code> to handle case insensitive usernames while authentication.</p>\n\n<p>As shown in : <a href=\"http://blog.shopfiber.com/?p=220\" rel=\"nofollow\">http://blog.shopfiber.com/?p=220</a></p>\n\n<p>Now, the problem is :</p>\n\n<p>I have various views and util methods which compares <code>username</code> to some stings.</p>\n\n<p>i.e. </p>\n\n<pre><code>request.user.username == username_from_some_other_system_as_str\n</code></pre>\n\n<p>Now, if username is <code>yugal</code> then:</p>\n\n<pre><code>request.user.username == 'Yugal' # Returns False\n</code></pre>\n\n<p>Now, it should return <code>True</code> [ What I wanted to achieve ]</p>\n\n<p>For that I remember from <code>C++</code> days, <code>Operator Overloading</code>.\nBut I don't think simply doing that for django's <code>auth user</code> would be a good idea, since <code>auth user</code> is tightly bound with <code>django</code>.\nAlso, overloading <code>==</code> will make it case-insensitive for the whole class not just for the <code>username</code> field.</p>\n\n<p>So, how should I go about this <code>username</code> case-insensitivity even when compared throughout.</p>\n\n<p><strong>Note:</strong></p>\n\n<ul>\n<li><p>Creating a <code>get_username</code> method that returns lower-case username always is not possible, since it would require all code to be re-factored to use it. You can do it for your code for once, but not possible if you are using 3rd party django apps.</p></li>\n<li><p>I know <code>user.username.lower() = something.lower()</code> is possible but is bug prone and not the write solution for something so often used in a multi-developer setup.</p></li>\n<li><p>I have used <code>SomeModel.objects.filter(username__iexact=username)</code>, wherever possible. But that still leaves the system vulnerable to a mistake by any of un-aware developer.</p></li>\n</ul>\n\n<p>======================================</p>\n\n<p><strong>Figured out the solution conceptually, but could not make it work ( Help ) :</strong></p>\n\n<pre><code>####### Custom CharField for username case-insensitivity #######\nfrom django.db.models.fields import CharField\nclass iUnicode:\n    def __init__(self, value):\n        self.value = value\n\n    def __eq__(self, other):\n        if isinstance(other, str) or isinstance(other, unicode):\n            return self.value.lower() == other.lower()\n        if isinstance(other, self.__class__):\n            return other == self.value\n\n    def __unicode__(self):\n        return unicode(self.value)\n    def __str__(self):\n        return self.__unicode__()\n\n\nclass UsernameCharField(CharField):\n    def to_python(self, value):  # Its not getting called\n        unicode_val = super(CharField, self).to_python(value)\n        return iUnicode(unicode_val)\n\nif User._meta.local_fields[1].name == 'username':\n    User._meta.local_fields[1] = UsernameCharField(max_length=30)\n    User._meta.local_fields[1].model = User\n################################################################\n</code></pre>\n\n<p>I assume <code>to_python</code> is used to convert the value received from database to <code>unicode</code> in python. But, I guess my <code>to_python</code> is not getting called.</p>\n\n<blockquote>\n  <p>This will also ensure case-insensitivity in 3rd party apps and would not require any re-factoring. It will patch the <code>User</code> at its core. I will be adding this to <code>__init__.py</code> of my first <code>INSTALLED_APP</code></p>\n</blockquote>\n\n<p>What am I doing wrong ?</p>\n"},{"tags":["python","django","openid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13206791,"title":"Openid Failed Temporary failure in name resolution","body":"<p>CentOS-5.5\nweb-server：apache2.2.3\npython version：2.7.3\nDjango_openid_auth-0.4 and python_openid-2.2.5\ni can the login form,but when i submit,error occur\nhere is error：</p>\n\n<blockquote>\n  <p>OpenID failed</p>\n  \n  <p>OpenID discovery error: Error fetching XRDS document:\n  urlopen error [Errno -3] Temporary \n  failure in name resolution></p>\n</blockquote>\n\n<p>please help me！</p>\n"},{"tags":["django","django-templates","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13204967,"title":"What is the right way to organize a Django Project?","body":"<p>I'm new to Django and I'm trying to wrap my head around how these apps are supposed to be organized. I have the following questions:</p>\n\n<ol>\n<li>Are apps like <code>divs</code> that are generated separately?</li>\n<li>Can we have apps within apps?</li>\n<li><p>Can we have apps that when clicked on, change other apps with javascript?</p></li>\n<li><p>Right now I just have one <code>views.py</code> file and it loads all of its content through different function calls.</p>\n\n<p>So right now I'm faced with if I should break up my <code>views.py</code> into smaller apps.\nAm I going about Django the correct way?</p></li>\n<li><p>Are apps defined like the they are in picture below, or are apps supposed to act more like a page?</p></li>\n<li>What if I want a header, breadcrumbs, and footer for all my pages? I'm super confused @.@</li>\n</ol>\n\n<p><img src=\"http://i.stack.imgur.com/ZNhXU.png\" alt=\"enter image description here\"></p>\n"},{"tags":["django","git"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12400077,"title":"How to import a django app from git into an project","body":"<p>I want to include a django app into the project I'm working on. The app is hosted on github ( <a href=\"https://github.com/lmorchard/django-badger\" rel=\"nofollow\">https://github.com/lmorchard/django-badger</a> ). As well as the app's directory containing the goodies, there are some files in the root - README, LICENCE, TODO and setup.py. If I clone the app into my project's root directory, the app folder will be in the correct place, but those root files will be in my project's root. How can I add the app while still tracking the upstream code in github?</p>\n"},{"tags":["python","django","garbage"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13208281,"title":"Django garbage collection on text parsing","body":"<p>I have a model with a plain text field. I overdid the admin form's default clean method so I can parse the text using a script like so:</p>\n\n<pre><code>from myModel import parse_text\n\ndef clean(self):\n    cleaned_data = super(MyModelAdminForm, self).clean()\n    if cleaned_data['parse_text']:\n        parse_text.do_the_magic(cleaned_data['edited_text'], {\n            'name' : self.instance.name,\n            'number' : self.instance.number,\n            'aliases' : self.instance.aliases,\n            'date' : self.instance.date,\n            'is_important' : self.instance.important,\n        })\n    return cleaned_data\n</code></pre>\n\n<p>The parser first splits the text into chunks and then saves them in a model hierarchy. Everything works fine except when for some reason the parser throws an exception. After that it may parse the wrong text (one that has been parsed before) or even try to execute its old code when changes has been made. I thought it may be a problem with the garbage collection so I added nil to all of the global variables in my parse_text.py. Even then this strange behavior occurs. The problem happens both in Debug and Production mode.</p>\n"},{"tags":["django","django-authentication","middleware","django-middleware"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13204367,"title":"'User' Object has no attribude is_authenticated","body":"<p>I've created a User model for my django app</p>\n\n<pre><code>class User(Model):\n    \"\"\"\n    The Authentication model. This contains the user type.  Both Customer and\n    Business models refer back to this model.\n    \"\"\"\n    email = EmailField(unique=True)\n    name = CharField(max_length=50)\n    passwd = CharField(max_length=76)\n    user_type = CharField(max_length=10, choices=USER_TYPES)\n    created_on = DateTimeField(auto_now_add=True)\n    last_login = DateTimeField(auto_now=True)\n\n    def __unicode__(self):\n        return self.email\n\n    def save(self, *args, **kw):\n        # If this is a new account then encrypt the password.\n        # Lets not re-encrypt it everytime we save.\n        if not self.created_on:\n            self.passwd = sha256_crypt.encrypt(self.passwd)\n        super(User, self).save(*args, **kw)\n</code></pre>\n\n<p>I've also created an authentication middleware to use this model.</p>\n\n<pre><code>from accounts.models import User\nfrom passlib.hash import sha256_crypt\n\nclass WaitformeAuthBackend(object):\n    \"\"\"\n    Authentication backend fo waitforme\n    \"\"\"\n\n    def authenticate(self, email=None, password=None):\n        print 'authenticating : ', email\n        try:\n            user = User.objects.get(email=email)\n        except User.DoesNotExist:\n            user = None\n\n        if user and sha256_crypt.verify(password, user.passwd):\n            return user\n        else:\n            return None\n\n    def get_user(self, user_id):\n        try:\n            return User.objects.get(pk=user_id)\n        except User.DoesNotExist:\n            return None\n</code></pre>\n\n<p>I have ammended the settings.py file correctly and if I add some print statements to this backend I can see the user details print out.  I don't recall reading that I need to implement is_authenticated in the django docs.  Am I missing something silly?</p>\n"},{"tags":["django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13194444,"title":"Django startproject fails from django.core import management","body":"<p>I am using a Windows machine. Python is installed in <code>C:\\Python 27</code>. I installed Django on the D drive and ran the setup script - all went fine. I checked if I could import the django module and I could. While the django setup script was running I could see files being copied to the <code>Lib\\site-packages</code> directory of Python and all seemed fine.</p>\n\n<p>However when I try to start a project as follows I get the following errors:</p>\n\n<pre><code>    File \"D:\\Users\\joe\\Django-1.4.2\\Django-1.4.2\\django\\bin\\django-a\ndmin.py\", line 2, in &lt;module&gt;\n    from django.core import management\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line\n8, in &lt;module&gt;\n    from django.core.management.base import BaseCommand, CommandError, handle_de\nfault_options\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\base.py\", line 16,\nin &lt;module&gt;\n    from django.utils.encoding import smart_str\n  File \"C:\\Python27\\lib\\site-packages\\django\\utils\\encoding.py\", line 2, in &lt;mod\nule&gt;\n    import urllib\n  File \"C:\\Python27\\Lib\\urllib.py\", line 26, in &lt;module&gt;\n    import socket\n  File \"C:\\Python27\\Lib\\socket.py\", line 47, in &lt;module&gt;\n    import _socket\nImportError: DLL load failed: The specified module could not be found.\n</code></pre>\n\n<p>It appears to me that the problem is that it's searching in <code>C:/Python27/lib</code> (doesn't exist) rather than <code>C:/Pythonn27/Lib</code> (uppercase L). I check my Path and Python_Path system environment variables and both point to correct path (uppercase L in Lib, a path to lowercase lib is nowhere to be found). I found another Stack Overvflow post which suggested I type the following on the command line:</p>\n\n<pre><code>python\nimport site\nsite.getsitepackages()[1]\n</code></pre>\n\n<p>It returns <code>C:\\\\Python27\\\\lib\\\\site-packages.</code></p>\n\n<p>Where is this coming from?! It's not in my path variables. Has anyone any suggestions?</p>\n\n<p>Thanks in advance.</p>\n"}]}
{"total":41213,"page":5,"pagesize":100,"questions":[{"tags":["django","django-errors"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":3038,"score":2,"question_id":5921148,"title":"Error: No module named messages after installing python-django-debug-toolbar","body":"<p>My Django version is 1.2.5 it runs in Python 2.6.5. I installed debug_toolbar, from Ubuntu Software Center and it's fell down with No module named messages error. With debug_toolbar version of Django - 1.1.1, without debug_toolbar - 1.2.5. When I removed it, Django runs well.  What is wrong with debug_toolbar? How can I fix it?</p>\n\n<p>Before install:</p>\n\n<pre><code>&gt;&gt;&gt; import django\n&gt;&gt;&gt; django.VERSION\n(1, 2, 5, 'final', 0) \n\ni159@i159-desktop:~/djproj/pastebin$ python2.6 manage.py runserver\nValidating models...\n0 errors found\n...\n</code></pre>\n\n<p>After install:</p>\n\n<pre><code>&gt;&gt;&gt; import django\n&gt;&gt;&gt; django.VERSION\n(1, 1, 1, 'final', 0)\n\ni159@i159-desktop:~/djproj/pastebin$ python2.6 manage.py runserver\nError: No module named messages\n</code></pre>\n"},{"tags":["django","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13206676,"title":"How to use django inbuilt forms?","body":"<p>I am trying to use the django inbuilt AuthenticationForm to allow users to login using their email address and password. I have changed the authenticate function to accept both username and email to authenticate users.</p>\n\n<p>This is my code so far:</p>\n\n<pre><code>     def loginuser(request):\n          if request.POST:\n            \"\"\"trying to use AuthenticationForm to login and add validations\"\"\"\n            form = AuthenticationForm(request.POST.get('email'),request.POST.get('password'))\n            user = form.get_user()\n            if user.is_active:\n                login(request,user)\n                render_to_response('main.html',{'user':user})\n            else:\n                HttpResponse('user not active') \n          render_to_response('login.html')   \n</code></pre>\n\n<p>But this is not how the authentication form is used, at least not the correct way.</p>\n"},{"tags":["django","django-forms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13207189,"title":"Django - having trouble saving filtered object","body":"<p>For my first Django project I'm trying to make an app that lets users create lists of media (books, movies, etc.) with various fields describing each object (title, author, etc.), and I'm having trouble figuring out how to get it to save. That is to say that nothing happens when the form is submitted. Can someone tell me what I'm doing wrong? Sorry if this is a bit of a noob question; it seems like I'm missing something really basic here. (I'm using basic HTML forms instead of ModelForms because for some media types I want to ignore certain fields - e.g. \"author\" for movies - but if there is an easy way to do that using ModelForms, I'm all ears.)</p>\n\n<p>from <code>views.py:</code></p>\n\n<pre><code>def editbook(request,list_owner,pk):\n    book_list = Item.objects.all().filter(item_creator=list_owner).filter(category='book').order_by('type','name')  \n    item_to_edit = Item.objects.get(pk=pk)\n    if request.method == 'POST':\n        item_to_edit.save()\n        return render_to_response('books.html', {'booklist': book_list, 'listowner': list_owner}, RequestContext(request))\n    else:\n        form=EditItem()\n        return render_to_response('editbook.html', {'listowner': list_owner, 'item_to_edit': item_to_edit}, RequestContext(request))\n</code></pre>\n\n<p>from models.py:</p>\n\n<pre><code>CATEGORY_CHOICES = (\n    ('book','book'),\n    ('tv','tv'),\n    ('movie','movie'),\n    ('game','game'),\n    ('music','music'),\n)\n\nclass Item(models.Model):\n    item_creator = models.CharField(max_length=30) # user name goes here\n    category = models.CharField(max_length=5, choices=CATEGORY_CHOICES)\n    name = models.CharField(max_length=70)\n    created = models.DateTimeField(auto_now_add=True)\n    modified = models.DateTimeField(auto_now=True)  \n    artist = models.CharField(max_length=70, blank=True)\n    type = models.CharField(max_length=50, blank=True)\n    progress = models.CharField(max_length=10, blank=True)\n    finished = models.BooleanField(default=False)\n    rating = models.IntegerField(default=0, blank=True, null=True)\n    comment = models.CharField(max_length=140, blank=True)\n    def __unicode__(self):\n        return self.name\n</code></pre>\n"},{"tags":["django","django-generic-views","django-class-based-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13199173,"title":"Convert django function generic view into class-based generic view","body":"<p>I've added a \"user\" field to all of my models.  When a user creates an object, I want to attach their ID through a foreign key</p>\n\n<pre><code>user = models.ForeignKey(User)\n</code></pre>\n\n<p>Previously, I was using create_object and update_object.  I believe I need to switch to class-based generic views in order to most easily insert the required user into the record.  But I'm confused on how I institute some of the pre-calculations that were occuring in my previous function before create_object or update_object were called.</p>\n\n<p>I have one function that handles all object editing, whether creating or updating:</p>\n\n<pre><code>@login_required \ndef edit_item(request, modelname, submodelname=None, slug=None, id=None):\n    # Get parameter \"next\" to determine where to send user after object is created or updated\n\n    # Define which template to use\n\n    # Determine whether user is converting an object to another type\n\n    # Determine which form_class to use based on modelname and whether user is converting or not\n\n    # Redirect user if slug and id are not both correct\n\n    # Abort if user hit cancel instead of submit\n\n    # If object exists (slug and id are defined):\n        # Update_object with form_class, object_id, template_name, post_save_redirect, and extra_context\n    # Else\n        # Create_object with form_class, template_name, post_save_redirect, and extra_context\n</code></pre>\n\n<p>Within a class-based generic view, how/where/when do I perform some of these calculations (logic around defining template or form_class based on criteria)?  I'm confused because the docs seem to go straight to the definitions:</p>\n\n<pre><code>class ContactView(FormView):\n    template_name = 'contact.html'\n    form_class = ContactForm\n    success_url = '/thanks/'\n</code></pre>\n\n<p>Could I just throw the logic there?</p>\n\n<pre><code>class ContactView(FormView):\n    A = 1 + 2\n    if A == 3:\n        template_name = 'contact.html'\n    else:\n        template_name = 'contact_two.html'\n    form_class = ContactForm\n    success_url = '/thanks/'\n</code></pre>\n\n<p>And how would/should I alter my logic to divert into using CreateView or UpdateView vs what I've done here in using create_object or update_object in the same function depending on whether slug/id are defined?</p>\n"},{"tags":["django","django-templates"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13207213,"title":"How to use \"{\" character in django template","body":"<p>I know we use {{ }} characters for variables but I want to show my datas between {} characters</p>\n\n<p>I want to show November{12}  like that. So what I did is:</p>\n\n<pre><code>&lt;ul&gt;\n    {% for month in archive %}\n&lt;li&gt;&lt;a href=\"?{{month.date|date:\"Y-m\"}}\"&gt;{{month.date|date:\"F Y\"}}{{{month.count}}}&lt;/a&gt;&lt;/li&gt;\n    {% endfor %}\n&lt;/ul&gt;\n</code></pre>\n\n<p>But I got an error like that:</p>\n\n<p>Could not parse the remainder: '{month.count' from '{month.count'</p>\n\n<p>How to use { character in template? </p>\n"},{"tags":["python","html","django"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":212,"score":1,"question_id":4213884,"title":"Blocking HTML tags in a webpage","body":"<p>So, I have a web 2.0 site I'm building with a lot of user input but as with any web 2.0 site, I'm gonna have trouble with spam. Easiest way in my case as far as I'm aware is to block any HTML tags. Users do not need formatting and I'll use  for fixing spacing.</p>\n\n<p>But I don't think there's any blocking tags, xmb sounds perfect but been depreceated since the 90s so pretty dumb.</p>\n\n<p>Otherwise, what kind of filtering would I need? I see stack overflow allows 'basic' HTML... How do I do it? Block certain tags or allow certain tags, etc. As I said, users shouldn't need any tags.</p>\n\n<p>Edit: using django</p>\n"},{"tags":["django","eclipse","settings","pydev"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":463,"score":1,"question_id":10930919,"title":"Newly created Pydev Django Project does not include initial package with Settings.py etc","body":"<p>When creating Django Pydev projects in Eclipse the default config package is created automatically with the following structure:</p>\n\n<pre><code>MyApp\n    __init__.py\n    settings.py\n    urls.py\n    wsgi.py\nmanage.py\n</code></pre>\n\n<p>Today I created a Django Pydev project and those files and initial package were not created.</p>\n\n<p>I have tried several times to create new Django Pydev projects but the the initial structure is not being created.</p>\n\n<p>This problem only just started happening. I have not had the problem prior to today.</p>\n\n<p>Running this on the command line does work:</p>\n\n<pre><code>django-admin.py startproject mysite\n</code></pre>\n\n<p>The files and project structure are created correctly. So it's just Eclipse and Pydev that fails.</p>\n\n<p>I am using Django 1.4, Pydev 2.5 and Eclipse Indigo 3.7 on Ubuntu 11.1</p>\n"},{"tags":["django","ssl","heroku"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":13,"score":1,"question_id":13206449,"title":"How secure is the Heroku Piggyback SSL","body":"<p>I deployed a Django app on Heroku that exposes an API which I call from an Android app. I wonder now how secure the Heroku Piggyback SSL encryption is. I transmit data that has to be secure in the URL itself.</p>\n\n<p>A request might look like this one</p>\n\n<pre><code>https://myapp.herokuapp.com/api/v1/friends?authToken=xyz\n</code></pre>\n\n<p>Obviously no one should be able to sniff the URL and get the authToken from it. Is that true for the Heroku Piggyback SSL? If yes, is there an advantage of using the SSL Endpoint add-on with my own SSL certificate?</p>\n\n<p>Thanks\nSimon</p>\n"},{"tags":["python","django","mongodb","pyramid"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":165,"score":4,"question_id":13186250,"title":"which python web framework(django or django-norel or pyramid) to use when MongoDB is used as a database","body":"<p>I am using MongoDB as my primary(and only till now) database and because of google and the links it provided me i am confused between Django or Pyramid. </p>\n\n<p>I am comfortable with python but never done web development in python(i have done in PHP). Now because i will be using Mongo so i wont use Django ORM will that take away the ease of development people associate with Django? </p>\n\n<p>I am new to Django(just a few hours) so i am not sure what parts of the framework the ORM affects. </p>\n\n<p>Or should i go with the django fork <a href=\"http://www.allbuttonspressed.com/projects/django-nonrel\" rel=\"nofollow\">django-norel</a> with <a href=\"http://django-mongodb.org/\" rel=\"nofollow\">django mongodb engine</a> (they are not actively maintained though) or should i use Pyramid because i plan to use jinja2 as my template layer so that makes 2 parts of django useless to me.</p>\n\n<p>After removing these batteries from django does it still remain true that it a framework for people with deadlines?</p>\n\n<p>Advice?</p>\n"},{"tags":["django","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13187129,"title":"django field tag label class","body":"<p>Is there a way to apply a class in a form to a {{ field.label_tag }} </p>\n\n<p>I'm using twitter bootstrap and want to add a class to the label tag that field.label_tag</p>\n\n<p>Hopefully there is a way to handle this.  I'm using django widget tweaks to do this for the other half of the form for entering the information.  Just hoping there is something I've missed that will make it this part just as easy.</p>\n"},{"tags":["mysql","django","database-connection"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13204811,"title":"OperationalError, Django Cannot Connect to MySQL Database","body":"<p>I am working a Django tutorial and I want to connect my project to a MySQL database. I did everything as told by the djangoproject tutorial to connect to database. When running <code>python manage.py syncdb</code> , however, I got the \nfollowing error:</p>\n\n<pre><code>_mysql_exceptions.OperationalError: (2003, \"Can't connect to MySQL server on 'localhost' (10061)\") \n</code></pre>\n\n<p>What seems problematic? I have XAMMP downloaded and I have created databases through XAMMP before but I don't know how \nthat affects the connection with Django.</p>\n\n<p>Thanks.</p>\n"},{"tags":["django","django-templates","django-views"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13204319,"title":"include rendered html template in json","body":"<p>I'd like to include my rendered html template into a json object.</p>\n\n<pre><code>def updates(request, game_id, from_staff_comment_id):\n    game = Game.objects.latest()\n    staff_comments = StaffComment.objects.find_by_game_with(game_id, from_staff_comment_id)\n    staff_comments_max = 0\n    if staff_comments:\n        staff_comments_max = staff_comments[0].id\n    game_json = {\n        'home_score': game.home_score,\n        'guest_score': game.guest_score,\n        #'staff_comments': serializers.serialize('json', staff_comments, fields=('time', 'unsername', 'comment')),\n        'staff_comments_html': render_to_string('live_staff_comment.html', {'comments': staff_comments}),\n        'staff_comments_max': staff_comments_max\n    }\n    return HttpResponse(simplejson.dumps(game_json), mimetype='application/json')\n</code></pre>\n\n<p><code>render_to_string()</code> works but the html is escaped so it renders as text when I append it to the browser using javascript.</p>\n\n<p>Can you help me ?</p>\n\n<p>Thanks</p>\n"},{"tags":["python","django","virtualenv","virtualenv-commands"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13202373,"title":"unable to install and use django 1.0 in virtualenv","body":"<p>Hi I am trying to install django 1.0 , I can install latest version of django in virtualenv using <code>pip install django</code> but I don't need it, I just want to install django 1.0 as I have to do some simple work in that.</p>\n\n<p>I have tried following things but at the end it use django1.4 that is installed on my system without any virtualenv, following is what I tried:</p>\n\n<pre><code>-laptop:/var/www/python_virtualenv$ virtualenv newenv\n New python executable in newenv/bin/python\nInstalling   distribute.............................................................................................................................................................................................done.\n</code></pre>\n\n<p>Installing pip...............done.</p>\n\n<p>Then after cd to newenv, activated and installed the django 1.0 that I downloaded using following commands:</p>\n\n<pre><code>hafiz@hafiz-laptop:/var/www/python_virtualenv/newenv$ source bin/acivate\nbash: bin/acivate: No such file or directory\nhafiz@hafiz-laptop:/var/www/python_virtualenv/newenv$ source bin/activate\n(newenv)hafiz@hafiz-laptop:/var/www/python_virtualenv/newenv$ sudo python /home/hafiz/Downloads/Django-1.0.4/setup.py install\nrunning install\nrunning build\nrunning build_py\nrunning build_scripts\nrunning install_lib\nrunning install_scripts\nchanging mode of /usr/local/bin/django-admin.py to 775\nrunning install_data\nrunning install_egg_info\nRemoving /usr/local/lib/python2.7/dist-packages/Django-1.0.4.egg-info\nWriting /usr/local/lib/python2.7/dist-packages/Django-1.0.4.egg-info\n(newenv)hafiz@hafiz-laptop:/var/www/python_virtualenv/newenv$ \n</code></pre>\n\n<p>Then created project using: </p>\n\n<pre><code>(newenv)hafiz@hafiz-laptop:/var/www/python_virtualenv/newenv$ sudo python /usr/local/bin/django-admin.py startproject proj\n</code></pre>\n\n<p>then cd to proj and then started server using:</p>\n\n<pre><code>(newenv)hafiz@hafiz-laptop:/var/www/python_virtualenv/newenv/proj$ sudo python manage.py runserver 0.0.0.0:8080\n  Validating models...\n\n  0 errors found\n  Django version 1.4, using settings 'proj.settings'\n  Development server is running at http://0.0.0.0:8080/\n  Quit the server with CONTROL-C.\n</code></pre>\n\n<p>but as it can be seen , django started is Django version 1.4 using settings 'proj.settings' so what I am doing wrong. I had to do something simple but having this problem, so if some once can understand the problem then please tell.</p>\n\n<p>thanks</p>\n"},{"tags":["python","django","django-admin","sortable"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13171579,"title":"django-admin-sortable NoReverseMatch error on get_do_sorting_url","body":"<p>I'm trying to use <strong>django-admin-sortable</strong> but once I save an object and try to load it in the Admin interface I get a <strong>NoReverseMatch on line 43 of the adminsortable/edit_inline/tabular.html</strong> template. </p>\n\n<p>I really have no clue what I've done wrong.</p>\n\n<p>I'm using <code>Python 2.7</code> and <code>Django 1.4</code>. I installed django-admin-sortable from pip.</p>\n\n<p>Below is stack trace output.</p>\n\n<blockquote>\n  <p>Environment:</p>\n\n<pre><code>Request Method: GET\nRequest URL: http://127.0.0.1:8000/admin/reports/reportsuser/7/\n\nDjango Version: 1.4.2\nPython Version: 2.7.3\nInstalled Applications:\n('django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.sites',\n 'django.contrib.messages',\n 'django.contrib.staticfiles',\n 'django.contrib.admin',\n 'django.contrib.admindocs',\n 'functional_tests',\n 'reports',\n 'adminsortable')\nInstalled Middleware:\n('django.middleware.common.CommonMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware')\n\n\nTemplate error:\nIn template /home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/adminsortable/templates/adminsortable/edit_inline/tabular.html, error at line 43 Reverse for 'reports_do_sorting' with arguments '()' and keyword arguments '{'model_type_id': 44L}' not found.\n   33 :           {% spaceless %}\n\n\n   34 :           {% for fieldset in inline_admin_form %}\n\n\n   35 :             {% for line in fieldset %}\n\n\n   36 :               {% for field in line %}\n\n\n   37 :                 {% if field.is_hidden %} {{ field.field }} {% endif %}\n\n\n   38 :               {% endfor %}\n\n\n   39 :             {% endfor %}\n\n\n   40 :           {% endfor %}\n\n\n   41 :           {% endspaceless %}\n\n\n   42 :           {% if inline_admin_form.original %}\n\n\n   43 :           &lt;input type=\"hidden\" name=\"admin_sorting_url\" value=\" {% get_do_sorting_url inline_admin_form.original %} \" /&gt;\n\n\n   44 :           {% endif %}\n\n\n   45 :         &lt;/td&gt;\n\n\n   46 :         {% for fieldset in inline_admin_form %}\n\n\n   47 :           {% for line in fieldset %}\n\n\n   48 :             {% for field in line %}\n\n\n   49 :               &lt;td class=\"{{ field.field.name }}\"&gt;\n\n\n   50 :               {% if field.is_readonly %}\n\n\n   51 :                   &lt;p&gt;{{ field.contents }}&lt;/p&gt;\n\n\n   52 :               {% else %}\n\n\n   53 :                   {{ field.field.errors.as_ul }}\n\n\nTraceback:\nFile \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/core/handlers/base.py\" in get_response\n  136.                     response = response.render()\nFile \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/response.py\" in render\n  104.             self._set_content(self.rendered_content)\nFile \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/response.py\" in rendered_content\n  81.         content = template.render(context)\nFile \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/base.py\" in render\n  140.             return self._render(context)\nFile \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/base.py\" in _render\n  134.         return self.nodelist.render(context)\nFile \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/base.py\" in render\n  823.                 bit = self.render_node(node, context)\nFile \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/debug.py\" in render_node\n  74.             return node.render(context)\nFile \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/loader_tags.py\"\n</code></pre>\n  \n  <p>in render\n        123.         return compiled_parent._render(context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/base.py\" in _render\n        134.         return self.nodelist.render(context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/base.py\"\n  in render\n        823.                 bit = self.render_node(node, context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/debug.py\" in render_node\n        74.             return node.render(context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/loader_tags.py\" in render\n        123.         return compiled_parent._render(context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/base.py\" in _render\n        134.         return self.nodelist.render(context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/base.py\" in render\n        823.                 bit = self.render_node(node, context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/debug.py\" in render_node\n        74.             return node.render(context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/loader_tags.py\" in render\n        62.             result = block.nodelist.render(context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/base.py\" in render\n        823.                 bit = self.render_node(node, context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/debug.py\" in render_node\n        74.             return node.render(context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/loader_tags.py\" in render\n        62.             result = block.nodelist.render(context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/base.py\" in render\n        823.                 bit = self.render_node(node, context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/debug.py\" in render_node\n        74.             return node.render(context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/defaulttags.py\" in render\n        185.                         nodelist.append(node.render(context))\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/loader_tags.py\" in render\n        166.             return self.render_template(template, context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/loader_tags.py\" in render_template\n        137.         output = template.render(context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/base.py\" in render\n        140.             return self._render(context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/base.py\" in _render\n        134.         return self.nodelist.render(context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/base.py\" in render\n        823.                 bit = self.render_node(node, context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/debug.py\" in render_node\n        74.             return node.render(context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/defaulttags.py\" in render\n        185.                         nodelist.append(node.render(context))\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/defaulttags.py\" in render\n        281.                 return nodelist.render(context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/base.py\" in render\n        823.                 bit = self.render_node(node, context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/debug.py\" in render_node\n        74.             return node.render(context)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/template/base.py\" in render\n        1107.                     return func(*resolved_args, **resolved_kwargs)\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/adminsortable/templatetags/adminsortable_tags.py\" in get_do_sorting_url\n        40.     return reverse('admin:%s_do_sorting' % obj._meta.app_label, kwargs={'model_type_id': obj.model_type_id() })\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/core/urlresolvers.py\" in reverse\n        476.     return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))\n      File \"/home/josh/.virtualenvs/vvreports/local/lib/python2.7/site-packages/django/core/urlresolvers.py\" in _reverse_with_prefix\n        396.                 \"arguments '%s' not found.\" % (lookup_view_s, args, kwargs))</p>\n\n<pre><code>Exception Type: NoReverseMatch at /admin/reports/reportsuser/7/\nException Value: Reverse for 'reports_do_sorting' with arguments '()' and keyword arguments '{'model_type_id': 44L}' not found.\n</code></pre>\n</blockquote>\n"},{"tags":["python","django","google-app-engine","python-2.7"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":73,"score":0,"question_id":13204996,"title":"How to upload webapp to appengine via python?","body":"<p>I have written my webapp in python but I cannot figure out how to upload it to appengine. I'm sort of new to python and making a webapp. I've downloaded appengine but it's not uploading and I can't see a simple html web page. Thanks for your help! </p>\n"},{"tags":["php","javascript","django","web-applications"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":4,"view_count":46,"score":-3,"question_id":13205204,"title":"abandon django project for php?","body":"<p>I dont have any code to display here. I have a project that I was working on, full with user login, profiles, and some model profiles in django/python on a ec2 server. I planned on finishing it myself but I am still a django newbie. I have another project me and a friend want to try out, and want to get it developed for cheap overseas as a prototype. My friend referred me to a company who codes in php and have developed alot of good projects. My question is abandon my django project code to start fresh with php or find a django developer(more money) to develop the prototype. I know everyone says django scales better but I have seen plenty of big site written in php.</p>\n"},{"tags":["python","django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":22,"score":-2,"question_id":13205222,"title":"Drag drop ajax upload to database","body":"<p>I want to know how to create a small FTP site,\nupload a file via drag and drop and upload via ajax to a database and be password protected\nusing python, i Tried <a href=\"http://kuhlit.blogspot.com/2011/04/ajax-file-uploads-and-csrf-in-django-13.html\" rel=\"nofollow\">this one</a> but i want to know how to make each file that gets uploaded file protected with a unique url so that i can give the link and passwerd to someone else?</p>\n"},{"tags":["django","django-models"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":460,"score":3,"question_id":10991460,"title":"Django: Get current user in model save","body":"<p>I want to get current logged in user(request.user) in save method of models.py. I want to check the role of the user and perform some operations based on his role. I have given the models.py code below.</p>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>    class TimeSheet(models.Model):\n        check_in_time   = models.TimeField()\n        check_out_time  = models.TimeField()\n\n    class Tasks(models.Model):\n        time_sheet = models.ForeignKey(TimeSheet)\n        project    = models.ForeignKey(Project)\n        start_time = models.TimeField()\n        end_time   = models.TimeField()\n\n    def save(self, *args, **kwargs):\n        project = SpentTime.objects.get(project__project__id = self.project.id)\n        start   = datetime.datetime.strptime(str(self.start_time), '%H:%M:%S')\n        end     = datetime.datetime.strptime(str(self.end_time), '%H:%M:%S')\n        time    = float(\"{0:.2f}\".format((end - start).seconds/3600.0))\n\n        if common.isDesigner(request.user):\n            SpentTime.objects.filter(project__project__id = self.project.id).update(design = float(project.design) + time)\n\n        if common.isDeveloper(request.user):\n            SpentTime.objects.filter(project__project__id = self.project.id).update(develop = float(project.develop) + time)\n\n        super(Tasks, self).save(*args, **kwargs)\n</code></pre>\n\n<p>Here the <strong>Tasks</strong> model is being used as inline in <strong>Timesheet</strong> model. I want to check the role of current logged in user and update another model based on the user's role. Here I need <strong>request.user</strong> to check role of the current user. I am not using any forms or templates and completely making use of django admin. So is there any method to get <strong>request.user</strong> in models save method or to check and update the values in another model in admin.py. </p>\n\n<p>I have checked most of the similar questions in stackoverflow and none them provide me a perfect solution. So please provide me an answer to fix this. Thanks in advance.</p>\n"},{"tags":["python","django","django-models","django-registration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13202845,"title":"Removing help_text from Django UserCreateForm","body":"<p>Probably a poor question, but I'm using Django's UserCreationForm (slightly modified to include email), and I would like to remove the help_text that Django automatically displays on the HTML page. </p>\n\n<p>On the Register portion of my HTML page, it has the Username, Email, Password1 &amp; Password 2 fields. But underneath Username is \"Required. 30 characters or fewer. Letters, digits, and @... only.\" And under Password Confirmation (Password 2), it says \"Enter the same password as above for verification.\" </p>\n\n<p>How do I remove these?</p>\n\n<pre><code>#models.py\nclass UserCreateForm(UserCreationForm):\n    email = forms.EmailField(required=True)\n\n    def save(self, commit=True):\n        user = super(UserCreateForm, self).save(commit=False)\n        user.email = self.cleaned_data['email']\n        if commit:\n            user.save()\n        return user\n\n    class Meta:\n        model = User\n        fields = (\"username\", \"email\", \"password1\", \"password2\")\n        exclude = ('username.help_text')\n\n#views.py\ndef index(request):\n    r = Movie.objects.all().order_by('-pub_date')\n    form = UserCreateForm()\n    return render_to_response('qanda/index.html', {'latest_movie_list': r, 'form':form},     context_instance = RequestContext(request))\n\n#index.html\n&lt;form action = \"/home/register/\" method = \"post\" id = \"register\"&gt;{% csrf_token %}\n    &lt;h6&gt; Create an account &lt;/h6&gt;\n    {{ form.as_p }}\n    &lt;input type = \"submit\" value = \"Create!\"&gt;\n    &lt;input type = \"hidden\" name = \"next\" value = \"{{ next|escape }}\" /&gt;\n&lt;/form&gt;\n</code></pre>\n"},{"tags":["python","django","django-models"],"answer_count":6,"favorite_count":2,"up_vote_count":5,"down_vote_count":1,"view_count":316,"score":4,"question_id":9791947,"title":"How do I refresh the values on an object in Django?","body":"<p>I have a model object in Django.  One of the methods on the object uses row-level locking to ensure values are accurate, like so:</p>\n\n<pre><code>class Foo(model.Model):\n    counter = models.IntegerField()\n\n    @transaction.commit_on_success\n    def increment(self):\n        x = Foo.objects.raw(\"SELECT * from fooapp_foo WHERE id = %s FOR UPDATE\", [self.id])[0]\n        x.counter += 1\n        x.save()\n</code></pre>\n\n<p>The problem is if you call <code>increment</code> on a foo object, the object's values no longer reflect the values in the database.  I need a way to refresh the values in the object, or at least mark them as stale so they're refetched if necessary.  Apparently, this is functionality the developers of Django <a href=\"https://code.djangoproject.com/ticket/901\">refuse to add</a>.</p>\n\n<p>I tried using the following code:</p>\n\n<pre><code>for field in self.__class__._meta.get_all_field_names():\n    setattr(self, field, getattr(offer, field)) \n</code></pre>\n\n<p>Unfortunately, I have a second model with the following definition:</p>\n\n<pre><code>class Bar(model.Model):\n    foo = models.ForeignKey(Foo)\n</code></pre>\n\n<p>This causes an error, because it shows up in the field listing but you cannot <code>getattr</code> or <code>setattr</code> it.</p>\n\n<p>I have two questions:</p>\n\n<ul>\n<li><p><strong>How can I refresh the values on my object?</strong></p></li>\n<li><p><strong>Do I need to worry about refreshing any objects with references to my object, like foreign keys?</strong></p></li>\n</ul>\n"},{"tags":["python","django","pinax"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":93,"score":2,"question_id":11074461,"title":"'markup_tags' is not a valid tag library","body":"<p>Everytime I add a particular object to my database (this only affects one particular app on my site), I get the TemplateSyntaxError 'markup_tags' is not a valid tag library.</p>\n\n<p>Specifically, it cannot load this: {% load markup_tags %}. But this is strange because when I open a Django shell and <code>import markup</code> all is fine.</p>\n\n<p>This question has been asked before on StackOverflow here: <a href=\"http://stackoverflow.com/questions/6399649/django-markup-templatetags-error/6400140#comment14486841_6400140\">Django markup templatetags error</a></p>\n\n<p>However, I don't understand <em>why</em> this is happening and I don't really understand how to fix it. They said render_to_response the template. But I'm not sure exactly how I would do this from the shell (Django noob here).</p>\n\n<p><img src=\"http://i.stack.imgur.com/pWZj1.png\" alt=\"enter image description here\"></p>\n"},{"tags":["django","postgresql","database-schema","multi-tenant"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13130688,"title":"Authentication will not work on schema other than public","body":"<p>I am trying to implement a multi-tenant application in Django and PostgreSQL, with a separate (but identical) schema for every tenant. </p>\n\n<p>I select the tenant schema with: </p>\n\n<pre><code>cursor.execute('SET search_path TO ' + schemas)\n</code></pre>\n\n<p>And I have a middleware that selects which schema to use based on the hostname, so it would work something like this:</p>\n\n<pre><code>foo.mysite.com --&gt; use schema 'client_moo'\nbar.mysite.com --&gt; use schema 'client_bar'\n</code></pre>\n\n<p>This works in principle, that is in simple cases (simple db lookups)</p>\n\n<p>However, things start to break down when I try to log in. Each tenant should have its own, separate log in page, so <code>foo.mysite.com</code> would be distinct from <code>bar.mysite.com</code> which would be distinct from <code>mysite.com</code>.</p>\n\n<p>However, trying to login into the admin app from a subdomain results in a redirect back to the login page.</p>\n\n<p>Here is what happens:</p>\n\n<ul>\n<li><code>mysite.com</code> logs in fine (schema: <code>public</code>)</li>\n<li><code>foo.mysite.comn</code> instead of logging in will redirect (HTTP 302) back to itself (<code>foo.mysite.com</code>) (schema: <code>client_foo</code>)</li>\n</ul>\n\n<hr>\n\n<p>Forcing the schema to always be <code>client_foo</code> will result in <code>mysite.com</code> working (that is, logging in on the <code>client_foo</code> schema), but <code>foo.mysite.com</code> still not working.</p>\n\n<hr>\n\n<p>Removing schema selection altogether (so that it is always on <code>public</code> schema) will make both URLs log in fine.</p>\n"},{"tags":["django","redis","socket.io","real-time"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13204657,"title":"Redis to Socket.IO","body":"<p>I am making a real-time webapp using Django.  Django does all the heavy lifting.  To make the app real-time, when a change is made in Django, it is published to redis.  I then set up a node.js app that marshals the data from redis to socket.io.</p>\n\n<p>So right now things look like this.</p>\n\n<p><code>Django -&gt; Redis -&gt; Node.js -&gt; Socket.IO -&gt; Browser</code></p>\n\n<p>I'm OK with using redis and think it is great.  I looked into <a href=\"https://github.com/abourget/gevent-socketio\" rel=\"nofollow\">gevent-socketio</a> but it is not what I am looking for.  Is there a way to do:</p>\n\n<p><code>Django -&gt; Redis -&gt; Socket.IO -&gt; Browser</code>?</p>\n"},{"tags":["django","django-templates","django-syndication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13204318,"title":"Standard Location for Django Feed Templates","body":"<p>I've seen Django applications with their feed templates in both <code>templates/feeds/obj_title.html</code> and <code>templates/app_name/feeds/obj_title.html</code>. (I haven't yet seen <code>templates/feeds/app_name/obj_title.html</code>.) Is there a standard template feed location that has been accepted by the majority of the community, or does everyone just put them wherever?</p>\n"},{"tags":["jquery","ajax","django","celery"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13203549,"title":"jQuery AJAX chained calls + Celery in Django","body":"<p>Currently clicking one of the links in my application, triggers AJAX call (GET) that - if succeeds - triggers the second one and this second one - if succeeds - calls the third one.</p>\n\n<p>This way user can be informed which part of process started when clicking the link is currently ongoing.</p>\n\n<p>So in the template file in Django project, click callback body for link mentioned looks like below:</p>\n\n<pre><code>$(\"#the-link\").click(function(item)) {\n    // CALL 1\n    $.ajax({\n        url: {% url ajax_call_1 %},\n        data: {\n            // something\n        }\n    })\n    .done(function(call1Result) {\n\n        // CALL 2\n        $.ajax({\n            url: {% url ajax_call_1 %},\n            data: {\n                // call1Result passed here to CALL 2\n            }\n        })\n        .done(function(call2Result) {\n\n            // CALL 3\n            $.ajax({\n                url: {%url ajax_call_3 %},\n                data: {\n                    // call2Result passed here to CALL 3\n                }\n            })\n            .done(function(call3Result) { // expected result if everything went fine\n                console.log(\"wow, it worked!\");\n                console.log(call3Result);\n            })\n            .fail(function(errorObject) {\n                console.log(\"call3 failed\");\n                console.log(errorObject);\n            }\n        })\n        .fail(function(errorObject)) {\n            console.log(\"call2 failed\");\n            console.log(errorObject);\n        }\n    })\n    .fail(function(errorObject) {\n        console.log(\"call1 failed\");\n        console.log(errorObject);\n    });\n});\n</code></pre>\n\n<p>This works fine for me. The thing is, I'd like to <strong>prevent interrupting</strong> the following calls <strong>if the user closes the browser</strong> and the calls are not finished (as it will take some time to finish all three), as there is some additional logic in Django view functions called in each GET request.</p>\n\n<p>For example, if user clicks the link and closes the browser during CALL 1, is it possible to somehow go on with the following CALL 2 and CALL 3?</p>\n\n<p>I know that normally I'd be able to use Celery Task to process the function but is it still possible here with the chained calls mentioned?</p>\n\n<p>Any help is much appreciated!</p>\n"},{"tags":["django","google-api","google-openid","django-openid-auth","google-oauth"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13197098,"title":"Obtain Google Contacts via OpenID Authentication in Django","body":"<p>I am using the Django package <a href=\"https://launchpad.net/django-openid-auth\" rel=\"nofollow\">django_openid_auth</a> and this <a href=\"http://djangosnippets.org/snippets/2183/\" rel=\"nofollow\">snippet of code</a> to authenticate a user in Django via his OpenID.</p>\n\n<p>This works perfectly. The user is redirected to the Google Accounts page to obtain the permission, then is redirected back.</p>\n\n<p>However, this only servers to obtain the user's email/fist name/last name. If I want to obtain the list of contacts of the user, or even sensible information such as date of birth or avatar, how does that work?</p>\n\n<p>I assume that, since I'm obtaining the email/names via the OpenID AX extension, I can similarly obtain OAuth information using the Ext2 extension?</p>\n\n<p>I know the Google Contacts API needs OAuth authentication. Since I'm signing in with OpenID, is this OAuth authentication included, or must I do it in a new separate process? So in short, is this OpenID authentication including the authentication process for obtaining contacts/account info, or must I authenticate and use a separate process?</p>\n\n<p>The internal mechanics of the OpenID mechanism used are in the <a href=\"https://launchpad.net/django-openid-auth\" rel=\"nofollow\">django_openid_auth</a> module.</p>\n\n<p>Can somebody point me in the right direction? Thank you.</p>\n"},{"tags":["jquery","python","html","django","url"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13203771,"title":"How to render previous page after jQuery post in Django","body":"<p>I'm building a site that connects topics to questions to answers. Each question is associated with a topic, each answer a question, and so on. On the home page, I click on a topic, and it takes me to a dynamic URL based on the topic_id.</p>\n\n<pre><code>url(r'^(?P&lt;topic_id&gt;\\d+)/$', 'questions'),\n</code></pre>\n\n<p>When I add a question, the jQuery lightbox renders this URL in a pop up</p>\n\n<pre><code>url(r'^(?P&lt;topic_id&gt;\\d+)/add_question/$', 'add_question'),\n</code></pre>\n\n<p>Once I submit the question, it goes through add_question.html</p>\n\n<pre><code>#add_question.html    \n&lt;div class=\"questionPopupForm\"&gt;\n    &lt;h5&gt;&lt;div class=\"questionPopupTitle\"&gt; Add Question&lt;/div&gt;&lt;/h5&gt;\n    &lt;form action = \"/home/{{ form.topic.id }}/add_question/\" method = \"post\"&gt;{% csrf_token %}\n        &lt;p&gt;{{ form.as_p }}&lt;/p&gt;\n        &lt;p&gt;&lt;div class=\"addQuestionButton\"&gt;&lt;input type = \"submit\" value = \"Ask Question\"     class=\"btn btn-success\" /&gt;&lt;/div&gt;&lt;/p&gt;\n        &lt;input type = \"hidden\" name = \"next\" value = \"{{ next|escape }}\" /&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Once I Submit, the Action then takes me to /home/{{ form.topic.id }}/add_question, which is the URL above, linking to the add_question view.</p>\n\n<pre><code>#views.py\ndef add_question(request, topic_id):\n    if request.method == \"POST\":\n        form = QuestionForm(request.POST, request.FILES)\n        if form.is_valid():\n            question = form.save(user = request.user)\n            question.topic = Topic.objects.get(pk = topic_id)\n            question.save()\n            return HttpResponseRedirect(\"/home/\")\n    else:\n        form = QuestionForm()\n        form.q_author = request.user\n        form.movie = Topic.objects.get(pk = topic_id)\n    return render_to_response(\"qanda/add_question.html\", {'form': form}, context_instance = RequestContext(request))\n</code></pre>\n\n<p>Now right now, it takes me home with the return HttpResponeRedirect('/home/'). What I would like to do is redirect the user back to the same page, but there is a variable in the URL (/{{ topic.id }}/), but HttpResponseRedirect doesn't let me put a variable into it. How do I get back to the same page?</p>\n"},{"tags":["django","django-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13203714,"title":"Django tests incrementing pk issue","body":"<p>So I have a test class which has a setup methiod to create a model object which can be tested against:</p>\n\n<pre><code>class UserProjectTests(TestCase):\n\n    fixtures = ['admin_test.json']\n\n    def setUp(self):\n        ...\n        self.project1 = Project.objects.create(\n            user=self.user_profile1,\n            product=self.product1,\n            module=self.module1,\n            model=self.model1,\n            zipcode=90210\n        )\n        self.project1.save()\n\n    def test_module_created(self):\n        ...\n\n    def test_model_created(self):\n        ...\n\n    def test_product_created(self):\n        ...\n\n    def test_project_created(self):\n        #! what happened to pk&lt;4???\n        result1 = Project.objects.get(pk=4)\n        self.assertEquals(result1.zipcode, 90210)\n\n    def test_user_cannot_edit_project_they_dont_own(self):\n        ...\n</code></pre>\n\n<p>My question is - why do I have to call <code>pk=4</code> to get the only object in the test db? If I move this test up a couple of functions the pk I have to query to pass the test decreases. It seems that everytime setup runs it does not start with a virgin db because the pk is auto-incrementing.</p>\n\n<p>Can anyone tell me why this is? What should I do to be able to use pk=1 regardless of in which test function it appears?</p>\n"},{"tags":["python","django","eclipse","pinax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13203207,"title":"Where is the official list of differences between pinax 0.9a & 0.7.3","body":"<p>Can anyone point me to the <strong>official</strong> list of differences between pinax 0.9a and 0.7.3 please?</p>\n"},{"tags":["django","web-applications","flask","web-deployment","web.py"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":51,"score":0,"question_id":13168852,"title":"Creating a multiple blogger website: need advice on web framework","body":"<p>I am trying to create a website from scratch. Originally, I hoped to be able to use WordPress. However, I'm not sure that it offers me the flexibility that I want, so I am hoping to put some time in to learn a web framework. </p>\n\n<p>I have done research, and I know that relevant threads exist. However, these threads tend to be over a year old or even older, and the CS world evolves rather quickly. Also, I didn't find threads which encompass my specific parameters.</p>\n\n<p><strong>Parameters:</strong> I would like my website to be a mini-online newspaper where multiple authors can post different blogs and comment on each other's stories. I would only be allowing a handful of people login credentials, and I expect the site to be low traffic.</p>\n\n<p><strong>Options:</strong> I have more of less settled on using either <strong>WEB.PY, DJANGO, or FLASK.</strong></p>\n\n<p>I'm currently vacillating and don't want to waste a lot of time learning a framework if I realize half-way through that I would have rather learned a different one. </p>\n\n<p><strong>Question:</strong> If my priority is speed of implementation, which web framework has a simple enough implementation and documentation for a first time user (I have no experience with web frameworks)? Again, I don't really care about the \"scale-able\" aspect.</p>\n\n<p>Thank you so much, and any and all advice is greatly appreciated.</p>\n\n<p>Also, I am familiar with Python and Html, CSS, &amp; Javascript</p>\n"},{"tags":["django","django-debug-toolbar"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13200700,"title":"Cannot get django-debug-toolbar to work","body":"<p>I have been incorporating advice from various threads on <code>debug-toolbar</code> here, but somehow cannot get it working. Would appreciate some help please.</p>\n\n<ol>\n<li><p>I am not developing locally. The server hosting the code is a WebFaction server and I am testing it from a browser on my local machine. <code>debug-toolbar</code> is installed on the server and I can see it in the server's <code>PYTHONPATH</code>. </p></li>\n<li><p>IP address used is the tuple of (<code>request.HTTP_X_FORWARDED_FOR</code>, <code>request.REMOTE_ADDR</code>)</p></li>\n<li><p>When I use these same debug-toolbar settings in a fresh Django test project on my local machine, it works. </p></li>\n<li><p>One post mentioned that using show_toolbar and returning True voided all the IP address checks. I have tried that too (below) to no avail.</p></li>\n<li><p>(Edit) This works from shell. I can run <code>python manage debugsqlshell</code></p></li>\n</ol>\n\n<p><code>settings.py</code>:</p>\n\n<pre><code>DEBUG = True\n\nMIDDLEWARE_CLASSES = (\n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'debug_toolbar.middleware.DebugToolbarMiddleware',\n)\n\n\nINSTALLED_APPS = (\n    ....\n    'debug_toolbar',   # last in list\n)\n\n# Debug toolbar settings\nINTERNAL_IPS = ('x.x.x.x', 'y.y.y.y') \n# This is IP address from request.HTTP_X_FORWARDED_FOR and request.REMOTE_ADDR that I see when I put an assert 0 in the code.\n# When I got desperate, I also tried adding'127.0.0.1', '10.0.2.2' to no avail\n\n\nDEBUG_TOOLBAR_PANELS = (\n    'debug_toolbar.panels.version.VersionDebugPanel',\n    'debug_toolbar.panels.timer.TimerDebugPanel',\n    'debug_toolbar.panels.settings_vars.SettingsVarsDebugPanel',\n    'debug_toolbar.panels.headers.HeaderDebugPanel',\n    'debug_toolbar.panels.request_vars.RequestVarsDebugPanel',\n    'debug_toolbar.panels.template.TemplateDebugPanel',\n    'debug_toolbar.panels.sql.SQLDebugPanel',\n    'debug_toolbar.panels.signals.SignalDebugPanel',\n    'debug_toolbar.panels.logger.LoggingPanel',\n)\n\n# One post mentioned that using show_toolbar and returning True voided all the IP address checks. Trying it\ndef show_toolbar(request):\n    return True\n\nDEBUG_TOOLBAR_CONFIG = {\n    'INTERCEPT_REDIRECTS': False,\n    'SHOW_TOOLBAR_CALLBACK': show_toolbar,\n    'HIDE_DJANGO_SQL': False,\n    'TAG': 'div',\n}\n</code></pre>\n\n<p><code>page.html</code>:\n    \n        ...\n    </p>\n\n<pre><code>&lt;body id=\"try\"&gt;\n    &lt;meta http-equiv=\"content-type\" content=\"text/html\"; charset=\"UTF-8\"&gt;\n    ...stuff...\n&lt;/body&gt;\n</code></pre>\n\n<p>Now, what am I not seeing here?</p>\n"},{"tags":["python","django","api","rest","tastypie"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":108,"score":4,"question_id":13051544,"title":"Tastypie : Authentication for GET and Anonymous for POST","body":"<p>I use Django/Tastypie to manage my user collection.</p>\n\n<p>Is it possible to allow anonymous users to POST in the API (when creating a new user at some endpoint) and restrict authenticated users to GET only their own user, but not all the users ? </p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["python","django","rest","tastypie","python-requests"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13202486,"title":"Tasty-Pie - pulling in related fields, without using full=True?","body":"<p>I have a app that uses Python Requests to query a Tasty-Pie enabled Django app.</p>\n\n<p>I have a model called Application, with a corresponding Tasty-Pie resource.</p>\n\n<p>This model/Resource has several foreign keys that link Application to other models (e.g. Binary, Host, Colocation etc.)</p>\n\n<p>I'm using a Tasty-Pie filter to get a subset of Applications, then I want to print a nice table of Applications, along with some fields from those related models.</p>\n\n<p>Right now, I'm using the following to get a table of Applications:</p>\n\n<pre><code>def get_applications(self, parsed_args):\n    r = requests.get('http://foobar.com:8000/api/v1/application/?name__iregex={0}&amp;format=json'.format(parsed_args.applications))\n    print(r.url)\n    return r  \ndef application_iter(self, parsed_args):\n    for application in self.get_applications(parsed_args).json['objects']:\n        yield (application['name'], application['author'], application['some_other_field'])\ndef take_action(self, parsed_args):\n    return(('Name', 'Author', 'Some Other Field),\n            self.application_iter_iter(parsed_args),\n        )\n</code></pre>\n\n<p>My question is, what is the \"recommended\", or idiomatic way of pulling in all the related fields? Is there a way to extend the above to do this? </p>\n\n<p>I get the impression that <code>full=True</code> is a bad practice, and that using resource URI's is a better way. </p>\n\n<p>How can I do this whilst minimising the number of requests and DB hits? </p>\n\n<p>Cheers,\nVictor</p>\n"},{"tags":["django","django-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13202385,"title":"Django Reverse with arguments '()' and keyword arguments '{}' not found","body":"<p>Hi I have an infuriating problem.</p>\n\n<p>I have a url pattern like this:</p>\n\n<pre><code># mproject/myapp.urls.py\n\nurl(r'^project/(?P&lt;project_id&gt;\\d+)/$','user_profile.views.EditProject',name='edit_project'),\n</code></pre>\n\n<p>it works fine in the browser but for testing, when I do this in the shell:</p>\n\n<pre><code>from django.test import Client\nfrom django.core.urlresolvers import reverse\n\nclient= Client()\nresponse = client.get(reverse('edit_project'), project_id=4)\n</code></pre>\n\n<p>I get the dreaded:</p>\n\n<pre><code>NoReverseMatch: Reverse for 'edit_project' with arguments '()' and keyword arguments '{}' not found.\n</code></pre>\n\n<p>What am I missing here? </p>\n"},{"tags":["django","configuration","nginx"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13201876,"title":"nginx sub-domain mapping","body":"<p>I want to open xyz.abc.com in the browser but internally(using python-django), I want to map this to abc.com/xyz\nThe following nginx conf code works, but I don't want to redirect the user to this new url (abc.com/xyz)</p>\n\n<pre><code>server {\n    listen   80;\n    server_name xyz.abc.com;\n\n    location / {\n        rewrite ^ http://abc.com/xyz;\n        break;\n}\n</code></pre>\n\n<p>I have tried a lot of things including using proxy_pass but it's not working. \nHow can I solve this?</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","django","templates","gis"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13198198,"title":"Search Between Two Models in Django","body":"<p>I apologize in advance is this question is too broad, but I need some help conceptualizing.</p>\n\n<p>The end result is that I want to enable radius-based searching. I am using Django. To do this, I have two classes: Users and Places. Inside the Users class is a function that defines the radius in which people want to search. Inside the Places class I have a function that defines the midpoint if someone enters a city and state and not a zip (i.e., if someone enters New York, NY a lot of zipcodes are associated with that so I needed to find the midpoint).</p>\n\n<p>I have those two parts down. So now I have a radius where people want to search and I know (the estimate) of the places. Now, I am having a tremendous amount of difficulty combining the two, or even thinking about HOW to do this.</p>\n\n<p>I attempted doing the searching against each other in the view, but I ran into a lot of trouble when I was looping through one model in the template but trying to display results based on an if statement of the other model.</p>\n\n<p>It seemed like a custom template tags would be the solution for that problem, but I wanted to make sure I was conceptualizing the problem correctly in the first place. I.e., </p>\n\n<ul>\n<li><p>Do I want to do the displays based on an if statement in the template?</p></li>\n<li><p>Or should I be creating another class based on the other two in my models file?</p></li>\n<li><p>Or should I create a new column for one of the classes in the models file?</p></li>\n</ul>\n\n<p>I suppose my ultimate question is, based on what it is I want to do (enable radius based searching), where/how should most of the work be done? Again, I apologize if the question is overly broad.</p>\n"},{"tags":["django","django-haystack"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13201473,"title":"To Use Django-Haystack or not?","body":"<p>So this might be an obvious answer to some but I'm not sure what the right answer is. I have a simple donation application where Donor objects get created through a form. A feature to be added is to allow of a search for each Donor by last name and or phone number. </p>\n\n<p>Is this a good case to use django-haystack or should I just create my own filters? The problem I may see with haystack is that a few donations are being submitted every minute so could indexing be a problem? There are currently around 130,000 records and growing. I have started to implement haystack but have realized it might not be necessary? </p>\n"},{"tags":["javascript","django"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":11402297,"title":"Django and javascript issue","body":"<p>I want to inject a variable into url like in the code. But It gives an error.</p>\n\n<pre><code>   function initializeDataTable(id){\n        var columnSize = $('table th').size();\n    $('#table').dataTable({\n        \"sDom\" : 'rtFip&gt;',\n        'fnDrawCallback' : function() {\n            $('input:checkbox, input:radio').checkbox();\n        },\n        \"bStateSave\": true,\n        'sPaginationType' : 'full_numbers',\n        \"bServerSide\" : true,\n        \"sAjaxSource\" : \"{% url 'get_menu_list' '\" + id + \"' %}\"\n   });\n  };\n</code></pre>\n\n<p>I want to get the selected option and in the option change event, I will call the function above. How can I do that?</p>\n"},{"tags":["django","django-models","django-forms","django-crispy-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13098954,"title":"use Crispy form with ModelForm","body":"<p>I've been running into crispy form <a href=\"http://django-crispy-forms.readthedocs.org/en/latest/index.html\" rel=\"nofollow\">http://django-crispy-forms.readthedocs.org/en/latest/index.html</a> and seems to do exactly what i want: render forms with bootstrap layout.</p>\n\n<p>Now, the example talk about using forms.Form. This is ok, i can create mine by writing the code. like this</p>\n\n<pre><code>class TemplateCreateForm(forms.Form):\ntitle = forms.CharField(label=(u'Task name'))\ndescription = forms.CharField(label=(u'Task description'))\nurl_start = forms.CharField(label=(u'Start page url'))\nurl_end = forms.CharField(label=(u'Final page url'))\n\ndef __init__(self, *args, **kwargs):\n    self.helper = FormHelper()\n    self.helper.form_method = 'post'\n\n    self.helper.add_input(Submit('submit', 'Submit'))\n    super(TemplateCreateForm, self).__init__(*args, **kwargs)\n</code></pre>\n\n<p>But, how to do the update? because if i put this in the view:</p>\n\n<pre><code>    form = TemplateCreateForm(request.POST or None, instance=template)\n</code></pre>\n\n<p>it does not work because <strong>instance is only for ModelForm.</strong></p>\n\n<p>now, can i substitute the model.Form with ModelForm and use crispy form for ModelForm?\ni did this</p>\n\n<p>class TemplateCreateForm(ModelForm):\n    title = forms.CharField(label=(u'Task name'))\n    description = forms.CharField(label=(u'Task description'))\n    url_start = forms.CharField(label=(u'Start page url'))\n    url_end = forms.CharField(label=(u'Final page url'))</p>\n\n<pre><code>def __init__(self, *args, **kwargs):\n    self.helper = FormHelper()\n    self.helper.form_method = 'post'\n\n    self.helper.add_input(Submit('submit', 'Submit'))\n    super(TemplateCreateForm, self).__init__(*args, **kwargs)\n\nclass Meta:\n    model = Template\n    exclude = ('user')\n</code></pre>\n\n<p>Here i added the Meta class. \nNow: it works,  but is it correct to use it like this?\nThe update works as well in this way.</p>\n\n<p>What's the correct way to use forms for doing the update?</p>\n\n<p>ciao</p>\n"},{"tags":["django","imaplib"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13201316,"title":"Obtain text as HTML, imaplib and Django","body":"<p>I'm obtaining emails using imaplib in Python/Django.</p>\n\n<p>My goal is to both read plain text and HTML emails.</p>\n\n<p>I'm using:</p>\n\n<pre><code>mail.select('inbox', readonly=True)\nresult, data = mail.uid('fetch', email_uid, '(RFC822)')\n\nraw_email = data[0][1]\nemail_message = email.message_from_string(raw_email)\n\n#print \"EMAIL:\",email_message\n#print \"HEADERS\",email_message.items()\n\nsubject = get_decoded_header(email_message['Subject'])\nfrom_address = get_decoded_header(email_message['From'])\n\ndate = email_message['Date']\ndate = parse_date(date)\n\nbody = ''+get_first_text_block(email_message)\n</code></pre>\n\n<p>And the code for get_first_text_block (obtained from the web):</p>\n\n<pre><code>def get_first_text_block(email_message_instance):\n    maintype = email_message_instance.get_content_maintype()\n\n    if maintype == 'multipart':\n        for part in email_message_instance.get_payload():\n            if part.get_content_maintype() == 'text':\n                return part.get_payload()\n    elif maintype == 'text':\n        return email_message_instance.get_payload()\n\n    # In cases of emails with empty body\n    return ''\n</code></pre>\n\n<p>Now, the problem with this is, the text doesn't appear formatted. Specifically:\nIf it's a plain text email, the text appears as one big consolidated string instead of having breaks, paragraphs and empty lines between lines.</p>\n\n<p>If it's an HTML text, the HTML doesn't show at all, instead it shows up as plaintext with fragments of HTML inside (even using the |safe filter on Django).</p>\n\n<p>I suppose something like an improper conversion of the email payload to string or similar might be happening, but I checked everything and couldn't find out what could be wrong.</p>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["jquery","django","json","jquery-ajax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13195189,"title":"JSON Serializing in Django and JSON Parsing in Jquery","body":"<p>So I have this code:</p>\n\n<pre><code>def success_comment_post(request):\n    if \"c\" in request.GET:\n        c_id = request.GET[\"c\"]\n        comment = Comment.objects.get(pk=c_id)\n        model = serializers.serialize(\"json\", [comment])\n        data = {'message': \"Success message\", \n                'message_type': 'success',\n                'comment': model }\n        response = JSONResponse(data, {}, 'application/json')\n        return response\n    else:        \n        data = {'message': \"An error occured while adding the comment.\", \n                'message_type': 'alert-danger'}\n        response = JSONResponse(data, {}, 'application/json')\n</code></pre>\n\n<p>and back in jQuery I do the following:</p>\n\n<pre><code>$.post($(this).attr('action'), $(this).serialize(), function(data) {\n    var comment = jQuery.parseJSON(data.comment)[0];\n    addComment($(\"#comments\"), comment);\n\n })\n</code></pre>\n\n<p>Now... in the Django function, why do I have to put the comment in <strong>[]</strong> --> \n<strong>model = serializers.serialize(\"json\", [comment])</strong></p>\n\n<p>and back in jQuery, why do I have to do jQuery.parseJSON(data.comment)<strong>[0]</strong>?</p>\n\n<p>Anyway I don't have to do this? I find it weird I have to hardcode the <strong>[0]</strong></p>\n\n<p>Thanks a lot!</p>\n"},{"tags":["python","ruby-on-rails","django"],"answer_count":7,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":544,"score":3,"question_id":1783431,"title":"Python Vs Ruby On Rails : on Size","body":"<p>I am planning to do a small web application that will be distributed as a single installable. I have plans to develop this application in either Python/Django or Ruby On Rails. (I am a Java/C++ programmer, hence both these languages are new to me). </p>\n\n<p>My main concern is about the size and simplicity of final installable (say setup.exe). I want it to be small in size and also should be able to pack all required components in it. </p>\n\n<p>Which one among Python/Django and Ruby On Rails is suitable for me?  </p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13200344,"title":"Django. How Q() really works?","body":"<p>in my database there is a table that holds some user information. The table is called <code>UserBalance</code> and fields include <code>user</code>, <code>credits_in</code> and <code>credits_out</code> and <code>remark</code> (among others)</p>\n\n<p>I am trying to sum the <code>credits_in</code> for a certain user but I get different sums for different cases. Take a look at this:</p>\n\n<pre><code>&gt;&gt;&gt; cg = UserBalance.objects.filter(user=ranked_user).filter(remark__icontains='credits g').aggregate(sum_in=Sum('credits_in'))\n&gt;&gt;&gt; cg\n{'sum_in': 35.85}\n&gt;&gt;&gt; cg = UserBalance.objects.filter(user=ranked_user).filter(Q(remark='credits gained') or Q(remark='credits given')).aggregate(sum_in=Sum('credits_in'))\n&gt;&gt;&gt; cg\n{'sum_in': 26.16}\n&gt;&gt;&gt; cg = UserBalance.objects.filter(user=ranked_user).filter(Q(remark='credits given') or Q(remark='credits gained')).aggregate(sum_in=Sum('credits_in'))\n&gt;&gt;&gt; cg\n{'sum_in': 9.69}\n</code></pre>\n\n<p>in the first case I used <code>i_cointains</code>, in the second and third cases I use a Q() but with its terms switched. </p>\n\n<p>Can someone explain what is the difference between the 2nd and the 3rd case?</p>\n"},{"tags":["javascript","django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":10795582,"title":"Ignoring variable type in Django's reverse function","body":"<p>I am trying to send the URL information by using the URL name and proceed them in JavaScript. So i will not set the true parameters while generating it by reverse function which trigs error because of th wrong data types:</p>\n\n<pre><code>reverse(\"url-name\", args = [\"{0}\", \"{1}\", \"{2}\"]) # The first parameter should be number\n</code></pre>\n\n<p>Javascript:</p>\n\n<pre><code>url = url.replace(\"{0}\", 34)\\\n      .replace(\"{1}\", \"Cem\")\\\n      .replace(\"{2}\", \"Şebinkarahisar\");\n</code></pre>\n\n<p>Is there any way to ignore data types while generating them in Django?</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","django","django-settings","python-import","execfile"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":202,"score":2,"question_id":11703327,"title":"Python: 'import *' vs execfile","body":"<p>In some of my Django apps I'm using a <code>settings_local.py</code> file to override settings that are different on various environments (e.g. development, test and production). I have originally used the following code to include its contents in the <code>settings.py</code>:</p>\n\n<pre><code>try:\n    from settings_local import *\nexcept ImportError:\n    sys.stderr.write(\"The settings_local.py file is missing.\\n\")\n    DEBUG=False\n</code></pre>\n\n<p>I have recently found the <code>execfile</code> function and switched to something like:</p>\n\n<pre><code>try:\n    execfile(path.join(PROJECT_ROOT, \"settings_local.py\"))\nexcept IOError:\n    sys.stderr.write(\"The settings_local.py file is missing.\\n\"\n    DEBUG=False\n</code></pre>\n\n<p>Both work as intended, but I'm curious whether I'm missing any gotchas, and in general which approach is more recommended and why.</p>\n"},{"tags":["django","django-orm"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13199749,"title":"django ORM returning an SQL syntax exception when using paginator","body":"<p>this is a very weird problem, I've been working on a complex query that uses extra which works perfectly. When am using the queryset normally, it works and i can list the objects in the template all is okay. </p>\n\n<p>but, when I apply paginator, it gives me an error. After couple hours of debugging, I tried to put a print statement for my query and suprisingly it worked. Below is my code</p>\n\n<pre><code> queryset=get_model('vehicle', 'car').objects.my_cars(language=request.LANGUAGE_CODE, user=request.user)\n    paginator = Paginator(\n        queryset,\n        10\n    )\n\n    page = request.GET.get('page')\n    try:\n        print getattr(queryset, 'query')\n        cars = paginator.page(page)\n    except PageNotAnInteger:\n        cars = paginator.page(1)\n    except EmptyPage:\n        cars = paginator.page(paginator.num_pages)\n\n    return render_to_response(\n        'accounts/profile/my_vehicle.html',\n            {\n                'my_cars' : cars.object_list,\n            },\n        RequestContext(request)\n    )\n</code></pre>\n\n<p>the moment i remove the statement print queryset.query it gives a mysql syntax error. If i keep it, it goes through. Any one experienced anything like that before?</p>\n\n<p>Edited: </p>\n\n<p>Error am getting is following</p>\n\n<pre><code>DatabaseError at /en/account/profile/my-vehicles/\n\n(1054, \"Unknown column 'vehicle_modellookup.id' in 'where clause'\")\n</code></pre>\n"},{"tags":["javascript","django","url","reverse"],"answer_count":6,"favorite_count":8,"up_vote_count":10,"down_vote_count":0,"view_count":2020,"score":10,"question_id":1795701,"title":"Django reverse() for JavaScript","body":"<p>In my project I have a lot of <a href=\"http://en.wikipedia.org/wiki/Ajax_%28programming%29\" rel=\"nofollow\">Ajax</a> methods, with external client-side scripts (I don't want to include JavaScript into templates!) and changing URLs is kind of pain for me because I need to change URLs in my Ajax calls manually. </p>\n\n<p>Is there is some way to emulate the behavior of <code>{% url %}</code> templatetag in JavaScript? </p>\n\n<p>For example, print urlpatterns starting with <code>^ajax</code> and later in scripts replace patterns with their actual values? </p>\n\n<p>That's what on my mind, and my question is - are there any common practices to do things like that? Maybe some reusable applications? Also I will be happy to read any advices and relevant thoughts you have.</p>\n\n<p><strong>Update 1:</strong>\nI'm talking about computed URLs, not static ones:</p>\n\n<pre><code>url(r'^ajax/delete/(?P&lt;type&gt;image|audio)/(?P&lt;item_id&gt;\\d+)/from/set/(?P&lt;set_id&gt;\\d+)/$', 'blog.ajax.remove_item_from_set'),\n</code></pre>\n"},{"tags":["javascript","jquery","django"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13072428,"title":"Url Post request jquery Django","body":"<p>This might be a silly question, but I try to do a post request with jquery and I don't know how to set my \"url\" in my post request.</p>\n\n<p>I have a variable \"id\":</p>\n\n<pre><code>var url = window.location.pathname.split('/');\nvar id = url[3]; \n</code></pre>\n\n<p>And I would like my post to go to /mysite/xxx/\"id\"/</p>\n\n<p>here is my post request:</p>\n\n<pre><code>   $.post(\"/mysite/xxx/'id'\", { \n   name: \"test\"\n   });\n</code></pre>\n\n<p>I don't know how to do include the variable \"id\" at the end of my url. Thank you for your help.</p>\n\n<p>P.S: this post request goes to the exact same url where I try to implement it. I don't know if there is a simpler way to do it than specify the whole url again.</p>\n"},{"tags":["php","python","django","magento","e-commerce"],"answer_count":7,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":1160,"score":5,"question_id":6325094,"title":"E-commerce from scratch or not","body":"<p>I need to develop a new site with the e-commerce part. I'm here to get some hints from you on which road I should go on.</p>\n\n<p>The site will have a static part which include some static pages and the e-commerce part for sell the products. I'm a Django and PHP developer but this is the first time I need to develop an e-commerce.</p>\n\n<p>I see there's some solutions like Satchmo for Django and Magento for PHP.\nThere's also some services like Shopify that provide a pre cooked solution.</p>\n\n<p>These are my requirements:</p>\n\n<ul>\n<li>I'll need to give to my site a custom layout/style, all written by me</li>\n<li>I'll need a nice admin interface for view the incoming orders, the average orders for day and other nice stuff  (I see Magento have a very nice panel for this)</li>\n<li>I'll need a feature that reports me the products that are outgoing out of stock</li>\n<li>Maybe I'll need to implement a custom payment method</li>\n<li>Maybe I'll need to implement a custom shipping courier</li>\n</ul>\n\n<p>Of course I prefer Django instead PHP. Anyone can give me an hint? I've never used anyone of this framework/products.</p>\n\n<p>Thank you.</p>\n\n<p>-- EDIT</p>\n\n<p>Deadline is 3 months. Budget ~7500 $. I've three months for finish it.</p>\n"},{"tags":["javascript","django"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":204,"score":1,"question_id":7167214,"title":"Django url rewrites and passing a parameter from Javascript","body":"<p>As a bit of a followup question to my previous , I need to pass a parameter to a view. This parameter is not known until the JS executes.</p>\n\n<p>In my URLConf:</p>\n\n<pre><code>url(r'^person/device/program/oneday/(?P&lt;meter_id&gt;\\d+)/(?P&lt;day_of_the_week&gt;\\w+)/$',\ntherm_control.Get_One_Day_Of_Current_Thermostat_Schedule.as_view(), \nname=\"one-day-url\"),\n</code></pre>\n\n<p>I can pass it this URL and it works great! ( thanks to you guys). </p>\n\n<pre><code>http://127.0.0.1:8000/personview/person/device/program/oneday/149778/Monday/\n</code></pre>\n\n<p>In My template I have this:</p>\n\n<pre><code>var one_day_url = \"{% url personview:one-day-url meter_id=meter_id day_of_the_week='Monday' %}\";\n</code></pre>\n\n<p>In my javascript:</p>\n\n<pre><code> $.ajax({\n        type: 'GET',\n        url: one_day_url ,\n        dataType: \"json\",\n        timeout: 30000,\n        beforeSend: beforeSendCallback,\n        success: successCallback,\n        error: errorCallback,\n        complete: completeCallback\n    });\n</code></pre>\n\n<p>When this triggers it works fine except I dont necessarily want Monday all the time.</p>\n\n<p>If I change the javascript to this:</p>\n\n<pre><code>var one_day_url = \"{% url personview:one-day-url meter_id=meter_id %}\";\n\nand then\n\n$.ajax({\n        type: 'GET',\n        url: one_day_url + '/Monday/',\n        dataType: \"json\",\n        timeout: 30000,\n        beforeSend: beforeSendCallback,\n        success: successCallback,\n        error: errorCallback,\n        complete: completeCallback\n    });\n</code></pre>\n\n<p>I get the Caught NoReverseMatch while rendering error. I assume because the URLconf still wants to rewrite to include the ?P\\w+) . </p>\n\n<p>I seems like if I change the URL conf that breaks the abailty to find the view , and if I do what I do above it gives me the NoREverseMatch error.</p>\n\n<p>Any guidance would be appreciated.</p>\n"},{"tags":["mysql","django","stored-procedures"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13199550,"title":"Render MySQL stored procedures as a table column in django admin page","body":"<p>I want to use the autogenerated admin page,\nBut I have a column that is a calculation performed by a stored procedure (gets two date parameters).  </p>\n\n<p>The result correlated with the other rows of the specific table.</p>\n\n<p>Can I do that?</p>\n"},{"tags":["python","django","subdomain","middleware"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13199247,"title":"Subdomain Issue in Django","body":"<p>I'm trying to setup a middleware that will read the subdomain in requests and serve up a different app's urls.py depending on the subdomain...but I'm getting some erratic behavior</p>\n\n<p>Here's my middleware:</p>\n\n<pre><code>class SubdomainsMiddleware:\ndef process_request(self, request):\n    request.domain = request.META['HTTP_HOST']\n    request.subdomain = ''\n    parts = request.domain.split('.')\n\n    if len(parts) == 3 or (re.match(\"^localhost\", parts[-1]) and len(parts) == 2):\n        request.subdomain = parts[0]\n        request.domain = '.'.join(parts[1:])\n\n    # set the right urlconf\n    if request.subdomain == 'foo':\n        settings.ROOT_URLCONF = 'bqsite.urls'\n    else:\n        settings.ROOT_URLCONF = 'dhsite.urls'\n</code></pre>\n\n<p>My understanding is that if this is working, then the root urls.py for the project should never be hit.  Is that correct?  I'm getting really weird and erratic behavior where, if i restart apache, the site shows the django welcome screen but after refrshing uses the right urls file.</p>\n"},{"tags":["javascript","django"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":11898927,"title":"Django: Use Javascript variable in URL reverse call as parameter","body":"<p>is there a way to use a .js variable as a parameter in a Django template url reverse call? The approach below does not work, which is not very surprising:</p>\n\n<pre><code>\"fnRender\": function ( o, val ) {\n     return '&lt;a href=\"{% url update_task o.aData[0] %}\"&gt;' + o.aData[1]  +'&lt;/a&gt;';\n}\n</code></pre>\n\n<p>I know that I could pass the needed data via the Django view, but unfortunately I have to use the data from the .js library. </p>\n"},{"tags":["django","utf-8","base64","mime"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13198996,"title":"Django - Decoding MIME Header with Base64 and UTF-8","body":"<p>I am creating a web email interface to read IMAP accounts. I'm having problems decoding a certain email header.</p>\n\n<p>I obtain the following From header (specific example from an event email):</p>\n\n<pre><code>('\"=?UTF-8?B?QmVubnkgQmVuYXNzaQ==?=\" &lt;NOREPLY@NOREPLY.LOCKNLOADEVENTS.COM&gt;', None)\n</code></pre>\n\n<p>I separate the first part:</p>\n\n<pre><code>=?UTF-8?B?QmVubnkgQmVuYXNzaQ==?=\n</code></pre>\n\n<p>According to some research, it's aparently a Base64-encoded UTF-8 header.</p>\n\n<p>I tried to decode it using the Base64 decoder:</p>\n\n<pre><code># Separate sender name from email itself\nfirst_part = header_text[1:header_text.index('\" &lt;')]\nprint \"First part:\", first_part\n\nimport base64\ndecoded_first_part = base64.urlsafe_b64decode(first_part)\nprint decoded_first_part\n</code></pre>\n\n<p>But I obtain a</p>\n\n<pre><code>TypeError: Incorrect padding.\n</code></pre>\n\n<p>Can anybody help me figure out what's wrong?</p>\n\n<p>Thank you</p>\n"},{"tags":["python","django","django-admin"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":189,"score":1,"question_id":13128734,"title":"Uploading files in django admin, download through public site","body":"<p>I am running a Django website and I want to be able to upload a file through my admin panel and then have visitors to the main site be able to download it.  I am running my site using Django-nonrel, Django FileTransfers and Google App Engine.  I believe the upload functionality is working correctly as I am able to see the file in my App Engine Blob Storage.  What I can't seem to figure out is how to present a download link to the specified file on the public website.  I have pasted the relevant classes below:</p>\n\n<hr>\n\n<p>I have an app called Calendar, that has the following model:</p>\n\n<pre><code>class CalendarEvent (models.Model):\n    start = models.DateTimeField(auto_now=False, auto_now_add=False)\n    end = models.DateTimeField(auto_now=False, auto_now_add=False)\n    title = models.CharField(max_length=500)\n    description = models.TextField()\n\n    file = models.FileField(upload_to='uploads/%Y/%m/%d/%H/%M/%S/')\n</code></pre>\n\n<p>Here is the view:</p>\n\n<pre><code>def calendar(request):\nevents = CalendarEvent.objects.exclude(start__lt=datetime.datetime.now()).order_by('start')\nreturn render_to_response('home/calendar.html',{'events': events},context_instance=RequestContext(request))\n\ndef download_handler(request, pk):\n    upload = get_object_or_404(CalendarEvent, pk=pk)\n    return serve_file(request, upload.file, save_as=True)\n</code></pre>\n\n<p>Here is my admin:</p>\n\n<pre><code>class calendarAdmin(admin.ModelAdmin):\n    list_display = ('title','start','end')\n\nadmin.site.register(CalendarEvent, calendarAdmin)   \n</code></pre>\n\n<p>Finally, here is the relevant part of my template:</p>\n\n<pre><code>    {% for e in events %}\n    {% url Calendar.views.download_handler pk=e.pk as fallback_url %}\n    &lt;a href=\"{% firstof e.file|public_download_url fallback_url %}\"&gt;Download&lt;/a&gt;\n{% endfor %}\n</code></pre>\n\n<p>{% firstof e.file|public_download_url fallback_url %} is just returning blank, i'm not sure where I am going wrong.</p>\n"},{"tags":["django","visual-studio-2010","azure","visual-studio-2012"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13197058,"title":"Django in Visual Studio 2012","body":"<p>I have Visual Studio 2012 in my machine. I just downloaded the <a href=\"http://www.windowsazure.com/en-us/develop/python/\" rel=\"nofollow\">Windows installer provided on this page</a>. When I ran it, it is showing that it can install Python tools and some other things for Visual Studio 2010 (in addition to Azure SDK). </p>\n\n<p><strong>Question:</strong> Will this installer and these tools work on Visual Studio 2012 too? </p>\n"},{"tags":["django","zinnia"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13189427,"title":"Extending zinnia","body":"<p>I am trying to edit the template for Zinnia but I don't know where pip install zinnia. I used this installation instruction from the website. I tried find and locate but couldn't find it.</p>\n\n<p>$ pip install django-blog-zinnia</p>\n\n<p>Any ideas?</p>\n"},{"tags":["python","django","eclipse","pinax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13184839,"title":"How can integrate the login/registration into a pinax(0.9) projects?","body":"<p>I have installed pinax and now I want to integrate some apps. First I would like to start with the login and registration. </p>\n\n<p>I tried to deal with poor documentation of Pinax, therefore I do not know how to start?</p>\n\n<p>How can I do that with pinax 0.9. What do I have to modify? </p>\n\n<p>What would be the general path to follow?</p>\n"},{"tags":["django","django-views","django-urls"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13197779,"title":"Django URL design for posting update to a model instance","body":"<p>Say I have the following model defined:</p>\n\n<pre><code>class Location(models.Model):\n    name = models.CharField(max_length=20)\n    longitude = models.CharField(max_length=30)\n    latitude = models.CharField(max_length=30)\n</code></pre>\n\n<p>And there's an existing Location instance with <code>id=1</code></p>\n\n<p>I want to post an update against this instance but I am not sure how I should send the pk/id to the server. I have two ideas in mind.</p>\n\n<ol>\n<li>Include it as part of the url (ex. <code>^update_location/(?P&lt;pk&gt;[0-9]+)/$'</code>).</li>\n<li>Include it in the POST data along with values for updating other attributes. </li>\n</ol>\n\n<p>My question is why would I want to choose one over the other?</p>\n\n<p>I am leaning more towards option 1 because it's supported, by default, by the generic view <code>django.views.generic.edit.UpdateView</code> that I am using. But then I still don't know how to choose.</p>\n"},{"tags":["django"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":44,"score":3,"question_id":13195715,"title":"Circular dependency in Django","body":"<p>I'm aware of similar question in SO, but none answer my question.</p>\n\n<p>I've got the following models:</p>\n\n<pre><code>class Style(models.Model):      \n    featured_item = models.ForeignKey(Item)\n\nclass Item(models.Model):      \n    style = models.ForeignKey(Style)\n</code></pre>\n\n<p>It's not a one to one relation, because several items can have the same style. However, one item can be featured_item of only one Style.</p>\n\n<p>I could add a <code>is_featured_item</code> boolean field in my <code>Item</code> model, but that would make my admin more complicated.</p>\n\n<p>Is there any way to solve this circular dependency?</p>\n"},{"tags":["django","django-templates","django-template-filters"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13197569,"title":"Django Include Template based on Context","body":"<p>I was wondering if there is a way of including a variable in an include statement in a Django template. For example if you have a for loop over a set of objects and you want to load only templates related to those objects (example bellow).</p>\n\n<pre><code>{% for app in apps %}\n&lt;div class=\"modal fade hidden\" id=\"myModal_{{ app.id }}\"&gt;\n  &lt;div class=\"modal-header\"&gt;\n    &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"&gt;×&lt;/button&gt;\n    &lt;h3 id=\"myModalLabel\"&gt;Add {{ app.title }}&lt;/h3&gt;\n  &lt;/div&gt;\n  &lt;div class=\"modal-body\"&gt;\n    &lt;form class=\"bs-docs-example form-horizontal\"&gt;\n\n\n      {% include \"app_templates/{{ app.title }}/modal-config.html\" %}\n\n\n    &lt;/form&gt;\n  &lt;/div&gt;\n  &lt;div class=\"modal-footer\"&gt;\n    &lt;button class=\"btn\" data-dismiss=\"modal\" aria-hidden=\"true\"&gt;Close&lt;/button&gt;\n    &lt;button class=\"add-app-btn btn btn-primary\" data-appid=\"{{ app.id }}\"&gt;Add&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n{% endfor %}\n</code></pre>\n\n<p>Or is there a better way of doing this. Thanks.</p>\n"},{"tags":["django","sublimetext2","sublimetext"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13195450,"title":"Sublime Text - Set project type as Django","body":"<p>A little confused. Trying to create a Django project in Sublime Text.</p>\n\n<p>I have followed this  <a href=\"http://net.tutsplus.com/tutorials/tools-and-tips/sublime-text-2-project-bliss/\" rel=\"nofollow\">netuts guide</a>\nSo I have added a folder and set a project as django.sublime-project</p>\n\n<p>I installed Djaniero plugin. So my question is how do I now turn this into a django project?</p>\n"},{"tags":["django","rss","disqus"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13191975,"title":"How to take rss feeds from \"http://myname.disqus.com/latest.rss\" to my django blog?","body":"<p>I want to show latest 3 comments from disqus and link them to a post which they belong. I had some researches and they usually explain how to create rss feed but I want to take rss data. \nWhen I open this rss I see xml like this:</p>\n\n<pre><code>&lt;rss version=\"2.0\" xmlns:atom=\"http://www.w3.org/2005/Atom\"&gt;\n&lt;channel&gt;\n\n&lt;title&gt;unicrow - Latest Comments&lt;/title&gt;\n&lt;link rel=\"http://api.friendfeed.com/2008/03#sup\" href=\"http://disqus.com/sup/all.sup#forumcomments-e63e6ca0\" type=\"application/json\" xmlns=\"http://www.w3.org/2005/Atom\"/&gt;\n&lt;link&gt;http://unicrowblog.disqus.com/&lt;/link&gt;\n&lt;description/&gt;\n&lt;atom:link href=\"http://unicrowblog.disqus.com/comments.rss\" rel=\"self\"/&gt;\n&lt;language&gt;en&lt;/language&gt;\n&lt;lastBuildDate&gt;Thu, 01 Nov 2012 10:54:23 -0000&lt;/lastBuildDate&gt;\n\n&lt;item&gt;\n&lt;title&gt;Re: http://box:8005/post/git-flow/&lt;/title&gt;\n&lt;link&gt;http://box:8005/post/git-flow/#comment-697865561&lt;/link&gt;\n&lt;description&gt;&amp;lt;p&gt;hjkgjfgtk&amp;lt;/p&gt;&lt;/description&gt;\n&lt;dc:creator xmlns:dc=\"http://purl.org/dc/elements/1.1/\"&gt;kripton1&lt;/dc:creator&gt;\n&lt;pubDate&gt;Thu, 01 Nov 2012 10:54:23 -0000&lt;/pubDate&gt;\n&lt;/item&gt;\n...\n&lt;/channel&gt;\n&lt;/rss&gt;\n</code></pre>\n\n<p>I want to use this xml in my django project. How to take this xml rss feed?? </p>\n"},{"tags":["django","django-class-based-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13196476,"title":"Django class based views with url issue","body":"<p>I'm trying to get to grips with class based views.  </p>\n\n<p>I have urls.py as follows:</p>\n\n<pre><code>urlpatterns = patterns('homework.views',\n\n(r'^index/$', 'index'),\nurl(r'^(?P&lt;sub_slug&gt;\\w+)/$', NavListView.as_view(), name='nav'),\nurl(r'^(?P&lt;sub_slug&gt;\\w+)/(?P&lt;class_grp_slug&gt;\\w+)/$', SubNavListView.as_view(), name='subnav'),\n\nurl(r'^admin/doc/', include('django.contrib.admindocs.urls')),\nurl(r'^admin/', include(admin.site.urls)),)\n</code></pre>\n\n<p>I have my views.py:</p>\n\n<pre><code># Subject navigation\nclass NavListView(ListView):\n    template_name = 'templates/home.html'\n\n    def get_queryset(self):\n        self.subject = Subject.objects.all()\n        return self.subject\n\n    def get_context_data(self, **kwargs):\n        context = super(NavListView, self).get_context_data(**kwargs)\n        context['subjects'] = self.subject\n        return context\n\n# Class group navigation\nclass SubNavListView(NavListView):\n\n    def get_queryset(self):\n        self.group = Group.objects.filter(subject__name__iexact=self.kwargs['sub_slug'])\n        return self.group\n\n    def get_context_data(self, **kwargs):\n        context = super(NavListView, self).get_context_data(**kwargs)\n        context['groups'] = self.group\n        return context\n</code></pre>\n\n<p>In my 'templates/home.html' I have:</p>\n\n<pre><code>{% extends 'templates/base.html' %}\n{% load url from future %}\n\n{% block nav-menu-items %}\n&lt;ul class=\"nav\"&gt;\n    {% for sub in subjects %}\n    &lt;li class=\"\"&gt;&lt;a href=\"{% url 'nav' sub_slug %}\"&gt;{{ sub }}&lt;/a&gt;&lt;/li&gt;\n    {% endfor %}\n    &lt;li class=\"active\"&gt;&lt;a href=\"#\"&gt;Add Subject&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n{% endblock nav-menu-items %}\n\n{% block class_groups_nav %}\n&lt;div class=\"tabbable\"&gt;\n  &lt;ul class=\"nav nav-tabs\"&gt;\n    {% for group in groups %}\n    &lt;li&gt;\n      &lt;a data-toggle=\"tab\" href=\"{% url 'subnav' sub_slug class_grp_slug %}\"&gt;{{ group }}&lt;/a&gt;\n    &lt;/li&gt;\n    {% endfor %}\n    &lt;li&gt;&lt;a href=\"#\"&gt;Add&lt;/a&gt;&lt;/li&gt;\n  &lt;/ul&gt;\n{% endblock class_groups_nav %}\n</code></pre>\n\n<p>I'm trying to achieve a 'nav' of subjects, then a 'subnav' below showing a tab for each class group for the subject selected in the navigation above.</p>\n\n<p>I've tried different ways of doing this such as making Subject.objects.all() available as context processors. I have also attempted to subclass NavListView so I can inherit the previous context, making them available in SubNavListView.</p>\n\n<p>At the moment, I'm getting a NoReverseMatch error where the url named 'nav' is not passing the sub_slug and so I can't use it in the url in the template. </p>\n\n<p>Any thoughts on getting this working?</p>\n\n<p>Many thanks,</p>\n"},{"tags":["django","memcached","amazon-ec2","ip"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":590,"score":2,"question_id":6041264,"title":"How to manage and connect to dynamic IPs of EC2 instances?","body":"<p>When writing a web app with Django or such, what's the best way to connect to dynamic EC2 instances, such as a cluster of Redis or memcache instances? IP addresses change between reboots, etc. Elastic IPs are limited to 5 by default - what are some other options for auto-discovering/auto-updating which machines are available?</p>\n"},{"tags":["django","statistics"],"answer_count":1,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":2207,"score":9,"question_id":2920707,"title":"Web visitor statistics for Django?","body":"<p>I'm looking for some good app to handle visitor statistics for a Django project. Any hints?</p>\n"},{"tags":["django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13196844,"title":"Building complex querysets using Model Manager in Django returning empty queryset","body":"<p>Am trying to build a complex queryset whereby am joining with other tables. What is buzzling me here is that am able to see the query when i print the queryset.query but as i call it from my code its returning no result. </p>\n\n<pre><code>class CarManager(models.Manager):\n    def get_query_set(self):\n        return super(CarManager, self).get_query_set().filter(version_to__isnull=True)\n\n    def my_cars(self, language, user):\n\n        qs=self.extra(\n            select = {\n                'make_display' : '`%s`.`%s`' % (ModelLookUpI18n._meta.db_table, ModelLookUpI18n._meta.get_field('make_display').column),\n                'model_display' : '`%s`.`%s`' % (ModelLookUpI18n._meta.db_table, ModelLookUpI18n._meta.get_field('model_display').column),\n                'trim_display'  : '`%s`.`%s`' % (ModelLookUpI18n._meta.db_table, ModelLookUpI18n._meta.get_field('trim_display').column),\n                },\n            tables = [\n                '`%s`' % ModelLookUpI18n._meta.db_table,\n            ],\n            where = [\n                '`%s`.`%s` = `%s`.`%s`' % (ModelLookUpI18n._meta.db_table, ModelLookUpI18n._meta.get_field('model').column, ModelLookup._meta.db_table, ModelLookup._meta.get_field('id').column),\n                \"`%s`.`%s`='%s'\" % (ModelLookUpI18n._meta.db_table, ModelLookUpI18n._meta.get_field('language').column, language)\n            ]\n        ).select_related().filter(created_by=user).order_by('-created_at')\n\n        print qs.query # prints the SQL statement\n        print qs # always prints []\n        return qs\n</code></pre>\n\n<p>When I copy the query printed in the console and paste it into mySQL terminal I 21 records and it looks very normal to me. Yet, the queryset is always empty, any ideas on how to debug further? </p>\n\n<p>Oh, I even monitored the MYSQL execution log to make sure what is going to the engine is matching what is printed by qs.query and its the same. </p>\n"},{"tags":["django","couchdb"],"answer_count":2,"favorite_count":4,"up_vote_count":12,"down_vote_count":0,"view_count":4701,"score":12,"question_id":2169737,"title":"What is the best CouchDB backend for Django?","body":"<p>I am evaluating using CouchDB in my new Django-project. Is there a good database backend in Django for CouchDB? I have tried searching but the projects that turn up seems very small and/or old and I can't make out what parts are solved regarding QuerySets, Auth, Sessions etc. Any help would be greatly appreciated.</p>\n"},{"tags":["django","django-admin","python-2.6","mezzanine"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13124913,"title":"Mezzanine (Django CMS) adding double slash to admin login form","body":"<p>I have set up an instance of Mezzanine that is <em>almost</em> working perfectly.  The only problem is the admin login page does not work properly.  If you just try to log in normally than the browser is redirected to \"http://admin/\".  The html form action attribute is set to \"//admin/\" instead of \"/admin/\" so the browser sees \"admin\" as being a domain name instead of a root directory of the current domain.</p>\n\n<p>I've tried wading through the Django and Mezzanine package codes, but I can't see anything in there that should be causing an extraneous slash.  I found one web page saying that setting FORCE_SCRIPT_NAME to \"/\" could cause this, but I am not overriding the default value of None so this shouldn't be the cause.</p>\n\n<p>In urls.py I have the following (which I think is the default):</p>\n\n<pre>\nurlpatterns = patterns(\"\",\n\n    # Change the admin prefix here to use an alternate URL for the\n    # admin interface, which would be marginally more secure.\n    (\"^admin/\", include(admin.site.urls)),\n\n  ....\n</pre>\n"},{"tags":["django","django-cms"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":178,"score":1,"question_id":13022262,"title":"Insert new child menu items in existing menu","body":"<p>I'm working on a project and I need to be able to programatically inject a number of application-model-based items into an existing CMS-based menu.  I've started to use the code found here to modify the menu: <a href=\"http://docs.django-cms.org/en/2.3.3/extending_cms/app_integration.html\" rel=\"nofollow\">http://docs.django-cms.org/en/2.3.3/extending_cms/app_integration.html</a>.</p>\n\n<p>EDIT: Much more detail</p>\n\n<p>My client would like me to attach application-model objects to the CMS menu so that they are children of an existing CMS page in the menu.  I currently have a total hack in place which requires me to make fake pages in the CMS that are children of the desired menu item, have the same name as the application-model objects, then, I've installed a Modifier like so:</p>\n\n<pre><code>class SportsMenuModifier(Modifier):\n  def modify(self, request, nodes, namespace, root_id, post_cut, breadcrumb):\n    if post_cut:\n      return nodes\n\n    for node in nodes:\n      if node.title == \"Baseball\":\n        node.url = \"/sports/baseball\"\n      elif node.title == \"Football\":\n        node.url = \"/sports/Football\"\n      elif node.title == \"Bowling\":\n        node.url = \"/sports/bowling\"\n      elif node.title == \"Golf\":\n        node.url = \"/sports/golf\"\n\n    return nodes\n\nmenu_pool.register_modifier(SportsMenuModifier)\n</code></pre>\n\n<p>There is so much wrong with this I don't know where to begin, but I'll use this non-exhaustive list to highlight some of the most basic issues:</p>\n\n<ul>\n<li>Requires the presence of \"Fake\" CMS pages</li>\n<li>Ridiculously dependent on the naming of the application sports objects and the fake pages</li>\n<li>Will\nnot detect when the customer creates new sports objects</li>\n<li>Very confusing for everyone involved</li>\n</ul>\n\n<p>What I was hoping I could do was something like this (WILL NOT WORK):</p>\n\n<p>in models.py</p>\n\n<pre><code>from django.db import models\nfrom cms.models.pagemodel import Page\n\nclass Sport(models.Model):\n  name = models.CharField(...)\n  parent = modes.ForeignKey(Page, ...)\n  ...\n</code></pre>\n\n<p>in menu.py</p>\n\n<pre><code>class SportsMenu(Menu):\n  def get_nodes(self, request):\n    nodes = []\n\n    for sport in Sports.objects.filter(...).order_by('order'):\n      node = NavigationNode(\n        _(sport.name),\n        sport.get_absolute_url(),\n        sport.pk,\n        sport.parent.pk\n      )\n      nodes.append(node)\n\n    return nodes\n\nmenu_pool.register_menu(SportsMenu)\n</code></pre>\n\n<p>I'm not sure I can continue with this approach because:</p>\n\n<ol>\n<li><p>I don't know how to fetch the menu.namespace for a given Page</p></li>\n<li><p>Even when I hard-code the namespace to \"CMSMenu\" (I read somewhere this is what it is), this still does nothing that I can see.</p></li>\n</ol>\n\n<p>So, how do we attach application-model based objects as children to <strong>existing</strong> CMS-page-based menu items?</p>\n"},{"tags":["django","git"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13195498,"title":"Git repos hungs up unexpectedly","body":"<p>There is a strange thing.. I can clone small files repos, but when it starts to take some time, it hangs up. Like:</p>\n\n<pre><code>$ pip install -e git+https://github.com/django/django.git#egg=Django\nObtaining Django from git+https://github.com/django/django.git#egg=Django\nCloning https://github.com/django/django.git to ./virtualenvs/prp/src/django\nerror: RPC failed; result=56, HTTP code = 0\nfatal: The remote end hung up unexpectedly\nComplete output from command /usr/bin/git clone -q https://github.com/django/django.git /home/mamber/virtualenvs/prp/src/django:\n\n----------------------------------------\nCommand /usr/bin/git clone -q https://github.com/django/django.git     /home/mamber/virtualenvs/prp/src/django failed with error code 128 in None\nStoring complete log in /home/mamber/.pip/pip.log\n</code></pre>\n\n<p>I've tried with some other public repos and getting the same result. \nI also tried just cloning the repo, without virtualenv and pip, same result:</p>\n\n<pre><code>$ git clone https://github.com/django/django.git\nCloning into 'django'...\nerror: RPC failed; result=56, HTTP code = 0\nfatal: The remote end hung up unexpectedly\n</code></pre>\n\n<p>Maybe there is some timeout config I need to change. I see no traffic in my system monitor while waiting.</p>\n\n<p>I am doing that in a fresh installed Linux Mint, with fresh installed apt-get install git (with no configurations).</p>\n\n<p>Any ideas?</p>\n"},{"tags":["python","django","heroku"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":278,"score":1,"question_id":9308047,"title":"What is the Heroku equivalent for Django applications?","body":"<p>What is the Heroku equivalent for Django applications? (Edit: Question not relevant anymore as Heroku now supports Django)</p>\n"},{"tags":["django","django-models"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":2555,"score":4,"question_id":6085025,"title":"Django user profile","body":"<p>When adding additional fields to a user profile, such as location, gender, employer, etc., should I be adding additional columns to <code>django.contrib.auth.models.User</code> and saving it there? Or should I be creating a new table to save user profile information?</p>\n\n<p>Also, when a user uploads a profile picture, should I be saving this in the same table? (Note this is not a production server, I'm just doing this on my local runserver to figure things out). Thank you</p>\n"},{"tags":["python","django","django-models","django-forms","django-views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":143,"score":0,"question_id":7584977,"title":"In Django how can I create a user and a user profile at the same time from a single form submission","body":"<p>I am using extended version of the UserCreationForm to add users via my own template, which is working well.</p>\n\n<p>I would also like to include, as part of the same form template, a custom field from my userprofile model, so that when the user is created a user profile with my custom field would also be created.</p>\n\n<p>My approach to this has been to use two forms and combine them in one template with a single submit button.  </p>\n\n<p>The form displays exactly as I wanted, and returns validation errors correctly, but predictably it falls down when it comes to saving to the database.  When I call save() on the user form the user is created, but of course when I try to save the  userprofile form it throws an error because the user doesn't yet exist so it has not user associated to it.</p>\n\n<p>Although I think I understand the cause of my problem, I am at a loss as to how to fix it, I am not even sure if the approach that I have taken is correct.</p>\n\n<p>I have included all my code below including the model as well as the forms and the view just in case this helps anyone to better understand what I am trying to do:</p>\n\n<h1>UserProfile class (models.py)</h1>\n\n<pre><code>LEVEL = (\n    ('admin', 'administrator'),\n    ('team', 'team leader'),\n    ('member', 'team member'),\n)\n\nclass UserProfile(models.Model):\n    user = models.ForeignKey(User, unique=True)\n    level = models.CharField(choices=LEVEL, max_length=20)\n</code></pre>\n\n<h1>UserCreationForm and UserProfileForm classes (forms.py)</h1>\n\n<pre><code>class UserCreationFormExtended(UserCreationForm): \n    def __init__(self, *args, **kwargs): \n        super(UserCreationFormExtended, self).__init__(*args, **kwargs) \n        self.fields['first_name'].required = True\n        self.fields['last_name'].required = True\n\n    class Meta: \n       model = User \n       fields = ('username', 'email', 'first_name', 'last_name') \n\n\nclass UserProfileForm(forms.ModelForm):\n    def __init__(self, *args, **kwargs):\n        super(UserProfileForm, self).__init__(*args, **kwargs)  \n\n         self.fields[\"level\"].choices = ( ('admin', 'administrator'), ('team', 'team leader'), ('member', 'team member') )\n\n    class Meta:\n        model = UserProfile\n</code></pre>\n\n<h1>use_add view (views.py)</h1>\n\n<pre><code>def user_add(request):\n\n    if request.method == 'POST':\n        uform = UserCreationFormExtended(request.POST)\n        pform = UserProfileForm(request.POST)\n\n        if uform.is_valid():\n\n            uform.save()\n            pform.save()\n\n            return render_to_response('user/add_success.html', context_instance=RequestContext(request))\n\n        else:\n            return render_to_response('user/add.html', { 'uform' : uform, 'pform' : pform }, context_instance=RequestContext(request))\n\n    else:\n        uform = UserCreationFormExtended()\n        pform = UserProfileForm()\n\n        return render_to_response('user/add.html', { 'uform' : uform, 'pform' : pform }, context_instance=RequestContext(request))\n</code></pre>\n"},{"tags":["django","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13192015,"title":"Django Tastypie - automatically pick up current user resource","body":"<p>On my post method I'd like to automatically populate the 'owner' field with the current user (I'm using BasicAuthentication). I followed some of the code here: <a href=\"http://stackoverflow.com/questions/9785454/how-to-get-authorized-user-object-in-django-tastypie\">How to get authorized user object in django-tastypie</a> - but I've not quite got it working right yet.</p>\n\n<p>resources.py:</p>\n\n<pre><code>class QuestionResource(ModelResource):\n    owner = fields.ForeignKey(UserResource, 'owner')\n    class Meta:\n        queryset = Question.objects.all()\n        allowed_methods = ['get','post']\n        fields = ['title','type']\n        resource_name = 'question'\n        include_resource_uri = True\n        serializer = PrettyJSONSerializer()\n        authentication = BasicAuthentication()\n        authorization = Authorization()\n\n    def obj_create(self, bundle, request=None, **kwargs):\n        bundle = self.full_hydrate(bundle, request)\n        return bundle\n\n    def obj_update(self, bundle, request=None, **kwargs):\n        bundle = self.full_hydrate(bundle, request)\n        return bundle\n\n    def full_hydrate(self, bundle, request=None):\n        bundle = self.hydrate(bundle, request)\n        return bundle\n\n    def hydrate(self, bundle, request=None):\n        bundle.obj.owner = User.objects.get(pk = request.user.id)\n        return bundle\n</code></pre>\n\n<p>If I issue the following:</p>\n\n<pre><code>curl -u USERNAME:XXXXXXX --dump-header - -H \"Accept: application/json\" -H \"Content-Type: application/json\" -X POST --data \"{\\\"title\\\":\\\"my new question\\\",\\\"type\\\":\\\"multichoice\\\"}\" http://localhost/python/mquiz/api/v1/question/\n</code></pre>\n\n<p>I get the response:</p>\n\n<pre><code>HTTP/1.1 201 CREATED\nDate: Fri, 02 Nov 2012 08:28:05 GMT\nServer: Apache/2.2.22 (Ubuntu)\nVary: Accept-Language,Cookie,Accept-Encoding\nLocation: http://localhost/python/mquiz/api/v1/question/None/\nContent-Language: en-us\nContent-Length: 0\nContent-Type: text/html; charset=utf-8\n</code></pre>\n\n<p>So it appears as if it has all worked, but there's nothing added to the database, and the Location looks wrong (with the /None/ at the end).</p>\n\n<p>I'm sure it's something to do with the line \"bundle.obj.owner = User.objects.get(pk = request.user.id)\". If I use \"bundle.obj.owner = request.user.id\" then I get the error:</p>\n\n<pre><code>\"error_message\": \"Cannot assign \\\"3L\\\": \\\"Question.owner\\\" must be a \\\"User\\\" instance.\"\n</code></pre>\n\n<p>As far as I can tell the bundle.obj.owner needs to be in the form: '/python/mquiz/api/v1/user/3/' - if I use this as the owner param in the data in my curl request (and remove my custom hydrate method), then it all works fine and gets added to the database. So how can I transform my User instance into the form that will be accepted?</p>\n\n<p>Any help much appreciated.</p>\n"},{"tags":["python","django","django-piston"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13194297,"title":"AttributeError: 'TestHandler' object has no attribute 'model' in django piston","body":"<p>This is a test.py file that tries to send data to the api endpoint:</p>\n\n<pre><code>import os\nimport requests\n\n\nimport uuid\n\n\ndef get_uid():\n    return str(uuid.uuid4())\noauth_consumer_key = 'abcd'\noauth_signature = 'efgh'\n\noauth_signature_method = 'PLAINTEXT'\noauth_timestamp ='132798314211'\noauth_nonce = get_uid() + \"aa\"\n\noauth_token_secret = \"\"\nx_auth_mode = 'client_auth'\nx_auth_username = ''\nx_auth_password = ''\nuserid = ''\n\ninstagram_id = \"asdas\"\ninstagram_token = \"asdas\"\n\nparams = {\n\n            'oauth_consumer_key':oauth_consumer_key,\n            'oauth_signature':oauth_signature,\n            'oauth_signature_method':oauth_signature_method,\n            'oauth_timestamp': oauth_timestamp,\n            'oauth_nonce': get_uid(),\n            'instagram_id' : instagram_id,\n            'instagram_token':instagram_token,            \n            }\n\nurl = 'http://localhost:8000/instagram/signin/'\ndata = {'instagram_id':instagram_id,'instagram_token':instagram_token}\n\nr = requests.post(url,params)\n\nprint r.content\n</code></pre>\n\n<p>This is my Testhandler:</p>\n\n<pre><code>class TestHandler(AnonymousBaseHandler):\n\n\n\n    def read(self,request,action=None):\n\n        \"\"\"Get request to get the instagram code\n        \"\"\"\n        print action\n\n        if action == \"signin\":\n            return \"hello121\"\n            #self.instagram_signin(request)\n\n\n\n\n    def instagram_signin(self,request):\n        \"\"\"\n            Check if the instagram user exists in the database\n        \"\"\"\n        return \"Yes!\"\n</code></pre>\n\n<p>Yes, as basic as that and it returns an error:</p>\n\n<pre><code> File \"/usr/local/lib/python2.7/dist-packages/django_piston-0.3dev-py2.7.egg/piston/handler.py\", line 105, in create\n    except self.model.DoesNotExist:\n\nAttributeError: 'TestHandler' object has no attribute 'model'\n</code></pre>\n\n<p>The app is registered in settings.py. I have done syncdb multiple times. Restarted server. Restarted system and still can't get this figured out.</p>\n"},{"tags":["python","database","django","data-migration","schema-migration"],"answer_count":7,"favorite_count":21,"up_vote_count":24,"down_vote_count":1,"view_count":3147,"score":23,"question_id":426378,"title":"What is your favorite solution for managing database migrations in django?","body":"<p>I quite like Rails' database migration management system.  It is not 100% perfect, but it does the trick.  Django does not ship with such a database migration system (yet?) but there are a number of open source projects to do just that, such as django-evolution and south for example.</p>\n\n<p>So I am wondering, what database migration management solution for django do you prefer? (one option per answer please)</p>\n"},{"tags":["python","django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13194193,"title":"Error running indivo_server","body":"<p>I am creating a health record application using <code>indivo_server</code>.I plan to customize this application for my needs. For this I am using PostgreSQL 8.4 database server, Python 2.6, Django 1.3.1 and Ubuntu 11.4(Natty). But I can't run the <code>indivo_server</code> app. I get the following error :</p>\n\n<blockquote>\n  <p>We're sorry. You have reached a page that has been disconnected or is\n  no longer in service, if you feel like you've reached this page in\n  error, please check the url and try your connection again.</p>\n</blockquote>\n\n<p>But I can sync my DB. How do I solve this? </p>\n"},{"tags":["django","ipython","pytz"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":202,"score":3,"question_id":11708821,"title":"Django IPython sqlite complains about naive datetime","body":"<p>I have a new project in Django 1.4, using sqlite db. Also using django_extenstions' shell_plus with no problems.</p>\n\n<p>When I installed IPython, both <code>shell</code> and <code>shell_plus</code> started to complain about:</p>\n\n<pre><code>/path/to/my/virtualenv/lib/python2.7/site-packages/django/db/backends/sqlite3/base.py:50:\nRuntimeWarning: SQLite received a naive datetime (2012-07-29 13:15:45.229464) while time zone support is active.\n</code></pre>\n\n<p>It seems IPython itself uses unaware datetimes. How can this be fixed?</p>\n\n<p><strong>EDIT:</strong>    </p>\n\n<p>I don't want to disable Django's timezone support.</p>\n"},{"tags":["django","django-class-based-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13193350,"title":"Django reverse class based views by function name do not work","body":"<p>According to the django docs, viewname is either the function name or the url pattern name. But reversing an url like this 'reverse(MyView.as_view())' turns into a NoReverseMatch exception. Is there any way to reverse class based view by function name?</p>\n"},{"tags":["python","django","heroku","gunicorn"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13192994,"title":"Foreman start can't find Procfile, deploying Django app to Heroku","body":"<p>Seems like a fairly simple problem, but can't seem to figure it out. I've been following Heroku's Django instructions (https://devcenter.heroku.com/articles/django#using-a-different-wsgi-server)</p>\n\n<p>I'm trying to create a Procfile, run it locally with Foreman start. I've downloaded and installed Gunicorn and Gevent already, manually added a .txt file called Procfile in my root (let me know if there's a better way to do this then adding new text file and naming it Procfile), but Foreman start keeps returning </p>\n\n<pre><code> (venv)c:\\users\\chris\\hellodjango&gt;foreman start    \n ERROR: Procfile does not exist.\n</code></pre>\n\n<p>Here is my directory:</p>\n\n<pre><code>hellodjango/\n.gitignore\nmanage.py\nrequirements.txt\nProcfile.txt\nhellodjango/\n    __init__.py\n    __init__.pyc\n    settings.py\n    settings.pyc\n    urls.py\n    urls.pyc\n    wsgi.py\n    wsgi.pyc\nvenv/\n    Include/\n    Lib/\n    Scripts/ \n</code></pre>\n\n<p>My requirements.txt contents are </p>\n\n<pre><code>Django==1.4.2\ndistribute==0.6.28\ndj-database-url==0.2.1\npsycopg2==2.4.5\nwsgiref==0.1.2\ngunicorn==0.15.0\n</code></pre>\n\n<p>And my Procfile.txt contents are</p>\n\n<pre><code>web: gunicorn hellodjango.wsgi -b 0.0.0.0:$PORT\n</code></pre>\n\n<p>What am I missing and why can't my app find ProcFile?</p>\n"},{"tags":["python","django","list","dictionary"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13192373,"title":"Dictionary keys are not coming in serial","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/60848/how-do-you-retrieve-items-from-a-dictionary-in-the-order-that-theyre-inserted\">How do you retrieve items from a dictionary in the order that they’re inserted?</a>  </p>\n</blockquote>\n\n\n\n<p>I have an issue with django view and template </p>\n\n<p>After getting details related to a meeting like </p>\n\n<pre><code>        for meeting in get_meetings:\n           if meeting.venue_id ==None:\n                 mee_data = {} \n                 mee_data['id'] = meeting.id\n                 getdate = meeting.meeting_datetime\n                 mee_data['date'] = getdate.strftime(\"%Y-%m-%d\")\n                 mee_data['end_time'] = meeting.end_time\n                 mee_data['meeting_duration'] = meeting.meeting_duration \n                 mee_data['start_time'] = meeting.start_time \n                 mee_data['meetingID'] = meeting.meetingID\n                 mee_data['id'] = meeting.id\n                 mee_data['start_time'] = meeting.start_time \n\n                 mee_data['name'] = meeting.name\n\n                 getall.append(mee_data) \n</code></pre>\n\n<p>Where getall is a list i have declared above </p>\n\n<p>Now after appending the dictionary data.</p>\n\n<p>I am expecting the result in my template is like </p>\n\n<pre><code>[{\"id\": \"REG_431103567\", \"date\": \"\", \"end_time\": \"\", \"meeting_duration\": \"\", \"start_time\": \"2012-10-29\", \"meetingID\": 192dnjd, \"name\": \"TEsts\"},...]\n</code></pre>\n\n<p>basically the order of keys but unfortunately the result is coming like .</p>\n\n<pre><code>[{\"meetingID\": \"REG_431103567\", \"start_time\": \"\", \"meeting_duration\": \"\", \"end_time\": \"\", \"date\": \"2012-10-29\", \"id\": 192, \"name\": \"TEsts\"},...]\n</code></pre>\n\n<p>Please suggest me what should i do here so that i could get the keys and their corresponding values in proper way .</p>\n\n<p>Thanks </p>\n"},{"tags":["python","django","mvc","metaclass"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13189837,"title":"Django duplicate model definition/fields","body":"<p>Here's what I was using:</p>\n\n<pre><code>class a(models.Model):\n    x = models.CharField()\n\nclass b(a):\n    pass\n</code></pre>\n\n<p>The problem with this is that when an instance of b is created, an instance of a is also created, I'm guessing this is because b is inheriting some property that Django assigns such as the database table. I would like to have b have all the fields and methods so that this duplication does not happen. How can this be done <strong>without simply copy and pasting all the code from a to b or using an abstract base class c and have a and b both inherit from c (I'd like to only have two models/classes)?</strong> Would you have to use metaclasses?</p>\n"},{"tags":["python","django","git","heroku","gitignore"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":52,"score":3,"question_id":13192134,"title":".gitignore not ignoring the files Django","body":"<p>So I'm testing out Heroku with a dummy app called hellodjango, and pushing everything to git.</p>\n\n<p>Added my .gitignore file (tell me if I'm wrong, I created a text document called django.gitignore, and the contents are 1 line, no spaces, venv*.log*.pot*.pyclocal_settings.py.</p>\n\n<p>Not sure what I'm doing wrong, but here is my directory</p>\n\n<pre><code>hellodjango/\n    django.gitignore\n    manage.py\n    requirements.txt\n    hellodjango/\n        __init__.py\n        __init__.pyc\n        settings.py\n        settings.pyc\n        urls.py\n        urls.pyc\n        wsgi.py\n        wsgi.pyc\n    venv/\n        Include/\n        Lib/\n        Scripts/\n</code></pre>\n\n<p>So I don't want to stage any .pyc files or the venv folder. </p>\n\n<p>In my command line, I enter</p>\n\n<blockquote>\n  <p>git init</p>\n</blockquote>\n\n<pre><code>Initialized empty Git repository in /Users/Chris/hellodjango/.git/\n&gt;git add .\n&gt;git status\n</code></pre>\n\n<p>When I enter git status, all of the files in venv and .pyc are staged. Why is .gitignore not working?</p>\n"},{"tags":["python","django","django-cms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13162899,"title":"How do I properly extend the PlaceholderAdmin class in django-cms?","body":"<p>I'm having a problem extending the <code>PlaceholderAdmin</code> class provided within <a href=\"https://www.django-cms.org/\" rel=\"nofollow\">django-cms</a> and was hoping someone would be able to point me in the direction of a fix.</p>\n\n<p>Here's an overview of what I'm trying to do - I'm trying to create case studies which will show various types of content within a page.  These content areas are divided into three areas: <em>challenge</em>, <em>approach</em> and <em>results</em>.  I've represented these fields as <code>PlaceholderField</code>s within <code>models.py</code>.  Within these <code>PlaceholderField</code>s are a number of different <code>CMSPlugin</code> and <code>AbstractText</code> items which a user is then able to place within each of the <code>PlaceholderField</code> items in the standard way.</p>\n\n<p>This system worked fine in its original implementation i.e. register <code>PlaceholderAdmin</code> within <code>admin.py</code>.  However I need to fine-tune the appearance of the admin system to allow a user to crop images etc. so I've first extended <code>PlaceholderAdmin</code> and then registered this extended class.  The image cropping is dealt with by <a href=\"https://github.com/jonasundderwolf/django-image-cropping\" rel=\"nofollow\">django-image-cropping</a>.</p>\n\n<p>As a result of extending <code>PlaceholderAdmin</code> within <code>CaseStudyAdmin</code> I've lost the ability to use the <code>CMSPlugin</code> items within my <code>models.py</code>.  An example of the error message I get when I try and create a new plugin item within one of the <code>PlaceholderFields</code> is:</p>\n\n<pre><code>Forbidden (403)\nCSRF verification failed. Request aborted.\n</code></pre>\n\n<p>My assumption is that I am adding the <code>PlaceholderField</code>s as <code>fieldsets</code> within <code>admin.py</code> incorrectly.\n</p>\n\n<pre><code>...\n('placeholders', {\n    'fields': ('challenge_content', 'approach_content',\n        'results_content')\n})\n...\n</code></pre>\n\n<p>Does anyone have any suggestions as to how I can properly do this?</p>\n\n<hr/>\n\n<p><strong>models.py</strong>\n</p>\n\n<pre><code>from cms.models import CMSPlugin\nfrom cms.models.fields import PlaceholderField\nfrom cms.plugins.text.models import AbstractText\n\nclass CaseStudy(models.Model):\n    title = models.CharField(max_length=255, unique=True, blank=False,\n        help_text=\"title of the case study. Can be anything up to 255 \\\n        characters.\")\n    # more fields...\n    challenge_content = PlaceholderField('challenge_content', related_name='+')\n    approach_content = PlaceholderField('approach_content', related_name='+')\n    results_content = PlaceholderField('results_content', related_name='+')\n\n\"\"\"\nPlugins used within django-cms\n\"\"\"\n\nclass CaseStudyLargeImagePluginModel(CMSPlugin):\nimage = ProcessedImageField(upload_to=image_filename, blank=False,\n    null=True, verbose_name='Image',  help_text=\"Main image should be no \\\n    smaller than 800px wide\", format='JPEG', options={'quality': 90})\n\n\nclass CaseStudyDoubleImagePluginModel(CMSPlugin):\n    left_image = ProcessedImageField(upload_to=image_filename, blank=False,\n        null=True, verbose_name='Left Image',  help_text=\"Left image \\\n        should be no smaller than 425 x 305px\",\n        processors=[ResizeToFill(425, 305)], format='JPEG',\n        options={'quality': 90})\n    right_image = ProcessedImageField(upload_to=image_filename, blank=False,\n        null=True, verbose_name='Right Image',  help_text=\"Right image \\\n        should be no smaller than 425 x 305px\",\n        processors=[ResizeToFill(425, 305)], format='JPEG',\n        options={'quality': 90})\n\n\nclass CaseStudyCalloutPluginModel(AbstractText):\n    callout_text = models.TextField()\n\n\nclass CaseStudyTripleTextPluginModel(CMSPlugin):\n    left_header = models.CharField(max_length=50, help_text=\"Header of item \\\n        appearing on the left of the page.  50 characters max length.\")\n    left_text = models.TextField(help_text=\"Text to appear on the left of the \\\n        page.\")\n    middle_header = models.CharField(max_length=50, help_text=\"Header of item \\\n        appearing in the middle of the page.  50 characters max length.\")\n    middle_text = models.TextField(help_text=\"Text to appear in the middle of \\\n        the page.\")\n    right_header = models.CharField(max_length=50, help_text=\"Header of item \\\n        appearing on the right of the page.  50 characters max length.\")\n    right_text = models.TextField(help_text=\"Text to appear on the right of \\\n        the page.\")\n</code></pre>\n\n<p><strong>admin.py</strong>\n</p>\n\n<pre><code>from django.contrib import admin\nfrom cms.admin.placeholderadmin import PlaceholderAdmin\nfrom image_cropping import ImageCroppingMixin\nfrom case_studies.models import CaseStudy\n\n\nclass CaseStudyAdmin(ImageCroppingMixin, PlaceholderAdmin):\n    fieldsets = (\n        ('Active', {\n            'fields': ('active', )\n        }),\n        ('Text content', {\n            'fields': ('title', 'sub_title', 'large_teaser_copy', )\n        }),\n        ('Images', {\n            'fields': ('large_teaser_image', 'cropped_teaser_image',\n                'hero_image', 'cropped_hero_image',)\n        }),\n        ('Related content', {\n            'description': 'These fields determine how this case study is \\\n            related to other areas of the site',\n            'fields': ('client', 'services', 'tags',)\n        }),\n        ('Look and feel', {\n            'description': 'How you want this case study to look.',\n            'fields': ('background_colour', 'foreground_colour', )\n        }),\n        ('URL details', {\n            'classes': ('collapse',),\n            'fields': ('slug', 'site_url', )\n        }),\n        ('placeholders', {\n            'fields': ('challenge_content', 'approach_content',\n                'results_content')\n        })\n    )\n    filter_horizontal = ('services', )\n    list_display = ('active', 'title', 'large_teaser_copy',)\n    list_display_links = ('title',)\n    list_editable = ('active',)\n    list_filter = ('active',)\n    prepopulated_fields = {'slug': ('title',), }\n\n\nadmin.site.register(CaseStudy, CaseStudyAdmin)\n</code></pre>\n\n<p><strong>cms_plugins.py</strong>\n</p>\n\n<pre><code>from cms.plugin_base import CMSPluginBase\nfrom cms.plugin_pool import plugin_pool\nfrom django.utils.translation import ugettext_lazy as _\nfrom case_studies.models import CaseStudyCalloutPluginModel\nfrom case_studies.models import CaseStudyDoubleImagePluginModel\nfrom case_studies.models import CaseStudyLargeImagePluginModel\nfrom case_studies.models import CaseStudyTripleTextPluginModel\n\nclass LargeImagePlugin(CMSPluginBase):\n    model = CaseStudyLargeImagePluginModel\n    name = _('Large image')\n    render_template = 'work/plugins/large_image.html'\n\n    def render(self, context, instance, placeholder):\n        context.update({\n            'object': instance,\n            'placeholder': placeholder\n        })\n        return context\n\n\nclass DoubleImagePlugin(CMSPluginBase):\n    model = CaseStudyDoubleImagePluginModel\n    name = _('Double image')\n    render_template = 'work/plugins/double_image.html'\n\n    def render(self, context, instance, placeholder):\n        context.update({\n            'object': instance,\n            'placeholder': placeholder\n        })\n        return context\n\n\nclass CallOutOnLeftPlugin(CMSPluginBase):\n    model = CaseStudyCalloutPluginModel\n    name = _('Callout on left')\n    render_template = 'work/plugins/callout_on_left.html'\n\n    def render(self, context, instance, placeholder):\n        context.update({\n            'object': instance,\n            'placeholder': placeholder\n        })\n        return context\n\n\nclass CallOutOnRightPlugin(CMSPluginBase):\n    model = CaseStudyCalloutPluginModel\n    name = _('Callout on right')\n    render_template = 'work/plugins/callout_on_right.html'\n\n    def render(self, context, instance, placeholder):\n        context.update({\n            'object': instance,\n            'placeholder': placeholder\n        })\n        return context\n\n\nclass TripleTextBlockPlugin(CMSPluginBase):\n    model = CaseStudyTripleTextPluginModel\n    name = _('Row of three text blocks')\n    render_template = 'work/plugins/triple_text_block.html'\n\n    def render(self, context, instance, placeholder):\n        context.update({\n            'object': instance,\n            'placeholder': placeholder\n        })\n        return context\n\n\nplugin_pool.register_plugin(LargeImagePlugin)\nplugin_pool.register_plugin(DoubleImagePlugin)\nplugin_pool.register_plugin(CallOutOnLeftPlugin)\nplugin_pool.register_plugin(CallOutOnRightPlugin)\nplugin_pool.register_plugin(TripleTextBlockPlugin)\n</code></pre>\n"},{"tags":["python","django","validation"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":13153376,"title":"Python alphanumeric Validation server side usign regular expression","body":"<p>I have this code in python. \nActually i wanted to validate the password field at server side using python. i want password to be alphanumeric in nature and thats what i have done so far</p>\n\n<pre><code>def valid():\n    num = \"[a-zA-Z0-9]\"\n    pwd = \"asdf67AA\"\n    match  = re.match(pwd, num)\n    if match:\n        return True\n    else:\n        return False\n</code></pre>\n\n<p>its always returning false . <strong>It does not hit the IF condition</strong>. whats that i am missing</p>\n"},{"tags":["python","django","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13189978,"title":"Django form not refreshing once updated","body":"<p>Iam working in django forms using python.\nIam facing an issue while saving editform.</p>\n\n<p>If iam saving the form with charfield and textfield changes, its working fine(refreshing with the updated content).\nBut if i save the form by changing the imagefield and charfield, its updating but not refreshing the page.</p>\n\n<p>I want the page to be refreshed once the details updated or saved.\nThanks in Advance.</p>\n\n<p>MY VIEWS.PY:</p>\n\n<pre><code>def profile_page(request,type = None):\n    profile_list = get_object_or_404(UserProfile, visit_id = request.user.username, profile_type = type)\n    image = UserProfile.objects.get(visit_id = request.user.username, profile_type = type).image\n    if request.method == \"POST\":\n        form = UserProfileForm(request.POST, request.FILES)\n        if form.is_valid():\n            new_image = form.cleaned_data['image']\n            if new_image == None:\n                current_image=form.fields['image'].initial = profile_list.image\n            else:\n                person = UserenaSignup.objects.get(visitid = request.user.username).id\n                UserImage.objects.filter(username = person, profile_type = type).delete()\n                current_image = UserImage.objects.create(username_id = person, profile_type = type, image = form.cleaned_data['image']).image\n            UserProfile.objects.filter(visit_id = request.user.username, profile_type = type).update(username            = form.cleaned_data['username'],\n                                                                                                  designation            = form.cleaned_data['designation'],\n                                                                                                  image                  = current_image,\n                                                                                 )\n            return render_to_response('profile_page.html',locals(),context_instance = RequestContext(request))\n        else:\n            form = UserProfileForm(instance = profile_list)\n            return render_to_response('profile_page.html', locals(), context_instance=RequestContext(request))\n    else:\n        form = UserProfileForm(instance = profile_list)\n    return render_to_response('profile_page.html',locals(),context_instance = RequestContext(request))\n</code></pre>\n"},{"tags":["android","django","dalvik","multipartentity"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":37,"score":2,"question_id":13190009,"title":"Android post image to the Server using MultipartEntity","body":"<p>I have been trying to upload an image and data to <strong><em>Django</em></strong> server. I have included <code>apache-mime4j.0.6.jar</code> and <code>httpmime4.0.1.jar</code> libraries ( Project->build path->Add external jar files) \nAnd here's the code to upload an image.</p>\n\n<pre><code>HttpResponse response = null;\ntry {\n    HttpPost httppost = new HttpPost(\"http://10.0.2.2:8000/mobile\");\n    //  HttpPost httppost = new HttpPost(\"some url\");\n\n    MultipartEntity multipartEntity = new MultipartEntity(); //MultipartEntity multipartEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);  \n    multipartEntity.addPart(\"name\", new StringBody(\"nameText\"));\n    multipartEntity.addPart(\"place\", new StringBody(\"placeText\"));\n    multipartEntity.addPart(\"tag\", new StringBody(\"tagText\"));\n    //multipartEntity.addPart(\"Description\", new StringBody(Settings.SHARE.TEXT));\n    multipartEntity.addPart(\"Image\", new FileBody(destination));\n    httppost.setEntity(multipartEntity);\n\n    httpclient.execute(httppost, new PhotoUploadResponseHandler());\n\n  } catch (Exception e) {\n    Log.e( \"Error\",\"error\");\n  } \n</code></pre>\n\n<p>Error message:</p>\n\n<pre><code>Could not find class 'org.apache.http.entity.mime.MultipartEntity'\n</code></pre>\n\n<p>And I have tried manually creating libs folder and manually including jar files into /libs folder. \nWhen I do that It fails to compile. </p>\n\n<p>Error: </p>\n\n<pre><code>Conversion to Dalvik format failed with error 1  Unknown Android Packaging Problem\n</code></pre>\n\n<p>Tried creating fresh application including libraries. And I encountered the same error. I've tried everything possible. Can anyone tell me why this happens and how to fix it. Any help would be greatly appreciated!!                   </p>\n"},{"tags":["python","django","postgresql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":30,"score":-2,"question_id":13190696,"title":"I am created my app using python and Django framwork.I can able to sync my db using migration but I can't run my application","body":"<p>I am using postgresql and created my db.while running my application i can getting this error.</p>\n\n<p><strong>\"We're sorry. You have reached a page that has been disconnected or is no longer in service, if you feel like you've reached this page in error, please check the url and try your connection again.\"</strong></p>\n\n<p>any one tell me how can i resolve this?</p>\n"},{"tags":["django","annotations"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13190183,"title":"django annotate mutiple times wouldn't work","body":"<p>I have a queryset with multiple annotates cross different tables. I can't get the right result.</p>\n\n<pre><code>Class User\n    id_user\n\nClass CustomProfile\n    id_profile\n\nClass Goals\n    id_goal\n    user = models.ForeignKey('auth.User', db_column='id_user')\n    status = models.IntegerField(max_length=1,choices\n              =constants.GOAL_STATUS,default=constants.activate)\n\nClass Checkins\n    id_checkin = models.AutoField(primary_key=True)\n    goal = models.ForeignKey(Goals, db_column='id_goal')\n    mark = models.IntegerField(max_length=1, choices=constants.MARKS)  # yes or no\n    rating_score = modelsIntegerField()\n</code></pre>\n\n<p>My goal is to get \"total # of goals\", \"total # of checkins\", and \"total # of rating_score\" for each user. I have code like:</p>\n\n<pre><code>    CustomProfiles = CustomProfile.filter(\n        user__goals__status = constants.activate).filter(\n        user__goals__checkins__mark = constants.yes).annotate(\n            num_goals = Count('user__goals', distinct=True),\n            num_checkins = Count('user__goals__checkins__pk', distinct=True),\n            num_props = Sum('user__goals__checkins__rating_score', distinct=True)\n        ).values('facebook_name', 'image','num_goals','num_checkins', 'num_props')\n</code></pre>\n\n<p>Based on my database, the result should be</p>\n\n<pre><code>num_goals = 1\nnum_checkins = 2\nnum_props = 1\n</code></pre>\n\n<p>But the queryset has wrong result:</p>\n\n<pre><code>num_goals = 1\nnum_checkins = 3 (I have 3 checkins in db, but only 2 yes mark)\nnum_props = 2\n</code></pre>\n\n<p>I also attached sql query generated by debug toolbar</p>\n\n<pre><code>SELECT \"custom_profiles\".\"facebook_name\", \"custom_profiles\".\"image\", \nSUM(T6.\"rating_score\") AS \"num_props\", COUNT(DISTINCT T6.\"id_checkin\") AS \"num_checkins\", \nCOUNT(DISTINCT \"goals\".\"id_goal\") AS \"num_goals\" FROM \"custom_profiles\" LEFT OUTER JOIN \n\"auth_user\" ON (\"custom_profiles\".\"id_user\" = \"auth_user\".\"id\") LEFT OUTER JOIN \"goals\" ON \n(\"auth_user\".\"id\" = \"goals\".\"id_user\") INNER JOIN \"goals\" T4 ON (\"auth_user\".\"id\" = \nT4.\"id_user\") INNER JOIN \"checkins\" ON (T4.\"id_goal\" = \"checkins\".\"id_goal\") LEFT OUTER \nJOIN \"checkins\" T6 ON (\"goals\".\"id_goal\" = T6.\"id_goal\") WHERE \n(\"custom_profiles\".\"facebook_id\" IN (3328752, 545148581, 1476421191) AND \"goals\".\"status\" \n= 1 AND \"checkins\".\"mark\" = 1 ) GROUP BY \"custom_profiles\".\"id\", \n\"custom_profiles\".\"about_me\", \"custom_profiles\".\"facebook_id\", \n\"custom_profiles\".\"access_token\", \"custom_profiles\".\"facebook_name\", \n\"custom_profiles\".\"facebook_profile_url\", \"custom_profiles\".\"website_url\", \n\"custom_profiles\".\"blog_url\", \"custom_profiles\".\"date_of_birth\", \n\"custom_profiles\".\"gender\", \"custom_profiles\".\"raw_data\", \n\"custom_profiles\".\"facebook_open_graph\", \"custom_profiles\".\"image\", \n\"custom_profiles\".\"id_user\", \"custom_profiles\".\"minutes_diff\", \n\"custom_profiles\".\"reminder_email\", \"custom_profiles\".\"digest_email\", \n\"custom_profiles\".\"last_datetime_friends_fetch\", \"custom_profiles\".\"modified\", \n\"custom_profiles\".\"created\"\n</code></pre>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13189141,"title":"How to Remove Newline symbols Produced by some Field of Django Custom Form in Template?","body":"<p>Custom Form:</p>\n\n<pre><code>CALLMODE_CHOICES = ( \n    (1,'a'), \n    (2,'b'), \n    (3,'c'), \n) \nclass EcmNoneTelForm(forms.Form): \n    callmode = forms.ChoiceField(choices=CALLMODE_CHOICES, required=False) \n</code></pre>\n\n<p>Template:</p>\n\n<pre><code>{{form.callmode}}\n</code></pre>\n\n<p>Each line has newline:</p>\n\n<pre><code>&lt;select name=\"callmode\" id=\"id_callmode\"&gt; \n&lt;option value=\"1\"&gt;a&lt;/option&gt; \n&lt;option value=\"2\"&gt;b&lt;/option&gt; \n&lt;option value=\"3\"&gt;c&lt;/option&gt; \n&lt;/select&gt;\n</code></pre>\n\n<p>I wanna all content to be displayed in a row, because I wanna combine {{form.callmode}} with some other string in js script:</p>\n\n<pre><code>var str = \"&lt;form&gt;\" + \"{{form.callmode}}\" + \"&lt;/form&gt;\";\n</code></pre>\n"},{"tags":["python","django","django-models","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":91,"score":2,"question_id":9879687,"title":"Adding a ManyToManyWidget to the reverse of a ManyToManyField in the Django Admin","body":"<p>Let's say I have a simple blog app in Django 1.4:</p>\n\n<pre><code>class Post(models.Model):\n    title = …\n    published_on = …\n    tags = models.ManyToManyField('Tag')\n\nclass Tag(models.Model):\n    name = …\n</code></pre>\n\n<p>i.e. a post has many tags. On the Django admin, I get a nice little <code>&lt;select multi&gt;</code> if I include <code>tags</code> in the <code>fields</code> for the <code>PostAdmin</code>. Is there an easy way to include the list of the posts (as a simple <code>&lt;select multi&gt;</code>) in the <code>TagAdmin</code>? I tried putting <code>fields = ['name', 'posts']</code> in the <code>TagAdmin</code> and got an <code>ImproperlyConfigured</code> error. (same result for <code>post_set</code>).</p>\n\n<p>I'm alright with Django, so could whip up a proper AdminForm and Admin object, but I'm hoping there a Right Way™ to do it.</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13189563,"title":"How can i insert parameters in raw sql in django python","body":"<p>I have this code</p>\n\n<pre><code>myquery =   '''SELECT * from users \n               where id = 10 and\n               city = 20 and \n               state = 30'''\n</code></pre>\n\n<p>now i want to replace those with three variables like</p>\n\n<pre><code>var_id = bla\nvar_city = bla\nvar_state = bla\n</code></pre>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13189115,"title":"Can i use django raw on query list","body":"<p>I just want to know that just like we can apply filters on query list as many times.</p>\n\n<p>Can i apply raw sql on query list like this</p>\n\n<p><code>models.Burn.active.filter(some filter).raw('custom sql')</code></p>\n"},{"tags":["python","django","web-frameworks","web2py","flask"],"answer_count":6,"favorite_count":2,"up_vote_count":13,"down_vote_count":0,"view_count":1824,"score":13,"question_id":7043376,"title":"Which Python web framework that novice web developer should learn? Flask? Django? or ...?","body":"<p>I'm a former sysadmin, an intermediate programmer with zero experience on web development(I only code system script with Bash/Perl before). I learned Python in 6 months &amp; coded some system tools with it. Next month I'm going to become a web developer(job switching). I want to lean a Python web framework have gentle learning curve, but not so limit, a framework that help me easily approach web development concepts &amp; process.</p>\n\n<p>I just had a glance at Flask, Jinja2, and think it quite nice. But i have to learn SQLAlchemy? (it seem quite complex)\nI heard alot about Django but it most fit for content-intensive webapp?</p>\n\n<ol>\n<li>Can you suggest me a Python web-framework? (repeat: i have no experience in web development, and need to learn fast)</li>\n<li>Can you suggest me some documentation/tutorials or books on that framework? (i not only need to learn framework, but also web development process) </li>\n</ol>\n\n<p>Thanks in advance! :)</p>\n"},{"tags":["python","django","django-templates","django-views","file-download"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13187401,"title":"Trouble downlaoding file using Django FileTransfers","body":"<p>I have am uploading a file through the admin section of my site that I would like to be able to be publicly downloaded through my website.  I know that the file I have uploaded has been successfully uploaded because I can view it in the App Engine Blob storage.  I am having trouble finding out what isn't working with the code below:</p>\n\n<p>relevant part of my modeL:</p>\n\n<pre><code>class CalendarEvent (models.Model):\n    file = models.FileField(upload_to='uploads/%Y/%m/%d/%H/%M/%S/')\n</code></pre>\n\n<p>in my views.py file the relevant code is:</p>\n\n<pre><code>def calendar(request):\n    events = CalendarEvent.objects.exclude(start__lt=datetime.datetime.now()).order_by('start')\n    return render_to_response('home/calendar.html',{'events': events},context_instance=RequestContext(request))\n\ndef download_handler(request, pk):\n    upload = get_object_or_404(CalendarEvent, pk=pk)\n    return serve_file(request, upload.file, save_as=True)\n</code></pre>\n\n<p>in my template the relevant code is:</p>\n\n<pre><code>{% for e in events %}\n    {% url Calendar.views.download_handler pk=e.pk as fallback_url %}\n    &lt;a href=\"{% firstof e.file|public_download_url fallback_url %}\"&gt;Download&lt;/a&gt;\n{% endfor %}\n</code></pre>\n"},{"tags":["python","django","apache","deployment","wsgi"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":13179647,"title":"WSGI weirdness with PYthon/Django: serving alternating old and new versions of app","body":"<p>I never dug into how server tech like WSGI really worked underneath and thought I had a basic understanding until now...</p>\n\n<p><strong>What's the explanation for this type of behavior?</strong>: On an Apache2/WSGI/Django setup, after getting the new code on the dev server and \"reloading\" it by doing the prescribed <code>touch myapp.wsgi</code>, things started getting weird. On successive browser refreshes, I get either the old version of the app (from before pushing the new code) or the new one, RANDOMLY! It's like some threads/processes are still serving the old code while some have loaded the new code from the disk... <strong>What would be a simple explanation for this and how can I properly \"reload\" my app without restarting apache?</strong> Or where can I find a simple (better still, graphical/schematical) explanations of how things like WSGI, FCGI etc. work.</p>\n\n<p>Note: <em>I'm not a devops guy, but I've been forced into wrangling with things like this and I'm looking for any \"condensed\", \"crash course type\" knowledge on this, not the full fledged documentations for all the components...</em></p>\n"},{"tags":["python","django","django-models","many-to-many"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13176728,"title":"Django: How to check if object witch ManyToManyField contains the entire contents of other object ManyToManyField?","body":"<pre><code>class Hero(models.Model):\n   talents = models.ManyToManyField(Talent)\n   (...)\n\nclass Talent(models.Model)\n   required_talents = models.ManyToManyField('self', symmetrical=False)\n   (...)\n</code></pre>\n\n<p>I would like to create methond has_required_talents(self, talent) for Hero, which will check if this Hero has required_talents for chosen Talent. </p>\n\n<p>I tryed something like that:</p>\n\n<pre><code>def has_required_talents(self, talent)\n   required_list = talent.talents_required.values_list('id', flat=True)\n   hero_talents = self.hero.talents.values_list('id', flat=True)\n   if required_list in hero_talents:\n      return True\n   return False\n</code></pre>\n\n<p>Hovether it doesn't work properly, when i test it. Can you please help me solve this problem?</p>\n\n<p>My tests look like that:</p>\n\n<pre><code>class HeroTalents(TestCase):\n def setUp(self):\n    self.hero=Hero('Duck')\n    self.hero.save() \n\n def test_has_required_talents(self):\n    self.talent1 = Talent(name = \"Overpower\")\n    self.talent1.save()\n    self.talent2 = Talent(name = \"Overpower2\")\n    self.talent2.save()\n    self.talent2.talents_required.add(self.talent1)\n    self.assertFalse(self.hero.has_required_talents(self.talent2), \"test1\")\n    self.hero.talents.add(self.talent1)\n    self.assertTrue(self.hero.has_required_talents(self.talent2), \"test2\")\n    self.talent3 = Talent(name = \"Overpower3\")\n    self.talent3.save()\n    self.hero.talents.add(self.talent2)\n    self.assertTrue(self.hero.has_required_talents(self.talent3), \"test3\")\n    self.talent1.talents_required.add(self.talent3)\n    self.assertFalse(self.hero.has_required_talents(self.talent1), \"test4\")\n</code></pre>\n"},{"tags":["python","django","pinax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13186576,"title":"Installed the pinax requirements over the base.txt file - nothing works?","body":"<p>I installed the pinax requirements over the base.txt file \n.</p>\n\n<p>Now when I do python manage.py syncdb i get:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"manage.py\", line 20, in &lt;module&gt;\n    execute_from_command_line()\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line\n443, in execute_from_command_line\n    utility.execute()\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line\n382, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line\n261, in fetch_command\n    klass = load_command_class(app_name, subcommand)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line\n69, in load_command_class\n    module = import_module('%s.management.commands.%s' % (app_name, name))\n  File \"C:\\Python27\\lib\\site-packages\\django\\utils\\importlib.py\", line 35, in im\nport_module\n    __import__(name)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\commands\\syncdb.py\"\n, line 8, in &lt;module&gt;\n    from django.core.management.sql import custom_sql_for_model, emit_post_sync_\nsignal\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\sql.py\", line 6, in\n &lt;module&gt;\n    from django.db import models\n  File \"C:\\Python27\\lib\\site-packages\\django\\db\\__init__.py\", line 40, in &lt;modul\ne&gt;\n    backend = load_backend(connection.settings_dict['ENGINE'])\n  File \"C:\\Python27\\lib\\site-packages\\django\\db\\__init__.py\", line 34, in __geta\nttr__\n    return getattr(connections[DEFAULT_DB_ALIAS], item)\n  File \"C:\\Python27\\lib\\site-packages\\django\\db\\utils.py\", line 90, in __getitem\n__\n    self.ensure_defaults(alias)\n  File \"C:\\Python27\\lib\\site-packages\\django\\db\\utils.py\", line 80, in ensure_de\nfaults\n    conn.setdefault('TIME_ZONE', 'UTC' if settings.USE_TZ else settings.TIME_ZON\nE)\n  File \"C:\\Python27\\lib\\site-packages\\django\\utils\\functional.py\", line 185, in\ninner\n    return func(self._wrapped, *args)\nAttributeError: 'Settings' object has no attribute 'USE_TZ'\n</code></pre>\n\n<p>I really do not know how to fix that. Therefore I am happy for every idea/advice I get!!</p>\n"},{"tags":["django","django-authentication"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13186693,"title":"Why second user login redirects me to /accounts/profile/ url?","body":"<p>I am using Django built in view for user login:</p>\n\n<pre><code>url(r'^user/login/$', 'django.contrib.auth.views.login', {'template_name': 'users/templates/login.html'}, name='user-login'),\n</code></pre>\n\n<p>After login when I goto user/login again I can login second time. I submit the form and getting:</p>\n\n<blockquote>\n  <p>The current URL, accounts/profile/, didn't match any of these.</p>\n</blockquote>\n\n<p>I haven't declare this url in urls.py.</p>\n\n<p>What I am doing wrong? Why framework want to redirect to this url?</p>\n"}]}
{"total":41213,"page":6,"pagesize":100,"questions":[{"tags":["django","copy","models","m2m"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":2634,"score":2,"question_id":3834238,"title":"copy all fields of a django model instance","body":"<p>ok i think this is very basic, but since i'm new to django i don't know how to handle this..\nI need to copy an instance of a django-model. As explained <a href=\"http://code.djangoproject.com/ticket/4027\" rel=\"nofollow\">here</a>, there is a problem with copying many2many relations. But the attachment \"django-model-copying.diff\" has that function i guess. So i don't know - does my django already have that function? I don't know how to call it.. \nHelp would be appreciated :)</p>\n\n<p>thanks in advance!</p>\n"},{"tags":["django","web-applications"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13186311,"title":"Working with accounts and user generated data in Django","body":"<p>I haven't found any documentation or tutorials on this topic, haven't received any answers on the IRC channel either so it makes me think I'm looking for the wrong thing. Anyway, resorting to SO after several hours of searching. I'll try to describe what I'm after by example:</p>\n\n<ol>\n<li>I want to create a web application where user could create an account (this part is rather clear</li>\n<li>After logging in, user would be able to store his favorite meals</li>\n<li>When a user is logged in, he would see a list of his favorite meals and he could edit them</li>\n</ol>\n\n<p>I understand how user can create account and log in. But everything after that is kind of blurry. </p>\n\n<p>After user logs in, let's say he would be presented with a form he could fill in and save. How should the database (models) be designed to handle this? Would each user get his own table? How to retrieve the user stored data (i.e. favorite foods) from the database?</p>\n\n<p>These are the things I'm trying to figure out while learning django/programming in general. As I said I haven't found it described in any books, docs or tutorials I went through. </p>\n\n<p>I would appreciate if you could point me to the right direction. I feel like I'm missing something here.</p>\n"},{"tags":["python","django","eclipse","pip"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":37,"score":2,"question_id":13186421,"title":"How to uninstall pip packages which are installed from a *.txt file?","body":"<p>I have just installed a bunch of pip packages and now nothing works anymore. </p>\n\n<p>with:</p>\n\n<pre><code>pip install PATH/*.txt\n</code></pre>\n\n<p>Therefore how to uninstall my packages?</p>\n\n<p>PS.: I am running win7</p>\n"},{"tags":["django","django-admin"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13183187,"title":"no Polls in admin page [django Tutorial 2]","body":"<p>As I was following the <a href=\"https://docs.djangoproject.com/en/1.4/intro/tutorial02/\" rel=\"nofollow\">django tutorial part 2</a>,\nI got stuck because there is no <em>Polls</em> entry in the admin page.</p>\n\n<ul>\n<li>I have checked out the solution to this problem. They say that the poll app must be included in the <code>INSTALLED_APPS</code>. It is included.</li>\n<li>I have also restarted the server.</li>\n<li>I verified that I have done everything mentioned in the tutorial - everything worked up to now.</li>\n<li>The <code>admin.py</code> file from the polls directory seems to be ignored.</li>\n</ul>\n\n<p>I have absolutely no idea what's wrong.</p>\n\n<p>I run python 2.7.3 with django 1.4.2 on ubuntu 12.04 LTS.</p>\n\n<p><strong>[SOLVED]</strong>\nThis is something very strange.\nAs I was viewing my <code>admin.py</code> file with gedit, I have noticed that the key words, like <code>from</code> and <code>import</code> were not grey coloured, as they were in other <code>.py</code> files.\nSo I have copied and pasted the <code>models.py</code> file in the same folder, renamed it <code>admin.py</code>, deleted the old one and replaced the code with the original one. Now the key words were colored. And, yes, it worked perfectly!\nSo it must have been the way I created that <code>admin.py</code> file in ubuntu 12.04 LTS.</p>\n\n<p>It is a little bit embarrassing, but it took me a while to solve this, since it wasn't a programming problem, as I expected, but an OS one.</p>\n"},{"tags":["jquery","ajax","django","url"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13186341,"title":"Catch dynamic URL in jQuery when using Ajax","body":"<p>I am trying to catch a dynamic URL in jQUery. Normally I can catch the path and then load it like so:</p>\n\n<pre><code>    $('a').click(function(ev) {\n        ev.preventDefault();\n        var pathname = window.location.pathname;\n        $('#Div2').load(pathname+'question/');\n    });\n</code></pre>\n\n<p>However, the path that I am attempting to catch is loaded into the main page via Ajax so the URL that I capture belongs to the main page rather than the loaded page.</p>\n\n<p>The URL it catches: localhost/home/</p>\n\n<p>The URL I am attempting to catch: localhost/home/loaded_page</p>\n\n<p>Any thoughts on how I can capture the path for the loaded page? its dynamic (home/1, home/2, etc) so I can't just type in the full URL</p>\n"},{"tags":["django","django-admin","django-authentication"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":742,"score":1,"question_id":6779265,"title":"How can I not use Django's admin login view?","body":"<p>I created my own view for login. However if a user goes directly to /admin it brings them to the admin login page and doesn't use my custom view. How can I make it redirect to the login view used for everything not /admin? </p>\n"},{"tags":["django","gif","sorl-thumbnail"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":364,"score":3,"question_id":4711848,"title":"Animated gif resizing with sorl-thumbnail","body":"<p>Is there any possibility to resize animated gifs with sorl?</p>\n"},{"tags":["django","postgresql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13182937,"title":"Occasional IntegrityError on m2m fields using PostgreSQL","body":"<p>I can't detect any pattern, maybe 1 in each 1000 thousands edit of a certain model returns an IntegrityError on a m2m field. Most of the times this field wasn't even modified. When a model is saved I believe django always wipes the m2m field and then readds the items, right? I saw django calls <code>clear()</code> and then <code>add()</code>s the items. </p>\n\n<p>My code then fails with:</p>\n\n<blockquote>\n  <p>IntegrityError: duplicate key value violates unique constraint\n  \"app_model_m2m_field_key\" DETAIL:  Key (model1_id, model2_id)=(597,\n  1009) already exists.</p>\n</blockquote>\n\n<p>It seems like the add of items is performed before the items are cleared, which is very weird. I've tried to reproduce it but it's very hard, only happens occasionally. Any idea what could cause it? Could maybe setting auto commit solve this problem? </p>\n\n<p>Thanks in advance</p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13128231,"title":"Can I get Django to ignore duplicate fixtures on non PK unique constraints?","body":"<p>I have some base initial data that I want to include in a Django project. It fits perfectly as a fixture <em>except</em> that I might want to reject duplicates. This would mean that I could re-load the data in to an existing installation and it would only add the objects that don't already exist.</p>\n\n<p>I have used natural keys and foreign keying on the same field, so there are no questions of id clashes etc.</p>\n\n<p>Possible? I don't want to write a JSON importer when one already exists, and my data is already in a fixture.</p>\n"},{"tags":["python","django","django-models","decimal","money"],"answer_count":7,"favorite_count":14,"up_vote_count":23,"down_vote_count":0,"view_count":8869,"score":23,"question_id":2013835,"title":"Django: How should I store a money value?","body":"<p>I'm running into a paradigm problem here. I don't know whether I should store money as a Decimal(), or if I should store it as a string and convert it to a decimal myself. My reasoning is this:</p>\n\n<p><strong>PayPal requires 2 decimal places</strong>, so if I have a product that is 49 dollars even, PayPal wants to see 49.00 come across the wire. Django's DecimalField() doesn't set a decimal amount. It only stores a maximum decimal places amount. So, if you have 49 in there, and you have the field set to 2 decimal places, it'll still store it as 49. I know that Django is basically type casting when it deserializes back from the database into a Decimal (since Databases don't have decimal fields), so I'm not completely concerned with the speed issues as much as I am with the design issues of this problem. I want to do what's best for extensibility.</p>\n\n<p>Or, better yet, does anyone know how to configure a django DecimalField() to always format with the TWO_PLACES formatting style.</p>\n"},{"tags":["python","html","django","forms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13184973,"title":"Setting increasing ids in Django ChoiceField form","body":"<p>Is there a way to change id values in Django ChoiceField forms?</p>\n\n<p>For example I'd like my ChoiceField ids to output in the format <code>id=\"rating#\"</code> where # is an incrementing number.  I assume you change the widget attributes for id, but how would I get the incrementing number in the id?</p>\n\n<p>Example:</p>\n\n<pre><code>&lt;label for=\"id_rating_0\"&gt;&lt;input type=\"radio\" id=\"rating1\" value=\"1\" name=\"rating\" /&gt; &lt;/label&gt;\n\n&lt;label for=\"id_rating_1\"&gt;&lt;input type=\"radio\" id=\"rating2\" value=\"2\" name=\"rating\" /&gt; &lt;/label&gt;\n\n&lt;label for=\"id_rating_2\"&gt;&lt;input type=\"radio\" id=\"rating3\" value=\"3\" name=\"rating\" /&gt; &lt;/label&gt;\n\n&lt;label for=\"id_rating_3\"&gt;&lt;input type=\"radio\" id=\"rating4\" value=\"4\" name=\"rating\" /&gt; &lt;/label&gt;\n\n&lt;label for=\"id_rating_4\"&gt;&lt;input type=\"radio\" id=\"rating5\" value=\"5\" name=\"rating\" /&gt; &lt;/label&gt;\n</code></pre>\n"},{"tags":["django","pinax"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12309870,"title":"No model named metron","body":"<p>I am looking to use Pinax to help speedup the process of creating a website in Django.</p>\n\n<p>I started out by following the guide as follows.</p>\n\n<pre><code>[***@vps-1087814-7905 sites]# virtualenv mysite-env\n[***@vps-1087814-7905 sites]# source mysite-env/bin/activate \n(mysite-env)[root@vps-1087814-7905 sites]# django-admin.py startproject --template=https://github.com/pinax/pinax-project-account/zipball/master Project_x\n(mysite-env)[root@vps-1087814-7905 sites]# cd Project_x\n(mysite-env)[root@vps-1087814-7905 Project_x]# pip install -r requirements.txt\n\n(mysite-env)[***@vps-1087814-7905 Project_x]# pip install metron\nRequirement already satisfied (use --upgrade to upgrade): metron in /****/mysite-env/lib/python2.7/site-packages\n</code></pre>\n\n<p>So. Where did I go wrong? Metron is clearly installed, but for some stupid reason it claims that it is not installed. Any ideas?</p>\n"},{"tags":["python","django","emacs","ide"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":138,"score":5,"question_id":13160217,"title":"Link to python modules in emacs","body":"<p>I'm looking into emacs as an alternative to Eclipse. One of my favorite features in Eclipse is being able to mouse over almost any python object and get a listing of its source, then clicking on it to go directly to its code in another file.</p>\n\n<p>I know this must be possible in emacs, I'm just wondering if it's already implemented in a script somewhere and, if so, how to get it up and running on emacs.</p>\n\n<p>Looks like my version is Version 24.2.</p>\n\n<p>Also, since I'll be doing Django development, it would be great if there's a plugin that understands Django template syntax.</p>\n"},{"tags":["django","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13184783,"title":"Django unexpected keyword argument 'instance'","body":"<p>Hi I am crating a view for editing a model using model forms.</p>\n\n<p>My forms.py looks like:</p>\n\n<pre><code>from user_profile.models import Project\nfrom django.forms import ModelForm\n\n\ndef ProjectForm(ModelForm):\n    class Meta:\n         model = Project\n</code></pre>\n\n<p>And my views.py:</p>\n\n<pre><code>from django.shortcuts import render_to_response\nfrom django.template import RequestContext\nfrom user_profile.models import Project\nfrom user_profile.forms import ProjectForm\n\ndef EditProject(request, project_id=None):\n    \"\"\"\n    This view allows a user to edit details of a project.\n    \"\"\"\n    title = u'Unirac - Edit Project'\n    project = Project.objects.get(id=4)\n    if request.method == 'POST':\n        form = ProjectForm(request.POST)\n        if form.is_valid():\n            # save form\n            form.save()\n        else:\n            return render_to_response('edit_project.html', {\n                'title': title,\n                'form': form,\n            }, RequestContext(request))\n    else:\n        form = ProjectForm(instance=project)\n        return render_to_response('edit_project.html', {\n            'title': title,\n            'form': form,\n        }, RequestContext(request))\n</code></pre>\n\n<p>But I'm getting a <code>ProjectForm() got an unexpected keyword argument 'instance'</code> error?</p>\n\n<p>I can't figure out why, as you can pass instance to a model form, can't you?</p>\n\n<p>Any help would be much appreciated.</p>\n"},{"tags":["django","testing","user"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":158,"score":1,"question_id":9332541,"title":"django - get user logged into test client","body":"<p>In a written django test, how can I get the current logged in user?</p>\n\n<p>For example this is the test I want to write:</p>\n\n<pre><code>def test_author_set_once(self):\n    self.client.login(username='Adam', password='password')\n    #create an object and test the author is adam\n    self.client.login(username='Barry', password='password')\n    #modify the first object and test that the author has not changed\n</code></pre>\n\n<p>So I want to be able to say something like...</p>\n\n<pre><code>self.assertEqual(object.author, self.client.user)\n</code></pre>\n\n<p>(but I can't)</p>\n\n<p>The way I've coded it at the moment is like this:</p>\n\n<pre><code>self.client.login(username='Adam', password='password')\nself.user = User.objects.get(username='Adam')\n#create an object \nself.assertEqual(object.author, self.user)\n</code></pre>\n\n<p>This relies on the assumption that the request.user is the same as a particular user object. I guess it's OK but it seems a bit clunky.</p>\n\n<p>Is there anyway to avoid the assumption?</p>\n"},{"tags":["django","django-models","django-piston"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13184424,"title":"ImportError: No module named models django","body":"<p>When trying to create an API app using django-piston (v 0.2.3) and including the app namespace in the base url.py</p>\n\n<pre><code>url(r'^news/', include('news.urls')),\nurl(r'^api/', include('api.urls')),\n</code></pre>\n\n<p>All my apps no longer import models and I get the following error...</p>\n\n<pre><code>Environment:\n\n\nRequest Method: GET\nRequest URL: http://127.0.0.1:8000/api/story\n\nDjango Version: 1.4.1\nPython Version: 2.7.2\nInstalled Applications:\n('django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.sites',\n 'django.contrib.messages',\n 'django.contrib.staticfiles',\n 'django.contrib.admin',\n 'django.contrib.admindocs',\n 'django_extensions',\n 'debug_toolbar',\n 'polls',\n 'news',\n 'api')\nInstalled Middleware:\n('django.middleware.common.CommonMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware',\n 'debug_toolbar.middleware.DebugToolbarMiddleware')\n\n\nTraceback:\nFile \"/Library/Python/2.7/site-packages/django/core/handlers/base.py\" in get_response\n  89.                     response = middleware_method(request)\nFile \"/Library/Python/2.7/site-packages/django/middleware/common.py\" in process_request\n  67.             if (not urlresolvers.is_valid_path(request.path_info, urlconf) and\nFile \"/Library/Python/2.7/site-packages/django/core/urlresolvers.py\" in is_valid_path\n  531.         resolve(path, urlconf)\nFile \"/Library/Python/2.7/site-packages/django/core/urlresolvers.py\" in resolve\n  420.     return get_resolver(urlconf).resolve(path)\nFile \"/Library/Python/2.7/site-packages/django/core/urlresolvers.py\" in resolve\n  298.             for pattern in self.url_patterns:\nFile \"/Library/Python/2.7/site-packages/django/core/urlresolvers.py\" in url_patterns\n  328.         patterns = getattr(self.urlconf_module, \"urlpatterns\", self.urlconf_module)\nFile \"/Library/Python/2.7/site-packages/django/core/urlresolvers.py\" in urlconf_module\n  323.             self._urlconf_module = import_module(self.urlconf_name)\nFile \"/Library/Python/2.7/site-packages/django/utils/importlib.py\" in import_module\n  35.     __import__(name)\nFile \"/Users/digitalandmedia2/Documents/MYCOMPANY/django_prototype/mysite/urls.py\" in &lt;module&gt;\n  13.     url(r'^api/', include('api.urls')),\nFile \"/Library/Python/2.7/site-packages/django/conf/urls/__init__.py\" in include\n  24.         urlconf_module = import_module(urlconf_module)\nFile \"/Library/Python/2.7/site-packages/django/utils/importlib.py\" in import_module\n  35.     __import__(name)\nFile \"/Users/digitalandmedia2/Documents/MYCOMPANY/django_prototype/api/urls.py\" in &lt;module&gt;\n  5. from api.handlers import StoryHandler\nFile \"/Users/digitalandmedia2/Documents/MYCOMPANY/django_prototype/api/handlers.py\" in &lt;module&gt;\n  3. from news.models import Story\n\nException Type: ImportError at /api/story\nException Value: No module named models\n</code></pre>\n\n<p>Here is the url.py for api app...</p>\n\n<pre><code>from django.conf.urls.defaults import *\nfrom django.conf import settings\nfrom piston.resource import Resource\n\nfrom api.handlers import StoryHandler\n\nstory_handler = Resource(StoryHandler)\n\n#look into grouping urls\n\nurlpatterns = patterns('',\n   url(r'^story$', story_handler),\n)\n</code></pre>\n\n<p>Here is the handler...</p>\n\n<pre><code>from piston.handler import BaseHandler\n\nfrom news.models import Story\n\nclass StoryHandler(BaseHandler):\n    allowed_methods = ('GET',)\n    model = Story\n\n    def read(self, request):\n        \"\"\"\n        Returns a story lineup\n\n        \"\"\"\n        return Story.objects.all().order_by('-pub_date')[:5]\n</code></pre>\n\n<p>Directory Structure...</p>\n\n<pre><code>manage.py\n/admin\n  ...\n/api\n  handlers.py\n  urls.py\n  ...\n/news\n   models.py\n   views.py\n   urls.py\n/mysite\n  settings.py\n  urls.py\n  ....\n</code></pre>\n"},{"tags":["django","search","elasticsearch","django-haystack","haystack"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13184728,"title":"How do I query for empty MultiValueField results in Django Haystack","body":"<p>Using Django 1.4.2, Haystack 2.0beta, and ElasticSearch 0.19, how do I query for results which have an empty set <code>[]</code> for a MultiValueField?</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13179678,"title":"Django server error","body":"<p>I can't seem to figure out why I started to get the server error listed all of a sudden.  Any ideas?</p>\n\n<p>The full traceback:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Python27\\lib\\wsgiref\\handlers.py\", line 85, in run\n    self.result = application(self.environ, self.start_response)\n  File \"C:\\Python27\\lib\\site-packages\\django\\contrib\\staticfiles\\handlers.py\", line 67, in __call__\n    return self.application(environ, start_response)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\handlers\\wsgi.py\", line 241, in __call__\n    response = self.get_response(request)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\handlers\\base.py\", line 179, in get_response\n    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\handlers\\base.py\", line 221, in handle_uncaught_exception\n    return debug.technical_500_response(request, *exc_info)\n  File \"C:\\Python27\\lib\\site-packages\\django\\views\\debug.py\", line 66, in technical_500_response\n    html = reporter.get_traceback_html()\n  File \"C:\\Python27\\lib\\site-packages\\django\\views\\debug.py\", line 286, in get_traceback_html\n    c = Context(self.get_traceback_data())\n  File \"C:\\Python27\\lib\\site-packages\\django\\views\\debug.py\", line 244, in get_traceback_data\n    frames = self.get_traceback_frames()\n  File \"C:\\Python27\\lib\\site-packages\\django\\views\\debug.py\", line 390, in get_traceback_frames\n    pre_context_lineno, pre_context, context_line, post_context = self._get_lines_from_file(filename, lineno, 7, loader,\n module_name)\n  File \"C:\\Python27\\lib\\site-packages\\django\\views\\debug.py\", line 371, in _get_lines_from_file\n    context_line = source[lineno].strip('\\n')\nIndexError: list index out of range\n[01/Nov/2012 10:46:55] \"GET /home HTTP/1.1\" 500 59\nTraceback (most recent call last):\n  File \"C:\\Python27\\lib\\wsgiref\\handlers.py\", line 85, in run\n    self.result = application(self.environ, self.start_response)\n  File \"C:\\Python27\\lib\\site-packages\\django\\contrib\\staticfiles\\handlers.py\", line 67, in __call__\n    return self.application(environ, start_response)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\handlers\\wsgi.py\", line 241, in __call__\n    response = self.get_response(request)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\handlers\\base.py\", line 179, in get_response\n    response = self.handle_uncaught_exception(request, resolver, sys.exc_info())\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\handlers\\base.py\", line 221, in handle_uncaught_exception\n    return debug.technical_500_response(request, *exc_info)\n  File \"C:\\Python27\\lib\\site-packages\\django\\views\\debug.py\", line 66, in technical_500_response\n    html = reporter.get_traceback_html()\n  File \"C:\\Python27\\lib\\site-packages\\django\\views\\debug.py\", line 286, in get_traceback_html\n    c = Context(self.get_traceback_data())\n  File \"C:\\Python27\\lib\\site-packages\\django\\views\\debug.py\", line 244, in get_traceback_data\n    frames = self.get_traceback_frames()\n  File \"C:\\Python27\\lib\\site-packages\\django\\views\\debug.py\", line 390, in get_traceback_frames\n    pre_context_lineno, pre_context, context_line, post_context = self._get_lines_from_file(filename, lineno, 7, loader,\n module_name)\n  File \"C:\\Python27\\lib\\site-packages\\django\\views\\debug.py\", line 371, in _get_lines_from_file\n    context_line = source[lineno].strip('\\n')\nIndexError: list index out of range\n</code></pre>\n"},{"tags":["django","django-modelform"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13178402,"title":"Set dynamic default for django modelform foreignkey field","body":"<p>I would like to set the default value for a modelform foreignkey to the first item in the queryset.</p>\n\n<p>The queryset is being dynamically generated in the forms <strong>init</strong> method, and is returned in order such that 95% of the time the user will select the first item.</p>\n\n<p>How can I set the default value to the first item in the queryset?</p>\n\n<p>I have tried this in the form init method, but it doesn't seem to work:</p>\n\n<pre><code>self.fields['my_foreignkey_field'].initial = self.fields['my_foreignkey_field'].queryset[0]\n</code></pre>\n\n<p>Using \"set_trace\" in the view, I can see that <code>my_form['my_foreignkey_field'].field.initial</code> is indeed set to the correct value, but it is not populating the select field in the template.</p>\n\n<p>Here are more details from the form init method:</p>\n\n<pre><code>def __init__(self, *args, **kwargs):\n    super(My_Form, self).__init__(*args,**kwargs) \n    if self.instance.some_fk_field.some_value &gt; 0:\n        self.fields['important_fk_field'].queryset = self.get_important_queryset()\n        if self.instance.some_fk_field.some_value == 1:\n            #set the default\n            self.fields['important_fk_field'].initial = self.fields['important_fk_field'].queryset[0].pk\n    else: #foreignkey should be null\n        self.fields['important_fk_field'].queryset = FK_Model.objects.filter(pk=-1)  #Empty queryset\n</code></pre>\n"},{"tags":["python","django","amazon-s3","django-forms","boto"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13183595,"title":"Check if a form is valid from within a form field [Django]","body":"<p>I have subclassed a text-field form field in Django to create my own custom widget for a field. I was wondering if it's possible to check if all other fields of the form are valid (I want its server side behavior to vary based on the validation of other fields)</p>\n\n<p>See comment </p>\n\n<p>Something like:</p>\n\n<pre><code>class CustomField(TextInput):\n  def __init__(self, *args, **kwargs):\n    ...\n    super(CustomField, self).__init__(*args, **kwargs)\n\n  input_type = 'hidden'\n\n  def value_from_datadict(self, data, files, name):\n    aws_file_key = data.get(name, None)\n    _media_bucket = boto.connect_s3(settings.AWS_ACCESS_KEY_ID,\n                                       settings.AWS_SECRET_ACCESS_KEY)\\\n                            .lookup(settings.AWS_MEDIA_STORAGE_BUCKET_NAME)\n\n    try:\n      key = _media_bucket.get_key(aws_file_key)\n    except:\n      print 'Failed to get key.'\n      key = None\n\n    if key and aws_file_key:\n      fh = tempfile.TemporaryFile()\n      key.get_contents_to_file(fh)\n      fh.seek(0)\n      files = SimpleUploadedFile(key.name, fh.read())\n      ### IF FORM IS VALID DELETE KEY, OTHERWISE, KEEP IT.\n      if code_to_check_if_valid:\n        _media_bucket.delete_key(key)\n      fh.close()\n      return files\n      ...... etc.\n</code></pre>\n"},{"tags":["django","postgresql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13182624,"title":"Django: Raw sql query to get CURRENT_TIMESTAMP is not updating on subsequent calls","body":"<p>I have the following snippet of code used to get the current timestamp from the db server:</p>\n\n<pre><code>class DbUtils:\n    @staticmethod\n    def get_current_timestamp():\n        from django.db import connection\n        cursor = connection.cursor()\n        cursor.execute(\"SELECT CURRENT_TIMESTAMP\")\n        rows = cursor.fetchone()\n        return rows[0]\n</code></pre>\n\n<p>To test this code I wrote the following test:</p>\n\n<pre><code>def test_get_current_timestamp(self):\n    ts_0 = DbUtils.get_current_timestamp()\n    time.sleep(1)\n    ts_1 = DbUtils.get_current_timestamp()\n    delta_seconds = (ts_1 - ts_0).seconds\n    assert 1 &lt;= delta_seconds &lt;= 3\n</code></pre>\n\n<p>This test was not passing so I dug into it a little bit. The reason was that each call to <code>DbUtils.get_current_timestamp()</code> was returning the same value each time.</p>\n\n<pre><code>In [31]: DbUtils.get_current_timestamp()\nOut[31]: datetime.datetime(2012, 11, 1, 17, 17, 48, 950799, tzinfo=&lt;UTC&gt;)\n\n# Wait a couple seconds\n\nIn [32]: DbUtils.get_current_timestamp()\nOut[32]: datetime.datetime(2012, 11, 1, 17, 17, 48, 950799, tzinfo=&lt;UTC&gt;)\n</code></pre>\n\n<p>I monitored the postgresql log - each query was hitting the db.</p>\n\n<p>The only way I was able to make this work was to import django.db.transaction and execute <code>transaction.commit_unless_managed()</code> prior to executing the SELECT. Committing a transaction prior to the SELECT doesn't seem right since I don't know in what context get_current_timestamp will be called. Any ideas on how to fix this or work around it? The timestamp needs to come from the db server to ensure that all relative time calculations are done correctly.</p>\n\n<p>I am running:</p>\n\n<pre><code>Django==1.4.2\npsycopg2==2.4.5 (with hstore extension via django-hstore==1.1.1)\nPostgreSQL 9.1\n</code></pre>\n"},{"tags":["django","git","git-submodules","django-apps"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13179778,"title":"Maintaining 3rd Party Django Apps as Git submodules","body":"<p>I know this is perfectly possible and a lot of people already doing it, but my problem is slightly different and I couldn't figure out the solution yet:</p>\n\n<p>Let a 3rd party Django App's structure as below:</p>\n\n<ul>\n<li>django-module\n<ul>\n<li>module\n<ul>\n<li><strong>init</strong>.py</li>\n<li>views.py</li>\n<li>models.py</li>\n</ul></li>\n<li>requirements.txt</li>\n<li>setup.py</li>\n</ul></li>\n</ul>\n\n<p>I want to bundle only the <code>module</code> directory as a submodule, because then I can access views.py file just by typing \"module.views\". If I import the django-module directory, I would have to write django-module.module.views to access the module files, which is not feasible.</p>\n\n<p>My purpose is to modify the module and make pull requests occasionally to the original repository. Is there workflow that I can follow, or what are the best practices for this purpose?</p>\n"},{"tags":["python","django","unit-testing"],"answer_count":2,"favorite_count":3,"up_vote_count":2,"down_vote_count":0,"view_count":571,"score":2,"question_id":2581005,"title":"Django TestCase testing order","body":"<p>If there are several methods in the test class, I found that the order to execute is alphabetical. But I want to customize the order of execution. How to define the execution order?</p>\n\n<p>For example: testTestA will be loaded first than testTestB.</p>\n\n<pre><code>class Test(TestCase):\n    def setUp(self):\n        ...\n\n    def testTestB(self):\n        #test code\n\n    def testTestA(self):\n        #test code\n</code></pre>\n"},{"tags":["django","amazon-web-services","wsgi","elastic-beanstalk","django-wsgi"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":13102076,"title":"Solved: Setting up Django on AWS Elastic Beanstalk: WSGIPath not found","body":"<p>Edit: This issue has been solved.  See my comment below.</p>\n\n<p>I've been trying for several days now to set up Django under Amazon Web Services' Elastic Beanstalk.  I think the problem I'm hitting is this one:</p>\n\n<pre><code>ERROR - Your WSGIPath refers to a file that does not exist.\n</code></pre>\n\n<p>I followed the tutorial <a href=\"http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Python_django.html\" rel=\"nofollow\">here</a> and all goes well until the end of Step 6, but I can't for the life of me get anything to display other than the generic Elastic Beanstalk page from Step 5, #2.  When I run</p>\n\n<pre><code>./manage.py runserver\n</code></pre>\n\n<p>on my local machine, everything works as it should, but I can't get that page to deploy.  I first tried with a small Django site I wrote myself.  It didn't work, so I deleted everything I'd done and tried again, that didn't work, so I deleted all that and tried again with a fresh django install.  I tried that a bunch of times fiddling with little things, but I think I'm missing something major.</p>\n\n<p>I added a python.config file as described in <a href=\"http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Python_custom_container.html\" rel=\"nofollow\">this tutorial</a>.  </p>\n\n<p>Here's my file structure:</p>\n\n<pre><code>-.git/\n-.mysite/\n    -myapp/\n        -__init__.py\n        -models.py\n        -tests.py\n        -views.py\n    -mysite/\n        -__init__.py\n        -settings.py\n        -urls.py\n        -wsgi.py\n    -.ebextensions/\n        -python.config\n    -manage.py\n    -mysite.db\n    -requirements.txt\n</code></pre>\n\n<p>From my settings.py:</p>\n\n<pre><code>DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': 'mysite.db',\n        'USER': '',\n        'PASSWORD': '',\n        'HOST': '',\n        'PORT': '',\n    }\n}\n</code></pre>\n\n<p>Here's python.config:</p>\n\n<pre><code>container_commands:   01_syncdb:    \n    command: \"django-admin.py syncdb --noinput\"\n    leader_only: true\n\noption_settings:\n    - namespace: aws:elasticbeanstalk:container:python\n      option_name: WSGIPath\n      value: mysite/wsgi.py\n    - option_name: DJANGO_SETTINGS_MODULE\n      value: mysite.settings\n    - option_name: AWS_SECRET_KEY\n      value: &lt;This is my secret key&gt;\n    - option_name: AWS_ACCESS_KEY_ID\n      value: &lt;This is my access key&gt;\n</code></pre>\n\n<p>Is there another place I need to define my WSGIPath?  Is there a way to do it through the AWS console?  Should I just skip EB altogether and use EC2 directly?</p>\n"},{"tags":["django","amazon-s3","boto"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13183513,"title":"Using boto for S3 upload I'm getting a EOF error","body":"<p>I'm trying to upload a file to S3 (actually the upload works) but my app crashes and throws the error saying:</p>\n\n<p><code>fp is at EOF. Use rewind option or seek() to data start.</code></p>\n\n<p>I saw that some ways people have solved the problem was adding <code>rewind=True</code> to their set_contents_from_string call. However this throws the following error:</p>\n\n<p><code>set_contents_from_string() got an unexpected keyword argument 'rewind'</code></p>\n\n<p>The following is the content of my <code>views.py</code>. What am I doing wrong?</p>\n\n<pre><code>def store_in_s3(filename, filecontent):\n    conn = S3Connection(settings.AWS_ACCESS_KEY_ID, settings.AWS_SECRET_ACCESS_KEY)\n    b = conn.create_bucket('mybucket')\n    mime = mimetypes.guess_type(filename)[0]\n    k = Key(b)\n    k.key = filename\n    k.set_metadata(\"Content-Type\", mime)\n    k.set_contents_from_string(filecontent)\n    #k.set_contents_from_string(filecontent, rewind=True)\n    k.set_acl(\"public-read\")\n\ndef add_m(request, points=None):\n    mname = request.GET.get ('mname')\n    format = request.GET.get ('format')\n    type = request.GET.get ('type')\n    if request.method == \"POST\":\n        formtoaddm = spiceform(request.POST, request.FILES)\n        if formtoaddm.is_valid():\n            new_m = formtoaddm.save(commit=False)\n            new_m.adder = request.user\n            mname = new_m.mname\n            file = request.FILES['content']\n            filename = file.name\n            filecontent = file.read()\n            store_in_s3(filename, filecontent)\n            ...\n</code></pre>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13183416,"title":"A good approach to know existence of a record in a table","body":"<p>I have next model:</p>\n\n<pre><code>class People(models.Model):\n    name = models.CharField(max_length=100)\n    lastname = models.CharField(max_length=100) \n</code></pre>\n\n<p>In views.py</p>\n\n<p>-When I try this one:</p>\n\n<pre><code> if People.objects.get(id=my_id):\n        o=People.objects.get(id=my_id)\n        oh=o.name\n    else:\n        send_notification_to_add_that_id(my_id)\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>People query matching does not exist. \n</code></pre>\n\n<p>What I want is that Query the <code>my_id</code> in my <code>People</code> table, if there is a match with that record get the <code>id</code>, else trigger the <code>send_notification_to_add_that_id</code> method.\nWhen first \"if conditions\" does not have such a record, i am getting above error. How to by pass this issue? What is the good approach to know existence of a record in a table ?</p>\n"},{"tags":["django","recursion","models","relationship"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13182721,"title":"Django model recursive relationship","body":"<ol><li> Why would I create a recursive relationship?\n</li>\n<pre>\n    aField = models.ForeignKey('self')\n</pre>\n<li> Is this the same with the above?\n</li>\n</ol>\n\n<pre>\n        class aClass(models.Model):  \n        aField = models.ForeignKey('aClass')\n</pre>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13168099,"title":"Django inconsistent time on DateTimeField","body":"<p>I have next model:</p>\n\n<pre><code>class People(models.Model):\n    name = models.CharField(max_length=100)\n    lastname = models.CharField(max_length=100)\n    _date=models.DateTimeField()\n</code></pre>\n\n<p>In views.py</p>\n\n<p>-When I try this one:</p>\n\n<pre><code>p = People(name='foo', lastname='bar', _date=datetime.now())\np.save()\n</code></pre>\n\n<p>it returns current time: <code>2012-10-31 17:33:10.152323</code></p>\n\n<p>But, when I check my database for this record it shows: </p>\n\n<pre><code>name lastname _date \nfoo   bar      2012-10-31 21:33:10\n</code></pre>\n\n<p>Why this(two different time) happens? </p>\n\n<p>Edit: (it is 4 hours difference): <code>2012-10-31 17:33:10.152323  and 2012-10-31 21:33:10</code></p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13183264,"title":"Django get_profile() method not working on extended User model","body":"<p>I have a model in an app named <code>user_profile</code> like so:</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\n\nclass UserProfile(models.Model):\n    user = models.OneToOneField(User)\n\n    def __unicode__(self):\n        return self.user.username\n</code></pre>\n\n<p>and in my settings:</p>\n\n<pre><code>AUTH_PROFILE_MODULE = 'user_profile.UserProfile'\n</code></pre>\n\n<p>But if I try:</p>\n\n<pre><code>u = UserProfile.objects.get(pk=1)\np = u.get_profile()\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>AttributeError: 'UserProfile' object has no attribute 'get_profile'\n</code></pre>\n\n<p>What am I missing here?</p>\n\n<p>Any help would be much appreciated.</p>\n"},{"tags":["django","nginx","gunicorn"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13182892,"title":"What is the purpose of NGINX and Gunicorn running in parallel?","body":"<p>I'm quite new to this and I was quite curious. A lot of Django app deployments over Amazon's EC2 use HTTP servers NGINX and Gunicorn. I was wondering what they actually do and why both are used in parallel. What is the purpose of running them both in parallel? Thank you for taking the time to answer this, much appreciated!</p>\n"},{"tags":["python","django","steam-web-api"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13179917,"title":"Parsing and mixing Steam API calls","body":"<p>I'm using a Django environment, and I want to pull stats from Steam. However, Steam's API is annoyingly stupid in that they have about 20 different URLs, the main two I want information from are:</p>\n\n<ul>\n<li><a href=\"http://steamcommunity.com/id/STEAM_USERNAME/games?tab=all&amp;xml=1\" rel=\"nofollow\">http://steamcommunity.com/id/STEAM_USERNAME/games?tab=all&amp;xml=1</a></li>\n<li><a href=\"http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=KEY&amp;steamids=STEAM_ID\" rel=\"nofollow\">http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=KEY&amp;steamids=STEAM_ID</a></li>\n</ul>\n\n<p>I'm using the Python Requests library to <code>GET</code> the data from Steam.</p>\n\n<pre><code>import requests\nimport json\nfrom xml.dom.minidom import parseString\n\nSTEAM_API_URL = 'http://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002'\nSTEAM_API_KEY = 'XXXXX'\nSTEAM_USERNAME = 'niteshade'\n\n# Make request to steamcommunity.com with the username to get the 64-bit Steam ID\nusername_r = requests.get('http://steamcommunity.com/id/{0}/games?tab=all&amp;xml=1'.format(STEAM_USERNAME))\nsteamid = str(parseString(username_r.text.encode('utf-8')).getElementsByTagName('steamID64')[0].firstChild.wholeText)\ntotalgames = parseString(username_r.text.encode('utf-8')).getElementsByTagName('game').length\n\ndata = {\n    'key': STEAM_API_KEY,\n    'steamids': steamid,\n}\n\nuser_r = requests.get(STEAM_API_URL, params=data)\n#user_r.json['response']['players'][0].update({'totalgames'.encode('utf-8'): totalgames})\n</code></pre>\n\n<p>When I query <code>steamcommunity.com</code> I get something like this back:</p>\n\n<pre><code>&lt;gamesList&gt;\n    &lt;steamID64&gt;12345&lt;/steamID64&gt;\n    &lt;steamID&gt;aSteamID&lt;/steamID&gt;\n    &lt;games&gt;\n        &lt;game&gt;\n            &lt;appID&gt;201790&lt;/appID&gt;\n            &lt;name&gt;Orcs Must Die! 2&lt;/name&gt;\n            &lt;logo&gt;http://media.steampowered.com/steamcommunity/public/images/apps/201790/c345d9b205f349f0e7f4e6cdf8af4d0b7d242505.jpg&lt;/logo&gt;\n            &lt;storeLink&gt;http://steamcommunity.com/app/201790&lt;/storeLink&gt;\n            &lt;hoursLast2Weeks&gt;2.2&lt;/hoursLast2Weeks&gt;&lt;hoursOnRecord&gt;14.3&lt;/hoursOnRecord&gt;\n            &lt;statsLink&gt;http://steamcommunity.com/id/niteshade/stats/201790&lt;/statsLink&gt;\n            &lt;globalStatsLink&gt;http://steamcommunity.com/stats/201790/achievements/&lt;/globalStatsLink&gt;\n        &lt;/game&gt;\n        &lt;game&gt;\n            &lt;appID&gt;113200&lt;/appID&gt;\n            &lt;name&gt;The Binding of Isaac&lt;/name&gt;\n            &lt;logo&gt;http://media.steampowered.com/steamcommunity/public/images/apps/113200/d9a7ee7e07dffed1700cb8b3b9482105b88cc5b5.jpg&lt;/logo&gt;\n            &lt;storeLink&gt;http://steamcommunity.com/app/113200&lt;/storeLink&gt;\n            &lt;hoursLast2Weeks&gt;0.2&lt;/hoursLast2Weeks&gt;\n            &lt;hoursOnRecord&gt;22.8&lt;/hoursOnRecord&gt;\n            &lt;statsLink&gt;http://steamcommunity.com/id/niteshade/stats/BindingOfIsaac&lt;/statsLink&gt;\n            &lt;globalStatsLink&gt;http://steamcommunity.com/stats/BindingOfIsaac/achievements/&lt;/globalStatsLink&gt;\n        &lt;/game&gt;\n        &lt;game&gt;\n            &lt;appID&gt;19680&lt;/appID&gt;\n            &lt;name&gt;Alice: Madness Returns&lt;/name&gt;\n            &lt;logo&gt;http://media.steampowered.com/steamcommunity/public/images/apps/19680/16eb0cc15cde07377c0cb3bffa6d92bbc6dd72b2.jpg&lt;/logo&gt;\n            &lt;storeLink&gt;http://steamcommunity.com/app/19680&lt;/storeLink&gt;\n        &lt;/game&gt;\n    &lt;/games&gt;\n</code></pre>\n\n<p></p>\n\n<p>And from <code>api.steampowered.com</code> I get this:</p>\n\n<pre><code>{\n    \"response\": {\n        \"players\": [\n            {\n                \"steamid\": \"12345\",\n                \"communityvisibilitystate\": 3,\n                \"profilestate\": 1,\n                \"personaname\": \"aSteamID\",\n                \"lastlogoff\": 1351676021,\n                \"profileurl\": \"http:\\/\\/steamcommunity.com\\/id\\/aSteamID\\/\",\n                \"avatar\": \"http:\\/\\/media.steampowered.com\\/steamcommunity\\/public\\/images\\/avatars\\/b2\\/b261f66a17bfa6c95b24f8b4c6b58bb3776d57e4.jpg\",\n                \"avatarmedium\": \"http:\\/\\/media.steampowered.com\\/steamcommunity\\/public\\/images\\/avatars\\/b2\\/b261f66a17bfa6c95b24f8b4c6b58bb3776d57e4_medium.jpg\",\n                \"avatarfull\": \"http:\\/\\/media.steampowered.com\\/steamcommunity\\/public\\/images\\/avatars\\/b2\\/b261f66a17bfa6c95b24f8b4c6b58bb3776d57e4_full.jpg\",\n                \"personastate\": 4,\n                \"realname\": \"Real Name\",\n                \"primaryclanid\": \"103582791429705688\",\n                \"timecreated\": 1250966723,\n                \"loccountrycode\": \"GB\"\n            }\n        ]       \n    }\n}\n</code></pre>\n\n<p>Basically, to be able to get anything from <code>api.steampowered.com</code>, I need a Steam ID. To get that, I make the call to <code>steamcommunity.com</code> website which returns an XML file with the Steam ID, amongst other things. The information I need is as follows (using the names as in the XML/JSON responses):</p>\n\n<h3>Player</h3>\n\n<ul>\n<li>Steamid</li>\n<li>Personaname</li>\n<li>ProfileURL</li>\n<li>Friends (Requires another API call, I believe)</li>\n<li>Personastate</li>\n<li>Total number of games</li>\n<li>Avatarfull</li>\n</ul>\n\n<h3>Games</h3>\n\n<ul>\n<li>AppID</li>\n<li>Name</li>\n<li>Logo</li>\n<li>hoursLast2Weeks</li>\n</ul>\n\n<p>For total number of games, I thought I'd simply just count the number of <code>&lt;game&gt;</code> nodes in the XML file returned by <code>steamcommunity.com</code>. It worked, in that I was able to count them, but I can't seem to add a <code>totalgames</code> field to the JSON response from <code>api.steampowered.com</code>.\nSecondly, not all <code>&lt;game&gt;</code> nodes have <code>&lt;hoursLast2Weeks&gt;</code> child nodes, I only want the ones that do.\nThirdly, I want to just get the player's friends total. I'm not kidding myself, I know I'll have to use another <code>GET</code>, but the problem is adding it to the JSON.</p>\n\n<p>My main issue is trying to add to the JSON response, I've looked at other examples on SO, tried to follow them but I'm not sure where I'm going wrong here. Any help would be greatly appreciated.</p>\n"},{"tags":["django","ical"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13178118,"title":"Django - serving an ical file","body":"<p>I'm server an icalender file through django_ical. Problem is that the file is named download.ics. I'm trying to change this to MyCalender.ics. If found this old snippet. I would prefer using django_ical, because it ingerates nicely with django syndication.</p>\n\n<pre><code>cal = vobject.iCalendar()\ncal.add('method').value = 'PUBLISH'  # IE/Outlook needs this\nfor event in event_list:\n     vevent = cal.add('vevent')\nicalstream = cal.serialize()\nresponse = HttpResponse(icalstream, mimetype='text/calendar')\nresponse['Filename'] = 'filename.ics'  # IE needs this\nresponse['Content-Disposition'] = 'attachment; filename=filename.ics'\n</code></pre>\n"},{"tags":["python","objective-c","django","api","misuse"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13182818,"title":"How to prevent systematic bulk downloads on a Web-based image database API in Django/Objective C","body":"<p>We have an online image database/website, which allows searching our images via an API. To protect our website from mass-downloads of all <strong>high resolution</strong> images, in the API response, we only include URLs to <strong>down-scaled versions</strong> of the original images.</p>\n\n<p>A third party developer would like to create an Objective C based app for switching desktop wallpapers on Macs based on our API. For that, a URL of the high resolution images is required in the API response.</p>\n\n<p>Is there a way, so <strong>only</strong> the app itself can have access to our high resolution images? For example: Instead of the third party, <strong>we</strong> could compile the app into binary code. Before that we'd include a secrect key inside the app to make it work. However, Objective C code can be decompiled, and so, our secret key may be revealed. Aside from that, it would be rather inconvenient for the third party developer, but that would be an acceptable drawback. Maybe we can compile an external library to make this possible, but I couldn't come up with a working solution so far. Any help/idea appreciated!</p>\n\n<p>The API in question is found here: <a href=\"http://pixabay.com/api/docs/\" rel=\"nofollow\">Pixabay API</a></p>\n\n<p>p.s.\nSimple throttling or limiting requests based on the IP is not an option. For that, there are not enough images available, yet (around 53.000 images).</p>\n"},{"tags":["python","django","design-patterns"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":33,"score":0,"question_id":13181658,"title":"Why views.py and not controller.py","body":"<p>In most MVC/ORM type systems django's views.py might be referred to as a controller, and their templates the views. Is this a different design pattern that they are following? Why is it called views.py?</p>\n"},{"tags":["django","orm","aggregate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13182293,"title":"Django aggregate on .extra values","body":"<p>Model , with abstract base class:</p>\n\n<pre><code>class MapObject(models.Model):\nstart_date = models.DateTimeField(default= datetime.strptime('1940-09-01T00:00:00',  '%Y-%m-%dT%H:%M:%S'))\nend_date = models.DateTimeField(default= datetime.strptime('1941-07-01T00:00:00',  '%Y-%m-%dT%H:%M:%S'))\ndescription = models.TextField(blank=True)\nlocation = models.PointField()\nobjects = models.GeoManager()\nuser = models.ForeignKey(User)\ncreated = models.DateTimeField(auto_now_add = True)\nlast_modified = models.DateTimeField(auto_now = True)\nsource = models.ForeignKey(Source)\naddress= models.TextField(blank=True, null=True)\naddress_road = models.TextField(blank=True, null=True)\n\nclass Meta:\n    abstract = True\n\nclass Bomb(MapObject, BombExtraManager):\n#Bomb Attributes\ntype = models.CharField(choices= Type_CHOICES, max_length=10)\nnight_bombing = models.BooleanField(blank=True)\nmap_sheet = models.ForeignKey(MapSheet, blank=True, null=True)\ndef __unicode__(self):\n    return self.type\n</code></pre>\n\n<p>Now, I want to get the equivalent result using Django ORM as this query: </p>\n\n<pre><code>Select date_part('day',\"start_date\") as \"day\", date_part('hour',\"start_date\") as \"hour\", Count('id')\nfrom \"Mapper_bomb\"\nwhere \"source_id\" = 1\ngroup by date_part('hour',\"start_date\"), date_part('day',\"start_date\")\nOrder by date_part('day',\"start_date\") ASC, date_part('hour',\"start_date\") ASC\n</code></pre>\n\n<p>Which would give me a table with the count of bombs per day and hour.</p>\n\n<p>Using Django ORM, I have come to the following at the moment (first_day is just a custom manager I defined that returns a subset of the data, same as source_id = 1):</p>\n\n<pre><code>Bomb.first_day.extra(select={'date': \"date_part(\\'day\\', \\\"start_date\\\")\", 'hour': \"date_part(\\'hour\\', \\\"start_date\\\")\"}).values('date', 'hour').order_by().annotate(Count('date'), Count('hour'))\n</code></pre>\n\n<p>but Django complains FieldError: Cannot resolve keyword 'date' into field. Is there a way using Django ORM to get the desired result or do I need to fallback on raw sql? </p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13181945,"title":"Form submission keeps failing in Django Tutorial","body":"<p>I am on the <a href=\"https://docs.djangoproject.com/en/dev/intro/tutorial04/\" rel=\"nofollow\">Django tutorial (part 4)</a> and trying to create a form which allows user to choose answer to a poll. The questions load properly, however when I click 'vote' (ie select option and submit form) the following error keeps showing:</p>\n\n<pre><code>Page not found (404)\nRequest Method: POST\nRequest URL:    http://localhost:8000/polls/vote/6\nUsing the URLconf defined in mysite.urls, Django tried these URL patterns, in this order:\n^polls/ ^$ [name='index']\n^polls/ ^(?P&lt;poll_id&gt;\\d+)/$ [name='detail']\n^polls/ ^(?P&lt;poll_id&gt;\\d+)/results/$ [name='results']\n^polls/ ^(?P&lt;poll_id&gt;\\d+)/vote/$ [name='vote']\n^admin/\nThe current URL, polls/vote/6, didn't match any of these.\n</code></pre>\n\n<p>Here is the code from detail.html which has the form:</p>\n\n<pre><code>{{ poll.question }}\n\n{% if error_message %}&lt;p&gt;&lt;strong&gt;{{ error_message }}&lt;/strong&gt;&lt;/p&gt;{% endif %}\n\n&lt;form action=\"/polls/vote/{{ poll.id }} \" method=\"post\"&gt;\n{% csrf_token %}\n{% for choice in poll.choice_set.all %}\n    &lt;input type=\"radio\" name=\"choice\" id=\"choice{{ forloop.counter }}\" value=\"{{ choice.id     }}\" /&gt;\n&lt;label for=\"choice{{ forloop.counter }}\"&gt;{{ choice.choice_text }}&lt;/label&gt;&lt;br /&gt;\n{% endfor %}\n&lt;input type=\"submit\" value=\"Vote\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>I suspect the problem is in the line <code>&lt;form action=\"/polls/vote/{{ poll.id }} \" method=\"post\"&gt;</code> but I'm not sure how to fix it.</p>\n"},{"tags":["django","dictionary","queryset","annotate"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":12593185,"title":"Merge two annotated results into one dictionary","body":"<p>I have to annotated results:</p>\n\n<pre><code>cred_rec = Disponibilidad.objects.values('mac__mac', 'int_mes').annotate(tramites=Count('fuar'), recibidas=Count('fecha_disp_mac')\ncred14   = Disponibilidad.objects.filter(int_disponible__lte=14).values('mac__mac', 'int_mes').annotate(en14=Count('fuar'))\n</code></pre>\n\n<p>Both have the same keys <code>'mac__mac'</code> and <code>'int_mes'</code>, what I want is to create a new dictionary with the keys in <code>cred_red</code>, plus <code>en14</code> from <code>cred14</code>.</p>\n\n<p>I try some <a href=\"http://stackoverflow.com/questions/720966/django-how-to-merge-two-related-querysets-in-django-0-96\">answers</a> <a href=\"http://stackoverflow.com/questions/431628/how-to-combine-2-or-more-querysets-in-a-django-view\">found</a> <a href=\"http://stackoverflow.com/questions/5945912/how-to-get-the-difference-of-two-querysets-in-django\">here</a>, but I missing something.</p>\n\n<p>Thanks.</p>\n\n<p><strong>EDIT.</strong> After some tries and errors, I got this:</p>\n\n<pre><code>for linea in cred_rec:\n  clave = (linea['mac__mac'], linea['int_mes'])\n  for linea2 in cred14:\n    clave2 = (linea2['mac__mac'], linea2['int_mes'])\n    if clave2 == clave:\n      linea['en14'] = linea2['en14']\n      linea['disp'] = float(linea2['en14'])/linea['recibidas']*100\n</code></pre>\n\n<p>Now, I have to ask for a better solution. Thanks again.</p>\n\n<p>=======\n<strong>EDIT</strong>\nThis is how the input looks like:</p>\n\n<pre><code>fuar, mac_id, int_mes, int_disponible, int_exitoso, fecha_tramite, fecha_actualiza_pe, fecha_disp_mac\n1229012106349,1,7,21,14,2012-07-02 08:33:54.0,2012-07-16 17:33:21.0,2012-07-23 08:01:22.0\n1229012106350,1,7,25,17,2012-07-02 09:01:25.0,2012-07-19 17:45:57.0,2012-07-27 17:45:59.0\n1229012106351,1,7,21,14,2012-07-02 09:15:12.0,2012-07-16 19:14:35.0,2012-07-23 08:01:22.0\n1229012106352,1,7,24,16,2012-07-02 09:25:19.0,2012-07-18 07:52:18.0,2012-07-26 16:04:11.0\n... a few  thousand lines dropped ...\n</code></pre>\n\n<p>The <code>fuar</code> is like an order_id; <code>mac__mac</code> is like the <code>site_id</code>, mes is <code>month</code>; <code>int_disponible</code> is the timedelta between <code>fecha_tramite</code> and <code>fecha_disp_mac</code>; <code>int_exitoso</code> is the timedelta between <code>fecha_tramite</code> and <code>fecha_actualiza_pe</code>.</p>\n\n<p>The output is like this:</p>\n\n<pre><code>mac, mes, tramites, cred_rec, cred14,  % rec,  % en 14\n1, 7, 2023, 2006, 1313, 99.1596638655, 65.4536390828\n1, 8, 1748, 1182, 1150, 67.6201372998, 97.2927241963\n2, 8, 731, 471, 441, 64.4322845417, 93.6305732484\n3, 8, 1352, 840, 784, 62.1301775148, 93.3333333333\n</code></pre>\n\n<ul>\n<li><em>tramites</em> is the sum of all orders (<code>fuar</code>) in a month</li>\n<li>*cred_rec* cred is our product, in theory for each <em>fuar</em> there is a <em>cred</em>, <code>cred_rec</code> is the sum of all cred produced in a month</li>\n<li>*cred_14* is the sum of all cred made in 14 days</li>\n<li><em>% rec</em> the relationship between fuar received and  cred produced, in %</li>\n<li><em>% en 14</em> is the relationship between the cred produced and the cred produced in time</li>\n</ul>\n\n<p>I will use this table in a <a href=\"http://code.google.com/apis/ajax/playground/?type=visualization#annotated_time_line\" rel=\"nofollow\">Annotated Time Line</a> chart or a <a href=\"http://code.google.com/apis/ajax/playground/?type=visualization#combo_chart\" rel=\"nofollow\">Combo Chart</a> from Google Charts to show the performance of our manufacturation process.</p>\n\n<p>Thanks for your time.</p>\n"},{"tags":["django","paypal","django-paypal"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":10541283,"title":"django-paypal does not have signal for subscr_payment","body":"<p>I was looking into django-paypal IPN source code and I realized that it does not have a signal for subscr_payment transaction type.</p>\n\n<p>Can I just assume that if I receive a subscr_signup IPN message, the payment was successful?</p>\n\n<p>my signal handler</p>\n\n<pre><code>def subscription_succesful(sender, **kwargs):\nipn_obj = sender\n\nif ipn_obj.payment_status == \"Completed\":\n    user = User.objects.get(pk=ipn_obj.custom)\n    business = Business.objects.get(user=user)\n    business.active = True\n    business.save()\n\nsubscription_signup.connect(subscription_succesful)\n</code></pre>\n\n<p>This is currently not working because ipn_obj.payment_status is not sent in a subscr_signup IPN message.</p>\n"},{"tags":["python","django","json","caching","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13180876,"title":"How do I render a cached JSONP view in Django","body":"<p>I'm querying a db of election info and spitting them out in JSONP to use for some ajax/jQuery widgets we are creating.</p>\n\n<p>What I'm wanting to do however is cache the view so that a new request isn't coming in every time the widget is rendered.</p>\n\n<p>I'm running into 2 issues though.</p>\n\n<ol>\n<li><p>Which method of caching should I use to render this view so that the database isn't getting hit hard.</p></li>\n<li><p>I need to render the view as JSONP which means I need the callback variable to be dynamic (which it current'y is with my script but I'm afraid it wouldn't be with a cached view).</p></li>\n</ol>\n\n<p>Here's what my code looks like.</p>\n\n<pre><code>from models import race\nfrom models import candidates\nfrom django.http import HttpResponse\nfrom django.utils import simplejson\n\n\ndef data(request):\n\n    data = []\n    races = race.objects.all()\n\n    for election in races:\n\n        race_candidate = candidates.objects.filter(race__id=election.pk)\n\n        candidate_info = []\n        for n,candidate in enumerate(race_candidate):\n            candidate_values = {\n                \"name\":candidate.name,\n                \"percent\":candidate.percent,\n                \"totalvotes\":candidate.totalvotes,\n                \"partyname\":candidate.partyname,\n                \"partyabbrv\":candidate.partyabbrv,\n                }\n\n            candidate_info.append(candidate_values)\n\n        race_values = {\n            \"title\":election.title,\n            \"description\":election.description,\n            \"priority\":election.priority,\n            \"decided\":election.decided,\n            \"candidates\":candidate_info,\n            }\n\n        data.append(race_values)\n\n    json_races = '{\"races\":' + simplejson.dumps(data) + '}'\n\n    if(\"callback\" in request.GET.keys()):\n        callback = request.GET[\"callback\"]\n    else:\n        callback = None\n\n    if(callback):\n        response = HttpResponse(\"%s(%s)\" % (\n                callback,\n                simplejson.dumps(data)\n                ), mimetype=\"application/json\"\n            )\n    else:\n        response = HttpResponse(json_races, mimetype=\"application/json\")\n    return response\n</code></pre>\n"},{"tags":["django","django-forms","django-modelform"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13178683,"title":"default value for ChoiceField in modelform","body":"<p>I have  problem with django:<br>\nmodels.py:  </p>\n\n<pre><code>SUSPEND_TIME = (\n    ('0', '0'),\n    ('10', '10'),\n    ('15', '15'),\n    ('20', '20'),\n\n\nclass Order(models.Model):  \n    user = models.ForeignKey(User)  \n    city = models.CharField(max_length=20)  \n    ...\n    processed = models.BooleanField(default=False)\n    suspend_time = models.CharField(max_length=2, choices=SUSPEND_TIME, default='0')  \n    ..\n</code></pre>\n\n<p>form.py:  </p>\n\n<pre><code>class OrderForm(forms.ModelForm):\n    class Meta:\n        model = Order\n        fields = ('suspend_time', 'processed')\n</code></pre>\n\n<p>view.py:  </p>\n\n<pre><code>        try:\n            order = Order.objects.get(id=order_id)\n        except Order.DoesNotExist:\n            order = None\n        else:\n            form = OrderForm(request.POST, instance=order)\n            if form.is_valid():\n            form.save()\n            ....  \n</code></pre>\n\n<p>then i send ajax request to update instance with only \"processed\" param..<br>\nform.is_valid is always False if I don't send \"suspend_time\" !<br>\nif request contain {'suspend_time': 'some_value' ...} form.is_valid is True<br>\nI don't understand why ? suspend_time has default value.. and order.suspend_time always has some value: default or other from choices.<br>\nwhy after \"form = OrderForm(request.POST, instance=order)\"  form['suspend_time'].value() is None, other fields (city, processed)  has normal value .  </p>\n"},{"tags":["django","django-models","django-admin"],"answer_count":3,"favorite_count":3,"up_vote_count":7,"down_vote_count":0,"view_count":5655,"score":7,"question_id":660260,"title":"Django Admin Form for Many to many relationship","body":"<p>I have a many to many relationship between 2 tables Users an Domains.\nI have defined this relationship in the Domains class. \nSo in the admin interface I see the Users when I am viewing Domains.\nBut I do not see Domains when I am viewing Users.\nHow can I achieve this.</p>\n"},{"tags":["django","cookies","session-cookies"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":11752992,"title":"django - setting cookie for session on mobile","body":"<p>I am using</p>\n\n<pre><code>response.set_cookie(key, value, max_age=None, domain=domain, secure=None)\n</code></pre>\n\n<p>This works well on a web browser as max_age=None sets the cookie as long as the browser is open. But on iOS or Android, the browser never actually closes, but keeps running in the background. Thus, the cookie remains set even when i exit the browser. It only works if I manually go and kill the browser.\nAny idea how to set the cookie for a session on mobile devices?</p>\n"},{"tags":["django","django-forms","django-generic-views","django-class-based-views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13180116,"title":"How do I set initial data on a Django class based generic createview with request data","body":"<p>I used Django's generic createview for my model</p>\n\n<pre><code>from myproject.app.forms import PersonForm\nclass PersonMixin(object):\n    model = Person\n    form_class = PersontForm\n\nclass PersonCreateView(PersonMixin, CreateView):\n    pass\n</code></pre>\n\n<p>This works perfectly for displaying a create view of Person with my custom form. However, I have a field in the form that I want to pre-populate with a value. I found this answer: <a href=\"http://stackoverflow.com/questions/11096617/set-initial-value-to-modelform-in-class-based-generic-views\">Set initial value to modelform in class based generic views</a></p>\n\n<p>However, my pre-populated value comes from the profile for request.user. How do I access the request in PersonCreateView and pass that to the form?</p>\n"},{"tags":["python","django","eclipse","pinax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13177073,"title":"Pinax synch db gives me no module named debug_toolbar?","body":"<p>I have installed pinax, and created a project with the <code>pinax-admin</code></p>\n\n<p>After that I just wanted to synch the db with:</p>\n\n<pre><code>python manage.py syncdb\nError: No module named debug_toolbar\n</code></pre>\n\n<p>I am running python 2.7.3 and django 1.4.2 under win 7.</p>\n\n<p>Why does this not work?</p>\n"},{"tags":["python","database","django","concurrency"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13179401,"title":"Django transactions and concurrency","body":"<p>I have a view that needs to perform updates to the database involving a shared resource that needs locking (the implementation is complex, but nothing more than a shared counter at heart).</p>\n\n<p>To shield myself from race conditions, I'm using code that looks roughly like this:</p>\n\n<pre><code>@transaction.commit_manually\ndef do_it(request):\n    affected_models = Something.objects.select_for_update(blah = 1)\n\n    for model in affected_models:\n        model.modify()\n        model.save()\n\n    transaction.commit()\n</code></pre>\n\n<p>Is this usage of <code>commit_manually</code>, <code>select_for_update()</code> and <code>save()</code> ok? How can I write a test that confirms this? I can't find, say, a signal that Django fires between transactions; and I can't just run it and hope concurrency issues arise and are dealt with.</p>\n"},{"tags":["python","django","google-app-engine","logging","django-nonrel"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":13176173,"title":"Python- How to flush the log? (django)","body":"<p>I'm working with Django-nonrel on Google App Engine, which forces me to use logging.debug() instead of print().</p>\n\n<p>The \"logging\" module is provided by Django, but I'm having a rough time using it instead of print().</p>\n\n<p>For example, if I need to verify the content held in the variable x, I will put<br>\n<code>logging.debug('x is: %s' % x)</code>. But if the program crashes soon after (without flushing the stream), then it never gets printed.</p>\n\n<p>So for debugging, I need debug() to be flushed before the program exits on error, and this is not happening.</p>\n"},{"tags":["python","django","authentication","permissions","django-south"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13135951,"title":"New users are not created in auth_permissions","body":"<p>I'm a newbie in Python and Django, so please bear with me. The project I'm hacking on was not made by me so I'm fumbling in the dark.</p>\n\n<p>When new users are created they do not have permission to things like <code>user.has_perm('places.add_place')</code> and there are no relation to the users id in the PostgreSQL table <code>auth_permissions</code> which I guess is the symptom.</p>\n\n<p>If I <code>manage.py flush --settings=settings.jacob</code> I get:</p>\n\n<pre><code>Error: One or more models did not validate:\nusers.userprofile: \"uuid\": Primary key fields cannot have null=True.\nplaces.category: \"uuid\": Primary key fields cannot have null=True.\nplaces.image: \"uuid\": Primary key fields cannot have null=True.\nplaces.masterplace: \"uuid\": Primary key fields cannot have null=True.\nplaces.place: \"uuid\": Primary key fields cannot have null=True.\n</code></pre>\n\n<p>If I look at the table <code>places_masterplace</code> I see <code>Primary key &lt;no primary key&gt;</code> whereas a table like <code>users_userprofile</code> do have one.</p>\n\n<p>We use <code>Django==1.4.1</code> and <code>South==0.7.6</code>.</p>\n\n<p>We only have this problem on our staging server.</p>\n\n<p>Could this be a local database problem, or would a deploy to production also cause it there?</p>\n"},{"tags":["python","django","nginx","uwsgi"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":425,"score":0,"question_id":11220355,"title":"uWSGI Server log…permission denied to read file...which file?","body":"<p>I have a server running Django/Nginx/uWSGI with uWSGI in emperor mode, and the error log for it (the vassal-level error log, not the emperor-level log) has a continual permissions error every time it spawns a new worker, like so:</p>\n\n<blockquote>\n  <p>Tue Jun 26 19:34:55 2012 - Respawned uWSGI worker 2 (new pid: 9334)</p>\n  \n  <p>Error opening file for reading: Permission denied</p>\n</blockquote>\n\n<p>Problem is, I don't know what file it's having trouble opening; it's not the log file, obviously, since I'm looking at it and it's writing to that without issue. Any way to find out? I'm running the apt-get version of uWSGI 1.0.3-debian through Upstart on Ubuntu 12.04. The site is working successfully, aside from what seems like a memory leak...hence my looking at the log file. I've experimented with changing the permissions of the entire /opt/ directory to include the uwsgiuser user, to no avail. I'm using a TCP socket, so permissions shouldn't be an issue there. Is it the cache? Does that have its' own permissions? If so, where?</p>\n\n<pre><code>My Upstart conf file\n\ndescription \"uWSGI\" start on runlevel [2345] stop on runlevel [06] respawn\n\nenv UWSGI=/usr/bin/uwsgi env LOGTO=/var/log/uwsgi/emperor.log\n\nexec $UWSGI \\\n--master \\\n--emperor /etc/uwsgi/vassals \\\n--die-on-term \\\n--auto-procname \\\n--no-orphans \\\n--logto $LOGTO \\\n--logdate\n</code></pre>\n\n<p>My Vassal ini file:</p>\n\n<pre><code>[uwsgi]\n# Variables\nbase = /opt/env/mysiteenv\n\n# Generic Config\nuid = uwsgiuser\ngid = uwsgiuser\nsocket = 127.0.0.1:5050\nmaster = true\nprocesses = 2\nreload-on-as = 128\nharakiri = 60\nharakiri-verbose = true\nauto-procname = true\nplugins = http,python\ncache = 2000\nhome = %(base)\npythonpath = %(base)/mysite\nmodule = wsgi\nlogto = /opt/log/mysite/error.log\nlogdate = true\n</code></pre>\n"},{"tags":["django","amazon-s3","boto","django-storage"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13167493,"title":"Access Denied error with Amazon S3","body":"<p>I'm getting an Access Denied error with Amazon S3 and can't figure out why.</p>\n\n<p>My settings are as follows:</p>\n\n<p><code>STATIC_URL = 'http://s3.amazonaws.com/%s/' % AWS_STORAGE_BUCKET_NAME</code></p>\n\n<p>What would cause an access denied error? I have verified that my keys are correct.</p>\n"},{"tags":["python","django","django-views","subprocess"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":13177087,"title":"Getting Responsive Django View","body":"<p>I have a HTML page which has four buttons Start, Stop, Pause and Resume in it. The functionality of the buttons are:</p>\n\n<ul>\n<li>Start Button: Starts the backend Simulator. (The Simulator takes around 3 minutes for execution.)</li>\n<li>Stop Button: Stops the Simulator.</li>\n<li>Pause Button: Pauses the Simulator.</li>\n<li>Resume Button: Resumes the Simulator from the paused stage.</li>\n</ul>\n\n<p>Each of the button when clicked goes on to calling a separate view function. The problem I'm facing is that when I click the start button, it starts up the Simulator through a function call in the Python view. But as I mentioned that the simulator takes around 3 minutes for completing it's execution. So, for the 3 minutes my UI is totally unresponsive. I cannot  press Stop, Pause or Resume button untill the current view of Django is rendered.</p>\n\n<p>So what is the best way to approach this problem ? Shall I spawn a non-blocking process for the Simulator and If so how can I get to know after the view has rendered that the new spawned process has completed it's execution.</p>\n"},{"tags":["django","localhost","web-hosting","mezzanine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13177026,"title":"Django website accessible to others just for testing","body":"<p>Right now the website is running locally and I'm still working on it.<br>\nWhile doing this I also have to make it visible to a specific group of users as I need their feedback in order to add/change features, etc.  </p>\n\n<p>I've tried to find a free web hosting without any luck (see dependencies).<br>\nI was thinking to create a VPN but then I will have to use my PC as a host for a virtual machine which is by far not what I'm looking for.</p>\n\n<p>Therefore, my questions are:<br>\n 1. Which is the best way to achieve this (website visibility <strong>for TESTING</strong>) fast and easy?<br>\n 2. If a dedicated web host is the best solution, please point me to an easy-to-use and cheap one. What I've tried so far: <a href=\"http://www.elastichosts.com/\" rel=\"nofollow\">elastichosts</a>, <a href=\"https://www.alwaysdata.com/\" rel=\"nofollow\">alwasydata</a>, <a href=\"http://stackable.com/\" rel=\"nofollow\">stackable</a>, <a href=\"http://1FreeHosting.com\" rel=\"nofollow\">1FreeHosting</a> and probably others I don't remember right now. For a reason or another I couldn't use none of the above.</p>\n\n<p>Another aspect to be considered: I want this only for <strong>simple testing</strong> and I <strong>don't need a lot of server resources</strong>. Also the <strong>traffic will be very low</strong> as there are only 5 testers. That's why I wouldn't pay too much for it. I will probably need this temporary web hosting for 2-3 months.</p>\n\n<p>Dependencies:<br>\n - as the website uses <a href=\"http://mezzanine.jupo.org\" rel=\"nofollow\">mezzanine</a>, for the moment I only need <a href=\"http://mezzanine.jupo.org/docs/overview.html#dependencies\" rel=\"nofollow\">mezzanine's dependencies</a>.</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["python","django","rabbitmq","celery"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13176133,"title":"Django Celery tasks succeed but client stuck waiting","body":"<p>I'v just started to implement Django+Celery+RabbitMQ to do some backend tasks. I started with the example add(x, y) task to verify it was working then proceeded to place my existing utility methods in a Celery tasks module. The trouble is when I call my tasks they run fine but the client never gets the result.</p>\n\n<pre><code>&gt;&gt;&gt; r = SyncUsers.delay()\n&gt;&gt;&gt; r.get()\n... Hangs here forever\n^C\n... (Stack trace omitted)\nKeyboardInterrupt\n&gt;&gt;&gt; r.successful()\nFalse\n</code></pre>\n\n<p>In the Celeryd log:</p>\n\n<pre><code>[2012-11-01 11:15:23,442: INFO/MainProcess] Task celerytasks.tasks.SyncUsers[9e8f4da3-17d2-4944-9095-51de1afcaaf3] succeeded in 34.596668005s: &lt;website.bullhorn.api.APIResult object at...\n</code></pre>\n\n<p>Anybody know what's happening here?</p>\n\n<p>EDIT:\nJust noticed that when I call get() now I see:</p>\n\n<p>....\\lib\\site-packages\\djcelery\\managers.py:183: TxIsolationWarning: Polling results with transaction isolation level repeatable-read within the same transaction may give outdated results. Be sure to commit the transaction for each poll iteration.\n  \"Polling results with transaction isolation level \"</p>\n\n<p>and it still waits forever.</p>\n"},{"tags":["django","admin","fields"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13175472,"title":"'Tareas' object has no attribute '__fields__'","body":"<p>When i try to access to 'tareas' the app returns to me as follows:</p>\n\n<pre><code> 'Tareas' object has no attribute '__fields__'\n  Request Method:   GET\n  Request URL:  http://localhost:8000/tareas/\n  Django Version:   1.4\n  Exception Type:   AttributeError\n  Exception Value:  \n  'Tareas' object has no attribute '__fields__'\n  Exception Location:   /Users/Tone/Documents/Proyectos/macrotelecom/common/generic.py in      view_list, line 240\n</code></pre>\n\n<p>The problem is in this line:</p>\n\n<pre><code>if not fields:\n    fields=queryset.__dict__['model']().__fields__(profile)\n</code></pre>\n\n<p>Which I think is weird because in admin.py i set the attribute fields for my object 'Tareas':</p>\n\n<pre><code>  from tareas.models import Tareas\n  from django.contrib import admin\n\n  class TareasAdmin(admin.ModelAdmin):\n     fields = ['idtarea','idtipotarea','idagente','fechatarea']\n     list_display = ('idtarea','idagente','fechatarea')\n\nadmin.site.register(Tareas,TareasAdmin)\n</code></pre>\n\n<p>The line is defined in this function 'def_view':</p>\n\n<pre><code> def view_list(request, get_template, **kwargs):\n        '''\n        Generic list view with validation included and object transfering support\n        '''\n\n        # Config\n        default_rows_per_page=100\n\n        # Get arguments from the function\n        object_id=keyarg('object_id',kwargs,None)\n        action=keyarg('action',kwargs,None)\n        extra_context=keyarg('extra_context',kwargs,{})\n        queryset=keyarg('queryset',kwargs,None)\n        restrictions=keyarg('restrictions',kwargs,None)\n        permission=keyarg('permission',kwargs,None)\n        fields=keyarg('fields',kwargs,None)\n        default_ordering=keyarg('default_ordering',kwargs,None)\n        compact_rows=keyarg('compact_rows',kwargs,None)\n\n        # Get template and profile\n        namesp=str(queryset.__dict__['model']).replace(\"class \",\"\").replace(\"&gt;\",\"\").replace(\"&lt;\",\"\").replace(\"'\",\"\").split(\".\")\n        appname=namesp[-3].lower()\n        modelname=namesp[-1].lower()\n        (profile,template_name)=get_template(keyarg('template_name',kwargs,\"%s/%s_list.html\" % (appname,modelname)))\n\n        # Check permissions\n        if (permission is not None) and (not request.user.has_perm(permission)):\n            return HttpResponseRedirect('/not_authorized/')\n\n        # Get extra arguments\n        extra={}\n        for arg in kwargs:\n            if arg not in ['object_id','action','template_name','extra_context','queryset','restrictions']:\n                extra[arg]=kwargs[arg]\n\n        # Inicialization\n        new_extra_context={}\n        new_extra_context['now']=epochdate(time.time())\n    #    new_extra_context['msglog']=msglog()\n        # Restrictions fields\n        new_extra_context['filters']=[]\n        if restrictions:\n            for restriction in restrictions:\n                f={}\n                f['name']=restriction\n                f['value']=extra[restriction]\n                new_extra_context['filters'].append(f)\n\n        # Process the filter\n        new_extra_context['filters_obj']={}\n        new_extra_context['header_loop']=1\n        if restrictions:\n            queryset_obj={}\n            for rname in restrictions:\n                # Get name of the field and object\n                (rfield,robject)=restrictions[rname]\n                # Get the ID\n                rid=extra[rname]\n                # Save the id in extra_context\n                new_extra_context[rname]=rid\n                # Save the object in queryset_obj\n                queryset_obj[rname]=robject(id=rid)\n                # Filter the queryset\n                queryset=queryset.filter(eval(\"Q(%s=queryset_obj['%s'])\" % (rfield,rname)))\n                new_extra_context['filters_obj'][rname]=get_object_or_404(robject,pk=rid)\n\n        # Get field list\n        if not fields:\n            fields=queryset.__dict__['model']().__fields__(profile)\n\n        # Save action if we got one\n        if action:\n            new_extra_context['action']=action\n        # Try to convert object_id to a numeric id\n        try:\n            object_id=int(object_id)\n        except:\n            pass\n\n        # Save GET values\n        new_extra_context['get']=[]\n        new_extra_context['getval']={}\n        for name in request.GET:\n            if name not in ['filtername','filtervalue']:\n                struct={}\n                struct['name']=name\n                if name=='rowsperpage':\n                    struct['value']=default_rows_per_page\n                elif name=='page':\n                    struct['value']=1\n                else:\n                    struct['value']=request.GET[name]\n                new_extra_context['get'].append(struct)\n                new_extra_context['getval'][name]=struct['value']\n\n        # Filter on limits\n        limits=queryset.__dict__['model']().__limitQ__(profile,request)\n        qobjects=None\n        for name in limits:\n            if qobjects:\n                qobjects&amp;=limits[name]\n            else:\n                qobjects=limits[name]\n        if qobjects:\n            queryset=queryset.filter(qobjects)\n\n        # Filters on fields\n        try:\n            filters_by_json=request.GET.get('filters','{}')\n            filters_by_struct=json_decode(str(filters_by_json))\n        except Exception:\n            filters_by_struct=[]\n        filtername=request.GET.get('filtername',None)\n        filtervalue=request.GET.get('filtervalue',None)\n        listfilters=queryset.__dict__['model']().__searchF__(profile)\n\n        # Process the search\n        filters_struct={}\n        for key in filters_by_struct:\n            # Get the value of the original filter\n            value=filters_by_struct[key]\n            # If there is something to filter, filter is not being changed and filter is known by the class\n            if (key!=filtername) and (key in listfilters) and (value&gt;0):\n                # Add the filter to the queryset\n                f=listfilters[key]\n                fv=f[2][value-1][0]\n                queryset=queryset.filter(f[1](fv))\n                # Save it in the struct as a valid filter\n                filters_struct[key]=value\n\n        # Add the requested filter if any\n        if (filtername in listfilters) and (int(filtervalue)&gt;0):\n            f=listfilters[filtername]\n            fv=f[2][int(filtervalue)-1][0]\n            queryset=queryset.filter(f[1](fv))\n            filters_struct[filtername]=int(filtervalue)\n\n        # Rewrite filters_json updated\n        filters_json=json_encode(filters_struct)\n\n        # Build the clean get for filters\n        get=new_extra_context['get']\n        filters_get=[]\n        for element in get:\n            if element['name'] not in ['filters']:\n                struct={}\n                struct['name']=element['name']\n                struct['value']=element['value']\n                filters_get.append(struct)\n\n        # Add filter_json\n        struct={}\n        struct['name']='filters'\n        struct['value']=filters_json\n        filters_get.append(struct)\n        new_extra_context['filters_get']=filters_get\n\n        # Get the list of filters allowed by this class\n        filters=[]\n        for key in listfilters:\n            choice=[_('All')]\n            for value in listfilters[key][2]:\n                choice.append(value[1])\n\n            # Decide the choosen field\n            if key in filters_struct.keys():\n                choose=int(filters_struct[key])\n            else:\n                choose=0\n\n            filters.append((key,listfilters[key][0],choice,choose))\n        new_extra_context['filters']=filters\n\n\n        # Search text in all fields\n        search=request.GET.get('search','')\n        new_extra_context['search']=search\n        datetimeQ=None\n        if len(search)&gt;0:\n            searchs=queryset.__dict__['model']().__searchQ__(search,profile)\n            qobjects=None\n            for name in searchs:\n                if (searchs[name]=='datetime'):\n                    datetimeQ=name\n                    continue\n                else:\n                    if qobjects:\n                        qobjects|=searchs[name]\n                    else:\n                        qobjects=searchs[name]\n            if qobjects:\n                queryset=queryset.filter(qobjects)\n        else:\n            # Look for datetimeQ field\n            searchs=queryset.__dict__['model']().__searchQ__(search,profile)\n            for name in searchs:\n                if (searchs[name]=='datetime'):\n                    datetimeQ=name\n                    continue\n\n        # Datetime Q\n        new_extra_context['datetimeQ']=datetimeQ\n        if datetimeQ:\n            # Inicialization\n            f={}\n            f['year']=(1900,2100,False)\n            f['month']=(1,12,False)\n            f['day']=(1,31,False)\n            f['hour']=(0,23,False)\n            f['minute']=(0,59,False)\n            f['second']=(0,59,False)\n            date_elements=[None,'year','month','day','hour','minute','second']\n            # Get configuration of dates and set limits to the queryset\n            for element in date_elements[1:]:\n                value=request.GET.get(element,None)\n                if value:\n                    f[element]=(int(value),int(value),True)\n            if f['year'][2] and f['month'][2] and not f['day'][2]:\n                (g,lastday)=calendar.monthrange(f['year'][1],f['month'][1])\n                f['day']=(f['day'][0],lastday,f['day'][2])\n            # Limits\n            date_min=datetime.datetime(f['year'][0], f['month'][0], f['day'][0], f['hour'][0], f['minute'][0], f['second'][0])\n            date_max=datetime.datetime(f['year'][1], f['month'][1], f['day'][1], f['hour'][1], f['minute'][1], f['second'][1])\n            queryset=queryset.filter(eval(\"( Q(%s__gte=date_min) &amp; Q(%s__lte=date_max) ) | Q(%s=None)\" % (datetimeQ,datetimeQ,datetimeQ)))\n\n            # Find actual deepness\n            deepness_index=0\n            for element in date_elements[1:]:\n                if f[element][2]:\n                    deepness_index+=1\n                else:\n                    break\n\n            # Get results from dates to set the new order\n            date_results=queryset.values_list(datetimeQ, flat=True) #.dates(datetimeQ,'day')\n            if f['day'][0]!=f['day'][1]:\n                if f['month'][0]==f['month'][1]:\n                    date_results=date_results.dates(datetimeQ,'day')\n                elif f['year'][0]==f['year'][1]:\n                    date_results=date_results.dates(datetimeQ,'month')\n                else:\n                    date_results=date_results.dates(datetimeQ,'year')\n\n            get=new_extra_context['get']\n            new_extra_context['datefilter']={}\n            # Save the deepness\n            if (deepness_index+1==len(date_elements)):\n                new_extra_context['datefilter']['deepness']=None\n            else:\n                new_extra_context['datefilter']['deepness']=date_elements[deepness_index+1]\n            new_extra_context['datefilter']['deepnessback']=[]\n            new_extra_context['datefilter']['deepnessinit']=[]\n            for element in get:\n                if (not element['name'] in date_elements):\n                    struct={}\n                    struct['name']=element['name']\n                    struct['value']=element['value']\n                    new_extra_context['datefilter']['deepnessinit'].append(struct)\n                    new_extra_context['datefilter']['deepnessback'].append(struct)\n                elif (element['name']!=date_elements[deepness_index] and f[element['name']][2]):\n                    struct={}\n                    struct['name']=element['name']\n                    struct['value']=element['value']\n                    new_extra_context['datefilter']['deepnessback'].append(struct)\n            # Build the list of elements\n            new_extra_context['datefilter']['data']=[]\n            for element in date_results:\n                # Save the data\n                new_extra_context['datefilter']['data'].append(element.timetuple()[deepness_index])\n            new_extra_context['datefilter']['data']=list(set(new_extra_context['datefilter']['data']))\n            new_extra_context['datefilter']['data'].sort()\n\n            # Prepare the rightnow result\n            if f['month'][2]:\n                month=_(month_name(f['month'][0]))\n            else:\n                month='__'\n            if f['hour'][2]:\n                rightnow=\"%s/%s/%s %s:%s:%s\" % (grv(f,'day'),month,grv(f,'year'),grv(f,'hour'),grv(f,'minute'),grv(f,'second'))\n            else:\n                rightnow=\"%s/%s/%s\" % (grv(f,'day'),month,grv(f,'year'))\n            new_extra_context['datefilter']['rightnow']=rightnow\n\n        # Distinct\n        queryset=queryset.distinct()\n\n        # Ordering field autofill\n        try:\n            order_by_json=request.GET.get('ordering','[]')\n            order_by_struct=json_decode(str(order_by_json))\n        except Exception:\n            order_by_struct=[]\n        order_by=[]\n        position={}\n        counter=1\n        for order in order_by_struct:\n            name=order.keys()[0]\n            direction=order[name]\n            if direction=='asc':\n                order_by.append(\"%s\" % (name))\n            elif direction=='desc':\n                order_by.append(\"-%s\" % (name))\n            position[name]=counter\n            counter+=1\n        if order_by:\n            queryset=queryset.order_by(*order_by)\n        elif default_ordering:\n            queryset=queryset.order_by(default_ordering)\n        else:\n            queryset=queryset.order_by(\"pk\")\n        # Check the total count of registers\n        total_registers=queryset.count()\n\n        # Ordering field autofill\n        sort={}\n        for value in fields:\n            # Get values\n            name=value[0]\n            publicname=value[1]\n            if len(value)&gt;2:\n                size=value[2]\n            else:\n                size=None\n            if len(value)&gt;3:\n                align=value[3]\n            else:\n                align=None\n            # Process ordering\n            ordering=[]\n            found=False\n            for order in order_by_struct:\n                subname=order.keys()[0]\n                direction=order[subname]\n                if name==subname:\n                    if direction == 'desc':\n                        direction = ''\n                        sort_class='headerSortUp'\n                    elif direction == 'asc':\n                        direction = 'desc'\n                        sort_class='headerSortDown'\n                    else:\n                        sort_class=''\n                        direction = 'asc'\n                    found=True\n                if direction == 'asc' or direction=='desc':\n                    ordering.append({subname:direction})\n            if not found:\n                ordering.append({name:'asc'})\n                sort_class=''\n            # Save the ordering method\n            sort[name]={}\n            sort[name]['id']=name\n            sort[name]['name']=publicname\n            sort[name]['class']=sort_class\n            sort[name]['size']=size\n            sort[name]['align']=align\n            if name:\n                sort[name]['ordering']=json_encode(ordering).replace('\"','\\\\\"')\n            if name in position:\n                sort[name]['position']=position[name]\n\n        # Pagination\n        # IMPORTANT: This part is commented because I don't manage to control rowsperpage from urls.py file, it is remembering last query instead\n        # vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv\n        #if 'rowsperpage' in extra_context:\n        #    rowsperpage=extra_context['rowsperpage']\n        #else:\n        #    rowsperpage=default_rows_per_page\n        #total_rows_per_page=request.GET.get('rowsperpage',rowsperpage)\n        # ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        total_rows_per_page=request.GET.get('rowsperpage',default_rows_per_page)\n        if total_rows_per_page:\n            try:\n                total_rows_per_page = int(total_rows_per_page)\n            except Exception:\n                total_rows_per_page = 'All'\n        else:\n            # IMPORTANT: Commented as before coded\n            # total_rows_per_page = rowsperpage\n            total_rows_per_page = default_rows_per_page\n        if total_rows_per_page == 'All':\n            page_number=1\n            total_rows_per_page = total_registers\n            total_rows_per_page_out = _('All')\n            total_pages=1\n        else:\n            total_rows_per_page = int(total_rows_per_page) # By default 10 rows per page\n            total_rows_per_page_out = total_rows_per_page\n            total_pages=total_registers/total_rows_per_page\n            if total_registers%total_rows_per_page:\n                total_pages+=1\n            page_number=request.GET.get('page',1)                  # If no page specified use first page\n            if page_number=='last':\n                page_number=total_pages\n            else:\n                try:\n                    page_number=int(page_number)\n                except:\n                    page_number=1\n                if page_number&gt;total_pages:\n                    page_number=total_pages\n\n        # Build the list of page counters allowed\n        choice=[]\n        c=default_rows_per_page\n        chk=1\n        while total_registers&gt;=c:\n            choice.append(c)\n            if chk==1:\n                # From 5 to 10\n                c=c*2\n                # Next level\n                chk=2\n            elif chk==2:\n                # From 10 to 25 (10*2+10/2)\n                c=c*2+c/2\n                # Next level\n                chk=3\n            elif chk==3:\n                # From 25 to 50\n                c*=2\n                chk=1\n        # Add all choice in any case\n        choice.append(_('All'))\n        # Save the pagination in the structure\n        new_extra_context['rowsperpageallowed']=choice\n        new_extra_context['rowsperpage']=total_rows_per_page_out\n        new_extra_context['pagenumber']=page_number\n\n        if type(object_id)==type(u'abc'):\n            # If object_id is a string, we have a name not an object\n            new_extra_context['object_name']=object_id\n            object_obj = None\n        else:\n            # If is not an string\n            if object_id:\n                # If we got one, load the object\n                obj=extra_context['obj']\n                object_obj = get_object_or_404(obj, pk=object_id)\n            else:\n                # There is no object\n                object_obj = None\n            new_extra_context['object_obj']=object_obj\n\n        # Build the columns structure\n        new_extra_context['columns']=[]\n        for value in fields:\n            field=value[0]\n            new_extra_context['columns'].append(sort[field])\n\n        # Get the full number of registers and save it to extra_context\n        new_extra_context['total_registers']=total_registers\n        if total_rows_per_page=='All':\n            # Remove total_rows_per_page if is all\n            total_rows_per_page=None\n            new_extra_context['page_before']=None\n            new_extra_context['page_after']=None\n            new_extra_context['start_register']=1\n            new_extra_context['showing_registers']=total_registers\n        else:\n            # Page before\n            if page_number&lt;=1:\n                new_extra_context['page_before']=None\n            else:\n                new_extra_context['page_before']=page_number-1\n            # Page after\n            if page_number&gt;=total_pages:\n                new_extra_context['page_after']=None\n            else:\n                new_extra_context['page_after']=page_number+1\n            # Starting on register number\n            new_extra_context['start_register']=(page_number-1)*total_rows_per_page+1\n            new_extra_context['showing_registers']=total_rows_per_page\n\n        # Calculate end\n        new_extra_context['end_register']=min(new_extra_context['start_register']+new_extra_context['showing_registers']-1,total_registers)\n\n        # If compact rows\n        hide_head=[]\n        hide_tail=[]\n        hide_subhead=[]\n        hide_subtail=[]\n        if compact_rows:\n            (compact_field,compact_subelements)=compact_rows\n            lastvalue=None\n            lastrow=None\n            total_subelements=0\n            for row in queryset:\n                value=eval(\"row.%s\" % (compact_field))\n                # Count the subelements from this row\n                if compact_subelements:\n                    count_subelements=eval(\"row.%s.count()\" % (compact_subelements))\n                else:\n                    count_subelements=1\n                # If the new row belongs to the same group than the row before\n                if value==lastvalue:\n                    # Hide the head from this row\n                    hide_head.append(row.id)\n                    # Hide the tail from the last row\n                    hide_tail.append(lastrow.id)\n                    # If there were elements in the group (somebody already opened the subhead, hide the head of the subgroup) or if this row has no elements (no need to open this subhead)\n                    if total_subelements&gt;0 or count_subelements==0:\n                        # Hid the subhead\n                        hide_subhead.append(row.id)\n                    # Hide the tail of the last row, since we want to connect both groups\n                    hide_subtail.append(lastrow.id)\n                    # Add the total count of elements\n                    total_subelements+=count_subelements\n\n                # This row doesn't belong to the opened group\n                else:\n                    # If there was some row already and there are no elements in the group (nobody opened the group, so we don't have to close it either)\n                    if lastrow and total_subelements==0:\n                        # Hide the tail from the group\n                        hide_subtail.append(lastrow.id)\n                    # Startup a new count of elements (Reset the total count of subelements)\n                    total_subelements=0\n                    total_subelements+=count_subelements\n                    # If the new group doesn't have element (we don't think about opening the group)\n                    if total_subelements==0:\n                        # Hide the head from this group\n                        hide_subhead.append(row.id)\n                # Remember\n                lastvalue=value\n                lastrow=row\n\n            # Proper closing the group after the bucle if there was some row opened\n            if lastrow and total_subelements==0:\n                # Hide the tail from the group if was no element in the group (nobody opened the group)\n                hide_subtail.append(lastrow.id)\n\n        # Save it in the public structure\n        new_extra_context['hide_head']=hide_head\n        new_extra_context['hide_tail']=hide_tail\n        new_extra_context['hide_subhead']=hide_subhead\n        new_extra_context['hide_subtail']=hide_subtail\n\n        # Save extra context\n        extra_context.update(new_extra_context)\n\n        # Empty results are empty\n        if page_number==0:\n            total_rows_per_page=0\n\n        # Return results\n        return object_list(request, queryset=queryset, template_name=template_name, extra_context=extra_context, paginate_by=total_rows_per_page, page=page_number)\n</code></pre>\n\n<p>What it calls in urls.py from 'Tareas':</p>\n\n<pre><code>    from django.conf.urls import patterns, include, url\n    from tareas.models import Tareacobro, Tipotarea, Agentes, Perfil, Tareas\n    from django.conf import settings\n    from common.generic import view_list\n\n    # Uncomment the next two lines to enable the admin:\n\n    info_tasks = {'queryset': Tareas.objects.all()}\n\n    urlpatterns = patterns('tareas.views',\n        # =====TASKS======\n        # url(r'^$','tareas'),\n        (r'^', view_list, dict( info_tasks, extra_context={'obj':Tareas} ),'admin/tareas/tareas'),\n        # (r'^$',view_list, dict(info_tasks),'admin/tareas/tareas'),\n        #url(r'^$',view_list, dict(info_tasks, extra_context={'obj':Tareas} ),'tareas'),\n        )\n</code></pre>\n"},{"tags":["django","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13175950,"title":"Custom functions in django admin interface","body":"<p>I'm trying to costomise the display in the admin interface. I need one of the fields to display the name and date submitted for photo sharing site I'm creating, but I keep getting the following error:</p>\n\n<pre><code>global name 'datetimeConvertToHumanReadable' is not defined\n</code></pre>\n\n<p>Here's the full traceback: <a href=\"http://dpaste.com/822073/\" rel=\"nofollow\">http://dpaste.com/822073/</a></p>\n\n<p>My code</p>\n\n<p>Model:</p>\n\n<pre><code>class Design(models.Model):\n    designer_id = models.ForeignKey(User)\n    date_submitted = models.DateTimeField()\n    title = models.CharField(max_length=70)\n    description = models.TextField()\n    photo = models.FileField(upload_to='design_photos')\n\n    def image_thumb(self):\n        return '&lt;img src=\"/media/%s\" width=\"100\" height=\"100\" /&gt;' % (self.photo)\n    image_thumb.allow_tags = True\n\n    def datetimeConvertToHumanReadable(dt):\n\n        # convert passed datetime to timestamp\n        dt_stamp = dt.strftime(\"%s\")\n\n        # convert current datetime to timestamp\n        now = datetime.datetime.now()\n        now_stamp = now.strftime(\"%s\")\n\n        # find difference between the two\n        delta = int(now_stamp) - int(dt_stamp)\n\n        # convert to (seconds ago, minutes ago, hours ago, etc...)\n        if (delta &lt; 60):\n            return str(delta) + \" seconds ago\"\n        elif (delta &lt; 3600):\n            return str(delta/60) + \" minutes ago\"\n        elif (delta &lt; 86400):\n            return str(delta/3600) + \" hours ago\"\n        elif (delta &lt; 31536000):\n            return str(delta/86400) + \" days ago\"\n        else:\n            return str(delta/31536000) + \" years ago\"\n\n    def name_and_submitted(self):\n        date_submitted = datetimeConvertToHumanReadable(date_submitted) \n        return '&lt;div&gt;%s&lt;br /&gt;submitted %s ago&lt;/div&gt;' % (self.designer_id, self.date_submitted)\n\n    def __unicode__(self):\n        return self.title\n</code></pre>\n\n<p>Admin.py:</p>\n\n<pre><code>class DesignAdmin(admin.ModelAdmin):\n\n    list_display = ('image_thumb', 'title', 'description', 'name_and_submitted')\n</code></pre>\n\n<p>The image_thumb method works fine to display a thumbnail in the field, but the name_and_submitted method throws up the error. Any ideas?</p>\n"},{"tags":["python","regex","django","django-urls"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":13157204,"title":"django url how to specify 2 or more strings","body":"<p>I want to match the following url</p>\n\n<pre><code> url(r'^home/Physician|Vendor/$, 'ViewerLog', name=\"monitor_viewerLog\"),\n</code></pre>\n\n<p>How do I match Physician or Vendor? Is this the right way?</p>\n"},{"tags":["django","sphinx"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":13058751,"title":"Sphinx Search powered app - wrong design?","body":"<p>I'm building web app and using django and Sphinx for free text search. I need to apply additional restrictions before making request to searchd, consider 2 tables:</p>\n\n<p><strong>Entity</strong><br>\nid<br>\ntitle<br>\ndescription<br>\ncreated_by_id<br>\nupdated_by_id<br>\ncreated_date<br>\nupdated_date<br></p>\n\n<p>and </p>\n\n<p><strong>EntityUser</strong><br>\nid<br>\nentity_id [FK to the table above]<br>\njoining_user_id<br>\nis_approved<br>\ncreated_by_id<br>\nupdated_by_id<br>\ncreated_date<br>\nupdated_date<br></p>\n\n<p>I've built RT index for main table Entity, all works fine, but then I want to make a query only on those entities to which user has joined, i.e. where for specific user_id &amp; entity_id exists record in EntityUser with is_approved=1. Problem is that I can't index EntityUser, because there are no string fields - this table only holds integers/timestamps as you see. Not sure if I could make a query in SphinxQL containing subquery to another idex even if I could build index for that table. Knowing that Sphinx was used for quite big projects with great success, I doubt it's a limitation of Sphinx - is it bad design of DB/application or leak of knowledge how to build proper RT index? Can I somehow extend existing index so that I can use restriction above?</p>\n\n<p>I was thinking that I could apply the additional restrictions after Sphinx returns IDs of records on MySQL side, but that's not going to work: N records with highest weight would be returned, but after applying additional restrictions the result could be empty. So I need to get an area of search and then perform query only on those entities user can possibly see.</p>\n"},{"tags":["django","django-grappelli"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13175242,"title":"Django Grappelli installed but not being applied","body":"<p>I've gone through the installation, here:</p>\n\n<p><a href=\"http://django-grappelli.readthedocs.org/en/latest/quickstart.html#installation\" rel=\"nofollow\">http://django-grappelli.readthedocs.org/en/latest/quickstart.html#installation</a></p>\n\n<p>But I can't get it to work. Looking at the troubleshooting guide,</p>\n\n<p><a href=\"http://django-grappelli.readthedocs.org/en/latest/troubleshooting.html#troubleshooting\" rel=\"nofollow\">http://django-grappelli.readthedocs.org/en/latest/troubleshooting.html#troubleshooting</a></p>\n\n<p>it says that I need to check that the static files are being served correctly. How can I do that?</p>\n"},{"tags":["python","django","web-applications","internet"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13170367,"title":"django no reverse match","body":"<p>ok I was getting help from a kind person on this problem and would like to see if anyone can help here is my code.\nurls.py</p>\n\n<pre><code>urlpatterns = patterns('',\n\nurl(r'^venues/(?P&lt;venue_id&gt;\\d+)/$','venues.views.venue', name='venue'),\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>def venue(request,venue_id):\nvenue= get_object_or_404(VenueProfile,\n                           venue__pk=venue_id).select_related('venue')\n\nreturn render_to_response('venues/venueprofile',{'venue',venue},\n    context_instance=RequestContext(request))\n</code></pre>\n\n<p>template</p>\n\n<pre><code>{% load url from future %}\n{% for v in venues %}\n    {% with ven=v.venue profile=v %}\n&lt;a href=\"{% url 'venue' venue_id=venue.pk %}\"&gt;{{ven.name}}&lt;/a&gt;\n</code></pre>\n\n<p>now when I try to use this i get Reverse for 'venue' with arguments '()' and keyword arguments '{'venue_id': ''}' not found.Can anybody please help me here, and please keep in mind I left out some code like the {{venues}} object defined in a view.</p>\n"},{"tags":["python","django"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":165,"score":0,"question_id":8178480,"title":"django radio buttons displayed inside <ul>","body":"<p>I dynamically generate my html using the django form template everything works fine except the radio buttons are displayed inside a <code>&lt;ul&gt;&lt;li&gt;</code> and is not a formatting I like. How can I overwrite this formatting, I just want the radio buttons to be side by side.</p>\n"},{"tags":["django","debugging","remote-debugging","pdb-python","django-dev-server"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":13174479,"title":"Django - use pdb interactive debug for wsgi running app","body":"<p>If I develop a Django app and use the included testing server, I can just add a <code>import pdb; pdb.set_trace()</code> anywhere in the code and have a breaking point that throws me into an interactive debugger. To make things clear, I dont' mean using any IDE, just simple setup of ssh-ing into a VM or remote dev server.</p>\n\n<p>How can I get a similar behavior for an WSGI Django app? (again, the assumed setup is me with an ssh session to the server - VM or remote)</p>\n"},{"tags":["html","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13124036,"title":"Passing Django forms' result to a page","body":"<p>I have worked on this for sometime now and I have decided to seek for your help. I have an ongoing project and I am using the django framework to build the site. \nI have an html page that requests for user input, I have been able to extract the given data using the <code>form.cleaned_data['']</code>. A</p>\n\n<pre><code>#This is my views.py;\n\n\n\n from django.shortcuts import render_to_response\n    from django.template import RequestContext\n\n    from forms import CarloanForm\n\n\n    def index(request):\n        form = CarloanForm()\n        if request.POST:\n            form = CarloanForm(request.POST)\n            if form.is_valid():\n                form.save()\n        else:\n            form = CarloanForm()\n        return render_to_response('carloan/index.html', {'form': form},\n                      context_instance=RequestContext(request))\n\n#I am extracting the user inputs using;\n\namount_of_vehicle = form.cleaned_data['cost_of_vehicle_Naira'] \ntenure = form.cleaned_data['loan_repayment_tenure_Months']\ninterest_rate = form.cleaned_data['interest_rate_Percentage']\nequity = form.cleaned_data['equity_contrib_rate_Percentage']\ndepreciation_rate = form.cleaned_data['depreciation_rate_Percentage']\n</code></pre>\n\n<p>What I need to do and don't know how to go about it are;</p>\n\n<ol>\n<li><p>Carry out some operations on the data (extracted using <code>form.cleaned_data['']</code>) and I have written some lines of code to that effect;</p>\n\n<pre><code>class LoanCalc:\n    def __init__(self,amount_of_vehicle,tenure,interest_rate,equity,depreciation_rate):\n        self.amount_of_vehicle = float(amount_of_vehicle)\n        self.tenure = float(tenure)\n        self.interest_rate = float(interest_rate)\n        self.equity = float(equity)\n        self.depreciation_rate = float(depreciation_rate)\n    def interest(self):\n        return (self.interest_rate/100) * self.amount_of_vehicle *(self.tenure/12)\n    def management_fee(self):\n        return 0.01 * (self.amount_of_vehicle + user.interest())\n    def processing_fee(self):\n        return 0.0025 *(self.amount_of_vehicle + user.interest())\n    def legal_fee(self):\n        return 0.0075 * (self.amount_of_vehicle + user.interest())\n    def residual_amount(self):\n        return 0.01 * (self.amount_of_vehicle - ((self.depreciation_rate/100) * self.amount_of_vehicle *(self.tenure/12)))\n    def equity_contribution(self):\n        return (self.equity/100) * self.amount_of_vehicle\n    def LoanPaymentPlan(self):\n        months = 1\n        total_amount = self.amount_of_vehicle+user.interest()+user.management_fee()+user.processing_fee()+user.legal_fee()+user.residual_amount()\n        upfront_payment = user.management_fee()+user.processing_fee()+user.legal_fee()+user.equity_contribution()+user.residual_amount()\n        opening_balance = total_amount - upfront_payment\n        balance = opening_balance\n        while months &lt;= self.tenure:\n            if balance &gt; 0:\n                monthly_instalment =(opening_balance/self.tenure)\n                monthly_interest = (((self.interest_rate/100) * balance)/ 12)\n                loan_payment = monthly_instalment - monthly_interest\n                closing_balance = balance - monthly_instalment\n                print'  ',months,'  ',round(balance,2),'   ', round(monthly_instalment,2),'        ',round(monthly_interest,2) \\\n                , '       ',' ',round(loan_payment,2),'     ',round(closing_balance,2)\n                balance = closing_balance\n                months += 1\nreturn 'Thank you for using the Loan Calculator App'\n</code></pre></li>\n</ol>\n\n<p>and i want to carry out the operations in the code above on the extracted data.</p>\n\n<ol>\n<li>I am thinking of doing it in such a way like this;</li>\n</ol>\n\n<p>Create an empty dictionary;</p>\n\n<pre><code>    user = {}\n    user = LoanCalc(amount_of_vehicle,tenure,interest_rate,equity,depreciation_rate)\n    result= user.interest()\n    result1 = user.management_fee()\n     .           .\n     .           .\n     .           .\n    result10 = user.LoanPaymentPlan()\n</code></pre>\n\n<ol>\n<li>Pass the result(s) obtained from (question 2) to the same template that generated the form.</li>\n</ol>\n\n<p>Please help me out guys, i am still very new to django. Thanks</p>\n\n<h1>This is the full stack of the referenced error am getting:</h1>\n\n<pre><code>Environment:\n\n\nRequest Method: GET\nRequest URL: http://127.0.0.1:9000/result/\n\nDjango Version: 1.4.1\nPython Version: 2.5.4\nInstalled Applications:\n('django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.sites',\n 'django.contrib.messages',\n 'django.contrib.staticfiles',\n 'django.contrib.admin',\n 'carloan')\nInstalled Middleware:\n('django.middleware.common.CommonMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware')\n\n\nTraceback:\nFile \"C:\\Python25\\Lib\\site-packages\\django\\core\\handlers\\base.py\" in get_response\n  111.                         response = callback(request, *callback_args, **callback_kwargs)\nFile \"C:\\Users\\AJIBIKE\\Documents\\Circuit Atlantic\\calculator\\carloan\\views.py\" in result_page\n  226.         'carloan': instance,\n\ndef result_page(request):\n    if request.POST:\n        form = Carloan_formForm(request.POST)\n        if form.is_valid():\n            instance = form.save(commit=False)\n            instance.interest = (instance.interest_rate/100) * instance.amount_of_vehicle * (instance.tenure/12)\n            instance.save()\n    else:\n        form = Carloan_formForm()\n    return render_to_response('carloan/result.html', {'carloan': instance,'form': form},\n                  context_instance=RequestContext(request))\n\n\nException Type: UnboundLocalError at /result/\nException Value: local variable 'instance' referenced before assignment\n</code></pre>\n\n<h1>Latest</h1>\n\n<pre><code>from django.shortcuts import render_to_response\nfrom django.template import RequestContext\nfrom django.http import HttpResponseRedirect, HttpResponse\n\nfrom forms import Carloan_formForm\n\n\ndef index(request):\n    if request.POST:\n        form = Carloan_formForm(request.POST)\n        if form.is_valid():\n            instance = form.save()\n            return HttpResponseRedirect ('/result/')\n    form = Carloan_formForm()\n    kwvars = {\n            'form': form,\n            }\n    return render_to_response('carloan/index.html', kwvars,\n                  context_instance=RequestContext(request))\n\n\ndef result_page(request):\n    instance = None\n    if request.POST:\n        form = Carloan_formForm(request.POST)\n        if form.is_valid():\n            instance = form.save(commit=False)\n            instance.interest = (instance.interest_rate_Percentage/100) * instance.cost_of_vehicle_Naira * (instance.loan_repayment_tenure_Months/12)\n            instance.management_fee = 0.01 * (instance.cost_of_vehicle_Naira + instance.interest)\n            instance.processing_fee = 0.0025 * (instance.cost_of_vehicle_Naira + instance.interest)\n            instance.legal_fee = 0.0075 * (instance.cost_of_vehicle_Naira + instance.interest)\n           #i get syntax error starting from this line, and when i comment it out and the lines below, there is no syntax error.\n            instance.residual_amount = 0.01 * ((instance.cost_of_vehicle_Naira - ((instance.depreciation_rate_Percentage/100) * instance.cost_of_vehicle_Naira * (instance.tenure/12))) \n            instance.equity_contribution = (instance.equity_contrib_rate_Percentage/100) * instance.cost_of_vehicle_Naira)\n            instance.save()\n    else:\n        form = Carloan_formForm()\n    return render_to_response('carloan/result.html', {'instance': instance, 'form': form},\n                  context_instance=RequestContext(request))\nforms.py\n\nfrom django import forms\nfrom django.forms import ModelForm\n\nfrom models import Carloan_form\n\nclass Carloan_formForm(ModelForm):\n    class Meta:\n        model = Carloan_form\n        exclude = ('interest', 'management_fee', 'processing_fee', 'legal_fee', \\\n                   'residual_amount', 'equity_contribution')\n</code></pre>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13174137,"title":"Django TemplateDoesNotExist at /home/","body":"<p>directory structure of dummy project</p>\n\n<pre><code>/dummy\n\n   /dummy\n\n            urls.py\n            views.py\n            setting.py\n            _init_\n            wsgi.py\n    /template\n            home.html \n</code></pre>\n\n<p><strong>settings.py</strong></p>\n\n<pre><code>TEMPLATE_DIRS = (\n    \"D:/Data/Codes/Django_Code/dummy/template\"\n    )\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>from  django.shortcuts import render_to_response\n\nfrom  django.template import RequestContext\n\n def home_view(request):\n         render_to_response(request, 'home.html')\n</code></pre>\n\n<p><strong>urls.py</strong></p>\n\n<pre><code>from django.conf.urls import patterns, include, url\n\nfrom dummy.views import home_view\n\nurlpatterns = patterns('',\n\n    url(r'^home/$', home_view),\n)\n</code></pre>\n\n<p>scratching my head over TemplateDoesNotExist Although have specified template directory in setting.py under TEMPLATE_DIRS</p>\n\n<p>Error Trace\nTemplate-loader postmortem</p>\n\n<p>Django tried loading these templates, in this order:\nUsing loader django.template.loaders.filesystem.Loader:\nD:\\Data\\Codes\\Django_Code\\dummy\\template\\,\nPOST:,\nCOOKIES:{'csrftoken': 'CNnHomGRMMJmik75Pi2rclMVdPjO36t9'},\nMETA:{'ALLUSERSPROFILE': 'C:\\ProgramData',\n 'APPDATA': 'C:\\Users\\nitin\\AppData\\Roaming',\n 'CLASSPATH': '.;D:\\data\\Codes;C:\\Users\\nitin\\Downloads\\javapostmark\\apache-mime4j-0.6.jar;C:\\Users\\nitin\\Downloads\\javapostmark\\commons-codec-1.3.jar;C:\\Users\\nitin\\Downloads\\javapostmark\\commons-logging-1.1.1.jar;C:\\Users\\nitin\\Downloads\\javapostmark\\gson-1.4.jar;C:\\Users\\nitin\\Downloads\\javapostmark\\httpclient-4.0.1.jar;C:\\Users\\nitin\\Downloads\\javapostmark\\httpcore-4.0.1.jar;C:\\Users\\nitin\\Downloads\\javapostmark\\httpmime-4.0.1.jar;C:\\Users\\nitin\\Downloads\\javapostmark\\joda-time-1.6.jar;',\n 'COMMONPROGRAMFILES': 'C:\\Program Files\\Common Files',\n 'COMMONPROGRAMFILES(X86)': 'C:\\Program Files (x86)\\Common Files',\n 'COMMONPROGRAMW6432': 'C:\\Program Files\\Common Files',\n 'COMPUTERNAME': 'NITIN-PC',\n 'COMSPEC': 'C:\\Windows\\system32\\cmd.exe',\n 'CONTENT_LENGTH': '',\n 'CONTENT_TYPE': 'text\\plain',\n 'CSRF_COOKIE': 'CNnHomGRMMJmik75Pi2rclMVdPjO36t9',\n 'DJANGO_SETTINGS_MODULE': 'dummy.settings',\n 'FP_NO_HOST_CHECK': 'NO',\n 'GATEWAY_INTERFACE': 'CGI\\1.1',\n 'HOMEDRIVE': 'C:',\n 'HOMEPATH': '\\Users\\nitin',\n 'HTTP_ACCEPT': 'text\\html,application\\xhtml+xml,application\\xml;q=0.9,*\\*;q=0.8',\n 'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',\n 'HTTP_ACCEPT_ENCODING': 'gzip,deflate,sdch',\n 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.8',\n 'HTTP_CACHE_CONTROL': 'max-age=0',\n 'HTTP_CONNECTION': 'keep-alive',\n 'HTTP_COOKIE': 'csrftoken=CNnHomGRMMJmik75Pi2rclMVdPjO36t9',\n 'HTTP_HOST': '127.0.0.1:8000',\n 'HTTP_USER_AGENT': 'Mozilla\\5.0 (Windows NT 6.1; WOW64) AppleWebKit\\537.4 (KHTML, like Gecko) Chrome\\22.0.1229.94 Safari\\537.4',\n 'JAVA_HOME': 'C:\\Program Files (x86)\\Java\\jdk1.7.0_05;',\n 'LOCALAPPDATA': 'C:\\Users\\nitin\\AppData\\Local',\n 'LOGONSERVER': '\\NITIN-PC',\n 'NUMBER_OF_PROCESSORS': '2',\n 'OS': 'Windows_NT',\n 'PATH': 'C:\\Program Files (x86)\\Java\\jdk1.7.0_05\\bin;C:\\Python27;C:\\Python27\\;C:\\Python27\\Scripts',\n 'PATHEXT': '.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC',\n 'PATH_INFO': u'\\home\\',\n 'PROCESSOR_ARCHITECTURE': 'AMD64',\n 'PROCESSOR_IDENTIFIER': 'Intel64 Family 6 Model 23 Stepping 10, GenuineIntel',\n 'PROCESSOR_LEVEL': '6',\n 'PROCESSOR_REVISION': '170a',\n 'PROGRAMDATA': 'C:\\ProgramData',\n 'PROGRAMFILES': 'C:\\Program Files',\n 'PROGRAMFILES(X86)': 'C:\\Program Files (x86)',\n 'PROGRAMW6432': 'C:\\Program Files',\n 'PROMPT': '$P$G',\n 'PSMODULEPATH': 'C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules\\',\n 'PUBLIC': 'C:\\Users\\Public',\n 'QUERY_STRING': '',\n 'REMOTE_ADDR': '127.0.0.1',\n 'REMOTE_HOST': '',\n 'REQUEST_METHOD': 'GET',\n 'RUN_MAIN': 'true',\n 'SCRIPT_NAME': u'',\n 'SERVER_NAME': 'nitin-PC',\n 'SERVER_PORT': '8000',\n 'SERVER_PROTOCOL': 'HTTP\\1.1',\n 'SERVER_SOFTWARE': 'WSGIServer\\0.1 Python\\2.7.3',\n 'SESSIONNAME': 'Console',\n 'SYSTEMDRIVE': 'C:',\n 'SYSTEMROOT': 'C:\\Windows',\n 'TEMP': 'C:\\Users\\nitin\\AppData\\Local\\Temp',\n 'TMP': 'C:\\Users\\nitin\\AppData\\Local\\Temp',\n 'USERDOMAIN': 'nitin-PC',\n 'USERNAME': 'nitin',\n 'USERPROFILE': 'C:\\Users\\nitin',\n 'WINDIR': 'C:\\Windows',\n 'wsgi.errors': ', mode 'w' at 0x0000000001D761E0>,\n 'wsgi.file_wrapper': ,\n 'wsgi.input': ,\n 'wsgi.multiprocess': False,\n 'wsgi.multithread': True,\n 'wsgi.run_once': False,\n 'wsgi.url_scheme': 'http',\n 'wsgi.version': (1, 0)}> (File does not exist)\nUsing loader django.template.loaders.app_directories.Loader:\nC:\\Python27\\lib\\site-packages\\django\\contrib\\auth\\templates\\,\nPOST:,\nCOOKIES:{'csrftoken': 'CNnHomGRMMJmik75Pi2rclMVdPjO36t9'},\nMETA:{'ALLUSERSPROFILE': 'C:\\ProgramData',\n 'APPDATA': 'C:\\Users\\nitin\\AppData\\Roaming',\n 'CLASSPATH': '.;D:\\data\\Codes;C:\\Users\\nitin\\Downloads\\javapostmark\\apache-mime4j-0.6.jar;C:\\Users\\nitin\\Downloads\\javapostmark\\commons-codec-1.3.jar;C:\\Users\\nitin\\Downloads\\javapostmark\\commons-logging-1.1.1.jar;C:\\Users\\nitin\\Downloads\\javapostmark\\gson-1.4.jar;C:\\Users\\nitin\\Downloads\\javapostmark\\httpclient-4.0.1.jar;C:\\Users\\nitin\\Downloads\\javapostmark\\httpcore-4.0.1.jar;C:\\Users\\nitin\\Downloads\\javapostmark\\httpmime-4.0.1.jar;C:\\Users\\nitin\\Downloads\\javapostmark\\joda-time-1.6.jar;',\n 'COMMONPROGRAMFILES': 'C:\\Program Files\\Common Files',\n 'COMMONPROGRAMFILES(X86)': 'C:\\Program Files (x86)\\Common Files',\n 'COMMONPROGRAMW6432': 'C:\\Program Files\\Common Files',\n 'COMPUTERNAME': 'NITIN-PC',\n 'COMSPEC': 'C:\\Windows\\system32\\cmd.exe',\n 'CONTENT_LENGTH': '',\n 'CONTENT_TYPE': 'text\\plain',\n 'CSRF_COOKIE': 'CNnHomGRMMJmik75Pi2rclMVdPjO36t9',\n 'DJANGO_SETTINGS_MODULE': 'dummy.settings',\n 'FP_NO_HOST_CHECK': 'NO',\n 'GATEWAY_INTERFACE': 'CGI\\1.1',\n 'HOMEDRIVE': 'C:',\n 'HOMEPATH': '\\Users\\nitin',\n 'HTTP_ACCEPT': 'text\\html,application\\xhtml+xml,application\\xml;q=0.9,*\\*;q=0.8',\n 'HTTP_ACCEPT_CHARSET': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',\n 'HTTP_ACCEPT_ENCODING': 'gzip,deflate,sdch',\n 'HTTP_ACCEPT_LANGUAGE': 'en-US,en;q=0.8',\n 'HTTP_CACHE_CONTROL': 'max-age=0',\n 'HTTP_CONNECTION': 'keep-alive',\n 'HTTP_COOKIE': 'csrftoken=CNnHomGRMMJmik75Pi2rclMVdPjO36t9',\n 'HTTP_HOST': '127.0.0.1:8000',\n 'HTTP_USER_AGENT': 'Mozilla\\5.0 (Windows NT 6.1; WOW64) AppleWebKit\\537.4 (KHTML, like Gecko) Chrome\\22.0.1229.94 Safari\\537.4',\n 'JAVA_HOME': 'C:\\Program Files (x86)\\Java\\jdk1.7.0_05;',\n 'LOCALAPPDATA': 'C:\\Users\\nitin\\AppData\\Local',\n 'LOGONSERVER': '\\NITIN-PC',\n 'NUMBER_OF_PROCESSORS': '2',\n 'OS': 'Windows_NT',\n 'PATH': 'C:\\Program Files (x86)\\Java\\jdk1.7.0_05\\bin;C:\\Python27;C:\\Python27\\;C:\\Python27\\Scripts',\n 'PATHEXT': '.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC',\n 'PATH_INFO': u'\\home\\',\n 'PROCESSOR_ARCHITECTURE': 'AMD64',\n 'PROCESSOR_IDENTIFIER': 'Intel64 Family 6 Model 23 Stepping 10, GenuineIntel',\n 'PROCESSOR_LEVEL': '6',\n 'PROCESSOR_REVISION': '170a',\n 'PROGRAMDATA': 'C:\\ProgramData',\n 'PROGRAMFILES': 'C:\\Program Files',\n 'PROGRAMFILES(X86)': 'C:\\Program Files (x86)',\n 'PROGRAMW6432': 'C:\\Program Files',\n 'PROMPT': '$P$G',\n 'PSMODULEPATH': 'C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules\\',\n 'PUBLIC': 'C:\\Users\\Public',\n 'QUERY_STRING': '',\n 'REMOTE_ADDR': '127.0.0.1',\n 'REMOTE_HOST': '',\n 'REQUEST_METHOD': 'GET',\n 'RUN_MAIN': 'true',\n 'SCRIPT_NAME': u'',\n 'SERVER_NAME': 'nitin-PC',\n 'SERVER_PORT': '8000',\n 'SERVER_PROTOCOL': 'HTTP\\1.1',\n 'SERVER_SOFTWARE': 'WSGIServer\\0.1 Python\\2.7.3',\n 'SESSIONNAME': 'Console',\n 'SYSTEMDRIVE': 'C:',\n 'SYSTEMROOT': 'C:\\Windows',\n 'TEMP': 'C:\\Users\\nitin\\AppData\\Local\\Temp',\n 'TMP': 'C:\\Users\\nitin\\AppData\\Local\\Temp',\n 'USERDOMAIN': 'nitin-PC',\n 'USERNAME': 'nitin',\n 'USERPROFILE': 'C:\\Users\\nitin',\n 'WINDIR': 'C:\\Windows',\n 'wsgi.errors': ', mode 'w' at 0x0000000001D761E0>,\n 'wsgi.file_wrapper': ,\n 'wsgi.input': ,\n 'wsgi.multiprocess': False,\n 'wsgi.multithread': True,\n 'wsgi.run_once': False,\n 'wsgi.url_scheme': 'http',\n 'wsgi.version': (1, 0)}> (File does not exist)</p>\n"},{"tags":["django","api","rest","django-rest-framework"],"answer_count":2,"favorite_count":6,"up_vote_count":19,"down_vote_count":0,"view_count":1862,"score":19,"question_id":7303313,"title":"What are the differences between django-tastypie and djangorestframework?","body":"<p>Why would you use one over the other, for exposing an API for your Django app?</p>\n\n<p><a href=\"http://pypi.python.org/pypi/djangorestframework/\">http://pypi.python.org/pypi/djangorestframework/</a></p>\n\n<p><a href=\"http://pypi.python.org/pypi/django-tastypie\">http://pypi.python.org/pypi/django-tastypie</a></p>\n"},{"tags":["django","django-admin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13174440,"title":"django admin - how to display thumbnail instead of path to file","body":"<p>I'm trying to display thumbnails of a model in the admin interface. When I use list_display() to add the image field, it shows the path to the file rather than the image itself. How is it possible to display the image and control its size?</p>\n"},{"tags":["jquery","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13171363,"title":"Django html template's jquery not recognizing tags","body":"<p>I have this code in my html templates's jquery...</p>\n\n<pre><code>var $ctrl = $('&lt;input/&gt;').attr({ type: 'radio', name:'groups',value:model.get('name'),id:id1});  //input  \n$(\"#div1\").append($ctrl);\n// create div\n$('&lt;div/&gt;').html(model.get('name')) \n                    .attr({\n                       id: id1\n                       style:'display:inline',\n                       float:'left',\n                       title:model.get('description')\n                     })\n              .appendTo('#div1');\n</code></pre>\n\n<p>However my jquery is not recognizing these tags...nd even they are not getting recognized here...I am new to jquery...I dont know what is wrong.....</p>\n"},{"tags":["django","overlay","jquery-tools"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13174492,"title":"jQuery Tools overlay on Django forms","body":"<p>I am trying to integrate jQuery tools overlay on my Django portal, in order to produce these fancy ajax forms that are default on Plone! Specially on login/register forms that would be great. </p>\n\n<p>I have some issues with the Django part, and would appreciate any pointers to a Django project that already handles this. </p>\n\n<p>Thanks for any reply!</p>\n"},{"tags":["django","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13174140,"title":"extending django admin model","body":"<p>The default view for a model on the django admin page shows a list of items in that view, but only gives one field. How is it possible to show multiple fields in the list?</p>\n"},{"tags":["jquery","python","html","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13173535,"title":"Load a dynamic python URL with jQuery","body":"<p>I am trying to load a dynamic URL generated by Python Django using jQuery.</p>\n\n<pre><code>$('a').click(function(ev) {\n    ev.preventDefault();\n    var url = $(this).attr('href');\n    $('#loadDiv').load('localhost/home/{{ movie.id }}/add_question/');\n});\n</code></pre>\n\n<p>How can I catch and load the link if it constantly changes? </p>\n"},{"tags":["django","django-forms","django-modelform","django-1.4"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":301,"score":1,"question_id":10531029,"title":"Django get_object_or_404 with select_related causes form checkbox widget weird behavior : Django 1.4 bug?","body":"<p>I come with a really strange Django 1.4 behaviour wich sounds like a bug to me. I looked anywhere if someone experienced it, but didn't find anything.</p>\n\n<p>My concern is about <strong>Django form creation using ModelForm</strong>, with a model containing boolean field.</p>\n\n<p>Let <code>Post</code> and <code>Topic</code> two models wich should look like :</p>\n\n<pre><code>class Topic(models.Model):\n    my_bool = models.BooleanField(default=False)\n\nclass Post(models.Model):\n    topic = models.ForeignKey(Topic, related_name='posts')\n</code></pre>\n\n<p>Now, I'm gonna try to generate a form using TopicForm a class definied elsewhere :</p>\n\n<pre><code>post = Post.objects.get(pk=id_post)\nf = TopicForm(instance=post.topic)\nprint f\n</code></pre>\n\n<p>It works fine : if in DB <code>my_bool</code> is False, the checkbox is <em>not</em> checked. If <code>my_bool</code> is True, the checkbox is checked. Here is the result :</p>\n\n<pre><code>&lt;p&gt;&lt;label for=\"id_my_bool\"&gt;my_bool:&lt;/label&gt; &lt;input type=\"checkbox\" name=\"my_bool\" id=\"id_my_bool\" /&gt;&lt;/p&gt;\n</code></pre>\n\n<h2>The problem !</h2>\n\n<p>OK, so here is the problem : if I use <code>get_object_or_404</code> to get my <code>Post</code> object, then <code>my_bool</code> field <strong>will always be checked</strong> ! Look at this :</p>\n\n<pre><code>post = get_object_or_404(Post.objects.select_related('topic'), pk=id_post)\nf = TopicForm(instance=post.topic)\nprint f\n</code></pre>\n\n<p>Output (weird) :</p>\n\n<pre><code>&lt;p&gt;&lt;label for=\"id_my_bool\"&gt;my_bool:&lt;/label&gt; &lt;input checked=\"checked\" type=\"checkbox\" name=\"my_bool\" value=\"0\" id=\"id_my_bool\" /&gt;&lt;/p&gt;\n</code></pre>\n\n<p>Nota : I tryed several other ways to get the <code>Post</code> object, which <strong>all work fine</strong> :</p>\n\n<ul>\n<li><code>post = Post.objects.filter(pk=id_post)[0]</code></li>\n<li><code>post = get_object_or_404(Post, pk=id_post)</code></li>\n<li><code>post = Post.objects.get(pk=id_post)</code></li>\n</ul>\n\n<p>The only thing which makes it bug is :</p>\n\n<pre><code>post = get_object_or_404(Post.objects.select_related('topic'), pk=id_post)\n</code></pre>\n\n<h2>Comments</h2>\n\n<ul>\n<li>With Django 1.3, there wasn't any problem with it : only Django 1.4 makes it bug.</li>\n<li>I found some Django 1.4 bugs which seemed to be related, like : \n<ul>\n<li><a href=\"https://code.djangoproject.com/ticket/17747\" rel=\"nofollow\">https://code.djangoproject.com/ticket/17747</a></li>\n<li><a href=\"https://code.djangoproject.com/ticket/17114\" rel=\"nofollow\">https://code.djangoproject.com/ticket/17114</a></li>\n<li><a href=\"http://groups.google.com/group/django-developers/browse_thread/thread/7d895b2f5fc9ef4b\" rel=\"nofollow\">http://groups.google.com/group/django-developers/browse_thread/thread/7d895b2f5fc9ef4b</a></li>\n</ul></li>\n<li>I do not use MySQL GIS backend, but <code>django.db.backends.mysql</code>.</li>\n</ul>\n\n<p>Have you got any idea ?</p>\n\n<p>Thank you very much in advance !</p>\n"},{"tags":["python","html","django","django-models","views"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13172273,"title":"Auto fill ForeignKey for Django Model","body":"<p>So I'm building a basic Q&amp;A site-- Each topic has a series of questions associated with it, and each question has multiple answers associated with it.</p>\n\n<p>I'm creating the user input for questions and they have to associated with a topic. This is the questions model</p>\n\n<pre><code>#models.py\nclass Question(models.Model):\n    movie           = models.ForeignKey(Movie, blank=True, null=True)\n    question_text   = models.CharField(max_length = 1000)\n    question_detail = models.CharField(max_length = 5000, blank = True, null = True)\n    q_pub_date      = models.DateTimeField(auto_now_add = True)\n    q_author        = models.ForeignKey(User)\nclass QuestionForm(ModelForm):\n    def save(self, user = None, force_insert = False, force_update = False, commit = True):\n        q = super(QuestionForm, self).save(commit = False)\n        q.q_author = user\n        if commit:\n            q.save()\n        return q\n\n    class Meta:\n        model = Question\n        exclude = ('movie', 'q_author', 'q_pub_date')\n</code></pre>\n\n<p>This is the URL conf</p>\n\n<pre><code>#urls.py\nurl(r'^(?P&lt;movie_id&gt;\\d+)/add_question/$', 'add_question'),\n</code></pre>\n\n<p>Now here is the view</p>\n\n<pre><code>#views.py\ndef add_question(request, movie_id):\n    if request.method == \"POST\":\n        form = QuestionForm(request.POST, request.FILES)\n        #QuestionForm.movie = Movie.objects.get(pk = movie_id)\n        if form.is_valid():\n            form.save(user = request.user)\n            return HttpResponseRedirect(\"/home/\")\n    else:\n        form = QuestionForm()\n    return render_to_response(\"qanda/add_question.html\", {'form': form}, context_instance = RequestContext(request))\n</code></pre>\n\n<p>This is the HTML code</p>\n\n<pre><code>#add_question.html\n&lt;h1&gt; Add Question: {{ user.username }}&lt;/h1&gt;\n    &lt;form action = \"\" method = \"post\"&gt;{% csrf_token %}\n        {{ form.as_p }}\n        &lt;input type = \"submit\" value = \"Ask\" /&gt;\n        &lt;input type = \"hidden\" name = \"next\" value = \"{{ next|escape }}\" /&gt;\n    &lt;/form&gt;\n</code></pre>\n\n<p>In the view, the commented out line is what I added to the view to try and auto save the model. When adding a question, the URL has the ID of the movie it is associated with, and my thought is to take that ID and then plug it into the ForeignKey to identify which movie is associated with the question. However, when I use my code, it changes all of the Questions' movie associations to the current movie instead of just changing that specific question's movie association. Without the code, it doesn't associate a Movie with the Question at all. How do I fix this?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13172837,"title":"How can i use variable in django while accessing models","body":"<p>I have this code</p>\n\n<p><code>keys = {'speed','temp'}</code></p>\n\n<p>I have the variables like</p>\n\n<p><code>object.subobj.speed</code> and <code>object.subobj.temp</code></p>\n\n<p>how can i loop</p>\n\n<pre><code>for key in keys\n    print object.subobj.key\n</code></pre>\n"},{"tags":["python","html","django","django-forms","views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13167094,"title":"User won't auto save in View, but does in Admin","body":"<p>Building a form to let users submit posts as well as an image. My model has a text field, image, publish date, and author field. Publish Date and Author auto save without any user input. It works on the admin side with admin.py. However, when displaying this through a view, it is not working. Why?</p>\n\n<pre><code>#models.py\n    class Question(models.Model):\n    text            = models.CharField(max_length = 500)\n    image           = models.ImageField(upload_to = 'movie_poster')\n    pub_date        = models.DateTimeField(auto_now_add = True)\n    author          = models.ForeignKey(User)\n\n    def __unicode__(self):\n        return self.title\n\n    class QuestionForm(ModelForm):\n        class Meta:\n             model = Question\n             exclude = ('author', 'pub_date')\n#views.py\ndef add_question(request):\n     def save_model(self, request, obj, form, change):\n        obj.author = request.user\n        obj.save()\n     if request.method == \"POST\":\n        form = QuestionForm(request.POST, request.FILES)   \n        if form.is_valid():\n            form.save()\n            return HttpResponseRedirect(\"/home/\")\n    else:\n        form = QuestionForm\n        return render_to_response(\"qanda/add_question.html\", {'form': form}, context_instance = RequestContext(request))\n\n#add_question.html\n{% block content %}\n\n&lt;div class=\"loginform\"&gt;\n    &lt;h1&gt; Add Movie:&lt;/h1&gt;\n    &lt;form enctype = \"multipart/form-data\" action = \"\" method = \"post\"&gt;{% csrf_token %}\n        {{ form.as_p }}\n        &lt;input type = \"submit\" value = \"Add\" /&gt;\n        &lt;input type = \"hidden\" name = \"next\" value = \"{{ next|escape }}\" /&gt;\n    &lt;/form&gt;\n{% endblock %}\n</code></pre>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13172331,"title":"Using raw sql in django python","body":"<p>I have few things to ask for custom queries in Django</p>\n\n<ol>\n<li>DO i need to use the DB table name in the query or just the Model name</li>\n<li>if i need to join the various tables in raw sql. do i need to use db field name or model field name like</li>\n</ol>\n\n<p><code>Person.objects.raw('SELECT id, first_name, last_name, birth_date FROM Person A\ninner join Address B on A.address  = B.id\n')</code></p>\n\n<p><code>or B.id = A.address_id</code></p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13170528,"title":"How to make this complex query in django python","body":"<p>I have the model Called  <code>Plan</code></p>\n\n<p>Plan has <code>state</code> and <code>city</code> associated with it</p>\n\n<p>I have other Model called <code>Weather</code> which has data at variious times during per day for each <code>city</code> in <code>state</code></p>\n\n<p>Now i want to get all the Plan objects with extra dictionary called weather.</p>\n\n<p>Steps are</p>\n\n<ol>\n<li>Get all the plan objects</li>\n<li>Now based on the state and city each plan will have many rows in weather table</li>\n<li>i want to aggreagte all the columns .eg if i have five rows for that city and state\nand temperature values are  <code>20 , 21 , 22 , 23 , 24</code> . then i want take the avg of all the temperatues i.e 22 and store in new dictionary in plan model</li>\n</ol>\n\n<p>so that i can access <code>Plan.weather.temperature</code> and it comes <code>22</code></p>\n\n<p>I can use the for loop but that will be lot db queries . can do that on one query or what ever option is possible</p>\n\n<p>EDIT:</p>\n\n<pre><code>class Plan(model.model):\n    name = tinymce_models.HTMLField(blank=True, null=True)\n    region = models.ForeignKey(Region)\n    district = models.ForeignKey(District)\n</code></pre>\n\n<hr>\n\n<pre><code> class Weather(model.model):\n\n        region = models.ForeignKey(Region)\n        district = models.ForeignKey(District)\n        temp_max = models.IntegerField(blank=True, null=True, verbose_name='Max temperature (C)')\n        temp_min = models.IntegerField(blank=True, null=True, verbose_name='Min temperature (C)')\n</code></pre>\n"},{"tags":["javascript","jquery","python","html","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13172071,"title":"User input not saved in model with Javascript","body":"<p>Building a site so users can add topics onto a site and ask then Q&amp;A. Using AJAX, the \"Add Media\" button on the home page loads my Add Media Form (text and an image) to the site. The box is rendering fine with the correct forms, but after hitting Submit the form doesn't save in the database. When just rendering the form onto a new HTML page without jquery, the model works just fine and the input is saved. How do I get the information submitted in a jquery lightbox to be saved in the database too?</p>\n\n<p>So this is the html page</p>\n\n<pre><code>#home.html\n&lt;a href=\"#login-box\" class=\"btn btn-success\"&gt;Add Media&lt;/a&gt;  \n        &lt;div id=\"login-box\" class=\"addmovie-popup\"&gt;\n</code></pre>\n\n<p>This is the jquery that goes with it</p>\n\n<pre><code>#home.js\n$(document).ready(function() {\n    $('.block3 a').click(function(ev) {\n        ev.preventDefault();\n        var url = $(this).attr('href');\n        $('#login-box').load('http://127.0.0.1:8000/home/add_movie/');\n    });\n}); \n</code></pre>\n\n<p>The URL conf</p>\n\n<pre><code>#urls.py\nurl(r'^add_media/$', 'add_media'),\n</code></pre>\n\n<p>The view for adding media</p>\n\n<pre><code>#views.py\ndef add_media(request):\n    if request.method == \"POST\":\n        form = MediaForm(request.POST, request.FILES)   \n        if form.is_valid():\n            form.save(user = request.user)\n            return HttpResponseRedirect(\"/home//\")\n    else:\n        form = MediaForm()\n        return render_to_response(\"qanda/add_media.html\", {'form': form}, context_instance = RequestContext(request))\n</code></pre>\n\n<p>And the HTML form that it is rendering</p>\n\n<pre><code>#add_media.html\n&lt;h1&gt; Add Media:&lt;/h1&gt;\n&lt;form enctype = \"multipart/form-data\" action = \"\" method = \"post\"&gt;{% csrf_token %}\n    {{ form.as_p }}\n    &lt;input type = \"submit\" value = \"Add\" /&gt;\n    &lt;input type = \"hidden\" name = \"next\" value = \"{{ next|escape }}\" /&gt;\n&lt;/form&gt;\n</code></pre>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13171182,"title":"How to join the results of two tables in django python","body":"<p>I have two models</p>\n\n<pre><code>class Weather(model.model):\n\n        region = models.ForeignKey(Region)\n        district = models.ForeignKey(District)\n        temp_max = models.IntegerField(blank=True, null=True, verbose_name='Max temperature (C)')\n        temp_min = models.IntegerField(blank=True, null=True, verbose_name='Min temperature (C)')\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class Plan(model.model):\n    name = tinymce_models.HTMLField(blank=True, null=True)\n    region = models.ForeignKey(Region)\n    district = models.ForeignKey(District)\n</code></pre>\n\n<p>Provided for every region and district have unique row.\nI want to combine the result so that i can get all the columns of both tables</p>\n\n<p>These two Models are not related to each other.\n'\nI need to make the join like</p>\n\n<p><code>join weather w on w.region = A.region and w.distric = A.district</code></p>\n\n<p>so that result contains all the columns in everyobject like</p>\n\n<p>obj.temp_max etc</p>\n"},{"tags":["django","django-admin","tastypie"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":358,"score":0,"question_id":6439359,"title":"Django admin throws error after installing tastypie?","body":"<p>When I try to create a new user, I get: <code>no such table: tastypie_apikey</code>. Does anyone know why this is happening? The tastypie documentation doesn't refer to any database tables that need to be created, or indeed a way to get tastypie to make any such changes.</p>\n"},{"tags":["django","excel","csv","unicode"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":12970082,"title":"Create csv file using django and directly open into Excel","body":"<p>I have created the csv file through django. I have write the encoded data into that. but when i open this file in excel sheet then the unicode characters not display properly.</p>\n\n<p>I also refer this question\n<a href=\"http://stackoverflow.com/questions/10846133/django-create-csv-file-that-contains-unicode-and-can-be-opened-directly-with-exc\">Django create CSV file that contains Unicode and can be opened directly with Excel</a></p>\n\n<p>But didn't get the proper answer. I have tried all the answers, but didn't work any of them.</p>\n\n<p>I write the code as below.</p>\n\n<pre><code>    def exportcsv(request):\n        import csv\n        producer_list = Producer.objects.filter()\n        response = HttpResponse(mimetype='text/csv')\n        response['Content-Disposition'] = 'attachment; filename=producer.csv'\n        writer = csv.writer(response, delimiter=\",\")\n        writer.writerow(codecs.BOM_UTF16_LE)\n        writer.writerow(['Produsenter','Type','Land','Region'])\n        for cdst in producer_list:\n            writer.writerow([cdst.title.encode(\"UTF-8\"),\n                            cdst.producer_type.encode(\"UTF-8\"),\n                            cdst.country.country.encode(\"UTF-8\"),\n                            cdst.region.region.encode(\"UTF-8\")])\n        return response\n</code></pre>\n\n<p>Then the csv file created properly, but the characters in that not encoded properly.\nThe character will be display like \"Tokaj HÃ©tszÃ¶lÃ¶\".</p>\n\n<p>When i try </p>\n\n<pre><code>writer.writerow([cdst.title.encode(\"iso-8859-1\"),\n                            cdst.producer_type.encode(\"iso-8859-1\"),\n                            cdst.country.country.encode(\"iso-8859-1\"),\n                            cdst.region.region.encode(\"iso-8859-1\")])\n</code></pre>\n\n<p>Then the data will we added properly also open it excel file properly.\nBut it give error for some characters like 'æ' and ' in the string.</p>\n\n<p>Error: 'latin-1' codec can't encode character u'\\u2013' in position 266: ordinal not in range(256)</p>\n\n<p>I also try the below code.</p>\n\n<pre><code>response['Content-Disposition'] = 'attachment; filename=producer.csv'\nresponse.write(u'\\ufeff'.encode('utf8'))\nwriter = csv.writer(response, delimiter=\",\")\n</code></pre>\n\n<p>Also try </p>\n\n<pre><code>writer.writerow(codecs.BOM_UTF16_LE)\nwriter.writerow(str.decode('utf8').encode('utf_16_le'))\n</code></pre>\n"},{"tags":["django","osx","apache2","mod-wsgi"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":373,"score":2,"question_id":12233628,"title":"How does one deploy a django application on OS X Server?","body":"<p>How would one deploy a Django application on OS X Server 2.0 without using homebrew or a different flavor of python than the one shipped with OS X 10.8.1? I'm using the cocoa bindings in a Django application and had trouble getting it to work with homebrew on my desktop machine (running OS X 10.8.1); hence the request to deploy the application on the system installed version of Python.</p>\n\n<p>I have the following OS X Server environment, with the following already installed:</p>\n\n<ul>\n<li>OS X 10.8.1</li>\n<li>OS X Server 2.0</li>\n<li>Python 2.7.2</li>\n<li>Apache 2.2.22</li>\n</ul>\n\n<p>Django 1.4.1 was installed using the following command:</p>\n\n<pre><code>sudo easy_install django\n</code></pre>\n\n<p>My first attempt is to deploy an empty website, and once that succeeds, deploy a real application to be used in production. The project was created at <code>/Library/Server/Web/Data/WebApps/mysite/</code> using the following command</p>\n\n<pre><code>django-admin.py startproject mysite\n</code></pre>\n\n<p>I ran the application using the following command. It simply confirmed that the application was up and running. It is the standard \"It worked!\" page when you first created a project.</p>\n\n<pre><code>python manage.py runserver 8080\n</code></pre>\n\n<p>I then created a file <code>/Library/Server/Web/Config/apache2/httpd_mysite.conf</code> with the following content: </p>\n\n<pre><code>WSGIScriptAlias /mysite /Library/Server/Web/Data/WebApps/mysite/mysite/wsgi.py\n</code></pre>\n\n<p>I further created a file <code>/Library/Server/Web/Config/apache2/webapps/com.example.mysite.wsgi.plist</code> with the following content:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-7\"?&gt;\n&lt;!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"&gt;\n&lt;plist version=\"1.0\"&gt;\n&lt;dict&gt;\n        &lt;key&gt;name&lt;/key&gt;\n        &lt;string&gt;com.example.mysite.wsgi&lt;/string&gt;\n        &lt;key&gt;displayName&lt;/key&gt;\n        &lt;string&gt;Python \"My Site\" app&lt;/string&gt;\n        &lt;key&gt;launchKeys&lt;/key&gt;\n        &lt;array/&gt;\n        &lt;key&gt;proxies&lt;/key&gt;\n        &lt;dict/&gt;\n        &lt;key&gt;installationIndicatorFilePath&lt;/key&gt;\n        &lt;string&gt;/Library/Server/Web/Data/WebApps/mysite/mysite/wsgi.py&lt;/string&gt;\n        &lt;key&gt;includeFiles&lt;/key&gt;\n        &lt;array&gt;\n                &lt;string&gt;/Library/Server/Web/Config/apache2/httpd_mysite.conf&lt;/string&gt;\n        &lt;/array&gt;\n        &lt;key&gt;requiredModuleNames&lt;/key&gt;\n        &lt;array&gt;\n                &lt;string&gt;wsgi_module&lt;/string&gt;\n        &lt;/array&gt;\n&lt;/dict&gt;\n&lt;/plist&gt;\n</code></pre>\n\n<p>The file <code>com.example.mysite.wsgi.plist</code> was adapted from <code>com.apple.webapp.wsgi.plist</code> and <code>httpd_mysite.conf</code> adapted from <code>httpd_wsgi.conf</code>. Both these files are used to run the \"standalone\" python application successfully when configured through the server manager.</p>\n\n<p>I then created a site with the server manager, confirmed my application was in the list of web applications. However, when I visit <a href=\"http://example.com/mysite\" rel=\"nofollow\">http://example.com/mysite</a> I get a 500 error. The logs has the following entries (IP addresses changed to 1.2.3.4 for privacy reasons):</p>\n\n<pre><code>[Sat Sep 01 21:49:17 2012] [warn] Init: Name-based SSL virtual hosts only work for clients with TLS server name indication support (RFC 4366)\n[Sat Sep 01 21:49:17 2012] [notice] Apache/2.2.22 (Unix) PHP/5.3.13 with Suhosin-Patch mod_wsgi/3.3 Python/2.7.2 mod_fastcgi/2.4.6 mod_ssl/2.2.22 OpenSSL/0.9.8r DAV/2 configured -- resuming normal operations\n[Sat Sep 01 21:50:13 2012] [error] [client 1.2.3.4] (8)Exec format error: exec of '/Library/Server/Web/Data/WebApps/mysite/mysite/wsgi.py' failed\n[Sat Sep 01 21:50:13 2012] [error] [client 1.2.3.4] Premature end of script headers: wsgi.py\n</code></pre>\n\n<p>It doesn't seem that the WSGI module is handling the request, but instead, the request may be processed using FCGI. However, the log indicates that <code>mod_wsgi/3.3</code> was loaded. </p>\n\n<p>When I created a standard Python application that looks as follows:</p>\n\n<pre><code>def application(environ, start_response):\n    status = '200 OK'\n    output = 'Hello World!'\n\n    response_headers = [('Content-type', 'text/plain'),\n                        ('Content-Length', str(len(output)))]\n    start_response(status, response_headers)\n\n    return [output]\n</code></pre>\n\n<p>And update the files to point to <code>/Library/Server/Web/Data/WebApps/helloworld.wsgi</code> rather than <code>/Library/Server/Web/Data/WebApps/mysite/mysite/wsgi.py</code> then \"Hello World\" is displayed. I therefore assume that wsgi is correctly configured and able to execute applications and that something else is wrong with my setup.</p>\n"},{"tags":["django","django-admin","django-grappelli"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12952829,"title":"Navigation with Grappelii on admin side in Django","body":"<p>I installed grappelli.dashboard. Follow all the steps, but still the navigation is not display.After installing dashboard dashboard.py file will be created. \nIn that dashboard.py file \"Group: Administration &amp; Applications\" ,\" Support\" , \"Latest Django News\" , \"Recent Actions\" will be present.</p>\n\n<p>Can anybody please tell me how to add the naviagtion?</p>\n\n<p>I also want to add bookmarks functionality on admin side with grappelli in Django.\nI am using Grappeli 2.3.8 with Django 1.4. Grappeli 2.0 having the functionality like bookmarks, navigation, but the New Grappeli version does having that. There will any way to customize it to add bookmarks?</p>\n\n<p>Here is the code for dashboard.py</p>\n\n<pre><code>from django.utils.translation import ugettext_lazy as _\nfrom django.core.urlresolvers import reverse\n\nfrom grappelli.dashboard import modules, Dashboard\nfrom grappelli.dashboard.utils import get_admin_site_name\n\n\nclass CustomIndexDashboard(Dashboard):\n\"\"\"\nCustom index dashboard for www.\n\"\"\"\n\ndef init_with_context(self, context):\n    site_name = get_admin_site_name(context)\n\n    # append a group for \"Administration\" &amp; \"Applications\"\n    self.children.append(modules.Group(\n        _('Group: Administration &amp; Applications'),\n        column=1,\n        collapsible=True,\n        children = [\n            modules.AppList(\n                _('Administration'),\n                column=1,\n                collapsible=False,\n                models=('django.contrib.*',),\n            ),\n            modules.AppList(\n                _('Applications'),\n                column=1,\n                css_classes=('collapse closed',),\n                exclude=('django.contrib.*',),\n            )\n        ]\n    ))\n\n    # append an app list module for \"Applications\"\n    self.children.append(modules.AppList(\n        _('AppList: Applications'),\n        collapsible=True,\n        column=1,\n        css_classes=('collapse closed',),\n        exclude=('django.contrib.*',),\n    ))\n\n    # append an app list module for \"Administration\"\n    self.children.append(modules.ModelList(\n        _('ModelList: Administration'),\n        column=1,\n        collapsible=False,\n        models=('django.contrib.*',),\n    ))\n\n    # append another link list module for \"support\".\n    self.children.append(modules.LinkList(\n        _('Media Management'),\n        column=2,\n        children=[\n            {\n                'title': _('FileBrowser'),\n                'url': '/admin/filebrowser/browse/',\n                'external': False,\n            },\n        ]\n    ))\n\n    # append another link list module for \"support\".\n    self.children.append(modules.LinkList(\n        _('Support'),\n        column=2,\n        children=[\n            {\n                'title': _('Django Documentation'),\n                'url': 'http://docs.djangoproject.com/',\n                'external': True,\n            },\n            {\n                'title': _('Grappelli Documentation'),\n                'url': 'http://packages.python.org/django-grappelli/',\n                'external': True,\n            },\n            {\n                'title': _('Grappelli Google-Code'),\n                'url': 'http://code.google.com/p/django-grappelli/',\n                'external': True,\n            },\n        ]\n    ))\n\n    # append a feed module\n    self.children.append(modules.Feed(\n        _('Latest Django News'),\n        column=2,\n        feed_url='http://www.djangoproject.com/rss/weblog/',\n        limit=5\n    ))\n\n    # append a recent actions module\n    self.children.append(modules.RecentActions(\n        _('Recent Actions'),\n        limit=5,\n        collapsible=False,\n        column=3,\n    ))\n</code></pre>\n"},{"tags":["django","model","scalable"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13171041,"title":"Django scalable model","body":"<p>For db level scalability of SNS like application, </p>\n\n<p>1) any good reference or plug-in to use? say if we use user_id to shard.\n2) is it a good idea to use GUID as user id?</p>\n\n<p>thanks~</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13167983,"title":"django create profile or page for object","body":"<p>I have a venue object and want to have either a profile/page associated with the object which contains venue specific info like price, hours of operation and so on. Here is my venue object</p>\n\n<pre><code>class Venue(model.Models):\n    name=models.CharField(max_length=100)\n    # ...\n    image=models.ImageField(upload_to=...)\n</code></pre>\n\n<p>Now I have no idea where to go next with the <code>VenueProfile</code> model and the view which will bind these together this all I can think of:</p>\n\n<pre><code>class VenueProfile(model.Models):\n    venue=models.OneToOneField(Venue, related_name='venueProfile')\n    # ...\n    # info i want stored about the venue\n    # ...\n</code></pre>\n\n<p>Can someone please help me figure out if</p>\n\n<ol>\n<li>This is the right type of model setup for a objects profile/page</li>\n<li>How do I write a view for this? Connect the venue model with the profile model and render a template.</li>\n</ol>\n"},{"tags":["django","decorator","django-authentication"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":13153527,"title":"Having multiple decorators in Django and using only one","body":"<p>I am using <a href=\"https://github.com/jpulgarin/django-tokenapi\" rel=\"nofollow\">django-tokenapi</a> to allow for authentication of an Android project that is using Django as a backend.  The project also has a web interface.</p>\n\n<p>django-tokenapi uses the <code>@token_required</code> decorator to protect certain views.  Django uses the <code>@login_required</code> decorator to protect certain views.</p>\n\n<p>What I would like is to have only one view that is protected by <code>@login_required</code> OR <code>@token_required</code> so it can be used with either the webapp or Android app.</p>\n\n<p>So, ideally, it would look like this:</p>\n\n<pre><code>@token_required\n@login_required\ndef names_update(request):\n    ....\n    ....\n</code></pre>\n\n<p>However that does not work.  Is there a better method of doing this?  Or is the correct thing to have two views, one the webapp and one for Android, that are protected by the proper decorator, and then lead to the same method.</p>\n"},{"tags":["python","django","django-forms","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12257081,"title":"Django Admin - Inline forms missing after overriding get_form","body":"<p>I need to hide some fields from a Form on Django Admin if the logged user is not a super user. This is what I came up with:</p>\n\n<pre><code>    def get_form(self, request, obj=None, **kwargs):\n        form = super(RestauranteAdmin, self).get_form(request, obj, **kwargs)\n        if not request.user.is_superuser:\n            form.base_fields.pop('approved')\n            form.base_fields.pop('day_of_the_week')\n            form.base_fields.pop('photo')\n        form.label_suffix = ''\n        return form\n</code></pre>\n\n<p>This does indeed hide the necessary fields, but for some reason the admin also stops rendering  my inlines if the user is not a super user. As far as I can see this method should have nothing to do with the inlines. Am I missing something? </p>\n\n<p>Thanks,</p>\n"},{"tags":["django","terminal","python-2.7","virtualenv","pip"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13170239,"title":"Django ImportError: No module named django","body":"<p>So, I have python 2.7.3 installed and I used the Django website <a href=\"https://docs.djangoproject.com/en/dev/topics/install/\" rel=\"nofollow\">https://docs.djangoproject.com/en/dev/topics/install/</a> to install Django on my Mac OS x Mountain Lion. I used pip and virtual env, I currently am able to use Django from my current terminal but, when I open a new terminal and try say:</p>\n\n<pre><code>$ cd Django \n$ cd djangowork\n$ cd firstproj\n$ python manage.py runserver\nTraceback (most recent call last):\n  File \"manage.py\", line 8, in &lt;module&gt;\n    from django.core.management import execute_from_command_line\nImportError: No module named django.core.management\n</code></pre>\n\n<p>This is the error I get.\nI have looked online for a solution to my problem. It seems to be a common problem, dealing with the PATH. But, I cannot figure out how to fix it. Any help would be much appreciated thanks!</p>\n\n<p>This is an example of what my working terminal looks like: (but if I exit out I lose everything)</p>\n\n<pre><code>(my_new_env)$ cd Django\n(my_new_env)$ cd djangowork\n(my_new_env)$ cd firstproj\n(my_new_env)$ ls\nfirstproj   manage.py   testdb\n(my_new_env)$ python manage.py runserver\nValidating models...\n\n0 errors found\nOctober 31, 2012 - 18:51:22\nDjango version 1.6.dev20121029143154, using settings 'firstproj.settings'\nDevelopment server is running at http://.../\nQuit the server with CONTROL-C.\n</code></pre>\n"},{"tags":["django","django-models","relational-database","user-permissions"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13169666,"title":"Which permission system should I use in Django?","body":"<p>im working in a Django project that aims to manage warehouses, items and presonell.\nI have the following models: WarehouseMode, ItemModel and PersonellModel.</p>\n\n<p>The admin must be able to create users and assign to them one of the followin roles:</p>\n\n<ol>\n<li>Admin - full access.</li>\n<li>Warehouse admin - limited access (add, delete, modify items and presonell)</li>\n<li>Individual warehouse user - limited access (modify personal profile)</li>\n<li>Other database subscribers - (read-only)</li>\n</ol>\n\n<p>The \"warehouse admin\" should be the \"owner\" of just one warehouse.</p>\n\n<p>Which permission system should I use? Per row permission system?</p>\n\n<p>Thanks</p>\n"},{"tags":["django","django-1.4","formwizard"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":13052224,"title":"How to Dynamically Repeat Steps in Django Formwizard 1.4?","body":"<p>I'm trying to repeat a step in Django Formwizard (Django 1.4) conditionally based on a checkbox in the step. The form creates an object, and has a checkbox (hopefully) allowing them to repeat the step and create another object of the same model with the same form.</p>\n\n<p>I saw this answer: <a href=\"http://stackoverflow.com/questions/2164303/django-formwizard-dynamically-alter-form-list\">Django FormWizard Dynamically Alter form_list</a> but unfortunately I think it only applies to older versions of the FormWizard.</p>\n\n<p>The process_step function doesn't have a form_list attribute anymore. It also doesn't have a current step attribute (or step attribute) but I can access the current step through the QueryDict of the form. It contains a dictionary of forms, but I don't think inserting another step into that dictionary will do anything, and unfortunately since it's a dictionary not a list I'd have to modify every step key after where I insert it.</p>\n\n<p>So, is there a good way to add new steps into the form list with Django 1.4 FormWizard?</p>\n\n<p>Update -- beginning to think overriding get_next_step(self, step) might be the way to go, but any input is much appreciated.</p>\n\n<p>Update #2 -- Tried working with get_next_step, but was unable to insert a new form into the instance's form_list. Doesn't mean it's not possible -- ideas?</p>\n"},{"tags":["django","fastcgi","lighttpd","mod-fastcgi"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13166251,"title":"lighttpd + mod_fastcgi + django","body":"<p>I am having trouble deploying my django app to a server that uses lighttpd (on which I'm root.)</p>\n\n<p>Here's my <code>lighttpd.conf</code>:</p>\n\n<pre><code>server.modules = (\n#       \"mod_access\",                                                                                                                                                                \n#       \"mod_alias\",                                                                                                                                                                 \n#               \"mod_compress\",                                                                                                                                                      \n#       \"mod_redirect\",                                                                                                                                                              \n        \"mod_status\",\n        #\"mod_rewrite\",                                                                                                                                                              \n        #       \"mod_fastcgi\",                                                                                                                                                       \n#       \"mod_accesslog\",                                                                                                                                                             \n)\n\nstatus.status-url          = \"/server-status\"\nstatus.config-url          = \"/server-config\"\n\n$HTTP[\"host\"] == \"myurl.com\" {\nserver.document-root = \"/var/www/myurl\"\nserver.errorlog = \"/var/log/lighttpd/myurl/error.log\"\naccesslog.filename = \"var/log/lighttpd/nixcraft/access.log\"\nserver.error-handler-404 = \"/e404.html\"\n\nfastcgi.server = (\n    \"/myurl/nonorientable.fcgi\" =&gt; (\n        \"main\" =&gt; (\n            # Use host / port instead of socket for TCP fastcgi                                                                                                                      \n            # \"host\" =&gt; \"127.0.0.1\",                                                                                                                                                 \n            # \"port\" =&gt; 3033,                                                                                                                                                        \n            \"socket\" =&gt; \"/tmp/myurl.sock\",\n            \"check-local\" =&gt; \"disable\",\n        )\n    ),\n)\n}\n\nserver.pid-file             = \"/var/run/lighttpd.pid\"\nserver.username             = \"www-data\"\nserver.groupname            = \"www-data\"\n\nindex-file.names            = ( \"index.php\", \"index.html\",\n                                \"index.htm\", \"default.htm\")\n\nurl.access-deny             = ( \"~\", \".inc\" )\n\nstatic-file.exclude-extensions = ( \".php\", \".pl\", \".fcgi\" )\n\n\n## Use ipv6 if available                                                                                                                                                             \n#include_shell \"/usr/share/lighttpd/use-ipv6.pl\"                                                                                                                                     \n\ndir-listing.encoding        = \"utf-8\"\nserver.dir-listing          = \"enable\"\n\ncompress.cache-dir          = \"/var/cache/lighttpd/compress/\"\ncompress.filetype           = ( \"application/x-javascript\", \"text/css\", \"text/html\", \"text/plain\" )\n\ninclude_shell \"/usr/share/lighttpd/create-mime.assign.pl\"\ninclude_shell \"/usr/share/lighttpd/include-conf-enabled.pl\"\n\nserver.modules += ( \"mod_auth\" )\nauth.debug = 2\nauth.backend = \"plain\"\nauth.backend.plain.userfile = \"/etc/lighttpd/.lighttpdpassword\"\n\nauth.require = ( \"/\" =&gt;\n(\"method\" =&gt; \"basic\",\n \"realm\" =&gt; \"\",\n \"require\" =&gt; \"user=john\"))\n</code></pre>\n\n<p>And then I ran this on my server (from the folder <code>/var/www/myurl</code>):\n<code>sudo python manage.py runfcgi daemonize=false socket=/tmp/myurl.sock maxrequests=1</code></p>\n\n<p>At this point, when I try to load myurl.com, all I get is the directory listing: my django app is not executed. I thought that the problem was that <code>mod_fastcgi</code> is commented in my conf, it actually appears on myurl.com/server-config. If I uncomment it, lighttpd complains that I'm trying to load the same module twice and exits, so my guess is that it is imported by default.</p>\n\n<p>I'm using django1.4 (latest stable) and lighttpd 1.4.28 on ubuntu 12.04, and I'm pretty stuck. I followed the official doc (https://docs.djangoproject.com/en/1.4/howto/deployment/fastcgi/)</p>\n"},{"tags":["python","django","geoip"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13169040,"title":"Django GeoIP import","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4896996/error-setting-up-geoip-on-django\">Error setting up geoip on Django</a>  </p>\n</blockquote>\n\n\n\n<p>I get the \"cannot import name GeoIP\" error from the browser but not on python terminal. for example for geodata in /tmp/geo. the following works in the python terminal.</p>\n\n<pre><code>    from django.contrib.gis.geoip import GeoIP\n    GeoIP(path='/tmp/geo/')\n</code></pre>\n\n<p>However the following in a django view gives the error</p>\n\n<pre><code>    from django.contrib.gis.geoip import GeoIP\n    return HttpResponse (GeoIP(path='/tmp/geo/'))\n</code></pre>\n\n<p>Any pointer will be helpfull. I'm using django 1.4 , python 2.6. here is the trace. Thanks.</p>\n\n<pre><code>    Traceback:\n    File \"/usr/lib/python2.6/site-packages/django/core/handlers/base.py\" in get_response\n    101.                             request.path_info)\n    File \"/usr/lib/python2.6/site-packages/django/core/urlresolvers.py\" in resolve\n    300.                     sub_match = pattern.resolve(new_path)\n    File \"/usr/lib/python2.6/site-packages/django/core/urlresolvers.py\" in resolve\n    209.             return ResolverMatch(self.callback, args, kwargs, self.name)\n    File \"/usr/lib/python2.6/site-packages/django/core/urlresolvers.py\" in callback\n    216.         self._callback = get_callable(self._callback_str)\n    File \"/usr/lib/python2.6/site-packages/django/utils/functional.py\" in wrapper\n    27.         result = func(*args)\n    File \"/usr/lib/python2.6/site-packages/django/core/urlresolvers.py\" in get_callable\n    92.                 lookup_view = getattr(import_module(mod_name), func_name)\n    File \"/usr/lib/python2.6/site-packages/django/utils/importlib.py\" in import_module\n    35.     __import__(name)\n    File \"/x/y/z/views.py\" in &lt;module&gt;\n    12. from django.contrib.gis.utils import GeoIP\n\n    Exception Type: ImportError at /\n    Exception Value: cannot import name GeoIP\n</code></pre>\n"},{"tags":["django","django-admin"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13168513,"title":"Custom functionality in admin app","body":"<p>I'm writing a django app and it turns out the admin interface is pretty much exactly all I need for a large portion of the functionality. However I would like to add to it a little bit:</p>\n\n<ul>\n<li><p>I need some of the fields on form A to be automatically filled out with computed values. This can happen on form load, or when a button is pressed.</p></li>\n<li><p>Add a quantity field to another form B, so that I can make that many duplicates of the object (needs to be duplicated because they will be differentiated later)</p></li>\n<li><p>Add a button to form B to automatically generate a bunch of objects of form A, without actually having to fill out the information manually, because that <em>should</em> be unnecessary in most use cases.</p></li>\n</ul>\n\n<p>Possibly some other things I'm not thinking of right now, but if I can work this stuff out I should be able to deal with the other stuff. </p>\n\n<p>Thanks!</p>\n"},{"tags":["python","django","osqa"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13048596,"title":"Django error: Caught UnicodeEncodeError while rendering","body":"<p>I'm trying to setup a Django site (OSQA) and can't get it working.</p>\n\n<p>The site homepage is loading fine but when I tried to submit a form I got the following error. I have a bit of Python experience but I'm quite new to the Django framework. Can someone please shed some light on this?</p>\n\n<p>The base.py file in question:</p>\n\n<pre><code>import django.dispatch\nfrom django.utils.encoding import force_unicode, smart_unicode\nfrom datetime import datetime, timedelta\nimport logging\n\nTMP_MINICACHE_SECONDS = 5\n\nclass SettingSet(list):\n    def __init__(self, name, title, description, weight=1000, markdown=False, can_preview=False):\n        self.name = name\n        self.title = title\n        self.description = description\n        self.weight = weight\n        self.markdown = markdown\n        self.can_preview = can_preview\n\n\nclass BaseSetting(object):\n    @classmethod\n    def add_to_class(cls, name):\n        def wrapper(self, *args, **kwargs):\n            return self.value.__getattribute__(name)(*args, **kwargs)\n\n        setattr(cls, name, wrapper)\n\n    def __init__(self, name, default, set=None, field_context=None):\n        self.name = name\n        self.default = default\n        self.field_context = field_context or {}\n\n        self._temp = None\n\n        if set is not None:\n            self.set = set\n\n            if not set.name in Setting.sets:\n                Setting.sets[set.name] = set\n\n            Setting.sets[set.name].append(self)\n\n    def __str__(self):\n        return str(self.value)\n\n    def __unicode__(self):\n        return smart_unicode(self.value)\n\n    @property\n    def value(self):\n        if self._temp:\n            v, exp = self._temp\n            if exp + timedelta(seconds=TMP_MINICACHE_SECONDS) &gt; datetime.now():\n                return v\n\n        from forum.models import KeyValue\n\n        try:\n            kv = KeyValue.objects.get(key=self.name)\n            v = kv.value\n            self._temp = (v, datetime.now() + timedelta(seconds=TMP_MINICACHE_SECONDS))\n            return v\n        except KeyValue.DoesNotExist:\n            self._temp = (self.default, datetime.now() + timedelta(seconds=TMP_MINICACHE_SECONDS))\n            self.save(self.default)\n        except Exception, e:\n            logging.error(\"Error retrieving setting from database (%s): %s\" % (self.name, str(e)))\n\n        return self.default\n\n    def set_value(self, new_value):\n        new_value = self._parse(new_value)\n        self._temp = None\n        self.save(new_value)\n\n    def save(self, value):\n        from forum.models import KeyValue\n\n        try:\n            kv = KeyValue.objects.get(key=self.name)\n        except KeyValue.DoesNotExist:\n            kv = KeyValue(key=self.name)\n        except Exception, e:\n            logging.error(\"Error saving setting to database (%s): %s\" % (self.name, str(e)))\n            return\n\n        kv.value = value\n        kv.save()\n\n    def to_default(self):\n       self.set_value(self.default)\n\n    def _parse(self, value):\n        if not isinstance(value, self.base_type):\n            try:\n                return self.base_type(value)\n            except:\n                pass\n        return value\n\nclass AnyTypeSetting(BaseSetting):\n     def _parse(self, value):\n       return value\n\n\nclass Setting(object):\n    emulators = {}\n    sets = {}\n\n    def __new__(cls, name, default, set=None, field_context=None):\n        if default is None:\n            return AnyTypeSetting(name, default, set, field_context)\n\n        deftype = type(default)\n\n        if deftype in Setting.emulators:\n            emul = Setting.emulators[deftype]\n        else:\n            emul = type(deftype.__name__ + cls.__name__, (BaseSetting,), {'base_type': deftype})\n\n           fns = [n for n, f in [(p, getattr(deftype, p)) for p in dir(deftype) if not p in dir(cls)] if callable(f)]\n\n            for n in fns:\n               emul.add_to_class(n)\n\n            Setting.emulators[deftype] = emul\n\n        return emul(name, default, set, field_context)\n</code></pre>\n\n<p>Stack trace:</p>\n\n<pre><code>TemplateSyntaxError at /questions/ask/\nCaught UnicodeEncodeError while rendering: 'ascii' codec can't encode characters in position 0-3: ordinal not in range(128)\nRequest Method: POST\nRequest URL:    http://123.243.100.125/questions/ask/\nDjango Version: 1.3.4\nException Type: TemplateSyntaxError\nException Value:    \nCaught UnicodeEncodeError while rendering: 'ascii' codec can't encode characters in position 0-3: ordinal not in range(128)\nException Location: /usr/local/src/osqa/forum/settings/base.py in __str__, line 42\nPython Executable:  /usr/bin/python\nPython Version: 2.6.6\nPython Path:    \n['/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg',\n '/usr/lib/python2.6/site-packages/elementtree-1.2.7_20070827_preview-py2.6.egg',\n '/usr/lib/python2.6/site-packages/Markdown-2.2.0-py2.6.egg',\n '/usr/lib/python2.6/site-packages/html5lib-0.95-py2.6.egg',\n '/usr/lib/python2.6/site-packages/django_rosetta-0.6.8-py2.6.egg',\n '/usr/lib64/python26.zip',\n '/usr/lib64/python2.6',\n '/usr/lib64/python2.6/plat-linux2',\n '/usr/lib64/python2.6/lib-tk',\n '/usr/lib64/python2.6/lib-old',\n '/usr/lib64/python2.6/lib-dynload',\n '/usr/lib64/python2.6/site-packages',\n '/usr/lib64/python2.6/site-packages/PIL',\n '/usr/lib64/python2.6/site-packages/gst-0.10',\n '/usr/lib64/python2.6/site-packages/gtk-2.0',\n '/usr/lib64/python2.6/site-packages/webkit-1.0',\n '/usr/lib/python2.6/site-packages',\n '/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg-info',\n '/usr/local/src',\n '/usr/local/src/osqa',\n '/usr/local/src/osqa/forum/markdownext']\nServer time:    ???, 24 ?? 2012 22:36:54 +1100\nTemplate error\n\nIn template /usr/local/src/osqa/forum/skins/default/templates/notifications/newquestion.html, error at line 3\nCaught UnicodeEncodeError while rendering: 'ascii' codec can't encode characters in position 0-3: ordinal not in range(128)\n1   {% load i18n extra_tags email_tags %}\n2   \n3   {% declare %}\n4       prefix = html.mark_safe(settings.EMAIL_SUBJECT_PREFIX)\n5       app_name = settings.APP_SHORT_NAME\n6       safe_app_name = html.mark_safe(settings.APP_SHORT_NAME)\n7       question_author = html.mark_safe(question.author.username)\n8       question_url = settings.APP_URL + question.get_absolute_url()\n9       question_title = html.mark_safe(question.title)\n10      question_tags = html.mark_safe(question.tagnames)\n11      safe_body = html.html2text(question.html)\n12      author_link = html.objlink(question.author, style=settings.EMAIL_ANCHOR_STYLE)\n13      question_link = html.objlink(question, style=settings.EMAIL_ANCHOR_STYLE)\nTraceback Switch to copy-and-paste view\n\n/usr/lib/python2.6/site-packages/django/core/handlers/base.py in get_response\n            response = callback(request, *callback_args, **callback_kwargs) ...\n? Local vars\n/usr/local/src/osqa/forum/modules/decorators.py in decorated\n        return decoratable(*args, **kwargs) ...\n? Local vars\n/usr/local/src/osqa/forum/modules/decorators.py in __call__\n    res = self._callable(*args, **kwargs) ...\n? Local vars\n/usr/local/src/osqa/forum/modules/decorators.py in &lt;lambda&gt;\n        self._callable = lambda *args, **kwargs: fn(origin, *args, **kwargs) ...\n? Local vars\n/usr/local/src/osqa/forum_modules/akismet/startup.py in wrapper\n    return origin(request, *args, **kwargs) ...\n? Local vars\n/usr/local/src/osqa/forum/views/writers.py in ask\n            send_template_email([u], \"notifications/newquestion.html\", {'question': question, \"exclude_finetune\": True}) ...\n? Local vars\n/usr/local/src/osqa/forum/utils/mail.py in send_template_email\n    t.render(Context(context)) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/base.py in render\n        return self._render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/base.py in _render\n    return self.nodelist.render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/base.py in render\n        bits.append(self.render_node(node, context)) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/debug.py in render_node\n        result = node.render(context) ...\n? Local vars\n/usr/local/src/osqa/forum/templatetags/extra_tags.py in render\n            context[m.group(1).strip()] = eval(m.group(3).strip(), d) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/utils/safestring.py in mark_safe\n    return SafeString(str(s)) ...\n? Local vars\n/usr/local/src/osqa/forum/settings/base.py in __str__\n    return str(self.value) ...\n? Local vars\nRequest information\n\nGET\nNo GET data\nPOST\nVariable    Value\ntext    \nu'The e-mail settings of this community are not configured yet. '\ntags    \nu'test'\nexpert_email    \nu''\ntitle   \nu'The e-mail settings of this community are not configured yet. '\nFILES\nNo FILES data\nCOOKIES\nVariable    Value\nsessionid   \n'1e7a11ca5a8631425ad03fd4973e57dc'\nMETA\nVariable    Value\nmod_wsgi.listener_port  \n'80'\nHTTP_REFERER    \n'http://123.243.100.125/questions/ask/'\nmod_wsgi.listener_host  \n''\nSERVER_SOFTWARE \n'Apache/2.2.15 (CentOS)'\nSCRIPT_NAME \nu''\nmod_wsgi.handler_script \n''\nSERVER_SIGNATURE    \n'&lt;address&gt;Apache/2.2.15 (CentOS) Server at 123.243.100.125 Port 80&lt;/address&gt;\\n'\nREQUEST_METHOD  \n'POST'\nPATH_INFO   \nu'/questions/ask/'\nHTTP_ORIGIN \n'http://123.243.100.125'\nSERVER_PROTOCOL \n'HTTP/1.1'\nQUERY_STRING    \n''\nCONTENT_LENGTH  \n'160'\nHTTP_ACCEPT_CHARSET \n'ISO-8859-1,utf-8;q=0.7,*;q=0.3'\nHTTP_USER_AGENT \n'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4'\nHTTP_CONNECTION \n'keep-alive'\nHTTP_COOKIE \n'sessionid=1e7a11ca5a8631425ad03fd4973e57dc'\nSERVER_NAME \n'123.243.100.125'\nREMOTE_ADDR \n'123.243.100.125'\nmod_wsgi.request_handler    \n'wsgi-script'\nwsgi.url_scheme \n'http'\nPATH_TRANSLATED \n'/usr/local/src/osqa/osqa.wsgi/questions/ask/'\nSERVER_PORT \n'80'\nwsgi.multiprocess   \nFalse\nmod_wsgi.input_chunked  \n'0'\nSERVER_ADDR \n'192.168.0.10'\nDOCUMENT_ROOT   \n'/usr/local/src/osqa/forum'\nmod_wsgi.process_group  \n'osqa'\nSCRIPT_FILENAME \n'/usr/local/src/osqa/osqa.wsgi'\nSERVER_ADMIN    \n'admin@your.server.com'\nwsgi.input  \n&lt;mod_wsgi.Input object at 0x7f1da157ea30&gt;\nHTTP_HOST   \n'123.243.100.125'\nwsgi.multithread    \nTrue\nmod_wsgi.callable_object    \n'application'\nHTTP_CACHE_CONTROL  \n'max-age=0'\nREQUEST_URI \n'/questions/ask/'\nHTTP_ACCEPT \n'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'\nwsgi.version    \n(1, 1)\nGATEWAY_INTERFACE   \n'CGI/1.1'\nwsgi.run_once   \nFalse\nwsgi.errors \n&lt;mod_wsgi.Log object at 0x7f1da164a0f0&gt;\nREMOTE_PORT \n'11430'\nHTTP_ACCEPT_LANGUAGE    \n'en-GB,en-US;q=0.8,en;q=0.6'\nmod_wsgi.version    \n(3, 2)\nCONTENT_TYPE    \n'application/x-www-form-urlencoded'\nmod_wsgi.application_group  \n'localhost.localdomain|'\nmod_wsgi.script_reloading   \n'1'\nwsgi.file_wrapper   \n''\nHTTP_ACCEPT_ENCODING    \n'gzip,deflate,sdch'\nSettings\nUsing settings module osqa.settings\nSetting Value\nUSE_L10N    \nFalse\nUSE_THOUSAND_SEPARATOR  \nFalse\nAPP_PROTOCOL    \n'http'\nLANGUAGE_CODE   \n'zh_CN'\nROOT_URLCONF    \n'urls'\nMANAGERS    \n()\nAPP_URL \n'http://127.0.0.1'\nDEFAULT_CHARSET \n'utf-8'\nAPP_DOMAIN  \n'127.0.0.1'\nSTATIC_ROOT \n''\nTEST_DATABASE_CHARSET   \nNone\nLOG_FILENAME    \n'django.osqa.log'\nMESSAGE_STORAGE \n'django.contrib.messages.storage.user_messages.LegacyFallbackStorage'\nDATABASE_HOST   \n'127.0.0.1'\nIGNORABLE_404_STARTS    \n('/cgi-bin/', '/_vti_bin', '/_vti_inf')\nSEND_BROKEN_LINK_EMAILS \nFalse\nURL_VALIDATOR_USER_AGENT    \n'Django/1.3.4 (http://www.djangoproject.com)'\nSTATICFILES_FINDERS \n('django.contrib.staticfiles.finders.FileSystemFinder',\n 'django.contrib.staticfiles.finders.AppDirectoriesFinder')\nSESSION_COOKIE_DOMAIN   \nNone\nSESSION_COOKIE_NAME \n'sessionid'\nADMIN_FOR   \n()\nTIME_INPUT_FORMATS  \n('%H:%M:%S', '%H:%M')\nDATABASES   \n{'default': {'ENGINE': 'django.db.backends.postgresql_psycopg2',\n         'HOST': '127.0.0.1',\n         'NAME': 'osqa',\n         'OPTIONS': {},\n         'PASSWORD': '********************',\n         'PORT': '',\n         'TEST_CHARSET': None,\n         'TEST_COLLATION': None,\n         'TEST_MIRROR': None,\n         'TEST_NAME': None,\n         'TIME_ZONE': 'Australia/Melbourne',\n         'USER': 'uosqa'}}\nTEST_DATABASE_NAME  \nNone\nFILE_UPLOAD_PERMISSIONS \nNone\nFILE_UPLOAD_HANDLERS    \n('django.core.files.uploadhandler.MemoryFileUploadHandler',\n 'django.core.files.uploadhandler.TemporaryFileUploadHandler')\nDEFAULT_CONTENT_TYPE    \n'text/html'\nOSQA_DEFAULT_SKIN   \n'default'\nAPPEND_SLASH    \nTrue\nFIRST_DAY_OF_WEEK   \n0\nDATABASE_ROUTERS    \n[]\nYEAR_MONTH_FORMAT   \n'F Y'\nSTATICFILES_STORAGE \n'django.contrib.staticfiles.storage.StaticFilesStorage'\nCACHES  \n{'default': {'BACKEND': 'django.core.cache.backends.filebased.FileBasedCache',\n         'LOCATION': '/usr/local/src/osqa/cache'}}\nMODULES_FOLDER  \n'/usr/local/src/osqa/forum_modules'\nSERVER_EMAIL    \n'root@localhost'\nALLOW_FILE_TYPES    \n('.jpg', '.jpeg', '.gif', '.bmp', '.png', '.tiff')\nUSE_X_FORWARDED_HOST    \nFalse\nALLOW_MAX_FILE_SIZE \n1048576\nIGNORABLE_404_ENDS  \n('mail.pl', 'mailform.pl', 'mail.cgi', 'mailform.cgi', 'favicon.ico', '.php')\nMIDDLEWARE_CLASSES  \n['django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.common.CommonMiddleware',\n 'forum.middleware.extended_user.ExtendedUser',\n 'forum.middleware.anon_user.ConnectToSessionMessagesMiddleware',\n 'forum.middleware.request_utils.RequestUtils',\n 'forum.middleware.cancel.CancelActionMiddleware',\n 'forum.middleware.admin_messages.AdminMessagesMiddleware',\n 'django.middleware.transaction.TransactionMiddleware']\nUSE_I18N    \nTrue\nTHOUSAND_SEPARATOR  \n','\nSECRET_KEY  \n'********************'\nLANGUAGE_COOKIE_NAME    \n'django_language'\nFILE_UPLOAD_TEMP_DIR    \n'/usr/local/src/osqa/tmp'\nTRANSACTIONS_MANAGED    \nFalse\nLOGGING_CONFIG  \n'django.utils.log.dictConfig'\nTEMPLATE_LOADERS    \n['django.template.loaders.filesystem.load_template_source',\n 'django.template.loaders.app_directories.load_template_source',\n 'forum.modules.template_loader.module_templates_loader',\n 'forum.skins.load_template_source']\nTEMPLATE_DEBUG  \nTrue\nCSRF_COOKIE_NAME    \n'csrftoken'\nTEST_DATABASE_COLLATION \nNone\nEMAIL_HOST_PASSWORD \n'********************'\nCACHE_BACKEND   \n'file:///usr/local/src/osqa/cache'\nSESSION_COOKIE_SECURE   \nFalse\nCSRF_COOKIE_DOMAIN  \nNone\nFILE_CHARSET    \n'utf-8'\nDEBUG   \nTrue\nMODULES_PACKAGE \n'forum_modules'\nSESSION_FILE_PATH   \nNone\nDEFAULT_FILE_STORAGE    \n'django.core.files.storage.FileSystemStorage'\nINSTALLED_APPS  \n['django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.sites',\n 'django.contrib.admin',\n 'django.contrib.humanize',\n 'django.contrib.sitemaps',\n 'django.contrib.markup',\n 'forum']\nLANGUAGES   \n(('ar', 'Arabic'),\n ('az', 'Azerbaijani'),\n ('bg', 'Bulgarian'),\n ('bn', 'Bengali'),\n ('bs', 'Bosnian'),\n ('ca', 'Catalan'),\n ('cs', 'Czech'),\n ('cy', 'Welsh'),\n ('da', 'Danish'),\n ('de', 'German'),\n ('el', 'Greek'),\n ('en', 'English'),\n ('en-gb', 'British English'),\n ('es', 'Spanish'),\n ('es-ar', 'Argentinian Spanish'),\n ('es-mx', 'Mexican Spanish'),\n ('es-ni', 'Nicaraguan Spanish'),\n ('et', 'Estonian'),\n ('eu', 'Basque'),\n ('fa', 'Persian'),\n ('fi', 'Finnish'),\n ('fr', 'French'),\n ('fy-nl', 'Frisian'),\n ('ga', 'Irish'),\n ('gl', 'Galician'),\n ('he', 'Hebrew'),\n ('hi', 'Hindi'),\n ('hr', 'Croatian'),\n ('hu', 'Hungarian'),\n ('id', 'Indonesian'),\n ('is', 'Icelandic'),\n ('it', 'Italian'),\n ('ja', 'Japanese'),\n ('ka', 'Georgian'),\n ('km', 'Khmer'),\n ('kn', 'Kannada'),\n ('ko', 'Korean'),\n ('lt', 'Lithuanian'),\n ('lv', 'Latvian'),\n ('mk', 'Macedonian'),\n ('ml', 'Malayalam'),\n ('mn', 'Mongolian'),\n ('nl', 'Dutch'),\n ('no', 'Norwegian'),\n ('nb', 'Norwegian Bokmal'),\n ('nn', 'Norwegian Nynorsk'),\n ('pa', 'Punjabi'),\n ('pl', 'Polish'),\n ('pt', 'Portuguese'),\n ('pt-br', 'Brazilian Portuguese'),\n ('ro', 'Romanian'),\n ('ru', 'Russian'),\n ('sk', 'Slovak'),\n ('sl', 'Slovenian'),\n ('sq', 'Albanian'),\n ('sr', 'Serbian'),\n ('sr-latn', 'Serbian Latin'),\n ('sv', 'Swedish'),\n ('ta', 'Tamil'),\n ('te', 'Telugu'),\n ('th', 'Thai'),\n ('tr', 'Turkish'),\n ('uk', 'Ukrainian'),\n ('ur', 'Urdu'),\n ('vi', 'Vietnamese'),\n ('zh-cn', 'Simplified Chinese'),\n ('zh-tw', 'Traditional Chinese'))\nDATABASE_ENGINE \n'postgresql_psycopg2'\nDATABASE_NAME   \n'osqa'\nCOMMENTS_FIRST_FEW  \n0\nPREPEND_WWW \nFalse\nSESSION_COOKIE_HTTPONLY \nFalse\nDATABASE_PORT   \n''\nDEBUG_PROPAGATE_EXCEPTIONS  \nFalse\nMONTH_DAY_FORMAT    \n'F j'\nLOGIN_URL   \n'/accounts/login/'\nSESSION_EXPIRE_AT_BROWSER_CLOSE \nFalse\nTIME_FORMAT \n'P'\nDATE_INPUT_FORMATS  \n('%Y-%m-%d',\n '%m/%d/%Y',\n '%m/%d/%y',\n '%b %d %Y',\n '%b %d, %Y',\n '%d %b %Y',\n '%d %b, %Y',\n '%B %d %Y',\n '%B %d, %Y',\n '%d %B %Y',\n '%d %B, %Y')\nAUTHENTICATION_BACKENDS \n['django.contrib.auth.backends.ModelBackend']\nFORCE_SCRIPT_NAME   \n''\nPASSWORD_RESET_TIMEOUT_DAYS \n'********************'\nCACHE_MIDDLEWARE_ALIAS  \n'default'\nSESSION_SAVE_EVERY_REQUEST  \nFalse\nADMIN_MEDIA_PREFIX  \n'/admin_media/'\nNUMBER_GROUPING \n0\nSESSION_ENGINE  \n'django.contrib.sessions.backends.db'\nCSRF_FAILURE_VIEW   \n'django.views.csrf.csrf_failure'\nCOMMENTS_SKETCHY_USERS_GROUP    \nNone\nLOGIN_REDIRECT_URL  \n'/accounts/profile/'\nSESSION_COOKIE_PATH \n'/'\nLOGGING \n{'disable_existing_loggers': False,\n 'handlers': {'mail_admins': {'class': 'django.utils.log.AdminEmailHandler',\n                  'level': 'ERROR'}},\n 'loggers': {'django.request': {'handlers': ['mail_admins'],\n                'level': 'ERROR',\n                'propagate': True}},\n 'version': 1}\nCACHE_MIDDLEWARE_KEY_PREFIX \n''\nLOCALE_PATHS    \n()\nTEMPLATE_STRING_IF_INVALID  \n''\nCOMMENTS_ALLOW_PROFANITIES  \nFalse\nLOGOUT_URL  \n'/accounts/logout/'\nEMAIL_USE_TLS   \nFalse\nTEMPLATE_DIRS   \n('/usr/local/src/osqa/forum/skins',)\nFIXTURE_DIRS    \n()\nEMAIL_HOST  \n'localhost'\nDATE_FORMAT \n'N j, Y'\nMEDIA_ROOT  \n''\nADMINS  \n()\nFORMAT_MODULE_PATH  \nNone\nDEFAULT_FROM_EMAIL  \n'webmaster@localhost'\nSTATICFILES_DIRS    \n()\nMEDIA_URL   \n''\nDATETIME_FORMAT \n'N j, Y, P'\nEMAIL_SUBJECT_PREFIX    \n'[Django] '\nDJANGO_VERSION  \n1.3\nSITE_ID \n1\nDISALLOWED_USER_AGENTS  \n()\nALLOWED_INCLUDE_ROOTS   \n()\nDECIMAL_SEPARATOR   \n'.'\nSHORT_DATE_FORMAT   \n'm/d/Y'\nDATABASE_USER   \n'uosqa'\nMODULE_LIST \n[&lt;module 'osqa.forum_modules.sximporter' from '/usr/local/src/osqa/forum_modules/sximporter/__init__.pyc'&gt;,\n &lt;module 'osqa.forum_modules.pgfulltext' from '/usr/local/src/osqa/forum_modules/pgfulltext/__init__.pyc'&gt;,\n &lt;module 'osqa.forum_modules.default_badges' from '/usr/local/src/osqa/forum_modules/default_badges/__init__.pyc'&gt;,\n &lt;module 'osqa.forum_modules.akismet' from '/usr/local/src/osqa/forum_modules/akismet/__init__.pyc'&gt;,\n &lt;module 'osqa.forum_modules.exporter' from '/usr/local/src/osqa/forum_modules/exporter/__init__.pyc'&gt;,\n &lt;module 'osqa.forum_modules.localauth' from '/usr/local/src/osqa/forum_modules/localauth/__init__.pyc'&gt;,\n &lt;module 'osqa.forum_modules.robotstxt' from '/usr/local/src/osqa/forum_modules/robotstxt/__init__.pyc'&gt;,\n &lt;module 'osqa.forum_modules.facebookauth' from '/usr/local/src/osqa/forum_modules/facebookauth/__init__.pyc'&gt;,\n &lt;module 'osqa.forum_modules.oauthauth' from '/usr/local/src/osqa/forum_modules/oauthauth/__init__.pyc'&gt;]\nTEST_RUNNER \n'django.test.simple.DjangoTestSuiteRunner'\nSITE_SRC_ROOT   \n'/usr/local/src/osqa'\nTIME_ZONE   \n'Australia/Melbourne'\nFILE_UPLOAD_MAX_MEMORY_SIZE \n2621440\nAPP_BASE_URL    \n'http://127.0.0.1'\nEMAIL_BACKEND   \n'django.core.mail.backends.smtp.EmailBackend'\nDEFAULT_TABLESPACE  \n''\nTEMPLATE_CONTEXT_PROCESSORS \n['django.core.context_processors.request',\n 'forum.context.application_settings',\n 'forum.user_messages.context_processors.user_messages',\n 'django.core.context_processors.auth']\nSESSION_COOKIE_AGE  \n1209600\nONLINE_USERS    \n{}\nSETTINGS_MODULE \n'osqa.settings'\nUSE_ETAGS   \nFalse\nDISABLED_MODULES    \n['books', 'recaptcha', 'project_badges']\nLANGUAGES_BIDI  \n('he', 'ar', 'fa')\nDEFAULT_INDEX_TABLESPACE    \n''\nINTERNAL_IPS    \n('127.0.0.1',)\nSTATIC_URL  \nNone\nEMAIL_PORT  \n25\nSHORT_DATETIME_FORMAT   \n'm/d/Y P'\nABSOLUTE_URL_OVERRIDES  \n{}\nDATABASE_OPTIONS    \n{}\nCACHE_MIDDLEWARE_SECONDS    \n600\nBANNED_IPS  \n()\nDEBUG_TOOLBAR_CONFIG    \n{'INTERCEPT_REDIRECTS': True}\nDATETIME_INPUT_FORMATS  \n('%Y-%m-%d %H:%M:%S',\n '%Y-%m-%d %H:%M',\n '%Y-%m-%d',\n '%m/%d/%Y %H:%M:%S',\n '%m/%d/%Y %H:%M',\n '%m/%d/%Y',\n '%m/%d/%y %H:%M:%S',\n '%m/%d/%y %H:%M',\n '%m/%d/%y')\nDATABASE_PASSWORD   \n'********************'\nCOMMENTS_MODERATORS_GROUP   \nNone\nPROFANITIES_LIST    \n'********************'\nEMAIL_HOST_USER \n''\nCOMMENTS_BANNED_USERS_GROUP \nNone\n</code></pre>\n"},{"tags":["python","django","django-urls","satchless"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13155567,"title":"issues with satchless app","body":"<p>I am using <strong>satchless app</strong> in my local server.  It is installed at python path.\nLater i have create my project in my home directory and modify the settings.py file as described in <a href=\"https://bitbucket.org/coocoo/satchless/src/fdf00820b724/doc/intro/installation.rst\" rel=\"nofollow\">this doc</a></p>\n\n<p>But when i am running my server and goes to localserver <em>localhost:8000</em> it gives me the error <strong>cannot import name cart_app</strong>  I think it does not imort none of the app (cart, product or anything i have mention in my doc).</p>\n\n<p>My url.py file is similar as it is specified in the doc i have mentioned above.</p>\n\n<p>So any one who have used satchless app can tell me where i am wrong</p>\n\n<p>Any suggestions would be appreciated\nThanks</p>\n"},{"tags":["python","django","centos","askbot"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13168146,"title":"Askbot - No module named xdg.Config","body":"<p>I have installed Python 2.7.3 + Django 1.3.1 + Askbot and <a href=\"https://github.com/ASKBOT/askbot-devel/blob/master/askbot_requirements.txt\" rel=\"nofollow\">these requirements</a></p>\n\n<p>When I run my server on port 8000, and I try to establishing a connection with a browser I have this unusual error: <strong>*Could not import myapp01.deps.django_authopenid.views. Error was: No module named xdg.Config*</strong> .</p>\n\n<p>Traceback output is: <a href=\"http://pastebin.com/4uzbWvR0\" rel=\"nofollow\">http://pastebin.com/4uzbWvR0</a></p>\n\n<p>My operating system is CentOS 6.3 and all the installations is automated and managed by Puppet.</p>\n\n<p>Anyone have an idea?</p>\n"},{"tags":["django","localization","django-middleware","urlpatterns"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":154,"score":1,"question_id":11484965,"title":"Django 1.4 LocaleMiddleware not working with Apache, but works with runserver","body":"<p>My project has this middleware setting:</p>\n\n<pre><code>MIDDLEWARE_CLASSES = (\n    'django.middleware.cache.UpdateCacheMiddleware',\n    'django.middleware.locale.LocaleMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',\n    # Uncomment the next line for simple clickjacking protection:\n    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',\n    'django.middleware.cache.FetchFromCacheMiddleware',\n)\n</code></pre>\n\n<p>For local development, I setup a <code>local_settings.py</code> module which redefines the middleware setting as:</p>\n\n<pre><code>MIDDLEWARE_CLASSES = (\n    'django.middleware.locale.LocaleMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',\n)\n</code></pre>\n\n<p>Here I'm just removing the cache-related middleware, just for development.</p>\n\n<p>In my Apache deploy, the <code>local_settings.py</code> only redefines <code>DEBUG</code> (to <code>False</code>) and the <code>DATABASES</code> dict.</p>\n\n<p>I even installed IPython in the project's production virtualenv (the one that the Apache server uses) and executed this:</p>\n\n<pre><code>In [1]: from django.conf import settings\n\nIn [2]: settings.MIDDLEWARE_CLASSES\nOut[2]: \n('django.middleware.cache.UpdateCacheMiddleware',\n 'django.middleware.locale.LocaleMiddleware',\n 'django.middleware.common.CommonMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware',\n 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',\n 'django.middleware.cache.FetchFromCacheMiddleware')\n</code></pre>\n\n<p>But, despite all this, I still have to enter a language identifier in the URL (as <code>httpp://mysite.com/en/myview/</code>) to access any URL that uses <code>from django.conf.urls.i18n.i18n_patterns</code>. And one of the functions of <code>django.middleware.locale.LocaleMiddleware</code> is to do precisely that, when accessing a localized view without a language code prefix, guess it from the user-agent headers and redirect to the prefixed view.</p>\n\n<p>How to debug what's going on?</p>\n"},{"tags":["django","django-forms","django-views","render"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":13149642,"title":"How to render a POST and make it show up on another page","body":"<p>I'm trying to create a marketplace website similar to craigslist.\nI created a form according to the Django tutorial \"Working with forms\", but I don't know how to render information I got from the POST forms.\nI want to make information(subject,price...etc) that I got from POST show up on another page like this. <a href=\"http://bakersfield.craigslist.org/atq/3375938126.html\" rel=\"nofollow\">http://bakersfield.craigslist.org/atq/3375938126.html</a> and, I want the \"Subject\"(please look at form.py) of this product(eg.1960 French Chair) to show up on another page like this. <a href=\"http://bakersfield.craigslist.org/ata/\" rel=\"nofollow\">http://bakersfield.craigslist.org/ata/</a>  }</p>\n\n<p>Can I get some advice to handle submitted information?\nHere's present codes. I'll appreciate all your answers and helps.</p>\n\n<p>&lt;-! Here's my codes --></p>\n\n<p>◆forms.py</p>\n\n<pre><code>from django import forms\n\nclass SellForm(forms.Form):\n    subject = forms.CharField(max_length=100)\n    price = forms.CharField(max_length=100)\n    condition = forms.CharField(max_length=100)\n    email = forms.EmailField()\n    body = forms.TextField()\n</code></pre>\n\n<p>◆views.py</p>\n\n<pre><code>from django.shortcuts import render, render_to_response\nfrom django.http import HttpResponseRedirect\nfrom site1.forms import SellForm\n\ndef sell(request):\n\n    if request.method ==\"POST\":\n        form =SellForm(request.POST)\n        if form.is_valid():\n            subject = form.cleaned_data['subject']\n            price = form.cleaned_data['price']\n            condition = form.cleaned_data['condition']\n            email = form.cleaned_data['email']\n            body = form.cleaned_data['body']\n\n            return HttpResponseRedirect('/books/')\n\n    else:\n        form=SellForm()\n\n    render(request, 'sell.html',{'form':form,})\n</code></pre>\n\n<p>◆urls.py</p>\n\n<pre><code>from django.conf.urls import patterns, include, url\nfrom django.contrib import admin\nadmin.autodiscover()\n\nurlpatterns = patterns('',\n    url(r'^sechand/$','site1.views.sell'),\n    url(r'^admin/', include(admin.site.urls)),\n\n)\n</code></pre>\n\n<p>◆sell.html</p>\n\n<pre><code>&lt;form action = \"/sell/\" method = \"post\"&gt;{% csrf_token%} \n{{ form.as_p }}\n&lt;input type = \"submit\" value=\"Submit\" /&gt;\n&lt;/form&gt;             \n</code></pre>\n"},{"tags":["django","django-models","django-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13168622,"title":"Django tests failing on invalid keyword argument","body":"<p>I have a models.py like so:</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\nfrom datetime import datetime\n\n\nclass UserProfile(models.Model):\n    user = models.OneToOneField(User)\n\n    def __unicode__(self):\n        return self.user.username\n\n\nclass Project(models.Model):\n    user = models.ForeignKey(UserProfile)\n    created = models.DateTimeField(auto_now_add=True)\n    updated = models.DateTimeField(auto_now=True)\n    product = models.ForeignKey('tool.product')\n    module = models.ForeignKey('tool.module')\n    model = models.ForeignKey('tool.model')\n    zipcode = models.IntegerField(max_length=5)\n\n    def __unicode__(self):\n        return unicode(self.id)\n</code></pre>\n\n<p>And my tests.py:</p>\n\n<pre><code>from django.test import TestCase, Client\n# --- import app models\nfrom django.contrib.auth.models import User\nfrom tool.models import Module, Model, Product\nfrom user_profile.models import Project, UserProfile\n\n\n# --- unit tests --- #\nclass UserProjectTests(TestCase):\n\n    fixtures = ['admin_user.json']\n\n    def setUp(self):\n        self.product1 = Product.objects.create(\n            name='bar',\n        )\n        self.module1 = Module.objects.create(\n            name='foo',\n            enable=True\n        )\n        self.model1 = Model.objects.create(\n            module=self.module1,\n            name='baz',\n            enable=True\n        )\n        self.user1 = User.objects.get(pk=1)\n\n    ...\n\n    def test_can_create_project(self):\n        self.project1 = Model.objects.create(\n            user=self.user1,\n            product=self.product1,\n            module=self.module1,\n            model=self.model1,\n            zipcode=90210\n        )\n\n        self.assertEquals(self.project1.zipcode, 90210)\n</code></pre>\n\n<p>But I get a <code>TypeError: 'product' is an invalid keyword argument for this function</code> error.</p>\n\n<p>I'm not sure what is failing but I'm guessing something to do with the FK relationships...</p>\n\n<p>Any help would be much appreciated.</p>\n\n<p><strong>EDIT:</strong>\nFull Traceback:</p>\n\n<pre><code>    ERROR: test_can_create_project (user_profile.tests.UserProjectTests)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/sam/Dropbox/django-projects/unirac/user_profile/tests.py\", line 52, in test_can_create_project\n    zipcode=90210\n  File \"/home/sam/.envs/unirac/local/lib/python2.7/site-packages/django/db/models/manager.py\", line 137, in create\n    return self.get_query_set().create(**kwargs)\n  File \"/home/sam/.envs/unirac/local/lib/python2.7/site-packages/django/db/models/query.py\", line 375, in create\n    obj = self.model(**kwargs)\n  File \"/home/sam/.envs/unirac/local/lib/python2.7/site-packages/django/db/models/base.py\", line 367, in __init__\n    raise TypeError(\"'%s' is an invalid keyword argument for this function\" % kwargs.keys()[0])\nTypeError: 'product' is an invalid keyword argument for this function\n</code></pre>\n"},{"tags":["python","django","scalability"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":13168523,"title":"Can Django admin handle millions of records?","body":"<p>I am wondering if Django admin can handle a huge amount of records.</p>\n\n<p>Say I have a 2 million users, how the pagination will be handled for example? Will it be dead slow because every time all the records will be counted to be provided to the offset?</p>\n\n<p>Note: I plan to use PostgreSQL.</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","django","celery"],"answer_count":2,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":209,"score":5,"question_id":7772378,"title":"reliable way to deploy new code into a production celery cluster without pausing service","body":"<p>I have a few celery nodes running in production with rabbitmq and I have been handling deploys with service interruption. I have to take down the whole site in order to deploy new code out to celery. I have max tasks per child set to 1, so in theory, if I make changes to an existing task, they should take effect when the next time they are run, but what about registering new tasks? I know that restarting the daemon won't kill running workers, but instead will let them die on their own, but it still seems dangerous. Is there an elegant solution to this problem? </p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13081757,"title":"Drop-down box in Django admin does not auto-populate with choices","body":"<p>I have 2 models in my models.py file; Genre and AudioTracks. Each track will be assigned a genre; as such, I have defined a ForeignKey relationship. \nMy problem is that in the admin view, when i want to add the genre fore each track, I can't select the choices from the combo box. I have to click on the add symbol (i.e. the green +) and then a Genre window pops up and I can then add the genre. </p>\n\n<p>I want to be able to just add a track and select the genre in the little combo box at the bottom. </p>\n\n<p>Here are the images:</p>\n\n<p><img src=\"http://i.stack.imgur.com/Nbhng.png\" alt=\"I want to be able to see the genre choices instead of clicking &quot;add&quot;\"></p>\n\n<p>Second Image:</p>\n\n<p><img src=\"http://i.stack.imgur.com/DFZFj.png\" alt=\"What happens when I click &quot;add&quot;\">\nA snippet of my code is below:</p>\n\n<pre><code>GENRE_CHOICES =  (\n             ('rock', 'Rock'),\n             ('jazz/blues', 'Jazz/Blues'),\n             ('blues', 'Blues'),\n             ('r&amp;b', 'R&amp;B'),\n             ('jazz', 'Jazz'),\n             ('pop', 'Pop'), \n             ('hip-hop', 'Hip-Hop'),    \n             )\n\n\ndef get_upload_path(dirname, obj, filename):\n  return os.path.join(\"audiotracks\", dirname, obj.user.username, filename)\n\ndef get_audio_upload_path(obj, filename):\n  return get_upload_path(\"audio_files\", obj, filename)\n\n\nclass Genre(models.Model):\n    genre_choices = models.CharField(max_length=1, choices=GENRE_CHOICES)\n    slug = models.SlugField(max_length = 100, unique = True) \n\ndef __unicode__(self):\n    return self.title\n\ndef get_absolute_url(self):\n    return ('view_midmentals_genre', None, {'slug':self.slug})\n\nclass AudioTrack(models.Model):\n  class Meta:\n      pass\n\nuser = models.ForeignKey(User, \n    related_name = \"tracks\",\n    blank = True,\n    null = True\n)\n\nadded_on = models.DateTimeField(auto_now_add=True, null = True)\nupdated_on = models.DateTimeField(auto_now=True, null = True)\naudio_file = models.FileField(_(\"Audio file\"), upload_to=get_audio_upload_path)\ntitle = models.CharField(_(\"Title\"), max_length=\"200\", null=True)\ndescription = models.TextField(_(\"Description\"), null=True, blank=True)\nslug = models.SlugField(max_length = 40, unique = True) #so as to have a dedicated page for each category \ngenre = models.ForeignKey(Genre)\n</code></pre>\n\n<p>Please let me know if i need to rephrase my question or title. I was having a hard time putting it into words.  Thank you very much.</p>\n"},{"tags":["django","django-templates","django-template-tags"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13167510,"title":"Declaring array literals in django templates","body":"<p>In a django template I have a <code>&lt;select&gt;</code> element with something like:</p>\n\n<pre><code>&lt;option value=\"0\"&gt;0&lt;/option&gt;\n&lt;option value=\"10\"&gt;10&lt;/option&gt;\n&lt;option value=\"15\"&gt;20&lt;/option&gt;\n&lt;option value=\"30\"&gt;30&lt;/option&gt;\n&lt;option value=\"45\"&gt;45&lt;/option&gt;\n&lt;option value=\"60\"&gt;60&lt;/option&gt;\n</code></pre>\n\n<p>It's rather ugly and redundant to list out this big mess, I'd like to do something like :</p>\n\n<pre><code>{% for i in list(0, 10, 20, 30, 45, 60) %}\n&lt;option value=\"{{i}}\"&gt;{{i}}&lt;/option&gt;\n{% for %}\n</code></pre>\n\n<p>I suppose I could just put these variables in a context variable, but I don't want to involve the view here, it seems like the kind of thing that should stay at the template level.</p>\n"}]}
{"total":41213,"page":7,"pagesize":100,"questions":[{"tags":["python","django","mongodb","selenium","django-celery"],"answer_count":2,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":78,"score":8,"question_id":12968685,"title":"How do I get django celery to write to the test database for my functional tests?","body":"<p>I am working on a Django application. We're using celery to queue writes to our Mongo database. I'm trying to write a functional test (using Selenium) for a function that queues something in celery.</p>\n\n<p>The problem is that celery writes to the main Mongo database instead of the test database. How can I set up my functional tests to work with an instance of celery that writes to the test database?</p>\n\n<p>We're using <code>'django_nose.NoseTestSuiteRunner'</code> as our <code>TEST_RUNNER</code>.</p>\n\n<p><em><strong>UPDATE</em></strong>:</p>\n\n<p>I haven't been able to figure out how to use another instance of celery for the tests, but I have found a way to bypass celery for the functional tests.</p>\n\n<p>In my <code>settings.py</code>:</p>\n\n<pre><code>FUNC_TEST_COMMAND=['functional']\nfunc_test_command = filter(lambda element: element in FUNC_TEST_COMMAND, sys.argv)\nif len(func_test_command) &gt; 0:\n  CELERY_ALWAYS_EAGER = True\n</code></pre>\n\n<p>This mimics the behaviour of an <code>AsyncResult</code> without sending anything through a message queue when running the functional test suite. (See <a href=\"http://celery.readthedocs.org/en/2.4/configuration.html#celery-always-eager\" rel=\"nofollow\">http://celery.readthedocs.org/en/2.4/configuration.html#celery-always-eager</a> for more info.)</p>\n\n<p>This solution is probably not ideal for functional tests, because it cuts out one of the application layers.</p>\n"},{"tags":["django","oracle","django-models","cx-oracle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13164189,"title":"Django produce sql with table name different then specified in meta db_table","body":"<p>I'm using django 1.4 with oracle backend</p>\n\n<p>In my models.py I have:</p>\n\n<pre><code> class ProteinTherapeutics(models.Model):\n#...\n    class Meta:\n        db_table = 'mnowotka\\\".\\\"protein_therapeutics'\n        managed=False\n</code></pre>\n\n<p>And this:</p>\n\n<pre><code>ProteinTherapeutics.objects.exists()\n</code></pre>\n\n<p>produces this SQL:</p>\n\n<pre><code>SELECT *\nFROM\n  (SELECT ROWNUM AS \"_RN\",\n          \"_SUB\".*\n   FROM\n     (SELECT (1) AS \"A\"\n      FROM \"MNOWOTKA\".\"PROTEIN_THERAPEFB7C\") \"_SUB\"\n   WHERE ROWNUM &lt;= 1)\nWHERE \"_RN\" &gt; 0  [1.99ms]\n</code></pre>\n\n<p>Can you help me, please?</p>\n"},{"tags":["javascript","django","popup","admin"],"answer_count":3,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":3079,"score":5,"question_id":2347582,"title":"Django Admin popup functionality","body":"<p>This topic is fairly common (most explicitly detailed here: <a href=\"http://www.hoboes.com/Mimsy/hacks/replicating-djangos-admin/\">http://www.hoboes.com/Mimsy/hacks/replicating-djangos-admin/</a>), but I'm still having trouble with it.  I'm trying to use the \"plus\" button functionality used in the admin site where one can add an additional foreign key to a linked entry.  In the admin site, a popup displays allowing the user to submit a new field and then that new value is populated on the original form.</p>\n\n<p>I think my issue centers around the inclusion of this line:</p>\n\n\n\n<p>within the base.html template and the popadd.html template.  Clicking the plus button does not bring up a new window.  The popadd template simply loads in the same tab.  And submitting a new entry does not take the user back to the original form.</p>\n\n<p>The admin site is functional.  I am including ADMIN_MEDIA_PREFIX = '/media/admin/' in the settings.py file.  Does it have something to do with where the RelatedObjectLookups.js lives?  It's currently in an admin directory outside of my project folder.  Do I have to create a symlink?  </p>\n\n<p>Sorry for the noob questions.  Would appreciate any suggestions (as detailed as possible).</p>\n"},{"tags":["python","django","sqlite"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":224,"score":0,"question_id":9256442,"title":"Django--HELP. django not creating sqlite database file as expected","body":"<p>New to django</p>\n\n<p>following tutorial 1. also looked up all related questions on stack overflow.  thought it was a absolute path issue...but absolute path seems to be correct. below is settings.py. any ideas?</p>\n\n<pre><code>MANAGERS = ADMINS\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql',    'sqlite3' or 'oracle'.\n        'NAME': 'Users/Leerix/cars/carfilter/database/temp.db',                      #     Or path to database file if using sqlite3.\n        'USER': '',                      # Not used with sqlite3.\n        'PASSWORD': '',                  # Not used with sqlite3.\n        'HOST': '',                      # Set to empty string for localhost. Not used     with sqlite3.\n        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.\n    }\n</code></pre>\n\n<p>Below is the error i'm getting.  Been at this for several hours and cannot find the bug.  any help is greatly appreciated. Thx</p>\n\n<pre><code>python manage.py syncdb\nTraceback (most recent call last):\n  File \"manage.py\", line 9, in &lt;module&gt;\n    execute_from_command_line(sys.argv)\n  File \"/Library/Python/2.5/site-packages/django/core/management/__init__.py\", line 420,  in execute_from_command_line\n    utility.execute()\n  File \"/Library/Python/2.5/site-packages/django/core/management/__init__.py\", line 359, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"/Library/Python/2.5/site-packages/django/core/management/base.py\", line 196, in   run_from_argv\n    self.execute(*args, **options.__dict__)\n  File \"/Library/Python/2.5/site-packages/django/core/management/base.py\", line 232, in execute\n    output = self.handle(*args, **options)\n  File \"/Library/Python/2.5/site-packages/django/core/management/base.py\", line 371, in   handle\n    return self.handle_noargs(**options)\n  File \"/Library/Python/2.5/site-packages/django/core/management/commands/syncdb.py\", line 57, in handle_noargs\n    cursor = connection.cursor()\n  File \"/Library/Python/2.5/site-packages/django/db/backends/__init__.py\", line 306, in  cursor\n        cursor = self.make_debug_cursor(self._cursor())\n      File \"/Library/Python/2.5/site-packages/django/db/backends/sqlite3/base.py\", line 259, in _cursor\n        self.connection = Database.connect(**kwargs)   \nsqlite3.OperationalError: unable to open database file\n</code></pre>\n"},{"tags":["django","django-forms","django-cache"],"answer_count":3,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":407,"score":3,"question_id":8176200,"title":"Caching queryset choices for ModelChoiceField or ModelMultipleChoiceField in a Django form","body":"<p>When using <em>ModelChoiceField</em> or <em>ModelMultipleChoiceField</em> in a Django form, is there a way to pass in a cached set of choices? Currently, if I specify the choices via the <em>queryset</em> parameter, it results in a database hit.</p>\n\n<p>I'd like to cache these choices using memcached and prevent unnecessary hits to the database when displaying a form with such a field.</p>\n"},{"tags":["ruby","django","inheritance","jekyll","liquid"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":64,"score":4,"question_id":13086569,"title":"Jekyll templates using django-like liquid blocks / inheritance","body":"<p>I'm getting into Jekyll in a big way and would like to use it as a general front-end development platform, but am running up against the limitations of the Liquid templating language, specifically its difference to Django templating.</p>\n\n<p>I discovered the liquid-inheritance gem, which adds the all-important Extends and Block syntax from Django. This blog post extends the gem further to suit Jekyll's file system:\n<a href=\"http://www.sameratiani.com/2011/10/22/get-jekyll-working-with-liquid-inheritance.html\" rel=\"nofollow\">http://www.sameratiani.com/2011/10/22/get-jekyll-working-with-liquid-inheritance.html</a></p>\n\n<p>The problem is that it doesn't appear to implement blocks in exactly the same way Django does, which essentially renders the gem useless.</p>\n\n<p>I have two jekyll \"layouts\" called - for the sake of understanding - parent.html and child.html. Neither of these contain YAML sections.</p>\n\n<p>Parent</p>\n\n<pre><code>&lt;html&gt;\n{% block foo %} {% endblock %}\n&lt;/html&gt;\n</code></pre>\n\n<p>Child</p>\n\n<pre><code>{% extends _layouts/parent.html %}\n{% block foo %}\n  &lt;div&gt;\n    Bar comes next:\n    {% block bar %} {% endblock %}\n  &lt;/div&gt;\n{% endblock %}\n</code></pre>\n\n<p>And then I have a jekyll page which includes a YAML section thus:</p>\n\n<pre><code>---\ntitle: test\n---\n\n{% extends _layouts/child.html %}\n{% block bar %}My title is {{ page.title }} {% endblock %}\n</code></pre>\n\n<p>What I'd expect:</p>\n\n<pre><code>&lt;html&gt;\n  &lt;div&gt;\n    Bar comes next:\n    My title is test\n  &lt;/div&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>What I get:</p>\n\n<pre><code>&lt;html&gt;\n  &lt;div&gt;\n    Bar comes next:\n  &lt;/div&gt;\n&lt;/html&gt;My title is test\n</code></pre>\n\n<p>It seems something is failing to treat the blocks in mypage.html as being eligible for insertion into the suitable places of parent/child, although it's clearly still doing something.</p>\n\n<p>I'm not a ruby developer and am reasonably new to Jekyll, so I need help identifying what part of this stack is failing. The liquid-inheritance issues on github suggest others are experiencing this block nesting problem: <a href=\"https://github.com/danwrong/liquid-inheritance/issues/3\" rel=\"nofollow\">https://github.com/danwrong/liquid-inheritance/issues/3</a></p>\n\n<p>I've tried several of the forks of liquid-inheritance, many of which apparently fix that problem regex, but none seem to solve this.</p>\n\n<p>Is what i'm tring to do fundamentally impossible? It seems like I'm at least 85% of the way there and the final bit needs fixing.</p>\n"},{"tags":["django","csv","sqlite3","zipcode"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13148636,"title":"Problems with ZipCode Database Project","body":"<p>I saw mentions on here of the ZipCode database project for computing distance between two zipcodes. I was able to upload the csv file successfully to my database using Django and sqlite3. However, now I am not able to perform queries with anything except the zipcode itself (city and state don't work). I thought it was because the csv file had quotes around the city and state, so I tried uploaded the file taking out all of the quotes. No luck. Then I thought the encoding was off, so I uploaded again making sure that it was encoded in utf-8. Again, no luck. Does anyone have experience with this database? \nThe database is at <a href=\"http://zips.sourceforge.net/\" rel=\"nofollow\">http://zips.sourceforge.net/</a> \nAnd the way I am loading it is based off of <a href=\"http://mitchfournier.com/2011/10/11/how-to-import-a-csv-or-tsv-file-into-a-django-model/\" rel=\"nofollow\">http://mitchfournier.com/2011/10/11/how-to-import-a-csv-or-tsv-file-into-a-django-model/</a>\nI shied away from geodjango because it seemed like overkill for what I want to do. Any help would be greatly appreciated.</p>\n\n<p>Here is the code:</p>\n\n<p>For my zipcode class:</p>\n\n<pre><code>class ZipCode(models.Model):\n    zipcode=models.CharField(max_length=5)\nstatecode=models.CharField(max_length=2)\nlat=models.CharField(max_length=9)\nlong=models.CharField(max_length=9)\ncity=models.CharField(max_length=64)\nstate=models.CharField(max_length=32)\ncreate_date=models.DateTimeField(default=datetime.datetime.now)\ndef __unicode__(self):\n    return \"%s %s %s\" %(self.city,self.statecode,self.zipcode)\n</code></pre>\n\n<p>Then I have a class for Descriptions, here I want to convert city and states to zipcodes, ideally</p>\n\n<pre><code>class Descriptions(models.Model):\nname=models.CharField(max_length=50)\nwebsite=models.CharField(max_length=50,blank=True)\nstreet1=models.CharField(max_length=50,blank=True)\nstreet2=models.CharField(max_length=50,blank=True)\ncity=models.CharField(max_length=50,blank=True)\nstate=models.CharField(max_length=50,blank=True)\nzip=models.CharField(max_length=5,blank=True)\ndescription=models.TextField()\nareas_related=models.TextField()\nadd_area=models.CharField(max_length=50,blank=True)\nfederal=models.NullBooleanField(null=True)\ndef get_zip(self):\n    if self.city and self.state:\n        real_zip=ZipCode.objects.filter(statecode=self.state) ####note this is not the real query I want to do, but even this returns None\n                    ###alternatively, if I do (zip=self.zipcode) I will get an object returned\n        return real_zip\n    def __unicode__(self):\n    return u'%s %s %s %s %s %s %s %s %s %s %s' %(self.name,self.website,self.street1,\n    self.street2,self.city,self.state,self.zip,self.description,self.add_area, self.federal, self.get_zip())\n</code></pre>\n\n<p>For the uploading file: </p>\n\n<pre><code>csv_filepathname='/Users/sam/Documents/service/mysite/zips.csv'\nyour_djangoproject_home='/Users/sam/Documents/service/mysite/mysite'\n\nimport sys,os\n\nsys.path.append(your_djangoproject_home)\nos.environ['DJANGO_SETTINGS_MODULE']='settings'\n\nfrom southtut.models import ZipCode\n\nimport csv\ndataReader = csv.reader(open(csv_filepathname), delimiter=',', quotechar='\"')\nfor row in dataReader:\n    if row[0]!='ZIPCODE':\n        zipcode=ZipCode()\n        zipcode.zipcode=row[0]\n        zipcode.statecode=row[1]    \n        zipcode.lat=row[2]          \n        zipcode.long=row[3]\n        zipcode.city=row[4]     \n        zipcode.state=row[5]            \n        zipcode.save()\n</code></pre>\n"},{"tags":["django","django-models","django-admin"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13166412,"title":"Django can't auto save DateTimeFields","body":"<p>Hi I have a model like so:</p>\n\n<pre><code>from datetime import datetime\n\n\nclass Project(models.Model):\n    created = models.DateTimeField(editable=False)\n    updated = models.DateTimeField(editable=False)\n    product = models.ForeignKey('tool.product')\n    module = models.ForeignKey('tool.module')\n    model = models.ForeignKey('tool.model')\n    zipcode = models.IntegerField(max_length=5)\n\n    def save(self, **kwargs):\n        if not self.id:\n            self.created = datetime.now()\n        self.updated = datetime.now()\n        super(Project, self).save()\n\n    def __unicode__(self):\n        return self.id\n</code></pre>\n\n<p>However when I try to save a project I get:</p>\n\n<pre><code>coercing to Unicode: need string or buffer, long found\n</code></pre>\n\n<p>and from the runserver:</p>\n\n<pre><code>RuntimeWarning: DateTimeField received a naive datetime (2012-10-31 14:45:36.611622) while time zone support is active.\n</code></pre>\n\n<p>I'm not sure exactly what the problem is here but I'm assuming it has something to do with <code>timezone</code> getting in the way of saving the <code>DateTimeField</code>. </p>\n\n<p>Any help would be much appreciated.</p>\n"},{"tags":["django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13133180,"title":"How do I clone a model field in another model in Django?","body":"<pre><code>class Medicine(models.Model):\n    medicine_name = models.CharField(primary_key=True)\n    price = models.IntegerField(max_length=30)\n\nclass Bill(models.Model):\n    regid = models.ForeignKey(Patient)\n    medicine_name = models.ForeignKey(Medicine)\n    quantity = models.IntegerField()\n</code></pre>\n\n<p>What I want is to have a 'price' field in the 'Bill' model and the value of 'price' field should be same as the value of 'price' field in 'Medicine' model based on 'medicine_name'</p>\n"},{"tags":["python","django","thumbnails","cloudfiles"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":222,"score":0,"question_id":10856979,"title":"Migrating issues from Amazon S3 to Rackspace cloudfiles","body":"<p>I decided to try Rackspace Service since IMHO they have great features, but the unique thing is lacking of being awesome is the CloudFiles.</p>\n\n<p>I have done several scripts in order to copy files from s3, set the correct header, (guess the correct header by filename extension and other magic stuff). after all this work, I hoped everything worked out of the box just changing some variables on the settings.py of my django application, unfortunately it seems that I cannot get easy_thumbnails to work with, so basicly my site have no images of the products.</p>\n\n<p>Giving more details, these are the libraries I've installed.</p>\n\n<ul>\n<li>django 1.3</li>\n<li>easy_thumbnails</li>\n<li>django-cumulus</li>\n</ul>\n\n<p>This is how my settings.py is right now.</p>\n\n<pre><code>CUMULUS = {\n    'USERNAME', CLOUDFILES_USERNAME,\n    'CUMULUS_CONTAINER': CLOUDFILES_CONTAINER,\n    'CUMULUS_API_KEY': 'CLOUDFILES_API_KEY',\n}\n\nDEFAULT_FILE_STORAGE = 'cumulus.storage.CloudFilesStorage'\nTHUMBNAIL_DEFAULT_STORAGE = DEFAULT_FILE_STORAGE\n</code></pre>\n\n<p>Then searching on the documentation i found the template variable THUMNAIL_DEBUG .. if I set True.. I get messages like this:</p>\n\n<pre><code>TemplateSyntaxError: Couldn't get the thumbnail images/foto120120311190157738844.jpg: The source file does not appear to be an image\n</code></pre>\n\n<p>I cannot figure out if this is a bug or I am missconfiguring something, did somebody accomplished a setup similar like mine?.</p>\n\n<p>Thanks anyway</p>\n"},{"tags":["python","django","django-template-tags"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13165699,"title":"is there any template tag in django to make ast.literal_eval?","body":"<p>Is there any template tag or workaround in django to make <code>ast.literal_eval(some_str)</code> in a template?</p>\n\n<p>shoud I create a new template tag to do that? In this case, how would be that template tag?</p>\n\n<p>The reason why I'm asking can be found here <a href=\"http://stackoverflow.com/questions/13165479/how-to-deserialize-a-python-printed-dictionary\">how to deserialize a python printed dictionary?</a></p>\n"},{"tags":["xml","django","escaping"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13166201,"title":"Django: Double-Escape XML Entities","body":"<p>Running into a bit of a corner case: the API I'm communicating with blows up when there's an ampersand or similar in the data, even though Django is escaping the data when rendering the XML template. The response I get from the API owner was:</p>\n\n<pre><code>As weird as it sounds, I think you need to double escape it. Try: &amp;amp;amp;\n</code></pre>\n\n<p>Sensibly, Django doesn't really make this easy. Trying <code>|escape|escape</code> doesn't do what I want regardless of whether <code>autoescape</code> is on or off. I'm sure I can write a custom filter to do this, but I'm worried that will lead to other issues. Is there a simple way to do this with standard template filters?</p>\n"},{"tags":["django","django-imagefield","django-modelform","django-file-upload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13148437,"title":"Upload Image with Django Model Form","body":"<p>I'm having difficulty uploading the following model with model form. I can upload fine in the admin but that's not all that useful for a project that limits admin access. </p>\n\n<pre><code>#Models.py\nclass Profile(models.Model):\n    name = models.CharField(max_length=128)\n    user = models.ForeignKey(User)\n    profile_pic = models.ImageField(upload_to='img/profile/%Y/%m/')\n\n#views.py\ndef create_profile(request):\n    try: \n        profile = Profile.objects.get(user=request.user)\n    except:\n        pass\n    form = CreateProfileForm(request.POST or None, instance=profile)\n\n    if form.is_valid():\n       new = form.save(commit=False)\n       new.user = request.user\n       new.save()\n\nreturn render_to_response('profile.html', locals(), context_instance=RequestContext(request))\n\n\n#Profile.html\n&lt;form enctype=\"multipart/form-data\" method=\"post\"&gt;{% csrf_token %}\n&lt;tr&gt;&lt;td&gt;{{ form.as_p }}&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;&lt;button type=\"submit\" class=\"btn\"&gt;Submit&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Note: All the other data in the form saves perfectly well, the photo does not upload at all. Thank you for your help!</p>\n"},{"tags":["django","django-admin"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13166131,"title":"When I edit a model and remake the the database, why does my admin page look like this?","body":"<p><img src=\"http://i.stack.imgur.com/KjQPx.jpg\" alt=\"silly admin\"></p>\n\n<p>I can access localhost/blog and localhost/comic , but not localhost/blog/BlogPost or localhost/comic/ComicPost, preventing me from adding posts.  Is there any way to resolve this?</p>\n"},{"tags":["python","django","virtualenv","fastcgi","lighttpd"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13165851,"title":"Lighttpd, command line arguments to fastcgi process","body":"<p>I'm reading the docs for <a href=\"http://redmine.lighttpd.net/projects/1/wiki/Docs_ModFastCGI\" rel=\"nofollow\">mod_fastcgi</a> in lighttpd, it says:</p>\n\n<p><em>\"bin-path\": path to the local FastCGI binary which should be started if no local FastCGI is running</em></p>\n\n<p>What if I want to have lighttpd start directly my fastcgi process, and said process is created by a python script?. Something like this:</p>\n\n<pre><code># bang omitted... I need to use python from virtualenv\n# File runfastcgi.py\nimport os\nimport sys\n\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"atc.settings\")\nfrom django.core.management import execute_from_command_line\nexecute_from_command_line(['manage.py', 'runfcgi', ... ])\n</code></pre>\n\n<p>Additionally, I'm using virtualenv, and I have ways of deriving all the paths from the environment, even the path of the python interpreter for the virtualenv... the only problem is that, according to mod_fastcgi documentation, I can only pass the path to a <em>binary</em>, so, it seems that I can not do:</p>\n\n<pre><code> bin-path =&gt; (env.ATC_VIRTUALENV + 'bin/python' + ' ' + 'runfastcgi.py')\n</code></pre>\n\n<p>Am I wrong? Is there anyway of asking lighttpd to use a virtualenv python to execute a custom runfastcgi.py?</p>\n"},{"tags":["python","mysql","django","osx","osx-snow-leopard"],"answer_count":3,"favorite_count":5,"up_vote_count":5,"down_vote_count":0,"view_count":7530,"score":5,"question_id":1746863,"title":"Django manage.py syncdb throwing No module named MySQLdb ","body":"<p>I am a newbie learning Python/Django...</p>\n\n<p>Am using the following tutorial located <a href=\"http://docs.djangoproject.com/en/dev/intro/tutorial01/#intro-tutorial01\" rel=\"nofollow\">here</a>.</p>\n\n<p>Created a mysite database in MySQL 5 running on Snow Leopard.</p>\n\n<p>Edited the settings.py file to look like this:</p>\n\n<pre><code>DATABASE_ENGINE = 'mysql'        \nDATABASE_NAME = 'mysite'             \nDATABASE_USER = 'root'             \nDATABASE_PASSWORD = ''       \nDATABASE_HOST = ''            \nDATABASE_PORT = ''             \n</code></pre>\n\n<p>Now when I run the following command:</p>\n\n<pre><code>python manage.py syncdb\n</code></pre>\n\n<p>I receive the following error:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"manage.py\", line 11, in &lt;module&gt;\n  execute_manager(settings)\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/\n  python2.6/site-packages/django/core/management/__init__.py\", line 362,\n  in execute_manager\n  utility.execute()\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/\n  python2.6/site-packages/django/core/management/__init__.py\", line 303,\n  in execute\n  self.fetch_command(subcommand).run_from_argv(self.argv)\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/\n  python2.6/site-packages/django/core/management/base.py\", line 195, in\n  run_from_argv\n  self.execute(*args, **options.__dict__)\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/\n  python2.6/site-packages/django/core/management/base.py\", line 221, in\n  execute\n  self.validate()\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/\n  python2.6/site-packages/django/core/management/base.py\", line 249, in\n  validate\n  num_errors = get_validation_errors(s, app)\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/\n  python2.6/site-packages/django/core/management/validation.py\", line\n  22, in get_validation_errors\n  from django.db import models, connection\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/\n  python2.6/site-packages/django/db/__init__.py\", line 41, in &lt;module&gt;\n  backend = load_backend(settings.DATABASE_ENGINE)\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages  \n   /django/db/__init__.py\", line 17, in load_backend\n   return import_module('.base', 'django.db.backends.%s' %backend_name)\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/\n  python2.6/site-packages/django/utils/importlib.py\", line 35, in import_module\n  __import__(name)\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages       /django/db/backends/mysql/base.py\", line 13, in &lt;module&gt;\n   raise ImproperlyConfigured(\"Error loading MySQLdb module: %s\" % e)\n   django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb\n   module: No module named MySQLdb\n</code></pre>\n\n<p>What am I possibly doing wrong?</p>\n\n<p>Happy programming...</p>\n"},{"tags":["python","regex","django"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":2,"view_count":155,"score":-1,"question_id":13111186,"title":"Changing text in a captured group","body":"<p>With the code I'm using <code>(r' ', ' '),</code> changes to <code>a a a a(r' a', a' a'),</code> when it should change to <code>(r' a', ' '),</code>. What's a more natural way to do this? How do I do this with <code>re.sub</code>?</p>\n\n<p>Current code, see <a href=\"http://pastebin.com/cQvJ81BF\" rel=\"nofollow\">here</a></p>\n\n<pre><code>for key, value in newgroupdict.items():\n    try:\n        newstr = newstr.replace(re.search(e, line).group(key), value)\n    except:\n        pass\n</code></pre>\n\n<p>Examples:</p>\n\n<pre><code>Expression: \\s*(?:url)?\\(r?[\"|'](?P&lt;pattern&gt;[^'\"]+)[\"|'],\\s*[\"|']?direct_to_template[\"|']?,\\s*{[\"|']template[\"|']:\\s*[\"|'](?P&lt;template&gt;[^'\"]+)[\"|']}\\),\nString:     (r'^$', direct_to_template, {'template': 'home.html'}),\nDictionary: {u'pattern': u'^$abc', u'type': u'direct to template', u'template': u'home.html'}\nOutput:     (r'^$abc', direct_to_template, {'template': 'home.html'}),\n\nExpression: \\s*(?:url)?\\(r?[\"|'](?P&lt;pattern&gt;[^'\"]+)[\"|'],\\s*[\"|']?(?P&lt;view&gt;[^'\"]+)[\"|']?\\),\nString:     (r'^urls/', 'urls.views.urls'),\nDictionary: {u'pattern': u'^new_urls_pattern/', u'type': u'view', u'view': u'urls.views.urls'}\nOutput:     (r'^new_urls_patterns/', 'urls.views.urls'),\n\n================= Incorrect Output ========================\n\nExpression: \\s*(?:url)?\\(r?[\"|'](?P&lt;pattern&gt;[^'\"]+)[\"|'],\\s*[\"|']?(?P&lt;view&gt;[^'\"]+)[\"|']?\\),\nString:     (r'^urls/', 'urls'),\nDictionary: {u'pattern': u'^new_urls_pattern/', u'type': u'view', u'view': u'urlsxyz'}\nIncorrect Output:     (r'^urlsxyz/', 'urlsxyz'),\nCorrect Output:     (r'^urls/', 'urlsxyz'),\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/W9p5L.gif\" alt=\"screenshot of djangogui\"></p>\n"},{"tags":["django","django-endless-pagination"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13165486,"title":"Django Endless Pagination - Showing Current Number of Results (not pages)","body":"<p>I am using django's endless pagination for search results and I want to create a message at the top simply stating, for example:</p>\n\n<p><code>showing 20 results of 124</code></p>\n\n<p>Or even better:</p>\n\n<p><code>showing results 20 to 40 of 124</code></p>\n\n<p>I do not see any way to get the current number of results in the <a href=\"http://django-endless-pagination.readthedocs.org/en/latest/templatetags_reference.html#paginate\" rel=\"nofollow\">endless pagination documentation</a>. How would you do this?</p>\n"},{"tags":["django","get","reverse"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":668,"score":1,"question_id":9585491,"title":"How do i pass GET parameters using django urlresolvers reverse","body":"<p>i am using django 1.2 and going from one view to another using the urlresolvers reverse method.</p>\n\n<pre><code>url = reverse(viewOne)\n</code></pre>\n\n<p>and i want to pass a get parameter, for example </p>\n\n<blockquote>\n  <p>name = 'joe'</p>\n</blockquote>\n\n<p>so that in the viewOne if i do </p>\n\n<pre><code>def viewOne(request):\n    request.GET['name']\n</code></pre>\n\n<p>i will get</p>\n\n<pre><code>joe\n</code></pre>\n\n<p>how do i do that ? </p>\n"},{"tags":["sql","django","oracle","unit-testing","django-testing"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13162771,"title":"django how to see sql query when running tests?","body":"<p>One of my django application unit test fails with</p>\n\n<pre><code>DatabaseError: ORA-00942: table or view does not exist\n</code></pre>\n\n<p>I would like to see actual SQL query that caused this error. Do you know how to achieve that?</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13161876,"title":"How to display Django index page on app","body":"<p>I'm doing the Django tutorial, part 3: <a href=\"https://docs.djangoproject.com/en/dev/intro/tutorial03/\" rel=\"nofollow\">https://docs.djangoproject.com/en/dev/intro/tutorial03/</a></p>\n\n<p>I currently have this text in my views.py:</p>\n\n<pre><code>from django.http import HttpResponse\n\nfrom polls.models import Poll\n\ndef index(request):\n    latest_poll_list = Poll.objects.order_by('-pub_date')[:5]\n    output = ', '.join([p.question for p in latest_poll_list])\n    return HttpResponse(output)\n</code></pre>\n\n<p>This works when i go to: \n<code>http://localhost:8000/polls/</code>, it displays the records</p>\n\n<p>The problem is when I take the next step and change the views.py to:</p>\n\n<pre><code>from django.shortcuts import render\n\nfrom polls.models import Poll\n\ndef index(request):\n    latest_poll_list = Poll.objects.all().order_by('-pub_date')[:5]\n    context = {'latest_poll_list': latest_poll_list}\n    return render(request, 'polls/index.html', context)\n</code></pre>\n\n<p>From <code>http://localhost:8000/polls/</code> it shows the following error:\nTemplateDoesNotExist at /polls/\nFrom <code>http://localhost:8000/polls/index.html</code> it shows this error:\nPage not found (404)</p>\n\n<p>I have my mysite/urls.py set to:</p>\n\n<pre><code>urlpatterns = patterns('',\n    url(r'^polls/', include('polls.urls')),\n    url(r'^admin/', include(admin.site.urls)),\n)\n</code></pre>\n\n<p>I have my poll/views.py set to:</p>\n\n<pre><code>urlpatterns = patterns('',\n    url(r'^$', views.index, name='index'),\n</code></pre>\n\n<p>I have my TEMPLATE_DIRS set to:</p>\n\n<pre><code>'/path/to/mysite/templates'\n</code></pre>\n\n<p>Why won't the page load with the new code?</p>\n"},{"tags":["django","heroku"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13061444,"title":"Error H13 on Heroku when uploading images to Django admin with Gunicorn","body":"<p>I'm using the Django admin interface to upload images. It had previously worked decently but now gives me Application Errors (H13) when uploading images of only around 1 MB.</p>\n\n<p>Heroku Logs:</p>\n\n<pre><code>2012-10-25T04:00:06+00:00 app[web.1]: 2012-10-25 04:00:06 [2] [CRITICAL] WORKER TIMEOUT (pid:13)\n2012-10-25T04:00:06+00:00 app[web.1]: 2012-10-25 04:00:06 [2] [CRITICAL] WORKER TIMEOUT (pid:13)\n2012-10-25T04:00:06+00:00 heroku[router]: Error H13 (Connection closed without response) -&gt; POST www.website.com/admin/whatever/ dyno=web.1 queue= wait= service= status=503 bytes=\n2012-10-25T04:00:06+00:00 app[web.1]: 2012-10-25 04:00:06 [68] [INFO] Booting worker with pid: 68\n</code></pre>\n\n<p>Procfile:</p>\n\n<pre><code>web: gunicorn myapplication.wsgi -b 0.0.0.0:$PORT -w 10\n</code></pre>\n\n<p>Settings:</p>\n\n<pre><code>STATICFILES_STORAGE = DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'\n</code></pre>\n\n<p>Any idea what's going on?</p>\n"},{"tags":["django","django-imagefield","django-multi-db"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13162288,"title":"Passing ImageField between 2 django projects","body":"<p>I have 2 django projects which have some common tables.</p>\n\n<p>to be able to access one of these tables from one of the projects, I'm using database routing => Problem solved for the database communication.</p>\n\n<p>But I couldn't figure out how to transfer files between projects.</p>\n\n<p>I tried this :</p>\n\n<pre><code>photo = ContentFile(default_db_object.photo.file.read())\ndistant_db_object.photo.save(\"test_name.jpeg\", photo, save=True)\n# Tried to save just in case, even if it's already done above\ndistant_db_object.save()\n</code></pre>\n\n<p>I also tried the second line of this code with :</p>\n\n<pre><code>distant_db_object.photo.save(\"test_name.jpeg\", default_db_object.photo, save=True)\n</code></pre>\n\n<ul>\n<li>default_db_object : is model object from my current project</li>\n<li>distant_db_object : is model object from my <em>distant</em> project</li>\n</ul>\n\n<p>I think I still didn't understood the logic beyond the whole File storage logic in django (yes I've read the docs).</p>\n"},{"tags":["python","django","django-models","django-templates","django-admin"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":98,"score":2,"question_id":13126162,"title":"Django Admin - Dynamic value for a list of tabular inline foreign key fields","body":"<p>I have three models:</p>\n\n<pre><code>class Foo (models.Model):\n    date = models.DateField(default = date.today)\n\nclass Bar (models.Model):\n    foo = models.ForeignKey(Foo)\n    another = models.ForeignKey(AnotherClass) #this class is important\n    amount = models.IntegerField(default=0)\n\nclass AnotherClass (models.Model):\n    name = models.CharField()\n</code></pre>\n\n<p>Now I want to add/change instances of Foo+Bar's in a tabular inline way. The key is that each Bar instance is the reference of an amount of AnotherClass instance, and each Foo instance must have reference of all the AnotherClass in the system.</p>\n\n<p>So if I have a list of AnotherClass's instances</p>\n\n<pre><code>AnotherClass1\nAnotherClass2\nAnotherClass3\nAnotherClass4\n</code></pre>\n\n<p>The Foo add/change admin page should be something like this</p>\n\n<pre><code>Add Foo!\n--------------------------------------------\n\ndate = (datePicker)\n\nPretty Bar TabularInline\n--------------------------------------------\nAnotherClass1.name        amount = intPicker\nAnotherClass2.name        amount = intPicker\nAnotherClass3.name        amount = intPicker\nAnotherClass4.name        amount = intPicker\n</code></pre>\n\n<p>where AnotherClassX.name is not editable, shows only the name of the AnotherClass instances.</p>\n\n<p>Is there any easy way to do this?</p>\n"},{"tags":["django","authorize.net"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":710,"score":2,"question_id":6056796,"title":"The referenced transaction does not meet the criteria for issuing a credit","body":"<p>I try to make a refund transaction via my django app using code:</p>\n\n<pre><code>class Handler():\n\n    def __init__(self):\n        self.initial_values = {\n            'x_login': settings.API_LOGIN,\n            'x_tran_key': settings.TRANS_KEY,\n            'x_delim_data': 'TRUE',\n            'x_relay_response': 'FALSE',\n            'x_version': '3.1',\n        }\n\n    def send_AIM_credit(self, amount):\n        self.amount = amount\n        self.additional_values = {\n            'x_type': 'CREDIT',\n            'x_card_num': '370000000000002',\n            'x_amount': '123',\n            'x_description': \"Refund\",\n            'x_trans_id': 'someid'\n        }\n        result = self.__send_AIM_request() \n        if result[0] in ['3', '2']:\n            raise Exception(\"ERROR %s\" % result[2], result[3])\n        return result \n\n    def __send_AIM_request(self):\n        self.initial_values.update(self.additional_values)\n        logging.info(self.initial_values)\n        params_string = urllib.urlencode(self.initial_values)\n        response = urllib2.urlopen(settings.AIM_URL, params_string).read()\n        response_list = response.split(',')\n        logging.info(response_list)\n        return response_list\n</code></pre>\n\n<p>I am sure that transaction which I want to refund is allowed to do that because i have refund option in authorize.net website for it. Why I cannot do that in my app? maybe something is missing?</p>\n\n<pre><code>AIM_URL = 'https://test.authorize.net/gateway/transact.dll'\n</code></pre>\n\n<p>Moreover in documentation i read that I don`t need full card number for credit transaction, only last 4 digits. But when I use only last 4 digits I get response that transaction cannot be found</p>\n"},{"tags":["python","django","validation","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13161029,"title":"Get error message with custom validation Class on Tastypie","body":"<p>I'm trying to get the error message for a field using a custom validation class on tastypie.</p>\n\n<p>I used the code on Tastipye Documentation website (AwesomeValidation class) :  <a href=\"http://django-tastypie.readthedocs.org/en/latest/validation.html#implementing-your-own-validation\" rel=\"nofollow\">http://django-tastypie.readthedocs.org/en/latest/validation.html#implementing-your-own-validation</a></p>\n\n<p>Here's my ressource class : </p>\n\n<pre><code>class UserResource(ModelResource):                                                                                                                                             \nclass Meta:                                                                                                                                                                \n    queryset = User.objects.all()                                                                                                                                          \n    resource_name = 'user'                                                                                                                                                 \n    authorization = Authorization()                                                                                                                                        \n    validation = AwesomeValidation()\n</code></pre>\n\n<p>I use slumber to try a POST request : </p>\n\n<pre><code>import slumber\napi = slumber.API(\"127.0.0.1\", auth=(\"auth\", \"auth\"))\napi.user.post({\"username\": \"test\", \"password\": \"test\", \"password_confirm\": \"test\", \"email\": \"test@example.com\"})\n</code></pre>\n\n<p>I get an Error 400, but no error message.</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/local/lib/python2.7/dist-packages/slumber/__init__.py\", line 125, in post\n    resp = self._request(\"POST\", data=s.dumps(data), params=kwargs)\n  File \"/usr/local/lib/python2.7/dist-packages/slumber/__init__.py\", line 104, in _request\n    raise exceptions.HttpClientError(\"Client Error %s: %s\" % (resp.status_code, url), response=resp, content=resp.content)\nslumber.exceptions.HttpClientError: Client Error 400: http://127.0.0.1:8000/api/v1/user/\n</code></pre>\n\n<p>Is there anything to do with the custom validation class to get the error message ? </p>\n"},{"tags":["django","testing","architecture","selenium"],"answer_count":2,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":334,"score":6,"question_id":2894608,"title":"Selenium vs old-school POST/GET based tests","body":"<p>We have a considerable code base with relatively high test coverage for pages/forms, all via vanilla POST/GET.</p>\n\n<p>Now, we are find ourselves moving more into the 'ajaxy' space, and it's not quite possible to test with GET/POST complete scenarios like user registration, or an item creation, as they involve lots of JavaScript/Ajax calls.</p>\n\n<p>While things like that are the most likely candidates for testing with Selenium, I wonder should we adopt the Selenium testing across the board, leaving the old-school POST/GET tests altogether?</p>\n\n<p>Advantages of Selenium adoption seems to be too good - ability to run pretty much same GET/POST tests but across the range of browsers.</p>\n\n<p>Or am I missing something in my pursuit of cool and trendy stuff and ditching the old proven POST/GET tests?</p>\n"},{"tags":["android","iphone","ios","django","django-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13150521,"title":"Authenticating an Android or iPhone app to a Django backend","body":"<p>I have a webapp that is built with Django.  It works fine for use on the web, but now I am building a Android app.  I am not sure how to go about authenticating the Android app the the Django backend, securely.  </p>\n\n<p>This webapp has user profiles.  A user can register/login/logout using the web interface.  The relevant part of <code>urls.py</code> looks like this:</p>\n\n<pre><code>urlpatterns += patterns('',\n  url(r'^accounts/login/$', 'django.contrib.auth.views.login', name='login'),\n  url(r'^accounts/logout/$', 'django.contrib.auth.views.logout', name=\"logout\"),\n)\n</code></pre>\n\n<p>My understanding is that after the user successfully completes <code>accounts/login</code> there is some cookie deposited on the browser which is used for the rest of the connections.  Is this correct?</p>\n\n<p>When on an Android device, given a username and password, what is the proper or best way authenticate the user to the Django backend?  Do I need to get the cookie like in the browser or is there a better way?</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13150980,"title":"How do debug Django validation, can't find related object","body":"<p>I have the Error:</p>\n\n<pre><code>Error: One or more models did not validate:\nauth.permission: 'content_type' has a relation with model &lt;class 'django.contrib.contenttypes.models.ContentType'&gt;, which has either not been installed or is abstract.\n</code></pre>\n\n<p>I don't see anywhere in the package a reference on the django.contrib.contenttypes.models.ContentType. </p>\n\n<p>Even with all models inside a comma i get this error.</p>\n\n<p>I reference user multiple times, but why a content_type error then?</p>\n\n<p>Django==1.4.2</p>\n\n<p>Edit: Because people think my module is named auth, here are the positions where it exists in the whole project:</p>\n\n<p>models.py</p>\n\n<pre><code>2: from django.contrib.auth.models import User\n</code></pre>\n\n<p>settings.py</p>\n\n<pre><code>94: 'django.contrib.auth.middleware.AuthenticationMiddleware',\n112: 'django.contrib.auth',\n</code></pre>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13158004,"title":"Django / Userena Allow Signup if on Roster","body":"<p>I was wondering the best way to approach this. I am using Userena as a base for my project. I want to load a team roster on to the database or keep a text file of the roster and  before the user signs up, the website should check if the user is on the roster or not. If not, then they will not be able to sign up.</p>\n"},{"tags":["python","django","dnspython"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13160419,"title":"Python 'Module' object has no Attribute Error - Imported module","body":"<p>I am having a problem with importing and using the dnspython or easyzone modules for Python in my Django project. I have also tried this script outside of DJango with the same issue so I am pretty sure the issue is unrelated to the framework.</p>\n\n<p>I have a simple script that will open and parse zone file for the dns records inside. I have no issues importing the easyzone or dns modules, but when I try to access any of the methods inside I get this error:</p>\n\n<pre><code>Traceback (most recent call last):\n    File \"fabfile.py\", line 6, in &lt;module&gt;\n    z = easyzone.zone_from_file('example.com', '/var/namedb/example.com')\nAttributeError: 'module' object has no attribute 'zone_from_file'\n</code></pre>\n\n<p>I have installed dnspython and easy install via easy_install with no issues. I can import the modules at the top of my script without error, it even shows me the path to the library in the IDE helper. But when trying to access any methods within easyzone or dns I get an error, also the code completion on the IDE will not list any methods either which leads me to believe it is a path issue or how I am importing them.</p>\n\n<p>Here is my code where it fails:</p>\n\n<pre><code>import os\nimport csv\nimport easyzone\nimport dns\n\nz = easyzone.zone_from_file('example.com', '/var/namedb/example.com')\n</code></pre>\n\n<p>Looking inside the module in the code I can clearly see these methods exist, what am I doing wrong to not be able to access them?</p>\n"},{"tags":["python","django","eclipse","pinax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13160002,"title":"Pinax run it under win7 with eclipse?","body":"<p>I have installed pinax, and created a project with the <code>pinax-admin</code></p>\n\n<p>then I copied the project into an empty django-eclipse project and wanted to run synchdb form the eclipse console but I only get:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\marcus\\Desktop\\wseclipse\\testpinax\\testsite\\manage.py\", line 20, in &lt;module&gt;\n    execute_from_command_line()\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line 443, in execute_from_command_line\n    utility.execute()\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line 382, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line 261, in fetch_command\n    klass = load_command_class(app_name, subcommand)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line 69, in load_command_class\n    module = import_module('%s.management.commands.%s' % (app_name, name))\n  File \"C:\\Python27\\lib\\site-packages\\django\\utils\\importlib.py\", line 35, in import_module\n    __import__(name)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\commands\\syncdb.py\", line 8, in &lt;module&gt;\n    from django.core.management.sql import custom_sql_for_model, emit_post_sync_signal\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\sql.py\", line 6, in &lt;module&gt;\n    from django.db import models\n  File \"C:\\Python27\\lib\\site-packages\\django\\db\\__init__.py\", line 11, in &lt;module&gt;\n    if DEFAULT_DB_ALIAS not in settings.DATABASES:\n  File \"C:\\Python27\\lib\\site-packages\\django\\utils\\functional.py\", line 184, in inner\n    self._setup()\n  File \"C:\\Python27\\lib\\site-packages\\django\\conf\\__init__.py\", line 42, in _setup\n    self._wrapped = Settings(settings_module)\n  File \"C:\\Python27\\lib\\site-packages\\django\\conf\\__init__.py\", line 95, in __init__\n    raise ImportError(\"Could not import settings '%s' (Is it on sys.path?): %s\" % (self.SETTINGS_MODULE, e))\nImportError: Could not import settings 'testpinax.settings' (Is it on sys.path?): No module named testpinax.settings\nFinished \"manage.py syncdb\" execution.\n</code></pre>\n\n<p>I have the tables created in my postgresql db, but when I want to run the project I get:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\marcus\\Desktop\\wseclipse\\testpinax\\testsite\\manage.py\", line 20, in &lt;module&gt;\n    execute_from_command_line()\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line 443, in execute_from_command_line\n    utility.execute()\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line 382, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line 261, in fetch_command\n    klass = load_command_class(app_name, subcommand)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line 69, in load_command_class\n    module = import_module('%s.management.commands.%s' % (app_name, name))\n  File \"C:\\Python27\\lib\\site-packages\\django\\utils\\importlib.py\", line 35, in import_module\n    __import__(name)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\commands\\runserver.py\", line 8, in &lt;module&gt;\n    from django.core.servers.basehttp import AdminMediaHandler, run, WSGIServerException, get_internal_wsgi_application\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\servers\\basehttp.py\", line 26, in &lt;module&gt;\n    from django.views import static\n  File \"C:\\Python27\\lib\\site-packages\\django\\views\\static.py\", line 95, in &lt;module&gt;\n    template_translatable = ugettext_noop(u\"Index of %(directory)s\")\n  File \"C:\\Python27\\lib\\site-packages\\django\\utils\\translation\\__init__.py\", line 75, in gettext_noop\n    return _trans.gettext_noop(message)\n  File \"C:\\Python27\\lib\\site-packages\\django\\utils\\translation\\__init__.py\", line 48, in __getattr__\n    if settings.USE_I18N:\n  File \"C:\\Python27\\lib\\site-packages\\django\\utils\\functional.py\", line 184, in inner\n    self._setup()\n  File \"C:\\Python27\\lib\\site-packages\\django\\conf\\__init__.py\", line 42, in _setup\n    self._wrapped = Settings(settings_module)\n  File \"C:\\Python27\\lib\\site-packages\\django\\conf\\__init__.py\", line 95, in __init__\n    raise ImportError(\"Could not import settings '%s' (Is it on sys.path?): %s\" % (self.SETTINGS_MODULE, e))\n**ImportError: Could not import settings 'testpinax.settings' (Is it on sys.path?): No module named testpinax.settings**\n</code></pre>\n\n<p>BUT when I look at my project you can see that the settings.py file is there:</p>\n\n<p><img src=\"http://i.stack.imgur.com/thYDQ.png\" alt=\"enter image description here\"></p>\n\n<p>What am I doing wrong?</p>\n\n<p>PS.: I am running win7, eclipse indigo and postgresl 1.16</p>\n\n<p><strong>UPDATE</strong></p>\n\n<pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; print sys.path\n['', 'C:\\\\Python27\\\\lib\\\\site-packages\\\\setuptools-0.6c11-py2.7.egg', 'C:\\\\Pytho\nn27\\\\lib\\\\site-packages\\\\pip-1.2.1-py2.7.egg', 'C:\\\\Windows\\\\system32\\\\python27.\nzip', 'C:\\\\Python27\\\\DLLs', 'C:\\\\Python27\\\\lib', 'C:\\\\Python27\\\\lib\\\\plat-win',\n'C:\\\\Python27\\\\lib\\\\lib-tk', 'C:\\\\Python27', 'C:\\\\Python27\\\\lib\\\\site-packages']\n</code></pre>\n"},{"tags":["django","django-admin","thumbnails","imagefield"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":138,"score":0,"question_id":11611054,"title":"Django Admin showing thumbnail of foreign key's imagefield in inline form","body":"<p>I have a simple structure, with a Product model, and AppMedia model and a ProductMedia join table.</p>\n\n<p>Product (has many) ProductMedia</p>\n\n<p>ProductMedia (has one) AppMedia</p>\n\n<p>What I would really like is to see the thumbnail for AppMedia's media field in an inline form in Product.</p>\n\n<p>e.g. edit Product in Django admin, shows a StackedInline form. This contains (at present) a drop down (select) of all AppMedia.</p>\n\n<p>What I need is the thumbnail.</p>\n\n<p>Any help appreciated.</p>\n\n<p>I am certain this isn't difficult, but I'm struggling. It's quite straight forward to put a thumbnail in for the AppMedia form (which is where the media ImageField resides), but not for the ProductMedia form which is using AppMedia as a ForeignKey.</p>\n\n<p>Basic Models...</p>\n\n<pre><code>class Product(models.Model):\n    name             = models.CharField(max_length=100)\n\nclass AppMedia(models.Model):\n    media           = models.ImageField(upload_to=appmedia_upload_to) #appmedia_upload_to defined elsewhere)\n\nclass ProductMedia(models.Model):\n    title           = models.CharField(max_length=150)\n    media           = models.ForeignKey(AppMedia)\n    media_order     = models.IntegerField(default=0)\n    product         = models.ForeignKey(Product)\n</code></pre>\n\n<p>The AppMedia is shared in this way to stop multiple uploads of the same file and also to store extra meta-data (not displayed here) with the image.</p>\n"},{"tags":["python","django","django-admin"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1593,"score":4,"question_id":1721037,"title":"Remove \"add another\" in Django admin screen","body":"<p>Whenever I'm editing object A with a foreign key to object B, a plus option \"add another\" is available next to the choices of object B. How do I remove that option?</p>\n\n<p>I configured a user without rights to add object B. The plus sign is still available, but when I click on it, it says \"Permission denied\". It's ugly.</p>\n\n<p>I'm using Django 1.0.2</p>\n"},{"tags":["django","http","redirect","amazon-s3","http-headers"],"answer_count":0,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":67,"score":4,"question_id":13159748,"title":"Do not propagate headers on HTTP redirects","body":"<p>I have files hosted on Amazon S3, and I'd like to download them after a treatment in my app. This app view requires the HTTP Authorization header to proceed. Here is the process:</p>\n\n<ol>\n<li>Query view <code>/file/xxx</code> with the required <code>Authorization</code> request header</li>\n<li>If the app access is granted, does some treatment</li>\n<li>Generate a signed S3 url, and redirect to it</li>\n</ol>\n\n<p>The fact is that the request header is also propagated on the redirect, and is in conflict with Amazon's S3 signature, I have the following error message:</p>\n\n<blockquote>\n  <p>Either the Signature query string parameter or the Authorization header should be specified, not both</p>\n</blockquote>\n\n<p>So, is there a way to not propagate the <code>Authorization</code> header to S3 ?</p>\n\n<p>Note that I have tested all <code>3xx</code> HTTP codes. Thanks in advance.</p>\n"},{"tags":["python","django","forms","dynamic"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":13152105,"title":"How to generate dynamic MultipleChoiceField options on page2 according to choice on page1?","body":"<p>I am writing 2 pages. What I want to do is, according to the data selected in page1, generate a form with MultipleChoiceField having options calculated by page1 result. Or to read according file is also fine, just to get the options for MultipleChoiceField in page2 form.</p>\n\n<p>I am using the form template, and in forms.py, in the form class in page2, </p>\n\n<pre><code>class FormPage2(forms.Form): \n    forms.MultipleChoiceField(label='sth to choose',choices=get_tochoose_choices())\n</code></pre>\n\n<p>the get_tochoose_choices() is reading some txt file to get the options.</p>\n\n<p>But when I load the first page,(I think python instantiate all forms no matter if it's on this page or not together) this file doesn't exist, which means the FormPage2 cannot be instantiated. Even the file is there, it's not the uptodate one. </p>\n\n<p>Then what should I do? I am quite new to website design and hope someone could help...</p>\n"},{"tags":["python","django","session","cookies","session-cookies"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13158884,"title":"Django session sharing between projects","body":"<p>I have two projects which must share session between them. One project is in <code>domain.com</code>, second - <code>domain.com/app</code>. I setup <code>SESSION_COOKIE_NAME = 'pr1'</code> and <code>SESSION_COOKIE_DOMAIN = 'domain.com'</code> on each project. But my users must login twice.</p>\n\n<p>What I'm doing wrong?</p>\n\n<p>UPD. Projects are on same database.</p>\n"},{"tags":["django","worker","python-gearman"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":11984129,"title":"I can not use django-gearman-commands make the worker work all the time","body":"<p>I use django-gearman-commands to do some work like this document(<a href=\"http://pypi.python.org/pypi/django-gearman-commands/0.1\" rel=\"nofollow\">http://pypi.python.org/pypi/django-gearman-commands/0.1</a>) says.When I run the worker frist time ,it works well,but when I submit another job just like make a select query from DB,it can't work until I restart this worker,I found that the worker just can work well one time.\nWhen the worker can't work well ,it still can get value which I submit,but can't go on to do the work.\nI hope someone can help me .\nHere is my code:</p>\n\n<pre><code>@property\ndef task_name(self):\n    return 'sync'\n\ndef do_job(self, id):\n    post = Post.objects.get(pk = id)\n    if post.photo is None and post.video is None:\n        try:\n            self.sync_text_to_facebook(post)\n        except :\n            print 'sync text error'\n    else:\n        try:\n            self.sync_photo_to_facebook(post)\n        except :\n            print 'sync photo error'\n</code></pre>\n\n<p>When I frist submit a job,it works well,and then I submit another job ,it says can't find any post.</p>\n"},{"tags":["django","command"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13157809,"title":"Writing a custom management command with args and options - explanation of fields needed","body":"<p>In my django app I am writing a custom management command which will create an instance of an object based on the args passed and have the option of saving it to the database based on whether an option <code>--save</code> is passed or not.</p>\n\n<p>I've got a lot of help on this from the <a href=\"https://docs.djangoproject.com/en/1.4/howto/custom-management-commands/\" rel=\"nofollow\">django documentation</a> itself. Have also got important pointers from <a href=\"http://stackoverflow.com/questions/10568864/two-arguments-in-django-admin-custom-command\">here</a> about how to pass multiple arguments and <a href=\"http://stackoverflow.com/questions/4208006/how-does-one-use-django-custom-management-command-option\">here</a> about how to have options.</p>\n\n<pre><code>from optparse import make_option\n\nclass Command(BaseCommand):\n  option_list = BaseCommand.option_list + (\n    make_option('--delete',\n        action='store_true',\n        dest='delete',\n        default=False,\n        help='Delete poll instead of closing it'),\n    )\n\n  def handle(self, *args, **options):\n    # ...\n    if options['delete']:\n        poll.delete()\n    # ...\n</code></pre>\n\n<p>However I am not able to find a detailed explanation of the fields in make_option. For example <a href=\"http://nullege.com/codes/search/optparse.make_option\" rel=\"nofollow\">optparse.make_option</a> lists </p>\n\n<pre><code>Instance attributes:\n_short_opts : [string]\n_long_opts : [string]\n\naction : string\ntype : string\ndest : string\ndefault : any\nnargs : int\nconst : any\nchoices : [string]\ncallback : function\ncallback_args : (any*)\ncallback_kwargs : { string : any }\nhelp : string\nmetavar : string\n</code></pre>\n\n<p>In this <code>help</code> is self explanatory and I figured out what <code>dest</code> would mean, but I'm not clear what <code>action='store_true'</code> means. In fact it'd be great if someone could give me a short description of what all the arguments to <code>make_option</code> mean...</p>\n\n<p>Thanks a lot</p>\n"},{"tags":["django","django-templates","django-cms","django-tagging"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13108239,"title":"Django CMS - Call a cmsplugin in a template tag","body":"<p><strong>My problem</strong></p>\n\n<p>With Django CMS 2.3.3, when creating a Page I use cmsplugin_picture* next to a couple of other cmsplugins. In my cms template, instead of doing:</p>\n\n<pre><code>{% placholder \"content\" %}  //calling the Django Page including all plugins...\n</code></pre>\n\n<p>I would like to call each cmsplugin seperately, but how would I do that?\nI looked at Django tag template (filters) <a href=\"https://docs.djangoproject.com/en/1.4/topics/templates/\" rel=\"nofollow\">here</a> and also studied Django CMS template tags <a href=\"http://docs.django-cms.org/en/latest/advanced/templatetags.html\" rel=\"nofollow\">here</a>, but neither seem to suggest that possibility. I have to say I am a beginner so I might not have connected the dots...</p>\n\n<p><strong>What I try to achieve:</strong></p>\n\n<p>In my template I have a IMG tag (outside of the <code>{% placeholder \"content\" %}</code> tag) which I want to populate with an image url that I define in my Page/cmsplugin_picture. So I am looking for a placeholder tag that allows me to grab that image. In my wildest dreams I would name it:</p>\n\n<pre><code>{% show_placeholder \"content\" request.current_page.get_cmsplugin_picture %}\n</code></pre>\n\n<p><strong>Obviously the above doesn't work, but does something like this exist?</strong></p>\n\n<p>**I have also tried cmsplugin_filer, but to me it isn't necessarely more beneficial to fix this particular problem.*</p>\n\n<p>EDIT:\nWhat I mean by Page/cmsplugin_picture -> In a Django CMS Page you can select between your installed cmsplugins to add to a Page. In my case I select cmsplugin_picture and upload an image (within that plugin). This image I want to 'call' in my Django Template. So it is a not a static url, but dynamic. </p>\n"},{"tags":["android","django","file-upload","httpclient","multipart"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":5947,"score":1,"question_id":2607020,"title":"Help constructing a POST request with MultipartEntity (newbie question)","body":"<p>I'd like to construct a multipart request, with the following parameters: name (string), email (string), and fileupload (file). I'm using the Java code below (working in Android). </p>\n\n<p>The httppost.getRequestLine() prints </p>\n\n<pre><code>POST http://www.myurl.com/upload HTTP/1.1\n</code></pre>\n\n<p>So everything looks good on the client site, but my server (Django/Apache) reads it as a GET request, with no GET parameters - <code>request.method</code> produces 'GET', <code>request.GET.items()</code> produces an empty dictionary.</p>\n\n<p>What am I doing wrong? I don't know actually how to set the multipart parameters correctly - am using guesswork - so it's possible that that's the problem. </p>\n\n<pre><code>public void SendMultipartFile() {\n  Log.e(LOG_TAG, \"SendMultipartFile\");\n  DefaultHttpClient httpclient = new DefaultHttpClient();\n  HttpPost httppost = new HttpPost(\"http://www.myurl.com/upload\");\n  File file = new File(Environment.getExternalStorageDirectory(),\n  \"video.3gp\");\n  Log.e(LOG_TAG, \"setting up multipart entity\");\n  MultipartEntity mpEntity = new MultipartEntity();\n  ContentBody cbFile = new FileBody(file);\n  mpEntity.addPart(\"fileupload\", cbFile);\n  Log.i(\"SendLargeFile\", \"file length = \" + file.length());\n  try {\n   mpEntity.addPart(\"name\", new StringBody(name));\n   mpEntity.addPart(\"email\", new StringBody(email));;\n  } catch (UnsupportedEncodingException e1) {\n   // TODO Auto-generated catch block\n   Log.e(LOG_TAG, \"UnsupportedEncodingException\");\n   e1.printStackTrace();\n  }\n  httppost.setEntity(mpEntity);\n  Log.e(LOG_TAG, \"executing request \" + httppost.getRequestLine());\n  HttpResponse response;\n  try {\n   Log.e(LOG_TAG, \"about to execute\");\n   response = httpclient.execute(httppost);\n   Log.e(LOG_TAG, \"executed\");\n   HttpEntity resEntity = response.getEntity();\n   Log.e(LOG_TAG, response.getStatusLine().toString());\n   if (resEntity != null) {\n    System.out.println(EntityUtils.toString(resEntity));\n   }\n   if (resEntity != null) {\n    resEntity.consumeContent();\n   }\n  } catch (ClientProtocolException e) {\n   // TODO Auto-generated catch block\n   e.printStackTrace();\n  } catch (IOException e) {\n   // TODO Auto-generated catch block\n   e.printStackTrace();\n  }\n }\n</code></pre>\n"},{"tags":["django","google-chrome","django-templates","google-chrome-devtools"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13157659,"title":"how can I use IntelliJ live edit with django templates?","body":"<p>I like the IntelliJ 'live edit' feature but it doesn't work for Django templates because obviously they are just a bunch of variables and its not finding the CSS files. Is there some way of working 'live' on Django templates? (or any other templating system for that matter).</p>\n\n<p>Similarly I tried to use Chrome devtools autosave but it also didn't work, presumably it wants me to open an html file locally (i.e. file://).</p>\n\n<p>And using chrome inspector to edit stuff is a pain because you have to copy and paste your changes - unless I'm missing something?</p>\n"},{"tags":["python","django","search","django-haystack","django-cms"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":65,"score":1,"question_id":10727040,"title":"django cmsplugin-blog search indexes for haystack with whoose","body":"<p>I want to add a search function for a simple django cms homepage with cmsplugin-blog.</p>\n\n<p>But there are only search indexes for use with django-cms-facetsearch. But facetsearch needs solr, and I don`t want to run a solr server only for a few cms-pages and blogentries. I just want to use haystack with whoosh, because it is really simple to configurate.</p>\n\n<p>Are there multilingual search indexes for cmsplugin-blog models? Or do I have to write them myself?</p>\n\n<p>Thank you for helping...</p>\n"},{"tags":["django","file","ioerror"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13157364,"title":"Django production: [Errno 13] Permission denied:","body":"<p>In my Django app I have this kind of error: \"IOError: [Errno 13] Permission denied: 'file_name'\"</p>\n\n<p>This is my code:</p>\n\n<pre><code>def record_export():\n    for file_name, tab_name in tab:\n        if len(globals()[tab_name].objects.all()) &lt;&gt; 0:\n            f = open(file_name, 'wb')\n            writer = csv.writer(f, delimiter='|')\n            for record in globals()[tab_name].objects.values_list():\n                writer.writerow([unicode(s).encode(\"utf-8\") for s in record]) \n            f.close()\n</code></pre>\n\n<p>In development enviroment all it's ok. I think that I have the permission.\nIn production I have: \"IOError: [Errno 13] Permission denied: 'file_name'\"\nDo you know why?\nThanks for your help</p>\n"},{"tags":["python","django","unit-testing"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":13155796,"title":"how to test django project","body":"<p>I wrote some test case to test my django project, when I run them in jenkins it always create a <strong>default database</strong>, I want to test my project with my own database, how to do?</p>\n"},{"tags":["django","django-rest-framework"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":11898065,"title":"How to disable admin-style browsable interface of django-rest-framework?","body":"<p>I am using <a href=\"http://django-rest-framework.org/\" rel=\"nofollow\">django-rest-framework</a>. It provides an awesome Django admin style browsable self-documenting API. But anyone can visit those pages and use the interface to add data (POST). How can I disable it?</p>\n"},{"tags":["django","django-forms","django-file-upload"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":10294341,"title":"What is the correct way to simulate filedata for testing a form?","body":"<p>I'm trying to test a self written FormField AudioFileFormField, which checks if a file is an audiofile before storing it. For that i have overwritten the to_python method. Trying to test this FormField i ran into some difficulties.</p>\n\n<p>This is my TestCase so far:</p>\n\n<pre><code>from django import forms\nfrom django.core.files.uploadedfile import SimpleUploadedFile\nfrom django.test import TestCase\n\nclass TestAudioFileFormField(TestCase):\n    \"\"\" test the formfield to use for AudioFile Uploads \"\"\"\n\n    class TestForm(forms.Form):\n        audiofilefield = AudioFileFormField()\n\n\n    def setUp(self):\n\n        self.AUDIOFILE_TEST_ROOT = os.path.dirname(__file__) + '/data/'\n        self.files = audiofile_files\n\n\n    def test_to_python(self):\n        \"\"\" assign some files to a form and validate the form \"\"\"\n\n        f = file(self.AUDIOFILE_TEST_ROOT + self.files[0]) \n        file_data = {'audiofilefield':SimpleUploadedFile( self.files[0],f.read() )}\n        data = {}\n\n        form = self.TestForm(data,f)\n        form.is_valid()\n</code></pre>\n\n<p>The line form.is_valid() raises an AttributeError: 'file' object has no attribute 'get'</p>\n\n<p>When i insert a debug trace right before form.is_valid(), this is what i get in that interactive session:</p>\n\n<pre><code>ipdb&gt; form.is_valid()\nAttributeError: 'file' object has no attribute 'get'\nipdb&gt; suf = file_data['audiofilefield']\nipdb&gt; suf\n&lt;SimpleUploadedFile: invalid_format.mp3 (text/plain)&gt;\nipdb&gt; dir(suf)\n[lots of info here]\nipdb&gt; form.is_valid()\nTrue\n</code></pre>\n\n<p>What exactly did i change in the interactive session, so that the form validation is working? What would be the correct way to pass the file to SimpleUploadedFile to avoid the AttributeError?</p>\n"},{"tags":["django","view","filter","queryset"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13133707,"title":"Django Advanced Filtering","body":"<p>Can I filter a queryset based on a model field's choices?</p>\n\n<p>model:</p>\n\n<pre><code>COLORS = (\n    ('BLACK', 'black'),\n    ('RED', 'red'),\n    ('BLUE', 'blue'),\n    //etc..\n)\n\nclass Thing(Models.model):\n    color = models.CharField(max_length=5, choices=COLORS)\n</code></pre>\n\n<p>view:</p>\n\n<pre><code>def filter_by_color(request):\n    q = Thing.objects.filter(???) \n</code></pre>\n\n<p>Is there a way to filter <code>Thing</code> based on different color choices? Also, is there a way to write this dynamically, so that all color choices can respond to a single view?</p>\n\n<p>Thanks for any ideas!</p>\n"},{"tags":["django","django-models","count"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":27,"score":2,"question_id":13155440,"title":"Django: increment the counter of another model when an entry occurs","body":"<p>how can we increment the counter when an entry occurs in the comments Class???</p>\n\n<pre><code>class Status(models.Model):\n    status = models.CharField(max_length=140)\n    counter = models.IntegerField(default=0)\n\nclass Comments(models.Model):\n    status = models.ForeignKey(status)\n    comment = models.CharField(max_length=140)\n</code></pre>\n"},{"tags":["python","django","filter"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":13155571,"title":"filtering with django","body":"<p>in django how to use <code>objects.filter</code> with <code>val_min</code> <code>val_max</code> the results of a calculation in a function</p>\n\n<p>but not recorded in the database ?</p>\n\n<p>Is it possible ?</p>\n\n<p>example :</p>\n\n<pre><code>liste= Temperature.objects.filter(val_champ__icontains = val_TT, val_max__lte=val_max, val_min__gte=val_min).order_by('name') \n</code></pre>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13145282,"title":"Django app life cycle: standart hooks to handle start and reload?","body":"<p>I am trying to understand if there are standard means to handle the specific django application start (and reload). Currenly I would like to use it to start a parallel thread, but the question for me is more general: is this allowed or not allowed for some reason.</p>\n\n<p>For example, such handlers are a part of the application interface in case of Java Servlets and .Net web applications. Are they a part of the interface of a django application?</p>\n\n<p><strong>UPD</strong>\nIn this case I am just trying to implement a small proxy which keeps an open connection. I do understand that the interface I want would initially be a part of WSGI, but it is not, and I though that django might provide its own solution, since in most cases (in all except plain CGI) the application serves more than a single request and obviously does have a life cycle.</p>\n"},{"tags":["django","logging","permissions","lamson"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":12,"score":-2,"question_id":13155016,"title":"Django/Lamson directory write permissions","body":"<p>Using Django and Lamson (python mail server), I am trying to get Lamson to react to received emails.</p>\n\n<p>I have had some success hooking up Django to Lamson and getting the Lamson handler to call functionality from the Django app. However, I have a few questions as I am having trouble debugging.</p>\n\n<p>When Lamson invokes Django code, it does not seem that Django must be running. Is it right?\nFor debugging, I need logging. I tried using the logging module unsuccessfully so I tried writing to a file. </p>\n\n<p><strong>Here, something strange happens :</strong> Sometimes, it is able to create the file but leaves it empty despite the write instructions and other times, it does not even create the file. </p>\n\n<p>I suspect this has to do with the write permissions but it is weird that different behaviour is observed. Also, lamson.log shows my log messages. The Lamson server sits in the same directory as the Django app, in the Django project directory.</p>\n"},{"tags":["django","html5","apache","templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13154056,"title":"Template Inheritance In Apache Server","body":"<p>How can I inherit the templates in Apache server as same as we can do in Django framework?</p>\n\n<p>I want to inherit the some common tag's in all html files , by extending base.html.</p>\n"},{"tags":["django","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13148578,"title":"Django tastypie many to many relationship - hiding intermediate relationship in json output","body":"<p>I've just started using Tastypie and am trying to work out how to format the output as I would like (I'm only interested in GET methods).\nI have a quiz object which may have multiple questions, each question may be in multiple quizzes (hence the many to many, rather than one to many) - but when someone requests the quiz object via the API, I only want to return a (json) array of the questions, I don't want/need to display the intermediate relationship table data.</p>\n\n<p>Some code:</p>\n\n<p>Models.py:</p>\n\n<pre><code>class Question(models.Model):\n    owner = models.ForeignKey(User)\n    created_date = models.DateTimeField('date created',default=datetime.now)\n    lastupdated_date = models.DateTimeField('date updated',default=datetime.now)\n    title = models.CharField(max_length=500)   \n    def __unicode__(self):\n        return self.title\n\nclass Quiz(models.Model):\n    owner = models.ForeignKey(User)\n    created_date = models.DateTimeField('date created',default=datetime.now)\n    lastupdated_date = models.DateTimeField('date updated',default=datetime.now)\n    title = models.CharField(max_length=200)\n    description = models.TextField(blank=True)\n    props = models.TextField(blank=True)\n    questions = models.ManyToManyField(Question, through='QuizQuestion')\n\n    def __unicode__(self):\n        return self.title\n\n\nclass QuizQuestion(models.Model):\n    quiz = models.ForeignKey(Quiz)\n    question = models.ForeignKey(Question)\n    order = models.IntegerField(default=1)\n</code></pre>\n\n<p>and resources.py:</p>\n\n<pre><code>class QuizResource(ModelResource):\n    q = fields.ToManyField('mquiz.api.resources.QuizQuestionResource', 'quizquestion_set', related_name='quiz', full=True)\n    class Meta:\n        queryset = Quiz.objects.all()\n        allowed_methods = ['get']\n        fields = ['title', 'id']\n        resource_name = 'quiz'\n        include_resource_uri = False\n\nclass QuizQuestionResource(ModelResource):\n    question = fields.ToOneField('mquiz.api.resources.QuestionResource', 'question', full=True)\n    class Meta:\n        queryset = QuizQuestion.objects.all()\n        allowed_methods = ['get']\n        include_resource_uri = False\n\nclass QuestionResource(ModelResource): \n    class Meta:\n        queryset = Question.objects.all()\n        allowed_methods = ['get']\n        fields = ['title']\n        resource_name = 'question'\n        include_resource_uri = False\n</code></pre>\n\n<p>This functions well enough, but doesn't quite give the output I'd like. It gives me the output:</p>\n\n<pre><code>{\n  \"id\": \"1\",\n  \"q\": [\n    {\n      \"id\": \"1\",\n      \"order\": 1,\n      \"question\": {\n        \"title\": \"What is the capital of Latvia?\"\n      }\n    },\n    {\n      \"id\": \"2\",\n      \"order\": 2,\n      \"question\": {\n        \"title\": \"What is the capital of Ethiopia?\"\n      }\n    }\n  ],\n  \"title\": \"Capitals\"\n}\n</code></pre>\n\n<p>However, what I would really like is the output in this format, since I don't need to have all the intermediate table id/order fields showing:</p>\n\n<pre><code>{\n  \"id\": \"1\",\n  \"q\": [\n    {\n        \"title\": \"What is the capital of Latvia?\"\n    },\n    {\n        \"title\": \"What is the capital of Ethiopia?\"\n    }\n  ],\n  \"title\": \"Capitals\"\n}\n</code></pre>\n\n<p>Is there a way to achieve this? Any help/pointers much appreciated.</p>\n\n<p>UPDATE:\nUsing a custom serialiser like this seems to work:</p>\n\n<pre><code>class QuizJSONSerializer(Serializer):\n    json_indent = 2\n\n    def to_json(self, data, options=None):\n        options = options or {}\n        data = self.to_simple(data, options)\n        for question in data['q']:\n            del question['id']\n            del question['order']\n            for qkey, qvalue in question['question'].items():\n                question[qkey] = qvalue\n            del question['question']\n        return simplejson.dumps(data, cls=json.DjangoJSONEncoder,\n                sort_keys=True, ensure_ascii=False, indent=self.json_indent)\n</code></pre>\n\n<p>Sure there may be more generic way to code this - but works for now.</p>\n"},{"tags":["python","django","django-1.4","formwizard"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13149757,"title":"Django 1.4.2 FormWizard + inline formsets","body":"<p>I have a problem, there is a multi-step form, in the first step of the author fills your personal information on the second pass his education, in the third step, it should add a co-author of his work, co-authors can be from 1 to 20. this is solved (inline formsets)\nBut I do not know how to combine and FormWizard + inlineformsest</p>\n\n<p>I alone could make a wizard and tried to make one form here on this instruction (<a href=\"http://stellarchariot.com/blog/2011/02/dynamically-add-form-to-formset-using-javascript-and-django/\" rel=\"nofollow\">see here</a>)\nBut how to bring them into one, and have not found the solution.</p>\n\n<p>Another way my question in addition to the buttons (back and send) to add another button (add co-author), which will add another form of co-loaded.</p>\n\n<p>models.py</p>\n\n<pre><code>class Reg(models.Model):\n    event = models.ForeignKey(Event, verbose_name=u'Event')\n    #первыый автор\n    fam_author = models.CharField(max_length=200, verbose_name=u'author firstname' )\n    name_author = models.CharField(max_length=100, verbose_name=u'autor name' )\n\n    class Admin:\n        pass\n\n    def __unicode__(self):\n        return u'%s (%s)' % (self.fam_author, self.name_author)\n\nclass soautor(models.Model):\n    rabota = models.ForeignKey(Reg, blank=True, null=True, verbose_name=u'Work')\n    fam_sauthor = models.CharField(max_length=200, verbose_name=u'soname' )\n    name_sauthor = models.CharField(max_length=100, verbose_name=u'name' )\n</code></pre>\n\n<p>forms.py</p>\n\n<pre><code>class GenForm1(ModelForm):\n    class Meta:\n        model = reg\n\nclass GenForm2(ModelForm):\n    class Meta:\n        model = education\n\nclass GenForm31(ModelForm):\n    class Meta:\n        model = soautor\n        exclude = ('rabota',)\n</code></pre>\n\n<p>urls.py</p>\n\n<pre><code>(r'^$', ContactWizard.as_view([GenForm1, GenForms2, GenForm31])),\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>class ContactWizard(SessionWizardView):\n\n\n    def done(self, form_list, **kwargs):\n        do_something_with_the_form_data(form_list)\n        return HttpResponseRedirect('/page-to-redirect-to-when-done/')\n</code></pre>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":705,"score":0,"question_id":5375769,"title":"Attaching csv file to email in django","body":"<p>I need to create a  mail that should have a csv file as an attachment. How do I attach a csv file to a mail in django?</p>\n"},{"tags":["python","django"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13153341,"title":"How do you fix: NameError: name 'poll' is not defined in Django?","body":"<p>I am doing the Django tutorial, where I created a model, did syncdb, and started the python shell. However, when I run the code poll.objects.all(), it shows an error:</p>\n\n<pre><code>&gt;&gt;&gt; poll.objects.all()\nTraceback (most recent call last):\n  File \"&lt;console&gt;\", line 1, in &lt;module&gt;\nNameError: name 'poll' is not defined\n</code></pre>\n\n<p>No matter what I try the same error keeps coming:\n    NameError: name 'poll' is not defined</p>\n\n<p>I am trying to figure out how to resolve this so I can use the various db lookup functions. I have already imported the classes:</p>\n\n<blockquote>\n  <blockquote>\n    <blockquote>\n      <p>from polls.models import Poll, Choice</p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n<p>How do you fix this? </p>\n"},{"tags":["python","html","django","usercontrols","user-input"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13152236,"title":"User Permissions/Submit Forms in Django","body":"<p>Writing a simple Q&amp;A site that allows users to ask and answer each other's questions.</p>\n\n<p>I want to segment users to give them permissions, and I'm assuming the best way is to create groups. (Let me know if I'm wrong.) Would like to create a group and have every user that signs up automatically join a group. Then that user has can submit data into a CharField and upload an image if they want.</p>\n\n<pre><code>#models.py\nclass name(models.Model):\n    title      = models.CharField(max_length = 500)\n    image      = models.ImageField(upload_to = 'images')\n    pub_date   = models.DateTimeField(auto_now_add = True)\n    author     = models.ForeignKey(User) \n</code></pre>\n\n<p>Now assuming a user is already registered and currently signed in,</p>\n\n<pre><code>#urls.py\nurlpatterns = pattners(\n     url(r'^add/$', addQ)\n\n#views.py\ndef addQ(request): #I know I'm probably missing something in the view)\n    return render_to_response(\"add.html\")\n\n#add.html\n&lt;h1&gt;Add&lt;/h1&gt;\n&lt;form action = \"\" method = \"post\"&gt;{% csrf_token %}\n    &lt;label for = \"AddQ\"&gt; Add: &lt;/label&gt;\n    &lt;input type = \"text\" name = \"add\" value = \"\" id = \"add\"&gt;\n    &lt;label for = \"image1\"&gt; Image: &lt;/label&gt;\n    &lt;input type = \"image\" name = \"image1\" value = \"\" id = \"image1\"&gt;\n\n    &lt;input type = \"submit\" value = \"Add\" /&gt;\n</code></pre>\n\n<p>So what do I need to do to enable users to add a question to the model?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12703337,"title":"How to add comments in Eclipse with Django template plugin?","body":"<p>I am using Eclipse and I know that there are ways where I can multi select the lines and add the comments using some shortcut.</p>\n\n<p>I have used Eclipse for Symfony Twig template and I used <code>ctrl+shift + /</code> and it commented all the lines.</p>\n\n<p>But I am not able to find how to comment lines in Django template like:</p>\n\n<pre><code>{#  #}\n</code></pre>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12720410,"title":"How can I get the object just after saving in Django?","body":"<p>I am saving the new object using</p>\n\n<pre><code>    new_document = form.save(commit=False)\n    new_document.object_id = int(self.kwargs['pk'])\n    new_document.content_type = ContentType.objects.get_for_model(self.target_model)\n    # Set the document category\n    new_document.category = self.get_document_category()\n    new_document.save()\n</code></pre>\n\n<p>Now what is want to know is, after I save the object, how can I get the primary key of the object and other attributes?</p>\n"},{"tags":["python","html","django","url","static"],"answer_count":3,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13149791,"title":"Django Static URL not rendering images correctly","body":"<p>I'm writing a view that displays a set of images on a page.</p>\n\n<p>This is the model</p>\n\n<pre><code>#models.py\nclass Movie(models.Model):\n    title  = models.CharField(max_length = 500)\n    poster = models.ImageField(upload_to = 'qanda/static/movie_posters')\n\n#index.html\n    &lt;img src = \"{{ STATIC_URL }}movie_posters/{{ movie.poster }}\"&gt;&lt;/a&gt;\n</code></pre>\n\n<p>When I runserver, the image doesn't appear. The URL the image is trying to load is</p>\n\n<pre><code>http://127.0.0.1:8000/static/movie_posters/qanda/static/movie_posters/image.jpg\n</code></pre>\n\n<p>When the URL it should be trying to load is</p>\n\n<pre><code>http://127.0.0.1:8000/static/movie_posters/image.jpg\n</code></pre>\n\n<p>My assumption is that since movie.poster is located at 'qanda/static/movie_posters', when I render it on HTML, it is loading the Static URL (127.0.0:8000/static) and then the location 'qanda/static/movie_posters' at the end. How do I make the image render correctly?</p>\n"},{"tags":["python","django","website","internet"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13151652,"title":"Django foreign key object image in template","body":"<p>Ok I know a thousand people asked this but I have looked all over this site to no success(also google) here is my models.py</p>\n\n<pre><code>VENUE_IMAGE_PATH = os.path.join('images', 'venue_profiles/%Y/%m/%d')\n\n class Venue(models.Model):\n\n    .....................\n   name = models.CharField(max_length=100)\n   address = models.CharField(max_length=100)\n   city = models.CharField(max_length=100)\n   ...........................\n\nclass VenueImage(models.Model):\n  venue = models.ForeignKey(Venue, related_name=\"venue\")\n  image = models.ImageField(upload_to=VENUE_IMAGE_PATH, max_length=255)\n</code></pre>\n\n<p>Here is my views.py</p>\n\n<pre><code>def list(request):\n  venues = Venue.objects.all()\n  images=VenueImage.objects.all()\n\n return render_to_response('venues/list.html', {'venues':venues,'images':images}, \n  context_instance = RequestContext(request)) \n</code></pre>\n\n<p>here is my template</p>\n\n<pre><code>{% for v in venues %}\n\n&lt;a href='#'&gt;{{v.name}}&lt;/a&gt;\n&lt;a href=\"{% url edit v.id %}\" style=\"position:relative;left:10px;\"&gt;edit&lt;/a&gt;\n\n{% if images %}\n&lt;img class='venue_image' src='images/venue_profiles/2012/10/25/{{images.url}}' \n    alt=''&gt;\n    {% endif %}\n    {% endfor %}\n</code></pre>\n\n<p>Now I have tried <code>{{images.images.url}}</code> and <code>{{images.url}}</code>. <code>{{MEDIA_URL}}images/venue_profiles/%Y/%m/%d/{{image.url}}</code>.\nI also tried <code>{%for i in images %} {{i.url}} {% endfor %}</code>. \nI also tried without that <code>'images/venue_profiles/2012/10/25'</code> prefix and nothing seems to work. \nCan someone please help me see what I am doing wrong. </p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13145254,"title":"Django annotate count with a distinct field","body":"<p>Well, it is difficult for me to explain this situation, but here I go.</p>\n\n<p>I have two models defined loosely like this:</p>\n\n<pre><code>class InformationUnit(models.Model):\n    username = models.CharField(max_length=255)\n    project = models.ForeignKey('Project')\n    ...\n\nclass Project(models.Model):\nname = models.CharField(max_length=255)\n</code></pre>\n\n<p>Now, in a view, I want to annotate all the InformationUnits that belong to a project, so I do this:</p>\n\n<pre><code>p = Project.objects.all().annotate(Count('informationunit')\n</code></pre>\n\n<p>which works just ok\nFurthermore, I want to know, in each project, how many distinct 'username' participate.\nThat is, count how many distinct 'username' are there in the InformationUnits that compose one project. \nI have tried the following, but it simply counts the number of InformationUnit, regardless of the username:</p>\n\n<pre><code>p = Project.objects.all().annotate(Count('informationunit__username')\n</code></pre>\n\n<p>Note that username is not an object, it is a string. Is there a clean way to do this or should I create a more complicated code based on loops and spaghetti code :P</p>\n\n<p>Thanks a lot!</p>\n"},{"tags":["python","django","unicode"],"answer_count":2,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":174,"score":7,"question_id":12898212,"title":"I'm confused by this code","body":"<p>This following is from the django source code (<a href=\"https://github.com/django/django/blob/1.4.1/django/utils/encoding.py#L73\" rel=\"nofollow\"><code>Django-1.41/django/utils/encoding.py</code></a>);</p>\n\n<pre><code>try:\n    s = unicode(str(s), encoding, errors)\nexcept UnicodeEncodeError:\n    if not isinstance(s, Exception):\n        raise\n\n    # If we get to here, the caller has passed in an Exception\n    # subclass populated with non-ASCII data without special\n    # handling to display as a string. We need to handle this\n    # without raising a further exception. We do an\n    # approximation to what the Exception's standard str()\n    # output should be.\n    s = u' '.join([force_unicode(arg, encoding, strings_only,\n        errors) for arg in s])\n</code></pre>\n\n<p>My question is:  In which case will <code>s</code> be an instance of Exception?<br>\n when s is an instance of Exception, and s have neither str or repr attribute. Than this situation happen. Is this right?</p>\n"},{"tags":["python","django","postgresql","psycopg2","django-settings"],"answer_count":4,"favorite_count":1,"up_vote_count":9,"down_vote_count":2,"view_count":11258,"score":7,"question_id":5394331,"title":"How to setup PostgreSQL Database in Django?","body":"<p>I'm new to Python and Django.</p>\n\n<p>I'm configuring a Project using PostgreSQL database but I'm getting errors.</p>\n\n<pre><code>C:\\xampp\\htdocs\\djangodir&gt;python manage.py syncdb\nTraceback (most recent call last):\n  File \"manage.py\", line 11, in &lt;module&gt;\n    execute_manager(settings)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line\n438, in execute_manager\n    utility.execute()\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line\n379, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line\n261, in fetch_command\n    klass = load_command_class(app_name, subcommand)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\__init__.py\", line\n67, in load_command_class\n    module = import_module('%s.management.commands.%s' % (app_name, name))\n  File \"C:\\Python27\\lib\\site-packages\\django\\utils\\importlib.py\", line 35, in im\nport_module\n    __import__(name)\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\commands\\syncdb.py\"\n, line 7, in &lt;module&gt;\n    from django.core.management.sql import custom_sql_for_model, emit_post_sync_\nsignal\n  File \"C:\\Python27\\lib\\site-packages\\django\\core\\management\\sql.py\", line 6, in\n &lt;module&gt;\n    from django.db import models\n  File \"C:\\Python27\\lib\\site-packages\\django\\db\\__init__.py\", line 77, in &lt;modul\ne&gt;\n    connection = connections[DEFAULT_DB_ALIAS]\n  File \"C:\\Python27\\lib\\site-packages\\django\\db\\utils.py\", line 92, in __getitem\n__\n    backend = load_backend(db['ENGINE'])\n  File \"C:\\Python27\\lib\\site-packages\\django\\db\\utils.py\", line 33, in load_back\nend\n    return import_module('.base', backend_name)\n  File \"C:\\Python27\\lib\\site-packages\\django\\utils\\importlib.py\", line 35, in im\nport_module\n    __import__(name)\n  File \"C:\\Python27\\lib\\site-packages\\django\\db\\backends\\postgresql\\base.py\", li\nne 23, in &lt;module&gt;\n    raise ImproperlyConfigured(\"Error loading psycopg module: %s\" % e)\ndjango.core.exceptions.ImproperlyConfigured: Error loading psycopg module: No mo\ndule named psycopg\n</code></pre>\n\n<p>Can someone give me a clue on what is going on?</p>\n\n<p>Best Regards,</p>\n"},{"tags":["django","sqlite","denormalization"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13150174,"title":"Django/Sqlite Improve Database performance","body":"<p>We are developing an online school diary application using django. The prototype is ready and the project will go live next year with about 500 students.\nInitially we used sqlite and hoped that for the initial implementation this would perform well enough.\nThe data tables are such that to obtain details of a school day (periods, classes, teachers, classrooms, many tables are used and the database access takes 67ms on a reasonably fast PC.\nMost of the data is static once the year starts with perhaps minor changes to classrooms. I thought of extracting the timetable for each student for each term day so no table joins would be needed. I put this data into a text file for one student, the file is 100K in size. The time taken to read this data and process it for a days timetable is about 8ms. If I pre-load the data on login and store it in sessions it takes 7ms at login and 2ms for each query.\nWith 500 students what would be the impact on the web server using this approach and what other options are there (putting the student text files into a sort of memory cache rather than session for example?)\nThere will not be a great deal of data entry, students adding notes, teachers likewise, so it will mostly be checking the timetable status and looking to see what events exist for that day or week.</p>\n"},{"tags":["python","django","arrays"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13133304,"title":"How can i get unsigned magnitude of the -ve number in python","body":"<p>I have this numbers  <code>a = 7 , b= 9</code></p>\n\n<p>Now i want to subtract the two numbers.</p>\n\n<p><code>b - a = 2</code>. now that is ok</p>\n\n<p>but <code>a -b = -2</code></p>\n\n<p>But i only want to know the diff i.e 2 not -ve or +ve like we have mod operator</p>\n\n<p>How can i do that in python</p>\n"},{"tags":["django","model","integer","sequence"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":149,"score":0,"question_id":8029711,"title":"Sequence field in django model without primary_key","body":"<p>I need another sequence field in model this fild will start from 100000 and need to be incremented but django AutoField need to be primary_key, any way to do a sequence without be a PK ?</p>\n\n<p>thnkx.</p>\n"},{"tags":["django","inheritance","orm","many-to-many","generic-class"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13147057,"title":"django: querying ManyToMany attribute calling multi table inheritance","body":"<p>I've read <a href=\"http://stackoverflow.com/questions/4147749/django-orm-inheritance-with-manytomany-field\">some</a>, <a href=\"http://stackoverflow.com/questions/933092/generic-many-to-many-relationships\">related</a>, <a href=\"http://stackoverflow.com/questions/1393622/django-model-inheritance-filtering-models\">questions</a>, but it's not very clear what the best practice is for my case.\nI'm a database n00b trying to learn, so patience is appreciated.  My situation is as follows:</p>\n\n<ul>\n<li>3 types of companies: Manufacturer, Reseller, ServiceNRepair (sharing about 10 attributes)</li>\n<li>5 types of products: StuffedAnimals, Bicycles, Barbies (also sharing some attributes)</li>\n</ul>\n\n<p>So to keep things DRY I tried multi table inheritance:</p>\n\n<pre><code># company.models.py\n\nclass GenericCompany(models.Model):\n    name, description, address, etc\n\nclass Manufacturer(GenericCompany): #can manufacture different things\n    stuff_specific_to_manufacturers\n    product = models.ManyToMany(GenericProduct)\n\nclass Reseller(GenericCompany): #can sell different things\n    stuff_specific_to_manufacturers\n    product = models.ManyToMany(GenericProduct)\n\netc for ServiceNRepair\n</code></pre>\n\n<p>and similarly for the products,</p>\n\n<pre><code># product.models.py\n\nclass GenericProduct(models.Model):\n    name, price, color, etc\n\nclass StuffedAnimal(GenericProduct):\n    fluffyness, ears_or_not, etc\n\n\nclass Bicycle(GenericProduct):\n    wheel_diameter, weight, etc\n\n\netc for Barbies\n</code></pre>\n\n<p>Now I'm going to need to perform queries like </p>\n\n<ul>\n<li>Show all products that are red (this is easy)</li>\n<li>What products does this manufacturer produce?</li>\n<li>Find all bicycles that reseller X sells</li>\n</ul>\n\n<p>But can I do so with M2M? <code>Manufacturer.objects.filter(product_icontains ='something')</code> such things won't work.  So, I'm I totally on the wrong path?  Is the typical solution to use ContentTypes?  I would just like some direction about what to study next to tackle this problem which surely must be quite common.  Any tips appreciated.  Thank you.</p>\n"},{"tags":["java","django","virtualenv","ubuntu-12.04","yui-compressor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13139651,"title":"How to use django-pipeline in a virtual-env?","body":"<p>I have been using django-pipeline successfully for a couple of months. Now I have installed virtual-env for the first time on a clean system. Everything is accordingly set and all pip installs are done within my environment.</p>\n\n<p><code>python manage.py collectstatic</code></p>\n\n<p>Now I get an error when I am collecting my static files, it says </p>\n\n<pre><code>File \"/vc/cb-env/local/lib/python2.7/site-packages/pipeline/compressors/__init__.py\", line 247, in execute_command\n    raise CompressorError(error)\npipeline.compressors.CompressorError: [warning] /usr/bin/yui-compressor: No java runtime was found\n[warning] /usr/bin/yui-compressor: No JAVA_CMD set for run_java, falling back to JAVA_CMD = java\n</code></pre>\n\n<p>Even though both yui-compressor as well as latest java were installed previously:</p>\n\n<pre><code>sudo add-apt-repository ppa:webupd8team/java -y\nsudo apt-get update\nsudo apt-get install oracle-java7-installer -y\nsudo apt-get install yui-compressor -y\n</code></pre>\n\n<p>By the look of it, because I had installed java as root, my environment doesn't seem to find it.\nWhat can I do?</p>\n"},{"tags":["python","django","cron"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13145675,"title":"Cron parser and validation in python","body":"<p>I am currently running a django web app in python where I store cron entries entered by the user into a database. I was wondering if there are any python libraries/packages that will validate these entries before I store them into the database. By validate I mean correct syntax as well as the correct range (ex: month cannot be 15). Does anyone have any suggestions? Thanks!</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":12902785,"title":"ImageField's \"Currently\" and \"Clear\" Sometimes Doesn't Appear","body":"<p>Assume you have a model that has a required field of any type and also an optional ImageField. Let's say you used Django's built-in admin interface to insert a row into this database table and when you did so, you filled out both fields. Now let's say you go to edit the row that you just created. The ImageField will look like this:</p>\n\n<p>Currently: [url] | [checkbox] Clear\nChange: [file widget]</p>\n\n<p>If you upload a non-image (a PDF, for example), it will say \"Upload a valid image. The file you uploaded was either not an image or a corrupted image.\" only now the \"Currently: [url] | [checkbox] Clear\" portion won't be there anymore. This can be misleading to users (causing them to think the original image is now gone).</p>\n\n<p>Another issue is let's say you were editing the row and you blanked out the required field and also replaced the image with another one. It will, of course, complain about the required field not being filled out. But, again, the \"Currently: [url] | [checkbox] Clear\" portion of the image field won't be there anymore. Again, this can mislead the user.</p>\n\n<p>Is this a bug or is this the intended behavior? Either way, how can I get around this?</p>\n"},{"tags":["django","performance","internet-explorer","loading"],"answer_count":4,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":556,"score":8,"question_id":6046625,"title":"Django: IE doesn't load locahost or loads very SLOWLY","body":"<p>I'm just starting to learn Django, building a project on my computer, running Windows 7 64-bit, Python 2.7, Django 1.3.</p>\n\n<p>Basically whatever I write, it loads in Chrome and Firefox instantly. But for IE (version 9), it just stalls there, and does nothing. I can load up \"http://127.0.0.1:8000\" on IE and leave the computer on for hours and it doesn't load. Sometimes, when I refresh a couple of times or restart IE it'll work. If I change something in the code, again, Chrome and Firefox reflects changes instantly, whereas IE doesn't - if it loads the page at all. </p>\n\n<p>What is going on? I'm losing my mind here.... </p>\n"},{"tags":["django","django-admin"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":831,"score":1,"question_id":789240,"title":"Why is django slow to generate select boxes for foreign keys?","body":"<p>I have an admin view which contains four foreign keys each with a few thousand entries. It is slow to appear in the browser. </p>\n\n<p>If I change the django model to eliminate the select boxes by adding raw_id_fields things become nice and snappy. So the slowness is due to the population of the select drop downs and also this is a known issue since that is why raw_id_fields exists.</p>\n\n<p>I'd like to understand what is causing the slowness. On the server, if I do a SQL query for the data which are used to populate the select boxes, results are instantaneous. So Postgres retrieving or sorting the data is not the cause.</p>\n\n<p>Maybe it is the time it takes to transfer the data populating the drop downs? Or is it something that django is doing?</p>\n"},{"tags":["python","django","linux","djcelery"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":137,"score":3,"question_id":12626808,"title":"Unusual warning with djcelery, billiard, and the django_settings_module","body":"<p>When running manage.py celeryd for async processes, everything works as expected but i'm getting a weird warning at every start-up. It's not causing any errors, but i'm having trouble making it disappear or understanding its meaning.</p>\n\n<p>Here it is:</p>\n\n<pre><code>/home/user/lib/python2.7/billiard-2.7.3.15-py2.7-linux \n-x86_64.egg/billiard/forking.py:455:           \nUserWarning: Will add directory '/home/user/webapps/django/proj' to path! \nThis is  necessary to accommodate pre-Django 1.4 layouts using setup_environ.\nYou can skip this warning by adding a DJANGO_SETTINGS_MODULE=settings \nenvironment variable.\n\nW_OLD_DJANGO_LAYOUT % os.path.realpath(project_dir)\n</code></pre>\n\n<p>This is unusual because the django settings module has been added to my wsgi, and it works for everything but this. Does it want me to add the settings to httpd.conf or something?</p>\n\n<p>Thanks</p>\n"},{"tags":["python","django","django-templates","template-engine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13145057,"title":"Automatic addslashes while returing my own template tag in Django","body":"<p>I'm a noob django programmer and I want to create my own template tag for the Django templates. I've created a templatetags module and it seems to work properly when I use the shown code; However, my function returns a string with <code>\"&amp;lt;\"</code> and <code>\"&amp;gt;\"</code> instead of <code>\"&lt;\"</code> and <code>\"&gt;\"</code> (As if the result of the function would had been modified by <code>addslashes()</code> function). What's wrong with my code?</p>\n\n<p><strong>base_template.html (django template that uses my template tag)</strong> </p>\n\n<pre><code>&lt;% load templatetags %&gt;\n&lt;html&gt;\n &lt;head&gt;\n &lt;/head&gt;\n &lt;body&gt;\n   {# text contains a string #}\n   {{ text | formattedtext }}\n &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>templatetags.py</strong></p>\n\n<pre><code>from django import template\n\nregister = template.Library()\n@register.filter(name='formattedtext')\n\ndef formattedtext(value):\n    try:\n        scoringTemplate = \"&lt;b&gt;\" + value + \"&lt;/b&gt;\"\n        print scoringTemplate #return string with \"&lt;b&gt;text&lt;/b&gt;\"\n        return scoringTemplate #however, this returns string with \"&amp;lt;text&amp;gt;\" value :(\n    except ValueError:\n        return value\n    except:\n        return value\n</code></pre>\n"},{"tags":["python","sql","django","sqlite"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13146441,"title":"How to restore a continuous sequence of IDs as primary keys in a SQL database?","body":"<p>I'm using a SQlite database and Django's <code>QuerySet</code> API to access this database. I wrote data sequentially into the database and each entry has a simple ID as the primary key (this is the Django default). This means that there is a continuous sequence of IDs now in the database (entry 1 has ID 1, entry 2 has ID 2, and so on). Now I needed to delete some entries again. This means that the sequence of IDs is discontinuous now (entry 1 has ID 1, but entry 2 might have ID 3, 8, 1432 or anything else, but not 2).</p>\n\n<p>How can I restore this continuous sequence of IDs again and associate them with the remaining entries in the database? Is there a way to do this with Django's <code>QuerySet</code> API or do I need to use plain SQL? I have no experience with plain SQL, so some working code would be very helpful in this case. Thank you!</p>\n"},{"tags":["django","nginx","dotcloud"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13146842,"title":"Django and Nginx","body":"<p>I am running a website on dotcloud which uses nginx to serve both static content and html pages, and django to serve json for ajax requests.</p>\n\n<p>I am having trouble configuring my nginx.conf file, since it seems that anything not specifically mentioned here will be given to django which will produce an error.</p>\n\n<p>For example, say a user wants to access the \"about\" page, so they type www.example.com/about into the browser. I want nginx to server back about.html without django being involved at all. How can I do this? I've tried the following:</p>\n\n<pre><code>rewrite ^/about/?$  /path/to/file/about.html break;\n</code></pre>\n\n<p>But this doesn't seem to work. Am i doing something wrong here?</p>\n\n<p>Thanks for the help.</p>\n"},{"tags":["python","django","permissions"],"answer_count":6,"favorite_count":6,"up_vote_count":11,"down_vote_count":0,"view_count":2062,"score":11,"question_id":2821997,"title":"Django 1.2 object level permissions - third party solutions?","body":"<p>Since Django 1.2 final is almost out, I am curious if there are already projects that use the new object level permissions / row level permissions system. <a href=\"http://packages.python.org/django-authority/\">Django-authority</a>, which is a possible solution for Django up to 1.1, has not been updated for a while, and does not (yet) use the new permissions system. It seems to me that <a href=\"http://packages.python.org/django-authority/\">Django-Authority</a> is in a comatose state.</p>\n\n<p>Does someone know about upcoming or maybe even finished solutions? I'd appreciate any good links to active projects with at least some downloadable content very much.</p>\n"},{"tags":["django","pickle","django-sessions"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13146794,"title":"How to overcome Session.get_decoded hash check?","body":"<p>With Django sessions, there are some cases where the encoded session data stored in the database can not be decoded using <code>django.contrib.sessions.models.Session</code>'s <code>get_decoded</code> method, i.e. it will always return an empty dictionary.</p>\n\n<p>Is there any way to decode that data?</p>\n\n<p>It relies on <code>django.contrib.sessions.backends.base.SessionBase</code>'s <code>decode</code> method, which will return an empty dictionary if a calculated hash is different from an expected hash (it raises a <code>SuspiciousOperation</code> exception).</p>\n"},{"tags":["python","django","image","jpeg","pil"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13144528,"title":"python : error while saving image from url","body":"<p>I need to save image from url, with Django.\nSo I did like the tutorial says, but I get a strange error.</p>\n\n<pre><code>page = requests.get(url)\nif page.status_code != 200 or not page.content:\nassert 0, 'can\\'t download article image'\nimage = image_content_file(page.content)\narticle.image.save('%i.jpg' % article.pk, image, save=False)\n</code></pre>\n\n<p>My Article Model :</p>\n\n<pre><code>class Article(models.Model):\n   title = models.CharField(max_length=255)\n   content = models.TextField(blank=True)\n   image = models.ImageField(blank=True, upload_to='upload/article_image')\n   date_created = models.DateTimeField(null=True, blank=True, db_index=True)\n</code></pre>\n\n<p>I have created <code>upload/article_image</code> folder and set its rights to 777</p>\n\n<p>My <code>image_content_file</code> function :</p>\n\n<pre><code>def image_content_file(img_content):\n    input_file = StringIO(img_content)\n    output_file = StringIO()\n    img = Image.open(input_file)\n    if img.mode != \"RGB\":\n        img = img.convert(\"RGB\")\n    img.save(output_file, \"JPEG\")\n    return ContentFile(output_file.getvalue())\n</code></pre>\n\n<p>But I get this error</p>\n\n<pre><code>image = image_content_file(page.content)\n  File \"/home/yital9/webservers/binarybits/binarybits/../binarybits/utils/img.py\", line 24, in image_content_file\n    img.save(output_file, \"JPEG\")\n  File \"/usr/local/lib/python2.7/dist-packages/PIL/Image.py\", line 1439, in save\n    save_handler(self, fp, filename)\n  File \"/usr/local/lib/python2.7/dist-packages/PIL/JpegImagePlugin.py\", line 471, in _save\n    ImageFile._save(im, fp, [(\"jpeg\", (0,0)+im.size, 0, rawmode)])\n  File \"/usr/local/lib/python2.7/dist-packages/PIL/ImageFile.py\", line 481, in _save\n    e = Image._getencoder(im.mode, e, a, im.encoderconfig)\n  File \"/usr/local/lib/python2.7/dist-packages/PIL/Image.py\", line 399, in _getencoder\n    return apply(encoder, (mode,) + args + extra)\nTypeError: function takes at most 9 arguments (11 given)\n</code></pre>\n\n<p>Can you give me any advice what is the problem?</p>\n"},{"tags":["django","django-admin"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13146346,"title":"Ordering in Django Admin based on a custom callable in list display","body":"<p>I have a custom callable in my list display. I want to be able to sort by it, but it does not correspond to a single field, so I <strong>cannot use <code>admin_order_field</code></strong> on its own. </p>\n\n<p>I would like to be able to alter the ordering of the queryset to reflect this, if it is selected as a field. However, it looks like the <code>ChangeList</code> view calls <code>get_ordering</code> <em>after</em> running it via the model admin's <code>get_ordering</code> call, and then loops through the given sorted fields (in the format <code>a.b.c.etc.y.z</code> where a, b, c, etc. are all integers corresponding to one or more fields in the display list.</p>\n\n<p>In this example, I have a order page where the customer can be a company/organization <em>or</em> a person. I want to be able to sort it so that all orders by people are listed first, followed by organizations, and all in alphabetical order.</p>\n\n<p>Let's use this model admin setup as an example:</p>\n\n<pre><code>class OrderAdmin(models.ModelAdmin):\n    list_display = ('pk', 'date_ordered', 'customer')\n\n    def customer(self, obj):\n        return obj.organization or \"%s %s\" % (obj.first_name, obj.last_name)\n</code></pre>\n\n<p>At the moment, I can't sort because a sort field is only made available if the callable has a <code>admin_order_field</code> attached:</p>\n\n<pre><code>    def customer(self, obj):\n        return obj.organization or \"%s %s\" % (obj.first_name, obj.last_name)\n    customer.admin_order_field = 'customer'\n</code></pre>\n\n<p>The thing is, ideally I would like to be able to intercept the default code and say, \"if one of the fields is 'customer', remove that field from the list and instead sort it using <code>[\"organization\", \"last_name\", \"first_name\"]</code>\". But as far as I can tell there is no way to do this.</p>\n\n<p>I suspect <code>extra(select={'customer':...})</code> would work, <strong>except</strong> that I'm using <code>django-pyodbc</code> as this is a SQL Server database, and the generated SQL simply does not work and throws an error:</p>\n\n<pre><code>SELECT * \nFROM   (SELECT \n\n                ( COALESCE(organization, firstname + ' ' + lastname) ) AS [customer], \n                ..., \n               ( Row_number() \n                   OVER ( \n                     ORDER BY [customer] ASC, [orders].[date_created] DESC, \n                   [orders].[order_id] ASC \n                   ) )                                                    AS \n               [rn] \n        FROM   [orders]) AS X \nWHERE  X.rn BETWEEN 1 AND 100 \n</code></pre>\n\n<p>The error being:</p>\n\n<blockquote>\n  <p>Invalid column name 'customer'.</p>\n</blockquote>\n\n<p>Short of rewriting django-pyodbc, using <code>.extra</code> is not a solution.</p>\n\n<p>So I'm wondering if there is anything else I can do, or if I just have to give up on using customer name on its own as a sorting field, and replace it with separate organization, last name, and first name columns.</p>\n"},{"tags":["django","django-socialauth"],"answer_count":2,"favorite_count":3,"up_vote_count":2,"down_vote_count":0,"view_count":268,"score":2,"question_id":10564023,"title":"Extend the social_auth User model in Django","body":"<p>I'm using Django-social-auth for the first time, and it seems that all the new users are registered in the User's model of the social_auth app of my Django website. I have a different model called Users which has some specific data (related to the users activity in the site and relation with other entities) and I want to put the data fetched from users' Facebook profiles (username, profile picture etc) into the Users model that I made myself. is there any way to extend the social_auth Users?</p>\n\n<p><strong>EDIT</strong>\nAfter reading the Django-social-auth documentation, i edited my User class as follow :</p>\n\n<pre><code># User model\n</code></pre>\n\n<p>class User(models.Model):</p>\n\n<pre><code>username = models.CharField(max_length=30)\nlast_login = models.DateTimeField(blank=True)\nis_active = models.BooleanField(default=False)\nplayedHours = models.FloatField(default = 0)\n\n\nuserSlug = models.SlugField(unique = True)    \n\nplayedSongs = models.ManyToManyField(Song, blank=True, null = True)\ninvitedFriends = models.ManyToManyField('self', blank = True, null = True)\n\ndef __unicode__(self):\n    return self.name\n</code></pre>\n\n<p>Also, how can i get the user's profile picture, friends list and so on?\nI dont understand the mechanism of this.</p>\n\n<p>Thanks a lot !</p>\n"},{"tags":["python","django","zinnia"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13145162,"title":"Zinnia startup problems","body":"<p>I am trying to get Zinnia running on a django website so I can evaluate it.  I have managed to install all its dependencies and everything just fine, and I've created a few posts using the admin tools, but now I am getting errors accessing them!</p>\n\n<p>The error:</p>\n\n<pre><code>KeyError at /weblog/2012/10/12/test-post/\n\n'request'\n\nRequest Method:     GET\nRequest URL:    http://127.0.0.1:8000/weblog/2012/10/12/test-post/\nDjango Version:     1.4.1\nException Type:     KeyError\nException Value:    'request'\n\nException Location:     /usr/local/lib/python2.7/site-packages/django/template/context.py in __getitem__, line 54\nPython Executable:  /usr/local/bin/python\nPython Version:     2.7.3\nPython Path:    \n\n['/home/ubuntudev/webtest/twsite',\n '/usr/local/lib/python2.7/site-packages/setuptools-0.6c12dev_r88846-py2.7.egg',\n '/usr/local/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg',\n '/usr/local/lib/python27.zip',\n '/usr/local/lib/python2.7',\n '/usr/local/lib/python2.7/plat-linux2',\n '/usr/local/lib/python2.7/lib-tk',\n '/usr/local/lib/python2.7/lib-old',\n '/usr/local/lib/python2.7/lib-dynload',\n '/usr/local/lib/python2.7/site-packages']\n</code></pre>\n\n<p>For reference, here is my <a href=\"http://sebsauvage.net/paste/?288ef156757eb838#oWIvTSfHNFEYvam4qkoclJUTidu9nhwZumYM7LjDH9g=\" rel=\"nofollow\">settings.py</a> and my <a href=\"http://sebsauvage.net/paste/?04dd0dce2f78d7bc#C94TRFc1TF5t9lKZWQW8MFIEw/SGgLPSs5fhFR8JYsc=\" rel=\"nofollow\">urls.py</a>.  The latter is admittedly a huge mess because I've been screwing around with everything I could think of.</p>\n\n<p>I'm just getting my feet wet with Django, and Zinnia, so please be descriptive in your answers!  Thanks in advance.</p>\n"},{"tags":["php","django","authentication","cakephp","codeigniter"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2950,"score":2,"question_id":4246961,"title":"CodeIgniter authentication, permissions and admin system, or any other PHP equivilant of Django?","body":"<p>Reading all about PHP frameworks, CodeIgniter seems really nice in that I like it's speed and raw PHP-ness, but it really misses features that CakePHP has (ACLs, authentication,etc.). I originally thought that it would be ok to write the stuff i needed myself (and CodeIgnitier is definitely the DIY tool), but I'm really missing out on a pre-made thing like that. Is there a PHP-equivilant of Django, but not that extreme, like that provides an admin panel and some automagicness, but is still \"flat-packed\" and doesn't require command line like CodeIgniter does? </p>\n\n<p>Or does anybody know a <em>good</em> module for CodeIgniter to add (1) an admin panel, (2) a login system and (3) a permissions system?</p>\n\n<p>Or should I just shut up and write my own? (I was avoiding this not really because of effort but I'm not sure that I'll write it securely enough or use proper conventions)</p>\n\n<p><strong>Update:</strong> Or should I try and modify a pre-build CMS like PyroCMS to my needs as that is already has built-in authentication and permissions and admin panel, but might be unstable?</p>\n"},{"tags":["django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13145483,"title":"How to check the version of a installed application in Django in running time?","body":"<p>I basically need to know the version of an specific application that it is installed and added to</p>\n\n<pre><code>INSTALLED_APPS = (\n    ...\n    'the_application',\n    ...\n)\n</code></pre>\n\n<p>I know that I can use pip freeze. In fact, I know the version of my current virtual environment. </p>\n\n<p>The problem is I want to support to versions of the_application.</p>\n\n<p>Something like settings.INSTALLED_APP['the_application'].get_version() would be what I am looking for...</p>\n"},{"tags":["django","django-authentication"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":580,"score":1,"question_id":4112005,"title":"30 char limit error when logging into django site with email and password","body":"<p>I have added a custom backend to allow a user to log in with a username or email in addition to password. It works fine except when the email is longer than 30 characters. The form error I get is: </p>\n\n<pre><code>\"Ensure this value has at most 30 characters (it has 35).\"\n</code></pre>\n\n<p>In one my my apps' urls.py file I've overridden the max_length of the username field like this:</p>\n\n<pre><code>from django.contrib.auth.forms import AuthenticationForm\nAuthenticationForm.base_fields['username'].max_length = 75\n</code></pre>\n\n<p>I've even tried the class_prepared signal technique described here:</p>\n\n<pre><code>http://stackoverflow.com/questions/2610088/can-djangos-auth-user-username-be-varchar75-how-could-that-be-done/2613385#2613385\n</code></pre>\n\n<p>I'm not sure where I'm going wrong here and I appreciate the help. </p>\n"},{"tags":["python","django","templates","view"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13139192,"title":"Call Django view from a template","body":"<p>I want to call a Django view from a Django template. Is there a tag to do that ?</p>\n\n<p>For example, I want to create a view which manage my login form. So basically, this view will be used just to send the Django form to the html template.</p>\n\n<p>Thank you for your help.</p>\n"},{"tags":["python","html","django","forms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13145013,"title":"Link HTML form to Django field","body":"<p>I am new to HTML, my problem is I can't make a form field to be linked to the form.field I try to link with. I had to write an HTML form manually and not simply use the {{form.field}} because I am using a datepicker with JQuery. </p>\n\n<pre><code>&lt;div class=\"fieldWrapper\"&gt;\n  {{ form.valida_desde.errors }}\n    &lt;label for=\"id_valida_desde\"&gt;Válida desde:&lt;/label&gt;\n    &lt;input  type=\"text\" data-date-format=\"mm/dd/yy\" id=\"valida_desde\"&gt; \n&lt;/div&gt;\n</code></pre>\n\n<p>I could easily render this required field by doing:</p>\n\n<pre><code>{{ form.valida_desde.errors }}\n{{ form.valida_desde }}\n</code></pre>\n\n<p>But that would not work with datepicker. So, what do I do so that the first form saves the data to form.valida_desde field, which is a DateField BTW.</p>\n\n<p>The Jquery needed at the bottom, it works OK</p>\n\n<pre><code>&lt;script&gt;\n$(function() {\n  $( \"#valida_desde\" ).datepicker();\n});\n&lt;/script&gt;\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>Actually is pretty funny for the fact that I just found the answer after looking for more than 3 hours.</p>\n\n<pre><code>        &lt;div class=\"fieldWrapper\"&gt;\n      {{ form.valida_desde.errors }}\n        &lt;label for=\"id_valida_desde\"&gt;Válida desde:&lt;/label&gt;\n        &lt;input  type=\"text\" name=\"valida_desde\" data-date-format=\"mm/dd/yy\" id=\"valida_desde\"&gt; \n    &lt;/div&gt;\n</code></pre>\n\n<p>Adding the name attribute made it, I did that but tried something like form.valida_desde and even {{ form.valiad_desde }}</p>\n"},{"tags":["django","django-models","django-forms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13145077,"title":"Showing Integrity Error in ModelForm (Is this the proper way?)","body":"<p>So I have this form:</p>\n\n<pre><code>    class ManufacturerFormAdd(ModelForm):\n\n        c_id = None\n\n        class Meta:\n            model = Manufacturer\n            exclude = ('added_by', 'company', 'picture')\n\n        def __init__(self, *args, **kwargs):\n            self.c_id = kwargs['c_id']\n            del kwargs['c_id']\n            super(ManufacturerFormAdd, self).__init__(*args,**kwargs)\n\n        def clean(self):\n            cleaned_data = super(ManufacturerFormAdd, self).clean()\n            name = cleaned_data.get('name')\n\n            if Manufacturer.objects.filter(name=name, company_id=self.c_id).count() &gt; 0:\n                msg = u\"A manufacturer with that name already exists!\"\n                self._errors[\"name\"] = self.error_class([msg])\n                del cleaned_data['name']\n            return cleaned_data\n</code></pre>\n\n<p>based of this model: </p>\n\n<pre><code>    class Manufacturer(models.Model):\n        name = models.CharField(max_length=64, blank=False)\n        contact_name = models.CharField(max_length=64,blank=True)\n        contact_email = models.EmailField(max_length=75,blank=True)\n        contact_phone = models.CharField(max_length=36, blank=True)\n        website = models.URLField(max_length=200, blank=True)\n        company = models.ForeignKey(Company)\n        added_by = models.ForeignKey(User)\n        picture = models.OneToOneField(ManufacturerPicture)\n        creation_date = models.DateTimeField(auto_now_add=True)\n        last_modified = models.DateTimeField(auto_now=True)\n\n        def __unicode__(self):\n            return u'%s' % (self.name)\n\n        class Meta:\n            unique_together = ('name','company')\n</code></pre>\n\n<p>I will be adding the company_id myself in the add method (in views.py) as I don't want the user to select its own company. I have that already stored in his userprofile. I was wondering if this was good way to do this? I am not sure about the whole \"c_id\" class variable. Is that wrong? </p>\n\n<p>Thanks!</p>\n"},{"tags":["django","django-models","django-queryset","django-managers"],"answer_count":3,"favorite_count":5,"up_vote_count":11,"down_vote_count":0,"view_count":2069,"score":11,"question_id":2163151,"title":"Custom QuerySet and Manager without breaking DRY?","body":"<p>I'm trying to find a way to implement both a custom <code>QuerySet</code> and a custom <code>Manager</code> without breaking DRY.  This is what I have so far:</p>\n\n<pre><code>class MyInquiryManager(models.Manager):\n    def for_user(self, user):\n        return self.get_query_set().filter(\n                    Q(assigned_to_user=user) |\n                    Q(assigned_to_group__in=user.groups.all())\n                )\n\nclass Inquiry(models.Model):   \n    ts = models.DateTimeField(auto_now_add=True)\n    status = models.ForeignKey(InquiryStatus)\n    assigned_to_user = models.ForeignKey(User, blank=True, null=True)\n    assigned_to_group = models.ForeignKey(Group, blank=True, null=True)\n    objects = MyInquiryManager()\n</code></pre>\n\n<p>This works fine, until I do something like this:</p>\n\n<pre><code>inquiries = Inquiry.objects.filter(status=some_status)\nmy_inquiry_count = inquiries.for_user(request.user).count()\n</code></pre>\n\n<p>This promptly breaks everything because the <code>QuerySet</code> doesn't have the same methods as the <code>Manager</code>.  I've tried creating a custom <code>QuerySet</code> class, and implementing it in <code>MyInquiryManager</code>, but I end up replicating all of my method definitions.</p>\n\n<p>I also found <a href=\"http://adam.gomaa.us/blog/2009/feb/16/subclassing-django-querysets/\">this snippet</a> which works, but I need to pass in the extra argument to <code>for_user</code> so it breaks down because it relies heavily on redefining <code>get_query_set</code>.</p>\n\n<p>Is there a way to do this without redefining all of my methods in both the <code>QuerySet</code> and the <code>Manager</code> subclasses?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13144051,"title":"Django. Invalid keyword argument for this function. ManyToMany","body":"<p>I have this error:</p>\n\n<p><strong>'people' is an invalid keyword argument for this function</strong></p>\n\n<pre><code>class Passage(models.Model):\n    name= models.CharField(max_length = 255)\n    who = models.ForeignKey(UserProfil)\n\nclass UserPassage(models.Model):\n    passage = models.ForeignKey(Passage)\n    people = models.ManyToManyField(UserProfil, null=True)\n\nclass UserProfil(models.Model):\n    user = models.OneToOneField(User)\n    name = models.CharField(max_length=50)\n</code></pre>\n\n<p>I try:</p>\n\n<pre><code>def join(request):\n    user = request.user\n    user_profil = UserProfil.objects.get(user=user)\n    passage = Passage.objects.get(id=2)\n    #line with error\n    up = UserPassage.objects.create(people= user_profil, passage=passage)\n    return render_to_response('thanks.html')\n</code></pre>\n\n<p>How does one do this correctly? Thanks!</p>\n"},{"tags":["python","mysql","django"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13144063,"title":"How do you use views.py to display mysql data in django?","body":"<p>I am a beginner in python and am trying the tutorial below:\n<a href=\"http://net.tutsplus.com/tutorials/python-tutorials/python-from-scratch-creating-a-dynamic-website/\" rel=\"nofollow\">http://net.tutsplus.com/tutorials/python-tutorials/python-from-scratch-creating-a-dynamic-website/</a></p>\n\n<p>I have created a template with the following body:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n    &lt;h1&gt;First Blog&lt;/h1&gt;\n    &lt;hr /&gt;\n    {% for post in posts %}\n        &lt;div class=\"post\"&gt;\n        &lt;h2&gt;{{ post.title }}&lt;/h2&gt;\n        &lt;h3&gt;Posted on {{ post.timestamp }} by {{ post.author }}&lt;/h3&gt;\n        &lt;p&gt;{{ post.bodytext }}&lt;/p&gt;\n        &lt;/div&gt;\n        &lt;hr /&gt;\n    {% endfor %}\n&lt;/div&gt;\n</code></pre>\n\n<p>The views.py document has the following code:</p>\n\n<pre><code>from django.shortcuts import render_to_response\nfrom blog.models import posts\ndef home(request):\n    entries = posts.objects.all()[:10]\n    return render_to_response('index.html', {'posts' : entries})\n</code></pre>\n\n<p>The website displays the following:</p>\n\n<pre><code>First Blog\n\n{% for post in posts %}\n{{ post.title }}\n\nPosted on {{ post.timestamp }} by {{ post.author }}\n\n{{ post.bodytext }}\n\n{% endfor %}\n</code></pre>\n\n<p>How do I get the website to display the data from my database?</p>\n"},{"tags":["jquery","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13117818,"title":"Cross domain restriction","body":"<p>This is how i am passing a json object in <code>views.py</code></p>\n\n<pre><code>json_data = json.dumps(filedata, default=lambda obj: obj.__dict__,indent=4)    \nreturn HttpResponse(json_data, mimetype='application/json')\n</code></pre>\n\n<p>And I am reading the file in jquery using ajax...</p>\n\n<pre><code>$.ajax({\n   type: \"GET\",\n   url: \"http://127.0.0.1:8000/project/defparser/\",\n   dataType: \"jsonp\",\n   success: function(data) {\n       alert('Fetched ' + data.length + ' items!');\n   });\n</code></pre>\n\n<p>But its showing an error saying data is null in the browser...\nThere is a problem of cross domain restriction because i am accessing a django server file from a standalone html file....\nHow to resolve it????</p>\n"},{"tags":["django","pil","virtualenv","pip"],"answer_count":5,"favorite_count":8,"up_vote_count":8,"down_vote_count":0,"view_count":3636,"score":8,"question_id":4435016,"title":"install pil on virtualenv with libjpeg","body":"<p>Currently I'm installing PIL into my virtual env as follows:</p>\n\n<pre><code>pip install -E . -r ./releases/%s/requirements.txt\n</code></pre>\n\n<p>where requirements.txt contains:</p>\n\n<pre><code>pil\n</code></pre>\n\n<p>I can upload png images but not jpeg images currently.  From reading on the web it seems i may need libjpeg decoder?  Am i installing pil incorrectly?  What is the proper way to install pil for django in a virtual env with libjpeg?</p>\n"},{"tags":["python","django","pil","libjpeg"],"answer_count":6,"favorite_count":3,"up_vote_count":9,"down_vote_count":0,"view_count":3780,"score":9,"question_id":8404956,"title":"Installing PIL with JPEG support on Mac OS X","body":"<p>I posted a question before regarding this subject, and read other ones posted before, but none has successfully solved my problem.</p>\n\n<p>I am trying to install PIL on Mac OS X Lion, as I need it for a Django application. I also need JPEG support, so I need a JPEG decoder as well.</p>\n\n<p>I have tried to download the libjpeg sources and compile them, and install PIL, but it doesn't recognize the directory.</p>\n\n<p>So what I would like, and I believe this exists somewhere, is a method to install both PIL and libjpeg with a package installer, without the need for any compilation whatsoever!</p>\n\n<p>Thank you in advance for every reply.</p>\n"},{"tags":["django","django-templates","django-urls"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13142921,"title":"Django App URL model not importing","body":"<p>Im certain that this is something simply that Im overlooking but Im too irritated to figure it out alone so thanks in advance. </p>\n\n<p><strong>Project Directory Structure</strong>\n*<em>UPDATED</em>*</p>\n\n<pre><code>myproject/\n  manage.py\n  myproject/\n    apps/\n      geo/\n        urls.py\n    settings.py\n    urls.py\n</code></pre>\n\n<p><strong>urls.py</strong></p>\n\n<pre><code>from django.conf import settings\nfrom django.conf.urls.defaults import *\nfrom django.views.generic.simple import direct_to_template\n\nfrom django.contrib.gis import admin\n\nadmin.autodiscover()\n\nfrom pinax.apps.account.openid_consumer import PinaxConsumer\n\nhandler500 = \"pinax.views.server_error\"\n\nurlpatterns = patterns(\"\",\nurl(r\"^$\", direct_to_template, {'template' : 'home.html' }, name=\"home\"),\nurl(r\"^admin/invite_user/$\", \"pinax.apps.signup_codes.views.admin_invite_user\", name=\"admin_invite_user\"),\nurl(r\"^admin/\", include(admin.site.urls)),\nurl(r\"^about/\", include(\"apps.about.urls\")),\nurl(r\"^account/\", include(\"pinax.apps.account.urls\")),\nurl(r\"^openid/\", include(PinaxConsumer().urls)),\nurl(r\"^profiles/\", include(\"idios.urls\")),\nurl(r\"^notices/\", include(\"notification.urls\")),\nurl(r\"^announcements/\", include(\"announcements.urls\")),\nurl(r\"^products/\", include(\"products.urls\")),\nurl(r\"^locate/\", include(\"geo.urls\")),\nurl(r\"^sectors/\", include(\"sectors.urls\")),\n)\n\n\nif settings.SERVE_MEDIA:\n    urlpatterns += patterns(\"\",\n        url(r\"\", include(\"staticfiles.urls\")),\n)\n</code></pre>\n\n<p><strong>settings.py</strong></p>\n\n<pre><code>INSTALLED_APPS = [\n# project\n\"tulsa-site.apps.about\",\n\"tulsa-site.apps.profiles\",\n\"tulsa-site.apps.geo\",\n\"tulsa-site.apps.sectors\",\n]\n</code></pre>\n\n<p>When I go to the url path \"http://127.0.0.1:8000/locate/\" is receive the error message: I recieve the exception value \"No module named geo.urls.\" What am I missing?</p>\n"},{"tags":["python","sql","django","orm","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13137894,"title":"Django ORM: sort by aggregate of filter of related table","body":"<p>Here's a subset of my model:</p>\n\n<pre><code>class Case(models.Model):\n    ... # primary key is named \"id\"\nclass Employee(models.Model):\n    ... # primary key is named \"id\"\nclass Report(models.Model):\n    case = ForeignKey(Case, null=True)\n    employee = ForeignKey(Employee)\n    date = DateField()\n</code></pre>\n\n<p>Given a particular employee, I want to produce a list of all cases, ordered by when the employee has most recently reported on it.  Those cases for which no report exists should be sorted last.  Cases on the same date (including NULL) should be sorted by further criteria.</p>\n\n<p>Can I express this in the Django ORM api?  If so, how?</p>\n\n<p>In pseudo-SQL, I think I want</p>\n\n<pre><code>Select Case.*\nFrom Case some-kind-of-join Report\nWhere report.employee_id = the_given_employee_id\nGroup by Case.id\nOrder by Max(Report.date) Desc /* Report-less cases last */, Case.id /* etc. */\n</code></pre>\n\n<p>Do I need to introduce a many-to-many relation from Case to Employee through Report to do this in Django ORM?</p>\n"},{"tags":["django","admin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13142531,"title":"Many-to-many relationships in Django Admin","body":"<p><strong>models:</strong></p>\n\n<pre><code>class Detail(models.Model):\n    def __unicode__(self):\n            return self.title\n    title = models.CharField(max_length=32)\n\nclass Cars(models.Model):\n    def __unicode__(self):\n            return self.name\n    name = models.CharField(max_length=32, unique=True)\n    details = models.ManyToManyField(Detail)\n</code></pre>\n\n<p>So, every car has a many details - wheels, engine, etc. How to do this: in Django Admin situated Cars menu, in that menu we have a many lines of details (like in <a href=\"https://docs.djangoproject.com/en/1.4/intro/tutorial02/\" rel=\"nofollow\">tutorial</a>).\nIn <strong>admin</strong> I use:</p>\n\n<pre><code>class DetailInline(admin.TabularInline):\n    model = Detail\n    extra = 6\nclass CarsAdmin(admin.ModelAdmin):\n    inlines = [DetailInline]\n</code></pre>\n\n<p>But it has error: <strong>Detail has no ForeignKey to Cars</strong>. How to fix it?</p>\n"},{"tags":["python","django","model","save"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":316,"score":0,"question_id":10798767,"title":"Using Django bulk_create objects in foreign keys?","body":"<p>I was reading up on Django bulk_create and a few of its \"flaws\":</p>\n\n<pre><code>\"\nThis has a number of caveats though:\n\n1. The model's save() method will not be called, and the pre_save and post_save signals will not be sent.\n2. It does not work with child models in a multi-table inheritance scenario.\n3. If the model's primary key is an AutoField it does not retrieve and set the primary key attribute, as save() does.\n\"\n</code></pre>\n\n<p>I didn't fully understand it. So if I have a list of objects, pass it into bulk_create:</p>\n\n<pre><code>objList = [a, b, c,] #none are saved\nmodel.objects.bulk_create(objList)\n</code></pre>\n\n<p>Could I still use these objects in foreign keys fine?</p>\n\n<pre><code>for obj in objList:\n    o = otherModel(something='asdfasdf', fkey=obj)\n    o.save() # will this be fine given the caveats stated above?\n</code></pre>\n\n<p>So will the foreignKey relation be okay? Also when it says 2. It does not work with child models in a multi-table inheritance scenario, it means that any model that inherits from another model(abstract or not) cannot use bulk_create?</p>\n"}]}
{"total":41213,"page":8,"pagesize":100,"questions":[{"tags":["django","django-ratings"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13140752,"title":"Weird error message with django-ratings","body":"<p>I'm getting a strange error message with [django-ratings][1]. The following is in my urls.py:</p>\n\n<pre><code>url(r'^rate/(?P&lt;object_id&gt;\\d+)/(?P&lt;score&gt;\\d+)/', AddRatingFromModel(),{\n    'app_label': 'spiceapp',\n    'model': 'spice',\n    'field_name': 'rating',\n}),\n</code></pre>\n\n<p>If I navigate to this page: <code>/spiceapp/rate/1/2</code>, I get the following error:</p>\n\n<blockquote>\n  <p>Caught AttributeError while rendering: 'AddRatingFromModel' object has no attribute '<strong>name</strong>'</p>\n</blockquote>\n\n<p>What would cause this to happen?</p>\n\n<pre><code>Environment:\n\n\nRequest Method: GET\nRequest URL: http://localhost:8000/spiceapp/rate/1/2/\n\nDjango Version: 1.3.1\nPython Version: 2.7.2\nInstalled Applications:\n['django.contrib.admin',\n 'django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.sites',\n 'django.contrib.messages',\n 'django.contrib.humanize',\n 'django.contrib.markup',\n 'mptt',\n 'treenav',\n 'djangoratings',\n 'django.contrib.databrowse',\n 'pinax.templatetags',\n 'django_facebook',\n 'aiteo',\n 'haystack',\n 'notification',\n 'staticfiles',\n 'debug_toolbar',\n 'mailer',\n 'uni_form',\n 'crispy_forms',\n 'django_openid',\n 'ajax_validation',\n 'timezones',\n 'emailconfirmation',\n 'announcements',\n 'pagination',\n 'friends',\n 'messages',\n 'oembed',\n 'groups',\n 'threadedcomments',\n 'wakawaka',\n 'swaps',\n 'tagging',\n 'bookmarks',\n 'photologue',\n 'avatar',\n 'flag',\n 'microblogging',\n 'locations',\n 'django_sorting',\n 'tagging_ext',\n 'smuggler',\n 'voting',\n 'pinax.apps.signup_codes',\n 'pinax.apps.analytics',\n 'pinax.apps.blog',\n 'pinax.apps.tribes',\n 'pinax.apps.photos',\n 'pinax.apps.topics',\n 'pinax.apps.threadedcomments_extras',\n 'about',\n 'account',\n 'waitinglist',\n 'spiceapp',\n 'bbauth',\n 'profiles']\nInstalled Middleware:\n['django.middleware.common.CommonMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django_openid.consumer.SessionConsumer',\n 'django.contrib.messages.middleware.MessageMiddleware',\n 'groups.middleware.GroupAwareMiddleware',\n 'pinax.apps.account.middleware.AuthenticatedMiddleware',\n 'pinax.apps.account.middleware.LocaleMiddleware',\n 'django.middleware.doc.XViewMiddleware',\n 'pagination.middleware.PaginationMiddleware',\n 'django_sorting.middleware.SortingMiddleware',\n 'pinax.middleware.security.HideSensistiveFieldsMiddleware',\n 'debug_toolbar.middleware.DebugToolbarMiddleware']\n\n\nTemplate error:\nIn template /Users/nb/Desktop/myenv2/lib/python2.7/site-packages/debug_toolbar/templates/debug_toolbar/base.html, error at line 48\n   Caught AttributeError while rendering: 'AddRatingFromModel' object has no attribute '__name__'\n   38 :     &lt;/div&gt;\n\n\n   39 :     {% for panel in panels %}\n\n\n   40 :         {% if panel.has_content %}\n\n\n   41 :             &lt;div id=\"{{ panel.dom_id }}\" class=\"panelContent\"&gt;\n\n\n   42 :                 &lt;div class=\"djDebugPanelTitle\"&gt;\n\n\n   43 :                     &lt;a href=\"\" class=\"djDebugClose\"&gt;{% trans \"Close\" %}&lt;/a&gt;\n\n\n   44 :                     &lt;h3&gt;{{ panel.title|safe }}&lt;/h3&gt;\n\n\n   45 :                 &lt;/div&gt;\n\n\n   46 :                 &lt;div class=\"djDebugPanelContent\"&gt;\n\n\n   47 :                     &lt;div class=\"scroll\"&gt;\n\n\n   48 :                          {{ panel.content|safe }} \n\n\n   49 :                     &lt;/div&gt;\n\n\n   50 :                 &lt;/div&gt;\n\n\n   51 :             &lt;/div&gt;\n\n\n   52 :         {% endif %}\n\n\n   53 :     {% endfor %}\n\n\n   54 :     &lt;div id=\"djDebugWindow\" class=\"panelContent\"&gt;&lt;/div&gt;\n\n\n   55 : &lt;/div&gt;\n\n\n   56 : \n\nTraceback:\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/core/handlers/base.py\" in get_response\n  178.                 response = middleware_method(request, response)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/debug_toolbar/middleware.py\" in process_response\n  104.                     smart_unicode(self.debug_toolbars[request].render_toolbar() + self.tag))\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/debug_toolbar/toolbar/loader.py\" in render_toolbar\n  78.         return render_to_string('debug_toolbar/base.html', context)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/loader.py\" in render_to_string\n  183.         return t.render(Context(dictionary))\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/test/utils.py\" in instrumented_test_render\n  60.     return self.nodelist.render(context)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py\" in render\n  744.                 bits.append(self.render_node(node, context))\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/debug.py\" in render_node\n  73.             result = node.render(context)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/defaulttags.py\" in render\n  227.                 nodelist.append(node.render(context))\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/defaulttags.py\" in render\n  311.             return self.nodelist_true.render(context)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py\" in render\n  744.                 bits.append(self.render_node(node, context))\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/debug.py\" in render_node\n  73.             result = node.render(context)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/debug.py\" in render\n  90.             output = self.filter_expression.resolve(context)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py\" in resolve\n  510.                 obj = self.var.resolve(context)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py\" in resolve\n  653.             value = self._resolve_lookup(context)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py\" in _resolve_lookup\n  698.                             current = current()\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/debug_toolbar/panels/request_vars.py\" in content\n  35.             'view_func': '%s.%s' % (self.view_func.__module__, self.view_func.__name__),\n\nException Type: TemplateSyntaxError at /spiceapp/rate/1/2/\nException Value: Caught AttributeError while rendering: 'AddRatingFromModel' object has no attribute '__name__'\n</code></pre>\n"},{"tags":["django","sqlite3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13139706,"title":"\"Error: near \"Documents\": syntax Error\" - sqlite3/Django","body":"<p>I am trying Chapter 6 from Django book. </p>\n\n<p>After changing some fields to blank=True, and null=True, we are told to update the table using dbshell.</p>\n\n<p>When I type: python manage.py dbshell, the following error appears:</p>\n\n<pre><code>C:\\Users\\Rafa\\Documents\\Python\\book&gt;python manage.py dbshell\nError: near: \"Documents\": syntax error.\n</code></pre>\n\n<p>I tried installing sqlite3.exe in my book directory and running directly from there. I still get the same error anytime I try to run a command.  For example, once on the sqlite3 shell (opening executable file):</p>\n\n<pre><code>sqlite&gt;ALTER TABLE books_book ALTER COLUMN publication_date DROP NOT NULL;\nError: near \"ALTER\": syntax error.\n</code></pre>\n\n<p>I know the commands may be wrong, but I can try anything and it will always point the same error and show the first word of the command in the \"\".</p>\n\n<p>Any help?</p>\n"},{"tags":["django","django-admin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13141282,"title":"Sort order for model items in django admin","body":"<p>Say I have a model:</p>\n\n<pre><code>class Question(models.Model):\n    text = models.TextField(verbose_name=u'Вопрос', max_length=1024)\n    is_free_text = models.BooleanField(verbose_name=u'Ответ в виде текста?')\n    sort_order = models.PositiveSmallIntegerField()\n</code></pre>\n\n<p>is there a plugin or something for django admin to have list of models somewhere and move them up and down (or drag and drop) to define their sort order? I basically want every question to have a unique sort order so that they are sorted according to their sort_order where fetched.</p>\n"},{"tags":["python","sql","django"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13139270,"title":"Django advanced query","body":"<p>I'm using Django ORM to handle my database queries. I have the following db tables:</p>\n\n<ul>\n<li>resource</li>\n<li>resource_pool</li>\n<li>resource_pool_elem</li>\n<li>reservation</li>\n</ul>\n\n<p>and the following models:</p>\n\n<pre><code>class Resource(models.Model):\n\n    name = models.CharField(max_length=200)\n\nclass Reservation(models.Model):\n    pass\n\nclass ResourcePool(models.Model):\n\n    reservation = models.ForeignKey(Reservation, related_name=\"pools\", db_column=\"reservation\")\n    resources = models.ManyToManyField(Resource, through=\"ResourcePoolElem\")\n    mode = models.IntegerField()\n\nclass ResourcePoolElem(models.Model):\n\n    resPool = models.ForeignKey(ResourcePool)\n    resource = models.ForeignKey(Resource)\n</code></pre>\n\n<p>Currently, I need to query the resources used in a set of reservations. I use the following query:</p>\n\n<pre><code>resourcesNames = []\nreservations = []\nresources = models.Resource.objects.filter(\n    name__in=resourcesNames, resPool__reservation__in=reservations).all()\n</code></pre>\n\n<p>which I think matches to a sql query similar to this one:</p>\n\n<pre><code>select *\nfrom resource r join resource_pool rp join resource_pool_elem rpe join reservation reserv \nwhere r.id = rpe.resource and  \n  rpe.pool = rp.id and\n  reserv.id = rp.reservation and\n  r.name in (resourcesNames[0], ..., resourcesNames[n-1])\n  reserv.id in (reservations[0], ..., reservations[n-1])\n</code></pre>\n\n<p>Now, I want to add a restriction to this query. Each pool may have a exclusive mode boolean flag. There will be an extra input list with the requested exclusive flags of each pool and I only want to query the resources of pools which exclusive flag match the requested exclusive flag if exclusive = true OR resources of pools which exclusive flag is false. I could build the SQL query using Python with a code similar to this:</p>\n\n<pre><code>query = \"select * \n    from resource r join resource_pool rp join resource_pool_elem rep\n    join reservation reserv \n    where r.id = rpe.resource and  \n    rpe.pool = rp.id and \n    reserv.id = rp.reservation and \n    reserv.id in (reservations[0], ..., reservations[n-1]) and (\"\nfor i in resourcesNames[0:len(resourcesNames)]\n    if i &gt; 0:\n        query += \" or \"\n    query += \"r.name = \" + resourcesNames[i]\n    if (exclusive[i])      \n        query += \" and p.mode == 0\"\nquery += \")\"    \n</code></pre>\n\n<p>Is there a way to express this sql query in a Django query?</p>\n"},{"tags":["django","ddos"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":34,"score":-3,"question_id":13141464,"title":"Django Anti-DOS policies","body":"<p>I am parsing a Django based web service and every now and then it returns me an error claiming many irregular accesses have been performed and telling me to enter a captcha to unlock it. I was not able to reverse engineer the kind of behaviors producing it to lock and so I cannot change my access policy not to trigger its response.</p>\n\n<p>Have you got any idea on what triggers that response and how to prevent it?</p>\n"},{"tags":["django","transactions"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13140776,"title":"using django transactions how to handle IntegrityError when commit happens","body":"<p>I want to handle properly an IntegrityError exception can be raised when a transaction is commited, and at first glance i see two alternatives to implement that, but not sure if both are correct, Can somebody clarify if both are right or not, and why?</p>\n\n<p><strong>Note</strong>: I'm using PostgreSQL</p>\n\n<pre><code># alternative one\ntry:\n  with transaction.commit_on_success():\n    # db operation 1\n    # db operation 2\nexcept IntegrityError:\n    transaction.rollback()\n\n#alternative two\nwith transaction.commit_manually():\n  sid = transaction.savepoint()\n  # db operation 1\n  # db operation 2\n  try:\n    transaction.savepoint_commit(sid)\n  except IntegrityError:\n    transaction.savepoint_rollback(sid)\n</code></pre>\n"},{"tags":["python","django","django-queryset"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13141138,"title":"is it possible to query with a logical OR in django","body":"<p>I have a model 'Organization' which has following fields</p>\n\n<pre><code>class Organization(models.Model):\n    members = models.ManyToManyField(User,related_name='org_members')\n    title = models.CharField(max_length=200)\n    description = models.TextField()\n    founder = models.ForeignKey(User,related_name='org_founder')\n    def __unicode__(self):\n        return self.title\n</code></pre>\n\n<p>To make a query to get all orgs where a user is a member </p>\n\n<pre><code>me=User.objects.get(username='damon')\nOrganization.objects.filter(members=me)\n</code></pre>\n\n<p>Similarly To make a query to get all orgs where a user is a founder</p>\n\n<pre><code>Organization.objects.filter(founder=me)\n</code></pre>\n\n<p>I want to write a query which will fetch me all orgs in which a user is a member or courses for which he is the founder.</p>\n\n<p>I tried this as below</p>\n\n<pre><code>Organization.objects.filter(members=me or founder=me)\n</code></pre>\n\n<p>This causes <code>Invalid Syntax</code> error</p>\n\n<p>Can someone tell me how to make this query</p>\n"},{"tags":["django","django-forms"],"answer_count":1,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":38,"score":4,"question_id":13140257,"title":"Attributing a specific class to each field of a django-form","body":"<p>I have a form in django and I want to attribute a class to some fields. that's because I want to use those classes in my css code and I don't want all fields have the same style.</p>\n\n<p>for example my form has 2 text fields and a button. I don't want to style the text fields as same as each other. I want the first to be right-to-left and the second to be left-to-right.</p>\n\n<p>we can use <code>required_css_class = 'required'</code> but it's just for the required fields and not for every field I want. Any ideas?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13138575,"title":"How to display two forms on the same page?","body":"<p>How to display two forms on the same page? I will be grateful for your help</p>\n\n<p>This is my views.py:    </p>\n\n<pre><code>def register_user(request):\n    if request.user.is_authenticated():\n        return HttpResponseRedirect('/profile/')\n    if request.method == 'POST':\n        form = RegistrationForm(request.POST)\n        if form.is_valid():\n            user = User.objects.create_user(username=form.cleaned_data['username'], email=form.cleaned_data['email'], password=form.cleaned_data['password'])\n            user.save()\n            user_profil = UserProfil(user=user, name=form.cleaned_data['name'], last_name=form.cleaned_data['last_name'],city=form.cleaned_data['city'])\n            user_profil.save()\n            return HttpResponseRedirect('/profile/')\n        return render_to_response('access.html', {'formRegister':form}, context_instance=RequestContext(request))\n    else:\n        form = RegistrationForm()\n        return render_to_response('access.html', {'formRegister':form}, context_instance=RequestContext(request))\n\n\ndef login_user(request):\n    if request.user.is_authenticated():\n        return HttpResponseRedirect('/profile/')\n    if request.method == 'POST':\n        form = LoginForm(request.POST)\n        if forml.is_valid():\n            username = form.cleaned_data['username']\n            password = form.cleaned_data['password']\n            user_profil = authenticate(username= username, password=password)\n            if user_profil is not None:\n                login(request, user_profil)\n                return HttpResponseRedirect('/profile/')\n            else:\n                return HttpResponseRedirect('/login/')\n        return render_to_response('access.html', {'formLogin':form}, context_instance=RequestContext(request))\n    else:\n        form = LoginForm()\n        context = {'formLogin':form}\n        return render_to_response('access.html', context, context_instance=RequestContext(request))\n</code></pre>\n\n<p>This is my urls.py</p>\n\n<pre><code>url(r'^access/$','users.views.register_user'),\nurl(r'^access/$','users.views.login_user'),\n</code></pre>\n\n<p>access.html:</p>\n\n<pre><code>&lt;form action=\"\" method=\"post\"&gt;{%csrf_token%}\n{{ formRegister.as_p }}\n&lt;p&gt;&lt;input type=\"submit\" value=\"Rejestruj\"/&gt;&lt;/p&gt;\n&lt;/form&gt;\n\n&lt;hr&gt;\n\n\n&lt;form action=\"\" method=\"post\"&gt;{%csrf_token%}\n{{ formLogin.as_p }}\n&lt;input type=\"submit\" value=\"Login\"/&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>There is one template(access.html) and two views</p>\n\n<p>When I replace urls.py(order):</p>\n\n<pre><code>url(r'^access/$','users.views.login_user'),\nurl(r'^access/$','users.views.register_user'),\n</code></pre>\n\n<p>Display only loginform</p>\n"},{"tags":["python","django","templates","view"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13140116,"title":"Django : Call a view from a template","body":"<p>How to call a view in my layout (template) ? </p>\n\n<p>For example : I've a form on every pages of my website. I need to generate CSRF token for each pages but I don't want to put the generation code on every view.</p>\n\n<p>Thank you.</p>\n"},{"tags":["django","pydev"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":107,"score":0,"question_id":2175947,"title":"Pydev configuration to specify generated variables","body":"<p>I am using Pydev with Django which marks Django generated variables as errors, eg <code>User.DoesNotExist</code>. In pylint I can specify a setting called generated variables. Is there such a setting in Pydev?</p>\n"},{"tags":["django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13140021,"title":"django-allauth: Linking multiple social accounts to a single user","body":"<p>In testing django-allauth, if I log in and log out with different social accounts, they don't seem to be linked together (in that I cannot access them by looking at socialaccount_set.all.0, socialaccount_set.all.1, etc). </p>\n\n<p>Can someone explain how to link social accounts together?</p>\n\n<p>I did see this post: <a href=\"http://stackoverflow.com/questions/13037644/how-do-i-connect-multiple-social-auth-providers-to-the-same-django-user-using-dj\">how do i connect multiple social auth providers to the same django user using django-allauth?</a> which seems to put the onus on the user to log in first with one social account, and then link the other accounts for himself. </p>\n\n<p>Certainly there should be a way to do this without putting the onus on the user? Maybe by email addresses? </p>\n\n<p>Is there a way to do this after the fact with existing users?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13139084,"title":"Override get_FIELD_display method in Django model","body":"<p>Let's say I have a field called <code>field</code> in my model, with a <code>choices</code> parameter defining the values to be returned by the <code>get_field_display</code> method. </p>\n\n<p>I need the <code>get_field_display</code> method to return a different value based on another field. Is there any way to override <code>get_field_display</code>? </p>\n\n<p>This doesn't work:</p>\n\n<pre><code>def get_field_display(self):\n    if self.other_field == 1:\n        return 'Other value'\n\n    return super.get_field_display(self)\n</code></pre>\n"},{"tags":["django"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":13,"score":0,"question_id":13139543,"title":"django-allauth: Accessing \"socialaccount_set.all\" from within a view","body":"<p>From this post: <a href=\"http://stackoverflow.com/questions/12222021/how-can-i-get-the-users-facebook-id-with-django-allauth\">How can I get the user&#39;s facebook id with django-allauth?</a> there is a simple way of accessing extra information from a user's social account within a template (e.g. looking at the entries in {{ user.socialaccount_set.all.0.extra_data }}).</p>\n\n<p>I would like to grab this information in a view, rather than the template, ideally looping through all connected social accounts, and grabbing the more desirable information from each, and then passing only that information to the template.</p>\n\n<p>Does anyone know how to access socialaccount_set.all from within a view?</p>\n"},{"tags":["django","image","resize","loading"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13138869,"title":"Django how manage images on multiple pages","body":"<p>I'm writing my first Django app (and my first site in general).</p>\n\n<p>I have a page with a google map, and an iframe that calls other pages for accomplice a wizard.</p>\n\n<p>In this wizard at a certain point I ask to the user to upload \"some\" pictures, from 1 to 10. \nIn the next step, I have to load in the iframe the thumbnails of the pictures, and let the user select one of them.</p>\n\n<p>Every time the user selects a thumbnail, on the map pop up a <em>RichMarker</em> with the image (the original image, not the thumbnail) resized (with HTML5) to not exceed 700px wide. \nNote: I can't resize the image on uploading, because I need it \"full-sized\", and I won't save a scaled version, because I wouldn't need it for anything else.</p>\n\n<p>The user can rotate, drag and resize the image on the map using HTML5.</p>\n\n<p>Here is the function that generates the content in the RichMarker to show the image. </p>\n\n<ul>\n<li><strong>directionDeg</strong> is the rotation of the image (in degrees)</li>\n<li><strong>image</strong> is the textual link of the image on the server</li>\n<li><p><strong>width</strong> is the size (in px) of the new width of the image</p>\n\n<pre><code>function prepareImage(directionDeg, image, width) {\n\n    // content element of a rich marker\n    var richMarkerContent    = document.createElement('div');\n\n    image.style.opacity = 0.75;\n    image.style.width = width+\"px\";\n    image.style.height = 'auto';\n\n    // create a container for the image\n    var rotationElement      = document.createElement('div');\n    var rotationStyles       = 'display:block;' +\n                               '-ms-transform:      rotate(%rotationdeg);' +\n                               '-o-transform:       rotate(%rotationdeg);' +\n                               '-moz-transform:     rotate(%rotationdeg);' +\n                               '-webkit-transform:  rotate(%rotationdeg);' ;\n\n    // replace %rotation with the value of directionDeg\n    rotationStyles = rotationStyles.split('%rotation').join(directionDeg);\n\n    rotationElement.setAttribute('style', rotationStyles);\n    rotationElement.setAttribute('alt',   'arrow');\n\n    // append image into the rotation container element\n    rotationElement.appendChild(image);\n\n    // append rotation container into the richMarker content element\n    richMarkerContent.appendChild(rotationElement);\n\n    return richMarkerContent.innerHTML; \n}\n</code></pre></li>\n</ul>\n\n<p>Every time the user change the image on the map, I calculate the new parameters, call the above function and update the RichMarker with the new html.</p>\n\n<p>Now, I'm running this on the django development server on my pc, so I can't feel any delay in the loading of the images or other, but I'm a little anxious about the loading time.</p>\n\n<p>Is this a good (and fast) way to load the RichMarker, or it's abnormally slow? \nIs there a better method? Or can I do some improvment to the code?</p>\n\n<p>Thank you for your time.</p>\n"},{"tags":["django","django-templates"],"answer_count":2,"favorite_count":3,"up_vote_count":11,"down_vote_count":0,"view_count":2910,"score":11,"question_id":1479206,"title":"Django Templating: how to access properties of the first item in a list","body":"<p>Pretty simple. I have a Python list that I am passing to a Django template.</p>\n\n<p>I can specifically access the first item in this list using </p>\n\n<pre><code>{{ thelist|first }}\n</code></pre>\n\n<p>However, I also want to access a property of that item... ideally you'd think it would look like this:</p>\n\n<pre><code>{{ thelist|first.propertyName }}\n</code></pre>\n\n<p>But alas, it does not.</p>\n\n<p>Is there any template solution to this, or am I just going to find myself passing an extra template variable...</p>\n"},{"tags":["python","django","osx","pip"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":60,"score":1,"question_id":13098457,"title":"Installing Django with pip, django-admin not found","body":"<p>I installed python using: <code>brew install python</code> and then eventually <code>pip install Django</code>. However when I try to run <code>django-admin.py startproject test</code> I just get a file not found. What did I forget?</p>\n"},{"tags":["django","set","rename","queryset"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":14,"score":2,"question_id":13138895,"title":"Change related set name in Django","body":"<p>I was wondering how to customize the name of a set in Django models.</p>\n\n<p>In the tutorial exemple, Choice refers to Polls in a ForeignKey field. Later on, we can know what choices are available for a Poll with :</p>\n\n<pre><code>poll.choice_set.all\n</code></pre>\n\n<p>Is it possible to rename that set to something else, so I can query it with something like ? :</p>\n\n<pre><code>poll.my_choices.all\n</code></pre>\n"},{"tags":["django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13138859,"title":"Django length of a list","body":"<p>Simple question. I have a list in my template and want to output the length of the list. Do I have to calculate this in my view and hand it over via my context?</p>\n\n<pre><code>&lt;p&gt;the size of the list is {{??}}&lt;/p&gt;\n\n{% for element in list %}\n&lt;p&gt;element.Name&lt;/p&gt;\n{% end for %}\n</code></pre>\n"},{"tags":["django","django-models","django-database","django-postgresql"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13138151,"title":"Django save model instances outside of transaction;","body":"<p>Python 2.7.3, Django 1.4.2, postgresql 9.1.\nI have i method (auto-controlled by transaction middleware). In this method i create some models and logs for those actions what creating a models (logs are stored in DB);\nBut also, in this block something may go wrong, and if so - i need rollback transaction BUT save logs instances. \nHow can i do it?</p>\n"},{"tags":["python","django","continuous-integration","travis-ci"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13121840,"title":"Make Python version depending on env var (using travis-ci)","body":"<p>Is there a way to configure travis-ci to make the Python versions dependent on a certain env var?</p>\n\n<p>Please consider the following <code>travis.yml</code> config:</p>\n\n<pre><code>language: python\npython:\n  - \"2.5\"\n  - \"2.6\"\n  - \"2.7\"\nenv:\n  - DJANGO=1.3.4\n  - DJANGO=1.4.2\n  - DJANGO=https://github.com/django/django/zipball/master\ninstall:\n  - pip install -q Django==$DJANGO --use-mirrors\n  - pip install -e . --use-mirrors\nscript:\n  - python src/runtests.py\n</code></pre>\n\n<p>Among Django 1.3 (<code>DJANGO=1.3.4</code>) and 1.4 (<code>DJANGO=1.4.2</code>) i also want to test against the latest development of Django (<code>DJANGO=https://github.com/django/django/zipball/master</code>), which is basically Django 1.5.</p>\n\n<p>The problem i see is that travis-ci will automatically run the integration against <strong>all</strong> specified Python versions. Django 1.5 however doesn't support Python 2.5 anymore. Is it possible to omit it for the Django development version so that i get integrations like this only:</p>\n\n<ul>\n<li>DJANGO=1.3.4 --> python \"2.5\", \"2.6\", \"2.7\"</li>\n<li>DJANGO=1.4.2 --> python \"2.5\", \"2.6\", \"2.7\"</li>\n<li>DJANGO=https://github.com/django/django/zipball/master --> python \"2.6\", \"2.7\"</li>\n</ul>\n"},{"tags":["python","django"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":371,"score":5,"question_id":2093593,"title":"Is it possible to implement a \"change password at next logon\" type feature in the django admin?","body":"<p>I want to be able to set an option in the user's settings that forces them to change their password upon the next login to the admin interface. Is this possible? How would it go about being implemented? I'm using the default auth model right now but not opposed to modifying or changing it. Thanks for any help.</p>\n"},{"tags":["django","menuitem","django-admin-tools"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12810939,"title":"django.db.models get_models returning empty list in django1.4","body":"<p>My code used to work in Django 1.3, but after the update to Django 1.4 it does not anymore.\nThe idea is to build a MenuItem for django-admin-tools, with a list of models from an app. </p>\n\n<pre><code>from admin_tools.utils import AppListElementMixin\nfrom app import models as my_models\n\nclass CustomMenu(Menu):\n    def init_with_context(self, context):\n\n        app_list=AppListElementMixin()\n\n        '''ERROR not working after upgrade to django 1.4, returns empty list'''\n        all_models = get_models(app_mod=my_models)\n        ''''''\n\n        dict_models = {}\n        for model in all_models:\n            dict_models[model.__name__] = items.MenuItem(\n                                            title=model._meta.verbose_name_plural,\n                                            url=app_list._get_admin_change_url(model, context)\n                                            )\n</code></pre>\n"},{"tags":["django","profile","django-registration"],"answer_count":2,"favorite_count":5,"up_vote_count":3,"down_vote_count":0,"view_count":1591,"score":3,"question_id":5658745,"title":"django-registration auto create UserProfile","body":"<p>I'm using django-registration and I'm trying to connect to its signals to automatically create a UserProfile. </p>\n\n<p>Signal definition:</p>\n\n<pre><code>from django.dispatch import Signal\n\n# A new user has registered.\nuser_registered = Signal(providing_args=[\"user\", \"request\"])\n</code></pre>\n\n<p>Signal send by django-registration:</p>\n\n<pre><code>    def register(self, request, **kwargs):\n    \"\"\"\n    Create and immediately log in a new user.\n\n    \"\"\"\n    username, email, password = kwargs['username'], kwargs['email'], kwargs['password1']\n    User.objects.create_user(username, email, password)\n\n    # authenticate() always has to be called before login(), and\n    # will return the user we just created.\n    new_user = authenticate(username=username, password=password)\n    login(request, new_user)\n    signals.user_registered.send(sender=self.__class__,\n                                 user=new_user,\n                                 request=request)\n    return new_user\n</code></pre>\n\n<p>My signal connect:</p>\n\n<pre><code>from registration.signals import *\nfrom core.models import UserProfile\nfrom django.contrib.auth.models import User\n\ndef createUserProfile(sender, instance, **kwargs):\n    UserProfile.objects.get_or_create(user=instance)\n\nuser_registered.connect(createUserProfile, sender=User)\n</code></pre>\n\n<p>Needless to say no UserProfile is being created. What am I missing here?</p>\n\n<p>Thanks a lot!</p>\n\n<p><strong>EDIT:</strong> I moved my connect() and its corresponding method to a model.py and still no luck. </p>\n\n<p>New code:</p>\n\n<pre><code>from django.db import models\n\nfrom django.contrib import auth\nfrom django.contrib.auth import login\nfrom core.forms import AuthForm\nfrom registration.signals import *\nfrom django.contrib.auth.models import User\n\n\n# Create your models here.\n\nclass UserProfile(models.Model) :\n    user = models.ForeignKey(User, unique=True)\n\n    def __unicode__(self):\n        return self.user.username\n\n\ndef createUserProfile(sender, instance, **kwargs):\n    print \"creating profile\"\n    UserProfile.objects.get_or_create(user=instance)\n\nuser_registered.connect(createUserProfile, sender=User)\n</code></pre>\n\n<p>I'm using Pycharm to debug, and in the very beginning my breakpoint on user_registered.connect() is hit. So I assume that connect() is being registered correctly. However, I still don't see createUserProfile being run. Anything else I'm missing?</p>\n\n<p>Thanks!</p>\n\n<p><strong>ANSWER:</strong> Doh. My connect and receiver code was wrong. Correct code:</p>\n\n<pre><code>def createUserProfile(sender, user, request, **kwargs):\nUserProfile.objects.get_or_create(user=user)\n\nuser_registered.connect(createUserProfile)\n</code></pre>\n\n<p>Realized it after I read signals.py in django-registration</p>\n"},{"tags":["django"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13136301,"title":"Django forms result to be displayed","body":"<p>I have worked on this for sometime now and I have decided to seek for your help because it is taking my time unnecessarily. I have an ongoing project and I am using the django framework to build the site. \nI have an html page that requests for user input, I have been able to extract the given data using the <code>form.cleaned_data['']</code>. A</p>\n\n<pre><code>#This is my views.py;\n\n\n\n from django.shortcuts import render_to_response\n    from django.template import RequestContext\n\n    from forms import CarloanForm\n\n\n    def index(request):\n        form = CarloanForm()\n        if request.POST:\n            form = CarloanForm(request.POST)\n            if form.is_valid():\n                form.save()\n        else:\n            form = CarloanForm()\n        return render_to_response('carloan/index.html', {'form': form},\n                      context_instance=RequestContext(request))\n\n#I am extracting the user inputs using;\n\namount_of_vehicle = form.cleaned_data['cost_of_vehicle_Naira'] \ntenure = form.cleaned_data['loan_repayment_tenure_Months']\ninterest_rate = form.cleaned_data['interest_rate_Percentage']\nequity = form.cleaned_data['equity_contrib_rate_Percentage']\ndepreciation_rate = form.cleaned_data['depreciation_rate_Percentage']\n</code></pre>\n\n<p>What I need to do and don't know how to go about it are;</p>\n\n<ol>\n<li><p>Carry out some operations on the data (extracted using <code>form.cleaned_data['']</code>) and I have written some lines of code to that effect;</p>\n\n<pre><code>class LoanCalc:\n    def __init__(self,amount_of_vehicle,tenure,interest_rate,equity,depreciation_rate):\n        self.amount_of_vehicle = float(amount_of_vehicle)\n        self.tenure = float(tenure)\n        self.interest_rate = float(interest_rate)\n        self.equity = float(equity)\n        self.depreciation_rate = float(depreciation_rate)\n    def interest(self):\n        return (self.interest_rate/100) * self.amount_of_vehicle *(self.tenure/12)\n    def management_fee(self):\n        return 0.01 * (self.amount_of_vehicle + user.interest())\n    def processing_fee(self):\n        return 0.0025 *(self.amount_of_vehicle + user.interest())\n    def legal_fee(self):\n        return 0.0075 * (self.amount_of_vehicle + user.interest())\n    def residual_amount(self):\n        return 0.01 * (self.amount_of_vehicle - ((self.depreciation_rate/100) * self.amount_of_vehicle *(self.tenure/12)))\n    def equity_contribution(self):\n        return (self.equity/100) * self.amount_of_vehicle\n    def LoanPaymentPlan(self):\n        months = 1\n        total_amount = self.amount_of_vehicle+user.interest()+user.management_fee()+user.processing_fee()+user.legal_fee()+user.residual_amount()\n        upfront_payment = user.management_fee()+user.processing_fee()+user.legal_fee()+user.equity_contribution()+user.residual_amount()\n        opening_balance = total_amount - upfront_payment\n        balance = opening_balance\n        while months &lt;= self.tenure:\n            if balance &gt; 0:\n                monthly_instalment =(opening_balance/self.tenure)\n                monthly_interest = (((self.interest_rate/100) * balance)/ 12)\n                loan_payment = monthly_instalment - monthly_interest\n                closing_balance = balance - monthly_instalment\n                print'  ',months,'  ',round(balance,2),'   ', round(monthly_instalment,2),'        ',round(monthly_interest,2) \\\n                , '       ',' ',round(loan_payment,2),'     ',round(closing_balance,2)\n                balance = closing_balance\n                months += 1\nreturn 'Thank you for using the Loan Calculator App'\n</code></pre></li>\n</ol>\n\n<p>and i want to carry out the operations in the code above on the extracted data.</p>\n\n<ol>\n<li>I am thinking of doing it in such a way like this;</li>\n</ol>\n\n<p>Create an empty dictionary;</p>\n\n<pre><code>    user = {}\n    user = LoanCalc(amount_of_vehicle,tenure,interest_rate,equity,depreciation_rate)\n    result= user.interest()\n    result1 = user.management_fee()\n     .           .\n     .           .\n     .           .\n    result10 = user.LoanPaymentPlan()\n</code></pre>\n\n<ol>\n<li>Pass the result(s) obtained from (question 2) to the same template that generated the form.</li>\n</ol>\n\n<p>Please help me out guys, i am still very new to django. Thanks</p>\n"},{"tags":["python","django","authentication","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13136057,"title":"Django if user.is_authenticated not working","body":"<p>I am just trying to run a simple <code>{% if user.is_authenticated %}</code> . But it always return <code>False</code>.</p>\n\n<p>Here are my all the files.</p>\n\n<p><code>views.py</code></p>\n\n<pre><code>from django.shortcuts import render_to_response, redirect\nfrom django.core.urlresolvers import reverse\nfrom django.template import RequestContext\nfrom django.contrib.auth.models import User\nfrom django.http import HttpResponse\nfrom django.contrib.auth.hashers import *\nfrom forms import UserLoginForm\nfrom models import UserLogin\n\ndef index(request):\n    return render_to_response('index.html', context_instance = RequestContext(request))\n\ndef login(request):\n    if request.method == 'POST':\n        form = UserLoginForm(request.POST or None)\n        if form.is_valid():\n            email_from_form = form.cleaned_data['email']\n            password_from_form = form.cleaned_data['password']\n            users = User.objects.filter(email = email_from_form)\n\n            for j in users:\n                if j.email == email_from_form:\n                    pass_match = check_password(password_from_form, j.password)\n                    if pass_match:\n                        return redirect(reverse('profile'), context_instance = RequestContext(request))\n                    else:\n                        return HttpResponse('Entered password did not match')\n                else:\n                    return HttpResponse('Entered email does not exist')\n        else:\n            return HttpResponse(form.errors)\n    else:\n        form = UserLoginForm()\n\n    return render_to_response('login.html', {'form':form}, context_instance = RequestContext(request))\n\n\ndef profile(request):\n\n    return render_to_response('profile.html', context_instance = RequestContext(request))\n</code></pre>\n\n<p><code>forms.py</code></p>\n\n<pre><code>from django import forms\n\nclass UserLoginForm(forms.Form):\n    email = forms.EmailField(max_length = 100)\n    password = forms.CharField(max_length = 100)\n</code></pre>\n\n<p><code>models.py</code></p>\n\n<pre><code>from django.db import models\n\nclass UserLogin(models.Model):\n    email = models.EmailField(max_length = 100)\n    password = models.CharField(max_length = 100)\n\n    def __unicode__(self):\n        return self.email\n</code></pre>\n\n<p><code>profile.html</code></p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;profile&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    {% if user.is_authenticated %}\n        Welcome user, you are loged in..\n    {% else %}\n        You are not logged in\n    {% endif %}\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><code>login.html</code></p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;login&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;form action=\"{% url login %}\" method=\"POST\"&gt;\n        {% csrf_token %}\n        {{ form.as_p }}\n        &lt;input type=\"submit\" id=\"submit\" name=\"submit\" value=\"Login\" /&gt;\n    &lt;/form&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>It always returning <code>You are not logged in</code></strong></p>\n\n<p>I am new to django and I dont understand this why it is like this.</p>\n"},{"tags":["python","django","api","interface"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13124456,"title":"Interface-Based and API based programming in Django","body":"<p>I have searched the web for this issue. And there is a post already with the same title, but not really describing the actual question. So I haven't found the right solution.</p>\n\n<p>I'm developing very large projects. So it is absolutely necessary to split it up into several layers or components or whatever you want to call it.</p>\n\n<p>Each layer exposes some functionality. For each layer it is not important how it will be implemented (since this changes oftenly on large projects), but what is important, is how we call the functionality and what it returns us => the contract!</p>\n\n<p>If we have two layers one concerning the TransactionService and another the BankService, the BankService is a layer higher than the TransactionService and will use the transactionservice.\nThe transactionService will merely do a transaction:</p>\n\n<pre><code>TransactionVO doTransaction(clientFromVO, clientToVO);\n</code></pre>\n\n<p>And another layer which does additional stuff.. TransactionVO is not an model class! They are value-objects so the implementation of the service is not exposed to outside the layer.\nIn java we can achieve this by:</p>\n\n<pre><code>public interface TransactionService {\n   TransactionVO doTransaction(clientFromVO, clientToVO);\n}\n</code></pre>\n\n<p>The implementation would be like:</p>\n\n<pre><code>public class TransactionServiceImpl {\n   public TransactionVO doTransaction(clientFromVO, clientToVO) { \n     // implementation \n   }\n}\n</code></pre>\n\n<p>Because we define our interfaces up front, we have a contract which states how each service will look like (without having an actual implementation, the TransactionServiceImpl doesn't need to exist yet). </p>\n\n<p>Therefor 2 teams can work simultaneously on each layer and they can mock the implementation.\nI wonder how to achieve this in Django! Creating a REST api for each layer is simpily not done (to much overhead, performance issues..) So for those who have experience on very large projects? </p>\n"},{"tags":["python","django","pip"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13135767,"title":"creating a pip repository from already installed package - error setup.py not found","body":"<p>I have a package installed in my /usr/local/lib/python2.7/dist-packages/package-name , its our private repo installed at that place long back and that pip repo not available now ,  so can I use that particular /usr/local/lib/python2.7/dist-packages/package-name directory to install anywhere else ? This is what I have done:   </p>\n\n<p>zipped the directory /usr/local/lib/python2.7/dist-packages/package-name<br>\nUpload to my server<br>\nThen tried to install using pip like this : pip install myserverpackageurl   </p>\n\n<p>Then i got error saying that \"setup.py\" is not available (IOError) . </p>\n\n<p>I also tried creating a bundle from my directory like this : </p>\n\n<pre><code>  cd /usr/local/lib/python2.7/dist-packages/package-name\n  pip bundle package-name package-name\n</code></pre>\n\n<p>then again i got the error :   </p>\n\n<pre><code> (\"Directory %r is not installable. File 'setup.py' not found.\", 'mm/')\n Storing complete log in /home/bhaskar/.pip/pip.log\n</code></pre>\n"},{"tags":["javascript","jquery","python","ajax","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13135469,"title":"Handling AJAX response with jQuery $.ajax in Django application","body":"<p>I'm making an ajax call to the server and want to receive an array for further processing. I'm a beginner and quite confused about what I'm really doing. Below is a snippet that I came up with so far. It works well until I try to process the returned data. I think my problem is that I don't really understand how to form a correct response and how to process it.</p>\n\n<p><strong>JAVASCRIPT/JQUERY:</strong></p>\n\n<pre><code>var shoppingList = {\n    // SOME CODE BEFORE\n\n    'foodIngredients' : function() {\n        // Send a list of food ids and receive an array of necessary ingredients. Make the returned array unique.\n        $.ajax({\n            url: 'http://localhost:8000/ingredients/',\n            // ingredients.html template:\n            // [{% for item in ingredients %}{% if forloop.last %}{{ item.id }}{% else %}{{ item.id }},{% endif %}{% endfor %}]\n            type: 'POST',\n            data: JSON.stringify(shoppingList.selectedFoods),\n            dataType: 'text',\n            cache: 'false',\n            success: function(result){\n                console.log(result); // [33,85,88,89,91]\n                shoppingList.returnedIngredients = result;\n                shoppingList.uniqueIngredients = _.unique(shoppingList.returnedIngredients);\n                console.log(shoppingList.uniqueIngredients); // [,3,,,8,5,9,1,] &lt;-- NOT OK; Expected [33,85,88,89,91]\n            }\n    });\n    },\n\n    // SOME CODE AFTER\n};\n</code></pre>\n\n<p><strong>INGREDIENTS VIEW:</strong></p>\n\n<pre><code>def ingredients(request):\n    if request.is_ajax():\n        ourid = json.loads(request.raw_post_data)\n        ingredients = Ingredience.objects.filter(food__id__in=ourid)\n        t = get_template('ingredients.html')\n        html = t.render(Context({'ingredients': ingredients,}))\n        return HttpResponse(html)\n    else:\n        html = '&lt;p&gt;This is not ajax&lt;/p&gt;'      \n        return HttpResponse(html)\n</code></pre>\n"},{"tags":["django","mongodb","django-nonrel"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":11923798,"title":"How does unique_together work in Django-nonrel?","body":"<p>I am using django-nonrel and django-mongodb engine. </p>\n\n<p>In engine's <a href=\"http://django-mongodb.org/reference/model-options.html#indexes\" rel=\"nofollow\">documentation</a>, it says that it supports django's Meta options. </p>\n\n<p>I tried using <code>unique_together</code> in a model as such:</p>\n\n<pre><code>class Bottler(models.Model):\n\n    location = models.CharField(max_length=20)\n\n    source = models.CharField(max_length=20)\n\n    transactionID = models.CharField()\n\n    class Meta:\n        unique_together = ((\"location\",\"source\"),)\n</code></pre>\n\n<p>However this doesn't seem to have worked since I could create duplicates without any error being raised. </p>\n\n<p>I know <code>unique_together</code> is enforced at the database level. </p>\n\n<p>What does that translate to in MongoDB? \nDo I have to validate it manually? </p>\n"},{"tags":["python","django","dependency-management","buildout"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":13135190,"title":"Buildout is it possible to override dependencies for an application containing its own dependencies?","body":"<p>Is it possible to override dependencies in buildout for an egg?\nI need to add some newer libraries to some eggs which contain requirements for older packages.</p>\n"},{"tags":["django"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13135320,"title":"Django! Dynamic url error","body":"<p>I'm trying make hyperlink to next page. But I get error.\nReverse for 'show_units_list' with arguments '()' and keyword arguments '{}' not found.\nPlease check my code.</p>\n\n<p>view.py</p>\n\n<pre><code>def units_list(request):\n    units_list = unit.objects.all()\n    return render_to_response(\n        'portal/units.html',\n        {'units': units_list},\n        context_instance=RequestContext(request)\n    )\n</code></pre>\n\n<p>urls.py</p>\n\n<pre><code>urlpatterns = patterns('',\n    # Main web portal entrance.\n    (r'^$', views.portal_main_page),\n    url(r'^portal/', views.units_list, name='show_units_list'),\n)\n</code></pre>\n\n<p>html</p>\n\n<pre><code>&lt;a href=\"?page={% url show_units_list %}\"&gt;\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["django","sorting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13135179,"title":"Django - Paginating over n tables sorted values","body":"<p>I've set up a little history audit trail (<a href=\"https://bitbucket.org/q/django-simple-history/src\" rel=\"nofollow\">django-simple-history</a>) for a few of my key models and an admin view to <a href=\"https://docs.djangoproject.com/en/dev/topics/pagination/?from=olddocs\" rel=\"nofollow\">paginate</a> the (aggregated) entries which are sorted by descending date. The problem is, the method I'm using is suboptimal...</p>\n\n<pre><code>historical_foo = Foo.history.all()\nhistorical_bar = Bar.history.all()\nhistorical_qux = Qux.history.all()\n\n#sort the aggregate by modified date\nresult_list = sorted(chain(historical_foo, historical_bar, historical_qux), key=attrgetter('history_date'), reverse=True)\n\npaginator = Paginator(result_list, 100)\n\ntry:\n    result = paginator.page(page_num)\n    #...\n</code></pre>\n\n<p>This surely won't scale well as this these tables gets large. Is there a way to push the aggregating and sorting logic down into Django / DB or an alternative approach for the same outcome? </p>\n"},{"tags":["python","django","dictionary"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13135145,"title":"Django problems when using dict comprehensions| NameError: global name 'User' is not defined","body":"<p>I am trying to create a dict with key as <code>name</code> and value as corresponding <code>User</code> object</p>\n\n<p>I am using django shell: <code>python manage.py shell</code></p>\n\n<pre><code>&gt;&gt;&gt; from django.contrib.auth.models import User\n&gt;&gt;&gt; names = ['carl', 'jim', 'jack', 'john', 'mark']\n# Now using some dict comprehension\n&gt;&gt;&gt; u = {name: User.objects.get(username=name) for name in names}\nNameError: global name 'User' is not defined\n</code></pre>\n\n<p>However, this works for me:</p>\n\n<pre><code>u = {}\nfor name in names:\n    u[name] = User.objects.get(username=name)\n</code></pre>\n\n<p>and I get the desired output, which is</p>\n\n<pre><code>{ \n  'carl': &lt;User: carl&gt;,\n  'jack': &lt;User: jack&gt;,\n  'jim' : &lt;User: jim&gt;,\n  'john': &lt;User: john&gt;,\n  'mark': &lt;User: mark&gt;\n}\n</code></pre>\n\n<p>I know, there are other ways to accomplish this, but I am curious why are the dict comprehensions not working here. </p>\n\n<p>Any tips ? or am I missing something here ?</p>\n"},{"tags":["django","validation","modelform"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":11768767,"title":"displaying errors with django ModelForm","body":"<p>I am having trouble figuring out how to control field validation for ModelForms.</p>\n\n<p>Here is my Model Form:</p>\n\n<pre><code>class UserForm(ModelForm):\n    class Meta:\n        model = User\n        fields = ('email', 'password')\n</code></pre>\n\n<p>Here is how I am rendering my form in the template:</p>\n\n<pre><code>&lt;form method=\"post\" action=\"\"&gt;\n    {% csrf_token %}\n    {{ userform.as_p }}\n    &lt;input type=\"submit\" value=\"Submit\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Here is my view:</p>\n\n<pre><code>def login_page(request):\n    if request.method == 'POST':\n        userform = UserForm(request.POST)\n        if userform.is_valid():\n            email = request.POST['email']\n            password = request.POST['password']\n            user = authenticate(username=email, password=password)\n            if user is not None:\n                login(request, user)\n                return redirect('/dashboard/')\n            else:\n                # How can I give the user feedback about authentication failute here. Right now it just reloads the form without any messages.\n                return render(request, \"login.html\", {\"userform\": userform}) \n        else:\n            # Because .is_valid() is called, The userform will validate for email addresses and that a password input is present here.\n            return render(request, \"login.html\", {\"userform\": userform}) \n    else:\n        userform = UserForm()\n        return render(request, \"login.html\", {\"userform\": userform})\n</code></pre>\n\n<p>From reading the docs, this seems like it should be as simple as passing my form some custom attribute; but since I am working with a ModelForm, I am unsure whether this is achieved in the same way.</p>\n\n<p>Could anyone provide an example or tips on how best to control ModelForm field errors?</p>\n\n<p>Thanks!</p>\n"},{"tags":["django","django-admin"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":514,"score":1,"question_id":6304176,"title":"Django Admin: Add text at runtime next to a field","body":"<p>I want to add a text next to a field of the django admin interface.</p>\n\n<p>The warning needs to created at runtime inside a python method. I know python and the django ORM well, but I don't know how to get the text next the field.</p>\n\n<p>The text should be a warning. Raising ValidationError in clean() is not a solution, since\nthe user can't edit the page any more. It should be just a warning message.</p>\n"},{"tags":["html","django"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":61,"score":5,"question_id":13125006,"title":"How to remove white space from html source code","body":"<p>I am using django and python. In the template file, I have a drop-down list which is shown as below. It works. The only problem is that there is a lot of white space between  in the source html code. Is there any way to remove the white space? Thanks.</p>\n\n<pre><code>           {% for lang_ele in video.languages.all %}\n              {% ifequal lang_ele.lang display_language  %}\n                   {% for key, value in language_table.items %}\n                       {% ifequal lang_ele.lang key%}\n                         &lt;option selected = \"selected\" value={{lang_ele.lang}}&gt;{{value}}&lt;/option&gt;\n                       {% endifequal %}\n                   {% endfor %}\n              {% else %}\n                   {% for key, value in language_table.items %}\n                       {% ifequal lang_ele.lang key%}\n                         &lt;option value={{lang_ele.lang}}&gt;{{value}}&lt;/option&gt;\n                       {% endifequal %}\n                   {% endfor %}\n\n              {% endifequal %}\n           {% endfor %}\n</code></pre>\n\n<p>The output html souce code looks like this:</p>\n\n<pre><code>&lt;option value=de&gt;German&lt;/option&gt; \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                         &lt;option value=el&gt;Greek&lt;/option&gt; \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n                         &lt;option value=hi&gt;Hindi&lt;/option&gt; \n</code></pre>\n"},{"tags":["django","forms","url","redirect"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13133930,"title":"How to use an action in a form, but still ultimately redirect to the original URL, as smoothly as possible","body":"<p>I'm using Django but being crazy and submitting forms with Javascript and stuff. </p>\n\n<p>I have a form that has an action that's only there because I couldn't get it to process the data I wanted correctly (that is, I'm using the action URL to redirect to two different parts of a view that each do what I want). It's working great, except after using the forms I see the URL <code>www.example.com/formone</code> and <code>www.example.com/formtwo</code> after pressing each. Due to the way it's setup it looks just like <code>www.example.com</code>, except for the URL. Also if you reload the page without the <code>POST</code> data, using the same URL, it fails, because I only process post data from those URLs.</p>\n\n<p>Is there a way to redirect at the end of the <code>view</code>?</p>\n\n<p>For example, something like:</p>\n\n<pre><code>def formone(request):\n...\n...\nreturn render(request, 'example.html', 'www.example.com', {\n         'formone': form, 'formtwo': voteform, 'items': items\n            })\n</code></pre>\n\n<p>where <code>www.example.com</code> is the redirect URL, would be desirable. I can probably do this in Javascript on the actual page, but that seems even more sketchy.</p>\n"},{"tags":["django","virtualenv"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13126118,"title":"How to install Django in virtualenv","body":"<p>I have installed virtualenv and setup my environment like this</p>\n\n<pre><code>sudo pip install virtualenv\nsudo mkdir /vc\nsudo chown ubuntu:ubuntu /vc\ncd /vc/\nvirtualenv --no-site-packages cb-env\ncd cb-env/\nsource bin/activate\n</code></pre>\n\n<p>It all works and I see (cb-env)ubuntu@ip:\nnow when I try to install django without sudo it fails:</p>\n\n<pre><code>pip install django\n\nOSError: [Errno 13] Permission denied: '/vc/cb-env/build/django'\n</code></pre>\n\n<p>What am I missing? Thanks</p>\n"},{"tags":["django","unicode"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":13109738,"title":"Django request with unicode strings wrongly UTF-8 encoded","body":"<p>I'm having some trouble making my website compatible with accented characters (french website).</p>\n\n<p>I have a form where some field values can be with accented chars:  \"Coupé\" for instance.</p>\n\n<p>My URL looks like this:</p>\n\n<pre><code>http://localhost:8080/recherches/s?marque=Audi&amp;modeles=A5+Coup%C3%A9\n</code></pre>\n\n<p>In my django view I do something like this:</p>\n\n<pre><code>def search(request):\n  logger = logging.getLogger('custom')\n  criteria_form = CriteriaForm(request.GET or None)\n  logger.debug(\"search\")\n  logger.debug(request.GET)\n</code></pre>\n\n<p>And what I get in my logs is:</p>\n\n<pre><code>&lt;QueryDict: {u'marque': [u'Audi'], u'modeles': [u'A5 Coup\\xc3\\xa9']}&gt;\n</code></pre>\n\n<p>If I query my database with this variable \"modeles\", I get an error:</p>\n\n<pre><code>&gt;&gt;&gt; mo = u'A5 Coup\\xc3\\xa9'\n&gt;&gt;&gt; Vehicule.objects.filter(valid=True, modele=mo)[0].marque.name\nTraceback (most recent call last):\n  File \"&lt;console&gt;\", line 1, in &lt;module&gt;\n  File \"/Library/Python/2.7/site-packages/django/db/models/query.py\", line 211, in __getitem__\n    return list(qs)[0]\nIndexError: list index out of range\n</code></pre>\n\n<p>Things work if I query the database with the utf-8 version:</p>\n\n<pre><code>&gt;&gt;&gt; mo = 'A5 Coup\\xc3\\xa9'\n&gt;&gt;&gt; Vehicule.objects.filter(valid=True, modele=mo)[0].marque.name\nu'Audi'\n</code></pre>\n\n<p>So I think (but I might be wrong) that my problem comes from the fact that my variable is utf8 and then encoded with unicode.</p>\n\n<p>How comes this is encoded that way?</p>\n\n<p>UPDATE AFTER 1st RESPONSE:</p>\n\n<p>On the header of the page that sends the form there is:</p>\n\n<pre><code>&lt;meta http-equiv=\"Content-type\" content=\"text/html;charset=UTF-8\"/&gt;\n</code></pre>\n\n<p>However if I print in my views.py the encoding:</p>\n\n<pre><code>logger.debug(request.encoding)\n</code></pre>\n\n<p>Then I get None.</p>\n\n<p>But I don't know how to setup this encoding. I thought it would be from the header like I did above...</p>\n\n<p>Also I have that in my HTTP_ACCEPT_CHARSET:</p>\n\n<pre><code>HTTP_ACCEPT_CHARSET ISO-8859-1,utf-8;q=0.7,*;q=0.3\n</code></pre>\n\n<p>Can that come from here? If yes, how should I change that?</p>\n"},{"tags":["django","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13133258,"title":"managing relative urls in static html files for django","body":"<p>I have a static directory which contains bunch of html files and images. All html files contain links to each other using relative paths. For instance, a page describing an algorithm has a link such as <code>&lt;a href ../../newmethod/algo2.html&gt;Algorithm 2&lt;/a&gt;</code>. Everything in this directory works very well in a portable manner in any static server.</p>\n\n<p>I want to use django to add a page banner to each html file under this directory. Is there anyway to achieve this using a template which contains the banner code and includes the static htmls file using an \"ssi\" directive?</p>\n\n<p>The problem that I cannot find a solution is the relative paths in the static htmls. When I include the static html in the template with ssi, the relative paths (such as the image paths in the html file), become completely wrong. For instance an image with <code>&lt;img src='../images/flow.bmp&gt;</code> in the static html does not point to correct address of the image any more. </p>\n\n<p>Is there anyway to correct this relative url problem in django?</p>\n"},{"tags":["jquery","ajax","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13132531,"title":"Django Jquery Ajax","body":"<p>After searching, I have yet to find the solution to my jquery-related question online. </p>\n\n<p>I have multiple <code>(div class='rate')</code> elements on a page that I would like to be updatable via ajax. index.html:</p>\n\n<pre><code>    {% for thing in thing_list %}\n    &lt;div class='rate'&gt;&lt;a href='{% url thing_rating %}'&gt;Rate&lt;/a&gt;&lt;/div&gt;\n    {% endfor %}\n</code></pre>\n\n<p>They reference a url kind of like: urls.py</p>\n\n<pre><code>url(r'^(?P&lt;object_id&gt;\\d+)/rate/(?P&lt;score&gt;[\\d\\-]+)/$', 'myview', name='thing_rating'),\n</code></pre>\n\n<p>I do check for <code>request.is_ajax()</code> in the view: view.py:</p>\n\n<pre><code>def myview(request):\n    if request.is_ajax():\n        // doing some other stuff here\n        return render_to_response('rate.html', context_instance=RequestContext(request))\n</code></pre>\n\n<p>My ajax needs help..:</p>\n\n<pre><code>$( document ).ready( function() {\n$('div#rate').click(function(){\n  $.ajax({\n  type: \"POST\",\n  url:\"/????/\",\n  data: { ????? },\n  success: function(data){ ????? },\n  error: function(){ alert(\"Error\"); },\n});\n}\n</code></pre>\n\n<p>How do I reference the url in the above jquery? Via the same regex as in my urls.py? </p>\n\n<p>What should I be passing as the data and success functions? All of the heavy lifting is done in my view..</p>\n\n<p>Thanks for your ideas!</p>\n"},{"tags":["python","django","reportlab"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13129015,"title":"Generate multiple qr codes in one pdf file using reportlab and django framework","body":"<p>Using reportlab, How can I generate a series of qr codes and put them in one pdf and then open it on the user browser. Here is my attempt. Thanks in advance. For this code below, nothing happens. I was expecting to be prompted to save the pdf file.</p>\n\n<pre><code>from reportlab.pdfgen import canvas\nfrom django.http import HttpResponse\nfrom reportlab.graphics.shapes import Drawing \nfrom reportlab.graphics.barcode.qr import QrCodeWidget \nfrom reportlab.graphics import renderPDF\n# Create the HttpResponse object with the appropriate PDF headers.\nresponse = HttpResponse(mimetype='application/pdf')\nresponse['Content-Disposition'] = 'attachment; filename=\"somefilename.pdf\"'\n\np = canvas.Canvas(response)\n\nqrw = QrCodeWidget('Helo World!') \nb = qrw.getBounds()\n\nw=b[2]-b[0] \nh=b[3]-b[1] \n\nd = Drawing(45,45,transform=[45./w,0,0,45./h,0,0]) \nd.add(qrw)\n\nrenderPDF.draw(d, p, 1, 1)\n\np.showPage()\np.save()\nreturn response\n</code></pre>\n"},{"tags":["django","foreign-keys"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13116130,"title":"Django suffix ForeignKey field with _id","body":"<p>Suppose I have a field f in my model defined as follows as a foreign key:</p>\n\n<pre><code>f = models.ForeignKey(AnotherModel)\n</code></pre>\n\n<p>When Django syncs database, the filed created in db will be called <code>f_id</code>, automatically suffixed with '_id'.</p>\n\n<p>The problem is i want this field in db named exactly as what I defined in model, <code>f</code> in this case. How should I do that?</p>\n"},{"tags":["python","django","postgresql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13114411,"title":"Postgresql socket error when running Django's syncdb (mac OS 10.7.5)","body":"<p>I'm trying to run Django's syncdb operation and am getting the following error:</p>\n\n<pre><code>psycopg2.OperationalError: could not connect to server: Permission denied\n    Is the server running locally and accepting\n    connections on Unix domain socket \"/var/pgsql_socket/.s.PGSQL.5432\"?\n</code></pre>\n\n<p>I've read the answers to <a href=\"http://stackoverflow.com/questions/9133870/postgresql-socket-error-on-osx-10-7-3-when-running-djangos-syncdb\">this question</a> and have tried the following:</p>\n\n<ul>\n<li> changing \"listen_address\" to \"localhost\" or \"*\" in /Library/PostgreSQL/9.1/data/potsgresql.conf\n<li> changing \"host\" to \"localhost\" in my settings.py file (for Django)\n<li> user is set to \"postgres\" with correct password in settings.py\n</ul>\n\n<p>(I restarted the postgresql server after each step.)</p>\n\n<p>I've also checked my pg_hba.conf file to see if the Unix domain socket was accepting connections from all users (based on <a href=\"http://www.faqforge.com/linux/server/postgresql/configure-postgresql-accept-connections/\" rel=\"nofollow\">this page</a>). Here's what I have there:</p>\n\n<pre><code># \"local\" is for Unix domain socket connections only\nlocal   all             all                                     md5\n# IPv4 local connections:\nhost    all             all             127.0.0.1/32            md5\n# IPv6 local connections:\nhost    all             all             ::1/128                 md5\n</code></pre>\n\n<p>I never had this problem before. I somewhat recently upgraded to Lion and am working on a new virtualenv with the bare minimum of modules installed.</p>\n"},{"tags":["django","templates"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13124278,"title":"Django display additional info for items in a list","body":"<p>I've a problem and i don't know the <em>right</em> way to solve it.</p>\n\n<p>Basically,i've a mode, called Task:</p>\n\n<pre><code>class Task(models.Model):\n    #mto1: many task made of one template\n    template = models.ForeignKey(Template)\n    STATUS_CHOISE = (('PR', 'In process'), ('ST', 'Stopped'), ('FN', 'Finished'), ('DL', 'Deleted'),)\n    status = models.CharField(max_length=2, choices=STATUS_CHOISE, default='ST')\n    responses_required = models.IntegerField(default=0)\n    date_deadline = models.DateTimeField(auto_now=False, auto_now_add=False)\n    date_created = models.DateTimeField(auto_now_add=True, auto_now=False)\n</code></pre>\n\n<p>which can have several answers</p>\n\n<pre><code>class Response(models.Model):\n    #mto1: many Responses generated for one task\n    task = models.ForeignKey(Template)\n    STATUS_CHOISE = (('PR', 'Process'), ('FN', 'Finished'))\n    status = models.CharField(max_length=2, choices=STATUS_CHOISE, default='ST')\n    date_finished= models.DateTimeField(auto_now_add=False, auto_now=True)\n    date_created = models.DateTimeField(auto_now_add=True, auto_now=False)\n    ip_address=models.IPAddressField()\n</code></pre>\n\n<p>now, i would like to display all the task of one user (which comes from the template model, and this is done) with additional information about the answers, which are\n- number of answer give (so which status is = FN)\n- number of total answer (status FN or PR)\n- and maybe some extra info.</p>\n\n<p>i did this</p>\n\n<pre><code>@login_required\ndef TemplateList(request):\n    task_list = Task.objects.filter(user=request.user)\n    return render_to_response('task_list.html',{'task_list':task_list}, context_instance=RequestContext(request))\n</code></pre>\n\n<p>but this just display the data present in the model, what about the value i've to compute?</p>\n\n<p>so far i did it with CustomTag, but it doesn't seem a clean solution. i would rather do the logic in the view and then use the template just for display results.\nBut: how can i add this value to each item of the Task List?</p>\n\n<p>do i have to do like in this:  <a href=\"http://stackoverflow.com/questions/12129906/passing-additional-data-to-a-template-in-django\">Passing additional data to a template in Django</a> so create the objects from scratch (which requires me some logic in the template as well since i've to match the value in the list with the objects i crate)? or is there any better solution?</p>\n\n<p>i tried generic view ,like  list_detail.object_list\nin this way</p>\n\n<pre><code>def TaskListDetail(request):\nreturn list_detail.object_list(\n    request,\n    queryset = Task.objects.filter(user=request.user),\n    template_name = 'task_list.html',\n    template_object_name = 'task_list',\n\n)\n</code></pre>\n\n<p>but first, it does not show anything (while the other view shows data), second i don't know how to add extra data in a way that they are matched with the item of the list. </p>\n\n<p>any suggestion?</p>\n"},{"tags":["django","install"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":13129833,"title":"How can I install Django version 1.5?","body":"<p>If I do <code>pip install django</code> I get version 1.4.  If I do <code>pip install Django==1.5</code> I get the message <code>Could not find a version that satisfies the requirement Django==1.5 (from versions: )</code>.  If I install the latest version from github I get version 1.6 alpha.</p>\n"},{"tags":["python","django"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":409,"score":0,"question_id":8734617,"title":"Python/Django \"BadStatusLine\" error","body":"<p>I'm getting a weird error that I can't seem to find a solution for.</p>\n\n<p>This error does not occur every time I hit this segment of code, and neither does it happen for the same iteration through the loop (it happens in a loop). If I run it enough, it doesn't seem to encounter the error and the program executes successfully. Regardless, I'd still like to figure out why this is happening.</p>\n\n<p>Here is my error, versions, trace, etc: <a href=\"http://dpaste.com/681658/\" rel=\"nofollow\">http://dpaste.com/681658/</a></p>\n\n<p>It seems to happen with the following line in my code:</p>\n\n<pre><code>page = urllib2.urlopen(url)\n</code></pre>\n\n<p>Where url is.... a URL obviously.</p>\n\n<p>And do have <code>import urllib2</code> in my code.</p>\n"},{"tags":["django","api","rest","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13094835,"title":"How to use Tastypie to wrap internal functions","body":"<p>I have a Django web application, which allows users to do stop/start/install_pkg on a remote server over HTTP from UI. Django web app has start / stop / install_pkg functions already implemented which basically creates the appropriate URL and calls the HTTP url with params.</p>\n\n<p>My goal is to use the same internal functions when user does a REST call like the following:</p>\n\n<pre><code>1. https://api/v1/server/&lt;server_name&gt;/start/?api_key=&lt;api_key&gt;&amp;params=&lt;params&gt;\n2. https://api/v1/server/&lt;server_name&gt;/stop/?api_key=&lt;api_key&gt;&amp;params=&lt;params&gt;\n3. https://api/v1/server/&lt;server_name&gt;/install_pkg/?api_key=&lt;api_key&gt;&amp;params=&lt;params&gt;\n</code></pre>\n\n<p>And return JSON response to the caller containing remote server response object. </p>\n\n<p>So far I have used Tastypie library to expose read-only access to model data of the Django web app over REST. </p>\n\n<p>Tastypie tutorial on <a href=\"https://django-tastypie.readthedocs.org/en/latest/non_orm_data_sources.html?highlight=non%20orm\" rel=\"nofollow\">Non ORM resource</a> shows how to interact with non ORM resources by overriding 9 methods of Tastypie. But given my limited knowledge and understanding I am unclear about how to use Tastypie for my case. Am I missing anything here?</p>\n\n<h2>EDITED: (29 Oct 2012)</h2>\n\n<p>To clarify further - Django web app has ORM entry for each of the remote servers in but this information is static info about a particular remote server like (name, ip, domain, ...) since it is created at the time of registering the remote server to Django web app. </p>\n\n<p>The web service call from the Django web app to the remote server fetches the most current state of the remote server like (app_state, pkg_installed_list, ...) and this data is not getting stored anywhere in my Djnago web app. It is rendered as it is in UI.</p>\n\n<p>Thus a GET on Django web app about the remote server essentially returns the static info.</p>\n\n<p>Thanks,</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":277,"score":2,"question_id":5780397,"title":"How to use Django-filer(asset file manager)?","body":"<p>Hi Can someone point me to the right direction on how to use Django-filer. I have installed the necessary tools for the filer to work and i get the Filer tab in the admin interface, but when i upload an image to the app i am not able to get the preview thumbimage, the image is also uploaded to the Media_root path(Public files default path). What else have i missed.  </p>\n"},{"tags":["django","django-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13129624,"title":"Django check for error messages in context","body":"<p>I have a simple test:</p>\n\n<pre><code>def test_project_info_form_post_submission(self):\n    \"\"\"\n    Test if project info form can be submitted via post.\n    \"\"\"\n    # set up our POST data\n    post_data = {\n        'zipcode': '90210',\n        'module': self.module1.pk,\n        'model': self.model1.pk,\n        'orientation': 1,\n        'tilt': 1,\n        'rails_direction': 1,\n    }\n    ...\n    response = self.client.post(reverse(url), post_data)\n    self.assertEqual(response.status_code, 302)\n\n    # test empty form\n    response = self.client.post(reverse(url))\n    self.assertEqual(response.status_code, 200)\n    #! test for general form error message \n\n    # now test invalid responses\n    post_data['zipcode'] = 'abcdefg'\n    response = self.client.post(reverse(url), post_data)\n    self.assertEqual(response.status_code, 200)\n    #! test for specific error message associated with zipcode\n</code></pre>\n\n<p>So the lines I am having trouble with are marked with shebangs. I know I should have messages in the context variable but can't seem to figure out the right ones to use.</p>\n"},{"tags":["django","nginx","uwsgi"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12677335,"title":"Nginx and uWSGI stripping HTTP_AUTHORIZATION","body":"<p>I am working with an API and it seems that Nginx and uWSGI are removing the HTTP_AUTHORIZATION header that I pass.</p>\n\n<p>I send a curl POST to my API server which runs Django.  When I have Django print out a list of request.META I see that HTTP_AUTHORIZATION is missing.</p>\n\n<pre><code>Nginx config contains these:\nuwsgi_pass_header HTTP_AUTHORIZATION;\nuwsgi_pass_request_headers on;\n</code></pre>\n\n<p>But doing these two passes doesn't seem to have any affect.</p>\n\n<p>Any idea why there is this stripping... is it happening at the Nginx level, the uWSGI level, or the Django level?</p>\n"},{"tags":["python","django","apache","nginx","thumbnails"],"answer_count":8,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":2005,"score":2,"question_id":2106507,"title":"Dynamically create image thumbnails (using django)","body":"<p>I would like to dynamically create thumbnails based on parameters in the URL. For example, <code>http://mysite.com/images/1234/120x45.jpg</code> would create a <code>120x45</code> thumbnail for image id <code>1234</code>.</p>\n\n<p>The obvious solution to this is to have a django view which does the following:</p>\n\n<ol>\n<li>Look for a previously cached version of the image at this size.</li>\n<li>Create a thumbnail if it's not cached (some logic for locking so that only 1 process creates the thumbnail and other processes wait).</li>\n<li>Pipe the results through django.</li>\n</ol>\n\n<p>That should \"work\", but I'm concerned about performance. I don't like the idea of using django to serve static content. What are some other ways to accomplish this problem?</p>\n"},{"tags":["python","django","ubuntu"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13127708,"title":"How to remove .upload file","body":"<p>When I use a form to upload a large video to the server, there is a temp.upload created in the /tmp directory. Where does this .upload created? Can I remove it after the uploading is complete? I use Django and python on ubuntun. </p>\n\n<p>I check Django documentation for file upload. It says that: </p>\n\n<p>\"If an uploaded file is too large, Django will write the uploaded file to a temporary file stored in your system's temporary directory. On a Unix-like platform this means you can expect Django to generate a file called something like /tmp/tmpzfp6I6.upload. If an upload is large enough, you can watch this file grow in size as Django streams the data onto disk.\"</p>\n\n<p>How to let Django to remove this file automatically after the uploading is complete? How can I get this temporary .upload path information ?</p>\n\n<p>Thanks</p>\n"},{"tags":["django","django-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13128443,"title":"Django testing stored session data in tests","body":"<p>I have a view as such:</p>\n\n<pre><code>def ProjectInfo(request):\n    if request.method == 'POST':\n        form = ProjectInfoForm(request.POST)\n        if form.is_valid():\n            # if form is valid, iterate cleaned form data\n            # and save data to session\n            for k, v in form.cleaned_data.iteritems():\n                request.session[k] = v\n            return HttpResponseRedirect('/next/')\n        else:\n            ...\n    else:\n        ...\n</code></pre>\n\n<p>And in my tests:</p>\n\n<pre><code>from django.test import TestCase, Client\nfrom django.core.urlresolvers import reverse\nfrom tool.models import Module, Model\nfrom django.contrib.sessions.models import Session\n\ndef test_project_info_form_post_submission(self):\n    \"\"\"\n    Test if project info form can be submitted via post.\n    \"\"\"\n    # set up our POST data\n    post_data = {\n        'zipcode': '90210',\n        'module': self.module1.name,\n        'model': self.model1.name,\n        'orientation': 1,\n        'tilt': 1,\n        'rails_direction': 1,\n    }\n    ...\n    self.assertEqual(response.status_code, 302)\n    # test if 'zipcode' in session is equal to posted value.\n</code></pre>\n\n<p>So, where the last comment is in my test, I want to test if a specific value is in the <code>session</code> dict and that the key:value pairing is correct. How do I go about this? Can I use <code>request.session</code>?</p>\n\n<p>Any help much appreciated.</p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13128127,"title":"Can I somehow use the to_field parameter in a Django ManyToMany field?","body":"<p>In Django's <code>ForeignKey</code> field I can specify the <code>to_field</code>. This is great, as I can use slugs as foreign keys and do the equivalent of the 'natural key' functionality. </p>\n\n<p>I can't find any such field in <code>ManyToMany</code>. I don't see why not. Is there some way to do this? Perhaps do it explicitly in my own m2m join table with <code>through</code>?</p>\n"},{"tags":["python","mysql","django","query","django-models"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13127526,"title":"Django Query Optimization - Using Itertools","body":"<p>I have an educational site that serves up curriculum based upon Grade level.</p>\n\n<ol>\n<li><p>The GradeLevel table stores all of the possible Grade Levels. Then I have LessonCategories and LessonCurriculum tables.</p></li>\n<li><p>The GradeLevel table has reverse relationships established with the curriculum and categories tables.</p></li>\n<li><p>I loop through each grade in the GradeLevel table, (8 grades), and grab the respective, curriculum and categories along the way.</p></li>\n<li><p>Upon completion, I stuff all of the collected curriculum and categories into a list and and pass that to my template.</p></li>\n</ol>\n\n<p>Now, the problem is that Django is evaluating each query AT LEAST twice. Once for the initial request and the second when I put it into the list. (I am using itertools to chain the results. Itertools is causing the queries to be run again.) This is having the adverse effect of slowing my server down to a crawl.</p>\n\n<p>My question is if someone could take a look at my models and queries and make a suggestion as to a better way to query as to avoid and/or mitigate this MAJOR performance bottle-neck.</p>\n\n<p><strong>GradeLevel Model:</strong></p>\n\n<pre><code>class GradeLevel(models.Model):\n    title = models.CharField('Grade',max_length=10, null=True, blank=True, db_index=True)\n    fullname = models.CharField('Description',max_length=100, null=True, blank=True, db_index=True)\n</code></pre>\n\n<p><strong>LessonCategory Model:</strong></p>\n\n<pre><code>class LessonCategory(models.Model):\n    title = models.CharField(max_length=255, null=True, blank=True, db_index=True)\n    ...\n    gradelevel = models.ManyToManyField(GradeLevel, related_name='grade_cats', null=True, blank=True)\n</code></pre>\n\n<p><strong>LessonCurriculum:</strong></p>\n\n<pre><code>class LessonCurriculum(models.Model):         \n    title = models.CharField(max_length=255, null=True, blank=True, db_index=True)\n    ...\n    gradelevel = models.ManyToManyField(GradeLevel, related_name='grade_curriculum', null=True, blank=True)\n</code></pre>\n\n<p>My View:</p>\n\n<pre><code>from itertools import chain\nfrom operator import attrgetter\n\ndef my_view(request):\n    grade_pk =  GradeLevel.objects.prefetch_related().get(title='pre-k')\n    grade_pk_categories = grade_pk.grade_cats.filter(active=True,featured=True)\n    grade_pk_galleries = grade_pk.grade_curriculum.filter(active=True,featured=True)\n\n    grade_k =  GradeLevel.objects.prefetch_related().get(title='k')\n    grade_k_categories = grade_k.grade_cats.filter(active=True,featured=True)\n    grade_k_galleries = grade_k.grade_curriculum.filter(active=True,featured=True)\n\n    grade_1 =  GradeLevel.objects.prefetch_related().get(title='1')\n    grade_1_categories = grade_1.grade_cats.filter(active=True,featured=True)\n    grade_1_galleries = grade_1.grade_curriculum.filter(active=True,featured=True)\n\n    grade_2 =  GradeLevel.objects.prefetch_related().get(title='2')\n    grade_2_categories = grade_2.grade_cats.filter(active=True,featured=True)\n    grade_2_galleries = grade_2.grade_curriculum.filter(active=True,featured=True)\n\n    grade_3 =  GradeLevel.objects.prefetch_related().get(title='3')\n    grade_3_categories = grade_3.grade_cats.filter(active=True,featured=True)\n    grade_3_galleries = grade_3.grade_curriculum.filter(active=True,featured=True)\n\n    grade_4 =  GradeLevel.objects.prefetch_related().get(title='4')\n    grade_4_categories = grade_4.grade_cats.filter(active=True,featured=True)\n    grade_4_galleries = grade_4.grade_curriculum.filter(active=True,featured=True)\n\n    grade_5 =  GradeLevel.objects.prefetch_related().get(title='5')\n    grade_5_categories = grade_5.grade_cats.filter(active=True,featured=True)\n    grade_5_galleries = grade_5.grade_curriculum.filter(active=True,featured=True)\n\n    grade_6 =  GradeLevel.objects.prefetch_related().get(title='6')\n    grade_6_categories = grade_6.grade_cats.filter(active=True,featured=True)\n    grade_6_galleries = grade_6.grade_curriculum.filter(active=True,featured=True)\n\n    grade_7 =  GradeLevel.objects.prefetch_related().get(title='7')\n    grade_7_categories = grade_7.grade_cats.filter(active=True,featured=True)\n    grade_7_galleries = grade_7.grade_curriculum.filter(active=True,featured=True)\n\n    grade_8 =  GradeLevel.objects.prefetch_related().get(title='8')\n    grade_8_categories = grade_8.grade_curriculum.filter(active=True,featured=True)\n    grade_8_galleries = grade_8.grade_curriculum.filter(active=True,featured=True)\n\n    gallery_list = list(set(sorted(chain(grade_pk_categories,grade_pk_galleries,grade_k_categories,grade_k_galleries,grade_1_categories,grade_1_galleries,grade_2_categories,grade_2_galleries,grade_3_categories,grade_3_galleries,grade_4_categories,grade_4_galleries,grade_5_categories,grade_5_galleries,grade_6_categories,grade_6_galleries,grade_7_categories,grade_7_galleries,grade_8_categories,grade_8_galleries), key=attrgetter('display_order'))))\n</code></pre>\n"},{"tags":["python","django","json","django-models","serialization"],"answer_count":6,"favorite_count":10,"up_vote_count":20,"down_vote_count":0,"view_count":6770,"score":20,"question_id":757022,"title":"How do you serialize a model instance in Django?","body":"<p>There is a lot of documentation on how to serialize a Model QuerySet but how do you just serialize to json the fields of a Model Instance?</p>\n"},{"tags":["python","django","if-statement"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13127353,"title":"if statement in django","body":"<p>I'm doing tests with django on my pc, if I run the code without else the if statement is true and r1 variable is right.</p>\n\n<pre><code>def trovapernome(request, aggregatore, nome):\n    url = urllib.urlopen(\"http://127.0.0.1:8000/media/%s.xml\" % (aggregatore))\n    richiesta = url.read()\n    tree = ET.fromstring(richiesta)\n    iterator = tree.getiterator(\"location\")\n    t = get_template('prova.xml')           \n    for name in tree.iter('name'):\n        if name.text.lower() == nome.lower():\n            c = Context({'id' : name.text})\n            r1 = HttpResponse(t.render(c), mimetype='application/xml')\n            return r1\n</code></pre>\n\n<p>otherwise this code:</p>\n\n<pre><code>def trovapernome(request, aggregatore, nome):\n    url = urllib.urlopen(\"http://127.0.0.1:8000/media/%s.xml\" % (aggregatore))\n    richiesta = url.read()\n    tree = ET.fromstring(richiesta)\n    iterator = tree.getiterator(\"location\")\n    t = get_template('prova.xml')           \n    for name in tree.iter('name'):\n        if name.text.lower() == nome.lower():\n            c = Context({'id' : name.text})\n            r1 = HttpResponse(t.render(c), mimetype='application/xml')\n        else:  r1 = HttpResponse(t.render(Context({'id' : 'prova'})), mimetype='application/xml')\n    return r1\n</code></pre>\n\n<p>return always the else statement</p>\n"},{"tags":["django","django-templates","django-template-tags"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13127434,"title":"How to put 'url' template tag into 'with'","body":"<p>I am trying to cache return value of <code>{% url ..}</code> function to a variable with <code>with</code> template tag.</p>\n\n<p>here is my code:\n    {% with path=url \"show_cart\" %}\n            \n                 \n            </li>\n    {% endwith %}</p>\n\n<p>And with this code I get this exception: <code>TemplateSyntaxError</code> <code>u'with' received an invalid token: u'\"show_cart\"'</code></p>\n\n<p>Is it possible to assign result of <code>url</code> function to variable?</p>\n"},{"tags":["jquery","django","jquery-mobile","django-templates","django-views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":157,"score":0,"question_id":10324450,"title":"Jquery mobile is blocking downloading from my django based site","body":"<p>I have a download link on my site (Django based), that worked fine until I started using jQuery-mobile.  Now when I attempt hit the download link the jQuery-mobile loading screen appears and hangs indefinitely with the loading icon rotating.</p>\n\n<p>I have tried running just without jQuery and jQuery-mobile, and the download works. I have also tried just with jQuery and no jQuery-mobile and the download works.</p>\n\n<p>With all that in mind it seems that it is a problem with jQuery-mobile's page loading function, but I have no idea where to start and if that was the case I would expect to see lots of similar problems when I google it.</p>\n\n<p>Just incase it helps here are the headers from the file download view:</p>\n\n<pre><code>content_type = 'application/force-download'\nresponse['Content-Length'] = file_size\nresponse['Content-Disposition'] = 'attachment; filename=\"%s\"' % file_name\n</code></pre>\n"},{"tags":["django","performance","http","caching","http-etag"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":2752046,"title":"Any reason not to use USE_ETAGS with CommonMiddleware in Django?","body":"<p>The only reason I can think of is that calculating <code>ETag</code>'s might be expensive. If pages change very quickly, the browser's cache is likely to be invalidated by the <code>ETag</code>. In that case, calculating the <code>ETag</code> would be a waste of time. On the other hand, a giving a <code>304</code> response when possible minimizes the amount of time spent in transmission. What are some good guidelines for when <code>ETag</code>'s are likely to be a net winner when implemented with Django's <code>CommonMiddleware</code>?</p>\n"},{"tags":["django","nginx","memcached"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13115586,"title":"Caching Django with memcache and nginx not working","body":"<p>nginx conf</p>\n\n<pre><code>upstream django {\n   server 127.0.0.1:49152;\n}\n\nserver {\n    listen 80;\n    server_name myproj.org;\n\n    gzip on;\n    gzip_comp_level 9;\n\n    access_log /home/myuser/access.log;\n    error_log /home/myuser/error.log;\n\n    location /static  {\n        autoindex on;\n        alias /home/myuser/myenv/myproj/sitestatic/;\n    }\n\n    location / {\n        error_page 418 = @real;\n\n        if ($request_method = POST) {\n            return 418;\n        }\n\n        default_type \"text/html; charset=utf-8\";\n        set $memcached_key \"myproj-$uri\";\n        memcached_pass localhost:11211;\n        error_page 404 502 = @real;\n    }\n\n    location @real {\n        uwsgi_pass django;\n        include uwsgi_params;\n    }\n}\n</code></pre>\n\n<p>My pages aren't actually ever getting requested from the cache, each requests (regardless of POST or not) goes straight to my django setup!  I'm really confused, I can't just do</p>\n\n<pre><code>if ($request_method = POST) {\n    uwsgi_pass django;\n    include uwsgi_params;\n}\n</code></pre>\n\n<p>I can't do <code>include</code> inside an if in nginx, how can I (on POST requests) forward to my django application but otherwise go to memcache?  My site is working fine with this config, just not hitting the cache ever!</p>\n\n<p>Thanks guys!</p>\n\n<p>EDIT:\nI can't confirm that <code>set $memcached_key \"myproj-$uri\";</code> is actually getting set to 'myproj-/' (for example) for my home page.  How can I tell what $uri is?!</p>\n\n<hr>\n\n<h1>SOLVED</h1>\n\n<p>My cache key was being prefixed with <code>:1:</code> -- damnit!</p>\n"},{"tags":["python","django","django-forms","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13126590,"title":"Weird values for form.cleaned_data = {'name': {...}}","body":"<p>I have a simple form and a view that are doing something as basic as:</p>\n\n<pre><code>from annoying.decorators import ajax_request\n\n@require_POST\n@login_required\n@ajax_request\ndef my_view(request):\n    form = MyForm(request.POST)\n    if form.is_valid():\n        form.save(request.user)\n        return {\"ok\": True}\n    return {\"ok\": False, \"errors\": form.errors}\n</code></pre>\n\n<p>forms.py:</p>\n\n<pre><code>class MyForm(forms.Form):\n    name = forms.CharField(max_length=250)\n\n    def clean_name(self):\n        cleaned_data = self.cleaned_data\n\n        name = cleaned_data.get('name', '')\n        if MyModel.objects.filter(name__iexact=name).exists():\n            raise forms.ValidationError(_(u\"This already exists.\"))\n        return cleaned_data\n\n    def save(self, user):\n        obj, created = MyModel.objects.get_or_create(name=self.cleaned_data[\"name\"], user=user)\n        return obj\n</code></pre>\n\n<p>But I have a problem at getting the self.cleaned_data in <code>form.save</code> method.\nat the <code>MyForm.clean_name</code> my self.cleaned_data is cool.</p>\n\n<p>But at <code>form.save</code> level, the self.cleaned_data = {'name': {...}}\nSame for self.cleaned_data['name']. wait for it.. but also self.cleaned_data['name']['name']['name']['name']['name']...['name']['name']</p>\n\n<p>type(self.cleaned_data) and it's keys is <code>dict</code></p>\n\n<p>what could make my code behave like that?</p>\n"},{"tags":["python","django","compiler","comparison","benchmarking"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":495,"score":2,"question_id":5451246,"title":"django: on pypy, psyco, unladen swallow or cpython, which one is the fastest?","body":"<p>Has anyone tried to compare those python implementations?</p>\n\n<ul>\n<li>pypy</li>\n<li>psyco</li>\n<li>unladen swallow (is it dead?)</li>\n<li>cpython</li>\n</ul>\n\n<p>I am planning to squeeze something more from my server.</p>\n\n<p>Setup:</p>\n\n<ul>\n<li>Django 1.3</li>\n<li>Python 2.7</li>\n<li>Psycopg2 1.4</li>\n<li>apache 2</li>\n<li>mod_wsgi</li>\n<li>and... Windows server</li>\n</ul>\n\n<p>I am not a windows fanboy, but it has to be :{ There is some legacy code working on it.</p>\n"},{"tags":["mysql","django","multiple-databases","inconsistency","django-database"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13126064,"title":"Incosistency in Django multiple databases","body":"<p>I have set up Django multiple-database configs. I have one default database for writing and two slave databases for reading. I'm using mySql.</p>\n\n<p>Using Django shell, I write to the database and using the sql shell I can make sure the write operation was successful on the default and the slaves. </p>\n\n<p>However, when I try to query the database from the shell I can't find the latest added value. Am I missing something ?</p>\n"},{"tags":["python","django","django-admin","widget"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":144,"score":2,"question_id":9617927,"title":"Django, userfriendly way to order objects in filter_horizontal widget in admin","body":"<p>I often use the filter_horizontal attribute for many-to-many relationships which renders a FilteredSelectMultiple widget.</p>\n\n<p>The downside of this widget arises when the user needs to be able to order the objects. </p>\n\n<p>This is not user friendly because the order can only be modified on the change_view of the object itself. Which may live in a complete different area of the admin.</p>\n\n<p>Does anyone have ideas about how this can be improved? Is there a FilterSelectMultipleOrderable widget out there? (I didn't find it yet)</p>\n"},{"tags":["django","django-templates"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":522,"score":4,"question_id":6867468,"title":"Setting up Mimetype when using TemplateView in Django","body":"<p>Does anyboy know how do I set the desired mimetype when using TemplateView, as in:</p>\n\n<pre><code>urlpatterns = patterns('',\n    url(r'^test\\.txt$', TemplateView.as_view(template_name='staticpages/test.html')),\n</code></pre>\n\n<p>In this case, I want to set the mimtype as \"text/plain\"</p>\n"},{"tags":["javascript","jquery","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13124642,"title":"Jquery total noob import inquiry relating to where to put files","body":"<p>I downloaded the Jquery Raty plugin: <a href=\"https://github.com/wbotelhos/raty\" rel=\"nofollow\">https://github.com/wbotelhos/raty</a></p>\n\n<p>Then I installed this folder structure into my {{static_url}}js folder and named it Raty.</p>\n\n<p>Then I imported it into my template as follows and put the path as the location of where its images are stored.</p>\n\n<pre><code>  &lt;script type=\"text/javascript\" charset=\"utf-8\" src=\"{{ STATIC_URL }}js/raty/js/jquery.raty.min.js\"&gt;&lt;/script&gt;\n  &lt;script type=\"text/javascript\" charset=\"utf-8\"&gt;\n    $(document).ready(function() {\n         $('.thingrating').each(function(index){\n          $(this).raty({\n            readOnly:  false,\n            path: \"{{ STATIC_URL }}js/raty/img/\",\n            start: $(this).children(\"span:first\").text(),\n            click: function(score, evt) {\n                var vote_url = \"rate/\" + this.attr('id').substring(2) + \"/\" + score + \"/\";\n                $.ajax({\n                  url: vote_url,\n                  success: function(){\n                    alert('vote successful');\n                  }\n                });\n            }\n          });\n        });\n    });\n  &lt;/script&gt;\n</code></pre>\n\n<p>Is this correct? I'm not seeing that it is working in my template, so want to make sure this process of storing the script and importing it into my template is correct before I continue to decipher what is wrong...</p>\n\n<p>Here's the rest of my template:</p>\n\n<pre><code>{% block body %}\n    &lt;h2&gt;Things&lt;/h2&gt;\n        &lt;div class=\"block\" id=\"block-tables\"&gt;\n          &lt;div class=\"content\"&gt;\n            &lt;p&gt;&lt;/p&gt;\n            &lt;div class=\"inner\"&gt;\n                &lt;table class=\"table\"&gt;\n                  &lt;tr&gt;\n                    &lt;th class=\"first\"&gt;Name&lt;/th&gt;\n                    &lt;th class=\"last\"&gt;Rating&lt;/th&gt;\n                  &lt;/tr&gt;\n                  &lt;tr class=\"odd\"&gt;\n                    &lt;td&gt;{{ item.modelname }}&lt;/td&gt;\n                    &lt;td&gt;&lt;div class=\"thingrating\" id=\"t_{{ item.id }}\"&gt;&lt;span style=\"display:none;\"&gt;{{ score }}&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;\n                  &lt;/tr&gt;\n                &lt;/table&gt;\n                &lt;div class=\"actions-bar wat-cf\"&gt;       \n                &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n{% endblock %}\n</code></pre>\n"},{"tags":["python","django","choicefield"],"answer_count":7,"favorite_count":10,"up_vote_count":11,"down_vote_count":0,"view_count":11456,"score":11,"question_id":761698,"title":"How to get the label of a choice in a Django ChoiceField?","body":"<p>I have a ChoiceField, now how do I get the \"label\" when I need it?</p>\n\n<pre><code>class ContactForm(forms.Form):\n     reason = forms.ChoiceField(choices=[(\"feature\", \"A feature\"),\n                                         (\"order\", \"An order\")],\n                                widget=forms.RadioSelect)\n</code></pre>\n\n<p><code>form.cleaned_data[\"reason\"]</code> would only give me \"feature\" or \"order\" or so.</p>\n"},{"tags":["python","django"],"answer_count":4,"favorite_count":9,"up_vote_count":12,"down_vote_count":0,"view_count":2095,"score":12,"question_id":626754,"title":"How to find out the summarized text of a given URL in python / Django?","body":"<p>How to find out the summarized text for a given URL?</p>\n\n<p><strong>What do i mean by summarized text?</strong></p>\n\n<p><a href=\"http://www.bloomberg.com/apps/news?pid=20601103&amp;sid=a8p0FQHnw.Yo&amp;refer=us\" rel=\"nofollow\">Merck $41.1 Billion Schering-Plough Bid Seeks Science</a> <br/></p>\n\n<p><strong><em>Link Descrption</em></strong></p>\n\n<p><em>Merck &amp; Co.’s $41.1 billion purchase of Schering-Plough Corp. adds experimental drugs for blood clots, infections and schizophrenia and allows the companies to speed research on biotechnology drugs.</em></p>\n\n<p>For the above URL the below three lines  is the summary text.\n<br/>A short 2 to 3 line description of the URL which we usually obtain by fetching that page , examining the content thereafter figuring out short description from that html  markup.<br/> </p>\n\n<p>Are there any good algorithm which does this? (or) <br/>\nAre there any good libraries  in python/django which does this? </p>\n"},{"tags":["javascript","django","csp"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13124907,"title":"How to remove unsafe inline code for Content Security Policy?","body":"<p>I would like to use Content Security Policy and make my Django web application safe without any unsafe inline code. But while it is easy to move most of the JavaScript code to external files, I also have a segment of inline code which I do not know fix. I am using Django and I have some variables in Django template context which I want to pqww to JavaScript. So currently I simply output that as inline JavaScript. But this does not work because of CSP.</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n    /* &lt;![CDATA[ */\n    var documentURL = '{% filter escapejs %}{{ document.get_document_url }}{% endfilter %}';\n    /* ]]&gt; */\n&lt;/script&gt;\n</code></pre>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13123937,"title":"Is there a django equivalent to including local variables as in rails?","body":"<p>I'm learning Django, and I come from a rails background. As such, I'm asking a bunch of questions trying to find some grounding in django.</p>\n\n<p>When you call a partial in rails, you have the option to include some local variables as part of the call:</p>\n\n<pre><code> render 'folder_name/partial_name', :local_variable_name =&gt; 6 #or @variable or \"a string\" etc..\"\n</code></pre>\n\n<p>then in the partial, the variable \"local_variable_name\" is available:</p>\n\n<pre><code> &lt;h1&gt;&lt;%= local_variable_name %&gt;&lt;/h1&gt;\n</code></pre>\n\n<p>Is there some equivalent in the django include? eg, any way to change this to accomplish this task:</p>\n\n<pre><code> {% include 'folder_name/partial_name.html' %} \n</code></pre>\n"},{"tags":["python","django","partial"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13123696,"title":"how to include a template n times in django?","body":"<p>I would like to include a partial n times in a django app (I am new to/learning django). I am more experienced in rails, where I would simply write:</p>\n\n<pre><code> &lt;% 3.times do %&gt;\n    render 'feeds/feature'\n &lt;% end %&gt;\n</code></pre>\n\n<p>I would like to know how to do something similar in django. Here is what I thought to do:</p>\n\n<pre><code> {% i = 1%}\n {% for i =&lt; 9 %}\n   {% include 'feeds/feature.html'%}\n   {% i += 1%}\n {% end %}\n</code></pre>\n\n<p>This, however, does not work - i get a template syntax error Invalid block tag: 'i', expected 'endblock'</p>\n\n<p>Can I embed python into a django page like I do in rails? And, more importantly, how would I include the feature.html page n (or in this case 9) times in django?</p>\n"},{"tags":["python","django","django-templates","django-admin","django-guardian"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13122656,"title":"Django: Can't override admin templates when they are already overridden?","body":"<p>To add some content to a Django admin view of a model, I want to override the <code>change_form.html</code> template. Accorrding to the <a href=\"https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#overriding-admin-templates\" rel=\"nofollow\">documentation</a> I would need to create a file <code>change_form.html</code> in a the folder <code>/project-path/templates/admin/appname/modelname/</code>. Of course I need to make sure, that this path is also available in <code>TEMPLATE_DIRS</code>. Such a file could look like this:</p>\n\n<pre><code>{% extends \"admin/change_form.html\" %}\n{% load i18n  %}\n\n{% block after_field_sets %}\nSOME CONTENT\n{% endblock %}\n</code></pre>\n\n<p>However, I make use of <a href=\"https://github.com/lukaszb/django-guardian\" rel=\"nofollow\">django-guardian</a> to have object permissions. This Django app overrides <code>change_form.html</code> as well (which works fine -- relevant source seems to be <a href=\"https://github.com/lukaszb/django-guardian/blob/master/guardian/admin.py\" rel=\"nofollow\">here</a>), but Django doesn't pick up my template extension file (i.e. \"SOME CONTENT\" from the sample above isn't displayed). The blocks/parts I want to override are <em>not</em> the same ones that django-guardian overrides and eventually I want to have the additions to <code>change_form.html</code> of django-guardion <em>and</em> of my template.</p>\n\n<p>What am I doing wrong here? And is possible at all to have multiple applications overriding an admin template?</p>\n\n<p>If it is of interest, this is my <code>TEMPLATE_LOADERS</code> setting:</p>\n\n<pre><code>TEMPLATE_LOADERS = (\n    'django.template.loaders.filesystem.Loader',\n    'django.template.loaders.app_directories.Loader'\n)\n</code></pre>\n\n<p>Also, django-guardian is the last app in the <code>INSTALLED_APPS</code> array.</p>\n"},{"tags":["django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13123964,"title":"django database connection error with sql 2003","body":"<p>Am using django 1.3.3\npython 2.7\ndjango-mssql = 1.2\nAm tryin to connect to sql2003.</p>\n\n<p>Am getting the following exception:</p>\n\n<p>Caught OperationalError while rendering: (com_error(-2147352567, 'Exception occurred.', (0, u'Microsoft SQL Server Native Client ClientName', u'The requested properties cannot be supported.', None, 0, -2147217887), None), 'Error opening connection: DATA SOURCE=host;Initial Catalog=DatabaseName;UID=userid;PWD=password;PROVIDER=SQLNCLI10;MARS Connection=True;DataTypeCompatibility=80;MARS Connection=True;')</p>\n\n<p>Is there any extra stuff that am supposed to install</p>\n"},{"tags":["django","internationalization","django-localeurl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13122246,"title":"Django Locale Language change on Logout and Login","body":"<p>I'm using django-localeurl. And I'm having problems with the LANGUAGE when I do login or logout.\nIf I'm in english or portuguese and do login or logout django changes language to spanish.</p>\n\n<p>What can I do? What am I missing?</p>\n\n<p>Thanks a lot!!!</p>\n\n<hr>\n\n<p>UPDATE</p>\n\n<hr>\n\n<p>I'm using Django 1.4 BTW</p>\n"},{"tags":["django","sql-order-by"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13122826,"title":"Django models order_by non db field","body":"<p>I have this model:</p>\n\n<pre><code>class Foo(models.Model):\n    foo_id = models.IntegerField()\n    foo_old_prize = models.FloatField()\n    foo_new_prize = models.FloatField()\n\ndef get_dif(self):\n    return self.foo_old_prize  - self.foo_new_prize\n</code></pre>\n\n<p>Is there some trick how to do this <code>Foo.objects.all().order_by('get_dif')</code> ?</p>\n\n<p>Thx</p>\n"},{"tags":["django","django-models"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13120987,"title":"BigInt[] postgre in django model","body":"<p>How can I define bigInt[] in django model. \nI tried </p>\n\n<pre><code>   name = models.CommaSeparatedIntegerField(max_length = 500)\n   ss = SomeModel()\n   ss.name = '23, 23'\n   ss.save()\n</code></pre>\n\n<p>It's gives me Integrity Error. How can I slove the problem. \nUsing django 1.2</p>\n\n<p>Thanks,</p>\n"},{"tags":["python","django","bash","shell","gunicorn"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":13118362,"title":"gunicorn - not taking config file if executed from shell script","body":"<p>This is the code for my shell script : </p>\n\n<pre><code>#!/bin/bash  \nsource /path/to/active\ngunicorn_django -c /path/to/conf.py -D\n</code></pre>\n\n<p>The above sh file when executed, starts gunicorn process but it is not using the config file . </p>\n\n<p>But, if i execute the command directly from the command line, like </p>\n\n<pre><code>gunicorn_django -c path/to/conf.py -D\n</code></pre>\n\n<p>then it is using the config file . </p>\n\n<p>Also, in the sh file, if i give options directly like -w 3 -error-logfile etc.. then it is taking options .</p>\n"},{"tags":["android","django","http"],"answer_count":3,"favorite_count":40,"up_vote_count":28,"down_vote_count":0,"view_count":28158,"score":28,"question_id":2935946,"title":"Sending images using Http Post","body":"<p>I want to send an image from the android client to the Django server using Http Post. The image is chosen from the gallery. At present, I am using list value name Pairs to send the necessary data to the server and receiving responses from Django in JSON. Can the same approach be used for images (with urls for images embedded in JSON responses)? </p>\n\n<p>Also which of, accesssing images remotely without downloading them from the server or downloading and storing them in a Bitmap array and using them locally is a better method? The images are few in number (&lt;10) and small in size (50*50 dip).</p>\n\n<p>Any tutorial to tackle these problems would be much appreciated. </p>\n\n<p>Edit: The images chosen from the gallery are sent to the server after scaling it to required size.  </p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13116301,"title":"Django Queryset for no-operation","body":"<p>Is there any way to specify a Django Queryset, which will do nothing but still be valid Queryset? Empty queryset should ideally not call DB and results would be empty.</p>\n"},{"tags":["python","html","django","forms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13117477,"title":"How to Format/Overwrite Django Form Error Message?","body":"<p>forms.py</p>\n\n<pre><code>class MyForm(forms.Form):\n    no = forms.CharField(error_messages={'required': u'must be xxx')\n</code></pre>\n\n<p>template.html</p>\n\n<pre><code>{{form.no.error}}\n</code></pre>\n\n<p><code>{{form.no.error}}</code> is <code>&lt;ul class=\"errorlist\"&gt;&lt;li&gt;must be xxx&lt;/li&gt;&lt;/ul&gt;</code>\nI want to format <code>{{form.no.error}}</code> to plain text message without any html tags</p>\n"},{"tags":["python","django","django-templates","django-admin"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":86,"score":1,"question_id":13101281,"title":"In Django admin, how can I hide Save and Continue and Save and Add Another buttons on a model admin?","body":"<p>I have a workflow for a model in the Django admin that is very similar to the users' workflow. First, I have a form with basic fields and then, a second form with the rest of the data.</p>\n\n<p>It's the same workflow as auth.user</p>\n\n<p>I need to remove \"save and continue\" and \"save and add another\" buttons to prevent the user breakoing the workflow.</p>\n\n<p>I have tried to add it as extra_context</p>\n\n<pre><code>extra_context = {\n  'show_save_and_add_another': False,\n  'show_save_and_continue': False\n}\n</code></pre>\n\n<p>and pass it through ModelAdmin.add_view or ModelAdmin.change_view but it doesn't work.</p>\n\n<p>This is only for one model, so I don't want to remove from submit_line.html</p>\n\n<p>Any clue or alternative way?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["django","django-templates","django-sitetree"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":10079556,"title":"django-sitetree 0.7 sitetreedump not working","body":"<p>I am using <a href=\"https://github.com/idlesign/django-sitetree\" rel=\"nofollow\">django-sitetree</a> on a Django project.  It is working fine so far in my templates.  When I try to:</p>\n\n<pre><code>python manage.py sitetreedump &gt; treedump.json\n</code></pre>\n\n<p>I get an unknown command error back.  I must be missing something obvious.</p>\n"},{"tags":["python","django","multiple-sites"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":43,"score":1,"question_id":13118528,"title":"General idea about multi site","body":"<p>I want to implement the concepts of  Multiple sites to my project, for that I have studied the official <strong>\"<a href=\"https://docs.djangoproject.com/en/dev/ref/contrib/sites/?from=olddocs#module-django.contrib.sites\" rel=\"nofollow\">site framework</a> \"</strong> tutorial of django and other tutorials also.</p>\n\n<p>But I am  little bit confuse from where I should start, because as given in doc there are multiple site id's are used.But I have one as usual. And in some docs there are some editing is done in <strong>HTTPD.conf</strong> file </p>\n\n<p>So I didn't understand  from docs, from where I should start ?</p>\n\n<p>So please can any body tell me the steps of implementing multi site.</p>\n"},{"tags":["python","django","rest","tastypie"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":446,"score":0,"question_id":11225110,"title":"obj_create not working in tastypie","body":"<p>I am trying to implement user regsitration using tastypie, everything is working fine but when   ever i try to check whether user already exists  using obj_create method nothing is happening ...\nhow to call that in tastypie, is it called automatically ?</p>\n\n<pre><code>from _mysql_exceptions import IntegrityError\nfrom django.db.models.query_utils import Q\nfrom tastypie.authorization import Authorization\nfrom django.contrib.auth.models import User\nfrom tastypie.authentication import BasicAuthentication\nfrom tastypie import fields\nfrom tastypie.exceptions import BadRequest\nfrom tastypie.resources import ModelResource, ALL, ALL_WITH_RELATIONS\nfrom tastypie.validation import Validation\nfrom apps.eUser.models import  UserProfile\n\nclass ProfileResource(ModelResource):\n    username = fields.CharField(attribute='user__username', readonly=True)\n    id = fields.CharField(attribute='id')\n    class Meta:\n             queryset =UserProfile.objects.select_related('User')\n             resource_name = 'profile'\n             fields = ['id']\n\nclass UserResource(ModelResource):\n    class Meta:\n        object_class = User\n        queryset = User.objects.all()\n        resource_name = 'user'\n        allowed_methods = ['get', 'post', 'delete', 'put']\n        #excludes = ['email', 'password', 'is_active', 'is_staff', 'is_superuser']\n        filtering = {\n        }\n\nclass CreateUserResource(ModelResource):\n    class Meta:\n        allowed_methods = ['post']\n        object_class = User\n        #authentication = Authentication()\n        authorization = Authorization()\n        resource_name = 'register'\n\n        include_resource_uri = False\n        fields = ['username','password','email']\n\n    def obj_create(self, bundle, request=None, **kwargs):\n     try:\n        bundle = super(CreateUserResource, self).obj_create(bundle, request, **kwargs)\n    except IntegrityError:\n        raise BadRequest('That username already exists')\n    return bundle\n</code></pre>\n"},{"tags":["django","geodjango"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":22,"score":2,"question_id":13119040,"title":"Failed to install index ( Geodjango related)","body":"<p>I am using <code>geoDjango</code>. I have installed following packages from source <code>Gdal</code>, <code>proj1.4</code>, <code>geos3.3.5</code> and <code>Postgis2.0.1</code>. I am ubuntu user. When I run <code>syncdb</code> after that I am getting following error. Am I missing something? thanks</p>\n\n<pre><code>Superuser created successfully.\nInstalling custom SQL ...\nInstalling indexes ...\nFailed to install index for cities.City model: operator class \"gist_geometry_ops\" does not exist for access method \"gist\"\n\nFailed to install index for cities.District model: operator class \"gist_geometry_ops\" does not exist for access method \"gist\"\n\nFailed to install index for cities.PostalCodeCA model: operator class \"gist_geometry_ops\" does not exist for access method \"gist\"\n\nInstalled 0 object(s) from 0 fixture(s)\n</code></pre>\n"},{"tags":["python","django","active-directory"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":34,"score":-1,"question_id":13118458,"title":"How to authenticate django users from active directory","body":"<p>In my new job i have to edit the existing django project.\nHere all the django users are authenticated from active directory.</p>\n\n<p>Now i don't know how it was made possible and i want to know what thing i need to learn so that i can under stand , how it was done , so that in case some problem come in future , i should know where to look at</p>\n"},{"tags":["python","django","mocking","signals","django-signals"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13112302,"title":"How do I mock a django signal handler?","body":"<p>I have a signal_handler connected through a decorator, something like this very simple one:</p>\n\n<pre><code>@receiver(post_save, sender=User, \n          dispatch_uid='myfile.signal_handler_post_save_user')\ndef signal_handler_post_save_user(sender, *args, **kwargs):\n   # do stuff\n</code></pre>\n\n<p>What I want to do is to mock it <strong>with the mock library <a href=\"http://www.voidspace.org.uk/python/mock/\" rel=\"nofollow\">http://www.voidspace.org.uk/python/mock/</a></strong> in a test, to check how many times django calls it. My code at the moment is something like:</p>\n\n<pre><code>def test_cache():\n    with mock.patch('myapp.myfile.signal_handler_post_save_user') as mocked_handler:\n        # do stuff that will call the post_save of User\n    self.assert_equal(mocked_handler.call_count, 1)\n</code></pre>\n\n<p>The problem here is that the original signal handler is called even if mocked, most likely because the <code>@receiver</code> decorator is storing a copy of the signal handler somewhere, so I'm mocking the wrong code.</p>\n\n<p>So the question: how do I mock my signal handler to make my test work?</p>\n\n<p>Note that if I change my signal handler to:</p>\n\n<pre><code>def _support_function(*args, **kwargs):\n    # do stuff\n\n@receiver(post_save, sender=User, \n          dispatch_uid='myfile.signal_handler_post_save_user')\ndef signal_handler_post_save_user(sender, *args, **kwargs):\n   _support_function(*args, **kwargs)\n</code></pre>\n\n<p>and I mock <code>_support_function</code> instead, everything works as expected.</p>\n"},{"tags":["django","django-models","django-authentication"],"answer_count":6,"favorite_count":11,"up_vote_count":13,"down_vote_count":0,"view_count":5776,"score":13,"question_id":862522,"title":"Django: Populate user ID when saving a model","body":"<p>I have a model with a created_by field that is linked to the standard Django User model.  I need to automatically populate this with the ID of the current User when the model is saved.  I can't do this at the Admin layer, as most parts of the site will not use the built-in Admin.  Can anyone advise on how I should go about this?</p>\n"},{"tags":["django","django-forms"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13119047,"title":"Multiple Object Creation / Edition Forms","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/501719/dynamically-adding-a-form-to-a-django-formset-with-ajax\">Dynamically adding a form to a Django formset with Ajax</a>  </p>\n</blockquote>\n\n\n\n<p>I find this interesting link about reating forms for multiple objects :</p>\n\n<p><a href=\"https://collingrady.wordpress.com/2008/02/18/editing-multiple-objects-in-django-with-newforms/\" rel=\"nofollow\">https://collingrady.wordpress.com/2008/02/18/editing-multiple-objects-in-django-with-newforms/</a></p>\n\n<p>Let's say we have the classic danjo model from Poll app :</p>\n\n<pre><code>from django.db import models\n\nclass Poll(models.Model):\n    question = models.CharField(max_length=200)\n    pub_date = models.DateTimeField()\n\nclass Choice(models.Model):\n    poll = models.ForeignKey(Poll)\n    choice = models.CharField(max_length=200)\n    votes = models.IntegerField(default=0)\n</code></pre>\n\n<p>I want to have a form to create a poll and add as many choice field as i want (like django admin where you click on + and it adds a field). In the link i gave you, there are 3 fixed choice field. </p>\n\n<p>Do you know how i can proceed ?</p>\n"},{"tags":["django","apache","mod-wsgi"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13111958,"title":"Django. Problems with Apache and mod_wsgi","body":"<p>I have read <a href=\"https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/modwsgi/#how-to-use-django-with-apache-and-mod-wsgi\" rel=\"nofollow\">this</a>. So, I install mod_wsgi, virtualenv(<code>virtualenv ENV</code>). (Django 1.4, ubuntu server)</p>\n\n<p><strong>/etc/apache2/sites-available/mysite</strong>:</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\nServerName www.example.com\nServerAlias example.com\nWSGIDaemonProcess example.com python-path=/home/user/cars/cars:/home/user/cars/ENV/lib/python2.7/site-packege\nWSGIScriptAlias / /home/user/cars/cars/wsgi.py\n&lt;Directory /home/user/cars/cars&gt;\n&lt;Files wsgi.py&gt;\nOrder deny,allow\nAllow from all\n&lt;/Files&gt;\n&lt;/Directory&gt;\n&lt;/VirtualHost&gt;\nWSGIPythonPath /home/user/cars/ENV/lib/python2.7/site-packeges\n</code></pre>\n\n<p>I have <strong>Internal Server Error</strong></p>\n\n<p>in <strong>/var/log/apache2/error.log:</strong></p>\n\n<pre><code>mod_wsgi (pid=3012): Exception occurred processing WSGI script '/home/user/cars/cars/wsgi.py'.\nTraceback (most recent call last):\nFile \"/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py\", line 219, in __call__\nself.load_middleware()\nFile \"/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py\", line 39, in load_middleware\nfor middleware_path in settings.MIDDLEWARE_CLASSES:\nFile \"/usr/local/lib/python2.7/dist-packages/django/utils/functional.py\", line 184, in inner\nself._setup()\nFile \"/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py\", line 42, in _setup\nself._wrapped = Settings(settings_module)\nFile \"/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py\", line 95, in __init__\nraise ImportError(\"Could not import settings '%s' (Is it on sys.path?): %s\" % (self.SETTINGS_MODULE, e))\nImportError: Could not import settings 'cars.settings' (Is it on sys.path?): No module named cars.settings\n</code></pre>\n\n<p>Please, help me, I have never configure Django with mod_wsgi. Its my first project</p>\n\n<p><em><strong>Update</em></strong>:</p>\n\n<pre><code>Alias /favicon.ico /home/user/cars/files/static_content/favicon.ico \nAliasMatch ^/([^/]*\\.css) /home/user/cars/files/static_content/css/$1 \nAlias /static/ /home/user/cars/files/static_content/ \n&lt;Directory /home/user/cars/files/static_content&gt; \n Order deny,allow\n Allow from all \n&lt;/Directory&gt;\n</code></pre>\n"},{"tags":["django","pinax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13118174,"title":"Pinax or pure Django for db driven web site","body":"<p>I'm about to develop a web site that works closely with database attributes.\nIt needs to fetch required data from the db based on search criteria and to display them as table.</p>\n\n<p>I was studying django and feel that I'm ready to start the development process.</p>\n\n<p>Now, I need to decide rather I choose to go with Pinax or just pure Django with apps that suit my needs.</p>\n\n<p>i do want some social functionality like sending notifications to friends and maybe later a forum on site.</p>\n\n<p>What do you think? should i go with pure Django or should i give Pinax a try?</p>\n"},{"tags":["django","idle-ide"],"answer_count":2,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":1045,"score":3,"question_id":1450558,"title":"Running Django from IDLE","body":"<p>I wish to test my django project form IDLE shell in windows. \nI run following commands</p>\n\n<pre><code>from django.template import Template, Context\nt = Template('test template')\n</code></pre>\n\n<p>but I get following error.</p>\n\n<pre><code>Traceback (most recent call last):\n\n\nFile \"&lt;pyshell#1&gt;\", line 1, in &lt;module&gt;\n    t = Template('test template')\n  File \"C:\\Program Files\\Python26\\lib\\site-packages\\django\\template\\__init__.py\", line 164, in __init__\n    if settings.TEMPLATE_DEBUG and origin is None:\n  File \"C:\\Program Files\\Python26\\lib\\site-packages\\django\\conf\\__init__.py\", line 28, in __getattr__\n    self._import_settings()\n  File \"C:\\Program Files\\Python26\\lib\\site-packages\\django\\conf\\__init__.py\", line 59, in _import_settings\n    self._target = Settings(settings_module)\n  File \"C:\\Program Files\\Python26\\lib\\site-packages\\django\\conf\\__init__.py\", line 94, in __init__\n    raise ImportError, \"Could not import settings '%s' (Is it on sys.path? Does it have syntax errors?): %s\" % (self.SETTINGS_MODULE, e)\nImportError: Could not import settings 'C:\\Program Files\\Python26\\Lib\\site-packages\\django\\conf' (Is it on sys.path? Does it have syntax errors?): Import by filename is not supported.\n</code></pre>\n\n<p><strong>Can you help me out?</strong></p>\n"},{"tags":["python","django","google-app-engine","templates","livechat"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":84,"score":2,"question_id":13115138,"title":"website needs update in python","body":"<p>The website I am overhauling is currently using python 2.3.7, and is managed using the Google App Engine it has to be updated to 2.7 and because of the new version features, the template section was depreciated. what are the nessesary changes that need to be made this? FYI, I'm a highschool student doing this for a chatroom website. When i rewrite the changes for the app.yaml, change the code inside the .py (then i retitle the file to .app), it throws this traceback error. help?</p>\n\n<pre><code>File \"/base/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py\", line 196, in Handle\n    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())\n  File \"/base/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py\", line 255, in _LoadHandler\n    handler = __import__(path[0])\nImportError: No module named devchat\n</code></pre>\n\n<p>my imports are </p>\n\n<pre><code>import cgi\nimport os\nimport urllib\nimport logging\n\nfrom google.appengine.api import users\nfrom google.appengine.ext import webapp\nfrom google.appengine.ext.webapp.util import run_wsgi_app\nfrom google.appengine.ext import db\nfrom google.appengine.ext.webapp import template\nfrom google.appengine.api import memcache\n</code></pre>\n\n<p>the section of the code concerning templates is here</p>\n\n<pre><code>class BaseRequestHandler(webapp.RequestHandler):\n\n  def generate(self, template_name, template_values={}): \n    # We check if there is a current user and generate a login or logout URL\n    user = users.get_current_user()\n\n    if user:\n      log_in_out_url = users.create_logout_url('/')\n    else:\n      log_in_out_url = users.create_login_url(self.request.path)\n\n    # We'll display the user name if available and the URL on all pages\n    values = {'user': user, 'log_in_out_url': log_in_out_url}\n    values.update(template_values)\n\n    # Construct the path to the template\n    directory = os.path.dirname(__file__)\n    path = os.path.join(directory, 'templates', template_name)\n\n    # Respond to the request by rendering the template\n    self.response.out.write(template.render(path, values, debug=_DEBUG))\n\nclass MainRequestHandler(BaseRequestHandler):\n  def get(self):\n    if users.get_current_user():\n      url = users.create_logout_url(self.request.uri)\n      url_linktext = 'Logout'\n    else:\n      url = users.create_login_url(self.request.uri)\n      url_linktext = 'Login'\n\n    template_values = {\n      'url': url,\n      'url_linktext': url_linktext,\n      }\n\n    self.generate('index.html', template_values);\n\nclass ChatsRequestHandler(BaseRequestHandler):\n  def renderChats(self):\n    greetings_query = Greeting.all().order('date')\n    greetings = greetings_query.fetch(1000)\n\n    template_values = {\n      'greetings': greetings,\n    }\n    return self.generate('chats.html', template_values)\n\n  def getChats(self, useCache=True):\n    if useCache is False:\n      greetings = self.renderChats()\n      if not memcache.set(\"chat\", greetings, 10):\n        logging.error(\"Memcache set failed:\")\n      return greetings\n\n    greetings = memcache.get(\"chats\")\n    if greetings is not None:\n      return greetings\n    else:\n      greetings = self.renderChats()\n      if not memcache.set(\"chat\", greetings, 10):\n        logging.error(\"Memcache set failed:\")\n      return greetings\n\n  def get(self):\n    self.getChats()\n\n  def post(self):\n    greeting = Greeting()\n\n    if users.get_current_user():\n      greeting.author = users.get_current_user()\n\n    greeting.content = self.request.get('content')\n    greeting.put()\n\n    self.getChats(False)`\n</code></pre>\n"},{"tags":["django","bash","shell","gunicorn"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13117000,"title":"shell script - store output of \"kill -HUP 1234\" (gunicorn command) to variable and check if the variable contains \"No such process\"","body":"<p>I tried below command to store output to variable : </p>\n\n<pre><code>k=$(kill -HUP 1234)  #command getting executed but not storing to variable\necho \"$k\"\n</code></pre>\n\n<p>For checking if the output contains the word, i can do like this  :</p>\n\n<pre><code>  if [[ outputvar =~ .*No such process*. ]]\n</code></pre>\n\n<p>As per the examples, above should work , but i donno why its not working . Can you tell me correct way so that if I cannot restart the process, I can atleast start a new process with direct gunicorn_django command </p>\n"},{"tags":["python","django","pagination","bootstrapper"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13117387,"title":"How can i change the bootstrap pagination template in django","body":"<p>I don't know anything about bootstrap pagination. IN my django application it was already used.</p>\n\n<p>I just want to put the pages link near the table generated but i am not able to find where can i chnage the template only for that particular page.</p>\n\n<p>This is currenly written in the template</p>\n\n<pre><code> {% if page_obj.has_other_pages %}\n            {% bootstrap_paginate page_obj range=10 show_prev_next=\"true\" show_first_last=\"true\" %}\n        {% endif %}\n        {% if qs_count %}\n            &lt;small&gt;Found {{ qs_count }} results (page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}):&lt;/small&gt;\n        {% else %}\n            &lt;small&gt;No results found.&lt;/small&gt;\n        {% endif %}   \n</code></pre>\n"},{"tags":["django","django-comments"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13099517,"title":"Django comments form validation, check if the comment is from authenticated user","body":"<p>I wanted to add reCaptcha to the comment form, but only for non-authenticated users.</p>\n\n<p>I've created my own comments app, using reCaptcha more or less according to <a href=\"http://www.chrisumbel.com/article/recaptcha_with_django\" rel=\"nofollow\">this post</a>, except that I don't have any (explicit) view function to post the comment, but instead I check captcha as a part of form validation process. Everything works fine so far.</p>\n\n<p>Now, how do I disable reCaptcha for a logged in user? Removing all reCaptcha-related fields in the template is no problem, but how do I validate the form, not checking captcha if the comment if from an authenticated user? Alternatively, is there a way to use two different comment form classes, depending on whether the user is authenticated or not?</p>\n\n<p>UPDATE: I sort of solved the problem by creating a view for processing POST request for comments, where I validate the captcha first and then call the default view; I also had to add an entry for it into the urls.py. But was it really wrong to try and validate captcha in the form class?</p>\n"},{"tags":["django","django-models"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":34,"score":0,"question_id":13115207,"title":"Differences between one-to-one and foreign key relationships?","body":"<p>Can someone explain the significance of specifying a relationship in a Django model as one-to-one as opposed to just a foreign key?</p>\n\n<p>Specifically, I'm wondering what advantages you get from specifying a relationship as 1-1, if any.</p>\n\n<p>Thanks so much.</p>\n"}]}
{"total":41213,"page":9,"pagesize":100,"questions":[{"tags":["python","django","virtualenv"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":289,"score":2,"question_id":12339608,"title":"installing django 1.5(development version) in virtualenv","body":"<p>I am trying to start developing a web apps using django 1.5 but I can't figure out how to install the django 1.5 in the <code>virtualenv</code> because django 1.5 is still a development version.</p>\n\n<p>I've tried installing it using <code>easy_install</code> and <code>pip</code> but all I get is django 1.4 because it is the official version.</p>\n\n<p>Can anybody help me with this?</p>\n"},{"tags":["django"],"answer_count":19,"favorite_count":4,"up_vote_count":37,"down_vote_count":2,"view_count":34389,"score":35,"question_id":312549,"title":"No Module named django.core","body":"<p>I have updated to latest Django version 1.0.2 after uninstalling my old Django version.But now when I run django-admin.py I get the following error. How can I resolve this?</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Python25\\Lib\\site-packages\\django\\bin\\django-admin.py\", line 2, in &lt;module&gt;\n    from django.core import management\nImportError: No module named django.core\n</code></pre>\n"},{"tags":["django","analytics"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":8358926,"title":"Analytics django app with noSQL db and GA","body":"<p>I've started a django project that will include an analytics app. I want that app to use either couchDB or mongoDB for storing data. </p>\n\n<p>The initial idea was (since the client already is using Google Analytics) to once a day/week/month grab data from GA, and store store it locally as values in database. Which would ultimately build a database of entries - one entry per user per month - with summed values like</p>\n\n<pre><code>{\"date\":\"11.2011\"\"clicks\": 21, \"pageviews\": 40, \"n\": n}, \n</code></pre>\n\n<p>for premium users there could be one entry per user per week or even day.</p>\n\n<p>The question would be:</p>\n\n<p>grab analytics from GA, do a sum entries for clicks, visits etc.</p>\n\n<p>or</p>\n\n<p>store clicks and whatever values locally and once a month do sums for display ?</p>\n"},{"tags":["javascript","jquery","sql","django","backbone.js"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13116428,"title":"Need a interface for a sql database as a form on django website","body":"<p>I have a django website on which i need to embed a form which is nothing but just a table interface on an SQL database. I would like to perform dynamic changes i.e. add, delete, modify etc. operations . I am not sure how I could achieve this? </p>\n\n<p>I have looked on few things such as backbone js and ember and some other.</p>\n\n<p>Could someone advise me which one I can use and if there any resources or examples I can look at?</p>\n"},{"tags":["mysql","django","table","django-models","drop"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1408,"score":2,"question_id":2150687,"title":"Django reset not dropping tables","body":"<p>I just migrated my dev environment from Ubuntu Linux to Mac OSX snow leopard. All of this was working on Linux. On both, I have used MySQL for Django's db.</p>\n\n<p>Django's reset function is not issuing drop commands for all of my app's models. Here is my models.py (with the Forum and User object fields removed for brevity):</p>\n\n<pre><code>from django.db import models\n\nclass Forum(models.Model):\n    ...\n\nclass User(models.Model):\n    ...\n\nclass Message(models.Model):\n    date = models.DateTimeField()\n    content_file = models.CharField(max_length=48)\n    summary_file = models.CharField(max_length=48)\n    user = models.ForeignKey(User)    \n    thread = models.ForeignKey('self', blank=True, null=True)\n    lft = models.IntegerField(default=1) \n    rgt = models.IntegerField(default=2)\n\n    def __unicode__(self):\n        return str(self.date) + '_' + unicode(self.user)\n\nclass Message_forum(models.Model):\n    message = models.ForeignKey(Message)\n    forum = models.ForeignKey(Forum)\n    status = models.IntegerField()\n    position = models.IntegerField(blank=True, null=True)\n\n    def __unicode__(self):\n        return unicode(self.message) + '_' + unicode(self.forum)\n</code></pre>\n\n<p>Here is the output of django's sql command:</p>\n\n<pre><code>BEGIN;\nCREATE TABLE `AO_forum` (\n    ...\n)\n;\nCREATE TABLE `AO_user` (\n    ...\n)\n;\nCREATE TABLE `AO_message` (\n    `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY,\n    `date` datetime NOT NULL,\n    `content_file` varchar(48) NOT NULL,\n    `summary_file` varchar(48) NOT NULL,\n    `user_id` integer NOT NULL,\n    `thread_id` integer,\n    `lft` integer NOT NULL,\n    `rgt` integer NOT NULL\n)\n;\nALTER TABLE `AO_message` ADD CONSTRAINT `user_id_refs_id_12d253fe` FOREIGN KEY (`user_id`) REFERENCES `AO_user` (`id`);\nALTER TABLE `AO_message` ADD CONSTRAINT `thread_id_refs_id_12262c89` FOREIGN KEY (`thread_id`) REFERENCES `AO_message` (`id`);\nCREATE TABLE `AO_message_forum` (\n    `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY,\n    `message_id` integer NOT NULL,\n    `forum_id` integer NOT NULL,\n    `status` integer NOT NULL,\n    `position` integer\n)\n;\nALTER TABLE `AO_message_forum` ADD CONSTRAINT `message_id_refs_id_68762267` FOREIGN KEY (`message_id`) REFERENCES `AO_message` (`id`);\nALTER TABLE `AO_message_forum` ADD CONSTRAINT `forum_id_refs_id_31073c3d` FOREIGN KEY (`forum_id`) REFERENCES `AO_forum` (`id`);\nCOMMIT;\n</code></pre>\n\n<p>And here is the output of django's sqlreset command:</p>\n\n<pre><code>BEGIN;\nDROP TABLE `AO_user`;\nDROP TABLE `AO_forum`;\nCREATE TABLE `AO_forum` (\n    ...\n)\n;\nCREATE TABLE `AO_user` (\n    ...\n)\n;\nCREATE TABLE `AO_message` (\n    `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY,\n    `date` datetime NOT NULL,\n    `content_file` varchar(48) NOT NULL,\n    `summary_file` varchar(48) NOT NULL,\n    `user_id` integer NOT NULL,\n    `thread_id` integer,\n    `lft` integer NOT NULL,\n    `rgt` integer NOT NULL\n)\n;\nALTER TABLE `AO_message` ADD CONSTRAINT `user_id_refs_id_12d253fe` FOREIGN KEY (`user_id`) REFERENCES `AO_user` (`id`);\nALTER TABLE `AO_message` ADD CONSTRAINT `thread_id_refs_id_12262c89` FOREIGN KEY (`thread_id`) REFERENCES `AO_message` (`id`);\nCREATE TABLE `AO_message_forum` (\n    `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY,\n    `message_id` integer NOT NULL,\n    `forum_id` integer NOT NULL,\n    `status` integer NOT NULL,\n    `position` integer\n)\n;\nALTER TABLE `AO_message_forum` ADD CONSTRAINT `message_id_refs_id_68762267` FOREIGN KEY (`message_id`) REFERENCES `AO_message` (`id`);\nALTER TABLE `AO_message_forum` ADD CONSTRAINT `forum_id_refs_id_31073c3d` FOREIGN KEY (`forum_id`) REFERENCES `AO_forum` (`id`);\nCREATE INDEX `AO_message_user_id` ON `AO_message` (`user_id`);\nCREATE INDEX `AO_message_thread_id` ON `AO_message` (`thread_id`);\nCREATE INDEX `AO_message_forum_message_id` ON `AO_message_forum` (`message_id`);\nCREATE INDEX `AO_message_forum_forum_id` ON `AO_message_forum` (`forum_id`);\nCOMMIT;\n</code></pre>\n\n<p>Only drop commands for Forum and User are generated. Also confusing and possibly related is that when the tables get created, my Django project name (\"AO\") is appended in all caps for the forum and user tables, but in lowercase for the message and message_forum tables (which are the ones without drop commands).</p>\n"},{"tags":["django","django-models","cassandra","pycassa"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":71,"score":2,"question_id":11499468,"title":"Creating Data models in cassandra using Django","body":"<p>How data model creates in cassandra using Django backend?\nI have refered twissandra , but i'm confused with how the datamodel created(like in a relational database)</p>\n"},{"tags":["django","git","cron","crontab"],"answer_count":6,"favorite_count":3,"up_vote_count":10,"down_vote_count":0,"view_count":1411,"score":10,"question_id":1603034,"title":"How do you deploy cron jobs to production?","body":"<p>How do people deploy/version control cronjobs to production?  I'm more curious about conventions/standards people use than any particular solution, but I happen to be using git for revision control, and the cronjob is running a python/django script.</p>\n"},{"tags":["python","django","django-admin"],"answer_count":4,"favorite_count":7,"up_vote_count":7,"down_vote_count":0,"view_count":2625,"score":7,"question_id":433251,"title":"How do I add a custom inline admin widget in Django?","body":"<p>This is easy for non-inlines. Just override the following in the your admin.py AdminOptions:</p>\n\n<pre><code>def formfield_for_dbfield(self, db_field, **kwargs):\n    if db_field.name == 'photo':\n        kwargs['widget'] = AdminImageWidget()\n        return db_field.formfield(**kwargs)\n    return super(NewsOptions,self).formfield_for_dbfield(db_field,**kwargs)\n</code></pre>\n\n<p>I can't work out how to adapt this to work for inlines.</p>\n"},{"tags":["python","django","heroku","django-templates"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":177,"score":0,"question_id":11250580,"title":"os.path python module not working in heroku","body":"<p>I am building a django app on heroku and facing a lot of trouble with <code>os.path</code> module. My project is unable to find the <code>templates</code> on heroku while its working perfectly on localhost.</p>\n\n<p>This is my project hierarchy (in brief):</p>\n\n<pre><code>project/\n        project/\n               settings.py\n               urls.py\n               views.py\n               ..\n        manage.py\n        templates/\n                 css/\n                 media/\n                 Templates/\n                          home.html\n</code></pre>\n\n<p>So, I used <code>os.path</code> to add the template dir in settings.py.</p>\n\n<pre><code>currDir = os.path.dirname(__file__)\ntemplateDir = os.path.join(os.path.join(os.path.split(currDir)[0], \"templates\"), \"templates\")\nTEMPLATE_DIRS = (\n    templateDir,\n\n)\n</code></pre>\n\n<p>This is working perfectly on my localhost but not working on Heroku. </p>\n\n<p>The following is mentioned on heroku (running on heroku)</p>\n\n<blockquote>\n  <p><strong>Django tried loading these templates, in this order:</strong></p>\n  \n  <p><em>Using loader django.template.loaders.filesystem.Loader:</em></p>\n\n<pre><code>/app/templates/templates/home.html (File does not exist)\n</code></pre>\n  \n  <p>*Using loader django.template.loaders.app_directories.Loader:*</p>\n\n<pre><code>/app/.heroku/venv/lib/python2.7/site-packages/django/contrib/auth/templates/home.html(File does not exist)\n</code></pre>\n</blockquote>\n"},{"tags":["django","deployment","nginx","subdirectories"],"answer_count":3,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":239,"score":6,"question_id":8133063,"title":"how to deploy django under a suburl behind nginx","body":"<p>I have a django application running on <a href=\"http://localhost:12345\">http://localhost:12345</a> .\nI'd like user to access it via url <a href=\"http://my.server.com/myapp\">http://my.server.com/myapp</a> .\nI use nginx to reverse proxy to it like the following:</p>\n\n<pre><code>... ...\nserver_name my.server.com;\nlocation /myapp {\n    rewrite /myapp(.*) $1 break;        \n    ... ... # proxy param \n    proxy_pass http://localhost:12345;\n}\n... ...\n</code></pre>\n\n<p>The question is, when configured like the above, how to make the urls in my response pages to have a prefix of \"/myapp\" so that the nginx can direct them correctly to myapp. E.g., the urls in a page like \"/foo/far\" ought to be changed to \"/myapp/foo/bar\" to allow nginx proxy to myapp. \nwhat is the right nginx configure to use to achieve this ?</p>\n\n<p>I can use settings variables of django to specify the root url prefix, but it's not flexiable to my mind, since the variable have to be modified according to different nginx configuration(say one day nginx may change the suburl from \"/myapp\" to \"/anotherapp\").</p>\n"},{"tags":["python","django","operators"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13115629,"title":"How to use terniary operator in python with objects","body":"<p>I want to access the object property like this</p>\n\n<pre><code>'region'     :obj.region ? obj.region.name : \"None\"\n</code></pre>\n\n<p>The thing is in my class i want that if obj.region does not exist then i want none in the region. But if it has region associated then i want the name of the region.</p>\n\n<p>The region is not true false but object</p>\n\n<p>How can do that</p>\n"},{"tags":["python","django","debian"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13115380,"title":"django: zlib1g not working on debian 6","body":"<p>I have been trying to install Django 1.4 on debian 6 using python 2.7. I have already installed python and Django, both downloading from source successfully.</p>\n\n<p>I can actually import Django:</p>\n\n<pre><code># python\nPython 2.7.3 (default, Oct 28 2012, 21:37:44) \n[GCC 4.4.5] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import django\n&gt;&gt;&gt; \n</code></pre>\n\n<p>Problem is I cannot run django-admin.py because the zlib library is missing:</p>\n\n<pre><code># django-admin.py startproject hola\nTraceback (most recent call last):\n  File \"/opt/python/bin/django-admin.py\", line 5, in &lt;module&gt;\n    (...)\n  File \"/opt/python/lib/python2.7/gzip.py\", line 9, in &lt;module&gt;\n    import zlib\nImportError: No module named zlib\n</code></pre>\n\n<p>I have already installed zlib1g:</p>\n\n<pre><code># aptitude search zlib1g\ni   zlib1g                                                     - compression library - runtime                                                         \ni   zlib1g-dbg                                                 - compression library - development                                                     \ni   zlib1g-dev                                                 - compression library - development \n</code></pre>\n\n<p>So, zlib seems to be installed, what's the problem?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13114720,"title":"accessing static files from html in db","body":"<p>I have html stored in the db which contains image tags. How can I code it so the images are pulled from the static dir?</p>\n\n<p>I want the equivalent of:</p>\n\n<pre><code>&lt;img src='{% static 'images/pic1' %}'&gt;\n</code></pre>\n"},{"tags":["django","backbone.js"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":101,"score":1,"question_id":11272370,"title":"Backbone-relational with Django","body":"<p>I'm building a Backbonejs app that is running Django in the backend. In my Django, i have models like <code>Author</code>, <code>books</code>, <code>shelf</code> and <code>user</code> and they are related to one another. In Backbone, I have a model <code>Author</code> and when I do a <code>fetch()</code> I get its related models in an array. Should I proceed like this or it's better to create the same models in Backbone and do the same relations between them? (with backbone-relational)\nAlso, let's say I go with the second option, when i do <code>fetch()</code> and get related models, shall backbone-relational recognize it directly?</p>\n\n<p>Thanks</p>\n"},{"tags":["mysql","django","utf-8","mysql-5.1","utf8mb4"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13114813,"title":"Django with MySQL and UTF-8","body":"<p><strong>Background:</strong></p>\n\n<p>I am using Django with MySQL 5.1 and I am having trouble with 4-byte UTF-8 characters causing fatal errors throughout my web application.</p>\n\n<p>I've used <a href=\"http://stackoverflow.com/a/11597447/98187\">a script</a> to convert all tables and columns in my database to UTF-8 which has fixed most unicode issues, but there is still an issue with 4-byte unicode characters.  As <a href=\"http://stackoverflow.com/a/3060537/98187\">noted elsewhere</a>, MySQL 5.1 does not support UTF-8 characters over 3 bytes in length.</p>\n\n<p>Whenever I enter a 4-byte unicode character (e.g. 🀐) into a ModelForm on my Django website the form validates and then an exception similar to the following is raised:</p>\n\n<pre><code>Incorrect string value: '\\xF0\\x9F\\x80\\x90' for column 'first_name' at row 1\n</code></pre>\n\n<p><strong>My question:</strong></p>\n\n<p>What is a reasonable way to avoid fatal errors caused by 4-byte UTF-8 characters in a Django web application with a MySQL 5.1 database.</p>\n\n<p>I have considered:</p>\n\n<ol>\n<li>Selectively disabling MySQL warnings to avoid specifically that error message (not sure whether that is possible yet)</li>\n<li>Creating middleware that will look through the <code>request.POST</code> <code>QueryDict</code> and substitute/remove all invalid UTF8 characters</li>\n<li>Somehow hook/alter/monkey patch the mechanism that outputs SQL queries for Django or for MySQLdb to substitute/remove all invalid UTF-8 characters before the query is executed</li>\n</ol>\n\n<hr>\n\n<p>Example middleware to replacing invalid characters (inspired by <a href=\"http://stackoverflow.com/a/11597447/98187\">this SO question</a>):</p>\n\n<pre><code>import re\n\nclass MySQLUnicodeFixingMiddleware(object):\n\n    INVALID_UTF8_RE = re.compile(u'[^\\u0000-\\uD7FF\\uE000-\\uFFFF]', re.UNICODE)\n\n    def process_request(self, request):\n        \"\"\"Replace 4-byte unicode characters by REPLACEMENT CHARACTER\"\"\"\n        request.POST = request.POST.copy()\n        for key, values in request.POST.iterlists():\n            request.POST.setlist(key,\n                [self.INVALID_UTF8_RE.sub(u'\\uFFFD', v) for v in values])\n</code></pre>\n"},{"tags":["django","naming-conventions"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13113967,"title":"Django class naming convention regarding abbreviations","body":"<p>Is there an existing naming convention for using abbreviations in Django classes (e.g. models, forms, etc)? Specifically I'm interested if there's different rules between abbreviations/acronyms/initialisms?</p>\n\n<p>So far I've only found examples of non-acronyms:</p>\n\n<ul>\n<li><code>XMLField</code></li>\n<li><code>HTTPRequest</code></li>\n</ul>\n\n<p>What should a JSON field be called (since it's an acronym)?</p>\n\n<ul>\n<li><code>JSONField</code>, or</li>\n<li><code>JsonField</code></li>\n</ul>\n"},{"tags":["django","django-views"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13114753,"title":"Paginate search results ListView","body":"<p>I am using ListView to display all of the NewPersons and paginate by 5 results. NewPersons are displayed in a table and on the left there is a search box. When searching 'q' is requested in  the GET. In order to change the queryset when searching I have overridden the get_queryset method of the view. </p>\n\n<p>The problem I am having is that because I am paginating by 5 results if more than 5 results are returned by the search they are paginated; however, if you click next to view the second page it returns the second page of the full list of objects not the second page of the search results. </p>\n\n<p>So I am wondering how to properly paginate my search results. Thanks. JD</p>\n\n<pre><code>class PersonListView(ListView):\nmodel = NewPerson\ntemplate_name = 'list.html' \npaginate_by = 5\n\ndef get_queryset(self):\n    \"\"\"\n    Get the list of items for this view. This must be an interable, and may\n    be a queryset (in which qs-specific behavior will be enabled).\n    \"\"\"\n    if 'q' in self.request.GET:\n        q = self.request.GET['q']\n        queryset = NewPerson.objects.filter(Q(FirstName__icontains=q) | Q(LastName__icontains=q))\n    else:\n        if self.queryset is not None:\n            queryset = self.queryset\n            if hasattr(queryset, '_clone'):\n                queryset = queryset._clone()\n        elif self.model is not None:\n            queryset = self.model._default_manager.all()\n        else:\n            raise ImproperlyConfigured(u\"'%s' must define 'queryset' or 'model'\"\n                                       % self.__class__.__name__)\n    return queryset\n</code></pre>\n"},{"tags":["django","django-models","django-queryset","django-queries"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13109869,"title":"Django - Join first row of a related table (ex: thumbnail)","body":"<p>Say I have the tables <code>Products</code> and <code>Images</code>, where a product can have many images. When fetching a list of products for a search results page, how can include the first product image as a thumbnail?</p>\n\n<p>What would be the best way to do this also taking performance into consideration? (number of queries, memory, overall time, etc)</p>\n"},{"tags":["django","django-forms"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":13110205,"title":"Dynamic related objects django form","body":"<p>i currently have models that look like this</p>\n\n<pre><code>class Lg(models.Model):\n    name = models.CharField(max_length = 50,choices = LG_CHOICES,unique = True)\n\nclass State(models.Model):\n    name = models.CharField(max_length = 50,choices = STATE_CHOICES,unique = True)\n    lg = models.ManyToManyField(Lg,related_name ='State_Lg',blank= True,null = True)\n\nclass AddPlaceForm(forms.Form):\n    house_number = forms.IntegerField()\n    street_name = forms.CharField()\n    area = forms.CharField()\n    city  = forms.CharField()\n    lg = forms.ChoiceField(choices = Lg.objects.none()) \n\n    def __init__(self,state_id,*args,**kwargs):\n        super(GenericPropertyForm,self).__init__(self,*args,**kwargs)\n        self.fields['lg'] = forms.ChoiceField(choices=list(State.objects.get(id = state_id).lg.select_related()))\n</code></pre>\n\n<p>I'd like the user to pass in the state id from the view like this <code>form = AddPlaceForm(state_id)</code></p>\n\n<p>can any one pls help with this</p>\n"},{"tags":["django","design","django-models","django-forms"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1937,"score":1,"question_id":3654333,"title":"Django model form and objects database id","body":"<p>I have a complex django object, which has properties of other class types. This gets like this:</p>\n\n<pre><code>class Order:\n   contractor - type Person\n   some other fields....\n</code></pre>\n\n<p>In my form I'd like to be able to either choose existing Person object from the dropdown or add a new one with a form. I've managed to create forms and appropriate workflow, but the problem is with saving the Order itself, I simply can't get the id of a saved Person instance. I'm doing sth like this:</p>\n\n<pre><code>def make_order(request):\n  if request.method == 'POST':\n    parameters = copy.copy(request.POST)\n    contractor_form = ContractorForm(parameters)\n    if contractor_form.is_valid():\n      contractor_form.save()\n      parameters['contractor'] = ???\n    form = OrderForm(parameters)\n    if form.is_valid():\n      form.save() \n      return HttpResponseRedirect('/orders/')\n  else:\n    form = OrderForm()\n    contractor_form = ContractorForm()\n\n  return render_to_response('orders/make_order.html', {'order_form' : form, 'contractor_form' : contractor_form})\n</code></pre>\n\n<p>So, if POST request reaches this method I first check if ContractorForm have been filled - I assume that if the form is valid, it is meant to be used. If yes, than I save it and would like to assign the saved object's database id to appropriate field for OrderForm to find it. </p>\n\n<p>All my forms are ModelForms. </p>\n\n<p>The questions are:</p>\n\n<ol>\n<li>Are there better ways to do this? (choose from dropdown or add in place) - better or more pythonic ;-)</li>\n<li>How can I get saved objects id when using ModelForms?</li>\n</ol>\n\n<p><strong>Edited</strong></p>\n\n<p>My ContractorForm is:</p>\n\n<pre><code>class ContractorForm(ModelForm):\n  class Meta:\n    model = Contractor\n</code></pre>\n\n<p>Nothing fancy. </p>\n"},{"tags":["javascript","python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13114121,"title":"Pass a value along with .innerHTML","body":"<p>I am trying to build a website that has a discussion forum using django. I want users to be able to post new comments or reply to other user's comments. I have it so when they click the reply button, a new text area pops up</p>\n\n<p>HTML</p>\n\n<pre><code>&lt;button onclick=\"myFunction({{forloop.counter}})\"&gt;Reply&lt;/button&gt; \n&lt;div id=\"{{forloop.counter}}\"&gt; &lt;/div&gt;\n</code></pre>\n\n<p>Javascript</p>\n\n<pre><code>function myFunction(x)\n{\n document.getElementById(x).innerHTML=\"&lt;form action='' method='post'&gt; {% csrf_token %} &lt;textarea id=reply_body name=reply_body value={{reply_body}}&gt; &lt;/textarea&gt; &lt;input type=submit&gt; &lt;/form&gt; \";\n}\n</code></pre>\n\n<p>....What I want to do is pass the text of the body to my views so that I can know which comment the reply was to. However, I can't pass the textbody into the .innerHTML= ... Whenever I try to it just says that nothing is there. Is there something I'm missing here? Or an easier way to do this? Any help would be appreciated. Let me know if I should post more code or describe anything in greater detail.</p>\n"},{"tags":["django","performance","apache","memory","nginx"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13110028,"title":"Django Performance / Memory usage","body":"<p>I am running an alpha version of my app on a EC2 Small instance (1.7 GB RAM) with postgres and apache (wsgi-mod not as daemon but directly) on it.</p>\n\n<p>Performance is alright, but it could be better. I am also worried about memory usage if too many test users would join.</p>\n\n<p>Is it wise to switch from Apache to nginx server? Has any Django developer done that and is happier with the results? Any other tips on the way are also welcome.</p>\n\n<p>Thanks</p>\n"},{"tags":["python","django","frameworks"],"answer_count":17,"favorite_count":24,"up_vote_count":32,"down_vote_count":3,"view_count":16344,"score":29,"question_id":90032,"title":"Reasons not to use Django","body":"<p>Have you considered using Django and found good reasons not to do so?</p>\n"},{"tags":["django","django-templates","django-staticfiles"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13103138,"title":"Receiving 404 error when trying to load static urls directly in Django","body":"<p>When I visit the url of my static files (http://127.0.0.1:8000/site_media/static/css/site_base.css) I receive a 404 error message. </p>\n\n<p><strong>404 from the log</strong> </p>\n\n<pre><code>[27/Oct/2012 14:14:54] \"GET /site_media/static/js/libs/modernizr-2.5.2.min.js HTTP/1.1\" 404 1716\n[27/Oct/2012 14:34:20] \"GET /site_media/static/css/site_base.css HTTP/1.1\" 404 1677\n</code></pre>\n\n<p><strong>Directory Structure</strong></p>\n\n<pre><code>mysite\n    |-- manage.py\n    |-- mysite\n         |-- settings\n             |-- base.py\n             |-- dev.py\n             |-- prod.py\n    |-- site_media\n       |-- static\n           |-- css\n               |-- site_base.css\n</code></pre>\n\n<p><strong>site_base.html</strong></p>\n\n<pre><code>&lt;link rel=\"stylesheet\" href=\"{{ STATIC_URL }}css/site_base.css\" /&gt;\n</code></pre>\n\n<p><strong>settings</strong></p>\n\n<pre><code>TEMPLATE_CONTEXT_PROCESSORS = [\n\"django.contrib.auth.context_processors.auth\",\n\"django.core.context_processors.debug\",\n\"django.core.context_processors.i18n\",\n\"django.core.context_processors.media\",\n\"django.core.context_processors.request\",\n\"django.contrib.messages.context_processors.messages\",\n\"django.core.context_processors.static\",\n]\n\nSTATICFILES_FINDERS = [\n'django.contrib.staticfiles.finders.FileSystemFinder',\n'django.contrib.staticfiles.finders.AppDirectoriesFinder',\n'django.contrib.staticfiles.finders.DefaultStorageFinder',\n]\n\nSTATIC_URL = \"/site_media/static/\"\nSTATIC_ROOT = os.path.join(PROJECT_ROOT, \"site_media\", \"static\")\n</code></pre>\n\n<p>Updated:</p>\n\n<p><strong>urls.py</strong></p>\n\n<pre><code>from django.conf import settings\nfrom django.conf.urls.defaults import *\nfrom django.views.generic.simple import direct_to_template\n\nfrom django.contrib.staticfiles.urls import staticfiles_urlpatterns\n\nfrom django.contrib import admin\nadmin.autodiscover()\n\nurlpatterns = patterns('',\n    url(r\"^$\", direct_to_template, {'template' : 'home.html' }, name=\"home\"),\n    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),\n    url(r'^admin/', include(admin.site.urls)),\n    url(r'^grappelli/', include('grappelli.urls')),\n    url(r'^profile/', include('profiles.urls')),\n)\n\nurlpatterns += staticfiles_urlpatterns()\n</code></pre>\n"},{"tags":["django","model","uuid"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13113680,"title":"Django abstract model with flexibility to accept parameters","body":"<p>I have uuid field in pretty much every model. To avoid redundancy, I have this BaseUuid abstract model to generate random uuid field:</p>\n\n<pre><code>class BaseUuid(models.Model):  # base abstract model with uuid field\n    class Meta:\n        abstract = True\n\n    uuid = models.CharField(max_length=22, unique=True)\n\n    def save(self, *args, **kwargs):\n        if not self.uuid:\n            uuid = shortuuid.uuid()[:10]\n            while self.__class__.objects.filter(uuid=uuid).exists():\n                uuid = shortuuid.uuid()[:10]\n            self.uuid = uuid\n        super(BaseUuid, self).save(*args, **kwargs)\n</code></pre>\n\n<p>As one may notice, the above code has a fixed uuid lengh (10).</p>\n\n<p>Now I'd like to have the flexibility to set up that length. I want something like:</p>\n\n<pre><code>class BaseUuid(models.Model):  # base abstract model with uuid field\n    class Meta:\n        abstract = True\n\n    uuid = models.CharField(max_length=22, unique=True)\n\n    def __init__(self, uuid_length=10, *args, **kwargs):\n        super(BaseUuid, self).__init__(*args, **kwargs)\n        self.uuid_length = 22 if uuid_length &gt; 22 else 5 if uuid_length &lt; 5 else uuid_length\n\n    def save(self, *args, **kwargs):\n        if not self.uuid:\n            uuid = shortuuid.uuid()[:self.uuid_length]\n            while self.__class__.objects.filter(uuid=uuid).exists():\n                uuid = shortuuid.uuid()[:self.uuid_length]\n            self.uuid = uuid\n        super(BaseUuid, self).save(*args, **kwargs)\n</code></pre>\n\n<p>The idea is to enable uuid_length parameter:</p>\n\n<pre><code>class SomeModel(BaseUuid(uuid_length=6), SomeOtherMixin):\n    ...\n</code></pre>\n\n<p>But it doesn't seem to work. Since the BaseUuid is subclassed from models.Model, \"self.uuid_length\" was treated as a model field while it is not defined.</p>\n\n<p>I was wondering what other workarounds / technologies should I use? Thanks.</p>\n"},{"tags":["javascript","django","forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13113245,"title":"What's the correct Javascript scope to work with my Django template?","body":"<p>I have a template in Django with a foor loop that looks roughly like this:</p>\n\n<pre><code>{% if items %}\n\n&lt;form method=\"post\" name=\"managerform\" id=\"managerform\" action=\"\"&gt;{% csrf_token %}\n{{ managerform }}\n&lt;/form&gt; \n\n{% for item in items %}\n\n&lt;script type='text/javascript'&gt;\nvar yes = function yes() { manager(function(response) {\nif(response &amp;&amp; response.status == 'user') {        \nvar object = '{{ item }}'\ndocument.managerform.item.value = object;\ndocument.managerform.preferences.value = \"Yes\";\ndocument.managerform.submit();\n} \nelse{ \nauthUser(); } });}\n&lt;/script&gt;\n...\n&lt;button onclick=yes()&gt;Yes&lt;/button&gt;\n...\n{% endfor %}\n</code></pre>\n\n<p>Which submits the form, the problem is it always submits the last <code>item</code> from <code>items</code>. I've tried making <code>yes</code> take an argument, <code>aitem</code>, which didn't help because using <code>&lt;button onclick=yes(\"{{item}}\")&gt;</code> failed entirely and doing:</p>\n\n<pre><code>&lt;script&gt;\naitem=\"{{ item }}\"\n&lt;/script&gt;\n&lt;button onclick=yes(aitem)&gt;\n</code></pre>\n\n<p>just uses the last <code>item</code> from <code>items</code> again.</p>\n\n<p>Is there an obvious solution to this to anyone?</p>\n"},{"tags":["django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13113303,"title":"Django filesystem caching: changing local database seems to ignore cache","body":"<p>Having some performance issues with my site and want to fix things. I'm working locally but seeing similar issues on production, too.</p>\n\n<p>On my local dev build I've tried enabling filesystem caching like this:</p>\n\n<pre><code>CACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.filebased.FileBasedCache',\n        'LOCATION': 'c:/wamp/django_cache',\n        'TIMEOUT': 9000\n    }\n}\n\n\nCACHE_MIDDLEWARE_ALIAS = \"default\"\nCACHE_MIDDLEWARE_SECONDS = 9000\nCACHE_MIDDLEWARE_KEY_PREFIX = \"\"\n</code></pre>\n\n<p>Then, for good measure, I added this to my view:</p>\n\n<pre><code>@cache_page(60 * 60 * 5) # 5 hours\n</code></pre>\n\n<p>(I realise there's some conflict/duplication between the cache timeouts, just experimenting at this stage).</p>\n\n<p>I expected this to cache the output HTML for at least 150 minutes (9000 seconds), which seems to be the case (the cache folder fills with files as soon as I hit the server locally). However, if I then modify a model in my database whose content is displayed on my page, reloading the page shows the updated content, which surely shouldn't happen with a view cache like this? Note: this only happens if I modify things using the Django Admin panel, not if I change them directly in the database. I haven't set up any kind of post-save hooks for cache invalidation etc.</p>\n\n<p>Have I done something wrong here with my setup? </p>\n"},{"tags":["django","json","tastypie"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":683,"score":5,"question_id":8649387,"title":"Django-tastypie. Output in JSON to the browser by default","body":"<p>I see 'Sorry, not implemented yet. Please append \"?format=json\" to\nyour URL.'. I need always append string \"?format=json\". Can I make a\noutput in JSON by default?</p>\n\n<p>Regards,\nVitaliy</p>\n"},{"tags":["python","django","eclipse","postgresql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13113168,"title":"Postgres does not work with django eclipse","body":"<p>I installed django and installed the pydev plugin under eclipse. Then I downloaded the postgres(1.16.0) sql tool and installed that. Here are my settings:</p>\n\n<p><img src=\"http://i.stack.imgur.com/GGgxK.png\" alt=\"enter image description here\"></p>\n\n<p>Then I wanted to configure the setting file under django:</p>\n\n<pre><code>DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.postgresql_psycopg2' , \n        'NAME': 'django',                   \n        'USER': 'postgres',                 \n        'PASSWORD': 'admin',                \n        'HOST': '',        \n        'PORT': '',                     \n    }\n}\n</code></pre>\n\n<p>but when I do syncdb i get:</p>\n\n<pre><code>    backend = load_backend(db['ENGINE'])\n  File \"C:\\Python27\\lib\\site-packages\\django\\db\\utils.py\", line 24, in load_backend\n    return import_module('.base', backend_name)\n  File \"C:\\Python27\\lib\\site-packages\\django\\utils\\importlib.py\", line 35, in import_module\n    __import__(name)\n  File \"C:\\Python27\\lib\\site-packages\\django\\db\\backends\\postgresql_psycopg2\\base.py\", line 13, in &lt;module&gt;\n    from django.db.backends.postgresql_psycopg2.creation import DatabaseCreation\n  File \"C:\\Python27\\lib\\site-packages\\django\\db\\backends\\postgresql_psycopg2\\creation.py\", line 1, in &lt;module&gt;\n    import psycopg2.extensions\nImportError: No module named psycopg2.extensions\n</code></pre>\n\n<p>What do I do wrong?</p>\n\n<p>PS.: I am developing under win7 and eclipse juno</p>\n"},{"tags":["django","django-models","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13112008,"title":"Save the current user id in django model","body":"<p>I new in Django and i have found in everywhere but I haven't found what I looking for and it seems an easy work.\nI need to safe de current user id in the model Track when de user uploads a new Track.\nI only have found this:</p>\n\n<pre><code>class Track(models.Model):\n     ...\n     usuari = models.ForeignKey(User)\n</code></pre>\n\n<p>But this causes the user to choose between the differents users. I want to safe the current user automatically in a hidden camp or something.</p>\n\n<pre><code>class TrackForm(forms.ModelForm):\n    class Meta:\n        model = Track\n\ndef pujar_track(request):\nif request.method=='POST':\n    formulari = TrackForm(request.POST, request.FILES)\n    if formulari.is_valid():            \n        formulari.save()\n        return HttpResponseRedirect('/')\nelse:\n    formulari = TrackForm()\n\nreturn render(request,'trackForm.html',\n    {'formulari':formulari})\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["django","list","folder"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13112291,"title":"django list folder fail","body":"<p>I would like to list a folder (project folder/media/pictures/*)</p>\n\n<p>I try that, but it fails (urls error I don't know why)</p>\n\n<h2>Models</h2>\n\n<pre><code>class Picture(models.Model):\n\n    file = models.FileField(upload_to=\"pictures\")\n    slug = models.SlugField(max_length=50, blank=True)\n\n    def __unicode__(self):\n        return self.file\n\n    def getFileName(self):\n        return self.docfile.name\n\n    @models.permalink\n    def get_absolute_url(self):\n        return ('upload-new', )\n</code></pre>\n\n<h2>Urls</h2>\n\n<pre><code>from django.conf.urls.defaults import *\nfrom fileupload.views import PictureCreateView, PictureDeleteView\n\nurlpatterns = patterns('fileupload.views',\n    (r'^new/$', PictureCreateView.as_view(), {}, 'upload-new'),\n    #BUG BUG\n    #(r'^list/$', gallery),\n    (r'^delete/(?P&lt;pk&gt;\\d+)$', PictureDeleteView.as_view(), {}, 'upload-delete'),\n)\n</code></pre>\n\n<h2>Views</h2>\n\n<pre><code>def gallery(request):\n    path=\"/media/pictures\" \n    file_list =os.listdir(path)   \n    return render_to_response('list.html', {'files': file_list})\n</code></pre>\n\n<hr>\n\n<hr>\n"},{"tags":["python","django","table","admin"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13101793,"title":"Django production - No db table load in admin","body":"<p>I'm building a Django app and now I'm in production. I have this problem: after performing manage.py syncdb (all it's ok) I go into admin and I can not find the models tables . My admin.py file is present and this is my file url.py:</p>\n\n<pre><code>from django.conf.urls.defaults import patterns, include, url\nfrom django.contrib import admin\n# Uncomment the next two lines to enable the admin:\n# from django.contrib import admin\nadmin.autodiscover()\n\nurlpatterns = patterns('',\n    # Examples:\n    # url(r'^$', 'stambol.views.home', name='home'),\n    # url(r'^stambol/', include('stambol.foo.urls')),\n\n    # Uncomment the admin/doc line below to enable admin documentation:\n    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),\n\n    # Uncomment the next line to enable the admin:\n    url(r'^admin/', include(admin.site.urls)),\n</code></pre>\n\n<p>)</p>\n\n<p>Where is the problem? Thanks a lot for your help</p>\n"},{"tags":["django","django-admin","boolean","fields","django-widget"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1402,"score":4,"question_id":4337304,"title":"Django: Admin: changing the widget of the field in Admin","body":"<p>I have a model with a boolean value like that:</p>\n\n<pre><code>class TagCat(models.Model):\n    by_admin = models.BooleanField(default=True) \n</code></pre>\n\n<p>This appears as a checkbox in admin. </p>\n\n<p>1) How could I use this as a radio button in admin?<br>\n2) Also, how do i make it be always with a certain selected value in admin.<br>\n3) Also, I want the default value to be the opposite, when a non-admin user adds a TagCat. This field should be hidden from him.</p>\n\n<p>Can someone tell me how to do this? Django documentation doesn't seem to go in such details.</p>\n"},{"tags":["django","django-models","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":181,"score":0,"question_id":9122482,"title":"django inspectdb in admin site (admin.site.register)","body":"<p>I have been given a small legacy db (mysql) to work with, and therefore, I have tried to use the inspectdb command in django.</p>\n\n<p>So, I use something like:</p>\n\n<pre><code>python manage.py inspectdb &gt; models.py\n</code></pre>\n\n<p>It works fine, and I take the models.py and copy the class it created into my app (searchapp) as a models.py file.</p>\n\n<p>I have done a syncdb, and everything went fine. Results are as expected. </p>\n\n<p>Now, I have tried to add this model into my admin site, using:</p>\n\n<pre><code>from searchapp.models import Abaqus\nfrom django.contrib import admin\n\nadmin.site.register(Abaqus)\n</code></pre>\n\n<p>stored in a file called admin.py (Abaqus is the name of the class generated by inspectdb and searchapp is the app name). However, I am not able to see the app on the admin site. I have checked my settings.py and it includes the 'searchapp'.</p>\n\n<p>I was wondering if someone could point me in the right direction.. </p>\n"},{"tags":["python","django","mongodb","model","mongoengine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13091852,"title":"Invalid EmbeddedDocumentField item while saving instance of django mongoengine model (fails on save())","body":"<p>I am trying to save an instance of a model but I get </p>\n\n<pre><code>Invalid EmbeddedDocumentField item (1)\n</code></pre>\n\n<p>where <code>1</code> is item's id (I think).</p>\n\n<p>Model is defined as</p>\n\n<pre><code>class Graph(Document):\n    user = StringField(max_length=50, required=True)\n    title = StringField(max_length=500)\n    description = StringField(max_length=1000)\n    # field in error\n    graph_nodes = ListField(EmbeddedDocumentField(Graph_Node))\n    procedure = ListField(DictField())\n    created_on = DateTimeField(default=datetime.datetime.now)\n\n    def __unicode__(self):\n        return self.title\n\n    meta = {\n        'ordering': ['-created_on'],\n        'allow_inheritance': False,\n    }\n\n\nclass Graph_Node(EmbeddedDocument):\n    id = StringField(required=True, max_length=30)\n    button = StringField(max_length=40, required=True)\n    parameter = StringField(max_length=50, required=False)\n    values = ListField(StringField(max_length=30, required=False))\n    wires_out = ListField(StringField(max_length=30, required=False))\n    wires_in = ListField(StringField(max_length=30, required=False))\n\n    def __unicode__(self):\n        return self.id\n\n    meta = {\n        'allow_inheritance': False\n    }\n\n    def fill(self, args):\n        for k in args.keys():\n            if k in self.__dict__['_data'].keys():\n                self.__dict__['_data'][k] = args[k]\n</code></pre>\n\n<p>Call for <code>save()</code> method is the following:</p>\n\n<pre><code>Graph(user=request.user.username, title=title, \n      description=description, procedure=procedura, \n      graph_nodes=gnlist).save()\n</code></pre>\n\n<p>And exception is thrown on <code>save</code>, not on Graph creation.</p>\n\n<p><code>gnlist</code> is (from <code>pydev debugger</code>)</p>\n\n<pre><code>list: [&lt;Graph_Node: start&gt;, &lt;Graph_Node: 1&gt;, &lt;Graph_Node: end&gt;]\n</code></pre>\n\n<p>and <code>gnlist[1]</code> seems to be well formed (I'll post more details if needed)</p>\n\n<p>I've tried to trace the query on <code>mongodb</code> but it doesn't seem to be profiled, however output follows (in case help me to purge it from irrelevant logs):</p>\n\n<pre><code>{ \"ts\" : ISODate(\"2012-10-26T18:25:07.492Z\"), \"op\" : \"query\", \"ns\" : \"analysis.system.indexes\", \"query\" : { \"expireAfterSeconds\" : { \"$exists\" : true } }, \"ntoreturn\" : 0, \"ntoskip\" : 0, \"nscanned\" : 0, \"keyUpdates\" : 0, \"numYield\" : 0, \"lockStats\" : { \"timeLockedMicros\" : { \"r\" : NumberLong(248), \"w\" : NumberLong(0) }, \"timeAcquiringMicros\" : { \"r\" : NumberLong(2), \"w\" : NumberLong(4) } }, \"nreturned\" : 0, \"responseLength\" : 20, \"millis\" : 0, \"client\" : \"0.0.0.0\", \"user\" : \"\" }\n{ \"ts\" : ISODate(\"2012-10-26T18:26:07.505Z\"), \"op\" : \"query\", \"ns\" : \"analysis.system.indexes\", \"query\" : { \"expireAfterSeconds\" : { \"$exists\" : true } }, \"ntoreturn\" : 0, \"ntoskip\" : 0, \"nscanned\" : 0, \"keyUpdates\" : 0, \"numYield\" : 0, \"lockStats\" : { \"timeLockedMicros\" : { \"r\" : NumberLong(680), \"w\" : NumberLong(0) }, \"timeAcquiringMicros\" : { \"r\" : NumberLong(4), \"w\" : NumberLong(7) } }, \"nreturned\" : 0, \"responseLength\" : 20, \"millis\" : 0, \"client\" : \"0.0.0.0\", \"user\" : \"\" }\n{ \"ts\" : ISODate(\"2012-10-26T18:26:25.803Z\"), \"op\" : \"query\", \"ns\" : \"analysis.system.profile\", \"query\" : { }, \"ntoreturn\" : 0, \"ntoskip\" : 0, \"nscanned\" : 2, \"keyUpdates\" : 0, \"numYield\" : 0, \"lockStats\" : { \"timeLockedMicros\" : { \"r\" : NumberLong(62), \"w\" : NumberLong(0) }, \"timeAcquiringMicros\" : { \"r\" : NumberLong(7), \"w\" : NumberLong(3) } }, \"nreturned\" : 2, \"responseLength\" : 758, \"millis\" : 0, \"client\" : \"127.0.0.1\", \"user\" : \"\" }\n{ \"ts\" : ISODate(\"2012-10-26T18:27:07.506Z\"), \"op\" : \"query\", \"ns\" : \"analysis.system.indexes\", \"query\" : { \"expireAfterSeconds\" : { \"$exists\" : true } }, \"ntoreturn\" : 0, \"ntoskip\" : 0, \"nscanned\" : 0, \"keyUpdates\" : 0, \"numYield\" : 0, \"lockStats\" : { \"timeLockedMicros\" : { \"r\" : NumberLong(698), \"w\" : NumberLong(0) }, \"timeAcquiringMicros\" : { \"r\" : NumberLong(6), \"w\" : NumberLong(7) } }, \"nreturned\" : 0, \"responseLength\" : 20, \"millis\" : 0, \"client\" : \"0.0.0.0\", \"user\" : \"\" }\n{ \"ts\" : ISODate(\"2012-10-26T18:27:18.817Z\"), \"op\" : \"query\", \"ns\" : \"analysis.system.profile\", \"query\" : { }, \"ntoreturn\" : 0, \"ntoskip\" : 0, \"nscanned\" : 4, \"keyUpdates\" : 0, \"numYield\" : 0, \"lockStats\" : { \"timeLockedMicros\" : { \"r\" : NumberLong(121), \"w\" : NumberLong(0) }, \"timeAcquiringMicros\" : { \"r\" : NumberLong(11), \"w\" : NumberLong(8) } }, \"nreturned\" : 4, \"responseLength\" : 1463, \"millis\" : 0, \"client\" : \"127.0.0.1\", \"user\" : \"\" }\n{ \"ts\" : ISODate(\"2012-10-26T18:28:02.570Z\"), \"op\" : \"query\", \"ns\" : \"analysis.system.profile\", \"query\" : { }, \"ntoreturn\" : 0, \"ntoskip\" : 0, \"nscanned\" : 5, \"keyUpdates\" : 0, \"numYield\" : 0, \"lockStats\" : { \"timeLockedMicros\" : { \"r\" : NumberLong(112), \"w\" : NumberLong(0) }, \"timeAcquiringMicros\" : { \"r\" : NumberLong(13), \"w\" : NumberLong(7) } }, \"nreturned\" : 5, \"responseLength\" : 1799, \"millis\" : 0, \"client\" : \"127.0.0.1\", \"user\" : \"\" }\n{ \"ts\" : ISODate(\"2012-10-26T18:28:07.507Z\"), \"op\" : \"query\", \"ns\" : \"analysis.system.indexes\", \"query\" : { \"expireAfterSeconds\" : { \"$exists\" : true } }, \"ntoreturn\" : 0, \"ntoskip\" : 0, \"nscanned\" : 0, \"keyUpdates\" : 0, \"numYield\" : 0, \"lockStats\" : { \"timeLockedMicros\" : { \"r\" : NumberLong(680), \"w\" : NumberLong(0) }, \"timeAcquiringMicros\" : { \"r\" : NumberLong(5), \"w\" : NumberLong(7) } }, \"nreturned\" : 0, \"responseLength\" : 20, \"millis\" : 0, \"client\" : \"0.0.0.0\", \"user\" : \"\" }\n{ \"ts\" : ISODate(\"2012-10-26T18:28:11.608Z\"), \"op\" : \"query\", \"ns\" : \"analysis.system.profile\", \"query\" : { }, \"ntoreturn\" : 0, \"ntoskip\" : 0, \"nscanned\" : 7, \"keyUpdates\" : 0, \"numYield\" : 0, \"lockStats\" : { \"timeLockedMicros\" : { \"r\" : NumberLong(117), \"w\" : NumberLong(0) }, \"timeAcquiringMicros\" : { \"r\" : NumberLong(10), \"w\" : NumberLong(7) } }, \"nreturned\" : 7, \"responseLength\" : 2504, \"millis\" : 0, \"client\" : \"127.0.0.1\", \"user\" : \"\" }\n{ \"ts\" : ISODate(\"2012-10-26T18:28:51.589Z\"), \"op\" : \"command\", \"ns\" : \"analysis.$cmd\", \"command\" : { \"profile\" : 0 }, \"ntoreturn\" : 1, \"keyUpdates\" : 0, \"numYield\" : 0, \"lockStats\" : { \"timeLockedMicros\" : { \"r\" : NumberLong(0), \"w\" : NumberLong(24) }, \"timeAcquiringMicros\" : { \"r\" : NumberLong(0), \"w\" : NumberLong(11) } }, \"responseLength\" : 58, \"millis\" : 0, \"client\" : \"127.0.0.1\", \"user\" : \"\" }\n</code></pre>\n\n<p>Thanks    </p>\n"},{"tags":["django","file-upload","delete"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13112009,"title":"Django delete upload file fail","body":"<p>I would like to delete file associate to a file-field\nBut it doesn't work.</p>\n\n<p>Can you fix it plz?</p>\n\n<h2>Models.py</h2>\n\n<pre><code>class Picture(models.Model):\n\n    file = models.FileField(upload_to=\"pictures\")\n    slug = models.SlugField(max_length=50, blank=True)\n\n    def __unicode__(self):\n        return self.file\n\n    def getFileName(self):\n        return self.docfile.name\n</code></pre>\n\n<h2>Views.py</h2>\n\n<pre><code>def delete(self, request, *args, **kwargs):\n    \"\"\"\n    This does not actually delete the file, only the database record.\n    \"\"\"\n    self.object = self.get_object()\n    path = \"/media/pictures\" + '/' + self.object.name\n    #path = MEDIA_ROOT + '/' + self.object.name\n    #path = MEDIA_ROOT + '/' + self.object.getFileName()\n    self.object.delete()\n    os.remove(path)\n</code></pre>\n"},{"tags":["django","django-models"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13111793,"title":"Use a list as an object for a model, Django","body":"<p>I would like to know of it's possible to use a list as an object for a Model.</p>\n\n<p>I'm developing a django app and I would like the users to be able to \"like\" other users, and keep a list of the users they like so I can render it in an other page.</p>\n\n<p>So is there something like a \"listField\"?</p>\n\n<p>Thank you for your help.</p>\n"},{"tags":["django","django-templates","django-template-tags"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13097736,"title":"loop values into divs in django template","body":"<p>I have a table with 9 values. I want to loop through the table and put the results into a div structure in the template.</p>\n\n<p>I tried to <a href=\"https://docs.djangoproject.com/en/1.3/ref/templates/builtins/\" rel=\"nofollow\">cycle</a> through them, but I wasn't able to put them into different divs.</p>\n\n<p>The following works to put the same value in both places. How can I increment to the next group_nm?</p>\n\n<pre><code>{% for g in groups %}\n\n    &lt;div class=\"left1\"&gt;\n            &lt;a href=\"/group/{{ g.group_nm }}\"&gt;\n        &lt;img src=\"/site_media/images/groups/{{ g.group_nm }}.gif\" height=\"125px\" width=\"200em\" /&gt;\n            &lt;/a&gt;\n    &lt;p align=\"center\"&gt;    \n        &lt;font size=\"5\" face=\"Georgia, Arial\" color=\"maroon\"&gt;\n            {{ g.group_nm }}\n        &lt;/font&gt;\n    &lt;/p&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"left2\"&gt;\n            &lt;a href=\"/group/{{ g.group_nm }} \"&gt;\n        &lt;img src=\"/site_media/images/groups/{{ g.group_nm }}.jpg\" height=\"125px\" width=\"200em\" /&gt;\n            &lt;/a&gt;\n    &lt;p align=\"center\"&gt;          \n        &lt;font size=\"5\" face=\"Georgia, Arial\" color=\"maroon\"&gt;\n            {{ g.group_nm }}\n        &lt;/font&gt;\n    &lt;/p&gt;         \n    &lt;/div&gt;\n</code></pre>\n\n<p>Thanks.</p>\n\n<p>EDIT: I want to do this with 9 groups (eventually, in another place, I'll want to do it with an unlimited number). The above example only shows an example of 2 that are repeated.</p>\n"},{"tags":["python","sql","django","api","tastypie"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":2522,"score":5,"question_id":6744541,"title":"Create ,UPDATE and DELETE call using django-tastypie","body":"<p>I am using django-tastypie to build the API for my project. I followed the <a href=\"http://toastdriven.github.com/django-tastypie/toc.html\" rel=\"nofollow\">tastypie-doc</a>.</p>\n\n<p>Using this doc I am able to call the GET method and filter the data based on the parameter. But I couldn't find any examples for PUT(UPDATE), DELETE (delete object) and POST(Create a new object).</p>\n\n<p>Does anyone know how to write a call to create, update and delete in django-tastypie?</p>\n\n<p>Thanks to all.</p>\n"},{"tags":["python","django","cloudinary"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12961328,"title":"cloudinary cloudinary.models.CloudinaryField add public_id to the field","body":"<p>Here is a simple model:</p>\n\n<p>class Product(models.Model):</p>\n\n<pre><code>caption = models.CharField(max_length=1000)\ndescription=models.TextField()\nsupplier = models.ForeignKey(Supplier)\ndesignNumber = models.CharField(max_length=100)\nprice = models.IntegerField()\nstock = models.IntegerField()\nparameters = models.ManyToManyField(ProductParameterValues)\nimage = cloudinary.models.CloudinaryField('image')\nadded_on = models.DateTimeField(auto_now=True)\ndef __unicode__(self):\n    return self.designNumber + \":\" + self.caption + \":\" + self.supplier.name\n</code></pre>\n\n<p>I want to be able to have the image (cloudinary image) have a public id made up of the other params - like supplier.user.id and designNumber.</p>\n\n<p>How do we do this?</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","django","heroku"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":802,"score":5,"question_id":10142284,"title":"No web processes running Error - Deploying Django on Heroku","body":"<p>I am using the tutorial to deploy Django. [http://devcenter.heroku.com/articles/django] After I do a git push heroku master, there are no web processes.</p>\n\n<pre><code>Process  State  Command  \n-------  -----  ------- \n</code></pre>\n\n<p>On the log it looks like the following.</p>\n\n<pre><code>2012-04-13T03:48:45+00:00 heroku[slugc]: Slug compilation started\n2012-04-13T03:49:32+00:00 heroku[api]: Config add PYTHONUNBUFFERED, PYTHONPATH, PATH,     \nLD_LIBRARY_PATH, LANG, PYTHONHOME, LIBRARY_PATH, PYTHONHASHSEED by zach@gmail.com\n2012-04-13T03:49:32+00:00 heroku[api]: Release v2 created by zach@gmail.com\n2012-04-13T03:49:34+00:00 heroku[api]: Release v3 created by zach@gmail.com\n2012-04-13T03:49:34+00:00 heroku[api]: Deploy d1263ef by zach@gmail.com\n2012-04-13T03:49:34+00:00 heroku[web.1]: State changed from created to down\n2012-04-13T03:49:35+00:00 heroku[slugc]: Slug compilation finished\n2012-04-13T03:50:19+00:00 heroku[router]: Error H14 (No web processes running) -&gt; GET    \ngrowing-winter-4952.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=\n</code></pre>\n\n<p>Any ideas? I was able to get this to work with another app.  Thank you.</p>\n\n<p>Also when I do a heroku scale web=1                 I get this</p>\n\n<pre><code>Scaling web processes...  !    Record not found.\n</code></pre>\n"},{"tags":["django","celery","postgresql-9.1","django-celery"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":90,"score":2,"question_id":12404593,"title":"Django-celery task and django transaction","body":"<p>I have a question regarding transactions and celery tasks. So it's no mystery to me that of course if you have a transaction and a celery task accessing the same table/records we'll have a race condition.</p>\n\n<p>However, consider the following piece of code:</p>\n\n<pre><code>def f(self):\n   # function of module that inherits from models.Model\n   self.field_a = datetime.now()\n\n   self.save()\n   transaction.commit_unless_managed()\n\n   # depending on the configuration of this module\n   # this might return None or a datetime object.\n   eta = self.get_task_eta()\n\n   if eta:\n       celery_task_do_something.apply_async(args=(self.pk, self.__class__),\n                                            eta=eta)\n   else:\n       celery_task_do_something.delay(self.pk, self.__class__)\n</code></pre>\n\n<p>Here's the celery task:</p>\n\n<pre><code>def celery_task_do_something(pk, cls):\n\n    o = cls.objects.get(pk=pk)\n\n    if o.field_a:\n        # perform something\n        return True\n    return False\n</code></pre>\n\n<p>As you can see, before creating the task we call <code>transaction.commit_unless_managed</code> and it should commit, since django transaction is not currently managed.</p>\n\n<p>However, when running celery task the field <code>field_a</code> is not set.</p>\n\n<p><strong>My question</strong>:</p>\n\n<p>Since we do commit before creating the task, is it still possible that there's a race condition?</p>\n\n<p><strong>Additional info</strong></p>\n\n<ul>\n<li><p>We're using Postgres version 9.1</p></li>\n<li><p>Every transaction is run with READ COMMITTED isolation level</p></li>\n<li><p>On a different db with engine <code>dowant.lib.db.backends.postgresql_psycopg2_debugger</code> <code>field_a</code> is already set and the task works as expected. With engine <code>dowant.lib.db.backends.postgresql_psycopg2_hstore_ready</code> the described issue appears (not sure if it's related with the engine).</p></li>\n<li><p>Celery version is 2.2</p></li>\n<li><p>I tried different databases. Still the same behavior, except when the engines change. So that's why I mentioned this.</p></li>\n</ul>\n\n<p>Thanks a lot.</p>\n"},{"tags":["python","ajax","django"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":413,"score":0,"question_id":7704566,"title":"Why is my dajax-powered loading another page?","body":"<p>I'm working through the <a href=\"http://dajaxproject.com/random/\" rel=\"nofollow\">random machine example</a>, but I'm having trouble. I've installed Dajax and Dajaxice according to these two pages: <a href=\"https://github.com/jorgebastida/django-dajax/wiki/Installation\" rel=\"nofollow\">Dajax</a> and <a href=\"http://docs.dajaxproject.com/dajaxice/installation.html\" rel=\"nofollow\">Dajaxice</a>. My ajax.py file looks like this:</p>\n\n<pre><code>import random\nfrom dajax.core import Dajax\nfrom dajaxice.decorators import dajaxice_register\n\n@dajaxice_register\ndef randomize(request):\n    dajax = Dajax()\n    dajax.assign('#result','value',random.randint(1, 10))\n    return dajax.json()\n</code></pre>\n\n<p>Here's my views.py:</p>\n\n<pre><code>from django.shortcuts import render_to_response\nfrom django.template import RequestContext\n\ndef dajax(request):\n     return render_to_response( 'dajax.html', context_instance=RequestContext(request) )\n</code></pre>\n\n<p>Here's my urls.py:</p>\n\n<pre><code>from django.conf.urls.defaults import patterns, include, url\nfrom dajaxice.core import dajaxice_autodiscover\nfrom dajaxice import urls\nfrom django.conf import settings\nfrom Dajax.myapp.views import dajax\ndajaxice_autodiscover()\n\nurlpatterns = patterns('',\n    (r'^%s/' % (settings.DAJAXICE_MEDIA_PREFIX), include('dajaxice.urls')),\n    (r'^dajax/$', dajax),\n)\n</code></pre>\n\n<p>My html form tag looks like this:</p>\n\n<pre><code>&lt;form&gt;\n        &lt;input type=\"text\" name=\"result\" value=\"\" id=\"result\"&gt;\n        &lt;input type=\"button\" name=\"rand\" value=\"Let's Rand!\" id=\"rand\" onclick=\"Dajaxice.myapp.randomize(Dajax.process); return false;\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Here's what my head tag looks like:</p>\n\n<pre><code>&lt;head&gt;\n    &lt;title&gt;My base template&lt;/title&gt;\n    {% dajaxice_js_import %}\n    &lt;script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js\" type=\"text/javascript\" charset=\"UTF-8\"&gt;&lt;/script&gt;\n    &lt;script src=\"{{ STATIC_URL }}js/jquery.dajax.core.js\" type=\"text/javascript\" charset=\"UTF-8\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n</code></pre>\n\n<p>I added the following to my <strong>init</strong>.py file in my project dir:</p>\n\n<pre><code>from myapp.ajax import randomize\n</code></pre>\n\n<p>Also of note, my Django app's name is myapp.</p>\n\n<p>On my page, when I click on Let's Rand!, the page goes to <a href=\"http://localhost:8000/dajax/?result=2\" rel=\"nofollow\">http://localhost:8000/dajax/?result=2</a>, and no value shows up in the text input box. I checked the console in Chromium and there aren't any errors.</p>\n\n<p>Did I incorrectly install either Dajax or Dajaxice, or is there something wrong with my code above?</p>\n\n<p>My guess is that because I'm using jQuery instead of Prototype, there's something different I need to do.</p>\n\n<p>Thanks for your help!</p>\n"},{"tags":["python","django"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":1088,"score":4,"question_id":4729832,"title":"Proccessing a Django UploadedFile as UTF-8 with universal newlines","body":"<p>In my django application, I provide a form that allows users to upload a file. The file can be in a variety of formats (Excel, CSV), come from a variety of platforms (Mac, Linux, Windows), and be encoded in a variety of encodings (ASCII, UTF-8).</p>\n\n<p>For the purpose of this question, let's assume that I have a view which is receiving <code>request.FILES['file']</code>, which is an instance of <code>InMemoryUploadedFile</code>, called <code>file</code>. My problem is that <code>InMemoryUploadedFile</code> objects (like <code>file</code>):</p>\n\n<ol>\n<li>Do not support UTF-8 encoding (I see a <code>\\xef\\xbb\\xbf</code> at the beginning of the file, which as I understand is a flag meaning 'this file is UTF-8').</li>\n<li>Do not support universal newlines (which probably the majority of the files uploaded to this system will need).</li>\n</ol>\n\n<p>Complicating the issue is that I wish to pass the file in to the python <code>csv</code> module, which does not natively support Unicode. I will happily accept answers that avoid this issue - once I get django playing nice with UTF-8 I'm sure I can bludgeon <code>csv</code> into doing the same. (Similarly, please ignore the requirement to support Excel - I am waiting until CSV works before I tackle parsing Excel files.)</p>\n\n<p>I have tried using <code>StringIO</code>,<code>mmap</code>,<code>codec</code>, and any of a wide variety of ways of accessing the data in an <code>InMemoryUploadedFile</code> object. Each approach has yielded differing errors, none so far have been perfect. This shows some of the code that I feel came the closest:</p>\n\n<pre><code>import csv\nimport codecs\n\nclass CSVParser:\n    def __init__(self,file):\n        # 'file' is assumed to be an InMemoryUploadedFile object.\n        dialect = csv.Sniffer().sniff(codecs.EncodedFile(file,\"utf-8\").read(1024))\n        file.open() # seek to 0\n        self.reader = csv.reader(codecs.EncodedFile(file,\"utf-8\"),\n                                 dialect=dialect)\n        try:\n            self.field_names = self.reader.next()\n        except StopIteration:\n            # The file was empty - this is not allowed.\n            raise ValueError('Unrecognized format (empty file)')\n\n        if len(self.field_names) &lt;= 1:\n            # This probably isn't a CSV file at all.\n            # Note that the csv module will (incorrectly) parse ALL files, even\n            # binary data. This will catch most such files.\n            raise ValueError('Unrecognized format (too few columns)')\n\n        # Additional methods snipped, unrelated to issue\n</code></pre>\n\n<p>Please note that I haven't spent too much time on the actual parsing algorithm so it may be wildly inefficient, right now I'm more concerned with getting encoding to work as expected.</p>\n\n<p>The problem is that the results are also not encoded, despite being wrapped in the Unicode <code>codecs.EncodedFile</code> file wrapper.</p>\n\n<p><strong>EDIT:</strong> It turns out, the above code does in fact work. <code>codecs.EncodedFile(file,\"utf-8\")</code> is the ticket. It turns out the reason I thought it didn't work was that the terminal I was using does not support UTF-8. Live and learn!</p>\n\n<p>Thanks for any help, and please let me know if I can supply you with more information.</p>\n"},{"tags":["django","redirect","https"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":152,"score":3,"question_id":3743735,"title":".Stay on SSL across redirects","body":"<p>Parts of my site should be server over SSL. I'm only using paths (not full URLs) in links so users stay on SSL when opening links. However, when I use the redirect shortcut function the user is redirected to a non-SSL URL.</p>\n\n<p>Is there any way to specify that the redirect should happen over SSL? It would be best if redirects behaved just like ordinary links and didn't change between HTTP and HTTPS protocols.</p>\n"},{"tags":["python","django","django-models","django-views"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1815,"score":4,"question_id":3201018,"title":"Django language codes","body":"<p>What is the link to find the list of languages i.e, language_code</p>\n\n<pre><code>      (Swedish,sv)\n      (English,en) ..........\n</code></pre>\n\n<p>Please provide the link</p>\n\n<p>Thanks..</p>\n"},{"tags":["database","django","relationship","circular"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13107436,"title":"Circular DB relationship in Django","body":"<p>I have following model (campaigns/models.py)</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\n\nclass Module(models.Model):\n    name = models.CharField(max_length=20)\n    def __unicode__(self):\n        return self.name\n\nclass TestType(models.Model):\n    name = models.CharField(max_length=20)\n    def __unicode__(self):\n        return self.name\n\nclass Test(models.Model):\n    PROTO_CHOICES = (\n        ('TCP','tcp'),\n        ('UDP','udp'),\n    )\n    module = models.ForeignKey(Module)\n    testtype = models.ForeignKey(TestType)\n    name = models.CharField(max_length=50, unique=True)\n    port = models.IntegerField(blank=True, null=True)\n    proto = models.CharField(max_length=3, blank=True, choices=PROTO_CHOICES)\n    payload = models.TextField()\n    sig_match = models.TextField(blank=True)\n    def __unicode__(self):\n        return self.name\n\nclass Campaign(models.Model):\n    name = models.CharField(max_length=50, unique=True)\n    tests = models.ManyToManyField(Test)\n    updated = models.DateTimeField(auto_now_add=True)\n    user = models.ForeignKey(User, editable=False)\n    def __unicode__(self):\n        return self.name\n\nclass CampaignRun(models.Model):\n    campaign = models.ForeignKey(Campaign)\n    name = models.CharField(max_length=50, unique=True)\n    run_start = models.DateTimeField()\n    run_end = models.DateTimeField()\n    updated = models.DateTimeField(auto_now=True)\n    user = models.ForeignKey(User, editable=False)\n    class Meta:\n    def __unicode__(self):\n        return self.name\n\nclass TestRun(models.Model):\n    campaignrun = models.ForeignKey(CampaignRun)\n    test = models.ForeignKey(Test)\n    test_start = models.DateTimeField()\n    test_end = models.DateTimeField()\n    alert = models.TextField(blank=True)\n    flag = models.IntegerField(blank=True, null=True)\n</code></pre>\n\n<p>…which resulted in following database (sqlite3):</p>\n\n<pre><code>                                                                       +-----------------------------+\n                                                                       |                             |\n   +---------------------------+     +------------------------------+  |     +--------------------+  |\n   | campaigns_testrun         |     | campaigns_test               |  |     | campaigns_module   |  |\n   +----------------+----------+     +----------------+-------------+  |     +------+-------------+  |\n   | id             | INT      |  +--| id             | INT         |--+  +--| id   | INT         |  |\n+--| campaignrun_id | INT      |  |  | module_id      | INT         |-----+  | name | VARCHAR(20) |  |\n|  | test_id        | INT      |--+  | testtype_id    | INT         |--+     +------+-------------+  |\n|  | test_start     | DATETIME |     | name           | VARCHAR(50) |  |                             |\n|  | test_end       | DATETIME |     | port           | INT         |  |     +--------------------+  |\n|  | alert          | TEXT     |     | proto          | VARCHAR(3)  |  |     | campaigns_testtype |  |\n|  | flag           | INT      |     | payload        | TEXT        |  |     +------+-------------+  |\n|  +----------------+----------+     | sig_match      | TEXT        |  +-----| id   | INT         |  |\n|                                    +----------------+-------------+        | name | VARCHAR(20) |  |\n|                                                                            +------+-------------+  |\n|                                                                                                    |\n|  +------------------------+                                +--------------------------+            |\n|  | campaigns_campaignrun  |     +--------------------+     | campaigns_campaign_tests |            |\n|  +-------------+----------+     | campaigns_campaign |     +-------------+------------+            |\n+--| id          | INT      |     +------+-------------+     | id          | INT        |            |\n   | campaign_id | INT      |-----| id   | INT         |-----| campaign_id | INT        |            |\n   | name        | INT      |     | name | VARCHAR(50) |     | test_id     | INT        |------------+\n   | run_start   | DATETIME |     +------+-------------+     +-------------+------------+\n   | run_end     | DATETIME |     \n   +-------------+----------+     \n</code></pre>\n\n<p>Here is the logic:</p>\n\n<ul>\n<li>A campaign is composed of tests</li>\n<li>A campaign can be run many times (campaignrun) and results in test results (test run).</li>\n<li>For each campaign run, tests related information are gathered from the test table</li>\n</ul>\n\n<p>Obviously, there is a circular relationship and the integrity of the database is only ensured by the application.</p>\n\n<p>However, from a database architect perspective, this circular relation is incorrect since it can results in integrity problems:</p>\n\n<ul>\n<li>In SQL directly or from the django admin module, it is possible to create tests in campaigns_testrun that are NOT in the campaign_tests table</li>\n</ul>\n\n<p>For the above reason, the solution would be to link campaigns_testrun with campaigns_campaign_tests directly. However, I don't think it is possible in Django.</p>\n\n<p>Should you have any idea how to deal with this, please be welcomed to comment.</p>\n\n<p>Thank you in advance for your help.</p>\n"},{"tags":["django","django-forms","django-widget","cloudinary"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":12362288,"title":"Django Form Field Problems with Cloudinary's CloudinaryImage Class","body":"<p>I've got a <a href=\"https://www.djangoproject.com/\" rel=\"nofollow\">Django</a> form that is displaying a <a href=\"https://github.com/django/django/blob/0133d66734f5b0470436a22f5b85bdf7266bf1cf/django/forms/widgets.py#L335\" rel=\"nofollow\">ClearableFileInput</a> for a <a href=\"https://github.com/cloudinary/pycloudinary/blob/6d897c51c4a46a4f0b7c746125759e36abd4a366/cloudinary/__init__.py#L61\" rel=\"nofollow\">CloudinaryImage</a> (from <a href=\"https://cloudinary.com/\" rel=\"nofollow\">Cloudinary</a>).  Things are working great, except when I display the form field, I get a mangled href in the anchor element:</p>\n\n<pre><code>Currently: &lt;a href=\"&amp;lt;bound method CloudinaryImage.url of &amp;lt;cloudinary.CloudinaryImage object at 0x10b3f4ad0&amp;gt;&amp;gt;\"&gt;&amp;lt;cloudinary.CloudinaryImage object at 0x10b3f4ad0&amp;gt;&lt;/a&gt; &lt;input type=\"checkbox\" name=\"logo-clear\" id=\"logo-clear_id\" /&gt; &lt;label for=\"logo-clear_id\"&gt;Clear&lt;/label&gt;&lt;br /&gt;Change: &lt;input id=\"id_logo\" type=\"file\" name=\"logo\" class=\"span4\" /&gt;\n</code></pre>\n\n<p>Here is the template code I am using:</p>\n\n<pre><code>&lt;div class=\"fieldWrapper\"&gt;\n    &lt;label for=\"id_logo\"&gt;&lt;h3&gt;{{ form.logo.label }}:&lt;/h3&gt;&lt;/label&gt;\n    {{ form.logo|add_class:\"span4\" }}\n    &lt;p&gt;{{ form.logo.help_text }}&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The add_class part come from <a href=\"https://github.com/kmike/django-widget-tweaks\" rel=\"nofollow\">django-widget-tweaks</a>.  I've taken the add_class part out with no change in the output.</p>\n\n<p>Here is my form definition:</p>\n\n<pre><code>class OrganizationFormTheme(forms.ModelForm):\n    pass\n\n    class Meta:\n        fields = ('logo',)\n        model = Organization\n</code></pre>\n\n<p>It looks like Django is having problems with the CloudinaryImage's url function.  I suspect it is looking for a simple property rather than a function.</p>\n\n<p>Any suggestions on how to handle this?  Should I subclass CloudinaryImage and rewrite the url function somehow?</p>\n"},{"tags":["python","django","django-models","django-admin"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":13108885,"title":"Customize add/change model page in Django admin","body":"<p>I have a storehouse with a lot of articles in it, so I want to make a register of the entries and outputs of the articles. I'm developing a Django web app, using the Admin site, to add the articles and to register these entries and outputs. My Django models are (only Articles, Entries and RegisterE, because the outputs are similar):</p>\n\n<pre><code>class Article (models.Model):\n    xlog_name = models.CharField('nombre XLOG', max_length=20)\n    xlog_code = models.CharField('código XLOG', max_length=20)\n    unit_price = models.DecimalField('precio unitario', max_digits=9, decimal_places=3)\n    minimum_stock = models.IntegerField('stock mínimo')\n    actual_stock = models.IntegerField('stock actual')\n\nclass Entry (models.Model):\n    date = models.DateField('fecha', default = date.today)\n\nclass RegisterE (models.Model):\n    entry = models.ForeignKey(Entry)\n    article = models.ForeignKey(Article)\n    amount = models.IntegerField('cantidad', default=0)\n</code></pre>\n\n<p>where each RegisterE is the added amount of one of the articles in the Entry.</p>\n\n<p>The list of articles is always the same, doesn't change a lot. So, what I want to do is when I add/change an entry, the admin page lets me set the date when the entry happens and, for each article in the database, set the units that I've added to the storehouse, all in the same place.</p>\n\n<p>I'm using ModelAdmin to do this, and with the TabularInline option I'm getting something nearly, but it's not what I want, because I can't show a dynamic list of RegisterE's (one for each article) with their articles fields pre populated and not editable. This is my ModelAdmin's:</p>\n\n<pre><code>class RegisterEInline(admin.TabularInline):\n    model = RegisterE\n\nclass EntryAdmin(admin.ModelAdmin):\n    inlines = [RegisterEInline, ]\n\nadmin.site.register(Entry, EntryAdmin)\n</code></pre>\n"},{"tags":["django","django-admin"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1021,"score":2,"question_id":5091813,"title":"Django admin: hide read-only fields on new records?","body":"<p>I'm using the Django admin site with some readonly fields on records:</p>\n\n<pre><code>class BookAdmin(admin.ModelAdmin):\n    fieldsets = [\n    (None, {'fields': ['title', 'library_id', 'is_missing', \\\n                       'transactions_all_time']}),\n    ]\n    readonly_fields = ['transactions_all_time',]\n    list_display = ('library_id', 'author', 'title')\n</code></pre>\n\n<p>This works great when editing records - the <code>transactions_all_time</code> field is read-only, just as I want.</p>\n\n<p>However, when adding new records it behaves a bit oddly. I get a read-only section at the bottom of the page, which I can't edit and which is irrelevant at this point.</p>\n\n<p>It would be much better if this field was not present at all when adding new records. </p>\n\n<p>Is there any Django option for not displaying read-only fields while adding a new record? I know I can hack the CSS on <code>add_form.html</code> to hide it, but is there a better way?</p>\n\n<p>Thanks. </p>\n"},{"tags":["python","django","decimal","rounding"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13106953,"title":"Python ROUND_05UP","body":"<p>I've got a system that handles account &amp; COD transactions. When a client is paying via COD, I need to round up or round down the cents.</p>\n\n<pre><code>Eg.\nTotal = 64.42 - rounds to: 64.40\nTotal = 64.57 - rounds to 64.60\n</code></pre>\n\n<p>I'm trying to figure out the best way to do this in python and also store the difference in a decimal field in a database.</p>\n\n<p>I'm using DJANGO. I was trying to use the ROUND_05UP part of decimal but I'm not sure how to do it. I wrote a custom filter to display it, but that's not even working:</p>\n\n<pre><code>@register.filter\ndef currency(value, arg='en_US', symbol=True):\n\n    saved = '.'.join([x for x in locale.getlocale() if x]) or (None, None)\n    given = arg and ('.' in arg and str(arg) or str(arg) + '.UTF-8')\n\n    # Workaround for Python bug 1699853 and other possibly related bugs.\n    if '.' in saved and saved.split('.')[1].lower() in ('utf', 'utf8'):\n        saved = saved.split('.')[0] + '.UTF-8'\n\n    if saved == (None, None) and given == '':\n        given = 'en_US.UTF-8'\n\n    try:\n        locale.setlocale(locale.LC_ALL, given)\n\n        return locale.currency(value or 0, symbol, True)\n\n    except (TypeError, locale.Error):\n        return ''\n\n    finally:\n        locale.setlocale(locale.LC_ALL, saved)\n\n\n@register.filter\ndef currency_cash(value):\n    value = decimal.Decimal(value)\n    return currency(value.quantize(Decimal(10) ** -2, rounding=decimal.ROUND_05UP))\n</code></pre>\n\n<p>Does anyone have a function written that does this?</p>\n\n<p><strong>UPDATE:</strong> The reason for this in australia we have no coins less then 5 cents. So 45.55 would stay as 45.55.</p>\n\n<p>Cheers,\nBen</p>\n"},{"tags":["c#","python",".net","django","http"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13107241,"title":"Interface django with c# desktop application","body":"<p>I have this project where i have a django server which is running on a machine, which is used to communicate with other machines on the network.\nNow i also have another application written in c# on the same machine which is used to monitor state of certain hardware. </p>\n\n<p>I want to know if there is a way to write a http request/response system in the c# application  where i can interface it with the django server such that when django makes a request to the c# application it reads certain values and returns a response to Django.</p>\n\n<p>Can someone please tell me how to write this http server on the c# application or give me resources where i can look this up.</p>\n\n<p>Thanks</p>\n"},{"tags":["django","mvc"],"answer_count":2,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":402,"score":6,"question_id":8590468,"title":"django: Fat models and skinny controllers?","body":"<p>This is a general architecture question.  I read in many places that in an MVC framework, (1) models ought to be fat, and controllers ought to be skinny.  But I also read that (2) the details depend on the framework you're developing in.  So, what if you're developing in django?</p>\n\n<p>My experience with django is that a lot of the logic ends up getting put into views and forms.  Not the \"business logic,\" but the details of handling requests, sessions, etc.  In terms of lines of code, these details often outweigh the business logic of manipulating model objects.  Am I doing something wrong, or is this how django works?</p>\n"},{"tags":["ruby-on-rails","django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13108048,"title":"Integration of Rails and Django app","body":"<p>What would the sensible way to integrate multiple web applications. At this point I think they will all be on Rails. Is Rails engines the way to go or can it be hacked via the view / html? </p>\n\n<p>What if two were Rails and one was Django?</p>\n\n<p>I'd like the apps to be able to share data, and display portions of views from one app inside another view on the master Rails app.</p>\n"},{"tags":["django","django-mailer"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13107940,"title":"Unable to change the from email address in Django project","body":"<p>I have been using Django for quite sometime now. I use django-mailer for queuing emails and sending html emails. Earlier I was running a single django site, but now I am running two sites from the same django project.</p>\n\n<p>Apps like mailer are common to both of them. The send_html_mail function is like this</p>\n\n<pre><code>send_html_mail(subject, message_plaintext, message_html, settings.DEFAULT_FROM_EMAIL, recipients)\n</code></pre>\n\n<p>But what is happening no matter what email address I add in the <code>from_email</code> I am still getting the old one. I have declared <code>DEFAULT_FROM_EMAIL</code> separately in each settings file, but still its picking the old one. </p>\n\n<p>What's even stranger is that if I put from_email as <code>\"'Sachin Gupta'&lt;sachin@secondsite.com&gt;\"</code>, the email I receive is like <code>Sachin Gupta sachin@firstsite.com</code></p>\n\n<p>Its picking up the name I put in the email but not the actual email address. I have double checked everywhere, I have not declared <code>DEFAULT_FROM_EMAIL</code> elsewhere.</p>\n\n<p>Can anybody help me understand what's going wrong here?</p>\n"},{"tags":["django","django-models","django-model"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13104365,"title":"using django filters inside model function","body":"<p>The main purpose of a model is to contain business logic, so I want most of my code inside django model in the form of methods.  For example I want to write a method named <code>get_tasks_by_user()</code> inside task model. So that I can access it as    </p>\n\n<pre><code>Tasks.get_tasks_by_user(user_id)\n</code></pre>\n\n<p>Following is my model code:</p>\n\n<pre><code>class Tasks(models.Model):\n    slug=models.URLField()\n    user=models.ForeignKey(User)\n    title=models.CharField(max_length=100)\n    objects=SearchManager()\n    def __unicode__(self):\n        return self.title\n    days_passed = property(getDaysPassed)\n    def get_tasks_by_user(self,userid):\n        return self.filters(user_id=userid)\n</code></pre>\n\n<p>But this doesn't seems to work, I have used it in view as:</p>\n\n<pre><code>    tasks = Tasks.objects.get_tasks_by_user(user_id)\n</code></pre>\n\n<p>But it gives following error:</p>\n\n<pre><code>'SearchManager' object has no attribute 'get_tasks_by_user'\n</code></pre>\n\n<p>If I remove <code>objects=SearchManager</code>, then just name of manager in error will change so I think that is not issue. Seems like I am doing some very basic level mistake, please tell what I am doing wrong and how can I do what I am trying to do. I know I can do same thing via :<code>Tasks.objects.filters(user_id=userid)</code> but I want to keep all such logic in model. So please tell what is the correct way to do so. </p>\n\n<p>Thanks</p>\n"},{"tags":["django","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13107543,"title":"simple application pass value from django views to javascript","body":"<p>It has been 2day i am trying to figure out how to do that. I am a novice so please give as detailed explanation as possible.</p>\n\n<p>I am doing this in my views.py</p>\n\n<pre><code>dict1 = simplejson.dumps(dict1)\nreturn render_to_response('main_page.html', {\n                    'js_testsuite':testsuite_dict,\n                    'js_testset':js_testset,\n                    'dict1':dict1})\n</code></pre>\n\n<p>In main_page.html</p>\n\n<pre><code>{% if js_testsuite %}               \n&lt;select id=\"testsuites\" name=\"testsuite\" onchange=\"setOptions(document.selection.testsuite.selectedIndex);\"&gt;\n    {% for key, value in js_testsuite.items %}\n            &lt;option value={{ value }} name=\"testsuite\"&gt;{{ key }}&lt;/option&gt;\n    {% endfor %}\n&lt;/select&gt;\n{% endif %}\n</code></pre>\n\n<p>In setoptions.js, which contains the function setOptions(value), to which i am passing selected index of the select box, and using this value i have to set the second select box and the data for this select box has to come from the views.py given above.\nAlso, I tried doing </p>\n\n<pre><code>var value_from_django = {{ dict1 }};\n</code></pre>\n\n<p>what are the other things im missing. Could you please provide a detailed explanation on this. I had been trying this for 2 days.</p>\n\n<ul>\n<li>Is there a way in which I can pass the value from django views to the javascript directly bypassing the django template?</li>\n<li>Can I pass the information from django views to the html template and then to the javascript?</li>\n</ul>\n\n<p>The javascript I am referring to is a simple javascript not jquery.</p>\n\n<p>Thanks for your support,</p>\n\n<p>Vinay</p>\n"},{"tags":["javascript","jquery","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13106439,"title":"Implementing Jquery for ratings in Django","body":"<p>I'm trying to implement a 5-star rating system on my site using jQuery Star Rating plugin (http://www.fyneworks.com/jquery/star-rating/#tab-Overview). I have never used jQuery or Javascript before, but I saw that I could use the following code <code>&lt;input name=\"star1\" type=\"radio\" class=\"star\"/&gt;</code> to get the star button. But instead I just see a regular radio button which makes me think I didn't install the plugin properly. </p>\n\n<p>Is there anything special I need to do to get this plugin working (ex: pointing to the path where I put the code?) Sorry for the total noob question...</p>\n\n<p>By the way, the backend is working perfectly... it's just the jquery stuff that I am utterly confused about.</p>\n"},{"tags":["python","django","urllib2","urllib"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13107091,"title":"urllib2.urlopen dashes and dot urlerror","body":"<p>I am having url open problem with python urllib2 </p>\n\n<p>f = urllib2.urlopen(url)</p>\n\n<p>url = <a href=\"http://merchantcircle.com/business/Buffas.Restaurant.and.Lounge.504-949-0038\" rel=\"nofollow\">http://merchantcircle.com/business/Buffas.Restaurant.and.Lounge.504-949-0038</a></p>\n\n<p>and getting this url error - dashes after . dots becoming problem i suppose</p>\n\n<p>Unexpected error: class 'urllib2.URLError'</p>\n\n<p>how can i fix this url in order it to be opened with urlopen</p>\n\n<p>Thanks</p>\n"},{"tags":["django","django-forms","user-registration"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13106528,"title":"Frustrated by Django User matching query does not exist message","body":"<p>I'm trying to implement a user registration page in Django. Seems like a simple task, but I'm getting an error I just don't understand.  Here's my view:</p>\n\n<pre><code>def registration_page(request):\n  if request.method == 'POST':\n    form = RegistrationForm(request.POST)\n    if form.is_valid():\n      user = User.objects.create_user(\n        username = form.cleaned_data['username'],\n        password = form.cleaned_data['password1'],\n        email = form.cleaned_data['email1']\n      )\n      return HttpResponseRedirect('/register/success/')\n  else:\n    form = RegistrationForm()\n\n  variables = RequestContext(request, {\n    'form': form\n  })\n  return render_to_response('registration/registration_page.html', variables)\n</code></pre>\n\n<p>And here's my registration form:</p>\n\n<pre><code>class RegistrationForm(forms.Form):\n  username = forms.CharField(label = u'Username', max_length = 30, error_messages={'required': 'A username is required.'})\n  email1 = forms.EmailField(label = u'Email Address', error_messages={'required': 'An email address is required.'})\n  email2 = forms.EmailField(label = u'Email Address confirmation', error_messages={'required': 'A confirmed email address is required.'})\n  password1 = forms.CharField(label = u'Password', widget = forms.PasswordInput(), error_messages={'required': 'A password is required.'})\n  password2 = forms.CharField(label = u'Password confirmation', widget = forms.PasswordInput(), error_messages={'required': 'A confirmed password is required.'})\n\n  def clean_password2(self):\n    if 'password1' in self.cleaned_data:\n      password1 = self.cleaned_data['password1']\n      password2 = self.cleaned_data['password2']\n      if password1 == password2:\n        return password2\n    raise forms.ValidationError('Passwords must be identical. Remember, passwords are case-sensitive.')\n\n  def clean_email2(self):\n    if 'email1' in self.cleaned_data:\n      email1 = self.cleaned_data['email1']\n      email2 = self.cleaned_data['email2']\n      if email1 == email2:\n        if User.objects.get(email = email1):\n          raise forms.ValidationError(\"The email address '%s' is already associated with an account. This typically means you created an account in the past. Please use it.\" % email1)\n        else:\n          return email2\n    raise forms.ValidationError('Email addresses must be identical.')\n\n\n  def clean_username(self):\n    if 'username' in self.cleaned_data:\n      username = self.cleaned_data['username']\n      if not re.search(r'^\\w+$', username):\n        raise forms.ValidationError('Username can only contain letters, numbers, and the underscore characters.')\n      try:\n        User.objects.get(username = username)\n      except User.DoesNotExist:\n        return username\n    raise forms.ValidationError(\"Username '%s' is already taken.\" % username)\n</code></pre>\n\n<p>The problem pops up in the form.is_valid() and clean_username(). If I add a user that does or does not exist (it doesn't matter if the user exists or not, behavior is the same) and populate the form with data I know is valid, the code should simply return username from clean_username() and form.is_valid() should be True. Instead, I get an error page that looks like this:</p>\n\n<pre><code>DoesNotExist at /register/\nUser matching query does not exist.\nRequest Method: POST\nRequest URL:    http://127.0.0.1:8000/register/\nDjango Version: 1.4.1\nException Type: DoesNotExist\nException Value:    \nUser matching query does not exist.\nException Location: /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/models/query.py in get, line 366\nPython Executable:  /opt/local/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python\nPython Version: 2.7.2\nPython Path:    \n['/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/distribute-0.6.28-py2.7.egg',\n '/Library/Python/2.7/site-packages/bpython-0.10.1-py2.7.egg',\n '/Library/Python/2.7/site-packages/Pygments-1.5-py2.7.egg',\n '/Library/Python/2.7/site-packages/django_registration-0.8-py2.7.egg',\n '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',\n '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages',\n '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip',\n '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',\n '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',\n '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',\n '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',\n '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old',\n '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload',\n '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PIL',\n '/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info',\n '/Library/Python/2.7/site-packages']\nServer time:    Sun, 28 Oct 2012 00:51:58 -0400\n</code></pre>\n\n<p>It's got to be something small I'm missing, but I can't see it.</p>\n"},{"tags":["django","amazon-web-services","elastic-beanstalk"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":489,"score":1,"question_id":12183763,"title":"Deploying django project on AWS elastic beanstalk","body":"<p>I am following the tutorial for deploying a django project on AWS elastic beanstalk here:\n<a href=\"http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Python_django.html\" rel=\"nofollow\">http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Python_django.html</a></p>\n\n<p>My app works when I test locally but when I deploy, I'm getting a 404 error. Looking at the event logs, I see this message:</p>\n\n<p><code>Error running user's commands : An error occurred running '. /opt/python/ondeck/env &amp;&amp; PYTHONPATH=/opt/python/ondeck/app: django-admin.py syncdb --noinput' (rc: 127) /bin/sh: django-admin.py: command not found</code></p>\n\n<p>That leads me to believe that the tutorial is missing a part about installing django files on the server or at least configuring my project to recognize django-admin.py. I have django installed on my local machine so it works there.</p>\n\n<p>I know python support is brand new for elastic beanstalk but has anyone deployed django to it? </p>\n"},{"tags":["django","heroku"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13105852,"title":"Creating a new directory in Heroku","body":"<p>I'm very new to Heroku and I've just pushed my Django app into Heroku. Does anyone know how to create a 'log' directory under '/app'? Is /app the top directory of my app?</p>\n\n<p>Thanks</p>\n"},{"tags":["django","django-models","django-orm"],"answer_count":5,"favorite_count":21,"up_vote_count":26,"down_vote_count":0,"view_count":8627,"score":26,"question_id":971667,"title":"django orm, how to view (or log) the executed query?","body":"<p>Is there a way I can print the query the Django ORM is generating?</p>\n\n<p>Say I execute the following statement: Model.objects.filter(name='test')</p>\n\n<p>How do I get to see the generated SQL query?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["django","django-sites"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13065454,"title":"Grammatical cases in multi-site Django deployments","body":"<p>I am deploying a single Django project for managing a certain kind of an event. There are two deployments with a single database, the sites are in Slovak. They are for events called „Akadémia Trojstenu“ and „Klub Trojstenu“. The simple part is I can just use the <code>sites</code> framework, set the display name for each site accordingly and use that in my templates where I need to refer to the name of the event.</p>\n\n<p>This looks all right up until you realize the Slovak language uses grammatical cases. That means, in some places I need to write „Program Akadémie Trojstenu“ / „Program Klubu Trojstenu“ or „Staré Akadémie“ / „Staré Kluby“ for example.</p>\n\n<p>For example, consider the following piece of template code:</p>\n\n<pre><code>&lt;link rel=\"alternate\" type=\"application/atom+xml\" title=\"Novinky pre {{ site.name }}\" href=\"{% url \"news_feed\" %}\" /&gt;\n</code></pre>\n\n<p><code>site.name</code> contains „Akadémia Trojstenu“, but in this case I need it to output „Novinky pre Akadémiu Trojstenu“, i.e. the content of the variable in the fourth grammatical case.</p>\n\n<p>The only way forward I see at this moment is to special-case all such occurrences in the templates, look at the current site's domain and output the correct grammatical case of the name. This solution is obviously heavily anti-DRY, hideous and will eat small children.</p>\n\n<p>Does anyone have a better suggestion? Is there some kind of standard solution? I imagine there are lots of languages using grammar cases and there's certainly someone who encountered this problem before me.</p>\n"},{"tags":["python","django","django-models","urllib","django-imagefield"],"answer_count":4,"favorite_count":21,"up_vote_count":19,"down_vote_count":0,"view_count":8519,"score":19,"question_id":1393202,"title":"Django: add image in an ImageField from image url","body":"<p>please excuse me for my ugly english ;-)</p>\n\n<p>Imagine this very simple model :</p>\n\n<pre><code>class Photo(models.Model):\n    image = models.ImageField('Label', upload_to='path/')\n</code></pre>\n\n<p>I would like to create a Photo from an image URL (i.e., not by hand in the django admin site).</p>\n\n<p>I think that I need to do something like this :</p>\n\n<pre><code>from myapp.models import Photo\nimport urllib\n\nimg_url = 'http://www.site.com/image.jpg'\nimg = urllib.urlopen(img_url)\n# Here I need to retrieve the image (as the same way that if I put it in an input from admin site)\nphoto = Photo.objects.create(image=image)\n</code></pre>\n\n<p>I hope that I've well explained the problem, if not tell me.</p>\n\n<p>Thank you :)</p>\n\n<p>Edit :</p>\n\n<p>This may work but I don't know how to convert <code>content</code> to a django File :</p>\n\n<pre><code>from urlparse import urlparse\nimport urllib2\nfrom django.core.files import File\n\nphoto = Photo()\nimg_url = 'http://i.ytimg.com/vi/GPpN5YUNDeI/default.jpg'\nname = urlparse(img_url).path.split('/')[-1]\ncontent = urllib2.urlopen(img_url).read()\n\n# problem: content must be an instance of File\nphoto.image.save(name, content, save=True)\n</code></pre>\n"},{"tags":["django","database-design","django-models","phpmyadmin"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":12970805,"title":"How can we synchronise Database from Local to Web Server through Phpmyadmin database","body":"<p>I have a project working on my local system . Which is a django(1.4.1) Python project using Phpmyadmin as database . As per completetion of modules i updated into server . Is there any way to sync database from Local to Server through Phpmyadmin database . </p>\n"},{"tags":["django","ubuntu"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":929,"score":1,"question_id":4699824,"title":"django on ubuntu","body":"<p>I have done everything said on the following page.</p>\n\n<pre><code>https://help.ubuntu.com/community/Django\n</code></pre>\n\n<p>but it gives me an error page.</p>\n\n<blockquote>\n  <p>MOD_PYTHON ERROR</p>\n  \n  <p>ProcessId:      2220 Interpreter:<br>\n  'localhost.localdomain'</p>\n  \n  <p>ServerName:<br>\n  'localhost.localdomain' DocumentRoot: \n  '/etc/apache2/htdocs'</p>\n  \n  <p>URI:            '/' Location:<br>\n  '/' Directory:      None Filename:<br>\n  '/etc/apache2/htdocs' PathInfo:<br>\n  '/'</p>\n  \n  <p>Phase:          'PythonHandler'\n  Handler:<br>\n  'django.core.handlers.modpython'</p>\n  \n  <p>Traceback (most recent call last):</p>\n  \n  <p>File\n  \"/usr/lib/python2.6/dist-packages/mod_python/importer.py\",\n  line 1537, in HandlerDispatch\n      default=default_handler, arg=req, silent=hlist.silent)</p>\n  \n  <p>File\n  \"/usr/lib/python2.6/dist-packages/mod_python/importer.py\",\n  line 1229, in _process_target\n      result = _execute_target(config, req, object, arg)</p>\n  \n  <p>File\n  \"/usr/lib/python2.6/dist-packages/mod_python/importer.py\",\n  line 1128, in _execute_target\n      result = object(arg)</p>\n  \n  <p>File\n  \"/usr/lib/pymodules/python2.6/django/core/handlers/modpython.py\",\n  line 228, in handler\n      return ModPythonHandler()(req)</p>\n  \n  <p>File\n  \"/usr/lib/pymodules/python2.6/django/core/handlers/modpython.py\",\n  line 191, in <strong>call</strong>\n      self.load_middleware()</p>\n  \n  <p>File\n  \"/usr/lib/pymodules/python2.6/django/core/handlers/base.py\",\n  line 33, in load_middleware\n      for middleware_path in settings.MIDDLEWARE_CLASSES:</p>\n  \n  <p>File\n  \"/usr/lib/pymodules/python2.6/django/utils/functional.py\",\n  line 276, in <strong>getattr</strong>\n      self._setup()</p>\n  \n  <p>File\n  \"/usr/lib/pymodules/python2.6/django/conf/<strong>init</strong>.py\",\n  line 40, in _setup\n      self._wrapped = Settings(settings_module)</p>\n  \n  <p>File\n  \"/usr/lib/pymodules/python2.6/django/conf/<strong>init</strong>.py\",\n  line 75, in <strong>init</strong>\n      raise ImportError(\"Could not import settings '%s' (Is it on\n  sys.path? Does it have syntax\n  errors?): %s\" % (self.SETTINGS_MODULE,\n  e))</p>\n  \n  <p>ImportError: Could not import settings\n  'examples.settings' (Is it on sys.path? Does it have syntax errors?): No module named examples.settings</p>\n</blockquote>\n\n<p>what could be wrong?</p>\n\n<p>complete noob here.</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13097988,"title":"django.contrib.auth.model.py missing BaseUserManager, AbstractBaseUser","body":"<p>I'm trying to make a custom user model as described in the django docs. It says to extend AbstractBaseUser and BaseUserManager to get started. However these are not defined in the auth model. I see it in the github respository, but not in my version. However, I have 1.4.2, which is the latest version. Why would these classes be missing from what I have?</p>\n\n<p>I've tried to copy the files from github, but now I'm not sure where the django files are being taken from. After replacing the auth files, I got the same error (ImportError: cannot import name BaseUserManager). Even when I delete the auth directory, I get the same error. Is there any way to determine exactly which django files are being pulled?</p>\n"},{"tags":["django","postgresql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13099226,"title":"In postgres, how could I replace all tables of a database, except one, with data from another db?","body":"<p>I have a Django app, the database for which is under active manual development (it's a language-learning app, so it stores vocabulary, grammatical concepts, etc). I'd prefer to do that development in my local django/postgres environment.</p>\n\n<p>However, I don't want to be constantly wiping out the User table from the live version!</p>\n\n<p>I'm very new to postgres, so please don't assume I know what I'm doing here - would some kind of schema be the right approach here? </p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":2457,"score":2,"question_id":1366146,"title":"Django session expiry?","body":"<p>From django's documentation, I became under the impression that calling:</p>\n\n<pre><code>request.session.set_expiry(300)\n</code></pre>\n\n<p>from one view would cause the session to expire after five minutes <em>inactivity</em>; however, this is not the behavior that I'm experiencing in django trunk. If I call this method from one view, and browse around to other views that don't call the method, the session expires in five minutes. The behavior that I was expecting was a expire only after five minutes of inactivity and not simply failing to call set_expiry again before the expiry.</p>\n\n<p>My question then is do I really need to call set_expiry in every view? If so, does there exist some decorator that may be of assistance? I can't imagine this isn't part of contrib. </p>\n\n<p>Thanks,\nPete</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":13105222,"title":"Debugging slow Django Admin views","body":"<p>Some of my views in Django Admin take too long to load up.\nWhat is the best way to debug a Django Admin view to see what is chewing up cycles?</p>\n"},{"tags":["django","heroku"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13104771,"title":"Images disappear in Django app when deployed to Heroku","body":"<p>l have deployed my app to Heroku but some images are no longer being loaded.</p>\n\n<p>For example, people's profile pics are not showing up, but if that person re-uploads one it will be visible. However, when they log out/in again, the picture is no longer there.</p>\n\n<p>What would cause this type of behavior and how can I fix it? Locally everything works fine.</p>\n"},{"tags":["python","css","django","django-admin"],"answer_count":14,"favorite_count":2,"up_vote_count":10,"down_vote_count":0,"view_count":4497,"score":10,"question_id":5537268,"title":"Django Admin Page missing CSS","body":"<p>I saw this <a href=\"http://stackoverflow.com/questions/3271731/djangos-admin-pages-are-missing-their-typical-formatting-style-have-i-set-it-up\">question</a> and recommendation from Django Projects <a href=\"http://docs.djangoproject.com/en/dev/howto/deployment/modpython/?from=olddocs#id3\">here</a> but still can't get this to work. My Django Admin pages are not displaying the CSS at all.</p>\n\n<p><img src=\"http://i.stack.imgur.com/F9EXp.png\" alt=\"enter image description here\"></p>\n\n<p>This is my current configuration. </p>\n\n<p><strong>settings.py</strong></p>\n\n<pre><code>ADMIN_MEDIA_PREFIX = '/media/admin/'\n</code></pre>\n\n<p><strong>httpd.conf</strong></p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n    DocumentRoot /home/django/sgel\n    ServerName ec2-***-**-***-***.ap-**********-1.compute.amazonaws.com\n    ErrorLog /home/django/sgel/logs/apache_error.log\n    CustomLog /home/django/sgel/logs/apache_access.log combined\n    WSGIScriptAlias / /home/django/sgel/apache/django.wsgi\n\n    &lt;Directory /home/django/sgel/media&gt;\n        Order deny,allow\n        Allow from all\n    &lt;/Directory&gt;\n\n    &lt;Directory /home/django/sgel/apache&gt;\n        Order deny,allow\n        Allow from all\n    &lt;/Directory&gt;\n\n    LogLevel warn\n\n    Alias /media/ /home/django/sgel/media/\n\n&lt;/VirtualHost&gt;\n\n&lt;VirtualHost *:80&gt;\n   ServerName sgel.com\n   Redirect permanent / http://www.sgel.com/\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>In addition, I also ran the following to create (I think) the symbolic link\n<code>ln -s /home/djangotest/sgel/media/admin/ /usr/lib/python2.6/site-packages/django/contrib/admin/media/</code></p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>In my httpd.conf file, </p>\n\n<pre><code>User django\nGroup django\n</code></pre>\n\n<p>When I run ls -l in my <code>/media</code> directory</p>\n\n<pre><code>drwxr-xr-x 2 root root 4096 Apr  4 11:03 admin\n-rw-r--r-- 1 root root    9 Apr  8 09:02 test.txt\n</code></pre>\n\n<p>Should that root user be django instead?</p>\n\n<p><strong>UPDATE 2</strong>\nWhen I enter <code>ls -la</code> in my <code>/media/admin</code> folder</p>\n\n<pre><code>total 12\ndrwxr-xr-x 2 root root 4096 Apr 13 03:33 .\ndrwxr-xr-x 3 root root 4096 Apr  8 09:02 ..\nlrwxrwxrwx 1 root root   60 Apr 13 03:33 media -&gt; /usr/lib/python2.6/site-packages/django/contrib/admin/media/\n</code></pre>\n\n<p>The thing is, when I navigate to <code>/usr/lib/python2.6/site-packages/django/contrib/admin/media/</code>, the folder was empty. So I copied the CSS, IMG and JS folders from my Django installation into <code>/usr/lib/python2.6/site-packages/django/contrib/admin/media/</code> and it still didn't work</p>\n"},{"tags":["django","django-admin","media","modeladmin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":210,"score":0,"question_id":5724084,"title":"Differentiate ModelAdmin media for add/change pages in Django","body":"<p>To encapsulate customized functionalities in Django admin I'm providing a custom <a href=\"http://docs.djangoproject.com/en/1.3/ref/contrib/admin/#django.contrib.admin.ModelAdmin\" rel=\"nofollow\">ModelAdmin class</a> that actually looks like this:</p>\n\n<pre><code>class ArticleAdmin(admin.ModelAdmin):\n    class Media:\n        js = (\"my_code.js\",)\n</code></pre>\n\n<p>I noted that <code>my_code.js</code> gets loaded both in add and change pages, but I need to load it only in the add page. Is it possible to do this (and how)?</p>\n\n<p>Thanks.</p>\n"},{"tags":["django","web-services","perl","web-applications"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":70,"score":3,"question_id":13101283,"title":"Does Perl have something similar to the Django automatic administrator interface?","body":"<p>I was wondering if there's a glue module to link the likes of DBIx::Class, Mojo et al. together and automatically generate forms, schema etc.</p>\n"},{"tags":["django","slug","django-forms"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1655,"score":2,"question_id":1388425,"title":"django auto slug in model forms like prepopulated-fields in django admin","body":"<p>is there a way to get the same results of using pre-populated fields in django's admin site for slug fields in a standard modelform</p>\n"},{"tags":["python","django","view","model"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13103810,"title":"How to fix an AttributeError in django?","body":"<p>I am trying to return the list of playlists that are associated with the current logged in user and I get an error saying:\nAttributeError: 'QuerySet' object has no attribute 'has_header</p>\n\n<p>I have included what I believe are the relevant parts of the code below.  Any advice on how to fix this?</p>\n\n<h1>views.py</h1>\n\n<pre><code>playlist = UserPlaylist.objects.filter(profile=request.user)\nreturn playlist\n</code></pre>\n\n<h1>models.py</h1>\n\n<pre><code>class UserProfile(models.Model):\n    user = models.OneToOneField(User)\n    def __unicode__(self):\n        return self.user\n\ndef create_user_profile(sender, instance, created, **kwargs):\n    if created:\n        UserProfile.objects.create(user=instance)\n\npost_save.connect(create_user_profile, sender=User)         \n\nclass Playlist(models.Model):\n    playlist = models.CharField('Playlist', max_length = 2000, null=True, blank=True)\n    def __unicode__(self):\n        return self.playlist\n\nclass Video(models.Model):\n    video_url = models.URLField('Link to video', max_length = 200, null=True, blank=True)\n    def __unicode__(self):\n        return self.video_url\n\nclass UserPlaylist(models.Model):\n    profile = models.ForeignKey(User)\n    playlist = models.ForeignKey(Playlist)\n    def __unicode__(self):\n        return unicode(self.playlist)\n\nclass Videoplaylist(models.Model):\n    video = models.ForeignKey(Video)\n    playlist = models.ForeignKey(UserPlaylist)\n    def __unicode__(self):\n        return unicode(self.playlist)\n</code></pre>\n"},{"tags":["python","django","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13103075,"title":"Execute a function in several views in Django","body":"<p>So I'm still a newbie in Django and I would like to have your advices regarding this point :</p>\n\n<p>I have a User system in my application which extend from userena:</p>\n\n<pre><code>class FindUrGeekUserProfile(UserenaBaseProfile):\nuser         = models.OneToOneField( User, unique = True, verbose_name    ='userData', related_name='myProfile',db_index = True)\ntype         = models.CharField(max_length = 2, choices = USER_TYPE, blank = True, null = True, db_index = True)\n\ndef __unicode__(self):\n    return 'Name: ' + self.user.username + ' Type: ' + self.type\n</code></pre>\n\n<p>When a User registers in my website he completes login, password and email fields. </p>\n\n<p>The first time a user will connect though my website, he will see a page asking him what's his usertype : Type1 or Type2...</p>\n\n<p>I want to verify in each login_registered view that the user has defined his type. Until now, i created a function I use in every registered view:</p>\n\n<pre><code>def checkUserType(user):\n    if(user.type != None)\n        return True\n    else:\n        retur False\n\n@login_registered\ndef myView(request):\n    if (checkUserType(request.user)):\n        Continue....\n    else:\n        return redirect('setUserType')  # Page where the user will set his type\n</code></pre>\n\n<p>Is there a better way to that in Django? Using some built in function ? </p>\n\n<p>Thanky ou for your help</p>\n"},{"tags":["python","django","neo4j"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":38,"score":3,"question_id":13092066,"title":"Neo4django Relationship properties","body":"<p>So I've trying to model a small user-group relationship in Neo4j with Django. I am currently employing the Neo4django python package seen <a href=\"https://github.com/scholrly/neo4django\" rel=\"nofollow\">here</a>. Now, I have nodes representing my users, and nodes representing my groups, and relationships that link them indicating membership. What I'm hoping to also do in the near future is add properties to this relationship such as date_joined. I looked around but there isn't too much documentation on how to achieve this. I'm sure there is a way of doing it, just haven't seen any examples around.</p>\n\n<p>Below is the declaration for my model.py if necessary, I think it's pretty straight forward.</p>\n\n<pre><code>class User(models.NodeModel):\n    friends = models.Relationship('User', rel_type=Outgoing.FRIEND, related_single=False, related_name='friends')\n    groups = models.Relationship('Group', rel_type=Outgoing.USER_GROUPS, related_single=False, related_name='groups')\n    user_name = models.StringProperty(max_length=30, indexed=True)\n    password = models.StringProperty(max_length=128)\n\nclass Group(models.NodeModel):\n    users = models.Relationship('User', rel_type=Outgoing.MEMBER, related_single=False, related_name='members')\n    group_type = models.Relationship('GroupType', rel_type=Outgoing.GROUP_TYPE, related_single=True, related_name='group_type')\n    group_name = models.StringProperty(max_length=128, indexed=True)\n    date_creation = models.DateProperty()\n</code></pre>\n\n<p>Thanks for any pointers!</p>\n"},{"tags":["django","google-app-engine","gql"],"answer_count":4,"favorite_count":3,"up_vote_count":0,"down_vote_count":0,"view_count":2894,"score":0,"question_id":1513526,"title":"App Engine GQL: querying a date range","body":"<p>What would be the App Engine equivalent of this Django statement?</p>\n\n<pre><code>return Post.objects.get(created_at__year=bits[0], \n\t\t\t\t\t\t\tcreated_at__month=bits[1], \n\t\t\t\t\t\t\tcreated_at__day=bits[2],\n\t\t\t\t\t\t\tslug__iexact=bits[3])\n</code></pre>\n\n<p>I've ended up writing this:</p>\n\n<pre><code>Post.gql('WHERE created_at &gt; DATE(:1, :2, :3) AND created_at &lt; DATE(:1, :2, :4) and slug = :5',\n    int(bit[0]), int(bit[1]), int(bit[2]), int(bit[2]) + 1, bit[3])\n</code></pre>\n\n<p>But it's pretty horrific compared to Django. Any other more Pythonic/Django-magic way, e.g. with <code>Post.filter()</code> or <code>created_at.day/month/year</code> attributes?</p>\n"},{"tags":["django","geodjango","geos"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13102052,"title":"GeoDjango: Exceptions for basic geographic queries","body":"<p>I am having problems with geographic queries with GeoDjango running on SpatiaLite on my development environment. </p>\n\n<pre><code>from django.contrib.gis.db import models\n\nclass Test(models.Model):\n    poly = models.PolygonField()\n    point = models.PointField()\n    geom = models.GeometryField()\n    objects = models.GeoManager()\n</code></pre>\n\n<p>Testing via shell:</p>\n\n<pre><code>&gt;&gt;&gt; from geotest.models import Test\n&gt;&gt;&gt; from django.contrib.gis.geos import GEOSGeometry\n&gt;&gt;&gt; \n&gt;&gt;&gt; point = GEOSGeometry(\"POINT(0 0)\")\n&gt;&gt;&gt; point\n&lt;Point object at 0x105743490&gt;\n&gt;&gt;&gt; poly = GEOSGeometry(\"POLYGON((0 0, 0 1, 1 1, 1 0, 0 0))\")\n&gt;&gt;&gt; poly\n&lt;Polygon object at 0x105743370&gt;\n&gt;&gt;&gt; \n</code></pre>\n\n<p>With these definitions, lets try some basic geographic queries. First <code>contains</code>:</p>\n\n<pre><code>&gt;&gt;&gt; Test.objects.filter(point__within=poly)\nAssertion failed: (0), function appendGeometryTaggedText, file WKTWriter.cpp, line 228.\nAbort trap\n</code></pre>\n\n<p>And the django shell dies. And with <code>within</code>:</p>\n\n<pre><code>&gt;&gt;&gt; Test.objects.filter(poly__contains=point)\nGEOS_ERROR: Geometry must be a Point or LineString\nTraceback (most recent call last):\n...\nGEOSException: Error encountered checking Coordinate Sequence returned from GEOS C function \"GEOSGeom_getCoordSeq_r\".\n&gt;&gt;&gt; \n</code></pre>\n\n<p>Other combinations also cause a variety of exceptions. I must be missing something obvious as these are very basic. Any ideas?</p>\n"},{"tags":["python","django","pep8"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":97,"score":2,"question_id":13100163,"title":"Is there a better way to format this Python/Django code as valid PEP8?","body":"<p>I have code written both ways and I see flaws in both of them. Is there another way to write this or is one approach more \"correct\" than the other?</p>\n\n<pre><code>def functionOne(subscriber):\n    try:\n        results = MyModelObject.objects.filter(\n            project__id=1,\n            status=MyModelObject.STATUS.accepted,\n            subscriber=subscriber).values_list(\n                'project_id',\n                flat=True).order_by('-created_on')\n    except:\n        pass\n</code></pre>\n\n\n\n<pre><code>def functionOne(subscriber):\n    try:\n        results = MyModelObject.objects.filter(\n            project__id=1,\n            status=MyModelObject.STATUS.accepted,\n            subscriber=subscriber)\n        results = results.values_list('project_id', flat=True)\n        results = results.order_by('-created_on')\n    except:\n        pass\n</code></pre>\n\n<p>This is valid code, this isn't correct code, I ripped a similar chunk of code to give an example of the objects.filter section. Please don't waste time commenting on the other parts of the code. I put the try/except in there to force an indent to push certain elements on new lines(80 columns)</p>\n"},{"tags":["django","point","geodjango"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12829178,"title":"GeoDjango PointField input","body":"<p>It can be a stupid question, but I haven't find out the answer. \nI implemented GeoDjango and a PointField, so in the admin page I tried to create a new object, but it always tells me that the coordinates are incorrect, on the page there is a field like a textfield, but I don't know which format is right for coordinates.</p>\n\n<p>I have to set this field hidden to insert coordinates from google maps, but if I don't know the format... it cuold be difficult.</p>\n\n<p>Thnks to all.</p>\n"},{"tags":["django","django-models","django-templates","django-views"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":981,"score":0,"question_id":4827846,"title":"integrating chat App in django","body":"<p>Which is the easiest chat APP that can be integrated to Django</p>\n"},{"tags":["django","api","rest","tastypie"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":169,"score":0,"question_id":11471366,"title":"Tastypie error while updating - field has was given data that was not a URI, not a dictionary-alike and does not have a 'pk' attribute","body":"<p>I keep getting this error when i try to update my resource.</p>\n\n<p>The resource I am trying to update is called Message.\nIt has a foreign key to account:</p>\n\n<pre><code>class AccountResource(ModelResource):\n    class Meta:\n        queryset = Account.objects.filter()\n        resource_name = 'account'\n        '''\n        set to put because for some weird reason I can't edit \n        the other resources with patch if put is not allowed.\n        '''\n        allowed_methods = ['put']\n        fields = ['id']\n\n\n    def dehydrate(self, bundle):\n        bundle.data['firstname'] = bundle.obj.account.first_name   \n        bundle.data['lastname'] = bundle.obj.account.last_name\n        return bundle\n</code></pre>\n\n<p><code>\n</code></p>\n\n<pre><code>class MessageResource(ModelResource):\n    account = fields.ForeignKey(AccountResource, 'account', full=True)\n\n    class Meta:\n        queryset = AccountMessage.objects.filter(isActive=True)\n        resource_name = 'message'\n        allowed = ['get', 'put', 'patch', 'post']\n        authentication = MessageAuthentication()\n        authorization = MessageAuthorization()   \n        filtering = {\n                     'account' : ALL_WITH_RELATIONS\n                     }\n</code></pre>\n\n<p>Now when i try to update my Message using a PATCH, I get this error:</p>\n\n<p><strong>Data passed in</strong>: <code>{\"text\":\"blah!\"}</code></p>\n\n<p><code>The 'account' field has was given data that was not a URI, not a dictionary-alike and does not have a 'pk' attribute: &lt;Bundle for obj: '&lt;2&gt; [nikunj]' and with data: '{'lastname': u'', 'id': u'2', 'firstname': u'', 'resource_uri': '/api/v1/account/2/'}'&gt;.</code></p>\n\n<p><strong>Bad Solution:</strong>:</p>\n\n<p>Pass in the data: <code>{\"text\":\"blah!\", \"account\":{\"pk\":2}}</code>\nI dont want to pass in the account. I just want to edit the text and nothing else. Why is there a need to pass in the account too?</p>\n\n<p>I tried to use:    </p>\n\n<pre><code>def obj_update(self, bundle, request=None, **kwargs):\n        return super(ChartResource, self).obj_update(bundle, request, account=Account.objects.get(account=request.user))\n</code></pre>\n\n<p><em>BUT it doesnt work!!</em> \n<strong>HELP!</strong></p>\n"},{"tags":["django"],"answer_count":3,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":671,"score":1,"question_id":3360155,"title":"Accessing and sharing data between multiple sites in django from different databases","body":"<p>Currently I am having three sites for example let it be site1, site2 and site3 . Each site require authentication. Both site1 and site2 take the same database let it be \"Portfolio\" database and site3 is having a different database let it be \"site3specific\" database.</p>\n\n<p>I am planning to have a Common Account database for keeping the login credentials of users for the all different sites available. So that each sites (i.e. site1, site2 and site3) will make use of the Common Account database for authenticating the user login. I am planning to keep the user details in a separate database since all the three sites in development, testing and live environment can share the same user credentials without redundancy. Also each site may have its own specific data that we may be having or entering differently in development, staging and live environments.</p>\n\n<p>Also there is a possibility of sharing some data between sites.</p>\n\n<p>Could anyone please tell me how can I achieve these task in django + Apache + mod_wsgi.</p>\n\n<p>Please advice whether I need to have a globally shared settings file , model file and urls file. IF then how my globally shared settings files need to be modified . Please advice.</p>\n"},{"tags":["python","regex","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13101853,"title":"Select POST/GET parameters with regular expression","body":"<p>How can I select a list of POST/GET parameters with an Regular Expression? For Example something like:</p>\n\n<pre><code>request.POST.regex(/^inputs_/)\n</code></pre>\n"},{"tags":["django","django-queryset","django-haystack","haystack"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":285,"score":0,"question_id":8717308,"title":"How to remove items from a Haystack SearchQuerySet","body":"<p>In Django you can remove items from a QuerySet by doing this as documented <a href=\"https://docs.djangoproject.com/en/dev/topics/db/queries/\" rel=\"nofollow\">here</a>:</p>\n\n<pre><code>queryset = QuerySet.remove(item)\n</code></pre>\n\n<p>Haystack <a href=\"http://docs.haystacksearch.org/dev/searchqueryset_api.html\" rel=\"nofollow\">SearchQuerySet</a> is build on QuerySet but it appears that the remove method was not implemented. Does anyone know of a way to remove items in a SearchQuerySet?</p>\n\n<p>FWIW I am trying to do a second level of filtering for a client.  Basically I'm interating over the SearchQuerySet for a couple specific properties.  The idea is if they don't have it I want to remove them.</p>\n\n<p>Thanks</p>\n"},{"tags":["python","django"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":10215164,"title":"How do I get each distinct 'year' value out of a Django model with a datetime field?","body":"<p>I can successfully filter by a given year in my Django model, but I'm having trouble finding a way to list valid years so a user can access them.</p>\n\n<p>I have a django model with a defined 'datetime' field, oh-so-originally named 'date'.  In my templates, I can successfully access the 'bar.date.date.year' field, so I know it exists, but when I try the following function...</p>\n\n<pre><code>blog_years=[]\nfor entry in blog_entries:\n    if entry.date.date.year not in blog_years:\n        blog_years.append(entry.date.date.year)\n</code></pre>\n\n<p>I'm told that \"'builtin_function_or_method' object has no attribute 'year'\"</p>\n\n<p>I can only assume I\"m tripping over some aspect of Python I'm not familiar with, but I can't figure out what it is.  I'm quite certain it has to be syntactical, but past that...</p>\n"},{"tags":["django","django-south"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13101250,"title":"django south: Custom confirmation in migration","body":"<p>Is it possible to configure a migration to ask the user for confirmation before continuing (e.g. based on data that will be lost if the migration runs)?</p>\n"},{"tags":["django","orm"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13070173,"title":"Refreshing a model's unmanaged related model in Django","body":"<p>I have a model (lets call it Entity) that has an attribute (Attribute) that changes over time, but I want to keep a history of how that attribute changes in the database.  I need to be able to filter my Entities by the current value of Attribute in its manager.  But because Django (as far as I can tell) won't let me do this in one query natively, I have created a database view that produces the latest value of Attribute for every Entity.  So my model structure looks something like this:</p>\n\n<pre><code>class Entity(models.Model):\n    def set_attribute(self, value):\n        self.attribute_history.create(value=value)\n\n    def is_attribute_positive(self, value):\n        return self.attribute.value &gt; 0\n\nclass AttributeEntry(models.Model):\n    entity = models.ForeignKey(Entity, related_name='attribute_history')\n    value = models.IntegerField()\n    time = models.DateTimeField(auto_now_add=True)\n\nclass AttributeView(models.Model)\n    id = models.IntegerField(primary_key=True, db_column='id', \n        on_delete=models.DO_NOTHING)\n    entity = models.OneToOneField(Entity, related_name='attribute')\n    value = models.IntegerField()\n    time = models.DateTimeField()\n\n    class Meta:\n        managed = False\n</code></pre>\n\n<p>My database has the view that produces the current attribute, created with SQL like this:</p>\n\n<pre><code>CREATE VIEW myapp_attributeview AS\nSELECT h1.*\nFROM myapp_attributehistory h1\nLEFT OUTER JOIN myapp_attributehistory h2\n    ON h1.entity_id = h2.entity_id\n        AND (h1.time &lt; h2.time\n        OR h1.time = h2.time\n        AND h1.id &lt; h2.id)\nWHERE h2.id IS NULL;\n</code></pre>\n\n<p>My problem is that if I set the attribute on a model object using <code>set_attribute()</code> checking it with <code>is_attribute_positive()</code> doesn't always work, because Django may be caching that the related AttributeView object.  How I can I make Django update its model, at the very least by requerying the view?  Can I mark the <code>attribute</code> property as dirty somehow?</p>\n\n<p>PS: the whole reason I'm doing this is so I can do things like <code>Entity.objects.filter(attribute__value__exact=...).filter(...)</code>, so if someone knows an easier way to get that functionality, such an answer will be accepted, too!</p>\n"},{"tags":["django","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13100495,"title":"Django inlineformset_factory doesn't delete records","body":"<p>Here is my code:</p>\n\n<pre><code>PartFormSet = inlineformset_factory(ReservationPaper, ReservationPaperPart,\n                                    ReservationPaperPartEditForm, extra=0)\nif request.method == \"POST\":\n    try:\n        part_formset = PartFormSet(data=request.POST, instance=rp)\n    except:\n        return HttpResponseRedirect(request.path_info)\n    rp_form = ReservationPaperForm(instance=rp, data=request.POST)\n\n    if part_formset.is_valid() and rp_form.is_valid():\n        rp_form.save()\n        for part_form in part_formset.forms:\n            part_form.save()\n        return HttpResponseRedirect(reverse(\"internal:documents:display_reservation_paper\",\n                                        args=[rp.id]))\nelse:\n    rp_form = ReservationPaperForm(instance=rp)\n    part_formset = PartFormSet(instance=rp)\n</code></pre>\n\n<p>It renders delete checkboxes for each part_formset instance, however, when I submit the forms entries are only edited, not deleted.</p>\n"},{"tags":["django","model"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13101109,"title":"Django file user folder model","body":"<p>I would like to know how to create django relation model for user, folder, file</p>\n\n<p>An user can have multiple files and folders.</p>\n\n<p>A folder can have a lot of files but cant have folder int folder</p>\n\n<pre><code>class User_t(models.Model):\n    username = models.CharField(max_length=30)\n    user_id = models.CharField(max_length=30)\n    pcw = models.CharField(max_length=30)\n    name = models.CharField(max_length=30)\n    surname = models.CharField(max_length=30)\n    mail = models.EmailField(max_length=50)\n    validateMail =  models.BooleanField()\n    birthday = models.DateTimeField(max_length=60)\n    premium = models.BooleanField()\n    premiumEnd = models.DateTimeField(max_length=10)\n    totalUpload = models.CharField(max_length=15)\n    avatar = models.URLField()\n\nclass FileItem(models.Model):\n    file_id = models.CharField(max_length=30)\n    file_name = models.CharField(max_length=75)\n    date_upload = models.DateTimeField(max_length=10)\n    data_size = models.CharField(max_length=75)\n    key = models.CharField(max_length=75)\n    # Django will automatically create owner_id field\n    owner = models.ForeignKey(User_t, related_name='files')\n    folder = models.ForeignKey('FolderItem', related_name='files')\n    # not sure what this (login_accept) is for...\n    # login_accept = models.ManyToManyField(User_t)\n    file_i = models.FileField(/mnt/test/)\n\nclass FolderItem(models.Model):\n    folder_id = models.CharField(max_length=30)\n    folder_name = models.CharField(max_length=75)\n    data_size = models.CharField(max_length=75)\n    key = models.CharField(max_length=75)\n    owner = models.ForeignKey(User_t, related_name='folders')\n    # again, not sure what this is for\n    # login_accept = models.ManyToManyField(User_t)\n</code></pre>\n\n<p>login_accept is a list of users who can access (have right by the owner) to read (dowload) the file.</p>\n\n<p>I don't know if my way is correct?</p>\n\n<p>Thanks</p>\n"},{"tags":["python","django","templates","if-statement"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1107,"score":4,"question_id":3259279,"title":"django templates","body":"<p>How can I distinguish between <code>None</code> and <code>False</code> in django templates?</p>\n\n<pre><code>{% if x %}\nTrue \n{% else %}\nNone and False - how can I split this case?\n{% endif %}\n</code></pre>\n"},{"tags":["python","django","eclipse","pydev"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":12861863,"title":"Cannot run as \"PyDev: Django\" in Eclipse","body":"<p>When creating a new Django project in Eclipse I can run the server by running the project as \"PyDev: Django\" like in the following screenshot:</p>\n\n<p><img src=\"http://i.stack.imgur.com/dUKdg.jpg\" alt=\"Run As --&gt; PyDev: Django\"></p>\n\n<p>I've recently forked a Django project from <a href=\"http://github.com\" rel=\"nofollow\">GitHub</a>, added it to Eclipse and set it as a Django project. The problem is that I don't have the option to run the project as \"PyDev: Django\" when trying to do so in Eclipse:</p>\n\n<p><img src=\"http://i.stack.imgur.com/Zpb7Z.jpg\" alt=\"Run As --&gt; Run Configurations\"></p>\n\n<p>How can I fix this?</p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":34,"score":-1,"question_id":13100023,"title":"Dynamically add to the model's Meta class?","body":"<p>Normally, you specify a table name for your model by putting in the model class:</p>\n\n<pre><code>class MyModel(models.Model):\n    class Meta:\n        db_table = 'desired_tablename'\n</code></pre>\n\n<p>I want to add the table names for all my models dynamically at the end of models.py.\nCan this be done in Django? If yes, how?</p>\n"},{"tags":["python","django","gethostbyaddr"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13093951,"title":"Django get client's domain name/host name","body":"<p>What is the easiest way to obtain the user's host/domain name, if available?\nOr is there a function to lookup the IP address of the user to see if it is bound to a named address? (i.e. gethostbyaddr() in PHP)</p>\n\n<p>HttpRequest.get_host() only returns the IP address of the user.</p>\n"},{"tags":["django","django-models","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13099111,"title":"How to create ModelForm for separate datbases?","body":"<p>I have two databases:</p>\n\n<pre><code>DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql', \n        'NAME': 'data_base_1',                  \n        'USER': 'root',                       \n        'PASSWORD': 'password',               \n        'HOST': '',                           \n        'PORT': '',                  \n    },\n    'another_database': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': 'data_base_2',               \n        'USER': 'root',                  \n        'PASSWORD': 'password',           \n        'HOST': '',                       \n        'PORT': '',                       \n    },\n}\n</code></pre>\n\n<p>How should I create ModelForms for 'default' models and for 'another_database' models? </p>\n\n<p>Thanks.</p>\n"},{"tags":["django","url","django-views","django-urls"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13099869,"title":"how to understand previous url","body":"<p>Is there a way to understand the previous url in django view? I mean how can become aware from which url(page in my site) user is coming to this url? i've found doing this in template, but i want to know it in views.</p>\n\n<pre><code>def func(request):\n   if request.is_ajax():\n      //if the last url was the url of this page, do s.th\n      //else do s.th else\n</code></pre>\n\n<p>thank you</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":20,"score":2,"question_id":13097977,"title":"Upgrading hosting plan for an existing Django app on shared hosting","body":"<p>So I'm currently running the OSQA (Django) app on my site, and it currently uses shared hosting on DreamHost. How would I go about transferring my site to a..lets say..dedicated server? Would I have to install everything all over (Python, django etc)?</p>\n\n<p>Thanks</p>\n"}]}
{"total":41213,"page":10,"pagesize":100,"questions":[{"tags":["python","django"],"answer_count":5,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":696,"score":1,"question_id":11185185,"title":"Django - ImportError at /blog. No module named urls","body":"<p>I'm new to django and in the process of learning. While doing some tutorial exercises I ran into some errors which I need help with.</p>\n\n<p>Error: ImportError at /blog. No module named urls</p>\n\n<p>The urls.py file under the app named 'blog' is</p>\n\n<pre><code>from django.conf.urls.defaults import patterns, include, url\nfrom mysite.blog.views import archive\n\nurlpatterns = patterns('',\n    url(r'^$',archive),\n                       )\n</code></pre>\n\n<p>The views.py file under the app named 'blog' is</p>\n\n<pre><code># Create your views here.\nfrom django.template import loader, Context\nfrom django.http import HttpResponse\nfrom mysite.blog.models import Blogpost\n\ndef archive(request):\n    posts = BlogPost.objects.all()\n    t = loader.get_template(\"archive.html\")\n    c = context({'posts': posts })\n    return HttpResponse(t.render(c))\n</code></pre>\n\n<p>The urls.py file under the project 'mysite' is</p>\n\n<pre><code>from django.conf.urls import patterns, include, url\n\n# Uncomment the next two lines to enable the admin:\nfrom django.contrib import admin\nadmin.autodiscover()\n\nurlpatterns = patterns('',\n# Examples:\n# url(r'^$', 'mysite.views.home', name='home'),\nurl(r'^blog/', include('mysite.blog.urls')),\n\n# Uncomment the admin/doc line below to enable admin documentation:\nurl(r'^admin/doc/', include('django.contrib.admindocs.urls')),\n\n# Uncomment the next line to enable the admin:\nurl(r'^admin/', include(admin.site.urls)),\n)\n</code></pre>\n\n<p>Traceback:</p>\n\n<pre><code>File \"D:\\Super Developer\\Python\\lib\\site-packages\\django\\core\\handlers\\base.py\" in get_response\n  89.                     response = middleware_method(request)\nFile \"D:\\Super Developer\\Python\\lib\\site-packages\\django\\middleware\\common.py\" in process_request\n  67.             if (not urlresolvers.is_valid_path(request.path_info, urlconf) and\nFile \"D:\\Super Developer\\Python\\lib\\site-packages\\django\\core\\urlresolvers.py\" in is_valid_path\n  531.         resolve(path, urlconf)\nFile \"D:\\Super Developer\\Python\\lib\\site-packages\\django\\core\\urlresolvers.py\" in resolve\n  420.     return get_resolver(urlconf).resolve(path)\nFile \"D:\\Super Developer\\Python\\lib\\site-packages\\django\\core\\urlresolvers.py\" in resolve\n  298.             for pattern in self.url_patterns:\nFile \"D:\\Super Developer\\Python\\lib\\site-packages\\django\\core\\urlresolvers.py\" in url_patterns\n  328.         patterns = getattr(self.urlconf_module, \"urlpatterns\", self.urlconf_module)\nFile \"D:\\Super Developer\\Python\\lib\\site-packages\\django\\core\\urlresolvers.py\" in urlconf_module\n  323.             self._urlconf_module = import_module(self.urlconf_name)\nFile \"D:\\Super Developer\\Python\\lib\\site-packages\\django\\utils\\importlib.py\" in import_module\n  35.     __import__(name)\n\nException Type: ImportError at /blog\nException Value: No module named urls\n</code></pre>\n\n<p><strong>Structure of Project/App:</strong></p>\n\n<ol>\n<li>mysite\n<ul>\n<li>manage.py</li>\n<li><em>init</em>.py</li>\n<li>settings.py</li>\n<li>urls.py</li>\n<li>wsgi.py</li>\n<li>blog\n<ul>\n<li><em>init</em>.py</li>\n<li>models.py</li>\n<li>views.py</li>\n<li>urls.py</li>\n<li>tests.py</li>\n<li>Templates - archive.html</li>\n</ul></li>\n</ul></li>\n</ol>\n\n<p><strong>Python path</strong></p>\n\n<p>['D:\\Super Developer\\Proj\\mysite', 'C:\\Windows\\system32\\python27.zip', 'D:\\Super Developer\\Python\\DLLs', 'D:\\Super Developer\\Python\\lib', 'D:\\Super Developer\\Python\\lib\\plat-win', 'D:\\Super Developer\\Python\\lib\\lib-tk', 'D:\\Super Developer\\Python', 'D:\\Super Developer\\Python\\lib\\site-packages']</p>\n"},{"tags":["django","sorting","pagination"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":508,"score":0,"question_id":6653638,"title":"Django pagination overhead with sorting","body":"<p>I try to implement pagination structure in Django with some sort options however, I can't figure out how can I do that properly.</p>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>def search(request):\n    eList = Employer.objects.filter(eminence__lt=4).order_by('-eminence')\n\n    paginator = Paginator(eList, 3) # Show 25 contacts per page\n\n    page = request.GET.get('page')\n    try:\n        employerList = paginator.page(page)\n    except PageNotAnInteger:\n        employerList = paginator.page(1)\n    except EmptyPage:\n        employerList = paginator.page(paginator.num_pages)\n\nreturn render_response(request, 'employer/search.html', {'employerList':employerList})\n</code></pre>\n\n<p><strong>search.html</strong></p>\n\n<pre><code>&lt;div class=\"pagination\"&gt;\n                    &lt;span class=\"step-links\"&gt;\n                        {% if employerList.has_previous %}\n                        &lt;a href=\"?page={{ employerList.previous_page_number }}\"&gt;previous&lt;/a&gt;\n                        {% endif %}\n\n                        &lt;span class=\"current\"&gt; Page {{ employerList.number }} of {{ employerList.paginator.num_pages }}.&lt;/span&gt;\n                        {% if employerList.has_next %}\n                        &lt;a href=\"?page={{ employerList.next_page_number }}\"&gt;next&lt;/a&gt;\n                        {% endif %}\n                    &lt;/span&gt;\n                &lt;/div&gt;\n</code></pre>\n\n<p>This example works great however as you can see, for every navigation I need to get all <code>Employer</code> objects. After that <code>Paginator</code> handles the objects in query depending on page number. However, I think the pagination should be done during query and only get X objects that I want depending on page number. I can modify, of course, the code in that manner but I can't  figure out why people use <code>Paginator</code> although there is such overhead. I may overlook a detail...</p>\n\n<p>My second question is how can I apply sort my list ? Should I modify my <code>url</code> and passing a sort method and page number, and depending on them get the quesy by sort method and give it to <code>Paginator</code> ?</p>\n\n<p>This seems reasonable and fine by me but I just wonder is there any better approach to do in django.</p>\n\n<p>Thanks</p>\n"},{"tags":["jquery","python","django","http-status-code-500","django-cms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13099075,"title":"django-cms showing 500 internal server error while deleting plugin from admin","body":"<p>i have recently started working with django cms . I have successfully added a plugin on the admin side , but while deleting it from the admin interface it is showing internal server error on chrome console </p>\n\n<p>django version 1.3.2</p>\n\n<p>django cms version 2.2</p>\n\n<pre><code>POST https://localhost:8000/admin/cms/page/56/remove-plugin/ 500 (INTERNAL SERVER ERROR) jquery.min.js:130\nc.extend.ajaxjquery.min.js:130\nc.extend.postjquery.min.js:122\nplugin_delete_click_handlerplugin_editor.js:139\nc.event.handlejquery.min.js:55\nc.event.add.j.handle.ojquery.min.js:49\n</code></pre>\n\n<p>Any idea how this happen? i have downgraded djang-mptt to 0.4.2 .still the same persisit</p>\n\n<p>Regards</p>\n\n<p>Renjith</p>\n"},{"tags":["jquery","django","twitter-bootstrap","multi-upload"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13098664,"title":"request.Files returns empty list","body":"<p>Try to upload multiples files using JQuery plugin in my django app (use bootstrap)- <a href=\"https://github.com/blueimp/jQuery-File-Upload\" rel=\"nofollow\">https://github.com/blueimp/jQuery-File-Upload</a></p>\n\n<p>But I am facing a problem, in views.py the method called on \"upload button\". I receive the empty list of Files.</p>\n\n<p>My code in views.py:-</p>\n\n<pre><code>def multiuploader(request):\n    if request.method == 'POST':\n        print 'received POST to main multiuploader view'\n        if request.FILES == None:\n            return HttpResponseBadRequest('Must have files attached!')\n        print 'files'\n        print request.FILES\n</code></pre>\n\n<p>In the console I get: </p>\n\n<pre><code>received POST to main multiuploader view \nfiles \n&lt;MultiValueDict: {}&gt;\n</code></pre>\n\n<p>html file:-</p>\n\n<pre><code>&lt;div id=\"fileupload\"&gt;\n&lt;form action=\"{% url multi %}\" method=\"POST\" enctype=\"multipart/form-data\"&gt;\n  {% csrf_token %}\n    &lt;div class=\"fileupload-buttonbar\"&gt;\n        &lt;label class=\"fileinput-button\"&gt;\n            &lt;span&gt;Add files...&lt;/span&gt;\n            &lt;input type=\"file\" name=\"files[]\" multiple&gt;\n        &lt;/label&gt;\n        &lt;button type=\"submit\" class=\"start\"&gt;Start upload&lt;/button&gt;\n        &lt;button type=\"reset\" class=\"cancel\"&gt;Cancel upload&lt;/button&gt;\n    &lt;/div&gt;\n&lt;/form&gt;\n&lt;div class=\"fileupload-content\"&gt;\n    &lt;table class=\"files\"&gt;&lt;/table&gt;\n    &lt;div class=\"fileupload-progressbar\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>Any Idea how to solve this problem ??\nThanks alot in advnace</p>\n"},{"tags":["django","django-lfs"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13097990,"title":"Is there a module for dotpay payment or payu in Django LFS?","body":"<p>Is there a module for dotpay payment or payu in Lightning Fast Shop?</p>\n"},{"tags":["django","nginx","debian","uwsgi"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":4494,"score":3,"question_id":8507027,"title":"uWSGI + nginx for django project, error with strting uwsgi","body":"<p>I try to up webserver for django on nginx+uwsgi, os - debian (3.1.0-1-amd64 x86_64)\nnginx 1.1.8-1, uwsgi 0.9.8.3-1\nconfiguration:</p>\n\n<pre><code>&lt;uwsgi&gt;\n&lt;socket&gt;/tmp/uwsgi.sock&lt;/socket&gt;\n&lt;process&gt;1&lt;/process&gt;\n&lt;master/&gt;\n&lt;enable-threads/&gt;\n&lt;uid&gt;33&lt;/uid&gt;\n&lt;gid&gt;33&lt;/gid&gt;\n&lt;pidfile&gt;/tmp/uwsgi.pid&lt;/pidfile&gt;\n&lt;/uwsgi&gt;\n</code></pre>\n\n<p>in file /etc/uwsgi/apps-enabled/webapp.xml\nnginx configuration</p>\n\n<pre><code>location / {\n        uwsgi_pass unix:///tmp/uwsgi.sock;\n        include uwsgi_params;\n        uwsgi_param UWSGI_SCRIPT webapp;\n        uwsgi_param UWSGI_CHDIR  /data/web/webapp/webapp;\n    }\n</code></pre>\n\n<p>all projet in /data/web/webapp/webapp/, here setting.py, urls ect.\nin /data/web/webapp/webapp/webapp.py </p>\n\n<pre><code>import sys, os\nimport django.core.handlers.wsgi\nsys.path.insert(0, '/data/web/webapp/webapp')\nos.environ['DJANGO_SETTINGS_MODULE'] = 'settings'\napplication = django.core.handlers.wsgi.WSGIHandler()\n</code></pre>\n\n<p>uid and gid 33 it is www-data user\ntry run uwsgi as</p>\n\n<blockquote>\n  <p>root#uwsgi -s /var/run/uwsgi.sock -x\n  /etc/uwsgi/apps-enabled/webapp.xml</p>\n</blockquote>\n\n<pre><code>[uWSGI] parsing config file /etc/uwsgi/apps-enabled/webapp.xml\n*** Starting uWSGI 0.9.8.3-debian (64bit) on [Wed Dec 14 21:42:02 2011] ***\ncompiled with version: 4.6.1 on 27 July 2011 18:25:51\nwriting pidfile to /tmp/uwsgi.pid\nuWSGI running as root, you can use --uid/--gid/--chroot options\nsetgid() to 33\nsetuid() to 33\nyour memory page size is 4096 bytes\nunlink(): Permission denied [socket.c line 38]\nbind(): Address already in use [socket.c line 70]\n</code></pre>\n\n<p>how permission they want? and what's the problem..\nif i run uwsgi as root error is gone, and i see </p>\n\n<pre><code> *** WARNING: you are running uWSGI as root !!! (use the --uid flag) *** \nyour memory page size is 4096 bytes\nuwsgi socket 0 bound to UNIX address /var/run/uwsgi.sock fd 3\nuwsgi socket 1 bound to UNIX address /tmp/uwsgi.sock fd 4\nyour server socket listen backlog is limited to 100 connections\n*** Operational MODE: single process ***\n*** no app loaded. going in full dynamic mode ***\n*** uWSGI is running in multiple interpreter mode ***\nspawned uWSGI master process (pid: 20732)\nspawned uWSGI worker 1 (pid: 20733, cores: 1)\n</code></pre>\n\n<p>but when i try to access the server, ngix returns 502 error page. And more: permission error in nginx logs:</p>\n\n<pre><code> 2011/12/14 21:57:17 [crit] 20739#0: *1 connect() to unix:///tmp/uwsgi.sock failed (13: Permission denied) while connecting to upstream, client: 10.10.3.111, server: ******, request: \"GET /favicon.ico HTTP/1.1\", upstream: \"uwsgi://unix:///tmp/uwsgi.sock:\", host: \"****.****.**\"\n</code></pre>\n\n<p>if change owner of /tmp/uwsgi.sock to nginix user in runtime (www-data), he wrote other logs</p>\n\n<pre><code>[error] 20739#0: *21 upstream prematurely closed connection while reading response header from upstream,\n</code></pre>\n\n<p>but still error 502 (</p>\n\n<p>how solving this problem? some one can help me..\nreally want to use nginx+uwsgi instead of apache.\nthanks</p>\n\n<hr>\n\n<p>however, solution is near :)\nI use tcp socket now and more, change uwsgi configuration and installed a few more packages.\nwas an important option --autoload.\nnow uwsgi has configuration like this:</p>\n\n<pre><code>&lt;uwsgi&gt;\n&lt;module&gt;webapp&lt;/module&gt;\n&lt;socket&gt;127.0.0.1:5080&lt;/socket&gt;\n&lt;pythonpath&gt;/data/web/webapp/webapp&lt;/pythonpath&gt;\n&lt;autoload/&gt;\n&lt;daemonize&gt;/var/log/uwsgi_webapp.log&lt;/daemonize&gt;\n&lt;processes&gt;1&lt;/processes&gt;\n&lt;uid&gt;33&lt;/uid&gt;\n&lt;gid&gt;33&lt;/gid&gt;\n&lt;enable-threads/&gt;\n&lt;master/&gt;\n&lt;harakiri&gt;120&lt;/harakiri&gt;\n&lt;max-requests&gt;5000&lt;/max-requests&gt;\n&lt;/uwsgi&gt;\n</code></pre>\n\n<p>remains to solve other problem..\nuwsgi use not main system python version >_&lt;</p>\n\n<pre><code>option \"pythonpath\" found in plugin python26_plugin.so\n*** Starting uWSGI 0.9.8.3-debian (64bit) on [Thu Dec 15 22:52:23 2011] ***\ncompiled with version: 4.6.1 on 27 July 2011 18:25:51\nuWSGI running as root, you can use --uid/--gid/--chroot options\nsetgid() to 33\nsetuid() to 33\nyour memory page size is 4096 bytes\n *** WARNING: you have enabled harakiri without post buffering. Slow upload could be rejected on post-unbuffered webservers *** \nuwsgi socket 0 bound to TCP address 127.0.0.1:5080 fd 4\nPython version: 2.6.7 (r267:88850, Aug  3 2011, 12:02:14)  [GCC 4.6.1]\nPython main interpreter initialized at 0xc47df0\nthreads support enabled\nyour server socket listen backlog is limited to 100 connections\n*** Operational MODE: single process ***\nadded /data/web/webapp/webapp/ to pythonpath.\nWSGI application 0 (SCRIPT_NAME=) ready on interpreter 0xc47df0 pid: 22983 (default app)\n*** uWSGI is running in multiple interpreter mode ***\nspawned uWSGI master process (pid: 22983)\nspawned uWSGI worker 1 (pid: 22984, cores: 1)\n</code></pre>\n\n<p>he use python 2.6.7 but main system version is 2.7.2 and all python modules installed for this, so a lot of errors in the log - repeated attempts to import non-existent, one of many typical error:</p>\n\n<pre><code>  File \"/usr/lib/python2.6/dist-packages/django/db/__init__.py\", line 78, in &lt;module&gt;\n    connection = connections[DEFAULT_DB_ALIAS]\n  File \"/usr/lib/python2.6/dist-packages/django/db/utils.py\", line 93, in __getitem__\n    backend = load_backend(db['ENGINE'])\n  File \"/usr/lib/python2.6/dist-packages/django/db/utils.py\", line 51, in load_backend\n    raise ImproperlyConfigured(error_msg)\ndjango.core.exceptions.ImproperlyConfigured: 'django_mongodb_engine' isn't an available database backend. \nTry using django.db.backends.XXX, where XXX is one of:\n    'dummy', 'mysql', 'oracle', 'postgresql', 'postgresql_psycopg2', 'sqlite3'\nError was: No module named django_mongodb_engine.base\n</code></pre>\n\n<p>so.. how set version of python for uwsgi?</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":4,"up_vote_count":10,"down_vote_count":0,"view_count":2734,"score":10,"question_id":4382032,"title":"Defining a model class in Django shell fails","body":"<p>when I use the Django shell, it shows an error; this is the error:</p>\n\n<pre><code>&gt;&gt;&gt; from django.db import models\n&gt;&gt;&gt; class Poll(models.Model):\n...     question = models.CharField(max_length=200)\n...     pub_date = models.DateTimeField('date published')\n...\nTraceback (most recent call last):\n  File \"&lt;console&gt;\", line 1, in &lt;module&gt;\n  File \"D:\\Python25\\lib\\site-packages\\django\\db\\models\\base.py\", line 51, in __new__\n    kwargs = {\"app_label\": model_module.__name__.split('.')[-2]}\nIndexError: list index out of range\n</code></pre>\n\n<p>What can I do?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":13096855,"title":"use the lazyobject in python or django","body":"<p>Looking in <code>django.utils.functional</code> I noticed a <code>LazyObject</code> class, django uses it in <code>django.conf</code>:</p>\n\n<pre><code>class LazySettings(LazyObject):\n</code></pre>\n\n<p>it is the defination of <code>LazyObject</code>:</p>\n\n<pre><code>class LazyObject(object):\n    \"\"\"\n    A wrapper for another class that can be used to delay instantiation of the\n    wrapped class.\n\n    By subclassing, you have the opportunity to intercept and alter the\n    instantiation. If you don't need to do that, use SimpleLazyObject.\n    \"\"\"\n    def __init__(self):\n        self._wrapped = None\n\n    def __getattr__(self, name):\n        if self._wrapped is None:\n            self._setup()\n        return getattr(self._wrapped, name)\n\n    def __setattr__(self, name, value):\n        if name == \"_wrapped\":\n            # Assign to __dict__ to avoid infinite __setattr__ loops.\n            self.__dict__[\"_wrapped\"] = value\n        else:\n            if self._wrapped is None:\n                self._setup()\n            setattr(self._wrapped, name, value)\n\n    def __delattr__(self, name):\n        if name == \"_wrapped\":\n            raise TypeError(\"can't delete _wrapped.\")\n        if self._wrapped is None:\n            self._setup()\n        delattr(self._wrapped, name)\n\n    def _setup(self):\n        \"\"\"\n        Must be implemented by subclasses to initialise the wrapped object.\n        \"\"\"\n        raise NotImplementedError\n\n    # introspection support:\n    __members__ = property(lambda self: self.__dir__())\n\n    def __dir__(self):\n        if self._wrapped is None:\n            self._setup()\n        return  dir(self._wrapped)\n</code></pre>\n\n<p>i want to know what is the best situation to use the <code>LazyObject</code>?</p>\n"},{"tags":["django","django-admin"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":35,"score":3,"question_id":13089168,"title":"Django: How to dynamic filter foreignkey choices by Customizing the Django_Admin","body":"<p>I have three models: LineType, Service, DomainName, Record, they have m2m or foreignkey relation between each other. here is the code:</p>\n\n<pre><code>class LineType(models.Model):\n    linename = models.CharField(max_length=30,primary_key=True)\n\n    def __unicode__(self):\n        return self.linename\n\nclass Service(models.Model):\n    servicename = models.CharField(max_length=30,primary_key=True)\n    price = models.DecimalField(max_digits=8, decimal_places=2)\n    line = models.ManyToManyField(LineType)\n\n    def __unicode__(self):\n        return self.servicename\n\nclass DomainName(models.Model):\n    domainname = models.CharField(max_length=30,primary_key=True)\n    user = models.ForeignKey(SiteProfile)\n    service = models.ForeignKey(Service)\n\n    def __str__(self):\n        return self.domainname\n\nclass Record(models.Model):\n    TYPE_CHOICES = (\n                ('A','A'),\n                ('CNAME','CNAME'),\n                ('MX','MX'),\n               )\n    domainname = models.ForeignKey(DomainName)   \n\n    def get_line(self):\n        domain = DomainName.objects.get(pk=self.domainname_id)\n        service = Service.objects.get(pk=domain.service_id)\n        lines = service.line.all()\n        choices = []\n        for x in lines:\n           choices.append((x.linename,x.linename))\n        return choices\n\n    host = models.CharField(max_length=30)\n    type = models.CharField(max_length=5,choices=TYPE_CHOICES,default='A')\n    line = models.ForeignKey(LineType)\n    destaddress = models.CharField(max_length=30)\n</code></pre>\n\n<p>Let me introduce the model. Each DomainName could only have one Service which other DomainNames can have. Each DomainName have multi Records. Service define LineTypes which can be applied to the Record.</p>\n\n<p>I use Django admin to manage these models, but the choice of the \"line\" in Record are all the LineType object.So the question is how to filter the LineType of Record according to the \"service\" of it's parent(DomainName).</p>\n"},{"tags":["django","file","model","user","folder"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13095132,"title":"django file folder model","body":"<p>I would like to know how to create django relation model for user, folder, file</p>\n\n<p>An user can have multiple files and folders.</p>\n\n<p>A folder can have a lot of files but cant have folder int folder.</p>\n\n<p>I tried something like that( I started learning django one day ago).</p>\n\n<p>I read some docs about ForeignKey and ManytoMany relation from djangobook but i'm not sure if I understand all of it.</p>\n\n<h2>User model</h2>\n\n<pre><code>class User_t(models.Model):\n    username = models.CharField(max_length=30)\n    user_id = models.CharField(max_length=30)\n    pcw = models.CharField(max_length=30)\n    name = models.CharField(max_length=30)\n    surname = models.CharField(max_length=30)\n    mail = models.EmailField(max_length=50)\n    validateMail =  models.BooleanField()\n    birthday = models.DateTimeField(max_length=60)\n    premium = models.BooleanField()\n    premiumEnd = models.DateTimeField(max_length=10)\n    totalUpload = models.CharField(max_length=15)\n    avatar = models.URLField()\n</code></pre>\n\n<h2>File model</h2>\n\n<pre><code>class FileItem(models.Model):\n    file_id = models.CharField(max_length=30)\n    file_name = models.CharField(max_length=75)\n    date_upload = models.DateTimeField(max_length=10)\n    data_size = models.CharField(max_length=75)\n    key = models.CharField(max_length=75)\n    owner_id = models.OneToManyField(User_t)\n    login_accept = models.ManyToManyField(User_t)\n    file_i = models.FileField(/mnt/test/)\n</code></pre>\n\n<h2>Folder model</h2>\n\n<pre><code>class FolderItem(models.Model):\n    folder_id = models.CharField(max_length=30)\n    folder_name = models.CharField(max_length=75)\n    data_size = models.CharField(max_length=75)\n    key = models.CharField(max_length=75)\n    owner_id = models.ForeignKey(User_t)\n    login_accept = models.ManyToManyField(User_t)\n    files = models.ForeignKey(FileItem)\n</code></pre>\n"},{"tags":["jquery","python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":169,"score":0,"question_id":11087293,"title":"Django DateTimeField to a day hour minute second","body":"<p>I'm using <a href=\"http://keith-wood.name/countdown.html\" rel=\"nofollow\">http://keith-wood.name/countdown.html</a>. Each 'Event' table in my database has a 'date' column. <code>date = models.DateTimeField()</code>\nThe datetimefield( <code>{{ event.date }}</code>) will return '<code>Aug. 15, 2012, 12:23 p.m.</code>'. \nThe default plugin format is 'dHMS'. </p>\n\n<p>How do I get my django date to properly display within this jquery plugin? Or better yet. How do I turn my datetimefield into a:</p>\n\n<pre><code> {{ countdown_day }},\n {{ countdown_hour }},\n {{ countdown_min }},\n {{ countdown_sec }} ?\n</code></pre>\n\n<p><strong>SCRIPT:</strong></p>\n\n<pre><code>(function(){\n     var eventDate = '{{ event.date }}'; \n     $('#defaultCountdown').countdown({until: eventDate});      \n     $('#removeCountdown').toggle(function() { \n         $(this).text('Re-attach'); \n         $('#defaultCountdown').countdown('destroy'); \n     }, \n    function() { \n        $(this).text('Remove'); \n        $('#defaultCountdown').countdown({until: eventDate}); \n    });\n})();\n</code></pre>\n"},{"tags":["python","database","django","postgresql","orm"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":13092268,"title":"How do you join two tables on a foreign key field using django ORM?","body":"<p>Let's assume I have the following models:</p>\n\n<pre><code>class Position(models.Model):\n    name = models.CharField()\n\nclass PositionStats(models.Model):\n    position = models.ForeignKey(Position)\n    averageYards = models.CharField()\n    averageCatches = models.CharField()\n\nclass PlayerStats(models.Model):\n    player = models.ForeignKey(Player)\n    averageYards = models.CharField()\n    averageCatches = models.CharField()\n\nclass Player(models.Model):\n    name = models.CharField()\n    position = models.ForeignKey(Position)\n</code></pre>\n\n<p>I want to perform the equivalent SQL query using django's ORM:</p>\n\n<pre><code>SELECT *\n\nFROM PlayerStats\n\nJOIN Player ON player\n\nJOIN PositionStats ON PositionStats.position = Player.position\n</code></pre>\n\n<p>How would I do that with django's ORM? The query isn't exactly correct, but the idea is that I want a single query, using django's ORM, that gives me <code>PlayerStats</code> joined with <code>PositionStats</code> based on the player's position.</p>\n"},{"tags":["python","django","match","django-urls","reverse"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13095999,"title":"NoReverseMatch named urls Django","body":"<p>Any ideas why this returns a <code>NoReverseMatch</code> error? From a fork of <a href=\"https://github.com/dcramer/django-ratings\" rel=\"nofollow\">djano-ratings</a> called <a href=\"https://github.com/weluse/django-updown\" rel=\"nofollow\">updown</a>.</p>\n\n<p>urls.py:</p>\n\n<pre><code>url(r'^(?P&lt;object_id&gt;\\d+)/rate/(?P&lt;score&gt;[\\d\\-]+)/$', AddRatingFromModel(), {\n    'app_label': 'appname',\n    'model': 'Thing',\n    'field_name': 'rating',\n}, name='thing_rating'),\n</code></pre>\n\n<p>The template:</p>\n\n<pre><code>&lt;div id='vote'&gt;&lt;a href='{% url thing_rating %}'&gt;Up&lt;/a&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Thanks for any ideas!</p>\n\n<hr>\n\n<p>EDIT: added view for clarity</p>\n\n<pre><code>def index(request):\n    thing_list = Thing.objects.all()\n    return render_to_response('index.html',\n                         {'thing_list':thing_list},\n                         context_instance=RequestContext(request))\n</code></pre>\n"},{"tags":["django","templates","comparison"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13092899,"title":"Django Template comparison inside a loop","body":"<p>I need compare the values of a Model with the result of an aggregate in  my template.\nlike a :</p>\n\n<pre><code>{% for valor in valores %}\n    {{ valor.quantidade }}\n{% endfor %}\nresults of my loop\n\n{{ total.total_quantidade }}\nthis is the result of my Aggregate\n</code></pre>\n\n<p>How i can make the comparison of this values?</p>\n\n<p>List of results of my <code>{% for valor ... %}</code></p>\n\n<pre><code>1000\n2000\n3000\n</code></pre>\n\n<p>result of my aggregate</p>\n\n<pre><code>1500\n</code></pre>\n\n<p><code>{% if total.quantidade_total &gt;= valor.quantidade %}</code> shows the equivalent value ..and so on, if smaller shows another value</p>\n\n<p>how can i proceed?</p>\n"},{"tags":["python","django","web","internet"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13095548,"title":"django model add category to object","body":"<pre><code>class Venues(models.Model):\n        ..........\n        ..........\n        category=models.ForeignKey(Category)\n\n\nclass Category(models.Model):\n     club=models.CharField()\n     bar=models.CharField()\n     adult=models.CharField()\n</code></pre>\n\n<p>These are the models that I have. I am a django newbie so please pardon this rather simple question. I want every Venue object to have one category that is selected from the list of categories(i.e club,bar or adult). So each category--club,bar,adult--can have many Venues but like I said every Venue has one category.</p>\n\n<p>So am i at all close to what im trying to accomplish or is this totally wrong?? Please help. Thanks</p>\n"},{"tags":["django","django-models","django-admin"],"answer_count":2,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":1110,"score":6,"question_id":6034047,"title":"one-to-many inline select with django admin","body":"<p>I have a standard many-to-one relationship set up. There are a bunch of fields, but for our purposes here, the relevant model is:</p>\n\n<pre><code>class Class(models.Model):\n    name = models.CharField(max_length=128)\n\nclass Student(models.Model):\n    class = models.ForeignKey(Class)\n    name = models.CharField(max_length=128)\n    address = models.CharField(max_length=128)\n    # ...etc\n</code></pre>\n\n<p>I created an admin, and it works great. it even automatically has the ability for me to set the Class when I am editing a Student. However, when I go to create/edit a Class, all I get is an input box for the name.</p>\n\n<p>Is there a way to add a box/field where Students can be added as members of Class from the Class admin page? I can make a form inline, but that is to create new Students. I already have all my Students created and am just looking for a quick method to add multiple existing Students to different Class'.</p>\n"},{"tags":["django","forms","view","multiple","one-to-one"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13095414,"title":"Django: Multiple forms based on related OneToOne objects","body":"<p>I have two models:</p>\n\n<pre><code>class Question (models.Model):\n    question = models.CharField(max_length=100)\n    hobby = models.ForeignKey(Hobby)\n\n    def __unicode__(self):\n        return self.question\n\nclass Answer (models.Model):\n    answer = models.CharField(max_length=1000)\n    attach_file = models.FileField(upload_to='Attachments', blank=True)\n    question = models.OneToOneField(Question)\n\n    def __unicode__(self):\n        return self.answer\n</code></pre>\n\n<p>I am trying to build a page (similar to Django Admin site views) listing Question objects with Answer form. So as in:</p>\n\n<p>Question 1 -- Answer 1: [text box], [optional attachment]</p>\n\n<p>Question 2 -- Answer 2: [text box], [optional attachment] </p>\n\n<p>*\n*\n*</p>\n\n<p>Question n -- Answer n: [text box], [optional attachment]</p>\n\n<p>I was first thinking if I could get it working with formset and query like:</p>\n\n<pre><code>query=Answer.objects.filter(\"all answer objects that are related to all question objects related to \"hobby1\")\n</code></pre>\n\n<p>but haven't been able to figure it out yet.</p>\n"},{"tags":["django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13094773,"title":"Unable to Create Projects in Django 1.4.2","body":"<p>So I am new to Django and I am going through the tutorials. I tried </p>\n\n<pre><code>django-admin.py startproject mysite\n</code></pre>\n\n<p>and </p>\n\n<pre><code>python django-admin.py startproject mysite\n</code></pre>\n\n<p>but only a notepad popped up with the following:</p>\n\n<pre><code>#!C:\\Python27\\python.exe\nfrom django.core import management\n\nif __name__ == \"__main__\":\n    management.execute_from_command_line()\n</code></pre>\n\n<p>And still I cannot create the \"mysite\" directory. I already added the <code>C:\\Python27\\Lib\\site-packages\\django\\bin</code> to my Path but no avail. What seems to be the problem? I am using Django 1.4.2, Python 2.7, and Windows Vista. </p>\n"},{"tags":["python","django","python-3.x","virtualenv","pip"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13094709,"title":"running a django webapp in python 3","body":"<p>I am using python 3.3 in a virtualenv in a macosx machine, when I installed django 1.5 alpha release after untarring django 1.5 and running following command</p>\n\n<pre><code>pip install -e Django-1.5a1\n</code></pre>\n\n<p>it looks like django is installed, when I run \n    pip freeze </p>\n\n<p>following is the output</p>\n\n<pre><code>Django==1.5a1 \nPygments==1.5\nSouth==0.7.6\nbpython==0.11\ndistribute==0.6.28\ndjango-debug-toolbar==0.9.4\ndjango-extensions==1.0.0\nipython==0.13.1\nlogilab-astng==0.24.1\nlogilab-common==0.58.1\npylint==0.26.0\n</code></pre>\n\n<p>clearly django is installed however import django doesn't seem to be working when I run the following </p>\n\n<pre><code>import django \n</code></pre>\n\n<p>in python shell inside virtualenv, the output is </p>\n\n<pre><code>No module named import django\n</code></pre>\n\n<p>what can be the problem with this setup</p>\n"},{"tags":["django","django-formwizard"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13020449,"title":"Restarting FormWizard from done method","body":"<p>I'm trying use the FormWizard for to submit an order \"charge\" in wizard <code>done</code> method. Extending the example in the documentation, performing the credit card \"charge\" in the <code>done</code> means you can't go back and reprompt for credit card, because the wizard performs <code>self.storage.reset()</code> <em>after</em> calling the <code>done</code> method.</p>\n\n<p>What is the right approach? The confirmation form <code>clean()</code> step is called multiple times for revalidation, etc, &amp; seems too removed from <code>done()</code> where all validated forms are available.</p>\n\n<p>Thanks for any pointers.</p>\n\n<p>Kent</p>\n"},{"tags":["python","django","html5","django-widget"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":23,"score":2,"question_id":13094320,"title":"How can I override the 'type' attribute of a ModelForm in Django?","body":"<p>Specifically, I would like to render date widget in a form but I would like it to 'be' HTML5 (so I can just forget about the javascript or whatever and trust Chrome, Opera and Safari to display the datepicker).</p>\n\n<p>No javascript solutions please, I have already found those on the web.</p>\n\n<p>Here is a snippet of my code, but it still puts the type attribute of the forms field <em>thedate</em> as a \"text\".</p>\n\n<pre><code>#models.py\n\nclass MyModel(models.Model):\n    user = models.ForeignKey(User)\n    thedate = models.DateField()\n\n#forms.py\n\nclass MyModelForm(ModelForm):\n    class Meta:\n        model = MyModel\n        widgets = {\n            'thedate': TextInput(attrs={'type': 'date'}),\n        }\n</code></pre>\n\n<p>Can anyone please shed a light?</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["django","vim","vimrc"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13087620,"title":"I do not want to see empty buffer after makeprg in VIM","body":"<p>Using VIM I want to execute current sql file and see results. I've tried the following (<code>./manage.py dbshell</code> is a Django wrapper over <code>psql</code>)</p>\n\n<pre><code>nmap &lt;silent&gt; &lt;Leader&gt;r :make&lt;CR&gt;\nautocmd FileType sql set makeprg=cat\\ %\\\\\\|./manage.py\\ dbshell\n</code></pre>\n\n<p>It works fine. But after <em>Press ENTER or type command to continue</em> VIM always shows me empty buffer (maybe it is error list). How to skip its opening?</p>\n\n<p>If I run the same in command mode it will be as I've expected (without annoying buffers)</p>\n\n<pre><code>:!cat %|./manage.py dbshell\n</code></pre>\n\n<p>My SQL script contains a single select statement. And the magic buffer looks like:\n<img src=\"http://i.stack.imgur.com/D8YFe.png\" alt=\"enter image description here\"></p>\n"},{"tags":["python","django","postgresql","deployment","heroku"],"answer_count":5,"favorite_count":4,"up_vote_count":5,"down_vote_count":0,"view_count":710,"score":5,"question_id":10596893,"title":"Deploying Django to Heroku (Psycopg2 Error)","body":"<p>So I'm following the getting started guide from heroku with django. However when I run this command:</p>\n\n<pre><code>heroku run python manage.py syncdb\n</code></pre>\n\n<p>I get this error</p>\n\n<pre><code>psycopg2.OperationalError: could not connect to server: Connection refused\nIs the server running on host \"localhost\" and accepting\nTCP/IP connections on port 5432?\n</code></pre>\n\n<p>I assumed this meant that the db wasn't set up yet... so I manually added the shared_db option as well:</p>\n\n<pre><code>heroku addons:add shared-database:5mb\n</code></pre>\n\n<p>But.. I still get the same error. What gives?</p>\n"},{"tags":["django","query","chain"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13087511,"title":"Django Q chained queries","body":"<p>I need a little help with a Django Q query im trying to string together, it looks right, but its not quite working. The query is</p>\n\n<pre><code>( Q(src__lte=4) &amp; Q(src__startswith='2') ) | \n( Q(src__gt=4) &amp; ~Q(src__istartswith='713') &amp; ~Q(src__istartswith='281') ) )\n</code></pre>\n\n<p>what im trying to accomplish would be \"select where src is less than 4 AND startsiwth 2 OR src is greater than 4 and DOES NOT start with 713 OR 281\"</p>\n\n<p>the result is showing src's that start with 713 and 281, what am i doing wrong here? thanks.</p>\n"},{"tags":["python","django","haystack","whoosh"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13094084,"title":"PicklingError with haystack and whoosh backend","body":"<p>When calling ./manage.py rebuild_index I always get this error</p>\n\n<pre><code>Can't pickle &lt;type 'function'&gt;: attribute lookup __builtin__.function failed\n</code></pre>\n\n<p>Traceback:</p>\n\n<pre><code>File \"/data/web/herbar.org/sub/nju/django/core/handlers/base.py\" in get_response\n  111.                         response = callback(request, *callback_args, **callback_kwargs)\nFile \"/data/web/herbar.org/sub/nju/herbar/misc/views.py\" in search_rebuild_index\n  56.   call_command('rebuild_index', interactive=False)\nFile \"/data/web/herbar.org/sub/nju/django/core/management/__init__.py\" in call_command\n  150.     return klass.execute(*args, **defaults)\nFile \"/data/web/herbar.org/sub/nju/django/core/management/base.py\" in execute\n  232.             output = self.handle(*args, **options)\nFile \"/data/web/herbar.org/sub/nju/haystack/management/commands/rebuild_index.py\" in handle\n  15.         call_command('clear_index', **options)\nFile \"/data/web/herbar.org/sub/nju/django/core/management/__init__.py\" in call_command\n  150.     return klass.execute(*args, **defaults)\nFile \"/data/web/herbar.org/sub/nju/django/core/management/base.py\" in execute\n  232.             output = self.handle(*args, **options)\nFile \"/data/web/herbar.org/sub/nju/haystack/management/commands/clear_index.pCan't pickle &lt;type 'function'&gt;: attribute lookup __builtin__.function failedy\" in handle\n  42.         sb.clear()\nFile \"/data/web/herbar.org/sub/nju/haystack/backends/whoosh_backend.py\" in clear\n  216.             self.setup()\nFile \"/data/web/herbar.org/sub/nju/haystack/backends/whoosh_backend.py\" in setup\n  120.                 self.index = self.storage.create_index(self.schema)\nFile \"/data/web/herbar.org/sub/nju/whoosh/filedb/filestore.py\" in create_index\n  73.         return create_index(self, schema, indexname)\nFile \"/data/web/herbar.org/sub/nju/whoosh/filedb/filestore.py\" in create_index\n  47.     TOC.create(storage, schema, indexname)\nFile \"/data/web/herbar.org/sub/nju/whoosh/filedb/fileindex.py\" in create\n  83.         toc.write(storage, indexname)\nFile \"/data/web/herbar.org/sub/nju/whoosh/filedb/fileindex.py\" in write\n  161.         stream.write_string(pickle.dumps(schema, -1))\n\nException Type: PicklingError at /search/rebuild_index\nException Value: Can't pickle &lt;type 'function'&gt;: attribute lookup __builtin__.function failed\n</code></pre>\n\n<p>and here is search_indexes.py</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from haystack import site, indexes\nfrom herbar.articles.models import Article\nfrom django.utils.html import escape\n\nclass ArticleIndex(indexes.SearchIndex):\n  text  = indexes.CharField(document=True)\n  title = indexes.CharField(model_attr='title')\n  intro = indexes.CharField(model_attr='intro')\n\n  def prepare_text(self, obj):\n    return \"%s %s %s %s\" % (\n      escape(obj.title), escape(obj.intro),\n      escape(obj.text),  escape(obj.author.username)\n    )\n\n  def index_queryset(self):\n    return Article.objects.all()\n\nsite.register(Article, ArticleIndex)\n</code></pre>\n\n<p>weird thing about this is that it only happens on production machine running apache2 + mod_python and on the development server everything works just fine.</p>\n"},{"tags":["python","django","django-models"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":193,"score":2,"question_id":8654680,"title":"Django Tutorial Part 1 'Poll' object doesn't change","body":"<p>I'm new to Django with its tutorial -part 1 : <a href=\"https://docs.djangoproject.com/en/dev/intro/tutorial01/\" rel=\"nofollow\">Write your first app</a>. when I want to see my Poll objects in python shell with this command <code>Poll.objects.all()</code>, I see <code>[&lt;Poll: Poll object&gt;]</code>, however I've changed my <code>models.py</code> and added  </p>\n\n<pre><code>class Poll(models.Model):   \n    def __unicode__(self):  \n        return self.question  \n\nclass Choice(models.Model):    \n    def __unicode__(self):       \n        return self.choice\n</code></pre>\n\n<p>but I should see this: </p>\n\n<pre><code>[&lt;Poll: What's up?&gt;]\n</code></pre>\n\n<p>What's the problem?   </p>\n"},{"tags":["django","django-views"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":371,"score":3,"question_id":9463173,"title":"Append Slash not working","body":"<p>I have this urlConf and its working fine while accessing with a trailing slash.:</p>\n\n<pre><code>urlpatterns = patterns('', url(r'^allvideo/$','my.views.allvideo'))\n</code></pre>\n\n<p>Even though </p>\n\n<pre><code>APPEND_SLASH=True\n</code></pre>\n\n<p>it gives me attribute error \"'str' object has no attribute 'resolve'\", when request is made with missing trailing slash</p>\n\n<p>Any idea?? </p>\n"},{"tags":["django","django-forms","django-users","django-permissions"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":92,"score":1,"question_id":13075514,"title":"Create post-forms such as craigslist on my Django powered website","body":"<p>I'm creating a marketplace website such as Craigslist. I'd like to make \"post-forms\" for users to post their own product information (by uploading photos, adding forms (name, price,condition,,etc.)) on my website' category-page.</p>\n\n<p>Now,  I think I can do these things by making use of \"Django Permission\", but is it correct? If so, how can I do that? Or if not,  there are other ways to allow users to do these things ?</p>\n\n<p>The short summary of my website is like below. Specifically,I'd like to know how to allow people to post their products on the category page.</p>\n\n<ol>\n<li><p>Register &amp; Login </p></li>\n<li><p>You would have several categories such as furniture, books, games,,, and then, click one of those categories. (I've created this category-page by using \"Django admin\")\n(eg.  )\n<a href=\"http://bakersfield.craigslist.org/\" rel=\"nofollow\">http://bakersfield.craigslist.org/</a></p></li>\n<li><p>Then, you can see what kinds of goods are sold on that category page. And then, At the top of website, you can find \"Post\" button to post our products on the top of my website.\nAnd after click it , you can find \"Posting title\" \"Price\" and \"upload photos\" and many other forms.\n(eg)\n<a href=\"https://post.craigslist.org/k/7v\" rel=\"nofollow\">https://post.craigslist.org/k/7v</a>...</p></li>\n</ol>\n\n<p>4.After filled those forms,then click \"submit\" button to post your products pages' link to category page.</p>\n\n<p>Craigslist is the best example for my website.</p>\n"},{"tags":["django","google-app-engine","gae-datastore","file-transfer","blobstore"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":353,"score":2,"question_id":5916143,"title":"Using Django's admin interface to upload large file to GAE","body":"<p>I've been trying to find a way to upload a large file to GAE's datastore using Django's admin interface, but haven't found an answer that specifically addresses this issue. I'm fairly new to Python/Django, so there might be an angle that I'm not looking at.</p>\n\n<p>I've been looking at the <a href=\"http://www.allbuttonspressed.com/projects/django-filetransfers\" rel=\"nofollow\">django-filetransfers</a> solution, but I'm not sure how to integrate that into the admin interface. Any suggestions would be great!</p>\n"},{"tags":["django","internationalization","urlpatterns"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":46,"score":3,"question_id":13088245,"title":"Django urlpatterns translated with ugettext lazy - if 404 how to check again if url matches for another language?","body":"<p>Reading stack overflow for a long time, first time I need to ask sth here.</p>\n\n<p>The app is bilingual. I defined urls in urlpatterns to be translated with ugettext_lazy. User chooses first language and urls work, if he changes lang to the second one, it works also well. </p>\n\n<p>But if user chooses first language and enters url in second lang, he gets 404, because there is no match, because urlpatterns are translated to first lang.</p>\n\n<p>How could I force Django to check again urlpatterns translated to the second language? I want to display a page if it exists, as if url would be entered in the first lang.</p>\n\n<p>I use LocaleMiddleware.</p>\n\n<p>I thought about setting cookie and redirect, but if not found, in user url will be displayed url translated to the second lang, not what user entered, which can be misleading.</p>\n\n<p>Any ideas?</p>\n\n<p>Regards, Mike</p>\n\n<p><strong>Edit:</strong> I don't use those i18n patterns.\nI've got sth like: </p>\n\n<p>url(_(r'^contact/'), include('contact.urls')), </p>\n\n<p>and would like Django to display appropriate view regardless of chosen language. If the user types in /contact/ or translated to second language /kontakt/ the view should be shown.</p>\n"},{"tags":["python","django","mocking"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13090104,"title":"mocking a method with another reusable method with arguments in python","body":"<p>I have an instance method that I want to test using mock. I am trying to substitute one of the method in this instance class with another method that takes arguments. </p>\n\n<p>class to be test: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class ClassToTest():\n    def compute(self):\n        result = self._get_xml()\n        return result\n\n    def _get_xml(self):\n        #get xml here\n        return xml    \n</code></pre>\n\n<p>The test file:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from mock import patch\nclass ClassTest():\n\n    @patch('classToTest._get_xml', _get_fake_xml)\n    def computetest(self):\n        test = ClassToTest()\n        toassert = test.compute()\n\n        #assert whatever\n        #self.assert(...)\n\n    def _get_fake_xml(self, objects, filename):\n        py_file = os.path.abspath(__file__)\n        py_dir = os.path.dirname(py_file)\n        xml_file = os.path.join(py_dir, filename)\n        xml_tree = objectify.parse(xml_file)\n        return xml_tree.getroot()\n        return xml \n</code></pre>\n\n<p>Now how can I add the arguments for _get_fake_xml method in the patch</p>\n\n<p>I have tried :\n</p>\n\n<pre><code>@patch('classToTest._get_xml', _get_fake_xml(mock.Mock(), 'filenam.xml'))\n</code></pre>\n\n<p>But that didn't work. Then I tried to make filename as a global variable but I get the following error:</p>\n\n<p>self.filename does not exist in ClassToTest instance.</p>\n\n<p>Basically I want to be able to reuse _get_fake_xml with any other filename.</p>\n\n<p>Any suggestion?</p>\n"},{"tags":["javascript","django","file","browser"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":205,"score":0,"question_id":6139676,"title":"Django filebrowser missing JS file","body":"<p>I am trying to use django-filebrowser. I have installed in correctly according to the instructions, but i get a JS error every time i try to upload a file.</p>\n\n<p>I should note that i am able to browse to 'filebrowser/browse/', create directories etc.\nThe problem is that when i chose to upload a file, i can see in the html source that a file 'CollapsedFieldsets.js' is included but cannot be found.</p>\n\n<p>The location of this file is supposed to be here: django-install/django/contrib/admin/media/js/admin/ but the file is nowhere to be found.</p>\n\n<p>django-filebrowser references this JS file in filebrowser/templates/upload.html</p>\n\n<p>The error i get is:</p>\n\n<pre><code>invalid object initializer\n$('#id_file').uploadify({ \n</code></pre>\n\n<p>That probably happens because the file in question cannot be found.\nI am using Django 1.3 and that file is not included in the download.</p>\n\n<p>Please help!</p>\n"},{"tags":["python","django","tutorials"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1404,"score":0,"question_id":4037232,"title":"Django Tutorial - TemplateDoesNotExist at /polls/","body":"<p>I have tried to get this to work a million times. I have lef it alone for a week and come back. I have Googled and read every post pertaining to this. I have let insecure morons belittle in messages groups without ever finding the answer. I just want this to work. When I am following along in part three of the the Django tutorial, I get to the part where you make the template for the index page, and when I go to check it in the browser, it comes up with TemplateDoesNotExist at /polls/. I have checked file ownership, moved it all around, always changing the TEMPLATES_DIR in setting.py. I have pipe'd the contents of the file to cat to make sure it works. I have scarificed animals to strange Gods to get this to work. I turn to you now. I am sure it is the stupidest thing ever, I have very little doubt about this. I just want it to work. </p>\n\n<p>I am not sure what parts of the code/traceback you want/need here, let me know I will post them. I am doing this on Ubuntu 10.10</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>From settings.py:</p>\n\n<p>TEMPLATE_DIRS = (\n    \"home/kevin/first/tutorial/temps\"\n)</p>\n\n<p>This used to live in ~, but I moved into the project folder thinking it would help.</p>\n\n<p>Structure(leaving out all complied python files):\n~/first/tutorial/:\n<strong>init</strong>.py,\nmanage.py,\npolls,\nsettings.py,\ntemps,\ntut.db,\nurls.py</p>\n\n<p>temps:\nindex.html</p>\n\n<p>polls:\nadmin.py,\n<strong>init</strong>.py,\nmodels.py,\ntests.py,\nviews.py,</p>\n"},{"tags":["python","django","orm"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13086278,"title":"Django prefetch_related on generic view DetailView","body":"<p>I have this mixin to apply prefetch_related on a view. This is the queryset that I am supposed to be working on:</p>\n\n<pre><code>MyMode.objects.all().prefetch_related('projects')\n</code></pre>\n\n<p>with these models:</p>\n\n<pre><code>class Workspace():\n name = models.CharField(max_length=255)\nclass Project():\n name = models.CharField(max_length=255)\n workspace = models.Foreignkey(Workspace)\n</code></pre>\n\n<p>with this mixin I created:</p>\n\n<pre><code>class PrefetchRelatedMixin(object):\n    prefetch_related = None\n\n    def get_queryset(self):\n        if self.prefetch_related is None:\n            raise ImproperlyConfigured(u'%(cls)s is missing the prefetch_related'\n                \"property. This must be a tuple or list.\" % {\n                'cls': self.__class__.__name__})\n\n        if not isinstance(self.prefetch_related, (tuple, list)):\n            raise ImproperlyConfigured(u\"%(cls)s's select_related property \"\n                \"must be a tuple or list.\" % {\"cls\": self.__class__.__name__})\n\n        queryset = super(PrefetchRelatedMixin, self).get_queryset()\n\n        return queryset.prefetch_related(\n            \", \".join(self.prefetch_related)\n        )\n</code></pre>\n\n<p>called in the view like this:</p>\n\n<pre><code>class WorkspaceView(DetailView):\n    prefetch_related = ['projects']\n    model = Workspace\n\n    def get_queryset(self):\n        return super(WorkspaceView, self).get_queryset()\n</code></pre>\n\n<p>However, when I try to iterate over the related objects in my template:</p>\n\n<pre><code>{% for p in object.projects %}\n    &lt;li&gt;{{ p.name }}&lt;/li&gt;\n{% empty %}\n    &lt;li&gt;No Projects in this Workspace&lt;/li&gt;\n{% endfor %}\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>'RelatedManager' object is not iterable\n</code></pre>\n\n<p>Is there something in the mixin that altered the object for it to be returning a RelatedManager?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["django","oauth"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13088882,"title":"I have two Django sites: how can I make users of site B login with the credentials on site A?","body":"<p>I have a mother site, call it A. I'm planning a new site, B, and I don't want users to have to create new accounts.</p>\n\n<p>I want all users of A to also be users of B, while the opposite is not necessarily too.</p>\n\n<p>I suppose this require some form of OAuth?</p>\n\n<p>Can you please address me to the best way to do this in Django?</p>\n"},{"tags":["django","postgresql","heroku","django-settings"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13064782,"title":"Django 1.3.1 Heroku Postgres error","body":"<p>We recently pushed our site to staging and have been struggling to get it up ever since, and the team at Heroku are not really responding in time, so I am turning to the community to see if there is a quick fix.</p>\n\n<p>We scrapped the old one and set up a new stack still with the same issues</p>\n\n<pre><code>heroku config\nDISABLE_INJECTION: 1\n</code></pre>\n\n<p><strong>settings.py</strong></p>\n\n<pre><code>import dj_database_url\nDATABASES = {'default': dj_database_url.config(default='postgres://localhost')}\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.postgresql_psycopg2',\n        'NAME': 'mydb',\n        'USER': 'myuser',\n        'PASSWORD': 'mypassword',\n        'PORT': '',\n        'HOST': 'localhost'\n    },\n}\n</code></pre>\n\n<p>Here is the full trace.</p>\n\n<pre><code>heroku run python myapp/manage.py syncdb\n\nTraceback (most recent call last):\n  File \"fundedbyme/manage.py\", line 11, in &lt;module&gt;\n    execute_manager(settings)\n  File \"/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/__init__.py\", line 438, in execute_manager\n    utility.execute()\n  File \"/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/__init__.py\", line 379, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py\", line 191, in run_from_argv\n    self.execute(*args, **options.__dict__)\n  File \"/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py\", line 220, in execute\n    output = self.handle(*args, **options)\n  File \"/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py\", line 351, in handle\n    return self.handle_noargs(**options)\n  File \"/app/.heroku/venv/lib/python2.7/site-packages/south/management/commands/syncdb.py\", line 90, in handle_noargs\n    syncdb.Command().execute(**options)\n  File \"/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py\", line 220, in execute\n    output = self.handle(*args, **options)\n  File \"/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py\", line 351, in handle\n    return self.handle_noargs(**options)\n  File \"/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/commands/syncdb.py\", line 56, in handle_noargs\n    cursor = connection.cursor()\n  File \"/app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/__init__.py\", line 252, in cursor\n    cursor = util.CursorWrapper(self._cursor(), self)\n  File \"/app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py\", line 140, in _cursor\n    self.connection = Database.connect(**conn_params)\n  File \"/app/.heroku/venv/lib/python2.7/site-packages/psycopg2/__init__.py\", line 179, in connect\n    connection_factory=connection_factory, async=async)\npsycopg2.OperationalError: could not connect to server: Connection refused\n    Is the server running on host \"localhost\" and accepting\n    TCP/IP connections on port 5432?\n</code></pre>\n"},{"tags":["django","django-forms","django-templates","django-views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13091481,"title":"The view didn't return an HttpResponse object error when form is not valid: django","body":"<p>I've used djangoo forms. i have this function in views.py:</p>\n\n<pre><code>def func(request):\n    if request.method == \"POST\":\n        form = MyForm(request.POST)\n        if form.is_valid():\n            //do processing            \n            return HttpResponseRedirect('/')\n    else:\n        form = MyForm()\n        return render_to_response(\"checkbox.html\", RequestContext(request, {'form':form}))\n</code></pre>\n\n<p>but when form is invalid, it shows me error: 'The view didn't return an HttpResponse object.' i've searched and realized every where the view functions are like this, but i don't know why mine has error. It seems it doesn't know what to do, while form in invalid!!! Why it doesn't show the page and show user the form errors? can you please help me?</p>\n"},{"tags":["python","django","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13090479,"title":"ManyToMany in Django admin: select none","body":"<p>Having <code>A = ManyToManyField(B, null=True, blank=True)</code>, when I go in A's admin page, it seems I can't unselect every entries in the ManyToMany box after having clicked on a B element.<br>\nAnd even if I don't click on any entry, there is a related B element selected after saving (the first B element I guess).</p>\n\n<p>But I want to add A elements without having to relate them to any one of B...</p>\n\n<p>Is there any way to say to Django admin to select no element? (other than creating a dummy B element for those situations)</p>\n"},{"tags":["python","django","django-imagefield"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":13090505,"title":"Render Default Image, Django","body":"<p>I defined an ImageField in my models.py, with a default image. Each time I create a new user, I can see in the admin that the default image is associated to the user, as I wanted.</p>\n\n<p>The problem is, when I try to render it in my templates, with something like:</p>\n\n<pre><code>{{user.userprofile.profilpic.url}}\n</code></pre>\n\n<p>it does not work. The image is not displayed. </p>\n\n<p>But if I go into my admin and change it manually, even with the exact same image, it works. It looks like the image is not saved into the db when I create the user.</p>\n\n<p>Here is my models.py:</p>\n\n<pre><code>    class UserProfile(FacebookProfileModel):\n       user = models.OneToOneField(User)\n       profilpic = models.ImageField(upload_to=\"profilpics/\", default=\"/my/picture.jpeg\")\n</code></pre>\n\n<p>I wonder how I can fix that. Thank you for your help.</p>\n"},{"tags":["python","django","django-login"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13090012,"title":"django login on index page","body":"<p>I'm trying to implement a login system where the user never leaves the front page. So far I've got the following:</p>\n\n<p>The form:</p>\n\n<pre><code>&lt;form action=\"\" method=\"post\"&gt;\n    {% csrf_token %}\n    &lt;input type=\"text\" name=\"username\" value=\"\" id=\"username\"&gt;\n    &lt;input type=\"password\" name=\"password\" value=\"\" id=\"password\"&gt;\n    &lt;input type=\"submit\" value=\"login\" /&gt;\n    &lt;input type=\"hidden\" name=\"next\" value=\"{{ next|escape }}\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>The view:</p>\n\n<pre><code>def login_user(request):\n    state = \"Please log in below...\"\n    username = password = ''\n    if request.POST:\n        username = request.POST.get('username')\n        password = request.POST.get('password')\n\n        user = authenticate(username=username, password=password)\n        if user is not None:\n            if user.is_active:\n                login(request, user)\n                state = \"You're successfully logged in!\"\n            else:\n                state = \"Your account is not active, please contact the site admin.\"\n        else:\n            state = \"Your username and/or password were incorrect.\"\n\n    return render_to_response('index.html',{'state':state, 'username': username})\n</code></pre>\n\n<p>When I submit a form with a known user, I get the error:</p>\n\n<p>CSRF token missing or incorrect.</p>\n\n<p>What am I doing wrong? I've got the token in the form.</p>\n"},{"tags":["django","django-csrf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13089613,"title":"Ajax, CSRF and DELETE","body":"<p>I use the <code>getCookie</code> function from the <a href=\"https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax\" rel=\"nofollow\"><code>django</code> documentation</a> to get the <code>csrfmiddlewaretoken</code> value.</p>\n\n<p>I have the following ajax call:</p>\n\n<pre><code>var url = reverse_removeprofile.replace(/deadbeef/, key);\n$.ajax({\n    type:          \"DELETE\",\n    url:           url,\n    data:          \"csrfmiddlewaretoken=\" + getCookie(\"csrftoken\"),\n    success:       function() { ... },\n});\n</code></pre>\n\n<p>When this code gets executed then <code>django</code> raises a 403 exception telling me that the CSRF verification failed. However, if I change the <code>type</code> from <code>DELETE</code> to <code>POST</code> then <code>django</code> is happy about it and doesn't complain at all.</p>\n\n<p>I was not really able to find something useful in Google about this, but I've found this (now closed and fixed) ticket: <a href=\"https://code.djangoproject.com/ticket/15258\" rel=\"nofollow\">https://code.djangoproject.com/ticket/15258</a></p>\n\n<p>If I understand it correctly then this issue has been fixed in the 1.4 milestone. I use django 1.4 but still I cannot verify the CSRF token with a <code>DELETE</code> request.</p>\n\n<p>Am I missing something here?</p>\n"},{"tags":["python","django","model","django-south"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13089163,"title":"How to fix a Database Error and ghost migration error in Django?","body":"<p>I am getting an DatabaseError saying no column named playlist exists and I'm trying to figure out how to fix it.  I'm using South. I deleted the old files in the my migrations folder and ran:</p>\n\n<pre><code>python manage.py schemamigration app_name --initial\npython manage.py migrate reserve\n</code></pre>\n\n<p>I get this error when I do that:</p>\n\n<pre><code>south.exceptions.GhostMigrations: \n\n ! These migrations are in the database but not on disk:\n    &lt;reserve: 0002_initial&gt;\n ! I'm not trusting myself; either fix this yourself by fiddling\n ! with the south_migrationhistory table, or pass --delete-ghost-migrations\n ! to South to have it delete ALL of these records (this may not be good). \n</code></pre>\n\n<p>I'm not sure how to get rid of this error, since in my migrations folder I only have init.py(c) and 0001_initial.py(c); I don't have 0002 migration file anymore.  </p>\n\n<p>When I try runserver and click \"add playlist\" in the admin, this is when I get the DatabaseError.  If it helps, my models.py is:</p>\n\n<pre><code>class UserProfile(models.Model):\n    user = models.OneToOneField(User)\n    def __unicode__(self):\n        return self.user\n\ndef create_user_profile(sender, instance, created, **kwargs):\n    if created:\n        UserProfile.objects.create(user=instance)\n\npost_save.connect(create_user_profile, sender=User)         \n\nclass Playlist(models.Model):\n    playlist = models.CharField('Playlist', max_length = 2000, null=True, blank=True)\n    def __unicode__(self):\n        return self.playlist\n\nclass Video(models.Model):\n    video_url = models.URLField('Link to video', max_length = 200, null=True, blank=True)\n    def __unicode__(self):\n        return self.video_url\n\nclass UserPlaylist(models.Model):\n    profile = models.ForeignKey(User)\n    playlist = models.ForeignKey(Playlist)\n    def __unicode__(self):\n        return self.playlist\n\nclass Videoplaylist(models.Model):\n    video = models.ForeignKey(Video)\n    playlist = models.ForeignKey(UserPlaylist)\n    def __unicode__(self):\n        return self.playlist\n</code></pre>\n\n<p>Any advice on how to fix this?</p>\n"},{"tags":["django","django-models","django-modelform"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13089024,"title":"Custom form field for a model field","body":"<p>I want to use <a href=\"https://docs.djangoproject.com/en/1.4/ref/contrib/localflavor/#django.contrib.localflavor.us.forms.USSocialSecurityNumberField\" rel=\"nofollow\">USSocialSecurityNumberField</a> in a model. To be precise I'm ok with having CharField in the model but I would like it to inject USSocialSecurityNumberField to modelforms based on that model. </p>\n\n<p>Is there any way to override the default form field for a model field, other than <a href=\"https://docs.djangoproject.com/en/1.4/howto/custom-model-fields/#specifying-the-form-field-for-a-model-field\" rel=\"nofollow\">subclassing model fields</a> ? I mean something like:</p>\n\n<pre><code>ssn = models.CharField(max_length=11, formfield=USSocialSecurityNumberField)\n</code></pre>\n\n<p>This would be the simplest solution for what is a one-time need.</p>\n\n<p>PS. I'm also interested in other combinations of model fields and form fields, so subclassing is an annoying solution..</p>\n"},{"tags":["mysql","django"],"answer_count":7,"favorite_count":4,"up_vote_count":26,"down_vote_count":0,"view_count":10115,"score":26,"question_id":21454,"title":"Specifying a mySQL ENUM in a Django model","body":"<p>The title more or less says it all. How do I go about specifying and using an ENUM in a Django model?</p>\n"},{"tags":["python","django","lxml","nose","lettuce"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13078726,"title":"Getting started with lettuce: \"XMLSyntaxError: None\"","body":"<p>I've been trying to get a basic set of <a href=\"http://lettuce.it/index.html\" rel=\"nofollow\">Lettuce</a> tests up and running in a django project, but I've run into a few problems.</p>\n\n<p>I followed the <a href=\"http://lettuce.it/recipes/django-lxml.html\" rel=\"nofollow\">example tutorial on the lettuce website</a>, but I keep getting the following error when I run <code>python manage.py harvest</code>:</p>\n\n<pre><code>Feature: Rocking with lettuce and django               #apps/my_app/features/index.feature:1\n\n  Scenario: Simple Hello World                         # apps/my_app/features/index.feature:3\n    Given I access the url \"/admin\"                    # apps/my_app/features/index-steps.py:12\n    Given I access the url \"/admin\"                    # apps/my_app/features/index-steps.py:12\n    Traceback (most recent call last):\n      File \"/home/myhome/.virtualenvs/my_env/lib/python2.7/site-packages/lettuce/core.py\", line 141, in __call__\n        ret = self.function(self.step, *args, **kw)\n      File \"/home/myhome/code/my_app/apps/my_app/features/index-steps.py\", line 14, in access_url\n        world.dom = html.fromstring(response.content)\n      File \"/home/myhome/.virtualenvs/my_env/lib/python2.7/site-packages/lxml/html/__init__.py\", line 634, in fromstring\n        doc = document_fromstring(html, parser=parser, base_url=base_url, **kw)\n      File \"/home/myhome/.virtualenvs/my_env/lib/python2.7/site-packages/lxml/html/__init__.py\", line 532, in document_fromstring\n        value = etree.fromstring(html, parser, **kw)\n      File \"lxml.etree.pyx\", line 2756, in lxml.etree.fromstring (src/lxml/lxml.etree.c:54726)\n      File \"parser.pxi\", line 1578, in lxml.etree._parseMemoryDocument (src/lxml/lxml.etree.c:82843)\n      File \"parser.pxi\", line 1457, in lxml.etree._parseDoc (src/lxml/lxml.etree.c:81641)\n      File \"parser.pxi\", line 965, in lxml.etree._BaseParser._parseDoc (src/lxml/lxml.etree.c:78311)\n      File \"parser.pxi\", line 569, in lxml.etree._ParserContext._handleParseResultDoc (src/lxml/lxml.etree.c:74567)\n      File \"parser.pxi\", line 650, in lxml.etree._handleParseResult (src/lxml/lxml.etree.c:75458)\n      File \"parser.pxi\", line 601, in lxml.etree._raiseParseError (src/lxml/lxml.etree.c:74958)\n    XMLSyntaxError: None\n    Then I see the header \"Log in | Django site admin\" # apps/my_app/features/index-steps.py:17\n    Then I see the header \"Log in | Django site admin\" # apps/my_app/features/index-steps.py:17\n\n1 feature (0 passed)\n1 scenario (0 passed)\n2 steps (1 failed, 1 skipped, 0 passed)\n</code></pre>\n\n<p>I have the following installed in my virtual environment:</p>\n\n<pre><code>Django==1.4.1\nMySQL-python==1.2.3\nSouth==0.7.6\nWerkzeug==0.8.3\nboto==2.6.0\ncssselect==0.7.1\ndjango-extensions==0.9\ndjango-nose==1.1\ndjango-storages==1.1.5\ndjango-tastypie==0.9.11\nfuzzywuzzy==0.1\nlettuce==0.2.10\nlxml==2.3.5\nmimeparse==0.1.3\nmock==1.0.0\nnose==1.2.1\npython-dateutil==1.5\nselenium==2.25.0\nsure==1.0.6\nwsgiref==0.1.2\n</code></pre>\n\n<p>Is this a bug, or have I made some mistake somewhere? I would have thought the example would have covered it...</p>\n"},{"tags":["django","amazon-ec2","rabbitmq","celery"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":133,"score":0,"question_id":11068182,"title":"celery & Amazon ec2","body":"<p>How do you set up celery (and rabbit) so that they can communicate over an EC2 instance?</p>\n\n<p>Rabbit is running on the instance, on user rabbitmq. I need to send messages to the instance from other computers off the instance, in this case I'm testing with computer.</p>\n\n<p>I've configured celery to work on my computer with a local installation of rabbit.</p>\n\n<p>Furthermore, I've followed these settings to generate the incantation:</p>\n\n<p><a href=\"http://docs.celeryq.org/en/latest/configuration.html#broker-settings\" rel=\"nofollow\">http://docs.celeryq.org/en/latest/configuration.html#broker-settings</a></p>\n\n<p>This is a redhat instance.</p>\n"},{"tags":["django","django-models","django-south"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13088512,"title":"ValidationError during Django-South migration","body":"<p>So, I am learning to use South and I've been running in a few issues. I did the initial app migration with the model looking like this:</p>\n\n<pre><code>class Poll(models.Model):\n    pass\n</code></pre>\n\n<p>Then added my fields...</p>\n\n<pre><code>class Poll(models.Model):\n    question = models.CharField(max_length=200)\n    pub_date = models.DateTimeField()\n</code></pre>\n\n<p>and during the migration South complained that those fields didn't have a default, so I entered some but it didn't work... now when I try deleting them from the model and migrating back to the empty mode I get the following traceback:</p>\n\n<pre><code>mirkocrocop@Mirkos-MacBook-Pro:~/workspace/toastdriven$ python manage.py migrate polls\nRunning migrations for polls:\n - Migrating forwards to 0007_auto__del_field_poll_question.\n &gt; polls:0003_auto__add_field_poll_question__add_field_poll_pub_date\nTraceback (most recent call last):\n  File \"manage.py\", line 10, in &lt;module&gt;\n    execute_from_command_line(sys.argv)\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/django/core/management/__init__.py\", line 443, in execute_from_command_line\n    utility.execute()\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/django/core/management/__init__.py\", line 382, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/django/core/management/base.py\", line 196, in run_from_argv\n    self.execute(*args, **options.__dict__)\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/django/core/management/base.py\", line 232, in execute\n    output = self.handle(*args, **options)\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/south/management/commands/migrate.py\", line 108, in handle\n    ignore_ghosts = ignore_ghosts,\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/south/migration/__init__.py\", line 213, in migrate_app\n    success = migrator.migrate_many(target, workplan, database)\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/south/migration/migrators.py\", line 235, in migrate_many\n    result = migrator.__class__.migrate_many(migrator, target, migrations, database)\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/south/migration/migrators.py\", line 310, in migrate_many\n    result = self.migrate(migration, database)\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/south/migration/migrators.py\", line 133, in migrate\n    result = self.run(migration)\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/south/migration/migrators.py\", line 106, in run\n    dry_run.run_migration(migration)\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/south/migration/migrators.py\", line 191, in run_migration\n    self._run_migration(migration)\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/south/migration/migrators.py\", line 178, in _run_migration\n    raise exceptions.FailedDryRun(migration, sys.exc_info())\nsouth.exceptions.FailedDryRun:  ! Error found during dry run of '0003_auto__add_field_poll_question__add_field_poll_pub_date'! Aborting.\nTraceback (most recent call last):\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/south/migration/migrators.py\", line 175, in _run_migration\n    migration_function()\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/south/migration/migrators.py\", line 57, in &lt;lambda&gt;\n    return (lambda: direction(orm))\n  File \"/Users/mirkocrocop/workspace/toastdriven/polls/migrations/0003_auto__add_field_poll_question__add_field_poll_pub_date.py\", line 19, in forwards\n    keep_default=False)\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/south/db/sqlite3.py\", line 31, in add_column\n    field.column: self._column_sql_for_create(table_name, name, field, False),\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/south/db/sqlite3.py\", line 189, in _column_sql_for_create\n    sql = self.column_sql(table_name, name, field, with_name=False, field_prepared=True)\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/south/db/generic.py\", line 688, in column_sql\n    default = field.get_db_prep_save(default, connection=self._get_connection())\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/django/db/models/fields/__init__.py\", line 292, in get_db_prep_save\n    prepared=False)\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/django/db/models/fields/__init__.py\", line 816, in get_db_prep_value\n    value = self.get_prep_value(value)\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/django/db/models/fields/__init__.py\", line 801, in get_prep_value\n    value = self.to_python(value)\n  File \"/Users/mirkocrocop/.virtualenvs/toastdriven/lib/python2.7/site-packages/django/db/models/fields/__init__.py\", line 785, in to_python\n    raise exceptions.ValidationError(msg)\nValidationError: [u\"'0' value has an invalid format. It must be in YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ] format.\"]\n</code></pre>\n\n<p>How could I fix this, and what is the correct way of adding these fields + doing the migration from the empty model to the field populated model? I've been going through South's docs but I don't get it... I did everything <a href=\"http://south.readthedocs.org/en/0.7.6/tutorial/part2.html#tutorial-part-2\" rel=\"nofollow\">according to the documentation</a>, but I'm not sure what should I default the DateTimeField to...</p>\n"},{"tags":["django","gettext","urlpatterns"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":447,"score":1,"question_id":5214071,"title":"Django: URL pattern translation with gettext","body":"<p>In some Django applications I encountered URL patterns with gettext such as:</p>\n\n<pre><code>from django.utils.translation import ugettext as _\n\nurlpatterns = patterns('',\n    ...\n    url(r'^%s$' % _('about/'), about, name='about'),\n    ...\n)\n</code></pre>\n\n<p>At first, it seemed to be a good idea to have internationalized URLs in a uniform way with the rest of the project but I have doubts. </p>\n\n<p>AFAIK, URL patterns are loaded at application start-up. So I suspect they will be build according to the language preferences of the user who makes the first request to the application. This may get even more unpredictable when threads are in the play too. </p>\n\n<p>This approach may be reasonable for cases where an installation will be in single language but there may be other installations in other languages, like forum applications. </p>\n\n<p>Do you think this is a problem or just my imagination? Can this approach be used for multilingual sites? Can <code>ugettext_lazy</code> avoid this problem? </p>\n"},{"tags":["django","django-cms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":47,"score":-2,"question_id":13086901,"title":"Django CMS + Django Comments = 404","body":"<p>I am a novice user of Django 1.4.2. I have played with it some weeks but I keep getting stuck at the same point: a 404 if I go to a pre-set url...</p>\n\n<p>URLS.PY:</p>\n\n<pre><code>from django.conf.urls.defaults import *\nfrom django.contrib import admin\nfrom django.conf import settings\n\nadmin.autodiscover()\n\nurlpatterns = patterns('',\n    (r'^admin/', include(admin.site.urls)),\n    url(r'^', include('cms.urls')),\n    (r'^comments/', include('django.contrib.comments.urls')),\n)\n\nif settings.DEBUG:\n    urlpatterns = patterns('',\n    url(r'^media/(?P&lt;path&gt;.*)$', 'django.views.static.serve',\n    {'document_root': settings.MEDIA_ROOT, 'show_indexes': True}),\n    url(r'', include('django.contrib.staticfiles.urls')),\n) + urlpatterns    # Example:\n</code></pre>\n\n<p>I have followed the Django CMS and some other plugins so many times, but I keep receiving a 404 error when i want to preview an url. In this case I have successfully installed Django Comments, I am able to create comments (in the backend), but if I want to preview them in the front-end...404. Is there something wrong with my URLS.PY?</p>\n\n<pre><code>example.com/en/comments -&gt; 404\n</code></pre>\n\n<p>Thanks in advance.</p>\n"},{"tags":["python","django","django-flatpages"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":301,"score":3,"question_id":4507760,"title":"Access to field in extended flatpage in django","body":"<p>How to access field in extended flatpage in django?<br>\nI wrote this:</p>\n\n<pre><code>class ExtendedFlatPage(FlatPage):\n     teaser = CharField(max_length=150)\n\nclass ExtendedFlatPageForm(FlatpageForm):\n     teaser = CharField(max_length=150)\n     class Meta:\n        model = ExtendedFlatPage\n\nclass ExtendedFlatPageAdmin(FlatPageAdmin):\n    form = ExtendedFlatPageForm\n    fieldsets = (\n        (None, {'fields': ('url', 'title', 'teaser', 'content', 'sites',)}),\n    )     \n\nadmin.site.unregister(FlatPage)\nadmin.site.register(ExtendedFlatPage, ExtendedFlatPageAdmin)\n</code></pre>\n\n<p>And creation in admin is ok. But then in flatpages/default.html I tried this:</p>\n\n<pre><code>&lt;html&gt;\n&lt;body&gt;\n&lt;h1&gt;{{ flatpage.title }}&lt;/h1&gt;\n&lt;strong&gt;{{ flatpage.teaser }}&lt;/strong&gt;\n&lt;p&gt;{{ flatpage.content }}&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>And there was no flatpage.teaser! What is wrong?</p>\n"},{"tags":["django","filtering","django-queryset","exclude"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1074,"score":2,"question_id":3032104,"title":"Django excluding specific instances from queryset without using field lookup","body":"<p>I sometimes have the need to make sure some instances are excluded from a queryset.<br>\nThis is the way I do it usually:  </p>\n\n<pre><code>unwanted_instance = MyModel.objects.get(pk=bad_luck_number)\nuninteresting_stuff_happens()\nmy_results = MyModel.objects.exclude(id=unwanted_instance.id)\n</code></pre>\n\n<p>or, if I have more of them:</p>\n\n<pre><code>my_results = MyModel.objects.exclude(id_in=[uw_in1.id, uw_in2.id, uw_in3.id])\n</code></pre>\n\n<p>This 'feels' a bit clunky, so I tried:</p>\n\n<pre><code>my_ideally_obtained_results = MyModel.objects.exclude(unwanted_instance)\n</code></pre>\n\n<p>Which doesn't work. But I read <a href=\"http://stackoverflow.com/questions/1637897/django-queryset-excluding-entries-in-second-model/1638163#1638163\">here on SO</a> that a subquery can be used as parameter for exclude.<br>\nAm I out of luck? Am I missing some functionality (checked the docs, but didn't find any useful pointer)</p>\n"},{"tags":["django","django-models","python-2.6","django-1.3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12700174,"title":"How do I know which child class a Django model object is when selected through the parent class?","body":"<p>I have a main <code>Event</code> class, and four event types. Each of them is a subclass of (at least) <code>Event</code>. On an event's detail page, I am adding a link back to the admin interface for a given event to save the time of searching in the admin. Unfortunately, regardless of child class, the events are selected from the parent <code>Event</code> class. My solution to this problem was to duck type, which I find to be absolutely awful in this instance. <strong>I am hoping there is a more elegant and easy-to-maintain solution to my problem.</strong></p>\n\n<p>Model:</p>\n\n<pre><code>class Event(models.Model):\n    ...\n\nclass ListedEvent(Event):\n    ....\n\nclass RSVPEvent(Event):\n    ....\n\nclass TicketedEvent(Event):\n    ....\n\nclass TicketedConcert(TicketedEvent):\n    ....\n</code></pre>\n\n<p>To see event details, the URL passes a venue slug and event name slug. This is enough info to isolate a single event from the parent <code>Event</code> model across all the child events. It also lets me keep the event type out of the URL, making them simpler and more friendly.</p>\n\n<pre><code>@render_to('events/event_details.html')\ndef event_details(request, venue, slug):\n    \"\"\"\n    Detail view of an event.\n    \"\"\"\n    try:\n        event = Event.objects.select_related(\n            'listedevent',\n            'rsvpevent',\n            'ticketedevent',\n            'ticketedconcert',\n            'venue',\n            'sites',\n            'dj',\n        ).get(\n            slug=slug,\n            venue__slug=venue,\n        )\n    except Event.DoesNotExist:\n        raise Http404\n\n    return {'event': event}\n</code></pre>\n\n<p>Before I went back and realized that I was using the parent <code>Event</code> model, this solution was much more elegant and worked fine in the shell assuming I select an event from its actual model (property of parent class <code>Event</code>):</p>\n\n<pre><code>@property\ndef admin_link(self):\n    et = self.__class__.__name__.lower()\n    # ALWAYS: et == 'event', reverse() fails, returns ''\n    return reverse('admin:events_%s_change' % et, args=(self.id,))\n</code></pre>\n\n<p>My current solution (property of parent class <code>Event</code>):</p>\n\n<pre><code>@property\ndef admin_link(self):\n    duck = None\n\n    try:\n        duck = self.ticketedevent.ticketedconcert.artist_name\n        return reverse(\n            'admin:events_ticketedconcert_change',\n            args=(self.id,)\n        )\n    except:\n        pass\n\n    try:\n        duck = self.ticketedevent.max_tickets\n        return reverse(\n            'admin:events_ticketedevent_change',\n            args=(self.id,)\n        )\n    except:\n        pass\n\n    try:\n        duck = self.rsvpevent.total_rsvp\n        return reverse(\n            'admin:events_rsvpevent_change',\n            args=(self.id,)\n        )\n    except:\n        pass\n\n    try:\n        duck = self.listedevent.name\n        return reverse(\n            'admin:events_listedevent_change',\n            args=(self.id,)\n        )\n    except:\n        pass\n</code></pre>\n\n<p>There has to be a simpler, more easy-to-maintain method of finding out which type of event I'm looking at. Any ideas?</p>\n"},{"tags":["python","django","celery","ampq"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13084448,"title":"How do I retry Celery task until certain time?","body":"<p>I read the <a href=\"https://celery.readthedocs.org/en/latest/userguide/calling.html\" rel=\"nofollow\">docs on Celery tasks</a> and can't understand how I do what I need.</p>\n\n<p>I want to start a task, run and retry it every 1 second. After 3 seconds it should stop retrying and return a default value.</p>\n\n<p>Here's a POC code that doesn't work as expected: </p>\n\n<pre><code>@task(expires=3, default_retry_delay=1, max_retries=10)\ndef ttt(args):\n    try:\n        return slow_work_result(args)\n    except SlowWorkFailed:\n        pass\n\n    try:\n        return ttt.retry(countdown=1)\n    except MaxRetriesExceededError:\n        return False\n\n\nttt.apply_async(args=(1,)).get()\n</code></pre>\n\n<p>The task should expire in 3 seconds, but <code>MaxRetriesExceededError</code> should be raised in 10 seconds. But when I run it, it stops because of <code>MaxRetriesExceededError</code>.</p>\n\n<p>What am I doing wrong?</p>\n\n<p>Can this try-except construct be more elegant?</p>\n"},{"tags":["django","django-templates"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12915013,"title":"In django-api-playground, How endpoints work with multiple parameters?","body":"<p>In django-api-playground, How endpoints url work with multiple parameters</p>\n\n<p>E.g.:</p>\n\n<p>/api/{c-id}/{d-id}</p>\n\n<p>'{c-id}' gets replaced correctly onblur event of input-box, but reverts back to '{c-id}' when leaving the d-id input-box. \nForm action ends up being, e.g., /api/{credit-id}/5/</p>\n\n<p>I think app.js file (fill_url_parameters function) of django-api-playground require some modification for this.</p>\n\n<p>Any idea how to do that?\nThanks </p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":1038,"score":1,"question_id":6468397,"title":"How to check Django version","body":"<p>Im very new to python Now I have to use python and django for our application. So I have two versions of python 2.6 and 2.7. Now I have installed Django. I could run the sample application for testing Django succesfuly. But how to make sure that whether Django uses 2.6 or 2.7 version and what version of modules does Django uses. \nCan anyone clarify me please.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["django","celery","django-celery"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13063723,"title":"Cleanup taskmeta table of celery","body":"<p>I have <a href=\"http://celeryproject.org/\" rel=\"nofollow\">Celery</a> running and everything works nice.</p>\n\n<p>Celery uses by default a database table to store the task results, called <code>celery_taskmeta</code>. This table is growing very fast. I read the docs, but I did not find any hint about cleaning up old entries.</p>\n\n<p>Is there a task automatically scheduled by <code>celerybeat</code>, that cleans this table up or do I have to configure something here?</p>\n\n<p><strong>[EDIT]</strong></p>\n\n<p>Is this related with the <a href=\"http://docs.celeryproject.org/en/latest/configuration.html?highlight=meta#celery-result-backend\" rel=\"nofollow\">result backend settings</a>? This is a bit confusing, because documentation says, there is no default value for this. But it seems, that <code>database</code> is the default and it uses the the <code>default</code> configuration of normal <a href=\"https://docs.djangoproject.com/en/1.4/ref/settings/#databases\" rel=\"nofollow\">Django database configuration</a>.</p>\n"},{"tags":["python","django","google-app-engine"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13081421,"title":"python, Django related to sendinf pdf using urrlib2","body":"<p>I am working on Django, python and app engine, Can anyone please tell me hoe to send a pdf file to a url using urllib2,(file is InMemoryUploadedFile).  I know there is a question in SOF for sending data using urllib2 with the data being in JSON format..But here I want to send a InMemoryUploadedFile which is a pdf uploaded file from html page. Thanks in advance...</p>\n"},{"tags":["django","templates","escaping","django-mptt"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13086175,"title":"Django MPTT's template tags destroying HTML markup","body":"<p>I'm using Django MPTT to handle my hierarchical Data in my Django application. I'd like to render a TreeView using the <code>recursetree</code> tag. However, with this code :</p>\n\n<pre><code>{% recursetree system_list %}\n    &lt;li&gt;{{ node.title }}\n        {% if not node.is_leaf_node %}\n            &lt;ul&gt;\n                {{ children.title }}\n            &lt;/ul&gt;\n        {% endif %}\n    &lt;/li&gt;\n{% endrecursetree %}\n</code></pre>\n\n<p>I get such a markup :</p>\n\n<pre><code>              &lt;li&gt;Uppeur kar parK\n\n            &lt;ul&gt;\n\n    &amp;lt;Li&amp;gt;Caillou\n\n            &amp;lt;Ul&amp;gt;\n\n    &amp;amp;Lt;Li&amp;amp;Gt;Patate\n\n    &amp;amp;Lt;/Li&amp;amp;Gt;\n\n    &amp;amp;Lt;Li&amp;amp;Gt;Courgette\n\n    &amp;amp;Lt;/Li&amp;amp;Gt;\n\n    &amp;amp;Lt;Li&amp;amp;Gt;Artichaud\n\n    &amp;amp;Lt;/Li&amp;amp;Gt;\n\n    &amp;amp;Lt;Li&amp;amp;Gt;Brocoli\n\n    &amp;amp;Lt;/Li&amp;amp;Gt;\n\n            &amp;lt;/Ul&amp;gt;\n\n    &amp;lt;/Li&amp;gt;\n\n    &amp;lt;Li&amp;gt;Pierre\n\n    &amp;lt;/Li&amp;gt;\n\n            &lt;/ul&gt;\n\n    &lt;/li&gt;\n</code></pre>\n\n<p>Do you know why the markup is escaped after the second level ? How could I fix that ?</p>\n"},{"tags":["python","django","callback","decorator"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13085840,"title":"DJANGO Callback function inside views","body":"<p>What I need is to automatically call a function (callback function) inside one or more views, get its result and pass it to the template.</p>\n\n<p>Here's a simplified example:</p>\n\n<p>utils.py: </p>\n\n<pre><code>def getSContent():  \n    return 'some dynamic data'\n</code></pre>\n\n<p>views.py:</p>\n\n<pre><code>def myFirstView(request):\n    ...py code...\n\n    sData = getSContent() &lt;== this line\n    return render_to_response('template.html',\n                               {'sData': sData, &lt;== this line \n                               ...\n                               },\n                               contenxt_instance = RequestContext(request))\n\ndef mySecondView(request):\n    ...py code...\n\n    sData = getSContent() &lt;== this line\n    return render_to_response('template.html',\n                               {'sData': sData, &lt;== this line \n                               ...\n                               },\n                               contenxt_instance = RequestContext(request))\n</code></pre>\n\n<p>..and so on.</p>\n\n<p><code>sData = getSContent()</code> and <code>{'sData': sData}</code> are repeated inside all these view functions.</p>\n\n<ul>\n<li>Is there any shortcut for this?   </li>\n<li>Can I somehow bind this function to\nspecific views of my app without having to specify it (the marked\nlines) all the time?   </li>\n<li>Can a decorator do this job?</li>\n</ul>\n\n<p>Keep in mind that I need to catch the function's return and pass it further to the template.</p>\n"},{"tags":["django","user","extend","groups"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13086346,"title":"Create extend user for specific group","body":"<p>What is best practice how to extend user in specific group in Django? </p>\n\n<p>Say I have groups Teacher and Student. </p>\n\n<p>For example assume </p>\n\n<p>Teacher should have education field, expertise field, both text fields. </p>\n\n<p>Student should have Foreign key to his/her class where he/she belongs to. </p>\n\n<p>How to achieve that when I crate new student, he/she should be automatically in group 'student', same for teacher but in group 'teacher'. Also If I create a user in group 'student' or 'teacher' there should be automatically (empty) record for Student/Teacher class?</p>\n\n<p>For now I have subclassed Users model class and redefined save method to automatically set required group, but don't know If it's good solution and still don't know how to achieve automatic creating of records when user created not using Student/Teacher classes. </p>\n\n<p>Thank you in advance for you help. </p>\n"},{"tags":["django","database-design","model"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13082132,"title":"Django Model design query: any alternative to using ManyToManyField","body":"<p>So I have the following model structure for a django project</p>\n\n<pre><code>class RawData(models.Model):\n    user = models.ForeignKey(User)\n    timestamp = models.DateTimeField()\n    ...\n    value = models.PositiveIntegerField()\n\nclass SummarizedData(models.Model):\n    SUMMARY_DURATION = (\n        ('H', 'Hour'),\n        ('D', 'Day'),\n        ('M', 'Month'),\n        ('Y', 'Year')\n    )\n    user = models.ForeignKey(User)\n    duration = models.CharField(max_length=1, choices=SUMMARY_DURATION)\n    timestamp = models.DateTimeField()      #for keeping track of which duration's data is this\n    ...\n    min_max_values = models.ManyToManyField(RawData)\n</code></pre>\n\n<p>Now my problem is related to min_max_values. I just want 2 RawData tuples per SummarizedData - one corresponding to the minimum RawData value seen for that duration, and the other for the maximum such value.</p>\n\n<p>However since a particular RawData tuple could be the minimum value for more than one SummarizedData entries (for ex for a given hr, the same day etc), I related them through manytomany relation. But I am not able to figure out how to identify which of the 2 RawData values related to a SummarizedData is the max and which is the min unless I compare their respective values. So as of now I'm going with having functions in SummarizedData like getMaxValue and getMinValue.</p>\n\n<p>My question is that for such a specific case, isn't it possible to somehow include 2 fields in SummarizedData which each correspond to a single RawData field? Maybe like this?</p>\n\n<p><code><strike>min_value = models.OneToOneField(RawData)</strike></code><br/>\n<code><strike>max_value = models.OneToOneField(RawData)</strike></code></p>\n\n<p>Or should I just go with my first approach?</p>\n\n<h2><strong>Edited</strong></h2>\n\n<p>Sorry I should have used ForeignKey instead of OneToOneField</p>\n\n<pre><code>min_value = models.ForeignKey(RawData)\nmax_value = models.ForeignKey(RawData)\n</code></pre>\n"},{"tags":["python","django","postgresql","django-south"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13085658,"title":"South initial migrations are not forced to have a default value?","body":"<p>I see that when you add a column and want to create a schemamigration, the field has to have either null=True or default=something.</p>\n\n<p>What I don't get is that many of the fields that I've written in my models initially (say, before initial schemamigration --init or from a converted_to_south app, I did both) were not run against this check, since I didn't have the null/default error.</p>\n\n<p>Is it normal?</p>\n\n<p>Why is it so? And why is South checking this null/default thing anyway?</p>\n"},{"tags":["django","backbone.js","tastypie"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13078448,"title":"BackboneJS save sending GET instead of PUT","body":"<p>My BackboneJS models now send a <code>GET</code> instead of <code>PUT</code> when I call the <code>model.save()</code> method.\nI have a Django back-end with django-tastypie for the REST api.</p>\n\n<p>For example, I have a user model that I try to update like this:</p>\n\n<pre><code>var me = new UserModel({\n    id: this.user.id\n});\nme.fetch({\n    success: function (t) {\n        console.log(t);\n        t.set({\n            'premium': true\n        });\n        t.save({\n            success: function () {\n                alert('success')\n            },\n            error: function (m, e) {\n                console.log(e);\n            }\n        });\n    }\n})   \n</code></pre>\n\n<p>I get the following error in the console:</p>\n\n<pre><code>GET http://127.0.0.1:8000/api/v1/users/100003258103084/ 500 (INTERNAL SERVER ERROR) \n</code></pre>\n\n<p>in the line where I have <code>t.save()</code></p>\n\n<p>Is there anything I'm doing wrong here? </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Alright, the message that it shows int he line <code>console.log(e)</code> is as follow:</p>\n\n<pre><code>\"{\"error_message\": \"int() argument must be a string or a number, not 'dict'\", \"traceback\": \"Traceback (most recent call last):\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/tastypie/resources.py\\\", line 192, in wrapper\\n    response = callback(request, *args, **kwargs)\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/tastypie/resources.py\\\", line 406, in dispatch_detail\\n    return self.dispatch('detail', request, **kwargs)\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/tastypie/resources.py\\\", line 427, in dispatch\\n    response = method(request, **kwargs)\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/tastypie/resources.py\\\", line 1131, in put_detail\\n    updated_bundle = self.obj_update(bundle, request=request, **self.remove_api_resource_names(kwargs))\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/tastypie/resources.py\\\", line 1827, in obj_update\\n    m2m_bundle = self.hydrate_m2m(bundle)\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/tastypie/resources.py\\\", line 743, in hydrate_m2m\\n    bundle.data[field_name] = field_object.hydrate_m2m(bundle)\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/tastypie/fields.py\\\", line 742, in hydrate_m2m\\n    m2m_hydrated.append(self.build_related_resource(value, **kwargs))\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/tastypie/fields.py\\\", line 593, in build_related_resource\\n    return self.resource_from_data(self.fk_resource, value, **kwargs)\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/tastypie/fields.py\\\", line 548, in resource_from_data\\n    return fk_resource.obj_update(fk_bundle, **data)\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/tastypie/resources.py\\\", line 1814, in obj_update\\n    bundle.obj = self.obj_get(request, **lookup_kwargs)\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/tastypie/resources.py\\\", line 1752, in obj_get\\n    base_object_list = self.get_object_list(request).filter(**kwargs)\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/django/db/models/query.py\\\", line 621, in filter\\n    return self._filter_or_exclude(False, *args, **kwargs)\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/django/db/models/query.py\\\", line 639, in _filter_or_exclude\\n    clone.query.add_q(Q(*args, **kwargs))\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/django/db/models/sql/query.py\\\", line 1250, in add_q\\n    can_reuse=used_aliases, force_having=force_having)\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/django/db/models/sql/query.py\\\", line 1185, in add_filter\\n    connector)\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/django/db/models/sql/where.py\\\", line 69, in add\\n    value = obj.prepare(lookup_type, value)\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/django/db/models/sql/where.py\\\", line 320, in prepare\\n    return self.field.get_prep_lookup(lookup_type, value)\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/django/db/models/fields/related.py\\\", line 137, in get_prep_lookup\\n    return self._pk_trace(value, 'get_prep_lookup', lookup_type)\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/django/db/models/fields/related.py\\\", line 210, in _pk_trace\\n    v = getattr(field, prep_func)(lookup_type, v, **kwargs)\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/django/db/models/fields/__init__.py\\\", line 310, in get_prep_lookup\\n    return self.get_prep_value(value)\\n\\n  File \\\"/home/mohamed/code/skempi/venv/local/lib/python2.7/site-packages/django/db/models/fields/__init__.py\\\", line 537, in get_prep_value\\n    return int(value)\\n\\nTypeError: int() argument must be a string or a number, not 'dict'\\n\"}\"\n</code></pre>\n\n<p>Does this mean that the problem is in Django-Tastypie and not with BackbonejS? Still this <code>GET</code> is the issue i guess!</p>\n"},{"tags":["django","localization","django-templates"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":36,"score":3,"question_id":13084753,"title":"Django - Change time format for a locale","body":"<p>I'm working on a project which uses l10n.<br>\nIf I set the locale to EN and try to display a time (08:00), I get:</p>\n\n<pre><code>8 a.m.\n</code></pre>\n\n<p>If I set the locale to FR I get:</p>\n\n<pre><code>08:00:00\n</code></pre>\n\n<p>But it should be something like:</p>\n\n<pre><code>8h\n</code></pre>\n\n<p>Why am I getting this format ? How can I get the proper format ?</p>\n"},{"tags":["python","django","facebook-connect","facebook"],"answer_count":9,"favorite_count":12,"up_vote_count":11,"down_vote_count":0,"view_count":10124,"score":11,"question_id":2690723,"title":"Facebook Graph API and Django","body":"<p>I am curious if there is any article/ library / anything useful that is built for the newly announced Facebook Graph API. I am planning to use it for a Python/Django project.</p>\n"},{"tags":["python","django","django-forms","spam"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13084256,"title":"Django comments spam filter","body":"<p>I Implemented the comments framework yesterday and it's all working great. However I have setup a little script so I recieve emails when a comment is posted so I can publish the comment if I wish to. However last night I recieved about 20 spam emails from a bot that had been onto the page. I've checked Google Analytics and yesterday I had 28 page views and 6 unique views. So it looks like 1 or 2 bots and have filled in the form numerous times.</p>\n\n<p>When I view the source code on the site the 'honey pot' field is there so i'm not sure why that is caputuring the spam. I'm wondering whether i'm missing something in my code for the honey pot / spam filter to work? </p>\n\n<p>Here is all the code for my form, i'm fairly new to Django no it could be i've missed anything. I don't see the reason in implementing a third party spam filter as the traffic on the site isn't that high.</p>\n\n<p>///FORM</p>\n\n<pre><code>{% get_comment_form for notice as form %}\n  &lt;div id=\"comment_wrap\"&gt;\n\n   &lt;h1&gt;Comments&lt;/h1&gt;\n   {% get_comment_list for notice as comment_list %}\n   {% get_comment_count for notice as comment_count %}\n   &lt;h2&gt;{{comment_count}} comment{{ comment_count|pluralize:\"s\"}}&lt;/h2&gt;\n    &lt;form action=\"{% comment_form_target %}\" method=\"post\"&gt;\n\n   &lt;table&gt;\n   &lt;tr&gt;\n\n    &lt;td&gt;\n    {{ form.comment.errors }}\n    &lt;div class=\"add\"&gt;\n      &lt;textarea id=\"id_comment\" name=\"comment\" value=\"Add a comment...\"&gt;Add a comment...&lt;/textarea&gt;&lt;/div&gt;\n   &lt;/td&gt;\n   &lt;/tr&gt; \n   &lt;/table&gt;\n\n   &lt;table&gt;\n    &lt;tr&gt;\n      {{ form.non_field_errors }}\n      &lt;td height=\"30\"&gt;\n\n    {{ form.name.errors }}\n    &lt;div class=\"name\"&gt;&lt;input id=\"id_name\" type=\"text\" maxlength=\"50\" name=\"name\" value=\"Name\"&gt;&lt;/div&gt;\n\n      &lt;/td&gt;\n\n      &lt;td&gt;\n    {{ form.company.errors }}\n\n    &lt;div class=\"company\"&gt;\n      &lt;input type=\"text\" maxlength=\"50\" name=\"company\" id=\"id_company\" value=\"Company\"&gt;\n    &lt;/div&gt;\n\n\n      &lt;/td&gt;\n\n\n\n      &lt;input type=\"hidden\" name=\"url\" value=\"http://www.website.org\" /&gt;\n       &lt;input type=\"hidden\" name=\"email\" value=\"email@email.com\" /&gt; \n\n\n      &lt;td&gt;\n    &lt;input type=\"hidden\" name=\"next\" value=\"{{notice.get_absolute_url}}#commentmade\"/&gt;\n\n    &lt;button class=\"submit\" value=\"Submit\" &gt;Submit&lt;/button&gt;\n\n      &lt;/td&gt;\n    &lt;/tr&gt;\n   &lt;/table&gt;\n\n   &lt;div id=\"commentmade\" style=\"display: none;\"&gt;&lt;p&gt;Thanks for posting. Your comment is awaiting approval.&lt;/p&gt;&lt;/div&gt;\n   &lt;div class=\"fieldWrapper honey_pot\"&gt;\n    {{ form.honeypot.errors }}\n    &lt;label for=\"id_honeypot\"&gt;If you enter anything in this field your comment will be treated as spam:&lt;/label&gt;\n    {{ form.honeypot }}\n    {{ form.content_type.errors }}\n    {{ form.content_type }}\n\n    {{ form.object_pk.errors }}\n    {{ form.object_pk }}\n\n    {{ form.timestamp.errors }}\n    {{ form.timestamp }}\n\n    {{ form.security_hash.errors }}\n    {{ form.security_hash }}\n&lt;/div&gt;\n\n   &lt;/form&gt;\n\n  &lt;/div&gt;\n\n\n\n\n  {% for comment in comment_list reversed %}\n  &lt;div id=\"comment_post\"&gt;\n    &lt;span class=\"name\"&gt;{{comment.user_name}}&lt;/span&gt;\n    &lt;span class=\"company\"&gt; | {{comment.company}} | &lt;/span&gt;\n    &lt;span class=\"time\"&gt;{{comment.submit_date|timesince}}&lt;/span&gt;\n    &lt;p&gt;{{comment.comment}}&lt;/p&gt;\n\n\n  &lt;/div&gt;\n  {% endfor %}\n</code></pre>\n"},{"tags":["jquery","ajax","django","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13084204,"title":"Make redirect url work with ajax","body":"<p>I want to know how can i make my request work with ajax in my views, while i want to redirect user to other page. I mean for example, when user sends his/her email successfully and I want to redirect him/her to other page. What should I do to make this request work with ajax?</p>\n\n<p>I have this function in views.py:</p>\n\n<pre><code>def compose(request, recipient=None, success_url=None, recipient_filter=None):\n    if request.is_ajax():         \n        if request.method == \"POST\":\n            sender = request.user\n            form = compose_form(request.POST, recipient_filter=recipient_filter)\n            if form.is_valid():\n               // do some processing\n               if success_url is None:\n                   success_url = reverse('messages_inbox')\n               if request.GET.has_key('next'):\n                   success_url = request.GET['next']\n               return HttpResponseRedirect(success_url)\n    else: //rest of function\n</code></pre>\n\n<p>And I check in, for example 'messages_inbox', the request to be passed with ajax. so what's the way?</p>\n"},{"tags":["python","django","django-admin","django-cms","django-file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":89,"score":2,"question_id":12988973,"title":"Django CMS - not able to upload images through cmsplugin_filer_image","body":"<p>i have a problem with a local installation on django cms 2.3.3: i've installed it trough pip, in a separated virtualenv. next i followed the tutorial for settings.py configuration, i started the server. Then in the admin i created an page (home), and i've tried to add an image in the placeholder through the cmsplugin_filer_image, but the upload seems that doesn't work. here's my settings.py:</p>\n\n<pre><code># Django settings for cms1 project.\n# -*- coding: utf-8 -*-\nimport os\ngettext = lambda s: s\nPROJECT_PATH = os.path.abspath(os.path.dirname(__file__))\n\nDEBUG = True\nTEMPLATE_DEBUG = DEBUG\n\nADMINS = (\n    # ('Your Name', 'your_email@example.com'),\n)\n\nMANAGERS = ADMINS\n\nDATABASES = {\n    'default': {\n    'ENGINE': 'django.db.backends.postgresql_psycopg2', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.\n    'NAME': 'cms1',                      # Or path to database file if using sqlite3.\n    'USER': 'cms',                      # Not used with sqlite3.\n    'PASSWORD': 'cms',                  # Not used with sqlite3.\n    'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.\n    'PORT': '',                      # Set to empty string for default. Not used with sqlite3.\n    }\n}\n\n# Local time zone for this installation. Choices can be found here:\n# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name\n# although not all choices may be available on all operating systems.\n# In a Windows environment this must be set to your system time zone.\nTIME_ZONE = 'Europe/Rome'\n\n# Language code for this installation. All choices can be found here:\n# http://www.i18nguy.com/unicode/language-identifiers.html\nLANGUAGE_CODE = 'it-it'\n\nSITE_ID = 1\n\n# If you set this to False, Django will make some optimizations so as not\n# to load the internationalization machinery.\nUSE_I18N = True\n\n# If you set this to False, Django will not format dates, numbers and\n# calendars according to the current locale.\nUSE_L10N = True\n\n# If you set this to False, Django will not use timezone-aware datetimes.\nUSE_TZ = True\n\n# Absolute filesystem path to the directory that will hold user-uploaded files.\n# Example: \"/home/media/media.lawrence.com/media/\"\nMEDIA_ROOT = os.path.join(PROJECT_PATH, \"media\")\n\n# URL that handles the media served from MEDIA_ROOT. Make sure to use a\n# trailing slash.\n# Examples: \"http://media.lawrence.com/media/\", \"http://example.com/media/\"\nMEDIA_URL = '/media/'\n\n# Absolute path to the directory static files should be collected to.\n# Don't put anything in this directory yourself; store your static files\n# in apps' \"static/\" subdirectories and in STATICFILES_DIRS.\n# Example: \"/home/media/media.lawrence.com/static/\"\nSTATIC_ROOT = os.path.join(PROJECT_PATH, \"static\")\nSTATIC_URL = \"/static/\"\n\n\n# Additional locations of static files\nSTATICFILES_DIRS = (\n     os.path.join(PROJECT_PATH, \"static_auto\"),\n    # Put strings here, like \"/home/html/static\" or \"C:/www/django/static\".\n    # Always use forward slashes, even on Windows.\n    # Don't forget to use absolute paths, not relative paths.\n)\n\n# List of finder classes that know how to find static files in\n# various locations.\nSTATICFILES_FINDERS = (\n    'django.contrib.staticfiles.finders.FileSystemFinder',\n    'django.contrib.staticfiles.finders.AppDirectoriesFinder',\n#    'django.contrib.staticfiles.finders.DefaultStorageFinder',\n)\n\n# Make this unique, and don't share it with anybody.\nSECRET_KEY = '^c2q3d8w)f#gk%5i)(#i*lwt%lm-!2=(*1d!1cf+rg&amp;amp;-hqi_9u'\n\n# List of callables that know how to import templates from various sources.\nTEMPLATE_LOADERS = (\n    'django.template.loaders.filesystem.Loader',\n    'django.template.loaders.app_directories.Loader',\n#     'django.template.loaders.eggs.Loader',\n)\n\nMIDDLEWARE_CLASSES = (\n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'cms.middleware.multilingual.MultilingualURLMiddleware',\n    'cms.middleware.page.CurrentPageMiddleware',\n    'cms.middleware.user.CurrentUserMiddleware',\n    'cms.middleware.toolbar.ToolbarMiddleware',\n    # Uncomment the next line for simple clickjacking protection:\n    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',\n)\n\nROOT_URLCONF = 'cms1.urls'\n\n# Python dotted path to the WSGI application used by Django's runserver.\nWSGI_APPLICATION = 'cms1.wsgi.application'\n\nTEMPLATE_DIRS = (\n    os.path.join(PROJECT_PATH, \"templates\"),\n    # Put strings here, like \"/home/html/django_templates\" or \"C:/www/django/templates\".\n    # Always use forward slashes, even on Windows.\n    # Don't forget to use absolute paths, not relative paths.\n)\n\nCMS_TEMPLATES = (\n    ('template_1.html', 'Template One'),\n    ('template_2.html', 'Template Two'),\n)\n\nTEMPLATE_CONTEXT_PROCESSORS = (\n    'django.contrib.auth.context_processors.auth',\n    'django.core.context_processors.i18n',\n    'django.core.context_processors.request',\n    'django.core.context_processors.media',\n    'django.core.context_processors.static',\n    'cms.context_processors.media',\n    'sekizai.context_processors.sekizai',\n)\n\nLANGUAGES = [\n    ('it', 'Italiano'),\n    ('en', 'English'),\n]\n\nINSTALLED_APPS = (\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'cms', #django CMS itself\n    'mptt', #utilities for implementing a modified pre-order traversal tree\n    'menus', #helper for model independent hierarchical website navigation\n    'south', #intelligent schema and data migrations\n    'sekizai', #for javascript and css management\n    #'cms.plugins.file',\n    'cms.plugins.flash',\n    'cms.plugins.googlemap',\n    'cms.plugins.link',\n    #'cms.plugins.picture',\n    'cms.plugins.snippet',\n    'cms.plugins.teaser',\n    'cms.plugins.text',\n    #'cms.plugins.video',\n    'cms.plugins.twitter',\n    'filer',\n    'cmsplugin_filer_file',\n    'cmsplugin_filer_folder',\n    'cmsplugin_filer_image',\n    'cmsplugin_filer_teaser',\n    'cmsplugin_filer_video',\n    'easy_thumbnails',\n    'PIL',\n\n    # Uncomment the next line to enable the admin:\n    'django.contrib.admin',\n    # Uncomment the next line to enable admin documentation:\n    # 'django.contrib.admindocs',\n)\n\n# A sample logging configuration. The only tangible logging\n# performed by this configuration is to send an email to\n# the site admins on every HTTP 500 error when DEBUG=False.\n# See http://docs.djangoproject.com/en/dev/topics/logging for\n# more details on how to customize your logging configuration.\nLOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'filters': {\n    'require_debug_false': {\n        '()': 'django.utils.log.RequireDebugFalse'\n    }\n    },\n    'handlers': {\n    'mail_admins': {\n        'level': 'ERROR',\n        'filters': ['require_debug_false'],\n        'class': 'django.utils.log.AdminEmailHandler'\n    }\n    },\n    'loggers': {\n    'django.request': {\n        'handlers': ['mail_admins'],\n        'level': 'ERROR',\n        'propagate': True,\n    },\n    }\n}\n</code></pre>\n\n<p>when i try to upload an image, in the clipboard section i don't have the thumbnail, but just an 'undefined' message:</p>\n\n<p><img src=\"http://i.stack.imgur.com/q1nkO.png\" alt=\"enter image description here\"></p>\n\n<p>and this is the runserver console while trying to upload:</p>\n\n<pre><code>[20/Oct/2012 15:15:56] \"POST /admin/filer/clipboard/operations/upload/?qqfile=29708_1306856312320_7706073_n.jpg HTTP/1.1\" 500 248133\n[20/Oct/2012 15:15:56] \"GET /it/admin/filer/folder/unfiled_images/undefined HTTP/1.1\" 301 0\n[20/Oct/2012 15:15:56] \"GET /it/admin/filer/folder/unfiled_images/undefined/ HTTP/1.1\" 404 1739\n</code></pre>\n\n<p>Also, this is project filesystem:</p>\n\n<pre><code>cms1\n├── cms1\n│   ├── __init__.py\n│   ├── __init__.pyc\n│   ├── media\n│   │   └── filer_public\n│   │       └── 2012\n│   │           └── 10\n│   │               └── 20\n│   │                   ├── 29708_1306856312320_7706073_n_1.jpg\n│   │                   ├── 29708_1306856312320_7706073_n_2.jpg\n│   │                   ├── 29708_1306856312320_7706073_n_3.jpg\n│   │                   ├── 29708_1306856312320_7706073_n_4.jpg\n│   │                   ├── 29708_1306856312320_7706073_n_5.jpg\n│   │                   ├── 29708_1306856312320_7706073_n_6.jpg\n│   │                   ├── 29708_1306856312320_7706073_n_7.jpg\n│   │                   ├── 29708_1306856312320_7706073_n.jpg\n│   │                   └── torrent-client-macosx.jpg\n│   ├── settings.py\n│   ├── settings.pyc\n│   ├── static\n│   ├── static_auto\n│   ├── static_manual\n│   ├── templates\n│   │   ├── base.html\n│   │   ├── template_1.html\n│   │   └── template_2.html\n│   ├── urls.py\n│   ├── urls.pyc\n│   ├── wsgi.py\n│   └── wsgi.pyc\n└── manage.py\n</code></pre>\n\n<p>So files are uploaded, but they are not accessible to cms. there's a <a href=\"http://stackoverflow.com/questions/9885312/undefined-uploads-using-django-cms-cmsplugin-filer-file-and-cmsplugin-filer-imag\">similar question</a> here, but doens't help me so much. \nIt would be very helpful any help on this issue to me.</p>\n\n<p>Thanks, luke</p>\n"},{"tags":["django","rest","web-applications","frameworks","angularjs"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":147,"score":1,"question_id":13082718,"title":"a good server side solution for angular.js","body":"<p>I'm using Angular.js for my project actually all af the business logic is developed through angular i'm just looking for 2 things:</p>\n\n<p>1.i need a way for easy user authentication i don't know how to implement\n    it through angular.\n2.i need a server side framework that provide a\n    REST Api and a good api for implementing and using a Relational Data\n    Model and good suppport for databases like Postgres or Mysql.</p>\n\n<p>now i'me using Django framework for these two thing it work perfectly with databases and provide a beautiful api for working with data, but i feel using Django along with angular is not a good solution because i don't use much of the functionalities that Django provide i just need a simple REST api with a good Data Model api.\nany suggestion for me?</p>\n"},{"tags":["django","django-cms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13075359,"title":"Django-cms 2.3 - 'cms_tags' is not a valid tag library","body":"<p>I'm trying to update my Django-cms from version 2.2 to 2.3 and when I try to \"runserver\", I get this error:</p>\n\n<p>django.template.base.TemplateSyntaxError: 'cms_tags' is not a valid tag library: ImportError raised loading cms.templatetags.cms_tags: cannot import name VersionAdapter</p>\n\n<p>The installation of django-cms=2.3 worked perfectly,  but there is something somewhere broking everything.</p>\n\n<p>Here's a list of what's installed on this virtualenv:</p>\n\n<pre><code>BeautifulSoup==3.2.0\nDjango==1.3.1\nFabric==1.4.3\nMySQL-python==1.2.3\nPIL==1.1.7\nSouth==0.7.3\nargparse==1.2.1\ncmsplugin-filer==0.8.0\ndjango-admin-tools==0.4.0\n-e git://github.com/bmihelac/django-app-name-translation-in-    admin.git@c7b033bdfb54fee5217248f4e596aa23752185e0#egg=django_app_name_translation_in_admin-dev\ndjango-appconf==0.4.1\ndjango-classy-tags==0.3.4.1\ndjango-cms==2.3\ndjango-debug-toolbar==0.8.5\ndjango-filer==0.8.5\n-e git+https://github.com/toastdriven/django-haystack.git@d2b51143c8008be8523a78822002de1836b9f501#egg=django_haystack-dev\ndjango-hvad==0.1.5\ndjango-mptt==0.5.1\ndjango-page-cms==1.4.5\ndjango-permissions==1.0.3\ndjango-reversion==1.4\ndjango-sekizai==0.5\ndjango-staticfiles==1.1.2\ndjango-transmeta==0.6.2\neasy-thumbnails==1.0-alpha-18\nfeedparser==5.0.1\nhtml5lib==0.90\nhttplib2==0.7.2\nipython==0.11\nposter==0.8.1\npycrypto==2.6\npysolr==2.1.0-beta\npython-ptrace==0.6.4\nsimplejson==2.2.1\nsorl-thumbnail==11.09\nssh==1.7.14\nvirtualenv==1.6.4\nwsgiref==0.1.2\n</code></pre>\n\n<p>Anyone have an idea ?</p>\n"},{"tags":["django","oauth"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13081052,"title":"OAuth in django","body":"<p>I'm a newbie to the world of django and OAuth .\nI have created a django powered demosite running in my localhost and I would like to implement OAuth to access the JSON streaming of my database. Please suggest me any simple  tutorials to get started. Thanks in advance.</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":13080544,"title":"Django is keep throwing error timestamp is invalid","body":"<p>I have this in model</p>\n\n<pre><code>timestamp = models.DateTimeField()\n</code></pre>\n\n<p>and form is this</p>\n\n<pre><code>timestamp = forms.DateTimeField(input_formats=('%Y-%m-%d %H:%M:%S'))\n</code></pre>\n\n<p>I am using jquery DateTimePicker <a href=\"http://trentrichardson.com/examples/timepicker/\" rel=\"nofollow\">given here</a> with this</p>\n\n<pre><code> $( \".datepicker input\" ).datetimepicker({\n     dateFormat: 'yy-mm-dd ',\n });\n</code></pre>\n\n<p>But Django keeps throwing the error <code>date format not valid</code>. It works sometime when I select a random date. but I am not exactly sure when it works.</p>\n"},{"tags":["django","model","foreign-key-relationship"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13082789,"title":"Optional foreign key in model related to a model which doesn't exist","body":"<p>I've attempted to add a second ForeignKey relationship to a Django Model which relates to a model which hasn't yet been created.</p>\n\n<pre><code>class Forms2012(models.Model):\n    \"\"\"\n    Employer forms for the 2012-13 tax year\n    \"\"\"\n    employer = models.ForeignKey('Employer', blank=True, null=True)\n    # employee model is yet to be implemented\n    employee = models.ForeignKey('Employee', blank=True, null=True)\n    name = models.CharField(\n        max_length=50,\n        choices=constants.FORM_CHOICES)\n    description = models.CharField(max_length=255)\n    datemodified = models.DateTimeField()\n</code></pre>\n\n<p>As you might expect this is giving a <code>not installed or is abstract</code> error. However I've been told it should be possible to validate this because that key is optional.</p>\n\n<p>Could someone explain if this is possible, I've added the flags <code>blank=True, null=True</code> to the FK but model validation fails so I think I'm fighting a losing battle.</p>\n"},{"tags":["python","django","eclipse","pydev","devserver"],"answer_count":5,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":4103,"score":5,"question_id":2746512,"title":"PyDev and Django: how to restart dev server?","body":"<p>I'm new to Django. I think I'm making a simple mistake.</p>\n\n<p>I launched the dev server with Pydev:</p>\n\n<blockquote>\n  <p>RClick on project >> Django >> Custom\n  command >> runserver</p>\n</blockquote>\n\n<p>The server came up, and everything was great. But now I'm trying to stop it, and can't figure out how. I stopped the process in the PyDev console, and closed Eclipse, but web pages are still being served from <strong>http://127.0.0.1:8000</strong>. </p>\n\n<p>I launched and quit the server from the command line normally:</p>\n\n<pre><code>python manage.py runserver\n</code></pre>\n\n<p>But the server is still up. What am I doing wrong here?</p>\n"},{"tags":["jquery","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":189,"score":0,"question_id":7766621,"title":"Django form validation message not render in viewa in jquery ajax post","body":"<p>I have created django form and shown in the html page from django views. From the page i need to post the data from jquery ajax and i have did if data's are valid then my django valid get True and perform the task and return the json value.</p>\n\n<p>But in case invalid data means it will not render to corresponding html with django error messages like normal form submission.</p>\n\n<p>Is there any way to do django validation message shown in corresponding fields(as like normal django form post validation) with jquery ajax post method. Please anyone advise on, Thnaks.</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":194,"score":4,"question_id":7269475,"title":"What do I need to run Sentry inside my django site","body":"<p>The sentry source code has a <code>wsgi.py</code> which uses some defaults in <code>server.py</code>. My goal is to run sentry as part of my django site. But I am not linking to the <code>wsgi.py</code> in apache2's <code>sites-enabled</code>. Should I copy the contents of <code>server.py</code> into my own <code>settings.py</code> to get it to work ? Currently by not doing anything, the values of the <code>SECRET_KEY</code> and <code>SENTRY_KEY</code> are different. Thus the client is unable to post exceptions to the sentry server.</p>\n"},{"tags":["python","django","wsgi","pyc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13081659,"title":"Is there any benefit to pyc files in a WSGI app where deployments happen several times per week?","body":"<p>Seems like with ever increasing frequency, I am bit by pyc files running outdated code.</p>\n\n<p>This has led to deployment scripts scrubbing *.pyc each time, otherwise deployments don't seem to take effect.</p>\n\n<p>I am wondering, what benefit (if any) is there to pyc files in a long-running WSGI application? So far as I know, the only benefit is improved startup time, but I can't imagine it's that significant--and even if it is, each time new code is deployed you can't really use the old pyc files anyways.</p>\n\n<p>This makes me think that best practice would be to run a WSGI application with the PYTHONDONTWRITEBYTECODE environment variable set.</p>\n\n<p>Am I mistaken?</p>\n"},{"tags":["django","http","nginx"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":10339745,"title":"nginx, django and x_requested_with: request.is_ajax() returns False","body":"<p>I've got this code in my Django view: </p>\n\n<pre><code>if request.is_ajax():\n    if request.method == 'POST':\n        data = json.loads(request.raw_post_data)\n</code></pre>\n\n<p>And I send this request, via CURL:</p>\n\n<pre><code>curl -v -i -H \"Content-Type:application/json\" -H \"X_REQUESTED_WITH:XMLHttpRequest\" -X POST -d '{\"tweet_id\":\"189881044923719680\", \"question_id\":\"1\", \"choice_one\":\"T\", \"choice_two\":\"F\", \"choice_three\":\"F\", \"extra_passback\":\"common cold\"}' http://ec[...].compute-1.amazonaws.com/question/answer/\n</code></pre>\n\n<p>This works when I hit my development Django server. In production I'm running nginx and gunicorn. And the curl statement doesn't work. </p>\n\n<p>request.is_ajax() returns False (is_ajax looks for the x_requested_with header). </p>\n\n<p>I think this must have to do with an NGINX configuration perhaps. But I'm not sure. What do I need to change?</p>\n"},{"tags":["django","django-admin","django-forms"],"answer_count":5,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":1732,"score":7,"question_id":867120,"title":"How to check value transition in Django (django-admin)?","body":"<p>I have a status field which has 3 values: pending, activated\nand rejected. If I am changing the value of status I want to\nhave a check that activated cannot be changed to pending. I\ndo not want to write stored-procs for this. Can I have the\nprevious value in Django before saving?</p>\n\n<p>Means new and old value.</p>\n"},{"tags":["python","django","django-models","django-settings"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":662,"score":1,"question_id":4125859,"title":"How do you fix the following Django Error: \"Type: IOError\" \"Value: [Errno 13] Permission denied\"","body":"<p>I am following a Django Tutorial where you are required to construct some image thumbnails once an image is saved in admin. I am also using Python's tempfile module to save a temporary file name.</p>\n\n<p>However I keep running into the following error:</p>\n\n<pre><code>\"Type: IOError\" \"Value: [Errno 13] Permission denied: 'c:\\\\docume~1\\\\myname\\\\locals~1\\\\temp\\\\somefilename'\"\n</code></pre>\n\n<p>Here is the code I am using</p>\n\n<p>Settings</p>\n\n<pre><code>MEDIA_ROOT = '/home/myname/projectname/media/'\nMEDIA_URL = 'http://127.0.0.1:8000/media/'enter code here\n</code></pre>\n\n<p>models.py</p>\n\n<pre><code>from string import join\nimport os\nfrom PIL import Image as PImage\nfrom settings import MEDIA_ROOT\nfrom os.path import join as pjoin\nfrom tempfile import *\nfrom string import join\nfrom django.db import models\nfrom django.contrib.auth.models import User\nfrom django.contrib import admin\nfrom django.core.files import File\n\nclass Image(models.Model):\n    title = models.CharField(max_length=60, blank=True, null=True)\n    image = models.FileField(upload_to=\"images/\")\n    thumbnail = models.ImageField(upload_to=\"images/\", blank=True, null=True)\n    tags = models.ManyToManyField(Tag, blank=True)\n    albums = models.ManyToManyField(Album, blank=True)\n    created = models.DateTimeField(auto_now_add=True)\n    rating = models.IntegerField(default=50)\n    width = models.IntegerField(blank=True, null=True)\n    height = models.IntegerField(blank=True, null=True)\n    user = models.ForeignKey(User, null=True, blank=True)\n    thumbnail2 = models.ImageField(upload_to=\"images/\", blank=True, null=True)\n\ndef save(self, *args, **kwargs):\n    #Save image dimensions\n    super(Image, self).save(*args, **kwargs)\n    im = PImage.open(pjoin(MEDIA_ROOT, self.image.name))\n    self.width, self.height = im.size\n\n    # large thumbnail\n    fn, ext = os.path.splitext(self.image.name)\n    im.thumbnail((128,128), PImage.ANTIALIAS)\n    thumb_fn = fn + \"-thumb2\" + ext\n    tf2 = NamedTemporaryFile()\n    im.save(tf2.name, \"JPEG\")\n    self.thumbnail2.save(thumb_fn, File(open(tf2.name)), save=False)\n    tf2.close()\n\n    # small thumbnail\n    im.thumbnail((40,40), PImage.ANTIALIAS)\n    thumb_fn = fn + \"-thumb\" + ext\n    tf = NamedTemporaryFile()\n    im.save(tf.name, \"JPEG\")\n    self.thumbnail.save(thumb_fn, File(open(tf.name)), save=False)\n    tf.close()\n\n    super(Image, self).save(*args, **kwargs)\n\ndef size(self):\n    \"\"\"Image size.\"\"\"\n    return \"%s x %s\" % (self.width, self.height)\n\ndef __unicode__(self):\n    return self.image.name\n\ndef tags_(self):\n    lst = [x[1] for x in self.tags.values_list()]\n    return str(join(lst, ', '))\n\ndef albums_(self):\n    lst = [x[1] for x in self.albums.values_list()]\n    return str(join(lst, ', '))\n\ndef thumbnail_(self):\n    return \"\"\"&lt;a href=\"/media/%s\"&gt;&lt;img border=\"0\" alt=\"\" src=\"/media/%s\" /&gt;&lt;/a&gt;\"\"\" % (\n                                                        (self.image.name, self.thumbnail.name))\nthumbnail.allow_tags = Trueenter code here\n</code></pre>\n\n<h1>ADMIN</h1>\n\n<pre><code>class ImageAdmin(admin.ModelAdmin):\n    # search_fields = [\"title\"]\n    list_display = [\"__unicode__\", \"title\", \"user\", \"rating\", \"size\",  \"tags_\",\"albums_\",\n    \"thumbnail\", \"created\"]\nlist_filter = [\"tags\", \"albums\", \"user\"]\n\ndef save_model(self, request, obj, form, change):\n    obj.user = request.user\n    obj.save()\n</code></pre>\n\n<p>I know there are much more effective ways of using image thumbnails in Django however I would like to know why I keep getting this Permission error when thumbnails are used in this manner.</p>\n\n<p>All help is greatly appreciated. Thanks.   </p>\n"},{"tags":["python","django","forms"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13081053,"title":"How can i override the value of form submitted in django","body":"<p>I am saving the form in the view like this</p>\n\n<p><code>form.save()</code></p>\n\n<p>but before that i want to set the datetime field to now.</p>\n\n<p>something like</p>\n\n<p><code>form.timestamp = datetime.now</code></p>\n\n<p>how can i do that</p>\n"},{"tags":["django",".htaccess","django-urls"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13080501,"title":"Overwrite the url in .htaccess file for django","body":"<p>I want to change the structure of the displayed client-side URL. I'm not too skilled using regex and coding for the .htaccess file. Basically, I have a structure that looks something like:</p>\n\n<pre><code>www.abc.com/login/?lang=es\n</code></pre>\n\n<p>I would like this to be displayed in the address bar as:</p>\n\n<p><code>www.abc.com/login/es</code></p>\n\n<p>So please tell me how i can overwrite the existing url in my .htaccess file.</p>\n\n<p>Thanks</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>My directory listing</p>\n\n<p>`</p>\n\n<blockquote>\n  <p>myproject</p>\n</blockquote>\n\n<p>------------- >my application</p>\n\n<p>------------- >settings/url directory</p>\n\n<blockquote>\n  <p>media<br>\n  templates`</p>\n</blockquote>\n"},{"tags":["python","django"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2925,"score":2,"question_id":7052578,"title":"Django attribute error. 'module' object has no attribute 'rindex'","body":"<p>I've just started using django, only on chapter 3 of the online book.</p>\n\n<p>I keep on getting this weird error when I try and access the site.</p>\n\n<p>AttributeError at /test/\n'module' object has no attribute 'rindex'</p>\n\n<p>my urls.py is just</p>\n\n<pre><code>from django.conf.urls.defaults import *\nfrom mysite import hello\n# Uncomment the next two lines to enable the admin:\n# from django.contrib import admin\n# admin.autodiscover()\n\nurlpatterns = patterns('',\n      ('^test/$',hello),\n)\n</code></pre>\n\n<p>and my hello function is in mysite.\nPython path is </p>\n\n<pre><code>['/home/james/django/mysite', '/usr/lib/python2.6', '/usr/lib/python2.6/plat-linux2', '/usr/lib/python2.6/lib-tk', '/usr/lib/python2.6/lib-old', '/usr/lib/python2.6/lib-dynload', '/usr/local/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages/PIL', '/usr/lib/pymodules/python2.6', '/usr/lib/python2.6/dist-packages/gtk-2.0', '/usr/lib/pymodules/python2.6/gtk-2.0', '/home/james/django']\n</code></pre>\n\n<p>I don't really understand whats going on here. I'm assuming I'm overlooking something stupid, because it seems so straightforward. When I do from mysite import hello in the python interpreter, it doesn't raise any errors.</p>\n\n<p>any help would  be great</p>\n\n<p>edit:\ntraceback</p>\n\n<pre><code>Environment:\n\nRequest Method: GET\nRequest URL: http://127.0.0.1:8000/test/\nDjango Version: 1.2.3\nPython Version: 2.6.6\nInstalled Applications:\n['django.contrib.auth',\n 'django.co\n ntrib.contenttypes',\n     'django.contrib.sessions',\n     'django.contrib.sites',\n     'django.contrib.messages']\n    Installed Middleware:\n    ('django.middleware.common.CommonMiddleware',\n     'django.contrib.sessions.middleware.SessionMiddleware',\n     'django.middleware.csrf.CsrfViewMiddleware',\n     'django.contrib.auth.middleware.AuthenticationMiddleware',\n     'django.contrib.messages.middleware.MessageMiddleware')\n\n\nTraceback:\nFile \"/usr/lib/pymodules/python2.6/django/core/handlers/base.py\" in get_response\n  91.                         request.path_info)\nFile \"/usr/lib/pymodules/python2.6/django/core/urlresolvers.py\" in resolve\n  217.                     sub_match = pattern.resolve(new_path)\nFile \"/usr/lib/pymodules/python2.6/django/core/urlresolvers.py\" in resolve\n  123.             return self.callback, args, kwargs\nFile \"/usr/lib/pymodules/python2.6/django/core/urlresolvers.py\" in _get_callback\n  134.             mod_name, func_name = get_mod_func(self._callback_str)\nFile \"/usr/lib/pymodules/python2.6/django/core/urlresolvers.py\" in get_mod_func\n  78.         dot = callback.rindex('.')\n\nException Type: AttributeError at /test/\nException Value: 'module' object has no attribute 'rindex'\n</code></pre>\n\n<p>hello function is</p>\n\n<pre><code>from django.http import HttpResponse\n\ndef hello(request):\n    return HttpResponse(\"Hello world\")\n</code></pre>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13080630,"title":"Changes to DJANGO files not being applied to site?","body":"<p>So I'm editing .py files in the Django framework, however, they aren't being applied to the site</p>\n\n<p>Any help</p>\n"},{"tags":["javascript","django","requirejs","django-staticfiles","r.js"],"answer_count":0,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13079886,"title":"How to use require.js for managing JavaScript dependencies in a Django project?","body":"<p>I use <a href=\"http://requirejs.org/\" rel=\"nofollow\">RequireJS</a> for managing dependencies between my JavaScript libraries and modules. The backend is written in Django. Django has many <a href=\"http://www.djangopackages.com/grids/g/asset-managers/\" rel=\"nofollow\">apps for managing static assets</a>, but none of them talk about incorporating the <a href=\"https://github.com/jrburke/r.js\" rel=\"nofollow\">r.js compiler</a>.</p>\n\n<p><strong>What's the best way to manage and compile my JS files using r.js in Django?</strong></p>\n\n<p>My requirements are:</p>\n\n<ol>\n<li>Versioned output file to get around caching when the file is updated.</li>\n<li>Automatically use uncompiled JS file when <code>DEBUG = True</code> in <code>settings.py</code> for Django, and the compiled file when <code>Debug = False</code>.</li>\n<li>Some of the libraries will be loaded from CDN (such jquery) with a local fallback.</li>\n</ol>\n\n<p>Any suggestions will be much appreciated.</p>\n"},{"tags":["django","django-settings","django-staticfiles","django-static"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13059810,"title":"Django Collectstatic command Changed something","body":"<p>So I've never deployed a Django app and I'm trying to get up to speed on the whole thing. I ran the collectstatic command and now non of my static files will render. When I run the findstatic command I receive an exception that says:</p>\n\n<pre><code>django.core.exceptions.ImproperlyConfigured: The storage backend of the staticfiles finder     &lt;class 'django.contrib.staticfiles.finders.DefaultStorageFinder'&gt; doesn't have a valid location.\n</code></pre>\n\n<p>My template renders just find but I can't seem to figure out why the css file is not being found. Highlight from my settings module:</p>\n\n<pre><code>settings/\n    base.py\n    devel.py\n    prod.py\n</code></pre>\n\n<p>base.py</p>\n\n<pre><code>cwd = os.path.dirname(os.path.abspath(__file__)) \nPROJECT_ROOT = cwd[:-9] # chop off \"settings/\"\n\nSTATICFILES_FINDERS = [\n'django.contrib.staticfiles.finders.FileSystemFinder',\n'django.contrib.staticfiles.finders.AppDirectoriesFinder',\n'django.contrib.staticfiles.finders.DefaultStorageFinder',\n]\n\nTEMPLATE_LOADERS = [\n'django.template.loaders.filesystem.Loader',\n'django.template.loaders.app_directories.Loader',\n'django.template.loaders.eggs.Loader',\n]\n\nTEMPLATE_DIRS = [\nos.path.join(PROJECT_ROOT, \"templates\"),\n]\n</code></pre>\n\n<p>devl.py</p>\n\n<pre><code>STATIC_URL = \"/site_media/static/\"\n\nSTATICFILES_DIRS = [\n    os.path.join(PROJECT_ROOT, \"site_media\", \"static\"),\n]\n\nSTATIC_ROOT = os.path.join(PROJECT_ROOT, \"site_media\", \"static\")\n</code></pre>\n\n<p>site_base.html</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" href=\"{{ STATIC_URL }}css/site_base.css\" /&gt;\n</code></pre>\n\n<p>Would appreciate your help because Im stumped. </p>\n"},{"tags":["django","heroku"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":710,"score":4,"question_id":8924841,"title":"Django not running on heroku","body":"<p>Followed the \"Getting started with Django on heroku/ceadar\" guide to the letter and FINALLY managed to sort out some issues on app deployment</p>\n\n<pre><code>Successfully installed django psycopg2\n Cleaning up...\n Discovering process types\n Procfile declares types -&gt; (none)\n Compiled slug size is 8.0MB\n Launching... done, v4\n http://&lt;watever&gt;.herokuapp.com deployed to Heroku\n</code></pre>\n\n<p>and the guide says the webserver should be up. but heroku ps shows no processes, and obviously the page doesnt load.</p>\n\n<p>tail of the heroku log:</p>\n\n<pre><code>2012-01-19T10:28:29+00:00 heroku[web.1]: State changed from created to down\n2012-01-19T10:28:30+00:00 heroku[web.1]: State changed from down to created\n2012-01-19T10:28:32+00:00 heroku[slugc]: Slug compilation finished\n2012-01-19T10:30:32+00:00 heroku[router]: Error H99 (Platform error) -&gt; GET &lt;watever&gt;\n.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=\n\n\n(venv) C:\\Python27\\facebook\\venv\\myapp&gt;heroku ps\nProcess  State  Command\n-------  -----  -------\n</code></pre>\n\n<p>should I be starting the webserver explicitly? wat am I doing wrong?</p>\n"},{"tags":["django","django-formwizard"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":183,"score":0,"question_id":10801865,"title":"Modify form fields in FormWizard (Django 1.4)","body":"<p>Consider the following classes:</p>\n\n<p>models.py:</p>\n\n<pre><code>class Data(models.Model):\n    first_name = models.CharField()\n    checkbox_1 = models.BooleanField()\n    checkbox_2 = models.BooleanField()\n</code></pre>\n\n<p>forms.py:</p>\n\n<pre><code>class Form1(ModelForm):\n    class Meta:\n        model = Data\n        fields = ('first_name', 'checkbox_1',)\n\nclass Form2(ModelForm):\n    class Meta:\n        model = Data\n        fields = ('checkbox_2',)\n</code></pre>\n\n<p><code>Form1</code> is used in step 1 and <code>Form2</code> is used in step 2 of a <code>SessionWizardView</code>.</p>\n\n<p>How could I disable <code>Form2.checkbox_2</code> in step 2 if the user checked <code>Form2.checkbox_1</code> in step 1?</p>\n\n<p>I tried to accomplish this by overriding <code>get_form()</code> without success:</p>\n\n<pre><code>def get_form(self, step=None, data=None, files=None):\n    form = super(MyWizard, self).get_form(step, data, files)\n    if step == '1':\n        form.fields['checkbox_2'].widget.attrs['disabled'] = 'disabled'\n    return form\n</code></pre>\n\n<p>Please note that I intentionally did not check the value of <code>Form2.checkbox_1</code>. I tried to set the widget's attributes in any case.</p>\n"},{"tags":["django","django-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13078885,"title":"Django assertEquals() test failing even though answer is equal","body":"<p>I have a function:</p>\n\n<pre><code>from django.contrib.gis.measure import Distance, D\n\ndef RunLengthCalc(mod_ewdim, mod_ewspacing, cols):\n    y = D(inch=mod_ewspacing)  # user input\n    x = D(inch=mod_ewdim)  # user input\n    z = D(inch=3)  # constant\n    lrun = ((x * cols) + (y * (cols - 1))) + zrun\n    return lrun\n</code></pre>\n\n<p>and my test:</p>\n\n<pre><code>def test_run_length_calculation(self):\n    l = RunLengthCalc(26.5, 1, 25)\n    self.assertEquals(l, D(inch=689.5))\n</code></pre>\n\n<p>but when I run the test I get this very confusing error:</p>\n\n<pre><code>AssertionError: Distance(inch=689.5) != Distance(inch=689.5)\n</code></pre>\n\n<p>I can't work out what the problem is here.</p>\n\n<p>Any help would be much appreciated.</p>\n"},{"tags":["django","image","split","example"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":13,"score":-1,"question_id":13079026,"title":"Need example for django load and split image","body":"<p>can anyone provide me some code examples of loading image and slice it on a parts with ability to chose one of them on django.\nI  already uploading image but i cant split it and edit</p>\n"},{"tags":["django","internationalization","translation","pluralize"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13077949,"title":"Weird behavior of Django translation of one word in plural and singular form","body":"<p>In our code, we have the word \"Photo\" marked for translation in singular. At a different position in the code, we have this word in pluralized translation \"Photo\" / \"Photos\", liek so:</p>\n\n<pre><code>1 {% trans 'Photo' %}\n2 {% trans 'Photos' %}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>{{ x }} {% blocktrans count counter=x %}Photo{% plural %}Photos{% endblocktrans %}\n</code></pre>\n\n<p>Possibly, we must use our counter variable x <em>inside</em> the translation strings. However, I couldn't find anything about such requirement in the docs. Anyway, with our code, all we get in our PO files is:</p>\n\n<pre><code>msgid \"Photos\"\nmsgstr \"\"\n\nmsgid \"Photo\"\nmsgid_plural \"Photos\"\nmsgstr[0] \"\"\nmsgstr[1] \"\"\n</code></pre>\n\n<p>There is no msgid for \"Photo\", resulting in \"Photo\" not being translated at all, since the actual translation string does not exist - except when used in *<em>n</em>*gettext, but not in {% trans 'Photo' %}.</p>\n\n<p>Am I doing something wrong here? Is it a Django bug?</p>\n"},{"tags":["django","session-variables"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13078575,"title":"Django - Weird behaviour of sessions variables with Apache","body":"<p>In a <strong>Menu</strong> class with <strong>Section</strong> children, each <strong>Section</strong> has an <em>available</em> attribute. This attribute is initialized during the instance creation. The process of getting the availability is not trivial, so I stock a <strong>Menu</strong> instance for each user in a session variable.</p>\n\n<p>With the Django embedded webserver this works well. But when I deploy the application on an Apache webserver I can observe a very weird behavior. Once authentified, a click on a link or a refreshment of the page and the availability of each <strong>Section</strong> seems to be forgotten (empty menu but in the log file I can see that all <strong>Sections</strong> are here) then a new refresh on the page the availability is back, a new refresh the menu disappears once again, etc. There is no cache activated on the web server.</p>\n\n<p>The menu is initialized in a context processor.</p>\n\n<pre><code>def get_base_context(request):                                                    \n    if 'MENU' not in request.session or \\                                         \n       not request.session['MENU'].childs or\\                                     \n       request.session['MENU'].user != request.user:                              \n        _menu = Menu(request.user)                                                \n        _menu.init()                                                              \n        request.session['MENU'] = _menu\n    (...)\n</code></pre>\n\n<p>I have no idea what could cause such a behavior. Any clue?</p>\n"},{"tags":["python","django","unit-testing","testing","mocking"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":67,"score":5,"question_id":13073281,"title":"How to mock python's datetime.now() in a class method for unit testing?","body":"<p>I'm trying to write tests for a class that has methods like:</p>\n\n<pre><code>import datetime\nimport pytz\n\nclass MyClass:\n    def get_now(self, timezone):\n        return datetime.datetime.now(timezone)\n\n    def do_many_things(self, tz_string='Europe/London'):\n        tz = pytz.timezone(tz_string)\n        localtime_now = self.get_now(tz)\n        ...\n        return things\n</code></pre>\n\n<p>I want to test it, and to do so I need to make sure that the <code>datetime.datetime.now()</code> call returns something predictable.</p>\n\n<p>I've been reading lots of examples of using <a href=\"http://www.voidspace.org.uk/python/mock/\">Mock</a> in tests, but haven't found anything quite like what I need, and I can't work out how to use it in my tests.</p>\n\n<p>I separated the <code>get_now()</code> method out in case it's easier to mock that, instead of <code>datetime.datetime.now()</code>, but I'm still stumped. Any thoughts on how to write UnitTests for this using Mock? (This is all in Django, fwiw; I'm not sure if this makes a difference in this case.)</p>\n"},{"tags":["django","django-models"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13076822,"title":"django dynamically filtering with q objects","body":"<p>I'm trying to query a database based on user input tags. The number of tags can be from 0-5, so I need to create the query dynamically.</p>\n\n<p>So I have a tag list, tag_list, and I want to query the database:</p>\n\n<pre><code>design_list = Design.objects.filter(Q(tags__tag__contains = \"tag1\") and Q(tags__tag__contains = \"tag2\") and etc. etc. )\n</code></pre>\n\n<p>How can I create this feature?</p>\n"},{"tags":["django","json","django-serializer"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13073470,"title":"Django deep serialization - follow reverse foreign key constraints","body":"<p>I have two models with a foreign key relationship:</p>\n\n<pre><code>class Company(models.Model):\n    field 1\n    field 2\n\nclass Employee(models.Model):\n    company = Model.ForeignKey('Company')\n    field 3\n    field 4\n</code></pre>\n\n<p>I would like to JSON serialize a company instance, and include all employees that have foreign-key relationships to it. IE, I'd like to create JSON that looks something like the following, in that it includes all fields for a company and all fields for all related employees.</p>\n\n<pre><code>[\n{\n    \"pk\": 2,\n    \"model\": \"app.company\",\n    \"fields\": {\n        \"field1\": \"value\",\n        \"field2\": \"value\",\n        \"employee\": [\n            {\n                \"pk\": 19,\n                \"model\": \"app.employee\",\n                \"fields\": {\n                    \"field3\": \"value\",\n                    \"field4\": \"value\",\n                }\n            },\n            {\n                \"pk\": 25,\n                \"model\": \"app.employee\",\n                \"fields\": {\n                    \"field3\": \"value\",\n                    \"field4\": \"value\",\n                }\n            }\n        ]\n    }\n}\n]\n</code></pre>\n\n<p>The Django serializer doesn't serialize relationships. Other questions here have asked how to deep serialize, but in the opposite direction -- IE, serialize an employee along with its related company. Answers to these questions have pointed out that the wadofstuff django-full-serializer plugin allows you to do this kind of deep serialization. The problem is that the wadofstuff plugin only follows these relationships unidirectionally -- it won't follow a reverse foreign key constraint. So, I'm trying to roll my own here. Any suggestions on how to accomplish this?</p>\n"},{"tags":["django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13076271,"title":"Is Django's Session model usable with memcached sessions?","body":"<p>Recently we switched to memcached sessions from django's default DB sessions.</p>\n\n<p>We've been using the contrib session model to remove session based on a session_key: <a href=\"https://github.com/django/django/blob/master/django/contrib/sessions/models.py\" rel=\"nofollow\">https://github.com/django/django/blob/master/django/contrib/sessions/models.py</a></p>\n\n<pre><code>Session.objects.get(session_key=key).delete()\n</code></pre>\n\n<p>Once we switched to memcached sessions the above query raises a DoesNotExist exception.</p>\n\n<p>Is Django's Session model usable with memcached sessions? If so, what is the solution?</p>\n"},{"tags":["django","django-models","django-forms","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13075619,"title":"django model form, restrict choices based on value in ForeignKey model","body":"<p>I have two models: League and Team. Team has a foreign key link to League. I want to be able to set choices available for the Team based on values stored in League. Specifically:</p>\n\n<pre><code>class League(models.Model):\n    number_of_teams = models.IntegerField()\n\nclass Team(models.Model):\n    league = models.ForeignKey(League)\n    draft_slot = models.IntegerField(choices=[(i+1,i+1) for i in range(?????????)])\n</code></pre>\n\n<p>I recognize I cannot accurately define my draft_slot.choices in the Team model. So I would expect to set up Team like so:</p>\n\n<pre><code>class Team(models.Model):\n    league = models.ForeignKey(League)\n    draft_slot = models.IntegerField()\n</code></pre>\n\n<p>I have set up a ModelForm of Team:</p>\n\n<pre><code>class TeamModelForm(ModelForm):\n    class Meta:\n        model = Team\n</code></pre>\n\n<p>And a view of the Team ModelForm:</p>\n\n<pre><code>def SetupTeam(request, fanatic_slug=None, league_slug=None):\n    league = League.objects.get(slug=league_slug)\n    form = TeamModelForm()\n    return render_to_response('league/addteam.html', {\n        'form': form\n    }, context_instance = RequestContext(request))\n</code></pre>\n\n<p>What foo do I need in order to use league.id, league.number_of_teams so the view of TeamModelForm prepopulates team.league and also renders a field to represent team.draft_slot to look like</p>\n\n<pre><code>draft_slot = models.IntegerField(choices=[(i+1,i+1) for i in range(league.number_of_teams+1)])\n</code></pre>\n"},{"tags":["javascript","jquery","django"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":13073298,"title":"Jquery post in Django","body":"<p>I'm new with django and jquery, and I try to implement a very simple $post request.</p>\n\n<p>Here is what I did:</p>\n\n<p>my js:</p>\n\n<pre><code> $.post(/mysite/blabla/, { \n score : 40\n });\n</code></pre>\n\n<p>my views:</p>\n\n<pre><code> def blabla(request):\n    score_user = 20\n    if request.method == 'POST':\n       score_user = request.POST['score']\n</code></pre>\n\n<p>The console does not indicate any error for the post request. The thing is that when I render \"score_user\", I always get 20, when I expect to get 40.</p>\n\n<p>Any help would be welcome. Thanks</p>\n\n<p>EDIT:</p>\n\n<p>my model:</p>\n\n<pre><code> class UserProfile(FacebookProfileModel):\n      user = models.OneToOneField(User)\n      comment = models.BooleanField()\n      score = models.IntegerField(null=True, default=0)\n</code></pre>\n"},{"tags":["jquery","ajax","django","web-services","rest"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13075192,"title":"How to send contact form from a pure HTML/JS website to a external webservice in a Django Project?","body":"<p>I have a website with html5/javascript/css3 and I must send the contact form values to a web service in an external webservice located in a django project(with piston/rest). I have loaded the Json with the values into a Jquery/Ajax and sent to a Javascript function into the Django Project. This is the Js in the Form website:</p>\n\n<pre><code>var json = \"{\\\"nome\\\": \"+nome\n    +\", \\\"empresa\\\": \"+empresa\n    +\", \\\"email\\\": \"+email\n    +\", \\\"telefone\\\": \"+telefone\n    +\", \\\"assunto\\\": \"+assunto\n    +\", \\\"mensagem\\\": \"+mensagem\n    +\"}\";\ntry{\n    ws(\"http://127.0.0.1:8000/ws/wsname/\", json,\"POST\",\"\",\"\", \"alert(ws_returned_info)\", \"\");\n}catch(erros){\n    alert(erros.message);\n}\n</code></pre>\n\n<p>and the ws function in the Django Project works fine when it called from the self project, but in the catch it alerts \"responseText is undefined\"</p>\n\n<pre><code>function ws( p_url, p_json, p_type, p_auth, p_before, p_success, p_finally ){\n    var resposta = true;\n    preLoader.show();\n\n    dict = { url: p_url,\n             beforeSend: function(request){\n                            request.setRequestHeader('Authorization', \"*\" );\n                            request.setRequestHeader('Access-Control-Allow-Origin', '*' );\n                            eval(p_before);\n                         },\n             cache: false,\n             type: p_type,\n             data: p_json,\n             async: false,\n             contentType: 'application/json; charset=utf-8',\n             processData: false,\n             dataType: 'json',\n             success: function(json, textStatus){\n                        eval(p_success);\n                      },\n             error: function(XMLHttpRequest, textStatus, errorThrown){\n                        erros(XMLHttpRequest.responseText);\n                        resposta = false;\n                      }\n            };\n\n    $.ajax(dict);\n\n    preLoader.fadeOut(\"fast\");\n    eval(p_finally);\n\n    return resposta;\n};\n</code></pre>\n"},{"tags":["python","mysql","django","django-admin"],"answer_count":4,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":427,"score":0,"question_id":5637736,"title":"django admin crashes when trying to update record but not when inserting a new one","body":"<p>I'm having a weird problem:</p>\n\n<p>technical info for developemnt (production will be on linux/apache/Mysql)\nmacosx 2.6.6\npython 2.6.1\ndjango 1.3\nmysql 5.1\nand MySQLdb to connect the python to the MySQL...</p>\n\n<p>I'm new at django as every one can see from past questions...but need to get really strong at it, really fast...the problem is that it is really not that smooth for me...</p>\n\n<p>OK, for the question. I'm doing the django tutorial (not for fun, i need to learn it really fast because i need to develop a huge system with it).</p>\n\n<p>I did all the the tutorial untill now and at the stage where i added the admin.</p>\n\n<p>When i try to edit the poll record (if any one know the django 1.3 tutrial) the site crashes with the following exception:</p>\n\n<blockquote>\n  <p>Warning at /admin/polls/poll/2/\n  Incorrect string value: '\\xD7\\xA9\\xD7\\x95\\xD7\\xA0...' for column 'change_message' at row 1</p>\n</blockquote>\n\n<p>there is not problem with adding a new record to the same table, just to edit one....</p>\n\n<p>if any one know's any thing about it....</p>\n\n<pre><code># Create your models here.\n</code></pre>\n\n<p>class Poll(models.Model):\n    question = models.CharField(max_length=200)\n    pub_date = models.DateTimeField('date published')</p>\n\n<pre><code>def __unicode__(self):\n    return self.question\n\ndef was_published_today(self):\n    return self.pub_date.date() == datetime.date.today()\n</code></pre>\n\n<p>This is the model, and another this i saw, my MySQL DB is latin1 and not UTF-8...python is unicode....maybe that is the problem....</p>\n\n<p>But still, i can't figure out why i can add records but can't edit them....isn't that the weird part?</p>\n"}]}
{"total":41213,"page":11,"pagesize":100,"questions":[{"tags":["python","django","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":231,"score":0,"question_id":10219743,"title":"Why doesn't my tastypie cache get called?","body":"<p>I'm looking at the <a href=\"http://django-tastypie.readthedocs.org/en/latest/caching.html\" rel=\"nofollow\">tastypie caching docs</a> and trying to set up my own simple caching thing, but the cache doesn't seem to get called.  When I visit <a href=\"http://localhost:8000/api/poll/?format=json\" rel=\"nofollow\">http://localhost:8000/api/poll/?format=json</a>, I get my tastypie generated json, but I don't get the output from the cache class.</p>\n\n<pre><code>from tastypie.resources import ModelResource\nfrom tastypie.cache import NoCache\nfrom .models import Poll\n\n\nclass JSONCache(NoCache):\n    def _load(self):\n        print 'loading cache'\n        data_file = open(settings.TASTYPIE_JSON_CACHE, 'r')\n        return json.load(data_file)\n\n    def _save(self, data):\n        print 'saving to cache'\n        data_file = open(settings.TASTYPIE_JSON_CACHE, 'w')\n        return json.dump(data, data_file)\n\n    def get(self, key):\n        print 'jsoncache.get'\n        data = self._load()\n        return data.get(key, None)\n\n    def set(self, key, value, timeout=60):\n        print 'jsoncache.set'\n        data = self._load()\n        data[key] = value\n        self._save(data)\n\n\nclass PollResource(ModelResource):\n    class Meta:\n        queryset = Poll.objects.all()\n        resource_name = 'poll'\n        cache = JSONCache()\n</code></pre>\n"},{"tags":["jquery","html","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13071770,"title":"Table header on vertical and horizontal","body":"<p>Can anyone help me on how to achieved this output. If it is possible.</p>\n\n<p>I would like to view my header horizontally and vertically. </p>\n\n<p>e.g</p>\n\n<pre><code>        Header 4  Header 5 Header 6 Calendar\nHeader 1    a        b        c        10/10\nHeader 2    d        e        f        11/10\nHeader 3    g        h        i        12/10\n</code></pre>\n\n<p>vertical header is hard coded but horizontal header should be uploaded from the database(which inputted by a user) and I would like the Calendar to be shown at the end of the column. It means that if let says a user did enter 5 input and it shown in the horizontal header and the Calender should be shown on the 7th column.</p>\n\n<p>Here are my html</p>\n\n<pre><code>{% if solutions%}\n&lt;div id =\"person_table\"&gt;\n&lt;form action=\"{% url Solution_view person_NOID %}\" method=\"post\"&gt;\n{% csrf_token %}\n&lt;table border=\"1\" id=\"thetable\"&gt;\n&lt;thead&gt;\n      &lt;tr&gt;\n      &lt;th&gt;NOID {{ person_NOID }}&lt;/th&gt;\n      &lt;th&gt;SMOKING&lt;/th&gt;\n      &lt;th&gt;WEIGHT&lt;/th&gt;\n      &lt;th&gt;BP&lt;/th&gt;\n      &lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n{% for solution in solutions %}\n\n&lt;tr&gt;\n    &lt;td&gt;{{ solution.NEW_DATE }}&lt;/td&gt;\n    &lt;td&gt;&lt;input type=\"text\" name=\"solution\" id=\"solution{{ forloop.counter }}\" value=\"{{ solution.SMOKING}}\" /&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;input type=\"text\" name=\"solution\" id=\"solution{{ forloop.counter }}\" value=\"{{ solution.WEIGHT}}\" /&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;input type=\"text\" name=\"solution\" id=\"solution{{ forloop.counter }}\" value=\"{{ solution.BP}}\" /&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;input type=\"text\" name=\"solution\" id=\"solution{{ forloop.counter }}\" value=\"{{ solution.BP}}\" /&gt;&lt;/td&gt;\n&lt;/tr&gt;\n{% endfor %}                \n&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;input type=\"submit\" value=\"Save\" /&gt;\n&lt;/form&gt;\n{% else %}\n&lt;p&gt;No Data.&lt;/p&gt;\n{% endif %}\n&lt;/body&gt;\n</code></pre>\n\n<p>I don't know if this can be done. It seems that I can't relate to <a href=\"http://stackoverflow.com/questions/7354906/vertical-and-horizontal-headers-in-a-table?rq=1\">this</a> SO.</p>\n"},{"tags":["python","django","thread-safety","mod-wsgi"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13075702,"title":"Does django + mod_wsgi require threaded programming discipline?","body":"<p>We're rolling out our first django application under mod_wsgi as </p>\n\n<pre><code>`WSGIDaemonProcess our-appname processes=6 threads=15'`\n</code></pre>\n\n<p>and we're having a discussion about whether our Python code and the Redis and Postgres libraries it uses needs to be thread-safe or not.</p>\n\n<p>From what I can tell from reading the mod_wsgi documentation, even though the apache worker is processing requests with multiple <strong>apache</strong> threads, our <strong>python</strong> code is for all intents and purposes single-threaded.  I don't see any warnings on the mod_wsgi docs saying \"Beware!! You now have to worry about Global Data and Thread Safety!\"  but there's also no explicit \"Don't Worry About Threads There Aren't Any\".</p>\n\n<p>We're not doing anything explicitly with threads in our python code, there is no mention of them in anything we've written.</p>\n\n<p>But some people here are of the opinion that since we're running with <code>threads=15</code> that we are now in in the multi-threaded world.</p>\n\n<p>Can anyone clarify what's actually going on here?  Is our Python code now subject to multiple threads of execution through the same data where it wasn't before, or not?</p>\n"},{"tags":["django","filter","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":14,"score":0,"question_id":13076292,"title":"django unable to filter for more than one term","body":"<pre><code>design_list = Design.objects.filter(tags__tag__contains='jewellery')\n</code></pre>\n\n<p>If I add a filter term (below), it returns 'keyword argument repeated'</p>\n\n<pre><code>design_list = Design.objects.filter(tags__tag__contains='jewellery', tags__tag__contains='gadget')\n</code></pre>\n\n<p>How do I add further terms?</p>\n"},{"tags":["django","geoip"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13076259,"title":"How get the \"real\" user ip address?","body":"<p>i tried to get the \"real\" user ip address, it's working, but i'm not getting my own ip (the real one), checking the ip with google map, after convert it to long - lat, google map is showing the location of my ISP.</p>\n\n<pre><code>def get_client_ip(request):\n    x_forwarded_for = request.META.get('HTTP_X_FORWARDED_FOR')\n    if x_forwarded_for:\n        ip = x_forwarded_for.split(',')[0]\n    else:\n        ip = request.META.get('REMOTE_ADDR')\n    return ip\n</code></pre>\n\n<p>What i want to do, is display a map from the exact location from the user sent a article.</p>\n\n<p>Any idea?</p>\n\n<p>Thanks</p>\n"},{"tags":["python","django","geodjango"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":36,"score":3,"question_id":13076048,"title":"return distance objects in Django","body":"<p>I have a small function like so:</p>\n\n<pre><code>from django.contrib.gis.measure import Distance\n\ndef RailTest(mod_ewdim, mod_ewspacing, cols): \n    y = Distance(inch=mod_ewspacing)\n    x = Distance(inch=mod_ewdim)\n    z = Distance(inch=3)\n    l = ( (x*cols)+(y*(cols-1)) )+z\n    return l\n</code></pre>\n\n<p>However when I call the function and I do <code>type(l)</code> it is of type <code>float</code>. How can I ensure I return a distance object.</p>\n\n<p>Any help much appreciated.</p>\n"},{"tags":["python","django","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13075444,"title":"Can't make Django Tastypie create resources with deeply related resources","body":"<p>My models look like:</p>\n\n<pre><code>class LocAddress(models.Model):\n    property_number = models.CharField(max_length=8)\n    street_name = models.CharField(max_length=50)\n    postal_code = models.CharField(max_length=6)\n    city_name = models.CharField(max_length=50)\n\nclass LluOrder(models.Model):\n    # [...]\n    address = models.ForeignKey(LocAddress, db_column='address')\n\nclass OrderItem(models.Model):\n    # [...]\n    llu = models.ForeignKey(LluOrder, db_column='llu', null=True, blank=True)\n</code></pre>\n\n<p>And resources:</p>\n\n<pre><code>class LocAddressResource(ModelResource):\n    class Meta(ModelResource.Meta):\n        queryset = LocAddress.objects.all()\n\n\nclass LluOrderResource(ModelResource):\n    address = fields.ToOneField(LocAddressResource, 'address', full=True)\n\n    class Meta(ModelResource.Meta):\n        queryset = LluOrder.objects.all()\n\n\nclass OrderItemResource(ModelResource):\n    llu = fields.ToOneField(LluOrderResource, 'llu', full=True, null=True)\n\n    class Meta(ModelResource.Meta):\n        queryset = OrderItem.objects.all()\n</code></pre>\n\n<p>When I'm posting following data to `http://localhost:8000/api/v1/orderitem/:</p>\n\n<pre><code>{\n    \"someotherattr\": 12,\n    \"llu\":{\n        \"address\":{\n            \"city_name\":\"Warszawa\",\n            \"postal_code\":\"05-600\",\n            \"property_number\":\"34\",\n            \"street_name\":\"Gr\\u00f3jeckas\"\n        }\n    }\n}\n</code></pre>\n\n<p>I get IntegrityError:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/tastypie/resources.py\", line 192, in wrapper\n    response = callback(request, *args, **kwargs)\n  File \"/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/tastypie/resources.py\", line 397, in dispatch_list\n    return self.dispatch('list', request, **kwargs)\n  File \"/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/tastypie/resources.py\", line 427, in dispatch\n    response = method(request, **kwargs)\n  File \"/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/tastypie/resources.py\", line 1165, in post_list\n    updated_bundle = self.obj_create(bundle, request=request, **self.remove_api_resource_names(kwargs))\n  File \"/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/tastypie/resources.py\", line 1777, in obj_create\n    self.save_related(bundle)\n  File \"/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/tastypie/resources.py\", line 1918, in save_related\n    related_obj.save()\n  File \"/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/django/db/models/base.py\", line 463, in save\n    self.save_base(using=using, force_insert=force_insert, force_update=force_update)\n  File \"/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/django/db/models/base.py\", line 551, in save_base\n    result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)\n  File \"/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/django/db/models/manager.py\", line 203, in _insert\n    return insert_query(self.model, objs, fields, **kwargs)\n  File \"/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/django/db/models/query.py\", line 1576, in insert_query\n    return query.get_compiler(using=using).execute_sql(return_id)\n  File \"/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/django/db/models/sql/compiler.py\", line 917, in execute_sql\n    cursor.execute(sql, params)\n  File \"/Users/mmetelko/.virtualenvs/sor_interface/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py\", line 52, in execute\n    return self.cursor.execute(query, args)\nIntegrityError: null value in column \"address\" violates not-null constraint\n</code></pre>\n\n<p>Am I missing something? What sould I override to make tastypie creating nested <code>LocAddress</code> resource?</p>\n"},{"tags":["python","django","scrapy"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":329,"score":3,"question_id":10564389,"title":"Django custom management command running Scrapy: How to include Scrapy's options?","body":"<p>I want to be able to run the <a href=\"http://scrapy.org/\" rel=\"nofollow\">Scrapy web crawling framework</a> from within Django. Scrapy itself only provides a command line tool <code>scrapy</code> to execute its commands, i.e. the tool was not intentionally written to be called from an external program.</p>\n\n<p>The user <a href=\"http://stackoverflow.com/users/114795/mikhail-korobov\">Mikhail Korobov</a> came up with a <a href=\"http://stackoverflow.com/questions/4271975/access-django-models-inside-of-scrapy/9197627#9197627\">nice solution</a>, namely to call Scrapy from a Django custom management command. For convenience, I repeat his solution here:</p>\n\n<pre><code># -*- coding: utf-8 -*-\n# myapp/management/commands/scrapy.py \n\nfrom __future__ import absolute_import\nfrom django.core.management.base import BaseCommand\n\nclass Command(BaseCommand):\n\n    def run_from_argv(self, argv):\n        self._argv = argv\n        return super(Command, self).run_from_argv(argv)\n\n    def handle(self, *args, **options):\n        from scrapy.cmdline import execute\n        execute(self._argv[1:])\n</code></pre>\n\n<p>Instead of calling e.g. <code>scrapy crawl domain.com</code> I can now do <code>python manage.py scrapy crawl domain.com</code> from within a Django project. However, the options of a Scrapy command are not parsed at all. If I do <code>python manage.py scrapy crawl domain.com -o scraped_data.json -t json</code>, I only get the following response:</p>\n\n<pre><code>Usage: manage.py scrapy [options] \n\nmanage.py: error: no such option: -o\n</code></pre>\n\n<p><strong>So my question is, how to extend the custom management command to adopt Scrapy's command line options?</strong> </p>\n\n<p>Unfortunately, Django's <a href=\"https://docs.djangoproject.com/en/1.4/howto/custom-management-commands/\" rel=\"nofollow\">documentation of this part</a> is not very extensive. I've also read the documentation of Python's <a href=\"http://docs.python.org/library/optparse.html\" rel=\"nofollow\">optparse module</a> but afterwards it was not clearer to me. Can anyone help me in this respect? Thanks a lot in advance!</p>\n"},{"tags":["python","django","django-templates"],"answer_count":13,"favorite_count":19,"up_vote_count":33,"down_vote_count":0,"view_count":19255,"score":33,"question_id":2170228,"title":"Django - Iterate over model instance field names and values in template","body":"<p>I'm trying to create a basic template to display the selected instance's field values, along with their names.  Think of it as just a standard output of the values of that instance in table format, with the field name (verbose_name specifically if specified on the field) in the first column and the value of that field in the second column.</p>\n\n<p>For example, let's say we have the following model definition:</p>\n\n<pre><code>class Client(Model):\n    name = CharField(max_length=150)\n    email = EmailField(max_length=100, verbose_name=\"E-mail\")\n</code></pre>\n\n<p>I would want it to be output in the template like so (assume an instance with the given values):</p>\n\n<pre><code>Field Name      Field Value\n----------      -----------\nName            Wayne Koorts\nE-mail          waynes@email.com\n</code></pre>\n\n<p>What I'm trying to achieve is being able to pass an instance of the model to a template and be able to iterate over it dynamically in the template, something like this:</p>\n\n<pre><code>&lt;table&gt;\n    {% for field in fields %}\n        &lt;tr&gt;\n            &lt;td&gt;{{ field.name }}&lt;/td&gt;\n            &lt;td&gt;{{ field.value }}&lt;/td&gt;\n        &lt;/tr&gt;\n    {% endfor %}\n&lt;/table&gt;\n</code></pre>\n\n<p>Is there a neat, \"Django-approved\" way to do this?  It seems like a very common task, and I will need to do it often for this particular project.</p>\n"},{"tags":["jquery","ajax","django","amazon-s3","css-sprites"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13074745,"title":"Creating Sprite image with items from static folder in AWS","body":"<p>I have a static folder with images in an AWS Server and I need to create (and update) a sprite image every time when I send a Image to the server(via FTP), and save it's positions in JSON to send to a web service. Actually, I load these images with Ajax called with Jquery in a Django Project, who works usually in Internet Explorer and because this, it loads slowly and some imagens dont load always, and the user need to refresh the page. Anyone have a suggestion how to create the sprite?</p>\n"},{"tags":["python","django","typeerror"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":13074331,"title":"TypeError 'x' object has no attribute '__getitem__'","body":"<p>Im getting the error </p>\n\n<blockquote>\n<pre><code>'CampSite' object has no attribute '__getitem__'\n</code></pre>\n</blockquote>\n\n<p>when I save a new CampCon entry in the admin interface.  I have one application called campsites that handles the database of campsites, and I have another application called content that handles reviews. I am very new to Django and this is my first non-tutorial based project.  I have been racking my brain and searching the web for an answer with no luck. Thank you in advance for your help. \nHere is my campsite model:</p>\n\n<pre><code>from django.contrib.gis.db import models\n\nclass CampSite(models.Model):\n    name = models.CharField(max_length=250)\n    showers = models.BooleanField()\n    flush = models.BooleanField()\n    rv = models.BooleanField()\n    lonlat = models.PointField(null=True, blank=True)\n\n    objects = models.GeoManager()\n\n    def __unicode__(self):\n        return self.name\n</code></pre>\n\n<p>Here is the content model:</p>\n\n<pre><code>from django.contrib.gis.db import models\nfrom campsites.models import CampSite\nfrom django.contrib.auth.models import User\nfrom activities.models import Activities\n\n\nclass CampCon(models.Model):\n    campsite = models.ForeignKey(CampSite)\n    trip = models.ForeignKey('Trip')\n    Date = models.DateField()\n    user = models.ForeignKey(User)\n    overall_review = models.TextField()\n    facilities_review = models.IntegerField()\n    things_to_do = models.IntegerField()\n    privacy = models.IntegerField()\n    beauty = models.IntegerField()\n    overall_rating = models.IntegerField()\n\n    def __unicode__(self):\n        return self.campsite\n\nclass ImageDB(models.Model):\n    campsite = models.ForeignKey(CampSite)\n    user = models.ForeignKey(User)\n    description = models.CharField(max_length=200)\n    image = models.ImageField(upload_to='/home/bobby/Pictures/CampThat')\n    date_uploaded = models.DateField()\n    date_taken = models.DateField()\n    trip = models.ForeignKey('Trip')\n    activity = models.ForeignKey(Activities)\n\n    def __unicode__(self):\n        return self.campsite\n\nclass Trip(models.Model):\n    date = models.DateField()\n    description = models.CharField(max_length=100)\n    title = models.CharField(max_length=100)\n    blog = models.TextField()\n\n    def __unicode__(self):\n        return self.title\n\nclass ActivityCon(models.Model):\n    trip = models.ForeignKey(Trip)\n    rating = models.IntegerField()\n    overall_review = models.TextField()\n    activity = models.ForeignKey(Activities)\n</code></pre>\n\n<p>And here is the full Traceback:</p>\n\n<pre><code>    Environment:\n\n\nRequest Method: POST\nRequest URL: http://localhost:8000/admin/content/campcon/add/\n\nDjango Version: 1.5\nPython Version: 2.7.3\nInstalled Applications:\n('django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.sites',\n 'django.contrib.messages',\n 'django.contrib.staticfiles',\n 'campsites',\n 'auth',\n 'trips',\n 'content',\n 'activities',\n 'django.contrib.admin')\nInstalled Middleware:\n('django.middleware.common.CommonMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware')\n\n\nTraceback:\nFile \"/usr/lib/python2.7/site-packages/django/core/handlers/base.py\" in get_response\n  116.                         response = callback(request, *callback_args, **callback_kwargs)\nFile \"/usr/lib/python2.7/site-packages/django/contrib/admin/options.py\" in wrapper\n  367.                 return self.admin_site.admin_view(view)(*args, **kwargs)\nFile \"/usr/lib/python2.7/site-packages/django/utils/decorators.py\" in _wrapped_view\n  91.                     response = view_func(request, *args, **kwargs)\nFile \"/usr/lib/python2.7/site-packages/django/views/decorators/cache.py\" in _wrapped_view_func\n  89.         response = view_func(request, *args, **kwargs)\nFile \"/usr/lib/python2.7/site-packages/django/contrib/admin/sites.py\" in inner\n  202.             return view(request, *args, **kwargs)\nFile \"/usr/lib/python2.7/site-packages/django/utils/decorators.py\" in _wrapper\n  25.             return bound_func(*args, **kwargs)\nFile \"/usr/lib/python2.7/site-packages/django/utils/decorators.py\" in _wrapped_view\n  91.                     response = view_func(request, *args, **kwargs)\nFile \"/usr/lib/python2.7/site-packages/django/utils/decorators.py\" in bound_func\n  21.                 return func(self, *args2, **kwargs2)\nFile \"/usr/lib/python2.7/site-packages/django/db/transaction.py\" in inner\n  208.                 return func(*args, **kwargs)\nFile \"/usr/lib/python2.7/site-packages/django/contrib/admin/options.py\" in add_view\n  958.                 self.log_addition(request, new_object)\nFile \"/usr/lib/python2.7/site-packages/django/contrib/admin/options.py\" in log_addition\n  525.             action_flag     = ADDITION\nFile \"/usr/lib/python2.7/site-packages/django/contrib/admin/models.py\" in log_action\n  18.         e = self.model(None, None, user_id, content_type_id, smart_text(object_id), object_repr[:200], action_flag, change_message)\n\nException Type: TypeError at /admin/content/campcon/add/\nException Value: 'CampSite' object has no attribute '__getitem__'\n</code></pre>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13074147,"title":"Django Models - Foreign Key of different objects types that share a common base class","body":"<p>I have the following conceptual design in mind for one of my models.</p>\n\n<pre><code>class A(models.Model):\n    ...\n\nclass B(A): #Inherits A\n    fieldA = ...\n    fieldB = ...\n\nclass C(A): #Inherits A\n    fieldC = ...\n    fieldD = ...\n\nclass D(models.Model):\n    field = models.ForeignKey(A) #Here lies the problem, should store B or C\n</code></pre>\n\n<p>Given the models above, <strong>I'd like to store a foreign key to either B or C in D but not both</strong>.</p>\n\n<p>I tried setting the Meta class property of A to abstract but that doesn't allow a ForeignKey relationship to A. I <strong>do not</strong> want to ever have an instance of A that isn't B or C, but if necessary, I can restrict this behavior with the save signal.</p>\n\n<p>Is there an easier design that would allow me to store a foreign key from a list of types where all classes inherit from a common base?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13074193,"title":"Differences in Django storage systems","body":"<p>I have a Django application that uses FileSystemStorage for development and S3BotoStorage for staging and production.  Everything is working fine.  There are some small differences between these systems that I have noticed:</p>\n\n<ol>\n<li><p>FileSystemStorage will append the MEDIA_ROOT value to any file it\nsaves.  S3BotoStorage by default will not.</p></li>\n<li><p>If I delete a model instance with a FileField, S3BotoStorage will\ndelete the FileField's file and the directory the file is in if the\nfile is the only file in that directory.  FileSystemStorage will not\ndelete the empty directory.</p></li>\n</ol>\n\n<p>I can work around these differences, but they add conditionals to my code.  The first of these is easiest -- I just initialize the S3BotoStorage class with <code>location=MEDIA_ROOT</code>.  Is there a way to handle the second one in a similar fashion?  Can I configure either storage class' directory deletion behavior?  Should I just override the the FileSystemStorage's delete method?</p>\n"},{"tags":["sql","django"],"answer_count":4,"favorite_count":2,"up_vote_count":11,"down_vote_count":0,"view_count":3381,"score":11,"question_id":4523282,"title":"Django in / not in query","body":"<p>I'm trying to figure out how to write a 'not in' style query in django.\nFor example, the query structure I'm thinking of would look like this.</p>\n\n<pre><code>select table1.* \nfrom table1\nwhere table1.id not in \n(\n  select table2.key_to_table1\n  from table2 \n  where table2.id = some_parm \n)\n</code></pre>\n\n<p>What would the django syntax look like assuming models called table1 and table2?</p>\n"},{"tags":["django","tagging","syncdb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13073446,"title":"Installing django-blog-zinnia","body":"<p>I am going through the docs of <a href=\"http://django-blog-zinnia.com/documentation/getting-started/install/\" rel=\"nofollow\">http://django-blog-zinnia.com/documentation/getting-started/install/</a></p>\n\n<p>and when I syncdb I get this error, tagging is in my installed apps, can someone help me?</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"manage.py\", line 10, in &lt;module&gt;\n    execute_from_command_line(sys.argv)\n  File \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/management/__init__.py\", line 443, in execute_from_command_line\n    utility.execute()\n  File \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/management/__init__.py\", line 382, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/management/base.py\", line 196, in run_from_argv\n    self.execute(*args, **options.__dict__)\n  File \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/management/base.py\", line 231, in execute\n    self.validate()\n  File \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/management/base.py\", line 266, in validate\n    num_errors = get_validation_errors(s, app)\n  File \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/management/validation.py\", line 30, in get_validation_errors\n    for (app_name, error) in get_app_errors().items():\n  File \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/loading.py\", line 158, in get_app_errors\n    self._populate()\n  File \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/loading.py\", line 67, in _populate\n    self.load_app(app_name)\n  File \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/loading.py\", line 88, in load_app\n    models = import_module('.models', app_name)\n  File \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/utils/importlib.py\", line 35, in import_module\n    __import__(name)\n  File \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/django_blog_zinnia-0.12.dev-py2.7.egg/zinnia/models/__init__.py\", line 5, in &lt;module&gt;\n    from zinnia.models.entry import Entry\n  File \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/django_blog_zinnia-0.12.dev-py2.7.egg/zinnia/models/entry.py\", line 22, in &lt;module&gt;\n    from tagging.fields import TagField\n  File \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/tagging-0.2.1-py2.7.egg/tagging/fields.py\", line 10, in &lt;module&gt;\n    from tagging.models import Tag\n  File \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/tagging-0.2.1-py2.7.egg/tagging/models.py\", line 9, in &lt;module&gt;\n    from tagging.managers import TagManager, TaggedItemManager\n  File \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/tagging-0.2.1-py2.7.egg/tagging/managers.py\", line 6, in &lt;module&gt;\n    from django.db.models.query import QuerySet, parse_lookup\nImportError: cannot import name parse_lookup\n</code></pre>\n"},{"tags":["python","django","tastypie"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13073598,"title":"Foreign Key with Tastypie","body":"<p>I have a problem like this : implement an election system of many cities .</p>\n\n<ul>\n<li>Each city has at most 3 candidates</li>\n<li>The city status is :  Election Openning</li>\n</ul>\n\n<p>Here is my Models :</p>\n\n<pre><code>class City(models.Model):\nELECTION_CLOSED = -1\nELECTION_OPENNING = 0\nELECTION_BEGIN = 1\n\nELECTION_STATUSES = (\n        (ELECTION_CLOSED,\"Election closed\"),\n        (ELECTION_OPENNING,\"Election Openning\"),\n        (ELECTION_BEGIN, \"Election Begin\"),\n)\ncity = models.ForeignKey(Location,related_name='location')\npresident = models.ForeignKey(User,related_name='president',default=None,blank=True,null=False)\nelection_status = models.IntegerField(choices=ELECTION_STATUSES,default=ELECTION_OPENNING)\nstart_electing_at = models.DateTimeField(auto_now_add=True)\nstart_president_at = models.DateTimeField(auto_now_add=True)\n\n\nclass Candidate(models.Model):\n    city = models.ForeignKey(Location)\n    candidate = models.ForeignKey(User,related_name='votegame_candidate_id')\n    num_of_votes = models.PositiveIntegerField(default=0)\n</code></pre>\n\n<p>And here is my Resource </p>\n\n<pre><code>class CityResource(ModelResource):\ncity = fields.ToOneField(LocationResource, 'city')\nclass Meta:\n    allowed_methods = ['post','get']\n    queryset = City.objects.all()\n\nclass CandidateResource(ModelResource):\n    city = fields.ToOneField(LocationResource, 'city')\n    candidate = fields.ToOneField(UserResource, 'candidate')\n\nclass Meta:\n    allowed_methods = ['post','get']\n    include_resource_uri = False\n    queryset = Candidate.objects.all()\n    always_return_data = True\n    authentication = BasicAuthentication()\n    authorization= Authorization()\n    filtering = {\"city\": ALL }\ndef obj_create(self, bundle, request=None, **kwargs):\n    city_res = self.city.get_related_resource(self)\n    print city_res.id\n\n**#######I want to check if the City status is \"Election Openning\" here####**\n\n    userbalance,created = Balance.objects.get_or_create(user=request.user)\n    obj = self.obj_get_list(request,city=bundle.data.get(\"city\"))\n**#######I want to check if the number of Candidates in the city is now 3 here ######**\n\n    try:\n        bundle= super(CandidateResource, self).obj_create(bundle, request, user=request.user)\n    except IntegrityError,e:\n        print e\n\n    return bundle\n</code></pre>\n\n<p>See my 2 problem above ? \nI run the POST : </p>\n\n<pre><code>curl --dump-header - -H \"Content-Type: application/json\" -X POST --data '{\"city\" : \"/votegame/v1_votegame/city/123/\"}' http://127.0.0.1:8000/votegame/v1_votegame/candidate/ -u summer:123456\n</code></pre>\n\n<p>Problem 1: </p>\n\n#I want to check if the City status is \"Election Openning\" here\n\n<p>I do :  <code>print city_res.id</code> , and I got  <code>&lt;tastypie.fields.CharField object at 0xb50d7ecc&gt;</code></p>\n\n<p>Problem 2 :</p>\n\n#I want to check if the number of Candidates in the city is now 3 here\n\n<p>I got nothing when <code>print obj</code>\nBut if I change to</p>\n\n<pre><code>obj = self.obj_get_list(request,city=\"123\")\n</code></pre>\n\n<p>I got the list.</p>\n\n<p>Can anyone pls give me some idea.\nThank you very much.</p>\n"},{"tags":["django","permissions","user-permissions","database-permissions","django-permissions"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":115,"score":2,"question_id":10794566,"title":"django-guardian example source code","body":"<p>Can anyone suggest a good open source app that uses django-guardian?  I'm not having trouble understanding the API, but I'd love to see an example to get a feel for implementation best practice (database design, etc.)</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13073031,"title":"Access to the additional information about users","body":"<p>I have read <a href=\"https://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-users\" rel=\"nofollow\">this</a> and I have one question. How to take access to the 'other fields'?</p>\n\n<p><strong>models:</strong></p>\n\n<pre><code>class UsersProfile(models.Model):\n    def __unicode__(self):\n        return self.user.last_name\n    user = models.OneToOneField(User)\n    car_num = models.IntegerField('car ID')\n    captain = models.BooleanField()\n</code></pre>\n\n<p><strong>views:</strong></p>\n\n<pre><code>@login_required\ndef profile(request):\n    return render(request, 'profile.html')\n</code></pre>\n\n<p>So, after authentication, in profile works only <strong>user.last_login</strong> + etc, but not <strong>user.car_num</strong> or <strong>user.captain</strong>. I read about <strong>get_profile()</strong>, but where I need it to write?</p>\n\n<pre><code>profile = request.user.get_profile()\n</code></pre>\n\n<p>If it in views, how to return?</p>\n"},{"tags":["django","url","variables"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13058919,"title":"Django: How do I pass different urls to a generic view?","body":"<p>I'm building an app that is similar to an address book. For one of my views, I have a list of Individuals. Each <code>Individual</code> has a <code>Role</code> which links them to their job title and employer. There are several different types of employers so this is a generic relation.</p>\n\n<p>Using the ListView generic view, I have created a list of individuals that displays their name, their job title and their employer, i.e.</p>\n\n<blockquote>\n  <p>\"Jimmy, Officer, Chase Bank\"</p>\n  \n  <p>\"Mary, CEO, General Hospital\"</p>\n</blockquote>\n\n<p>I need the names of the companies to be links that go to the companies detail page.  </p>\n\n<p><strong>The Problem</strong></p>\n\n<p>Since I have one template for this list, I am having a hard time understanding how to change the url based on what type of employer the individual has i.e. Bank or Hospital. </p>\n\n<p><strong>What Might Work</strong></p>\n\n<ol>\n<li><p>Should I write a function for the view that takes the employer content type and creates a variable? Or should I put the function under the <code>Role</code> model? I am a noob to python/Django and am not sure how to even write this. </p></li>\n<li><p>I attempted to use if/else statements in the template, i.e. if bank, use this url, but it did not work. Probably because it is a generic relation and my query was not right.</p></li>\n</ol>\n\n<p>In response to the comment below:</p>\n\n<p>I'm not sure exactly what you meant by inheritance structures but here are a simplified version of my models;</p>\n\n<pre><code>class Individual(models.Model)\n    name = models.CharField(max_length=30)\n\nclass Bank(models.Model):\n    name = models.CharField(max_length=30)\n    staff = generic.GenericRelation('Role',\n        content_type_field='employer_content_type',\n        object_id_field='employer_id'\n    )\n\n   class Hospital(models.Model):\n    name = models.CharField(max_length=30)\n    staff = generic.GenericRelation('Role',\n        content_type_field='employer_content_type',\n        object_id_field='employer_id'\n    )\n... and so on for each different employer\n\nclass Role(models.Model):\n    title = models.CharField(max_length=70)\n    job_holder = models.ForeignKey(Individual)\n    employer_content_type = models.ForeignKey(ContentType,\n        limit_choices_to={\"model__in\": ('venue', 'festival', 'artsorganization','bookingagent', 'managementcompany', 'mediaoutlet', 'otherorganization', 'presentercompany', 'publishingcompany', 'presenter', 'recordcompany', 'musician', 'ensemble')}, related_name=\"employer\")\n    employer_id = models.PositiveIntegerField()\n    employer = generic.GenericForeignKey('employer_content_type', 'employer_id')\n</code></pre>\n\n<p>At one point I had all employers inheriting from a Company model. I changed it because each employer has different attributes which was making things very complicated. </p>\n\n<p>Thanks!</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13069001,"title":"Managing list of lists in django admin","body":"<p>I am writing a django application, that stores and displays working hours of employees.</p>\n\n<p>The problem is, that for example pediatrists have 2 types of working hours - separate for sick children and healthy ones.</p>\n\n<p>So I thought, it would be cool, to use HTML table to display the hours for each employee. My idea was to have a \"ListField\" representing each row of table, with ForeignKey to employee. That way, admin could create lists like:</p>\n\n<pre><code>['', 'Sick Children', 'Healthy Children'],\n['Monday', '8-12', '12-14'],\n['Friday', '12-15']\n</code></pre>\n\n<p>And it would appear on website, as an HTML table, that would look pretty nice.</p>\n\n<p>The thing is, I would love it to look easy and intuitive for an admin of website. So I would love to keep the table rows as inline of employee in admin panel.\nSo, I have created models:</p>\n\n<pre><code>class TableRow(models.Model):\n    employee = models.ForeignKey(Employee)\n\nclass TableCell(models.Model):\n    content = models.CharField(max_length=20)\n    row = models.ForeignKey(TableRow)\n</code></pre>\n\n<p>And tried stuff like:</p>\n\n<pre><code>class TableCellInline(admin.TabularInline):\n    model = TableCell\n\nclass TableRowInline(admin.TabularInline):\n    model = TableRow\n\nclass EmployeeAdmin(admin.ModelAdmin):\n    inlines = [TableRowInline]\n\nadmin.site.register(Employee, EmployeeAdmin)\nadmin.site.register(TableRow, TableRowAdmin)\n</code></pre>\n\n<p>Which doesn't work (as I expected, but didn't hurt to try). Admin panel shows an option to add table row, when adding/editing employee, but doesn't show any option to add any cell to the row.</p>\n\n<p>Is there any way to allow adding the rows while editing/adding employee? Or maybe a totally different way to solve the problem?</p>\n"},{"tags":["python","django","requests"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13070267,"title":"requests using django session table","body":"<p>I have an application that uses the <a href=\"http://docs.python-requests.org/en/latest/\" rel=\"nofollow\">requests</a> library to make calls to a web service. On django, I use a table to keep sessions using the standard django_session library.</p>\n\n<p>I've noticed that I have a new record in the database for every time the requests library fires off a call. I find this quite bizarre, since I'm not using request sessions (explicitly) and most of my calls are single GET calls that shouldn't need any kind of persistance.</p>\n\n<p>Has anybody else had this problem?</p>\n"},{"tags":["django","forms","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13071623,"title":"django form to contain stackoverflow-style tag input","body":"<p>How would you go about creating a form that contains this type of input? It would need to be able to handle multiple inputs (undefined number), so what sort of field do you use?</p>\n"},{"tags":["jquery","ajax","django","angularjs","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13069828,"title":"Can't POST to Django Tastypie cross-domain XHR","body":"<p>Trying to post to this Django Tastypie API:\n<a href=\"http://lit-hollows-9760.herokuapp.com/api/food\" rel=\"nofollow\">http://lit-hollows-9760.herokuapp.com/api/food</a></p>\n\n<p>I have this middleware installed to allow for cross-domain XHR:\n<a href=\"https://gist.github.com/1369619\" rel=\"nofollow\">https://gist.github.com/1369619</a></p>\n\n<pre><code>    from django import http\n\ntry:\n    from django.conf import settings\n    XS_SHARING_ALLOWED_ORIGINS = settings.XS_SHARING_ALLOWED_ORIGINS\n    XS_SHARING_ALLOWED_METHODS = settings.XS_SHARING_ALLOWED_METHODS\n    XS_SHARING_ALLOWED_HEADERS = settings.XS_SHARING_ALLOWED_HEADERS\n    XS_SHARING_ALLOWED_CREDENTIALS = settings.XS_SHARING_ALLOWED_CREDENTIALS\nexcept AttributeError:\n    XS_SHARING_ALLOWED_ORIGINS = '*'\n    XS_SHARING_ALLOWED_METHODS = ['POST', 'GET', 'OPTIONS', 'PUT', 'DELETE']\n    XS_SHARING_ALLOWED_HEADERS = ['Origin', 'Content-Type', 'Accept']\n    XS_SHARING_ALLOWED_CREDENTIALS = 'true'\n\n\nclass XsSharing(object):\n    \"\"\"\n    This middleware allows cross-domain XHR using the html5 postMessage API.\n\n    Access-Control-Allow-Origin: http://foo.example\n    Access-Control-Allow-Methods: POST, GET, OPTIONS, PUT, DELETE\n\n    Based off https://gist.github.com/426829\n    \"\"\"\n    def process_request(self, request):\n        if 'HTTP_ACCESS_CONTROL_REQUEST_METHOD' in request.META:\n            print request.META\n            response = http.HttpResponse()\n            response['Access-Control-Allow-Origin']  = XS_SHARING_ALLOWED_ORIGINS \n            response['Access-Control-Allow-Methods'] = \",\".join( XS_SHARING_ALLOWED_METHODS ) \n            response['Access-Control-Allow-Headers'] = \",\".join( XS_SHARING_ALLOWED_HEADERS )\n            response['Access-Control-Allow-Credentials'] = XS_SHARING_ALLOWED_CREDENTIALS\n            return response\n\n        return None\n\n    def process_response(self, request, response):\n        #print request.META\n        response['Access-Control-Allow-Origin']  = XS_SHARING_ALLOWED_ORIGINS \n        response['Access-Control-Allow-Methods'] = \",\".join( XS_SHARING_ALLOWED_METHODS )\n        response['Access-Control-Allow-Headers'] = \",\".join( XS_SHARING_ALLOWED_HEADERS )\n        response['Access-Control-Allow-Credentials'] = XS_SHARING_ALLOWED_CREDENTIALS\n        #print response\n        return response\n</code></pre>\n\n<p>I can use JSONP to retrieve GET requests but I can't work out how to get POST to work. I just a 301 and nothing further.</p>\n\n<pre><code>\"OPTIONS /api/food HTTP/1.1\" 301 0\n</code></pre>\n\n<p>Demo: <a href=\"http://jsfiddle.net/rob_balfre/vgrJD/\" rel=\"nofollow\">http://jsfiddle.net/rob_balfre/vgrJD/</a></p>\n\n<p>This is how I'm calling POST with jQuery:</p>\n\n<pre><code>$.ajax({\n  type: 'POST',\n  url: 'http://lit-hollows-9760.herokuapp.com/api/food',\n  data: '{\"name\": \"Tapas\"}',\n  success: console.log('jquery worked'),\n  dataType: \"application/json\",\n  processData:  false,\n  contentType: \"application/json\"\n});\n</code></pre>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13071199,"title":"Django wrong behaviour on query relations","body":"<p>lately I found a weird behavior in Django. Then, I start thinking that what's wrong is the way I'm doing the work.</p>\n\n<p>Lets assume that we have 2 models</p>\n\n<pre><code>class A(models.Model):\n    attr1 = models.CharField()\n...\n\nclass B(models.Model):\n    a = models.ForeignKey(\"A\",\n        related_name = \"bs\"\n        blank = True,\n        null = True)\n</code></pre>\n\n<p>So, if I have some items of B, without associations to A, say b1, b2, b3, when I set a new instance of A, say a1, if I query</p>\n\n<pre><code>a.bs.all()\nb1, b2 and b3 are returned.\n</code></pre>\n\n<p>What's wrong with it? When I create a new instance, it should not rise any relation. I know that b1,b2 and b3 have no relations, but they can't be associated by default to any new instance.</p>\n\n<p>Anyone know how to proceed in a Django way?</p>\n\n<p>I know I can do the trick \n    if a1.id:\n      return []\n    else:\n      a1.bs.all()</p>\n\n<p>But I think that's not the right way to do this.</p>\n\n<p>Can anyone help me?</p>\n\n<p>Thank you in advance</p>\n"},{"tags":["django","python-2.7","e-commerce"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13071198,"title":"ExpatError+ mismatched tag+expatbuilder.py","body":"<p>I am trying to work through Beginning Django e-commerce by Jim McGaw. While working through Chapter-5 , after introducing the google-checkout option I am facing the following error. Can anyone give me some suggestions/possible solutions?</p>\n\n<p>The code snippets is as follows,</p>\n\n<pre>\n\n$ \n\n    def get_checkout_url(request):\n        redirect_url =''\n        req = _create_google_checkout_request(request)\n        try:\n            response_xml = urlopen(req).read()\n        except HTTPError, err:\n            raise err\n        except URLError, err:\n            raise err\n        else:\n            redirect_url = _parse_google_checkout_response(response_xml)\n        return redirect_url\n\n\n    $ def _parse_google_checkout_response(response_xml):\n        redirect_url = \"\"\n        print response_xml\n        xml_doc = minidom.parseString(response_xml)  # -- Breaks here --\n    #   xml_doc = minidom.parse(response_xml)\n        root = xml_doc.documentElement\n        node = root.childNodes[1]\n        if node.tagName == 'redirect-url':\n            redirect_url = node.firstChild.data\n        if node.tagName == 'error-message':\n            raise RuntimeError(node.firstChild.data)\n        return redirect_url\n\n</pre>\n\n<p>The Error Log is as follows:</p>\n\n<pre>\n\n**Environment:**\n\nDjango Version: 1.4.1\nPython Version: 2.7.1\n\n\nTraceback:\nFile \"/Users/username/work/pythonwork/djtrunk/django/core/handlers/base.py\" in get_response\n  111.                         response = callback(request, *callback_args, **callback_kwargs)\nFile \"/Users/username/work/pythonwork/ecomstore/cart/views.py\" in show_cart\n  19.             checkout_url = checkout.get_checkout_url(request)\nFile \"/Users/username/work/pythonwork/ecomstore/checkout/checkout.py\" in get_checkout_url\n  6.     return google_checkout.get_checkout_url(request)\nFile \"/Users/username/work/pythonwork/ecomstore/checkout/google_checkout.py\" in get_checkout_url\n  27.         redirect_url = _parse_google_checkout_response(response_xml)\nFile \"/Users/username/work/pythonwork/ecomstore/checkout/google_checkout.py\" in _parse_google_checkout_response\n  46.     xml_doc = minidom.parseString(response_xml)\nFile \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/dom/minidom.py\" in parseString\n  1924.         return expatbuilder.parseString(string)\nFile \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/dom/expatbuilder.py\" in parseString\n  940.     return builder.parseString(string)\nFile \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/dom/expatbuilder.py\" in parseString\n  223.             parser.Parse(string, True)\n\nException Type: ExpatError at /cart/\nException Value: mismatched tag: line 1460, column 4\n\n</pre>\n"},{"tags":["django","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13069978,"title":"django - don't see my_error value in html","body":"<p>It's look like a stupid error, but I don't see it(( I can't see my_error value in template.</p>\n\n<p>Here is my views.py</p>\n\n<pre><code>def tasks(request, my_error=''):\n    print my_error.encode('utf8')\n    user = request.user.username\n    try:\n        fio = Worker.objects.get(login=user)\n    except Worker.DoesNotExist:\n        fio = 'Нет такого пользователя'\n    if user not in admins:\n        tasks = Task.objects.filter(worker=fio)\n    else:\n        tasks = Task.objects.filter()\n    # here I can still see value of my_error\n    print my_error.encode('utf8')\n    return render_to_response('tasks.html',{'user':user,'fio':fio,'tasks':tasks, 'my_error':my_error})\n</code></pre>\n\n<p>My template:</p>\n\n<pre><code>{% extends \"base.html\" %}\n{% block title %}\nСписок тикетов\n{% endblock %}\n{% block style %}\n&lt;meta http-equiv=\"refresh\" content=\"60\"&gt;\n{% endblock %}\n{% block content %}\n    Привет, {{ fio.fio }}\n&lt;br /&gt;\n\n{# {% if my_error %} #}\n&lt;h1&gt;{{my_error}}&lt;/h1&gt;\n{# {% endif %} #}\n\n&lt;ol&gt;\n    {% for task in tasks %}\n        &lt;li&gt;&lt;a href=\"../task/{{task.id}}\"&gt;{{task.name}}&lt;a&gt;&lt;/li&gt;\n    {% endfor %}\n&lt;/ol&gt;\n&lt;a href=\"/new_ticket/\"&gt;Добавить задачу&lt;/a&gt; &lt;br /&gt;\n\n{% endblock %}\n</code></pre>\n\n<p>Here I call tasks() with my_error:</p>\n\n<pre><code>tasks(request, my_error=u'Такой задачи нет. Возможно она была уже удалена')\n</code></pre>\n\n<p>But, if I use</p>\n\n<pre><code>return render_to_response('tasks.html',{'user':user,'fio':fio,'tasks':tasks, 'my_error':'my_error'})\n</code></pre>\n\n<p>I see in html <h1>my_error</h1>. What's wrong?</p>\n"},{"tags":["javascript","jquery","ajax","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13070406,"title":"Use the result of an ajax request in my views.py, Django","body":"<p>Thanks to a javascript function and an ajax request, I have a count indicating the number of points a user makes when he uses my app. He can see that count on the page where he 'plays'.</p>\n\n<p>Now, what I would like to do, is to pass this number into my views.py so that it modifies the object \"Score\" of my user.</p>\n\n<p>I explain. Thanks to this function, I get the count:</p>\n\n<pre><code>       var count = parseInt(0);\n\n setInterval(function() {\n   $.ajax({\n       type: \"GET\",\n       url: \"http://myxml\",\n       success: Escore\n   });\n  }, 60000);\n\nfunction Escore(xml){\n   $(xml).find(\"user\").each(function() {\n\n           if($(this).attr(\"id\") === id ) {\n               count += parseInt($(this).attr(\"count\"));\n               $(\".PlayerScore\").html(count)\n           }\n       });\n }\n</code></pre>\n\n<p>displayed in my html:</p>\n\n<pre><code>   &lt;div class=\"PlayerScore\"&gt; &lt;/div&gt;\n</code></pre>\n\n<p>Now, I would like to modify the object \"score\" of my user thanks to that. Every minute, I have a request that gives me the number of points the player makes in my div. How can I take this count in order to modify my \"request.user.userprofile.score\" in my views.py?</p>\n\n<p>I hope my question is not too confusing. Any help would be really welcome. thanks!</p>\n"},{"tags":["database","django","database-connection"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13069679,"title":"How to dynamically connect to a database","body":"<p>I want to connect Django to a database that the user will set in the main page.</p>\n\n<p>The user will have to precise the engine (with a combobox), the database, login, password etc in a form, and I want to proceed the connection with the submit.</p>\n\n<p>So far, I tried to set \"<code>DATABASES = {}</code>\" in <em><code>settings.py</code></em>, but it returns an error. </p>\n\n<p>Have you got any clue about how to do it?</p>\n"},{"tags":["python","django","django-models"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":44,"score":2,"question_id":13069952,"title":"Django - Correct way to load a large default value in a model","body":"<p>I have a field called <code>schema</code> in a django model that usually contains a rather large json string. There is a default value (around 2000 characters) that I would like added when any new instance is created. </p>\n\n<p>I find it rather unclean to dump the whole thing in the <code>models.py</code> in a variable. What is the best way to load this default value in my schema (which is a <code>TextField</code>)?</p>\n\n<p>Example: </p>\n\n<pre><code>class LevelSchema(models.Model):\n    user = models.ForeignKey(to=User)\n    active = models.BooleanField(default=False)\n    schema = models.TextField() # Need a default value for this\n</code></pre>\n\n<p>I thought about this a bit. If I am using a json file to store the default value somewhere, what is the best place to put it? Obviously it is preferable if it is in the same app in a folder.</p>\n"},{"tags":["django","django-many-to-many"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13068926,"title":"django contains model with ManyToMany fields, but they are not available with query","body":"<p>I have a model that contains two ManyToMany fields, and I have successfully created entries containing these fields. When I create a queryset, the data from here isn't included. How can I access that data?</p>\n\n<p>Queryset code:</p>\n\n<pre><code>example_list = Example.objects.values_list().order_by('-date_submitted')\n</code></pre>\n\n<p>Models.py</p>\n\n<pre><code>class Example(models.Model):\n    example_id = models.ForeignKey(User)\n    date_submitted = models.DateTimeField()\n    title = models.CharField(max_length=70)\n    description = models.TextField()\n    file = models.FileField(upload_to='files')\n    photo = models.FileField(upload_to='design_photos')\n    materials = models.ManyToManyField('Materials')\n    tags = models.ManyToManyField('Tags')\n</code></pre>\n"},{"tags":["django","authentication"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13066898,"title":"User authentication in Django. Problems with is_authenticated","body":"<p>I have one problem with users menu. So, I want, that authenticated user can see his/her profile page and logout (links) in menu. It works (when I logging in) on index page: <em>index, page1, profile, logout</em> ,but, if I go to the, for example, page1 I can see in menu: <em>index, page1, login</em>, not profile and logout. How to fix it?</p>\n\n<p><strong>in urls:</strong></p>\n\n<pre><code>url(r'^accounts/login/$', 'django.contrib.auth.views.login' ),\nurl(r'^accounts/logout/$', 'django.contrib.auth.views.logout_then_login' ),\nurl(r'^accounts/profile/$', 'my_app.views.profile' ),\n</code></pre>\n\n<p><strong>in views:</strong></p>\n\n<pre><code>def profile(request):\n    if  not request.user.is_authenticated():\n        return HttpResponseRedirect(\"/accounts/login/\")        \n    else:\n        user = request.user.is_authenticated()\n        return  render_to_response('profile.html',locals()) \n</code></pre>\n\n<p><strong>Part of index.html:</strong></p>\n\n<pre><code>{% if user.is_authenticated or request.user.is_authenticated %}\n    &lt;li&gt;&lt;a href=\"/accounts/profile/\"&gt;Profile&lt;/a&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;a href=\"/accounts/logout/\"&gt;logout&lt;/a&gt;&lt;/li&gt;\n{% else %}\n    &lt;li&gt;&lt;a href=\"/accounts/login/\"&gt;login&lt;/a&gt;&lt;/li&gt;\n{% endif %}\n</code></pre>\n\n<p><strong>login.html:</strong></p>\n\n<pre><code>{% extends \"index.html\" %}\n{% load url from future %}\n\n{% block application %}\n\n{% if form.errors %}\n&lt;p&gt;Try one more time&lt;/p&gt;\n{% endif %}\n\n&lt;form method=\"post\" action=\"{% url 'django.contrib.auth.views.login' %}\"&gt;\n{% csrf_token %}\n&lt;table&gt;\n&lt;tr&gt;\n    &lt;td&gt;{{ form.username.label_tag }}&lt;/td&gt;\n    &lt;td&gt;{{ form.username }}&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n    &lt;td&gt;{{ form.password.label_tag }}&lt;/td&gt;\n    &lt;td&gt;{{ form.password }}&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/table&gt;\n\n&lt;input type=\"submit\" value=\"Login\" /&gt;\n&lt;input type=\"hidden\" name=\"next\" value=\"{{ next }}\" /&gt;\n&lt;/form&gt;\n\n{% endblock %}\n</code></pre>\n\n<p><strong>profile.html:</strong></p>\n\n<pre><code>{% extends \"index.html\" %}\n{% block application %}\n{% if request.user.is_authenticated %}\n    &lt;p&gt;Welcome, {{ request.user.username }}. Thanks for logging in.&lt;/p&gt;\n{% else %}\n    &lt;p&gt;Welcome, new user. Please log in.&lt;/p&gt;\n{% endif %}\n{% endblock %}\n</code></pre>\n\n<p><strong>page1.html:</strong></p>\n\n<pre><code>{% extends \"index.html\" %}\n{% block application %}\nsome for loops here\n{% endblock %}\n</code></pre>\n\n<p><strong>views for page1:</strong></p>\n\n<pre><code>def car(request):\n    all_cars = Car.objects.all().filter(active=1).values('id', 'name')\n    return render_to_response('page1.html', {'all_cars': all_cars})\n</code></pre>\n"},{"tags":["django","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":228,"score":1,"question_id":3482782,"title":"django ModelForm for subclassed models : Error for one, but not for another ('NoneType' object has no attribute 'label')","body":"<p>I'd like to ask for you guidance in the following matter in django:</p>\n\n<p>I am using the following models:</p>\n\n<pre><code>class QItem(models.Model):\n    isWhat = models.CharField(max_length=100, blank=True,  choices=ISWHAT)\n    slug = models.SlugField(blank=True)\n    script = models.CharField(max_length=100)\n    comment = models.TextField(blank=True, null=True)\n    author = models.ForeignKey(User)\n\nclass QuestionSet(QItem):\n    items = models.ManyToManyField(QItem, blank=True, through='Ordering',related_name=\"contained\")\n\n\nclass Question(QItem):\n    answerObject = models.OneToOneField(\"AnswerObject\", blank=True, null=True)\n</code></pre>\n\n<p>and their respective, most basic ModelForms:</p>\n\n<pre><code>class QuestionForm(ModelForm):\n    class Meta:\n        model = Question\n\nclass QuestionSetForm(ModelForm):\n    class Meta:\n       model = QuestionSet  \n</code></pre>\n\n<p>In a view, calling</p>\n\n<pre><code>           qset=QuestionFormSet()\n           print q \n</code></pre>\n\n<p>works just fine.   </p>\n\n<p>However,</p>\n\n<pre><code>           q = QuestionForm()\n           print q\n</code></pre>\n\n<p>throws </p>\n\n<pre><code>Exception Type: AttributeError\nException Value:    'NoneType' object has no attribute 'label'\n</code></pre>\n\n<p>in Django's server. When trying it in the console, I don't get any errors.\nEdit : Also, modelform_factory(Question) works.</p>\n\n<p>Any ideas why this is the case? Why do similar models behave so differently, and how could I get rid of the error?</p>\n\n<p>Edit :\nThis is the full Traceback:</p>\n\n<p>File \"/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/core/handlers/base.py\" in get_response\n  100.                     response = callback(request, *callback_args, **callback_kwargs)\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/contrib/auth/decorators.py\" in _wrapped_view\n  25.                 return view_func(request, *args, **kwargs)\nFile \"/Library/WebServer/Documents/dj1/../dj1/esm/views.py\" in dashboard\n  193.  print qForm\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/utils/encoding.py\" in <strong>str</strong>\n  27.         return self.<strong>unicode</strong>().encode('utf-8')\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/forms/forms.py\" in <strong>unicode</strong>\n  95.         return self.as_table()\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/forms/forms.py\" in as_table\n  217.             errors_on_separate_row = False)\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/forms/forms.py\" in _html_output\n  145.             bf = BoundField(self, field, name)\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/forms/forms.py\" in <strong>init</strong>\n  398.         if self.field.label is None:</p>\n\n<p>Exception Type: AttributeError at /esm/dashboard/\nException Value: 'NoneType' object has no attribute 'label'</p>\n"},{"tags":["django","internationalization","translation"],"answer_count":6,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":3422,"score":2,"question_id":1832709,"title":"django - how to make translation work?","body":"<p>I'm trying to render a template in a different language using i18n. I did everything I could read about, from setting the language code, creating and compiling translation files, including the translation tags in the template and all that, and my template still renders in English, even through the {{ LANGUAGE_CODE }} variable points to the correct (and different) code I intended to render. What am I missing?</p>\n\n<p>template:</p>\n\n<pre><code>{% extends \"base.html\" %}\n{% load i18n %}\n{% get_current_language as LANGUAGE_CODE %}\n{% get_available_languages as LANGUAGES %}\n{% get_current_language_bidi as LANGUAGE_BIDI %}\n{% block title %}{% trans \"translation test\" %}{% endblock %}\n{% block content %}\n&lt;div id=\"some-text\"&gt;\n  {% trans \"some translated text goes here\" %}\n  {% blocktrans %}\n  &lt;ol&gt;\n    &lt;li&gt;here are some&lt;/li&gt;\n    &lt;li&gt;items that should be&lt;/li&gt;\n    &lt;li&gt;translated as well&lt;/li&gt;\n  &lt;/ol&gt;\n  {% endblocktrans %}\n  &lt;ul&gt;\n      &lt;li&gt;The current language is &lt;b&gt;{{ LANGUAGE_CODE }}&lt;/b&gt;&lt;/li&gt;\n      {% if LANGUAGE_BIDI %}\n        &lt;li&gt;The current language is bidirectional&lt;/li&gt;\n      {% else %}\n        &lt;li&gt;The current language is &lt;b&gt;not&lt;/b&gt; bidirectional&lt;/li&gt;\n      {% endif %}\n      &lt;li&gt;Available languages are:\n        &lt;ul&gt;\n        {% for lang in LANGUAGES %}\n          &lt;li&gt;{{ lang.1}}&lt;/li&gt;\n        {% endfor %}\n        &lt;/ul&gt;\n      &lt;/li&gt;\n  &lt;/ul&gt;\n&lt;/div&gt;\n{% endblock %}\n</code></pre>\n\n<p>view:</p>\n\n<pre><code>from django.shortcuts import render_to_response\nfrom django.template import RequestContext\nfrom pdb import set_trace as debugger\ndef check(request):\n    return render_to_response('index.html', context_instance=RequestContext(request)\n</code></pre>\n\n<p>command line (I did fill in the correct translations in .po files):</p>\n\n<pre><code>$ django-admin.py makemessages -l he-il -e html\n$ django-admin.py compilemessages\n</code></pre>\n\n<p>settings.py:</p>\n\n<pre><code># Language code for this installation. All choices can be found here:\n# http://www.i18nguy.com/unicode/language-identifiers.html\nLANGUAGE_CODE = 'he-il'\n\ngettext = lambda s: s\nLANGUAGES = (\n    ('he-il', gettext('Hebrew')),\n    ('en-us', gettext('English')),\n)\n\n# If you set this to False, Django will make some optimizations so as not\n# to load the internationalization machinery.\nUSE_I18N = True\n\nTEMPLATE_CONTEXT_PROCESSORS = (\n    \"django.core.context_processors.auth\",\n    \"django.core.context_processors.i18n\",\n)\n\nMIDDLEWARE_CLASSES = (\n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.locale.LocaleMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n)\n</code></pre>\n"},{"tags":["django","node.js","mongodb"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":13067682,"title":"Django+MongoDB vs Node.js+MongoDB","body":"<p>I have up and running a website with sync services that built using Python(Django)+MySQL. For a long time I'm looking to the Node.js and MongoDB side. I'm close to make a decision to move to MongoDB part of the system that hosts data from user's desktop clients and used by sync service to sync data between clients. </p>\n\n<p>I'd like to keep the rest of the system running on Django+MySQL.</p>\n\n<p>My question is should I rewrite sync service on Node.js or keep it running on Django? Is there any advantages for Node.js with MongoDB against Django?</p>\n"},{"tags":["django","list","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13067537,"title":"Django: Find element in list by value","body":"<p>I have a sorted list of objects that I want my users to select a range from. For this I added two <code>select</code> elements (called <code>from</code> and <code>to</code>)to my web page. <code>from</code> is filled directly from the list, like this:</p>\n\n<pre><code>&lt;select id=\"from\"&gt;\n    {% for el in el_list %}&lt;option&gt;{{el.number}}&lt;/option&gt;{% endfor %}\n&lt;/select&gt;\n</code></pre>\n\n<p>Once a value has been selected in <code>from</code> I'd like to populate <code>to</code> with the values from the selected value until the last one. </p>\n\n<p>The list is sorted by the <code>number</code> attribute on python's side so I guess all I need to do is find the selected element in the list, slice the list accordingly and use the rest to populate my second <code>select</code>. </p>\n\n<p>I've searched the documentation and several snippets but so far I've only found filters giving me the last or the first element of a list. I also know I can check if the selected value is in my list using <code>in</code>, but how can I then get that object's index? </p>\n\n<p>I know I could probably run along the whole list with a <code>for</code> ... <code>if</code>, but I am almost sure there's a more elegant method out there, that I simply haven't found yet. </p>\n\n<p>If any of you could provide me with a few pointers on how to solve this more elegantly it'd be much appreciated.</p>\n"},{"tags":["django","django-haystack"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13025740,"title":"Django Haystack ordering","body":"<p>I want to order the posts on my app by the number of likes (in reverse) so I've put this code in search_indexes.py:</p>\n\n<pre><code>like = IntegerField(model_attr=\"like\", null=True)\n</code></pre>\n\n<p>and in the model:</p>\n\n<pre><code>like = models.IntegerField(null=True, blank=True)\n</code></pre>\n\n<p>In the view the code is:</p>\n\n<pre><code>context = {\n   'var': SearchQuerySet().all().order_by('-like'),\n}\n</code></pre>\n\n<p>This seems to order the posts by the number of likes but in this order (ordered by likes):</p>\n\n<p>97 9 9 8 83 7</p>\n\n<p>It would seem like the ordering is only by the first number. How can I fix this? Is this a bug?</p>\n\n<p>Thanks</p>\n"},{"tags":["python","django","path"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13067107,"title":"Read a local file in django","body":"<p>I'm quite stuck on this one! \nI am writing a Django view that reads data from an external database. To do this, I am using the standard MySQLdb library.\nNow, to load the data, I must do a very long and complex query. I can hard code that query in my view and that works just fine.\nBut I think that is not practical; I want to be able to change the query in the future, so I try to load the statement from a text file. \nMy problem is that I don't know where to store and how to open that file. Wherever I do, I get a \"No such file or directory\" error. Even saving it in the same directory than the code of the view fails.</p>\n\n<p>Note that this is not an uploaded file; it's just an external file that completes my code.\nAny ideas?\nThanks in advance!</p>\n"},{"tags":["django","permissions"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13066377,"title":"django permissions error?","body":"<p>After trying to add a model entry using the admin interface, I get the following error: </p>\n\n<pre><code>[Errno 13] Permission denied: '/dev/website/app/media/pictures/2.1.0_screenshot.jpg'\n</code></pre>\n\n<p>The thing is, I've already added several items to this folder. How do I correct the permissions, and why would they have changed?</p>\n\n<p>Permissions for that folder:</p>\n\n<pre><code>-rwxr-xr-x 1 root root     3967 2012-10-18 13:05 example.png\n</code></pre>\n"},{"tags":["mysql","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13058064,"title":"Force mysql objects to be uppercase in django","body":"<p>Is there an option to set the names of every mysql objects (tables and columns) in uppercase?</p>\n\n<p>If not, what is the reason ?</p>\n"},{"tags":["python","django","google-charts","google-charts-api","google-chartwrapper"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13055783,"title":"Create dynamic labels for Google Chart using GChartWrapper","body":"<p>I'm using the awesome <a href=\"http://code.google.com/p/google-chartwrapper/\" rel=\"nofollow\">Google Chart Wrapper</a> to create charts as part of my Django project. Right now I'm creating the chart instance using Python in my views, and then adding the instance to the template context and displaying the charts in my templates successfully. </p>\n\n<p>What I'm having trouble doing is displaying a dynamic set of X-Axis labels. Here is the relevant code from Google Chart Wrapper:</p>\n\n<pre><code>def label(self, index, *args): \n    \"\"\" \n    Label each axes one at a time \n    args are of the form &lt;label 1&gt;,...,&lt;label n&gt; \n    APIPARAM: chxl \n    \"\"\" \n    self.data['labels'].append( \n    str('%s:|%s'%(index, '|'.join(map(str,args)) )).replace('None','') \n    ) \n    return self.parent \n</code></pre>\n\n<p>and how I'm currently creating the chart in my view:</p>\n\n<pre><code>from GChartWrapper import *\n\nchart = Sparkline([1,2,3,4,5,6,7], encoding='text')\nchart.axes.label(...) # need to set labels here\n</code></pre>\n\n<p>I have a list of date strings that I'd like to display as the x-axis labels, does anyone know how I would go about doing that?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13054531,"title":"Define two login_url with login_required in django","body":"<p>In my app, I have two different login pages according the user that need to log in. So I cannot use <code>settings.LOGIN_URL</code>.</p>\n\n<p>I am also using class-based views, so I have to use <code>method_decorator(login_required)</code>.</p>\n\n<p>At this moment, I have a class decorator (I am using Python 2.7) that does pretty much all what I want, except for the <code>login_url</code>. Code is a snippet and hand-typed, so it may have typo.</p>\n\n<pre><code>login_required_m = method_decorator(login_required)\ndef requires_role1(view):\n  def requires_m(func):\n    @wraps(func)\n    def wrapper(self, request, *args, **kwargs):\n      # I need to process request.user\n      if (not ok):\n        return redirect(urlresolvers.reverse('some_name'))\n      else:\n        f = login_required_m(func)\n        return f(self, request, *args, **kwargs)\n    return wrapper\n  view.get = requires_m(view.get)\n  view.post = requires_m(view.post)\n  return view</code></pre>\n\n<p>The line that really concerns me is:</p>\n\n<pre><code>`f = login_required_m(func)`\n</code></pre>\n\n<p>On a function based view, I would have been able to define:</p>\n\n<pre><code>`f = login_required(func, login_url='some_reverse_path')`\n</code></pre>\n\n<p>but with <code>method_decorator(login_required)</code>, I am no longer able to pass <code>login_url</code> as a parameter. Remember, I need to be able to do so because I have two different login urls. They provide totally different sets of usernames and passwords (same username can be in both set with different passwords and associated to different people).</p>\n\n<p>Any help in what I should do to accomplish this would be much appreciated.</p>\n\n<p><em>EDIT</em></p>\n\n<p>Accorded to accepted answer, here is the solution I adopted:</p>\n\n<pre><code>def login_required_partial(func):\n  return partial(login_required, login_url=urlresolvers.reverse('role1_login'))\n\nlogin_required_m = method_decorator(login_required_partial)</code></pre>\n\n<p>and left the rest of the code unchanged. And it all seems to work well when there are no parameters passed by <code>ulr(r'path/(?P&lt;param1&gt;.*)', CBV.as_view(), name='path_name')</code>.</p>\n\n<p>Anyone with a good way to fix this now?</p>\n"},{"tags":["django","d3.js"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":86,"score":2,"question_id":13065750,"title":"How to pass data from django to d3.js","body":"<p>I'm doing a survey web project at the moment that requires me to use d3.js to perform some kind of bar chart visualization. I'm using Django to program my web application. </p>\n\n<p>The problem I encounter is how do I pass all values related to an object into an array that is used in d3.js?</p>\n\n<pre><code>choice = question.choicelist.get(choice_no=choice_no)\n</code></pre>\n\n<p>where votes for each choices to the question will be choice 1 = 4, choice 2 = 6, choice 3 = 7, choice 4 = 1.</p>\n\n<p>For ds.js, the most simplest way to read a data set is:</p>\n\n<pre><code>var data = [ 4, 6, 7, 1]\n</code></pre>\n\n<p>How do I pass the data to my template such that d3.js is able to read it as the code above?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13065749,"title":"TemplateSyntaxError at /admin/password_reset/. What is the solution?","body":"<p>This is my urlconf( taken from the Django docs)</p>\n\n<pre><code>urlpatterns = patterns('',\n url(r'^admin/password_reset/$', 'django.contrib.auth.views.password_reset', name='admin_password_reset'),\n(r'^admin/password_reset/done/$', 'django.contrib.auth.views.password_reset_done'),\n(r'^reset/(?P&lt;uidb36&gt;[0-9A-Za-z]+)-(?P&lt;token&gt;.+)/$', 'django.contrib.auth.views.password_reset_confirm'),\n(r'^reset/done/$', 'django.contrib.auth.views.password_reset_complete'),\n)\n</code></pre>\n\n<p>This is the error:</p>\n\n<pre><code>Caught NoReverseMatch while rendering: Reverse for 'django.contrib.auth.views.password_reset_confirm' with arguments '()' and keyword arguments '{'uidb64': 'NTA4MjY0NmZhOWQ3MTk1MDYzMGQyODgy', 'token': '3bv-abcb4fa27b0efa207808'}' not found.\n</code></pre>\n\n<p>Any solution?</p>\n"},{"tags":["python","django","apache","rabbitmq","pika"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13055718,"title":"Django - Share a RabbitMQ Connection between All Processes that apache creates per request?","body":"<p>My stack is <em>Django 1.3(Python 2.7)</em> + <em>Apache</em> + mod_wsgi </p>\n\n<p><em>Apache</em> spawns a new process per request... Sometimes in those requests I have to <em>Publish</em> a message to <em>RabbitMQ</em> about some heavy task to be done later (like notifying someone's followers about a cat photo they just posted).</p>\n\n<p><em>Publishing</em> involves making connection to <em>RabbitMQ</em>, which is expensive. (see this SO question: <a href=\"http://stackoverflow.com/questions/11147065/rabbitmq-create-connection-is-an-expensive-operation\">RabbitMQ create connection is an expensive operation</a>)</p>\n\n<p>I am also sadly aware of Python's incapability to share memory across processes... sigh :(</p>\n\n<p>How in this case, do I prevent the overhead of creating and closing a RabbitMQ connection per apache request?</p>\n\n<p>For Clarity, Using RabbitMQ + pika here is my failed attempt at sharing the connection between processes:</p>\n\n<pre><code>def test_view(request):\n    \"\"\"a django view publishing to RabbitMQ\"\"\"\n    connection = Connection.get_shared_connection()\n    channel = connection.channel() \n    channel.queue_declare(queue='test_queue', auto_delete=False, durable=True)\n    channel.basic_publish(exchange='', routing_key='test_queue', body='Hello Rabbit!', \n                                properties=pika.BasicProperties(delivery_mode=2))\n    print 'SENT:', body\n\n    return HttpResponse(\"published\")\n\n\nclass Connection(object):\n    \"\"\"failed attempt to create a singleton\"\"\"\n    _connection = None\n\n    @staticmethod\n    def get_shared_connection(): # return a pika connection\n        if not Connection._connection:\n            print 'NEW CONNECTION'  # prints NEW CONNECTION with every request\n            Connection._connection = pika.BlockingConnection(pika.ConnectionParameters(\n                                                                           host='localhost'))\n        return Connection._connection\n</code></pre>\n\n<p>In server setting (<em>Django</em> + <em>Apache</em> + mod_wsgi) <code>'NEW CONNECTION'</code> is printed with every request made to <code>test_view</code></p>\n\n<p>It seems like an issue anybody would run into using Django with RabbitMQ. There has to be a way...</p>\n\n<p>Thanks... any help is appreciated</p>\n"},{"tags":["django","database-design","web-applications","scalability","real-time-data"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":41,"score":-1,"question_id":13065505,"title":"Backend design queries for an app dealing with real-time data using django","body":"<p>I am a programmer and entirely new to web app development. However my new job requires me to prototype a web app quickly so that the basic concept can be validated and tested.</p>\n\n<p>Upon a lot of research etc, I have settled on Django. Before I go further, I am putting up a very simplified version of what the app is supposed to be doing.</p>\n\n<ol>\n<li>The app is expected to have a fair (but not humongous) number of users (initial estimates in the in 100,000s range)</li>\n<li>Each user has a specific hardware that is configured to measure and send some numerical data every 5 seconds, say, to an online server.</li>\n<li>Each user's hardware could send a different number of numerical values each sample interval. For ex user1 might have the hardware configured to send values a, b &amp; c each 5 seconds while user2 sends a, b, c, d &amp; e</li>\n<li>The user does not expect to need to view the raw data so beyond a certain point, say a day, the data can be appropriately summaized into hourly data etc.</li>\n<li>However the user does expect to have all formatted hourly data (in form of charts, graphs etc) available (might be for 10-15 years say)</li>\n<li>If certain conditions of the data are met, the user expects to recieve an alert over SMS &amp; email.</li>\n</ol>\n\n<p>My thoughts and questions are as follows. Please bear with me if the questions seem like having obvious solutions...</p>\n\n<p>Please comment in context to me using django + google app engine.</p>\n\n<ol>\n<li><p>How would I configure the hardware so the data is read and sanitised and then put into a database? Do I have a url(?) where the hardware can send its data and have a separate thread for listening to data, sanitizing it if needed and then adding it to the appropriate database? Considering that it needs to handle 1000,000s of entries every 5 seconds, will the app need to store the entries temporarily before they can be processed? Is there some better way of doing this... I am sure there must be but I am unable to think of one... </p></li>\n<li><p>Can someone suggest some good resources/books for learning about building scalable apps ... I know this will not be an issue for the prototype stage but considering the prospective 100,000s of tuples being added to the db eavery 5 seconds, it would be good to begin thinking and learning about this in the meantime. BTW I already plan on going through GAE's documentation regarding the same...Also saw <a href=\"http://www.quora.com/Python-programming-language-1/What-are-the-best-components-for-creating-scalable-Python-web-applications\" rel=\"nofollow\">this quora answer</a> and <a href=\"http://stackoverflow.com/questions/886221/does-django-scale?rq=1\">this</a></p></li>\n</ol>\n\n<p>Want to add that however on the front-end side, the users will login maybe once or twice a week for a couple of hours. So scalability is not that big a concern there I think...</p>\n\n<ol>\n<li><p>Is it recommended that I design the database schema to have one table per user for storing its real-time summarized data? If yes how do I do define this in models.py? Is there some django documentation for this?</p></li>\n<li><p>Considering that the number of fields of the table would be different for each user, is it even possible to have one single table? Maybe if I limit the maximum number of fields?</p></li>\n</ol>\n\n<p>Please do ask me for further details if I have not been clear somewhere or you need further details. I'll again say that I am completely new to web app design so I apologise if the questions are too simplistic.</p>\n\n<p>Thanks</p>\n"},{"tags":["django","apache","apache2","django-compressor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13047102,"title":"Force django_compressor to recompile css/less files","body":"<p>We let users upload their own custom css/less to our django app.</p>\n\n<p>All our css/less files are compressed by <a href=\"http://django_compressor.readthedocs.org/\" rel=\"nofollow\">django_compressor</a> \"on-the-fly\".</p>\n\n<p>When the app is initially deployed all css files are moved to the <code>collect-static</code> directory.</p>\n\n<p>When users upload custom css styles they replace one of the less files in the <code>collect-static</code> directory.</p>\n\n<p>The problem with that is that the changes only appear when the apache is being reloaded thus a new css file gets generated by django-compressor.</p>\n\n<p>Is there a way to force django-compressor to regenerate it's compiled and cached files? I would not feel comfortable triggering a <code>sudo services apache2 reload</code> from the django application level.</p>\n"},{"tags":["html","django","release","minify"],"answer_count":4,"favorite_count":6,"up_vote_count":11,"down_vote_count":0,"view_count":2955,"score":11,"question_id":3062420,"title":"Django: auto minifying css/js files before release","body":"<p>I have following case: I want to use uncompressed js/css files during development (to debug js for example) but on production I want to switch automatically to minified versions of that files.</p>\n\n<p>some simple solution is to put in your template:</p>\n\n<pre><code>&lt;script src=\"some_js.{% if not debug %}min.{% endif %}js\"....\n</code></pre>\n\n<p>but this require manully providing that such file exist and to do minifaction manullay after original file change.</p>\n\n<p>How do you accomplish this in your projects? Is there any tool for this?</p>\n"},{"tags":["javascript","jquery","django"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":64,"score":2,"question_id":13065067,"title":"Javascript function in Django","body":"<p>I'm developing an app with django. I'm trying to implement a score counter, based on how many people is watching you, through your webcam.</p>\n\n<p>I implemented a function to get the number of people that are watching you in live. Now I would like to have an other count that takes the existing Score of the user and add, every minute, one point for every people that are watching.</p>\n\n<p>Here is the function to get the number of people watching:</p>\n\n<pre><code>  var url = window.location.pathname.split('/');\n  var id = url[3];\n\nsetInterval(function() {\n   $.ajax({\n       type: \"GET\",\n       url: \"http://myxml\",\n       success: parseXml\n   });\n}, 2000);\n\nfunction parseXml(xml){\n   $(xml).find(\"user\").each(function() {\n\n           if($(this).attr(\"id\") === id ) {\n               $(\".Score\").html($(this).attr(\"count\"))\n           }\n       });\n}\n</code></pre>\n\n<p>It works perfectly.</p>\n\n<p>Now, here is the function I try to implement to get the existing score and add points to it:</p>\n\n<pre><code>   setInterval(function UserScore(){\n      var self = $(this),\n      score=self.attr('existing-score'),\n      $(\".PlayerScore\").html($(this).attr(\"Score\"+\"existing-score\"))\n   }, 60000);\n</code></pre>\n\n<p>and the html to render it:</p>\n\n<pre><code> &lt;div class=\"PlayerScore\" existing-score=\"{{ dub.user.userprofile.score }}\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>This function doesn't work. Nothing appears.</p>\n\n<p>I'm really new in both Django and Javascript, so I guess there must be a lot of mistakes in this function. So any help would be very welcome. Thanks.</p>\n"},{"tags":["django","url","django-urls","questionmark"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":53,"score":3,"question_id":13061981,"title":"Issues with question mark in url","body":"<p>Hi i am using multiple languages in my app and it is accessible by the url like <code>www.asd.com/reg/?lang=es</code>\nIs there some way with which i can remove this <strong>\"?\"</strong> from my url and it becomes like <code>www.asd.com/reg/es</code>  and also my functionality of multiple language is working properly.</p>\n\n<p>Thanks  </p>\n"},{"tags":["django","session","joomla","context","session-variables"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13051375,"title":"Joomla Session Variables","body":"<p>In Django there is a method called getContext, which retrieves session data, template vars, and everything in the correct \"context\".</p>\n\n<p>I am now programming in Joomla, and making some components and for debugging I am looking for a way to see all the session vars. Just to look at them and see what is available during specific requests. So, I have searched the api and I know how to get stuff out of the session by keyword, but nothing to see all session store vars.</p>\n\n<p>Any Ideas?</p>\n"},{"tags":["python","css","django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13063709,"title":"Load images referenced in css django 1.4 development","body":"<p>I am trying to load background image for my development environment through a css file. I have done the following:</p>\n\n<ul>\n<li>I have the following in my main_page.html  link rel=\"stylesheet\" href=\"static/style.css\" type=\"text/css\"</li>\n<li><p>In settings.py i have the following:<br/>STATIC_ROOT = '/home/vinay/myfiles/django-projects/taf/gui/static/'<br/>STATIC_URL = '/static/'<br/>STATICFILES_DIRS = ()<br/>TEMPLATE_CONTEXT_PROCESSORS = (<br/>\"django.contrib.auth.context_processors.auth\", \n\"django.core.context_processors.debug\",\"django.core.context_processors.i18n\", \"django.core.context_processors.media\",\"django.core.context_processors.static\", \"django.core.context_processors.tz\", \"django.contrib.messages.context_processors.messages\",)</p></li>\n<li><p>Run python manage.py collectstatic</p></li>\n<li><p>style.css and bg.jpg is present in the static folder</p></li>\n<li><p>In style.css the bg.jpg is referenced as:<br/>background:url(\"../bg.jpg\");<br/>Tried all possible combinations like<br/>background:url(\"bg.jpg\");<br/>background:url(\"static/bg.jpg\");<br/>background(\"/static/bg.jpg\")<br/><br/>But nothing seems to work. Also, the production server displays the following:<br/>[25/Oct/2012 01:31:35] \"GET / HTTP/1.1\" 200 1364<br/>[25/Oct/2012 01:31:35] \"GET /static/style.css HTTP/1.1\" 200 442<br/>[25/Oct/2012 01:31:35] \"GET /static/logo.gif HTTP/1.1\" 304 0</p></li>\n</ul>\n\n<p>So, it looks like the it is not trying to get \"bg.jpg\", but logo is present in    main_page.html and its getting that image but not the image referenced by the css file.\nwhy is it so?</p>\n\n<ul>\n<li>The url.py file contains only:\n(r'^$', main_page),</li>\n</ul>\n"},{"tags":["django","validation"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":13026689,"title":"Django form field clean to check if entered date is in a stored range","body":"<p>I'm trying to write a form clean method to ensure that an entered pair of dates is not currently covered by date ranges stored in the model.</p>\n\n<p>So I want to catch <code>fromdate &gt;= value &lt;= todate</code> but the <code>between</code> filters in my clean methods aren't getting it.</p>\n\n<p>Can anyone offer some enlightenment?</p>\n\n<p>Models.py</p>\n\n<pre><code>class Dates(models.Model):\n    fromdate = models.DateField()\n    todate = models.DateField()\n</code></pre>\n\n<p>Forms.py</p>\n\n<pre><code>class Form(forms.Form):\n    fromdate = forms.DateField()\n\n    todate = forms.DateField()\n\n    class Meta:\n        model = Dates\n\n    def clean_fromdate(self):\n        form_fromdate = self.cleaned_data.get('fromdate')\n\n        exists = Dates.objects.filter(fromdate__contains=form_fromdate).exists()\n        if exists == True:\n            raise forms.ValidationError(_(\"A period is already entered for this date\"))\n\n        between = Dates.objects.filter(fromdate__gte=form_fromdate,\n            todate__lte=form_fromdate).exists()\n        if between == True:\n            raise forms.ValidationError(_(\"Period already between this date 1\"))\n\n        return form_fromdate\n\n\n    def clean_todate(self):\n        form_todate = self.cleaned_data.get('todate')\n\n        exists = Dates.objects.filter(todate__contains=form_todate).exists()\n        if exists == True:\n            raise forms.ValidationError(_(\"A period is already entered for this date\"))\n\n        between = PeriodsOfInactivity2012.objects.filter(fromdate__gte=form_todate,\n            todate__lte=form_todate).exists()\n        if between == True:\n            raise forms.ValidationError(_(\"Period already between this date 2\"))\n\n        return form_todate\n</code></pre>\n"},{"tags":["python","django","mvc"],"answer_count":3,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":1657,"score":3,"question_id":6621653,"title":"Django vs. Model View Controller","body":"<p>Can somebody explain me where the diferences are between Django and the Model View Controller pattern?</p>\n\n<p>Functionally, what can we expect from those differences — i.e. what works differently comparing Django to, for example, Ruby on Rails?</p>\n"},{"tags":["django","nginx","blocking","uwsgi"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13041390,"title":"What happens when response timeout in nginx+uwsgi+django?","body":"<p>I have a long running task which is NOT async, it will block the response of django, the server stack is nginx+uwsgi, what happens after nginx decide it's timeout, will my task (the uwsgi worker and the django view thread) be killed?</p>\n"},{"tags":["python","django","exception","django-middleware"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13063212,"title":"DeprecationWarning: BaseException.message has been deprecated as of Python 2.6 exception.__class__, exception.message,","body":"<p>Hi can anyone tell me the actual reason behind the warning i am getting in this code.\nand how can i solve this ?</p>\n\n<p>I am getting this message \"<em>DeprecationWarning: BaseException.message has been deprecated as of Python 2.6  exception.<strong>class</strong>, exception.message,</em>\"</p>\n\n<pre><code>class GeneralMiddleware(object):\n    def process_exception(self, request, exception):\n        if exception.__class__ is SandboxError:\n            # someone is trying to access a sandbox that he has no\n            # permission to\n            return HttpResponseRedirect(\"/notpermitted/\")\n\n        exc_type, value, tb = sys.exc_info()\n        data = traceback.format_tb(\n                    tb, None) + traceback.format_exception_only(\n                    exc_type, value)\n        msg = (\n            \"Failure when calling method:\\n\"\n            u\"URL:'%s'\\nMethod:'%s'\\nException Type:'%s'\\n\"\n            u\"Error Message '%s'\\nFull Message:\\n%s\"\n            % (request.get_full_path(), request.method,\n               exception.__class__, exception.message,\n</code></pre>\n"},{"tags":["django","django-models","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13062750,"title":"Django Tastypie: Adding multiple models to a single Tastypie Resource","body":"<p>I have the following models in my Django Application. The BasicInfo and AddressInfo tables are linked to the Customer table using the id column of the Customer Table, which is the customer_id column in these tables.</p>\n\n<p>For each customer, there can be multiple entries in the AddressInfo or the BasicInfo table.</p>\n\n<pre><code>class Customer(models.Model):\n    id = models.IntegerField(primary_key=True)\n    joining_dtm = models.DateTimeField()\n    isactive = models.IntegerField()\n\n    class Meta:\n        db_table = u'Customer'\n\n\nclass Addressinfo(models.Model):\n    id = models.IntegerField(primary_key=True)\n    apt_num = models.CharField(max_length=135, blank=True)\n    street = models.CharField(max_length=135, blank=True)\n    street_2 = models.CharField(max_length=135, blank=True)\n    city = models.CharField(max_length=135, blank=True)\n    country = models.CharField(max_length=135, blank=True)\n    postalcode = models.CharField(max_length=135, blank=True)\n    customer_id = models.ForeignKey(Customer)\n\n    class Meta:\n        db_table = u'AddressInfo'\n\nclass Basicinfo(models.Model):\n    id = models.IntegerField(primary_key=True)\n    name = models.CharField(max_length=135, blank=True)\n    about = models.CharField(max_length=135, blank=True)\n    website = models.CharField(max_length=135, blank=True)\n    customer_id = models.ForeignKey(Customer)\n\n    class Meta:\n        db_table = u'BasicInfo'\n</code></pre>\n\n<p>How do I create a single Tastypie resource which will enable me to provide all customer tables as an API. </p>\n\n<p>The json object that the resource returns can be something similar to the following for the customer with id 12,</p>\n\n<pre><code>{\n   \"id\": 12, \n   \"joining_dtm\": \"2012-10-25T07:06:54.041528\", \n   \"resource_uri\": \"/public-api/api/v0.1a/customer/1/\", \n   \"AddressInfo\": [\n      {    \n          \"id\":22,\n          \"apt_num\": \"54\",\n          \"street\": \"Avondale Place\",\n          \"street_2\": \"\",\n          \"city\": \"Chicago\",\n          \"country\": \"India\",\n          \"postalcode\": \"600059\",\n          \"customer_id\": 12\n       },\n      {\n          \"id\":96,\n          \"apt_num\": \"11\",\n          \"street\": \"Infinite Loop\",\n          \"street_2\": \"\",\n          \"city\": \"Cupertino\",\n          \"country\": \"USA\",\n          \"postalcode\": \"123456\",\n          \"customer_id\": 12\n       }\n    ],\n\n   \"BasicInfo\": [\n      {\n          \"id\": 33,\n          \"name\": \"My Full Name\",\n          \"about\": \"Blah Blah Blah\",\n          \"website\": \"http://google.com\",\n          \"customer_id\": 12\n       },\n      {\n          \"id\": 147,\n          \"name\": \"My New Name\",\n          \"about\": \"More Blah Blah\",\n          \"website\": \"http://gmail.com\",\n          \"customer_id\": 12\n\n       }\n    ]\n}\n</code></pre>\n"},{"tags":["python","django","tastypie","mptt"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13063087,"title":"Django Tastypie: create object with ajax","body":"<p>I continue experiments with Django, Tastypie and mptt and for now i can't create object with jquery POST request.</p>\n\n<p>JS looks like this (csrf works fine!):</p>\n\n<pre><code>$.ajax({\n    type: 'POST',\n    url: '/api/v1/myComment/',\n    data: JSON.stringify({\n       \"content_object\":\"/api/v1/blogItem/{{ item.id }}/\",\n       \"comment\": \"comment text\"\n    }),\n    cache: false,\n    dataType: \"json\",\n    processData:  false,\n    contentType: \"application/json\",\n    beforeSend: function(xhr, settings)\n    {\n       if (!csrfSafeMethod(settings.type) &amp;&amp; sameOrigin(settings.url))\n       {\n           xhr.setRequestHeader(\"X-CSRFToken\", csrftoken);\n       }\n    },\n    success: function(msg)\n    {\n       console.log(msg);\n    },\n    error: function ()\n    {\n       console.log(\"error\");\n    }\n});\n</code></pre>\n\n<p>Tastypie Resource:</p>\n\n<pre><code>class MPTTCommentResource(ModelResource):\n    children = fields.ToManyField('self', 'children', null=True, full=True)\n    # content_object is blog item and i want to leave comment for it\n    content_object = GenericForeignKeyField({BlogItem: BlogItemResource}, 'content_object', full=True, null=False)\n    site = fields.ForeignKey(SiteResource, 'site', null=True, full=True)\n\n\n\n    class Meta:\n        queryset = MyComment.objects.all()\n        resource_name = 'myComment'\n        include_resource_uri = False\n        allowed_methods = ['get', 'post', 'put']\n        authentication = SessionAuthentication()\n        authorization = DjangoAuthorization()\n\n    def obj_create(self, bundle, request=None, **kwargs):\n        print(request.POST)\n        # console output: &lt;QueryDict: {u'{\"itemId\":\"396\",\"comment\":\"comment text\"}': [u'']}&gt;\n        import json\n        data=json.loads(request.raw_post_data)\n\n        return super(MPTTCommentResource, self).obj_create(bundle, request, user=request.user, comment=data['comment'], content_object=ProjectItem.objects.get(id=data['itemId']), site=Site.objects.get(id=1))\n</code></pre>\n\n<p>but mptt object doesn't appear after POST. if i try to print fields &amp; values in Tastypie's resources.py in method obj_create before bundle.obj.save() i get:</p>\n\n<pre><code>id : None\ncontent_type : blog item\nobject_pk : 396\nsite : example.com\nuser : my@mail.com\nuser_name : \nuser_email : \nuser_url : \ncomment : comment text\nsubmit_date : None\nip_address : None\nis_public : True\nis_removed : False\n</code></pre>\n\n<p>So object somehow exist (is_public is_removed have default values from contrib.comments.Comment) but it can't get id to finally save</p>\n"},{"tags":["python","django"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":13063274,"title":"Slug is too short - Django","body":"<p>Here's a snippet of code in my models.py file:</p>\n\n<pre><code>GENRE_CHOICES = (\n             ('R', 'Rock'),\n             ('B', 'Blues'),\n             ('J', 'Jazz'),\n             ('P', 'Pop'), \n             ('H', 'Hip-Hop'),    \n             )\n\nclass Genre(models.Model):\n  genre_choices = models.CharField(max_length=1, choices=GENRE_CHOICES)\n  slug = models.SlugField(max_length = 100, unique = True)\n</code></pre>\n\n<p>admin.py pre-populates the slug like this:</p>\n\n<pre><code>class GenreAdmin(admin.ModelAdmin):\n  prepopulated_fields = {\"slug\": (\"genre_choices\",)}\n</code></pre>\n\n<p>In the admin site, I notice that the slug only populates to the first letter. For instance, for rock, only <code>R</code> is selected. How do i select the other part of the tuple i.e. Rock instead?</p>\n"},{"tags":["python","django","django-tables2"],"answer_count":0,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13063477,"title":"Extending django-tables2","body":"<p>I'm a heavy django-tables2 user and I've thought of adding a generic extension to the django-table: I want to allow the user to be able to export all the table data to excel (using xlwt) or csv just by clicking a button that would be somewhere near the table.</p>\n\n<p>Now, I've implemented this in a non generic way, meaning that I've included a POST form and a button in my template and add a check to see if the button has been clicked the view that fills the table. If the button is clicked return the xls instead of the normal template. Also I've implemented a generic function that gets a django-table2 table (any table) and converts it to an xlwt sheet (in order to put it to a workbook).</p>\n\n<p>This is working fine but since I will use this button to all my tables, I don't want to add the export form and button to all my html templates that would contain a table. Also I don't want to add the POST checks to all my views ! This is definitely not DRY :(</p>\n\n<p>Ideally, I'd like to have a class let's say it ExportTable that would extend the Table class of django-tables2 and would be usable as a replacement - when I'd create my table using the ExportTable as a base class then the button and the view would have the required components to export the table. From what I can understand, this is not possible :(</p>\n\n<p>Can somebody propose to me which way should I go to extend django-tables2 in order to be able to add the \"export\" functionality in the most DRY way possible ? Meaning that I'd be able to use only the {% render_table table %} tag in my templates (or an extension to that) and without the need to add checks to my views to see if the user has clicked the export button (and of course without the need to add extra views and url routes just to handle that). Is generic class views the way to go ?</p>\n\n<p>I will accept the most DRY and complete (I'd like to have some source code with comments please) answer :)</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13063157,"title":"How to get model in django in updateView","body":"<p>I have this code</p>\n\n<pre><code>class PbsObjectUpdate(UpdateView):\n    def get_template_names(self):\n        model_name = self.model.__name__\n</code></pre>\n\n<p>I can get the model inside any function by using </p>\n\n<pre><code>self.model.__name__\n</code></pre>\n\n<p>But how can get that outside the function and just below the class i.e</p>\n\n<pre><code>class PbsObjectUpdate(UpdateView):\n      model_name = model.__name__\n</code></pre>\n\n<p>because i don't ahve self in that part</p>\n"},{"tags":["python","django","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13059104,"title":"Not work variables in django templates","body":"<p>My context dictionary not sending to my templates. \nI have function</p>\n\n<pre><code>from django.shortcuts import render_to_response\nfrom django.template import RequestContext\ndef home(request):\n  return render_to_response('home.html',{'test':'test'},context_instance=RequestContext(request))\n</code></pre>\n\n<p>and i have simple template such as:</p>\n\n<pre><code>&lt;html&gt;\n&lt;body&gt;\nmy test == {{test}}\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>When i open my site in browser, i have \"my test == \".\nsettings.py is default. I dont use something custom. What the problem?\nServer is apache with wsgi module.</p>\n"},{"tags":["python","regex","django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13062540,"title":"Replacing Text Using Regular Expression in Python With Named Parameters","body":"<p>I have the string <code>\"(r'^users/', include('users.urls')),\"</code>. I want user to be able to change it to say <code>\"(r'^users_part_has_been_changed_by_user/', include('users.urls')),\"</code></p>\n\n<p>The regular expression is <code>'\\s*[url]?\\(r?[\"|\\'](?P&lt;pattern&gt;[^\\'\"]+)[\"|\\'],\\s*include\\([\"|\\'](?P&lt;include&gt;[^\\'\"]+)[\"|\\']\\)\\),'</code></p>\n\n<p><img src=\"http://i.stack.imgur.com/Apm5D.gif\" alt=\"enter image description here\"></p>\n"},{"tags":["python","django","datetime","django-queryset"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13057197,"title":"Django Datetime Query","body":"<p>What's the most efficient way to query for objects created today (or for a specific day a given number of days in the past) in a timezone aware way in Django? </p>\n\n<p>I know there are a lot of questions about this, but most answers don't incorporate timezone awareness, there doesn't seem to be any definitive recent answers, and most solutions will produce the naive datetime warning:</p>\n\n<blockquote>\n  <p>RuntimeWarning: DateTimeField received a naive datetime (2012-10-23\n  00:00:00) while time zone support is active.</p>\n</blockquote>\n\n<p>I'm running Django 1.5 with timezone support and am using pytz and the UTC timezone throughout.</p>\n"},{"tags":["python","django","google-app-engine","queryset"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":12917270,"title":"Database error: Lookup type 'in' can't be negated","body":"<p>I am using Django framework, appengine database.</p>\n\n<p>My code for model is:</p>\n\n<pre><code>class Group(models.Model):\n    name = models.CharField(max_length=200)\n    ispublic = models.BooleanField()\n    logo = models.CharField(max_length=200)\n    description = models.CharField(max_length=200)\n    groupwebsite = models.CharField(max_length=200)\n    owner = models.ForeignKey('profile')\n\n\nclass Group_members(models.Model):\n    profile = models.CharField(max_length=200)\n    group = models.ForeignKey('group')\n</code></pre>\n\n<p>I am querying on <code>Group_members</code> to remove group. My query is as follows:</p>\n\n<pre><code>groups = Group_members.objects.filter(Q(profile=profile.id),~Q(group__in=group_id)\n</code></pre>\n\n<p>INFO:</p>\n\n<ol>\n<li><code>group_id = ['128','52']</code></li>\n<li><code>group</code> is a foreign key to group model</li>\n</ol>\n\n<p>My problem is when I run this query, it throws Database error: <code>Lookup type 'in' can't be negated</code>.</p>\n\n<p>I have also performed query using <code>__in</code> it worked fine but does not work for foreign key.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["django","jade","pyjade"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13029876,"title":"{{ STATIC_URL }} with pyjade in django","body":"<p>I have some trouble adding my CSS in my template using {{ STATIC_URL }}. The tag does not work inside the link markup, but works anywhere else. \nThis:</p>\n\n<pre><code>{{ STATIC_URL }}\n</code></pre>\n\n<p>correctly translated into </p>\n\n<pre><code>/static/\n</code></pre>\n\n<p>, but </p>\n\n<pre><code>link(href=\"{{ STATIC_URL }}css/bla.css\"\n</code></pre>\n\n<p>become</p>\n\n<pre><code>&lt;link href=\"{{ STATIC_URL }}css/bla.css\"&gt;\n</code></pre>\n\n<p>I use pyjade with Django. Anybody can help on this?</p>\n\n<hr>\n\n<p>edit\nI found the answer:\nif you want to use static attributes, use '!=' instead of '='. Example:</p>\n\n<pre><code>link(href!=\"{{ STATIC_URL }}css/bla.css\"\n</code></pre>\n"},{"tags":["django","django-serializer"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13061198,"title":"Django Serializer AttributeError: 'unicode' object has no attribute 'isoformat'","body":"<p>I'm trying to serialize an instance of a (customized) Django User Model like so:</p>\n\n<p>In models.py:</p>\n\n<pre><code>Class Employee(User):\n    company = models.ForeignKey('Company')\n    additionalField1\n    additionalField2\n    etc....\n</code></pre>\n\n<p>In the Employee model above, in addition to the attributes inherited from the User model, I use the following model field types: CharField(), NullBooleanField(), IntegerField(), DateField(), DecimalField()</p>\n\n<p>The code in question:</p>\n\n<pre><code>employee = Employee()\n(snip large amounts of code that sets various attributes for employee)\nserializers.serialize(\"json\", [employee, ])\n</code></pre>\n\n<p>(I have WadOfStuff's Django full serializer plugin installed, btw, in case that matters -- but in this case I believe it should be defaulting to the standard Django serializer because I'm not using any of the full serializer's functionality in this case)</p>\n\n<p>The employee __dict__ (with a few key fields anonymized) right before serialization is attempted:</p>\n\n<pre><code>{'status': u'Act', 'last_name': u'Doe', 'payFrequency': u'Mo', '_state':\n &lt;django.db.models.base.ModelState object at 0x15be890&gt;, 'sex': u'M', 'user_ptr_id': \nNone, 'is_staff': False, 'isRegistered': False, 'hireDate': u'2012-08-01', 'id': None, \n'date_joined': datetime.datetime(2012, 10, 25, 2, 39, 22, 793015, tzinfo=&lt;UTC&gt;), \n'city': u'San Francisco', 'first_name': u'John', 'zip': u'94114', u'employmentType': \nu'FT', 'company_id': 4, 'compType': u'S', 'is_superuser': False, 'state': u'CA', \n'last_login': datetime.datetime(2012, 10, 25, 2, 39, 22, 792983, tzinfo=&lt;UTC&gt;), \n'email': '', 'username': 'tu7wwhyskewcpheyoq4lk3i3l', 'address2': '', 'is_active': \nTrue, 'phone': '', 'address': u'111 Cherry Lane', 'password': \n'pbkdf2_sha256$10000$OAlOtfQClAV2$OC9oCe/9P5hjc4nWd1ZW6cY117PmW1pny8J41axr6mM=', \n'salary': u'10833.00', 'standardHours': None, 'dob': u'1980-04-01', 'socialSecurity': \nu'555555555', 'middleInitial': '', 'payRate': None}\n</code></pre>\n\n<p>Partial traceback:</p>\n\n<pre><code>File \"/usr/lib/python2.6/site-packages/django/core/serializers/__init__.py\", l                                                                                                                     ine 98, in serialize\ns.serialize(queryset, **options)\nFile \"/usr/lib/python2.6/site-packages/wadofstuff/django/serializers/base.py\",                                                                                                                      line 52, in serialize\nself.handle_field(obj, field)\nFile \"/usr/lib/python2.6/site-packages/wadofstuff/django/serializers/python.py                                                                                                                     \", line 71, in handle_field\nself._fields[field.name] = field.value_to_string(obj)\nFile \"/usr/lib/python2.6/site-packages/django/db/models/fields/__init__.py\", l                                                                                                                     ine 722, in value_to_string\nreturn '' if val is None else val.isoformat()\nAttributeError: 'unicode' object has no attribute 'isoformat'\n</code></pre>\n\n<p>Any ideas what might be causing the error or how I can get serialization working in this case? Presumably there is some kind of attribute that the Serializer doesn't like -- how can I figure out which one?</p>\n"},{"tags":["django"],"answer_count":4,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":2266,"score":5,"question_id":5137042,"title":"How can I get Django to print the debug information to the console?","body":"<p>I'm using urlib to hit my app not a browser so I can't see the debug screen when an error occurs. What's the best way to send the normal debug info to the console or a file?</p>\n\n<p>Edit: I'm already catching the output of the page but when I print that to the screen it's filled with tons of useless html. can I get just the error?</p>\n"},{"tags":["django","oauth2"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":149,"score":2,"question_id":11458179,"title":"Type Error: character mapping must return integer, None or unicode","body":"<p>I am trying to fetch information from linkedin but I keep getting the following error?</p>\n\n<p>I have searched around but the fix I saw was only for those getting the error when using djangopiston. Can anyone help me fix this?</p>\n\n<pre><code>Environment:\n\n\nRequest Method: GET\nRequest URL: http://127.0.0.1:8000/jobs/1/match/\n\nDjango Version: 1.3.1\nPython Version: 2.7.2\nInstalled Applications:\n['django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.sites',\n 'django.contrib.messages',\n 'django.contrib.flatpages',\n 'django.contrib.admin',\n 'django.contrib.staticfiles',\n 'compress',\n 'south',\n 'filer',\n 'easy_thumbnails',\n 'registration',\n 'socialregistration',\n 'socialregistration.contrib.facebook',\n 'socialregistration.contrib.twitter',\n 'socialregistration.contrib.linkedin',\n 'socialregistration.contrib.openid',\n 'privatebeta',\n 'api',\n 'profiles',\n 'jobs',\n 'misc']\nInstalled Middleware:\n('django.middleware.common.CommonMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.middleware.csrf.CsrfResponseMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware',\n 'socialregistration.contrib.facebook.middleware.FacebookMiddleware',\n 'socialregistration.contrib.linkedin.middleware.LinkedInMiddleware',\n 'misc.middleware.SubdomainMiddleware',\n 'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware')\n\n\n    Traceback:\n    File \"/home/arlus/jobmatch/local/lib/python2.7/site-packages/django/core/handlers/base.py\" in get_response\n  111.                         response = callback(request, *callback_args, **callback_kwargs)\n    File \"/home/arlus/jobmatch/local/lib/python2.7/site-packages/django/utils/decorators.py\" in _wrapped_view\n  93.                     response = view_func(request, *args, **kwargs)\n    File \"/home/arlus/jobmatch/local/lib/python2.7/site-packages/django/contrib/auth/decorators.py\" in _wrapped_view\n  23.                 return view_func(request, *args, **kwargs)\n    File \"jobs/views.py\" in match\n  60.         matches = linkedin_api.get_connections(fields=['headline', 'summary',]).encode('utf-8')\n    File \"../lib/linkedin/linkedin.py\" in get_connections\n  291.             response = self._do_normal_query(raw_url)\n    File \"../lib/linkedin/linkedin.py\" in _do_normal_query\n  757.                                     signature_dict, self._access_token_secret, method, update=False)\n    File \"../lib/linkedin/linkedin.py\" in _calc_signature\n  789.         hashed = hmac.new(self._calc_key(token_secret), signature_base_string, sha)\nFile \"/usr/lib/python2.7/hmac.py\" in new\n  133.     return HMAC(key, msg, digestmod)\nFile \"/usr/lib/python2.7/hmac.py\" in __init__\n  72.         self.outer.update(key.translate(trans_5C))\n\n    Exception Type: TypeError at /jobs/1/match/\n    Exception Value: character mapping must return integer, None or unicode\n</code></pre>\n"},{"tags":["php","python","django","symfony2","celery"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":99,"score":2,"question_id":12016242,"title":"Is there any Celeryd or Celery (for Django/Python) type altenative for Symfony 2 framework","body":"<p>I am a big fan of <a href=\"http://en.wikipedia.org/wiki/Celery_Task_Queue\" rel=\"nofollow\">Celery</a> for executing scheduled tasks in Django. I am now using <a href=\"http://en.wikipedia.org/wiki/Symfony\" rel=\"nofollow\">Symfony</a>&nbsp;2 and see that it is almost similar to Django framework.</p>\n\n<p>I wonder if there is something similar to Celery in Symfony for scheduling task queues.</p>\n"},{"tags":["django","google-charts","django-template-tags"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12930169,"title":"Django put forloop.counter0 into custom tag argument list possible?","body":"<p>So I am using django-google-charts to generate bar chart. Here the chart is drawn in the \"out\" div.\nHowever I want to generate more than one charts in one page, within different div, for example chart0 in \"out0\", chart1 in \"out1\", chart2 in \"out2\".</p>\n\n<pre><code>{% load googlecharts %}\n&lt;div id=\"out\"&gt;&lt;/div&gt;\n{% googlecharts %}\n    {# some code here #}\n    {% graph \"out\" \"out_data\" \"out_options\" %}\n{% endgooglecharts %}\n</code></pre>\n\n<p>So I tried to modify the <code>{% graph \"out\" \"out_data\" \"out_options\" %}</code>, my intention was\n<code>{% graph out|add:{{ forloop.counter0 }} \"out_data\" \"out_options\" %}</code> so that graph output source will be replaced by out0, out1, out2, etc.</p>\n\n<p>However the use of  {{}} inside {{%%}} is not allowed. Plus the graph tag will take whatever at the first place as a string parameter as separated by comma.</p>\n\n<p>Is it possible to solve the problem on the template side?</p>\n\n<p>Thanks.</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13060439,"title":"detecting user timezones in model","body":"<p>I need to get user timezones in order to convert a naive datetime to local time. However it's for an admin view, so it looks like I'm pretty much stuck fitting this into the model. request.session.get('django_timezone') is not available in the model, so how can you detect the timezone? </p>\n"},{"tags":["django","django-models","django-views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13049065,"title":"Django model filter not pulling in object","body":"<p>I'm using Django 1.4 with Python 2.7 on Ubuntu 12.04.</p>\n\n<p>I have a template that is supposed to show a product and a list of product features for each product and for some reason the features don't show in the template.</p>\n\n<p>Here is the view:</p>\n\n<pre><code>@login_required\ndef view_products(request):\n    \"\"\"\n    ..  function:: view_products()\n\n        View the Products\n\n        :param request: Django Request object\n    \"\"\"\n\n    data = { 'user' : request.user }\n    if (request.user.is_authenticated() and request.user.is_superuser):\n        products = Products.objects.all()\n\n        add_feature_form = rsb.forms.AddProductFeatureForm();\n        data.update({ 'form' : add_feature_form })\n        data.update({ 'products' : products })\n        data.update(csrf(request))\n\n        return render_to_response(\"view_products.html\", data)\n\n    return render_to_response(\"index.html\", data)\n</code></pre>\n\n<p>Here is the portion of the template working with the product features:</p>\n\n<pre><code>&lt;table&gt;\n    {% for product in products %}\n        &lt;tr&gt;\n            &lt;td align=\"right\"&gt;Product Name:&lt;/td&gt;&lt;td&gt;{{ product.name }}&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td align=\"right\"&gt;Price:&lt;br /&gt;&lt;/td&gt;&lt;td&gt;${{ product.price }}&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;ul&gt;\n            {% for productfeature in product.productfeature_set.all %}\n                &lt;form action=\"/removeProductFeature/\" method=\"post\"&gt;{% csrf_token %}\n                &lt;li&gt;\n                    {{ productfeature.feature }}\n                    &lt;input type=\"hidden\" name=\"feature\" value={{ productfeature.feature }}&gt;\n                    &lt;input type=\"hidden\" name=\"product_id\" value={{ product.id }}&gt;\n                    &lt;label class=\"formlabel\"&gt;&amp;nbsp;&lt;/label&gt;&lt;input type=\"submit\" value=\"Remove  &amp;#9658;\"&gt;\n                &lt;/tr&gt;\n                &lt;/form&gt;\n            {% endfor %}\n            &lt;/ul&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;form action=\"/addProductFeature/\" method=\"post\"&gt;{% csrf_token %}\n            &lt;table&gt;\n                &lt;tr&gt;\n                    &lt;td align=\"right\"&gt;&lt;label class=\"formlabel\"&gt;Add Feature:&lt;br /&gt;&lt;/label&gt;&lt;/td&gt;&lt;td&gt;{{ form.feature }}&lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;input type=\"hidden\" name=\"product_id\" value={{ product.id }}&gt;\n                &lt;tr&gt;\n                    &lt;td align=\"right\"&gt;&lt;label class=\"formlabel\"&gt;&amp;nbsp;&lt;/label&gt;&lt;/td&gt;&lt;td&gt;&lt;input type=\"submit\" value=\"Add  &amp;#9658;\"&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/form&gt;\n            &lt;/table&gt;\n        &lt;/tr&gt;\n   {% endfor %}\n&lt;/table&gt;\n</code></pre>\n\n<p>Basically this template should show you a product.  Each feature will be listed below it with the option to \"remove\" that feature.  Then, at the bottom, a field that allows you to add additional features.</p>\n\n<p>The existing features do not show up at all.  Any suggestions on what I might be doing wrong?</p>\n\n<p>UPDATE 1:</p>\n\n<p>I missed an <code>s</code> in the template.  <code>product.productfeatures_set.all</code> not <code>product.productfeature_set.all</code>.  I'm good to go.  Thanks all!</p>\n"},{"tags":["django","filter","admin"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13060433,"title":"Django Admin List Filter Specific Date","body":"<p>Is there a way to implement an admin list filter that allows me to pick a specific date for a field on a model?</p>\n\n<p>For instance, I have an Order model with a <code>order_date</code> field and I wanna offer a filter that allows the user to put in a specific date such as \"06-24-2012\" on the admin backend and return a queryset with all the orders having an \"order_date\" of \"06-24-2012\".</p>\n\n<p>I know how to implement custom filters via SimpleListFilter, but it doesn't appear that I could use a custom form field in lieu of pre-named filter options like <code>today</code> and <code>tomorrow</code>. </p>\n\n<p>Is this only achievable via custom html templates?</p>\n"},{"tags":["python","django","dictionary","django-queryset","multidimensional"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13059783,"title":"Query Filter for value from multidimensional dictionary?","body":"<p>I'm new to Python/Django and i have a question.\nI need to get a QuerySet filtered by a Value from a multidimensional dictionary (JSONField).\nSo far, I got this:</p>\n\n<pre><code>def make_cond(name, value):\n    from django.utils import simplejson\n    cond = simplejson.dumps({key:value})[1:-1] # remove '{' and '}'\n    return ' ' + cond # avoid '\"'\n\nPost.objects.filter(JSONField__contains=make_cond('key', 'value')) \n</code></pre>\n\n<p>That works, but only for the 1st dimension of the dict.\nHow can I reach the other dimensions?</p>\n"},{"tags":["database","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13060044,"title":"no such table -- django","body":"<p>I am using south, and I have syncdb but alas i get stuck with this database error, can you help me fix this and maybe tell me how to fix something like this in the future.</p>\n\n<p>this missing database table error is comming up in  a couple of different places dealing with something called salesflow_contact I have a folder salesflow with a models.py file with a class of Contact with a capitol,</p>\n\n<p>the error shown is from trying to post some content to the table, but i also get an error with the pagination view browsecontacts</p>\n\n<pre><code>Environment:\n\n\nRequest Method: POST\nRequest URL: http://127.0.0.1:8000/addacontact\n\nDjango Version: 1.4.2\nPython Version: 2.7.3\nInstalled Applications:\n('django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.sites',\n 'django.contrib.messages',\n 'django.contrib.staticfiles',\n 'django.contrib.admin',\n 'django.contrib.admindocs',\n 'south',\n 'sekizai')\nInstalled Middleware:\n('django.middleware.common.CommonMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware',\n 'django.middleware.clickjacking.XFrameOptionsMiddleware')\n\n\nTraceback:\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/handlers/base.py\" in get_response\n  111.                         response = callback(request, *callback_args, **callback_kwargs)\nFile \"/home/brian/projects/steprider/steprider/views.py\" in Add_a_contact\n  36.           new_contact = form.save(request.user)\nFile \"/home/brian/projects/steprider/salesflow/forms.py\" in save\n  23.       contact.save()\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/base.py\" in save\n  463.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/base.py\" in save_base\n  551.                 result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/manager.py\" in _insert\n  203.         return insert_query(self.model, objs, fields, **kwargs)\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/query.py\" in insert_query\n  1593.     return query.get_compiler(using=using).execute_sql(return_id)\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/sql/compiler.py\" in execute_sql\n  909.         for sql, params in self.as_sql():\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/sql/compiler.py\" in as_sql\n  872.                 for obj in self.query.objs\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/django_extensions-0.9-py2.7.egg/django_extensions/db/fields/__init__.py\" in pre_save\n  135.         value = unicode(self.create_slug(model_instance, add))\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/django_extensions-0.9-py2.7.egg/django_extensions/db/fields/__init__.py\" in create_slug\n  122.         while not slug or queryset.filter(**kwargs):\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/query.py\" in __nonzero__\n  130.             iter(self).next()\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/query.py\" in _result_iter\n  118.                 self._fill_cache()\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/query.py\" in _fill_cache\n  892.                     self._result_cache.append(self._iter.next())\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/query.py\" in iterator\n  291.         for row in compiler.results_iter():\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/sql/compiler.py\" in results_iter\n  763.         for rows in self.execute_sql(MULTI):\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/models/sql/compiler.py\" in execute_sql\n  818.         cursor.execute(sql, params)\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/backends/util.py\" in execute\n  40.             return self.cursor.execute(sql, params)\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/db/backends/sqlite3/base.py\" in execute\n  344.             return Database.Cursor.execute(self, query, params)\n\nException Type: DatabaseError at /addacontact\nException Value: no such table: salesflow_contact\n\n\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n#\n#  steprider.salesflow.forms.py\n#  \n#  Copyright 2012 BRIAN SCOTT CARPENTER &lt;KlanestroTalisman@gmail.com&gt;\n\nfrom django.forms import ModelForm\nfrom salesflow import models\nfrom django import forms\nfrom django.template.defaultfilters import slugify\n\nclass ContactForm(ModelForm):\n    description = forms.CharField(widget=forms.Textarea)\n\n    class Meta:\n        model = models.Contact\n        exclude = (\"user\",\"slug\")\n\n    def save(self, user):\n        contact = super(ContactForm, self).save(commit=False)\n        contact.user = user\n        contact.save()\n        return contact\n\nclass Contact_History_Form:\n\n    class Meta:\n        model = models.Contact_History\n        exclude = (\"user\",\"slug\")\n\n\n\n\n\n\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n#\n#  views.py\n#  \n#  Copyright 2012 BRIAN SCOTT CARPENTER &lt;KlanestroTalisman@gmail.com&gt;\nfrom django.shortcuts import render_to_response,get_object_or_404\nfrom django.template import RequestContext\nfrom salesflow.forms import *\nfrom django.core.paginator import Paginator, EmptyPage, PageNotAnInteger\n\nfrom salesflow.models import Contact\n\ndef home (request):\n    \"\"\" This is the Home view\"\"\"\n    return render_to_response(('index.html') ,context_instance=RequestContext(request))\n\n\ndef server_error(request, template_name='templates/500.html'):\n    \"\"\"\n    500 error handler.\n    Templates: `500.html`\n    Context:\n    STATIC_URL\n      Path of static media (e.g. \"media.example.org\")\n    \"\"\"\n    t = loader.get_template(template_name)\n    return HttpResponseServerError(\n        t.render(Context({'STATIC_URL': settings.STATIC_URL})))\n\ndef Add_a_contact(request):\n    \"\"\"give them a page so they can donate and save it to a database.\"\"\"\n    if request.method == 'POST':\n        form = ContactForm(request.POST,request.FILES)\n        if form.is_valid():\n            new_contact = form.save(request.user)\n            return HttpResponseRedirect(reverse(item, args=(new_contact.slug,)))\n    else:\n        form = ContactForm()\n    return render_to_response('salesflow/addacontact.html',{'form': form},context_instance=RequestContext(request))\n\ndef browse_contacts(request):\n    contact_list = Contact.objects.all()\n    paginator = Paginator(contact_list,15)\n\n    page = request.GET.get('page')\n\n    try:\n        contacts = paginator.page(page)\n    except PageNotAnInteger:\n        # If page is not an integer, deliver first page.\n        contacts = paginator.page(1)\n    except EmptyPage:\n        # If page is out of range (e.g. 9999), deliver last page of results.\n        contacts = paginator.page(paginator.num_pages)\n\n    return render_to_response('salesflow/browsecontacts.html',\n    {\"contacts\":contacts,\n    \"site\":settings.SITE_DOMAIN},\n    context_instance=RequestContext(request))\n</code></pre>\n"},{"tags":["django","django-models","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":101,"score":0,"question_id":13040580,"title":"Django FileField not saving to upload_to location","body":"<p>I have an <code>Attachment</code> model that has a <code>FileField</code> in a Django 1.4.1 app.  This <code>FileField</code> has a callable <code>upload_to</code> parameter which, per the <a href=\"https://docs.djangoproject.com/en/dev/ref/models/fields/#filefield\" rel=\"nofollow\">Django docs</a> should be called when the form (and therefore the model) is saved.  </p>\n\n<p><strong>When I run <code>FormTest</code> below, the <code>upload_to</code> callable is never called and the file therefore does not appear in the location provided by the <code>upload_to</code> method.  What am I doing wrong?</strong></p>\n\n<p>Notice that in the passing tests in <code>ModelTest</code> (also below), the <code>upload_to</code> method works as expected.</p>\n\n<p>Things that I have looked at that do <strong>not</strong> seem to be the problem:</p>\n\n<ul>\n<li>The order of the properties in the <code>Attachment</code> model.  I found some questions that seem to indicate that this order matters.  Since my <code>upload_to</code> method uses the <code>directory</code> property, I thought his might cause the problem.  It does not.  This wouldn't cause the method to not be called anyway.</li>\n<li>Perhaps <code>is_valid()</code> is not being called.  Nope, I have confirmed that it is.</li>\n<li>...</li>\n</ul>\n\n<p><strong>Test:</strong></p>\n\n<pre><code>from core.forms.attachments import AttachmentForm\nfrom django.test import TestCase\nimport unittest\nfrom django.core.files.uploadedfile import SimpleUploadedFile\nfrom django.core.files.storage import default_storage\n\ndef suite():\n    return unittest.TestSuite(\n        [\n            unittest.TestLoader().loadTestsFromTestCase(FormTest),\n        ]\n    )\n\nclass FormTest(TestCase):\n    def test_form_1(self):\n        filename = 'filename'\n        f = file(filename)\n        data = {'name':'name',}\n        file_data = {'attachment_file':SimpleUploadedFile(f.name,f.read()),}\n        form = AttachmentForm(data=data,files=file_data)\n        self.assertTrue(form.is_valid())\n        attachment = form.save()\n        root_directory = 'attachments'\n        upload_location = root_directory + '/' + attachment.directory + '/' + filename\n        self.assertTrue(attachment.attachment_file)                 # Fails\n        self.assertTrue(default_storage.exists(upload_location))    # Fails\n</code></pre>\n\n<p><strong>Attachment Model:</strong></p>\n\n<pre><code>from django.db import models\nfrom parent_mixins import Parent_Mixin\nimport uuid\nfrom django.db.models.signals import pre_delete,pre_save\nfrom dirtyfields import DirtyFieldsMixin\n\ndef upload_to(instance,filename):\n    return 'attachments/' + instance.directory + '/' + filename\n\ndef uuid_directory_name():\n    return uuid.uuid4().hex\n\nclass Attachment(DirtyFieldsMixin,Parent_Mixin,models.Model):\n    attachment_file = models.FileField(blank=True,null=True,upload_to=upload_to)\n    directory = models.CharField(blank=False,default=uuid_directory_name,null=False,max_length=32)\n    name = models.CharField(blank=False,default=None,null=False,max_length=128)\n\n    class Meta:\n        app_label = 'core'\n\n    def __str__(self):\n        return unicode(self).encode('utf-8')\n\n    def __unicode__(self):\n        return unicode(self.name)\n\n    @models.permalink\n    def get_absolute_url(self):\n        return('core_attachments_update',(),{'pk': self.pk})\n\n    # def save(self,*args,**kwargs):\n    #     super(Attachment,self).save(*args,**kwargs)\n\ndef pre_delete_callback(sender, instance, *args, **kwargs):\n    if not isinstance(instance, Attachment): return\n    if not instance.attachment_file: return\n    instance.attachment_file.delete(save=False)\n\ndef pre_save_callback(sender, instance, *args, **kwargs):\n    if not isinstance(instance, Attachment): return\n    if not instance.attachment_file: return\n    if instance.is_dirty():\n        dirty_fields = instance.get_dirty_fields()\n        if 'attachment_file' in dirty_fields:\n            old_attachment_file = dirty_fields['attachment_file']\n            old_attachment_file.delete()\n\npre_delete.connect(pre_delete_callback)\npre_save.connect(pre_save_callback)\n</code></pre>\n\n<p><strong>Attachment Form:</strong></p>\n\n<pre><code>from ..models.attachments import Attachment\nfrom crispy_forms.helper import FormHelper\nfrom crispy_forms.layout import Div,Layout,HTML,Field,Fieldset,Button,ButtonHolder,Submit\nfrom django import forms\n\nclass AttachmentFormHelper(FormHelper):\n    form_tag=False\n\n    layout = Layout(\n        Div(\n            Div(\n                Field('name',css_class='span4'),\n                Field('attachment_file',css_class='span4'),\n                css_class='span4',\n            ),\n            css_class='row',\n        ),\n    )\n\nclass AttachmentForm(forms.ModelForm):\n    helper = AttachmentFormHelper()\n\n    class Meta:\n        fields=('attachment_file','name')\n        model = Attachment\n\nclass AttachmentInlineFormHelper(FormHelper):\n    form_tag=False\n    form_style='inline'\n\n    layout = Layout(\n        Div(\n            Div(\n                Field('name',css_class='span4'),\n                Field('attachment_file',css_class='span4'),\n                Field('DELETE',css_class='span4'),\n                css_class='span4',\n            ),\n            css_class='row',\n        ),\n    )\n\nclass AttachmentInlineForm(forms.ModelForm):\n    helper = AttachmentInlineFormHelper()\n\n    class Meta:\n        fields=('attachment_file','name')\n        model = Attachment\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I also do testing on the <code>Attachment</code> model class with these unit tests -- which all pass:</p>\n\n<pre><code>from core.models.attachments import Attachment\nfrom core.models.attachments import upload_to\nfrom django.test import TestCase\nimport unittest\nfrom django.core.files.storage import default_storage\nfrom django.core.files.base import ContentFile\n\ndef suite():\n    return unittest.TestSuite(\n        [\n            unittest.TestLoader().loadTestsFromTestCase(ModelTest),\n        ]\n    )\n\nclass ModelTest(TestCase):\n    def test_model_minimum_fields(self):\n        attachment = Attachment(name='name')\n        attachment.attachment_file.save('test.txt',ContentFile(\"hello world\"))\n        attachment.save()\n        self.assertEqual(str(attachment),'name')\n        self.assertEqual(unicode(attachment),'name')\n        self.assertTrue(attachment.directory)\n\n    # def test_model_full_fields(self):\n    #     attachment = Attachment()\n    #     attachement.save()\n\n    def test_file_operations_basic(self):\n        root_directory = 'attachments'\n        filename = 'test.txt'\n        attachment = Attachment(name='name')\n        attachment.attachment_file.save(filename,ContentFile('test'))\n        attachment.save()\n        upload_location = root_directory + '/' + attachment.directory + '/' + filename\n        self.assertEqual(upload_to(attachment,filename),upload_location)\n        self.assertTrue(default_storage.exists(upload_location))\n\n    def test_file_operations_delete(self):\n        root_directory = 'attachments'\n        filename = 'test.txt'\n        attachment = Attachment(name='name')\n        attachment.attachment_file.save(filename,ContentFile('test'))\n        attachment.save()\n        upload_location = upload_to(attachment,filename)\n        attachment.delete()\n        self.assertFalse(default_storage.exists(upload_location))\n\n    def test_file_operations_change(self):\n        root_directory = 'attachments'\n        filename_1 = 'test_1.txt'\n        attachment = Attachment(name='name')\n        attachment.attachment_file.save(filename_1,ContentFile('test'))\n        attachment.save()\n        upload_location_1 = upload_to(attachment,filename_1)\n        self.assertTrue(default_storage.exists(upload_location_1))\n\n        filename_2 = 'test_2.txt'\n        attachment.attachment_file.save(filename_2,ContentFile('test'))\n        attachment.save()\n        upload_location_2 = upload_to(attachment,filename_2)\n        self.assertTrue(default_storage.exists(upload_location_2))\n        self.assertFalse(default_storage.exists(upload_location_1))\n</code></pre>\n"},{"tags":["django","linux","facebook","port"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13059291,"title":"Django and Linux, port forwarding","body":"<p>I'm developing my first Django application, I have installed allauth to permit openid login.\nI'm trying to use no-ip dns to avoid the problem of the dynamic ip, for register my app on facebook and testing from my machine. But I don't know how to make my django test server visible from outside on port 80.\nIf I force it using sudo it gave me problems on logging to postgrel database, but if I not use sudo it says that I can't use that port (also if apache is off).</p>\n\n<p>Thank you for your help.</p>\n"},{"tags":["django","django-forms","django-templates","django-views"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13059428,"title":"several forms from one model with different instance in single view","body":"<p>I have model named Post. Users add their posts and they are all listed in page my_posts. Now what I need is that user can edit posts on the same page when have more then one post. </p>\n\n<pre><code>forms.py\nclass NewPostForm(forms.ModelForm):\n    def __init__(self, *args, **kwargs):\n        super(NewPostForm, self).__init__(*args, **kwargs)\n\n        class Meta:\n            model = Post\n            exclude =['date','seen']\n\nview.py\ndef new_post(request):\n    myuser = request.user\n    if myuser.is_authenticated():\n        form = NewPostForm()\n        if request.method = 'POST':\n            form = NewPostForm(request.POST)\n            if form.is_valid():\n                form.save()\n                return HttpResponseRedirect(...)\n        return render_to_response(...)\n    else:\n       return HttpResponseRedirect(...)\n</code></pre>\n\n<p>Above works as expected but now I need view to display all posts and forms to edit every  post on the same page. Don't understand how to place instance for every form. I'm stack with this but I think it's possible if I have different action in forms <code>action=\"/edit_post_id{{ post.id }}/\"</code>. But how to display correct forms and how to place it with post. something like:</p>\n\n<pre><code>def my_posts(request):\n    myuser = request.user\n    posts = Post.objects.filter(user=myuser)\n    posts_with_forms = ???\n    return render_to_response('post_with_forms':posts_with_forms)\n\n{% for post in posts_with_forms %}\n    {{ post.title }}\n    {{ post.data }}\n    &lt;form action=\"/edit_post_id{{ post.id }}/\"&gt;\n         {{ post.form.as_table }}\n{% endfor %}\n</code></pre>\n"},{"tags":["python","django","static","http-status-code-404"],"answer_count":6,"favorite_count":23,"up_vote_count":18,"down_vote_count":0,"view_count":10771,"score":18,"question_id":4565935,"title":"Django staticfiles app help","body":"<p>I've having a little issue with Django's <a href=\"https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/\">staticfiles app</a>.</p>\n\n<p>I have added </p>\n\n<pre><code>'django.contrib.staticfiles',\n</code></pre>\n\n<p>to my INSTALLED_APPS and have added</p>\n\n<pre><code>STATIC_URL = '/static/'\nSTATIC_ROOT = '/Users/kevdotbadger/django/mylook/static/'\n</code></pre>\n\n<p>to my <code>settings.py</code> file.</p>\n\n<p>All my static files are located within the <code>STATIC_ROOT</code> folder on my Mac.</p>\n\n<p>Now, within my template I use </p>\n\n<pre><code>{{ STATIC_URL }}\n</code></pre>\n\n<p>which correctly renders to <code>/static/</code>.</p>\n\n<p>However</p>\n\n<pre><code>{{ STATIC_URL }}css/style.css\n</code></pre>\n\n<p>result in a 404 error. I'm using the 'runserver' command as the server.</p>\n\n<p>Is there something I'm missing?</p>\n"},{"tags":["django","url","content-management-system","reverse","django-cms"],"answer_count":1,"favorite_count":3,"up_vote_count":2,"down_vote_count":0,"view_count":173,"score":2,"question_id":11216565,"title":"django-cms: urls used by apphooks don't work with reverse() or {% url %}","body":"<p>I'm using django-cms with apphooks to display book detail information.  I need the page with the app hook to accept a slug that specifies which book to display.</p>\n\n<p>I created a page called 'books' and added the apphook 'BookDetailApp'.</p>\n\n<p>Here's what my books.cms_app file looks like:</p>\n\n<pre><code>class BooksApp (CMSApp):\n    name = _('Book Detail Page Application')\n    urls = ['books.urls']\n\napphook_pool.register(BooksApp)\n</code></pre>\n\n<p>Here's what my books.urls looks like:</p>\n\n<pre><code>urlpatterns = patterns('',\n    url(r'^(?P&lt;slug&gt;[\\w\\-]+)?', BookDetailView.as_view(), name='book_detail'),\n)\n</code></pre>\n\n<p>And here's what my books.views file looks like:</p>\n\n<pre><code>class BookDetailView (DetailView):\n    model = Book\n    template_name = 'layouts/book-detail.html'\n    context_object_name = 'book'\n</code></pre>\n\n<p>This all works fine when I go directly to book detail page.\nSo going to <code>http://localhost:8000/books/the-book-slug/</code> works exactly how I want to.</p>\n\n<p>The problem is that I need be able to link to specific book detail pages from promos on the home page and none of the expected methods are working for me.</p>\n\n<p>Using the page_url template tag from django-cms doesn't work because it only accepts one argument, so i can't provide the slug needed to determine which book to display:</p>\n\n<pre><code>&lt;a href=\"{% page_url 'book_detail' %}\"&gt;go&lt;/a&gt;\n</code></pre>\n\n<p>As expected this only redirects to <code>http://localhost:8000/books/</code> which throws an error because the required slug was not included.</p>\n\n<p>So my next options are to use the url template tag or defining an get_absolute_url() function on the model.  Neither of these options work:</p>\n\n<pre><code>&lt;a href=\"{% url book_detail book.slug %}\"&gt;go&lt;/a&gt;\n\ndef get_absolute_url(self):\n    return reverse('book_detail', args=[self.slug])\n</code></pre>\n\n<p>These both result in a NoReverseMatch: Reverse for 'book_detail' not found error.</p>\n\n<p>If I include the books.urls conf in my main url conf then it works.  So it would appear that if the url is only being used by a cms apphook that it can't be reversed by django.</p>\n\n<p>Including books.urls in my main urls seems like a dirty solution and I definitely do not want to hardcode the urls in the template or the get_absolute_url function.  Neither of those solutions seems very 'pythonesque'.</p>\n\n<p>Any suggestions?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Reverse works only if I use the language namespace.  According to documentation specifying language namespace shouldn't be required.</p>\n\n<pre><code>&gt;&gt;&gt; reverse('en:book_detail', args=[book.slug])\n</code></pre>\n"},{"tags":["javascript","ajax","django","post","httpresponse"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13057519,"title":"django ajax Post not posting propely and returns empty message","body":"<p>using django 1.4, I am trying to Post and it seems like its not posting propely, i <code>request.GET.get('type',''</code>) but it prints empty string and the Post response comes (undefined) empty but GET works fine. </p>\n\n<p>my django view:</p>\n\n<pre><code>@csrf_protect\ndef edit_city(request,username):\n    conditions = dict()\n\n    #if request.is_ajax():\n    if request.method == 'GET':\n        conditions = request.method\n#based on http://stackoverflow.com/a/3634778/977622     \n            for filter_key, form_key in (('type',  'type'), ('city', 'city'), ('pois', 'pois'), ('poisdelete', 'poisdelete'), ('kmz', 'kmz'), ('kmzdelete', 'kmzdelete'), ('limits', 'limits'), ('limitsdelete', 'limitsdelete'), ('area_name', 'area_name'), ('action', 'action')):\n                value = request.GET.get(form_key, None)\n                if value:\n                    conditions[filter_key] = value\n                    print filter_key , conditions[filter_key]\n\n    elif request.method == 'POST':\n        print \"TIPO\" , request.GET.get('type','')       \n        #based on http://stackoverflow.com/a/3634778/977622     \n        for filter_key, form_key in (('type',  'type'), ('city', 'city'), ('pois', 'pois'), ('poisdelete', 'poisdelete'), ('kmz', 'kmz'), ('kmzdelete', 'kmzdelete'), ('limits', 'limits'), ('limitsdelete', 'limitsdelete'), ('area_name', 'area_name'), ('action', 'action')):\n            value = request.GET.get(form_key, None)\n            if value:\n                conditions[filter_key] = value\n                print filter_key , conditions[filter_key]\n\n        #Test.objects.filter(**conditions)\n    city_json = json.dumps(conditions)\n\n    return HttpResponse(city_json, mimetype='application/json')\n</code></pre>\n\n<p>here is my javascript code :</p>\n\n<pre><code>function getCookie(name) {\n    var cookieValue = null;\n    if (document.cookie &amp;&amp; document.cookie != '') {\n        var cookies = document.cookie.split(';');\n        for (var i = 0; i &lt; cookies.length; i++) {\n            var cookie = jQuery.trim(cookies[i]);\n            // Does this cookie string begin with the name we want?\n            if (cookie.substring(0, name.length + 1) == (name + '=')) {\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                break;\n            }\n        }\n    }\n    return cookieValue;\n}\nvar csrftoken = getCookie('csrftoken');\n\nfunction csrfSafeMethod(method) {\n    // these HTTP methods do not require CSRF protection\n    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));\n}\nfunction sameOrigin(url) {\n    // test that a given url is a same-origin URL\n    // url could be relative or scheme relative or absolute\n    var host = document.location.host; // host + port\n    var protocol = document.location.protocol;\n    var sr_origin = '//' + host;\n    var origin = protocol + sr_origin;\n    // Allow absolute or scheme relative URLs to same origin\n    return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||\n        (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||\n        // or any other URL that isn't scheme relative or absolute i.e relative.\n        !(/^(\\/\\/|http:|https:).*/.test(url));\n}\n$.ajaxSetup({\nbeforeSend: function(xhr, settings) {\n    if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {\n        // Only send the token to relative URLs i.e. locally.\n        xhr.setRequestHeader(\"X-CSRFToken\",\n                             $('input[name=\"csrfmiddlewaretoken\"]').val());\n    }\n}\n});\n\n$.post(url,{ type : type , city: cityStr, pois: poisStr, poisdelete: poisDeleteStr, kmz: kmzStr,kmzdelete : kmzDeleteStr,limits : limitsStr, area_nameStr : area_nameStr , limitsdelete : limitsDeleteStr},function(data,status){\n                    alert(\"Data: \" + data + \"\\nStatus: \" + status);\n                    console.log(\"newdata\" + data.kmz)\n                });\n</code></pre>\n\n<p>what am i missing?</p>\n"},{"tags":["python","django","email","asynchronous"],"answer_count":2,"favorite_count":3,"up_vote_count":5,"down_vote_count":1,"view_count":1129,"score":4,"question_id":4447081,"title":"how to send asynchronous email using django  ","body":"<p>This is my code:</p>\n\n<pre><code>class EmailThread(threading.Thread):\n    def __init__(self, subject, html_content, recipient_list):\n        self.subject = subject\n        self.recipient_list = recipient_list\n        self.html_content = html_content\n        threading.Thread.__init__(self)\n\n    def run (self):\n        msg = EmailMultiAlternatives(self.subject, self.html_content, EMAIL_HOST_USER, self.recipient_list)\n        #if self.html_content:\n        msg.attach_alternative(True, \"text/html\")\n        msg.send()\n\ndef send_mail(subject, html_content, recipient_list):\n    EmailThread(subject, html_content, recipient_list).start()\n</code></pre>\n\n<p>It doesn't send email. What can I do?</p>\n"},{"tags":["python","django","django-formwizard"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":281,"score":0,"question_id":2583829,"title":"Formwizards for editing in Django","body":"<p>I am in the process of making a webapp, and this webapp needs to have a form wizard. The wizard consists of 3 ModelForms, and it works flawlessly. But I need the second form to be a \"edit form\". That is, i need it to be a form that is passed an instance.</p>\n\n<p>How can you do this with a form wizard? How do you pass in an instance of a model? I see that the FormWizard class has a get_form method, but isnt there a documented way to use the formwizard for editing/reviewing of data?</p>\n"},{"tags":["python","django","virtualenv","pip"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13057103,"title":"Virtualenv wont work on","body":"<p>I have build my virtual env with this command: </p>\n\n<pre><code>virtualenv env --distribute --no-site-packages\n</code></pre>\n\n<p>And then I have installed several modules (django etc) into env with pip, the problem is that when I wanted to run the code on the second machine it would not work, here is what I have done:</p>\n\n<pre><code>visgean@rewitaqia:~/scripty/project_name$ source ./env/bin/activate\n(env)visgean@rewitaqia:~/scripty/project_name$ python\nPython 2.7.1+ (r271:86832, Sep 27 2012, 21:12:17) \n[GCC 4.5.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import django\n&gt;&gt;&gt; django.__file__\n'/home/visgean/scripty/project_name/env/lib/python2.7/site-packages/django/__init__.pyc'\n</code></pre>\n\n<p>but when I want to run it on the second machine: </p>\n\n<pre><code>(env)user@debian:~/project_name$ python\nPython 2.6.6 (r266:84292, Dec 27 2010, 00:02:40) \n[GCC 4.4.5] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import django\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: No module named django\n&gt;&gt;&gt; \n</code></pre>\n\n<p>I wild error appears! The first machine is ubuntu, the second one is ubuntu. There seems to be some broken links in /home/user/project_name/env/lib/python2.7 , is that the problem? and if so, how should I prevent it/repair it?</p>\n"},{"tags":["django","django-haystack"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13057559,"title":"Custom SearchView return empty results","body":"<p>I am trying to do filter using custom SearchView, here is my code:</p>\n\n<pre><code>sqs = SearchQuerySet().filter(content='Testing')\nview = search_view_factory(\n    view_class=SearchView,\n    template='search/results.html',\n    load_all=True, \n    form_class=None,\n    searchqueryset=sqs,\n    )\nreturn view(request)\n</code></pre>\n\n<p>But it keeps on giving me No results found although when printing the sqs, I do get result.</p>\n\n<p>AnyIdea what could be missing in my code ??</p>\n"},{"tags":["django","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13054321,"title":"Pass a URL argument with render_to_response","body":"<p>i use this code to views.py file</p>\n\n<pre><code>@login_required\ndef login_edit_page(request):\n#bla bla\nreturn render_to_response('login_edit_page.html', variables)\n</code></pre>\n\n<p>the problem is that when the return is called, i have to also pass an argument from the URL. for example the URL is /edit?id=1 in this example i want to pass the id. how can i do that?</p>\n\n<p>this is the full code</p>\n\n<pre><code>@login_required\ndef login_edit_page(request):\n    if request.method == 'POST':\n        form = LoginEditForm(request.POST)\n        if form.is_valid():\n            login1 = _login_edit(request, form, request.GET['id'])\n            return HttpResponseRedirect(\n                                        '/user/%s/' % request.user.username\n                                        )\n    id2 = request.GET['id']\n    name=''\n    url=''\n    Login_username =''\n    notes= ''\n    password=''\n    try:\n        login1 = login.objects.get(\n                                   id = id2,\n                                   username=request.user\n                                  )\n        name = login1.name\n        url = login1.loginUrl\n        Login_username = login1.login_username\n        notes = login1.notes\n        password = login1.password\n    except (login.DoesNotExist):\n        pass\n    form = LoginEditForm({\n                          'name': name,\n                          'url': url,\n                          'Login_username': Login_username,\n                          'notes': notes,\n                          'password': password\n                        })\n    variables = RequestContext(request, {\n                                        'form': form\n                                        })\n    login1 = _login_edit(request, form, id2)\n    return render_to_response('login_edit_page.html', variables)\n</code></pre>\n"},{"tags":["javascript","ajax","django","http-post","http-status-code-403"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":13035412,"title":"django ajax post 403 forbidden","body":"<p>using django 1.4 im getting a 403 error when i try to do a post from my javascript do my django server. my get works fine though the problem is only with the post. also tried @csrf_exempt with no luck</p>\n\n<p>UPDATE: I can Post now that i added <code>{% csrf_token %}</code> , but the post response comes empty, although the GET comes correctly, any ideas?</p>\n\n<p>my django view:</p>\n\n<pre><code>@csrf_protect\ndef edit_city(request,username):\n    conditions = dict()\n\n    #if request.is_ajax():\n    if request.method == 'GET':\n        conditions = request.method\n\n    elif request.method == 'POST':\n        print \"TIPO\" , request.GET.get('type','')       \n        #based on http://stackoverflow.com/a/3634778/977622     \n        for filter_key, form_key in (('type',  'type'), ('city', 'city'), ('pois', 'pois'), ('poisdelete', 'poisdelete'), ('kmz', 'kmz'), ('kmzdelete', 'kmzdelete'), ('limits', 'limits'), ('limitsdelete', 'limitsdelete'), ('area_name', 'area_name'), ('action', 'action')):\n            value = request.GET.get(form_key, None)\n            if value:\n                conditions[filter_key] = value\n                print filter_key , conditions[filter_key]\n\n        #Test.objects.filter(**conditions)\n    city_json = json.dumps(conditions)\n\n    return HttpResponse(city_json, mimetype='application/json')\n</code></pre>\n\n<p>here is my javascript code :</p>\n\n<pre><code>function getCookie(name) {\n    var cookieValue = null;\n    if (document.cookie &amp;&amp; document.cookie != '') {\n        var cookies = document.cookie.split(';');\n        for (var i = 0; i &lt; cookies.length; i++) {\n            var cookie = jQuery.trim(cookies[i]);\n            // Does this cookie string begin with the name we want?\n            if (cookie.substring(0, name.length + 1) == (name + '=')) {\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                break;\n            }\n        }\n    }\n    return cookieValue;\n}\nvar csrftoken = getCookie('csrftoken');\n\nfunction csrfSafeMethod(method) {\n    // these HTTP methods do not require CSRF protection\n    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));\n}\nfunction sameOrigin(url) {\n    // test that a given url is a same-origin URL\n    // url could be relative or scheme relative or absolute\n    var host = document.location.host; // host + port\n    var protocol = document.location.protocol;\n    var sr_origin = '//' + host;\n    var origin = protocol + sr_origin;\n    // Allow absolute or scheme relative URLs to same origin\n    return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||\n        (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||\n        // or any other URL that isn't scheme relative or absolute i.e relative.\n        !(/^(\\/\\/|http:|https:).*/.test(url));\n}\n$.ajaxSetup({\nbeforeSend: function(xhr, settings) {\n    if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {\n        // Only send the token to relative URLs i.e. locally.\n        xhr.setRequestHeader(\"X-CSRFToken\",\n                             $('input[name=\"csrfmiddlewaretoken\"]').val());\n    }\n}\n});\n\n$.post(url,{ type : type , city: cityStr, pois: poisStr, poisdelete: poisDeleteStr, kmz: kmzStr,kmzdelete : kmzDeleteStr,limits : limitsStr, area_nameStr : area_nameStr , limitsdelete : limitsDeleteStr},function(data,status){\n                    alert(\"Data: \" + data + \"\\nStatus: \" + status);\n                    console.log(\"newdata\" + data.area_name)\n                });\n</code></pre>\n\n<p>i have also tried from the site with no luck : </p>\n\n<pre><code>$.ajaxSetup({\n    beforeSend: function(xhr, settings) {\n        if (!csrfSafeMethod(settings.type) &amp;&amp; sameOrigin(settings.url)) {\n            // Send the token to same-origin, relative URLs only.\n            // Send the token only if the method warrants CSRF protection\n            // Using the CSRFToken value acquired earlier\n            xhr.setRequestHeader(\"X-CSRFToken\", csrftoken);\n        }\n    }\n});\n</code></pre>\n\n<p>what am i missing?</p>\n"},{"tags":["python","django","mezzanine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13042109,"title":"How to let user login on Mezzanine tutorial website?","body":"<p>I just installed Mezzanine on my linux server. Following the tutorial, with the command set</p>\n\n<pre><code>mezzanine-project project_name\ncd project_name\npython manage.py createdb --noinput\npython manage.py runserver\n</code></pre>\n\n<p>Now I have the first simple site working now.</p>\n\n<p>In the setting, there is a check box about </p>\n\n<p>\"Accounts required for commenting: If True, users must log in to comment\"</p>\n\n<p>But I can't see any log in function provided on the tutorial website.</p>\n\n<p>Should we just handcraft the create account/ log in function? Or is there a better way to do that? Thanks.</p>\n"},{"tags":["python","mysql","sql","django"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":53,"score":2,"question_id":13056922,"title":"Django model: creating small value fixed point","body":"<p><strong>Summary</strong></p>\n\n<p>I'm building a project in Django - and will many small-range positive decimal values (<code>1.25</code>, <code>0.01</code>, etc). In the database (MySQL), it makes sense to store them as <code>value*10^precision</code>. This means instead of storing a <code>float</code> type (4 bytes), I can get away with a <code>SmallInt</code>(2 bytes). This is rad when it's megabytes of data.</p>\n\n<p><strong>Problem</strong>\nThe issue is when Django and the <code>PositiveSmallIntegerField()</code> makes a widget that automatically checks for \"whole number\" values!</p>\n\n<p><em>Option 1:</em> Use a DecimalField() in the model code, and whenever the database changes, I update the SQL to be a SMALLINT(3).</p>\n\n<pre><code>PRECISION=2\n\nclass MyModule(models.Model):\n\n    ...&lt;fields&gt;\n\n    def readySave(self):\n        pseudoDecimalField *= 10**PRECISION\n\n    def setValues(self):\n        pseudoDecimalField /= 10**PRECISION\n\n    def save(self): \n        # pre-save things here\n        self.readySave()\n        super(MyModule, self).save()\n        # post-save things here\n        self.setValues()\n</code></pre>\n\n<p><em>Option 2:</em> Use raw SQL commands when pushing/pulling values.</p>\n\n<p>Any opinions or experiences on the matter are much appreciated. Does anyone have any other ways to make this happen?</p>\n"},{"tags":["django","query"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":35,"score":-3,"question_id":13056497,"title":"Can i get field in another by pk in django","body":"<p>Can i query by django like this below SQL command.</p>\n\n<pre><code>select pk_2 from table2 where (id = pk1);\n\n( Table1 )\npk_1 = 17\n\n( Table2 )\npk_2 = 15\nid = 17\n</code></pre>\n\n<p>Please T^T</p>\n"},{"tags":["python","django","django-templates"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":13056212,"title":"Python/Django: What does this line do?","body":"<p>New to Django</p>\n\n<p>This code adds a user submitted item to a table. Can I get a full explanation of what the return statement is doing? Is it basically returning a list item and saying replace <code>%s</code> with <code>item.text</code>?</p>\n\n<pre><code>def add(request):\n  item = LineItem(text=request.POST[\"text\"])\n  item.save()\n  return HttpResponse(\"&lt;li&gt;%s&lt;/li&gt;\" % item.text)\n</code></pre>\n"},{"tags":["django","django-forms","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":13055722,"title":"Enforcing password strength requirements in Django","body":"<p>I'm working on implementing the code suggested here:</p>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/5226329/enforcing-password-strength-requirements-with-django-contrib-auth-views-password\">Enforcing password strength requirements with django.contrib.auth.views.password_change</a></li>\n</ul>\n\n<p>But with this code:</p>\n\n<pre><code>from django.conf.urls.defaults import include\nfrom django.conf.urls.defaults import patterns\nfrom django.conf import settings\nfrom django.contrib.auth.views import password_change\nfrom django.contrib import admin\nfrom django_pci_auth.views import index\nfrom django_pci_auth.forms import ValidatingPasswordChangeForm\nimport django.contrib.admindocs.urls\n\nadmin.autodiscover()\n\nurlpatterns = patterns(\n    '',  # prefix\n    (r'^admin/', include(admin.site.urls)),\n    (r'^admin/doc/', include(django.contrib.admindocs.urls)),\n    (r'^change_password/$', password_change,\n        {'password_change_form': ValidatingPasswordChangeForm}),\n    (r'', index),\n)\n\nif settings.DEBUG:\n    urlpatterns += patterns(\n        '',\n        (r'^media/(?P&lt;path&gt;.*)$', 'django.views.static.serve',\n            {'document_root': settings.MEDIA_ROOT}),\n    )\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>Environment:\n\n\nRequest Method: GET\nRequest URL: http://127.0.0.1:8000/change_password/\n\nDjango Version: 1.4.2\nPython Version: 2.7.2\nInstalled Applications:\n('django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.sites',\n 'django.contrib.messages',\n 'django.contrib.staticfiles',\n 'django.contrib.admin',\n 'django.contrib.admindocs')\nInstalled Middleware:\n('django.middleware.common.CommonMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware')\n\n\nTraceback:\nFile \"/Users/aclark/Developer/django-pci-auth/lib/python2.7/site-packages/django/core/handlers/base.py\" in get_response\n  111.                         response = callback(request, *callback_args, **callback_kwargs)\nFile \"/Users/aclark/Developer/django-pci-auth/lib/python2.7/site-packages/django/views/decorators/debug.py\" in sensitive_post_parameters_wrapper\n  69.             return view(request, *args, **kwargs)\nFile \"/Users/aclark/Developer/django-pci-auth/lib/python2.7/site-packages/django/utils/decorators.py\" in _wrapped_view\n  91.                     response = view_func(request, *args, **kwargs)\nFile \"/Users/aclark/Developer/django-pci-auth/lib/python2.7/site-packages/django/contrib/auth/decorators.py\" in _wrapped_view\n  20.                 return view_func(request, *args, **kwargs)\nFile \"/Users/aclark/Developer/django-pci-auth/lib/python2.7/site-packages/django/contrib/auth/views.py\" in password_change\n  244.         post_change_redirect = reverse('django.contrib.auth.views.password_change_done')\nFile \"/Users/aclark/Developer/django-pci-auth/lib/python2.7/site-packages/django/core/urlresolvers.py\" in reverse\n  476.     return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))\nFile \"/Users/aclark/Developer/django-pci-auth/lib/python2.7/site-packages/django/core/urlresolvers.py\" in _reverse_with_prefix\n  396.                 \"arguments '%s' not found.\" % (lookup_view_s, args, kwargs))\n\nException Type: NoReverseMatch at /change_password/\nException Value: Reverse for 'django.contrib.auth.views.password_change_done' with arguments '()' and keyword arguments '{}' not found.\n</code></pre>\n\n<p>Code is here: <a href=\"https://github.com/aclark4life/django-pci-auth\" rel=\"nofollow\">https://github.com/aclark4life/django-pci-auth</a></p>\n"},{"tags":["python","mysql","django","apache"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":13048617,"title":"(2002, \"Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)\")","body":"<p>I am running a django based web application with apache. I am able to connecto to mysql from python and linux shell but, when i run the server i am getting the following error. Where am i doing wrong?</p>\n\n<pre><code>OperationalError at /\n\n(2002, \"Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)\")\n\nRequest Method:     GET\nRequest URL:    http://dev.ls.co.uk/\nDjango Version:     1.3\nException Type:     OperationalError\nException Value:    \n\n(2002, \"Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock'   (2)\")\n\nException Location:     build/bdist.linux-x86_64/egg/MySQLdb/connections.py in __init__, line 187\nPython Executable:  /usr/bin/python\nPython Version:     2.4.3\n</code></pre>\n"},{"tags":["django","content-type","generic-relations"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13055880,"title":"Multiple Generic Relations in one model: How do I access all instances for a ContentType?","body":"<p>This question is pretty convoluted so please bear with me! I am creating a database that will act as a address book/ repository of all past deals for a music company. My models are <code>Individual</code>,   <code>Musician</code> and <code>Presenter</code> (which both have a OneToOne relationship to Individuals), and <code>Presenter Company</code>, <code>BookingAgent</code>, etc... </p>\n\n<p>I also have <code>Gig</code> which brings all of the models together, i.e. a Musician plays at this Venue, the Promotor is this ArtsOrganization, and the agent is this BookingAgent, etc. Every gig has a Promoter, Agent, and Presenter. They are generic relations because they do not have a direct relation to a model, i.e. a Presenter could be an actual Presenter Company, a rich person, or your mom. </p>\n\n<p>Here is my model for a Gig:</p>\n\n<pre><code>class Gig(models.Model):\n\n#THESE ARE THE BASIC ATTRIBUTES FOR A GIG    \n    description = models.CharField(max_length=100, blank=True)\n    date = models.DateTimeField()\n    venue = models.ForeignKey(Venue)\n    festival = models.ForeignKey(Festival, blank = True, null=True)\n    musician = models.ManyToManyField(Musician)\n    ensembles = models.ManyToManyField(Ensemble, blank = True)\n    press = models.ManyToManyField(Article, blank = True)\n    notes = models.CharField(max_length=100, blank=True)\n    correspondance = models.ManyToManyField(Correspondance, blank = True)\n\n# THESE ARE THE GENERIC RELATIONS\n    presenter_content_type = models.ForeignKey(ContentType,\n        limit_choices_to={\"model__in\": (\"Individual\", \"ArtsOrganization\",'Presenter', \"BookingAgent\",\"Festival\",\"ManagementCompany\", \"OtherOrganization\",\"PresenterCompany\", \"Venue\")}, related_name = \"Presenter Type\", verbose_name = \"Presenter\",blank=True, null=True)\n    presenter_id = models.IntegerField(db_index=True, blank=True, null=True, verbose_name='Presenter ID')\n    presenter = generic.GenericForeignKey('presenter_content_type','presenter_id')\n\n    promoter_content_type = models.ForeignKey(ContentType,\n        limit_choices_to={\"model__in\": (\"Individual\", \"ArtsOrganization\",\"BookingAgent\",\"Presenter\", \"Festival\",\"ManagementCompany\", \"OtherOrganization\",\"PresenterCompany\", \"Venue\")}, related_name = \"promotor\", verbose_name='Promoter Type', blank=True, null=True)\n    promoter_id = models.IntegerField(db_index=True, blank=True, null=True, verbose_name='Promoter ID')\n    promoter = generic.GenericForeignKey('promoter_content_type','promoter_id')\n\n    agent_content_type = models.ForeignKey(ContentType,\n        limit_choices_to={\"model__in\": (\"Individual\", \"BookingAgent\")}, related_name=\"agent\", verbose_name='Agent Type', blank=True, null=True)\n    agent_id = models.IntegerField(db_index=True, blank=True, null=True, verbose_name='Agent ID')\n    agent = generic.GenericForeignKey('agent_content_type','agent_id')\n\n\n    date_added = models.DateTimeField(('date added'), auto_now_add=True) \n    date_modified = models.DateTimeField(('date modified'), auto_now=True)\n\n    def __unicode__(self):\n        return u'%s' % (self.date)\n\n    def gig_musicians(self):\n        return ', '.join([obj.individual.full_name for obj in self.musician.all()])\n        gig_musicians.short_description = \"Musicians\" \n</code></pre>\n\n<p><strong>The Problem</strong></p>\n\n<p>In the front-end of my database, I would like to show if a person or company has worked on a gig. I have not been able to do this for the generic relations. When I create a reverse relation on a model, i.e.</p>\n\n<pre><code>class Individual(models.Model):\n\n    #other attributes\n    played_gigs = generic.GenericRelation('Gig') \n</code></pre>\n\n<p>I am able to find the gigs that have that individual id using the following code in the template 'individual_list':</p>\n\n<pre><code>{% if individual.played_gigs %}yes {% endif %}\n</code></pre>\n\n<p>but if I try to return any information about the gig using the following code:</p>\n\n<pre><code>  {% for gig in individual.played_gigs_set.all %} {{gig.date}}{% endfor %}\n</code></pre>\n\n<p>I get nothing in return. I think i understand why: I need to find gigs that have the ContentType of individual instead of trying to find  Individual in Gig. I just can't figure out how! the documentation is not very clear on this type of query especially when there are multiple place s in the model where the ContentType of individual could occur.</p>\n\n<p>Thank you!</p>\n"},{"tags":["django","django-formwizard"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1503,"score":2,"question_id":3940138,"title":"How to pass previous form data to the constructor of a DynamicForm in FormWizard","body":"<p>I have a FormWizard where I need data from the first form to pass to the constructor of the second form so I can build a dynamic form.</p>\n\n<p>I can get the first form's data via the process_step of the FormWizard.</p>\n\n<p>I create the fields of the second form with a database call of the list of fields.</p>\n\n<pre><code>class ConditionWizardDynamicQuestions(forms.Form):\n\n    def __init__(self, DynamicQuestions=None, *args, **kwargs):\n       super(ConditionWizardDynamicQuestions, self).__init__(*args, **kwargs)\n       questions = Question.objects.filter(MYDATA = DATA_FROM_1STFORM)\n       for q in questions:\n            dynField = FieldFactory(q)\n            self.fields[q.label] = dynField\n</code></pre>\n\n<p>How can I pass over the <strong>DATA_FROM_1STFORM</strong> ?</p>\n\n<hr>\n\n<p>my resultant code:\nI abandoned the <strong>init</strong> of the form, and switched it to the CreateQuestions def.  Then used the wizard's get_form override to alter the form after creation.</p>\n\n<pre><code>class ConditionWizard(SessionFormWizard):\n    def get_form(self, request, storage, step=None, data=None, files=None):\n        form = super(ConditionWizard, self).get_form(request, storage, step, data, files)\n        stepIndex = self.get_step_index(request, storage, step)\n        if stepIndex == 1:\n            form.CreateQuestions(request.session[\"WizardConditionId\"])\n        if stepIndex == 3:\n            form.fields['hiddenConditionId'].initial = request.session[\"WizardConditionId\"]\n            form.fields['medicationName'].queryset = Medication.objects.filter(condition = request.session[\"WizardConditionId\"])\n        return form\n</code></pre>\n"},{"tags":["ajax","django","jquery-ajax"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13054118,"title":"Ajax get request with Django","body":"<p>I try to implement an ajax request in my django app to get the number of spectators of a flash video recorder I implemented in my app. This number is in an xml file. </p>\n\n<p>Here the js I used did in my template:</p>\n\n<pre><code>    var url = window.location.pathname.split('/');\n    var id = url[2];     // The id of my video is www.mysite/video/ID.com\n\n    setInterval(function() {\n        $.ajax({\n            type: \"GET\",\n            url: \"http://myxmlfiles\",\n            success: parseXml\n        });\n    }, 2000);\n\n    function parseXml(xml){\n        $(xml).find(\"user\").each(function() {\n\n            if($(this).attr(\"id\") === id) {\n                $(\".DubScore\").html($(this).attr(\"count\"))\n            }\n\n        });\n    }\n</code></pre>\n\n<p>And in my html:</p>\n\n<pre><code>      &lt;div class=\"DubScore\"&gt; &lt;/div&gt;\n</code></pre>\n\n<p>The xml file renders:</p>\n\n<pre><code>   &lt;streams&gt;\n   &lt;user id=\"3\" count=\"1\"/&gt;\n   &lt;/streams&gt;\n</code></pre>\n\n<p>The problem is nothing appears. I really don't know what I did wrong. </p>\n\n<p>Any advice would be great,</p>\n\n<p>EDIT:\n   When I run my js console, I can see the number of spectators, as I wanted. So the only problem is that it doesn't display this number into my div. The problem is between the js and the html. If you have any idea on how to fix it, it would be great. Thanks </p>\n"},{"tags":["django","django-views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13055269,"title":"django, trying to manipulate queryset and return to template","body":"<p>I'm trying to perform an operation on all the elements from a single field of a model, but I'm getting an error:</p>\n\n<pre><code>list indices must be integers, not tuple\n</code></pre>\n\n<p>Here's my index function in views.py:</p>\n\n<pre><code>design_list = Design.objects.values_list().order_by('-date_submitted')[:10]\n\nx=list(design_list)\nfor i in x:\n    b = list(x[i]) # ERROR RELATES TO THIS LINE\n    c = b[2]\n    b[2] = datetimeConvertToHumanReadable(c) \n    new_list[i] = b\n\nreturn render_to_response('index.html', {\n    'design_list': new_list,    \n})\n</code></pre>\n\n<p>I'm sure this is a common problem, does anyone know what I'm doing wrong?</p>\n"},{"tags":["django","optimization","inheritance","model","django-queryset"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12993851,"title":"Prevent Django from joining superclass' table","body":"<p>Having a non-abstract parent class:</p>\n\n<pre><code>class Animal(models.Model)\n</code></pre>\n\n<p>and two subclasses: </p>\n\n<pre><code>class Cow(Animal)\nclass Dog(Animal)\n</code></pre>\n\n<p>and calling </p>\n\n<pre><code>Dog.objects.order_by('name') \n</code></pre>\n\n<p>queries the database and returns joined records:</p>\n\n<pre><code>SELECT ... FROM dog \nINNER JOIN animal ON (dog.animal_ptr_id = animal.id) \nORDER BY dog.name ASC\n</code></pre>\n\n<p>However in my case \"dog\" is not a table, but a complicated view defined in the database. The view already contains all needed fields from \"animal\" including the animal id accessible by animal_ptr__id. </p>\n\n<p>How can I prevent django from making the INNER JOIN which drastically slows down the query?</p>\n"},{"tags":["python","django","datetime"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13052747,"title":"django: 'tuple' object has no attribute 'strftime'","body":"<p>I created a list of values of datetime objects</p>\n\n<pre><code>a=design_list.values_list('date_submitted')\n</code></pre>\n\n<p>So I get:</p>\n\n<pre><code>[(datetime.datetime(2012, 10, 21, 13, 56, 24),), (datetime.datetime(2012, 10, 21, 10, 33, 58),), etc...\n</code></pre>\n\n<p>I'm trying to convert them to timestamps with, say:</p>\n\n<pre><code>timestamps[0] = a[0].strftime(\"%s\")\n</code></pre>\n\n<p>But I get the error:</p>\n\n<pre><code>AttributeError: 'tuple' object has no attribute 'strftime'\n</code></pre>\n\n<p>Can anyone tell me what I'm doing wrong?</p>\n"},{"tags":["django","django-views","queryset"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13053270,"title":"django queryset manipulation","body":"<p>I have a queryset within a view and want to manipulate/edit before returning it to the template. </p>\n\n<p>But if I want to convert a queryset to values (below) - so that I can manipulate it - I can't then pass it onto the template. Do I have to convert it back to a queryset? How would I do that?</p>\n\n<pre><code>x = RandomModel.objects.values_list()\n</code></pre>\n\n<p>doesn't work, but</p>\n\n<pre><code>x = RandomModel.objects.all()\n</code></pre>\n\n<p>does.</p>\n\n<p>I'm manipulating it first, with (e.g.):</p>\n\n<pre><code>x[3][4]=\"test\"\n</code></pre>\n\n<p>But even without the manipulation, I can't access it from the template.</p>\n\n<p>I'm passing it to the template with:</p>\n\n<pre><code>return render_to_response('index.html', {\n    'design_list': x,    \n})\n</code></pre>\n\n<p>In the template, I'm trying to access the data with (e.g.):</p>\n\n<pre><code>{% for item in design_list %}\n    {{ item.title }}\n{% endfor %}\n</code></pre>\n"}]}
{"total":41213,"page":12,"pagesize":100,"questions":[{"tags":["javascript","html","django","templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":76,"score":0,"question_id":13050755,"title":"JSON data from Django to D3 graph","body":"<p>I'm attempting to edit a D3 bar graph <a href=\"http://bl.ocks.org/3885304\" rel=\"nofollow\">http://bl.ocks.org/3885304</a> to fit JSON data from Django. I have a variable generated in Django which is JSON format: [{\"score\": 1, \"color\": \"blue\"}, {\"score\": 5, \"color\": \"green\"}, {\"score\": 3, \"color\": \"red\"} etc. So I want to the color on the x-axis and score on the y-axis.</p>\n\n<p>What's a way to implement the Django variable into the HTML template without having to create a tsv or csv file?</p>\n"},{"tags":["django","unit-testing","testing","django-testing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13039358,"title":"Django testing json dump view","body":"<p>Hi I have a view like so:</p>\n\n<pre><code>def AjaxPopulate(request):\n    colour = request.GET.get('colour_id')\n    if colour is None:\n        return HttpResponseBadRequest()\n\n    qs = Thing.objects.select_related()\n    things = get_list_or_404(qs, colour=colour)\n    data = []\n    for x in things:\n        data.append({\n            'id': x.id,\n            'name': unicode(x),\n        })\n    return HttpResponse(simplejson.dumps(data), mimetype='application/json'\n</code></pre>\n\n<p>which is hooked into this url:</p>\n\n<pre><code>url(r'^ajax_populate/$', 'colours.views.AjaxPopulate', name='ajax_populate'),\n</code></pre>\n\n<p>in my test I have:</p>\n\n<pre><code>def setUp(self):\n    self.client = Client()\n    user = User.objects.create_superuser('foo', 'myemail@test.com', 'bar')\n    colour1 = Colour.objects.create(colour='Green')\n    thing1 = Thing.objects.create(name='Leaf', colour=colour1, description='foo')\n\ndef test_ajax_populate(self):\n    response = self.client.get('/colours/ajax_populate/', {'colour_id': 1}) \n    self.assertEqual(response.status_code, 200)\n</code></pre>\n\n<p>However, I am getting a <code>AssertionError: 404 != 200</code> error. </p>\n\n<p>What am I doing wrong?</p>\n\n<p>Any help much appreciated. </p>\n"},{"tags":["django","unit-testing","testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13034946,"title":"Django - getting user objects in tests","body":"<p>I have a models.py like so:</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\n\n\n# everything has a colour...\nclass Colour(models.Model):\n    colour = models.CharField(max_length=100)\n\n    def __unicode__(self):\n        return self.colour\n\n\n# a thing can have a colour...\nclass Thing(models.Model):\n    name = models.CharField(max_length=155)\n    colour = models.ForeignKey(Colour)\n    description = models.CharField(max_length=255)\n\n    def __unicode__(self):\n        return self.name\n\n\n# a user can save his choices\nclass UserLikes(models.Model):\n    user = models.ForeignKey(User)\n    colour = models.ForeignKey(Colour)\n    thing = models.ForeignKey(Thing)\n\n    class Meta:\n        verbose_name_plural = \"User Likes\"\n\n    def __unicode__(self):\n        return '%d - %s' % (self.pk, self.user)\n</code></pre>\n\n<p>And in my views:</p>\n\n<pre><code>def ThingPicker(request):\n    if request.method == 'POST':\n        form = ThingForm(request.POST)\n        if form.is_valid():\n            colour = form.cleaned_data['colour']\n            thing = form.cleaned_data['thing']\n            likes = UserLikes(user=request.user, colour=colour, thing=thing)\n            likes.save()\n            return HttpResponseRedirect('/profile/')\n        else:\n            return render_to_response('thing_picker.html', {\n                'form': form,\n            }, RequestContext(request))\n    else:\n        form = ThingForm()\n        return render_to_response('thing_picker.html', {\n            'form': form,\n        }, RequestContext(request))\n</code></pre>\n\n<p>And in my tests.py I want to do something like this (<strong>EDITED</strong>):</p>\n\n<pre><code>class ViewTests(TestCase):\n    def setUp(self):\n        self.client = Client()      \n\n    def test_thingpicker(self):\n        User.objects.create_superuser('foo', 'myemail@test.com', 'bar')\n        self.client.login(username='foo', password='bar') # request.user is now user foo\n\n        response = self.client.post('/colours/things/', {'colour': 1, 'thing': 2})\n        userlike = UserLikes.objects.get(pk=1)\n        self.assertEqual(userlike.colour_id, 1)\n</code></pre>\n\n<p>I get an error:</p>\n\n<pre><code>DoesNotExist: UserLikes matching query does not exist.\n</code></pre>\n\n<p>If I try with the test client in shell (<strong>EDITED</strong>):</p>\n\n<pre><code>&gt;&gt;&gt;  c = Client()\n&gt;&gt;&gt;  user1 = User.objects.create_superuser('foo', 'myemail@test.com', 'bar')\n&gt;&gt;&gt;  c.login(username='foo', password='bar')\n&gt;&gt;&gt;  c.post('/colours/things/', {'user': user1, 'colour': 1, 'thing': 2})\n&gt;&gt;&gt;  userlike = UserLikes.objects.get(pk=1)\n&gt;&gt;&gt;  userlike.colour_id\n1L\n</code></pre>\n\n<p>I get he expected result.</p>\n\n<p>What am I doing wrong here?</p>\n\n<p>Any help much appreciated.</p>\n"},{"tags":["python","django","python-2.7","websocket","socket.io"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13053662,"title":"WebSocketConnectionClosedException in socketIO_client","body":"<p>I'm trying to connect to a local socket.io server from python/django using <a href=\"http://pypi.python.org/pypi/socketIO-client\" rel=\"nofollow\"><code>socketIO_client</code></a>:</p>\n\n<pre><code>def connect() :\n    socketIO = SocketIO('localhost', 3000)\n</code></pre>\n\n<p>But I the socket.io console I see this warning <code>warn  - websocket connection invalid</code> and from django this message: </p>\n\n<pre><code>WebSocketConnectionClosedException at /crawler/add\nNo exception supplied\n</code></pre>\n\n<p><strong>EDIT:</strong>\nWhen I try to connect to an remote server (not local), everything works well.</p>\n\n<p>What's the problem?</p>\n"},{"tags":["django","context"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":327,"score":0,"question_id":4003846,"title":"django change_form.html problem","body":"<p>i'd like to pass an argument {{x}} to my custom file change_form.html, which is located in /home/django/project/app/template/admin/change_form.html. i found this code but it doesnt work. thx for any help</p>\n\n<pre><code>class MyModelAdmin(admin.ModelAdmin):\n    # A template for a very customized change view:\n    change_form_template = 'admin/change_form.html'\n\n    def get_osm_info(self):\n        z = Klass()\n        x = z.final_down()\n        return x\n\n    def change_view(self, request, object_id, extra_context=None):\n        my_context = { 'x': get_osm_info(),}\n        return super(MyModelAdmin, self).change_view(request, object_id,extra_context=my_context)\n</code></pre>\n"},{"tags":["django","django-tables2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12939548,"title":"select all rows in django_tables2","body":"<p>I have tried to select all rows in a table by clicking on the upper check box in a CheckBoxColumn with the following definition:</p>\n\n<pre><code>selection = tables.CheckBoxColumn(accessor=\"pk\", orderable=False)\n</code></pre>\n\n<p>However the rows are not selected, is there anything else I need to do? I am using django 1.4.1 and django_tables2 0.13.0.</p>\n"},{"tags":["django","django-templates"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12735431,"title":"Django Template linebreaks inside textarea tag","body":"<p>I have a variable with linebreaks, and am trying to insert it inside a textarea tag.</p>\n\n<pre><code>&lt;textarea&gt;{{ var_name }}&lt;/textarea&gt;\n</code></pre>\n\n<p>I want the line breaks to be preserved so that it looks the same as when the variable is displayed </p>\n\n<pre><code>&lt;div&gt;{{ var_name|linebreaks }}&lt;/div&gt;\n</code></pre>\n\n<p>Does anyone know how to do this?</p>\n"},{"tags":["django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":206,"score":0,"question_id":8286407,"title":"javascript alert - after submit in django","body":"<p>I have an html form in my website it's using django, and I want show massage \"javascript alert()\" after submit successfully</p>\n\n<p>this is the form:</p>\n\n<pre><code>&lt;form action=\"{% url guestbook-post %}\" method=\"POST\"&gt;{% csrf_token %}\n    {% for field in form %}\n      {% if field.is_hidden %}\n        {{ field }}\n      {% else %}\n        &lt;p\n          {% if field.errors %} class=\"error\"{% endif %}\n          {% ifequal field.name \"honeypot\" %} style=\"display:none;\"{% endifequal %}&gt;\n          {% if field.errors %}{{ field.errors }}{% endif %}\n          {{ field.label_tag }} {{ field }}\n        &lt;/p&gt;\n      {% endif %}\n    {% endfor %}\n    &lt;p class=\"submit\"&gt;\n      &lt;input type=\"submit\" name=\"submit\" class=\"submit-post\" value=\"Post\" /&gt;\n      &lt;input type=\"submit\" name=\"submit\" class=\"submit-preview\" value=\"Preview\" /&gt;\n    &lt;/p&gt;\n&lt;/form&gt;\n</code></pre>\n"},{"tags":["django","google-app-engine","google-cloud-sql"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":821,"score":3,"question_id":10473780,"title":"Support for Django 1.4 in google-app-engine","body":"<p>When can we expect support for django 1.4 in Google App Engine?</p>\n"},{"tags":["python","django"],"answer_count":8,"favorite_count":3,"up_vote_count":13,"down_vote_count":0,"view_count":6730,"score":13,"question_id":1402002,"title":"Why can't I upload jpg files to my Django app via admin/?","body":"<p>I'm trying to add images to my models in my Django app.</p>\n\n<p>models.py</p>\n\n<pre><code>class ImageMain(models.Model):\n  product = models.ForeignKey(Product)\n  photo = models.ImageField(upload_to='products')\n</code></pre>\n\n<p>In development mode, every time I try to upload the image via Django admin, I keep getting:</p>\n\n<blockquote>\n  <p>Upload a valid image. The file you uploaded was either not an image or\n  a corrupted image.</p>\n</blockquote>\n\n<p>I installed libjpeg via fink and then installed PIL 1.1.6 on ox X 10.5.7</p>\n\n<pre><code>from PIL import Image\nfile = open('/Users/Bryan/work/review_app/media/lcdtvs/samsung_UN46B6000_front.jpg', 'r')\ntrial_image = Image.open(file)\ntrial_image.verify()\n</code></pre>\n\n<p>It seems that the jpg is valid based on that session. However, it does not load.\nI have tried other jpgs, they don't work either.</p>\n\n<p>What could be going wrong?</p>\n\n<p>I was able to successfully upload a png file.</p>\n"},{"tags":["javascript","jquery","ajax","django"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13031923,"title":"Django / Ajax: javascript object formatting","body":"<p>I'm new to javascript and jquery. I have the following situation. I'm serializing an edited row of a table and sending it to the server via ajax.</p>\n\n<p>I have to pass the original data (before editing) and the final data (edited row) to the server.</p>\n\n<p>Passing each of them separately is working well, but when I put them together something strange is happening. It's probably something trivial for those who understand javascript well.</p>\n\n<p>The \"sending code\" is:</p>\n\n<pre><code>$.ajax({\n        data: data,\n        dataType: 'json',\n        ...\n       });\n</code></pre>\n\n<p>when I get the original row data or the edited row data as:</p>\n\n<pre><code>data = tr.find(':input').serializeArray();\n</code></pre>\n\n<p>I get a normal dict in request.POST, like this:</p>\n\n<pre><code>&lt;QueryDict: {u'Type': [u'CNAME'], u'Name': [u'domain_2'], Ttl': [u'500'], u'Value': [u'domain_1']}&gt;\n</code></pre>\n\n<p>But when I try to get both original and new data like this:</p>\n\n<pre><code>original_data = tr.find(':input').serializeArray();\nnew_data = tr.find(':input').serializeArray();\nvar data = {}\ndata.original_data = original_data\ndata.new_value = new_data\n</code></pre>\n\n<p>This just does not work. I get something like this:</p>\n\n<pre><code>&lt;QueryDict: {u'new_value[1][name]': [u'Type'], u'new_value[3][name]': [u'Ttl'], u'new_value[2][value]': [u'domain_1'], u'original_data[2][name]': [u'Value'], u'new_value[2][name]': [u'Value'], u'original_data[0][name]': [u'Name'], u'original_data[3][value]': [u'300'], u'original_data[1][value]': [u'CNAME'], u'new_value[3][value]': [u'500'], u'original_data[0][value]': [u'domain_2'], u'new_value[1][value]': [u'CNAME'], u'original_data[3][name]': [u'Ttl'], u'new_value[0][name]': [u'Name'], u'original_data[2][value]': [u'domain_1'], u'original_data[1][name]': [u'Type'], u'new_value[0][value]': [u'domain_2']}&gt;\n</code></pre>\n\n<p>I was hoping to get</p>\n\n<pre><code>&lt;QueryDict: {'original_data': {u'Type': [u'CNAME'], u'Name': [u'domain_2'], Ttl': [u'500'], u'Value': [u'domain_1']}, 'new_value': {u'Type': [u'CNAME'], u'Name': [u'domain_2'], Ttl': [u'500'], u'Value': [u'domain_1']}&gt;&gt;\n</code></pre>\n\n<p>How can I achieve this?</p>\n"},{"tags":["python","django"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":483,"score":0,"question_id":1735240,"title":"Set Django model field with a method","body":"<p>I'm trying to set <code>title_for_url</code> but it shows up in my database as \"<code>&lt;property object at 0x027427E0&gt;</code>\". What am I doing wrong?</p>\n\n<pre><code>from django.db import models\n\nclass Entry(models.Model):\n\n    def _get_title_for_url(self):\n        title = \"%s\" % self.get_title_in_url_format()\n        return title\n\n    AUTHOR_CHOICES = (('001', 'John Doe'),)\n    post_date = models.DateField()\n    author = models.CharField(max_length=3, choices=AUTHOR_CHOICES)\n    title = models.CharField(max_length=100, unique=True)\n    body = models.TextField()\n    image = models.ImageField(upload_to='image/blog')\n    image.blank = 'true'\n    title_for_url = models.CharField(max_length=100, editable=False, default=property(_get_title_for_url))\n\n    def __unicode__(self):\n        return self.title\n\n    def get_absolute_url(self):\n        return \"/blog/%s/\" % self.get_title_in_url_format()        \n\n    def get_title_in_url_format(self):\n        \"Returns the title as it will be displayed as a URL, stripped of special characters with spaces replaced by '-'.\"\n        import re\n        pattern = re.compile( '(\\'|\\(|\\)|,)' )\n        titleForUrl = pattern.sub('', self.title)\n        pattern = re.compile( '( )' )\n        titleForUrl = pattern.sub('-', titleForUrl)\n        return titleForUrl.lower()\n</code></pre>\n"},{"tags":["django","backbone.js","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":13050744,"title":"Backbone can create objects, but not fetch them","body":"<p>I'm trying out Backbone.js for the first time. I'm not new to Django and so I'm trying to build a Backbone-powered frontend to a Django app. After some research, I decided that Tastypie is probably the easiest to go. </p>\n\n<p>After much wrangling, I have this problem: I can create objects just fine, but I can't fetch any of them. </p>\n\n<p>So I can do this:</p>\n\n<pre><code>var foo = new LabSite()\nvar newInfo={name:\"Mine\",site_code:\"FRED\"}\nfoo.save(newInfo)\n</code></pre>\n\n<p>And I can see a new LabSite in the admin named \"Mine\" with an ID of 1.</p>\n\n<p>When I try this:</p>\n\n<pre><code>var bar = new LabSite({id:1})\n\nbar.fetch({\n    success: function (bar) {\n        alert(bar.toJSON());\n    }\n})\n</code></pre>\n\n<p>I don't see the alert.</p>\n\n<p>On the object that is turn back it has this as the response:</p>\n\n<pre><code>responseText: \"callback({\"id\": \"1\", \"name\": \"Mine\", \"resource_uri\": \"/api/v1/labsite/1/\",\"site_code\": \"FRED\"})\"\n</code></pre>\n\n<p>So it was returned, the value isn't there. Maybe something doesn't understand the response?</p>\n\n<p>I tried using this backbone-tastypie project, but it didn't change anything:\n<a href=\"https://github.com/amccloud/backbone-tastypie\" rel=\"nofollow\">https://github.com/amccloud/backbone-tastypie</a></p>\n\n<p>My ModelResource is quite simple:</p>\n\n<pre><code>class LabSiteResource(ModelResource):\n\n    def determine_format(self, request):\n       return  'text/javascript'\n\n    class Meta:\n       queryset = LabSite.objects.all()\n       authorization= Authorization()\n</code></pre>\n\n<p>And if I go to <code>http://localhost:8000/api/v1/labsite/1/</code> I see:</p>\n\n<pre><code>   callback({\"id\": \"1\", \"name\": \"Mine\", \"resource_uri\": \"/api/v1/labsite/1/\", \"site_code\": \"FRED\"})\n</code></pre>\n\n<p>Any idea why I can't fetch anything?</p>\n\n<p><em>EDIT</em> Based on a comment below, I tried to catch the error.</p>\n\n<pre><code>  var errorInfo = {};\n  var bar = new LabSite({id:1})\n  bar.fetch({\n      success: function (bar) {\n        alert(bar.toJSON());\n      },\n  error: function(a1,a2,a3) {\n      errorInfo=[a1,a2,a3]\n\n   }\n   });\n</code></pre>\n\n<p><code>errorInfo</code> didn't provide a lot of helpful information -- this is what it was:</p>\n\n<pre><code>    &gt; errorInfo[0]\n    d\n    _escapedAttributes: Object\n    _pending: Object\n    _previousAttributes: Object\n    _silent: Object\n    attributes: Object\n    changed: Object\n    cid: \"c1\"\n    id: 1\n    __proto__: x\n    &gt; errorInfo[1]\n    [...]\n    readyState: 4\n    responseText: \"callback({\"id\": \"1\", \"name\": \"Mine\", \"resource_uri\": \"/api/v1/labsite/1/\", \"site_code\": \"FRED\"})\"\n    setRequestHeader: function (a,b){if(!v){var c=a.toLowerCase();a=u[c]=u[c]||a,t[a]=b}return this}\n    state: function (){return c}\n    status: 200\n    statusCode: function (a){if(a){var b;if(v&lt;2)for(b in a)r[b]=[r[b],a[b]];else b=a[x.status],x.always(b)}return this}\n    statusText: \"OK\"\n    [....]\n    &gt; errorInfo[2]\n    Object\n    error: function (d,e){e=d===b?e:d;a?a(b,e,c):b.trigger(\"error\",b,e,c)}\n    success: function (d,e,f){if(!b.set(b.parse(d,f),a))return!1;c&amp;&amp;c(b,d)}\n    __proto__: Object\n</code></pre>\n\n<p>The <code>errorInfo[1].status</code> seems to indicate the the communication was perfectly find and <code>errorInfo[1].responseText</code> is the correct data. I may be more confused now than before.</p>\n"},{"tags":["django","views","context"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":612,"score":4,"question_id":2893724,"title":"creating my own context processor in django","body":"<p>Hay, I have come to a point where i need to pass certain variables to all my views (mostly custom authentication type variables).</p>\n\n<p>I was told writing my own context processor was the best way to do this, but i am having some issues.</p>\n\n<p>My settings file looks like this</p>\n\n<pre><code>TEMPLATE_CONTEXT_PROCESSORS = (\n    \"django.contrib.auth.context_processors.auth\",\n    \"django.core.context_processors.debug\",\n    \"django.core.context_processors.i18n\",\n    \"django.core.context_processors.media\",\n    \"django.contrib.messages.context_processors.messages\",\n    \"sandbox.context_processors.say_hello\", \n)\n</code></pre>\n\n<p>As you can see i have a module called 'context_processors' and a function within that called 'say_hello'.</p>\n\n<p>This looks like</p>\n\n<pre><code>def say_hello(request):\n        return {\n            'say_hello':\"Hello\",\n        }\n</code></pre>\n\n<p>Am i right to assume i can now do this within my views</p>\n\n<pre><code>{{ say_hello }}\n</code></pre>\n\n<p>because it doesn't return anything.</p>\n\n<p>My view look like </p>\n\n<pre><code>from django.shortcuts import *\n\ndef test(request):\n        return render_to_response(\"test.html\")\n</code></pre>\n"},{"tags":["django","object"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13052045,"title":"django how to return a list of entries from just one field","body":"<p>I have a model, Designs. This contains several fields, one of which is a datetime field, date_submitted.</p>\n\n<p>How can I return a list of just the datetime fields from a list of objects? For instance, I have:</p>\n\n<pre><code>design_list = Design.objects.all().order_by('-date_submitted')[:10]\n</code></pre>\n\n<p>But this contains all the fields. How can I isolate just the date_submitted fields into a list?</p>\n"},{"tags":["jquery","ajax","django","file-upload"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13052086,"title":"django jquery fileupload issue when upload multiple image","body":"<p>I tried to use <a href=\"http://blueimp.github.com/jQuery-File-Upload/\" rel=\"nofollow\">blueimp jquery fileupload</a>, and then i found a working example <a href=\"https://github.com/sigurdga/django-jquery-file-upload\" rel=\"nofollow\">sigurdga / django-jquery-file-upload</a>. Based on that example, i only need to copy the js, copy the template, and write my own view to handle upload file, here's what <code>sigurda</code> code look like,</p>\n\n<p>views.py :</p>\n\n<pre><code>def response_mimetype(request):\n    if \"application/json\" in request.META['HTTP_ACCEPT']:\n        return \"application/json\"\n    else:\n        return \"text/plain\"\n\nclass JSONResponse(HttpResponse):\n    \"\"\"JSON response class.\"\"\"\n    def __init__(self,obj='',json_opts={},mimetype=\"application/json\",*args,**kwargs):\n        content = simplejson.dumps(obj,**json_opts)\n        super(JSONResponse,self).__init__(content,mimetype,*args,**kwargs)\n\nclass PictureCreateView(CreateView):\n    model = Picture\n\n    def form_valid(self, form):\n        print self.request.method\n        self.object = form.save()\n        f = self.request.FILES.get('file')\n        print f\n        data = [{'name': f.name, 'url': settings.MEDIA_URL + \"pictures/\" + f.name.replace(\" \", \"_\"), 'thumbnail_url': settings.MEDIA_URL + \"pictures/\" + f.name.replace(\" \", \"_\"), 'delete_url': reverse('upload-delete', args=[self.object.id]), 'delete_type': \"DELETE\"}]\n        response = JSONResponse(data, {}, response_mimetype(self.request))\n        response['Content-Disposition'] = 'inline; filename=files.json'\n        return response\n</code></pre>\n\n<p>and here's my views.py:</p>\n\n<pre><code>class AddItemView(object):\n\n    def __init__(self, request = None, model = None):\n        if model:\n            self.model = model\n        else:\n            self.model = Image\n\n    def __call__(self, request, id):\n        self.request = request\n        if self.request.is_ajax():\n            return self.AJAX_handler()\n\n    def AJAX_handler(self):\n        image = self.request.FILES.get('file', None)\n        self.images = self.model.objects.create(\n            item_id = self.id,\n            images = image,\n            caption = 'ok',\n            name = image.name\n        )\n        response = [{\n            'name'  : image.name,\n            'url'   : settings.MEDIA_URL + 'images/items/' + image.name.replace(' ', '_'),\n            'thumbnail_url' : settings.MEDIA_URL + 'images/items/' + image.name.replace(' ', '_'),\n            'delete_url'    : reverse('delete_image_view', args = [self.images.id]),\n            'delete_type'   : 'DELETE',\n        }]\n        response = helpers.JSONResponse(response)\n        return response\n</code></pre>\n\n<p><code>helpers.JSONResponse</code> is only a helper to return <code>HttpResponse</code></p>\n\n<p>now that the view's done, i tried to upload an image, and it works, then i tried to upload 4 image at a time, let's say : 1.jpg, 2.jpg, 3.jpg, 4.jpg., the problem : there's a chance to upload multiple same image, the uploaded image : 1.jpg, 1.jpg, 1.jpg, 3.jpg, sometimes working sometimes not, also there's a chance the image is broken or empty, but still count as uploaded. But, the example works well, i even can upload up to 40 images at a time. I don't know where i went wrong. Help me please</p>\n"},{"tags":["sql","django","model","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13051882,"title":"Django - using count in template","body":"<p>I have simple question.</p>\n\n<p>In my template file i have the same variable <code>{{ category.photo_set.count }}</code> twice.</p>\n\n<p>For example:</p>\n\n<pre><code>        &lt;div class=\"galleries\"&gt;\n\n            &lt;div class=\"row\"&gt;\n            {% for category in categories %}\n                &lt;div class=\"five columns{% cycle \" alpha\" \"\" \" omega\" %}\"&gt;\n\n                    &lt;div class=\"image\"&gt;&lt;a href=\"{% url gallery.views.category category.slug %}\"&gt;&lt;img src=\"{{ MEDIA_URL }}{{ category.image }}\" alt=\"\" /&gt;&lt;/a&gt;&lt;/div&gt;\n\n                    &lt;h4&gt;{{ category.name }}&lt;/h4&gt;       \n                    &lt;p&gt;Ilość zdjęć: {{ category.photo_set.count }}&lt;/p&gt;  \n\n                    {%  if category.photo_set.count &gt; 0 %}&lt;a class=\"button\" href=\"{% url gallery.views.category category.slug %}\"&gt;zobacz&lt;/a&gt;{% endif %}\n                &lt;/div&gt;\n            {% endfor %}\n\n            &lt;/div&gt;\n\n        &lt;/div&gt;\n</code></pre>\n\n<p>And i noticed that this code generates two exactly the same queries to the database.</p>\n\n<pre><code>30 Query    SELECT COUNT(*) FROM `gallery_photo` WHERE `gallery_photo`.`category_id` = 1\n30 Query    SELECT COUNT(*) FROM `gallery_photo` WHERE `gallery_photo`.`category_id` = 1\n</code></pre>\n\n<p>How can i prevent this?</p>\n"},{"tags":["django","django-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13047882,"title":"Managing Django test isolation for installable apps","body":"<p>I maintain an installable Django app that includes a regular test suite.</p>\n\n<p>Naturally enough when project authors run <code>manage.py test</code> for their site, the tests for both their own apps and also any third party installed apps such as mine will all run.</p>\n\n<p>The problem that I'm seeing is that in several different cases, the user's particular <code>settings.py</code> will contain configurations that cause my app's tests to fail.</p>\n\n<p>A couple of examples:</p>\n\n<ul>\n<li>Some of the tests need to check for returned error messages.  These error messages use the internationalization framework, so if the site language is not english then these tests fail.</li>\n<li>Some of the tests need to check for particular template output.  If the site is using customized templates (which the app supports) then the tests will end up using their customized templates in preference to the defaults, and again the tests will fail. </li>\n</ul>\n\n<p>I want to try to figure out a sensible approach to isolating the environment that my tests get run with in order to avoid this.</p>\n\n<p>My plan at the moment is to have all my TestCase classes extend a base TestCase, which <a href=\"https://docs.djangoproject.com/en/dev/topics/testing/#overriding-settings\" rel=\"nofollow\">overrides the settings</a>, and any other environment setup I may need to take care of.</p>\n\n<p>My questions are:</p>\n\n<ul>\n<li>Is this the best approach to app-level test-environment isolation? Is there an alternative I've missed?</li>\n<li>It looks like I can only override a setting at a time, when ideally I'd probably like a completely clean configuration.  Is there be a way to do this, and if not which are the main settings I need to make sure are set in order to have a basic clean setup?</li>\n<li>I believe I'm correct in saying that overriding some settings such as <code>INSTALLED_APPS</code> may not actually affect the environment in the expected way due to implementation details, and global state issues.  Is this correct?  Which settings do I need to be aware of, and what globally cached environment information may not be affected as expected?</li>\n<li>What other environment state other than settings might I need to ensure is clean?</li>\n</ul>\n\n<p>More generally, I'd also be interested in any context regarding how much of an issue this is for other third party installable apps, or if there are any plans to further address any of this in core.  I've seen conversation on IRC regarding similar issues with eg. some of Django's contrib apps running under unexpected settings configurations.  I seem to also remember running into similar cases with both third party apps and django contrib apps a few times, so it feels like I'm not alone in facing these kind of problems, but it's not clear if there's a consensus on if this is something that needs more work or if the status quo is good enough.</p>\n\n<p>Note that:</p>\n\n<ul>\n<li>These are integration-level tests, so I want to address these environment issues at the global level. </li>\n<li>I need to support Django 1.3, but can put in some compatibility wrappers so long as I'm not re-implementing massive amounts of Django code.</li>\n<li>Obviously enough, since this is an installable app, I can't just specify my own <code>DJANGO_SETTINGS_MODULE</code> to be used for the tests.</li>\n</ul>\n"},{"tags":["iphone","objective-c","ios","django","ipad"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13049023,"title":"Developing an iOS app with a REST api backend (databased backed)","body":"<p>I'm developing an iPad app, which is connected to a Django Server on the backend. The server mostly is just a REST API on top of a database (this is done with TastyPi, for the record).</p>\n\n<p>I'm trying to understand the best way to develop this, since I'm new to iOS.</p>\n\n<p>So a few related questions:</p>\n\n<ol>\n<li>Is there a library that simplifies the work of making \"models\" in your code that mirror the models on the server?</li>\n</ol>\n\n<p>I would imagine something like Django's ORM, which allows you to define objects in Objective C , that are mapped 1-to-1 to objects that the REST Api gives you.</p>\n\n<p>This library could abstract all of the cache-ing and converting between local objects and the objects on the server.</p>\n\n<ol>\n<li>If this kind of library doesn't exist, are there a set of best-practices for this type of project? For example, <em>should</em> I even have local objects that reflect the DB? Should I have one class which takes care of all the code that deals with the API, or should I write the requests in the many different objects that are part of the API?</li>\n</ol>\n\n<p>In short, where can I learn the \"right\" way to code iOS apps backed by a REST Api exposing a database? Preferably a tutorial, rather than looking at existing projects' code.</p>\n"},{"tags":["python","django","multiprocess","spynner"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13032830,"title":"Multiprocessing and Django","body":"<p>In my Django app I use two functions for laod html from a url list. One function use requests and another spynner for load javascript. Something like this: </p>\n\n<pre><code>import requests\nimoprt spynner\n\ndef use_requests(url):\n     br = requests.get(url)\n     return br.text\n\ndef use_spynner(url):\n     br = spynner.Browser()\n     br.load(url, load_timeout=10,wait_callback = None,tries=None)\n     return br._get_html() \n</code></pre>\n\n<p>I must load many url and I use multiprocessing for to be more fast. This is my code:</p>\n\n<pre><code>from multiprocessing import Pool\n\ndef update_database(url):\n     if url in in url__with_javascript:  \n          text = use_spynner(url)\n     elif url in url_normal:\n          text = use_requests(url) \n\ndef task_update():\n     url_list = [\"www.google.com\",\"www.python.com\",\"www.facebook.com\"]\n     pool = Pool(processes=4)\n     result = pool.map_async(update_database, url_list)   \n     pool.close()\n     pool.join()\n</code></pre>\n\n<p>This is my problem: If I use 'task_update' (with multiprocess) spynner doesn't work. It doesn' load all the html. If I don't use multiprocess all is ok. Where' is the problem? It's Django with multiprocess? Any help is really appreciated </p>\n"},{"tags":["mysql","django","mysql-error-1064","mysql-python"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":726,"score":1,"question_id":8633373,"title":"Mysql Can't create/write to file error#13","body":"<p>I had created a Django view which is returning some data after reading from MySql DB.When i try and fetch around 6000 rows from the Database,everything works fine and the view returns HttpResponse as is expected.However as i try to fetch 7000+ rows i get the following error \n<br/></p>\n\n<pre><code>(1, \"Can't create/write to file '/home/nipun/mysql_temp/MYzplJok' (Errcode: 13)\")\n</code></pre>\n\n<p><br/>\nEarlier i thought that the error could be due to space getting exhausted for /temp,so i changed the tempdir setting in my.cnf \n<br/>\nI also ensured that new tmpdir /home/nipun/mysql_temp and it's parent directories are writable by me by changing the ownership.\nAlthough this is not a Django problem,here is the view\n<br/></p>\n\n<pre><code>def query_json(request):\n    from django.utils import simplejson\n    objects=Publisher.objects.filter(location='ROOM_01',sensor_name='CPU_TEMPERATURE').order_by('-id')[0:9000]\n\n    json = simplejson.dumps( [{\"reading\": float(o.reading),\n                           \"timestamp\": str(o.timestamp)\n                       } for o in objects] )\n\n    return HttpResponse(json,mimetype=\"application/json\")\n</code></pre>\n\n<p><br/></p>\n\n<p>So in the filter changing 9000 to 6000 works fine.\n<br/>\nSome more information about the error is provided in the Django stack trace\n<br/></p>\n\n<pre><code>errorclass  \n&lt;class '_mysql_exceptions.InternalError'&gt;\nerrorvalue  \nInternalError(1, \"Can't create/write to file '/home/nipun/mysql_temp/MYuotga9' (Errcode:     13)\")\nerror   \n(&lt;class '_mysql_exceptions.InternalError'&gt;,\nInternalError(1, \"Can't create/write to file '/home/nipun/mysql_temp/MYuotga9' (Errcode: 13)\"))\n</code></pre>\n\n<p><b>EDIT</b>\n<br/>\nAs per a comment, i tried this on my MySQL prompt <br/></p>\n\n<pre><code>mysql&gt; CREATE TEMPORARY TABLE t (i int);\nERROR 1005 (HY000): Can't create table 't' (errno: 13)\n</code></pre>\n\n<p>So it essentially is now an issue of how to allow MySQL to write to temporary directory</p>\n"},{"tags":["django","configuration","fastcgi","supervisord"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":341,"score":2,"question_id":9694589,"title":"Django Supervisord fastcgi configuration (supervisord.conf) - exits immediately ","body":"<p>I'm trying to write a supervisord.conf for starting a django fastcgi process.  The only problem is that when I execute my fastcgi command, it spawns a fastcgi process and shows up in supervisor immediately as \"EXITED\".  (This kinda defeats the point of supervisor)</p>\n\n<p>Is there some way that the supervisor process can be aware of the fact that the django fastcgi process is, indeed, running but that it's in the background?  I was digging through all of the supervisord config params it seems like this should be possible (maybe it can somehow determine this based on a pid file or something), but I got a bit lost in the documentation. </p>\n\n<pre><code>$ ./manage.py supervisor status\ncelerybeat                       RUNNING    pid 12575, uptime 0:01:17\ncelerycam                        RUNNING    pid 12573, uptime 0:01:17\nceleryd                          RUNNING    pid 12572, uptime 0:01:17\ndjango                           EXITED     Mar 13 07:57 PM\nrunserver                        RUNNING    pid 12574, uptime 0:01:17\n</code></pre>\n\n<p>NOTE: I'm actually using django-supervisor to create my configuration file using variables in the Django context.  For the purposes of this example, variables like {{ PYTHON }} and {{ settings.VIRTUALENV_ROOT }} are simply populated by the obvious paths.  It should function just like a normal supervisor.conf file. </p>\n\n<p>Below is my supervisord.conf file.</p>\n\n<pre><code>$ more supervisord.conf \n[supervisord]\nlogfile={{ settings.VIRTUALENV_ROOT }}/log/supervisord-jj.log\nlogfile_maxbytes=50MB\nlogfile_backups=15\npidfile={{ settings.VIRTUALENV_ROOT }}/var/run/supervisord-jj.pid\n\n[program:celeryd]\ncommand={{ PYTHON }} {{ PROJECT_DIR }}/manage.py celeryd  \n\n[program:celerycam]\ncommand={{ PYTHON }} {{ PROJECT_DIR }}/manage.py celerycam\n\n[program:runserver]\n{% if settings.DEBUG %}\nexclude=false\n{% else %}\nexclude=true\n{% endif %}\n\n[program:django]\ncommand={{ PYTHON }} {{ PROJECT_DIR }}/manage.py runfcgi  \n         method=threaded daemonize=true \n         outlog={{ settings.VIRTUALENV_ROOT }}/log/django-fcgi.log \n         socket={{ settings.VIRTUALENV_ROOT }}/var/run/django-run.socket \n         pidfile={{ settings.VIRTUALENV_ROOT }}/var/run/django.pid\n\n[program:autoreload]\nexclude=true\n</code></pre>\n\n<p>Thanks for reading.  Any advice is much appreciated. </p>\n"},{"tags":["python","django","memory","process","supervisord"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":242,"score":0,"question_id":9263812,"title":"Growing process using Python/Django and supervisor","body":"<p>I am using django 1.3 and i am running a script outside of a web context using supervisor.</p>\n\n<p>The memory usage of the process is growing every minute</p>\n\n<p>The code look more or less like this :</p>\n\n<pre><code>while(1):\n   for auction in auction_list:\n       auction.update_auction()\n\n    db.reset_queries()\n    db.close_connection()\n    sleep(1)\n</code></pre>\n\n<p>Adding close_connection helped me out by avoiding LOCKS on the table but now i have this growing process problem.</p>\n\n<p>How could i manage things to avoid this ?</p>\n"},{"tags":["python","django","textmate","textmatebundles","supervisord"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":152,"score":0,"question_id":6647218,"title":"TextMate Python bundle non-blocking","body":"<p>I created a bundle in TextMate for restarting the current Django project's associated Supervisor process. Running the code in the Python interpreter successfully restarts the process without blocking, however when I use it as a TextMate bundle (set to run every time I save .py file) it blocks the GUI for ~3 seconds. Is there any way I can avoid this?</p>\n\n<p>Here's what the code looks like:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python\nimport os\nimport subprocess\nimport threading\n\nprojname = os.environ.get('TM_PROJECT_DIRECTORY', '').rpartition('/')[2]\n\n\ndef restart_proj(projname=None):\n    \"\"\" Restart a supervisor instance.\n    Assumes that the name of the supervisor instance is the basename for\n    TM_PROJECT_DIRECTORY.\n    \"\"\"\n    if projname:\n        subprocess.Popen('$HOME/.virtualenvs/supervisor/bin/' \\\n                         'supervisorctl restart {0}'.format(projname),\n                         shell=True, stdout=open('/dev/null', 'w'))\n\nt = threading.Thread(target=restart_proj, args=(projname, ))\nt.start()\n</code></pre>\n"},{"tags":["django","virtualenv","pip","supervisord"],"answer_count":1,"favorite_count":5,"up_vote_count":4,"down_vote_count":0,"view_count":2331,"score":4,"question_id":6532486,"title":"Supervising virutalenv django app via supervisor","body":"<p>I'm trying to use supervisor in order to manage my django project running gunicorn inside a virtualenv. \nMy conf file looks like this: </p>\n\n<pre><code>[program:diasporamas]\ncommand=/var/www/django/bin/gunicorn_django\ndirectory=/var/www/django/django_test\nprocess_name=%(program_name)s\nuser=www-data\nautostart=false\nstdout_logfile=/var/log/gunicorn_diasporamas.log\nstdout_logfile_maxbytes=1MB\nstdout_logfile_backups=2\nstderr_logfile=/var/log/gunicorn_diasporamas_errors.log\nstderr_logfile_maxbytes=1MB\nstderr_logfile_backups=2enter code here\n</code></pre>\n\n<p>the problem is, I need supervisor to launch command while it has 'source bin/activate' my virtualenv. I've been hanging around google trying to find an answer but didn't find anything.</p>\n\n<p>Nota: I don't want to use virtualenvwrapper</p>\n\n<p>Any help please? </p>\n"},{"tags":["python","django","apache","nginx","supervisord"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1460,"score":1,"question_id":10716159,"title":"nginx and supervisor setup in Ubuntu","body":"<p>I'm using django-gunicorn-nginx setup by following this tutorial <a href=\"http://ijcdigital.com/blog/django-gunicorn-and-nginx-setup/\" rel=\"nofollow\">http://ijcdigital.com/blog/django-gunicorn-and-nginx-setup/</a> Upto nginx setup, it is working. Then I installed supervisor, configured it and then I reboot my server and checked, it shows 502 bad gateway. I'm using Ubuntu 12.04 LTS</p>\n\n<p>/etc/supervisor/conf.d/qlimp.conf</p>\n\n<pre><code>[program: qlimp]\ndirectory = /home/nirmal/project/qlimp/qlimp.sh\nuser = nirmal\ncommand = /home/nirmal/project/qlimp/qlimp.sh\nstdout_logfile = /path/to/supervisor/log/file/logfile.log\nstderr_logfile = /path/to/supervisor/log/file/error-logfile.log\n</code></pre>\n\n<p>Then I restarted supervisor and I run this command <code>$ supervisorctl start qlimp</code> and I'm getting this error</p>\n\n<pre><code>unix:///var/run/supervisor.sock no such file\n</code></pre>\n\n<p>Is there any problem in my supervisor setup?</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","django","linux","ubuntu","supervisord"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":580,"score":1,"question_id":4556984,"title":"Multiple commands within Supervisor - Python/Linux","body":"<p>I'm using the amazing utility <code>supervisord</code></p>\n\n<hr>\n\n<p>I'm happily running a few apps editing the config file as follows:</p>\n\n<pre><code>[program: Django Dev Server]\ncommand=python /path/to/project/manage.py runserver 127.0.0.1:8000\n\n[program: MongoDB]\ncommand=sudo /path/to/mongod\n</code></pre>\n\n<hr>\n\n<p><strong>Now problem is that some apps need a few commands before they start up in order to prepare them for startup.</strong></p>\n\n<p>e.g. verifying conditions, cleaning folders, etc...</p>\n\n<hr>\n\n<p>Any ideas?</p>\n"},{"tags":["django","nginx","uwsgi","supervisord"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":843,"score":1,"question_id":5430370,"title":"Django, uWSGI & nginx: Process dies for \"no reason\"","body":"<p>I am using uWSGI and nginx to run two parallell Django apps. One of them, the one with somewhat more load (both are very small) keeps dying about once every 24 hours with the following message:</p>\n\n<p><code>[pid: 16358|app: 0|req: 1000/1000] 127.0.0.1 () {46 vars in 847 bytes} [Thu Mar 24 16:38:31 2011] GET /aktivitet/409/picknick/ => generated 18404 bytes in 117 msecs (HTTP/1.0 200) 3 headers in 156 bytes (1 switches on core 0)\n<strong>...The work of process 16358 is done. Seeya!</strong></code></p>\n\n<p>I am launching the processess using Supervisor with the following config:</p>\n\n<p><code>[program:uttrakad]\ncommand=/home/myuser/webapps/uwsgi_test/bin/uwsgi\n  -s /home/myuser/webapps/uwsgi_test/app1.sock\n  -C /home/myuser/webapps/django/app1.wsgi\n  --processes 1\n  --harakiri 120\n  --max-requests 1000\nautostart=true\nautorestart=true\nstdout_logfile=/home/myuser/logs/user/uwsgi_app1.log\nredirect_stderr=true\nstopsignal=QUIT</code></p>\n\n<p>The .wsgi file is simple:</p>\n\n<p><code>\nimport os\nimport sys\nsys.path =['/home/openworks/webapps/django/lib/python2.6/','/home/openworks/webapps/django/','/home/openworks/webapps/django/app1/'] + sys.path\nfrom django.core.handlers.wsgi import WSGIHandler\nos.environ['DJANGO_SETTINGS_MODULE'] = 'app1.prod_settings'\napplication = WSGIHandler()\n</code></p>\n\n<p>nginx is set up with 2 worker processes, 2048 worker_connections and like this:\n<code>\nlocation / {\n                uwsgi_pass     unix:///home/openworks/webapps/uwsgi_test/app1.sock;\n                include        uwsgi_params;\n        }\n</code></p>\n\n<p>As I said, there is one more app configured the exact same way that has been running without interuption, but is almost has no traffic. </p>\n\n<p>Any clues? Why do I get the \"<em>...The work of process 16358 is done. Seeya</em>\" messsage?</p>\n\n<p>Thanks</p>\n"},{"tags":["django","deployment","file-permissions","static-files","supervisord"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12047927,"title":"Django: File permissions media and static files","body":"<p>I use Django with supervisor. My project folder is located in <code>foouser</code> directory, however in supervisor, I chose to run the deployment process using a different user, which was created by</p>\n\n<pre><code>$ adduser --disabled-login www\n</code></pre>\n\n<p>Hence user www does not have access to the media and static folders of the django project since they are under a different user directory. I feel that just making the file-permissions <code>0777</code> is not a proper way for allowing user <code>www</code> to have access to the static and media files. I also feel that it might be a security risk to run the deployment process under <code>foouser</code> which has more privileges compared to user <code>www</code>.</p>\n\n<p>What is the best approach for this?</p>\n"},{"tags":["python","django","fabric","supervisord","webfaction"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12549719,"title":"Fabric problems with reloading supervisor on remote host","body":"<p>My project is hosted on Webfaction and supervisor is used to be aware of processes.\nI use shell utils to get the PID of supervisor and it works just fine when I do it manually, but I got random PIDs when executing the same command remotely with Fabric</p>\n\n<h3>Code to get PID of supervisor</h3>\n\n<pre><code>spid = run('ps auxw | grep supervisord | grep %s | tr -s \\' \\' | cut -d\\  -f 2' % USER)\n\nif spid:                   # if supervisor is running and PID is found\n    run('kill %s' % spid)  # kill supervidor daemon\n</code></pre>\n\n<p>I'm confused why I get random PIDs when calling command remotely, what is wrong with the way I do it?</p>\n\n<p>Thanks,</p>\n\n<p>Sultan</p>\n"},{"tags":["django","uwsgi","supervisord"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12872735,"title":"Restart Django instance running with Supervisor and uwsgi","body":"<p>Currently I use <code>/etc/init.d/supervisor restart</code> but this restarts all processes under supervisor. Is there a clean way to restart just one django instance? </p>\n\n<p>I remember with modwsgi you just needed to touch the wsgi file but it doesnt seem to work with uwsgi.</p>\n\n<p>Thanks</p>\n"},{"tags":["python","django","decorator"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13049863,"title":"Django Decorator View Not Callable","body":"<p>I have written two very simple decorators for my django app :</p>\n\n<pre><code>def login_required_json(f):\n    def inner(request, *args, **kwargs):\n        #this check the session if userid key exist, if not it will redirect to login page\n        if not request.user.is_authenticated():\n            result=dict()\n            result[\"success\"]=False\n            result[\"message\"]=\"The user is not authenticated\"\n            return HttpResponse(content=simplejson.dumps(result),mimetype=\"application/json\")\n        else:\n            return f(request, *args, **kwargs)\n\ndef catch_404_json(f):\n    def inner(*args,**kwargs):\n        try:\n            return f(*args, **kwargs)\n        except Http404:\n            result=dict()\n            result[\"success\"]=False\n            result[\"message\"]=\"The some of the resources throw 404\"\n            return HttpResponse(content=simplejson.dumps(result),mimetype=\"application/json\")\n</code></pre>\n\n<p>But when I apply them to my views I get \"ViewDoesNotExist\" error in the template, saying it could not import the view because it is not callable. What am i doing wrong?</p>\n"},{"tags":["django","session","signals","registration","django-1.4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13020874,"title":"How Can I retain session information once a user registers (Django)?","body":"<p>When a new user is created, I want to retain some of the information in their session</p>\n\n<p>e.g. things a user has stored in their session I want to use once they have registered (or logged in).</p>\n\n<p>I would use either a post_save signal on the user model (or an auth login signal), but it appears that the signals don't put the request, or session into the signal sent. It also seems I can't easily get the session from just the user.</p>\n\n<p>I'm using Django 1.4</p>\n\n<p>Edit: let me give an example.</p>\n\n<p>The problem boils down to this - I may want to retain information for a user's activities before they login, but where do I store this information before they login? A good place would be a session (or I could link the data held in a db <em>to</em> the session, using the session a little like a makeshift user).</p>\n\n<p>In any case, until they login, I can simply use their session like a user credential, and store information that persists so long as their cookie does (how else can could I reliably track an anonymous user?).</p>\n\n<p>But once they register (or log-in), I want to move that information from the session, into the account properly. One good reason is that it would make sense to delete data from anonymous users periodically, whereas registered user's data would be persisted.</p>\n\n<p>To do this I simply want access to the session (could be via the request) from a handler to the new-user signal, so I can make a one-off transfer from data in the session. But the new-user signal doesn't hold the session (or request).</p>\n"},{"tags":["django","django-facebook"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13049692,"title":"How to know if a user is facebook logged in? Django","body":"<p>As the title indicates, I would like to know how to do to distinguish a user that is logged in with facebook from a user that is logged in by mail. I'm using django-facebook.</p>\n\n<p>It seems that </p>\n\n<pre><code> request.user.is_authenticated()\n</code></pre>\n\n<p>is for every kind of authentification. </p>\n\n<p>Any help would be welcome,</p>\n"},{"tags":["python","django","osqa"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13048887,"title":"Django Error: Caught NoReverseMatch while rendering","body":"<p>I'm trying to setup a Django site (OSQA) and can't get it working.</p>\n\n<p>There are a few issues and one of them is when I tried to view a user's profile, I got the following exception:</p>\n\n<p>Can someone please point out where the problem might be?</p>\n\n<pre><code>TemplateSyntaxError at /users/2/allenq/\nCaught NoReverseMatch while rendering: Reverse for 'ask_to_me' with arguments '(2, u'allenq')' and keyword arguments '{}' not found.\nRequest Method: GET\nRequest URL:    http://123.243.100.125/users/2/allenq/\nDjango Version: 1.3.4\nException Type: TemplateSyntaxError\nException Value:    \nCaught NoReverseMatch while rendering: Reverse for 'ask_to_me' with arguments '(2, u'allenq')' and keyword arguments '{}' not found.\nException Location: /usr/lib/python2.6/site-packages/django/template/defaulttags.py in render, line 450\nPython Executable:  /usr/bin/python\nPython Version: 2.6.6\nPython Path:    \n['/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg',\n '/usr/lib/python2.6/site-packages/elementtree-1.2.7_20070827_preview-py2.6.egg',\n '/usr/lib/python2.6/site-packages/Markdown-2.2.0-py2.6.egg',\n '/usr/lib/python2.6/site-packages/html5lib-0.95-py2.6.egg',\n '/usr/lib/python2.6/site-packages/django_rosetta-0.6.8-py2.6.egg',\n '/usr/lib64/python26.zip',\n '/usr/lib64/python2.6',\n '/usr/lib64/python2.6/plat-linux2',\n '/usr/lib64/python2.6/lib-tk',\n '/usr/lib64/python2.6/lib-old',\n '/usr/lib64/python2.6/lib-dynload',\n '/usr/lib64/python2.6/site-packages',\n '/usr/lib64/python2.6/site-packages/PIL',\n '/usr/lib64/python2.6/site-packages/gst-0.10',\n '/usr/lib64/python2.6/site-packages/gtk-2.0',\n '/usr/lib64/python2.6/site-packages/webkit-1.0',\n '/usr/lib/python2.6/site-packages',\n '/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg-info',\n '/usr/local/src',\n '/usr/local/src/osqa',\n '/usr/local/src/osqa/forum/markdownext']\nServer time:    ???, 24 ?? 2012 22:58:23 +1100\nTemplate error\n\nIn template /usr/local/src/osqa/forum/skins/default/templates/users/info.html, error at line 31\nCaught NoReverseMatch while rendering: Reverse for 'ask_to_me' with arguments '(2, u'allenq')' and keyword arguments '{}' not found.\n21                  &lt;/tr&gt;\n22                  &lt;tr&gt;\n23                      &lt;td align=\"center\"&gt;\n24                          {% if not view_user.is_suspended %}\n25                              &lt;div class=\"scoreNumber\" id=\"user-reputation\"&gt;{{view_user.reputation|intcomma}}&lt;/div&gt;\n26                              &lt;p&gt;&lt;b style=\"color:#777;\"&gt;{% trans \"reputation\" %}&lt;/b&gt;&lt;/p&gt;\n27                          {% else %}\n28                              &lt;div class=\"scoreNumber\"&gt;{% trans \"Suspended\" %}&lt;/div&gt;\n29                              &lt;p&gt;{{ view_user.suspension.extra.publicmsg }}&lt;/p&gt;\n30                          {% endif %}\n31                              &lt;div class=\"scoreNumber\" id=\"user-reputation\"&gt;&lt;a href=\"{% url ask_to_me view_user.id view_user.username%}\"&gt;{% trans \"Ask to me\" %}&lt;/a&gt;&lt;/div&gt;\n32                      &lt;/td&gt;\n33                  &lt;/tr&gt;\n34              &lt;/table&gt;\n35          &lt;/td&gt;\n36          &lt;td width=\"360\" style=\"vertical-align: top;\"&gt;\n37          {% if can_view_private %}{% user_menu request.user view_user %}{% endif %}\n38              &lt;table class=\"user-details\"&gt;\n39                  &lt;tr&gt;\n40                      &lt;th colspan=\"2\" align=\"left\"&gt;&lt;h3&gt;{% trans \"Registered user\" %}&lt;/h3&gt;&lt;/th&gt;\n41                  &lt;/tr&gt;\nTraceback Switch to copy-and-paste view\n\n/usr/lib/python2.6/site-packages/django/core/handlers/base.py in get_response\n            response = callback(request, *callback_args, **callback_kwargs) ...\n? Local vars\n/usr/local/src/osqa/forum/modules/decorators.py in decorated\n        return decoratable(*args, **kwargs) ...\n? Local vars\n/usr/local/src/osqa/forum/modules/decorators.py in __call__\n            res = dec(res, *args, **kwargs) ...\n? Local vars\n/usr/local/src/osqa/forum/views/users.py in result\n        return render_to_response(template, context, context_instance=RequestContext(request)) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/shortcuts/__init__.py in render_to_response\n    return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/loader.py in render_to_string\n    return t.render(context_instance) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/base.py in render\n        return self._render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/base.py in _render\n    return self.nodelist.render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/base.py in render\n        bits.append(self.render_node(node, context)) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/debug.py in render_node\n        result = node.render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/loader_tags.py in render\n    return compiled_parent._render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/base.py in _render\n    return self.nodelist.render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/base.py in render\n        bits.append(self.render_node(node, context)) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/debug.py in render_node\n        result = node.render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/loader_tags.py in render\n    return compiled_parent._render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/base.py in _render\n    return self.nodelist.render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/base.py in render\n        bits.append(self.render_node(node, context)) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/debug.py in render_node\n        result = node.render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/loader_tags.py in render\n        result = block.nodelist.render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/base.py in render\n        bits.append(self.render_node(node, context)) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/debug.py in render_node\n        result = node.render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/loader_tags.py in render\n        result = block.nodelist.render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/base.py in render\n        bits.append(self.render_node(node, context)) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/debug.py in render_node\n        result = node.render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/loader_tags.py in render\n    return self.render_template(self.template, context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/loader_tags.py in render_template\n    output = template.render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/base.py in render\n        return self._render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/base.py in _render\n    return self.nodelist.render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/base.py in render\n        bits.append(self.render_node(node, context)) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/debug.py in render_node\n        result = node.render(context) ...\n? Local vars\n/usr/lib/python2.6/site-packages/django/template/defaulttags.py in render\n            raise e ...\n? Local vars\nRequest information\n\nGET\nNo GET data\nPOST\nNo POST data\nFILES\nNo FILES data\nCOOKIES\nVariable    Value\nsessionid   \n'1e7a11ca5a8631425ad03fd4973e57dc'\nMETA\nVariable    Value\nmod_wsgi.listener_port  \n'80'\nHTTP_COOKIE \n'sessionid=1e7a11ca5a8631425ad03fd4973e57dc'\nmod_wsgi.listener_host  \n''\nSERVER_SOFTWARE \n'Apache/2.2.15 (CentOS)'\nSCRIPT_NAME \nu''\nmod_wsgi.handler_script \n''\nSERVER_SIGNATURE    \n'&lt;address&gt;Apache/2.2.15 (CentOS) Server at 123.243.100.125 Port 80&lt;/address&gt;\\n'\nREQUEST_METHOD  \n'GET'\nPATH_INFO   \nu'/users/2/allenq/'\nSERVER_PROTOCOL \n'HTTP/1.1'\nQUERY_STRING    \n''\nHTTP_ACCEPT_CHARSET \n'ISO-8859-1,utf-8;q=0.7,*;q=0.3'\nHTTP_USER_AGENT \n'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4'\nHTTP_CONNECTION \n'keep-alive'\nHTTP_REFERER    \n'http://123.243.100.125/questions/unanswered/'\nSERVER_NAME \n'123.243.100.125'\nREMOTE_ADDR \n'123.243.100.125'\nmod_wsgi.request_handler    \n'wsgi-script'\nwsgi.url_scheme \n'http'\nPATH_TRANSLATED \n'/usr/local/src/osqa/osqa.wsgi/users/2/allenq/'\nSERVER_PORT \n'80'\nwsgi.multiprocess   \nFalse\nmod_wsgi.input_chunked  \n'0'\nSERVER_ADDR \n'192.168.0.10'\nDOCUMENT_ROOT   \n'/usr/local/src/osqa/forum'\nmod_wsgi.process_group  \n'osqa'\nSCRIPT_FILENAME \n'/usr/local/src/osqa/osqa.wsgi'\nSERVER_ADMIN    \n'admin@your.server.com'\nwsgi.input  \n&lt;mod_wsgi.Input object at 0x7f1d982f5670&gt;\nHTTP_HOST   \n'123.243.100.125'\nwsgi.multithread    \nTrue\nmod_wsgi.callable_object    \n'application'\nREQUEST_URI \n'/users/2/allenq/'\nHTTP_ACCEPT \n'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'\nwsgi.version    \n(1, 1)\nGATEWAY_INTERFACE   \n'CGI/1.1'\nwsgi.run_once   \nFalse\nwsgi.errors \n&lt;mod_wsgi.Log object at 0x7f1d982f5af0&gt;\nREMOTE_PORT \n'11611'\nHTTP_ACCEPT_LANGUAGE    \n'en-GB,en-US;q=0.8,en;q=0.6'\nmod_wsgi.version    \n(3, 2)\nmod_wsgi.application_group  \n'localhost.localdomain|'\nmod_wsgi.script_reloading   \n'1'\nwsgi.file_wrapper   \n''\nHTTP_ACCEPT_ENCODING    \n'gzip,deflate,sdch'\nSettings\nUsing settings module osqa.settings\nSetting Value\nUSE_L10N    \nFalse\nUSE_THOUSAND_SEPARATOR  \nFalse\nAPP_PROTOCOL    \n'http'\nLANGUAGE_CODE   \n'zh_CN'\nROOT_URLCONF    \n'urls'\nMANAGERS    \n()\nAPP_URL \n'http://127.0.0.1'\nDEFAULT_CHARSET \n'utf-8'\nAPP_DOMAIN  \n'127.0.0.1'\nSTATIC_ROOT \n''\nTEST_DATABASE_CHARSET   \nNone\nLOG_FILENAME    \n'django.osqa.log'\nMESSAGE_STORAGE \n'django.contrib.messages.storage.user_messages.LegacyFallbackStorage'\nDATABASE_HOST   \n'127.0.0.1'\nIGNORABLE_404_STARTS    \n('/cgi-bin/', '/_vti_bin', '/_vti_inf')\nSEND_BROKEN_LINK_EMAILS \nFalse\nURL_VALIDATOR_USER_AGENT    \n'Django/1.3.4 (http://www.djangoproject.com)'\nSTATICFILES_FINDERS \n('django.contrib.staticfiles.finders.FileSystemFinder',\n 'django.contrib.staticfiles.finders.AppDirectoriesFinder')\nSESSION_COOKIE_DOMAIN   \nNone\nSESSION_COOKIE_NAME \n'sessionid'\nADMIN_FOR   \n()\nTIME_INPUT_FORMATS  \n('%H:%M:%S', '%H:%M')\nDATABASES   \n{'default': {'ENGINE': 'django.db.backends.postgresql_psycopg2',\n         'HOST': '127.0.0.1',\n         'NAME': 'osqa',\n         'OPTIONS': {},\n         'PASSWORD': '********************',\n         'PORT': '',\n         'TEST_CHARSET': None,\n         'TEST_COLLATION': None,\n         'TEST_MIRROR': None,\n         'TEST_NAME': None,\n         'TIME_ZONE': 'Australia/Melbourne',\n         'USER': 'uosqa'}}\nTEST_DATABASE_NAME  \nNone\nFILE_UPLOAD_PERMISSIONS \nNone\nFILE_UPLOAD_HANDLERS    \n('django.core.files.uploadhandler.MemoryFileUploadHandler',\n 'django.core.files.uploadhandler.TemporaryFileUploadHandler')\nDEFAULT_CONTENT_TYPE    \n'text/html'\nOSQA_DEFAULT_SKIN   \n'default'\nAPPEND_SLASH    \nTrue\nFIRST_DAY_OF_WEEK   \n0\nDATABASE_ROUTERS    \n[]\nYEAR_MONTH_FORMAT   \n'F Y'\nSTATICFILES_STORAGE \n'django.contrib.staticfiles.storage.StaticFilesStorage'\nCACHES  \n{'default': {'BACKEND': 'django.core.cache.backends.filebased.FileBasedCache',\n         'LOCATION': '/usr/local/src/osqa/cache'}}\nMODULES_FOLDER  \n'/usr/local/src/osqa/forum_modules'\nSERVER_EMAIL    \nUSE_I18N    \nTrue\nTHOUSAND_SEPARATOR  \n','\nSECRET_KEY  \n'********************'\nLANGUAGE_COOKIE_NAME    \n'django_language'\nFILE_UPLOAD_TEMP_DIR    \n'/usr/local/src/osqa/tmp'\nTRANSACTIONS_MANAGED    \nFalse\nLOGGING_CONFIG  \n'django.utils.log.dictConfig'\nTEMPLATE_LOADERS    \n['django.template.loaders.filesystem.load_template_source',\n 'django.template.loaders.app_directories.load_template_source',\n 'forum.modules.template_loader.module_templates_loader',\n 'forum.skins.load_template_source']\nTEMPLATE_DEBUG  \nTrue\nCSRF_COOKIE_NAME    \n'csrftoken'\nTEST_DATABASE_COLLATION \nNone\nEMAIL_HOST_PASSWORD \n'********************'\nCACHE_BACKEND   \n'file:///usr/local/src/osqa/cache'\nSESSION_COOKIE_SECURE   \nFalse\nCSRF_COOKIE_DOMAIN  \nNone\nFILE_CHARSET    \n'utf-8'\nDEBUG   \nTrue\nMODULES_PACKAGE \n'forum_modules'\nSESSION_FILE_PATH   \nNone\nDEFAULT_FILE_STORAGE    \n'django.core.files.storage.FileSystemStorage'\nINSTALLED_APPS  \n['django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.sites',\n 'django.contrib.admin',\n 'django.contrib.humanize',\n 'django.contrib.sitemaps',\n 'django.contrib.markup',\n 'forum']\nLANGUAGES   \n(('ar', 'Arabic'),\n ('az', 'Azerbaijani'),\n ('zh-cn', 'Simplified Chinese'),\n ('zh-tw', 'Traditional Chinese'))\nDATABASE_ENGINE \n'postgresql_psycopg2'\nDATABASE_NAME   \n'osqa'\nCOMMENTS_FIRST_FEW  \n0\nPREPEND_WWW \nFalse\nSESSION_COOKIE_HTTPONLY \nFalse\nDATABASE_PORT   \n''\nDEBUG_PROPAGATE_EXCEPTIONS  \nFalse\nMONTH_DAY_FORMAT    \n'F j'\nLOGIN_URL   \n'/accounts/login/'\nSESSION_EXPIRE_AT_BROWSER_CLOSE \nFalse\nTIME_FORMAT \n'P'\nDATE_INPUT_FORMATS  \n('%Y-%m-%d',\n '%d %B, %Y')\nAUTHENTICATION_BACKENDS \n['django.contrib.auth.backends.ModelBackend']\nFORCE_SCRIPT_NAME   \n''\nPASSWORD_RESET_TIMEOUT_DAYS \n'********************'\nCACHE_MIDDLEWARE_ALIAS  \n'default'\nSESSION_SAVE_EVERY_REQUEST  \nFalse\nADMIN_MEDIA_PREFIX  \n'/admin_media/'\nNUMBER_GROUPING \n0\nSESSION_ENGINE  \n'django.contrib.sessions.backends.db'\nCSRF_FAILURE_VIEW   \n'django.views.csrf.csrf_failure'\nCOMMENTS_SKETCHY_USERS_GROUP    \nNone\nLOGIN_REDIRECT_URL  \n'/accounts/profile/'\nSESSION_COOKIE_PATH \n'/'\nLOGGING \n{'disable_existing_loggers': False,\n 'handlers': {'mail_admins': {'class': 'django.utils.log.AdminEmailHandler',\n                  'level': 'ERROR'}},\n 'loggers': {'django.request': {'handlers': ['mail_admins'],\n                'level': 'ERROR',\n                'propagate': True}},\n 'version': 1}\nCACHE_MIDDLEWARE_KEY_PREFIX \n''\nLOCALE_PATHS    \n()\nTEMPLATE_STRING_IF_INVALID  \n''\nCOMMENTS_ALLOW_PROFANITIES  \nFalse\nLOGOUT_URL  \n'/accounts/logout/'\nEMAIL_USE_TLS   \nFalse\nTEMPLATE_DIRS   \n('/usr/local/src/osqa/forum/skins',)\nFIXTURE_DIRS    \n()\nEMAIL_HOST  \n'localhost'\nDATE_FORMAT \n'N j, Y'\nMEDIA_ROOT  \n''\nADMINS  \n()\nFORMAT_MODULE_PATH  \nNone\nDEFAULT_FROM_EMAIL  \n'webmaster@localhost'\nSTATICFILES_DIRS    \n()\nMEDIA_URL   \n''\nDATETIME_FORMAT \n'N j, Y, P'\nEMAIL_SUBJECT_PREFIX    \n'[Django] '\nDJANGO_VERSION  \n1.3\nSITE_ID \n1\nDISALLOWED_USER_AGENTS  \n()\nALLOWED_INCLUDE_ROOTS   \n()\nDECIMAL_SEPARATOR   \n'.'\nSHORT_DATE_FORMAT   \n'm/d/Y'\nDATABASE_USER   \n'uosqa'\nMODULE_LIST \n[&lt;module 'osqa.forum_modules.sximporter' from '/usr/local/src/osqa/forum_modules/sximporter/__init__.pyc'&gt;,\n &lt;module 'osqa.forum_modules.pgfulltext' from '/usr/local/src/osqa/forum_modules/pgfulltext/__init__.pyc'&gt;,\n &lt;module 'osqa.forum_modules.default_badges' from '/usr/local/src/osqa/forum_modules/default_badges/__init__.pyc'&gt;,\n &lt;module 'osqa.forum_modules.akismet' from '/usr/local/src/osqa/forum_modules/akismet/__init__.pyc'&gt;,\n &lt;module 'osqa.forum_modules.exporter' from '/usr/local/src/osqa/forum_modules/exporter/__init__.pyc'&gt;,\n &lt;module 'osqa.forum_modules.localauth' from '/usr/local/src/osqa/forum_modules/localauth/__init__.pyc'&gt;,\n &lt;module 'osqa.forum_modules.robotstxt' from '/usr/local/src/osqa/forum_modules/robotstxt/__init__.pyc'&gt;,\n &lt;module 'osqa.forum_modules.facebookauth' from '/usr/local/src/osqa/forum_modules/facebookauth/__init__.pyc'&gt;,\n &lt;module 'osqa.forum_modules.oauthauth' from '/usr/local/src/osqa/forum_modules/oauthauth/__init__.pyc'&gt;]\nTEST_RUNNER \n'django.test.simple.DjangoTestSuiteRunner'\nSITE_SRC_ROOT   \n'/usr/local/src/osqa'\nTIME_ZONE   \n'Australia/Melbourne'\nFILE_UPLOAD_MAX_MEMORY_SIZE \n2621440\nAPP_BASE_URL    \n'http://127.0.0.1'\nEMAIL_BACKEND   \n'django.core.mail.backends.smtp.EmailBackend'\nDEFAULT_TABLESPACE  \n''\nTEMPLATE_CONTEXT_PROCESSORS \n['django.core.context_processors.request',\n 'forum.context.application_settings',\n 'forum.user_messages.context_processors.user_messages',\n 'django.core.context_processors.auth']\nSESSION_COOKIE_AGE  \n1209600\nONLINE_USERS    \n{}\nSETTINGS_MODULE \n'osqa.settings'\nUSE_ETAGS   \nFalse\nDISABLED_MODULES    \n['books', 'recaptcha', 'project_badges']\nLANGUAGES_BIDI  \n('he', 'ar', 'fa')\nDEFAULT_INDEX_TABLESPACE    \n''\nINTERNAL_IPS    \n('127.0.0.1',)\nSTATIC_URL  \nNone\nEMAIL_PORT  \n25\nSHORT_DATETIME_FORMAT   \n'm/d/Y P'\nABSOLUTE_URL_OVERRIDES  \n{}\nDATABASE_OPTIONS    \n{}\nCACHE_MIDDLEWARE_SECONDS    \n600\nBANNED_IPS  \n()\nDEBUG_TOOLBAR_CONFIG    \n{'INTERCEPT_REDIRECTS': True}\nDATETIME_INPUT_FORMATS  \n('%Y-%m-%d %H:%M:%S',\n '%Y-%m-%d %H:%M',\n '%Y-%m-%d',\n '%m/%d/%Y %H:%M:%S',\n '%m/%d/%Y %H:%M',\n '%m/%d/%Y',\n '%m/%d/%y %H:%M:%S',\n '%m/%d/%y %H:%M',\n '%m/%d/%y')\nDATABASE_PASSWORD   \n'********************'\nCOMMENTS_MODERATORS_GROUP   \nNone\nPROFANITIES_LIST    \n'********************'\nEMAIL_HOST_USER \n''\nCOMMENTS_BANNED_USERS_GROUP \nNone\nYou're seeing this error because you have DEBUG = True in your Django settings file. Change that to False, and Django will display a standard 500 page.\n</code></pre>\n\n<p><strong>Edit:\nThe urls.py file:</strong></p>\n\n<pre><code>import startup\nimport os.path\nfrom forum import settings\nfrom django.conf.urls.defaults import *\nfrom django.conf import settings as djsettings\nfrom django.contrib import admin\nfrom forum import views as app\nfrom forum.sitemap import OsqaSitemap\nfrom django.utils.translation import ugettext as _\nimport logging\n\nadmin.autodiscover()\n\nsitemaps = {\n    'questions': OsqaSitemap\n}\n\nAPP_PATH = os.path.dirname(__file__)\n\ncore_urls = (\n    url(r'^$', app.readers.index, name='index'),\n    url(r'^%s(.*)' % _('nimda/'), include(admin.site.urls)),                        url(r'^sitemap.xml$', 'forum.sitemap.index', {'sitemaps': sitemaps}),\n    url(r'^sitemap-(?P&lt;section&gt;.+)\\.xml$', 'forum.sitemap.sitemap', {'sitemaps': sitemaps}),\n\n    url(r'^favicon\\.ico$', app.meta.favicon),\n    url(r'^cstyle\\.css$', app.meta.custom_css, name='custom_css'),\n\n    url(r'^m/(?P&lt;skin&gt;\\w+)/media/(?P&lt;path&gt;.*)$', app.meta.media , name='osqa_media'),\n    url(r'^%s(?P&lt;path&gt;.*)$' % _('upfiles/'), 'django.views.static.serve', {'document_root': os.path.join(APP_PATH, 'upfiles').replace('\\\\', '/')}, name='uploaded_file',),\n\n    url(r'^%s$' % _('faq/'), app.meta.static, {'content': settings.FAQ_PAGE_TEXT, 'title': _('FAQ')}, name='faq'),\n    url(r'^%s$' % _('about/'), app.meta.static, {'content': settings.ABOUT_PAGE_TEXT, 'title': _('About')}, name='about'),\n    url(r'^%s$' % _('markdown_help/'), app.meta.markdown_help, name='markdown_help'), url(r'^opensearch\\.xml$', app.meta.opensearch, name='opensearch'),\n    url(r'^opensearch\\.xml$', app.meta.opensearch, name='opensearch'),\n    url(r'^%s$' % _('privacy/'), app.meta.privacy, name='privacy'),\n    url(r'^%s$' % _('logout/'), app.meta.logout, name='logout'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/%s$' % (_('answers/'), _('edit/')), app.writers.edit_answer, name='edit_answer'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/$' % _('revisions/'), app.readers.revisions, name='revisions'),\n    url(r'^%s$' % _('questions/'), app.readers.questions, name='questions'),\n    url(r'^%s%s$' % (_('questions/'), _('ask/')), app.writers.ask, name='ask'),\n    url(r'^%s%s$' % (_('questions/'), _('related_questions/')), app.commands.related_questions, name='related_questions'),\n\n    url(r'^%s%s$' % (_('questions/'), _('unanswered/')), app.readers.unanswered, name='unanswered'),\n    url(r'^%s(?P&lt;mode&gt;[\\w\\-]+)/(?P&lt;user&gt;\\d+)/(?P&lt;slug&gt;.*)/$' % _('questions/'), app.readers.user_questions, name='user_questions'),\n\n\n    url(r'^%s(?P&lt;id&gt;\\d+)/%s$' % (_('questions/'), _('edit/')), app.writers.edit_question, name='edit_question'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/%s$' % (_('questions/'), _('close/')), app.commands.close, kwargs=dict(close=True), name='close'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/%s$' % (_('questions/'), _('reopen/')), app.commands.close, kwargs=dict(close=False), name='reopen'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/%s$' % (_('questions/'), _('answer/')), app.writers.answer, name='answer'),\n    url(r'^%s(?P&lt;action&gt;\\w+)/$' % _('pending-data/'), app.writers.manage_pending_data, name='manage_pending_data'),\n\n    url(r'^%s(?P&lt;id&gt;\\d+)/(?P&lt;vote_type&gt;[a-z]+)/' % _('vote/'), app.commands.vote_post, name='vote_post'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/$' % _('like_comment/'), app.commands.like_comment, name='like_comment'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/' % _('comment/'), app.commands.comment, name='comment'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/$' % _('delete_comment/'), app.commands.delete_comment, name='delete_comment'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/$' % _('convert_comment/'), app.commands.convert_comment_to_answer, name='convert_comment'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/$' % _('accept_answer/'), app.commands.accept_answer, name='accept_answer'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/$' % _('answer_link/'), app.commands.answer_permanent_link, name='answer_permanent_link'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/$' % _('mark_favorite/'), app.commands.mark_favorite, name='mark_favorite'),\n    url(r'^%s%s(?P&lt;user_id&gt;\\d+)/%s(?P&lt;answer_id&gt;\\d+)/$' % (_('award_points/'), _('user/'), _('answer/')), app.commands.award_points, name='award_points'),\n\n    url(r'^%s(?P&lt;id&gt;\\d+)/' % _('flag/'), app.commands.flag_post, name='flag_post'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/' % _('delete/'), app.commands.delete_post, name='delete_post'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/(?P&lt;user&gt;\\d+)?$' % _('subscribe/'), app.commands.subscribe, name='subscribe'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/$' % _('subscribe/'), app.commands.subscribe, name='subscribe_simple'),\n    url(r'^%s' % _('matching_tags/'), app.commands.matching_tags, name='matching_tags'),\n    url(r'^%s' % _('matching_users/'), app.commands.matching_users, name='matching_users'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/' % _('node_markdown/'), app.commands.node_markdown, name='node_markdown'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/' % _('convert/'), app.commands.convert_to_comment, name='convert_to_comment'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/' % _('convert_to_question/'), app.writers.convert_to_question,name='convert_to_question'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/' % _('wikify/'), app.commands.wikify, name='wikify'),\n\n    url(r'^%s(?P&lt;id&gt;\\d+)/(?P&lt;slug&gt;[\\w-]*)$' % _('question/'), 'django.views.generic.simple.redirect_to', {'url': '/questions/%(id)s/%(slug)s'}),\n    url(r'^%s(?P&lt;id&gt;\\d+)/?$' % _('questions/'), app.readers.question, name='question'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/(?P&lt;slug&gt;.*)/(?P&lt;answer&gt;\\d+)$' % _('questions/'), app.readers.question),\n    url(r'^%s(?P&lt;id&gt;\\d+)/(?P&lt;slug&gt;.*)$' % _('questions/'), app.readers.question, name='question'),\n\n\n    url(r'^%s$' % _('tags/'), app.readers.tags, name='tags'),\n    url(r'^%s(?P&lt;tag&gt;.*)/$' % _('tags/'), app.readers.tag, name='tag_questions'),     \n    url(r'^%s%s(?P&lt;tag&gt;[^/]+)/$' % (_('mark-tag/'),_('interesting/')), app.commands.mark_tag, kwargs={'reason':'good','action':'add'}, name='mark_interesting_tag'),     \n    url(r'^%s%s(?P&lt;tag&gt;[^/]+)/$' % (_('mark-tag/'),_('ignored/')), app.commands.mark_tag, kwargs={'reason':'bad','action':'add'}, name='mark_ignored_tag'),     \n    url(r'^%s(?P&lt;tag&gt;[^/]+)/$' % _('unmark-tag/'), app.commands.mark_tag, kwargs={'action':'remove'}, name='mark_ignored_tag'),     \n\n    url(r'^%s$' % _('users/'), app.users.users, name='users'),\n    # url(r'^%s$' % _('online_users/'), app.users.online_users, name='online_users'),    \n\n    url(r'^%s(?P&lt;id&gt;\\d+)/%s$' % (_('users/'), _('edit/')), app.users.edit_user, name='edit_user'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/%s$' % (_('users/'), _('award/')), app.users.award_points, name='user_award_points'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/%s$' % (_('users/'), _('suspend/')), app.users.suspend, name='user_suspend'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/%s(?P&lt;action&gt;[a-z]+)/(?P&lt;status&gt;[a-z]+)/$' % (_('users/'), _('powers/')), app.users.user_powers, name='user_powers'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/(?P&lt;slug&gt;.*)/%s$' % (_('users/'), _('subscriptions/')), app.users.user_subscriptions, name='user_subscriptions'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/(?P&lt;slug&gt;.*)/%s$' % (_('users/'), _('preferences/')), app.users.user_preferences, name='user_preferences'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/(?P&lt;slug&gt;.*)/%s$' % (_('users/'), _('favorites/')), app.users.user_favorites, name='user_favorites'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/(?P&lt;slug&gt;.*)/%s$' % (_('users/'), _('reputation/')), app.users.user_reputation, name='user_reputation'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/(?P&lt;slug&gt;.*)/%s$' % (_('users/'), _('votes/')), app.users.user_votes, name='user_votes'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/(?P&lt;slug&gt;.*)/%s$' % (_('users/'), _('recent/')), app.users.user_recent, name='user_recent'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/(?P&lt;slug&gt;.*)/$' % _('users/'), app.users.user_profile, name='user_profile'),\n    url(r'^%s$' % _('badges/'), app.meta.badges, name='badges'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/(?P&lt;slug&gt;[\\w-]+)/?$' % _('badges/'), app.meta.badge, name='badge'),\n    # (r'^admin/doc/' % _('admin/doc'), include('django.contrib.admindocs.urls')),\n\n    url(r'^%s$' % _('upload/'), app.writers.upload, name='upload'),\n    url(r'^%s$' % _('search/'), app.readers.search, name='search'),\n    url(r'^%s$' % _('contact/'), app.meta.feedback, name='feedback'),\n\n    (r'^i18n/', include('django.conf.urls.i18n')),\n\n    url(r'^%s%s$' % (_('account/'), _('signin/')), app.auth.signin_page, name='auth_signin'),\n    url(r'^%s%s$' % (_('account/'), _('signout/')), app.auth.signout, name='user_signout'),\n    url(r'^%s(?P&lt;provider&gt;\\w+)/%s$' % (_('account/'), _('signin/')), app.auth.prepare_provider_signin, name='auth_provider_signin'),\n    url(r'^%s(?P&lt;provider&gt;\\w+)/%s$' % (_('account/'), _('done/')), app.auth.process_provider_signin, name='auth_provider_done'),\n    url(r'^%s%s$' % (_('account/'), _('register/')), app.auth.external_register, name='auth_external_register'),\n    url(r'^%s%s(?P&lt;user&gt;\\d+)/(?P&lt;code&gt;.+)/$' % (_('account/'), _('validate/')), app.auth.validate_email, name='auth_validate_email'),\n    url(r'^%s%s$' % (_('account/'), _('tempsignin/')), app.auth.request_temp_login, name='auth_request_tempsignin'),\n    url(r'^%s%s(?P&lt;user&gt;\\d+)/(?P&lt;code&gt;.+)/$' % (_('account/'), _('tempsignin/')), app.auth.temp_signin, name='auth_tempsignin'),\n    url(r'^%s(?P&lt;id&gt;\\d+)/%s$' % (_('account/'), _('authsettings/')), app.auth.auth_settings, name='user_authsettings'),\n    url(r'^%s%s(?P&lt;id&gt;\\d+)/%s$' % (_('account/'), _('providers/'), _('remove/')), app.auth.remove_external_provider, name='user_remove_external_provider'),\n    url(r'^%s%s%s$' % (_('account/'), _('providers/'), _('add/')), app.auth.signin_page, name='user_add_external_provider'),\n    url(r'^%s%s$' %(_('account/'), _('send-validation/')), app.auth.send_validation_email, name='send_validation_email'),\n\n\n    url(r'^%s$' % _('admin/'), app.admin.dashboard, name='admin_index'),\n    url(r'^%s%s$' % (_('admin/'), _('switch_interface/')), app.admin.interface_switch, name='admin_switch_interface'),\n    url(r'^%s%s$' % (_('admin/'), _('statistics/')), app.admin.statistics, name='admin_statistics'),\n    url(r'^%s%s$' % (_('admin/'), _('denormalize/')), app.admin.recalculate_denormalized, name='admin_denormalize'),\n    url(r'^%s%s$' % (_('admin/'), _('go_bootstrap/')), app.admin.go_bootstrap, name='admin_go_bootstrap'),\n    url(r'^%s%s$' % (_('admin/'), _('go_defaults/')), app.admin.go_defaults, name='admin_go_defaults'),\n    url(r'^%s%s(?P&lt;set_name&gt;\\w+)/(?P&lt;var_name&gt;\\w+)/$' % (_('admin/'), _('settings/')), app.admin.get_default, name='admin_default'),\n    url(r'^%s%s$' % (_('admin/'), _('maintenance/')), app.admin.maintenance, name='admin_maintenance'),\n    url(r'^%s%s$' % (_('admin/'), _('flagged_posts/')), app.admin.flagged_posts, name='admin_flagged_posts'),\n    url(r'^%s%s$' % (_('admin/'), _('static_pages/')), app.admin.static_pages, name='admin_static_pages'),\n\n    url(r'^%s%s%s$' % (_('admin/'), _('static_pages/'), _('new/')), app.admin.edit_page, name='admin_new_page'),\n    url(r'^%s%s%s(?P&lt;id&gt;\\d+)/$' % (_('admin/'), _('static_pages/'), _('edit/')), app.admin.edit_page, name='admin_edit_page'),\n\n    url(r'^%s%s(?P&lt;name&gt;\\w+)/$' % (_('admin/'), _('tools/')), app.admin.tools_page, name='admin_tools'),\n\n    url(r'^%s%s(?P&lt;set_name&gt;\\w+)/$' % (_('admin/'), _('settings/')), app.admin.settings_set, name='admin_set'),\n\n    url(r'%s%s' % (_('admin/'), _('test_email_settings/')), app.admin.test_email_settings, name='test_email_settings'),\n\n    url(r'^feeds/rss[/]?$', app.readers.feed, name='latest_questions_feed'),\n\n)\n\nfrom forum.modules import get_modules_script\n\nmodule_patterns = get_modules_script('urls')\n\nurlpatterns = patterns('')\n\nfor pattern_file in module_patterns:\n    pattern = getattr(pattern_file, 'urlpatterns', None)\n    if pattern:\n    urlpatterns += pattern\n\nmodule_defined = {}\n\nfor t in urlpatterns:\n    if hasattr(t, 'name') and t.name:\n    module_defined[t.name] = True\n\ncore_defined = []\n\nfor u in core_urls:\n    if not(hasattr(u, 'name') and u.name and (u.name in module_defined)):\n    core_defined.append(u)\n\ndef urlname(name):\n    if name in module_defined:\n    return None\n    return name\n\nurlpatterns += patterns('', *core_defined)\n</code></pre>\n"},{"tags":["django","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":60,"score":4,"question_id":12990547,"title":"What is the proper implementation of 'obj_get' in Django Tastypie?","body":"<p>I'm quite new to Django &amp; Tastypie. I would like to return only one of the objects from the query. I've tried almost everything and cannot seem to find the solution. Here is my code below:</p>\n\n<pre><code>class ProfileResource(ModelResource):\n     person = fields.ForeignKey(UserResource, 'user', full=True)\n\nclass Meta:\n    queryset = Person.objects.all()\n    resource_name = 'profile'\n    authentication = BasicAuthentication()\n    authorization = DjangoAuthorization()\n    serializer = Serializer(formats=['json'])\n</code></pre>\n\n<p>Now the part I'm having trouble with is how can I return a single user object from a single resource using <code>request.user</code>.</p>\n"},{"tags":["django","django-models","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13048715,"title":"Customizing django object parameters value output","body":"<p>what does django do, when i do something like that in template</p>\n\n<pre><code>{{ object.parameter }}\n</code></pre>\n\n<p>I ask this because in case of arrayfields (postgresql array fields) it will print out either </p>\n\n<pre><code>{'value', 'value', 'value'}\n</code></pre>\n\n<p>(because thats how postgresql stores arrays in arrayfields) </p>\n\n<p>or </p>\n\n<pre><code>['value','value','value']\n</code></pre>\n\n<p>if i use fields post_init method to convert postgresql array to python list.</p>\n\n<p>Desired output would of course be value, value, value. I would rather not use some kind of filters for that, because then i would have to resort using IFs in templates or use some kind of template tag filter for every value i print out and that does not feel like a smart thing to do. </p>\n\n<p>By the way, i know i can do something like that in template :</p>\n\n<pre><code>{% for choice in field.choices %}\n    {{ choice }}\n    {% if forloop.last %}\n    {% else %}, \n    {% endif%}\n{% endfor %}\n</code></pre>\n\n<p>and that gives me exactly what i want, but i thought there would be some other way doing it - with some modelfield method or something.</p>\n\n<p>Alan</p>\n"},{"tags":["django","tornado","instagram"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13009512,"title":"How to use Tornado work with Django? Is it a good solution?","body":"<p>I've a huge django project and have to use Instagram API and its subscriptions model to work. For the subscriptions, my server has to be very responsive and be ready to work asynchronously to set up a hook so as to receive notifications once the user posts. Or that's what the documentation suggests. Now will it be a good thing to use Tornado there? Just for that small part or can I do it using Django in an effective way? if so, how? </p>\n"},{"tags":["django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":44,"score":-1,"question_id":13043312,"title":"Django how to create a reusable apps","body":"<p>I am planing to develop a reusable(3rd party) application which will import jobs from some jobs sites. But I do not know how to create a reusable application. </p>\n\n<p>My application name should be 'import_jobs' and which can be used across multiple projects if they mentioned in ``INSTALLED_APPS= (\"import_jobs\",)</p>\n\n<p>I searched in google for some best practice and tutorial, But I didn't get any source. Can anyone help me on this?</p>\n"},{"tags":["django","django-haystack"],"answer_count":2,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":747,"score":3,"question_id":9163388,"title":"django haystack autocomplete","body":"<p>I am trying to use django-haystack (been around 2 days now), and I have got the basic Getting Started example working and it looks very impressive. I would now like to try the autocomplete function on haystack.</p>\n\n<p><a href=\"http://readthedocs.org/docs/django-haystack/en/v1.2.4/autocomplete.html\" rel=\"nofollow\">http://readthedocs.org/docs/django-haystack/en/v1.2.4/autocomplete.html</a></p>\n\n<p>The first part seems fine: \"Setting up the data\" seems simple enough. However, I am not sure where the \"Performing the Query\" needs to be written: i.e in which view should I include:</p>\n\n<pre><code>from haystack.query import SearchQuerySet\nsqs = SearchQuerySet().filter(content_auto=request.GET.get('q', ''))\n</code></pre>\n\n<p>My current urls.py is simple and set up as follows:</p>\n\n<pre><code>urlpatterns = patterns('',\n    # Examples:\n    ('^hello/$', hello),\n    (r'^$', hello), \n    (r'^search/', include('haystack.urls')),\n    # url(r'^$', 'mysite.views.home', name='home'),\n    # url(r'^mysite/', include('mysite.foo.urls')),\n\n    # Uncomment the admin/doc line below to enable admin documentation:\n    #url(r'^admin/doc/', include('django.contrib.admindocs.urls')),\n\n    # Uncomment the next line to enable the admin:\n    url(r'^admin/', include(admin.site.urls)),\n)\n</code></pre>\n\n<p>Looking at the following blog:</p>\n\n<p><a href=\"http://tech.agilitynerd.com/haystack-search-result-ordering-and-pre-rende\" rel=\"nofollow\">http://tech.agilitynerd.com/haystack-search-result-ordering-and-pre-rende</a></p>\n\n<p>I would like to have something like:</p>\n\n<pre><code>url(r'^search/', SearchView(load_all=False,searchqueryset=sqs),name='haystack_search'), \n</code></pre>\n\n<p>but, where should the sqs be specified? in the urls.py or views.py? I tried both, but they give me a name error \"request\" not found on the sqs statement.</p>\n"},{"tags":["django","csrf","django-csrf"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13048228,"title":"Django - {% csrf_token %} was used in a template, but the context did not provide the value","body":"<p>I'm new to Django and I'm still trying to get to grips with its features. I've created very simple project with <strong>Django 1.4.2</strong> which has index page with simple form where you enter something and results page where your input is displayed after submission (the code is below).</p>\n\n<p>After submission, I get error 403 and the following message:</p>\n\n<blockquote>\n  <p>A {% csrf_token %} was used in a template, but the context did not\n  provide the value.  This is usually caused by not using\n  RequestContext.   warnings.warn(\"A {% csrf_token %} was used in a\n  template, but the context did not provide the value.  This is usually\n  caused by not using RequestContext.\")</p>\n</blockquote>\n\n<p><strong>index.html</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;head&gt;\n    &lt;title&gt;Index page&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div id=\"header\"&gt;Welcome to index page&lt;/div&gt;\n    &lt;div id=\"content\"&gt;\n        &lt;p&gt;Enter your name&lt;/p&gt;\n        &lt;form action=\"/result/\" method=\"post\" accept-charset=\"utf-8\"&gt;{% csrf_token %}\n            &lt;input type=\"text\" name=\"answer\"&gt;\n            &lt;input type=\"submit\" value=\"Send!\"&gt;\n        &lt;/form&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p><strong>result.html</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;head&gt;\n    &lt;title&gt;Result page&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div id=\"header\"&gt;Here is the result&lt;/div&gt;\n    &lt;div id=\"content\"&gt;\n        &lt;p&gt;Your name is: {{ answer }}&lt;/p&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>from django.http import HttpResponse\nfrom django.shortcuts import render_to_response\nfrom django.template import RequestContext\n\ndef index(request):\n    return render_to_response('index.html')\n\ndef result(request):\n    p = request.POST['answer']\n    return render_to_response('result.html', {'answer': p}, context_instance=RequestContext(request))\n</code></pre>\n\n<p>I've looked into documentation and various examples on the Internet, but I don't understand what I'm doing wrong. If I disable <strong>django.middleware.csrf.CsrfViewMiddleware</strong> in <strong>settings.py</strong>, I get exactly what I want, but that's not the answer I'm looking for.</p>\n\n<p>I appreciate help from more experienced Django ninjas :-)</p>\n"},{"tags":["django","django-templates"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13048086,"title":"django template rows of multiple items","body":"<p>I'm creating a catalogue, where there is a list of items of undefined length. I want to spit it out in rows with three columns each. So I have the following html:</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n    &lt;div class=\"three columns\"&gt;item 1\n    &lt;/div&gt;\n    &lt;div class=\"three columns\"&gt;item 2\n    &lt;/div&gt;\n    &lt;div class=\"three columns\"&gt;item 3\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"row\"&gt;\n    &lt;div class=\"three columns\"&gt;item 4\n    &lt;/div&gt;\n    &lt;div class=\"three columns\"&gt;item 5\n    &lt;/div&gt;\n    &lt;div class=\"three columns\"&gt;item 6\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I'm stuck as to how I can implement this as a django template? How can I split it up so that a new row starts after three items?</p>\n"},{"tags":["django","internationalization"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13047967,"title":"Error lookup for key [LANGUAGES] usin i118n","body":"<p>I'm having a hard time to make i118 work. When calling my html I get:  </p>\n\n<pre><code>Failed lookup for key [LANGUAGES] in u\"[{'projects': [&lt;Project: etwas&gt;]}]\"\n</code></pre>\n\n<p>This was my work flow:</p>\n\n<pre><code>#setting.py\nLANGUAGE_CODE = 'de'\n\nugettext = lambda s: s\n\nLANGUAGES = (\n   ('de', ugettext('German')),\n   ('en', ugettext('English')),\n   ('pt', ugettext('Portuges')),\n)\n\nMIDDLEWARE_CLASSES = (\n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.locale.LocaleMiddleware',\n    #...\n\nTEMPLATE_CONTEXT_PROCESSORS = global_settings.TEMPLATE_CONTEXT_PROCESSORS + (\n    'django.core.context_processors.i18n',\n)\n\n\n#base.html\n{% load i18n %}\n&lt;html&gt;\n&lt;body&gt;\n&lt;form action=\"/i18n/setlang/\" method=\"post\"&gt; \n{% csrf_token %}\n&lt;input name=\"next\" type=\"hidden\" value=\"next/page\" /&gt; \n&lt;select name=\"language\"&gt; \n{% get_language_info_list for LANGUAGES as languages %}\n{% for language in languages %}\n    &lt;option value=\"{{ language.code }}\"&gt;{{ language.name_local }}  ({{ language.code }})&lt;/option&gt;\n{% endfor %}\n\n#projects.html\n{% extends 'base.html' %}\n{% load i18n %} \n{% block content %}\n{% for p in projects %}\n    &lt;h1&gt;{{ p.title_en }}&lt;/h1&gt;\n    &lt;p&gt;{{ p.body_de }} &lt;/p&gt;\n    &lt;p&gt;{{ p.body_pt }} &lt;/p&gt;\n    &lt;hr&gt;    \n{% endfor %}\n{% endblock %}\n</code></pre>\n\n<p>What am I missing? I can't find any useful information on the error message online.</p>\n"},{"tags":["python","django","django-class-based-views"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13046141,"title":"Is the form in create view already bound?","body":"<p>I have this code</p>\n\n<pre><code>class ObjectCreate(CreateView):\n\n    def form_valid(self, form):\n</code></pre>\n\n<p>I want to know that is this form already bounded to object instance and i can use form.save or i have to bound it to model instance manually</p>\n"},{"tags":["javascript","django","django-staticfiles"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13047966,"title":"Django javascript not working (css and image loading works correctly)","body":"<p>I use the staticfiles app to load CSS files, images and Javascript files in my Django app, from Amazon S3. Using collectstatic I have uploaded my files to S3, but when I load them with staticfiles, while CSS and images load correctly, Javascript isn't working. I'm on the local development server now (manage.py runserver..)\nDo I need any extra setting for Javascript? Shouldn't it load just like other static files (css, images)? </p>\n\n<p>related part of <strong>settings.py</strong>:</p>\n\n<pre><code>AWS_ACCESS_KEY_ID = 'access_key'\nAWS_SECRET_ACCESS_KEY = 'secret_access_key'\nAWS_STORAGE_BUCKET_NAME = 'bucket_name'\nSTATICFILES_STORAGE = 'storages.backends.s3boto.S3BotoStorage'\n\nSTATIC_ROOT = '/path_to_my_app/sitestatic/'\n\nSTATIC_URL = '/static/'   # I'm actually not sure if it is needed with staticfiles app\n\nSTATICFILES_DIRS = (\n    '/path_to_my_app/media/css',\n    '/path_to_my_app/media/img',\n    '/path_to_my_app/media/js',\n)\n\nTEMPLATE_DIRS = (\n    os.path.join(os.path.dirname(__file__), '..', 'templates').replace('\\\\','/'),\n)\n\nINSTALLED_APPS = (\n    ...\n    'django.contrib.staticfiles',\n    ...\n)\n</code></pre>\n\n<p><strong>home.html</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    {% load staticfiles %}\n    &lt;link rel=\"stylesheet\" href=\"{% static 'home.css' %}\"&gt;\n    &lt;script type=\"text/javascript\" src=\"{% static 'home.js' %}\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;My Django App&lt;/h1&gt;\n    &lt;input type=\"button\" value=\"Click me\" onClick=\"javascript: clickMe()\" /&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>home.js</strong></p>\n\n<pre><code>function clickMe(){\n    alert(\"You clicked me!\");\n}\n</code></pre>\n"},{"tags":["django","django-crispy-forms"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13047613,"title":"Customise form.errors location in template when using crispy-forms","body":"<p>How can I display form.errors in one place only when using multiple <a href=\"https://github.com/maraujop/django-crispy-forms\" rel=\"nofollow\">crispy-forms</a> on one page?</p>\n\n<p>For example, I have the following form in my template:</p>\n\n<pre><code>&lt;form enctype=\"multipart/form-data\" action=\"\" method=\"post\"&gt;{% csrf_token %}\n    {% load crispy_forms_tags %}\n    {% crispy form_A %}\n    {% if crispy form_B %}\n        {% crispy crispy form_B %}\n    {% endif %}\n    &lt;input type=\"submit\" value=\"Submit\"/&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Note that self.helper.form_tag is set to False for both form_A and form_B.</p>\n\n<p>At the moment, when raising a ValidationError in form_B's clean() method, the form.errors will get displayed within form_B (below form_A). I would like to have all form.errors for form_A and form_B to be displayed at the same place (at the top of the page). Is there any way to customise this output with crispy-forms?</p>\n"},{"tags":["jquery","python","django","json","internet-explorer-9"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":127,"score":2,"question_id":13018246,"title":"Django: Issue with JSON and Internet Explorer","body":"<p>have a problem with JSON not working with Internet Explorer (IE9).\nI've searched the web alot, and tried the different solutions, but nothing seems to work for me. So thought it was time to create a SO account and ask my first question.</p>\n\n<p>I'm using JSON and jQuery/AJAX to create a simple upload progress indicator\nThe indicator works fine in Firefox and Chrome</p>\n\n<p>This is part of my view function:</p>\n\n<pre><code>if request.method == \"POST\":\n    if form.is_valid():\n        file = form.save()\n        result = {\"status\": \"ok\", \"href\": reverse(\"portal.editor.views.files_list\", args=[file.directory.pk])}\n        if not request.is_ajax():\n            response = HttpResponseRedirect(reverse(\"portal.editor.views.files_list\", args=[file.directory.pk]))\n    else:\n        respone = {\"status\": \"error\"}\n\n    if request.is_ajax():\n        response = HttpResponse(json.dumps(result), mimetype=\"application/json\")\n        response[\"Cache-Control\"] = \"no-cache\"\n\nreturn response\n</code></pre>\n\n<p>and here is my jQuery code:</p>\n\n<pre><code>if( $(\"#id_edit_form\").length &gt; 0 )\n    $(\"#id_edit_form\").ajaxForm({\n        cache: false,\n        dataType: \"json\",\n        contentType: \"application/json\",\n        beforeSubmit:  function(formData, jqForm, options){\n            $(\"#id_overlay\").height($(document).height()).show();\n        },\n        success:       function(response, status, xhr, $form){\n            $(\"#id_overlay\").hide();\n                if( status == \"success\" ){\n                    if( response.status == \"ok\"){\n                        location.href = response.href;\n                    }else\n                    if(response.status == \"error\" ){\n                        for(var item in response.form){\n                            $(\"#id_\"+item).parent(\"p\").next(\"p.js_form-error\").html(response.form[item][0]);\n                        }\n                    }else\n                        alert(response.result);\n                }else\n                    alert(\"Error status:\", status);\n        },\n    });\n</code></pre>\n\n<p>I feel like I've tried everything. Also tried changing mimetype to \"text/plain\" and it still didn't work.\nI'm using Django 1.3, Python 2.6 and jQuery 1.6.1 with nginx server.</p>\n\n<p>What about mimetype in nginx/mime.types? Should I add json in this file?\nI really need help with this, since I've been tearing my head of due to this problem!</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13047079,"title":"creating separate activity streams in Django","body":"<p>I'm working on a project using djago-activity-stream.\nThis has worked so far, however now the stream is to be split into different access levels depending on the user.</p>\n\n<p>User A should see Item A, B and C from all users that it has a level 1 connection with,\nhowever if the user has a level 2 connection with another user, it should on;y see A and B from that user.\netc.</p>\n\n<p>Currently this would involve getting all the updates from all users, and then doing a lookup on each user to see if it has a level 1 connection or not.\nThis is terrible since you would have to iterate over the queryset and exclude items every time you pull the stream</p>\n\n<p>What is the best method of doing this?\nIs Django activity stream still suitable for this or should it be replaced with something else?</p>\n"},{"tags":["django","save","modelform"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":13046488,"title":"Saving data from ModelForm","body":"<p>I am new to Django and I'm trying to save data using ModelForm. Template 'Vlozit' has a ModelForm and when submitted, I want the data saved in the DB and the redirect to base.html that actually loads the data from the DB and lists the output. The problem is that all works fine but the data is not saved. Please help me find what I am missing. Thank you.</p>\n\n<p>Here's the model:</p>\n\n<pre><code>class Customer(models.Model):\n    Name = models.CharField(max_length=30)\n    Description = models.CharField(max_length=150)\n    Creation_Date = models.DateField(default=datetime.now)\n    Active = models.BooleanField(default=False)\n\ndef __unicode__(self):\n    return self.Name\n\nCustomers = models.Manager()\n</code></pre>\n\n<p>Here's the ModelForm:</p>\n\n<pre><code>class CustomerForm(forms.ModelForm):\n    Description = forms.CharField(widget=forms.Textarea)\n\n    class Meta:\n        model = Customer\n</code></pre>\n\n<p>Here's the view:</p>\n\n<pre><code>def vlozit(request):\n    if request.method == 'POST':\n        form = CustomerForm(request.POST, instance=Customer)\n        if form.is_valid():\n            form.save(True) \n            return HttpResponseRedirect(reverse('Base.html'))\n    else:\n        form = CustomerForm()\n        return render_to_response(\"Vlozit.html\", {'form': form}, context_instance = RequestContext(request))\n</code></pre>\n\n<p>Here's the template 'Vlozit':</p>\n\n<pre><code>{% extends \"base.html\" %}\n\n{% block head %}\n    {{ form.media }}\n    &lt;script&gt;\n        $(function() {\n            $( \"#id_Creation_Date\" ).datepicker();\n        });\n    &lt;/script&gt;\n{% endblock %}\n\n{% block title %}{{block.super}} - Vlozit{% endblock %}\n{% block content %}\n&lt;div id=\"content\"&gt;\n    &lt;form method=\"POST\" action=\"{% url url_home %}\"&gt;\n    {% csrf_token %}\n        &lt;table&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Name&lt;/td&gt;\n                &lt;td&gt;{{ form.Name }}&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Description&lt;/td&gt;\n                &lt;td&gt;{{ form.Description }}&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Creation Date&lt;/td&gt;\n                &lt;td&gt;{{ form.Creation_Date }}&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Active&lt;/td&gt;\n                &lt;td&gt;{{ form.Active }}&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;\n        &lt;input type=\"submit\" value=\"Vlozit\"&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n{% endblock content %}\n</code></pre>\n"},{"tags":["django","generics","django-models","django-queryset","relationships"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12822829,"title":"Generic Relation Constraints in Django","body":"<p>I want the a counterpart of Tag (BlogPost) to have at least 1 instance of Tag or it shouldn't be created. (same effect like null=False). I tried a lot but couldn't figure out to apply these contrains. Any ideas?</p>\n\n<pre><code>class Tag(models.Model):\n    content_type = models.ForeignKey(ContentType)\n    object_id = models.PositiveIntegerField()\n    content_object = generic.GenericForeignKey('content_type', 'object_id')\n\n    text = models.CharField(\"text\", max_length=255)\n\n    class Meta:\n        unique_together = ('content_type', 'object_id', 'text',)\n\n\nclass BlogPost(models.Model):\n    title = models.CharField(\"title\", max_length=255)\n    tags = generic.GenericRelation(Tag, verbose_name=\"tags\")\n\n\nclass TagInline(generic.GenericTabularInline):\n    model = Tag\n    extra = 1\n\n\nclass BlogPostAdmin(admin.ModelAdmin):\n    inlines = (TagInline,)\n</code></pre>\n"},{"tags":["django","django-views","django-urls"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13046458,"title":"Django URL Dispatcher variable number of components","body":"<p>Essentially I have a single view that accepts different operations and a varying number of parameters. This was previously working in the following state:</p>\n\n<pre><code>url(r'^items/(?P&lt;op&gt;[a-zA-Z0-9]+)/(?P&lt;id&gt;[0-9]+)$', login_required(ItemOpView.as_view()), name='my.views.item_op'),\n</code></pre>\n\n<p>Which always provides <code>kwargs['op']</code> and <code>kwargs['id']</code> to the view. This allows for URLs such as:</p>\n\n<ul>\n<li>items/delete/1</li>\n<li>items/show/1</li>\n<li>items/hide/1</li>\n</ul>\n\n<p>However I'd like to adapt the rule to also accept the following:</p>\n\n<ul>\n<li>items/relocate/1/2 meaning I'd like to have <code>kwargs['id2']</code> as well.</li>\n</ul>\n\n<p>I've attempted to do this with the rule:</p>\n\n<pre><code>url(r'^items/(?P&lt;op&gt;[a-zA-Z0-9]+)/(?P&lt;id&gt;[0-9]+)(?/)(?P&lt;id2&gt;[0-9]+)$', login_required(ItemOpView.as_view()), name='my.views.item_op'),\n</code></pre>\n\n<p>However this doesn't work and just gives a 404.</p>\n\n<p>Thanks for any advice!</p>\n"},{"tags":["django","permissions","sorl-thumbnail"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":665,"score":1,"question_id":6312344,"title":"sorl thumbnail + django issues in production","body":"<p>I'm using sorl thumbnail with Django.  On my local setup it works fine, but in production the thumbnails are not made.</p>\n\n<p>My code looks like this:</p>\n\n<pre><code>{% load thumbnail %}\n{% thumbnail up.image \"32x32\" crop=\"center\" as im %}\n&lt;img src=\"{{ im.url }}\" width=\"{{ im.width }}\" height=\"{{ im.height }}\"&gt;\n{% empty %}\n&lt;img src=\"{{ MEDIA_URL }}/images/missing_small.png\" alt=\"\" title=\"\" /&gt;\n{% endthumbnail %}\n</code></pre>\n\n<p>I enabled logging and the trace looks like this:</p>\n\n<pre><code>Traceback (most recent call last):\n\n[...]\n\nFile \"/usr/local/lib/python2.6/dist-packages/PIL/ImageFile.py\", line\n215, in load\nraise_ioerror(e)\n\nFile \"/usr/local/lib/python2.6/dist-packages/PIL/ImageFile.py\", line\n52, in raise_ioerror\nraise IOError(message + \" when reading image file\")\n\nIOError: broken data stream when reading image file\n</code></pre>\n\n<p>The error isn't very helpful since the file is there and is readable by all.  I'm not sure how to get a more explicit error, or what to try and fix.</p>\n\n<p>And then more baffling is the fact that it works using <code>manage.py shell</code></p>\n\n<pre><code>In [1]: from sorl.thumbnail import get_thumbnail\n\nIn [2]: im = get_thumbnail('/myproject/static/images/user_profiles/1/11-20-2010-2_5.jpg',\n'32x32', crop='center' )\n\nIn [3]: im\nOut[3]: &lt;sorl.thumbnail.images.ImageFile object at 0x29fe090&gt;\n\nIn [4]: im.url\nOut[4]: 'http://example.com/cache/ff/31/ff318b4a995ff345d1d48e79b67ec62b.jpg'\n</code></pre>\n\n<p>It made the thumbnail, just won't make one via the template code.</p>\n\n<p>Anyone?</p>\n"},{"tags":["django","facebook","facebook-graph-api","twitter","socialauth"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":45,"score":-1,"question_id":13037644,"title":"how do i connect multiple social auth providers to the same django user using django-allauth?","body":"<p>can connect to facebook and twitter, but how do i connect a normal django user to both his facebook and twitter networks, so that the next time he has the option of logging in through any 1 of the 3 and i can utilise information from both the networks.</p>\n\n<p>can the signal :-</p>\n\n<p>allauth.socialaccount.signals.pre_social_login</p>\n\n<p>be used to check if a user is already logged in if yes connect the social account to the django account, but i cant figure out how to go about implementing this in the login view.</p>\n"},{"tags":["django","geolocation","django-queryset","geodjango","django-queries"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13035676,"title":"Filtering query using django geographical span relationship is not accepted","body":"<p>I'm trying to filter some item using a geographical span relationship with geodjango, but I don't get why it doesn't work.\nConsider this example:</p>\n\n<pre><code>class Location(models.Model):\n    name = models.CharField(max_length=32,)\n    marker = models.PointField(srid=4326) # the marker\n    objects = models.GeoManager()\n\nclass Item(models.Model):\n    name =  models.CharField(max_length=200)\n    location = models.ForeignKey(Location)\n\n\npoly = Polygon(\n[(0.02780914306640625, 52.158980248467095),\n (0.22350311279296875, 52.158980248467095),\n (0.22350311279296875, 52.253657959623055),\n (0.02780914306640625, 52.253657959623055),\n (0.02780914306640625, 52.158980248467095)]\n)\n</code></pre>\n\n<p>If I query for (\"A location\" is an existing location in the db)</p>\n\n<pre><code>Item.objects.filter(location__name__exact=\"A location\")\n</code></pre>\n\n<p>it works.</p>\n\n<p>If instead I query for</p>\n\n<pre><code>Item.objects.filter(location__marker__within=poly)\n</code></pre>\n\n<p>I get this error</p>\n\n<pre><code>---------------------------------------------------------------------------\nFieldError                                Traceback (most recent call last)\n/home/mattions/.virtualenvs/ssouk_env/local/lib/python2.7/site-packages/django/core/management/commands/shell.pyc in &lt;module&gt;()\n----&gt; 1 Item.objects.filter(location__marker__within=poly)\n\n/home/mattions/.virtualenvs/ssouk_env/local/lib/python2.7/site-packages/django/db/models/manager.pyc in filter(self, *args, **kwargs)\n    141 \n    142     def filter(self, *args, **kwargs):\n--&gt; 143         return self.get_query_set().filter(*args, **kwargs)\n    144 \n    145     def aggregate(self, *args, **kwargs):\n\n/home/mattions/.virtualenvs/ssouk_env/local/lib/python2.7/site-packages/django/db/models/query.pyc in filter(self, *args, **kwargs)\n    619         set.\n    620         \"\"\"\n--&gt; 621         return self._filter_or_exclude(False, *args, **kwargs)\n    622 \n    623     def exclude(self, *args, **kwargs):\n\n/home/mattions/.virtualenvs/ssouk_env/local/lib/python2.7/site-packages/django/db/models/query.pyc in _filter_or_exclude(self, negate, *args, **kwargs)\n    637             clone.query.add_q(~Q(*args, **kwargs))\n    638         else:\n--&gt; 639             clone.query.add_q(Q(*args, **kwargs))\n    640         return clone\n    641 \n\n/home/mattions/.virtualenvs/ssouk_env/local/lib/python2.7/site-packages/django/db/models/sql/query.pyc in add_q(self, q_object, used_aliases, force_having)\n   1248                 else:\n   1249                     self.add_filter(child, connector, q_object.negated,\n-&gt; 1250                             can_reuse=used_aliases, force_having=force_having)\n   1251                 if force_having:\n   1252                     self.having.end_subtree()\n\n/home/mattions/.virtualenvs/ssouk_env/local/lib/python2.7/site-packages/django/db/models/sql/query.pyc in add_filter(self, filter_expr, connector, negate, trim, can_reuse, process_extras, force_having)\n   1120                     parts, opts, alias, True, allow_many, allow_explicit_fk=True,\n   1121                     can_reuse=can_reuse, negate=negate,\n-&gt; 1122                     process_extras=process_extras)\n   1123         except MultiJoin, e:\n   1124             self.split_exclude(filter_expr, LOOKUP_SEP.join(parts[:e.level]),\n\n/home/mattions/.virtualenvs/ssouk_env/local/lib/python2.7/site-packages/django/db/models/sql/query.pyc in setup_joins(self, names, opts, alias, dupe_multis, allow_many, allow_explicit_fk, can_reuse, negate, process_extras)\n   1473         if pos != len(names) - 1:\n   1474             if pos == len(names) - 2:\n-&gt; 1475                 raise FieldError(\"Join on field %r not permitted. Did you misspell %r for the lookup type?\" % (name, names[pos + 1]))\n   1476             else:\n   1477                 raise FieldError(\"Join on field %r not permitted.\" % name)\n\nFieldError: Join on field 'marker' not permitted. Did you misspell 'within' for the lookup type?\n</code></pre>\n\n<p>Note that </p>\n\n<pre><code>Location.objects.filter(marker__within=poly)\n</code></pre>\n\n<p>works as expected</p>\n\n<p>Any ideas?</p>\n"},{"tags":["jquery","django","jquery-ajax","post"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13044931,"title":"Jquery ajax and Django - post-data arrives malformed","body":"<p>I am making a post via Jquery ajax that looks like this:</p>\n\n<pre><code>$.ajax({\n    type: 'POST',\n    url: \"/sandbox/read_demands/\",\n    data: {\n        \"partner_ref\": \"PH\",\n        \"return_field\": [\"summary\", \"details\"]\n    },\n    success: [read_demands_response],\n    dataType: 'json'\n});\n</code></pre>\n\n<p>I then recieve the data on the server-side with a simple Django view that only prints request.POST into a log. The data then looks like this:</p>\n\n<pre><code>{u'return_field[]': [u'summary', u'details'], u'partner_ref': [u'PH']}\n</code></pre>\n\n<p>As you can see, the key 'return_field' has become 'return_field[]' and the value for 'partner_ref' is now a list. What on earth is going on? Am I missing something complected obvious in the jquery post that causes my data to be malformed or is do you think this error comes from somewhere else? I am trying to rule-out different possibilities until I can find the cause of the problem.</p>\n\n<p>This is jquery 1.8.2 and Django 1.4 btw.</p>\n"},{"tags":["python","django","linux","less"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13045625,"title":"/opt/local/lib/node_modules/less/bin/lessc: not found - Django Error","body":"<p>Am running Django on Linux, using a django twitter bootstrap template. I have less css installed and can even access it from the command line. However, when I run the project, there is an error during template rendering at the this point:</p>\n\n<pre><code>{% compress css %}\n</code></pre>\n\n<p>with an error that the lessc module not found. </p>\n\n<p>Could the path be wrong? The settings. py seems to be right.</p>\n"},{"tags":["django","oracle","orm","django-models","django-database"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12931061,"title":"How to get oracle NUMBER with syncdb","body":"<p>I have some legacy oracle database against which I run inspectdb command.\nOne column in the DB has type NUMBER (without precision and scale) and\nwhat I got from django is:</p>\n\n<pre><code>entity_id = models.DecimalField(unique=True, null=True, max_digits=0, decimal_places=-127, blank=True)\n</code></pre>\n\n<p>If I now run syndb trying to generate schema from the model I will get\nthe error:</p>\n\n<pre><code>Error: One or more models did not validate:\nDecimalFields require a \"decimal_places\" attribute that is a non-negative integer.\nDecimalFields require a \"max_digits\" attribute that is a positive integer.\n</code></pre>\n\n<p>My question is: how should I modify entity_id type oin the model to\nget NUMBER generated in oracle?</p>\n"},{"tags":["python","django","django-settings"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13045533,"title":"How can interate over all the settings in Django?","body":"<p>How can I iterate over all the Django settings? I need to read all the settings which begin with <code>MYAPP_</code>.</p>\n\n<p>I've tried doing this:</p>\n\n<pre><code>from django.conf import settings\n\nfor setting in settings:\n    print setting\n</code></pre>\n\n<p>...but i get the following exception:</p>\n\n<pre><code>TypeError: 'LazySettings' object is not iterable\n</code></pre>\n\n<p>Any ideas on how I can accomplish this?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13045356,"title":"How to get the model name in view from self in django","body":"<p>IN my views.py , i want to get the Model name from <code>self</code></p>\n\n<p>I tried this <code>self.__class__.__name__</code> </p>\n\n<p>but it gave me the class name of view not the Model</p>\n\n<p>EDIT:</p>\n\n<pre><code>class ObjectCreate(CreateView):\n\n    def get_template_names(self):\n        m = self.__class__.__name__\n</code></pre>\n"},{"tags":["python","django","json","django-models","django-serializer"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13045566,"title":"Django add output of model method to serialized object","body":"<p>I have a model which has a method to calculate a percentage its containing values consist of when compared to other related child objects:</p>\n\n<pre><code>class childModel(models.Model):\n    count = models.IntegerField()\n    parent = models.ForeignKey(ParentModel)\n\n    def percentage(self):\n        return 100*float(self.count)/float(self.parent.total_count())\n</code></pre>\n\n<p>When I serialize this object to output in JSON, I'd like to include the value of that percentage method within the JSON output. </p>\n\n<p>I've tried various hacky methods using <code>model_to_dict</code> and then adding the value to the dict. This works fine for dumping data, but causes issues when re-loading it as it doesn't store the model key which the Django inbuilt <code>serializers_serialize</code> function does when dumping data.</p>\n\n<p>I'm also keen to use the <code>use_natural_keys</code> option of <code>serializers_serialize</code>, and naturally <code>model_to_dict</code> does not include this - I guess I could hackily add this in too, but it seems like I'm very much fighting the system. Any ideas?</p>\n"},{"tags":["django","django-modelform"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13045208,"title":"How add a * after required fields in django modelform?","body":"<p>i have a django modelform that some of it's fields are required. i'm using <code>{{ form.as_p }}</code> and i'm not accessing the fields individually.</p>\n\n<p>so how can i add a star (*) for that required fields in the form ?</p>\n"},{"tags":["django","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13044814,"title":"How to register multiple models with the admin?","body":"<p>If I want to register my models with the admin I have to do this like this:</p>\n\n<pre><code>#admin.py\nadmin.site.register(models.About)\n</code></pre>\n\n<p>But with multiple models you <strong>can't</strong> do something like this:</p>\n\n<pre><code>models = (models.Project, models.Client, models.About)\nfor m in models:\n   admin.site.register(m)\n</code></pre>\n\n<p>First of all: why not!? Secondly: imagine one has a lot of models which all should be accessible from the admin interface. How do you do that in a generic way? </p>\n"},{"tags":["python","mysql","django","mysql-python"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":13044201,"title":"Install mysql-python return error in CentOs","body":"<p>I want to run a django project on CentOs. I tried to install mysql-python by easy_install and pip but I got error with both of them. I Googled the problem and found some suggestions, but none of them helped me.</p>\n\n<p>errors are:</p>\n\n<pre><code>_mysql.c:29:20: error: Python.h: No such file or directory\n_mysql.c:40:26: error: structmember.h: No such file or directory\n_mysql.c:74: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:75: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:76: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:77: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:78: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:79: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:80: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:81: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:82: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:83: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:84: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:87: error: expected specifier-qualifier-list before ‘PyObject_HEAD’\n_mysql.c:97: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘_mysql_ConnectionObject_Type’\n_mysql.c:100: error: expected specifier-qualifier-list before ‘PyObject_HEAD’\n_mysql.c:108: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘_mysql_ResultObject_Type’\n_mysql.c:127: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:261: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:361: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:379: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:402: error: expected declaration specifiers or ‘...’ before ‘PyObject’\n_mysql.c:403: error: expected declaration specifiers or ‘...’ before ‘PyObject’\n_mysql.c: In function ‘_mysql_ResultObject_Initialize’:\n_mysql.c:405: error: ‘NULL’ undeclared (first use in this function)\n_mysql.c:405: error: (Each undeclared identifier is reported only once\n_mysql.c:405: error: for each function it appears in.)\n_mysql.c:407: warning: initialization from incompatible pointer type\n_mysql.c:409: error: ‘PyObject’ undeclared (first use in this function)\n_mysql.c:409: error: ‘conv’ undeclared (first use in this function)\n_mysql.c:409: error: invalid operands to binary * (have ‘char **’ and ‘char **’)\n_mysql.c:409: warning: statement with no effect\n_mysql.c:413: warning: implicit declaration of function ‘PyArg_ParseTupleAndKeywords’\n_mysql.c:413: error: ‘args’ undeclared (first use in this function)\n_mysql.c:413: error: ‘kwargs’ undeclared (first use in this function)\n_mysql.c:417: warning: implicit declaration of function ‘PyDict_New’\n_mysql.c:421: warning: implicit declaration of function ‘Py_INCREF’\n_mysql.c:423: error: ‘_mysql_ResultObject’ has no member named ‘conn’\n_mysql.c:423: error: expected expression before ‘)’ token\n_mysql.c:423: error: invalid operands to binary * (have ‘char **’ and ‘char **’)\n_mysql.c:423: warning: statement with no effect\n_mysql.c:425: error: ‘_mysql_ResultObject’ has no member named ‘use’\n_mysql.c:425: warning: statement with no effect\n_mysql.c:426: error: ‘Py_BEGIN_ALLOW_THREADS’ undeclared (first use in this function)\n_mysql.c:426: warning: statement with no effect\n_mysql.c:428: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’\n_mysql.c:428: warning: passing argument 1 of ‘mysql_use_result’ from incompatible pointer type\n/usr/include/mysql/mysql.h:401: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’\n_mysql.c:430: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’\n_mysql.c:430: warning: passing argument 1 of ‘mysql_store_result’ from incompatible pointer type\n/usr/include/mysql/mysql.h:400: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’\n_mysql.c:431: error: ‘_mysql_ResultObject’ has no member named ‘result’\n_mysql.c:431: warning: statement with no effect\n_mysql.c:432: error: ‘Py_END_ALLOW_THREADS’ undeclared (first use in this function)\n_mysql.c:432: warning: statement with no effect\n_mysql.c:434: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’\n_mysql.c:434: warning: passing argument 1 of ‘mysql_field_count’ from incompatible pointer type\n/usr/include/mysql/mysql.h:368: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’\n_mysql.c:435: warning: implicit declaration of function ‘_mysql_Exception’\n_mysql.c:438: error: ‘_mysql_ResultObject’ has no member named ‘converter’\n_mysql.c:438: warning: implicit declaration of function ‘PyTuple_New’\n_mysql.c:438: warning: statement with no effect\n_mysql.c:439: warning: implicit declaration of function ‘Py_DECREF’\n_mysql.c:443: error: ‘_mysql_ResultObject’ has no member named ‘nfields’\n_mysql.c:443: warning: statement with no effect\n_mysql.c:444: error: ‘_mysql_ResultObject’ has no member named ‘converter’\n_mysql.c:450: error: ‘tmp’ undeclared (first use in this function)\n_mysql.c:450: error: invalid operands to binary * (have ‘char **’ and ‘char **’)\n_mysql.c:450: error: ‘fun’ undeclared (first use in this function)\n_mysql.c:450: warning: left-hand operand of comma expression has no effect\n_mysql.c:450: warning: statement with no effect\n_mysql.c:451: warning: implicit declaration of function ‘PyInt_FromLong’\n_mysql.c:451: warning: statement with no effect\n_mysql.c:456: warning: implicit declaration of function ‘PyObject_GetItem’\n_mysql.c:456: warning: statement with no effect\n_mysql.c:459: warning: implicit declaration of function ‘PyErr_Occurred’\n_mysql.c:460: warning: implicit declaration of function ‘PyErr_ExceptionMatches’\n_mysql.c:460: error: ‘PyExc_KeyError’ undeclared (first use in this function)\n_mysql.c:464: warning: implicit declaration of function ‘PyErr_Clear’\n_mysql.c:466: error: ‘Py_None’ undeclared (first use in this function)\n_mysql.c:466: warning: statement with no effect\n_mysql.c:469: warning: implicit declaration of function ‘PySequence_Check’\n_mysql.c:470: warning: implicit declaration of function ‘PySequence_Size’\n_mysql.c:471: error: ‘fun2’ undeclared (first use in this function)\n_mysql.c:471: error: invalid operands to binary * (have ‘char **’ and ‘char **’)\n_mysql.c:471: warning: statement with no effect\n_mysql.c:473: error: ‘t’ undeclared (first use in this function)\n_mysql.c:473: error: invalid operands to binary * (have ‘char **’ and ‘char **’)\n_mysql.c:473: warning: implicit declaration of function ‘PySequence_GetItem’\n_mysql.c:473: warning: statement with no effect\n_mysql.c:479: warning: implicit declaration of function ‘PyTuple_Check’\n_mysql.c:479: warning: implicit declaration of function ‘PyTuple_GET_SIZE’\n_mysql.c:481: error: ‘pmask’ undeclared (first use in this function)\n_mysql.c:481: error: invalid operands to binary * (have ‘char **’ and ‘char **’)\n_mysql.c:481: warning: statement with no effect\n_mysql.c:482: warning: implicit declaration of function ‘PyTuple_GET_ITEM’\n_mysql.c:482: warning: statement with no effect\n_mysql.c:483: warning: statement with no effect\n_mysql.c:484: warning: implicit declaration of function ‘PyInt_Check’\n_mysql.c:485: warning: implicit declaration of function ‘PyInt_AS_LONG’\n_mysql.c:495: warning: statement with no effect\n_mysql.c:504: warning: statement with no effect\n_mysql.c:507: warning: statement with no effect\n_mysql.c:509: warning: implicit declaration of function ‘PyTuple_SET_ITEM’\n_mysql.c:509: error: ‘_mysql_ResultObject’ has no member named ‘converter’\n_mysql.c: In function ‘_mysql_ResultObject_clear’:\n_mysql.c:535: warning: implicit declaration of function ‘Py_XDECREF’\n_mysql.c:535: error: ‘_mysql_ResultObject’ has no member named ‘converter’\n_mysql.c:536: error: ‘_mysql_ResultObject’ has no member named ‘converter’\n_mysql.c:536: error: ‘NULL’ undeclared (first use in this function)\n_mysql.c:536: warning: statement with no effect\n_mysql.c:537: error: ‘_mysql_ResultObject’ has no member named ‘conn’\n_mysql.c:538: error: ‘_mysql_ResultObject’ has no member named ‘conn’\n_mysql.c:538: warning: statement with no effect\n_mysql.c: At top level:\n_mysql.c:545: error: expected declaration specifiers or ‘...’ before ‘PyObject’\n_mysql.c:546: error: expected declaration specifiers or ‘...’ before ‘PyObject’\n_mysql.c: In function ‘_mysql_ConnectionObject_Initialize’:\n_mysql.c:548: error: ‘NULL’ undeclared (first use in this function)\n_mysql.c:548: warning: initialization from incompatible pointer type\n_mysql.c:549: error: ‘PyObject’ undeclared (first use in this function)\n_mysql.c:549: error: ‘conv’ undeclared (first use in this function)\n_mysql.c:549: error: invalid operands to binary * (have ‘char **’ and ‘char **’)\n_mysql.c:549: warning: statement with no effect\n_mysql.c:550: error: ‘ssl’ undeclared (first use in this function)\n_mysql.c:550: error: invalid operands to binary * (have ‘char **’ and ‘char **’)\n_mysql.c:550: warning: statement with no effect\n_mysql.c:552: warning: initialization from incompatible pointer type\n_mysql.c:552: warning: initialization from incompatible pointer type\n_mysql.c:552: warning: initialization from incompatible pointer type\n_mysql.c:553: warning: initialization from incompatible pointer type\n_mysql.c:553: warning: initialization from incompatible pointer type\n_mysql.c:555: warning: initialization from incompatible pointer type\n_mysql.c:555: warning: initialization from incompatible pointer type\n_mysql.c:555: warning: initialization from incompatible pointer type\n_mysql.c:556: warning: initialization from incompatible pointer type\n_mysql.c:556: warning: initialization from incompatible pointer type\n_mysql.c:569: error: initializer element is not constant\n_mysql.c:569: error: (near initialization for ‘kwlist[17]’)\n_mysql.c:575: warning: initialization from incompatible pointer type\n_mysql.c:576: warning: initialization from incompatible pointer type\n_mysql.c:577: warning: initialization from incompatible pointer type\n_mysql.c:579: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’\n_mysql.c:579: warning: statement with no effect\n_mysql.c:580: error: ‘_mysql_ConnectionObject’ has no member named ‘open’\n_mysql.c:580: warning: statement with no effect\n_mysql.c:583: error: ‘args’ undeclared (first use in this function)\n_mysql.c:583: error: ‘kwargs’ undeclared (first use in this function)\n_mysql.c:616: error: ‘value’ undeclared (first use in this function)\n_mysql.c:616: error: invalid operands to binary * (have ‘char **’ and ‘char **’)\n_mysql.c:616: warning: statement with no effect\n_mysql.c:617: warning: implicit declaration of function ‘PyMapping_GetItemString’\n_mysql.c:617: warning: statement with no effect\n_mysql.c:617: warning: implicit declaration of function ‘PyString_AsString’\n_mysql.c:617: warning: assignment makes pointer from integer without a cast\n_mysql.c:618: warning: statement with no effect\n_mysql.c:618: warning: assignment makes pointer from integer without a cast\n_mysql.c:619: warning: statement with no effect\n_mysql.c:619: warning: assignment makes pointer from integer without a cast\n_mysql.c:620: warning: statement with no effect\n_mysql.c:620: warning: assignment makes pointer from integer without a cast\n_mysql.c:621: warning: statement with no effect\n_mysql.c:621: warning: assignment makes pointer from integer without a cast\n_mysql.c:629: error: ‘Py_BEGIN_ALLOW_THREADS’ undeclared (first use in this function)\n_mysql.c:629: warning: statement with no effect\n_mysql.c:630: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’\n_mysql.c:630: warning: passing argument 1 of ‘mysql_init’ from incompatible pointer type\n/usr/include/mysql/mysql.h:380: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’\n_mysql.c:633: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’\n_mysql.c:634: warning: passing argument 1 of ‘mysql_options’ from incompatible pointer type\n/usr/include/mysql/mysql.h:445: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’\n_mysql.c:639: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’\n_mysql.c:640: warning: passing argument 1 of ‘mysql_options’ from incompatible pointer type\n/usr/include/mysql/mysql.h:445: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’\n_mysql.c:644: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’\n_mysql.c:644: warning: passing argument 1 of ‘mysql_options’ from incompatible pointer type\n/usr/include/mysql/mysql.h:445: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’\n_mysql.c:648: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’\n_mysql.c:648: warning: passing argument 1 of ‘mysql_options’ from incompatible pointer type\n/usr/include/mysql/mysql.h:445: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’\n_mysql.c:649: warning: comparison of distinct pointer types lacks a cast\n_mysql.c:650: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’\n_mysql.c:650: warning: passing argument 1 of ‘mysql_options’ from incompatible pointer type\n/usr/include/mysql/mysql.h:445: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’\n_mysql.c:651: warning: comparison of distinct pointer types lacks a cast\n_mysql.c:652: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’\n_mysql.c:652: warning: passing argument 1 of ‘mysql_options’ from incompatible pointer type\n/usr/include/mysql/mysql.h:445: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’\n_mysql.c:653: warning: comparison of distinct pointer types lacks a cast\n_mysql.c:654: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’\n_mysql.c:654: warning: passing argument 1 of ‘mysql_options’ from incompatible pointer type\n/usr/include/mysql/mysql.h:445: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’\n_mysql.c:657: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’\n_mysql.c:657: warning: passing argument 1 of ‘mysql_options’ from incompatible pointer type\n/usr/include/mysql/mysql.h:445: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’\n_mysql.c:661: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’\n_mysql.c:662: warning: passing argument 1 of ‘mysql_ssl_set’ from incompatible pointer type\n/usr/include/mysql/mysql.h:381: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’\n_mysql.c:665: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’\n_mysql.c:666: warning: passing argument 1 of ‘mysql_real_connect’ from incompatible pointer type\n/usr/include/mysql/mysql.h:387: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’\n_mysql.c:668: error: ‘Py_END_ALLOW_THREADS’ undeclared (first use in this function)\n_mysql.c:668: warning: statement with no effect\n_mysql.c:677: warning: statement with no effect\n_mysql.c:683: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’\n_mysql.c:683: warning: statement with no effect\n_mysql.c:691: error: ‘_mysql_ConnectionObject’ has no member named ‘open’\n_mysql.c:691: warning: statement with no effect\n_mysql.c: At top level:\n_mysql.c:749: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c: In function ‘_mysql_ConnectionObject_clear’:\n_mysql.c:781: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’\n_mysql.c:782: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’\n_mysql.c:782: error: ‘NULL’ undeclared (first use in this function)\n_mysql.c:782: warning: statement with no effect\n_mysql.c: At top level:\n_mysql.c:789: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:817: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:833: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:851: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:870: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:896: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:918: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:950: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:976: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1003: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1022: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1039: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1055: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1077: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1124: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1167: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1169: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1203: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1233: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1267: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1299: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1335: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1359: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1389: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1414: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1453: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1492: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1497: error: expected declaration specifiers or ‘...’ before ‘PyObject’\n_mysql.c:1500: error: expected declaration specifiers or ‘...’ before ‘_PYFUNC’\n_mysql.c: In function ‘_mysql__fetch_row’:\n_mysql.c:1506: error: ‘PyObject’ undeclared (first use in this function)\n_mysql.c:1506: error: ‘v’ undeclared (first use in this function)\n_mysql.c:1506: error: invalid operands to binary * (have ‘char **’ and ‘char **’)\n_mysql.c:1506: warning: statement with no effect\n_mysql.c:1507: error: ‘_mysql_ResultObject’ has no member named ‘use’\n_mysql.c:1508: error: ‘_mysql_ResultObject’ has no member named ‘result’\n_mysql.c:1508: warning: passing argument 1 of ‘mysql_fetch_row’ from incompatible pointer type\n/usr/include/mysql/mysql.h:454: note: expected ‘struct MYSQL_RES *’ but argument is of type ‘char **’\n_mysql.c:1510: error: ‘Py_BEGIN_ALLOW_THREADS’ undeclared (first use in this function)\n_mysql.c:1510: warning: statement with no effect\n_mysql.c:1511: error: ‘_mysql_ResultObject’ has no member named ‘result’\n_mysql.c:1511: warning: passing argument 1 of ‘mysql_fetch_row’ from incompatible pointer type\n/usr/include/mysql/mysql.h:454: note: expected ‘struct MYSQL_RES *’ but argument is of type ‘char **’\n_mysql.c:1512: error: ‘Py_END_ALLOW_THREADS’ undeclared (first use in this function)\n_mysql.c:1512: warning: statement with no effect\n_mysql.c:1514: error: ‘_mysql_ResultObject’ has no member named ‘conn’\n_mysql.c:1514: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’\n_mysql.c:1514: warning: passing argument 1 of ‘mysql_errno’ from incompatible pointer type\n/usr/include/mysql/mysql.h:371: note: expected ‘struct MYSQL *’ but argument is of type ‘char * (*)[1]’\n_mysql.c:1515: error: ‘_mysql_ResultObject’ has no member named ‘conn’\n_mysql.c:1519: warning: implicit declaration of function ‘_PyTuple_Resize’\n_mysql.c:1519: error: ‘r’ undeclared (first use in this function)\n_mysql.c:1522: warning: implicit declaration of function ‘convert_row’\n_mysql.c:1522: warning: statement with no effect\n_mysql.c: At top level:\n_mysql.c:1540: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1619: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1647: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1673: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1713: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1755: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1774: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1793: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1808: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1828: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1867: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1885: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1908: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1925: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1941: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1970: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:1993: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:2023: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:2045: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:2072: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:2098: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:2139: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:2159: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c: In function ‘_mysql_ConnectionObject_dealloc’:\n_mysql.c:2193: error: ‘PyObject’ undeclared (first use in this function)\n_mysql.c:2193: error: ‘o’ undeclared (first use in this function)\n_mysql.c:2193: error: invalid operands to binary * (have ‘char **’ and ‘char **’)\n_mysql.c:2193: warning: statement with no effect\n_mysql.c:2196: error: ‘_mysql_ConnectionObject’ has no member named ‘open’\n_mysql.c:2197: warning: implicit declaration of function ‘_mysql_ConnectionObject_close’\n_mysql.c:2197: error: ‘NULL’ undeclared (first use in this function)\n_mysql.c:2197: warning: statement with no effect\n_mysql.c:2200: warning: implicit declaration of function ‘PyMem_Free’\n_mysql.c: At top level:\n_mysql.c:2203: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:2224: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:2239: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:2261: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c: In function ‘_mysql_ResultObject_dealloc’:\n_mysql.c:2283: error: ‘_mysql_ResultObject’ has no member named ‘result’\n_mysql.c:2283: warning: passing argument 1 of ‘mysql_free_result’ from incompatible pointer type\n/usr/include/mysql/mysql.h:447: note: expected ‘struct MYSQL_RES *’ but argument is of type ‘char **’\n_mysql.c: At top level:\n_mysql.c:2288: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:2302: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘_mysql_ConnectionObject_methods’\n_mysql.c:2517: error: array type has incomplete element type\n_mysql.c:2518: error: ‘T_INT’ undeclared here (not in a function)\n_mysql.c:2518: warning: implicit declaration of function ‘offsetof’\n_mysql.c:2518: error: expected expression before ‘_mysql_ConnectionObject’\n_mysql.c:2518: error: ‘READONLY’ undeclared here (not in a function)\n_mysql.c:2525: error: ‘T_OBJECT’ undeclared here (not in a function)\n_mysql.c:2525: error: expected expression before ‘_mysql_ConnectionObject’\n_mysql.c:2532: error: ‘T_UINT’ undeclared here (not in a function)\n_mysql.c:2532: error: expected expression before ‘_mysql_ConnectionObject’\n_mysql.c:2539: error: expected expression before ‘_mysql_ConnectionObject’\n_mysql.c:2546: error: expected expression before ‘_mysql_ConnectionObject’\n_mysql.c:2553: error: ‘NULL’ undeclared here (not in a function)\n_mysql.c:2556: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘_mysql_ResultObject_methods’\n_mysql.c:2608: error: array type has incomplete element type\n_mysql.c:2609: error: expected expression before ‘_mysql_ResultObject’\n_mysql.c:2619: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:2649: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:2681: error: expected declaration specifiers or ‘...’ before ‘PyObject’\n_mysql.c: In function ‘_mysql_ConnectionObject_setattr’:\n_mysql.c:2683: error: ‘v’ undeclared (first use in this function)\n_mysql.c:2684: warning: implicit declaration of function ‘PyErr_SetString’\n_mysql.c:2684: error: ‘PyExc_AttributeError’ undeclared (first use in this function)\n_mysql.c:2689: warning: implicit declaration of function ‘PyMember_Set’\n_mysql.c: At top level:\n_mysql.c:2706: error: expected declaration specifiers or ‘...’ before ‘PyObject’\n_mysql.c: In function ‘_mysql_ResultObject_setattr’:\n_mysql.c:2708: error: ‘v’ undeclared (first use in this function)\n_mysql.c:2709: error: ‘PyExc_AttributeError’ undeclared (first use in this function)\n_mysql.c: At top level:\n_mysql.c:2727: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘_mysql_ConnectionObject_Type’\n_mysql.c:2815: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘_mysql_ResultObject_Type’\n_mysql.c:2905: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘_mysql_methods’\n_mysql.c:2977: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘*’ token\n_mysql.c:3022: warning: return type defaults to ‘int’\n_mysql.c: In function ‘DL_EXPORT’:\n_mysql.c:3022: error: expected declaration specifiers before ‘init_mysql’\n_mysql.c:3130: error: expected ‘{’ at end of input\nerror: Setup script exited with error: command 'gcc' failed with exit status 1\n</code></pre>\n"},{"tags":["django","django-models","mongoengine"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13043821,"title":"mongoengine+django OperationFailure: unauthorized","body":"<p><strong>in the models.py</strong>  <code>connect('dnname',host='192.168.134.238',port=27107,username='user',password='pswd')</code></p>\n\n<p><strong>in the mongo shell</strong></p>\n\n<pre><code>&gt;&gt;&gt; db=Connection.objects.all()\n&gt;&gt;&gt; db\nTraceback (most recent call last):\n  File \"&lt;console&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/local/lib/python2.7/dist-packages/mongoengine/queryset.py\", line 1894, in __repr__\n    data.append(self.next())\n  File \"/usr/local/lib/python2.7/dist-packages/mongoengine/queryset.py\", line 1005, in next\n    return self._document._from_son(self._cursor.next())\n  File \"/usr/local/lib/python2.7/dist-packages/mongoengine/queryset.py\", line 605, in _cursor\n    self._cursor_obj = self._collection.find(self._query,\n  File \"/usr/local/lib/python2.7/dist-packages/mongoengine/queryset.py\", line 586, in _collection\n    self._ensure_indexes()\n  File \"/usr/local/lib/python2.7/dist-packages/mongoengine/queryset.py\", line 490, in _ensure_indexes\n    background=background, **index_opts)\n  File \"/usr/local/lib/python2.7/dist-packages/pymongo/collection.py\", line 813, in ensure_index\n    return self.create_index(key_or_list, cache_for, **kwargs)\n  File \"/usr/local/lib/python2.7/dist-packages/pymongo/collection.py\", line 729, in create_index\n    safe=True)\n  File \"/usr/local/lib/python2.7/dist-packages/pymongo/collection.py\", line 315, in insert\n    continue_on_error, self.__uuid_subtype), safe)\n  File \"/usr/local/lib/python2.7/dist-packages/pymongo/connection.py\", line 831, in _send_message\n    rv = self.__check_response_to_last_error(response)\n  File \"/usr/local/lib/python2.7/dist-packages/pymongo/connection.py\", line 782, in __check_response_to_last_error\n    raise OperationFailure(details[\"err\"])\nOperationFailure: unauthorized\n</code></pre>\n"},{"tags":["django","django-nose"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13043488,"title":"django-nose taking 15 seconds even when there are zero test.","body":"<p>I'm using django-nose with REUSE_DB=1 and have disabled all my tests just to see the setup time it takes. </p>\n\n<p>`<br>\nlocalhost:MyProject rohitjangid$ python manage.py test<br>\nnosetests --verbosity 1</p>\n\n<hr>\n\n<p>Ran 0 tests in 0.000s</p>\n\n<p>OK\nlocalhost:MyProject rohitjangid$ \n`</p>\n\n<p>actual time taken for the overall process was on an average 15 seconds </p>\n\n<p>my obvious guess was mysql database and so I looked into logs and found that nose was running \nsome ALTER TABLE queries</p>\n\n<p>my logs : </p>\n\n<p><a href=\"http://i.stack.imgur.com/HJECP.png\" rel=\"nofollow\">http://i.stack.imgur.com/HJECP.png</a><br>\n  <a href=\"http://i.stack.imgur.com/tlsR0.png\" rel=\"nofollow\">http://i.stack.imgur.com/tlsR0.png</a></p>\n\n<p>looking into logs, it seems like it is taking too much time even when it is not creating database everytime. \nor Is this perfectly normal?</p>\n\n<p>my setup : OSX lion with mysql 5.5 , django 1.3.1</p>\n"},{"tags":["django","apache","wsgi"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13042029,"title":"apache config with static site and django wsgi app","body":"<p>I need to host a static web site along with a Django application server on the same Apache virtual host.  The static site needs to be accessible from the root url (/), while the application server should be invoked only when the url begins with /service.  I need to use mod_wsgi to integrate the Django service with Apache.  Ideally, I could configure the two sites with something like this:</p>\n\n<pre><code>WSGIScriptAlias /service service.wsgi\nAlias / \"/var/www/\"\n</code></pre>\n\n<p>However, Apache prioritizes Alias before WSGIScriptAlias, and hence all requests end up at the static web site.  How can I get the behavior that I want.  I've tried using mod_redirect, but haven't been successful.</p>\n"},{"tags":["django","checkbox","django-forms","many-to-many","modelform"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":2501,"score":2,"question_id":2197037,"title":"Django model form using forms.ModelMultipleChoiceField","body":"<p>I have a ModelForm in my Django app that uses a forms.ModelMultipleChoiceField, which displays as a forms.CheckboxSelectMultiple widget on the form. This ModelForm is used to select/de-select values for a many-to-many relation.  Here's the problem: when you uncheck all of the checkboxes and save the form, it doesn't save.  If you uncheck all but 1, it does save properly.</p>\n\n<p>Are there any tricks I'm missing here about model forms and many-to-many relations?  Am I encountering a bug? I'm new to Django.  Thanks in advance.</p>\n\n<p>Custom Field:</p>\n\n<pre><code>class NetworkMessageChoiceField(forms.ModelMultipleChoiceField):\n    def label_from_instance(self, obj):\n        return obj.display_message    \n</code></pre>\n\n<p>Model Form:</p>\n\n<pre><code>class MessageTemplateForm(forms.ModelForm):\n    network_messages = NetworkMessageChoiceField(queryset=NetworkMessageTemplate.objects, \n                                             widget=forms.CheckboxSelectMultiple())        \n    class Meta:\n        model = UserProfile\n        fields = ('network_messages',)\n</code></pre>\n\n<p>View that saves form:</p>\n\n<pre><code>def save_message_templates(request, extra_context=dict()):\n    try:\n        profile_obj = request.user.get_profile()\n    except ObjectDoesNotExist:\n        profile_obj = UserProfile(user=request.user)\n\n    if request.method == 'POST':\n        form = MessageTemplateForm(request.POST, instance=profile_obj)\n        if form.is_valid():\n            form.save()\n            return redirect('/')\n\n    return index(request, message_template_form=form)\n</code></pre>\n\n<p><b>Edit:</b></p>\n\n<p>My form field was missing Required=False.</p>\n\n<pre><code>class MessageTemplateForm(forms.ModelForm):\n    network_messages = NetworkMessageChoiceField(queryset=NetworkMessageTemplate.objects, \n                                                 widget=forms.CheckboxSelectMultiple(),\n                                                 required=False)        \n    class Meta:\n        model = UserProfile\n        fields = ('network_messages',)\n</code></pre>\n"},{"tags":["django","django-templates","django-views"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13041861,"title":"How to organize and load CSS within Django project/app?","body":"<p>I'm new to Django. I read the Documentation and I am literally confused with media root files and static root files and where I should be placing my css files along with my javascript files. </p>\n\n<p>Can you guys point me in the correct direction?\nProject setup:</p>\n\n<pre><code>Project\n     -myapp\n         -model,view,and test\n     -template\n         - base.html\n         - index.html\n         - view1\n         - view2\n         - media\n             - css\n                 - style.css\n                 - ie.css\n             - js\n             - img\n\n     -setting.py\n     -url.py\n</code></pre>\n\n<p>What should my static_url, static_root, media_url , media_root, STATICFILES_DIRS and STATICFILES_FINDERS look like?</p>\n\n<p>How I currently load my css file is through the base.html with the following:</p>\n\n<pre><code>{% load staticfiles %}\n&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"{% static user_stylesheet %}\"type=\"text/css\" media=\"screen\"/&gt;\n</code></pre>\n\n<p>So what is the best and most efficient/correct way of managing my static files?\nThank you everybody for your help. I appreciate your time and effort.</p>\n"},{"tags":["python","django","model"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13041581,"title":"What is the proper way to structure models.py?","body":"<p>I'm trying to build the right models for my Django app. I'm trying to build something that will allow  a user to save a URL into one (or more) playlist(s) that is tied to that user.  Before I implement this, I want to make sure that this is the best way to structure my models.py.</p>\n\n<pre><code>class UserProfile(models.Model):\n    user = models.ForeignKey(User, primary_key=True)    #what is the difference between ForeignKey and OneToOne?  Which one should I use?\n    Playlist = models.CharField('Playlist', max_length = 2000)  #1 user should be able to have multiple playlists and the default playlist should be \"Favorites\"\n    def __unicode__(self):\n        return self.User\n\nclass Videos(models.Model):\n    Video_url = models.URLField('Link to video', max_length = 200, null=True, blank=True)\n    Playlist = models.ManyToManyField(Playlist) #this should connect to the playlists a user has.  A user should be able to save any video to any plalist, so perhaps this should be ManyToMany?\n    def __unicode__(self):\n        return self.Video_url\n</code></pre>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13042257,"title":"How can I access an object added in a dictionary in a Django view","body":"<p>I have added the dictionary to the object with this:</p>\n\n<pre><code>dict['var1'] = {'value': 'tetsing'}\n</code></pre>\n\n<p><code>object.dict = dict</code></p>\n\n<p>Now I am confused how to access the dictionary in view. Do I use:</p>\n\n<p><code>object.dict['var1']['value']</code>  or <code>object.dict.var1.value</code></p>\n"},{"tags":["python","django","introspection"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":433,"score":1,"question_id":3288107,"title":"How can I get fields in an original order?","body":"<p>I have a code like:</p>\n\n<pre><code>class Ordered(object):\n    x = 0\n    z = 0\n    b = 0\n    a = 0\n\nprint(dir(Ordered))\n</code></pre>\n\n<p>it prints:</p>\n\n<pre><code>[ ......., a, b, x, z]\n</code></pre>\n\n<p>How can I get fields in an original order: x, z, b, a?\nI've seen similar behavior in Django Models.</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13041658,"title":"How can I store collection of objects in Django","body":"<p>I have this code</p>\n\n<pre><code># data = {blah blah};\n\nfor object in my_queryset():\n    object.data = data\n</code></pre>\n\n<p>But I want to return the original query set with new data. how can I do that.</p>\n"},{"tags":["django","django-queryset","ordering"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":60,"score":3,"question_id":13040052,"title":"How do I sort a Django QuerySet by an external value?","body":"<p>I have a dict made up of (id, rank) pairs. I'd like to perform a Django query on the ids such that the resultant queryset is ordered by rank (descending).</p>\n\n<p>Getting the queryset is easy:</p>\n\n<pre><code>rankings = {...}\nresult = MyModel.objects.filter(id__in=rankings.keys())\n</code></pre>\n\n<p>It seems like the answer should involve some sort of annotation that I can use as part of the order_by but I can't figure out how to get there.</p>\n\n<p>EDIT: I neglected to mention that I need the result to be a QuerySet as this is part of a tastypie API pipeline.</p>\n"},{"tags":["python","django","heroku"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13040549,"title":"Heroku /app/bin directory is missing","body":"<p>Committed a small code change to my django app and deployed to heroku. The app now throws H10 (app crashed) errors on every response. When I checked the logs, I saw..</p>\n\n<pre><code>[web.1]: Traceback (most recent call last):\n[web.1]:   File \"nightlife2/manage.py\", line 2, in &lt;module&gt;\n[web.1]:     from django.core.management import execute_manager\n[web.1]: ImportError: No module named django.core.management\n[web.1]: bash: bin/gunicorn_django: No such file or directory\n</code></pre>\n\n<p>..which I know means that django isn't on the pythonpath. I looked at the PATH on the heroku config which says <code>bin:/usr/local/bin:/usr/bin:/bin</code>. But while doing a <code>heroku run bash</code>, I noticed that the entire <code>bin</code> directory is now gone. Other apps of mine deployed on heroku can still be pushed to and still have the <code>bin</code> directory on there (I believe newer apps no longer have the bin directory and it's now in .heroku/venv/bin. Not 100% sure on the details there)</p>\n\n<p>Has anyone ever encountered this? I can change the PATH to <code>.heroku/venv/bin</code> but then I get an error about sql and I don't know if this is closer or farther away from the root problem. ANYTHING would be greatly appreciated as this is the production server and is currently hosed.</p>\n\n<p>EDIT: The error when changing the path is: <code>django.core.exceptions.ImproperlyConfigured: Error loading either pysqlite2 or sqlite3 modules (tried in that order): No module named _sqlite3\n</code>. The database is postgress so I'm not sure where this is coming from</p>\n"},{"tags":["python","database","django","orm","sqlalchemy"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":12217763,"title":"Does Django ORM have an equivalent to SQLAlchemy's Hybrid Attribute?","body":"<p>In <a href=\"http://docs.sqlalchemy.org/en/rel_0_7/index.html\" rel=\"nofollow\">SQLAlchemy</a>, a <a href=\"http://docs.sqlalchemy.org/en/rel_0_7/orm/extensions/hybrid.html\" rel=\"nofollow\">hybrid attribute</a> is either a <a href=\"http://stackoverflow.com/questions/6618002/python-property-versus-getters-and-setters\">property</a> or method applied to an ORM-mapped class,</p>\n\n<pre><code>class Interval(Base):\n    __tablename__ = 'interval'\n\n    id = Column(Integer, primary_key=True)\n    start = Column(Integer, nullable=False)\n    end = Column(Integer, nullable=False)\n\n    def __init__(self, start, end):\n        self.start = start\n        self.end = end\n\n    @hybrid_property\n    def length(self):\n        return self.end - self.start\n\n    @hybrid_method\n    def contains(self,point):\n        return (self.start &lt;= point) &amp; (point &lt; self.end)\n\n    @hybrid_method\n    def intersects(self, other):\n        return self.contains(other.start) | self.contains(other.end)\n</code></pre>\n\n<p>This allows for distinct behaviors at the class and instance levels, thus making it simpler to evaluate SQL statements using the same code,</p>\n\n<pre><code>&gt;&gt;&gt; i1 = Interval(5, 10)\n&gt;&gt;&gt; i1.length\n5\n\n&gt;&gt;&gt; print Session().query(Interval).filter(Interval.length &gt; 10)\nSELECT interval.id AS interval_id, interval.start AS interval_start,\ninterval.\"end\" AS interval_end\nFROM interval\nWHERE interval.\"end\" - interval.start &gt; :param_1\n</code></pre>\n\n<p>Now in <a href=\"https://docs.djangoproject.com/en/1.4/topics/db/models/\" rel=\"nofollow\">Django</a>, if I have a property on a model,</p>\n\n<pre><code>class Person(models.Model):\n    first_name = models.CharField(max_length=50)\n    last_name = models.CharField(max_length=50)\n\n    def _get_full_name(self):\n        \"Returns the person's full name.\"\n        return '%s %s' % (self.first_name, self.last_name)\n    full_name = property(_get_full_name)\n</code></pre>\n\n<p>It is my <a href=\"http://stackoverflow.com/questions/4754283/django-query-based-on-dynamic-property\">understanding</a> that I can <em>not</em> do the following,</p>\n\n<pre><code>Person.objects.filter(full_name=\"John Cadengo\")\n</code></pre>\n\n<p>Is there an equivalent of SQLAlchemy's hybrid attribute in Django? If not, is there perhaps a common workaround?</p>\n"},{"tags":["python","mysql","django","gevent","gunicorn"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":71,"score":1,"question_id":12364736,"title":"which is the best option for making mysql play well with gevent in a django app","body":"<p>I have a django app running on gunicorn with mysql as the database. I have added gevent in order to deal with multiple file uploads, but I am not sure what is my best driver option for making gevent play well with a mysql database.</p>\n\n<p>(Please note the database already contains a large amount of data, so moving to postgres is an unattractive option)</p>\n"},{"tags":["django","jeditable"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":50,"score":-1,"question_id":12854907,"title":"django jeditable not working","body":"<p>PLease i need your help, i'm trying to use jeditable to edit a field on a table inside {% for in %}. </p>\n\n<p><strong>editable DIV:</strong></p>\n\n<pre><code>&lt;td&gt;&lt;div class=\"edit\" id=\"{{ c.id }}\"&gt;{{ c.name|safe }}&lt;/div&gt;&lt;/td&gt;\n</code></pre>\n\n<p><strong>jeditable code:</strong></p>\n\n<pre><code>&lt;script&gt;\n    $(document).ready(function(){\n      $('.edit').editable('/categoryedit/{{ c.id }}/', {\n        style: 'display: inline'    \n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>Url:</strong></p>\n\n<pre><code>url(r'^categoryedit/(?P&lt;id&gt;\\d+)/$', 'pos.views.CategoryEdit'),\n</code></pre>\n\n<p><strong>View:</strong></p>\n\n<pre><code>def CategoryEdit(request, category_id):\n  id = request.POST.get('category_id', '')\n  value = request.POST.get('value', '')\n\n  categoria = Category.objects.get(pk=id)\n  categoria.name = value\n  categoria.save()\n\n  return HttpResponse(escape(value))\n</code></pre>\n"},{"tags":["django","search","django-haystack","haystack"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13038334,"title":"Search within a single model with Django Haystack","body":"<p>I'm using haystack for the full site search on my project which searches within books, authors, events, and videos models.</p>\n\n<p>Then I have the main book page where I want to search only against the Books model.</p>\n\n<p>I found this post:\n<a href=\"http://stackoverflow.com/questions/9466012/how-to-return-only-indexed-objects-of-a-specific-type-in-haystack\">How to return only indexed objects of a specific type in Haystack</a></p>\n\n<p>However it does not appear to be working for me.  I'm testing locally using the simple backend and I know that does have some issues and i'm not sure if this related.</p>\n\n<p>my search_indexes.py file looks like this:</p>\n\n<pre><code>class BookSearchIndex (SearchIndex):\n    text = CharField(document=True, use_template=True)\n    title_web = CharField(model_attr='title_web', boost=1.125)\n    on_sale_date = CharField(model_attr='on_sale_date')\n\n    def index_queryset(self):\n        return Book.objects.active().filter(publish_level='published')\n\nsite.register(Book, BookSearchIndex)\n</code></pre>\n\n<p>And in my view, if there was a search query passed, return only books with that query, otherwise show all books:</p>\n\n<pre><code>search = self.request.GET.get('search', None)\nif search:\n    clean_query = SearchQuerySet().query.clean(search)\n    sqs = SearchQuerySet().models(Book).filter(content=clean_query).order_by('-on_sale_date')\nelse:\n    sqs = SearchQuerySet().models(Book).order_by('-on_sale_date)\n</code></pre>\n\n<p>The search correctly filters item based on the search query, but it's still returning all models.  It's not limiting it to just the Book model.</p>\n\n<p>It seems like this part has no effect:</p>\n\n<pre><code>SearchQuerySet().models(Book)\n</code></pre>\n\n<p>Can anyone help me figure out what I'm doing wrong?</p>\n"},{"tags":["django","django-models","django-authentication"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13036708,"title":"How to get user object by profile field value","body":"<p>Here is how to get user with related profile: <a href=\"http://stackoverflow.com/questions/5253926/django-difference-between-user-objects-profile-all-and-user-objects-get-profil\">Django: Difference between User.objects.profile.all() and User.objects.get_profile()?</a></p>\n\n<p>But this example is using user id. I want to get user by <code>activation_key</code> which is in UserProfile object, I try something like:</p>\n\n<pre><code>UserProfile.objects.select_related('user').get(activation_key=key)\n</code></pre>\n\n<p>but I am getting:</p>\n\n<blockquote>\n  <p>UserProfile matching query does not exist.</p>\n</blockquote>\n"},{"tags":["python","django","zip","shutil"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12697431,"title":"Winzip cannot open an archive created by python shutil.make_archive on windows. On ubuntu archive manager does fine","body":"<p>I am trying to return a zip file in django http response, the code goes something like...</p>\n\n<pre><code>archive = shutil.make_archive('testfolder', 'zip', MEDIA_ROOT, 'testfolder')\nresponse = HttpResponse(FileWrapper(open(archive)),\n                           content_type=mimetypes.guess_type(archive)[0])\nresponse['Content-Length'] = getsize(archive)\nresponse['Content-Disposition'] = \"attachment; filename=test %s.zip\" % datetime.now()\nreturn response\n</code></pre>\n\n<p>Now when this code is executed on ubuntu the resulting downloaded file opens without any issue, but when its executed on windows the file created does not open in winzip (gives error 'Unsupported Zip Format').</p>\n\n<p>Is there something very obvious I am missing here? Isn't python code supposed to be portable?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Thanks to <a href=\"http://stackoverflow.com/a/13040316/805156\">J.F. Sebastian</a> for his comment...</p>\n\n<p>There was no problem in creating the archive, it was reading it back into the request. So, the solution is to change second line of my code from,</p>\n\n<pre><code>response = HttpResponse(FileWrapper(open(archive)),\n                           content_type=mimetypes.guess_type(archive)[0])\n</code></pre>\n\n<p>to, </p>\n\n<pre><code>response = HttpResponse(FileWrapper(open(archive, 'rb')),  # notice extra 'rb'\n                           content_type=mimetypes.guess_type(archive)[0])\n</code></pre>\n\n<p>checkout, <a href=\"http://stackoverflow.com/a/13040316/805156\">my answer to this question</a> for more details...</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":11914488,"title":"Adding Pushover integration in Django","body":"<p>I've recently started using Pushover.net, I've done some searching and can't find any examples of it being integrated with a django project.</p>\n\n<p>Since i can't find any examples I've decided it would be fun to try myself. What I'm interested in is how you would suggest I do it. I want the actual pushover part as decoupled a possible, hence doing it asas an app.</p>\n\n<p>What I'm not entirely sure on how to approach is the user authorization. The idea being a user enters their pushover user key and its saved in a user profile model using django's <code>AUTH_PROFILE_MODULE</code> with some functions such as <code>has_pushover</code>  but obviously I'd like some security so the user keys aren't stored in plaintext. What do people suggest for this?</p>\n\n<p>Is there some inbuilt django security I can use? </p>\n"},{"tags":["django","django-queryset"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":124,"score":0,"question_id":1098673,"title":"how can I order the results of a query filter?","body":"<p>I have this line of code in my views that allows me to display a group of items by date (I've also reversed the order so the most recent displays first):</p>\n\n<pre><code>currentlinks = Current.objects.order_by('date_added').reverse()[:5]\n</code></pre>\n\n<p>works fine, but however, when I concatenate the <code>order_by</code> code with a filter...</p>\n\n<pre><code>currentsources = Current.objects.filter(source__exact='bbc').order_by('date_added')\n</code></pre>\n\n<p>why doesn't this doesn't work? poor syntax perhaps, or am I just not understanding how this is supposed to work?</p>\n"},{"tags":["django","django-models","django-orm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13035348,"title":"How to insert model which inheritance from another model in Django","body":"<p>I have following models:</p>\n\n<pre><code>class Category(models.Model):\n    title = models.CharField(max_length=200)\n\nclass Page(models.Model):\n    title = models.CharField(max_length=255)\n    category = models.ForeignKey(Category)\n\nclass PageExt(Page):\n    is_t = models.BooleanField()\n</code></pre>\n\n<p>Some 'Page' already exists in database. I need to create 'PageExt' for some 'Category' from exists 'Page'. How it right to do with using ORM and optimization like bulk_create?</p>\n"},{"tags":["python","django","email","smtp","email-validation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":13038503,"title":"Verify Email Exists in Django","body":"<p>I'm looking for a way to verify if a particular email address really exists, i.e. not just to make sure that name@domain.com is in the right format, but that bobsmith@gmail.com really exists and isn't made up.</p>\n\n<p>Essentially, I'm looking for some way to implement the same functionality as a website like this: <a href=\"http://verify-email.org/\" rel=\"nofollow\">http://verify-email.org/</a></p>\n\n<p>I'm assuming this would require sending some sort of null email to the mailbox and checking the received response, but I'm not sure how to go about sending a query email without sending a real email.</p>\n\n<p>I haven't been able to find anything that does this - all search results are generally inundated with posts on how to validate that an email is entered in the right format with regex.</p>\n\n<p>Any help appreciated. Thanks!</p>\n"},{"tags":["django","linux","apache","amazon-ec2","mod-wsgi"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13035600,"title":"Permission issue for apache","body":"<p>Environment Details:</p>\n\n<pre><code>Amazon Ec2 Ubuntu 12.04\nDjango + mod_wsgi + python 2.6\nweb server: apache2\n</code></pre>\n\n<p>I have mounted a <code>10GB</code> <code>ebs volume</code> to an instance to <code>/mnt/ebs1/</code>. After mounting the volume and formatting, I have placed all my project files in <code>/mnt/ebs1/project</code>. the <code>wsgi</code> file is in <code>/mnt/ebs1/project/apache/django.wsgi</code>. The content of wsgi file is:</p>\n\n<pre><code>import os, sys\n\nsys.path.insert(0, '/mnt/ebs1/project')\nsys.path.insert(1, '/mnt/ebs1')\n\nos.environ['DJANGO_SETTINGS_MODULE'] = 'project.configs.common.settings'\n\nimport django.core.handlers.wsgi\napplication = django.core.handlers.wsgi.WSGIHandler()\n</code></pre>\n\n<p>My <code>httpd.conf</code> file looks as:</p>\n\n<pre><code>LoadModule wsgi_module /usr/lib/apache2/modules/mod_wsgi.so\nWSGIPythonHome /usr/bin/python2.6\n\nWSGIScriptAlias / /mnt/ebs1/project/apache/django.wsgi\n\n&lt;Directory /mnt/ebs1/project&gt;\nOrder allow,deny\nAllow from all\n&lt;/Directory&gt;\n\n&lt;Directory /mnt/ebs1/project/apache&gt;\nOrder allow,deny\nAllow from all\n&lt;/Directory&gt;\n\nAlias /static/ /mnt/ebs1/project/static/\n&lt;Directory /mnt/ebs1/project/static&gt;\nOrder deny,allow\nAllow from all\n&lt;/Directory&gt;\n</code></pre>\n\n<p>The above configurations gives me <code>Forbidden: You don't have permission to access / on this server</code>.</p>\n\n<p>I tried to find the user which is running apache using <code>ps aux</code> which is <code>www-data</code> and has group <code>www-data</code>. I have tried to change the ownership of <code>/mnt/ebs1</code> and its subdirectories using <code>chown -R www-data:www-data /mnt/ebs1</code> but that still does not solve the problem. Can any one tell me what I am doing wrong or have missed?</p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":69,"score":1,"question_id":13036315,"title":"Correct Way to Validate Django Model Objects?","body":"<p>I'm still trying to understand the correct way to validate a Django model object using a custom validator at the model level.  I know that validation is usually done within a form or model form.  However, I want to ensure the integrity of my data at the model level if I'm interacting with it via the ORM in the Python shell.  Here's my current approach:</p>\n\n<pre><code>from django.db import models\nfrom django.core exceptions import ValidationError\nfrom django.core import validators\n\ndef validate_gender(value):\n    \"\"\" Custom validator \"\"\"\n    if not value in ('m', 'f', 'M', 'F'):\n        raise Validation Error(u'%s is not a valid value for gender.' % value)\n\nclass Person(models.Model):\n    name = models.CharField(max_length=128)\n\n    age = models.IntegerField()\n\n    gender = models.CharField(maxlength=1, validators=[validate_gender])\n\n    def save(self, *args, **kwargs):\n        \"\"\" Override Person's save \"\"\"\n        self.full_clean(exclude=None)\n        super(Person, self).save(*args, **kwargs)\n</code></pre>\n\n<p>Here are my questions:</p>\n\n<ol>\n<li><p>Should I create a custom validation function, designate it as a validator, and then override the Person's save() function as I've done above?  (By the way, I know I could validate my gender choices using the 'choices' field option but I created 'validate_gender' for the purpose of illustration).</p></li>\n<li><p>If I <em>really</em> want to ensure the integrity of my data, should I not only write Django unit tests for testing at the model layer but also equivalent database-level unit tests using Python/Psycopg?  I've noticed that Django unit tests, which raise ValidationErrors, only test the model's understanding of the database schema using a copy of the database.  Even if I were to use South for migrations, any database-level constraints are limited to what Django can understand and translate into a Postgres constraint.  If I need a custom constraint that Django can't replicate, I could potentially enter data into my database that violates that constraint if I'm interacting with the database directly via the psql terminal.</p></li>\n</ol>\n\n<p>Thanks!</p>\n"},{"tags":["django","django-templates","django-views"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13038920,"title":"Django template context processors not read in production but read in localhost:8000","body":"<p>I have written the following template context processors in my settings file:</p>\n\n<pre><code>TEMPLATE_CONTEXT_PROCESSORS = (\n# default processors\n'django.core.context_processors.static',\n'django.core.context_processors.media',\n'django.contrib.auth.context_processors.auth',\n'django.core.context_processors.debug',\n'django.core.context_processors.i18n',\n'django.core.context_processors.tz',\n'django.contrib.messages.context_processors.messages',\n\n'webapp.processor.key', # processor not working\n'webapp.processor.analytics', # processor working\n)\n\n\ndef key(request):\n    raise Exception\n\ndef analytics(request):\n    return { 'analytics_code': \"working\" }\n</code></pre>\n\n<p>In localhost:8000, both template tags render fine. That is, {{ analytics_code }} renders to \"working\" and the key raises an Exception.</p>\n\n<p>However, in the production server, the {{ analytics_code }} renders to \"working\" but the key DOES NOT raise an exception. Any other value I put in key is not read and left blank.</p>\n\n<p>I have been scratching my head for hours now. Everything seems to be set up correctly. Any help would be appreciated -- I will respond very quickly! </p>\n\n<p>What is the best way to debug this?</p>\n"},{"tags":["javascript","jquery","python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13038600,"title":"Python/Django: Print message upon form submit","body":"<p>New to Django/Jquery:</p>\n\n<p>Trying to print \"Thanks for signing up!\" after a form is submitted.</p>\n\n<pre><code>  &lt;script type=\"text/javascript\"&gt;\n    $(function() {\n      $(\"input[data-submit-item]\").live(\"click\", function() {\n        var message = \"Thanks for signing up!\";\n        $.ajax({\n          type: \"POST\",\n          url: \"/add\",\n          data: {\n            \"text\": $(\"#item\").val(),\n            \"csrfmiddlewaretoken\": $('input[name~=\"csrfmiddlewaretoken\"]').val()\n          },\n          success: function(data) {\n\n            $(\"#item-list\").append(data);\n            $(\"#confmessage\").append(message);\n            $(\"#item\").val(\"\");\n          }\n        });\n      });\n    });\n  &lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;div id = \"main-container\"&gt;\n\n          &lt;h1&gt;FooBar Baz&lt;/h1&gt;\n          &lt;div id = 'signup-form'&gt;\n            &lt;form&gt;\n              &lt;input type=\"text\" id=\"item\" placeholder=\"Enter your email ...\" /&gt;\n              {% csrf_token %}\n              &lt;div&gt;&lt;input type=\"submit\" value=\"Sign Up\" data-submit-item=\"true\" /&gt;&lt;/div&gt;\n            &lt;/form&gt;\n              &lt;/div&gt;\n   &lt;div id = \"confmessage\"&gt;&lt;/div&gt;\n                &lt;p&gt;&lt;strong&gt;front&lt;/strong&gt;&lt;/p&gt;\n  &lt;ul id=\"item-list\"&gt;\n    {% for item in line %}\n      &lt;li&gt;{{ item.text }}&lt;/li&gt;\n    {% endfor %}\n  &lt;/ul&gt;\n  &lt;p&gt;&lt;strong&gt;back&lt;/strong&gt;&lt;/p&gt;\n  &lt;p&gt;&lt;a href=\"/remove\"&gt;remove&lt;/a&gt;&lt;/p&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/body&gt;\n    &lt;/html&gt;\n</code></pre>\n\n<p>This just prints out a list of all the entered emails but doesnt print the confirmation message. This is a modification of this example: <a href=\"https://github.com/memcachier/memcachier_line/blob/master/templates/index.html\" rel=\"nofollow\">https://github.com/memcachier/memcachier_line/blob/master/templates/index.html</a></p>\n"},{"tags":["python","django","timezone","httprequest","django-1.3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13038485,"title":"How to get user's Timezone in Django 1.3 Http Request","body":"<p>I have read that there is a lot of timezone support available in <em>Django 1.4</em>, but how does one obtain user's timezone in <strong><em>Django 1.3</em></strong>?</p>\n\n<p>Once I have the timezone i.e. something like <em>'Europe\\London'</em> or <em>'GMT+4:00'</em>, it is easy to use a <em>middleware</em> to set it into the <code>request.META</code> dict so that it is available with every request...</p>\n"},{"tags":["python","windows","django","virtualenv"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":1279,"score":6,"question_id":8012956,"title":"Python + Django + VirtualEnv + Windows","body":"<p>I had some problem on installing python + virtualenv + django and need help.</p>\n\n<p>System: Windows 7, 64b</p>\n\n<p>What i do?\n<strong>1) Installed Python 2.7.2 (32bits)\n2) Installed SetupTools (32 bits)\n3) Installed VirtualEnv</strong></p>\n\n<pre><code>E:\\APPZ\\Console2&gt;C:\\Python27\\Scripts\\easy_install.exe virtualenv\n</code></pre>\n\n<p><strong>4) Created virtualenv:</strong></p>\n\n<pre><code>E:\\APPZ\\Console2&gt;virtualenv E:\\CODE\\wamp\\www\\AMBIENTES\\env\n</code></pre>\n\n<p><strong>5) Fine, now I created a \".bat\" to use my env and put then in C:\\Windows.</strong></p>\n\n<p>C:\\Windows\\python.bat</p>\n\n<pre><code>cmd.exe /k E:\\CODE\\wamp\\www\\AMBIENTES\\env\\Scripts\\activate.bat\n</code></pre>\n\n<p>So far so good\nNow I executed the python.bat and installed django:</p>\n\n<pre><code>E:\\APPZ\\Console2&gt;python\n\nE:\\APPZ\\Console2&gt;cmd.exe /k E:\\CODE\\wamp\\www\\AMBIENTES\\env\\Scripts\\activate.bat\n(env) E:\\APPZ\\Console2&gt;cd E:\\CODE\\wamp\\www\\AMBIENTES\\Django-1.2.7\n\n(env) E:\\CODE\\wamp\\www\\AMBIENTES\\Django-1.2.7&gt;python setup.py install\ndjango installed (1.2.7) successfully.\n</code></pre>\n\n<p>And now, the problem:</p>\n\n<pre><code>(env) E:\\CODE\\wamp\\www\\AMBIENTES\\Django-1.2.7&gt;E:\\CODE\\wamp\\www\\AMBIENTES\\env\\Scripts\\django-admin.py --version\nTraceback (most recent call last):\n  File \"E:\\CODE\\wamp\\www\\AMBIENTES\\env\\Scripts\\django-admin.py\", line 2, in &lt;module&gt;\n    from django.core import management\nImportError: No module named django.core\n\n(env) E:\\CODE\\wamp\\www\\AMBIENTES\\Django-1.2.7&gt;\n</code></pre>\n\n<p>-</p>\n\n<p>Does anyone know what I can do about it?</p>\n"},{"tags":["python","django","rabbitmq","django-celery","celeryd"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13034419,"title":"Celeryd running multiple daemons","body":"<p>I'm attempting to use <a href=\"http://celeryproject.org/\" rel=\"nofollow\">Celery</a> with the RabbitMQ backend to run asynchronous background tasks on Fedora, and I'm finding it frustratingly unreliable. The biggest problem is that it occasionally runs the identical task multiple times, and I'm having trouble diagnosing why.</p>\n\n<p>I don't think my code's triggering the task multiple times, as I've tested by manually launching the task (which creates a db record) once, and see that two identical records are created. If I run the code from a Django shell, only one record is created, so the problem definitely seems to be Celery.</p>\n\n<p>I have 3 servers each running celeryd, with only the first running rabbitmq, and all 3 servers share the same database. My first through was that there's was a problem in my celery settings causing celeryd on each server to retrieve and execute the same task. However, nothing in the celery docs seems to differentiate between a single host and multi-host setup, so assuming I've specified the correct BROKER_HOST/PORT/USER/PASSWORD/VHOST in my settings.py for each server, it should \"just work\" with multiple hosts. Is this correct?</p>\n\n<p>The other thought I had was that I might somehow be running multiple instances of celeryd, although I'm not sure how to check for this. Two servers are running Fedora 13, and when I run <code>ps aux | grep .*.py</code> I get:</p>\n\n<pre><code>root     24806  0.1  1.8  51404 31328 ?        Sl   Oct19   9:25 ../../.env/bin/python manage.py celeryd -f /var/log/myapp/celeryd.log -l WARNING --pidfile /var/run/celeryd.pid -B --scheduler djcelery.schedulers.DatabaseScheduler\nroot     24900  0.1  1.6  51404 28592 ?        S    Oct19   6:02 ../../.env/bin/python manage.py celeryd -f /var/log/myapp/celeryd.log -l WARNING --pidfile /var/run/celeryd.pid -B --scheduler djcelery.schedulers.DatabaseScheduler\nroot     24901  0.3  9.4 183232 161948 ?       S    Oct19  22:32 ../../.env/bin/python manage.py celeryd -f /var/log/myapp/celeryd.log -l WARNING --pidfile /var/run/celeryd.pid -B --scheduler djcelery.schedulers.DatabaseScheduler\n</code></pre>\n\n<p>Does this indicate that 3 separate instances of celeryd are running? And if so, is this an error and should I kill 2 of them?</p>\n\n<p>My third server is running Fedora 17, which has a different services framework. When I run <code>systemctl status celeryd.service</code> I get:</p>\n\n<pre><code>celeryd.service - LSB: celery task worker daemon\n      Loaded: loaded (/etc/rc.d/init.d/celeryd)\n      Active: active (exited) since Fri, 19 Oct 2012 10:59:38 -0400; 4 days ago\n     Process: 732 ExecStop=/etc/rc.d/init.d/celeryd stop (code=exited, status=0/SUCCESS)\n     Process: 738 ExecStart=/etc/rc.d/init.d/celeryd start (code=exited, status=0/SUCCESS)\n      CGroup: name=systemd:/system/celeryd.service\n</code></pre>\n\n<p>I'm not sure how to interpret this. \"Active\" usually it's running, but \"exited\" usually means it's not running. When I run <code>ps aux | grep .*celery.*</code> I only get:</p>\n\n<pre><code>root     25142  0.0  0.0 109400   932 pts/0    S+   11:28   0:00 grep --color=auto .*celery.*\n</code></pre>\n\n<p>So does this mean celeryd is not running, or should I be looking for something else?</p>\n\n<p>Edit: Based on <a href=\"http://stackoverflow.com/questions/11756020/does-the-number-of-celeryd-processes-depend-on-the-concurrency-setting\">this</a> answer, I think the 3 processes may be the default.</p>\n"},{"tags":["django","google-maps","web-applications","website","geolocation"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13037032,"title":"Making a map/location based django site","body":"<p>Does anyone know how can I develop a site like <a href=\"http://dodota.com/advance/\" rel=\"nofollow\">http://dodota.com/advance/</a>?</p>\n\n<p>What are good packages? \nIs Django's ORM responsible enough? \nAny useful suggestions for developmental procedure?</p>\n"},{"tags":["python","django","django-models"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13033979,"title":"django add relationships to user model","body":"<p>I have a django project using the built in user model.</p>\n\n<p>I need to add relationships to the user. For now a \"like\" relationship for articles the user likes and a \"following\" relationship for other users followed.</p>\n\n<p>What's the best way to define these relationships? The django doc recommends creating a Profile model with a one on one relation to the user to add fields to the user. but given no extra fields will be added to the user profile in my case this is overkill.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["python","django","heroku"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13034013,"title":"Accessing Heroku's url root in Django settings.py","body":"<p>I need to access the root url of my Heroku app. I have several apps for this project (e.g., staging, production) and I'd like to programmatically set this value in my settings file. What I want is:</p>\n\n<pre><code>URL_ROOT = 'http://silly-name-1234.herokuapp.com'\n</code></pre>\n\n<p>As suggested <a href=\"http://stackoverflow.com/questions/4093999/how-to-use-django-to-get-the-name-for-the-host-server\">here</a>, I have tried the following:</p>\n\n<pre><code>import socket\nHOSTNAME = socket.gethostname()\nURL_ROOT = HOSTNAME\n</code></pre>\n\n<p>But, this doesn't seem to work</p>\n"},{"tags":["django","django-models","django-forms","escaping"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12983740,"title":"How to save XML safe text data to DB using Django models?","body":"<p>I am building a Django site that interfaces with database that supposed to save XML safe data only. A string like <em>\"Mike &amp; Ike\"</em> needs to be stored as <em>\"Mike &amp;amp; Ike\"</em></p>\n\n<p>From what I can see there is two approaches to this. I can convert string to XML safe string when validating my forms. For every field that can contain text data I would have to call <code>xml.sax.saxutils.escape</code> in appropriate validating function. In addition when supplying initial data from DB models to my form objects I have to mark strings as <strong>safe</strong> using <code>django.utils.safestring.mark_safe</code> function (template filters like <strong>|safe</strong> and <strong>autoescape off</strong> do not help here, because form's html output automatically escapes all values).</p>\n\n<pre><code>class NameForm(forms.Form):\n    name = forms.CharField()\n\n    def clean_name(self):\n        from xml.sax.saxutils import escape\n        return escape(self.cleaned_data['name'])\n\nfrom django.utils.safestring import mark_safe\nform = NameForm(initial={'name': mark_safe(Customer.objects.get(pk=1).name)})\n</code></pre>\n\n<p>There is downside to this approach. The string may considerably change after being <code>escape</code>d. Plus I have to remember to mark safe all initial values. I think a better approach would be to escape values at the time of database save, just before values are written to database. It will let me assign any values directly to model object and not worry about escaping them. Also, when object is looked up from database like <code>c = Customer.objects.get(pk=1)</code> the value <code>c.name</code> should be unescaped value. For example:</p>\n\n<pre><code>c = Customer(id=1, name=\"Mike &amp; Ike\")\nc.full_clean() # \"test drive\" escaping here and make sure it does not cause field overflow\nc.save()\n# database now have\n# CUSTOMER\n# NAME: 'Mike &amp;amp; Ike'\nc1=Customer.objects.get(pk=1)\nc1.name # Mike &amp; Ike\nc.name  # Mike &amp; Ike\n</code></pre>\n\n<p>Is that possible? Where do I start? I have read <a href=\"https://docs.djangoproject.com/en/1.4/ref/models/instances/#what-happens-when-you-save\" rel=\"nofollow\">Django documentation</a> and it talks about steps that are done when data is saved but there is no guide on how to customize that behaviour. I think I want to customize step 3 mentioned there, but I am open to suggestions. Any help is appreciated.</p>\n"},{"tags":["django","postgresql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":163,"score":0,"question_id":9325936,"title":"How to use a non default schema with syncdb Django","body":"<p>Is there a way to tweak django to create a new schema with specific name when using syncdb or reset.</p>\n"},{"tags":["mysql","django","django-admin"],"answer_count":6,"favorite_count":4,"up_vote_count":10,"down_vote_count":0,"view_count":5808,"score":10,"question_id":3414247,"title":"Django drop all tables from database","body":"<p>How can I drop all tables from a database using manage.py and command line? Is there any way to do that executing manage.py with appropriate parameters so I can execute it from a .NET application?</p>\n"},{"tags":["django","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":142,"score":0,"question_id":9750892,"title":"formset_factory and updating a field to show only filtered items","body":"<p>On my scorecard entry form, i only want the user to select from the shortlisted players for that match. If there was one field, I am succesfully able to rewrite using.</p>\n\n<pre><code>form.fields['player'].queryset = PlayerShortlist.objects.filter(team=userteam, fixture=fixture_id)\n</code></pre>\n\n<p>but when i apply it on formset_factory, i am unable to get result.</p>\n\n<p>my forms.py</p>\n\n<pre><code>class TossForm(forms.Form):\n    toss_won_by = forms.BooleanField()\n    bat_first = forms.BooleanField()\n\nclass InningsForm(forms.Form):\n    player = forms.ModelChoiceField(\n        PlayerShortlist.objects.all()\n    )\n    status = forms.ChoiceField(choices=OUT_CHOICES, initial='DNB')\n    score = forms.IntegerField(initial=0)\n    balls_faced = forms.IntegerField(initial=0)\n</code></pre>\n\n<p>my views.py</p>\n\n<pre><code>@login_required\ndef scorecard(request, team_id, fixture_id):\n    template = get_template('cricket/scorecard.html')\n    tossform = TossForm()\n    #inningform = InningsForm()\n    InningsForms = formset_factory(InningsForm, extra=11)\n    inningsforms = InningsForm()\n    inningsforms.fields['player'].queryset = PlayerShortlist.objects.filter(team=Team.objects.get(id=1), fixture=fixture_id)\n\n    page_vars = Context({\n        'loggedinuser': request.user,\n        'tossform': tossform,\n        'inningsforms': inningsforms,\n    })\n    crsfcontext = RequestContext(request, page_vars)\n    output = template.render(crsfcontext)\n    return HttpResponse(output)\n</code></pre>\n\n<p>it gives me errors.</p>\n\n<p>'InningsFormFormSet' object has no attribute 'fields'</p>\n\n<p>thanks</p>\n\n<p>//yousuf</p>\n\n<p>okey, i looked around, and it seems formfield_callback can be used for what i intend it for but when i use it lin my views.py like</p>\n\n<pre><code>def update_field(field, **kwargs):\n        if field.name == 'players':\n            field.queryset = PlayerShortlist.objects.filter(team=Team.objects.get(id=team_id), fixture=fixture_id)\n\n    InningsFormset = formset_factory(InningsForm, extra=11, formfield_callback)\n</code></pre>\n\n<p>it gives me</p>\n\n<p><strong>formset_factory() got an unexpected keyword argument 'formfield_callback'</strong></p>\n"},{"tags":["django"],"answer_count":14,"favorite_count":9,"up_vote_count":20,"down_vote_count":0,"view_count":8821,"score":20,"question_id":1906795,"title":"What are some famous websites built in Django?","body":"<p>I've tried to search it here and google'd it but can't find any info nor a relevant question. What are some famous sites that have been built in Django?</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","django","django-templates","django-urls","django-generic-views"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13036436,"title":"Generic Views NoReverseMatch when using {% url %} in Django","body":"<p>I have a problem to do the reverse command 'url' from the template base.html.</p>\n\n<p><strong>URLS.conf</strong> my file looks like this:</p>\n\n<pre><code>dic_info_artigo = {\n                  'queryset': Artigo.modificado.all(),\n                  'date_field': 'data_pub',\n}\n\nurlpatterns = patterns('django.views.generic.date_based',\n    (r'^$', 'archive_index', dic_info_artigo,'artigos'),\n\n    (r'^(?P&lt;year&gt;\\d{4})/$','archive_year', dic_info_artigo,'artigos_ano'),\n    (r'^(?P&lt;year&gt;\\d{4})/(?P&lt;month&gt;\\w{3})/$',\n        'archive_month', dic_info_artigo,'artigos_mes'),\n    (r'^(?P&lt;year&gt;\\d{4})/(?P&lt;month&gt;\\w{3})/(?P&lt;day&gt;\\d{2})/$',\n        'archive_day', dic_info_artigo,'artigos_dia'),\n    (r'^(?P&lt;year&gt;\\d{4})/(?P&lt;month&gt;\\w{3})/(?P&lt;day&gt;\\d{2})/(?P&lt;slug&gt;[-\\w]+)/$',\n        'object_detail', dic_info_artigo,'detalhe_artigo'),\n)\n</code></pre>\n\n<p><strong>base.html</strong></p>\n\n<pre><code>&lt;a href=\"{% url artigos %}\"&gt; Artigos &lt;/ a&gt;\n</code></pre>\n\n<p><strong>The error:</strong></p>\n\n<p><em>dictionary update sequence element # 0 has length 1; 2 is required</em></p>\n\n<p>Already tried using the parameter 'name=', i change the value , but it did not work</p>\n\n<pre><code>url(r'^$', 'archive_index', dic_info_artigo, name='artigos'),\n</code></pre>\n\n<p>What am I doing wrong? Any tips?</p>\n\n<p>Thanks.</p>\n"}]}
{"total":41213,"page":13,"pagesize":100,"questions":[{"tags":["django","permissions","user","groups","bootstrapping"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13035813,"title":"should Django groups and permissions be hard-coded or bootstrapped?","body":"<p>I'm building an app that assumes the existence of certain groups and permissions for its workflow.  For example, a \"member\" can log into the app and view and edit their personal data, but cannot see notes that would typically be displayed on the same screen.  An \"employee\" can see those notes and create or edit their own, but only a \"member manager\" can delete or edit anyone's notes.</p>\n\n<p>My issue is with bootstrapping the data for this app.  I can create JSON fixture data for the groups, but then I have to hard-code the PKs, which seems like bad practice (what if a third party app I wanted to use did the same thing and there was a conflict?)  A bigger issue is the permissions - I would have to add PKs to the permissions which in turn would have PKs to their content types.</p>\n\n<p>I've read about using the post_syncdb hook to add initial data in a more programmatic fashion which I'm hoping will help me resolve the hard-coded PK issue.  But I'm wondering whether this is the best solution to this problem, or if I'm \"abusing\" the Django Group and Permission concepts, here, and should be doing something else, like creating new models or just putting flags (like \"is_member_manager\") on my user profile model, etc.</p>\n"},{"tags":["django","forms","model","fields"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13035541,"title":"Django, define field to be hidden in every form","body":"<p>I have an abstract model <code>NamedEntry</code>. It has a field <code>body_raw</code> which contains the text as it was input by the user. The <code>body</code> field contains the converted (from markdown to html) cache for the <code>body_raw</code> field.</p>\n\n<p>The <code>body</code> field should be hidden by default <em>everywhere</em>, on any form it might be used with. Is there something like <code>body = models.TextField(blank=True, hidden=True)</code>?</p>\n"},{"tags":["django","django-models","django-admin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12913259,"title":"Django use only some fields in ForeignKey","body":"<p>I have three classes</p>\n\n<pre><code> Class Company(models.Model):\n     name     = CharField( max_length = 26 , blank = True)\n     #(...)\n\n class Person(models.Model):\n     name     = CharField( max_length = 26 , blank = True)\n     function = CharField( max_length = 50 , blank = True)\n     company  = ForeignKey ( Company , related_name = 'persons' )\n     # All the company table inside the data base is loaded in order to make the query,\n     # This make a HUGE amount of data and takes too many time...\n     # (...)\n     def __unicode__(self):\n          # caption uses both name and company__name fields but no other fields\n          return self.name + '(' + self.company.name + ')'\n\n class Contact(models.Model):\n      person  =  ForeignKey ( Person )\n</code></pre>\n\n<p>In order to optimise performances, I would like the latest person field to use </p>\n\n<pre><code>Person.objects.all().only('name', 'company__name')\n</code></pre>\n\n<p>as queryset.  Is it possible?</p>\n"},{"tags":["css","django","static"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13035736,"title":"Django load block for css","body":"<p>I have a few pages. For every page I need load unique css. \nFor all static files I use <a href=\"https://docs.djangoproject.com/en/dev/howto/static-files/#with-a-template-tag\" rel=\"nofollow\">this</a>. In the head of index.html I have:</p>\n\n<pre><code>{% block css  %}\n\n{% endblock %}\n</code></pre>\n\n<p>But, for example, in contact.html I use:</p>\n\n<pre><code>{% extends \"index.html\" %}    \n{% block css %}\n    &lt;link rel=\"stylesheet\" href=\"{% static \"css/contact.css\" %}\" type=\"text/css\" /&gt;\n    {% endblock %}\n</code></pre>\n\n<p>And its print error:\n<strong>Invalid block tag: 'static', expected 'endblock'</strong>. How to fix it?</p>\n"},{"tags":["django","amazon-s3","boto"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":252,"score":2,"question_id":11596488,"title":"Signature/Expires/Access Key ID appearing in URL Params. Django/Boto/S3","body":"<p>Thumbnail URLS have params in them. I'm not sure why. I think they related to sorl-thumbnail or boto storage we're using.\nHow do I remove the additional params from the URL?\nAre they coming from boto/s3 or sorl.\nI've  no idea how to debug.</p>\n"},{"tags":["django","django-authentication"],"answer_count":4,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":1755,"score":4,"question_id":1581602,"title":"(Django) Sharing authentication across two sites that are on different domains","body":"<p>I have two sites say foo.com and bar.com and are both Django based. Primary registration occurs on foo.com (I'd like the main user db to be here) and I'd like for three things to happen:</p>\n\n<p>1) User that logs in to foo.com is automatically able to access bar.com without logging in again</p>\n\n<p>2) User that logs in to bar.com directly is authenticated against foo.com user db.</p>\n\n<p>3) There is no need for a user to register at bar.com directly.</p>\n\n<p>How can I achieve this? If it greatly simplifies things I can make bar.com a subdomain of foo.com (eg. bar.foo.com) but they must be separate sites.</p>\n"},{"tags":["django","node.js","express"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13034268,"title":"node.js / django mini apps","body":"<p>I was impressed by the mini-app concept in the <a href=\"https://peepcode.com/products/full-stack-nodejs-i\" rel=\"nofollow\">peepcode node.js tutorial</a>. Instead of having global folders:</p>\n\n<pre><code>/site/models\n/site/views\n</code></pre>\n\n<p>you create another level of seperation per application area:</p>\n\n<pre><code>/site/login/models\n/site/catalog/models\n</code></pre>\n\n<p>AFAIU application areas must know nothing on each other. This creates some questions as for where to put shared db models, and if too much shared models imply that the wrong mini-app seperation was made. I'm trying to find more material on this mini-app concept. The webcast mentions that it is common in django. Anyone has experience or material about it in node (preferred) or django?</p>\n"},{"tags":["django","email","send"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":53,"score":3,"question_id":13018484,"title":"Send_mail in Django, works in shell, works locally, not in view","body":"<p>I'm not even sure how to debug this: I'm using send_mail in one of my views in Django. It works fine when using the app locally (using the same SMTP settings I use in production), and it works fine from the shell in production (again, using the same settings). But when I actually use the app in production, the message doesn't send. Any idea how to troubleshoot?</p>\n\n<p>I won't paste in the whole view, but here's the relevant section. </p>\n\n<pre><code>if request.method == 'POST':\n    message, form = decideform(request.POST)\n    if form.is_valid():\n        invitation.status = form.cleaned_data['status']\n        invitation.save()\n        message, form = decideform(request.POST)\n        update = 'Thank you for updating your status.'\n\n        # Send an email confirming their change\n        subject = 'Confirming your RSVP [%s %s]' % (invitation.user.first_name, invitation.user.last_name)\n        body = message + ' Remember, the URL to update or change your RSVP is http://the.url%s.' % invitation.get_absolute_url()\n        send_mail(subject, body, 'rsvp@mydomain.com', ['rsvp@mydomain.com', invitation.user.email], fail_silently=True)\n</code></pre>\n\n<p>And here's the relevant bits from my local_settings file, with salient details altered for security's sake:</p>\n\n<pre><code>EMAIL_HOST = 'mail.mydomain.com'\nEMAIL_PORT = 587\nEMAIL_USE_TLS = True\nEMAIL_HOST_USER = 'rsvp@mydomain.com'\nDEFAULT_FROM_USER = 'rsvp@mydomain.com'\nEMAIL_HOST_PASSWORD = 'p4ssw0rd'\n</code></pre>\n"},{"tags":["django","models","relationship","curve","manytomanyfield"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13034922,"title":"Storing a curve in a django model as manytomany?","body":"<p>I have a list of products (say diodoes) which have a curve associated to them.\nFor example, </p>\n\n<ul>\n<li>Diode 1: curve 1: [(0,1),(1,3),(2,10), ...., (100,0.5)]</li>\n<li>Diode 2: curve 2: [(0,2),(1,4),(2.1,19), ..., (100,0)]</li>\n</ul>\n\n<p>So for each product there is a curve (with the same x-axis values <code>range(1,100)</code>) but different y-axis values.</p>\n\n<p>My question is what is the best practice to store such data (using Django + PostgreSql) given that I want to calculate things with it later in the views (say the area under the curve, or that curve times another one, etc). I will also be charting it, so the view will have to pull the values.</p>\n\n<p>My first attempts have had various limitations:</p>\n\n<ul>\n<li><p><em>Naive attempt 1</em></p>\n\n<pre><code> # model.py\n for i in range(101):\n     name_sects = [\"x\", str(i+1)]\n     attrs[\"\".join(name_sects)] = models.DecimalField(_(\"\".join([str(i+1),' A'])), max_digits=6)\n\n\n attrs['intensity'] = model.DecimalField(_('Diode Intensity'))\n\n\n Diode = type('Diode', (models.Model,), attrs)\n</code></pre></li>\n</ul>\n\n<p>Ok, that creates a field for each \"x\", x1, x2,... etc, and I can fill each \"y\" in the admin ... but it's not obvious how to manipulate it in the view or the template. (and a pain to fill in, obviously)</p>\n\n<ul>\n<li><p><em>Naive attempt 2</em></p>\n\n<pre><code>#model.py\nclass Curve(models.Model)\n    x_axis = models.PositiveIntegerField( ...)\n    y_axis = models.DecimalField( ...)\n\nclass Diode(models.Model)\n    name = blah, blah\n    intensity = model.DecimalField(_('Diode Intensity'), blah, blah)\n    characteristic_curve = model.ManyToManyField(Curve)\n</code></pre></li>\n</ul>\n\n<p>Is ManyToMany the way forward? Even if to each diode corresponds one single curve? (but many points, possibly two diodes sharing a same point).</p>\n\n<p>Any advice, tips or links to tools for it are very appreciated.</p>\n"},{"tags":["django","django-1.4"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13018697,"title":"Django 1.4.1 error reporting don't send me an email","body":"<p>This question is probably a duplicated question and sorry about that.</p>\n\n<p>I'm using <code>Django 1.4.1</code> and on production server I set <code>DEBUG</code> to <code>False</code>.\nSometimes users get an Exception and server shows <code>500.html</code> template but don't send an email configured in <code>ADMINS</code> section of <code>settings.py</code>.</p>\n\n<p>In application sending email is properly configured because under registration process I can receive Welcome Email.</p>\n\n<p>Fragment of my <code>settings.py</code>:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>DEBUG = False\nTEMPLATE_DEBUG = DEBUG\n\nADMINS = (\n    ('example', 'example@example.com'), # this changed but my email is correct\n)\n\nMANAGERS = ADMINS\n\nMIDDLEWARE_CLASSES = (\n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',\n    'django.middleware.transaction.TransactionMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n)\nLOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'filters': {\n        'require_debug_false': {\n            '()': 'django.utils.log.RequireDebugFalse'\n        }\n    },\n    'handlers': {\n        'mail_admins': {\n            'level': 'ERROR',\n            'filters': ['require_debug_false'],\n            'class': 'django.utils.log.AdminEmailHandler'\n        }\n    },\n    'loggers': {\n        'django.request': {\n            'handlers': ['mail_admins'],\n            'level': 'ERROR',\n            'propagate': True,\n        },\n    }\n}\n</code></pre>\n"},{"tags":["django","django-templates","django-views","django-middleware","django-errors"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":76,"score":3,"question_id":12924746,"title":"Where in django is the default 500 traceback rendered so that I can use it to create my own logs?","body":"<p>I would like to use it to generate html log files inside the process_exception() method of my custom middleware class, e.g:</p>\n\n<ul>\n<li>Exception caught.</li>\n<li>process_exception(request) called.</li>\n<li>process_exception calls whatever function returns default error html.</li>\n<li>process_exception writes returned html to logs folder somewhere where django server is running.</li>\n</ul>\n\n<p>I know that Django is capable of sending emails for these exceptions but i'd rather not use this. I'm working on a RESTful application using JSON and so it feels more appropriate to return a json string stating error 500 and then placing the html somewhere else.</p>\n\n<p>Thanks in advance.</p>\n\n<p>Sorry maybe I need to clarify: I don't want to create my own 500.html, I want to use the one that django uses when Debug=True. i.e. generate the error file and place it in a log folder.</p>\n\n<p><em><strong>Thanks to Mark for the help - here is my solution for anyone interested:</em></strong></p>\n\n<pre><code>import logging\nimport settings\nimport sys\nimport datetime\n\nfrom response import get_json_response\nfrom django.views.debug import ExceptionReporter\n\nlogging.config.dictConfig(settings.LOGGING)\nLOGGER = logging.getLogger('console_logger')\n\nclass LoggingMiddleware(object):\n\n    def process_exception(self,request,exception):\n        exc_type, exc_value, exc_traceback = sys.exc_info()\n        er = ExceptionReporter(request,exc_type,exc_value,exc_traceback)\n        file_path = settings.LOG_FOLDER+'/'+str(datetime.datetime.now())+'.html'\n        LOGGER.error(\"Writing error 500 traceback to %s\" % file_path)\n        file_handle = open(file_path,'w')\n        file_handle.write(er.get_traceback_html())\n        file_handle.close()\n        return get_json_response(500,\"HTTP Error 500: Internal Server Error\")\n</code></pre>\n\n<p>The code intercepts any exceptions, uses the sys module and djangos default error template to generate the nicely formatted traceback/exception info page and then places this in a log folder before returning a JSON object stating that there has been a http error 500.</p>\n"},{"tags":["django","nginx","uwsgi"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":530,"score":0,"question_id":11430185,"title":"502 error with nginx + uwsgi +django","body":"<p>I've tried to configure django on top on nginx and uwsgi and a 502 bad gateway error is encountered when trying to access localhost</p>\n\n<p>This is my /etc/ngingx/sites-available/default file</p>\n\n<pre><code>server {\n    server_name testapp1.com www.testapp1.com;\n    access_log /var/log/nginx/testapp1.com.access.log;\n\n    location / {\n        uwsgi_pass unix:///var/run/uwsgi/app/testapp1/socket;\n        include uwsgi_params;\n    }\n}\n</code></pre>\n\n<p>This is my testapp1.ini file in /etc/nginx/apps-available/</p>\n\n<blockquote>\n  <p>[uwsgi]<br>\n      thread=3<br>\n      master=1<br>\n      env = DJANGO_SETTINGS_MODULE=testapp1.settings<br>\n      module = django.core.handlers.wsgi:WSGIHandler()<br>\n      chdir = /home/paul/apps/testapp1<br>\n      socket = /run/uwsgi/testapp1/socket<br>\n      logto = /var/log/uwsgi/testapp1.log  </p>\n</blockquote>\n\n<p>This is the uwsgi.log file</p>\n\n<blockquote>\n  <p>Tue Jul 10 21:49:38 2012 - <strong>* Starting uWSGI 1.0.3-debian (32bit) on<br>\n  [Tue Jul 10 21:49:38 2012] *</strong> Tue Jul 10 21:49:38 2012 - compiled<br>\n  with version: 4.6.2 on 20 February 2012 10:06:16 Tue Jul 10 21:49:38<br>\n  2012 - current working directory: / Tue Jul 10 21:49:38 2012 - writing<br>\n  pidfile to /run/uwsgi/app/testapp1/pid Tue Jul 10 21:49:38 2012 -<br>\n  detected binary path: /usr/bin/uwsgi-core Tue Jul 10 21:49:38 2012 -<br>\n  setgid() to 33 Tue Jul 10 21:49:38 2012 - setuid() to 33 Tue Jul 10<br>\n  21:49:38 2012 - your memory page size is 4096 bytes Tue Jul 10<br>\n  21:49:38 2012 - uwsgi socket 0 bound to UNIX address<br>\n  /run/uwsgi/app/testapp1/socket fd 5 Tue Jul 10 21:49:38 2012 - bind():<br>\n  No such file or directory [socket.c line 107]  </p>\n</blockquote>\n\n<p>I didnt change the nginx.conf file.</p>\n"},{"tags":["django","django-templates"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1945,"score":2,"question_id":7737146,"title":"django template date format","body":"<p>I have dates in isoformat in the db, <code>%Y-%m-%d</code> however when the date is passed on to the template, it comes out as something like <code>Oct. 16, 2011</code>.</p>\n\n<p>Is there anyway that I can manipulate the format to whatever I want?</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":51,"score":-1,"question_id":13032741,"title":"How to get index.html in django example?","body":"<p>I have a simple urls.py file:</p>\n\n<pre><code> (r'^(.*.html)$','django.views.static.serve', {'document_root': ROOT + '/media/html/'})\n</code></pre>\n\n<p>How to get index.html file for url: http:/myserver.com/ ?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13034278,"title":"django 'tuple' object has no attribute 'id'","body":"<p>this is in my views and i call it in a form. when i submit the form i get \"'tuple' object has no attribute 'id'\"</p>\n\n<pre><code>@login_required\ndef _login_save(request, form):\n    if request.method == 'POST':\n        form = LoginSaveForm(request.POST)\n        if form.is_valid():\n            # Create or get login.\n            login1 = login.objects.get_or_create(\n                                                 id=1 #this is for testing reasons to get a specific record\n                                                )\n            login1.name=form.cleaned_data['name']\n            login1.loginUrl = form.cleaned_data['url']\n            login1.password = form.cleaned_data['password']\n            login1.login_username = form.cleaned_data['Login_username']\n            login1.notes = form.cleaned_data['notes']\n            login1.save()\n    return login1\n</code></pre>\n"},{"tags":["django"],"answer_count":2,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":473,"score":0,"question_id":3369486,"title":"Multiple Sites under single Django project","body":"<p>Is it possible and correct to have multiple sites under single django project. So that there will be globally shared sittings file,urls files along with global shared 'apps' for all the sites and a common admin interface for all the sites under the single django project. Each site might have its own setting,urls and templates that will be overridden or imported dynamically into the parent settings file.</p>\n\n<p>Could anyone please tell me how to achieve this using Python2.6 + Django 1.2.1 + Apache2.2 + mod_wsgi. As I am a bit confused with the virtualhost need to be supplied while using the mod_wsgi. </p>\n\n<p>As per the above requirement I am planning to keeping the wsgi file in the main django project directory so that the main settings will be imported and within the main setting I am planning to import the requested sites settings dynamically.Is it possible this way using Apache + mod_wsgi. Please advice.</p>\n\n<p>OR </p>\n\n<p>Instead of global django project do I have to make a globally shared module for importing the global setting and url details into site specific settings and urls.</p>\n\n<p>I would like to make better reuse of the code rather than making redundant changes in each sites.</p>\n\n<p>Please advice.</p>\n"},{"tags":["django"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1521,"score":1,"question_id":1004109,"title":"Django: how to make DATETIME_FORMAT active?","body":"<p>Where should DATETIME_FORMAT be placed for it to have effect\non the display of date-time in the Django admin site\n(Django’s automatic admin interface) ?</p>\n\n<p>Documentation for DATETIME_FORMAT, on page\n<a href=\"http://docs.djangoproject.com/en/1.0/ref/settings/\" rel=\"nofollow\">http://docs.djangoproject.com/en/1.0/ref/settings/</a>, says:</p>\n\n<pre><code>\"The default formatting to use for datetime fields on\nDjango admin change-list pages -- and, possibly, by\nother parts of the system.\"\n</code></pre>\n\n<p><strong>Update 1</strong>: DATETIME_FORMAT is broken (the value of it is \nignored), despite the documentation. Many years ago it \nworked, but since then the Django implementations have been \nbroken wrt. this feature. It seems the Django community \ncan't decide how to fix it (but in the meantime I think they \nshould remove DATETIME_FORMAT from the documentation or add \na note about this problem to it).</p>\n\n<p>I have put these lines into file \"settings.py\" of the\nwebsite/project (not the app), but it does not seem to have\nany effect (after restarting the development server):</p>\n\n<blockquote>\n  <p>DATETIME_FORMAT = 'Y-m-d H:i:sO'</p>\n  \n  <p>DATE_FORMAT     = 'Y-m-d'</p>\n</blockquote>\n\n<p>As an example \"June 29, 2009, 7:30 p.m.\" is displayed when\nusing Django admin site.</p>\n\n<p>Django version is 1.0.2 final and Python version is 2.6.2\n(64 bit). Platform: Windows XP 64 bit.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/907351\">http://stackoverflow.com/questions/907351</a> seems to be about\nthe exact opposite problem (and thus an apparent\ncontradiction).</p>\n\n<p>The full path to file \"settings.py\" is\n\"D:\\dproj\\MSQall\\website\\GoogleCodeHost\\settings.py\". I now\nstart the development server this way (in a Windows command\nline window):</p>\n\n<blockquote>\n  <p>cd D:\\dproj\\MSQall\\website\\GoogleCodeHost</p>\n  \n  <p>set DJANGO_SETTINGS_MODULE=GoogleCodeHost.settings</p>\n  \n  <p>python manage.py runserver 6800</p>\n</blockquote>\n\n<p>There is no difference. Besides these are positively read\nfrom file \"settings.py\":</p>\n\n<blockquote>\n  <p>DATABASE_NAME</p>\n  \n  <p>INSTALLED_APPS</p>\n  \n  <p>TEMPLATE_DIRS</p>\n  \n  <p>MIDDLEWARE_CLASSES</p>\n</blockquote>\n\n<p>\"django-admin.py startproject XYZ\" does not create file\n\"settings.py\" containing DATETIME_FORMAT or DATE_FORMAT.\nPerhaps there is a reason for that?</p>\n\n<p>The sequence \"d:\", \"cd D:\\dproj\\MSQall\\website\\GoogleCodeHost\",\n\"python manage.py\nshell\", \"from django.conf import settings\",\n\"settings.DATE_FORMAT\", \"settings.DATETIME_FORMAT\" outputs\n(as expected):</p>\n\n<pre><code>'Y-m-d H:i:sO'\n'Y-m-d'\n</code></pre>\n\n<p>So the content of file \"settings.py\" is being read, but does\nnot take effect in the Django Admin interface.</p>\n"},{"tags":["django","model","signals"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13034051,"title":"How to use pre_init in django model","body":"<p>I want to *pre_init* order value of my model as increamented value from other object with the biggest order value. I wrote function like this:</p>\n\n<pre><code>@receiver(pre_init, sender=Category)\ndef get_order(instance, **kwargs):    \n    previous = Category.objects.all().order_by('-order')[0].order\n    instance.order = previous + 1\n</code></pre>\n\n<p>But When I run my admin panel I get error like this:</p>\n\n<pre><code>Environment:\n\n\nRequest Method: GET Request URL: http://127.0.0.1:8000/admin/catalog/category/add/\n\nDjango Version: 1.5 Python Version: 2.7.2 Installed Applications: ('django.contrib.auth',  'django.contrib.contenttypes',  'django.contrib.sessions',  'django.contrib.sites',  'django.contrib.messages',  'django.contrib.staticfiles',  'django.contrib.flatpages',  'django.contrib.admin',  'utils',  'menu',  'contact',  'mediamanager',  'mptt',  'catalog') Installed Middleware: ('django.contrib.sessions.middleware.SessionMiddleware',  'django.middleware.locale.LocaleMiddleware',  'django.middleware.common.CommonMiddleware',  'django.contrib.auth.middleware.AuthenticationMiddleware',  'django.contrib.messages.middleware.MessageMiddleware',  'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware')\n\n\nTraceback: File \"C:\\Python27\\lib\\site-packages\\django\\core\\handlers\\base.py\" in get_response\n  115.                         response = callback(request, *callback_args, **callback_kwargs) File \"C:\\Python27\\lib\\site-packages\\django\\contrib\\admin\\options.py\" in wrapper\n  367.                 return self.admin_site.admin_view(view)(*args, **kwargs) File \"C:\\Python27\\lib\\site-packages\\django\\utils\\decorators.py\" in\n_wrapped_view\n  91.                     response = view_func(request, *args, **kwargs) File \"C:\\Python27\\lib\\site-packages\\django\\views\\decorators\\cache.py\" in\n_wrapped_view_func\n  89.         response = view_func(request, *args, **kwargs) File \"C:\\Python27\\lib\\site-packages\\django\\contrib\\admin\\sites.py\" in inner\n  202.             return view(request, *args, **kwargs) File \"C:\\Python27\\lib\\site-packages\\django\\utils\\decorators.py\" in _wrapper\n  25.             return bound_func(*args, **kwargs) File \"C:\\Python27\\lib\\site-packages\\django\\utils\\decorators.py\" in\n_wrapped_view\n  91.                     response = view_func(request, *args, **kwargs) File \"C:\\Python27\\lib\\site-packages\\django\\utils\\decorators.py\" in bound_func\n  21.                 return func(self, *args2, **kwargs2) File \"C:\\Python27\\lib\\site-packages\\django\\db\\transaction.py\" in inner\n  208.                 return func(*args, **kwargs) File \"C:\\Python27\\lib\\site-packages\\django\\contrib\\admin\\options.py\" in add_view\n  971.             form = ModelForm(initial=initial) File \"C:\\Python27\\lib\\site-packages\\django\\forms\\models.py\" in __init__\n  235.             self.instance = opts.model() File \"C:\\Python27\\lib\\site-packages\\django\\db\\models\\base.py\" in __init__\n  318.         signals.pre_init.send(sender=self.__class__, args=args, kwargs=kwargs) File \"C:\\Python27\\lib\\site-packages\\django\\dispatch\\dispatcher.py\" in send\n  167.             response = receiver(signal=self, sender=sender, **named)\n\nException Type: TypeError at /admin/catalog/category/add/ Exception Value: get_order() takes exactly 1 argument (0 given)\n</code></pre>\n\n<p>Does anybody know how to fix it? Or how should look pre_init signal function?</p>\n"},{"tags":["django","django-templates","django-1.4"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13034042,"title":"outputting feed urls in template in Django 1.4","body":"<p>Prior to moving up to Django 1.4, I had a feed_dict defined in URLs. A context processor picked it up, so then in the template I could loop through it and output all my defined feed URLs. </p>\n\n<p>With the changes in how Django 1.4 handles feed URLs, how can I do this again?</p>\n"},{"tags":["python","django","prefetch"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13033716,"title":"Caching or prefetching Django's inverse relationships","body":"<p>Consider a shema with a Publishers table and a Books table so that</p>\n\n<pre><code>def Publisher(models.Model):\n  city = models.CharField()\n  ...\n\ndef Book(models.Model):\n  title = models.CharField()\n  publisher = models.ForeignKey(Publisher)\n</code></pre>\n\n<p>In my template I wish to display a list of certain publishers with all its books. In my view function I fetch the desired Publishers with something like</p>\n\n<pre><code>publishers=Publisher.objects.filter(city='NY')\n</code></pre>\n\n<p>Then in my view I iterate over publishers and publishers.book_set.all like</p>\n\n<pre><code>{% for p in publishers %}\n....\n   {% for b in p.book_set.all %}\n</code></pre>\n\n<p>This works as expected except that it obviously hits the db like a zillion times. </p>\n\n<p>How can I optimise the code so that django only hits the db once or twice? </p>\n"},{"tags":["python","django","django-1.4"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13033423,"title":"Django 1.4 Settings file questions?","body":"<p>I've used Django 1.3 for some time, and now that my system updated django automatically to 1.4,  I'm facing a problem with a settings file.\nProblem 1:\nI have created new project with command <code>django-admin.py startproject tutorial</code>\nDjango automatically created tutorial app inside tutorial project.I didn't want tutorial app so I deleted it, and now when I start development server here's the error:</p>\n\n<pre><code> raise ImportError(\"Could not import settings '%s' (Is it on sys.path?): %s\" % (self.SETTINGS_MODULE, e))\nImportError: Could not import settings 'tutorial.settings' (Is it on sys.path?): No module named tutorial.settings\n</code></pre>\n\n<p>Problem 2:\nI used to have one central settings file in root dir of a project(1.3), but it seems now that django doesn't even look at it if I have another app created.For example, In the previous problem, if I don't delete tutorial app, django will only look in settings file of that app and complain if I don't set database info there before start development server.If that is the case, what if I have 3 apps, do I need really for each of them to populate separate settings file with database info?</p>\n"},{"tags":["database","django","postgresql","heroku"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13033518,"title":"Cannot write to pgsql database in heroku","body":"<p>I'm getting 500 status errors and my heroku app has just recovered from their downtime. I'm not sure if this is due to a problem with their database availability or something I need to fix. Referred to this and tried checking the open transactions. Results are below but I'm not sure what to make of it.</p>\n\n<pre><code>heroku pg:psql\n\nselect * from pg_locks;   \n\n   locktype  | database | relation | page | tuple | virtualxid | transactionid | classid | objid | objsubid | virtualtransaction |  pid  |      mode       | granted \n    ------------+----------+----------+------+-------+------------+---------------+---------+-------+----------+--------------------+-------+-----------------+---------\n     virtualxid |          |          |      |       | 139/1473   |               |         |       |          | 139/1473           | 11115 | ExclusiveLock   | t\n     virtualxid |          |          |      |       | 1/1        |               |         |       |          | 1/0                |     7 | ExclusiveLock   | t\n     relation   |  5232883 |    11000 |      |       |            |               |         |       |          | 139/1473           | 11115 | AccessShareLock | t\n    (3 rows)\n</code></pre>\n\n<p><a href=\"http://stackoverflow.com/questions/1651219/how-to-check-for-pending-operations-in-a-postgresql-transaction\">How to check for pending operations in a PostgreSQL transaction</a></p>\n"},{"tags":["django","manager","subclassing","queryset","geo"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":167,"score":0,"question_id":7035989,"title":"Geo Django Subclassing Queryset","body":"<p>I'm using GeoDjango to search for a bunch of locations of different types.  For example, both House and Appartment models are subclasses of Location.  </p>\n\n<p>Using the Subclassing Queryset below, I'm able to do something like Location.objects.all() and have it return to me <code>[&lt;House: myhouse&gt;, &lt;House: yourhouse&gt;, &lt;Appartment: myappartment&gt;]</code>, which is my desire.  </p>\n\n<p>However, I also want to determine the distance to each location.  Normally, without the Subclassing Queryset, the code from Exhibit 2 returns for me the distances from the given point to each location.... <code>[ (&lt;Location: Location object&gt;, Distance(m=866.092847284))]</code></p>\n\n<p>However, if I try to find the distances using the Subclassing Querysets, I get an error such as: </p>\n\n<p><strong>AttributeError: 'House' object has no attribute 'distance'</strong></p>\n\n<p>Do you know how I can preserve the ability return a queryset of subclassed objects yet have the distance property available on the subclass objects?   Any advice is much appreciated.</p>\n\n<p>Exhibit 1: </p>\n\n<pre><code>class SubclassingQuerySet(models.query.GeoQuerySet):\n    def __getitem__(self, k):\n        result = super(SubclassingQuerySet, self).__getitem__(k)\n        if isinstance(result, models.Model) :\n            return result.as_leaf_class()\n        else :\n            return result\n    def __iter__(self):\n        for item in super(SubclassingQuerySet, self).__iter__():\n            yield item.as_leaf_class()\n\nclass LocationManager(models.GeoManager):\n    def get_query_set(self):\n        return SubclassingQuerySet(self.model)\n\nclass Location(models.Model):\n    content_type = models.ForeignKey(ContentType,editable=False,null=True)\n    objects = LocationManager()\n\nclass House(Location):\n    address = models.CharField(max_length=255, blank=True, null=True)\n    objects = LocationManager()\n\nclass Appartment(Location):\n    address = models.CharField(max_length=255, blank=True, null=True)\n    unit = models.CharField(max_length=255, blank=True, null=True)\n    objects = LocationManager()\n</code></pre>\n\n<p>Exhibit 2: </p>\n\n<pre><code>from django.contrib.gis.measure import D \nfrom django.contrib.gis.geos import fromstr\nref_pnt =  fromstr('POINT(-87.627778 41.881944)')\n\nlocation_objs = Location.objects.filter(\n        point__distance_lte=(ref_pnt, D(m=1000) \n              )).distance(ref_pnt).order_by('distance')\n[ (l, l.distance) for l in location_objs.distance(ref_pnt) ]   # &lt;--- errors out here\n</code></pre>\n"},{"tags":["django","save","modelform"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":2505,"score":2,"question_id":661521,"title":"Save modelForm to update existing record","body":"<p>I create a modelForm with instance to existing model (Book). I am not able to update the Books record. Adding a new record is fine but when I attempt to update, it appears to be unable to find the publisher (which is a foreign key). Error is \"No Publisher matches the given query.\"</p>\n\n<h1>models.py</h1>\n\n<p>class Publisher(models.Model):</p>\n\n<pre><code>name = models.CharField(max_length=30)\n\naddress = models.CharField(max_length=50)\n\ncity = models.CharField(max_length=60)\n\nstate_province = models.CharField(max_length=30)\n\ncountry = models.CharField(max_length=50)\n\nwebsite = models.URLField()\n\ndef __unicode__(self):\n    return self.name\n\nclass Meta:\n\n    ordering = [\"name\"]\n</code></pre>\n\n<p>class Author(models.Model):</p>\n\n<pre><code>first_name = models.CharField(max_length=30)\n\nlast_name = models.CharField(max_length=40)\n\nemail = models.EmailField(blank=True, verbose_name='e-mail')\n\nobjects = models.Manager()\n\nsel_objects=AuthorManager()\n\ndef __unicode__(self):\n\nreturn self.first_name+' '+ self.last_name\n</code></pre>\n\n<p>class Book(models.Model):</p>\n\n<pre><code>title = models.CharField(max_length=100)\n\nauthors = models.ManyToManyField(Author)\n\npublisher = models.ForeignKey(Publisher)\n\npublication_date = models.DateField(blank=True, null=True)\n\nnum_pages = models.IntegerField(blank=True, null=True)\n</code></pre>\n\n<p>class BookForm(ModelForm):</p>\n\n<pre><code>class Meta:\n\n    model = Book\n</code></pre>\n\n<h1>views.py</h1>\n\n<p>def authorcontactupd(request,id):</p>\n\n<pre><code>if request.method == 'POST':\n\n    a=Author.objects.get(pk=int(id))\n\n    form = AuthorForm(request.POST, instance=a)\n\n    if form.is_valid():\n\n        form.save()\n\n        return HttpResponseRedirect('/contact/created')\n\nelse:\n\n    a=Author.objects.get(pk=int(id))\n\n    form = AuthorForm(instance=a)\n\nreturn render_to_response('author_form.html', {'form': form})\n</code></pre>\n\n<h1>error msg</h1>\n\n<p>Page not found (404)\nRequest Method:     POST\nRequest URL:    <a href=\"http://127.0.0.1:8000/books/bookupd/\" rel=\"nofollow\">http://127.0.0.1:8000/books/bookupd/</a></p>\n\n<p>No Publisher matches the given query.</p>\n\n<p>You're seeing this error because you have DEBUG = True in your Django settings file. Change that to False, and Django will display a standard 404 page.</p>\n\n<h1>urls.py</h1>\n\n<p>from django.conf.urls.defaults import *</p>\n\n<p>from django.views.generic.simple import direct_to_template</p>\n\n<p>from mysite10.books.views import about_pages, books_by_publisher, authorcontact,bookcontact, booklisting, authorcontactupd</p>\n\n<p>from django.views.generic import list_detail</p>\n\n<p>from mysite10.books.models import Publisher, Book</p>\n\n<p>from django.contrib import admin</p>\n\n<p>admin.autodiscover()</p>\n\n<p>def get_books():</p>\n\n<pre><code>return Book.objects.all()\n</code></pre>\n\n<p>publisher_info = {</p>\n\n<pre><code>'queryset': Publisher.objects.all(),\n\n'template_name':'books/publisher_publisher_list_page.html',\n\n'template_object_name': 'publisher',\n\n'extra_context': {'book_list': Book.objects.all},\n</code></pre>\n\n<p>}</p>\n\n<p>book_info = {    </p>\n\n<pre><code>'queryset': Book.objects.order_by('-publication_date'),\n\n'template_name':'books/publisher_publisher_list_page.html',\n\n'template_object_name': 'book',\n\n'extra_context': {'publisher_list': Publisher.objects.all},\n</code></pre>\n\n<p>}</p>\n\n<p>oreilly_books = {</p>\n\n<pre><code>'queryset': Book.objects.filter(publisher__name=\"O'Reilly\"),\n\n'template_name':'books/publisher_publisher_list_page.html',\n\n'template_object_name': 'book',\n\n'extra_context': {'publisher_list': Publisher.objects.all},\n</code></pre>\n\n<p>}</p>\n\n<p>urlpatterns = patterns('',</p>\n\n<pre><code>(r'^admin/(.*)', admin.site.root),\n\n(r'^polls/', include('mysite10.polls.urls')),\n\n(r'^search-form/$', 'mysite10.views.search_form'),\n\n(r'^search/$', 'mysite10.views.search'),\n\n(r'^contact/$', 'mysite10.contact.views.contact'),\n\n(r'^contact/thanks2/(\\d+)$', 'mysite10.contact.views.thanks2'),\n\n(r'^contact/thanks/$', 'mysite10.contact.views.thanks'),\n\n(r'^publishers/$', list_detail.object_list, publisher_info),\n\n(r'^books/$', list_detail.object_list, book_info),\n\n(r'^books/oreilly/$', list_detail.object_list, oreilly_books),\n\n(r'^books/(\\w+)/$', books_by_publisher),\n\n(r'^author/$', authorcontact),\n\n(r'^authorupd/(\\d+)/$', authorcontactupd),\n\n(r'^contact/created/$', 'mysite10.books.views.created'),\n\n(r'^bookform/$', bookcontact),\n\n(r'^contact/bookscreated/$', 'mysite10.books.views.books_created'),\n\n(r'^booklist/$', 'mysite10.books.views.booklisting'),\n\n(r'^books/bookupd/(\\d+)$', 'mysite10.books.views.book_upd'),\n</code></pre>\n\n<p>)</p>\n\n<h1>-------------------------------------------------</h1>\n\n<p>I finally got it working with below codes. \nerror in urls.py because of missing forward slash before $. \nAmended to (r'^books/bookupd/(\\d+)/$'</p>\n\n<h1>views.py</h1>\n\n<p>def book_upd(request,id):</p>\n\n<pre><code>if request.method == 'POST':\n\n    a=Book.objects.get(pk=int(id))\n\n    form = BookForm(request.POST, instance=a)\n\n    if form.is_valid():\n\n        form.save()\n\n        return HttpResponseRedirect('/contact/bookscreated')\nelse:\n\n    a=Book.objects.get(pk=int(id))\n\n    form = BookForm(instance=a)\n\nreturn render_to_response('book_form.html', {'form': form})\n</code></pre>\n\n<h1>urls.py</h1>\n\n<p>(r'^books/bookupd/(\\d+)/$', 'mysite10.books.views.book_upd'),</p>\n"},{"tags":["django","extjs"],"answer_count":1,"favorite_count":4,"up_vote_count":3,"down_vote_count":0,"view_count":4665,"score":3,"question_id":2089892,"title":"django + ExtJs - list of example implementations with source code","body":"<p>I want to learn ExtJs <a href=\"http://www.extjs.com/\" rel=\"nofollow\">http://www.extjs.com/</a> in combination with Django (I know Django already .. a bit ;-) and I'm on the search of examples I can learn from.</p>\n\n<p>I found already this post. Would be great if you post your links to examples here. Maybe we get a nice list of examplary implementations that help users to start with django + ExtJs.</p>\n\n<p><a href=\"http://www.extjs.com/learn/Tutorial%3aUsing_Django_Poll_Tutorial_with_Ext\" rel=\"nofollow\">Ext js Poll Tutorial</a></p>\n\n<p><a href=\"http://code.google.com/p/appfusedjango/\" rel=\"nofollow\">Ext js vs. Jquery</a></p>\n\n<p>\"Show how you can use extjs to display a table and how to use jqgrid 3.2 to get the same as in extjs. Incluses extjs and jqgird libraries. I have had to patch jqgrid adding\"</p>\n\n<p><a href=\"http://www.mattdorn.com/content/restful-web-apps-with-django-piston-and-ext-js/\" rel=\"nofollow\">RESTful Web apps with Django, Piston and Ext JS</a></p>\n\n<p><a href=\"http://github.com/revolunet/django-extjs\" rel=\"nofollow\">Convert your forms.Form and forms.ModelForm to extjs and handles the form submission like any django form.</a></p>\n"},{"tags":["python","django"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":60,"score":-3,"question_id":13032220,"title":"How to validate a form all fields without knowing field names in html","body":"<p>I want to validate a form where any field should not be blank. I don't know the name of the fields. The code is:</p>\n\n<pre><code> &lt;form action=\"/addproductgroupinsert_fun/\" method=\"post\" name=\"SForm\" onsubmit=\"return validateForm()\"&gt;\n    {% for id in ProductTypefeatureentryList %}\n       &lt;label for=\"{{id.Name}}\"&gt;{{id.Name}}&lt;/label&gt;\n       &lt;input id=\"{{id.Name}}\" type=\"text\"name=\"{{id.Name}}\" /&gt;\n    {% endfor %}\n</code></pre>\n\n<p>How can do this?</p>\n"},{"tags":["python","django","django-socialauth"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13018147,"title":"AuthAlreadyAssociated Exception in Django Social Auth","body":"<p>I am trying out Django Social Auth.</p>\n\n<p>After I create a user using say Facebook(let's say fbuser) or Google(googleuser). If I create another user  through the normal django admin(normaluser), and try logging again using Facebook or Google while third user(normaluser) is logged in, it throws an error exception AuthAlreadyAssociated.</p>\n\n<ol>\n<li><p>Ideally it should throw an error called you are already logged in as\nuser normaluser.</p></li>\n<li><p>Or it should log out normal user, and try associating with the\naccount which is already associated with FB or Google, as the case\nmay be.</p></li>\n</ol>\n\n<p>How do I implement one of these two above features. All advise welcome.</p>\n\n<p>Also when I try customizing SOCIAL_AUTH_PIPELINE, it is not possible to login with FB or Google, and it forces the login URL /accounts/login/</p>\n\n<p>Thanks</p>\n"},{"tags":["python","django","django-models","django-mptt","mptt"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":43,"score":0,"question_id":13032629,"title":"Django MPTT : Filter by depth?","body":"<p>I would like to know a thing about django-mptt, as I'm considering using it for a engineering coordination project.</p>\n\n<p>I would have a Model class (say, 'Interface'), with a ForeignKey to the Model (say, 'Location') in the Tree.</p>\n\n<p>Will I be able to filter Interfaces by the depth of the Location they refer to ? The depth being the number of parents.</p>\n\n<p>I don't know yet how to organize my data, this is why I'm asking. I'm considering using django-mptt (opposed to Models created by a loop at deployment time, each Model corresponding to a tree level), but I am scared that it would block me at a point and force me to review my whole project.</p>\n"},{"tags":["python","django","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13030012,"title":"Django: how to create object with Tastypie","body":"<p>I have a threaded mptt comments model to use with my BlogItem model:</p>\n\n<pre><code>class MyComment(MPTTModel, Comment):\n    parent = TreeForeignKey('self', null=True, blank=True, related_name='children')\n    class MPTTMeta:\n        order_insertion_by=['-submit_date']\n    class Meta:\n        ordering=['tree_id','lft']\n</code></pre>\n\n<p>For tastypie i made Resource</p>\n\n<pre><code>class MyCommentResource(ModelResource):\n\n    # i tried to use this commented strings (and of course i created related resources)\n    #comment = fields.ForeignKey(CommentRosource, 'comment', null=True, full=True)\n    #site = fields.ForeignKey(SiteResource, 'site', null=True, full=True)\n    #content_type = fields.ForeignKey(ContentTypeResource, 'content_type', null=True, full=True)\n    #children = fields.ToManyField('self', 'children', null=True, full=True)\n    #content_object = GenericForeignKeyField({BlogItem: BlogItemResource}, 'content_object', null=True, full=True)\n\n    class Meta:\n        queryset = MyComment.objects.filter(level=0)\n        resource_name = 'myComment'\n        include_resource_uri = False\n        allowed_methods = ['get', 'post', 'put']\n        include_resource_uri = False\n        filtering = {\n            'object_pk': ALL,\n            'level': ALL\n        }\n        authorization= Authorization()\n</code></pre>\n\n<p>After that i have working api for GET requests fo MyComment model (i can see all comments (commenter's name, comment text, mptt level, pagination etc)</p>\n\n<p>But when i try to make curl (or js) erquest:</p>\n\n<pre><code>curl --dump-header - -H \"Content-Type: application/json\" -X POST --data '{\"comment\":\"sdfsdfsdf\"}' http://myhostname.com:80/api/v1/myComment/ &gt; /tmp/err.html\n</code></pre>\n\n<p>I get error \"current transaction is aborted, commands ignored until end of transaction block\" or other errors (\"DoesNotExist at /api/v1/myComment/ No exception supplied\", \"Cannot assign None: \"MyComment.content_type\" does not allow null values.\" - but in request i POST {\"content_type\":{\"id\":\"15\"}} or link to content_type in my api that also works great).</p>\n\n<p>For other, more simpler models (without generic relation, but with ForeignKeys) i can make curl requests and get \"201 created\" response, so i think i have error related to \"generic\" comments model</p>\n\n<p>I'm doing wrong? Is there any docs or manuals - how to create object for \"generic\" model via tastypie?</p>\n"},{"tags":["django","url","django-templates","django-views","production-environment"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13031105,"title":"Django reverse URL breaks in production","body":"<p>I'm running into <code>Reverse for 'home' with arguments '()' and keyword arguments '{}' not found.</code> This occurs for a view that takes no arguments, and is named, with and without quotation marks in the template. It only happens on my production server, not my dev environment. Both run Django 1.4.</p>\n\n<p>I have the following entry for an argument-less view in my top level <code>urls.py</code>.</p>\n\n<pre><code>url(r'^course_catalog/', include('course_catalog.urls')),\n</code></pre>\n\n<p>In <code>course_catalog/urls.py</code>:</p>\n\n<pre><code>urlpatterns = patterns('course_catalog.views',\n    url(r'^$', 'index', name=\"home\"),\n    ...\n</code></pre>\n\n<p>I also have the following in a couple of templates</p>\n\n<pre><code>&lt;a href=\"{% url home %}\"&gt;\n</code></pre>\n\n<p>I've also tried this in the <code>manage.py</code> shell:</p>\n\n<pre><code>&gt;&gt;&gt; from django.core.urlresolvers import reverse\n&gt;&gt;&gt; reverse('home')\n'/course_catalog/'\n</code></pre>\n\n<p>So it seems to only happen when the template is served or something. \nThe view itself works, by the way, if I navigate to the URL.</p>\n\n<p>I don't really know where to look at this point.</p>\n\n<p>Any idea what could be causing this to happen? Thanks!</p>\n"},{"tags":["django","django-admin","django-urls"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":12884343,"title":"NoReverseMatch at /, u'opts|admin_urlname' is not a registered namespace Django 1.4.1","body":"<p>Django newbie here.  Following the <a href=\"https://docs.djangoproject.com/en/dev/ref/contrib/admin/#reversing-admin-urls\" rel=\"nofollow\">documentation</a>, I am trying the following to get a link to the admin site from the homepage of the public site I'm building:</p>\n\n<pre><code>{% load admin_urls %}\n&lt;p&gt;Go to the &lt;a href=\"{% url opts|admin_urlname:'add' %}\"&gt;admin&lt;/a&gt;.&lt;/p&gt;\n</code></pre>\n\n<p>I am getting the error:  </p>\n\n<pre><code>NoReverseMatch at /\nu'opts|admin_urlname' is not a registered namespace\n</code></pre>\n\n<p>I am including the URLs properly:</p>\n\n<pre><code>    url(r'^admin/', include(admin.site.urls)),\n</code></pre>\n\n<p>My <a href=\"http://stackoverflow.com/questions/9874192/admin-is-not-a-registered-namespace-in-django-1-4\">template loaders are in the right order</a>.</p>\n\n<p>I've tried a few different variations on this, and they all throw namespace errors.</p>\n\n<p>Any ideas?  Thanks!</p>\n"},{"tags":["python","django","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13028906,"title":"Can't do post with curl and ApiKeyAuthentication in tastypie","body":"<p>I am using tastyPie 0.9.11 to create a RESTful API.</p>\n\n<p>I got the API working ok, but then when I added APIKeyAuthentication I couldn't get the POST request to work.</p>\n\n<p>I have set authentication/authorization in my resource meta as:</p>\n\n<pre><code>authentication = ApiKeyAuthentication()\nauthorization= Authorization()\n</code></pre>\n\n<p>and I have manually added an API key in the admin site for user admin, with key 1234567890.</p>\n\n<p>When I do a GET it works ok (http://127.0.0.1:8000/api/v1/application/?format=json&amp;username=admin&amp;api_key=1234567890 )</p>\n\n<p>However when I try to do a POST using curl:</p>\n\n<pre><code>curl --dump-header - -H \"Authorization: ApiKey admin:1234567890\" -H \"Content-Type: application/json\" -X POST --data '{\"user\": \"/api/v1/user/1/\", \"title\":\"api test application\"}' http://localhost:8000/api/v1/application/\n</code></pre>\n\n<p>I get a 401 not authorized error. </p>\n\n<p>I am following the documentation by adding the Authorization header, but maybe there is something else I am doing wrong?</p>\n"},{"tags":["django","models","mptt"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13018042,"title":"Django model inheritance using mptt","body":"<p>I'm bulding a model with nested tree classification. A vocabulary <code>Entity</code> is inherited from an abstract base class <code>TreeVocabulary</code>. There is also a class <code>SpecialEntity</code>, which inherits from <code>Entity</code>. In <code>SpecialEntity</code> there should be few additional fields.</p>\n\n<p><code>Entity</code> and <code>SpecialEntity</code> should both be trees, for which I use mptt <a href=\"http://django-mptt.github.com/django-mptt/\" rel=\"nofollow\">http://django-mptt.github.com/django-mptt/</a>. In <code>Entity</code> there should be a record, which has children in the <code>SpecialEntity</code> (those children are root elements in the <code>SpecialEntity</code>).</p>\n\n<p>This is how i imagine this:</p>\n\n<pre><code>class Vocabulary(models.Model):\n    name= models.CharField(max_length=300)\n    order= models.IntegerField(default=100)\n    class Meta:\n        abstract= True\n\nclass SpecialType(Vocabulary):\n\nclass TreeVocabulary(MPTTModel):\n    parent= TreeForeignKey('self', null=True, blank=True,\n        related_name='children', limit_choices_to=Q(parent__isnull=True))\n    class MPTTMeta:\n        order_insertion_by= ('name',)\n    class Meta:\n        abstract= True\n\nclass Entity(TreeVocabulary):\n\nclass SpecialEntity(Entity):\n    code= models.CharField(max_length=50)\n    type= models.ForeignKey(SpecialType)\n    class Meta:\n        ordering= ('code',)\n</code></pre>\n\n<p>Now, the problem is that for some reason <code>SpecialEntity</code> escapes mptt: <code>sqlall</code> shows a plain table without <code>parent_id</code> in it. Although it's present in <code>Entity</code>, which directly inherits from <code>TreeVocabulary</code>.</p>\n\n<p>Is it a bug in django-mptt? Or maybe it is a bad design?\nI'm not asking to design it for me, but rather to point in the right direction</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["python","django","json","model","dumps"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13031058,"title":"How to serialize to json a list of model objects in django/python","body":"<p>I am trying to serialize a list of model object defined as:</p>\n\n<pre><code>class AnalysisInput(models.Model):\n    input_user = models.CharField(max_length=45)\n    input_title = models.CharField(max_length=45)\n    input_date = models.DateTimeField()\n    input_link = models.CharField(max_length=100)\n</code></pre>\n\n<p>I wrote a custom serializer (encoder) for json.dumps():</p>\n\n<pre><code>class AnalysisInputEncoder(json.JSONEncoder):\n    def default(self, obj):\n        if isinstance(obj, AnalysisInput):\n            return { \"input_id\" : obj.id,\n                    \"input_user\" : obj.input_user,\n                    \"input_title\" : obj.input_title,\n                    \"input_date\" : obj.input_date.isoformat(),\n                    \"input_link\" : obj.input_link }\n        return json.JSONEncoder.default(self, obj)\n</code></pre>\n\n<p>When I serialize only one object, I am able to do it. When I try to serialize a list of object I get</p>\n\n<pre><code>[ objects..] is not JSON serializable\n</code></pre>\n\n<p>I searched but I didn't find where to work on.. I was thinking about writing a custom serializer also for list of model object..</p>\n\n<p>Thanks</p>\n"},{"tags":["python","django","mongodb","django-models","django-nonrel"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13024361,"title":"Django-Nonrel(mongo-backend):Model instance modification tracking","body":"<p>I am using Django non-rel version with mongodb backends. I am interested in tracking the changes that occur on model instances e.g if someone creates/edits or deletes a model instance. Backend db is mongo hence models have an associated \"_id\" fields with them in the respective collections/dbs.</p>\n\n<p>Now i want to extract this \"_id\" field on which this modif operation took place. The idea is to write this \"_id\" field to another db so someone can pick it up from there and know what object was updated.</p>\n\n<p>I thought about overriding the <strong>save()</strong> method from Django <strong>\"models.Model\"</strong> since all my models are derived from that. However the mongo \"_id\" field is obviously not present there since the mongo-insert has not taken place yet. </p>\n\n<p>Is there any possibility of a pseudo <strong>post-save()</strong> method that can be called after the save operation has taken place into mongo? Can django/django-toolbox/pymongo provide such a combination?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13030972,"title":"How do i have OneToOne relationship between any two fields of different models in Django?","body":"<pre><code>class HmsMedicine(models.Model):\n    id = models.IntegerField(primary_key=True)\n    medicine_name = models.CharField(max_length=100)\n    price = models.IntegerField(max_length=6)\n\nclass HmsBilling(models.Model):\n    id = models.IntegerField(primary_key=True)\n    regid = models.ForeignKey(HmsPatient, db_column='regid')\n    medicine = models.ForeignKey(HmsMedicine, db_column='medicine')\n    quantity = models.IntegerField()\n    rate = models.IntegerField()\n</code></pre>\n\n<p>I want to have the values of <code>price</code> field in the <code>rate</code> field.</p>\n"},{"tags":["django","django-forms","django-templates","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13029702,"title":"Django while deleting entry getting error local variable 'delete' referenced before assignment","body":"<p>Can someone explain and correct me on deleting entries?\nThanks in advacne</p>\n\n<pre><code> url(r'^remove/(?P&lt;id&gt;\\d+)/$', 'registration.views.removerequest'),\n\n\n &lt;a href = '/remove/{{ object.id }}/'&gt;remove&lt;/a&gt;\n\n #view\n\ndef removerequest(request,id):\n    if not request.user.is_authenticated(): \n        get_objects=Todos.objects.get(pk=id)\n        return HttpResponseRedirect('/remove/')\n    if request.method =='POST':\n        delete= get_objects.delete()\n        return HttpResponseRedirect('/profile/')\n    context = {'delete':delete}\n    return render_to_response('remove.html',context,context_instance=RequestContext(request))\n</code></pre>\n"},{"tags":["django","internationalization"],"answer_count":4,"favorite_count":9,"up_vote_count":13,"down_vote_count":0,"view_count":6429,"score":13,"question_id":2336785,"title":"set language within a django view","body":"<p><strong>background:</strong>\nThe view is called when a payment service pings back a payment outcome behind the scenes - afterwhich I need to send an email in the right language to confirm payment and so on. I can get the language code back in the request from the payment server and would like to use that along with Django's i18n systems to determine which language to send my email out in.</p>\n\n<p>So I need to set the language of my django app from within a view. And then do my template rendering and emailing all in one go.</p>\n\n<p>setting <code>request.session['django_language'] = lang</code> only effects the next view when I'm testing.</p>\n\n<p>Is there any other way to do it?</p>\n\n<p>Cheers,</p>\n\n<p>Guy</p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13027756,"title":"How to design function \"message was read\"?","body":"<p>How to design function \"message was read\" ?</p>\n\n<pre><code>class UserProfil(models.Model):\n    user = models.OneToOneField(User)\n    name = models.CharField(max_length=50)\n\nclass PrivateMessage(models.Model):\n    from_user = models.OneToOneField(User)\n    to_user = models.OneToOneField(User)\n    date = models.DateTimeField(auto_now_add=True)\n    content = models.TextField()\n</code></pre>\n"},{"tags":["django","import"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13006034,"title":"Import csv file data from django admin","body":"<p>I want to create the import the csv data into database.\nI add the import buttom on the my app. Override app/change_list. Button will be properly added. I want to add the action on click on that \"import\" button file will be uploaded on same template page. And the data will be saved.\nI refer the links</p>\n\n<p><a href=\"http://stackoverflow.com/questions/11519721/importing-data-into-django-from-csv-via-admin-interface?lq=1#comment15224902_11519795\">Importing data into django from CSV via admin interface</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/7583177/extending-django-admin-for-data-import\">Extending Django Admin for data import</a></p>\n\n<p>But i didn't understand the admin process. I want to open the file uploadd option on pop-up like the image_file upload.</p>\n"},{"tags":["django","session-timeout"],"answer_count":3,"favorite_count":9,"up_vote_count":5,"down_vote_count":1,"view_count":3923,"score":4,"question_id":644471,"title":"How do I determine when a user has an idle timeout in Django?","body":"<p>I would like to audit when a user has experienced an idle timeout in my Django application.  In other words, if the user's session cookie's expiration date exceeds the SESSION_COOKIE_AGE found in settings.py, the user is redirected to the login page.  When that occurs, an audit should also occur. By \"audit\", I mean a record should be written to my person.audit table.</p>\n\n<p>Currently, I have configured some middleware to capture these events.  Unfortunately, Django generates a new cookie when the user is redirected to the login page, so I cannot determine if the user was taken to the login page via an idle timeout or some other event.  </p>\n\n<p>From what I can tell, I would need to work with the \"django_session\" table.  However, the records in this table cannot be associated with that user because the sessionid value in the cookie is reset when the redirect occurs.</p>\n\n<p>I'm guessing I'm not the first to encounter this dilemma.  Does anyone have insight into how to resolve the problem?</p>\n"},{"tags":["python","django","django-templates","django-urls","django-template-tags"],"answer_count":2,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":1729,"score":8,"question_id":3057318,"title":"Passing variable urlname to url tag in django template","body":"<p>What I'd like to do (for a recent changes 'widget' - not a django widget in this case) is pass a urlname into my template as a variable, then use it like so: <code>{% url sitechangeobject.urlname %}</code> Where urlname is a string containing a valid name for a url.</p>\n\n<p>Is this possible? The template keeps breaking saying it can't find sitechangeobject.urlname as a name (which is quite right, it doesn't exist). Is there any way to make it look inside that variable?</p>\n\n<p>There are other ways to solve this problem if not, just thought I'd check though.</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","django","post"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":103,"score":1,"question_id":9951216,"title":"Posting data to another Site with Django","body":"<p>I would appreciate some help here.\nGoogle checkout has many ways to send it checkout data. I am using the XML server-to-server.\nI have everything ready and now I want to throw some xml at google. <strong>I have been doing some reading</strong> and I know of a couple of ways to do this, one with urllib, another with pyCurl, but I am using django over here and <strong>I searched</strong> the Django api for some way to POST data to another site and I havent fallen upon anything. I really would like to use the django way, if there is one because I feel it would be more fluid and right, but if you all don't know of any way I will probably use urllib.</p>\n"},{"tags":["python","django","buildout","zc.buildout"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13013018,"title":"Automating customisation of Django projects after '$ django-admin.py startproject my_project' with zc.buildout","body":"<p>I have skimmed the official <code>zc.buildout</code> documentation and some tuts but I haven't found a clear answer to the following question.</p>\n\n<p><strong>Suppose I wanted to automate the <em>following changes</em> in every Django project(Django1.4) from now on, can all of those changes get executed by merely by a <code>buildout.cfg</code> file?</strong></p>\n\n<p>After doing <code>$ django-admin.py startproject my_project</code>, example of <em>changes</em> of the default startproject I would implement:</p>\n\n<pre><code>$ mkdir ~/path/to/my_project/my_project/db\n</code></pre>\n\n<p><em>settings.py:</em></p>\n\n<pre><code>import os\nROOT_PATH = os.path.dirname(os.path.abspath(__file__))\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': os.path.join(ROOT_PATH, 'db/my_project.db'),                      \n        'USER': '',                     \n        'PASSWORD': '',                  \n        'HOST': '',                    \n        'PORT': '', \n    }\n}\n</code></pre>\n\n<p>I currently build and use my own customized distribution of the 1.4 branch of the Django source as a solution but it would be nice to know if I could do it using buildout as well.</p>\n"},{"tags":["django","django-paypal"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13013791,"title":"Django paypal ipn standard payer address","body":"<p>I am using the DCramer fork of django-paypal: <a href=\"https://github.com/dcramer/django-paypal\" rel=\"nofollow\">https://github.com/dcramer/django-paypal</a></p>\n\n<p>I am using IPN standard</p>\n\n<p>What I would like to do is get the payer (customer) address from the IPN. I can see from the paypal docs this info is sent with an IPN and from looking through django-paypal there are fields in the database to store this data.  However this data is not being stored in the paypal_ipn model provided by django-paypal.  I have also inspected the ipn_obj in the signals and all the fields for this data are blank there too.</p>\n\n<p>Can anyone shed any light on how I might be able to get the payer address?</p>\n\n<p>If it helps I'm using the signals from the example:</p>\n\n<pre><code>    #Paypal signals\n    from paypal.standard.ipn.signals import payment_was_successful\n    import datetime\n\n    #Signal for paypal confirmation\n    def show_me_the_money(sender, **kwargs):\n        ipn_obj = sender\n\n        # Undertake some action depending upon `ipn_obj`.\n\n    payment_was_successful.connect(show_me_the_money)\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>The dump of the ipn_obj suggested by scytale below produces this for the relevant fields:</p>\n\n<pre><code>    address_city\\t(&lt;type 'unicode'&gt;)\\t: \n    address_country\\t(&lt;type 'unicode'&gt;)\\t: \n    address_country_code\\t(&lt;type 'unicode'&gt;)\\t: \n    address_name\\t(&lt;type 'unicode'&gt;)\\t: \n    address_state\\t(&lt;type 'unicode'&gt;)\\t: \n    address_status\\t(&lt;type 'unicode'&gt;)\\t: \n    address_street\\t(&lt;type 'unicode'&gt;)\\t: \n    address_zip\\t(&lt;type 'unicode'&gt;)\\t:\n</code></pre>\n\n<p>There are loads of other fields too, if you need the data from those let me know and I'll paste them here.</p>\n"},{"tags":["django","sockets","websocket"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13029423,"title":"'NoneType' object has no attribute 'get_server_msg', Socketio (chat with Django)","body":"<p>I'm new with django and I try to implement a chat, using socketio. I used ://github.com/stephenmcd/django-socketio and I followed this tutorial: <a href=\"http://codysoyland.com/2011/feb/6/evented-django-part-one-socketio-and-gevent/\" rel=\"nofollow\">http://codysoyland.com/2011/feb/6/evented-django-part-one-socketio-and-gevent/</a></p>\n\n<p>The example works well. Now I would like to integrate this chat inside the templates of my django app. I didn't find any tutorial about that.</p>\n\n<p>So I tried to take the example, I put the html inside my template and I used the .py inside my view.</p>\n\n<p>So here is the part of my views.py that is creating the problem:</p>\n\n<pre><code>buffer = []\nsocketio = request.environ['socketio']\nif socketio.on_connect():\n    socketio.send({'buffer': buffer})\n    socketio.broadcast({'announcement': socketio.session.session_id + ' connected'})\n\nwhile True:\n    message = socketio.recv()\n\n    if len(message) == 1:\n        message = message[0]\n        message = {'message': [socketio.session.session_id, message]}\n        buffer.append(message)\n        if len(buffer) &gt; 15:\n            del buffer[0]\n        socketio.broadcast(message)\n    else:\n        if not socketio.connected():\n            socketio.broadcast({'announcement': socketio.session.session_id + '  disconnected'})\n            break\n</code></pre>\n\n<p>But when I go to my page I get this error message:</p>\n\n<p>'NoneType' object has no attribute 'get_server_msg'</p>\n\n<pre><code>   Exception Type:  AttributeError\n   Exception Value:'NoneType' object has no attribute 'get_server_msg'\n   Exception Location:  /Users/marc-antoinelacroix/virtualenv/lib/python2.7/site- packages/socketio/protocol.py in recv, line 41\n</code></pre>\n\n<p>Do you have any idea on how to fix that?\nThank you,</p>\n"},{"tags":["python","django","django-forms","django-comments"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12837060,"title":"Django comment email notification","body":"<p>I'm trying to setup notifications on the django comments framework. I've gone through the documentation here - </p>\n\n<p><a href=\"https://docs.djangoproject.com/en/dev/ref/contrib/comments/moderation/#django.contrib.comments.moderation.CommentModerator\" rel=\"nofollow\">https://docs.djangoproject.com/en/dev/ref/contrib/comments/moderation/#django.contrib.comments.moderation.CommentModerator</a></p>\n\n<p>I've added all of the code into my noticeboard app which is where the comments are currently being posted. When posting a comment to the site it works fine. However when i click the 'enable comments' field which is meant to allow the notifications, i'm not receiving any emails.</p>\n\n<p>**UPDATE:</p>\n\n<p>Just to add the site has a built in mailer so it records all emails being sent out from the website and it's not picked up any of the comments. If i also untick the 'enable comments' box I get an error message like so - comment_will_be_posted receiver 'pre_save_moderation' killed the comment</p>\n\n<p>So i know the functionality is working ok.</p>\n\n<p>Here is the code I've got so far:</p>\n\n<p>//SNIPPET OF MODELS</p>\n\n<pre><code>from django.contrib.comments.moderation import CommentModerator, moderator\n\nclass Notice(models.Model):\n    class Meta:\n        ordering = ['-date']\n\n    content_type = 'noticeboard'\n\n    title = models.CharField(max_length=255)\n    sector = models.ForeignKey(BusinessSector, verbose_name=\"Sector\", related_name='notices')\n    date = models.DateTimeField(auto_now_add=True, verbose_name=\"Date posted\")\n    copy = models.TextField()\n    owner = models.ForeignKey('auth.User', related_name='notices')\n\n    owner_company = models.ForeignKey('directory.Company', verbose_name='Company')\n    enable_comment = models.BooleanField()\n\nclass EntryModerator(CommentModerator):\n    email_notification = True\n    enable_field = 'enable_comment'\n\nmoderator.register(Notice, EntryModerator)\n</code></pre>\n\n<p>I've also uploaded the file 'comment_notification_email.txt' into templates/contact.</p>\n\n<p>The above code has been included into an exisiting app called noticeboard as this is where the comments are being posted.</p>\n\n<p>Feel free to ask any questions if you think something would be of use to you.</p>\n\n<p>Am I missed anything!?</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","django","apache","python-2.7","mod-wsgi"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13029012,"title":"Touching django wsgi file to reload doesn't work well","body":"<p>Touching django wsgi file doesn't reload.</p>\n\n<p>so I restart apache to reflect changes instead of touch wsgi file.</p>\n\n<p>below is version of each software.</p>\n\n<pre><code>Apache/2.2.3 (CentOS) mod_wsgi/3.3 Python/2.7.1 Django/1.4\n</code></pre>\n\n<p>But Django/1.3.1 is work as well.</p>\n\n<p>Is there any conflict with Django/1.4 among these?</p>\n\n<p>any suggestions would be appreciated.</p>\n"},{"tags":["django","django-admin","django-1.4","django-grappelli","django-admin-filters"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":13015139,"title":"Filter by many2many (or foreignkey) that has a LOT of values, in django admin (grappelli or not)","body":"<p>I have two models:</p>\n\n<pre><code>class TheMainThing(models.Model):\n    ... some fields ...\n    type = ManyToManyField('Type')\n\nclass Type(models.Model):\n    ...more fields...\n</code></pre>\n\n<p>I would like to enable filtering <code>TheMainThings</code> in the admin by <code>Types</code>. The only Issue is that there are like 100k or more of the <code>Type</code> objects, so it isn't practical doing it with standard built-in filters. That's because all the <code>Types</code> get loaded in browser as an available option. (Actually, I'm using Grappelli, but I believe it's the same with standard Django admin).</p>\n\n<p>It there a *don't_reinvent_the_wheel* approach to this problem?</p>\n\n<p>I like Grappelli's autocomplete widget on raw_id fields, I imagine something like that would be ideal for this problem... It there such a thing?</p>\n\n<p><strong>edit:</strong><br>\nTo clarify - the main problem is load time and memory consumption in browser, not the presentation.</p>\n"},{"tags":["python","django","django-queryset"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":45,"score":0,"question_id":13027880,"title":"Date queries in django","body":"<p>I've got a model with two datefields, start_date and end_date</p>\n\n<p>I wish to query this model to get all model instances that range between two given dates. I also want models overlapping this range.</p>\n\n<p>Those two given dates are the start date of a month and the end date.</p>\n\n<p>I've tried doing something like:</p>\n\n<pre><code>Model.objects.filter(Q(start_date__range=[start_range, end_range])|Q(end_date__range=[start_range, end_range])) \n</code></pre>\n\n<p>But this fails if the start_date and end_date lay more the one month apart.</p>\n"},{"tags":["django","api","curl","http-post","django-piston"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":122,"score":0,"question_id":13010400,"title":"Using \"Content-Type:application/json\" to post in curl gives HTTP/1.1 400 BAD REQUEST","body":"<p>When I make a post request using the following </p>\n\n<pre><code>curl -i -d \"username=rock&amp;password=rock\" http://my_VM_IP/api/1.1/json/my_login/\n</code></pre>\n\n<p>it generates the required response generating a token like this(abridged):</p>\n\n<pre><code>HTTP/1.1 200 OK\nDate: Mon, 22 Oct 2012 08:37:39 GMT\nVary: Authorization,Accept-Language,Cookie,Accept-Encoding\nContent-Type: text/plain\nTransfer-Encoding: chunked\nOK{\"success\": {\"my_token\": \"required_token\"}}\n</code></pre>\n\n<p>But when I try the same including a header as:</p>\n\n<pre><code>curl -i -H \"Content-Type:application/json\" -d \"username=rock&amp;password=rock\" http://my_VM_IP/api/1.1/json/my_login/ \n</code></pre>\n\n<p>it gives me the following error:</p>\n\n<pre><code>HTTP/1.1 400 BAD REQUEST\nDate: Mon, 22 Oct 2012 11:12:04 GMT\nVary: Authorization,Accept-Language,Cookie,Accept-Encoding\n***Content-Type: text/plain***\nContent-Language: en-us\nConnection: close\nTransfer-Encoding: chunked\nBad Request\n</code></pre>\n\n<p>I dont understand why this happens. And also <strong><em>why does the content-Type show text/plain</em></strong>, I also tried looking at some other questions like <a href=\"http://stackoverflow.com/questions/11724547/why-setting-post-content-typeapplication-json-causes-a-bad-request-on-rest?rq=1\">Why Setting POST Content-type:&quot;Application/Json&quot; causes a &quot;Bad Request&quot; on REST WebService?</a> . It also addresses the same problem I have. Following the answer in that I tried giving the data in various formats as </p>\n\n<pre><code>{\"username\":\"rock\", \"password\":\"rock\"} \n</code></pre>\n\n<p>but without success. Thanks in advance.</p>\n"},{"tags":["django","django-authentication"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13026943,"title":"limit some users to only one page in Django","body":"<p>I want to know how do i limit the access of specific users to only one page once they're logged in.</p>\n\n<p>I have in my User model</p>\n\n<pre><code>deactivated = models.BooleanField(default=False)\n</code></pre>\n\n<p>If the user is logged in and their account is deactivated I want to only show them a deactivation page. I don't want to allow them to go anywhere else on the website unless they activate their account again.\nWhat's the best and the most simple way to implement that?</p>\n\n<p><strong>EDIT:</strong> I can't afford going through every view I have and attach a decorator to it.</p>\n"},{"tags":["django","django-templates"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":98,"score":1,"question_id":13002919,"title":"django regroup and than dictsort by list length","body":"<p>I need to regroup a list, than to show the results ordered by the number of items per result's list.</p>\n\n<p>something like this:</p>\n\n<pre><code>{%  regroup car_models by make as car_models_by_make %}\n\n{% for make in car_models_by_make|dictsort:\"???\" --&gt; the problem %}\n    {{ make.grouper }}  ({{ make.list|length }}) &lt;br&gt;\n{% endfor %}\n</code></pre>\n\n<p>so if the data is:</p>\n\n<pre><code>[\n('panda','fiat'),\n('500','fiat'),\n('focus','ford')\n]\n</code></pre>\n\n<p>the result should be:</p>\n\n<pre><code>fiat 2\nford 1\n</code></pre>\n\n<p>I tried: dictsort:\"make.list.count\",\"make.list.length\",\"make.list|length\" .. none did the work..</p>\n"},{"tags":["django","python-2.7","mod-wsgi","elastic-beanstalk"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13027848,"title":"Django running under python 2.7 on AWS Elastic Beanstalk","body":"<p>According to the docs, AWS Elastic Beanstalk supports Python 2.6. I wonder if anyone has set up a custom AMI using the EBS backed 64 bit Linux AMI to run django under Python 2.7 on the beanstalk? While most aspects of a set up under 2.7 will probably be straightforward using virtualenv or changing the symlinks, I'm worried about the amazon build of mod_wsgi. I understand that depending on how mod_wsgi has been compiled there may be issues with running it in combination with Python 2.7. I also wonder if there will be any postgreSQL issues...</p>\n"},{"tags":["django","mailchimp"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12839902,"title":"Dynamically creating campaign using template id using mailsnake in django","body":"<p>I dynamically create campaign from my website using mailsnake in django framework. Want to add the data and images directly into campaign for that i add the html data into the sections like postcard_heading00, postcard_image, std_content00.\nWrite the code as below:</p>\n\n<pre><code>mailsnake = MailSnake('apikey')\n\ntemplate_option = {'list_id':xxxx, 'subject':'testing', 'from_email':'xxxxx', 'from_name':'Test', 'to_name':'', 'template_id':54457, 'inline_css':True, 'generate_text': True, 'title':'testing' }\n\ntemplate_content = {\"html_postcard_heading00\":\"&lt;h1&gt;Testing&lt;/h1&gt;\",\"html_std_content00\":\"&lt;h1&gt;Testing&lt;/h1&gt;\",\"html_postcard_image\":\"&lt;img src='image_path'&gt;\"}\n</code></pre>\n\n<p>and pass this content to</p>\n\n<pre><code>campaignCreate(type='regular',options = template_option,content=template_content)\n</code></pre>\n\n<p>method.\nCampaigns creates properly, but the content still not added into the campaign.</p>\n\n<p>Can please anybody tell me why this happens?</p>\n"},{"tags":["django","mailchimp"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":12489482,"title":"Mailchimp with django","body":"<p>I used the django-mailchmip for newsletter creation.\nI properly integrate the mailchimp with django, I subscribe user also creates the campaign using template_id, But i want to add the content in the template dynamically in django.\nTemplate structure will be predefined, i just want to add the proper data into proper place in the template with django.</p>\n\n<p>Can please anybody help me, how it should be done?</p>\n\n<p>Thanks</p>\n"},{"tags":["django","django-sessions"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13011497,"title":"How to check session without creating new one?","body":"<p>In part of my application i have some custom settings for visitors.\nWhen user load page i try to check custom settings for request and if settings exist i do customization in page.</p>\n\n<p>i do it in <a href=\"https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-TEMPLATE_CONTEXT_PROCESSORS\" rel=\"nofollow\">Template Context Processor</a> </p>\n\n<pre><code>def shared_values(request):\n\n    show_help = request.session.get('show_help', True)\n    return {\n        'show_help': show_help,\n    }\n</code></pre>\n\n<p>It's work perfect, but i have problem - each time, when i check session django create new entry in Session table if entry does not exist before.</p>\n\n<p>How can i check session without creating new one? </p>\n\n<p>Edit 1:</p>\n\n<p>Then i disable checking for session key, i see what django does not create any Session entry for requests.</p>\n\n<ol>\n<li>I login as admin in 1st browser (chrome) and delete all session (except one for mydself)</li>\n<li><p>Edit context processor, so i don't access sessions in my project:</p>\n\n<p>show_help = True</p></li>\n<li><p>Open page in different browser (firefox)</p></li>\n<li><p>Switch to 1st browser and check if new session object is appear, but nothing has changed - only one session object exist.</p></li>\n</ol>\n\n<p>Edit 2:</p>\n\n<p>i use django 1.4.1</p>\n"},{"tags":["django","web-applications","curl","wsgi"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13027469,"title":"curl-like tool for wsgi over unix domain socket","body":"<p>Is there a command line tool to send requests directly to a wsgi application (django) listening on a unix socket?</p>\n\n<p>An equivalent of:</p>\n\n<blockquote>\n  <p>curl -X GET <a href=\"http://example.org/index.html\" rel=\"nofollow\">http://example.org/index.html</a></p>\n</blockquote>\n\n<p>But that would bypass HTTP server and talked directly to the underlying application over wsgi?</p>\n"},{"tags":["django","tastypie"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":13006901,"title":"TastyPie obj create method not being called","body":"<p>Am a newbie in TastyPie. I have a very simple resource and am overriding the obj_create method in following way. </p>\n\n<p>Ajax Call :-</p>\n\n<pre><code> var data2 ={\n                  \"crave\": data1,\n                  \"uid\": \"100\",\n                  \"access_token\": \"AAA\"                     \n              };                                                   \n              $.ajax({\n                  url: \"http://localhost:8000/restapi/v1/icrave/\",\n                  type: 'POST',                     \n                  data: data2,\n                  contentType: 'application/json',\n                  dataType: 'json',\n                  success: function (res) {\n                      console.log(res);\n                  },\n              });\n</code></pre>\n\n<p>In the resource</p>\n\n<pre><code>class IcravesResource(ModelResource): \nperson = fields.ForeignKey(UserResource, 'person')\nclass Meta:\n\n    queryset = Icrave.objects.filter(anonymous_or_not = False,is_active = True).order_by('-datetime')\n    resource_name = \"icrave\" \n    allowed_methods = ['get','post']\n    authentication =  GetAuthentication()     \n    authorization = GetAuthorization()      \n\ndef obj_create(self,bundle,request=None, **kwargs):                \n        print \"Check if code reached here !!!\"\n\n        return super( IcravesResource, self ).obj_create( self, bundle, request, **kwargs )\n</code></pre>\n\n<p>The code is not reaching here. What am i doing wrong ? I have checked the authorization and authentication they are both returning true. How can I debug this issue ?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13027058,"title":"How can i add extra data in object list in django python","body":"<p>I am extending the list view and in every object i need to add a dictionary.</p>\n\n<p>My dic look like this</p>\n\n<pre><code>mydict1['var1'] = {'value':20, 'result':None}\nmydict1['var2'] = {'value':20, 'result':None}\nmydict1['var3'] = {'value':20, 'result':None}\n</code></pre>\n\n<p>now i want to add that dictionary to all objects like</p>\n\n<pre><code>for myobj in self.get_queryset():\n     myobj.add(mydict1)\n</code></pre>\n\n<p>so that i access in my template like this</p>\n\n<pre><code>{{myobj.dict1.var1.value}}\n</code></pre>\n"},{"tags":["python","django","optparse","django-commands"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13025618,"title":"How can I flatten an optparse structure?","body":"<p>I'm trying to build a management command for Django and I've run into an issue. It seems that the <code>option_list</code> variable needs to be a flattened list of options.</p>\n\n<p>Here's the code — edited for brevity — that's executed:</p>\n\n<pre><code>def add_options(self, parser):\n    group = OptionGroup(parser, \"Global Options\")\n    group.add_option(\"--logfile\", metavar=\"FILE\", \\\n        help=\"log file. if omitted stderr will be used\")\n    ...\n    ...\n    ...\n    group.add_option(\"-s\", \"--set\", action=\"append\", default=[], metavar=\"NAME=VALUE\", \\\n        help=\"set/override setting (may be repeated)\")\n    parser.add_option_group(group)\n    parser.add_option(\"-t\", \"--output-format\", metavar=\"FORMAT\", default=\"jsonlines\", \\\n        help=\"format to use for dumping items with -o (default: %default)\")\n</code></pre>\n\n<p>I need to take all the options <code>parser</code> variable, flatted then i.e. remove the <code>OptionGroup</code>, while keeping the options and put them into a new variable.</p>\n\n<p>Django needs a class to specify it's options like this so it can iterate over it.</p>\n\n<pre><code>option_list = (\n    make_option('-v', '--verbosity', action='store', dest='verbosity', default='1',\n        type='choice', choices=['0', '1', '2', '3'],\n        help='Verbosity level; 0=minimal output, 1=normal output, 2=verbose output, 3=very verbose output'),\n    make_option('--settings',\n        help='The Python path to a settings module, e.g. \"myproject.settings.main\". If this isn\\'t provided, the DJANGO_SETTINGS_MODULE environment variable will be used.'),\n    make_option('--pythonpath',\n        help='A directory to add to the Python path, e.g. \"/home/djangoprojects/myproject\".'),\n    make_option('--traceback', action='store_true',\n        help='Print traceback on exception'),\n)\n</code></pre>\n\n<p>I'm very lost with how to accomplish this.</p>\n"},{"tags":["django","authentication"],"answer_count":2,"favorite_count":3,"up_vote_count":10,"down_vote_count":0,"view_count":5565,"score":10,"question_id":4578685,"title":"NoReverseMatch while rendering: Reverse for ''django.contrib.auth.views.login''","body":"<p>I'm using Django's authentication, and in the login.html template, the following statement is generating an error:</p>\n\n<pre><code>{% url 'django.contrib.auth.views.login' %}\n</code></pre>\n\n<blockquote>\n  <p>TemplateSyntaxError at /login</p>\n  \n  <p>Caught NoReverseMatch while rendering: Reverse for ''django.contrib.auth.views.login'' with arguments '()' and keyword arguments '{}' not found.</p>\n</blockquote>\n\n<p>This url is defined in my urls.py:</p>\n\n<pre><code>(r'^login$', 'django.contrib.auth.views.login')\n</code></pre>\n\n<p>I have installed the auth system:</p>\n\n<pre><code>INSTALLED_APPS = (\n    'django.contrib.auth',\n...\n)\n</code></pre>\n\n<p>Any ideas?</p>\n"},{"tags":["django","django-templates"],"answer_count":3,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":1425,"score":8,"question_id":3484149,"title":"Limit number of characters with Django Template filter","body":"<p>I am trying to output the first 255 characters of a description on a list of items and am looking for a method to get that.</p>\n\n<p>Example: I have a variable that contains 300 or so characters.</p>\n\n<p>I call that variable like this, {{ my_variable|characterlimit:255 }}</p>\n\n<p>and it would return only the first 255 characters of that variable.</p>\n\n<p>If this tag doesn't exist, I will simply create it (and suggest that it goes into django), but I wanted to make sure it didn't before I took the time to do that. Thanks!</p>\n"},{"tags":["python","django","image","model"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13020477,"title":"Attach an image into a Django Model","body":"<p>Making a basic Q&amp;A site and want to associate each question with an image (admin uploaded) and if there is no respective image, puts it with a default \"No Image\" placeholder. </p>\n\n<p>I have two models, Question and Answer (see below). Each question needs to have an image associated with it, so I thought the best way was to attach attribute ImageField with the Question model.</p>\n\n<pre><code>#models.py\nclass Question(models.Model):\n    title = models.CharField(max_length = 500)\n    picture = models.ImageField(height_field = '250',\n                                width_field = '200',\n                                upload_to = 'images')\n    def __unicode__(self):\n        return self.title\n</code></pre>\n\n<p>When I runserver though, tells me to download Python Imaging Library, and when I do get an error (different problem).</p>\n\n<p>Taking a step back, what is the best way to add an image to a model in Django?</p>\n"},{"tags":["django","apache"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13019122,"title":"Error trying to configure apache and django","body":"<p>I'm trying to install a django 1.3 app on apache 2.2 with mod_wsgi on windows 7. I added the following lines to httpd.conf</p>\n\n<pre><code>Listen 8080\n...\n\nLoadModule wsgi_module modules/mod_wsgi.so\n\nAlias /static/ \"C:/Users/.../my_app/my_app/static/\"\n\n&lt;Directory \"C:/Users/.../my_app/my_app/static\"&gt;\n  Order deny,allow\n  Allow from all\n&lt;Directory&gt;\n\nWSGIScriptAlias / \"C:/Users/.../my_app/my_app/wsgi.py\"\nWSGIPythonPath \"C:/Users/.../my_app/\"\n\n&lt;Directory \"C:/Users/.../my_app/my_app\"&gt;\n  &lt;Files wsgi.py&gt;\n    Order allow,deny\n    Allow from all\n  &lt;Files&gt;\n&lt;Directory&gt;\n</code></pre>\n\n<p>wsgi.py</p>\n\n<pre><code>import os\nimport sys\n\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'my_app.settings')\n\nimport django.core.handlers.wsgi\n\napplication = django.core.handlers.wsgi.WSGIHandlers()\n\npath = 'C:/Users/.../my_app/my_app'\nif path not in sys.path:\n    sys.path.append(path)\n</code></pre>\n\n<p>The <code>wsgi.py</code> file is in the same folder as <code>settings.py</code> and <code>urls.py</code></p>\n\n<p>When I go to <code>localhost:8080</code> it says: \n<strong>Not found</strong> The requested URL / was not found on this server</p>\n\n<p>Note: I'm totally new to apache, I don't know what i'm missing, some docs show a way to configure it and others show a completly diferent way to do the same thing.</p>\n\n<p>Any ideas of what's wrong with this configuration.</p>\n"},{"tags":["django","django-admin","django-select-related"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13006823,"title":"Django admin change-list optimizing query: select field1, field2 instead of select *","body":"<p>I have a large horizontal table (30 fields) with quite a few foreign keys (each averaging upto 10 fields). While displaying the table in the Django admin, I use select related to optimize and avoid multiple querying. What I am looking for is to ensure that only my list_display entries are retrieved and not all the 30 fields + (foreign keys X 10) fields. Currently a select * on the table + a select * on all the join fields run. Basically, a way to get 'values' at the Django admin level. Thanks.</p>\n\n<p>Edit: \nAn example below:</p>\n\n<pre><code>class X(models.Model):\n    x1 = models.IntegerField  # needed for admin display\n    x2 = models.TextField     # needed for admin display\n    x3 = models.ForeignKey(Y) \n    x4 = models.ForeignKey(Z)\n    ...                       # X5 to x30 are not needed for admin display\n    X30 = models.Integerfield\n\n    @property\n    def y1(self) :\n        return self.x3.y1\n\n    @property\n    def y2(self):\n        return self.x4.z1\n\nclass Y(models.Model):\n    y1 = models.IntegerField  # needed for admin display\n    ...\n    y10 = models.IntegerField\n\n\nclass Z(models.Model):\n    z1 = models.IntegerField  # needed for admin display\n    ...                       # z2 to z10 are not needed for admin display\n    z10 = models.IntegerField\n\n\n**admin.py**\nlist_display = ['x1', 'x2', 'y1', 'z1']\n</code></pre>\n\n<p>My problem is when I look at the query generated to display this, it does a select * on X(x1 to x30), and using select_related, it extracts y1 to y10 and z1 to z10, even though I do not need all fields. </p>\n\n<p>This table is heavily used as a CRM and it is currently a showstopper because of the slow query that is generated. There are also blobs and huge varchars, which are not used for the display and still being queried.  </p>\n\n<p>Thanks.</p>\n"},{"tags":["django","deployment","nginx","setup-deployment","gunicorn"],"answer_count":2,"favorite_count":4,"up_vote_count":5,"down_vote_count":0,"view_count":164,"score":5,"question_id":13004484,"title":"Deploying Django with gunicorn and nginx","body":"<p>This is a broad question but I'd like to get a canonical answer. I have been trying to deploy a site using gnunicorn and nginx in Django. After reading tons of tutorials I have been successful but I can't be sure that the steps I followed are good enough to run a site without problems or maybe there are better ways to do it. That uncertainty is annoying.</p>\n\n<p>That's why I'm looking for a very detailed and well explained answer for newbies. I don't want to explain too much what I know and what I don't know since this could skew the answers a bit and other people could benefit to a lesser degree from your answers. However, some things I'd like to see mentioned are:</p>\n\n<ul>\n<li><p>What \"setup\" have you seen work best? I used virtualenv and moved my django project inside this environment, however I have seen another setups where there is a folder for virtual environments and other for projects.</p></li>\n<li><p>How can I setup things in a way that allows several sites to be hosted in a single server?</p></li>\n<li><p>Why some people suggest using gunicorn_django -b 0.0.0.0:8000 and others suggest gunicorn_django -b 127.0.0.1:8000? I tested the latter in an Amazon EC2 instance but it didn't work while the former worked without problem.</p></li>\n<li><p>What is the logic behind the config file of nginx? There are so many tutorials using drastically different configuration files that I'm confused on which one is better. For example, some people use \"alias /path/to/static/folder\" and others \"root /path/to/static/folder\". Maybe you can share your preferred configuration file.</p></li>\n<li><p>Why do we create a symlink between site-available and sites-enabled in /etc/nginx?</p></li>\n<li><p>Some best practices are as always welcomed :-)</p></li>\n</ul>\n\n<p>Thanks</p>\n"},{"tags":["java","android","python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":71,"score":-2,"question_id":13023552,"title":"Web development/mobile app development, will they overlap?","body":"<p>I am a first year CS student and I want to get a head start on developing projects. It seems at my university nobody uses their CS knowledge to do anything outside of class. My goal is to have a cool web app or a mobile app out by the end of my sophomore year.</p>\n\n<p>I came in with some programming experience. I have probably worked the most with Python and Java, I knew Python well but my classes are taught in Java now, so I am probably a little rusty. Either way I know basic concepts in both, and I still am at the point where I am ahead of what my I am learning in class. Other things to take in to consideration: I have used javascript quite a bit on random projects, and with that HTML and CSS of course. </p>\n\n<p>My main question is, lets say I start focusing on Android development and everything that goes along with it. Down the road if I want to switch to web development will I basically be in the beginners boat? Or will my development experience make it much easier? I am also looking at the fact that Java is used for Android. I feel that mastering Python would make me much more versatile in the job market since it is used in so many different areas, even mobile development now! Opinions?</p>\n"},{"tags":["django","django-admin","django-templates"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":486,"score":0,"question_id":964868,"title":"\"View on site\" button is linked to an unwanted page","body":"<p>Why \"view on site\" linked to an unwanted page? Can I disable it?</p>\n"},{"tags":["django","nginx","reload","gunicorn","upstart"],"answer_count":1,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":1252,"score":4,"question_id":9881819,"title":"A better way to restart/reload Gunicorn (via Upstart) after 'git pull'ing my Django projects","body":"<p>Im looking for something better than <code>sudo restart projectname</code> every time I issue a <code>git pull origin master</code>, which pulls down my latest changes to a Django project. This <code>restart</code> command, I believe, is related to Upstart, which I use to start/top my Gunicorn server process.</p>\n\n<p>This restart causes a brief outage. Users hitting the web server (nginx) will get a 500, because Gunicorn is still restarting. In fact, it seems to restart instantly, but it takes a few seconds for pages to load.</p>\n\n<p>Any ideas on how to make this seamless? Ideally, I'd like to issue my <code>git pull</code> and Gunicorn reloads automatically.</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13023297,"title":"How can store multidimension array in django python","body":"<p>I have two dictionaries which i want to compare the values. Like</p>\n\n<pre><code>Dict1['var1'] = 20\nDict1['var2'] = 30\n\nDict2['var1'] = 23\nDict2['var1'] = 26\n</code></pre>\n\n<p>Now i want to copare them and store the result like true or false in the same dict like this</p>\n\n<pre><code>if (Dict1['var1']  &lt; Dict2['var1'])\n   Dict2['var1']['result'] = true\n</code></pre>\n\n<p>Becasue in my django template i want to show the color of table row as green if the result is true.</p>\n\n<p>Whats the best way i can do that</p>\n"},{"tags":["django","postgresql","psycopg2","syncdb"],"answer_count":7,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":1211,"score":4,"question_id":9133870,"title":"Postgresql socket error on OSX 10.7.3 when running Django's syncdb","body":"<p>Since upgrading OSX to version 10.7.3, when I attempt to run a Django \"syncdb\" command, I receive the following psycopg2 error from Postgresql 8.4.2:</p>\n\n<pre><code>psycopg2.OperationalError: could not connect to server: No such file or directory\n    Is the server running locally and accepting\n    connections on Unix domain socket \"/var/pgsql_socket/.s.PGSQL.5432\"?\n</code></pre>\n\n<p>I'm able to open psql without incident, but when I attempt to run \"pg_ctl status\", I receive this error as well:</p>\n\n<pre><code>pg_ctl: could not open PID file \"/Library/PostgreSQL/8.4/data/postmaster.pid\": Permission denied\n</code></pre>\n\n<p>Is there a correlation?</p>\n"},{"tags":["django","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13015199,"title":"Tastypie model field named \"format\"","body":"<p>I'm using tastypie and I have a unique situation. My model has a field named \"format\" so when I try to make a call to the related API and pass format=json, I get this error:</p>\n\n<blockquote>\n  <p>The 'format' field does not allow filtering.</p>\n</blockquote>\n\n<p>Other than renaming my model field, is there another workaround for this?</p>\n"},{"tags":["python","django","apache","mahout"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13023103,"title":"Can i use apache mahout with django application","body":"<p>I am building the web application in python/django.</p>\n\n<p>I need to apply some machine learning algorithms on some data. I know there are libraries available for python. But someone in my company was saying that Mahout is very good toll for that.</p>\n\n<p>i want to know that can i use it with python/django. or i should do that with python libraries only</p>\n"},{"tags":["python","django","dreamhost"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13022238,"title":"Django Static Files on Dreamhost","body":"<p>I have a Dreamhost shared server hosting Passenger Python/Django. Currently I have a global folder (/public/static, /public/media) that collects non-python files. When I do \"collectstatic\" all my app's */static files get copied over to the global /public/static folder. Good so far.</p>\n\n<p><strong>1)</strong> I'm getting tired using <strong>collectstatic</strong>. I want to remove my app's */static folder and place their files in the global /public/static. This works on Dreamhost since Passenger Python points Apache's Document Root to /public, which will retrieve /public/static and /public/media correctly. But on the development side I do not have such a functionality (under python manage.py).</p>\n\n<p><strong>2)</strong> Any optimizations for static/cached files under Dreamhost/shared hosting?</p>\n\n<p>Below are my settings:</p>\n\n<p>Website Settings:</p>\n\n<pre><code>STATICFILES_DIRS = (\n    ABS_PATH + '/???/???/static/', #My App's static dir\n)\n\nSTATICFILES_FINDERS = (\n'django.contrib.staticfiles.finders.FileSystemFinder',\n'django.contrib.staticfiles.finders.AppDirectoriesFinder',\n#'django.contrib.staticfiles.finders.DefaultStorageFinder'\n)\n\nTEMPLATE_DIRS = (\n#ABS_PATH + '/hdrtoronto/hdrtoronto/templates/'\nABS_PATH + '/templates/'\n)\n</code></pre>\n\n<p>Urls.py:</p>\n\n<pre><code>if os.environ.get(\"django_dev\", None):\nurlpatterns += static(settings.MEDIA_URL, document_root = settings.MEDIA_ROOT)\nurlpatterns += static(settings.STATIC_URL, document_root = settings.STATIC_ROOT)\n</code></pre>\n"},{"tags":["javascript","django","external-url"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13022567,"title":"Javascript opening new window with external URL (Django)","body":"<p>I have some simple lines of code:</p>\n\n<pre><code>that.click(function(){\n    window.open($('.linkBox input').val());       \n});\n</code></pre>\n\n<p>Assuming I'm redirecting to google.com,\nwhenever a new window is opened, the URL is: \"my/project/url/http://www.google.com\"</p>\n\n<p>Basically whatever URL is inputted, it gets appended to the end of my project's URL. How can I avoid this? </p>\n"},{"tags":["javascript","jquery","django","jquery-ajax","cross-domain"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13021347,"title":"Cross-domain AJAX request to Django server","body":"<p>I'm trying to get data from Django server using jQuery.</p>\n\n<p>Here is code I'm using: <a href=\"http://jsfiddle.net/aABA3/\" rel=\"nofollow\">myCode</a></p>\n\n<pre><code>    $(function(){\n    function callback(res){\n        console.log(res);\n    }\n    $.ajax({\n            url: \"http://www.chesno.org/ajax/dispatcher/\",\n            data: {\n                \"data\": \"{'cmd':'get_party_list'}\"\n            },\n            dataType: 'json', \n            success: callback,\n            complete: callback,\n            crossDomain: true,\n            async: false\n        });\n    })​\n</code></pre>\n\n<p>The interesting thing is that I'm able to reach data through browser or fiddler (<a href=\"http://www.chesno.org/ajax/dispatcher/?data=%7B%27cmd%27%3a%27get_party_list%27%7D\" rel=\"nofollow\">link</a>).\nPlease give me a hint on what I'm doing wrong. The important part is that I don't have access to the server, I just can communicate with developers of the site and they don't know yet where the problem is.</p>\n"},{"tags":["django","migration","django-south","imagefield","django-storage"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":480,"score":1,"question_id":3545005,"title":"How can I use South's DataMigration to change the storage backend of Django model ImageField instance?","body":"<p>I'm trying to migrate some models ImageFields to using the <code>S3BotoStorage</code> storage backend from <code>django-storages</code>.  As part of this process I've changed my Model's ImageField  declaration to include the <code>storage=instance_of_s3botostorage</code> argument, and new instances of my Model that save an image to the ImageField attribute now get stored in S3 - as intended.</p>\n\n<p>I tried to move existing model instances over to storing their data in S3, too, so wrote a South DataMigration like this:</p>\n\n<pre><code>def forwards(self, orm):\n    \"upload ImageField file to S3 if it's not already in there\"\n    for mymodel in orm.MyModel.objects.all():\n        if mymodel.logo_image and not isinstance(mymodel.logo_image.storage, S3BotoStorage):\n            print \"uploading %s to S3\" % mymodel.logo_image\n            file_contents = ContentFile(mymodel.logo_image.read())\n            mymodel.logo_image.save(mymodel.logo_image.name, file_contents)\n            mymodel.save()\n</code></pre>\n\n<p>but this clearly doesn't have the intended effect because the image file is simply saved using the old <code>storage</code> backend - which makes sense considering save() is actually a method of the <code>FieldFile</code> belonging to the <code>FileField</code></p>\n\n<p>So, how to move/change file storage on an instance of a model?</p>\n"},{"tags":["django","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13020963,"title":"Why is Django's admin detail page making so many queries?","body":"<p>I'm working on a fairly standard Django app and lately I've been tweaking the admin. While the list views load at reasonable rates, the detail and add views take some ~10 seconds to load.</p>\n\n<p>I'm not exactly sure why it is so-- I suspected it had something to do with the database being over queried, and in fact it is. After turning on logging I discovered that the controller is querying for every id in the table:</p>\n\n<pre><code>...\n[Mon Oct 22 18:32:52 2012] [error] (0.001) SELECT `courses_course`.`id`, `courses_course`.`semester`,\n `courses_course`.`name`, `courses_course`.`credits`, `courses_course`.`description`, `courses_course\n`.`history_id`, `courses_course`.`oldpcr_id`, `courses_course`.`primary_alias_id` FROM `courses_cours\ne` WHERE `courses_course`.`id` = 2077 ; args=(2077,)\n[Mon Oct 22 18:32:52 2012] [error] (0.000) SELECT `courses_course`.`id`, `courses_course`.`semester`,\n `courses_course`.`name`, `courses_course`.`credits`, `courses_course`.`description`, `courses_course\n`.`history_id`, `courses_course`.`oldpcr_id`, `courses_course`.`primary_alias_id` FROM `courses_cours\ne` WHERE `courses_course`.`id` = 2078 ; args=(2078,)\n[Mon Oct 22 18:32:52 2012] [error] (0.001) SELECT `courses_course`.`id`, `courses_course`.`semester`,\n `courses_course`.`name`, `courses_course`.`credits`, `courses_course`.`description`, `courses_course\n`.`history_id`, `courses_course`.`oldpcr_id`, `courses_course`.`primary_alias_id` FROM `courses_cours\ne` WHERE `courses_course`.`id` = 2079 ; args=(2079,)\n...\n</code></pre>\n\n<p>Can somebody explain why this is happening? I can't think of anything at all that might explain it.</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13021103,"title":"Inheritance in django models and saving data","body":"<p>I've got one problem, I've got model:</p>\n\n<pre><code>class Student (User):    \n    student_number = models.IntegerField()\n</code></pre>\n\n<p>then I do:</p>\n\n<pre><code>user = Student()\n#some code here\nuser.last_name = 'last_name'\nuser.student_number = 22\n</code></pre>\n\n<p>and after calling save method:</p>\n\n<pre><code>user.save()\n</code></pre>\n\n<p>only field last_name is changed, but after calling:</p>\n\n<pre><code>user.student.save()\n</code></pre>\n\n<p>only field student_number is changed... Both methods doesn't work...\nSo, how to update it in correct way?   </p>\n"},{"tags":["python","django","django-fixtures"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13014226,"title":"How to instantiate class by package_name.module_name.class_name \"path\"","body":"<p>I want to implement something a bit similar to django fixture system where in fixture you set <code>model</code> property which indicates a model class of fixture. It looks something like this</p>\n\n<pre><code>my_app.models.my_model\n</code></pre>\n\n<p>My question is what is the standard way to process such a string in order to create the instance of the class pointed by this \"path\". I think it should look something like:</p>\n\n<ol>\n<li>Split it to module name and class name parts</li>\n<li>Load module (if not loaded)</li>\n<li>Acquire class from module by its name</li>\n<li>Instantiate it</li>\n</ol>\n\n<p>How exactly should I do it?</p>\n\n<p>Edit: I came up with a dirty solution:</p>\n\n<pre><code>def _resolve_class(self, class_path):\n    tokens = class_path.split('.')\n    class_name = tokens[-1]\n    module_name = '.'.join(tokens[:-1])\n    exec \"from %s import %s\" % (module_name, class_name)\n    class_obj = locals()[class_name]\n    return class_obj\n</code></pre>\n\n<p>That does it's job however is dirty because of usage of exec and possibility of manipulating execution by malicious preparation of fixtures. How should it be done properly?</p>\n"},{"tags":["django","tinymce","django-tinymce"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":112,"score":1,"question_id":8596568,"title":"How to set HTMLField's widget's height in Admin?","body":"<p>I have a HTMLField in a model as it's the laziest way to utilize tinymce widget in Admin. But the problem is that the textarea field doesn't have \"rows\" property set. So the textarea doesn't have enough height comfortable enough for editing in Admin. Is there any way to set the height of HTMLField without defining a ModelAdmin class?</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I solved the problem by using the following code:</p>\n\n<pre><code>def create_mce_formfield(db_field):\n    return db_field.formfield(widget = TinyMCE(\n        attrs = {'cols': 80, 'rows': 30},\n        mce_attrs = {\n            'external_link_list_url': reverse('tinymce.views.flatpages_link_list'),\n            'plugin_preview_pageurl': reverse('tinymce-preview', args= ('tinymce',)),\n            'plugins': \"safari,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template\",\n            'theme_advanced_buttons1': \"save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect\",\n            'theme_advanced_buttons2': \"cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor\",\n            'theme_advanced_buttons3': \"tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen\",\n            'theme_advanced_buttons4': \"insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak\",\n            'theme_advanced_toolbar_location': \"top\",\n            'theme_advanced_toolbar_align': \"left\",\n            'theme_advanced_statusbar_location': \"bottom\",\n            'theme_advanced_resizing': True,\n            'extended_valid_elements': \"iframe[src|title|width|height|allowfullscreen|frameborder|webkitAllowFullScreen|mozallowfullscreen|allowFullScreen]\",\n        },\n    ))\n\nclass TinyMCEFlatPageAdmin(FlatPageAdmin):\n\n    def formfield_for_dbfield(self, db_field, **kwargs):\n        if db_field.name == 'content': return create_mce_formfield(db_field)\n        return super(TinyMCEFlatPageAdmin, self).formfield_for_dbfield(db_field, **kwargs)\n</code></pre>\n"},{"tags":["python","html","css","django","image"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13020816,"title":"Images not rendering in HTML on Django runserver, but HTML works in browser","body":"<p>Building a site with Django and my index.html page is not rendering images properly. The image loads up fine when I open the HTML file in the browser, but when I do <code>python manage.py runserver</code>from powershell the HTML page doesn't render any of the images. </p>\n\n<p>The code is below-- why is it not rendering when running in the server but works when I open in browser?</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;head&gt;Q&amp;A&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;&lt;img src=\"c:/users/chris/desktop/logo.jpg\"&gt;&lt;/img&gt;&lt;/h1&gt;\n&lt;/body&gt;\n</code></pre>\n"},{"tags":["jquery","django","twitter-bootstrap","tablesorter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":13018863,"title":"Bootstrap modal selecting wrong item with jQuery Tablesorter","body":"<p>When I trigger this bootstrap modal it selects the topmost entry in the table as e.entry and not the entry on the row. If I sort the column, the modal will again pick the topmost entry. </p>\n\n<p>Any ideas as to what might be the issue?</p>\n\n<p>Thanks!</p>\n\n<pre><code>                &lt;script &gt;\n                $(document).ready(function(){\n                   $(\"#EntryTable\").tablesorter(\n                    {sortList: [[1,0]]}\n                    );\n                 });\n            &lt;/script&gt;\n            &lt;table class=\"table\" id=\"EntryTable\"&gt;\n                &lt;thead&gt;\n                    &lt;tr&gt;                                \n                        &lt;th&gt;Idea&lt;/th&gt;\n                        &lt;th&gt;Edit&lt;/th&gt;\n                    &lt;/tr&gt;\n                &lt;/thead&gt;\n                &lt;tbody&gt;\n\n\n            {% for e in projects.entries.all %}\n            &lt;tr class=\"info\"&gt;\n                &lt;td&gt;{{ e.entry }}&lt;/td&gt;\n                &lt;td&gt;&lt;a href=\"#EditModal\" role=\"button\" data-toggle=\"modal\" class=\"open-EditEntryDialog label label-info\" data-id=\"{{ e.entry }}\"&gt;Edit&lt;/a&gt;\n\n                    &lt;div class=\"modal hide fade\" id=\"EditModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"EditModalLabel\" aria-hidden=\"true\"&gt;\n                      &lt;div class=\"modal-header\"&gt;\n                        &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"&gt;×&lt;/button&gt;\n                        &lt;h3 id=\"EditModalLabel\"&gt;Edit an Entry&lt;/h3&gt;\n                      &lt;/div&gt;\n                      &lt;div class=\"modal-body\"&gt;\n                            &lt;form action=\"{{ projects.get_absolute_url }}\" method=\"post\"&gt;\n                            {% csrf_token %}\n                            &lt;input type='hidden' name='entry_id' value='{{ e.id }}'&gt;\n                            &lt;input type='hidden' name='project_id' value='{{ projects.id }}'&gt;\n                            &lt;input type='text' id='entry' name=\"entry\" placeholder=\"{{ e.entry }}\"&gt; \n\n                        &lt;/div&gt;\n\n                      &lt;div class=\"modal-footer\"&gt;\n                        &lt;button class=\"btn\" data-dismiss=\"modal\" aria-hidden=\"true\"&gt;Close&lt;/button&gt;\n                        &lt;button type='submit' name=\"edit_entry\" value='Edit Entry' class=\"btn btn-primary\"&gt;Edit Entry&lt;/button&gt;\n                        &lt;/form&gt;\n                      &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/td&gt;\n                &lt;/tr&gt;\n            {% endfor %}\n</code></pre>\n"},{"tags":["javascript","android","python","html","django"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":96,"score":-1,"question_id":13020641,"title":"How to land an unpaid internship with minimal CS/development experience?","body":"<p>I am a first year CS student living in the midwest. I am confident that I want to get in to web or mobile development, and I am looking for an internship that will put me in the right direction. My problem is I don't know if employers would consider me! I am only looking for an unpaid internship, and I would just like it to deal with any type of programming.</p>\n\n<p>About myself: I have been programming in Python for about a year now. I am learning basic CS concepts in my Java class right now, but my Python experience outweighs that. I have just started to mess around with Django, but I am still considered a beginner. I had one sort of \"freelance\" project given to me over the summer, which I basically made a graph that updates itself as users answer questions. It mainly used jQuery/javaScript and of course HTML/CSS to lay out the page. Another area I am interested in is Android development. Although I have not committed a large amount of time to it (I am focusing on web development more and of course school work) I feel like it would be an area I would like to explore more. Other random tech-skills: I have a basic understanding of how Amazon web services work. I have a few instances running, and know my way around much of EC2 and S3. I have experience in both Windows and Linux, I am comfortable working out of the command line in Linux.</p>\n\n<p>I could go on for a while and I am not going to list my entire resume, but that should give you a general idea of where I am at right now. My question is, would I need more experience in order to land an internship relating to programming (unpaid or paid)? Also, what is the best way to find this kind of internship on campus? I would love if if I could work at a newer company/start up but I don't know if they would be more or less likely to give me a shot than a large corporation. </p>\n\n<p>So, should I wait or start on the path to get an internship? Do I have a shot?</p>\n"},{"tags":["django"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":6424,"score":6,"question_id":6261823,"title":"STATIC_URL not working","body":"<p>I am struggling to pull media out for my templates using the <strong>STATIC_URL</strong> variable. For example I have this code</p>\n\n<pre><code>{% extends \"admin/change_list.html\" %}\n{% load i18n %}\n\n{% block extrahead %}\n&lt;!--[if IE]&gt;\n&lt;script type=\"text/javascript\" src=\"{% firstof STATIC_URL MEDIA_URL %}django_qbe/js/excanvas.js\"&gt;&lt;/script&gt;\n&lt;![endif]--&gt;\n&lt;script type=\"text/javascript\" src=\"{% firstof STATIC_URL MEDIA_URL %}django_qbe/js/jquery.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Each time the template loads it tries to pull off the <strong>MEDIA_URL</strong>. If I change it to</p>\n\n<pre><code>{% extends \"admin/change_list.html\" %}\n{% load i18n %}\n{% load static %}\n{% block extrahead %}\n&lt;!--[if IE]&gt;\n&lt;script type=\"text/javascript\" src=\"{% get_static_prefix %}django_qbe/js/excanvas.js\"&gt;&lt;/script&gt;\n&lt;![endif]--&gt;\n&lt;script type=\"text/javascript\" src=\"{% get_static_prefix %}django_qbe/js/jquery.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>My question is why doesn't my first version of this template work?</p>\n"},{"tags":["django","memcached"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13012382,"title":"Django memcache performance monitoring","body":"<p>I'm using memcache in my django site to cache db reads and API data. I have a dedicated server running for memcache. Now i want to measure the performance of using memcache (hits and misses from the cache). I'm using django 1.3 and python 2.4. Any idea on how to do this? </p>\n"},{"tags":["django","web-applications","installation","apps","django-lfs"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13013979,"title":"Installing django-lfs (lightning fast shop) using only pip and a virtual environment (instead of using zc.buildout)","body":"<p><a href=\"http://docs.getlfs.com/en/latest/introduction/installation.html\" rel=\"nofollow\">Here</a> is the installation of <code>django-lfs</code> using <code>zc.buildout</code>.</p>\n\n<p>Does anyone know how you would best go about to install it without <code>zc.buildout</code> and using <code>pip</code> and a <code>virtual evnvironment</code> instead?</p>\n\n<pre><code>$ mkvirtualenv shop_project\n(shop_project)$ pip install django-lfs\n...\n</code></pre>\n"},{"tags":["django","csrf","jeditable"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13019488,"title":"Django and JEditable: CSRF error","body":"<p>I started using the <a href=\"http://www.appelsiini.net/projects/jeditable\" rel=\"nofollow\">Jeditable</a> plugin with Django and quickly ran into a CSRF error:  \"CSRF verification failed. Request aborted.\", \"CSRF token missing or incorrect\"</p>\n\n<p>As of this writing the Jeditable plugin seems have been last updated in 2008--sometime after this Django began requiring <a href=\"https://docs.djangoproject.com/en/dev/ref/contrib/csrf/\" rel=\"nofollow\">CSRF tokens</a> for POST requests.</p>\n\n<p>How do you add Django CSRF data to Jeditable?</p>\n"},{"tags":["django","django-models","django-templates"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13018999,"title":"How to put multiple models on the same page?","body":"<blockquote>\n  <p>I'm doing a website in html and base (where all pages extend) I want\n  to put a session of social network icons. As this session is base on\n  html it should be displayed on all pages of the website.</p>\n  \n  <p>I do not want\n  to put this session in a static html, I want to do in django using\n  models. This is already done.</p>\n</blockquote>\n\n<p><strong>Question</strong>: Do I have to put the session of social network icons on each view, or can I make a separate view and all others extend this view?\nHow can I do this?</p>\n"},{"tags":["django","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13019333,"title":"Django form Inserts record instead of update","body":"<p>when i use the id parameter from the url to edit a record, and the \"elif 'id' in request.GET:\" is being used, it doesn't update the record but it creates a new row</p>\n\n<pre><code>@login_required\ndef login_save_page(request):\n    if request.method == 'POST':\n        form = LoginSaveForm(request.POST)\n        if form.is_valid():\n            # Create or get login.\n            login1 = _login_save(request, form)\n            return HttpResponseRedirect(\n                                        '/user/%s/' % request.user.username\n                                       )\n    elif 'id' in request.GET:\n     id2 = request.GET['id']\n     name=''\n     url=''\n     Login_username =''\n     notes= ''\n     password=''\n     try:\n        login1 = login.objects.get(\n                                   id = id2,\n                                   username=request.user\n                                  )\n        name = login1.name\n        url = login1.loginUrl\n        Login_username = login1.login_username\n        notes = login1.notes\n        password = login1.password\n     except (login.DoesNotExist):\n      pass\n     form = LoginSaveForm({\n        'id': id2,\n        'name': name,\n        'url': url,\n        'Login_username': Login_username,\n        'notes': notes,\n        'password': password\n     })\n    else:\n        form = LoginSaveForm()\n    variables = RequestContext(request, {\n                                   'form': form\n                                             })\n    return render_to_response('login_save_page.html', variables)\n</code></pre>\n"},{"tags":["django","twitter-bootstrap","datepicker"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13017376,"title":"Bootstrap-datepicker with django 1.4","body":"<p>I know there is a very similar issue <a href=\"http://stackoverflow.com/questions/11752223/twitter-bootstrap-date-picker-not-working\">datepicker</a>, but I have not been able to solve it myself, since I consider my problem it's different. So I am trying to use bootstrap-datepicker <a href=\"http://www.eyecon.ro/bootstrap-datepicker/\" rel=\"nofollow\">bootstrap-datepicker</a> in my local django project. I have a little experience using django, currently using version 1.4. I have a ModelForm which i want to be able to use a datepicker interface for some DateField. I render the form field correctly in the template using: </p>\n\n<pre><code> &lt;!-- TESTING DATEPICKER --&gt;\n          &lt;div class=\"well\"&gt;\n            &lt;input type=\"text\" class=\"span2\" value=\"02/16/12\" data-date-format=\"mm/dd/yy\" id=\"datepicker\" &gt;\n          &lt;/div&gt;\n &lt;!-- TESTING DATEPICKER --&gt;\n</code></pre>\n\n<p>And at the bottom of my template I have the following JS code:</p>\n\n<pre><code>    &lt;script&gt; $(\"#datepicker\").datepicker(); &lt;/script&gt;\n</code></pre>\n\n<p>Now, in my base layout template I have the following:</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" href=\"{{ STATIC_URL }}css/bootstrap.css\"/&gt;\n&lt;link rel=\"stylesheet\" href=\"{{ STATIC_URL }}css/datepicker.css\"/&gt;\n\n{% block head %}{% endblock %}\n{% include \"layouts/header.html\" %}\n{% block content %}{% endblock %}\n{% include \"layouts/footer.html\" %}\n\n&lt;script src=\"{{ STATIC_URL }}js/bootstrap.js\"&gt;&lt;/script&gt;\n&lt;script src=\"{{ STATIC_URL }}js/bootstrap-datepicker.js\"&gt;&lt;/script&gt;\n{% block scripts %}{% endblock %} \n</code></pre>\n\n<p>The template where I want to render the datepicker of course includes the base layout template: </p>\n\n<pre><code>{% extends \"layouts/base.html\" %}\n</code></pre>\n\n<p>My static files are distributed the following way:</p>\n\n<pre><code>Project/\n    apps/\n    static/\n        css/\n            bootstrap.css\n            datepicker.css\n            datepicker.less\n        js/\n            bootstrap.js\n            bootstrap-datepicker.js\n</code></pre>\n\n<p>I have never used JS before in my project so it might have something to do, but still, when I render my form the DateField shows ok as the datepicker example its just I can't make it deploy the widget where you get to choose the date from the calendar. Everytime I reload the url with the form I get the following in runserver:</p>\n\n<pre><code>[22/Oct/2012] \"GET /element/new HTTP/1.1\" 200 9547\n[22/Oct/2012] \"GET /static/js/bootstrap.js HTTP/1.1\" 304 0\n[22/Oct/2012] \"GET /static/css/datepicker.css HTTP/1.1\" 304 0\n[22/Oct/2012] \"GET /static/js/bootstrap-datepicker.js HTTP/1.1\" 304 0\n[22/Oct/2012] \"GET /static/css/bootstrap.css HTTP/1.1\" 200 118150\n</code></pre>\n\n<p>I would appreciate a lot any kind of help. If you need my settings.py is in the following link: <a href=\"http://pastie.org/5099431\" rel=\"nofollow\">settings.py</a></p>\n\n<p>Thank you very much.</p>\n"},{"tags":["django","django-models"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13013333,"title":"Django: Sum the count of a sub sub foreign object","body":"<p>I have many hits by Twavail\nI have many Twavail for a Twaffic</p>\n\n<p>I would like to sum the number of Hits for a Twaffic, and get an additionel field in Twaffic entries (hits_count), but I have some difficulties.</p>\n\n<hr>\n\n<p>Here are my models:</p>\n\n<pre><code>class Twaffic(models.Model):\n    user = models.ForeignKey(User,editable=False)\n    enchere = models.PositiveIntegerField(default=1)\n\nclass Twavail(models.Model):\n\n    user = models.ForeignKey(User,editable=False)\n    twaffic = models.ForeignKey(Twaffic,editable=False,related_name='twavaux')\n    tweet_id = models.CharField(max_length=20,default=0, editable=False)\n\nclass Hit(models.Model):\n    twavail = models.ForeignKey(Twavail,editable=False,related_name='hits')\n    date = models.DateTimeField(max_length=140,auto_now=True,default=\"\")\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>twaffics=Twaffic.objects.annotate(hits_count=Sum('twavaux__hits__count')).filter(user=request.user)\n</code></pre>\n\n<p>But I get the following error:</p>\n\n<p>Cannot resolve keyword 'hits' into field. Choices are: twaffic, user</p>\n\n<p>Is it really impossible to get this informations 2 levels ago? hits is the right related name.. Maybe I missed something?</p>\n\n<p>Thx for your help.</p>\n"},{"tags":["python","django","cron","memcached"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13018266,"title":"Cronjob to periodically refresh cache for django view","body":"<p>I've had some trouble trying to reset my cache every hour for a particular django view.</p>\n\n<p>Right now, I am using the cache_page decorator to cache my view using Memcached. But the cache expires after a while and the request is  uncached from some users.</p>\n\n<p>@cache_page(3600)<br>\ndef my_view(request):<br>\n     ...</p>\n\n<p>How do I write my own django manage.py command to refresh my cache for this view every hour from cron?</p>\n\n<p>In other words, what do I put in my refresh_cache.py file mentioned in the answer here:\n<a href=\"http://stackoverflow.com/questions/797773/django-caching-can-it-be-done-pre-emptively?rq=1\">Django caching - can it be done pre-emptively?</a></p>\n\n<p>Thanks!</p>\n"},{"tags":["django","django-models","django-queryset","django-queries","django-query"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":40,"score":0,"question_id":13017815,"title":"Query field as string?","body":"<p>I'd like to query a model for a specific field I've got as a string.</p>\n\n<p><strong>Demo:</strong></p>\n\n<pre><code>class Foo(models.Model):\n    someones_name = models.CharField(max_length=100)\n    anothers_name = models.CharField(max_length=100)\n\n# python shell:\n&gt;&gt; Foo.objects.get(pk=1).someones_name\nu'Cpt. Hook'\n&gt;&gt; Foo.objects.get(pk=1).anothers_name\nu'Peter Pan'\n</code></pre>\n\n<p>Now - I got in a variable the name of the field <code>someones_name</code></p>\n\n<pre><code>&gt;&gt; field_name = 'someones_name'\n</code></pre>\n\n<p>So, how do I perform the almost same query against the Foo-Model with that field_name-variable? If indeed such a thing is possible?</p>\n\n<hr>\n\n<p><strong>Edit</strong></p>\n\n<p>I'm not looking to query with that field_name. I want the exact value of the field given in field_name. I know that I could do something like this</p>\n\n<pre><code>query = Foo.objects.get(pk=1)\nquery.someones_name\nquery.anothers_name\n</code></pre>\n\n<p>All I need is to get this one specific field I dynamicaly receive from <code>._meta.fields</code> (from another model) as a string.</p>\n\n<p>In RAW-SQL something like: <code>'SELECT %s FROM foo where pk = 1' % field_name</code></p>\n"},{"tags":["django","django-forms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":47,"score":-1,"question_id":13017449,"title":"Pre-populate password field in Django?","body":"<p>Is there a way to pre-populate a Django form password field so that it display something in the resulting <code>&lt;input type=\"password\"&gt;</code> html element? </p>\n\n<p>The default behavior seems to be not to display anything when the <code>MyForm(initial = {'passfield':'something'})</code> is set.</p>\n\n<p>I need this in order to implement an user edit form. I want to display a random string which if the user doesn't modify I will know that he does not want to change the password. So I don't think there is ANY security issue in what I'm trying to do.</p>\n"},{"tags":["django","reset","flush","django-syncdb","syncdb"],"answer_count":2,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":846,"score":5,"question_id":7598024,"title":"Django flush vs sqlclear & syncdb","body":"<p>Can anyone tell if there is a difference between </p>\n\n<pre><code>&gt;manage.py flush  # or reset\n</code></pre>\n\n<p>and</p>\n\n<pre><code>&gt;manage.py sqlclear appname | python manage.py dbshell\n&gt;manage.py syncdb \n</code></pre>\n"},{"tags":["django","django-queryset"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13017408,"title":"Exclude from django queryset those results that are referenced in another model's queryset","body":"<p>I'm using Django and have two classes:</p>\n\n<pre><code>class PR(models.Model):\n  Jq = models.ForeignKey(JQ)\n  user = models.ForeignKey(User)\n  (snip)\n  def __unicode__(self):\n        return self.name\n\nclass JQ(models.Model):\n  a = models.ForeignKey(A)\n  (snip)\n  def __unicode__(self):\n        return self.name\n</code></pre>\n\n<p>I want to perform a query where I grab all of the JQs that do not belong to a PR for a specified user. \nRight now, I'm doing this:</p>\n\n<pre><code> jq = JQ.objects.filter(somefield=someval)\n pr = PR.objects.filter(user=request.user.id)\n for r in pr:\n   jq = jq.exclude(id=r.Jq.id)\n</code></pre>\n\n<p>That is, I get all the JQs, then grab all PRs that reference a given user. I'm looping over all the PRs and excluding the JQs that are referenced by at least one PR. However, this is horribly inefficient. Any suggestions? </p>\n\n<p>(Btw, in native SQL, I'd probably create a temporary table of that user's PRs and then join that temporary table with the JQs and only keep the rows that don't have a match in the users PRs.)</p>\n\n<p>Thank you for your help!</p>\n"},{"tags":["django","django-forms"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13016352,"title":"Django - avoid capatcha, data being submitted by machine through automation","body":"<p>Is there any way to avoid captcha to identify the form is submitted by Human? Now a days, captcha is annoying for end user. So I am just curious to know, how to handle at backend?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":67,"score":3,"question_id":13017421,"title":"Is sleep() blocking the handling of requests in Django?","body":"<p>In Django, if the view uses a sleep() function while answering a request, does this block the handling of the whole queue of requests?</p>\n\n<p>If so, how to delay an http answer without this blocking behavior? Can we do that out-of-the-box and avoid using a job queue like Celeri?</p>\n"}]}
{"total":41213,"page":14,"pagesize":100,"questions":[{"tags":["python","django","query","django-mptt"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13015828,"title":"Access get_root of a MPTT model through a query","body":"<p>Consider below example:</p>\n\n<pre><code>class ModelX(models.Model):\n    fieldX = models.ForeignKey(ModelY)\n\nclass ModelY(MPTTModel):\n\n    def root(self):\n        return get_root()\n\n    root = property(root)\n</code></pre>\n\n<p>Now I would like to make query like this</p>\n\n<pre><code>ModelX.objects.filter(fieldX__root=match)\n</code></pre>\n\n<p>or better yet directly calling <code>get_root()</code> like this</p>\n\n<pre><code>ModelX.objects.filter(fieldX__get_root=match)\n</code></pre>\n\n<p>which would make the <code>root()</code> method superfluous.</p>\n\n<p>None of the above seem to work though. Why is that? </p>\n"},{"tags":["python","django","celery","django-celery"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13006151,"title":"How can I defer the execution of Celery tasks?","body":"<p>I have a small script that enqueues tasks for processing. This script makes a whole lot of database queries to get the items that should be enqueued. The issue I'm facing is that the celery workers begin picking up the tasks as soon as it is enqueued by the script. This is correct and it is the way celery is supposed to work but this often to deadlocks between my script and the celery workers.</p>\n\n<p>Is there a way I could enqueue all my tasks from the script but delay execution until the script has completed or until a fixed time delay?</p>\n\n<p>I couldn't find this the documentation of celery or django-celery. Is this possible?</p>\n\n<p>Currently as a quick-fix I've thought of adding all the items to processed into a list and when my script is done executing all the queries, I can simply iterate over the list and enqueue the tasks. Maybe this would resolve the issue but when you have thousands of items to enqueue, this might be a bad idea.</p>\n"},{"tags":["python","django","django-models","django-signals"],"answer_count":2,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13014411,"title":"Django post_save() signal implementation","body":"<p>I have a question about django.</p>\n\n<p>I have ManyToMany Models here</p>\n\n<pre><code>class Product(models.Model):\n     name = models.CharField(max_length=255)\n     price = models.DecimalField(default=0.0, max_digits=9, decimal_places=2)\n     stock = models.IntegerField(default=0)\n\n     def  __unicode__(self):\n         return self.name\n\nclass Cart(models.Model):\n    customer = models.ForeignKey(Customer)\n    products = models.ManyToManyField(Product, through='TransactionDetail')\n    t_date = models.DateField(default=datetime.now())\n    t_sum = models.FloatField(default=0.0)\n\n    def __unicode__(self):\n         return str(self.id)\n\nclass TransactionDetail(models.Model):\n    product = models.ForeignKey(Product)\n    cart = models.ForeignKey(Cart)\n    amount = models.IntegerField(default=0)\n</code></pre>\n\n<p>For 1 cart object created, I can insert as many as new TransactionDetail object (the product and amount). My question is. How can I implement the trigger? What I want is whenever a Transaction detail is created, I want the amount of the product's stock is substracted by the amount in the transactiondetail.</p>\n\n<p>I've read about post_save() but I'm not sure how to implement it.\nmaybe something like this </p>\n\n<p>when : post_save(TransactionDetail, \n           Cart) #Cart object where TransactionDetail.cart= Cart.id</p>\n\n<pre><code>Cart.stock -= TransactionDetail.amount\n</code></pre>\n"},{"tags":["django","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":241,"score":1,"question_id":5558004,"title":"Use django admin's readonly_fields with a FileField","body":"<p>When using the new <code>readonly_fields</code> attribute of the django <code>ModelAdmin</code> class, I found that if I put the name of a field that's defined as a <code>FileField</code> in the <code>readonly_fields</code>, it doesn't show a working link, it just shows the relative path. I'd like a downloadable link. </p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13014655,"title":"Extending django.forms.FloatField","body":"<p>I'm attempting to create a custom form field that works the same as float field for all intents and purposes, but that (by default) outputs the float value with no trailing zeros e.g. 33 rather than 33.0</p>\n\n<p>I attempted to simply extend django.forms.FloatField like so:</p>\n\n<pre><code>class CustomFloatField(django.forms.FloatField):\n\n    def to_python(self, value):\n        \"\"\"\n        Returns the value without trailing zeros.\n        \"\"\"\n        value = super(django.forms.FloatField, self).to_python(value)\n        # code to strip trailing zeros\n        return stripped_value\n</code></pre>\n\n<p>But this ended up with me getting validation errors. When I looked closer at the FloatField class I noticed that in its own <strong>to_python()</strong> method it calls <strong>super(IntegerField, self).to_python(value)</strong> which checks to ensure the value can be cast to an int, and it was here that my code seemed to trip up. This has left me thoroughly confused. How does FloatField work at all if it has to try and cast it's value to an int? :)</p>\n\n<p>Most likely I'm barking entirely up the wrong tree here but if someone could point me in the right direction I'd be grateful.</p>\n"},{"tags":["django","svg"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13016193,"title":"Django uploading SVG files","body":"<p>I am currently using ImageField for uploading images to my site. I discovered today that ImageField does not allow for uploading SVG. The reason being that with SVG files there are potential security issue, SVG files can contain malicious javascript. I could use FileField, but I am wondering if there are ways to use ImageField, or if I use FileField how do I insure that the SVG file is safe? </p>\n"},{"tags":["django"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12604597,"title":"override User model in Django or not?","body":"<p>i'm currently working with Django and i have to give users the availibility to register and log.\ni've read many documentations, and each one recommands extending User model.\nAre there limits to extend User model ? \nDo I have to build my own app or extend User model ?</p>\n"},{"tags":["python","django","monkeypatching"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12910665,"title":"How can I monkey-patch another package's admin class?","body":"<p>One of the packages that my Django project uses has a simple admin class that looks like:</p>\n\n<pre><code>class EventUpdateInline(admin.StackedInline):\n    model = EventUpdate\n\nclass EventAdmin(admin.ModelAdmin):\n    form = EventForm\n    list_display = ('date_created', 'description', 'status', 'date_updated')\n    search_fields = ('description', 'message')\n    list_filter = ('services',)\n    inlines = [EventUpdateInline]\n</code></pre>\n\n<p>I've written a custom <code>EventUpdateInline</code> class that I'd like to use. How can I replace the <code>EventUpdateInline</code> with my <code>CustomEventUpdateInline</code> class?</p>\n\n<p>That's the first issue. The second part of the problem is that I'd like to add a custom property to the <code>EventUpdate</code> model so that my <code>CustomEventUpdateInline</code> class can use it.</p>\n\n<p>Where would I put my code to import my <code>CustomEventUpdateInline</code> and replace the old one and old add the custom property to the <code>EventUpdate</code> model?</p>\n\n<p>I'm not sure if this is even possible. Thanks</p>\n"},{"tags":["django","foreign-key-relationship"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13014528,"title":"Change attribute of django sub-object on save","body":"<p>I have two models, a Project and an Action:</p>\n\n<pre><code>class Project(models.Model):\n    name = models.CharField(\"Project Name\", max_length=200, unique = True)\n    complete = models.BooleanField(default=False, verbose_name=\"Complete?\")\n\nclass Action(models.Model):\n    name = models.CharField(\"Action Name\", max_length=200)\n    project = models.ForeignKey(Project, blank=True, null=True, verbose_name=\"Project\")\n    notes = models.TextField(\"Notes\", blank=True)\n    complete = models.BooleanField(default=False, verbose_name=\"Complete?\")\n    status = models.IntegerField(\"Action Status\", choices = STATUS, default=0)\n</code></pre>\n\n<p>When a Project is marked as complete, I'd like all of it's Actions to be marked as complete as well.</p>\n\n<p>I'm trying to do this in the Project's save method:</p>\n\n<pre><code>    def save(self, **kw):\n        self.last_modified = datetime.today()\n        self.action.all().update(complete=True)\n\n        super(Project, self).save(**kw)\n</code></pre>\n\n<p>I'm stuck on that third line above.  I'm not quite sure how to set all actions connected to this project to complete.</p>\n"},{"tags":["django","django-admin","manytomanyfield"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":103,"score":1,"question_id":12918651,"title":"Adding values in my database via a ManyToMany relationship represented in admin.py","body":"<p>I've got a tiny little problem that, unfortunately, is taking all my time.</p>\n\n<p>It is really simple, I already have my database and I created then modified models.py, and admin.py. Some staff users, who will need to enter values in my database, need the simpliest form to do so.</p>\n\n<p>Here is my database :</p>\n\n<hr>\n\n<p>-- Table <code>NGSdb</code>.<code>line</code></p>\n\n<hr>\n\n<pre><code>CREATE  TABLE IF NOT EXISTS `NGSdb`.`line` (\n  `id` INT NOT NULL AUTO_INCREMENT ,\n  `value` INT NOT NULL ,\n  PRIMARY KEY (`id`) )\nENGINE = InnoDB;\n\n\nCREATE UNIQUE INDEX `value_UNIQUE` ON `NGSdb`.`line` (`value` ASC) ;\n</code></pre>\n\n<hr>\n\n<p>-- Table <code>NGSdb</code>.<code>run_has_sample_lines</code></p>\n\n<hr>\n\n<pre><code>CREATE  TABLE IF NOT EXISTS `NGSdb`.`run_has_sample_lines` (\n  `line_id` INT NOT NULL ,\n  `runhassample_id` INT NOT NULL ,\n  PRIMARY KEY (`line_id`, `runhassample_id`) ,\n  CONSTRAINT `fk_sample_has_line_line1`\n    FOREIGN KEY (`line_id` )\n    REFERENCES `NGSdb`.`line` (`id` )\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_sample_has_line_run_has_sample1`\n    FOREIGN KEY (`runhassample_id` )\n    REFERENCES `NGSdb`.`run_has_sample` (`id` )\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\n</code></pre>\n\n<hr>\n\n<p>-- Table <code>NGSdb</code>.<code>run_has_sample</code></p>\n\n<hr>\n\n<pre><code>CREATE  TABLE IF NOT EXISTS `NGSdb`.`run_has_sample` (\n  `id` INT NOT NULL AUTO_INCREMENT ,\n  `run_id` INT NOT NULL ,\n  `sample_id` INT NOT NULL ,\n  `dna_quantification_ng_per_ul` FLOAT NULL ,\n  PRIMARY KEY (`id`, `run_id`, `sample_id`) ,\n  CONSTRAINT `fk_run_has_sample_run1`\n    FOREIGN KEY (`run_id` )\n    REFERENCES `NGSdb`.`run` (`id` )\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION,\n  CONSTRAINT `fk_run_has_sample_sample1`\n    FOREIGN KEY (`sample_id` )\n    REFERENCES `NGSdb`.`sample` (`id` )\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION)\n</code></pre>\n\n<p>Here is my models.py :</p>\n\n<pre><code>class Run(models.Model):\n    id = models.AutoField(primary_key=True)   \n    start_date = models.DateField(null=True, blank=True, verbose_name='start date')\n    end_date = models.DateField(null=True, blank=True, verbose_name='end date')\n    project = models.ForeignKey(Project)\n    sequencing_type = models.ForeignKey(SequencingType)\n    def __unicode__(self):\n        return u\"run started %s from the project %s\" % (self.start_date,self.project)\n\n\nclass Line(models.Model):\n    id = models.AutoField(primary_key=True)\n    value = models.IntegerField()\n    def __unicode__(self):\n        return u\"%s\" % str(self.value)\n\n\nclass RunHasSample(models.Model):\nid = models.AutoField(primary_key=True)\nrun = models.ForeignKey(Run)\nsample = models.ForeignKey(Sample)\ndna_quantification_ng_per_ul = models.FloatField(null=True, blank=True)\nlines = models.ManyToManyField(Line)\ndef __unicode__(self):\n    return u\"Sample %s from run %s\" % (self.sample, self.run)\n</code></pre>\n\n<p>And here is my admin.py :</p>\n\n<pre><code>class RunHasSamplesInLine(admin.TabularInline):\n    model = RunHasSample\n    fields = ['sample', 'dna_quantification_ng_per_ul', 'lines']    \n    extra = 6\n\nclass RunAdmin(admin.ModelAdmin):\n    fields = ['project', 'start_date', 'end_date', 'sequencing_type']\n    inlines = [RunHasSamplesInLine]\n    list_display = ('project', 'start_date', 'end_date', 'sequencing_type') \n</code></pre>\n\n<p>As you can see, my samples are displayed in lines in the run form so that the staff can easily fullfill the database.\nWhen I try to fill the database I have this error :</p>\n\n<blockquote>\n  <p>(1054, \"Unknown column 'run_has_sample_lines.id' in 'field list'\")</p>\n</blockquote>\n\n<p>Of course, there are no field \"lines\" in my database ! It is a many to many field so I already created my intermediate table !</p>\n\n<p>Okay okay ! So I tried to create the model for the intermediate table (run_has_sample_lines) and add a \"through\" to the ManyToManyField in the RunHasSample model. But, as I add manually the \"through\", I cannot use the ManyToMany field. The only way to add lines to the admin view is to stack them in lines... As you can see the samples are already in lines, it is impossible to put a new \"inlines\" in the already in lines samples...</p>\n\n<p>Finally, I just tried to see what django had created with the manage.py sqlall. \nI see that :</p>\n\n<pre><code> CREATE TABLE `run_has_sample_lines` (\n    `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY,\n    `runhassample_id` integer NOT NULL,\n    `line_id` integer NOT NULL,\n    UNIQUE (`runhassample_id`, `line_id`)\n)\n;\nALTER TABLE `run_has_sample_lines` ADD CONSTRAINT `line_id_refs_id_4f0766aa` FOREIGN KEY (`line_id`) REFERENCES `line` (`id`);\n</code></pre>\n\n<p>It seems that there are no foreign key on the run_has_sample table whereas I created it in the database in the first place. I guess that the problem is coming from here but I cannot resolve it and I really hope that you can...</p>\n\n<p>Thank you very much !</p>\n"},{"tags":["python","django","frameworks","stringio"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":215,"score":1,"question_id":8496711,"title":"What is StringIO() used for in this script?","body":"<p>I just started using Django and Python and I'm trying to build a photo app. This script is generating thumbnails and I'd like to do that myself. Unfortunately I don't understand what <code>StringIO()</code> is doing. The Python Docs aren't very helpful to me in that case.</p>\n\n<p>Can someone please explain to me what <code>StringIO()</code> does in this particular case?</p>\n\n<p>From <a href=\"http://djangosnippets.org/snippets/1172/\" rel=\"nofollow\">http://djangosnippets.org/snippets/1172/</a>:</p>\n\n<pre><code>def save(self):\n    from PIL import Image\n    #Original photo\n    imgFile = Image.open(self.image.path)\n\n    #Convert to RGB\n    if imgFile.mode not in ('L', 'RGB'):\n        imgFile = imgFile.convert('RGB')\n\n    #Save a thumbnail for each of the given dimensions\n    #The IMAGE_SIZES looks like:\n    #IMAGE_SIZES = { 'image_web'      : (300, 348),\n    #                'image_large'    : (600, 450),\n    #                'image_thumb'    : (200, 200) }\n    #each of which corresponds to an ImageField of the same name\n    for field_name, size in self.IMAGE_SIZES.iteritems():\n        field = getattr(self, field_name)\n        working = imgFile.copy()\n        working.thumbnail(size, Image.ANTIALIAS)\n        fp = StringIO()\n        working.save(fp, \"JPEG\", quality=95)\n        cf = ContentFile(fp.getvalue())\n        field.save(name=self.image.name, content=cf, save=False);\n\n    #Save instance of Photo\n    super(Photo, self).save()\n</code></pre>\n"},{"tags":["django","django-templates","django-forms"],"answer_count":3,"favorite_count":7,"up_vote_count":3,"down_vote_count":0,"view_count":1801,"score":3,"question_id":1246322,"title":"Get previously entered information in Django FormWizard","body":"<p>I'm trying to create a simple Django multi-page form using FormWizard. What the form should do is the following:</p>\n\n<ol>\n<li>Let the visitor enter first and lastname in a form.</li>\n<li>Continue to next page where entered previously firstname and lastname will be displayed, there will also be a field on this page that let's the visitor enter a message.</li>\n<li>The visistor will be taken to the Django done.html page where all information will be stored and displayed.</li>\n</ol>\n\n<p>In step 2, I'm having trouble figuring out how to display the information that the visitor entered in step 1. I'm posting the code for the forms and the two templates used for step 1 and 2 below:</p>\n\n<p>forms.py</p>\n\n<pre><code>from django import forms\nfrom django.shortcuts import render_to_response\nfrom django.contrib.formtools.wizard import FormWizard\n\nclass ContactWizard(FormWizard):\n\tdef done(self, request, form_list):\n\t\treturn render_to_response('done.html', {\n\t\t\t'form_data': [form.cleaned_data for form in form_list],\n\t\t})\n\n\tdef get_template(self, step):\n\t\treturn 'buydomain/templates/reg%s.html' % step\n\nclass Form1(forms.Form):\n\tfirstName = forms.CharField()\n\tlastName = forms.CharField()\n\nclass Form2(forms.Form):\n\tmessage = forms.CharField(widget=forms.Textarea)\n</code></pre>\n\n<p>template for step 1:</p>\n\n<pre><code>{% block content %}\n&lt;p&gt;Step {{ step }} of {{ step_count }}&lt;/p&gt;\n&lt;form action=\".\" method=\"post\"&gt;\n&lt;table&gt;\n{{ form }}\n&lt;/table&gt;\n&lt;input type=\"hidden\" name=\"{{ step_field }}\" value=\"{{ step0 }}\" /&gt;\n{{ previous_fields|safe }}\n&lt;input type=\"submit\"&gt;\n&lt;/form&gt;\n{% endblock %}\n</code></pre>\n\n<p>template for step 2:</p>\n\n<pre><code>{% block content %}\n&lt;p&gt;Step {{ step }} of {{ step_count }}&lt;/p&gt;\n\n\n{% comment %}\nShow values entered into Form1 here !\n{% endcomment %}\n\n&lt;form action=\".\" method=\"post\"&gt;\n&lt;table&gt;\n{{ form }}\n&lt;/table&gt;\n&lt;input type=\"hidden\" name=\"{{ step_field }}\" value=\"{{ step0 }}\" /&gt;\n{{ previous_fields|safe }}\n&lt;input type=\"submit\"&gt;\n&lt;/form&gt;\n{% endblock %}\n</code></pre>\n\n<p>I apologize if I'm somewhat unclear about what I want to achieve, and I'm hopefully waiting for someone to supply a solution. Thanks in advance.</p>\n"},{"tags":["django","apache","django-admin","django-cms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":56,"score":-1,"question_id":13011487,"title":"Django Admin - Multiple Sites with same root URL","body":"<p>Is it possible to have the following configuration in Django:\nexample.com\nexample.com/site1</p>\n\n<p>where example.com and example.com/site1 are two separate independent django applications. example.com must have a completely different group of users and use a different database than example.com/site1.</p>\n\n<p>I researched django and it has a feature called \"sites\", but \"sites\" only seems to work with 2 different domains (like example.com and site1.example.com)</p>\n\n<p>I'm using Django 1.4 and Django-CMS on Apache server with mod-wsgi.</p>\n\n<p>Here are my configuration files:\n1. apache virtualhost.conf configuration is:</p>\n\n<pre><code>WSGIScriptAlias /site1 /var/www/site1\nAlias /site1-media/ /var/www/site1/media/\n&lt;Directory /var/www/site1/media&gt;\n   Options FollowSymLinks\n   Order allow, deny\n   Allow from all\n&lt;/Directory&gt;\nAlias site1-static/ /var/www/site1/static/\n&lt;Directory /var/www/site1/static&gt;\n   Options FollowSymLinks\n   Order allow, deny\n   Allow from all\n&lt;/Directory&gt;\n\nWSGIScriptAlias / /var/www/main-app\nAlias /media/ /var/www/main-app/media/\n&lt;Directory /var/www/main-app/media&gt;\n   Options FollowSymLinks\n   Order allow, deny\n   Allow from all\n&lt;/Directory&gt;\nAlias /static/ /var/www/main-app/static/\n&lt;Directory /var/www/main-app/static&gt;\n   Options FollowSymLinks\n   Order allow, deny\n   Allow from all\n&lt;/Directory&gt;\n</code></pre>\n\n<p>Urls.Py for main-app (example.com)</p>\n\n<pre><code>from django.conf.urls.defaults import *\nfrom django.contrib import admin\nfrom django.conf import settings\nfrom django.conf.urls.i18n import i18n_patterns\nadmin.autodiscover()\n\nurlpatterns = patterns('',\n    #url(r'^i18n/', include('django.conf.urls.i18n')),\n    url(r'^admin/', include(admin.site.urls)),\n    url(r'^', include('cms.urls'), name='cms'),\n)\n</code></pre>\n\n<p>settings.py for the main app (example.com)</p>\n\n<pre><code>&gt; # -*- coding: utf-8 -*- import os\n&gt; \n&gt; gettext = lambda s: s\n&gt; \n&gt; PROJECT_DIR = os.path.abspath(os.path.dirname(__file__))\n&gt; \n&gt; DEBUG = True TEMPLATE_DEBUG = DEBUG\n&gt; \n&gt; ADMINS = (\n&gt;     # ('Your Name', 'your_email@domain.com'), )\n&gt; \n&gt; MANAGERS = ADMINS\n&gt; \n&gt; LANGUAGES = (             ('en', 'English'),          ('fi', 'Finnish'),  )\n&gt; \n&gt; \n&gt; DATABASES = {\n&gt;     'default': {\n&gt;         'ENGINE': 'django.db.backends.sqlite3',\n&gt;         'NAME': os.path.join(PROJECT_DIR, 'db/db.sqlite'),\n&gt;     } }\n&gt; \n&gt; # Local time zone for this installation. Choices can be found here:\n&gt; # http://en.wikipedia.org/wiki/List_of_tz_zones_by_name\n&gt; # although not all choices may be available on all operating systems.\n&gt; # On Unix systems, a value of None will cause Django to use the same\n&gt; # timezone as the operating system.\n&gt; # If running in a Windows environment this must be set to the same as your\n&gt; # system time zone. TIME_ZONE = 'Europe/Helsinki'\n&gt; \n&gt; # Language code for this installation. All choices can be found here:\n&gt; # http://www.i18nguy.com/unicode/language-identifiers.html LANGUAGE_CODE = 'en-US'\n&gt; \n&gt; CMS_HIDE_UNTRANSLATED=True\n&gt; \n&gt; CMS_LANGUAGES = (     ('en', gettext('English')),\n&gt;     ('fi', gettext('Finnish')),\n&gt;      )\n&gt; \n&gt; \n&gt; \n&gt; SITE_ID = 1\n&gt; \n&gt; # If you set this to False, Django will make some optimizations so as not\n&gt; # to load the internationalization machinery. USE_I18N = True\n&gt; \n&gt; # If you set this to False, Django will not format dates, numbers and\n&gt; # calendars according to the current locale USE_L10N = True\n&gt; \n&gt; # Absolute filesystem path to the directory that will hold user-uploaded files.\n&gt; # Example: \"/home/media/media.lawrence.com/\" MEDIA_ROOT = os.path.join(PROJECT_DIR, 'media')\n&gt; \n&gt; STATIC_ROOT = os.path.join(PROJECT_DIR, 'static')\n&gt; \n&gt; # URL that handles the media served from MEDIA_ROOT. Make sure to use a\n&gt; # trailing slash if there is a path component (optional in other cases).\n&gt; # Examples: \"http://media.lawrence.com\", \"http://example.com/media/\" MEDIA_URL = '/media/'\n&gt; \n&gt; STATIC_URL = '/static/'\n&gt; \n&gt; # URL prefix for admin media -- CSS, JavaScript and images. Make sure to use a\n&gt; # trailing slash.\n&gt; # Examples: \"http://foo.com/media/\", \"/media/\". ADMIN_MEDIA_PREFIX = '/static/admin/'\n&gt; \n&gt; \n&gt; # List of callables that know how to import templates from various sources. TEMPLATE_LOADERS = (\n&gt;     'django.template.loaders.filesystem.Loader',\n&gt;     'django.template.loaders.app_directories.Loader', )\n&gt; \n&gt; \n&gt; MIDDLEWARE_CLASSES = (\n&gt;     'django.middleware.common.CommonMiddleware',\n&gt;     'django.contrib.sessions.middleware.SessionMiddleware',\n&gt;     'django.middleware.csrf.CsrfViewMiddleware',\n&gt;     #'cms.middleware.multilingual.MultilingualURLMiddleware',\n&gt;     'django.contrib.auth.middleware.AuthenticationMiddleware',\n&gt;     'django.contrib.messages.middleware.MessageMiddleware',\n&gt;     'cms.middleware.multilingual.MultilingualURLMiddleware',\n&gt;     'cms.middleware.page.CurrentPageMiddleware',\n&gt;     'cms.middleware.user.CurrentUserMiddleware',\n&gt;     'cms.middleware.toolbar.ToolbarMiddleware',\n&gt;      )\n&gt; \n&gt; TEMPLATE_CONTEXT_PROCESSORS = (\n&gt;     'django.contrib.auth.context_processors.auth',\n&gt;     'django.core.context_processors.i18n',\n&gt;     'django.core.context_processors.request',\n&gt;     'django.core.context_processors.media',\n&gt;     'django.core.context_processors.static',\n&gt;     'cms.context_processors.media',\n&gt;     'sekizai.context_processors.sekizai', )\n&gt; \n&gt; CMS_TEMPLATES = (\n&gt;     ('eihome.html', 'Environmental Informatics Template'),\n&gt;     ('kaupunkilaboratorio.html', 'Kaupunkilaboratorio Template'), )\n&gt; \n&gt; \n&gt; \n&gt; ROOT_URLCONF = 'projects.urls'\n&gt; \n&gt; TEMPLATE_DIRS = (\n&gt;     os.path.join(PROJECT_DIR, 'templates'), )\n&gt; \n&gt; INSTALLED_APPS = (\n&gt;     'django.contrib.auth',\n&gt;     'django.contrib.contenttypes',\n&gt;     'django.contrib.sessions',\n&gt;     'django.contrib.sites',\n&gt;     'django.contrib.messages',\n&gt;     'django.contrib.admin',\n&gt;     'django.contrib.staticfiles',\n&gt;     'cms',\n&gt;     'menus',\n&gt;     'mptt',\n&gt;     'south',\n&gt;     'cms.plugins.text',\n&gt;     'cms.plugins.picture',\n&gt;     'cms.plugins.link',\n&gt;     'cms.plugins.file',\n&gt;     'cms.plugins.snippet',\n&gt;     'sekizai',\n&gt;     \n&gt;      )\n</code></pre>\n\n<p>urls.py for site1 app (example.com/site1)</p>\n\n<pre><code>from django.conf.urls.defaults import *\nfrom django.contrib import admin\nfrom django.conf import settings\nfrom django.conf.urls.i18n import i18n_patterns\nadmin.autodiscover()\n\nurlpatterns = patterns('',\n    #url(r'^i18n/', include('django.conf.urls.i18n')),\n    url(r'^admin/', include(admin.site.urls)),\n    url(r'^', include('cms.urls'), name='cms'),\n)\n</code></pre>\n\n<p>settings.py for site1 app (example.com/site1)</p>\n\n<pre><code>    # -*- coding: utf-8 -*-\nimport os\n\ngettext = lambda s: s\n\nPROJECT_DIR = os.path.abspath(os.path.dirname(__file__))\n\nDEBUG = True\nTEMPLATE_DEBUG = DEBUG\n\nADMINS = (\n    # ('Your Name', 'your_email@domain.com'),\n)\n\nMANAGERS = ADMINS\n\nLANGUAGES = (\n            ('fi', 'Finnish'),\n    )\n\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': os.path.join(PROJECT_DIR, 'db/db.sqlite'),\n    }\n}\n\n# Local time zone for this installation. Choices can be found here:\n# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name\n# although not all choices may be available on all operating systems.\n# On Unix systems, a value of None will cause Django to use the same\n# timezone as the operating system.\n# If running in a Windows environment this must be set to the same as your\n# system time zone.\nTIME_ZONE = 'Europe/Helsinki'\n\n# Language code for this installation. All choices can be found here:\n# http://www.i18nguy.com/unicode/language-identifiers.html\nLANGUAGE_CODE = 'en-US'\n\nCMS_HIDE_UNTRANSLATED=True\n\nCMS_LANGUAGES = (\n    ('en', gettext('English')),\n    ('fi', gettext('Finnish')),\n\n)\n\n\n\nSITE_ID = 100\n\n# If you set this to False, Django will make some optimizations so as not\n# to load the internationalization machinery.\nUSE_I18N = True\n\n# If you set this to False, Django will not format dates, numbers and\n# calendars according to the current locale\nUSE_L10N = True\n\n# Absolute filesystem path to the directory that will hold user-uploaded files.\n# Example: \"/home/media/media.lawrence.com/\"\nMEDIA_ROOT = os.path.join(PROJECT_DIR, 'media')\n\nSTATIC_ROOT = os.path.join(PROJECT_DIR, 'static')\n\n# URL that handles the media served from MEDIA_ROOT. Make sure to use a\n# trailing slash if there is a path component (optional in other cases).\n# Examples: \"http://media.lawrence.com\", \"http://example.com/media/\"\nMEDIA_URL = '/site1-media/'\n\nSTATIC_URL = '/site1-static/'\n\n# List of callables that know how to import templates from various sources.\nTEMPLATE_LOADERS = (\n    'django.template.loaders.filesystem.Loader',\n    'django.template.loaders.app_directories.Loader',\n)\n\n\nMIDDLEWARE_CLASSES = (\n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    #'cms.middleware.multilingual.MultilingualURLMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n  #  'cms.middleware.multilingual.MultilingualURLMiddleware',\n    'cms.middleware.page.CurrentPageMiddleware',\n    'cms.middleware.user.CurrentUserMiddleware',\n    'cms.middleware.toolbar.ToolbarMiddleware',\n\n)\n\nTEMPLATE_CONTEXT_PROCESSORS = (\n    'django.contrib.auth.context_processors.auth',\n    'django.core.context_processors.i18n',\n    'django.core.context_processors.request',\n    'django.core.context_processors.media',\n    'django.core.context_processors.static',\n    'cms.context_processors.media',\n    'sekizai.context_processors.sekizai',\n)\n\nCMS_TEMPLATES = (\n    ('eihome.html', 'Environmental Informatics Template'),\n    ('kaupunkilaboratorio.html', 'Kaupunkilaboratorio Template'),\n)\n\n\n\nROOT_URLCONF = 'projects.urls'\n\nTEMPLATE_DIRS = (\n    os.path.join(PROJECT_DIR, 'templates'),\n)\n\nINSTALLED_APPS = (\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    'django.contrib.messages',\n    'django.contrib.admin',\n    'django.contrib.staticfiles',\n    'cms',\n    'menus',\n    'mptt',\n    'south',\n    'cms.plugins.text',\n    'cms.plugins.picture',\n    'cms.plugins.link',\n    'cms.plugins.file',\n    'cms.plugins.snippet',\n    'sekizai',\n\n\n)\n</code></pre>\n\n<p>In /var/www/main-app/static I have symbolic links:\nadmin -> /usr/lib/python2.6/site-packages/django/contrib/admin/static/admin//\ncms -> /usr/lib/python2.6/site-packages/cms/static/cms//</p>\n\n<p>In /var/www/site1/static I have the same symbolic links:\nadmin -> /usr/lib/python2.6/site-packages/django/contrib/admin/static/admin//\ncms -> /usr/lib/python2.6/site-packages/cms/static/cms//</p>\n"},{"tags":["jquery","python","ajax","django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13013838,"title":"Saving file uploaded via ajax to Django model ImageField","body":"<p>The file is available as raw data in the request. How am I supposed to transform it to be saved on the disk represented by the <code>ImageField</code> inside a <code>model</code>.</p>\n\n<p>Tried stuff:</p>\n\n<pre><code>file_ = File(request)\nmodelinstance.picture.save(filename, file_, save=False)\nmodelinstance.save()\n</code></pre>\n\n<p>and some variants of the above. An example on how to do this inside the django view would help.</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","django","oauth","python-2.7","oauth-2.0"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13013931,"title":"How to actually use rauth python lib for Django","body":"<p>The python lib mentioned in OAuth website <a href=\"https://rauth.readthedocs.org/en/latest/\" rel=\"nofollow\">rauth</a> seems to be simple and best one to use. So, I want to use it in Django and unable to actually implement it.</p>\n\n<p>Here is my issue.</p>\n\n<pre><code># I do something like this initially\nfrom rauth.service import OAuth2Service\nfrom django.shortcuts import render_to_response\ndef page(request):\n    service = OAuth2Service(\n                           consumer_key = \"..\",\n                           consumer_secret = \"...\",\n                           .. )\n    url = service.get_authorize_url(redirect_uri=\"http://mysite.com/redired-url\")\n    # this url is where the user accepts or not.\n    # which redirects with authorization code.\n    return HttpResponseRedirect(url)\n</code></pre>\n\n<p>Now, when user opens page, it directly redirects and asks user to allow or reject.. If user allows, we get authorization code at redirect-url</p>\n\n<p>To get access token from authorization token,</p>\n\n<p>rauth lib mentions to do so which I have to put under a different view corresponding to redirect-url</p>\n\n<pre><code>data = dict(code='foobar',\n            grant_type='authorization_code',\n            redirect_uri='http://example.com/')\ntoken = service.get_access_token('POST', data=data)\n</code></pre>\n\n<p>The problem is with <code>service</code> object. I created <code>service</code> instance in one view, i need to use it in another view to get access token..</p>\n\n<p>Where I am going wrong..? How to get it done.</p>\n"},{"tags":["python","django","http","pdf","reportlab"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":102,"score":0,"question_id":12811210,"title":"Django PDF: How to display progress in browser?","body":"<p>The file will not display until the whole file is loaded. How can i display the  progress in browser?</p>\n\n<pre><code>from io import BytesIO\nfrom reportlab.pdfgen import canvas\nfrom django.http import HttpResponse\n\ndef some_view(request):\n     # Create the HttpResponse object with the appropriate PDF headers.\n     response = HttpResponse(mimetype='application/pdf')\n     response['Content-Disposition'] = 'attachment; filename=\"somefilename.pdf\"'\n\n     buffer = BytesIO()\n\n     # Create the PDF object, using the BytesIO object as its \"file.\"\n     p = canvas.Canvas(buffer)\n\n     p.drawString(**, **, \"Hello world.\") # draw pdf, size &gt; 10M\n\n     # Close the PDF object cleanly.\n     p.showPage()\n     p.save()\n\n     # Get the value of the BytesIO buffer and write it to the response.\n     pdf = buffer.getvalue()\n     buffer.close()\n     response.write(pdf)\n     return response\n</code></pre>\n"},{"tags":["django","authentication","linkedin"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":93,"score":3,"question_id":12853038,"title":"Unable to get Linkedin auth to work with django-social-auth","body":"<p>I am trying to configure Linkedin auth on my Django website. I use <a href=\"http://django-social-auth.readthedocs.org/en/latest/index.html#\" rel=\"nofollow\">django-social-auth</a> I follow the steps mentioned in the <a href=\"http://django-social-auth.readthedocs.org/en/latest/configuration.html\" rel=\"nofollow\">Docs</a>. I have been stuck on this for quite some time.</p>\n\n<pre><code>My settings.py\n\nINSTALLED_APPS = (\n'django.contrib.auth',\n'django.contrib.contenttypes',\n'django.contrib.sessions',\n'django.contrib.sites',\n'django.contrib.admin',\n'social_auth',\n\n'mytests'\n)\n\nAUTHENTICATION_BACKENDS = ( 'social_auth.backends.contrib.linkedin.LinkedinBackend',\n                            'django.contrib.auth.backends.ModelBackend',)\n\nTEMPLATE_CONTEXT_PROCESSORS = (\n'django.contrib.auth.context_processors.auth',\n'django.core.context_processors.debug',\n'django.core.context_processors.i18n',\n'django.core.context_processors.media',\n'django.contrib.messages.context_processors.messages',\n'social_auth.context_processors.social_auth_by_name_backends',\n'social_auth.context_processors.social_auth_backends',\n'social_auth.context_processors.social_auth_by_type_backends',\n'social_auth.context_processors.social_auth_login_redirect',\n)\n\nSOCIAL_AUTH_ENABLED_BACKENDS = ('linkedin',)\n\nLINKEDIN_CONSUMER_KEY        = 'py5pspq52ypesv' #API Key\nLINKEDIN_CONSUMER_SECRET     = 'OyzsrC5GqIo85z9GsWc' #Secret Key\n\nLOGIN_REDIRECT_URL = 'checkbox'\nLOGIN_ERROR_URL = '/login-error/'\n\nSOCIAL_AUTH_COMPLETE_URL_NAME  = 'socialauth_complete'\nSOCIAL_AUTH_ASSOCIATE_URL_NAME = 'socialauth_associate_complete'\n</code></pre>\n\n<p>urls.py</p>\n\n<pre><code>url(r'', include('social_auth.urls')),\n</code></pre>\n\n<p>And in my Template</p>\n\n<pre><code>&lt;a href=\"{% url socialauth_begin 'linkedin' %}\"&gt;linkedin&lt;/a&gt;\n</code></pre>\n\n<p>I get Error</p>\n\n<pre><code>Error!\n  Sorry but some error made you impossible to login.\n\n  Please try again Home\n</code></pre>\n"},{"tags":["django","django-views","django-multilingual"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13012183,"title":"How to retrieve language settings from within view?","body":"<p>I want to set up a very small site in three different languages. </p>\n\n<p>Basically I want to use a <strong>single  view</strong> that sends back different data <strong>to the same template</strong> dependent on the selected language (all data is in one table anyway). </p>\n\n<p>I just read through the <a href=\"https://docs.djangoproject.com/en/dev/topics/i18n/translation/#internationalization-in-python-code\" rel=\"nofollow\">internationalization</a> documentation which gives a good overview but I still don't really get how to render the right kind of content based on a selected language. It seems as if I can extract this information with the <a href=\"https://docs.djangoproject.com/en/1.2/ref/templates/api/#subclassing-context-requestcontext\" rel=\"nofollow\">requestcontext</a> class but how exactly? Or am I over complicating things? Can somebody provide a good example? </p>\n"},{"tags":["python","django","apache","mod-wsgi"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13011701,"title":"apache mod_wsgi crashes only in daemon mode","body":"<p>I was using apache webserver and mod_python as my interface.I am in the process of moving from mod_python to mod_wsgi. I have done all the setup and everything was working fine. Now when i added the following line(to enable daemon mode), the site was not working.</p>\n\n<pre><code>WSGIDaemonProcess test.tessite.com processes=5 threads=10 display-name=%{GROUP}\n</code></pre>\n\n<p>I got a 500 error as response from the server. When i looked into Apache's error log, i have the follwoing,</p>\n\n<pre><code>[Mon Oct 22 12:31:07 2012] [error] [client 58.68.24.230] Premature end of script headers: ls.wsgi\n</code></pre>\n\n<p>This is my WSGI setup in conf,</p>\n\n<pre><code>#Set the number of process and threads for each process. process*thread number of requests can be handled at a time\nWSGIDaemonProcess test.testsite.com processes=5 threads=10 display-name=%{GROUP}\n#Sets which process group WSGI application is assigned to.\nWSGIProcessGroup test.testsite.com\n#Maps a URL to a filesystem location and designates the target as a WSGI script.\nWSGIScriptAlias / /public/gdp/trunk/src/ukl/lis/process/ls.wsgi\n&lt;Directory /public/gdp/trunk/src/ukl/lis/process/&gt;\n    Order allow,deny\n    Allow from all\n&lt;/Directory&gt;\n</code></pre>\n\n<p>Why does this happen only in Daemon mode? How, to fix this problem? Is it safe to run in a non-daemon mode?</p>\n"},{"tags":["django","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13011996,"title":"Get all URL's from Tastypie","body":"<p>I am using Tastypie with Django and want to get a list of all URL's accessible via the api, is there a method oder URL I can call?</p>\n"},{"tags":["python","django","mezzanine"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":13012201,"title":"Tutorials or how-to's for learning Mezzanine?","body":"<p>I want to use a Python CMS for a project featuring:</p>\n\n<ul>\n<li>Light workflow logic (custom forms, sending emails, viewing some historical data) </li>\n<li>Integrated Blog</li>\n<li>Pay via paypal</li>\n<li>Authentication (users create accounts using email addresses + password)</li>\n</ul>\n\n<p>Wanting to not re-create the wheel, I figured it'd be best to add the custom parts into an existing CMS that should give us the bottom three components out of the box (blog, shopping cart, authentication).</p>\n\n<p>From the sounds of things, <a href=\"http://mezzanine.jupo.org/\" rel=\"nofollow\">http://mezzanine.jupo.org/</a> is right up this alley.</p>\n\n<p>I've been reading the <a href=\"http://mezzanine.jupo.org/docs/\" rel=\"nofollow\">documentation</a> off and on for a week in my downtime, and have had no trouble setting up a site using <a href=\"http://www.rosslaird.com/blog/first-steps-with-mezzanine/\" rel=\"nofollow\">this tutorial</a>.  </p>\n\n<p>But here I'm stuck.  The docs do a good job of going over the features of the site, but I'm left a little in the dark for how to connect the dots, for instance, if I wanted to integrate the shopping cart functionality or set up a page so that when a user logs in, they see a notification on the page.</p>\n\n<p>I haven't been able to find much from Googling \"how to...\" stuff for Mezzanine.  Can anyone help direct me to where I can learn more about how to use it?  Otherwise I'll likely putz around in it a while longer and start to investigate alternatives...</p>\n\n<p>Thanks for any help.</p>\n\n<p><strong>Update</strong></p>\n\n<p>I'm starting to get a better sense from reading the <a href=\"https://docs.djangoproject.com/en/dev/intro/tutorial01/\" rel=\"nofollow\">Django tutorials</a>.  </p>\n"},{"tags":["python","django","oauth-2.0","django-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":56,"score":-3,"question_id":13011403,"title":"Good OAuth 2.0 library in python and Django","body":"<p>I am looking for a good OAuth2 python lib that would certainly free me from thinking about it.. I went through oauthlib and other python, django related libs but they are either too complicated for novice or not properly documented..</p>\n\n<p>Can anyone help me on it? considering a novice/ beginner/ a student in mind</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":127,"score":0,"question_id":856205,"title":"Returning html tags in Django","body":"<p>I have a view function, which is returning a HTML page:</p>\n\n<pre><code>render_to_response(\"test.html\", {test: value, somehtml: '&lt;h1&gt;t&lt;h1&gt;'})\n</code></pre>\n\n<p>Now, the <code>somehtml</code> value is rendered as a string and not as HTML with tags. How can I return HTML tags in my template?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":41,"score":-4,"question_id":13010815,"title":"show html tags in a parameter in a template in django","body":"<p>I'm using django to show a page. I have a view like this:</p>\n\n<pre><code>def helpShow(request,url):\n    content = Help.objects.get(url = url).content\n    return render_to_response('helpSettings/help.html',{\n        'content':content,\n        },\n        RequestContext(request, ))\n</code></pre>\n\n<p>And this is my template in help.html:</p>\n\n<pre><code>{{ content}}\n</code></pre>\n\n<p>The problem is the content has some html tags like this:</p>\n\n<pre><code>&lt;b&gt; hello &lt;/b&gt;\n</code></pre>\n\n<p>and it shows it with tags(for example translate &lt; to &amp;lt) but I want it to be shown like this:</p>\n\n<p><strong>hello</strong></p>\n"},{"tags":["django","django-models","django-admin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13009545,"title":"Django: adding model to admin site","body":"<p>I dont know what i am doing wrong but i cant add model to my admin .</p>\n\n<p>settings.py</p>\n\n<pre><code>INSTALLED_APPS = (\n'django.contrib.auth',\n'django.contrib.contenttypes',\n'django.contrib.sessions',\n'django.contrib.sites',\n'django.contrib.messages',\n'django.contrib.admin',\n'django.contrib.admindocs',\n'RM.cal',\n'release',\n'south',\n</code></pre>\n\n<p>)</p>\n\n<pre><code>MIDDLEWARE_CLASSES = (\n'django.middleware.common.CommonMiddleware',\n'django.contrib.sessions.middleware.SessionMiddleware',\n'django.middleware.csrf.CsrfViewMiddleware',\n'django.contrib.auth.middleware.AuthenticationMiddleware',\n'django.contrib.messages.middleware.MessageMiddleware',\n'django.middleware.gzip.GZipMiddleware',\n'django_notify.middleware.NotificationsMiddleware',\n'django.contrib.messages.middleware.MessageMiddleware',\n</code></pre>\n\n<p>)</p>\n\n<pre><code>TEMPLATE_CONTEXT_PROCESSORS = (\n        global_settings.TEMPLATE_CONTEXT_PROCESSORS +\n        ('django.core.context_processors.request','django.contrib.messages.context_processors.messages',)\n\n )\n</code></pre>\n\n<p>admin.py</p>\n\n<pre><code>from cal.models import *\nfrom django.contrib import admin\nadmin.site.register(Cos)\n</code></pre>\n\n<p>urls.py</p>\n\n<pre><code> from django.conf.urls.defaults import *\n\n# Uncomment the next two lines to enable the admin:\nfrom django.contrib import admin\nadmin.autodiscover()\n\nurlpatterns = patterns('',\n# Example:\n# (r'^RM/', include('RM.foo.urls')),\n(r'^cal/', include('RM.cal.urls')),\n\n# Uncomment the admin/doc line below to enable admin documentation:\n# (r'^admin/doc/', include('django.contrib.admindocs.urls')),\n\n# Uncomment the next line to enable the admin:\n(r'^admin/', include(admin.site.urls)),\n(r'^site_media/(?P&lt;path&gt;.*)$', 'django.views.static.serve',\n    {'document_root': 'C:/Users/sg0217297/Desktop/test/tkt_crmt/RM/media'}),\n</code></pre>\n\n<p>models.py its new field just for testing but i can add it to admin  ;/ </p>\n\n<pre><code>from django.db import models\nfrom django.contrib import admin\nclass Cos(models.Model):\n    name = models.CharField(max_length=400, blank= False , null = True)\n\n    def __unicode__(self):\n    return self.name\n</code></pre>\n\n<p>Any idea why ??</p>\n\n<p>Thanks for help </p>\n\n<p>E:\nUpdated urls.py </p>\n"},{"tags":["django","multilingual","django-urls","django-multilingual"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":13009491,"title":"issues with url in multiple languages","body":"<p>I am using  the concept of multiple languages in my project, and everything works fine.</p>\n\n<p>But i am having some queries about my url.</p>\n\n<p>When i am using this <em>url</em> <strong>www.asd.com/reg/?lang=es</strong>, then it display the data in spanish form.</p>\n\n<p>But if i am using this <em>url</em> <strong>www.asd.com/reg/lang=es</strong>, then it does not display data in spanish.</p>\n\n<p>The difference between two url is <strong>\"?\"</strong> , so can anybody suggest me some way with which I can accomplish my task without this <strong>\"?\"</strong> </p>\n\n<p>Thanks</p>\n"},{"tags":["django","django-forms"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":462,"score":4,"question_id":4962852,"title":"Django: How can I modify a form field's value before it's rendered but after the form has been initialized?","body":"<p>Given a form, I want to change a value on a field before it gets rendered. This is what I'm trying:</p>\n\n<pre><code>class RequiredFormSet(BaseFormSet):\n    def add_form(self):\n        tfc = self.total_form_count()\n        self.forms.append(self._construct_form(tfc))\n        if self.is_bound:\n            data = self.management_form.data.copy() # make data mutable\n            data[TOTAL_FORM_COUNT] = self.management_form.cleaned_data[TOTAL_FORM_COUNT] + 1\n            self.management_form.data = data\n        else:\n            self.extra += 1\n</code></pre>\n\n<p>I thought everything was stored in <code>data</code>, but I guess that <code>data</code> has been passed off to the individual fields (or widgets) already? So what property do I need to modify exactly?</p>\n"},{"tags":["django","django-models","django-forms","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13010064,"title":"\"Todos.user\" must be a \"UserProfile\" instance","body":"<p>Getting Error \"Todos.user\" must be a \"UserProfile\" instance. can someone explain why?\nI want users in Todos should point to UserProfile and whatever I save in Todos should be displayed in /profile/  ?  </p>\n\n<pre><code>class UserProfile(models.Model):\n    user = models.OneToOneField(User)\n    birth =models.DateField()\n    name = models.CharField(max_length=100)\n    def __unicode__(self):\n        return self.name\n\n\n\nclass Todos(models.Model):\n    user     = models.ForeignKey(UserProfile)\n    title    = models.CharField(max_length=100)\n    created  = models.DateField()\n    start_time     = models.TimeField()\n    end_time     = models.TimeField()\n    def __unicode__(self):\n            return unicode(self.user)\n</code></pre>\n\n<p>Form</p>\n\n<pre><code>class todosform(ModelForm):\n    title       = forms.CharField(label=(u'Todo'))\n    created     = forms.DateField(label=(u'Date'))\n    start_time        = forms.TimeField(label=(u'Start Time'))\n    end_time        = forms.TimeField(label=(u'End Time'))\n    #user        = forms.CharField(label=(u'username')\n    class Meta:\n        model = Todos\n        exclude=('user',)\n\n\n#url todo url(r'^todo/$', 'registration.views.todo'), \n\ndef todo(request):\n    if request.user.is_authenticated(): \n        Todos.objects.filter(user=request.user)\n    if request.method == 'POST':\n        form =formtodos(request.POST)\n       if form.is_valid():# All validation rules pass\n           todoss = form.save(commit=False)\n           todoss.user = request.user\n           form.save()\n           return HttpResponseRedirect('/profile/')\n    else:\n        form = formtodos() \n\n    context = {'form':form}\n    return render_to_response('todo.html', context, context_instance=RequestContext(request))\n\n\n\n#url profile url(r'^profile/$', 'registration.views.Profile'),\n\n@login_required # decorator to check if request login\ndef Profile(request):\n    if not request.user.is_authenticated(): #if user not logged in\n        return HttpResponseRedirect('/login/') \n    #model = request.user.todos_set.all().order_by('created')[:7]\n    #u = Todos.objects.filter(created_by = request.user).get(pk=user)\n    registration = request.user.get_profile\n    context = {'registration':registration }\n    return render_to_response('profile.html',context,context_instance=RequestContext(request)) \n</code></pre>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":3,"view_count":3670,"score":2,"question_id":8074955,"title":"cannot import name patterns","body":"<p>Before I wrote in <code>urls.py</code>, my code... everything worked perfectly. Now I have problems - can't go to my site. \"cannot import name patterns\"</p>\n\n<p>My <code>urls.py</code> is:</p>\n\n<pre><code>from django.conf.urls import patterns, include, url\n</code></pre>\n\n<p>They said what error is somewhere here.</p>\n"},{"tags":["python","django"],"answer_count":6,"favorite_count":7,"up_vote_count":25,"down_vote_count":0,"view_count":3849,"score":25,"question_id":67454,"title":"Serving dynamically generated ZIP archives in Django","body":"<p>How to serve users a dynamically generated ZIP archive in Django?</p>\n\n<p>I'm making a site, where users can choose any combination of available books and download them as ZIP archive. I'm worried that generating such archives for each request would slow my server down to a crawl. I have also heard that Django doesn't currently have a good solution for serving dynamically generated files.</p>\n"},{"tags":["python","django","file"],"answer_count":2,"favorite_count":3,"up_vote_count":2,"down_vote_count":0,"view_count":156,"score":2,"question_id":12881294,"title":"Django - Create A Zip of Multiple Files and Make It Downloadable","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/67454/serving-dynamically-generated-zip-archives-in-django\">Serving dynamically generated ZIP archives in Django</a>  </p>\n</blockquote>\n\n\n\n<p>(Feel free to point me to any potential duplicates if I have missed them)</p>\n\n<p>I have looked at this snippet:\n<a href=\"http://djangosnippets.org/snippets/365/\" rel=\"nofollow\">http://djangosnippets.org/snippets/365/</a></p>\n\n<p>and this <a href=\"http://stackoverflow.com/a/1158750/1737290\">answer:</a></p>\n\n<p>but I wonder how I can tweak them to suit my need: I want multiple files to be zipped and the archive available as a download via a link (or dynamically generated via a view). I am new to Python and Django so I don't know how to go about it.</p>\n\n<p>Thank in advance!</p>\n"},{"tags":["python","django","postgresql","elastic-beanstalk"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":12850550,"title":"PostgreSQL for Django on Elastic Beanstalk","body":"<p>I'm reading conflicting reports about using PostgreSQL on Amazon's Elastic Beanstalk for python (Django).  </p>\n\n<p>Some sources say it isn't possible: (http://www.forbes.com/sites/netapp/2012/08/20/amazon-cloud-elastic-beanstalk-paas-python/).  I've been through a dummy app setup, and it does seem that MySQL is the only option (amongst other ones that aren't Postgres).</p>\n\n<p>However, I've found fragments around the place mentioning that it is possible - even if they're very light on detail.</p>\n\n<p>I need to know the following:</p>\n\n<ol>\n<li>Is it possible to run a PostgreSQL database with a Django app on Elastic Beanstalk?</li>\n<li>If it's possible, is it worth the trouble?</li>\n<li>If it's possible, how would you set it up?</li>\n</ol>\n"},{"tags":["mysql","django","table","join"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13007871,"title":"Django - MySQL search - JOIN tables","body":"<p>I have this models:</p>\n\n<pre><code>class DataDefault(models.Model):\n    zbozi_id = models.IntegerField(primary_key=True, db_index=True)\n    zbozi_skupina = models.CharField(max_length=15, db_column='zbozi_skupina', \n                                     db_index=True, blank=True)\n    zbozi_vyrobce = models.CharField(max_length=15, db_column='zbozi_vyrobce',  \n                                     db_index=True, blank=True)\n\n    def prepis_zbozi_vyrobce_url(self):  \n        return MenuVyrobci.objects.get(\n            zbozi_vyrobce=self.zbozi_vyrobce\n        ).zbozi_url_vyrobce\n\n    def prepis_zbozi_vyrobce_nazev(self):  \n        return MenuVyrobci.objects.get(\n            zbozi_vyrobce=self.zbozi_vyrobce\n        ).zbozi_vyrobce_nazev\n\n    def prepis_zbozi_skupina_url(self):  \n        return MenuSkupiny.objects.get(\n            zbozi_skupina=self.zbozi_skupina\n        ).zbozi_url_skupina\n\n    def prepis_zbozi_skupina_nazev(self):  \n        return MenuSkupiny.objects.get(\n            zbozi_skupina=self.zbozi_skupina\n        ).zbozi_skupina_nazev\n\n\nclass MenuSkupiny(models.Model):\n    zbozi_skupina = models.CharField(primary_key=True, max_length=15,\n                                     db_index=True)\n    zbozi_skupina_nazev = models.CharField(max_length=255, db_index=True)\n    zbozi_url_skupina = models.CharField(max_length=255, db_index=True)\n\n\nclass MenuVyrobci(models.Model):\n    zbozi_vyrobce = models.CharField(max_length=15, db_index=True,\n                                     primary_key=True)\n    zbozi_vyrobce_nazev = models.CharField(max_length=255, db_index=True)\n    zbozi_url_vyrobce = models.CharField(max_length=255, db_index=True)\n</code></pre>\n\n<p>But it is very slow to use. Please, how can I join tables that I  could take all the data at once?</p>\n\n<p>This:</p>\n\n<pre><code>&lt;a href=\"/{{ dat.prepis_zbozi_skupina_url }}\"&gt;\n  {{ dat.prepis_zbozi_skupina_nazev }}&lt;/a&gt; »\n&lt;a href=\"/{{ dat.prepis_zbozi_skupina_url }}/{{ dat.prepis_zbozi_vyrobce_url }}\"&gt;\n  {{ dat.prepis_zbozi_vyrobce_nazev }}&lt;/a&gt;\n</code></pre>\n\n<p>Will do this:</p>\n\n<pre><code>[sql] SELECT ... FROM `menu_skupiny` WHERE `menu_skupiny`.`zbozi_skupina` = 111\n[sql] (13ms) Found 1 matching rows\n[sql] SELECT ... FROM `menu_skupiny` WHERE `menu_skupiny`.`zbozi_skupina` = 111\n[sql] (20ms) Found 1 matching rows\n[sql] SELECT ... FROM `menu_skupiny` WHERE `menu_skupiny`.`zbozi_skupina` = 111\n[sql] (16ms) Found 1 matching rows\n[sql] SELECT ... FROM `menu_vyrobci` WHERE `menu_vyrobci`.`zbozi_vyrobce` = amd\n[sql] (15ms) Found 1 matching rows\n[sql] SELECT ... FROM `menu_vyrobci` WHERE `menu_vyrobci`.`zbozi_vyrobce` = amd\n[sql] (13ms) Found 1 matching rows\n</code></pre>\n\n<p>And is not good :(</p>\n\n<p>Thank you for any help.</p>\n"},{"tags":["django","django-models","django-urls"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13008020,"title":"Another NoReverseMatch error. Trying to use reverse() in model layer","body":"<p>I tried to find similar topic but any does not help me much.</p>\n\n<p>My error (e.g.):</p>\n\n<blockquote>\n  <p>Reverse for 'user_activate' with arguments\n  '(u'pU6ARMPCgHeyTAGhBWYwxZqLSUtwqWHqnf9MNEfd',)' and keyword arguments\n  '{}' not found</p>\n</blockquote>\n\n<p>urls.py:</p>\n\n<pre><code>url(r'^user/activate/([A-Za-z0-9]+)$','users.views.activate', name='user-activate'),\n</code></pre>\n\n<p>views.py:</p>\n\n<pre><code>def activate(request, key):\n    user = User.objects.select_related('profile').get(activation_key=key)\n    if user is not None:\n       if user.is_active:\n           print 'already active'\n       else:\n          if user.get_profile().check_key_is_valid():\n             user.is_active = True\n             user.save()\n          else:\n             user.get_profile().reset_activation_data()\n             send_activation_email(user.get_profile().activation_key, user.email)\n             print 'key expired'\n    else:\n        print 'user not found'\n    return HttpResponseRedirect(reverse('front'))\n</code></pre>\n\n<p>models.py:</p>\n\n<pre><code>def send_activation_email(key, email):\n    from django.core.urlresolvers import reverse\n    path = reverse('user_activate', args=[key])\n    from django.contrib.sites.models import Site\n    site = Site.objects.get_current().domain\n    url = \"http://%s%s\" % (site, path)\n\n    from django.core.mail import send_mail\n    from my_app import settings\n    send_mail('Account activation', url, settings.SITE_EMAIL,\n        [email], fail_silently=False)\n</code></pre>\n\n<p>What I am doing wrong here?</p>\n"},{"tags":["django","chat"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":30,"score":-1,"question_id":13007996,"title":"Scalable chat with Django","body":"<p>I would like to implement a chat in my Django app. I found those different packages: <a href=\"http://www.djangopackages.com/grids/g/chat/landscape/\" rel=\"nofollow\">http://www.djangopackages.com/grids/g/chat/landscape/</a></p>\n\n<p>I don't have the skills to build my own chat, so I would like to know wich one of those is the most scalable chat. </p>\n\n<p>I'm afraid that those app are not done for \"real world\" website. Do you have any advice about that?</p>\n\n<p>Thank you.</p>\n"},{"tags":["django","unit-testing","mocking"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":88,"score":1,"question_id":12150169,"title":"Mocking Django Model ImageField backend","body":"<p>I have a model with an ImageField that is backed by django-storages' S3Boto.  I have a test the exercises the \"upload image\" view, but the fact that it is uploading the image to S3 is slowing down my test suite.</p>\n\n<p>In the interest of speeding up my tests, what is the best practice for dealing with this issue?  Should I mock out S3Boto?  Perhaps there is a memory backed storage backend that works well for testing (automatic cleanup would be nice!)?</p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13007292,"title":"Save thumbnail per field in model","body":"<p>I'd like to save thumbnails on request for some fields in one model-class. The pain for me is, how do I manage to keep the thumbnail-class as simple as possible?</p>\n\n<p>Let's say I've got this main-class</p>\n\n<pre><code>class Staff(models.Model):\n    name = models.CharField(max_length=100)\n    img1 = models.ImageField(upload_to=upload_path)\n    img2 = models.ImageField(upload_to=upload_path)\n    img3 = models.ImageField(upload_to=upload_path)\n    ...\n</code></pre>\n\n<p>Now I'd like to save a thumbnail for each img-field in another model-class. So I'm able to query against <code>Thumbnail</code> if there is a thumb for e.g. <code>img1</code>...something like this (not working code)</p>\n\n<pre><code>class Thumbnail(models.Model):\n    staff = models.ForeignKey(Staff)\n    field = models.FooBar('Staff._meta.fields...')\n    thumb = models.ImageField(upload_to=upload_path2)\n</code></pre>\n\n<p>Any suggestions or ideas of how this <code>Thumbnail</code>-class could look like?</p>\n"},{"tags":["django","google-app-engine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12958115,"title":"Django with Google App Engine manage command throws DatabaseError","body":"<p>When I run a management command it opens a browser window.\nI authenticate the app which creates a oauth file <code>~/.googlesql_oauth2.dat</code>.</p>\n\n<p>But it throws a DatabaseError afterwards.</p>\n\n<pre><code>End user Google Account not authorized.enter\n</code></pre>\n\n<p>Any ideas how to fix this?</p>\n\n<p>Stacktrace:</p>\n\n<pre><code>Unhandled exception in thread started by &lt;bound method Command.inner_run of &lt;django.core.management.commands.runserver.Command object at 0x100646f50&gt;&gt;\nTraceback (most recent call last):\n  File \"/usr/local/google_appengine/lib/django_1_3/django/core/management/commands/runserver.py\", line 88, in inner_run\n    self.validate(display_num_errors=True)\n  File \"/usr/local/google_appengine/lib/django_1_3/django/core/management/base.py\", line 249, in validate\n    num_errors = get_validation_errors(s, app)\n  File \"/usr/local/google_appengine/lib/django_1_3/django/core/management/validation.py\", line 102, in get_validation_errors\n    connection.validation.validate_field(e, opts, f)\n  File \"/usr/local/google_appengine/lib/django_1_3/django/db/backends/mysql/validation.py\", line 14, in validate_field\n    db_version = self.connection.get_server_version()\n  File \"/usr/local/google_appengine/lib/django_1_3/django/db/backends/mysql/base.py\", line 338, in get_server_version\n    self.cursor()\n  File \"/usr/local/google_appengine/lib/django_1_3/django/db/backends/__init__.py\", line 250, in cursor\n    cursor = self.make_debug_cursor(self._cursor())\n  File \"/usr/local/google_appengine/google/storage/speckle/python/django/backend/base.py\", line 223, in _cursor\n    self.connection = Connect(**kwargs)\n  File \"/usr/local/google_appengine/google/storage/speckle/python/django/backend/base.py\", line 195, in Connect\n    return driver.connect(**kwargs)\n  File \"/usr/local/google_appengine/google/storage/speckle/python/api/rdbms_googleapi.py\", line 183, in __init__\n    super(GoogleApiConnection, self).__init__(*args, **kwargs)\n  File \"/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/storage/speckle/python/api/rdbms.py\", line 583, in __init__\n    self.OpenConnection()\n  File \"/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/storage/speckle/python/api/rdbms.py\", line 606, in OpenConnection\n    response = self.MakeRequest('OpenConnection', request)\n  File \"/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/storage/speckle/python/api/rdbms.py\", line 718, in MakeRequest\n    response.sql_exception.message))\ngoogle.storage.speckle.python.api.rdbms.DatabaseError: 0: End user Google Account not authorized.enter\n</code></pre>\n"},{"tags":["python","django","model","multilingual"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":61,"score":2,"question_id":13006804,"title":"Django data model for multi language project","body":"<p>I'm setting up a very small and simple django project which will include basically an overview of clients/projects of a translator. So the site obviously should feature the languages the translator translates to or from. Which means there won't be new languages to add in the future. Should I just define everything within one class, something like this: </p>\n\n<pre><code>class project(models.Model):\n    project = models.ForeignKey(client)\n    title_eng = models.CharField(max_length=50)\n    title_pt = models.CharField(max_length=50)\n    #...\n    body_eng = models.CharField(max_length=250)\n    body_pt = models.CharField(max_length=250)\n    #...\n    time_stamp= models.DateField()  \n</code></pre>\n\n<p>Do I better use <a href=\"http://code.google.com/p/django-transmeta/\" rel=\"nofollow\">transmeta</a>, which basically does the same? Advantages, disadvantages? A short note of advice is very much appreciated! </p>\n"},{"tags":["python","django","http","elasticsearch","pyes"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":125,"score":4,"question_id":12115302,"title":"Managing a pool of connections to a hosted Elastic Search provider","body":"<p>I need a way to manage connections to a hosted Elastic Search provider, to speed up search on my website.  We are running Django on Heroku, using the Found ElasticSearch add-on, and pyes, which is an ElasticSearch Python library.</p>\n\n<p>The standard way of setting up a connection to ElasticSearch with pyes is by passing the provider URL into an ES object, like so: </p>\n\n<p>(1) <code>connection = ES(my_elasticsearch_url)</code> </p>\n\n<p>Pyes uses the ES object behind the scenes to establish an open HTTP connection to my ElasticSearch provider, so I can run searches like this:</p>\n\n<p>(2) <code>results = connection.search(some_query, index_name)</code></p>\n\n<p>Previously, I was doing both those steps in my Django view for search -- every time a user did a search, it opened a new HTTP connection then ran the search.  Consequentially the search call was slow.</p>\n\n<p>I sped up search by moving (1) into my app's <code>__init__.py</code> file -- now, I am setting up the connection only once, and importing it into the search view.  But I'm worried it will choke that HTTP connection if lots of people are trying search at once.</p>\n\n<p>I'm looking for ideas on how to set up a pool of connections, initiate them once on app start up, and then dole them out to my search view as needed.  Ideally I'd like to be able to scale the size of the pool up and down easily with minimal changes to my code.</p>\n\n<p>I can think of a few ways to approach it, but it seems like a common computing related problem, so I'm sure that a lot of you have ideas on good design and best practices for such a system.  I'd love to hear them.</p>\n\n<p>Thanks a lot!</p>\n\n<p>Clay</p>\n"},{"tags":["java","php","ruby","django","email"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":13006066,"title":"How to track or at least detect an invalid email address","body":"<p>I am using django. I just want to know is it possible to check if an email is a correct one, so that it will be definitely delivered (99.99%)? If the user entered an email like <code>klsdfksdajkfdn@skjdnf.com</code>, it is technically a valid email but does not exist really. Can I detect such emails?</p>\n"},{"tags":["python","django","web-applications","oauth-2.0"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13006770,"title":"Can we perform OAuth2.0 in a python script in console","body":"<p>I got to transfer some files to a remote server for which I have to perform OAuth2.0 to get access token and then simply perform a POST request to upload the files.</p>\n\n<p>Now I am too lazy to setup a Django project on cloud and then perform OAuth2 while there are not \"too good\" lib for that though.</p>\n\n<p>So, I am thinking to perform OAuth2 using <a href=\"https://github.com/litl/rauth\" rel=\"nofollow\">rauth</a> lib as a simple python script without really setting up a server that accepts requests and all..</p>\n\n<p>However, on the remote server profile, I need to provide a redirect_url and of course in the rauth client lib.</p>\n\n<p>Are there any possible ways to do this authorization without really setting up a project on cloud..A simply python script is what I am looking for.</p>\n"},{"tags":["python","django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":62,"score":-1,"question_id":13006494,"title":"How can make decision based on multiple variables in django python","body":"<p>In my project  i have  Task object whhich has to done each day.\nNow task has some data assocoated which i call Desired Data like . basically its all weather stuff</p>\n\n<pre><code>var1 = 20\nvar2 = 40\n\nand so on\n</code></pre>\n\n<p>Now based on the weather forecast  each day i have the data which i call forecast data</p>\n\n<pre><code>var1 = 20\nvar2 = 39\netc.\n</code></pre>\n\n<p>Now based on that i have to make decision whether the task will be feasible or not tomorrow.\nAs i have 20 or more variables , i am confused how can i proceed.</p>\n\n<p>I have little bit of idea about AI techniques. or heuristics which say that we can us ethem if have more variables but not sure.\nSo can anyone guide me , how can i do that stuff</p>\n\n<p>EDIT: </p>\n\n<p>I have the dictionary of variables. I need some libraries don't know which branch it will belong. But i want to forecast the result.</p>\n\n<p>example. Currently i am thinking of having the logic in loops but that i will end up with 100s of loops like</p>\n\n<p>IF d['temp'] &lt; f['temp']\n   if (var == 23)\n    print ('all ok')</p>\n\n<p>i want to know which algorithm i can use where i have 20 variables and i have to compare agaist other 20 variables. I mean if desired temperature is less and forrecast temperature in more then my task is false. But again if i have forecast of Rain then my task will become true. But then again if direction of winder is on danger side then all task will be false. so there are many permutations/combinations</p>\n"},{"tags":["django","django-signals"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":11686193,"title":"A signal m2m_changed and bug with post_remove","body":"<p>I need to detect a post_remove signal, so I have written :</p>\n\n<pre><code>def handler1(sender, instance, action, reverse, model, pk_set, **kwargs):\nif (action == 'post_remove'):\n    test1()  # not declared but make a bug if it works, to detect :)\n\nm2m_changed.connect(handler1, sender=Course.subscribed.through)\n</code></pre>\n\n<p>If I change 'post_remove' by 'post_add' it is ok.. Is it a django's bug about post_remove ??</p>\n\n<p>I use that model and I switch beetween two values of 'subscribed' (so one added and one deleted)</p>\n\n<pre><code>class Course(models.Model):\n    name = models.CharField(max_length=30)\n    subscribed = models.ManyToManyField(User, related_name='course_list', blank=True, null=True, limit_choices_to={'userprofile__status': 'student'})\n</code></pre>\n\n<p>I have seen a post with a bug of django, maybe it havn't been fixed... (or it's me ^^)</p>\n"},{"tags":["javascript","html","django","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13006337,"title":"DJANGO HTML TEMPLATES : How to know Selected item in drop Down and display In the html page without any action","body":"<p>I want to display the selected item info which is selected  From the drop down in, the same html page without dong any action.How to know which item is selected and how to assign that selected value in a variable in html.</p>\n"},{"tags":["django","web-services","rest","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13005951,"title":"No CRUD operations with Django/Tastypie","body":"<p>I am a newbie with Tastypie and it is wonderful the way you can achieve CRUD operations with it so quickly. But I would like to implement other kind of web services where the return value is other than a model. For example, if I had a simple model like this</p>\n\n<pre><code>class User(models.Model):\n    name = models.CharField(max_length=20)\n    age = models.PositiveSmallIntegerField()\n</code></pre>\n\n<p>and wanted to get the average age of all users via /api/v1/user/avg_age, how should I do it? Perhaps it is something related to Django URLs more than Tastypie but I am lost at this moment. So, the question is where/how should I define my custom REST web services?\nThanks in advance</p>\n"},{"tags":["python","django","tastypie"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13006281,"title":"Tastypie GET manyTomany error","body":"<p>I have a problem while using Tastypie with a very normal m2m relation.\nIn my (simplified) models:</p>\n\n<pre><code>class Promos(models.Model):\n    promo_id = UUIDField(auto=True, unique=True, primary_key=True, null = False)\n    title = models.CharField(max_length=400, default='title', null = False)\n    text = models.TextField(max_length = 10000, null = False, default='text')\n    category = models.ManyToManyField(CatPromos, null=True)\n    active = models.BooleanField(null = False, default=False)\n\nclass CatPromos(models.Model):\n    description = models.CharField(max_length = 10, unique=True, default='NoCat')\n</code></pre>\n\n<p>In my Resources:</p>\n\n<pre><code>class PromosResource(ModelResource):\n    category =  fields.ForeignKey(CatPromosResource, 'category', full=True, null=True)\n    class Meta:\n        object_class = Promos\n        queryset = Promos.objects.all()\n        allowed_methods = ['get']\n        include_resource_uri = True\n        authentication = Authentication()\n        authorization = Authorization()\n        always_return_data = False\n        filtering = {\"category\":ALL_WITH_RELATIONS}\n\n    def get_object_list(self, request, *args, **kwargs):\n        return Promos.objects.filter(active=True)   \n\nclass CatPromosResource(ModelResource):\n    class Meta:\n        object_class = CatPromos\n        queryset = CatPromos.objects.all()\n        allowed_methods = ['get']\n        include_resource_uri = True\n        authentication = Authentication()\n        authorization = Authorization()\n        always_return_data = False\n        filtering = {\"description\":ALL}\n        detail_uri_name = \"_pk_val\"\n</code></pre>\n\n<p>What I want is to GET a list of Promos, filtering by description like www.server.com/api/v1/promos?format=json&amp;category__description=XXX</p>\n\n<p>First, note that \"detail_uri_name\" int the Meta class of CatPromosResource. Tastypie (last version) kept crashing because of some problem with the detail_uri_name. Default is \"pk\" but the object who uses it needs \"_pk_val\". That, I realized after some debugging. \nBut the problem now is that whenever I call GET with the uri above the server crashes with this message:</p>\n\n<pre><code>\"invalid literal for int() with base 10: ''\", \n\"traceback\": \"Traceback (most recent call last): \nFile \\\"...python2.7/site-packages/tastypie/resources.py\\\", line 202, in wrapper\n    response = callback(request, *args, **kwargs) \nFile \\\"...python2.7/site-packages/tastypie/resources.py\\\", line 441, in dispatch_list\n    return self.dispatch('list', request, **kwargs)\nFile \\\"...python2.7/site-packages/tastypie/resources.py\\\", line 474, in dispatch\n    response = method(request, **kwargs)\nFile \\\".../python2.7/site-packages/tastypie/resources.py\\\", line 1135, in get_list       to_be_serialized[self._meta.collection_name] = [self.full_dehydrate(bundle) for bundle in bundles]\nFile \\\".../python2.7/site-packages/tastypie/resources.py\\\", line 739, in full_dehydrate\n    bundle.data[field_name] = field_object.dehydrate(bundle)\\  \nFile \\\".../python2.7/site-packages/tastypie/fields.py\\\", line 653, in dehydrate   \n    return self.dehydrate_related(fk_bundle, self.fk_resource) \nFile \\\".../python2.7/site-packages/tastypie/fields.py\\\", line 520, in dehydrate_related\n    return related_resource.full_dehydrate(bundle) \nFile \\\".../python2.7/site-packages/tastypie/resources.py\\\", line 739, in full_dehydrate\n    bundle.data[field_name] = field_object.dehydrate(bundle)  \nFile \\\".../python2.7/site-packages/tastypie/fields.py\\\", line 121, in dehydrate    \n    return self.convert(current_object)  \nFile \\\".../lib/python2.7/site-packages/tastypie/fields.py\\\", line 220, in convert    \n    return int(value)\\n\\nValueError: invalid literal for int() with base 10: ''\\n\"}\n</code></pre>\n\n<p>I'm lost here. I dont know what to do. I have tracked the call through the code but I dont know how to solve it. If anyone knows how to face this problem, or the correct way to implement a GET call with a m2m related relation, please help me.</p>\n"},{"tags":["django","file","file-upload"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13006155,"title":"use user uploaded file for encoding and then send it via web service","body":"<p>I want to receive user uploaded file, encode it to base64 and then send it via web service. (i'm using django)</p>\n\n<p>my views.py:</p>\n\n<pre><code>def restore(request):\n    if request.is_ajax():\n        if request.method == 'POST':\n            service = ServiceLocator().getService(url=None)\n            req = restoreRequest()\n            req._username = \"test\"\n            form = UploadFileForm(request.POST, request.FILES)\n            if form.is_valid():                                         \n                encoded = base64.b64encode(request.FILES['file'].read())              \n                print \"this is:\",encoded      \n                f2.close()\n                //rest of program\n</code></pre>\n\n<p>i don't know why 'encoded' is empty. \ni also tried to write user uploaded file in a file in my project directory:</p>\n\n<pre><code>f = open(\"media/myFiles/restore.txt\" , 'w')\n f.write(request.FILES['file'].read())\n</code></pre>\n\n<p>but the created file was empty too! can you please help me know what is the problem?\ntahnk you :)</p>\n"},{"tags":["python","django","web-applications"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":13001747,"title":"How to avoid polling a django/python web server?","body":"<p>I am creating a web app which needs to continuously poll my django web server to get an update. Is there a way avoid this polling? Like server can send push messages on update or the client registers a callback for an event and server triggers the callback whenever something changes. </p>\n\n<p>I know there are signaling frameworks in ASP.net etc. but I want something which can work with Django.</p>\n\n<p>Thanks</p>\n"},{"tags":["javascript","html","django","django-templates","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13005628,"title":"Django html template:According to selection of category how can get subcategory list in drop down which are belongs to selected category","body":"<p>I am doing a django application. I need to select category and subcategory both lists I am passing from views.py. Subcategory list had a foreign key of category list. To display lists in drop down I am using this code:</p>\n\n<pre><code>&lt;label class=\"black\"&gt;Product Category&lt;/label&gt;\n&lt;select name=\"prodcatlist\" &gt;\n{% for id in prodcatlist %}\n    &lt;option value=\"{{id.id}}\" selected=\"selected\"&gt;{{id.Name}}&lt;/option&gt;\n{% endfor %}\n&lt;/select&gt;\n\n&lt;label class=\"black\"&gt;Product Sub Category&lt;/label&gt;\n&lt;select name=\"ProdSubcatList\",id=\"ProdSubcatList\" &gt;\n{% for id in ProdSubcatList %}\n    &lt;option value=\"{{id.id}}\" selected=\"selected\"&gt;{{id.Name}}&lt;/option&gt;\n{% endfor %}\n&lt;/select&gt;\n</code></pre>\n\n<p>With this I am getting all subcategory list in drop down. It is big list, so I am getting confuse to choose subcategory which is belongs to selected category. For that I want to display only subcategory list which will contains Id of selected category.</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":12916138,"title":"How to change the appearance of the Admin date widget in front end","body":"<p>I integrated the Django Admin datewidget into my front end. I want to change the appearance and some text in the calendar that appears. So, I found out that somehow, the script that is being invoked is DateTimeShortcuts.js. I tried to change the code through su vi and saved the changes, but no change appears in the output. Can someone point out what I'm doing wrong. I pasted the link to the screenshot to make it easier for you to understand what I'm trying to do. Help will really be appreciated. Thanks a lot.</p>\n\n<p><a href=\"http://imageshack.us/a/img31/2977/screenshot20121016at709.png\" rel=\"nofollow\">http://imageshack.us/a/img31/2977/screenshot20121016at709.png</a></p>\n\n<p>Saadat</p>\n"},{"tags":["django","image","dimensions"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1460,"score":1,"question_id":5522611,"title":"Accessing image dimensions on an ImageField in a Django template?","body":"<p>I have <code>ImageField</code> in my model and I'm able to display the image in a template. However, how do I retrieve the image's height and width?</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13005383,"title":"How can I replace simplejson with json in django python?","body":"<p>I have the following code in my views:</p>\n\n<pre><code>def __init__(self, obj='', json_opts={}, mimetype=\"application/json\", *args, **kwargs):\n        content = simplejson.dumps(obj, **json_opts)\n        super(JSONResponse, self).__init__(content, mimetype, *args, **kwargs)\n</code></pre>\n\n<p>Since <code>simplejson</code> is going to be deprecated, can i use this</p>\n\n<pre><code>content = json.dumps(obj, **json_opts)\n</code></pre>\n\n<p>or do I need to do more?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":59,"score":3,"question_id":13004606,"title":"What is the best way to override the delete function in django python","body":"<p>I have the Model where i have  relations with 3 diff models.</p>\n\n<p>Now i know that if  i use\n<code>object.delete()</code> , then child objects will also gets deleted.</p>\n\n<p>Now the problem is that in my whole models classes i have the database column called <code>DELETED</code> which i want to set to 1 whenever someone deletes some object.</p>\n\n<p>I can override the deleted function in class called <code>BaseModel</code> and and override the custom delete method of updating field to 1. But the problem is</p>\n\n<p>If i do that way then i have to manually go through all the cascading relationships and manually call the delete ob every object.</p>\n\n<p>Is there any way that by just calling object.delete(). It automatically traverses through child objects as well</p>\n"},{"tags":["django","authentication","user-profile"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13005036,"title":"Extended django user profile over-writes user table data when submitted","body":"<p>I'm having an issue that when a user is submitting changes to their profile, the associated user-table has all fields overwritten with blank values (ie: username, email, first_name...etc)</p>\n\n<p>My site has two types of users with completely different user profile types, for this reason I can't use the user-profiles setting in settings.py, unless someone knows how to make that work?</p>\n\n<p>In my models.py (simplified, but to show the User model was inherited):</p>\n\n<pre><code>class UserProfile(User):\n    somevar = models.CharField(max_length=30)\n    objects = UserManager()\n\nclass ProfileForm(ModelForm):\n    class Meta:\n        model = UserProfile\n\nclass UserForm(ModelForm):\n\n    password2 = forms.CharField(widget=forms.PasswordInput())\n    remail = forms.CharField(max_length=75)\n\n    class Meta:\n        model = UserProfile\n        widgets = {'password': forms.PasswordInput()}\n        fields = ('email', 'password')\n</code></pre>\n\n<p>In my views.py:</p>\n\n<pre><code>@login_required\ndef profile_data(request):\n    \"\"\"\n        enter user profile data\n    \"\"\"\n\n    if request.method == 'POST':  # submission / data change\n        user = UserProfile.objects.get(pk=request.user.id)\n        form = ProfileForm(request.POST, instance=user)\n\n        if form.is_valid():\n            form.save()\n\n        return render(request, 'users/profile_edit.html', {'form': form})\n\n    else:  # no data entered = fill all users data in\n        form = ProfileForm(initial=model_to_dict(UserProfile.objects.get(id=request.user.id)))\n\n    return render(request, 'users/profile_edit.html', {'form': form})\n</code></pre>\n\n<p>The problem is that if the form is valid, and the form saves, it affects the user table for that user by making all values blank, since they those attributes contain no data in the form model.  I've tried excluding all user-table fields from the ProfileForm, but it seems there should be an easier way.</p>\n\n<p>Any help?</p>\n"},{"tags":["django","manytomanyfield","dajaxice"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13004308,"title":"ManyToManyField error on production server, fine on dev server","body":"<p>My Django app is raising a puzzling error when using a production served version (via Apache, and Nginx for static), that is not evident for the dev server version on localhost.</p>\n\n<p>I have the models :</p>\n\n<pre><code>class AdaptationLibrary(models.Model):\n    description = models.CharField( u'Description of adaptation',max_length=400,blank=True,null=True)\n    name = models.CharField(u'Adaptation Name',max_length=60)\n    applies_to = models.ManyToManyField(Archetype,related_name =u'archetype_adaptations',null=True,blank=True)\n    adaptations = jsonfield.JSONField(u'adaptation library items', null=True, blank=True)\n    def __unicode__(self):\n        return self.name\n</code></pre>\n\n<p>and ..</p>\n\n<pre><code>class Archetype(models.Model):\n    archetype = models.CharField(max_length=20, choices=ARCHETYPE_CHOICES,unique=True)\n    archetype_family = models.CharField(max_length=60,choices=ARCHETYPE_FAMILY_CHOICES,null=True)\n    replacement_cost_default = models.FloatField(\"Default complete asset replacement cost - ($)\",null=True, blank=True)\n    lifespan_default = models.FloatField(\"Default asset life (yrs)\", null=True, blank=True)\n    age_default = models.FloatField(\"Default age - (yrs)\", null=True, blank=True)\n    storage_time_default = models.FloatField(\"Default storage/retention time (hrs)\", null=True, blank=True)\n    def __unicode__(self):\n        return self.archetype\n</code></pre>\n\n<p>when I attempt to retrieve related Archetype objects via :</p>\n\n<pre><code>library_archetypes = library_item.applies_to.all()\n</code></pre>\n\n<p>I get the following error :</p>\n\n<pre><code>FieldError: Cannot resolve keyword u'archetype_adaptations' into field.\nChoices are: age_default, archetype, archetype_family, asset, cemlo2, id,\nlifespan_default, new_dependency, replacement_cost_default, storage_time_default\n</code></pre>\n\n<p>Dev and local versions are using the same database, and apart from the call to the AdaptationLibrary ManyToManyField, the rest of the app functions fine.</p>\n\n<p>Can anybody shed some light on this issue?</p>\n\n<p>Cheers</p>\n\n<p>Edit:\nAs per Rohan's suggestion that it's a migration problem - I've gone the whole box and dice of resetting and re-converting to south. Dev server is still happy - Apache served version throws same errors. Both versions are using the same DB. </p>\n\n<p>(full traceback error) :</p>\n\n<pre><code>ERROR Traceback (most recent call last):\n\n  File \"C:\\Python27\\Lib\\site-packages\\dajaxice\\core\\DajaxiceRequest.py\", line 181, in process\nresponse = '%s' % thefunction(self.request, **argv)\n\n  File \"C:/Python27/sites/Adaptwater\\proto4\\ajax.py\", line 2636, in populate_adaptation_library\ninitial_data = dict_to_library_form(library_item_id = library_to_load)\n\n  File \"C:/Python27/sites/Adaptwater\\proto4\\ajax.py\", line 2556, in dict_to_library_form\nlibrary_archetypes = library_item.applies_to.all()\n\n File \"C:\\Python27\\Lib\\site-packages\\django\\db\\models\\manager.py\", line 116, in all\nreturn self.get_query_set()\n\n  File \"C:\\Python27\\Lib\\site-packages\\django\\db\\models\\fields\\related.py\", line 543, in get_query_set\nreturn super(ManyRelatedManager, self).get_query_set().using(db)._next_is_sticky().filter(**self.core_filters)\n\n  File \"C:\\Python27\\Lib\\site-packages\\django\\db\\models\\query.py\", line 621, in filter\nreturn self._filter_or_exclude(False, *args, **kwargs)\n\n  File \"C:\\Python27\\Lib\\site-packages\\django\\db\\models\\query.py\", line 639, in _filter_or_exclude\nclone.query.add_q(Q(*args, **kwargs))\n\n  File \"C:\\Python27\\Lib\\site-packages\\django\\db\\models\\sql\\query.py\", line 1250, in add_q\ncan_reuse=used_aliases, force_having=force_having)\n\n  File \"C:\\Python27\\Lib\\site-packages\\django\\db\\models\\sql\\query.py\", line 1122, in add_filter\nprocess_extras=process_extras)\n\n  File \"C:\\Python27\\Lib\\site-packages\\django\\db\\models\\sql\\query.py\", line 1316, in setup_joins\n\"Choices are: %s\" % (name, \", \".join(names)))\n\nFieldError: Cannot resolve keyword u'archetype_adaptations' into field. Choices are: age_default, archetype, archetype_family, asset, cemlo2, id, lifespan_default, new_dependency, replacement_cost_default, storage_time_default\n</code></pre>\n"},{"tags":["django"],"answer_count":1,"favorite_count":4,"up_vote_count":5,"down_vote_count":0,"view_count":57,"score":5,"question_id":12989573,"title":"How do I change the default user model?","body":"<p>How do I change the default model of a user?</p>\n\n<pre><code>from django.contrib.auth.models import User\n</code></pre>\n"},{"tags":["python","django","facebook","facebook-graph-api","oauth-2.0"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1316,"score":2,"question_id":8561112,"title":"Django / Python oauth2 for facebook","body":"<p>Any tips on python oauth2 and facebook.</p>\n\n<p>It seems there are little information since Facebook updated to OAuth2.</p>\n\n<p>Is there anyway the existing Twitter library can be used to suite the facebook authentication?</p>\n\n<pre><code>import oauth2 as oauth\n\n# Create your consumer with the proper key/secret.\nconsumer = oauth.Consumer(key=\"your-twitter-consumer-key\", \n    secret=\"your-twitter-consumer-secret\")\n\n# Request token URL for Twitter.\nrequest_token_url = \"http://twitter.com/oauth/request_token\"\n\n# Create our client.\nclient = oauth.Client(consumer)\n\n# The OAuth Client request works just like httplib2 for the most part.\nresp, content = client.request(request_token_url, \"GET\")\nprint resp\nprint content\n</code></pre>\n"},{"tags":["django","content-management-system","content"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":178,"score":3,"question_id":4080873,"title":"How to build a system for an editorial team","body":"<p>I'm developing a web portal that mostly works like a newspaper site. In the focus, there are articles, containing text, videos and images. These articles have attachments which shall be presented in a sidebar. These attachments might be the same objects that will be displayed within the body text.\nI have been thinking a lot about how to create the structure and - and this is a major point - how to enable the editor to edit all this stuff comfortably.</p>\n\n<p>What I evaluated were Django-CMS and feincms as complete systems, and several third-party-modules that do snippets of the work.</p>\n\n<p>Now, I a have solution for inline objects: I forked the inline-module of <a href=\"https://github.com/nathanborror/django-basic-apps\" rel=\"nofollow\">django-basic-apps</a> which is now able to take additional parameters for the objects to embed. Their parameters are an important thing to e.g. embed \"an image with object id x, but max x pixels in size\". </p>\n\n<p>What is not solved with my approach is, to generate a sidebar containing a bunch of inline tokens. I could create a custom widget for this, though. A better solution would surely be to add a functionaly like somehow attaching generic objects (videos, images...) to an article object.</p>\n\n<p>While my solution is working so far, I'm not sure if there are other ways to solve these common scenario, and I would like to hear some other experiences about this topic, and if there are any other ways you deal with it.</p>\n\n<hr>\n\n<p>For there does not seem to be a bigger need of a solution for this generic problem, I will use my solution and see whether it proves in practice.</p>\n"},{"tags":["regex","django","django-models","django-forms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13002958,"title":"Django Form Optional Regex depending on parameters","body":"<p>Currently in <code>my registration/forms.py</code>, I have the following field:</p>\n\n<pre><code>email = forms.RegexField(regex=r'^[A-Za-z0-9._%-]+@(domain1|domain2)\\.com$', \n                        max_length=75,\n                        widget=forms.TextInput(attrs=attrs_dict), \n                        label=_(\"E-mail\"),\n</code></pre>\n\n<p>On the site there are two paths to register. From the standard path, this regex should be in place.</p>\n\n<p>However, depending on the registration path, I'd like to turn off the regex and allow anybody to register. What is the best to have optional regex without complicating this form field too much?</p>\n"},{"tags":["python","django","database-design","data-structures","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13004116,"title":"Django Model Design. Want users to have \"Collections\" of other model instances","body":"<p>I'm having a little trouble trying to wrap my head around how I'd represent this data structure using django models. In the application I'm working on users can upload tracks. I use a Track model for that. We want users to have a collection of tracks associated with their account (tracks they have favorited for example). The collection is just references to the id for the track model. Does anyone have any advice on how to go about designing such a data structure?</p>\n"},{"tags":["django","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13002833,"title":"Generate choice field with existing ORM data in Django","body":"<p>I'm using Django 1.4 with Python 2.7 on Ubuntu 12.04.</p>\n\n<p>I'm going to continue to update this question as I make progress.</p>\n\n<p>UPDATE 2:</p>\n\n<p>I'm trying to generate 2 choice fields in a form using information from an existing model.</p>\n\n<pre><code>class AssignProject(forms.Form):\n\n    def __init__(self, devs, *args, **kwargs):\n        \"\"\"\n        ..  method:: __init__()\n\n            Class constructor\n\n            :param devs: Tuple with which developer\n        \"\"\"\n        super(AssignProject, self).__init__(*args, **kwargs)\n        self.dev = forms.ChoiceField(widget = forms.Select(), choices = devs, required = True)\n        self.designer = forms.ChoiceField(widget = forms.Select(), choices = devs, required = True)\n</code></pre>\n\n<p>At this point I can't seem to access <code>dev</code> and <code>designer</code> <code>ChoiceField</code> in my template yet.</p>\n\n<p>Here is the view:</p>\n\n<pre><code>@login_required\ndef view_all_projects(request):\n    \"\"\"\n    ..  function:: view_projects()\n\n        Show the projects\n\n        :param request: Django Request object\n    \"\"\"\n    data = { 'user' : request.user }\n    if (request.user.is_authenticated() and request.user.is_superuser):\n        all_projects = Projects.objects.filter(active = True)\n        dev_info = User.objects.filter(is_staff = True, is_superuser = False)\n\n        dev_dict = {}\n        for dev in dev_info:\n            dev_dict[dev.id] = '{0} {1}'.format(dev.first_name, dev.last_name)\n\n        devs = tuple(dev_dict.items())\n\n        form = AssignProject(devs)\n        data.update({ 'form' : form })\n        data.update({ 'projects'  : all_projects })\n        data.update(csrf(request))\n        return render_to_response(\"view_all_projects.html\", data)\n\n    return render_to_response(\"index.html\", data)\n</code></pre>\n\n<p>I have verified that the developers/designers are properly getting set in the <code>devs</code> <code>tuple</code>.</p>\n\n<p>...and the template from <code>view_all_projects.html</code>:</p>\n\n<pre><code>&lt;form action=\"/assignProject/\" method=\"post\"&gt;{% csrf_token %}\n    &lt;table&gt;\n        &lt;td&gt;\n            &lt;input type=\"hidden\" name=\"project_id\" value={{ project.id }}&gt;\n            &lt;tr&gt;\n                &lt;td align=\"right\"&gt;&lt;label class=\"formlabel\"&gt;Assign Developer:&lt;br /&gt;&lt;/label&gt;&lt;/td&gt;&lt;td&gt;{{ form.dev }}&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td align=\"right\"&gt;&lt;label class=\"formlabel\"&gt;Assign Designer:&lt;br /&gt;&lt;/label&gt;&lt;/td&gt;&lt;td&gt;{{ form.designer }}&lt;/td&gt;\n            &lt;/tr&gt;\n                &lt;tr&gt;\n                    &lt;td align=\"right\"&gt;&lt;label class=\"formlabel\"&gt;&amp;nbsp;&lt;/label&gt;&lt;/td&gt;&lt;td&gt;&lt;input type=\"submit\" value=\"Submit  &amp;#9658;\"&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n        &lt;/td&gt;    \n    &lt;/table&gt;\n&lt;/form&gt; \n</code></pre>\n\n<p>I don't see any errors, but I do see a strange object reference in place of the <code>ChoiceField</code> in the template.</p>\n\n<pre><code>&lt;django.forms.fields.ChoiceField object at 0x7ffdbc054190&gt;\n&lt;django.forms.fields.ChoiceField object at 0x7ffdbc0542d0&gt;\n</code></pre>\n\n<p>I see these instead.  I know I'm close...just can't quite get what I'm going wrong.</p>\n\n<p>Thoughts?</p>\n"},{"tags":["django","oracle","orm","django-models","django-multi-db"],"answer_count":1,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":149,"score":4,"question_id":12862541,"title":"django multi db routing doesnt work with multiple schemas","body":"<p>I have django running on oracle backend. I need to use two schemas - one for a legacy DB, second one for all django related tables.</p>\n\n<p>So this is my settings.DATABASES:</p>\n\n<pre><code>APPS_DB = 'apps'\nDATABASES = {\n\n    'default' : { \n        'ENGINE': 'django.db.backends.oracle'\n        'NAME': 'django',                      \n        'USER': 'django-tables',                      \n        'PASSWORD': '****',                  \n        'HOST': 'localhost',                       \n        'PORT': '1531',                     \n    },\n\n    APPS_DB : { \n        'ENGINE': 'django.db.backends.oracle', \n        'NAME': 'django',                      \n        'USER': 'legacy-stuff',                      \n        'PASSWORD': '****',                 \n        'HOST': 'localhost',                     \n        'PORT': '1531',                      \n     },\n}\n</code></pre>\n\n<p>I also defined router:</p>\n\n<pre><code>class MyRouter(object):\n    \"\"\"A router to control all database operations on models\"\"\"\n\ndef __init__(self):\n    aux = []\n    for app in settings.INSTALLED_APPS:\n        if not app.endswith('myapp'):\n            aux.append(app)\n    self.djangoStuff = tuple(map(lambda x: x[x.rfind('.')+1:], aux))\n\ndef is_django_stuff(self, model):\n    return model._meta.app_label in self.djangoStuff\n\ndef db_for_read(self, model, **hints):\n    \"Point all django apps models to separate DB\"\n    logger.info(\"READ from \" + model._meta.app_label)\n    if self.is_django_stuff(model):\n        logger.info(\"Will be directed to default DB\")\n        return None\n    logger.info(\"Will be directed to legacy DB\")    \n    return settings.APPS_DB\n\ndef db_for_write(self, model, **hints):\n    \"Point all django apps models to separate DB\"\n    logger.info(\"WRITE\")\n    if self.is_django_stuff(model):\n        return None\n    return settings.APPS_DB\n\ndef allow_relation(self, obj1, obj2, **hints):\n    \"Allow any relation\"\n    logger.info(\"ALLOW REL\")\n    return True\n\ndef allow_syncdb(self, db, model):\n    \"Allow syncdb for all managed objects\"\n    logger.info(\"ALLOW SYNC\")\n    if db == 'default' and self.is_django_stuff(model):\n        return True\n    if db != 'default' and not self.is_django_stuff(model):\n        return True\n    return False\n</code></pre>\n\n<p>Now I have very simple model:</p>\n\n<pre><code>class Poll(models.Model):\n    question = models.CharField(max_length=200)\n    user = models.ForeignKey(User)\n    pub_date = models.DateTimeField('date published')\n</code></pre>\n\n<p>I make two syncdbs:</p>\n\n<pre><code>python manage.py syncdb\npython manage.py syndb --database apps\n</code></pre>\n\n<p>Everything goes fine.\nThen I create poll object using 'python manage.py shell'</p>\n\n<pre><code>superuser = User.objects.all()[0]\np = Poll(question=\"foo\", user = superuser, pub_date = datetime.now())\np.save()\n</code></pre>\n\n<p>And I try to retrieve user from poll:</p>\n\n<pre><code>  a = Poll.objects.all()\n  b = len(a)\n  b = a[0]\n  c = b.artist\n</code></pre>\n\n<p>I have logging enabled in router so I see that last query will be directed to correct DB:</p>\n\n<pre><code>READ from myapp\nWill be directed to apps DB\nREAD from myapp\nWill be directed to apps DB\nREAD from auth\nWill be directed to default DB\n</code></pre>\n\n<p>I can even see actual SQL statement:</p>\n\n<pre><code>(0.005) SELECT \"AUTH_USER\".\"ID\", \"AUTH_USER\".\"USERNAME\", \"AUTH_USER\".\"FIRST_NAME\",    \"AUTH_USER\".\"LAST_NAME\", \"AUTH_USER\".\"EMAIL\", \"AUTH_USER\".\"PASSWORD\", \"AUTH_USER\".\"IS_STAFF\", \"AUTH_USER\".\"IS_ACTIVE\", \"AUTH_USER\".\"IS_SUPERUSER\", \"AUTH_USER\".\"LAST_LOGIN\", \"AUTH_USER\".\"DATE_JOINED\" FROM \"AUTH_USER\" WHERE \"AUTH_USER\".\"ID\" = :arg0 ; args=(1,)\n</code></pre>\n\n<p>But I'm getting error:</p>\n\n<pre><code>  File \"&lt;console&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/fields/related.py\", line 350, in __get__\n    rel_obj = qs.get(**params)\n  File \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/query.py\", line 361, in get\n    num = len(clone)\n  File \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/query.py\", line 85, in __len__\n    self._result_cache = list(self.iterator())\n  File \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/query.py\", line 291, in iterator\n    for row in compiler.results_iter():\n  File \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/sql/compiler.py\", line 763, in results_iter\n    for rows in self.execute_sql(MULTI):\n  File \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/models/sql/compiler.py\", line 818, in execute_sql\n    cursor.execute(sql, params)\n  File \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/backends/util.py\", line 40, in execute\nreturn self.cursor.execute(sql, params)\n  File \"/usr/local/lib/python2.7/dist-packages/Django-1.4.1-py2.7.egg/django/db/backends/oracle/base.py\", line 675, in execute\n    return self.cursor.execute(query, self._param_generator(params))\nDatabaseError: ORA-00942: table or view does not exist\n</code></pre>\n\n<p>So my question is - what am I doing wrong?</p>\n"},{"tags":["python","django","nginx","wsgi","uwsgi"],"answer_count":4,"favorite_count":5,"up_vote_count":8,"down_vote_count":0,"view_count":4711,"score":8,"question_id":7739810,"title":"WSGI vs uWSGi with Nginx","body":"<p>Could anyone please explain pros/cons when using <a href=\"http://www.wsgi.org/en/latest/index.html\">WSGI</a> VS <a href=\"http://projects.unbit.it/uwsgi/wiki\">uWSGI</a> with Nginx.</p>\n\n<p>Currently i am building up a production server for the Django website which i have prepared but unable to decide whether should i go with WSGI or uWSGI. Could you please explain in detail what differentiates each configuration? Which configuration should scale the best?</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["django","templates"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13001490,"title":"django template: get dictionary value","body":"<p>My view function does the following:</p>\n\n<pre><code>search_parameters = {\"words\": \"hello\"}\nreturn render('mypage.html', {'results': results, 'search_parameters':search_parameters})\n</code></pre>\n\n<p>In my template, I thought I could get \"hello\" by writing:</p>\n\n<pre><code>{{search_parameters.words}}\n</code></pre>\n\n<p>but it's blank. </p>\n\n<p>What does work is looping through every value like so</p>\n\n<pre><code>{% for key,value in search_parameters.items %}\n</code></pre>\n\n<p>but I'd really like to avoid doing that every time I need to get a value from the dictionary. </p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12963394,"title":"Loading static files into Django","body":"<p>I am trying to load my CSS, images, and javascript into my Django template using\n <code>{{ STATIC_URL }}</code></p>\n\n<p>I am having a problem getting it to work. Here is the relevant code:</p>\n\n<p>Url's.py:</p>\n\n<pre><code>from django.contrib.staticfiles.urls import staticfiles_urlpatterns\n...\nurlpatterns += staticfiles_urlpatterns()\n</code></pre>\n\n<p>Settings.py</p>\n\n<pre><code>import os\nDEBUG = True\nTEMPLATE_DEBUG = DEBUG\n\nPROJECT_ROOT = os.path.realpath(os.path.dirname(__file__))\n\nMEDIA_URL = '/assets/'\n\nSTATIC_ROOT = os.path.realpath(os.path.join(PROJECT_ROOT, 'static'))\n\nSTATIC_URL = '/static/'\n\nSTATICFILES_DIRS = (\n    \"/Users/Chris/project/static/\",\n)\n\nSTATICFILES_FINDERS = (\n    'django.contrib.staticfiles.finders.FileSystemFinder',\n    'django.contrib.staticfiles.finders.AppDirectoriesFinder',\n)\n</code></pre>\n\n<p>Stylesheet URl:</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"{{ STATIC_URL }}css/style.css\"&gt;\n</code></pre>\n\n<p>If you need anymore information just ask, and thanks for your help!</p>\n\n<p><strong>UPDATE:\nI have added the following things trying to fix the problem. But it still persists:</strong></p>\n\n<p>To the views where I'm trying to import the stylesheet:</p>\n\n<pre><code>'context_instance':RequestContext(request),\n</code></pre>\n\n<p>To the setting.py file:</p>\n\n<pre><code>TEMPLATE_CONTEXT_PROCESSORS = (\n\"django.contrib.auth.context_processors.auth\",\n\"django.core.context_processors.debug\",\n\"django.core.context_processors.i18n\",\n\"django.core.context_processors.media\",\n\"django.core.context_processors.static\",\n\"django.contrib.messages.context_processors.messages\",\n</code></pre>\n\n<p>)</p>\n\n<p>Here is my Installed App's if this helps:</p>\n\n<pre><code>INSTALLED_APPS = (\n'django.contrib.auth',\n'django.contrib.contenttypes',\n'django.contrib.sessions',\n'django.contrib.sites',\n'django.contrib.messages',\n'django.contrib.staticfiles',\n'django.contrib.admin',\n'djblog',\n</code></pre>\n\n<p>)</p>\n\n<p>My URLs.py file for the admin, and pointing to my other URL file:</p>\n\n<pre><code>from django.conf.urls.defaults import *\n\n# Uncomment the next two lines to enable the admin:\nfrom django.contrib import admin\nadmin.autodiscover()\n\nurlpatterns = patterns('',\n# Examples:\n# url(r'^$', 'blog.views.home', name='home'),\n# url(r'^blog/', include('blog.foo.urls')),\nurl(r'^admin/', include(admin.site.urls)),\n(r'^', include('djblog.urls')),\n</code></pre>\n\n<p>)</p>\n\n<p>My main URL file:</p>\n\n<pre><code>from django.conf.urls.defaults import *\nfrom views import *\nfrom models import *\nfrom django.contrib.staticfiles.urls import staticfiles_urlpatterns\n\nurlpatterns = patterns('',\n(r'^$', list),\n(r'^archive/(?P&lt;archive&gt;\\d{1,2})/$', list),\n(r'^\\d{4}/\\d{1,2}/(?P&lt;sl&gt;.*)/$', detail),\n(r'^(?P&lt;year&gt;\\d{4})/(?P&lt;month&gt;\\d{1,2})/$', month),\n(r'^(?P&lt;year&gt;\\d{4})/$', year),\n(r'^category/$', category),\n(r'^category/(?P&lt;category&gt;.*)/$', one_category),\n(r'^tag/$', tag),\n(r'^tag/(?P&lt;tag&gt;.*)/$', one_tag),\n)\nurlpatterns += staticfiles_urlpatterns()\n</code></pre>\n"},{"tags":["django","views","try-catch"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12996387,"title":"IndexError, except doesnt work. Django","body":"<p>In <code>views</code> I have:</p>\n\n<pre><code>        def cars(request, cars_id):\n            try:\n                 car = Car.objects.filter(id=cars_id).values('model')\n                 all_cars = Models.objects.filter(cars_id=cars_id).values('id', \n                 'name', 'cars_id')\n            except Car.DoesNotExist:\n                 cars_id=1\n            except Exception, e:\n                 print e\n            except IndexError:\n                 cars_id=1\n            return render_to_response('cars.html', {'all_cars': all_cars, 'car':car[0]['model']})\n</code></pre>\n\n<p>So, in browser I enter, for example, <em>car/10000000/</em>, and I have an error: </p>\n\n<p><strong>IndexError: list index out of range</strong>.</p>\n\n<p>Why my 'except' doesnt work and how to fix it?</p>\n"},{"tags":["django","django-admin","django-admin-tools"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13001181,"title":"How to add a custom menu item on django-admin-tools dashboard","body":"<p>I want to add a custom link to a ModelList group on django-admin-tools. I tried that but it didn't show the link. What am I missing ?</p>\n\n<pre><code>class CustomIndexDashboard(Dashboard):\n    columns = 2\n\n    def __init__(self, **kwargs):\n        Dashboard.__init__(self, **kwargs)\n\n        grupo = modules.ModelList('Matrículas', \n           [ 'core.models.Aluno',\n             'core.models.Matricula',\n             'core.models.ModuloAtivo',\n           ])\n\n        item = items.MenuItem(u\"Orçamentos\", \"%s%s\" % (reverse('admin:core_matricula_changelist'), \"?status__exact=O\" ) )\n\n        grupo.children += [ item ] \n\n        self.children += [ grupo, \n\n          modules.ModelList('Controle de Presença', [ \n                                          'core.models.Aula',\n                                          'core.models.Pauta',\n                                          'core.models.Presenca',\n                                          'core.models.PautaModulo',                              \n                                          ])\n        ]\n</code></pre>\n"},{"tags":["python","django","cherrypy"],"answer_count":7,"favorite_count":3,"up_vote_count":17,"down_vote_count":1,"view_count":8025,"score":16,"question_id":1514755,"title":"cherrypy vs django","body":"<p>cherrypy vs django, which would you use and why</p>\n"},{"tags":["django","pydev","virtualenv"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":97,"score":0,"question_id":12942350,"title":"django in virtualenv with pydev","body":"<p>mac ox 8.2, eclipse juno, python 2.7, django 1.4.1, pydev 2.7.1.2012100913</p>\n\n<p>I'm relative new with python/django and I'm trying to get it to work with pydev in a virtualenvironment. I set up the virtualenvironment installed django and successfully created and started a django project. After that I decided that I want to use my favorite editor eclipse.</p>\n\n<p>I created a new pydev/django project, configured and selected a new interpreter (from virtualenv) and used that, I also included the virtualenv/lib/python2.7/site-packages/django in the interpreter libraries. However after going the next dialog, I got an error message \"Django not found\"</p>\n\n<p>I went over the documentation but I haven't found any solution yet.</p>\n\n<p>I was also wondering whether the workenvironment (or the actual code) needs to live in a subdirectory of the virtualenv directory) And whether the virtualenv must be activated (I suppose so), tried all these options but no luck yet.</p>\n"},{"tags":["python","django","comet","gevent"],"answer_count":1,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":832,"score":6,"question_id":10964571,"title":"how to combine django plus gevent the basics?","body":"<p>After much searching and googling I am coming back to the well.\nI have Django 1.4 and am looking for a decent <em>working</em> example to figure out getting Django to work with gevent.\nI like the Django framwork but I need it to handle long polling.\nI already have a working server using gevent on it's own that handles long polling requests as well as does image streaming via http at about 10 frames/second. I would like to use all the goodies in Django to provide a framework for this part.</p>\n\n<p>There are many examples out there, but unfortunately none of these seem to work out of the box! It would really help to have a working example to understand how these two things are working together.</p>\n\n<p>Here is what I have found so far and the problems:</p>\n\n<p><a href=\"http://codysoyland.com/2011/feb/6/evented-django-part-one-socketio-and-gevent/\" rel=\"nofollow\">http://codysoyland.com/2011/feb/6/evented-django-part-one-socketio-and-gevent/</a>\nproblem:\nImportError: Could not import settings 'webchat.settings' (Is it on sys.path?): No module named webchat.settings</p>\n\n<p><a href=\"https://github.com/codysoyland/django-socketio-example/blob/master/README.rst\" rel=\"nofollow\">https://github.com/codysoyland/django-socketio-example/blob/master/README.rst</a>\nProblem: installation fails with permission problem getting gevent\nTried manually getting it from git hub. The example runs, but generates these errors when the browsers connect.</p>\n\n<p>These are informative but do not provide the basic answer.\n<a href=\"http://stackoverflow.com/questions/5614274/need-help-understanding-comet-in-python-with-django\">Need help understanding Comet in Python (with Django)</a>\nhttps://bitbucket.org/denis/gevent/src/tip/examples/webchat/chat/views.py\n<a href=\"http://blog.gevent.org/2009/10/10/simpler-long-polling-with-django-and-gevent/\" rel=\"nofollow\">http://blog.gevent.org/2009/10/10/simpler-long-polling-with-django-and-gevent/</a></p>\n\n<p>What I hope someone can explain (please, pretty please....) is this:\nI have a basic site created using Django 1.4 - the tutorial here <a href=\"https://docs.djangoproject.com/en/1.4/intro/tutorial01/\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.4/intro/tutorial01/</a> is excellent.\nSo now I need to understand what changes to make in order to use gevent and be able to handle asynchronous events. I am sure it is not difficult - I just need someone who understands it to explain what to do and also what is happening (with things like monkey_patch).</p>\n\n<p>Thanks.</p>\n"},{"tags":["mysql","django"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":8118,"score":5,"question_id":2947618,"title":"Django tutorial says I haven't set DATABASE_ENGINE setting yet... but I have","body":"<p>I'm working through the Django tutorial and receiving the following error when I run the initial python manage.py syncdb:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"manage.py\", line 11, in &lt;module&gt;\n  execute_manager(settings)\nFile \"/Library/Python/2.6/site-packages/django/core/management/__init__.py\", line 362 in execute_manager\n  utility.execute()\nFile \"/Library/Python/2.6/site-packages/django/core/management/__init__.py\", line 303, in execute\n  self.fetch_command(subcommand).run_from_argv(self.argv)\nFile \"/Library/Python/2.6/site-packages/django/core/management/base.py\", line 195, in run_from_argv\n  self.execute(*args, **options.__dict__)\nFile \"/Library/Python/2.6/site-packages/django/core/management/base.py\", line 222, in execute\n  output = self.handle(*args, **options)\nFile \"/Library/Python/2.6/site-packages/django/core/management/base.py\", line 351, in handle\n  return self.handle_noargs(**options)\nFile \"/Library/Python/2.6/site-packages/django/core/management/commands/syncdb.py\", line 49, in handle_noargs\n  cursor = connection.cursor()\nFile \"/Library/Python/2.6/site-packages/django/db/backends/dummy/base.py\", line 15, in complain\n  raise ImproperlyConfigured, \"You haven't set the DATABASE_ENGINE setting yet.\"\ndjango.core.exceptions.ImproperlyConfigured: You haven't set the DATABASE_ENGINE setting yet.\n</code></pre>\n\n<p>My settings.py looks like:</p>\n\n<pre><code>DATABASES = {\n  'default': {\n    'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.\n    'NAME': 'dj_tut',                      # Or path to database file if using sqlite3.\n    'USER': '',                      # Not used with sqlite3.\n    'PASSWORD': '',                  # Not used with sqlite3.\n    'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.\n    'PORT': '',                      # Set to empty string for default. Not used with sqlite3.\n  }\n}\n</code></pre>\n\n<p>I'm guessing this is something simple, but why isn't it seeing the ENGINE setting?</p>\n"},{"tags":["django","migration","foreign-keys","django-south"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12998409,"title":"Default object for foreign key does not appear in migration","body":"<p>I have an existing database and need to add a required foreign key to an existing table.  I'm using Django 1.4 and South.  Let's say that my model currently consists of music tracks:</p>\n\n<pre><code>class Track(models.Model):\n  title = models.CharField(blank=True, max_length=100)\n  recording = models.FileField(upload_to=get_file_path, blank=True, null=True)\n</code></pre>\n\n<p>Now I want to add an Artist model.  In order to not mix a schema migration with a data migration, I first created the new table:</p>\n\n<pre><code>class Artist(models.Model):\n  bio = models.TextField(max_length = 500)\n</code></pre>\n\n<p>And migrated that.  All is looking good.  Now, to link the tracks to an artist I add my foreign key:</p>\n\n<pre><code>class Track(models.Model):\n  title = models.CharField(blank=True, max_length=100)\n  script_sample = models.FileField(upload_to=get_file_path, blank=True, null=True)\n  artist = models.ForeignKey(Artist, default=get_default_artist)\n</code></pre>\n\n<p>And here's where the trouble lies. Based on this solution (http://stackoverflow.com/questions/7080486/how-do-you-specify-a-default-for-the-django-foreignkey-field) and other similar ones, I tried:</p>\n\n<pre><code>def get_default_artist():\n  return Artist.objects.get_or_create(bio=\"Josie Schmosie is awesome\")\n</code></pre>\n\n<p>I do want a get_or_create so this will work on dev, staging, and production.  That creates a migration that looks like this:</p>\n\n<pre><code>db.add_column('music_track', 'artist',\n  self.gf('django.db.models.fields.related.ForeignKey')(default=(&lt;Artist: Josie Schmosie&gt;, False), to=orm['music.Artist']),\n  keep_default=False)\n</code></pre>\n\n<p>This has a syntax error on migrate, because default should be an object, not a tuple.  So I tried this instead:</p>\n\n<pre><code>def get_default_artist():\n  artist, created = Artist.objects.get_or_create(bio=\"Josie Schmosie is awesome\")\n  return artist\n</code></pre>\n\n<p>And then my migration has no default value:</p>\n\n<pre><code>db.add_column('music_track', 'artist',\n  self.gf('django.db.models.fields.related.ForeignKey')(to=orm['music.Artist']),\n  keep_default=False)\n</code></pre>\n\n<p>I've put a trace in and there is definitely an object being passed in from the function.</p>\n\n<p>Why can the schemamigration pass in a tuple (that can't migrate) but not an object?  What is the right way to do this?\nThanks!</p>\n"},{"tags":["django","django-templates","html-form-post"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12997951,"title":"Passing DJango template variable as an input parameter","body":"<p>I'm using Django 1.4 with Python 2.7 on Ubuntu 12.04.</p>\n\n<p>I have a template that uses Django's template syntax to generate a list of objects.  I want to create a \"form post\" on each item to give the option to delete that item from the list.  Pretty simple:</p>\n\n<pre><code>MySQL &lt;remove&gt; \nLinux &lt;remove&gt;  \nJava   &lt;remove&gt;\nPython   &lt;remove&gt;\nC++   &lt;remove&gt;\nPostgreSQL   &lt;remove&gt;\nDjango &lt;remove&gt;\n</code></pre>\n\n<p>Where <code>&lt;remove&gt;</code> is a \"submit\".</p>\n\n<p>Here is what the template looks like:</p>\n\n<pre><code>{% if not dev.user.is_superuser %}\n    {% if dev.user.is_authenticated and dev.user.is_staff %}\n       &lt;ul&gt;\n       {% for skill in dev.skill_set.all %}\n           &lt;form action=\"/removeSkill/\" method=\"post\"&gt;{% csrf_token %}\n           &lt;li&gt;\n               {{ skill.skill }}\n               &lt;input type=\"hidden\" name=\"skill\" value={{ skill.skill }}&gt;\n               &lt;label class=\"formlabel\"&gt;&amp;nbsp;&lt;/label&gt;\n               &lt;input type=\"submit\" value=\"Remove  &amp;#9658;\"&gt;&lt;/li&gt;\n           &lt;/form&gt;\n       {% endfor %}\n       &lt;/ul&gt;\n    {% endif %}\n</code></pre>\n\n<p>I need to know how to pass the <code>{{ skill.skill }}</code> value as the hidden input's <code>value</code>.</p>\n\n<p>Any suggestions?</p>\n\n<p>UPDATE 1:</p>\n\n<p>Ok, it looks like what I'm doing in the template is working wonderfully.  I just can't seem to actually delete the entry from the database in the view.</p>\n\n<pre><code>def remove_skill(request):\n    \"\"\"\n    ..  function:: remove_skill()\n\n        Remove a skill for a developer\n\n        :param request: Django Request object\n    \"\"\"\n    ## Create a logging object\n    path = os.path.join(os.path.dirname(__file__), 'logs/')\n    filename = '{0}debug.log'.format(path)\n    logfile = open(filename, 'w')\n    now = datetime.datetime.now()\n    logfile.write('\\n --------------------- {0}\\n'.format(now))\n    if (request.user.is_authenticated() and request.user.is_staff):\n        userProfile = UserProfile.objects.get(user_id = request.user.id)\n        devSkills = DevSkills(dev = userProfile, skill = request.POST.get('skill'))\n        logfile.write('user =  {0}\\n'.format(devSkills.dev_id))\n        logfile.write('skill to remove =  {0}\\n'.format(devSkills.skill))\n        devSkills.delete()\n        logfile.close()\n\n    return dev_profile(request)\n</code></pre>\n\n<p>The <code>debug.log</code> file shows information for the correct entry, but I continue to get the following error when I try and remove a skill:</p>\n\n<pre><code>DevSkills object can't be deleted because its id attribute is set to None.\n</code></pre>\n\n<p>Suggestions?</p>\n"},{"tags":["php","python","django",".htaccess"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":12998085,"title":"How can I ignore the Django framework for certain URLs?","body":"<p>I'm adding a new web application to a server, which currently hosts 4 websites using the Django framework. I've got a PHP web application and want to host it on the server too. However I don't have time to convert the application to Django, about which I know little.</p>\n\n<p>So basically my PHP app sits at <code>http://82.*.*.*/templates/blah/</code> and I point my domain to the IP address. I've no idea about the main entry point for Django, so I've tried adding the following rewrite rule to the top of the file /etc/httpd/conf.d/python.conf:</p>\n\n<pre><code>RewriteEngine On\nRewriteCond %{HTTP_HOST} ^(www.)?myphpapp.com$\nRewriteRule ^(/)?$ templates/blah/ [L]\n</code></pre>\n\n<p>However I'm getting Django errors when I try to load the page.</p>\n\n<p><strong>Update..</strong></p>\n\n<p>I'm reading about doing this with VirtualHost (the python.conf file uses VirtualHost) and is defined as..</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n\nDocumentRoot \"/var/www/djangosites/\"\n\n(..rewrite rules..)\n\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>I've therefore tried adding my own entry ie..</p>\n\n<pre><code>&lt;VirtualHost www.myphpapp.com:80&gt;\n    DocumentRoot \"/var/www/myapp/\"\n    ServerName www.myphpapp.com\n    ServerAlias www.myphpapp.com\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>This works for my new app, however it now redirects all the existing django domains to my new app!</p>\n"},{"tags":["django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":30,"score":-1,"question_id":12998145,"title":"Error: No module named debug_toolbar_htmltidy","body":"<p>I Started a new project and added \"debug_toolbar_htmltidy\" in settings.py but showing  Error: No module named debug_toolbar_htmltidy</p>\n"},{"tags":["django","django-models","introspection","metamodel"],"answer_count":1,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":4690,"score":8,"question_id":3647805,"title":"Get model's fields in Django","body":"<p>Given a Django model, I'm trying to list all of it's fields.  I've seen some examples of doing this using the _meta model attribute, but doesn't the underscore in front of meta indicate that the _meta attribute is a private attribute and shouldn't be accessed directly?  ... Because, for example, the layout of _meta could change in the future and not be a stable API?   </p>\n\n<p>Is _meta an exception to this rule?  Is it stable and ready to use or considered bad practice to use it?  Or is there a function or some other way to introspect the fields of a model without using the _meta attribute?  Below is a list of some links showing how to do this using the _meta attribute</p>\n\n<p>Any advice is much appreciated.  </p>\n\n<p><a href=\"http://stackoverflow.com/questions/763558/django-object-get-set-field\">http://stackoverflow.com/questions/763558/django-object-get-set-field</a></p>\n\n<p><a href=\"http://www.djangofoo.com/80/get-list-model-fields\" rel=\"nofollow\">http://www.djangofoo.com/80/get-list-model-fields</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/2384436/how-to-introspect-django-model-fields\">http://stackoverflow.com/questions/2384436/how-to-introspect-django-model-fields</a></p>\n"},{"tags":["django","facebook","oauth"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":221,"score":0,"question_id":12996864,"title":"redirect_uri error in oauth for facebook django app","body":"<p>I am having a problem getting an access token from Facebook for a Django app I am trying to write. I have a view set up as follows.</p>\n\n<pre><code>from django.http import HttpResponse, HttpResponseRedirect\nfrom django.template import Context, loader\nimport urllib, json, sys\n\nAPP_ID = 'DDDDDDDDDDDDDDD'\nAPP_SECRET = 'SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSS'\nMY_URL = 'http://pckandap.com'\n\ndef fbauth(request):\n    template = loader.get_template('fbauth.html')\n\n    code = request.GET.get('code')\n    if code is None:\n        redirect_url = 'https://www.facebook.com/dialog/oauth?client_id='+APP_ID+'&amp;redirect_uri='+MY_URL+'&amp;state=pk1&amp;scope=user_likes'\n        return HttpResponseRedirect(redirect_url)\n    else:\n        access_token = urllib.urlopen('https://graph.facebook.com/oauth/access_token?client_id='+APP_ID+'&amp;redirect_uri='+MY_URL+'&amp;client_secret='+APP_SECRET+'&amp;code='+code)\n        context = Context({\n            'code_url' : 'https://www.facebook.com/dialog/oauth?client_id='+APP_ID+'&amp;redirect_uri=http://test.com'+'&amp;state=pk1&amp;scope=user_likes',\n            'token_url' : 'https://graph.facebook.com/oauth/access_token?client_id='+APP_ID+'&amp;redirect_uri='+MY_URL+'&amp;client_secret='+APP_SECRET+'&amp;code='+code,\n            'access_token' : access_token.read()\n        })\n    return HttpResponse(template.render(context))\n</code></pre>\n\n<p>In my template which dumps those three variables I get the following:<br>\n<strong>code_url</strong> : <a href=\"https://www.facebook.com/dialog/oauth?client_id=258585004264349&amp;redirect_uri=http://pckandap.com&amp;state=pk1&amp;scope=user_likes\" rel=\"nofollow\">https://www.facebook.com/dialog/oauth?client_id=258585004264349&amp;redirect_uri=http://pckandap.com&amp;state=pk1&amp;scope=user_likes</a> <br>\n<strong>token_url</strong> : <a href=\"https://graph.facebook.com/oauth/access_token?client_id=258585004264349&amp;redirect_uri=http://pckandap.com&amp;client_secret=0916bad6925f0df7719218bef87b9576&amp;code=AQDiSPeG4wGLSPKLxy2P1gPWv6se46PN_-CPbUeB3ruZKmvPM7enVHc7yiiLe6goFZwG7quOokNGLY6ktOi32VX0SB5lqjbe-kvT_hxhwIYV3VkJklOpFysSWAWrCnOu5w0pYVIC5GAIpOE7QUVzq3GMf-u6W096zn_4h7X9ODjHo1qGdxUTf9KxCpDXJLzRib2YtZfpR2-RZj0tmAXoN139\" rel=\"nofollow\">https://graph.facebook.com/oauth/access_token?client_id=258585004264349&amp;redirect_uri=http://pckandap.com&amp;client_secret=0916bad6925f0df7719218bef87b9576&amp;code=AQDiSPeG4wGLSPKLxy2P1gPWv6se46PN_-CPbUeB3ruZKmvPM7enVHc7yiiLe6goFZwG7quOokNGLY6ktOi32VX0SB5lqjbe-kvT_hxhwIYV3VkJklOpFysSWAWrCnOu5w0pYVIC5GAIpOE7QUVzq3GMf-u6W096zn_4h7X9ODjHo1qGdxUTf9KxCpDXJLzRib2YtZfpR2-RZj0tmAXoN139</a> <br>\n<strong>access_token</strong> : {\"error\":{\"message\":\"Error validating verification code. Please make sure your redirect_uri is identical to the one you used in the OAuth dialog request\",\"type\":\"OAuthException\",\"code\":100}}</p>\n"},{"tags":["django","heroku","gunicorn"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12987524,"title":"Heroku django app on Gunicorn unable to log in","body":"<p>When I deploy my Django app to heroku with the dev server enabled, I am able to log in at the login page and interact with my app normally.</p>\n\n<p>When I replace the dev server with Gunicorn, with a procfile like so:</p>\n\n<pre><code>web: python manage.py run_gunicorn -b \"0.0.0.0:$PORT\" -c gunicorn_conf.py\n</code></pre>\n\n<p>And gunicorn_conf.py</p>\n\n<pre><code>accesslog = '-'\naccess_log_format = '%({Host}i)s %(h)s %(l)s \"%({X-Remote-User-Id}o)s: %({X-Remote-User-Name}o)s\" %(t)s \"%(r)s\" %(s)s %(b)s \"%(f)s\" \"%(a)s'\nworkers = 3\n</code></pre>\n\n<p>For some reason I get caught in an endless loop:</p>\n\n<p>Visiting a URL protected by <code>@login_required</code> decorator takes me to the login page with the appropriate <code>?next=/url/</code>, but entering my login details does not appear to log me in, rather takes me back to the same page, with <code>?next=</code> still set. This behaviour is not seen on the development server, what am I missing?</p>\n\n<p>From Heroku logs:</p>\n\n<pre><code>2012-10-21T12:30:16+00:00 heroku[router]: GET fierce-sierra-5064.herokuapp.com/count/new/ dyno=web.1 queue=0 wait=0ms service=104ms status=302 bytes=5 \n2012-10-21T12:30:16+00:00 heroku[router]: GET fierce-sierra-5064.herokuapp.com/login/?next=/count/new/ dyno=web.1 queue=0 wait=0ms service=160ms status=200 bytes=1932 \n2012-10-21T12:30:17+00:00 app[web.1]: fierce-sierra-5064.herokuapp.com 82.13.204.57 - \"-: -\" [21/Oct/2012:13:30:16] \"GET /count/new/ HTTP/1.1\" 302 None \"http://fierce-sierra-5064.herokuapp.com/\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4 \n2012-10-21T12:30:17+00:00 app[web.1]: fierce-sierra-5064.herokuapp.com 82.13.204.57 - \"-: -\" [21/Oct/2012:13:30:16] \"GET /login/?next=/count/new/ HTTP/1.1\" 200 None \"http://fierce-sierra-5064.herokuapp.com/\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4 \n2012-10-21T12:30:17+00:00 heroku[router]: GET fierce-sierra-5064.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=22ms status=404 bytes=17 \n2012-10-21T12:30:17+00:00 app[web.1]: fierce-sierra-5064.herokuapp.com 82.13.204.57 - \"-: -\" [21/Oct/2012:13:30:17] \"GET /favicon.ico HTTP/1.1\" 404 None \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4 \n2012-10-21T12:30:22+00:00 app[web.1]: fierce-sierra-5064.herokuapp.com 82.13.204.57 - \"-: -\" [21/Oct/2012:13:30:22] \"POST /login/?next=/count/new/ HTTP/1.1\" 302 None \"http://fierce-sierra-5064.herokuapp.com/login/?next=/count/new/\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4 2012-10-21T12:30:22+00:00 heroku[router]: POST fierce-sierra-5064.herokuapp.com/login/?next=/count/new/ dyno=web.1 queue=0 wait=0ms service=587ms status=302 bytes=5 \n2012-10-21T12:30:22+00:00 app[web.1]: fierce-sierra-5064.herokuapp.com 82.13.204.57 - \"-: -\" [21/Oct/2012:13:30:22] \"GET /count/new/ HTTP/1.1\" 302 None \"http://fierce-sierra-5064.herokuapp.com/login/?next=/count/new/\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4 \n2012-10-21T12:30:22+00:00 heroku[router]: GET fierce-sierra-5064.herokuapp.com/count/new/ dyno=web.1 queue=0 wait=0ms service=153ms status=302 bytes=5 \n2012-10-21T12:30:22+00:00 heroku[router]: GET fierce-sierra-5064.herokuapp.com/login/?next=/count/new/ dyno=web.1 queue=0 wait=0ms service=171ms status=200 bytes=1932 \n2012-10-21T12:30:22+00:00 app[web.1]: fierce-sierra-5064.herokuapp.com 82.13.204.57 - \"-: -\" [21/Oct/2012:13:30:22] \"GET /login/?next=/count/new/ HTTP/1.1\" 200 None \"http://fierce-sierra-5064.herokuapp.com/login/?next=/count/new/\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4 \n2012-10-21T12:30:23+00:00 app[web.1]: fierce-sierra-5064.herokuapp.com 82.13.204.57 - \"-: -\" [21/Oct/2012:13:30:23] \"GET /favicon.ico HTTP/1.1\" 404 None \"-\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4\n</code></pre>\n"},{"tags":["django","nginx","ubuntu-11.10","uwsgi"],"answer_count":1,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":2726,"score":8,"question_id":10453828,"title":"Django + uWSGI via NGINX on Ubuntu 11.10","body":"<p>I'm trying do deploy a django project. I tried a lot of tutorials, but had no luck. I use a new clean Ubuntu 11.10. I've performed</p>\n\n<pre><code>apt-get install nginx\napt-get install uwsgi\nservice nginx start\n</code></pre>\n\n<p>I've created folder <code>/deploy/project1</code> and put there <code>manage.py</code> and other files.</p>\n\n<p>My current <code>/deploy/project1/project1/wsgi.py</code> contains:</p>\n\n<pre><code>import os\n\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"project1.settings\")\n\nfrom django.core.wsgi import get_wsgi_application\napplication = get_wsgi_application()\n</code></pre>\n\n<p>So, could you tell me how to deploy my django app for <code>domain.com</code> properly? </p>\n\n<p>I've also installed Django via pip and easy_install</p>\n\n<p>What should I add in <code>/etc/nginx/sites-enabled/default</code>.</p>\n"},{"tags":["python","django","google-app-engine","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":90,"score":0,"question_id":12996904,"title":"How to remove all html tags from django template?","body":"<p>I would like to use django template for e-mail sending.\nBut I should have two version of e-mails - html and plain text. The first version is generated like below:</p>\n\n<pre><code>template_values = {\n     'company_id': company.id\n     }\ntemplate_file = os.path.join(os.path.dirname(__file__), 'templates/email.html')\nhtml = template.render(template_file, template_values)\n</code></pre>\n\n<p>Now I should generate plain text from the same file - <code>templates/email.html</code>, but it contains html tags (like <code>&lt;div style=\"font-size:13px; margin: 14px; position:relative\"&gt;</code>), which I should remove (links should stay, but should be replaced with plain text, for ex., <code>&lt;a href=\"http://example.com\"&gt;Example&lt;/a&gt;</code> should be replaced with something like <code>Example (http://example.com)</code>).</p>\n\n<p>I've read that I shouldn't use regex for this. What kind of built-in GAE library can help me? Or is there any way to use somehow django's <a href=\"https://docs.djangoproject.com/en/dev/ref/templates/builtins/#striptags\" rel=\"nofollow\">striptags</a>?</p>\n"},{"tags":["django"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":361,"score":0,"question_id":7643468,"title":"Get the current request from a RequestContext?","body":"<p>Does a Django <code>RequestContext</code> have a way to get the <code>HttpRequest</code> object with which it is associated with? Does it have a method like <code>get_request()</code> or the like to get the <code>request</code> which is passed into the constructor? I need to reference it from a method in which I only receive the <code>RequestContext</code>.</p>\n"},{"tags":["python","django","forms","foreign-keys"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":38,"score":0,"question_id":12987445,"title":"change the foreign key field from select box to raw_id_fields in my custom form","body":"<p>i m not working with the admin.py \nis there any way i could have the foreign key field instead of a drop down select box , a dynamic search box(suggestive for the user) like we have raw_id_fields in admin.py.</p>\n\n<p>models.py</p>\n\n<pre><code>class model2(models.Model)\n     reg = models.ForeignKey(model1, db_column='reg')\n     class Meta:\n         db_table = u'table2'\n</code></pre>\n\n<p>forms.py</p>\n\n<pre><code>class model2Form(ModelFOrm)\n    def __init__(self, *args, **kwargs):\n        super(model2Form, self).__init__(*args, **kwargs)\n        instance = getattr(self, 'instance', None)\n        if instance and instance.id:\n            self.fields['reg'].required = False\n            self.fields['reg'].widget.attrs['disabled'] = 'disabled'\n    def clean_regid(self):\n        if self.instance and self.instance.pk:\n            return self.instance.reg\n        else:\n            return self.cleaned_data['reg']\n    class Meta:\n        model = model2\n        exclude = ('id')\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>def add(request):\n    if request.method == 'POST': # If the form has been submitted...\n        form = model2Form(request.POST)\n        if form.is_valid():\n           form.save()\n           return list(request) \n        else :\n            raise RuntimeError('Form is invalid')\n    else :\n        action = model2().get_add_url()\n        form = model2Form()\n        c = {'form': form, 'action' : action}\n        c.update(csrf(request))\n        return render_to_response('add.html', c, context_instance=RequestContext(request))\n</code></pre>\n"},{"tags":["django","dump","spatialite"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12824992,"title":"Django and Spatialite crash","body":"<p>I followed the instructions <a href=\"https://docs.djangoproject.com/en/1.4/ref/contrib/gis/install/#spatialdb-template\" rel=\"nofollow\">here</a> to add Spatialite to my django app, but, when I try to run syncdb all crash.</p>\n\n<p>Here is the only model that uses geographical points:</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.gis.db import models\n\n\nclass Building(models.Model):\n    nome = models.CharField(max_length=200, unique=True)\n    versione = models.IntegerField(blank=True)\n    indirizzo = models.CharField(max_length=200, blank=True)\n    numero_di_piani = models.IntegerField()\n    data_creazione = models.DateTimeField('data creazione', blank=True)\n    data_update = models.DateTimeField('data update', blank=True)\n    foto = models.ImageField(upload_to='buildings', blank=True)\n    pronto = models.BooleanField()\n\n    # Geo Django field to store a point\n    posizione = models.PointField(help_text=\"Represented as (longitude, latitude)\", unique=True)\n\n    # Geo Django area dell'edificio\n    # area =  models.PolygonField(unique=True)\n\n    # You MUST use GeoManager to make Geo Queries\n    objects = models.GeoManager()       \n\n    def __unicode__(self):\n            return self.nome\n</code></pre>\n\n<p>Here is the error throwed by syncdb:</p>\n\n<pre><code>*** glibc detected *** /usr/bin/python: munmap_chunk(): invalid pointer: 0xb6154f98 ***\n======= Backtrace: =========\n/lib/i386-linux-gnu/libc.so.6(+0x72132)[0x326132]\n/lib/i386-linux-gnu/libc.so.6(+0x72378)[0x326378]\n/usr/lib/i386-linux-gnu/libsqlite3.so.0(+0x10d1e)[0x493d1e]\n/usr/lib/i386-linux-gnu/libsqlite3.so.0(sqlite3_free+0x81)[0x495461]\n/usr/lib/i386-linux-gnu/libsqlite3.so.0(+0x13068)[0x496068]\n/usr/lib/i386-linux-gnu/libsqlite3.so.0(sqlite3_close+0x1c0)[0x4d1080]\n/usr/local/lib/python2.7/dist-packages/pysqlite2/_sqlite.so(pysqlite_connection_close+0x102)[0x478b52]\n/usr/bin/python(PyEval_EvalFrameEx+0x14c8)[0x80f8798]\n/usr/bin/python(PyEval_EvalCodeEx+0x154)[0x80fd604]\n/usr/bin/python[0x808c7a2]\n/usr/bin/python(PyObject_Call+0x51)[0x805de71]\n/usr/bin/python[0x8073aad]\n/usr/bin/python(PyObject_Call+0x51)[0x805de71]\n/usr/bin/python(PyEval_EvalFrameEx+0xcd9)[0x80f7fa9]\n/usr/bin/python(PyEval_EvalFrameEx+0x930)[0x80f7c00]\n/usr/bin/python(PyEval_EvalCodeEx+0x154)[0x80fd604]\n/usr/bin/python[0x808c9b4]\n/usr/bin/python(PyObject_Call+0x51)[0x805de71]\n/usr/bin/python(PyEval_EvalFrameEx+0x1f3e)[0x80f920e]\n/usr/bin/python(PyEval_EvalCodeEx+0x154)[0x80fd604]\n/usr/bin/python(PyEval_EvalFrameEx+0x7ef)[0x80f7abf]\n/usr/bin/python(PyEval_EvalCodeEx+0x154)[0x80fd604]\n/usr/bin/python[0x808c7a2]\n/usr/bin/python(PyObject_Call+0x51)[0x805de71]\n/usr/bin/python[0x8073aad]\n/usr/bin/python(PyObject_Call+0x51)[0x805de71]\n/usr/bin/python[0x80c29a8]\n/usr/bin/python(PyObject_Call+0x51)[0x805de71]\n/usr/bin/python(PyEval_EvalFrameEx+0xcd9)[0x80f7fa9]\n/usr/bin/python(PyEval_EvalCodeEx+0x154)[0x80fd604]\n/usr/bin/python[0x808c7a2]\n/usr/bin/python(PyObject_Call+0x51)[0x805de71]\n/usr/bin/python[0x8073aad]\n/usr/bin/python(PyObject_Call+0x51)[0x805de71]\n/usr/bin/python[0x80c29a8]\n/usr/bin/python(PyObject_Call+0x51)[0x805de71]\n/usr/bin/python(PyEval_EvalFrameEx+0xcd9)[0x80f7fa9]\n/usr/bin/python(PyEval_EvalFrameEx+0x930)[0x80f7c00]\n/usr/bin/python(PyEval_EvalFrameEx+0x930)[0x80f7c00]\n/usr/bin/python(PyEval_EvalCodeEx+0x154)[0x80fd604]\n/usr/bin/python[0x808c9b4]\n/usr/bin/python(PyObject_Call+0x51)[0x805de71]\n/usr/bin/python(PyEval_EvalFrameEx+0x1f3e)[0x80f920e]\n/usr/bin/python(PyEval_EvalCodeEx+0x154)[0x80fd604]\n/usr/bin/python[0x808c7a2]\n/usr/bin/python(PyObject_Call+0x51)[0x805de71]\n/usr/bin/python[0x8073aad]\n/usr/bin/python(PyObject_Call+0x51)[0x805de71]\n/usr/bin/python[0x80c2f5a]\n/usr/bin/python[0x80be55b]\n/usr/bin/python(PyObject_Call+0x51)[0x805de71]\n/usr/bin/python(PyEval_EvalFrameEx+0xcd9)[0x80f7fa9]\n/usr/bin/python(PyEval_EvalFrameEx+0x930)[0x80f7c00]\n/usr/bin/python(PyEval_EvalCodeEx+0x154)[0x80fd604]\n/usr/bin/python[0x808c9b4]\n/usr/bin/python(PyObject_Call+0x51)[0x805de71]\n/usr/bin/python(PyEval_EvalFrameEx+0x1f3e)[0x80f920e]\n/usr/bin/python(PyEval_EvalFrameEx+0x930)[0x80f7c00]\n/usr/bin/python(PyEval_EvalFrameEx+0x930)[0x80f7c00]\n/usr/bin/python(PyEval_EvalCodeEx+0x154)[0x80fd604]\n/usr/bin/python[0x808c7a2]\n/usr/bin/python(PyObject_Call+0x51)[0x805de71]\n/usr/bin/python[0x8073aad]\n======= Memory map: ========\n00110000-0029d000 r-xp 00000000 08:01 270449     /lib/i386-linux-gnu/libcrypto.so.1.0.0\n0029d000-002ab000 r--p 0018d000 08:01 270449     /lib/i386-linux-gnu/libcrypto.so.1.0.0\n002ab000-002b1000 rw-p 0019b000 08:01 270449     /lib/i386-linux-gnu/libcrypto.so.1.0.0\n002b1000-002b4000 rw-p 00000000 00:00 0 \n002b4000-00430000 r-xp 00000000 08:01 271651     /lib/i386-linux-gnu/libc-2.13.so\n00430000-00432000 r--p 0017c000 08:01 271651     /lib/i386-linux-gnu/libc-2.13.so\n00432000-00433000 rw-p 0017e000 08:01 271651     /lib/i386-linux-gnu/libc-2.13.so\n00433000-00436000 rw-p 00000000 00:00 0 \n00436000-00447000 r-xp 00000000 08:01 1455353    /usr/lib/python2.7/lib-dynload/datetime.so\n00447000-00448000 r--p 00010000 08:01 1455353    /usr/lib/python2.7/lib-dynload/datetime.so\n00448000-0044b000 rw-p 00011000 08:01 1455353    /usr/lib/python2.7/lib-dynload/datetime.so\n0044b000-0044e000 r-xp 00000000 08:01 1455372    /usr/lib/python2.7/lib-dynload/termios.so\n0044e000-0044f000 r--p 00002000 08:01 1455372    /usr/lib/python2.7/lib-dynload/termios.so\n0044f000-00451000 rw-p 00003000 08:01 1455372    /usr/lib/python2.7/lib-dynload/termios.so\n00451000-0046b000 r-xp 00000000 08:01 1455366    /usr/lib/python2.7/lib-dynload/_ctypes.so\n0046b000-0046e000 r--p 0001a000 08:01 1455366    /usr/lib/python2.7/lib-dynload/_ctypes.so\n0046e000-00471000 rw-p 0001d000 08:01 1455366    /usr/lib/python2.7/lib-dynload/_ctypes.so\n00471000-00480000 r-xp 00000000 08:01 1834994    /usr/local/lib/python2.7/dist-packages/pysqlite2/_sqlite.so\n00480000-00481000 r--p 00    00e000 08:01 1834994    /usr/local/lib/python2.7/dist-packages/pysqlite2/_sqlite.so\n00481000-00483000 rw-p 00    00f000 08:01 1834994    /usr/local/lib/python2.7/dist-packages/pysqlite2/_sqlite.so\n00483000-00521000 r-xp 00000000 08:01 1447468    /usr/lib/i386-linux-gnu/libsqlite3.so.0.8.6\n00521000-00522000 ---p 0009e000 08:01 1447468    /usr/lib/i386-linux-gnu/libsqlite3.so.0.8.6\n00522000-00523000 r--p 0009e000 08:01 1447468    /usr/lib/i386-linux-gnu/libsqlite3.so.0.8.6\n00523000-00524000 rw-p 0009f000 08:01 1447468    /usr/lib/i386-linux-gnu/libsqlite3.so.0.8.6\n00524000-00525000 rw-p 00000000 00:00 0 \n00525000-00541000 r-xp 00000000 08:01 262584     /lib/i386-linux-gnu/libgcc_s.so.1\n00541000-00542000 r--p 0001b000 08:01 262584     /lib/i386-linux-gnu/libgcc_s.so.1\n00542000-00543000 rw-p 0001c000 08:01 262584     /lib/i386-linux-gnu/libgcc_s.so.1\n00543000-0057f000 r-xp 00000000 08:01 1705015    /usr/lib/python2.7/dist-packages/PIL/_imaging.so\n0057f000-00581000 r--p 0003b000 08:01 1705015    /usr/lib/python2.7/dist-packages/PIL/_imaging.so\n00581000-00583000 rw-p 0003d000 08:01 1705015    /usr/lib/python2.7/dist-packages/PIL/_imaging.so\n00583000-005a5000 r-xp 00000000 08:01 1447341    /usr/lib/i386-linux-gnu/libjpeg.so.62.0.0\n005a5000-005a6000 r--p 00022000 08:01 1447341    /usr/lib/i386-linux-gnu/libjpeg.so.62.0.0\n005a6000-005a7000 rw-p 00023000 08:01 1447341    /usr/lib/i386-linux-gnu/libjpeg.so.62.0.0\n005b3000-005bb000 r-xp 00000000 08:01 1705775    /usr/lib/python2.7/dist-packages/simplejson/_speedups.so\n005bb000-005bc000 r--p 00    007000 08:01 1705775    /usr/lib/python2.7/dist-packages/simplejson/_speedups.so\n005bc000-005bd000 rw-p 00    008000 08:01 1705775    /usr/lib/python2.7/dist-packages/simplejson/_speedups.so\n005c3000-005eb000 r-xp 00000000 08:01 271669     /lib/i386-linux-gnu/libm-2.13.so\n005eb000-005ec000 r--p 00028000 08:01 271669     /lib/i386-linux-gnu/libm-2.13.so\n005ec000-005ed000 rw-p 00029000 08:01 271669     /lib/i386-linux-gnu/libm-2.13.so\n005ed000-00757000 r-xp 00000000 08:01 1851082    /usr/local/lib/libgeos-3.4.0dev.so\n00757000-0075e000 r--p 00169000 08:01 1851082    /usr/local/lib/libgeos-3.4.0dev.so\n0075e000-00760000 rw-p 00170000 08:01 1851082    /usr/local/lib/libgeos-3.4.0dev.so\n00760000-00761000 rw-p 00000000 00:00 0 \n00761000-0076c000 r-xp 00000000 08:01 271673     /lib/i386-linux-gnu/libnss_files-2.13.so\n0076c000-0076d000 r--p 0000a000 08:01 271673     /lib/i386-linux-gnu/libnss_files-2.13.so\n0076d000-0076e000 rw-p 0000b000 08:01 271673     /lib/i386-linux-gnu/libnss_files-2.13.so\n0078d000-00796000 r-xp 00000000 08:01 1851093    /usr/local/lib/libfreexl.so.1.0.0\n00796000-00797000 r--p 00008000 08:01 1851093    /usr/local/lib/libfreexl.so.1.0.0\n00797000-00798000 rw-p 00009000 08:01 1851093    /usr/local/lib/libfreexl.so.1.0.0\n007d4000-00807000 r-xp 00000000 08:01 1469778    /usr/lib/libproj.so.0.6.6\n00807000-00808000 r--p 00032000 08:01 1469778    /usr/lib/libproj.so.0.6.6\n00808000-0080a000 rw-p 00033000 08:01 1469778    /usr/lib/libproj.so.0.6.6\n00888000-0088b000 r-xp 00000000 08:01 1455336    /usr/lib/python2.7/lib-dynload/_heapq.so\n0088b000-0088c000 r--p 00002000 08:01 1455336    /usr/lib/python2.7/lib-dynload/_heapq.so\n0088c000-0088e000 rw-p 00003000 08:01 1455336    /usr/lib/python2.7/lib-dynload/_heapq.so\n008a5000-00983000 r-xp 00000000 08:01 1447473    /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16\n00983000-00984000 ---p 000de000 08:01 1447473    /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16\n00984000-00988000 r--p 000de000 08:01 1447473    /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16\n00988000-00989000 rw-p 000e2000 08:01 1447473    /usr/lib/i386-linux-gnu/libstdc++.so.6.0.16\n00989000-00990000 rw-p 00000000 00:00 0 \n00a77000-00a78000 rwxp 00000000 00:00 0 \n00ac3000-00ae1000 r-xp 00000000 08:01 271671     /lib/i386-linux-gnu/ld-2.13.so\n00ae1000-00ae2000 r--p 0001d000 08:01 271671     /lib/i386-linux-gnu/ld-2.13.so\n00ae2000-00ae3000 rw-p 0001e000 08:01 271671     /lib/i386-linux-gnu/ld-2.13.so\n00b53000-00b77000 r-xp 00000000 08:01 1851085    /usr/local/lib/libgeos_c.so.1.8.0\n00b77000-00b78000 r--p 00023000 08:01 1851085    /usr/local/lib/libgeos_c.so.1.8.0\n00b78000-00b79000 rw-p 00024000 08:01 1851085    /usr/local/lib/libgeos_c.so.1.8.0\n00ba6000-00bb9000 r-xp 00000000 08:01 262646     /lib/i386-linux-gnu/libz.so.1.2.3.4\n00bb9000-00bba000 r--p 00012000 08:01 262646     /lib/i386-linux-gnu/libz.so.1.2.3.4\n00bba000-00bbb000 rw-p 00013000 08:01 262646     /lib/i386-linux-gnu/libz.so.1.2.3.4\n00bfe000-00bff000 r-xp 00000000 00:00 0          [vdso]\n00d08000-00d0b000 r-xp 00000000 08:01 271667     /lib/i386-linux-gnu/libdl-2.13.so\n00d0b000-00d0c000 r--p 00002000 08:01 271667     /lib/i386-linux-gnu/libdl-2.13.so\n00d0c000-00d0d000 rw-p 00003000 08:01 271667     /lib/i386-linux-gnu/libdl-2.13.so\n00d86000-00d9d000 r-xp 00000000 08:01 271665     /lib/i386-linux-gnu/libpthread-2.13.so\n00d9d000-00d9e000 r--p 00016000 08:01 271665     /lib/i386-linux-gnu/libpthread-2.13.so\n00d9e000-00d9f000 rw-p 00017000 08:01 271665     /lib/i386-linux-gnu/libpthread-2.13.so\n00d9f000-00da1000 rw-p 00000000 00:00 0 \n00df3000-00df5000 r-xp 00000000 08:01 271658     /lib/i386-linux-gnu/libutil-2.13.so\n00df5000-00df6000 r--p 00001000 08:01 271658     /lib/i386-linux-gnu/libutil-2.13.so\n00df6000-00df7000 rw-p 00002000 08:01 271658     /lib/i386-linux-gnu/libutil-2.13.so\n00e95000-00edd000 r-xp 00000000 08:01 270457     /lib/i386-linux-gnu/libssl.so.1.0.0\n00edd000-00edf000 r--p 00047000 08:01 270457     /lib/i386-linux-gnu/libssl.so.1.0.0\n00edf000-00ee2000 rw-p 00049000 08:01 270457     /lib/i386-linux-gnu/libssl.so.1.0.0\n00f46000-00f60000 r-xp 00000000 08:01 1455348    /usr/lib/python2.7/lib-dynload/_io.so\n00f60000-00f61000 r--p 00019000 08:01 1455348    /usr/lib/python2.7/lib-dynload/_io.so\n00f61000-00f69000 rw-p 0001a000 08:01 1455348    /usr/lib/python2.7/lib-dynload/_io.so\n00f69000-01326000 r-xp 00000000 08:01 1851113    /usr/local/lib/libspatialite.so.2.2.0\n01326000-01327000 ---p 003bd000 08:01 1851113    /usr/local/lib/libspatialite.so.2.2.0\n01327000-01328000 r--p 003bd000 08:01 1851113    /usr/local/lib/libspatialite.so.2.2.0\n01328000-0132b000 rw-p 003be000 08:01 1851113    /usr/local/lib/libspatialite.so.2.2.0\n0132b000-0132e000 rw-p 00000000 00:00 0 \n08048000-0826b000 r-xp 00000000 08:01 1439182    /usr/bin/python2.7\n0826b000-0826c000 r--p 00222000 08:01 1439182    /usr/bin/python2.7\n0826c000-082c1000 rw-p 00223000 08:01 1439182    /usr/bin/python2.7\n082c1000-082cd000 rw-p 00000000 00:00 0 \n098d5000-0a31d000 rw-p 00000000 00:00 0          [heap]Aborted\n</code></pre>\n\n<p>I don't know what is the problem...</p>\n\n<p>Help me!</p>\n"},{"tags":["django","django-models","django-admin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":127,"score":0,"question_id":4124213,"title":"two foreign keys back to User and calling get_full_name in Admin","body":"<p>Two questions please:</p>\n\n<p>I need two foreign keys back to User, one for author and one for coauthor. I have managed by setting <code>related_name</code> equal to + but am not sure if this is smart or the best way.  Thoughts or pointers?  </p>\n\n<p>When making an add entry via the django admin for this model, the author choices are names like john_smith, etc. Where would I call get_full_names() from in order to display full names rather than usernames with underscores?  Thanks.</p>\n\n<pre><code>from django.contrib.auth.models import User  \nfrom django.db import models  \nclass Books(models.Model):\n    title = models.CharField()  \n    author = models.ForeignKey(User)  \n    coauthor = models.ForeignKey(User, related_name='+') \n</code></pre>\n\n<p>Kevin</p>\n"},{"tags":["django","forms"],"answer_count":6,"favorite_count":5,"up_vote_count":13,"down_vote_count":0,"view_count":2948,"score":13,"question_id":4124220,"title":"Django: Adding CSS classes when rendering form fields in a template","body":"<p>I'm outputting fields of a form in a template like this <code>{{ form.first_name }}</code> and I'd like to add a class (eg. blueprint's <em>span-x</em>-class) to it. So I'd like to know if there's a nice readymade solution (template filter) for that, which I could use in the fashion <code>{{ form.first_name|add_class:\"span-4\" }}</code>? (I just want to know if Django's developers or anybody has thought of that yet without my knowledge before doing it on my own)</p>\n"},{"tags":["python","ajax","django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12996336,"title":"request.is_ajax return false in template","body":"<p>I'm trying to make conditionnal extends in a template : </p>\n\n<pre><code>{% extends request.is_ajax|yesno:\"base_ajax.html,base.html\" %}\n</code></pre>\n\n<p>In my view : </p>\n\n<pre><code>def new(request):\n    snippet_form = SnippetForm()\n    return render_to_response('new.html', {\n        'snippet_form': snippet_form,\n    }, context_instance=RequestContext(request))\n</code></pre>\n\n<p>But request.is_ajax always return false !</p>\n\n<p>If I call request.is_ajax in my view, it contains the good value.</p>\n\n<pre><code>def new(request):\n    snippet_form = SnippetForm()\n    ajax = request.is_ajax()\n    return render_to_response('new.html', {\n        'snippet_form': snippet_form,\n        'ajax': ajax\n    }, context_instance=RequestContext(request))\n</code></pre>\n\n<p>And in my template : </p>\n\n<pre><code>{% extends ajax|yesno:\"base_ajax.html,base.html\" %}\n</code></pre>\n\n<p>That's works but I'd prefer use the first solution !</p>\n\n<p>Any ideas ?</p>\n\n<p>(I'm using the jquery load function)</p>\n"},{"tags":["ios","django","web-services","rest","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12991593,"title":"How to properly use Django (Web and Mobile Deployment)","body":"<p>This is a very general and open-topic question. So yesterday we decided we would like to create an iOS app based off our website that is currently being built with Django. Now, Django, like RoR, is suppose to be transparent to the UI; it shouldn't care what UI the user is using. (Proper MVC).</p>\n\n<p>If I look at some of our code for example, here is how we add an equipment into our system:</p>\n\n<pre><code> @login_required\n def add(request):\n     r_user = request.user.userprofile\n     form = EquipmentFormAdd(request.POST or None, c_id=r_user.company_id, error_class=DivErrorList)\n     if form.is_valid():\n        equipment = form.save(commit=False)\n        equipment.company_id = r_user.company_id\n        equipment.added_by_id = request.user.id\n        default_file_path = EquipmentPicture.get_default_file_path()\n        url_bucket = r_user.company.s3_bucket.name + default_file_path        \n        cell = form.cleaned_data['cell']\n        equipment.cell_order = cell.equipment_set.count() + 1\n        equipment_picture = EquipmentPicture.objects.create(\n            file=EquipmentPicture.get_default_file_path(),\n            slug=EquipmentPicture.get_default_slug(), \n            bucket_name=r_user.company.s3_bucket.name,\n            bucket=r_user.company.s3_bucket, added_by=request.user,\n            company=r_user.company, url_with_bucket=url_bucket)                \n        equipment.picture = equipment_picture\n        equipment.save()\n        return redirect('equipment_index')\n   return render(request, 'equipment/add.html', {'equipment_form': form, 'company_id': r_user.company_id})\n</code></pre>\n\n<p>If I look at this, I see that we are rendering straight-away a template and passing it data. This would't work in iOS.</p>\n\n<p>Few questions:</p>\n\n<ol>\n<li><p>I see a lot of people creating REST APIs. I don't really see the point of doing that if we can just create HTTPResponses with Django. If we were to use something like TastyPie, we wouldn't be able to just create an equipment (like we do right now) with a POST Statement as if you look at our current <strong>add function</strong> a lot of stuff is done within that function and TastyPie wouldn't be able to call that.</p></li>\n<li><p>My main question is <strong>should we have a REST API running as well as the normal Django server for both the Web and iOS platform, or just have the same functions, with different entry points and renderings according to it?</strong></p></li>\n<li><p>When do you create a REST API? A lot of our functions when creating and getting data wouldn't work right now with just standard POST and GET calls. Is that bad?</p></li>\n</ol>\n\n<p>I am kind of confused... sorry for the long question and thanks again!</p>\n"},{"tags":["django","attributes","queryset","attributeerror"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12996448,"title":"Django - impossible to access object attributes when applying a filter","body":"<p>Hi dear StackOverflow community, I would really appreciate if you could help me on following issue I meet with Django:</p>\n\n<p>My model is defined as follows:</p>\n\n<pre><code>from django.db import models\n\nclass SettingSection(models.Model):\n    section = models.CharField(max_length=20)\n    def __unicode__(self):\n        return self.section\n\nclass SettingParam(models.Model):\n    section = models.ForeignKey(SettingSection)\n    param = models.CharField(max_length=20, unique=True)\n    description = models.CharField(max_length=200, blank=True)\n    def __unicode__(self):\n        return self.param\n\nclass SettingPreset(models.Model):\n    preset = models.CharField(max_length=20, unique=True)\n    current = models.BooleanField()\n    def __unicode__(self):\n        return self.preset\n\nclass SettingValue(models.Model):\n    preset = models.ForeignKey(SettingPreset)\n    param = models.ForeignKey(SettingParam)\n    value = models.CharField(max_length=100, blank=True)\n    def __unicode__(self):\n        return self.value\n</code></pre>\n\n<p>I have following error when trying to access any attribute of my SettingValue object:</p>\n\n<pre><code>&gt;&gt;&gt; from settings.models import *\n&gt;&gt;&gt; preset = SettingPreset.objects.get(current=True)\n&gt;&gt;&gt; for section in SettingSection.objects.all():\n...     for param in section.settingparam_set.all():\n...             v = SettingValue.objects.filter(preset=preset, param=param)\n...             print v.id, v.value\n... \nTraceback (most recent call last):\n  File \"&lt;console&gt;\", line 4, in &lt;module&gt;\nAttributeError: 'QuerySet' object has no attribute 'id'\n</code></pre>\n\n<p>However, the attributes (\"id\" and \"value\") seem to exist:</p>\n\n<pre><code>&gt;&gt;&gt; for section in SettingSection.objects.all():\n...     for param in section.settingparam_set.all():\n...             v = SettingValue.objects.filter(preset=preset, param=param)\n...             print v.values()\n... \n[{'value': u'192.168.1.29', 'id': 1, 'preset_id': 1, 'param_id': 1}]\n[{'value': u'en1', 'id': 2, 'preset_id': 1, 'param_id': 2}]\n[{'value': u'0', 'id': 3, 'preset_id': 1, 'param_id': 3}]\n[{'value': u'', 'id': 4, 'preset_id': 1, 'param_id': 4}]\n[{'value': u'', 'id': 5, 'preset_id': 1, 'param_id': 5}]\n</code></pre>\n\n<p>In addition, I'm able to access any of the attributes without applying filters to my object:</p>\n\n<pre><code>&gt;&gt;&gt; for v in SettingValue.objects.all():\n...     print v.id, v.value\n... \n1 192.168.1.29\n2 en1\n3 0\n4 \n5 \n</code></pre>\n\n<p>Thanks a thousand times in advance for any help.</p>\n"},{"tags":["django","webkit","development-server","broken-pipe"],"answer_count":5,"favorite_count":4,"up_vote_count":15,"down_vote_count":0,"view_count":6628,"score":15,"question_id":2868059,"title":"Django + WebKit = Broken pipe","body":"<p>I'm running the Django 1.2 development server and I get these Broken Pipe error messages whenever I load a page from it with Chrome or Safari. My co-worker is getting the error as well when he loads a page from his dev server. We don't have these errors when using Opera or Firefox.</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/core/servers/basehttp.py\", line 281, in run self.finish_response()\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/core/servers/basehttp.py\", line 321, in finish_response self.write(data)\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/django/core/servers/basehttp.py\", line 417, in write self._write(data)\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/socket.py\", line 300, in write self.flush()\nFile \"/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/socket.py\", line 286, in flush self._sock.sendall(buffer)\nerror: [Errno 32] Broken pipe\n</code></pre>\n\n<p>Can anyone help me out? I'm going crazy over this!</p>\n"},{"tags":["django","django-models"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":336,"score":0,"question_id":7439336,"title":"dynamic FilePathField question","body":"<p>I have a model where the location of pdf directory I'm pointing to with my FilePathField is based on the \"client\" and \"job_number\" fields.</p>\n\n<pre><code>class CCEntry(models.Model):\n    client = models.CharField(default=\"C_Comm\", max_length=64)\n    job_number = models.CharField(max_length=30, unique=False, blank=False, null=False)\n    filename = models.CharField(max_length=64, unique=False, blank=True, null=True)\n    pdf = models.FilePathField(path=\"site_media/jobs/%s %s\", match=\".*\\.pdf$\", recursive=True\n\n    @property\n    def pdf(self):\n            return \"site_media/jobs/%s %s\" % (self.client, self.job_number)\n\n    def __unicode__ (self):\n            return u'%s %s' % (self.client, self.filename)\n\n    class Admin: \n            pass\n</code></pre>\n\n<p>I've tried to pass the client and job_number data to the pdf field dynamically by using a @property method on the model class, but either my approach or my syntax is fualty because the entire pdf field disappears in the admin. Any pointers on what I'm doing wrong?</p>\n"},{"tags":["django","copy","filefield"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":666,"score":3,"question_id":5764803,"title":"copy file from one model to another","body":"<p>I have 2 simple models:</p>\n\n<pre><code>class UploadImage(models.Model):\n   Image = models.ImageField(upload_to=\"temp/\")\n\nclass RealImage(models.Model):\n   Image = models.ImageField(upload_to=\"real/\")\n</code></pre>\n\n<p>And one form</p>\n\n<pre><code>class RealImageForm(ModelForm):\n    class Meta:\n        model = RealImage \n</code></pre>\n\n<p>I need to save file from UploadImage into RealImage. How could i do this.\nBelow code doesn't work</p>\n\n<pre><code>realform.Image=UploadImage.objects.get(id=image_id).Image \nrealform.save()\n</code></pre>\n\n<p>Tnx for help.</p>\n"},{"tags":["django","templates","group"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12991823,"title":"Rename grouper in regroup. Django","body":"<p>I have read <a href=\"https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#regroup\" rel=\"nofollow\">this</a>, but I have one more question: how I can rename country.grouper in the template? I 'group' week days - week_days.grouper, its like 1, 2, 3 etc. But I want change it in the template - Sunday, Monday etc. How to do it?\nThanks</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":85,"score":-1,"question_id":12995888,"title":"Name '_' is not defined","body":"<p>I'm getting the following error when I perform: </p>\n\n<pre><code>$ python manage.py schemamigration myapp --initial\n</code></pre>\n\n<p>It seems to complain about this line:</p>\n\n<pre><code>audio_file = models.FileField(_(\"Audio file\"), upload_to=get_audio_upload_path)\n</code></pre>\n\n<p>I'm not sure what I'm doing wrong. Please help.</p>\n\n<pre><code>Traceback (most recent call last):\n File \"/Users/home/Desktop/Web Development/Aptana Studio 3.0/musicproject/src/manage.py\", line 10, in &lt;module&gt;\nexecute_from_command_line(sys.argv)\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/__init__.py\", line 443, in execute_from_command_line\nutility.execute()\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/__init__.py\", line 382, in execute\nself.fetch_command(subcommand).run_from_argv(self.argv)\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py\", line 196, in run_from_argv\nself.execute(*args, **options.__dict__)\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py\", line 231, in execute\nself.validate()\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py\", line 266, in validate\nnum_errors = get_validation_errors(s, app)\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/validation.py\", line 30, in get_validation_errors\nfor (app_name, error) in get_app_errors().items():\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/db/models/loading.py\", line 158, in get_app_errors\nself._populate()\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/db/models/loading.py\", line 64, in _populate\nself.load_app(app_name, True)\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/db/models/loading.py\", line 88, in load_app\nmodels = import_module('.models', app_name)\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/utils/importlib.py\", line 35, in import_module\n__import__(name)\nFile \"/Users/home/Desktop/Web Development/Aptana Studio 3.0/musicproject/src/myapp/models.py\", line 39, in &lt;module&gt;\nclass AudioTrack(models.Model):\nFile \"/Users/home/Desktop/Web Development/Aptana Studio 3.0/musicproject/src/myapp/models.py\", line 51, in AudioTrack\naudio_file = models.FileField(_(\"Audio file\"), upload_to=get_audio_upload_path)\n NameError: name '_' is not defined\n</code></pre>\n\n<p>Here's my model.py file:</p>\n\n<pre><code>import os\nimport mimetypes\n\nfrom django.conf import settings\nfrom django.contrib.auth.models import User\n\nfrom django.db import models\n\nGENRE_CHOICES =  (\n             ('R', 'Rock'),\n             ('J/B', 'Jazz/Blues'),\n             ('B', 'Blues'),\n             ('R&amp;B' 'R&amp;B'),\n             ('J', 'Jazz'),\n             ('P', 'Pop'), \n             ('H', 'Hip-Hop'),    \n             )\n\n\ndef get_upload_path(dirname, obj, filename):\n   return os.path.join(\"audiotracks\", dirname, obj.user.username, filename)\n\ndef get_audio_upload_path(obj, filename):\n   return get_upload_path(\"audio_files\", obj, filename)\n\nclass Genre(models.Model):\n   genre_choices = models.CharField(max_length=1, choices=GENRE_CHOICES)\n   slug = models.SlugField(max_length = 40, unique = True) #so as to have a dedicated page for each category \n   description = models.TextField()\n\ndef __unicode__(self):\n       return self.title\n\ndef get_absolute_url(self):\n    return \"/genres/%s/\" % self.slug\n\nclass AudioTrack(models.Model):\n   class Meta:\n      abstract = True\n\n   user = models.ForeignKey(User, \n      related_name = \"tracks\",\n      blank = True,\n      null = True\n  )\n\nadded_on = models.DateTimeField(auto_now_add=True, null = True)\nupdated_on = models.DateTimeField(auto_now=True, null = True)\naudio_file = models.FileField(_(\"Audio file\"), upload_to=get_audio_upload_path)\ntitle = models.CharField(_(\"Title\"), max_length=\"200\", null=True)\ndescription = models.TextField(_(\"Description\"), null=True, blank=True)\nslug = models.SlugField(max_length = 40, unique = True) #so as to have a dedicated page for each category \ngenres = models.ManyToManyField(Genre)\n\ndef __unicode__(self):\n    return \"Track '%s' uploaded by '%s'\" % (self.title, self.user.username)\n\n@property\ndef mimetype(self):\n    if not hasattr(self, '_mimetype'):\n        self._mimetype = mimetypes.guess_type(self.audio_file.path)[0]\n    return self._mimetype\n\n@property\ndef filetype(self):\n    if '/' in self.mimetype:\n        type_names = {'mpeg': 'MP3', 'ogg': 'Ogg Vorbis', 'wave':'wav', 'FLAC':'FLA'}\n        filetype = self.mimetype.split('/')[1]\n        return type_names.get(filetype, filetype)\n    else:\n        return self.mimetype\n\n@models.permalink\ndef get_absolute_url(self):\n    # ('tracks.views.track_detail', [self.user.username, self.slug])\n    return \"/%s/%s/\" %(self.genre, self.slug)\n\nif hasattr(settings, 'AUDIOTRACKS_MODEL'):\n   app_name, model_name = settings.AUDIOTRACKS_MODEL.split('.')\n   Track = models.get_model(app_name, model_name)\nelse:\n   class Track(AudioTrack):\n      pass\n\nclass Genre_Track(models.Model): #links genre to tracks\n   audio_track = models.ForeignKey(AudioTrack)\n   genre = models.ForeignKey(Genre)\n</code></pre>\n"},{"tags":["django"],"answer_count":6,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":349,"score":0,"question_id":10605940,"title":"What is the django command to delete all tables?","body":"<p>Are there django commands that</p>\n\n<blockquote>\n  <p>A. Delete all tables</p>\n  \n  <p>B. delete all data in all tables</p>\n  \n  <p>C. Create all tables as defined in the model?</p>\n</blockquote>\n\n<p>I cannot find these right now!</p>\n\n<p>And by commands i mean those little things that are like </p>\n\n<pre><code>runserver\n</code></pre>\n\n<p>etc</p>\n"},{"tags":["django","twitter-bootstrap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12994399,"title":"Insert an html tag to Django form","body":"<p>I'm working with Django and bootstrap and would like to add the html tag using bootstrap Icon glyphs, as I failed to do, is like adding attributes to the widgets, but I failed to add the label or, say to directly customize.</p>\n\n<p>This is what leads me Django:</p>\n\n<pre><code>&lt;p&gt;&lt;label for=\"id_fecha\"&gt;Fecha:&lt;/label&gt; &lt;input type=\"text\" name=\"fecha\" id=\"id_fecha\" /&gt;&lt;/p&gt;\n</code></pre>\n\n<p>This is what I want:</p>\n\n<pre><code>&lt;input class=\"datepicker\" type=\"text\" name=\"fecha\" id=\"id_fecha\" /&gt;&lt;span class=\"add-on\"&gt;&lt;i class=\"icon-th\"&gt;&lt;/i&gt;&lt;/span&gt;\n</code></pre>\n\n<p>I appreciate your help</p>\n"},{"tags":["python","sql-server","django","pyodbc"],"answer_count":4,"favorite_count":7,"up_vote_count":17,"down_vote_count":0,"view_count":6224,"score":17,"question_id":842831,"title":"Using Sql Server with Django in production","body":"<p>Has anybody got recent experience with deploying a Django application with an SQL Server database back end? Our workplace is heavily invested in SQL Server and will not support Django if there isn't a sufficiently developed back end for it.</p>\n\n<p>I'm aware of mssql.django-pyodbc and django-mssql as unofficially supported back ends. Both projects seem to have only one person contributing which is a bit of a worry though the contributions seem to be somewhat regular.</p>\n\n<p>Are there any other back ends for SQL Server that are well supported? Are the two I mentioned here 'good enough' for production? What are your experiences?</p>\n"},{"tags":["python","django","python-2.7"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":412,"score":0,"question_id":9252970,"title":"django-admin.py startproject mysite is not doing anything","body":"<p>It worked when I did the poll tutorial in linux, but I'm doing it again in Windows 7, and it does nothing.</p>\n\n<p>I already set the environmental variables, and set the file association to my <code>python27.exe</code></p>\n\n<p>When I run <code>django-admin.py</code> startproject mysite from the DOS command prompt, it executes, but it's showing me all the information (Like the options, etc) as though I typed the help option instead. It's not actually creating project files in my directory. I appreciate the help.</p>\n\n<p>also, I tried the solution found here (it appears to be the exact same problem).\nIt did not work</p>\n\n<p><a href=\"http://stackoverflow.com/questions/3123688/django-admin-py-is-not-working-properly\">django-admin.py is not working properly</a></p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12995057,"title":"Getting FK set from given QuerySet","body":"<p>Using django, I'm trying to get a QuerySet of FK relationships from another QuerySet.</p>\n\n<p>That is, given a relation like so:\n<code>ParentTable (ParentID)</code> and \n<code>ChildTable(ChildID, ParentID</code></p>\n\n<p>I have a particular QuerySet\n<code>children = Child.objects.filter(**some_filters)</code>\nand I need a QuerySet for the <code>Parent</code> objects \"referenced\" in the <code>children</code> QuerySet.</p>\n\n<p>My initial thought was to use only, like so:\n<code>Parent.objects.filter(id__in=child.only('parent'))</code>, but inspecting the SQL query shows that gives a WHERE clause along the lines of <code>ParentID IN (SELECT subq.ChildID FROM ...</code> which obviously yields undesired results. (inspection of the only method shows my use here is incorrect, so this behaviour is expected)</p>\n\n<p>The desired query would be something <code>ParentID IN (SELECT subq.ParentID FROM ...</code></p>\n"},{"tags":["jquery","ajax","django","json"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12994563,"title":"Django csrf token not sent with ajax data","body":"<p>I'm trying to post some data through jQuery AJAX to a Django (1.4) view.  I've done this before, but something isn't right this time around.  I've done my AJAX set up to include the CSFR token as explained in the <a href=\"https://docs.djangoproject.com/en/1.4/ref/contrib/csrf/#ajax\" rel=\"nofollow\">Django Docs</a>.  </p>\n\n<p>jQuery along the lines of: </p>\n\n<pre><code>$.ajax({\n        url:'/login/',\n        type:'POST',\n        contentType:'application/json; charset=UTF-8;',\n        dataType:'json',\n        data: JSON.stringify({\n            username:$('#this').val(),\n            password:$('#that').val()\n        })\n</code></pre>\n\n<p>However, when I send the data, when I include the line in the view:</p>\n\n<pre><code> print request.raw_post_data\n</code></pre>\n\n<p>it will print twice.  The first time with the posted data as a QueryDict {u'this':u'these', u'that':u'those'}, and the second time with csrfmiddleware token.</p>\n\n<p>Why is printing two times?  Shouldn't they be in the same QueryDic?</p>\n"}]}
{"total":41213,"page":15,"pagesize":100,"questions":[{"tags":["python","django","django-models"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12993609,"title":"Django - how to make required to implement field?","body":"<p>I'm buildibg some abstract model for about 10 models. I need to make, somehow, that 1 field is not declared in abstract model, but MUST be declared in inheriting models.\nHow to do that? Is there any way to use <code>NotImplementedError</code>?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12994575,"title":"Change name and ids of django forms.ModelForm?","body":"<p>I want to use forms.ModelForm, however, I'm using the same form multiple times in the template.</p>\n\n<p>e.g.</p>\n\n<pre><code>...\n{{ form.as_p }}\n{{ form.as_p }}\n{{...\n...\n</code></pre>\n\n<p>Therefore, the names and ids of the forms are all the same.  So how can I still use ModelForm but change the ids and names of the inputs?</p>\n"},{"tags":["django","modelform"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12994539,"title":"ModelForm class Contact has no attribute '_meta'","body":"<p>When I inherit ModelForm in my ContactForm I get this error, when I had it so modelform did not inherit from modelform no errors just no form on the html page. I really can't figure this one out</p>\n\n<p>AttributeError at /addacontact\nclass Contact has no attribute '_meta'</p>\n\n<pre><code>Environment:\n\n\nRequest Method: GET\nRequest URL: http://127.0.0.1:8000/addacontact\n\nDjango Version: 1.4.2\nPython Version: 2.7.3\nInstalled Applications:\n('django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.sites',\n 'django.contrib.messages',\n 'django.contrib.staticfiles',\n 'django.contrib.admin',\n 'django.contrib.admindocs',\n 'south',\n 'sekizai')\nInstalled Middleware:\n('django.middleware.common.CommonMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware',\n 'django.middleware.clickjacking.XFrameOptionsMiddleware')\n\n\nTraceback:\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/handlers/base.py\" in get_response\n  89.                     response = middleware_method(request)\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/middleware/common.py\" in process_request\n  67.             if (not urlresolvers.is_valid_path(request.path_info, urlconf) and\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/urlresolvers.py\" in is_valid_path\n  531.         resolve(path, urlconf)\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/urlresolvers.py\" in resolve\n  420.     return get_resolver(urlconf).resolve(path)\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/urlresolvers.py\" in resolve\n  298.             for pattern in self.url_patterns:\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/urlresolvers.py\" in url_patterns\n  328.         patterns = getattr(self.urlconf_module, \"urlpatterns\", self.urlconf_module)\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/core/urlresolvers.py\" in urlconf_module\n  323.             self._urlconf_module = import_module(self.urlconf_name)\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/utils/importlib.py\" in import_module\n  35.     __import__(name)\nFile \"/home/brian/projects/steprider/steprider/urls.py\" in &lt;module&gt;\n  2. from steprider.views import Add_a_contact\nFile \"/home/brian/projects/steprider/steprider/views.py\" in &lt;module&gt;\n  9. from salesflow.forms import *\nFile \"/home/brian/projects/steprider/salesflow/forms.py\" in &lt;module&gt;\n  13. class ContactForm(ModelForm):\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/forms/models.py\" in __new__\n  206.                                       opts.exclude, opts.widgets, formfield_callback)\nFile \"/home/brian/virt_env/virt_step/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/forms/models.py\" in fields_for_model\n  146.     opts = model._meta\n\nException Type: AttributeError at /addacontact\nException Value: class Contact has no attribute '_meta'\n</code></pre>\n\n<p>this is forms.py</p>\n\n<pre><code>#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n#\n#  steprider.salesflow.forms.py\n#  \n#  Copyright 2012 BRIAN SCOTT CARPENTER &lt;KlanestroTalisman@gmail.com&gt;\n\nfrom django.forms import ModelForm\nfrom salesflow import models\nfrom django import forms\nfrom django.template.defaultfilters import slugify\n\nclass ContactForm(ModelForm):\n    description = forms.CharField(widget=forms.Textarea)\n\n    class Meta:\n        model = models.Contact\n        exclude = (\"user\",\"slug\")\n\n    def save(self, user):\n        contact = super(ContactForm, self).save(commit=False)\n        contact.user = ser\n        contact.save()\n        return contact\n\nclass Contact_History_Form:\n\n    class Meta:\n        model = models.Contact_History\n        exclude = (\"user\",\"slug\")\n</code></pre>\n\n<p>models.py</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\nfrom django_extensions.db.fields import AutoSlugField\n\n\n\n# Create your models here.\nclass Contact:\n    user = models.ForeignKey(User)\n    business = models.CharField(max_length=50)\n    title = models.CharField(max_length=50)\n    name = models.CharField(max_length=50)\n    address = models.CharField(max_length=50)\n    city = models.CharField(max_length=60)\n    state_province = models.CharField(max_length=30)\n    country = models.CharField(max_length=50)\n    website = models.URLField()\n    email = models.EmailField()\n    description = models.CharField(max_length=3000)\n    slug = models.SlugField(max_length=128)\n    slug = AutoSlugField(('slug'), max_length=128, unique=True, populate_from=('business',))\n\n\n    def __unicode__(self):\n        return self.slug\n\n\nclass Contact_History:\n    user = models.ForeignKey(User)\n    contact = models.ForeignKey('Contact')\n\n    number_of_emails_sent = models.IntegerField()\n    last_email_sent = models.DateField()\n\n    phone_notes = models.CharField(max_length=2000)\n\n\n    slug = models.SlugField(max_length=128)\n    slug = AutoSlugField(('slug'), max_length=128, unique=True, populate_from=('name',))\n\n\n    def __unicode__(self):\n        return self.slug\n</code></pre>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":12994246,"title":"Why aren't my Django app's model's Field values changing?","body":"<p>I'm working on a basic Django app similar to the tutorial. I try to change the value of poll after it's been created and saved and I can't. I've tried using <code>.commit()</code> in addition to and instead of <code>.save()</code> and that didn't work either. Here's what it looks like when I try to change things from the shell. Similar results when through HTML (that is, failure). Any suggestions? I've tried changing the attributes of the fields in the models to <code>editable=true</code> which didn't cause any errors but also didn't help. Any ideas what could be going on here?</p>\n\n<pre><code>&gt;&gt;&gt; from votes.models import polls\n&gt;&gt;&gt; polls.objects.all()[2].title\nu'best band'\n&gt;&gt;&gt; polls.objects.all()[2].title='best album'\n&gt;&gt;&gt; polls.objects.all()[2].title\nu'best band'\n&gt;&gt;&gt; polls.objects.all()[2].title='best album'\n&gt;&gt;&gt; polls.objects.all()[2].save()\n&gt;&gt;&gt; polls.objects.all()[2].title\nu'best band'\n</code></pre>\n"},{"tags":["django","jquery-ajax","django-endless-pagination"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":12994253,"title":"Django Endless Pagination somehow blocking my custom javascript","body":"<p>I am using <a href=\"http://django-endless-pagination.readthedocs.org/en/latest/twitter_pagination.html\" rel=\"nofollow\">the twitter style endless pagination</a> for one of my projects. the problem is that my ajax logic works just fine for my first 10 posts (so the first page) but when I go down and Endless Pagination loads more posts, my ajax stops working for them. I am not sure my.</p>\n\n<p>Thats how I've been stacking my js</p>\n\n\n\n<pre><code>&lt;script src=\"/site_media/endless_pagination/endless.js\" type=\"text/javascript\" charset=\"utf-8\"&gt;&lt;/script&gt;\n&lt;script src=\"/site_media/endless_pagination/endless_on_scroll.js\" type=\"text/javascript\" charset=\"utf-8\"&gt;&lt;/script&gt;\n&lt;script src=\"/site_media/bootstrap/js/bootstrap.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"http:/site_media/bootstrap/js/bootstrap-collapse.js\"&gt;&lt;/script&gt;\n&lt;script src=\"site_media/bootstrap/js/bootstrap-tooltip.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n\n\n<p>so for example tooltip works just fine for my first 10 posts, but then when pagination loads the next posts, tooltip doesn't seem to work for them.</p>\n"},{"tags":["python","django","http","etag"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":12993951,"title":"Using ETag / Last-Modified decorators with Django's class-based generic views","body":"<p>I've recently migrated all views in one of my Django projects to the new class-based ones. For classic function-based Django views there's a handy decorator <code>django.views.decorators.http.condition</code> that can be used to bypass the whole view processing if there's a cached copy matching the conditions that you've specified. I've searched everywhere in the docs and in the source code but can't find any implementation of this for the new class-based views.</p>\n\n<p>So my question is: How would you suggest that I implement conditional view processing for class-based views?</p>\n"},{"tags":["django","mysql-python","setuptools"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":195,"score":0,"question_id":12993708,"title":"Unable to install MySQL-python","body":"<p>Okay I recently upgraded from Ubuntu 10.04 to 12.04</p>\n\n<p>Only to be faced by a lot of problems. I am a newbie at this so you might have to tell me in a little more detail or step-by-step</p>\n\n<p>I had a django project that was working perfectly but now it gives me this error :</p>\n\n<pre><code>  File \"/usr/local/lib/python2.7/site-packages/django/db/backends/mysql/base.py\", line 16, in &lt;module&gt;\n    raise ImproperlyConfigured(\"Error loading MySQLdb module: %s\" % e) django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module: libmysqlclient_r.so.16: cannot open shared object file: No such file or directory\n</code></pre>\n\n<p>or in python :</p>\n\n<pre><code>&gt;&gt;&gt; import MySQLdb\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"build/bdist.linux-i686/egg/MySQLdb/__init__.py\", line 19, in &lt;module&gt;\n  File \"build/bdist.linux-i686/egg/_mysql.py\", line 7, in &lt;module&gt;\n  File \"build/bdist.linux-i686/egg/_mysql.py\", line 6, in __bootstrap__\nImportError: libmysqlclient_r.so.16: cannot open shared object file: No such file or directory\n</code></pre>\n\n<p>Anyways I thought there was some problem with my MySQL-python so I tried re-installing it.</p>\n\n<pre><code>sudo pip install mysql-python\n</code></pre>\n\n<p>gives :</p>\n\n<pre><code>Downloading/unpacking mysql-python\n  Running setup.py egg_info for package mysql-python\n    The required version of distribute (&gt;=0.6.28) is not available,\n    and can't be installed while this script is running. Please\n    install a more recent version first, using\n    'easy_install -U distribute'.\n\n    (Currently using distribute 0.6.24dev-r0 (/usr/lib/python2.7/dist-packages))\n    Complete output from command python setup.py egg_info:\n    The required version of distribute (&gt;=0.6.28) is not available,\n\nand can't be installed while this script is running. Please\n\ninstall a more recent version first, using\n\n'easy_install -U distribute'.\n\n\n\n(Currently using distribute 0.6.24dev-r0 (/usr/lib/python2.7/dist-packages))\n\n----------------------------------------\nCommand python setup.py egg_info failed with error code 2 in /tmp/pip-build/mysql-python\nStoring complete log in /home/nabeel/.pip/pip.log\n</code></pre>\n\n<p>If I do :</p>\n\n<pre><code>sudo easy_install -U distribute\n</code></pre>\n\n<p>It gives this error :</p>\n\n<pre><code>Searching for distribute\nReading http://pypi.python.org/simple/distribute/\nReading http://packages.python.org/distribute\nBest match: distribute 0.6.29\nDownloading http://pypi.python.org/packages/source/d/distribute/distribute-0.6.29.tar.gz#md5=1aad767bfca8bebaccafee25f85696cf\nProcessing distribute-0.6.29.tar.gz\nRunning distribute-0.6.29/setup.py -q bdist_egg --dist-dir /tmp/easy_install-K8ZuMX/distribute-0.6.29/egg-dist-tmp-Fj0gj_\nBefore install bootstrap.\nScanning installed packages\nSetuptools installation detected at /usr/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg\nEgg installation\nPatching...\nRenaming /usr/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg to /usr/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg.OLD.1350776909.4\nPatching complete.\nRelaunching...\nTraceback (most recent call last):\n  File \"/usr/local/bin/easy_install\", line 9, in &lt;module&gt;\n    load_entry_point('distribute==0.6.8', 'console_scripts', 'easy_install')()\n  File \"/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/command/easy_install.py\", line 1708, in main\n    with_ei_usage(lambda:\n  File \"/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/command/easy_install.py\", line 1696, in with_ei_usage\n    return f()\n  File \"/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/command/easy_install.py\", line 1712, in &lt;lambda&gt;\n    distclass=DistributionWithoutHelpCommands, **kw\n  File \"/usr/local/lib/python2.7/distutils/core.py\", line 152, in setup\n    dist.run_commands()\n  File \"/usr/local/lib/python2.7/distutils/dist.py\", line 953, in run_commands\n    self.run_command(cmd)\n  File \"/usr/local/lib/python2.7/distutils/dist.py\", line 972, in run_command\n    cmd_obj.run()\n  File \"/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/command/easy_install.py\", line 236, in run\n    self.easy_install(spec, not self.no_deps)\n  File \"/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/command/easy_install.py\", line 471, in easy_install\n    return self.install_item(spec, dist.location, tmpdir, deps)\n  File \"/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/command/easy_install.py\", line 501, in install_item\n    dists = self.install_eggs(spec, download, tmpdir)\n  File \"/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/command/easy_install.py\", line 680, in install_eggs\n    return self.build_and_install(setup_script, setup_base)\n  File \"/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/command/easy_install.py\", line 957, in build_and_install\n    self.run_setup(setup_script, setup_base, args)\n  File \"/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/command/easy_install.py\", line 946, in run_setup\n    run_setup(setup_script, args)\n  File \"/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/sandbox.py\", line 29, in run_setup\n    lambda: execfile(\n  File \"/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/sandbox.py\", line 70, in run\n    return func()\n  File \"/usr/local/lib/python2.7/site-packages/distribute-0.6.8-py2.7.egg/setuptools/sandbox.py\", line 31, in &lt;lambda&gt;\n    {'__file__':setup_script, '__name__':'__main__'}\n  File \"setup.py\", line 131, in &lt;module&gt;\n  File \"/tmp/easy_install-K8ZuMX/distribute-0.6.29/distribute_setup.py\", line 368, in _before_install\n  File \"/tmp/easy_install-K8ZuMX/distribute-0.6.29/distribute_setup.py\", line 441, in _fake_setuptools\n  File \"/tmp/easy_install-K8ZuMX/distribute-0.6.29/distribute_setup.py\", line 450, in _relaunch\nNameError: global name '_cmd1' is not defined\n</code></pre>\n\n<p>Again now I have gone to this link :\n<a href=\"http://pypi.python.org/pypi/setuptools/0.6c11\" rel=\"nofollow\">http://pypi.python.org/pypi/setuptools/0.6c11</a>\nto download and install setuptools..\nI have also installed the latest distribute 0.6.8 from here :\n<a href=\"http://pypi.python.org/pypi/distribute/0.6.8\" rel=\"nofollow\">http://pypi.python.org/pypi/distribute/0.6.8</a></p>\n\n<p>I have also tried uninstalling the previous versions and installing back but it doesn't seems to work.\nI have got Python 2.7.3 installed</p>\n\n<p>Could someone please explain to me what is going on... How I can install Mysqldb...</p>\n\n<p>I have also ran these commands on shell :</p>\n\n<pre><code>sudo apt-get install mysql-server mysql-client python-mysqldb libmysqlclient-dev python-dev\n</code></pre>\n\n<p>But it didn't help ...</p>\n\n<p><strong>UPDATE I JUST DID THIS AND GOT THIS ERROR :</strong></p>\n\n<pre><code>nabeel@nabeel-pc:~$ pip uninstall setuptools\nUninstalling distribute:\n  /usr/bin/easy_install\n  /usr/bin/easy_install-2.7\n  /usr/lib/python2.7/dist-packages/distribute-0.6.24dev_r0.egg-info\n  /usr/lib/python2.7/dist-packages/easy_install.pyc\n  /usr/lib/python2.7/dist-packages/pkg_resources.pyc\n  /usr/lib/python2.7/dist-packages/setuptools\n  /usr/lib/python2.7/dist-packages/site.pyc\n  /usr/share/pyshared/easy_install.py\n  /usr/share/pyshared/pkg_resources.py\n  /usr/share/pyshared/site.py\nProceed (y/n)? y\n  Successfully uninstalled distribute\nnabeel@nabeel-pc:~$ sudo easy_install -U distribute\nSearching for distribute\nReading http://pypi.python.org/simple/distribute/\nReading http://packages.python.org/distribute\nBest match: distribute 0.6.29\nDownloading http://pypi.python.org/packages/source/d/distribute/distribute-0.6.29.tar.gz#md5=1aad767bfca8bebaccafee25f85696cf\nProcessing distribute-0.6.29.tar.gz\nRunning distribute-0.6.29/setup.py -q bdist_egg --dist-dir /tmp/easy_install-Xcer8d/distribute-0.6.29/egg-dist-tmp-K0E7gP\nBefore install bootstrap.\nScanning installed packages\nSetuptools installation detected at /usr/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg\nEgg installation\nAlready patched.\nAfter install bootstrap.\nCreating /usr/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info\nCreating /usr/local/lib/python2.7/site-packages/setuptools.pth\nRemoving distribute 0.6.8 from easy-install.pth file\nAdding distribute 0.6.29 to easy-install.pth file\nInstalling easy_install script to /usr/local/bin\nInstalling easy_install-2.7 script to /usr/local/bin\n\nInstalled /usr/local/lib/python2.7/site-packages/distribute-0.6.29-py2.7.egg\nProcessing dependencies for distribute\nFinished processing dependencies for distribute\nnabeel@nabeel-pc:~$ sudo pip install mysql-python\nTraceback (most recent call last):\n  File \"/usr/local/bin/pip\", line 5, in &lt;module&gt;\n    from pkg_resources import load_entry_point\nImportError: No module named pkg_resources\n</code></pre>\n\n<p><strong>UPDATE 2 :</strong>\nI have managed to install virtualenv\nnow in the environment I have also managed to install MySQLdb.\nHere's theh error I get while running my server :</p>\n\n<pre><code>sudo python manage.py syncdb\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>  File \"/usr/local/lib/python2.7/site-packages/django/db/backends/mysql/base.py\", line 16, in &lt;module&gt;\n    raise ImproperlyConfigured(\"Error loading MySQLdb module: %s\" % e)\ndjango.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module: libmysqlclient_r.so.16: cannot open shared object file: No such file or directory\n\n\n(myenv)nabeel@nabeel-pc:~/workspace/gteam/metrics$ python\n    Python 2.7.3 (default, Oct  6 2012, 21:57:36) \n    [GCC 4.4.3] on linux2\n    Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n    &gt;&gt;&gt; import MySQLdb\n    &gt;&gt;&gt; exit()\n</code></pre>\n"},{"tags":["mysql","django","query","django-queries"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12989767,"title":"Django query based on foreign key relationship","body":"<p>I have two models, a Project and an Action:</p>\n\n<pre><code>class Project(models.Model):\n    name = models.CharField(\"Project Name\", max_length=200, unique = True)\n\nclass Action(models.Model):\n    name = models.CharField(\"Action Name\", max_length=200)\n    project = models.ForeignKey(Project, blank=True, null=True, verbose_name=\"Project\")\n    notes = models.TextField(\"Notes\", blank=True)\n    complete = models.BooleanField(default=False, verbose_name=\"Complete?\")\n    status = models.IntegerField(\"Action Status\", choices = STATUS, default=0)\n</code></pre>\n\n<p>I need a query that returns all the Projects for which there are no actions with status &lt; 2.</p>\n\n<p>I tried:</p>\n\n<pre><code>Project.objects.filter(action__status__gt = 1)\n</code></pre>\n\n<p>But this returns all the Projects because in each Project, there are some actions with status 2 and some actions with status less than 2.  Also, it repeated Projects in the resulting query.  My current solution is below:</p>\n\n<pre><code>Project.objects.filter(action__status__gt =1).exclude(action__status__lt =2).annotate()\n</code></pre>\n\n<p>This collapses the repeating results and shows only actions with action statuses greater than 1.  But is this the correct way to construct such a query?  What if I wanted to return Projects with actions statuses greater than 1 OR Projects with no actions?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12990683,"title":"Django send_mail function keeps failing","body":"<p>I've been trying to make django send a mail to one user once the user input his email but it keeps failing. For example, user A signup to my list and django sent him a mail. User B signup to my list and django sends both user A and B a mail. </p>\n\n<p>I don't want that kind of process, I want to send a mail to each user once they fill in their email address. So that when another user signup django won't send the current user and the ones already on the database the same mail. </p>\n\n<p>Below are my codes:</p>\n\n<h1>send invitation</h1>\n\n<pre><code>Subject='Join Me'\n\nmessage=loader.get_template('letter.txt') \n\nfrom_email='test@testing.com'\n\n\ndef invite_me(request):\n    if request.method==\"POST\":\n       form=InviteForm(request.POST)\n       if form.is_valid():\n          form.save()\n          #get input data and send email to the user.\n          send_mail(Subject,message.render(Context()),from_email,Invite.objects.values_list('email_address', flat=True))\n          return HttpResponse('Thanks For Inputting Your Email, Go Check Your Inbox!')\n        else:\n            return HttpResponse('Invalid Email Address')\n      else:\n          form=InviteForm()\n          return render_to_response('home.html',{'InviteForm':InviteForm},context_instance=RequestContext(request))\n</code></pre>\n"},{"tags":["python","django","time-series"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":12959256,"title":"Django Python Timeseries - Reusable app and data base schema","body":"<p>Which Django apps or Python modules are to be recommended for handling and saving into a DB timeseries data. Which database schema is to be recommended for the time series data?</p>\n\n<p>My use case is that I have node models in my db schema having a start and end date, and I want to save for each day between start and end date a value. This can be quite a lot of rows as I have thousands of nodes, and start and end dates are between 1 and 365 days.</p>\n\n<p>My models would look like this, whereas I would be thankful for input regarding a better / performance improved structure:</p>\n\n<pre><code>class Node(models.Model):\n    \"\"\"\n    Representation of a single node\n    \"\"\"\n\n    name = models.CharField(max_length=200)\n    start = models.DateField() \n    end = models.DateField()\n\nclass TimeSeries(models.Model)\n     \"\"\"\n     holds the time series values. For each day between start and end date one TimeSeries object will be created\n     \"\"\"\n     node = models.ForeignKey(Node)\n     date = models.DateField() #holds a specific date between start and end date of node\n     value = models.IntegerField(max_length=2)\n</code></pre>\n"},{"tags":["django","controller"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12991723,"title":"django controller to by default call one function","body":"<p>I was researching on this for quite a bit. I have a use case where the same task has to be performed in all functions of a controller, is there a way to by default call that function in the controller? Aside from creating a method and calling it in each function.</p>\n\n<p>Currently that is what I am doing, but would like to avoid that if possible.</p>\n"},{"tags":["python","django","pdf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":58,"score":-3,"question_id":12992440,"title":"Password protection of PDF file in python","body":"<p>How to add password protection for a pdf file using python</p>\n"},{"tags":["python","html","django","pdf","pdf-generation"],"answer_count":4,"favorite_count":40,"up_vote_count":23,"down_vote_count":0,"view_count":9671,"score":23,"question_id":1377446,"title":"html to pdf for a Django site","body":"<p>For my django powered site, I am looking for an easy solution to convert dynamic html pages (generated using django views and templates datas generated using GET forms) which also contains some graph charts from google visualisation api(it is javascript, yet including these graphs is a must for me)  to pdf.\nCheers</p>\n"},{"tags":["django","forms","validation"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":57,"score":2,"question_id":12992185,"title":"How to process Django validation errors","body":"<p>I'm having some trouble grokking Django forms and validation.</p>\n\n<pre><code>#views.py:\ndef create(request):\n    if request.method == 'POST':\n        form = CreateDocumentForm(request.POST)\n        if form.is_valid():\n            doc = Document.objects.create(name=form.cleaned_data['name'])\n    #snip\n\n\n#forms.py:\n    class CreateDocumentForm(forms.ModelForm):\n    name = forms.CharField()\n    def clean_name(self):\n        cleaned_name = self.cleaned_data['name']\n        rgx = re.compile('^(\\w|-|\\.)+$')\n        if rgx.match(cleaned_name) == None:\n            raise ValidationError(\"invalidchars\")\n        return cleaned_name\n</code></pre>\n\n<p>The logic is working properly, but I don't know how to tell which kind of VaidationError was raised.  Also - This is handled by an Ajax request, so I won't be using templating in the repsonse.  I need to get the status of what failed in this view.</p>\n\n<p>thx</p>\n"},{"tags":["python","django","pdf-generation","django-views","pisa"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":11982692,"title":"Issue with django-pisa pdf in dhivehi language","body":"<p>I've generated a pdf using Django-pisa.. the PDF content is taken from database which is in the correct alignment  but can't get it done right on the PDF....</p>\n\n<p>I've used:</p>\n\n<pre><code>filename = \"/home/anoop/DjangoCodes/hello.pdf\"\n    c = '''&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"&gt;\n    &lt;html&gt;&lt;head&gt;&lt;meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\"&gt;\n    &lt;style type=\"text/css\"&gt;\n    @font-face {font-family: code2000;src: url(dhivehi.otf.ttf);}\n    html {font-family: code2000;dir: rtl;unicode-bidi:bidi-override;}\n    &lt;/style&gt;\n    &lt;/head&gt;&lt;body&gt;&lt;div dir='rtl'&gt;%s&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;''' % content_text\n    print c\n    pdf = pisa.CreatePDF(c,file(filename, \"wb\"))\n    if not pdf.err:\n        pisa.startViewer(filename)\n</code></pre>\n\n<p>content_text contains the dhivehi text..</p>\n\n<p>Example :  content_text:  އެގޮތުން އައްޑޫގެ މަރަދޫ އާއި މަރަދޫފޭދޫ އާއި ފޭދޫ އަށްވެސް އުދަ އަރާފައިވާ ކަމަށް </p>\n\n<pre><code>        text in pdf:  ‫ށަމަކ ާވިއަފާރައ ަދުއ ްސެވްށައ ޫދޭފ ިއާއ ޫދޭފޫދަރަމ ިއާއ ޫދަރަމ ެގޫޑްއައ ްނުތޮގެއ‬\n</code></pre>\n"},{"tags":["python","html","django","wkhtmltopdf","html2pdf"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":1139,"score":0,"question_id":7584546,"title":"Convert HTML into PDF using Python","body":"<p>I am trying to convert HTML into a PDF document in Django and haven't been successful.</p>\n\n<p>I have tried using wkhtmltopdf 0.9.9, however Apache throws an error that wkhtmltopdf cannot connect to server. When I use wkhtmltopdf directly, it runs perfectly fine and converts the HTML into a PDF document.</p>\n\n<p>I have also tried using unoconv, however the rendered PDF file doesn't have any CSS applied to it. I have also tried using xhtml2pdf. Again I am facing same issue; the rendered PDF file doesn't have any CSS styling applied. I have spent the better part of today and last night trying to solve this issue and I'm still no closer to solving the problem.</p>\n\n<p>Let me know if you need any more information</p>\n"},{"tags":["django","forms","rest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12990921,"title":"How to be RESTful with Django without using form?","body":"<p>I have a page that culminates in three buttons: a checkout button, a change-qty button, and a cancel button:</p>\n\n<pre><code>&lt;button name=\"checkout\" onclick=\"location.href='/checkout/'\"    &gt;checkout  &lt;/button&gt;\n&lt;button name=\"change\"   onclick=\"location.href='/change-qty/'\"  &gt;change qty&lt;/button&gt;\n&lt;button name=\"cancel\"   onclick=\"location.href='/cancel-order/'\"&gt;cancel    &lt;/button&gt;\n</code></pre>\n\n<p>I'm doing these redirects in this fashion, instead of using a form, because I want each button to redirect to a different Django view.  The code above works fine, but isn't RESTful: \"checkout\" and \"cancel-order\" change the system's state, and so I'd like these to be POSTs.</p>\n\n<p>I could achieve this by having the \"checkout\" and \"cancel\" views auto-post special-purpose forms to two new views that take POSTs.  But that's so much screwing around and complexity-adding.  I could also add some jQuery to the page, and have each of those buttons trigger a POST on a hidden form pointed toward the appropriate views, and achieve the same thing.  But that, too, is an awful lot of extra code for something that seems pretty simple.</p>\n\n<p>Really, if there was something like a 'method=\"post\"' on a button, that would be perfect.  But there isn't.  Is there some elegant pattern for achieving what I want?  Or am I doing something very stupid and I just don't know it?</p>\n"},{"tags":["ios","django","restkit","tastypie"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":12981150,"title":"iOS app with Django","body":"<p>So we currently have a website that was created using Django. Now, we would like to create a native iOS app that uses the same backend, so we don't have to re-code the whole thing. From my understanding, there are two alternative routes:</p>\n\n<p>1) Call directly Django URLs, which then calls a function. Within that function, create a HTTPResponse, with encoded JSON data and send that back.</p>\n\n<p>2) Create a REST Service from the Django server with something like Tastypie. However, aside from doing straight-forward GET calls to an object, I don't see how we can call custom functions in our Django Models from TastyPie. Can we even do that?</p>\n\n<p>I find it surprising that there is not a lot of information about consuming a web service from iOS with existing backends like Django or RoR. For example, I know that instagram uses Django, but how do they communicate from iOS to their servers?!</p>\n\n<p>Thanks a lot!</p>\n"},{"tags":["django","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":102,"score":0,"question_id":9979935,"title":"Django skip inline field","body":"<p>I have an inline where the first field is always selected by default. Since both are required, is it possible to only validate and insert/update when the second field is also selected or I need to also define a default value for the second field? (Otherwise I will always get errors on the rows where only the first field is set...)</p>\n\n<p><strong>Update</strong></p>\n\n<p>I'm overriding the first widget (TextInput) render. If I set to empty then it works but I want this field to behave almost like a label.</p>\n\n<pre><code>def render(self, name, value, attrs=None):\n        if name == \"opinion_set-0-topic\":\n            value = \"first thing\"\n        if name == \"opinion_set-1-topic\":\n            value = \"second thing\"\n        if name == \"opinion_set-2-topic\":\n            value = \"third thing\"\n</code></pre>\n\n<p><strong>Update 2</strong></p>\n\n<p>I need something like, if field 2 isn't set (gives \"This field is required.\") then bypass the form error and simply ignore the rows where this happens...</p>\n"},{"tags":["django","django-modelformsets"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":539,"score":1,"question_id":9573698,"title":"Django modelformset_factory delete modelforms marked for deletion","body":"<p>When using modelformset_factory how do you delete objects from the database that get marked for delete in the form?</p>\n\n<p>I create my modelformset_factory like this:</p>\n\n<pre><code>ItemFormset = modelformset_factory(Item, ItemModelForm, extra=1, can_delete=True)\nqset = Item.objects.filter(pr=pr)\nformset = ItemFormset(queryset=qset)\n</code></pre>\n\n<p>When the formset comes back in the POST I get the data like so:</p>\n\n<pre><code>if request.method == \"POST\":\n    formset = ItemFormset(request.POST,queryset=qset)\n    if  formset.is_valid():\n        marked_for_delete = formset.deleted_forms\n        instances = formset.save(commit=False)\n        for item in instances:\n            item.pr = pr\n            item.save()\n</code></pre>\n\n<p>When the formset comes back I can get all of the objects marked for delete with <code>formset.deleted_forms</code> but I can't figure out how to actually delete them. I've tried looping through each one and deleting each one individually but I get the error: <code>Item object can't be deleted because its id attribute is set to None.</code> </p>\n\n<p>In the template I'm including <code>{{form.id}}</code> so each object has it's ID being passed back in the POST. </p>\n\n<p>After calling <code>instances = formset.save(commit=False)</code> I can call <code>formset.deleted_objects</code> but it's just an empty list: <code>[]</code></p>\n\n<p>Can anyone see what I'm doing wrong that would make the objects not get deleted from the database?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":4,"view_count":492,"score":-1,"question_id":8144279,"title":"Django Error: No FlatPage matches the given query","body":"<pre><code>SITE_ID = 1\n</code></pre>\n\n<p>and </p>\n\n<p><code>(r'', include('django.contrib.flatpages.urls')),</code> is in <code>urls.py</code>.</p>\n\n<p>What can I do to fix this error? Django is still displaying this error - I have googled and I can't find anything.</p>\n\n<h3>File urls.py</h3>\n\n<pre><code>from django.conf.urls.defaults import patterns, include, url\n\n# Uncomment the next two lines to enable the admin:\nfrom django.contrib import admin\nadmin.autodiscover()\n\nurlpatterns = patterns('',\n    # Examples:\n    # url(r'^$', 'cms.views.home', name='home'),\n    # url(r'^cms/', include('cms.foo.urls')),\n\n    # Uncomment the admin/doc line below to enable admin documentation:\n    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),\n\n    # Uncomment the next line to enable the admin:\n     url(r'^admin/', include(admin.site.urls)),\n     (r'', include('django.contrib.flatpages.urls')),        \n)\n</code></pre>\n\n<p>It's the most basic <code>urls.py</code>. That's why I didn't have to post the code, but here it is.</p>\n\n<p>It is also enabled. Since this is a new project I'm going to show every file.</p>\n\n<p><strong>_<em>init</em>_</strong> is empty</p>\n\n<h3>settings.py</h3>\n\n<pre><code># Django settings for CMS project.\n\nDEBUG = True\nTEMPLATE_DEBUG = DEBUG\n\nADMINS = (\n    # ('Your Name', 'your_email@example.com'),\n)\n\nMANAGERS = ADMINS\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'sqlite3', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.\n        'NAME': 'C:\\Documents and Settings\\Administrator\\Desktop\\django-projects\\cms/cms.db',                      # Or path to database file if using sqlite3.\n        'USER': '',                      # Not used with sqlite3.\n        'PASSWORD': '',                  # Not used with sqlite3.\n        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.\n        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.\n    }\n}\n\n# Local time zone for this installation. Choices can be found here:\n# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name\n# although not all choices may be available on all operating systems.\n# On Unix systems, a value of None will cause Django to use the same\n# timezone as the operating system.\n# If running in a Windows environment this must be set to the same as your\n# system time zone.\nTIME_ZONE = 'America/Chicago'\n\n# Language code for this installation. All choices can be found here:\n# http://www.i18nguy.com/unicode/language-identifiers.html\nLANGUAGE_CODE = 'en-us'\n\nSITE_ID = 1\n\n# If you set this to False, Django will make some optimizations so as not\n# to load the internationalization machinery.\nUSE_I18N = True\n\n# If you set this to False, Django will not format dates, numbers and\n# calendars according to the current locale\nUSE_L10N = True\n\n# Absolute filesystem path to the directory that will hold user-uploaded files.\n# Example: \"/home/media/media.lawrence.com/media/\"\nMEDIA_ROOT = ''\n\n# URL that handles the media served from MEDIA_ROOT. Make sure to use a\n# trailing slash.\n# Examples: \"http://media.lawrence.com/media/\", \"http://example.com/media/\"\nMEDIA_URL = ''\n\n# Absolute path to the directory static files should be collected to.\n# Don't put anything in this directory yourself; store your static files\n# in apps' \"static/\" subdirectories and in STATICFILES_DIRS.\n# Example: \"/home/media/media.lawrence.com/static/\"\nSTATIC_ROOT = ''\n\n# URL prefix for static files.\n# Example: \"http://media.lawrence.com/static/\"\nSTATIC_URL = '/static/'\n\n# URL prefix for admin static files -- CSS, JavaScript and images.\n# Make sure to use a trailing slash.\n# Examples: \"http://foo.com/static/admin/\", \"/static/admin/\".\nADMIN_MEDIA_PREFIX = '/static/admin/'\n\n# Additional locations of static files\nSTATICFILES_DIRS = (\n    # Put strings here, like \"/home/html/static\" or \"C:/www/django/static\".\n    # Always use forward slashes, even on Windows.\n    # Don't forget to use absolute paths, not relative paths.\n)\n\n# List of finder classes that know how to find static files in\n# various locations.\nSTATICFILES_FINDERS = (\n    'django.contrib.staticfiles.finders.FileSystemFinder',\n    'django.contrib.staticfiles.finders.AppDirectoriesFinder',\n#    'django.contrib.staticfiles.finders.DefaultStorageFinder',\n)\n\n# Make this unique, and don't share it with anybody.\nSECRET_KEY = 'o2lqxjp!fg%0xod5g$79alt_*o4&amp;lkw-ncr^30iuqcv(y-44i7'\n\n# List of callables that know how to import templates from various sources.\nTEMPLATE_LOADERS = (\n    'django.template.loaders.filesystem.Loader',\n    'django.template.loaders.app_directories.Loader',\n#     'django.template.loaders.eggs.Loader',\n)\n\nMIDDLEWARE_CLASSES = (\n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',\n)\n\nROOT_URLCONF = 'cms.urls'\n\nTEMPLATE_DIRS = (\n    # Put strings here, like \"/home/html/django_templates\" or \"C:/www/django/templates\".\n    # Always use forward slashes, even on Windows.\n    # Don't forget to use absolute paths, not relative paths.\n)\n\nINSTALLED_APPS = (\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    'django.contrib.admin',\n    'django.contrib.flatpages',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    # Uncomment the next line to enable the admin:\n     'django.contrib.admin',\n    # Uncomment the next line to enable admin documentation:\n    # 'django.contrib.admindocs',\n)\n\n# A sample logging configuration. The only tangible logging\n# performed by this configuration is to send an email to\n# the site admins on every HTTP 500 error.\n# See http://docs.djangoproject.com/en/dev/topics/logging for\n# more details on how to customize your logging configuration.\nLOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'handlers': {\n        'mail_admins': {\n            'level': 'ERROR',\n            'class': 'django.utils.log.AdminEmailHandler'\n        }\n    },\n    'loggers': {\n        'django.request': {\n            'handlers': ['mail_admins'],\n            'level': 'ERROR',\n            'propagate': True,\n        },\n    }\n}\n</code></pre>\n\n<p>And finally <code>manage.py</code>:</p>\n\n<pre><code>#!/usr/bin/env python\nfrom django.core.management import execute_manager\nimport imp\ntry:\n    imp.find_module('settings') # Assumed to be in the same directory.\nexcept ImportError:\n    import sys\n    sys.stderr.write(\"Error: Can't find the file 'settings.py' in the directory containing %r. It appears you've customized things.\\nYou'll have to run django-admin.py, passing it your settings module.\\n\" % __file__)\n    sys.exit(1)\n\nimport settings\n\nif __name__ == \"__main__\":\n    execute_manager(settings)\n</code></pre>\n\n<ol>\n<li><p>flatpages in the administrative interface work</p></li>\n<li><p>I have actually added that page via the admin</p></li>\n<li><p>this is the path to my database:</p>\n\n<p>C:\\Documents and Settings\\Administrator\\Desktop\\django-projects\\cms\\cms.db </p></li>\n</ol>\n\n<p>And when I run <code>python manage.py syncdb</code>, I see no error.</p>\n\n<ol>\n<li><p>I'm trying to access</p>\n\n<p><code>http://localhost:8000/test/</code></p></li>\n<li><p>when I type <code>python manage.py runserver</code>, I see no error.</p></li>\n</ol>\n\n<p>The admin interface works perfectly.</p>\n"},{"tags":["django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12986010,"title":"Getting all unique values stored in a many-to-many field","body":"<p>I have a many-to-many field called <code>categories</code> and I would like to get distinct values stored in that field.</p>\n\n<p>The following is my model:</p>\n\n<pre><code>class Book (models.Model):\n    categories=models.ManyToManyField(Category, related_name = 'categories', blank = True, null=True)\n</code></pre>\n\n<p>Here is my Category model:</p>\n\n<pre><code>class Category (MPTTModel):\n    category = models.CharField(max_length=250)\n    parent = TreeForeignKey('self', blank=True, null=True, related_name='children')\n</code></pre>\n\n<p>I'd like to get every single one of the categories related to a book. How would I do this?</p>\n"},{"tags":["django","centos","yum","pysqlite","mysql-python"],"answer_count":2,"favorite_count":2,"up_vote_count":4,"down_vote_count":1,"view_count":3282,"score":3,"question_id":774772,"title":"Django on CentOS","body":"<p>I'm looking to use Django on a shared host that's running an unknown version of CentOS. My main problem is trying to interface with a database. The server has MySQL installed, but not MySQL-python. I initially thought of suggesting running \"yum install MySQL-python\", but apparently the version of MySQL-python that's in the default repositories for CentOS is 1.2.1, and Django requires 1.2.1p2.</p>\n\n<p>This requirement first started with Django 0.96. In the <a href=\"http://docs.djangoproject.com/en/dev/releases/0.96/\" rel=\"nofollow\">release notes</a>, a deprecated interface called mysql_old was added for compatibility with older versions of MySQL-python. Last July this deprecated interface was unceremoniously <a href=\"http://code.djangoproject.com/changeset/7949\" rel=\"nofollow\">dropped</a>. The <a href=\"http://code.djangoproject.com/wiki/BackwardsIncompatibleChanges#MySQL%5Foldbackendremoved\" rel=\"nofollow\">announcement</a> of this change does not indicate a reason other than that it was old.</p>\n\n<p>Is it possible to resurrect this old interface in Django 1.1? Have there been any changes to the database interface since then? What would be the danger in forcing Django to skip the version check and using 1.2.1? Is it possible to compile a later version on another machine and copy the files over to the host? What would I need to know in order to do that?</p>\n\n<p>I also looked into SQLite, but CentOS ships with Python 2.4.3, and therefore would require the pysqlite2 extension, which (afaict) doesn't exist in the repository.</p>\n\n<p>Everything could be solved by simply installing from source, but that's rather messy and I have a much smaller chance of convincing the company to do that than getting them to install something from the repository. I realize that it seems like I should just get a different host, but you'll have to trust me that I have my reasons to try to make this work.</p>\n\n<p><em>note: I don't have any experience using CentOS or yum, so everything I've said about them is an informed guess. Please let me know if all I need to do is specify some settings or change repositories to get the updated versions of these packages. Thanks.</em></p>\n"},{"tags":["django","templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12990905,"title":"Django: Access raw sql results directly in template without looping - since only returns one row","body":"<p>I return the following:</p>\n\n<pre><code> return render_to_response('mypage.html', { \"results\":results})\n</code></pre>\n\n<p>In my view function, I can get results either like this:</p>\n\n<pre><code>results = listings.objects.get(id = 1)  \n</code></pre>\n\n<p>In which case I can use it directly in the template:</p>\n\n<pre><code>{{results.name}}\n</code></pre>\n\n<p>or, I can get results like this (raw sql):</p>\n\n<pre><code>results = listings.objects.raw(sql_query, [id,])  \n</code></pre>\n\n<p>Then I have to loop through it, even though I know it only returns 1 row:</p>\n\n<pre><code>{% for listing in results %}\n     {{listing.name}}\n</code></pre>\n\n<p>What I need is to be able to use the raw sql, but still not have to loop through it. The issue with looping is that, if results is empty, then nothing inside the loop gets displayed.</p>\n"},{"tags":["jquery","python","ajax","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12990746,"title":"Using AJAX in django to delete a row in a table represented by a model","body":"<p>I have a  representing a model and I want to be able to remove the row and delete the object from the DB without reloading the page.  On the left I have an X icon when clicked hides the row using .hide('slow') but how can I make it remove from the db?  Re-loading the page takes a while..  Can I delete the object using a form or using a /delete page? </p>\n"},{"tags":["django","django-templates","django-urls"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":12989908,"title":"Why url() give me no values when calling inside included template?","body":"<p>Here is the code:</p>\n\n<pre><code>#list.html\n{% if intentions %}\n    &lt;table class=\"table\"&gt;\n        {% for i in intentions %}\n            {% url 'intentions.views.show' i.id as iUrl %}\n            &lt;tr&gt;\n                &lt;td width=\"20%\"&gt;\n                    &lt;span class=\"label label-success\"&gt;x prayers&lt;/span&gt;\n                &lt;/td&gt;\n                &lt;td&gt;&lt;h3&gt;&lt;a href=\"{{ iUrl }}\"&gt;{{ i }}&lt;/a&gt;&lt;/h3&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        {% endfor %}\n    &lt;/table&gt;\n{% else %}\n    &lt;p&gt;\n        No intentions are available.\n    &lt;/p&gt;\n{% endif %}\n</code></pre>\n\n<p>If this code is inside <code>index.html</code> everything is ok. If I try to move this code to separate file <code>list.html</code> and include in <code>index.html</code> like:</p>\n\n<pre><code>    {% include \"list.html\" with intentions=entries %}\n</code></pre>\n\n<p>I have no values in url attribute of <code>&lt;a&gt;</code> tag. Could someone give me answer why?</p>\n"},{"tags":["django","internationalization"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":2439,"score":3,"question_id":5489601,"title":"Django: i18n - change language","body":"<p>I'm install model_translation, rosetta, locale_url. But does not work change language.</p>\n\n<p>My settings.py:</p>\n\n<pre><code>LANGUAGE_CODE = 'ru'\nMODELTRANSLATION_TRANSLATION_REGISTRY = \"project.translation\"\nTRANSLATION_REGISTRY = \"project.translation\"\nugettext = lambda s: s\nLANGUAGES = (\n    ('ru', ugettext(u'Russian')),\n    ('uk', ugettext(u'Ukrainian')),\n)\n</code></pre>\n\n<p>My view for a language switch:</p>\n\n<pre><code>def set_language(request):\n    next = request.REQUEST.get('next', None)\n    if not next:\n        next = request.META.get('HTTP_REFERER', None)\n    if not next:\n        next = '/'\n    response = http.HttpResponseRedirect(next)\n    if request.method == 'GET':\n        lang_code = request.GET.get('language', None)\n        if lang_code and check_for_language(lang_code):\n            if hasattr(request, 'session'):\n                request.session['django_language'] = lang_code\n            else:\n                response.set_cookie(settings.LANGUAGE_COOKIE_NAME, lang_code)\n    return response\n</code></pre>\n\n<p>In templates:</p>\n\n<pre><code>&lt;a href=\"{% url set_lang %}?lang=uk&amp;next={{request.path}}\"&gt;Ukranian&lt;/a&gt;\n</code></pre>\n\n<p>My middleware:</p>\n\n<pre><code>MIDDLEWARE_CLASSES = (\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.middleware.locale.LocaleMiddleware',\n    'localeurl.middleware.LocaleURLMiddleware',\n    'django.middleware.common.CommonMiddleware',  \n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.middleware.csrf.CsrfResponseMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n)\n</code></pre>\n\n<p>But the language switching does not work. If I turn on the link <a href=\"http://localhost/uk/\" rel=\"nofollow\">http://localhost/uk/</a> language switch, but when switching to another page - the language back to the default language.\nWhat should I do?</p>\n"},{"tags":["django","postgresql","postgis","point","geodjango"],"answer_count":1,"favorite_count":6,"up_vote_count":5,"down_vote_count":0,"view_count":934,"score":5,"question_id":9064018,"title":"How to debug: Internal Error current transaction is aborted, commands ignored until end of transaction block","body":"<p>Hi Stackoverflow people, </p>\n\n<p>I do my first steps with GeoDjango and I am looking for better options to check faulty sql statements.</p>\n\n<p>So far, I simply wanted to safe a lng+lat point in my postgresql table.</p>\n\n<p>The model is defined with:</p>\n\n<pre><code>    geolocation = models.PointField(_('Geo Location'), \n                geography=True, \n                null = True, \n                blank = True,\n                help_text=_('Geolocation with Longitude and Latitude'))\n\n    objects = models.GeoManager()\n</code></pre>\n\n<p>In my view, I try to execute the following command</p>\n\n<pre><code>savedProject.geolocation = GEOSGeometry('POINT(%s %s)' %(u_lng,u_lat))\n</code></pre>\n\n<p>but I receive the following error when I try to save the form:</p>\n\n<blockquote>\n  <p>Exception Type:   InternalError \n  Exception Value:   current transaction is\n  aborted, commands ignored until end of transaction block</p>\n</blockquote>\n\n<p><strong>What is the reason for this error? I believe that there could be something wrong with the sql statement, but what is the best way to check? Django just provides with general error message \"Internal Error\".</strong></p>\n\n<p>Thank you for your help and suggestions!</p>\n"},{"tags":["python","django","celery","django-celery"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12990197,"title":"Django Celery, ImportError: Import by filename is not supported","body":"<p>When I try to run my celery workers for my django application, I get an import error.</p>\n\n<p>As far as I can tell it's an import in kombu.utils failing</p>\n\n<p>What follows is a rather large stack-trace:</p>\n\n<pre><code>$ ./manage.py celery worker --loglevel=info\nTraceback (most recent call last):\n  File \"./manage.py\", line 10, in &lt;module&gt;\n    execute_from_command_line(sys.argv)\n  File \"/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py\", line 443, in execute_from_command_line\n    utility.execute()\n  File \"/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py\", line 382, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"/usr/local/lib/python2.7/dist-packages/djcelery/management/commands/celery.py\", line 22, in run_from_argv\n    [\"%s %s\" % (argv[0], argv[1])] + argv[2:])\n  File \"/usr/local/lib/python2.7/dist-packages/celery/bin/celery.py\", line 890, in execute_from_commandline\n    super(CeleryCommand, self).execute_from_commandline(argv)))\n  File \"/usr/local/lib/python2.7/dist-packages/celery/bin/base.py\", line 179, in execute_from_commandline\n    return self.handle_argv(prog_name, argv[1:])\n  File \"/usr/local/lib/python2.7/dist-packages/celery/bin/celery.py\", line 882, in handle_argv\n    return self.execute(command, argv)\n  File \"/usr/local/lib/python2.7/dist-packages/celery/bin/celery.py\", line 857, in execute\n    return cls(app=self.app).run_from_argv(self.prog_name, argv)\n  File \"/usr/local/lib/python2.7/dist-packages/celery/bin/celery.py\", line 142, in run_from_argv\n    return self(*args, **options)\n  File \"/usr/local/lib/python2.7/dist-packages/celery/bin/celery.py\", line 112, in __call__\n    ret = self.run(*args, **kwargs)\n  File \"/usr/local/lib/python2.7/dist-packages/celery/bin/celery.py\", line 214, in run\n    return self.target.run(*args, **kwargs)\n  File \"/usr/local/lib/python2.7/dist-packages/celery/bin/celeryd.py\", line 153, in run\n    return self.app.Worker(**kwargs).run()\n  File \"/usr/local/lib/python2.7/dist-packages/celery/apps/worker.py\", line 176, in run\n    print(str(self.colored.cyan(' \\n', self.startup_info())) +\n  File \"/usr/local/lib/python2.7/dist-packages/celery/apps/worker.py\", line 246, in startup_info\n    'conninfo': self.app.connection().as_uri(),\n  File \"/usr/local/lib/python2.7/dist-packages/kombu/connection.py\", line 446, in as_uri\n    fields = self.info()\n  File \"/usr/local/lib/python2.7/dist-packages/kombu/connection.py\", line 435, in info\n    return OrderedDict(self._info())\n  File \"/usr/local/lib/python2.7/dist-packages/kombu/connection.py\", line 414, in _info\n    D = self.transport.default_connection_params\n  File \"/usr/local/lib/python2.7/dist-packages/kombu/connection.py\", line 637, in transport\n    self._transport = self.create_transport()\n  File \"/usr/local/lib/python2.7/dist-packages/kombu/connection.py\", line 395, in create_transport\n    return self.get_transport_cls()(client=self)\n  File \"/usr/local/lib/python2.7/dist-packages/kombu/connection.py\", line 402, in get_transport_cls\n    transport_cls = get_transport_cls(transport_cls)\n  File \"/usr/local/lib/python2.7/dist-packages/kombu/transport/__init__.py\", line 104, in get_transport_cls\n    _transport_cache[transport] = resolve_transport(transport)\n  File \"/usr/local/lib/python2.7/dist-packages/kombu/transport/__init__.py\", line 88, in resolve_transport\n    return symbol_by_name(transport)\n  File \"/usr/local/lib/python2.7/dist-packages/kombu/utils/__init__.py\", line 81, in symbol_by_name\n    module = imp(module_name, package=package, **kwargs)\n  File \"/usr/lib/python2.7/importlib/__init__.py\", line 37, in import_module\n    __import__(name)\nImportError: Import by filename is not supported.\n</code></pre>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12990228,"title":"extending user model in django - retrieving data","body":"<p>I've extended the user model with the following model:</p>\n\n<pre><code>class UserProfile(models.Model):\n    user = models.OneToOneField(User)\n    designs = models.ManyToManyField('Design', blank=True)\n    prints = models.ManyToManyField('Print', blank=True)\n    rating = models.IntegerField(null=True, blank=True)\n    reliability = models.IntegerField(null=True, blank=True)\n    av_lead_time = models.IntegerField(null=True, blank=True)\n</code></pre>\n\n<p>I've verified that this OneToOne field works because it's included in the user fields in admin. Now I need to use it to create an html table of user fields (both User and UserProfile). I'm trying the following code, but I don't get anything returned:</p>\n\n<pre><code>user_list = User.objects.all()\n    return render_to_response('index.html', {\n        'user_list': user_list    \n    })\n</code></pre>\n\n<p>template:</p>\n\n<pre><code>{% for user in user_list %}\n    &lt;tr&gt;\n        &lt;td&gt;{{ user.rating }}&lt;/td&gt;\n        &lt;td&gt;{{ user.reliability }}&lt;/td&gt;\n        &lt;td&gt;4&lt;/td&gt;\n        &lt;td&gt;2&lt;/td&gt;\n        &lt;td&gt;96&lt;/td&gt;\n        &lt;td&gt;£4.56&lt;/td&gt;\n        &lt;td class=\"success printButton radius\"&gt;Add to Cart&lt;/td&gt;\n    &lt;/tr&gt;\n{% endfor %}\n</code></pre>\n\n<p>Can anyone help?</p>\n"},{"tags":["django","django-templates"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12989560,"title":"Displaying complex dictionaries in Django Templates","body":"<p>I'm using Django 1.4 with Python 2.7 on Ubuntu 12.04.</p>\n\n<p>I have a template that I want to fill with information regarding developers working on a project.</p>\n\n<p>Each developer will have the following information to display:</p>\n\n<pre><code>type\ntitle\nfirst_name\nlast_name\nskills\n</code></pre>\n\n<p>The trouble I'm running into is that each developer has many skills associated with them.</p>\n\n<p>I've created the model like this:</p>\n\n<pre><code>class DevSkills(models.Model):\n    dev = models.ForeignKey(User)\n\n    skill = models.CharField(max_length = 200)\n</code></pre>\n\n<p>I'm trying to create a view that will populate the dictionary so that I can loop through each developer, display their info, then loop through each skill (to display them one at a time).</p>\n\n<p>Here is the view:</p>\n\n<pre><code>def developers(request):\n    \"\"\"\n    ..  function:: developers()\n\n        Provide the page that shows the developer credentials\n\n        :param request: Django Request object\n    \"\"\"\n    devs = User.objects.filter(is_staff = True)\n    dev_info = {}\n    for dev in devs:\n        dev_info.update(createDevDisplayDict(dev))\n    data = { 'user' : request.user }\n    data.update({ 'devs' : dev_info })\n\n    return render_to_response(\"developers.html\", data)\n</code></pre>\n\n<p>I've designated the <code>is_staff</code> field from <code>User</code> to indicate the user is a developer.</p>\n\n<p>I've created a simple utility that helps me populate the embedded dictionaries so I can loop through them:</p>\n\n<pre><code>def createDevDisplayDict(user):\n    \"\"\"\n    ..  function:: createDevDisplayDict()\n\n        Create a dictionary for showcasing the developer\n\n        :param user: developer who we are working with\n    \"\"\"\n\n    userProfile = UserProfile.objects.get(user = user)\n    devSkills = DevSkills.objects.filter(dev = user) \n    dev_dict = {}\n    user_dict = { 'dev_type'        : userProfile.dev_type,\n                  'title'           : userProfile.title,\n                  'first_name'      : user.first_name,\n                  'last_name'       : user.last_name,\n                }\n    dev_dict.update(user_dict)\n\n    skill_dict = {}\n    for skill in devSkills:\n        skill_dict.upate({ 'skill' : skill.skill })\n\n    dev_dict.update(skill_dict)\n    return dev_dict\n</code></pre>\n\n<p>My intention is to loop through each developer, create a \"super\" dictionary to contain each of their <code>user_dict</code> dictionaries (which are based on their <code>User</code> info) and add to that a dictionary for each of their skills.  Then, back in the template I want to loop through the \"super\" dictionary in such a way that it will present them something like the following:</p>\n\n<pre><code>James Taylor\nProject Lead\nSoftware Developer\n    • Django\n    • Python\n    • JavaScript\n    • JQuery\n\nElizabeth Norton\nDesign Lead\nGraphic Designer\n    • Edge\n    • Adobe Photoshop\n    • Adobe Illustrator\n    • CSS\n</code></pre>\n\n<p>Here is the template I'm trying to work with:</p>\n\n<pre><code>{% extends \"base.html\" %}\n\n{% block content %}\n&lt;div&gt;\n    &lt;p&gt;Our Developers&lt;/p&gt;\n&lt;/div&gt;\n    {% for dev in devs %}\n        {{ dev.user_dict.first_name }} {{ dev.user_dict.last_name }}\n        {{ dev.user_dict.title }}\n        {{ dev.user_dict.dev_type }}\n\n        &lt;ul&gt; \n        {% for skill in dev.skill_dict %}\n            &lt;li&gt;skill.skill&lt;/li&gt;\n        {% endfor %}\n        &lt;/ul&gt;\n    {% endfor %}\n{% endblock %}\n</code></pre>\n\n<p>When I see the page now it looks like this:</p>\n\n<pre><code>Our Developers\n</code></pre>\n\n<p>Yeah...nothing is getting populated.  Any suggestions?</p>\n\n<p>UPDATE 1:\nI've modified my utility per iMom0's suggestion.  I'm now using a list to contain each skill.  Like so:</p>\n\n<pre><code>def createDevDisplayDict(user):\n    \"\"\"\n    ..  function:: createDevDisplayDict()\n\n        Create a dictionary for showcasing the developer\n\n        :param user: developer who we are working with\n    \"\"\"\n\n    userProfile = UserProfile.objects.get(user = user)\n    devSkills = DevSkills.objects.filter(dev = user) \n    dev_dict = {}\n    user_dict = { 'dev_type'        : userProfile.dev_type,\n                  'title'           : userProfile.title,\n                  'first_name'      : user.first_name,\n                  'last_name'       : user.last_name,\n                }\n    dev_dict.update(user_dict)\n\n    skills = []\n    for skill in devSkills:\n        skills.append(skill.skill)\n\n    skill_dict = {'skill' : skills}\n\n    dev_dict.update(skill_dict)\n    return dev_dict\n</code></pre>\n\n<p>I can see the value in doing this - in fact, it's much more intuitive and I think I was making it too hard the other way.  But my template still shows up bare.  :(</p>\n\n<p>UPDATE 2:</p>\n\n<p>I know I'm on the write path now.  I put some logging in the view:</p>\n\n<pre><code>devs = User.objects.filter(is_staff = True, is_superuser = False)\ndev_info = {}\nfor dev in devs:\n    dev_info.update(createDevDisplayDict(dev))\n\nfor key in dev_info:\n    for sub_key in dev_info[key]:\n        logfile.write('{0} = {1}\\n'.format(sub_key, dev_info[key][sub_key]))\n</code></pre>\n\n<p>And the logfile displays:</p>\n\n<pre><code>skills = [u'Java', u'Perl', u'C++', u'Python', u'Django']\ndev_type = Software Developer\nfirst_name = Rico\nlast_name = Cordova\ntitle = Owner\n</code></pre>\n\n<p>So, it has to be a way I'm calling it in the template, right?</p>\n\n<p>UPDATE 3:</p>\n\n<p>I had a realization that I was disconnecting the <code>user_dict</code> and their <code>skills</code>.  So I modified the utility slightly to bring them into a single dictionary.</p>\n\n<pre><code>## Create a logging object\nuserProfile = UserProfile.objects.get(user = user)\ndevSkills = DevSkills.objects.filter(dev = user) \ndev_dict = {}\nuser_dict = { 'dev_type'        : userProfile.dev_type,\n              'title'           : userProfile.title,\n              'first_name'      : user.first_name,\n              'last_name'       : user.last_name,\n            }\n\nskills = []\nfor skill in devSkills:\n    skills.append(skill.skill)\n\nuser_dict.update({ 'skills' : skills })\n\ndev_dict['user_dict'] = user_dict\nreturn dev_dict\n</code></pre>\n\n<p>This is a much better solution, in my opinion.  I'm still having trouble accessing the <code>user_dict</code> info in the template though.  :(</p>\n"},{"tags":["python","django","dependencies","pip"],"answer_count":2,"favorite_count":6,"up_vote_count":16,"down_vote_count":0,"view_count":2663,"score":16,"question_id":5360873,"title":"How do I package a python application to make it pip-installable?","body":"<p>I'm writing a django application in my spare time for a footy-tipping competition we're running at work. I figured I'd use this time wisely, and get up to speed on virtualenv, pip, packaging, django 1.3, and how to write an easily redistributable application. So far, so good.</p>\n\n<p>I'm up to the packaging part. A lot of the django apps on GitHub for instance are mostly bundled (roughly) the same way. I'll use <a href=\"https://github.com/pydanny/django-uni-form\" rel=\"nofollow\">django-uni-forms</a> as an example.</p>\n\n<p>An assumption I'm making is that the <code>MANIFEST.in</code> and <code>setup.py</code> are the only required pieces that pip needs to do its job. Is that correct? What other components are necessary if my assumption is wrong?</p>\n\n<p>Are the required packaging files generally generated, or are they crafted by hand? Can dependencies be described and then installed also? My application depends on <code>django-uni-forms</code>, and I have it listed in a <code>requirements.txt</code> file within my app which I used to install the dependency; but is that something that the packaging system can take care of?</p>\n\n<p>What are the steps I need to follow to package my application in such a way that pip will be able to install it and any dependencies?</p>\n"},{"tags":["python","django","django-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12989576,"title":"Custom django backend login sometimes fails","body":"<p>I have created a cookie middleware that checks for a cookie named AUTHENTICATION, this cookie is set on a external system on a subdomain. The code seems to be working, but sometimes I get an error email from the site:</p>\n\n<pre><code>File \"/home/users/webuser/virtualenvs/production/lib/python2.7/site-packages/django-trunk/django/core/handlers/base.py\", line 93, in get_response\nresponse = middleware_method(request)\n\nFile \"/home/users/webuser/virtualenvs/production/projectname/projectname/CookieMiddleware.py\", line 21, in process_request\nlogin(request, user)\n\nFile \"/home/users/webuser/virtualenvs/production/lib/python2.7/site-packages/django-trunk/django/contrib/auth/__init__.py\", line 70, in login\nrequest.session[SESSION_KEY] = user.id\n\nAttributeError: 'NoneType' object has no attribute 'id'\n</code></pre>\n\n<p>Here is my CookieMiddleware.py</p>\n\n<pre><code>from django.conf import settings\nfrom django.contrib.auth import authenticate, login\nfrom django.contrib.auth.models import User\n\n#Authentication Middleware using a external cookie named AUTHENTICATION\nclass CookieMiddleware(object):\n\n    def process_request(self, request):\n        if \"AUTHENTICATION\" not in request.COOKIES:\n            #Cookie not found - do nothing\n            return\n        #Token found - first check if the user is allready is logged in\n        if request.user.is_authenticated():\n            return\n\n        #Not logged in, then send to RemoteUserBackend.py    \n        token = request.COOKIES[\"AUTHENTICATION\"]\n\n        user = authenticate(token=token)\n        request.user = user\n        login(request, user)\n</code></pre>\n\n<p>Here is my RemoteUserBackend.py</p>\n\n<pre><code>from django.conf import settings\nfrom django.contrib.auth import authenticate, login\nfrom django.contrib.auth.models import User, Group\nfrom base64 import b64decode\nfrom hashlib import sha1\nfrom urllib import unquote\nfrom suds.client import Client\nfrom bs4 import BeautifulSoup\n\nclass Backend( object ):\n        def authenticate(self, username=None, password=None, token=None):\n\n            #Unescape token\n            unescaped_token = unquote(token)\n\n            #Decode token\n            decoded_token = unescaped_token.decode('base64')\n\n            #Split the token into tree variable\n            secret, hashstring, userID = decoded_token.split('-', 2)\n\n            #Secret needs to bee in lower to match shared secret\n            secret_lower = secret.lower()\n\n            #Make string of SHARED_SECRET, hashstring, userID\n            check_string = \"%s%s%s\" % (settings.SHARED_SECRET, hashstring, userID)\n\n            #sha1 the string\n            sha1_check_string = sha1(check_string)\n\n            #Check if the SHARED_SECRET is matching cookie secret\n            cookie_valid = sha1_check_string.hexdigest() == secret_lower\n\n\n            #Url to WSDL file\n            url = 'http://f.domain.com/webservice/Person.cfc?wsdl'\n\n            #Make SUDS.Client from WSDL url\n            client = Client(url)\n\n            #Make dict with parameters for WSDL query\n            d = dict(CustomerId='xxx', Password='xxx', PersonId=userID)\n\n            #Get result from WSDL query\n            result = client.service.GetPerson(**d).encode(\"UTF-8\")\n\n            #Soup the result\n            soup = BeautifulSoup(result)\n\n            #Make groupname variable\n            self.groupname = soup.personrecord.membersubcatshortname.string\n\n            #Check if the groupname is empty\n            if len(self.groupname) == 0:\n                self.groupname = \"allaccess\"\n\n\n            #Firstname\n            self.first_name = soup.personrecord.firstname.string.encode(\"UTF-8\")\n\n            #Lastname\n            self.last_name = soup.personrecord.lastname.string.encode(\"UTF-8\")\n\n            #Email\n            self.email = soup.personrecord.email.string\n\n            if len(self.email) == 0:\n                self.email = \"none@email.com\"\n\n            #Find what group the user has\n            if 'low' in self.groupname:\n                g = Group.objects.get(name='lowaccess') \n            elif 'all' in self.groupname:\n                g = Group.objects.get(name='allaccess') \n\n\n\n            if cookie_valid:\n                try:\n                    user = User.objects.get(username=userID)\n\n                    #The user exist, then update the user\n\n                    #Clear all old groups, they could have changed since last login\n                    user.groups.clear()\n                    #Add the group\n                    g.user_set.add(user) \n\n\n                except User.DoesNotExist:\n                    # Create a new user\n\n                    user = User(username=userID, first_name=self.first_name, last_name=self.last_name, email=self.email)\n                    user.is_staff = False\n                    user.is_superuser = False\n\n\n                    user.save() #Save the user\n                    g.user_set.add(user) #Add the group\n                return user\n            return None\n\n        def get_user(self, user_id):\n            try:\n                return User.objects.get(pk=user_id)\n            except User.DoesNotExist:\n                return None\n</code></pre>\n\n<p>What can I do, to prevent the error from happening?</p>\n"},{"tags":["javascript","jquery","html","django"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12989214,"title":"Generate delete confirmation box","body":"<p>In my application results are displaying as a table format.</p>\n\n<p>Part of my code is,</p>\n\n<pre><code>{% for device in devices %}\n  &lt;tr&gt;\n    &lt;td&gt;{{ device.operator}}&lt;/td&gt;\n    &lt;td&gt;{{ device.state }}&lt;/td&gt;\n    &lt;td&gt;{{ device.tstampgps }}&lt;/td&gt;\n    &lt;td&gt;&lt;button id='rec_delete'&gt;Delete&lt;/button&gt;&lt;/td&gt;\n\n  &lt;/tr&gt;\n{% endfor %}\n</code></pre>\n\n<p>Even if we press the delete button, I need to delete the particular record from the database. before that I want to prompt a confirmation box for that. \nCan anyone help me?</p>\n"},{"tags":["django","tastypie"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":37,"score":-2,"question_id":12989583,"title":"Don't create new instance through the ForeignKey in Tastypie","body":"<p>In Tastypie, is there a way to not allow create/update instances when we pass a dictionary through a ForeignKey? My intention is that you can only pass an URI.</p>\n"},{"tags":["python","mysql","django","virtualenv","virtualenvwrapper"],"answer_count":8,"favorite_count":12,"up_vote_count":70,"down_vote_count":0,"view_count":41870,"score":70,"question_id":2952187,"title":"Getting \"Error loading MySQLdb module: No module named MySQLdb\" - have tried previously posted solutions","body":"<p>This is a much discussed issue for OSX 10.6 users, but I haven't been able to find a solution that works. Here's my setup:</p>\n\n<p>Python 2.6.1 64bit\nDjango 1.2.1\nMySQL 5.1.47 osx10.6 64bit</p>\n\n<p>I create a virtualenvwrapper with --no-site-packages, then installed Django. When I activate the virtualenv and run python manage.py syncdb, I get this error:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"manage.py\", line 11, in &lt;module&gt;\n  execute_manager(settings)\nFile \"/Users/joerobinson/.virtualenvs/dj_tut/lib/python2.6/site-packages/django/core/management/__init__.py\", line 438, in execute_manager\n  utility.execute()\nFile \"/Users/joerobinson/.virtualenvs/dj_tut/lib/python2.6/site-packages/django/core/management/__init__.py\", line 379, in execute\n  self.fetch_command(subcommand).run_from_argv(self.argv)\nFile \"/Users/joerobinson/.virtualenvs/dj_tut/lib/python2.6/site-packages/django/core/management/__init__.py\", line 257, in fetch_command\n  klass = load_command_class(app_name, subcommand)\nFile \"/Users/joerobinson/.virtualenvs/dj_tut/lib/python2.6/site-packages/django/core/management/__init__.py\", line 67, in load_command_class\n  module = import_module('%s.management.commands.%s' % (app_name, name))\nFile \"/Users/joerobinson/.virtualenvs/dj_tut/lib/python2.6/site-packages/django/utils/importlib.py\", line 35, in import_module\n  __import__(name)\nFile \"/Users/joerobinson/.virtualenvs/dj_tut/lib/python2.6/site-packages/django/core/management/commands/syncdb.py\", line 7, in &lt;module&gt;\nfrom django.core.management.sql import custom_sql_for_model, emit_post_sync_signal\nFile \"/Users/joerobinson/.virtualenvs/dj_tut/lib/python2.6/site-packages/django/core/management/sql.py\", line 5, in &lt;module&gt;\nfrom django.contrib.contenttypes import generic\nFile \"/Users/joerobinson/.virtualenvs/dj_tut/lib/python2.6/site-packages/django/contrib/contenttypes/generic.py\", line 6, in &lt;module&gt;\n  from django.db import connection\nFile \"/Users/joerobinson/.virtualenvs/dj_tut/lib/python2.6/site-packages/django/db/__init__.py\", line 75, in &lt;module&gt;\n  connection = connections[DEFAULT_DB_ALIAS]\nFile \"/Users/joerobinson/.virtualenvs/dj_tut/lib/python2.6/site-packages/django/db/utils.py\", line 91, in __getitem__\n  backend = load_backend(db['ENGINE'])\nFile \"/Users/joerobinson/.virtualenvs/dj_tut/lib/python2.6/site-packages/django/db/utils.py\", line 32, in load_backend\n  return import_module('.base', backend_name)\nFile \"/Users/joerobinson/.virtualenvs/dj_tut/lib/python2.6/site-packages/django/utils/importlib.py\", line 35, in import_module\n  __import__(name)\nFile \"/Users/joerobinson/.virtualenvs/dj_tut/lib/python2.6/site-packages/django/db/backends/mysql/base.py\", line 14, in &lt;module&gt;\n  raise ImproperlyConfigured(\"Error loading MySQLdb module: %s\" % e)\ndjango.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module: No module named MySQLdb\n</code></pre>\n\n<p>I've also installed the <a href=\"http://sourceforge.net/projects/mysql-python/files/\" rel=\"nofollow\">MySQL for Python</a> adapter, but to no avail (maybe I installed it improperly?). </p>\n\n<p>Anyone dealt with this before?</p>\n"},{"tags":["django","nginx","django-views","file-download"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12988070,"title":"Is there any reliable way to check if a download is complete in django","body":"<p>I am using nginx to serve files via a django view and I need to be able to detect when the file download is complete. Is there any way to reliable read the download status.</p>\n"},{"tags":["python","django","unit-testing","testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12981990,"title":"Django debug tests","body":"<p>How do I debug my tests? For example, I POST to create an entry and expect it to validate and return a particular page. It works in the browser and in the shell, but the test is the only thing that fails (ironically!). I would like to print the response to the console or something so I could read errors or what have you. But I can only see things that I <code>print</code> in e.g. the view.</p>\n\n<p>Not sure it's necessary, but here's the test code in question from <code>tests.py</code>:</p>\n\n<pre><code>    resp = self.client.post('/meal/invite/', \n        {'summary': 'Test munch', 'when': now(), 'max_diners': '1', 'description': 'Munchies'}, follow=True)\n    self.assertEqual(resp.status_code, 200)\n    self.assertContains(resp, 'Test munch', 1)\n    self.assertContains(resp, 'You are hosting this meal', 1)\n</code></pre>\n\n<p>The final assertion is incorrect. If I change it to a value present in the original form page showing 'field required' errors, it passes. I just can't see what I'm missing.</p>\n\n<p>I have a few other tests working, but I just don't know how to debug this.</p>\n\n<p>How's it done?\nThanks</p>\n"},{"tags":["python","django"],"answer_count":3,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":2855,"score":2,"question_id":2870262,"title":"django-admin.py startproject mysite not working well on windows 7","body":"<p>I'm learning django and I did successfully start a site on Windows XP by following the tutorial.</p>\n\n<p>However, on Windows 7 when I issued:</p>\n\n<pre><code>django-admin.py startproject mysite\n</code></pre>\n\n<p>python.exe was started and a window appeared to ask me to choose either python.exe or other program to open a file....</p>\n\n<p>Did I do anything wrong or there are more tricks for windows 7?</p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12987293,"title":"Django custom file editor field","body":"<p>I would like to create a custom field in django that models an ordinary text file editor but interacts with the the file system instead of the database.</p>\n\n<p>For example:</p>\n\n<pre><code>class FileEditorField(models.TextField):\n    #...\n\nclass Params(models.Model):\n    name = models.CharField(max_length=100)\n    config = FileEditorField(path='/path')\n</code></pre>\n\n<p><strong>FileEditor</strong> would read/save values from/to the file system.</p>\n\n<p>What is the simplest approach?</p>\n"},{"tags":["django"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12987648,"title":"ImportError: Could not import settings","body":"<p>I am trying to develop an sample project in Django and getting errors when I run the syncdb command.</p>\n\n<p>This is how my project structure looks like:</p>\n\n<p>/Users/Sreek/django_demo/godjango/bookings:</p>\n\n<pre><code>                   manage.py\n                   registration/\n                         forms.py\n                         views.py\n                         models.py\n                         urls.py\n                   bookings/\n                         settings.py\n                         urls.py\n</code></pre>\n\n<p>And my manage.py file is as follows:</p>\n\n<pre><code>#!/usr/bin/env python\nimport os\nimport sys\n\nif __name__ == \"__main__\":\n    os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"bookings.settings\")\n    from django.core.management import execute_from_command_line\n    execute_from_command_line(sys.argv)\n</code></pre>\n\n<p>And my PYTHONPATH and DJANGO_SETTINGS_MODULE are set as below</p>\n\n<pre><code>$echo $DJANGO_SETTINGS_MODULE\nbookings.settings\n\n$ echo $PYTHONPATH\n/Users/Sreek/django_demo/godjango/bookings\n</code></pre>\n\n<p>And my WSGI.py file looks like below:</p>\n\n<pre><code> import os\n os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"bookings.settings\")\n from django.core.wsgi import get_wsgi_application\n application = get_wsgi_application()\n</code></pre>\n\n<p>When I run the python manage.py syncdb command, I am getting the following error.</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"manage.py\", line 11, in &lt;module&gt;\n    execute_from_command_line(sys.argv)\n  File \"/Users/Sreekanth/django_demo/godjango/lib/python2.7/site-packages/django/core/management/__init__.py\", line 443, in execute_from_command_line\n    utility.execute()\n  File \"/Users/Sreekanth/django_demo/godjango/lib/python2.7/site-packages/django/core/management/__init__.py\", line 382, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"/Users/Sreekanth/django_demo/godjango/lib/python2.7/site-packages/django/core/management/__init__.py\", line 261, in fetch_command\n    klass = load_command_class(app_name, subcommand)\n  File \"/Users/Sreekanth/django_demo/godjango/lib/python2.7/site-packages/django/core/management/__init__.py\", line 69, in load_command_class\n    module = import_module('%s.management.commands.%s' % (app_name, name))\n  File \"/Users/Sreekanth/django_demo/godjango/lib/python2.7/site-packages/django/utils/importlib.py\", line 35, in import_module\n    __import__(name)\n  File \"/Users/Sreekanth/django_demo/godjango/lib/python2.7/site-packages/django/core/management/commands/syncdb.py\", line 8, in &lt;module&gt;\n    from django.core.management.sql import custom_sql_for_model, emit_post_sync_signal\n  File \"/Users/Sreekanth/django_demo/godjango/lib/python2.7/site-packages/django/core/management/sql.py\", line 6, in &lt;module&gt;\n    from django.db import models\n  File \"/Users/Sreekanth/django_demo/godjango/lib/python2.7/site-packages/django/db/__init__.py\", line 11, in &lt;module&gt;\n    if DEFAULT_DB_ALIAS not in settings.DATABASES:\n  File \"/Users/Sreekanth/django_demo/godjango/lib/python2.7/site-packages/django/utils/functional.py\", line 184, in inner\n    self._setup()\n  File \"/Users/Sreekanth/django_demo/godjango/lib/python2.7/site-packages/django/conf/__init__.py\", line 42, in _setup\n    self._wrapped = Settings(settings_module)\n  File \"/Users/Sreekanth/django_demo/godjango/lib/python2.7/site-packages/django/conf/__init__.py\", line 95, in __init__\n    raise ImportError(\"Could not import settings '%s' (Is it on sys.path?): %s\" % (self.SETTINGS_MODULE, e))\nImportError: Could not import settings 'bookings.settings' (Is it on sys.path?): No module named unipath\n</code></pre>\n\n<p>Could someone suggest what I am missing?</p>\n"},{"tags":["django","django-templates","django-comments"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":258,"score":0,"question_id":6059496,"title":"Django Comments error following tutorial","body":"<p>I'm trying to integrate Django's comment app into my site but with no success. I've been following the documentation outlined at: <a href=\"http://docs.djangoproject.com/en/1.3/ref/contrib/comments/\" rel=\"nofollow\">Django comments</a></p>\n\n<p>The error I'm getting is:</p>\n\n<blockquote>\n  <p>Caught ViewDoesNotExist while rendering: Tried search in module FrontEnd.views. Error was: 'module' object has no attribute 'search'</p>\n</blockquote>\n\n<p>nothing in my views refers to anything involving search. Something in the comments install is causing this. The line that actually fails is. </p>\n\n<pre><code>&lt;form action=\"{% comment_form_target %}\" method=\"post\"&gt;\n</code></pre>\n\n<p><strong>comment_form_target</strong> is highlighted.</p>\n\n<p>The code  causing the error:</p>\n\n<pre><code>{% load comments %}\n{% get_comment_form for article as form %}\n&lt;form action=\"{% comment_form_target %}\" method=\"post\"&gt;\n    {{ form }}\n&lt;/form&gt;\n</code></pre>\n\n<p>From what I've found online, it looks like i'm either missing some library in my Python 2.7 or i'm doing circular imports?</p>\n"},{"tags":["django","django-admin-tools"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12987227,"title":"django-admin-tools does not see some apps in dashboard","body":"<p>On devserver all works fine, but in production there are not some apps in admin dashboard.</p>\n\n<p>settings.py</p>\n\n<pre><code>INSTALLED_APPS = (\n    'admin_tools',\n    'admin_tools.theming',\n    'admin_tools.menu',\n    'admin_tools.dashboard',\n\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'django.contrib.admin',\n\n    'sorl.thumbnail',\n    'file_resubmit',\n    'django_pencil',\n\n    'blog',\n    'core',\n    'gallery',\n    'nav',\n    'options',\n    'pages',\n    'themes',\n\n    'django_cleanup',\n)\n</code></pre>\n\n<p>Here is code of CustomIndexDashboard.</p>\n\n<pre><code>class CustomIndexDashboard(Dashboard):\n    \"\"\"\n    Custom index dashboard for coffee.\n    \"\"\"\n    def init_with_context(self, context):\n        site_name = get_admin_site_name(context)\n        # append a link list module for \"quick links\"\n        self.children.append(modules.LinkList(\n            _('Quick links'),\n            layout='inline',\n            draggable=False,\n            deletable=False,\n            collapsible=False,\n            children=[\n                [_('Return to site'), '/'],\n                [_('Change password'),\n                 reverse('%s:password_change' % site_name)],\n                [_('Log out'), reverse('%s:logout' % site_name)],\n            ]\n        ))\n\n        self.children.append(\n            modules.ModelList(u'Navigation', [\n                'nav.*',\n            ])\n        )\n        self.children.append(\n            modules.ModelList(u'Content', [\n                'pages.*',\n                'django_pencil.*',\n            ])\n        )\n\n        self.children.append(\n            modules.ModelList(u'Gallery', [\n                'gallery.*',\n            ])\n        )\n        self.children.append(\n            modules.ModelList(u'Blog', [\n                'blog.*',\n            ])\n        )\n\n        self.children.append(\n            modules.ModelList(u'Options', [\n                'options.*',\n            ])\n        )\n</code></pre>\n\n<p>In dashboard there are not 'pages' and 'gallery' apps.\nIf I turn off django-admin-tools, then those apps appears.</p>\n"},{"tags":["sql","django","django-models"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":654,"score":1,"question_id":2381556,"title":"Get SQL a Django model has (or would call) on .save()","body":"<p>How can you get the SQL for a Django model's .save(), i.e.</p>\n\n<pre><code>from django.db import models\n\nclass MyM(models.Model):\n   text = models.TextField()\n</code></pre>\n\n<p>How can you get the SQL that would be created/used in the following scenario:</p>\n\n<pre><code> &gt;&gt;&gt; m = MyM(text=\"123\")\n &gt;&gt;&gt; m.save()\n # What SQL Django just run?\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["django","templates","dictionary"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12986860,"title":"Creating dictionary in Django template","body":"<p>So, in template.html I use:</p>\n\n<pre><code>{% if dict %}\n{{ s={} }}\n{% endif %}\n</code></pre>\n\n<p>The error is - <strong>Could not parse the remainder: '={}' from 's={}'</strong>. How to fix it?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12708946,"title":"How to get user value in base.html?","body":"<p>I'd like to work with user data in main base.html which is my main template.</p>\n\n<p>I actually use the login generic view. When I'm logged in on the homepage it gives me user information but in all other pages <code>user</code> is blank.</p>\n\n<p>I've read many things about this: <code>request</code>, <code>RequestContext</code>, I've added <code>django.contrib.auth.context_processors.auth</code> to the processors list.</p>\n\n<p>Any idea how to get this variable to show everywhere?</p>\n"},{"tags":["django","firefox","django-admin","crash"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":166,"score":1,"question_id":3294259,"title":"How to modify the way a ForeignKey field is rendered in a Django admin page to avoid browser crash?","body":"<p>I have a Customer model which contains a ForeignKey to a Contact model.</p>\n\n<p>I have over 100,000 contacts in my DB and when I load the admin page for a specific customer, the dropdown menu for the contact is getting populated with ALL of the contacts in the database. This has recently, due to its shear length, started causing my Firefox to crash while the admin page is loading.</p>\n\n<p>Is there a way to either:</p>\n\n<ol>\n<li>replace the field with an integer\nfield I can manually modify to the\ncontact ID when necessary</li>\n<li>replace the dropdown menu with some\nalternative input method which won't\ncrash the browser</li>\n<li>remove this input\nfrom the Customer admin page\naltogether</li>\n</ol>\n\n<p>Thanks!</p>\n"},{"tags":["jquery","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12986119,"title":"jquery change next element after deleting prev","body":"<p>I have a code <a href=\"http://jsfiddle.net/hRRzK/3/\" rel=\"nofollow\">http://jsfiddle.net/hRRzK/3/</a>. I want to reload whole <code>&lt;ul&gt;</code> after deleting one line to change numbers in <code>&lt;var id=\"exset\"&gt;4&lt;/var&gt;</code> tag. I want to change numbers to every next lines from deleted line. </p>\n\n<p>When I click to the link it send request to DB, remove line with id from DB and reassign new numbers to every next lines in DB. In same time JQuery remove line deleting apropriete <code>&lt;li&gt;</code> tag. After that I have in DB right numbers of lines, but in html - not. If I refresh page it show me right numbers because it is get from DB new data.</p>\n\n<p>What is the best way to get right numbers in lines after delete one? Get new info back to JQuery after deleting line(is it possible)? Or subtract 1 from every next lines by J-script?</p>\n\n<p>Thanks for advice.</p>\n"},{"tags":["django","postgresql"],"answer_count":5,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1345,"score":3,"question_id":5619848,"title":"how to have Accent-insensitive filter in django with postgres?","body":"<p>Hi I find that on postgres database, we can't configure default accent sensivity (on old mail exchanges).</p>\n\n<p>Is there a way to have a _icontains also insensitive to special caracters (é, è, à, ç, ï) or I must use postgres regex to replace both side with _iregex (ç->c, é->e ...)?</p>\n"},{"tags":["django","backbone.js","requirejs"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":75,"score":2,"question_id":12973702,"title":"Structuring large javascript code using RequireJS","body":"<p>Am very new to RequireJS here and trying to learn how to adopt to the structure. As of now, I've managed to create a structure as following </p>\n\n<p><img src=\"https://dl.dropbox.com/u/7253604/folder%20structure.png\" alt=\"ddd\"></p>\n\n<p>above image shows the structure of my code. Where by the folder \"my\" is supposed to contain all my modules, I plan to write inside each module its own models.js, views.js to be used later on by backbone.js</p>\n\n<p>At this point I have couple questions as following</p>\n\n<ol>\n<li>Can anyone by looking at the structure tell if its a good idea or if I should reconsider?</li>\n</ol>\n\n<p>The second question is have is related to how I should manage conditionally loading my modules. Below is my config.js file </p>\n\n<pre><code>require([\n        \"jquery\",\n        \"libs/jquery-ui/js/jquery-ui-1.9.0.custom.min\",\n        \"libs/bootstrap/js/bootstrap.min\",\n        \"my/base/module\",\n        \"my/vehicle/module\"],\n\n    function($, ui, bootstrap, base, vehicle) {\n        //plugins have been loaded.\n        base.initialize();\n        vehicle.initialize();\n\n});\n</code></pre>\n\n<p>am still not sure how to load module vehicle when am browsing or load module accounts when am browsing accounts. The backend is developed using django, I could create several config.js files for each module but am not sure if this is the correct approach or not. </p>\n"},{"tags":["javascript","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12985684,"title":"Javascript not rendering using django","body":"<p>I have the following code in a template, using a javascript event calendar:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"calendar.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\n    var myCalendar = new JEC('myCalendar'); \n    myCalendar.showCalendar();\n&lt;/script&gt; \n</code></pre>\n\n<p>I am using django to create the site. The calendar shows when I open the html document my browswer, but the calendar does not render when I use the actual site, even though everything else that is included in the template (not shown here) comes up fine. Is there something I am missing here? Do I need to return the myCalendar object to the view in order for it to render properly? I've searched a lot for some solutions, but I can't find anything. Some documentation to point me in the right direction would also be appreciated.</p>\n"},{"tags":["django"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":12985018,"title":"How to create a field which there are only one single instance in Django?","body":"<p>How do I create a field in Django where I might create only one instance of it.\nIn other words, I don't want that be stored multiple entries of this item in the database, because is only required just one instance.\nIn the administrator interface I might only modify this item, and do not add multiple instances of this.</p>\n"},{"tags":["python","django","sqlite","orm"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":12984803,"title":"DateField clearing itself every time object is edited","body":"<p>I have the following model:</p>\n\n<pre><code>class Day(models.Model):\nday = models.DateField()\ntitle = models.CharField(max_length=20)\ndescription = models.CharField(max_length=160)\nvotes = models.IntegerField(max_length=7)\nlast_vote = models.DateTimeField()\n\ndef __unicode__(self):\n    return self.title\n</code></pre>\n\n<p>Whenever I edit it like this:</p>\n\n<pre><code>current_time = datetime.datetime.now()\nday_to_vote_for.votes += 1\nday_to_vote_for.last_vote = current_time\nday_to_vote_for.save()\n</code></pre>\n\n<p>or whenever I edit through the admin control panel, it is reset to a blank field? Why? This doesn't happen with the Datetime field. How do I fix it?</p>\n\n<p>People need to be able to specify dates other than now. So auto_now_add won't work. It's just clearing for no reason.</p>\n"},{"tags":["django","forms","hidden-field"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12985191,"title":"Hiding a ModelForm field entry in Django","body":"<p>I have a ModelField in Django. I want the user to be able to edit some of the fields but want to edit the others myself (not as admin but with values from the user's state that's accessible through Javascript). If I change the ModelField attribute \"editable\" to false then I can't access when the user fills out the form. Is there a way to implement the \"HiddenField\" attribute that exists for regular Forms for ModelForms?</p>\n\n<p>I can provide more details if needed.</p>\n"},{"tags":["python","django","foursquare","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":75,"score":1,"question_id":12958702,"title":"Tastypie: How can I fill the resource without database?","body":"<p>I want to grab some information from Foursquare , add some fields and return it via django-tastypie. \nUPDATE:</p>\n\n<pre><code>def obj_get_list(self, request=None, **kwargs):\n    near = ''\n    if 'near' in request.GET and request.GET['near']:\n        near = request.GET['near']\n    if 'q' in request.GET and request.GET['q']:\n        q = request.GET['q']\n\n    client = foursquare.Foursquare(client_id=settings.FSQ_CLIENT_ID, client_secret=settings.FSQ_CLIENT_SECRET)\n\n    a = client.venues.search(params={'query': q, 'near' : near, 'categoryId' : '4d4b7105d754a06374d81259' })\n\n    objects = []\n\n    for venue in a['venues']:\n        bundle = self.build_bundle(obj=venue, request=request)\n        bundle = self.full_dehydrate(bundle)\n        objects.append(bundle)\n\n    return objects\n</code></pre>\n\n<p>Now I am getting:</p>\n\n<pre><code>{\n  \"meta\": {\n    \"limit\": 20,\n    \"next\": \"/api/v1/venue/?q=Borek&amp;near=Kadikoy\",\n    \"offset\": 0,\n    \"previous\": null,\n    \"total_count\": 30\n  },\n  \"objects\": [\n    {\n      \"resource_uri\": \"\"\n    },\n    {\n      \"resource_uri\": \"\"\n    }]\n}\n</code></pre>\n\n<p>There are 2 empty objects. What should I do in order to fill this resource? </p>\n"},{"tags":["django","heroku"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":146,"score":2,"question_id":9566676,"title":"Django Debug Toolbar in Heroku","body":"<p>How can I use Django Debug Toolbar in Heroku when I don't know the IP address so this:</p>\n\n<pre><code>INTERNAL_IPS = ('127.0.0.1', )\n</code></pre>\n\n<p>Always fails.</p>\n"},{"tags":["python","django","templates","url","reverse"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":12983563,"title":"Django, url tag in template doesn't work: NoReverseMatch","body":"<p>I've encountered a problem with generating reverse url in templates in django. I'm trying to solve it since a few hours and I have no idea what the problem might be. URL reversing works great in models and views:</p>\n\n<pre><code># like this in models.py\n@models.permalink\n    def get_absolute_url(self):\n        return ('entry', (), {\n            'entry_id': self.entry.id,\n        })\n\n# or this in views.py\nreturn HttpResponseRedirect(reverse('entry',args=(entry_id,)))\n</code></pre>\n\n<p>but when I'm trying to make it in template I get such an error:</p>\n\n<blockquote>\n  <p>NoReverseMatch at /entry/1/ <br>\n  Reverse for ''add_comment'' with arguments '(1L,)' and keyword arguments '{}' not found.</p>\n</blockquote>\n\n<p>My file structure looks like this:</p>\n\n<pre><code>project/\n├── frontend\n│   ├── models.py\n│   ├── urls.py\n│   └── views.py\n├── settings.py\n├── templates\n│   ├── add_comment.html\n│   └── entry.html\n├── utils\n│   └── with_template.py\n└── wsgi.py\n</code></pre>\n\n<p>My urls.py:</p>\n\n<pre><code>from project.frontend.views import *\nfrom django.conf.urls import patterns, include, url\n\nurlpatterns = patterns('project.frontend.views',\n\n    url(r'^entry/(?P&lt;entry_id&gt;\\d+)/', 'entry', name=\"entry\"),\n    (r'^entry_list/', 'entry_list'),\n</code></pre>\n\n<p>Then entry_list.html:</p>\n\n<pre><code>{% extends \"base.html\" %}\n{% block content %}\n    {% for entry in entries %}\n            {% url 'entry' entry.id %}\n    {% endfor %}\n{% endblock %}\n</code></pre>\n\n<p>In views.py I have:</p>\n\n<pre><code>@with_template\ndef entry(request, entry_id):\n    entry = Entry.objects.get(id=entry_id)\n    entry.comments = entry.get_comments()\n    return locals()\n</code></pre>\n\n<p>where with_template is following decorator(but I don't think this is a case):</p>\n\n<pre><code>class TheWrapper(object):\n    def __init__(self, default_template_name):\n        self.default_template_name = default_template_name\n\n    def __call__(self, func):\n        def decorated_func(request, *args, **kwargs):\n            extra_context = kwargs.pop('extra_context', {})\n            dictionary = {}\n            ret = func(request, *args, **kwargs)\n            if isinstance(ret, HttpResponse):\n                return ret\n            dictionary.update(ret)\n            dictionary.update(extra_context)\n            return render_to_response(dictionary.get('template_name',\n                                                     self.default_template_name),\n                                      context_instance=RequestContext(request),\n                                      dictionary=dictionary)\n        update_wrapper(decorated_func, func)\n        return decorated_func\n\nif not callable(arg):\n    return TheWrapper(arg)\nelse:\n    default_template_name = ''.join([ arg.__name__, '.html'])\n    return TheWrapper(default_template_name)(arg)\n</code></pre>\n\n<p>Do you have any idea, what may cause the problem?\nGreat thanks in advance!</p>\n\n<hr>\n\n<p><strong>EDIT:</strong>\nI've just made an experiment. I commented everything I could leaving only:\nurls.py</p>\n\n<pre><code># -*- coding: UTF-8 -*-\nfrom justmetyou.frontend.views import *\nfrom django.conf.urls import patterns, include, url\nurlpatterns = patterns('justmetyou.frontend.views',\n    url(r'^entry/(?P&lt;entry_id&gt;\\d+)/', 'entry', name=\"entry\"),\n)\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code># -*- coding: UTF-8 -*-\nfrom justmetyou.frontend.models import *\nfrom django.shortcuts import render_to_response, get_object_or_404\ndef entry(request, entry_id):\n    entry = Entry.objects.get(id=entry_id)\n    return render_to_response('entry.html', {'entry':entry})\n</code></pre>\n\n<p>entry.html</p>\n\n<pre><code>{% extends \"base.html\" %}\n{% block content %}\n{% url 'entry' 1 %}\n{% endblock %}\n</code></pre>\n\n<p>And nothing changed. I'm getting the same error all the time.\nSo now I'm much more confused, because in this simple code everything looks fine. Do you think it is possible that it's a matter of external stuff like server or smth like this...? I don't have any idea...</p>\n"},{"tags":["django","django-forms","django-modelform"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":72,"score":2,"question_id":12984013,"title":"How to change empty_label for modelForm choice field?","body":"<p>I have a field in one of my models like the following:</p>\n\n<pre><code> payrollProvider = models.CharField(max_length=2, choices=PAYROLL_CHOICES)\n PAYROLL_CHOICES = (\n        ('C1', 'Choice1'),\n        ('C2', 'Choice2')\n        etc.....\n                    )\n</code></pre>\n\n<p>When I create a model form for this field, Django correctly generates an HTML select box, but includes a default blank value of \"---------\".</p>\n\n<p>I would like to know how to change this default value to some other text, such as \"please choose value\".</p>\n\n<p>I believe I should be able to set this in my model form's <strong>init</strong> via the following, as documented <a href=\"http://stackoverflow.com/questions/739260/customize-remove-django-select-box-blank-option\" title=\"this answer\">in this answer</a> and several others:</p>\n\n<pre><code>self.fields['payrollProvider'].empty_label = \"please choose value\"\n</code></pre>\n\n<p>However, this isn't working for me. When I include that line in my form's <strong>init</strong>, \"--------\" still shows up as the initial choice in the select box. I'm pasting the relevant forms.py below, but it seems that others have <a href=\"http://stackoverflow.com/questions/8928565/django-cant-remove-empty-label-from-typedchoicefield\">also been unable to access / modify empty_label</a>. At this link, the questioner describes a way to <em>delete</em> the default empty_label value (which I was able to do successfully via his method) but what I really want to do is to <em>modify</em> the empty_label that is displayed.</p>\n\n<p>Any ideas?</p>\n\n<p>Here's the code for the form in forms.py, with the empty_label code that isn't successful at changing the default \"----------\":</p>\n\n<pre><code>class PayrollCredentialForm(forms.ModelForm):\n    def __init__(self, *args, **kwargs):\n        super(PayrollCredentialForm, self).__init__(*args, **kwargs)\n        self.fields['payrollUsername'].widget.attrs.update({'class' : 'yp-signup'})\n        self.fields['payrollPassword'].widget.attrs.update({'class' : 'yp-signup'})\n        self.fields['payrollProvider'].widget.attrs.update({'class' : 'yp-signup'})\n        self.fields['payrollUsername'].widget.attrs.update({'placeholder' : '  Payroll Username'})\n        self.fields['payrollPassword'].widget.attrs.update({'placeholder' : '  Payroll Password'})\n        self.fields['payrollProvider'].empty_label = \"please choose value\"\n\n\nclass Meta:\n    model = Company\n    fields = ('payrollProvider', 'payrollUsername', 'payrollPassword')\n    widgets = {\n        'payrollPassword': forms.PasswordInput(),\n    }\n</code></pre>\n"},{"tags":["python","django","django-models","django-forms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12983771,"title":"can't import django_tables2l","body":"<p>Hi I am new at Django and I have tried my best to understand it but I still have a long way to go. I am working on a project in which I want to use django tables2 to create a HTML tables. I have been trying to import the django tables for days now and still no luck....Please help me.</p>\n\n<p>I get this error when trying to `import django_tables2</p>\n\n<pre><code>$ python\nPython 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import django_tables2\nTraceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nFile \"build\\bdist.win32\\egg\\django_tables2\\__init__.py\", line 3, in &lt;module&gt;\nFile \"build\\bdist.win32\\egg\\django_tables2\\tables.py\", line 4, in &lt;module&gt;\nFile \"c:\\Python27\\lib\\site-packages\\django\\db\\__init__.py\", line 11, in &lt;module&gt;\nif DEFAULT_DB_ALIAS not in settings.DATABASES:\nFile \"c:\\Python27\\lib\\site-packages\\django\\utils\\functional.py\", line 184, in inner\nself._setup()\nFile \"c:\\Python27\\lib\\site-packages\\django\\conf\\__init__.py\", line 40, in _setup\nraise ImportError(\"Settings cannot be imported, because environment variable %s is              undefined.\" % ENVIRONMENT_VARIABLE)\nImportError: Settings cannot be imported, because environment variable     DJANGO_SETTINGS_MODULE is undefined.\n</code></pre>\n\n<p>and when i import from forms.py i get error unresolved import. please please help me and show me step by step how to do it correctly.. thank you so much.</p>\n"},{"tags":["django","templates","tags"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":46,"score":-1,"question_id":12984285,"title":"Django Template tags","body":"<p>I am total newbie to Django. And I am having a hard time wrapping my head around the template tags used. I have looked at google and SO but they all assume some prior knowledge. I would be really grateful if you could direct me to some tutorials on them that are geared towards newbies. Thanks in advance.</p>\n"},{"tags":["django","nginx","dotcloud"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12983362,"title":"Nginx and Django on Dotcloud","body":"<p>I currently have a dotcloud app that uses django to serve everything. It works great, however, we recently had our site redone in angular.js, and I don't want to use django to serve the actual html pages (I want to just use nginx for that), but I want django to serve some links for the API we built for the angular code to use.</p>\n\n<p>Is it possible for me, in the same app, to configure nginx to serve some static files for particular urls, and have it send other urls for django to serve?</p>\n\n<p>I want nginx to serve my index.html page is a request comes in to wwww.example.com, but if a request for example.com/api/login/ comes in, I want that to be handled by django. Is this possible?</p>\n"},{"tags":["django","django-models","django-templates","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12982854,"title":"Django loading mysql data into template correctly","body":"<p>I'm new to django and I'm trying to get display a list of buildings and sort them alphabetically, then load it into an html document. Is there something that I am not doing correctly?</p>\n\n<p>below is models.py</p>\n\n<pre><code>class Class(models.Model):\n    building = models.CharField(max_length=20)\n    class Meta:\n        db_table = u'class'\n    def __unicode__(self):\n        return self.building\n</code></pre>\n\n<p>below is views.py</p>\n\n<pre><code>views.py\n\ndef index(request):\n    buildinglist = Class.objects.all().order_by('building')\n    c = {'buildinglist': buildinglist}\n    t = loader.get_template('index.html')\n    return HttpResponse(t.render(c))\n</code></pre>\n\n<p>below is index.html</p>\n\n<pre><code>index.html\n\n{% block content%}\n&lt;h3&gt;Buildings:&lt;/h3&gt;\n&lt;ul&gt;\n    {% for building in buildinglist %}\n        &lt;li&gt;\n            &lt;a href='www.{% building %}.com'&gt;\n                            # ex. www.searstower.com\n        &lt;/li&gt;\n    {% endfor %}\n&lt;/ul&gt;\n{% endblock %}\n</code></pre>\n\n<p>Can you guys point me in the right direction?\nThank you in advance guys! I appreciate your help very much.</p>\n"},{"tags":["python","django","pypi"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12970747,"title":"Keeping track of Django package updates","body":"<p>My Django application currently depends on quite a few Python and Django libraries and packages. </p>\n\n<p>I was wondering if there is an admin application that allows you to keep track of all the latest updates to packages on PyPi. This would be really convenient as it would allow you to keep an eye on updates which sometimes might be quite crucial i.e. security patches.</p>\n\n<p>Thanks.</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12981980,"title":"django redirect not working as expected","body":"<p>I have a view that either displays a form or a 'thank you' page (if the form submission was successful). I am using redirect with a url that I have tested working to display the thank-you page.</p>\n\n<pre><code>def form8(request):\n    form = UserInfoForm(request.POST or None)\n    if form.is_valid():\n        form.save()\n        return redirect('/sjwork/thanks')\n    return render(request, 'form8.html', {'form': form})\n</code></pre>\n\n<p>However, when the form is successfully submitted django give the error:</p>\n\n<pre><code>ViewDoesNotExist at /sjwork/form8\nCould not import views. Error was: No module named views\n</code></pre>\n\n<p>As said, I can go to localhost:8000/sjwork/thanks directly and it displays the thank-you page. According to documentation I can use a hard-coded url like this. I tried alternatives, too (giving the view, using a full url like <a href=\"http://google.com\" rel=\"nofollow\">http://google.com</a>) - nothing works. I must be missing something basic here. Would appreciate if someone can explain what is going on here. Thanks.</p>\n\n<p>The app 'sjwork' has the following in its urls.py:</p>\n\n<pre><code>url(r'^$', 'views.home', name='home'),\nurl(r'^thanks$', 'sjwork.views.thanks'),\nurl(r'^form8$', 'sjwork.views.form8', name='form8'),\n</code></pre>\n\n<p>whereas the project urls.py contains:</p>\n\n<pre><code>url(r'^sjwork/', include('formtest.sjwork.urls')),\n</code></pre>\n"},{"tags":["django","gunicorn"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":182,"score":1,"question_id":12449172,"title":"How to debug gunicorn failure issues?(Worker failed to boot)","body":"<ul>\n<li>I have a django web application that uses gunicorn and runs good locally, but when I deploy app on EC2, i see that gunicorn is failing</li>\n</ul>\n\n<blockquote>\n<pre><code>$ gunicorn_django -b 127.0.0.1:8000 --settings=myapp.settings.dev --debug --log-level info\n2012-09-16 17:39:24 [28333] [INFO] Starting gunicorn 0.14.6\n2012-09-16 17:39:24 [28333] [INFO] Listening at: http://127.0.0.1:8000 (28333)\n2012-09-16 17:39:24 [28333] [INFO] Using worker: sync\n2012-09-16 17:39:24 [28336] [INFO] Booting worker with pid: 28336\n2012-09-16 17:39:24 [28336] [INFO] Worker exiting (pid: 28336)\n2012-09-16 17:39:24 [28333] [INFO] Shutting down: Master\n2012-09-16 17:39:24 [28333] [INFO] Reason: Worker failed to boot.\n</code></pre>\n</blockquote>\n\n<p>I tried logging with <code>--spew</code> but it keeps on running and no error is shown, How can I debug this issue?</p>\n"},{"tags":["python","django","google-app-engine","timeout"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":2822,"score":2,"question_id":2162115,"title":"How to set timeout for urlfetch in Google App Engine?","body":"<p>I'm trying to have Django (on top of GAE) fetch data from another web service. I'm often hit with error like this:</p>\n\n<blockquote>\n  <p>ApplicationError: 2 timed out Request</p>\n  \n  <p>Method:   GET</p>\n  \n  <p>Request URL:http://localhost:8080/</p>\n  \n  <p>Exception Type:    DownloadError</p>\n  \n  <p>Exception Value: ApplicationError: 2 timed out</p>\n  \n  <p>Exception Location: /google_appengine/google/appengine/api/urlfetch.py in _get_fetch_result, line 325</p>\n</blockquote>\n\n<p>It feels as if it will time out only after 12 seconds (I'm not sure, but it's really short).</p>\n\n<p><strong>Question: how can I set a longer timeout?</strong></p>\n"},{"tags":["python","windows","django","django-admin"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":3773,"score":4,"question_id":843383,"title":"Why is django giving error: no module named django.core?","body":"<p>I get the error in question when I attempt to create a project. I followed the instructions found at <a href=\"http://i.justrealized.com/2008/04/08/how-to-install-python-and-django-in-windows-vista/\" rel=\"nofollow\">how to install python an django in windows vista</a>.</p>\n"},{"tags":["python","django","geolocation"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":12942894,"title":"How to get Address from Latitude & Longitude in Django GeoIP?","body":"<p>I cannot see anything in their API to do this:\n<a href=\"https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoip/#geoip-api\" rel=\"nofollow\">https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoip/#geoip-api</a></p>\n\n<p>Or should I just use Google API for Reverse Geocoding?</p>\n"},{"tags":["django","orm"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12978915,"title":"Django ORM join with another table","body":"<p>I have a table known as <code>messages</code>. In my application, users can send different <em>type</em> of messages. Like forwarding an event, etc. As such, I have columns <code>type</code> and <code>value</code> in that table.</p>\n\n<p>What I want to do is for a particular <code>type</code>, goto a particular table and make sure the <code>value</code> is valid (typically this maps to the <code>id</code> of that table). There could be multiple types, and each one has to be mapped to a different table. Is there a way to logically write this in the built in django ORM? Right now I'm only seeing this feasible if I use straight SQL, which I would rather not if I can get away with it...</p>\n\n<p>Right now I'm doing something like:</p>\n\n<pre><code>Messages.objects.all().filter(Q(user_id=id))...etc\n</code></pre>\n\n<p>I want to add to the statement above checking the <code>type</code> and for the particular <code>type</code>, check the table associated with it.</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":55,"score":3,"question_id":12979425,"title":"Averaging scores in database (Django)","body":"<p>I have a database <code>Result.objects.all()</code> of around 15 objects. Result has a field called score which ranges from 1-5. So if I preform <code>q = Result.objecets.get(id=1)</code>, <code>q.score</code> is 2.\nWhat's a method of finding the average of all scores for all 15 objects?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":93,"score":0,"question_id":12945089,"title":"Get January 1st of next year","body":"<p>This really shouldn't be this hard but for some reason I can't seem to get it.</p>\n\n<p>I am trying to run a filter on my query that compares the date range between today, and the first day of next year.</p>\n\n<p>Getting today is no problem, but I can't seem to get the first day of next year.  I want to be able to provide myself with Jan 1/2013</p>\n\n<p>Here is my filter so far:</p>\n\n<pre><code>cur_il = Investment.objects.all().filter(plan = plan).order_by('financial_institution').filter(maturity_date__range=[now, nextyear])\n</code></pre>\n\n<p>Obviously I use this to get today's date:</p>\n\n<pre><code>now = datetime.now()\n</code></pre>\n\n<p>How can I get the next date?</p>\n"},{"tags":["django","subquery"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12979055,"title":"subquery in django","body":"<p>I have 2 models:</p>\n\n<pre><code>class Professors(models.Model):\n    professors_name = models.CharField('professor', max_length=32, unique=True)\nclass Discipline(models.Model):\n    auditorium = models.IntegerField('auditorium')\n    professors_name = models.ForeignKey(Professors)\n</code></pre>\n\n<p>In views:</p>\n\n<pre><code>disciplines = Discipline.objects.all()\n</code></pre>\n\n<p>So, I have number of auditorium and professors_name_id. But I need full profrssors name, not id. How to do it?</p>\n"},{"tags":["python","django","development-server"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":346,"score":2,"question_id":6007660,"title":"When and why to use Django development server?","body":"<p>I understand that it's simple and doesn't require any installation whatsoever, but are there any other reasons to use it for long-term development instead of Apache with mod_wsgi? As a Django newbie, I just find deployment from development to live (Apache) environment quite cumbersome and annoying, so the question that comes into my mind is: Isn't it simpler to just use mod_wsgi on localhost too? Only mention about this in <a href=\"http://docs.djangoproject.com/en/dev/intro/tutorial01/\" rel=\"nofollow\">Django manual</a> I found was:</p>\n\n<blockquote>\n  <p>We've included this with Django so you\n  can develop things rapidly, without\n  having to deal with configuring a\n  production server -- such as Apache --\n  until you're ready for production.</p>\n</blockquote>\n"},{"tags":["django","django-urls"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":42,"score":0,"question_id":12978062,"title":"Django URL (Page Not Found)","body":"<p>Just starting out with Django and figuring out the URL dispatcher. From what I can see in the docs the following regular expression should catch <code>news/story/2012/10/23/this-is-my-first-story</code></p>\n\n<pre><code>urlpatterns = patterns('news.views',\n    url(r'^$', 'index'),\n    url(r'^news/story/(?P&lt;year&gt;\\d{4})/(?P&lt;month&gt;\\d){2}/(?P&lt;day&gt;\\d){2}/(?P&lt;title_key&gt;\\w+)/$', 'story'),\n)\n</code></pre>\n\n<p>However, I am getting the following error...</p>\n\n<pre><code>&gt; Using the URLconf defined in mysite.urls, Django tried these URL\n&gt; patterns, in this order: ^polls/ ^news/ ^$ ^news/\n&gt; ^news/story/(?P&lt;year&gt;\\d)/(?P&lt;month&gt;\\d)/(?P&lt;day&gt;\\d)/(?P&lt;title_key&gt;\\d)/$\n&gt; ^admin/doc/ ^admin/ The current URL,\n&gt; news/story/2012/10/23/this-is-my-first-story, didn't match any of\n&gt; these.\n</code></pre>\n\n<p>These are not my choice of URLS. Following a legacy system and making a proof of concept.</p>\n"},{"tags":["django","django-models"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12945339,"title":"Is this the way to validate Django model fields?","body":"<p>As I understand it, when one creates a Django application, data is validated by the form before it's inserted into a model instance which is then written to the database.  But if I want to create an additional layer of protection at the data model layer, is what I've done below the current \"best practice?\"  I'm trying to ensure that a reviewer's name cannot be omitted nor be left blank.  Should I be putting any custom validation in the 'clean' method as I've done here and then have 'save' call 'full_clean\" which calls 'clean'?  If not, what's the preferred method?  Thanks.</p>\n\n<pre><code>class Reviewer(models.Model):\n    name = models.CharField(max_length=128, default=None)\n\n    def clean(self, *args, **kwargs):\n        if self.name == '':\n            raise ValidationError('Reviewer name cannot be blank')\n        super(Reviewer, self).clean(*args, **kwargs)\n\n    def full_clean(self, *args, **kwargs):\n        return self.clean(*args, **kwargs)\n\n    def save(self, *args, **kwargs):\n        self.full_clean()\n        super(Reviewer, self).save(*args, **kwargs)\n</code></pre>\n"},{"tags":["python","django","elasticsearch","django-haystack"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12280932,"title":"Django Haystack - are facets limited to 10?","body":"<p>I'm indexing a list of products and each product has a list of categories. Categories are about 1000.</p>\n\n<p>In the search page I would like to list <strong>all</strong> the categories which have more than 1 result.</p>\n\n<hr>\n\n<p>I'm collecting facets with:</p>\n\n<pre><code>results.facet_counts()\n</code></pre>\n\n<p><strong>Unfortunately this just returns the top 10 categories!</strong> </p>\n\n<p>I can't seem to find a way to have it return more.</p>\n\n<hr>\n\n<p>I'm using the latest version of <strong>Haystack</strong> and <strong>ElasticSearch</strong>.</p>\n\n<hr>\n\n<p>Hope someone can help! :) </p>\n"},{"tags":["django","forms","twitter-bootstrap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12976420,"title":"Twitter Bootstrap's \".input-prepend\" with a Django Form","body":"<p>I'm new to Django and have been using <a href=\"https://github.com/tzangms/django-bootstrap-form\" rel=\"nofollow\">django-bootstrap-form</a>. I've been pretty happy with it, but I don't believe it provides a way to format the output for \".input-prepend\" as described in <a href=\"http://twitter.github.com/bootstrap/base-css.html#prependedInput\" rel=\"nofollow\">Twitter Bootstrap's docs</a>.</p>\n\n<p>I'm guessing I'm going to have to override my input field's widget for this particular field. I'm not sure of the best way to do this, though. Any help would be appreciated.</p>\n"},{"tags":["django","django-models","django-admin"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":415,"score":1,"question_id":12971774,"title":"Django: Issues with extending User model","body":"<p>I'm trying to add fields to the User model and add them to the admin page. There is a recommended method in the django docs here:</p>\n\n<p><a href=\"https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users\" rel=\"nofollow\">https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users</a></p>\n\n<p>So, I created a OneToOne field for my new model:</p>\n\n<pre><code>from django.contrib.auth.models import User\n\nclass UserProfile(models.Model):\n    user = models.OneToOneField(User)\n    designs = models.ManyToManyField('Design', blank=True)\n    prints = models.ManyToManyField('Print', blank=True)\n    rating = models.IntegerField(null=True, blank=True)\n    reliability = models.IntegerField(null=True, blank=True)\n    av_lead_time = models.IntegerField(null=True, blank=True)\n</code></pre>\n\n<p>Added an AUTH_PROFILE_MODULE to settings.py:</p>\n\n<pre><code>AUTH_PROFILE_MODULE = 'website.UserProfile'\n</code></pre>\n\n<p>Tried to add the UserProfile fields to the admin page:</p>\n\n<pre><code>from django.contrib import admin\nfrom django.contrib.auth.admin import UserAdmin\nfrom website.models import UserProfile\nfrom django.contrib.auth.models import User\n\n# Define an inline admin descriptor for UserProfile model\n# which acts a bit like a singleton\nclass UserProfileInline(admin.StackedInline):\n    model = UserProfile\n    can_delete = False\n    verbose_name_plural = 'profile'\n\n# Define a new User admin\nclass UserAdmin(UserAdmin):\n    inlines = (UserProfileInline, )\n\n# Re-register UserAdmin\nadmin.site.unregister(User)\nadmin.site.register(User, UserAdmin)\n</code></pre>\n\n<p>Now, when I try to access a registered user via the admin menu, I get:</p>\n\n<pre><code>Caught DoesNotExist while rendering: User matching query does not exist.\nIn template /usr/local/lib/python2.7/dist-packages/django/contrib/admin/templates/admin/includes/fieldset.html, error at line 19\n19            {{ field.field }}\n</code></pre>\n\n<p>And when I try to add a new user via the admin menu, I get:</p>\n\n<pre><code>Caught DoesNotExist while rendering: User matching query does not exist.\nIn template /usr/local/lib/python2.7/dist-packages/django/contrib/admin/templates/admin/includes/fieldset.html, error at line 19\n19            {{ field.field }}\n</code></pre>\n\n<p>Why doesn't it recognise that particular field?</p>\n"},{"tags":["python","django","django-models","django-admin"],"answer_count":3,"favorite_count":11,"up_vote_count":7,"down_vote_count":0,"view_count":3489,"score":7,"question_id":855816,"title":"Auto-populating created_by field with Django admin site","body":"<p>I want to use the Django admin interface for a very simple web application but I can't get around a problem that should not be that hard to resolve ..</p>\n\n<p>Consider the following:</p>\n\n<pre><code>class Contact(models.Model):\n    name = models.CharField(max_length=250, blank=False)\n    created_by = models.ForeignKey(User, blank=False)\n</code></pre>\n\n<p>I can't find a way to auto-populate the created_by field and make the Django admin aware of it. Most of the method I've seen implies overloading the Object's save method and pass it the request user. They all requires to build your custom views and/or forms.</p>\n\n<p>Optimally the form to create new contacts <em>in the admin site</em> should not show the created_by field (which is quite easy) and auto-populate it with the current user (which seems harder than it should).</p>\n"},{"tags":["django","django-models","django-forms","django-admin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12051470,"title":"Django: Setting current user on a model to use in InlineModelAdmin","body":"<p>I have some models like that:</p>\n\n<pre><code>class BaseModel(models.Model):\n    created_by = models.ForeignKey(User, related_name=\"%(app_label)s_%(class)s_created\")\n    created_date = models.DateTimeField(_('Added date'), auto_now_add=True)\n    last_updated_by = models.ForeignKey(User, related_name=\"%(app_label)s_%(class)s_updated\")\n    last_updated_date = models.DateTimeField(_('Last update date'), auto_now=True)\n\n    class Meta:\n        abstract = True\n\nclass Image(BaseModel):\n    content_type = models.ForeignKey(ContentType)\n    object_id = models.PositiveIntegerField()\n    content_object = generic.GenericForeignKey('content_type', 'object_id')\n\n    name = models.CharField(_('Item name'), max_length=200, blank=True)\n    image = models.ImageField(_('Image'), upload_to=get_upload_path)\n\n    def save(self, *args, **kwargs):\n        if self.image and not GALLERY_ORIGINAL_IMAGESIZE == 0:\n            width, height = GALLERY_ORIGINAL_IMAGESIZE.split('x')\n            super(Image, self).save(*args, **kwargs)\n\n            filename = os.path.join( settings.MEDIA_ROOT, self.image.name )\n            image = PILImage.open(filename)\n\n            image.thumbnail((int(width), int(height)), PILImage.ANTIALIAS)\n            image.save(filename)\n\n        super(Image, self).save(*args, **kwargs)\n\nclass Album(BaseModel):\n    name = models.CharField(_('Album Name'), max_length=200)\n    description = models.TextField(_('Description'), blank=True)\n    slug = models.SlugField(_('Slug'), max_length=200, blank=True)\n    status = models.SmallIntegerField(_('Status'),choices=ALBUM_STATUSES)\n\n    images = generic.GenericRelation(Image)\n</code></pre>\n\n<p>I use BaseModel abstract model for my all models to track save and update logs. I can use ModelAdmin class to set user fields automatically:</p>\n\n<pre><code>class BaseAdmin(admin.ModelAdmin):\n    def save_model(self, request, obj, form, change):\n        if not change:\n            obj.created_by = request.user\n\n        obj.last_updated_by = request.user\n        obj.save()\n\n\nclass AlbumAdmin(BaseAdmin):\n    prepopulated_fields = {\"slug\": (\"name\",)}\n    list_display = ('id','name')\n    ordering = ('id',)\n</code></pre>\n\n<p>That works. All BaseAdmin fields are filled automatically. But I want to add Images to Albums by Inline. So, I change my admin.py like that:</p>\n\n<pre><code>from django.contrib.contenttypes import generic\n\nclass ImageInline(generic.GenericTabularInline):\n    model = Image\n    extra = 1\n\nclass AlbumAdmin(BaseAdmin):\n    prepopulated_fields = {\"slug\": (\"name\",)}\n    list_display = ('id','name')\n    ordering = ('id',)\n\n    inlines = [ImageInline,]\n</code></pre>\n\n<p>When I save page, I get an error: <code>gallery_image.created_by_id may not be NULL</code> on first <code>super(Image, self).save(*args, **kwargs)</code> row of Image model save method. I know it's because of GenericTabularInline class doesn't have a \"save_model\" method to override.</p>\n\n<p>So, the question is, how can I override save method and set current user on InlineModelAdmin classes?</p>\n"},{"tags":["django","amazon-s3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12975228,"title":"Download files from Amazon S3 with Django","body":"<p>I have a Django app that allows users to download MP3 files that they purchased and these MP3 files are hosted in Amazon S3. How can I force a download when users click a \"download\" button without allowing them to see the original link (to Amazon)? \nI have a view that downloads the file but the file is corrupt.\nHere is how it looks like:</p>\n\n<pre><code>def download(request):\n    filename = 'https://s3-eu-west-1.amazonaws.com/skempi/Ihsahn/04-emancipation-qtxmp3.mp3'\n    response = HttpResponse(mimetype='application/force-download')\n    response['Content-Disposition']='attachment;filename=\"%s\"'%filename\n    response[\"X-Sendfile\"] = filename\n    return response\n</code></pre>\n"},{"tags":["django","query","optimization","foreign-keys","generic-foreign-key"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":106,"score":2,"question_id":12466945,"title":"django: prefetch related objects of a GenericForeignKey","body":"<p>Suppose I have a model <code>Box</code> with a <code>GenericForeignKey</code> that points to either an <code>Apple</code> instance or a <code>Chocolate</code> instance. <code>Apple</code> and <code>Chocolate</code>, in turn, have ForeignKeys to <code>Farm</code> and <code>Factory</code>, respectively. I want to display a list of <code>Box</code>es, for which I need to access <code>Farm</code> and <code>Factory</code>. How do I do this in as few DB queries as possible?</p>\n\n<p>Minimal illustrative example:</p>\n\n<pre><code>class Farm(Model):\n    ...\n\nclass Apple(Model):\n    farm = ForeignKey(Farm)\n    ...\n\nclass Factory(Model):\n    ...\n\nclass Chocolate(Model):\n    factory = ForeignKey(Factory)\n    ...\n\nclass Box(Model)\n    content_type = ForeignKey(ContentType)\n    object_id = PositiveIntegerField()\n    content_object = GenericForeignKey('content_type', 'object_id')\n    ...\n\n    def __unicode__(self):\n        if self.content_type == ContentType.objects.get_for_model(Apple):\n            apple = self.content_object\n            return \"Apple {} from Farm {}\".format(apple, apple.farm)\n        elif self.content_type == ContentType.objects.get_for_model(Chocolate):\n            chocolate = self.content_object\n            return \"Chocolate {} from Factory {}\".format(chocolate, chocolate.factory)\n</code></pre>\n\n<p>Here are a few things I tried. In all these examples, <strong>N</strong> is the number of Boxes. The query count assumes that the <code>ContentType</code>s for <code>Apple</code> and <code>Chocolate</code> have already been cached, so the <code>get_for_model()</code> calls do not hit the DB.</p>\n\n<p>1) Naive:</p>\n\n<p><code>print [box for box in Box.objects.all()]</code></p>\n\n<p>This does <strong>1</strong> (fetch Boxes) + <strong>N</strong> (fetch Apple or Chocolate for each Box) + <strong>N</strong> (fetch Farm for each Apple and Factory for each Chocolate) queries.</p>\n\n<p>2) <code>select_related</code> doesn't help here, because <code>Box.content_object</code> is a <code>GenericForeignKey</code>.</p>\n\n<p>3) As of django 1.4, <code>prefetch_related</code> can fetch <code>GenericForeignKey</code>s.</p>\n\n<p><code>print [box for box in Box.objects.prefetch_related('content_object').all()]</code></p>\n\n<p>This does <strong>1</strong> (fetch Boxes) + <strong>2</strong> (fetch Apples and Chocolates for all Boxes) + <strong>N</strong> (fetch Farm for each Apple and Factory for each Chocolate) queries.</p>\n\n<p>4) Apparently <code>prefetch_related</code> isn't smart enough to follow ForeignKeys of GenericForeignKeys. If I try:</p>\n\n<p><code>print [box for box in Box.objects.prefetch_related(\n    'content_object__farm',\n    'content_object__factory').all()]</code></p>\n\n<p>it rightfully complains that <code>Chocolate</code> objects don't have a <code>farm</code> field, and vice versa.</p>\n\n<p>5) I could do:</p>\n\n<pre><code>apple_ctype = ContentType.objects.get_for_model(Apple)\nchocolate_ctype = ContentType.objects.get_for_model(Chocolate)\nboxes_with_apples = Box.objects.filter(content_type=apple_ctype).prefetch_related('content_object__farm')\nboxes_with_chocolates = Box.objects.filter(content_type=chocolate_ctype).prefetch_related('content_object__factory')\n</code></pre>\n\n<p>This does <strong>1</strong> (fetch Boxes) + <strong>2</strong> (fetch Apples and Chocolates for all Boxes) + <strong>2</strong> (fetch Farms for all Apples and Factories for all Chocolates) queries. The downside is that I have to merge and sort the two querysets (<code>boxes_with_apples</code>, <code>boxes_with_chocolates</code>) manually. In my real application, I'm displaying these Boxes in a paginated ModelAdmin. It's not obvious how to integrate this solution there. Maybe I could write a custom Paginator to do this caching transparently?</p>\n\n<p>6) I could cobble together something based on <a href=\"http://blog.roseman.org.uk/2010/02/22/django-patterns-part-4-forwards-generic-relations/\" rel=\"nofollow\">this</a> that also does O(1) queries. But I'd rather not mess with internals (<code>_content_object_cache</code>) if I can avoid it.</p>\n\n<p>In summary: <strong>Printing a Box requires access to the ForeignKeys of a GenericForeignKey. How can I print N Boxes in O(1) queries?</strong> Is (5) the best I can do, or is there a simpler solution?</p>\n\n<p>Bonus points: <strong>How would you refactor this DB schema to make such queries easier?</strong></p>\n"},{"tags":["mysql","database","django","sqlite","migration"],"answer_count":2,"favorite_count":6,"up_vote_count":5,"down_vote_count":0,"view_count":945,"score":5,"question_id":3034910,"title":"What's the best way to migrate a Django DB from SQLite to MySQL?","body":"<p>I need to migrate my db from sqlite to mysql, and the various tools/scripts out there are too many for me to easily spot the safest and most elegant solution.</p>\n\n<p>This seemed to me nice <a href=\"http://djangosnippets.org/snippets/14/\">http://djangosnippets.org/snippets/14/</a> but appears to be 3 years since getting an update which is worrying..</p>\n\n<p>Can you recommend a solution that is known to be reliable with Django 1.1.1 ? </p>\n"},{"tags":["django","django-models","database-migration"],"answer_count":4,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":878,"score":1,"question_id":4544419,"title":"How to migrate Django models from mysql to sqlite (or between any two database systems)?","body":"<p>I have a Django deployment in production that uses MySQL.</p>\n\n<p>I would like to do further development with SQLite, so I would like to import my existing data to an SQLite database. I </p>\n\n<p>There is a shell script <a href=\"http://stackoverflow.com/questions/489277/script-to-convert-mysql-dump-sql-file-into-format-that-can-be-imported-into-sqlit\">here</a> to convert a general MySQL dump to SQLite, but it didn't work for me (apparently the general problem isn't easy). </p>\n\n<p>I figured doing this using the Django models must be much easier. How would you do this? Does anyone have any script to do this? </p>\n"},{"tags":["django","facebook","facebook-graph-api","facebook-opengraph","fandjango"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":180,"score":0,"question_id":11485470,"title":"How should I get Open Graph JSON object to pass in facepy class","body":"<p>I am trying to configure Open Graph in my app such that, when ever a person click a \"link\" in it, the app should \"post\" it on his feeds/ timeline/ activity. (<em><code>I created open graph actions for these features and successfully added meta tags in the page</code></em>).</p>\n\n<p>So, I am using <code>fandjango</code> and <code>facepy</code> to do this job.</p>\n\n<p>This is how my code looks..</p>\n\n<pre><code>from facepy import GraphAPI\n\n@csrf_exempt\n@facebook_authorization_required(permissions=[\"publish_actions\"])\ndef ViewPage (request):\n    access_token = request.facebook.user.oauth_token\n    profile_id = request.facebook.user.facebook_id\n    path = \"/%d/feed\" %profile_id\n\n    # How should I get the OpenGraph JSON obj\n    og_data = ??\n    graph = GraphAPI(access_token)\n    graph.post(path, og_data)\n    ...\n    return render_to_response(\"view.html\", context)\n</code></pre>\n\n<p>How should I get the open graph JSON obj to pass in the above <code>graph</code> object as parameter so as to post data in feeds/ timeline/ activity?</p>\n\n<p>If this is not the way, how should I do it?</p>\n\n<p><strong>Edit 1:</strong></p>\n\n<p>when I tried </p>\n\n<pre><code>graph = GraphAPI(request.facebook.user.oauth_token)\ngraph.post(\"me/namespace:action\")\n\nIt showed me `OAuthError` \nError Loc: C:\\Python27\\lib\\site-packages\\facepy\\graph_api.py in _parse, line 274\n\n\ngraph = GraphAPI(request.facebook.user.oauth_token)\ngraph.post(\"me/namespace:action\", \"object type\")\n\nIt showed me `TypeError`\nloc: same as previous\n</code></pre>\n\n<p><strong>Edit 2:</strong></p>\n\n<p>Instead to using <code>request.facebook.user.oauth_token</code>, I directly used my <a href=\"https://developers.facebook.com/tools/access_token/\" rel=\"nofollow\"><code>access token</code></a> and the code worked..</p>\n\n<pre><code>graph = GraphAPI (my-hard-coded-access-token)\ngraph.post(\"me/feed\", message = \"working!\")\n</code></pre>\n\n<p>However, when I tried </p>\n\n<pre><code>graph.post(\"me/news.reads\", article=\"working\")\n\nIt showed me error. \n</code></pre>\n"},{"tags":["database","django","postgresql","database-design","database-schema"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12970892,"title":"django and postgresql: how to handle triggers and functions version control","body":"<p>There is this nice app called south for Managing database schema and data migrations. But it is not enough any more. So i wanted to ask, if and how have other django developers handled database functions, views and database table trigger changes and their versioning?</p>\n\n<p>How have you handled cases where some trigger, function or view has changed in old database but only certain database changes need to transfer from development base to test base?</p>\n\n<p>Alan</p>\n"},{"tags":["django","queryset"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12974352,"title":"Django queryset and select_related()","body":"<p>I have a small probleme concerning django querysets and select_related.</p>\n\n<p>With this model :</p>\n\n<pre><code>class DeviceGroup(models.Model):\n  name = models.CharField(max_length=255, unique=True)\n  owner = models.ForeignKey(User)\n\nclass Device(models.Model):\n  name = models.CharField(max_length=255)\n  address = models.GenericIPAddressField()\n  port = models.IntegerField()\n  group =    models.ForeignKey(DeviceGroup)\n\nclass Sensor(models.Model):\n  device = models.ForeignKey(Device)\n</code></pre>\n\n<p>I'd like to get a list like :</p>\n\n<pre><code>- group 1\n  - device 1\n  - device 2\n  - device 3\n    -sensor 1\n- group 2\n- group 3\n  - device 4\n  - device 5\n    - sensor 2\n</code></pre>\n\n<p>I've read the doc about select_related(), but I don't know how to do because I've to start my query bu group cause, it's directly linked to logged user.</p>\n"},{"tags":["django","orm","filter","prefetch"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12973929,"title":"Why does django's prefetch_related() only work with all() and not filter()?","body":"<p>suppose I have this model:</p>\n\n<pre><code>class PhotoAlbum(models.Model):\n    title = models.CharField(max_length=128)\n    author = models.CharField(max_length=128)\n\nclass Photo(models.Model):\n    album = models.ForeignKey('PhotoAlbum')\n    format = models.IntegerField()\n</code></pre>\n\n<p>Now if I want to look at a subset of photos in a subset of albums efficiently. I do it something like this:</p>\n\n<pre><code>someAlbums = PhotoAlbum.objects.filter(author=\"Davey Jones\").prefetch_related(\"photo_set\")\nfor a in someAlbums:\n    somePhotos = a.photo_set.all()\n</code></pre>\n\n<p>This does only two queries, which is what I expect (one to get the albums, and then one like `SELECT * IN photos WHERE photoalbum_id IN ().</p>\n\n<p>Everything is great.</p>\n\n<p>But if I do this:</p>\n\n<pre><code>someAlbums = PhotoAlbum.objects.filter(author=\"Davey Jones\").prefetch_related(\"photo_set\")\nfor a in someAlbums:\n    somePhotos = a.photo_set.filter(format=1)\n</code></pre>\n\n<p>Then it does a ton of queries with <code>WHERE format = 1</code>! Am I doing something wrong or is django now smart enough to realise it has already fetched all the photos and can filter them in python? I swear I read somewhere in the documentation that it is supposed to do that...</p>\n"},{"tags":["django","django-facebook"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12975512,"title":"Django facebook on user login","body":"<p>I'm using django-facebook and I'm wondering how would a view look when the user signs up for the first time. I've seen these <a href=\"https://github.com/tschellenbach/Django-facebook#signals\" rel=\"nofollow\">Signals</a> but I'm don't know how to use them, some errors appear.</p>\n\n<p>The idea is, when the user signs up for the first time instead of only redirecting him to the previous page a popup with form to appear with his user info retrieved from facebook.</p>\n"},{"tags":["ajax","django","twitter-bootstrap","modal","django-crispy-forms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":139,"score":0,"question_id":12936270,"title":"AJAX feedback form using django crispy forms in Bootstrap Modal","body":"<p>There are quite a few moving parts to this question, but if you have any insight to any piece of it, it would be appreciated.</p>\n\n<p>I want to build a feedback form that acts as one would expect.  When the user clicks the feedback button at the bottom right of the page, it launches a bootstrap modal.  The modal has a django crispy form that submits or returns the fields that are invalid when the submit button is pressed.</p>\n\n<p>First, I have my feedback button:</p>\n\n<pre><code>{% load crispy_forms_tags %}\n\n.feedback-button {\n    position: fixed;\n    bottom: 0;\n    right: 30px;\n}\n\n&lt;div class='feedback-button'&gt;\n    &lt;a class=\"btn btn-info\" href=\"#feedbackModal\" data-toggle=\"modal\" title=\"Leave feedback\" target=\"_blank\"&gt;\n        &lt;i class=\"icon-comment icon-white\"&gt;&lt;/i&gt;\n        Leave feedback\n    &lt;/a&gt;\n&lt;/div&gt;\n&lt;div class=\"modal hide\" id=\"feedbackModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"feedbackModalLabel\" aria-hidden=\"true\"&gt;\n    &lt;div class=\"modal-header\"&gt;\n        &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"&gt;x&lt;/button&gt;\n        &lt;h3 id=\"feedbackModalLabel\"&gt;Contact Form&lt;/h3&gt;\n    &lt;/div&gt;\n    &lt;div class=\"modal-body\"&gt;\n        {% crispy feedback_form feedback_form.helper %}\n    &lt;/div&gt;\n    &lt;div class=\"modal-footer\"&gt;\n        &lt;button class=\"btn\" data-dismiss=\"modal\" aria-hidden=\"true\"&gt;Close&lt;/button&gt;\n        &lt;button class=\"btn btn-primary\"&gt;Submit&lt;/button&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Next, I have my form:</p>\n\n<pre><code>class Feedback(models.Model):\n    creation_date = models.DateTimeField(\"Creation Date\", default=datetime.now)\n    topic = models.CharField(\"Topic\", choices = TOPIC_CHOICES, max_length=50)\n    subject = models.CharField(\"Subject\", max_length=100)\n    message = models.TextField(\"Message\", blank=True)\n    sender = models.CharField(\"Sender\", max_length=50, blank=True, null=True)\n\n    def __unicode__(self):\n        return \"%s - %s\" % (self.subject, self.creation_date)\n\n    class Meta:\n            ordering = [\"creation_date\"]\n        verbose_name = \"Feedback\"\n        verbose_name_plural = \"Feedback\"\n\nclass Crispy_ContactForm(forms.ModelForm):\n\n    def __init__(self, *args, **kwargs):\n        self.helper = FormHelper()\n        self.helper.layout = Layout(\n            Fieldset(\n                Field('topic', placeholder='Topic', css_class='input-medium'),\n                Field('subject', placeholder='Subject', css_class='input-xlarge'),\n                Field('message', placeholder='Message', rows='5', css_class='input-xlarge'),\n                Field('sender', placeholder='Sender', css_class='input-xlarge'),\n            ),\n        )\n        self.helper.form_id = 'id-Crispy_ContactForm'\n        self.helper.form_method = 'post'\n\n        super(Crispy_ContactForm, self).__init__(*args, **kwargs)\n\n    class Meta:\n        model = Feedback\n        exclude = ['creation_date']\n</code></pre>\n\n<p>I tried to omit the legend in the crispy form because if I include it, the modal appears to have two form titles.  But omitting the legend in the crispy form layout resulted in the fields appearing out of order.</p>\n\n<p>So I'm left with a few questions:</p>\n\n<ol>\n<li>Overall, am I going about this the right way? </li>\n<li>If I hook up the modal's submit button to AJAX, how do I go about error checking the\n    form?</li>\n<li>Is there a better way to display the crispy form in the\n    bootstrap modal?</li>\n</ol>\n"},{"tags":["django","httpresponse"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12878806,"title":"return direct download link in django","body":"<p>I have a form with a button to download a ZIP file. My django app returns the direct download URL for the external file, but I have some problems when returning the file:</p>\n\n<pre><code>directDownloadLink = site.getDirectDownloadLink(link)\n</code></pre>\n\n<p>I've tried to return the file using:</p>\n\n<pre><code>return HttpResponse(directDownloadLink)\n</code></pre>\n\n<p>which returns a blank web page containing the direct link;</p>\n\n<pre><code>return HttpResponse(directDownloadLink)\n</code></pre>\n\n<p>which redirects me to the base page where the file is stored;</p>\n\n<pre><code>mimetypes.init()\nreturn HttpResponseRedirect(directDownloadLink,\n                            mimetype='.zip')\n</code></pre>\n\n<p>which makes me download a 100byte file. The file i'm trying to download is 35kb.</p>\n"},{"tags":["django","path","installation"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":902,"score":1,"question_id":7037468,"title":"Django - Where is my Django installation?","body":"<p>I use Django but I need to find the default templates and applications.</p>\n\n<p>I don't know where it's installed.</p>\n\n<p>How can I find that ?</p>\n"},{"tags":["django","django-south"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12973282,"title":"Why is south migrate failing?","body":"<p>I have a blank MySQL database that I've just created. <code>south</code> is in my <code>INSTALLED_APPS</code>.</p>\n\n<p>I run:</p>\n\n<pre><code>$ ./manage.py syncdb\n...\nCreating table some_app_table\n\nYou just installed Django's auth system, which means you don't have any superusers defined.\n...\nSuperuser created successfully.\nInstalling custom SQL ...\nInstalling indexes ...\nInstalled 0 object(s) from 0 fixture(s)\n\nSynced:\n &gt; django.contrib.auth\n &gt; django.contrib.contenttypes\n...\n\nNot synced (use migrations):\n - myapp\n...\n</code></pre>\n\n<p><br/></p>\n\n<pre><code>$ ./manage.py schemamigration myapp --initial\n + Added model myapp.Model\n...\nCreated 0003_initial.py. You can now apply this migration with: ./manage.py migrate myapp\n</code></pre>\n\n<p><br/></p>\n\n<pre><code>$ ./manage.py migrate myapp\nRunning migrations for myapp:\n - Migrating forwards to 0003_initial.\n &gt; skan:0001_initial\n &gt; skan:0002_initial\nFATAL ERROR - The following SQL query failed: CREATE TABLE `myapp_model` (`id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NULL, `name` varchar(200) NOT NULL);\nThe error was: (1050, \"Table 'myapp_model' already exists\")\n</code></pre>\n\n<p>What's going on? Why won't South initialise correctly?</p>\n"},{"tags":["django","cookies","middleware"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12962906,"title":"How to check for cookie support in a middleware that uses sessions in Django?","body":"<p>I got a middleware that create a user account automatically for each new user and redirect:</p>\n\n<pre><code>class LogNewUser(object):\n\n    def process_request(self, request):\n\n        user_id = request.session.get('uid', None)\n\n        if not user_id:\n            user = User.objects.create(username=generate_name())\n            request.session['uid'] = user.pk\n            return redirect(request.path)\n\n        else:\n            request.user = User.objects.get(pk=user_id)\n</code></pre>\n\n<p>Of course, if the browser has cookie disable, this creates an infinite redirection loop.</p>\n\n<p>I'd like to test if user has cookie enable, and if yes, do my thing, and if not, create a specific user object which will be the same for all non cookie users.</p>\n\n<p>I tried different combinations of <code>request.session.set_test_cookie()</code> and <code>request.session.test_cookie_worked()</code> but I can't find a way do to what I want.</p>\n"},{"tags":["python","django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":87,"score":-1,"question_id":12974140,"title":"How to make use of a python script in django","body":"<p>Am new to Django but I want to become an expert in it and i have covered the tutorial on the Django website. Here is my problem: I have written a python script which presently works in the python shell, but I want to make use of it on my website.</p>\n\n<p>This is my views.py:         </p>\n\n<pre><code>from forms import CalculatorForm\n\ndef index(request):\n\n    if request.POST:\n        form = CalculatorForm(request.POST)\n        if form.is_valid():\n            form.save()\n\n    form = CalculatorForm()\n\n    kwvars = {\n        'form': form,\n    }\n    return render_to_response('Calculator/index.html', kwvars,\n                  context_instance=RequestContext(request))\n</code></pre>\n\n<p>My models.py:</p>\n\n<pre><code>class Calculator(models.Model):\n    loan_amount = models.DecimalField(max_digits=10, decimal_places=2)\n    tenure = models.DecimalField(max_digits=10, decimal_places=2)\n    interest_rate = models.DecimalField(max_digits=10, decimal_places=2)\n    equity_contribution_rate = models.DecimalField(max_digits=10, decimal_places=2)\n    depreciation_rate = models.DecimalField(max_digits=10, decimal_places=2)\n</code></pre>\n\n<p>This is the python script i have written:</p>\n\n<pre><code>print 'WELCOME TO THE CAR LOAN CALCULATOR PROGRAM'\nprint ''\nprint 'ENTER YOUR DETAILS BELOW'\nprint ''\n\n#User Input\namount_of_vehicle = input('Car Loan Amount in =N=')\ntenure = input('Car Loan tenure (in months):')\ninterest_rate = float(input ('Interest rate in %:'))\nequity = float(input ('Equity contribution rate in %:'))\ndepreciation_rate = float(input ('Depreciation rate in %:'))\nprint''\n\n#Data Computation Formulae\ninterest = float(interest_rate/100) * amount_of_vehicle * float(tenure/12)\nmanagement_fee = 0.01 * (amount_of_vehicle + interest)\nprocessing_fee = 0.0025 * (amount_of_vehicle + interest)\nlegal_fee = 0.0075 * (amount_of_vehicle + interest)\nresidual_amount = 0.01 * (amount_of_vehicle - float(float(depreciation_rate/100) * amount_of_vehicle *float(tenure/12))\n)\nequity_contribution = float(equity/100) * amount_of_vehicle\n\ntotal_amount = amount_of_vehicle + interest + management_fee + processing_fee \\\n+ legal_fee + residual_amount\n\nupfront_payment = management_fee + processing_fee + legal_fee + equity_contribution + residual_amount\n\nopening_balance = total_amount - upfront_payment\n\nmonthly_instalment = float(opening_balance/tenure)\n\n\n#Loan Payment Plan Function \ndef loanpaymentplan():\n    months = 1\n    monthly_instalment = float(opening_balance/tenure)\n    balance = opening_balance\n    while months &lt;= tenure:\n        if balance &gt; 0:\n            monthly_instalment = float(opening_balance/tenure)\n            monthly_interest = float((float(interest_rate/100) * balance)/ 12)\n            loan_payment = monthly_instalment - monthly_interest\n            closing_balance = balance - monthly_instalment\n            print'  ',months,'  ',round(balance,2),'   ', round(monthly_instalment,2),'        ',round(monthly_interest,2) \\\n            , '       ',' ',round(loan_payment,2),'     ',round(closing_balance,2)\n            balance = closing_balance\n            months += 1\n    return 'End of Car Loan Payment Plan'\n\n#Output to be displayed            \nprint 'COMPUTATIONS DERIVED FROM YOUR INPUT'\nprint '------------------------------------'\nprint ''\nprint 'The Interest to be paid is','     ','=N=',interest\nprint 'Equity Contribution is','         ','=N=',equity_contribution\nprint 'Management Fee is','              ','=N=',management_fee\nprint 'Processing Fee is','              ','=N=',processing_fee\nprint 'Legal Fee is','                   ','=N=',legal_fee\nprint 'Residual Fee is','                ','=N=',residual_amount\nprint ''\nprint 'The Total Amount to be paid is',' ','=N=',total_amount, ',but you collected a Car Loan of =N=',amount_of_vehicle\nprint 'N.B: Total Amount = Loan Amount + Interest + Management Fee + Processing Fee + Legal Fee + Residual Fee + Equity Contribution'\nprint ''\nprint 'The Total Amount to be paid Up-Front is', '=N=',upfront_payment\nprint 'N.B: Up-Front Amount = Management Fee + Processing Fee + Legal Fee + Residual Fee + Equity Contribution'\nprint ''\nprint ''\nprint 'The Opening Balance is','         ','=N=(',total_amount, '-',upfront_payment,')','=','=N=',opening_balance\nprint ''\nprint 'The Monthly Intsalment is','      ','=N=',round(monthly_instalment,2)\nprint ''\nprint '               CAR LOAN PAYMENT PLAN FOR THE DURATION OF',tenure,'MONTHS'\nprint '               ---------------------------------------------------'\nprint 'Months', '  ','Balance','  ','Monthly Instalment', 'Monthly Interest', 'Capital Payment', '    ','Closing Bal.'\nprint loanpaymentplan()\nprint ''\nprint 'THANK YOU FOR USING THE CAR LOAN CALCULATOR PROGRAM'\n</code></pre>\n\n<p>What I want is:</p>\n\n<ol>\n<li><p>When a user goes to my website and provides the necessary input, clicks submit, the webpage links the input to the python script(which already has input fields like those on the webpage).</p></li>\n<li><p>The python script runs according to the input given by the user, evaluates it and prints the result of the script on the <code>index.html</code>. </p></li>\n</ol>\n\n<p>I know it is possible to bind the inputs given by the user using <code>form.cleaned_data['']</code>, e.g.</p>\n\n<pre><code>if request.method == \"POST\": \n        #User Input\n        form = CalculatorForm(request.POST) \n        if form.is_valid(): \n            form.save()\n            amount_of_vehicle = form.cleaned_data['loan_amount'] \n            tenure = form.cleaned_data['tenure']\n            interest_rate = form.cleaned_data['interest_rate']\n            equity = form.cleaned_data['equity_contribution_rate']\n            depreciation_rate = form.cleaned_data['depreciation_rate']\n</code></pre>\n\n<p>Please help me out guys, counting on you all. </p>\n"},{"tags":["django","django-forms","django-views"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12957252,"title":"import django_tables2 error:unresolved import","body":"<p>Can anyone help me. I have just installed django-tables2 using easy_install and when i try to <code>import django_tables2 as tables</code> in forms.py it gives me error <code>unresolved import: tables</code> then i try to reinstall again django_tables2 and give me the result as shown below.</p>\n\n<pre><code>$ easy_install django_tables2\nSearching for django-tables2\nBest match: django-tables2 0.13.0\nProcessing django_tables2-0.13.0-py2.7.egg\ndjango-tables2 0.13.0 is already the active version in easy-install.pth\n\nUsing c:\\python27\\lib\\site-packages\\django_tables2-0.13.0-py2.7.egg\nProcessing dependencies for django-tables2\nFinished processing dependencies for django-tables2\n</code></pre>\n\n<p>Thank you very much for help.</p>\n\n<p>updated question.</p>\n\n<p>I am still trying to figure out this problem. I am posting a new error on why I cannot import. By using <code>python manage.py shell</code> i get this error. I have no idea what is that mean.</p>\n\n<pre><code>$ python\nPython 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import django_tables2\nTraceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nFile \"build\\bdist.win32\\egg\\django_tables2\\__init__.py\", line 3, in &lt;module&gt;\nFile \"build\\bdist.win32\\egg\\django_tables2\\tables.py\", line 4, in &lt;module&gt;\nFile \"c:\\Python27\\lib\\site-packages\\django\\db\\__init__.py\", line 11, in &lt;module&gt;\nif DEFAULT_DB_ALIAS not in settings.DATABASES:\nFile \"c:\\Python27\\lib\\site-packages\\django\\utils\\functional.py\", line 184, in inner\nself._setup()\nFile \"c:\\Python27\\lib\\site-packages\\django\\conf\\__init__.py\", line 40, in _setup\nraise ImportError(\"Settings cannot be imported, because environment variable %s is         undefined.\" % ENVIRONMENT_VARIABLE)\nImportError: Settings cannot be imported, because environment variable     DJANGO_SETTINGS_MODULE is undefined.\n</code></pre>\n\n<p>Can anyone help me?:( Help is very much appreciated. Thank you.</p>\n"},{"tags":["python","django","django-models","django-admin"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":12958923,"title":"In Django admin, include auth.User as an inline","body":"<p>I've seen lots of questions the other way around, which have something along the following:</p>\n\n<pre><code>class UserProfileInline(admin.StackedInline):\n    model = UserProfile\n    can_delete = False\n    verbose_name_plural = 'profile'\n\nclass NewUserAdmin(UserAdmin):\n    inlines = (UserProfileInline, )\n\nadmin.site.unregister(User)\nadmin.site.register(User, NewUserAdmin)\n</code></pre>\n\n<p>What I want to do is the reverse, but I can't seen to get it working.  Here's the code I have that isn't working.</p>\n\n<pre><code>from django.contrib import admin\nfrom django.contrib.auth.admin import UserAdmin\nfrom django.contrib.auth.models import User\nfrom myapp.models import SpecialUserType\n\nclass UserInline(admin.StackedInline):\n    model = User\n    can_delete = False\n\nclass IncludeUserAdmin(admin.ModelAdmin):\n    inlines = (UserInline,)\n\nadmin.register(SpecialUserType, IncludeUserAdmin)\n</code></pre>\n\n<p>How can I make this work so that <code>User</code> is an inline in the admin of <code>SpecialUserType</code>?</p>\n\n<p>The error that I'm getting is:</p>\n\n<pre><code>&lt;class 'django.contrib.auth.models.User'&gt; has no ForeignKey to &lt;class 'students.models.SpecialUserType'&gt;\n</code></pre>\n\n<p>This makes sense, because the <code>OneToOneField</code> is housed in the <code>SpecialUserType</code> model, obviously and not in <code>User</code>.  But how can I get it to reverse on the <code>OneToOneField</code>?</p>\n\n<p>(I know this might seem an unusual thing to do, but there is a good reason that I want to set up the admin this way and not the other way around.)</p>\n"},{"tags":["python","django","transactions","celery","django-celery"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12953801,"title":"Would using transactions in a Celery task in Django application cause problems?","body":"<p>I have a set of celery tasks that I've written. Each of these tasks take a — just an example — author id as a parameter and for each of the books for the author, it fetches the latest price and stores it in the database.</p>\n\n<p>I'd like to add transactions to my task by adding Django's <code>\n@transaction.commit_on_success</code> decorator to my tasks. If any task crashes, I'd like the whole task to fail and nothing to be saved to the database.</p>\n\n<p>I have a dozen or so celery workers that check the prices of books for a author and I'm wondering if this simple transactional logic would cause locking and race conditions in my Postgres database.</p>\n\n<p>I've dug around and found this project called <a href=\"https://github.com/chrisdoble/django-celery-transactions\" rel=\"nofollow\">django-celery-transactions</a> but I still haven't understood the real issue behind this and what this project tried to solve.</p>\n"},{"tags":["python","django","sorting"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":53,"score":-1,"question_id":12972021,"title":"Sort a list in Django","body":"<p>I have to display a list of matches in my Django sport app. I already defined a function to have a list of all matches.\nEach match as a DateTime \"real_start\", and I would like to sort them by that date.</p>\n\n<p>This is my list of matches:</p>\n\n<pre><code>    matches = Match.live_matches.all()\n</code></pre>\n\n<p>I tried \n        matches.sort(key=lambda x: x.real_start, reverse=True)</p>\n\n<p>but it doesn't work.</p>\n\n<p>Any help would be welcome.Thanks. </p>\n"},{"tags":["django","url","format"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12971640,"title":"Django format urls","body":"<p>I'm new to Django so i'm sorry if this question is noobish. I want to format Django urls which are received from GET and are something like this:</p>\n\n<pre><code>example.com/search?title=Test&amp;city=London&amp;category=SomeCategory\nexample.com/search?title=&amp;city=London&amp;category=SomeCategory\nexample.com/search?title=&amp;city=&amp;category=SomeCategory\n</code></pre>\n\n<p>into this:</p>\n\n<pre><code>example.com/search/Test/London/SomeCategory\nexample.com/search/post/London/SomeCategory\nexample.com/search/post/city/SomeCategory\n</code></pre>\n\n<p>What is the best way to do this? How will the form submitting this look?</p>\n\n<p>Thanks!</p>\n"}]}
{"total":41213,"page":16,"pagesize":100,"questions":[{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":12967294,"title":"Django distinct and order_by, annotate does not work","body":"<p>I have 2 tables say</p>\n\n<pre><code>class A(models.Model):\n    A_version = models.DecimalField(max_digits=4, decimal_places=0)\n    A_name = models.CharField(max_length=32, blank=True)\n    A_type    = models.CharField(max_length=32, blank=True)\n    unique_together(A_version,A_name)\n\nclass B(models.Model):\n    B_version = models.ForeignKey(A)\n    B_name    = models.ForeignKey(A)\n    last_reported_time= models.DecimalField(max_digits=4, decimal_places=0)\n    unique_together(B_version,B_name)\n\nobj = B.objects.filter(B_name__A_type=\"Vendor\").\n        values('B_name','B_version').annotate(Max('last_reported_time')).\n        order_by('B_name','B.B_version')\n</code></pre>\n\n<p><code>last_reported</code> is not unique. </p>\n\n<p>Now i have 2 problems.</p>\n\n<ol>\n<li><p>When I use <code>distinct</code> instead of <code>annotate</code> I was not able to get distinct values. So I used <code>annotate</code> as suggested by some people. Still i get non distinct values. How can I get distinct values?</p></li>\n<li><p>If I view the raw sql query for the above query it is translated into <code>order_by(B.B_name and A.B_version)</code>. How can I get <code>order_by(B.B_version)</code>?</p></li>\n</ol>\n"},{"tags":["django","admin","models","manytomanyfield","inlines"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12971260,"title":"Is there a simple way to get an inline through_table to remove dupes?","body":"<p>I'm programming in Django 1.4</p>\n\n<p>Consider the following code:</p>\n\n<pre><code> ## models.py\n\nfrom django.db import models\nfrom django.contrib.auth.models import User\n\nclass Foo(models.Model):\n    name = models.CharField(max_length=32)\n    members = models.ManyToManyField(User, through='FooMembership')\n\nclass FooMembership(models.Model):\n    user = models.ForeignKey(User)\n    foo = models.ForeignKey(Foo)\n\n    class Meta:\n        unique_together = ('user', 'foo')\n\n## admin.py\n\nfrom django.contrib import admin\nfrom .models import Foo, FooMembership\n\nclass FooMembershipInline(admin.TabularInline):\n    model = FooMembership\n\nclass FooAdmin(admin.ModelAdmin):\n    inlines = [FooMembershipInline]\n\nadmin.site.register(Foo, FooAdmin)\n</code></pre>\n\n<p>Now, the 'unique_together' option ensures that no duplicate links can exist in the\nlink table, if you try in the admin interface you will get show an error message,</p>\n\n<p><em>but</em></p>\n\n<p>Is there an easy way by which I can simply have the inlines limit their choices in\nthe dropdown choices menu for 'user', to users that aren't already a member of that\nparticular 'Foo' entry already?</p>\n"},{"tags":["python","django","unit-testing","factory-boy"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":12970932,"title":"Rewrite model @property in Factory Boy's object factory","body":"<p>I want to find a way to properly test my code with Factory Boy.</p>\n\n<p>There are a model, like this:</p>\n\n<pre><code>from django.db import models\n\nclass MyModel(models.Model):\n    param1 = &lt;some field&gt;\n    param1 = &lt;some field&gt;\n    param1 = &lt;some field&gt;\n\n    @property\n    def is_smth(self):\n        &lt;some complicated code that returns boolean&gt;\n</code></pre>\n\n<p>There is a factory for this model:</p>\n\n<pre><code>import factory\n\nclass MyModelFactory(factory.DjangoModelFactory):\n    param1 = &lt;some value&gt;\n    param2 = &lt;some value&gt;\n    param3 = &lt;some value&gt;\n\n    # And here i need to \"rewrite\" property of the model\n    # so that it would always return true\n</code></pre>\n\n<p>Can anyone help me with that? I didn't found mentions about this in factory boy's documentation, and various variants i've tried doesn't seem to work.</p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":12782847,"title":"Django: using ContentType vs multi_table_inheritance","body":"<p>I was having a similar problem as in\n<a href=\"http://stackoverflow.com/questions/3797982/how-to-query-abstract-class-based-objects-in-django\">How to query abstract-class-based objects in Django?</a>\nThe thread suggests using multi_table_inheritance. I personally think using content_type more conceptually comfortable (just feels more close to logic, at least to me)</p>\n\n<p>Using the example in the previous link, I would just add a StelarType as</p>\n\n<pre><code>class StellarType(models.Model):\n    \"\"\"\n    Use ContentType so we have a single access to all types\n    \"\"\"\n    content_type = models.ForeignKey(ContentType)\n    object_id = models.PositiveIntegerField()\n    content_object = generic.GenericForeignKey('content_type', 'object_id')\n</code></pre>\n\n<p>Then add this to the abstract base model</p>\n\n<pre><code>class StellarObject(BaseModel):\n    title = models.CharField(max_length=255)\n    description = models.TextField()\n    slug = models.SlugField(blank=True, null=True)\n    stellartype = generic.GenericForeignKey(StellarType)\n    class Meta:\n        abstract = True\n</code></pre>\n\n<p>To sync between StellarObject and StellarType, we can connect post_save signal to create a StellarType instance every time a Planet or Star is created. In this way, I can query StellarObjects through StellarType.\nSo I'd like to know what's the PRO and CON of using this approach against using multi_table_inheritance? I think both create an additional table in the databse. But how about database performance? how about usability/flexibility? Thanks for any of your input!</p>\n"},{"tags":["python","django","python-sphinx","autodoc"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12966132,"title":"Sphinx autodoc with Django 1.4","body":"<p>I'm having issues building the module autodocs for a Django 1.4.1 project.  <code>make html</code> seems to be failing to read my docstrings because it's running into trouble importing my settings.  All of the online guides I've seen suggest using</p>\n\n<pre><code>import settings\nfrom django.core.management import setup_environ\nsetup_environ(settings)\n</code></pre>\n\n<p>but this is deprecated in 1.4, and the <code>settings.configure()</code> method doesn't seem appropriate.  I haven't found nearly as much information for how to make things work in 1.4.  I tried setting <code>DJANGO_SETTINGS</code>, but no luck.  Any suggestions?</p>\n"},{"tags":["python","django","design-patterns","design","abstraction"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":78,"score":3,"question_id":12965314,"title":"A pattern for transforming and combining multiple data types behind a simple interface","body":"<p>I'm having difficulty conceptualizing a sane abstraction for a small event logging framework, and haven't come across anything comparable in the wild that would apply here.</p>\n\n<p>Overview: our web application needs to log events from the server side. The event data is json encoded to written to a flat file. An event might be a page view, a signup, an error condition, etc.</p>\n\n<p>All events would contain a set of core data, like web request information and session state. Any event should be able to define additional data to be recorded.</p>\n\n<p>Ideally, the interface to fire an event would be extremely minimal. Event definitions and data requirements should be defined in a single configuration file. Data validation and data transformations should be hidden behind this configuration file. In other words, the interface to log an event should require only an event name and the data structures to be transformed and recorded in the event.</p>\n\n<p>My original thinking was that a single data structure would be mapped to a single function whose responsibility is to transform the data structure into a dictionary that would eventually be merged into the final event object, then json encoded and written to the file. I'm referring to these as \"composer\" functions. In Django terms, something in the configuration file would map, for example, the HTTP request object that's passed to the view to a \"request_composer\" function. The function would construct a dictionary of data that's pulled out of that request object. The event that's emitted from the view would be required to pass in that \"request\" object.</p>\n\n<p>I suppose my question is if there is a pattern or abstraction that I've overlooked that cleanly transforms arbitrary data structures and merges them into a final data structure. I feel like this \"single data type maps to a single transformation function\" is a little kludgy and inelegant. It also breaks down when it makes sense for a single transformer to accept more than one argument.</p>\n"},{"tags":["django","thumbnails","image-resizing","sorl-thumbnail"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":633,"score":2,"question_id":9354242,"title":"How to resize source with sorl-thumbnail?","body":"<p>I was searching the web for my question and couldn't find a clear answeror any example. </p>\n\n<p>Basically, I want to use sorl and want to resize the source image during the Model save time to resize it down to 640x480 size, so that I don't end-up storing user's original 2.5 MB files on the disk. I will then use templatetags to create regular thumbnails out of my source as documented in sorl.</p>\n\n<p>I came across couple of sources refer to use ThumbnailField model field that is supposed to be available in sorl.thumbnail.fields. See the link <a href=\"https://bitbucket.org/stefanfoulis/sorl-thumbnail/src/845e70ef49a4/docs/index.rst\" rel=\"nofollow\">here</a>. However, in my up-to-date sorl copy from the trunk I don't see any ThumbnailField or ImageWithThumbnailsField. My attempt to import it in the model fails accordingly. I see these references are old though and wondering whether I can achieve the same with up-to-date sorl.</p>\n\n<p>On the other hand sorl documentation indicates only ImageField from sorl.thumbnail (see <a href=\"http://thumbnail.sorl.net/examples.html#model-examples\" rel=\"nofollow\">here</a>) that does not have any size argument to control the source resizing.</p>\n\n<p>BTW, I see this functionality is available with easy_thumbnail that takes an input parameter source_resize.</p>\n\n<p>Any help will be appreciated!</p>\n\n<p><strong>SUMMARY</strong></p>\n\n<p>I accepted the below answer, however I feel natural sorl support for this use case can be very useful - i.e. adding resize_source param to sorl's ImageField to allow resizing the source image. Below are two factors why this can be useful in the field:</p>\n\n<ol>\n<li><p>Not to store user's huge original images if your app has no need for it. Saving disk space.</p></li>\n<li><p>Not to spend extra CPU for resizing thumbnails from that huge source images if you don't have specific extreme high quality reasons. To avoid this one may write nested tags in templates to thumbnail from smaller size images but it can become annoying very soon.</p></li>\n</ol>\n"},{"tags":["python","django","django-settings"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":141,"score":1,"question_id":12253424,"title":"Django 1.4.1 'settings.DATABASES improperly configured' error","body":"<p>I am going through the Django Book and got really stuck when trying to execute the 'cursor = connection.cursor()' command to test the database configuration. I am a complete noob but I did spend several hours trying to identify the problem - to no avail. (sorry for the messy display of terminal output below - SO doesn't let new users post images).</p>\n\n<hr>\n\n<pre><code>Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43) \n[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n(InteractiveConsole)\n&gt;&gt;&gt; from django.db import connection\n&gt;&gt;&gt; cursor = connection.cursor()\nTraceback (most recent call last):\n  File \"&lt;console&gt;\", line 1, in &lt;module&gt;\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/backends/dummy/base.py\", line 15, in complain\n    raise ImproperlyConfigured(\"settings.DATABASES is improperly configured. \"\nImproperlyConfigured: settings.DATABASES is improperly configured. Please supply the ENGINE value. Check settings documentation for more details.\n&gt;&gt;&gt; from django.conf import settings\n&gt;&gt;&gt; settings.DATABASES\n{'default': {'ENGINE': 'django.db.backends.dummy', 'TEST_MIRROR': None, 'NAME': '', 'TEST_CHARSET': None, 'TIME_ZONE': 'UTC', 'TEST_COLLATION': None, 'OPTIONS': {}, 'HOST': '', 'USER': '', 'TEST_NAME': None, 'PASSWORD': '', 'PORT': ''}}\n&gt;&gt;&gt; \n</code></pre>\n\n<hr>\n\n<p>I did the settings.DATABASE check and the result comes out different from what I've saved in my settings.py file - is that the source of the porblem?</p>\n\n<p>I saw that there are several similar questions about this issue here - but none of them resolved the problem for me.</p>\n\n<p>Here's my database set up from settings.py: </p>\n\n<pre><code>***\nADMINS = (\n    # ('Your Name', 'your_email@example.com'),\n)\n\nMANAGERS = ADMINS\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.\n        'NAME': 'mydb',                      # Or path to database file if using sqlite3.\n        'USER': 'paul',                      # Not used with sqlite3.\n        'PASSWORD': '',                  # Not used with sqlite3.\n        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.\n        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.\n    }\n}\n\n***\n</code></pre>\n\n<p>Thank you for your help.</p>\n"},{"tags":["python","django","heroku","virtualenv","pip"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12957716,"title":"How heroku pick and upload my local django apps?","body":"<p>I am developing a python/django web application and intend to deploy it on heroku</p>\n\n<p>heroku depends on listing all the dependencies on requirements.txt file, and upon git push, heroku resolve all these dependencies and download them from pypi</p>\n\n<p>now i have a local django app on my local disk, in local development i just add entry:</p>\n\n<pre><code>-e /path/to/django_app\n</code></pre>\n\n<p>to pip requirements.txt file and rerun </p>\n\n<pre><code>pip install -r requirements.txt\n</code></pre>\n\n<p>as i it is a local pip and local app everything is running smoothly\nNow, i want to deploy to heroku, how heroku will pick with its remote pip executable my local django application and upload it to its servers?</p>\n"},{"tags":["jquery","django","html5"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12969072,"title":"HTML 5 How to Drag and Drop to Server","body":"<p>I have a web application where the user has a list of images from the server like so:</p>\n\n<pre><code> &lt;div class=\"uncat\"&gt;\n        &lt;img src=\"/static/media/images/2012/1019/zKGsa.jpg\" id=\"12\"/&gt;\n      &lt;/div&gt;\n        &lt;div style=\"float:left;\"&gt;&lt;a href=\"/delete/12/\"&gt;x&lt;/a&gt;&lt;/div&gt;\n\n      &lt;div class=\"uncat\"&gt;\n        &lt;img src=\"/static/media/images/2012/1019/vk5au.jpg\" id=\"11\"/&gt;\n      &lt;/div&gt;\n        &lt;div style=\"float:left;\"&gt;&lt;a href=\"/delete/11/\"&gt;x&lt;/a&gt;&lt;/div&gt;\n\n      &lt;div class=\"uncat\"&gt;\n        &lt;img src=\"/static/media/images/2012/1019/main-qimg-fa20c3f66a50e7a28c4e425b388303fc.jpeg\" id=\"10\"/&gt;\n      &lt;/div&gt;\n</code></pre>\n\n<p>Then the user can drag and drop any image into a select area with the following Javascript:</p>\n\n<pre><code>addEvent(bin, 'drop', function(e) {\nif (e.stopPropagation)\n  e.stopPropagation();\n\n  var csrftoken = getCookie('csrftoken');\n\n  // AJAX call \n  $.post('/image_in_folder/', {\n\n    // figure out better way to retrieve id\n      // id not passed from masonry\n    image:DRAGSOURCE.id,\n    folder:this.id,\n    'csrfmiddlewaretoken': csrftoken  \n  }, function(data){\n      console.log(data);\n  });\n}\n</code></pre>\n\n<p>});</p>\n\n<p>What non-client-side information can I POST over to identify the meme the user dragged? Currently, I use the 'id' attribute as a temporary solution. But users could potentially modify the data to hijack the drag-and-drop.</p>\n\n<p>Any help would be appreciated!</p>\n"},{"tags":["django","multilingual","django-multilingual"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12968116,"title":"Implementation of Multiple language based on url specific","body":"<p>I am using <em>language translation</em> in my project.But it only translate the strings if I set the highest priority to respective language in my browser.</p>\n\n<p><em>e.g.</em></p>\n\n<p>If i am using two language <strong>en</strong> and <strong>es</strong> for translation then it will display data in <em>spanish</em> if I have <em>set spanish as my default language</em> in my browser.</p>\n\n<p>My translation is working because it only displayed that data in spanish which i have specified in my Django.po file.</p>\n\n<p>So What i want is if i specify the language in url as www.asd.com/?lang=es then it must display the data in spanish.</p>\n\n<p>So please suggest me what i have to do for that.</p>\n"},{"tags":["django","django-templates"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":298,"score":2,"question_id":5755150,"title":"Altering one query parameter in a url (Django)","body":"<p>I have a search page that takes a variety of parameters. I want to create a new URL by just altering one parameter in the query. Is there an easy way to do this - something like:</p>\n\n<pre><code># example request url\nhttp://example.com/search?q=foo&amp;option=bar&amp;option2=baz&amp;change=before\n\n# ideal template code\n{% url_with change 'after' %}\n\n# resulting url\nhttp://example.com/search?q=foo&amp;option=bar&amp;option2=baz&amp;change=after\n</code></pre>\n\n<p>So this would take the request url, alter one query parameter and then return the new url. Similar to what can be achieved in Perl's Catalyst using <code>$c-&gt;uri_with({change =&gt; 'after'})</code>.</p>\n\n<p>Or is there a better way?</p>\n\n<p>[UPDATED: removed references to pagination]</p>\n"},{"tags":["django","directory-structure","webfaction"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12968264,"title":"Django Directory Structure / Module Not Found","body":"<p>I use WebFaction for hosting. <br>\nOn their website I created a Django project. <br>\nIt gave me this directory setup: <br>\n<br></p>\n\n<blockquote>\n  <p>/home/account_username/webapps/app_name/myproject/myproject/</p>\n</blockquote>\n\n<p><ul>\n<li>Why \"myproject\" is used twice here?</li>\n<li>I do not understand what each directory should be used for.</li>\n<li>I do not understand which files should be in each directory.\n<br><br>\nHere is what's inside each directory:</p>\n\n<blockquote>\n  <p>app_name\n  <br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n  apache2 <br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n  bin <br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n  myproject <br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n  manage.py <br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n  myproject <br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n  <strong>init</strong>.py <br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n  <strong>init</strong>.pyc <br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n  settings.py <br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n  settings.pyc <br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n  tests.py <br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n  urls.py <br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n  urls.pyc <br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n  views.py <br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n  views.pyc <br>\n  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n  wsgi.py</li>\n  <li>What is the first \"myproject\" directory supposed to be used for?</li>\n  <li>What do most people name this directory?</li>\n  <li>What is the second \"myproject\" directory supposed to be used for?</li>\n  <li>What do most people name this directory?<br><br></li>\n  </ul></p>\n</blockquote>\n"},{"tags":["jquery","django","jquery-masonry"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12964234,"title":"jQuery Masonry with Django for loop","body":"<p>jQuery Masonry doesn't work with Django templating tags like this:</p>\n\n<pre><code>{% for memes in memes %}\n      &lt;div class=\"masonryImage\"&gt;\n        &lt;img src=\"{{ MEDIA_URL }}/{{ image.image }}\" id=\"{{ image.pk }}\"/&gt;\n      &lt;div&gt;\n    {% endfor %}\n</code></pre>\n\n<p>I set up an identical instance when with the divs are spelled out: </p>\n\n<pre><code>&lt;div class=\"masonryImage\"&gt;\n  &lt;img src=\"/static/media/images/2012/1018/inspirational-quote-michelangelo-sunrise.jpg\" alt=\"\" /&gt;\n&lt;/div&gt;\n\n&lt;div class=\"masonryImage\"&gt;\n  &lt;img src=\"/static/media/images/2012/1018/inspirationalpercent20quotespercent204_4341.jpg\" alt=\"\" /&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>My JS:</p>\n\n<pre><code>  &lt;script&gt;\n$(function(){\n\nvar $container = $('#container');\n\n$container.imagesLoaded( function(){\n  $container.masonry({\n    itemSelector : '.masonryImage'\n  });\n});\n\n});\n&lt;/script&gt;\n</code></pre>\n\n<p>Here is the rendered HTML (with the for template tag). I have tried removing the id's in case they were problems (didn't work):</p>\n\n<pre><code>&lt;div id=\"container\"&gt;\n\n      &lt;div class=\"masonryImage\"&gt;\n        &lt;img src=\"/static/media/images/2012/1018/inspirational-quote-michelangelo-sunrise.jpg\" id=\"9\"/&gt;\n      &lt;div&gt;\n\n      &lt;div class=\"masonryImage\"&gt;\n        &lt;img src=\"/static/media/images/2012/1018/inspirationalpercent20quotespercent204_4341.jpg\" id=\"7\"/&gt;\n      &lt;div&gt;\n\n      &lt;div class=\"masonryImage\"&gt;\n        &lt;img src=\"/static/media/images/2012/1018/002.gif\" id=\"6\"/&gt;\n      &lt;div&gt;\n\n      &lt;div class=\"masonryImage\"&gt;\n        &lt;img src=\"/static/media/images/2012/1018/tumblr_mc1jac0bkn1rnn6wqo1_500.png\" id=\"4\"/&gt;\n      &lt;div&gt;\n\n      &lt;div class=\"masonryImage\"&gt;\n        &lt;img src=\"/static/media/images/2012/1018/inspirational-quotes30.jpg\" id=\"2\"/&gt;\n      &lt;div&gt;\n\n      &lt;div class=\"masonryImage\"&gt;\n        &lt;img src=\"/static/media/images/2012/1018/inspirational-quotes20.jpg\" id=\"1\"/&gt;\n      &lt;div&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>Update</strong>\nI have tried putting the {% for %} images under the same container and then added 'spelled-out' divs.  This causes the {% for %} images to render VERTICALLY (with no masonry) and the spelled-out divs to render with masonry. </p>\n\n<p>Is there a better way to template this AND have jQuery Masonry work?</p>\n"},{"tags":["django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":417,"score":0,"question_id":10128900,"title":"How to post json to Django","body":"<p>What is the proper way to post json to Django?  I have tried to use views, but I am not certain how to handle csrf.  Is there another way to bypass views and simply accept a post of json?</p>\n"},{"tags":["python","django","django-facebook"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12454267,"title":"Obtaining friends in the django_facebook framework","body":"<p>I'm a little bit confused on the process of obtaining a user's friends list using the frameworks django_facebook and userena. </p>\n\n<p>This is confusing because {{ request.user.get_profile.friends }} returns an empty list for a user with friends, and this isn't a permissions error because {{ request.user.get_profile.access_token }} actually properly returns the access token, which means the friends list for that user can be accessed from <a href=\"https://graph.facebook.com/me/friends?access_token=\" rel=\"nofollow\">https://graph.facebook.com/me/friends?access_token=</a>{{ request.user.access_token }}</p>\n\n<p>I read the documentation and the code but still can't figure out why the friends list or the likes list are not returning anything (everything else works). If anyone is willing to help that would be wonderful (sorry this question is a bit obscure).</p>\n\n<p>The code for the framework is here:</p>\n\n<p><a href=\"https://github.com/tschellenbach/Django-facebook\" rel=\"nofollow\">https://github.com/tschellenbach/Django-facebook</a></p>\n\n<p>specifically line 50 of (where friends are returned from a user):\n<a href=\"https://github.com/tschellenbach/Django-facebook/blob/master/django_facebook/models.py\" rel=\"nofollow\">https://github.com/tschellenbach/Django-facebook/blob/master/django_facebook/models.py</a></p>\n\n<p>Thanks</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12966212,"title":"Django - how to use HttpBasicAuth","body":"<p>In my Django code I am writing  a <code>connection.py</code>, which will connect to another server using the following <code>http_auth = http_auth.HTTPBasicAuth(user password)</code>. So when I am connecting to that server one of the parameter I pass is <code>http_auth = http_auth.HTTPBasicAuth(user password)</code> against the server. I searched the web a lot and Django docs but nothing exactly tells me how to do this? Can anyone please help</p>\n"},{"tags":["python","django","web","path"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12966074,"title":"ImportError at / cannot import name HttpResponce","body":"<p>Okay, so I don't know what's going on, as I'm new to Python and Django, but for some ungodly reason I have no PYTHONPATH, and even though I made one, my Python install isn't using it.</p>\n\n<p>I have debug turned on, so I can give you all this: [snipped cause it was pointless, and might cause a security problem for me]</p>\n\n<p>One thing that is strange is that I'm on Win7 x64 (using python 2.7) and it says I'm on NT.</p>\n\n<p>I am following along with this tutorial: <a href=\"http://www.djangobook.com/en/2.0/chapter03.html\" rel=\"nofollow\">http://www.djangobook.com/en/2.0/chapter03.html</a></p>\n\n<p>I had other PATH problems with my python install too. It's like none of the paths are being set at all, and I have to do them all manually.</p>\n\n<p>Should I just put my project folder into my PATH var? If I do that too much will it make my PC slower?</p>\n"},{"tags":["django","templates","jquery-ajax"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12957869,"title":"How to pass django ajax data to template?","body":"<p>I'm trying to pass a 2d array into a template via ajax. I managed to get the data from the server on click, but I don't know how I can handle that data inside a template. For instance, if I put the returned 'data' into a div then it just lists the first column. How to access specific data with, for instance:</p>\n\n<pre><code>{% for printers in printer_list %}\n    {{ printer.email }}\n{% endfor %}\n</code></pre>\n\n<p>Javascript:</p>\n\n<pre><code>$(\".printersToggle\").click(function() {\n    $.get(\"/ajax\", function(data) {\n        /* What goes here? */\n    });\n});\n</code></pre>\n\n<p>views.py:</p>\n\n<pre><code>def ajax_test(request):\n    if request.is_ajax():\n        printer_list = User.objects.all()\n    else:\n        printer_list = \"Not ajax\"\n    return HttpResponse(printer_list)\n    # Am I doing this bit right?\n</code></pre>\n\n<p>urls.py:</p>\n\n<pre><code>url(r'^ajax$','website.views.ajax_test'),\n</code></pre>\n"},{"tags":["python","django","rss"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12961827,"title":"Django Template Utils RSS Error - List Index Out Of Range","body":"<p>I'm having trouble pulling an RSS feed through to my template.</p>\n\n<p>I'm using <a href=\"http://code.google.com/p/django-template-utils/\" rel=\"nofollow\">'django-template-utils'</a>, and I've gotten RSS from the New York Times to successfully pull to my page, but pulling content from <a href=\"http://www.huffingtonpost.com/author/index.php?author=video-the-vote\" rel=\"nofollow\">a specific Huffington Post feed</a> is proving to be more difficult.  The error I get is<br>\n<code>\"TemplateSyntaxError at /, Caught IndexError while rendering: list index out of range,\"</code><br>\nso I assume the issue has to do with the number of entries in the feed that are being pulled not matching something in my code, but after that, I'm really quite clueless as to how to debug this issue, especially since I can get other feeds to work successfully with this app.</p>\n\n<p>Happy to provide some code, though honestly all I've done thus far is added a template tag and followed the instructions/documentation for <code>django_template_utils</code>.  I'm hoping that someone else who has used this app has encountered a similar issue.</p>\n\n<p>Thanks for reading!</p>\n"},{"tags":["python","django","django-south"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12965553,"title":"Django SlugFields change during South schemamigration","body":"<p>I just did a South schemamigration and it outputted that all the Slug fields changed, but I didn't change any of the code for the slug fields.</p>\n\n<p>The original South migration files have the slug fields as:</p>\n\n<pre><code>'slug': ('django.db.models.fields.SlugField', [], {'db_index': 'True', 'unique': 'True', 'max_length': '50', 'blank': 'True'})\n</code></pre>\n\n<p>But now, South has the slug fields as:</p>\n\n<pre><code>'slug': ('django_extensions.db.fields.AutoSlugField', [], {'populate_from': \"'name'\", 'allow_duplicates': 'False', 'max_length': '50', 'separator': \"u'-'\", 'blank': 'True', 'unique': 'True', 'overwrite': 'False', 'db_index': 'True'})\n</code></pre>\n\n<p>Does anyone know why this change happened?</p>\n"},{"tags":["django","mod-wsgi","wsgi","cherrypy","turbogears"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12965321,"title":"Integrate django application with turbogears","body":"<p>I am working with a legacy web application based off of Turbogears 1.1 (CherryPy 2.3) and I would like to integrate it with a Django 1.4 web application. What I would like to do ideally is find some way for both applications to share authentication/session state so that the experience is seamless to the user.\nBoth applications can run on the same server and technically can access the same mysql database instance.</p>\n\n<p>Initial thoughts are that this could be achieved by:</p>\n\n<ul>\n<li>Storing session data in a shared database</li>\n<li>Use the Django application as a 'master' that would issue requests via http to the turbogears application</li>\n<li>Running the Django application from within Cherrpy via the internal CherryPyWSGIServer</li>\n</ul>\n\n<p>Any other suggestions would be welcome!</p>\n"},{"tags":["ruby-on-rails","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12965205,"title":"Django version of ModelObject.find_or_create_by_id()","body":"<p>I wrote most of my web applications with Django frameworks. Recently I looked into Ruby on rails and found some interesting things. Like ModelObject.find_or_create_by_id()</p>\n\n<p>Here is some Django code I have </p>\n\n<pre><code>    try:\n            phone = request.POST.get('phone')\n            customer = Customer.objects.get(phone=phone)\n            updating customer...     \n    except: \n            customer=Customer(\n                creating customer...            \n            )\n            customer.save() \n</code></pre>\n\n<p>This piece of code looks ugly. Is there a better way to do this with Django ?</p>\n"},{"tags":["django","django-staticfiles"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12965091,"title":"STATIC_URL Problems","body":"<p>Static files with Django are driving me insane. I'm successfully able to load my template from the directory specified in TEMPLATE_DIRS, but when I try to load my css and js files from the STATICFILES_DIRS it doesn't work. </p>\n\n<p>Below are the relevant parts of my settings.py file:</p>\n\n<pre><code>MEDIA_ROOT = ''\nMEDIA_URL = ''\n\nSTATIC_ROOT = ''\n\nSTATIC_URL = '/static/'\n\nSTATICFILES_DIRS = (\n    '/home/jrubins/Documents/crowdcluster/crowdcluster/Design/websiteDesign/website/',\n)\n\nSTATICFILES_FINDERS = (\n    'django.contrib.staticfiles.finders.FileSystemFinder',\n    'django.contrib.staticfiles.finders.AppDirectoriesFinder',\n)\n\nTEMPLATE_LOADERS = (\n    'django.template.loaders.filesystem.Loader',\n    'django.template.loaders.app_directories.Loader',\n)\n\nTEMPLATE_CONTEXT_PROCESSORS = (\n    'django.core.context_processors.debug',\n    'django.core.context_processors.i18n',\n    'django.core.context_processors.media',\n    'django.core.context_processors.static',\n    'django.contrib.auth.context_processors.auth',\n    'django.contrib.messages.context_processors.messages',\n)\n\nTEMPLATE_DIRS = (\n    '/home/jrubins/Documents/crowdcluster/crowdcluster/Design/websiteDesign/website/',\n)\n\nINSTALLED_APPS = (\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'items'\n)\n</code></pre>\n\n<p>Please let me know if you need more info or if you see something wrong. Thanks in advance.</p>\n"},{"tags":["django","django-models","postgresql-9.1","tastypie"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12954844,"title":"Django raising DatabaseError running a Model.objects.get","body":"<p>I am using Django 1.4, postgres 9.1.x, and Tastypie 0.9.11 to create an API.</p>\n\n<p>I have defined the following model:</p>\n\n<pre><code>class Activity(models.Model):\n    company = models.ForeignKey(Company)\n    opportunity = models.ForeignKey(Opportunity)\n    name = models.CharField(max_length=200)\n    ...\n</code></pre>\n\n<p>I am overwriting the \"save\" method to do some special stuff during this process:</p>\n\n<pre><code>def save(self, *args, **kwargs):\n    saveResult = None\n    try: \n        saveResult = super(Activity, self).save(*args, **kwargs)\n    except IntegrityError, e:\n        logger.error('IntegrityError %s' % e.message)\n\n    if(not self.pk):\n        try:\n            self = Activity.objects.get(company_id=self.company.id,opportunity_id=self.opportunity.id)\n        except ObjectDoesNotExist, e:\n            pass\n        except DatabaseError, e:\n            logger.error('DatabaseError %s' % e.message)\n\n    if(self.pk and not self.notified):\n        send_notification(...)\n        self.notified = 1\n        self.save()\n\n    return saveResult\n</code></pre>\n\n<p>Below I describe an example of the POST requests that I'm doing:</p>\n\n<pre><code>curl --dump-header - -H \"Content-Type: application/json\" -X POST -d '{\"company\": {\"id\":10},\"opportunity\": {\"id\":39}}'  http://127.0.0.1:8001/api/v1/activity/ \n</code></pre>\n\n<p>The process is working well for new objects, but when I do a POST request for an existing row (I don't have a way to know previously if it is new or not), I'm getting of course the IntegrityError due to the duplicate key error, which is correct. </p>\n\n<p>Then, I want to populate the self data with the info stored in the existing row, that's why I do the following query (I didn't find a more elegant way to do it, if you have a better option would be appreciated):</p>\n\n<blockquote>\n  <p>self =\n  Activity.objects.get(company_id=self.company.id,opportunity_id=self.opportunity.id)</p>\n</blockquote>\n\n<p>The problem is that the process is dying because that \"get\" line is throwing a DatabaseError with message \"current transaction is aborted, commands ignored until end of transaction block\" avoiding to obtain the existing object.</p>\n\n<p>These are the messages I am getting printed in screen:</p>\n\n<pre><code>2012-10-18T04:57:27+00:00 app[web.1]: .............Saving new activity.............\n2012-10-18T04:57:27+00:00 app[web.1]: Company: 10, video test | Opportunity: 39 | Activity: , created: None, None, 1, \n2012-10-18T04:57:27+00:00 app[web.1]: IntegrityError duplicate key value violates unique constraint \"db_activity_company_id_1276b66f55cae366_uniq\"\n2012-10-18T04:57:27+00:00 app[web.1]: DETAIL:  Key (company_id, opportunity_id)=(10, 39) already exists.\n2012-10-18T04:57:27+00:00 app[web.1]: DatabaseError current transaction is aborted, commands ignored until end of transaction block\n</code></pre>\n\n<p>BTW: I have tried exactly the same in MySql and it works well.</p>\n\n<p>So, I don't know why is the \"get\" method generating the error. I guess it may be related with the previous IntegrateError raised, but I haven't figure out how to avoid it.</p>\n\n<p>Any help is appreciated. Thank you.</p>\n"},{"tags":["django","django-templates"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":298,"score":0,"question_id":9842114,"title":"Django: static files","body":"<p>When i try to serve up images from within my blog the template is looking in </p>\n\n<pre><code>[26/Mar/2012 10:33:42] \"GET /blog/images/coke.jpg HTTP/1.1\" 200 6153\n</code></pre>\n\n<p>However when i load up images from a flat page the template looks in</p>\n\n<p>[26/Mar/2012 10:33:42] \"GET /blog/images/coke.jpg HTTP/1.1\" 200 6153</p>\n\n<p>I think this is because i need to add something to my urls.py file with my blog app so that it knows what my static URL is rather than looking in the blog/images folder.</p>\n\n<p>Im using the tag:</p>\n\n<pre><code>src=\"{{ STATIC_URL }}images/header.png\"\n</code></pre>\n\n<p>My settings.py has:</p>\n\n<pre><code>STATIC_ROOT = '/export/mailgrp4_a/sc10jbr/WWWdev/dbe/djangostatic/'\nSTATIC_URL = '/static/'\nSTATICFILES_DIRS = (\n'/export/mailgrp4_a/sc10jbr/WWWdev/dbe/static/',\n</code></pre>\n\n<p>My blog url.py has:</p>\n\n<pre><code>urlpatterns = patterns('dbe.blog.views',\n(r\"^(\\d+)/$\", \"post\"),\n(r\"^add_comment/(\\d+)/$\", \"add_comment\"),\n(r\"^delete_comment/(\\d+)/$\", \"delete_comment\"),\n(r\"^delete_comment/(\\d+)/(\\d+)/$\", \"delete_comment\"),\n(r\"^month/(\\d+)/(\\d+)/$\", \"month\"),\n(r\"\", \"main\"),\n)\n</code></pre>\n\n<p>My main url.py has:</p>\n\n<pre><code>urlpatterns = patterns('',\nurl(r'^blog/', include('blog.urls')),\nurl(r'^admin/', include(admin.site.urls)),\n)\n</code></pre>\n\n<p>What do i need to add?</p>\n\n<p>My updated blog url.py has:</p>\n\n<pre><code>from django.conf.urls.defaults import *\nfrom dbe.blog.models import *\nfrom django.contrib.staticfiles.urls import staticfiles_urlpatterns\n\n\nurlpatterns = patterns('dbe.blog.views',\n(r\"^(\\d+)/$\", \"post\"),\n(r\"^add_comment/(\\d+)/$\", \"add_comment\"),\n(r\"^delete_comment/(\\d+)/$\", \"delete_comment\"),\n(r\"^delete_comment/(\\d+)/(\\d+)/$\", \"delete_comment\"),\n(r\"^month/(\\d+)/(\\d+)/$\", \"month\"),\n(r\"\", \"main\"),\n)\n\nurlpatterns += staticfiles_urlpatterns()\n</code></pre>\n\n<p>My updated main url.py has:</p>\n\n<pre><code>from django.conf.urls.defaults import *\nfrom dbe.blog.models import *\nfrom django.contrib.staticfiles.urls import staticfiles_urlpatterns\n\n# Uncomment the next two lines to enable the admin:\nfrom django.contrib import admin\nadmin.autodiscover()\n\nurlpatterns = patterns('',\nurl(r'^blog/', include('blog.urls')),\n\n# Uncomment the admin/doc line below to enable admin documentation:\nurl(r'^admin/doc/', include('django.contrib.admindocs.urls')),\n\n# Uncomment the next line to enable the admin:\nurl(r'^admin/', include(admin.site.urls)),\n\n)\n\nurlpatterns += staticfiles_urlpatterns()\n</code></pre>\n\n<p>Can anyone else help with this, im really stuck even after following the help below. Is there anything i can use to help debug and diagnose the problem?</p>\n\n<p>thanks</p>\n"},{"tags":["python","django","model","uuid"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12963483,"title":"Django abstract model inheritance","body":"<p>In a model I usually put a \"uuid\" field for friendly URI, also a \"slug\" field.</p>\n\n<p>Say I have a model named \"SomeModel\", by overriding its save() method, I can generate a uuid and a slug when it's being saved:</p>\n\n<pre><code>class SomeModel(models.Model):\n    ...\n    def save(self, *args, **kwargs):\n        if not self.uuid:\n            uuid = shortuuid.uuid()[:10]\n            while SomeModel.objects.filter(uuid=uuid).exists():\n                uuid = shortuuid.uuid()[:10]\n            self.uuid = uuid\n        if not self.slug:\n            self.slug = slugify(self.title)[:500].rstrip('-')\n        super(SomeModel, self).save(*args, **kwargs)\n</code></pre>\n\n<p>It works well on regular model. Now I'd like to have an abstract model:</p>\n\n<pre><code>class SomeAbstractModel(models.Model):\n    class Meta:\n        abstract = True\n    def save(self, *args, **kwargs):\n        ...\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>class SomeModel(SomeAbstractModel):\n    class Meta(SomeAbstractModel.Meta):\n        ...\n</code></pre>\n\n<p>The problem is, in the abstract model, looks like I cannot just simply replace</p>\n\n<pre><code>while SomeModel.objects.filter(uuid=uuid).exists():\n</code></pre>\n\n<p>with</p>\n\n<pre><code>while SomeAbstractModel.objects.filter(uuid=uuid).exists():\n</code></pre>\n\n<p>because abstract model doesn't have a manager.</p>\n\n<p>I was wondering in this case, how can I avoid having redundant code in all models' save() methods. Also I'm not sure if</p>\n\n<pre><code>while SomeModel.objects.filter(uuid=uuid).exists():\n</code></pre>\n\n<p>is the best practice to check if an uuid exists or not.</p>\n"},{"tags":["django","django-class-based-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12957542,"title":"Query multiple models with class-based views","body":"<p>I would like to solve the following situation.</p>\n\n<p>I have a side panel containing information of the <em>active</em> user. For this an instance of UserInfo model needs to be passed to the views.</p>\n\n<p>Additionally, I would like to pass a number of other model instances to the pages (eg. Purchases, Favourites, etc.).</p>\n\n<p>I know this is pretty easy to do by overriding the get_context_data.</p>\n\n<pre><code>def get_context_data(self, **kwargs):\n    kwargs['purchases'] = Purchases.objects.get(id=1)\n    kwargs['favourites'] = Favourites.objects.get(id=1)\n    .... etc\n    return super(UploadFileView, self).get_context_data(**kwargs)\n</code></pre>\n\n<p>So my question is - what would be the best/most appropriate CBV to use for this?</p>\n"},{"tags":["python","django","json"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":606,"score":-1,"question_id":1142702,"title":"Convert HTML to Django Fixture (JSON)","body":"<p>We've got a couple of Django flatpages in our project, that are based on actual HTML files. These files undergo some changes once in a while and hence have to updated in the database. So I came up with the idea of simply copying the plain HTML text into a JSON fixture and do an <code>manage.py loaddata</code>.</p>\n\n<p>However, the problem is, that there are quite some characters inside the HTML that have to be escaped in order to pass as JSON. Is there some script, <a href=\"http://en.wikipedia.org/wiki/Sed\" rel=\"nofollow\">sed</a> command or maybe even an official Django solution for that problem?</p>\n"},{"tags":["python","django","forms","replace"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12961895,"title":"Can I replace django choicefield display value with context?","body":"<p>I have a dropdown field that only needs to store two values on the backend, as users will always be choosing between the home team and the away team. The away team, of course, will change week to week.</p>\n\n<p>Ideally, all I would do is change the display text on the {{ form.field }}. So, for example:</p>\n\n<pre><code>&lt;option value=\"Opponent\"&gt;Opponent&lt;/option&gt;\n</code></pre>\n\n<p>would display as</p>\n\n<pre><code>&lt;option value=\"Opponent\"&gt;OSU&lt;/option&gt;\n</code></pre>\n\n<p>I've tried a few approaches. At first, I hand-coded the various form fields, but then I didnm't get errors when invalid data was entered. I'm toying now with a template tag that would use replace(), but so far I'm not having any luck.</p>\n\n<p>Any ideas? I feel like there's something basic I'm missing. Thanks much.</p>\n"},{"tags":["python","django","porting","gettext","jinja2"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":110,"score":1,"question_id":9147260,"title":"Is there an equivalent of the \"blocktrans\" in tag in jinja2?","body":"<p>I am using jinja2 with my django application, I am working on porting some existing django templates over to jinja2. For the most part I am not having any issues; however, I have a statement like so in one of my django templates:</p>\n\n<pre><code>{% blocktrans %}\n  &lt;p&gt;Some stuff here&lt;/p&gt;\n{% endblocktrans %}\n</code></pre>\n\n<p>This causes jinja2 to become very unhappy. I have looked far and wide to see if there is an equivalent of the \"blocktrans\" tag for jinja2. All I can find is that enabling gettext let's you use:</p>\n\n<pre><code>{{ trans(\"Some String\") }}\n</code></pre>\n\n<p>This is useful for short strings like in the title tag, but not for blocks. What am I missing, any help would be appreciated!</p>\n"},{"tags":["django","amazon-s3","django-storage","amazon-iam"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":12961910,"title":"What permissions does django-storages require for an s3 IAM user?","body":"<p>As the question asks, what are the minimum required permissions for a locked down s3 IAM user to use django-storages successfully? At the present time I've used something like</p>\n\n<pre><code>{\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\"s3:ListAllMyBuckets\"],\n      \"Resource\": \"arn:aws:s3:::*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\"s3:ListBucket\",\n                 \"s3:GetBucketLocation\",\n                 \"s3:ListBucketMultipartUploads\",\n                 \"s3:ListBucketVersions\"],\n      \"Resource\": \"arn:aws:s3:::bucket-name\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\"s3:*Object*\",\n                 \"s3:ListMultipartUploadParts\",\n                 \"s3:AbortMultipartUpload\"],\n      \"Resource\": \"arn:aws:s3:::bucket-name/*\"\n    }\n  ]\n}\n</code></pre>\n\n<p>Which may actually be overkill. Any further ideas?</p>\n"},{"tags":["django","api","rest","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12961793,"title":"How to get rid of the version information in API url in tastypie django?","body":"<p>I am creating REST based APIs for an app using Tastypie with Django. The problem is default API url in Tastypie contains version info in url patterns i.e. </p>\n\n<p><code>http://lx:3001/api/v1/vservers/?username=someuser&amp;api_key=someapikey</code></p>\n\n<p>I want my url to be free from API version info like this:</p>\n\n<p><code>http://lx:3001/api/vservers/?username=someuser&amp;api_key=someapikey</code></p>\n\n<h1>urls.py</h1>\n\n<pre><code>v1_api = Api()\nv1_api.api_name = ''\nv1_api.register(UserResource())\n...\nurl(r'^api/', include(v1_api.urls)),\n</code></pre>\n\n<p>I am overwriting api_name with an empty string still </p>\n\n<p><code>http://lx:3001/api/vservers/?username=someuser&amp;api_key=someapikey</code> does not work.</p>\n\n<p>How can I get rid of the version info altogether?</p>\n\n<p>Thanks..</p>\n"},{"tags":["python","django","static"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12960079,"title":"how to point to static folder in django","body":"<p>I am learning django and I already have a bit noobish question. I can not point to my static folder and I tried all the combinations, watched people do it in youtube tutorials etc.</p>\n\n<p>My settings.py looks something like this:</p>\n\n<pre><code>   STATIC_ROOT = '/home/peter/brewery/static/'\n   TEMPLATE_DIRS = '/home/peter/brewery/mysite/templates/'\n</code></pre>\n\n<p>where brewery/ is the folder containing mysite/ and static/, mysite/ is the folder created by     </p>\n\n<pre><code>   django-admin.py startproject\n</code></pre>\n\n<p>where settings.py also lives...</p>\n\n<p>It seems that templates folder is mapped correctly, since the page renders with proper templates, it just cannot access the css in the /static/css/ folder. I show the path in my template for css like this </p>\n\n<pre><code>   &lt;link ...  href='/static/css/brewery.css' /&gt;\n</code></pre>\n\n<p>I have also tried to make href absolute path on my computer and it does not work.</p>\n\n<p>I am using django 1.3 and am running the server provided by django (python manage.py runserver) </p>\n"},{"tags":["django","query"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":38,"score":-3,"question_id":12961545,"title":"Queries in Django, sql","body":"<p>I would be very grateful if you send me one sql-query.\nSo, columns are: <strong>even</strong> (contains strings '*' or '1' or '2') and <strong>weeks</strong> (contains strings '*' or '1 2 3 4 5 ' etc).\nI have 2 variables: </p>\n\n<ol>\n<li>even_week = int, 1 or 2</li>\n<li>today_week = int, num of the week</li>\n</ol>\n\n<p>I need all fields from that table, where </p>\n\n<pre><code>(even='*' OR even = even_week) AND (weeks='*' or today_week in weeks)\n</code></pre>\n\n<p>I am newbie in Django, please, help. Thanks</p>\n"},{"tags":["django","forms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12960906,"title":"Duplication check before saving the form data in Django","body":"<p>I got a form as following:</p>\n\n<pre><code>class CourseAddForm(forms.ModelForm):\n  \"\"\"Add a new course\"\"\"\n  name = forms.CharField(label=_(\"Course Name\"), max_length=100)\n  description = forms.Textarea()\n  course_no = forms.CharField(label=_(\"course Number\"), max_length=15)\n\n\n  #Attach a form helper to this class\n  helper = FormHelper()\n  helper.form_id = \"addcourse\"\n  helper.form_class = \"course\"\n\n  #Add in a submit and reset button\n  submit = Submit(\"Add\", \"Add New Record\")\n  helper.add_input(submit)\n  reset = Reset(\"Reset\", \"Reset\")\n  helper.add_input(reset)\n\ndef clean(self):\n  \"\"\" \n  Override the default clean method to check whether this course has been already inputted.\n  \"\"\"    \n  cleaned_data = self.cleaned_data\n  name = cleaned_data.get('name')\n  hic = cleaned_data.get('course_no')\n\n  try:\n    course=Course.objects.get(name=name)\n  except Course.DoesNotExist:\n    course=None\n\n  if course:\n    msg = u\"Course name: %s has already exist.\" % name\n    self._errors['name'] = self.error_class([msg])\n    del cleaned_data['name']\n    return cleaned_data\n  else:\n    return self.cleaned_data\n\n  class Meta:\n    model = Course\n</code></pre>\n\n<p>As you can see I overwrote the clean method to check whether this course has already existed in the database when the user is trying to add it. This works fine for me.</p>\n\n<p>However, when I want to add the same check for the form for editing, the problem happened. Because it is editing, so the record with same course name has already exist in the DB. Thus, the same check would throw error the course name has already exist. But I need to check the duplication in order to avoid the user updating the course name to another already existed course name.</p>\n\n<p>I am thinking of checking the value of the course name to see if it is changed. If it has been changed, than I can do the same check as above. If it has not been changed, I don't need to do the check. But I don't know how can I obtain the origin data for editing.  </p>\n\n<p>Does anyone know how to do this in Django?  </p>\n\n<p>My view looks as following:</p>\n\n<pre><code>@login_required\n@csrf_protect\n@never_cache\n@custom_permission_required('records.change_course', 'course')\ndef edit_course(request,course_id):\n  # See if the family exists:\ntry:\n  course = Course.objects.get(id=course_id)\nexcept Course.DoesNotExist:\n  course = None\n\nif course:\n  if request.method == 'GET':\n    form = CourseEditForm(instance=course)\n    return render_to_response('records/add.html',\n                            {'form': form},\n                            context_instance=RequestContext(request)\n                            )\n  elif request.method == 'POST':\n    form = CourseEditForm(request.POST, instance=course)\n    if form.is_valid():\n      form.save()\n      return HttpResponseRedirect('/records/')\n    # form is not valid: \n    else:\n      error_message = \"Please correct all values marked in red.\"\n      return render_to_response('records/edit.html', \n                              {'form': form, 'error_message': error_message},\n                              context_instance=RequestContext(request)\n                              )      \nelse:\n  error = \"Course %s does not exist. Press the 'BACK' button on your browser.\" % (course)\n  return HttpResponseRedirect(reverse('DigitalRecords.views.error', args=(error,)))\n</code></pre>\n\n<p>Thank you.</p>\n"},{"tags":["python","ajax","django","dajaxice"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12961398,"title":"django/python TEMPLATE_LOADER error for dajaxice","body":"<p>I want use django / djanxice and install it to setup.py, url.py, etc...</p>\n\n<p>but when I runserver, error occurs.</p>\n\n<p>/Library/Python/2.7/site-packages/django/template/loader.py:113: UserWarning: Your TEMPLATE_LOADERS setting includes 'django.template.loaders.eggs.Loader', but your Python installation doesn't support that type of template loading. Consider removing that line from TEMPLATE_LOADERS.\n  warnings.warn(\"Your TEMPLATE_LOADERS setting includes %r, but your Python installation doesn't support that type of template loading. Consider removing that line from TEMPLATE_LOADERS.\" % loader)\nNo handlers could be found for logger \"dajaxice\"</p>\n\n<p>I googled, but couldn't find such error.</p>\n\n<p>Anyone can help why python installation does not support this Templat_Loaders?</p>\n\n<p>My python version is 2.7.3, using os x v10.8</p>\n"},{"tags":["django","orm","django-models","django-signals"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12960258,"title":"Django - Check diference between old and new value when overriding save method","body":"<p>thanks for your time.</p>\n\n<p>I'm on Django 1.4, and I have the following code: Its the overriden save method for my <code>Quest</code> model.</p>\n\n<pre><code>@commit_on_success\n   def save(self, *args, **kwargs):\n       from ib.quest.models.quest_status_update import QuestStatusUpdate\n       created = not self.pk\n\n       if not created:\n           quest = Quest.objects.get(pk=self)\n           # CHECK FOR SOME OLD VALUE\n       super(Quest, self).save(*args, **kwargs)\n</code></pre>\n\n<p>I couldn't find out a smart way of doing this. It seems very silly to me to have to make a new query for the object i'm currently updating in order to find out an old instance value.</p>\n\n<p>Is there a better way to do this?</p>\n\n<p>Thank you all.</p>\n\n<p>Francisco</p>\n"},{"tags":["python","html","css","django","twitter-bootstrap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12960553,"title":"Sometimes STATIC_URL doesn't work?","body":"<p>I'm trying to use Twitter Bootstrap in Django.  I've got it working for the most part.\nI have a profile.html template that links the CSS correctly but I have a user_timeline.html template that doesn't prepend the STATIC_URL.</p>\n\n<p>user_timeline.html does extend base.html which has the link to the CSS.</p>\n\n<p>On my profile.html I get</p>\n\n<pre><code> &lt;link href=\"/static//css/bootstrap.css\" rel=\"stylesheet\"&gt;\n</code></pre>\n\n<p>which works, but on user_timeline.html I get</p>\n\n<pre><code>&lt;link href=\"css/bootstrap.css\" rel=\"stylesheet\"&gt;\n</code></pre>\n\n<p>Any ideas why it isn't prepending properly?</p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":60,"score":2,"question_id":12950250,"title":"get_list_or_404 with multiple filters in django","body":"<p>I have a Model name Student:</p>\n\n<pre><code>class Student(models.Model):\n    first_name = models.CharField(max_length=50)\n    last_name = models.CharField(max_length=50)\n    unique_id = models.CharField(max_length=15)\n    email = models.EmailField(blank=True)\n    grade = models.ForeignKey(Grade)\n    hr_teacher = models.ForeignKey(User, related_name='hr_students')\n    parent = models.ForeignKey(User, related_name='children')\n\n    def __unicode__(self):\n        return u'%s, %s (G-%s, %s)' % (self.last_name, self.first_name, self.grade.short_name, self.unique_id)\n\n    def hr_teacher_absent(self):\n        return self.hr_teacher.groups.filter(name='Absent Teachers').count() &gt; 0\n\n    def hr_booking(self):\n        return self.booking_set.filter(teacher=self.hr_teacher,status__uses_space=True)\n\n    def has_booking(self):\n        return bool(self.hr_booking())\n\n    def hr_booking_for_event(self, ptc_event):\n        return self.hr_booking().filter(period__ptc_event=ptc_event)\n\n    def has_booking_for_event(self, ptc_event):\n        return bool(self.hr_booking_for_event(ptc_event))\n\n    def delete_all_bad_bookings(self):\n        bad_bookings = self.booking_set.exclude(teacher=self.hr_teacher).delete()\n\n    class Meta:\n        ordering = ['grade','last_name','first_name']\n</code></pre>\n\n<p>Each Student has a Home Room Teacher which is a User in Group name 'Teachers' (those are default user, group defined in django's admin). I'm trying to get a list of user in group Teachers who has at least 1 Students. Here's my code:</p>\n\n<pre><code>teacher_list_db = get_object_or_404(Group, name=\"Teachers\").user_set.annotate(num_students=Count('hr_students')).filter(num_students__gt=0).order_by(\"last_name\",\"first_name\")\n</code></pre>\n\n<p>and it returned an empty array.</p>\n\n<p>I read the django documentation and found out this method:</p>\n\n<pre><code>get_list_or_404(klass, *args, **kwargs)\n</code></pre>\n\n<p>I tried and got stuck here:</p>\n\n<pre><code>teacher_list_db = get_list_or_404(User.objects.order_by('last_name', 'first_name'), groups__name='Teachers')\n</code></pre>\n\n<p>I don't know how to do with the annotation part which counts the number of students has the same teacher!</p>\n"},{"tags":["python","django","apache","wsgi","django-wsgi"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12960212,"title":"How do I make Django admin URLs accessible to localhost only?","body":"<p>What is the simplest way to make Django /admin/ urls accessible to localhost only?</p>\n\n<p>Options I have thought of:</p>\n\n<ul>\n<li>Seperate the admin site out of the project (somehow) and run as a different virtual host (in Apache2)</li>\n<li>Use a proxy in front of the hosting (Apache2) web server</li>\n<li>Restrict the URL in Apache within WSGI somehow.</li>\n</ul>\n\n<p>Is there a standard approach?</p>\n\n<p>Thanks!</p>\n"},{"tags":["django","django-views","decorator"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12958000,"title":"Django, let decorator value be available in view function","body":"<p>I have a decorator:</p>\n\n<pre><code>def site_login_required(function=None):\n    def _dec(view_func):\n        def _view(request, *args, **kwargs):\n            gets site_id. checks stuff. if else.\n</code></pre>\n\n<p>This is called in the normal way:</p>\n\n<pre><code>@site_login_required\ndef frontPage(request, url_arg):  \n</code></pre>\n\n<p>The decorator finds a site_id. It would be nice to have this available in the frontPage function. Is that possible? If so how? </p>\n"},{"tags":["javascript","django","facebook","loops"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12959403,"title":"Javascript function into a loop, Django app","body":"<p>In my Django app I display a list of facebook friends. I would like to associate a facebook invite button for each of those friends.\nFor that I wan't to use a javascript function that allows me to invite a friend, and then pass this function into a loop.</p>\n\n<p>Here is my html code:</p>\n\n<pre><code>&lt;div id=\"fb-root\"&gt;&lt;/div&gt;\n{% for friend in group %}  \n&lt;p&gt;{{ friend.name }} &lt;a href='#' onclick=\"FacebookInviteOneFriend('{{friend.uid}}');\"&gt; Invite&lt;/a&gt;&lt;/p&gt;       \n{% endfor %}\n&lt;/div&gt;\n</code></pre>\n\n<p>And my javascript code:</p>\n\n<pre><code>FB.init({\nappId:XXXX,\ncookie:true,\nstatus:true,\nxfbml:true\n});\n\nfunction FacebookInviteOneFriend(UserId)\n{\nFB.ui({\nmethod: 'apprequests',\nmessage: 'My message'\nto: UserId\n});\n}\n</code></pre>\n\n<p>It doesn't work that way. I' don't know javascript so I don't find where my mistake is.</p>\n\n<p>Any help would be welcome</p>\n"},{"tags":["database","django","django-models"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12960063,"title":"Model Configuration for Product-Setting System","body":"<p>So I have these two models:</p>\n\n<pre><code>class ProductionSetting(models.Model):\n    name = model.CharField(max_length=64)\n    description = model.CharField(max_length=256, blank=True)\n    unit = model.CharField(max_length=8)\n    order = model.IntegerField()\n    equipment = model.ForeignKey(Equipment, db_index=True)\n\nclass Product(models.Model):\n    number = models.CharField(max_length=16)\n    description = models.CharField(max_length=256)\n    category = models.ForeignKey(ProductCategory)\n    company = models.ForeignKey(Company)\n    picture = models.ForeignKey('files.ProductPicture')\n    added_by = models.ForeignKey(User, related_name='%(app_label)s_%(class)s_added_by')\n    creation_date = models.DateTimeField(auto_now_add=True)\n    last_modified = models.DateTimeField(auto_now=True)\n</code></pre>\n\n<p>When I will be loading an equipment, I will allow the user to choose a certain product. Once the product is loaded with that equipment, I want to display the ProductionSettings for that machine and that specific product. I also want to store who added it, and keep an history of the settings for that product and that machine. There will be <strong>MULTIPLE</strong> products with that machine as well. Now, in the DB, should I just create another class to store that information? Something like that:</p>\n\n<pre><code> class ProductEquipmentSettings(models.Model):\n     product = FK(Product)\n     setting = FK(ProductionSetting)\n     date = datetime\n     value = CharField\n     author = FK(User)\n</code></pre>\n\n<p>I don't think that storing the Product FK in the ProductionSetting is a good idea, because I would want to have these settings to be independent of the products. For example, I want the user to create all the settings for his machine, and then eventually, set the value of that setting for each possible product.</p>\n\n<p>Final piece of the question. In terms of performance, should I have another FK \"equipment = FK(Equipment, db_index=True)\" when I retrieve the settings of that machine, for a certain product? If not, where should I have indexes?</p>\n"},{"tags":["python","django","django-templates"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1524,"score":0,"question_id":5229054,"title":"Django urldecode in template file","body":"<p>is there any way do the <code>urldecode</code> in Django template file? </p>\n\n<p>Just opposite to <a href=\"http://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#urlencode\" rel=\"nofollow\">urlencode</a> or <a href=\"http://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#escape\" rel=\"nofollow\">escape</a></p>\n\n<p>I want to convert <code>app%20llc</code> to <code>app llc</code></p>\n"},{"tags":["django","templates","text","input","spaces"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":12959360,"title":"Spaces in string in <input type=\"text\"> django templates [SOLVED]","body":"<p>Hello I have this code in a Django Template:</p>\n\n<p>&lt; input  type=\"text\" name=\"ppoisNomePOI\"  value={{ request.session.ppoisNomePOI }} ></p>\n\n<p>If my \"request.session.ppoisNomePOI\" is \"John\" then in the page it appears \"John\" in the input\nBut if my \"request.session.ppoisNomePOI\" is \"John Flanders Simpson\" it only appears \"John\"</p>\n\n<p>I assume it was a problem with the spaces in the value.</p>\n\n<p>Can anyone help me ?</p>\n\n<p>Just use : (Thanks to TheZ)</p>\n\n<p>&lt; input  type=\"text\" name=\"ppoisNomePOI\"  value=\"{{ request.session.ppoisNomePOI }}\" ></p>\n"},{"tags":["django","url-decode"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12959941,"title":"django custom filter for urldecode giving maximum recursion depth exceeded","body":"<p>i want to write a urldecode template filter and i have a template tag folder under my app with the following code : </p>\n\n<pre><code>from django import template\nfrom urllib import unquote\n\nregister = template.Library()\n\n@register.filter\ndef unquote(value):\n    return unquote(value)\n\nclass SetVarNode(template.Node):\n\n    def __init__(self, var_name, var_value):\n        self.var_name = var_name\n        self.var_value = var_value\n\n    def render(self, context):\n        try:\n            value = template.Variable(self.var_value).resolve(context)\n        except template.VariableDoesNotExist:\n            value = \"\"\n        context[self.var_name] = value\n        return u\"\"\n\n@register.tag(name='set')\ndef set_var(parser, token):\n    \"\"\"\n        {% set &lt;var_name&gt;  = &lt;var_value&gt; %}\n    \"\"\"\n    parts = token.split_contents()\n    if len(parts) &lt; 4:\n        raise template.TemplateSyntaxError(\"'set' tag must be of the form:  {% set &lt;var_name&gt;  = &lt;var_value&gt; %}\")\n    return SetVarNode(parts[1], parts[3])\n</code></pre>\n\n<p>then i am calling my registed filter in my template like this : </p>\n\n<blockquote>\n  <p>kmz.file|unquote</p>\n</blockquote>\n\n<p>Any ideas why?</p>\n"},{"tags":["html","django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12956926,"title":"django template","body":"<p>I have a drop-down list</p>\n\n<p>In my template,</p>\n\n<pre><code>    &lt;form name=\"languages\" method=\"post\"&gt;\n        &lt;select id=\"langSelect\" onchange=\"showDiv(this.value);\"&gt;\n           &lt;option&gt;en (default)&lt;/option&gt;\n           {% for ele in comments.languages.all %}\n               &lt;option&gt;{{ele.lang}}&lt;/option&gt;\n           {% endfor %}\n        &lt;/select&gt;\n        &lt;div&gt;&lt;a  onclick=\"getIndex()\"&gt;Submit&lt;/a&gt;&lt;/div&gt;\n\n    &lt;/form&gt;\n</code></pre>\n\n<p>Javascript:</p>\n\n<pre><code>function getIndex(){\n    var x = document.getElementById(\"langSelect\").selectedIndex;            \n}\n</code></pre>\n\n<p>In the html:</p>\n\n<p>{{obj.comments.all.index.value}} </p>\n\n<p>How can I get the value of index from getIndex() and pass it back to django template </p>\n\n<p>obj.comments[index].value and index = getIndex()</p>\n\n<p>{{obj.comments.all.index.value}}?</p>\n\n<p>Thanks.</p>\n"},{"tags":["django","jquery-ajax"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":45,"score":-2,"question_id":12959044,"title":"Django - how to retrieve data using jquery ajax","body":"<p>I have a database table that I'd like to retrieve and display via ajax, but I'm a bit confused as to how to do it. </p>\n\n<p>So, with the data pulled from the database inside my view:</p>\n\n<pre><code>printer_list = User.objects.all()\n</code></pre>\n\n<p>How do I then get that data to display in a table on the template?</p>\n"},{"tags":["django","list","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12957344,"title":"How to create 2D list of a database table and evaluate it in a template?","body":"<p>I've got a model class, House, with several columns. I want to get all the entries to this table, with all the columns, and display these on in a table in a template.</p>\n\n<p>Firstly, how do I pull all the information that I need out of the database (and into a 2d list?), and what tag could I use to access specific data in the table? </p>\n"},{"tags":["django","django-admin"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":567,"score":1,"question_id":5731814,"title":"How do I override help_text in django's admin interface","body":"<p>I have multiple admin sites, so different users get a different experience of editing the objects in the database. Each admin site has a different set of objects exposed, and a different styling. All of this can be done by overriding templates and ModelAdmin objects.</p>\n\n<p>I can't work out how to provide different help_text through the different sites. help_text is always taken straight from the model field definition, and there doesn't seem to be a way to override it.</p>\n\n<p>Am I missing something, or is this impossible?</p>\n"},{"tags":["django","django-templates","sorl-thumbnail"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":12956788,"title":"How to thumbnail static files?","body":"<p>I want to resize my static files with sorl thumbnail but it doesnt work</p>\n\n<p>here is my codes</p>\n\n<pre><code>{% if not new.photo %}\n\n{% with path=\"{{STATIC_URL}}/images/empty-news.jpg\" %}\n{% thumbnail path \"80x80\" crop=\"center\" as im %}\n&lt;a href=\"#\" class=\"image\"&gt;&lt;img alt=\"\" src=\"{{im.url}}\" class=\"frame2\"&gt;&lt;/a&gt;\n{% endthumbnail %}\n{% endwith %}\n\n{% else %}\n{% thumbnail new.photo \"80x80\" crop=\"center\" as im %}\n&lt;a href=\"{% url news_detail new.slug %}\" class=\"image\"&gt;\n&lt;img alt=\"\" src=\"{{im.url}}\" class=\"frame2\"&gt;&lt;/a&gt;\n{% endthumbnail %}\n{% endif %}\n</code></pre>\n\n<p>If I have image it shows image but when I dont have image I cant use default image because thumbnail doesn't work </p>\n"},{"tags":["django","django-flatpages"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12941036,"title":"Django simple-pages stable or not?","body":"<p>I want to create a pretty simple site with a few pages using Django. I guess I could use Wordpress. But there is some custom stuff (like a special kind of calendar app) that I rather do in Python than PHP.</p>\n\n<p>I came across simple-pages which seems like a nice middle way between flat-pages and a fullblown Django CMS (which just seems overkill). It can automatically generate menus. But it seems like it hasn't been updated in a long time. Is it deprecated or is it stable? Or do flat-pages have the same functionality these days?</p>\n"},{"tags":["django","redirect","django-templates"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12956388,"title":"Django redirect to a template with variables","body":"<p>I'm a beginner in django, and i made a sign up system. When a user register a new user, he'll be directed back to the sign in page template, with a <code>message</code> variable that a new user is added.</p>\n\n<p>I've read that using <code>HttpResponseRedirect</code> after a successful <code>POST</code> request is recommended. So i can't use <code>render</code> as far as i know.</p>\n\n<p>So how to achieve this using <code>HttpResponseRedirect</code> ?</p>\n"},{"tags":["django","node.js","internationalization"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":226,"score":0,"question_id":8018678,"title":"node.js i18n like django","body":"<p>Any node.js module can generate i18n files like django does?</p>\n\n<p>I have check several node.js i18n module, it just do something ilke get/set things, but nothing about generate</p>\n"},{"tags":["django","list","url"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12955323,"title":"Django retrieve GET list","body":"<p>I'm new with Django and I have a URL list such as:</p>\n\n<p>example.com?item=test&amp;item=for&amp;test=url</p>\n\n<p>I know how to retrieve this value in the view:</p>\n\n<p>a = request.GET.getlist('item')</p>\n\n<p>My problem is: How can I retrieve this list in the template?</p>\n\n<p>Thanks!!</p>\n"},{"tags":["django","json","unicode"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12955534,"title":"Import unicode characters from JSON file in Django","body":"<p>I have a JSON file like this:</p>\n\n<pre><code>[\n{\n    \"model\": \"CDSHT.chapter\",\n    \"pk\": 1,\n    \"fields\": {\n    \"novel_ID\": \"1\",\n        \"novelName\": \"VTB\",\n        \"chapName\": \"Chap01\",\n        \"content\": \"Chương 01:\\r\\\"Cộng hòa xã hội chủ nghĩa Việt Nam\\u000b Độc lập tự do hạnh phúc!\\\"\"\n    }\n  }\n]\n</code></pre>\n\n<p>i use command \"loaddata\" to import that JSON file in to the Database then load it to html. But i just got:</p>\n\n<pre><code>Chương 01:\nCộng hòa xã hội chủ nghĩa Việt Nam Độc lập tự do hạnh phúc!\n</code></pre>\n\n<p>instead what i want:</p>\n\n<pre><code>Chương 01:\n\"Cộng hòa xã hội chủ nghĩa Việt Nam\n Độc lập tự do hạnh phúc!\"\n</code></pre>\n\n<p>The Unicode character: \\\" and \\u000b(end line) was not recognized. Please help me!\nThanks in advance for every suggestion!</p>\n"},{"tags":["django","django-queryset"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12952675,"title":"Django annotate by calculated field in extra select","body":"<p>I have People model with City and Age fields.\nI need to get count of people in each city segmented by 3 different age ranges &lt; 20, between 20 and 50 and > 50. I need do this in one SQL query.</p>\n\n<pre><code>People.objects.extra(select={'young':'if(age &lt; 20, 1, 0)', \n                             'med':'if (age &gt; 20 and age &lt; 50, 1, 0)',\n                             'old':'if (age &gt; 50, 1, 0)'}).\\\n                             values('city').\\\n                             annotate(sum_young=Sum('young'), \n                                      sum_med=Sum('med'), \n                                      sum_old=Sum('old'))\n</code></pre>\n\n<p>This is not working, seems annotate can't do by calculated fields.</p>\n\n<p>MySQL only solution is enough.</p>\n"},{"tags":["django","jquery-ajax","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12954727,"title":"Django - Ajax error while saving form values","body":"<p>I have an <em>Edit Form</em> page which edits existing posts. i wanted to put a <em>Preview</em> link into this page. what i want is ; when i click preview link it must ; </p>\n\n<ol>\n<li>take form element's current values and write them into my\nPost_Preview Model.  </li>\n<li>then , ajax function must redirect to my *show_preview* page which i defined in views and urls.</li>\n<li>and in show_preview page (preview.html) it must be rendered. (form's\ncurrent values)</li>\n</ol>\n\n<p>this is how it must works. And here are my codes :</p>\n\n<p><strong>and my edit-form page:</strong></p>\n\n<pre><code>&lt;form method=\"post\" action=\"\"&gt;\n    {% csrf_token %}\n    &lt;input type=\"hidden\" id=\"post_owner\" value=\"{{ post.owner }}\"/&gt;&lt;/td&gt;\n    &lt;input type=\"hidden\" id=\"post_id\" value=\"{{ post.id }}\"&gt; &lt;/td&gt;\n\n            {{ form.title }}\n            {{ form.body }}\n\n    &lt;a href=\"#\" id=\"preview\"&gt;Preview&lt;/a&gt;\n    &lt;input type=\"submit\" value=\"Save\" style=\"cursor: pointer;\"/&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p><strong>ajax Function:</strong></p>\n\n<pre><code>$(function(){\n\n    $('#preview').click(function() {\n\n        var title = $('#id_title').val();\n        var body = $('#id_body').val();\n        var owner = $('#post_owner').val(); //hidden value at form page\n        var id = $('#post_id').val();  //hidden value at form page\n\n     var ajaxOptions = {\n         type:'post',\n         url : '/admin/post/save_preview/', //save_preview's url\n         data : {\n             'title' : title,\n             'body'  : body,\n             'owner' : owner,\n             'id'    : id\n         },\n         success: function(){\n             window.open(\"/blog/\"+owner+\"/preview/\"+id); //show_preview's url\n         },\n         error: function(){\n            alert('There is an Error'); //this is what i see when click preview link.\n         }\n     };\n       $.ajax(ajaxOptions);\n});\n});\n</code></pre>\n\n<p><strong>my save_preview view:</strong></p>\n\n<pre><code>def save_preview(request):\n    title = request.POST['title']\n    body = request.POST['body']\n    owner = request.POST['owner']\n    post_id = request.POST['id']\n    try:\n        preview = Post_Preview(id=post_id, title=title, body=body, owner=owner)\n        preview.save()\n    except:\n        pass\n    return HttpResponse(200)\n</code></pre>\n\n<p><strong>my show_preview view:</strong></p>\n\n<pre><code>def show_preview(request,post_id,username):\n    preview = Post_Preview.objects.get(id=post_id)\n\n    return render_to_response('preview.html',{'post': preview}, context_instance=RequestContext(request))\n</code></pre>\n\n<p><strong>my related url lines:</strong></p>\n\n<pre><code>url(r'^admin/post/save_preview/', view='save_preview' ,name='save_preview'),\nurl(r'^blog/(?P&lt;username&gt;[-\\w]+)/preview/(?P&lt;post_id&gt;\\d+)', view='show_preview', name='show_preview'),\n</code></pre>\n\n<p>When i click Preview link at edit-form page : it shows 'There is an Error' error; which is defined in ajax function.</p>\n\n<p>thank you!</p>\n\n<p>edit : there is more code before my ajax function in js file (which are related to django-ajax relation ):</p>\n\n<pre><code>function getCookie(name) {\n    var cookieValue = null;\n    if (document.cookie &amp;&amp; document.cookie != '') {\n        var cookies = document.cookie.split(';');\n        for (var i = 0; i &lt; cookies.length; i++) {\n            var cookie = jQuery.trim(cookies[i]);\n            // Does this cookie string begin with the name we want?\n            if (cookie.substring(0, name.length + 1) == (name + '=')) {\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                break;\n            }\n        }\n    }\n    return cookieValue;\n}\nvar csrftoken = getCookie('csrftoken');\n\nfunction csrfSafeMethod(method) {\n    // these HTTP methods do not require CSRF protection\n    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));\n}\nfunction sameOrigin(url) {\n    // test that a given url is a same-origin URL\n    // url could be relative or scheme relative or absolute\n    var host = document.location.host; // host + port\n    var protocol = document.location.protocol;\n    var sr_origin = '//' + host;\n    var origin = protocol + sr_origin;\n    // Allow absolute or scheme relative URLs to same origin\n    return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||\n        (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||\n        // or any other URL that isn't scheme relative or absolute i.e relative.\n        !(/^(\\/\\/|http:|https:).*/.test(url));\n}\n$.ajaxSetup({\n    beforeSend: function(xhr, settings) {\n        if (!csrfSafeMethod(settings.type) &amp;&amp; sameOrigin(settings.url)) {\n            // Send the token to same-origin, relative URLs only.\n            // Send the token only if the method warrants CSRF protection\n            // Using the CSRFToken value acquired earlier\n            xhr.setRequestHeader(\"X-CSRFToken\", csrftoken);\n        }\n    }\n});\n</code></pre>\n\n<p>edit 2: when i add try/except blocks for save_preview ; i didnt throw popup error page. it  redirected to save_preview page and threw and error :</p>\n\n<pre><code>Post_Preview matching query does not exist.\n\n156. preview = Post_Preview.objects.get(id=post_id)\n</code></pre>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12955176,"title":"How could I create a self-updating django field that stores all instances of a given Model?","body":"<p>Suppose I have the following model:</p>\n\n<pre><code>class Cow (models.Model):\n    name = models.CharField(max_length=100)\n    color = models.CharField(max_length=100, default=\"brown\")\n</code></pre>\n\n<p>On our farm we have many cows. Typically, the farmer takes cows to the vet in defined batch:</p>\n\n<pre><code>class Cow_Batch(models.Model):\n    batch_name = models.CharField(max_length=100)\n    cows = models.ManyToManyField(Cow)\n</code></pre>\n\n<p>In our admin, we can create a Cow_Batch, allowing our farmer to easily take Daisy and Debbie (two sisters with a similar medical condition) to the vet together.</p>\n\n<p>I'd like to be able to have 'all' as a Cow_Batch. That's easy enough to populate myself, but I'd like the contents of 'all' to update automatically when new cows are added to the herd. The end purpose is to be able to use:</p>\n\n<pre><code>class Vet_Visit(models.Model):\n    cows_brought_to_vet = models.ForeignKey(Cow_Batch)\n</code></pre>\n\n<p>and have 'all' as a valid possibility, among others.</p>\n"},{"tags":["javascript","jquery","django","jsp"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12954375,"title":"Which technique to use to pass arbitrary string from template engine to JavaScript (or why do not use fake HTML attributed)","body":"<p>No mutter which template engine used for my question.</p>\n\n<p>I involved in project where find such code in JSP page:</p>\n\n<pre>\n&lt;li class=\"clazz\" attr=\"XXX\">...&lt;/li>\n</pre>\n\n<p>and jQuery code which extract value from <em>attr</em> attribute:</p>\n\n<pre>\n$(\".clazz\").click(function () {\n   var v = $(this).attr(\"attr\");\n   ...\n}\n</pre>\n\n<p>Actually <em>XXX</em> is URL. I change JSP code to:</p>\n\n<pre>\n&lt;li class=\"clazz\">&lt;a href=\"XXX\">...&lt;/a>&lt;/li>\n</pre>\n\n<p>and JS code to:</p>\n\n<pre>\n$(\".clazz\").click(function () {\n   var v = $(this).find(\"a\").attr(\"href\");\n   ...\n}\n</pre>\n\n<p>Now I reach goal to have valid HTML.</p>\n\n<p>Using fake tags simplify code but produce invalid HTML.</p>\n\n<p>Is there easy way to pass data to JavaScript and preserve code simplicity?</p>\n\n<p>Which technique to use to pass arbitrary string from template engine to JavaScript?</p>\n\n<p>I assume that this data shouldn't rendered to user and expect that it shouldn't be based on CSS like by hiding data:</p>\n\n<pre>\n&lt;span id=\"real-points-count\" style=\"display:none\">${param}\n</pre>\n\n<p><strong>UPDATE</strong>. How is this code:</p>\n\n<pre>\n&ltdiv class=\"clazz\" min=\"MINDATA\" max=\"MAXDATA\">...&lt;>\n</pre>\n\n<p>can be transformed to carry <em>MINDATA</em> and <em>MAXDATA</em> to JavaScript in way to get valid <strong>HTML5</strong>?</p>\n"},{"tags":["windows","django","dashboard","django-grappelli"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":669,"score":0,"question_id":4800480,"title":"Implementing Django Grappelli Dashboard","body":"<p>I've happily implemented Grappelli for the first time. I was trying to implement the dashboard but it doesn't seem to be activating. Trouble is, I'm not sure what it looks like.</p>\n\n<p>The Grappelli dashboard.py is applied (generated by createdashboard)</p>\n\n<p>settings.py (interesting parts)</p>\n\n<pre><code>MEDIA_ROOT = 'I:/xampp/htdocs/project/media'\nMEDIA_URL = 'http://cdn.pd/'\nADMIN_MEDIA_PREFIX = 'http://cdn.project/'\nGRAPPELLI_ADMIN_HEADLINE = 'Admin Headline'\nGRAPPELLI_INDEX_DASHBOARD = 'pd.dashboard.CustomIndexDashboard'\nGRAPPELLI_ADMIN_URL = '/admin/'\n\nTEMPLATE_DIRS = (\n    'I:/xampp/htdocs/pd/src/templates'\n)\n\nINSTALLED_APPS = (\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    'django.contrib.messages',\n    'grappelli.dashboard',\n    'grappelli',\n    'django.contrib.admin',\n    'south',\n)\n</code></pre>\n\n<p>does anyone have any pointers? Heres a format of my project. Its empty aside from basic django initiation:</p>\n\n<pre><code>project  - pd\n         |\n         |- dashboard.py\n         |- urls.py\n         |- settings.py\n</code></pre>\n\n<p>Any pointers would be cool.</p>\n"},{"tags":["django","locale"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":12946830,"title":"how to add new languages into Django? My language \"Uyghur\" or \"Uighur\" is not supported in Django","body":"<p>how to add new languages into Django?  My language \"Uyghur\" or \"Uighur\" is not supported in Django.</p>\n\n<p>Can I add new language locale file in my project and use it?\nfor example: zh_UG</p>\n\n<p>this language is not supported in Django.</p>\n"},{"tags":["django","io","celery"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12950682,"title":"[[Django Celery]] Celery blocked doing IO tasks","body":"<p>I use celery to do some IO tasks, such as grab remote image, sending email to users.\nBut celery sometimes blocked with no logs. At this time, it won't do any task i send. I have to restart it, it begin to work where it blocked. </p>\n\n<p>It puzzles me for a very long time. What can i do ? And what is the best practice for distributing IO tasks with celery?</p>\n"},{"tags":["python","django","ubuntu","celery","upstart"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12934672,"title":"Upstart job to run Celery doesn't stop all the worker processes","body":"<p>I have written an Upstart job to run celery in my Ubuntu server. Here's my configuration file called <code>celeryd.conf</code></p>\n\n<pre><code># celeryd - runs the celery daemon\n#\n# This task is run on startup to run the celery daemon\n\ndescription \"run celery daemon\"\n\nstart on startup\nexpect fork\nrespawn\n\nexec su - trakklr -c \"/app/trakklr/src/trakklr celeryd --events --beat --loglevel=debug --settings=production\"\n</code></pre>\n\n<p>When I execute <code>sudo service celeryd start</code>, the celeryd process starts just fine and all the x number of worker process start fine.</p>\n\n<p>..but when I execute, <code>sudo service celeryd stop</code>, it stops most of the processes but a few processes are left hanging.</p>\n\n<p>Why is this happening? I'm using Celery 2.5.3.</p>\n\n<hr>\n\n<p>Here's an issue from the Github tracker.</p>\n\n<p><a href=\"https://github.com/celery/django-celery/issues/142\" rel=\"nofollow\">https://github.com/celery/django-celery/issues/142</a></p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":12953110,"title":"During massive Django code reorg, \"No module named foobar\"; foo and bar are part of my app, but not foobar","body":"<p>I'm doing a massive code reorg of my Django project, to split it into apps.</p>\n\n<p>After having moved a lot of code around, I get this error when I try to run the project:</p>\n\n<p><code>Error: no module named foobar</code></p>\n\n<p>Note that both <code>foo</code> and <code>bar</code> are names of Django apps in my project, but I have nothing like <code>foobar</code> around.</p>\n\n<p><code>grep foobar . -r</code> = no results.</p>\n\n<p><code>find . -name '*foobar*'</code> = no results.</p>\n\n<p>I'm stumped. Does anybody have ideas?</p>\n"},{"tags":["jquery","django","code-duplication"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":12953109,"title":"How do I avoid duplicating HTML in javascript and the backend?","body":"<p>I'm writing a facebook-like posting system where a user can type in a text comment and have it immediately appear on the page in a properly styled and formatted box, as simultaneously the text is ajax'd to the backend to be stored. A comment is fundamentally a HTML5 , but there's a fairly complicated level of structure to it, so the actual text should appear in a div within a div within a div ultimately within the article. I'm doing this DOM manipulation with jquery.</p>\n\n<p>When the page is generated, the backend needs to iterate over every comment, and insert the comment text (as well as metadata like name of poster, timestamp, etc.) into the appropriate places in a django template. </p>\n\n<p>This presents a conceptual problem - I'm now duplicating a fairly complicated set of nested html tags with appropriate class and id names in two places in my code: the js file with the jquery to add a new comment, and the backend templating engine to generate the initial page html. This is already a problem for me because I'm still in the process of designing exactly what needs to happen style-wise in a comment and having this complicated bundle of HTML in two places in my code has already tripped me up. </p>\n\n<p>What is the best practice for dealing with this sort of HTML duplication? I can't remove the jquery, because I need that to handle the dynamic addition of comments. At the same time, it seems wasteful to give up the power of django's templating engine to build the HTML structure I need once and fill in the details on a per-comment basis - plus I don't want to always render a blank page and build up possibly very many comments dynamically with jquery DOM manipulation every time the user loads a page. Is there something I'm not thinking of that would solve this problem?</p>\n"},{"tags":["html","django","include"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12951982,"title":"Import an HTML file into an other HTML file","body":"<p>I would like to know how to import an HTML file into an other HTML file.</p>\n\n<p>Both files refer to a lot of different files, so I would prefer to keep them into two different folders instead of copying one file into the other.</p>\n\n<hr>\n\n<p>For now, I'm developing locally, with Django.</p>\n"},{"tags":["django","django-models"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12952163,"title":"Django joining 2 tables which has 2 join conditions","body":"<p>I have 2 tables say A and B</p>\n\n<pre><code>class A(models.Model):\n  A_val= models.DecimalField(max_digits=4, decimal_places=0)\n  A_name= models.CharField(max_length=32, blank=True)\n  A_type= models.CharField(max_length=32, blank=True)\n  unique_together(A_val,A_name)\n\n class B(models.Model):\n    A_val=models.ForeignKey(A)\n    A_name=models.ForeignKey(A)\n</code></pre>\n\n<p>Now i want </p>\n\n<pre><code>select * from B,A where A.A_val=B.A_val and A.A_name=B.B_name and A_type=\"typename\"\n</code></pre>\n\n<p>I did the following as told by miki725 to achieve this </p>\n\n<pre><code>B.objects.filter(A_name__A_type='type_name').select_related('A_name', 'A_val')\n</code></pre>\n\n<p>But this is equivalent to </p>\n\n<pre><code>select * from B,A where A.A_name=B.B_name and A_type=\"typename\"\n</code></pre>\n\n<p>It ignores <strong>A.A_val=B.A_val</strong> . I want the join to be based on all 3 conditions. How can i do this</p>\n"},{"tags":["django","performance","templates","render","nodes"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":12952707,"title":"Is there a performance hit for Django tags using takes_context?","body":"<p>I sometimes access the context by supplying 'takes_context=True' for Django tags; Usually to acess the request.</p>\n\n<p>But are there performance implications.</p>\n\n<p>My mental model of how templates worke is that the tag function assembles the nodes representing the template, and that thereafter these nodes can render content without recreating the node, or reparsing the template.</p>\n\n<p>But surely, if the tag function can be made to return different nodes, depending on\nSomething in the context, then the nodes will have to be recreated everytime the context is different (I.E every time).</p>\n\n<p>Either that, or you are stuck with what nodes you get first time round, in which case you shouldn't return nodes based on anything in the context (in which case, what's the point?).</p>\n\n<p>Can someone clear this up for me? I' using Django 1.4.2.</p>\n"},{"tags":["django","django-forms","django-modelformsets"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":37,"score":3,"question_id":12950661,"title":"modelformset_factory does not honors extra parameter","body":"<p>Django: 1.4.1</p>\n\n<p>Model:</p>\n\n<pre><code>class Hoja(models.Model):\n    nombre = models.CharField(max_length=200) # requerido\n\nclass Linea(models.Model):\n    hoja = models.ForeignKey(Hoja) # requerido\n    nombre = models.CharField(max_length=200) # requerido\n    padre = models.ForeignKey('self', null=True, blank=True, related_name='hijo')\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>lineas = Linea.objects.filter(hoja=alt).order_by('id')\nLineaHojaSet = modelformset_factory(Linea, can_delete=True, extra=1 if request.POST.has_key('siguiente') else 0)\nformset = LineaHojaSet(request.POST or None, queryset=lineas)\nif request.method=='POST':\n    # process formset\nreturn render_to_response('template.html', {'formset':formset}, context_instance=RequestContext(request))\n</code></pre>\n\n<p>Template:</p>\n\n<pre><code>&lt;table&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;&lt;th&gt;Nombre&lt;/th&gt;&lt;th&gt;Borrar&lt;/th&gt;&lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        {% for fs in formset %}\n        &lt;tr&gt;\n            &lt;td&gt;{{ fs.nombre }}&lt;/td&gt;\n            &lt;td&gt;{{ fs.id }}&lt;/td&gt;\n        &lt;/tr&gt;\n        {% endfor %}\n    &lt;/tbody&gt;\n&lt;/table&gt;\n&lt;input type=\"submit\" name=\"siguiente\" value=\"Añadir siguiente\" /&gt;\n</code></pre>\n\n<p>When I submit the \"siguiente\" button, I can see than the formset is getting the correct extra field of 1, but in the webpage, the only rows showing are the database ones. It's this a bug, or I'm doing something wrong?</p>\n"},{"tags":["django","django-forms"],"answer_count":2,"favorite_count":3,"up_vote_count":7,"down_vote_count":0,"view_count":2839,"score":7,"question_id":2417127,"title":"How do I get the values of all selected checkboxes in a Django request.POST?","body":"<p>Hi I have an array of checkboxes e.g.</p>\n\n<pre><code>&lt;input type=\"checkbox\" name=\"checks[]\" value=\"1\" /&gt;\n&lt;input type=\"checkbox\" name=\"checks[]\" value=\"2\" /&gt;\n&lt;input type=\"checkbox\" name=\"checks[]\" value=\"3\" /&gt;\n&lt;input type=\"checkbox\" name=\"checks[]\" value=\"4\" /&gt;\n</code></pre>\n\n<p>How do I access these in the view.py if more than one is selected?</p>\n\n<p>I have tried </p>\n\n<pre><code>request.POST['checks']\n</code></pre>\n\n<p>but that only gives me the last value.  What I want is all the ones that have been selected in a list e.g. 1,3,4</p>\n\n<p>Thanks</p>\n"},{"tags":["django","import","project","aptana3"],"answer_count":3,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":2905,"score":6,"question_id":6113985,"title":"Import existing project in Aptana","body":"<p>I created a Django(1.2.4) project with just a text editor and the command line, now I have installed Aptana Studio 3 but I cannot import that project. I can create a new django project, pydev is correctly installed and it works. </p>\n\n<p>In Aptana, I tried <strong>Import Projects</strong>, but it doesnt recognize my project's root directory \"<em>No projects are found to import</em>\".\nbefore replacing settings, models, views, etc,.. with the contents of my project (what I dont like), I want to ask: </p>\n\n<p>Is there a better way to import the project??</p>\n\n<p>You can find a more complete answer <a href=\"http://pydev.org/faq.html#how_do_i_import_existing_projects_sources_for_a_dj\" rel=\"nofollow\">Here</a>.</p>\n"},{"tags":["python","django","http","heroku"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12935030,"title":"Django url redirect issue","body":"<p>I have a view (Let's call it <code>handle_login_redirection</code>) that handles log-in from a url and redirects to an appropriate url based on the request. This has been working fine. </p>\n\n<p>Now when I use a custom domain and add the <code>r'^$'</code> pattern to my <code>urlconf</code> so that the Top Level Domain (TLD - www.mysite.com) is redirected to the same view that handles login (i.e  <code>handle_login_redirection</code>), I can see that the urls are not rewritten in the browser even when the page is correctly redirected.</p>\n\n<p>Even other urls on the site, while they are directed fine, do not change to their corresponding url path and instead show the TLD in the browser. Is there anything wrong with the url pattern or is there a better way to handle TLD redirects? </p>\n\n<p>Also note, I'm deployed to Heroku and there is no Nginx,Apache to configure url rewrites.</p>\n"},{"tags":["django","django-models"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12946441,"title":"django joining 2 tables which has 2 foreign keys","body":"<p>I have 2 tables say TableA and TableB</p>\n\n<pre><code>   class A(models.Model)\n      A_name = models.CharField(max_length=48,primary_key=True)\n      A_version = models.DecimalField(max_digits=3, decimal_places=0,null=False,blank=False)\n      A_type = models.CharField(max_length=32, blank=True)\n      class Meta:\n             unique_together = (\"A_name\", \"A_version\") \n\n   class B(models.Model)\n     B_number = models.CharField(max_length=32 ,primary_key=True)\n     A_name = models.ForeignKey(A,related_name=\"AA_name\",on_delete=models.DO_NOTHING)\n     A_version = models.ForeignKey(A,related_name=\"AA_version\",on_delete=models.DO_NOTHING)\n         class Meta:\n             unique_together = (\"B_number\",\"A_name\", \"A_version\") \n</code></pre>\n\n<p>Now i want to do something like this: \n        select * from A, B where B.B_name=A.A_name and B.B_version=A.A_version and     A.A_type=\"type_name\". I can't perform a get as A_type is not unique and it can return mutiple objects. Plz help</p>\n"},{"tags":["python","django","django-pagination"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12942047,"title":"django endless pagination(twitter style) not working - .endless_more class not in html but used in js","body":"<p>i am using <code>django endless pagination</code> . its working normally that just shows the numbers at the bottom . </p>\n\n<p>but, i tried to integrate twitter style into it:</p>\n\n<p><a href=\"http://django-endless-pagination.readthedocs.org/en/latest/twitter_pagination.html#pagination-on-scroll\" rel=\"nofollow\">http://django-endless-pagination.readthedocs.org/en/latest/twitter_pagination.html#pagination-on-scroll</a></p>\n\n<p>I have followed exactly but didnt work . </p>\n\n<p>When I looked at the js code, i have seen they have used  <code>.endless_more</code> in <code>js</code> class, but the generated html file has only two classes for links : </p>\n\n<pre><code>1)endless_page_current\n2)endless_page_link\n</code></pre>\n\n<p>but they used <code>a.endless_more</code> in <code>js</code>.</p>\n\n<p>Can you tell me the correct way to implement? </p>\n\n<p>Thanks</p>\n\n<p>Views : </p>\n\n<pre><code>from endless_pagination.decorators import page_template\n@page_template(\"my_index_page.html\")\ndef myview(request,template='my_index.html', extra_context=None):\n  data = {}\n if extra_context is not None:\n     data.update(extra_context)\n\n myobj = Myobj.objects.all()\n data['myobj'] = myobj\n return render_to_response(template, data, context_instance=RequestContext(request))\n</code></pre>\n\n<p>Template : </p>\n\n<p>my_index.html</p>\n\n<pre><code> &lt;script src=\"http://code.jquery.com/jquery-latest.js\"&gt;&lt;/script&gt;\n&lt;script src=\"{{ STATIC_URL }}js/endless.js\"&gt;&lt;/script&gt;\n&lt;script src=\"{{ STATIC_URL }}js/endless_on_scroll.js\"&gt;&lt;/script&gt;\n {% include page_template %}\n</code></pre>\n\n<p>my_index_page.html</p>\n\n<pre><code> {% load templatetags %}\n&lt;center&gt;\n&lt;div&gt;\n{% load endless %}\n{% paginate myobj %}\n{% for obj in myobj %}\n\n {{  obj.name }}\n\n\n {% endfor %}\n\n {% show_pages %}\n\n  &lt;/div&gt; \n &lt;center&gt;\n</code></pre>\n\n<p>Here, I seriously beleive that i need to add some classes like endless_more , which the django-endless-documentation missed.</p>\n"},{"tags":["django","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12949484,"title":"How to check for a value's datatype inside django template?","body":"<p>I want to get the datatype of a value in django template. I am sure there is a way because when you do\n<code>value|date:\"Y-m-d\"</code>\ndjango template understands that the value is timestamp. How does django do it?</p>\n"},{"tags":["django","amazon-ec2","ip"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":454,"score":1,"question_id":9323076,"title":"EC2 hosts Django with IP address can't be assigned-to error","body":"<p>I have a EC2 instance want to run Django app on it. This EC2 instance already have a Apache server on port 80. Now I want to host my Django project on port 9090. The instance has static IP 200.200.200.200. </p>\n\n<blockquote>\n  <p>ubuntu@ip-10-242-229-213:~/flanders$ python manage.py runserver\n  200.200.200.200:9090 Validating models...</p>\n  \n  <p>0 errors found Django version 1.3.1, using settings\n  'flanders.settings' Development server is running at\n  <a href=\"http://200.200.200.200:9090/\" rel=\"nofollow\">http://200.200.200.200:9090/</a> Quit the server with CONTROL-C. Error: That\n  IP address can't be assigned-to. ubuntu@ip-10-242-229-213:~/flanders$</p>\n</blockquote>\n\n<p>It tells me <code>Error: That IP address can't be assigned-to</code>, So I change to </p>\n\n<blockquote>\n  <p>ubuntu@ip-10-242-229-213:~/flanders$ python manage.py runserver\n  127.0.0.1:9090 Validating models...</p>\n  \n  <p>0 errors found Django version 1.3.1, using settings\n  'flanders.settings' Development server is running at\n  <a href=\"http://127.0.0.1:9090/\" rel=\"nofollow\">http://127.0.0.1:9090/</a> Quit the server with CONTROL-C.</p>\n</blockquote>\n\n<p>The application starts without problem but when I try to access it <code>http://200.200.200.200:9090/flandersapp/tags</code>, I doesn't work. By the way, I allow port 9090 in my security setting.</p>\n"},{"tags":["django","python-2.7","cloudinary"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12948040,"title":"django cloudinary upload remote image via url - invalid file name","body":"<p>I am trying to upload an image hosted on a third party server. Here is the code I am using:</p>\n\n<p>def saveEdit(request):</p>\n\n<pre><code>image = request.REQUEST.get('image','')\ntitle = request.REQUEST.get('title','')\ntype = request.REQUEST.get('type','')\nstate = request.REQUEST.get('state','')\n\ncimage = cloudinary.uploader.upload(image, public_id = 'img_'+request.user.__str__()+\"_\"+title, format='jpg')\n\nreturn HttpResponse('Got '+image + \" type: \"+type + \" state: \"+state + \" title:\"+request.user.__str__() + \"_\"+title + \" uploaded \"+cimage.image.url)\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre class=\"lang-html prettyprint-override\">\nInvalid image file\n\nRequest Method: GET\nRequest URL:    http://127.0.0.1:8000/saveEdit?image=http://app2.pixlr.com/_temp/507f95e1ec8d8337e5000002.jpg&type=jpg&state=copy&title=13838\nDjango Version: 1.4.1\nException Type: Exception\nException Value:    \nInvalid image file\nException Location: /Library/Python/2.7/site-packages/cloudinary/uploader.py in call_api, line 155\n</pre>\n\n<p>I am not sure what I am doing wrong - can you help?</p>\n\n<p>Thanks.</p>\n"},{"tags":["database","django","templates","object","comparison"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12949014,"title":"Comparing string with a database object django","body":"<p>Env: Python 2.7.3 || Django 1.4.1</p>\n\n<p>I am trying to limit web page menu options based on the Role of the logged in user. I have created a UserProfile class in the models and linked it to User as descibed in the docs (works perfectly in Django Admin, when adding users). For example, normal users will only have \"home\" and \"mytasks\" while admin users will also have \"domain tasks\" in addition.</p>\n\n<p>Here is code in the base.html template:</p>\n\n<pre><code>{% if user.get_profile.role == \"Admin\" %}\n    &lt;ul id=\"nav\"&gt;\n    &lt;li&gt;&lt;a href=\"{% url home %}\"&gt;Home&lt;/a&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;a href=\"{% url mytasks %}\"&gt;My Tasks&lt;/a&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;a href=\"{% url domaintasks %}\"&gt;Domain Tasks&lt;/a&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n</code></pre>\n\n<p>Above is checked when rendering the navigation bar for the whole site.</p>\n\n<p>I think the issue is in comparing a string with a database object (printed below) but haven't been able to find out how to get the comparison to work.</p>\n\n<pre><code>&gt;&gt;&gt; b = Role.objects.all()\n&gt;&gt;&gt; print b\n[&lt;Role: Admin&gt;, &lt;Role: User&gt;]\n</code></pre>\n"},{"tags":["django"],"answer_count":6,"favorite_count":17,"up_vote_count":5,"down_vote_count":0,"view_count":1690,"score":5,"question_id":1852237,"title":"Productive Django Web Development","body":"<p>I am just starting Django by reading the online django book. Could you provide productivity tips for Django web development.Code snippest? Which IDE you use? I am MySQL guy are there any benefits using PostgreSQL? I am using Linux(Ubuntu). Thanks a lot.</p>\n"},{"tags":["django","django-admin","django-authentication"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":217,"score":0,"question_id":5224828,"title":"Django - User admin - adding groups to list_display","body":"<p>As we know, ManytoMany relations can't be listed in list_display. Is there any work around to make it like group1, group2 etc?</p>\n"},{"tags":["python","django","templates","pdf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12943904,"title":"Creating a PDF based on a template using Python","body":"<p>I need to create a PDF that contains some text and text boxes, that should appear over a letterhead template for my company. It will cover multiple pages - and each page should have hte letterhead as the background (cant be an image sicne the links and so on in the letter head need to be clickable and the text copyable).</p>\n\n<p>Any idea how I can do this using python?? It would ideally come out of a django web app..</p>\n\n<p>Thanks for your help!</p>\n"},{"tags":["django","blackberry"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":12949347,"title":"django IOError: request data read error from BlackBerry","body":"<p>My site is an Intranet and has hundreds of hits by day. The issue is that django crash some times and I received this trace back error:</p>\n\n<pre><code>Traceback (most recent call last):\n\n  File \"/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py\", line 105, in get_response\n    response = middleware_method(request, callback, callback_args, callback_kwargs)\n\n  File \"/usr/local/lib/python2.7/dist-packages/django/middleware/csrf.py\", line 200, in process_view\n    request_csrf_token = request.POST.get('csrfmiddlewaretoken', '')\n\n  File \"/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py\", line 210, in _get_post\n    self._load_post_and_files()\n\n  File \"/usr/local/lib/python2.7/dist-packages/django/http/__init__.py\", line 284, in _load_post_and_files\n    self._post, self._files = QueryDict(self.raw_post_data, encoding=self._encoding), MultiValueDict()\n\n  File \"/usr/local/lib/python2.7/dist-packages/django/http/__init__.py\", line 248, in _get_raw_post_data\n    self._raw_post_data = self.read(content_length)\n\n  File \"/usr/local/lib/python2.7/dist-packages/django/http/__init__.py\", line 296, in read\n    return self._stream.read(*args, **kwargs)\n\nIOError: request data read error\n</code></pre>\n\n<p>And the relevant information is that I have found this  on debug data all times that program crash:</p>\n\n<pre><code> 'HTTP_USER_AGENT': 'Mozilla/5.0 (BlackBerry; U; BlackBerry 9300; es) AppleWebKit/534.8+ (KHTML, like Gecko) Version/6.0.0.668 Mobile Safari/534.8+',\n 'HTTP_X_RIM_HTTPS': '1.1',\n 'HTTP_X_WAP_PROFILE': '\"http://www.blackberry.net/go/mobile/profiles/uaprof/9300_edge/6.0.0.rdf\"',\n</code></pre>\n\n<p>App crash in login form. Some ideas?</p>\n"},{"tags":["python","django","django-models"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12949277,"title":"Python Django overflow error mktime argument out of range","body":"<p>I am developing an application using Django.</p>\n\n<p>In one of the models, I have a field <code>models.DateTimeField('date_of_birth')</code>.</p>\n\n<p>I was trying to add few records from the django admin site. Few records were added without any problems. But, the record with a date of birth 1956-01-01 is causing '<code>Overflow error</code>' with the exception value '<code>mktime argument out of range</code>'.</p>\n\n<p>Some Googling suggested that the mktime error comes when the date is earlier than the epoch(see <a href=\"http://stackoverflow.com/questions/2518706/python-mktime-overflow-error\">here</a>).</p>\n\n<p>The work around suggested there was to use datetime to find the difference from the epoch and save it instead.</p>\n\n<p>Is this not a bug? Is there any workaround instead of converting into the difference?</p>\n\n<p>For the court records, I am using python 2.7, django 1.4.1 and MySQL 5.5 on Windows 7 x64.</p>\n"},{"tags":["python","django","url","admin"],"answer_count":0,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":12935043,"title":"Django 1.4 model admin url rewrite for admin models \"tree like\" structure","body":"<p>I searched all over and did not find any answer to this. \nI'm using Django 1.4 and my problem is this:\nI'm trying to implement in contrib admin a \"tree like\" models structure.</p>\n\n<p>Let's say we have model A and model B that is a child of model A,\nin admin change_list grid of A when I click on an item I should redirect to model B change_list view and filter it with children of A.</p>\n\n<p>In previous version of Django I just rewrote the child models admin urls and added (?(\\d+)). </p>\n\n<p>Ex: add url ^(.+)/ was changed to ^(?&lt; parent_id >(\\d+))/(.+)/ so in change view I retrieved  the parent object and used it for all required filtering and also sent it in context to be displayed in breadcrumbs.</p>\n\n<p>It worked because in all admin templates then we had relative links for breadcrumbs, add, delete, history,..., so for example the Cancel button in confirm delete page had href='../../' and clicking on it would have taken me from app/model/parent_id/obj_id/delete to app/model/parent_id</p>\n\n<p>Due to the changes in 1.4 where all template links are generated with reverse url I obviously get errors with NoReverseMatch. A temporary fix was to pass the parent id in session so that I can have it in all child admin pages (I don't think that this is a good way to go for many reasons). </p>\n\n<p>Bottom line I'm trying to rewrite the admin urls in a way that won't interfere with current templates so that I can send the parent id in the url (sending it in the query string is also not an option)\nIs there anyone out there that did something similar?</p>\n"},{"tags":["python","django","onetoone","twython"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12946842,"title":"Can't get class as attribute which has one-to-one relationship?","body":"<p>I'm new to Python/Django so forgive me if I overlooked some easy mistakes.\nI'm trying to use Twython and pretty much copying the code <a href=\"https://github.com/ryanmcgrath/twython-django/blob/master/twython_django_oauth/views.py\" rel=\"nofollow\">here</a></p>\n\n<p>I can't seem to get the TwitterProfile with the dot syntax like this:</p>\n\n<pre><code>user = request.user.twitterprofile\n</code></pre>\n\n<p>It gives me the error:</p>\n\n<pre><code>DoesNotExist at /social/user_timeline/\nTwitterProfile matching query does not exist.\n</code></pre>\n\n<p>But if I get the profile like this:</p>\n\n<pre><code>user = TwitterProfile.objects.get(user = u)\n</code></pre>\n\n<p>It seems to work fine... Spent several hours just figuring that out..</p>\n\n<p>I also had to add a related_name for user in the TwitterProfile class:</p>\n\n<pre><code>user = models.OneToOneField(User, related_name='twitteruser')\n</code></pre>\n\n<p>Any idea why I can't access the TwitterProfile like that?</p>\n"},{"tags":["python","django","django-models","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":258,"score":1,"question_id":9023493,"title":"Adding first name and last name to Django-Registration","body":"<p>I have used the default Django <code>registration</code> (version 0.8) in my project where users only input their username, email, and password. However, I want users to also input their first name and last name on the registration page.  How can I do this easily? </p>\n"},{"tags":["python","django","linux","apache2"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":52,"score":4,"question_id":12946708,"title":"Close TCP port 80 and 443 after forking in Django","body":"<p>I am trying to fork() and exec() a new python script process from within a Django app that is running in apache2/WSGI Python.  The new python process is daemonized so that it doesn't hold any association to apache2, but I know the HTTP ports are still open.  The new process kills apache2, but as a result the new python process now holds port 80 and 443 open, and I don't want this.</p>\n\n<p>How do I close port 80 and 443 from within the new python process?  Is there a way to gain access to the socket handle descriptors so they can be closed?</p>\n"},{"tags":["django","web","python-3.x","web.py"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12946766,"title":"djnago or web to py for e-commerce & a normal website","body":"<p>I have to build an <strong>e-commerce website</strong> for a shopping system and a <strong>Content Management System website</strong> for a college.</p>\n\n<p>I have to chose either Django or web to py with <strong>Python 3.x</strong> and for the backend I am using <strong>Oracle 11g</strong>. I can't understand which one to use, which could be an easier\nsolution to go with for\nan e-commerce website and a simple CMS.</p>\n\n<p>Also, where can I find good tutorials for web to py &amp; Django??</p>\n\n<p>Thank You.</p>\n"},{"tags":["html","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12935385,"title":"Redirection after creating an object, Django","body":"<p>I'm new with Django and I'm creating a sport app. \nI allow users to create a match (choosing their team and their style), and I want to redirect them to a specific page (the one of their match) after they create it with a form.</p>\n\n<p>Here is my form:</p>\n\n<pre><code>   {% if user.is_authenticated %}\n   &lt;form method=\"post\"&gt;\n    {% csrf_token %}\n\n    &lt;input type=\"radio\" name=\"supporting\" value={{teamA.id}}  /&gt; {{teamA}}\n    &lt;input type=\"radio\" name=\"supporting\" value=\"\" /&gt; Neutre\n    &lt;input type=\"radio\" name=\"supporting\"  value={{teamB.id}}  /&gt; {{teamB}}\n    &lt;hr&gt;\n    &lt;input type=\"radio\" name=\"style\" value=\"1\" /&gt; Funny\n    &lt;input type=\"radio\" name=\"style\" value=\"3\" /&gt; Mixed\n    &lt;input type=\"radio\" name=\"style\" value=\"2\" /&gt; Technical\n    &lt;/br&gt;&lt;/br&gt;\n\n    &lt;input type=\"submit\" value=\"Create your match!\" /&gt;\n\n   &lt;/form&gt;\n\n {% else %}\n</code></pre>\n\n<p>I'm able to redirect a user when he chooses a match that is already created. But I don't know how to redirect to a specific page with the same button that is used to create the match.</p>\n\n<p>Thank you for your help</p>\n"},{"tags":["javascript","css","django","date"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12946498,"title":"changing class of element in django template using javascript function","body":"<p>In my django template I have some Event items listed using a for loop.The event has an associated date_of_occurrence attribute which is a python DateTime.I need to make the background for the event red ,if the datetime is less than current datetime.</p>\n\n<p>I thought of doing it like this</p>\n\n<p>In template</p>\n\n<pre><code>&lt;ul&gt;\n{% for  event in events %}\n  &lt;div id=\"event_div\"\n    &lt;li&gt;\n       event.name&lt;br&gt;\n       event.date_of_occurrence\n    &lt;/li&gt;\n  &lt;/div&gt;\n{% endfor %}\n&lt;/ul&gt;\n</code></pre>\n\n<p>In css</p>\n\n<pre><code>.pastevent{\n  background-color:red;\n}\n</code></pre>\n\n<p>I need a javascript function to set the class of element with id  <code>event_div</code>  to <code>pastevent</code>.Can someone tell me how this function can be implemented? </p>\n\n<p>As I understand the function is not fired by any click event ,but when page loads. How will the datetime value of event passed  from the template  to do the comparison  to the current javascript date?</p>\n"},{"tags":["python","django","rest","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12946504,"title":"tastypie PUT works but POST doesn't","body":"<p>I'm trying to implement a simple Django service with a RESTful API using tastypie. My problem is that when I try to create a WineResource with PUT, it works fine, but when I use POST, it returns a HTTP 501 error. Reading the tastypie documentation, it seems like it should just <em>work</em>, but it's not.</p>\n\n<p>Here's my api.py code:</p>\n\n<pre><code>    class CustomResource(ModelResource):\n    \"\"\"Provides customizations of ModelResource\"\"\"\n    def determine_format(self, request):\n    \"\"\"Provide logic to provide JSON responses as default\"\"\"\n    if 'format' in request.GET:\n        if request.GET['format'] in FORMATS:\n        return FORMATS[request.GET['format']]\n        else:\n        return 'text/html' #Hacky way to prevent incorrect formats\n    else:\n        return 'application/json'\n\nclass WineValidation(Validation):\n    def is_valid(self, bundle, request=None):\n    if not bundle.data:\n        return {'__all__': 'No data was detected'}\n\n    missing_fields = []\n    invalid_fields = []\n\n    for field in REQUIRED_WINE_FIELDS:\n        if not field in bundle.data.keys():\n        missing_fields.append(field)\n    for key in bundle.data.keys():\n        if not key in ALLOWABLE_WINE_FIELDS:\n        invalid_fields.append(key)\n\n    errors = missing_fields + invalid_fields if request.method != 'PATCH' \\\n        else invalid_fields\n\n    if errors:\n        return 'Missing fields: %s; Invalid fields: %s' % \\\n            (', '.join(missing_fields), ', '.join(invalid_fields))\n    else:\n        return errors\n\nclass WineProducerResource(CustomResource):\n    wine = fields.ToManyField('wines.api.WineResource', 'wine_set', \n                 related_name='wine_producer')\n    class Meta:\n    queryset = WineProducer.objects.all()\n    resource_name = 'wine_producer'\n    authentication = Authentication() #allows all access\n    authorization = Authorization() #allows all access\n\nclass WineResource(CustomResource):\n    wine_producer = fields.ForeignKey(WineProducerResource, 'wine_producer')\n\n    class Meta:\n    queryset = Wine.objects.all()\n    resource_name = 'wine'\n    authentication = Authentication() #allows all access\n    authorization = Authorization() #allows all access\n    validation = WineValidation()\n    filtering = {\n        'percent_new_oak': ('exact', 'lt', 'gt', 'lte', 'gte'),\n        'percentage_alcohol': ('exact', 'lt', 'gt', 'lte', 'gte'),\n        'color': ('exact', 'startswith'),\n        'style': ('exact', 'startswith')\n\n    }\n\n    def hydrate_wine_producer(self, bundle):\n    \"\"\"Use the provided WineProducer ID to properly link a PUT, POST,\n    or PATCH to the correct WineProducer instance in the db\"\"\"\n    #Workaround since tastypie has bug and calls hydrate more than once\n    try:\n        int(bundle.data['wine_producer'])\n    except ValueError:\n        return bundle\n    bundle.data['wine_producer'] = '/api/v1/wine_producer/%s/' % \\\n                        bundle.data['wine_producer']\n    return bundle\n</code></pre>\n\n<p>Any help is greatly appreciated! :-)</p>\n"},{"tags":["django","timezone","models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12945370,"title":"Retreving all objects where a datetime field resolves to a date in another timezone","body":"<p>Let's say that I have a model like this:</p>\n\n<pre><code>class Event(models.Model):\n    title = CharField(max_length=100)\n    start_time = DateTimeField()\n</code></pre>\n\n<p>Now, all of the events are stored in the database in UTC. Now, on the views side I have a class like this:</p>\n\n<pre><code>class EventListDay(ListView):\n    def get_queryset(self):\n    year, month, day = int(self.kwargs['year']), int(self.kwargs['month']), int(self.kwargs['day'])\n    target_day = datetime.datetime(year,month,day) #naive date type\n    target_day = timezone.make_aware(target_day, timezone.get_current_timezone()) #aware date time\n    return Event.confirmed_objects.get_events_for_day(target_day).order_by(\"start_time\")\n</code></pre>\n\n<p>Now, when this view is called I get a queryset with all events that fall on that day. The only issue is that the events that are returned are from that day <em>in UTC</em>. So, for example, I am in the \"America/Chicago\" timezone and any events that take place after 7pm appear on the next days list.</p>\n\n<p>What I am asking is how to I make the query in such a way that the events returned fall on that day in the <em>current</em> timezone.</p>\n"},{"tags":["mysql","django","sockets","amazon-ec2"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":65,"score":2,"question_id":12944386,"title":"MySQL Not Working","body":"<p>I have an amazon ec2 instance running on the Amazon Linux AMI and its a micro instance. I wanted to install Django onto my server so I entered these commands</p>\n\n<pre><code>wget http://www.mlsite.net/blog/wp-content/uploads/2008/11/go\nwget http://www.mlsite.net/blog/wp-content/uploads/2008/11/django.conf\nchmod 744 go\n./go\n</code></pre>\n\n<p>So after I was done, I ran <code>sudo service httpd restart</code> and <code>sudo service mysqld restart</code></p>\n\n<p>and This is what came up for mysqld: </p>\n\n<pre><code>Stopping mysqld:                                           [  OK  ]\nMySQL Daemon failed to start.\nStarting mysqld:                                           [FAILED]\n</code></pre>\n\n<p>So I deleted the django files <code>/usr/local/python2.6.8/site-packages/django_registration.egg</code>\nand I tried finding the error and I found out that in my \n<code>/etc/my.cnf</code> for the socket, it said </p>\n\n<pre><code>[mysqld]\n# Settings user and group are ignored when systemd is used.\n# If you need to run mysqld under different user or group, \n# customize your systemd unit file for mysqld according to the\n# instructions in http://fedoraproject.org/wiki/Systemd\ndatadir=/mnt/ebs/mysql\nsocket=/var/lib/mysql/mysql.sock\n# Disabling symbolic-links is recommended to prevent assorted security risks\nsymbolic-links=0\n\n[mysqld_safe]\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n\n[mysqld]\ndefault-storage-engine=INNODB\n\n[mysqld]\ndefault-storage-engine=INNODB\n\n[mysqld]\ndefault-storage-engine=INNODB\n\n[mysqld]\ndefault-storage-engine=INNODB\n</code></pre>\n\n<p>so I went to <code>/var/lock/subsys/</code> and there was no <code>mysql.sock</code>. I tried creating one using vim but it still didn't work. Then I checked the error log and it said </p>\n\n<pre><code>120712 20:33:11 mysqld_safe mysqld from pid file /var/run/mysqld/mysqld.pid ended\n120712 20:33:15 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql\n</code></pre>\n\n<h2>UPDATE:</h2>\n\n<p>I entered these commands:</p>\n\n<pre><code>cd /var/lib/mysql/\ntouch mysql.sock\nchmod +x mysql.sock\nchown mysql:mysql -R *\n</code></pre>\n\n<p>And it still didn't work...</p>\n\n<p>So I am pretty much lost right now. I know it has something to do with <code>mysql.sock</code></p>\n\n<p>If you might know a reason why this was caused could you please let me know? I have a wordpress site on my server, so i kind of need MySQL to work. Thanks!</p>\n"},{"tags":["sql","django","postgresql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12944339,"title":"django sort objects by number of friends who have them","body":"<p>I have Ownership model, which has FK to User and Item. \nUser has m2m to self, friends.</p>\n\n<pre><code>class Ownership:\n    user = FK(User)\n    item = FK(Item)\n\nclass User:\n    friends = M2M(User)\n</code></pre>\n\n<p>I want to get Ownership objects for a user, sorted by the number of user's friends who have the same item. Is it possible in QuerySet at all, or should I go with raw SQL, and if so, what that SQL would look like?</p>\n"},{"tags":["django","permissions","nginx","uwsgi"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12943633,"title":"Best practices for linux user permissions to run web application as?","body":"<p>I see a lot of different advice online as to where to serve your web application from, what user to run it as, etc.</p>\n\n<p>For instance, I've seen it served from: /var/www/site, /srv/www/site, /home/$USER/site.</p>\n\n<p>I've seen the user be www-data, $USER (i.e. my user account), or a custom user specifically created for that purpose (e.g. user uwsgi).</p>\n\n<p>In terms of security, what is the best scheme I could choose?</p>\n\n<p>For reference, I'm trying to deploy a Django site with Nginx and uwsgi.</p>\n\n<p>Right now, uwsgi is running as root in emperor mode, with uid/gid set as www-data, so vassals spawn with the same permissions as Nginx workers.  I'm serving from /home, but thinking of moving.</p>\n"},{"tags":["python","django","git"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12943846,"title":"Git, Django and pluggable applications","body":"<p>I'm currently developing several websites on Django, which requiere several Django Apps. Lets say I have two Django projects: web1 and web2 (the websites, each has a git repo). Both web1 and web2 have a different list of installed apps, but happen to both use one (or more) application(s) developed by me, say \"MyApp\" (also has a git repo there). My questions are:</p>\n\n<ol>\n<li><p>What is the best way to decouple MyApp from any particular website? What I want is to develop MyApp independently, but have each website use the latest version of the app (if it has it installed, of course). I have two \"proposed\" solutions: use symlinks on each website to a \"master\" MyApp folder, or use git to push from MyApp to each website's repo.</p></li>\n<li><p>How to deploy with this setup? Right now, I can push the git repo of web1 and web2 to a remote repo in my shared hosting account, and it works like a charm. Will this scale adequately?</p></li>\n</ol>\n\n<p>I think I have the general idea working in my head, but I'm not sure about the specifics. Won't this create a nested git repo issue? How does git deal with simlinks, specifically if the symlink destination has a .git folder in it?</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12943587,"title":"What do I put in \"INSTALLED_APPS\" for django-simple-ratings?","body":"<p>I'm trying to install django-simple-ratings.</p>\n\n<p>It requires django-generic-aggregation. However, neither set of docs mentions anything about adding a line to INSTALLED_APPS. </p>\n\n<p>So going through the instructions works fine until I put <code>from rating.models import Ratings</code> in one of my models. I get the error</p>\n\n<pre><code>No module named rating.models\n</code></pre>\n\n<p>My first assumption is that indeed I need to put something in INSTALLED_APPS for django to load the django-simple-ratings module. But what is that string? I've tried <code>django-simple-ratings</code> and <code>djangosimpleratings</code> but neither works. Do I need to do this for django-generic-aggregation as well?</p>\n\n<p>Perhaps a better question is: for any given Django module, how does one find the string required to install it in INSTALLED_APPS?</p>\n"},{"tags":["django"],"answer_count":4,"favorite_count":3,"up_vote_count":13,"down_vote_count":0,"view_count":1265,"score":13,"question_id":6500066,"title":"Annotating a Django queryset with a left outer join?","body":"<p>Say I have a model:</p>\n\n<pre><code>class Foo(models.Model):\n    ...\n</code></pre>\n\n<p>and another model that basically gives per-user information about <code>Foo</code>:</p>\n\n<pre><code>class UserFoo(models.Model):\n    user = models.ForeignKey(User)\n    foo = models.ForeignKey(Foo)\n    ...\n\n    class Meta:\n        unique_together = (\"user\", \"foo\")\n</code></pre>\n\n<p>I'd like to generate a queryset of <code>Foo</code>s but annotated with the (optional) related <code>UserFoo</code> based on <code>user=request.user</code>.</p>\n\n<p>So it's effectively a <code>LEFT OUTER JOIN on (foo.id = userfoo.foo_id AND userfoo.user_id = ...)</code></p>\n"}]}
{"total":41213,"page":17,"pagesize":100,"questions":[{"tags":["django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12943044,"title":"Model form update page show to all register users","body":"<p>I have this page :8000/edit/6/ that show a form to update an exciting model and i logged in as X, if i looged in as Y and try to open that page i can see it and update. So this is with no doubt a big bug and dangerous.</p>\n\n<p>Here is my view code</p>\n\n<pre><code>class VideoUpdate(UpdateView):\n   form_class = VideoForm\n   model = Video\n   template_name = 'videos/video_update.html'\n\n   @method_decorator(login_required)\n   def dispatch(self, *args, **kwargs):\n      return super(VideoUpdate, self).dispatch(*args, **kwargs)\n\n   def form_valid(self, form):\n      messages.info(self.request, _('Event is updated successfully'))\n      return super(VideoUpdate, self).form_valid(form)\n</code></pre>\n\n<p>Is there a way to check the model object id with the user id. A simple question from a newbie</p>\n"},{"tags":["python","django","video-streaming","red5","live-streaming"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12935484,"title":"How to add live streaming video to a django website? Red5?","body":"<p>I've created a website using Django, and I'm at the point where I wanted to add the live streaming video component, since my website is centered around users being able to stream videos that other users can watch.  I essentially have the entire website ready to go except for the video part, which I can't seem to figure out.  I installed Red5 server into my computer and Flash Media Live Encoder, but can't seem to figure out if/how to use Red5 in my project. Can anyone offer me any help or advice on what I should be doing?  I have been trying to get a grasp on what it is I need to do to add the video functionality to my website, but have just been running in circles, unable to figure out the right solution.  For one, the majority of information I can find is about being able to broadcast myself, which is not what I intend to do (my users are going to be the ones broadcasting).  Again, the website is still in development since it is missing this major piece, which I can't figure out, but it is all I have left to solve before my website is finished.  I don't mind other options, I just need a solution that will enable me to finish this project.  I really appreciate any help anyone can provide me, or even just links to good resources.  Thanks in advance.</p>\n"},{"tags":["django","mongodb","tastypie","django-nonrel"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":85,"score":-1,"question_id":12941461,"title":"Django QuerySet Unable to get repr","body":"<p>I have a project using Django, Tastypie and MongoDB as backend. In order to adapt Django and Tastypie to MongoDB I am using django-mongodb-engine and tastypie-nonrel. </p>\n\n<p>The application have a Model Project and UserProfile, which has a collection of the projects which belongs to that user, so when a user retrieves a list of project or a project the function apply_authorization_limits from Tastypie is overriden in this way:</p>\n\n<pre><code>def apply_authorization_limits(self, request, object_list):\n    if request.user.is_active:\n        user_profile = UserProfile.objects.get(user=request.user)\n        return object_list.filter(id__in=user_profile.projects)\n    else:\n        return []\n</code></pre>\n\n<p>When the request is getting the whole list of projects it works fine but when the request is just one particular project it gives this response <code>Unable to get repr for &lt;class 'django.db.models.query.QuerySet'&gt;</code> </p>\n\n<p>Using this works: <code>object_list.filter(title__in=[u'foo', u'bar'])</code></p>\n\n<p>this not: <code>object_list.filter(id__in=[u'5079bd511d41c805e6000000', u'5079bd511d41c805e6000001']</code></p>\n\n<p><strong>EDIT</strong>: more information about object_list </p>\n\n<p>it is an object of type django.db.models.query.QuerySet (notice that it is not the regular Django, it is <a href=\"https://github.com/django-nonrel/django-nonrel\" rel=\"nofollow\">Django-nonrel</a></p>\n\n<p>it comes from this call: tastypie/resources.py </p>\n\n<pre><code>def obj_get(self, request=None, **kwargs):\n    try:\n        base_object_list = self.get_object_list(request).filter(**kwargs)\n        object_list = self.apply_authorization_limits(request, base_object_list)\n        stringified_kwargs = ', '.join([\"%s=%s\" % (k, v) for k, v in kwargs.items()])\n\n        if len(object_list) &lt;= 0:\n            raise self._meta.object_class.DoesNotExist(\"Couldn't find an instance of '%s' which matched '%s'.\" % (self._meta.object_class.__name__, stringified_kwargs))\n        elif len(object_list) &gt; 1:\n            raise MultipleObjectsReturned(\"More than '%s' matched '%s'.\" % (self._meta.object_class.__name__, stringified_kwargs))\n\n        return object_list[0]\n    except ValueError:\n        raise NotFound(\"Invalid resource lookup data provided (mismatched type).\")\n</code></pre>\n\n<p>here there is more information about <a href=\"https://django-tastypie.readthedocs.org/en/latest/resources.html?highlight=apply_authorization_limits#apply-authorization-limits\" rel=\"nofollow\">apply_authorization_limits</a> and here and <a href=\"http://django-tastypie.readthedocs.org/en/v0.9.11/cookbook.html#creating-per-user-resources\" rel=\"nofollow\">example of use</a></p>\n"},{"tags":["django","django-urls"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12942713,"title":"Django: uses two url patterns/functions for one call","body":"<p>I have the following urlpatterns, in this order:</p>\n\n<pre><code> url(r'^([^//]*)/forum/topics/$', showThreadTopics),\n url(r'^([^//]*)/$', redirectFrontPage)\n</code></pre>\n\n<p>I go to:</p>\n\n<pre><code>http://localhost:8000/xxx/forum/topics/\n</code></pre>\n\n<p>showThreadTopics is called and the page is correctly shown. However, I happened to have a breakpoint set in redirectFrontPage and saw that this function is also called. This happens every time and I can print statements from it. It has no effect on the final result and does not cause any apparent network activity when looking in Firebug. There is nothing special about showThreadTopics. It just gets some data and renders them. Actually, redirectFrontPage is called with any of my urls.</p>\n\n<p>How is that even possible? How do I avoid it? I have that last urlpattern because if someone types</p>\n\n<pre><code>www.mysite.com/users_site_name\n</code></pre>\n\n<p>then I want to redirect it to </p>\n\n<pre><code>www.mysite.com/users_site_name/home\n</code></pre>\n"},{"tags":["python","django","rpy2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12942931,"title":"Lost records when using Rpy2 execute r-script and write results to a csv file","body":"<p>I have been having problem of missing records in the output file when using Rpy2 execute r-script and the script has function of writing analysis results to a csv file. Please see below for the source code.</p>\n\n<p>For example, I have 785 records in my source file (f2), and after analyzing there should be 785 file in output file (processed). However, I get fewer records in output file. There is no such problem when I run the r-script directly in R. Does anybody know what cold be wrong? Thanks.</p>\n\n<pre><code>def make_standardization(filename,outdata):\ntraindata = os.path.join(settings.MEDIA_ROOT, \"default_predict_train.csv\") \ntestdata = os.path.join(settings.MEDIA_ROOT, filename) \n\n\nrobjects.r.assign(\"f1\",traindata)\nrobjects.r.assign(\"f2\",testdata)\nrobjects.r.assign(\"processed\", outdata)\n\nrobjects.r(\"\"\"\n    train.dta=read.csv(f1,header=T)\n    test.dta=read.csv(f2,header=T)\n\n    train.h=train.dta[,c(1:2)]\n    train.x=train.dta[,-c(1:2)]\n    train.colnames=sub(\"PFGE.XbaI.\",\"\",colnames(train.x))\n    train.colnames=as.numeric(train.colnames)\n\n    test.h=test.dta[,c(1:2)]\n    test.x=test.dta[,-c(1:2)]\n    test.x=t(t(test.x))\n    temp=matrix(as.numeric(test.x),nrow=nrow(test.x),ncol=ncol(test.x))\n    colnames(temp)=colnames(test.x)\n    test.x=temp\n    test.x[is.na(test.x)]=0.5\n    test.colnames=sub(\"PFGE.XbaI.\",\"\",colnames(test.x))\n    test.colnames=as.numeric(test.colnames)\n\n\n    temp=matrix(0,nrow=nrow(test.x),ncol=ncol(train.x))\n    colnames(temp)=colnames(train.x)\n    rownames(temp)=rownames(test.x)\n\n    for(i in 1:ncol(train.x)){\n\n        if(i == 1) {\n            index=which( test.colnames &gt; (train.colnames[i]+train.colnames[i+1])/2    )\n            if(length(index)==1){\n                temp[,i]=test.x[,index]\n            }else{\n                temp[,i]=1*(rowSums(test.x[,index])&gt;0)\n            }\n        }\n\n        if(i == ncol(train.x)) {\n            index=which( test.colnames &lt;= (train.colnames[i]+train.colnames[i-1])/2    )\n            if(length(index)==1){\n                temp[,i]=test.x[,index]\n            }else{\n                temp[,i]=1*(rowSums(test.x[,index])&gt;0)\n            }\n        }        \n\n        if(i &gt;1 &amp;&amp; i&lt; ncol(train.x)){\n            index=which( test.colnames &gt; (train.colnames[i]+train.colnames[i+1])/2  &amp; test.colnames &lt;= (train.colnames[i]+train.colnames[i-1])/2    )\n            if(length(index)==1){\n                temp[,i]=test.x[,index]\n            }else{\n                temp[,i]=1*(rowSums(test.x[,index])&gt;0)\n            }            \n        }            \n\n    }\n\n    test.x=cbind(test.h,temp)\n\n    write.csv(test.x,processed)\n\n\"\"\")\n</code></pre>\n"},{"tags":["jquery","python","django","file-upload","multifile-uploader"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12935980,"title":"how to use jquery file upload plugin in django framework with python","body":"<p>i'm new in jquery field and i want to use jquery file upload plugin in my web site like what that's been described in this demo:\n<a href=\"http://blueimp.github.com/jQuery-File-Upload/\" rel=\"nofollow\">jquery File Upload Demo</a>\ni don't know how to use it in django framework with python programming language\ncan anyone please help\ni'v added plugin and i have used it in the template but before everything else the page looks like this:\n<a href=\"http://up.vatandownload.com/images2/5x8vqq4swew6wnau1whx.png\" rel=\"nofollow\">problem</a></p>\n\n<p>i don't know how to fix this bug, the browse button should not be here and there shouldn't be an input line\nplus, this allows user to just upload one file\ni'm really puzzled\nthere are a lot of documents in the internet but they didn't help </p>\n"},{"tags":["django","python-module"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12942274,"title":"How does a Python module behave in a web app?","body":"<p>To be more specific, I have created a custom Redis module: <code>MyRedis</code>  </p>\n\n<p>MyRedis.py</p>\n\n<pre><code>import redis\nr = redis.StrictRedis(host='localhost', port=6379, db=0)\n\ndef get_func(k):\n    \"\"\" A custom get function \"\"\"\n    return r.get(k)\n\n# ...\n# more functions ...\n# ...\n</code></pre>\n\n<p>Note that the connection is established when the module is loaded.<br>\nMy question is:<br>\nIs this the correct way to write the module, or should I include the <code>r = redis.StrictRedis(...)</code> connection establishing line <em>within each function</em>, like so:</p>\n\n<pre><code>def get_func(k):\n    \"\"\" A custom get function \"\"\"\n    r = redis.StrictRedis(host='localhost', port=6379, db=0)\n    return r.get(k)\n</code></pre>\n\n<p>In a web app, is a module loaded only once, as in a \"regular\" backend app? Or is it loaded once per connection?<br>\nIf it's loaded only once, this means that if the Redis server crashes for some reason, once it's started again there will be no connections, which suggests the second snippet is the correct one.<br>\nSo how do python modules behave in a web app?</p>\n"},{"tags":["django","segmentation-fault","geodjango","spatialite","django-dev-server"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":12942608,"title":"GeoDjango: Geographic query causes segmentation fault","body":"<p>On Django development server with SpatiaLite, I am trying to do a basic geographic query:</p>\n\n<pre><code>Location.objects.filter(geom__within=loc.geom)\n</code></pre>\n\n<p>This causes a <code>Segmentation error</code> and the server dies. <code>loc</code> is an instance of the <code>Location</code> model:</p>\n\n<pre><code>from django.contrib.gis.db import models\n\nclass Location(models.Model):\n    geom = models.GeometryField()\n\n    objects = models.GeoManager()\n</code></pre>\n\n<p>What do you think might be wrong?</p>\n"},{"tags":["django","logging"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":12942195,"title":"Django verbose request logging","body":"<p>Question is much the same as <a href=\"http://stackoverflow.com/questions/11336672/the-logs-of-post-get-requests-from-django-application-on-apache\">this</a>, however I'm wanting django to log it's verbose request information to my <code>logging.FileHandler</code> - ie rather than having to look at my webservers logs. I've tried and failed to setup the default logger <code>django.requests</code> to write something other than 4xx and 5xx\nrequest information to the handlers.</p>\n\n<p>So the conclusion I've come to after going through the docs and fiddling with the loggers and levels is that django does not actually make a lot of log statements - so I'm looking to confirm that django does not internally log non error scenarios for requests.</p>\n"},{"tags":["django","django-forms","django-views","django-formwizard"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12940067,"title":"Preview \"staging\" area view","body":"<p>I'm writing an inventory management system, and I'd like to add a new more efficient way to submit parts to the database.I need help building a view that <strong>displays and filters valid and invalid part entries</strong>.</p>\n\n<p>User steps:</p>\n\n<ol>\n<li>First View - User scans barcodes into the text area box</li>\n<li>User submits the form to preview the barcodes</li>\n<li>Second View - Displays a \"staging\" area view with 2 parts (Pre-validation would go here)\n<ul>\n<li><em>Valid Entires</em> : The quantity of each part type is displayed and is ready to be submitted to database</li>\n<li><em>Invalid Entries</em> : Pre-filled forms with the ability to edit and/or delete items</li>\n</ul></li>\n<li>After the invalid data is edited/deleted I save each valid entry as a model object. </li>\n</ol>\n\n<p>I've been playing with the FormWizard for the steps and FormPreview for previewing the data, but I'm uncertain if this is the right way to go. I haven't tried combining the two, because honestly I don't know how I'd go about doing that.</p>\n\n<p>Any input is greatly appreciated!</p>\n"},{"tags":["python","django","postgresql","django-south","django-fields"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12935407,"title":"Migrating a PositiveSmallIntegerField to a PositiveIntegerField and using the BIGINT field in Postgres","body":"<p>One of my models had a field defined a <code>PositiveSmallIntegerField</code>. Upon describing the table, I've seen that it has been defined as an <code>INTEGER</code>.</p>\n\n<p>I'd like to store values of larger range and therefore I've modified my model to use the <code>PositiveIntegerField</code>.</p>\n\n<p>Now when I run South to generate migrations, it says that nothing was changed in the model? I can see my changes clearly but South ignored this. Why?</p>\n\n<p>Will using a <code>PositiveIntegerField</code> use the <code>BIGINT</code> field in Postgres? Does Django support the <code>BIGINT</code> field of Postgres?</p>\n"},{"tags":["django","django-views","django-urls"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12940993,"title":"Django - how to use messages for built-in views","body":"<p>i transfered my login view from class based views to built-in views which is : <code>django.contrib.auth.views.login</code></p>\n\n<p>before that ; i ve been using django messages in my views.py.</p>\n\n<p>but i dont know how to do that under built-in views.</p>\n\n<p>here is my urls.py:</p>\n\n<pre><code>urlpatterns = patterns('',\n    url(r'^', include('blog.urls')),\n    url(r'^login/$', 'django.contrib.auth.views.login', {'template_name': 'login.html'}, name='login'),\n    url(r'^admin/logout', 'django.contrib.auth.views.logout_then_login', name='logout'),\n)\n</code></pre>\n\n<p>and what i want in my login.html :</p>\n\n<pre><code>{% for message in messages %}\n    &lt;div id=\"notice\" align=\"center\"&gt;\n        {{ message }}\n    &lt;/div&gt;\n    {% ifequal message.tags 'ERROR' %}\n        &lt;div id=\"notice\" align=\"center\"&gt;{{ message }}&lt;/div&gt;\n    {% endifequal %}\n{% endfor %}\n</code></pre>\n\n<p>where and how can i define messages ?</p>\n\n<p>thank you </p>\n"},{"tags":["django","django-templates","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12926262,"title":"Django-Voting: Solving AttributeError","body":"<p>I am trying to implement <a href=\"http://code.google.com/p/django-voting/wiki/RedditStyleVoting\" rel=\"nofollow\">Django Reddit Style Voting</a> into my project. I have been searching the internet the past few days trying to piece together how to make it happen, but am unclear about how to set up my urlconf to handle <code>confirm_vote.html</code>, and what the contents of that file may be? The error that I get when I click to vote is:</p>\n\n<pre><code>Generic vote view must be called with either post_vote_redirect, a \n\"next\" parameter in the request, or the object being voted on must \ndefine a get_absolute_url method or property.\n</code></pre>\n\n<p>Which corresponds with <a href=\"https://github.com/brosner/django-voting/blob/master/voting/views.py#L76-82\" rel=\"nofollow\">This Part of Django-Votings' Code</a>. I have set my project up almost identically to the example project listed on the Github page.</p>\n\n<p>I realize that I need to set-up a confirm_vote.html page, and have done a lot of searching to find out how to set up the urlconf to deal with it. I found <a href=\"http://www.justinlilly.com/python/django_voting.html\" rel=\"nofollow\">This Blog Post</a>, but it doesnt seem to answer my question. </p>\n\n<p>Can anyone help me figure out what to put in confirm_vote.html and the url regex to deal with it? Thanks for helping!</p>\n\n<p>EDIT</p>\n\n<hr>\n\n<p>Actually just realized that the urlconf for confirm_vote.html is on the sample tutorial. </p>\n\n<pre><code>(r'^links/(?P&lt;object_id&gt;\\d+)/(?P&lt;direction&gt;up|down|clear)vote/?$',\n    vote_on_object, dict(model=Link, template_object_name='link',\n        template_name='kb/link_confirm_vote.html',\n        allow_xmlhttprequest=True)),\n</code></pre>\n\n<p>But still confused about the <code>AttributeError</code> and the contents of <code>confirm_vote.html.</code> Thanks for any ideas!</p>\n\n<p>EDIT: link_list.html</p>\n\n<hr>\n\n<pre><code>url(r'^links/?$', object_list, dict(queryset=Link.objects.all(),\n    template_object_name='link', template_name='links/link_list.html',\n    paginate_by=15, allow_empty=True)),\n\n\n\n{% for link in link_list %}&lt;tr class=\"{% cycle odd,even %}\"&gt;\n&lt;td class=\"vote\"&gt;\n\n  {% dict_entry_for_item link from vote_dict as vote %}\n  {% dict_entry_for_item link from score_dict as score %}\n\n  &lt;form class=\"linkvote\" id=\"linkup{{ link.id }}\" action=\"/links/{{ link.id }}/{% if vote and vote.is_upvote %}clear{% else %}up{% endif %}vote/\" method=\"POST\"&gt;\n    &lt;input type=\"image\" id=\"linkuparrow{{ link.id }}\" src=\"{{ MEDIA_URL }}img/aup{% if vote and vote.is_upvote %}mod{% else %}grey{% endif %}.png\"&gt;\n    {% csrf_token %}\n  &lt;/form&gt;\n\n  &lt;form class=\"linkvote\" id=\"linkdown{{ link.id }}\" action=\"/links/{{ link.id }}/{% if vote and vote.is_downvote %}clear{% else %}down{% endif %}vote/\" method=\"POST\"&gt;\n    &lt;input type=\"image\" id=\"linkdownarrow{{ link.id }}\" src=\"{{ MEDIA_URL }}img/adown{% if vote and vote.is_downvote %}mod{% else %}grey{% endif %}.png\"&gt;\n    {% csrf_token %}\n  &lt;/form&gt;\n\n&lt;/td&gt;\n</code></pre>\n"},{"tags":["django","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":11755421,"title":"Django admin Actions - exportascsv snippet not working when added to the whole site, but working when added to individual model ","body":"<p>I am trying to use this <a href=\"http://djangosnippets.org/snippets/2369/\" rel=\"nofollow\">snippet</a> for exporting the admin models as a CSV file .<br>\nIt is working fine in this way:    </p>\n\n<p>Added the downloaded snippet as actions.py and write below code in the admin.py of any app</p>\n\n<pre><code>from actions import export_as_csv_action\n\nclass YourModelAdmin(admin.ModelAdmin):\n    list_display = (...)\n    list_filter = [...]\n    actions = [export_as_csv_action(\"CSV Export\", fields=['field1', 'field2'])]\n</code></pre>\n\n<p>The above method is working but in this method we have to add the action to every model separately . There is another way to add the action to all the models in an app by writing the below code in the admin.py of that app.</p>\n\n<pre><code>from django.contrib import admin\n\nadmin.site.add_action(export_as_csv_action, \"export csv\")\n</code></pre>\n\n<p>From the above code, the action \"export csv\" is being displayed in the admin page, but when I select it and click GO, then nothing is happening, just page is being redirected to the same page, can you please tell me what I have done wrong?</p>\n"},{"tags":["django","imagefield"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":23,"score":-1,"question_id":12940023,"title":"django ImageField is None","body":"<p>my codes at follow:</p>\n\n<pre><code>def user_image(self, obj):\n        from web.templatetags.mystatic import static\n        photo = obj.photo\n        a = obj.photo is not None\n        if obj.photo is not None:\n            return '&lt;img style=\"width:16px;height:16px;\" src=\"%s\"/&gt;' % (static(obj.photo.url),)\n        else:\n            return \"\"\n\n/mnt/hgfs/menus/web/web/user/admin.py in user_image\n    readonly_fields = ('user',)\n    def user_image(self, obj):\n        from web.templatetags.mystatic import static\n        photo = obj.photo\n        a = obj.photo is not None\n        if obj.photo is not None:\n            return '&lt;img style=\"width:16px;height:16px;\" src=\"%s\"/&gt;' % (static(obj.photo.url),)\n ...\n        else:\n            return \"\"\n    user_image.short_description = u'头像'\n    user_image.allow_tags = True\n    user_image.column_name = 'icon'\n\n▼ Local vars\nVariable    Value\na   \nTrue\nphoto   \n&lt;ImageFieldFile: None&gt;\nself    \n&lt;web.user.admin.UserProfileModelAdmin object at 0x9174f0c&gt;\nstatic  \n&lt;function static at 0x8f787d4&gt;\nobj \n&lt;UserProfile: ming's profile&gt;\n</code></pre>\n\n<p>as show, photo is None. But a is True. What's problem?</p>\n"},{"tags":["python","django","wsgi","gobject","rhythmbox"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":78,"score":1,"question_id":12343365,"title":"Start a python webserver from a rhythmbox plugin","body":"<p>I'm trying to implement a Rhythmbox-plugin similiar to rhythmweb, but I have a problem with starting a HttpServer from within the plugin.</p>\n\n<p>If I start the server like it is usually done (e.g. with make_server(...).server_forever()) the plugin blocks rhythmbox. So I looked at <a href=\"https://bitbucket.org/jimcerberus/rhythmweb/src/0701a4cd8368/serve/__init__.py\" rel=\"nofollow\">rhythmweb</a>, but I get a segfault everytime I start a request to the server. That is what I do:</p>\n\n<pre><code>class WSGIRefWebServer(IDjangoWebServer):\ndef __init__(self, host, port, settings):\n    IDjangoWebServer.__init__(self, host, port, settings)\n\ndef _start_server(self):\n    django_handler = django.core.handlers.wsgi.WSGIHandler()\n    self.__server = make_server(self._host, self._port, django_handler)\n    self._is_running = True\n\n    def request_loop(source, cb):\n        self.__server.handle_request()\n        return True\n\n    gobject.io_add_watch(self.__server.socket, gobject.IO_IN, request_loop)\n</code></pre>\n\n<p>If I replace the last line with self.__server.server_forever() everything works fine, but rhythmbox is blocked.</p>\n\n<p>My second approach was to start the webserver in a new thread, which works pretty well, but then I have some trouble using the rhythmbox shell object in the django application.</p>\n\n<p>So I'm looking for a way, to start a webserver, that doesn't block rhythmbox but runs in the same thread.\nI can't see why the first approach results in a segfault, since rhythmweb does it the same way.</p>\n\n<p>I hope you can help me with my problem.</p>\n\n<p>btw.: I'm using python 2.7 and rhythmbox 2.97 on debian squeeze (testing)</p>\n"},{"tags":["django","amazon-s3","amazon-web-services","boto","django-storage"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":274,"score":0,"question_id":10240014,"title":"Django-storages and boto and REST","body":"<p>Good evening, </p>\n\n<ol>\n<li><p>I am a bit confused about what Django-Storages is needed for? (<a href=\"http://django-storages.readthedocs.org/en/latest/index.html\" rel=\"nofollow\">http://django-storages.readthedocs.org/en/latest/index.html</a>) Does it simply provide a layer to continue using basic Django storages code, but with Amazon S3? If so, is that why it uses Boto?</p></li>\n<li><p>I will want to use DevPay and Amazon S3. Will <code>s3boto</code> work with that? I read that for devpay to work with S3, the requests need to be in REST. Will streaming a video, or getting the URL of a picture work with DevPay? (Both on mobile and web browser.)</p></li>\n</ol>\n\n<p>Thanks!</p>\n"},{"tags":["django","flash","video","streaming","webcam"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12939590,"title":"Webcam streaming with Django","body":"<p>I try to create a django app that uses webcam. I would like people to be able to broadcast with their webcam, while other people can watch and listen to them.</p>\n\n<p>I don't know how to do that with Django. Do I have to use flash? Is there a module that would allow me to do that?</p>\n\n<p>Any advice is really welcome. Thank you.</p>\n"},{"tags":["django","html5","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":370,"score":2,"question_id":3469822,"title":"Django URLField and HTML5?","body":"<p>Is it possible to make django's (v1.2) URLField output an HTML5 <code>input</code> tag where <code>type=\"url\"</code>?</p>\n\n<p>------------- SOLUTION -------------</p>\n\n<pre><code>from django.forms import ModelForm\nfrom django.forms import widgets\nfrom django.forms import fields\nfrom models import MyObj\n\nclass URLInput(widgets.Input):\n    input_type = 'url'\n\nclass MyObjForm(ModelForm):\n    url = fields.URLField(widget=URLInput())\n\n    class Meta:\n        model = MyObj\n</code></pre>\n"},{"tags":["django"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12938133,"title":"Django lookups for specific hour and minutes","body":"<p>As far as I know, django does have lookups only for year, month and day. I am looking for something is equivalent to this code to get specific hour range for every Sunday for example: Every Sunday 10:50-12:35:</p>\n\n<pre><code> Entry.objects.filter(Record_Date__week_day=1,)\n    Record_Date__hour__gte=10)\n    Record_Date__hour__lte=12)\n    Record_Date__minute__gte=50)\n    Record_Date__minute__lte=35) \n</code></pre>\n\n<p>Do you have any idea for an alternative to do that? </p>\n"},{"tags":["xml","django","d3.js"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":71,"score":2,"question_id":12921206,"title":"How to load a local JSON object to D3.js frontend with Django?","body":"<p>I'm trying to create a d3.js visualization with a django backend.<br>\nI'm trying to render some json into a map:</p>\n\n<pre><code>     d3.json(\"world-countries.json\", function(json) {\n        self.countries.selectAll(\"path\")\n        .data(json.features)\n        .enter().append(\"path\")\n        .attr(\"d\", self.path)\n        .on(\"mouseover\", function(d) {\n            d3.select(this).style(\"fill\",\"#6C0\");})\n        .on(\"mouseout\", function(d) {\n            d3.select(this).style(\"fill\",\"#000000\");})\n    });\n</code></pre>\n\n<p>but I keep getting the error: </p>\n\n<pre><code>Uncaught TypeError: Cannot read property 'features' of null\n</code></pre>\n\n<p>I'm not sure how to access json objects through Django; does anyone have any ideas?</p>\n"},{"tags":["django","shell","python-2.7"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12938072,"title":"Execute command inside django","body":"<p>I've been working with the PaaS service AppFog and I was able to get my Django up and running, but the problem is that my application uses static files and this are not working because it needs to execute the <strong>collectstatic</strong> command in shell.</p>\n\n<p>I've been reading about it on the internet but I wasn't able to find a proper solution. Should I make a shell file and execute it? How?</p>\n\n<p>I appreciate your time.</p>\n"},{"tags":["python","django","math","money"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12938935,"title":"Displaying total amount including money calculations to user","body":"<p>Note: I'm already using decimal.Decimal</p>\n\n<p>What is the best way to perform and  display calculations to the end user when you are required to output in the following rough style:</p>\n\n<pre><code>Item - £ 70.10 \nItem - £  5.67\nItem - £ 10.33\n\n--------------\nTotal  £ 86.10\n</code></pre>\n\n<p>I was always taught in maths as a kid to not round before your final answer, else you'll lose precision, but in this case if you don't it looks like we have calculation errors. as the calculation behind the display is not the same as the user would do from the numbers displayed to them.</p>\n\n<p>EG:</p>\n\n<pre><code>My app will be doing: 70.1034 + 5.6693 + 10.333333333 = 86.1060333 (86.11 2dp)\n\nMy end user will be doing as above: 70.10 + 5.67 + 10.33 = 86.10\n</code></pre>\n\n<p>Therefore i appear to be incorrect. What is the best way to overcome this? (I mean generally, but python specific methods will help too)</p>\n"},{"tags":["python","django","oauth-2.0","google-drive-sdk","django-socialauth"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12912685,"title":"Automatically refresh access token with django-social-auth (omab)","body":"<p>I am currently using django-social-auth to manage oauth2 registration with google-oauth2 for access to Google Drive. I have added offline access to my extra_arguments. Therefore Google returns a refresh token and it is stored by django-social-auth. The problem is that django-social-auth never uses this refresh token to update the access token. Therefore the access token expires after one hour, and I can't use it to perform offline requests. I want to keep the access_token valid 24/7 so I can keep my database synced with each users Google Drive.</p>\n\n<pre><code>GOOGLE_OAUTH2_AUTH_EXTRA_ARGUMENTS = {'access_type':'offline'}\nGOOGLE_OAUTH_EXTRA_SCOPE = ['https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/userinfo.profile']\n\nSOCIAL_AUTH_USER_MODEL = 'accounts.GoogleDriveUser'\nSOCIAL_AUTH_EXTRA_DATA = True\nSOCIAL_AUTH_SESSION_EXPIRATION = False\n</code></pre>\n\n<p>Is there a way to force django-social auth to update the access_token every time it expires using the refresh_token. I would love to see an example of how this problem could be solved. </p>\n"},{"tags":["django","file","backbone.js","upload"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12932316,"title":"Send file from backbone Model to django","body":"<p>I want to upload files from Backbone to Django File upload system. </p>\n\n<p>First of all I've follow the <a href=\"http://stackoverflow.com/a/10916733/1590377\">http://stackoverflow.com/a/10916733/1590377</a> explanation. I've do a FileModel and with the above indication I have a model with this information:</p>\n\n<pre><code>attributes: Object\n    data: \"data:image/png;base64,iVBORw ...\"\n    file: \"image2012-06-12 13:36:45.png\"\n</code></pre>\n\n<p>now I save the model to the URL where I have the upload view in django like this:</p>\n\n<pre><code>def upload_file_64(request):\n   if request.method == 'POST':\n\n       file = cStringIO.StringIO(base64.b64decode(request.POST['data']))\n       #method to save the file\n       response_data={\"result\":\"ok\"}\n       return HttpResponse(simplejson.dumps(response_data), mimetype='application/json')\nelse:\n    response_data={\"success\": \"No a post request\"}\n    return HttpResponse(simplejson.dumps(response_data), mimetype='application/json')\n</code></pre>\n\n<p>but the response that the django sistem give me is:</p>\n\n<pre><code>\"MultiValueDictKeyError at /api/upload64/↵'Key \\'data\\' not found in &lt;QueryDict: {u\\'base64,iVBORw0KG....\n</code></pre>\n\n<p>The POST http request is:</p>\n\n<pre><code> POST:\n base64,iVBORw0KG ...\"} = u''\n {\"file\":\"Captura de pantalla de 2012-06-12 13:36:45.png\",\"data\":\"data:image/png = u''\n</code></pre>\n\n<p>How I can fix this so that I can upload a file to django. I use a multi-part method to upload files from another platforms how android but with backbone I can't upload a file.</p>\n\n<p>Can someone help me eith this problem?</p>\n\n<p>Thanks!!</p>\n"},{"tags":["django","xhtml2pdf"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12937997,"title":"Django XHTML2PDF image rendering error","body":"<p>I use the new xhtml2pdf python package to convert html to pdf.  Everything is OK but as soon as I put in the image I had errors.</p>\n\n<p>Here is the error message:</p>\n\n<pre><code>Django Version: 1.4.1\nException Type: TypeError\nException Value:    coercing to Unicode: need string or buffer, float found\nException Location: /usr/local/care/pdfgen_2_0/lib/python2.7/site-packages/xhtml2pdf/reportlab_paragraph.py in imgVRange, line 163\nPython Executable:  /usr/bin/python\n</code></pre>\n\n<p>In the console, at line 163, I found:</p>\n\n<pre><code>/usr/local/care/pdfgen_2_0/lib/python2.7/site-packages/xhtml2pdf/reportlab_paragraph.py in imgVRange\nreturn iyo,iyo+h ...\n▼ Local vars\nVariable    Value\n va         u'center'\n iyo    u'center'\n fontSize   7.5\n h          51.0\n</code></pre>\n\n<p>Can anyone tell me why I have this error? </p>\n"},{"tags":["python","django","oauth","twitter-oauth","twython"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":152,"score":2,"question_id":12149102,"title":"Twitter auth fails on Twython 2.3.4 with Error: 401, Failed to validate oauth signature and token","body":"<p>I just updated to <a href=\"https://github.com/ryanmcgrath/twython\" rel=\"nofollow\">Twython</a> 2.3.4, but now my Twitter auth stops working. It fails on the ' auth_props = twitter.get_authentication_tokens()' line. Any idea what went wrong? Thanks in advance!</p>\n\n<p>The python code to do Twitter auth using Twython is below:</p>\n\n<pre><code>def begin_auth(request):\n    twitter = Twython(\n        twitter_token = TWITTER_KEY,\n        twitter_secret = TWITTER_SECRET,\n        callback_url = request.build_absolute_uri(reverse('portnoy.views.thanks'))\n    )\n    # Request an authorization url to send the user to...\n    auth_props = twitter.get_authentication_tokens()\n</code></pre>\n\n<p><strong>I have the following error on the line above: TwythonAuthError: \"Seems something couldn't be verified with your OAuth junk. Error: 401, Message: Failed to validate oauth signature and token\"</strong></p>\n\n<pre><code>    # Then send them over there, durh.\n    request.session['request_token'] = auth_props\n    return HttpResponseRedirect(auth_props['auth_url'])\n\ndef thanks(request, redirect_url='/'):\n    c = RequestContext(request)\n    # for permanent ones and store them...\n    twitter = Twython(\n        twitter_token = TWITTER_KEY,\n        twitter_secret = TWITTER_SECRET,\n        oauth_token = request.session['request_token']['oauth_token'],\n        oauth_token_secret = request.session['request_token']['oauth_token_secret']\n     )\n\n    # Retrieve the tokens we want...\n    authorized_tokens = twitter.get_authorized_tokens()\n    request.session['request_tokens'] = authorized_tokens\n    debug('thanks', request.session['request_tokens'])\n\n    user = User.objects.filter(username=authorized_tokens['screen_name'])\n    if user.exists():\n        user = user[0]\n        user.backend='django.contrib.auth.backends.ModelBackend'     \n        auth.login(request,user)\n    else:\n        return render_to_response('twitter_register.html', c)   \n    return HttpResponseRedirect(redirect_url)\n</code></pre>\n"},{"tags":["django","heroku","hosting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12937454,"title":"heliohost and django hosting and deployment from bitbucket","body":"<p>I'm new to Django and Heliohost and Heroku. </p>\n\n<p>I don't see any guides online to setup and deploy a Django project from bitbucket for Heliohost. Can you guys point me in the right direction?</p>\n\n<p>And I was wondering is hosting a Django project on Heroku free for small projects?\nShould I switch from Heliohost to Heroku?</p>\n\n<p>Thanks everybody. I appreciate your help.</p>\n"},{"tags":["django","orm","queryset"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":12937472,"title":"What causes Django ORM to add duplicate tables?","body":"<p>I have a Django generic list view.\nSo it starts by looking at various request paramaters (list filter, sort) and applys the queryset.filter() method a number of times (or none at all) based on the request parameters.</p>\n\n<p>It then does some aggregates, but the totals are coming out incorrectly. Looking at the query, it seems to be adding various tables to the query two or more times. </p>\n\n<p>So a snippet from the FROM part of the query looks as follows:</p>\n\n<pre><code>INNER JOIN `sequencing_sample` ON (`sequencing_samplesubprojectstats`.`sample_id` = `sequencing_sample`.`id`) \nLEFT OUTER JOIN `sequencing_library` ON (`sequencing_sample`.`id` = `sequencing_library`.`sample_id`) \nLEFT OUTER JOIN `sequencing_loadedwith` ON (`sequencing_library`.`id` = `sequencing_loadedwith`.`library_id`) \nLEFT OUTER JOIN `sequencing_passfail` ON (`sequencing_loadedwith`.`passfail_id` = `sequencing_passfail`.`id`) \nLEFT OUTER JOIN `sequencing_passfail` T6 ON (`sequencing_library`.`passfail_id` = T6.`id`) \nLEFT OUTER JOIN `sequencing_organism` ON (`sequencing_sample`.`organism_id` = `sequencing_organism`.`id`) \nLEFT OUTER JOIN `sequencing_subproject` ON (`sequencing_samplesubprojectstats`.`subproject_id` = `sequencing_subproject`.`id`) \nLEFT OUTER JOIN `sequencing_library` T9 ON (`sequencing_sample`.`id` = T9.`sample_id`) \n</code></pre>\n\n<p>The passfail table is a lookup table, and should be duplicated, but the library table is central to the schema, and should not be duplicated as T9</p>\n\n<p>Is there any good documentation on what causes the ORM to add duplicate tables? There are various thing s happening in the view (various filters being optionally applied, annotations on the queryset). </p>\n\n<p>I can use raw SQL, but I would prefer to use Django objects, as sorting and pagination are a lot easier with these. </p>\n\n<p>I would like to know what part of the API is causing the library table to be added a second time so I can potentially avoid it  (if that is possible). </p>\n"},{"tags":["django","django-models","django-socialauth","django-facebook"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12928757,"title":"Django social_auth custom user model FacebookBackend explanation","body":"<p>I'm trying to use social_auth (omab) for the first time and I'm find that there is no working example how to store basic facebook user data. Authentication works and user is created without problem as it's explained in the social_auth docs but I need to store <code>gender</code> and <code>locale</code> also. Both of them belongs to the basic facebook user data so they are in the facebook response all the time.</p>\n\n<p>I'm use Django 1.4, Python2.7 and latest social_auth. So I was try to use <code>SOCIAL_AUTH_USER_MODEL = 'myapp.UserProfile'</code> in settings.py file and model.py is:</p>\n\n<pre><code>#!/usr/bin/python\n#-*- coding: UTF-8 -*-\nfrom django.db import models\nfrom django.contrib.auth.models import User\nfrom django.db.models import signals\nimport datetime\nfrom datetime import timedelta\nfrom django.db.models.signals import post_save\nfrom social_auth.signals import pre_update\nfrom social_auth.backends.facebook import FacebookBackend\n\n\nclass CustomUserManager(models.Manager):\n    def create_user(self, username, email):\n        return self.model._default_manager.create(username=username)\n\nclass UserProfile(models.Model):\n    gender = models.CharField(max_length=150, blank=True)\n    locale = models.CharField(max_length=150, blank=True)\n    #social_auth requirements\n    username   = models.CharField(max_length=150)\n    last_login = models.DateTimeField(blank=True)\n    is_active  = models.BooleanField()\n\n    objects = CustomUserManager()\n\n    class Meta:\n        verbose_name_plural = 'Profiles'\n\n    def __unicode__(self):\n        return self.username\n\n    def get_absolute_url(self):\n        return '/profiles/%s/' % self.id\n\n    def facebook_extra_values(sender, user,response, details, **kwargs):     \n        profile = user.get_profile()\n        current_user = user \n        profile, new = UserProfile.objects.get_or_create(user=current_user)\n\n        profile.gender = response.get('gender')\n        profile.locale = response.get('locale')\n        profile.save()\n        return True\n\n    pre_update.connect(facebook_extra_values, sender=FacebookBackend, weak = False, dispatch_uid = 'facebook_extra_values_user')\n</code></pre>\n\n<p>In the settings.py I'm define pipeline</p>\n\n<pre><code>SOCIAL_AUTH_PIPELINE = (\n    'social_auth.backends.pipeline.social.social_auth_user',\n    #'social_auth.backends.pipeline.associate.associate_by_email',\n    'social_auth.backends.pipeline.user.create_user',\n    'social_auth.backends.pipeline.social.associate_user',\n    'social_auth.backends.pipeline.social.load_extra_data',\n    'social_auth.backends.pipeline.user.update_user_details',\n    'social_auth.backends.pipeline.misc.save_status_to_session',\n)\n</code></pre>\n\n<p>but with above I get error <code>AssertionError: ForeignKey(None) is invalid. First parameter to ForeignKey must be either a model, a model name, or the string 'self'</code> </p>\n\n<p>Also I was try to use <code>AUTH_PROFILE_MODULE = 'myapp.UserProfile'</code> instead as I was do before to extend user.model, which works well but don't understand how to populate needed data when UserProfile is created. Does anyone can place working code for this problem?</p>\n\n<p>Thanks</p>\n"},{"tags":["python","django","full-text-search","django-haystack"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":12937345,"title":"Using custom weight in a Django Haystack search index","body":"<p>How do you incorporate a custom weight into a search index for the Django <a href=\"http://haystacksearch.org/\" rel=\"nofollow\">Haystack</a> app?</p>\n\n<p>I have a simple app storing questions and answers, with answers weighted according to votes (e.g. similar to Stackoverflow), and I'm currently indexing all the answers with Haystack/Whoosh. However, I'd like the answers with a higher vote tally to show up before other answers that otherwise have equally valid keyword matches. Reading over the docs on how whoosh indexes are created, I can't see any obvious way to do this. Is this supported in Haystack, specifically with the Whoosh backend?</p>\n"},{"tags":["html","django","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12936363,"title":"django template inheritance use same tag multiple templates","body":"<p>I am using the django template system fine-though is there a way to use the same variable inheritance tag for more than one template without pulling in the data from the other template too.</p>\n\n<pre><code>&lt;div id=\"content-container3\"&gt;\n\n{% block content-container2 %}{% endblock %}\n\n&lt;/div&gt;\n</code></pre>\n\n<p>So I want to use the above in say <em><code>people.html</code></em> template and <em><code>test.html</code></em> template.</p>\n\n<p>for example:\n{% extends \"base.html \"}\n{% block content-container2 %}{% endblock %}</p>\n\n<p>Though it cross refernces information from two templates in this case -does each variable inheriatnce tag have to be unique?</p>\n"},{"tags":["django","perl"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12928361,"title":"Trying to pass key value pair to perl script via subprocess module","body":"<p>I am trying to send key:value pair to perl script via sub-process module . I just tried with simple example it works fine. How can I pass key:value pair to perl script .....?</p>\n\n<p>Ans also how can send multiple input fields value to perls script> Below is my code</p>\n\n<p>view.py</p>\n\n<pre><code>from django.http import HttpResponseRedirect, HttpResponse\nfrom django.shortcuts import get_object_or_404, render_to_response\nfrom django.template import RequestContext\nfrom subprocess import Popen, PIPE, sys\nimport subprocess \n\ndef ex(request):\n   myName = 'Pervez'\n   if 'firstname' in request.POST:\n     myName = (request.POST['firstname'])\n   p = Popen(['/home/pervez/Desktop/simplepage/simplepage/templates/ex.pl', myName],stdin=PIPE, stdout=PIPE)\n    p.stdin.close()\n    result = p.stdout.read()\nreturn render_to_response('ex.html', {'name': result},context_instance=RequestContext(request))\n</code></pre>\n\n<p>ex.html</p>\n\n<pre><code>{{ name }}\n&lt;FORM METHOD=\"POST\" ACTION=\"\" NAME=\"SIGNUPFORM\"&gt;\n{% csrf_token %}\n&lt;fieldset&gt;\n&lt;legend&gt;Signup Form&lt;/legend&gt;\n&lt;table&gt;\n&lt;tr&gt;&lt;td&gt;First Name&lt;/td&gt;&lt;td&gt;&lt;INPUT SIZE=20 NAME=\"firstname\"&gt; &lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;Last Name&lt;/td&gt;&lt;td&gt;&lt;INPUT SIZE=20 NAME=\"lastname\"&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;User Name&lt;/td&gt;&lt;td&gt;&lt;INPUT SIZE=20 NAME=\"username\"&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;Password&lt;/td&gt;&lt;td&gt;&lt;INPUT SIZE=20 NAME=\"password\"&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;Verify Password&lt;/td&gt;&lt;td&gt;&lt;INPUT SIZE=20 NAME=\"vpass\"&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td&gt;Your E-mail&lt;/td&gt;&lt;td&gt;&lt;INPUT SIZE=20 NAME=\"email_id\"&gt;&lt;/td&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;td align=\"right\"&gt;&amp;nbsp;&lt;/td&gt;\n&lt;td&gt;&lt;input type=\"submit\" value=\"Submit\"&gt;\n    &lt;input type=\"Reset\" value=\"Clear Form\"&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/table&gt;\n&lt;/fieldset&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>ex.pl</p>\n\n<pre><code>#!/usr/bin/perl\n\n$|=1; # Flush immediately.\n\nprint \"Content-Type: text/plain\\n\\n\";\nread STDIN, $form, $ENV{'CONTENT_LENGTH'};\n\nforeach $pair (split('&amp;', $form)) {\n\n    if ($pair =~ /(.*)=(.*)/) {  # found key=value;\n\n        ($key, $value) = ($1, $2);              # get key, value.\n        $value =~ s/\\+/ /g;                     # substitute spaces for + signs.\n        $value =~ s/%(..)/pack('c',hex($1))/eg;\n        $inputs{$key} = $value;                 # Create Associative Array.\n    }\n}\n\nforeach $item (keys(%inputs)) {\n\n    print \"$item - $inputs{$item}\\n\"; \n}\n</code></pre>\n"},{"tags":["django","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":127,"score":1,"question_id":3192917,"title":"Django: Get custom tag output inside a view","body":"<p>I have a very specific problem.</p>\n\n<p>I wrote a special template tag to display some peace of HTML code based on some calculations. Tag call looks like this:</p>\n\n<pre><code>{% chord 'A' %}\n</code></pre>\n\n<p>And the output generated is</p>\n\n<pre><code>&lt;div class=\"chord\"&gt;A &lt;audio src=\"/media/chords/A/A.mp3\" controls&gt;Not supported&lt;/audio&gt;&lt;/div&gt; \n</code></pre>\n\n<p>Everything works fine, but I came to stage where <strong>I need to put this output inside a variable in my view, not in a template</strong>. Is it somehow possible? Is there a method, that I can call from inside a view, to get custom tag output with a given parameter?</p>\n"},{"tags":["mysql","sql-server","django","encryption","hash"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12935409,"title":"Safely generated encryption key from user's password?","body":"<p>I'm building a Django website with MySQL. I've already decided to use Django's built in pbkdf2-sha256 with randomly generated salt hash to store a user's password.</p>\n\n<p>However this website will also need to store third party login credentials for many other websites (who don't use oauth). So I was looking into AES-256 encryption and of course the issue becomes where to securely store the encryption key.</p>\n\n<p>Now here's my solution: Let each encryption key = the hash of the users actual password and a randomly generated salt (different from the salt already used for the password stored hash). The salt would be stored in the table, the actual password and the hash of it obviously not. So the encryption key would be generated on login and stored temporarily but expire on logout. Further someone compromising the server can't generate the encryption key without cracking the original pbkdf2-sha256 hash and even then, it would only be for that one user, not a universal key.</p>\n\n<p>The downside is that if they change/reset password, they would have to re-enter their credentials for each site. But that's not a huge deal and seems to be way more secure than storing the key somewhere on the server or even a different server.</p>\n\n<p>But I only learned what a hash is 24 hours ago so what do I know. Am I overlooking something or is this reasonably secure? Or is there a better way?</p>\n"},{"tags":["python","django","django-forms","django-crispy-forms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12935839,"title":"Validation in django-crispy-forms","body":"<p>I use django-crispy-forms - forms look pretty but there is too much work with code validation every fields oneself. </p>\n\n<p>I neeed util to generate automatic validation email fields, password fields etc... Any idea?</p>\n"},{"tags":["python","django","json","curl","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":684,"score":1,"question_id":11402756,"title":"No JSON object could be decoded - tastypie - curl","body":"<p>I was following the tastypie tutorial word for word until i reached the post part:\n<a href=\"http://django-tastypie.readthedocs.org/en/latest/interacting.html#creating-a-new-resource-post\" rel=\"nofollow\">http://django-tastypie.readthedocs.org/en/latest/interacting.html#creating-a-new-resource-post</a></p>\n\n<p>When i run this command i keep getting the following error:\n<code>No JSON object could be decoded</code></p>\n\n<p>I checked and I am certain that I am following the documentation word for word.</p>\n\n<p>Thanks for your help</p>\n"},{"tags":["django","mongodb","mongoengine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12918401,"title":"mongo engine update command for fields which has a proper input value","body":"<p>I have scenario where  i have to update many records. but the problem is i have to update those fields which have some variable coming as input. if any incoming field has none then it should not overwrite its existing db values.</p>\n\n<pre><code>new_code = None\nnew_type = \"new values\"\n\nuser.objects(query).update(set__type=new_type ,set__code=new_code) \n</code></pre>\n\n<p>above query return 10 records but i want to update only type coz it has a value. but code value should not be upated in db. coz its variable is none ( coming from user input form )</p>\n\n<p>i have to make some kind of if else condition</p>\n\n<p>in db i have records like\ntype=old,code=111\nas new_code is not coming as input so it should update only type and db should look like\ntype = new values , code = 111</p>\n"},{"tags":["django","django-models"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":12926368,"title":"Re-using Object(s) from another Django App's Model","body":"<p>I'm newer to python, and newer to writing \"web apps\" but not new to the industry.</p>\n\n<p>I'm working on building a site in Mezzanine which is a Django project.  I want to build a content type for \"Portfolios\" which would pull a single image for each gallery content type.</p>\n\n<p>My question is (keep in mind, per the documentation I can't subclass the GalleryImage type):</p>\n\n<ul>\n<li>Should I copy the objects &amp; specific attributes to my model?</li>\n<li>Is there better approach to this?</li>\n</ul>\n\n<p>Here's the data model:\n<a href=\"http://mezzanine.jupo.org/docs/_images/graph.png\" rel=\"nofollow\">http://mezzanine.jupo.org/docs/_images/graph.png</a></p>\n\n<p>Here's the documentation on custom content types:\n<a href=\"http://mezzanine.jupo.org/docs/content-architecture.html#the-page-model\" rel=\"nofollow\">http://mezzanine.jupo.org/docs/content-architecture.html#the-page-model</a></p>\n\n<h1>Edit</h1>\n\n<p>I'd like to further clarify what I'm trying to do.</p>\n\n<p>What I want this \"content-type\" to do is create a single thumbnail from each \"gallery\" that is a child of this  \"content-type\". Display each thumbnail as a link to each of the galleries.</p>\n\n<p>Example:</p>\n\n<p>Portfolio Page - Display a single photo from \"Landscape photography\" &amp; \"City life photography\"\n|\n|----Landscape photography (w / 7 photos)\n|----City life photography (w / 7 photos)\n|----etc</p>\n\n<p>Maybe I'm asking a dumb question.</p>\n\n<p>Should I be copying the file path from the \"Gallery\" model to my \"Portfolio\" model?</p>\n"},{"tags":["javascript","html","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12934439,"title":"How to get the page back and not refresh after submitting form in django","body":"<p>reffering to my title above:</p>\n\n<p>patientdetails.html</p>\n\n<pre><code>&lt;form id=\"content\" action=\"{% url patientdetails_view pk %}\" method=\"post\" &gt; \n{% csrf_token %}{{form.owner}}\n------\n&lt;tbody&gt;&lt;tr&gt;\n&lt;td&gt;&lt;input type=\"submit\" value=\"Save\" &gt;   \n------\n</code></pre>\n\n<p>patientList.html</p>\n\n<pre><code>{% for patient in patienter %}\n&lt;tr class = {% cycle \"row_even\" \"row_odd\" %}&gt;\n&lt;td&gt;{{ patient.id }}&lt;/td&gt;\n&lt;td&gt; &lt;a href=\"#\"&gt;{{ patient.Personnummer }}&lt;/a&gt;&lt;/td&gt;\n&lt;td class =\"name\"&gt; &lt;a href=\" {% url patientdetails_view patient.id %}\"&gt;{{ patient.first_name }} {{ patient.last_name }}&lt;/a&gt;&lt;/td&gt;\n\n{% endfor %}\n</code></pre>\n\n<p>here is my question</p>\n\n<p>My program flow like this. I have to click to a list of names in patientList.html and edit some data in patientdetails.html and after i made the changes how do i get back to patientList.html after i have done some changes in patientdetails.html and save. i have to click twice to get back to the original page. the first click refreshing and save the data and the second click back to the original page.</p>\n\n<ol>\n<li>why is it doing that. what did i missing here. </li>\n<li>how do i do alert stated\"Data are saved\".</li>\n</ol>\n\n<p>I'm very very new to django. I'm totally lost in here.</p>\n"},{"tags":["django","sorl-thumbnail"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":450,"score":1,"question_id":7490684,"title":"Using static images with sorl-thumbnail","body":"<p>I am trying to serve the thumbnail of a file that resides in my STATIC_ROOT folder. It doesn't really matter if it ends up in MEDIA_URL/cache, but sorl-thumbnail will not load the image from the static folder.</p>\n\n<p>current code:</p>\n\n<pre><code>{% thumbnail \"images/store/no_image.png\" \"125x125\" as thumb %}\n</code></pre>\n\n<p>hack that works</p>\n\n<pre><code>{% thumbnail \"http://localhost/my_project/static/images/store/no_image.png\" \"125x125\" as thumb %}\n</code></pre>\n\n<p>I don't like the hack because\nA) It is not dry (my project is actually served from a sub-directory of /\nB) It is using http to grab a file that is only 3 directories away, seems pointlessly inefficient</p>\n"},{"tags":["python","django","redundancy","webfaction","django-multi-db"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12070031,"title":"Django multi-db: Route all writes to multiple databases","body":"<p>I am currently sitting in front of a more specific problem which has to do with fail-over support / redundancy for a specific web site which will be hosted over @ WebFaction. Unfortunately replication at the DB level is not an option as I would have to install my own local PostgreSQL instances for every account and I am worried about performance amongst other things. So I am thinking about using Django's multi-db feature and routing all writes to all (shared) databases and the balance the reads to the nearest db.</p>\n\n<p>My problem is now that all docs I read seem to indicate that this would most likely not be possible. To be more precise what I would need:</p>\n\n<ul>\n<li>route all writes to a specific set of dbs (same type, version, ...)</li>\n<li>if one write fails, all the others will be rolled back (transactions)</li>\n<li>route all reads to the nearest db (could be statically configured)</li>\n</ul>\n\n<p>Is this currently possible with Django's multi-db support?</p>\n\n<p>Thanks a lot in advance for any help/hints...</p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12882994,"title":"Django ORM giving error when trying to use User with additional info","body":"<p>I'm using Django 1.4 with Python 2.7 on Ubuntu 12.04.</p>\n\n<p>Edit:  I'm clearing some of the erroneous portions of this question out as it appears the same problem has re-occurred.  It was working wonderfully - I made no changes - and now it's failing.  What's up with that?</p>\n\n<p>This is basically what the views look like:</p>\n\n<pre><code>@login_required\ndef request_new_project(request):\n    \"\"\"\n    ..  function:: request_new_project()\n\n        Collect information to call the form used to create a new project\n\n        :param request: Django Request object\n    \"\"\"\n    user_dict = { 'rsb_username'  : request.user.username}\n    form = CreateProject(initial = user_dict)\n    data = { 'user' : request.user }\n    data.update(csrf(request))\n    data.update({ 'form' : form })\n\n    return render_to_response(\"create_project.html\", data)\n\n@login_required\ndef add_project(request):\n    \"\"\"\n    ..  function:: add_project()\n\n        Add a project for the user\n\n        :param request: Django Request object\n    \"\"\"\n\n    if (request.method == \"POST\"):\n        user = User.objects.get(username = request.POST.get('rsb_username'))\n        userProfile = UserProfile.objects.get(user = user)\n\n        new_project = Projects(client = userProfile,\n                               project_name = request.POST.get('rsb_project_name'),\n                               description = request.POST.get('rsb_description'),\n                               budget = request.POST.get('rsb_budget'),\n                               time_frame = request.POST.get('rsb_time_frame'),\n                               time_frame_units = request.POST.get('rsb_time_frame_units'),\n                               contact = request.POST.get('rsb_point_of_contact'),\n                               contact_email = request.POST.get('rsb_contact_email'),\n                               contact_phone = request.POST.get('rsb_contact_phone'),\n                               price_quote = 0,\n                               eta = 'To Be Determined',\n                               current_status = 'Waiting for quote',\n                               )\n        new_project.save()\n        return view_projects(request)\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>Cannot assign \"&lt;UserProfile: UserProfile object&gt;\": \"Projects.client\" must be a \"User\" instance.\n</code></pre>\n\n<p>I didn't change the models.</p>\n\n<pre><code># Create a table for users\nclass UserProfile(models.Model):\n    user = models.OneToOneField(User)\n\n    # Client Info\n    company_name = models.CharField(max_length = 200)\n    client_type = models.CharField(max_length = 200)\n    address1 = models.CharField(max_length = 200)\n    address2 = models.CharField(max_length = 200)\n    city = models.CharField(max_length = 200)\n    state = models.CharField(max_length = 200)\n    country = models.CharField(max_length = 200)\n    zip_code = models.CharField(max_length = 200)\n    phone_number = models.CharField(max_length = 200)\n\n# Create a table to manage project requests\nclass Projects(models.Model):\n    client = models.ForeignKey(User)\n    project_name = models.CharField(max_length = 50)\n    description = models.TextField()\n    budget = models.CharField(max_length = 50)\n    time_frame = models.DecimalField(max_digits = 3, decimal_places = 1)\n    time_frame_units = models.CharField(max_length = 25)\n    contact = models.CharField(max_length = 50)\n    contact_email = models.EmailField()\n    contact_phone = models.CharField(max_length = 25)\n    price_quote = models.DecimalField(max_digits = 10, decimal_places = 2)\n    eta = models.CharField(max_length = 200)\n    current_status = models.CharField(max_length = 200)\n</code></pre>\n\n<p>Any suggestions?</p>\n\n<p>UPDATE 1:\nFrom the actual database I can see that one of the <code>rsb_projects</code> constraints is:\n<code>rsb_projects_client_id_fkey  (client_id) REFERENCE rsb_userprofile (id) MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION DEFERRABLE INITIALLY DEFERRED</code></p>\n\n<p>If that helps...</p>\n\n<p>It seems to me that even though I've defined the <code>ForeignKey</code> in the <code>models.py</code> to be against <code>User</code> the database wants the <code>UserProfile</code> id.</p>\n\n<p>Thoughts?</p>\n"},{"tags":["ajax","django","tastypie"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":12919248,"title":"Tastypie -- How to make obj_create send the newly created entity back?","body":"<p>Im sending a POST that creates a new simple <code>Resource</code> (not a ModelResource), and that works.</p>\n\n<p>My question is how do I get back for example the created resource's <code>bundle</code> property to the ajax response?</p>\n\n<p>That's the resource example :</p>\n\n<pre><code>class MyResource(Resource):\n    x = fields.CharField(attribute='x')\n    y = fields.CharField(attribute='y')\n\n    class Meta:\n        resource_name = 'myresource'\n        object_class = XYObject\n        authorization   = Authorization()\n\n    def obj_create(self, bundle, request=None, **kwargs):\n        x = bundle.data[\"x\"]\n        x = bundle.data[\"y\"]\n        bundle.obj = XYObject(x, y)\n        return bundle\n</code></pre>\n\n<p>And this is the POST request</p>\n\n<pre><code>$.ajax({\n               type: \"POST\",\n               url: '/api/v1/myresource/',\n               contentType: 'application/json',\n               data: data,\n               dataType: 'json',\n               processData: false,\n               success: function(response)\n               {\n                //get my resource here\n               },\n               error: function(response){\n                   $(\"#messages\").show('error');\n                 }\n               });\n</code></pre>\n"},{"tags":["django","testing","documentation","python-sphinx"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12931338,"title":"Sphinx code validation for Django projects","body":"<p>I have a Django project with a couple of apps - all of them with 100% coverage unit tests. And now I started documenting the whole thing in a new directory using ReST and Sphinx. I create the html files using the normal approach: <code>make html</code>.</p>\n\n<p>Since there are a couple of code snippets in these ReST files, I want to make sure that these snippets stay valid over time. So what is a good way to test these ReST files, so I get an error if some API changes made such a snippet invalid? I guess there have to be some changes in conf.py?</p>\n"},{"tags":["django","celery"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12920974,"title":"Mixing django-celery and standalone celery","body":"<p>We are running a website built with Django and Piston and I want to implement celery to offload tasks to an external server. I don't really want to run Django on the secondary server and would like to simply run a pure Python celery worker. Is it possible for me to write simple function stubs on the Django server and write the actual function logic on the secondary server?</p>\n\n<p>i.e.</p>\n\n<p>Django Side</p>\n\n<pre><code>from celery import task\n\n@task\nsend_message(fromUser=None, toUser=None, msgType=None, msg=None):\n    pass\n</code></pre>\n\n<p>Server Side</p>\n\n<pre><code>from celery import Celery\ncelery =  Celery('hello', broker='amqp://guest@localhost//')\n@celery.task\nsend_message(fromUser=None, toUser=None, msgType=None, msg=None):\n    # Do send_message logic here\n</code></pre>\n"},{"tags":["django","django-models","django-cms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12022967,"title":"Django-CMS cms_plugins.py render foreignkey instance","body":"<p>I'm trying to write a very simple plugin for Django-CMS based on version 2.1.3 docs. It's a carousel pluging, and the only difference is that I'm trying to add a link to the images I upload.</p>\n\n<p>My models.py and cms_plugins.py are here:</p>\n\n<p><a href=\"http://dpaste.com/788487/\" rel=\"nofollow\">http://dpaste.com/788487/</a></p>\n\n<p><a href=\"http://dpaste.com/788486/\" rel=\"nofollow\">http://dpaste.com/788486/</a></p>\n\n<p>In cms_plugins.py, there's a problem starting from line 12 \"if instance.url\". \"instance\" is probably referring to CarouselPlugin, but the \"url\" and \"page_link\" attribute I'm trying to get is from the Picture model which has a foreignkey back to Carousel.</p>\n\n<p>Could anyone tell me the correct way of referrencing the \"url\" and \"page_link\" attribute in cms_plugins.py?</p>\n\n<p>Thank you very much.</p>\n"},{"tags":["python","django","constants"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":130,"score":1,"question_id":9696668,"title":"Accessing my user defined python global constants in Django template","body":"<p>I am developing an application using Python 2.5 / Google App Engine / Django (for templates)</p>\n\n<p>It seems like a good idea for me to define some global variables (to be used as constants) in my Python code rather than trying to using literals and trying to remember the spelling/capitalisation each time.</p>\n\n<p>There are articles here on how to define and use global variables/constants in my Python code,  but is there any way that I can use these global variables in my Django templates apart from passing in a dictionary containing all of them?</p>\n"},{"tags":["django","django-urls"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12932210,"title":"Django: let users create sites with personalized urls","body":"<p>I am using django and have urls such as the following in my url.py</p>\n\n<pre><code>url('^mysite/home/$', home),\nurl('^mysite/listings/$', listings),\n</code></pre>\n\n<p>Now, what I want is for users to be able to create their own accounts, which would then have their own url names. I'm thinking something like wordpress:</p>\n\n<pre><code>macks_knitting_blog.wordpress.com\n</code></pre>\n\n<p>However, the two following urls should both map to the same function, listings. </p>\n\n<pre><code>macks_knitting_blog.mysite.com/listings\nmy_trip.mysite.com/listings\n</code></pre>\n\n<p>The accounts are essentially identical and the same functions and templates will be used for all (unlike wordpress). The information that is shown will be filtered based on request.user and the template will look a bit different based on request.path.</p>\n\n<p>Is it possible to do something like this? It would also be fine with:</p>\n\n<pre><code>mysite.com/macks_knitting_blog/listings\n</code></pre>\n\n<p>I've read about Django sites but it didn't seem to hold in this case. Or did I miss something? The idea is that I shouldn't need to change settings.py or url.py for this to happen. It should all happen automatically. Otherwise, I can just think of assigning some id to the new site and passing that around - not very personalized looking.</p>\n"},{"tags":["django","django-templates","django-views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12931809,"title":"Django Context contains not defined field when using RequestContext","body":"<p>Hi I'm writing a django project, and I write template code like this:</p>\n\n<pre><code>            &lt;ul id=\"nav\"&gt;\n                &lt;li&gt;&lt;a href=\"/\"&gt;Home&lt;/a&gt;&lt;/li&gt;\n                &lt;li&gt;&lt;a href=\"/user/\"&gt;Users&lt;/a&gt;&lt;/li&gt;\n                {% if user %}\n                    &lt;li&gt;&lt;a href=\"/user/{{ user.id }}/\"&gt;Settings&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/logout/\"&gt;Log Out&lt;/a&gt;&lt;/li&gt;\n                {% else %}\n                    &lt;li&gt;&lt;a href=\"/login/\"&gt;Log In&lt;/a&gt;&lt;/li&gt;\n                    &lt;li&gt;&lt;a href=\"/signup/\"&gt;Sign Up&lt;/a&gt;&lt;/li&gt;\n                {% endif %}\n            &lt;/ul&gt;\n</code></pre>\n\n<p>Now in login view I write like this:</p>\n\n<pre><code>def login(request):\n    if user_logged_in(request):\n        return redirect('/')\n    if request.method == 'GET':\n        form = LogInForm()\n        return render_to_response(LOGIN_PATH, {'form':form}, context_instance=RequestContext(request))\n</code></pre>\n\n<p>But when I run the server, no user is logged in, and visit login page, it shows Settings and Log Out(there is a user object in context), but it shouldn't!</p>\n\n<p>If I remove RequestContext, say return render_to_response(LOGIN_PATH, {'form':form}), it will be OK. And</p>\n\n<pre><code>return render_to_response(LOGIN_PATH, {'form':form, 'user':None}, context_instance=RequestContext(request))\n</code></pre>\n\n<p>is OK too. But I don't want to do it.</p>\n\n<p>I know it's dirty design, well... I'm looking for suggestions and solutions. Many thanks~!</p>\n"},{"tags":["python","django","database-design","django-models","heroku"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12926922,"title":"How to set up Django models with two types of users with very different attributes","body":"<p>I'm rebuilding and making improvements to an already existing Django site and moving it over from Webfaction to Heroku, and from Amazon's SimpleDB to Heroku Postgres (though testing locally on Sqllite3 when developing).  A lot of what I'm doing is moving over to use built-in Django functionality, like the Django admin, user authentication, etc.</p>\n\n<p>Conceptually, the site has two kinds of users: Students and Businesses.  The two types of users have completely different permissions and information stored about them.  This is so much the case that in the original structure of the site, we set up the data model as follows:</p>\n\n<pre><code>Users\n    ID (primary_key)\n    Business_or_Student ('B' if business, 'S' if student)\n    email (unique)\n    password (hashed, obviously)\n    ...\n\nStudents\n    ID (Foreignkey on Users)\n    &lt;more information&gt;\n    ...\n\nBusinesses\n    ID (Foreignkey on Users)\n    &lt;more information&gt;\n    ...\n</code></pre>\n\n<p>This worked pretty well for us, and we had the bare-bones user information in the Users table, and then any more detailed information in the Students and Businesses tables.  Getting a user's full profile required something along this pseudocode:</p>\n\n<pre><code>def get_user_profile(id):\n    if Users(id=id).Business_or_Student = 'B':\n        return Businesses(id=id)\n    else:\n        return Students(id=id)\n</code></pre>\n\n<p>In moving over, I've found that Django's built-in <code>User</code> object has pretty limited functionality, and I've had to extend it with a <code>UserProfile</code> class I've created, and then had additional <code>Student</code> and <code>Business</code> tables.  Given all of the patching I'm doing with this in the Django admin, and being relatively unfamiliar with Django models since I always did it differently, I'm not sure if this is the best way to go about it, or if I should just stick <em>all</em> of the information for businesses and students in the <code>UserProfile</code> table and just differentiate the two with different groups, or if there's even some way to do this all in the built-in <code>User</code> object.</p>\n\n<p>Since businesses and students also have different interfaces, I'm seriously considering setting up the two as different apps within my Django project, and so separating their views, models, etc. entirely.  That would look something like:</p>\n\n<pre><code>MyProject/\n    MyProject/ (project folder, Django 1.4)\n    mainsite/\n    students/\n    businesses/\n</code></pre>\n\n<p>One of my biggest concerns is with the Django Admin.  In extending <code>User</code>, I already had to add the following code:</p>\n\n<pre><code>class UserProfileInline(admin.StackedInline):\n    model = UserProfile\n    can_delete = False\n    verbose_name_plural = 'profile'\n\nclass UserAdmin(UserAdmin):\n    inlines = (UserProfileInline, )\n</code></pre>\n\n<p>However, I would like the information for the Business or Student aspects of the user to show up in the Django admin when that <code>User</code> is pulled up, but the <code>ForeignKey</code> part of the model is in the <code>Student</code> and <code>Business</code> model since every <code>Student</code>/<code>Business</code> has a <code>User</code> but every <code>User</code> has only one <code>Student</code> <strong>or</strong> one <code>Business</code> object connected with it.  I'm not sure how to add a conditional Inline for the Admin.</p>\n\n<p><strong>Question: Given this structure and these concerns, what is the best way to set up this site, particularly the data model?</strong></p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":3,"up_vote_count":4,"down_vote_count":0,"view_count":167,"score":4,"question_id":10814097,"title":"How to clear / maintain a django-sentry database?","body":"<p>I am using django-sentry to track errors in a website. My problem is that the database has grown too big. The 'message' table and the 'groupedmessage' are related</p>\n\n<p>Is there any way to clear older entries and specific messages or to add the sentry tables to the admin of django?</p>\n"},{"tags":["python","django","django-facebook"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12929892,"title":"Django Facebook timeout","body":"<p>Since I updated to the newest version of django facebook I get this error:</p>\n\n<pre><code>TypeError at /facebook/connect/\nopen() got an unexpected keyword argument 'timeout'\n</code></pre>\n\n<p>Here is the full trackback:</p>\n\n<pre><code>File \"/usr/lib/python2.5/site-packages/django/core/handlers/base.py\" in get_response\n  111.                         response = callback(request, *callback_args, **callback_kwargs)\nFile \"/usr/lib/python2.5/site-packages/django/views/decorators/csrf.py\" in wrapped_view\n  77.         return view_func(*args, **kwargs)\nFile \"/usr/lib/python2.5/site-packages/django_facebook/decorators.py\" in _wrapped_view\n  92.                 get_persistent_graph(request, redirect_uri=current_uri)\nFile \"/usr/lib/python2.5/site-packages/django_facebook/api.py\" in get_persistent_graph\n  62.         graph = get_facebook_graph(request, *args, **kwargs)\nFile \"/usr/lib/python2.5/site-packages/django_facebook/api.py\" in get_facebook_graph\n  161.                             code, redirect_uri=redirect_uri)\nFile \"/usr/lib/python2.5/site-packages/open_facebook/api.py\" in convert_code\n  251.         response = cls.request('oauth/access_token', **kwargs)\nFile \"/usr/lib/python2.5/site-packages/open_facebook/api.py\" in request\n  75.         response = cls._request(url, post_data)\nFile \"/usr/lib/python2.5/site-packages/open_facebook/api.py\" in _request\n  110.                                                 timeout=timeout)\n\nException Type: TypeError at /facebook/connect/\nException Value: open() got an unexpected keyword argument 'timeout'\n</code></pre>\n"},{"tags":["django","django-forms","django-multi-db"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":51,"score":0,"question_id":12929327,"title":"django is_valid() throws database error","body":"<p>My is_valid() function throws a database error. Am making use of a an alias database(not the default one) and hence am not able to validate my form. My Application table is in database2.\n Code:</p>\n\n<p>settings.py</p>\n\n<pre><code>DATABASES = {\n      default:{\n                 database1\n       }\n      'database2':{\n                  database2\n       }\n}\n</code></pre>\n\n<p>models.py</p>\n\n<pre><code>class Application(models.Model)\n            application_name = models.CharField(max_length=48,primary_key=True )\n            application_version = models.DecimalField(max_digits=3,decimal_places=0,blank=False,null=False)  \n</code></pre>\n\n<p>forms.py</p>\n\n<pre><code>class Application_form(forms.ModelForm):\n    def __init__(self,*args, **kwargs):\n\n        super(Application_form,self).__init__(*args, **kwargs)\n\nclass Meta:\n    model = Application  \n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>Application_Form=Application_form(request.POST)    \n       if Application_Form.is_valid():\n           print \"true\"\n       else:\n           print \"false\"\n</code></pre>\n"},{"tags":["django","heroku","coffeescript","fabric","django-compressor"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":207,"score":2,"question_id":9392993,"title":"Weird deployment issue with Django and CoffeeScript to Heroku","body":"<p>This is sort of a complex question so it will take a bit to explain.  I'm not looking for a direct answer so any advice would be good.  I have a Django app that uses a lot of CoffeeScript.  To compile the CoffeeScript in the project I am using the app <code>django-compressor</code>.  To use <code>django-compressor</code> I need to install <code>nmp</code> (node package manager).  Unfortunately, I can't install <code>npm</code> on Heroku.  Thus, I need to compile the CoffeeScript before it hits the Heroku servers.  So I did that by setting up <code>Fabric</code> which is seeming to work well.</p>\n\n<p>I am running into a problem no because I can get the compiled CoffeeScript as a static file but the templates still have the <code>{% compress js %} *** {% endcompress %}</code> tags in them because <code>django-compressor</code> does not regenerate new templates until run time.</p>\n\n<p>Thus I am looking for advice on how to deploy the app to get ride of the template tags so that the app can be deployed on Heroku.  I know it is a question with a lot of parts so any piece of advice would be super helpful!</p>\n"},{"tags":["python","django","google-app-engine","ssl"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":135,"score":0,"question_id":12906527,"title":"GAE SSL for custom domain impossible?","body":"<p>I tried to configure SSL for my website that is served on GAE and failed.</p>\n\n<p><a href=\"http://www.gluwa.com/\" rel=\"nofollow\">http://www.gluwa.com/</a></p>\n\n<p>works fine but</p>\n\n<p><a href=\"https://www.gluwa.com/\" rel=\"nofollow\">https://www.gluwa.com/</a></p>\n\n<p>gives me nothing but an google error page.</p>\n\n<p><img src=\"http://i.stack.imgur.com/G6Hlm.png\" alt=\"enter image description here\"></p>\n\n<p>After going over their SSL setup instruction several times now I am out of guesses.</p>\n\n<p>I've tried both SNI and VIP but still no hope.</p>\n\n<p>Is it impossible to have SSL for GAE apps?</p>\n\n<p>EDIT:</p>\n\n<p>I'm adding my settings as suggested by dragonx.</p>\n\n<p><img src=\"http://i.stack.imgur.com/dMvDl.png\" alt=\"enter image description here\"></p>\n\n<p>app.yaml</p>\n\n<pre><code>application: myapp\nversion: 1\nruntime: python27\napi_version: 1\nthreadsafe: true\n\nlibraries:\n- name: django\n  version: \"1.3\"\n- name: PIL\n  version: \"latest\"\n- name: webob\n  version: \"latest\"\n\nbuiltins:\n- django_wsgi: on\n- appstats: on\n\ninbound_services:\n- warmup\n\nhandlers:\n- url: /static/admin\n  static_dir: admin_media/\n\n- url: /static\n  static_dir: static/\n</code></pre>\n\n<p>EDIT 2:</p>\n\n<pre><code>handlers:\n- url: /.*\n  script: google.appengine.ext.django.main.app\n  secure: always\n</code></pre>\n\n<p>I commented out below from builtins to add above handler.</p>\n\n<pre><code>- django_wsgi: on\n</code></pre>\n\n<p>However, adding this mark didn't solve the problem.</p>\n\n<p>EDIT 3:</p>\n\n<p>For more information, I followed below three steps to create my SSL certificate with openssl in my terminal.</p>\n\n<pre><code>$openssl genrsa -out yourdomain.com.key 1024\n$openssl req -new -key yourdomain.com.key -out yourdomain.com.csr\n$openssl x509 -req -days 365 -in yourdomain.com.csr -signkey yourdomain.com.key -out yourdomain.com.crt\n</code></pre>\n\n<p>and for the second command, I entered these information</p>\n\n<pre><code>Country Name (2 letter code) [AU]:KR\nState or Province Name (full name) [Some-State]:Seoul\nLocality Name (eg, city) []:Seocho\nOrganization Name (eg, company) [Internet Widgits Pty Ltd]:Gluwa Inc.\nOrganizational Unit Name (eg, section) []:R&amp;D\nCommon Name (e.g. server FQDN or YOUR name) []:www.gluwa.com\nEmail Address []:gluwa@gluwa.com\n</code></pre>\n\n<p>I'm not sure if they should matter at all, though.</p>\n\n<p>EDIT 4:</p>\n\n<p>I tried using GAE server's information for creating SSL but it didn't worth either.</p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12930376,"title":"Resolving foreign key attribute inside a model's __dict__?","body":"<p>In my ModelForm's save() method I am accessing self.changed_data and I would like to do something like:</p>\n\n<pre><code>changes_moderated_dict.update(dict(\n    [(i, staff.profile.user.__dict__[i]) \n    for i in changed_data \n    if i in  staff.profile.user.__dict__]))\n</code></pre>\n\n<p>which updates changes_moderated_dict with staff.profile.user key/value pairs if the key is found in changed_data. changes_moderated_dict is basically used to store all the field changes made to this particular model inside the form (for later processing and serialization).</p>\n\n<p>This works all fine as long as the staff.profile.user is not a foreign key relationship in which case the filed name has a _id suffix and would not match up with the self.changed_data field name which is the attribute name as it appears in the model (without _id).</p>\n\n<p>Is there a way do resolve the foreign key attribute inside a model's __dict__ to it's actual name so that the above method still works? </p>\n"},{"tags":["django","url","caching","urlconf"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":71,"score":0,"question_id":12865916,"title":"Reload django url's without restarting the server","body":"<p>Why? I want multiple models on the first level of the path :)</p>\n\n<p>Using: Django 1.4.1</p>\n\n<p>Code setup urls:</p>\n\n<pre><code>PAGE_SLUGS = '|'.join(Page.objects.values_list('slug', flat=True))\nBRAND_SLUGS = ... same concept\n(r'^(?P&lt;brand_slug&gt;%s)/$' % BRAND_SLUGS, 'novomore.apps.catalog.views.product_showcase_list'),\n\nurl(r'^%s/$' % PAGE_SLUGS, 'prefab.apps.pages.views.page_detail', name='page'),\n</code></pre>\n\n<p>In the save method of model Page: </p>\n\n<pre><code>if self.pk is None:\n    clear_url_caches()\n</code></pre>\n\n<p>I don't want to run a query on each request so thats why i use this aproach, when i add a instance the PAGE_SLUGS need to be updated.</p>\n\n<p>clear_url_caches() doesnt seem to work</p>\n\n<p>Any suggestions?</p>\n\n<p>This doesn't do the trick:</p>\n\n<pre><code>if settings.ROOT_URLCONF in sys.modules:\n    reload(sys.modules[settings.ROOT_URLCONF])\n    reload(importlib.import_module(settings.ROOT_URLCONF))\n</code></pre>\n"},{"tags":["django","django-socialauth"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12929301,"title":"Using get_user_details in django-social-auth","body":"<p>I am trying to use django-social-auth to allow my users to log into the website using Facebook. I want to save the first and last name, and email of the user. However, using the setup in the documentation, it saves the username, email and auth token, but for some reason it does not save the first and last names.\nLooking at the code, the FacebookBackend class provides the function get_user_details but I am not sure how it can be used.\nIt would seem that there should be a simple way to obtain this information. If not, there is always the <a href=\"http://tryolabs.com/Blog/2012/02/13/get-user-data-using-django-social-auth/\" rel=\"nofollow\">option to add an additional pipeline</a>.</p>\n"},{"tags":["jquery","python","django","autocomplete"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1290,"score":2,"question_id":5074329,"title":"Django, JQuery, and autocomplete","body":"<p>After some extensive research (googling), I cannot find a current tutorial on how to set up autocomplete using Django and JQuery.  There appears to be a variety of plugins and there appears to be no consistency or standard about which to use or when.</p>\n\n<p>I'm not a pro at either Django or JQuery, but need an autocomplete solution that is well documented and fairly simple to utilize.  </p>\n\n<p>Suggestions?</p>\n"},{"tags":["python","django","mvc","data-access-layer","business-logic-layer"],"answer_count":6,"favorite_count":10,"up_vote_count":17,"down_vote_count":0,"view_count":448,"score":17,"question_id":12578908,"title":"Separation of business logic and data access in django","body":"<p>I am writing a project in Django, and I see that 80% of the code is in the file <code>models.py</code>. This code is confusing and after a certain time, I cease to understand what is really happening.</p>\n\n<p>That's what bothers me:</p>\n\n<ol>\n<li>I find ugly, that my model-level (which was supposed to be\nresponsible only for the work with data from a database) is also\nsending some email, walks on api to other services, etc. </li>\n<li>Also, I find it unacceptable placing business logic in the view, because in\nthis way it becomes difficult to control. For example, in my\napplication there are at least three ways in which to create a new\nmodel <code>User</code>, but technically it should create a uniform way. </li>\n<li>I do not always notice when the methods and\nproperties of my models becomes not deterministic and when they becomes to have\nside effects.</li>\n</ol>\n\n<p>It's a simple example:</p>\n\n<pre><code># At first, it was like this:\n\nclass User(db.Models):\n\n    def get_present_name(self):\n        return self.name or 'Anonymous'\n\n    def activate(self):\n        self.status = 'activated'\n        self.save()\n\n# Over time, it turned into this:\n\nclass User(db.Models):\n\n    def get_present_name(self): \n        # property became not deterministic in terms of database\n        # data is taken from another service by api\n        return remote_api.request_user_name(self.uid) or 'Anonymous' \n\n    def activate(self):\n        # method was to have a side effect (send message to user)\n        self.status = 'activated'\n        self.save()\n        send_mail('Your account is activated!', '…', [self.email])\n</code></pre>\n\n<p>What I want is to separate entities in my code:</p>\n\n<ol>\n<li><strong>Entities of my database, database level, \"What contains my application?</strong></li>\n<li><strong>Entities of my application, business logic level, \"What can make my application?\"</strong></li>\n</ol>\n\n<p>My question is: What are the good practices to implement such an approach that can be applied in Django?\nThank you!</p>\n"},{"tags":["django","django-settings","django-users","django-wsgi"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":12895417,"title":"How to setup django with unique settings.py per SITE_ID","body":"<p>I have been researching the various (and there are many) ways to have multiple sites under a single Django framework.</p>\n\n<p>I still don't see a solution that fits well for my use case. The use case being:</p>\n\n<ul>\n<li>A single database, as the majority of data (95%+) will be shared between two\napps </li>\n<li>Two distinct user types, that each login via different domains,\nand in fact interact with the same raw data, differently</li>\n</ul>\n\n<p>What I want to achieve is this:</p>\n\n<p>When a visitor comes to example.com, the settings for SITE_ID = 1 are in effect.</p>\n\n<p>When a visitor comes to training.example.com, the settings for SITE_ID = 2 are in effect.</p>\n\n<p>I want to do this because:</p>\n\n<ul>\n<li>I want to use explicitly different UserProfile objects for the different users</li>\n<li>I want to mix and match views and apps at my will between the different domains</li>\n</ul>\n\n<p>Django docs on the Sites framework don't seem to help me, even though with this and some other articles around, I can see a few possibilities.</p>\n\n<p>My current thinking is to actually solve it using the wsgi server (uWSGI in my case), where I'd take Django's default wsgi.py, duplicate it, and each wsgi conf wiill have its own Django  settings.py. </p>\n\n<p>Then the server will in fact be serving two distinct wsgi apps, even though they use much of the same code. </p>\n\n<p>So, in this scenario, my Django project will have:</p>\n\n<ul>\n<li>example.com.settings.py (SITE_ID = 1)</li>\n<li>training.example.com.settings.py (SITE_ID = 2)</li>\n<li>example.com.wsgi.py (uses example.com.settings.py)</li>\n<li>training.example.com.wsgi.py (uses training.example.com.settings.py)</li>\n</ul>\n\n<p>My scenario here should work but it will be twice the memory of solving this within the same Django instance.</p>\n\n<p>Any better implementation for what I need to achieve?</p>\n"},{"tags":["django","json","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12922784,"title":"Save and update json data to django models","body":"<p>I have a simple model Class</p>\n\n<pre><code>class Talk(models.Model):\n    url = models.URLField()\n    user = models.ForeignKey(User)\n    category = models.ForeignKey(Category)\n    description = models.TextField(blank=True, max_length=500)\n    title = models.TextField(blank=True)\n</code></pre>\n\n<p>and I connect to oembed api to get data from the url submitted</p>\n\n<pre><code>def get_oembed_info(self):\n    params = {'url': self.url, 'format': 'json'}\n    fetch_url =  'http://api.embed.ly/1/oembed?%s' % urllib.urlencode(params)\n    result = urllib.urlopen(fetch_url).read()\n    result = json.loads(result)\n    KEYS = ['title', 'type', 'url', 'description', 'provider_url', 'provider_name', 'width', 'height', 'html', 'thumbnail_url', 'author_url']\n    for key in KEYS:\n    if result.has_key(key):\n         setattr(self, key, result[key])\n\ndef save(self):\n    self.get_oembed_info()\n    super(Talk, self).save()\n</code></pre>\n\n<p>It's ok to add a new Talk from Admin but when i try  to update the same talk later nothing changes.</p>\n\n<p>Also is this way a good to get the data and store it in DB.</p>\n\n<p>Thanks</p>\n"},{"tags":["django","django-views","django-urls"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12928379,"title":"django url pattern matching to display different pages","body":"<p>I'm new to django and I'm kinda confused on how to use django's url pattern matching.</p>\n\n<p>This is my intention. I have 4 pages to a website. Depending on the links, they would use the url to find what information to present to the user. Also the url knows which page the user is on.</p>\n\n<p>So the person would choose a building based on links.\nThe person would then choose the floor they wish to go on.\nFinally the person would then choose a room.</p>\n\n<blockquote>\n  <p>Ex. format: aaa.com/buildingname/floornumber/roomnumber</p>\n  \n  <p>step0   aaa.com/</p>\n  \n  <p>step1   aaa.com/django/          </p>\n  \n  <p>step2   aaa.com/django/2/        </p>\n  \n  <p>step3   aaa.com/django/2/201      </p>\n</blockquote>\n\n<p>So based on the url pattern, the website should load up differently every time.</p>\n\n<p>Is this how I am supposed to use url pattern matching? I really would like to get some help on this. What should the url pattern look like? As of right now all I can think of is just matching the url into different apps that have views. I just don't know how to link them all together. </p>\n\n<p>And I have a MySQL database with the building,floor,and room number.</p>\n\n<p>Thanks in advance everybody. I appreciate your effort.</p>\n"},{"tags":["django","internet-explorer","firefox","django-forms"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":4074,"score":4,"question_id":2669294,"title":"How to detect Browser type in Django?","body":"<p>How can i detect which browser type the client is using. I have a problem where i have to ask people to use different browser (Firefox) instead of IE. How can i get this information. </p>\n\n<p>I know http request has this information (Header). How will i get the navigator.appName from the view.py in the Django framework ? </p>\n"},{"tags":["django"],"answer_count":4,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":441,"score":7,"question_id":2577914,"title":"Django equivalent for latest entry for each user","body":"<p>I'm surprised this question hasn't come up. Couldn't find much on the web.</p>\n\n<p>Using <code>Entry.objects.latest('created_at')</code> I can recover the latest entry for all Entry objects, but say if I want the latest entry for each user? This is something similar to an SQL latest record query. But how do I achieve this using the ORM? Here is my approach I'm wondering if it is the most efficient way to do what I want.</p>\n\n<p>First I perform a sub query: Objects are grouped by user and the Max (latest) created_by field is returned for each user (created_at__max) I then filter Entry objects based on the results in the subquery and get the required objects. </p>\n\n<pre><code>Entry.objects.filter(created_at__in=Entry.objects.values('user').annotate(Max('created_at')).values_list('created_at__max'))\n</code></pre>\n\n<p>or using a manager:</p>\n\n<pre><code>class UsersLatest(models.Manager):  \n\n    def get_query_set(self):\n        return super(UsersLatest,self).get_query_set().filter(created_at__in=self.model.objects.values('user').annotate(Max('created_at')).values_list('created_at__max'))\n</code></pre>\n\n<p>Is there a more efficient way? possibly without sub query?</p>\n\n<p>Thanks,</p>\n\n<p>Paul</p>\n"},{"tags":["python","django","json"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":54,"score":-1,"question_id":12927358,"title":"How to get json data from url in Python?","body":"<p>The data is send to the URL via webhook named data.json. I want to access those data using Python/Django. How can I do it? Thanks</p>\n"},{"tags":["python","django","django-query"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12926542,"title":"Django get a more specific hour range data","body":"<p>This is my model:</p>\n\n<pre><code>class People(models.Model):\n    Name = models.CharField(max_length=100)\n    Lastname = models.CharField(max_length=100)\n    Record_Date=models.DateTimeField()\n</code></pre>\n\n<p>In views.py</p>\n\n<pre><code>\"\"\"Takes an integer value representing the day of week from 1 (Sunday) to 7 (Saturday).\"\"\"\n\n    People.objects.filter(Record_Date__week_day=1)\n</code></pre>\n\n<p>It gives me all Sunday Record_Date's. That is fine. But, I want to get a more specific hour inside each Sunday data. For example, Every Sunday 10:30-11:55. How can I do that with using query or What is other alternatives to do that?    </p>\n"},{"tags":["php","django","hibernate","symfony2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":54,"score":-3,"question_id":12927192,"title":"Is there any possibility of django coming with chnages like in Symfony2","body":"<p>Initially i was using Symfony1.4 framework and i didn't liked that much but was good.\nThen when Symfony2 came i never looked back at other php framework with things like annotation , service classes , repository classes , it almost similar to Spring/Hibernate of java at enterprise level.</p>\n\n<p>Now i am doing Django. But i see that Django can't beat Symfony2. The service classes, DI container , Annotation based routes , validations etc excellent to use when you get your head around.</p>\n\n<p>Spring/Hibernate also doing similar way.</p>\n\n<p>So is there any possibility in some djnago ver2 that they can think about those things. I don't think it will hard if it can be done in PHP why can't in Python</p>\n"},{"tags":["django","google-app-engine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12426725,"title":"django on google app engine with relational database","body":"<p>So is there any other way to use mysql database with django app on app engine? I found nice solution but it is not free - Google SQL Cloud seem to work great. But how about, moving django app to appengine and connecting to other hosting with mysql db? Or do you have any other solutions?</p>\n\n<p>So to sum up - is there any way to work GAE with outside database?</p>\n"},{"tags":["sql","django"],"answer_count":5,"favorite_count":5,"up_vote_count":7,"down_vote_count":0,"view_count":559,"score":7,"question_id":370340,"title":"in SQL, or Django ORM, what's the conventional way to have an ordered one-to-many?","body":"<p>Say I wanted to have a project, and one-to-many with to-do items, and wanted to re-order the to-do items arbitrarily? </p>\n\n<p>In the past, I've added a numbered order field, and when someone wants to change the order, had to update all the items with their new order numbers.  This is probably the worst approach, since it's not atomic &amp; required several updates.</p>\n\n<p>I notice Django has a multi-valued CommaSeparatedIntegerField which could contain the order by storing the ordered keys to the items in the to-do items table right in one field of the project table.</p>\n\n<p>I've pondered a dewey decimal system where if I wanted to take item 3 and put it between 1 and 2 I would change it's order number to 1.5.</p>\n\n<p>Something tells me there's an easier option that I'm missing though...</p>\n\n<p>How would you give order to a one-to-many relationship?</p>\n"},{"tags":["python","mysql","django"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":125,"score":1,"question_id":12916880,"title":"MySQL INSERT ... ON DUPLICATE KEY UPDATE with django 1.4 for bulk insert","body":"<p>I am having issues figuring out MySQL INSERT ... ON DUPLICATE KEY UPDATE with django 1.4. </p>\n\n<p>The table that I am trying to insert records has a 2 column(composite) unique key. Records that I am receiving is from a 3rd party source and values will change over time except for those fields that makes the unique key set. I am receiving 1 ~ 5k records at a time, and would need to </p>\n\n<p>Currently I am using Model.objects.bulk_create to bulk insert, performance is really amazing as it issues generally one query no matter how big the record set is. However, as my records can change over time on the 3rd party end, I need to perform the MySQL INSERT ... ON DUPLICATE KEY UPDATE query on the recordset. </p>\n\n<p>I am planning to write raw SQL statements and execute using something like here: </p>\n\n<pre><code>sql = \"MySQL INSERT ... ON DUPLICATE KEY UPDATE\"\n\nraw_insert(sql)\n\ndef raw_insert(sql):\n    from django.db import connection, transaction\n    cursor = connection.cursor()\n\n    # Data modifying operation - commit required\n    cursor.execute(sql)\n    transaction.commit_unless_managed()\n\n    return 1\n</code></pre>\n\n<p>Wondering if there is a better solution to my problem. Also how would I sanitize the field values for raw insert?</p>\n"},{"tags":["django","unique","generation","slug","modelform"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12486557,"title":"Django: Generating Unique Slug","body":"<p>I have seen a variety of different methods for generating unique slugs: <a href=\"https://code.djangoproject.com/wiki/SlugifyUniquely\" rel=\"nofollow\">Ex. 1</a>, <a href=\"http://djangosnippets.org/snippets/512/\" rel=\"nofollow\">Ex.2</a>, <a href=\"http://stackoverflow.com/questions/3816307/how-to-create-a-unique-slug-in-django\">Ex. 3</a>, <a href=\"http://stackoverflow.com/questions/11978035/django-unique-slug-by-id\">Ex. 4</a>, etc. etc. </p>\n\n<p>I want to create unique slugs upon saving a ModelForm. If my models are like:</p>\n\n<pre><code>class Phone(models.Model):\n    user = models.ForeignKey(User)\n    slug = models.SlugField(max_length=70, unique=True)\n    year = models.IntegerField()\n    model = models.ForeignKey('Model')\n    series = models.ForeignKey('Series')\n</code></pre>\n\n<p>Say that the <code>Phone</code> object has the following values (via submitted ModelForm):</p>\n\n<pre><code>Phone.user = dude\nPhone.year = 2008\nPhone.model = iphone\nPhone.series = 4S\n</code></pre>\n\n<p>I want the url for this object to appear like: </p>\n\n<pre><code>http://www.mysite.com/phones/dude-2008-iphone-4S \n</code></pre>\n\n<p>I understand that I should use <code>slugify</code> via either signals or over-riding the save method to make this happen. But if user <code>dude</code> creates a second 2008 iphone 4S object, what the best way to create a unique slug for this object? I want the additional objects's url to look like:</p>\n\n<pre><code>http://www.mysite.com/phones/dude-2008-iphone-4S-2\n</code></pre>\n\n<p>and</p>\n\n<pre><code>http://www.mysite.com/phones/dude-2008-iphone-4S-3\nhttp://www.mysite.com/phones/dude-2008-iphone-4S-4\n#...etc ...\n</code></pre>\n\n<p>After googling, it seems like there are a variety of different methods for creating slugs in django, which has been confusing when trying to figure out best practices. </p>\n\n<p>Thanks a lot for any advice and clarification on this issue!</p>\n"},{"tags":["django","google-app-engine","djangoappengine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12547003,"title":"Django 1.4 on App Engine with SQL Cloud","body":"<p>Anyone was successful with Django 1.4 and Google App Engine? I have finished my project, which I was going to upload on App Engine, and I realised that currently newest supported version is 1.3 of GAE SDK is 1.3. Any ideas what should I do now? Does downgrade to 1.3 is a good idea?</p>\n"},{"tags":["django","redirect","httpresponse","messages"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12926080,"title":"Django show message parameters in HttpResponseRedirect","body":"<p>I'm working on a basic web page that asks for a user's name and phone number, and if successfully submitted, it will redirect to a page that shows the user's name and phone number. I kept getting a 403 error when I try to submit the name and phone number. Here is the code:</p>\n\n<p>This is the code in views.py:</p>\n\n<pre><code>def homeform(request):\n if request.method == \"POST\":\nform = PhoneForm(request.post)\nif form.is_valid():\n    cd = form.cleaned_data\n    messages.success(request, \"%s, you have recorded your phone number as %d. Thanks for the update.\") %(cd[\"name\"],cd[\"phone\"])\n    return HttpResponseRedirect('/success/')\n else:\n    form = PhoneForm()\n return render_to_response('phone_form.html',{'form': form})\n\ndef success(request):\n  return render_to_response('success.html',{'messages': messages})\n</code></pre>\n\n<p>This is the code in urls.py:</p>\n\n<pre><code>urlpatterns = patterns('',\n('^home/$',homeform),\n('^success/$', success),\n</code></pre>\n\n<p>)</p>\n\n<p>Here is the html file I'm using for the success function in the view:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Success&lt;/title&gt;\n&lt;head&gt;\n&lt;body&gt;\n  {% if messages %}\n  &lt;ul class=\"messages\"&gt;\n  {% for message in messages %}\n  &lt;li{% if message.tags %} class=\"{{ message.tags }}\"{% endif %}&gt;{{ message }}&lt;/li&gt;\n  {% endfor %}\n  &lt;/ul&gt;\n  {% endif %}\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["django","django-templates","django-template-tags"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12924865,"title":"How to check if django template variable is defined?","body":"<p>I have a django template which is used from many views. The template has a block for messages used to notify user of anything that should take their attention. Whether a message is sent or not depends on the views. Some views may send a <code>message</code> variable to the template while others may not. </p>\n\n<pre><code>view_1:\n    message = \"This is an important message\"\n    render_to_response(\"my_template.html\", \n                       {'message':message, 'foo':foo, 'bar':bar},\n                       context_instance = RequestContext(request))\n\nview_2:\n    message = \"This is an important message\"\n    render_to_response(\"my_template.html\", \n                       {'foo':foo, 'bar':bar},\n                       context_instance = RequestContext(request))\n</code></pre>\n\n<p>In the template, I check for the <code>message</code> variable and include the block as below:</p>\n\n<pre><code>base_template.html:\n    ....\n    {% block main_body %}\n         {% block messages %}\n         {% endblock %}\n         {% block content %}\n         {% endblock %}\n    {% endblock %}\n    ....\n\n my_template.html:\n     {% extends base_template.html %}\n     ....\n     {% if message %}\n          {% block messages %}\n              &lt;div class='imp_msg'&gt;{{ message }} &lt;/div&gt;\n          {% endblock %}\n     {% endif %}\n     ...\n</code></pre>\n\n<p>Problem is that even if view_2 does not pass a message, the final html is rendered with <code>&lt;div class='imp_msg'&gt;&lt;/div&gt;</code> -- basically an empty div. </p>\n\n<p>Since that CSS is designed to give a light_red background to messages, what I see is an empty light_red bar on the top of the page.</p>\n\n<p>I also tried: <code>{% ifnotequal message None %}</code>, <code>{% ifnotequal message '' %}</code>, tried setting the <code>message</code> to <code>None</code> or <code>''</code> explicitly, but does not seem to help.</p>\n\n<p>Would appreciate some help!</p>\n"},{"tags":["django","django-taggit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12926036,"title":"Django-taggit prefetch_related","body":"<p>I'm building a basic time logging app right now and I have a todo model that uses django-taggit. My Todo model looks like this:</p>\n\n<pre><code>class Todo(models.Model):\n    project = models.ForeignKey(Project)\n    description = models.CharField(max_length=300)\n    is_done = models.BooleanField(default=False)\n    billable = models.BooleanField(default=True)\n    date_completed = models.DateTimeField(blank=True, null=True)\n    completed_by = models.ForeignKey(User, blank=True, null=True)\n    tags = TaggableManager()\n\n    def __unicode__(self):\n        return self.description\n</code></pre>\n\n<p>I'm trying to get a list of unique tags for all the Todos in a project and I have managed to get this to work using a set comprehension, however for every Todo in the project I have to query the database to get the tags. My set comprehension is:</p>\n\n<pre><code>unique_tags = { tag.name.lower() for todo in project.todo_set.all() for tag in todo.tags.all() }\n</code></pre>\n\n<p>This works just fine, however for every todo in the project it runs a separate query to grab all the tags. I was wondering if there is any way I can do something similar to prefetch_related in order to avoid these duplicate queries:</p>\n\n<pre><code>unique_tags = { tag.name.lower() for todo in project.todo_set.all().prefetch_related('tags') for tag in todo.tags.all() }\n</code></pre>\n\n<p>Running the previous code gives me the error: </p>\n\n<pre><code>'tags' does not resolve to a item that supports prefetching - this is an invalid parameter to prefetch_related().\n</code></pre>\n\n<p>I did see that someone asked a very similar question here: <a href=\"http://stackoverflow.com/questions/12204511/optimize-django-query-to-pull-foreign-key-and-django-taggit-relationship\">Optimize django query to pull foreign key and django-taggit relationship</a> however it doesn't look like it ever got a definite answer. I was hoping someone could help me out. Thanks!</p>\n"},{"tags":["django","django-models","many-to-many","django-queryset"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12925306,"title":"Joint query many to many relationship in Django","body":"<p>I have the following class in my models.py</p>\n\n<pre><code>class Story(models.Model):\n    title = models.CharField(max_length=60)\n    creator = models.ManyToManyField(User, blank=True)\n</code></pre>\n\n<p>I am trying to return a QuerySet using 2 creator names. </p>\n\n<p>For example, how would I filter for stories that have  creators: User 1 obj and User 2 obj?</p>\n\n<p>I have read the Many-to-Many relationships docs and could not find anything. The closest solution I have reached was...</p>\n\n<pre><code>Story.objects.filter(creator__in=[1,2]).distinct() \n</code></pre>\n\n<p>but it doesn't do a joint query for both 1 AND 2, just 1 OR 2. </p>\n\n<p>Any help would be greatly appreciated!</p>\n"},{"tags":["python","django"],"answer_count":4,"favorite_count":4,"up_vote_count":17,"down_vote_count":0,"view_count":4012,"score":17,"question_id":4733609,"title":"How do I clone a Django model instance object and save it to the database?","body":"<pre><code>Foo.objects.get(pk=\"foo\")\n&lt;Foo: test&gt;\n</code></pre>\n\n<p>In the database, I want to add another object which is a copy of the object above.</p>\n\n<p>Suppose my table has one row. I want to insert the first row object into another row with a different primary key. How can I do that?</p>\n"},{"tags":["python","django","many-to-many","signals","admin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12916663,"title":"Proper way to update a value when a object of another model is saved","body":"<p>I'd like to update the value of balance of people that are involved in a transaction (creditor and debitors) as soon as I save the transaction (from admin). Here's my models:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#models.py\nclass Person(models.Model):\n    first_name = models.CharField(max_length = 30) \n    last_name = models.CharField(max_length = 30) \n    phone_number = models.CharField(max_length = 30) \n    email = models.EmailField('e-mail')\n    balance = models.DecimalField(max_digits = 5, decimal_places = 2)\n\nclass Transaction(models.Model):\n    creditor = models.ForeignKey(Person,related_name = 'creditor')\n    debtors = models.ManyToManyField(Person, related_name = 'debtors')\n    value = models.DecimalField(max_digits = 5, decimal_places = 2)\n    split = models.BooleanField()\n    date = models.DateField()\n</code></pre>\n\n<p>Here's what I thought about, but I only works when the transaction is beeing changed (does not work for the first time save):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#admin.py\nclass PersonAdmin(admin.ModelAdmin):\n    list_display = ('first_name','last_name','balance')\n\nclass TransactionAdmin(admin.ModelAdmin):\n    list_display = ('creditor','value','date')\n    list_filter = ('date',)\n    date_hierarchy = 'date'\n    ordering = ('-date',)\n    filter_horizontal = ('debtors',)\n\n    def save_model(self,request,obj,form,change):\n            obj.save()\n            if obj.split:\n                    split_value = obj.value/(obj.debtors.all().count()+1)\n                    for debtor in obj.debtors.all():\n                            p = Person.objects.get(id = debtor.id)\n                            p.balance = p.balance - split_value\n                            p.save()\n                    p = Person.objects.get(id = obj.creditor.id)\n                    p.balance = p.balance + (obj.debtors.all().count())*split_value                     \n                    p.save()\n\nadmin.site.register(Person,PersonAdmin)\nadmin.site.register(Transaction,TransactionAdmin)\n</code></pre>\n\n<p>I'm new to Django and really confused about the proper way of doing this. I'd appreciate any help on this.</p>\n"},{"tags":["python","django","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12410887,"title":"When POSTing a Django form, my changes to the form's data are lost","body":"<p>In my Django app, I have a <code>page.html</code> that includes forms from multiple models like so:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># models.py\nclass OneModel(models.Model):\n    foo = models.CharField(...)\n    bar = models.CharField(...)\n\n# forms.py\nclass OneForm(forms.ModelForm):\n    class Meta:\n        model = OneModel\n</code></pre>\n\n<p>On save, in addition to the POST data, I add a prefix to all the forms, for example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>form1 = OneForm(prefix=OneForm.Meta.model._meta.module_name)\n</code></pre>\n\n<p>Then, I send the <code>POST</code> request to be saved and send the next data to the <code>__init__</code> form:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># views.py\nform_data = {'foo': 'fo-fo-fo',    # from request.POST\n             'bar': 'bar-bar-bar'} # -//-//-\nform1 = OneForm(form_data)         # without prefix\n</code></pre>\n\n<p>Afterwards, when the template is being put together, I get input from the form with my data (<code>fo-fo-fo</code>, <code>bar-bar-bar</code>), but without the prefix in input names, which is not what I want.</p>\n\n<p>But if I add the prefix in the <code>__init__</code> part instead I get back the form without my data:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># views.py\nform1 = OpenForm(prefix=OneForm.Meta.model._meta.module_name, form_data)\n</code></pre>\n\n<p>How can I get the results of the form with <em>both</em> the data I need and the prefix I added?</p>\n"},{"tags":["javascript","django","date"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12916104,"title":"Javascript date format with Django","body":"<p>I'm creating a sport app with Django. I need to display a list of matches with a countdown that goes to the exact hour of those matches. </p>\n\n<p>Everything works find, except that the countdowns go to the day of the matches, not the hours and minutes. For example, if a match begin in 2 days at 9 pm, the countdown will stop at midnight the day of the match. So it won't go to 9pm.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>&lt;head&gt;\n&lt;meta http-equiv=\"Content-type\" content=\"text/html; charset=utf-8\" /&gt;\n&lt;script type=\"text/javascript\"  src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"http://keith-wood.name/js/jquery.countdown.js\"&gt;    &lt;/script&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n\n&lt;div style=\"float:left\"&gt;\n{% for match in matches %}\n&lt;div&gt;  \n    &lt;p&gt;{{ match }}&lt;/p&gt;\n    &lt;p&gt; {{match.real_start}} &lt;p&gt;\n    &lt;a href=\"{{ match.get_absolute_url_grille }}\"&gt;Go&lt;/a&gt;\n    &lt;div class=\"match_countdown\" data-date=\"{{ match.real_start|date:'M j, Y'}}\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n{% endfor %}\n&lt;/div&gt;\n&lt;/br&gt;&lt;/br&gt;\n\n\n&lt;script&gt;\n\n$('.match_countdown').each(function() {\nvar self = $(this),\n    date_string = self.attr('data-date'),\n    date = new Date(date_string);\nself.countdown({until: date});\n});\n&lt;/script&gt;\n\n&lt;/body&gt;\n</code></pre>\n\n<p>\"real_start\" is my DateTime\nI guess the problem is about the date format 'M j ,Y' that doesn't match a DateTimeField. But I didn't find how to fix it.</p>\n\n<p>Any help would be welcome. Thanks.</p>\n"},{"tags":["django","django-many-to-many","django-managers"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12912723,"title":"Custom managers in a Many-to-Many relation for usual filters","body":"<pre><code>class Proposal(models.Model):\n    author = models.ForeignKey(Person, related_name=\"author\")\n\n    def get_tags(self):\n        return Tag.objects.filter(tagged_proposals=self.id) \n\nclass Tag(models.Model):\n    tagged_proposals = models.ManyToManyField(Proposal)\n    name = models.CharField(primary_key=True, max_length=60)\n</code></pre>\n\n<p>I need to list the proposal's tags on a certain template so I would write <code>{% for tag in proposal.get_tags %}</code> and it works perfectly.</p>\n\n<p>Now I read about Managers and it seems a good move to convert my <code>get_tags</code> into a Manager. I tried the following but it didn't output a thing. What am I doing wrong? Does it make sense to turn it a Manager in the first place?</p>\n\n<pre><code>class ProposalsTagsManager(models.Manager):\n    def get_query_set(self):\n                proposal_id = how-do-i-get-the-proposal-id???\n        return Tag.objects.filter(tagged_proposals=proposal_id)\n</code></pre>\n\n<p>usage: <code>{% for tag in p.tags.all %}</code> output: nothing</p>\n"},{"tags":["django","django-south"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12924343,"title":"Why use django-south?","body":"<p>As far as I understand, django-south is pretty much like version control for your database schema. But why exactly is it better than python manage.py syncdb when developing? I can understand if you've actually launched and can't afford to just delete the database, but I don't see the point in using it when you can just delete the database.</p>\n"},{"tags":["html","django","django-templates","django-views"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12924284,"title":"Using <ul> instead of <input> in django templates","body":"<p>I am using a library <a href=\"https://github.com/aehlke/tag-it/blob/master/README.markdown\" rel=\"nofollow\">tagit</a> and it uses <code>&lt;ul&gt;</code> and i'd like to use it to pass the tags to the views but when i try to use </p>\n\n<pre><code>&lt;ul type=\"input\" name='skills'&gt;\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>&lt;input type=\"input\" name='skills'&gt;\n</code></pre>\n\n<p>i get</p>\n\n<pre><code>MultiValueDictKeyError\n</code></pre>\n\n<p>so is there a way to use the ul as an input to the views !?</p>\n"},{"tags":["django","django-settings","django-staticfiles"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":12924043,"title":"Changed Settings Config now Django Static files isnt working","body":"<p>So I updated my project settings with the following scheme</p>\n\n<pre><code>PROJECT_ROOT = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n\n/settings\n  base.py\n  prod.py\n  dev.py\n</code></pre>\n\n<p>Is this the correct STATICFILES_DIRS settings for the above configuration?</p>\n\n<pre><code>STATICFILES_DIRS = [\nos.path.join(PROJECT_ROOT, \"site_media\", \"static\"),\n]\n\nSTATIC_URL = \"/site_media/static/\"\n</code></pre>\n\n<p>The templates render just fine using </p>\n\n<pre><code>TEMPLATE_DIRS = [\n     os.path.join(PROJECT_ROOT, \"templates\"),\n]\n</code></pre>\n\n<p>So I'm a little turned around as to why my css files arent working</p>\n\n<p>Home.html</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" href=\"{{ STATIC_URL }}css/home.css\" /&gt;\n</code></pre>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":738,"score":1,"question_id":5385344,"title":"How do I compare dates in Django?","body":"<p>I have a Django model class with a class variable <code>due_date</code>:</p>\n\n<pre><code>due_date = models.DateField()\n</code></pre>\n\n<p>I want to output in the Django admin if the object is due or not based on today's date.</p>\n\n<p>My function is as follows:</p>\n\n<pre><code>def is_due_today(self):\n    dd = self.due_date\n    today = datetime.date.now\n    return dd - today &gt; 0\n</code></pre>\n\n<p>But my output is:</p>\n\n<pre><code>(None)\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["python","django","django-admin","django-views","libraries"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":12923009,"title":"How can I preload a Python library in Django?","body":"<p>Within one of my Django apps, I have code that looks like this within views.py:</p>\n\n<pre><code>import myLib\n\nresultOne = myLib.myFunction('Some data')\nresultTwo = myLib.myFunction('Some more data')\nresultThree = myLib.myFunction('Even more data')\n</code></pre>\n\n<p>Whenever I visit the page, it takes a good minute to load. The reason is that <code>myLib</code> takes up a lot of memory and it is loading each time the page is loaded. I know that <code>resultTwo</code> and <code>resultThree</code> will execute quickly after <code>resultOne</code> has executed.</p>\n\n<p>I want to preload <code>myLib</code> in Django so that it is stored in memory and so <code>resultOne</code>, <code>resultTwo</code>, and <code>resultThree</code> all execute quickly. How can I do this?</p>\n\n<p><strong>EDIT:</strong>\nThis may fall under the category of caching. The input that <code>resultOne</code>, <code>resultTwo</code>, and <code>resultThree</code> changes each time and they are run very often.</p>\n"},{"tags":["django","heroku","celery"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":75,"score":0,"question_id":12923758,"title":"Celery error 'connection reset by peer'","body":"<p>Celery's connection is reset periodically with the error message:</p>\n\n<pre><code>[Errno 104] Connection reset by peer\n</code></pre>\n\n<p>Currently, I lose the task and anything triggered afterwards until I reset the server. I have 2 questions: (1) What is causing the error/how can I prevent it? (2) How can I catch the error when it occurs and retry my tasks?</p>\n\n<p>I'm running on Heroku. Celery is configured with AMQP (CloudAMQP) as the broker and redis (REDIS_TO_GO) as the results backend.</p>\n\n<p>Stacktrace:</p>\n\n<pre><code>File \"celery/task/trace.py\", line 224, in trace_task\n  R = retval = fun(*args, **kwargs)\nFile \"myapp/tasks.py\", line 310, in mytask1\n  mytask2.delay(message)\nFile \"celery/app/task.py\", line 343, in delay\n  return self.apply_async(args, kwargs)\nFile \"celery/app/task.py\", line 458, in apply_async\n  with app.producer_or_acquire(producer) as P:\nFile \"python2.7/contextlib.py\", line 17, in __enter__\n  return self.gen.next()\nFile \"celery/app/base.py\", line 256, in producer_or_acquire\n  with self.amqp.producer_pool.acquire(block=True) as producer:\nFile \"kombu/connection.py\", line 712, in acquire\n  R = self.prepare(R)\nFile \"kombu/pools.py\", line 57, in prepare\n  p.revive(connection.default_channel)\nFile \"kombu/connection.py\", line 626, in default_channel\n  self._default_channel = self.channel()\nFile \"kombu/connection.py\", line 167, in channel\n  chan = self.transport.create_channel(self.connection)\nFile \"kombu/transport/amqplib.py\", line 324, in create_channel\n  return connection.channel()\nFile \"kombu/transport/amqplib.py\", line 243, in channel\n  return Channel(self, channel_id)\nFile \"kombu/transport/amqplib.py\", line 267, in __init__\n  super(Channel, self).__init__(*args, **kwargs)\nFile \"amqplib/client_0_8/channel.py\", line 82, in __init__\n  self._x_open()\nFile \"amqplib/client_0_8/channel.py\", line 469, in _x_open\n  self._send_method((20, 10), args)\nFile \"amqplib/client_0_8/abstract_channel.py\", line 76, in _send_method\n  method_sig, args, content)\nFile \"amqplib/client_0_8/method_framing.py\", line 252, in write_method\n  self.dest.write_frame(1, channel, payload)\nFile \"amqplib/client_0_8/transport.py\", line 165, in write_frame\n  frame_type, channel, size, payload, 0xce))\nFile \"python2.7/socket.py\", line 224, in meth\n  return getattr(self._sock,name)(*args)\n</code></pre>\n\n<p>Versions:</p>\n\n<pre><code>Django==1.4.1\ndjango-celery==3.0.9\ncelery==3.0.9\ncelery-with-redis==3.0\namqplib==1.0.2\nkombu==2.4.7\n</code></pre>\n"},{"tags":["django","django-admin","django-permissions"],"answer_count":6,"favorite_count":9,"up_vote_count":11,"down_vote_count":0,"view_count":7023,"score":11,"question_id":1336382,"title":"How can I MODIFY django to create \"view\" permission?","body":"<p>I've recently started using django to administer a large existing application that was grown organically over the years using twisted.web.  I started experimenting with django and it's automatic admin interface and I've been very pleased with the results.</p>\n\n<p>One thing that seems to be missing for my purposes is the ability to give users read only access to data.  For instance we have a role where people are allowed to login and create purchase orders.  They also need to be able to view, but not edit other client or product data.  </p>\n\n<p>How would I create \"view\" permissions in the django admin so users can modify data for some tables, while having read only access to others?</p>\n\n<p>Update: Django Admin appears to give me the CUD of a CRUD interface.  How do I get the Read Only part with associated permissions and groups?</p>\n\n<p>Update 2010-Feb-12: Django 1.2 will now include read-only.  Details below.</p>\n\n<hr>\n\n<p>I answered my own question I guess.  Moving the content down to a real answer below.</p>\n"},{"tags":["django","many-to-many","models","migrate","django-syncdb"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":12917277,"title":"Django ManyToMany Through not syncing or migrating","body":"<p>I have this model (truncated here for brevity):</p>\n\n<pre><code>class Meal(models.Model):\n    host = models.ForeignKey(User, related_name=\"cooking\")\n    cost = models.IntegerField(default=1)\n\n    summary = models.CharField(max_length=1024, default=\"A good dinner\")\n\n    diners = models.ManyToManyField(User, through='Attendance',\n    related_name=\"diners\", blank=True)\n</code></pre>\n\n<p>When I sync it, the diners Field is completely ignored. It doesn't appear in the database and there is no error when running syncdb. It's as if it's not there. The User and Attendance tables are all fine.</p>\n\n<p>I discovered this problem when trying to add this field with South, so I've tried that as an alternative too.</p>\n\n<p>Any ideas?\nThanks</p>\n"},{"tags":["python","django","django-queryset"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":12923376,"title":"Why doesn't RelatedManager.add() accept an iterable as an argument?","body":"<p>This question is about <a href=\"https://docs.djangoproject.com/en/1.4/ref/models/relations/#django.db.models.fields.related.RelatedManager.add\" rel=\"nofollow\">RelatedManager.add()</a> which is used to add model object instances to a many-to-one or many-to-many relation. To illustrate my question, let's say I have the following two models:</p>\n\n<pre><code>class Book(models.Model):\n    title = models.CharField()\n\nclass Author(models.Model):\n    name = models.CharField()\n    books = models.ManyToManyField(Book)\n</code></pre>\n\n<p>Now, for each <code>Author</code> I have a list of <code>Book</code> objects that I want to add to the relation. At the moment, I'm doing it like this:</p>\n\n<pre><code>book_objects = [\n    &lt;Book: Harry Potter and the Philosopher's Stone&gt;, \n    &lt;Book: Harry Potter and the Chamber of Secrets&gt;,\n    &lt;Book: Harry Potter and the Prisoner of Azkaban&gt;\n]\n\njk_rowling = Author.objects.get(name='J. K. Rowling')\n\nfor book in book_objects:\n    jk_rowling.books.add(book)\njk_rowling.save()\n</code></pre>\n\n<p>However, this is not very efficient as I have to deal with thousands of objects to be added to a relation of this kind and it takes ages. Rather, the Django documentation <a href=\"https://docs.djangoproject.com/en/1.4/topics/db/optimization/#insert-in-bulk\" rel=\"nofollow\">recommends</a> to call <code>add()</code> with more than one model object as an argument. That is, I would have to do it like the following:</p>\n\n<pre><code>jk_rowling.books.add(book1, book2, book3)\n</code></pre>\n\n<p>But I cannot do this because I don't know the number of objects added to the relation beforehand. I don't understand why I can't do the following:</p>\n\n<pre><code>jk_rowling.books.add(book_objects)\n</code></pre>\n\n<p>Why doesn't <code>add()</code> accept an iterable as an argument? And how can I add a large amount of objects to a relation like this more efficiently than calling <code>add()</code> for each object separately? Thanks a lot! </p>\n"},{"tags":["python","django","timezone"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12923402,"title":"Timezone for server","body":"<p>I am building a application where the clients are supposed to pass a datetime field to query the database. But the client will be in different timezones, so how to solve that problem. \nShould I make it a point that the client's timezone is used as deafult for each user or the server for every user. And if so than how can I do it? </p>\n"},{"tags":["django","twitter-bootstrap","django-forms","django-crispy-forms","django-floppyforms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":83,"score":0,"question_id":12886736,"title":"A Django form for entering a 0 to n email addresses","body":"<p>I have a Django application with some fairly common models in it: <code>UserProfile</code> and <code>Organization</code>.  A <code>UserProfile</code> or an <code>Organization</code> can both have 0 to n emails, so I have an <code>Email</code> model that has a <code>GenericForeignKey</code>.  <code>UserProfile</code> and <code>Organization</code> Models both have a <code>GenericRelation</code> called <code>emails</code> that points back to the <code>Email</code> model (summary code provided below).</p>\n\n<p><strong>The question</strong>: what is the best way to provide an <code>Organization</code> form that allows a user to enter organization details including 0 to n email addresses?</p>\n\n<p>My <code>Organization</code> create view is a <a href=\"http://ccbv.co.uk/projects/Django/1.4/django.views.generic.edit/CreateView/\" rel=\"nofollow\">Django class-based view</a>.  I'm leaning towards creating a dynamic form and an enabling it with Javascript to allow the user to add as many email addresses as necessary.  I will render the form with django-crispy-forms and django-floppyforms for display on a site using Twitter Bootstrap.</p>\n\n<p>I've thought about doing this with a <code>BaseGenericInlineFormset</code> embedded within the form, but this seems like overkill for email addresses.  Embedding a formset in a form delivered by a class-based view is cumbersome too.</p>\n\n<p>Note that the same issue occurs with the <code>Organization</code> fields <code>phone_numbers</code> and <code>locations</code>.</p>\n\n<p><strong>Code</strong></p>\n\n<p>emails.py:</p>\n\n<pre><code>from django.db import models\nfrom parent_mixins import Parent_Mixin\n\nclass Email(Parent_Mixin,models.Model):\n    email_type = models.CharField(blank=True,max_length=100,null=True,default=None,verbose_name='Email Type')\n    email = models.EmailField()\n\n    class Meta:\n        app_label = 'core'\n</code></pre>\n\n<p>organizations.py:</p>\n\n<pre><code>from emails import Email\nfrom locations import Location\nfrom phone_numbers import Phone_Number\nfrom django.contrib.contenttypes import generic\nfrom django.db import models\n\nclass Organization(models.Model):\n    active = models.BooleanField()\n    duns_number = models.CharField(blank=True,default=None,null=True,max_length=9)  # need to validate this\n    emails = generic.GenericRelation(Email,content_type_field='parent_type',object_id_field='parent_id')\n    legal_name = models.CharField(blank=True,default=None,null=True,max_length=200)\n    locations = generic.GenericRelation(Location,content_type_field='parent_type',object_id_field='parent_id')\n    name = models.CharField(blank=True,default=None,null=True,max_length=200)\n    organization_group = models.CharField(blank=True,default=None,null=True,max_length=200)\n    organization_type = models.CharField(blank=True,default=None,null=True,max_length=200)\n    phone_numbers = generic.GenericRelation(Phone_Number,content_type_field='parent_type',object_id_field='parent_id')\n    taxpayer_id_number = models.CharField(blank=True,default=None,null=True,max_length=9)  # need to validate this\n\n    class Meta:\n        app_label = 'core'\n</code></pre>\n\n<p>parent_mixins.py</p>\n\n<pre><code>from django.contrib.contenttypes.models import ContentType\nfrom django.contrib.contenttypes import generic\nfrom django.db import models\n\nclass Parent_Mixin(models.Model):\n    parent_type = models.ForeignKey(ContentType,blank=True,null=True)\n    parent_id = models.PositiveIntegerField(blank=True,null=True)\n    parent = generic.GenericForeignKey('parent_type', 'parent_id')\n\n    class Meta:\n        abstract = True\n        app_label = 'core'\n</code></pre>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":12921789,"title":"Django: import auth user to the model","body":"<p>I have one problem. In Django I created a new model:</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth import user\n\nclass Workers(models.Model):\n    user = models.OneToOneField(User, primary_key=True)\n        work_group = models.CharField(max_length=20)\n        card_num = models.IntegerField()\n    def __unicode__(self):\n            return self.user\n</code></pre>\n\n<p>But it doesn't work: <code>ImportError: cannot import name user</code></p>\n\n<p>How to fix it?</p>\n\n<p>So, I want to create a new table \"workers\" in db, which has a <code>OneToOne</code> relationship with table \"auth_user\". Thanks.</p>\n"},{"tags":["django","django-models","django-fixtures"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":370,"score":1,"question_id":5940294,"title":"Import data into Django model with existing data?","body":"<p>I'm working on an online form builder tool (specifically for insurance agents).  One of the things we would like to offer our customers is to have pre-built forms for common products (auto, home, life, etc) be available by default, but still modifiable.</p>\n\n<p>Under normal circumstances, I would simply create the forms in my development environment, then create a fixture containing these forms, and run syncdb on all the live sites.  Unfortunately that isn't a possibility, as some of our customers already have created forms, which may conflict with the primary keys in my fixture.  There are also four different inter-related tables that I am looking to export, but it is all in my <code>sqformbuilder</code> app.</p>\n\n<p>Is there a way to export a fixture but allow it to be flexibly inserted into another running copy of the database?</p>\n"},{"tags":["django","django-models","django-many-to-many"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12921783,"title":"instance needs to have a primary key value before a many-to-many relationship can be used","body":"<p>I'm going to get mad now - I could not create a new Team-Instance. Django always displays the error: <code>'Team' instance needs to have a primary key value before a many-to-many relationship can be used.</code></p>\n\n<p>Here's my model:</p>\n\n<pre><code>from django.contrib.auth.models import User\nfrom django.db import models\n\nclass Team(models.Model):\n    name = models.CharField(max_length=10)\n    members = models.ManyToManyField(User)\n\n    def save(self, *args, **kwargs):\n        if self.pk:\n            # for later use\n            pass\n        super(Team, self).save(*args, **kwargs)\n</code></pre>\n\n<p>Now I'd like to create a new Team...</p>\n\n<pre><code>from django.contrib.auth.models import User\nfrom models import Team\n\nuser_obj = User.objects.get(pk=1)\nnew = Team()\nnew.name = 'aaa'\nnew.save()\nnew.members.add(user_obj)\n</code></pre>\n\n<p>Could someone see the mistake?</p>\n\n<p><strong>edit</strong>\ni've read the docs and this (very great) answer <a href=\"http://stackoverflow.com/questions/6996176/how-to-create-an-object-for-a-django-model-with-a-many-to-many-field\">How to create an object for a Django model with a many to many field?</a> - still can't figure out what is wrong</p>\n"},{"tags":["python","django","django-models"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12382546,"title":"How can I turn Django Model objects into a dictionary and still have their foreign keys?","body":"<p>In my Django app, how can I turn objects from Models into a dictionary that includes the foreign-key references of the Model object? </p>\n\n<p>When I try this:</p>\n\n<pre><code>from django.forms.models import model_to_dict\nmodel_to_dict(instance, fields=[], exclude=[])\n</code></pre>\n\n<p>The resulting dictionary only has the direct fields. I would like to also get the foreign keys related to the Model object. How can I do this?</p>\n"},{"tags":["django","command"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":127,"score":2,"question_id":7804323,"title":"django override startapp|project commands","body":"<p>I'll create some differnet base project|app structure.\nI add into django/conf two folders qqapp qqproject with base files for my project and application.</p>\n\n<p>How i can override or add for django-admin this commands.</p>\n\n<p>Now i hack it by editing files (change dir name for default folders) django/core/management/commands/startapp|project.py, but think this is bad idea.</p>\n"},{"tags":["django","django-cache","django-johnny-cache"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":10547213,"title":"Django Johnny cache - include tables instead of exclude using MAN_IN_BLACKLIST?","body":"<p>I'm aware of Johnny cache's <code>MAN_IN_BLACKLIST</code> and <code>JOHNNY_TABLE_BLACKLIST</code>.\nIs there a way to specify the reverse? That is specify only the tables that need to be cached?\nI want to do this for the simple reason that we have over 200 tables in the application and I want to cache a few and don't want my <code>MAN_IN_BLACKLIST</code> to be really huge.</p>\n\n<p>Thanks,</p>\n"}]}
{"total":41213,"page":18,"pagesize":100,"questions":[{"tags":["python","django","static-files","urls.py"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":60,"score":0,"question_id":12918665,"title":"Django Static Files - CSS not working","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1179453/django-and-serving-static-files\">Django and Serving Static Files</a>  </p>\n</blockquote>\n\n\n\n<p>I am with one problem to load CSS at base.html. I put all css files at the directory /static. </p>\n\n<p>At <code>urls.py</code> I put this code:</p>\n\n<pre><code>if settings.DEBUG:\n    urlpatterns += patterns('',\n        (r'^static/(?P&lt;path&gt;.*)$', 'django.views.static.serve',\n           { 'document_root': '/home/bkcherry/botstore/botstore/static' }),\n    )\n</code></pre>\n\n<p>And at base.html i put the following:</p>\n\n<pre><code>&lt;link rel=\"Stylesheet\" type=\"text/css\" href=\"/static/css.css\" /&gt;\n</code></pre>\n\n<p>When I go to the main.html, the css style is not working. I need to configure the settings.py <code>MEDIA_ROOT</code>, <code>MEDIA_URL</code> or <code>STATIC_ROOT</code>?</p>\n"},{"tags":["django","tastypie","mongoengine"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12920647,"title":"How can I update a Django Tastypie DictField using a REST client?","body":"<p>I have a User model:</p>\n\n<pre><code>class User(Document):\n    email = EmailField(required=True)\n    first_name = StringField(max_length=50)\n    tokens = DictField()\n</code></pre>\n\n<p>And resource:</p>\n\n<pre><code>class UserResource(resources.MongoEngineResource):\n    class Meta:\n        queryset = models.User.objects.all()\n        allowed_methods = ('get', 'post', 'put', 'delete', 'patch')\n        authorization = authorization.Authorization()\n        resource_name = \"user\"\n</code></pre>\n\n<p>I am trying to add values to \"tokens\" for a specific user. My data is:</p>\n\n<pre><code>{\n \"tokens\" : {\n     \"first_token\": \"xasdadjasdh22939123\"\n }\n}\n</code></pre>\n\n<p>And Url is:</p>\n\n<pre><code>http://127.0.0.1:8000/api/v1/user/2831823912932193/ \n</code></pre>\n\n<p>I am getting \"<strong>204 NO CONTENT</strong>\" from PUT request, and there is no token in \"tokens\".</p>\n\n<p>And \"<strong>202 ACCEPTED</strong>\" from PATCH request, and there is also no token in \"tokens\".</p>\n\n<p>Where am I wrong? </p>\n"},{"tags":["python","django","fields"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12919328,"title":"Multiple left to right selection field","body":"<p>I would like to ask whether there is any field, like the one attached below, available in Django as a single object. If no, then how can we generate such a functionality of moving selected items to the right hand side. </p>\n\n<p>Please guide, I shall be extremly thankful.</p>\n\n<p><img src=\"http://i.stack.imgur.com/grfBA.jpg\" alt=\"enter image description here\"></p>\n"},{"tags":["django","caching","file-upload","progress"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":168,"score":0,"question_id":12156207,"title":"Django file upload progress get cache returns None","body":"<p>Django file upload progress process json request getting null response</p>\n\n<p><em><strong>view.py</em></strong></p>\n\n<pre><code>def upload_progress(request):\n    \"\"\"\n    A view to report back on upload progress.\n    Return JSON object with information about the progress of an upload.\n\n    Copied from:\n    http://djangosnippets.org/snippets/678/\n\n    See upload.py for file upload handler.\n    \"\"\"\n    #import ipdb\n    #ipdb.set_trace()\n    progress_id = ''\n    if 'X-Progress-ID' in request.GET:\n        progress_id = request.GET['X-Progress-ID']\n    elif 'X-Progress-ID' in request.META:\n        progress_id = request.META['X-Progress-ID']\n    if progress_id:\n        from django.utils import simplejson\n        cache_key = \"%s_%s\" % (request.META['REMOTE_ADDR'], progress_id)\n        data = cache.get(cache_key)\n\n\n        return HttpResponse(simplejson.dumps(data))\n</code></pre>\n\n<p><em><strong>UploadProgressCachedHandler.py</em></strong></p>\n\n<pre><code>    from django.core.files.uploadhandler import FileUploadHandler\n    from django.core.cache import cache\n\n    class UploadProgressCachedHandler(FileUploadHandler):\n        \"\"\"\n        Tracks progress for file uploads.\n        The http post request must contain a header or query parameter, 'X-Progress-ID'\n        which should contain a unique string to identify the upload to be tracked.\n\n        Copied from:\n        http://djangosnippets.org/snippets/678/\n\n        See views.py for upload_progress function...\n        \"\"\"\n\n        def __init__(self, request=None):\n            super(UploadProgressCachedHandler, self).__init__(request)\n            self.progress_id = None\n            self.cache_key = None\n\n        def handle_raw_input(self, input_data, META, content_length, boundary, encoding=None):\n            self.content_length = content_length\n            if 'X-Progress-ID' in self.request.GET :\n                self.progress_id = self.request.GET['X-Progress-ID']\n            elif 'X-Progress-ID' in self.request.META:\n                self.progress_id = self.request.META['X-Progress-ID']\n            if self.progress_id:\n                self.cache_key = \"%s_%s\" % (self.request.META['REMOTE_ADDR'], self.progress_id )\n                cache.set(self.cache_key, {\n                    'length': self.content_length,\n                    'uploaded' : 0\n                })\n\n        def new_file(self, field_name, file_name, content_type, content_length, charset=None):\n            pass\n\n        def receive_data_chunk(self, raw_data, start):\n            if self.cache_key:\n                data = cache.get(self.cache_key)\n                data['uploaded'] += self.chunk_size\n                cache.set(self.cache_key, data)\n                #cache.set(self.cache_key, 5000)\n            return raw_data\n\n        def file_complete(self, file_size):\n            pass\n\n        def upload_complete(self):\n            if self.cache_key:\n                cache.delete(self.cache_key)\n</code></pre>\n\n<p>Iam setting cache with uploadProgressCacheHandler. But when tries to retrieve via json request .The <code>data</code> returning <code>None</code> object.'cache_key' is generating correctly.</p>\n\n<p>Please help.</p>\n"},{"tags":["python","html","django","website","project"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":61,"score":3,"question_id":12916963,"title":"Using HTML for Django","body":"<p>Over the last couple of weeks I have been teaching myself Python (2.7). I finally completed my first project (YAY!) and I am looking for new challenges. </p>\n\n<p>I then caught my eyes on Django, and it looks like something which might be worth looking into. \nHowever.\nI can't really seem to find out how it works. I have been looking at tutorials on YouTube, and could see some basic stuff, but at the end all that comes out is just a white page printing \"Hello world!\". So my question is. If I need to start learning Django, would i also need to learn HTML? Is HTML a requirement to be able to launch a website with Django.</p>\n\n<p>If it is, do you suggest I go ahead and learn HTML first (and if so, what to start out with learning), or should I just jump straight in to Django?</p>\n\n<p>If you have any other ideas on what I could start doing next, that would also be much appreciated. </p>\n"},{"tags":["django","forms","permissions","decorator","django-guardian"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12918016,"title":"permission_required_or_403 decorator on an 'Add or Edit'?","body":"<p>I have a typical django view setup for adding a new or editing a current 'book' model (through forms). This is of the nature:</p>\n\n<pre><code>def bookedit(request, bookid=None):\n    if bookid:\n        book = get_object_or_404(Book, pk=bookid)\n    else: \n        book = Book()\n\n    if request.method == 'POST':\n        &lt;form handling code.....&gt;\n</code></pre>\n\n<p>I now want to put a decorator on this to limit editing to the user who created the Book. Using django-guardian I have the following decorator to wrap the above code:</p>\n\n<pre><code>@permission_required_or_403('myapp.edit_book', (Book, 'id', 'bookid'))\n</code></pre>\n\n<p>This works okay in the scenario of editing Books already created, i.e. a 403 will be thrown if the user is not the creator. However, in adding a new book the bookid is empty and crashes the decorator code. Is there a good way to handle this scenario (without separating out the edit and add functions)?</p>\n\n<p>Thanks, \nGerry</p>\n"},{"tags":["django","apache","apache2","mod-wsgi","centos"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":3085,"score":3,"question_id":4501817,"title":"Django, apache, mod_wsgi - Error: Premature end of script headers","body":"<p>Apache logs in mode debug:</p>\n\n<pre><code>[Tue Dec 21 11:36:33 2010] [info] [client 1.53.149.114] mod_wsgi (pid=24831, process='mysite', application='mysite.com|'): Loading WSGI script '/home/anhtran/webapps/mysite.com/django.wsgi'.\n[Tue Dec 21 11:36:33 2010] [error] [client 1.53.149.114] Premature end of script headers: django.wsgi\n[Tue Dec 21 11:36:33 2010] [notice] child pid 24831 exit signal Segmentation fault (11)\n[Tue Dec 21 11:36:33 2010] [info] mod_wsgi (pid=24980): Attach interpreter ''.\n</code></pre>\n\n<p>My conf file:</p>\n\n<pre><code>WSGISocketPrefix /tmp/wsgi\n\n&lt;VirtualHost *:80&gt;\n   ServerName mysite.com\n   ServerAlias www.mysite.com\n   ServerAdmin admin@mysite.com\n\n   DocumentRoot /home/anhtran/webapps/mysite.com/public_html\n\n   WSGIDaemonProcess mysite processes=5 threads=25\n   WSGIProcessGroup mysite\n   WSGIScriptAlias / /home/anhtran/webapps/mysite.com/django.wsgi\n\n   LogLevel debug\n\n   &lt;Directory /home/anhtran/webapps/mysite.com/mysite&gt;\n      Order allow,deny\n      Allow from all\n   &lt;/Directory&gt;\n\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>Django works fine in a basic project without a data connection such as MySQLdb or sqlite3.\nI'm using CentOS 5 64 bit, apache 2.x, mod_wsgi 3.2.\nI think this is not a problem of Django, but I have no idea for it. Everybody can fix it? Help me.\nThanks! :)</p>\n\n<p>django.wsgi</p>\n\n<pre><code>#!/usr/local/bin/python\nimport os, site, sys\n\n# add the virtual environment path\nsite.addsitedir('/home/anhtran/webapps/mysite.com/env/lib/python2.6/site-packages')\nsite.addsitedir('/home/anhtran/webapps/mysite.com/mysite')\nsite.addsitedir('/home/anhtran/webapps/mysite.com')\n\n# fix markdown.py (and potentially others) using stdout\nsys.stdout = sys.stderr\n\n#Calculate the path based on the location of the WSGI script.\nproject = os.path.dirname(__file__)\nworkspace = os.path.dirname(project)\nsys.path.append(workspace)\n\nos.environ['PYTHON_EGG_CACHE'] = '/home/anhtran/webapps/mysite.com/.python-eggs'\nos.environ['DJANGO_SETTINGS_MODULE'] = 'mysite.settings'\nfrom django.core.handlers.wsgi import WSGIHandler\napplication = WSGIHandler()\n</code></pre>\n\n<p>I've read some questions in this link: <a href=\"http://code.google.com/p/modwsgi/wiki/FrequentlyAskedQuestions\" rel=\"nofollow\">http://code.google.com/p/modwsgi/wiki/FrequentlyAskedQuestions</a>\nBut I still don't understand the solutions.</p>\n"},{"tags":["django","web","webserver","subdomain","lighthttpd"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":12918998,"title":"Django, subdomains and lighthttpd","body":"<p>I have a Django application being served of (say) example.com. It contains a number of sub-applications (say) strength, speed and skill. The URL scheme is something like <a href=\"http://example.com/strength\" rel=\"nofollow\">http://example.com/strength</a>, <a href=\"http://example.com/speed\" rel=\"nofollow\">http://example.com/speed</a> and <a href=\"http://example.com/skill\" rel=\"nofollow\">http://example.com/skill</a>. This is how I run my dev server (using runserver) and there are no problems whatsoever.</p>\n\n<p>Now, during deployment, I need to have subdomains that map to these sub-applications. More specifically, I want <a href=\"http://x.example.com\" rel=\"nofollow\">http://x.example.com</a> to map to <a href=\"http://example.com/x\" rel=\"nofollow\">http://example.com/x</a> (for the above values of x) and then processing can go on.</p>\n\n<p>Using Apache, there are a lot of examples on how to do that \"rewriting\". There is an example of a similar question here in StackOverflow:\n<a href=\"http://stackoverflow.com/questions/3461806/django-subdomains-and-mod-rewrite-urls-messing-up-on-deployment-setups\">Django, subdomains and mod_rewrite. URLs messing up on deployment setups</a></p>\n\n<p>In fact, in my old server I had Apache+Zope, and I've used these rewritings for years. Now I've rented a hosting with lighthttpd+Django, and I have no idea on how to do the \"rewritings\".</p>\n\n<p>How to get the same behaviour using lighthttpd instead of Apache? I've been googling and it seems that lighthttpd can't do a \"rewrite\" of the host part of an URL. I can do a \"redirect\", of course, but that wouldn't be the same, users will notice the redirection always.</p>\n"},{"tags":["django","login"],"answer_count":3,"favorite_count":3,"up_vote_count":14,"down_vote_count":0,"view_count":12010,"score":14,"question_id":1477319,"title":"In Django, how do I know the currently logged-in user?","body":"<p>In Django, how do I know the currently logged-in user?</p>\n"},{"tags":["django","url","routing","url-pattern"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":66,"score":0,"question_id":12918464,"title":"In Django, How do you write the url pattern for '/' and other root-based urls","body":"<p>I'm new to django, and one of the things that I'm still learning is url_patterns. I set up a pages app to handle the root path (http://www.mysite.com) as well as some static pages such as the about page. I figured out how to set up the url pattern for the root path, but I can't get the site to direct the path '/about' to the pages \"about\" view.</p>\n\n<p>Here is my main urls.py</p>\n\n<pre><code> from django.conf.urls import patterns, include, url\n from django.conf import settings\n urlpatterns = patterns('',\n     url(r'^polls/', include('polls.urls')),\n     url(r'^$', 'pages.views.root'),\n     url(r'^/', include('pages.urls')),\n  )\n</code></pre>\n\n<p>here is my pages urls.py</p>\n\n<pre><code> from django.conf.urls import patterns, include, url\n urlpatterns = patterns('pages.views',\n      url(r'^about', 'about'),\n )\n</code></pre>\n\n<p>Here is my pages views.py</p>\n\n<pre><code> # Create your views here.\n from django.shortcuts import render_to_response\n from django.template import RequestContext\n from django.http import HttpResponse, HttpResponseRedirect\n from django.core.urlresolvers import reverse\n\n def root(request):\n    return render_to_response('pages/root.html',context_instance=RequestContext(request))\n def about(request):\n    return render_to_response('pages/about.html',context_instance=RequestContext(request))\n</code></pre>\n\n<p>If I change the main urls.py file to have <code>r'^a/', include('pages.urls')</code> then the path '/a/about' directs to the about action.. so I think it has to be an issue in the way i'm writing the url pattern in this file. But, I can't figure out how to change it. Can anyone help?</p>\n"},{"tags":["django","heroku","django-south"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12918123,"title":"Are there any downsides to doing a schema migration in my post_compile script","body":"<p>I have a django app running on heroku. I would like to run my South migrations before any code that depends on them goes live. After a quick review of current recommended practices I have found two suggested migration procedures.</p>\n\n<h3>Recommendation 1</h3>\n\n<ol>\n<li>Commit and push all changes</li>\n<li>Run <code>heroku run python manage.py migrate &lt;APP_NAME&gt;</code> for each app</li>\n</ol>\n\n<p>This suffers from having a period in between steps 1 and 2 where my code is assuming the latest schema is in place, but the db hasn't yet been updated. </p>\n\n<h3>Recommendation 2</h3>\n\n<ol>\n<li>commit and push all database changes.</li>\n<li>Migrate. </li>\n<li>Push all code changes. </li>\n</ol>\n\n<p>This solves the previous problem, but adds a lot more complexity to the deployment process, and some day I will mess this up.</p>\n\n<h3>Potential Solution?</h3>\n\n<p>It seems that I can avoid the problem in Recommendation 1 <em>and</em> keep my deployment to a single step by utilising a custom post_compile script\n that calls <code>python $MANAGE_FILE migrate &lt;APP_NAME&gt;</code> for each of my apps (in dependency order).</p>\n\n<p>I have not seen this recommended anywhere, so my question is twofold. Can you see any potential problem with this approach, and do you have a better method?</p>\n"},{"tags":["django","django-models"],"answer_count":8,"favorite_count":46,"up_vote_count":55,"down_vote_count":0,"view_count":25573,"score":55,"question_id":1308386,"title":"Programmatically saving image to Django ImageField","body":"<p>Ok, I've tried about near everything and I cannot get this to work.</p>\n\n<ul>\n<li>I have a Django model with an ImageField on it</li>\n<li>I have code that downloads an image via HTTP (tested and works)</li>\n<li>The image is saved directly into the 'upload_to' folder (the upload_to being the one that is set on the ImageField)</li>\n<li>All I need to do is associate the already existing image file path with the ImageField</li>\n</ul>\n\n<p>I've written this code about 6 different ways.</p>\n\n<p>The problem I'm running into is all of the code that I'm writing results in the following behavior:\n(1) Django will make a 2nd file, (2) rename the new file, adding an _ to the end of the file name, then (3) not transfer any of the data over leaving it basically an empty re-named file.  What's left in the 'upload_to' path is 2 files, one that is the actual image, and one that is the name of the image,but is empty, and of course the ImageField path is set to the empty file that Django try to create.</p>\n\n<p>In case that was unclear, I'll try to illustrate:</p>\n\n<pre><code>## Image generation code runs.... \n/Upload\n     generated_image.jpg     4kb\n\n## Attempt to set the ImageField path...\n/Upload\n     generated_image.jpg     4kb\n     generated_image_.jpg    0kb\n\nImageField.Path = /Upload/generated_image_.jpg\n</code></pre>\n\n<p>How can I do this without having Django try to re-store the file?  What I'd really like is something to this effect...</p>\n\n<pre><code>model.ImageField.path = generated_image_path\n</code></pre>\n\n<p>...but of course that doesn't work.</p>\n\n<p>And yes I've gone through the other questions here like <a href=\"http://stackoverflow.com/questions/811167/how-to-manually-assign-imagefield-in-django\">this one</a> as well as the django doc on <a href=\"http://docs.djangoproject.com/en/dev/ref/files/file/#django.core.files.File.save\" rel=\"nofollow\">File</a></p>\n\n<p><strong>UPDATE</strong>\nAfter further testing, it only does this behavior when running under Apache on Windows Server.  While running under the 'runserver' on XP it does not execute this behavior. </p>\n\n<p>I am stumped.</p>\n\n<p>Here is the code which runs successfully on XP...</p>\n\n<pre><code>f = open(thumb_path, 'r')\nmodel.thumbnail = File(f)\nmodel.save()\n</code></pre>\n"},{"tags":["django","django-haystack"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":37,"score":2,"question_id":12913838,"title":"Best ways to deal with Haystack Import errors","body":"<p>Heres what I have ended up with, please let me know if you have any other ideas.</p>\n\n<p>try doing this in urls.py </p>\n\n<pre><code>from apps.search import search_indexes\n\nimport haystack\nhaystack.autodiscover()\n</code></pre>\n\n<p>Won't work without import of search_indexes.</p>\n\n<p>I also use this hack in settings to get management commands working:</p>\n\n<pre><code>SKIP_COMMANDS = ['test']\nif any([command in sys.argv for command in SKIP_COMMANDS]):\nHAYSTACK_ENABLE_REGISTRATIONS = False\n</code></pre>\n\n<p>taken from this post: <a href=\"http://stackoverflow.com/questions/8577449/cant-use-django-management-commands-because-of-import-errors-when-haystack-trie\">Can&#39;t use django management commands because of Import Errors when haystack tries to import multiligualmodel</a></p>\n\n<p>I'm wondering about just setting HAYSTACK_ENABLE_REGISTRATIONS to false the whole time to be honest.</p>\n"},{"tags":["ajax","django","jquery-ajax","dajaxice"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":122,"score":3,"question_id":8438226,"title":"How can I cancel Ajax calls made using Dajaxice?","body":"<p>I've been using Dajaxice with my Django based site as it has been very convenient.</p>\n\n<p>However, I sometimes need to cancel the Ajax requests and I don't know how to do it when the requests are wrapped with Dajaxice.</p>\n\n<p>The documentation for Dajaxice is fairly light - I haven't found any reference to canceling Ajax requests using the Dajaxice API.</p>\n\n<p>Has anyone had to deal with this? </p>\n\n<p>Should I abandon Dajaxice and go to jQuery Ajax calls?</p>\n"},{"tags":["django","django-admin","django-grappelli"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":12910281,"title":"Django Admin Column Sort Descending","body":"<p>When using Django admin with <a href=\"https://github.com/sehmaschine/django-grappelli\" rel=\"nofollow\">grappelli</a> I would like that a click on a column header will sort the table by descending order.</p>\n\n<p>(I don't want a default ordering to the columns by defining the ordering field in the Model Meta Class.)</p>\n\n<p>The default behavior is Ascending.</p>\n\n<p>The <strong>first</strong> click should order like this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/xmzWO.png\" alt=\"required behavior\"></p>\n"},{"tags":["python","django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12917058,"title":"How to send information via webhook in Django from a website?","body":"<p>A person visits a website with forms: <code>http://unbouncepages.com/awesome-website/</code> </p>\n\n<p>He enters his Name and Email and downloads something. At the same time that person's information(name, email and ip address) should be sent to a web application via webhook. </p>\n\n<p>How can I do that in Django?</p>\n"},{"tags":["python","django","templates","view"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":692,"score":-1,"question_id":7594348,"title":"I want a button on my website that will execute a python script","body":"<p>I am currently making a website using django. Now I want to execute a python script from my template/view with a button on the website. It should be possible but to be honest I don't know how.</p>\n\n<p>An example would be best.</p>\n\n<p>Thanks for any help at all.</p>\n"},{"tags":["django","django-models","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12911909,"title":"Django only rendering a single variable","body":"<p>I request a page that calls the following view:</p>\n\n<p>views.py:</p>\n\n<pre><code>from django.http import HttpResponse\nfrom django.template import Context, loader\nfrom mainsite.models import Courses\n\ndef individualCourse(request, course_short):\n\n    c = Courses.objects.get(short=course_short)\n    t = loader.get_template('course.html')\n    cont = Context({\n        'course_short': c.short,\n        'course_title': c.title,\n        'course_start': c.startDate,\n        'course_end': c.endDate,\n        'course_fees': c.fees,\n        'course_description': c.description,\n        'course_content': c.content\n    })\n    return HttpResponse(t.render(cont))\n</code></pre>\n\n<p>models.py:</p>\n\n<pre><code>from django.db import models\n\nclass Courses(models.Model):\n    title = models.CharField(max_length=200)\n    short = models.CharField(max_length=5)\n    startDate = models.DateField(auto_now=False, auto_now_add=False)\n    endDate = models.DateField(auto_now=False, auto_now_add=False)\n    fees = models.IntegerField()\n    description = models.TextField()\n    content = models.TextField()\n\n    def __unicode__(self):\n        return  self.title, self.short, self.startDate, self.endDate, self.fees, self.description, self.content\n</code></pre>\n\n<p>course.html:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;&lt;title&gt;Course&lt;/title&gt;&lt;/head&gt;\n\n&lt;body&gt;\n\n&lt;p&gt;{{ course_title }}&lt;/p&gt;\n&lt;p&gt;{{ course_short }}&lt;/p&gt;\n&lt;p&gt;{{ course_start }}&lt;/p&gt;\n&lt;p&gt;{{ course_end }}&lt;/p&gt;\n&lt;p&gt;{{ course_fees }}&lt;/p&gt;\n&lt;p&gt;{{ course_description }}&lt;/p&gt;\n&lt;p&gt;{{ course_content }}&lt;/p&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I want it to display all the details for that particular course, but when it renders on the page, it only displays the title of the requested course. Does anyone know what I'm doing wrong?</p>\n"},{"tags":["django","optimization","orm"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":12910820,"title":"The best practice for writing Django apps while optimize ORM queries?","body":"<p>Writing a complex django apps involves playing with ORM objects in different places (views, templates, etc). However, designing ORM models is usually done in the beginning of project. On that stage is very difficult to predict exactly how data will be queried (what ForeignKeys will be used mostly).</p>\n\n<p>There are many stages where we can optimise number of queries that ORM makes:</p>\n\n<ul>\n<li>select_related() - in given ORM call</li>\n<li>prefetch_related() - in given ORM call</li>\n<li>overriding models ModelManager to prefetch all related models for all queries</li>\n</ul>\n\n<p>My usual way to optimise this is to write my whole app, and then using Developer Toolbar, see how many queries it is produced for a given view, and then decide where did they come from and how to avoid them (using above-mentioned options).</p>\n\n<p>But I found this way of doing that error-prone (e.g. you can forget to examine all views, or other background /celery/ methods). However, I found also very hard an inefficient doing optimisation while writing a logic (because I want to focus on logic, not on ORM calls at that moment).</p>\n\n<p>So my question is - what is the best practice (the best moment for) optimizing ORM queries?</p>\n"},{"tags":["django","calendar","datepicker"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":2,"view_count":62,"score":0,"question_id":12449603,"title":"Integrate calendar widget in Django app","body":"<p>How do I integrate a calendar widget in my system? I wish to add the calendar widget to my form, which has been designed in Django. I'm attaching a screenshot showing where I want to integrate it. Also, I want the calendar widget to be like <a href=\"http://www.dynarch.com/projects/calendar/\" rel=\"nofollow\">http://www.dynarch.com/projects/calendar/</a>.  </p>\n\n<p>What file do I need to modify and what code do I need to use?</p>\n\n<p><img src=\"http://i.stack.imgur.com/8UDuJ.png\" alt=\"enter image description here\"></p>\n"},{"tags":["django","cookies","varnish","csrf-protection"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":68,"score":-1,"question_id":12900762,"title":"Django csrf cookie and varnish","body":"<p>Today I had a problem with CSRF protection of Djando and varnish, the varnish basically detects a cookie (the CSRF) and does not perform its task (cache requests).</p>\n\n<p>The solutions found on google have not convinced me. And I tried an idea, delete all cookies when I'm not on a website that requires cookies and delete on the rest.</p>\n\n<p>Someone may find any inconvenient to this solution?</p>\n\n<p>I do not need user authentication ...</p>\n\n<p>thanks</p>\n"},{"tags":["ruby-on-rails","django","testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":110,"score":0,"question_id":1322879,"title":"What is the equivalent of Rail's Testing Routes in Django?","body":"<p>I was reading the <a href=\"http://guides.rubyonrails.org/testing.html\" rel=\"nofollow\">Rails testing doc</a> and it looks quite comprehensive in explaining the different type of tests.  I also noticed the section on <a href=\"http://guides.rubyonrails.org/testing.html#testing-routes\" rel=\"nofollow\">Testing Routes</a>.  Does anyone know how I can do that in Django/Python?  I have a bunch of web sites with some common urls that I need to test.  Here's how it's done in Ruby:</p>\n\n<pre><code>def test_should_route_to_post \n  assert_routing '/posts/1', { :controller =&gt; \"posts\", :action =&gt; \"show\", :id =&gt; \"1\" }\nend\n</code></pre>\n"},{"tags":["django","django-models","python-2.7","django-south","django-1.3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12873140,"title":"South won't migrate my custom field","body":"<p>I have a model which has a nullable foreign key relation with itself (this 'self' can be any model which has this foreign key). This foreign key is a custom class which prevents cyclic relationships.</p>\n\n<p>The call to <code>super()</code> in the <code>__init__</code> contains <code>null=True</code> and <code>blank=True</code> and therefor need to be included in the inspection rules of South. This makes at least the <em>schemamigration</em> work, but the <em>migrate</em> still fails.</p>\n\n<p>Following code shows: the custom foreign key, the inspection rules and the model using the foreign key.</p>\n\n<pre><code># Foreign key\nclass ParentField(models.ForeignKey)\n    def __init__(self, verbose_name=None, **kwargs):\n        super(ParentField, self).__init__('self', verbose_name=verbose_name, null=True, blank=True, **kwargs)\n\n    @staticmethod\n    def checkcyclic(object, attr):\n        '''Check for a cyclic relationship'''\n        pass\n\n# Introspection rules\nadd_introspection_rules([\n    (\n        [ParentField],\n        [],\n        {\n            'null': ['null', {'default': True}],\n            'blank': ['blank', {'default': True}],\n        }\n    )\n], [\"^test\\.models\\.fields\\.ParentField\"])\n\n# Model\nclass Relation(Model):\n    parent = ParentField(related_name='child_set')\n</code></pre>\n\n<p>Migrating gives the following error:</p>\n\n<pre><code>$ ./manage.py migrate\n[..]\nsuper(ParentField, self).__init__('self', verbose_name=verbose_name, null=True, blank=True, **kwargs)\nTypeError: __init__() got multiple values for keyword argument 'to'\n</code></pre>\n\n<p>I've tried addding a rule like below, but that changed nothing.</p>\n\n<pre><code>'to': ['rel.to', {'default': 'test.models.Relation'}],\n</code></pre>\n\n<p>Can anyone tell me what I'm doing the wrong way or any hints to a solution for this?</p>\n"},{"tags":["django","permissions","subprocess"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12913370,"title":"Read/Write permission for a program run with subprocess?","body":"<p>I've got a Django app, which calls a program using <code>subprocess.call()</code>. This program creates a couple of files, which I then use back in my app. The problem is the program doesn't seem to have permission to create files. I also tried calls like <code>subprocess.call(['mkdir','/tmp/myapp'])</code> but the directory was not created. What do I need to do?</p>\n\n<p>This is just with my dev server at the moment, which I invoke with</p>\n\n<pre><code>sudo python manage.py runserver 0.0.0.0:8080\n</code></pre>\n\n<p>I can run the command from the terminal manually fine.</p>\n\n<p>I can also use subprocess to <code>touch</code> the files, which it does fine, but when it runs the program that accesses the files itself, that program throws an error because it cannot.</p>\n"},{"tags":["django","unit-testing","django-views","django-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":162,"score":2,"question_id":3669345,"title":"Django Testing: determine which view was executed","body":"<p>In the Django <a href=\"http://docs.djangoproject.com/en/dev/topics/testing/#module-django.test.client\" rel=\"nofollow\">testing documentation</a> they promise that you can \"Test that the correct view is executed for a given URL.\"</p>\n\n<p>However I didn't find any possibility how to test which view was executed. I would expect that in the <a href=\"http://docs.djangoproject.com/en/dev/topics/testing/#django.test.client.Response\" rel=\"nofollow\"><code>Response</code> class</a> but there's nothing about the executed view. </p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["django","ldap","pickle","django-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":12915030,"title":"Django barfs at pickling of the session object when using LDAP authentication backend,","body":"<p>I've set up <a href=\"http://packages.python.org/django-auth-ldap/\" rel=\"nofollow\">Django LDAP authentication</a>\nfollowing <a href=\"http://www.djm.org.uk/using-django-auth-ldap-active-directory-ldaps/\" rel=\"nofollow\">this example</a>. And it seems that backend actually works, i.e. I have confirmed that</p>\n\n<ul>\n<li>LDAP access works perfectly via <a href=\"http://www.python-ldap.org/\" rel=\"nofollow\">python-ldap</a></li>\n<li>Debug shows that user can actually authenticate</li>\n<li>User and UserProfile objects are created (and stored to DB with no problems)</li>\n</ul>\n\n<p>However, when the resulting page after the successful logon is being rendered, I get a <code>PicklingError:  Can't pickle &lt;type 'module'&gt;: attribute lookup __builtin__.module failed</code></p>\n\n<p>There are no such problems when using the <code>model</code> authentication backend. Also, the variables in the failing call all look just ok. Here is the backtrace:</p>\n\n<pre><code>Traceback:\nFile \"&lt;anonymized&gt;/lib/Django-1.4.1-py2.6.egg/django/core/handlers/base.py\" in get_response\n  188.                 response = middleware_method(request, response)\nFile \"&lt;anonymized&gt;/lib/Django-1.4.1-py2.6.egg/django/contrib/sessions/middleware.py\" in process_response\n  36.                 request.session.save()\nFile \"&lt;anonymized&gt;/lib/Django-1.4.1-py2.6.egg/django/contrib/sessions/backends/db.py\" in save\n  52.             session_data=self.encode(self._get_session(no_load=must_create)),\nFile \"&lt;anonymized&gt;/lib/Django-1.4.1-py2.6.egg/django/contrib/sessions/backends/base.py\" in encode\n  79.         pickled = pickle.dumps(session_dict, pickle.HIGHEST_PROTOCOL)\n\nException Type: PicklingError at /\nException Value: Can't pickle &lt;type 'module'&gt;: attribute lookup __builtin__.module failed\n</code></pre>\n\n<p>The session dict is quite similar as for a user from <code>model</code> backend except for the item <code>'_auth_user_backend': 'django_auth_ldap.backend.LDAPBackend',</code></p>\n"},{"tags":["django"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":620,"score":0,"question_id":386042,"title":"How to have a link in label of a form field","body":"<p>I want to have a checkbox for terms and conditions, label of which should contain a link to a page with, well, terms and conditions.</p>\n\n<p>The following field will have the label with the tags escaped.</p>\n\n<pre><code>BooleanField(label=\"I agree to &lt;a href='terms-conditions.html'&gt;terms&amp;conditions&lt;/a&gt;\")\n</code></pre>\n"},{"tags":["django","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":55,"score":-1,"question_id":12914207,"title":"Force a form field to be populated in Django","body":"<p>I'm using Django 1.4 with Python 2.7 and Ubunutu 12.04.</p>\n\n<p>I have a form that will update a user's profile.  The last item in the form is the password.  I pre-populate the form with the existing user's data.  The password field does not get pre-populated - and that's fine.</p>\n\n<p>The problem is that when I \"save\" the data it overwrites the password to be a null or empty field (I can't tell which).  Bad.</p>\n\n<p>What can I do to prevent this?</p>\n\n<p>I've tried to make it a required field (<code>forms.py</code>):</p>\n\n<pre><code>password = forms.CharField(widget = forms.PasswordInput(), required = True)\n</code></pre>\n\n<p>Didn't work.</p>\n\n<p>I've tried to check that the password is not <code>None</code> before updating it (<code>views.py</code>):</p>\n\n<pre><code>if (request.POST.get('password') is not None):\n    user.set_password(request.POST.get('password'))\n</code></pre>\n\n<p>Didn't work.</p>\n\n<p>Does an empty form value come back as <code>None</code>?  If not, what does it come back as and how can I check if it's empty?</p>\n\n<p>EDIT 1:\nI updated my one of my <code>views</code> to check for validation - maybe I did this wrong?</p>\n\n<pre><code>@login_required\ndef profile(request):\n    \"\"\"\n    ..  function:: profile()\n\n        Provide the profile page, where it can be updated\n\n        :param request: Django Request object\n    \"\"\"\n    if request.user.is_authenticated():\n        user = User.objects.get(username = request.user.username)\n        user_dict = createUserProfileDict(user)\n        form = ProfileForm(initial = user_dict);\n        data = { 'user' : request.user }\n        data.update({ 'form' : form })\n        data.update(csrf(request))\n\n        if form.is_valid():\n            return render_to_response(\"profile.html\", data)\n</code></pre>\n\n<p>Now I receive the following error:</p>\n\n<pre><code>The view rsb.views.profile didn't return an HttpResponse object.\n</code></pre>\n\n<p>So, it appears my form is not valid?  How can I find out why?</p>\n\n<p>Here is the <code>update_profile view</code>:</p>\n\n<pre><code>@login_required\ndef update_profile(request):\n    \"\"\"\n    ..  function:: profile()\n\n        provide the profile page\n\n        :param request: Django Request object\n    \"\"\"\n    if request.user.is_authenticated():\n        user = User.objects.get(username = request.user)\n        user.first_name = request.POST.get('first_name')\n        user.last_name = request.POST.get('last_name')\n        user.email = request.POST.get('email')\n        if (request.POST.get('password') is not None):\n            user.set_password(request.POST.get('password'))\n        user.save()\n\n        # Update the additional user information tied to the user\n        user_info = UserProfile.objects.get(user_id = user.id)\n        user_info.company_name = request.POST.get('company_name')\n        user_info.client_type = request.POST.get('client_type')\n        user_info.address1 = request.POST.get('address1')\n        user_info.address2 = request.POST.get('address2')\n        user_info.city = request.POST.get('city')\n        user_info.state = request.POST.get('state')\n        user_info.country = request.POST.get('country')\n        user_info.zip_code = request.POST.get('zip_code')\n        user_info.phone_number = request.POST.get('phone_number')\n        user_info.save()\n\n    return profile(request)\n</code></pre>\n"},{"tags":["python","django","templates","dictionaries"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":12911269,"title":"Django template system and several month_list","body":"<p>What is the best way to render a monthly stat on a template page ? </p>\n\n<p>I've started with lists originally for template ease but after switching to dictionaries i've been able to do the same things more smoothly. Trouble is that a dictionary is, by definition, not sorted. Then if i iteritems() the dictionary i won't get a clean result but something more like</p>\n\n<pre><code>('Feb', 'Dec', 'Oct' ...)\n</code></pre>\n\n<p>Should i change my dictionnary into a list of tuple before processing to the template or is there a way to render thoses data with advanced knowledge of template django's template system ?</p>\n\n<p>My dictionary is constructed like that :</p>\n\n<pre><code>{'mnth_subscription': {'cummu_sbcr_mthl': {'Mar': 0, 'Feb': 0, 'Aug': 0, 'Sep': 0, 'Apr': 0, 'Jun': 0, 'Jul': 0, 'Jan': 0, 'May': 0, 'Nov': 2221, 'Dec': 2221, 'Oct': 2221}, 'monthly_perc': {'Mar': 0, 'Feb': 0, 'Aug': 0, 'Sep': 0, 'Apr': 0, 'Jun': 0, 'Jul': 0, 'Jan': 0, 'May': 0, 'Nov': -100, 'Dec': 0, 'Oct': 100}, 'cummu_sbcr_perc': {'Mar': 0, 'Feb': 0, 'Aug': 0, 'Sep': 0, 'Apr': 0, 'Jun': 0, 'Jul': 0, 'Jan': 0, 'May': 0, 'Nov': 100, 'Dec': 100, 'Oct': 100}, 'monthly_subscription': {'Mar': 0, 'Feb': 0, 'Aug': 0, 'Sep': 0, 'Apr': 0, 'Jun': 0, 'Jul': 0, 'Jan': 0, 'May': 0, 'Nov': 0, 'Dec': 0, 'Oct': 2221}}\n</code></pre>\n"},{"tags":["django","django-models","documentation","python-sphinx"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":52,"score":2,"question_id":12913039,"title":"Sphinx - Documenting Django models","body":"<p>I'm using Sphinx in order to document a Django application I have.</p>\n\n<p>When auto-generating documents I would like Sphinx to add the fields of each module within the documentation.</p>\n\n<p>Sphinx totally skips these. In fact there is no trace of the fields whatsoever.</p>\n\n<p>Any ideas?</p>\n\n<p>James</p>\n"},{"tags":["django","django-models","model","manager","instances"],"answer_count":3,"favorite_count":3,"up_vote_count":6,"down_vote_count":0,"view_count":2414,"score":6,"question_id":3874187,"title":"Manager isn't accessible via model instances","body":"<p>i'm trying to get model objects instance in another one. And i raise this error :</p>\n\n<pre><code> Manager isn't accessible via topic instance\n</code></pre>\n\n<p>Here's my model :</p>\n\n<pre><code>class forum(models.Model):\n    # Some attributs\n\nclass topic(models.Model):\n    # Some attributs\n\nclass post(models.Model):\n    # Some attributs\n\n    def delete(self):\n        forum = self.topic.forum\n        super(post, self).delete()\n        forum.topic_count = topic.objects.filter(forum = forum).count()\n</code></pre>\n\n<p>Here's my view :</p>\n\n<pre><code>def test(request, post_id):\n    post = topic.objects.get(id = int(topic_id))\n    post.delete()\n</code></pre>\n\n<p>And i get :</p>\n\n<pre><code>post.delete()\nforum.topic_count = topic.objects.filter(forum = forum).count()\nManager isn't accessible via topic instances\n</code></pre>\n\n<p>Hope you will help me. Thanks !</p>\n"},{"tags":["django","debugging"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":455,"score":3,"question_id":5653566,"title":"django print information on production server","body":"<p>I have some prints on my application for debug purpose. On the production server where these printed information goes? on apache log? I am using apache/mod_wsgi .</p>\n\n<p>Thanks. </p>\n"},{"tags":["django","caching","memcached"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12849681,"title":"what's a good/structured way to prevent memcached CacheKeyWarning's?","body":"<p>I was wondering if anyone knew of a handy way or method to make sure the keys you pass to django.core.cache.set() or cache.get() are ok</p>\n\n<p>From <a href=\"https://docs.djangoproject.com/en/1.3/topics/cache/#cache-key-warnings\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.3/topics/cache/#cache-key-warnings</a>:</p>\n\n<pre><code>Memcached, the most commonly-used production cache backend, does not allow \ncache keys longer than 250 characters or containing whitespace or control characters,\nand using such keys will cause an exception. \n</code></pre>\n\n<p>I found this md5_constructor() function here: <a href=\"https://github.com/django/django/blob/master/django/utils/hashcompat.py\" rel=\"nofollow\">https://github.com/django/django/blob/master/django/utils/hashcompat.py</a>,  </p>\n\n<p>maybe one way is to md5-ifiy the key you use always?   not 100% sure if that's safe or not</p>\n"},{"tags":["django","django-templates","decimal"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12903686,"title":"How can I get a decimal field to show more decimal places in a template?","body":"<pre><code>price_a = models.DecimalField(max_digits=5, decimal_places=3)\n</code></pre>\n\n<p>Example price: 95,90</p>\n\n<p>In my template:</p>\n\n<pre><code>{{ price_a }}\n</code></pre>\n\n<p>it display only 95,9. How can I get it to display full price (with an extra trailing 0: 95,90)?</p>\n"},{"tags":["python","django","django-forms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":12912724,"title":"django form validation datetimefield - input_formats not working","body":"<p>I am trying to validate a django form field DateTimeField .     </p>\n\n<p>I tried this in the form : </p>\n\n<pre><code>class MyForm(forms.Form):\n    t = forms.DateTimeField(required=False, input_formats=('%d-%m-%Y', ))\n</code></pre>\n\n<p>When I enter the date 12-12-2012, it is giving invalid date/time error in website and in the shell, getting couldnot parse date error .</p>\n\n<p>How can i use manual formats like 12-12-2012, 12-oct-2012 .</p>\n\n<p>Thanks</p>\n"},{"tags":["python","django","mongodb","pymongo","mongoengine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12846014,"title":"mongoengine - Do i need to create form for a model ? How to validate ListField(ImageField()) either by form or directly","body":"<p>i am using mongodb for django using mongoengine .<br>\nUsually for normal models, we write forms and the after submisson of the input data(html form), we populate the django form which validates the data . If form is valid, we just save the data in django form to the model .  Do I need to follow the same process for mongoengine also ?   If yes, how can i validate an image field.   My image field is like this : </p>\n\n<pre><code> images = ListField(ImageField())\n</code></pre>\n\n<p>Also, how should I ask the user to enter a list of images in the html page that can be saved into the above field . Will provide more information if necessary </p>\n\n<p>Thanks.</p>\n"},{"tags":["django","django-models","widget","django-forms","django-taggit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12912465,"title":"django - django-taggit form with django-chosen","body":"<p>I would like to use django-taggit. I use Bootstrap to generate the form.\nI use the widget as below for my form fields.\nQuestions are linked to several items for now, and I would like to link them to several tags as well.</p>\n\n<p>forms.py:</p>\n\n<pre><code>class QuestionForm(ModelForm):\n\ncreate = False\nno_results = _(\"No results matched\")\n\nclass Meta:\n    model = Question\n    fields = (\"content\", \"status\", \"items\")\n    widgets = {\n        \"content\": Textarea(attrs={\n            \"class\": \"span4\",\n            \"placeholder\": _(\"Ask something specific.\"),\n            \"rows\": 1}),\n        \"status\": ChosenSelect(),\n        \"items\": ChosenSelectMultiple(\n            attrs={\"class\": \"span4\", \"rows\": 1},\n            overlay=_(\"Pick a product.\"),\n        ),\n    }\n</code></pre>\n\n<p>How to integrate the tags in my form widget, given I would like to use ChosenSelectMultiple for the tags as well? (I need the question to be linked to several items and several tags)</p>\n\n<p>models.py:</p>\n\n<pre><code>class Question(Content):\ncontent = models.CharField(max_length=200, verbose_name=_(\"content\"))\ntags = TaggableManager()\n\nclass Content(models.Model):\nitems = models.ManyToManyField(Item, verbose_name=_(\"products\"))\n</code></pre>\n\n<p>I thought I could use TagField and ChosenSelectMultiple to handle it in my widget, but I have no idea how to do that.</p>\n"},{"tags":["django","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":12912233,"title":"AssertionError: Negative indexing is not supported","body":"<p>When i open to click cms-pages , showing error..</p>\n\n<pre><code>File \"/home2/devnocco/virtual/lib/python2.6/site-packages/Django-1.3.1-py2.6.egg/django/core/handlers/base.py\", line 111, in get_response\nresponse = callback(request, *callback_args, **callback_kwargs)\n\n  File \"/home2/devnocco/virtual/lib/python2.6/site-packages/Django-1.3.1-py2.6.egg/django/contrib/admin/options.py\", line 307, in wrapper\n    return self.admin_site.admin_view(view)(*args, **kwargs)\n\n  File \"/home2/devnocco/virtual/lib/python2.6/site-packages/Django-1.3.1-py2.6.egg/django/utils/decorators.py\", line 93, in _wrapped_view\n    response = view_func(request, *args, **kwargs)\n\n  File \"/home2/devnocco/virtual/lib/python2.6/site-packages/Django-1.3.1-py2.6.egg/django/views/decorators/cache.py\", line 79, in _wrapped_view_func\n    response = view_func(request, *args, **kwargs)\n\n  File \"/home2/devnocco/virtual/lib/python2.6/site-packages/Django-1.3.1-py2.6.egg/django/contrib/admin/sites.py\", line 197, in inner\n    return view(request, *args, **kwargs)\n\n  File \"/home2/devnocco/virtual/lib/python2.6/site-packages/django_cms-2.2-py2.6.egg/cms/admin/pageadmin.py\", line 657, in changelist_view\n    cl.set_items(request)\n\n  File \"/home2/devnocco/virtual/lib/python2.6/site-packages/django_cms-2.2-py2.6.egg/cms/admin/change_list.py\", line 198, in set_items\n    children[-1].last = False\n\n  File \"/home2/devnocco/virtual/lib/python2.6/site-packages/Django-1.3.1-py2.6.egg/django/db/models/query.py\", line 157, in __getitem__\n    \"Negative indexing is not supported.\"\n\nAssertionError: Negative indexing is not supported.\n</code></pre>\n"},{"tags":["mysql","django","unicode","django-fixtures"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":12912177,"title":"django loading fixtures fails on unicode data","body":"<p>I saved a bunch of fixtures via dumpdata, here is an example:</p>\n\n<pre><code>[\n  {\n    \"pk\": 1,\n    \"model\": \"core.question\",\n    \"fields\": {\n      \"text\": \"\\u041a\\u0430\\u043a\\u0438\\u0445 \\u0436\\u0438\\u0432\\u043e\\u0442\\u043d\\u044b\\u0445 \\u0432\\u044b \\u0434\\u0435\\u0440\\u0436\\u0438\\u0442\\u0435 \\u0434\\u043e\\u043c\\u0430\",\n      \"is_free_text\": false\n    }\n  },\n  {\n    \"pk\": 2,\n    \"model\": \"core.question\",\n    \"fields\": {\n      \"text\": \"\\u0415\\u0434\\u0438\\u0442\\u0435 \\u043b\\u0438 \\u0432\\u044b \\u043c\\u044f\\u0441\\u043e?\",\n      \"is_free_text\": false\n    }\n  },\n  {\n    \"pk\": 3,\n    \"model\": \"core.question\",\n    \"fields\": {\n      \"text\": \"\\u041a\\u0430\\u043a\\u043e\\u0439 \\u0435\\u043d\\u043e\\u0442 \\u0436\\u0438\\u0432\\u0435\\u0442 \\u0443 \\u0432\\u0430\\u0441 \\u0434\\u043e\\u043c\\u0430\",\n      \"is_free_text\": false\n    }\n  }\n]\n</code></pre>\n\n<p>when I do </p>\n\n<blockquote>\n  <p>manage.py loaddata core_question.json</p>\n</blockquote>\n\n<p>, the following error comes up:</p>\n\n<blockquote>\n  <p>Warning: Incorrect string value: '\\xD0\\x94\\xD0\\xB8\\xD0\\xB0...' for\n  column 'first_name' at row 1</p>\n</blockquote>\n\n<p>I though it could be the database thing but it all seems to be unicode:</p>\n\n<pre><code>character_set_client,utf8\ncharacter_set_connection,utf8\ncharacter_set_database,utf8\ncharacter_set_filesystem,binary\ncharacter_set_results,utf8\ncharacter_set_server,utf8\ncharacter_set_system,utf8\ncharacter_sets_dir,/usr/share/mysql/charsets/\n</code></pre>\n\n<p>as well as the schema collation:</p>\n\n<blockquote>\n  <p>CATALOG_NAME,SCHEMA_NAME,DEFAULT_CHARACTER_SET_NAME,DEFAULT_COLLATION_NAME,SQL_PATH\n  NULL,reviewer,utf8,utf8_general_ci,NULL</p>\n</blockquote>\n\n<p>is there something else I'm missing?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12911063,"title":"Getting object not iterable error in django form","body":"<p>IN my form i have this</p>\n\n<pre><code> mychoices = User.objects.filter(category__name='city')\n</code></pre>\n\n<p>I get this error</p>\n\n<p><code>User Object is not iterable</code>. I am new to django</p>\n\n<p>This is the next line</p>\n\n<pre><code>relevance = forms.MultipleChoiceField(choices=mychoices, widget=forms.CheckboxSelectMultiple())\n</code></pre>\n\n<p>If i comment this line then i don't see any error</p>\n\n<p>EDIT:</p>\n\n<p>I find the error , i had to use this</p>\n\n<pre><code>(choices=[ (o.id, str(o)) for o in User.objects.all()])  Then it works.\n</code></pre>\n\n<p>Does anyone know whats the problem in previous method</p>\n"},{"tags":["django","translation","osqa"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":9309858,"title":"guide to translating django application (OSQA)?","body":"<p>I want to translate OSQA into my native language, but I'm a total newbie to Django. </p>\n\n<p>I've seen that there are other questions here on SO relating 0SQA. (<a href=\"http://stackoverflow.com/questions/8342161/osqa-translation-issue-strings-not-present-in-django-po\">especially this one</a>)<br>\nSo if anyone could guide me how to accomplish this task. (I’ve done research before posting question here, but <a href=\"https://docs.djangoproject.com/en/1.1/topics/i18n/localization/#topics-i18n-localization\" rel=\"nofollow\">I didn’t find anything understandable</a>)</p>\n\n<p>Thank you for any answers, suggestions, tips. </p>\n"},{"tags":["python","django","django-models"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":52,"score":0,"question_id":12909605,"title":"django: How to save value against nested models","body":"<p>I have models with nested many-to-many relationships </p>\n\n<p><strong>IndependentTest</strong> have many-to-many relationship with <strong>Protocols</strong> </p>\n\n<p>and <strong>Protocols</strong> have many-to-many relationship with <strong>Format</strong>.</p>\n\n<p>So I need to save <strong>test results</strong> for a particular <strong>User</strong> against <strong>IndependentTests</strong>.</p>\n\n<p><strong>EDIT:</strong> Here are the models</p>\n\n<pre><code>class IndependentTest(models.Model):\n    name = models.CharField(max_length=1000)\n    choice = models.ManyToManyField(to=TestChoice, null=True, blank=True)\n    required = models.BooleanField()\n    testType = models.CharField(max_length=200,\n                                choices=Values.CUSTOM_ATTRIB_TYPES)\n\nclass TestProtocol(models.Model):\n    name = models.CharField(max_length=200)\n    description = models.CharField(max_length=1000)\n    independent_test = models.ManyToManyField(IndependentTest,\n                                              through='PIOrder')\n\nclass PIOrder(models.Model):\n    protocol = models.ForeignKey(TestProtocol)\n    independent = models.ForeignKey(IndependentTest)\n    order = models.IntegerField()\n\nclass TestFormat(models.Model):\n    name = models.CharField(max_length = 100)\n    test_protocol = models.ManyToManyField(TestProtocol, through='FPOrder')\n\nclass FPOrder(models.Model):\n    format = models.ForeignKey(TestFormat)\n    protocol = models.ForeignKey(TestProtocol)\n    order = models.IntegerField()\n</code></pre>\n\n<p><strong>EDIT:</strong> I don't know if this is a good approach, but I can make a new class</p>\n\n<pre><code>class CandidateTest (models.Model):\n    test_value  = models.CharField(max_length = 200)\n    candidate   = models.ForeignKey(Candidate)\n    test        = models.ForeignKey(IndependentTest)\n    testProtocol = models.ForeignKey(TestProtocol)\n    testFormat  = models.ForeignKey(TestFormat)\n</code></pre>\n\n<p>Although the results will be saved in test_value but what about any other data like the date or place the test was taken?</p>\n"},{"tags":["python","django","serialization"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12909981,"title":"Aggregate function cannot be serialized in django","body":"<p>I'm trying to serialize a django-object list and use it in a template. It works ok until I add some extra columns to my query with the annotate function. The \"serializers.serialize\" doesn't recognize this column and I cannot use this column in my template.</p>\n\n<pre><code>@login_required\ndef view_details(request):\n    data = {'ok': False}\n    if request.is_ajax():\n        id = request.GET.get('id')\n        vi = VacationInfo.objects.get(pk=int(id))   \n        event_list = vi.events.all().annotate(hours=Sum('hourassignment__hours')).order_by('start_date_time', 'end_date_time')\n        data['ok'] = True\n        data['event_list'] = serializers.serialize('json', event_list, fields=('title', 'start_date_time','end_date_time','hours'))\n    else:\n        return HttpResponse(status=400)     \n    return HttpResponse(simplejson.dumps(data), mimetype='application/json')\n</code></pre>\n"},{"tags":["django","django-orm"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":87,"score":2,"question_id":11026401,"title":"Django: Does chaining filter() functions result in the same SQL as using multiple kwargs?","body":"<p>In Django, do the following two snippets produce the same underlying SQL query?</p>\n\n<pre><code>qs = MyModel.objects.filter(group=1, type=2) \n</code></pre>\n\n<p>and</p>\n\n<pre><code>qs = MyModel.objects.filter(group=1).filter(type=2) \n</code></pre>\n"},{"tags":["python","django","security","encryption","credentials"],"answer_count":2,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":89,"score":6,"question_id":12904560,"title":"Storing credentials in django","body":"<p>I'm working on a python/django app which, among other things, syncs data to a variety of other services, including samba shares, ssh(scp) servers, Google apps, and others. As such, it needs to store the credentials to access these services. Storing them as unencrypted fields would be, I presume, a Bad Idea, as an SQL injection attack could retrieve the credentials. So I would need to encrypt the creds before storage - are there any reliable libraries to achieve this?</p>\n\n<p>Once the creds are encrypted, they would need to be decrypted before being usable. There are two use cases for my app:</p>\n\n<ul>\n<li>One is interactive - in this case the user would provide the password to unlock the credentials. </li>\n<li>The other is an automated sync - this is started by a cron job or similar. Where would I keep the password in order to minimise risk of exploits here?</li>\n</ul>\n\n<p>Or is there a different approach to this problem I should be taking?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":12909051,"title":"How to override the model field in django form","body":"<p>In my Model i have this</p>\n\n<pre><code>description = tinymce_models.HTMLField(help_text='A short descripton')\n</code></pre>\n\n<p>Now i want to render this field as normal text area not the tinymece field. I can't edit the models file.</p>\n\n<p>Is there any way i can override the same field in my form.</p>\n\n<p>like this</p>\n\n<pre><code>description = forms.widgets.Textarea(attrs={'rows':4, 'cols':40})\n</code></pre>\n\n<p>I tried this but didn't worked</p>\n"},{"tags":["django","django-models","django-queryset","django-filter"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":67,"score":2,"question_id":12908488,"title":"Django Related Field based filter","body":"<p>I have two models based in which one is related to another.</p>\n\n<pre><code>class Contacts(BaseModel):\n    user = models.ForeignKey(User, related_name='contacts')\n    group = models.ForeignKey(ContactGroups, related_name = 'contact_list')\n    name = models.CharField(_(\"Name\"), max_length = 250, null = True, blank = True)\n    title = models.CharField(_(\"Title\"), max_length = 250, null = True, blank = True)\n    twitter = models.CharField(_(\"Twitter\"), max_length = 250, null = True, blank = True)\n    facebook = models.CharField(_(\"Facebook\"), max_length = 250, null = True, blank = True)\n    google = models.CharField(_(\"Google +\"), max_length=250, null = True, blank = True)\n    notes = models.TextField(_(\"Notes\"), null = True, blank = True)\n    image = ImageField(_('mugshot'), upload_to = upload_to, blank = True, null = True)\n\n\n\nclass PhoneNumbers(BaseModel):\n    contact = models.ForeignKey(Contacts, related_name='phone_numbers')\n    phone = models.CharField(_(\"Phone\"), max_length = 200, null = True, blank = True)\n    type = models.CharField(_(\"Type\"), max_length = 200, choices = TYPES, null = True, blank = True)\n</code></pre>\n\n<p>Here I wanted filter contacts who have atleast one phonenumber.</p>\n\n<p>I have tried,</p>\n\n<pre><code>contacts = Contacts.objects.filter(user=request.user, phone_numbers__isnull=True)\n</code></pre>\n\n<p>Is it correct or not? Is there any other optimized method? How can we filter queryset based on related names?</p>\n"},{"tags":["django","multilingual","django-multilingual"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":46,"score":2,"question_id":12907870,"title":"Issues with translating the strings","body":"<p>I am using <strong>multiple translation</strong> in my project</p>\n\n<p>For that I have updated my <strong>settings file</strong> as</p>\n\n<pre><code>    LANGUAGE_CODE = 'en-us'\n\n    gettext = lambda s: s\n\n\n    LANGUAGES = (\n\n        ('es', gettext('Spanish')),\n        ('en', gettext('English')),\n    )\n\n\n    LOCALE_PATHS = (\n        '/mnt/aviesta/pythondev/django/locale',\n    )\n\n    USE_I18N = True\nMIDDLEWARE_CLASSES = (\n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.locale.LocaleMiddleware',\n\n\nTEMPLATE_CONTEXT_PROCESSORS = (\n    \"django.contrib.auth.context_processors.auth\",\n    \"django.core.context_processors.debug\",\n    \"django.core.context_processors.i18n\",\n    \"django.core.context_processors.media\",\n    \"django.core.context_processors.static\",\n    \"django.core.context_processors.request\",\n)\n</code></pre>\n\n<p>And my <strong>template file</strong> as:</p>\n\n<pre><code>{% load i18n %}\n\n{% trans \"Hello\" %}\n\n\n&lt;p&gt;Already a user &lt;a href=\"/login/\"&gt;&lt;b&gt;{% trans \"login here\" %}&lt;/b&gt;&lt;/a&gt;&lt;/p&gt;\n</code></pre>\n\n<p>after that I create a locale folder parallel to my app and than create the specific language folders in it as :<strong>django-admin.py makemessages -l es</strong> which creates the .po file and then update this .po file as:</p>\n\n<pre><code>#: customer_reg/customer_register.html:14\nmsgid \"Hello\"\nmsgstr \"¡Hola\"\n\n#: customer_reg/customer_register.html:17\nmsgid \"login here\"\nmsgstr \"ingresa aquí\"\n</code></pre>\n\n<p>And finally i <em>compiled</em> my msg <strong>django-admin.py compilemessages</strong></p>\n\n<p>BUt my strings \"hello\" and \"login here\" is remain in <strong>English</strong>, they are not translated.I don't know why it happens ??</p>\n"},{"tags":["django","forms","validation","foreign-key-relationship"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":12905318,"title":"django custom form validation with foreign keys","body":"<p>I have the following models:</p>\n\n<pre><code>class Computer(models.Model):\n    ...\n\nclass Demo(models.Model):\n    computers = models.ManyToManyField(Computer)\n    ...\n\nclass Scenario(models.Model):\n    demo = models.ForeignKey(Demo)\n    ...\n\nclass Setting(models.Model):\n    scenario = models.ForeignKey(Scenario)\n    computer = models.ForeignKey(Computer)\n</code></pre>\n\n<p>Basically a Demo uses multiple computers. A demo also has multiple scenarios. Each scenario has some settings and each setting configures a computer.</p>\n\n<p>My problem is while using the django Admin site to add a scenario, after the user selects a demo in the drop down list and configures the settings for some computers, I need to validate that the computers in the settings are actually in the demo.</p>\n\n<p>I've poured through the django documentation, online sites, and tried everything I can think of and still can't get this work.</p>\n\n<p>I can't use the custom form validation because although I could get the 'demo' object from the cleaned_data in the scenario form, I can't seem to get access to the settings that get submitted with the form. If I do model level validation by overriding 'clean', that only works when I change a scenario not when I add a new one because the computer_set is empty for new ones.</p>\n\n<p>Any help is greatly appreciated.</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12906933,"title":"Django how to check if the object has property in view","body":"<p>I am trying to get the documents property in a general function, but a few models may not have the documents attribute. Is there any way to first check if a model has the documents property, and then conditionally run code?</p>\n\n<pre><code>  if self.model has property documents:\n        context['documents'] = self.get_object().documents.()\n</code></pre>\n"},{"tags":["sql","django","postgresql","database-connection","postgresql-9.2"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":12902072,"title":"Find out which schema based on table values","body":"<p>My database is separated into schemas based on clients (i.e.: each client has their own schema, with same data structure).</p>\n\n<p>I also happen to have an external action that does not know which schema it should target. It comes from another part of the system that has no concepts of clients and does not know in which client's set it is operating. Before I process it, I have to find out which schema that request needs to target</p>\n\n<p>To find the right schema, I have to find out which holds the record <code>R</code> with a particular unique ID (string)</p>\n\n<p>From my understanding, the following </p>\n\n<pre><code>SET search_path TO schema1,schema2,schema3,...\n</code></pre>\n\n<p>will only look through the tables in schema1 (or the first schema that matches the table) and will not do a global search.</p>\n\n<p>Is there a way for me to do a global search across all schemas, or am I just going to have to use a for loop and iterate through all of them, one at a time?</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":12906402,"title":"type object 'datetime.datetime' has no attribute 'datetime'","body":"<p>I'm following a django tutorial, and I have gotten the following error:</p>\n\n<blockquote>\n  <p>type object 'datetime.datetime' has no attribute 'datetime'</p>\n</blockquote>\n\n<p>On the following line:</p>\n\n<pre><code>date = datetime.datetime(int(year), int(month), 1)\n</code></pre>\n\n<p>Does anybody know the reason for the error?</p>\n\n<p>I imported datetime with <code>from datetime import datetime</code> if that helps</p>\n\n<p>Thanks</p>\n"},{"tags":["javascript","jquery","django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12905438,"title":"Triggering an event is not caught","body":"<p>I am using this jQuery Fileupload script and I decided to add some events triggering in the scripts. Like this:</p>\n\n<pre><code>    _onAdd: function (e, data) {\n        var that = this,\n            result = true,\n            options = $.extend({}, this.options, data),\n            limit = options.limitMultiFileUploads,\n            paramName = this._getParamName(options),\n            paramNameSet,\n            paramNameSlice,\n            fileSet,\n            i;\n        if (!(options.singleFileUploads || limit) ||\n                !this._isXHRUpload(options)) {\n            fileSet = [data.files];\n            paramNameSet = [paramName];\n        } else if (!options.singleFileUploads &amp;&amp; limit) {\n            fileSet = [];\n            paramNameSet = [];\n            for (i = 0; i &lt; data.files.length; i += limit) {\n                fileSet.push(data.files.slice(i, i + limit));\n                paramNameSlice = paramName.slice(i, i + limit);\n                if (!paramNameSlice.length) {\n                    paramNameSlice = paramName;\n                }\n                paramNameSet.push(paramNameSlice);\n            }\n        } else {\n            paramNameSet = paramName;\n        }\n        data.originalFiles = data.files;\n        $.each(fileSet || data.files, function (index, element) {\n            var newData = $.extend({}, data);\n            newData.files = fileSet ? element : [element];\n            newData.paramName = paramNameSet[index];\n            newData.submit = function () {\n                newData.jqXHR = this.jqXHR =\n                    (that._trigger('submit', e, this) !== false) &amp;&amp;\n                    that._onSend(e, this);\n                return this.jqXHR;\n            };\n            return (result = that._trigger('add', e, newData));\n        });\n        $('.fileupload').trigger('addedFileForUpload');\n        $('#fileupload').trigger('addedFileForUpload');\n\n        return result;\n    },\n</code></pre>\n\n<p>This two lines specifically:</p>\n\n<pre><code>$('.fileupload').trigger('addedFileForUpload');\n$('#fileupload').trigger('addedFileForUpload');\n</code></pre>\n\n<p>Now... if I do this, it works:</p>\n\n<pre><code>$(\"#fileupload\").bind('addedFileForUpload', function() {\n   alert(\"This works\");\n});\n</code></pre>\n\n<p>Now... this doesn't work:</p>\n\n<pre><code>$(\".fileupload\").bind('addedFileForUpload', function() {\n   alert(\"This doesn't work\");\n});\n</code></pre>\n\n<p>Ultimately, I want something like this:</p>\n\n<pre><code>    &lt;div id=\"pictureupload\"&gt;\n        &lt;form class=\"fileupload\" method=\"post\" action=\"{% url 'upload_picture_2' %}\" enctype=\"multipart/form-data\"&gt;\n            {% csrf_token %}\n            &lt;input type=\"hidden\" name=\"file_type\" value=\"picture\"/&gt;\n            &lt;input type=\"hidden\" name=\"obj\" value=\"sop\"/&gt;\n            &lt;input type=\"hidden\" name=\"obj_id\" value=\"{{sop.id}}\"/&gt;\n            {% include \"files/minimal_pic_upload.html\" %}\n        &lt;/form&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>This is the source file: <a href=\"https://github.com/sigurdga/django-jquery-file-upload\" rel=\"nofollow\">https://github.com/sigurdga/django-jquery-file-upload</a></p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12890919,"title":"Django class based views and formsets","body":"<p>I have a class-based view called <code>OrganizationsCreateView</code> that includes a formset attached to a model form as an instance variable of that form.  This works fine when the user enters data -- a new object is created fine.  When the user wants to add additional rows to the formset, I have a submit button that triggers a conditional in the CreateView's post method:</p>\n\n<pre><code>def post(self,request,*args,**kwargs):\n    if 'add_email' in request.POST:\n\n        cp = request.POST.copy()\n        cp['emails-TOTAL_FORMS'] = int(request.POST['emails-TOTAL_FORMS']) + 1\n        self.initial_emails = cp\n\n    return super(OrganizationsCreateView,self).post(request,*args,**kwargs)\n</code></pre>\n\n<p>This adds rows just fine, but unfortunately it also adds a new object each time the user adds a new row.  How/where should I short-circuit this object adding behavior?</p>\n"},{"tags":["django","amazon-s3","amazon-web-services","boto"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12905160,"title":"Check if file is finished writing to Amazon S3 in Django","body":"<p>In a view, I am generating a file, saving it as a field in a Django model (an file field) and returning the url:</p>\n\n<pre><code>...\nobj.pdf.save(obj.hash_id + '.pdf', File(open(destination_path, 'r')))\n\nret = {\n  'pdfUrl': obj.pdf.url\n}\n\nret = json.dumps(ret)\nreturn HttpResponse(ret, mimetype='text/plain')\n</code></pre>\n\n<p>The user is then redirected to the url that is returned in ret, which sometimes is a blank pdf, but if they refresh a second later, the full pdf is there. I suspect S3 is not finished saving it down on their end. Is there any clean way in Django to make sure the file is accessible before returning the url?</p>\n"},{"tags":["python","django","pip","setup.py"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12718032,"title":"Python PIP : package directory does not exist","body":"<p>Since I uploaded my package to pypi, it seems that something is missing in my setup.py or MANIFEST.\n<a href=\"http://pypi.python.org/pypi/django-audiofield/\" rel=\"nofollow\">http://pypi.python.org/pypi/django-audiofield/</a></p>\n\n<p>When I try to install it :\n<strong>pip install django-audiofield</strong></p>\n\n<p>I'm always getting the error : </p>\n\n<p><strong>error: package directory 'audiofield' does not exist</strong></p>\n"},{"tags":["python","django","aptana"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":12888073,"title":"Django: Import error when trying to use django-audiofield from GitHub","body":"<p>I'm trying to use a <a href=\"https://github.com/Star2Billing/django-audiofield\" rel=\"nofollow\">django application on Github called django-audiofield</a> in my django project. I'm using Aptana Studio IDE. I installed it in my virtual environment and I'm getting the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n    File \"/Users/home/Desktop/Web Development/Aptana Studio 3.0/musicproject/src/manage.py\",    line 10, in &lt;module&gt;\n    execute_from_command_line(sys.argv)\n    File \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/__init__.py\", line 443, in execute_from_command_line\n    utility.execute()\n    File \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/__init__.py\", line 382, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n    File \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py\", line 196, in run_from_argv\n    self.execute(*args, **options.__dict__)\n    File \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py\", line 232, in execute\n    output = self.handle(*args, **options)\n    File \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py\", line 371, in handle\n    return self.handle_noargs(**options)\n    File \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/commands/validate.py\", line 9, in handle_noargs\n    self.validate(display_num_errors=True)\n    File \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py\", line 266, in validate\n    num_errors = get_validation_errors(s, app)\n    File \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/validation.py\", line 30, in get_validation_errors\n    for (app_name, error) in get_app_errors().items():\n    File \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/db/models/loading.py\", line 158, in get_app_errors\n    self._populate()\n    File \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/db/models/loading.py\", line 67, in _populate\n    self.load_app(app_name)\n    File \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/db/models/loading.py\", line 88, in load_app\n    models = import_module('.models', app_name)\n    File \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/utils/importlib.py\", line 35, in import_module\n    __import__(name)\n    File \"/Users/home/virtualenv/venv/src/audiofield/audiofield/models.py\", line 19, in &lt;module&gt;\n    from audiofield.fields import AudioField\n    File \"/Users/home/virtualenv/venv/src/audiofield/audiofield/fields.py\", line 20, in &lt;module&gt;\n    from tasks import audio_convert_task\n    File \"/Users/home/virtualenv/venv/src/audiofield/audiofield/tasks.py\", line 14, in &lt;module&gt;\n    from celery.task import Task\n  ImportError: No module named celery.task\nFinished \"/Users/home/Desktop/Web Development/Aptana Studio 3.0/musicproject/src/manage.py validate\" execution.\n</code></pre>\n\n<p>Please assist. </p>\n"},{"tags":["python","django","mod-rewrite","subdomain","subdomains"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":620,"score":1,"question_id":3461806,"title":"Django, subdomains and mod_rewrite. URLs messing up on deployment setups","body":"<p>I have a Django application being served of (say) <code>example.com</code>. It contains a number of sub-applications (say) <code>strength</code>, <code>speed</code> and <code>skill</code>. The URL scheme is something like <code>http://example.com/strength</code>, <code>http://example.com/speed</code> and <code>http://example.com/skill</code>. This is how I run my dev server (using <code>runserver</code>) and there are no problems whatsoever.</p>\n\n<p>Now, during deployment, I need to have subdomains that map to these sub-applications. More specifically, I want <code>http://x.example.com</code> to map to <code>http://example.com/x</code> (for the above values of <code>x</code>) and then processing can go on.</p>\n\n<p>I googled a little bit and found two ways of doing this. </p>\n\n<ul>\n<li>One is to get some middleware to get the subdomain part of the URL and keep it inside the <code>request</code> object passed to my view methods. I then do the whole thing inside my application logic. </li>\n<li>The other is to use Apache <code>mod_rewrite</code> to do the above URL translation and then let my app run as usual. </li>\n</ul>\n\n<p>I chose the latter since it looked neater and I thought I wouldn't have to include deployment specific code inside my core application. </p>\n\n<p>Now, I'm bitten by a problem which I can't really find a way out of. Inside the <code>skill</code> application, I have a named url <code>skill_home</code>. It's <code>http://example.com/skill</code>. However, once I deploy, the <code>skill_home</code> URL becomes <code>http://skill.example.com/skill</code>. Django appends the <code>/skill</code> to the top level domain and this is what I get. If I do a GET on this URL, <code>mod_rewrite</code> changes it to <code>http://skill.example.com/skill/skill</code> and it doesn't work. </p>\n\n<p>My <code>mod_rewrite</code> snippets look like this</p>\n\n<pre><code>RewriteCond %{HTTP_HOST} !www.example.com$ [NC]\nRewriteCond %{HTTP_HOST} ^(www.)?skill.example.com [NC]\nRewriteCond %{REQUEST_FILENAME} !-f\nRewriteRule (.*) /skill/$1 \n</code></pre>\n\n<p>How do I fix this neatly?</p>\n"},{"tags":["javascript","ajax","django","bootstrap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":156,"score":0,"question_id":12904669,"title":"Asyncronous forms with bootstrap and django","body":"<p>So i'm trying to make this form asyncronous. Ideally, I'm using this form to add units, and then update the table dynamically. I do not want the entire page to refresh. I'm not all that good with javascript, and I could use some pointers with what's going on:</p>\n\n<p>A few things are happening that I don't want to happen:</p>\n\n<ol>\n<li>The entire page is refreshing</li>\n<li>request.is_ajax() is False.</li>\n</ol>\n\n<p>Mostly, I'm just trying to understand what's going on, but the question is, how do I change the below to fix the above two issues? (if they are issues are issues at all.)</p>\n\n<p>Some of the below code is taken from this question:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/9979622/how-do-i-insert-a-django-form-in-twitter-bootstrap-modal-window?rq=1\">How do I insert a django form in twitter bootstrap modal window?</a></p>\n\n<p>For the record, I am seeing the post just fine in request.POST, I just want to make it work Asyncronously, which is how my question differs from the above.</p>\n\n<pre><code>{% block scripts %}\n&lt;script type=\"text/javascript\"&gt;\n    $(document).ready(function() {\n        modalConnect();\n    });\n&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n$( document ).ajaxStop( function() {\n    modalConnect();\n});\n&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n    function modalConnect()\n        {\n            //unbind the click event. If not done we will end up with multiple click event bindings, since binding is done after each ajax call.\n            $(\".editItem\").unbind('click');\n            //bind the click event\n            $(\".editItem\").click(function(ev) { // for each edit item &lt;a&gt;\n                ev.preventDefault(); // prevent navigation\n                var url = this.href; //get the href from the &lt;a&gt; element\n                $.get(url, function(results){\n                  //get the form\n                  var itemForm = $(\"#ajax_form_modal_result\", results);\n                  //get the update URL\n                  var formUpdateURLDiv = $(\"#formUpdateURL\", results);\n                  //get the inner html of the div\n                  var formUpdateURL = formUpdateURLDiv.html();\n                  //update the dom with the received form\n                  $('#inventory').html(itemForm);\n                  //show the bootstrap modal\n                  $(\"#inventory\").modal('show');\n                  $(document).ready(function () {\n                     //bind the form to an ajax call. ajax call will be set to the received update url\n                     submitItemModalFormBind(formUpdateURL);\n                  });\n                }, \"html\");\n                return false; // prevent the click propagation\n            })\n        }\n&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n       function submitItemModalFormBind(url){\n         //bind the form. prevent default behavior and submit form via ajax instead\n         $('#ajax_form_modal_result').submit(function(ev){\n             $.ajax({\n                type: \"POST\",\n                url: url,\n                data: $(this).serialize(),\n                success:function(response, textStatus, jqXHR){\n                     var form = $(\"#ajax_form_modal_result_div\", response);\n                     //form is returned if it is not valid. update modal with returned form\n                     //change this \"if\" to check for a specific return code which should be set in the view\n                     if (form.html()) {\n                        console.log('Form was invalid and was returned');\n                        //update modal div\n                         $('#ajax_form_modal_result_div').html(form);\n                         $(\"#inventory\").modal('show');\n                      }\n                      //form is not returned if form submission succeeded\n                      else{\n                        //update the entire document with the response received since we received a entire success page and we want to reload the entire page\n\n                        //sort by modified date descending\n\n                        //var notificationDiv = $(\"#notification\", response);\n                        //$('#notification').html(notificationDiv.html());\n                        console.log('Form was valid and was not returned');\n                        $(\"#inventory\").modal('hide');\n                        }\n                },\n                error: function (request, status, error) {\n                            var div = $(\"ajax_form_modal_result_div\", request.responseText);\n                            $('#ajax_form_modal_result_div').html(div);\n                            //implement proper error handling\n                            console.log(\"failure\");\n                            console.log(request.responseText);\n                        }\n                    });\n                    return false;\n                });\n              }\n&lt;/script&gt;\n\n\n\n{% endblock %}\n\n{% block content %}\n\n&lt;div class=\"row\"&gt;\n    &lt;div class=\"span8 offset4\"&gt;\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"span3\"&gt;\n                &lt;h1&gt;\n                Acquisitions\n                &lt;/h1&gt;\n            &lt;/div&gt;\n            &lt;div class=\"span3 offset2\"&gt;\n                &lt;h1&gt;\n                &lt;a id=\"editItem\" href=\"#inventory\" role=\"button\" class=\"icon-plus-sign\" data-toggle=\"modal\"&gt;&lt;/a&gt;\n                Add Units\n                &lt;/h1&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;table class=\"table table-hover table-striped\"&gt;\n            &lt;thead&gt;\n                &lt;tr&gt;\n                    &lt;th&gt;\n                    lolcats\n                    &lt;/th&gt;\n                &lt;/tr&gt;\n            &lt;/thead&gt;\n            &lt;tbody&gt;\n                &lt;tr&gt;\n                    &lt;td&gt;\n                    lolcats\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n                    &lt;tr&gt;\n                    &lt;td&gt;\n                    test\n                    &lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;/tbody&gt;\n        &lt;/table&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n\n    &lt;div class=\"modal hide fade\" id=\"inventory\" &gt;\n&lt;form id=\"#ajax_form_modal_result\" class=\"well\" method=\"post\" action=\"\"&gt;\n &lt;div id=\"ajax_form_modal_result_div\"&gt;\n\n\n    &lt;div class=\"modal-header\"&gt;\n    &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"&gt;&amp;times;&lt;/button&gt;\n    &lt;h3&gt;Add units&lt;/h3&gt;\n    &lt;/div&gt;\n    &lt;div class=\"modal-body\"&gt;\n        {% csrf_token %}\n         {{inventory.as_p}}\n\n    &lt;/div&gt;\n    &lt;div class=\"modal-footer\"&gt;\n    &lt;button class=\"btn\" data-dismiss=\"modal\" aria-hidden=\"true\"&gt;Close&lt;/button&gt;\n    &lt;input class=\"btn btn-primary\" type=\"submit\" value=\"Save\" /&gt;\n\n    &lt;/div&gt;\n\n   &lt;/div&gt;\n&lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n"},{"tags":["python","django","web"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":106,"score":2,"question_id":12815133,"title":"Django web server hangs after it started a daemon","body":"<p>I use Django develpment server to start a daemon, it performs all the commands from the views.py, but web page hangs. Daemon is starting normally but web page hanging needs to be fixed. I work under Red Hat Enterprise Linux 6.3.</p>\n\n<p>To make sure that it's not my or my daemon mistake I performed the following test:</p>\n\n<p>1) I created new Django project \"djtesting\", where created one views.py file with the following code (it starts httpd daemon):</p>\n\n<pre><code>from django.http import HttpResponse\nimport subprocess\n\ndef hello(request):\n    res = subprocess.call(\"/usr/sbin/httpd\")\n    return HttpResponse(\"Testing.\")\n</code></pre>\n\n<p>2) Added this function to urls.py:</p>\n\n<pre><code>from django.conf.urls.defaults import patterns, include, url\nfrom djtesting.views import hello\n\nurlpatterns = patterns('',\n    ('^hello/$', hello),\n    )\n</code></pre>\n\n<p>3) Then I started web server with \"python manage.py runserver 192.168.1.226:8000\" and open web page with \"http://192.168.1.226:8000/hello/\" in browser. It shows \"Testing\" message and then hangs (starts loading and hangs on this) although daemon started normally. But if to stop the daemon with \"/etc/init.d/httpd stop\" the web page stops loading. It seems that the server is waiting until the daemon finish working, but I need just to start it without waiting until it ends.</p>\n\n<p>I've tried another ways to run a daemon (one line per one attempt of course) but with the same poor result:</p>\n\n<pre><code>thread.start_new_thread(os.system, ('/usr/sbin/httpd',))\nprocess = subprocess.Popen(\"/usr/sbin/httpd\", stdout=subprocess.PIPE, stdin=subprocess.PIPE, shell=True)\nres = subprocess.call([\"/usr/sbin/httpd\", \"&amp;\"])\nres = subprocess.Popen(\"/usr/sbin/httpd\")\nres = os.system(\"/usr/sbin/httpd &amp;\")\nres = os.spawnl(os.P_NOWAITO, '/usr/sbin/httpd', '&amp;')\n</code></pre>\n\n<p>I've found the similar question but I cannot use start-stop-daemon since I work under RHEL6.3:\n<a href=\"http://stackoverflow.com/questions/4949727/why-hangs-the-web-page-after-it-started-a-daemon-on-the-underlying-server?lq=1\">Why hangs the web page after it started a daemon on the underlying server?</a></p>\n"},{"tags":["django","replace","highcharts"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12904369,"title":"using replace to produce javascript code, django","body":"<p>I want to use highcharts with my django site but it requires a comlex javascript code such as below.\nSo I wanted to get this script in my python code and replace apropriate portions then write it in my template, first question is, is this a dump way to do that for a person not knowing javascript. I can read it tough.</p>\n\n<p>Second question is, Why I cant replace this string. Lets say this string is a variable like this.</p>\n\n<p>lineChartsTemplate = \"\"\"</p>\n\n<p>...</p>\n\n<p>...</p>\n\n<p>\"\"\"</p>\n\n<p>if I try and do </p>\n\n<p>lineChartsTemplate .replace('dataCategory', dataCategory)</p>\n\n<p>it basically suppossed to change dataCategory text with my dataCategory variable, but no such luck.</p>\n\n<p>I need guidance here. thx.</p>\n\n<pre><code>$(function () { \nvar chart = new Highcharts.Chart({\n    chart: {\n        renderTo: 'container',\n        type: 'bar'\n    },\n    xAxis: {\n        categories: dataCategory\n    },\n    yAxis: {   \n    },\n    legend: {\n        layout: 'vertical',\n        floating: true,\n        backgroundColor: '#FFFFFF',\n        align: 'right',\n        verticalAlign: 'top',\n        y: 60,\n        x: -60\n    },\n    tooltip: {\n        formatter: function() {\n            return '&lt;b&gt;'+ this.series.name +'&lt;/b&gt;&lt;br/&gt;'+\n                this.x +': '+ this.y;\n        }\n    },\n    plotOptions: {\n    },\n    series: [{\n        data: dataList ,      \n        name : 'Satışlar'}]\n});\n});\n</code></pre>\n"},{"tags":["django","solr","django-haystack","haystack"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":12890165,"title":"Selective sorting in solr","body":"<p>I have many documents indexed into Solr. I am now facing a requirement where the search results should be returned sorted based on their <code>scores</code>. In the <strong>case of non-exact matches</strong>, if there is a tie, another level of sorting is to be applied on a field called <code>priority</code>.</p>\n\n<p>I am using solr with django-haystack in django 1.4.</p>\n\n<p>What can/should I do to achieve my requirement?</p>\n"},{"tags":["django"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":455,"score":4,"question_id":7287584,"title":"How do you rollback during Django shell session after causing DatabaseError?","body":"<p>I used to know how to do this, but I forgot.  Sometimes, while using the Django shell, you make a mistake and cause the transaction to become aborted.  After that, any further queries you do will result in DatabaseError: current transaction is aborted, commands ignored until end of transaction block.  However, I think there is a way to rollback the transaction when this happens manually so you don't have to restart your session.  Can anyone tell me what it is?</p>\n\n<p>This bug report (https://code.djangoproject.com/ticket/10813) makes reference to the technique but doesn't explain it.  Running django.db.transaction.rollback results in \"TransactionManagementError: This code isn't under transaction management\".</p>\n"},{"tags":["python","django","forms","foreign-keys","readonly"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":12902365,"title":"Making initialized foreign key field as read-only in the form","body":"<p>I have a foreign key field in my form, initialized with:</p>\n\n<pre><code>form=myform(intial= {'val':abc.objects.get(pk=id)})\n</code></pre>\n\n<p>I have tried the following set of codes individually to make the field \"val\" as a read only value.</p>\n\n<pre><code>form.fields['val'].widget = forms.HiddenInput()\nform.fields['val'].widget.attrs['readonly'] = True\nform.fields['val'].widget.attrs['disabled'] = True\nform.fields['val'].widget.attrs['disabled'] = 'disabled'\nform.fields['val'].widget.attrs['disabled'] = False\nform.fields['val'].widget.attrs['display_only'] = True\nform.fields['val'].widget.attrs['editable'] = False\n</code></pre>\n\n<p>Only <code>HiddenInput</code> worked but it didn't show the field in the form, while <code>disabled</code> showed an error. <code>readonly</code> worked on all fields except the foreign key field.</p>\n"},{"tags":["django","django-templates","sorl-thumbnail"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12902099,"title":"Setting dynamic crop on sorl.thumnail","body":"<p>I have added a field on my model for specifying where the thumbnail should crop from, but I can't seem to add that to the template tag.</p>\n\n<p>Here is how I do it now:</p>\n\n<pre><code>  {% if entry.main_image.crop_value == \"center\" %}\n   {% thumbnail entry.main_image.image \"350x100\" crop=\"center\" as im %}\n        &lt;a href=\"{{ entry.get_absolute_url }}\"&gt;&lt;img src=\"{{ im.url }}\" width=\"{{ im.width }}\" height=\"{{ im.height }}\" alt=\"\"&gt;&lt;/a&gt;\n    {% endthumbnail %}\n  {% elif entry.main_image.crop_value == \"top\" %}\n   {% thumbnail entry.main_image.image \"350x100\" crop=\"top\" as im %}\n        &lt;a href=\"{{ entry.get_absolute_url }}\"&gt;&lt;img src=\"{{ im.url }}\" width=\"{{ im.width }}\" height=\"{{ im.height }}\" alt=\"\"&gt;&lt;/a&gt;\n    {% endthumbnail %}\n  {% elif entry.main_image.crop_value == \"bottom\" %}\n   {% thumbnail entry.main_image.image \"350x100\" crop=\"bottom\" as im %}\n        &lt;a href=\"{{ entry.get_absolute_url }}\"&gt;&lt;img src=\"{{ im.url }}\" width=\"{{ im.width }}\" height=\"{{ im.height }}\" alt=\"\"&gt;&lt;/a&gt;\n    {% endthumbnail %}\n  {% endif %}\n</code></pre>\n\n<p>This can't be the best way of doing it?</p>\n"},{"tags":["python","django","json"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":12887785,"title":"How to fix a TypeError in django related to parsing JSON?","body":"<p>I get a TypeError displaying in the browser when I run the code below.  The error comes at the last line and says 'NoneType' object is not subscriptable (I am trying to get all the urls for all the items).  However it is odd because in the command line, all the urls in the feed get printed.  Any ideas on why the items are getting printed in the command line but showing an error in the browser?  How do I fix this?</p>\n\n<pre><code>#reddit parse\ntry:\n    f = urllib.urlopen(\"http://www.reddit.com/r/videos/top/.json\");\nexcept Exception:\n    print(\"ERROR: malformed JSON response from reddit.com\")\nreddit_posts = json.loads(f.read().decode(\"utf-8\"))[\"data\"][\"children\"]\nreddit_feed=[]\nfor post in reddit_posts:\n    if \"oembed\" in post['data']['media']:\n        print post[\"data\"][\"media\"][\"oembed\"][\"url\"]\n        reddit_feed.append(post[\"data\"][\"media\"][\"oembed\"][\"url\"])  \nprint reddit_feed\n</code></pre>\n\n<h1>edit</h1>\n\n<pre><code>if post[\"data\"][\"media\"][\"oembed\"][\"url\"]:\n    print post[\"data\"][\"media\"][\"oembed\"][\"url\"]\n</code></pre>\n"},{"tags":["python","django","django-views","httpresponse"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":84,"score":0,"question_id":12891324,"title":"The view didn't return an HttpResponse object","body":"<p>This is the error I am getting: The view myapp.views.view_page didn't return an HttpResponse object</p>\n\n<p>Can anyone see what I'm doing wrong here? I can't seem to figure out why I would be getting that exception since I am returning an HttpResponseRedirect.</p>\n\n<p>views.py</p>\n\n<pre><code>from myapp.models import Page\nfrom django.shortcuts import render_to_response\nfrom django.http import HttpResponseRedirect\nfrom django.template import Template, RequestContext\nfrom django.core.context_processors import csrf\n\ndef view_page(request, page_name):\n        try:\n                    page = Page.objects.get(pk=page_name)\n        except Page.DoesNotExist:\n                    return render_to_response(\"create.html\", {\"page_name\" :page_name},context_instance=RequestContext(request))\n\n                    content=page.content\n                    return render_to_response(\"view.html\", {\"page_name\" :page_name , \"content\" :content},context_instance=RequestContext(request))\n\ndef edit_page(request, page_name):\n        try:\n                    page = Page.objects.get(pk=page_name)\n                    content=page.content\n        except Page.DoesNotExist:\n                    content = \"\"\n                    return render_to_response(\"edit.html\", {\"page_name\" :page_name, \"content\" :content},context_instance=RequestContext(request))         \n\ndef save_page(request, page_name):\n                content = request.POST[\"content\"]\n        try:\n                    page = Page.objects.get(pk=page_name)\n                    page.content=content\n\n        except Page.DoesNotExist:\n                    page = Page(name=page_name, content=content)\n                    page.save()\n                    return HttpResponseRedirect(\"/myproject/\" + page_name + \"/\")\n</code></pre>\n"},{"tags":["python","django","django-generic-views"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":170,"score":1,"question_id":12304050,"title":"Django Tutorial: Generic Views. Attribute Error","body":"<p>I'm at the last part of <a href=\"https://docs.djangoproject.com/en/1.4/intro/tutorial04/\" rel=\"nofollow\">this</a> tutorial.</p>\n\n<pre><code>from django.conf.urls import patterns, include, url\nfrom django.views.generic import DetailView, ListView\nfrom polls.models import Poll\n\nurlpatterns = patterns('',\n    url(r'^$',\n        ListView.as_view(\n            queryset=Poll.objects.order_by('-pub_date')[:5],\n            context_object_name='latest_poll_list',\n            template_name='polls/index.html')),\n    url(r'^(?P&lt;pk&gt;\\d+)/$',\n        DetailView.as_view(\n            model=Poll,\n            template_name='polls/detail.html')),\n    url(r'^(?P&lt;pk&gt;\\d+)/results/$',\n        DetailView.as_view(\n            model=Poll,\n            template_name='polls/results.html'),\n        name='poll_results'),\n    url(r'^(?P&lt;poll_id&gt;\\d+)/vote/$', 'polls.views.vote'),\n)\n</code></pre>\n\n<p>The ListView works, but when I visit a url with DetailView, I get.</p>\n\n<pre><code>AttributeError at /polls/2/\nGeneric detail view DetailView must be called with either an object pk or a slug.\nRequest Method: GET\nRequest URL:    http://127.0.0.1:8000/polls/2/\nDjango Version: 1.4.1\nException Type: AttributeError\nException Value:    \nGeneric detail view DetailView must be called with either an object pk or a slug.\nException Location: /home/yasith/coding/django/django-tutorial/lib/python2.7/site-packages/django/views/generic/detail.py in get_object, line 46\nPython Executable:  /home/yasith/coding/django/django-tutorial/bin/python2\nPython Version: 2.7.3\n</code></pre>\n\n<p>I'm not sure what I'm doing wrong. Any help would be appreciated.</p>\n\n<p>EDIT: Add the main urls.py</p>\n\n<pre><code>from django.conf.urls import patterns, include, url\n\nfrom django.contrib import admin\nadmin.autodiscover()\n\nurlpatterns = patterns('',\n    url(r'^polls/', include('polls.urls')),\n    url(r'^admin/', include(admin.site.urls)),\n)\n</code></pre>\n"},{"tags":["django","amazon-s3","boto","django-storage"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12900257,"title":"Django media uploads to AS3","body":"<p>I'm trying to upload all the Django media files (uploaded from the admin panel) to Amazon S3. So settings file look something like this :</p>\n\n<pre><code>INSTALLED_APPS = (\n'django.contrib.auth',\n'django.contrib.contenttypes',\n'django.contrib.sessions',\n'django.contrib.sites',\n'django.contrib.messages',\n'django.contrib.staticfiles',\n'django.contrib.admin',\n'tastypie',\n'core',\n'advertisment',\n'storages',\n\n)\n\n  DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'\n  AWS_ACCESS_KEY_ID = 'xxx' \n  AWS_SECRET_ACCESS_KEY = 'xxx'\n  AWS_STORAGE_BUCKET_NAME = 'media'\n  MEDIA_URL = 'https://s3.amazonaws.com/%s/' % AWS_STORAGE_BUCKET_NAME\n</code></pre>\n\n<p>and when I try to upload a file from the admin panel, i get the following error:</p>\n\n<pre><code>S3ResponseError: 403 Forbidden\n</code></pre>\n\n<p>I checked <a href=\"http://stackoverflow.com/questions/10854095/boto-exception-s3responseerror-s3responseerror-403-forbidden\">this</a> answer but still didn't help </p>\n"},{"tags":["django","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12884338,"title":"How to use handlers for django tastypie to make apis for UserProfile?","body":"<pre><code>class UserProfile(models.Model):\n    \"\"\"\n    Extending the Django User.\n\n\n    \"\"\"\n\n    user = models.OneToOneField(User,unique=True)\n    image_id = models.CharField(max_length=50,blank=True)\n\n    is_email_validated = models.BolleanField(default = False)\n\n    followers_count = models.IntegerField(max_length=5,default=0,blank=True,null=True)\n\n    following_users = ModelListField()\n    follower_users = ModelListField()\n\n    def __unicode__(self):\n        return u\"%s\" % self.user.first_name\n\n    def full_name(self):\n        return u\"%s\" % self.user.first_name + '' + self.user.last_name\n\n    def email(self):\n        return self.user.email\n\n    def username(self):\n        return self.user.username\n\n    def books_count(self):\n        return len(self.user.get_profile().books)\n\n    def create_user_profile(sender,instance,created,**kwargs):\n        if created:\n            UserProfile.objects.create(user=instance)\n            action.send(type=\"create_user\",actor=instance,target=instance)\n    post_save.connect(create_user_profile,sender=User)\n</code></pre>\n\n<p>Thus, how do I make an api out of it? Do I've to write handlers?(Quite confused how Django tastypie works in such situations.)</p>\n\n<p>I could write handlers to return data for an api call like GET /users//following. But is this how it is done in tastypie? If yes, how do I connect the handler with the API?</p>\n\n<p>Edit:\nSomething like this can be done in django-piston like this:</p>\n\n<pre><code>from piston.handler import BaseHandler\nfrom piston.utils import rc\n\nfrom app.apps.user.models import User, UserProfile\n\n\nclass UserHandler(BaseHandler):\n    model = User\n\n    def read(self, request, user_id=None, action=None):\n        \"\"\"\n        GET /users/\n\n\n        following - GET /users/&lt;user_id&gt;/following\n        followers - GET /users/&lt;user_id&gt;/followers\n        user profile - GET /users/&lt;user_id&gt;/        \n        \"\"\"\n\n\n        if action ==\"following\":\n            return self.following(request, user_id)\n        elif action == \"followers\":\n            return self.followers(request, user_id)\n        else:\n            return self.get_user_profile(request, user_id)      \n\n    def get_user_profile(self, request, user_id):\n        \"\"\"\n        User Profile\n        GET /users/&lt;user_id&gt;/\n        \"\"\"\n        user = User.objects.get(pk=user_id)\n\n        user_session = request.user\n        user_session_following = user_session.get_profile().following_users\n\n        if user.id in user_session_following:\n            follow_status=True\n        else:        \n            follow_status=False\n\n        return user_actions.get_user_profile(user, follow_status)\n</code></pre>\n"},{"tags":["django","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12901154,"title":"Django, not seeing request.path. Am using RequestContext","body":"<p>I am trying to get request.path in my template but I get nothing. Everything else on the page works fine. I have done:</p>\n\n<p>In views.py</p>\n\n<pre><code>from django.template import RequestContext\n\nreturn render_to_response('frontpage.html', {}, context_instance=RequestContext(request))\n</code></pre>\n\n<p>In my template frontpage.html</p>\n\n<pre><code>{{ request.path  }}\n</code></pre>\n\n<p>What else am I missing? I'd post some code, but I don't know were to begin.</p>\n\n<p>Edit: Am using localhost in case that matters.</p>\n"},{"tags":["javascript","jquery","django","django-templates"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":112,"score":1,"question_id":12900744,"title":"Auto load content on scroll down","body":"<p>I am creating a blog on django/webfaction. My hompage currently displays 4 posts by default (posts are limited to 4 on <code>queryset</code> in <code>urls.py</code>). Now I would like to load four more posts once user reaches the bottom of the page and keep on continuing that until last post is reached. How to achieve this? </p>\n"},{"tags":["python","django","logging"],"answer_count":1,"favorite_count":18,"up_vote_count":29,"down_vote_count":0,"view_count":6557,"score":29,"question_id":5438642,"title":"Django Setup Default Logging","body":"<p>I can't seem to figure out how to setup a \"default\" logger for my Django installation. I would like to use Django 1.3's new <code>LOGGING</code> setting in <code>settings.py</code>.</p>\n\n<p>I've looked at the <a href=\"http://docs.djangoproject.com/en/1.3/topics/logging/#an-example\" rel=\"nofollow\">Django Logging Doc's example</a>, but it looks to me like they only setup handlers which will do logging for particular loggers. In the case of their example they setup handler for the loggers named 'django','django.request', and 'myproject.custom'.</p>\n\n<p>All I want to do is setup a default <code>logging.handlers.RotatingFileHandler</code> which will handle all loggers by default. i.e., if I make a new module somewhere in my project and it is denoted by something like: <code>my_app_name.my_new_module</code>, I should be able to do this and have all logging goto the rotating file logs.</p>\n\n<pre><code># In file './my_app_name/my_new_module.py'\nimport logging\nlogger = logging.getLogger('my_app_name.my_new_module')\nlogger.debug('Hello logs!') # &lt;-- This should get logged to my RotatingFileHandler that I setup in `settings.py`!\n</code></pre>\n"},{"tags":["django","django-admin","django-cms","django-grappelli"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":193,"score":0,"question_id":12025231,"title":"Django-CMS with Grappelli messed up the layout for admin cms pages","body":"<p>I just installed grappelli into a Django-CMS site by following the standard routine - <code>pip install django-grappelli</code>, add it to <code>INSTALLED_APPS</code>, add in the url pattern, then <code>syncdb</code> and <code>collectstatic</code>. However, although all the other pages in the admin area look great with the new \"theme\", the layout for CMS Pages settings in Django-CMS (the drag 'n drop interface) are all messed up.</p>\n\n<p>Why is that, and is there a fix for this, yet?</p>\n\n<p>Thanks.</p>\n\n<p>EDIT:\nThanks, Brandon for your reply. Is there a way to completely uninstall grappelli without causing any problems? Right now, the default admin's javascripts are messed up after I got rid of grappelli from <code>INSTALLED_APPS</code>. In particular, these are from the console:</p>\n\n<pre><code>Uncaught ReferenceError: grp is not defined actions.js:134\nUncaught ReferenceError: django is not defined admincompat.js:1\nUncaught ReferenceError: django is not defined collapse.js:24\nUncaught ReferenceError: django is not defined :8000/admin/cms/page/2/:942\n</code></pre>\n"},{"tags":["django","integration","django-cms","django-grappelli"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1343,"score":2,"question_id":5605000,"title":"django-cms + grappelli","body":"<p><br>\nIf anyone knows how to make django-cms play with grappelli, please give some tips</p>\n"},{"tags":["python","django","oauth-2.0"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12338849,"title":"Sending an email using oauth and send_mail in django","body":"<p>I have followed the steps in:\n<a href=\"http://code.google.com/p/google-mail-xoauth-tools/wiki/XoauthDotPyRunThrough\" rel=\"nofollow\">http://code.google.com/p/google-mail-xoauth-tools/wiki/XoauthDotPyRunThrough</a></p>\n\n<p>and generated oauth_token, oauth_token_secret, and xoauth as well.</p>\n\n<p>Now the qustion is - how can I send an email with information above?\nI have configured smtp host, and port, which works, but I would rather not like to process original password.</p>\n\n<p>I mean something like:</p>\n\n<pre><code>send_mail('Subject here', 'mesage here', 'me@gmail.com',\n        ['you@gmail.com','him@gmail.com'], fail_silently=False,\n        auth_user=\"me@gmail.com\", auth_password=\"password\")\n</code></pre>\n\n<p>works perfectly.</p>\n\n<p>Would be grateful for any help.</p>\n"},{"tags":["python","django","celery","django-celery","celery-task"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":81,"score":2,"question_id":12900023,"title":"How can I run a celery periodic task from the shell manually?","body":"<p>I'm using celery and django-celery. I have defined a periodic task that I'd like to test. Is it possible to run the periodic task from the shell manually so that I view the console output?</p>\n\n<p>I read the documentation for celery but couldn't find this. Currently I have to resort to logging everything to view whats going wrong.</p>\n\n<p>Thanks</p>\n"},{"tags":["django","django-models","concurrency","transactions","atomic"],"answer_count":9,"favorite_count":24,"up_vote_count":24,"down_vote_count":0,"view_count":7999,"score":24,"question_id":320096,"title":"Django: How can I protect against concurrent modification of database entries","body":"<p>If there a way to protect against concurrent modifications of the same data base entry by two or more users?</p>\n\n<p>It would be acceptable to show an error message to the user performing the second commit/save operation, but data should not be silently overwritten.</p>\n\n<p>I think locking the entry is not an option, as a user might use the \"Back\" button or simply close his browser, leaving the lock for ever.</p>\n"},{"tags":["django","facebook","facebook-graph-api","django-facebook","fandjango"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12899956,"title":"Django Lib to create Facbook Canvas App","body":"<p>I found at least three libraries which can be used to create Facebook Canvas Apps on Django:</p>\n\n<ol>\n<li>PythonForFacebook - <a href=\"https://github.com/pythonforfacebook/django-facebook\" rel=\"nofollow\">https://github.com/pythonforfacebook/django-facebook</a></li>\n<li>Fandjango - <a href=\"https://github.com/jgorset/fandjango\" rel=\"nofollow\">https://github.com/jgorset/fandjango</a></li>\n<li>Django For Facebook (fashiolista.com) - <a href=\"https://github.com/tschellenbach/Django-facebook\" rel=\"nofollow\">https://github.com/tschellenbach/Django-facebook</a></li>\n</ol>\n\n<p>Which one of these do you prefer for this task? Maybe there are some other more robust libs outhere? I'm a bit confused which one to choose.</p>\n"},{"tags":["javascript","jquery","django"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":90,"score":1,"question_id":12894538,"title":"Multiple JQuery countdowns in a loop with Django","body":"<p>I'm creating a sport app with django. I would like to display a list of matches with a countdown for each match.</p>\n\n<p>For now, I only have one countdown. I use this Jquery countdown: <a href=\"http://keith-wood.name/countdown.html\" rel=\"nofollow\">http://keith-wood.name/countdown.html</a> (that goes to the new year). I have a loop to display my matches. So the question is how can I insert the countdown into the loop and make it go to the DateTime of my objects \"match\"?</p>\n\n<p>Here is my template:</p>\n\n<pre><code>&lt;head&gt;\n&lt;meta http-equiv=\"Content-type\" content=\"text/html; charset=utf-8\" /&gt;\n\n&lt;script type=\"text/javascript\"     src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;style type=\"text/css\"&gt;@import \"/Users/marc-a   antoine.lacroix/Desktop/Jquery/jquery.countdown.package-1.6.0/jquery.countdown.css\";&lt;/style&gt;\n\n&lt;script type=\"text/javascript\" src=\"http://keith-wood.name/js/jquery.countdown.js\"&gt;    &lt;/script&gt;\n&lt;script language=\"javascript\"&gt;\n\n$(document).ready(function(){\n\nvar newYear = new Date(); \nnewYear = new Date(newYear.getFullYear() + 1, 1 - 1, 1); \n$('#defaultCountdown').countdown({until: newYear}); \n\n});\n&lt;/script&gt;\n\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;div style=\"float:left\"&gt;\n{% for match in matches %}\n&lt;div&gt;    \n    &lt;p&gt;{{ match }}&lt;/p&gt;\n    &lt;p&gt; {{match.real_start}} &lt;p&gt;\n    &lt;a href=\"{{ match.get_absolute_url_grille }}\"&gt;Go&lt;/a&gt;\n   &lt;/div&gt;\n{% endfor %}\n&lt;/div&gt;\n\n\n&lt;div id=\"defaultCountdown\"&gt; &lt;/div&gt;\n\n\n&lt;/body&gt;\n</code></pre>\n\n<p>\"matches\" is the list containing every matches. \"real_start\" is the DateTime of my objects \"match\"</p>\n\n<p>My views.py is simply: </p>\n\n<pre><code> def page(request):\n     matches = Match.live_matches.all()\n\n     return render_to_response('myhtml.html', {'matches': matches}, context_instance=RequestContext(request))\n</code></pre>\n\n<p>So I don't know how to import my \"real_start\" DateTime into the countdown and how to insert this countdown into the loop.</p>\n\n<p>Here is my current code:</p>\n\n<pre><code>&lt;script language=\"javascript\"&gt;\n\n\n  $(function(){\n  $('.match_wrap').each(function(){\n   var match_start=$(this).data('match_start');      \n   $(this).find('.matchTimer').countdown({until: match_start});\n  });\n  })\n&lt;/script&gt;\n\n&lt;/head&gt;\n&lt;body&gt;\n\n &lt;div style=\"float:left\"&gt;\n {% for match in matches %}\n &lt;/br&gt;&lt;/br&gt;\n &lt;div class=\"match_wrap\" data-match_start=\"{{ match.real_start|date:\"M j, Y\" }}\"&gt;     \n    &lt;p&gt;{{ match }}&lt;/p&gt;\n    &lt;p&gt; {{match.real_start}} &lt;p&gt;\n    &lt;div&gt;\n        &lt;ul&gt;\n        {% for team in match.teams %}\n            &lt;li&gt;\n                &lt;img src=\"{{ team.logo.url }}\"&gt;\n            &lt;/li&gt;\n        {% endfor %}\n        &lt;/ul&gt;\n    &lt;/div&gt;\n    &lt;a href=\"{{ match.get_absolute_url_grille }}\"&gt;Go&lt;/a&gt;\n    &lt;div class=\"matchTimer\"&gt; &lt;/div&gt;\n    &lt;/div&gt;\n{% endfor %}\n&lt;/div&gt;\n&lt;/br&gt;&lt;/br&gt;\n</code></pre>\n\n<p>I also tried:     </p>\n\n<pre><code> &lt;head&gt;\n &lt;meta http-equiv=\"Content-type\" content=\"text/html; charset=utf-8\" /&gt;\n\n &lt;script type=\"text/javascript\" src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"http://keith-wood.name/js/jquery.countdown.js\"&gt;&lt;/script&gt;\n\n\n &lt;script language=\"javascript\"&gt;\n\n\n  $('.match_countdown').each(function() {\n  var self = $(this),\n    date_string = self.attr('data-date'),\n    date = new Date.parse(date_string);\n  self.countdown({until: date});\n});\n&lt;/script&gt;\n\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;div style=\"float:left\"&gt;\n{% for match in matches %}\n&lt;/br&gt;&lt;/br&gt;\n&lt;div class=\"match_countdown\" data-date=\"{{ match.real_start|date:'M j, Y' }}\"&gt;&lt;/div&gt;  \n    &lt;p&gt;{{ match }}&lt;/p&gt;\n    &lt;p&gt; {{match.real_start}} &lt;p&gt;\n    &lt;div&gt;\n        &lt;ul&gt;\n        {% for team in match.teams %}\n            &lt;li&gt;\n                &lt;img src=\"{{ team.logo.url }}\"&gt;\n            &lt;/li&gt;\n        {% endfor %}\n        &lt;/ul&gt;\n    &lt;/div&gt;\n    &lt;a href=\"{{ match.get_absolute_url_grille }}\"&gt;Go&lt;/a&gt;\n&lt;/div&gt;\n{% endfor %}\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p></p>\n"},{"tags":["python","django","virtualenv","pip","setuptools"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12899421,"title":"How to setup django application for reuse?","body":"<p>disclaimer: I am relatively new to setuputils, pip virtualenv , so please be patient, and put extra effort in the details as i have no real experirnce in that stuff</p>\n\n<p>I am using Django for a while now, and preparing to launch my first application into production, i broke my project into several applications , and i a preparing for the next project, and trying to figure out how to use these application in my next project</p>\n\n<p>first, as recommended , i am using pip and virtualenv for both projects</p>\n\n<p>Please Note: I want to keep the application only locally on my system(not in PyPI) and be able to edit it and modify it and immediately see the effect in both projects, so i am using the -e option in requirements.txt</p>\n\n<p>my first project, say, ProjectA contains an application called account_manager which i want to use in my next project ProjectB</p>\n\n<p>so, i setup a virtualenv for ProjectB with requirements.txt:</p>\n\n<pre><code>Django==1.4.1\n-e /path/to/account_manager\n</code></pre>\n\n<p>then i added the account_manager to the list of INSTALLED_APPS, but when i run:</p>\n\n<pre><code>manage.py runserver 8000\n</code></pre>\n\n<p>I got: No module account_manager</p>\n\n<p>After some research, i find that i may have to write a setup.py file for account_manager, so i wrote one like this</p>\n\n<pre><code>from distutils.core import setup\nfrom setuptools import find_packages\n\nsetup(\n    name='account_manager',\n    version='0.1.0',\n    author='Jose Fred',\n    author_email='jrh@example.com',\n    packages=find_packages(),\n    license='LICENSE.txt',\n    description='Useful towel-related stuff.',\n    long_description=open('README.txt').read(),\n    install_requires=[\n        \"Django &gt;= 1.4.1\"\n         ],\n)\n</code></pre>\n\n<p>then from ProjectB virtualenv, i run pip install -r requirements.txt\nwhich says: account_manager successfully installed</p>\n\n<p>But when i run</p>\n\n<pre><code>manage.py runserver 8000\n</code></pre>\n\n<p>again,I got: No module account_manager</p>\n\n<p>Now what? what i am doing wrong, what is the missing step? what i supposed to do?</p>\n\n<p>Thanks</p>\n"},{"tags":["django","django-templates","django-template-tags"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":12899541,"title":"Django template: use of multiple block tags in same base","body":"<p>I want to make sure I have understood this correctly before I change all my templates. I have a base.html with my overall layout. This has a {% block content %}. Each of my content pages extends \"base.html\" and is surrounded by the block tag. This works great. My view returns the rendered content page and it's placed nicely in the layout.</p>\n\n<p>Now I have also created a menu bar in menubar.html The menu should be the same for every page except that the color of the selected page/content is different. So it needs to know what content got loaded.   </p>\n\n<p>My base.html now also has a {% block menubar %}</p>\n\n<p>I am about to open up all of my content templates and add the following to them:</p>\n\n<pre><code>{% include \"menubar.html\" %}\n</code></pre>\n\n<p>Then, in menubar.html, I will surround the menu with block tags. Is that correct? I thought the point of the block system was that somehow things could be controlled more from the base.html, without changing all my templates. </p>\n"},{"tags":["python","ruby-on-rails","ruby","django","coverage.py"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":87,"score":2,"question_id":12870777,"title":"How to achieve coverage reports like Ruby-Rails in Django-Python with coverage.py?","body":"<p>We do coverage reports with the famous and possible the only solution in <code>python</code> world i.e. <code>coverage.py</code></p>\n\n<p>Now,\nWhat we acheive with <code>coverage.py</code> is this : \n<img src=\"http://i.stack.imgur.com/IlbLC.png\" alt=\"enter image description here\"></p>\n\n<p>Where as what we could achieve with <code>ruby-rails</code> is :\n<img src=\"http://i.stack.imgur.com/7UKRa.jpg\" alt=\"enter image description here\"></p>\n\n<p><strong>So, my question is how do you get more detailed coverage reports with <code>coverage.py</code> ?</strong></p>\n\n<p>[ Or any other tool in the python django world ]</p>\n\n<p><strong>Note:</strong></p>\n\n<ul>\n<li><code>coverage run manage.py test --settings=project.test_settings</code></li>\n<li>Generate the report by <code>coverage html</code></li>\n<li>Should / Can I pass in extra parameters to <code>coverage</code> while generating report ?</li>\n</ul>\n"},{"tags":["django","sorting","django-queryset","annotate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12897368,"title":"Django: Ordering Queryset with a specific filtered field","body":"<p>I need to sort the items queryset, introducing the obsolescence of content. (Content is ManytoMany related with Item class).\nIs it possible to filter the contents by pub_date within an annotation?</p>\n\n<p>My code works here for every content publication date. I need the annotate function to work for \"pub_date > '2012-10-10'\" (for example).</p>\n\n<pre><code>self.queryset = Item.objects.all()    \nself.queryset = self.queryset.annotate(\n                Count(\"content\")).order_by(\"-content__count\")\n</code></pre>\n\n<p>I tried to filter with the extra() function, which doesn't work:</p>\n\n<pre><code>self.queryset = self.queryset.extra(select={\n'content': \"pub_date &gt; '2012-10-10'\"}).annotate(\nCount(\"content\")).order_by(\"-content__count\")\n</code></pre>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12899407,"title":"ModelForm. Why my form is not filled with data from model?","body":"<p>Why my form is not filled with data from model?</p>\n\n<p>This is my model.py</p>\n\n<pre><code>class People(models.Model):\n    user = models.OneToOneField(User)\n    name = models.CharField(max_length=100)\n    address = models.CharField(max_length=255)\n</code></pre>\n\n<p>This is my forms.py</p>\n\n<pre><code>from django.forms import ModelForm \n\nclass EditForm(ModelForm):\n    class Meta:\n        model = People\n        exclude=('user',)\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>def edit_data(request):\n    user = request.user\n    people = People.objects.get(user=user)\n    form = EditForm(request.POST, instance = people)\n    if request.method == 'POST':\n        if form.is_valid():\n            form.save()\n        else:\n            print 'Error'\n    else:\n        form = EditForm()\n\n    return render_to_response('profile.html',{'form':form}, context_instance=RequestContext(request))\n</code></pre>\n\n<p>profile.html</p>\n\n<pre><code>&lt;form action=\"/profile/\" method=\"post\"&gt;{% csrf_token %}\n{{ form.as_p }}\n&lt;/form&gt;\n</code></pre>\n"},{"tags":["django","for-loop"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12897883,"title":"displaying (time )icons equal to duration value on django template","body":"<p>I want to display an icon image(of a clock ) several times to indicate the duration of time for an <code>Event</code> in my <code>django</code> app.The view only supplies a <code>datetime.datetime</code> value .I need to find out how many hours,minutes there are  from current datetime and display the icons mutiple number of times.If the datetime value is in the past nothing is to be displayed.</p>\n\n<p>Suppose,the difference between datetime1 and <code>datetime.datetime.now()</code> is 6 hours and 30 minutes</p>\n\n<p>I need to display 6 big icons(each indicating 1 hr) and 3 small icons (each indicating 10 minutes)\n<img src=\"http://i.stack.imgur.com/cPYa5.png\" alt=\"duration\"></p>\n\n<p>What is the correct way of doing this? I think I need to write a filter that returns the difference as a tuple say <code>hrminutes</code> (which looks like <code>(6,30)</code>) and use that tuple inside a for loop that goes like</p>\n\n<pre><code>{% for i in hrminutes.0 %}\n  &lt;img src=\"redcircle.jpg\" &gt;\n{% endfor %}\n\n{% for i in hrminutes.1 %}\n  &lt;img src=\"yellocircle.jpg\" &gt;\n{% endfor %}\n</code></pre>\n\n<p>But then for tag expects only a list! It cannot do <code>for i in 6</code></p>\n\n<p>Any idea how to do this..Is my only option calculating the hr,minute values in view and passing it with each <code>Event</code> object?</p>\n"},{"tags":["python","django","windows-7","bitnami"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12666234,"title":"BitNami DjangoStack not 'self contained', cannot run application","body":"<p>I installed the Windows (32bit) BitNami DjangoStack 1.4.1.0 and elected not to install the python that came with it as I already have Python 2.7 installed.</p>\n\n<p>I got the error below and also an internal server error when I clicked on the button in the introduction web page (so Appache is running ok)</p>\n\n<pre><code>enter code here\n[error] mod_wsgi (pid=3990): Target WSGI script '/opt/bitnami/apps/django/scripts/django.wsgi' cannot be loaded as Python module\n</code></pre>\n\n<p>I found a similar question but that related to installing on Amazon. Also following through the answers it appeared that the problem is that the wsgi had been compiled against the wrong python version.</p>\n\n<p>I then uninstalled BitNami and re-installed using the python version that was provided - still the same message.</p>\n\n<p>I don't see how the wrong python version can be the problem if the BitNami package is self contained, i.e. comes with all the bits needed to run.</p>\n\n<p>In case my previously installed version was causing the problem I remove it from the PATH environment variable.</p>\n\n<p>Also the documentation for Windows seems wrong. django.conf and django.wsgi are not where the docs say they are (\\Users\\user\\BitNami SDjangoStack projects\\apps). In fact the only thing in that directory is the new project I selected on installation - no apps directory. I found the files in the BitNami directories.</p>\n\n<p>Also when I typed python in the BitNami console I got python 2.7.3, not 2.7.2 which is listed in the installation guide.</p>\n\n<p>I thought this package would be wonderful to help me get a production Django site running. It is now ready in the development phase to go live for testing.</p>\n"},{"tags":["python","django","django-models"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":72,"score":4,"question_id":11561722,"title":"Django : What is the role of ModelState?","body":"<p>Sorry for not being this as programming question, but this caught my eye when I was trying to introspect my class objects.</p>\n\n<p>I found this</p>\n\n<pre><code>{'user_id': 1, '_state': &lt;django.db.models.base.ModelState object at 0x10ac2a750&gt;, 'id': 2, 'playlist_id': 8}\n</code></pre>\n\n<p>What is the role of <code>_state</code> and what <code>ModelState</code> does?</p>\n"},{"tags":["python","django","centos","bitnami"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12814973,"title":"Bitnami - /opt/bitnami/python/bin/.python2.7.bin: error while loading shared libraries: libreadline.so.5","body":"<p>I getting the below issue when firing up django or ipython notebook</p>\n\n<p><strong>/opt/bitnami/python/bin/.python2.7.bin: error while loading shared libraries: libreadline.so.5</strong></p>\n\n<p>However libreadline.so.5 exists in my system after locating it as shown below</p>\n\n<p><strong>root@linux:/opt/bitnami/scripts# locate libreadline.so.5\n/opt/bitnami/common/lib/libreadline.so.5\n/opt/bitnami/common/lib/libreadline.so.5.2</strong></p>\n\n<p>I have also exported the path in the environment variable (where the libreadlive.so.5 is located) but still does'nt seems to be resolving my issue (see below)</p>\n\n<p><strong>export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:$HOME/opt/bitnami/common/lib</strong></p>\n\n<p>Also there is a script which is being provided by bitnami which is located in /opt/bitnami/scripts/setenv.sh. But even after executing it still i am stuck.</p>\n\n<p>Anyone can help me with this</p>\n"},{"tags":["python","mysql","django","utf-8"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":12894658,"title":"django test database is not created with utf8","body":"<p>I am using <code>utf-8</code> general case insensitive for for mysql database, but <code>django</code> creates a test db with <code>latin collation</code> </p>\n\n<p>I have set this:</p>\n\n<pre><code>TEST_CHARSET=\"utf8_general_ci\"\n\nTEST_COLLATION=\"utf8_general_ci\"\n</code></pre>\n\n<p>In the settings file, but to no avail. </p>\n\n<p>What else should i do?</p>\n"},{"tags":["python","django","django-templates"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12896577,"title":"Combining two queryset into a template tag","body":"<p>I have two models news.article and portfolio.entry. Both models have a BooleanField for setting \"is_campaign\" to true.</p>\n\n<p>Im trying to write a custom templatetag so I can get the latest campaign article (There should only be one)</p>\n\n<p>Here is my templatetag: campaign_article.py</p>\n\n<pre><code>from itertools import chain\nfrom django import template\n\nfrom news.models import Article\nfrom portfolio.models import Entry\n\nregister = template.Library()\n\ndef get_campaign():\n        #Get the newest news article with is_campaign=True\n        article = Article.objects.filter(is_campaign=True).order_by('-pub_date')[:1]\n\n        #Get the newest portfolio entry with is_campaign=True\n        portfolio = Portfolio_entry.objects.filter(is_campaign=True).order_by('-pub_date')[:1]\n\n        #combine article, and entry and display only the newest\n        campaign_article = list(chain(article, portfolio))[:1]\n\n\n        return {'campaign_article': campaign_article}\n\n\n\nregister.tag('campaign', get_campaign)\n</code></pre>\n\n<p>I have tried this in my template:</p>\n\n<pre><code>{% load campaign_article %}\n{% for campaign_article in campaign %}\n\n{{ campaign_article.id }}\n\n{% endfor %}\n</code></pre>\n\n<p>But I don't get any output. Is this the wrong method ?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12896315,"title":"url should not change on submitting a form","body":"<p>i have this Django application in which when user request for \"localhost:8000/time/ ,it is shown html form input.html. </p>\n\n<pre><code>&lt;head&gt;\n\n&lt;!-- paste this in your footer --&gt;\n&lt;script type=\"text/javascript\"&gt; \n$(document).ready(function() {\n        $('#myForm').submit(function() { // catch the form's submit event\n            $.ajax({ // create an AJAX call...\n                data: $(this).serialize(),\n                type: $(this).attr('POST'), // \"post\"\n                url: $(this).attr('/poi/'), //  \"/poi/\"\n                success: function(response) { \n                    // do something here\n                }\n            });\n        return false;\n    });\n});\n&lt;/script&gt;\n&lt;!-- add jquery or it won't work --&gt;\n&lt;script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n        &lt;form action=\"/poi/\" method = \"post\"&gt;\n\n        &lt;!---------\n        first name :&lt;input type =\"text\" name =\"fname\"&gt;\n        last name:&lt;input type =\"text\" name =\"lname\"&gt;\n        ------&gt;\n\n        enter a days :&lt;input type =\"text\" name =\"days\"&gt;\n        &lt;br&gt;\n        &lt;input type=submit name=\"submit\" onclick=\"submit_function(); return false;\"&gt;\n        &lt;/form&gt;\n\n&lt;/body&gt;\n</code></pre>\n\n<p>when form is submitted user sees response.html page and URL is changed to  \"localhost:8000/poi/ is shown having </p>\n\n<p>urls.py </p>\n\n<pre><code>urlpatterns = patterns('',\n                            (r'^hello/$', hello),   \n                            ('^time/$', current_datetime),\n                            ('^poi/$', next_datetime),\n\n                        )\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>def current_datetime(request):  \n    return render_to_response('input.html')\n\n\ndef next_datetime(request):\n\n    now = datetime.datetime.now()\n    now_day = now.day\n    now_month = now.month\n    now_year = now.year\n\n    return render_to_response('response.html', {'now_day': now_day, 'now_month'}}\n</code></pre>\n\n<p>now i have to do same thing but the url should not change from \"localhost:8000/time/  to \"localhost:8000/poi/ \nbut it should be \"localhost:8000/time/</p>\n\n<p>how to accomplish that?</p>\n"},{"tags":["python","django","django-models","django-taggit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":12894154,"title":"Get all tags from taggit","body":"<p>How to get all the (unique) tags from django-taggit? I would like to display all the tags in a side bar.\nCurrently I am able to get all the tags for a particular post, but now I need to get all the unique tags in the entire blog.</p>\n\n<p>code in models.py:</p>\n\n<pre><code>from django.db import models\nfrom taggit.managers import TaggableManager\n\n# Create your models here.\nclass Post(models.Model):\n    title = models.CharField(max_length=100)\n    body = models.TextField()\n    created = models.DateTimeField()\n    tags = TaggableManager()\n</code></pre>\n"},{"tags":["javascript","python","django","static","amazon"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":12896739,"title":"How load Static Files in Models Admin File from Django?","body":"<p>I have my Django static files in Amazon Servers, and I trying to load these files in my Model Admin File, but its only work with absolute URLs.</p>\n\n<p>In my Django templates I load and call my static files with  </p>\n\n<pre><code>{% load admin_static %}\n&lt;script type=\"text/javascript\" src=\"{% static \"js/myfile.js\" %}\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>in settings.py i set this</p>\n\n<pre><code>STATIC_URL = 'https://s3.mydomain.com/static/'\n</code></pre>\n\n<p>and in my Model Admin, in moment, it only works with</p>\n\n<pre><code>class Media:\n    js = (\"https://s3.mydomain.com/static/myfile.js\",\n          \"https://s3.mydomain.com/static/myfile2.js\",)\n</code></pre>\n\n<p>How can I load these files only with the static file name?\nI trying </p>\n\n<pre><code>class Media:\n    js = (\"{% static \"js/myfile.js\" %}\",\n          \"{% static \"js/myfile2.js\" %}\",)\n</code></pre>\n\n<p>but doesn't work.</p>\n"},{"tags":["python","django","json"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":467,"score":4,"question_id":9643291,"title":"Import json file to Django model","body":"<p>I have a file in json format, with such a structure:</p>\n\n<pre><code>{\n    \"Admiralty Islands\": [\n        [\n            \"Up to 1 kg\",\n            \"5.00\"\n        ], \n        [\n            \"1 - 10 kg\", \n            \"10.00\"\n        ], \n    ], \n    \"Afghanistan\": [\n        [\n            \"Up to 1 kg\",\n            \"15.00\"\n        ], \n        [\n            \"1 - 10 kg\", \n            \"20.00\"\n        ], \n    ], \n...\n}\n</code></pre>\n\n<p>And a three models:</p>\n\n<pre><code>class Country(models.Model):\n    name = models.CharField(max_length=128, unique=True)\n\nclass Weight(models.Model):\n    name = models.CharField(max_length=128, unique=True)\n    min_weight = models.IntegerField()\n    max_weight = models.IntegerField()\n\nclass Shipping(models.Model):\n    country = models.ForeignKey(Country)\n    weight = models.ForeignKey(Weight)\n    price = models.DecimalField(max_digits=7, decimal_places=2)\n</code></pre>\n\n<p>What is the most correct way to import to the database using a json file?</p>\n\n<p>Should I convert the json file into fixture file? But what to do with relationships between tables?\nOr is it better to write the <code>view</code> like:</p>\n\n<pre><code>f = open('file.json', 'r')\nobj = simplejson.load(f)\n\nfor o in obj:\n    record = Country(name = o)\n    record.save()\n</code></pre>\n\n<p>But also can not figure out how to make relations between the <code>models</code>.</p>\n\n<p>Or is there an easier way?</p>\n\n<p>Thanks.</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12894201,"title":"django filter using two lists for two columns","body":"<p>I have a scenario where I have to match first name and last name against a list, but I cannot find a solution. For one record it works fine but for list it is not working.</p>\n\n<pre><code>user.objects.filter(firstname ='john',lastname='doe') it is working fine.\n</code></pre>\n\n<p>but in case of list:</p>\n\n<pre><code>list1 = ['john','mark','john']\nlist2 = ['doe','waugh','peter']\n</code></pre>\n\n<p>john peter is not available in db. but due to first match__ in, it brings the third     record. \nAlso, in db it has many records but it should return john doe and mark waugh. It should skip john peter. </p>\n\n<pre><code>user.objects.filter(firstname__in =list1,lastname__in=list2) \n</code></pre>\n"},{"tags":["python","django","csv","file-writing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12894426,"title":"python writing csv Django for loop","body":"<p>I'm a bit stuck with writing a csv file using the python csv library. I'm using Django to get the information into objects out of a database.</p>\n\n<p>What I have now, works but is not yet complete:</p>\n\n<pre><code>writer.writerow([Itag.Gen_ID if Itag else '',\n     Itag.Solyc if Itag else '',\n     Itag.GO_number if Itag else '',\n     Itag.GO_def if Itag else '',\n     Itag.Itag_description if Itag else '',\n     Itag.IPR_Number if Itag else '',\n     Itag.IPR_Description if Itag else '',\n     Itag.Trivial_name if Itag else '',\n     Loci.Locus_symbol if Loci else '',\n     Loci.Locus_name if Loci else '',])\n</code></pre>\n\n<p>This writes away the object information into a CSV file if there is a object present.\nNow in the next part I Have a Object called <code>Blast</code>, \n<code>Blast</code> Has a couple of properties:\n<code>Blast.name, Blast.hit, Blast.score</code>\nThe object <code>Itag</code> has a one on one relation with <code>Loci</code> that's why it all fits nicely in a row.</p>\n\n<p>Now the <code>Blast</code> object has a many on one relation with <code>Itag</code>and <code>Loci</code>\nso 5 <code>Blast</code> hits can have a relation with 1 <code>Itag and Loci</code> Hit.</p>\n\n<p>Now how do I write all the 5 <code>Blast</code> object properties to the same row in the CSV file?</p>\n\n<p>I hope some one can help me with this!</p>\n"},{"tags":["python","django","facebook","facebook-graph-api","django-socialauth"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":101,"score":4,"question_id":12799772,"title":"How to fetch user's mobile number from facebook?","body":"<p>I am using <strong>django-social_auth</strong> to make users register and login via <strong>facebook</strong>. I want to access the <strong>phone number</strong> of the user. </p>\n\n<p>Tried searching on google and stackoverflow , but didn't find any answer. Searched the facebook docs as well. There I found that there used to be permission for <strong>'user_mobile_phone'</strong> but it has been removed. </p>\n\n<p>It was also written than now it will be provided with basic permissions but it wasn't available(what I found). \nI tried using <strong>Graph API</strong>, but was unsuccessful.</p>\n\n<p>So, Someone please tell me the way ,if there is any, to get user data.</p>\n"},{"tags":["django","django-models","tastypie","onetoone"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12874445,"title":"Django Tastypie POST request for OneToOne relation","body":"<p>I have recently started django-tastypie and so far loving the framework. With said that, I am getting below issue on POST for OneToOne relation to model and spent good amount of time but couldn't figured whats missing. Here is the Model and Resource code -</p>\n\n<p><strong>Model</strong></p>\n\n<pre><code>class Question(TimeStampedModel):\n    question_title = models.CharField(\"question title\", max_length=100)     \n    question_desc = models.TextField(\"question description\", max_length=1000)\n    .......\n</code></pre>\n\n<p>Second model is having OneToOne relation with Question -</p>\n\n<pre><code>class QuestionAnswer(TimeStampedModel):\n    question = models.OneToOneField(Question)\n    .....\n</code></pre>\n\n<p><strong>Resource</strong></p>\n\n<p>QuestionAnswerResource -</p>\n\n<pre><code>class QuestionAnswerResource(ModelResource):\n    question = fields.ForeignKey('myapp.api.QuestionResource', 'question')\n\n    class Meta:\n        queryset = QuestionAnswer.objects.all()\n        resource_name='questionanswer'\n</code></pre>\n\n<p>QuestionResource -</p>\n\n<pre><code>class QuestionResource(ModelResource):\n    questionanswer = fields.OneToOneField('myapp.api.QuestionAnswerResource', 'questionanswer', full=True) \n\n    class Meta:\n        queryset = Question.objects.all()\n        resource_name = 'question'\n</code></pre>\n\n<p>With the above setup, I get correct response on GET with Question instance along with its answer attribute. However when I try to POST data to save question/answer on this one it fails with below error - </p>\n\n<blockquote>\n  <p>\"{\"error_message\": \"\", \"traceback\": \"Traceback (most recent call\n  last):\\n\\n  File\n  \\\"/Library/Python/2.7/site-packages/tastypie/resources.py\\\", line 192,\n  ...................................................................................... line 636, in hydrate\\n<br>\n  value = super(ToOneField, self).hydrate(bundle)\\n\\n  File\n  \\\"/Library/Python/2.7/site-packages/tastypie/fields.py\\\", line 154, in\n  hydrate\\n    elif self.attribute and getattr(bundle.obj,\n  self.attribute, None):\\n\\n  File\n  \\\"/Library/Python/2.7/site-packages/Django-1.4.1-py2.7.egg/django/db/models/fields/related.py\\\", line 343, in <strong>get</strong>\\n    raise\n  self.field.rel.to.DoesNotExist\\n\\nDoesNotExist\\n\"}\"</p>\n</blockquote>\n\n<p>Can someone point out what I am missing?</p>\n"},{"tags":["django","django-models","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12893725,"title":"display django model data in custom template","body":"<p>I have django models  such as this</p>\n\n<pre><code>class District(models.Model):\n\nname = models.CharField(max_length=30,unique=True)\nnumber = models.PositiveIntegerField(null=True,blank=True)\ndef __unicode__(self):\n    return \"District (%s,%s)\" % (self.name,self.number)\nclass Meta:\n    db_table = 'districts'\n</code></pre>\n\n<p>And i can be able to enter district names along with their number. What i would like to be able to do is to view these districts that have been  entered in a custom template that i have created. Currently the template has a dropdown option using the select tag. How can i be able to pull the data thats  entered using the django model and display it in the template that i have created. This is the current code snippet of what is in the html template</p>\n\n<pre><code>  &lt;label for=\"district\"&gt; District&lt;/label&gt;\n    &lt;select  id=\"district\" name=\"district\"&gt;\n      &lt;option id=\"kampala\" value=\"k\"&gt;Kampala&lt;/option&gt;\n      &lt;option id=\"mbale\" value=\"m\"&gt;Mbale&lt;/option&gt;\n    &lt;/select&gt;\n</code></pre>\n"}]}
{"total":41213,"page":19,"pagesize":100,"questions":[{"tags":["python","django","templates","mongodb"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12893873,"title":"Get object id of document already in mongoDB collection in Python","body":"<p>I have a collection in mongodb in which I have already inserted the documents.Now I want to update a document entry and I want to retrieve the document ID in the django template,like I am using checkbox alongside of the entry in the HTML.I want to give individual box a unique id which i plan to use same as the document id  .. so <strong>HOW DO I RETRIEVE THE DOCUMENT ID IN THE DJANGO TEMPLATE</strong> ?</p>\n"},{"tags":["django","django-models","django-file-upload"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":12893412,"title":"Django upload file per user relationship error","body":"<p>I'm making an app, which requires users to upload some files. I want to store all files in a username folder (and possibly, later move it outside the project folder, but that's other thing)</p>\n\n<p>First I'm doing some tests, I took this example <a href=\"http://stackoverflow.com/questions/5871730/need-a-minimal-django-file-upload-example\">S.O: Need a minimal django file upload example</a>.</p>\n\n<p>It worked just like that, so I moved to next step.</p>\n\n<p>I checked this questions:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/1190697/django-filefield-with-upload-to-determined-at-runtime\" title=\"Django FileField with upload_to determined at runtime\">Django FileField with upload_to determined at runtime</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/5135556/dynamic-file-path-in-django\">Dynamic File Path in Django</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/8189800/django-store-user-image-in-model?rq=1\">Django store user image in model</a></p>\n\n<p>My current models.py:</p>\n\n<pre><code># models.py\nfrom django.db import models\nfrom django.contrib.auth.models import User\nimport os\n\ndef get_upload_path(instance, filename):\n    return os.path.join('docs', instance.owner.username, filename)\n\nclass Document(models.Model):\n    owner = models.ForeignKey(User)\n    docfile = models.FileField(upload_to=get_upload_path)\n</code></pre>\n\n<p>My views.py</p>\n\n<pre><code>@login_required\ndef list(request):\n    # Handle file upload\n    if request.method == 'POST':\n        form = DocumentForm(request.POST, request.FILES)\n        if form.is_valid():\n            newdoc = Document(docfile = request.FILES['docfile'])\n            newdoc.save()\n\n            # Redirect to the document list after POST\n            return HttpResponseRedirect(reverse('myapp.views.list'))\n    else:\n        form = DocumentForm() # A empty, unbound form\n\n    # Load documents for the list page\n    documents = Document.objects.all()\n\n    # Render list page with the documents and the form\n    return render_to_response(\n        'myapp/list.html',\n        {'documents': documents, 'form': form},\n        context_instance=RequestContext(request)\n    )\n</code></pre>\n\n<p>All accepted answers, lead to the same solution. But I'm getting an error with instance.owner:</p>\n\n<pre><code>django.contrib.auth.models.DoesNotExist\nDoesNotExist\nraise self.field.rel.to.DoesNotExist\n</code></pre>\n\n<p>Using werkzeug debbuger:</p>\n\n<pre><code>&gt;&gt;&gt; instance\n&lt;Document: Document object&gt;\n&gt;&gt;&gt; instance.owner\nTraceback (most recent call last):\n\nFile \"&lt;debugger&gt;\", line 1, in &lt;module&gt;\ninstance.owner\nFile \"C:\\Python27\\lib\\site-packages\\django\\db\\models\\fields\\related.py\", line 343,     in    __get__\nraise self.field.rel.to.DoesNotExist\nDoesNotExist\n</code></pre>\n\n<p>What am I missing?</p>\n\n<p>Thank you very much in advance.</p>\n"},{"tags":["javascript","jquery","django"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":99,"score":2,"question_id":12892943,"title":"Include JQuery countdown in Django","body":"<p>I'm new with Django and this question is probably very basic. I would like to implement this Jquery countdown (http://keith-wood.name/countdown.html) in my Django app. But I have no idea how to include some javascript in my django templates. \nHere is what I tried to include in my template:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"  src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;style type=\"text/css\"&gt;@import \"/Users/marc-antoine.lacroix/Desktop/JQuery/jquery.countdown.package-1.6.0/jquery.countdown.css\";&lt;/style&gt;\n&lt;script type=\"text/javascript\" src=\"{{ STATIC_URL }}js/jquery.countdown-fr.js\"&gt;&lt;/script&gt;\n&lt;script language=\"javascript\"&gt;\nvar newYear = new Date(); \nnewYear = new Date(newYear.getFullYear() + 1, 1 - 1, 1); \n $('#defaultCountdown').countdown({until: newYear}); \n&lt;/script&gt;\n</code></pre>\n\n<p>But nothing appears in my page. What did I do wrong? Is it the good way to include JQuery in my template?</p>\n\n<p>I know several questions has been asked about it, but I didn't find how to solve my problem.</p>\n\n<p>Any help would be very welcome.</p>\n\n<p>Now, I tried:</p>\n\n<pre><code>&lt;head&gt;\n&lt;meta http-equiv=\"Content-type\" content=\"text/html; charset=utf-8\" /&gt;\n&lt;script type=\"text/javascript\"    src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;style type=\"text/css\"&gt;@import \"/Users/marc-antoine.lacroix/Desktop/JQuery/jquery.countdown.package-1.6.0/jquery.countdown.css\";&lt;/style&gt;\n&lt;script type=\"text/javascript\" src=\"{{ STATIC_URL }}js/jquery.countdown-fr.js\"&gt;&lt;/script&gt;\n&lt;script language=\"javascript\"&gt;\n\n$(document).ready(function(){\n\nvar newYear = new Date(); \nnewYear = new Date(newYear.getFullYear() + 1, 1 - 1, 1); \n$('#defaultCountdown').countdown({until: newYear}); \n\n});\n&lt;/script&gt;\n\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;div id=\"defaultCountdown\"&gt; &lt;/div&gt;\n\n&lt;/body&gt;\n</code></pre>\n\n<p>Still nothing!</p>\n"},{"tags":["django","django-models","django-permissions"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12892907,"title":"Extend django Groups and Permissions","body":"<p>I've been searching Google and Stackoverflow for the last 3 days now and couldn't find anything similar. I'd like to extend or use the django groups and permissions.</p>\n\n<p>Let's say we got some Projects with different Teams and Users.</p>\n\n<pre><code>class Project(models.Model):\n    owner = models.ForeignKey(User)\n    name = models.CharField(max_length=100)\n\nclass Team(models.Model):\n    project = models.ForeignKey(Project)\n    members = models.ManyToManyField(User)\n    name = models.CharField(max_length=100)\n    permission = models.ManyToManyField(Permission)\n</code></pre>\n\n<p>Now - everything's fine. Now what I want is to extend the existing Auth.Group delivered by django so I could use <code>request.user.has_perm...</code> the direct way.</p>\n\n<p>So, let's change the <em>Team-Model</em> into</p>\n\n<pre><code>class Team(Group):\n    project = models.ForeignKey(Project)\n    members = models.ManyToManyField(User)\n</code></pre>\n\n<p>This extends the existing Group. The <code>name</code> and <code>permissions</code> field comes direct from the <em>Group-Model</em>. If I create a new <em>Team</em>, there will be a <em>Group</em> added, too. That's great. </p>\n\n<p>With a custom <code>save</code> method I could also add, that the <code>user</code> listed in <code>members</code>, will be added to the created <em>Group</em> and gets the permissions granted to the <em>Team/Group</em>.</p>\n\n<p>Now my problem is, the <code>name</code> field of the <em>Group</em> is unique - so I couldn't add an <em>Admins</em>-Team for each Project.</p>\n\n<p>I thought about adding another name-field for the frontend and generate a unique string for the name field of the <em>Group-Model</em>. But hmmm....is there a better solution for multiple custom Groups? Maybe one got an idea? Thank you in advance!</p>\n"},{"tags":["python","django","django-views","django-class-based-views"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12890955,"title":"How to attach data to view methods with django class based views and decorators?","body":"<p>I have the following decorator:</p>\n\n<pre><code>def my_decorator(setting_value):\n\n    def actual_decorator(func):\n        func.my_setting = setting_value\n        return func\n\n    return actual_decorator\n</code></pre>\n\n<p>I'm trying to read <code>my_setting</code> in a context processor like so:</p>\n\n<pre><code># Resolve the url\ntry:\n    page_resolve = resolve(request.path_info)\nexcept Resolver404:\n    return {}\n\n# Get the page view function\npage_view = page_resolve.func\n\nif (page_view.my_setting):\n    return extra_context_data\nelse\n    return {}\n</code></pre>\n\n<p>This whole scheme falls apart when using CBVs. How do I make the decorator compatible with both FBV and CBV?</p>\n"},{"tags":["python","django","google-app-engine","pagination","jinja2"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":130,"score":1,"question_id":12065988,"title":"Pagination in Jinja2 on Google App Engine","body":"<ol>\n<li><p>Is there a Pagination function in Jinja2 on Google App Engine?</p></li>\n<li><p>I am thinking about using <code>from django.core.paginator import Paginator</code> from django.\n<a href=\"https://docs.djangoproject.com/en/dev/topics/pagination/?from=olddocs\" rel=\"nofollow\">https://docs.djangoproject.com/en/dev/topics/pagination/?from=olddocs</a></p></li>\n</ol>\n\n<p>I think I need to include django library in app.yaml:</p>\n\n<pre><code>libraries:\n- name: django\n  version: \"1.2\"\n</code></pre>\n\n<p>But I want to know if this makes my application run slower because I include more libraries.</p>\n"},{"tags":["javascript","ajax","django","progressive-enhancement"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":12889514,"title":"Handling a meta request with Ajax in Django","body":"<p>I tried to research but couldn't find a way to handle META requests in Django with Ajax. Refreshing a page everytime kind of destroys the UX.\nSo if the code is something like this:</p>\n\n<h1>template</h1>\n\n<pre><code>&lt;a href=\"/like/?id={{ car.id }}\" &gt;# of likes: {{ car.likes }}&lt;/a&gt;\n</code></pre>\n\n<h1>views.py</h1>\n\n<pre><code>def like_page(request):\n    if 'id' in request.GET:\n        id = request.GET['id']\n        car = Cars.objects.get(id=id)\n        car.likes += 1\n        car.save()\n    if 'HTTP_REFERER' in request.META:\n        return HttpResponseRedirect(request.META['HTTP_REFERER'])\n    return HttpResponseRedirect('/')\n</code></pre>\n\n<p>So the template sends the id of the object, and in the views it increments the like by 1. everytime this happens.\nNow the problem is that without Ajax it reloads the page everytime it happens.\nI am a backend developer, so I have almost no experience with jQuery and Ajax, so I have no clue how to approach this problem.</p>\n\n<p>Any help would be appreciated. Thanks :)</p>\n"},{"tags":["android","python","ios","django","tastypie"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12892742,"title":"Implementation an authentication scheme for mobile apps using Tastypie","body":"<p>I would like to create a REST service with authentication for mobile devices. This is the first time I will be doing something like this, so I would like to receive some advise on how I would implement things.</p>\n\n<p>For this I would need to create a signup form which let's the user signup for the services. \nI see no issue here I can just post the form data to the server and let it return a response.</p>\n\n<p>If the form is valid a new user object will be created and immediately be logged in. Also a API KEY will be generated using:</p>\n\n<pre><code>from django.contrib.auth.models import User\nfrom django.db import models\nfrom tastypie.models import create_api_key\n\nmodels.signals.post_save.connect(create_api_key, sender=User)\n</code></pre>\n\n<p>The request, will return a 301 HTTP status and contain a redirect URI to fetch the API KEY.</p>\n\n<p>After this step the app will request another URI (the URI received in the 301 response of the signup request) to access the API KEY (I will be using Tastypie's <a href=\"http://django-tastypie.readthedocs.org/en/latest/authentication_authorization.html#apikeyauthentication\" rel=\"nofollow\">ApiKeyAuthentication</a> scheme). The request will contain the session cookie received in the previous request response, this way to view will be secured and I will be able to user the login_required decorator.\nThe response will be plain JSON with username and api key.</p>\n\n<p>These values will be stored somewhere in the app.</p>\n\n<p>Any requests now made will add the username and API KEY stored in the app so further requests will be more secure.</p>\n\n<p>Does this look like a good scheme to follow ? Are there holes in the design ?</p>\n"},{"tags":["django","transactions","commit"],"answer_count":1,"favorite_count":4,"up_vote_count":2,"down_vote_count":0,"view_count":824,"score":2,"question_id":4206819,"title":"Django: Difference between save() and create() from transaction perspective","body":"<p>The create() method in Django creates a model instance then calls save(), which is said to trigger commit. So there should not be any difference in triggering transaction's commit. </p>\n\n<p>But in reality, executing a method that creates a bunch of model instances using create() on Postgresql I am getting <code>transaction aborted, commands ignored until end of transaction</code> exception. The method runs fine with non-transactional db backends. Also, when I replace the create()s with:</p>\n\n<pre><code>m = Model(attr1=..., attr2=...)\nm.save()\n</code></pre>\n\n<p>it runs on Postgresql fine too.</p>\n\n<p>Is there a difference between using <code>save()</code> and <code>create()</code> in the sense of transactions?</p>\n\n<p><strong>edit:</strong> create() also sets <code>self._for_write = True</code> before calling save(), but I couldn't trace it to see if it has any effect on transaction behavior.</p>\n\n<p><strong>edit:</strong> example code can be found <a href=\"http://pastebin.com/QHZ0NJJY\" rel=\"nofollow\">here</a>.</p>\n"},{"tags":["html","django","django-templates"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12799145,"title":"Django-Child template-Base.html not rendering","body":"<p>I am using the Django template system in my app, and in the child template I reference the {% extends \"base.html\" %} accordingly, though when redenring the template, it only comes up with the html tags and no css styling-thus not picking up the base.html template altogether.\nPlease advise on what I am doing wrong?. Could it be an issue with it not finding the location of my base.html template?</p>\n\n<p>This is the child template code:</p>\n\n<pre><code>{% extends \"base.html\" %}\n{% block content %} \n{% for field in form %}\n{{ form }} \n{% endfor %} \n{% endblock %}\n</code></pre>\n\n<p>This is the base.html template code (relevant parts):</p>\n\n<pre><code>&lt;div id=\"content\"&gt;\n&lt;h2&gt;\n                Page heading - This is where the functionality goes...\n            &lt;/h2&gt;\n            &lt;FIELDSET&gt;&lt;INPUT class=Test value=\"Test\" type=submit&gt;&lt;/FIELDSET&gt;\n\n            {% block primary %}{% endblock %}\n&lt;/div&gt;\n</code></pre>\n\n<p>Please let me know if you need any firther information to solve this issue.</p>\n\n<p>-I will add the views.py this evening (London time)--</p>\n\n<p><em>This all all sorted, many thanks for the help</em></p>\n\n<p>Thanks</p>\n"},{"tags":["django","django-templates","django-pagination"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":24,"score":-1,"question_id":12892030,"title":"autopaginator keyword error while rendering template","body":"<pre><code>&lt;% load pagination_tags %&gt;\n&lt;% autopaginate content 3 %&gt;\n&lt;% paginate %&gt;\n</code></pre>\n\n<p>am getting  autopaginate key error while rendering..\nI have done all set for this 3rd party pagination..\nchanges in</p>\n\n<p>ie..middlewarare settings\n    templatecontextloaders\n    installed apps</p>\n"},{"tags":["django","filtering","django-many-to-many"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12891302,"title":"Filtering Many-to-Many relationship by Relationship field in Django","body":"<p>i'm trying to filter many-to-many relationship by some <strong>through Class</strong> field. </p>\n\n<p>Quoting the Django documentation, i will explain my goal</p>\n\n<pre><code>class Person(models.Model):\n      name = models.CharField(max_length=128)\n\n      def __unicode__(self):\n          return self.name\n\nclass Group(models.Model):\n      name = models.CharField(max_length=128)\n      members = models.ManyToManyField(Person, through='Membership')\n\n      def __unicode__(self):\n          return self.name\n\nclass Membership(models.Model):\n      person = models.ForeignKey(Person)\n      group = models.ForeignKey(Group)\n      date_joined = models.DateField()\n      invite_reason = models.CharField(max_length=64)\n</code></pre>\n\n<p>In this example my goal sould be filter many to many relationship and obtain only the <strong>Person</strong> who has joined some <strong>Group</strong> starting from certain date (<strong>date_joined field</strong>).</p>\n\n<p>Is it possible? </p>\n"},{"tags":["c++","python","django","amazon-ec2"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":12891926,"title":"issues with django project on amazon ec2.","body":"<p>I am trying to run a django project on amazon ec2. The same project is already running fine on a number of existing non-amazon servers. In one of files in the project I try to call a c++ method from python program which returns me a (struct) pointer and then i pass that pointer back to another function in same c++ program which then doesn't allow to access values of that struct pointer. As soon as I try to access the value of the pointer, the program just exits giving no error. Seems very strange as the same project is running fine on other servers. No version issues as same version of python and django are on other servers.</p>\n"},{"tags":["django","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12877437,"title":"Tastypie: I want to get items like \"/places/{PLACE_ID}/comments\" but how?","body":"<p>Let's say I want to get comments about a place. I want to make this request:</p>\n\n<p><strong>/places/{PLACE_ID}/comments</strong></p>\n\n<p>How can I do this with TastyPie? </p>\n"},{"tags":["django","django-templates","django-multilingual"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":48,"score":3,"question_id":12890935,"title":"how to translate an app template","body":"<p>I want to use multiple language in my app and for that i have followed this <a href=\"http://devdoodles.wordpress.com/2009/02/14/multi-language-support-in-a-django-project/\" rel=\"nofollow\">doc</a> </p>\n\n<p>After the creation of django.po inside locale folder, I opened that, as this files contain '#' which told you that which line you can translate.\nBut this file only contain admin part it does not have my app templates i.e., HTML files of my app.</p>\n\n<p>So how I can translate those HTML files, OR what should I have to do so that django.po file can also contain my app templates.</p>\n\n<p>I have followed only this <a href=\"http://devdoodles.wordpress.com/2009/02/14/multi-language-support-in-a-django-project/\" rel=\"nofollow\">doc</a>.</p>\n"},{"tags":["jquery","python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12890131,"title":"jQuery file upload with django - getting unexpected token error","body":"<p><a href=\"http://blueimp.github.com/jQuery-File-Upload/\" rel=\"nofollow\">Jquery file upload</a>.</p>\n\n<p>It used some kind of  javascript template language which collided with django template language, so I used the some custom template tag \"raw\" to produce the raw content which succeeded. But, dont know why the jquery file upload is not working. giving some unexpected token ILLEGAL error </p>\n\n<pre><code>    var second = \"var _e=tmpl.encode\" + tmpl.helper + \",_s='\" +\n                        str.replace(tmpl.regexp, tmpl.func) +\n                        \"';return _s;\";\n                        console.log(\"---------------------\");\n    console.log(second);\n    console.log(\"-------------------\");\n    var f = !/[^\\w\\-\\.:]/.test(str) ? tmpl.cache[str] = tmpl.cache[str] ||\n            tmpl(tmpl.load(str)) :\n                new Function(\n                    tmpl.arg + ',tmpl', second  // GETTING UNEXPECTED TOKEN HERE AT THIS PLACE.\n\n                );\n</code></pre>\n\n<p>And this is value of the variable \"second\" at which i am getting error :</p>\n\n<pre><code>  var _e=tmpl.encode,print=function(s,e){_s+=e&amp;&amp;(s||'')||_e(s);},include=function(s,d){_s+=tmpl(s,d);},_s='\\n\\n';for (var i=0, file; file=o.files[i]; i++) ';}\\n    &lt;tr class=\"template-upload fade\"&gt;\\n        &lt;td class=\"preview\"&gt;&lt;span class=\"fade\"&gt;&lt;/span&gt;&lt;/td&gt;\\n        &lt;td class=\"name\"&gt;&lt;span&gt;'+_e(file.name)+'&lt;/span&gt;&lt;/td&gt;\\n        &lt;td class=\"size\"&gt;&lt;span&gt;'+_e(o.formatFileSize(file.size))+'&lt;/span&gt;&lt;/td&gt;\\n        ';if (file.error) ';}\\n            &lt;td class=\"error\" colspan=\"2\"&gt;&lt;span class=\"label label-important\"&gt;Error&lt;/span&gt; '+_e(file.error)+'&lt;/td&gt;\n    ';} else if (o.files.valid &amp;&amp; !i) ';}\\n            &lt;td&gt;\\n                &lt;div class=\"progress progress-success progress-striped active\" role=\"progressbar\" aria-valuemin=\"0\" aria-valuemax=\"100\" aria-valuenow=\"0\"&gt;&lt;div class=\"bar\" style=\"width:0%;\"&gt;&lt;/div&gt;    &lt;/div&gt;\\n            &lt;/td&gt;\\n            &lt;td class=\"start\"&gt;';if (!o.options.autoUpload) ';}\n            &lt;button class=\"btn btn-primary\"&gt;\n                &lt;i class=\"icon-upload icon-white\"&gt;&lt;/i&gt;\n                &lt;span&gt;Start&lt;/span&gt;\n            &lt;/button&gt;\n        ';}_s+='&lt;/td&gt;\n    ';} else ';}\n        &lt;td colspan=\"2\"&gt;&lt;/td&gt;\n    ';}_s+='\\n        &lt;td class=\"cancel\"&gt;';if (!i) ';}\n        &lt;button class=\"btn btn-warning\"&gt;\n            &lt;i class=\"icon-ban-circle icon-white\"&gt;&lt;/i&gt;\n            &lt;span&gt;Cancel&lt;/span&gt;\n        &lt;/button&gt;\n    ';}_s+='&lt;/td&gt;\n&lt;/tr&gt;\n';}_s+='\\n';return _s; \n</code></pre>\n\n<p>this is the js file tmpl.js from which i got the error . </p>\n\n<p><a href=\"http://blueimp.github.com/JavaScript-Templates/tmpl.js\" rel=\"nofollow\">http://blueimp.github.com/JavaScript-Templates/tmpl.js</a></p>\n"},{"tags":["python","django","forms"],"answer_count":2,"favorite_count":5,"up_vote_count":13,"down_vote_count":0,"view_count":2951,"score":13,"question_id":4707192,"title":"Django: How to build a custom form widget?","body":"<p>I am having a difficult time finding documentation on how to write a custom widget.</p>\n\n<p>My questions are:</p>\n\n<ul>\n<li>If I build a custom widget, can it be used equivalently for the admin interface or for normal forms?</li>\n<li>If I want to allow the user to edit a list of items, what widget should I subclass? What methods of the widget do I need to override/implement?</li>\n<li>What widget method is responsible for going from the user's input back to the data model?</li>\n</ul>\n\n<p>Thanks.</p>\n"},{"tags":["django","internationalization","gettext","po"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":98,"score":0,"question_id":11793957,"title":"Deployment-free gettext translations for web applications","body":"<p>The Django-based web application I'm working on is translated to a few different languages. So far we've used gettext/PO files for translating static files (text in code and templates, static pages); CMS pages and texts stored in the DB are translated via the admin interfaces.</p>\n\n<p>This common setup works well for us developers but is not favored by our translators who'd rather always use their translation tools (with PO files) instead of using the admin interface.</p>\n\n<p>Now that more and more of our content is migrated from the code to the database we tried using <a href=\"http://django-dbgettext.readthedocs.org/en/latest/index.html\" rel=\"nofollow\">gettext for texts stored in the DB</a>. While the idea sounds good the workflow around it is quite cumbersome:</p>\n\n<ol>\n<li>Editor changes English text in the admin interface</li>\n<li>Developer runs command to extract messages on a host that is connected to the production DB</li>\n<li>PO file is sent to translators</li>\n<li>Translator sends file back to developers when she's done with the translation</li>\n<li>Developer compiles mo files, checks it in the code base and deploys</li>\n</ol>\n\n<p>While some of the steps could be automated by using a service like <a href=\"https://www.transifex.com/tour/features/overview/\" rel=\"nofollow\">Transifex</a> I don't see how to get around the last step. Having to deploy as a result of a database change sounds wrong.</p>\n\n<p><strong>Has anybody been able to come up with a sane gettext-based translation workflow for web applications that does not require deployments?</strong></p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":12888949,"title":"What are generic Relations in django models","body":"<p>Someone has written this in <code>models.py</code></p>\n\n<pre><code>documents = generic.GenericRelation(Document)\n</code></pre>\n\n<p>I want to know how its different from other types like <code>ForeignKey</code> and <code>OneToMany</code> fields.</p>\n\n<p>I have not seen enough documentation on this</p>\n\n<p>If found something <a href=\"https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#django.contrib.contenttypes.generic.GenericRelation\" rel=\"nofollow\">here</a> </p>\n\n<p>But even at first place i don't undestood what does contentype does and why to use it.</p>\n"},{"tags":["django","django-multilingual"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":12889246,"title":"Issues with multiple languages (django.po file)","body":"<p>I am using the concept of multiple languages in my app and for that I have done all those things which are written in the doc.</p>\n\n<p>But when I creates a locale file inside my project and then the respective language folder \"es\" and thus a by default django.po file is created which contains all the lines which I can edit .</p>\n\n<p>e.g. </p>\n\n<pre><code>#: customer_reg/my_new_env/lib/python2.6/site-packages/django/conf/global_settings.py:48\nmsgid \"Arabic\"\nmsgstr \"\"\n</code></pre>\n\n<p>But this django.po file  does not contain my app templates files which I can edit.</p>\n\n<p>As i said I have created this locale file inside my project parallel to my app,I don't know why it happens.\nSo I have to create this inside my app parallel to my models and views ?? OR there is any another problem ?? </p>\n"},{"tags":["django","django-models","django-signals"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":76,"score":1,"question_id":12689721,"title":"django m2m_changed signal with custom through model","body":"<p>I am trying to use the <a href=\"https://docs.djangoproject.com/en/dev/ref/signals/#m2m-changed\" rel=\"nofollow\"><code>m2m_changed</code> signal</a> to trigger some actions in my application\n. However, the printout of <code>signaltest()</code> indicates that I am only signalled on <code>pre_clear</code> and <code>post_clear</code> actions. My <code>models.py</code> looks like this: </p>\n\n<pre><code>class Entry(models.Model):\n    objects = managers.MyEntryManager()\n    ...\n    fields = models.ManyToManyField('Field', through='EntryField')\n\nclass Field(models.Model):\n    name = models.CharField(max_length=64, unique=True)\n    description = models.CharField(max_length=256, blank=True)\n\nclass EntryField(models.Model):\n    entry = models.ForeignKey('Entry')\n    field = models.ForeignKey('Field')\n    value = models.CharField(max_length=256)\n\ndef signaltest(**kwargs):\n    print kwargs['action']\nsignals.m2m_changed.connect(signaltest, sender=Entry.fields.through, weak=False, dispatch_uid='signaltest')\n</code></pre>\n\n<p>The <code>EntryField</code> objects are created elsewhere in the code using the following code:</p>\n\n<pre><code>some_entry.fields.clear()\nmodels.EntryField.objects.get_or_create(\n    entry=some_entry,\n    field=some_field,\n    defaults = { 'value': field_value }\n)\n</code></pre>\n\n<p>The first call is responsible for the <code>pre_clear</code> and <code>post_clear</code> events I receive. However, the second call generates no signals.</p>\n\n<p>It seems to me that <a href=\"https://code.djangoproject.com/ticket/13757\" rel=\"nofollow\">django bug #13757</a> is related to this (mis)behaviour, but I may be missing something.</p>\n\n<p>Is there a way to \"rewire\" the signals (perhaps using some signal other than <code>m2m_changed</code>) to have <code>post_save</code> signals generated when a <code>EntryField</code> is created?</p>\n"},{"tags":["django","nginx","gunicorn"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12888832,"title":"server name doesn't work (django + nginx + gunicorn)","body":"<p>It's my first time to use django + nginx + gunicorn.  I can't make server_name work.  With the following configs, I am able to see django admin panel at localhost/admin. But should I be able to see admin panel when I access local-example/admin as well?</p>\n\n<p>start my gunicorn</p>\n\n<pre><code>gunicorn web_wsgi_local:application\n2012-10-14 19:45:50 [16532] [INFO] Starting gunicorn 0.14.6\n2012-10-14 19:45:50 [16532] [INFO] Listening at: http://127.0.0.1:8000 (16532)\n2012-10-14 19:45:50 [16532] [INFO] Using worker: sync\n2012-10-14 19:45:50 [16533] [INFO] Booting worker with pid: 16533\n</code></pre>\n\n<p>nginx.conf</p>\n\n<pre><code>worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n                  '$status $body_bytes_sent \"$http_referer\" '\n                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    access_log  /Users/ruixia/www/x/project/logs/nginx_access.log  main;\n    error_log /Users/ruixia/www/x/project/logs/nginx_error.log debug;\n\n    autoindex on;\n    sendfile        on;\n    tcp_nopush     on;\n    tcp_nodelay    off;\n\n    gzip  on;\n\n    include /usr/local/etc/nginx/sites-enabled/*;\n}\n</code></pre>\n\n<p>sites-enabled/x config</p>\n\n<pre><code>server {\n    listen 80;\n    server_name local-example;\n    root /Users/ruixia/www/x/project;\n\n    location /static/ {\n        alias /Users/ruixia/www/x/project/static/;\n        expires 30d;\n    }\n\n    location /media/ {\n        alias /Users/ruixia/www/x/project/media/;\n    }\n\n    location / {\n        proxy_pass_header Server;\n        proxy_set_header Host $http_host;\n        proxy_redirect off;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Scheme $scheme;\n        proxy_connect_timeout 10;\n        proxy_read_timeout 10;\n        proxy_pass http://localhost:8000/;\n    }\n}\n</code></pre>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12888318,"title":"Deleting files associated with model - django","body":"<p>I have the following code in one of my models</p>\n\n<pre><code>class PostImage(models.Model):\n    post =  models.ForeignKey(Post, related_name=\"images\")\n    # @@@@ figure out a way to have image folders per user...\n    image = models.ImageField(upload_to='images')\n    image_infowindow = models.ImageField(upload_to='images')\n    image_thumb = models.ImageField(upload_to='images')\n    image_web = models.ImageField(upload_to='images')\n    description = models.CharField(max_length=100)\n    order = models.IntegerField(null=True)\n\n    IMAGE_SIZES = {\n        'image_infowindow':(70,70),\n        'image_thumb':(100,100),\n        'image_web':(640,480),\n    }\n\n    def delete(self, *args, **kwargs):\n        # delete files..\n        self.image.delete(save=False)\n        self.image_thumb.delete(save=False)\n        self.image_web.delete(save=False)\n        self.image_infowindow.delete(save=False)\n        super(PostImage, self).delete(*args, **kwargs)\n</code></pre>\n\n<p>I am trying to delete the files when the delete() method is called on <code>PostImage</code>. However, the files are not being removed.</p>\n\n<p>As you can see, I am overriding the delete() method, and deleting each <code>ImageField</code>. For some reason however, the files are not being removed.</p>\n"},{"tags":["python","django","long-polling","gevent"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":684,"score":4,"question_id":3334777,"title":"Capturing event of client disconnecting! - Gevent/Python","body":"<p><strong>I'm using long polling for a chat with gevent.</strong> I'm using Event.wait() when waiting for new messages to be posted on the chat.</p>\n\n<hr>\n\n<p>I would like to <strong>handle the occasion a client disconnects</strong> with some functionality:</p>\n\n<p>e.g. Return <strong>\"client has disconnected\"</strong> as a message for other chat users</p>\n\n<hr>\n\n<p>Is this possible? =)</p>\n"},{"tags":["django","internet-explorer","get","url-encoding"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":12888238,"title":"How to deal with IE's not encoding URL in django?","body":"<p>In browsers like chrome and firefox, if you type something like this into the address line:</p>\n\n<pre><code>http://mysite.com/q?name=喇叭嘴\n</code></pre>\n\n<p>they help you encode the url into:</p>\n\n<pre><code>http://mysite.com/?q=%E5%96%87%E5%8F%AD%E5%98%B4\n</code></pre>\n\n<p>So, in django, you can just use:</p>\n\n<pre><code>request.GET.get('q', '')\n</code></pre>\n\n<p>to get the value <code>'喇叭嘴'</code>.</p>\n\n<p>However, this thing does not happen in IE(msie, thanks). That's why we keep on getting <code>���</code> instead.</p>\n\n<p>With ajax handling, I can just use JavaScript <code>encodeURI()</code> Function to work around with it. However, triggering it every time is such a pain.</p>\n\n<p>Is there any way to handle the issue in the backend?</p>\n"},{"tags":["python","django","redis","gevent"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":151,"score":3,"question_id":12853067,"title":"Django: Cleaning up redis connection after client disconnects from stream","body":"<p>I've implemented a <a href=\"http://www.html5rocks.com/en/tutorials/eventsource/basics/\" rel=\"nofollow\">Server Sent Event</a> API in my Django app to stream realtime updates from my backend to the browser.  The backend is a Redis pubsub.  My Django view looks like this:</p>\n\n<pre><code>def event_stream(request):\n   \"\"\"\n   Stream worker events out to browser.\n   \"\"\"\n\n   listener = events.Listener(\n       settings.EVENTS_PUBSUB_URL,\n       channels=[settings.EVENTS_PUBSUB_CHANNEL],\n       buffer_key=settings.EVENTS_BUFFER_KEY,\n       last_event_id=request.META.get('HTTP_LAST_EVENT_ID')\n   )\n\n   return http.HttpResponse(listener, mimetype='text/event-stream')\n</code></pre>\n\n<p>And the events.Listener class that I'm returning as an iterator looks like this:</p>\n\n<pre><code>class Listener(object):\n    def __init__(self, rcon_or_url, channels, buffer_key=None,\n                 last_event_id=None):\n        if isinstance(rcon_or_url, redis.StrictRedis):\n            self.rcon = rcon_or_url\n        elif isinstance(rcon_or_url, basestring):\n            self.rcon = redis.StrictRedis(**utils.parse_redis_url(rcon_or_url))\n        self.channels = channels\n        self.buffer_key = buffer_key\n        self.last_event_id = last_event_id\n        self.pubsub = self.rcon.pubsub()\n        self.pubsub.subscribe(channels)\n\n    def __iter__(self):\n        # If we've been initted with a buffer key, then get all the events off\n        # that and spew them out before blocking on the pubsub.\n        if self.buffer_key:\n            buffered_events = self.rcon.lrange(self.buffer_key, 0, -1)\n\n            # check whether msg with last_event_id is still in buffer.  If so,\n            # trim buffered_events to have only newer messages.\n            if self.last_event_id:\n                # Note that we're looping through most recent messages first,\n                # here\n                counter = 0\n                for msg in buffered_events:\n                    if (json.loads(msg)['id'] == self.last_event_id):\n                        break\n                    counter += 1\n                buffered_events = buffered_events[:counter]\n\n            for msg in reversed(list(buffered_events)):\n                # Stream out oldest messages first\n                yield to_sse({'data': msg})\n        try:\n            for msg in self.pubsub.listen():\n                if msg['type'] == 'message':\n                    yield to_sse(msg)\n        finally:\n            logging.info('Closing pubsub')\n            self.pubsub.close()\n            self.rcon.connection_pool.disconnect()\n</code></pre>\n\n<p>I'm able to successfully stream events out to the browser with this setup.  However, it seems that the disconnect calls in the listener's \"finally\" don't ever actually get called.  I assume that they're still camped out waiting for messages to come from the pubsub.  As clients disconnect and reconnect, I can see the number of connections to my Redis instance climbing and never going down.  Once it gets to around 1000, Redis starts freaking out and consuming all the available CPU.</p>\n\n<p>I would like to be able to detect when the client is no longer listening and close the Redis connection(s) at that time.</p>\n\n<p>Things I've tried or thought about:</p>\n\n<ol>\n<li>A connection pool.  But as the <a href=\"https://github.com/andymccurdy/redis-py\" rel=\"nofollow\">redis-py</a> README states, \"It is not safe to pass PubSub or Pipeline objects between threads.\"</li>\n<li>A middleware to handle the connections, or maybe just disconnections.  This won't work because a middleware's process_response() method gets called too early (before http headers are even sent to the client).  I need something called when the client disconnects while I'm in the middle of streaming content to them.</li>\n<li>The <a href=\"https://docs.djangoproject.com/en/dev/ref/signals/#request-finished\" rel=\"nofollow\">request_finished</a> and <a href=\"https://docs.djangoproject.com/en/dev/ref/signals/#got-request-exception\" rel=\"nofollow\">got_request_exception</a> signals.  The first, like process_response() in a middleware, seems to fire too soon.  The second doesn't get called when a client disconnects mid-stream.</li>\n</ol>\n\n<p>Final wrinkle: In production I'm using Gevent so I can get away with keeping a lot of connections open at once.  However, this connection leak issue occurs whether I'm using plain old 'manage.py runserver', or Gevent monkeypatched runserver, or Gunicorn's gevent workers.</p>\n"},{"tags":["python","django","github","aptana"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":110,"score":0,"question_id":12867681,"title":"Utilizing a third party application for GitHub in a django project","body":"<p>I'm trying to use a third party application located here: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>git://github.com/Star2Billing/django-audiofield.git\n</code></pre>\n\n<p>I'm using Aptana Studio as my IDE. I created my project and then I clicked on the project and imported the app from the github location. It looked like it imported. I wanted to check that it imported properly before beginning any real coding so I performed <em><code>manage.py validate</code></em>. </p>\n\n<p>I got a message that stated: <code>\"No module named audiofield\"</code>. I added the app to my Installed Apps settings and followed the installation instructions.  </p>\n\n<p>I'm not sure if I'm importing it incorrectly. Also, I'm using <code>virtualenv</code> in Aptana. I'm not sure if this may have added to the problem.</p>\n\n<p>Please help.  </p>\n\n<p>Update: Thank you dm0351. I did what you suggested. However, I'm getting the following:</p>\n\n<pre><code>Traceback (most recent call last):\n File \"/Users/home/Desktop/Web Development/Aptana Studio 3.0/musicproject/src/manage.py\",    line 10, in &lt;module&gt;\nexecute_from_command_line(sys.argv)\n File \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/__init__.py\", line 443, in execute_from_command_line\nutility.execute()\n File \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/__init__.py\", line 382, in execute\nself.fetch_command(subcommand).run_from_argv(self.argv)\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py\", line 196, in run_from_argv\nself.execute(*args, **options.__dict__)\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py\", line 232, in execute\noutput = self.handle(*args, **options)\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py\", line 371, in handle\nreturn self.handle_noargs(**options)\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/commands/validate.py\", line 9, in handle_noargs\nself.validate(display_num_errors=True)\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/base.py\", line 266, in validate\nnum_errors = get_validation_errors(s, app)\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/core/management/validation.py\", line 30, in get_validation_errors\nfor (app_name, error) in get_app_errors().items():\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/db/models/loading.py\", line 158, in get_app_errors\nself._populate()\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/db/models/loading.py\", line 67, in _populate\nself.load_app(app_name)\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/db/models/loading.py\", line 88, in load_app\nmodels = import_module('.models', app_name)\nFile \"/Users/home/virtualenv/venv/lib/python2.7/site-packages/django/utils/importlib.py\", line 35, in import_module\n__import__(name)\nFile \"/Users/home/virtualenv/venv/src/audiofield/audiofield/models.py\", line 19, in &lt;module&gt;\nfrom audiofield.fields import AudioField\nFile \"/Users/home/virtualenv/venv/src/audiofield/audiofield/fields.py\", line 20, in &lt;module&gt;\nfrom tasks import audio_convert_task\nFile \"/Users/home/virtualenv/venv/src/audiofield/audiofield/tasks.py\", line 14, in &lt;module&gt;\nfrom celery.task import Task\nImportError: No module named celery.task\nFinished \"/Users/home/Desktop/Web Development/Aptana Studio 3.0/musicproject/src/manage.py  validate\" execution.\n</code></pre>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12888144,"title":"Is there any way that classes always inherit from some base class","body":"<p>In my application i have the requirement of keppling logs of all models changes and delete.\nSo i have created baseclass <code>Audit</code> and extended all classes from it.</p>\n\n<p>I have overridden save , delete methods in it so that i keep old chnages as well when we do some updation.</p>\n\n<p>I want to know that is there any better way of doing that rather than extending all classes fron base class. Or is it all right like that.</p>\n"},{"tags":["python","django","django-models"],"answer_count":3,"favorite_count":3,"up_vote_count":1,"down_vote_count":0,"view_count":1092,"score":1,"question_id":2878490,"title":"How to delete old image when update ImageField?","body":"<p>I'm using Django to create a stock photo site, I have a ImageField in my model, the problem is that when the user update the image field, the original image file isn't deleted from the hard disk.</p>\n\n<p>how can I make to delete those images after an update?</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","django","postgresql","django-models"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":88,"score":2,"question_id":12879256,"title":"Why does Django ORM allow me to omit parameters for NOT NULL fields when creating an object?","body":"<p>Stupid question time.  I seem to be able to create an object for a Django model even though I omit a column that was defined as NOT NULL and I don't understand why.  Here's my model:</p>\n\n<pre><code>class Movie(models.Model):\n    name = models.CharField(max_length=256)\n    length_minutes = models.IntegerField()\n    rating = models.CharField(max_length=2)\n\n    class Meta:\n        db_table = 'movies'\n</code></pre>\n\n<p>When I run <code>python manage.py</code> sql I see:</p>\n\n<pre><code>BEGIN;\nCREATE TABLE \"movies\" (\n  \"id\" serial NOT NULL PRIMARY KEY,\n  \"name\" varchar(256) NOT NULL,\n  \"length_minutes\" integer NOT NULL,\n  \"rating\" varchar(2) NOT NULL\n);\nCOMMIT;\n</code></pre>\n\n<p>Also, if I run the command <code>\\d movies</code> from the <code>psql</code>, I can see that all columns are designated <code>NOT NULL</code>.</p>\n\n<p>But here's what I don't understand.  When I run the Python shell, I can issue the following command and a new row with an empty 'name' column will be created:</p>\n\n<pre><code>Movie.objects.create(length_minutes=120, rating='PG')\n</code></pre>\n\n<p>However, if I issue (what I believe to be) the equivalent SQL command:</p>\n\n<pre><code>INSERT INTO movies(length_minutes, rating) VALUES(120, 'PG');\n</code></pre>\n\n<p>... I get the error I would expect: \"ERROR: null value... violates not-null constraint.\"</p>\n\n<p>Why does Django's ORM allow me to create an object that lacks a parameter for a <code>NOT NULL</code> CharField column?  Does it assume that I'm using model validators?  If so, it seems to be a pretty dumb and trusting ORM.</p>\n\n<p>I'm using Python 2.7.1, Django 1.4, and PostgreSQL 9.1.4.</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12886842,"title":"Opening spreadsheet returns InMemoryUploadedFile","body":"<p>I have a user uploading a file to a website and I need to parse the spreadsheet. Here is my code:</p>\n\n<pre><code>input_file = request.FILES.get('file-upload')\nwb = xlrd.open_workbook(input_file)\n</code></pre>\n\n<p>The error I keep getting is:</p>\n\n<pre><code>TypeError at /upload_spreadsheet/\ncoercing to Unicode: need string or buffer, InMemoryUploadedFile found\n</code></pre>\n\n<p>Why is this happening and what do I need to do to fix it? Thank you.</p>\n\n<p>For reference, this is how I open the file in the shell</p>\n\n<pre><code>&gt;&gt;&gt; import xlrd\n&gt;&gt;&gt; xlrd.open_workbook('/Users/me/dave_example.xls')\n&lt;xlrd.Book object at 0x10d9f7390&gt;\n</code></pre>\n"},{"tags":["python","django","static","http-status-code-404"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12886134,"title":"Django local static files path puzzle","body":"<p>I'm trying to render static files locally in development. I have followed the rules and placed stylesheets in <code>/static/</code> in my Django project folder, setting <code>STATIC_URL = '/static/'</code>. Using the <code>{{ STATIC_URL }}</code> template tag works and the paths rendered in the document head point to the correct directory (as far as I can tell), e.g.:</p>\n\n<pre><code>http://localhost:8000/static/css/bootstrap.min.css\n</code></pre>\n\n<p>This returns a 404, and of course, there's no styling.</p>\n\n<p>I started with <code>/static</code> and its contents (i.e. <code>/css/bootstrap.min.css</code>) in the project root folder. I then copied it and its entire contents to all the other app directories, to try different places Django might be looking. Still 404.</p>\n\n<p>Relevant settings in <code>settings.py</code>:</p>\n\n<pre><code>DEBUG = True\n\nSTATIC_URL = '/static/'\n\nINSTALLED_APPS = (\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'django.contrib.humanize',\n    'south',\n    'users',\n    'registration',\n    'django_extensions',\n    'django.contrib.admin',\n)\n</code></pre>\n\n<p>What's going wrong?</p>\n\n<p>Matt</p>\n"},{"tags":["django","authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12886146,"title":"Django password reset stuck in loop","body":"<p>I am trying to add a user reg system to my Django site. Obviously, I want to use the built-in auth views and forms. I am going about implementing the auth password reset process. It works fine up to sending the email, but then does not redirect properly. The end result is the password reset done email being sent over and over and over. I am overriding the templates, but nothing else, right now all they have is:</p>\n\n<pre><code>{{form.As_p}}\n</code></pre>\n\n<p>I have changed my <code>urls.py</code> to use the <code>auth.views</code> as such:</p>\n\n<pre><code>from django.contrib.auth import views as auth_views\n\n(r'^account/forgot/$',\n auth_views.password_reset, \n {'template_name': 'registration/password_reset.html',\n  'post_reset_redirect':'/account/password-reset-done'}\n),\n(r'^account/password-reset-done/$',\n auth_views.password_reset_done,\n {'template_name': 'registration/password_reset_done.html'}\n),\n</code></pre>\n"},{"tags":["django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12886369,"title":"Dynamic navigation Django","body":"<p>I have managed to build a simple website using Django and am wanting to add a navigation system that can be managed in the admin </p>\n\n<p>I have tried <a href=\"https://github.com/rossp/django-menu\" rel=\"nofollow\">https://github.com/rossp/django-menu</a> and followed the instructions but get just an empty unordered list</p>\n\n<p>views.py </p>\n\n<pre><code>from django.shortcuts import get_object_or_404, render_to_response\nfrom django.views.generic.list_detail import object_list\nfrom mainsite.models import Page, Image\nfrom django.template import RequestContext\nfrom django.template import Context\n\n# Create your views here.\ndef home(request):\n    return render_to_response('page/page.html')\n\n\ndef page(request, slug):\n    one_page = get_object_or_404(Page, slug=slug)\n    return render_to_response('page/page.html', {\n        'one_page': one_page,\n    }, context_instance=RequestContext(request))\n</code></pre>\n\n<p>Base.html</p>\n\n<pre><code>&lt;ul&gt;{% load menubuilder %}{% menu headernavigation %}\n        {% for item in menuitems %}&lt;li&gt;&lt;a href=\"{{ item.url }}\" title=\"{{   item.title|escape }}\"{% if item.current %} class='current'{% endif %}&gt;{{ item.title }}&lt;/a&gt;&lt;/li&gt;\n        {% endfor %}\n    &lt;/ul&gt;\n</code></pre>\n\n<p>I am a beginner so any help with this would be grateful</p>\n\n<p>Thanks</p>\n"},{"tags":["python","django","nginx","gunicorn","linode"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12886139,"title":"gunicorn on linode not launching","body":"<p>I'm using gunicorn to deploy my python web application.</p>\n\n<p>When I launch it using this command gunicorn_django -c gunicorn.conf.py, i get this error:    </p>\n\n<pre><code>root@localhost:/var/www/map01# gunicorn_django -c gunicorn.conf.py\n2012-10-14 20:11:32 [4594] [INFO] Starting gunicorn 0.14.6\n2012-10-14 20:11:32 [4594] [INFO] Listening at: http://127.0.0.1:8888 (4594)\n2012-10-14 20:11:32 [4594] [INFO] Using worker: sync\n2012-10-14 20:11:32 [4597] [INFO] Booting worker with pid: 4597\n2012-10-14 20:11:32 [4598] [INFO] Booting worker with pid: 4598\n2012-10-14 20:11:32 [4599] [INFO] Booting worker with pid: 4599\n2012-10-14 15:11:32 [4597] [INFO] Worker exiting (pid: 4597)\n2012-10-14 15:11:32 [4598] [INFO] Worker exiting (pid: 4598)\n2012-10-14 15:11:32 [4599] [INFO] Worker exiting (pid: 4599)\nTraceback (most recent call last):\n  File \"/usr/local/bin/gunicorn_django\", line 9, in &lt;module&gt;\n    load_entry_point('gunicorn==0.14.6', 'console_scripts', 'gunicorn_django')()\n  File \"/usr/local/lib/python2.7/dist-packages/gunicorn/app/djangoapp.py\", line 132, in run\n    DjangoApplication(\"%prog [OPTIONS] [SETTINGS_PATH]\").run()\n  File \"/usr/local/lib/python2.7/dist-packages/gunicorn/app/base.py\", line 124, in run\n    Arbiter(self).run()\n  File \"/usr/local/lib/python2.7/dist-packages/gunicorn/arbiter.py\", line 185, in run\n    self.halt(reason=inst.reason, exit_status=inst.exit_status)\n  File \"/usr/local/lib/python2.7/dist-packages/gunicorn/arbiter.py\", line 280, in halt\n    self.stop()\n  File \"/usr/local/lib/python2.7/dist-packages/gunicorn/arbiter.py\", line 328, in stop\n    self.reap_workers()\n  File \"/usr/local/lib/python2.7/dist-packages/gunicorn/arbiter.py\", line 419, in reap_workers\n    raise HaltServer(reason, self.WORKER_BOOT_ERROR)\ngunicorn.errors.HaltServer: &lt;HaltServer 'Worker failed to boot.' 3&gt;\n</code></pre>\n\n<p>This is the gunicorn.conf.py file:</p>\n\n<pre><code>bind = u\"127.0.0.1:8888\"\nlogfile = u\"/var/www/map00/gunicorn.log\"\nworkers = 3\n</code></pre>\n\n<p>On my personal computer, gunicorn work perfectly.\nCan someone please give me a hint on what is going on?</p>\n\n<p>Thank you for your time and kind concern.</p>\n\n<p>Jenia Ivlev</p>\n"},{"tags":["android","django","facebook","api","rest"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":12886129,"title":"How to notify django that the user logged-in via facebook on his Android?","body":"<p>I'm building an Android application where the only way for the user to use is through the \"Login with Facebook\" button ... My backend is built using Django.</p>\n\n<p>How can I notify Django that the user logged in via his facebook account so that he's allowed to consume the webservice resources ?</p>\n"},{"tags":["django","forms","file-upload"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":361,"score":1,"question_id":12812808,"title":"Form and File Uploading in Django","body":"<p>I have been trying to figure out what is going wrong when I try to submit a form.\nI get this response on the web page when I hit submit on the form:</p>\n\n<pre><code>Image:\n    This field is required.\n</code></pre>\n\n<p>It seems to think I have not included an image in the form!</p>\n\n<h2><strong>settings.py</strong></h2>\n\n<pre><code>...\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': '/path/to/myproject/database/sqlite.db'),\n        'USER': '',\n        'PASSWORD': '',\n        'HOST': '',\n        'PORT': '',\n    }\n}\n...\nMEDIA_ROOT = '/path/to/myproject/media/'\nMEDIA_URL = '/media/'\n...\nINSTALLED_APPS = (\n    ...\n    'myapp',\n)\n</code></pre>\n\n<h2><strong>models.py</strong></h2>\n\n<pre><code>from PIL import Image\nfrom django import forms\nfrom django.db import models\nfrom django.forms import ModelForm\n\nUPLOADER_CHOICES = (\n    ('C', 'Common User'),\n    ('N', 'Nutrition Kitchen'),\n)\n\nclass Meal(models.Model):\n\n    title       = models.CharField(max_length=100)\n    slug        = models.SlugField(unique=True)\n    image       = models.ImageField(upload_to='images/')\n    serves      = models.IntegerField()\n    ingredients = models.CharField(max_length=1000)\n    instructions= models.CharField(max_length=1000)\n    time_period = models.IntegerField()# in minutes\n    uploader    = models.CharField(max_length=1, choices=UPLOADER_CHOICES)\n\ndef __unicode__(self):\n    return self.title\n</code></pre>\n\n<h2><strong>forms.py</strong></h2>\n\n<pre><code>from django import forms\nfrom meal.models import Meal\n\nclass MealForm(forms.Form):\n\n    title       = forms.CharField(max_length=100)\n    image       = forms.ImageField()\n    ingredients = forms.CharField(max_length=1000)\n    instructions= forms.CharField(max_length=1000)\n    time_period = forms.IntegerField(required=False)\n    serves      = forms.IntegerField(required=False)\n</code></pre>\n\n<h2><strong>views.py</strong></h2>\n\n<pre><code>from django.shortcuts import render_to_response\nfrom django.template import RequestContext\nfrom django.http import HttpResponseRedirect\nfrom django.shortcuts import render_to_response\nfrom meal.models import Meal\nfrom meal.forms import MealForm\n\ndef upload(request):\n    if request.method == 'POST':\n        form = MealForm(request.POST, request.FILES)\n        if form.is_valid():\n            form.save()\n            return render_to_response('upload.html', {'form': form})\n    else:\n        form = MealForm()\n    return render_to_response('upload.html', {'form': form}, context_instance=RequestContext(request)\n    )\n</code></pre>\n\n<h2><strong>upload.html</strong></h2>\n\n<pre><code>{% extends \"base.html\" %}\n{% block content %}\n{% if form.errors %}\n        &lt;p style=\"color: red;\"&gt;\n            Please correct the error{{ form.errors|pluralize }} below.\n        &lt;/p&gt;\n{% endif %}\n&lt;div data-role=\"content\" style=\"padding: 15px\"&gt;\n    &lt;form action=\"\" method=\"POST\" enctype=\"multipart/form-data\"&gt;\n            {% csrf_token %}\n            {{ form.errors }}\n            {{ form.non_field_errors }}\n            {{ form.as_table }}\n        &lt;input type=\"submit\" value=\"Submit\" id=\"Save\"&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n{% endblock %}\n</code></pre>\n\n<p>Does anyone have any ideas about what I could be doing wrong? I feel like I've tried everything.</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12884140,"title":"Django-postman get message list","body":"<p>I've installed and configured <code>django-postman</code> based on this <a href=\"http://django-postman.readthedocs.org/en/latest/index.html\" rel=\"nofollow\">documentation</a>.</p>\n\n<p>Everything is ok. Now I want to get a message list(list of unread and undeleted messages) of authenticated users in a template, but that sounds like this is just an inbox view that shows it completely (with inbox, trash, sent, received messages) while I just need a message list. Any ideas?</p>\n"},{"tags":["django","filter","request","chaining"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12885609,"title":"Django how to chain sorting and filtering by GET request","body":"<p>When I select ordering I can't really include automatically per-page filter.\nHow do I make these filters \"visible\" to each other? What do I need include or read?</p>\n\n<p>That's a small part of my view.py</p>\n\n<pre><code>if order == 'asc':\n    p = p.order_by('name')\nelif order == 'desc':\n    p = p.order_by('-name')\nelif order == 'price_asc':\n    p = p.order_by('price_netto')\nelif order == 'price_desc':\n    p = p.order_by('-price_netto')\nelse:\n    p.order_by('name')\n\nif limit == \"12\":\n    per_page = \"12\"\nelif limit == \"24\":\n    per_page = \"24\"\nelif limit == \"48\":\n    per_page = \"48\"\nelse:\n    from endless_pagination.settings import PER_PAGE\n    per_page = PER_PAGE\n</code></pre>\n\n<p>HTML</p>\n\n<pre><code>        &lt;select onchange=\"location = this.options[this.selectedIndex].value\"&gt;\n            &lt;option value=\"\"&gt;--- Sortowanie ---&lt;/option&gt;\n            &lt;option rel=\"order\" value=\"?order=desc\"&gt;Malejąco według nazwy&lt;/option&gt;\n            &lt;option rel=\"order\" value=\"?order=asc\"&gt;Rosnąco według nazwy&lt;/option&gt;\n            &lt;option rel=\"order\" value=\"?order=price_asc\"&gt;Rosnąco według ceny&lt;/option&gt;\n            &lt;option rel=\"order\" value=\"?order=price_desc\"&gt;Malejąco według ceny&lt;/option&gt;\n        &lt;/select&gt;\n        Produktów na stronę:\n        &lt;a rel=\"limit\" href=\"?limit=12\"&gt;12&lt;/a&gt;, &lt;a rel=\"limit\" href=\"?limit=24\"&gt;24&lt;/a&gt;, &lt;a rel=\"limit\" href=\"?limit=48\"&gt;48&lt;/a&gt;\n</code></pre>\n"},{"tags":["django","cookies","middleware"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12885221,"title":"How can I set cookies in a Django middleware?","body":"<p>I tried several version of this:</p>\n\n<pre><code>def process_response(self, request, response):\n\n    if not request.COOKIES.get('new_user', None):\n\n        print \"cookie\"\n\n        max_age = 365 * 24 * 60 * 60  # 10 years\n        expires = datetime.datetime.utcnow() + datetime.timedelta(seconds=max_age)\n        response.set_cookie('new_user', expires=expires)\n\n\n    return response\n</code></pre>\n\n<p>But it doesn't work: I get \"cookie\" printed at every page request, and no cookie is appearing in my FF dev toolbar cookie lister. I didn't set any of my browser to reject cookies.</p>\n\n<p>I'm currently using the developpement server and I do have the common and session middlewares set as the first ones in settings. I don't have any cookie settings set.</p>\n"},{"tags":["python","django","forms","date"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":63,"score":3,"question_id":12884638,"title":"select future dates only django form","body":"<p>I'm using the <code>SelectDateWidget</code> in my form.</p>\n\n<p>Now I want to ensure that the form should only allow future dates, the widget should not set the past dates.\nIs there any way that the widget itself should handle it, it should start from tomorrow's date.</p>\n\n<p>forms.py</p>\n\n<pre><code>import datetime\nfrom django.forms.extras.widgets import SelectDateWidget\nclass HmsDiagnosisForm(ModelForm):\n    reconsultation_date = forms.DateField(widget=SelectDateWidget)\n</code></pre>\n"},{"tags":["python","django","vim"],"answer_count":5,"favorite_count":34,"up_vote_count":34,"down_vote_count":0,"view_count":12304,"score":34,"question_id":978643,"title":"Vim, Python, and Django autocompletion (pysmell?)","body":"<p>Does anyone know how to set up auto completion to work nicely with python, django, and vim?</p>\n\n<p>I've been trying to use pysmell, but I can't seem to get it set up correctly (or maybe I don't know how it works). Right now, I run pysmell in the django directory (I'm using the trunk) and move the resulting tags to my project directory, then I also run pysmell in the project directory. Vim doesn't pick up the django tags, though, and they don't get auto completed.</p>\n\n<p>Does anyone know how to set up auto completion in vim so that it will complete the long django functions (like get_object_or_404) as well as classes/functions in my own code? I have poked around on google but haven't found any good resources.</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","django","json","django-views","jsonresult"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":583,"score":-1,"question_id":2822599,"title":"Django and JSON request","body":"<p>In a template I have the following code.</p>\n\n<pre><code>&lt;script&gt;\n    var url=\"/mypjt/my_timer\"\n\n    $.post(url, paramarr,\n    function callbackHandler(dict)\n    {\n        alert('got response back');\n        if (dict.flag == 2)\n        {\n            alert('1');\n            $.jGrowl(\"Data could not be saved\");\n        }\n        else if(dict.ret_status == 1)\n        {\n            alert('2');\n            $.jGrowl(\"Data saved successfully\");\n            window.location = \"/mypjt/display/\" + dict.rid;\n        }\n    },\n    \"json\"\n    );\n&lt;/script&gt;\n</code></pre>\n\n<p>In views I have the following code,</p>\n\n<pre><code>def my_timer(request):\n    dict={}\n    try:\n        a = timer.objects.get(pk=1)\n\n        dict({'flag':1})\n        return HttpResponse(simplejson.dumps(dict), mimetype='application/javascript')\n\n    except:\n        dict({'flag':1})\n        return HttpResponse(simplejson.dumps(dict), mimetype='application/javascript')\n</code></pre>\n\n<p>Since we are making a JSON request and in the try block, after setting the flag, can't we return a page directly as</p>\n\n<pre><code>return render_to_response('mypjt/display.html',context_instance=RequestContext(request,{'dict': dict}))\n</code></pre>\n\n<p>instead of sending the response, because on success again in the HTML page we redirect the code?</p>\n\n<p>Also if there is a exception then only can we return the JSON request.</p>\n\n<p>My only concern is that the interaction between client and server should be minimal.</p>\n"},{"tags":["python","django","forms","filter"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":29,"score":1,"question_id":12761350,"title":"save the filtered forms based on data entries","body":"<p><strong>views.py</strong></p>\n\n<pre><code>def list(request):   \n    list = HmsDiagnosis.objects.all()   \n    return render_to_response('diagnosis/list.html', {'list': list}, context_instance=RequestContext(request))   \n\ndef add(request):   \n    if request.method == 'POST':    \n        form = HmsDiagnosisForm(request.POST)   \n        if form.is_valid():   \n           form.save()   \n           return list(request)    \n        else :    \n           raise RuntimeError('Check the details, Form is invalid')   \n    else :    \n        action = HmsDiagnosis().get_add_url()     \n        form = HmsDiagnosisForm()        \n        c = {'form': form, 'action' : action}     \n        c.update(csrf(request))         \n        return render_to_response('add.html', c, context_instance=RequestContext(request))    \n</code></pre>\n\n<p><strong>forms.py</strong>     </p>\n\n<pre><code>class HmsDiagnosisForm(ModelForm):     \n    datetime = forms.DateTimeField(initial = datetime.datetime.now,widget=widgets.AdminSplitDateTime)      \n    reconsultation_datetime = forms.DateTimeField(widget=widgets.AdminSplitDateTime)    \n    class Meta:    \n        model = HmsDiagnosis     \n        exclude = ('id')  \n</code></pre>\n\n<p>I need to make lists of people undergoing different test as soon as their form is submitted. How do I do this?</p>\n"},{"tags":["django","email","pop3","django-email"],"answer_count":5,"favorite_count":7,"up_vote_count":14,"down_vote_count":1,"view_count":5104,"score":13,"question_id":730573,"title":"django to send AND receive email?","body":"<p>I have gotten quite familiar with django's email sending abilities, but I havn't seen anything about it receiving and processing emails from users. Is this functionality available? </p>\n\n<p>A few google searches have not turned up very promising results. Though I did find this: <a href=\"http://stackoverflow.com/questions/348392/receive-and-send-emails-in-python\">http://stackoverflow.com/questions/348392/receive-and-send-emails-in-python</a></p>\n\n<p>Am I going to have to roll my own? if so, I'll be posting that app faster than you can say... whatever you say.</p>\n\n<p>thanks,\nJim</p>\n\n<p><strong>update</strong>: I'm not trying to make an email server, I just need to add some functionality where you can email an image to the site and have it pop up in your account.</p>\n"},{"tags":["python","django","middleware"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":10504911,"title":"Django \"global login\" middleware causing duplicate GET requests","body":"<p>I have a Django website that requires users to be logged in to view any page. I added some middleware according to the instructions on <a href=\"http://webcache.googleusercontent.com/search?q=cache%3ahMQ1XNLtAxsJ%3aonecreativeblog.com/post/59051248/django-login-required-middleware%20&amp;cd=1&amp;hl=en&amp;ct=clnk&amp;gl=us\" rel=\"nofollow\">this page</a>. The middleware does redirect users to the login page as expected, however the GET request is duplicated every time. Why is the request sent twice? (Or possibly output to the Django console twice?) Here is the output from the Django console after navigating to <code>127.0.0.1/reservations/</code>:</p>\n\n<pre><code>[08/May/2012 15:08:41] \"GET /reservations/ HTTP/1.1\" 302 0\n[08/May/2012 15:08:42] \"GET /login/ HTTP/1.1\" 200 575\n[08/May/2012 15:08:42] \"GET /login/ HTTP/1.1\" 200 575\n</code></pre>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":53,"score":3,"question_id":12883830,"title":"In Django, how would I send a request for http://localhost:8000/ to a dynamic location","body":"<p>I'm new to django.  The question I have is simple, but I couldn't really figure out what I needed from tutorials I have found online, nor in a book I have purchased on django.</p>\n\n<p>I am writing a website to house an online comic.  Let's say the url is:</p>\n\n<pre><code>http://localhost:8000/\n</code></pre>\n\n<p>I want a request for the base url to go to the most recent comic.  If there are 13 comics, then I want a user requesting the above url to be sent to:</p>\n\n<pre><code>http://localhost:8000/13\n</code></pre>\n\n<p>At the same time, I want a user that types in <code>http://localhost:8000/13</code> to go to the url specified.  How would I do this?</p>\n"},{"tags":["django","python-mock","django-nose"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12883906,"title":"Django ORM - mock values().filter() chain","body":"<p>I am trying to mock a chained call on the Djangos <code>model.Manager()</code> class. For now I want to mock the <code>values()</code> and <code>filter()</code> method.</p>\n\n<p>To test that I created a little test project:</p>\n\n<ol>\n<li>Create a virtual environment</li>\n<li>Run <code>pip install django mock mock-django nose django-nose</code></li>\n<li>Create a project <code>django-admin.py startproject mocktest</code></li>\n<li>Create an app <code>manage.py startapp mockme</code></li>\n<li>Add <code>django_nose</code> and <code>mocktest.mockme</code> to <code>INSTALLED_APPS</code> (settings.py)</li>\n<li>Add <code>TEST_RUNNER = 'django_nose.NoseTestSuiteRunner'</code> to settings.py</li>\n</ol>\n\n<p>To verfiy that everything is setup correctly I ran <code>manage.py test</code>. One test is run, the standard test Django creates when you create an app.</p>\n\n<p>Next thing I did was to create a very simple model.</p>\n\n<p><strong>mockme/models.py</strong></p>\n\n<pre><code>from django.db import models\n\nclass MyModel(models.Model):\n    name = models.CharField(max_length=50)\n</code></pre>\n\n<p>Next thing I did was to create a simple function that uses <code>MyModel</code>. That's the function I want to test later.</p>\n\n<p><strong>mockme/functions.py</strong></p>\n\n<pre><code>from models import MyModel\n\ndef chained_query():\n    return MyModel.objects.values('name').filter(name='Frank')\n</code></pre>\n\n<p>Nothing special is happening here. The function is filtering the MyModel objects to find all instances where <code>name='Frank'</code>. The call to values() will return a <code>ValuesQuerySet</code> which will only contain the name field of all found MyModel instances.</p>\n\n<p><strong>mockme/tests.py</strong></p>\n\n<pre><code>import mock\n\nfrom django.test import TestCase\nfrom mocktest.mockme.models import MyModel\nfrom mocktest.mockme.functions import chained_query\nfrom mock_django.query import QuerySetMock\n\nclass SimpleTest(TestCase):\n    def test_chained_query(self):\n        # without mocked queryset the result should be 0\n        result = chained_query()\n        self.assertEquals(result.count(), 0)\n\n        # now try to mock values().filter() and reeturn\n        # one 'Frank'.\n        qsm = QuerySetMock(MyModel, MyModel(name='Frank'))\n        with mock.patch('django.db.models.Manager.filter', qsm):\n            result = chained_query()\n            self.assertEquals(result.count(), 1)\n</code></pre>\n\n<p>The first assertEquals will evaluate as successful. No instances are returned since the model Manager is not mocked yet. When the second assertEquals is called I expect <code>result</code> to contain the MyModel instance I added as return value to the QuerySetMock:</p>\n\n<pre><code>qsm = QuerySetMock(MyModel, MyModel(name='Frank'))\n</code></pre>\n\n<p>I mocked the <code>filter()</code> method and not the <code>values()</code> method since I found it'll be the last evaluated call, though I am not sure.</p>\n\n<p>The test will fail because the second result variable won't contain any MyModel instances.</p>\n\n<p>To be sure that the <code>filter()</code> method is really mocked I added a \"debug print\" statement:</p>\n\n<pre><code>from django.db import models\nprint models.Manager.filter\n</code></pre>\n\n<p>which returned</p>\n\n<pre><code>&lt;SharedMock name='mock.iterator' id='4514208912'&gt;\n</code></pre>\n\n<h1>What am I doing wrong?</h1>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12760257,"title":"Storing data from multiple threads","body":"<p>Uploading files (images) via ajax multi-uploader (http://github.com/valums/file-uploader). Each uploaded file is saved in temp file. Put temp file name in dict with key of original name. Later every image will be resized in several sizes and saved to s3 storage. The problem is that there're at least 2 instances of the dict when uploading with excluding file names set, so I get partial dict at the end. How or where can I store the dict to update them from any thread. Tryed global with locking (read somewhere, that globals are accessible from all threads) - doesn't work.</p>\n"},{"tags":["django","django-urls"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":338,"score":1,"question_id":9879259,"title":"How to pass url parameter to reverse_lazy in Django urls.py","body":"<p>Consider that I have 1 resource and 2 urls (let's say new one and old one) connected to that resourse. So, i want to setup HTTP redirection for one of urls.</p>\n\n<p>In <code>myapp/urls.py</code> I have:</p>\n\n<pre><code>urlpatterns = patterns('',\n    url(r'^(?P&lt;param&gt;\\d+)/resource$', \n                      'myapp.views.resource', \n                       name='resource-view'\n    ),\n)\n</code></pre>\n\n<p>In <code>mycoolapp/urls.py</code> I want to specify:</p>\n\n<pre><code>from django.views.generic.simple import redirect_to\nfrom django.core.urlresolvers import reverse_lazy\n\nurlpatterns = patterns('',\n    url(r'^coolresource/(?P&lt;param&gt;\\d+)/$', \n                       redirect_to, \n                       {\n                          'url': reverse_lazy('resourse-view', \n                                         kwargs={'param': &lt;???&gt;}, \n                                         current_app='myapp'\n                                 ),\n                       }\n   ),\n)\n</code></pre>\n\n<p>The question is how to pass <code>&lt;param&gt;</code> to the <code>reverse_lazy</code> kwargs (so, what to put instead of <code>&lt;???&gt;</code> in the example above)?</p>\n"},{"tags":["django","listview","mixins"],"answer_count":4,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":729,"score":4,"question_id":9338181,"title":"Django - Mixing ListView and CreateView","body":"<p>I'm new to django and I'm trying to work its magic</p>\n\n<p>I'm want to create one page with a form, and every time I submit the form it adds an item to the list below the form.</p>\n\n<p>I can make it work using 2 pages:</p>\n\n<ul>\n<li>one page using the mixin <code>CreateView</code> to add items</li>\n<li>one page <code>ListView</code> to have the list.</li>\n</ul>\n\n<hr>\n\n<p>But I'm trying to have the form and the list on the same page. So I tried to create a class with both mixin:</p>\n\n<pre><code>class FormAndListView(ListView, CreateView):\n    pass\n</code></pre>\n\n<p>Then I've used this class:</p>\n\n<pre><code>FormAndListView.as_view(\n    queryset=PdfFile.objects.order_by('id'),\n    context_object_name='all_PDF',\n    success_url = 'listview',\n    form_class = UploadFileForm,\n    template_name='textfrompdf/index.html',)),\n</code></pre>\n\n<p>But when I try to load the page, I get the error: <code>Exception Value: 'FormAndListView' object has no attribute 'object'</code></p>\n\n<pre><code>Traceback:\nFile \"C:\\Program Files\\Python_2.7\\lib\\site-packages\\django\\core\\handlers\\base.py\" in get_response\n  111.                         response = callback(request, *callback_args, **callback_kwargs)\nFile \"C:\\Program Files\\Python_2.7\\lib\\site-packages\\django\\views\\generic\\base.py\" in view\n  47.             return self.dispatch(request, *args, **kwargs)\nFile \"C:\\Program Files\\Python_2.7\\lib\\site-packages\\django\\views\\generic\\base.py\" in dispatch\n  68.         return handler(request, *args, **kwargs)\nFile \"C:\\Program Files\\Python_2.7\\lib\\site-packages\\django\\views\\generic\\list.py\" in get\n  122.         return self.render_to_response(context)\nFile \"C:\\Program Files\\Python_2.7\\lib\\site-packages\\django\\views\\generic\\base.py\" in render_to_response\n  94.             template = self.get_template_names(),\nFile \"C:\\Program Files\\Python_2.7\\lib\\site-packages\\django\\views\\generic\\list.py\" in get_template_names\n  134.             names = super(MultipleObjectTemplateResponseMixin, self).get_template_names()\nFile \"C:\\Program Files\\Python_2.7\\lib\\site-packages\\django\\views\\generic\\detail.py\" in get_template_names\n  122.         if self.object and self.template_name_field:\n\nException Type: AttributeError at /PDF/\nException Value: 'FormAndListView' object has no attribute 'object'\n</code></pre>\n\n<p>I've no idea how to debug that. Where to start?</p>\n\n<p>Thanks!</p>\n\n<p>Nico</p>\n"},{"tags":["django","amazon-s3","storage"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":159,"score":0,"question_id":8271278,"title":"Do storage backends in Django handle deleting old static files?","body":"<p>I can set up a storage backend in Django and run <code>collectstatic</code> to generate all static files on my site. This works great. However, I'm wondering if Django provides any mechanism for deleting old static files which are no longer used.</p>\n\n<p>With a simple file-based backend, I could simply use <code>rsync</code> with <code>--delete</code> to deploy the newest files. I'm more concerned about this when using a backend such as S3. One option would be to cycle through containers and delete old containers, but this feels wrong.</p>\n\n<p>Ideally, there would be an rsync-like command I could run which would copy new files and  delete unused files for me. (Something like <a href=\"https://github.com/rumblelabs/asset_sync\" rel=\"nofollow\">Asset Sync</a> for Rails.)</p>\n\n<p>Alternatively, if I'm asking the wrong question, I welcome other solutions. Thanks!</p>\n"},{"tags":["django","django-views"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12883469,"title":"Django passing a queryset to template from views.py","body":"<p>I think i'm missing something very simple here, but I've not been able to turn up the solution yet. \nI'd like to produce a page which lists all objects matching a specific queryset. I've attempted the following, taking a value from the url to produce the appropriate query in the views.py. This query produces the expected output in the shell, but it doesn't seem to be being passed correctly to the template. </p>\n\n<p>In urls.py</p>\n\n<pre><code>url(r'browse/(?P&lt;sourcevolume&gt;\\w+)/$', inscription.views.browse_by_volume'),\n</code></pre>\n\n<p>In views.py</p>\n\n<pre><code>def browse_by_volume(request, sourcevolume):\n    inscriptions_in_volume = TranslationSource.objects.filter(source=sourcevolume)\n    return render_to_response('inscription/volume_browse.html', {'inscriptions_in_volume': inscriptions_in_volume})\n</code></pre>\n\n<p>Is there a mistake here, or method of doing this that i've completely missed? \nThanks.</p>\n"},{"tags":["database","django","linux","postgresql","opensuse"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12882868,"title":"Django cannot connect to Postgresql on Opensuse","body":"<p>I've configured everything as i would in another distro (i'm an arch user, and i installed opensuse on a desktop machine).</p>\n\n<p>As :</p>\n\n<ul>\n<li>Django and all it requirements (psycopg)</li>\n<li>Postgresql</li>\n<li>Created a User for my django server</li>\n<li>Created a Database</li>\n<li>Granted all power for the database for my new user</li>\n</ul>\n\n<p>Then, when starting syncdb to start working i get this message (I've changed users etc.. in this thread for user:question, password:password, database:question as it is in reality with other words):</p>\n\n<pre><code>FATAL:  Ident authentication failed for user \"question\"\n</code></pre>\n\n<p>After lurking i got the idea to change my pg_hba.conf file (located at : /var/lib/pgsql/data/pg_hba.conf)</p>\n\n<p>This is what I have:</p>\n\n<pre><code># TYPE  DATABASE        USER            ADDRESS                 METHOD\n\n# \"local\" is for Unix domain socket connections only\nlocal   all             all                                     trust\n# IPv4 local connections:\nhost    all             all             127.0.0.1/32            ident\n# IPv6 local connections:\nhost    all             all             ::1/128                 ident\n</code></pre>\n\n<p>My django conf file contains :</p>\n\n<pre><code>DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.postgresql_psycopg2',\n        'NAME': 'question',\n        'USER': 'question',\n        'PASSWORD': 'password',\n        'HOST': '127.0.0.1',\n        'PORT': '',\n    }\n}\n</code></pre>\n\n<p>I don't understand what i missed here, any ideas ?</p>\n"},{"tags":["django","django-forms"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":12881856,"title":"django don't show form","body":"<p>I want to make a form with some choises and display it. But in output html I didn't see form itself. Here are my files:</p>\n\n<p>views.py:</p>\n\n<pre><code>from django.http import HttpResponse, Http404\nfrom django.shortcuts import render_to_response\nfrom tasks.todoes.models import Note, Resource,/\n     File, Worker, Client, Task, ProblemByWorker, ProblemByUser, Categories\nfrom tasks.forms import NewTicketForm\n\ndef new_ticket2(request):\n    method = request.method\n    if request.method == 'POST':\n        form = NewTicketForm(request.POST)\n        if form.is_valid():\n            pass\n    else:\n        form = NewTicketForm()\n    return render_to_response('new_ticket2.html', {'form':form, 'method':method})\n</code></pre>\n\n<p>forms.py</p>\n\n<pre><code>from django import forms\nfrom tasks.todoes.models import Note, Resource, File, Worker, Client, Task,/\n   ProblemByWorker, ProblemByUser, Categories\n\nclass NewTicketForm(forms.Form):\n    name = forms.CharField(max_length=140)\n    pbus = forms.ChoiceField(choices = ProblemByUser.objects.all())\n    description = forms.CharField(widget=forms.Textarea)\n    clients = forms.ChoiceField(choices = Client.objects.all())\n    priority = forms.ChoiceField(choices = ('1','2','3','4','5'))\n    category = forms.ChoiceField(choices = Categories.objects.all())\n    start_date = forms.DateTimeField()\n    due_date = forms.DateTimeField()\n    workers = forms.ChoiceField(choices = Worker.objects.all())\n    percentage = forms.DecimalField(min_value=0, max_value=100)\n</code></pre>\n\n<p>new_ticket2.html</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;New Ticket&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    {% if form.errors %}\n        {{form.errors}}\n    {% endif %}\n    &lt;p&gt;{{ method }}&lt;/p&gt;\n    &lt;form action=\"\" method=\"post\"&gt;\n        &lt;table&gt;\n            {{ form.as_table }}\n        &lt;/table&gt;\n        &lt;input type=\"submit\"&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>in my output I see only \"GET\" and submit button:</p>\n\n<pre><code>&lt;html&gt;&lt;head&gt;\n    &lt;title&gt;New Ticket&lt;/title&gt;\n...&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;p&gt;GET&lt;/p&gt;\n    &lt;form action=\"\" method=\"post\"&gt;\n        &lt;table&gt;\n\n        &lt;/table&gt;\n        &lt;input type=\"submit\"&gt;\n    &lt;/form&gt;\n...&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>why so?</p>\n"},{"tags":["python","django","statistics","scipy","python-module"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":199,"score":3,"question_id":7819588,"title":"Using scipy.stats.stats in django after deployment","body":"<p>I am in the process of creating an django-powered (1.3) interface to a package that relies heavily in scipy.stats.stats (scipy version 0.9.0), called <code>ovl</code> . During early development phases, using djangos own development-server, this was no problem. After deployment using apache debian/2.2.9 and mod_wsgi 3.3, this causes a serious problem.</p>\n\n<p>Whatever view I'm trying to load in the browser, it starts loading, and keeps doing that for a good 5 minutes (until time-out) and a 500 page appears. \nJust importing scipy works but, does <i>not</i> make scipy.stats.stats or even scipy.stats available. This is no surprise; in the documentation in scipy's <strong>init</strong>.py it is stated that the subpackage <code>stats</code> needs to be imported explicitly. However, the same is said about the subpackage <code>cluster</code>, which imports in django (from the web <i>and</i> in the django-shell) without any problem and indeed shows up in <code>dir(scipy)</code>, which it <i>doesn't</i> in an ipython(0.10.2)-session, where it just doesn't show up, like I kinda expected.</p>\n\n<p>On the command <code>dir(scipy)</code>; it returns different results when coming from the web (a list of 568 strings, including the subpackage <code>cluster</code>) in the normal ipython shell (564 strings, no subpackage <code>cluster</code>) and surprise, surprise, in the django shell. In the django shell scipy has 570 attributes, including both <code>cluster</code> and <code>stats</code> packages.</p>\n\n<p>Another thing is, if I keep importing the <code>ovl</code>-package, while keeping the scipy.stats imports at a bit of a distance (not in one of the files of the app itself), sometimes I get a ViewDoesNotExist error stating that there is no method index in the views module while there clearly is one. Which reminds me of <a href=\"http://groups.google.com/group/django-users/browse_thread/thread/56ad04c5537db02d/8db31cb46d22dcd6?lnk=gst&amp;q=import+scipy#8db31cb46d22dcd6\" rel=\"nofollow\">this</a>.</p>\n\n<p>So now I'm thinking of these rather ugly solutions:</p>\n\n<ul>\n<li>Editing scipy's init to import the stats package so it appears 'normally' in dir(scipy) and is accessible through scipy.stats and I can use the old code.</li>\n<li>Snatching scipy's stat subpackage and making a regular package out of it (perhaps using a symlink)</li>\n</ul>\n\n<p>I'm reluctant in applying these solutions, however. The fact cluster shows up in scipy in a django environment worries me a bit. I thought maybe this has something to do with being www-data user when logging in from the web, but I don't know how to check for that. </p>\n\n<p>Did anyone else encounter this? Parts of this?\nOr otherwise helpful thoughts? </p>\n\n<p>Oh and another django deployment <i>does</i> work.</p>\n"},{"tags":["django","pagination","django-class-based-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12881751,"title":"Paginate category by posts in django","body":"<p>I've got a blog system, with categories and posts, as shown simplified below. </p>\n\n<p>I want to have a detail page for category, where I paginate the posts belonging to that category.</p>\n\n<pre><code>class Category(models.Model):\n    name = models.CharField(max_length=150)\n    slug = models.SlugField()\n\nclass Post(models.Model):   \n    title = models.CharField(max_length=90)\n    category = models.ForeignKey(Category, related_name=\"posts\")\n</code></pre>\n\n<p>I use django 1.4 and class based views. What is the correct way of doing this? I guess I need to use <code>paginate_queryset(queryset, page_size)</code>, but I don't know how. This is my basis for the view:</p>\n\n<pre><code>class CategoryDetailView(DetailView):\n    model = Category\n    queryset = object.posts.all()\n\n    def paginate_queryset(self, queryset, page_size):\n        pass\n</code></pre>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12879945,"title":"How to create breadcrumb in my view function?","body":"<p><em>(By chance, I removed my last question)</em></p>\n\n<p>How to create breadcrumb in my view function?</p>\n\n<pre><code>class Category(MPTTModel):\n    name = models.CharField(max_length=50, verbose_name=u'Name')\n    parent = TreeForeignKey('self', null=True, blank=True, related_name='children')\n    slug = models.SlugField()\n\nclass Product(models.Model):\n    name = models.CharField(max_length=50, verbose_name=u'Name')\n    slug = models.SlugField()\n    #category = models.ManyToManyField(Category, verbose_name=u'Category')\n    category = models.ForeignKey(Category)\n\n#views\ndef post_content(request, product_id):\n    product = get_object_or_404(Product, id = product_id)\n    return render_to_response('product_info.html', {'product':product},context_instance=RequestContext(request))\n</code></pre>\n\n<p>product_info.html</p>\n\n<pre><code>{{ product.name }}\n</code></pre>\n\n<p>I want in my single post info (<code>post_content</code>) breadcrumb with category.\nSomething like this:  Category > Subcategory > Sub-Subcategory .,,,</p>\n\n<p>Someone told me to use get_ancestors:</p>\n\n<p>Example:</p>\n\n<pre><code>{% for parent in category.get_ancestors %}\n  &lt;a href=\"{{ parent }}\"&gt;{{ parent.name }}&lt;/a&gt; &amp;gt;\n{% endfor %}\n{{ category.name }}\n</code></pre>\n\n<p>How to implement this with my model?</p>\n\n<p>Thank you. I would be grateful.</p>\n"},{"tags":["jquery","django","image"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":96,"score":1,"question_id":12875922,"title":"django_multiuploader Uncaught TypeError: Object [object Object] has no method 'fileupload'","body":"<p>i am using django_multiuploader in my app, and even thou i can upload the image, the fancy jquery eye candy is not happening (js,css), and after it finishes uploading it doesn't show me my image, only some json text info about the image. What am i doing wrong? i am getting this error when i inspect element:</p>\n\n<blockquote>\n  <p>Uncaught TypeError: Object [object Object] has no method 'fileupload' </p>\n</blockquote>\n\n<p>here is my code:</p>\n\n<pre><code>MEDIA_ROOT = os.path.join(BASE_DIR, 'site_media/')\nMEDIA_URL = '/site_media/'\nSTATIC_ROOT = os.path.join(BASE_DIR, '/static/')\nSTATIC_URL = '/static/'\n\nINSTALLED_APPS = (\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'registration',\n    'admin',      \n    'sorl.thumbnail',\n    'multiuploader', \n    # Uncomment the next line to enable the admin:\n    'django.contrib.admin',\n    # Uncomment the next line to enable admin documentation:\n    'django.contrib.admindocs',\n)\nTEMPLATE_CONTEXT_PROCESSORS = (\n        \"django.contrib.auth.context_processors.auth\",\n        \"django.core.context_processors.debug\",\n        \"django.core.context_processors.i18n\",\n        \"django.core.context_processors.media\",\n        \"django.core.context_processors.request\",\n        \"django.core.context_processors.static\",\n        \"django.core.context_processors.tz\",\n        \"django.contrib.messages.context_processors.messages\",\n        'social_auth.context_processors.social_auth_by_name_backends',\n        'social_auth.context_processors.social_auth_backends',\n        'social_auth.context_processors.social_auth_by_type_backends',\n        'social_auth.context_processors.social_auth_login_redirect',\n)\n</code></pre>\n\n<p>didnt change anything in the multiuploader app that i clone from <a href=\"https://github.com/garmoncheg/django_multiuploader\" rel=\"nofollow\">https://github.com/garmoncheg/django_multiuploader</a>\nmy media/multiuploader is under my site_media/multiuploader (MEDIA ROOT) like the README says. and i have sorl.thumbnail installed and pillow. and i adder the urls also.</p>\n"},{"tags":["django","mod-rewrite","apache2","virtualhost"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12881026,"title":"Mapping subdomains to django projects using dynamic vhosts or rewrite","body":"<p>So I want to be able to dynamically determine the django wsgi script based on the subdomain. </p>\n\n<pre><code>test.example.com -&gt; /djangopath/test/django.wsgi\ntest2.example.com -&gt; /djangopath/test2/django.wsgi\n</code></pre>\n\n<p>I have tried a number of things, including:</p>\n\n<pre><code>WSGIScriptAliasMatch ^([^.]+).example.com /djangopath/$1/django.wsgi\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>UseCanonicalName Off\nRewriteEngine On\nRewriteMap lowercase int:tolower\nRewriteRule . - [E=wsgiservername:${lowercase:%{SERVER_NAME}}]\n\nWSGIScriptAlias / /djangopath/%{ENV:wsgiservername}/django.wsgi\n</code></pre>\n\n<p>In the second one, replacing the %{ENV} in the WSGIScriptAlias with 'test' seems to work, but I'm not sure I really understand.</p>\n\n<p>Basically I want to be able to replace the following with one thing:</p>\n\n<pre><code>&lt;VirtualHost *:80&gt; \n    ServerName test.example.com\n    DocumentRoot /django/test\n\n    WSGIScriptAlias / /django/test/django.wsgi\n\n    Alias /media/ \"/django/test/www/media/\"\n    Alias /static/ \"/django/test/www/static/\"\n\n&lt;/VirtualHost&gt;\n&lt;VirtualHost *:80&gt; \n    ServerName test2.example.com\n    DocumentRoot /django/test2\n\n    WSGIScriptAlias / /django/test2/django.wsgi\n\n    Alias /media/ \"/django/test2/www/media/\"\n    Alias /static/ \"/django/test2/www/static/\"\n\n&lt;/VirtualHost&gt;\nand so on..\n</code></pre>\n"},{"tags":["django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":12881835,"title":"when i upgrade ubuntu , and run python project its not working/","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/10366821/python-importerror-cannot-import-urandom-since-ubuntu-12-04-upgrade\">Python ImportError cannot import urandom Since Ubuntu 12.04 upgrade</a>  </p>\n</blockquote>\n\n\n\n<p>I update my ubuntu now it showing the following error while running my project</p>\n\n<pre><code>from os import urandom as _urandom\nImportError: cannot import name urandom\n</code></pre>\n"},{"tags":["javascript","python","django","static"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":411,"score":2,"question_id":9576675,"title":"Passing STATIC_URL to file javascript with django","body":"<p>Which is the best solution to pass {{ STATIC_URL }} to javascript files?</p>\n\n<p>I'm working with django and python.</p>\n\n<p>Thanks in advance.\nRegards.</p>\n"},{"tags":["python","sql","django","django-orm"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":69,"score":2,"question_id":12881215,"title":"Django: Select where sum of columns equals some constant","body":"<p>I've searched the docs and I can't find a simple way to run a query like this:</p>\n\n<pre><code>SELECT columns FROM table WHERE col_a + col_b = @param\n</code></pre>\n\n<p>I know I can use <code>.extra(where=['col_a + col_b = %s' % whatever])</code>, but this is not parameterized.</p>\n\n<p>Is there a way to do this in the ORM (i.e. without <code>extra</code>)? Otherwise, what's the cleanest way of running that query?</p>\n"},{"tags":["python","django","django-admin","admin"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":96,"score":0,"question_id":12880033,"title":"Admin pages on django 1.4 doesn't work","body":"<p>I'm trying to establish a simple thing I have done many times before, which is enabling the admin pages on Django, but this time is on 1.4 version.</p>\n\n<p>I keep getting this message over and over (<code>ImportError at /admin/ No module named django.contrib.auth</code>).</p>\n\n<p><strong>This is my urls file:</strong></p>\n\n<pre><code>from django.conf.urls import patterns, include, url\nfrom django.conf.urls.static import static\nfrom django.conf import settings\n\n\nfrom filebrowser.sites import site\n\n# Uncomment the next two lines to enable the admin:\nfrom django.contrib import admin\nadmin.autodiscover()\n\nimport django\n\nfrom django.contrib import auth\n\nfrom django.contrib.admin import *\n\nurlpatterns = patterns('',  \n            url(r'^admin/', include(admin.site.urls)), \n            url(r'^admin/filebrowser/', include(site.urls)),\n\n            url(r'^polls/', include('volcano.urls')),\n            url(r'^contact/', include('form_handle_app.urls')),\n\n            # Uncomment the admin/doc line below to enable admin documentation:\n            #url(r'^admin/doc/', include('django.contrib.admindocs.urls')),\n            #url(r'^admin/', include('django.contrib.admin.urls')), \n            url(r'^login/', 'django.contrib.auth.views.login', {'template_name': 'login.html'}),   \n                        ) \n</code></pre>\n\n<p><strong>This is settings file:</strong></p>\n\n<pre><code> # Django settings for sito project.\n\nDEBUG = True\nTEMPLATE_DEBUG = DEBUG\n\nimport os\n#PROJECT_ROOT = os.path.realpath(os.path.dirname(__file__))\nPROJECT_ROOT = '/home/framoau/sito'\n\nADMINS = (\n    # ('Your Name', 'your_email@example.com'),\n)\n\nMANAGERS = ADMINS\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.\n        'NAME': 'testo',                      # Or path to database file if using sqlite3.\n        'USER': '********',                      # Not used with sqlite3.\n        'PASSWORD': '********',                  # Not used with sqlite3.\n        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.\n        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.\n    }\n}\n\n# Local time zone for this installation. Choices can be found here:\n# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name\n# although not all choices may be available on all operating systems.\n# On Unix systems, a value of None will cause Django to use the same\n# timezone as the operating system.\n# If running in a Windows environment this must be set to the same as your\n# system time zone.\nTIME_ZONE = 'America/Chicago'\n\n# Language code for this installation. All choices can be found here:\n# http://www.i18nguy.com/unicode/language-identifiers.html\nLANGUAGE_CODE = 'en-us'\n\nSITE_ID = 1\n\n# If you set this to False, Django will make some optimizations so as not\n# to load the internationalization machinery.\nUSE_I18N = True\n\n# If you set this to False, Django will not format dates, numbers and\n# calendars according to the current locale.\nUSE_L10N = True\n\n# If you set this to False, Django will not use timezone-aware datetimes.\nUSE_TZ = True\n\n# Absolute filesystem path to the directory that will hold user-uploaded files.\n# Example: \"/home/media/media.lawrence.com/media/\"\nMEDIA_ROOT = '/home/framoau/sito/media/'\n\n\n# URL that handles the media served from MEDIA_ROOT. Make sure to use a\n# trailing slash.\n# Examples: \"http://media.lawrence.com/media/\", \"http://example.com/media/\"\nMEDIA_URL = 'media' \n\n# Absolute path to the directory static files should be collected to.\n# Don't put anything in this directory yourself; store your static files\n# in apps' \"static/\" subdirectories and in STATICFILES_DIRS.\n# Example: \"/home/media/media.lawrence.com/static/\"\nSTATIC_ROOT = ''\n\n# URL prefix for static files.\n# Example: \"http://media.lawrence.com/static/\"\nSTATIC_URL = '/static/'\n\n# Additional locations of static files\nSTATICFILES_DIRS = (\n    # Put strings here, like \"/home/html/static\" or \"C:/www/django/static\".\n    # Always use forward slashes, even on Windows.\n    # Don't forget to use absolute paths, not relative paths.\n)\n\n# List of finder classes that know how to find static files in\n# various locations.\nSTATICFILES_FINDERS = (\n    'django.contrib.staticfiles.finders.FileSystemFinder',\n    'django.contrib.staticfiles.finders.AppDirectoriesFinder',\n#    'django.contrib.staticfiles.finders.DefaultStorageFinder',\n)\n\n# Make this unique, and don't share it with anybody.\nSECRET_KEY = '$hebtpijge6%o*7uegb6!sny5vl0n4w9j2wao-(fxsdb1@kv7b'\n\n# List of callables that know how to import templates from various sources.\nTEMPLATE_LOADERS = (\n    'django.template.loaders.filesystem.Loader',\n    'django.template.loaders.app_directories.Loader',\n    'django.template.loaders.eggs.Loader',\n) \n\n# URL of the login page.\nLOGIN_URL = '/contact/login/'\n\nTEMPLATE_CONTEXT_PROCESSORS = (\"django.contrib.auth.context_processors.auth\",\n                               \"django.core.context_processors.debug\",\n                               \"django.core.context_processors.i18n\",\n                               \"django.core.context_processors.media\",\n                               \"django.core.context_processors.static\",\n                               \"django.core.context_processors.tz\",\n                               \"django.contrib.messages.context_processors.messages\"\n                               ) \n\nMIDDLEWARE_CLASSES = (\n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    #'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n\n    # Uncomment the next line for simple clickjacking protection:\n    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',\n)\n\nROOT_URLCONF = 'sito.urls'\n\n# Python dotted path to the WSGI application used by Django's runserver.\nWSGI_APPLICATION = 'sito.wsgi.application'\n\nTEMPLATE_DIRS = (\n    # Put strings here, like \"/home/html/django_templates\" or \"C:/www/django/templates\".\n    # Always use forward slashes, even on Windows.\n    # Don't forget to use absolute paths, not relative paths.\n    '/home/framoau/sito/templates',\n)\n\nINSTALLED_APPS = ( \n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    # Uncomment the next line to enable the admin:\n    'django.contrib.admin',\n    # Uncomment the next line to enable admin documentation:\n    'grappelli',\n    'filebrowser',\n\n    'django.contrib.admindocs',\n\n    'volcano',\n    'form_handle_app',\n)\n\n# A sample logging configuration. The only tangible logging\n# performed by this configuration is to send an email to\n# the site admins on every HTTP 500 error when DEBUG=False.\n# See http://docs.djangoproject.com/en/dev/topics/logging for\n# more details on how to customize your logging configuration.\nLOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'filters': {\n        'require_debug_false': {\n            '()': 'django.utils.log.RequireDebugFalse'\n        }\n    },\n    'handlers': {\n        'mail_admins': {\n            'level': 'ERROR',\n            'filters': ['require_debug_false'],\n            'class': 'django.utils.log.AdminEmailHandler'\n        }\n    },\n    'loggers': {\n        'django.request': {\n            'handlers': ['mail_admins'],\n            'level': 'ERROR',\n            'propagate': True,\n        },\n    }\n}\n</code></pre>\n\n<p><strong>My admin page:</strong></p>\n\n<pre><code>from volcano.models import Poll, Choice\nfrom form_handle_app.models import Document\n\n\nfrom django.contrib import admin\n\n\n#admin.site.register(Poll)\n#admin.site.register(Choice)\nadmin.site.register(Document)\n</code></pre>\n\n<p><strong>Finally, Django's error dump:</strong></p>\n\n<pre><code>&gt; Environment:\n\n\nRequest Method: GET\nRequest URL: http://192.168.0.4/admin/\n\nDjango Version: 1.4\nPython Version: 2.7.3\nInstalled Applications:\n('django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.sites',\n 'django.contrib.messages',\n 'django.contrib.staticfiles',\n 'django.contrib.admin',\n 'grappelli',\n 'filebrowser',\n 'django.contrib.admindocs',\n 'volcano',\n 'form_handle_app')\nInstalled Middleware:\n('django.middleware.common.CommonMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware')\n\n\nTraceback:\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/handlers/base.py\" in get_response\n  111.                         response = callback(request, *callback_args, **callback_kwargs)\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/contrib/admin/sites.py\" in wrapper\n  213.                 return self.admin_view(view, cacheable)(*args, **kwargs)\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/utils/decorators.py\" in _wrapped_view\n  91.                     response = view_func(request, *args, **kwargs)\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/views/decorators/cache.py\" in _wrapped_view_func\n  89.         response = view_func(request, *args, **kwargs)\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/contrib/admin/sites.py\" in inner\n  192.                                            current_app=self.name):\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/urlresolvers.py\" in reverse\n  447.                 app_list = resolver.app_dict[ns]\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/urlresolvers.py\" in app_dict\n  290.             self._populate()\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/urlresolvers.py\" in _populate\n  253.                     for name in pattern.reverse_dict:\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/urlresolvers.py\" in reverse_dict\n  276.             self._populate()\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/urlresolvers.py\" in _populate\n  265.                 lookups.appendlist(pattern.callback, (bits, p_pattern, pattern.default_args))\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/urlresolvers.py\" in callback\n  216.         self._callback = get_callable(self._callback_str)\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/utils/functional.py\" in wrapper\n  27.         result = func(*args)\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/core/urlresolvers.py\" in get_callable\n  105.                     not module_has_submodule(import_module(parentmod), submod)):\nFile \"/usr/local/lib/python2.7/dist-packages/Django-1.4-py2.7.egg/django/utils/importlib.py\" in import_module\n  35.     __import__(name)\n\nException Type: ImportError at /admin/\nException Value: No module named django.contrib.auth\n</code></pre>\n\n<p>I tried importing all the libraries inside manage.py shell console, applied all introspection techniques on all the objects, and everything worked very easily, things only stop when I run Django normally. What am I doing wrong?</p>\n"},{"tags":["django","django-models","django-forms","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":12881255,"title":"django logged in userprofile and relating additional form","body":"<p>I have question regarding how to attach additional form to logged in users in Django.\nI want that additional form belongs to logged in user and the data I enter in the form should goes under logged in user table. I am new to Django and python please have patience I hope i can explain correctly what i want to do with this</p>\n\n<p>Data I shall enter for this view shall go under logged in user only basically i want to attach this view to the logged in user only  Error I am getting is \nException Value:    </p>\n\n<p>registration_todos.user_id may not be NULL</p>\n\n<pre><code>#models\n\nclass userProfile(models.Model):\n    user = models.OneToOneField(User)\n    birth =models.DateField()\n    name = models.CharField(max_length=100)\n    def __unicode__(self):\n        return self.name\n\n\n\nclass todos(models.Model):\n    user     = models.ForeignKey(User)\n    title    = models.CharField(max_length=100)\n    created  = models.DateField()\n    time     = models.TimeField()\n    def __unicode__(self):\n            return unicode(self.user)\n\n#forms   additional form for todos  \n    class formtodos(ModelForm):\n        title       = forms.CharField(label=(u'Todo'))\n        created     = forms.DateField(label=(u'Date'))\n        time        = forms.TimeField(label=(u'Time'))\n        #user        = forms.CharField(label=(u'username'))\n            class Meta:\n               model = todos\n               exclude=('user',) \n#view  \n def modeltodo(request):\nif request.user.is_authenticated(): \n    todos.objects.filter(user=request.user)\nif request.method == 'POST':\n    form =formtodos(request.POST)\n    if form.is_valid():# All validation rules pass\n        todoss = form.save(commit=False)\n        todoss.created_by = request.user\n        form.save()\n        return HttpResponseRedirect('/profile/')\nelse:\n    form = formtodos() # An unbound form\n\ncontext = {'form':form}\nreturn render_to_response('todo.html', context,    context_instance=RequestContext(request))\n</code></pre>\n"},{"tags":["django","django-forms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12880645,"title":"Can I delete a form instance in Django","body":"<p>I have a simple edit form, and my idea was to add a delete button to the form, and use this in my view.</p>\n\n<pre><code>if request.method == 'POST':\n    form = myform(request.POST,instance=myobject)\n    if request.POST.get('delete'):\n        form.delete()\n    else:\n        if form.is_valid():\n            form.save()\n</code></pre>\n\n<p>This doens't work. Can I delete this way and do I have an error, or should I do a query first, and then delete the data <code>Mydata.objects.get(id=id).delete()</code>? </p>\n"},{"tags":["django","django-models"],"answer_count":6,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":1817,"score":3,"question_id":2513342,"title":"Django comparing model instances for equality","body":"<p>I understand that, with a singleton situation, you can perform such an operation as:</p>\n\n<pre><code>spam == eggs\n</code></pre>\n\n<p>and if <code>spam</code> and <code>eggs</code> are instances of the same class with all the same attribute values, it will return <code>True</code>.  In a Django model, this is natural because two separate instances of a model won't ever be the same unless they have the same <code>.pk</code> value.</p>\n\n<p>The problem with this is that if a reference to an instance has attributes that have been updated by middleware somewhere along the way and it hasn't been saved, and you're trying to it to another variable holding a reference to an instance of the same model, it will return <code>False</code> of course because they have different values for some of the attributes. Obviously I don't need something like a <a href=\"http://www.davidcramer.net/code/375/singletons-in-django.html\" rel=\"nofollow\">singleton</a> , but I'm wondering if there some official Djangonic (ha, a new word) method for checking this, or if I should simply check that the <code>.pk</code> value is the same with:</p>\n\n<pre><code>spam.pk == eggs.pk\n</code></pre>\n\n<p>I'm sorry if this was a huge waste of time, but it just seems like there might be a method for doing this, and something I'm missing that I'll regret down the road if I don't find it.</p>\n"},{"tags":["django","django-forms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12875528,"title":"Trying to save ManyToManyField","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/5608576/django-enter-a-list-of-values-form-error-when-rendering-a-manytomanyfield-as-a\">Django “Enter a list of values” form error when rendering a ManyToManyField as a Textarea</a>  </p>\n</blockquote>\n\n\n\n<p>I have <code>python,django,ajax</code> these data in <code>artist</code> input field. I am getting <code>Enter a list of values.</code>error. Will you please help me to save these data? thanks</p>\n\n<h1>Model</h1>\n\n<pre><code>artist = models.ManyToManyField(ApiArtist, blank=True)\n</code></pre>\n\n<h1>Form and Validation</h1>\n\n<pre><code>class ApiSongForm(ModelForm):\n    class Meta:\n        model = ApiSong\n        widgets = {\n            'artist': forms.TextInput(),\n        }\n\n    def clean_artist(self):\n        data = self.cleaned_data\n        artist_list = data.get('artist', None)\n        if artist_list is not None:\n            for artist_name in artist_list.split(','):\n                artist = ApiArtist(name=artist_name).save()\n        return artist_list\n</code></pre>\n\n<h1>EDIT</h1>\n\n<p>Now I've changed the code copy/paste from provided link. But and I am getting <code>Cannot resolve keyword 'artist' into field. Choices are: apisong, id, name</code>. error message.\nHere is my <a href=\"http://dpaste.org/s35RH/\" rel=\"nofollow\">ApiArtist and SongModel</a>. thanks</p>\n\n<pre><code>class ModelCommaSeparatedChoiceField(ModelMultipleChoiceField):\n    widget = forms.TextInput\n    def clean(self, value):\n        if value is not None:\n            print value\n            value = [item.strip() for item in value.split(\",\")]  # remove padding\n        return super(ModelCommaSeparatedChoiceField, self).clean(value)\n\nclass ApiSongForm(ModelForm):\n    artist = ModelCommaSeparatedChoiceField(\n               required=False, queryset=ApiArtist.objects.filter(), to_field_name='artist')\n    class Meta:\n        model = ApiSong\n</code></pre>\n"},{"tags":["python","django","datetime","comparison"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":12880158,"title":"Comparing time in a datetime object python","body":"<p>I am having a weird problem.</p>\n\n<p>I am running a django app and in one of my models I have a method to compare the time that the user gives and the time that is stored in the model db</p>\n\n<p>So, for debugging purposes, I do this.</p>\n\n<p><code>print self.start</code><br>\n<code>print start</code><br>\n<code>print self.start.time &lt; start.time</code><br></p>\n\n<p>And the output is:</p>\n\n<p><code>2012-10-15 01:00:00+00:00</code><br>\n<code>2012-10-22 01:01:00+00:00</code><br>\n<code>False</code><br></p>\n\n<p>HOW IS THIS POSSIBLE?!?!?!</p>\n\n<p>I tried this in the django shell and in the python cli! Both give me True! With the same values.</p>\n\n<p>Thanks guys.</p>\n"},{"tags":["python","django","process","fastcgi"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":702,"score":2,"question_id":2071615,"title":"Auto kill fastcgi process when deploying django","body":"<p>Everything goes well days ago. But since today, when I run fastcgi, the process will be killed  by system automatically. The worst thing is I don't know why and which process kill the fastcgi process.</p>\n\n<p>Let me give some detail.</p>\n\n<p>we use nginx to serve static files for another django app which listen to 80 port.(this is for production use)</p>\n\n<p>And we use lighttpd/fastcgi for another two django apps, which listen to 8090 and 8091 respectively.(these are for development test)</p>\n\n<p>the command I run are:</p>\n\n<pre><code>python manage.py runfcgi host=127.0.0.1 port=8090\n</code></pre>\n\n<p>and </p>\n\n<pre><code>python manage.py runfcgi host=127.0.0.1 port=8091\n</code></pre>\n\n<p>after I run one of them, I run <em>ps -ef|grep \"python\"</em> and I can see the process of fastcgi, but seconds later, they are gone.</p>\n\n<p>the output of ps are:</p>\n\n<pre><code>root      2685     1  0  2009 ?        00:00:27 /usr/bin/python -tt /usr/sbin/yum-updatesd\nroot      2827     1  0 03:49 ?        00:00:00 python manage.py runfcgi host=127.0.0.1 port=8090\nroot      2828  2827  0 03:49 ?        00:00:00 python manage.py runfcgi host=127.0.0.1 port=8090\n</code></pre>\n\n<p>and fastcgi is killed and our site is down.</p>\n\n<p>So what should be the problem? How can I figure out?</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":12879806,"title":"Django View not rendering in HTML","body":"<p>My views are not rendering correctly. I have the same format for both views (<code>index.html</code> and <code>mq.html</code>), and <code>index.html</code> is working fine-- it creates a bulleted list with 1 value for each bullet.</p>\n\n<p>However, <code>mq.html</code> creates the correct number of bullets, but the words don't show up on the page. Can anyone tell me what's wrong with the code? <code>Models</code>, <code>Views</code>, and <code>HTML</code> below.</p>\n\n<p>Models:</p>\n\n<pre><code>class Movie(models.Model):\n    title = models.CharField(max_length = 500)\n    pub_date = models.DateTimeField('date published')\n    def __unicode__(self):\n        return self.title\n    def was_published_recently(self):\n        return self.pub_date &gt;= timezone.now() - datetime.timedelta(days=1)\n\nclass Question(models.Model):\n    movie = models.ForeignKey(Movie)\n    question_text = models.CharField(max_length = 1000)\n    def __unicode__(self):\n        return self.question_text\n</code></pre>\n\n<p>Views:</p>\n\n<pre><code>def index(request):\n    r = Movie.objects.all().order_by('-pub_date')\n    return render_to_response('mrt2/index.html', {'latest_movie_list': r})\n\ndef movie_questions(request, movie_id):\n    p = Movie.objects.get(pk=movie_id)\n    k = Question.objects.filter(movie=p)\n    return render_to_response('mrt2/mq.html', {'movie':p, 'the_question':k})\n</code></pre>\n\n<p>HTML:</p>\n\n<p><strong>index.html</strong></p>\n\n<pre><code>&lt;h1&gt; Test &lt;/h1&gt;\n\n{% if latest_movie_list %}\n    &lt;ul&gt;\n    {% for movie in latest_movie_list %}\n        &lt;li&gt;&lt;a href=\"/movie/{{ movie.id }}/\"&gt;{{ movie.title }}&lt;/a&gt;&lt;/li&gt;\n    {% endfor %}\n    &lt;/ul&gt;\n{% else %}\n    &lt;p&gt;No movies are available.&lt;/p&gt;\n{% endif %}\n</code></pre>\n\n<p><strong>mq.html</strong></p>\n\n<pre><code>{{ movie.title }}\n\n{% if the_question %}\n    &lt;ul&gt;\n    {% for each in the_question %}\n        &lt;li&gt;&lt;a href=\"/movie/{{ movie.id }}/{{ question.id }}/\"&gt;{{ question.question_text }}&lt;/a&gt;    &lt;/li&gt;\n    {% endfor %}\n    &lt;/ul&gt;\n{% else %}\n    &lt;p&gt;No questions have been asked.&lt;/p&gt;\n{% endif %}\n</code></pre>\n"},{"tags":["python","django"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12879208,"title":"Refactor this views code","body":"<p>I have the following code in one of my views. The problem is I can't figure out how to refactor it into just one for loop. The only difference is the 'item.' part. I need all three variable values in the same template so I don't think I can pass information from the urls.py. Any ideas of how I can rewrite this so I am not repeating myself?</p>\n\n<p>Thanks.</p>\n\n<pre><code>def average(request):\n\n    cal_list = []\n    cal_list2 = []\n    cal_list3 = []\n\n    exams = Test.objects.filter(test__test_name__iexact=\"one\")\n    for item in exams:\n        cal_list.append(int(item.start))\n        result = sum(cal_list) / float(165) * 100\n        result = result / len(cal_list)\n        result = int(round(result))\n        result = str(result) + '%'\n\n    for item in exams:\n        cal_list2.append(int(item.s1))\n        result2 = sum(cal_list2) / float(165) * 100\n        result2 = result2 / len(cal_list2)\n        result2 = int(round(result2))\n        result2 = str(result2) + '%'\n\n    for item in exams:\n        cal_list3.append(int(item.s2))\n        result3 = sum(cal_list3) / float(165) * 100\n        result3 = result3 / len(cal_list3)\n        result3 = int(round(result3))\n        result3 = str(result3) + '%'\n\n    return direct_to_template(request, 'a.html', {'result': result, 'result2': result2, 'result3': result3})\n</code></pre>\n"},{"tags":["python","mysql","django","utf-8","pinax"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12879322,"title":"Django/Pinax UTF8 encoding","body":"<p>I have scrumdo <a href=\"http://scrumdo.org\" rel=\"nofollow\">http://scrumdo.org</a> installed on a CentOS server which I'm trying to move to a slackware server. On CentOS I installed LAMP and I believe pinax with yum, and on slackware I used downloaded tars for the most part.</p>\n\n<p>Scrumdo runs fine on CentOS but on Slackware it throws this error when trying to create a project from the database:</p>\n\n<pre><code>DjangoUnicodeDecodeError at /projects/create/\n'utf8' codec can't decode byte 0xf1 in position 0: invalid continuation byte. You passed in '\\xf19pt5xb' (&lt;type 'str'&gt;)\n</code></pre>\n\n<p>I noticed my CentOS db is latin1_ci and my slackware database is utf8. I tried specifying utf8 in /etc/my.cnf for the server and client and restarting mysql but it still produced the error. I then tried truncating the slackware database and importing the CentOS tables, but still the same error.</p>\n\n<p>In a long shot I tried just copying the entire CentOs scrum directory, but I received an error about timesince model not being installed, and python manage.py syncdb could not detect it was in a pinax environment despite it being activated. Right now I'm running a file comparison on the two directories to see if there is a character encoding setting in python, django, or pinax I can change.</p>\n"},{"tags":["django","migration","django-south"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12879100,"title":"schemamigration using south and model field change","body":"<p>I have a model like this</p>\n\n<pre><code>class Task(models.Model):\n   name = models.CharField(max_length=100)\n   ...\n\nclass TaskForm(forms.ModelForm):\n   class Meta:\n        model = Task\n</code></pre>\n\n<p>Then,I added couple of fields to Task and did migration</p>\n\n<blockquote>\n  <p>python manage.py schemamigration myapp --initial\n  python manage.py migrate myapp</p>\n</blockquote>\n\n<p>Migration is successfully done.</p>\n\n<p>Now,as an afterthought,I added a help_text to the model field</p>\n\n<pre><code>class Task(models.Model):\n       name = models.CharField(max_length=100,help_text='choose a good one')\n       ...\n</code></pre>\n\n<p>Do I have to do the schemamigration again?I think his change doesn't affect the database table.</p>\n"},{"tags":["python","django","google-app-engine"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":134,"score":2,"question_id":4285723,"title":"how to get all administrators in google appengine","body":"<p>As title,I want to get all the administrator(one app could have multiple admins),but I found no apis in User Service section.Any way or any undocumented api to do this? </p>\n"},{"tags":["django","django-queryset"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":12878298,"title":"Django query to retreive an initial queryset with subsequent queries on that queryset","body":"<p>For this code:</p>\n\n<pre><code>people_pool = People.objects.filter(last_name__in = last_names)\nfor first_name in first_names:\n    for person in people_pool.filter(first_name = first_name):\n       # do something with each person. \n</code></pre>\n\n<p>My understanding from django querysets is that a query won't actually be executed until you \"need\" the data, thus allowing for optimization of chained querysets.  However, if I'm not mistaken, that would seems to work against me here; the first query that will be executed is essentially going to be the equivalent of:</p>\n\n<pre><code>People.objects.filter(last_name__in = last_names, first_name = first_name) # for the first first_name in first_names\n</code></pre>\n\n<p>And the database will need to be queried for every single first name.  If this is the case, what is the proper way to get Django to actually retrieve the <code>people_pool</code> and then run subsequent filters on the retrieved python objects, leaving the DB alone?</p>\n"},{"tags":["python","django","django-models","django-filter"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":74,"score":4,"question_id":12866920,"title":"Complex query with Django (posts from all friends)","body":"<p>I'm new to Python and Django, so please be patient with me.</p>\n\n<p>I have the following models:</p>\n\n<pre><code>class User(models.Model):\n   name = models.CharField(max_length = 50)\n   ...\n\nclass Post(models.Model):\n   userBy = models.ForeignKey(User, related_name='post_user')\n   userWall = models.ForeignKey(User, related_name='receive_user')\n   timestamp = models.DateTimeField()\n   post = models.TextField()\n\nclass Friend(models.Model):\n   user1 = models.ForeignKey(User, related_name='request_user')\n   user2 = models.ForeignKey(User, related_name='accept_user')\n   isApproved = models.BooleanField()\n   class Meta:\n      unique_together = (('user1', 'user2'), )\n</code></pre>\n\n<p>I know that this may not be the best/easiest way to handle it with Django, but I learned it this way and I want to keep it like this.</p>\n\n<p>Now, all I want to do is <strong>get all the post from one person and it's friends</strong>. The question now is how to do it with the Django filters?</p>\n\n<p>I think in SQL it would look something like this:</p>\n\n<pre><code>SELECT p.* FORM Post p, Friend f \nWHERE p.userBy=THEUSER OR (\n    (f.user1=THEUSER AND f.user2=p.userBy) OR\n    (f.user2=THEUSER AND f.user1=p.userBy)\n)\n</code></pre>\n\n<p>With no guarantee of correctness, just to give an idea of the result I'm looking for.</p>\n"},{"tags":["python","django","filefield"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12873246,"title":"File is not uploading when there are multiple fields in model form","body":"<p>I am unable to upload file if there are multiple fields in my model other than file field. I didn't get any error on the page but the page simply displays same page without uploading of my image.</p>\n\n<p>Here is my model</p>\n\n<pre><code>class ImageUpload(models.Model):\n   username = models.ForeignKey(User)\n   imagefile = models.FileField(upload_to='pictures')\n   isapproved = models.BooleanField()\n   class Meta:\n       db_table = u'imageupload'\n\n   def __unicode__(self):\n       return u'%s' % (self.imagefile)\n</code></pre>\n\n<p>Here is my model form</p>\n\n<pre><code>class UploadImageForm(forms.ModelForm):\n   def __init__(self,user, *args, **kwargs):\n       super(UploadImageForm, self).__init__(*args, **kwargs)\n       self.fields['username'] = forms.CharField(initial = user,\n                                       widget = forms.TextInput(\n                                     attrs = {'readonly':'readonly'}))\n   class Meta:\n       model = ImageUpload\n       exclude = ('id', 'isapproved')\n</code></pre>\n\n<p>Here is my view where I am handling the data.</p>\n\n<pre><code>def imageupload(request):\n# Handle file upload\n   if request.method == 'POST':\n      list = [\"jpeg\", \"jpg\",\"JPG\",\"JPEG\",\"png\",\"PNG\"]\n      format = imghdr.what(request.FILES['imagefile'])\n      if format not in list:\n          error = \"Please upload a valid file format\"\n          form = UploadImageForm(request.user)\n          return HttpResponseRedirect(reverse('myview.views.imageupload'))\n      else:\n          form = UploadImageForm(request.POST, request.FILES)\n          if form.is_valid():\n              newdoc = ImageUpload(imagefile = request.FILES['imagefile'])\n              newdoc.save()\n          return HttpResponseRedirect(reverse('myview.views.imageupload'))\n  else:\n      form = UploadImageForm(request.user) # A empty, unbound form\n  documents = ImageUpload.objects.all()\n  return render_to_response('imageupload.html',\n       {'documents': documents, 'form': form,'media':settings.MEDIA_URL},\n        context_instance=RequestContext(request)\n   )\n</code></pre>\n\n<p>It used to work properly when I have used only file field in the Model Form. After adding more fields to the model, its not uploading the file. Any suggestion on how to fix this issue?</p>\n\n<p>Thanks in advance\n<code>Vikram</code></p>\n"},{"tags":["django","linode"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12877490,"title":"How to view the webpage in Django tutorial on Linode server","body":"<p>I know I have similar question with this post: <a href=\"http://stackoverflow.com/questions/5097955/django-tutorial-on-remote-server-how-to-view-in-my-browser\">Django tutorial on remote server: how to view in my browser?</a> But I just can't solve it with the answer it has.</p>\n\n<p>I am playing with Django framework now. I am trying to do the Django tutorial on my Linode server. Everything works fine, but when we have to examine the webpage we have, the tutorial says that we have to check  <code>http://127.0.0.1:8000/</code> on the server. I only have command line access on the Linode server, so I don't know how to see that webpage on the linode from my desktop. I tried to use the command like <code>python manage.py runserver 123.123.123.123:8000</code> and set the ip to my Linode server, but I still can't access that webpage from my desktop (I do remove the firewall for 8000 port). Does anyone know how can I check the change for the remote webpage I created within Django framework on the Linode server? Thanks.</p>\n"},{"tags":["django","attachment","filefield"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":120,"score":0,"question_id":9008674,"title":"How do I send as an attachment a file save in a FileField in Django?","body":"<p>how can I send a mail with a file saved in a FileField? I don't know how to access the file in the code below.</p>\n\n<pre><code>mail = EmailMessage(subject, message, 'from@from,com', ['to@to.com'])\nmail.attach(?, ?, 'application/pdf')\nmail.send()\n</code></pre>\n\n<p><b>EDIT</b></p>\n\n<p>I tried to open the file with    </p>\n\n<pre><code>f = list_pca.pdf_file.open(mode='rb')\n</code></pre>\n\n<p>where list_pca is an instance of</p>\n\n<pre><code>class ListPCA(models.Model):\n    pdf_file = models.FileField(upload_to=get_file_path_j, null=True, blank=True)\n</code></pre>\n\n<p>but I get an error \"No such file or directory\", because the path is wrong. </p>\n\n<p>and </p>\n\n<pre><code>list_pca.pdf_file.path\n</code></pre>\n\n<p>return the wrong path too. Isn't it supposed to know where is the file thanks to the <code>upload_to</code> option?</p>\n\n<p>Thanks</p>\n\n<p>Thanks</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":74,"score":3,"question_id":12877576,"title":"Django ManagementForm data is missing or has been tampered with","body":"<p>i keep getting the error </p>\n\n<pre><code>[u'ManagementForm data is missing or has been tampered with']\n</code></pre>\n\n<p>I can't figure out why either. Here is my view: </p>\n\n<pre><code>   def CreateWorkout(request):\n    WorkoutInlineFormSet = inlineformset_factory(workout,exercise)\n    if request.method == \"POST\" : \n        formset = WorkoutInlineFormSet(request.POST)\n\n        if formset.is_valid(): \n            formset.save(); \n    else: \n        formset = WorkoutInlineFormSet()\n    return render_to_response('submit.html',{'formset': formset},context_instance=RequestContext(request))\n</code></pre>\n\n<p>and here is my template: </p>\n\n<pre><code>&lt;body&gt;\n&lt;form method=\"POST\" action =\"\"&gt;\n{{ formset.management_form }}\n&lt;table&gt;\n {% for form in formset.forms %}\n            {{ form }}\n        {% endfor %}\n\n        &lt;/table&gt;\n&lt;/form&gt; \n&lt;/body&gt;\n</code></pre>\n\n<p>I've read that you have to include the formset.management_form, and I have. I thought that would be an easy fix,but I haven't been able to figure out the problem</p>\n\n<p>Thanks for the help! </p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12877491,"title":"django check within template if the current url has a particular word in it","body":"<p>Similar to this question:</p>\n\n<p><a href=\"http://stackoverflow.com/q/7462398/1061426\">Django template, if tag based on current URL value</a></p>\n\n<p>only I want to check if the url has a word in it - you know, like</p>\n\n<pre><code>if a.find(b) == -1\n</code></pre>\n\n<p>how can i do this? </p>\n"},{"tags":["django","nose","django-nose"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":74,"score":2,"question_id":12867892,"title":"Nose doesn't find Django tests","body":"<p>I am trying to use django-nose in my current project, but I can't figure out how to get nose to run my tests. So I started a simple Django 1.4.1 project to get to know nose. But not even on this simple test project I could get it running.</p>\n\n<p>Before I go on: I know there are a ton of similar questions on Stackoverflow, like for instance this one:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/6065151/how-do-i-tell-django-nose-where-my-tests-are\">How do I tell django-nose where my tests are?</a></p>\n\n<p>But after Googling around, reading blog posts and Stackoverflow answers I still couldn't get it running.</p>\n\n<h2>How I set up my test project</h2>\n\n<ol>\n<li>Create virtual environment.</li>\n<li><code>pip install django django-nose nose</code>.</li>\n<li>Create project with <code>django-admin.py startproject djangonosetest</code>.</li>\n<li>Create an app <code>manage.py startapp testapp</code></li>\n<li><p>Edit settings.py:</p>\n\n<ul>\n<li>Set <code>ENGINE</code> to <code>django.db.backends.sqlite3</code></li>\n<li>Added <code>django_nose</code>, <code>testapp</code> to <code>INSTALLED_APPS</code></li>\n<li>Added <code>TEST_RUNNER = 'django_nose.NoseTestSuiteRunner'</code>.</li>\n</ul></li>\n<li><p>Run <code>manage.py test</code></p></li>\n</ol>\n\n<p>But all I got was this output:</p>\n\n<pre><code>nosetests --verbosity 1\nCreating test database for alias 'default'...\n\n----------------------------------------------------------------------\nRan 0 tests in 0.000s\n\nOK\nDestroying test database for alias 'default'...\n</code></pre>\n\n<p>But at least the default test case should have been run.</p>\n\n<p><strong>When I run <code>python manage.py test djangonosetest.testapp.tests:SimpleTest</code> it'll run the test. But that seems a bit overkill if I had to do it for every test file I have. But it proves that the tests can be run.</strong></p>\n\n<p>When I ran <code>manage.py test -v 3</code> (high verbosity level) this showed up:</p>\n\n<pre><code>nose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/djangonosetest/settings.py is executable; skipped\nnose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/djangonosetest/settings.pyc is executable; skipped\nnose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/djangonosetest/urls.py is executable; skipped\nnose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/djangonosetest/wsgi.py is executable; skipped\nnose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/djangonosetest/testapp/models.py is executable; skipped\nnose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/djangonosetest/testapp/models.pyc is executable; skipped\nnose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/djangonosetest/testapp/views.py is executable; skipped\nnose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/djangonosetest/testapp/tests.py is executable; skipped\nnose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/djangonosetest/testapp/tests.pyc is executable; skipped\nnose.selector: INFO: /Users/Jens/Projects/Django/djangonosetest/manage.py is executable; skipped\n</code></pre>\n\n<p>Nose does definitely find my tests.py but is skipping it for some reason.</p>\n\n<h2>Folder structure</h2>\n\n<pre><code>djangonosetest/\n    djangonosetest/\n        __init__.py\n        settings.py\n        testapp/\n            __init__.py\n            models.py\n            tests.py\n            views.py\n        urls.py\n        wsgi.py\n    manage.py\n</code></pre>\n\n<h2>settings.py</h2>\n\n<pre><code>DEBUG = True\nTEMPLATE_DEBUG = DEBUG\n\nADMINS = (\n    # ('Your Name', 'your_email@example.com'),\n)\n\nMANAGERS = ADMINS\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.\n        'NAME': '',                      # Or path to database file if using sqlite3.\n        'USER': '',                      # Not used with sqlite3.\n        'PASSWORD': '',                  # Not used with sqlite3.\n        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.\n        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.\n    }\n}\n\n# Local time zone for this installation. Choices can be found here:\n# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name\n# although not all choices may be available on all operating systems.\n# In a Windows environment this must be set to your system time zone.\nTIME_ZONE = 'America/Chicago'\n\n# Language code for this installation. All choices can be found here:\n# http://www.i18nguy.com/unicode/language-identifiers.html\nLANGUAGE_CODE = 'en-us'\n\nSITE_ID = 1\n\n# If you set this to False, Django will make some optimizations so as not\n# to load the internationalization machinery.\nUSE_I18N = True\n\n# If you set this to False, Django will not format dates, numbers and\n# calendars according to the current locale.\nUSE_L10N = True\n\n# If you set this to False, Django will not use timezone-aware datetimes.\nUSE_TZ = True\n\n# Absolute filesystem path to the directory that will hold user-uploaded files.\n# Example: \"/home/media/media.lawrence.com/media/\"\nMEDIA_ROOT = ''\n\n# URL that handles the media served from MEDIA_ROOT. Make sure to use a\n# trailing slash.\n# Examples: \"http://media.lawrence.com/media/\", \"http://example.com/media/\"\nMEDIA_URL = ''\n\n# Absolute path to the directory static files should be collected to.\n# Don't put anything in this directory yourself; store your static files\n# in apps' \"static/\" subdirectories and in STATICFILES_DIRS.\n# Example: \"/home/media/media.lawrence.com/static/\"\nSTATIC_ROOT = ''\n\n# URL prefix for static files.\n# Example: \"http://media.lawrence.com/static/\"\nSTATIC_URL = '/static/'\n\n# Additional locations of static files\nSTATICFILES_DIRS = (\n    # Put strings here, like \"/home/html/static\" or \"C:/www/django/static\".\n    # Always use forward slashes, even on Windows.\n    # Don't forget to use absolute paths, not relative paths.\n)\n\n# List of finder classes that know how to find static files in\n# various locations.\nSTATICFILES_FINDERS = (\n    'django.contrib.staticfiles.finders.FileSystemFinder',\n    'django.contrib.staticfiles.finders.AppDirectoriesFinder',\n#    'django.contrib.staticfiles.finders.DefaultStorageFinder',\n)\n\n# Make this unique, and don't share it with anybody.\nSECRET_KEY = 'ikh^t)49eincyww4@nq(o)go_129zdr87*im00m^+h@_n!w4ec'\n\n# List of callables that know how to import templates from various sources.\nTEMPLATE_LOADERS = (\n    'django.template.loaders.filesystem.Loader',\n    'django.template.loaders.app_directories.Loader',\n#     'django.template.loaders.eggs.Loader',\n)\n\nMIDDLEWARE_CLASSES = (\n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    # Uncomment the next line for simple clickjacking protection:\n    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',\n)\n\nROOT_URLCONF = 'djangonosetest.urls'\n\n# Python dotted path to the WSGI application used by Django's runserver.\nWSGI_APPLICATION = 'djangonosetest.wsgi.application'\n\nTEMPLATE_DIRS = (\n    # Put strings here, like \"/home/html/django_templates\" or \"C:/www/django/templates\".\n    # Always use forward slashes, even on Windows.\n    # Don't forget to use absolute paths, not relative paths.\n)\n\nINSTALLED_APPS = (\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    # Uncomment the next line to enable the admin:\n    # 'django.contrib.admin',\n    # Uncomment the next line to enable admin documentation:\n    # 'django.contrib.admindocs',\n    'django_nose',\n    'djangonosetest.testapp',\n)\n\n# A sample logging configuration. The only tangible logging\n# performed by this configuration is to send an email to\n# the site admins on every HTTP 500 error when DEBUG=False.\n# See http://docs.djangoproject.com/en/dev/topics/logging for\n# more details on how to customize your logging configuration.\nLOGGING = {\n    'version': 1,\n    'disable_existing_loggers': False,\n    'filters': {\n        'require_debug_false': {\n            '()': 'django.utils.log.RequireDebugFalse'\n        }\n    },\n    'handlers': {\n        'mail_admins': {\n            'level': 'ERROR',\n            'filters': ['require_debug_false'],\n            'class': 'django.utils.log.AdminEmailHandler'\n        }\n    },\n    'loggers': {\n        'django.request': {\n            'handlers': ['mail_admins'],\n            'level': 'ERROR',\n            'propagate': True,\n        },\n    }\n}\n\nTEST_RUNNER = 'django_nose.NoseTestSuiteRunner'\n</code></pre>\n\n<h2>The test code</h2>\n\n<p>The test code is the default TestCase django creates.</p>\n\n<pre><code>\"\"\"\nThis file demonstrates writing tests using the unittest module. These will pass\nwhen you run \"manage.py test\".\n\nReplace this with more appropriate tests for your application.\n\"\"\"\n\nfrom django.test import TestCase\n\n\nclass SimpleTest(TestCase):\n    def test_basic_addition(self):\n        \"\"\"\n        Tests that 1 + 1 always equals 2.\n        \"\"\"\n        self.assertEqual(1 + 1, 2)\n</code></pre>\n\n<p><strong>So how do I tell django-nose/nose where my tests are?</strong></p>\n\n<h2>UPDATE</h2>\n\n<p>If found an intersting Google Groups post and Stackoverflow answer on the subject:</p>\n\n<ul>\n<li><a href=\"https://groups.google.com/forum/?fromgroups=#!topic/nose-users/D03-20ChmBo\" rel=\"nofollow\">Google Groups Post</a></li>\n<li><a href=\"http://stackoverflow.com/a/1579787/190823\">Stackoverflow answer</a></li>\n</ul>\n\n<p>Both boil down to the fact that nose will skip executable files. That's why I get <code>tests.py is executable; skipped</code>. Problem is that the file is not executable:</p>\n\n<pre><code>----------+ 1 Jens  staff  383 13 Okt 00:01 tests.py\n</code></pre>\n\n<p>I also tried it with u-x, g-x and o-x but nose skipped anyway. I get the feeling that this is a bug. The file is found by nose, is not executable but still skipped.</p>\n\n<p>A workaround is to use the --exe switch. Running <code>manage.py test --exe</code> runs the test. While it's better than the other workarounds I am not completely happy with that solution.</p>\n"},{"tags":["python","django","query","views"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":6494350,"title":"Want to display the latest note entry only in Django","body":"<p>I have another Django form that stores notes and again it has the user, client and datetime stored automatically. What I want to do this time is create some note form that allows you to add a note for a particular client, and every time you add a note it displays the <strong>latest result and only</strong> the latest result in the <code>client_details.html</code>template. So every time add a new note it will keep on replacing the existing note. How can I achieve this? </p>\n\n<p><strong>forms.py</strong></p>\n\n<pre><code>class NoteForm(forms.ModelForm):\n    class Meta:\n        model = models.Note\n        exclude = ('client','user','datetime')\n</code></pre>\n\n<p><strong>Views.py</strong></p>\n\n<pre><code>@login_required\ndef get_client(request, client_id = 0):\n    client = None\n    try:\n        client = models.Client.objects.get(pk = client_id)\n        notes = client.note_set.all()\n        comments = client.comment_set.order_by('-datetime')\n    except:\n        pass\n    return render_to_response('client_details.html', {'client':client, 'notes':notes, 'comments':comments}, context_instance = RequestContext(request))\n\n@login_required\n    def add_notes(request, client_id = 0):\n        client = None\n        contact = None\n        try:\n            client = models.Client.objects.get(pk = client_id)\n        except:\n            return HttpResponseNotFound()\n\n        if request.method == 'POST':\n            form = forms.NoteForm(request.POST)\n            if form.is_valid():\n                note = form.save(commit=False)\n                note.user = request.user\n                note.client = client\n                note.save(True)\n                request.user.message_set.create(message = \"Note is successfully added.\")\n                return HttpResponse(\"&lt;script language=\\\"javascript\\\" type=\\\"text/javascript\\\"&gt;window.opener.location = window.opener.location; window.close();&lt;/script&gt;\")\n        else:\n            form = forms.NoteForm()\n        return render_to_response('note_form.html', {'form':form, 'client':client}, context_instance = RequestContext(request))\n</code></pre>\n"},{"tags":["django","scalability","maintainability","reliability","flask"],"answer_count":8,"favorite_count":28,"up_vote_count":69,"down_vote_count":0,"view_count":16865,"score":69,"question_id":3005319,"title":"Django vs Flask for a long-term project","body":"<p>I am looking for a comparison of django and flask for a project that will live for a long time, and will need to be maintained, built upon and grow as the months progress.</p>\n\n<p>I am considering Flask + SQLAlchemy or Django.</p>\n\n<p>I do not need batteries, as I usually end up having to modify them, so it is fine if I have to re-implement a couple of wheels to make it do exactly what I need.</p>\n\n<p>I prefer the coding style of flask, I do prefer how it is middle ground between a full-stack framework and a mere WSGI layer.</p>\n\n<p>My largest reservation is the dependability of flask. Flask/Werkzeug are built from a one man team, if he drops the ball on the project I doubt someone would be able to replace him. Django has a whole community behind it and there is no worry of it ever not having developers to maintain it.</p>\n\n<p>Django does include alot of batteries, and feels bloated when working with it. I also do prefer SQLAlchemy over the Django ORM.</p>\n\n<p>In the end <em>my</em> preferences do not matter, I am concerned about the long-term maintenance of the application, scalability, reliability and its ability to grow and adapt to the quickly changes business rules (they could change every 2 weeks to every month) while keeping its slim figure.</p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":12877431,"title":"shouldn't the django todo list example use a foreign key to self?","body":"<p>In the django todo list example, <a href=\"http://lightbird.net/dbe/todo_list.html\" rel=\"nofollow\">available here</a>, they create a second table of todolist items so that they can reference it with a foreign key. </p>\n\n<p>Is there some good reason why they don't just use a foreign key to self?</p>\n\n<pre><code>class DateTime(models.Model):\n    datetime = models.DateTimeField(auto_now_add=True)\n    def __unicode__(self):\n        return unicode(self.datetime)\n\nclass Item(models.Model):\n    name = models.CharField(max_length=60)\n    created = models.ForeignKey(DateTime)\n    priority = models.IntegerField(default=0)\n    difficulty = models.IntegerField(default=0)\n    done = models.BooleanField(default=False)\n</code></pre>\n\n<p>I think it should look like:</p>\n\n<pre><code>class Item(models.Model):\n    datetime = models.DateTimeField(auto_now_add=True)\n    name = models.CharField(max_length=60)\n    created = models.ForeignKey(self)\n    priority = models.IntegerField(default=0)\n    difficulty = models.IntegerField(default=0)\n    done = models.BooleanField(default=False)\n</code></pre>\n\n<p>What am I missing?</p>\n"},{"tags":["python","django","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12877011,"title":"Django custom admin view like history","body":"<p>I need to add a custom view to a model admin similar to the history view. For example if I have a model called Job I can access the history by going to /jobs/job//history/. How do I add another view that will respond to a pattern like /jobs/job//workflow/?</p>\n"},{"tags":["django","redirect","login"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":12876818,"title":"Django redirect","body":"<p>With django, navigation is working great, but when it comes to submiting a form and redirecting upon success, I couldnt get it working properly.\nLet me write my code.</p>\n\n<pre><code>if request.method == 'GET':\n    print 'get worked'\n    return render(request, 'accounts/login.html')\n\nif request.method == 'POST':\n    accinstance = accounts()\n    member_id = accinstance.login(username, password)\n    if member_id:\n        request.session['member_id'] = member_id\n        request.session['ias_username'] = request.POST['username']\n        request.session['ias_client'] = request.POST['client']\n        return HttpResponseRedirect('/home/')\n    else:\n        return render(request, 'accounts/login.html',{'warning':warning}\n</code></pre>\n\n<p>and my login forms action</p>\n\n<pre><code>form action=\"\" method=\"post\"\n</code></pre>\n\n<p>it is basically goes to accounts/login/ url and I check if its get or post then do the try to do appropriate action.</p>\n\n<p>Problem is. HttpResponseRedirect('/home/') after this , I expect , url on my browser changes to www.example.com/home/ and it renders the correct html.</p>\n\n<p>But no such luck, url on my browser stays accouns/login but it renders the correct template, if I hit refresh, obviously it reloads the login page.</p>\n\n<p>Any idea? on how to redirect user correctly.</p>\n"},{"tags":["django","django-views"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":12875326,"title":"Django docs: resolve() code sample","body":"<p>I'm confused about the code example at the end of the <a href=\"https://docs.djangoproject.com/en/1.4/topics/http/urls/#django.core.urlresolvers.resolve\" rel=\"nofollow\">resolve documentation</a> (\"test whether a view would raise a Http404 error before redirecting to it\"). Could someone provide explanation about this code -what it's doing and how it works? I haven't a clue what's going on.</p>\n\n<p>For example, why would you need to call a view to test if it throws a 404, when <code>resolve</code> itself can throw <code>Resolver404</code>? When the code calls the view function, it gives it the request via a keyword argument but with other arguments before that. But shouldn't a view get <code>request</code> as its first argument? Why is the referer header being used?</p>\n\n<p>Thanks</p>\n"},{"tags":["django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":12876128,"title":"Django and Dynamic model relationships","body":"<p>I have one main model :</p>\n\n<pre><code>ToolBox\n</code></pre>\n\n<p>and three other models :</p>\n\n<pre><code>Hammer\nNail\nPlier\n</code></pre>\n\n<p>Obviously a ToolBox can contain any combination of Hammers, Nails or Pliers. </p>\n\n<p>Using Django, what is a good ORM representation of this dynamic type of relationship? Bare in mind that each of these models can have its own rich set of attributes so a simple type field won't do the job. I am also wondering how the admin interface in Django can be fine tuned to this dynamic type of thing if it works.</p>\n"},{"tags":["database","django","postgresql"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":12876600,"title":"Postgresql DatabaseError column with django","body":"<p>I am trying to find a solution to this error I keep getting:</p>\n\n<blockquote>\n  <p>column posts_post.slug does not exist</p>\n  \n  <p>LINE 1: SELECT \"posts_post\".\"id\", \"posts_post\".\"title\", \"posts_post\"...</p>\n</blockquote>\n\n<p>Does anyone know what might be causing this?</p>\n\n<p>Here is the full error output: <a href=\"http://dpaste.com/813336/\" rel=\"nofollow\">http://dpaste.com/813336/</a></p>\n\n<pre><code>    from django.db import models\n    from django.contrib.auth.models import User\n    from datetime import datetime\n\n    class Category(models.Model):\n    name = models.CharField(max_length=60)\n    def __unicode__(self):\n        return self.name\n\n   class Tags(models.Model):\n    name = models.CharField(max_length=60)\n    def __unicode__(self):\n        return self.name\n\n   class Post(models.Model):\n    title = models.CharField(max_length=120)\n    slug = models.SlugField(max_length=120, unique=True)\n    description = models.TextField()\n    body = models.TextField()\n    published = models.DateTimeField(default=datetime.now)\n    categories = models.ForeignKey(Category)\n    tags = models.ManyToManyField(Tags)\n    def __unicode__(self):\n        return self.title\n    class Meta:\n        ordering = ['-published']\n    def get_absolute_url(self):\n         return \"/%s/%s/%s\" % (self.published.year, self.published.month, self.slug)\n</code></pre>\n"},{"tags":["django","google-app-engine","django-haystack","google-cloud-sql"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":11704945,"title":"Google Appengine , Django, Haystack and CloudSQL","body":"<p>Does anyone know what haystack backends work on appengine with the cloudsql db?</p>\n"},{"tags":["django","google-app-engine","django-nonrel","django-haystack"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":93,"score":1,"question_id":11052819,"title":"haystack and google appengine","body":"<p>I developed an app in Django, mainly for educactional purposes, and I want to host it on GAE. The app uses MySql and Haystack/Whoosh. I'm following this <a href=\"http://www.allbuttonspressed.com/projects/djangoappengine\" rel=\"nofollow\">django-nonrel</a> guide, but I'm not sure if Haystack/Whoosh will work on the NoSQL from GAE. Any ideas?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":12875979,"title":"How to delete objects after user logout?","body":"<pre><code>from django.contrib.auth.models import User\n\nclass Drink(models.Model):\n        owner = models.ForeignKey(User)\n        name = models.CharField(max_length=50)\n</code></pre>\n\n<p>How to delete all Drink after user logout?</p>\n\n<pre><code>def delete_drink(request):\n    user = request.user\n    drink = Drink.objects.filter(owner=user)\n    drink.delete()\n</code></pre>\n"},{"tags":["python","django","python-2.7","django-views"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":12875029,"title":"Remove url's appended to url","body":"<p>Hi is there any way to disable the url's from appending one after the other as i navigate through the page?</p>\n\n<p>For example, /questions/ displays some questions, and each question has a link to direct to the specific question and display the answers. So i did a </p>\n\n<pre><code>&lt;a href=\"{% url answer.views.display_answers Question.id %}\"&gt;View answers&lt;/a&gt;\n</code></pre>\n\n<p>which changes the url to /questions/1/ on the page. The problem comes when i have a link on the page which brings the user back to the /questions/ page. </p>\n\n<pre><code>&lt;a href=\"{% url 'questions' %}\"&gt;Back to question list&lt;/a&gt;\n</code></pre>\n\n<p>it returns a reversematch error and after some exploring i discovered the mismatch occured because the url is now /questions/1/questions/ </p>\n\n<p>So my point is whether there is any way we could control Django appending the url throughout navigation.</p>\n"},{"tags":["django","django-south"],"answer_count":4,"favorite_count":22,"up_vote_count":50,"down_vote_count":0,"view_count":10102,"score":50,"question_id":3090648,"title":"Django South - table already exists","body":"<p>I am trying to get started with South.</p>\n\n<p>I had an existing database. </p>\n\n<p>I added South (<code>syncdb</code>, <code>schemamigration --initial</code>).</p>\n\n<p>I updated <code>models.py</code> to add a field.</p>\n\n<p>I ran <code>./manage.py schemamigration myapp --auto</code></p>\n\n<p>It seemed to find the field and said I could apply this with <code>./manage.py migrate myapp</code></p>\n\n<p>Doing that gave the error: </p>\n\n<pre><code>django.db.utils.DatabaseError: table \"myapp_tablename\" already exists\n</code></pre>\n\n<p><code>tablename</code> is the first table listed in <code>models.py</code>. </p>\n\n<p>I am running Django 1.2, South 0.7</p>\n"},{"tags":["django","distribution"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":509,"score":1,"question_id":692354,"title":"Stand alone Django app for OS X","body":"<p>For school, I have made a CMS in django for my major assessment task for Software. My teacher has asked to get the source code and, if applicable, the program compiled.</p>\n\n<p>Now, because i dont want my teacher to install django (Something might go wrong, he may get a different version, missing dependences), how can i package up my django app, plus the django source and make the whole thing runnable (on the development server) by running a single script?</p>\n\n<p>He has python, so that does not need to be included and the target OS would be OS X, but Windows can do as well.</p>\n"},{"tags":["python","django","oop","django-models","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12874313,"title":"QuerySet automatic/aspect filtering","body":"<p>I have a model which has an <code>active</code> field, and i want to filter out all records which are inactive basing on this field. Let's say:</p>\n\n<pre><code>Record(Model):\n    active = BooleanField()\n    ...\n</code></pre>\n\n<p>to filter them out i can do:</p>\n\n<pre><code>Record.objects(active=True)\n</code></pre>\n\n<p>But it is a general case and i want inactive records to be filtered out almost any time. What is the best way to follow DRY principle and do not filter every request i do manually like in example above and in meantime keep the ability to manage inactive records in admin panel.</p>\n"},{"tags":["python","django","web-deployment"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":67,"score":0,"question_id":12874839,"title":"Django Syntax error","body":"<p>I am following a Django tutorial, and I have run into a problem with one of my views. When looking at the error output from django it tells me that there is a error on line 62:</p>\n\n<pre><code>yr = datetime.datetime(year, 1, 1)     months = 12\n</code></pre>\n\n<p>Here is the entire view:</p>\n\n<pre><code>def year(request):\n    #http://site_name/year/\n    post_error = \"\"\n    year = int(year)\n    yr = datetime.datetime(year, 1, 1)     months = 12\n    by_month = []\n    if Post.objects.filter(published__year=year).count():\n    if year == datetime.datetime.now().year:\n        months = datetime.datetime.now().month\n    for month in range(1, months+1):\n        by_month.append({datetime.datetime(year, month, 1):\n\n    Post.objects.filter(published__month=month).filter(published__year=year)})\n    elif year &gt; datetime.datetime.now().year:\n    post_error = \"It is not yet %d, try an earlier year.\" % year\n    else:\n    post_error = \"There are not posts for %d.\" % year\n    return render_to_response('year.html', {'by_month':by_month, 'post_error':post_error,},)\n</code></pre>\n\n<p>Please tell me if you need anymore information that I have not provided. Thanks! -Chris</p>\n"},{"tags":["python","django","markdown"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":10471349,"title":"Error while using Markdown with Django","body":"<p>From commandline, I'm using this to convert a string to html:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>    &gt;&gt;&gt;import markdown\n    &gt;&gt;&gt; mk = Markdown()\n    &gt;&gt;&gt; html = mk.convert(my_string)\n</code></pre>\n\n<p>and it gets me the html string without any errors, however when using the same in a module the django page prints an error as 'Global name 'markdown' not defined'</p>\n\n<p>I cleared this out by using </p>\n\n<pre class=\"lang-python prettyprint-override\"><code>    import markdown\n    mk = markdown.Markdown()\n    html = mk.convert(my_string)\n</code></pre>\n\n<p>I'm a newbie and I need to know why the code which runs in the interpreter mode gives error when put inside a module. Does this mean  whatever I try without errors in interpreter mode may probably bring error when wrote as code? Help </p>\n"}]}
{"total":41213,"page":20,"pagesize":100,"questions":[{"tags":["mysql","django","optimization"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":12870302,"title":"Django query fast while rendering slow","body":"<p>I'm running a website with Django and MySQL and I'm trying to optimize it.\nFor that purpose I use the django debug toolbar and I pay a particular attention to the SQL part which is, I think, the reason why the load of my page is long.</p>\n\n<p>When I look at the SQL part in django debug toolbar, it says that my queries take around 90ms in total.\nBut if I put a timer around the rendering function in python, then it takes more than 3s (which is closer to what I actually see when reloading the page)... </p>\n\n<p>How comes the query is that fast compared to the rendering?</p>\n\n<p>EDIT: here is the code in the template simplified to its maximum: </p>\n\n<pre><code>&lt;div id=\"content_annonces\" class=\"ui-widget ui-corner-all\"&gt;\n     &lt;table&gt;\n         {% if latest_annonces_list %}\n             here goes the content\n         {% else %}\n             nothing found\n         {% endif %}\n     &lt;/table&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>as you can see, the only peace of code that is supposed to be costly is the SQL query requested when calling the object latest_annonces_list.\nBut when I profile it with django debug toolbar it says this query has an elapsed of 90ms while the rendering takes around 3s ...</p>\n\n<p>And here goes the content of latest_annonces_list:</p>\n\n<pre><code>result = Annonce.objects.select_related('vehicule', 'vehicule__marque')\n         .filter(vehicule__marque__in=self.marques).order_by('prix')[:10]\n</code></pre>\n\n<p>Models here:</p>\n\n<pre><code>class Marque(models.Model):\n    name = models.CharField(db_index=True, primary_key=True, max_length=100)\n\nclass Vehicule(models.Model):\n    modele     = models.CharField(primary_key=True, db_index=True, max_length=100)\n    gen_modele = models.CharField(db_index=True, max_length=100)\n    marque     = models.ForeignKey(Marque)\n    categories = models.ManyToManyField(Categorie)\n    click      = models.PositiveIntegerField(default=0)\n\nclass Annonce(models.Model):\n    vehicule      = models.ForeignKey(Vehicule, db_index=True)\n    porte         = models.ForeignKey(Porte, db_index=True)\n    carburant     = models.ForeignKey(Carburant, db_index=True)\n    bv            = models.ForeignKey(Boite, db_index=True)\n    prix          = models.DecimalField(db_index=True,max_digits=8, decimal_places=2)\n    km            = models.PositiveIntegerField(db_index=True)\n    dpt           = models.CharField(db_index=True, max_length=50)\n    annonceur     = models.ForeignKey(Annonceur, db_index=True)\n    img           = models.URLField()\n    url           = models.URLField(max_length=2000)\n    finition      = models.CharField(max_length=500)\n    cylindree     = models.CharField(max_length=500)\n    moteur        = models.CharField(max_length=500)\n    annee         = models.DateTimeField(u'annee vehicule', db_index=True)\n    pub_date      = models.DateTimeField(u'date publication')\n    last_touched  = models.DateTimeField(u'derniere modification')\n    last_scan     = models.DateTimeField(u'dernier scan')\n    type_ann      = models.ForeignKey(Type_Annonce, db_index=True)\n    type_vendeur  = models.ForeignKey(Vendeu\n</code></pre>\n\n<p>r, db_index=True)</p>\n"},{"tags":["python","django","command","subprocess","execute"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12535952,"title":"Is there any possibility to execute command of the server in django? the location?","body":"<p>I try to do this by using subprocess in a views.py</p>\n\n<pre><code>returnCode = subprocess.call('/Users/ivanlw/Projects/C/app') #use the absolute path\nprint 'returnCode', returnCode\n</code></pre>\n\n<p>the app file just prints a sentence, it's normal when I execute it in the terminal</p>\n\n<p>but finally the debug page of django tells me OSError, the Exception Value shows: [Errno 2] No such file or directory</p>\n\n<p>How to solve it?</p>\n"},{"tags":["django","modelform"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12874163,"title":"Passing MultiValueDict to Django ModelForm","body":"<p>I'm working with a ModelForm and passing data that was stored in the DB using a MultiValueDict that holds the original post data, in the form of <code>u'first_name': [u'XX'], u'last_name': [u'']</code> and such, but the form renders the value completely to the actual field, including <code>[u'']</code> wrapping the rest.</p>\n\n<p>If I try to pass the same MultiValueDict to a regular Form, I don't get this problem.</p>\n\n<p>I'm clueless on how to handle the dictionary or to process the data before assigning it as the initial value.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Code that gets the data from post and restores it to the form</p>\n\n<pre><code>if request_post_data is not None:\n    self.form = self.FORM_CLASS(data=request_post_data)\n    self.draft.raw_data = dict(request_post_data) # preserves multiple values per key\n    self.draft.save()\nelse:\n# conversion to MultiValueDict restores multiple values per key\nself.form = self.FORM_CLASS(initial=MultiValueDict(self.draft.raw_data) if self.draft.raw_data else None)`\n</code></pre>\n\n<p><code>request_post_data</code> comes from a serialized field in the db and an actual value looks like this:</p>\n\n<pre><code>&lt;MultiValueDict: {u'last_name': [u''], u'suffix': [u''], u'prefix': [u''], u'first_name': [u'XX'], u'middle_name': [u'']}&gt;\n</code></pre>\n\n<p>which ends up showing in my forms like this (when sent to ModelForm): </p>\n\n<p><a href=\"http://cl.ly/K8Dr\" rel=\"nofollow\">Actual form</a></p>\n\n<p>Thanks for your help!</p>\n"},{"tags":["mysql","django","mysql-error-1064"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":58,"score":1,"question_id":12873530,"title":"mySQL DROP NOT NULL not working","body":"<p>I'm reading The definitive guide to django, and there's a line where i have to tell mySQL that a column can have a null value.</p>\n\n<p>The book uses this </p>\n\n<pre><code>ALTER TABLE books_book ALTER COLUMN publication_date DROP NOT NULL;\n</code></pre>\n\n<p>But when i run it i get this message :</p>\n\n<blockquote>\n  <p>ERROR 1064 (42000): You have an error in your SQL syntax; check the\n  manual that corresponds to your MySQL server version for the right\n  syntax to use near 'NOT NULL' at line 1</p>\n</blockquote>\n\n<p>What's going on ? I'm a beginner so i can't easily diagnose mySQL error.</p>\n"},{"tags":["django","postgresql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12868302,"title":"Django PostgreSQL asynchronous commits","body":"<p>PostgreSQL supports asynchronous commits - that is, the database engine can be configured to report success even if the database has not completed the write ahead log sync.</p>\n\n<p><a href=\"http://www.postgresql.org/docs/8.3/static/runtime-config-wal.html#GUC-SYNCHRONOUS-COMMIT\" rel=\"nofollow\">http://www.postgresql.org/docs/8.3/static/runtime-config-wal.html#GUC-SYNCHRONOUS-COMMIT</a></p>\n\n<p>This provides a useful compromise between running some queries in a manner that guarantees that in the event of database crash, it would remain in a consistent state, however, some allegedly committed transactions would appear as if they have been aborted cleanly.</p>\n\n<p>Obviously for some transactions, it's critical that commits remain final - which is why the flag can be configured per transaction.</p>\n\n<p>How can I take advantage of this functionality in django?</p>\n"},{"tags":["django","view","queryset"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12872693,"title":"How to create an Instance from a queryset in Django?","body":"<p>I have the following View Code:</p>\n\n<pre><code>        n = Nutrients.objects.all()\n\n        for q in n:\n            q.save()\n            Nutrition_Data.objects.create(food = l, nutrients = q)\n</code></pre>\n\n<p>Nutrition_Data is an Intermediate Table. </p>\n\n<p>In food I save the ID from request.Post Data.\nIs there a better way to save the Queryset (in n) into the Intermediate Table? </p>\n"},{"tags":["django","ckeditor"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12872920,"title":"CKEditor and Django file uploads to dated folders /media/uploads/2012/10/14 etc","body":"<p>I have my CKEditor upload path set to just /media/uploads/ however when I upload a file it puts it in date based folders. How can I stop this behavior?  Also the editor does not display photos properly I think this may be a software issue on my browser? </p>\n\n<p>Lastly, using {{ MEDIA_URL }} as the photos url outputs the django admin admin.blog.post url. I do not understand this.</p>\n\n<p>Would it be easier for me to create something like this and use a foreignkey and reference the photos manually. Also note my post model currently has no imagefield.</p>\n\n<pre><code>class Image(models.Model):\n    image = models.ImageField(blank=True)\n\nclass Post(models.Model):\n    image = models.ForeignKey(Image)\n</code></pre>\n\n<p>I've read about people using markdown to implement images in posts. What is the best method to put multiple images in your django blog posts, and float them of course.</p>\n\n<p>What is the best method for implementing this feature? OF course I would like to use the built in CKEditor image browser for ease.</p>\n"},{"tags":["django","django-forms","django-widget"],"answer_count":3,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":243,"score":1,"question_id":2856790,"title":"How to get a single widget to set 2 fields in Django?","body":"<p>I got a model with 2 fields: latitude and longitude. Right now they're 2 CharFields, but I want to make a custom widget to set it in admin - was thinking about displaying Google Maps, then getting the coordinates of the marker.</p>\n\n<p>But can I have 1 widget (a single map) to set 2 different fields? </p>\n"},{"tags":["django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":12871369,"title":"FB G+ and Twitter integration and pushing posts","body":"<p>I was just wondering if an app exists for Django that helps connecting all 3 social networks, imports basic info, profile picture, but most importantly pushes the post user makes to these three website accounts. I looked into django-social-auth but that just lets you register or login with these websites,not push posts.</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":99,"score":2,"question_id":12870186,"title":"Python headers are required to build Mercurial","body":"<p>I have been following step by step the screencast of kennethlove titled <a href=\"http://gettingstartedwithdjango.com/resources/\" rel=\"nofollow\">\"Getting Started with django\"</a>. I am stuck in \"Episode 6: Generic Views Are Cheaper Than Namebrand\". I am trying to install \"django-annoying\" which requires  \"Mercurial\". </p>\n\n<p>Im using OSX 10.8.2 and when I run on the terminal: <code>pip install mercurial</code> I get the message below.</p>\n\n<pre><code>  Downloading/unpacking mercurial\n  Downloading mercurial-2.3.2.tar.gz (3.6MB): 3.6MB downloaded\n  Running setup.py egg_info for package mercurial\n\n    Python headers are required to build Mercurial\n    Complete output from command python setup.py egg_info:\n    running egg_info\n\ncreating pip-egg-info/mercurial.egg-info\n\nwriting pip-egg-info/mercurial.egg-info/PKG-INFO\n\nwriting top-level names to pip-egg-info/mercurial.egg-info/top_level.txt\n\nwriting dependency_links to pip-egg-info/mercurial.egg-info/dependency_links.txt\n\nwriting manifest file 'pip-egg-info/mercurial.egg-info/SOURCES.txt'\n\nwarning: manifest_maker: standard file '-c' not found\n\n\n\nPython headers are required to build Mercurial\n\n----------------------------------------\nCommand python setup.py egg_info failed with error code 1 in /Users/gth158a/Sites/official/poll/build/mercurial\nStoring complete log in /Users/gth158a/.pip/pip.log\n</code></pre>\n\n<p>I have been searching for a solution and the closest I have found is somebody <a href=\"http://gullele.wordpress.com/2011/08/13/python-headers-are-required-to-build-mercurial-error-while-installing/\" rel=\"nofollow\">having the same issue in Ubuntu</a> but his proposed solution does not apply in my osx case.</p>\n\n<p>From my research, I learned that the headers referred to are \"C headers\" to build the app. I have installed the packages I have found in pip that have C headers in its description but no success at all. I would greatly appreciate it if you can point me in the right direction.</p>\n"},{"tags":["django","formatting","default","django-south"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":123,"score":0,"question_id":12442768,"title":"Django model south 0.7.6 migration problems: Any change in a table with another field with percentage in default value","body":"<p>I Am having problems after adding a field in my datebase model that contains the format of a datefield.</p>\n\n<p>like this:</p>\n\n<pre><code>date_format = models.CharField(max_length=32, default='%B %Y')\n</code></pre>\n\n<p>However in the same migration were some booleans with default values. Going deeper in the problem, and many rebuilding of the test database.... </p>\n\n<p>The problem is in any migration in the table with the default value with percentgae signs in it. So not the migration with this field in itselve, but any migration to the same table (see my second answer)</p>\n\n<p>adding a field like this:</p>\n\n<pre><code>show_category_name  = models.BooleanField(default=True)\n</code></pre>\n\n<p>with auto schememigration gives a migration file with this line:</p>\n\n<pre><code> # -*- coding: utf-8 -*-\nimport datetime\nfrom south.db import db\nfrom south.v2 import SchemaMigration\nfrom django.db import models\n\n\nclass Migration(SchemaMigration):\n\n    def forwards(self, orm):\n        # Adding field 'NewsItemCategory.show_category_name'\n        db.add_column('iamweb_newsitemcategory', 'show_category_name',\n                      self.gf('django.db.models.fields.BooleanField')(default=True),\n                      keep_default=False)\n</code></pre>\n\n<p>Gives this problem:</p>\n\n<pre><code>    bin/django migrate iamwebdjango.db.backends DEBUG (0.006) SELECT \"south_migrationhistory\".\"id\", \"south_migrationhistory\".\"app_name\", \"south_migrationhistory\".\"migration\", \"south_migrationhistory\".\"applied\" FROM \"south_migrationhistory\" WHERE \"south_migrationhistory\".\"applied\" IS NOT NULL ORDER BY \"south_migrationhistory\".\"applied\" ASC; args=()\nRunning migrations for iamweb:\n - Migrating forwards to 0020_auto__add_field_newsitemcategory_show_category_name__add_field_weblink.\n &gt; iamweb:0020_auto__add_field_newsitemcategory_show_category_name__add_field_weblink\ndjango.db.backends DEBUG (0.277) CREATE TABLE ROLLBACK_TEST (X INT); args=()\ndjango.db.backends DEBUG (0.008) INSERT INTO ROLLBACK_TEST (X) VALUES (8); args=()\ndjango.db.backends DEBUG (0.001) SELECT COUNT(X) FROM ROLLBACK_TEST; args=()\ndjango.db.backends DEBUG (0.273) DROP TABLE ROLLBACK_TEST; args=()\ndjango.db.backends DEBUG (0.177) CREATE TABLE STDDEV_TEST (X INT); args=()\ndjango.db.backends DEBUG (0.000) SELECT STDDEV(*) FROM STDDEV_TEST; args=()\ndjango.db.backends DEBUG (0.160) DROP TABLE STDDEV_TEST; args=()\ndjango.db.backends DEBUG (0.151) CREATE TABLE DDL_TRANSACTION_TEST (X INT); args=()\ndjango.db.backends DEBUG (0.000) CREATE TABLE DDL_TRANSACTION_TEST (X INT); args=()\ndjango.db.backends DEBUG (0.155) DROP TABLE DDL_TRANSACTION_TEST; args=()\ndjango.db.backends DEBUG (0.000) PRAGMA table_info(\"iamweb_newsitemcategory\"); args=()\ndjango.db.backends DEBUG (0.000) PRAGMA index_list(\"iamweb_newsitemcategory\"); args=()\ndjango.db.backends DEBUG (0.000) PRAGMA index_info(\"sqlite_autoindex_iamweb_newsitemcategory_1\"); args=()\ndjango.db.backends DEBUG (0.000) PRAGMA index_list(\"iamweb_newsitemcategory\"); args=()\ndjango.db.backends DEBUG (0.000) PRAGMA index_info(\"sqlite_autoindex_iamweb_newsitemcategory_1\"); args=()\ndjango.db.backends DEBUG (0.000) PRAGMA table_info(\"iamweb_newsitemcategory\"); args=()\nsouth DEBUG execute \"CREATE TABLE \"_south_new_iamweb_newsitemcategory\" (\"date_format\" varchar(32) DEFAULT '%B %Y', \"show_category_name\" bool NOT NULL DEFAULT 1, \"id\" integer PRIMARY KEY, \"menu_index\" integer NOT NULL UNIQUE, \"name\" varchar(64) NOT NULL)\" with params \"[]\"\n ! Error found during real run of migration! Aborting.\n\n ! Since you have a database that does not support running\n ! schema-altering statements in transactions, we have had \n ! to leave it in an interim state between migrations.\n\n! You *might* be able to recover with:\n ! The South developers regret this has happened, and would\n ! like to gently persuade you to consider a slightly\n ! easier-to-deal-with DBMS (one that supports DDL transactions)\n ! NOTE: The error which caused the migration to fail is further up.\nError in migration: iamweb:0020_auto__add_field_newsitemcategory_show_category_name__add_field_weblink\nTraceback (most recent call last):\n  File \"bin/django\", line 33, in &lt;module&gt;\n    djangorecipe.manage.main('palmrif.developmentsettings')\n  File \"/media/storage/django/sites/palmrif/eggs/djangorecipe-0.20-py2.7.egg/djangorecipe/manage.py\", line 16, in main\n    management.execute_manager(mod)\n  File \"/media/storage/django/sites/palmrif/parts/django/django/core/management/__init__.py\", line 438, in execute_manager\n    utility.execute()\n  File \"/media/storage/django/sites/palmrif/parts/django/django/core/management/__init__.py\", line 379, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"/media/storage/django/sites/palmrif/parts/django/django/core/management/base.py\", line 191, in run_from_argv\n    self.execute(*args, **options.__dict__)\n  File \"/media/storage/django/sites/palmrif/parts/django/django/core/management/base.py\", line 220, in execute\n    output = self.handle(*args, **options)\n  File \"/media/storage/django/sites/palmrif/eggs/South-0.7.6-py2.7.egg/south/management/commands/migrate.py\", line 108, in handle\n    ignore_ghosts = ignore_ghosts,\n  File \"/media/storage/django/sites/palmrif/eggs/South-0.7.6-py2.7.egg/south/migration/__init__.py\", line 213, in migrate_app\n    success = migrator.migrate_many(target, workplan, database)\n  File \"/media/storage/django/sites/palmrif/eggs/South-0.7.6-py2.7.egg/south/migration/migrators.py\", line 235, in migrate_many\n    result = migrator.__class__.migrate_many(migrator, target, migrations, database)\n  File \"/media/storage/django/sites/palmrif/eggs/South-0.7.6-py2.7.egg/south/migration/migrators.py\", line 310, in migrate_many\n    result = self.migrate(migration, database)\n  File \"/media/storage/django/sites/palmrif/eggs/South-0.7.6-py2.7.egg/south/migration/migrators.py\", line 133, in migrate\n    result = self.run(migration)\n  File \"/media/storage/django/sites/palmrif/eggs/South-0.7.6-py2.7.egg/south/migration/migrators.py\", line 107, in run\n    return self.run_migration(migration)\n  File \"/media/storage/django/sites/palmrif/eggs/South-0.7.6-py2.7.egg/south/migration/migrators.py\", line 81, in run_migration\n    migration_function()\n  File \"/media/storage/django/sites/palmrif/eggs/South-0.7.6-py2.7.egg/south/migration/migrators.py\", line 57, in &lt;lambda&gt;\n    return (lambda: direction(orm))\n  File \"/media/storage/django/sites/palmrif/local_checkouts_dev/iamweb/iamweb/migrations/0020_auto__add_field_newsitemcategory_show_category_name__add_field_weblink.py\", line 14, in forwards\n    keep_default=False)\n  File \"/media/storage/django/sites/palmrif/eggs/South-0.7.6-py2.7.egg/south/db/sqlite3.py\", line 31, in add_column\n    field.column: self._column_sql_for_create(table_name, name, field, False),\n  File \"/media/storage/django/sites/palmrif/eggs/South-0.7.6-py2.7.egg/south/db/generic.py\", line 44, in _cache_clear\n    return func(self, table, *args, **opts)\n  File \"/media/storage/django/sites/palmrif/eggs/South-0.7.6-py2.7.egg/south/db/sqlite3.py\", line 103, in _remake_table\n    \", \".join([\"%s %s\" % (self.quote_name(cname), ctype) for cname, ctype in definitions.items()]),\n  File \"/media/storage/django/sites/palmrif/eggs/South-0.7.6-py2.7.egg/south/db/generic.py\", line 273, in execute\n    cursor.execute(sql, params)\n  File \"/media/storage/django/sites/palmrif/parts/django/django/db/backends/util.py\", line 38, in execute\n    sql = self.db.ops.last_executed_query(self.cursor, sql, params)\n  File \"/media/storage/django/sites/palmrif/parts/django/django/db/backends/__init__.py\", line 505, in last_executed_query\n    return smart_unicode(sql) % u_params\nTypeError: not enough arguments for format string\n</code></pre>\n\n<p>I Am using South 0.7.6. Weird thing is, this version should have fixed this bug, see: <a href=\"http://south.readthedocs.org/en/latest/releasenotes/0.7.6.html\" rel=\"nofollow\">Release notes 0.7.6. bug fix default boolean value in sqlite</a></p>\n\n<p>Using sqlite3, python 2.7.2, django 1.3.1 (by the way, in production using mySql, but the test database in sqlite is very convenient)</p>\n\n<p>Note the problem is refering to line 14 in the migration file, which is this line:</p>\n\n<pre><code>        db.add_column('iamweb_newsitemcategory', 'show_category_name',\n                  self.gf('django.db.models.fields.BooleanField')(default=True),\n                  keep_default=False)\n</code></pre>\n\n<p>Not enough arguments.... well for starters: I didn't create this line, South did :)</p>\n\n<p>The stacktrace is a bit confusing, because the last line of the debug lines (before the stack trace is:</p>\n\n<pre><code>south DEBUG execute \"CREATE TABLE \"_south_new_iamweb_newsitemcategory\" (\"date_format\" varchar(32) DEFAULT '%B %Y', \"show_category_name\" bool NOT NULL DEFAULT 1, \"id\" integer PRIMARY KEY, \"menu_index\" integer NOT NULL UNIQUE, \"name\" varchar(64) NOT NULL)\" with params \"[]\"\n</code></pre>\n\n<p>So it might have to do with South still wanting to parse the string because of the '%B %Y' in this execute command....</p>\n\n<p>After 4 days of struggling with this problem (not fulltime of course) I Am starting to doubt the South way.... however, not found any better alternative.</p>\n"},{"tags":["python","django"],"answer_count":4,"favorite_count":9,"up_vote_count":13,"down_vote_count":0,"view_count":4467,"score":13,"question_id":1310495,"title":"Running a Python script outside of Django","body":"<p>I have a script which uses the Django ORM features, amongst other external libraries, that I want to run outside of Django (that is, executed from the command-line).</p>\n\n<p>Edit: At the moment, I can launch it by navigating to a URL...</p>\n\n<p>How do I setup the environment for this?</p>\n"},{"tags":["python","database","django","django-models"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":718,"score":1,"question_id":10077721,"title":"Django - DatabaseError: No such table","body":"<p>I defined two models:</p>\n\n<pre><code>class Server(models.Model):\n    owners = models.ManyToManyField('Person')\n\nclass Person(models.Model):\n    name = models.CharField(max_length=50)\n\nadmin.site.register(Server)\nadmin.site.register(Person)\n</code></pre>\n\n<p>After that I even checked the sql, just for fun: </p>\n\n<pre><code>BEGIN;\nCREATE TABLE \"servers_server_owners\" (\n    \"id\" integer NOT NULL PRIMARY KEY,\n    \"server_id\" integer NOT NULL,\n    \"person_id\" integer NOT NULL,\n    UNIQUE (\"server_id\", \"person_id\")\n)\n;\nCREATE TABLE \"servers_server\" (\n    \"id\" integer NOT NULL PRIMARY KEY,\n    \"name\" varchar(50) NOT NULL,\n    \"port\" integer unsigned NOT NULL,\n    \"state\" integer NOT NULL\n)\n;\nCREATE TABLE \"servers_person\" (\n    \"id\" integer NOT NULL PRIMARY KEY,\n    \"name\" varchar(50) NOT NULL\n)\n;\nCOMMIT;\n</code></pre>\n\n<p>There it even says <code>CREATE TABLE \"servers_server_owners\"</code></p>\n\n<p>I ran <code>syncdb</code> to install the new models to the database. I went to the admin-interface to define some objects to play with, but I got the following error: </p>\n\n<p>DatabaseError at /admin/servers/server/1/<br>\nno such table: servers_server_owners</p>\n\n<p>I shutdown the dev-server, ran <code>syncdb</code> again, started the server: Still same problem. Why can't it find, the table, even though it just told me it created id?</p>\n\n<p><strong>UPDATE:</strong> Reason was that because 'Server' -model already existed, 'syncdb' did not update the database.</p>\n"},{"tags":["python","django","django-templates","django-views"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":12870110,"title":"Archives page in Django","body":"<p>I am trying to create a Archives page in django/webfaction. I need to group the posts by year and month. sample: <a href=\"http://www.jaredigital.com/archive/\" rel=\"nofollow\">http://www.jaredigital.com/archive/</a></p>\n\n<p>Code in urls.py:</p>\n\n<pre><code>url(r'^Archives',ListView.as_view(\n    queryset=Post.objects.all().order_by(\"-created\"),\n    template_name=\"Archives.html\")),\n</code></pre>\n\n<p>Code in template:</p>\n\n<pre><code>{% block content %}\n\n    {% for post in object_list %}\n    {{ post.created|date:'Y-m-d'}} : &lt;a href=\"/blog/{{post.id}}\"&gt;{{ post.title }} &lt;/a&gt;\n    &lt;br&gt;\n    {% endfor %}\n\n{% endblock %}\n</code></pre>\n\n<p>Also note: I need to change the date format to yyyy- month (like 2012 - Jan).\nHow do I achieve this? Kindly help me. Thanks.</p>\n"},{"tags":["django","google-app-engine","django-models","gae-datastore"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12870637,"title":"GAE: db Model property using 'name' param","body":"<p>Trying to optimise db model class property name by using <code>name</code> in the property.</p>\n\n<p>Ex.</p>\n\n<pre><code>class terminals(db.Model):\n   location_code = db.StringProperty()\n   terminal_code = db.StringProperty(default='')\n   start_invoice_no = db.IntegerProperty(indexed=False, default=1, name='sin')\n   next_invoice_no = db.IntegerProperty(indexed=False)\n   last_doc_details = db.TextProperty(default='{}')\n</code></pre>\n\n<p>Query on terminals:</p>\n\n<pre><code>terminal_qry = db.Model(terminals).all()\n</code></pre>\n\n<p>putting happening fine into db. but while i try serialize this query object.</p>\n\n<pre><code>serializers.serialize('json', [terminal_qry])\n</code></pre>\n\n<p>its raising the error as, </p>\n\n<pre><code>AttributeError: 'terminals' object has no attribute 'sin'\n</code></pre>\n\n<p>Could any one tell this, where went wrong here?</p>\n\n<p>Regards.</p>\n"},{"tags":["django","solr","django-haystack"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12870315,"title":"Make database objects non-searchable","body":"<p>Using the django-haystack and solr as a search engine, I have successfully implemented a search engine which throws out the list of users whose usernames, first names, last names, or email addresses match the given query.</p>\n\n<p><strong>search_indexes.py</strong></p>\n\n<pre><code>from haystack.indexes import *\nfrom haystack import site\n\nfrom django.contrib.auth.models import User\n\nclass UserIndex(SearchIndex):\n    text = CharField(document=True, use_template=True)\n    first_name = CharField(model_attr='first_name')\n    last_name = CharField(model_attr='last_name')\n    email = CharField(model_attr='email')\n\n    def index_queryset(self):\n        return User.objects.exclude(username='root')\n\nsite.register(User, UserIndex)\n</code></pre>\n\n<p>and </p>\n\n<p><strong>user_text.txt</strong></p>\n\n<pre><code>{{ object.username }}\n{{ object.first_name }}\n{{ object.last_name }}\n{{ object.email }}\n</code></pre>\n\n<p>However, I am planning to let the users set their privacy settings so that they will not be searchable with their first_name, last_name, or email address.</p>\n\n<p>I have been banging my head and my computer for days trying to accomplish this functionality but haven't found any real good solution yet.</p>\n\n<p>Is it at all possible to accomplish the above functionality?</p>\n\n<p>Thank you very much in advance.</p>\n"},{"tags":["django","django-modelformsets","formset","django-formwizard"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12868997,"title":"Django WizardView with both ModelForm and ModelFormSet (this one not rendering)","body":"<p>I am trying to create a FormWizard, so that a user enters a 'date' only once (on step 1) and then (on step 2), enters some names with associated amounts.\nFor each 'name' and associated 'amount', I want to save an instance of a Model (fields: date, name, amount).</p>\n\n<p>For step 2, I tried using a FormSet, but the Wizard view is simply not rendering any fields. It shows only \"step 2 of 2\" and a Submit button.</p>\n\n<pre><code># In forms.py\n\nclass FormForDate(forms.Form):\n'''Only for date'''\n\n    date = forms.DateField(initial = datetime.date.today()) \n\nclass AccountaModelForm(ModelForm):\n\n    class Meta:\n        model = Account #model has 3 field: name, date, amount\n        exclude = ['date']\n\nclass AccountsFormSet(forms.Form):\n\n    amount_formset = modelformset_factory(Account, form=AccountaModelForm, extra=10, exclude=('date'))\n    amount_s_formset = amount_formset(queryset=Account.objects.none(),)\n</code></pre>\n\n<p>In urls.py (among others):</p>\n\n<pre><code>url(r'^form/$', AccountMultiple.as_view([FormForDate, AccountsFormSet]))\n</code></pre>\n\n<p>And in views.py</p>\n\n<pre><code>class AccountMultiple(SessionWizardView):\n\n    def done(self, form_list, **kwargs):\n\n        for form in form_list:\n            print form #I am just doing something\n\n        return render_to_response('app/formset.html', {\n            'form': [form.cleaned_data for form in form_list],\n        })\n</code></pre>\n\n<p>Am I doing something wrong in this code? \nOr is it a problem with the template (I used the one from Django docs: <a href=\"https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/#creating-templates-for-the-forms\" rel=\"nofollow\">here</a>)\nOr is there a third possibility I am missing?</p>\n"},{"tags":["django","documentation","tastypie","python-sphinx"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":12851898,"title":"Tastypie documentation generation","body":"<p>I'm trying to use auto-doc tool to generate API doc for tastypie REST API. I tried tastytool, but it seems not showing the api's result parameters but the model's columns. Then I tried Sphinx seems more promising since Tastypie supports Sphinx, but I can't find an example to show where &amp; how to put comment for the API inside the code, and generate them into the document. </p>\n\n<p>Anyone can share some info or example about correctly write comment and generate Sphinx doc for Tastypie based API? thanks.</p>\n"},{"tags":["javascript","python","html","ajax","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":12870479,"title":"How to delete li element in ajax response function","body":"<p>I am trying to delete the <code>li</code> element which is the parent of the clicked <code>a</code> element. </p>\n\n<p>This is my code: </p>\n\n<pre><code>function vanish(id_arg){\n        $.ajax({\n            url: \"/vanish/\",\n            type: \"POST\",\n            data: {id_to_delete: id_arg},\n        }).success(function(data){\n           document.getElementsByTagName('li').getElementById(id_arg).remove();\n        });\n    }\n</code></pre>\n\n<p>and this is my html: </p>\n\n<pre><code>{% for i in p %}\n&lt;li id=\"{{i.id}}\"&gt; &lt;a&gt;{{i.name}}&lt;/a&gt;&lt;a onclick=\"vanish({{i.id}})\" class=\"item\"&gt;delete&lt;/a&gt;&lt;/li&gt;    \n{% endfor %}\n</code></pre>\n\n<p>p is the query response containing name and id. </p>\n\n<p><code>vanish()</code> will delete the item from database and as a ajax response I want to delete the item from page also. I need delete and not hide.</p>\n\n<p>My problem is that it is not deleting from the page, I am trying to catch the <code>li</code> with javascript and <code>remove()</code> it but never find the right code for it.</p>\n"},{"tags":["django","django-templates"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12852862,"title":"Accessing dictionary keys with invalid identifiers in django templates","body":"<p>Say I have a dictionary that looks like:</p>\n\n<pre><code>settings = {\n    'info:ip': '127.0.0.1',\n    'info:browser': 'chrome'\n}\n</code></pre>\n\n<p>I'd like to access these items in a django template, as in:</p>\n\n<pre><code>The IP is {{settings.info:ip}} .\n</code></pre>\n\n<p>\"info:ip\" is a valid dictionary key but not a valid variable name or django template name I can't seem to get to it.</p>\n\n<p>I realize I could use a different dictionary key, but it's inconvenient for several reasons. Any other way to get at that dictionary key in my template?</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12855534,"title":"Highlight dropdown menu in django","body":"<p>I have a template with a dropdown menu. Dropdown contains several options (read links). When one of them is chosen I want the dropdown to be highlighted. To do this I want to check if request path is one of the dropdown menu options.</p>\n\n<p>I.e. say my links inside the dropdown have the urls url1, url2, url2, and I want to do this in template:</p>\n\n<pre><code>{% if request.path in [url1, url2, url3] %}\n    highlight dropdown menu\n{% endif %}\n</code></pre>\n\n<p>What is the best approach to the problem?</p>\n"},{"tags":["django","amazon-s3","sorl-thumbnail","django-storage"],"answer_count":2,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":162,"score":1,"question_id":12659655,"title":"django-storages + sorl_thumbnail + S3 not working well together (URLs mismatch)","body":"<p>I am using django-storages and sorl_thumbnail together and I am using Amazon S3 for static and media files. I am using one bucket with 2 folders, 1 for static and 1 for media.</p>\n\n<p>Here is my config:</p>\n\n<pre><code>MEDIA_ROOT = '/media/'\nMEDIA_URL = 'https://s3.amazonaws.com/my-bucket/media/'\nSTATIC_ROOT = '/static/'\nSTATIC_URL = 'https://s3.amazonaws.com/my-bucket/static/'\nAWS_STORAGE_BUCKET_NAME = 'my-bucket'\nDEFAULT_FILE_STORAGE = 'my_lib.s3utils.MediaRootS3BotoStorage'\nSTATICFILES_STORAGE = 'my_lib.s3utils.StaticRootS3BotoStorage'\n</code></pre>\n\n<p><code>MediaRootS3BotoStorage</code> and <code>StaticRootS3BotoStorage</code> are defined like this:</p>\n\n<pre><code>StaticRootS3BotoStorage = lambda: S3BotoStorage(location='static')\nMediaRootS3BotoStorage = lambda: S3BotoStorage(location='media')\n</code></pre>\n\n<p>When I am using sorl_thumbnail, the thumbnails generated are located in the right directory: <code>https://s3.amazonaws.com/my-bucket/media/cache</code> but when sorl_thumbnail is trying to retrieve an already existing thumbnail, the URL generated is: <code>https://s3.amazonaws.com/my-bucket/cache</code>, you will notice that the <code>media</code> folder is omitted.</p>\n\n<p>Do you have any idea how I could fix that?</p>\n\n<p>I know I could just use django-storages and have my static and media files all mixed up in my bucket, but that's a bit too dirty for my taste :)</p>\n\n<p>Thank you!</p>\n"},{"tags":["django","django-templates"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":12865914,"title":"Django CSS & Static Media Not Loading","body":"<p>So I've been hitting my head against the wall on this for the last hour and can't seem to figure out why none of the static media (CSS, Images, JS etc) when my template is rendered. \nCould someone please help me find out why adjustments I need to make? Below are snippets from Settings.py, Index.html and stylesheet please let me know if more is needed.</p>\n\n<p>My static files are located in the following directory:\n/djangoproject/website/static</p>\n\n<pre><code>Settings.py    -  Located /djangoproject/djangoprojectname/\nSTATIC_ROOT = os.path.normpath(os.path.join(PROJECT_ROOT,\n\"/static/\"))\n\nSTATIC_URL = '../website/static/'\n</code></pre>\n\n<p>Here's a snippet from my index.html that is supposed to be calling the css style sheet with {{ STATIC_URL }}</p>\n\n<pre><code>Index.html  - Location /djangoproject/website/templates/  \n&lt;link rel=\"stylesheet\" href=\"{{ STATIC_URL }}css/style.css\"&gt;\n</code></pre>\n\n<p>Location of CSS StyleSheet</p>\n\n<pre><code>style.css - Location /djangoproject/website/static/css/\n</code></pre>\n"},{"tags":["django","forms","django-forms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":461,"score":0,"question_id":4189710,"title":"How to create a django form with a select list initialized from a dynamic query?","body":"<p>I'm trying to build a form where a select list can be initialized from a tuple parameter I pass in on creation of the form object.  </p>\n\n<p>I tried doing the following, which worked for CREATING the form.  But when I try to submit the form, I get an is_valid() = false error.  In the example below the myrooms variable is the data I'd like to dynamically load upon initialization of the form.  Any help here? </p>\n\n<pre><code>class SessionInfoForm(forms.ModelForm):\n\n     def __init__(self, myrooms = None, *args, **kwargs):\n         super(SessionInfoForm, self).__init__(*args, **kwargs)\n         if myrooms != None:\n             self.fields['room'].choices = myrooms\n\n     class Meta:\n         model = SessionInfo\n         fields = [\"title\", \"room\", \"viewer_limit\", \"starttime\", \"endtime\", \"billing_type\", \"billing_value\"]\n</code></pre>\n"},{"tags":["django","django-admin"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":276,"score":3,"question_id":6727372,"title":"get_readonly_fields in a TabularInline class in Django?","body":"<p>I'm trying to use get_readonly_fields in a TabularInline class in Django:</p>\n\n<pre><code>class ItemInline(admin.TabularInline):\n    model = Item\n    extra = 5\n\n    def get_readonly_fields(self, request, obj=None):\n        if obj:\n            return ['name']\n\n        return self.readonly_fields\n</code></pre>\n\n<p>This code was taken from another StackOverflow question:\n<a href=\"http://stackoverflow.com/questions/3918453/django-admin-site-prevent-fields-from-being-edited\">Django admin site: prevent fields from being edited?</a></p>\n\n<p>However, when it's put in a TabularInline class, the new object forms don't render properly.  The goal is to make certain fields read only while still allowing data to be entered in new objects.  Any ideas for a workaround or different strategy?</p>\n"},{"tags":["javascript","django","django-templates","javascript-framework","mustache"],"answer_count":6,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":1348,"score":8,"question_id":7985594,"title":"Django and Mustache use the same syntax for template","body":"<p>I try to smuggle HTML template in the HTML for mustache.js, however\nthe django template engine remove all the placeholders that should be\noutput as-is to the front-end</p>\n\n<p>The template is included in HTML in this way:</p>\n\n<pre><code>&lt;script type=\"text/x-mustache-template\" data-id=\"header_user_info\"&gt;\n    &lt;div id=\"header_user_info\"&gt;\n        &lt;div id=\"notification\"&gt;0&lt;/div&gt;\n        &lt;a href=\"#\"&gt;{{username}}&lt;/a&gt;\n    &lt;/div&gt;\n&lt;/script&gt;\n</code></pre>\n\n<p>and I can get the HTML template by running $(el).html(), and generate\nhtml by using Mustache.to_html(temp, data);</p>\n\n<p>I could put all the template into another static file and serve from\nCDN, but then it would be hard to track where the template belongs,\nand at least one extra http request.</p>\n"},{"tags":["django","reviews"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":609,"score":1,"question_id":2710828,"title":"Django 5 star Reviews","body":"<p>I am new to programming and I just jumped in to Django and I need a bit of help. I downloaded the generic reviews model off  of Google code and I have no clue how to implement it. Can anyone pass along some guidance on how to make this work with a 5 star ratings system? I would appreciate it. Thanks.</p>\n"},{"tags":["python","django","sql-order-by"],"answer_count":2,"favorite_count":4,"up_vote_count":6,"down_vote_count":0,"view_count":5514,"score":6,"question_id":3736964,"title":"Django Query using .order_by() and .latest()","body":"<p>I have a model:</p>\n\n<pre><code>class MyModel(models.Model):\n   creation_date = models.DateTimeField(auto_now_add = True, editable=False)\n\n   class Meta:\n      get_latest_by = 'creation_date'\n</code></pre>\n\n<p>I had a query in my view that did the following:</p>\n\n<pre><code>instances = MyModel.objects.all().order_by('creation_date')\n</code></pre>\n\n<p>And then later I wanted <code>instances.latest()</code>, but it would not give me the correct instance, in fact it gave me the first instance. Only when I set order_by to <code>-creation_date</code> or actually removed the order_by from the query did <code>.latest()</code> give me the correct instance. This also happens when I test this manually using python manage.py shell instead of in the view.</p>\n\n<p>So what I've done now is in the Model's Meta I've listed <code>order_by = ['creation_date']</code> and not used that in the query, and that works.</p>\n\n<p>I would have expected <code>.latest()</code> to always return the most recent instance based on a (date)(time) field. Could anyone tell me whether it's correct that <code>.latest()</code> behaves strangely when you use <code>order_by</code> in the query?</p>\n"},{"tags":["python","objective-c","django","login"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12853843,"title":"How to get session and authenticate user information from iphone to django?","body":"<p>I am creating a login process from iphone to django server.</p>\n\n<p>I made Session class using class method, httprequest wrapper using json.</p>\n\n<p>but I don't know. How can I get session information and matching server session?</p>\n\n<p>if I get session information, (just example pseudo code)</p>\n\n<pre><code>def function(username, password)\n    if is_authenticate(username, password) == true\n        login(username, password)\n        #What send value to iphone \n        return returnValue(session_id)\n</code></pre>\n\n<p>How can I send session_id?</p>\n\n<p>This is Login Function</p>\n\n<pre><code>    def sign_in(request):\n     if request.method=='POST':\n         username = requset.POST['username']\n         password = request.POST['password']\n         user = authenticate(username=username, password=password)\n         list = []\n         if user is not None:\n             if user.is_activate:\n                 try:\n                     login(request,user)\n                     list.append( {'fields':\n                                        {'login_status':'login success'},})\n                 except:\n                     list.append( {'fields':\n                                        {'login_status':'login fail'},})\n\n\n\nreturnValues = json.dumps(list,cls=DjangoJSONEncoder)\nreturn HttpResponse(returnValues)\n</code></pre>\n"},{"tags":["javascript","django","typescript","django-compressor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":85,"score":1,"question_id":12865648,"title":"Django Compressor to work with TypeScript","body":"<p>I want <a href=\"http://django_compressor.readthedocs.org/en/latest/settings/#django.conf.settings.COMPRESS_PRECOMPILERS\" rel=\"nofollow\">Django Compressor</a> to work with Microsoft new language <a href=\"http://www.typescriptlang.org\" rel=\"nofollow\">TypeScript</a>.</p>\n\n<p>I downloaded the compiler <code>tsc</code> and it works fine.</p>\n\n<p>When trying to use it with Django Compressor this way:</p>\n\n<pre><code>COMPRESS_PRECOMPILERS = (\n    ('text/less', 'lessc {infile} {outfile}'),\n    ('text/typescript', 'tsc {infile} {outfile}'),\n    )\n</code></pre>\n\n<p>and</p>\n\n<pre><code>{% compress js %}\n        &lt;script type=\"text/typescript\" charset=\"utf-8\"&gt;\n            var x=3;\n            function greeter(person: string) {\n            return \"Hello, \" + person;\n            }\n\n            var user = \"Jane User\";\n        &lt;/script&gt;\n{% endcompress %}\n</code></pre>\n\n<p>the output is an empty JS script tag</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>I guess it is because the tsc program does not have the option to write the code to a predefined file.</p>\n\n<p>Does someone have an idea?</p>\n\n<p>(As said, the tsc works as well as django compressor for LESS..)</p>\n"},{"tags":["django"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":644,"score":0,"question_id":9128844,"title":"django Enter a valid date. validation error","body":"<p>My model</p>\n\n<pre><code> class Member(models.Model):\n\ndob = models.DateField('dob')\n</code></pre>\n\n<p>form </p>\n\n<pre><code>class MemberForm(ModelForm):\n  dob = forms.DateField(required=False, input_formats='%Y-%m-%d')\n  class Meta:\n    model = Member\n    exclude = ('profile',)   \n</code></pre>\n\n<p>some view code </p>\n\n<pre><code>if request.method == 'POST': # If the form has been submitted...\n        signup_form = SignupForm(request.POST) # A form bound to the POST data\n        # Create a formset from the submitted data\n        member_formset = MemberFormSet(request.POST, request.FILES)\n        # import pdb; pdb.set_trace()\n        if signup_form.is_valid() and member_formset.is_valid():\n          print 'in valid'\n          signup = signup_form.save(request.POST)\n          for form in member_formset.forms:\n            member = form.save(commit=False)\n            member.profile = signup\n            # import pdb; pdb.set_trace()\n            # print member.objects.all()\n            member.save()\n          return redirect(\"/main\") # Redirect to a 'success' page\n</code></pre>\n\n<p>when m submitting the form the error message coming is </p>\n\n<pre><code>Enter a valid date.\n</code></pre>\n\n<p>What should i do to solve this validation .</p>\n"},{"tags":["python","django","google-app-engine"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":10726458,"title":"How could I enable template caching in appengine after incorporating calls to parent directories?","body":"<p>My problem started when the extends tag in a Django template could not reference a base template in a parent dir. This question<a href=\"http://stackoverflow.com/questions/4994913/app-engine-default-django-version-change\">1</a> has a very good answer to the problem, but it disables the implicit template caching provided by the default template.render function in appengine.</p>\n\n<p>The author of the answer also mentions that it would be fairly simple to implement this template caching, but I feel tampering with this kind of functionality will produce bugs in the future. Any suggestions?</p>\n"},{"tags":["python","django","mysql-python"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":12867140,"title":"Python MySQLDB: Get the result of fetchall in a list","body":"<p>I would like to get the result of the fetchall operation in a list instead of tuple of tuple or tuple of dictionaries. \nFor example, </p>\n\n<pre><code>cursor = connection.cursor() #Cursor could be a normal cursor or dict cursor\nquery = \"Select id from bs\"\ncursor.excute(query)\nrow = cursor.fetchall()\n</code></pre>\n\n<p>Now, the problem is the resultant row is either ((123,),(234,)) or ({'id':123}, {'id':234})\nWhat I am looking for is (123,234) or [123,234]. I am trying to avoid the manually looping over the items. Thanks in advance</p>\n"},{"tags":["django","forms","admin","widget"],"answer_count":1,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":780,"score":5,"question_id":2271080,"title":"Django: using ForeignKeyRawIdWidget outside of admin forms","body":"<p>I'm trying to find some documentation of how to use the ForeignKeyRawIdWidget in my own forms. Currently I keep getting the error, \"<strong>init</strong>() takes at least 2 non-keyword arguments (1 given)\" which tells me nothing.</p>\n\n<p>Any help would be most appreciated. Googling this turns up little but dev conversations and no examples that I can find of how to implement it.</p>\n\n<p><strong>Update</strong>: This is solved; the below code incorporates the solution.</p>\n\n<pre><code>from django.contrib.admin.sites import site\n\nclass InvoiceForm(ModelForm):\n    class Meta:\n        model = Invoice\n        widgets = {\n            'customer': ForeignKeyRawIdWidget(Invoice._meta.get_field('customer').rel, site),\n        }\n</code></pre>\n"},{"tags":["python","django","imagefield"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":147,"score":0,"question_id":11279570,"title":"Programmatically save image to Django ImageField 2","body":"<p>I've read many answers and tried all of this in the shell, but does not want to save my local image correctly, he truncate files. When image size is 400kb, he create file in media dir with size 10-30kb. I don't know why. For example i have image with path d:/1.png. I tried</p>\n\n<pre><code>from django.core.files import File\nfileObject=File(open(\"d:/1.png\"))\nobject.image.save('1.png',fileObject,True)\n</code></pre>\n\n<p>fileObject.size show correct size of image, but object.image.size is not correct and file, what he save not full.\nAlso i tried </p>\n\n<pre><code>from django.core.files.temp import NamedTemporaryFile\ntemp = NamedTemporaryFile()#with delete=True TypeError: __init__() got an unexpected keywork argument 'delete'\ntemp.write(open('d:/1.png').read())\ntemp.flush()\nf=File(temp)#f.size not correct\nobject.image.save('1.png',f,True)\nand object.image.size and file not correct, file not full.\n</code></pre>\n\n<p>I tried using StringIO, but this not work too. I don't know what try to save this images correctly.\nPlease, help.</p>\n"},{"tags":["django","scheduled-tasks","crontab","celery"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":278,"score":0,"question_id":10596826,"title":"Django celery crontab every 30 seconds - is it even possible?","body":"<p>Is it possible to run the django celery crontab very 30 seconds <strong>DURING SPECIFIC HOURS</strong>? </p>\n\n<p>There are only settings for minutes, hours and days.</p>\n\n<p>I have the crontab working, but I'd like to run it every 30 seconds, as opposed to every minute.</p>\n\n<p><strong>Alternatively...</strong></p>\n\n<p>Is it possible to turn the interval on for 30 seconds, and turn on the interval schedule only for a certain period of the day?</p>\n"},{"tags":["django","django-models","django-authentication"],"answer_count":8,"favorite_count":22,"up_vote_count":31,"down_vote_count":1,"view_count":5595,"score":30,"question_id":2610088,"title":"Can django's auth_user.username be varchar(75)? How could that be done?","body":"<p>Is there anything wrong with running alter table on auth_user to make username be varchar(75) so it can fit an email? What does that break if anything?</p>\n\n<p>If you were to change auth_user.username to be varchar(75) where would you need to modify django? Is it simply a matter of changing 30 to 75 in the source code?:</p>\n\n<pre><code>username = models.CharField(_('username'), max_length=30, unique=True, help_text=_(\"Required. 30 characters or fewer. Letters, numbers and @/./+/-/_ characters\"))\n</code></pre>\n\n<p>Or is there other validation on this field that would have to be changed or any other repercussions to doing so?</p>\n\n<p>See comment discussion with bartek below regarding the reason for doing it.</p>\n\n<p><strong>Edit</strong>: Looking back on this after many months. For anyone who doesn't know the premise: Some apps don't have a requirement or desire to use a username, they use only email for registration &amp; auth. Unfortunately in django auth.contrib, username is required. You could start putting emails in the username field, but the field is only 30 char and emails may be long in the real world. Potentially even longer than the 75 char suggested here, but 75 char accommodates most sane email addresses. The question is aimed at this situation, as encountered by email-auth-based applications.</p>\n"},{"tags":["ruby-on-rails","django","popularity"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":6,"view_count":156,"score":-6,"question_id":12865213,"title":"Popularity of Django / Ruby-on-Rails on StackOverflow","body":"<p>I am a web-programmer, who had to make a choice recently between the two non-PHP frameworks, and I was curious how their relative popularity changed over time. I ran into <a href=\"http://www.google.com/trends/explore#q=django%20framework,%20ruby%20on%20rails%20framework&amp;cmpt=q\" rel=\"nofollow\">this comparison of SVN \"popularity\"</a> and I found it useful. So I decided to do the same thing for the web frameworks.</p>\n\n<p>In this topic I intend to track year by year number of questions devoted to Ruby-on-Rails and Django (Python) frameworks on the StackOverflow. Here is the first set of numbers:</p>\n\n<pre><code>                | Oct 2012 | \n----------------------------\n[ruby-on-rails] |    90225 | \n[django]        |    39896 |\n</code></pre>\n\n<p><strong>The question is:</strong> what these numbers are going to look next year (and years after)? I'm only interested in that. And if you don't know, please, don't downvote :)</p>\n\n<hr>\n\n<p>P.S. It's hard to compare popularity of these frameworks with Google Trends because \"Django\" is a name of quite a few musicians from all over the world and Ruby-on-Rails has synonyms (like RoR). </p>\n\n<p>For example, these stats show different leaders:</p>\n\n<ul>\n<li><a href=\"http://www.google.com/trends/explore#q=python%20django%2C%20ruby%20rails&amp;cmpt=q\" rel=\"nofollow\">\"Python Django\" VS \"Ruby Rails\"</a> – Rails is more popular</li>\n<li><a href=\"http://www.google.com/trends/explore#q=django%20framework,%20ruby%20on%20rails%20framework&amp;cmpt=q\" rel=\"nofollow\">\"Django framework\" VS \"Ruby on Rails framework\"</a> – Django is more popular</li>\n</ul>\n"},{"tags":["mysql","database","django","postgresql","orm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12865418,"title":"App.objects.get(foo=bar) has no 'order_by' attribute","body":"<p>I am making a query that needs to get the max number of votes on one of TODAY's objects.\nI tried <code>max_votes = App.objects.get(day=today).order_by(\"-votes\")[0]</code>, but that gave me an attribute error. I don't get that error when I do <code>max_votes = Day.objects.all().order_by(\"-votes\")[0]</code></p>\n\n<p>How do I properly get the max number of votes on one of today's objects?</p>\n"},{"tags":["python","django","python-2.7","django-views"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":1,"view_count":83,"score":3,"question_id":12864464,"title":"Django: href {% url %} issue","body":"<p>Why does</p>\n\n<pre><code>&lt;a href=\"{% url 'answers.views.display_answers' Question.id %}\"&gt;View answers&lt;/a&gt;\n</code></pre>\n\n<p>in my template translate to this interpretation by Django:</p>\n\n<pre><code>Request URL:    http://127.0.0.1:8000/questions/%7B%%20url%20'answers.views.display_answers'%20Question.id\n</code></pre>\n\n<p>which of course leads to an url mismatch error.</p>\n\n<p>Seems like its reading in my '{' in ASCII form. Can anyone enlighten me as to why it is so?</p>\n\n<p>EDIT:</p>\n\n<p>This was how i rendered the template--</p>\n\n<pre><code>return render(request, 'display_questions.html', context) \n</code></pre>\n\n<p>and the template contains the href. My display answer view redirects to another view as such: </p>\n\n<pre><code>def display_answers(request, q_id): \n        q = get_object_or_404(Question, id=q_id) \n        ans_list = Answer.objects.filter(question=q) \n        context = {'question': q, 'ans_list': ans_list} \n        return redirect('view_answers.html', context)\n</code></pre>\n\n<p>Error:</p>\n\n<p>The current URL, questions/{% url 'answers.views.display_answers' Question.id, didn't match any of these.</p>\n"},{"tags":["python","django","json"],"answer_count":5,"favorite_count":13,"up_vote_count":40,"down_vote_count":0,"view_count":32131,"score":40,"question_id":2428092,"title":"Creating a JSON response using Django and Python","body":"<p>I'm trying to convert a server side Ajax response script into a Django HttpResponse, but apparently it's not working.</p>\n\n<p>This is the server-side script:</p>\n\n<pre><code>/* RECEIVE VALUE */\n$validateValue=$_POST['validateValue'];\n$validateId=$_POST['validateId'];\n$validateError=$_POST['validateError'];\n\n/* RETURN VALUE */\n$arrayToJs = array();\n$arrayToJs[0] = $validateId;\n$arrayToJs[1] = $validateError;\n\nif($validateValue ==\"Testuser\"){  // Validate??\n    $arrayToJs[2] = \"true\";       // RETURN TRUE\n    echo '{\"jsonValidateReturn\":'.json_encode($arrayToJs).'}';  // RETURN ARRAY WITH success\n}\nelse{\n    for($x=0;$x&lt;1000000;$x++){\n        if($x == 990000){\n            $arrayToJs[2] = \"false\";\n            echo '{\"jsonValidateReturn\":'.json_encode($arrayToJs).'}';   // RETURNS ARRAY WITH ERROR.\n        }\n    }\n}\n</code></pre>\n\n<p>And this is the converted code</p>\n\n<pre><code>def validate_user(request):\n    if request.method == 'POST':\n        vld_value = request.POST.get('validateValue')\n        vld_id = request.POST.get('validateId')\n        vld_error = request.POST.get('validateError')\n\n        array_to_js = [vld_id, vld_error, False]\n\n        if vld_value == \"TestUser\":\n            array_to_js[2] = True\n            x = simplejson.dumps(array_to_js)\n            return HttpResponse(x)\n        else:\n            array_to_js[2] = False\n            x = simplejson.dumps(array_to_js)\n            error = 'Error'\n            return render_to_response('index.html',{'error':error},context_instance=RequestContext(request))\n    return render_to_response('index.html',context_instance=RequestContext(request))\n</code></pre>\n\n<p>I'm using simplejson to encode the Python list (so it will return a JSON array). I couldn't figure out the problem yet. But I think that I did something wrong about the 'echo'.</p>\n"},{"tags":["python","django","html2pdf","pisa"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":496,"score":3,"question_id":7289592,"title":"Pisa (XHTML -> PDF) in Django will not display images in PDF","body":"<p>To start, I've seen the other threads on this, and I have tried nearly everything to try to fix this but...</p>\n\n<p>When using Pisa to render an HTML page to PDF, the images in said HTML go conspicuously missing. That is to say, when the page is rendered to HTML, everything is just dandy, but when I switch the output to PDF using Pisa, the images disappear.</p>\n\n<p>The most common thing I've found to do is to create a link callback function thus:</p>\n\n<pre><code>def fetch_resources(uri, rel):\n    path = os.path.join(settings.MEDIA_ROOT, uri.replace(settings.MEDIA_URL, \"\"))\n    return path\n\ndef my_view(request, variable1):\n    html = render_to_string('template_goes_here.html', dict, context_instance=RequestContext(request))\n    result = StringIO()\n    pdf = pisa.pisaDocument(StringIO(html.encode(\"UTF-8\")), dest=result, link_callback=fetch_resources)\n    if not pdf.err:\n        return HttpResponse(result.getvalue(), mimetype='application/pdf')\n    return HttpResponse('Pisa hates you! %s' % cgi.escape(html))\n</code></pre>\n\n<p>However, this does not work. The PDF comes up, great, but the images are absent.</p>\n\n<p>I also read a suggestion on another thread about writing the HTML to mkstemp, converting it to a PDF via command line, and then outputing the HTML, no success there either.</p>\n\n<p>I even tried installing PIL 1.1.16 instead of 1.1.17 because of someone with a similar issue--no dice.</p>\n\n<p>Does anyone have an idea on where I'm going wrong here?</p>\n"},{"tags":["python","mysql","django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":12862910,"title":"Django syncdb craps out on Python 2.6 - to_stored_data()?","body":"<p>My app works great locally on Python 2.7.2, but trying to deploy it on a shared host with Python 2.6.8 results in the following message when calling <code>syncdb</code>:</p>\n\n<pre><code>TypeError: to_stored_data() takes exactly 3 non-keyword arguments (2 given)\n</code></pre>\n\n<p><a href=\"http://pastebin.com/rYXdDeZk\" rel=\"nofollow\">Full traceback</a></p>\n\n<p>I haven't managed to find mentions of to_stored_data() in Django's codebase, or in Nullege. I have another Django site running without problem on the same machine, in a separate virtualenv. Any idea what this can be?</p>\n"},{"tags":["django","sso","django-authentication","vbulletin"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":79,"score":1,"question_id":12370005,"title":"Django / vBulletin single sign on","body":"<p>What is the easiest way to make a single sign on (SSO) for a Django project and a vBulletin board on the same domain?</p>\n\n<p>I have an existing database of vBulletin users. I have looked into Django's <a href=\"https://docs.djangoproject.com/en/dev/howto/auth-remote-user/\" rel=\"nofollow\">RemoteUserBackend</a> and vBulletin's <a href=\"http://www.vbulletin.org/forum/showthread.php?t=270517\" rel=\"nofollow\">vBSSO</a> but I haven't found a complete solution.</p>\n"},{"tags":["django","django-forms","foreign-keys","modelform","django-modelform"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":12829085,"title":"Getting a foreign key into a form","body":"<p>I'm new to Django and Python, and have spent a couple days trying to solve this problem. I've tried several approaches in other threads here, but I think I'm missing some basic concept because none of them have worked for me. Here's what I'm trying to do:</p>\n\n<p>I'm using ModelForm, and I have created a form for adding records that includes a foreign key. I want this value to be set by default to match the record that was displayed on the page I linked from. [Code shown below edited to show suggested corrections].</p>\n\n<p>Here's the relevant code from views.py:</p>\n\n<pre><code>def add_sighting(request):\nunit = request.GET.get('unit')\nform = SightingForm(request.POST or None, initial={'unit':unit})\nif form.is_valid():\n    sighting = form.save(commit=False)\n    sighting.save()\n    return redirect(index)\nreturn render_to_response('trainapp/add_sighting_form.html',\n                          {'unit': unit, 'sighting_form': form},\n                          context_instance=RequestContext(request))\n</code></pre>\n\n<p>Here's the relevant code from add_sighting_form.html:</p>\n\n<pre><code>&lt;form action=\"/trainapp/add_sighting/\" method=\"post\"&gt;\n{% csrf_token %}\n&lt;table&gt;\n{{ sighting_form.as_table }}\n&lt;/table&gt;\n&lt;input type=\"submit\" value=\"Save\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Here's the relevant code from the template I linked from:</p>\n\n<pre><code>&lt;p&gt;&lt;a href=\"/trainapp/add_sighting/?unit={{ unit.id }}\"&gt;Add sighting&lt;/a&gt;&lt;/p&gt;\n</code></pre>\n"},{"tags":["python","django"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":64,"score":4,"question_id":12864616,"title":"Generating a url with the same GET parameters as the current page in a Django template","body":"<p>I have a certain link to a url in a Django template. I would like to grab all the GET parameters of the current page url and add them to the url of the template's link. The current page might have zero GET parameters.</p>\n"},{"tags":["python","django","sorl-thumbnail"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":12863534,"title":"sorl-thumbnail - resize only if image is bigger then given dimmension","body":"<p>How can I prevent sorl-thumbnail from scaling up images which are smaller than desired thumbnail?</p>\n\n<p>When scaling using {% thumbnail %} tag, the image is <em>always</em> scaled to desired dimmensions, while I want it to scale only images which are bigger than that.</p>\n"},{"tags":["python","django","django-forms"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":84,"score":1,"question_id":12843517,"title":"Django: Extending User Model - Inline User fields in UserProfile","body":"<p>Is there a way to display User fields under a form that adds/edits a UserProfile model? I am extending default Django User model like this:</p>\n\n<pre><code>class UserProfile(models.Model):\n    user = models.OneToOneField(User, unique=True)\n    about = models.TextField(blank=True)\n</code></pre>\n\n<p>I know that it is possible to make a:</p>\n\n<pre><code>class UserProfileInlineAdmin(admin.TabularInline):\n</code></pre>\n\n<p>and then inline this in User ModelAdmin but I want to achieve the opposite effect, something like inverse inlining, displaying the fields of the model pointed by the OneToOne Relationship (User) in the page of the model defining the relationship (UserProfile). I don't care if it would be in the admin or in a custom view/template. I just need to know how to achieve this. </p>\n\n<p>I've been struggling with ModelForms and Formsets, I know the answer is somewhere there, but my little experience in Django doesn't allow me to come up with the solution yet. A little example would be really helpful!</p>\n"},{"tags":["django","amazon-ec2"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":434,"score":2,"question_id":9865621,"title":"Connecting to EC2 Django development Server","body":"<p>I am new to EC2 and web development. Currently I have a Linux EC2 instance running, and have installed Django. I am creating a test project before I start on my real project and tried running a Django test server. </p>\n\n<p>This is my output in the shell:</p>\n\n<pre><code>python manage.py runserver ec2-###-##-##-##.compute-1.amazonaws.com:8000\nValidating models...\n\n0 errors found\nDjango version 1.3, using settings 'testsite.settings'\nDevelopment server is running at http://ec2-###-##-##-##.compute-1.amazonaws.com:8000/\nQuit the server with CONTROL-C.\n</code></pre>\n\n<p>To test that it is wroking I have tried visiting: <code>ec2-###-##-##-##.compute-1.amazonaws.com:8000</code> but I always get a \"Cannot connect\" message from my browser.</p>\n\n<p>Whenever I do this lcoally on my computer however I do successfully get to the DJango development home page at 127.0.0.1:8000. Could someone help me figure out what I am doing wrong / might be missing when I am doing this on my EC2 instance as opposed to my own laptop?</p>\n"},{"tags":["python","html","django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":44,"score":-1,"question_id":12863476,"title":"How to link a user input on html file to a python script in django","body":"<p>I have an HTML file that is designed to take user input, although it is still work in progress, but i have finished with the HTML coding and have successfully integrated it with django. But i need to link the submit link to a python script i have written, the script extracts the input submitted by the user and evaluates it using the codes in the python script. And i want the output to be returned to the HTML file and display the output there.\nI am counting on you guys to help me out. </p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":124,"score":0,"question_id":12863417,"title":"First time install Django on Mac OSX Mountain Lion","body":"<p>First time ever I'm installing Django (and using python). I run Mac OSX 10.8 Mountain Lion and by default, python is already installed:</p>\n\n<pre><code>$ python\nPython 2.7.2 (default, Jun 20 2012, 16:23:33) \n[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n</code></pre>\n\n<p>I've followed the steps at <a href=\"https://docs.djangoproject.com/en/1.4/intro/install/\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.4/intro/install/</a> namely:</p>\n\n<p>Download Django at <a href=\"https://www.djangoproject.com/download/\" rel=\"nofollow\">https://www.djangoproject.com/download/</a> and run the following:</p>\n\n<pre><code>$ tar xzvf Django-1.4.1.tar.gz\n$ cd Django-1.4.1\n$ sudo python setup.py install\n</code></pre>\n\n<p>This has created a symlink in <strong>/user/local/bin</strong> which allows me to invoke Django from anywhere with <code>$ django-admin.py</code></p>\n\n<p>However, trying the following fails:</p>\n\n<pre><code>$ python\nPython 2.7.2 (default, Jun 20 2012, 16:23:33) \n[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import django\n&gt;&gt;&gt; \n</code></pre>\n\n<p>I should be getting something after typing <code>&gt;&gt;&gt; import django</code></p>\n\n<pre><code>&gt;&gt;&gt; print django.get_version()\n1.4\n</code></pre>\n\n<p>Is it me missing something or the documentation not so accurate?</p>\n"},{"tags":["django","django-models","django-authentication"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12862254,"title":"Django - createsuperuser IntegrityError","body":"<p>when i try to create superuser from shell or via manage.py or from Django-Admin page ; it throws error like : </p>\n\n<pre><code>IntegrityError at /admin/auth/user/add/\nnull value in column \"link_karma\" violates not-null constraint\n</code></pre>\n\n<p>Here is my models.py [User Part]:</p>\n\n<pre><code>class User_Profile(models.Model):\n\n    user = models.OneToOneField(User)\n    link_karma = models.IntegerField()\n    comment_karma = models.IntegerField()\n    avatar = models.CharField(max_length=100)\n\n    def create_user_profile(sender,instance,created,**kwargs):\n        if created:\n            User_Profile.objects.create(user=instance)\n    post_save.connect(create_user_profile, sender=User)\n\n    def __unicode__(self):\n        return self.user.username\n</code></pre>\n\n<p>i added fallowing line in to settings.py:</p>\n\n<pre><code>AUTH_PROFILE_MODULE = 'accounts.User_Profile'\n</code></pre>\n\n<p>before add this line ;  it was the same.</p>\n\n<p><strong>Note</strong> : i tried to change type of link_karma field to CharField. it is same.</p>\n\n<p><strong>Note</strong> : If any additional data needed ; i can add it.</p>\n"},{"tags":["python","django"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":89,"score":2,"question_id":12856133,"title":"Django - How to pass a User object to a form in views.py","body":"<p>I am new to django, and have been tying to pass a User object to a ModelForm and then validate it. That is adding the User object as a ForeignKey to a Note object in the end, where the ModelForm is a Meta of the class Note.</p>\n\n<p>My forms.py:</p>\n\n<pre><code>  class NoteForm(ModelForm):\n     class Meta:\n        model = Note\n</code></pre>\n\n<p>My views.py:</p>\n\n<pre><code>  def addNote(request):\n     if request.method == 'POST':\n        user = User.objects.get(username=request.POST['user'])\n        model_form = NoteForm(request.POST, request.FILES, user)\n        if model_form.is_valid():\n           model_form.save()\n           return HttpResponseRedirect(reverse('index'))\n        return HttpResponse('De indtastede data er ikke gyldige')\n     return render(request, 'studies/uploadfile.html')\n</code></pre>\n\n<p>My template.html:</p>\n\n<pre><code>&lt;form enctype=\"multipart/form-data\" method=\"post\" action=\"/notes/add/\"&gt;\nNote Title: &lt;input type=\"text\" name=\"name\"  /&gt; &lt;br /&gt;\nSelect Note: &lt;input type=\"file\" name=\"note\" /&gt; &lt;br /&gt; \n&lt;input type=\"hidden\" name=\"user\" value=\"{{ user.id }}\"&gt;\n&lt;input type=\"submit\" value=\"submit\" /&gt;\n{% csrf_token %}\n&lt;/form&gt;\n</code></pre>\n\n<p>I have tried using the request.user, since im trying to get the current user logged on and adding that user as the ForreignKey.\nAny help will be appreciated, beforehand thanks.</p>\n"},{"tags":["django","static","virtualenv"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":12862228,"title":"staticfiles and STATIC_URL with virrtualenv - django","body":"<p>I'm using virtualenv and I can't get staticfiles to work on my django, </p>\n\n<pre><code># URL prefix for static files.\n# Example: \"http://media.lawrence.com/static/\"\nSTATIC_URL = '/static/'\n\n# Additional locations of static files\nSTATICFILES_DIRS = (\n    # Put strings here, like \"/home/html/static\" or \"C:/www/django/static\".\n    # Always use forward slashes, even on Windows.\n    # Don't forget to use absolute paths, not relative paths.\n    '/home/brian/Projects/RaffleFish/static',\n\n)\n</code></pre>\n\n<p>My virtualenv directory is virt_env/virtFish</p>\n\n<p>How do I get my staticfiles to work? do I add the directory structure of virtenv</p>\n"},{"tags":["django","django-registration"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":265,"score":1,"question_id":8742878,"title":"Django SelectDateWidget not saving date","body":"<p>I am using the SelectDateWidget with django-registration to save a Birth Date at registration. I have tried excluding the birthday and the a profile is created and saved with the extra data. I am not quite sure where everything is going wrong.</p>\n\n<p>models.py</p>\n\n<pre><code>class Profile(models.Model):\n    ...\n    dob = models.DateField(_('birthday'))\n</code></pre>\n\n<p>forms.py</p>\n\n<pre><code>from django.forms.extras.widgets import SelectDateWidget\n\nclass ProfileRegistration(RegistrationFormTermsOfService):\n    ...\n    dob = forms.DateField(widget=SelectDateWidget(years=range(1999,1939,-1)),\n                          label=_(\"Birthday\"),\n                          )\n</code></pre>\n\n<p>prifilebackend.py</p>\n\n<pre><code>from registration.forms import RegistrationForm\nfrom registration.models import RegistrationProfile\n\n    ...\n    class Backend(default.DefaultBackend):\n        ...\n        p = Profile.objects.get(user=new_user)\n        p.dob=kwargs['dob']\n        p.save()\n</code></pre>\n\n<p>The error I am getting when registering the user is: profile_profile.dob may not be NULL</p>\n\n<p>The post data is generating dob_day, dob_month and dob_year. i have tried to clean the data but to no avail. Any assistance would be greatly appreciated.</p>\n\n<p><strong>Solved:</strong></p>\n\n<p>profilebackend.py</p>\n\n<pre><code>signals.user_registered.send(sender=self.__class__,\n                                     user=new_user,\n                                     request=request)\n\n        u = User.objects.get(username=new_user.username)\n        u.first_name = kwargs['first_name']\n        u.last_name = kwargs['last_name']\n\n        gender = kwargs['gender']\n        dob = kwargs['dob']\n\n        p = Profile(user = new_user, gender = gender, dob = dob)\n        p.save()\n        u.save()\n</code></pre>\n"},{"tags":["django","caching","django-templates"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":315,"score":3,"question_id":4241343,"title":"Django - expire django template cache based on variables","body":"<p>Its not to hard to invalidate a particular template cache in django</p>\n\n<pre><code>def invalidate_cache_key(fragment_name, *variables):\n   args = md5_constructor(u':'.join([urlquote(var) for var in variables]))\n   cache_key = 'template.cache.%s.%s' % (fragment_name, args.hexdigest())\n   cache.delete(cache_key)\n</code></pre>\n\n<p>However I have a situation where I need to delete all cached fragments that have had a certain variable passed to them. For example, delete all cached fragments about the car brand 'Toyota'. </p>\n\n<pre><code>{% cache 100000 car_content car.brand %}\n</code></pre>\n\n<p>Essentially is there a way to get all cache_keys based on a certain set of criteria? I have thought dangerously about changing the cache source but I was wondering if there might be a better solution to this problem.</p>\n"},{"tags":["python","django","heroku","gunicorn"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":1585,"score":1,"question_id":10527512,"title":"Configuring gunicorn for Django on Heroku","body":"<p>I'm trying to setup a test Django project on Heroku.  Following the advice <a href=\"http://blog.abhiomkar.in/2011/09/17/deploying-django-on-heroku-mac-os-x/\" rel=\"nofollow\">here</a> and in the <a href=\"https://devcenter.heroku.com/articles/python#declare_process_types_with_foremanprocfile\" rel=\"nofollow\">Heroku Getting Started</a> I'm trying to use <code>gunicorn</code> instead of the Django dev server.</p>\n\n<p>This was my first attempt at the Procfile:</p>\n\n<pre><code>web: gunicorn_django --workers=4 --bind=0.0.0.0:$PORT my_project/settings.py\nworker: python my_project/manage.py celeryd -E -B --loglevel=INFO\n</code></pre>\n\n<p>This gave me this error:</p>\n\n<pre><code>ImportError: Could not import settings 'settings.py' (Is it on sys.path?): No module named py\n</code></pre>\n\n<p>I decided to take a different track and followed the advice <a href=\"http://v3.mike.tig.as/blog/2012/02/13/deploying-django-on-heroku/\" rel=\"nofollow\">here</a>.  Now my Procfile looked like this:</p>\n\n<pre><code>web: gunicorn_django -b 0.0.0.0:\\$PORT -w 9 -k gevent --max-requests 250 --preload my_project.settings\n</code></pre>\n\n<p>(I also updated my requirements file to include gevent.)  It gave me the same error:</p>\n\n<pre><code>ImportError: Could not import settings\n</code></pre>\n\n<p>Finally, I just set it to <code>settings</code>:</p>\n\n<pre><code>web: gunicorn_django -b 0.0.0.0:\\$PORT -w 9 -k gevent --max-requests 250 --preload settings\n</code></pre>\n\n<p>But now I get this error:</p>\n\n<pre><code>Error: django project not found\n</code></pre>\n\n<p>The way my Django project is set up is that the <code>settings.py</code> file is in the parent directory of the repo -- I don't have the Django project under another directory.  It's at the same level as the virtualenv and git files.  Would that be a problem? I'm sure I'm doing something simple wrong -- any help would be much appreciated.</p>\n\n<hr>\n\n<p>If I follow the instructions from Heroku <a href=\"https://devcenter.heroku.com/articles/django\" rel=\"nofollow\">here</a> and change the Procfile to this:</p>\n\n<pre><code>web: gunicorn hellodjango.wsgi -b 0.0.0.0:$PORT\n</code></pre>\n\n<p>Nothing happens -- no errors in the logs, but no proceses run and the app just appears dead in the water.</p>\n"},{"tags":["django","url","media"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12861720,"title":"referencing to MEDIA_ROOT without hardcoding local directory","body":"<p>How do I change MEDIA_ROOT so its not a hardcoded directory value?</p>\n\n<p>settings.py</p>\n\n<pre><code>    MEDIA_URL = '/media/'\n    MEDIA_ROOT = '/Users/blah/djangoproj/abc/abc/media/static/'\n</code></pre>\n\n<p>.py file</p>\n\n<pre><code>from django.conf import settings\nprint settings.MEDIA_ROOT\n</code></pre>\n\n<p>urls.py</p>\n\n<pre><code>from django.utils.translation import ugettext_lazy as _\nfrom django.conf.urls.defaults import *\nfrom django.conf import settings\n\nurls = (...\n(r'^%s(?P&lt;path&gt;.*)$'%settings.MEDIA_URL, 'django.views.static.serve', {\n        'document_root': settings.MEDIA_ROOT,\n    })\n</code></pre>\n"},{"tags":["sql","django","join"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":391,"score":3,"question_id":3808065,"title":"Django LEFT OUTER JOIN on TWO columns where one isn't a foreign key","body":"<p>I have two models like so:</p>\n\n<pre><code>class ObjectLock(models.Model):\n    partner = models.ForeignKey(Partner)\n    object_id = models.CharField(max_length=100)\n\n    class Meta:\n        unique_together = (('partner', 'object_id'),)\n\nclass ObjectImportQueue(models.Model):\n    partner = models.ForeignKey(Partner)\n    object_id = models.CharField(max_length=100)\n    ... # other fields\n    created = models.DateTimeField(auto_now_add = True)\n    modified = models.DateTimeField(auto_now = True, db_index=True)\n\n    class Meta:\n        ordering = ('modified', 'created')\n</code></pre>\n\n<p>There is nothing notable about the third model mentioned above (Partner).</p>\n\n<p>I'd like to get something like:</p>\n\n<pre><code>SELECT * FROM ObjectImportQueue q LEFT OUTER JOIN ObjectLock l ON\nq.partner_id=l.partner_id AND q.object_id=l.object_id WHERE l.object_id\nIS NULL and l.partner_id IS NULL;\n</code></pre>\n\n<p>I came across <a href=\"http://www.caktusgroup.com/blog/2009/09/28/custom-joins-with-djangos-queryjoin/\" rel=\"nofollow\">this page</a> that tells how to do custom joins, and I tried passing in a tuple of the column names to join in place of the column name to join, and that didn't work. The Partner table shouldn't need to be included in the resulting sql query but I will accept an answer that does include it as long as it effectively does what I'm trying to do with one query.</p>\n"},{"tags":["django"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1225,"score":1,"question_id":4616787,"title":"Django: making a custom PK auto-increment?","body":"<p>I've been using <a href=\"http://www.djangoproject.com/documentation/models/custom_pk/\" rel=\"nofollow\">custom primary keys</a> for a model in Django. (This was because I was importing values into the database and they already had ID's attached, and it made sense to preserve the existing values.)</p>\n\n<pre><code>class Transaction(models.Model):\n    id = models.IntegerField(primary_key=True)\n    transaction_type = models.IntegerField(choices=TRANSACTION_TYPES)\n    date_added = models.DateTimeField(auto_now_add=True)\n</code></pre>\n\n<p>However, now I want to add new instances of the model to the database, and I'd like to autogenerate a unique primary key. But if I don't specify the ID at the time of creating the instance, I get an error:</p>\n\n<pre><code>t = Transaction(transaction_type=0)\nt.save()\n</code></pre>\n\n<p>gives: </p>\n\n<pre><code>IntegrityError at /page\n(1048, \"Column 'id' cannot be null\")\n</code></pre>\n\n<p>How can I autogenerate a unique ID to specify for new values, without having to alter the way I import the existing values?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I've written this custom method, which seems to work... </p>\n\n<pre><code>class Transaction(models.Model):\n    def save(self, *args, **kwargs):\n        if not self.id:\n            i = Transaction.objects.all().order_by('-id')[0]\n            self.id = i.id+1\n        super(Transaction, self).save(*args, **kwargs) \n</code></pre>\n"},{"tags":["django","filter","django-templates"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12854681,"title":"What django template filter to use for embedding css in a style tag","body":"<p>I have a template where I need to embed some CSS from a model within a style tag, like this:</p>\n\n<pre><code>&lt;style&gt;{{m.get_css_text}}&lt;/style&gt;\n</code></pre>\n\n<p>(in case it matters, m is actually a for-in var)</p>\n\n<p>This works without a problem except for one glitch which only happens in IE. I have a rule in the CSS includes a filter rule, which uses quotes, like this -</p>\n\n<pre><code>filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=\"#ffffff\", endColorstr=\"#f5f5f5\") !important;\n</code></pre>\n\n<p>The default escaping behavior of django escapes the quotes, and this breaks the CSS rule, which mucks up the CSS in IE, where the rule applies.</p>\n\n<p>Using the |safe filter solves this problem, of course, but I would rather not use it. For now the model holding the CSS is only editable by my staff, but in the future this could be created by our users.</p>\n\n<p>My question is this - what filter(s) should I use to prevent escaping of quotes etc. but to keep the tag safe? My only idea so far is to use the removetags filter, but I'm not sure it's the best idea.</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","django","dictionary","django-templates","django-template-tags"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12860022,"title":"How to access multidimensional dictionary on Django template","body":"<p>I am trying to access a multidimensional dictionary in a Django template. I am able to view first level keys, but since second level keys I cannot see anything. In example dictionary is composed in this way:</p>\n\n<pre><code>dictionary = {}\ndictionary[first_level] = {}\ndictionary[first_level][second_level] = {}\n...\n\nand so on\n</code></pre>\n\n<p>From Django template I use:</p>\n\n<pre><code>{% for flk in dict %}\n    &lt;!-- Using nested for from the following, no output is shown --&gt;\n    {% for slk in dict.flk %}\n        &lt;th&gt;First level key : {{ flk }} Second level key : {{ slk }}&lt;/th&gt;\n    {% endfor %}\n    &lt;!-- --&gt;\n{% endfor %}\n</code></pre>\n\n<p>Have I to use a model or can I do it using this dictionary?</p>\n\n<p>Thanks</p>\n"},{"tags":["python","django","django-models","django-admin"],"answer_count":3,"favorite_count":7,"up_vote_count":28,"down_vote_count":0,"view_count":16798,"score":28,"question_id":755857,"title":"Default value for field in Django model","body":"<p>Suppose I have a model:</p>\n\n<pre><code>class SomeModel(models.Model):\n    id = models.AutoField(primary_key=True)\n    a = models.CharField(max_length=10)\n    b = models.CharField(max_length=7)\n</code></pre>\n\n<p>Currently I am using the default admin to create/edit objects of this type.\nHow do I remove the field <strong><code>b</code></strong> from the admin so that each object <em>cannot</em> be created with a value, and rather will receive a default value of <code>0000000</code>?</p>\n"},{"tags":["django"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":12819395,"title":"How to make my css files to work in django","body":"<p>I am new to django but have some relative skills in python. I just started building a project in django and so far I have been able to create an app within my project. Also, I have been able to link the index.html file of my website to django and can successfully view it after running the server on the command prompt. But here are my questions;</p>\n\n<ol>\n<li>How do i make the css, img &amp; js files to work with my index.html?</li>\n</ol>\n\n<p>Thanks to you guys for the responses so far, but still the index.html page loads on the localhost address but it doesn't apply the img,css and js scripts. It only loads the html. Although i have tried to use the method stated by the 2nd person that responded to my post but still no luck.</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":12859744,"title":"Define a create function in django","body":"<p>I'm trying to create an \"administration\" page where users can create a \"match\", giving it a name, and display a list of the matches I created to an other page. I also would like to have a \"delete\" button to delete a match.</p>\n\n<p>I have this model:</p>\n\n<pre><code>class Match(models.Model):\n    teams = models.ManyToManyField(Teams)\n    identite = models.CharField(max_length=60)\n    teamA = models.CharField(max_length=20)\n    teamB = models.CharField(max_length=20)\n    info = models.CharField(max_length=500)\n    sport = models.CharField(max_length=20)\n    date_start = models.DateTimeField()\n    date_end = models.DateTimeField()\n\n    def __unicode__(self):\n        return self.identite\n</code></pre>\n\n<p>I created this function inside the model:</p>\n\n<pre><code>def create_match(self,name):\n    return self.create('name')\n</code></pre>\n\n<p>Then, I try to create a form in the html of my administration page:</p>\n\n<pre><code> &lt;form method=\"post\" action=\".\"&gt;\n {% csrf_token %}\n &lt;p&gt;&lt;label for=\"Team A\"&gt;Team A:&lt;/label&gt; &lt;input id=\"Team A\" type=\"text\" class=\"required\"   name=\"Team A\" maxlength=\"30\"&gt;&lt;/p&gt;\n &lt;p&gt;&lt;label for=\"Team B\"&gt;Team B:&lt;/label&gt; &lt;input id=\"Team B\" type=\"text\" class=\"required\" name=\"Team B\" maxlength=\"30\"&gt;&lt;/p&gt;\n  (...)\n &lt;input type=\"submit\" value=\"\" /&gt;\n &lt;/form&gt;\n</code></pre>\n\n<p>So my questions are:</p>\n\n<p>How can I call my function \"create_match\" so that when I click the submit button it creates a match in my DB with the data I filled in?\nHow can I add this match to a list so that I can display this list to an other page?\nFinally, how can I delete the match from this list without deleting it from the DB?</p>\n\n<p>Thank you very much for your help!</p>\n"},{"tags":["django","django-sites"],"answer_count":3,"favorite_count":5,"up_vote_count":10,"down_vote_count":0,"view_count":958,"score":10,"question_id":1404131,"title":"How to get unique users across multiple Django sites powered by the \"sites\" framework?","body":"<p>I am building a Django site framework which will power several independent sites, all using the same apps but with their own templates. I plan to accomplish this by using multiple settings-files and setting a unique SITE_ID for them, like suggested in the Django docs for the <a href=\"http://docs.djangoproject.com/en/dev/ref/contrib/sites/\" rel=\"nofollow\">django.contrib.sites framework</a> </p>\n\n<p>However, I don't want a user from site A to be able to login on site B. After inspecting the user table created by syncdb, I can see no column which might restrict a user to a specific site. I have also tried to create a user, 'bob', on one site and then using the shell command to list all users on the other side and sure enough, bob shows up there. </p>\n\n<p>How can I ensure all users are restricted to their respective sites?</p>\n"},{"tags":["python","django","caching","redirect","httprequest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":12840981,"title":"Cache.clean() does NOT work","body":"<p>After debugging for many hours, I just give up and ask for your help. Original app isn't as simple as my example, but the problem is the same: problems w/ cache reloading. Original app caches the view and provides another view which should change contents in database and reload cache. I have created demo app which shows that <code>cache.clean()</code> does NOT work. Cache is cleaned only when contents in database are expired. Why is that so?</p>\n\n<p><a href=\"https://github.com/daGrevis/-DEMO--Cache.clean---does-NOT-work\" rel=\"nofollow\">Demo can be found here.</a></p>\n"},{"tags":["javascript","django","templates","backbone.js","underscore.js"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12857461,"title":"Underscore / Backbone templating with Django","body":"<p>when defining my javascript templates within </p>\n\n<pre><code>&lt;script type=\"text/template\"&gt;\n&lt;/script&gt;\n</code></pre>\n\n<p>they don't get rendered in html (i don't see them in the page, I mean) in my Django application. Maybe one of the filters / middlewares I've declared is opting them out?</p>\n\n<p>This is from <code>settings.py</code></p>\n\n<pre><code>COMPRESS_PRECOMPILERS = (\n    ('text/less', 'lessc {infile} {outfile}'),\n)\nif DEBUG:\n    COMPRESS_REBUILD_TIMEOUT = 1\n\nTEMPLATE_CONTEXT_PROCESSORS = (\n     \"django.core.context_processors.request\",\n     \"django.contrib.auth.context_processors.auth\",\n     \"django.core.context_processors.debug\",\n     \"django.core.context_processors.i18n\",\n     \"django.core.context_processors.media\",\n     \"django.core.context_processors.static\",\n     \"django.core.context_processors.tz\",\n     \"django.contrib.messages.context_processors.messages\",\n)\n\n\nMIDDLEWARE_CLASSES = (\n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.middleware.transaction.TransactionMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'debug_toolbar.middleware.DebugToolbarMiddleware',\n    # Uncomment the next line for simple clickjacking protection:\n    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',\n)\n</code></pre>\n\n<p>If so, how to solve this?</p>\n\n<p><strong>EDIT</strong>\nThe template:</p>\n\n<pre><code>&lt;script type=\"text/template\" id=\"new-catalog-template\"&gt;\n\n    &lt;div class=\"catalog\" data-id=\"&lt;%= responseJSON.catalog.id %&gt;\" style=\"display: none\"&gt;\n        &lt;div class=\"catalog-main-content\"&gt;\n            &lt;div class=\"preview\"&gt;&lt;img src=\"&lt;%= responseJSON.user_dir %&gt;/catalogs/&lt;%= responseJSON.catalog.id %&gt;/ipad-preview-icon-large.png\" alt=\"\" /&gt;&lt;/div&gt;\n            &lt;div class=\"name\"&gt;&lt;%= responseJSON.catalog.name %&gt;&lt;/div&gt;\n            &lt;div class=\"last-build\"&gt;&lt;em&gt;Last build:&lt;/em&gt;&lt;%= responseJSON.catalog.last_build_natural %&gt; (&lt;%= responseJSON.catalog.last_build %&gt;)&lt;/div&gt;\n            &lt;div class=\"description\"&gt;&lt;%= responseJSON.catalog.description %&gt;&lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n&lt;/script&gt;\n</code></pre>\n\n<p>** EDIT EDIT **</p>\n\n<p>My bad, the script tag was outside the main block and hence not rendered ¬_¬ ... Thanks for letting me know about <code>{{ verbatim }}</code>, by the way</p>\n"},{"tags":["django","generics","seo","views"],"answer_count":2,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":569,"score":3,"question_id":6456586,"title":"Redirect from Generic View DetailView in Django","body":"<p>I'm using Django's class based DetailView generic view to look up an object for display.  Under certain circumstances, rather than displaying the object, I wish to back out and issue a HTTP rediect instead.  I can't see how I go about doing this.  It's for when a user hits an object in my app, but without using the canonical URL.  So, for example, on StackOverflow URLs take the form:</p>\n\n<pre><code>http://stackoverflow.com/&lt;content_type&gt;/&lt;pk&gt;/&lt;seo_friendly_slug&gt;\n</code></pre>\n\n<p>eg:</p>\n\n<pre><code>http://stackoverflow.com/questions/5661806/django-debug-toolbar-with-django-cms-and-django-1-3\n</code></pre>\n\n<p>You can actually type anything as the seo_friendly_slug part and it will redirect you to the correct canonical URL for the object looked up via the PK.</p>\n\n<p>I wish to do the same in my DetailView.  Retrieve the object, check that it's the canonical URL, and if not redirect to the item's get_absolute_url URL.</p>\n\n<p>I can't return an HttpResponseRedirect in get_object, as it's expecting the looked up object.  I can't seem to return it from get_context_data, as it's just expecting context data.</p>\n\n<p>Maybe I just need to write a manual view, but I wondered if anyone knew if it was possible?</p>\n\n<p>Thanks!</p>\n\n<p>Ludo.</p>\n"},{"tags":["python","django","apache","mod-wsgi"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":12848669,"title":"404 not found with mod_wsgi after set different root path","body":"<p>I want to load my Django application under different path (exactly, <code>/beta</code>), not <code>/</code>. After setting a different root path in <code>httpd</code> configuration, I get 404 not found error in all pages. </p>\n\n<p>First <code>httpd</code>:</p>\n\n<pre><code>WSGIScriptAlias / /home/mydomain.biz/public_html/_beta/magnet/django.wsgi\n</code></pre>\n\n<p>and then I just changed the <code>/</code> to <code>/beta</code>:</p>\n\n<pre><code>WSGIScriptAlias /beta /home/mydomain.biz/public_html/_beta/magnet/django.wsgi\n</code></pre>\n\n<p>It seems something went wrong with my application setting but I don't now why.</p>\n"},{"tags":["django","api","tastypie"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":2763,"score":3,"question_id":9127107,"title":"tastypie posting and full example","body":"<p>Is there a full tastypie django example site and setup available for download? I have been wrestling with wrapping my head around it all day. I have the following code. Basically, I have a POST form that is handled with ajax. When I click \"submit\" on my form and the ajax request runs, the call returns \"POST <a href=\"http://192.168.1.110:8000/api/private/client_basic_info/\" rel=\"nofollow\">http://192.168.1.110:8000/api/private/client_basic_info/</a> 404 (NOT FOUND)\" I have the URL configured alright, I think. I can access <a href=\"http://192.168.1.110:8000/api/private/client_basic_info/?format=json\" rel=\"nofollow\">http://192.168.1.110:8000/api/private/client_basic_info/?format=json</a> just fine. Am I missing some settings or making some fundamental errors in my methods? My intent is that each user can fill out/modify one and only one \"client basic information\" form/model.</p>\n\n<p>a page:</p>\n\n<pre><code>{% extends \"layout-column-100.html\" %}\n{% load uni_form_tags sekizai_tags %}\n\n{% block title %}Basic Information{% endblock %}\n\n{% block main_content %}\n\n    {% addtoblock \"js\" %}\n        &lt;script language=\"JavaScript\"&gt;\n\n        $(document).ready( function() {\n\n            $('#client_basic_info_form').submit(function (e) {\n\n                form = $(this)\n\n                form.find('span.error-message, span.success-message').remove()\n                form.find('.invalid').removeClass('invalid')\n                form.find('input[type=\"submit\"]').attr('disabled', 'disabled')\n\n                e.preventDefault();\n                var values = {}\n\n                $.each($(this).serializeArray(), function(i, field) {\n                    values[field.name] = field.value;\n                })\n\n\n                $.ajax({\n                    type: 'POST',\n                    contentType: 'application/json',\n                    data: JSON.stringify(values),\n                    dataType: 'json',\n                    processData: false,\n                    url: '/api/private/client_basic_info/',\n                    success: function(data, status, jqXHR) {\n                        form.find('input[type=\"submit\"]')\n                            .after('&lt;span class=\"success-message\"&gt;Saved successfully!&lt;/span&gt;')\n                            .removeAttr('disabled')\n                    },\n                    error: function(jqXHR, textStatus, errorThrown) {\n\n                        console.log(jqXHR)\n                        console.log(textStatus)\n                        console.log(errorThrown)\n\n                        var errors = JSON.parse(jqXHR.responseText)\n                        for (field in errors) {\n                            var field_error = errors[field][0]\n                            $('#id_' + field).addClass('invalid')\n                                .after('&lt;span class=\"error-message\"&gt;'+ field_error +'&lt;/span&gt;')\n                        } \n                        form.find('input[type=\"submit\"]').removeAttr('disabled')\n                    }\n                }) // end $.ajax()\n\n            }) // end $('#client_basic_info_form').submit()\n\n        }) // end $(document).ready()\n\n        &lt;/script&gt;\n    {% endaddtoblock %}\n\n\n{% uni_form form form.helper %}\n\n\n{% endblock %}\n</code></pre>\n\n<p>resources</p>\n\n<pre><code>from residence.models import ClientBasicInfo\nfrom residence.forms.profiler import ClientBasicInfoForm\n\nfrom tastypie import fields\nfrom tastypie.resources import ModelResource\nfrom tastypie.authentication import BasicAuthentication\nfrom tastypie.authorization import DjangoAuthorization, Authorization\nfrom tastypie.validation import FormValidation\nfrom tastypie.resources import ModelResource, ALL, ALL_WITH_RELATIONS\nfrom django.core.urlresolvers import reverse\nfrom django.contrib.auth.models import User\n\nclass UserResource(ModelResource):\n\n    class Meta:\n        queryset = User.objects.all()\n        resource_name = 'user'\n        fields = ['username']\n        filtering = {\n            'username': ALL,\n        }\n        include_resource_uri = False\n        authentication = BasicAuthentication()\n        authorization = DjangoAuthorization()\n\n    def dehydrate(self, bundle):\n        forms_incomplete = []\n\n        if ClientBasicInfo.objects.filter(user=bundle.request.user).count() &lt; 1:\n            forms_incomplete.append({'name': 'Basic Information', 'url': reverse('client_basic_info')})\n\n        bundle.data['forms_incomplete'] = forms_incomplete\n        return bundle\n\n\nclass ClientBasicInfoResource(ModelResource):\n    user = fields.ForeignKey(UserResource, 'user')\n\n\n    class Meta:\n        authentication = BasicAuthentication()\n        authorization = DjangoAuthorization()\n        include_resource_uri = False\n        queryset = ClientBasicInfo.objects.all()\n        resource_name = 'client_basic_info'\n        validation = FormValidation(form_class=ClientBasicInfoForm)\n        list_allowed_methods = ['get', 'post', ]\n        detail_allowed_methods = ['get', 'post', 'put', 'delete']\n</code></pre>\n\n<p>Edit:</p>\n\n<p>My resources file is now:</p>\n\n<pre><code>from residence.models import ClientBasicInfo\nfrom residence.forms.profiler import ClientBasicInfoForm\n\nfrom tastypie import fields\nfrom tastypie.resources import ModelResource\nfrom tastypie.authentication import BasicAuthentication\nfrom tastypie.authorization import DjangoAuthorization, Authorization\nfrom tastypie.validation import FormValidation\nfrom tastypie.resources import ModelResource, ALL, ALL_WITH_RELATIONS\nfrom django.core.urlresolvers import reverse\nfrom django.contrib.auth.models import User\n\nclass UserResource(ModelResource):\n\n    class Meta:\n        queryset = User.objects.all()\n        resource_name = 'user'\n        fields = ['username']\n        filtering = {\n            'username': ALL,\n        }\n        include_resource_uri = False\n        authentication = BasicAuthentication()\n        authorization = DjangoAuthorization()\n\n    #def apply_authorization_limits(self, request, object_list):\n    #    return object_list.filter(username=request.user)\n\n    def dehydrate(self, bundle):\n        forms_incomplete = []\n\n        if ClientBasicInfo.objects.filter(user=bundle.request.user).count() &lt; 1:\n            forms_incomplete.append({'name': 'Basic Information', 'url': reverse('client_basic_info')})\n\n        bundle.data['forms_incomplete'] = forms_incomplete\n        return bundle\n\n\nclass ClientBasicInfoResource(ModelResource):\n    # user = fields.ForeignKey(UserResource, 'user')\n\n    class Meta:\n        authentication = BasicAuthentication()\n        authorization = DjangoAuthorization()\n        include_resource_uri = False\n        queryset = ClientBasicInfo.objects.all()\n        resource_name = 'client_basic_info'\n        validation = FormValidation(form_class=ClientBasicInfoForm)\n        #list_allowed_methods = ['get', 'post', ]\n        #detail_allowed_methods = ['get', 'post', 'put', 'delete']\n\n    def apply_authorization_limits(self, request, object_list):\n        return object_list.filter(user=request.user)\n</code></pre>\n\n<p>I made the user field of the ClientBasicInfo nullable and the POST seems to work. I want to try updating the entry now. Would that just be appending the pk to the ajax url? For example /api/private/client_basic_info/21/? When I submit that form I get a 501 NOT IMPLEMENTED message. What exactly haven't I implemented? I am subclassing ModelResource, which should have all the ORM-related functions implemented according to the docs.</p>\n"},{"tags":["django","django-templates","django-views"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12855368,"title":"Render a block through a template that will be added to an existing page as well as it's own","body":"<p>I have a page which is for album/picture management with 2 sections: Albums and Pictures.</p>\n\n<p>When an album is selected the pictures block needs to change via AJAX to reflect the album selected.</p>\n\n<p>This means the rendered pictures block needs to be provided to the Albums page as well as be available as it's own View for the AJAX source.</p>\n\n<p>I understand I could solve this by making the pictures block always render from AJAX even when the album page loads, however I would like to deliver the default album pictures within the initial page load if possible. In order to do that, I'd like to render the pictures block via the same template in the Album page view as is used for the Picture AJAX View.</p>\n\n<p>I'm only familiar with providing templates as a template_name property within an TemplateView object. </p>\n\n<p>I guess I could simply call an instance of PictureView using inclusion_tag, and pull the data I need out of the render_to_response (I haven't tried this yet, I'm just theorizing) however that seems a bit dirty to me. I'm wondering if there's a more elegant solution to this problem?</p>\n\n<p>Thanks!</p>\n"},{"tags":["django","django-multilingual"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":12856599,"title":"Issues with django-admin.py makemessages -l en","body":"<p>I want to use <strong>multiple languages</strong> in my app</p>\n\n<p>I do not want a locale file for english inside LOCALE folder but by mistake i have create this using this </p>\n\n<p><code>django-admin.py makemessages -l en</code></p>\n\n<p>so Please tell me how can I remove this 'en' folder which I have creates.\nBecause now if i try to create language folder for another language using this <code>django-admin.py makemessages -l es</code> it does not create.</p>\n\n<p>WHY SO???</p>\n"},{"tags":["django","amazon-ec2","memcached"],"answer_count":3,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":907,"score":7,"question_id":6869198,"title":"How can I prevent RuntimeError(\"Unable to create a new session key.\")?","body":"<p>A client's Django application is intermittently (about twice a day) throwing <code>RuntimeError(\"Unable to create a new session key.\")</code>:</p>\n\n<pre><code>    Traceback (most recent call last):\n  File \"/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py\", line 111, in get_response\n    response = callback(request, *callback_args, **callback_kwargs)\n  File \"/usr/local/lib/python2.6/dist-packages/django/contrib/admin/views/decorators.py\", line 17, in _checklogin\n    if request.user.is_active and request.user.is_staff:\n  File \"/usr/local/lib/python2.6/dist-packages/django/contrib/auth/middleware.py\", line 9, in __get__\n    request._cached_user = get_user(request)\n  File \"/usr/local/lib/python2.6/dist-packages/django/contrib/auth/__init__.py\", line 107, in get_user\n    user_id = request.session[SESSION_KEY]\n  File \"/usr/local/lib/python2.6/dist-packages/django/contrib/sessions/backends/base.py\", line 47, in __getitem__\n    return self._session[key]\n  File \"/usr/local/lib/python2.6/dist-packages/django/contrib/sessions/backends/base.py\", line 195, in _get_session\n    self._session_cache = self.load()\n  File \"/usr/local/lib/python2.6/dist-packages/django/contrib/sessions/backends/cache.py\", line 16, in load\n    self.create()\n  File \"/usr/local/lib/python2.6/dist-packages/django/contrib/sessions/backends/cache.py\", line 33, in create\n    raise RuntimeError(\"Unable to create a new session key.\")\nRuntimeError: Unable to create a new session key.\n</code></pre>\n\n<p>As you can see from the traceback, this happens deep in the bowels of <code>django.contrib.sessions</code> when using the cache session backend with the memcached cache backend.</p>\n\n<p>A Django trac ticket (<a href=\"https://code.djangoproject.com/ticket/14093\">https://code.djangoproject.com/ticket/14093</a>) suggests changing the session key hash from MD5 to UUID4, but that's no help -- the problem is the network. I've observed (with tcpdump) that this exception can occur when the TCP connection from app server to memcache server times out due to packet loss.</p>\n\n<p>We have two app servers and one memcached (1.4.2) server, all running in Amazon EC2. During periods of high demand, I've observed one app server exchanging 75,000 packets/second with the memcache server. During this period of high demand, I observed one SYN packet for a new memcache connection get lost, resulting in a python-memcache connection timeout (before the kernel even had a change to retransmit) and a <code>RuntimeError</code>.</p>\n\n<p>I'm at a loss for how to solve this. I'd like to tune Linux's TCP retransmit timer lower than three seconds, but it's not tunable. Failing that, I'd like to have python-memcache retry a connection a couple times before giving up, but it won't. I see that pylibmc has configurable connect and retry behavior, but I haven't been able to find a combination of options that works around the packet loss.</p>\n\n<p>Ideas?</p>\n"},{"tags":["django","audit"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12855679,"title":"Django AuditTrail Update","body":"<p>I want to audit one of my models with <a href=\"https://code.djangoproject.com/wiki/AuditTrail\" rel=\"nofollow\">AuditTrail</a>. But in some places of project I have such code :</p>\n\n<pre><code>q = Transaction.objects.filter(id = self.id).update(summa = self.summa)\n</code></pre>\n\n<p>Will Audit trail work whith this code or it works only on <code>model.save()</code>?</p>\n"},{"tags":["django","qooxdoo"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":801,"score":4,"question_id":2605398,"title":"Is it possible to use Django with Qooxdoo framework?","body":"<p>Guys i would like to use Django as my backend framework and qooxdoo as the frontend framework. </p>\n\n<p>Is it practical to do this? </p>\n\n<p>Has anyone tried to do this?</p>\n\n<p>How did they do it?</p>\n\n<p>Links and pointers would nice.</p>\n\n<p>Gath</p>\n"},{"tags":["python","django","nginx","twisted"],"answer_count":2,"favorite_count":3,"up_vote_count":36,"down_vote_count":0,"view_count":1122,"score":36,"question_id":10260828,"title":"Twisted server crashes unexpectedly while running django","body":"<p>I am running a django application on twisted using the django-on-twisted scripts from <a href=\"http://code.google.com/p/django-on-twisted/\">this site</a>.</p>\n\n<p>All requests are served by an nginx server which reverse proxies relevant requests to twisted. I have a url setup for an API, which basically just receives get requests and does some processing on the get parameters before sending a response. However, when a specific client is hitting the api, the twisted server just shuts down. Pasted below is the Nginx log:</p>\n\n<pre><code>the.ip.of.client - - [21/Apr/2012:11:30:36 -0400] \"GET /api/url/?get=params&amp;more=params HTTP/1.1\" 499 0 \"-\" \"Java/1.6.0_24\"\n</code></pre>\n\n<p>The twisted logs show nothing but twisted stops working at this point. By the error code 499, i am assuming that the client closed the connection unexpectedly, which I have no problem with. Whether the client receives the response or not is not important to me. Here is the relevant django view:</p>\n\n<pre><code>def api_url(request):\n    if request.GET:\n        get_param = request.GET.get('get', [''])[0]\n        more_param = request.GET.get('more', [''])[0]\n        #some processing here based on the get params\n        return HttpResponse('OK')\n    else:\n        raise Http404\n</code></pre>\n\n<p>The request from the client is a valid request and does not affect the processing in an adverse way. I have tested it from the shell. When I tried it on the django development server, it crashed in the same way too without leaving any traces of receiving the request. Everything works perfectly well when testing it from the browser. Also, the twisted server works well for all the regular use cases. This is the first time I am facing an issue with it. Any help or pointers will be appreciated.</p>\n"},{"tags":["django","django-urls","url-pattern"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":12854622,"title":"Redirection in Django URLs","body":"<p>How do I redirect all URLs starting from a particular pattern to another?</p>\n\n<p>Description:</p>\n\n<p>I want to be able to redirect as follows:</p>\n\n<pre><code>/pattern1/step1/ to /pattern2/step1/\n/pattern1/step2/ to /pattern2/step2/\n/pattern1/continue/ to /pattern2/continue/\n</code></pre>\n\n<p>What is the easiest way of doing this in Django URL patterns?</p>\n"},{"tags":["django","windows","environment-variables"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":12854271,"title":"setting DJANGO_SETTINGS_MODULE on windows Correctly","body":"<p>There are my post on this query but most of them are for linux. None of them exlicitly for windows</p>\n\n<p>in my application i'm setting up the database (sqlite3 , default in Django). after  editing setting.py file of my application (mysite)</p>\n\n<pre><code>DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.\n        'NAME': 'D:/Django_Code/sqlite.db',                      # Or path to database file if using sqlite3.\n        'USER': '',                      # Not used with sqlite3.\n        'PASSWORD': '',                  # Not used with sqlite3.\n        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.\n        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.\n    }\n}\n</code></pre>\n\n<p>after finding that i have to set DJANGO_SETTINGS_MODULE environment so that Django can know about the database setting. So i set it up like</p>\n\n<pre><code>DJANGO_SETTINGS_MODULE = \"D:\\Django_Code\\mysite\\mysite\\settings.py\"\n</code></pre>\n\n<p>To cross check the database setup when i issue </p>\n\n<pre><code>&gt;&gt;&gt; from django.db import connection\n&gt;&gt;&gt; cursor = connection.cursor()\n</code></pre>\n\n<p>it says DJANGO_SETTINGS_MODULE environment variable is Undefined.</p>\n\n<p>Need help to set DJANGO_SETTINGS_MODULE correctly.</p>\n"},{"tags":["python","django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":12852047,"title":"Django. Doing complex calculations in database","body":"<p>Here's part of my model file :</p>\n\n<pre><code>class Metric(models.Model):\n    Team = models.ForeignKey(Team)\n    metric_name = models.CharField(max_length = 40)\n    def __unicode__(self):\n            return self.metric_name\n\n\nclass Members(models.Model):\n    Metric = models.ForeignKey(Metric, through=\"Calculate\")\n    member_name = models.CharField(max_length = 40, null=True, blank=True)\n    week_one = models.IntegerField(null=True, blank=True)\n    week_two = models.IntegerField(null=True, blank=True)\n    week_three = models.IntegerField(null=True, blank=True)\n    week_four = models.IntegerField(null=True, blank=True)\n    total = models.IntegerField(null=True, blank=True)\n    def __unicode__(self):\n            return self.member_ID\n\n    def save(self, *args, **kwargs):\n            self.total = int(self.week_one)+int(self.week_two)+int(self.week_three)+int(self.week_four)\n            super(Members, self).save(*args, **kwargs) # Call the \"real\" save() method.\n</code></pre>\n\n<p>Now what I want to do is. I want to calculate the number of members per metric the aggregate total of all the members in a metric and the highest total among all the members in a metric.</p>\n\n<p>I can't figure out a way to do this in Django.\nI want to make these calculations and store them in the database.\nCan anyone please help me out with this.\nThanks</p>\n"},{"tags":["iphone","django","authentication","post","django-csrf"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":742,"score":2,"question_id":3417280,"title":"How would I authenticate and make requests from an iPhone app to a Django backend to get around CSRF?","body":"<p>I'm working with an iPhone developer who does not have any Django experience, and I am relatively new to Django. I've built an existing Django app with a web interface that allows a user to log in and add books from our database to his personal library.</p>\n\n<p>We are trying to build an iPhone application that allows a user to authenticate and the access the library, and I was wondering what is the best way to do the authentication and then request the user's library. We started out using an HTTP POST requests to send credentials to the Django app, but another Django developer I know told me this would be a cross-domain request which would not work starting with Django 1.2.</p>\n\n<p>If I can't do cross-domain HTTP POST requests, how should I POST data from the iPhone app to the Django application?</p>\n"},{"tags":["python","django","scrapy"],"answer_count":4,"favorite_count":15,"up_vote_count":15,"down_vote_count":0,"view_count":3083,"score":15,"question_id":4271975,"title":"Access django models inside of Scrapy","body":"<p>Is it possible to access my django models inside of a Scrapy pipeline, so that I can save my scraped data straight to my model? </p>\n\n<p>I've seen <a href=\"http://readthedocs.org/docs/scrapy/en/latest/experimental/djangoitems.html\">this</a>, but I don't really get how to set it up?</p>\n"},{"tags":["django","django-multilingual"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":69,"score":2,"question_id":12852805,"title":"Issues with multiple languages","body":"<p>I want my app will be available in multiple languages (let say two,one is default english and one more).</p>\n\n<p>And these both options available in my home page and there must be a link shown which makes user able to select his choice of language.</p>\n\n<p>I am reading the Django official <a href=\"https://docs.djangoproject.com/en/dev/topics/i18n/\" rel=\"nofollow\">documentation</a> for this  </p>\n\n<p>so any one can let me know the general idea how I can do that.</p>\n\n<p>and one more thing......in settings.py there is default <strong>LANGUAGE_CODE = 'en-us'</strong> given,BUT as I want my app in more then one language so How i can specify that country code here.</p>\n\n<p>like this works LANGUAGE_CODE = 'en-us','es-MX (Spanish)' or I have to do it in some way.</p>\n\n<p>And what is the purpose of this  <strong>.po</strong> extension in this.</p>\n"},{"tags":["django","testing","logging"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":12790607,"title":"In Django, how can I tell my project to read/write in distinct log directories at runtime?","body":"<p>I am working on a django project that, along with having a database for its models and relations, writes to a log directory called <code>activity_logs</code> outside of the project directory to keep track of formatted user activities, one file for each user. This is an alternative file-structure-based solution to having a database table carry this information along, because this offloads some storage from the DB and is relatively easy to format and express such activities. Perhaps some of you may recommend storing this kind of data in the database, which is fine, but I still believe there is question from all of this that I need help answering.</p>\n\n<p>This django project has multiple apps that have an extensive test suite, one for each app. Additionally, there is a <code>logging.py</code> file that encapsulates the logging functionality (writing/reading activities to/from log files), and so both the test cases within the test suites as well as the view functions (and various other utility functions) all utilize these logging functions in order to store these user activities and retrieve them based on model relationships to emulate a user notification system. Since the logging module takes care of this logging, it needs to know where to write to, and so we have a directory structure called <code>activity_logs</code> to which it writes user log files, creating one for a new user and deleting one for a user removed from the database. One of the newest changes we would like to make in this project is to create a separate logging directory for testing this logging functionality, something like <code>test_activity_logs</code>, so that it would never be confused when writing to the test directory for test users or the regular activity log directory for real users.</p>\n\n<p>My problem is this: at runtime, how can I tell the system, at whichever startpoint of execution (whether it be from a view function call through the django test <code>Client</code> object, a test case, an actual HTTPrequest made via a URL, etc.), when to look inside the <code>activity_logs</code> or the <code>test_activity_logs</code> directory? It solely depends on whether I am generating new information for a real user or a test user, but a User is a User in our system, and I'm facing some trouble trying to tell these functions that call some logging functions to write to the test log directory vs. the regular one. For example, one approach I am trying is to pass a keyword argument (kwarg) to the logging functions so that they can be made aware of which directory to read/write to/from, like so:</p>\n\n<p><code>self.assertTrue(activity_has_been_logged(ACTIVITY_ACCOUNT_CREATED, user.get_profile(), use_test_activity_log_directory=True) == True)</code></p>\n\n<p>the kwarg called <code>use_test_activity_log_directory=True</code> will tell the logging function called <code>activity_has_been_logged</code> to read the test activity log directory. Unfortunately, apart from being a little inflexible (but tolerable), this doesn't solve the situation where the django test <code>client</code> object sends a GET or POST request via a URL to a view function that writes activities to log files:</p>\n\n<p><code>response = client.post(propose_match_url, post) #Can't write to test_log_directory if by default it writes to regular directory!</code></p>\n\n<p>How do I let the client pass on this kwarg to those view functions? I think that it should totally be possible to do this, but I'm not sure if fiddling with these kwargs is the best way, or maybe create a global variable in the project settings file, but maybe that might cause some trouble with race conditions with a shared mutable variable.</p>\n\n<p>Your help would be great. Thanks in advance!</p>\n"},{"tags":["django","ckeditor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12851979,"title":"Using CKEditor on Django Blog, How can I get django to render the html from ckeditor?","body":"<p>I had done this with markdown before following the book practical django projects but now I wish to use CKEditor on my blog and it just spits out the raw HTML  I've checked docs. I imagine I am just not using the correct filter? IF anybody knows the answer please let me know. Thanks</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":12850567,"title":"Getting a request object as in a view function but called from `manage.py shell`","body":"<p>When I print a request object from a view function in <code>views.py</code> I get a  dictionary-like <code>django.core.handlers.wsgi.WSGIRequest</code> object(inherits from <code>django.http.HttpRequest</code>). Printing this dictionary-like object from a view function returns a bunch of values, especially for the <code>META</code> key.</p>\n\n<p>Now I'd like to call this same data from the <code>manage.py shell</code> of my project but <code>handlers</code> is not an attribute of <code>django.core</code> in the shell so I cannot get the <code>django.core.handlers.wsgi.WSGIRequest</code> object. Is there any way of getting the request object as in my view function but called from the <code>manage.py shell</code>?</p>\n"},{"tags":["django","django-forms","django-widget"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":12850424,"title":"how to delete the ---- generated by select choices","body":"<p>i have a question on how do i get rid of the ---- from the select drop down menu not to show the null(---) in the first row. I found from stackoverflow  on RadioSelect and i manage to get rid of the --- but i am stuck in the select drop down menu...:(\nhere is my coding example. </p>\n\n<p>models.py</p>\n\n<pre><code>colorradio = ((\"1\" , 'Yellow'),\n              (\"2\" , 'Red'),\n              (\"3\" , 'Blue'),\n              (\"4\" , 'Black'),)\nCOLORRADIO = models.CharField(max_length = 2, choices = colorradio, null = True,  blank = True)\n\ncolorselect= ((\"1\" , 'Yellow'),\n              (\"2\" , 'Red'),\n              (\"3\" , 'Blue'),\n              (\"4\" , 'Black'),)\nCOLORSELECT= models.CharField(max_length = 2, choices = colorselect, null = True, blank = True)\n</code></pre>\n\n<p>forms.py </p>\n\n<pre><code>class RadioSelectNotNull(RadioSelect, Select):\n\n    def get_renderer(self, name, value, attrs=None, choices=()):\n        \"\"\"Returns an instance of the renderer.\"\"\"\n        if value is None: value = ''\n        str_value = force_unicode(value) # Normalize to string.\n        final_attrs = self.build_attrs(attrs)\n        choices = list(chain(self.choices, choices))\n        if choices[0][0] == '':\n            choices.pop(0)\n        return self.renderer(name, str_value, final_attrs, choices)   \n\nclass RainbowForm(ModelForm):\n\n    class Meta:\n        model = Rainbow\n        widgets = {'COLORRADIO':RadioSelectNotNull(), # this is correct and NOT shown ---\n                   'COLORSELECT':RadioSelectNotNull(), #should be in dropdown menu\n                   }\n</code></pre>\n\n<p>I did like the <code>COLORSELECT</code> to show as dropdown menu and also not showing the ---- in the first row. But if im using like the above code i get <code>COLORSELECT</code> as <code>RadioSelect</code> and NOT showing ---- (which is what i am want for not showing ---) but not as <code>RadioSelect</code>.</p>\n\n<p>Thank you so much in advance.</p>\n"},{"tags":["android","django","sqlite","http-post","jpeg"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":260,"score":1,"question_id":9460486,"title":"How do I use Android HTTPPOST jpeg to Django Server?","body":"<p>This is my first android app and I am trying to POST images taken on the camera (ICS 4.0) to a Django server. I have been getting a NULL pointer exception error but I have no clue where this is occurring. Also, When I don't the app crashes when trying to upload. I'm not sure what is going on. I am using Fragments.</p>\n\n<p>Here is my Django post code:</p>\n\n<pre><code>    def post(self, request, *args, **kwargs):\n        image = get_object_or_404(Img, **kwargs)\n\n        inst = Instance(stream=image.stream)\n        uploaded_file = \\\n            File('-.jpg', self.FILES[0].read(), 'image/jpeg')\n        setattr(inst, 'full', uploaded_file)\n        inst.save()\n\n        return HttpResponse(status=HTTP_201_CREATED)\n</code></pre>\n\n<p>Here is what I have in my Fragment after the camera action:</p>\n\n<pre><code>    public void onActivityResult(int requestCode, int resultCode, Intent data) {\n    if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {\n        if (resultCode == Activity.RESULT_OK) {\n            // put the image onto server\n            text.setText(outputFileUri.toString());\n\n            try {\n                HttpClient httpClient = new DefaultHttpClient();\n                HttpContext localContext = new BasicHttpContext();\n                HttpPost postRequest = new HttpPost(\"http://192.168.1.2:8000/v1/14/1/imagesink/1/\");\n                MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);\n\n                bm = BitmapFactory.decodeFile(\"/sdcard/test.jpg\");\n                Bitmap bmpCompressed = Bitmap.createScaledBitmap(bm, 640, 480, true);\n                ByteArrayOutputStream bos = new ByteArrayOutputStream();\n                bmpCompressed.compress(CompressFormat.JPEG, 100, bos);\n                byte[] bytes = bos.toByteArray();\n                reqEntity.addPart(\"myImage\", new ByteArrayBody(bytes, \"temp.jpg\")); \n                postRequest.setEntity(reqEntity);\n                HttpResponse response = httpClient.execute(postRequest,localContext);\n\n                BufferedReader reader = new BufferedReader(new InputStreamReader( response.getEntity().getContent(), \"UTF-8\"));  \n                String sResponse = reader.readLine();\n\n            } catch (Exception e) {\n                // handle exception here\n                Log.v(\"myApp\", \"Some error came up\");  \n            }\n\n        } else if (resultCode == Activity.RESULT_CANCELED) {\n            // User cancelled the image capture\n        } else {\n            // Image capture failed, advise user\n        }\n    }\n}\n</code></pre>\n\n<p>Thanks in advance!</p>\n\n<p>ERROR:</p>\n\n<pre><code>     E/AndroidRuntime(19787): FATAL EXCEPTION: main\n     java.lang.RuntimeException: Failure delivering result ResultInfo{who=android:fragment:0, request=1, result=-1, data=null} to activity {com.prism.app/com.prism.app.PrismActivity}: java.lang.NullPointerException: println needs a message\n     at android.app.ActivityThread.deliverResults(ActivityThread.java:2976)\n     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3019)\n     at android.app.ActivityThread.access$1100(ActivityThread.java:122)\n     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1176)\n     at android.os.Handler.dispatchMessage(Handler.java:99)\n     at android.os.Looper.loop(Looper.java:137)\n     at android.app.ActivityThread.main(ActivityThread.java:4340)\n     at java.lang.reflect.Method.invokeNative(Native Method)\n     at java.lang.reflect.Method.invoke(Method.java:511)\n     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)\n at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)\n at dalvik.system.NativeStart.main(Native Method)\n         Caused by: java.lang.NullPointerException: println needs a message\n at android.util.Log.println_native(Native Method)\n at android.util.Log.e(Log.java:231)\n at com.prism.app.OneFragmentTab.onActivityResult(OneFragmentTab.java:106)\n     at android.app.Activity.dispatchActivityResult(Activity.java:4653)\n     at android.app.ActivityThread.deliverResults(ActivityThread.java:2972)\n     ... 11 more\n</code></pre>\n"},{"tags":["python","django","django-admin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":12720052,"title":"Django contrib admin views limit customization","body":"<p>I'm looking for a way to expose the pager limit as a form within admin views by adding a query argument such as <code>&amp;?pager_limit=50</code> or something similar so it can merge happily with the various exposed filters.</p>\n\n<p>I haven't really made any headway at all at solving the problem myself. I've been trawling through contrib.admin and contrib.users.admin and not able to find what I'm looking for.</p>\n\n<p>Thanks</p>\n"},{"tags":["css","django","static"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":78,"score":2,"question_id":12849532,"title":"Django 404 error loading CSS from static directory","body":"<p>I have a problem loading up CSS from the static directory:</p>\n\n<p>settings.py</p>\n\n<pre><code>MEDIA_ROOT = '/he/sites/video1.hackedexistence.com/htdocs/media/'  \nMEDIA_URL = '/media/'  \n\nSTATIC_ROOT = '/he/sites/video1.hackedexistence.com/htdocs/static/'  \nSTATIC_URL = '/static/'  \n\nADMIN_MEDIA_PREFIX = '/static/admin/'  \n\nSTATICFILES_DIRS = ()\n</code></pre>\n\n<p>url.py</p>\n\n<pre><code>from django.conf.urls.defaults import patterns, include, url  \nfrom django.contrib import admin  \nadmin.autodiscover()\n\nurlpatterns = patterns('',\n\n    url(r'^admin/', include(admin.site.urls)),\n\n    r'^beers/$', 'beer.views.BeersAll'),  \n)\n</code></pre>\n\n<p>base.html loads up fine, css won't load</p>\n\n<pre><code>&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"/static/css/video1.css\" /&gt;\n</code></pre>\n\n<p>the css href link leads to  </p>\n\n<pre><code>Page not found (404)\n    'css/video1.css' could not be found\n</code></pre>\n\n<p>The full path to the css file:  </p>\n\n<pre><code>/he/sites/video1.hackedexistence.com/htdocs/static/css/video1.css\n</code></pre>\n\n<p>I'm following a youtube django tutorial by Hacked Existence.  and he seems to proceed without a problem with this setup.  How can i correct this?</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":12850904,"title":"Using extra and max_num in a Django formset","body":"<p>I have a formset that has no model associated with it and I want to be able to add a form to the formset once all existing forms are valid, so reading the docs, I found: \"If the value of max_num is greater than the number of existing objects, up to extra additional blank forms will be added to the formset, so long as the total number of forms does not exceed max_num.\"(https://docs.djangoproject.com/en/dev/topics/forms/formsets/#limiting-the-maximum-number-of-forms): </p>\n\n<p>So I did this:</p>\n\n<pre><code>FormSet = formset_factory(SomeForm, extra=2, max_num=10)\n    if request.method == 'POST':\n        formset = FormSet(data=request.POST)\n    else:\n        formset = FormSet()\n</code></pre>\n\n<p>and this:</p>\n\n<pre><code>&lt;form action=\"\" method=\"POST\"&gt;\n{{ formset }}\n&lt;input type=\"submit\" value=\"Next\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>expecting to see 2 empty forms, where I would get extra forms if I filled out one (or 2) forms and pressed \"Next\". However, only 2 forms are ever shown in the template even if I have 1 or 2 valid forms. </p>\n\n<p>How is this supposed to work? Am I misinterpreting the docs? Is my code wrong?</p>\n"},{"tags":["javascript","django","backbone.js","ember.js"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":464,"score":2,"question_id":8525744,"title":"Combining and Compressing multiple JavaScript files into a single file in a Django project","body":"<p>What is the simplest way to combine JavaScript files into a single file in a Django project? </p>\n\n<p><strong>Explanation</strong></p>\n\n<p>I want this to work with Ember.js/Backbone where you (usually) have many different JavaScript in multiple directories. Directories would all be in one folder called app/ for example, like: app/views/ app/models/ /app/routers/</p>\n\n<p><strong>Requirements</strong></p>\n\n<ul>\n<li>Work together with the staticfiles app</li>\n<li>Still be separated while in development mode for easier debugging (only compile when calling collectstatic?)</li>\n<li>Work with Require.js (guess that shouldn't be too hard, but putting it in here to be sure)</li>\n</ul>\n\n<p><strong>Extra credit</strong></p>\n\n<p>Explain a best practices way of combining Django and Ember/Backbone.</p>\n"},{"tags":["django","django-forms"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":12850716,"title":"Return ajax select field on form error","body":"<p>I have a form that triggers an ajax request to a view after the user tabs out of the 'address' field. It retrieves the zip code and then populates pickups with the same zip. The problem is that if there are any form errors is that the drop down with the results I generate from my get_pickups view is lost. How can I keep it so that even on form errors it will keep the results</p>\n\n<pre><code>def get_pickups(request):   \n\n    if request.is_ajax():   \n        # Get available pickup dates based upon zip code\n        zip = request.POST.get('zip',None)\n        routes = Route.objects.filter(zip=zip).values_list('route',flat=True)       \n\n        two_days_from_today = date.today() + relativedelta(days = +2)\n\n        submitted_from = request.POST.get('template',None)\n        if submitted_from == '/donate/':\n            template = 'donate_form.html'\n            results = PickupSchedule.objects.filter(route__in=routes,date__gt = two_days_from_today, current_count__lt=F('specials')).order_by('route','date')\n        else:\n            template = 'donate-external.html'\n            results = PickupSchedule.objects.filter(route__in=routes,date__gt = two_days_from_today, current_count__lt=F('specials')).order_by('date')          \n\n        return render_to_response(template,{ 'zip':zip, 'results':results}, context_instance=RequestContext(request))\n</code></pre>\n\n<p>my ajax call via jquery:</p>\n\n<pre><code>$.ajax({\n        type: \"POST\",\n        url:\"/get_pickups/\",\n        data: {\n        'zip': zip,\n        'template':template\n        },\n        success: function(data){            \n\n                results = $(data).find('#results').html()           \n                $(\"#id_pickup_date\").replaceWith(\"&lt;span&gt;\" + results + \"&lt;/span &gt;\");      \n        },\n        error: function(){\n            alert(\"Error\");\n        }\n</code></pre>\n"},{"tags":["django","heroku"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":12850168,"title":"Installing a gem bundle in a python app on Heroku","body":"<p>I have a Python app on Heroku running with Django. The app launches and works perfectly. The first couple lines of a push look like this:</p>\n\n<pre><code>(venv)➜  djangoproject git:(development) ✗ git push\nCounting objects: 33, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (21/21), done.\nWriting objects: 100% (21/21), 1.96 KiB, done.\nTotal 21 (delta 15), reused 0 (delta 0)\n\n-----&gt; Heroku receiving push\n-----&gt; Python/Django app detected\n...\n</code></pre>\n\n<p>I need to install a gem program on the dyno (specifically, Compass). </p>\n\n<p>Heroku's instructions are to provide a <code>Gemfile</code> and <code>Gemfile.lock</code> in the root directory with the required gems. As soon as I provide this, however, Heroku thinks the app is a Ruby app:</p>\n\n<pre><code>(venv)➜  djangoproject git:(development) ✗ git push\nCounting objects: 33, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (21/21), done.\nWriting objects: 100% (21/21), 1.96 KiB, done.\nTotal 21 (delta 15), reused 0 (delta 0)\n\n-----&gt; Heroku receiving push\n-----&gt; Ruby app detected (NOTE: this is paraphrased)\n...\n</code></pre>\n\n<p>Is there any way I can install a ruby gem while running the site as a Python/Django app?</p>\n"},{"tags":["django","django-urls","django-generic-views"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":12849933,"title":"Use Django-sorting with generic list views directly in the URL dispatcher","body":"<p>I've successfully installed Django-sorting and was wondering if I can get the process to work with generic views in the URL dispatcher.</p>\n\n<p>I have the following in my urls.py file:</p>\n\n<pre><code>  url(r'^inpatients/$', ListView.as_view(\n    queryset=Inpatient.objects.order_by('-date_of_admission'), \n    template_name='inpatient_list_view.html'), name='inpatientlist'),\n</code></pre>\n\n<p>and a model Inpatient that has the relevant data to display.</p>\n\n<p>And would like to be able to use a URL such as</p>\n\n<pre><code>`https://localhost/portal/inpatients/?sort=-room` \n</code></pre>\n\n<p>to do the equivalent of </p>\n\n<pre><code>  url(r'^inpatients/$', ListView.as_view(\n    queryset=Inpatient.objects.order_by('-room'), \n    template_name='inpatient_list_view.html'), name='inpatientlist'),\n</code></pre>\n\n<p>as I am using the generic ListView.as_view().</p>\n\n<p>Is there a way that the GET parameter \"sort\" in the URL can be pulled out to pass to the function Inpatient.objects.order_by() in this example?</p>\n\n<p>I could just make a view function and extract the 'sort' parameter from GET with request.GET.get('sort','-date_of_admission') to allow default ordering by descending date_of_admission, but Django is so cool I thought I'd learn something by seeing if this could be done in the URL dispatcher. </p>\n\n<p>I also think I could subclass ListView to provide the queryset I want, because I understand the URL dispatcher sends the variables I need into the call.</p>\n\n<p>I do undertand that Django-sorting likes to encode ascending and descending as in example</p>\n\n<pre><code>?sort=room&amp;dir=asc\n</code></pre>\n\n<p>but thought I'd handle that by rewriting Django-sort locally. </p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":12035076,"title":"django-cron does not work","body":"<p>After installing the django_cron correctly, i write the following codes named as cron.py in django app to call django_cron to execute. But it's so odd that this script does not work at all!</p>\n\n<pre><code>from django_cron import cronScheduler, Job\nfrom mysite.tds.models import machine_list,flavor_list,image_list\nfrom mysite.views import *\nimport datetime,os\n\nclass CheckExpire(Job):\nrun_every = 60\n\ndef job(self):\n    mac_list = machine_list.objects.filter(expire_date=datetime.date.today())\n    for lst in mac_list:\n        delete_vm(lst.servername)\n        nagios_delete(lst.servername,lst.machine_ip)\n    mac_list.delete()\n\ncronScheduler.register(CheckExpire)\n</code></pre>\n\n<p>The codes above can be executed successfully if i wrtie them in anther script and run this script, so there is no mistake in these codes.</p>\n\n<p>I post the steps on how i install django-cron for you guys to check if i install it correctly.</p>\n\n<ol>\n<li><p>Put 'django_cron' into your python path</p></li>\n<li><p>Add 'django_cron' to INSTALLED_APPS in your settings.py file</p></li>\n<li><p>Add the following code to the beginning of your urls.py file (just after the imports):\nimport django_cron\ndjango_cron.autodiscover()</p></li>\n<li><p>Create a file called 'cron.py' inside each installed app that you want to add a recurring job to.</p></li>\n<li><p>update MaxRequestsPerChild in httpd.conf and set it to be 100</p></li>\n<li><p>update the base.py in django_cron and set polling_frequency 30(less than run_every)</p></li>\n</ol>\n\n<p>Could someone figure out why django_cron does not work under this condition?\nThanks in advance.</p>\n"},{"tags":["django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":12849567,"title":"page not found 404 when trying to save in django","body":"<p>can anyone help me on my problem, when trying to save my page get an error 404. here is the coding</p>\n\n<p>urls.py</p>\n\n<pre><code>urlpatterns = patterns('',\n(r'^admin/', include(admin.site.urls)),\n(r'^$', PatientView.as_view()),\n(r'^patientList/$', PatientView.as_view(), name =\"forside\"),\n(r'^rehab_diab/(?P&lt;pk&gt;\\d+)/$', RehabDiabetesView.as_view(), name=\"rehabDiabetes_view\"),\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>class RehabDiabetesView(UpdateView):\ntemplate_name=\"rehab_diab.html\"\nmodel = RehabDiabetes\nform_class = RehabDiabetesForm\n\ndef get_context_data(self, **kwargs):\n    context = super(RehabDiabetesView, self).get_context_data(**kwargs)\n    context['pk']=self.kwargs['pk']\n    return context\n\ndef get_object(self, queryset = None):\n    try: \n        obj = RehabDiabetes.objects.get(owner = Patient.objects.get(id = self.kwargs['pk']))\n    except: \n        obj = RehabDiabetes.objects.create(owner = Patient.objects.get(id = self.kwargs['pk']))\n    return obj\n\ndef form_valid(self, form):\n    form.save()\n    return HttpResponseRedirect(reverse(\"forside\"))\n</code></pre>\n\n<p>rehab_diab.html</p>\n\n<pre><code>&lt;form id=\"content\" action=\"rehabDiabetes_view pk\" method=\"POST\" style=\"opacity: 1; \"&gt;\n{% csrf_token %}\n&lt;input type=\"submit\" value=\"Gem\" class=\"ui-button ui-widget ui-state-default ui-corner-all\" /&gt;\n</code></pre>\n\n<p>-------#rest of the code..</p>\n\n<p>and here is the error</p>\n\n<pre><code>Page not found (404)\nRequest Method: POST\nRequest URL:    http:xxx.xxx.xxx/rehab_diab/1/rehabDiabetes_view%20pk\nUsing the URLconf defined in rehab3.urls, Django tried these URL patterns, in this order:\n^admin/\n^$\n^patientList/$ [name='forside']\n^rehab_diab/(?P&lt;pk&gt;\\d+)/$ [name='rehabDiabetes_view']\nThe current URL, rehab_diab/1/rehabDiabetes_view pk, didn't match any of these.\n</code></pre>\n\n<p>what is the missing link?? can't figure it out since im newbies in django..:(\nthank you in advance.</p>\n"},{"tags":["django","django-admin","django-templates","django-forms"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":3888,"score":1,"question_id":2179401,"title":"Django Admin: Customizing the inline template (tabular.html)","body":"<p>I'm trying to follow the guidelines in <a href=\"http://stackoverflow.com/questions/702637/django-admin-inline-inlines-or-three-model-editing-at-once/1332476#1332476\">this answer</a>, but I'm getting stuck with how to edit the template.</p>\n\n<p>The relevant part of my <strong>admin.py</strong>:</p>\n\n<pre><code>SegmentFormset = forms.models.inlineformset_factory(Division,Segment)\nclass DivisionForm(forms.ModelForm):\n    def __init__(self, **kwargs):\n        super(DivisionForm, self).__init__(**kwargs)\n        self.segment_formset = SegmentFormset(instance=self.instance, data=self.data,\n                prefix=self.prefix)\n\n    def is_valid(self):\n        return (super(DivisionForm, self).is_valid() and \n                    self.segment_formset.is_valid())\n\n    def save(self, commit=True):\n        assert commit == True \n        res = super(DivisionForm, self).save(commit=commit)\n        self.segment_formset.save()\n        return res\n\nclass DivisionInline(admin.TabularInline):\n    model = Division\n    form = DivisionForm\n    template = 'competitions/admin/tabular.html'\n\nclass CompetitionAdmin(VersionAdmin):\n    inlines = [DivisionInline,]\n</code></pre>\n\n<p>The relevant part of my <strong>template</strong>:</p>\n\n<pre><code>    {% for fieldset in inline_admin_form %}\n      {% for line in fieldset %}\n        {% for field in line %}\n          &lt;td class=\"{{ field.field.name }}\"&gt;\n          {{ field.field.errors.as_ul }}\n          {{ field.field }}\n          &lt;/td&gt;\n        {% endfor %}\n      {% endfor %}\n         &lt;td&gt;My segment formset should be here&lt;/td&gt;\n    {% endfor %}\n</code></pre>\n\n<p>What I can't figure out is how to access the segment formset. I've experimented with all of the variable names and none of them are my DivisionForm. The division formset is the {{fieldset.formset}} variable and that's as far as I've been able to get.</p>\n\n<h2>Edit 1:</h2>\n\n<p>Actually, the relevant part of the template is a bit longer ;) Putting in more code:</p>\n\n<pre><code> &lt;tbody&gt;\n {% for inline_admin_form in inline_admin_formset %}\n    {% if inline_admin_form.form.non_field_errors %}\n    &lt;tr&gt;&lt;td colspan=\"{{ inline_admin_form.field_count }}\"&gt;{{ inline_admin_form.form.non_field_errors }}&lt;/td&gt;&lt;/tr&gt;\n    {% endif %}\n    &lt;tr class=\"{% cycle row1,row2 %} {% if inline_admin_form.original or inline_admin_form.show_url %}has_original{% endif %}\"&gt;\n\n    &lt;td class=\"original\"&gt;\n      {% if inline_admin_form.original or inline_admin_form.show_url %}&lt;p&gt;\n      {% if inline_admin_form.original %} {{ inline_admin_form.original }}{% endif %}\n      {% if inline_admin_form.show_url %}&lt;a href=\"../../../r/{{ inline_admin_form.original_content_type_id }}/{{ inline_admin_form.original.id }}/\"&gt;{% trans \"View on site\" %}&lt;/a&gt;{% endif %}\n        &lt;/p&gt;{% endif %}\n      {% if inline_admin_form.has_auto_field %}{{ inline_admin_form.pk_field.field }}{% endif %}\n      {{ inline_admin_form.fk_field.field }}\n      {% spaceless %}\n      {% for fieldset in inline_admin_form %}\n        {% for line in fieldset %}\n          {% for field in line %}\n            {% if field.is_hidden %} {{ field.field }} {% endif %}\n          {% endfor %}\n        {% endfor %}\n      {% endfor %}\n      {% endspaceless %}\n    &lt;/td&gt;\n\n    {% for fieldset in inline_admin_form %}\n      {% for line in fieldset.formset %}\n        {% for field in line %}\n          &lt;td class=\"{{ field.field.name }}\"&gt;\n          {{ field.field.errors.as_ul }}\n          {{ field.field }}\n          &lt;/td&gt;\n        {% endfor %}\n      {% endfor %}\n      &lt;td&gt;My segment formset should be here&lt;/td&gt;\n    {% endfor %}\n\n    {% if inline_admin_formset.formset.can_delete %}\n      &lt;td class=\"delete\"&gt;{% if inline_admin_form.original %}{{ inline_admin_form.deletion_field.field }}{% endif %}&lt;/td&gt;\n    {% endif %}\n\n    &lt;/tr&gt;\n\n {% endfor %}\n &lt;/tbody&gt;\n</code></pre>\n"},{"tags":["python","django","django-admin"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":238,"score":2,"question_id":8989825,"title":"django-admin.py is not working","body":"<p>Am new to django and i have been trying to set up a project with no success. When i type\ndjango-admin.py startproject mysite i get this.</p>\n\n<pre><code>C:\\Users\\WASSWA SAM\\Documents\\django\\djcode&gt;django-admin.py startproject mysite\nUsage: django-admin.py subcommand [options] [args]\n\nOptions:\n  -v VERBOSITY, --verbosity=VERBOSITY\n                    Verbosity level; 0=minimal output, 1=normal output,\n                    2=all output\n</code></pre>\n\n<p>etc....</p>\n\n<p>I have added it to my path like so</p>\n\n<pre><code>C:\\Python26\\Lib\\site-packages\\django\\bin\n</code></pre>\n\n<p>And when i import django from interactive mode it works perfectly. What could be the problem. I am using Windows 7 and django 1.3.1. I installed it using setup.py.</p>\n"},{"tags":["django"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":28,"score":-1,"question_id":12849243,"title":"How work based session shopping cart?","body":"<p>1.How work based session shopping cart?</p>\n\n<p>2.What help sessions?</p>\n\n<p>3.How to design a cart to be useful?</p>\n\n<p>4.How can look Model?</p>\n"}]}
