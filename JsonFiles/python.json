{"count":142079,"tag":"python","questions":[{"tags":["python","python-2.x"],"answer_count":6,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":50,"score":6,"question_id":13280680,"title":"How dangerous is setting self.__class__ to something else?","body":"<p>Say I have a class, which has a number subclasses.</p>\n\n<p>I can instantiate the class. I can then set its <code>__class__</code> attribute to one of the subclasses. I have effectively changed the class type to the type of its subclass, on a live object. I can call methods on it which invoke the subclass's version of those methods.</p>\n\n<p>So, how dangerous is doing this? It seems weird, but is it <em>wrong</em> to do such a thing? Despite the ability to change type at run-time, is this a feature of the language that should completely be avoided? Why or why not?</p>\n\n<p>(Depending on responses, I'll post a more-specific question about what I would like to do, and if there are better alternatives).</p>\n"},{"tags":["python"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13281511,"title":"List getting created incorrectly","body":"<p>I am trying to create a list based on the input below, and I don't see the expected output. Can anyone suggest where am I going wrong?</p>\n\n<p><strong>INPUT:</strong></p>\n\n<pre><code>CR  FA  CL  Title\n409452  WLAN    656885  Age out RSSI values from buffer in Beacon miss scenario\n415560  WLAN    656886  To Record SMD Event Logging\n</code></pre>\n\n<p>I want an OUTPUT like </p>\n\n<pre><code>[['CR', 'FA', 'CL', 'TITLE'], ['409452', 'WLAN', '656885', 'Age out RSSI values from buffer in Beacon miss scenario'], ['415560', 'WLAN', '656886','To Record SMD Event Logging']]\n</code></pre>\n\n<p>But i see its getting created like </p>\n\n<pre><code>[['CR', 'FA', 'CL', 'TITLE'], ['', '409452', 'WLAN', '656885\\tAge out RSSI values from buffer in Beacon miss scenario'], ['', '415560', 'WLAN', '656886\\tTo Record SMD Event Logging']]\n</code></pre>\n\n<p>Python code</p>\n\n<pre><code> for i in info.splitlines():\n    index = re.split(r'\\W+',i,3)\n    CRlist.append(index)\n</code></pre>\n"},{"tags":["python"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13281590,"title":"How can I get a class object/instance from a previous __import__ in Python?","body":"<p>Let's suppose you have a module named \"module\" inside a hirearchical \"folder2\" with a class named \"klass\".</p>\n\n<p>How can I get the class like in a square bracket syntax?</p>\n\n<pre><code>module = __import__('folder1.folder2.module, fromlist='*')\nsbs_module = module['klass']\n\n#lets say we print a value from the method getValue\nprint sbs_module.getValue()\n</code></pre>\n"},{"tags":["python","powershell","exchange"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13266159,"title":"How can I run command in Microsoft Exchange Server Powershell through Python script?","body":"<p>I want to check the number of mailbox in Microsoft Exchange Server. This command works fine in standard cmd.exe:</p>\n\n<pre><code>\"C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe\" -command \". 'C:\\Program Files\\Microsoft\\Exchange Server\\V14\\bin\\RemoteExchange.ps1'; Connect-ExchangeServer -auto ; Get-Mailbox | Measure-Object\"\n</code></pre>\n\n<p>Output is</p>\n\n<pre><code>...\nCount    : 3\nAverage  :\nSum      :\nMaximum  :\nMinimum  :\nProperty :\n</code></pre>\n\n<p>Then I am going to code it in Python, using \"-ExecutionPolicy RemoteSigned\":</p>\n\n<pre><code>cmd = \"C:\\\\Windows\\\\System32\\\\WindowsPowerShell\\\\v1.0\\\\powershell.exe\n -ExecutionPolicy RemoteSigned\n -command \\\". 'C:\\\\Program Files\\\\Microsoft\\\\Exchange Server\\\\V14\\\\bin\\\\RemoteExchange.ps1'; Connect-ExchangeServer -auto; Get-Mailbox | Measure-Object\\\"\"\nos.system(cmd)\n</code></pre>\n\n<p>There is lots of error about loading RemoteExchange.ps1 file.</p>\n\n<pre><code>Get-ItemProperty : Cannot find path 'HKLM:\\SOFTWARE\\Microsoft\\ExchangeServer\\v14\\Setup' because it does not exist.\nAt C:\\Program Files\\Microsoft\\Exchange Server\\V14\\bin\\RemoteExchange.ps1:46 char:34\n+ $global:exbin = (get-itemproperty &lt;&lt;&lt;&lt;  HKLM:\\SOFTWARE\\Microsoft\\ExchangeServer\\v14\\Setup).MsiInstallPath + \"bin\\\"\n    + CategoryInfo          : ObjectNotFound: (HKLM:\\SOFTWARE\\...erver\\v14\\Setup:String) [Get-ItemProperty], ItemNotFo\n   undException\n    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.GetItemPropertyCommand\n\n...\n\nThe Exchange types file wasn't loaded because not all of the required files could be found.\nUpdate-TypeData : Cannot find path 'C:\\Users\\administrator.SCCM01\\bin\\Exchange.partial.Types.ps1xml' because it does no\nt exist.\nAt C:\\Program Files\\Microsoft\\Exchange Server\\V14\\bin\\RemoteExchange.ps1:104 char:16\n+ Update-TypeData &lt;&lt;&lt;&lt;  -PrependPath $partialTypeFile\n    + CategoryInfo          : InvalidOperation: (bin\\Exchange.partial.Types.ps1xml:String) [Update-TypeData], ItemNotF\n   oundException\n    + FullyQualifiedErrorId : TypesPrependPathException,Microsoft.PowerShell.Commands.UpdateTypeDataCommand\n</code></pre>\n\n<p>Although the welcome screen of Exchange Management Shell appears, it failed to load RemoteExchange.ps1, and \"Get-Mailbox\" command is not working at all.</p>\n\n<p>I guess I must have missed something important. How can I solve this problem? Please help.</p>\n\n<p><strong>Edit</strong>: Why should I add <code>-ExecutionPolicy RemoteSigned</code> in Python script? If I do not do that, it will result in a different error:</p>\n\n<pre><code>File C:\\Program Files\\Microsoft\\Exchange Server\\V14\\bin\\RemoteExchange.ps1 cannot be loaded because the execution of scripts is disabled on this system. Please see \"get-help about_signing\" for more details.\n</code></pre>\n\n<p>Refer to this <a href=\"http://stackoverflow.com/questions/6901856/invoking-a-powershell-script-from-python\">thread</a>, and <code>RemoteSigned</code> is better than <code>Unrestricted</code>. Both of them work in cmd.exe, but not work in Python script.</p>\n"},{"tags":["python","mysql-python","web.py"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":55,"score":5,"question_id":13268061,"title":"Why Chinese garbled when use webpy but it's normal when use MySQLdb?","body":"<p>I create a database in mysql and use webpy to construct my web server.</p>\n\n<p>But it's so strange for Chinese character between the webpy's and MySQLdb's behaviors when using them to access database respectively.</p>\n\n<p>Below is my problem:</p>\n\n<p>My table t_test (utf8 databse):</p>\n\n<pre><code>id     name\n1      测试\n</code></pre>\n\n<p>the utf8 code for \"测试\" is: \\xe6\\xb5\\x8b\\xe8\\xaf\\x95</p>\n\n<p>when using MySQLdb to do \"select\" like this:</p>\n\n<pre><code>    c=conn.cursor()\n    c.execute(\"SELECT * FROM t_test\")\n    items = c.fetchall()\n    c.close()\n    print \"items=%s, name=%s\"%(eval_items, eval_items[1])\n</code></pre>\n\n<p>the result is normal, it prints:</p>\n\n<pre><code>    items=(127L, '\\xe6\\xb5\\x8b\\xe8\\xaf\\x95'), name=测试\n</code></pre>\n\n<p>But when I use webpy do the same things:</p>\n\n<pre><code>    db = web.database(dbn='mysql', host=\"127.0.0.1\", \n             user='test', pw='test', db='db_test', charset=\"utf8\")\n    eval_items=db.select('t_test')\n    comment=eval_items[0].name\n    print \"comment code=%s\"%repr(comment)\n    print \"comment=%s\"%comment.encode(\"utf8\")\n</code></pre>\n\n<p>Chinese garble occured, the print result is:</p>\n\n<pre><code>    comment code=u'\\xe6\\xb5\\u2039\\xe8\\xaf\\u2022'\n    comment=忙碌鈥姑€\n</code></pre>\n\n<p>I know webpy's database is also dependent on MySQLdb， but it's so different for these two way. Why?</p>\n\n<p>BTW, for the reason above, I can just use MySQLdb directly to solve my Chinese character garble problem, but it loses the clolumn name in table——It's so ungraceful. I want to know how can I solve it with webpy?</p>\n"},{"tags":["python","csv","syntax"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13281463,"title":"invalid python syntax in my 'for' loop","body":"<pre><code>def citypop():\n  import csv                                  \n  F = open(\"Top5000Population.txt\")           \n  csvF = csv.reader(F)\n  D = {}\n  with csvF for row in csvF:\n      city,state,population = row[0],row[1],row[2] \n      population = population.replace(',','') \n      population = int(population)\n      city = city.upper()[:12]\n      D[(city, state)] = population\n  return D\n</code></pre>\n\n<p>The function <code>citypop()</code> returns a dict with <code>(city,state)</code> as the key and the population of that city (in that state) as the value.</p>\n\n<p>I keep getting a syntax error .. am I not understanding the csv module correctly?</p>\n"},{"tags":["python","django","django-middleware"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":12,"score":0,"question_id":13281392,"title":"Django middleware is ImproperlyConfigured?","body":"<p>For some reason, I am getting an ImproperlyConfigured error on account of custom middleware.</p>\n\n<pre><code>[Wed Nov 07 20:47:07 2012] [error] [client 158.130.107.158] File does not exist: /home/davidxu/public_html/favicon.ico\n[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158] mod_wsgi (pid=24114): Exception occurred processing WSGI script '/home/davidxu/dev/Penn-Course-Review-api/api/django.wsgi'.\n[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158] Traceback (most recent call last):\n[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158]   File \"/usr/local/lib/python2.6/dist-packages/django/core/handlers/wsgi.py\", line 219, in __call__\n[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158]     self.load_middleware()\n[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158]   File \"/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py\", line 47, in load_middleware\n[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158]     raise exceptions.ImproperlyConfigured('Error importing middleware %s: \"%s\"' % (mw_module, e))\n[Wed Nov 07 20:47:09 2012] [error] [client 158.130.107.158] ImproperlyConfigured: Error importing middleware api.apiconsumer.authenticate: \"No module named api.apiconsumer.authenticate\"\n</code></pre>\n\n<p>For reference, here are the relevant parts of the <code>settings.py</code> file:</p>\n\n<pre><code>MIDDLEWARE_CLASSES = ( \n    'django.middleware.common.CommonMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.cache.UpdateCacheMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.cache.FetchFromCacheMiddleware',\n    'api.apiconsumer.authenticate.Authenticate',\n)\n\nINSTALLED_APPS = ( \n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    'django.contrib.messages',\n    'api.courses',\n    'api.apiconsumer',\n    # Uncomment the next line to enable the admin:\n    'django.contrib.admin',\n    'api.static_content',\n    'django_extensions', # used for debugging, remove if problematic\n    'django.contrib.staticfiles',\n    # Uncomment the next line to enable admin documentation:\n    # 'django.contrib.admindocs',\n)\n</code></pre>\n\n<p>And the <code>django.wsgi</code> file for what its worth. (Note, There is a lot of custom stuff in here.)</p>\n\n<pre><code>import os,sys\n\nPROJECT_PATH = os.path.realpath(os.path.dirname(__file__))\n\nsys.path.append(PROJECT_PATH)\n\n\nfrom sandbox_config import *\n\n#Uncomment these two lines to use virtualenv\n#activate_this = os.path.join(COURSESAPI_APP_ROOT, \"ENV/bin/activate_this.py\")\n#execfile(activate_this, dict(__file__=activate_this))\n\nsys.path.append(DEV_ROOT)\nsys.path.append(COURSESAPI_APP_ROOT)\n\nos.environ['DJANGO_SETTINGS_MODULE'] = 'settings'\n\nimport django.core.handlers.wsgi\napplication = django.core.handlers.wsgi.WSGIHandler()\n</code></pre>\n\n<p>Unfortunately, at this point I'm not really sure what to try. The error is extremely unhelpful.</p>\n\n<ul>\n<li>Deleting the line in question caused the next custom middleware to break the program, which makes me think it may be a path issue.</li>\n<li>Google doesn't seem to have much in the way of help.</li>\n</ul>\n\n<p>Any ideas what the issue may be and what's worth trying?</p>\n"},{"tags":["python","file","url","multiple"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13281450,"title":"Is it possible to open multiple URLs from a .txt and scrape all the webpages at once?","body":"<p>I can't understand how to deal with more than one URL. This is what I've tried so far, but it's only scraping the last URL from the list:</p>\n\n<pre><code>from twill.commands import *\nfrom bs4 import BeautifulSoup\nfrom urllib import urlopen\n\nwith open('urls.txt') as inf:\n    urls = (line.strip() for line in inf)\n    for url in urls:\n        line = url \n\nsite = urlopen(url)   \n\nsoup = BeautifulSoup(site)\n\nfor td in soup.find_all('td', {'class': 'subjectCell'}):\n    print td.find('a').text\n</code></pre>\n"},{"tags":["python","dictionary"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":31,"score":-2,"question_id":13281377,"title":"Python: Converting a dictionary value to a list","body":"<p>If I have <code>d = {\"key\": (5,4,\"val1\",\"val2\",2)}</code> How would I grab val1 out of the tuple and turn it into a list by itself?</p>\n"},{"tags":["python","django","eclipse","pinax"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13203315,"title":"What are the different options to install pinax(0.9a) inclusive requirements?","body":"<p>I tried the classical way with <code>pip install Pinax</code> and then install the requirements base.txt, but this does not work?</p>\n\n<p>What are other options to install a working pinax(0.9) base project inclusive requirements?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Thats the exception installing it the \"proper\" way...</p>\n\n<pre><code>Created project mysite\nInstalling project requirements...\nTraceback (most recent call last):\n  File \"C:\\Users\\Desktop\\Django\\lol\\mysite-env\\Scripts\\pinax-admin-script\n.py\", line 8, in &lt;module&gt;\n    load_entry_point('Pinax==0.9a2', 'console_scripts', 'pinax-admin')()\n  File \"C:\\Users\\Desktop\\Django\\lol\\mysite-env\\lib\\site-packages\\pinax\\co\nre\\management\\__init__.py\", line 105, in execute_from_command_line\n    runner.execute()\n  File \"C:\\Users\\Desktop\\Django\\lol\\mysite-env\\lib\\site-packages\\pinax\\co\nre\\management\\__init__.py\", line 94, in execute\n    self.loader.load(command).run_from_argv(argv)\n  File \"C:\\Users\\Desktop\\Django\\lol\\mysite-env\\lib\\site-packages\\pinax\\co\nre\\management\\base.py\", line 45, in run_from_argv\n    self.handle(*args, **options.__dict__)\n  File \"C:\\Users\\Desktop\\Django\\lol\\mysite-env\\lib\\site-packages\\pinax\\co\nre\\management\\commands\\setup_project.py\", line 66, in handle\n    self.setup_project(args[0], options[\"base\"], options)\n  File \"C:\\Users\\Desktop\\Django\\lol\\mysite-env\\lib\\site-packages\\pinax\\co\nre\\management\\commands\\setup_project.py\", line 134, in setup_project\n    installer.install_reqs(not options[\"allow_no_virtualenv\"])\n  File \"C:\\Users\\Desktop\\Django\\lol\\mysite-env\\lib\\site-packages\\pinax\\co\nre\\management\\commands\\setup_project.py\", line 207, in install_reqs\n    pip.call_subprocess([\nAttributeError: 'module' object has no attribute 'call_subprocess'\n</code></pre>\n"},{"tags":["python"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":67,"score":5,"question_id":13248020,"title":"what's the difference between 'r+' and 'a+' when open file in python","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1466000/python-open-built-in-function-difference-between-modes-a-a-w-w-and-r\">python open built-in function: difference between modes a, a+, w, w+, and r+?</a>  </p>\n</blockquote>\n\n\n\n<p>I have try <code>r+</code> and <code>a+</code> to open file and read and write, but 'r+' and 'a+' are all append the str to the end of the file.</p>\n\n<p>So, what's the difference between <code>r+</code> and <code>a+</code> ?</p>\n\n<hr>\n\n<p>Add:</p>\n\n<p>I have found the reason: </p>\n\n<p>I have read the file object and forgot to seek(0) to set the location to the begin</p>\n"},{"tags":["python","import","wildcard"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":13280916,"title":"Python: Import * only imports certain things from package?","body":"<p>I've got a package called elements that contains some stuff like button, trifader, poster. In the Button class, I am doing <code>from elements import *</code></p>\n\n<p>This executes OK, and when I try to <code>print(poster)</code>, also works OK and functions as expected. However, when I do <code>print(trifader)</code>, <code>NameError: name 'trifader' is not defined</code>. Even though trifader and poster are in the same package, poster is defined, but trifader isn't? How weird. Is there any explanation for this?</p>\n\n<p>The directory structure of the elements package is this:</p>\n\n<pre><code>Elements:\n  __init__.py\n  trifader.py\n  button.py\n  poster.py\n</code></pre>\n\n<p>Also, some other stuff that isn't really relevant.</p>\n\n<p>Each .py file contains a class with the name of the .py, for example, trifader.py has a class called TriFader.</p>\n"},{"tags":["python","linux","bash"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":13280528,"title":"Renaming sequential image files with gaps","body":"<p>I'm looking for a way to rename a list of image files with gaps to be sequential. Also I want to give them a padding of 4. I'm currently using Python 2.7 and Linux bash to program this.</p>\n\n<pre><code>    Example:\n\n    1.png\n    2.png\n    3.png\n    20.png\n    21.png\n    50.png\n</code></pre>\n\n<p>Should turn into:</p>\n\n<pre><code>    0001.png\n    0002.png\n    0003.png\n    0004.png\n    0005.png\n    0006.png\n</code></pre>\n\n<p>I also would like for the files name to be the same as the directory that they are currently in.</p>\n\n<pre><code>    Example:\n\n    c_users_johnny_desktop_images.0001.png\n    c_users_johnny_desktop_images.0002.png\n    c_users_johnny_desktop_images.0003.png\n    c_users_johnny_desktop_images.0004.png\n    c_users_johnny_desktop_images.0005.png\n    c_users_johnny_desktop_images.0006.png\n</code></pre>\n\n<p>Any help would be greatly appreciated! :)</p>\n\n<p>Cheers</p>\n"},{"tags":["python","kml"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":13280656,"title":"Having problems creating kmls with python","body":"<p>I am creating kml files using python and the simplekml creator.\nFor some reason it creates two kml files and will not create the third. Data seems fine to me. Here is the code:</p>\n\n<pre><code>times=open(\"E:\\\\Python\\Copyofresttable.csv\",\"r\")\nimport time\nimport csv\nimport simplekml\nfrom time import strftime, localtime\ndayoftheweekvariable = strftime(\"%A\", localtime())\nprint dayoftheweekvariable\nkml = simplekml.Kml()\n\n\nif dayoftheweekvariable == \"Monday\":\n     for line in times:\n        a = line.split(',')\n        if a[2] == \"Monday\":\n            print a[5]\n\nif dayoftheweekvariable == \"Tuesday\":\n     for line in times:\n        a = line.split(',')\n        if a[2] == \"Tuesday\":\n            print a[5]\n\nif dayoftheweekvariable == \"Wednesday\":\n    for line in times:\n        a = line.split(',')\n\n        if a[1]== \"Iron Hill\" and a[2] ==\"Wednesday\":\n            kml.newpoint(name=\"Iron Hill\", coords=[(-75.605507,39.960504)], description=a[5])\n            kml.save(\"pythonmap.kml\")\n            print \"Creating KML\"\n\n        if a[1]== \"Side Bar and Resturant\" and a[2] ==\"Wednesday\":\n            kml.newpoint(name=\"Side Bar and Resturant\", coords=[(-75.604805,39.960591)], description=a[5])\n            kml.save(\"pythonmap.kml\")\n            print \"Creating KML\"\n\n        if a[1]== \"Barnaby's\" and a[2] ==\"Wednesday\":\n            kml.newpoint(name=\"Barnaby's\", coords=[(-75.604049,39.959488)], description=a[5])\n            kml.save(\"pythonmap.kml\")\n            print \"Creating KML\"\n</code></pre>\n\n<p>obviously testing this out on Wednesday night...As for the last three if statements, no matter what order i put them in, it will create a kml for Iron Hill and Barnaby's but not side bar. this is the result it returns:</p>\n\n<pre><code>Wednesday\nCreating KML\nCreating KML\n\nTraceback (most recent call last):\n  File \"C:/Users/75IV740906/Desktop/py117\", line 26, in &lt;module&gt;\n    if a[1]== \"Iron Hill\" and a[2] ==\"Wednesday\":\nIndexError: list index out of range\n</code></pre>\n\n<p>the error message calls out what ever if statement is on top. Im stumped. Hope my question makes sense(why is it giving me this error message and only creating two kmls no matter what order the if statements are in)</p>\n"},{"tags":["python","xhtml","markdown","wiki","google-custom-search"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":6,"score":0,"question_id":13281345,"title":"Using Google Custom Search with markdoc wiki page","body":"<p>I am trying to use <a href=\"http://www.google.com/cse\" rel=\"nofollow\">google custom search</a> on my <a href=\"http://markdoc.org\" rel=\"nofollow\">markdoc</a> based wiki, but can't get it working, it gives the following error on chrome (the only browser that seems to work without problem is Opera):</p>\n\n<pre><code>This page contains the following errors:\n\nerror on line 38 at column 76: Namespace prefix gcse on search is not defined\n\nBelow is a rendering of the page up to the first error.\n</code></pre>\n\n<p>I've tried to use a div for declaring the element, but then the search doesn't work, my wiki is in <a href=\"http://wiki.daniloshiga.com\" rel=\"nofollow\">http://wiki.daniloshiga.com</a> and it's source code is on <a href=\"http://github.com/daneoshiga/wikishiga\" rel=\"nofollow\">github</a></p>\n\n<p>I've tried to change the output format from markdoc to html, converted the markdoc base template to html and still the same error occurs.</p>\n"},{"tags":["python","csv","pandas"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":8,"score":0,"question_id":13281305,"title":"reading sparse csv file into pandas","body":"<p>I have a space separated CSV file in following format:</p>\n\n<pre><code>2012-11-01 1 2012-12-01 4 2013-02-01 6\n2012-12-01 2 2013-01-01 nan\n2012-11-01 3 2012-12-01 5 2013-01-01 5 2013-04-01 7\n</code></pre>\n\n<p>basically dates followed by a value, but the dates are sparse. Some of the values are nan, or also could be missing. I would like to be able to read this into Pandas and line up the values based on the corresponding dates.</p>\n\n<p>Running Pandas:</p>\n\n<pre><code>import pandas as pd\npd.read_csv('sparse.csv', sep=\" \", parse_dates=True)\n</code></pre>\n\n<p>errors with:</p>\n\n<pre><code>ValueError: Expecting 6 columns, got 8 in row 1\n</code></pre>\n\n<p>What would be a way to read this file and align the date/values?</p>\n\n<p>(Is there some \"pre-processing\" I could do maybe?)</p>\n\n<p>Thanks</p>\n"},{"tags":["python","yaml","pyyaml"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":1,"view_count":18,"score":3,"question_id":13280978,"title":"pyYAML Errors on \"!\" in a string","body":"<p>First, a disclaimer: I'm not too familiar with YAML. I'm trying to parse a YAML doc into Key Value Pairs (don't worry about how I'm doing it. I've got that bit handled)</p>\n\n<p>My file used to look something like:</p>\n\n<pre><code>world:\n     people:\n          name:Suzy\n          address:chez-bob\n</code></pre>\n\n<p>Then, someone went and changed it.</p>\n\n<pre><code>world:\n     people:\n          name:!$uzy\n          address:chez-bob\n</code></pre>\n\n<p>And I get this parse error:</p>\n\n<pre><code>yaml.constructor.ConstructorError: could not determine a constructor for the tag '!$uzy'\n</code></pre>\n\n<p>What does this even mean? How would I go about getting it to just interpret !$ as just two characters?\nI just want a dictionary of string keys and values!\nAlso, editing the yaml files is not an option. Problem must be fixed in the code using the parser.</p>\n"},{"tags":["python","shell"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":18,"score":-1,"question_id":13281238,"title":"How to print a python function return value in shell?","body":"<pre><code>def hello():\n    return \"hello world\"\n</code></pre>\n\n<p>The above is my python code. In the shell I am entering:</p>\n\n<pre><code>fooshell=$(python -c 'import hello; hello.hello()')\n</code></pre>\n\n<p>but when I do </p>\n\n<pre><code>echo $fooshell\n</code></pre>\n\n<p>I am getting an empty line.</p>\n"},{"tags":["javascript","python","ruby","windows","lua"],"answer_count":12,"favorite_count":4,"up_vote_count":12,"down_vote_count":0,"view_count":1345,"score":12,"question_id":4756544,"title":"Which scripting language is better for embedding in multi-threaded C/C++ application","body":"<p>Considering the following requirementes:</p>\n\n<ul>\n<li>Must be supported on Windows.  Preferably works also on other platforms.</li>\n<li>Must support multi threading.  By that I mean that the engine can work in parallel in multiple threads.</li>\n<li>Readability is important.</li>\n<li>License must be compatible with closed-source projects.</li>\n</ul>\n\n<p>I like Python for its readablity.  I am also have more experience with Python than other scripting languages.  However CPython is not multi-threaded, and IronPython requires hosting the CLR and a compatible language (C++/CLI or C#). </p>\n"},{"tags":["python","file"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":7,"view_count":31,"score":-7,"question_id":13281240,"title":"Python how do I do this","body":"<p>Write a function, called censor(fileName) that takes, as input, the name of a file.  The function \nshould open the file, read it, and then write it into a file called censored.txt with this modification: Every occurrence of a four-letter word in the file should be replaced with the string XXXX.  For example, if the file \ncontains the phrase “the quick brown fox jumps over the lazy dog”, the file censored.txt should contain the \nphrase “the quick brown fox jumps XXXX the XXXX dog”.  (the Xs are capital letters).</p>\n"},{"tags":["python","command-line","py2exe","command-window"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13281034,"title":"How to prevent command window from closing when program finishes executing","body":"<p>I have made a small program in Python (.py) and converted it into a Windows executable file (.exe) using Py2exe. It asks for a string and outputs a string--very simple--and works perfectly in Python. </p>\n\n<p>The problem is when the .exe version finishes executing in the command window, it immediately closes, before I can even get a glimpse of its output :) (I assume it prints the output, because it works perfectly in Python).</p>\n\n<p>How can I prevent this? I presume I have to change my code, but what exactly do I have to add to it?</p>\n\n<p>Here is my code, in case it might help to see it (it's a word-wrapper):</p>\n\n<pre><code>import string\n\ndef insertNewlines(text, lineLength):\n    if text == '':\n        return ''\n    elif len(text) &lt;= lineLength:\n        return text\n    elif text[lineLength] == ' ':\n        return text[:lineLength] + '\\n' + insertNewlines(text[lineLength+1:], lineLength)\n    elif text[lineLength-1] == ' ':\n        return text[:lineLength] + '\\n' + insertNewlines(text[lineLength:], lineLength)\n    else:\n        if string.find(text, ' ', lineLength) == -1:\n            return text\n        else:\n            return text[:string.find(text,' ',lineLength)+1] + '\\n' + insertNewlines(text[string.find(text,' ',lineLength)+1:], lineLength)\n    print\n\nif __name__ == '__main__':\n    text = str(raw_input(\"Enter text to word-wrap: \"))\n    lineLength = int(raw_input(\"Enter number of characters per line: \"))\n    print \n    print insertNewlines(text, lineLength)\n</code></pre>\n\n<p>Thank you.</p>\n"},{"tags":["python"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":25,"score":-1,"question_id":13281107,"title":"KeyError: 'value'","body":"<p>I am running into the following error while trying to construct a HTML code form pythong,below is the shared the CR list and the python code..basically what I understand from teh error is there is no key value but I cannot figure out how to over come this...please advise</p>\n\n<p>SYNTAX ERROR:-</p>\n\n<pre><code>Title=CRlist[i][j],\nKeyError: 'value'\n\nCRlist:-\n[['CR', 'FA', 'CL', 'TITLE'], ['', '409452', 'WLAN', '656885\\tAge out RSSI values from buffer in Beacon miss scenario'], ['', '415560', 'WLAN', '656886\\tTo Record SMD Event Logging'], ['', '413064', 'wlan', '654661\\tTo Record HAL and SLM FW Event Logging'], ['', '379104', 'BT', '656928\\tCR379104: BT doesn\\xe2\\x80\\x99t work that Riva neither sends HCI Evt for HID ACL data nor response to HCI_INQUIRY after entering into pseudo sniff subrating mode.']]\n</code></pre>\n\n<p>Python code</p>\n\n<pre><code># Loop over all the components\ni = 1\nj = 0\n#print \"len(CRlist)\"\n#print len(CRlist)\nprint \"range(len(CRlist))\"\nprint range(len(CRlist))\nprint \"CRlist\"\nprint CRlist\n#print \"CRcount\"\n#print CRcount\nfor i in range(len(CRlist)):\n    print \"i\"\n    print i\n    for j in range(len(CRlist)):\n        print \"j\"\n        print j\n        if CRlist[i][j]:\n            CRstring += \"\"\"\n            &lt;tr&gt;\n            &lt;td&gt;&lt;a href=\"{CR}\"&gt;{CR}&lt;/a&gt;&lt;/td&gt;\n            &lt;td&gt;{FA}&lt;/td&gt;\n            &lt;td&gt;{CL}&gt;{value}&lt;/td&gt;\n            &lt;td&gt;{Title}&lt;/td&gt;\n            &lt;/tr&gt;\"\"\".format(\n                CR=CRlist[i][j],\n                FA=CRlist[i][j],\n                CL=CRlist[i][j],\n                Title=CRlist[i][j],\n                )\n\nCRstring += \"\\n&lt;/table&gt;\\n\"\n</code></pre>\n"},{"tags":["python","sockets","python-3.x","typeerror"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13274553,"title":"python 3.3 socket TypeError","body":"<p>I am trying to make a timestamp server and client. The client code is:</p>\n\n<pre><code>from socket import *\n\nHOST = '127.0.0.1' # or 'localhost'\nPORT = 21567\nBUFSIZ = 1024\nADDR = (HOST, PORT)\n\ntcpCliSock = socket(AF_INET, SOCK_STREAM)\ntcpCliSock.connect(ADDR)\n\nwhile True:\n    data = input('&gt; ')\n    if not data:\n        break\n    tcpCliSock.send(data)\n    data = tcpCliSock.recv(BUFSIZ)\n    if not data:\n        break\n    print(data.decode('utf-8'))\n\ntcpCliSock.close()\n</code></pre>\n\n<p>and the server code is:</p>\n\n<pre><code>from socket import *\nfrom time import ctime\n\nHOST = ''\nPORT = 21567\nBUFSIZ = 1024\nADDR = (HOST, PORT)\n\ntcpSerSock = socket(AF_INET, SOCK_STREAM)\ntcpSerSock.bind(ADDR)\ntcpSerSock.listen(5)\n\nwhile True:\n    print('waiting for connection...')\n    tcpCliSock, addr = tcpSerSock.accept()\n    print('connected from: ', addr)\n\n    while True:\n        data = tcpCliSock.recv(BUFSIZ)\n        if not data:\n            break\n        tcpCliSock.send('[%s] %s' % (bytes(ctime(), 'utf-8'), data))\n\n    tcpCliSock.close()\ntcpSerSock.close()\n</code></pre>\n\n<p>The server is working fine but when I send any data to the server from the client I get the following error:</p>\n\n<pre><code>File \"tsTclnt.py\", line 20, in &lt;module&gt;\n    tcpCliSock.send(data)\nTypeError: 'str' does not support the buffer interface \n</code></pre>\n"},{"tags":["python","subprocess","sigkill"],"answer_count":5,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":3189,"score":7,"question_id":1884941,"title":"Killing the child processes with the parent process","body":"<p>I have a program spawning and communicating with cpu heavy, unstable processes, not created by me. If my app crashes or is killed by sigkill, I want the subprocesses to get killed as well, so the user don´t have to track them down and kill them manually.</p>\n\n<p>I know this topic has been covered before, but I have tried all methods described, and none of them seams to live up to survive the test.</p>\n\n<p>I know it must be possible, since terminals do it all the time. If I run something in a terminal, and kill the terminal, the stuff always dies.</p>\n\n<p>I have tried atexit, double fork and ptys. atexit doenst work for sigkill; double fork doesnt work at all; and ptys I have found no way to work with using python.</p>\n\n<p>Today I found out about prctl(PR_SET_PDEATHSIG, SIGKILL), which should be a way for childprocesses to order a kill on themselves, when their parent dies.\nI tried to use it in python, with popen, but it seams to have no effect at all:</p>\n\n<pre><code>import ctypes, subprocess\nlibc = ctypes.CDLL('/lib/libc.so.6')\nPR_SET_PDEATHSIG = 1; TERM = 15\nimplant_bomb = lambda: libc.prctl(PR_SET_PDEATHSIG, TERM)\nsubprocess.Popen(['gnuchess'], preexec_fn=implant_bomb)\n</code></pre>\n\n<p>In the above the child is created and the parent exits. Now you would expect gnuchess to recieve a SIGKILL and die, but it doesnt. I can still find it in my process mamager using 100% cpu.</p>\n\n<p>Can anybody tell me if there is something wrong with my use of prctl?,\nor do you know how terminals manage to kill their children?</p>\n"},{"tags":["python","class","reference","import","module"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13281066,"title":"Python Import Visible Globally But Not Within Class","body":"<p>I am trying to import a pythom module to another (both in the same directory), however it is only visible globally and not within the class definition as this screencap shows:\n<img src=\"http://i.stack.imgur.com/tzOBx.png\" alt=\"enter image description here\"></p>\n\n<p>What could be wrong?</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","initialization","global-variables","pytables"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13280822,"title":"Python: Can i set global variables in a package __init__ module?","body":"<p>So i'm reading Alex Martelli's answer to <a href=\"http://stackoverflow.com/a/2361278/1658908\">other question</a>...</p>\n\n<blockquote>\n  <p>\"One example in which I may want initialization is when at package-load time I want to read in a bunch of data once and for all (from files, a DB, or the web, say) -- in which case it's much nicer to put that reading in a private function in the package's <strong>init</strong>.py rather than have a separate \"initialization module\" and redundantly import that module from every single real module in the package...\"</p>\n</blockquote>\n\n<p>Unfortunately, when i try this:</p>\n\n<h2><code>foo/__init__.py</code></h2>\n\n<pre><code>import tables as tb\nglobal foo\nfoo = tb.openFile('foo.h5', etc._)\nimport bar\n</code></pre>\n\n<h2><code>foo/bar/__init__.py</code></h2>\n\n<pre><code>import tables as tb\nglobal bar\nbar = foo.createGroup('/', bar)\nimport MyFunction`\n</code></pre>\n\n<h2><code>foo/bar/MyFunction.py</code></h2>\n\n<pre><code>def MyFunction(*of foo and bar*):\n   '...'\n</code></pre>\n\n\n\n<pre><code>&gt;&gt;&gt; import foo\n&gt;&gt;&gt; OUTPUT= foo.bar.MyFunction.MyFunction(INPUT)\n&gt;&gt;&gt; bar = foo.createGroup('/', bar)\nNameError: name 'foo' is not defined\n</code></pre>\n\n<p>How does one define global variables without putting them in a function (as seen <a href=\"http://stackoverflow.com/a/1084996/1658908\">here</a>)?</p>\n"},{"tags":["python","image-processing","pil"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":10,"score":1,"question_id":13280904,"title":"Python Image Matching. Find mxm image from nxn image","body":"<p>So my problem is a relatively simple one, but still quite hard for a Python rookie like me.\nSo I essentially have a number of shapes in an input image like a bunch of small triangles in a square or so. I need to extract the outer square and each triangle from within the image. I've developed a simple template matching code to do this... but it does not seem to work!</p>\n\n<pre><code>while ( len(numpy.where( b &lt;150 )[0])!=xx):\nxx=len(numpy.where( b &lt;150 )[0])\nfor v in range(len(b)-len(a)):\n    for w in range(len(b[0])-len(a[0])):\n        c=b[v:v+len(a[0]),w:w+len(a)]\n        c.flags.writeable=False\n        #c=b.reshape(len(a),len(a))\n        vv=sum(sum(c-a))\n        #print v, w\n        if(vv&lt;minval):\n            minval=vv\n            xcor=v\n            ycor=w\n\nprint xcor, ycor, minval\nprint len(numpy.where( b &lt;150 )[0])\nprint b[xcor:xcor+len(a),ycor:ycor+len(a[0])]\nfor p in range(xcor,xcor+len(a)):\n    for q in range(ycor,ycor+len(a[0])):\n        b.setflags(write=True)\n        b[p][q]=251;\n#print b[xcor:xcor+len(a),ycor:ycor+len(a[0])]\nxcorr=0\nycorr=0\nminval=99999\n</code></pre>\n\n<p>The problem is that I need to extract only a simple set of figures, but my code goes on and on... Also, I do not know how to handle the TRIANGLES IN A BOX problem. Can someone please help me out?</p>\n\n<p>By extract, I mean only find out just where the object is placed... if it is placed at all!</p>\n"},{"tags":["python","dictionary","multiprocessing","shortest-path"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13280899,"title":"Using multiprocessing to compute shortest path on a graph","body":"<p>I currently have a shortest path algorithm that receives as inputs the Graph and a Node of origin, and returns the costs for all nodes in the graph plus the tree (precedents for each node).\n   The graph is a dictionary, so are the costs AND the tree.</p>\n\n<p>Since I have to compute the shortest path trees with origins in all nodes, it is only natural to do it in parallel (as the trees are independent of each other).  </p>\n\n<p>I'm doing it with the use of a pool of workers using the multiprocessing and appending the results to a list (so I want a list of dictionaries). </p>\n\n<p>It runs without errors, but the interesting part is that the processing time does not change with the number of workers (NO CHANGE AT ALL).</p>\n\n<p>Any insight on why does that happen will be mostly appreciated.  Code follows below. </p>\n\n<pre><code>from LoadData import *\nfrom ShortestPathTree import shortestPath\nfrom time import clock, sleep\nfrom multiprocessing import Pool, Process, cpu_count, Queue\n\n\ndef funcao(G,i):\n    costs, pred=shortestPath(G,i)\n    return pred\n\n\ndef main():\n\n    #loads the graph\n    graph=\"graph.graph\"\n    G = load_graph(graph)\n\n    # loads the relevant nodes (CENTROIDS)\n    destinations=\"destinations.graph\"\n    DEST = load_relevant_nodes(destinations)\n\n    f = open('output_parallel.out','w')\n    start=clock()\n\n\n    pool=Pool()\n\n    resultados=[]\n    def adder(value):\n        resultados.append(value)\n\n\n    #for i in range(len(DEST)):\n    for i in range(486):\n        pool.apply_async(funcao, args=(G,DEST[i]), callback=adder)\n\n    pool.close()\n    pool.join()\n\n\n    print clock()-start\n    print &gt;&gt; f, resultados\n    print &gt;&gt; f, 'seconds: '+ str(clock()-start)\n</code></pre>\n"},{"tags":["python","string","lxml"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":13,"score":1,"question_id":13280660,"title":"parse nested html lists using lxml in python","body":"<p>I am trying to parse the elements of an html list which looks like this:</p>\n\n<pre><code>&lt;ol&gt;\n    &lt;li&gt;r1&lt;/li&gt;\n    &lt;li&gt;r2\n        &lt;ul&gt;\n            &lt;li&gt;n1&lt;/li&gt;\n            &lt;li&gt;n2&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/li&gt;\n    &lt;li&gt;r3\n        &lt;ul&gt;\n            &lt;li&gt;d1\n                &lt;ol&gt;\n                    &lt;li&gt;e1&lt;/li&gt;\n                    &lt;li&gt;e2&lt;/li&gt;\n                &lt;/ol&gt;\n            &lt;/li&gt;\n            &lt;li&gt;d2&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/li&gt;\n    &lt;li&gt;r4&lt;/li&gt;\n&lt;/ol&gt;\n</code></pre>\n\n<p>I am fine with parsing this for the most part, but the biggest problem for me is in getting the dom text back. Unfortunately lxml's node.text_content() returns the text form of the complete tree under it. Can I obtain the text content of just that element using lxml, or would I need to use string manipulation or regex for that?</p>\n\n<p>For eg: the node with d1 returns \"d1e1e2\", whereas, I want it to return just d1.</p>\n"},{"tags":["python","pandas"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":14,"score":2,"question_id":13279690,"title":"unexpected behavior when combining two dataframes in pandas","body":"<p>This may be a bug, but it may also be a subtlety of pandas that I'm missing. I'm combining two dataframes and the result's index isn't sorted. What's weird is that I've never seen a single instance of combine_first that failed to maintain the index sorted before.</p>\n\n\n\n<pre><code>&gt;&gt;&gt; a1\n                            X  Y\nDateTime                                    \n2012-11-06 16:00:11.477563      8        80\n2012-11-06 16:00:11.477563      8        63\n&gt;&gt;&gt; a2\n                        X  Y\nDateTime                                   \n2012-11-06 15:11:09.006507      1        37\n2012-11-06 15:11:09.006507      1        36\n&gt;&gt;&gt; a1.combine_first(a2)\n                            X  Y\nDateTime                                   \n2012-11-06 16:00:11.477563      8        80\n2012-11-06 16:00:11.477563      8        63\n2012-11-06 15:11:09.006507      1        37\n2012-11-06 15:11:09.006507      1        36\n&gt;&gt;&gt; a2.combine_first(a1)\n                            X  Y\nDateTime                                    \n2012-11-06 16:00:11.477563      8        80\n2012-11-06 16:00:11.477563      8        63\n2012-11-06 15:11:09.006507      1        37\n2012-11-06 15:11:09.006507      1        36\n</code></pre>\n\n<p>I can reproduce, so I'm happy to take suggestions. Guesses as to what's going on are most welcome.</p>\n"},{"tags":["python","time","precision"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":58,"score":3,"question_id":13280743,"title":"In Python, is time.time() * 1000 precise enough?","body":"<p>I want to capture timestamps with sub-second precision in python. It looks like the standard answer is <code>int(time.time() * 1000)</code></p>\n\n<p>However, if <code>time.time()</code> returns a float, won't you have precision problems? There will be some values that won't represent accurately as a float.</p>\n\n<p>I'm worried about some fractional times that don't represent correctly as a float, and the timestamp jumping forward or backward in those cases.</p>\n\n<p>Is that a valid concern?</p>\n\n<p>If so, what's the work-around?</p>\n"},{"tags":["python","string","list","combinations","vowel"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":13280357,"title":"Finding all combinations of vowel replacements","body":"<p>I am trying to find all possible combinations for all vowels in a word. So for example given 'hello':</p>\n\n<p><code>[halla, halle, halli, hallo, hallu, hella, halle, halli, hallo, hallu...]</code></p>\n\n<p>So far, I have written the following function which will just take each vowel, and at each vowel, it will just replace it all with the vowels and add each version into a list. I'm trying to change that into the permutation as I want but it's not working. I tried inserting vowels(\"\".join(string), arr) after the append but that results in infinite recursion.</p>\n\n<pre><code>def vowels(word, arr=None):\n    if arr is None:\n        a = []\n\n    for i, c in enumerate(word):\n        if c in 'aeiou':\n            for v in 'aeiou':\n                string = list(word)\n                string[i] = v\n                arr.append(\"\".join(string))\n    return arr\n</code></pre>\n\n<p>Anyone has any suggestions?</p>\n"},{"tags":["python","statistics","scipy","normal-distribution"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13279940,"title":"Scipy's normaltest Function Seems Inaccurate","body":"<p>Using <code>scipy.stats.norm</code> to generate a random sample, then running that through <code>scipy.stats.normaltest</code> produces wildly varying outputs:</p>\n\n<pre><code>from scipy.stats import norm, normaltest\n\nnormaltest(norm.rvs(size=1000))\n# (0.10435743048081543, 0.94915922246569517)\nnormaltest(norm.rvs(size=1000))\n# (0.57583529133190114, 0.74982334089826597)\nnormaltest(norm.rvs(size=1000))\n# (0.074086867327589984, 0.96363428027274967)\nnormaltest(norm.rvs(size=1000))\n# (2.0817923824843461, 0.35313806086602029)\nnormaltest(norm.rvs(size=1000))\n# (0.25177398640139054, 0.88171448088503002)\nnormaltest(norm.rvs(size=1000))\n# (2.5213062252950227, 0.2834688289515595)\nnormaltest(norm.rvs(size=1000))\n# (2.0550957310741165, 0.35788346385342579)\nnormaltest(norm.rvs(size=1000))\n# (4.5722298301301869, 0.10166065590209576)\nnormaltest(norm.rvs(size=1000))\n# (3.0060164141422421, 0.22245994699827343)\nnormaltest(norm.rvs(size=1000))\n# (1.8870291791486471, 0.38925734860089078)\nnormaltest(norm.rvs(size=1000))\n# (0.24931060262844901, 0.88280115054104014)\n</code></pre>\n\n<p>Only one of these has a p-value &lt; 0.05. This seems really broken. Am I missing something?</p>\n"},{"tags":["python","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":11,"score":1,"question_id":13275391,"title":"Tastypie - Filtering by related pk","body":"<p>I would like to filter a resource via a related field pk.</p>\n\n<p>For example, I have the country pk and I would like to get all cities from that country. How could I do that?</p>\n\n<pre><code>class CityResource(ModelResource):\n    class Meta:\n        queryset = City.objects.all()\n        resource_name = 'city'\n        fields = ['name','id']\n\n        filtering = {\n           #Something here\n        }\n\nclass CountryResource(ModelResource):\n    class Meta:\n        queryset = Country.objects.all()\n        resource_name = 'country'\n        fields = ['name','code2','id']\n</code></pre>\n\n<p>And a example URL:</p>\n\n<pre><code>http://startuprepublik.pre.is/api/v1/city/?format=json&amp;country__pk=4\n</code></pre>\n\n<p>Any idea?</p>\n"},{"tags":["python"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":67,"score":1,"question_id":13246941,"title":"String assignment","body":"<p>I have a look at python code where string variable assignments looks like:</p>\n\n<pre><code>var1 = var2[:]\n</code></pre>\n\n<p>I am just wondering what is the difference between:</p>\n\n<pre><code>var1 = var2\n</code></pre>\n\n<p>Here is my experiments:</p>\n\n<pre><code>&gt;&gt;&gt; original = \"some text\"\n&gt;&gt;&gt; copy1 = original\n&gt;&gt;&gt; copy2 = original[:]\n&gt;&gt;&gt; original = \"another text\"\n&gt;&gt;&gt; copy1\n'some text'\n&gt;&gt;&gt; copy2\n'some text'\n</code></pre>\n\n<p><strong>Updated:</strong></p>\n\n<p>Here is a full <a href=\"http://pastebin.com/CvTgkPz9\" rel=\"nofollow\">code</a>.  This code search a key for substitution cipher.\nIf I remove '[:]' this code will works very slowly.</p>\n"},{"tags":["python","list","python-2.7","list-comprehension"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":70,"score":2,"question_id":13274110,"title":"List comprehension optimization","body":"<p>I managed to convert 8 lines of code into just 2 lines.</p>\n\n<p>The first list comprehension gets me the folder and the second gets me the files of specific filter:</p>\n\n<pre><code>hideTheseFolders=[\".thumb\",\".mayaSwatches\",\"RECYCLER\",\"$AVG\"]\nfileFilters=[\"ma\",\"jpg\",\"png\",\"mb\",'iff','tga','tif']\nnewLst=[]\nimport os\nlocationTxt=\"E:\\box\\scripts\"\n[newLst.append(each) for each in os.listdir(locationTxt)  if os.path.isdir(os.path.join(locationTxt,each)) and each not in hideTheseFolders]\n[newLst.append(os.path.basename(os.path.join(locationTxt,each))) for nfile in fileFilters for each in os.listdir(locationTxt) if each.endswith(nfile)]\n</code></pre>\n\n<p>Now in the above code the last two lines are looking inside same directory from <code>locationTxt</code>, which means there is probably a way that I can merge the last two lines. Any suggestions?</p>\n"},{"tags":["python","command-line","documentation-generation"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13280468,"title":"Module for Python so that you can generate a free-standing, self-documenting command line utility ala Perl's pod2man/pod2usage?","body":"<p>All I can find is this reference:</p>\n\n<p><a href=\"http://stackoverflow.com/questions/12034512/is-it-possible-to-use-podplain-old-documentation-with-python\">is it possible to use POD(plain old documentation) with python?</a></p>\n\n<p>which looks like you have to generate a whole separate set of docs to go with code.</p>\n\n<p>I would like to try Python for making cmdline utils, but when I do this with Perl I can embed the docs directly in the source, and use the Pod2Usage module along with Getopt so that any of my scripts can be run like this:</p>\n\n<pre><code>cmd --man\n</code></pre>\n\n<p>and this triggers the pod system to dump documentation that is embedded in the script in man-page format. It can also generate shorter (synopsis), or medium formats.</p>\n\n<p>It looks like I could use the pydoc code and kind of reverse engineer it to sort-of do the task (at least showing the full documentation), but I am hoping something better already exists.</p>\n"},{"tags":["python","file","list","readline","reading"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13277695,"title":"Return the average number for the section in the open file python","body":"<p>i am given a a text file with 8 lines, and on each line there is an IDnumber, name, section and grade seperated by whitespace.  im supposed to return the average for the given section.  i am brand new to python therefore am having a horrible time trying to figure it out. can someone please help?\nmy parameters are a random textfile, and a section number </p>\n\n<p>def average_by_secion (textfile, section):</p>\n\n<pre><code>'''(io.TextIOWrapper, str) -&gt; flt or NoneType\n</code></pre>\n"},{"tags":["python","numpy","scipy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13280114,"title":"ValueError: setting an array element with a sequence. scipy minimize","body":"<pre><code>\"\"\" ___ \"\"\"\nfrom scipy.optimize import minimize\nimport numpy as np\n\n\nLENGTH = 100\n\ndef process(x):\n    return x * 2 + 5\n\ndef draw(process, length):\n    \"\"\" \"\"\"\n    y = np.random.normal(0, 10, length)\n    data = [process(y_) for y_ in y]\n    rnd = np.random.normal(3, 1, len(data))\n    return y, rnd + data\n\n\ndef maximum_likelyhood(y, X):\n    objective = lambda b: np.transpose(X) * (y - X * b)\n    x0 = np.zeros(100)\n    res =  minimize(objective, x0=x0)\n    return res.x\n\ny, X = draw(process, LENGTH)\nprint maximum_likelyhood(y, X)\n</code></pre>\n\n<p>produces a</p>\n\n<pre><code>ValueError: setting an array element with a sequence.\n</code></pre>\n\n<p>There is several similar problems, they all point out that x0 is not a 1D array, but here it is a 1D array. (or not? in case please explain why and how to make it 1D)</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13225692,"title":"Browse client side and server side files in Django/Python?","body":"<p>I have written a front end Django/Python application. It's like a syncing tool. Users can first browse the source and destination. Source is client's computer and destination is server's computer. The interface is similar to grsync. I need to implement it in the template(front-end application). How can I do this? Thanks</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I have this in my form.html(template for Django)</p>\n\n<pre><code>&lt;form&gt;\n&lt;p&gt;Session Name: &lt;input type=\"text\" name=\"session\"&gt;&lt;/p&gt;\n&lt;p&gt;Source: &lt;input type=\"text\" name=\"target\"&gt;&lt;input type=\"submit\" value=\"Open\"&gt;&lt;/p&gt;\n&lt;p&gt;Target: &lt;input type=\"text\" name=\"target\"&gt;&lt;input type=\"submit\" value=\"Open\"&gt;&lt;/p&gt;\n&lt;input type=\"submit\" value=\"Save\"&gt;\n&lt;input type=\"button\" name=\"Cancel\" value=\"Cancel\" onclick=\"window.location = 'form.html' \" /&gt;\n &lt;/form&gt;\n</code></pre>\n\n<p>Now when the user click on the open in the source the files and folders in the client's computer should be shown and when user press OK the path should be loaded in the Source field. </p>\n"},{"tags":["python","sql","query","sqlalchemy"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13271894,"title":"Interfacing with Sqlalchemy query object to extend, custom query types","body":"<p>I'm working on adding pagination functionality to my models. I could do this with a method in a mixin, I think I understand what pagination is in this context, but I'm looking to add queries so I can pass in pagination wherever I want without hard coding a model method and without a mixin e.g.:</p>\n\n<pre><code>Mymodel.query.filter(Mymodel.attr=='X').paginate(**args, **kwargs)\n</code></pre>\n\n<p>flask-sqlalchemy does this, but I'm not using that, though I've gone over it to attempt to extract some of the functionality.</p>\n\n<p>So if I have something like this method:</p>\n\n<pre><code>def paginate(self, page, per_page=20):\n        items = self.limit(per_page).offset((page - 1) * per_page).all()\n        return Pagination(self, page, per_page, self.count(), items)\n</code></pre>\n\n<p>How do I insert that as something with an interface in and out in the sqlalchemy query chain? I somewhat do and don't follow how it is being done in flask-sqlalchemy, but I want to extract/learn how to do this and more control over querying in the future, refine my use of sqlalchemy, so I do not exactly know where I'm going with it, just asking a question and going from there.</p>\n\n<p>Long answer: to keep reading the sqlalchemy docs and code until I achieve greater understanding. I'm looking to extend orm.Query -- which I've done, but I don't see how I can tie this into my project yet because I don't understand the underlying mechanics of sqlalchemy, but I think I just need to add my paginate query to the declarative base Base I'm using but will see once I get back to working on it. </p>\n"},{"tags":["python","real-time"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13171722,"title":"how to retrieve real time stock data using python","body":"<p>Is there any free api to use?</p>\n\n<p>How to achieve \"real time\"? Is there any API handles it, or our application need to handle it by ourselves?</p>\n\n<p>Update:\n\"Real time\" I mean live stream the stock price on a webpage without a refresh. Is that possible? </p>\n"},{"tags":["python","texture","blender","material"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13216732,"title":"Blender: Creating Material, Texture, and open image...","body":"<p>Well, in Blender, how can I create a new material, assign it to the current object, create an image texture and assign it and then open an image for it (and also open the image in the UV/Image Editor)? </p>\n"},{"tags":["python","optimization","factors","sieve"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13280198,"title":"Optimizing Divisor Sieve","body":"<p>I have two sieves that I wrote in python and would like help optimizing them if at all possible. The divisorSieve calculates the divisors of all numbers up to <code>n</code>. Each index of the list contains a list of its divisors. The numDivisorSieve just counts the number of divisors each index has but doesn't store the divisors themselves. These sieves work in a similar way as you would do a Sieve of Eratosthenes to calculate all prime numbers up to <code>n</code>.</p>\n\n<pre><code>def divisorSieve(n):\n    divs = [[1] for x in xrange(0, n + 1)]\n    divs[0] = [0]\n    for i in xrange(2, n + 1):\n        for j in xrange(1, n / i + 1):\n            divs[i * j] += [i]\n    return divs\n\n    def numDivisorSieve(n):\n        divs = [1] * (n + 1)\n        divs[0] = 0\n        for i in xrange(2, n + 1):\n            for j in xrange(1, n / i + 1):\n                divs[i * j] += 1\n        return divs\n\n#Timer test for function\nif __name__=='__main__':\n    from timeit import Timer\n    n = ...\n    t1 = Timer(lambda: divisorSieve(n))\n    print n, t1.timeit(number=1)\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code> -----n-----|--time(divSieve)--|--time(numDivSieve)--\n    100,000 |  0.452978167569  |  0.187762331281\n    200,000 |  0.98932170181   |  0.362314797537\n    300,000 |  1.6338203645    |  0.55124339118\n    400,000 |  2.17913634385   |  0.748340797412\n    500,000 |  2.84024755862   |  0.959312993718\n    600,000 |  3.46395907197   |  1.17777010636\n    700,000 |  4.11840766312   |  1.38268800149\n    800,000 |  4.77613733906   |  1.62560614543\n    900,000 |  5.4634148162    |  1.83002270324\n  1,000,000 |  6.11017136282   |  2.10247496423\n  2,000,000 | 13.0507389438    |  4.59150618897\n  3,000,000 | 20.6068050631    |  7.24799900479\n  4,000,000 | 28.3432841948    |  10.1484527586\n  5,000,000 | 36.4113970268    |  12.7670585308\n  6,000,000 | 44.4017867139    |  15.4226118057\n  7,000,000 | 52.4697580394    |  18.2902677738\n  8,000,000 | 61.4056966474    |  21.1247001928\n  9,000,000 | 69.7948510294    |  23.8988925173\n 10,000,000 | 78.639434285     |  26.8588813211\n 20,000,000 |      N/A         |  56.2527237669 (waited for a while but divisorSieve didn't finish)\n 30,000,000 |   MemoryError    |  86.8917332214\n 40,000,000 |   MemoryError    |  118.457179822\n 50,000,000 |   MemoryError    |  149.526622815\n 60,000,000 |   MemoryError    |  181.627320396\n 70,000,000 |   MemoryError    |  214.17467749\n 80,000,000 |   MemoryError    |  246.23677614\n 90,000,000 |   MemoryError    |  279.53308422\n100,000,000 |   MemoryError    |  314.813166014\n</code></pre>\n\n<p>Results are pretty good and I'm happy I was able to get it this far, but I'm looking to get it even faster. If at all possible, I'd like to get <em><strong>100,000,000</strong></em> at a reasonable speed with the divisorSieve. Although this also brings into the issue that anything over <em><strong>30,000,000+</strong></em> throws a <code>MemoryError</code> at <code>divs = [[1] for x in xrange(0, n + 1)]</code>) in divisorSieve. numDivisorSieve does allow the full <em><strong>100,000,000</strong></em> to run.</p>\n\n<p>I've tried replacing numDivisorSieve's <code>divs = [1] * (n + 1)</code> with both <code>divs = array.array('i', [1] * (n + 1))</code> and <code>divs = numpy.ones((n + 1), dtype='int')</code> but both resulted in a loss of speed (slight difference for array, much larger difference for numpy). I expect that since numDivisorSieve had a loss in efficiency, then so would divisorSieve. Of course there's always the chance I'm using one or both of these incorrectly since I'm not used to either of them.</p>\n\n<p>I would appreciate any help you can give me. I hope i have provided enough details. Thank you.</p>\n"},{"tags":["python","vim","command-line","vimrc"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":35,"score":3,"question_id":13279520,"title":"Automatically inserting a header in vim","body":"<p>Is there a way to auto add a header when i open a new file in vim?\nMy objective is to automatically add the shebang <code>\"#! /usr/bin/python\"</code> when i open a new file using the command <code>\"vim test.py\"</code>. If the file is already present, no header should be inserted. </p>\n"},{"tags":["python","class","pointers","for-loop","python-2.7"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13280056,"title":"passing an array of pointers to python class","body":"<p>I am new to python. I am familiar with C++. I would convert the flowing C++ code to python.</p>\n\n<pre><code>class School{\n    School(char *name, int id, Student* pointers){\n    {\n        this.name=name;\n        this.weapon=weapon;\n        this.students=pointers;\n    }\n    print(){\n        for(int i=0;i&lt;10;i++){\n            this.students.print();\n        }\n    }\n};\n</code></pre>\n\n<p>As you see I am trying to pass a pointer to an array of objects of type Student\nI am not sure if python allow me to pass pointers. This is what I did in python</p>\n\n<pre><code>class School():\n    def __init__(self, name, *students):\n        self.name=name\n        self.students=students\n\n    def display(self):\n        for student in self.students\n            student.display()\n</code></pre>\n"},{"tags":["python","stream","internet","audio-streaming","radio"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1209,"score":2,"question_id":4247248,"title":"Record streaming and saving internet radio in python","body":"<p>I am looking for a python snippit to read an internet radio stream(.asx, .pls etc) and save it to a file.</p>\n\n<p>The final project is cron'ed script that will record an hour or two of internet radio and then transfer it to my phone for playback during my commute. (3g is kind of spotty along my commute)</p>\n\n<p>any snippits or pointers are welcome.</p>\n\n<p>Thanks,</p>\n\n<p>Maze</p>\n"},{"tags":["javascript","python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13276086,"title":"Text Document, spreadsheet, Presentation editors in Django Python","body":"<p>I've been trying to research for awhile now and I am not getting anywhere so I decided to ask here.\nMy project is made in Django and I want to add Text Document, spreadsheet, Presentation editors to it (like google docs). I am not sure how to approach this problem. I am willing to even create these from scratch. But I am not sure where to start. Any book, links, API that I can begin with?</p>\n\n<p>I want something that lets people create and edit these documents on my website itself.</p>\n\n<p>Any help would be appreciated. </p>\n"},{"tags":["python","code-coverage","sonar"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":66,"score":1,"question_id":12844451,"title":"Test/Test Coverage with Python in Sonar not showing up?","body":"<p>I'm running a pretty simple set of python projects through sonar-runner and am having issues getting tests to show up.</p>\n\n<p>I'm running Sonar 3.2.1, with Python Plugin 1.1. The coverage report is generated previously.</p>\n\n<p>I have the following set:</p>\n\n<pre><code>sonar.dynamicAnalysis=reuseReports\nsonar.core.codeCoveragePlugin=cobertura\nsonar.python.coverage.reportPath=coverage.xml\n</code></pre>\n\n<p>No matter what I do at this point, the coverage does not show up.</p>\n\n<p>My tests are in the same folder as my sources... could that be the issue? Is there a requirement for how source code is laid out for the coverage report to get analayzed properly by sonar?</p>\n\n<p>Edit: Adding a few more notes...</p>\n\n<ul>\n<li>It is a multiproject python instance. I have three projects in there. Everything else seems to show up properly on the sonar report. I'v defined the base and source directories for each and the coverage.xml file has been pre-generated into the base directories of each.</li>\n<li><p>The coverage widget shows up but shows:</p>\n\n<pre><code>Code coverage\n-\nUnit test success\n0 tests\n</code></pre></li>\n<li><p>I'm also seeing when I run sonar-runner:</p>\n\n<pre><code>10:04:29.641 INFO  p.PhasesTimeProfiler - Sensor PythonCoverageSensor...\n10:04:29.642 INFO  .p.c.CoberturaParser - Parsing report '/home/jenkins/jobs/myproject/workspace/trunk/src/python/coverage.xml'\n10:04:29.883 INFO  p.PhasesTimeProfiler - Sensor PythonCoverageSensor done: 242 ms\n</code></pre></li>\n</ul>\n"},{"tags":["python"],"answer_count":3,"favorite_count":3,"up_vote_count":8,"down_vote_count":0,"view_count":89,"score":8,"question_id":13278864,"title":"comparing Python code for equivalence","body":"<p>Is there a reliable, automatic way (such as a command-line utility) to check if two Python files are <strong>equivalent</strong> modulo whitespace, semicolons, backslash continuations, comments, etc.? In other words, that they are identical to the interpreter?</p>\n\n<p>For example, this:</p>\n\n<pre><code>import sys\nsys.stdout.write('foo\\n')\nsys.stdout.write('bar\\n')\n</code></pre>\n\n<p>should be considered equivalent to this:</p>\n\n<pre><code>import   sys\nsys.stdout.\\\n    write('foo\\n'); sys.stdout.\\\n    write(\n\n    'bar\\n') # This is an unnecessary comment\n</code></pre>\n"},{"tags":["python","objective-c","cocoa"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":9,"score":1,"question_id":13279277,"title":"Apple Mail.app set HTML signature with plugin","body":"<p>I've created a Mail.app plugin with Python to set a custom signature pulled from a remote server by swizzling the setSignature: method in ComposeBackEnd. As per the class dump below, I can set a plain text signature by using setSignatureContents: and this is functional. </p>\n\n<pre><code>@interface Signature : NSObject &lt;NSCopying&gt;\n{\n    NSString *_uniqueId;\n    NSString *_name;\n    NSData *_webArchiveData;\n    BOOL _isRich;\n    BOOL _isSavedAsRich;\n    BOOL _isDirty;\n    MFSyncedFile *_syncedFile;\n}\n\n- (id)syncedFile;\n- (id)signaturePath;\n- (unsigned long long)hash;\n- (BOOL)isEqual:(id)arg1;\n- (BOOL)isRich;\n- (void)setIsRich:(BOOL)arg1;\n- (void)setWebArchive:(id)arg1;\n- (id)webArchive;\n- (id)webArchiveData;\n.....\n- (void)setSignatureContents:(id)arg1;\n- (id)signatureContents;\n- (void)setSignatureName:(id)arg1;\n- (id)signatureName;\n\n@end\n</code></pre>\n\n<p>However when I attempt to set an HTML signature using setWebArchive: (which should take an NSData object):</p>\n\n<pre><code>signature.setWebArchive_(NSData.dataWithContentsOfURL_(NSURL.URLWithString_('http://...')))\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>11/7/12 11:07:38.858 AM Mail[8820]: -[NSConcreteData data]: unrecognized selector sent to instance 0x7ffc2386bc00\n</code></pre>\n\n<p>(The remote file is already in the correct format)</p>\n\n<p>Is there any way to make this work? Thanks in advance.</p>\n\n<hr>\n\n<p>EDIT - tried this (returns WebArchive object which should respond to <code>-[data]</code>):</p>\n\n<pre><code>wds = WebDataSource.alloc().initWithRequest_(NSURLRequest.requestWithURL_(NSURL.URLWithString_('http://...')))\n        webarchive = wds.webArchive\n        signature.setWebArchive_(webarchive)\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>11/7/12 3:26:59.173 PM Mail[16814]: An uncaught exception was raised\n11/7/12 3:26:59.173 PM Mail[16814]: Class OC_PythonObject: no such selector: data\n</code></pre>\n"},{"tags":["python","multiprocessing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13279813,"title":"subprocess + multiprocessing - multiple commands in sequence","body":"<p>I have a set of command line tools that I'd like to run in parallel on a series of files.  I've written a python function to wrap them that looks something like this:</p>\n\n<pre><code>def process_file(fn):\n    print os.getpid()\n    cmd1 = \"echo \"+fn\n    p = subprocess.Popen(shlex.split(cmd1))\n\n    # after cmd1 finishes\n    other_python_function_to_do_something_to_file(fn)\n\n    cmd2 = \"echo \"+fn\n    p = subprocess.Popen(shlex.split(cmd2))\n    print \"finish\"\n\nif __name__==\"__main__\":\n    import multiprocessing\n    p = multiprocessing.Pool()\n    for fn in files:\n        RETURN = p.apply_async(process_file,args=(fn,),kwds={some_kwds})\n</code></pre>\n\n<p>While this works, it does not seem to be running multiple processes; it seems like it's just running in serial (I've tried using <code>Pool(5)</code> with the same result).  What am I missing?  Are the calls to <code>Popen</code> \"blocking\"?</p>\n\n<p>EDIT: Clarified a little.  I need cmd1, then some python command, then cmd2, to execute in sequence on each file.  </p>\n\n<p>EDIT2:  The output from the above has the pattern:</p>\n\n<pre><code>pid\nfinish\npid\nfinish\npid\nfinish\n</code></pre>\n\n<p>whereas a similar call, using <code>map</code> in place of <code>apply</code> (but without any provision for passing <code>kwds</code>) looks more like</p>\n\n<pre><code>pid\npid\npid\nfinish\nfinish\nfinish\n</code></pre>\n\n<p>However, the map call sometimes (always?) hangs after apparently succeeding</p>\n"},{"tags":["python","neo4j","py2neo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":11747643,"title":"py2Neo throwing py2neo.rest.NoResponse Exception","body":"<p>I am using py2neo for accessing neo4j database. I'm loading the graph from data in text file.</p>\n\n<p>Since my data-set has about a million nodes, it takes quite a long time for loading the entire data-set. Somewhere in between, the code throws py2neo.rest.NoResponse. I have tried running the code several times. It fails at different points. I don't see any patters in the errors. I mean I don't see any errors due to data in the file or it's not at the same point in file it fails. I know this from my log files. </p>\n\n<p>Error stack trace is as below:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\darshan.hegde\\workspace\\movie_lens_loader\\src\\load_movie_lens_data.py\", line 100, in &lt;module&gt;\n    main()\n  File \"C:\\Users\\darshan.hegde\\workspace\\movie_lens_loader\\src\\load_movie_lens_data.py\", line 97, in main\n    LMLD.load_ratings_data(ratings_file_path)\n  File \"C:\\Users\\darshan.hegde\\workspace\\movie_lens_loader\\src\\load_movie_lens_data.py\", line 71, in load_ratings_data\n    user_node.create_relationship_to(movie_node, \"rated\", {\"stars\": ratings.stars})\n  File \"C:\\Python26\\lib\\site-packages\\py2neo\\neo4j.py\", line 581, in create_relationship_to\n    'data': properties\n  File \"C:\\Python26\\lib\\site-packages\\py2neo\\rest.py\", line 252, in _post\n    return self._request('POST', uri, json.dumps(data), **kwargs)\n  File \"C:\\Python26\\lib\\site-packages\\py2neo\\rest.py\", line 240, in _request\n    raise NoResponse(uri)\npy2neo.rest.NoResponse: u'http://localhost:7474/db/data/node/16088/relationships'\n</code></pre>\n\n<p>Has anybody came across same error ? Please let me know the solution.</p>\n\n<p>I'm not sure if this information helps. I'm using the following versions: <em>Python-2.6.6</em> and <em>py2neo-1.2.15</em></p>\n"},{"tags":["python","layout","jinja2"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":29,"score":2,"question_id":13263010,"title":"jinja2: default layout","body":"<p>Suppose this is my code:</p>\n\n<pre><code>from jinja2 import Environment, PackageLoader\n\ndef render(path, **kwargs):\n  env = Environment()\n  env.loader = PackageLoader('lemma.app.views', '')\n  template = env.get_template(path)\n\n  return str(template.render(**kwargs))\n</code></pre>\n\n<p>And it is my template:</p>\n\n<pre><code>{% extends \"layouts/application.html\" %}\n\n{% block content %}\n  bla\n{% endblock %}\n</code></pre>\n\n<p>Is there way to set layout in my code, not in my template, or should I write <code>{% extends \"layouts/application.html\" %}</code> in every template like an idiot?</p>\n"},{"tags":["python","matplotlib","size","quality","contour"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13263126,"title":"Reduce the size of .eps figure made using matplotlib","body":"<p>Today I was doing a report for a course and I needed to include a figure of a contour plot of some field. I did this with matplotlib (ignore the chaotic header): </p>\n\n<pre><code>import numpy as np\nimport matplotlib\nfrom matplotlib import rc\nrc('font',**{'family':'sans-serif','sans-serif':['Helvetica']})\n## for Palatino and other serif fonts use:\n#rc('font',**{'family':'serif','serif':['Palatino']})\nrc('text', usetex=True)\nfrom matplotlib.mlab import griddata\nimport matplotlib.pyplot as plt\nimport numpy.ma as ma\nfrom numpy.random import uniform\nfrom matplotlib.colors import LogNorm\nfig = plt.figure()\ndata = np.genfromtxt('Isocurvas.txt')\nmatplotlib.rcParams['xtick.direction'] = 'out'\nmatplotlib.rcParams['ytick.direction'] = 'out'\nrc('text', usetex=True)\nrc('font', family='serif')\nx = data[:,0]\ny = data[:,1]\nz = data[:,2]\n# define grid.\nxi = np.linspace(0.02,1, 100)\nyi = np.linspace(0.02,1.3, 100)\n# grid the data.\nzi = griddata(x,y,z,xi,yi)\n# contour the gridded data.\nCS = plt.contour(xi,yi,zi,25,linewidths=0,colors='k')\nCS = plt.contourf(xi,yi,zi,25,cmap=plt.cm.jet)\nplt.colorbar() # draw colorbar\n# plot data points.\nplt.scatter(x,y,marker='o',c='b',s=0)\nplt.xlim(0.01,1)\nplt.ylim(0.01,1.3)\nplt.ylabel(r'$t$')\nplt.xlabel(r'$x$')\nplt.title(r' Contour de $\\rho(x,t)$')\nplt.savefig(\"Isocurvas.eps\", format=\"eps\")\nplt.show()\n</code></pre>\n\n<p>where \"Isocurvas.txt\" is a 3 column file, which I really don't want to touch (eliminate data, or something like that, wouldn't work for me). My problem was that the figure size was 1.8 Mb, which is too much for me. The figure itself was bigger than the whole rest of the report, and when I opened the pdf it wasn't very smooth . </p>\n\n<p>So , my question is : </p>\n\n<p>Are there any ways of reducing this size without a sacrifice on the quality of the figure?. I'm looking for any solution, not necessarily python related.</p>\n\n<p>This is the .png figure, with a slight variation on parameters. using .png you can see the pixels, which i don't like very much, so it is preferable pdf or eps. </p>\n\n<p><img src=\"http://i.stack.imgur.com/DuaPv.png\" alt=\"\">\nThank you.  </p>\n"},{"tags":["python","loops"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13280017,"title":"Python updating a loop","body":"<p>my program takes a mathematical input and checks it for errors before proceeding, here is the part of the code I need help with:</p>\n\n<pre><code>expression= introduction()#just asks user to input a math expression    \noperators= set(\"*/+-\")\nnumbers= set(\"0123456789\")\nfor i in expression:\n    while i not in numbers and i not in operators:\n        print(\"Please enter valid inputs, please try again.\")\n        expression= introduction()\n</code></pre>\n\n<p>Now I have set up an error loop but the problem I am having is that I don't know what to update the loop with in this scenario. Anyone?</p>\n"},{"tags":["python","root"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":33,"score":3,"question_id":13277004,"title":"Python Drop/Enable Root Privilege Opening File","body":"<p>I am running into an issue regard dropping root privileges when opening a file in /tmp. Here is the line in question:</p>\n\n<pre><code>open(filepath, 'wb')\n</code></pre>\n\n<p>When the program is not run with a sudo command everything works fine and here are the permissions when I so os.stat</p>\n\n<pre><code>posix.stat_result(st_mode=17407, st_ino=261652, st_dev=64512L, st_nlink=206, st_uid=1000, st_gid=1000, st_size=12288, st_atime=1352314677, st_mtime=1352316340, st_ctime=1352316340)\n</code></pre>\n\n<p>I run into an issue when the program is run with a sudo command. I try to drop privileges with the following</p>\n\n<pre><code>os.setegid(int(os.getenv(\"SUDO_GID\")))\nos.seteuid(int(os.getenv(\"SUDO_UID\")))\n</code></pre>\n\n<p>and reenable them with</p>\n\n<pre><code>os.seteuid(0)\nos.setegid(0)\n</code></pre>\n\n<p>The error message is</p>\n\n<pre><code>IOError: [Errno 13] Permission denied:\n</code></pre>\n\n<p>os.stat yields</p>\n\n<pre><code>posix.stat_result(st_mode=17407, st_ino=261652, st_dev=64512L, st_nlink=204, st_uid=1000, st_gid=1000, st_size=4096, st_atime=1352314677, st_mtime=1352316329, st_ctime=1352316329)\n</code></pre>\n\n<p>Ideally I'd like the run a particular function as if the user never called sudo by dropping and enabling root privileges accordingly.</p>\n"},{"tags":["java","android","python"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13280062,"title":"API for making a labirith game","body":"<p>we have to do a HCI testing for a vehicle control interface on Android.\nWe will have two interfaces to test, one where the user drives using  the phone as a steering wheel and accelerating and braking through the touchscreen, and another on which everything is using the touchscreen.</p>\n\n<p>We want to setup something like this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/1Fc6b.gif\" alt=\"enter image description here\"></p>\n\n<p>in whichever programing language just to get it up and running as fast as possible. So, the question is, please advise us which API to use to build the graphical elements of the track and have it controlled by the host keyboard (giving control to Android is something we know how to implement).</p>\n"},{"tags":["python","pythonmagick"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13276858,"title":"Installing PythonMagick","body":"<p>I cannot seem to find any instructions on how to install PythonMagick on a Mac. I've tried the instructions given on this link <a href=\"https://gist.github.com/2778301\" rel=\"nofollow\">https://gist.github.com/2778301</a>, but am getting following error:</p>\n\n<p>\"No package 'MagickCore' found\"</p>\n\n<p>Please help?</p>\n"},{"tags":["python","json","suds"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":251,"score":5,"question_id":7733180,"title":"Python SUDS return type other than XML","body":"<p>I am working with a somewhat non-standard SOAP webservice.  Most of the calls to the webservice return the standard SOAP XML as you would expect, but one call in particular returns a JSON string instead.  This fouls up the xml parser on the client side.</p>\n\n<p>My question is; is there a way to designate the return type on a particular webmethod in SUDS so that it does not try to run it through the xml parser?  I just want the raw JSON response.</p>\n"},{"tags":["python","django","heroku","beautifulsoup","virtualenv"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13279930,"title":"Beautiful soup on heroku?","body":"<p>I was trying to deploy an application using Beautiful soup on heroku and run a command like \"python manage.py \" . My command uses Beautiful soup library. Though the command works perfectly on my local machine but it couldn't find beautiful soup module on heroku. I tried to install it using pip install beautifulsoup, then adding it to requirements file and pushing the updates using git. But still it cannot find beautiful soup module. I know it is little specific and I am new to heroku, django. I am not sure how to debug it? Can anybody guide me in the right direction?</p>\n"},{"tags":["python","sockets"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":45,"score":-1,"question_id":13263426,"title":"Why does my server print endless \\n when a client disconnects?","body":"<p>I am in the process of creating a server but I have hit wall and can't seem to climb over it...</p>\n\n<p>The current code I have works very well until a user disconnects from the server. An endless amount of \\n are printed and I can not seem to figure out why.</p>\n\n<p>I do know that the problem lies in the recv function. I believe it has something to do with my threading but I just can not seem to figure out what it is.</p>\n\n<p>Here is the code, I would be very grateful if someone could help me out.</p>\n\n<pre><code>def recv(self, obj, addr, s):\n    while True:\n        try:print obj.recv(1024)\n        except:pass\n\ndef connect(self, port):\n    s = socket.socket()\n    s.bind(('', port))\n    s.listen(1)\n    self.clearscreen()\n\n    print \"Waiting for connections...\"\n    while True:\n        obj, addr = s.accept()\n        verify = obj.recv(1024)\n        if verify == \"ea25364e2dab91b40ae4f73163854b5d\":\n            print \"\\n\"+str(addr) + \" has connected.\\n \"\n            self.conns[addr] = obj\n            try:\n                Thread(target=self.handle, args=(obj, addr, s)).start()\n                Thread(target=self.recv, args=(obj, addr, s)).start()\n            except:pass\n        else:pass\n</code></pre>\n"},{"tags":["python","oauth","python-2.7","tornado"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13279576,"title":"Tornado OAuth with gmail hangs - connecting","body":"<p>I am trying to log in with gmail username and password using tornado. I have </p>\n\n<pre><code>class GoogleHandler(tornado.web.RequestHandler, GoogleMixin):\n    @tornado.web.asynchronous\n    def get(self):\n        print (\"GOOGLE MIXIN\")\n        if self.get_argument(\"openid.mode\", None):\n            print (\"GOOGLE MIXIN1\")\n            self.get_authenticated_user(self.async_callback(self._on_auth))\n            return\n        print (\"GOOGLE MIXIN2\")\n        self.authenticate_redirect()\n\n    def _on_auth(self, user):\n        print (\"GOOGLE MIXIN3\")\n        if not user:\n            print (\"GOOGLE MIXIN4\")\n            raise tornado.web.HTTPError(500, \"Google auth failed\")\n</code></pre>\n\n<p>and \ndefine(\"port\", default=8000, help=\"run on the given port\", type=int)   </p>\n\n<pre><code>if __name__ == \"__main__\":\n    tornado.options.parse_command_line()\n    app = tornado.web.Application(handlers = [(r\"/login\", authentication.GoogleHandler)])\n    http_server = tornado.httpserver.HTTPServer(app)\n    http_server.listen(options.port)\n    tornado.ioloop.IOLoop.instance().start()\n</code></pre>\n\n<p>and when I try to login with <strong>http://127.0.0.1:8000/login</strong> I got page to log in gmail and after that I got in console </p>\n\n<p>**GOOGLE MIXIN</p>\n\n<p>GOOGLE MIXIN2</p>\n\n<p>[I 121107 23:42:24 web:1359] 302 GET /login (127.0.0.1) 0.84ms</p>\n\n<p>GOOGLE MIXIN</p>\n\n<p>GOOGLE MIXIN1</p>\n\n<p>GOOGLE MIXIN3**</p>\n\n<p>but it hangs there and there is only <strong>Connecting...</strong> Did anyone have similar error, can somebody tell me what I done wrong here ? ( I cleared cookies and history from browser)</p>\n"},{"tags":["python","locale"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":12723906,"title":"locale.setlocale crashes when LC_PAPER=a4","body":"<p>I have a script, called test.py:</p>\n\n<pre><code>import locale\nlocale.setlocale(locale.LC_ALL, \"\")\n</code></pre>\n\n<p>If I call it, I get an exception:</p>\n\n<pre><code>misha@misha-lmd:~$ python test.py \nTraceback (most recent call last):\n  File \"test.py\", line 2, in &lt;module&gt;\n    locale.setlocale(locale.LC_ALL, \"\")\n  File \"/usr/lib/python2.7/locale.py\", line 539, in setlocale\n    return _setlocale(category, locale)\nlocale.Error: unsupported locale setting\n</code></pre>\n\n<p>Currently, I have <code>export LC_PAPER=a4</code> in my <code>.bashrc</code>.  If I unset the LC_PAPER environment variable, then it works:</p>\n\n<pre><code>misha@misha-lmd:~$ LC_PAPER= python test.py\n</code></pre>\n\n<p>Why is setlocale crashing?  I can't just unset LC_PAPER, since then my applications will print to US Letter by default, instead of A4.</p>\n"},{"tags":["python","django","heroku","rabbitmq","celery"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13275884,"title":"Django Celery Periodic Tasks Run But RabbitMQ Queues Aren't Consumed","body":"<h1>Question</h1>\n\n<p>After running tasks via celery's periodic task scheduler, beat, why do I have so many unconsumed queues remaining in RabbitMQ?</p>\n\n<h2>Setup</h2>\n\n<ul>\n<li>Django web app running on Heroku</li>\n<li>Tasks scheduled via celery beat</li>\n<li>Tasks run via celery worker</li>\n<li>Message broker is RabbitMQ from ClouldAMQP</li>\n</ul>\n\n<h3>Procfile</h3>\n\n<pre><code>web: gunicorn --workers=2 --worker-class=gevent --bind=0.0.0.0:$PORT project_name.wsgi:application\nscheduler: python manage.py celery worker --loglevel=ERROR -B -E --maxtasksperchild=1000\nworker: python manage.py celery worker -E --maxtasksperchild=1000 --loglevel=ERROR\n</code></pre>\n\n<h3>settings.py</h3>\n\n<pre><code>CELERYBEAT_SCHEDULE = {\n    'do_some_task': {\n        'task': 'project_name.apps.appname.tasks.some_task',\n        'schedule': datetime.timedelta(seconds=60 * 15),\n        'args': ''\n    },\n}\n</code></pre>\n\n<h3>tasks.py</h3>\n\n<pre><code>@celery.task\ndef some_task()\n    # Get some data from external resources\n    # Save that data to the database\n    # No return value specified\n</code></pre>\n\n<h2>Result</h2>\n\n<p>Every time the task runs, I get (via the RabbitMQ web interface):</p>\n\n<ul>\n<li>An additional message in the \"Ready\" state under my \"Queued Messages\"</li>\n<li>An additional queue with a single message in the \"ready\" state\n<ul>\n<li>This queue has no listed consumers</li>\n</ul></li>\n</ul>\n"},{"tags":["python","python-c-extension"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13279329,"title":"Python C extension - maintaining state","body":"<p>I need to write a Python extension in C that I will use to:<br></p>\n\n<ol>\n<li>perform CPU-intensive initialization on a file; <br></li>\n<li>make multiple function calls that rely on the initialized data to return results to me; and<br></li>\n<li>free memory when I'm done</li>\n</ol>\n\n<p>One solution is to implement a \"state holder\" class in Python. When I call the initialization in C, it returns me the initialized data that I will store in my Python state object. Then every time I need to do step (2), I would pass it to the C function. But this seems very inefficient with all the data shuttling/interfacing occurring between the Python side and the C side.</p>\n\n<p>If possible, I would like to maintain the state using a state object on the C side. The initialization call from the Python side would return not all the initialized data, but just an ID so it can reference the C state object when it needs to during subsequent calls.</p>\n\n<p><strong>How would I go about maintaining state on the C side?</strong></p>\n"},{"tags":["python","django","mod-wsgi"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":106,"score":4,"question_id":13151482,"title":"Why my Django project is being displayed in subdomain and localhost at the same time?","body":"<p>The thing is that I have a django project installed in a subdomain in localhost and at the same time I have the localhost for other stuff without Django.</p>\n\n<p>Whenever I access a1.localhost it displays my django welcome page ok, but when I want to access just localhost it also displays the same django welcome page instead of the index.html.</p>\n\n<p>So far this is what I have:</p>\n\n<pre><code>Hosts:\n127.0.0.1       localhost\n127.0.0.1       a1.localhost\n\nvhosts.conf:\n#-- a1.localhost\n&lt;VirtualHost *:80&gt;\n    ServerName a1.localhost\n    WSGIScriptAlias / \"C:/workspace/website1/apache/django.wsgi\"\n    &lt;Directory \"C:/workspace/website1/apache\"&gt;\n        Order allow,deny\n        Allow from all\n    &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n\n#-- localhost\n&lt;VirtualHost *:80&gt;\n    ServerName localhost\n    DocumentRoot \"C:/workspace/website1/django_project\"\n&lt;/VirtualHost&gt;\n\n\ndjango.wsgi\n\nimport os\nimport sys\n\npath = \"C:/workspace/website1/apache/django_project\"\nif path not in sys.path:\n    sys.path.append(path)\n\n\nos.environ['DJANGO_SETTINGS_MODULE'] = 'django_project.settings'\n\nimport django.core.handlers.wsgi\n</code></pre>\n\n<p>What I want to achieve is to display my normal index.html file in localhost and my django project in a1.localhost.</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","installation","install","virtualenv","pycairo"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":442,"score":2,"question_id":11491268,"title":"Install pycairo in virtualenv","body":"<p>I've tried to install <code>pycairo</code> in a virtualenv to use in a Django project. I've ran the <code>pip install pycairo==1.10.0</code> command which finds the package and downloads it unlike other commands like <code>pip install pycairo</code>, etc. but when starting to install the package it throws an error. </p>\n\n<p>Here's the log:</p>\n\n<pre><code>Downloading/unpacking pycairo==1.10.0\n  Running setup.py egg_info for package pycairo\n    Traceback (most recent call last):\n      File \"&lt;string&gt;\", line 14, in &lt;module&gt;\n    IOError: [Errno 2] No such file or directory:\n'/home/radu/Desktop/djangos/workout/venv/build/pycairo/setup.py'\nComplete output from command python setup.py egg_info:\nTraceback (most recent call last):\n\nFile \"&lt;string&gt;\", line 14, in &lt;module&gt;\n\nIOError: [Errno 2] No such file or directory:\n'/home/radu/Desktop/djangos/workout/venv/build/pycairo/setup.py'\n\n----------------------------------------\nCommand python setup.py egg_info failed with error code 1 in \n/home/radu/Desktop/djangos/workout/venv/build/pycairo\nStoring complete log in /home/radu/.pip/pip.log\n</code></pre>\n\n<p>Could you please give me any hints about what to do? Should I try and write a setup.py file for the package and then try to install it? (i'm not sure it's even a solution, i still am trying to figure out what I can do).</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["python","arrays","list","nested","sparse"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":44,"score":-2,"question_id":13278994,"title":"Weird issue with nested array assignment in Python","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/7924709/python-list-of-distinct-empty-sets\">Python: list of distinct, empty sets</a>  </p>\n</blockquote>\n\n\n\n<p>I need a list with a fixed length, but a variable number of elements (0 to 8) for each entry.</p>\n\n<p>When I append a number to one of those elements, this happens:</p>\n\n<pre><code>b = [[]]*3 # clarified\nb[2].append(1)\n\nexpected:\nb = [[],[],[1]]\n\nreality:\nb = [[1],[1],[1]]\n</code></pre>\n\n<p>I'm scripting in Python since three years now, but this (seemingly easy) problem has me stumped. It looks like a bug to me.</p>\n\n<p>Am I doing something wrong, and if yes, why is Python interpreting my [2] as [:]?</p>\n"},{"tags":["python","sockets"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13279577,"title":"Server prints endless newlines when client disconnects","body":"<p>I am in the process of creating a server but I have hit wall and can't seem to climb over it...</p>\n\n<p>The current code I have works very well until a user disconnects from the server. An endless amount of \\n are printed and I can not seem to figure out why.</p>\n\n<p>I do know that the problem lies in the recv function. I believe it has something to do with my threading but I just can not seem to figure out what it is.</p>\n\n<p>Here is the code, I would be very grateful if someone could help me out.</p>\n\n<pre><code>def recv(self, obj, addr, s):\n    while True:\n        try:print obj.recv(1024)\n        except:pass\n\ndef connect(self, port):\n    s = socket.socket()\n    s.bind(('', port))\n    s.listen(1)\n    self.clearscreen()\n\n    print \"Waiting for connections...\"\n    while True:\n        obj, addr = s.accept()\n        verify = obj.recv(1024)\n        if verify == \"ea25364e2dab91b40ae4f73163854b5d\":\n            print \"\\n\"+str(addr) + \" has connected.\\n \"\n            self.conns[addr] = obj\n            try:\n                Thread(target=self.handle, args=(obj, addr, s)).start()\n                Thread(target=self.recv, args=(obj, addr, s)).start()\n            except:pass\n        else:pass\n</code></pre>\n"},{"tags":["python","pygame","game-physics"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":28,"score":-1,"question_id":13279618,"title":"My pygame physics engine is kind of messed up (specifically gravity (I think)). I need help to fix it","body":"<p>The main explanation is in this youtube video <a href=\"http://www.youtube.com/watch?v=eGD2i0RG9Y8&amp;feature=youtu.be\" rel=\"nofollow\">http://www.youtube.com/watch?v=eGD2i0RG9Y8&amp;feature=youtu.be</a></p>\n\n<p>Code at pastebin (<a href=\"http://pastebin.com/cdEhwMi3\" rel=\"nofollow\">Board</a>, <a href=\"http://pastebin.com/Xc8VWTnL\" rel=\"nofollow\">physicsEngine</a>, <a href=\"http://pastebin.com/sY8hZc5e\" rel=\"nofollow\">redSquare</a>). <a href=\"http://www.mediafire.com/?kqqwgt91siosl\" rel=\"nofollow\">Download</a> of .py files (I promise they won't eat your computer)</p>\n\n<p>Also, a few other, side questions I didnt feel needed their own topic (please dont close the topic for this!)\nHow to I do pygame collision detection with two rectangles?\n..That's it, really</p>\n\n<p>-Thanks!!</p>\n"},{"tags":["python","oop","class","static"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13279510,"title":"Python - Accessing subclasses' variables from parent class while calling classmethods","body":"<p>i'm trying to build sort of a \"mini django model\" for working with Django and MongoDB without using the norel Django's dist (i don't need ORM access for these...).</p>\n\n<p>So, what i'm trying to do is to mimic the standart behavior or \"implementation\" of default models of django... that's what i've got so far:</p>\n\n<p>File \"models.py\" (the base)</p>\n\n<pre><code>from django.conf import settings\nimport pymongo\n\nclass Model(object):\n    @classmethod\n    def db(cls):\n        db = pymongo.Connection(settings.MONGODB_CONF['host'], settings.MONGODB_CONF['port'])\n\n    @classmethod\n    class objects(object):\n        @classmethod\n        def all(cls):\n            db = Model.db() #Not using yet... not even sure if that's the best way to do it\n            print Model.collection\n</code></pre>\n\n<p>File \"mongomodels.py\" (the implementation)</p>\n\n<pre><code>from mongodb import models\n\nclass ModelTest1(models.Model):\n    database = 'mymongodb'\n    collection = 'mymongocollection1'\n\nclass ModelTest2(models.Model):\n    database = 'mymongodb'\n    collection = 'mymongocollection2'\n</code></pre>\n\n<p>File \"views.py\" (the view)</p>\n\n<pre><code>from mongomodels import ModelTest1, ModelTest2\n\nprint ModelTest1.objects.all() #Should print 'mymongocollection1'\nprint ModelTest2.objects.all() #Should print 'mymongocollection2'\n</code></pre>\n\n<p>The problem is that it's not accessing the variables from ModelTest1, but from the original Model... what's wrong??</p>\n"},{"tags":["python","variables","request","flask"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13279399,"title":"How to obtain values of request variables using Python and Flask","body":"<p>I've never used Python before, or Flask, so I'm wondering how to go about obtaining the value of a POST/GET request variable using Python w/ Flask.</p>\n\n<p>With Ruby, I'd do something like this:</p>\n\n<pre><code>variable_name = params[\"FormFieldValue\"]\n</code></pre>\n\n<p>How would I do this w/ Python / Flask?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["python","django"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13278872,"title":"Python import similar to Django settings file","body":"<p>I am trying to use a *.py file to take variables from and use them across multiple imports in my python application, similar to how a Django settings file works.</p>\n\n<p>An example settings file:</p>\n\n<pre><code>DB_NAME = 'foo'\nDB_TABLE = 'bar'\n#Lots of other variable names and values here\n</code></pre>\n\n<p>The benefit is that I can load different settings very quickly this way. I can reference a sort of global \"DB_NAME\" wherever I want without having specific objects to deal with.</p>\n\n<p>The drawback is that I have to change the import statement in every file that has to import them. </p>\n\n<p>Can I set it up so that I import the file once and then reference a generic import to get all of these values?</p>\n\n<p>Or is there a much better way to do this?</p>\n\n<p>Any help is appreciated.</p>\n\n<p>EDIT: The problem stems from having multiple settings files. I would have to import settings.py for one file, or if I want a different settings file, I would need to change all the import statements to reference test_settings.py, etc..</p>\n\n<p>I don't want to manually change the import locations in order to change what is imported across the entire application.</p>\n"},{"tags":["python"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13265138,"title":"Add a semi colon to the previous line","body":"<p>I have a file like this note gap represent new lines.</p>\n\n<pre><code>Hello World )\n    ;\n\nHello World ) ;\n\nHello World )\n;\n</code></pre>\n\n<p>I have written a small python script to move the semicolon to the end of previous line</p>\n\n<pre><code>with open(path) as f:\n    prev_line =''\n    for current_line in f:\n        matched = re.match('[^(.+)];',current_line,re.MULTILINE)\n        if matched is not None:\n            current_line = re.sub('[^(.+)];','',current_line,re.MULTILINE)\n            prev_line = re.sub(r'^(.+)$',r'\\1 ;',prev_line,re.MULTILINE)\n        print prev_line.strip()\n        prev_line = current_line.strip()\n</code></pre>\n\n<p>I am getting the expected out put except for the last line where the semicolon is missing</p>\n\n<pre><code>Hello World ) ;\n\n\n\n\n\nHello World ) ;\n\n\n\nHello World ) **semicolon is missing here**\n</code></pre>\n"},{"tags":["python","map","multiprocessing","ctypes"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":350,"score":1,"question_id":9856196,"title":"Sharing a variable between processes","body":"<p>I have a downloader function that downloads multiple files parallely.\nI use <code>multiprocessing.Pool.map_async</code> in order to download different chunks of the same file.\nI would like to show a statusbar of the download. For this, I need to know the total bytes that has been already downloaded (<code>total_bytes_dl</code>).</p>\n\n<pre><code>    pool = multiprocessing.Pool(processes)\n    mapObj = pool.map_async(f, args)\n\n    while not mapObj.ready():\n        status = r\"%.2f MB / %.2f MB\" % (total_bytes_dl / 1024.0 / 1024.0, filesize / 1024.0 / 1024.0,)\n        status = status + chr(8)*(len(status)+1)\n        print status,\n        time.sleep(0.5)\n</code></pre>\n\n<p>Is there a way to set a variable that will be shared among all these processes AND the main process, so every process can append the amount of bytes that has just downloaded?</p>\n"},{"tags":["python","html","templates"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":13279364,"title":"Convert HTML to plain text and keep basic formatting","body":"<p>I am looking for a way to convert HTML formatted text to plain text while maintaining its basic structure, and perhaps be slightly tweaked, so:</p>\n\n<pre><code>&lt;p&gt;This is a paragraph.&lt;/p&gt;\n&lt;ol&gt;\n  &lt;li&gt;List item 1.&lt;/li&gt;\n  &lt;li&gt;List item 2.&lt;/li&gt;\n&lt;/ol&gt;\n&lt;p&gt;This is an &lt;a href=\"www.google.com\"&gt;anchor&lt;/a&gt;.&lt;/p&gt;\n</code></pre>\n\n<p>Becomes:</p>\n\n<blockquote>\n  <p>This is a paragraph.</p>\n  \n  <ul>\n  <li>List item 1.</li>\n  <li>List item 2.</li>\n  </ul>\n  \n  <p>This is an anchor (www.google.com).</p>\n</blockquote>\n\n<p>Any ideas on how to effectively achieve for a very large number of HTML-formatted templates?</p>\n\n<ul>\n<li>Note that the most important part outside of the structure is keeping the anchors.</li>\n</ul>\n"},{"tags":["python","class","instance"],"answer_count":3,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":14625,"score":7,"question_id":1593632,"title":"Python: Get name of instantiating class?","body":"<p>Example:</p>\n\n<pre><code>class Class1:\n    def __init__(self):\n        self.x = Class2('Woo!')\n\nclass Class2:\n    def __init__(self, word):\n        print word\n\nmeow = Class1()\n</code></pre>\n\n<p>How do I derive the class name that created the self.x instance? In other words, if I was given the instance self.x, how do I get the name 'Class1'? Using <code>self.x.__class__.__name__</code> will obviously only give you the Class2 name. Is this even possible? Thanks.</p>\n"},{"tags":["python","osx","python-3.x","python-2.7","python-module"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":47,"score":0,"question_id":13278186,"title":"problems installing matplotlib for Python -- or, how else to graph in Python?","body":"<p>I currently have Python2.7, and Python3.3 installed on a Mac. I am trying to install matplotlib so that I can create candlestick, and line graphs. I have tried multiple methods of installing matplotlib, but they are all failing. For example:</p>\n\n<pre><code>port install py27-matplotlib\nNo broken files found.\nMacBook$ python2.7\nPython 2.7.1 (r271:86832, Jul 31 2011, 19:30:53) \n&gt;&gt;&gt; import matplotlib\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: No module named matplotlib\n</code></pre>\n\n<p>attempts at source builds off matplotlib-1.1.1 lead to C header errors.</p>\n\n<p>The parent problem that I am trying to solve is to create candlestick, and line plots. Is there another library better suited to this maybe?</p>\n"},{"tags":["python","subprocess"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13243523,"title":"Using python subprocess to fake running a cmd from a terminal","body":"<p>We have a vendor-supplied python tool ( that's byte-compiled, we don't have the source ).  Because of this, we're also locked into using the vendor supplied python 2.4. The way to the util is:</p>\n\n<pre><code>source login.sh\noupload [options]\n</code></pre>\n\n<p>The login.sh just sets a few env variables, and then 2 aliases:</p>\n\n<pre><code>odownload () {\n${PYTHON_CMD} ${OCLIPATH}/ocli/commands/word_download_command.pyc \"$@\"\n}\noupload () {\n${PYTHON_CMD} ${OCLIPATH}/ocli/commands/word_upload_command.pyc \"$@\"\n}\n</code></pre>\n\n<p>Now, when I run it their way - works fine.  It will prompt for a username and password, then do it's thing.</p>\n\n<p>I'm trying to create a wrapper around the tool to do some extra steps after it's run and provide some sane defaults for the utility.  The problem I'm running into is I cannot, for the life of me, figure out how to use subprocess to successfully do this.  It seems to realize that the original command isn't running directly from the terminal and bails.</p>\n\n<p>I created a '/usr/local/bin/oupload' and copied from the original login.sh.  Only difference is instead of doing an alias at the end, I actually run the command.</p>\n\n<p>Then, in my python script, I try to run my new shell script:</p>\n\n<pre><code>if os.path.exists(options.zipfile):\n    try:\n        cmd = string.join(cmdargs,' ')\n        p1 = Popen(cmd, shell=True, stdin=PIPE)\n</code></pre>\n\n<p>But I get:</p>\n\n<pre><code>Enter Opsware Username: Traceback (most recent call last):\nFile \"./command.py\", line 31, in main\nFile \"./controller.py\", line 51, in handle\nFile \"./controllers/word_upload_controller.py\", line 81, in _handle\nFile \"./controller.py\", line 66, in _determineNew\nFile \"./lib/util.py\", line 83, in determineNew\nFile \"./lib/util.py\", line 112, in getAuth\nEmpty Username not legal\n\nUnknown Error Encountered                                              \n\nSUMMARY:\nName: Empty Username not legal\nDescription: None\n</code></pre>\n\n<p>So it seemed like an extra carriage return was getting sent ( I tried rstripping all the options, didn't help ).</p>\n\n<p>If I don't set stdin=PIPE, I get:</p>\n\n<pre><code>Enter Opsware Username: Traceback (most recent call last):\nFile \"./command.py\", line 31, in main\nFile \"./controller.py\", line 51, in handle\nFile \"./controllers/word_upload_controller.py\", line 81, in _handle\nFile \"./controller.py\", line 66, in _determineNew\nFile \"./lib/util.py\", line 83, in determineNew\nFile \"./lib/util.py\", line 109, in getAuth\nIOError: [Errno 5] Input/output error\n\nUnknown Error Encountered                                              \n</code></pre>\n\n<p>I've tried other variations of using p1.communicate, p1.stdin.write() along with shell=False and shell=True, but I've had no luck in trying to figure out how to properly send along the username and password.  As a last result, I tried looking at the byte code for the utility they provided - it didn't help - once I called the util's main routine with the proper arguments, it ended up core dumping w/ thread errors.</p>\n\n<p>Final thoughts - the utility doesn't want to seem to 'wait' for any input.  When run from the shell, it pauses at the 'Username' prompt.  When run through python's popen, it just blazes thru and ends, assuming no password was given.  I tried to lookup ways of maybe preloading the stdin buffer - thinking maybe the process would read from that if it was available, but couldn't figure out if that was possible.</p>\n\n<p>I'm trying to stay away from using pexpect, mainly because we have to use the vendor's provided python 2.4 because of the precompiled libraries they provide and I'm trying to keep distribution of the script to as minimal a footprint as possible - if I have to, I have to, but I'd rather not use it ( and I honestly have no idea if it works in this situation either ).</p>\n\n<p>Any thoughts on what else I could try would be most appreciated.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>So I solved this by diving further into the bytecode and figuring out what I was missing from the compiled command.</p>\n\n<p>However, this presented two problems - </p>\n\n<ol>\n<li>The vendor code, when called, was doing an exit when it completed</li>\n<li>The vendor code was writing to stdout, which I needed to store and operate on ( it contains the ID of the uploaded pkg ).  I couldn't just redirect stdout, because the vendor code was still asking for the username/password.</li>\n</ol>\n\n<p>1 was solved easy enough by wrapping their code in a try/except clause.</p>\n\n<p>2 was solved by doing something similar to: <a href=\"http://stackoverflow.com/a/616672/677373\">http://stackoverflow.com/a/616672/677373</a></p>\n\n<p>Instead of a log file, I used cStringIO.  I also had to implement a fake 'flush' method, since it seems the vendor code was calling that and complaining that the new obj I had provided for stdout didn't supply it - code ends up looking like:</p>\n\n<pre><code>class Logger(object):\n    def __init__(self):\n        self.terminal = sys.stdout\n        self.log = StringIO()\n\n    def write(self, message):\n        self.terminal.write(message)\n        self.log.write(message)\n\n    def flush(self):\n        self.terminal.flush()\n        self.log.flush()\n\nif os.path.exists(options.zipfile):\n    try:\n        os.environ['OCLI_CODESET'] = 'ISO-8859-1'\n        backup = sys.stdout\n        sys.stdout = output = Logger()\n        # UploadCommand was the command found in the bytecode\n        upload = UploadCommand()\n        try:\n            upload.main(cmdargs)\n        except Exception, rc:\n            pass\n        sys.stdout = backup\n        # now do some fancy stuff with output from output.log\n</code></pre>\n\n<p>I should note that the only reason I simply do a 'pass' in the except: clause is that the except clause is <em>always</em> called.  The 'rc' is actually the return code from the command, so I will probably add handling for non-zero cases.</p>\n"},{"tags":["python","curl","pycurl"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13279375,"title":"Assertion failed in pycurl when trying to get image from web","body":"<p>I'm trying to get an image from a site with this code:  </p>\n\n<pre><code>image=\"http://the.site.com/view/ashx/Handler.ashx?Command=Avatar&amp;TC=TQB\"\ncurlobj = pycurl.Curl()\ncurlobj.setopt(pycurl.COOKIEFILE, '')\ncurlobj.setopt(pycurl.CONNECTTIMEOUT, 30)\ncurlobj.setopt(pycurl.TIMEOUT, 30)\ncurlobj.setopt(pycurl.FAILONERROR, True)\ncurlobj.setopt(pycurl.FOLLOWLOCATION, 1)\ncurlobj.setopt(pycurl.MAXREDIRS, 5)\nimgf = open(\"logo.jpg\", \"wb\")\ncurlobj.setopt(pycurl.URL, image)\ncurlobj.setopt(pycurl.WRITEDATA, imgf)\ncurlobj.perform()\nimgf.close()\ncurlobj.close()\n</code></pre>\n\n<p>But it gives:  </p>\n\n<pre><code>python2`.6: src/pycurl.c:272: get_thread_state: Assertion `self-&gt;ob_type == p_Curl_Type' failed.`\n</code></pre>\n\n<p>What is the problem?  </p>\n\n<p>Thanks</p>\n"},{"tags":["python","function","introspection"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":265,"score":1,"question_id":7142062,"title":"Get function name as a string in python","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/245304/how-do-i-get-the-name-of-a-function-or-method-from-within-a-python-function-or-m\">How do I get the name of a function or method from within a Python function or method?</a><br>\n  <a href=\"http://stackoverflow.com/questions/251464/how-to-get-the-function-name-as-string-in-python\">How to get the function name as string in Python?</a>  </p>\n</blockquote>\n\n\n\n<p>I have a function named <strong>func</strong>, I'd like to be able to get the functions name as a string. </p>\n\n<p>pseudo-python :</p>\n\n<pre><code>def func () :\n    pass\n\nprint name(func)\n</code></pre>\n\n<p>This would print 'func'.</p>\n"},{"tags":["python","startswith"],"answer_count":5,"favorite_count":0,"up_vote_count":24,"down_vote_count":0,"view_count":358,"score":24,"question_id":13270888,"title":"Why is startswith slower than slicing","body":"<p>Why is the implementation of <a href=\"http://docs.python.org/2/library/stdtypes.html#str.startswith\" rel=\"nofollow\"><code>startwith</code></a> slower than slicing?</p>\n\n<pre><code>In [1]: x = 'foobar'\n\nIn [2]: y = 'foo'\n\nIn [3]: %timeit x.startswith(y)\n1000000 loops, best of 3: 321 ns per loop\n\nIn [4]: %timeit x[:3] == y\n10000000 loops, best of 3: 164 ns per loop\n</code></pre>\n\n<p>Surprisingly, even including calculation for the length, slicing still appears significantly faster:</p>\n\n<pre><code>In [5]: %timeit x[:len(y)] == y\n1000000 loops, best of 3: 251 ns per loop\n</code></pre>\n\n<p><em>Note: the first part of this behaviour is noted in <a href=\"http://shop.oreilly.com/product/0636920023784.do\" rel=\"nofollow\"><strong>Python for Data Analysis</strong></a> (Chapter 3), but no explanation for it is offered.</em></p>\n\n<p>.</p>\n\n<p>If helpful: <a href=\"http://hg.python.org/cpython/file/4ebe1ede981e/Objects/stringobject.c#l2903\" rel=\"nofollow\">here is the C code for <code>startswith</code></a>; and here is the output of <a href=\"http://stackoverflow.com/questions/12673074/how-should-i-understand-the-output-of-dis-dis\"><code>dis.dis</code></a>: </p>\n\n<pre><code>In [6]: import dis\n\nIn [7]: dis_it = lambda x: dis.dis(compile(x, '&lt;none&gt;', 'eval'))\n\nIn [8]: dis_it('x[:3]==y')\n  1           0 LOAD_NAME                0 (x)\n              3 LOAD_CONST               0 (3)\n              6 SLICE+2             \n              7 LOAD_NAME                1 (y)\n             10 COMPARE_OP               2 (==)\n             13 RETURN_VALUE        \n\nIn [9]: dis_it('x.startswith(y)')\n  1           0 LOAD_NAME                0 (x)\n              3 LOAD_ATTR                1 (startswith)\n              6 LOAD_NAME                2 (y)\n              9 CALL_FUNCTION            1\n             12 RETURN_VALUE \n</code></pre>\n"},{"tags":["python","function","arguments"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":55,"score":1,"question_id":13274997,"title":"print-like function that writes string to a text file","body":"<p>I would like to write a function in Python that will take arguments just like <code>print</code> does but instead of printing the strings to stdout, I would like to write the strings formatted into a text file.</p>\n\n<p>How do I define the arguments for such a function arguments to accept the string formatting, I'm wondering?</p>\n\n<p>I am looking for something that would replace</p>\n\n<pre><code>print \"Test\"\n</code></pre>\n\n<p>with</p>\n\n<pre><code>MyLog \"Test\"\n</code></pre>\n\n<p>but the % rguments should also be supported.\nSo far I have only come up with this:</p>\n\n<pre><code>def logger(txt):    \nfh = open (LOGFILE, \"a\") #Get handle in append mode\nfh.write(txt)\nfh.close()\nprint txt\nreturn True \n</code></pre>\n\n<p>which works fine for a simple string but i don't think it'll take the % arguments nor will I be able to call it like <em>logger \"TEST\"</em></p>\n"},{"tags":["python","osx","import","imagemagick","pythonmagick"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":181,"score":0,"question_id":10954568,"title":"Problems detecting PythonMagick after install Mac OSX","body":"<p>I followed the instructions at <a href=\"https://gist.github.com/2778301\" rel=\"nofollow\">https://gist.github.com/2778301</a> but when I try to do <code>import PythonMagick</code> I get the error message:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n  File \"PythonMagick/__init__.py\", line 1, in &lt;module&gt;\n    from . import _PythonMagick\nImportError: cannot import name _PythonMagick\n</code></pre>\n\n<p>The PythonMagick.so is in my python2.7 site-packages.</p>\n\n<p>EDIT:\nI solved this problem by copying from where <code>make install</code> installed PythonMagick <code>/usr/local/lib/python2.7/site-packages/PythonMagick</code> to where Python actually looks on a OS X Lion, <code>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/</code></p>\n"},{"tags":["python","python-2.7"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13278959,"title":"Randomly choosing items from a list, can't assign to a variable, encounter NameError instead","body":"<p>I'm having a problem understanding why a class object I created fails to return back an randomly chosen item from a list. I know the fault is with me failing to understand something basic in how the value is passed. I'm still new to learning Python and this is only my second application. My ultimate goal is to create an object of class <code>Weapons()</code> called <code>armed</code> that has a feature called <code>weapon</code>. I want to be able to create 'armed.weapon' which is a weapon randomly chosen from a list and then later assigned to a variable in another class object, i.e. 'hero_weapon = armed.weapon'. Here's the example I wrote trying to create 'armed.weapon' and then print the value. What is the flaw in my logic here? Why do I encounter \"NameError: global name 'weapon' is not defined\"?</p>\n\n<pre><code>from random import randint\n\nclass Weapons(object):\n\ndef __init__(self, weapon = ''):\n    self.weapon = weapon\n    self.weapons_list = [\n        'Flame Blade',\n        'Ice Flail',\n        'Lightning Mace'\n    ]\n\ndef choices(self):\n    self.weapon = self.weapons_list[randint(0, 2)]\n    self.weapon = weapon\n    return weapon\n\n\narmed = Weapons()\narmed.choices()\nprint armed.weapon\n</code></pre>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13276957,"title":"find the end of the body tag in an html file with python","body":"<p>Hi I have the following code<Br></p>\n\n<pre><code>inex = \"app/index.html\" \noriginal = open(index,\"r\")\nfor line in original:\n    if line =='&lt;/body&gt;':\n        print \"here\"\noriginal.close()\n</code></pre>\n\n<p>but It doesn't seem to find the line '. Do I have to strip out potential white space even though the index.html file has none? Any clues on how to find the  tag?<br>\nThanks</p>\n"},{"tags":["python","image","opencv"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13278062,"title":"Opencv - Convert image to arbitrary bit depth in python","body":"<p>I got an assignment in which I have to convert an 8-bit greyscale image to 10, 7, 4, 3, and 1 bit representations.</p>\n\n<p>Since opencv doesn't seem to offer bit depths different from 8, 16, 32 and so on I have no idea of how to accomplish this.</p>\n\n<p>Basically what I need is a way to reduce the amount of information contained in the pixels until I end up with a Black and White image (1 bit representation).</p>\n\n<p>EDIT: I'm not exactly sure about how the conversion should work, but I'm guessing we need to perform a right shift operation. That way</p>\n\n<pre><code>0b11111111\n</code></pre>\n\n<p>would eventually become</p>\n\n<pre><code>0b1\n</code></pre>\n\n<p>The problem is opencv would understand this as:</p>\n\n<pre><code>0b00000001\n</code></pre>\n\n<p>And that wouldn't leave me with a black and white image as I'm supposed to.</p>\n\n<p>If you have some time, the process is explained in theory <a href=\"http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-003-signals-and-systems-spring-2010/lecture-notes/MIT6_003S10_lec22.pdf\" rel=\"nofollow\">here</a></p>\n"},{"tags":["python","string","variables"],"answer_count":10,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":10196,"score":7,"question_id":1534504,"title":"Convert Variable Name to String?","body":"<p>I would like to convert a python variable name into the string equivalent as shown. Any ideas how?</p>\n\n<pre><code>var = {}\nprint ???  # Would like to see 'var'\nsomething_else = 3\nprint ???  # Would print 'something_else'\n</code></pre>\n"},{"tags":["python","django","singleton","initialization","startup"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13277233,"title":"How can I run startup code in Django once the server is done initializing?","body":"<p>I would like to create a thread (maybe in the future a process) that inherits all the django env and settings but goes off to do its own monitoring. Ideally I would like this to be triggered when the Django server is done initializing. I've tried both methods below. The first one seems to run the Middleware initializer every time a request is made and both of them have the problem that my startup code only gets triggered when the first request to the server is made.</p>\n\n<p><a href=\"http://stackoverflow.com/questions/2781383/where-to-put-django-startup-code\">Where to put Django startup code?</a></p>\n\n<p><a href=\"http://stackoverflow.com/questions/9259844/running-startup-code-right-after-django-settings-also-for-commands\">Running startup code right after Django settings? (also for commands)</a></p>\n\n<p>I've also seen that someone checked in some signal for this exact use case but it will only be available in django 1.6 or later.</p>\n\n<p>Any ideas how to work around this?</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","matplotlib","time-series","pandas"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":85,"score":3,"question_id":13089789,"title":"How can I animate a pandas timeseries?","body":"<p>I have pandas timeseries with datetime column as index:</p>\n\n<pre><code>2010-09-20    1828.27\n2010-09-21    1843.30\n2010-09-22    1898.05\n2010-09-23    1897.00\n2010-09-24    1902.00\n2010-09-27    1828.96\n2010-09-28    1824.85\n2010-09-29    1808.17\n2010-09-30    1833.04\n</code></pre>\n\n<p>How do I animate this dataset using <a href=\"http://matplotlib.org/examples/animation/simple_anim.html\" rel=\"nofollow\">simple</a> matplotlib example.</p>\n"},{"tags":["python","pydev","execfile"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13278963,"title":"Eclipse PyDev undefined variable using execfile","body":"<p>I am new to PyDev, so this may be a simple answer to the question that I have.</p>\n\n<p>The code that I am pulling into PyDev uses a execfile instead of a import to pull in a class from another file. I don't have control over the code, so I can't change it to a import.</p>\n\n<pre><code>execfile(\"my_class.py\")\nmy_class.function()\n</code></pre>\n\n<p>I get a undefined variable for each class that the execfile pulls in. </p>\n\n<p>Is there a way to get PyDev to recognize the classes that I bring in through a execfile.  Maybe there is some kind of way that I can do a implicit import in PyDev? </p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":72,"score":3,"question_id":13258197,"title":"What is a simpler, more pythonic way of expressing the following?","body":"<pre><code>return not a and not b\n</code></pre>\n\n<p>^ how do I express this in a better format</p>\n"},{"tags":["python","fabric"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":14,"score":1,"question_id":13277822,"title":"Start detached Unix process via fabric on multiple servers and retrieve status?","body":"<p>What is the recommended way to start long running (bash) scripts on several remote servers via fabric, so that you can later re-attach to the process for checking the status of the process, eventually sigterm it and get the exit code?</p>\n"},{"tags":["python","restructuredtext"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":41,"score":2,"question_id":13277798,"title":"How to reliably detect if a python docstring is in rest?","body":"<p>I'm developing a docstring viewer and so I would like to properly convert any docstring to good looking html.</p>\n\n<p>Docstrings in most of the standard libraries are not in <a href=\"http://docutils.sourceforge.net/rst.html\" rel=\"nofollow\">reST</a>, but that's not the case for scientific libraries, which have adopted for the most part the <a href=\"http://pypi.python.org/pypi/numpydoc/0.4\" rel=\"nofollow\">numpydoc</a> standard.</p>\n\n<p>So I would like to reliably detect whether a docstring is in reST or not, in order to pass it to different renders.</p>\n"},{"tags":["python","seek"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13278748,"title":"How does Python's seek function work?","body":"<p>If I have some file-like object and do the following:</p>\n\n<pre><code>F = open('abc', 'r')\n...\nloc = F.tell()\nF.seek(loc-10)\n</code></pre>\n\n<p>What does seek do? Does is start at the beginning of the file and read <code>loc-10</code> bytes? Or is it smart enough just to back up 10 bytes?</p>\n"},{"tags":["python","hex","uppercase"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":13277440,"title":"How can I get Python to use upper case letters to print hex values?","body":"<p>In Python v2.6 I can get hex for my integers in one of two ways:</p>\n\n<pre><code>print (\"0x%x\")%value\nprint hex(value)\n</code></pre>\n\n<p>However, in both cases, the hexadecimal digits are lower case.  How can I get these in upper case?</p>\n"},{"tags":["python","regex","groups"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":68,"score":2,"question_id":13270514,"title":"Optional grouping in a simple python regex","body":"<p>All I want to do is search a string for instances of two consecutive digits. If such an instance is found I want to group it, otherwise return none for that particular groups. I thought this would be trivial, but I can't understand where I'm going wrong. In the example below, removing the optional (?) character gets me the numbers, but in strings without numbers, the <code>r</code> evaluates to None, so r.groups() throws an exception.</p>\n\n<pre><code>p = re.compile(r'(\\d{2})?')\nr = p.search('wqddsel78ffgr')\nprint r.groups()\n&gt;&gt;&gt;(None, )    # why not ('78', )?\n</code></pre>\n\n<p><code># --- update/clarification --- #</code></p>\n\n<p>Thanks for the answers, but the explanations given are leaving me none-the-wiser. Here's a another go at pin-pointing exactly what it is I don't understand.</p>\n\n<pre><code>pattern = re.compile(r'z.*(A)?')\n_string = \"aazaa90aabcdefA\"\nresult = pattern.search(_string)\nresult.group()\n&gt;&gt;&gt; zaa90aabcdefA\nresult.groups()\n&gt;&gt;&gt; (None, )\n</code></pre>\n\n<p>I understand why <code>result.group()</code> produces the result it does, but why doesn't <code>result.groups()</code> produce <code>('A', )</code>? I thought it worked like this: once the regex hits the <code>z</code> it then matches right to the end of the line using <code>.*</code>. In spite of <code>.*</code> matching everything, the regex engine is aware that it passed over an optional group, and since <code>?</code> means it will try to match if it can, it should work backwards to try and match. Replacing <code>?</code> with <code>+</code> does return <code>('A', )</code>. This suggests that <code>?</code> won't try and match if it doesn't have to, but this seems to contrast with much of what I've read on the subject (esp. J. Friedl's excellent book).</p>\n"},{"tags":["python","eclipse","eclipse-ecf"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":260,"score":2,"question_id":2313743,"title":"Using ECF shared editing with Python","body":"<p>I can use the shared editing feature of <a href=\"http://www.eclipse.org/ecf/\" rel=\"nofollow\">ECF</a> with Java fine perfectly fine. When I try to do it with Python files it also works, but there is no syntax highlighting.</p>\n\n<p>I installed PyDev to get syntax highlighting, but then the context menu does not have the \"share editor\" option. I removed PyDev and the option came back. I installed Dynamic Languages Toolkit in hopes that its Python syntax highlighting was compatible and I got the same effect (context menu lacks the \"share editor\" option).</p>\n\n<p>Is there a way to have a shared editing session with Python files and syntax highlighting?</p>\n"},{"tags":["python","ip","hosting"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":28,"score":3,"question_id":13272803,"title":"Get hosting provider for IP with Python","body":"<p>I have a simple Python script that gets the IP for a domain and looks up the country using Maxmind. I would like that script to also get what webhosting company that hosts that IP/site. Is that possible, and if so how? I've searched this site and elsewhere without much luck.</p>\n"},{"tags":["python","multidimensional-array","numpy"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":21,"score":2,"question_id":13278560,"title":"Assigning subvectors to multidimensional arrays in Numpy","body":"<p>Say I have a matrix:</p>\n\n<pre><code>from numpy import *\na = zeros(shape=(nRows,nColumns));\n</code></pre>\n\n<p>and I would like to fill in the first column with ones, when I try to do:</p>\n\n<pre><code>a[:][0] = ones(shape=(nRows,1))\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>ValueError: output operand requires a reduction, but reduction is not enabled\n</code></pre>\n\n<p>Why is it not working?</p>\n"},{"tags":["python","linux","centos","cpanel"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13278073,"title":"Python Installation throwing lots of MemoryError()'s","body":"<p>I just installed (and re-installed) python 2.7.3 on my centos 6.3 server with cpanel built into it to the /opt/python2.7.3 directory on my system.  I also installed it with the --enable-shared flag and then configured setuptools for it.  I am having issues now though when I am trying to easy_install or use basic python thigns such as bin/pcreate (i  am building a web application) with it throwing MemoryError()'s</p>\n\n<p>Im confident that there is memory available as free -m shows there is over 2gb of memory available on the system.  Here is an example of one of the MemoryError traceback's:</p>\n\n<pre><code>Traceback (most recent call last):\n\n\n  File \"bin/pcreate\", line 8, in &lt;module&gt;\n    load_entry_point('pyramid==1.4a3', 'console_scripts', 'pcreate')()\n  File \"/home/urcellar/betaurcellar/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py\", line 318, in load_entry_point\n  File \"/home/urcellar/betaurcellar/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py\", line 2221, in load_entry_point\n  File \"/home/urcellar/betaurcellar/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/pkg_resources.py\", line 1954, in load\n  File \"/home/urcellar/betaurcellar/lib/python2.7/site-packages/pyramid-1.4a3-py2.7.egg/pyramid/scripts/pcreate.py\", line 5, in &lt;module&gt;\n    import optparse\n  File \"/opt/python2.7/lib/python2.7/optparse.py\", line 90, in &lt;module&gt;\n    from gettext import gettext\nMemoryError\n</code></pre>\n\n<p>Im not really sure what is broken or what to do...i did a clean install so it's definitely not the python download or installation, has to be something else on the system....</p>\n\n<p>Thanks</p>\n\n<p>EDIT: ulimit-a</p>\n\n<pre><code>core file size          (blocks, -c) 1000000\ndata seg size           (kbytes, -d) unlimited\nscheduling priority             (-e) 0\nfile size               (blocks, -f) unlimited\npending signals                 (-i) 127196\nmax locked memory       (kbytes, -l) 64\nmax memory size         (kbytes, -m) unlimited\nopen files                      (-n) 4096\npipe size            (512 bytes, -p) 8\nPOSIX message queues     (bytes, -q) 819200\nreal-time priority              (-r) 0\nstack size              (kbytes, -s) 8192\ncpu time               (seconds, -t) unlimited\nmax user processes              (-u) 14335\nvirtual memory          (kbytes, -v) unlimited\nfile locks                      (-x) unlimited\n</code></pre>\n"},{"tags":["python","list","random","choice"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":4,"view_count":46,"score":-3,"question_id":13278049,"title":"How to know which list python chooses with random.choice","body":"<p>I'd like to know which list python chooses with <code>random.choice</code> so I can use <code>if</code> statements for different outcomes.</p>\n\n<pre><code>thelists = [L1, L2, L3, L4, L5, L6]\ntheplayers = random.choice(thelists)\n</code></pre>\n\n<p>Id like to know which list, L1, L2..., the variable theplayers was chosen to be.</p>\n"},{"tags":["python","image","pygame","smooth"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13272023,"title":"Image rotating in Pygame while keeping smooth edges","body":"<p>I would like to rotate an image and also keep the edges smooth.</p>\n\n<p>This is how it looks like</p>\n\n<p><img src=\"http://i.stack.imgur.com/PjjCA.png\" alt=\"original image\"></p>\n\n<p>And after rotating </p>\n\n<p><img src=\"http://i.stack.imgur.com/ax7Wi.png\" alt=\"rotated image\"></p>\n\n<p>The code I'm using looks like</p>\n\n<pre><code>def rot_center(self, image, angle):\n   \"\"\"rotate an image while keeping its center and size\"\"\"\n   orig_rect = image.get_rect()\n   rot_image = pygame.transform.rotate(image, angle)\n   rot_rect = orig_rect.copy()\n   rot_rect.center = rot_image.get_rect().center\n   rot_image = rot_image.subsurface(rot_rect).copy()\n   return rot_image\n</code></pre>\n\n<p>Is there something I'm doing wrong?</p>\n"},{"tags":["python","tkinter","optionmenu"],"answer_count":1,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":62,"score":8,"question_id":13219901,"title":"Changing default icon in python tkinter OptionMenu","body":"<p>I am trying to remove the default \"box like\" icon from the tkinter OptionMenu and replace it with my own image file. below is the code I have to date.  It is working but I had to add the last line to get it to display the arrow image and for the OptionMenu to function.  However, the arrow image is always imedately after the text rather than at the far right of the OptionMenu and sticky does not seam to be aplying hence the width=140.  I am working in Python 2.6.  </p>\n\n<p>Any sugegestions for moving the image to the right?</p>\n\n<p><img src=\"http://i.stack.imgur.com/ul1MQ.jpg\" alt=\"Default\">  <img src=\"http://i.stack.imgur.com/N4nWj.jpg\" alt=\"What I am Getting\"></p>\n\n<pre><code>...\narrow = PhotoImage(file='arrow.gif')\nom = OptionMenu(root,myVar,*myOptList)\nom.grid(sticky=W+E,padx=5,pady=5)\nom.config(indictoron=0,compound='right',image=arrow,width=140)\nom.image=arrow\n...\n</code></pre>\n"},{"tags":["python","parsing","log4j"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13278405,"title":"Parsing log4j in Python","body":"<p>I have a log file (log4j xml-ish format) that I am trying to pull info out of and use in my Python module. Could I treat this file as if it were XML? My gut is telling me no... If not, what is the best way to parse the data? Below is a section of the log file. The file does not include your standard doctype or version headers which is why I said \"xml-ish.\"</p>\n\n<pre><code>&lt;log4j:event \nlogger=\"com.hp.cp.elk.impl.subscriptions.AsyncSimpleSubscriptionManager\"\ntimestamp=\"1352320517430\" level=\"DEBUG\" thread=\"Thread-77\"&gt;\n&lt;log4j:message&gt;&lt;![CDATA[Broadcasting signals to subscribers...]]&gt;&lt;/log4j:message&gt;\n&lt;/log4j:event&gt;\n\n&lt;log4j:event logger=\"com.hp.cp.jdf.idp.queue.IDPJobProgressMonitor\"\ntimestamp=\"1352320517430\" level=\"DEBUG\" thread=\"IDPJobProgressMonitorThread\"&gt;\n&lt;log4j:message&gt;&lt;![CDATA[[JDFQueueEntry[  --&gt;  JDFAutoQueueEntry[  --&gt; JDFElement[\n--&gt; &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;QueueEntry \nxmlns=\"http://www.CIP4.org/JDFSchema_1_1\"\nDescriptiveName=\"H44E61-6.pdf\" DeviceID=\"HPPRO1-SM1\"\nEndTime=\"2012-11-07T10:58:18-08:00\" JobID=\"Default\" Priority=\"50\"\nQueueEntryID=\"d5fbbe98a1194e0da573b51a0c8040fb\" Status=\"Completed\" \nSubmissionTime=\"2012-11-06T16:35:06-08:00\"&gt;  &lt;Comment AgentName=\"CIP4 JDF Writer \nJava\" AgentVersion=\"1.4a BLD 63\" ID=\"c_121106_163506894_000804\" \nName=\"JobSpec\"&gt;WBG_4C_Flat_21up_BusCards_Duplex&lt;/Comment&gt;\n&lt;/QueueEntry&gt;\n] ] ]] queue entries changed.]]&gt;&lt;/log4j:message&gt;\n&lt;/log4j:event&gt;\n\n&lt;log4j:event logger=\"com.hp.cp.jdf.idp.queue.IDPJobProgressMonitor\" \ntimestamp=\"1352320517430\" level=\"DEBUG\" thread=\"IDPJobProgressMonitorThread\"&gt;\n&lt;log4j:message&gt;&lt;![CDATA[no active queue entries changed.]]&gt;&lt;/log4j:message&gt;\n&lt;/log4j:event&gt;\n</code></pre>\n\n<p>Sorry for the messy code, I just wanted to make you all can get an idea of the formatting. Anyway, I'm currently just trying to pull the value from <code>QueueEntryID=\"d5fbbe98a1194e0da573b51a0c8040fb\"</code> Any suggestions? Thank you!</p>\n"},{"tags":["python","mysql","localhost","mysql-python"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13277384,"title":"MySQLdb cannot resolve localhost","body":"<p>I have set up a basic transactional database using MySQL. Using python/MySQLdb, this works fine:</p>\n\n<pre><code>connection = MySQLdb.connect (host = \"127.0.0.1\", port = 3306, user = \"root\", passwd = \"password\", db = \"test\")\n</code></pre>\n\n<p>but this doesn't:</p>\n\n<pre><code>connection = MySQLdb.connect (host = \"localhost\", port = 3306, user = \"root\", passwd = \"password\", db = \"test\")\n</code></pre>\n\n<p>Using the latter generates the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"path\\to\\virtualenv\\lib\\site-packages\\MySQLdb\\__init__.py\", line 81, in Connect\n    return Connection(*args, **kwargs)\n  File \"path\\to\\virtualenv\\lib\\site-packages\\MySQLdb\\connections.py\", line 187, in __init__\n    super(Connection, self).__init__(*args, **kwargs2)\n_mysql_exceptions.OperationalError: (2003, \"Can't connect to MySQL server on 'localhost' (10061)\")\n</code></pre>\n\n<p>I have to admit I'm a bit confused as to why MySQLdb fails to resolve localhost. The C:\\Windows\\System32\\drivers\\etc\\hosts file hasn't been modified in way. Using a regular Windows command prompt, <code>ping localhost</code> and <code>telnet localhost 3306</code> both work fine.</p>\n\n<p>Environment:</p>\n\n<ul>\n<li>Windows 7 (64 bits)</li>\n<li>Python 2.7.2 (32 bits) </li>\n<li>MySQLdb 1.2.3 </li>\n<li>MySQL 5.5.28 (64 bits)</li>\n</ul>\n"},{"tags":["python"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":50,"score":-2,"question_id":13277564,"title":"elif statement getting a syntax error","body":"<p>I'm trying to set up a menu. In the menu, the user is able to pick which option to take and then add or delete items from a list. I'm having trouble with the syntax in my elif statement. it's saying there is a syntax error and highlighting the second elif. I'm not sure what the problem is.  </p>\n\n<pre><code>choice = int(input('Enter your choice: '))\nif choice !=0:\n    display_menu()\nelif choice == 1:\n    add_value = float(input('Add value: ')\nelif choice == 2:\n    delete_value_by_value = float(input('Which value would you like to delete? \n</code></pre>\n"},{"tags":["python"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":8,"view_count":80,"score":-8,"question_id":13278287,"title":"When are you a Python expert?","body":"<p>Python is a fairly 'big' language that is used broadly in very different types of applications.</p>\n\n<p>I've been recently asked by a recruiter if I am an expert in it.</p>\n\n<p>Now, for a language like C++ I find it easier to identify what an 'expert' is (someone who has built and rebuilt systems, is comfortable with pointers, templates, knows some compilers well, and can talk about language gotchas). But Python on the other hand seems easy, but every once in a while you find a feature you didn't know about. There appears to be a lot of breadth, but not necessarily depth.</p>\n\n<p>So, what makes you an expert in Python? How do you know if you are one?</p>\n"},{"tags":["python","google-analytics-api"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13278155,"title":"Google Analytics Data in Python Admin panel","body":"<p>I want to put graphs on my python admin panel showing the stats of my site from google analytics.</p>\n\n<p>I don't have a lot of experience with this but I found something in PHP which seems to do exactly what I'm after.</p>\n\n<p>I was wondering where I can find a similar tutorial or example code in Python? I havent been able to find much on google, and if there are various options, which is the most straightforward?</p>\n\n<p>Thank you</p>\n"},{"tags":["python","bash","shlex"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":53,"score":4,"question_id":13276755,"title":"Using Python to cat a file over ssh to a remote bash script","body":"<p>I'm using subprocess.popen with shlex to call a remote bash script using ssh.  This command works quite fine on bash itself.  But as soon as I try to translate it to python and shlex with subprocess.popen it errs out.</p>\n\n<p>Remote bash script:</p>\n\n<pre><code>#!/bin/bash\ntmp=\"\";     \nwhile read -r line;\ndo\n    tmp=\"$tmp $line\\n\";\ndone;\necho $tmp;\n</code></pre>\n\n<p><strong>BASH CMD RESULT</strong>(Invoking the remote bash script on the command line)</p>\n\n<pre><code>$&gt; ssh x.x.x.x cat &lt; /tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt \" | /path/to/bash/script.sh;\"\nBar\\n\n$&gt; \n</code></pre>\n\n<p>Python code</p>\n\n<pre><code>import shlex\nimport subprocess\n\nfn = '/tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt'\ns = \"\"\"                                                                    \nssh x.x.x.x cat &lt; {localfile} '| /path/to/bash/script.sh;'\n\"\"\".format(localfile=fn)\n\nprint s\n\nlexer = shlex.shlex(s)                                                     \nlexer.quotes = \"'\"                                                         \nlexer.whitespace_split = True                                              \nsbash = list(lexer)                                                        \nprint sbash                                                                \n\n# print buildCmd                                                           \nproc=subprocess.Popen(sbash,stdout=subprocess.PIPE,stderr=subprocess.PIPE) \nout,err=proc.communicate()                                                 \n\nprint \"Out: \" + out                                                        \nprint \"Err: \" + err                                                        \n</code></pre>\n\n<p><strong>PYTHON SCRIPT RESULT</strong>:</p>\n\n<pre><code>$&gt; python rt.py\n\n    ssh x.x.x.x cat &lt; /tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt '| /path/to/bash/script.sh'\n['ssh', 'x.x.x.x', 'cat', '&lt;', '/tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt', \"'| /path/to/bash/script.sh'\"]\nOut: \nErr: bash: /tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt: No such file or directory\n$&gt;\n</code></pre>\n\n<p>What am I missing?</p>\n"},{"tags":["python","python-2.7"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13276796,"title":"print tuple as number of arguments","body":"<p>I want to pass the variadic number of arguments and then print them (if some conditions are true).\nWhen I try to do so:</p>\n\n<pre><code>def my_print(*args)\n    print args\n</code></pre>\n\n<p>It prints a tuple. How do I make python act <code>my_print(a,b)</code> as <code>print a,b</code> ?</p>\n"},{"tags":["python","python-2.7"],"answer_count":1,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":91,"score":7,"question_id":12673074,"title":"How should I understand the output of dis.dis?","body":"<p>I would like to understand how to use <a href=\"http://docs.python.org/library/dis.html\" rel=\"nofollow\">dis (the dissembler of Python bytecode)</a>. Specifically, how should one interpret the output of <a href=\"http://docs.python.org/library/dis.html#dis.dis\" rel=\"nofollow\"><code>dis.dis</code></a> (or <a href=\"http://docs.python.org/library/dis.html#dis.disassemble\" rel=\"nofollow\"><code>dis.disassemble</code></a>)?</p>\n\n<p>.</p>\n\n<p><em>Here is a very specific example (in Python 2.7.3):</em></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>dis.dis(\"heapq.nsmallest(d,3)\")\n\n      0 BUILD_SET             24933\n      3 JUMP_IF_TRUE_OR_POP   11889\n      6 JUMP_FORWARD          28019 (to 28028)\n      9 STORE_GLOBAL          27756 (27756)\n     12 LOAD_NAME             29811 (29811)\n     15 STORE_SLICE+0  \n     16 LOAD_CONST            13100 (13100)\n     19 STORE_SLICE+1\n</code></pre>\n\n<p>I see that <a href=\"http://docs.python.org/library/dis.html#opcode-JUMP_IF_TRUE_OR_POP\" rel=\"nofollow\"><code>JUMP_IF_TRUE_OR_POP</code></a> etc. are bytecode instructions <em>(although interestingly, <code>BUILD_SET</code> does not appear in this list, though I expect it works as <a href=\"http://docs.python.org/library/dis.html#opcode-BUILD_TUPLE\" rel=\"nofollow\"><code>BUILD_TUPLE</code></a>)</em>. I think the numbers on the right-hand-side are memory allocations, and the numbers on the left are <a href=\"http://en.wikipedia.org/wiki/GOTO\" rel=\"nofollow\">goto</a> numbers... I notice they <em>almost</em> increment by 3 each time (but not quite).</p>\n\n<p>If I wrap <code>dis.dis(\"heapq.nsmallest(d,3)\")</code> inside a function:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def f_heapq_nsmallest(d,n):\n    return heapq.nsmallest(d,n)\n\ndis.dis(\"f_heapq(d,3)\")\n\n      0 BUILD_TUPLE            26719\n      3 LOAD_NAME              28769 (28769)\n      6 JUMP_ABSOLUTE          25640\n      9 &lt;44&gt;                                      # what is &lt;44&gt; ?  \n     10 DELETE_SLICE+1 \n     11 STORE_SLICE+1 \n</code></pre>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13274916,"title":"Python imported module is None","body":"<p>I have a module that imports fine (i print it at the top of the module that uses it)</p>\n\n<pre><code>from authorize import cim\nprint cim\n</code></pre>\n\n<p>Which produces:</p>\n\n<pre><code>&lt;module 'authorize.cim' from '.../dist-packages/authorize/cim.pyc'&gt;\n</code></pre>\n\n<p>However later in a method call, it has mysteriously turned to <code>None</code></p>\n\n<pre><code>class MyClass(object):\n    def download(self):\n        print cim\n</code></pre>\n\n<p>which when run show that <code>cim</code> is <code>None</code>. The module isn't ever directly assigned to <code>None</code> anywhere in this module. </p>\n\n<p>Any ideas how this can happen?</p>\n"},{"tags":["python","amazon-web-services","amazon","boto","amazon-cloudsearch"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":12763129,"title":"How do I connect to an existing CloudSearch domain in boto?","body":"<p>I'm just starting to work with boto to connect to Amazon CloudSearch. </p>\n\n<p>I got the examples working, but I can't find any examples of connecting to an existing domain, all the examples create a new domain. </p>\n\n<p>Poking around, I found get_domain, but that fails if I call it on the connection object.</p>\n\n<pre><code>&gt;&gt;&gt; conn.get_domain('foo')\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'Layer2' object has no attribute 'get_domain'\n</code></pre>\n\n<p>Any suggestions as to how I can connect to an existing domain? </p>\n\n<p>[edit]\nI started from this: <a href=\"http://boto.cloudhackers.com/en/latest/cloudsearch_tut.html\" rel=\"nofollow\">http://boto.cloudhackers.com/en/latest/cloudsearch_tut.html</a></p>\n\n<p>So, all I'm doing this </p>\n\n<pre><code>import boto\nconn = boto.connect_cloudsearch()\n</code></pre>\n"},{"tags":["python","defaultdict"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13277448,"title":"Extract information from defaultdict","body":"<p>I have a defaultdict that contains the calculation of the average position of number ( Euler problem )</p>\n\n<pre><code>[('1', 0.6923076923076923), ('0', 2.0), ('3', 0.2222222222222222),\n ('2', 1.0909090909090908), ('7', 0.0), ('6', 0.875), \n('9', 1.6923076923076923),('8', 1.3333333333333333)]\n</code></pre>\n\n<p>I'm trying to get this information into simple string instead of doing it manually from 0 - 2. \nThe end result I'm looking for is something like </p>\n\n<pre><code>73162890\n</code></pre>\n\n<p>I don't know any good way to extracting them without using many if-else and for-loops.</p>\n\n<p>Is there any simple and good way of doing this in python?</p>\n"},{"tags":["python","audio-processing","beat-detection"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":76,"score":2,"question_id":12344951,"title":"Detect beat and play (wav) file in a syncronised manner","body":"<p>I am trying my hands at Audio Processing in python with <a href=\"http://archive.gamedev.net/archive/reference/programming/features/beatdetection/index.html\" rel=\"nofollow\">this</a> Beat Detection algorithm. I have implemented the first (non-optimized version) from the aforementioned article. While it prints some results, I have no way to detect whether it works with some accuracy or not as I do not know how to play sound with it.</p>\n\n<p>Currently, I am using <code>Popen</code> to asynchronously start my media player with the song before going into the computation loop, but I am not sure if this strategy works and is giving synchronous results.</p>\n\n<pre><code>#!/usr/bin/python\n\nimport scipy.io.wavfile, numpy, sys, subprocess\n\n# Some abstractions for computation\ndef sumsquared(arr):\n    sum = 0\n    for i in arr:\n            sum = sum + (i[0] * i[0]) + (i[1] * i[1])\n\n    return sum\n\nif sys.argv.__len__() &lt; 2:\n    print 'USAGE: wavdsp &lt;wavfile&gt;'\n    sys.exit(1)\n\nnumpy.set_printoptions(threshold='nan')\nrate, data = scipy.io.wavfile.read(sys.argv[1])\n\n\n# Beat detection algorithm begin \n# the algorithm has been implemented as per GameDev Article\n# Initialisation\ndata_len = data.__len__()\nidx = 0\nhist_last = 44032\ninstant_energy = 0\nlocal_energy = 0\nle_multi = 0.023219955 # Local energy multiplier ~ 1024/44100\n\n\n# Play the song\np = subprocess.Popen(['audacious', sys.argv[1]])\n\nwhile idx &lt; data_len - 48000:\n    dat = data[idx:idx+1024]\n    history = data[idx:hist_last]\n    instant_energy = sumsquared(dat)\n    local_energy = le_multi * sumsquared(history)\n    print instant_energy, local_energy\n    if instant_energy &gt; (local_energy * 1.3):\n            print 'Beat'\n\n    idx = idx + 1024\n    hist_last = hist_last + 1024 # Right shift history buffer\n\n p.terminate()\n</code></pre>\n\n<p>What modification/additions can I make to the script in order to get audio output and the algorithm (console) output in a time synchronised manner? i.e When console outputs result for a particular frame, that frame must be playing on the speakers. </p>\n"},{"tags":["python","ide","rad"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13275181,"title":"Python RAD under Windows/Linux","body":"<p>Héllo everybody, as this <a href=\"http://stackoverflow.com/questions/11061639/python-rad-desktop-deployment\">question about RAD</a> has been childishly closed 4 month ago without being answered and as <a href=\"http://stackoverflow.com/questions/81584/what-ide-to-use-for-python\">the only IDE question allowed on SO</a> isn't really up to date and doesn't fit my question (Visual Studio + PTVS + Wine to get a WPF only app under linux, no thanks) I will ask again:</p>\n\n<p>Is there <strong>at the moment</strong> a viable python IDE with a simple GUI editor (<strong>RAD</strong> tool) ? (and possibly usable under Linux?)</p>\n\n<p>Thanks for reading.</p>\n"},{"tags":["python","http","http-headers","httprequest"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13203611,"title":"Sending http requests without content-length or other headers","body":"<p>I am wondering if there exists a tool to send HTTP requests with given headers only.</p>\n\n<p>I need this to test some application and want to observe the behavior of the application when some HTTP headers are missing.</p>\n\n<p>Researched urllib2, httplib and pycurl but they add their own headers internally (in the best case, we can specify the value of these headers or make those values empty).</p>\n\n<p>What I need is an utility where I have complete/transparent control of the HTTP headers I want to send in a request (so that I can send requests with missing <code>content-length</code>/<code>content-type</code> and so on) and the application just forms a request with these headers ONLY, without adding anything else internally.</p>\n\n<p>I am able to do this with browser plugins.</p>\n"},{"tags":["python","heroku","web","flask"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13277457,"title":"New to Heroku - \"No such type as web\"","body":"<p>I'm trying to deploy my first app using Python/Flask on Heroku.  I don't really know what I'm doing and am just following the tutorial at <a href=\"https://devcenter.heroku.com/articles/python#prerequisites\" rel=\"nofollow\">https://devcenter.heroku.com/articles/python#prerequisites</a>.  When I type the command <code>heroku ps:scale web=1</code> I'm getting the error message \"<code>No such type as web</code>\".  My <code>Procfile</code> says <code>web: python scrabble_cheater.py</code>, which I believe is correct.  Here's the log of my terminal:</p>\n\n<pre><code>(venv)jason-olsens-macbook-pro:scrabble paulnichols$ heroku status\n=== Heroku Status\nDevelopment: No known issues at this time.\nProduction:  No known issues at this time.\n(venv)jason-olsens-macbook-pro:scrabble paulnichols$ heroku config\n=== enigmatic-mountain-1395 Config Vars\nLANG:             en_US.UTF-8\nLD_LIBRARY_PATH:  /app/.heroku/vendor/lib\nLIBRARY_PATH:     /app/.heroku/vendor/lib\nPATH:             /app/.heroku/venv/bin:/bin:/usr/local/bin:/usr/bin\nPYTHONHASHSEED:   random\nPYTHONHOME:       /app/.heroku/venv/\nPYTHONPATH:       /app/\nPYTHONUNBUFFERED: true\n(venv)jason-olsens-macbook-pro:scrabble paulnichols$ heroku ps\n(venv)jason-olsens-macbook-pro:scrabble paulnichols$ git push heroku master\nWarning: Permanently added the RSA host key for IP address '50.19.85.154' to the list of known hosts.\nEverything up-to-date\n(venv)jason-olsens-macbook-pro:scrabble paulnichols$ heroku ps:scale web=1\nScaling web processes... failed\n !    No such type as web\n(venv)jason-olsens-macbook-pro:scrabble paulnichols$ \n</code></pre>\n\n<p>Any help is greatly appreciated!</p>\n"},{"tags":["python","garbage-collection","cpython"],"answer_count":3,"favorite_count":3,"up_vote_count":11,"down_vote_count":0,"view_count":271,"score":11,"question_id":10962393,"title":"How does Python's Garbage Collector Detect Circular References?","body":"<p>I'm trying to understand how Python's garbage collector detects circular references. When I look at the documentation, all I see is a statement that circular references are detected, except when the objects involved have a <code>__del__</code> method. </p>\n\n<p>If this happens, my understanding (possibly faulty) is that the gc module acts as a failsafe by (I assume) walking through all the allocated memory and freeing any unreachable blocks.</p>\n\n<p>How does Python detect &amp; free circular memory references before making use of the gc module?</p>\n"},{"tags":["python","ctypes"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":25,"score":2,"question_id":13275211,"title":"Python ctypes stack corruption","body":"<p>I'm having weird issues with ctypes where by it appears to be corrupting the stack by dereferencing a pointer when it shouldn't be. The setup is fairly complicated by stay with me for a second.</p>\n\n<p>I have a C function <code>qfsm_search</code> with wrapped signature like this:</p>\n\n<pre><code>qmotion.qfsm_search.argtypes = [\n    qfsm_ptr,\n    qfsm_node_t,\n    qskel_ptr,\n    vec3, c_int,\n    qfsm_node_ptr,\n    POINTER(c_int)]\nqmotion.qfsm_search.restype = None\n</code></pre>\n\n<p>I then output all of the details of the parameters and call it in python like this:</p>\n\n<pre><code>print(\"Fsm: %d | %X\" % (sizeof(fsm), addressof(fsm.contents)))\nprint(\"Curr: %d | %d %d %d\" % (sizeof(curr), curr.state, curr.anim, curr.frame))\nprint(\"Skel: %d | %X\" % (sizeof(skel), addressof(skel.contents)))\nprint(\"Tar: %f %f %f\" % (tar.x, tar.y, tar.z))\nprint(\"Limit: %i\" % limit)\nprint(\"Out: %X\" % addressof(out_nodes_p.contents))\nprint(\"Out Num: %X\" % addressof(out_num_p.contents))\n\nqmotion.qfsm_search(fsm, curr, skel, tar, limit, out_nodes_p, out_num_p)\n</code></pre>\n\n<p>This outputs the following on the python side. All appears to be fine so far.</p>\n\n<pre><code>Fsm: 8 | 13CF0960\nCurr: 12 | 0 0 89\nSkel: 8 | 49193E60\nTar: 100.000000 100.000000 100.000000\nLimit: 5\nOut: 39A4FD10\nOut Num: 2D623510\n</code></pre>\n\n<p>Then in C I have the function like this:</p>\n\n<pre><code>void qfsm_search(qfsm_t* fsm, qfsm_node_t curr, qskel_t* skel, vec3 tar, int max_out, qfsm_node_t* out, int* out_num) {\n\n  qdebug(\"Fsm: %d | %p\", (int)sizeof(fsm), fsm);\n  qdebug(\"Node: %d | %d %d %d\", (int)sizeof(curr), curr.state, curr.anim, curr.frame);\n  qdebug(\"Skel: %d | %p\", (int)sizeof(skel), skel);\n  qdebug(\"Tar: %f %f %f\", tar.x, tar.y, tar.z);\n  qdebug(\"Max: %d\", max_out);\n  qdebug(\"Out: %p\", out);\n  qdebug(\"Out Num: %p\", out_num);\n\n  ....\n</code></pre>\n\n<p>But this function outputs:</p>\n\n<pre><code>Fsm: 8 | 0000000013CF0960\nNode: 12 | 0 0 89\nSkel: 8 | 000000000D6281A8\nTar: 0.000000 0.000000 14144512.000000\nMax: 967112848\nOut: 000000000D628468\nOut Num: 0000000000000005\n</code></pre>\n\n<p>Notice how the value of the <code>skel</code> parameter has changed and the stack following after it is corrupt. The reason I believe that ctypes is dereferencing the <code>skel</code> parameter is that if I set <code>skel</code> to be a NULL pointer then I get a NULL pointer segfault before the C function is entered and any debugging information is printed.</p>\n\n<p>Does anyone have an idea of what might be going on? I suspected it may have been some weird issue with the type <code>qskel_ptr</code>, but this seems unlikely because of the behavior I explained when passing in NULL pointer.</p>\n\n<p>It is probably worth mentioning that I am running Windows 7 64-bit and Python 2.6.4</p>\n\n<p>Many Thanks</p>\n"},{"tags":["python","ctypes"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":1131,"score":0,"question_id":4755303,"title":"python cdll can't find module","body":"<p>I have a library consisting of two dll files and one python wrapper.</p>\n\n<p>I currently have code based on these three files being in the same parent directory as my main python file.  I am now attempting to refactor things before I continue development and would like to move said library code into it's own lib/ directory.  Unfortunately, nothing I've tried helps.</p>\n\n<pre><code>import ctypes\n\n_lib = ctypes.cdll[\"./my.dll\"]\n</code></pre>\n\n<p>The above code located in the python wrapper file loads the dll perfectly fine in it's original location.  I've tried various ways of loading it in the new location such as:</p>\n\n<pre><code>from ctypes import *\nimport os\n\npath = os.path.dirname(os.path.realpath(__file__))\n_lib = ctypes.CDLL(os.path.join(path, 'my.dll'))\n</code></pre>\n\n<p>However python always throws an exception saying unable to find the module..  I have copy and pasted the path to verify that it is in fact the valid absolute path to the .dll file</p>\n\n<p>Does anyone know what I need to do in order to relocate this library to a sub folder?  I could always leave it where it is but I simply hate clutter.</p>\n"},{"tags":["python","variables","variable-scope"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1642,"score":3,"question_id":5218895,"title":"Python nested functions variable scoping","body":"<p>I've read almost all the other questions about the topic, but my code still doesn't work.\nI think I'm missing something about python variable scope.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>PRICE_RANGES = {\n                64:(25, 0.35),\n                32:(13, 0.40),\n                16:(7, 0.45),\n                8:(4, 0.5)\n                }\n\ndef get_order_total(quantity):\n    global PRICE_RANGES\n    _total = 0\n    _i = PRICE_RANGES.iterkeys()\n    def recurse(_i):\n        try:\n            key = _i.next()\n            if quantity % key != quantity:\n                _total += PRICE_RANGES[key][0]\n            return recurse(_i) \n        except StopIteration:\n            return (key, quantity % key)\n\n    res = recurse(_i)\n</code></pre>\n\n<p>And i get </p>\n\n<blockquote>\n  <p>\"global name '_total' is not defined\"</p>\n</blockquote>\n\n<p>Yeah I know the problem is on the <code>_total</code> assignment, but I can't understand why.\nShouldn't <code>recurse()</code> has access to the parent functions variables?</p>\n\n<p>Can someone explain me what I'm missing, on python variables scope?</p>\n"},{"tags":["python","http","post","requests","python-requests"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":88,"score":4,"question_id":13170258,"title":"Python Requests - Is it possible to receive a partial response after an HTTP POST?","body":"<p>I am using the <a href=\"http://docs.python-requests.org/en/latest/user/quickstart/\" rel=\"nofollow\">Python Requests Module</a> to datamine a website. As part of the datamining, I have to HTTP POST a form and check if it succeeded by checking the resulting URL. My question is, after the POST, is it possible to request the server to not send the entire page? I only need to check the URL, yet my program downloads the entire page and consumes unnecessary bandwidth. The code is very simple</p>\n\n<pre><code>import requests\nr = requests.post(URL, payload)\nif 'keyword' in r.url:\n   success\nfail\n</code></pre>\n"},{"tags":["python","xml-parsing","etree"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":17,"score":-1,"question_id":13273459,"title":"XML Python Parser thhrowing errors","body":"<p>I get the following error when I try to run my python parser</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\John\\Desktop\\FINAL BART ALL INFO-Magic Bullet.py\", line 75, in &lt;module&gt;\n    doc = etree.XML(item)\n  File \"lxml.etree.pyx\", line 2723, in lxml.etree.XML (src/lxml/lxml.etree.c:52448)\n  File \"parser.pxi\", line 1573, in lxml.etree._parseMemoryDocument (src/lxml/lxml.etree.c:79932)\n  File \"parser.pxi\", line 1452, in lxml.etree._parseDoc (src/lxml/lxml.etree.c:78774)\n  File \"parser.pxi\", line 960, in lxml.etree._BaseParser._parseDoc (src/lxml/lxml.etree.c:75389)\n  File \"parser.pxi\", line 564, in lxml.etree._ParserContext._handleParseResultDoc (src/lxml/lxml.etree.c:71739)\n  File \"parser.pxi\", line 645, in lxml.etree._handleParseResult (src/lxml/lxml.etree.c:72614)\n  File \"parser.pxi\", line 585, in lxml.etree._raiseParseError (src/lxml/lxml.etree.c:71955)\nXMLSyntaxError: Entity 'num' not defined, line 166, column 84\n</code></pre>\n\n<p>This takes Patent XML data and parses it out into a delimited file.  also, I used \"import urllib2, os, zipfile from lxml import etree\"</p>\n"},{"tags":["python","numpy","matplotlib"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":85,"score":4,"question_id":13275494,"title":"Drawing lines between pairs in Python","body":"<p>I have a tuple of pairs: </p>\n\n<pre><code>pairs=[(3,6),(7,2),(8,5),(9,5),(5,13),(10,6),(6,1),(1,13),(11,2),(2,13),(12,4),(4,13)]\n</code></pre>\n\n<p>Each pair describes a connection between two points, i.e there's a line between point 3 and point 6.</p>\n\n<p>Currently, doing this:</p>\n\n<pre><code>i=0\nfor point in pairs:\n    i+=1\n    plt.plot(point,(i,i))\nplt.show()\n</code></pre>\n\n<p>is giving me straight lines between each point and its respective destination:</p>\n\n<p><img src=\"http://i.stack.imgur.com/KNYbf.jpg\" alt=\"\"></p>\n\n<p>However, I'm looking for connecting these lines together to create a graph of \"bridges\", something along the lines of:</p>\n\n<p><img src=\"http://i.stack.imgur.com/gYUjk.jpg\" alt=\"\"></p>\n\n<p>Thanks!</p>\n"},{"tags":["python","xsd","gis","lxml","offlineapps"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13262605,"title":"Python lxml validation offline yields \"connection refused\" to http://www.opengis.net/kml/2.2","body":"<p>I am trying to validate some XML via lxml and an xsd\n(ogckml22.xsd). This is happening OFFLINE. I read ther\nfile via a straight open/read</p>\n\n<p>For the record,  http://www.opengis.net/kml/2.2 is not valid.</p>\n\n<p>from another article:\n(clarified due to comment request..)</p>\n\n<pre><code>from lxml import etree\nimport os\nimport sys\nimport StringIO\nfile=open('ogckml22.xsd')\ndata=file.read()\nstr=StringIO.StringIO(data)\ntry:\n     xmlschema_doc=etree.parse(data)\nexcept IOError as ex:\n    print \"oops {0}\".format(ex.strerror)\nexcept:\n    print \"Unexpected error:\", sys.exc_info()[0]\n\nxmlschema=etree.XMLSchema(xmlschema_doc)  \n</code></pre>\n\n<p>All I get is a  \"connection refused\".\nWith the try/except, I get the xmlschema_doc is not defined.</p>\n\n<pre><code>File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;  \nFile \"&lt;xmlschema.pxi\",line 105, in lxml.etree.XMLSchema.__init__ (src/lxml/lxml.etree.c:132748  \n   self.error_log)  \nlxml.etree.XMLSchemaParseError: connection refused  \n</code></pre>\n\n<p>I know it can read the xsd file above and another xsd file that\ngets included.</p>\n\n<p>OK maybe the xsd gets read? I downloaded the source for lxml and in src/lxml/xmlschema.pxi,  </p>\n\n<pre><code>if self._c_schema is NULL:\n    raise XMLSchemaParseError(\n        self.error_log._buildExceptionMessage(\n            u\"Document is not valid XML Schema\"),\n        self._error_log)\n</code></pre>\n\n<p>I never see the \"Document is not valid XML Schema\" message. I can only assume that \"Connection Refused\" is used in place of the \"Document message\" (a default?) but\na more thorough reading of _error_log (outside of recompilation) evades me....</p>\n\n<p>Sincerely,</p>\n\n<p>ArrowInTree</p>\n"},{"tags":["python","pyparsing"],"answer_count":0,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":38,"score":4,"question_id":13277207,"title":"Parsing logical setence very slow with pyparsing","body":"<p>I try to use pyparsing parse logical expressions such as these  </p>\n\n<pre><code>x\nFALSE\nNOT x\n(x + y &lt;= 5) AND (y &gt;= 10) OR NOT (z &lt; 100 OR w)\n\n(A=True OR NOT (G &lt; 8) =&gt; S = J) =&gt; ((P = A) AND not (P = 1) AND (B = O)) =&gt; (S = T)\n\n((P = T) AND NOT (K =J) AND (B = F)) =&gt; (S = O) AND\n ((P = T) OR (k and b =&gt; (8 + z &lt;= 10)) AND NOT (a + 9 &lt;= F)) =&gt; (7 = a + z)\n</code></pre>\n\n<p>The code I wrote below seems to work OK -- but it is very slow (e.g. the last example above takes a few seconds).   Did I structure the grammar in some inefficient way? may be recursion should be used instead of operatorPrecedence ? Is there a way to speed it up ?  </p>\n\n<pre><code>identifier = Group(Word(alphas, alphanums + \"_\")  +  Optional(\"'\"))\nnum = Regex(r\"[+-]?\\d+(:?\\.\\d*)?(:?[eE][+-]?\\d+)?\")\noperator = Regex(\"&gt;=|&lt;=|!=|&gt;|&lt;|=\")\noperand = identifier |  num  \naexpr = operatorPrecedence(operand,\n                           [('*',2,opAssoc.LEFT,),\n                            ('+',2,opAssoc.LEFT,),\n                            (operator,2,opAssoc.LEFT,)\n                            ])\n\nop_prec = [(CaselessLiteral('not'),1,opAssoc.RIGHT,),\n           (CaselessLiteral('and'),2,opAssoc.LEFT ,),\n           (CaselessLiteral('or'), 2,opAssoc.LEFT ,),\n           ('=&gt;', 2,opAssoc.LEFT ,),\n           ]\nsentence = operatorPrecedence(aexpr,op_prec)\nreturn setence\n</code></pre>\n"},{"tags":["python","file-io"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":5,"view_count":34,"score":-5,"question_id":13262840,"title":"read multiple text files and write to one file in one column","body":"<p>I would like to do the following: </p>\n\n<ol>\n<li>read multiple ascii files (*.txt) into memory. I need to <em>skip</em> the first 4 lines of each file. The integer values in these files are written unstructured and continuous line after line. The number of values per line can vary and is not important. </li>\n<li>Once I have read all data in memory I need to write it to one single file and one value per line, i.e. one column. Before writing the values, I need to write 3 lines of header. </li>\n</ol>\n\n<p>I need to have this as script which I can call from the terminal (Bash). I appreciate your help! </p>\n"},{"tags":["python","multithreading"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":13276124,"title":"Check if parent thread is running","body":"<p>I am wondering how to check to see if a parent thread is still alive/stuck. Basically I have a parent thread sending commands to a child. If parent thread dies or hits a deadlock condition I do not want the child to continue to live. Below is basic framework of my implementation thus far.  </p>\n\n<pre><code>from Queue import Queue\nfrom threading import Thread\n\n    class myClass:\n\n        def __init__(self):\n\n            self.currentCommand = Queue()           \n            t = Thread(target=self._run)\n            t.start()            \n\n        def close(self):\n            self._sendCommand(\"close\")\n\n        def _run(self):\n            while True:\n                if self.currentCommand.empty():\n                    pass\n                    #do some task\n                else:\n                    command = self.currentCommand.get()\n                    if command == \"close\":\n                        #clean up\n                        self.currentCommand.task_done()\n                        break\n                    else:\n                        #do command task\n                        self.currentCommand.task_done()\n\n        def _sendCommand(self, command):\n            self.currentCommand.put(command)\n            self.currentCommand.join()\n</code></pre>\n\n<p>One idea I have is to periodically send computer time to child from parent. If time is greater than a set value child will die. Is there a easier or more effect method? Also within the python documentation, there is an isAlive method within the threading class but I am unsure how to use it.</p>\n"},{"tags":["python","math","sequence","verify"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13276235,"title":"Verifying arithmetic sequence python","body":"<p>i'm just wondering how I could check to verify that a list of numbers is arithmetic or not using python, so whether there is a common number in between each item in the list. </p>\n"},{"tags":["python"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13276284,"title":"Python table construction","body":"<p>I have the following data copied to an xml file from an excel sheet,I need to create a table out of this data and out the table to microsoft outlook,initially I was thinking of creating lists of everycolumn,constuct HTMl code out of it and out put to excel...how do split every line because title data can be anything,mixture of spaces etc...anyone has done this before ,appreciate good suggestions,waiting for feedback</p>\n\n<pre><code>CR  FA  CL  TITLE\n12345   Dta 656885  Age out SRR values from buffer in Beacon miss scenario\n16534   fta 656886  To Record stack Event Logging\n76849   cta 654661  To Record HAL and FLM SW Event Logging\n45678   CT  656928  CR1234: BT doesn’t work that Riva neither sends HCI Evt for HID ACL data nor response to CI after entering into real sniffer rat mode.\n</code></pre>\n"},{"tags":["python","django","django-models"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13276955,"title":"Get abbreviated column name from Django model field name","body":"<p>I'm having to write a custom where clause for my query.  I need to get the column name as it appears in the Oracle table from the fields in the model.  I'm looping through the model fields in MyModel._meta.fields and getting the name property.  In every case except one the name of the model field is the name of the column.  In the exception, the field name is too long for the column, so Django's syncdb gave the column an abbreviated name.  How do I get the column name?</p>\n\n<p>My field name:  political_contributions_description</p>\n\n<p>The column name: political_contributions_de0ec3</p>\n\n<p>I have tried field.get_attname_column(), as in </p>\n\n<pre><code>for field in MyModel._meta.fields:\n    field.get_attname_column()\n</code></pre>\n\n<p>But that just gives me the following tuple for my field:</p>\n\n<p>('political_contributions_description', 'political_contributions_description')</p>\n"},{"tags":["python","python-2.7","pexpect"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":11,"score":1,"question_id":13271686,"title":"How do I get timestamps in logfile of pexpect","body":"<p>I am using <strong>pexpect</strong> to handle my telnet and ssh communication.\nI am also writing all request/response in a <strong>logfile</strong>. using <code>pexpect.logfile(filename)</code>.</p>\n\n<p>I would like to have <strong>timestamps</strong> in the logfile as well.\nI can not find it anywhere in the documentation! Does anyone have any idea how to implement this functionality?</p>\n"},{"tags":["python","feedparser"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":436,"score":1,"question_id":2599542,"title":"Parsing <geo:lat>, <geo:long> tags value using feedparser in python!","body":"<p>I am using feedparser for parsing from XML file.But I couldn't parse <code>&lt;geo:lat&gt;</code>, <code>&lt;geo:long&gt;</code> tags using feedparser from that file! Do you people have any idea how I can parse those tags using feedparser in python?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["python","django","apache"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13271254,"title":"Django/Python convert PDF using shell (os.system/Popen) not working in production","body":"<p>I'm using libreoffice on CLI to convert some documents to PDFs within Django.</p>\n\n<p>This is in my view (and also tried in save method on model):</p>\n\n<pre><code>outdir = '/'.join([settings.MEDIA_ROOT, 'pdf'])\ncommand = ['libreoffice', '--headless', '--convert-to', 'pdf', '-outdir', outdir, form.instance.upload.path]\nstdout, stderr = subprocess.Popen(command).communicate()\n</code></pre>\n\n<p>I've also tried the following in place of <code>subprocess.Popen</code>:</p>\n\n<pre><code>os.system(\"libreoffice --headless --convert-to pdf --outdir %s %s\" % (outdir, instance.upload.path))                                                         \n</code></pre>\n\n<p>Then I check it out:</p>\n\n<pre><code># quick check new file exists                                                                                                                                                \nwith open(\"%s/%s.pdf\" % (outdir, os.path.splitext(instance.upload.name)[0])): pass\n</code></pre>\n\n<p>When I run them through the website is just doesn't work -- the PDF file isn't generated.</p>\n\n<p>Thing is: <strong>both these methods work</strong> both in my local environment and when the functions that they're in are called from <code>$ python manage.py shell</code> </p>\n\n<p>The problem is only in production.</p>\n\n<ul>\n<li>Django 1.4  </li>\n<li>Python 2.7.3 </li>\n<li>Server version: Apache/2.2.22 (Ubuntu) Server built:   Feb 13 2012 01:51:50 (Rackspace)</li>\n</ul>\n\n<hr>\n\n<p>Note that I thought I might be experiencing this bug: <a href=\"http://stackoverflow.com/questions/8309465/popen-does-not-work-anymore-with-apache-wsgi-and-python-2-7-2\">Popen does not work anymore with apache/wsgi and python 2.7.2?</a> ... </p>\n\n<p>Though Graham's work around as follows (I added this to my <code>apache2.conf</code> ) doesn't seem to change anything. </p>\n\n<pre><code>WSGIApplicationGroup %{GLOBAL}\n</code></pre>\n\n<p>My sys admin skills aren't great though and I may have done this wrong, and I'm totally stumped, any advice or directions of other things to try or work-arounds would be appreciated.</p>\n"},{"tags":["python","python-2.7"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":7,"view_count":78,"score":-7,"question_id":13275637,"title":"I need somebody to help me with Python Coding","body":"<p>I have this script that extracts data from NDT files and outputs it as a txt file. the only problem is that I can only do it one file at a time and I have to keep finding the directory where the file is located over and over and over lol.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>from Tkinter import *\nfrom tkFileDialog   import askopenfilename \nimport struct\n\nfilename = askopenfilename()\n\nif len(filename) == 0:\n    exit()\n\noutputfilename = filename[:-4] + '.txt'\n\nf = open(filename, 'rb')\nbuf = f.read()\nf.close()\n\nHEADER_SIZE = 0x18\n\nseed = struct.unpack('&lt;H', buf[12:14])[0]\n\noutput = []\n\nfor i in xrange(HEADER_SIZE, len(buf)-1):\n    v = struct.unpack('&lt;B', buf[i])[0]\n    v -= seed\n    v = v &amp; 0xFF\n    b2 = struct.unpack('&lt;B', buf[i+1])[0]\n    x = v ^ b2\n    output.append(x)\n\nf = open(outputfilename, 'wb')\nfor v in output:\n    f.write(struct.pack('B', v)[0])\nf.close()\nexit()\n</code></pre>\n\n<p>Can somebody provide a newer script that either lets me select multiple files or if it finds a ndt file in the folder and subfolders it will automatically extract it.</p>\n\n<p>Also can you figure out a way to make it so that it will put the txt file in a folder in My Documents. Right now all it does is put it under the file I just chose.</p>\n"},{"tags":["python","map","coordinates"],"answer_count":8,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":95,"score":0,"question_id":13057507,"title":"finding coordinates in python","body":"<p>so i have this assignment where i'm given a \"map\"</p>\n\n<pre><code>island = \\\n['     /---------\\       ',\n '     |     x    \\      ',\n '     /           \\--\\  ',\n '    /   x            | ',\n '    |         x      | ',\n '     \\               \\ ',\n '      \\  x  /\\/\\     / ',\n '       \\---/    \\   |  ',\n '                /--/   ']\n</code></pre>\n\n<p>Write a program that counts the number of treasures on the island (x marks the spot) and creates a list of coordinates, e.g. [(1,11), ...] ((1,11) is the actual location of the top treasure in the example) and then prints out a report in the form: There are 3 treasures. There is a treasure at (1,11). There is a treasure at .... Hint: start with a (very short) expression for the symbol in the ith row and the jth column.</p>\n\n<p>Write a program that calculates the length of the coastline. Assume that an <code>'-'</code> and a <code>'|'</code> are <code>1 mile</code>, and a <code>'\\'</code>, <code>'/'</code> is <code>1.4 miles</code>. (This is only a very rough estimate, for many reasons, some of them mathematical).</p>\n\n<p>i'm not even sure where to begin here....can anybody help me out or at the very least point me in the right direction?</p>\n"},{"tags":["python","django","google-app-engine"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13276847,"title":"Getting django's humanize working on App Engine","body":"<p>I'm trying to add commas to floats for display to end users of my application on GAE. The numbers come from json and are part of a 10 item query with 2 times each (aka 20 numbers per page view). For eg.</p>\n\n<pre><code>\"total_reach\": 276160.0, \"total_reach\": 500160.0 \n</code></pre>\n\n<p>I'm using the python GAE SDK 1.7.3 template system and simply want to display the numbers to the end user with commas e.g.: 276,160 and 500,160. Note, I am using the default webbapp2 and standard templates (from google.appengine.ext.webapp import template) which, as I understand it, is based on Django.</p>\n\n<p>The Django floatformat works great to get rid of the decimal, but now I need to add the comma. Django's humanize looks perfect with its intcomma filter. However, I simply can't figure out how to enable it. I suspect its crazy simple and I'm being dense (and am noob to python) - but I'm out of ideas.</p>\n\n<p>While I tried a range of things, the most recent and promising was (based on my understanding of <a href=\"http://code.google.com/p/googleappengine/source/browse/trunk/lib/django/django/contrib/humanize/templatetags/humanize.py?r=41\" rel=\"nofollow\">the source</a>):</p>\n\n<pre><code>from google.appengine.ext.webapp.template import register_template_library\nregister_template_library('django.contrib.humanize.templatetags.humanize')\n</code></pre>\n\n<p>which gave me the following 500:</p>\n\n<pre><code>No module named django.contrib.humanize.templatetags\n</code></pre>\n\n<p>but it seems to be there in the source.</p>\n\n<p>I'm very much at a loss. I've searched around and found items like <a href=\"http://stackoverflow.com/questions/901121/how-to-use-inbulit-django-templatetags-in-google-app-engine\">this</a> which just didn't work and seemed to be aimed at webapp (as opposed to webapp2). Help and thanks!</p>\n"},{"tags":["python","gmail","export","contacts","google-contacts"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":312,"score":3,"question_id":8927936,"title":"Export GMail Contacts via Unattended Script","body":"<p>GMail has a handy-dandy window that lets you export all of your contacts as a CSV file.  If you do this then look at your browser's history, you see that the URL used to initiate the download looks something like:</p>\n\n<p><a href=\"https://mail.google.com/mail/c/data/export?exportType=GROUP&amp;groupToExport=%5EMine&amp;out=GMAIL_CSV&amp;tok=rQt5BTUBABA.N0gr2-zKkG9868fM7tF_FQ.fOgeVayblkGavK2AuFjZ2t\" rel=\"nofollow\">https://mail.google.com/mail/c/data/export?exportType=GROUP&amp;groupToExport=%5EMine&amp;out=GMAIL_CSV&amp;tok=rQt5BTUBABA.N0gr2-zKkG9868fM7tF_FQ.fOgeVayblkGavK2AuFjZ2t</a></p>\n\n<p>I would like to write a batch script in Python that will automatically download this CSV file every night to my server, but I cannot figure out how to get the \"tok\".  I've looked into Google's OAuth, but it seems to be a human-interactive process, whereas I need this to happen at 3AM when all available humans will be asleep.</p>\n\n<p>Can this be done, or has Google made my e-mail account so \"secure\" that I cannot access it via an unattended script?</p>\n\n<p>Thank you!\n   Bryon M. Elliott</p>\n"},{"tags":["python","django","database-design"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":32,"score":2,"question_id":13276361,"title":"How to specify uniqueness across a relationship in Django","body":"<p>I'm trying to represent some movie ratings data in Django. Here is a simplified version of my models that illustrates my problem:</p>\n\n<pre><code>class RatingSystem(models.Model):\n    \"\"\"This denotes a rating authority and territory in which they operate\"\"\"\n    name = models.CharField(max_length=16)\n    territory = models.CharField(max_length=32)\n\nclass Rating(models.Model):\n    \"\"\"This represents a rating designation used by a rating system.\"\"\"\n    code = models.CharField(max_length=16)\n    description = models.TextField()\n    system = models.ForeignKey(RatingSystem)\n\nclass FilmRating(models.Model):\n    \"\"\"This is a rating for a film and the reason why it received the rating.\n\n    Each film can have many ratings, but only one per rating system.\n    \"\"\"\n    rating = models.ForeignKey(Rating)\n    film = models.ForeignKey('Film')\n    reason = models.TextField()\n\nclass Film(models.Model):\n    \"\"\"Data for a film.\"\"\"\n    title = models.CharField(max_length=64)\n    synopsis = models.TextField()\n    ratings = models.ManyToManyField(Rating, through=FilmRating)\n</code></pre>\n\n<p>As the comments indicate, each Film can have multiple ratings, but only one rating per rating system. For instance, a film cannot be rated both 'R' and 'PG' by the MPAA. However, it can be rated 'R' by the MPAA and '15' by the BBFC.</p>\n\n<p>I'm struggling to formalize this constraint in Django. I'd like to do:</p>\n\n<pre><code>unique_together = ('film', 'rating__system')\n</code></pre>\n\n<p>in <code>FilmRating</code> but following a relationship like that doesn't seem to be allowed.  If I were using pure SQL, I would make <code>code</code> and <code>system</code> a composite primary key in <code>Rating</code>, then make a unique constraint on <code>system</code>, and <code>film</code> in <code>FilmRatings</code>. Unfortunately, Django does not support composite keys. I've considered overriding the <code>save()</code> method of <code>FilmRating</code>, but I'd prefer to have the constraint at the database level if possible.</p>\n\n<p>Anyone have any idea how to do this? Restructuring the tables would be fine too if it would help.</p>\n"},{"tags":["python","testing","file-upload","selenium","upload"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":886,"score":2,"question_id":8665072,"title":"How to upload file ( picture ) with selenium, python","body":"<p>is there any possibility how to upload on web picture with selenium testing tool ? I am using python.</p>\n\n<p>I tryed many things, but nothing didnt work. I am desperate.</p>\n\n<p>Upload looks like this :</p>\n\n<p><a href=\"http://img21.imageshack.us/img21/1954/uploadgr.jpg\" rel=\"nofollow\">http://img21.imageshack.us/img21/1954/uploadgr.jpg</a></p>\n\n<p>Thank you for your help</p>\n\n<p>Filip.</p>\n"},{"tags":["python","upload","cgi"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13275657,"title":"Reading a file uploaded via CGI in Python","body":"<p>I am having trouble analyzing a file that is uploaded to my server.  Ideally, what would happen is that the user would upload a .csv and I would run some numeric integration (hence the <code>import numpy as np</code>) from data in the file and return the result.  To test the cgi part before I did any analysis, I made the python script below.  My problem is that message always appears blank, so I get a blank html page displayed in browser at the end.  </p>\n\n<p>Clearly I am not reading the file correctly (which means I can not analyze it), but I have n o idea what I am doing wrong.  My own searches indicate that what I have below should work.</p>\n\n<pre><code>#!/usr/bin/python\n\n#---------------------------------------------\n#=============================================\n#---------------------------------------------\n#imports\n\n#import csv\n#import time as tm\n#import numpy as np\n#import os\nimport cgi, cgitb\n\ncgitb.enable()\n\nform = cgi.FieldStorage()\n\n#The variables\n#httpopen=\"\"\n#httpclose=\"\"\nmessage=\"meow\"\n\n#get the fileitem\nfileitem=form['userfile']\nif fileitem.file:\n    #yay...we got a file\n    message=fileitem.file.readline()\n\n\nprint \"\"\"\\\nContent-Type: text/html\\n\n&lt;html&gt;&lt;body&gt;\n&lt;p&gt;%s&lt;/p&gt;\n&lt;/body&gt;&lt;/html&gt;\n\"\"\" % (message,)\n</code></pre>\n\n<p>And here is the html form that gives the upload:</p>\n\n<pre><code>&lt;html&gt;\n&lt;body&gt;\n   &lt;form enctype=\"multipart/form-data\" \n                     action=\"capacity_rewrite.py\" method=\"post\"&gt;\n   &lt;p&gt;File: &lt;input type=\"file\" name=\"userfile\" /&gt;&lt;/p&gt;\n   &lt;p&gt;&lt;input type=\"submit\" value=\"Upload\" /&gt;&lt;/p&gt;\n   &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Thanks,</p>\n"},{"tags":["python","pdf"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":3,"view_count":24,"score":-1,"question_id":13276409,"title":"How to add image to PDF file in Python?","body":"<p>I have a PDF document but I must put my own image on it. It's an official document and I must apply an image with the text \"example\" to the whole page.</p>\n\n<p>Is there any way to solve this problem in python?</p>\n\n<p>(text in the document is curves)</p>\n"},{"tags":["python","dictionary","autovivification"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":25,"score":4,"question_id":13276218,"title":"In python, how does the following AutoVivification class work?","body":"<p>In searching for a way of working with nested dictionaries, I found the following code posted by <a href=\"http://stackoverflow.com/users/17160/nosklo\">nosklo</a>, which I would like to have explained, please.</p>\n\n<pre><code>class AutoVivification(dict):\n    \"\"\"Implementation of perl's autovivification feature.\"\"\"\n    def __getitem__(self, item):\n        try:\n            return dict.__getitem__(self, item)\n        except KeyError:\n            value = self[item] = type(self)()\n            return value\n</code></pre>\n\n<p>Testing:</p>\n\n<pre><code>a = AutoVivification()\n\na[1][2][3] = 4\na[1][3][3] = 5\na[1][2]['test'] = 6\n\nprint a\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{1: {2: {'test': 6, 3: 4}, 3: {3: 5}}}\n</code></pre>\n\n<p>I'm a pretty newbie programmer.  I have learned most of what I know on my own time on the side, with my only formal training being on Turbo Pascal back in high school.  I understand and am able to use classes in simple ways, such as using <code>__init__</code>, class methods, and storing data within instances of the class with <code>foo.man = 'choo'</code>.  </p>\n\n<p>I have no idea how the series of square brackets get directed, correctly, through the class (I presume they are calling <code>__getitem__</code> somehow) and don't understand how they each get handled so concisely without having to call the method three times individually.</p>\n\n<p>I was under the impression that the <code>(dict)</code> in the class declaration would be handled by an <code>__init__</code>.  </p>\n\n<p>I've used <code>try: except:</code> before, though again, in quite simple ways.  It looks to me like the <code>try</code>, when it runs, is calling a series of function <code>__getitem__</code>.  I gather that if the current level's dictionary exists, the try will pass and go to the next dictionary.  The <code>except</code>, I gather, runs when there's a <code>KeyError</code> but I haven't seen <code>self</code> used like that before.  <code>Self</code>'s being treated like a dictionary while I thought <code>self</code> was an instance of <code>class AutoVivification</code>... is it both?  I have never assigned twice in a row like this <code>foo = man = choo</code> but suspect that <code>value</code> is pointing to <code>self[item]</code> while <code>self[item]</code> points to the result of <code>type(self)</code>.  But <code>type(self)</code> would return something like this: <code>&lt;class '__main__.AutoVivification'&gt;</code> wouldn't it?  I have no idea what the extra round brackets at the end there are for.  Because I don't know how the function is being called, I don't understand where <code>value</code> is being returned.</p>\n\n<p>Sorry for all the questions!  There is so much in this that I don't understand and I don't know where to look it up short of reading through the documentation for hours in which I'd retain very little.  This code looks like it'll serve my purposes but I want to understand it before using it.</p>\n\n<p>In case you want to know what I'm trying to do in my program with nested dictionaries: I'm trying to hold map data on an astronomical scale.  While I can't create dictionaries/lists of 10^6 items nested 4 times (that would be 10^24 items!), the space is mostly empty so I can leave the empty values out completely and only assign when there's something there.  What was stumping me was an efficient way of handling the dictionaries.</p>\n"},{"tags":["python","c","python-c-api","python-c-extension"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13276145,"title":"Python C extension - Receiving a dict as argument","body":"<p>I'm writing a C extension and I'm quite lost on how to receive a dict as an argument. As the docs don't have any specifics on how to achieve this I tried to parse the argument as a Python Object and then manipulate it as a dict:</p>\n\n<pre><code>PyTypeObject *dict;\n\nif(!PyArg_ParseTuple(args, \"o\", &amp;dict))\n    return NULL;\n</code></pre>\n\n<p>But the code fails on the parsing:</p>\n\n<pre><code>Python 2.7.2 (default, Jun 20 2012, 16:23:33) \n[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import plotting\n&gt;&gt;&gt; plotting.plot({'wff':0})\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: must be impossible&lt;bad format char&gt;, not dict\n</code></pre>\n\n<p>As far as I can understand from the error message the format char is wrong (I thought \"o\" should represent any Python object).</p>\n\n<p>What is the best way to parse a Python dict to a C pointer? I'm digging through the documentation but I haven't found anything similar to this.</p>\n\n<p>Thank you.</p>\n"},{"tags":["python","metaprogramming","decorator","self-modifying"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":47,"score":3,"question_id":13198821,"title":"Is there a way to decorate/perform operations on every line of a function in Python?","body":"<p>Say I have a function or method that does something repetitive, like checking a value, before performing every operation it does, like so:</p>\n\n<pre><code>def myfunc():\n    if mybool:\n        do_operation_1()\n    else:\n        return\n\n    if mybool:\n        do_operation_2()\n    else:\n        return\n\n    ...\n</code></pre>\n\n<p>These checks get repetitive, and end up wasting a lot of time and keyboard springs, especially when they are needed very often. </p>\n\n<p>If you have control over the operation functions, like, <code>do_operation_N</code> you can decorate the functions with something that checks the boolean. </p>\n\n<p>But what if you don't have control over the individual <code>do_operation_N</code> operations? If, for each line in a function or method, I want the same check to be performed, is there some way to \"insert\" it without explicitly writing it in on each operation line? For example, is there some decorator magic by which I could do the following?</p>\n\n<pre><code>def magic_decorator(to_decorate):\n    def check(*args, **kwargs):\n        for call in to_decorate: #magic\n            if mybool:\n                to_decorate.do_call(call) #magic\n            else:\n                return #or break, raise an exception, etc\n    return check\n\n@magic_decorator\ndef myfunc():\n    do_operation_1()\n    do_operation_2()\n    ...\n</code></pre>\n\n<p>If there is a way to achieve this, I don't care if it uses decorators or not; I just want some way to say \"for every line in function/method X, do Y first\". </p>\n\n<p>The \"magic\" example of a <code>do_call</code> method above is shorthand for what I'm after, but it would encounter serious problems with out-of-order execution of individual lines (for example, if a function's first line was a variable assignment, and its second was a use of that variable, executing them out of order would cause problems). </p>\n\n<p>To be clear: the ability to externally control the line-by-line order of a function's execution is <em>not</em> what I'm trying to achieve: ideally, I'd just implement something that, in the natural execution order, would perform an operation each time <code>myfunc</code> does something. If \"does something\" ends up being limited to \"calls a function or method\" (excluding assignments, <code>if</code> checks, etc), that is fine. </p>\n\n<p>Cheers!</p>\n"},{"tags":["python","mongodb","pymongo"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13130589,"title":"Pymongo Safe Writes is giving \"bad format char passed to Py_BuildValue\"","body":"<p>I was trying to get the inserts to MongoDB as safe writes, and I was getting unauthorized error messages (MongoDB 2.2 &amp; Pymongo 2.2) . After Upgrading to Pymongo 2.3, that one is gone but I'm getting another message with the following trace:</p>\n\n<pre><code>        MongoDB['my_collection'].save({'test' : 1111111} , safe = True)\n      File \"D:\\Python24\\Lib\\site-packages\\pymongo\\collection.py\", line 241, in save\n        return self.insert(to_save, manipulate, safe, check_keys, **kwargs)\n      File \"D:\\Python24\\Lib\\site-packages\\pymongo\\collection.py\", line 315, in insert\n        continue_on_error, self.__uuid_subtype), safe)\n      File \"D:\\Python24\\Lib\\site-packages\\pymongo\\connection.py\", line 831, in _send_message\n        rv = self.__check_response_to_last_error(response)\n      File \"D:\\Python24\\Lib\\site-packages\\pymongo\\connection.py\", line 753, in __check_response_to_last_error\n        response = helpers._unpack_response(response)\n      File \"D:\\python24\\lib\\site-packages\\pymongo\\helpers.py\", line 111, in _unpack_response\n        as_class, tz_aware, uuid_subtype)\n    SystemError: bad format char passed to Py_BuildValue\n</code></pre>\n\n<p>If I turn the   <code>safe=False</code> everything works perfectly fine. </p>\n\n<p>Any ideas about this would be helpful.</p>\n\n<p>Thanks,</p>\n"},{"tags":["python"],"answer_count":8,"favorite_count":4,"up_vote_count":14,"down_vote_count":0,"view_count":2891,"score":14,"question_id":1456373,"title":"Two way / reverse map [python]","body":"<p>I'm doing this switchboard thing in python where I need to keep track of who's talking to whom, so if Alice --> Bob, then that implies that Bob --> Alice. </p>\n\n<p>Yes, I could populate two hash maps, but I'm wondering if anyone has an idea to do it with one. </p>\n\n<p>Or suggest another data structure. </p>\n\n<p>EDIT: There are no multiple conversations. Lets say this is for a customer service call center, so when Alice dials into the switchboard, she's only going to talk to Bob. His replies also go only to her. </p>\n"},{"tags":["python","dbus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":388,"score":0,"question_id":10158684,"title":"Connecting to dbus over tcp","body":"<p>I wrote a simple python program to play and pause banshee music player.\nWhile its working on my own machine, I have trouble doing it to a remote computer, connected to the same router (LAN).\nI edited the session.conf of the remote machine, to add this line:</p>\n\n<pre><code>&lt;listen&gt;tcp:host=localhost,port=12434&lt;/listen&gt;\n</code></pre>\n\n<p>and here is my program:</p>\n\n<pre><code>    import dbus\n\n\n    bus_obj=dbus.bus.BusConnection(\"tcp:host=localhost,port=12434\")\n    proxy_object=bus_obj.get_object('org.bansheeproject.Banshee',                              \n    '/org/bansheeproject/Banshee/PlayerEngine')\n\n    playerengine_iface=dbus.Interface(proxy_object,\n    dbus_interface='org.bansheeproject.Banshee.PlayerEngine')\n\n    var=raw_input(\"\\nPress\\n1 to play\\n2 to pause\\n3 to exit\\n\")\n\n    while (var!=\"3\"):\n        var=raw_input(\"\\nPress\\n1 to play\\n2 to pause\\n3 to exit\\n\")\n\n\n    if var==\"1\":\n               print \"playing...\"\n                     playerengine_iface.Play()\n\n    elif var==\"2\":\n                    print \"pausing\"\n                    playerengine_iface.Pause()\n</code></pre>\n\n<p>This is what i get when i try to execute it</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"dbus3.py\", line 4, in &lt;module&gt;\n    bus_obj=dbus.bus.BusConnection(\"tcp:host=localhost,port=12434\")\n  File \"/usr/lib/python2.7/dist-packages/dbus/bus.py\", line 125, in __new__\n    bus = cls._new_for_bus(address_or_type, mainloop=mainloop)\ndbus.exceptions.DBusException: org.freedesktop.DBus.Error.NoServer: Failed to connect to socket \"localhost:12434\" Connection refused\n</code></pre>\n\n<p>What am I doing wrong here?\nshould i edit /usr/lib/python2.7/dist-packages/dbus/bus.py</p>\n\n<p>UPDATE:</p>\n\n<p>ok, here is the deal \nwhen i add </p>\n\n<pre><code>&lt;listen&gt;tcp:host=192.168.1.7,port=12434&lt;/listen&gt;\n</code></pre>\n\n<p>to to /etc/dbus-1/session.conf, then reboot, hoping it would start listening on reboot,\nIt never boots. It gets stuck on loading screen and occasionally, a black screen with the following text flashes:</p>\n\n<pre><code>Pulseaudio Configured For Per-user Sessions Saned Disabled;edit/etc/default/saned\n</code></pre>\n\n<p>so, when i go ctrl+alt+f1 , change session.conf to original state and reboot, it boots properly.</p>\n\n<p>Whats all that about?\nHow can I make dbus daemon listen for tcp connections, without encountering problems?</p>\n"},{"tags":["python","dll","ada","name-mangling"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":29,"score":2,"question_id":13271818,"title":"Preventing mangled names in Ada DLL","body":"<p>Is there a simple way to prevent Ada names from getting mangled when creating an Ada DLL?</p>\n\n<p>Here is my .adb code</p>\n\n<pre><code>with Ada.Text_IO;\npackage body testDLL is\n   procedure Print_Call is\n   begin\n      Ada.Text_IO.Put_Line(\"Hello World\");\n   end Print_Call;\n\n   function Add_Nums(A,B : in Integer) return Integer is\n   begin\n      return A + B;\n   end Add_Nums;\n\nend testDLL;\n</code></pre>\n\n<p>my .ads</p>\n\n<pre><code>package testDLL is\n   procedure Print_Call;\n   pragma export (dll, Print_Call, \"Print_Call\");\n\n   function Add_Nums(A,B : in Integer) return Integer;\n   pragma export (dll, Add_Nums, \"Add_Nums\");\nend testDLL;\n</code></pre>\n\n<p>my python</p>\n\n<pre><code>import ctypes\n\nTestDLL = ctypes.WinDLL (\"libTestDLL.dll\")\nPrint_Call = getattr(TestDLL, \"Print_Call@0\")\nPrint_Call()\n</code></pre>\n\n<p>you can see that I have to add '@0' to the end of my function name, but this seems to change when I move the same code to a different compiler. This is creating some problems for me. I need either a standard mangling format or a way to remove the mangling all together. </p>\n"},{"tags":["python","python-2.7","ubuntu-12.04","pylab"],"answer_count":4,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":2558,"score":0,"question_id":10965336,"title":"python error: no module named pylab","body":"<p>I am new to Python and want to use its <code>plot</code> functionality to create graphs. I am using ubuntu 12.04. I followed the Python installation steps from <a href=\"http://eli.thegreenplace.net/2011/10/10/installing-python-2-7-on-ubuntu/\" rel=\"nofollow\">http://eli.thegreenplace.net/2011/10/10/installing-python-2-7-on-ubuntu/</a> but when I do </p>\n\n<pre><code>from pylab import *\n</code></pre>\n\n<p>I am getting this error</p>\n\n<pre><code>&gt;&gt;&gt; from pylab import *\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: No module named pylab\n</code></pre>\n\n<p>My Python version is <code>python 2.7</code>. Can anybody tell me what I am missing here?</p>\n"},{"tags":["javascript","python","webkit"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":47,"score":2,"question_id":13268947,"title":"Python and reading JavaScript variable value","body":"<p>I am very new to Python programming, so please bear with me.</p>\n\n<p>I have an HTML file with several div layers. This file is opened in a webkit.WebView object. Each div layer saves a value in a global variable (JavaScript) when clicked upon.</p>\n\n<p>How can I read the value of that global JavaScript variable from my Python script?</p>\n\n<p>I found some answers but they don't seem to fit my situation (but I can be wrong, of course):  </p>\n\n<p><a href=\"http://stackoverflow.com/questions/2894946/passing-javascript-variable-to-python\">Passing JavaScript variable to Python</a>  </p>\n\n<p><a href=\"http://stackoverflow.com/questions/3690116/parse-javascript-variable-with-python\">Parse JavaScript variable with Python</a></p>\n\n<p>[EDIT]<br>\nI'm using webkit.WebView because I have to show this in an existing glade (libglade) application.</p>\n"},{"tags":["python"],"answer_count":4,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":69,"score":4,"question_id":13274976,"title":"Replacing chars in a string in every way","body":"<p>I'm looking for help on a function that takes a string, and replaces every character in that string in every way. I'm not quite sure how to word my question so that it makes sense so I'll show you what it's supposed to do.</p>\n\n<pre><code>stars('1')\nreturns ['*']\n\nstars('12')\nreturns ['*1', '1*', '**']\n\nstars('123')\nreturns ['*23', '1*3', '12*', '**3', '*2*', '**1', '***']\n\nstars('1234')\nreturns ['*234', '1*34', '12*4', '123*', '**34', '*2*4', '*23*', '1**4', '1*3*', \n         '12**', '***4', '**3*', '*2**', '1***', '****']\n</code></pre>\n\n<p>Did that all out by hand, but even if I made a mistake, you should get the idea of what I'm looking for now. The final case (all *'s) isn't required but I put it in there to make sure the problem was understood.</p>\n\n<p>Here is what I've come up with so far but it doesn't quite work.</p>\n\n<pre><code>def stars(n):\n    lst = []\n    length = len(n)\n    for j in xrange(0, length):\n        p = list(n)\n        for k in xrange(j, length):\n            p[k] = '*'\n            lst += [''.join(p)]\n    return lst\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>'1' returns ['*']\n'12' returns ['*2', '**', '1*']\n'123' returns ['*23', '**3', '***', '1*3', '1**', '12*']\n'1234' returns ['*234', '**34', '***4', '****', '1*34', '1**4', '1***', '12*4', '12**', '123*']\n</code></pre>\n\n<p>Any help would be greatly appreciated. Would like this answered in Python if possible, but if you don't know Python, then pseudocode or another language would be acceptable. If it's written clearly, I'm sure I could convert it into Python on my own.</p>\n"},{"tags":["python","mysql","django","sqlalchemy","django-orm"],"answer_count":8,"favorite_count":4,"up_vote_count":4,"down_vote_count":0,"view_count":244,"score":4,"question_id":2110238,"title":"Merging duplicates in a list? - Question is more complex than it seems","body":"<p>So I have a huge list of entries in a DB (<strong>MySql</strong>)</p>\n\n<p>I'm using <strong>Python</strong> and <strong>Django</strong> in the creation of my web application.</p>\n\n<p>This is the base Django model I'm using:</p>\n\n<pre><code>class DJ(models.Model):\n    alias = models.CharField(max_length=255)\n    #other fields...\n</code></pre>\n\n<p><strong>In my DB I have</strong> now <strong>duplicates</strong></p>\n\n<blockquote>\n  <p>eg. <em>Above &amp; Beyond</em>, <em>Above and Beyond</em>, <em>Above Beyond</em>, <em>DJ Above and Beyond</em>, \n         <em>Disk Jokey Above and Beyond</em>, ...</p>\n</blockquote>\n\n<p>This is a problem... as it blows a big hole in my DB and therefore my application.</p>\n\n<hr>\n\n<p>I'm sure other people have encountered this problem and thought about it.</p>\n\n<p>My ideas are the following:</p>\n\n<ul>\n<li><p>Create a set of rules so a new entry cannot be created?</p>\n\n<blockquote>\n  <p>eg. <strong>\"DJ Above and Beyond\"</strong> cannot be\n  created because <strong>\"Above &amp; Beyond\"</strong> is in\n  the DB</p>\n</blockquote></li>\n<li><p>Relate these aliases to each other somehow?</p>\n\n<blockquote>\n  <p>eg. relate <strong>\"DJ Above and Beyond\"</strong> to <strong>\"Above &amp; Beyond\"</strong></p>\n</blockquote></li>\n</ul>\n\n<hr>\n\n<p>I have literally no clue how to go on about this, even if someone could point me into a direction that would be very helpful.</p>\n\n<p>Any help would be very much appreciated! Thank you guys.</p>\n"},{"tags":["python","metadata"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":51,"score":3,"question_id":13262491,"title":"Meta data in python classes","body":"<p>I have seen in some python libraries a common pattern to use a class definition named Meta inside the object, like django Models or tastypie Resources. Also some others doesn't use this like Celery Tasks.</p>\n\n<p><em>Is there any obvious reason for this?</em> from the tastypie code I can see that some metaclass is playing with the inner Meta class definition. <em>Is there any difference in meta-data and just plain attributes of the model?</em> in django models is kind of easy to say: attributes are just the fields like age = IntegerField, but I can think in attribute called fields, or just use _attrs or __attrs for the metadata.</p>\n\n<p><em>Is this consider a good practice?</em></p>\n\n<p>Bye.</p>\n\n<p>Edited:</p>\n\n<p>I would like to add something to this:</p>\n\n<p>Are there any more libraries approaching this in a similar way? or there are different ways to do the same? is there any common pattern in here that I could check? Thanks. </p>\n\n<p>I want to start a library and I like both ways, and is not related too much with this two libraries, so there's not consistency issues with selecting one or the other</p>\n\n<p>Bye.</p>\n"},{"tags":["python","unit-testing","testing","command-line-arguments","py.test"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13275738,"title":"Can't get pytest to understand command-line arguments on setups","body":"<p>So I have been trying to get pytest to run selenium tests on different environments based on some command-line argument. But it keeps throwing this error:</p>\n\n<pre><code>TypeError: setup_class() takes exactly 2 arguments (1 given)\n</code></pre>\n\n<p>It seems that it is understanding that <code>setup_class</code> takes 2 arguments, but <code>host</code> is not being passed. Here's the code for <code>setup_class</code>:</p>\n\n<pre><code>def setup_class(cls, host):\n        cls.host = host\n</code></pre>\n\n<p>And here is the conftest.py file:</p>\n\n<pre><code>def pytest_addoption(parser):\n    parser.addoption(\"--host\", action=\"store\", default='local',\n        help=\"specify the host to run tests with. local|stage\")\n\n@pytest.fixture(scope='class')\ndef host(request):\n    return request.config.option.host\n</code></pre>\n\n<p>What is strange is that <code>host</code> is being seen by the functions (so if I make a test_function and pass host as a parameter, it gets it just fine), it is just the <code>setup</code> fixtures that are not working. </p>\n\n<p>I looked around and found this, <a href=\"http://stackoverflow.com/questions/11358437/pytest-use-funcargs-inside-setup-module\">pytest - use funcargs inside setup_module</a> but that doesn't seem to be working (and it is outdated since 2.3. </p>\n\n<p>Does anyone know what I'm doing wrong? Using py.test 2.3.2. </p>\n\n<p>Thanks</p>\n"},{"tags":["python","recursion","iterator","python-2.7","generator"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":37,"score":3,"question_id":13275479,"title":"Convert recursive generator object to list","body":"<p>I have been trying to implement a simple tree structure in Python. A tree begins at a single \"root\" node which has children, each of its children may have own children and so forth. </p>\n\n<p>Now, I want to print the names of all nodes of the tree, that is I want to convert it to a list. I sought to employ recursiveness but unfortunately yielding recursively returns a sub-tree of generator objects which I cannot convert to nodes.</p>\n\n<p>Could somebody help me and point out what I am doing wrong here please?</p>\n\n<pre><code>class Node:\n\n  def __init__(self,name):\n    self.name = name\n    self.children = []\n    self.parent = None\n\n\n  def appendChild(self,child):\n    self.children.append(child)\n    if child is not None:\n      child.parent = self\n\n\n  def listChildren(self):\n    yield self\n    for child in self.children:\n      yield child.listChildren()\n    raise StopIteration\n\n# test\nr = Node(\"root\")\n\nn = Node(\"name\")\nr.appendChild(n)\nn.appendChild(Node(\"name2\"))\nn.appendChild(Node(\"name3\"))\n\nc = Node(\"child\")\nn.appendChild(c)\nc.appendChild(Node(\"child2\"))\nc.appendChild(Node(\"child3\"))\n\nr.appendChild(Node(\"name4\"))\nr.appendChild(Node(\"name5\"))\nr.appendChild(Node(\"name6\"))\n\nfor child in r.listChildren():\n    print child.name\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/User/Documents/TreeNode.py\", line 40, in &lt;module&gt;\n    print child.name\nAttributeError: 'generator' object has no attribute 'name'\n</code></pre>\n\n<p>A generator is supposed to be called when it is being iterated over, but in my case every child in r.listChildren() is, in turn, a generator object. If this is a design flaw, then I would have to look for another way of generating a list of node names.</p>\n\n<p>Thank you in advance!</p>\n"},{"tags":["java","python","client-server","twisted"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13270871,"title":"Twisted python server and Java chat","body":"<p>i have found this amazing tutorial on raywenderlich.com:</p>\n\n<p><a href=\"http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server\" rel=\"nofollow\">http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server</a></p>\n\n<p>it create a Twisted Python server, and talk with app iphone chat, i would let the server talk also with a Java chat, and now i write some code, this is the python server:</p>\n\n<pre><code>from twisted.internet.protocol import Protocol, Factory\nfrom twisted.internet import reactor\n\n\nclass IphoneChat(Protocol):\ndef connectionMade(self):\n    #self.transport.write(\"\"\"connected\"\"\")\n    self.factory.clients.append(self)\n    print \"clients are \", self.factory.clients\n\ndef connectionLost(self, reason):\n    self.factory.clients.remove(self)\n\ndef dataReceived(self, data):\n    #print \"data is \", data\n    a = data.split(':')\n    if len(a) &gt; 1:\n        command = a[0]\n        content = a[1]\n\n        msg = \"\"\n        if command == \"iam\":\n            self.name = content\n            msg = self.name + \" has joined\"\n\n        elif command == \"msg\":\n            msg = self.name + \": \" + content\n\n        print msg\n\n        for c in self.factory.clients:\n            c.message(msg)\n\ndef message(self, message):\n    self.transport.write(message + '\\n')\n\n\nfactory = Factory()\nfactory.protocol = IphoneChat\nfactory.clients = []\n\nreactor.listenTCP(1025, factory)\nprint \"Chat server started\"\nreactor.run()\n</code></pre>\n\n<p>then i create a simple java example to connect to the server:</p>\n\n<pre><code>import java.net.*;\nimport java.io.*;\nimport java.util.*;\n\npublic class MyClassSocket  {\n\nprivate ObjectInputStream sInput;       // to read from the socket\nprivate ObjectOutputStream sOutput;     // to write on the socket\nprivate Socket socket;\n\nprivate String server, username;\nprivate int port;\n\nMyClassSocket(String server, int port, String username) {\n    this.server = server;\n    this.port = port;\n    this.username = username;\n}\n\nprivate void display(String msg) {\n\n    System.out.println(msg);      // println in console mode\n\n}\n\npublic boolean start() {\n\n    try {\n        socket = new Socket(server, port);\n    }\n    // if it failed not much I can so\n    catch(Exception ec) {\n        display(\"Error connectiong to server:\" + ec);\n        return false;\n    }\n\n    String msg = \"Connection accepted \" + socket.getInetAddress() + \":\" + socket.getPort();\n    display(msg);\n\n    try\n    {\n\n        sInput  = new ObjectInputStream(socket.getInputStream()); //&lt;-------- block here\n        sOutput = new ObjectOutputStream(socket.getOutputStream());\n    }\n    catch (IOException eIO) {\n        display(\"Exception creating new Input/output Streams: \" + eIO);\n        return false;\n    }\n\n    return true;\n\n}\n\npublic static void main(String[] args) {\n\n    MyClassSocket client = new MyClassSocket(\"localhost\",1025,\"PieroJava\");\n    client.start();\n}\n\n}\n</code></pre>\n\n<p>The code freeze in the point i comment in the code above, and i can see in the server terminal that there is a new connection, and i can see in the client terminal that i connect but don't go over here:</p>\n\n<pre><code>sInput  = new ObjectInputStream(socket.getInputStream());\n</code></pre>\n\n<p>how i can do?</p>\n"},{"tags":["python","unicode"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13275301,"title":"How can I convert a str representation of a unicode string to unicode?","body":"<p>I'm running a python program on a user's computer in Portugal, where the user's username contains unicode characters.  I would like to have <code>os.path.expanduser('~')</code> return something functional since I use the resulting path for some file operations, but it currently returns a python <code>str</code> representation of a unicode string:</p>\n\n<pre><code>&gt;&gt;&gt; import os\n&gt;&gt;&gt; os.path.expanduser('~')\n'C:\\\\Users\\\\V\\xe2nia'\n</code></pre>\n\n<p>But this is a python string ... how can I convert this to an actual unicode string that Windows will recognize as a valid filepath?</p>\n"},{"tags":["python","osx","segmentation-fault","ctypes","pcap"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13275038,"title":"python segmentation fault using pcap via ctypes","body":"<p>I am porting my sniffer from C to Python using libpcap via ctypes. Here is the python code:</p>\n\n<pre><code>import ctypes, sys\nfrom ctypes.util import find_library\n\nif sys.platform == \"darwin\":\n    _pcap = ctypes.cdll.LoadLibrary(find_library(\"libpcap\"))\nelif sys.platform == \"linux2\":\n    _pcap = ctypes.cdll.LoadLibrary(\"libpcap.so\")\n\nerrbuf = ctypes.create_string_buffer(256)\n\npcap_lookupdev = _pcap.pcap_lookupdev\npcap_lookupdev.restype = ctypes.c_char_p\ndev = pcap_lookupdev(errbuf)\nprint dev\n\n# create handler\npcap_create = _pcap.pcap_create\nhandle = pcap_create(dev, errbuf)\nprint handle\nif not handle:\n    print \"failed creating handler:\",errbuf\n    exit()\n\n# monitor mode\npcap_can_set_rfmon = _pcap.pcap_can_set_rfmon\nprint \"can rfmon:\",pcap_can_set_rfmon(handle)\n</code></pre>\n\n<p>On Linux it works perfectly fine, but on Mac OS X it runs into a segmentation fault when I use handle. The value of handle even is sometimes negative, sometimes positive. I already tried to change the return type of pcap_create to unsigned int, but that didn't help, but I think it returns a wrong type under OS X...</p>\n\n<p>I did a <code>printf(\"size of pcap_t: %zu\\n\", sizeof(pcap_t *));</code> on both systems in C to get the size of pcap_t handler type. On Linux it says 4 and on OS X 8. But I I don't know how to go on from this point...</p>\n\n<p>Or am I on the wrong path? Does anyone have an idea?</p>\n"},{"tags":["python","recursion","python-3.x"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13274207,"title":"Python3 Recursivley Sum Digits of an Integer","body":"<p>I need help implementing a function that will take the digits of an integer and sum them together. As long as the sumDigits function implements recursion, it is valid, and the main function must be left as is. I will include a template below:</p>\n\n<pre><code>def sumdigits(value): \n    #recursively sum digits \n\ndef main():\n    number=int(input(“Enter a number :  ”))\n    print(sumdigits(number))\n\nmain()\n</code></pre>\n\n<p>Thank you</p>\n"},{"tags":["python","string","python-3.x","md5"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":64,"score":0,"question_id":13259691,"title":"convert String to MD5","body":"<p>Ok I am trying to write a basic converter of a string to <code>md5</code> hash code but when I run my program I keep getting an error that say's:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\Shane\\Documents\\Amer CISC\\lab4.py\", line 30, in &lt;module&gt;\n    assertEqual (computeMD5hash(\"The quick brown fox jumps over the lazy dog\"),(\"9e107d9d372bb6826bd81d3542a419d6\"))\n  File \"C:\\Users\\Shane\\Documents\\Amer CISC\\lab4.py\", line 27, in computeMD5hash\n    m.update(string)\nTypeError: Unicode-objects must be encoded before hashing\n</code></pre>\n\n<p>My code looks like this:</p>\n\n<pre><code>def computeMD5hash(string):\n    import hashlib\n    from hashlib import md5\n    m = hashlib.md5()\n    m.update((string))\n    md5string=m.digest()\n    return md5string\n</code></pre>\n"},{"tags":["python","flask","flask-blueprint"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":80,"score":2,"question_id":13005476,"title":"Flask render_template context is None within a Blueprint","body":"<p>I'm relatively new to Flask, but I'm already finding the need to use Blueprints. However, in my Blueprint, I'm trying to render a template, but getting an error.</p>\n\n<p>When hooked up as a WSGI application (on Dreamhost), the render_template function returns this error:</p>\n\n<pre><code>File \".../app/ui/__init__.py\", line 95, in index\nresponse = make_response(render_template('index.html', **data))\n\nFile \".../flask/templating.py\", line 123, in render_template\nctx.app.update_template_context(context)\n\nAttributeError: 'NoneType' object has no attribute 'app'\n</code></pre>\n\n<p>However, when I call the app.py directly in debug mode it works perfectly! (below)</p>\n\n<pre><code>python app/app.py\n</code></pre>\n\n<p>In app.py:</p>\n\n<pre><code>if __name__ == '__main__':\n    app.run(debug=True, host='0.0.0.0')\n</code></pre>\n\n<p><strong>EDIT:</strong> Rendering template:</p>\n\n<pre><code>@ui_blueprint.route('/', methods=['GET'])\n@ui_blueprint.route('/home', methods=['GET'])\ndef index():\n    data = {\n        'title': 'Index'\n    }\n    response = make_response(render_template('index.html', **data))\n    return response\n</code></pre>\n\n<p><strong>EDIT 2:</strong> <code>ctx</code> is:</p>\n\n<ul>\n<li><code>None</code> in the WSGI app case</li>\n<li><code>&lt;RequestContext 'http://aaa.bbb.com:5000/' [GET] of __init__&gt;</code> in the direct call case</li>\n</ul>\n\n<p>Any ideas how I might fix this error? Thanks!</p>\n"},{"tags":["python","ipython"],"answer_count":1,"favorite_count":2,"up_vote_count":6,"down_vote_count":0,"view_count":147,"score":6,"question_id":12544056,"title":"How to I get the current IPython Notebook name","body":"<p>I am trying to obtain the current NoteBook name when running the ipython notebook. I know I can see it at the top of the notebook. What I am after something like</p>\n\n<pre><code>currentNotebook = IPython.foo.bar.notebookname()\n</code></pre>\n\n<p>I need to get the name in a variable.</p>\n"},{"tags":["python","qt","pyqt"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13269936,"title":"Python QT ProgressBar","body":"<p>When using the following code my application stalls after a couple of seconds.\nAnd by stalls I mean hangs. I get a window from Windows saying wait or force close.</p>\n\n<p>I might add that this only happens when I click either inside the progress bar window or when I click outside of it so it loses focus. If I start the example and do not touch anything it works like it should.</p>\n\n<pre><code>from PyQt4 import QtCore\nfrom PyQt4 import QtGui\n\n\nclass ProgressBar(QtGui.QWidget):\n    def __init__(self, parent=None, total=20):\n        super(ProgressBar, self).__init__(parent)\n        self.name_line = QtGui.QLineEdit()\n\n        self.progressbar = QtGui.QProgressBar()\n        self.progressbar.setMinimum(1)\n        self.progressbar.setMaximum(total)\n\n        main_layout = QtGui.QGridLayout()\n        main_layout.addWidget(self.progressbar, 0, 0)\n\n        self.setLayout(main_layout)\n        self.setWindowTitle(\"Progress\")\n\n    def update_progressbar(self, val):\n        self.progressbar.setValue(val)   \n</code></pre>\n\n<p>Using this like so:</p>\n\n<pre><code>app = QtGui.QApplication(sys.argv)\nbar = ProgressBar(total=101)\nbar.show()\n\nfor i in range(2,100):\n    bar.update_progressbar(i)\n    time.sleep(1)\n</code></pre>\n\n<p>Thanks for any help.</p>\n"},{"tags":["python","linux","sockets","reverse-dns"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13275291,"title":"avoid RDNS lookup for an HTTP request","body":"<p>I try to set up an HTTP connection using python, using the following code. I do the DNS resolving myself because I cannot change things like the <code>hosts</code> and <code>resolv.conf</code> files on the machines in question.</p>\n\n<pre><code>class resolver(object):\n    def __init__(self, server):\n        self.server = server\n    def __call__(self, host):\n        res = check_output('host %s %s' % (host, self.server), shell = True)\n        ips = findall('has address (\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})', res)\n        return choice(ips)\n\nclass http_connection(httplib.HTTPConnection):\n    dns_server = '8.8.8.8'\n    def connect(self):\n        resolv = resolver(http_connection.dns_server)\n        self.sock = socket.create_connection((resolv(self.host), self.port), self.timeout)\n...\nx = http_connection('%s:%d' % (args.host, args.port))\nx.request('GET','/start/')\nrep = x.getresponse()\nprint rep.read()\n</code></pre>\n\n<p>Everything works, I get an IP from DNS, the socket gets created (with an ip-port pair, not a hostname) and I do get an answer. The only thing is, it takes a long time, up to 5-6 seconds. After debugging I found out that for some reason a reverse DNS lookup for the resolved IP happens, which times out. I verified this was the problem by reproducing it on another machine, after adding an entry to /etc/hosts everything worked as fast as I'd expect. Also, for what it's worth: using curl or wget also resulted in the RDNS.</p>\n\n<p>I see two options to get around this but can't find out how to actually implement them:</p>\n\n<ol>\n<li>Ideally, I do want a reverse-lookup to match the default behaviour\nas much as possible, so is there a way to force this lookup to go to\nthe dns_server I provide myself (which is not in resolv.conf).</li>\n<li>If that is not possible, can I disable this RDNS somewhere? I can go\nup to the setsockopt level.</li>\n</ol>\n"},{"tags":["python","openmp","libsvm","scikit-learn"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13273738,"title":"scikit-learn OpenMP libsvm","body":"<p>I am using scikit-learn SVC to classify some data. I would like to increase the training performance.</p>\n\n<blockquote>\n  <p>clf = svm.SVC(cache_size=4000, probability=True, verbose=True)</p>\n</blockquote>\n\n<p>Since sckikit-learn interfaces with libsvm and libsvm uses OpenMp I was hoping that:</p>\n\n<blockquote>\n  <p>export OMP_NUM_THREADS=16</p>\n</blockquote>\n\n<p>would run on multiple cores.\nUnfortunately this did not help.</p>\n\n<p>Any Ideas?</p>\n\n<p>Thanks</p>\n"},{"tags":["python","amazon-web-services","boto","amazon-glacier"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13274197,"title":"AWS glacier delete job","body":"<p>I have started a retrival job for an archive stored in one of my vaults on \nGlacier AWS.</p>\n\n<p>It turns out that I do not need to resurrect and download that archive any more.\nIs there a way to stop and/or delete my Glacier job?</p>\n\n<p>I am using boto and I cannot seem to find a suitable function.</p>\n\n<p>Thanks</p>\n"},{"tags":["python","frequency","dice"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":43,"score":-1,"question_id":13264388,"title":"Python -- Determine Frequency of numbers showing up in dice rolls","body":"<p>these are the functions used to roll the dice.</p>\n\n<pre><code>def roll() -&gt; int:\n    ''' Return a roll of two dice, 2-12\n    '''\n    die1 = randint(1, 6)\n    die2 = randint(1, 6)\n    return die1 + die2\n\ndef roll_dice(n:int):\n    '''list the results of rolls'''\n    for i in range(n):\n        print(roll())\n</code></pre>\n\n<p>Now i need help to make function to create a list of stats of the numbers rolled.</p>\n\n<p>for example: after printing the said function it should print out somethings like this according to my lab:</p>\n\n<pre><code>Distribution of dice rolls\n\n 2:    55 ( 2.8%)  **\n 3:   129 ( 6.5%)  ******\n 4:   162 ( 8.1%)  ********\n 5:   215 (10.8%)  **********\n 6:   279 (14.0%)  *************\n 7:   341 (17.1%)  *****************\n 8:   271 (13.6%)  *************\n 9:   210 (10.5%)  **********\n10:   168 ( 8.4%)  ********\n11:   112 ( 5.6%)  *****\n12:    58 ( 2.9%)  **\n-----------------\n     2000 rolls\n</code></pre>\n\n<p>help is appreciated. Thanks</p>\n"},{"tags":["python","networking","tcp","packets"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13273960,"title":"Is it possible to Inject packets into an existing tcp connection using Python?","body":"<p>As the title says, I would like to send data using an existing tcp connection. Said connection has already been established by a 3rd party program. I haven't been able to find much information about this, and it's safe to say I don't know how this will work at all.</p>\n\n<p>The operating system is Windows. My preferred programming language is python - I'd prefer not to use 3rd party python modules, but I will if they make my life easier.</p>\n\n<p>Just to clarify, in case you aren't sure what I want to do: I want to send data as if it were sent by a different program; pretty much like <a href=\"http://wpepro.net/index.php?categoryid=3\" rel=\"nofollow\">WPE pro</a>'s send function does.</p>\n"},{"tags":["python","unit-testing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13274799,"title":"Unit-test a method wrapper","body":"<p>I've got a set of actions which share some base checks. My code looks like this:</p>\n\n<pre><code>def is_valid(param): …some pretty complex things unit-tested on their own…\n\nclass BaseAction(object):\n    def run(self, param):\n        if not is_valid(param):\n            raise ValueError(…)\n\n        return self.do_run(param)\n\nclass Jump(BaseAction):\n    def do_run(self, param): …\n\nclass Sing(BaseAction):\n    def do_run(self, param): …\n</code></pre>\n\n<p>How should I unit-test the fact that BaseAction.run performs validation?</p>\n\n<p>I think I could unit-test Jump.run and Sing.run, but then to do it properly I'd need to write tests for each subclass of BaseAction, potentially quite a lot of cases. Also this means coupling test for subclasses with a test for base class' method.</p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13266752,"title":"How to know which exception type to catch in python?","body":"<p>A general exception catcher logs this <a href=\"http://pastebin.com/vF5zdvsR\" rel=\"nofollow\">http://pastebin.com/vF5zdvsR</a> exception.</p>\n\n<p>I would like to know the specific exception name so I could add a dedicated catch to it.\nHow can it be found?</p>\n\n<p>Is there a 'type' function on the caught exception or should it be found in the throwing lib's source - available at: <a href=\"https://github.com/mLewisLogic/foursquare/blob/master/foursquare/__init__.py\" rel=\"nofollow\">https://github.com/mLewisLogic/foursquare/blob/master/foursquare/__init__.py</a></p>\n\n<p>Thank you</p>\n"},{"tags":["python","package","pip"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":23,"score":2,"question_id":13263739,"title":"Keep order of installation in pip freeze","body":"<p>Quick question.</p>\n\n<p>Is there a way to ensure that <code>pip freeze &gt; requirements.txt</code> keeps the order in which the packages were installed? This is an issue for me because I continuously get something like this in <code>requirements.txt</code>:</p>\n\n<pre><code>matplotlib==1.1.1\nnumpy==1.6.2\n</code></pre>\n\n<p>So an error occurs when I try to install using <code>pip install -r requirements.txt</code> because numpy is a dependency of matplotlib, so I have to install manually numpy first and then rerun <code>pip install -r requirements.txt</code></p>\n\n<p>Is there any fix on that?</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","package","search","pypi"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":246,"score":3,"question_id":646515,"title":"What is an elegant way to find versions of packages on a pypi package index?","body":"<p>Currently I'm using a very ugly approach based on a regex for finding links and taking them apart.</p>\n\n<p>I'm unhappy with the code, so I'm asking for nicer solutions, preferably using only the stdlib.</p>\n\n<h3>Edit</h3>\n\n<p>The task at hand has 2 parts:</p>\n\n<ol>\n<li>Find all distributions that match a certain criteria (like prefix of the name).</li>\n<li>Find all versions available in each found distribution.</li>\n</ol>\n\n<p>The expected result is a mapping of distribution -> versions -> files.</p>\n"},{"tags":["python","list","nested"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13274208,"title":"print a nested list so that each list within the list is in a different column","body":"<p>I have the following code</p>\n\n<pre><code>F_list= []\nC_list= []\nC_approx_list = []\nfor F in range(0,101,10):\n    F_list.append(F)\n    C_approx_list.append((F-30)/2.)\n    C_list.append((F-32)*(5./9))\n\nconversion = [F_list,C_approx_list,C_list]\n\nfor list in conversion:\n    for number in list:\n        print number\n</code></pre>\n\n<p>With the following output:</p>\n\n<pre><code>\"\"\"Test Execution\nTerminal &gt; python exercise2_18.py\n0\n10\n20\n30\n40\n50\n60\n70\n80\n90\n100\n-15.0\n-10.0\n-5.0\n0.0\n5.0\n10.0\n15.0\n20.0\n25.0\n30.0\n35.0\n-17.7777777778\n-12.2222222222\n-6.66666666667\n-1.11111111111\n4.44444444444\n10.0\n15.5555555556\n21.1111111111\n26.6666666667\n32.2222222222\n37.7777777778\n\"\"\"\n</code></pre>\n\n<p>I want the three lists to be on the following form instead:</p>\n\n<p>F_list            C_approx            C_list</p>\n\n<p>Instead of:</p>\n\n<ol>\n<li>F_list </li>\n<li>C_approx </li>\n<li>C_list</li>\n</ol>\n\n<p>Thanks for any potential answer!</p>\n"},{"tags":["python","osx-snow-leopard","32bit-64bit"],"answer_count":5,"favorite_count":25,"up_vote_count":17,"down_vote_count":0,"view_count":17108,"score":17,"question_id":2088569,"title":"How do I force Python to be 32-bit on Snow Leopard and other 32-bit/64-bit questions","body":"<p>When I run the following from a bash shell on my Mac:</p>\n\n<pre><code>$ file /usr/bin/python\n</code></pre>\n\n<p>I get the following three lines:</p>\n\n<pre><code>/usr/bin/python (for architecture x86_64):  Mach-O 64-bit executable x86_64\n/usr/bin/python (for architecture i386):    Mach-O executable i386\n/usr/bin/python (for architecture ppc7400): Mach-O executable ppc\n</code></pre>\n\n<p>this would seem to indicate that Python has been compiled for all three architectures or something like that?  I believe, based on some errors I had while trying to setup MySQL, that the version I'm using is the 64-bit version.  So two questions:</p>\n\n<ol>\n<li><p>How would I have known that?</p></li>\n<li><p>How could I change Python to be 32-bit instead?  Something less drastic than re-compile with different compile settings?</p></li>\n<li><p>Why does <code>arch</code> from a bash shell return <code>i386</code> which would seem to indicate I'm not in \"64-bit mode\" when I know based on my processor I'm running a 64-bit Mac?</p></li>\n</ol>\n\n<p>Sorry these are probably all newbie questions, the whole 32/64-bit thing is frustrating the crap out of me and I'm sure there are some commands/tools that would make this easier.</p>\n"},{"tags":["python","idle"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13263321,"title":"Problems with 'while' loop and 'for' loop when reading through file","body":"<p>I wasted plenty of hours trying to figure out the problem but no luck. Tried asking the TA at my school, but he was useless. I am a beginner and I know there are a lot of mistakes in it, so it would be great if I can get some detail explanation as well. Anyways, basically what I am trying to do with the following function is:</p>\n\n<ul>\n<li>Use while loop to check and see if random_string is in TEXT, if not\nreturn NoneType</li>\n<li>if yes, then use a for loop to read lines from that  TEXT and put it\nin list, l1.</li>\n<li>then, write an if statement to see if random_string is in l1.</li>\n<li>if it is, then do some calculations.</li>\n<li>else read the next line</li>\n<li>Finally, return the calculations as a whole.</li>\n</ul>\n\n<hr>\n\n<pre><code>TEXT = open('randomfile.txt')\n\ndef random (TEXT, random_string):\n    while random_string in TEXT:\n        for lines in TEXT:\n            l1=TEXT.readline().rsplit()\n            if random_string in l1:\n                '''\n                    do some calculations\n                '''\n            else:\n                TEXT.readline() #read next line???\n        return #calculations\n    return None\n</code></pre>\n"},{"tags":["python","django","api","pil","django-piston"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":11192427,"title":"Change return-fields in read method django-piston","body":"<p>i'm using django-piston to create my api. I need to know if possible to change the return-fields according to a parameter. I'm trying to return a thumbnail field, but i need to have the option to pass the sizes of the thumbnail via URL.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["python","django","http","proxy","twisted"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13274816,"title":"Django/Python serve files from URL as http proxy fast stream","body":"<p>We are having a cross-domain issue with SVG files that are being served from a CDN (content delivery network) and therefore are coming from a different domain name than our primary domain which is a Python/Django application. We'd like to setup a special view that can serve as a server-side proxy for these SVG files to mask the domain name and get around the cross-domain issue. The question is how to make a fast http request to a url for static files like SVG or even other types (.jpg, .js, .png, .mp4, etc.) and serve them in a chunked streaming http response as fast as we receive the chunks from the request stream.</p>\n\n<p>We realize it may be faster of course to do this outside of Django and WSGI, perhaps the <a href=\"http://twistedmatrix.com\" rel=\"nofollow\">twisted server</a> would be better, so ultimately we are looking for the fastest/best Python method of accomplishing what we need. Really looking for example code for recommended solutions. </p>\n\n<p>Many thanks!</p>\n"},{"tags":["python","ssh","twisted"],"answer_count":1,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":91,"score":4,"question_id":13117502,"title":"Twisted Conch - Flow control","body":"<p>I have a Twisted Conch SSH server and the typical scenario is this:</p>\n\n<p>git via OpenSSH client   >>--- WAN1 --->> Twisted conch svr >>--- WAN2 -->> Git server</p>\n\n<p>There will be occassions that the 'git push' is sending data faster over WAN1 than I can proxy it over WAN2, so I need to tell the client to slow down (well before any TCP packet loss causes adjustments the TCP window size) to avoid buffering too much on the Twisted server. Reading the RFC for SSH this is accomplished with not acknowledging via adj window this will then cause the git push to block on syscall write to the pipe backed by openssh. </p>\n\n<p>Looking at conch/ssh/connection.py:L216 in the method  def ssh_CHANNEL_DATA(self, packet):\nI can accomplish this with setting localWindowSize to 0, and inflight data will still land as the predicate on 230 should still pass (give localWindowLeft). I am wondering if this is the correct approach or am I missing something blindly obvious with regards to flow control with Twisted SSH Conch? *</p>\n\n<p>Note: I acknowledge there are methods placeholders for stopWriting and startWriting on (channel) that I can override so I have hooks to control the other side of the transmission 'git pull', but Im interested in the other side. Also IPush/IPull producer dont seem applicable at this level and I cant see how I can tie in these higher abstraction without butchering conch? </p>\n"},{"tags":["python","debugging","pydev","monkeypatching","gevent"],"answer_count":2,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":208,"score":6,"question_id":11495357,"title":"gevent monkey-patching and breakpoints","body":"<p>I have been playing with Gevent, and I like it a lot. However I have run into a problem. Breakpoint are not being hit, and debugging doesn't work (using both Visual Studio Python Tools and Eclipse PyDev). This happens after <code>monkey.patch_all()</code> is called.</p>\n\n<p>This is a big problem for me, and unfortunately this is a blocker for the use of gevent. I have found a <a href=\"https://groups.google.com/forum/?fromgroups#!topic/gevent/iBFgoSvyoik\">few threads</a> that seem to indicate that gevent breaks debugging, but I would imagine there is a solution for that.</p>\n\n<p>Does anyone know how to make debugging and breakpoints work with gevent and monkey patching?</p>\n"},{"tags":["python","django","query","order","concatenation"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":32,"score":3,"question_id":13273805,"title":"django : concatenate 2 queries or special order?","body":"<p>I have to make such query :</p>\n\n<pre><code>similar_brokers_ = Profile.objects.filter(Q(tp=broker.tp) |  Q(md=broker.md)).exclude(Q(id=broker.id))[:4]\n</code></pre>\n\n<p>i need to get 4 similar brokers, which have the same <code>tp</code> field or <code>md</code> field</p>\n\n<p>so this query does it, but i need brokers with the same <code>tp</code> field go first, after them should go brokers with the same <code>md</code> field.</p>\n\n<p>how can i do it better?</p>\n\n<p>for example :</p>\n\n<pre><code>broker1  with tp=1, md=100\nbroker2  with tp=2, md=100\nbroker3  with tp=1, md=99\n</code></pre>\n\n<p>get brokers similat to <code>broker1</code> :\nfirst should go <code>broker3</code> (with <code>tp</code>=1) and after <code>broker2</code> (with <code>md</code>=100)</p>\n"},{"tags":["python"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":63,"score":1,"question_id":13260957,"title":"how to display my list with n amount on each line in Python","body":"<p>im trying to display my list with 7 states on each line here is what i have so far, but it displays as one long string of all the states with quotes around each state. I forgot to mention that this is for my CS class and we havent learned iter yet so we not allowed to use it. the only hint i was given was to to turn STATE_LIST into a string then use '\\n' to break it up</p>\n\n<pre><code>state = str(STATE_LIST)\n\ndisplaystates = Text(Point(WINDOW_WIDTH/2, WINDOW_HEIGHT/2), state.split('\\n'))\ndisplaystates.draw(win)\n</code></pre>\n\n<p>and STATE_LIST looks like this</p>\n\n<pre><code>STATE_VOTES = {\n\"AL\" : 9, # Alabama\n\"AK\" : 3, # Alaska\n\"AZ\" : 11, # Arizona\n\"AR\" : 6, # Arkansas\n\"CA\" : 55, # California\n\"CO\" : 9, # Colorado\n\"CT\" : 7, # Connecticut\n\"DE\" : 3, # Delaware\n\"DC\" : 3, # Washington DC\n\"FL\" : 29, # Florida\n\"GA\" : 16, # Georgia\n\"HI\" : 4, # Hawaii\n\"ID\" : 4, # Idaho\n\"IL\" : 20, # Illinois\n\"IN\" : 11, # Indiana\n\"IA\" : 6, # Iowa\n\"KS\" : 6, # Kansas\n\"KY\" : 8, # Kentucky\n\"LA\" : 8, # Louisiana\n\"ME\" : 4, # Maine\n\"MD\" : 10, # Maryland\n\"MA\" : 11, # Massachusetts\n\"MI\" : 16, # Michigan\n\"MN\" : 10, # Minnesota\n\"MS\" : 6, # Mississippi\n\"MO\" : 10, # Missouri\n\"MT\" : 3, # Montana\n\"NE\" : 5, # Nebraska\n\"NV\" : 6, # Nevada\n\"NH\" : 4, # New Hampshire\n\"NJ\" : 14, # New Jersey\n\"NM\" : 5, # New Mexico\n\"NY\" : 29, # New York\n\"NC\" : 15, # North Carolina\n\"ND\" : 3, # North Dakota\n\"OH\" : 18, # Ohio\n\"OK\" : 7, # Oklahoma\n\"OR\" : 7, # Oregon\n\"PA\" : 20, # Pennsylvania\n\"RI\" : 4, # Rhode Island\n\"SC\" : 9, # South Carolina\n\"SD\" : 3, # South Dakota\n\"TN\" : 11, # Tennessee\n\"TX\" : 38, # Texas\n\"UT\" : 6, # Utah\n\"VT\" : 3, # Vermont\n\"VA\" : 13, # Virginia\n\"WA\" : 12, # Washington\n\"WV\" : 5, # West Virginia\n\"WI\" : 10, # Wisconsin\n\"WY\" : 3 # Wyoming\n}\n\nSTATE_LIST = sorted(list(STATE_VOTES.keys()))\n</code></pre>\n\n<p>I am trying to get it to look somewhat like this\n<img src=\"http://i.stack.imgur.com/Tn2pR.jpg\" alt=\"Sample\"></p>\n"},{"tags":["python","parsing","google","beautifulsoup","voice"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":12888123,"title":"How to parse and delete a text message with pygooglevoice?","body":"<p>I'm trying to utilize pygooglevoice to receive a message and then immediately delete it by its id using <code>delete()</code> but I can't figure it out.</p>\n\n<p>Here is the documentation: <a href=\"http://sphinxdoc.github.com/pygooglevoice/\" rel=\"nofollow\">http://sphinxdoc.github.com/pygooglevoice/</a> :</p>\n\n<pre><code>from googlevoice import Voice \nfrom googlevoice.util import input \nimport sys, BeautifulSoup\n\nvoice = Voice()\nvoice.login()\nvoice.sms()\n\ndef sendTextMessage(phoneNumber,text):\n    voice.send_sms(phoneNumber, text)\n    return 0\n\ndef extractsms(htmlsms):\n    \"\"\"\n    extractsms  --  extract SMS messages from BeautifulSoup tree of Google Voice SMS HTML.\n\n    Output is a list of dictionaries, one per message.\n    \"\"\"\n    msgitems = []                                       # accum message items here\n    #   Extract all conversations by searching for a DIV with an ID at top level.\n    tree = BeautifulSoup.BeautifulSoup(htmlsms)         # parse HTML into tree\n    conversations = tree.findAll(\"div\",attrs={\"id\" : True},recursive=False)\n    for conversation in conversations :\n        #   For each conversation, extract each row, which is one SMS message.\n        rows = conversation.findAll(attrs={\"class\" : \"gc-message-sms-row\"})\n        for row in rows :                               # for all rows\n            #   For each row, which is one message, extract all the fields.\n            msgitem = {\"id\" : conversation[\"id\"]}       # tag this message with conversation ID\n            spans = row.findAll(\"span\",attrs={\"class\" : True}, recursive=False)\n            for span in spans :                         # for all spans in row\n                cl = span[\"class\"].replace('gc-message-sms-', '')\n                msgitem[cl] = (\" \".join(span.findAll(text=True))).strip()   # put text in dict\n            msgitems.append(msgitem)                    # add msg dictionary to list\n    return msgitems\n\nfor message in extractsms(voice.sms.html):\n    print message['text']\n    message['id'].delete()\n</code></pre>\n\n<p>With an error of:</p>\n\n<pre><code>Traceback (most recent call last):\n   File \"/Users/Matthew/Desktop/movieDownloader.py\", line 38, in &lt;module&gt;\n   message['id'].delete() AttributeError: 'unicode' object has no attribute 'delete'\n</code></pre>\n\n<p>I don't believe I'm using the <code>delete()</code> correctly.</p>\n"},{"tags":["python","web"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":26,"score":-3,"question_id":13274149,"title":"how to create a webpage with simple controls and python back end","body":"<p>i have a python function which takes text and some parameters as an input.\ni want to build a simple web page with some controls:</p>\n\n<ol>\n<li>a file upload control</li>\n<li>a text box</li>\n<li>some radio buttons to choose parameters</li>\n<li>a submit button</li>\n</ol>\n\n<p>user will either use the upload control or enter some text in the box.\nupon submission my python function will run in the back end and return results to be displayed on the page.</p>\n\n<p>as a complete web newbie i am wondering what would be the easiest way to approach this.</p>\n\n<p>i am not sure on what machine this will run and what permissions i will have, so lets assume a generic LAMP server (if this makes any sense)</p>\n"},{"tags":["python","tkinter"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13060263,"title":"Python Tkinter module not showing output","body":"<p>I am trying to learn Python and trying something GUI in Python and came across this Tkinter module. My code runs but the window does not appear when I run. My code is as follows</p>\n\n<pre><code> #GUI\n\n#from Tkinter import *\nfrom Tkinter import *\n#to create a root window \nroot = Tk()\n</code></pre>\n\n<p>Any help on this would be appreciated. The program runs, gives no errors but the from/ window does not show up</p>\n"},{"tags":["python","r","rpy2"],"answer_count":3,"favorite_count":4,"up_vote_count":6,"down_vote_count":0,"view_count":1497,"score":6,"question_id":2447454,"title":"Converting python objects for rpy2","body":"<p>The following code is supposed to create a heatmap in rpy2</p>\n\n<pre><code>import numpy as np\nfrom rpy2.robjects import r\ndata = np.random.random((10,10))\nr.heatmap(data)    \n</code></pre>\n\n<p>However, it results in the following error</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"z.py\", line 8, in &lt;module&gt;\n    labRow=rowNames, labCol=colNames)\n  File \"C:\\Python25\\lib\\site-packages\\rpy2\\robjects\\__init__.py\", line 418, in __call__\n    new_args = [conversion.py2ri(a) for a in args]\n  File \"C:\\Python25\\lib\\site-packages\\rpy2\\robjects\\__init__.py\", line 93, in default_py2ri\n    raise(ValueError(\"Nothing can be done for the type %s at the moment.\" %(type(o))))\nValueError: Nothing can be done for the type &lt;type 'numpy.ndarray'&gt; at the moment.\n</code></pre>\n\n<p>From the documentation I learn that r.heatmap expects \"a numeric matrix\". How do I convert np.array to the required data type?</p>\n"},{"tags":["python","fortran"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13274066,"title":"Read FORTRAN formatted numbers with Python","body":"<p>I have to read a data file that contains numbers formatted with (very) old FORTRAN style. A line of the file looks like this:</p>\n\n<pre><code> 4.500000+1 1.894719-3 4.600000+1 8.196721-3 4.700000+1 2.869539-3\n</code></pre>\n\n<p>The file (or large portion of it) contains these numbers in a fixed width format. The trouble with reading these numbers in Python is that there is no <code>E</code> in these numbers. Watch what happens:</p>\n\n<pre><code>&gt;&gt;&gt; float('4.50000+1')\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nValueError: invalid literal for float(): 4.50000+1\n</code></pre>\n\n<p>I can write a parser to read this, but wanted to know if this has already be done. This is an old FORTRAN format so I thought perhaps someone had already figured it out. Does anyone know of a library to read numbers like this?</p>\n"},{"tags":["python","mongodb","pymongo"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":10230794,"title":"How can I execute a JS script file from Pymongo?","body":"<p>I have a MapReduce job for my MongoDB database implemented in a Javascript script file.  I've tested it from the commandline and Mongo shell (<code>load(\"MR_stack.js\")</code>).  Now I'm using Pymongo  within a larger application to access the Mongo database.  How can I execute my <code>MR_stack.js</code> script from within Pymongo?  </p>\n"},{"tags":["python","string","list","char","ord"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":62,"score":2,"question_id":13273553,"title":"Placing my integers into a list in python","body":"<p>I am creating a program that uses the Caesar cipher to encode and decode messages. So far I am building the groundwork, I am trying to get my list of characters the user gives me and make a list of integers using ord...So far all I am having trouble with is getting my integers that I have received back into a list.</p>\n\n<pre><code>import random\n\nencode_decode = input(\"Do you want to encode, or decode? (e/d)\")\n\nshift_amount = input(\"Please enter the shift amount for your message\")\n\nif encode_decode == \"e\" or encode_decode == \"E\":\n    user_words_unrefined = input(\"Enter your message to encode!\")\nelif encode_decode == \"d\" or encode_decode == \"D\":\n    user_words_unrefined = input(\"Enter your message to decode!\")\n\nuser_words_refined = list(user_words_unrefined)\n\nAlphabet = [chr(i) for i in range(ord('a'), ord('z') + 1)]\n\nCounter = 0\nfor i in range(len(user_words_refined)):\n    user_words_numbers = (ord(user_words_refined[Counter]))\n    user_numbers_list = [user_words_numbers]\n    print(user_numbers_list)\n    Counter += 1\n</code></pre>\n\n<p>Input (\"Hello, Party people!\")\noutput\nit prints them all on seperate lines with square brackets around them...any ideas?</p>\n\n<pre><code>[72]\n[101]\n[108]\n[108]\n[111]\n[44]\n[32]\n[80]\n[97]\n[114]\n[116]\n[121]\n[32]\n[112]\n[101]\n[111]\n[112]\n[108]\n[101]\n</code></pre>\n"},{"tags":["python","django","file","render"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13273291,"title":"django - render a file of a model to template","body":"<p>I have a model called Advertisement. This model has text field, title field, and file field.</p>\n\n<p>I am successfully saving all 3 of these fields into the model. </p>\n\n<p>Now I need to show them in template. My vision is: </p>\n\n<pre><code>ads = Advertisement.objects.all()\nreturn render_to_response('page.html', {'ads':ads},context_instance=RequestContext(request))\n</code></pre>\n\n<p>and in my page.html: </p>\n\n<pre><code>{% for each_ad in ads %}\n&lt;p&gt;{{each_ad.title}}&lt;/p&gt;\n&lt;p&gt;{{each_ad.text}}&lt;/p&gt;\n&lt;p&gt;&lt;a href=\"/ads/{{each_ad.file_pdf}}&gt;{{each_ad.file_pdf.name}}&lt;/a&gt;&lt;/p&gt;\n{% endfor %}\n</code></pre>\n\n<p>Does this seem right?  If not, please show me the way so I can learn. Thanks!</p>\n"},{"tags":["python","fabric"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":528,"score":2,"question_id":5246416,"title":"Python Fabric gives: Fatal error: No existing session","body":"<p>I have the following simple fabfile.py from the docs:</p>\n\n<pre><code>from fabric.api import run\n\ndef host_type():\n    run('uname -s')\n</code></pre>\n\n<p>I try to run it using:</p>\n\n<pre><code>fab -H 192.168.0.201 host_type\n</code></pre>\n\n<p>But get the error:</p>\n\n<pre><code>me@ubuntu:~/me$ fab -H 192.168.0.201 host_type\n[192.168.0.201] run: uname -s\nPassword for me@192.168.0.201: \n\nFatal error: No existing session\n\nAborting.\n</code></pre>\n\n<p>I can ssh okay into 192.168.0.201. </p>\n\n<p>Any ideas?</p>\n"},{"tags":["python","setup","pip","growl"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":25,"score":3,"question_id":13270877,"title":"How to manually install a pypi module without pip/easy_install?","body":"<p>I want to use the <a href=\"https://github.com/kfdm/gntp\" rel=\"nofollow\">gntp module</a> to display toaster-like notifications for a C/C++ software. I want to package all the dependencies for the soft to be self-executable on a another computer.</p>\n\n<p>The gntp module is only available through the pip installer, which cannot be used (The computer which is running the soft do not have any internet connection) : <strong>how can I install it from the sources ?</strong></p>\n\n<p>I would prefer not to force the user to install easy_install/pip and manually add the pip path to the %PATH.</p>\n\n<p>PS : I'm using Python 2.7 on a Windows machine.</p>\n"},{"tags":["python","django","amazon-s3","amazon-web-services","boto"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13273727,"title":"Boto upload to S3 not working for certain file types","body":"<p>The following code stores uploaded files in S3:</p>\n\n<pre><code>def store_in_s3(filename, filecontent, type, modelname, format, manufacturer, adder_id):\n    extension = os.path.splitext(filename)[1]\n    filename = modelname + \"-\" + manufacturer + \"-\" + type + \"-\" + format + \"-\" + str(adder_id) + extension\n    pathtofile = \"Parts/%s\" % (filename)\n    conn = S3Connection(settings.AWS_ACCESS_KEY_ID, settings.AWS_SECRET_ACCESS_KEY)\n    b = conn.create_bucket('mybucket')\n    mime = mimetypes.guess_type(filename)[0]\n    k = Key(b)\n    k.key = \"/media/Parts/%s\" % (filename)\n    k.set_metadata(\"Content-Type\", mime)\n    k.set_contents_from_string(filecontent)\n    k.set_acl(\"public-read\")\n    return pathtofile\n</code></pre>\n\n<p>It works fie for images and text files, but when I try to upload certain file types I get this back and not sure why:</p>\n\n<p><code>&lt;Error&gt;&lt;Code&gt;SignatureDoesNotMatch&lt;/Code&gt;&lt;Message&gt;The request signature we calculated does not match the signature you provided. Check your key and signing method.&lt;/Message&gt;&lt;StringToSignBytes&gt;50 55 54 0a 66 33 5a 74 6f 74 50 4e 50 4a 62 59 69 6e 67 68 38 38 45 39 45 67 3d 3d 0a 4e 6f 6e 65 0a 57 65 64 2c 20 30 37 20 4e 6f 76 20 32 30 31 32 20 31 36 3a 30 38 3a 35 37 20 47 4d 54 0a 2f 73 6e 61 70 65 64 61 2f 6d 65 64 69 61 2f 43 41 44 50 61 72 74 73 2f 61 64 37 31 31 2d 41 53 44 41 2d 4d 6f 64 65 6c 2d 53 50 49 43 45 2d 31 2e 63 69 72&lt;/StringToSignBytes</code></p>\n\n<p>Traceback:</p>\n\n<pre><code>File \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/django/core/handlers/base.py\" in get_response\n  111.                         response = callback(request, *callback_args, **callback_kwargs)\nFile \"/Users/nb/Desktop/spicestore/spices/views.py\" in add_model\n  577.          new_model.content=store_in_s3(filename, filecontent, type, modelname, format, manufacturer, adder_id)\nFile \"/Users/nb/Desktop/spicestore/store_in_s3.py\" in store_in_s3\n  24.     k.set_contents_from_string(filecontent)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/s3/key.py\" in set_contents_from_string\n  1124.                                         encrypt_key=encrypt_key)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/s3/key.py\" in set_contents_from_file\n  994.                            chunked_transfer=chunked_transfer, size=size)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/s3/key.py\" in send_file\n  727.                                                    query_args=query_args)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/s3/connection.py\" in make_request\n  468.                 override_num_retries=override_num_retries)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/connection.py\" in make_request\n  910.         return self._mexe(http_request, sender, override_num_retries)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/connection.py\" in _mexe\n  810.                                       request.body, request.headers)\nFile \"/Users/nb/Desktop/myenv2/lib/python2.7/site-packages/boto/s3/key.py\" in sender\n  684.                     response.status, response.reason, body)\n\nException Type: S3ResponseError at /spices/add\nException Value: S3ResponseError: 403 Forbidden\n</code></pre>\n"},{"tags":["python","django","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":31,"score":-3,"question_id":13259216,"title":"simple django code snippet from file upload","body":"<p>sorry for dumb question. </p>\n\n<pre><code>def upload_file(request):\nif request.method == 'POST':\n    form = UploadFileForm(request.POST, request.FILES)\n    if form.is_valid():\n        handle_uploaded_file(request.FILES['file'])\n        return HttpResponseRedirect('/success/url/')\nelse:\n    form = UploadFileForm()\nreturn render_to_response('upload.html', {'form': form})\n</code></pre>\n\n<p>what happens really in the background when i bind the request to the Form? </p>\n"},{"tags":["python","python-2.7"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":4,"view_count":40,"score":-3,"question_id":13273748,"title":"Unexpected indent - Python def","body":"<p>can you help me with this?</p>\n\n<pre><code>def group_iter (iterator, n=2, strict=False):\n\n    accumulator = []\n        accumulator.append(item)\n        if len(accumulator) == n: \n        yield tuple(accumulator)\n        accumulator = []\n\n    if strict and len(accumulator) !=0:\n        raise ValuseError(\"Leftover values\")\n\n\nprint \"This is count %r \" % group_iter \n</code></pre>\n\n<p>and when I run it I get: </p>\n\n<pre><code>accumulator.append (item)\nIndentationError: unexpected indent\n</code></pre>\n\n<p>How can I solve this problem? Thanks!</p>\n"},{"tags":["python","eclipse","python-2.7","pydev","ctypes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13273062,"title":"PyDev Cannot Find Module","body":"<p>I am new to Python and using PyDev 2.71 in Eclipse Juno in Windows for the following example:</p>\n\n<pre><code>from ctypes import cdll\n\nmsvcrt = cdll.mscvrt\nmessage_string = \"test\\n\"\nmsvcrt.printf(\"Testing: %s\", message_string)\n</code></pre>\n\n<p>However, it is generating the following error: </p>\n\n<pre><code>    self._handle = _dlopen(self._name, mode)\nWindowsError: [Error 126] The specified module could not be found\n</code></pre>\n\n<p>I added the interpreter in Eclipse prior to creating this PyDev module. What am I missing here?</p>\n"},{"tags":["python","dictionary","for-loop"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13204246,"title":"Alter values of dictionaries which have the same keys in a list","body":"<p>I had this: </p>\n\n<p><code>[{'name': 'Peter'}, {'name': 'Anna'}]</code></p>\n\n<p>And I wanted to make this out of it: </p>\n\n<p><code>[{'name': 'Peter Williams'}, {'name': 'Anna Williams'}]</code></p>\n\n<p>So I did:</p>\n\n<pre><code>&gt;&gt;&gt; li = [{'name': 'Peter'}, {'name': 'Anna'}]\n&gt;&gt;&gt; new_li = []\n&gt;&gt;&gt; dic = {}\n&gt;&gt;&gt; for i in li:\n...     dic[\"name\"] = i[\"name\"] + \" Williams\"\n...     new_li.append(dic)\n</code></pre>\n\n<p>But: </p>\n\n<pre><code>&gt;&gt;&gt; new_li\n[{'name': 'Anna Williams'}, {'name': 'Anna Williams'}]\n</code></pre>\n\n<p>Why? </p>\n\n<p>Could you also show how to best get <code>[{'name': 'Peter Williams'}, {'name': 'Anna Williams'}]</code>?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>The reason why I didn't understand this behavior is because I assumed that:</p>\n\n<pre><code>&gt;&gt;&gt; dict = {'name':'Peter'}\n&gt;&gt;&gt; lis = [dict]\n&gt;&gt;&gt; dict['name'] = 'Olaf'\n</code></pre>\n\n<p>Where </p>\n\n<pre><code>&gt;&gt;&gt; print lis\n</code></pre>\n\n<p>gives</p>\n\n<pre><code>[{'name': 'Peter'}]\n</code></pre>\n\n<p>While it actually is</p>\n\n<pre><code>[{'name': 'Olaf'}]\n</code></pre>\n"},{"tags":["python","string","split","rubiks-cube"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":53,"score":1,"question_id":13272861,"title":"Most efficient way of splitting strings like rubik's cube notations in python?","body":"<p>If a string like <code>\"RL2R'F2LD'\"</code> given,What is the most efficient way of splitting this into Strings <code>\"R\" \"L2\" \"R'\" \"F2\" \"L\" \"D'\"</code>?\nI'v tried few methods like first splitting them into individual chars and then trying to add them to a list and nothing worked correctly. </p>\n"},{"tags":["python","comet","orbited"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":466,"score":0,"question_id":3198673,"title":"Comet on python","body":"<p>I am pretty new to web programming in python.</p>\n\n<p>I am interested to build a chat room on browser. (for prototype). \nI know django pretty well and have done a bit of twisted in the past.</p>\n\n<p>Then I came across orbited.\nIt's pretty badly documented (I don't think that actually qualifies for documentation anyway), but these terms seems to pop up quite frequently:</p>\n\n<ol>\n<li>Orbited</li>\n<li>Twisted</li>\n<li>MorbidQ, ActiveQ, and bascially a bunch of MessageQueue technologies</li>\n</ol>\n\n<p>I did a few examples on the orbited website, but they somehow doesn't seem to explain really how everything works together.</p>\n\n<p>My questions are:</p>\n\n<ol>\n<li><p>I keep seeing <a href=\"http://:9000\" rel=\"nofollow\">http://:9000</a> on the [listen] directive. According to their main website, \"The listen section describes the interfaces and ports Orbited should use to accept browser connections.\" AFAIK, standard browser uses port 80 to communicate. And I think this port is used for orbited.js to connect to the server for comet techniques? What happens if 8000 is blocked? (like behind most firewall in schools/organizations)</p></li>\n<li><p>I keep seeing the word proxy. I do not know how an actual proxy fits within this combination of frameworks</p></li>\n<li><p>The relationship with twisted and orbited. Orbited is built ON TOP OF twisted (if I am not wrong). Then why are there so many examples that discuss using orbited ON TOP of twisted? Why do I need twisted in the first place? Can I use orbited on nginx? (Again, searching for nginx and orbited results in results that have the word proxy in them. How does this fit at all?)</p></li>\n<li><p>With regards to <a href=\"http://anirudhsanjeev.org/tutorialhow-to-django-comet-orbited-stomp-morbidq-jsio/\" rel=\"nofollow\">http://anirudhsanjeev.org/tutorialhow-to-django-comet-orbited-stomp-morbidq-jsio/</a>, the author uses an xml-rpc server. Can someone actually explain why? (well he said that \"you cannot start up a reactor send/receive system inside your django view\", but why do we even need to run a reactor inside that in the first place? Isn't orbited built on top of twisted? Shouldn't it therefore have its own reactor?)</p></li>\n<li><p>Morbidq describes itself as \"Morbid is a STOMP publish/subscribe server with absolutely no potential to cluster. It supports publish/subscribe topics, and runs as a single node.\" Why do we need this? Doesn't Comet solve something exactly like this? why do I keep seeing tutorials that combine a bunch of technologies that are seemingly similar but really has clear distinction?</p></li>\n<li><p>All I want to do is to build a simple webchat application. After seeing this, I realize that maybe using orbited and twisted and morbidq and django etc might be too troublesome. (Of course I am planning to make it scalable).</p></li>\n<li><p>I looked at tornado, it's okay, but kind of small imo in terms of community. It doesn't really do comet except it allows non-blocking connections (I learned this on IRC). Do I really need all the special comet techniques, or will long polling satisfy me? (for a simple web chat application)</p></li>\n<li><p>What are the big companies using? What's the standard defacto comet framework big companies are applying? (like facebook, gtalk, and twitter?) Are these available in python?</p></li>\n</ol>\n\n<p>Any help on <em>any question</em> will be appreciated.</p>\n"},{"tags":["python","numpy"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13273187,"title":"Numpy slice with array as index","body":"<p>I am trying to extract the full set of indices into an N-dimensional cube, and it seems like <code>np.mgrid</code> is just what I need for that. For example, <code>np.mgrid[0:4,0:4]</code> produces a 4 by 4 matrix containing all the indices into an array of the same shape.</p>\n\n<p>The problem is that I want to do this in an arbitrary number of dimensions, based on the shape of another array. I.e. if I have an array <code>a</code> of arbitrary dimension, I want to do something like <code>idx = np.mgrid[0:a.shape]</code>, but that syntax is not allowed.</p>\n\n<p>Is it possible to construct the slice I need for <code>np.mgrid</code> to work? Or is there perhaps some other, elegant way of doing this? The following expression does what I need, but it is rather complicated and probably not very efficient:</p>\n\n<pre><code>np.reshape(np.array(list(np.ndindex(a.shape))),list(a.shape)+[len(a.shape)])\n</code></pre>\n"},{"tags":["python","string","conditional","concatenation"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13272712,"title":"Python: string concatenation with None to return None?","body":"<p>I'm trying to do a conditional assignment based on the return value for environmental variables.</p>\n\n<pre><code>self._TBLFilePath = iTBLFilePath or os.environ.get(\"CDO_TBLPATH\") + os.environ.get(\"CDO_INSTANCE_TYPE\") + \".tbl\" or os.environ.ge    t(\"CDO_ROOT\") + \"/cdo/tbl/\" + os.environ.get(\"CDO_INSTANCE_TYPE\") + \".tbl\"\n</code></pre>\n\n<p>The problem is when CDO_TBLPATH is undefined I get a string with None concatenation error. I wonder if there is a way to force None + string to return a None as well, or is there any other way to overcome this?</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","numpy","scipy"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13272536,"title":"Speed up minimum search in Numpy/Python","body":"<p>I have two floating arrays and want to find data points which match within a certain range.\nThis is what I got so far:</p>\n\n<pre><code>import numpy as np\n\nfor vx in range(len(arr1)):\n    match = (np.abs(arr2-arr1[vx])).argmin()\n    if abs(arr1[vx]-arr2[match])&lt;0.375:\n        point = arr2[match]\n</code></pre>\n\n<p>The problem is that arr1 contains 150000 elements and arr2 around 110000 elements. This takes an awful amount of time. Do you have suggestions to speed things up?</p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":60,"score":2,"question_id":13272739,"title":"Python code, self not defined","body":"<pre><code>class makeCode:\n    def __init__(self,code):\n            self.codeSegment = code.upper()\n            if checkSegment(self.codeSegment):\n                    quit()\n            self.info=checkXNA(self.codeSegment)\n    def echo(self,start=0,stop=len(self.codeSegment),search=None): #--&gt; self not defined\n            pass\n</code></pre>\n\n<p>Not working... </p>\n\n<ul>\n<li>it says that the variable <strong>self</strong> is not defined when it actually was; </li>\n<li>the function <code>checkSegment</code> returns 1 if the input was not a string made of nucleotids letter, or if that contains nucleotids that can't be together;</li>\n<li>it quits if that happens, that's ok it works perfectly; </li>\n<li>then it assigns the information (if it's RNA or DNA) checking with the function <code>checkXNA</code> that returns a string with the information \"dnaSegment\" or \"rnaSegment\"; works perfectly. </li>\n</ul>\n\n<p>But then the function <code>echo</code> which will be designed for printing more specific information tells me that self is not defined, but why? </p>\n"},{"tags":["python","apache","ssl","bottle"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12371527,"title":"Bottle ssl behind apache","body":"<p>Is there any way to deploy a <code>bottle</code> application with <code>SSL</code> behind <code>Apache</code> without using another server such as <code>CherryPy</code>? And if so, are there any guides or tutorials to do such a thing?</p>\n"},{"tags":["python","sockets","postgresql","psycopg2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13271484,"title":"POSTGRESQL: Connect remote server to host database with Python","body":"<p>I'm attempting to write a Python script on a remote server.\nUsing Python I'd like to.. Connect to a remote host PostGresQL database (using sockets module?)\nEventually I'd like the remote server to take information(IP, Hostname, Uptime) and using cron it would send run the Python script and auto-update the postgresql database on the host computer.<br>\nI can only use python modules on the remote server and cannot use psycopg or anything else to connect.\nOn the host I do have postgres/psycopg2.<br>\nFirst step is connecting the remote server and maybe have it reporting back just the database... I don't know where to start </p>\n"},{"tags":["python","sqlite","sqlalchemy"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13273077,"title":"Commit errors with SQLAlchemy/sqlite for concurrent processes","body":"<p>I'm attempting to write a Python + SQLAlchemy application that uses a centralized sqlite database to store information about various files. I use checksums to verify that each file and/or file version is only stored once in the database, so I have a <code>UniqueConstraint</code> on the checksum column.</p>\n\n<p>I am storing the file info in <code>DbFile</code> objects that I want to do further operations on. I created a static method called <code>New()</code> that will return a <code>DbFile</code> object. If the file already exists in the database, it will return that object, otherwise it will create a new one. </p>\n\n<pre><code> import md5\n # Not shown: sqlalchemy imports\n\n Base = declarative_base()\n engine = create_engine('sqlite:///test.db')\n Session = sessionmaker(bind=engine)\n session = Session()\n\n class DbFile(Base):\n     id = Column(Integer, primary_key=True)\n     filename = Column(String, nullable=False)\n     checksum = Column(String, nullable=False)\n\n     __table_args__ = (UniqueConstraint('checksum'),)\n\n     @staticmethod\n     def New(filename):\n          file_md5 = md5.md5(open(filename).read())\n          checksum = file_md5.hexdigest()\n\n     q = session.query(Files).filter(Files.checksum == checksum)\n     if q.count() == 1:\n         print \"Loading existing file object from database\"\n         return q.one()\n\n     dbfile = DbFile(filename=filename, checksum=checksum)\n</code></pre>\n\n<p>After loading a number of files I do a <code>session.commit()</code>. This works fine if just a single process is accessing the database, but if I kick off multiple python processes (from the command line), one of them will invariably abort with an <code>sqlalchemy.exc.IntegrityError</code> complaining that unique key constraint was violated for the checksum. There's obviously a race condition going on between checking for existence and writing to the database, but I haven't found a good way to prevent it. </p>\n\n<p>I've tried to trap the error around the <code>session.commit()</code> but sometimes the error is triggered by the <code>q.count()</code> statement. Is there a clean way to do this?</p>\n"},{"tags":["python","google-app-engine"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13273067,"title":"App Engine Python Development Server + Taskqueue + Backend","body":"<p>I'm using GAE Python 2.7 with the local development server. I have configured a backend</p>\n\n<pre><code>backends:\n- name: worker\n  class: B1\n  options: dynamic\n</code></pre>\n\n<p>and I'm using the default taskqueue. Everything works fine and the backend and taskqueue are visible at the SDK console. Also the local development work starts without any errors:</p>\n\n<pre><code>Multiprocess Setup Complete:\nRemote API Server [http://localhost:9200]\nApp Instance [http://localhost:9000]\nBackend Instance: worker.0 [http://localhost:9100]\nBackend Balancer: worker [http://localhost:9199]\n</code></pre>\n\n<p>BUT if I try to address the backend via a task</p>\n\n<pre><code>taskqueue.add(url='xyz', method='POST', target='workerÄ, pararms={'a':'b'}\n</code></pre>\n\n<p>this error raises:</p>\n\n<pre><code>ERROR An error occured while sending the task \"task1\" (Url: \"/backend/languages/create_database/\") in queue \"default\". Treating as a task error.\nTraceback (most recent call last):\nFile \"/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/taskqueue/taskqueue_stub.py\", line 1884, in ExecuteTask\n    connection.endheaders()\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py\", line 937, in endheaders\n    self._send_output(message_body)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py\", line 797, in _send_output\n    self.send(msg)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py\", line 759, in send\n    self.connect()\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py\", line 740, in connect\n    self.timeout, self.source_address)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py\", line 553, in create_connection\n    for res in getaddrinfo(host, port, 0, SOCK_STREAM):\ngaierror: [Errno 8] nodename nor servname provided, or not known\n</code></pre>\n\n<p>I'm using 'localhost' and can't see any reason why it fails. Some ideas / solutions? Any startup-parameter missing or somethin like that?</p>\n\n<p>Thanks</p>\n"},{"tags":["c++","python","boost-python","boost-build"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13114015,"title":"build python extension with boost build","body":"<p>I'm trying to use boost.python and build a python extension from c++.</p>\n\n<p>My cpp file use a function named 'BZ2_bzopen' which is in the library 'libbz2' under standard path (/usr/lib/). However, when I try to build the extension using boost build following <a href=\"http://www.boost.org/doc/libs/1_51_0/libs/python/example/quickstart/Jamroot\" rel=\"nofollow\">the instruction</a>, I received an error said:</p>\n\n<pre><code>====== BEGIN OUTPUT ======\nTraceback (most recent call last):\n  File \"CrossTrade.py\", line 11, in &lt;module&gt;\n    from custom_c import GoThroughFile\nImportError: /home/jliu/toolpak/custom_c.so: undefined symbol: BZ2_bzopen\n\nEXIT STATUS: 1\n====== END OUTPUT ======\n</code></pre>\n\n<p>This seems to me as an error comes from not linking to the library, which is almost the same as if I compile the cpp file without the '-lbz2' command.</p>\n\n<p>Anyone could offer some help on solving it, please?</p>\n"},{"tags":["python","regex","django","string"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":67,"score":5,"question_id":13266524,"title":"How fill a regex string with parameters","body":"<p>I would like to fill regex variables with string.</p>\n\n<pre><code>import re\n\nhReg = re.compile(\"/robert/(?P&lt;action&gt;([a-zA-Z0-9]*))/$\")\nhMatch = hReg.match(\"/robert/delete/\")\nargs = hMatch.groupdict()\n</code></pre>\n\n<p>args variable is now a dict with {\"action\":\"delete\"}.</p>\n\n<p>How i can reverse this process ?  With args dict and regex pattern, how i can obtain the string \"/robert/delete/\" ?</p>\n\n<p>it's possible to have a function just like this ?</p>\n\n<pre><code>def reverse(pattern, dictArgs):\n</code></pre>\n\n<p>Thank you</p>\n"},{"tags":["python","http","authentication","bottle","digest"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13272528,"title":"Bottle.py HTTP Auth?","body":"<p>How can I get my bottle.py app (Running in Paste or Cherrypy) to do HTTP (basic or digest) authentication? - I need to secure it, but cant find a any HOWTOs.</p>\n"},{"tags":["python","django","pycrypto"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":13077109,"title":"How can I create an encrypted django field that converts data when it's retrieved from the database?","body":"<p>I have a custom EncryptedCharField, which I want to basically appear as a CharField when interfacing UI, but before storing/retrieving in the DB it encrypts/decrypts it.</p>\n\n<p>The <a href=\"https://docs.djangoproject.com/en/dev/howto/custom-model-fields/\" rel=\"nofollow\">custom fields documentation</a> says to:</p>\n\n<ol>\n<li>add <code>__metaclass__ = models.SubfieldBase</code></li>\n<li>override to_python to convert the data from it's raw storage into the desired format</li>\n<li>override get_prep_value to convert the value before storing ot the db.</li>\n</ol>\n\n<p>So you think this would be easy enough - for 2. just decrypt the value, and 3. just encrypt it.</p>\n\n<p>Based loosely on <a href=\"http://djangosnippets.org/snippets/1095/\" rel=\"nofollow\">a django snippet</a>, and the documentation this field looks like:</p>\n\n<pre><code>class EncryptedCharField(models.CharField):\n  \"\"\"Just like a char field, but encrypts the value before it enters the database, and    decrypts it when it\n  retrieves it\"\"\"\n  __metaclass__ = models.SubfieldBase\n  def __init__(self, *args, **kwargs):\n    super(EncryptedCharField, self).__init__(*args, **kwargs)\n    cipher_type = kwargs.pop('cipher', 'AES')\n    self.encryptor = Encryptor(cipher_type)\n\n  def get_prep_value(self, value):\n     return encrypt_if_not_encrypted(value, self.encryptor)\n\n  def to_python(self, value):\n    return decrypt_if_not_decrypted(value, self.encryptor)\n\n\ndef encrypt_if_not_encrypted(value, encryptor):\n  if isinstance(value, EncryptedString):\n    return value\n  else:\n    encrypted = encryptor.encrypt(value)\n    return EncryptedString(encrypted)\n\ndef decrypt_if_not_decrypted(value, encryptor):\n  if isinstance(value, DecryptedString):\n    return value\n  else:\n    encrypted = encryptor.decrypt(value)\n    return DecryptedString(encrypted)\n\n\nclass EncryptedString(str):\n  pass\n\nclass DecryptedString(str):\n  pass\n</code></pre>\n\n<p>and the Encryptor looks like:</p>\n\n<pre><code>class Encryptor(object):\n  def __init__(self, cipher_type):\n    imp = __import__('Crypto.Cipher', globals(), locals(), [cipher_type], -1)\n    self.cipher = getattr(imp, cipher_type).new(settings.SECRET_KEY[:32])\n\n  def decrypt(self, value):\n    #values should always be encrypted no matter what!\n    #raise an error if tthings may have been tampered with\n    return self.cipher.decrypt(binascii.a2b_hex(str(value))).split('\\0')[0]\n\n  def encrypt(self, value):\n    if value is not None and not isinstance(value, EncryptedString):\n      padding  = self.cipher.block_size - len(value) % self.cipher.block_size\n      if padding and padding &lt; self.cipher.block_size:\n        value += \"\\0\" + ''.join([random.choice(string.printable) for index in range(padding-1)])\n      value = EncryptedString(binascii.b2a_hex(self.cipher.encrypt(value)))\n    return value\n</code></pre>\n\n<p>When saving a model, an error, Odd-length string, occurs, as a result of attempting to decrypt an already decrypted string.  When debugging, it appears as  to_python ends up being called twice, the first with the encrypted value, and the second time with the decrypted value, but not actually as a type Decrypted, but as a raw string, causing the error.  Furthermore get_prep_value is never called.</p>\n\n<p>What am I doing wrong?</p>\n\n<p>This should not be that hard - does anyone else think this Django field code is very poorly written, especially when it comes to custom fields, and not that extensible?  Simple overridable pre_save and post_fetch methods would easily solve this problem.</p>\n"},{"tags":["python","boost","boost-python","bjam","python-import"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13246689,"title":"Boost.Python | Symbol in .so file but I get ImportError: undefined symbol","body":"<p>I'm using Boost.Python to embed C++ code in my Python app.  The module builds fine with a few warnings.  When I import the module in Python I get this error:</p>\n\n<pre><code>ImportError: .../cdtm_ext.so: undefined symbol: gsl_multimin_fdfminimizer_conjugate_fr\n</code></pre>\n\n<p>This symbol is defined in an external library (Gnu Scientific Library) header file, and the symbol exists in the .so file:</p>\n\n<pre><code>$ nm cdtm_ext.so | grep gsl_multimin_fdfminimizer_conjugate_fr\n   U gsl_multimin_fdfminimizer_conjugate_fr\n</code></pre>\n\n<p>Here is my <code>Jamroot</code> file:</p>\n\n<pre><code>import python ;\n\nif ! [ python.configured ]\n{\n    ECHO \"notice: no Python configured in user-config.jam\" ;\n    ECHO \"notice: will use default configuration\" ;\n    using python ;\n}\n\nuse-project boost\n  : ../../../.. ;\n\nproject\n  : requirements \n    &lt;library&gt;/boost/python//boost_python\n    &lt;include&gt;/usr/local/include/gsl\n    ;\n\npython-extension cdtm_ext : cdtm.boost.cpp cdtm/cdtm-model.cpp cdtm/corpus.cpp    cdtm/main.cpp cdtm/opt.cpp cdtm/utils.cpp : &lt;library-path&gt;/usr/local/include/gsl ;\n\ninstall convenient_copy \n  : cdtm_ext \n  : &lt;install-dependencies&gt;on &lt;install-type&gt;SHARED_LIB &lt;install-type&gt;PYTHON_EXTENSION\n    &lt;location&gt;. \n  ;\n</code></pre>\n\n<p>I had a similar problem when I wrote my own extension using low-level C++ interface.  I fixed the problem there by adding the library name <code>gsl</code> in the libraries list of the <code>Extension</code> function call.  <code>module = Extension(... libraries = ['gsl', 'cblas'] ...)</code>.  I have no idea how to do the same thing with Boost.Python.</p>\n"},{"tags":["python","regex"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":57,"score":3,"question_id":13268721,"title":"How to compose string from regex pattern with named groups and datadict in python?","body":"<p>Short verison:</p>\n\n<p>I want to crate function which replace all named groups in regular expression with coresponding data from datadict.\nFor example:</p>\n\n<pre><code>Input: expr=r\"/(?P&lt;something&gt;\\w+)/whatever/(?P&lt;something2&gt;\\w+)\" data={\"something\":123, \"something2\": \"thing\"}\nOutput: \"/123/whatever/thing\"\n</code></pre>\n\n<p>But i have no idea how to do it.</p>\n\n<p>Some addtional info:</p>\n\n<p>I have code which iterate trough list of tuples containing name and pattern and trying to use re.search. In case that re.search match given string it returns name from current tuple and groupdict() (which is dict with data from re.search).</p>\n\n<p>Here is the code</p>\n\n<pre><code>class UrlResolver():\ndef __init__(self):\n    self.urls = {}\n\ndef parse(self, app, url):\n    for pattern in self.urls[app]:\n        data = re.search(pattern[1], url)\n        if data:\n            return {\"name\": pattern[0], \"data\": data.groupdict()}\n</code></pre>\n\n<p>Now i would like to create function:</p>\n\n<pre><code>def compose(self, app, name, data):\n    for pattern in self.url[app]:\n        if pattern[0] == name:\n            return string composed from regex expression and data from data dict.\n</code></pre>\n\n<p>Above function should replace all named groups with coresponding data from datadict.</p>\n\n<h2><strong>SOLUTION</strong></h2>\n\n<p>Using answer provided by Hans Then (Thanks!) and some other info here is the solution:</p>\n\n<pre><code>    def _group_replacer(data, match):\n        data_key = match.group(1)\n        return data[data_key]\n\n    expression = r\"\\([^\\(]*&lt;([^&lt;]*)&gt;[^\\(]*\\)\"\n    expression = re.compile(expression)\n\n    reversed = re.sub(expression, partial(_group_replacer, data), string)\n</code></pre>\n\n<p>function \"partial\" can be imported from functools</p>\n"},{"tags":["python","django","testing","sqlite3"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13272593,"title":"Django sqlite3 test in memory missing table","body":"<p>I'm using Django 1.3. When I set TEST_NAME on some file it works, but very slow.\nBut when TEST_NAME is ':memory:' django complain about missing tables.</p>\n\n<p>What can be wrong?\nThx for any help.</p>\n"},{"tags":["python","serial-port","hex","ascii","hyperterminal"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":224,"score":0,"question_id":11905235,"title":"ASCII to Hex Conversion in RS232 Serial Dialogue in Python and Hyperterminal","body":"<p>I am doing data transfer from an instrument over RS232 serial dialogue using Python. The data is coming in ASCII format. For example this is what i get in ASCII from the instrument using <strong>Python</strong>:</p>\n\n<pre><code>'\\x02S20390908127F010102F3004000900300000000000000000000000000000300A500000000000202020202020206070505050505050000000707070707070707020700000000000000000000000000000000000000008000800089237A0715047E000000000000000000000000000000000000000000000000000000000000000000000000005350374646303030\\x1732'\n</code></pre>\n\n<p>The same data transfer using <strong>Hyperterminal (Docklight)</strong> gave me this and the following is the hex representation i got in hyperterminal:</p>\n\n<pre><code>02 53 31 38 33 38 30 39 30 38 31 32 37 46 30 31 30 31 30 32 46 33 30 30 34 30 30 30 39 30 30 33 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 33 30 30 41 35 30 30 30 30 30 30 30 30 30 30 30 32 30 32 30 32 30 32 30 32 30 32 30 32 30 36 30 37 30 35 30 35 30 35 30 35 30 35 30 35 30 30 30 30 30 30 30 37 30 37 30 37 30 37 30 37 30 37 30 37 30 37 30 32 30 37 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 38 30 30 30 38 30 30 30 38 39 32 33 37 41 30 37 31 35 30 34 37 45 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 30 35 33 35 30 33 37 34 36 34 36 33 30 33 30 33 30 17 33 38 \n</code></pre>\n\n<p>My question is that how do I, using <strong>Python</strong>, get the same hex representation from the ascii data I got. I am very much of a noob when it comes to this kind of stuff. Thank you in advance.</p>\n"},{"tags":["python","bash","serial-port"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":121,"score":1,"question_id":12016029,"title":"Moving Terminal Program from Bash to Python on Linux","body":"<p>I am dealing with an Industrial Environment where I must record readings from a serial device out in the field. My current setup involves the device connected to a Moxa 5150A or 5130 Serial Device Server which connects to my network thru wired or wireless means depending on the location of the individual device. At current I am reliant upon software from my hardware vendor to manage the data collection. The current software is windows X86 based and has cause no end of trouble on newer hardware we have purchased due to the failure of previous hardware. I selected the Moxa serial servers specifically for their linux drivers and compatibility. The device communicates over RS-422 (4-wire Half Duplex) 7-bit 1-stop odd-parity and NO-flow control and does not send any information unless requested.</p>\n\n<p>I am working to develop my own solution that will store the information in a database (probably MySQL). In terms of terminal communication this is two part. I must send a request and receive the response.</p>\n\n<p>To date I have installed the Moxa drivers for the serial servers onto my linux server. I have written a bash script that reads from the /dev/ttyrXX device, interprets the input and loads the information into a mysql database.</p>\n\n<pre><code>      while read line\n      do\n      something something....\n      done &lt; /dev/ttyrXX\n</code></pre>\n\n<p>I am still working out minor scripting bugs such as restarting properly when a device goes offline and later comes back online and other such issues, but my script is reading and logging my data well within my needs.</p>\n\n<p>This solution relies on two factors. </p>\n\n<p>1) the Moxa Devices support FIFO and allow multiple connections simultaneously</p>\n\n<p>2) the vendor provided software running on a separate windows machine is currently submitting requests for information.</p>\n\n<p>I need to remove the windows based software all together. I have written and tested a script that prints to /dev/ttyrXX making my desired requests and received the appropriate responses and had them logged as desired by my first script.</p>\n\n<pre><code>     some list of things\n     for x in list\n     do         \n     printf \"request\" &gt; /dev/ttyrXX\n     done\n</code></pre>\n\n<p>One of the major issues I have experienced with the vendor supplied software is its hard coded dependence on receiving a timely response to every single request. This creates a number of issues including completely freezing up windows and crashing should the device fall out of service at an inopportune time.</p>\n\n<p>My two scripts working in unison collect the data at a significantly better interval and with alot less human intervention.</p>\n\n<p>Here is my question. What method can I use in Python to obtain comparable results to my Bash script? </p>\n\n<p>I have been unable to locate a Python equivalent to printf or cat that does not require me to open/close a file. Furthermore every terminal interface I've looked at has the built-in or required wait for response or read for so long before giving up. I'm certain that something exists out there I have simply had little to no luck finding it. I'll admit that I am brand spanking new to Python and have not written more than a few lines of code to poke around at its abilities.</p>\n\n<p>Let me be very clear. I want to write to my terminal without concern for anything else when I'm writing (using a thread or separate script I don't care). I want to read from my terminal without a care in the world for when my next bit of text is coming. (I'm not suggesting a never ending loop, but I do need it to simply stand by and wait for input). I WANT/NEED my write to and read from to be completely independent of one another with no concern for what the other is doing yesterday, right now, or next week.</p>\n\n<p>Thank You in advance.</p>\n\n<p>I will be able to provide more detailed code if that is necessary, However I feel that I am in more need of direction in my searching than for bug fixing. Though I am still completely open to advice and \"Don't EVER DO THIS.... BECAUSE OF THIS...\" type input</p>\n"},{"tags":["python","asyncsocket","gevent","greenlets"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13272397,"title":"gevent and socksipy","body":"<p>I was wondering if anyone has tried using <a href=\"https://github.com/sitesupport/gevent\" rel=\"nofollow\">gevent</a> and <a href=\"http://socksipy.sourceforge.net/\" rel=\"nofollow\">socksipy</a> for concurrent downloads. So, I use socksipy, using something like:</p>\n\n<pre><code>import socks\nimport socket\nsocks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, '127.0.0.1', 9050, True)\nsocket.socket = socks.socksocket\n\nurl = 'http://ifconfig.me/ip'\nrequest = urllib2.Request(url)\nrequest.add_header('Cache-Control','max-age=0')\nresponse = urllib2.urlopen(request)\nprint response.read()\n</code></pre>\n\n<p>which works fine - when I download a page, I see a different IP - which indicates that it is working.</p>\n\n<p>Now, I add gevent to this, and now I have something like (taken from gevent@git <a href=\"https://github.com/SiteSupport/gevent/blob/master/examples/concurrent_download.py\" rel=\"nofollow\">example</a>):</p>\n\n<pre><code>urls = ['http://ifconfig.me/ip', 'http://ifconfig.me/ip', 'http://ifconfig.me/ip']\nimport gevent\nfrom gevent import monkey; monkey.patch_socket()\nmonkey.patch_all()\n\nimport socks\nimport socket\nsocks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, \"127.0.0.1\", 9050)\nsocket.socket = socks.socksocket\n\nimport urllib2\n\ndef print_head(url):\n    print ('Starting %s' % url)\n    request = urllib2.Request(url)\n    request.add_header('User-Agent', 'Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.11) Gecko/20101012 Firefox/3.6.11')\n    data = urllib2.urlopen(request).read()\n    print ('%s: %s bytes: %r' % (url, len(data), data[:50]))\n\njobs = [gevent.spawn(print_head, url) for url in urls]\ngevent.joinall(jobs)\n</code></pre>\n\n<p>..and this does not work. It shows my real IP - which means this is not working.</p>\n\n<p>I was wondering if anyone could point me to a direction to make this work - I think I need to patch the socksipy module, but I am not sure how this can be done since it is not from the standard library.</p>\n\n<p>Thanks for your time.</p>\n"},{"tags":["python","pandas"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":40,"score":3,"question_id":13261737,"title":"Append two multi indexed data frames in pandas","body":"<p>I am trying this simple setup of variables:</p>\n\n<pre><code>In [94]: cc\nOut[94]: \n                 d0         d1\nclass sample                    \n5     66      0.128320  0.970817\n      66      0.160488  0.969077\n      77      0.919263  0.008597\n6     77      0.811914  0.123960\n      88      0.639887  0.262943\n      88      0.312303  0.660786\n\nIn [101]: bb\nOut[101]: \n                     d0         d1\nclass sample                    \n2     22      0.730631  0.656266\n      33      0.871292  0.942768\n3     44      0.081831  0.714360\n      55      0.600095  0.770108\n\nIn [102]: aa\nOut[102]: \n                     d0         d1\nclass sample                    \n0     00      0.190409  0.789750\n      11      0.588001  0.250663\n1     22      0.888343  0.428968\n      33      0.185525  0.450020\n</code></pre>\n\n<p>I can perform the following command</p>\n\n<pre><code>In [103]: aa.append(bb)\nOut[103]: \n                     d0         d1\nclass sample                    \n0     00      0.190409  0.789750\n      11      0.588001  0.250663\n1     22      0.888343  0.428968\n      33      0.185525  0.450020\n2     22      0.730631  0.656266\n      33      0.871292  0.942768\n3     44      0.081831  0.714360\n      55      0.600095  0.770108\n</code></pre>\n\n<p>Why I cant perform the following command in the same manner?</p>\n\n<pre><code>aa.append(cc)\n</code></pre>\n\n<p>[I get the following exception]</p>\n\n<pre><code>ValueError: all arrays must be same length\n</code></pre>\n\n<h2>UPDATE:</h2>\n\n<p>It works fine if I did not provide column names, but if for example I have 4 columns, with names ['d0','d0','d1','d1'] for 4X4 and 8X4, it does not work anymore</p>\n\n<p>here is the code for reproducing the error</p>\n\n<pre><code>import pandas\ny1 = [['0','0','1','1'],['00','11','22','33']]\ny2 = [['2','2','3','3','4','4'],['44','55','66','77','88','99']]\nx1  = np.random.rand(4,4)\nx2 = np.random.rand(6,4)\ncols = ['d1']*2 + ['d2']*2\nnames = ['class','idx']\naa = pandas.DataFrame(x1,index=y1,columns = cols)\naa.index.names = names\nprint aa\nbb = pandas.DataFrame(x2,index=y2,columns = cols)\nbb.index.names = names\nprint bb\n\naa.append(bb)\n</code></pre>\n\n<p>What should I do to get this running?</p>\n\n<p>Thanks</p>\n"},{"tags":["python","https","web","bottle"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13271782,"title":"bottle.py server deployment","body":"<p>I am moving from development to deployment and wonder how can i make my bottle.py application service both HTTP and HTTPS requests, and be multiprocess/multithreaded? I understand I need to use something like cherrypy instead of wsgiref?</p>\n"},{"tags":["python"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":500,"score":1,"question_id":3954900,"title":"Is it possible to use Python to measure response time?","body":"<p>I'm running some experiments and I need to precisely measure participants' response time to questions. I know there are some commercial software, but I was wondering if I can do this with Python. Does python provides suitable functionality to measure the response time in millisecond unit?</p>\n\n<p>Thank you,\nJoon</p>\n"},{"tags":["python","pandas"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13261175,"title":"pandas pivot dataframe to 3d data","body":"<p>There seem to be a lot of possibilities to pivot flat table data into a 3d array but I'm somehow not finding one that works: Suppose I have some data with columns=['name', 'type', 'date', 'value']. When I try to pivot via</p>\n\n<pre><code>pivot(index='name', columns=['type', 'date'], values='value')\n</code></pre>\n\n<p>I get </p>\n\n<pre><code>ValueError: Buffer has wrong number of dimensions (expected 1, got 2)\n</code></pre>\n\n<p>Am I reading docs from dev pandas maybe? It seems like this is the usage described there. I am running 0.8 pandas.</p>\n\n<p>I guess, I'm wondering if I have a MultiIndex ['x', 'y', 'z'] Series, is there a pandas way to put that in a panel? I can use groupby and get the job done, but then this is almost like what I would do in numpy to assemble an n-d array. Seems like a fairly generic operation so I would imagine it might be implemented already.</p>\n"},{"tags":["python","object","attributes","documentation"],"answer_count":2,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":44,"score":6,"question_id":13271836,"title":"Access other attributes of the instance with __getattr__(self, name)","body":"<p>In Python's <a href=\"http://docs.python.org/2/reference/datamodel.html#object.__getattr__\">documentation, on the <code>__getattr__</code> function</a> it says:</p>\n\n<blockquote>\n  <p>Note that if the attribute is\n  found through the normal mechanism, __getattr__() is not called. (This is an intentional asymmetry\n  between __getattr__() and __setattr__().) This is done both for efficiency reasons and because\n  otherwise __getattr__() would have no way to access other attributes of the instance.</p>\n</blockquote>\n\n<p>I have a problem understanding the last statement:</p>\n\n<blockquote>\n  <p>would have no way to access other attributes of the instance</p>\n</blockquote>\n\n<p>How exactly would it have no way to access other attributes? (I guess it has something to do with infinite recursion but aren't there other ways to acces instance attributes, like from <code>self.__dict__</code> directy?)</p>\n"},{"tags":["python","list","map"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":74,"score":0,"question_id":13271670,"title":"What is the Python equivalent of map in Ruby and Javascript?","body":"<p>Say for example I want to split string <code>\"12:30-14:40\"</code> and have the result in a matrix like: <code>[[\"12\",\"30\"],[\"14\",\"40\"]]</code>.</p>\n\n<p>I can do this in JavaScript with:</p>\n\n<pre><code>\"12:30-14:40\".split(\"-\").map(function(x) {\n    return x.split(':');\n});\n</code></pre>\n\n<p>and in Ruby with:</p>\n\n<pre><code> \"12:30-14:40\".split(\"-\").map{|x| x.split(\":\")}\n</code></pre>\n\n<p>What would be the python equivalent for the above?</p>\n"},{"tags":["python","windows","installer","windows-installer"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13060146,"title":"how to write installer (installing python, python modules and other dependencies) for windows boxes?","body":"<p>I know nothing on this subject, but I need suggestions about the best tools or method for creating a setup program that installs python, some custom python modules, some other python modules such as PIL, and some EXE dependencies, all living on a network repository, on windows machines. In the repository are installers for python (msi file), PIL (exe file), the custom python modules (pyc files), and two windows executables (and exe file and a zip file). Any advice welcome. </p>\n"},{"tags":["python","signals","celery","systemexit"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13260181,"title":"celery trying shutdown worker by raising SystemExit in task_postrun signal but always hangs and the main process never exits","body":"<p>I'm trying to shutdown the main celery process by raisin SystemExit() in the task_postrun signal. The signal gets fired just fine, and the exception gets raised, but the worker never completely exits and just hangs there.</p>\n\n<p>HOW DO I MAKE THIS WORK?</p>\n\n<p>Am I forgetting some setting somewhere?</p>\n\n<p>Below is the code that I'm using for the worker (worker.py):</p>\n\n<pre><code>from celery import Celery\nfrom celery import signals\n\napp = Celery('tasks',\n    set_as_current = True,\n    broker='amqp://guest@localhost//',\n    backend=\"mongodb://localhost//\",\n)\n\napp.config_from_object({\n    \"CELERYD_MAX_TASKS_PER_CHILD\": 1,\n    \"CELERYD_POOL\": \"solo\",\n    \"CELERY_SEND_EVENTS\": True,\n    \"CELERYD_CONCURRENCY\": 1,\n    \"CELERYD_PREFETCH_MULTIPLIER\": 1,\n})\n\ndef shutdown_worker(**kwargs):\n    print(\"SHUTTING DOWN WORKER (RAISING SystemExit)\")\n    raise SystemExit()\n\nimport tasks\n\nsignals.task_postrun.connect(shutdown_worker)\n\nprint(\"STARTING WORKER\")\napp.worker_main()\nprint(\"WORKER EXITED!\")\n</code></pre>\n\n<p>and below is the code for tasks.py:</p>\n\n<pre><code>from celery import Celery,task\nfrom celery.signals import task_postrun\nimport time\n\nfrom celery.task import Task\n\nclass Blah(Task):\n    track_started = True\n    acks_late = False\n\n    def run(config, kwargs):\n        time.sleep(5)\n        return \"SUCCESS FROM BLAH\"\n\ndef get_app():\n    celery = Celery('tasks',\n        broker='amqp://guest@localhost//',\n        backend=\"mongodb://localhost//\"\n    )\n    return celery\n</code></pre>\n\n<p>To test this, first thing I do is run the worker code (<code>python worker.py</code>), then I queue up a task like so:</p>\n\n<pre><code>&gt;&gt;&gt; import tasks\n&gt;&gt;&gt; results = []\n&gt;&gt;&gt; results.append(tasks.Blah.delay({}))\n</code></pre>\n\n<p>The output I see from the worker is this:</p>\n\n<pre><code>STARTING WORKER\n\n -------------- celery@hostname v3.0.9 (Chiastic Slide)\n---- **** ----- \n--- * ***  * -- [Configuration]\n-- * - **** --- . broker:      amqp://guest@localhost:5672//\n- ** ---------- . app:         tasks:0x26f3050\n- ** ---------- . concurrency: 1 (solo)\n- ** ---------- . events:      ON\n- ** ---------- \n- *** --- * --- [Queues]\n-- ******* ---- . celery:      exchange:celery(direct) binding:celery\n--- ***** ----- \n\n[2012-11-06 15:59:16,761: WARNING/MainProcess] celery@hostname has started.\n[2012-11-06 15:59:21,785: WARNING/MainProcess] SHUTTING DOWN WORKER (RAISING SystemExit)\n</code></pre>\n\n<p>I was expecting the python code to return from the call to <code>app.worker_main()</code> and then to print <code>WORKER EXITED</code> and then for the process to exit completely. This never happens, and the worker process has to be <code>kill -KILL {PID}</code>ed for it to go away (it's not able to consume any other tasks either.</p>\n\n<p>I guess my main question would be:</p>\n\n<p>HOW DO I MAKE THE CODE RETURN FROM <code>app.worker_main()</code>?</p>\n\n<p>I'd like to be able to completely restart the worker process (by having the process <em><strong>COMPLETELY</strong></em> exit) after <code>X</code> number of tasks have been executed.</p>\n\n<p><em><strong>UPDATE</strong></em> I figured out what the worker is hanging on - the worker (<code>WorkController</code>) is hanging on a call to <code>self.stop</code> after it catches the <code>SystemExit</code> exception.</p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":52,"score":1,"question_id":13271565,"title":"Decoding and formatting for newbies in Python","body":"<p>I am just trying to do some quick debugging of some Python script, but I am struggeling\na bit as I am a complete newbie with the syntax. I get some data in via the network, that is assigned as you can see in the following:</p>\n\n<pre><code>a = self.block.decode('hex')[95:63:-1]\nb = self.midstate.decode('hex')[::-1]\npayload = a + b \nprint(\"Data Received {} \\n\", payload)\n</code></pre>\n\n<p>I would be interested in two things:</p>\n\n<ol>\n<li><p>How many bytes/bit are hold in <code>payload</code>? I tried <code>payload__len()</code> but that did not work</p></li>\n<li><p>I would like to output the <code>payload</code> value in 32 bit hex word, anyone knows how this can be done with Python?</p></li>\n</ol>\n"},{"tags":["python","validation","numpy","introspection","typechecking"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":28,"score":3,"question_id":13260531,"title":"Validation against NumPy dtypes -- what's the least circuitous way to check values?","body":"<p>I want to test an unknown value against the constraints that a given NumPy <code>dtype</code> implies -- e.g., if I have an integer value, is it small enough to fit in a <code>uint8</code>?</p>\n\n<p>As best I can ascertain, NumPy's <code>dtype</code> architecture doesn't offer a way to do something like this:</p>\n\n<pre><code>### FICTIONAL NUMPY CODE: I made this up ###\ntry:\n    numpy.uint8.validate(rupees)\nexcept numpy.dtype.ValidationError:\n    print \"Users can't hold more than 255 rupees.\"\n</code></pre>\n\n<p>My little fantasy API is based on Django's <a href=\"https://docs.djangoproject.com/en/dev/ref/validators/\" rel=\"nofollow\">model-field validators</a>, but that's just one example -- the best mechanism I managed to contrive was along the lines of this:</p>\n\n<pre><code>&gt;&gt;&gt; nd = numpy.array([0,0,0,0,0,0], dtype=numpy.dtype('uint8'))\n&gt;&gt;&gt; nd[0]\n0\n&gt;&gt;&gt; nd[0] = 1\n&gt;&gt;&gt; nd[0] = -1\n&gt;&gt;&gt; nd\narray([255,   0,   0,   0,   0,   0], dtype=uint8)\n&gt;&gt;&gt; nd[0] = 257\n&gt;&gt;&gt; nd\narray([1, 0, 0, 0, 0, 0], dtype=uint8)\n</code></pre>\n\n<p>Round-tripping the questionable values through a <code>numpy.ndarray</code> typed as explicitly <code>numpy.uint8</code> gives me back integers that have been wrapped to something with an appropriate size -- without tossing an exception, or raising any other sort of actionable error state.</p>\n\n<p>I'd rather not put on the architecture-astronaut flight suit, of course, but that's preferable the alternative, which looks like unmaintainable spaghetti-monster mess of <code>if dtype(this) ... elif dtype(that)</code> statements. Is there anything I can do here besides embarking on the grandiose and indulgent act of writing my own API? </p>\n"},{"tags":["python","vba","com","win32com"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13238269,"title":"\"Member not found.\" error using win32com","body":"<p>I'm having issues accessing a COM object using the Python win32com module, which I don't have when using VBA. See usage/error below. The other parts of the object are functioning OK, but I can't get any of the parameters out of the ResultSet object.</p>\n\n<pre><code>&gt;&gt;&gt; import win32com.client\n&gt;&gt;&gt; Aquator = win32com.client.gencache.EnsureDispatch(\"Aquator.Application\")\n&gt;&gt;&gt; db = Aquator.LoadDatabase(r\"D:\\Shared\", \"AquatorExcel.mdb\")\n&gt;&gt;&gt; project = Aquator.LoadProject(db, \"A simple model\", False, False)\n&gt;&gt;&gt;\n&gt;&gt;&gt; project.ModelRunStart()\n&lt;win32com.gen_py.Aquator Water Resource Simulation._ModelRun instance at 0x15264\n824&gt;\n&gt;&gt;&gt; Aquator.ActiveProject.ModelRuns.Count\n1\n&gt;&gt;&gt; Aquator.ActiveProject.ModelRuns.Item(1).ResultSet\n&lt;win32com.gen_py.Aquator Water Resource Simulation._IResultSet instance at 0x149\n19000&gt;\n&gt;&gt;&gt; Aquator.ActiveProject.ModelRuns.Item(1).ResultSet.Cost\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Program Files\\Pythonxy\\Pythonxy 2.7\\Python27\\lib\\site-packages\\win32c\nom\\client\\__init__.py\", line 463, in __getattr__\n    return self._ApplyTypes_(*args)\n  File \"C:\\Program Files\\Pythonxy\\Pythonxy 2.7\\Python27\\lib\\site-packages\\win32c\nom\\client\\__init__.py\", line 456, in _ApplyTypes_\n    self._oleobj_.InvokeTypes(dispid, 0, wFlags, retType, argTypes, *args),\npywintypes.com_error: (-2147352573, 'Member not found.', None, None)\n</code></pre>\n\n<p>The equivalent code in the VBA editor within the application functions correctly, returning a float:</p>\n\n<pre><code>Public Sub Test()\n    MsgBox Aquator.ActiveProject.ModelRuns.Item(1).ResultSet.Cost\nEnd Sub\n</code></pre>\n\n<p>As far as I can tell, the EnsureDispatch command has done it's job correctly, and recognises the property (along with others, also inaccessible):</p>\n\n<pre><code>&gt;&gt;&gt; Aquator.ActiveProject.ModelRuns.Item(1).ResultSet._prop_map_get_.keys()\n['WaterBalanceMl', 'RunDate', 'Parameters', 'DoublePrecision', 'WarningCount', '\nFinishDate', 'AmountLost', 'SinglePrecision', 'Status', 'StartDate', 'Descriptio\nn', 'AmountLeaked', 'FailureCount', 'AmountAdded', 'ErrorCount', 'AmountStored',\n 'Name', 'WaterBalancePercent', 'InfoValueList', 'Results', 'States', 'Cost', 'A\nmountRemoved', 'Sequences', 'Duration', 'InfoNameList', 'RunTime']\n&gt;&gt;&gt; Aquator.ActiveProject.ModelRuns.Item(1).ResultSet.meh\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Program Files\\Pythonxy\\Pythonxy 2.7\\Python27\\lib\\site-packages\\win32c\nom\\client\\__init__.py\", line 462, in __getattr__\n    raise AttributeError(\"'%s' object has no attribute '%s'\" % (repr(self), attr\n))\nAttributeError: '&lt;win32com.gen_py.Aquator Water Resource Simulation._IResultSet\ninstance at 0x15175888&gt;' object has no attribute 'meh'\n</code></pre>\n\n<p>I have tried using .GetCost() (a la <a href=\"http://stackoverflow.com/questions/7089496/setting-a-property-using-win32com\">Setting a property using win32com</a>), to no avail (\"object has no attribute...\").</p>\n\n<p>What am I doing wrong here?</p>\n"},{"tags":["python","datetime","type-conversion"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13271465,"title":"How to convert the following string to python date?","body":"<p>How can I convert: <code>u'2012-11-07T13:25:10.703Z'</code> to Python datetime?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I intend to use something like this: </p>\n\n<pre><code>&gt;&gt;&gt; from datetime import datetime\n&gt;&gt;&gt; datetime.strptime('2011-03-07','%Y-%m-%d')\ndatetime.datetime(2011, 3, 7, 0, 0)\n</code></pre>\n\n<p>but how can I change the second argument to accommodate my date format?</p>\n"},{"tags":["python","multithreading","wxpython","frame"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13263108,"title":"can I use listener thread send different message to multiframe in wxpython?","body":"<p>I have a listener thread send message to a frame in wxpython,it work.but now I want to make multiframe,can I use this listener thread send diffrent message to two frame?If it can do this?How should I do?</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","image-processing","machine-learning","computer-vision"],"answer_count":6,"favorite_count":12,"up_vote_count":17,"down_vote_count":2,"view_count":688,"score":15,"question_id":8849869,"title":"How do I find Wally with Python?","body":"<p>Shamelessly jumping on the bandwagon :-)</p>\n\n<p>Inspired by <a href=\"http://stackoverflow.com/questions/8479058/how-do-i-find-waldo-with-mathematica\">How do I find Waldo with Mathematica</a> and the followup <a href=\"http://stackoverflow.com/questions/8563604/how-to-find-waldo-with-r\">How to find Waldo with R</a>, as a new python user I'd love to see how this could be done. It seems that python would be better suited to this than R, and we don't have to worry about licenses as we would with Mathematica or Matlab.</p>\n\n<p>In an example like the one below obviously simply using stripes wouldn't work. It would be interesting if a simple rule based approach could be made to work for difficult examples such as this.</p>\n\n<p><img src=\"http://i.stack.imgur.com/WEGrv.jpg\" alt=\"At the beach\"></p>\n\n<p>I've added the [machine-learning] tag as I believe the correct answer will have to use ML techniques, such as the Restricted Boltzmann Machine (RBM) approach advocated by Gregory Klopper in the original thread. There is some <a href=\"http://imonad.com/rbm/restricted-boltzmann-machine/\">RBM code available in python</a> which might be a good place to start, but obviously training data is needed for that approach. </p>\n\n<p>At the <a href=\"http://mlsp2009.conwiz.dk/\">2009 IEEE International Workshop on MACHINE LEARNING FOR SIGNAL PROCESSING (MLSP 2009)</a> they ran a <a href=\"http://mlsp2009.conwiz.dk/index.php?id=43\">Data Analysis Competition: Where's Wally?</a>. Training data is provided in matlab format. Note that the links on that website are dead, but the data (along with the source of an approach taken by <a href=\"http://www.eeng.nuim.ie/~semcloone/homepage.html\">Sean McLoone</a> and colleagues can be found <a href=\"https://labanquise.insa-rouen.fr/projects/l1pca/\">here</a> (see SCM link). Seems like one place to start.</p>\n"},{"tags":["python","xml","hadoop"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13267925,"title":"processing xml file with hadoop using python","body":"<p>I am using python with hadoop for processing an xml file, I had xml file with the below format</p>\n\n<p><strong>temporary.xml</strong></p>\n\n<pre><code>&lt;report&gt;\n&lt;report-name name=\"ALL_TIME_KEYWORDS_PERFORMANCE_REPORT\"/&gt;\n&lt;date-range date=\"All Time\"/&gt;\n  &lt;table&gt;\n    &lt;columns&gt;\n       &lt;column name=\"campaignID\" display=\"Campaign ID\"/&gt;\n       &lt;column name=\"adGroupID\" display=\"Ad group ID\"/&gt;\n       &lt;column name=\"keywordID\" display=\"Keyword ID\"/&gt;\n       &lt;column name=\"keyword\" display=\"Keyword\"/&gt;\n    &lt;/columns&gt;\n    &lt;row campaignID=\"79057390\" adGroupID=\"3451305670\" keywordID=\"3000000\" keyword=\"Content\"/&gt;\n    &lt;row campaignID=\"79057390\" adGroupID=\"3451305670\" keywordID=\"3000000\" keyword=\"Content\"/&gt;\n    &lt;row campaignID=\"79057390\" adGroupID=\"3451305670\" keywordID=\"3000000\" keyword=\"Content\"/&gt;\n    &lt;row campaignID=\"79057390\" adGroupID=\"3451305670\" keywordID=\"3000000\" keyword=\"Content\"/&gt;\n  &lt;/table&gt;\n&lt;/report&gt;\n</code></pre>\n\n<p>Now all i want to do is processing the above xml file and later save the data in to MSSQL database.</p>\n\n<p><strong>mapper.py</strong> code</p>\n\n<pre><code>import sys\nimport cStringIO\nimport xml.etree.ElementTree as xml\n\nif __name__ == '__main__':\n    buff = None\n    intext = False\n    for line in sys.stdin:\n        line = line.strip()\n        if line.find(\"&lt;row&gt;\") != -1:\n            intext = True\n            buff = cStringIO.StringIO()\n            buff.write(line)\n        elif line.find(\"&lt;/&gt;\") != -1:\n            intext = False\n            buff.write(line)\n            val = buff.getvalue()\n            buff.close()\n            buff = None\n            print val\n</code></pre>\n\n<p>Here what all i want to do is fetching the data from <code>row tags</code> that is the values of <code>campaignID,adgroupID,keywordID,keyword</code> and printing them which becomes as an input to <code>reducer.py</code>(That consists of code to save data in database).</p>\n\n<p>I had looked in to some examples but in that the tags are like <code>&lt;tag&gt; &lt;/tag&gt;</code>, but in my case i had only <code>&lt;row/&gt;</code></p>\n\n<p>But my code above is not working/not printing anything, can anyone please correct my code and add the necessary python code to get the values/data from the row tags(i am very very extremely new to hadoop), so that will extend the code from next time.</p>\n"},{"tags":["python","security","eval"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":83,"score":2,"question_id":13066594,"title":"Is there a way to secure strings for Python's eval?","body":"<p>There are many questions on SO about using Python's eval on <strong>insecure strings</strong> (eg.: <a href=\"http://stackoverflow.com/questions/661084/security-of-pythons-eval-on-untrusted-strings\">Security of Python's eval() on untrusted strings?</a>, <a href=\"http://stackoverflow.com/questions/3513292/python-make-eval-safe\">Python: make eval safe</a> and <a href=\"http://stackoverflow.com/questions/661084/security-of-pythons-eval-on-untrusted-strings\">Security of Python's eval() on untrusted strings?</a>). The unanimous answer is that this is a bad idea.</p>\n\n<p>However, I found little information on which strings can be considered safe (if any).\nNow I'm wondering if there is a definition of \"safe strings\" available (eg.: a string that only contains lower case ascii chars or any of the signs +-*/()). The exploits I found generally relied on either of _.,:[]'\" or the like. Can such an approach be secure (for use in a graph painting web application)?</p>\n\n<p>Otherwise, I guess using a parsing package as Alex Martelli suggested is the only way.</p>\n\n<p>EDIT:\nUnfortunately, there are neither answers that give a compelling explanation for why/ how the above strings are to be considered insecure (a tiny working exploit) nor explanations for the contrary. I am aware that using eval should be avoided, but that's not the question. Hence, I'll award a bounty to the first who comes up with either a working exploit or a really good explanation why a string mangled as described above is to be considered (in)secure.</p>\n"},{"tags":["python","google-app-engine","google-bigquery"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13244750,"title":"HttpError: <HttpError 400 when requesting https://www.googleapis.com/bigquery/v2/projects/","body":"<p>Here is the error dat i'm getting while trying to make an authentication call to bigquery</p>\n\n<pre><code>HttpError: &lt;HttpError 400 when requesting https://www.googleapis.com/bigquery/v2/projects/ClientId/datasets/samples/tables/natality?alt=json returned \"Invalid project ID 'ClientId'. Project IDs must contain 6-63 lowercase letters, digits, or dashes. IDs must start with a letter and may not end with a dash.\"&gt;\n</code></pre>\n\n<p>Here is my main.py</p>\n\n<pre><code>import httplib2\nimport os\nfrom google.appengine.api import memcache\nfrom google.appengine.ext import webapp\nfrom google.appengine.ext.webapp.util import run_wsgi_app\nfrom oauth2client.appengine import oauth2decorator_from_clientsecrets\nfrom bqclient import BigQueryClient\n\n\nPROJECT_ID = \"########\"  this is the Client Id \nDATASET = \"samples\"\nTABLE = \"natality\"\n\n\nCLIENT_SECRETS = os.path.join(os.path.dirname(__file__),\n    'client_secrets.json')\n\nhttp = httplib2.Http(memcache)\ndecorator = oauth2decorator_from_clientsecrets(CLIENT_SECRETS,\n    'https://www.googleapis.com/auth/bigquery')\n\nbq = BigQueryClient(http, decorator)\n\nclass MainHandler(webapp.RequestHandler):\n    @decorator.oauth_required\n    def get(self):\n        self.response.out.write(\"Hello Dashboard!\\n\")\n        modTime = bq.getLastModTime(PROJECT_ID, DATASET, TABLE)\n        if modTime is not None:\n            msg = 'Last mod time = ' + modTime\n        else:\n            msg = \"Could not find last modification time.\\n\"\n        self.response.out.write(msg)\n\napplication = webapp.WSGIApplication([\n   ('/', MainHandler),\n   (decorator.callback_path, decorator.callback_handler())\n], debug=True)\n\ndef main():\n   run_wsgi_app(application)\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>And here is the app.yaml</p>\n\n<pre><code>application: hellomydashboard\nversion: 1\nruntime: python\napi_version: 1\n\nhandlers:\n- url: /favicon\\.ico\n  static_files: favicon.ico\n  upload: favicon\\.ico\n\n- url: .*\n  script: main.py\n</code></pre>\n\n<p>And here is the bqclient.py</p>\n\n<pre><code>import httplib2\nfrom apiclient.discovery import build\nfrom oauth2client.appengine import oauth2decorator_from_clientsecrets\n\nclass BigQueryClient(object):\n    def __init__(self, http, decorator):\n        \"\"\"Creates the BigQuery client connection\"\"\"\n        self.service = build('bigquery', 'v2', http=http)\n        self.decorator = decorator\n\n    def getTableData(self, project, dataset, table):\n        decorated = self.decorator.http()\n        return self.service.tables().get(projectId=project, datasetId=dataset,\n            tableId=table).execute(decorated)\n\n    def getLastModTime(self, project, dataset, table):\n        data = self.getTableData(project, dataset, table)\n        if data is not None and 'lastModifiedTime' in data:\n            return data['lastModifiedTime']\n        else:\n            return None\n\n    def Query(self, query, project, timeout_ms=10000):\n        query_config = {\n            'query': query,\n            'timeoutMs': timeout_ms\n        }\n        decorated = self.decorator.http()\n        result_json = (self.service.jobs()\n                       .query(projectId=project, body=query_config)\n                       .execute(decorated))\n\n        return result_json\n</code></pre>\n\n<p>I also tried replacing the ClientId with Project Id as said in the error but it gives another error </p>\n\n<pre><code>HttpError: &lt;HttpError 404 when requesting https://www.googleapis.com/bigquery/v2/projects/hellodashboard87/datasets/samples/tables/natality?alt=json returned \"Not Found: Dataset hellodashboard87:samples\"&gt;\n</code></pre>\n\n<p>I'm following the tutorial on this page\n<a href=\"https://developers.google.com/bigquery/articles/dashboard#firstcall\" rel=\"nofollow\">https://developers.google.com/bigquery/articles/dashboard#firstcall</a></p>\n"},{"tags":["python","django","unit-testing","selenium","webdriver"],"answer_count":5,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":2031,"score":0,"question_id":9103837,"title":"How do I create a Selenium Webdriver test to verify an element is not present?","body":"<p>I am creating unit tests for my Django app in Selenium Webdriver.</p>\n\n<p>I have an AJAX method that deletes a Topic from the database.\nI'm trying to figure out how to verify that the deleted Topic is no longer present on the page.</p>\n\n<p>I am trying to catch the Exception that the should be generated when Webdriver can't find an element:\nselenium.common.exceptions.NoSuchAttributeException  </p>\n\n<p>Instead I see an error:  </p>\n\n<pre><code>*** URLError: &lt;urlopen error timed out&gt;\n</code></pre>\n\n<p>Here is how I have setup the tests:  </p>\n\n<pre><code>from selenium import webdriver\nfrom django.utils import unittest  \n\nclass TestAuthentication(unittest.TestCase):    \n    scheme = 'http'    \n    host = 'localhost'    \n    port = '4444'    \n\n\n    def setUp(self):    \n        self._driver = webdriver.Firefox()    \n        self._driver.implicitly_wait(10)    \n\n    def login_as_Kallie(self):    \n        # Kallie has manual login    \n        self._driver.get('http://localhost:8000/account/signin/')    \n        user = self._driver.find_element_by_id('id_username')    \n        user.send_keys(\"Kallie\")    \n        password = self._driver.find_element_by_id('id_password')    \n        password.send_keys('*********')    \n        submit = self._driver.find_element_by_id('blogin')    \n        submit.click()    \n\n    def test_Kallie_can_delete_topic(self):    \n        self.login_as_Kallie()    \n        self._driver.find_element_by_link_text(\"Topic to delete\").click()    \n        self._driver.find_element_by_xpath(\"/html/body/div/div[4]/div/div/div[2]/div/table/tbody/tr/td[2]/div/div[3]/span[5]/a\").click()    \n        self._driver.find_element_by_class_name('dialog-yes').click()    \n        self._driver.get(\"http://localhost:8000/questions/\")    \n        # this is the Python exception to catch: selenium.common.exceptions.NoSuchAttributeException    \n        self.assertRaises('selenium.common.exceptions.NoSuchAttributeException', self._driver.find_element_by_link_text(\"Topic to delete\"))    \n\n    def tearDown(self):    \n        self._driver.quit()    \n</code></pre>\n\n<p>How can I test that a Element of the page is absent?   </p>\n"},{"tags":["python","pyramid","formalchemy"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":122,"score":2,"question_id":9834411,"title":"Adding pyramid_formalchemy to existing app","body":"<p>Try to add pyramid_formalchemy to existing app as described in <a href=\"http://docs.formalchemy.org/pyramid_formalchemy/\" rel=\"nofollow\">http://docs.formalchemy.org/pyramid_formalchemy/</a> the following way:</p>\n\n<pre><code>$ pcreate -s pyramid_fa myapp\n</code></pre>\n\n<p>In result inside package \"myapp\" directory with the same name is created, it contains three files: faforms.py, fainit.py, faroutes.py. Is it bug? When I try to create new project:</p>\n\n<pre><code>$ pcreate -s alchemy -s pyramid_fa myapp\n</code></pre>\n\n<p>these three files locates inside in mayapp package directly.</p>\n\n<p>After adding settings to __init__.main() I try to open /admin page and get an error: </p>\n\n<pre><code>AttributeError: 'module' object has no attribute 'FieldSet'\n</code></pre>\n\n<p>I use 1.3 Pyramid version.</p>\n"},{"tags":["python","documentation","python-sphinx"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":70,"score":2,"question_id":12082570,"title":"Override function declaration in autodoc for sphinx","body":"<p>I have a module that goes something like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python\n\n#: Documentation here.\n#: blah blah blah\nfoobar = r'Some really long regex here.'\n\ndef myfunc(val=foobar):\n    '''Blah blah blah'''\n    pass\n</code></pre>\n\n<p>...and I have a <code>.rst</code> file that goes something like this:</p>\n\n<pre><code>:mod:`my_module` Module\n-----------------------\n\n..automodule:: my_module\n    :members:\n    :private-members:\n    :show-inheritance:\n</code></pre>\n\n<p>When I build the documentation, I get an html file with a snippit that goes like this:</p>\n\n<blockquote>\n  <p>mymodule.foobar.<strong>foobar</strong> = <em>'Some absurdly long and ugly regex here'</em>  </p>\n  \n  <p><em>Extra documentation here</em></p>\n  \n  <p>mymodule.<strong>myfunc</strong>(<em>val='Some absurdly long and ugly regex here'</em>)</p>\n  \n  <p><em>blah blah blah</em></p>\n</blockquote>\n\n<p>Based on this <a href=\"http://stackoverflow.com/questions/5365684/is-it-possible-to-override-sphinx-autodoc-for-specific-functions\">stackoverflow post</a>, I thought I could change it by altering my module to:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python\n\n#: .. data:: my_module.foobar\n#: Extra documentation here\nfoobar = 'Some really long regex here.'\n\ndef myfunc(val=foobar):\n    '''.. function:: my_module.myfunc(val=foobar)\n\n    Blah blah blah'''\n    pass\n</code></pre>\n\n<p>...but that didn't do the trick, and just appended the signature I wanted under the ugly one as part of the body. Does anybody know how I can properly override this? </p>\n\n<p><em>(I'm using Sphinx v1.1.3, btw.)</em></p>\n"},{"tags":["python","csv","data"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":43,"score":0,"question_id":13269881,"title":"Handling chinese in csv","body":"<p>We have a web application that reads the data from a csv(comma separated file). Currently we are facing the problem with the csv file itself. We had to insert a column in the csv file which contains chinese data.</p>\n\n<p>We pasted the chinese data into the csv file and saved it. When we open the csv file again, the chinese data is displayed as ?????. </p>\n\n<p>How do I handle this problem. We are nearing the deadline and we cannot change the format of the csv to some other format.  </p>\n\n<p>I tried the solutions posted here, which didn't work.\n<a href=\"http://stackoverflow.com/questions/4221176/excel-to-csv-with-utf8-encoding\">Excel to CSV with UTF8 encoding</a></p>\n\n<p>EDIT:\nOur code is written in python.</p>\n\n<p>Does anyone know how to fix this?\nAny help is appreciated!</p>\n"},{"tags":["python","console","setuptools"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":13271085,"title":"console_scripts entry point ignored?","body":"<p>I am using setuptools (version 0.6c11) on Windows, and I specify console scripts to be installed via <code>console_scripts</code> entry point. It works fine on Linux, but under Windows, using the MinGW compiler, there are no scripts installed. I don't see any realted message in the install output.</p>\n\n<p>Other packages, like ipython, are doing just fine and have working .exe files after running  <code>setup.py install</code>.</p>\n\n<p>Can someone suggest a way to debug that?</p>\n\n<pre><code>import setuptools\nsetup(\n   # ...\n   entry_points={\n      'console_scripts':[\n          'myprog = myMod:main'\n      ]\n   }\n)\n</code></pre>\n"},{"tags":["python","celery"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":17,"score":1,"question_id":13271056,"title":"How to chain a Celery task that returns a list into a group?","body":"<p>I want to create a group from a list returned by a Celery task, so that for each item in the task result set, one task will be added to the group.</p>\n\n<p>Here's a simple code example to explain the use case. The <code>???</code> should be the result from the previous task.</p>\n\n<pre><code>@celery.task\ndef get_list(amount):\n    # In reality, fetch a list of items from a db\n    return [i for i in range(amount)]\n\n@celery.task\ndef process_item(item):\n    #do stuff\n    pass\n\nprocess_list = (get_list.s(10) | group(process_item.s(i) for i in ???))\n</code></pre>\n\n<p>I'm probably not approaching this correctly, but I'm pretty sure it's not safe to call tasks from within tasks:</p>\n\n<pre><code>@celery.task\ndef process_list():\n    for i in get_list.delay().get():\n        process_item.delay(i)\n</code></pre>\n\n<p>I don't need the result from the seconds task.</p>\n"},{"tags":["python","eclipse","blender"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":12975769,"title":"debug Blender Python in Eclipse and PyDev?","body":"<p>How do you go about debug Blender Python in Eclipse and PyDev?</p>\n\n<p>What I have tried is:</p>\n\n<p><a href=\"http://www.luxrender.net/wiki/LuxBlend25_Debugging_with_eclipse\" rel=\"nofollow\">http://www.luxrender.net/wiki/LuxBlend25_Debugging_with_eclipse</a></p>\n\n<p><a href=\"http://www.blender.org/forum/viewtopic.php?t=3914&amp;sid=717a127d12596f89e4aea0c54938ef80\" rel=\"nofollow\">http://www.blender.org/forum/viewtopic.php?t=3914&amp;sid=717a127d12596f89e4aea0c54938ef80</a></p>\n\n<p>But non of then seams to work?</p>\n\n<p>Regards</p>\n"},{"tags":["python","package","rc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13270907,"title":"rc file for python package","body":"<p>I am writing a Python package and I would like to make create a file, like the matplotlibrc, with some default options that I would like to be modifyable in-script by calling an rc module, as in matplotlib happens. How would I achieve that? Should I create the file inside the setup.py script and put an rc class in my __init__.py?</p>\n"},{"tags":["python","tinyos"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13270886,"title":"python2.6 ubuntu 10.04‏‏","body":"<p>I use ubuntu 10.04 and tinyos-2.1.1. I have a problem when i want run \"make micaz sim\".\nThe problem is the following :</p>\n\n<pre><code>mkdir -p simbuild/micaz\nmake: python2.6.5-config: Command not found\nmake: python2.6.5-config: Command not found\nmake: python2.6.5-config: Command not found\n</code></pre>\n\n<p>I try to update and install \"python2.6-dev\"</p>\n\n<pre><code>sudo apt-get install python2.6-dev\n</code></pre>\n\n<p>I add also</p>\n\n<pre><code>export PYTHONPATH=$PYTHONPATH:/usr/include/python2.6\n</code></pre>\n\n<p>I also modified in 'sim-fast.extra', 'sim-sf.extra' and 'sim.extra' files located in /support/make</p>\n\n<pre><code>PYTHON_VERSION=2.6.5\n</code></pre>\n\n<p>Have you any idea??\nthanks in advance</p>\n"},{"tags":["python","dbus"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13267137,"title":"How to handle classes as datatype in python-dbus","body":"<p>I'm new to python and dbus, but is there a data binding (= a way to send and receive) python classes via dbus-python?</p>\n\n<p>My class looks like this:</p>\n\n<pre><code>class Item:\n\n    def __init__(self, one, two, three, four, five, *more):\n        self.one= one\n        self.two= two\n        self.three= three\n        self.four= four\n        self.five= five\n        self.more= more\n</code></pre>\n\n<p>Where more is a list and one to five are strings. I have a list of these items:</p>\n\n<pre><code>list_items = []\nlist_items.append(Item('Test','Test','Test','Test',more))\n</code></pre>\n\n<p>The dbus part looks like this:</p>\n\n<pre><code>@dbus.service.method('com.me.test', in_signature='', out_signature='a(sssssav)')\ndef get_all_items():\n    return list_items\n</code></pre>\n\n<p>Is there an error in my signature or do I have to use a different data structure (tuples?) which can be marshalled?</p>\n"},{"tags":["python","yield","itertools"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13199203,"title":"Python: generating a tree using \"yield\"","body":"<p>I am trying to set up a system to generate a set of \"configurations\".\nThese configurations are simple key/value pairs stored in a python dict.</p>\n\n<p>These configurations are the result of transforming the dict with a sequence of function, this is what i call a workflow.</p>\n\n<p>Here is a simple example of what I ended up with:</p>\n\n<pre><code>global_data = [dict()]\n\ndef workflow_step1(data):\n    results = []\n    for i in range(1,4):\n        data['key'] = i\n        results.append(copy.deepcopy(data))\n    return results\n\ndef workflow_step2(data):\n    results = []\n    for i in range(1,3):\n        data['otherkey'] = i\n        results.append(copy.deepcopy(data))\n    return results\n\ndef workflow_step3(data):\n    data['yetanotherkey'] = 42\n    return [copy.deepcopy(data)]\n\ndef list_workflow():\n    return [workflow_step1, workflow_step2, workflow_step3]\n\ndef merge(lhs,rhs):\n    return lhs+rhs\n\ndef run(data):\n    for step in list_workflow():\n        data = reduce(lambda lhs, rhs: lhs+rhs, [step(d) for d in data])\n    return data\n\nprint run(global_data)\n</code></pre>\n\n<p>This works kind of well, i get:</p>\n\n<pre><code>[{'yetanotherkey': 42, 'otherkey': 1, 'key': 1},\n {'yetanotherkey': 42, 'otherkey': 2, 'key': 1},\n {'yetanotherkey': 42, 'otherkey': 1, 'key': 2},\n {'yetanotherkey': 42, 'otherkey': 2, 'key': 2},\n {'yetanotherkey': 42, 'otherkey': 1, 'key': 3},\n {'yetanotherkey': 42, 'otherkey': 2, 'key': 3}]\n</code></pre>\n\n<p>As you can see, the goal is to obtain all possible combinations of the dict. Each step of the workflow returns a set of possible combinations, that should create a new branch of possibilities for the upcoming steps.</p>\n\n<p>The problem that I am facing, is that the users are now creating more and more workflow steps, thus leading to a combinatorial explosion.</p>\n\n<p>The problem in my naive design, is that i generate the whole tree of all posibilities at once.</p>\n\n<p>I was hoping to resolve this using <code>yield</code> and generators, to generate one possibility at a time, and thus not store everything at the same time.</p>\n\n<p>I was of course able to rewrite the workflow step using yield:</p>\n\n<pre><code>def workflow_step1(data):\n    for i in range(1,4):\n        data['key'] = i\n        yield copy.deepcopy(data)\n\ndef workflow_step2(data):\n    for i in range(1,3):\n    data['otherkey'] = i\n        yield copy.deepcopy(data)\n\ndef workflow_step3(data):\n    data['yetanotherkey'] = 42\n    yield copy.deepcopy(data)\n\ndef list_workflow():\n    yield workflow_step1\n    yield workflow_step2\n    yield workflow_step3\n</code></pre>\n\n<p>But I just can't make my brain to think of the way to rewrite the <code>run</code> function to process each step sequentially. I get lost in a brainmaze of yields and generators.</p>\n\n<p>Any ideas are more that welcome!</p>\n"},{"tags":["python","numpy","linear-algebra"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13249108,"title":"Efficient & pythonic check for singular matrix","body":"<p>Working on some matrix algebra here.  Sometimes I need to invert a matrix that may be singular or ill-conditioned.  I understand it is pythonic to simply do this:</p>\n\n<pre><code>try:\n    i = linalg.inv(x)\ncatch LinAlgErr as err:\n    #handle it\n</code></pre>\n\n<p>but am not sure how efficient that is.  Wouldn't this be better?</p>\n\n<pre><code>if linalg.cond(x) &lt; 1/sys.float_info.epsilon:\n    i = linalg.inv(x)\nelse:\n    #handle it\n</code></pre>\n\n<p>Does numpy.linalg simply perform up front the test I proscribed?</p>\n"},{"tags":["python","annotations","matplotlib"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13268587,"title":"How do i annotate with a subscripted text in matplotlib?","body":"<p>Im attempting to plot some data with matplotlib and i need some of the annotate to be formated like math/chem formulas. \nhere is some of my code.</p>\n\n<pre><code>#!/usr/bin/python2 \nimport numpy as np\nimport matplotlib.pyplot as pytl\nfrom matplotlib import rc\nrc('font',**{'family':'sans-serif','sans-serif':['Helvetica']})\nrc('text', usetex=True)\nrecdt = np.dtype([('compound',str,4),('H_v','f4'),('B_o','f4')]);\ngat =  np.loadtxt('tra',dtype=object, usecols=(0,1,2),unpack=True);\ngct,ght,gbt=[],[],[]\nfor c,h,b in np.transpose(gat):\n    gct=np.append(gct,c)\n    ght=np.append(ght,h)\n    gbt=np.append(gbt,b)\n    ght= ght.astype(np.float)\ngbt= gbt.astype(np.float)\nhard = pytl\nfour = hard   #####  \nfour.scatter(gbt,ght)\nhard.title( 'physical stuff' )\nhard.xlabel('physical prop 1')\nhard.ylabel('physical prop2 ')\nfor l,x1,y2 in zip ( gct,gbt,ght):\n    hard.annotate( l,xy=(x1,y2),xytext=(-24,12),textcoords = 'offset points', arrowprops = dict(arrowstyle = '-&gt;', connectionstyle = 'arc3,rad=0'),rotation=0 )\nhard.ylim([0,10])\nhard.savefig('hardcomp.png')\nhard.show()\n</code></pre>\n\n<p>and here is some test data</p>\n\n<pre><code>ZrC 6.8 1\nNbC 8   2\nNbN 7   13\nRuB2    30  5\nBP  3   1\nAlP 9.4 3\nInSb    2.2 47\nC   6   4\n</code></pre>\n\n<p>the data is in three columns one text the other two are numbers.\ni'd like the '2' in 'RbB2' to end up as a subscript. </p>\n"},{"tags":["python","hash","dictionary"],"answer_count":3,"favorite_count":1,"up_vote_count":9,"down_vote_count":0,"view_count":3502,"score":9,"question_id":5884066,"title":"Hashing a python dictionary","body":"<p>For caching purposes I need to generate a cache key from GET arguments which are present in a dict.</p>\n\n<p>Currently I'm using <code>sha1(repr(sorted(my_dict.items())))</code> (<code>sha1()</code> is a convenience method that uses hashlib internally) but I'm curious if there's a better way.</p>\n"},{"tags":["python","variables","global-variables"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":57,"score":0,"question_id":13269542,"title":"Does 'global' make a variable global just within class or throughout the whole script?","body":"<p>Given the following in the same script:</p>\n\n<pre><code>class ClassA:\n    def GetExpBidBrice():\n        global x\n        x ='abc'\n\n    def GetExpAskPrice():\n        y = x + 'zyz'\n\nclass ClassB:\n    def GetExpBidBrice():\n        x = 123\n\n    def GetExpAskPrice():\n        y = x + 'zyz'\n</code></pre>\n\n<p>Does the <code>global</code> in <code>ClassA.GetExpBidPrice()</code> make <code>x</code> global just to the other method in <code>ClassA</code>? Or does it make it global right across the board i.e. in <code>ClassB</code> or any other class that uses a variable called <code>x</code>?</p>\n"},{"tags":["python","driver","arduino","maya","umdf"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":87,"score":1,"question_id":11012544,"title":"Can a device have two UMDF Drivers?","body":"<p>This may seem like a bit of an odd question, but I was wondering if it is possible to associate two drivers with a peripheral device? </p>\n\n<p>The reason I ask is that I am building an input device for <a href=\"http://en.wikipedia.org/wiki/Autodesk_Maya\" rel=\"nofollow\">Maya</a> using an Arduino microcontroller. The Arduino already has its own device driver, but I was thinking of developing a <a href=\"http://en.wikipedia.org/wiki/Windows_User_Mode_Driver_Framework\" rel=\"nofollow\">UMDF</a> driver to take the data that comes in from Arduino over the serial port and pre-process it ready to go into Maya. </p>\n\n<p>Right now, I have two Python programs running - a 32-bit Python program running outside of Maya which listens to the serial port and converts the data to a form which a second 64-bit program inside the 64-bit version of Maya can understand and use in the Maya scene. This works fine, but it is a bit annoying having to start that external server program every time I want to use this device in Maya. If I can have a UMDF driver ready to jump into action when the appropriate type of data comes in off the Arduino then this would help immensely. Will this approach work? </p>\n"},{"tags":["python","pyqt4","flags","overlap","borderless"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":460,"score":0,"question_id":5829585,"title":"PyQt4: how to make undercorated window with reserved space","body":"<p>I'd like to make a panel-like application using PyQt4 for Linux. for this i need the window i created:</p>\n\n<ul>\n<li>to be undecorated</li>\n<li>to have reserved space</li>\n<li>to appear on all workspaces</li>\n</ul>\n\n<p>From reading <a href=\"http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qwidget.html#details\" rel=\"nofollow\">the documentation</a> i've got the idea that i should use QtWindowFlags. But i have no clue as to how to do that. Also i believe there should be a Qt.WindowType hint somewhere telling the WM the window's a \"dock\" application. I have made this with pygtk following <a href=\"http://stackoverflow.com/questions/3859045/preventing-window-overlap-in-gtk\">this thread</a>, but here with Qt i don't really know how to handle this. (I need Qt for its ability to theme/skin application more easily.)</p>\n\n<p>Below is the current code i made (nothing extraordinary).</p>\n\n<pre><code>import sys\nfrom PyQt4 import QtGui\n\nclass Panel(QtGui.QWidget):\ndef __init__(self, parent=None): ## should the QtWindowFlag be here?\n    QtGui.QWidget.__init__(self, parent) ## should the QtWindowFlag be there as well?\n\n    self.setWindowTitle('QtPanel')\n    self.resize(QtGui.QDesktopWidget().screenGeometry().width(), 25)\n    self.move(0,0)\n\ndef main():\n    app = QtGui.QApplication(sys.argv)\n    panel = Panel()\n    panel.show()\n    sys.exit(app.exec_())\n    return 0\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>Can anyone help me with this? Thanks :)</p>\n"},{"tags":["python","c","sockets","pipes"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13269436,"title":"Socket communcation between C and Python","body":"<p>I just tried a really simple example to get started with sockets to communicate between a C app and Python. Here is the very simple Python script:</p>\n\n<pre><code>import socket\n\ns = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)\ns.connect(\"/tmp/demo_socket\")\nprint \"Sending...\"\ns.send(\"Hello C from Python!\")\ndata = s.recv(1024)\ns.close()\nprint 'Received', repr(data)\n</code></pre>\n\n<p>And here the corresponding C code, without the headers:</p>\n\n<pre><code>int main(void)\n{  \n  struct sockaddr_un address;\n  int socket_fd, connection_fd;\n  socklen_t address_length;\n  pid_t child;  \n\n  char buffer[256];\n  int n;\n\n  socket_fd = socket(AF_UNIX, SOCK_STREAM, 0);\n  if (socket_fd &lt; 0){\n      printf(\"socket() failed\\n\");\n      return 1;\n  } \n\n  unlink(\"/tmp/demo_socket\");\n  memset(&amp;address, 0, sizeof(struct sockaddr_un));\n\n  address.sun_family = AF_UNIX;\n  snprintf(address.sun_path, UNIX_PATH_MAX, \"/tmp/demo_socket\");\n\n  if (bind(socket_fd, (struct sockaddr *) &amp;address, sizeof(struct sockaddr_un)) != 0) {\n      printf(\"bind() failed\\n\");\n      return 1;\n  }\n  if(listen(socket_fd, 5) != 0) {\n      printf(\"listen() failed\\n\");\n      return 1;\n  }\n\n  address_length = sizeof(address);  \n  while((connection_fd = accept(socket_fd, \n                   (struct sockaddr *) &amp;address,\n                   &amp;address_length)) &gt; -1)\n  {\n      printf(\"successfully received data\\n\");\n      bzero(buffer,256);\n      n = read(connection_fd,buffer,255);\n      if (n &lt; 0) error(\"ERROR reading from socket\");\n         printf(\"Here is the message: %s\\n\\n\", buffer);\n      strcpy(buffer, \"Hi back from the C world\"); \n      n = write(connection_fd, buffer, strlen(buffer));\n      if (n &lt; 0) \n         printf(\"ERROR writing to socket\\n\");           \n      break;      \n  }\n  close(socket_fd);\n  close(socket_fd);\n  return(0);\n}\n</code></pre>\n\n<p>The output is then as follows when running them in parallel:</p>\n\n<pre><code> Successfully received data\n Here is the message: Hello C from Python!\n\n ERROR writing to socket\n close failed in file object destructor:\n Error in sys.excepthook:\n\n Original exception was:\n</code></pre>\n\n<p>So the good news is, receiving stuff from the Python world works fine, but I get an error when trying to write something back, plus it seems I get an exception in the end. Anyone an idea what I am doing wrong here?</p>\n\n<p>EDIT: Thanks guys, I did the correction that you suggested, the message exchange works fine, just the C-application is still causing trouble and I am not sure why...</p>\n\n<pre><code>close failed in file object destructor:\nError in sys.excepthook:\n\nOriginal exception was:\n</code></pre>\n"},{"tags":["python","json"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":47,"score":3,"question_id":13256963,"title":"Prevent JSON serialization from throwing an exception in Python","body":"<p><strong>What is a good way to prevent the python's <code>json</code> library from throwing an exception when it encounters objects that it does not know how to serialize?</strong></p>\n\n<p>We are using <code>json</code> to serialize dict objects, sometimes properties of the objects are not recognized by the <code>json</code> library, causing it to throw an exception. Instead of throwing an exception, it would be nice if it just skipped over that property of the dict instead. It could set the property value to \"None\" or even a message: \"Cannot serialize\".</p>\n\n<p>Right now, the only way I know how to do this is to explicitly identify and skip over each data type that <code>json</code> might encounter that will make it throw an exception. As you can see, I have it turning <code>datetime</code> objects into strings, but also skipping over some geo-point objects from the <code>shapely</code> library:</p>\n\n<pre><code>import json\nimport datetime\nfrom shapely.geometry.polygon import Polygon\nfrom shapely.geometry.point import Point\nfrom shapely.geometry.linestring import LineString\n\n# This sublcass of json.JSONEncoder takes objects from the\n# business layer of the application and encodes them properly\n# in JSON.\nclass Custom_JSONEncoder(json.JSONEncoder):\n\n    # Override the default method of the JSONEncoder class to:\n    # - format datetimes using strftime('%Y-%m-%d %I:%M%p')\n    # - de-Pickle any Pickled objects\n    # - or just forward this call to the superclass if it is not\n    #   a special case object\n    def default(self, object, **kwargs):\n        if isinstance(object, datetime.datetime):\n            # Use the appropriate format for datetime\n            return object.strftime('%Y-%m-%d %I:%M%p')\n        elif isinstance(object, Polygon):\n            return {}\n        elif isinstance(object, Point):\n            return {}\n        elif isinstance(object, Point):\n            return {}\n        elif isinstance(object, LineString):\n            return {}\n\n        return super(Custom_JSONEncoder, self).default(object)\n</code></pre>\n"},{"tags":["python","django"],"answer_count":4,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":1125,"score":8,"question_id":1912351,"title":"Django: Where to put helper functions?","body":"<p>I have a couple of functions that i wrote that I need to use in my django app. Where would I put the file with them and how would i make them callable whithin my views?</p>\n"},{"tags":["python","scrapy","crawl","grab"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13270324,"title":"Does scrapy follow links which we've already been to?","body":"<p>Subj. We wrote a crawling spider, and it works fine with some of sites, but on site with lots of links it is working for a significantly long time. So, the question is in topic - does scrapy follow links which it've already been to?</p>\n\n<p>I digged through the docs but didn't find any answer or clue =(</p>\n"},{"tags":["python","sqlalchemy"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13269997,"title":"SQLAlchemy does not find database on Windows","body":"<p>I developed a python  application on Linux and now I am working on the porting it to Windows. I use SQLAlchemy to connect to the database. On Linux everything is OK, but on windows I get this error:</p>\n\n<pre><code>OperationalError: (OperationalError) (1049, \"Unknown database 'parafamacie'\") None None\n</code></pre>\n\n<p>This is the code where I try to connect to the database:</p>\n\n<pre><code>    url = URL(drivername=db.getRDBMS(), username='metmi', password='metmi', host=db.getHost(),port=str(db.getPort()), database=db.getCensimento())\n    engine = create_engine(url,convert_unicode=True,encoding='latin1')\n    Session = sessionmaker(bind=engine)\n    self.session=Session()\n</code></pre>\n\n<p>I get the error only when I try to use the database:</p>\n\n<pre><code>for q in self.session.query(tc_clpar):\n        l[q.tc_clpar_id]=self.getQuestionById(q.tc_clpar_id)\n</code></pre>\n\n<p>On Windows and Linux I use the same code, so I do not know why I got two different behaviours.</p>\n\n<p>I need the help of some body more experienced, is it bug in SQLalchemy on Windows? I do not think so, is it a problem of configuration?</p>\n"},{"tags":["python","class"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":3,"view_count":61,"score":-1,"question_id":13270048,"title":"How to add elements from one class to another class list, python","body":"<pre><code>class lista(object):\n    listanumere=[]\n    def printer(self):\n        print self.listanumere\n    def adds(self,numar):\n        self.listanumere.append(numar)\n\nclass movies():\n    def __init__(self,ide,nume):\n        self.__nume=nume\n        self.__ide=ide\n\nlistarez=lista\na=movies(1,\"David\")\nlista.adds(a)\nlista.printer()\n</code></pre>\n\n<p><strong>Error:</strong></p>\n\n<pre><code>TypeError: unbound method adds() must be called with lista instance as first argument (got movies instance instead)  \n</code></pre>\n\n<p>So my question is: How to make a class which contains a list of elements defined in another class, for example a class which contains the list of movies and some methods which modify the list for example add a new movie or remove a movie with a certain ID?</p>\n"},{"tags":["python","pandas"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":13269890,"title":"cartesian product in pandas","body":"<p>I have two pandas dataframes:</p>\n\n<pre><code>from pandas import DataFrame\ndf1 = DataFrame({'col1':[1,2],'col2':[3,4]})\ndf2 = DataFrame({'col3':[5,6]})     \n</code></pre>\n\n<p>What is the best practice to get their cartesian product (of course without writing it explicitly like me)?</p>\n\n<pre><code>#df1, df2 cartesian product\ndf_cartesian = DataFrame({'col1':[1,2,1,2],'col2':[3,4,3,4],'col3':[5,5,6,6]})\n</code></pre>\n"},{"tags":["python","apache","apache2","web-security","code-access-security"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":7,"view_count":69,"score":-6,"question_id":13269451,"title":"Protecting Python Code","body":"<p>i have a doubt about protection of Python Code. I'm not meaning just \"Obfuscation\", so, i've read a lot of topics about this subject, and i choose to put my application behind a web interface. So, it's done.</p>\n\n<p>I execute my code trough a CGI script behind a Web interface, so, i don't need to send my .py file anymore.</p>\n\n<p>But, i still have some concerns about protection and license.</p>\n\n<ol>\n<li><p>Is there some well known manual where i can find information about Apache and how protect my home directory against \"undesirable downloads\"??</p></li>\n<li><p>I'm using linux, is there some other good tip to protect my script, besides the fact that it's already being behind a web interface?</p></li>\n<li><p>Talking about License, the use of Python language guarantee me some protection or way to license my code??</p></li>\n</ol>\n"},{"tags":["python","yaml"],"answer_count":6,"favorite_count":0,"up_vote_count":17,"down_vote_count":0,"view_count":5578,"score":17,"question_id":528281,"title":"How can I include an yaml file inside another?","body":"<p>So I have two yaml files A and B and I want the contents of A to be inserted inside B, either spliced into the existing data structure (eg. an array), or as a child of an element, eg. the value for a certain hash key.</p>\n\n<p>Is this possible at all? How? If not, any pointers to a normative reference?</p>\n"},{"tags":["python","text"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":70,"score":0,"question_id":13268847,"title":"Editing a text file using python","body":"<p>I have an auto generated bibliography file which stores my references. The citekey in the generated file is of the form <code>xxxxx:2009tb</code>. Is there a way to make the program to detect such a pattern and change the citekey form to <code>xxxxx:2009</code>?</p>\n"},{"tags":["python","nltk","text-mining"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13269543,"title":"Why am I getting error? ValueError: chunk structures must contain tagged tokens or trees","body":"<p>I've been tinkering with NLTK with the aim of extracting entities from some news articles, but I keep getting an error, ValueError: chunk structures must contain tagged tokens or trees. </p>\n\n<p>Can anyone help me?</p>\n\n<pre><code>import lxml.html\nimport nltk, re, pprint \n\n\n\ndef ie_preprocess(document):\n    \"\"\"This function takes raw text and chops and then connects the process to break     \n       it down into sentences, then words and then complete part-of-speech tagging\"\"\"\n    sentences = nltk.sent_tokenize(document)\n    sentences = [nltk.word_tokenize(sent) for sent in sentences]\n    sentences = [nltk.pos_tag(sent) for sent in sentences]\n    return sentences\n\n\n    #import story\n    base_url = \"http://www.thisisstaffordshire.co.uk/Yobs-pelt-999-crews-bottles-fireworks-Shelton/story-17256383-detail/story.html\"\n    page = lxml.html.parse(base_url)\n    story = page.xpath('//*[@id=\"story\"]/div[2]/div[1]')\n    raw_text = story[0].text_content()\n    #tokenize\n    output = ie_preprocess(raw_text)\n    print output\n    #chunk\n    grammar = r'''\n       NP: \n       {&lt;DT&gt;&lt;NN.*&gt;&lt;.*&gt;*&lt;NN.*&gt;} \n       '''\n    cp = nltk.RegexpParser(grammar)\n\n    chunked = cp.parse(output)\n\n    print chunked\n</code></pre>\n"},{"tags":["python"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1195,"score":2,"question_id":2010413,"title":"where is the 'itertools' file","body":"<pre><code>import itertools\nprint itertools#ok\n</code></pre>\n\n<p>the code is ok</p>\n\n<p>but i can't find the itertools file.</p>\n\n<p>who can tell me where is the 'itertools file'</p>\n\n<hr>\n\n<p>my code is run python2.5</p>\n\n<pre><code>import itertools\nprint itertools.__file__\n\n\nTraceback (most recent call last):\n  File \"D:\\zjm_code\\mysite\\zjmbooks\\a.py\", line 5, in &lt;module&gt;\n    print itertools.__file__\nAttributeError: 'module' object has no attribute '__file__'\n</code></pre>\n"},{"tags":["python","multiprocessing","celery","gevent","monkeypatching"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13194064,"title":"Using Celery on processes and gevent in tasks at the same time","body":"<p>I'd like to use Celery as a queue for my tasks so my web app could enqueue a task, return a response and the task will be processed meanwhile / someday / ... I build a kind of API, so I don't know what sort of tasks will be there in advance - in future, there can be tasks dealing with HTTP requests, another IO, but also CPU-consuming tasks. In respect to that, I'd like to run Celery's workers on processes, as these are universal kind of parallelism in Python.</p>\n\n<p>However, I'd like to use gevent in my tasks too, so I could have a single task spawning many HTTP requests, etc. The problem is, when I do this:</p>\n\n<pre><code>from gevent import monkey\nmonkey.patch_all()\n</code></pre>\n\n<p>Celery stops to work. It starts, but no tasks can be effectively enqueued - they seem to go to the broker, but Celery worker doesn't collect them and process them. Only starts and waits. If I delete those lines and perform the task without any gevent and parallelization, everything works.</p>\n\n<p>I think it could be because gevent patches also threading. So I tried </p>\n\n<pre><code>from gevent import monkey\nmonkey.patch_all(thread=False)\n</code></pre>\n\n<p>...but then Celery doesn't even start, it crashes without giving a reason (debug level of logging turned on).</p>\n\n<p><strong>Is it possible to use Celery for enqueuing tasks and gevent for doing some stuff inside a single task? How? What do I do wrong?</strong></p>\n"},{"tags":["c++","python","swig"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13269393,"title":"How to enumerate enum members using SWIG","body":"<p>Can I expose a C++ <code>enum</code> to SWIG as a real entity rather than a set of constants so I can enumerate over them in python code?</p>\n"},{"tags":["python","unicode"],"answer_count":11,"favorite_count":10,"up_vote_count":21,"down_vote_count":0,"view_count":21629,"score":21,"question_id":1342000,"title":"How to replace non ascii characters in string?","body":"<p>I have a string that looks like so:</p>\n\n<pre><code>6Â 918Â 417Â 712\n</code></pre>\n\n<p>The clear cut way to trim this string (as I understand Python) is simply to</p>\n\n<p>say the string is in a variable called s, we get:</p>\n\n<pre><code>s.replace('Â ', '')\n</code></pre>\n\n<p>That should do the trick. But of course it complains that the Non-ASCII character <code>'\\xc2'</code> in file <code>blabla.py</code> is not encoded.</p>\n\n<p>I never quite could understand how to switch between different encodings.</p>\n\n<p>Appreciate some help.</p>\n\n<p>EDIT:</p>\n\n<p>Here's the code, it really is just the same as above, but now it's in context.</p>\n\n<p>The file is saved as UTF-8 in notepad.\nThe file has the following header:</p>\n\n<pre><code>#!/usr/bin/python2.4\n# -*- coding: utf-8 -*-\n</code></pre>\n\n<p>The code:</p>\n\n<pre><code>f = urllib.urlopen(url)\n\nsoup = BeautifulSoup(f)\n\ns = soup.find('div', {'id':'main_count'})\n\n#making a print 's' here goes well. it shows 6Â 918Â 417Â 712\n\ns.replace('Â ','')\n\nsave_main_count(s)\n</code></pre>\n\n<p><hr /></p>\n\n<p>it gets no further than s.replace...</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":6,"view_count":56,"score":-5,"question_id":13268466,"title":"Python (conventional CPython) is supported on what Operating Systems?","body":"<p>The <a href=\"http://www.python.org/about/\" rel=\"nofollow\">documentation page</a> of the official python site says:</p>\n\n<blockquote>\n  <p><strong>Python runs everywhere</strong></p>\n  \n  <p>Python is available for all major operating systems: Windows, Linux/Unix, OS/2, Mac, Amiga, among others. There are even versions that run on .NET and the Java virtual machine. You'll be pleased to know that the same source code will run unchanged across all implementations.</p>\n</blockquote>\n\n<p>However, it does not mention the flavors of OS supported (like Windows 7 Ultimate), the exact versions (like SUSE Linux Enterprise Desktop 10.0 SP3), and the service pack releases if any.</p>\n\n<p>Is there a site where this information is published? Ideally should have been part of www.python.org</p>\n"},{"tags":["python","parallel-python"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13255315,"title":"Parallel Python - RuntimeError: Communication pipe read error","body":"<p>I'm using parallel python to run multiple dynamic simulations using a module called OrcFxAPI. The program works perfectly if it is run as a python program on my machine however if I convert it to an exe file using py2exe and then run I get the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n    File \"Analysis.pyc\", Line 500, in multiprocessor\n    File \"pp.pyc\", Line 342, in __init__\n    File \"pp.pyc\", Line 506, in set_ncpus\n    File \"pp.pyc\", Line 140, in __init__\n    File \"pp.pyc\", Line 152, in start\n    File \"pptransport.pyc\", Line 140, in receive\nRuntimeError: Communication pipe read error\n</code></pre>\n\n<p>It is failing at this line in my program:</p>\n\n<pre><code>job_server = pp.Server(ppservers=ppservers)\n</code></pre>\n\n<p>but I think it might be something to do with the path used to import the OrcFxAPI module when submitting the job:</p>\n\n<pre><code>job = job_server.submit(max_seastate, (gui_vars, case_list, case, line_info, output_vars), (), (\"OrcFxAPI\",), callback=finished, callbackargs=(case_no, no_of_cases,))\n</code></pre>\n"},{"tags":["python","video","opencv","avi"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":13268740,"title":"Python OpenCV, can't write a video (.avi) to file","body":"<p>I'm writing a programme in Windows XP using Python and OpenCV that adds image frames captured from a webcam to a video (.avi), but only when a certain condition is met. For testing purposes this condition is time based, but this will change. The only problem is, my programme does not output anything. Everything seems to run fine, but then when I check for the .avi file that it should be outputting, there is nothing.</p>\n\n<p>Here's my code. I've been told my style is a little unconventional, but hopefully you can see what I'm up to. Thank you in advance.</p>\n\n<pre><code>import cv, time ##Import modules\ncv.NamedWindow(\"Experiment\", cv.CV_WINDOW_AUTOSIZE)                         ##Open window\ncamera_index = 1\ncapture = cv.CaptureFromCAM(camera_index)\nx = time.clock()+5\n\ntry:\n    while 1:\n        if time.clock() &lt; x:                                                ##Clock to capture 5 seconds of footage\n            frame = cv.QueryFrame(capture)                                  ##Capture webcam frame\n            cv.ShowImage(\"Experiment\", frame)                               ##Display image\n            writer = cv.CreateVideoWriter(\"C:\\/test.avi\", cv.CV_FOURCC('F', 'M', 'P', '4'),\n                                          24, (640, 480), 1)                ##Write video file (codec = MPEG-4 - .avi)\n            if writer:                                                      ##Write frame to file\n                cv.WriteFrame(writer, frame)\n            if not writer:                                                  ##Failure to register video writer\n                print \"Error: Video writer malfunction\"\n                sys.exit(1)\n                cv.DestroyWindow(\"Experiment\")\n                break\n        else:\n            if writer:\n                print \"Video capture succeeded\"\n                cv.DestroyWindow(\"Experiment\")\n                camera_index += 1\n                capture = cv.CaptureFromCAM(-1)\n                break\n        c = cv.WaitKey(10)\n        if(c==\"n\"):\n            camera_index += 1\n            capture = cv.CaptureFromCAM(-1)\nexcept:\n    print \"Video capture failed\"                                            ##Total systems failure escape routine!!!\n    cv.DestroyWindow(\"Experiment\")\n</code></pre>\n\n<p>--Edit--</p>\n\n<p>If I change <code>cv.CV_FOURCC('F', 'M', 'P', '4')</code> in line 12 to \"-1\" a video is output, but it is 0 bytes.</p>\n"},{"tags":["javascript","python","variables"],"answer_count":2,"favorite_count":3,"up_vote_count":2,"down_vote_count":0,"view_count":1156,"score":2,"question_id":3690116,"title":"Parse JavaScript variable with Python","body":"<p>How can I convert a JavaScript variable (not JSON format) into a python variable?</p>\n\n<p>Example JavaScript variable:</p>\n\n<pre><code>{\n    title: \"TITLE\",\n    name: \"NAME\",\n    active: false,\n    info: {\n        key1: \"value1\",\n        dict1: {\n            sub_key1: \"sub_value1\",\n            sub_key2: \"sub_value2\",\n        },\n        dict2: {\n            sub_key3: \"sub_value3\",\n            sub_key4: \"sub_value4\",\n            sub_key5: \"sub_value5\"\n        },\n    },\n    list1: [\"element1\", \"element2\", \"element2\"],\n}\n</code></pre>\n"},{"tags":["javascript","python"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":1681,"score":2,"question_id":2894946,"title":"Passing JavaScript variable to Python","body":"<p>For example:</p>\n\n<pre><code>#!/usr/bin/python\nprint \"This is python.\"\n\nprint \"&lt;script type=\"text/javascript\"&gt;\n          var pass_to_python = new Number(7)\n       &lt;/script&gt;\"\n\nthe_number = pass_to_python???\n</code></pre>\n\n<p>How do I get the pass_to_python in python?</p>\n"},{"tags":["c++","python","dll"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":55,"score":4,"question_id":13265046,"title":"could not load c++ DLL in python","body":"<p>I am trying to use a c++ dll in python but I cant even load it. I am trying the following python code to load it:</p>\n\n<blockquote>\n  <p>from ctypes import cdll</p>\n  \n  <p>mydll = cdll.LoadLibrary('SORT_DLL.dll')</p>\n</blockquote>\n\n<p>But when i try to run this i get:</p>\n\n<blockquote>\n  <p>D:...\\src\\SORT_DLL\\Debug>UseDll.py</p>\n  \n  <p>Traceback (most recent call last):</p>\n  \n  <p>File \"D:...\\src\\SORT_DLL\\Debug\\UseDll.py\", line 2, in</p>\n  \n  <p></p>\n  \n  <p>mydll = cdll.LoadLibrary('SORT_DLL.dll')</p>\n  \n  <p>File \"C:\\Python27\\lib\\ctypes__init__.py\", line 443, in LoadLibrary</p>\n  \n  <p>return self._dlltype(name)</p>\n  \n  <p>File \"C:\\Python27\\lib\\ctypes__init__.py\", line 365, in <strong>init</strong></p>\n  \n  <p>self._handle = _dlopen(self._name, mode)</p>\n  \n  <p>WindowsError: [Error 193] %1 ist keine zulõssige Win32-Anwendung</p>\n</blockquote>\n\n<p>The last sentence means \"%1 is not a valid Win32 application\" in english.</p>\n\n<p>I already looked it up at <a href=\"http://docs.python.org/2/library/ctypes.html#module-ctypes\" rel=\"nofollow\">http://docs.python.org/2/library/ctypes.html#module-ctypes</a> , but this didnt lead to a solution for my problem.</p>\n"},{"tags":["python","django"],"answer_count":3,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":1318,"score":3,"question_id":1949248,"title":"How to add clickable links to a field in Django admin?","body":"<p>I have this admin.py</p>\n\n<pre><code>class LawyerAdmin(admin.ModelAdmin):\n    fieldsets = [\n        ('Name',   {'fields': ['last', 'first', 'firm_name', 'firm_url', 'school', 'year_graduated']}),\n    ]\n    list_display = ('last', 'first', 'school', 'year_graduated', 'firm_name', 'firm_url')\n    list_filter = ['school', 'year_graduated']\n    search_fields = ['last', 'school', 'firm_name']\n</code></pre>\n\n<p>and I want to make \"firm_url\" fields clickable with each of the url listed in the field. How can I do this? Thank you.</p>\n"},{"tags":["java","python","osx","mercurial"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":39,"score":-4,"question_id":13268637,"title":"Error while running hg command from java","body":"<p>When I run a hg command in MAC os, from commandline it runs successfully, but when the same command is run from my java file, it throws some library error.</p>\n\n<p>The command is :\n/usr/local/bin/hg showconfig ui.username</p>\n\n<p>I am getting the following exception : </p>\n\n<pre><code>Traceback (most recent call last):\nFile \"/usr/local/bin/hg\", line 38, in &lt;module&gt;\nmercurial.dispatch.run()\nFile \"/Library/Python/2.7/site-packages/mercurial/dispatch.py\", line 28, in run\nsys.exit((dispatch(request(sys.argv[1:])) or 0) &amp; 255)\nFile \"/Library/Python/2.7/site-packages/mercurial/dispatch.py\", line 41, in dispatch\nreq.ui = uimod.ui()\nFile \"/Library/Python/2.7/site-packages/mercurial/ui.py\", line 45, in __init__\nfor f in scmutil.rcpath():\nFile \"/Library/Python/2.7/site-packages/mercurial/scmutil.py\", line 464, in rcpath\n_rcpath = osrcpath()\nFile \"/Library/Python/2.7/site-packages/mercurial/scmutil.py\", line 436, in osrcpath\n  path = systemrcpath()\nFile \"/Library/Python/2.7/site-packages/mercurial/scmutil.py\", line 489, in systemrcpath\npath.extend(rcfiles(os.path.join(p, root)))\nFile \"/Library/Python/2.7/site-packages/mercurial/scmutil.py\", line 474, in rcfiles\nfor f, kind in osutil.listdir(rcdir)\nFile \"/Library/Python/2.7/site-packages/mercurial/demandimport.py\", line 86, in                                   \n __getattribute__\nself._load()\nFile \"/Library/Python/2.7/site-packages/mercurial/demandimport.py\", line 58, in _load\nmod = _origimport(head, globals, locals)\nImportError: dlopen(/Library/Python/2.7/site-packages/mercurial/osutil.so, 2): Library not      \nloaded:    \n\n /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libJPEG.dylib\n  Referenced from:       \n      /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework      /Versions/A/ImageIO\n   Reason: Incompatible library version: ImageIO requires version 1.0.0 or later, but      \n   libJPEG.dylib provides version 0.0.0\n</code></pre>\n"},{"tags":["python","parsing","machine-learning","classification","scikit-learn"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13181409,"title":"How can i get top discriminative terms out of TD-idf vectors , for each files in scikit-learn?","body":"<p>I am trying to get top discrimintive terms out of vectors in scikit-learn.\nFrom example It can be done using this for each Categories but i want it for each files inside categories.</p>\n\n<p><a href=\"https://github.com/scikit-learn/scikit-learn/blob/master/examples/document_classification_20newsgroups.py\" rel=\"nofollow\">https://github.com/scikit-learn/scikit-learn/blob/master/examples/document_classification_20newsgroups.py</a></p>\n\n<pre><code>    if opts.print_top10:\n        print \"top 10 keywords per class:\"\n        for i, category in enumerate(categories):\n            top10 = np.argsort(clf.coef_[i])[-10:]\n            print trim(\"%s: %s\" % (\n            category, \" \".join(feature_names[top10])))\n</code></pre>\n\n<p>I want to do this for each files from testing dataset instead of each categories.\nWhere should i be looking?</p>\n\n<p>Thanks</p>\n"},{"tags":["python","idioms","python-2.4"],"answer_count":14,"favorite_count":7,"up_vote_count":25,"down_vote_count":0,"view_count":11850,"score":25,"question_id":363944,"title":"Python idiom to return first item or None","body":"<p>I'm sure there's a simpler way of doing this that's just not occurring to me.</p>\n\n<p>I'm calling a bunch of methods that return a list.  The list may be empty.  If the list is non-empty, I want to return the first item; otherwise, I want to return None.  This code works:</p>\n\n<pre><code>list = get_list()\nif len(list) &gt; 0: return list[0]\nreturn None\n</code></pre>\n\n<p>It seems to me that there should be a simple one-line idiom for doing this, but for the life of me I can't think of it.  Is there?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>The reason that I'm looking for a one-line expression here is not that I like incredibly terse code, but because I'm having to write a lot of code like this:</p>\n\n<pre><code>x = get_first_list()\nif x:\n    # do something with x[0]\n    # inevitably forget the [0] part, and have a bug to fix\ny = get_second_list()\nif y:\n    # do something with y[0]\n    # inevitably forget the [0] part AGAIN, and have another bug to fix\n</code></pre>\n\n<p>What I'd like to be doing can certainly be accomplished with a function (and probably will be):</p>\n\n<pre><code>def first_item(list_or_none):\n    if list_or_none: return list_or_none[0]\n\nx = first_item(get_first_list())\nif x:\n    # do something with x\ny = first_item(get_second_list())\nif y:\n    # do something with y\n</code></pre>\n\n<p>I posted the question because I'm frequently surprised by what simple expressions in Python can do, and I thought that writing a function was a silly thing to do if there was a simple expression could do the trick.  But seeing these answers, it seems like a function <em>is</em> the simple solution.</p>\n"},{"tags":["python","html","regex","parsing"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13268365,"title":"Extracting Data from anchor tags using regex in python","body":"<p>I'm trying to extract the hyperlinks from a webpage using <a href=\"http://docs.python.org/2/library/re.html\" rel=\"nofollow\">regex</a> in Python.</p>\n\n<p>suppose my text string is:</p>\n\n<pre><code>text = '&lt;a href=\"/status/ALL\"&gt;ALL&lt;/a&gt;&lt;/td&gt;/n&lt;a href=\"/status/ASSIGN\"&gt;ASSIGN&lt;/a&gt;&lt;/td&gt;'\n</code></pre>\n\n<p>and I want to extract ALL and ASSIGN,\nI'm using this regular expression:</p>\n\n<pre><code>re.findall(r'&lt;a href=.*&gt;(\\w+)&lt;/a&gt;', text, re.DOTALL)\n</code></pre>\n\n<p>this just returns ASSIGN. </p>\n\n<p>Can someone please help me in pointing out the mistake in the regular expression? I'm really new to this topic.</p>\n"},{"tags":["c++","python","performance","list","boost-python"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":49,"score":2,"question_id":12929196,"title":"How to speed up Boost::Python::Extract when passing a list from python to a C++ vector","body":"<p>I'm new to boost.python and have made a simple function for passing a list from python to a C++ vector:</p>\n\n<pre><code>void SetXValues(boost::python::list xl){\n    int n = len((xl));\n    xvals.resize(n);\n    for(unsigned int i=0; i&lt;n; i++){\n    xvals[i] = boost::python::extract&lt;double&gt;((xl)[i]);\n    }\n}\n</code></pre>\n\n<p>xvals is an C++ STL vector. This function works and I can load the python list into C++ but it seems extremely slow. </p>\n\n<p>A small speed test I did was to write a binning algorithm in C++ and in pure Python. The results show that the C++ method is only 5x faster when the time to pass the data from Python is included but of course the binning algorithm alone is considerably faster (74x).</p>\n\n<p>So is there any way to improve the function above to make it more efficient? </p>\n"},{"tags":["python","web-crawler","crawl"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":29,"score":-1,"question_id":13268204,"title":"How to crawl various websites to find specific department using Python?","body":"<p>I have a list of university urls like <code>www.harvard.edu, www.berkeley.edu</code>etc.\nI need to find the cse department urls in the respective websites What i initially set out to do was to crawl through links in url given and by specifying depth , say 3 it will follow links and try to find cse or computer or lists of words in the links scraped on that page  matching links along with their anchor text are returned as results into a csv file.\nif no links containing cse or as such words it should return not found or something like that\nidea is to push the csv file later onto a database. How can I do this?</p>\n"},{"tags":["python","capture","pcap","packet-capture","scapy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13266350,"title":"Scapy PcapReader and packets time","body":"<p>I'm reading a PCAP file using Scapy using a script such as the (semplified) following one:</p>\n\n<pre><code>#! /usr/bin/env python\nfrom scapy.all import *\n# ...\nmyreader = PcapReader(myinputfile)\nfor p in myreader:\n    pkt = p.payload\n    print pkt.time\n</code></pre>\n\n<p>In this case the packets time is not relative to PCAP capture time, but starts from the instant I've launched my script.\nI'd like to start from <code>0.0</code> or to be relative to the PCAP capture.</p>\n\n<p>How can I fix it (possibly without \"manually\" retrieving the first packet time and repeatedly using math to fix the problem)?</p>\n"},{"tags":["python","spellchecking","trie"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13263346,"title":"Trie Backtracking in Recursion","body":"<p>I am building a tree for a spell checker with suggestions. Each node contains a key (a letter) and a value (array of letters down that path).</p>\n\n<p>So assume the following sub-trie in my big trie:</p>\n\n<pre><code>                W\n               / \\\n              a   e\n              |   |\n              k   k\n              |   |\n   is word--&gt; e   e\n                  |\n                 ...\n</code></pre>\n\n<p><em>This is just a subpath of a sub-trie. W is a node and a and e are two nodes in its value array etc...</em></p>\n\n<p>At each node, I check if the next letter in the word is a value of the node. I am trying to support mistyped vowels for now. So 'weke' will yield 'wake' as a suggestion. Here's my <code>searchWord</code> function in my trie:</p>\n\n<pre><code>def searchWord(self, word, path=\"\"):\n\n    if len(word) &gt; 0:\n        key = word[0]\n        word = word[1:]\n\n        if self.values.has_key(key):\n            path = path + key\n            nextNode = self.values[key]\n            return nextNode.searchWord(word, path)\n\n        else:\n             # check here if key is a vowel. If it is, check for other vowel substitutes\n\n    else:\n        if self.isWord:\n            return path # this is the word found\n        else:\n            return None\n</code></pre>\n\n<p>Given 'weke', at the end when word is of length zero and path is 'weke', my code will hit the second big else block. <code>weke</code> is not marked as a word and so it will return with None. This will return out of <code>searchWord</code> with None.</p>\n\n<p>To avoid this, at each stack unwind or recursion backtrack, I need to check if a letter is a vowel and if it is, do the checking again.</p>\n\n<p>I changed the <code>if self.values.has_key(key)</code> loop to the following:</p>\n\n<pre><code> if self.values.has_key(key):\n    path = path + key\n    nextNode = self.values[key]\n    ret = nextNode.searchWord(word, path)\n\n    if ret == None:\n        # check if key == vowel and replace path\n        # return nextNode.searchWord(...\n\n    return ret\n</code></pre>\n\n<p>What am I doing wrong here? What can I do when backtracking to achieve what I'm trying to do?</p>\n"},{"tags":["python","html"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13244378,"title":"Python HTML code syntax error","body":"<p>I am getting the following syntax error when trying to add a hyperlink,I looked at the HTML code for href,HTML code seems right but python is throwing a syntax error..can anyone help?</p>\n\n<p>Python code</p>\n\n<pre><code>    msg_body=(\"&lt;HTML&gt;&lt;head&gt;&lt;/head&gt;\"\n          \"&lt;body&gt;Test\"\n          \"&lt;br&gt;Hi All, &lt;br&gt;\"\n          \"&lt;b&gt;Wiki @&lt;a href=\"%s\"&gt;%s&lt;/a&gt; (listed @ go\\link) &lt;br&gt;&lt;br&gt;\"\n          \"&lt;b&gt;Release notes:&lt;/b&gt; %s  &lt;br&gt;&lt;br&gt;\" \n          \"&lt;b&gt;Host/Riva Build Combo:&lt;/b&gt;&lt;br&gt;%s&lt;br&gt;&lt;br&gt;\" \n          \"&lt;b&gt;Loading instructions:&lt;/b&gt;&lt;br&gt;%s&lt;br&gt;&lt;br&gt;\"\n          \"&lt;b&gt;CR fixes:&lt;/b&gt;&lt;br&gt;%s&lt;br&gt;&lt;br&gt;\"\n          \"Thanks,&lt;br&gt;\"\n          \"B team\"\n          \"&lt;/body&gt;&lt;/html&gt;\"\n          ) % (wikiURL,Releasenotes,table,Load_ins,crInfo)\n</code></pre>\n\n<p>Error:-</p>\n\n<pre><code>    \"&lt;b&gt;Wiki @&lt;a href=\"%s\"&gt;%s&lt;/a&gt; (listed @ go\\wbit) &lt;br&gt;&lt;br&gt;\"                                                      ^\n     SyntaxError: invalid syntax\n</code></pre>\n"},{"tags":["python","linux","bash"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13267948,"title":"Linux server list users who can login","body":"<p>I would like either a one liner shell command or a short bash/python script that will list all the users on a Linux server that can login to that machine. so users like www-data and mail would be excluded of course but root would be part of the list.</p>\n\n<p>This code for example works. I <a href=\"https://gist.github.com/1989361\" rel=\"nofollow\">found it here</a>. But I'm looking for something simpler cleaner.</p>\n\n<pre><code>awk -F: '$2 != \"*\" &amp;&amp; $2 !~ /^!/ { print $1, \" can log in\" }' /etc/shadow\n</code></pre>\n"},{"tags":["c++","python","boost-python"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13267912,"title":"From python converter for builtin types","body":"<p>Where does boost python register from python converters for builtin types such as from <code>PyLong_Type</code> to <code>double</code>?</p>\n\n<p>I want to define a converter that can take a <code>numpy.float128</code> from python and returns a <code>long double</code> for functions in C++. I already did it the other way round, the to_python converter. For that I tweaked <code>builtin_converters.hpp</code> but I didn't find how boost python does the from python conversion.</p>\n"},{"tags":["python","list","testing","replace","counter"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13266493,"title":"Return the number of words over min length and Replace ones that arent with word + spaces","body":"<p>For any name whose length is less than the min_length, replace that item of the list with a new string containing the original name with the space(s) added to the right-hand side to achieve the minimum length<br>\nexample: min_length = 5 /// 'dog' after the change = 'dog  '<br>\nand also Return the amount of names that were originally over the min_length in the list</p>\n\n<pre><code>def pad_names(list_of_names, min_length):  \n    '''(list of str, int) -&gt; int  \n    Return the number of names that are longer than the minimum length.  \n    &gt;&gt;&gt; pad_names(list_of_names, 5)  \n        2  \n    '''  \n    new_list = []  \n    counter = 0  \n    for word in list_of_names:      \n        if len(word) &gt; min_length:  \n            counter = counter + 1  \n\n    for word in list_of_names:  \n        if len(word) &lt; min_length:  \n            new_list.append(word.ljust(min_length))  \n        else:  \n            new_list.append(word)  \n     return(counter)  \n</code></pre>\n\n<p>I currently am getting 5 errors on this function:  </p>\n\n<p>all errors are #incorrect return value  </p>\n\n<p>test_02: pad_names_one_name_much_padding_changes_list<br>\nCause: The list is not changed correctly for the case of 1 name needing padding  </p>\n\n<p>test_04: pad_names_one_name_needs_one_pad_changes_list<br>\nCause: one name needs one pad changes list    </p>\n\n<p>test_10: pad_names_all_padded_by_3_changes_list<br>\nCause:all padded by 3 changes list   </p>\n\n<p>test_12: pad_names_all_padded_different_amounts_changes_list<br>\nCause: all padded different amounts changes list   </p>\n\n<p>test_20: pad_names_one_empty_name_list_changed<br>\nCause: one empty name list changed  </p>\n\n<p>This function does not need to be efficient just needs to pass those tests without creating more problems </p>\n"},{"tags":["python","while-loop","raw-input"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":69,"score":3,"question_id":13267107,"title":"Why while loop is sticking at raw_input? (python)","body":"<p>In the following code i am trying to make a \"more\" command (unix) using python script by reading the file into a list and printing 10 lines at a time and then asking user do you want to print next 10 lines (Print More..). \nProblem is that raw_input is asking again and again input if i give 'y' or 'Y' as input and do not continue with the while loop and if i give any other input the while loop brakes.\nMy code may not be best as am learning python.</p>\n\n<pre><code>import sys\nimport string\nlines = open('/Users/abc/testfile.txt').readlines()\nchunk = 10\nstart = 0\n\nwhile 1:\n    block = lines[start:chunk]\n    for i in block:\n        print i\n    if raw_input('Print More..') not in ['y', 'Y']:\n        break\n    start = start + chunk\n</code></pre>\n\n<p>Output i am getting for this code is:-</p>\n\n<pre><code>--\n10 lines from file\n\nPrint More..y\nPrint More..y\nPrint More..y\nPrint More..a\n</code></pre>\n"},{"tags":["python","sqlite","tuples"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13267922,"title":"Why can't a string from a tuple not be inserted as the fieldname in the table update command in SQLlite3 in python?","body":"<p>when i try to use a stringvalue from a tuple as the columnname in my executemany() command, like this:</p>\n\n<pre><code>tup = ('field', 'value',)\n\ncursor.executemany('UPDATE table SET ?=?', tup)\n</code></pre>\n\n<p>i get a SQlite.operationalerror:</p>\n\n<pre><code>   c.executemany('''UPDATE table SET ?=?''', tup)\nsqlite3.OperationalError: near \"?\": syntax error\n</code></pre>\n\n<p>when can't the tuple value not be inserted befor the '=' and only after??</p>\n"},{"tags":["python","unicode","odbc"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":95,"score":3,"question_id":11671653,"title":"pyodbc returns unicode symbols replaced by latin","body":"<p>When connecting to Transbase source using python and pyodbc\n<em>(connection string is correct and work in other application)</em>,\nI saw that symbols</p>\n\n<p><strong>ó, ű, é, á converts to o, u, e, a</strong></p>\n\n<p>But if I connect to same source from MS Access via ODBC these symbols shown correctly.\nAnd if connect from pyodbc to MS Access (link with Transbase source in mdb-file) symbols shown correctly.</p>\n\n<blockquote>\n  <p>Provider=Microsoft.Jet.OLEDB.4.0;Data Source=c:\\1.mdb;Persist Security\n  Info=False</p>\n</blockquote>\n\n<p>CHARSET=uft8 does not help</p>\n\n<p>How I can change connection string or other parameters to get this symbols shown correctly?</p>\n"},{"tags":["python","xcode","osx","path"],"answer_count":6,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":6707,"score":3,"question_id":364655,"title":"How do I use my standard python path when running python scripts from xcode macros","body":"<p>I'm trying to run Python scripts using Xcode's User Scripts menu.</p>\n\n<p>The issue I'm having is that my usual os.sys.path (taken from ~/.profile) does not seem to be imported when running scripts from XCode the way it is when running them at the Terminal (or with IPython). All I get is the default path, which means I can't do things like</p>\n\n<pre><code>#!/usr/bin/python\nimport myScript\n\nmyScript.foo()\n</code></pre>\n\n<p>Where myScript is a module in a folder I've added to my path.</p>\n\n<p>I can append a specific path to os.sys.path manually easily enough, but I have to do it in every single script for every single path I want to use modules from</p>\n\n<p>Is there a way to set this up so it uses the same path I use everywhere else?</p>\n\n<p>EDIT: After looking into things a bit more, it seems like scripts executed from Xcode use a completely different PATH than normal. The path I get by running a script in Xcode is:</p>\n\n<pre><code>PATH=/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin\n</code></pre>\n\n<p>and I'm sure my regular path doesn't have /Developer/usr/bin in it. Does anybody have any idea where this path is coming from?</p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":46,"score":-3,"question_id":13266457,"title":"Python module, class and object load time and memory usage","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/13202198/python-doesnt-allocate-new-space-for-objects-instantiated-outside-the-construct\">Python doesn’t allocate new space for objects instantiated outside the constructor of a class— expected behavior?</a>  </p>\n</blockquote>\n\n\n\n<p>I am planning to develop two class which is almost similar and thinking (in context of use such classes to build complex architecture):</p>\n\n<ol>\n<li>Which class be loaded faster during module load.</li>\n<li>Which class will take less memory after loading.</li>\n<li>Not care about initialization speed - memory and loading time is more important.</li>\n</ol>\n\n<p>First class:</p>\n\n<pre><code>class ClassWithAttr(object):\n  a = range(100)\n  b = range(10)\n</code></pre>\n\n<p>Second class:</p>\n\n<pre><code>class ClassWithoutAttr(object):\n  def __init__(self):\n    a = range(100)\n    b = range(10)\n</code></pre>\n\n<p>Share some of your experiences to help others.</p>\n"},{"tags":["python","sqlite","sqlite3","tuples"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":12,"score":1,"question_id":13267553,"title":"SQLite operational error is raised when trying to use cursor.executemany(string, tuple) in Python","body":"<p>this method should update a table, but i get a operational sql error at the last line:</p>\n\n<pre><code>def update_lookup(table, lookup_table, anon_table, fieldname, anon_field_prefix):\n\n    c.execute('SELECT DISTINCT ' + fieldname + ' FROM ' + table)\n    result = c.fetchall() #gives a list of tuples\n\n    #get a list of random integers in range, as many as there are unique mssi's\n    rnds = random.sample(xrange(10000,80000),len(result))\n\n    #for every name insert the value in the vesselname lookup\n    lst = []\n    lst_rev = []\n    for i,row in enumerate(result):\n        field_value_anon = anon_field_prefix + str(rnds[i]) #create a random mssi number\n        field_value = row[0]\n        lst_rev.append((anon_table, fieldname , field_value_anon, fieldname, field_value)) #needed later on\n        lst.append((field_value, field_value_anon))\n\n\n    c.executemany('INSERT INTO '+ lookup_table +' VALUES (null, ?, ?)', lst)\n\n    #update the anon table col:\n\n    c.executemany('UPDATE ? SET ?=? WHERE ?=?', lst_rev) //error is trhown\n</code></pre>\n\n<p>stacktrace:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\jgoddijn\\workspace\\DataAnonDMVV\\src\\Main.py\", line 119, in &lt;module&gt;\n    update_lookup('AIS', 'MMSI_lookup', 'AIS_anoniem', 'dad_vesselname', 'AIS_schip')\n  File \"C:\\Users\\jgoddijn\\workspace\\DataAnonDMVV\\src\\Main.py\", line 35, in update_lookup\n    c.executemany('UPDATE ? SET ?=? WHERE ?=?', lst_rev)\nsqlite3.OperationalError: near \"?\": syntax error\n</code></pre>\n\n<p>I'm doing something wrong with the tuple insertion but i cannot figure what!</p>\n\n<p>thanks a bunch!</p>\n"},{"tags":["python","dll"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":9,"score":1,"question_id":13267808,"title":"Accessing Refprop with python: SETPATHdll error","body":"<p>I try to access the NIST refprop database via python. for this i downloaded the refprop python module from <a href=\"http://www.boulder.nist.gov/div838/theory/refprop/Frequently_asked_questions.htm\" rel=\"nofollow\">http://www.boulder.nist.gov/div838/theory/refprop/Frequently_asked_questions.htm</a></p>\n\n<p>When trying to import the module, I recieve the following error:</p>\n\n<pre><code>&gt;&gt;&gt; import REFPROP\nTraceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nFile \"C:\\Python33\\lib\\REFPROP.py\", line 6525, in &lt;module&gt;\n   setpath()\nFile \"C:\\Python33\\lib\\REFPROP.py\", line 381, in setpath\n   _setpath(path)\nFile \"C:\\Python33\\lib\\REFPROP.py\", line 421, in _setpath\n   _rp.SETPATHdll(ctypes.byref(_hpth), ctypes.c_long(255))\nFile \"C:\\Python33\\lib\\ctypes\\__init__.py\", line 366, in __getattr__\n   func = self.__getitem__(name)\nFile \"C:\\Python33\\lib\\ctypes\\__init__.py\", line 371, in __getitem__\n   func = self._FuncPtr((name_or_ordinal, self))\nAttributeError: function 'SETPATHdll' not found \n&gt;&gt;&gt;\n</code></pre>\n\n<p>I found out that this SETPATHdll function is not contained in the refprop.dll file. Still, the module is written for this file. Can anybody help?\nThank you .</p>\n"},{"tags":["python","math","python-3.x","operation"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":73,"score":1,"question_id":13266732,"title":"Python odd operation?","body":"<p>Can somebody please explain me why the code below behaves like it does? (It's Python in command line on Windows7 x64)</p>\n\n<pre><code>&gt;&gt;&gt;2.22 + 0.22\n2.44000000000000004\n&gt;&gt;&gt;(222+22)/100\n2.44\n</code></pre>\n"},{"tags":["python","emacs","editing"],"answer_count":5,"favorite_count":15,"up_vote_count":22,"down_vote_count":0,"view_count":4677,"score":22,"question_id":362522,"title":"Switching from python-mode.el to python.el","body":"<p>I recently tried switching from using <code>python-mode.el</code> to <code>python.el</code> for editing python files in emacs, found the experience a little alien and unproductive, and scurried back.  I've been using <code>python-mode.el</code> for something like ten years, so perhaps I'm a little set in my ways.  I'd be interested in hearing from anyone who's carefully evaluated the two modes, in particular of the pros and cons they perceive of each and how their work generally interacts with the features specific to <code>python.el</code>.</p>\n\n<p>The two major issues for me with <code>python.el</code> were </p>\n\n<ol>\n<li><p>Each buffer visiting a python file gets its own inferior interactive python shell.  I am used to doing development in one interactive shell and sharing data between python files.  (Might seem like bad practice from a software-engineering perspective, but I'm usually working with huge datasets which take a while to load into memory.)</p></li>\n<li><p>The skeleton-mode support in python.el, which seemed absolutely gratuitous (python's syntax makes such automation unnecessary) and badly designed (for instance, it has no knowledge of \"<code>for</code>\" loop generator expressions or \"<code>&lt;expr 1&gt; if &lt;cond&gt; else &lt;expr 2&gt;</code>\" expressions, so you have to go back and remove the colons it helpfully inserts after insisting that you enter the expression clauses in the minibuffer.)  I couldn't figure out how to turn it off.  There was a <code>python.el</code> variable which claimed to control this, but it didn't seem to work.  It could be that the version of <code>python.el</code> I was using was broken (it came from the debian emacs-snapshot package) so if anyone knows of an up-to-date version of it, I'd like to hear about it.  (I had the same problem with the version in CVS emacs as of approximately two weeks ago.)</p></li>\n</ol>\n"},{"tags":["python","django","file-upload","submit"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13266921,"title":"django, normal post form is not sending file data to server,","body":"<p>I'm wondering why this is happening: </p>\n\n<p>I'm sending file data with form in POST, but all the time it says: </p>\n\n<pre><code>Key 'file' not found in &lt;QueryDict:\n{\n u'datum': [u'aaa'],\n u'csrfmiddlewaretoken': [u'USAbRrgU92yj7KFpZHuxf9bWufgnwC4N'], \n u'anzeige': [u' aaaa'], \n u'titel': [u' aaa']\n}\n</code></pre>\n\n<p>This is my html: </p>\n\n<pre><code>&lt;form id=\"myform\" action=\"/anzeige_save/\" method=\"post\" enctype=\"multipart/form-data\"&gt;    \n{% csrf_token %} \n&lt;textarea style=\"width: 450px\" id=\"titel\"  name=\"titel\"&gt; &lt;/textarea&gt;\n&lt;textarea name=\"anzeige\" id=\"anzeige\" \n    style=\"height: 180px; width: 450px\"&gt; &lt;/textarea&gt;  \n&lt;input type=\"text\" id=\"datum\" name=\"datum\" &gt;\n&lt;input type=\"file\" id=\"file\" name=\"file\" size=\"40\" maxlength=\"100000\"&gt;\n&lt;input type=\"button\" value=\"speichern\" \n    onclick=\"javascript:submitform()\" /&gt;\n&lt;/form&gt;\n\n&lt;script&gt;\n  function submitform(){\n  document.forms[\"myform\"].submit();\n  }\n&lt;/script&gt;\n</code></pre>\n\n<p>and part my view is this: </p>\n\n<pre><code>anzeige=Anzeige(titel=request.POST['titel'], \n                anzeige=end_anzeige, \n                date=datetime.datetime.now(), \n                datum=request.POST['datum'],\n                file=request.FILES['file'])\nanzeige.save()\n</code></pre>\n\n<p>I'm actually submitting correctly, the form should also submit the file in QueryDict like other queries. Can someone help me to figure out what I'm missing here?</p>\n\n<p>Thanks </p>\n"},{"tags":["python","gevent"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":439,"score":3,"question_id":9762420,"title":"How to tail a file with gevent","body":"<p>I have a problem constructing gevent tail function. In general, the code works when I comment gevent.sleep in loop, but then CPU utilization is 100%. When I leave gevent.sleep program works but nothing is happening. \nGevent version is 1.0b1.</p>\n\n<pre><code>import os\nimport gevent\n\ndef follow(filename):\n    fd = os.open(filename, os.O_RDONLY|os.O_NONBLOCK)\n    os.lseek(fd, 0, os.SEEK_END)\n    hub = gevent.get_hub()\n    watcher = hub.loop.io(fd, 1)\n    while True:\n        hub.wait(watcher)\n        lines = os.read(fd, 4096).splitlines()\n        if not lines:\n            #gevent.sleep(.1)\n            continue\n        else:\n            for line in lines:\n                print \"%s:%s\" % (filename, line)\n\n    os.close(fd)\n\nif __name__ == '__main__':\n    job1 = gevent.spawn(follow, '/var/log/syslog')\n    job2 = gevent.spawn(follow, '/var/log/messages')\n\n    gevent.joinall([job1, job2])\n</code></pre>\n"},{"tags":["python","csv","sqlalchemy","elixir"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1031,"score":1,"question_id":2952366,"title":"dump csv from sqlalchemy","body":"<p>For some reason, I want to dump a table from a database (sqlite3) in the form of a csv file. I'm using a python script with elixir (based on sqlalchemy) to modify the database. I was wondering if there is any way to dump the table I use to csv.</p>\n\n<p>I've seen sqlalchemy <a href=\"http://www.sqlalchemy.org/docs/reference/ext/serializer.html\" rel=\"nofollow\">serializer</a> but it doesn't seem to be what I want. Am I doing it wrong? Should I call the <a href=\"http://docs.python.org/library/sqlite3\" rel=\"nofollow\">sqlite3 python module</a> after closing my sqlalchemy session to dump to a file instead? Or should I use something homemade?</p>\n"},{"tags":["python","performance","timer","pypy"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13267316,"title":"Python: process average timing, first one/two are much slower","body":"<p>I'm writing some program with sorting algorithms comparsion using Python. I want to measure average sorting time. I have a problem with first measurement.</p>\n\n<p>This:</p>\n\n<pre><code>for i in xrange(self.repeats):\n    # random list generator\n    data_orig = [random.randint(0, self.size - 1) for x in xrange(self.size)]\n\n    sorter = self.class_()\n    data = data_orig[:]\n    debug(\"%s for data size: %d, try #%d\" % (sorter.__class__.__name__, self.size, i+1))\n    t1 = time.clock()\n    sorter.sort(data)\n    t2 = time.clock()\n    debug(\"Took: %0.4fms, shifts: %d, comparisons: %d\" % ((t2-t1)*1000.0, sorter.shifts, sorter.comps))\n</code></pre>\n\n<p><code>class_</code> is a reference to InsertionSort class.\nFor size = 1000 and 5 repeats I get following results:</p>\n\n<pre><code>InsertionSort for data size: 1000, try #1\nTook: 39.5341ms, shifts: 254340, comparisons: 255331\nInsertionSort for data size: 1000, try #2\nTook: 6.0765ms, shifts: 250778, comparisons: 251772\nInsertionSort for data size: 1000, try #3\nTook: 6.9946ms, shifts: 254189, comparisons: 255180\nInsertionSort for data size: 1000, try #4\nTook: 6.7421ms, shifts: 252162, comparisons: 253156\nInsertionSort for data size: 1000, try #5\nTook: 5.9584ms, shifts: 241412, comparisons: 242404\n</code></pre>\n\n<p>For every sorting algorithm and every time I run program first result is bigger than the others. I run it with PyPy (with Python it seems OK, but it's MUCH slower).</p>\n\n<p>I know I can simply ommit first results but this solution doesn't satisfies me :-)</p>\n\n<p>Any ideas?</p>\n"},{"tags":["python","control-flow"],"answer_count":13,"favorite_count":7,"up_vote_count":44,"down_vote_count":0,"view_count":27556,"score":44,"question_id":189645,"title":"How to break out of multiple loops in Python?","body":"<p>Given the following code (that doesn't work):</p>\n\n<pre><code>while True:\n    #snip: print out current state\n    while True:\n        ok = get_input(\"Is this ok? (y/n)\")\n        if ok == \"y\" or ok == \"Y\": break 2 #this doesn't work :(\n        if ok == \"n\" or ok == \"N\": break\n    #do more processing with menus and stuff\n</code></pre>\n\n<p>Is there a way to make this work? Or do I have do one check to break out of the input loop, then another, more limited, check in the outside loop to break out all together if the user is satisfied?</p>\n\n<p><strong>Edit-FYI:</strong> get_input is a short function I wrote that supports showing a prompt and default values and all that fanciness and returns <code>stdin.readline().strip()</code></p>\n"},{"tags":["python","py.test"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13259881,"title":"Package-scoped fixtures in pytest 2.3","body":"<p>In the latest release of pytest, it is easy to create fixtures that are function, class, module or session-scoped like this:</p>\n\n<pre><code>@pytest.fixture(scope=\"module\") \ndef db():\n     return DB()\n</code></pre>\n\n<p>That creates a fixture that is going to be called only once for each python module in which it is used.</p>\n\n<p>But what about fixtures that need to be called once per python package ? \n(With nose, it can be done using setUp/tearDown methods in the <code>__init__.py</code> of the package)</p>\n"},{"tags":["python","python-2.7","openerp","accounting"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":41,"score":3,"question_id":13230195,"title":"How to convert in OpenERP from one chart of account to another?","body":"<p>I have installed <em>chart of accounts A</em> for <em>company1</em>. This chart was used couple months for accounting. How can I convert into <em>chart of accounts B</em> and keep old data for accounts (debit, credit, etc.)? In other words, is possible migrate data from one chart of accounts to another? Solution could be programmatically or trough web client interface (not important). Virtual charts of accounts can't be used. <em>Chart of accounts B</em> must became main chart with old data. </p>\n\n<p>Every advice will help me a lot. Thanks</p>\n"},{"tags":["java","python","linux","portalocker"],"answer_count":1,"favorite_count":3,"up_vote_count":3,"down_vote_count":0,"view_count":54,"score":3,"question_id":13247787,"title":"Java and python processes can exclusive lock the same file on linux","body":"<p>I have a java app and a python launcher for it. The java app locks a file to avoid multiple startups using this code:</p>\n\n<pre><code>java.nio.channels.FileLock lock = lockWrapper.getChannel().tryLock();\nif (lock == null) {\n     logger.info(\"Anotheris already running\");\n}\nlock.release();\nstaticLock = lockWrapper.getChannel().lock();\n</code></pre>\n\n<p>The python launcher tries to lock on the same file with fcntl and it can. Two java processes can't do this and neither two python processes can lock exclusively on the same file. But a java and a python can, in any directions.\nI'm on a xubuntu with openjdk 6 and python2.7 I use portalocker for python.<br/></p>\n\n<pre><code>    lockfile =open(lockfilename, 'w+')\n    portalocker.lock(lockfile, portalocker.LOCK_EX| portalocker.LOCK_NB)\n</code></pre>\n\n<p>Also work fine on win7.</p>\n"},{"tags":["python","software-engineering"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":186,"score":4,"question_id":9187921,"title":"Multiple inheritance in python vs composition","body":"<p>I have a solid understanding of OOP and its idioms in Java. </p>\n\n<p>Now I am coding in python, and I am in a situation where having multiple inheritance may be useful, however (and this may be due to years of java code), i am reluctant to do it and I am considering using composition instead of inheritance in order to avoid potential conflicts with potential equal method names.</p>\n\n<p>Question is, am i being to strict or too java focused regarding this thing. Or using multiple inheritance in python is not only possible but also encouraged.</p>\n\n<p>Thanks for your time :)</p>\n"},{"tags":["python","mkdir"],"answer_count":8,"favorite_count":21,"up_vote_count":122,"down_vote_count":0,"view_count":36132,"score":122,"question_id":600268,"title":"mkdir -p functionality in python","body":"<p>Is there a way to get functionality similar to <code>mkdir -p</code> on the shell... from within python.  I am looking for a solution other than a system call.  I am sure the code is less than 20 lines... really I am wondering if someone has already written it?</p>\n"},{"tags":["python","linux"],"answer_count":2,"favorite_count":3,"up_vote_count":13,"down_vote_count":0,"view_count":1270,"score":13,"question_id":2255444,"title":"changing the process name of a python script","body":"<p>Is there a way to change the name of a process running a python script on Linux?</p>\n\n<p>When I do a <code>ps</code>, all I get are \"python\" process names.</p>\n"},{"tags":["python","unit-testing","nose"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":13265532,"title":"How to skip tests containing certain text in their docstring?","body":"<p>I would like to store hints inside each test method's docstring, so the testloader can include or exclude the test based on those hints. Something like this:</p>\n\n<pre><code>def test_login_with_valid_credentials(self):\n    '''#functional #security #nondestructive'''\n    # code goes here\n</code></pre>\n\n<p>Then the testloader would discover all tests containing the substring '#functional' or whatever.</p>\n\n<p>I'm trying to avoid using decorators for this purpose, because I think using docstrings would be more flexible. (Maybe I'm wrong.)</p>\n\n<p>Being new to nose, I would appreciate any help. Thanks!</p>\n"},{"tags":["python","client"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13266342,"title":"Python game over client server","body":"<p>Below is the Python code for a simple game i had to create now i am having difficulty seperating the code to play the game over a client and server using sockets. any help would be appreciated</p>\n\n<pre><code>import random\nrannum = random.randrange(0,10,1)\nprint rannum\ncounter = 0\na=0\n\nwhile(a==0):\n    guess = int(raw_input(\"What is your guess?: \"))\n    counter = counter + 1\n\n    diff = abs(guess - rannum)\n    if(diff &gt;5):\n        print \"Way Off!\"\n    elif(diff &gt;2):\n        print \"Close!\"\n    elif (diff&gt;1):\n        print \"Closer!\"\n    elif(diff &gt;0):\n        print \"Even Closer!\"\n\n    elif (diff==0):\n        print \"Correct\"\n        name = str(raw_input(\"What is your name?: \"))\n        print name + \" Your score is: \"\n        print counter\n        f = open('high_scores.txt', 'a')\n        score = str(counter)\n        f.write(name + \" \" + score + \"\\n\")\n        f.close()\n        break\n</code></pre>\n"},{"tags":["python","dump"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13266480,"title":"Running Salome script without graphics","body":"<p>I exported a script from Salome (dump), and I want to run it in python (I'm doing some geometric operation and I don't need any graphics). So I removed all the graphic command, but when I try to launch my python file, python cannot found the salome libraries.</p>\n\n<p>I tried to export the salome path ('install_path'/appli_V6_5_0p1/bin/salome/) in PYTHONPATH and LD_LIBRARY_PATH but it still doesn't work.</p>\n\n<p>I also would like to know if it's possible to use only the geompy library without salome, and if it's possible, how can I install only the geompy library? ( I need to launch some geompy script on a UAV with only 8gb of memory, so the less thing I install, the better)</p>\n"},{"tags":["python","code-analysis","pydev"],"answer_count":7,"favorite_count":14,"up_vote_count":43,"down_vote_count":0,"view_count":17666,"score":43,"question_id":2112715,"title":"How do I fix PyDev \"Undefined variable from import\" errors?","body":"<p>I've got a Python project using PyDev in Eclipse, and PyDev keeps generating false errors for my code.  I have a module <code>settings</code> that defines a <code>settings</code> object.  I import that in module <code>b</code> and assign an attribute with:</p>\n\n<pre><code>from settings import settings\nsettings.main = object()\n</code></pre>\n\n<p>In some of my code--but not all of it, statements like:</p>\n\n<pre><code>from settings import settings\nprint settings.main \n</code></pre>\n\n<p>... generate \"Undefined variable from import: main\" messages in the Eclipse code error pane, even though the code runs without a problem.  How can I correct these?</p>\n"},{"tags":["python","string"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13261109,"title":"Python - string of binary escape sequences as literal","body":"<p>I need to print out a string of binary escape sequences, e.g. <code>\\x05\\x03\\x87</code>, exactly as they appear. When I try to print them, Python returns a string of weird non-ASCII characters. How can I print them as a string literal?</p>\n"},{"tags":["php","python","json","post","http-post"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":41,"score":1,"question_id":13265726,"title":"Pass data Python to PHP via JSON","body":"<p>the scope of my project is to pass certain values from a python script to a remote php script.</p>\n\n<p>i've a python script that generate an associatve array. For example (already JSON encoded):</p>\n\n<pre><code>{\"FRONT\": \"19.50\", \"RACK\": \"17.63\", \"REAR\": \"21.06\", \"ROOM\": \"15.6\"}\n</code></pre>\n\n<p>I need to pass this associative array to a remote PHP script i followed this tutorial:\n<a href=\"http://nonstopblah.wordpress.com/2010/07/13/python-to-php-via-json/\" rel=\"nofollow\">http://nonstopblah.wordpress.com/2010/07/13/python-to-php-via-json/</a></p>\n\n<p>I get 200 for HTTP Response but in the php script the POST variable seems to be empty</p>\n\n<p>Here my code:</p>\n\n<pre><code>bulkData = json.dumps(temp, ensure_ascii = 'False')\n# ensure_ascii is false as data is in unicode and not ascii encoding , use this if data is in any other encoding\nprint bulkData\n\nprint '\\nHTTP Response'\n\nheaders = { \"charset\":\"utf-8\",\n\"Accept\": \"text/plain\"}\nconn = httplib.HTTPConnection(report_host)\npostData = urllib.urlencode({'results':bulkData})\nconn.request(\"POST\", report_path, postData,headers)\nresponse = conn.getresponse()\ntext = response.read()\nprint \"Response status: \",response.status,\"\\n\",text\nconn.close()\n</code></pre>\n\n<p>this is the PHP script:</p>\n\n<pre><code>if( isset($_POST['results']) )\n{\n    $data = json_decode($_POST['results']);\n\n    print_r($data);\n}\nelse\n{\n    echo 'Nothing to listen.';\n    print_r($_POST);\n}\n</code></pre>\n\n<p>and this is the output of my python script (with the remote response):</p>\n\n<pre><code>{\"FRONT\": \"20.44\", \"RACK\": \"18.88\", \"REAR\": \"21.25\", \"ROOM\": \"17.7\"}\n\nHTTP Response\nResponse status:  200 \nNothing to listen.Array\n(\n)\n</code></pre>\n\n<p>is there a smarter way to do it? What am i missing here?</p>\n\n<p>Thank you in advance for your kind answers.</p>\n"},{"tags":["python","csv","iterator"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13265812,"title":"CSV manipulaions with python","body":"<p>For my purposes i have to know the number of lines in the (CSV) file before actually working with rows. I have googled and found that documentation says that i should create an iterator (CSV.reader) for two times (first one for counting and the second for working with rows). Is this the only way or maybe there is some tricky method to do a trick?</p>\n\n<p>Thanks for your answers.</p>\n"},{"tags":["python","django","django-templates","django-views"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":28,"score":1,"question_id":13264534,"title":"separation in search result","body":"<p>I'm new in django and python\nI have view function which retrieve some data from database and show them on a page.\nbut there is a problem all the data are displayed on one page however i need a separation, It must be displayed 6 data on each page and if the number of data are more than 6 user can read them on the next page. i have no idiea how to do this</p>\n\n<h1>my view is :</h1>\n\n<pre><code>   def search1(request):\n        if request.method == 'POST':\n            form = SearchForm(request.POST)\n            if form.is_valid():\n                cd = form.cleaned_data\n                books=data(cd)\n                return render_to_response('result.html', {'books': books, 'form': form})\n        else:\n            form = SearchForm()\n        return render_to_response('form.html', {'form': form})\n</code></pre>\n\n<h1>my template:</h1>\n\n<pre><code>    {% if books %}\n    &lt;p&gt;Found {{ books|length }} book{{ books|pluralize }}.&lt;/p&gt;\n    &lt;ul dir=rtl&gt;\n        {% for book in books %}\n        &lt;p&gt;title:  {{ book.title }}&lt;/p&gt;\n        &lt;p&gt;price:  {{ book.price }}&lt;/p&gt;\n        {% endfor %}\n    &lt;/ul&gt;\n{% else %}\n    &lt;p&gt;No books matched your search criteria.&lt;/p&gt;\n{% endif %}\n</code></pre>\n"},{"tags":["python","ssh"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":44,"score":2,"question_id":13266072,"title":"python: how to run scripts over ssh remotely","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/536370/execute-arbitrary-python-code-remotely-can-it-be-done\">Execute arbitrary python code remotely - can it be done?</a>  </p>\n</blockquote>\n\n\n\n<p>I wrote a memory usage check function and it runs fine on one server (say 10.100.110.10).<br>\nBut I need to run the same script remotely on 10.100.110.11 from 10.100.110.10. I can ssh to 10.100.110.11 from 10.100.110.10. Is there any way to implement that using python built in modules?</p>\n\n<p>I can't use any new modules like Paramico and Unix command   </p>\n\n<pre><code>ssh -n user@10.100.110.11 \"df -m\"\n</code></pre>\n\n<p>works fine.\nIf it is not possible, how can I ssh to 10.100.110.11 using a built in Python module?</p>\n"},{"tags":["python","google-app-engine"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":6,"view_count":26,"score":-6,"question_id":13266191,"title":"Google app engine - App like Google Group","body":"<p>I want a similar simple google group with google app engine in python</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13265963,"title":"No module named registration.backends.default.urls","body":"<p>This topic is definitely related to <a href=\"http://stackoverflow.com/questions/4259497/no-module-named-backends-default-urls\">this topic</a>, though, according to the approved answer and related comment the fix was to change <code>registration.backends.default.urls</code> to <code>registration.urls</code>. When I try the same the error is the same but, with <code>registration.urls</code> instead of <code>registration.backends.default.urls</code>. </p>\n\n<p>P.S <code>django.contrib.auth</code> is added to the <code>INSTALLED_APPS</code></p>\n\n<pre><code>Environment:\n\n\n\nRequest Method: GET\nRequest URL: http://127.0.0.1:8000/accounts/register/\n\nDjango Version: 1.4.2\nPython Version: 2.7.3\nInstalled Applications:\n('django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.sites',\n 'django.contrib.messages',\n 'django.contrib.staticfiles',\n 'oauth2app',\n 'django.contrib.admin',\n 'uni_form',\n 'server')\nInstalled Middleware:\n('django.middleware.common.CommonMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware')\n\n\nTraceback:\nFile \"C:\\Python27\\lib\\site-packages\\django-1.4.2-py2.7.egg\\django\\core\\handlers\\base.py\" in get_response\n  101.                             request.path_info)\nFile \"C:\\Python27\\lib\\site-packages\\django-1.4.2-py2.7.egg\\django\\core\\urlresolvers.py\" in resolve\n  298.             for pattern in self.url_patterns:\nFile \"C:\\Python27\\lib\\site-packages\\django-1.4.2-py2.7.egg\\django\\core\\urlresolvers.py\" in url_patterns\n  328.         patterns = getattr(self.urlconf_module, \"urlpatterns\", self.urlconf_module)\nFile \"C:\\Python27\\lib\\site-packages\\django-1.4.2-py2.7.egg\\django\\core\\urlresolvers.py\" in urlconf_module\n  323.             self._urlconf_module = import_module(self.urlconf_name)\nFile \"C:\\Python27\\lib\\site-packages\\django-1.4.2-py2.7.egg\\django\\utils\\importlib.py\" in import_module\n  35.     __import__(name)\nFile \"C:\\Users\\Roel\\workspace\\ts-server\\tsserver\\tsserver\\urls.py\" in &lt;module&gt;\n  19.     (r'^accounts/', include('registration.backends.default.urls')),\nFile \"C:\\Python27\\lib\\site-packages\\django-1.4.2-py2.7.egg\\django\\conf\\urls\\__init__.py\" in include\n  24.         urlconf_module = import_module(urlconf_module)\nFile \"C:\\Python27\\lib\\site-packages\\django-1.4.2-py2.7.egg\\django\\utils\\importlib.py\" in import_module\n  35.     __import__(name)\n\nException Type: ImportError at /accounts/register/\nException Value: No module named registration.backends.default.urls\n</code></pre>\n"},{"tags":["python","multiprocessing","pool"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":31,"score":3,"question_id":13264435,"title":"Do multiprocessing pools give every process the same number of tasks, or are they assigned as available?","body":"<p>When you <code>map</code> an iterable to a <code>multiprocessing.Pool</code> are the iterations divided into a queue for each process in the pool at the start, or is there a common queue from which a task is taken when a process comes free?</p>\n\n<pre><code>    def generate_stuff():\n        for foo in range(100):\n             yield foo\n\n    def process(moo):\n        print moo\n\n    pool = multiprocessing.Pool()\n    pool.map(func=process, iterable=generate_stuff())\n    pool.close()\n</code></pre>\n\n<p>So given this untested suggestion code; if there are 4 processes in the pool does each process get allocated 25 stuffs to do, or do the 100 stuffs get picked off one by one by processes looking for stuff to do so that each process might do a different number of stuffs, eg 30, 26, 24, 20.</p>\n"},{"tags":["python","script","outlook"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13265861,"title":"how to trigger a python script in outlook using rules?","body":"<p>Is there any way to run the python script using outlook rules. I see an option of running the script but when i click, an empty box appears. How do i get the script in that box. I know it can be done through VBS but I want a python script to appear in that window.</p>\n"},{"tags":["python","django","api","rest","tastypie"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":23,"score":-1,"question_id":13265175,"title":"Django Tastypie : How to initiate a variable every time an api call is made?","body":"<p>I have two models :</p>\n\n<pre><code>class Category(models.Model):\n    name = models.CharField(max_length=50)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class SubCategory(models.Model):\n    sex =  models.CharField(choices=SEX, blank=True, max_length=5) \n    name = models.TextField(blank=True) \n    category = models.ForeignKey(Category) \n    def __unicode__(self):\n        return u'%s' % (self.name)\n</code></pre>\n\n<p>I'm creating an api using tastypie that returns me \"SubCategory\" objects in a JSON. I want to add a custom field \"start_counter_of_category\" in every result set which contains the counter of the subcategory where the category id changed (when ordered on \"category_id\" field)</p>\n\n<p>The algorithm is fairly straightforward, something like this in the \"dehydrate\" function:</p>\n\n<pre><code>API_SKU_VARS = {\n    'COUNTER'       : 1,\n    'FIRST_ELEMENT' : 1,\n    'PREV_CATEGORY' : 1\n}\n\n\nclass SubCategoryResource(ModelResource):\n    start_counter_of_category = fields.IntegerField(readonly=True)\n    category = fields.ForeignKey(CategoryResource,'category')\n    class Meta:\n        queryset = SubCategory.objects.all()\n        resource_name = 'subcategory'\n        filtering = {\n            'id' : ALL,\n            'name' : ALL,\n            'category': ALL_WITH_RELATIONS,\n        }\n        ordering = ['id','name','category']\n        serializer = Serializer(formats=['json'])\n    def dehydrate(self, bundle):\n        if API_SKU_VARS['PREV_CATEGORY']  != bundle.data['category']: #if the category of the current bundle is not equal to the category of the previous bundle, we update the ['PREV_CATEGORY'] \n            API_SKU_VARS['FIRST_ELEMENT']=API_SKU_VARS['COUNTER'] #update the ['FIRST_ELEMENT'] with the counter of the current bundle\n            API_SKU_VARS['PREV_CATEGORY'] = bundle.data['category']\n        API_SKU_VARS['COUNTER'] = API_SKU_VARS['COUNTER']+1 #for every bundle passed, we update the counter\n        bundle.data['start_counter_of_category']=API_SKU_VARS['FIRST_ELEMENT']\n        return bundle.data\n    serializer = Serializer(formats=['json'])\n</code></pre>\n\n<p>It works perfectly for the first run after I start the server. Predictably the issue of course is that the second time I make the api call, the variables retain the values they had in the previous run.</p>\n\n<p>Any ideas how to re-initiate the variables every time the api call is made?</p>\n"},{"tags":["python","django","file-upload"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13265459,"title":"weird django file upload error","body":"<p>although, there are many topics for this, i cannot find the right question+answer among them\nmy problem is this: </p>\n\n<p>i am trying to write an file upload. once i submit the form, this error is coming:</p>\n\n<pre><code>MultiValueDictKeyError at /anzeige_save/\nKey 'file' not found in &lt;MultiValueDict: {}&gt;\n</code></pre>\n\n<p>this is my model: </p>\n\n<pre><code>class Anzeige(models.Model):\n    titel = models.CharField(max_length=300)\n    anzeige = models.CharField(max_length=1000)\n    date = models.DateTimeField()\n    datum = models.CharField(max_length=12)\n    file = models.FileField(upload_to='/anzeige/D-d-M-Y/')\n    def __unicode__(self):\n        return self.titel\n</code></pre>\n\n<p>this is my view: </p>\n\n<pre><code>if request.path == '/anzeige_save/':\n    anzeige=Anzeige(titel=request.POST['titel'], anzeige=end_anzeige,date=datetime.datetime.now(), datum=request.POST['datum'],file=request.FILES['file'])\n    anzeige.save()\n    return HttpResponse(\"Anzeige saved successfully\")\n</code></pre>\n\n<p>this is my ajax in front-end:</p>\n\n<pre><code>var title = document.getElementById(title).value;\nvar body = document.getElementById(body).value;\nvar file = document.getElementById(name_file).value;\nvar datum = document.getElementById(datum).value;\nif(title==\" \" || body==\" \" || title==\"\" || body==\"\" || datum==\"\" || datum==\" \" ){\nalert(\"Please fill out all!\");\n}else{\n    $.ajax({\n    url: \"/anzeige_save/\",\n    type: \"POST\",\n    data: {anzeige:body,titel:title,file:file,datum:datum},\n}).success(function(data){\n    $(succ_message).text(data);\n    $(succ_message).fadeIn(1000);\n    $(succ_message).fadeOut(2000);\n})\n }\n</code></pre>\n\n<p>and this is file in form:</p>\n\n<pre><code>...\n&lt;input type=\"file\" id=\"name_file\" name=\"name_file\" size=\"40\" maxlength=\"100000\"&gt;&lt;br /&gt;\n...\n</code></pre>\n\n<p>am i missing something here ? </p>\n\n<p>i have Model with filefield and i am saving other fields including file into instance. </p>\n\n<p>thanks for any drop-by! :) </p>\n"},{"tags":["python","class"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13265120,"title":"list of classes in python 3","body":"<p>We can do something like below in C:</p>\n\n<pre><code>struct teams {\nchar team_name[100];\nint team_point[100];\n\n\n}\n\nstruct teams teams1[100];\n</code></pre>\n\n<p>We get array of struct in this way, is it somehow possible in Python? Thanks</p>\n"},{"tags":["python","inheritance","django-models","django-orm"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13223173,"title":"Child dependant field in abstract class with Django's ORM","body":"<p>I have these two models:</p>\n\n<pre><code>class Interface(models.Model):\n    # fields\nclass OldInterface(models.Model):\n    interface = models.ForeignKey(_base,related_name='old_versions')\n    class Meta:\n        abstract = True\n</code></pre>\n\n<p>Inherited by their \"Spatial\" and \"Functional\" variants :</p>\n\n<pre><code>class SpatialInterface(Interface):\n    # fields\nclass OldSpatialInterface(OldInterface):\n    _base = SpatialInterface\n\nclass FunctionalInterface(Interface):\n    # fields\nclass OldFunctionalInterface(OldInterface):\n    _base = FunctionalInterface\n</code></pre>\n\n<p>Of course my code fails, because _base is not defined in the parent Model. </p>\n\n<p>My question is : Is there any way, or trick to tell the ForeignKey to read to the target model from the child Model ?</p>\n\n<p>Or more generally, is there any way, to, in the parent class, dynamically read a variable located in the child class ?</p>\n"},{"tags":["python","http","dropbox-api"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":141,"score":1,"question_id":11046225,"title":"httplib.BadStatusLine error (using with Dropbox Python SDK)","body":"<p>I got this traceback when trying to upload a file using put_file (source code from example <a href=\"https://www.dropbox.com/developers/start/files#python\" rel=\"nofollow\">https://www.dropbox.com/developers/start/files#python</a>). What does this error mean? And what is the suitable way to handle it?</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"testDRBX.py\", line 30, in &lt;module&gt;\n    response = client.put_file('magnum-opus.txt', f)\n  File \"C:\\Users\\hicom\\AppData\\Roaming\\Python\\Python27\\site-packages\\dropbox\\cli\nent.py\", line 149, in put_file\n    return RESTClient.PUT(url, file_obj, headers)\n  File \"C:\\Users\\hicom\\AppData\\Roaming\\Python\\Python27\\site-packages\\dropbox\\res\nt.py\", line 146, in PUT\n    return cls.request(\"PUT\", url, body=body, headers=headers, raw_response=raw_\nresponse)\n  File \"C:\\Users\\hicom\\AppData\\Roaming\\Python\\Python27\\site-packages\\dropbox\\res\nt.py\", line 111, in request\n    r = conn.getresponse()\n  File \"C:\\Python27\\lib\\httplib.py\", line 1027, in getresponse\n    response.begin()\n  File \"C:\\Python27\\lib\\httplib.py\", line 407, in begin\n    version, status, reason = self._read_status()\n  File \"C:\\Python27\\lib\\httplib.py\", line 371, in _read_status\n    raise BadStatusLine(line)\nhttplib.BadStatusLine: ''\n</code></pre>\n"},{"tags":["python"],"answer_count":6,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":1383,"score":1,"question_id":4579908,"title":"cross-platform splitting of path in python","body":"<p>I'd like something that has the same effect as this:</p>\n\n<pre><code>&gt;&gt;&gt; path = \"/foo/bar/baz/file\"\n&gt;&gt;&gt; path_split = path.rsplit('/')[1:]\n&gt;&gt;&gt; path_split\n['foo', 'bar', 'baz', 'file']\n</code></pre>\n\n<p>But that will work with Windows paths too. I know that there is an <code>os.path.split()</code> but that doesn't do what I want, and I didn't see anything that does.</p>\n"},{"tags":["python","database","sqlite","commit","journal"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":21,"score":2,"question_id":13258948,"title":"Commit existing journal file in SQLite from prior terminated connection to database","body":"<p>I'm prototyping a script that creates large SQLite databases with a four day time limit.  The time limit was reached before the script finished and the connection.commit() command would be executed.  The script is dropped and the database connection terminated but the journal is still in the file directory where the database was being created.</p>\n\n<p>I'd like to commit the existing journal to see if the current script is on the right track.  Initially I just try (using the Python sqlite3 module on iPython):</p>\n\n<pre><code>connection = sqlite3.connect('mydatabase')\n\nconnection.commit()\n</code></pre>\n\n<p>but I suspect I need to specify that I want to commit the existing journal.  I tried passing the journal name as an argument in commit(), but commit() doesn't take arguments in the sqlite3 Python module.</p>\n\n<p>In the future I'll incrementally .commit()</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":30,"score":-4,"question_id":13264511,"title":"TypeError: unhashable type: 'dict' >>>","body":"<p>this  piece of code is giving me error as unhashable type dict can anyone explain me what is the solution    </p>\n\n<p>negids = movie_reviews.fileids('neg')\n    def word_feats(words):\n        return dict([(word, True) for word in words])</p>\n\n<pre><code>negfeats = [(word_feats(movie_reviews.words(fileids=[f])), 'neg') for f in negids]\nstopset = set(stopwords.words('english'))\n\ndef stopword_filtered_word_feats(words):\n    return dict([(word, True) for word in words if word not in stopset])\n\nresult=stopword_filtered_word_feats(negfeats)\n</code></pre>\n"},{"tags":["python","sublimetext2"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13265686,"title":"Sublime text 2 plugin development creating new files in threads","body":"<p>I'm trying to create a plugin for sublime text 2, the plugin requires to call a http handler api and as a response open new files with the <code>window.new_file()</code></p>\n\n<p>It is recommended with API calls to be done via threading to minimize performance effect. I've done everything in threads, thing is as i understood i cannot create <code>new_file()</code> from a thread because i dont have an active window to start with.</p>\n\n<p>How do i overcome this obstacle by creating <code>new_files()</code> in the background when the API respondes and not having the user get stuck on a specific window until the api respondes.</p>\n"},{"tags":["python","xml-rpc","tornado","xmlrpclib"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13191858,"title":"Python. Tornado. Non-blocking xmlrpc client","body":"<p>Basically we can call xmlrpc handlers following way: </p>\n\n<pre><code>import xmlrpclib\ns = xmlrpclib.ServerProxy('http://remote_host/rpc/')\nprint s.system.listmethods()\n</code></pre>\n\n<p>In tornado we can integrate it like this: </p>\n\n<pre><code>import xmlrpclib\nimport tornado.web\n\ns = xmlrpclib.ServerProxy('http://remote_host/rpc/')\n\nclass MyHandler(tornado.web.RequestHandler):\n    def get(self):\n        result = s.system.listmethods()\n</code></pre>\n\n<p>I have following, a little bit newbie, questions:</p>\n\n<ol>\n<li>Will <code>result = s.system.listmethods()</code> block tornado?  </li>\n<li>Are there any non-blocking xmlrpc clients around?</li>\n<li>How can we achieve <code>result = yield gen.Task(s.system.listmethods)</code>?</li>\n</ol>\n"},{"tags":["python"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":6,"view_count":75,"score":-6,"question_id":13263951,"title":"What is \"argv\", and what does it do?","body":"<p>argv -- </p>\n\n<p>I keep seeing it, but I never know what it does. I'm starting to learn some higher levels of code now, and I need to get a deep understanding of that this means. Thanks guys.</p>\n\n<p>Edit: If you can, will you please write a line or two and explain how it works? </p>\n"},{"tags":["python","string"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13263457,"title":"Fetching only required part from a string in python","body":"<p>Suppose i had string as below</p>\n\n<pre><code>data = \"/phones/pages/nokia_overview.aspx pid=46&amp;cid=raj 80\"\n</code></pre>\n\n<p>Now i want to fetch the url from the string from <code>/</code> up to <code>.aspx</code> . I mean actually there may be many strings as above, but we want to fetch the string from start and up to the extension <code>.aspx</code> in the string by ignoring the remaining part of the string after <code>.aspx</code></p>\n\n<p>Here the length of the string may vary, because sometimes the url will be bigger and sometimes small, so based on .aspx extension i want to fetch the url from the above string</p>\n\n<p>can anyone let me know how can we do this in python </p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13265466,"title":"read write mode python","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1466000/python-open-built-in-function-difference-between-modes-a-a-w-w-and-r\">python open built-in function: difference between modes a, a+, w, w+, and r+?</a>  </p>\n</blockquote>\n\n\n\n<pre><code>try:\n    f = open(\"file.txt\", \"r\")\n    try:\n        string = f.read()\n        line = f.readline()\n        lines = f.readlines()\n    finally:\n        f.close()\nexcept IOError:\n    pass\n\n\ntry:\n    f = open(\"file.txt\", \"w\")\n    try:\n        f.write('blah') # Write a string to a file\n        f.writelines(lines) # Write a sequence of strings to a file\n    finally:\n        f.close()\nexcept IOError:\n    pass\n</code></pre>\n\n<p>Hi,</p>\n\n<p>this is mode which i can read and write file but i want to open file once and perform both read and write operation in python</p>\n"},{"tags":["python","python-3.x"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13265439,"title":"Python 3.3 - Unicode-objects must be encoded before hashing","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/7585307/python-hashlib-problem-typeerror-unicode-objects-must-be-encoded-before-hashin\">Python hashlib problem “TypeError: Unicode-objects must be encoded before hashing”</a>  </p>\n</blockquote>\n\n\n\n<p>Here is a code in Python 3 which generates a password with salt:</p>\n\n<pre><code>import hmac\nimport random\nimport string\nimport hashlib\n\n\ndef make_salt():\n    salt = \"\"\n    for i in range(5):\n        salt = salt + random.choice(string.ascii_letters)\n    return salt\n\n\ndef make_pw_hash(pw, salt = None):\n    if (salt == None):\n        salt = make_salt() #.encode('utf-8') - not working either\n    return hashlib.sha256(pw + salt).hexdigest()+\",\"+ salt\n\n\npw = make_pw_hash('123')\nprint(pw)\n</code></pre>\n\n<p>The error it gives me is:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\german\\test.py\", line 20, in &lt;module&gt;\n    pw = make_pw_hash('123')\n  File \"C:\\Users\\german\\test.py\", line 17, in make_pw_hash\n    return hashlib.sha256(pw + salt).hexdigest()+\",\"+ salt\nTypeError: Unicode-objects must be encoded before hashing\n</code></pre>\n\n<p>I'm not allowed to change the algorithm of generating a password, so I only want to fix the error using probably the method <code>encode('utf-8')</code> . How can I do it?</p>\n"},{"tags":["python","multithreading","gevent"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":37,"score":0,"question_id":13126254,"title":"python thread by gevent?","body":"<pre><code>import threading,gevent,gevent.monkey \nclass test(threading.Thread):\n  def __init__(self):\n    threading.Thread.__init__(self)\n  def run(self):\n    print 1  \n    gevent.sleep(2)  \n    print 2\ngevent.monkey.patch_thread() \nt=test()  \nt.start() \n</code></pre>\n\n<p>why 'print 2' not run, how to do? </p>\n\n<p>If to download files,multithread and gevent, which is faster?</p>\n"},{"tags":["python","boolean"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13264942,"title":"Where would typecasting to boolean with `not not` instead of `bool()` fail?","body":"<p>To typecast a value to boolean, I usually do the following:</p>\n\n<pre><code>not not value\n</code></pre>\n\n<p>This is faster than using <code>bool</code>. Output from timeit:</p>\n\n<pre><code>python -m timeit '[bool(t) for t in [[], {}, \"\", 0, [1], {\"a\": \"n\"}, \"asdf\", 2323]]'    \n1000000 loops, best of 3: 1.81 usec per loop\npython -m timeit '[(not not t) for t in [[], {}, \"\", 0, [1], {\"a\": \"n\"}, \"asdf\", 2323]]'\n1000000 loops, best of 3: 1.11 usec per loop\n</code></pre>\n\n<p>I tried to test it using this:</p>\n\n<pre><code>&gt;&gt;&gt; [bool(t) == (not not t) for t in [None, [], {}, \"\", 0, [1], {'a': 'n'}, \"asdf\", 2323]]\n[True, True, True, True, True, True, True, True, True]\n</code></pre>\n\n<p>And it seems to work for most common cases.</p>\n\n<p>Arguments on readability aside, where does this fail, or why would this be a bad thing to do?</p>\n"},{"tags":["python","dictionary"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13264946,"title":"how to assign list of values to a key using OrderedDict in python","body":"<p>Hi want to have a ordered dictionary with keys having list of values.</p>\n\n<p>from below code i could able to get a dictionary with list of keys but ordered of insertion is missing.</p>\n\n<pre><code>from collections import defaultdict\n\nkeys=['blk','pri','ani']\nvals1=['blocking','primary','anim']\nvals2=['S1','S2','S3']\ndic = defaultdict(list)\n\ni=0\n\nfor key in keys:\n    dic[key].append(vals1[i])\n    dic[key].append(vals2[i])\n\n    i += 1\n\nprint dic\n</code></pre>\n\n<p>i get the following result</p>\n\n<pre><code>defaultdict(&lt;type 'list'&gt;, {'pri': ['primary', 'S2'], 'ani': ['anim', 'S3'], 'blk': ['blocking', 'S1']})\n</code></pre>\n\n<p>here i lost insert order.</p>\n\n<p>I know defaultdict object in Python are <em>unordered by definition</em>.</p>\n\n<p>And i know we need to Use <em>OrderedDict</em> if you need the order in which values were inserted (it's available in Python 2.7 and 3.x)</p>\n\n<p>So changed my code as below</p>\n\n<p>from below code i could able to get what i need.</p>\n\n<pre><code>from collections import defaultdict,OrderedDict\n\nkeys=['blk','pri','ani']\nvals1=['blocking','primary','anim']\nvals2=['S1','S2','S3']\ndic = OrderedDict(defaultdict(list))\n\ni=0\n\nfor key in keys:\n    dic[key].append(vals1[i])\n    dic[key].append(vals2[i])\n\n    i += 1\n\nprint dic\n</code></pre>\n\n<p>and now i get the below error </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"Dict.py\", line 18, in &lt;module&gt;\n    dic[key].append(vals1[i])\nKeyError: 'blk' \n</code></pre>\n\n<p>Can any one tell me how to get what i am trying.</p>\n"},{"tags":["python","google-nacl"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":12964666,"title":"Installing Chrome Native Client SDK","body":"<p>For the last few days I have been trying ti install the Native Client SDK for chrome in Windows and/or Ubuntu.\nI'm behind a corporate network, and the only internet access is through an HTTP proxy with authentication involved.\nWhen I run \"naclsdk update\" in Ubuntu, it shows </p>\n\n<p>\"urlopen error Tunnel connection failed: 407 Proxy Authentication Required\"</p>\n\n<p>Can anyone please help ?</p>\n"},{"tags":["python"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13264805,"title":"iterating over file object in Python does not work, but readlines() does but is inefficient","body":"<p>In the following code, if I use: </p>\n\n<pre><code>for line in fin:\n</code></pre>\n\n<p>It only executes for 'a'</p>\n\n<p>But if I use:</p>\n\n<pre><code>wordlist = fin.readlines()\nfor line in wordlist:\n</code></pre>\n\n<p>Then it executes for a thru z.</p>\n\n<p>But <code>readlines()</code> reads the whole file at once, which I don't want.</p>\n\n<p>How to avoid this?</p>\n\n<pre><code>def avoids():\n    alphabet = 'abcdefghijklmnopqrstuvwxyz'\n    num_words = {}\n\n    fin = open('words.txt')\n\n    for char in alphabet:\n      num_words[char] = 0\n      for line in fin:\n        not_found = True\n        word = line.strip()\n        if word.lower().find(char.lower()) != -1:\n          num_words[char] += 1\n    fin.close()\n    return num_words\n</code></pre>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13260535,"title":"Djangobb - receiving incorrect link for confirmation","body":"<p>I set up djangobb and after a lot of problems and hours spending to making it work with my app, it finally worked... The only problem I still have is that when someone register, he is receiving incorrect link for registration. </p>\n\n<p>Example:</p>\n\n<pre><code>http://example.com/forum/account/activate/eac687ca1d21c4ae0f33d61766fec3a289936dbf/\n</code></pre>\n\n<p>How can i edit the url to my own url ? </p>\n\n<p>Thanks.</p>\n"},{"tags":["python"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":184,"score":-2,"question_id":1788145,"title":"Searching for Python http lib","body":"<p>Something like httparty for Ruby</p>\n"},{"tags":["python","windows","sqlite3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13263275,"title":"Having trouble compiling pysqlite on windows","body":"<p>Good day.</p>\n\n<p>I am having trouble compiling pysqlite on windows. I have managed to start compiling with quite a bit of work but now I am stuck with this error:</p>\n\n<blockquote>\n  <p>d:/mingw/bin/../lib/gcc/mingw32/4.7.2/../../../../mingw32/bin/ld.exe: cannot find -lsqlite3</p>\n</blockquote>\n\n<p>I have searched for possible solutions but most of the solutions are for linux.</p>\n\n<p>Please help.</p>\n\n<p>Thank you.</p>\n"},{"tags":["python","urllib2","urllib"],"answer_count":5,"favorite_count":2,"up_vote_count":9,"down_vote_count":0,"view_count":5455,"score":9,"question_id":201515,"title":"urllib.urlopen works but urllib2.urlopen doesn't","body":"<p>I have a simple website I'm testing.  It's running on localhost and I can access it in my web browser.  The index page is simply the word \"running\".  <code>urllib.urlopen</code> will successfully read the page but <code>urllib2.urlopen</code> will not.  Here's a script which demonstrates the problem (this is the actual script and not a simplification of a different test script):</p>\n\n<pre><code>import urllib, urllib2\nprint urllib.urlopen(\"http://127.0.0.1\").read()  # prints \"running\"\nprint urllib2.urlopen(\"http://127.0.0.1\").read() # throws an exception\n</code></pre>\n\n<p>Here's the stack trace:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"urltest.py\", line 5, in &lt;module&gt;\n    print urllib2.urlopen(\"http://127.0.0.1\").read()\n  File \"C:\\Python25\\lib\\urllib2.py\", line 121, in urlopen\n    return _opener.open(url, data)\n  File \"C:\\Python25\\lib\\urllib2.py\", line 380, in open\n    response = meth(req, response)\n  File \"C:\\Python25\\lib\\urllib2.py\", line 491, in http_response\n    'http', request, response, code, msg, hdrs)\n  File \"C:\\Python25\\lib\\urllib2.py\", line 412, in error\n    result = self._call_chain(*args)\n  File \"C:\\Python25\\lib\\urllib2.py\", line 353, in _call_chain\n    result = func(*args)\n  File \"C:\\Python25\\lib\\urllib2.py\", line 575, in http_error_302\n    return self.parent.open(new)\n  File \"C:\\Python25\\lib\\urllib2.py\", line 380, in open\n    response = meth(req, response)\n  File \"C:\\Python25\\lib\\urllib2.py\", line 491, in http_response\n    'http', request, response, code, msg, hdrs)\n  File \"C:\\Python25\\lib\\urllib2.py\", line 418, in error\n    return self._call_chain(*args)\n  File \"C:\\Python25\\lib\\urllib2.py\", line 353, in _call_chain\n    result = func(*args)\n  File \"C:\\Python25\\lib\\urllib2.py\", line 499, in http_error_default\n    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)\nurllib2.HTTPError: HTTP Error 504: Gateway Timeout\n</code></pre>\n\n<p>Any ideas?  I might end up needing some of the more advanced features of <code>urllib2</code>, so I don't want to just resort to using <code>urllib</code>, plus I want to understand this problem.</p>\n"},{"tags":["python","python-2.7"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13264705,"title":"AttributeError: 'NoneType' object has no attribute 'start'","body":"<pre><code>Traceback (most recent call last):\n  File \"NinjaWarzBot.py\", line 354, in &lt;module&gt;\n    stats = comm.init()\n  File \"C:\\Users\\Administrator\\Desktop\\ninja warz bot\\NinjaWarzLib.py\", line 33,\n in init\n    mf.seek(m.start()+len(cookieKey)) # reset file cursor\nAttributeError: 'NoneType' object has no attribute 'start'\nPress any key to continue . . .\n\ndef init():\n    cookieDBFilename = os.path.join(os.environ['USERPROFILE'], \"AppData/Local/Google/Chrome/User Data/Default/Cookies\")\n    cookieKey = \"kongregate.ninjawarz.brokenbulbstudios.comPHPSESSID\"\n    f = open(cookieDBFilename, 'r+b')\n    mf = mmap.mmap(f.fileno(), 0)\n    mf.seek(0) # reset file cursor\n    m = re.search(cookieKey+'\\w+', mf)\n\n    mf.seek(m.start()+len(cookieKey)) # reset file cursor\n    global _sessionId\n    _sessionId = mf.read(m.end() - m.start() -len(cookieKey))\n    mf.close()\n    f.close()\n\n    return getMyStats()\n</code></pre>\n\n<p>That's my error and code. I'm confused as to why i'm getting this error. Can someone please help me? It's getting frustrating.</p>\n"},{"tags":["python","ajax","django"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13263612,"title":"Issues with ajax in django","body":"<p>I'm using ajax in django first times .. I read some tutorials on the net and I'm trying to make a simple form which posts some information via ajax.</p>\n\n<p>Here is my html form</p>\n\n<pre><code>&lt;script src=\"http://code.jquery.com/jquery-latest.js\"&gt;&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\nfunction send_request()\n{\n\n $.ajax({\n                            type:\"POST\",\n                            url:\"/ajaxredirect/\",\n\n\n       });\n\n}\n&lt;/script&gt;\n&lt;button type=\"button\" onclick=\"send_request();\"&gt;change content&lt;/button&gt;\n</code></pre>\n\n<p>and it is my view</p>\n\n<pre><code>def Ajaxquery(request):\n        if request.is_ajax():\n                return HttpResponse(\"ok\")\n        else:\n                return HttpResponse(\"error\")\n</code></pre>\n\n<p>it does nothing when i am click on change content button in browser.</p>\n\n<p>Any suggestions would be apperciated</p>\n"},{"tags":["python","google-app-engine","google-calendar"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13264608,"title":"Unlogical UnkownApiNameOrVersion halfway method","body":"<p>I've got an application running on GAE. The application inserts a certain number of events into a calendar. The weird thing is, sometimes it works and sometimes it doesn't. When I read the logs of a failed attempt I can see that it inserts x out of a total of events and then raises this error:</p>\n\n<pre><code>name: calendar  version: v3\nTraceback (most recent call last):\n  File \"/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py\", line 1505, in __call__\n    rv = self.router.dispatch(request, response)\n  File \"/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py\", line 1253, in default_dispatcher\n    return route.handler_adapter(request, response)\n  File \"/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py\", line 1077, in __call__\n    return handler.dispatch()\n  File \"/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py\", line 547, in dispatch\n    return self.handle_exception(e, self.app.debug)\n  File \"/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.3/webapp2.py\", line 545, in dispatch\n    return method(*args, **kwargs)\n  File \"/base/data/home/apps/s~appname/0000000000/appname.py\", line 101, in post\n    developerKey='xxxxxxxxxxxxxxxxxxxxxxx')\n  File \"/base/data/home/apps/s~appname/0000000000/oauth2client/util.py\", line 120, in positional_wrapper\n    return wrapped(*args, **kwargs)\n  File \"/base/data/home/apps/s~appname/000000000000000/apiclient/discovery.py\", line 197, in build\n    version))\nUnknownApiNameOrVersion: name: calendar  version: v3\n</code></pre>\n\n<p>Could anyone think of a reason why this would happen halfway the function?</p>\n"},{"tags":["python","ubuntu","unicode","utf-8","filesystems"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13232108,"title":"Python: Overriding os.path.supports_unicode_filenames on Ubuntu","body":"<p>I am running a python web app on an Ubuntu server, while I development locally on OS X.</p>\n\n<p>I use a lot of unicode strings for the Hebrew language, including manipulating filenames of images, so they will be saved on the filesystem with Hebrew characters.</p>\n\n<p>My Ubuntu server is fully configured for UTF-8 - I have other images on the file system (outside of this app) with Hebrew names, in Hebrew named directories, etc.</p>\n\n<p>However, my app returns errors when trying to save an image with a Hebrew filename on Ubuntu (but not on OS X).</p>\n\n<p>The error being:</p>\n\n<pre><code>UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-3: ordinal not in range(128)\n</code></pre>\n\n<p>After <em>alot</em> of investigating, I got to the last possible cause as far as I can see:</p>\n\n<pre><code># Inside my virtualenv, Mac OS X\n&gt;&gt;&gt; import os.path\n&gt;&gt;&gt; os.path.supports_unicode_filenames\n&gt;&gt;&gt; True\n\n# Inside my virtualenv, Ubuntu 12.04\n&gt;&gt;&gt; import os.path\n&gt;&gt;&gt; os.path.supports_unicode_filenames\n&gt;&gt;&gt; False\n</code></pre>\n\n<p>And just for the curious, here are my Ubuntu locale settings:</p>\n\n<pre><code>locale\nLANG=en_US.UTF-8\nLANGUAGE=\nLC_CTYPE=\"en_US.UTF-8\"\nLC_NUMERIC=\"en_US.UTF-8\"\nLC_TIME=\"en_US.UTF-8\"\nLC_COLLATE=\"en_US.UTF-8\"\nLC_MONETARY=\"en_US.UTF-8\"\nLC_MESSAGES=\"en_US.UTF-8\"\nLC_PAPER=\"en_US.UTF-8\"\nLC_NAME=\"en_US.UTF-8\"\nLC_ADDRESS=\"en_US.UTF-8\"\nLC_TELEPHONE=\"en_US.UTF-8\"\nLC_MEASUREMENT=\"en_US.UTF-8\"\nLC_IDENTIFICATION=\"en_US.UTF-8\"\nLC_ALL=\n</code></pre>\n\n<p>Update: adding the code, and an example string:</p>\n\n<pre><code># a string, of the type I would get for instance.product.name, as used below.\nu'\\\\u05e7\\\\u05e8\\\\u05d5\\\\u05d1-\\\\u05e8\\\\u05d7\\\\u05d5\\\\u05e7'\n\n\n#utils.py\n# I get an image object from django, and I run this function so django \n# can use the generated filepath for the image.\ndef get_upload_path(instance, filename):\n\n    tmp = filename.split('.')\n    extension = '.' + tmp[-1]\n\n    if instance.__class__.__name__ == 'MyClass':\n\n        seo_filename = unislugify(instance.product.name)\n        # unislugify takes a string and strips spaces, etc.\n        value = IMAGES_PRODUCT_DIR + seo_filename + extension\n\n    else:\n\n        value = IMAGES_GENERAL_DIR + unislugify(filename)\n\n    return value\n</code></pre>\n\n<p>Example stacktrace:</p>\n\n<pre><code>UnicodeEncodeError: 'ascii' codec can't encode characters in position 60-66: ordinal not in range(128)\n\nStacktrace (most recent call last):\n\n  File \"django/core/handlers/base.py\", line 111, in get_response\n    response = callback(request, *callback_args, **callback_kwargs)\n\n  File \"django/contrib/admin/options.py\", line 366, in wrapper\n    return self.admin_site.admin_view(view)(*args, **kwargs)\n\n  File \"django/utils/decorators.py\", line 91, in _wrapped_view\n    response = view_func(request, *args, **kwargs)\n\n  File \"django/views/decorators/cache.py\", line 89, in _wrapped_view_func\n    response = view_func(request, *args, **kwargs)\n\n  File \"django/contrib/admin/sites.py\", line 196, in inner\n    return view(request, *args, **kwargs)\n\n  File \"django/utils/decorators.py\", line 25, in _wrapper\n    return bound_func(*args, **kwargs)\n\n  File \"django/utils/decorators.py\", line 91, in _wrapped_view\n    response = view_func(request, *args, **kwargs)\n\n  File \"django/utils/decorators.py\", line 21, in bound_func\n    return func(self, *args2, **kwargs2)\n\n  File \"django/db/transaction.py\", line 209, in inner\n    return func(*args, **kwargs)\n\n  File \"django/contrib/admin/options.py\", line 1055, in change_view\n    self.save_related(request, form, formsets, True)\n\n  File \"django/contrib/admin/options.py\", line 733, in save_related\n    self.save_formset(request, form, formset, change=change)\n\n  File \"django/contrib/admin/options.py\", line 721, in save_formset\n    formset.save()\n\n  File \"django/forms/models.py\", line 497, in save\n    return self.save_existing_objects(commit) + self.save_new_objects(commit)\n\n  File \"django/forms/models.py\", line 628, in save_new_objects\n    self.new_objects.append(self.save_new(form, commit=commit))\n\n  File \"django/forms/models.py\", line 731, in save_new\n    obj.save()\n\n  File \"django/db/models/base.py\", line 463, in save\n    self.save_base(using=using, force_insert=force_insert, force_update=force_update)\n\n  File \"django/db/models/base.py\", line 551, in save_base\n    result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)\n\n  File \"django/db/models/manager.py\", line 203, in _insert\n    return insert_query(self.model, objs, fields, **kwargs)\n\n  File \"django/db/models/query.py\", line 1593, in insert_query\n    return query.get_compiler(using=using).execute_sql(return_id)\n\n  File \"django/db/models/sql/compiler.py\", line 909, in execute_sql\n    for sql, params in self.as_sql():\n\n  File \"django/db/models/sql/compiler.py\", line 872, in as_sql\n    for obj in self.query.objs\n\n  File \"django/db/models/fields/files.py\", line 249, in pre_save\n    file.save(file.name, file, save=False)\n\n  File \"django/db/models/fields/files.py\", line 86, in save\n    self.name = self.storage.save(name, content)\n\n  File \"django/core/files/storage.py\", line 44, in save\n    name = self.get_available_name(name)\n\n  File \"django/core/files/storage.py\", line 70, in get_available_name\n    while self.exists(name):\n\n  File \"django/core/files/storage.py\", line 230, in exists\n    return os.path.exists(self.path(name))\n\n  File \"python2.7/genericpath.py\", line 18, in exists\n    os.stat(path)\n</code></pre>\n"},{"tags":["python"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13263414,"title":"splitting comma separated list","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4322705/split-a-list-into-nested-lists-on-a-value\">Split a list into nested lists on a value</a>  </p>\n</blockquote>\n\n\n\n<p>I have a list like this: </p>\n\n<pre><code>['jj01','gg01',',','yy01','hh01',',','yy04','uu01']\n</code></pre>\n\n<p>How would I split this list to its elements -- splitting on <code>','</code> like this:</p>\n\n<pre><code>[['jj01','gg01'],['yy01','hh01'],['yy04','uu01']]\n</code></pre>\n\n<p>Thanks in advance.</p>\n"},{"tags":["python","wifi","wificonfiguration"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13218439,"title":"How to change IP address of wifi interface using python in linux?","body":"<p>I want to change ip address of the wifi interface using python. How can I do it? You don't have to tell me the code. Just point me out. I'll hunt down. Thanks!</p>\n"},{"tags":["python","oop","types"],"answer_count":4,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":118,"score":7,"question_id":13242501,"title":"Pythonic way to Implement Data Types (Python 2.7)","body":"<p>The majority of my programming experience has been with C++. Inspired by Bjarne Stroustrup's talk <a href=\"http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Keynote-Bjarne-Stroustrup-Cpp11-Style\" rel=\"nofollow\">here</a>, one of my favorite programming techniques is \"type-rich\" programming; the development of new robust data-types that will not only reduce the amount of code I have to write by wrapping functionality into the type (for example vector addition, instead of newVec.x = vec1.x + vec2.x; newVec.y = ... etc, we can just use newVec = vec1 + vec2) but will also reveal problems in your code at compile time through the strong type system.</p>\n\n<p>A recent project I have undertaken in Python <strong>2.7</strong> requires integer values that have upper and lower bounds. My first instinct is to create a new data type (class) that will have all the same behavior as a normal number in python, but will always be within its (dynamic) boundary values.</p>\n\n<pre><code>class BoundInt:\n    def __init__(self, target = 0, low = 0, high = 1):\n        self.lowerLimit = low\n        self.upperLimit = high\n        self._value = target\n        self._balance()\n\n    def _balance(self):\n        if (self._value &gt; self.upperLimit):\n            self._value = self.upperLimit\n        elif (self._value &lt; self.lowerLimit):\n            self._value = self.lowerLimit\n        self._value = int(round(self._value))\n\n    def value(self):\n        self._balance()\n        return self._value\n\n    def set(self, target):\n        self._value = target\n        self._balance()\n\n    def __str__(self):\n        return str(self._value)\n</code></pre>\n\n<p>This is a good start, but it requires accessing the meat of these BoundInt types like so</p>\n\n<pre><code>x = BoundInt()\ny = 4\nx.set(y)           #it would be nicer to do something like x = y\nprint y            #prints \"4\"\nprint x            #prints \"1\"\nz = 2 + x.value()  #again, it would be nicer to do z = 2 + x\nprint z            #prints \"3\" \n</code></pre>\n\n<p>We can add a large number of python's \"magic method\" definitions to the class to add some more functionality:</p>\n\n<pre><code>def __add__(self, other):\n    return self._value + other\n\ndef __sub__(self, other):\n    return self._value - other\n\ndef __mul__(self, other):\n    return self._value * other\n\ndef __div__(self, other):\n    return self._value / other\n\ndef __pow__(self, power):\n    return self._value**power\n\ndef __radd__(self, other):\n    return self._value + other\n\n#etc etc\n</code></pre>\n\n<p>Now the code is rapidly exploding in size, and there is a ton of repetition to what is being written, for very little return, this doesn't seem very pythonic at all.</p>\n\n<p>Things get even more complicated when I start to want to construct BoundInt objects from normal python numbers (integers?), and other BoundInt objects</p>\n\n<pre><code>x = BoundInt()\ny = BoundInt(x)\nz = BoundInt(4)\n</code></pre>\n\n<p>Which, as far as I'm aware requires the use of rather large/ugly if/else type checking statements within the BoundInt() constructor, as python does not support (c style) overloading.</p>\n\n<p>All of this feels terribly like trying to write c++ code in python, a cardinal sin if one of my favorite books, <em>Code Complete 2</em>, is taken seriously. I feel like I am swimming against the dynamic typing current, instead of letting it carry me forward.</p>\n\n<p>I very much want to learn to code python 'pythonic-ally', what is the best way to approach this sort of problem domain? What are good resources to learn proper pythonic style?</p>\n"},{"tags":["python","multithreading","memory","timer","python-2.7"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13261593,"title":"Resource usage of \"time.sleep\" in loop vs. \"threading.Timer\"","body":"<p>First method:</p>\n\n<pre><code>import threading\nimport time\n\ndef keepalive():\n    while True:\n        print 'Alive.'\n        time.sleep(200)\nthreading.Thread(target=keepalive).start()\n</code></pre>\n\n<p>Second method:</p>\n\n<pre><code>import threading\n\ndef keepalive():\n    print 'Alive.'\n    threading.Timer(200, keepalive).start()\n\nthreading.Timer(200, keepalive).start()\n</code></pre>\n\n<p>Which method takes up more RAM? And in the second method, does the thread end after being activated? or does it remain in the memory and start a new thread? (multiple threads)</p>\n"},{"tags":["python","override"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":51,"score":3,"question_id":13259749,"title":"How to override __setitem__ for a function's globals dict?","body":"<p>I want to be able to intercept variable assignments within a function and execute custom code.  I have tried creating a custom dict as follows:</p>\n\n<pre><code>class userdict(dict):\n    def __setitem__(self, key, value):\n        print 'run my code'\n        dict.__setitem__(self, key, value)\n</code></pre>\n\n<p>If I exec code using this as the global dict, then my custom code will run on each variable assignment.  e.g.:</p>\n\n<pre><code>UserDict = userdict()\nexec 'x = 1' in UserDict\n#outputs 'run my code'\n</code></pre>\n\n<p>But if my code is inside a function, it doesn't work:</p>\n\n<pre><code>code = \"\"\"\ndef foo():\n    global x\n    x = 1\n\"\"\"\nexec code in UserDict\nUserDict['foo']()\n</code></pre>\n\n<p>In this case, 'x' is assigned, but my custom code does not run.  I assume that within a function, the global dict is being modified somehow without calling setitem.  Is this correct? Is there a way to intercept variable assignments within a function and execute custom code?</p>\n\n<p>I want to do this in order to synchronize certain objects available inside a function with other objects in my program.  In order words, when the an assignment to certain variables occurs inside the function, that change should propagate to other variables in my program.</p>\n"},{"tags":["python","rsync"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13264107,"title":"Rsync command not working with python","body":"<p>I am trying implement rsync with python. Here's my code.</p>\n\n<pre><code>#!/usr/bin/python\n\nimport os\n\nurl = raw_input(\"Paste your URL:\")\nusername = raw_input(\"Enter username:\")\n#password = raw_input(\"Enter password:\")\n\nsource = username + \"@\" + url\n#print source\n\nprint os.system('rsync -zvr --progress source /home/zurelsoft/R')\n</code></pre>\n\n<p>The logic is simple: user inputs the url and username stored in source with proper formatting. The source variable is then used in rsync command. I am inputting the valid URL and username of my server but I am getting this error:</p>\n\n<pre><code>rsync: link_stat \"/home/name/source\" failed: No such file or directory (2)\n</code></pre>\n\n<p>What am I doing wrong? </p>\n"},{"tags":["python","list","pad"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13263454,"title":"Padding list elements with spaces givin' min length","body":"<p>For any name whose length is less than the minimum, replace that item of the list with a new string containing the name with space(s) added to the right-hand side to achieve the minimum length. </p>\n\n<p>For example, if the list contains the name \"Sue\" and the minimum length is 5, then that item would be replaced with the name padded with 2 spaces: \"Sue  \". Any names that are already the minimum length or longer are unchanged.</p>\n\n<pre><code>for words in list_of_names:  \n    if len(words) &lt; min_length:  \n        answer = min_length - len(words)    \n</code></pre>\n\n<p>Now i want to take the answer* and add that amount of spaces back into the list.</p>\n"},{"tags":["python","pdf","text"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":100,"score":1,"question_id":12956662,"title":"How to convert text files to pdf files in python script?","body":"<p>I have a report text file, which is created by my python script. I want to create pdf file from mentioned text file in python script. After searching, I came across reportlab library, but in tutorials of same library it shows creating pdf having manually written contents.However I want to convert my text file to pdf file.</p>\n\n<p>Is there any other option, any script?</p>\n\n<p>thank you in advance.</p>\n"},{"tags":["python"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13263617,"title":"Writing to a file and maintain the syntax","body":"<p>Started with python after a long time:</p>\n\n<p>Basically I am trying to read a line from a file:</p>\n\n<pre><code>MY_FILE                     ='test1.hgx'\n</code></pre>\n\n<p>Eventually I want to change this test1.hgx with:</p>\n\n<pre><code>test1_para1_para2_para3.hgx\n</code></pre>\n\n<p>Where para1,23 are the parameters I want to write.</p>\n\n<p>I wrote a code below</p>\n\n<pre><code>add_name= '%s'%(filename)+'_'+'%s'%(para1)+'_'+'%s'%(para2)+'_'+'%s'%(para3)+'.hgx'\nprint \"added_name:\",add_name\n\nwith open(filename) as f:  lines = f.read().splitlines()\nwith open(filename, 'w') as f:\n    for line in lines:\n        if line.startswith(' MY_FILE'):\n\n            f.write(line.rsplit(' ', 1)[0] + \"\\'%s'\\n\"%add_name)\n        else:\n            f.write(line + '\\n')\nf.close\n</code></pre>\n\n<p>The above code works as expected and writes out when I execute the python code once:</p>\n\n<pre><code>MY_FILE                     ='test1_01_02_03.hgx'\n</code></pre>\n\n<p>However when I run the python code once again for the second time it eats up the '=' and writes the following:</p>\n\n<pre><code>MY_FILE                     'test1_01_02_03.hgx'\n</code></pre>\n\n<p>Can I add something to my existing code that would always preserve the writing of the 'test1_01_02_03.hgx'. I think there is problem with :</p>\n\n<pre><code>f.write(line.rsplit(' ', 1)[0] + \"\\'%s'\\n\"%add_name)\n</code></pre>\n\n<p>However I am not able to figure out the problem. Any ideas would be helpful. Thanks.</p>\n"},{"tags":["python","tkinter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13263521,"title":"Tkinter: How to dynamically change layout","body":"<p>Basically, I want to have a button which, when pressed, will add stuff to my window. Here's some minimum code:</p>\n\n<pre><code>from Tkinter import *\n\ndef create_line (N):\n    \"\"\" \"\"\"\n    Label (root, text= \"Color \").grid(row=N, column=0, padx=3)\n    OptionMenu (root, v, *optionList).grid(row=N, column=1, padx=3)\n    Button (root, text=\"+\", command=add_line(N)).grid(row=N, column=2, padx=3)\n\ndef add_line (M):\n    M = M +1\n    Label (root, text= \"Color \").grid(row=M, column=0, padx=3)\n    OptionMenu (root, v, *optionList).grid(row=M, column=1, padx=3).grid(row=M,     \n                 column=2, padx=3)\n    return 1\n\nroot = Tk()\noptionList = (\"red\", \"green\", \"blue\")\ncurrent_row = 0\nv = StringVar()\nv.set(optionList[0])\ncreate_line(current_row)\nmainloop()\n</code></pre>\n\n<p>If you comment out the code inside the add_line function (except the return line) and run the code, you will see a label, an options menu, and a button. I want the '+' button to create another row with the same widgets. This minimum code is not my real app, but this is the core of what I can't do.</p>\n\n<p>I know it can be done, because I have an app I downloaded that changes the menu options dynamically when I button is pressed, but that technique doesn't seem to work for me.</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","pyparsing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":12927787,"title":"parseString works, scanString fails?","body":"<p>Having a problem getting scanString to work in a case where parseString gives a correct result.</p>\n\n<p>This sequence works:</p>\n\n<pre><code>alpha_rev = pyp.Word(pyp.alphas, max=2)\nnum_rev = pyp.Word('123456789', max=2)\nspace = pyp.White(ws=\" \").suppress()\n\nrevisionExpr = (\n    pyp.StringStart().leaveWhitespace() +\n    space +\n    pyp.Combine(alpha_rev + \n    pyp.Optional(num_rev)(\"rev\"))\n    )\n\nrev_string = ' K        WI, This is the title'\n\nfor match_str, start, end in (\n    revisionExpr.scanString(rev_string, maxMatches=1)):\n    print match_str\n\n['K']\n</code></pre>\n\n<p>Sometimes there is a \"Rev\" or \"Rev.\" before the revision; this fails:</p>\n\n<pre><code>revisionExpr = (\n    pyp.StringStart().leaveWhitespace() +\n    space +\n    pyp.Combine(alpha_rev + \n    pyp.Optional(num_rev)(\"rev\"))\n    |\n    pyp.CaselessLiteral(\"Rev\") + pyp.Optional('.') + \n    pyp.Combine(alpha_rev + \n    pyp.Optional(num_rev)(\"rev\"))\n    )\n\nfor match_str, start, end in (\n    revisionExpr.scanString(rev_string, maxMatches=1)):\n    print match_str\n\nprint match_str\nNameError: name 'match_str' is not defined\n</code></pre>\n\n<p>Why is \"|\" causing the the match to fail?  Note that this works with both the first and second example:</p>\n\n<pre><code>revisionTokens = revisionExpr.parseString(rev_string)\n</code></pre>\n\n<p>If I extract the second part of the last example (after the \"|\") into a form like the first example, it works if I add \"Rev.\" in front of the \"K\" in rev_string.  Unfortunately, the leading whitespace in the first expression is necessary to uniquely identifiy the revision string, otherwise, in this example, \"WI\" would match.</p>\n\n<p>I'm trying to use scanString instead of parseString because it returns the starting and ending positions of the match which helps with some later processing.</p>\n"},{"tags":["python","regex","unicode","posix"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":44,"score":3,"question_id":13261813,"title":"How to match accented characters with a regex in Python?","body":"<p>I need the solutions to <a href=\"http://stackoverflow.com/questions/7292395/how-to-match-accented-characters-with-a-regex\">this question</a>, except for Python! I've tried installing the regex library for Python, <a href=\"http://www.velocityreviews.com/forums/t739967-enabling-the-use-of-posix-character-classes-in-python.html\" rel=\"nofollow\">as apparently</a> that enables the use of POSIX expressions in Python's regexes, but nevertheless I guess it does not include Unicode characters in the <code>[:alpha:]</code> class. E.g.:</p>\n\n<pre><code>&gt;&gt;&gt; re.search(r'[[:alpha:] ]+','Please work blåbær and NOW stop 123').group(0)\n'Please work bl'\n</code></pre>\n\n<p>When I want it to match <code>Please work blåbær and NOW stop</code></p>\n\n<p><strong>EDIT:</strong> I am using Python 2.7</p>\n\n<p><strong>EDIT 2:</strong> I tried the following:</p>\n\n<pre><code>&gt;&gt;&gt; re.search(re.compile('[\\w ]+', re.UNICODE),'Please work blåbær and NOW stop 123').group(0)\n'Please work bl\\xc3'\n</code></pre>\n\n<p>Not quite what I wanted (I want to match the part after the first non-ASCII character too), but at least it matched on character more than before. What should I be doing here to get it to match the rest of what I want?</p>\n\n<p><strong>EDIT 3:</strong> I don't want to match any non-\"word\" characters; by \"word\" I mean a-z, A-Z, space, and any accented variations of word characters. I hope I got my idea across; in a phrase like</p>\n\n<pre><code>lets match força, but stop before that comma\n</code></pre>\n\n<p>I want to match only <code>lets match força</code></p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13263122,"title":"Python Module Repository","body":"<p>I was looking for something similar to perl's <code>Dumper</code> functionality in python. So after googling I found one which serves me well @ <a href=\"https://gist.github.com/1071857#file_dumper.pyamazon\" rel=\"nofollow\">https://gist.github.com/1071857#file_dumper.pyamazon</a></p>\n\n<p>So I downloaded and installed it and it works fine.</p>\n\n<p>But then I came accross PyPI: <a href=\"http://pypi.python.org/pypi\" rel=\"nofollow\">http://pypi.python.org/pypi</a> which looks like CPAN equivalent for python. </p>\n\n<p>So I searched for the Dumper module there and I could not find it there. I was hoping that this seems like a very basic module and should have been listed in PyPI.</p>\n\n<p>So my question is, if I have to install a python module, then should I search in PyPI first and if i do not find then look other places on google? </p>\n\n<p>OR is there any other Python Module repository apart from PyPI?</p>\n\n<p>I am learning python and hence this question.</p>\n\n<p>thanks.</p>\n"},{"tags":["python","django","sorting","admin","user-profile"],"answer_count":4,"favorite_count":3,"up_vote_count":5,"down_vote_count":0,"view_count":4152,"score":5,"question_id":1474135,"title":"Django Admin: Ordering of ForeignKey and ManyToManyField relations referencing User","body":"<p>I have an application that makes use of Django's <code>UserProfile</code> to extend the built-in Django <code>User</code> model.  Looks a bit like:</p>\n\n<pre><code>class UserProfile(models.Model):\n    user = models.ForeignKey(User, unique=True)\n    # Local Stuff\n    image_url_s = models.CharField(max_length=128, blank=True)\n    image_url_m = models.CharField(max_length=128, blank=True)\n\n    # Admin\n    class Admin: pass\n</code></pre>\n\n<p>I have added a new class to my model:</p>\n\n<pre><code>class Team(models.Model):\n    name = models.CharField(max_length=128)\n    manager = models.ForeignKey(User, related_name='manager')\n    members = models.ManyToManyField(User, blank=True)\n</code></pre>\n\n<p>And it is registered into the Admin:</p>\n\n<pre><code>class TeamAdmin(admin.ModelAdmin):\n    list_display = ('name', 'manager')\n\nadmin.site.register(Team, TeamAdmin)\n</code></pre>\n\n<p>Alas, in the admin inteface, when I go to select a manager from the drop-down box, or set team members via the multi-select field, they are ordered by the User numeric ID.  For the life of me, I can not figure out how to get these sorted.</p>\n\n<p>I have a similar class with:</p>\n\n<pre><code>class Meta:\n    ordering = ['name']\n</code></pre>\n\n<p>That works great!  But I don't \"own\" the <code>User</code> class, and when I try this trick in <code>UserAdmin</code>:</p>\n\n<pre><code>class Meta:\n    ordering = ['username']\n</code></pre>\n\n<p>I get:</p>\n\n<p><code>django.core.management.base.CommandError: One or more models did not validate:</code>\n<code>events.userprofile: \"ordering\" refers to \"username\", a field that doesn't exist.</code></p>\n\n<p><code>user.username</code> doesn't work either.  I could specify, like <code>image_url_s</code> if I wanted to . . . how can I tell the admin to sort my lists of users by <code>username</code>?  Thanks!</p>\n"},{"tags":["python","string","input"],"answer_count":3,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13262769,"title":"How to choose between input in Python 3.2","body":"<pre><code>input(\"Would you like to read: comedy, political, philisophical, or tragedy?\")\n\na = \"comedy\"\nb = \"political\"\nc = \"philisophical\"\nd = \"tragedy\"\n\nif a:\n    input(\"Would you like the author's nationality to be: English or French?\")\n    e = \"French\"\n    d = \"English\"\n    if e:\n        print(\"Tartuffe\")\n    elif d:\n        print(\"Taming of the Shrew\")\n</code></pre>\n\n<p>When I run the program is just defaults to comedy and then to Tartuffe.<br>\nHow do I get it to recognize the difference genres in the string?</p>\n"},{"tags":["java","python","api","graph","desktop"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13262916,"title":"interactive graph and display options","body":"<p>I'm developing a desktop app with python 2.7. I need to show some results on an interactive graph (tree view). First of all, the graph displays just the root and the next level children,  (the children for the next levels are hidden) the tree must show the children for an especific node once the user clicks on one of them, refreshing the entire tree on the same window. When the user reaches the last level, the app must provide a menu. I'm using Zest (java) and os.system(java...) for connecting java code with python, but I'm not 100% comfortable with it\nIs there an api which I can use for creating interactivity in that way, like actionListeners or something? \nthanks!</p>\n"},{"tags":["python","formencode"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13240126,"title":"FancyValidator, Validate Only When Another Variable Equals Some Value","body":"<p>I have a Formencode schema something like the following</p>\n\n<pre><code>Class CustomMake(Schema):\n    name     = validators.String( not_empty = True )\n    quantity = validators.Int( not_empty = True )\n\nClass Car( Schema ):\n    do_custom   = validators.StringBool( not_empty = True )\n    custom      = CustomMake(   )\n</code></pre>\n\n<p>What I would like to do is create a condition when, if <code>do_custom</code> in <code>Car</code> is equal to <code>True</code> then <code>CustomMake</code> schema would be called and validated. If it's not True then just ignore testing it. </p>\n\n<p>I tried to get value of <code>do_custom</code> inside a custom <code>FormValidator</code> class for <code>CustomMake</code> but, the <code>value_dict</code> of <code>def _to_python</code> does not include elements not in its own dictionary.</p>\n\n<p>This got me thinking that the way to do this was with some condition test for schema - something akin to the way the compound elements <code>any</code> and <code>foreach</code> work. </p>\n\n<p>This is the working solution for now. </p>\n\n<ol>\n<li>Use pre_validator to copy the value into another dict</li>\n<li>A validator which checks for 'emptyness' when another value is true</li>\n</ol>\n\n<pre><code>class preCopyValue( FancyValidator ):\n\n    __unpackargs__ = ('value_from', 'value_to')\n\n    def _get_values_by_name( self, values, name ):\n        current = values\n        paths = name.split( '.' )\n        for path in paths:\n            current = current.get( path, {} )\n        return current\n\n    def _set_values_by_name( self, values, name, value ):\n        current = values\n        paths   = name.split( '.' )\n        for path in paths[:-1]:\n            current = current.get( path, {} )\n        current[paths[-1]] = value\n        return values\n\n    def _to_python(self, values, state):\n        value  = self._get_values_by_name( values, self.value_from )\n        values =  self._set_values_by_name( values, self.value_to, value )\n        return values\n\n\nclass NotEmptyIfChecked( FormValidator ):\n\n    checked = None\n    __unpackargs__ = ( 'field', )\n\n    def _to_python(self, value_dict, state):\n        is_checked     = value_dict.get( self.checked )\n        if is_checked is not True:\n            return value_dict\n\n        field = value_dict.get( self.field )\n        if not field:\n            raise Invalid(\n                'Enter a value for %s' % self.field,\n                value_dict, state,\n                error_dict={  self.field :\n                                Invalid(self.message('empty', state),\n                                        value_dict.get( self.field ), state)})\n        return value_dict\n</code></pre>\n\n<p>Finally update the schemas</p>\n\n<pre><code>Class CustomMake(Schema):\n    do_custom = validators.StringBool(  )\n    name     = validators.String( )\n    quantity = validators.Int( )\n\n    chained_validators = [ NotEmptyIfChecked( 'name',  checked='do_custom' ),\n                           NotEmptyIfChecked( 'quantity',  checked='do_custom' ) ]\n\nClass Car( Schema ):\n    do_custom   = validators.StringBool( not_empty = True )\n    custom      = CustomMake(   )\n\n    pre_validators = [ preCopyValue( 'do_custom', 'custom.do_custom' ) ]\n</code></pre>\n\n<p>Any Suggestions on a cleaner way to do the above?</p>\n"},{"tags":["javascript","python","closures"],"answer_count":2,"favorite_count":2,"up_vote_count":7,"down_vote_count":0,"view_count":321,"score":7,"question_id":5910146,"title":"Difference between closures in python and javascript","body":"<p>In JS, we can write closure like:</p>\n\n<pre><code>function f(){\nvar a=0;\nfunction g(){\n    alert(a++);\n}\nreturn g;\n}\ng=f()\ng()\n</code></pre>\n\n<p>However, if I write following code in python</p>\n\n<pre><code>def f():\n    a=0\n    def g():\n        a+=1\n        print a\n    return g\ng=f()\ng()\n</code></pre>\n\n<p>Then I get <em>UnboundedLocalError</em>.</p>\n\n<p>Can anyone tell me the difference between closure in python and JS?</p>\n"},{"tags":["python","ajax","google","application","engine"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13262824,"title":"Ajax python how to post data","body":"<p>Sorry guys, maybe this has been asked before. But I googled around for several days and still cannot solve the problem. I am developing a chatting system using Google App Engine with Python. I would like the user to enter her/his message and click \"Submit\" button. That action will trigger an Ajax post function \"addMsg()\" to POST the message to class Chat (URL: \"/chat\"), which will add the message to datastore. There is another Ajax function \"updateMsg()\" which will update the message list periodically.</p>\n\n<p>The code works fine for message updating, however, I am not able to post the message correctly. Can anybody help me? Thanks. Here are my codes:</p>\n\n<h2>chat.html:</h2>\n\n<pre><code>    &lt;p&gt;\n    &lt;form method=\"\" action=\"\"&gt;\n    &lt;input type=\"text\" name=\"message\" size=\"60\" /&gt;&lt;br /&gt;\n    &lt;input type=\"button\" value=\"Submit\" onclick=\"addMsg('message')\" /&gt;\n    &lt;/form&gt;\n    &lt;/p&gt;\n    &lt;div id=\"chatcontent\"&gt; &lt;/div&gt;\n    &lt;script&gt;\n    function addMsg(message) {\n        $.ajax({\n            type: \"POST\",\n            url: \"/chat\",\n            data: {'message': message},\n            cache: false\n        });\n    }\n    &lt;/script&gt;\n\n    &lt;script&gt;\n    $(document).ready(function() {\n        function updateMsg() {\n            $.ajax({\n               url: \"/message\",\n               cache: false,\n               success: function(returndata){\n                    $(\"#chatcontent\").html(returndata);\n               }\n            });\n            setTimeout(updateMsg, 4000);\n        }\n        updateMsg();\n    });\n    &lt;/script&gt;\n</code></pre>\n\n<h2>message.html:</h2>\n\n<pre><code>    {% for chat in chatlist %}\n    &lt;p&gt;\n      {{ chat.text }} ({{ chat.user.account }}) {{chat.created|date:\"D d M Y\" }}\n    &lt;/p&gt;\n    {% endfor %}\n</code></pre>\n\n<h2>chat.py:</h2>\n\n<pre><code>    # Called by URL \"/chat\"\n    class Chat(webapp2.RequestHandler):\n        def post(self):\n            message = self.request.get('message')\n            newchat = ChatMessage(user=self.session['userkey'], text=message, created=datetime.datetime.now())\n    newchat.put()\n\n    # Called by URL \"/message\"\n    class Message(webapp2.RequestHandler):\n        def get(self):\n            que = db.Query(ChatMessage).order('-created')\n            chatlist = que.fetch(limit=100)\n            render(self, 'message.html', {'chatlist': chatlist})\n            # Note: render() is a function to be imported, which is just a normal template rendering function. It works fine and is omitted here.\n</code></pre>\n"},{"tags":["python","python-3.x"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":2,"view_count":52,"score":1,"question_id":13262864,"title":"Filtering a list in Python","body":"<p>Source list of dictionaries</p>\n\n<pre><code>[\n    {'main_id': 0, '_id': ObjectId('111111111111111'), 'key1': 'val1'}, \n    {'main_id': 1, '_id': ObjectId('222222222222222'), 'key1': 'val2'}, \n    {'main_id': 1, '_id': ObjectId('333333333333333'), 'key1': 'val3'}, \n    {'main_id': 4, '_id': ObjectId('444444444444444'), 'key1': 'val4'},\n    {'main_id': 2, '_id': ObjectId('555555555555555'), 'key1': 'val5'},\n]\n</code></pre>\n\n<p>filtered list of dictionaries</p>\n\n<pre><code>[\n    {'main_id': 0, '_id': ObjectId('111111111111111'), 'key1': 'val1'}, \n    {'main_id': 1, '_id': ObjectId('222222222222222'), 'key1': 'val2'}, \n    {'main_id': 2, '_id': ObjectId('555555555555555'), 'key1': 'val3'},\n]\n</code></pre>\n\n<p>I want to get a new list of dictionaries:</p>\n\n<pre><code>[\n    {'main_id': 1, '_id': ObjectId('333333333333333'), 'key1': 'val3'}, \n    {'main_id': 4, '_id': ObjectId('444444444444444'), 'key1': 'val4'},\n]\n</code></pre>\n\n<p>in other words, I want a new list to contain values that don't exist in a filtered list.\nYour ideas?</p>\n"},{"tags":["python","mysql","macports"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":68,"score":0,"question_id":12439362,"title":"Installing MySQL driver for Python on Mac","body":"<p>I am running MAMP and Python as CGI. I want to connect MySQL. I tried MySQLDb by installing it with pip but it did not work and python could not locate MySQLDb at all.</p>\n\n<p>Can you tell me how can I install it by using Macport provider I already have Apache,MySQL and Python 2.6 installed?</p>\n\n<p>Thanks</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Installing via pip gave following O/P:</p>\n\n<blockquote>\n  <p>Downloading/unpacking mysql-python   Downloading\n  MySQL-python-1.2.3.tar.gz (70Kb): 70Kb downloaded   Running setup.py\n  egg_info for package mysql-python\n      warning: no files found matching 'MANIFEST'\n      warning: no files found matching 'ChangeLog'\n      warning: no files found matching 'GPL' Installing collected packages: mysql-python   Running setup.py install for mysql-python\n      building '_mysql' extension\n      /usr/bin/gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -pipe -O2 -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -Dversion_info=(1,2,3,'final',0) -D_<em>version</em>_=1.2.3 -I/usr/local/Cellar/mysql/5.5.15/include -I/opt/local/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6\n  -c _mysql.c -o build/temp.macosx-10.6-x86_64-2.6/_mysql.o -g\n      In file included from _mysql.c:36:\n      /usr/local/Cellar/mysql/5.5.15/include/my_config.h:330:1: warning: \"SIZEOF_SIZE_T\" redefined\n      In file included from /opt/local/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/Python.h:9,\n                       from pymemcompat.h:10,\n                       from _mysql.c:29:\n      /opt/local/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/pymacconfig.h:37:1:\n  warning: this is the location of the previous definition\n      In file included from _mysql.c:36:\n      /usr/local/Cellar/mysql/5.5.15/include/my_config.h:423:1: warning: \"HAVE_WCSCOLL\" redefined\n      In file included from /opt/local/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/Python.h:8,\n                       from pymemcompat.h:10,\n                       from _mysql.c:29:\n      /opt/local/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6/pyconfig.h:808:1:\n  warning: this is the location of the previous definition\n      /usr/bin/gcc-4.2 -L/opt/local/lib -bundle -undefined dynamic_lookup build/temp.macosx-10.6-x86_64-2.6/_mysql.o\n  -L/usr/local/Cellar/mysql/5.5.15/lib -lmysqlclient_r -lpthread -lz -lssl -lcrypto -o build/lib.macosx-10.6-x86_64-2.6/_mysql.so\n      warning: no files found matching 'MANIFEST'\n      warning: no files found matching 'ChangeLog'\n      warning: no files found matching 'GPL' Successfully installed mysql-python Cleaning </p>\n</blockquote>\n\n<p>I am using the MySQL shipped with MAMP. I had also set PATH to Binary of MySQL within MAMP folder</p>\n\n<p><strong>Another Update</strong></p>\n\n<p>Turned out that Mysql-Python egg did not install at all in:</p>\n\n<p><strong>/Library/Python/2.6/site-packages</strong></p>\n\n<p>What am I missing?</p>\n"},{"tags":["python","function","unique"],"answer_count":6,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13245305,"title":"Python- creating a function to get a unique list from unknown number of arguments","body":"<p>New to python-can someone tell me what I am doing wrong?</p>\n\n<p>I need to write a function that takes unknown number of arguments and returns a unique list. \nFor example:</p>\n\n<pre><code>a= ['mary', 'james', 'john', 'john']\nb= ['elsie', 'james', 'elsie', 'james']\n\nunique_list(a,b)\n\n['mary', 'james','john', 'elsie']\n</code></pre>\n\n<p>This is some of the code I have after doing some research but the output is not what I need:</p>\n\n<pre><code>def unique_list:(*something)\n    result1= list(something)\n    result = ' '.join(sum(result1, []))\n    new= []\n    for name in result:\n            if name not in new:\n                           new.append(name)\n    return new\n</code></pre>\n\n<pre>       \n>>> unique_list(a,b)\n['m', 'a', 'r', 'y', ' ', 'j', 'e', 's', 'o', 'h', 'n', 'l', 'i']\n</pre>\n\n<p>This is another one I have tired:</p>\n\n<pre><code>def unique_list(*something):\n    result= list(something) \n    new=[]\n    for name in result:\n        if name not in new:\n            new.append(name)\n    return new\n</code></pre>\n\n<pre>\n>>> unique_list(a,b)\n[['mary', 'james', 'john', 'john'], ['elsie', 'james', 'elsie', 'james']]\n</pre>\n\n<p>Another one but I got an error message:</p>\n\n<pre><code>def single_list(*something):\n    new=[]\n    for name in something:\n        if name not in new:\n            new.append(name)\n    new2= list(set(new))\n    return new2\n</code></pre>\n\n<pre>\n>>> single_list(a,b)\nTraceback (most recent call last):\n  File \"\", line 1, in \n    single_list(a,b)\n  File \"\", line 6, in single_list\n    new2= list(set(new))\nTypeError: unhashable type: 'list'\n</pre>\n\n<p>Any ideas? Thank you in advance for all your help.</p>\n"},{"tags":["python","correlation"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":13262654,"title":"Calculating correlations between every item in a list","body":"<p>I'm trying to calculate the Pearson correlation correlation between every item in my list. I'm trying to get the correlations between data[0] and data[1], data[0] and data[2], and data[1] and data[2].</p>\n\n<pre><code>import scipy\nfrom scipy import stats\n\ndata = [[1, 2, 4], [9, 5, 1], [8, 3, 3]]\n\ndef pearson(x, y):\n    series1 = data[x]\n    series2 = data[y]\n    if x != y:\n        return scipy.stats.pearsonr(series1, series2)\n\nh = [pearson(x,y) for x,y in range(0, len(data))]\n</code></pre>\n\n<p>This returns the error <code>TypeError: 'int' object is not iterable</code> on <code>h</code>. Could someone please explain the error here? Thanks.</p>\n"},{"tags":["python","list","unique"],"answer_count":12,"favorite_count":19,"up_vote_count":69,"down_vote_count":0,"view_count":41159,"score":69,"question_id":480214,"title":"How do you remove duplicates from a list in Python whilst preserving order?","body":"<p>Is there a built-in that removes duplicates from list in Python, whilst preserving order? I know that I can use a set to remove duplicates, but that destroys the original order. I also know that I can roll my own like this:</p>\n\n<pre><code>def uniq(input):\n  output = []\n  for x in input:\n    if x not in output:\n      output.append(x)\n  return output\n</code></pre>\n\n<p>(Thanks to <a href=\"http://stackoverflow.com/users/28169/unwind\">unwind</a> for that <a href=\"http://stackoverflow.com/questions/479897/how-do-you-remove-duplicates-from-a-list-in-python#479921\">code sample</a>.)</p>\n\n<p>But I'd like to avail myself of a built-in or a more Pythonic idiom if possible.</p>\n\n<p>Related question: <a href=\"http://stackoverflow.com/questions/89178/in-python-what-is-the-fastest-algorithm-for-removing-duplicates-from-a-list-so-t\">In Python, what is the fastest algorithm for removing duplicates from a list so that all elements are unique <em>while preserving order</em>?</a></p>\n"},{"tags":["python","mysql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13262598,"title":"Error occur installing MySQL-Python","body":"<p>An error occurs while installing MySQL - python to 'python version v2.7 required, which was not found in regstry'. What should I do? Note that I used python v2.7.3, win7 64bit</p>\n"},{"tags":["python","command-line","syntax","windows-8"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":45,"score":0,"question_id":13261938,"title":"Installed Python on Windows 8, getting syntax errors on simple statements","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/826948/syntax-error-on-print-with-python-3\">Syntax error on print with Python 3</a>  </p>\n</blockquote>\n\n\n\n<p>For example, if I just start python from the command line with \"python\" then run something like </p>\n\n<p><code>print \"test\"</code></p>\n\n<p>It throws a syntax error. That's really odd, but statements like</p>\n\n<p><code>1+1</code></p>\n\n<p>Work fine.</p>\n"},{"tags":["python","append"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":5,"view_count":60,"score":-3,"question_id":13261264,"title":"Request for yet another one liner in Python","body":"<p>Can you guys think of any one liners equal to if/else statements:</p>\n\n<pre><code>d = dict()\n\nkey = 1, 2\n\nif key in d:\n    d[key]['idx'] += [2]\nelse:\n    d[key] = {'idx': [2]}\n\nprint d\n</code></pre>\n\n<p>?</p>\n\n<p>EDIT:\nThanks guys. You narrowed me to collection.defaultdict &amp; dict.setdafault and with this in mind I was able to achieve what I wanted:</p>\n\n<pre><code>from collections import defaultdict\n\nd = dict()\nkey = 1, 2\nd.setdefault(key, {'idx': []})\nd[key]['idx'] += [2]\n</code></pre>\n\n<p>Maybe it is not one liner as it spreads over 2 lines (setdefault() call and then in place addition), but looks nicer though.</p>\n\n<p>But still, if anyone have any ideas how to make it real one liner please share it.</p>\n"},{"tags":["python","list"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13258312,"title":"Python adding lists into a single list with only elements","body":"<p>Sorry for the awkward title but I'll explain better here;</p>\n\n<p>In the function below;</p>\n\n<pre><code>def returnList():\n  list = []\n  for i in xrange(4):\n    list.append(i)\n\n  return list\n</code></pre>\n\n<p>It returns the list [0,1,2,3]. In another function;</p>\n\n<pre><code>def returnAllLists():\n  totalList = []\n  for i in xrange(4):\n    totalList.append(returnList())\n\n  return totalList\n</code></pre>\n\n<p>As expected it turns a result like <pre>[[1,2,3,4],[1,2,3,4],[1,2,3,4],[1,2,3,4]]</pre>. The tricky part is that I need the result <pre>[1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4]</pre>. I can of course easily assign the result of returnAllList to another list <b>and go for two loops and insert the elements individually into another list</b> however I think a more efficient way could be done since my method has an <b>O(N^2)</b> complexity just for assigning same values in a different way. Any suggestions?</p>\n"},{"tags":["python","data-structures"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13262382,"title":"Find maximum value in a list of dictionaries","body":"<p>Given a data structure:</p>\n\n<pre><code>   [\n    {'id':0, 'items': \n      [\n       {'id': 0,  name: \"Tom1\", age: 10}, \n       {'id': 0, name: \"Mark1\", age: 15}, \n       {'id': 0, name: \"Pam1\", age: 17}\n      ]\n    },\n    {'id':1, 'items': \n      [\n       {'id': 1,  name: \"Tom12\", age: 8}, \n       {'id': 1, name: \"Mark12\", age: 3}, \n       {'id': 1, name: \"Pam12\", age: 2}\n      ]\n    },\n\n    {'id':2, 'items': \n      [\n       {'id': 2,  name: \"Tom13\", age: 55}, \n       {'id': 2, name: \"Mark13\", age: 66}, \n       {'id': 2, name: \"Pam13\", age: 77}\n      ]\n    },\n  ]\n</code></pre>\n\n<p>I want to find an item in each dictionary where age has maximum value and select it. How do I achieve that?</p>\n"},{"tags":["python","mongodb"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13261511,"title":"What is the best data structure for embedded docs MongoDB?","body":"<p>Suppose each of my users can save many \"smart searches\":</p>\n\n<pre><code>user = {\n    'username':'johncit',\n    'smart_searches': [\n        {'name':'last 24 hrs','terms':{'modifiedby':datetime(2012,1,1),'title':'foobar'}},\n        {'name':'blabla','terms':{'title':'whatever','otherfield':500}}\n            ]\n        }\n</code></pre>\n\n<p>Now say John hits his 'blabla' search.  How do I get the terms?  I can get all John's smart searches like this:</p>\n\n<pre><code>db.Users.find_one({\n        'username':'johncit','smart_searches':{'$elemMatch':{'Name':'blabla'}}})\n</code></pre>\n\n<p>But this returns the whole document, not just the terms for the 'blabla' search, which is what I really need.  Do I then have to figure out the precise terms on the client-side?  Or is this a case for putting 'smart_searches' in their own collection?  Is there a better structure?</p>\n\n<p>I would love to hear your thoughts.</p>\n"},{"tags":["python","decorator","prepend","docstring"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13262320,"title":"Prepending a function docstring with a decorator in python","body":"<p>How would you be able to prepend a functions docstring with a decorator?</p>\n\n<pre><code>def g(func):\n    someOtherDocString = \"That is great\"\n    def wrap(*args, **kwargs):\n        func(*args, **kwargs)\nreturn wrap\n\n@g\ndef f():\n\"\"\" This is awesome \"\"\"\n</code></pre>\n\n<p>result:</p>\n\n<blockquote>\n  <blockquote>\n    <blockquote>\n      <p>help(f)</p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n<pre><code>Help on function f in module __main__:\n\nf()\n    That is great\n    That is awesome\n</code></pre>\n\n<p>All the help woudl be greatly appreciated.</p>\n"},{"tags":["python","python-2.7"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13262173,"title":"Please help understanding how the 'return' statement is used in this example","body":"<p>I'm currently learning python using Learn Python the Hard Way and really enjoying it. In one of the lesson examples, there is a use of 'return' that I fail to grasp.</p>\n\n<p>The lesson I'm stuck on is <a href=\"http://learnpythonthehardway.org/book/ex43.html\" rel=\"nofollow\">Exercise 43: Gothons From Planet Percal #25</a>. I understand that when the game is first run <code>next_room_name</code> is set to <code>central_corridor</code> and so <code>central_corridor()</code> is called during the first loop under <code>play()</code>.\nWhat I don't understand is how <code>self.start</code> get's re-assigned.</p>\n\n<p>For example, in the instance of <code>death</code> being returned under <code>central_corridor()</code>. After the return on line 49, we're back in the <code>play(self): while True</code> loop. The first line is <code>next_room_name = self.start</code> As far as I know, <code>self.start</code> still equals <code>central_corridor</code>, but it apparently is now equalling <code>death</code>.</p>\n\n<p>Does this mean that after <code>death</code> is returned, and still in the <code>while</code> loop under <code>play()</code>, the object <code>Game()</code> has been reinitialized, the <code>__init__</code> being fed the results of the return? I'm confused how the <code>next_room_name = self.start</code> under <code>__init__</code> is being reassigned to <code>death</code> when we're technically still in the <code>play(self): while True</code> loop and haven't exited it. I guess I'm confused as to where <code>death</code> is being returned to.</p>\n"},{"tags":["python","unit-testing"],"answer_count":8,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":2262,"score":3,"question_id":4095319,"title":"Unittest tests order","body":"<p>How do I be sure of the unittest methods order? Is the alphabetical or numeric prefixes the proper way?</p>\n\n<pre><code>class TestFoo(TestCase):\n    def test_1(self):\n        ...\n    def test_2(self):\n        ...\n</code></pre>\n\n<p>or</p>\n\n<pre><code>class TestFoo(TestCase):\n    def test_a(self):\n        ...\n    def test_b(self):\n        ...\n</code></pre>\n"},{"tags":["python","regex"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":22,"score":2,"question_id":13262022,"title":"Regex issue in python: try to detect `column` datatype(digits)","body":"<p>I want to distinquish strings like </p>\n\n<pre><code>`citizen_group` int(10) NOT NULL,\n`container_group` int(10) NOT NULL,\n</code></pre>\n\n<p>from strings like</p>\n\n<pre><code>PRIMARY KEY (`citizen_group`,`container_group`),\nKEY `fk_containergroup_readeraccess` (`container_group`)\n</code></pre>\n\n<p>Therefor I've created this regex</p>\n\n<pre><code>`?\\w+`?\\s\\w+\\(d+(,\\s?\\d+)?\\)\n   ^\n\n*\\w+`*   : string, wrapped in ` is possible.                `column`\n\\s       : followed by a space                       \n\\w+      : followed by one or more characters                real\n\\(d+     : followd by ( with one or more digits              (10\n(,\\s?\\d)?: followed by 0 or 1 , with digits                  ,3\n\\)       : end with a )                                      )\n</code></pre>\n\n<p>But this regex selects not only to first 2 strings, but also the last</p>\n\n<pre><code>KEY `fk_containergroup_readeraccess` (`container_group`)\n</code></pre>\n\n<p>Can someone tell me why this is? And how I need to modify the regex so that it selects only the first two?</p>\n"},{"tags":["python","response","wait","telnetlib"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13262276,"title":"python telnetlib module: reading and waiting for responses","body":"<p>I am having a similar problem to this poster: </p>\n\n<p><a href=\"http://stackoverflow.com/questions/4000957/python-telnetlib-surprising-problem/13262236#13262236\">Python telnetlib: surprising problem</a></p>\n\n<p>Note the response and my response below it. </p>\n\n<p>Essentially telnetlib is not letting me read an entire response when calling any of the read functions.</p>\n\n<p>when calling telnet.read_very_eager() after using select.select([telnetobject],[],[]) in a while loop to make sure reading is available, the only thing I will get are a few characters. The only solution so far I am able to come up with is using time.sleep() but it is too crude of a solution and am looking for something that fits better. Any help appreciated...</p>\n"},{"tags":["python","numpy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13261455,"title":"Numpy setting j, j+1, j+2 to a","body":"<p>Is there a short-code efficient way of \"glueing\" two arrays together such that if the arrays differ in length then the glued product must be such that the values from the longer are filled between values from the smaller untill the the new product has the same length as sum of the length of the two arrays? Or: Is there a way to create an array where x = [a j j j b j j j ], that is to say, take array that has values [a b], create a new one by filling 3 js between each element of that array to get : [a j j j b]</p>\n\n<p>There is the obvious way of doing this by a loop since I know the size of the product beforehand but I suspect there must be a more \"numpyic\" solution at hand.</p>\n\n<p>It is easy to do when both arrays I want to \"glue\" are of the same size and the product is [a j b j c j], ie every other as can be seen in this:</p>\n\n<pre><code>np.append(np.zeros((10,1)),np.ones((10,1)),1).reshape(2*10)\narray([ 0.,  1.,  0.,  1.,  0.,  1.,  0.,  1.,  0.,  1.,  0.,  1.,  0.,\n    1.,  0.,  1.,  0.,  1.,  0.,  1.])\nbut you cannot do\nnp.append(np.zeros((10,1)),np.ones((20,1)),1).reshape(20+10)\n</code></pre>\n\n<p>I apologize if the question isn't clear enough, please do tell which parts I can clarify, my English is broken.</p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13262066,"title":"Find a minimal value in each array in Python","body":"<p>Suppose I have the following data in Python 3.3:</p>\n\n<pre><code>my_array = \n   [{'man_id': 1, '_id': ObjectId('1234566'), 'type': 'worker', 'value': 11}, \n   {'man_id': 1, '_id': ObjectId('1234577'), 'type': 'worker', 'value': 12}],\n\n   [{'man_id': 2, '_id': ObjectId('1234588'), 'type': 'worker', 'value': 11}, \n    {'man_id': 2, '_id': ObjectId('3243'), 'type': 'worker', 'value': 7},\n    {'man_id': 2, '_id': ObjectId('54'), 'type': 'worker', 'value': 99},\n    {'man_id': 2, '_id': ObjectId('9879878'), 'type': 'worker', 'value': 135}],\n   #.............................\n   [{'man_id': 13, '_id': ObjectId('111'), 'type': 'worker', 'value': 1}, \n    {'man_id': 13, '_id': ObjectId('222'), 'type': 'worker', 'value': 2},\n    {'man_id': 13, '_id': ObjectId('3333'), 'type': 'worker', 'value': 9}]\n</code></pre>\n\n<p>There are 3 arrays. How do I find  an element in each array with minimal value?</p>\n"},{"tags":["python","pandas"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13261855,"title":"`pandas.DataFrame.apply` in a row by row operation","body":"<p>I would like to return a dataFrame with each row sorted (let's say descending).  So if I have the <code>pandas.DataFrame</code> named <code>data</code>:</p>\n\n<pre><code>In [38]: data\nOut[38]: \n                  c1        c2        c3        c4        c5        c6\nDate                                                                  \n2012-10-22  0.973371  0.226342  0.968282  0.872330  0.273880  0.746156\n2012-10-19  0.497048  0.351332  0.310025  0.726669  0.344202  0.878755\n2012-10-18  0.315764  0.178584  0.838223  0.749962  0.850462  0.400253\n2012-10-17  0.162879  0.068409  0.704094  0.712860  0.537545  0.009789\n</code></pre>\n\n<p>I would like the following returned:</p>\n\n<pre><code>In [39]: sorted_frame\nOut[39]: \n                   0         1         2         3         4         5\nDate                                                                  \n2012-10-22  0.973371  0.968282  0.872332  0.746156  0.273880  0.226342\n2012-10-19  0.878755  0.726669  0.497048  0.351332  0.344202  0.310025\n2012-10-18  0.850462  0.838223  0.749962  0.400253  0.315764  0.178584\n2012-10-17  0.712860  0.704094  0.537545  0.162879  0.068409  0.009789\n</code></pre>\n\n<p>I've tried <code>DataFrame.sort(axis = 1)</code> however, that doesn't achieve the desired result:</p>\n\n<pre><code>In [40]: data.sort(axis = 1)\nOut[43]: \n                  c1        c2        c3        c4        c5        c6\nDate                                                                  \n2012-10-22  0.973371  0.226342  0.968282  0.872330  0.273880  0.746156\n2012-10-19  0.497048  0.351332  0.310025  0.726669  0.344202  0.878755\n2012-10-18  0.315764  0.178584  0.838223  0.749962  0.850462  0.400253\n2012-10-17  0.162879  0.068409  0.704094  0.712860  0.537545  0.009789\n</code></pre>\n\n<p>I've created the following function that accomplishes what I'm looking for (using the <code>pandas.TimeSeries.order()</code>):</p>\n\n<pre><code>import numpy\n\ndef sorted_by_row(frame, ascending = False):\n    vals = numpy.tile(numpy.nan,frame.shape)\n    for row in numpy.arange(frame.shape[0]):\n        vals[row, :] = frame.ix[row, :].order(ascending = ascending)\n    return pandas.DataFrame(vals, index = frame.index)\n</code></pre>\n\n<p>However, my goal is to be able to use a row-wise function in the <code>DataFrame.apply()</code> method (so I can apply the desired functionality to other functions I build).  I've tried:</p>\n\n<pre><code> #TimeSeries.order() sorts a pandas.TimeSeries object\n data.apply(lambda x: x.order(), axis = 1)\n</code></pre>\n\n<p>But again, I'm not getting the desired <code>DataFrame</code> above (I've outputted enough <code>DataFrame'</code>s so I'll spare the page the real estate).</p>\n\n<p>Your help is greatly appreciated,</p>\n\n<p>-B</p>\n"},{"tags":["python","telnet","telnetlib"],"answer_count":2,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":1525,"score":2,"question_id":4000957,"title":"Python telnetlib: surprising problem","body":"<p>I am using the Python module telnetlib to create a telnet session (with a chess server), and I'm having an issue I really can't wrap my brain around. The following code works perfectly:</p>\n\n<pre><code>&gt;&gt;&gt; f = login(\"my_server\") #code for login(host) below.\n&gt;&gt;&gt; f.read_very_eager()\n</code></pre>\n\n<p>This spits out everything the server usually prints upon login. However, when I put it inside a function and then call it thus:</p>\n\n<pre><code>&gt;&gt;&gt; def foo():\n...   f = login(\"my_server\")\n...   return f.read_very_eager()\n...\n&gt;&gt;&gt; foo()\n</code></pre>\n\n<p>I get nothing (the empty string). I can check that the login is performed properly, but for some reason I can't see the text. So where does it get swallowed?</p>\n\n<p>Many thanks.</p>\n\n<p>For completeness, here is login(host):</p>\n\n<pre><code>def login(host, handle=\"guest\", password=\"\"):\ntry:\n    f = telnetlib.Telnet(host) #connect to host\nexcept:\n    raise Error(\"Could not connect to host\")\nf.read_until(\"login: \")\ntry:\n    f.write(handle + \"\\n\\r\")\nexcept:\n    raise Error(\"Could not write username to host\")\nif handle == \"guest\":\n    f.read_until(\":\\n\\r\")\nelse:\n    f.read_until(\"password: \")\ntry:\n    f.write(password + \"\\n\\r\")\nexcept:\n    raise Error(\"Could not write password to host\")\nreturn f\n</code></pre>\n"},{"tags":["python","pool","ioerror"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13262182,"title":"Python Multiprocessing IOError: [Errno 22] invalid mode ('w+') or filename:","body":"<p>I have a function that works fine when I set it up as: </p>\n\n<pre><code>result=map(myFunction,dataList)\n</code></pre>\n\n<p><code>myFunction</code> writes and reads a file to HDD.</p>\n\n<p>However when I rewrite it as <code>result=pool.map(myFunction,dataList)</code> (after invoking multiprocessing etc). I get the error:</p>\n\n<blockquote>\n  <p>IOError: [Errno 22] invalid mode ('w+') or filename:followed by path of file and filename. </p>\n</blockquote>\n\n<p>This file appears to be written - but when reading there seems to be a problem.</p>\n\n<p>Has anyone experienced this? </p>\n"},{"tags":["python","django","celery","newrelic-rpm"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13262170,"title":"Stop New Relic / Celery From Polluting Logs on Heroku","body":"<h1>Question</h1>\n\n<p>How can you stop New Relic / Celery from constantly printing the below to Heroku's log.</p>\n\n<pre><code>app[scheduler.1]: [INFO/MainProcess] Starting new HTTP connection (1): collector-6.newrelic.com\napp[scheduler.1]: [INFO/MainProcess] Starting new HTTP connection (1): collector-6.newrelic.com\napp[scheduler.1]: [INFO/MainProcess] Starting new HTTP connection (1): collector-6.newrelic.com\napp[scheduler.1]: [INFO/MainProcess] Starting new HTTP connection (1): collector-6.newrelic.com\n</code></pre>\n\n<h2>Setup</h2>\n\n<p>The above log entries appear every minute. The app reporting this is a celery worker started via <code>Procfile</code> that reads (in part):</p>\n\n<pre><code>scheduler: newrelic-admin run-program python manage.py celery worker --loglevel=ERROR -B -E --maxtasksperchild=1000\n</code></pre>\n\n<p>Despite setting <code>loglevel</code> to <code>ERROR</code> it appears that celery is ignoring this argument. Interestingly enough, on my local machine, this setting is respected.</p>\n\n<h3>Versions</h3>\n\n<pre><code>celery==3.0.12\ndjango-celery==3.0.11\nnewrelic==1.6.0.13\n</code></pre>\n"},{"tags":["c++","python","unix"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":38,"score":2,"question_id":13261843,"title":"Python receives SIGSEGV while loading C++ written extension module","body":"<p>Right code example:</p>\n\n<pre><code>#include \"Python.h\"\n#include &lt;string&gt;\n\nextern const int someConstant;\n\nvoid some_function()\n{\n  const char *begin = NULL;\n  const char *end = NULL;\n\n  std::string s(begin, end);\n  const int v = someConstant;\n}\n\nstatic PyMethodDef _G_methods[] =\n{\n    {NULL, NULL, 0, NULL}        /* Sentinel */\n};\n\nPyMODINIT_FUNC initsf()\n{\n  PyObject *module;\n\n  if (!(module = Py_InitModule(\"sf\", _G_methods)))\n  {\n    return;\n  }\n\n  PyObject *pyerror = PyErr_NewException(\"fs.error\", NULL, NULL);\n  Py_INCREF(pyerror);\n\n\n  PyModule_AddObject(module, \"error\", pyerror);\n}\n</code></pre>\n\n<p>This is extension module draft. As simple as possible. It has an empty method table and initializer function copied from original <a href=\"http://docs.python.org/2/extending/extending.html\" rel=\"nofollow\">docpage</a>. It contains 2 (two) intentional errors:</p>\n\n<ul>\n<li><p>variable someConstant declared but never defined;</p></li>\n<li><p>function some_function defined, but never called;</p></li>\n</ul>\n\n<p>If compiled and opened by dlopen/dlsym:</p>\n\n<pre><code>sf.so: undefined symbol: someConstant\n</code></pre>\n\n<p>as required. But if loaded by Python interpreter:</p>\n\n<pre><code>&gt;&gt;&gt; from sf import *\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>and the most strange is python's backtrace dumped from core-file:</p>\n\n<pre><code>#0  0x00000bd6 in ?? ()\n#1  0xb775c057 in char* std::string::_S_construct&lt;char const*&gt;(char const*, char const*, std::allocator&lt;char&gt; const&amp;, std::forward_iterator_tag) () from /usr/local/lib/python2.7/dist-packages/sf.so\n#2  0xb6f9abb6 in std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::basic_string(char const*, std::allocator&lt;char&gt; const&amp;) () from /usr/lib/i386-linux-gnu/libstdc++.so.6\n#3  0xb6c3fe30 in pkgInitConfig(Configuration&amp;) () from /usr/lib/i386-linux-gnu/libapt-pkg.so.4.12\n#4  0xb6cf959e in ?? () from /usr/lib/python2.7/dist-packages/apt_pkg.so\n#5  0x081949c1 in PyEval_EvalFrameEx ()\n#6  0x0819af70 in PyEval_EvalCodeEx ()\n#7  0x0819bb03 in PyImport_ExecCodeModuleEx ()\n#8  0x0814bd40 in ?? ()\n#9  0x080a38c2 in ?? ()\n#10 0x0814c6d4 in ?? ()\n#11 0x081031ae in ?? ()\n...\n</code></pre>\n\n<p>It seems, Python's loader calls std::string constructor :-).</p>\n\n<p>So, stack corrupted. It happens either while loading invalid module or while unloading it after error handled. It never happens if sample code is little changed. This behavior has been observed on Python 2.7.3/Linux Ubuntu 10/gcc 4.6.3 and definitely not shown on Python 2.7.1/FreeBSD 8.1/gcc 4.2.1.</p>\n\n<p>Question:</p>\n\n<ol>\n<li>Is it a Python's bug or my sample code has errors?</li>\n</ol>\n"},{"tags":["python","simulation","particle"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":2,"view_count":43,"score":-2,"question_id":13262141,"title":"Python - Particle Simulation","body":"<p>Imagine a \"particle\" located on the centre square of a two‑dimensional grid of dimensions 11 by 75. The particle can only move one square at a time, either up, down, left, or right. Associated with each possible motion are the following probabilities:</p>\n\n<p>Up 1/12</p>\n\n<p>Down 1/12</p>\n\n<p>Left 1/24</p>\n\n<p>Right 19/24</p>\n\n<p>Write a program that simulates the motion of the particle within the grid, until it reaches an \"exit\" at the square in row 6, column 75. The particle cannot \"penetrate\" any of the four boundaries. Have the program repeat the simulation 10 times and calculate the average total distance travelled by the particle until it exits.</p>\n\n<p>I've been working on this for weeks now, and haven't found any solutions to it. If anyone could provide me a possible solution, that would be great! </p>\n"},{"tags":["python","syntax","else"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":47,"score":0,"question_id":13262110,"title":"Python: Syntax Error?","body":"<pre><code>A=int(input('Enter the first of three numbers: '))\nB=int(input('Enter the second of three numbers: '))\nC=int(input('Enter the third of three numbers: '))\nlist=[A,B,C]\nSL=sorted(list)\nif SL[0]&lt;0:\n    if SL[1]-1==SL[0]:\n        print (list('they are good'))\n    else: print (list('not good'))\nelif SL[2]-1==SL[1]:\n    print (list('they are good')\nelse: print (list('not good'))\n</code></pre>\n\n<p>I keep getting a syntax error on the last line in between else and : and i have no idea why it's wrong when i have the exact same line 3 lines above. Any help much appreciated.</p>\n"},{"tags":["python","memory-leaks","multiprocessing"],"answer_count":1,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":133,"score":5,"question_id":13134726,"title":"tracing memory leaks in Python (multiprocessing)","body":"<p>I have a <code>multiprocessing</code> application that leaks memory. However, the leak is not in the main process (according to <a href=\"http://www.aminus.org/blogs/index.php/2008/06/11/tracking-memory-leaks-with-dowser?blog=2\" rel=\"nofollow\">Dowser</a> and <code>top</code>) but in the subprocesses. Is there any way I can use Dowser (or similar tool) on subprocesses to trace the leak? If not, how do it trace it?</p>\n\n<p>UPDATE:I spent lots of time trying to use <a href=\"http://www.smira.ru/wp-content/uploads/2011/08/heapy.html\" rel=\"nofollow\">heapy</a> and <a href=\"http://stackoverflow.com/questions/1641231/python-working-around-memory-leaks/1641280#1641280\">gnibbler's code</a> but I couldn't locate the leak. I then stopped cherrypy in the main process and started another one (with <a href=\"http://www.aminus.org/blogs/index.php/2008/06/11/tracking-memory-leaks-with-dowser?blog=2\" rel=\"nofollow\">Dowser</a>) in the subprocess. But after a few minutes CherryPy would stop listening to the port... :( So I'm still looking for a better idea.</p>\n"},{"tags":["python","csv","dictionary","iteration","dictionaries"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13262006,"title":"Python adding entries to a dictionary from csv file using iteration","body":"<p>I need a dictionary to iterate a through a csv file, make some minor changes and add entries to the dictionary from a csv file.</p>\n\n<p>I have this so far, but the dictionary will only work for the very last line the file.</p>\n\n<pre><code>def citypop():\n    import csv                                  \n    F = open(\"Top5000Population.txt\")           \n    csvF = csv.reader(F)\n    D = {}\n    with csvF for row in csvF:\n        city,state,population = row[0],row[1],row[2] \n        population = population.replace(',','') \n        population = int(population)\n        city = city.upper()[:12]\n        D[(city, state)] = population\n        return D\n</code></pre>\n\n<p>What can I change to allow all of the lines from the file to be added to the empty dictionary?</p>\n"},{"tags":["python","backbone.js","socket.io","dashboard"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13260986,"title":"Which javascript library better suited for dynamic realtime widgets/dashboard?","body":"<p>I will build a dashboard for internal use in html5. I'm struggling in what library use for the client-side of refresh of realtime/dynamic widgets (graphs, status, etc) like this screenshoot:</p>\n\n<p><img src=\"http://i.stack.imgur.com/2sDcC.png\" alt=\"Sample idea\"></p>\n\n<p>The idea is have a backend server that push with Socket.IO the data to the client(s). In the dashboard, several widgets will be update potentially each few seconds. The widgets will be added/deleted by the user. So, the app is contained in a single page.</p>\n\n<p>I don't have experience in use this kind of libraries, mainly backend code with python/c#. I have heard about <a href=\"http://backbonejs.org/\" rel=\"nofollow\">http://backbonejs.org/</a> but wonder which library fit best to my use case:</p>\n\n<p>I wish to have a way to separate the render from the data sources, ie: The data is \"CPU usage\" and is rendered AT THE SAME TIME by two widgets: A line chart and a speedometer.</p>\n\n<p>P.D: This is not the actual design of my dashboard, is only for show the <em>kind</em> of user interface similar to what I could develop (I don't have yet the gui). The original design belong to <a href=\"http://dribbble.com/shots/780188-Morning\" rel=\"nofollow\">http://dribbble.com/shots/780188-Morning</a></p>\n"},{"tags":["java","python","security","encryption","aes"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13262047,"title":"AES Encryption (Python and Java)","body":"<p>I'm making a project in Java and Python that includes sending an encrypted string from one to the other. I can get the languages to understand each other and fully de-crypt / encrypt strings. However I was talking to somebody and was told that I am not being totally secure. I am using AES encryption for the project. Part of the problem is that I am distributing the software and need to come up with an effective way and secure way of making sure both the server side know the <strong>IV</strong> and <strong>'Secret Key'</strong>. Right now the same string will always encrypt to be the same result. If I could change those two factors they would be different, so 2 users with the same password won't have the same encrypted password. Please do keep in mind that the server only needs to manage one account.</p>\n\n<p>I appreciate your responses, and thank you very much ahead of time!</p>\n"},{"tags":["python","list","types"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":101,"score":1,"question_id":13252333,"title":"Python check if all elements of a list are the same type","body":"<p>How is possible in python to check (without checking individually every element if possible) if the elements of a list are of the same type?</p>\n\n<p>For example, I would like to have a function to check that every element of this list is integer (which is clearly false):</p>\n\n<pre><code>x=[1, 2.5, 'a']\n\ndef checkIntegers(x):\n    # return true if all elements are integers, false otherwise\n</code></pre>\n"},{"tags":["python","numpy","python-2.6"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13260617,"title":"python numpy, sort a matrix by row and column","body":"<p>I would like to use numpy to create a square matrix where rows other than the first are sorted by the contents of the first row. For example:</p>\n\n<pre><code>import numpy as np\na = array([['','z','b','d'],\n           ['b','2','5','7'],\n           ['d','0','1','3'],\n           ['z','3','9','2']])\n</code></pre>\n\n<p>return:</p>\n\n<pre><code>[['','z','b','d']\n ['z','3','9','2']\n ['b','2','5','7']\n ['d','0','1','3']]\n</code></pre>\n"},{"tags":["python","python-2.7","bottle"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":463,"score":2,"question_id":10486224,"title":"Bottle Static files","body":"<p>So, I have tried reading the Doc's for Bottle, however, I am still unsure about how static file serving works. I have <code>index.tpl</code>, however, within it it has a css file attatched to it, and it works. However, i was reading that Bottle does not automatically serve the css files, which cant be true if it loads correctly. I have however ran into speed issues when requesting the page, is that because i didnt use the <code>return static_file(params go here)</code>? If someone could clear up how they work, and how they are used when loading the page it would be great. </p>\n\n<p>Server code:</p>\n\n<pre><code>from Bottle import route,run,template,request,static_file\n\n\n\n@route('/')\ndef home():\n    return template('Templates/index',name=request.environ.get('REMOTE_ADDR'))\n\nrun(host='Work-PC',port=9999,debug=True)\n</code></pre>\n\n<p>Index:</p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\"&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;meta http-equiv=\"content-type\"\n content=\"text/html; charset=ISO-8859-1\"&gt;\n  &lt;title&gt;index&lt;/title&gt;\n  &lt;link type=\"text/css\"\n href=\"cssfiles/mainpagecss.css\"\n rel=\"stylesheet\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;table\n style=\"width: 100%; text-align: left; margin-left: auto; margin-right: auto;\"\n border=\"0\" cellpadding=\"2\" cellspacing=\"2\"&gt;\n  &lt;tbody&gt;\n    &lt;tr&gt;\n      &lt;td&gt;\n      &lt;h1&gt;&lt;span class=\"headertext\"&gt;\n      &lt;center&gt;Network\nWebsite&lt;/center&gt;\n      &lt;/span&gt;&lt;/h1&gt;\n      &lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n%if name!='none':\n    &lt;p align=\"right\"&gt;signed in as: {{name}}&lt;/p&gt;\n%else:\n    pass\n%end\n&lt;br&gt;\n&lt;table style=\"text-align: left; width: 100%;\" border=\"0\" cellpadding=\"2\"\n cellspacing=\"2\"&gt;\n  &lt;tbody&gt;\n    &lt;tr&gt;\n      &lt;td&gt;\n      &lt;table style=\"text-align: left; width: 100%;\" border=\"0\"\n cellpadding=\"2\" cellspacing=\"2\"&gt;\n        &lt;tbody&gt;\n          &lt;tr&gt;\n            &lt;td style=\"width: 15%; vertical-align: top;\"&gt;\n            &lt;table style=\"text-align: left; width: 100%;\" border=\"1\"\n cellpadding=\"2\" cellspacing=\"2\"&gt;\n              &lt;tbody&gt;\n                &lt;tr&gt;\n                  &lt;td&gt;Home&lt;br&gt;\n                  &lt;span class=\"important\"&gt;Teamspeak Download&lt;/span&gt;&lt;br&gt;\n                  &lt;span class=\"important\"&gt;Teamspeak Information&lt;/span&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n              &lt;/tbody&gt;\n            &lt;/table&gt;\n            &lt;/td&gt;\n            &lt;td style=\"vertical-align: top;\"&gt;\n            &lt;table style=\"text-align: left; width: 100%;\" border=\"1\"\n cellpadding=\"2\" cellspacing=\"2\"&gt;\n              &lt;tbody&gt;\n                &lt;tr&gt;\n                  &lt;td&gt;\n                  &lt;h1&gt;&lt;span style=\"font-weight: bold;\"&gt;Network Website&lt;/span&gt;&lt;/h1&gt;\nTo find all of the needed information relating to the network's social\ncapabilities, please refer to the links in the side bar.&lt;/td&gt;\n                &lt;/tr&gt;\n              &lt;/tbody&gt;\n            &lt;/table&gt;\n            &lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;/tbody&gt;\n      &lt;/table&gt;\n      &lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["python","root"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":13245355,"title":"Python Disable and Enable Root Privileges","body":"<p>I have segment of code that I'd like run as non-root. If the program is run as non-root, nothing needs to happen. But if the program is run as root, then root privileges need to be dropped, the segment of code executed, then root privileges enabled again. How do you write code for the enable/disable?</p>\n"},{"tags":["python","twitter","twython"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13261858,"title":"How to count tweets from query without double counting?","body":"<p>I'm working on a project which requires counting the number of tweets that meet the parameters of a query. I'm working in Python, using Twython as my interface to Twitter.</p>\n\n<p>A few questions though, how do you record which tweets have already been accounted for? Would you simply make a note of the last tweet ID and ignore it plus all previous? --What is the easiest implementation of this?</p>\n\n<p>As another optimizations question, I want to make sure that the amount of tweets missed by the counter is minimal, is there any way to make sure of this?</p>\n\n<p>Thanks so much.</p>\n"},{"tags":["python","memory-management","memory-leaks","elementtree"],"answer_count":2,"favorite_count":1,"up_vote_count":9,"down_vote_count":0,"view_count":746,"score":9,"question_id":7697710,"title":"Python running out of memory parsing XML using cElementTree.iterparse","body":"<p>A simplified version of my XML parsing function is here:</p>\n\n<pre><code>import xml.etree.cElementTree as ET\n\ndef analyze(xml):\n    it = ET.iterparse(file(xml))\n    count = 0\n\n    for (ev, el) in it:\n        count += 1\n\n    print('count: {0}'.format(count))\n</code></pre>\n\n<p>This causes Python to run out of memory, which doesn't make a whole lot of sense. The only thing I am actually storing is the count, an integer. Why is it doing this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/HUGC0.png\" alt=\"enter image description here\"></p>\n\n<p>See that sudden drop in memory and CPU usage at the end? That's Python crashing spectacularly. At least it gives me a <code>MemoryError</code> (depending on what else I am doing in the loop, it gives me more random errors, like an <code>IndexError</code>) and a stack trace instead of a segfault. But why is it crashing?</p>\n"},{"tags":["javascript","jquery","python","ajax","flask"],"answer_count":2,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13261028,"title":"Have data automatically pushed to website? (Python/Flask + WSIG + jquery AJAX)","body":"<p>Can I have a value automatically pushed onto a website (using AJAX = JQuery?), when something is done on the server side and python is ready to send it, rather than just in a response to a request by the website.</p>\n\n<p>How do I make Jquery ready to accept this adhoc data?</p>\n\n<p>Tutorial I'm learning from:\n<a href=\"http://flask.pocoo.org/docs/patterns/jquery/#the-html\" rel=\"nofollow\">http://flask.pocoo.org/docs/patterns/jquery/#the-html</a></p>\n"},{"tags":["python","gdata-api","google-sites"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":920,"score":1,"question_id":2001664,"title":"How do I update attachment content with the google sites python API?","body":"<p>I'm trying to write a script that will automatically update some attachments on a website created and managed through Google Sites.  This should be possible as Google released the <a href=\"http://code.google.com/apis/sites/\" rel=\"nofollow\">Sites API</a> in September and the <a href=\"http://code.google.com/p/gdata-python-client/\" rel=\"nofollow\">Python GData API</a> claims to support sites.  However, the closest method I can find is called <code>client.update</code>, which allows me to update the metadata of an attachment, but not the content.</p>\n\n<p>In the Java API updating an attachment is done by creating a new <code>MediaFileSource</code> and then calling <code>entry.setMediaFileSource(source)</code> followed by <code>entry.updateMedia()</code>.  However, I can't find anything similar in the Python API.  Am I dumb and just missing something, or is it really not possible to update a google sites attachment using the python API?</p>\n"},{"tags":["python","time","duration"],"answer_count":5,"favorite_count":4,"up_vote_count":12,"down_vote_count":0,"view_count":2944,"score":12,"question_id":7421641,"title":"Measuring elapsed time in python","body":"<p>Is there a simple way / module to <em>correctly</em> measure the elapsed time in python? I know that I can simply call <code>time.time()</code> twice and take the difference, but that will yield wrong results if the system time is changed. Granted, that doesn't happen very often, but it does indicate that I'm measuring the wrong thing.</p>\n\n<p>Using <code>time.time()</code> to measure durations is incredibly roundabout when you think about it. You take the difference of two absolute time measurements which are in turn constructed from duration measurements (performed by timers) and known absolute times (set manually or via ntp), that you aren't interested in at all.</p>\n\n<p>So, is there a way to query this \"timer time\" directly? I'd imagine that it can be represented as a millisecond or microsecond value that has no meaningful absolute representation (and thus doesn't need to be adjusted with system time). Looking around a bit it seems that this is exactly what <code>System.nanoTime()</code> does in Java, but I did not find a corresponding Python function, even though it should (hardware-technically) be easier to provide than <code>time.time()</code>.</p>\n\n<p>Edit: To avoid confusion and address the answers below: This is not about DST changes, and I don't want CPU time either - I want elapsed physical time. It doesn't need to be very fine-grained, and not even particularly accurate. It just shouldn't give me negative durations, or durations which are off by several orders of magnitude (above the granularity), just because someone decided to set the system clock to a different value. Here's what the Python docs say about 'time.time()':</p>\n\n<p><a href=\"http://docs.python.org/library/time.html#time.time\">\"While this function normally returns non-decreasing values, it can return a lower value than a previous call if the system clock has been set back between the two calls\"</a></p>\n\n<p>This is exactly what I want to avoid, since it can lead to strange things like negative values in time calculations. I can work around this at the moment, but I believe it is a good idea to learn using the proper solutions where feasible, since the kludges will come back to bite you one day.</p>\n\n<p>Edit2: Some research shows that you can get a system time independent measurement like I want in Windows by using GetTickCount64(), under Linux you can get it in the return value of times(). However, I still can't find a module which provides this functionality in Python.</p>\n"},{"tags":["python"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13261407,"title":"How do I use variables from another function?","body":"<p>This here is my code:</p>\n\n<pre><code>def Area():\n    area = pi * radius * radius\n    pi = 3.14\n    radius = diameter * 2\n\ndef cost():\n    diameter = eval(input(\"diamater: \"))\n    print (\"Area is\", area)\ncost()\n</code></pre>\n\n<p>it says area is not defined but I have a variable called area!</p>\n"},{"tags":["python","unit-testing","google-app-engine"],"answer_count":6,"favorite_count":23,"up_vote_count":30,"down_vote_count":0,"view_count":1862,"score":30,"question_id":1753897,"title":"What approach(es) have you used for lightweight Python unit-tests on App Engine?","body":"<p>I'm about to embark on some large Python-based App Engine projects, and I think I should check with Stack Overflow's \"wisdom of crowds\" before committing to a unit-testing strategy.  I have an existing unit-testing framework (based on <a href=\"http://docs.python.org/library/unittest.html?highlight=unittest#module-unittest\" rel=\"nofollow\">unittest</a> with custom runners and extensions) that I want to use, so anything \"heavy-weight\"/\"intrusive\" such as <a href=\"http://code.google.com/p/python-nose/\" rel=\"nofollow\">nose</a>, <a href=\"http://pythonpaste.org/webtest/\" rel=\"nofollow\">webtest</a>, or  <a href=\"http://code.google.com/p/gaeunit/\" rel=\"nofollow\">gaeunit</a> doesn't seem appropriate.  The crucial unit tests in my worldview are extremely lightweight and fast ones, ones that run in an extremely short time, so I can keep running them over and over all the time without breaking my development rhythm (e.g., for a different project, I get 97% or so coverage for a 20K-lines project with several dozens of super-fast tests that take 5-7 seconds, elapsed time, for a typical run, overall -- that's what I consider a decent suite of small, fast unit-tests).  I'll have richer/heavier tests as well of course, all the way to integration tests with selenium or windmill, that's <strong>not</strong> what I'm asking about;-) -- my focus in this question (and in most of my development endeavors;-) is on the small, lightweight unit-tests that lightly and super-rapidly cover my code, not on the deeper ones.</p>\n\n<p>So I think what I need is essentially a set of small, very lightweight simulations of the various key App Engine subsystems -- data store, memcache, request/response objects and calls to webapp handlers, user handling, mail, &amp;c, roughly in this order of priority.  I haven't found exactly what I'm looking for, so it seems to me that I should either rely on <a href=\"http://code.google.com/p/pymox/\" rel=\"nofollow\">mox</a>, as I've done often in the past, which basically means mocking each subsystem used in a given test and setting up all expectations &amp;c (strong, but lots of work each time, and very sensitive to the tested-code's internals, i.e. very \"white-box\"y), or rolling my own simulation of each subsystem (and doing asserts on the simulated subsystems' states as part of the unit tests). The latters seems feasible, given GAE's Python-side strong \"stubs\" architecture... but I can't believe I need to roll my own, i.e., that nobody's already written such simple-minded simulators!-)  E.g., for the datastore, it looks like what I need is more or less the \"datastore on file\" stub that's already part of the SDK, plus a way to mark it readonly and easy-to-use accessors for assertions about the datastore's state; and so forth, subsystem by subsystem -- each seems to need \"just a bit more\" than what's already in the SDK, \"perched on top\" of the existing \"stubs\" architecture.</p>\n\n<p>So, before diving in and spending a day or two of precious development time \"rolling my own\" simulations of GAE subsystems for unit testing purposes, I thought I'd double check with the SO crowd and see what y'all think of this... or, if there's already some existing open source set of such simulators that I can simply reuse (or minimally tweak!-), and which I've just failed to spot in my searching!-)</p>\n\n<p><strong>Edit</strong>: to clarify, if I do roll my own, I do plan to leverage the SDK-supplied stubs where feasible; but for example there's no stub for a datastore that gets initially read in from a file but then not saved at the end, so I need to subclass and tweak the existing one (which also doesn't offer particularly convenient ways to do asserts on its state -- same for the mail service stub, etc). That's what I mean by \"rolling my own\" -- not \"rewriting from scratch\"!-)</p>\n\n<p><strong>Edit</strong>: \"why not GAEUnit\" -- GAEUnit is nice for its own use cases, but running dev_appserver and seeing results in my browser (or even via urllib.urlopen) is definitely not what I'm after -- I want to use a fully automated setup, suitable for running within an existing test-running framework which is based on extending unittest, and no HTTP in the way (said framework defines a \"fast\" test as one that among other thing does no sockets and minimal disk I/O -- we simulate or mock these -- so via gaeunit I could do no better than \"medium\" tests) + no convenient way to prepopulate datastore for each test (and no OO structure to help customize things).</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13261349,"title":"python re with groupdict","body":"<p>I'm writing a python code to slipt all informations from a .txt. And i have write a code, but come allways error:  <em>'NoneType' object has no attribute 'groupdict'</em></p>\n\n<p>code:</p>\n\n<pre><code>import re\nreadfile = open(\"test.txt\")\ntry:\nall_the_text =readfile.read()\nm = re.match(\"(pdflink=[\\w\\s/]*)author=([\\w\\s/]*/n)\",unicode(all_the_text),flags=re.UNICODE)\nm.groupdict()\nprint m.groupdict()\nfinally:\nreadfile.close()\nwritefile = open('test5.txt','w')\nprint &gt;&gt; writefile, m.groupdict()\nwritefile.close()\n</code></pre>\n\n<p>Please please help me! Thx!</p>\n"},{"tags":["python","django","url"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13261377,"title":"How to pass multiple values for a single URL parameter?","body":"<p>Is it possible to pass multiple values for a single URL parameter without using your own separator?</p>\n\n<p>What I want to do is that the backend expects an input parameter <code>urls</code> to have one or more values. It can me set to a single or multiple URLs. What is a way to set the urls parameter so it can have multiple values? I can't use my own separator because it can be part of the value itself. </p>\n\n<p>Example:\n    http://example.com/?urls=[value,value2...]</p>\n\n<p>The <code>urls</code> parameter be set to just <code>http://google.com</code> or it can be set to <code>http://google.com</code> <code>http://yahoo.com ...</code>. In the backend, I want to process each url as a separate values. </p>\n"},{"tags":["python"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":53,"score":1,"question_id":13260642,"title":"Asterisks Triangle in Python","body":"<p>I am trying to create a program that allows me to make a \"pyramid\" or \"triangle\" using asterisks, in the Python program. I've already started the code, but can't seem to figure it out. </p>\n\n<p>Here's the code I've managed to figure out:</p>\n\n<pre><code>    def triangle():\n            totalRows = int(eval(input(\"How big? \")))\n            for currentRows in range(1,totalRows+1):\n                for currentCol in range (1, currentRows+1):\n                            print(\"*\", end = \" \")\n    triangle()\n</code></pre>\n\n<p>The end result is supposed to mirror this!</p>\n\n<pre><code>How big? 1\n* \n------------------------------------------------------\nHow big? 2\n * \n* * \n------------------------------------------------------ \nHow big? 3\n  * \n * * \n* * * \n------------------------------------------------------ \n</code></pre>\n"},{"tags":["c++","python","boost","portability","boost-python"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":58,"score":2,"question_id":13252598,"title":"Boost Python portability concerns","body":"<p>I have a dll written in C++ that I want to export to Python for running regression and unit-testing (it's just easier to maintain and run the regression with Python).\nTo this purpose I want to use Boost.Python to export the main API of the dll so it will be usable in Python.\nMy assemblies look as follows:</p>\n\n<ol>\n<li>MyLibrary.dll //main API C++ library</li>\n<li>MyLibrary.pyd //a thin dll project containing only the <code>BOOST_PYTHON_MODULE</code> export definitions (dependant on MyLibrary.dll)</li>\n<li>... //other C++ dll files that MyLibrary.dll is dependent on</li>\n</ol>\n\n<p>I had some trouble getting MyLibrary.pyd to link but after digging through questions a bit (e.g. <a href=\"http://stackoverflow.com/questions/2635933/boost-python-version\">here</a>) I realised I had to re-build boost while pointing <code>b2.exe</code> to my specific Python version. After which I was able to import and run my library from python (on <strong>my machine alone</strong>).</p>\n\n<p>Technical data: I'm building the libraries with boost 1.51, Python 3.23 on Windows 7 x64 and MSVC-10.0 (my own projects are built from VS2010). The variant I'm using to link with boost is shared libraries, 64 address model, release accordingly with my own builds.</p>\n\n<p>The problem is, when I try to import the library (built on my machine) on another machine, python complains: </p>\n\n<pre><code>ImportError: DLL load failed: The specified procedure could not be found.\n</code></pre>\n\n<p>On the line <code>import MyLibrary</code> </p>\n\n<p>Which begs the following questions:</p>\n\n<ol>\n<li>Is the MyLibrary.pyd I built on my machine \"python-portable\"? Meaning, will it work on other versions of Python besides 3.23 (the version I used to build boost.python with on my machine)?</li>\n<li>Does the user of MyLibrary.pyd have to re-build boost with his own version of python in order to be able to successfully import it?</li>\n<li>So far we've been using the pre-built boost installer for windows supplied by BoostPro. What version of Python is that build linked against and can I save my users the headache of building boost on their own if we simply decide to work with the \"right\" version of Python across the team (the version BoostPro linked against)?</li>\n</ol>\n"},{"tags":["python","string","nlp","stemming"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13237533,"title":"Find different realization of a word in a sentence string - Python","body":"<p><em>(This question is with regards to string checking in general and not Natural Language Procesisng per se, but if you view it as an NLP problem, imagine it's not a langauge that current analyzers can analye, for simplicity sake, i'll use english strings as e.g.)</em></p>\n\n<p>lets say there are only 6 possible form that a word can be realized in</p>\n\n<ol>\n<li>the initial letter being capitalized </li>\n<li>its plural form with an \"s\"</li>\n<li>its plural form with an \"es\"</li>\n<li>capitalized + \"es\"</li>\n<li>capitalized + \"s\"</li>\n<li>the basic form without plural or capitalization</li>\n</ol>\n\n<p>let's say i want to find the index of the 1st instance any form of the word <code>coach</code> occurs in a sentence, is there a simpler way of doing these 2 methods:</p>\n\n<p><strong>long if condition</strong></p>\n\n<pre><code>sentence = \"this is a sentence with the Coaches\"\ntarget = \"coach\"\n\nprint target.capitalize()\n\nfor j, i in enumerate(sentence.split(\" \")):\n  if i == target.capitalize() or i == target.capitalize()+\"es\" or \\\n     i == target.capitalize()+\"s\" or i == target+\"es\" or i==target+\"s\" or \\\n     i == target:\n    print j\n</code></pre>\n\n<p><strong>iterating try-except</strong></p>\n\n<pre><code>variations = [target, target+\"es\", target+\"s\", target.capitalize()+\"es\",\ntarget.capitalize()+\"s\", target.capitalize()]\n\nind = 0\nfor i in variations:\n  try:\n    j == sentence.split(\" \").index(i)\n    print j\n  except ValueError:\n    continue\n</code></pre>\n"},{"tags":["python","logging","cherrypy"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":10,"score":1,"question_id":13261350,"title":"Capture all output to log in CherryPy","body":"<p>My cherrypy application (3.2.2 on Python 2.6) is using 3rd party libs, and these libs use standard logging internally, like so:</p>\n\n<pre><code>logger = logging.getLogger(__name__)\nlogger.info(\"a message from some library\")\n</code></pre>\n\n<p>Now, in my cherrypy config, I have:</p>\n\n<pre><code>log.access_file = '/path/access.log'\nlog.error_file = '/path/error.log'\n</code></pre>\n\n<p>but only CP messages ever appear in these two files, not any of the other logging. But I need all logging there, not just the logging that CP itself issues internally.</p>\n\n<p>Is there a way to capture <em>all</em> output, including the 3rd party logging (which I assume goes into stdout/stderr and then disappears, as the process is a detached daemon), into <code>/path/error.log</code>? Plug arbitrary stdout/stderr into CP's log somehow?</p>\n"},{"tags":["python","date","datetime","matplotlib"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13259875,"title":"Making matplotlib's date2num and num2date perfect inverses","body":"<p>I'm trying to write a pair of functions, <code>plottm</code> and <code>unixtm</code>, which convert back and forth between normal unix time (seconds since 1970-01-01) and Matplotlib's date representation (days since the last day of -1BC or something, a float).</p>\n\n<p>If <code>plottm</code> and <code>unixtm</code> were proper inverses then this code would print the same date/time twice:</p>\n\n<pre><code>import time, datetime\nimport matplotlib.dates as dt\n\n# Convert a unix time u to plot time p, and vice versa\ndef plottm(u): return dt.date2num(datetime.datetime.fromtimestamp(u))\ndef unixtm(p): return time.mktime(dt.num2date(p).timetuple())\n\nu = 1270000000\nprint datetime.datetime.fromtimestamp(u), \"--&gt;\", \\\n      datetime.datetime.fromtimestamp(unixtm(plottm(u)))\n</code></pre>\n\n<p>Alas, it's off by an hour (which only happens for some timestamps, otherwise I'd insert an offset and be done with it).</p>\n\n<p>Probably related: <a href=\"http://pytz.sourceforge.net/#problems-with-localtime\" rel=\"nofollow\">Problems with Localtime</a></p>\n\n<p>UPDATE: Related question that isn't specific to Matplotlib: <a href=\"http://stackoverflow.com/questions/13260863/convert-a-unixtime-to-a-datetime-object-and-back-again-pair-of-time-conversion\">Convert a unixtime to a datetime object and back again (pair of time conversion functions that are inverses)</a></p>\n"},{"tags":["python","object","copy"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":54,"score":4,"question_id":13260557,"title":"Create new class instance from class method","body":"<p>I want to be able to create a new instance of an object by calling a method on an already instantiated object. For example, I have the object:</p>\n\n<p><code>organism = Organism()</code></p>\n\n<p>I want to be able to call <code>organism.reproduce()</code> and have two objects of type Organism. My method at this point looks like this:</p>\n\n<pre><code>class Organism(object):\n    def reproduce():\n        organism = Organism()\n</code></pre>\n\n<p>and I'm pretty sure it doesn't work (I'm not really even sure how to test it. I tried the gc method in <a href=\"http://stackoverflow.com/questions/328851/printing-all-instances-of-a-class\">this post</a>). So how can I make my object create a copy of itself that's accessible just like the first object I created (with <code>organism = Organism()</code>)?</p>\n"},{"tags":["python","list","statistics","counter"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":84,"score":2,"question_id":13260234,"title":"Function in one line to count winning coupons on lottery","body":"<p>I have coupons for Lotto (lottery):</p>\n\n<pre><code>coupons = [[1,4,7,34,45,67], [2,8,16,34,35,38] ... ]\n</code></pre>\n\n<p>and result:</p>\n\n<pre><code>result = [7,12,13,26,29,34]\n</code></pre>\n\n<p>How can I count my winning numers on coupons <strong>IN ONE LINE</strong> ?\nI would like return statistics, for example like this:</p>\n\n<pre><code>statistics = [20, 15, 11, 1, 0, 0, 0]\n</code></pre>\n\n<p>where</p>\n\n<p>statistics[0] - amount of coupons with 0 winning numbers,</p>\n\n<p>statistics[1] - amount of coupons with 1 winning numbers,</p>\n\n<p>statistics[2] - amount of coupons with 2 winning numbers,</p>\n\n<p>statistics[3] - amount of coupons with 3 winning numbers,</p>\n\n<p>statistics[4] - amount of coupons with 4 winning numbers,</p>\n\n<p>statistics[5] - amount of coupons with 5 winning numbers,</p>\n\n<p>statistics[6] - amount of coupons with 6 winning numbers</p>\n"},{"tags":["python","exception","unicode","non-english"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":1,"view_count":40,"score":2,"question_id":13256777,"title":"possible to raise exception that includes non-english characters in python 2?","body":"<p>I'm trying to raise exception in python 2.7.x which includes a unicode in the message. I can't seem to make it work.</p>\n\n<p>Is it not supported or not recommended to include unicode in error msg? \nOr do i need to be looking at sys.stderr?</p>\n\n<pre class=\"lang-js prettyprint-override\"><code> # -*- coding: utf-8 -*-\n class MyException(Exception):\n  def __init__(self, value):\n    self.value = value\n  def __str__(self):\n    return self.value\n  def __repr__(self):\n    return self.value\n  def __unicode__(self):\n    return self.value\n\ndesc = u'something bad with field \\u4443'\n\ntry:\n  raise MyException(desc)\nexcept MyException as e:\n  print(u'Inside try block : ' + unicode(e))\n\n# here is what i wish to make work \nraise MyException(desc)\n</code></pre>\n\n<p>Running script produces the output below.\nInside my try/except i can print the string without problem.</p>\n\n<p>My problem is outside the try/except.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>Inside try block : something bad with field 䑃\nTraceback (most recent call last):\n  File \"C:\\Python27\\lib\\bdb.py\", line 387, in run\n    exec cmd in globals, locals\n  File \"C:\\Users\\ghis3080\\r.py\", line 25, in &lt;module&gt;\n    raise MyException(desc)\nMyException: something bad with field \\u4443\n</code></pre>\n\n<p>Thanks in advance.</p>\n"},{"tags":["python","scipy","curve-fitting"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13219418,"title":"Import curve_fit is returning no errors but wrong values","body":"<p>Hello and thank you in advance for your help.</p>\n\n<p>I have to fit a curve with some data. Here is my code :</p>\n\n<pre><code>#!/usr/bin/python\n\nimport numpy\nimport sys\nimport scipy\nimport pylab\n\nfrom scipy.optimize import curve_fit\nfrom scipy.io.idl import readsav\n\nfrom lib_co2 import make_sigco2 # lib_co2 is a function created by us,\n                                # it works fine\n\nmesure = float(sys.argv[1]) # User must tell us which mesure he wants (66 max)\n\nsav = readsav('Orb0017A01_trans_v1.bin') # The data is saved in sav\n    Trans = sav.transmis[mesure, :, 2] # Transmitance, our y value\n    Lambda = sav.Lambda #Wavelength, our x value\n\ndef func(Lambda, logN) : # Our user defined function,  \n                         # LogN is the number we can modify to fit the curve.\n    return numpy.exp(-numpy.exp(logN) * make_sigco2(Lambda))\n# our function, we are looking for the logarytme \n# because the value of N is very big.\n\ncoeff, cov = curve_fit(func, Lambda, Trans) # We save the value of logN in \n# coeff and it's error in cov\n    Trans_aj = func(Lambda,coeff[0]) # Fited curve \n    print(coeff)\n    print(cov)\n\npylab.plot(Lambda,Trans)\npylab.plot(Lambda,Trans_aj)\n    pylab.axis([100, 350, 0, 1.1])\n    pylab.ylabel(\"Transmitance\")\n    pylab.xlabel(\"Wavelength\")\n    pylab.show()\n</code></pre>\n\n<p>This is what i get in the terminal :</p>\n\n<pre><code>user@computer:~/Python_$ ./Opti.py 15\n[ 1.]\ninf\n</code></pre>\n\n<p>The values are wrong, the curve does not fit at all.</p>\n\n<p>I dont know where lies my problem, if anyone has any ideas they would be welcome.</p>\n\n<p>Anthony</p>\n"},{"tags":["python","function","python-3.x"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":33,"score":0,"question_id":13260970,"title":"Input specific calculator python 3","body":"<p>I need to create a program in python that will prompt the user for input in the following format</p>\n\n<p>operand operation operand</p>\n\n<p>Or</p>\n\n<p>operand operation operand operation operand </p>\n\n<p>For example, 3 * 5.34 + 34</p>\n\n<p>Error messages need to be displayed for invalid input (non real numbers) and it needs to check that at least one of the four valid operands (+-*/) have been entered, use at least three functions, but those aren't the parts I'm having problems with.</p>\n\n<p>I honestly have no idea how to add detection for a string input of 1*1+1 to seperate it into 5 variables (1, *, 1, +, 1). I also need to do individual detection for if the numbers are negative, or start/end with a decimal point. Finally, the program needs to do calculations in proper of order of operations, but I think I've got that part mostly figured out.</p>\n\n<p>How would I go about parsing the input string into 3 or 5 variables, and check if it's valid input? I've tried character detection (So [0,1,2,3,4]) but realized that wouldn't work if the operands were decimals or numbers in the double digits.</p>\n\n<p>Note: Importing functions is not allowed. The program MUST be decomposed into functions.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["python","multithreading","python-multithreading"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13260589,"title":"How execute 3 function on 4 threads using Python?","body":"<p>I have 3 function and want execute each on new thread using Python</p>\n\n<p>Each function just a math operations.</p>\n\n<p>I need to start each function in each core of process. In Java it's look like:</p>\n\n<pre><code>Thread threadF1 = new Thread(f1);\nThread threadF2 = new Thread(f2);\nThread threadF3 = new Thread (f3);\n\nthreadF1.start();\nthreadF2.start();\nthreadF3.start();\n</code></pre>\n\n<p>And if i have 4 cores my program uses 75% of CPU.</p>\n\n<p>I wrote this in Python:</p>\n\n<pre><code> thread = Thread(target = F1, args=(N,))\n thread.start()\n\n thread2 = Thread(target = F2, args=(N,))\n thread2.start()\n\n thread3 = Thread(target = F3, args=(N,))\n thread3.start()\n</code></pre>\n\n<p>but it uses just 25%. How force working code in Python using 3/4 cores?</p>\n"},{"tags":["python","matplotlib"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13261122,"title":"Adding padding in call to Matplotlib's PdfPages","body":"<p>I've got a few figures that I'm saving to a PDF file with Matplotlib's PdfPages backend. Unfortunately some of my figures are being inserted into the PDF file with a good portion of the y axis labels truncated. How do I specify that additional space should be added to avoid the label truncation? I've tried invoking the subplot_adjust command and passing left= and pad= parameters to no avail.  </p>\n\n<p>Any additional suggestions are most welcome!</p>\n\n<p>Chris</p>\n"},{"tags":["python","gtk3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":190,"score":0,"question_id":8809346,"title":"check which button is pressed gtk3 using python","body":"<p>i have 10 button, which correspond to the same method. how am i going to check which button was clicked in the corresponding method? i tried to check for the button press of a particular button in the list by the following code, but i got segmentation fault error:</p>\n\n<pre><code>for i in range(0,10):\n    if button_list[i].clicked():\n        break\n break\n#operation with respect to the button clicked\n</code></pre>\n"},{"tags":["python","bittorrent","libtorrent"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13129091,"title":"how to get the peer list of a torrent using python-libtorrent?","body":"<p>I have tried this code :</p>\n\n<pre><code>import libtorrent as lt\nimport time\nses = lt.session()\nses.listen_on(6881, 6891)\ninfo = lt.torrent_info('test.torrent')\nh = ses.add_torrent({'ti': info, 'save_path': './'})\nprint 'starting', h.name()\nwhile (not h.is_seed()):\n   s = h.status()\n   p = h.get_peer_info()\n\n   print lt.peer_info().ip\n\n   sys.stdout.flush()\n\n   time.sleep(15)\n\nprint h.name(), 'complete'\n</code></pre>\n\n<p>and it prints this:</p>\n\n<pre><code>starting test.avi\n('0.0.0.0', 0)\n\n('0.0.0.0', 0)\n. \n.\n.\n</code></pre>\n\n<p>so instead of giving me a peer list it gives me zeros.Am i doing something wrong?</p>\n"},{"tags":["python","virtualenv"],"answer_count":4,"favorite_count":19,"up_vote_count":36,"down_vote_count":0,"view_count":4695,"score":36,"question_id":5844869,"title":"Comprehensive beginner's virtualenv tutorial?","body":"<p>I've been hearing the buzz about virtualenv lately, and I'm interested. But all I've heard is a smattering of praise, and don't have a clear understanding of what it is or how to use it.</p>\n\n<p>I'm looking for (ideally) a follow-along tutorial that can take me from Windows or Linux with no Python on it, and explain every step of (in no particular order):</p>\n\n<ul>\n<li>what I should do to be able to start using virtualenv</li>\n<li>specific reasons why using virtualenv is a good idea</li>\n<li>situations where I can/can't use virtualenv</li>\n<li>situations where I should/shouldn't use virtualenv</li>\n</ul>\n\n<p>And step through (comprehensively) a couple sample situations of the should+can variety.</p>\n\n<p>So what are some good tutorials to cover this stuff? Or if you have the time and interest, perhaps you can answer a few of those questions here. Either in your answer, or as a link to tutorials that answer it, these are the things I'd like to know.</p>\n"},{"tags":["python","numpy","permutation"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":13261044,"title":"Numpy: multiply two permutations","body":"<p>I have two permutations represented as Numpy arrays:</p>\n\n<p>A:</p>\n\n<pre><code>     0  1  2  3\nA = [1, 3, 2, 0]\n</code></pre>\n\n<p>and B:</p>\n\n<pre><code>     0  1  2  3\nB = [0, 2, 1, 3]\n</code></pre>\n\n<p>how can I get C = A*B, where</p>\n\n<pre><code>0-&gt;1 * 1-&gt;2 = 2\n1-&gt;3 * 3-&gt;3 = 3\n2-&gt;2 * 2-&gt;1 = 1\n3-&gt;0 * 0-&gt;0 = 0\n\nC = (2, 3, 1, 0)\n</code></pre>\n\n<p>efficiently using Numpy?</p>\n"},{"tags":["python","date","datetime","time","dst"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":35,"score":4,"question_id":13260863,"title":"Convert a unixtime to a datetime object and back again (pair of time conversion functions that are inverses)","body":"<p>I'm trying to write a pair of functions, <code>dt</code> and <code>ut</code>, that convert back and forth between normal unix time (seconds since 1970-01-01 00:00:00 UTC) and a Python datetime object.</p>\n\n<p>If <code>dt</code> and <code>ut</code> were proper inverses then this code would print the same timestamp twice:</p>\n\n<pre><code>import time, datetime\n\n# Convert a unix time u to a datetime object d, and vice versa\ndef dt(u): return datetime.datetime.fromtimestamp(u)\ndef ut(d): return time.mktime(d.timetuple())\n\nu = 1004260000\nprint u, \"--&gt;\", ut(dt(u))\n</code></pre>\n\n<p>Alas, the second timestamp is 3600 seconds (an hour) less than the first.\nI think this only happens for very particular unixtimes, maybe during that hour that daylight savings time skips over.\nBut is there a way to write <code>dt</code> and <code>ut</code> so they're true inverses of each other?</p>\n\n<p>Related question: <a href=\"http://stackoverflow.com/questions/13259875/making-matplotlibs-date2num-and-num2date-perfect-inverses\">Making matplotlib&#39;s date2num and num2date perfect inverses</a> </p>\n"},{"tags":["python","homework"],"answer_count":6,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":446,"score":2,"question_id":10762199,"title":"Substring Counting in Python and Adding 2 Numbers From One Line of Input","body":"<p>I'm following a python website for my schoolwork. It's really neat, it gives you tasks to complete and compiles the code in the browser.</p>\n\n<p>Anyway, I came to a challenge that I'm not really sure how to go about.</p>\n\n<p>One of the questions was:</p>\n\n<p><em>The same substring may occur several times inside the same string: for example \"assesses\" has the substring \"sses\" 2 times, and \"trans-Panamanian banana\" has the substring \"an\" 6 times. Write a program that takes two lines of input, we call the first needle and the second haystack. Print the number of times that needle occurs as a substring of haystack.</em></p>\n\n<p>I'm not too sure how I should start this, i know I have to compare the two strings but how? I used the count method, but it didn't recognize the second occurrence of <em>sses</em> in <em>assesses</em>.</p>\n\n<p>My second question is one I solved but I cheated a little.</p>\n\n<p>The question was:</p>\n\n<p><em>Write a program that takes a single input line of the form «number1»+«number2», where both of these represent positive integers, and outputs the sum of the two numbers. For example on input 5+12 the output should be 17.</em></p>\n\n<p>I used the eval() method and it worked, I just think that this wasn't what the grader had in mind for this.</p>\n\n<p>Any insight would be greatly appreciated. Thank you! </p>\n\n<p>EDIT: Second question was solved.</p>\n"},{"tags":["python","django","gmail","gmail-imap"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13085946,"title":"A Django library for Gmail","body":"<p>I'm looking for an API or library that gives me access to all features of Gmail from a Django web application.</p>\n\n<p>I know I can receive and send email using IMAP or POP3. However, what I'm looking for are all the GMail features such as marking emails with star or important marker, adding or removing tags, etc.</p>\n\n<p>I know there is a Settings API that allows me to create or delete labels and filters, but I haven't found anything that actually allows me to set labels to emails, or set emails as starred, and so on.</p>\n\n<p>Can anyone give me a pointer?</p>\n"},{"tags":["python","subprocess"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13260061,"title":"Popen.communicate escapes a string I send to stdin","body":"<p>I am trying to spawn a process using <code>Popen</code> and send it a particular string to its <code>stdin</code>.</p>\n\n<p>I have:</p>\n\n<pre><code>pipe = subprocess.Popen(cmd, shell=True, stdin=subprocess.PIPE)\npipe.communicate( my_stdin_str.encode(encoding='ascii') )\npipe.stdin.close()\n</code></pre>\n\n<p>However, the second line actually escapes the whitespace in <code>my_stdin_str</code>. For example, if I have:</p>\n\n<pre><code>my_stdin_str=\"This is a string\"\n</code></pre>\n\n<p>The process will see:</p>\n\n<pre><code>This\\ is\\ a\\ string\n</code></pre>\n\n<p>How can I prevent this behaviour?</p>\n"},{"tags":["python","application","communication","observer-pattern"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":189,"score":4,"question_id":12166279,"title":"Handle communication in multi layer application","body":"<p>I am creating an application using Python.</p>\n\n<p>I first designed an API, that is working fine. \nI am now designing my GUI. The GUI starts a Thread that is used to perform tasks against the API.</p>\n\n<p>Up to now, I used the Observer pattern to handle communication through the different layers.\nBasically, communication can be of two types (mainly):\n- The GUI asking the Thread (and the API subsequently) to START/STOP\n- The API giving information back to the Thread, that propagates to the GUI.</p>\n\n<p>Here is a simple schema of the current architecture I am talking about. \nOne arrow means \"notify\", basically. </p>\n\n<p><img src=\"http://i.stack.imgur.com/xuhk1.png\" alt=\"Current Observer/Observable communication\"></p>\n\n<p>My concern is that when the application Thread communicates, both the Gui and the API receive the message because they subscribed. Thing is, each message is only meant to be read by one of the two.</p>\n\n<p>What I did to solve that is to send an message together with an ID. Each of the three elements have an id and they know whether the message is for them or now. \nBut I am not sure if this is the \"correct\" (understand nicest) way to do it. What if I have more parties in the future ? </p>\n\n<p>I started thinking about some kind of manager handling communication, but It would then have to be at the top of the architecture, and I am not sure how to further organize it :s.</p>\n\n<p>I am not asking for a complete solution, but mainly ideas or best practises by more experienced people ;)</p>\n\n<p>I can keep handling multiple Observer pattern in this simple case.\nBut I was thinking about porting my code on a server. In this case, I am likely to have way more than one thread for the application, and handling API calls will become quite impossible. </p>\n\n<p>Link to the code I am talking about : \n<a href=\"https://github.com/jlengrand/FaceMovie/blob/gui_v2/ivolution/gui_wx/IvolutionWindow.py\" rel=\"nofollow\">GUI</a>, <a href=\"https://github.com/jlengrand/FaceMovie/blob/gui_v2/ivolution/FacemovieThread.py\" rel=\"nofollow\">ApplicationThread</a> and <a href=\"https://github.com/jlengrand/FaceMovie/blob/gui_v2/ivolution/Facemovie_lib.py\" rel=\"nofollow\">Application API</a>.</p>\n\n<p>You want to look at notify and update methods. </p>\n\n<p>Thx for any piece of advice !</p>\n"},{"tags":["python","automation","paster"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13258416,"title":"Python Paste and auto-restart on non Python source file change","body":"<p><a href=\"http://pythonpaste.org/script/#running-the-server\" rel=\"nofollow\"><code>paster serve</code></a> has <code>--reload</code> option to auto-restart serving wsgi application when any of Python source files or the <code>CONFIG_FILE</code> changes.\nHow to make <em>paster</em> initiate auto-restart also when some other file (not Python source file) changes?</p>\n\n<p>UPDATE  </p>\n\n<p><a href=\"https://bitbucket.org/ianb/paste/src/160f4747e53ccbc8ed5e474e7a2c589fc21199e3/paste/reloader.py#cl-31\" rel=\"nofollow\"><code>watch_file()</code></a> function suggested by <em>mksh</em> looks like the solution to the problem. However <em>mksh</em> suggested adding its invocation to the application's entry point which seems to be more invasive than it should. Can I (non-intrusively) extend Paste's <code>serve</code> command adding new option which would result in invocation of <code>watch_file()</code> with filenames read from the app's section in <code>CONFIG_FILE</code>? </p>\n"},{"tags":["python","amazon"],"answer_count":8,"favorite_count":14,"up_vote_count":30,"down_vote_count":0,"view_count":10495,"score":30,"question_id":48884,"title":"Amazon API library for Python?","body":"<p>What Python libraries do folks use for querying Amazon product data? (Amazon Associates Web Service - used to be called E-Commerce API, or something along those lines).</p>\n\n<p>Based on my research, <a href=\"http://pyaws.sourceforge.net/\" rel=\"nofollow\">PyAWS</a> seems okay, but still pretty raw (and hasn't been updated in a while).  Wondering if there's an obvious canonical library that I'm just missing.</p>\n"},{"tags":["python","list"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":91,"score":0,"question_id":13260199,"title":"Comparing nested lists","body":"<p>I have two lists, one of the form:</p>\n\n<pre><code>[a1, b1, [[c1, d1, e1], [f1, g1, h1], etc, etc], etc]\n</code></pre>\n\n<p>and the other, a dictionary, whose entries are in the form:</p>\n\n<p><code>[[a2, b2, c2], [d2, e2, f2], etc, etc]</code>. </p>\n\n<p>I need to compare the first entries of those two sub lists there and find any which are the same, and any in the first which don't appear at all in the second.</p>\n\n<p>Foe example, if <code>c1 = d2</code>, I'd want to know, and if <code>f1</code> isn't equal to either <code>a2</code> or <code>d2</code>, I'd want to know that.</p>\n\n<p>Anyway, I'm having a bit of trouble implementing this properly, any help would be appreciated.</p>\n\n<p>Thanks!</p>\n\n<p>(I'm not sure how clear the list formats are to understand, sorry if they're still confusing)</p>\n\n<p>CODE SAMPLE:</p>\n\n<pre><code>for row in range(0, len(command[2])):\n\n    counter = 0\n\n    for nodeRows in range(0, len(nodeTable[command[0]])):\n\n        if nodeTable[command[0]][nodeRows][0] == command[2][row][0]:\n\n            if ((command[2][row][2]) + 1) &lt; nodeTable[command[0]][nodeRows][2]:\n\n                counter += 1\n\n                newrow = command[2][row]\n                newrow[1] = command[1]\n                newrow[2] = newrow[2] + 1\n\n                nodeTable[command[0]][nodeRows] = newrow\n\n                change = 'true'\n</code></pre>\n\n<p>I imagine this doesn't help. The code is a bit monolithic (that's why I didn't post it initially). But I'm basically trying to compare two values. The first values of the items from the list in the 3rd position of another list and the first values of the items from the lists contained in another list.</p>\n\n<p>Um...sorry. I have tried making the code simpler, but it's a bit complicated.</p>\n"},{"tags":["python","loops","while-loop","minimum"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13260666,"title":"Python 3.3, returning smallest value in a while loop","body":"<p>I'm trying to return the smallest value for the square root of k using Newton's method.  </p>\n\n<pre><code>k=float(input(\"Number? \"))\nx = k/2\n\ndef newton(x):\n    while abs(x**(1/2)- k) &gt;= 10**(-10):\n        if k &gt;= 0:\n            x = (x+k/x)/(2)\n            return x\n        elif k &lt; 0:\n            raise ValueError (\"Cannot take the square root of a negative number\")\n\n\nprint (\"The approximate square root of\", k, \"is\", newton(k))\nprint (\"The error is\", abs(x**(1/2)- k))\n</code></pre>\n\n<p>However, the above code only returns the first iteration. For example, if k is 2, the accurate square root by Newton's method should be 1.41422, which is the third iteration. However, the code is currently returning 1.5, the first iteration. How do I return the more accurate square root of 1.41422 instead of 1.5? Likewise, the error needs to reflect this change.   </p>\n"},{"tags":["python","matplotlib","tkinter"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13032993,"title":"Why does FigureCanvasTkAgg disables mouse scroll event in scrolled matplotlib GUI?","body":"<p>Hey I have made this GUI, that shows matplotlib plots in a tkinter interface with a scrolled canvas. But when the plots are added to the canvas the scroll event for the mouse doesn't work anymore. Im totaly new to tkinter so consider this when you check out the code if there can be improvements also. So here it is:</p>\n\n<pre><code>from Tkinter import *\n\nimport matplotlib\n#matplotlib.use('TkAgg')\n\nfrom numpy import arange, sin, pi\nfrom matplotlib.backends.backend_tkagg import FigureCanvasTkAgg, NavigationToolbar2TkAgg\nfrom matplotlib.figure import Figure\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport os\nimport matplotlib.mlab as mlab\n\nclass App:\n\ndef __init__(self, master, figureList=[]):\n    frame = Frame(master, bg='#00BFFF', borderwidth=1, relief=RAISED)\n    frame.pack(expand=YES, fill=BOTH)\n\n    master.title(\"Listed Plots\")\n    #Fullscreen for windows\n    if os.name == 'nt':\n        master.wm_state('zoomed')\n\n    #Create a Canvas\n    canvas=Canvas(frame,bg='#00BFFF', relief=SUNKEN)       \n    canvas.config(highlightthickness=0) \n\n    #Create a Scrollbar Horisontal\n    hbar=Scrollbar(frame,orient=HORIZONTAL)\n    hbar.pack(side=BOTTOM,fill=X)\n    hbar.config(command=canvas.xview)\n\n    #Create a Scrollbar Vertical\n    vbar=Scrollbar(frame,orient=VERTICAL)\n    vbar.pack(side=RIGHT,fill=Y)\n    vbar.config(command=canvas.yview)\n\n    canvas.config(xscrollcommand=hbar.set, yscrollcommand=vbar.set)\n    canvas.pack(side=TOP,expand=True,fill=BOTH)\n\n    #Create a Frame in the canvas\n    canvFrame = Frame(canvas, bg='#00BFFF')\n    canvFrame.pack()\n\n    Label(canvFrame, text=\"Matplots of data\", bg='#B4EEB4').pack(side=TOP,fill=X)\n\n    plotNbr = 1\n    windowHeight = 10\n\n    for fig in figureList:\n        Label(canvFrame, text=\"#Plotnumber: \" + str(plotNbr), bg='#FF7F24').pack(side=TOP,fill=X)\n\n        frm = Frame(canvFrame, bg='#9FB6CD')\n        frm.pack(side=TOP, fill=X)\n\n        self.canvasMPL2, self.canvasMPLToolBar2 = getCanvas(frm, fig)\n        self.canvasMPL2.pack(side=TOP)\n        self.canvasMPLToolBar2.pack(side=TOP)\n\n        #Create space for the plot and tool bar.\n        windowHeight = windowHeight + 680\n        plotNbr = plotNbr + 1\n\n\n    canvas.config(width=1200,height= windowHeight)\n    canvas.config(scrollregion=(0,0,1200, windowHeight))\n\n    canvas.create_window(0,0, anchor = NW, window = canvFrame, width = 1200, height = windowHeight)\n\n    canvas.focus_set() #Doesnt work with FigureCanvasTkAgg, this steals the focus \n    #canvas.focus_force()\n    #canvas.grab_set_global()\n\n    #scrollwheel settings\n    canvas.configure(yscrollincrement='25')\n\n    def rollWheel(event):\n        #print \"Mousescroll\"\n        direction = 0\n        if event.num == 5 or event.delta == -120:\n            direction = 1\n        if event.num == 4 or event.delta == 120:\n            direction = -1\n        event.widget.yview_scroll(direction, UNITS)\n\n    canvas.bind('&lt;MouseWheel&gt;', lambda event: rollWheel(event))\n    canvas.bind('&lt;Button-4&gt;', lambda event: rollWheel(event))\n    canvas.bind('&lt;Button-5&gt;', lambda event: rollWheel(event))\n\n\nplottedFigures = [] #To store matplotlib figures\n\ndef addPlottedFig(figure):\n    '''\n    Matplotlib figures to be shown in the GUI\n    '''\n    plottedFigures.append(figure)\n\n\ndef getCanvas(masterWidget, figure=None):\n    '''\n    Returns canvas of plot and canvas of tool bar\n    '''\n    if(figure==None):\n        f = getHistoGramPlot() #For testing\n        canvas = FigureCanvasTkAgg(f, master=masterWidget)\n    else:\n        canvas = FigureCanvasTkAgg(figure, master=masterWidget)\n\n    canvas.show()\n    toolbar = NavigationToolbar2TkAgg( canvas, masterWidget )\n    toolbar.update()\n\n    #return the plot and the toolbar\n    return canvas.get_tk_widget(), canvas._tkcanvas\n\ndef initiate(FigureList=None):\n    '''\n    Start the GUI Application\n    '''\n    root = Tk()\n    app = App(root, FigureList)\n    root.mainloop()\n\n\ndef main():\n    '''\n    Shows 2 histograms plots in a tkinter GUI\n    '''\n    fig1 = getHistoGramPlot()\n    fig2 = getHistoGramPlot()\n\n    figList = [fig1, fig2]\n\n    initiate(figList)\n\ndef getHistoGramPlot():\n    '''\n    Return a figure of a histogram\n    '''\n    mu, sigma = 100, 15\n    x = mu + sigma * np.random.randn(10000)\n    fig = plt.figure(figsize=(12, 6), dpi=100)\n    ax = fig.add_subplot(111)\n    n, bins, patches = ax.hist(x, 50, normed=1, facecolor='green', alpha=0.6)\n    bincenters = 0.5*(bins[1:]+bins[:-1])\n    mu = np.median(x)\n    sigma = np.std(x)\n    y = mlab.normpdf( bincenters, mu, sigma)\n    l = ax.plot(bincenters, y, 'r--', linewidth=1)\n    ax.set_xlabel('Values')\n    ax.set_ylabel('Probability')\n    xlimTop = max(x)\n    xlimBottom = min(x)\n    ax.set_xlim(xlimBottom, xlimTop)\n    ax.grid(True)\n\n    return fig\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"},{"tags":["python","math","cos"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":104,"score":1,"question_id":13260296,"title":"Python cos(90) and cos(270) not 0","body":"<p>What is going on??</p>\n\n<p>Testing out sin and cos functions to find out why I get so beautiful positioning on the wrong places when outputting my coordinates into a SVG file. So I made this test code, which I can predict what the answer is to find out why. Oddly nothing that effects the calculation it self adds this behavior but simply the position of where I'm about to stay. If the position is 0 and will become 0 after the calculation it won't work, but if position is 1 and will become 1 after the calculation it works.</p>\n\n<p>First Test:</p>\n\n<pre><code>import math\n\ncX = 2\ncY = 2\nr = 2\n\nrcX = cX + (r * math.cos(math.radians(0)))\nrcY = cY + (r * math.sin(math.radians(0)))\n\nprint rcX #4\nprint rcY #2\nr = 1\n\nrlX = rcX + (r * math.cos(math.radians(90)))\nrlY = rcY + (r * math.sin(math.radians(90)))\n\nprint rlX #4\nprint rlY #3\nr = 4\n\nflX = rlX + (r * math.cos(math.radians(180)))\nflY = rlY + (r * math.sin(math.radians(180)))\n\nprint flX #0\nprint flY #3\nr = 2\n\nprint r * math.cos(math.radians(270))\nprint flX + (r * math.cos(math.radians(270))) #-3.67394039744e-16 should be 0\nprint flY + (r * math.sin(math.radians(270))) #1\n</code></pre>\n\n<p>Now I change cX to 3 and it works even if it doesn't effect the calculation which is:</p>\n\n<pre><code>r * math.cos(math.radians(270))\n</code></pre>\n\n<p>The result of that calculation is added to the x coordination</p>\n\n<pre><code>import math\n\ncX = 3\ncY = 2\nr = 2\n\nrcX = cX + (r * math.cos(math.radians(0)))\nrcY = cY + (r * math.sin(math.radians(0)))\n\nprint rcX #5\nprint rcY #2\nr = 1\n\nrlX = rcX + (r * math.cos(math.radians(90)))\nrlY = rcY + (r * math.sin(math.radians(90)))\n\nprint rlX #5\nprint rlY #3\nr = 4\n\nflX = rlX + (r * math.cos(math.radians(180)))\nflY = rlY + (r * math.sin(math.radians(180)))\n\nprint flX #1\nprint flY #3\nr = 2\n\nprint r * math.cos(math.radians(270))\nprint flX + (r * math.cos(math.radians(270))) #1\nprint flY + (r * math.sin(math.radians(270))) #1\n</code></pre>\n"},{"tags":["python","qt","pyqt","pyqt4","qwebview"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13260407,"title":"Qt: Take over system open file dialog","body":"<p>I would like to automate the upload of a file to a website using PyQt4's QWebView, but there's a part I can't figure out yet. To upload the file, the website has a button, which opens a dialog from which you are supposed to select the local file. So, these are my questions :) Is there a way to control that dialog once I click the button? Is there a better way to achieve this?</p>\n"},{"tags":["python","sqlalchemy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13184275,"title":"How to retrieve python list of SQLAlchemy result set?","body":"<p>I have the following query to retrieve a single column of data:</p>\n\n<pre><code>routes_query = select(\n    [schema.stop_times.c.route_number],\n    schema.stop_times.c.stop_id == stop_id\n).distinct(schema.stop_times.c.route_number)\nresult = conn.execute(routes_query)\n\nreturn [r['route_number'] for r in result]\n</code></pre>\n\n<p>I am wondering if there is a cleaner way to retrieve a native list of the data rows returned.</p>\n"},{"tags":["python","xml","elementtree"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13259768,"title":"python cElementTree uses too much memory","body":"<p>I have the following code segment</p>\n\n<pre><code>import xml.etree.cElementTree as et\n\nfstring = open(filename).read()\ntree = et.fromstring(fstring)\n\nfor el in tree.findall('tag'):\n    do stuff\n</code></pre>\n\n<p>However, fstring is HUGE (~80mbs of data), and I am hiting \"Out of memory\" error when I try to convert the string to a tree. Is there a way to get around that, perhaps some kind of lazy evaluation of the tree?</p>\n\n<p>Thanks!</p>\n\n<p>EDIT: </p>\n\n<p>I tried using iterparse, and it still gives me MemoryError on the iterparse call. Is there a way to possibly split up the file into multiple chunks and process them one by one?</p>\n"},{"tags":["python","ctypes","access-violation","libsvm"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":11921564,"title":"using Python ctypes-CDLL to LibSVM: access violation error","body":"<p>I'm working on a change in the LibSVM Py interface. The interface (both the original and mine) first builds a class that uses ctypes structs from the given data </p>\n\n<blockquote>\n  <blockquote>\n    <p>prob = svm_problem(..) in svmutil.py [for anyone who knows the package]</p>\n    \n    <p>then runs the optimization procedure on that structure.</p>\n    \n    <p>libsvm = ctypes.CDLL(..); m = libsvm.svm_train(prob, param)</p>\n  </blockquote>\n</blockquote>\n\n<p>the basic unit in  is the class svm_node</p>\n\n<pre><code>class svm_node(Structure):\n   _names = [\"index\", \"value\"]\n   _types = [c_int, c_double]\n   _fields_ = genFields(_names, _types)\n</code></pre>\n\n<p> creates an array of nodes with an ending to represent a vector</p>\n\n<pre><code>def gen_svm_nodearray(indices, data):\n   L = len(data)\n   ret = (svm_node * (L+1))()\n   ret[-1].index = -1\n\n   for idx,(j,val) in enumerate(zip(indices,data)):\n      ret[idx].index = j\n      ret[idx].value = val\n\n   return ret\n</code></pre>\n\n<p> is an instance of class  </p>\n\n<pre><code>class svm_problem(Structure):\n    _names = [\"l\", \"y\", \"x\"]\n    _types = [c_int, POINTER(c_double), POINTER(POINTER(svm_node))]\n    _fields_ = genFields(_names, _types)\n</code></pre>\n\n<p>which its field  is being created by</p>\n\n<pre><code>tmp_xi = gen_svm_nodearray(inds, data) \nself.x[cnt] = tmp_xi\n</code></pre>\n\n<p>Now, the problem is the following: I create data and inds from a certain input and it works OK. But then I want to add some more features and then it fails. Currently, it looks like this - The following code works:</p>\n\n<pre><code>inds, data = make_data(args) \ninds.append(N)# N guranteed to be bigger than the highest index so far\ndata.append(0.1234567)\nself.x[cnt] = gen_svm_nodearray(inds, data)\n</code></pre>\n\n<p>However, if I replace the 0.123.. in random.random() or do </p>\n\n<pre><code>data.append(MoreFeatures[i]) #for some i,MoreFeatures\n</code></pre>\n\n<p>The program creates the prob class successfully and the craches when calling the CDLL with </p>\n\n<pre><code>m = libsvm.svm_train(prob, param)\nWindowsError: exception: access violation reading 0x3299EA7D\n</code></pre>\n\n<p>Sombody has an Idea?</p>\n"},{"tags":["python","cython"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13245514,"title":"Cython cannot convert Python object to 'Handle *'","body":"<p>I am trying to wrap a cpp lib into <code>cython</code>. Here are some details:</p>\n\n<p><code>Handle.h</code>:</p>\n\n<pre><code>class Handle {\n    public:\n    // accessors\n    // mutators  \n};\n\nclass Store {\n    public:\n        Handle* lookup(char* handleName);\n        int update(Handle*);\n};\n</code></pre>\n\n<p><code>handle.pyx</code>:</p>\n\n<pre><code>cdef extern from \"Handle.h\" namespace \"xxx\":\n    cdef cppclass Handle:\n        ....\n\ncdef extern from \"Handle.h\" namespace \"xxx\":\n    cdef cppclass Store:\n        Handle* lookup(char*)\n        int update(Handle*)\n\ncdef class PyHandle:\n    cdef Handle* handle\n        ....\n\ncdef class PyStore:\n    cdef Store* store\n    def __cinit__(self):\n        store = ....\n    def lookup(self, name):\n        handle = self.store.lookup(name)\n        pHandle = PyHandle()\n        pHandle.handle = handle\n        return pHandle\n    def update(self, h):\n        self.store.update(h.handle)\n</code></pre>\n\n<p>The last statement is giving me an error saying <code>Cannot convert Python object to 'Handle *'</code>. I know I am missing something simple. How do I pass the <code>Handle*</code> that is embedded in the Python object to the call?</p>\n"},{"tags":["python","list","callback"],"answer_count":3,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":88,"score":7,"question_id":13259179,"title":"List callbacks?","body":"<p>Is there any way to make a list call a function every time it's being modified?</p>\n\n<p>For example:</p>\n\n<pre><code>&gt;&gt;&gt;l = [1, 2, 3]\n&gt;&gt;&gt;def callback():\n       print \"list changed\"\n&gt;&gt;&gt;apply_callback(l, callback)  # Possible?\n&gt;&gt;&gt;l.append(4)\nlist changed\n&gt;&gt;&gt;l[0] = 5\nlist changed\n&gt;&gt;&gt;l.pop(0)\nlist changed\n5\n</code></pre>\n"},{"tags":["php","python"],"answer_count":6,"favorite_count":1,"up_vote_count":3,"down_vote_count":1,"view_count":545,"score":2,"question_id":3452107,"title":"Programming language for simple dynamic web site development?","body":"<p>I only know the basics of HTML/CSS. The only experience with web development I have is whatever I learned in Web Development 101 at my university, aka \"OMG - CSS u guise, 101\". </p>\n\n<p>I'm mainly interested in building simple dynamic sites. That's the whole reason I got into this in the first place. I'm at the point now where I realize that it's not enough to only know HTML and CSS.</p>\n\n<p>I realize that I'm going to have to go through a learning curve no matter what programming language I choose to learn, so I figure I should learn something that will be most the beneficial in the long run. I'm all about putting in the sweat equity now to build a better future. PHP seems like the easy and obvious first choice, but I keep reading over and over and over again how people have switched from PHP to Python and never been happier. Or how you should skip PHP altogether and just learn Python or Perl.</p>\n\n<p>But I don't understand why that is!</p>\n\n<p>I keep looping back to thinking \"F___ it, I just need to learn PHP so I can be a WordPress ninja.\" But then I do some more reading, and I walk away feeling like PHP is more of a 'temporary fix' language, and that the REAL languages are Python/Perl/Ruby. But I'm very split because I really don't need to do anything complicated. I just need to build basic 50-page web sites with some database interactivity.</p>\n\n<p>Do you have any advice? What would you learn if you were in my spot??</p>\n"},{"tags":["python","eclipse","pydev"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13260065,"title":"Go to source tags","body":"<p>How to setup Eclipse/pydev to index all source files so that I can click on a variable/function/etc and go to its definition. I want it to work just like indexing of CTAGS or the way Eclipse handles Java vars/funcs. Hover to get info and [ctrl]+mouse_click to go to the definition.</p>\n\n<p>I've tried adding the source folder to window/prefs/pydev/interpreter-python/libs and Environment and that does not help.</p>\n"},{"tags":["python","tkinter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13242970,"title":"Tkinter - Entry box - formatted for date","body":"<p>Have an entry box that I would like to store the \" / \" 's in it for the date so the user can only type it one way.</p>\n\n<p>So the entry box default text would be \" <code>__/__/____</code>\" without the underscores of course, and the \" / \" 's not deleted when the user enters the text.</p>\n\n<p>Thanks</p>\n"},{"tags":["python","xml"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":61,"score":1,"question_id":13149523,"title":"Python - for loop only outputs the last iteration","body":"<p>I'm trying to make an application to create a xml file and I want to assign a text to certain elements. This text consists on image files on a folder. The code is as follows:</p>\n\n<pre><code>    import glob\n    import os\n    import os.path\n\n    from xml.etree import ElementTree\n    from xml.dom import minidom\n    import xml.etree.ElementTree as ET\n\n    def prettify(elem):\n    \"\"\"Return a pretty-printed XML string for the Element.\n    \"\"\"\n        rough_string = ElementTree.tostring(elem, 'utf-8')\n        reparsed = minidom.parseString(rough_string)\n        return reparsed.toprettyxml(indent=\"  \")\n\n    path = \"/home/unkuiri/Ubuntu One/Wallpapers/*\"\n\n\n    background = ET.Element('background')\n    starttime = ET.SubElement(background, 'starttime')\n    year = ET.SubElement(starttime, 'year')\n    month = ET.SubElement(starttime, 'month')\n    day = ET.SubElement(starttime, 'day')\n    hour = ET.SubElement(starttime, 'hour')\n    minute = ET.SubElement(starttime, 'minute')\n    second = ET.SubElement(starttime, 'second')\n    static = ET.SubElement(background, 'static')\n    duration_stat = ET.SubElement(static, 'duration')\n    files = ET.SubElement(static, 'file')\n    transition = ET.SubElement(background, 'transition')\n    duration_trans = ET.SubElement(transition, 'duration')\n    from1 = ET.SubElement(transition, 'from')\n    to = ET.SubElement(transition, 'to')\n\n    dirList = glob.glob(path)\n\n    while len(background.findall(\"./static/file\")) &lt;= len([name for name in os.listdir('.') if os.path.isfile(name)]):\n            background.append(static)\n            background.append(transition)\n            continue\n\n    for fname in dirList:   \n\n        to.text = fname\n        files.text = fname\n        from1.text = fname\n\n\n    print prettify(background)\n</code></pre>\n\n<p>This code outputs a correctly formatted xml but only with the last path, repeating it as many times as the number of files in folder. What I want is for it to print one path per \"file\" element and that same path on the preceeding \"to\" element and the next from \"element\". Maybe it is a simple solution that I'm not aware of. I'm still a newbie.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["python","string","dictionary","inverted-index"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":44,"score":2,"question_id":13259903,"title":"Python - query for inverted index","body":"<p>This is my first post on SO and I apologize in advance if my question turns out to be a bit trivial, I'm relatively new to programming world, and I chose python for my first \"serious\" OOP language. I did a search through SO archive but I couldn't find any question completely related to mine. Okay, long story short, here's the problem: <br><br>\nI'm working on inverted index. I found a couple of tutorials and tips on the net to follow and I did the following: </p>\n\n<ul>\n<li><p>class Document for stemming the words and returning them with their start and end position thanks to finditer function. </p></li>\n<li><p>class Inverted_Index that takes a collection of a documents (list in a list), tokenize them and puts them in inverted index in a form of </p></li>\n</ul>\n\n<p><code>\n    {'word':{document_id:(start_pos, end_pos)}}\n</code></p>\n\n<p>like\n<code>{'cloud': {0: [(5, 10)]}, 'document': {1: [(11, 19)], 2: [(22, 30)]} ...}</code>.\n(I did document_id with a help of SO topic, iterating through enumerated collection of a documents. And about nested dictionaries, I made them amateurishly, like:</p>\n\n<pre><code>if nested_dict not in existing_dict:\n    existing_dict[nested_dict] = {}\n</code></pre>\n\n<p>While I was reading stack owerflow I noticed that \"defaultdict\" datatype is pretty much superior way for doing that, but I haven't yet figured out \"collections\" module.). <br></p>\n\n<p>Back on track: inside of Inverted_Index I did a Query method (just a version of OR operator) that takes string as a query, and if that string matches a key/term in my inverted index, returns back document_id with start and ending point of a term, like: </p>\n\n<pre><code>[(1, [(0, 4), (11, 19)]), ...]\n</code></pre>\n\n<p>And after that I was... stuck. I want to make a query output that prints out found word in a document along with it's environment, but I don't know how to connect result from a query method (document_id with start and end position) and inverted index, and I don't have a clue how to highlight that matched query inside her environment. Because of that I made starting and end point, but I have no idea how to accentuate it in python? Bold it?</p>\n\n<p>I thought of result something like: <br></p>\n\n<blockquote>\n  <p>###################<br>\n      Your query:'chocolate pudding'<br>\n      Results:<br>\n      ########<br>\n      In a document with id: 1<br>\n      yaddi yaddi yadda chocolate bla bla bla pudding<br>\n      hocolate bla bla bla pudding yaddi yaddi yadda bla<br></p>\n</blockquote>\n\n<p>I mean, I was reading <a href=\"http://docs.python.org/2/library/string.html#string.center\" rel=\"nofollow\">http://docs.python.org/2/library/string.html#string.center</a> and thinking that aligning found words/queries in same column would do to trick. But I don't know how to get there, so any kind of hint would be great, because I'm not stuck in my program as I'm stuck in understanding the logic behind python, and in that case tutorials don't do justice. (Yes, I got some python books, but they have extended approach to this kind of matter, possibly considering it is not for beginners, but I don't know where to begin with, what programs to make that I can make use of. The thing is, we learn linguistic theory and IR theory in college, but we do a few things in practice.).</p>\n\n<p>Thanks!</p>\n\n<p>And sorry about this story-of-my-life end :D</p>\n\n<p><br>\nI forgot, a code for not making this topic vague:</p>\n\n<pre><code>class inverted_index(dict):\n\n    def __init__(self,collection_of_docs):\n        for doc_id,document in enumerate(collection_of_docs):\n            for word,start,end in document.tokenize(): #form: [('sky', 0, 4)]\n                if word not in self:\n                    self[word]={}\n                if doc_id not in self[word]:\n                    self[word][doc_id]=[]\n                self[word][doc_id].append((start,end))\n\n\n    def query(self,query_string):\n        result={}\n        for query_term in re.findall(r'\\w+',query_string.lower(),re.UNICODE):\n            for doc_id in self.get(query_term,{}):\n                if doc_id not in result:\n                    result[doc_id]=self[query_term][doc_id]\n                else:\n                    result[doc_id]=result[doc_id]+self[query_term][doc_id]\n        return sorted(result.items(),key=lambda e:-len(e[1]))\n</code></pre>\n"},{"tags":["python"],"answer_count":5,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":78,"score":8,"question_id":13259933,"title":"self deleting instance","body":"<p>Is it possible to make a class call <code>del()</code> for some instances under some condition? Or turn self into None?</p>\n\n<pre><code>    class T:\n        def __init__(self, arg1, arg2):\n            condition=check_condition(arg1,arg2)\n            if not condition:\n               do_something(arg1)\n            else:\n               del(self) #or self=None or return None\n</code></pre>\n\n<p>I need to do something like this to be sure that will never exist a kind of instance.</p>\n"},{"tags":["python","variables","variable-naming","metasyntactic-variable"],"answer_count":2,"favorite_count":3,"up_vote_count":25,"down_vote_count":0,"view_count":2136,"score":25,"question_id":5893163,"title":"Underscore in Python","body":"<p>What is the meaning of <code>_</code> after <code>for</code> in this code?</p>\n\n<pre><code>if tbh.bag:\n   n = 0\n   for _ in tbh.bag.atom_set():\n      n += 1\n</code></pre>\n"},{"tags":["python","gui","button","callback","tkinter"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":72,"score":1,"question_id":13250835,"title":"How to write button callback?","body":"<p>Below is the code that I am using to make a chessboard out of buttons.</p>\n\n<pre><code>from Tkinter import *\n\nfor x in xrange(8):\n    for y in xrange(8:\n        if((x+y)%2 == 0):\n            Button(root, bg=\"white\", width=11, height=5).grid(row=y, column=x)\n        else:\n            Button(root, bg=\"black\", width=11, height=5).grid(row=y, column=x)\n</code></pre>\n\n<p>I know how to make a callback function for an individual button, but I am not sure how I would go about implementing a callback function for each of these 64 buttons so that, when pressed, they will return their position in the grid.</p>\n"},{"tags":["python","rabbitmq","celery"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13188849,"title":"How to override send_task BaseTask class?","body":"<p>I did some kind of mini framework to be able to catch connection errors with <code>celery</code> in case <code>rabbitmq</code> shutsdown which handles errors in a more graceful way and it works pretty well except when using send_task.</p>\n\n<p>Here is some code to clarify the idea:</p>\n\n<pre><code>class MyBaseTask(base_task.Task):\n    \"\"\" Base Class to handle tasks from Me hohoho!\"\"\"\n    abstract = True\n\n    @classmethod\n    def delay(cls, *args, **kwargs):\n        \"\"\"Hook to catch connection errors\"\"\"\n        try:\n            return super(ORBaseTask, cls).apply_async(args, kwargs)\n        except socket.error as e:\n            cls._safe_failover()  # a function to handle this error\n            cls.get_logger().error(str(e))\n        except Exception as e:\n            cls.get_logger().error(\"Uknown Error: %s\" % str(e))\n            raise  # normal exception\n</code></pre>\n\n<p>Now to use it what I do is subclass this <code>MyBaseTask</code> class like this:</p>\n\n<pre><code>class MyL33tTask(MyBaseTask):\n    name = 'task.my_leet_task'\n\n    def run(self, *args, **kwargs):\n        # yada yada\n</code></pre>\n\n<p>and it will execute this safe_failover function when a socket error happens (Aka, when <code>rabbitmq</code> is down). Sadly this doesn't happens when I use send_task('task.my_leet_task') since it uses some kind of proxy where <code>MyBaseTask</code> isn't loaded. Is there an easy way to override <code>send_task</code> to use <code>MyBaseTask</code> instead?</p>\n"},{"tags":["python","datetime","timezone","epoch","pytz"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":77,"score":2,"question_id":12978391,"title":"Localizing Epoch Time with pytz in Python","body":"<p>Im working on converting epoch timestamps to dates in different timezones with pytz.  What I am trying to do is create a DateTime object that accepts an Olson database timezone and an epoch time and returns a localized datetime object.  Eventually I need to answer questions like \"What hour was it in New York at epoch time 1350663248?\"</p>\n\n<p>Something is not working correctly here:</p>\n\n<pre><code>import datetime, pytz, time\n\nclass DateTime:\n    def __init__(self, timezone, epoch):\n        self.timezone = timezone\n        self.epoch = epoch\n        timezoneobject = pytz.timezone(timezone)\n        datetimeobject = datetime.datetime.fromtimestamp( self.epoch )\n        self.datetime = timezoneobject.localize(datetimeobject)\n\n    def hour(self):\n        return self.datetime.hour\n\nif __name__=='__main__':\n    epoch = time.time()\n    dt = DateTime('America/Los_Angeles',epoch)\n    print dt.datetime.hour\n    dt = DateTime('America/New_York',epoch)\n    print dt.datetime.hour\n</code></pre>\n\n<p>This prints the same hour, whereas one should be 3 or so hours ahead.  Whats going wrong here?  I'm a total Python beginner, any help is appreciated!</p>\n"},{"tags":["python","sql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13254268,"title":"Split column defintions of SQL create table query","body":"<p>I want to split all column definitions of a sql query into seperate strings. </p>\n\n<p>So:</p>\n\n<pre><code> `citizen_group` int(10) NOT NULL,\n  `container_group` int(10) NOT NULL,\n  PRIMARY KEY (`citizen_group`,`container_group`),\n  KEY `fk_containergroup_readeraccess` (`container_group`)\n</code></pre>\n\n<p>Into:</p>\n\n<pre><code>['`citizen_group` int(10) NOT NULL', '`container_group` int(10) NOT NULL','PRIMARY KEY (`citizen_group`,`container_group`)',' KEY `fk_containergroup_readeraccess` (`container_group`)']\n</code></pre>\n\n<p>First I used <code>split(',')</code>. But this gives a problem when the sql has a multicolumn primary key. I cannot expect that each definition is on a new line, so I can't split on newlines. </p>\n\n<p>How can I split these column definitions?</p>\n"},{"tags":["python","python-3.x","subprocess"],"answer_count":2,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13258462,"title":"Provide called shell script with input in Python","body":"<p>I have a python program which uses various Bash shell scripts. However, some of them require (y/n) input. I know the input required based on the question number so it's a matter of being able to provide that automatically.</p>\n\n<p>Is there a way in Python to do that?</p>\n\n<p>As a last resort I can send a signal to a window etc. but I'd rather not do that.</p>\n"},{"tags":["python","sqlalchemy","api-design"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13258934,"title":"Applying LIMIT and OFFSET to all queries in SQLAlchemy","body":"<p>I'm designing an API with SQLAlchemy (querying MySQL) and I would like to force all my queries to have page_size (LIMIT) and page_number (OFFSET) parameters.</p>\n\n<p>Is there a clean way of doing this with SQLAlchemy?  Perhaps building a factory of some sort to create a custom Query object?  Or maybe there is a good way to do this with a mixin class?</p>\n\n<p>I tried the obvious thing and it didn't work because .limit() and .offset() must be called after all filter conditions have been applied:</p>\n\n<pre><code>def q(page=0, page_size=None):\n    q = session.query(...)\n    if page_size: q = q.limit(page_size)\n    if page: q = q.offset(page*page_size)\n    return q\n</code></pre>\n\n<p>When I try using this, I get the exception:</p>\n\n<pre><code>sqlalchemy.exc.InvalidRequestError: Query.filter() being called on a Query which already has LIMIT or OFFSET applied. To modify the row-limited results of a  Query, call from_self() first.  Otherwise, call filter() before limit() or offset() are applied.\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Not sure if this is the best way, but I hacked this up and it seems to work given a couple minutes of testing:</p>\n\n<pre><code>from sqlalchemy.orm import Query, sessionmaker\nfrom sqlalchemy.orm.query import _generative\n\nclass DeferredLimitOffsetQuery(Query):\n    _deferred_limit = None\n    _deferred_offset = None\n\n    @_generative(Query._no_statement_condition)\n    def deferred_limit(self, limit):\n        self._deferred_limit = limit\n\n    @_generative(Query._no_statement_condition)\n    def deferred_offset(self, offset):\n        self._deferred_offset = offset\n\n    def __iter__(self):\n        \"\"\"Applies a deferred limit and offset to Query.\"\"\"\n        q = self.limit(self._deferred_limit).offset(self._deferred_offset)\n\n        return Query.__iter__(q)\n</code></pre>\n\n<p>And I can use this query_cls by configuring with sessionmaker:</p>\n\n<pre><code>Session = sessionmaker(bind=engine, query_cls=DeferredLimitOffsetQuery)\n</code></pre>\n"},{"tags":["python",".net"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13259617,"title":"Python for .NET \"unable to find assembly\" error","body":"<p>I'm using CPython and I have a C# dll.  I'm trying to use Python for .NET to make them talk.  I can't use IronPython because I need to integrate this into an existing CPython system.</p>\n\n<p>I'm completely new to Python for .NET, and I actually have very little experience with Python and no experience with C#.  So please forgive me if my question seems very basic.</p>\n\n<p>I'm using Python 2.7.3, and I downloaded\npythonnet-2.0-alpha2-clr2.0_131_py27_UCS2 and unzipped it into a folder named pyfornet_test, which also contains the dll I'm trying to use (called DotNet4Class.dll)</p>\n\n<p>Then I run this:</p>\n\n<pre><code>import sys\n\nimport os\n\nimport clr\n\nsys.path.append(r\"C:\\pyfornet_test\")\n\nclr.AddReference(\"DotNet4Class.dll\")\n</code></pre>\n\n<p>Which gives me this error:</p>\n\n<pre><code>System.IO.FileNotFoundException: Unable to find assembly 'DotNet4Class.dll'.\n   at Python.Runtime.CLRModule.AddReference(String name) in C:\\Users\\Barton\\Documents\\Visual Studio 2008\\Projects\\PyShar\np\\trunk\\pythonnet\\src\\runtime\\moduleobject.cs:line 375\n</code></pre>\n\n<p>Any advice would be much appreciated. Thank you!</p>\n"},{"tags":["javascript","jquery","python","web-applications","flask"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13259583,"title":"How is a text file sent to a browser line by line","body":"<p>I have a text file and want to send it line by line to a web browser. So as each line is read it is output in the browser. </p>\n\n<p>I presume JQuery would be the route to take, but I've never used it as the client needs to keep the connection open to receive the (1000s) of lines I'll be sending.</p>\n\n<p>This means I'm unsure how to render the html/ javascript page. This is my python server code:</p>\n\n<pre><code>from flask import Flask,render_template, request\n\napp = Flask(__name__)\n\n\n@app.route('/_reader')\ndef reader():\n    f = open('/home/ranjeev/Desktop/sample_tweets.dat', 'rb')\n    for line in f:\n        print line\n    return line\n\n@app.route('/')\ndef index():\n    return render_template('index.html')\n\nif __name__ == '__main__':\n    app.run(debug=True, port= 8888)\n</code></pre>\n\n<p>And my html code:</p>\n\n<pre><code>{% extends \"layout.html\" %}\n{% block body %}\n&lt;script type=text/javascript&gt;\n  $(function() {\n      $.getJSON($SCRIPT_ROOT + '/_reader', \n       function(data) {\n        $(\"#result\").text(data.result);\n});\n      return false;\n    });\n\n&lt;/script&gt;\n&lt;h1&gt;Coordinates&lt;/h1&gt;\n&lt;p&gt;\n   &lt;span id=result&gt;?&lt;/span&gt;\n{% endblock %}\n</code></pre>\n\n<p>I would really appreciate help, as it seems like this is a very complex issue, which I don't think it should be.</p>\n\n<p>Thanks</p>\n"},{"tags":["python","sqlalchemy"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13256801,"title":"Strategy for being able to reverse a deletion using SQLAlchemy","body":"<p>I have a series of related tables maintained by Python/SQLAlchemy. If I delete a row in a particular table, I want the ability to be able to reverse that delete at some point in the future, in case of a mistake. I could do this using an is_deleted column and filter on that, but that becomes a pain when I'm querying other tables for related data. I could add an is_deleted column to all the other tables, and when a row from the main table is deleted, toggle them all. But then for every query on all the tables I'd have to filter on is_deleted. It can be done, but I'm hoping there's a better strategy.</p>\n\n<p>One thought would be to move all the deleted data to another set of tables, that only store deleted data. But it's unclear to me if SQLAlchemy allows me to switch the table a particular object is associated with. I think this would be the preferred solution, but I don't know if it can be done.</p>\n\n<p>Another thought is that I could run a second database, and copy the deleted data over. But that adds a layer of administration complexity that I'd like to avoid.</p>\n\n<p>Any thoughts would be appreciated.</p>\n"},{"tags":["python","parsing","web-crawler"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13259882,"title":"Web Crawler in Python","body":"<p>I'm trying to write a basic web crawler in Python. The trouble I have is parsing the page to extract url's. I've both tried BeautifulSoup and regex however I cannot achieve an efficient solution.</p>\n\n<p>As an example: I'm trying to extract all the member urls in Facebook's Github page. (https://github.com/facebook?tab=members). The code I've written extracts member URL's; </p>\n\n<pre><code>def getMembers(url):\n  text = urllib2.urlopen(url).read();\n  soup = BeautifulSoup(text);\n  memberList = []\n    #Retrieve every user from the company\n    #url = \"https://github.com/facebook?tab=members\"\n\n  data = soup.findAll('ul',attrs={'class':'members-list'});\n  for div in data:\n    links = div.findAll('li')\n    for link in links:\n          memberList.append(\"https://github.com\" + str(link.a['href']))\n\n  return memberList\n</code></pre>\n\n<p>However this takes quite a while to parse and I was wondering if I could do it more efficiently, since crawling process is too long.</p>\n"},{"tags":["python","django","filter","django-admin"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":13121568,"title":"Filter list_filter in django admin","body":"<p>I need to filter by a field one to many but I just want to show related objects and not all.</p>\n\n<p>is this possible, or I have to create a custom filter?</p>\n"},{"tags":["python","ide","keyboard-shortcuts"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":10,"score":0,"question_id":13259833,"title":"Dreampie: Switch between the upper and lower screen sections","body":"<p><img src=\"http://i.stack.imgur.com/v9nF6.png\" alt=\"Dreampie interface, with two sections\"></p>\n\n<p>The only way I can manage this is by clicking into each section, usually. I have found that you can \"reload\" an already interpreted line from the the upper half by pressing enter, and then using <code>ctrl+a, backspace</code> to delete the line in the staging area below, essentially moving into the bottom half without clicking. But this is very ugly, and I hate reaching for the mouse if I don't have to.</p>\n"},{"tags":["python","sockets","networking","nat"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13215100,"title":"Ideas or algorithms when programming an NAT","body":"<p>I'm working on a Python tunneling project using TUNTAP.  The data received on a TUNTAP interface contains the original IP packet including all headers.  I can do one of two things.</p>\n\n<p>On the incoming side I am listening with Twisted.  On the outgoing side I will have a raw socket which dumps the IP packet.  Before dumping the packet the program swaps the source address with that of the server.  It also recomputes the TCP and UDP checksums.  It also swaps the ports using one of the following methods.  This information is tracked in the NAT table</p>\n\n<p>1) Use a single port per user such as</p>\n\n<pre><code> US.ER.01.IP:10000 ----&gt; SE.RV.ER.IP:3000 ----&gt; facebook.com:80\n US.ER.01.IP:10001 ----&gt; SE.RV.ER.IP:3000 ----&gt; facebook.com:80\n US.ER.02.IP:3000 ----&gt; SE.RV.ER.IP:3001 ----&gt; facebook.com:80\n</code></pre>\n\n<p>Could this cause issues if the second with user's 1s simultaneous requests for facebook?  How would the system know how to route facebook's reply.  It is incoming on port 3000 so it belongs to user1 but does it get mapped back to 10000 or 10001?</p>\n\n<p>2) Use a unique port for each connection such as</p>\n\n<pre><code> US.ER.01.IP:10000 ----&gt; SE.RV.ER.IP:3000 ----&gt; facebook.com:80\n US.ER.01.IP:10001 ----&gt; SE.RV.ER.IP:3001 ----&gt; facebook.com:80\n US.ER.02.IP:3000 ----&gt; SE.RV.ER.IP:3002 ----&gt; remoteHost.com:22\n</code></pre>\n\n<p>How would I know when to remove entries from the NAT table?  I could see the NAT table filling up very quickly using this method.  The solutions to this are:</p>\n\n<pre><code>  I could wit for FIN packets from the server.  This will not work with UDP though.\n  I could age the NAT entry on each hit.  I could then run garbage collection \n     every N seconds.  I see this being an issue if garbage collection runs\n     and how would a server's delayed response get to the proper host if it gets\n     deleted from the table.\n</code></pre>\n\n<p>There is also the issue of reading from a raw socket.  I know how to send on one but would it be possible to receive individual IP packets.  Could the raw socket receive one packet per sock.recieve(65535) call possibly receive more than one IP packet?</p>\n\n<p>Which implementation is best?  Any other tips or things I should be watching out for?</p>\n\n<p>EDITS:</p>\n\n<p>Ok so I have N many clients.  If you misunderstood me the enitre /30 is used\nbetween the client and itself.  It is just an abstraction to make the tunnel\npossible.  I also didn't think it mattered but the websocket actaully goes through a \"proxy\" on the LAN (the IPdata is\nsimply repackaged into a new websocket, the mappings are unique however).  I did not want to make the explanation so confusing.  I do not see how this changes anything.</p>\n\n<pre><code>      Client PC     CLIENT PC              Client PC-----&gt;LAN                               INTERNET    \n Client 1: 10.1.1.2 ----&gt; 10.1.1.1 ----&gt; Websocket(IPdata) ----&gt; Browser ---&gt; newWebSocket(IPData) ----&gt; SE.RV.ER.IP\n Client 2: 10.1.1.4 ----&gt; 10.1.1.3 ----&gt; Websocket(IPdata) ----&gt; Browser ---&gt; newWebSocket(IPData) ----&gt; SE.RV.ER.IP\n Client 3: 10.1.1.6 ----&gt; 10.1.1.5 ----&gt; Websocket(IPdata) ----&gt; Browser ---&gt; newWebSocket(IPData) ----&gt; SE.RV.ER.IP\n</code></pre>\n\n<p>Each client set it's default route to be the tunnel endpoint (10.1.1.1 for example).  The client gets the IP datagram, puts it\ninto a websocket, sends the websocket to a browser on the LAN, which then sends it to the server (or perhaps another proxy).  The inside of the websocket contains\nthe original IP datagram (with the source of 10.1.1.2 or some other internal IP).</p>\n\n<p>It is important to note that the server recieves a websocket message from the internet CONTAINING the goodes (with the private source address).  How would the python server use this?  Create a new tunnel with itself then dump the packet raw into the tunnel and route appropriately?  </p>\n\n<p>Or perhaps I could use a mapping?</p>\n\n<p>How would I be able to \"map\" a tunnel abstraction over this chain of websockets?  The client does not have a route to the\ninternet but can reach the \"Browser\" which can get to the internet.  This seems to be the same case with VPN tunnels.  The\nabstraction would be as follows:</p>\n\n<pre><code> Client 1: 10.1.1.2 ----&gt; 10.1.1.1 ----&gt; Websocket(IPdata) ----&gt; Browser ---&gt; newWebSocket(IPData) ----&gt; SE.RV.ER.IP -&gt; Internet\n           10.1.2.2------------------------------------------------------------------------------------&gt; 10.1.2.1 ----&gt; Internet\n</code></pre>\n\n<p>If you know any resources to get me on the right track that would be great!</p>\n"},{"tags":["python","windows64"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13259846,"title":"ctypes.util.test() fails in windows 64","body":"<p>I'm trying to port a python script from linux to windows.</p>\n\n<p>I'm having issues loading external DLLs on the windows machine. While trying to diagnose, I ran the library function ctypes.util.test() and it fails with an exception, the error message saying it cannot find the file (msvcrt.dll, in this case). Is this normal behavior on windows? If it ain't, any clue on where to look?</p>\n\n<p>The machine is running windows 7 Home Premium, 64 bits edition.\nI tried with Python version 3.3  32 bits, 2.7 64 bits and 2.7 32 bits. They all exhibit the same behavior.\nI validated and the file is present both in the System32 and the SysWow64 folders.</p>\n\n<p>To reproduce:</p>\n\n<pre><code> C:\\&gt;\nC:\\&gt;python\nPython 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:55:48) [MSC v.1600 32 bit (Intel)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import ctypes.util\n&gt;&gt;&gt; ctypes.util.test()\n&lt;CDLL 'msvcrt', handle 76a20000 at 25ff590&gt;\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Program Files (x86)\\Python3.3.0\\lib\\ctypes\\util.py\", line 211, in test\n    print(cdll.load(\"msvcrt\"))\n  File \"C:\\Program Files (x86)\\Python3.3.0\\lib\\ctypes\\__init__.py\", line 423, in __getattr__\n    dll = self._dlltype(name)\n  File \"C:\\Program Files (x86)\\Python3.3.0\\lib\\ctypes\\__init__.py\", line 353, in __init__\n    self._handle = _dlopen(self._name, mode)\nOSError: [WinError 126] Le module spécifié est introuvable\n</code></pre>\n"},{"tags":["python","class","module","package"],"answer_count":2,"favorite_count":10,"up_vote_count":15,"down_vote_count":0,"view_count":1624,"score":15,"question_id":3842616,"title":"Organizing Python classes in modules and/or packages","body":"<p>I like the Java convention of having one public class per file, even if there are sometimes good reasons to put more than one public class into a single file. In my case I have alternative implementations of the same interface. But if I would place them into separate files, I'd have redundant names in the import statements (or misleading module names):</p>\n\n<pre><code>import someConverter.SomeConverter\n</code></pre>\n\n<p>whereas <code>someConverter</code> would be the file (and module) name and <code>SomeConverter</code> the class name. This looks pretty inelegant to me. To put all alternative classes into one file would lead to a more meaningful import statement:</p>\n\n<pre><code>import converters.SomeConverter\n</code></pre>\n\n<p>But I fear that the files become pretty large, if I put all related classes into a single module file. What is the Python best practise here? Is one class per file unusual? </p>\n"},{"tags":["python","list"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":61,"score":0,"question_id":13259288,"title":"returning a list of words after reading a file in python","body":"<p>i have a text file for example its name is test.txt , i want to read it and return a list of all words (with newlines removed) from the file .  </p>\n\n<p>i had written this code :  </p>\n\n<pre><code>def read_words(words_file):\n    open_file = open(words_file, 'r')\n    words_list =[]\n    contents = open_file.readlines()\n    for i in range(len(contents)):\n         words_list.append(contents[i].strip('\\n'))\n    return words_list    \n    open_file.close()  \n</code></pre>\n\n<p>and when i apply it , for example :</p>\n\n<pre><code>read_words('test.txt')\n</code></pre>\n\n<p>the result was :  </p>\n\n<pre><code>['hello there how is everything ', 'thank you all', 'again', 'thanks a lot']\n</code></pre>\n\n<p>how can i get the result to be :  </p>\n\n<pre><code>['hello','there','how','is','everything','thank','you','all','again','thanks','a','lot']\n</code></pre>\n\n<p>thanks</p>\n"},{"tags":["python","mysql"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13259728,"title":"error when trying to insert values into MySQL table with python","body":"<p>I'm trying to insert this row of data (i parse from a list of tuples)</p>\n\n<pre><code>(0L, u'2012-11-06T16:23:36-05:00', 0L, None, 23759918L, u'baseline', u'0 to 100', nan, 105114L, 2009524L, True, u'charge', u'Charge')\n</code></pre>\n\n<p>into a mySQL database table, but i seem to have problems with the null value (NaN), because i receive this error:</p>\n\n<pre><code>OperationalError: (1054, \"Unknown column 'nan' in 'field list'\")\n</code></pre>\n\n<p>I've tried making columns nullable in mySQL, and also making all text fields, but still no dice..</p>\n"},{"tags":["python","django","django-templates","django-views","jinja2"],"answer_count":1,"favorite_count":7,"up_vote_count":9,"down_vote_count":0,"view_count":147,"score":9,"question_id":13180419,"title":"Why do django templates render dictionaries so slowly?","body":"<p>When I render a moderately complex dictionary (4 levels deep, ~2K data points) using django 1.4's default template system the template rendering step takes over 2800ms.  When I do html-gen directly from python instead it takes ~80ms.  Even using another template library (<a href=\"http://jinja.pocoo.org/docs/\">jinja2</a>) renders the same data (in fact, almost exactly the same template syntax - as jinja2 is nearly a drop-in replacement) in under 300ms.</p>\n\n<p>Interestingly, you don't even have to actually <em>render</em> the dictionary in the template to cause this performance issue in django's template system... all you have to do is <em>pass</em> it as an available variable to a template.  A friend of mine suggested this may mean the system is, \"...doing a defensive copy or (more stupidly) a comprehension [which] will take time due to running constructors\"</p>\n\n<p>Anyone know why django's default template system takes so long to render dictionaries?</p>\n\n<p><strong>* I'll work on adding requested details below *</strong></p>\n\n<p>I am running in debug mode and have the DebugToolbarMiddleware set as one of my middleware classes.  My settings.py file includes:</p>\n\n<pre><code>TEMPLATE_CONTEXT_PROCESSORS = global_settings.TEMPLATE_CONTEXT_PROCESSORS + (\n    'django.core.context_processors.request',\n)\n</code></pre>\n\n<p>and....</p>\n\n<pre><code># rendering like this\nreturn render(\n    request,\n    template_name='ltm/search_results.html',\n    context_instance=RequestContext(request, {\n        'menus': menus,\n        'results': result_dict\n    })\n)\n</code></pre>\n"},{"tags":["python","pandas"],"answer_count":4,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":13256917,"title":"Pandas: Creating aggregated column in DataFrame","body":"<p>With the DataFrame below as an example, </p>\n\n<pre><code>In [83]:\ndf = pd.DataFrame({'A':[1,1,2,2],'B':[1,2,1,2],'values':np.arange(10,30,5)})\ndf\nOut[83]:\n   A  B  values\n0  1  1      10\n1  1  2      15\n2  2  1      20\n3  2  2      25\n</code></pre>\n\n<p>What would be a simple way to generate a new column containing some aggregation of the data over one of the columns?</p>\n\n<p>For example, if I sum <code>values</code> over items in <code>A</code> </p>\n\n<pre><code>In [84]:\ndf.groupby('A').sum()['values']\nOut[84]:\nA\n1    25\n2    45\nName: values\n</code></pre>\n\n<p>How can I get </p>\n\n<pre><code>   A  B  values  sum_values_A\n0  1  1      10            25\n1  1  2      15            25\n2  2  1      20            45\n3  2  2      25            45\n</code></pre>\n"},{"tags":["python","guid","uuid"],"answer_count":3,"favorite_count":12,"up_vote_count":97,"down_vote_count":0,"view_count":23675,"score":97,"question_id":534839,"title":"How to create a GUID in Python","body":"<p>How do I create a GUID in Python that is platform independent? I hear there is a method using ActivePython on Windows but it's Windows only because it uses COM. Is there a method using plain Python?</p>\n"},{"tags":["python","regex"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13168761,"title":"Python Use Regex Sub Multiple Times in 1 Pass","body":"<p>Is there a way to combine multiple regex statements into one so it can do different subs on a single pass?</p>\n\n<pre><code>no_Punct = re.sub('(\\w)([?:!.,;-]+)(\\s)',r'\\1 ',raw)\nno_Punct = re.sub('(\\s)([-]+)(\\s)',r'\\1',no_Punct)\n</code></pre>\n\n<p>The input string is 'raw'. I am trying to strip certain punctuation at the ends of words and remove hyphens that are surrounded by a space on each side. Can I combine both of these into one statement?</p>\n\n<p>Given the input of:\nThis is a sentence! One-fourth equals .25.</p>\n\n<p>Output is:\nThis is a sentence one fourth equals .25</p>\n"},{"tags":["python","multithreading"],"answer_count":4,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":3628,"score":5,"question_id":1635080,"title":"Terminate a multi-thread python program","body":"<p>How to make a multi-thread python program response to Ctrl+C key event?</p>\n\n<p><strong>Edit:</strong> The code is like this:</p>\n\n<pre><code>import threading\ncurrent = 0\n\nclass MyThread(threading.Thread):\n    def __init__(self, total):\n        threading.Thread.__init__(self)\n        self.total = total\n\n    def stop(self):\n        self._Thread__stop()\n\n    def run(self):\n        global current\n        while current&lt;self.total:\n            lock = threading.Lock()\n            lock.acquire()\n            current+=1\n            lock.release()\n            print current\n\nif __name__=='__main__':\n\n    threads = []\n    thread_count = 10\n    total = 10000\n    for i in range(0, thread_count):\n        t = MyThread(total)\n        t.setDaemon(True)\n        threads.append(t)\n    for i in range(0, thread_count):\n        threads[i].start()\n</code></pre>\n\n<p>I tried to remove join() on all threads but it still doesn't work. Is it because the lock segment inside each thread's run() procedure?</p>\n\n<p><strong>Edit:</strong> The above code is supposed to work but it always interrupted when current variable was in 5,000-6,000 range and through out the errors as below</p>\n\n<pre><code>Exception in thread Thread-4 (most likely raised during interpreter shutdown):\nTraceback (most recent call last):\n  File \"/usr/lib/python2.5/threading.py\", line 486, in __bootstrap_inner\n  File \"test.py\", line 20, in run\n&lt;type 'exceptions.TypeError'&gt;: unsupported operand type(s) for +=: 'NoneType' and 'int'\nException in thread Thread-2 (most likely raised during interpreter shutdown):\nTraceback (most recent call last):\n  File \"/usr/lib/python2.5/threading.py\", line 486, in __bootstrap_inner\n  File \"test.py\", line 22, in run\n</code></pre>\n"},{"tags":["python","json","python-2.7","indentation"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":93,"score":2,"question_id":13249415,"title":"Can I implement custom indentation for pretty-printing in Python’s JSON module?","body":"<p>So I'm using Python 2.7, using the json module to encode the following data structure.</p>\n\n<pre><code>'layer1': {\n    'layer2': {\n        'layer3_1': [ long_list_of_stuff ],\n        'layer3_2': 'string'\n    }\n}\n</code></pre>\n\n<p>My problem is that I'm printing everything out using pretty printing, as follows:</p>\n\n<pre><code>json.dumps(data_structure, indent=2)\n</code></pre>\n\n<p>Which is great, except I want to indent it all, except for the content in layer3_1 - It's a massive dictionary listing coordinates, and as such, having a single value set on each one makes pretty printing create a file with thousands of lines, with an example as follows:</p>\n\n<pre><code>{\n  \"layer1\": {\n    \"layer2\": {\n      \"layer3_1\": [\n        {\n          \"x\": 1,\n          \"y\": 7\n        },\n        {\n          \"x\": 0,\n          \"y\": 4\n        },\n        {\n          \"x\": 5,\n          \"y\": 3\n        },\n        {\n          \"x\": 6,\n          \"y\": 9\n        }\n      ],\n      \"layer3_2\": \"string\"\n    }\n  }\n}\n</code></pre>\n\n<p>What I really want is something similar to the following:</p>\n\n<pre><code>{\n  \"layer1\": {\n    \"layer2\": {\n      \"layer3_1\": [{\"x\":1,\"y\":7},{\"x\":0,\"y\":4},{\"x\":5,\"y\":3},{\"x\":6,\"y\":9}],\n      \"layer3_2\": \"string\"\n    }\n  }\n}\n</code></pre>\n\n<p>I hear it's possible to extend the json module: Is it possible to set it to only turn off indenting when inside the layer3_1 object? If so, could somebody please be so kind as to help me out?</p>\n"},{"tags":["python","bcrypt","blowfish"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":27,"score":2,"question_id":13251273,"title":"2y-blowfish hash keys in Python for shadow","body":"<p>As I found out, <code>2a</code> shadow hash keys are deprecated because <code>2a</code> has implementation flaws. It's been corrected in 2011 and now <code>2y</code>-hashes are used widely on Linux systems.</p>\n\n<p>I tried to find a Python library which calculates <code>2y</code>-hashes, but I failed. I searched at least two hours and had a look at all libraries available but every single library for Python only calculates <code>2a</code> hashes. The most of them are wrapper for the reference <code>bcrypt</code> from BSD but they only calculate <code>2a</code>-hashes.</p>\n"},{"tags":["python","pandas"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13258974,"title":"Get a Dictionary by applying function to pandas Series","body":"<p>I would like to apply a function to a dataframe and receive a single dictionary as a result. pandas.apply gives me a Series of dicts, and so currently I have to combine keys from each. I'll use an example to illustrate. </p>\n\n<p>I have a pandas dataframe like so. </p>\n\n<pre><code>In [20]: df\nOut[20]:\n          0  1\n0  2.025745  a\n1 -1.840914  b\n2 -0.428811  c\n3  0.718237  d\n4  0.079593  e\n</code></pre>\n\n<p>I have some function that returns a dictionary. For this example I'm using a toy lambda function <code>lambda x: {x: ord(x)}</code> that returns a dictionary. </p>\n\n<pre><code>In [22]: what_i_get = df[1].apply(lambda x: {x: ord(x)})\nIn [23]: what_i_get\nOut[23]:\n0     {'a': 97}\n1     {'b': 98}\n2     {'c': 99}\n3    {'d': 100}\n4    {'e': 101}\nName: 1\n</code></pre>\n\n<p>apply() gives me a series of dictionaries, but what I want is a single dictionary. </p>\n\n<p>I could create it with something like this: </p>\n\n<pre><code>In [41]: what_i_want = {}\nIn [42]: for elem in what_i_get:\n   ....:    for k,v in elem.iteritems():\n   ....:        what_i_want[k] = v\n   ....:\n\nIn [43]: what_i_want\nOut[43]: {'a': 97, 'b': 98, 'c': 99, 'd': 100, 'e': 101}\n</code></pre>\n\n<p>But it seems I should be able to get what I want more directly. </p>\n"},{"tags":["python","postgresql","psycopg2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13257682,"title":"Creating and populating a table is slow and unstable","body":"<p>When using <code>csv_copy</code> to create/populate a table, I notice it is extremely slow sometimes. The following are the core code and some sample outputs.</p>\n\n<p>I have two questions:</p>\n\n<ol>\n<li>I can't figure out why the time varies for creating and populating tables.</li>\n<li>I am not sure what caused the \"none\" to be printed.</li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>def create_populate_table(table_name,fields,types,cur):\n    sql = 'CREATE TABLE IF NOT EXISTS ' + table_name + ' (\\n'\n    for i in xrange(len(fields)):\n        if i==0:\n            sql += fields[i]+' '+types[i]+' NOT NULL PRIMARY KEY,\\n'\n        elif i==len(fields)-1:\n            sql += fields[i]+' '+types[i]+')'\n        else:\n            sql += fields[i]+' '+types[i]+',\\n'\n    #print sql\n    cur.execute(sql)\n    conn.commit()\n    print \"Table \",table_name,\" created \",timer()\n\n    cur.execute(\"SELECT count(*) from \"+table_name)\n    if cur.fetchone()[0]&gt;0:\n        return\n    # populate data into created table\n    fr= open(file, 'r')\n    fr.readline()\n    # parse and convert data into unicode\n    #data = unicode_csv_reader(fr, delimiter='|')\n    # anything can be used as a file if it has .read() and .readline() methods\n    data = StringIO.StringIO()\n    s=''.join(fr.readlines())\n    while(s.find('\\r\\n')&lt;&gt;-1):\n        s=s.replace('\\r\\n','\\n')\n    #timer()\n    while(s.find('||')&lt;&gt;-1 or s.find('|\\n')&lt;&gt;-1 ):\n        s=s.replace('||','|0|')\n        s=s.replace('|\\n','|0\\n')\n    #timer()\n    #print s.split('\\t')[:2]\n    #exit(0)\n    data.write(s)\n    data.seek(0)\n    try:\n        cur.copy_from(data, table_name,sep='|')\n        conn.commit()\n        print \"Table \",table_name,\" populated \",timer()\n    except psycopg2.DatabaseError, e:\n        if conn:\n            conn.rollback()\n        print 'Error %s' % e    \n    fr.close()  \n</code></pre>\n\n<p>The outputs I see:</p>\n\n<blockquote>\n  <p>ME_Features_20121001.txt Table  ME_Features_20121001  created  1.44s\n  None Table  ME_Features_20121001  populated  1.48s None</p>\n  \n  <p>FM_Features_20121001.txt Table  FM_Features_20121001  created  67.92s\n  None Table  FM_Features_20121001  populated  0.22s None</p>\n  \n  <p>NationalFile_20121001.txt (700mb) Table  NationalFile_20121001 \n  created  9.34s None Table  NationalFile_20121001  populated  4963.18s\n  None</p>\n  \n  <p>NJ_Features_20121001.txt Table  NJ_Features_20121001  created  1.65s\n  None Table  NJ_Features_20121001  populated  41.11s None</p>\n  \n  <p>PW_Features_20121001.txt Table  PW_Features_20121001  created  1.73s\n  None Table  PW_Features_20121001  populated  0.20s None</p>\n</blockquote>\n"},{"tags":["python","django","windows","vim","ide"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":13253510,"title":"Using VIM for Python IDE in Windows?","body":"<p>I am turning to Python from .NET world. And Visual Studio was something a great tool i used.</p>\n\n<p>In python world we do have basic IDLE and another one is VIM. I have seen that a lot of developers have configured VIM to a great IDE. Using basic VIM in Windows 7 seems of less use.\nSo i want to moderate my VIM to a level which has file explorer, syntax highlighting, search, error highlighting etc. So that it gives feel of Visual Studio and more productive.</p>\n\n<p>But all hacks/tips available are for Linux/Ubuntu users mostly, which i may use later but as of now i need to make my VIM in Windows more productive, visual.</p>\n\n<p>Please Suggest some Tips/Hacks/Resources to look around for VIM configuration?</p>\n\n<p>Thanks</p>\n"},{"tags":["python","indentation","analysis","lint"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13241399,"title":"Python check string indentation","body":"<p>I'm building an analyzer for a series of strings.\nI need to check how much each line is indented (either by tabs or by space)</p>\n\n<p>Each line is just a string in a text editor.\nHow do I check by how much a string is indented?</p>\n\n<p>or rather, maybe I could check how much whitespace or \\t are before a string, but I'm unsure of how.</p>\n\n<p>Any help appreciated.\nCheers</p>\n"},{"tags":["python","dictionary","iterate"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13258211,"title":"Alternatives to Dictionary in Python - Need to reference value by named key and iterate in insertion order","body":"<p>I am using Python and Django and messing around with returning JSON objects as Python dictonaries, but am not content because I can't iterate through my dictionary's elements in the order they were inserted. </p>\n\n<p>If I create a dictionary as follows:</p>\n\n<pre><code>measurements = {\n  'units': 'imperial',\n  'fit': request.POST[ 'fit' ],\n  'height': request.POST[ 'height' ],\n  'weight': request.POST[ 'weight' ],\n  'neck': request.POST[ 'neck' ],\n  # further elements omitted for brevity\n}\n</code></pre>\n\n<p>I can try iterating through it like:</p>\n\n<pre><code>for k,v in measurements.iteritems():\n  print k, 'corresponds to ', v\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>shoulders corresponds to  shoulders_val\nweight corresponds to  weight_val\nheight corresponds to  height_val\nwrist corresponds to  wrist_val\n...\n</code></pre>\n\n<p>I also tried using sorted(), which iterates through my elements by key alphabetically</p>\n\n<pre><code>bicep corresponds to  bicep_val\nchest corresponds to  chest_val\nfit corresponds to  fit_val\nheight corresponds to  height_val\n...\n</code></pre>\n\n<p>I am new to Python. I am hoping to find some way to both reference my dictionary elements by named keys like measurements['units'] but still be able to iterate through these elements in the order they were created. I am aware that there is an <a href=\"http://docs.python.org/2/library/collections.html#ordereddict-examples-and-recipes\" rel=\"nofollow\">ordered dictionary module</a> out there, but I would like to stay away from nonstandard packages. Would any other standard Python data structures ( lists, arrays, etc. ) allow me to iterate in insertion order and reference values by named keys? </p>\n"},{"tags":["python","decorator","python-sphinx"],"answer_count":3,"favorite_count":2,"up_vote_count":8,"down_vote_count":0,"view_count":830,"score":8,"question_id":3687046,"title":"Python Sphinx autodoc and decorated members","body":"<p>I am attempting to use Sphinx to document my Python class. I do so using autodoc:</p>\n\n<pre><code>.. autoclass:: Bus\n   :members:\n</code></pre>\n\n<p>While it correctly fetches the docstrings for my methods, those that are decorated:</p>\n\n<pre><code>    @checkStale\n    def open(self):\n        \"\"\"\n        Some docs.\n        \"\"\"\n        # Code\n</code></pre>\n\n<p>with <code>@checkStale</code> being</p>\n\n<pre><code>def checkStale(f):\n    @wraps(f)\n    def newf(self, *args, **kwargs):\n        if self._stale:\n            raise Exception\n        return f(self, *args, **kwargs)\n    return newf\n</code></pre>\n\n<p>have an incorrect prototype, such as <code>open(*args, **kwargs)</code>.</p>\n\n<p>How can I fix this? I was under the impression that using <code>@wraps</code> would fix up this kind of thing.</p>\n"},{"tags":["python","arrays","numpy"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":93,"score":2,"question_id":11755555,"title":"Saving numpy array to txt file as a single coloum?","body":"<p>I'm trying to write a numpy array into txt file:</p>\n\n<pre><code>a = numpy.array([1,2,3])\nnumpy.savetxt('a.txt',a,fmt='%.3f')\n</code></pre>\n\n<p>when I open the txt file it looks like:</p>\n\n<pre><code>1.0002.0003.000\n</code></pre>\n\n<p>but when I paste it in word it looks like:</p>\n\n<pre><code>1.000\n\n2.000\n\n3.000\n</code></pre>\n\n<p>The problem is that another program reads the txt file as input line by line:</p>\n\n<pre><code>data = fid.readlines()\n</code></pre>\n\n<p>As a result it doesn't work correctly.How can I fix this problem?</p>\n"},{"tags":["python","xlwt"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13258918,"title":"Python xlwt module, hide grid","body":"<p>I'm trying to hide grid on successfully generated .xls with 2 sheets included. I read the xlwt doc and among other properties that can be set on xlwt-related objects, there is show_grid function included. I was trying following, but it doesn't change anything:  </p>\n\n<pre><code>with open(os.path.join('sheet1_test.csv'), 'rb') as cf:\n    reader = csv.reader(cf)\n        for r, row in enumerate(reader):\n            for c, col in enumerate(row):\n                sheet1.write(c, r, col, easyxf(\n                'font: name Arial;',\n                'show_grid: off'\n                ))\n</code></pre>\n\n<p>I appreciate any help.</p>\n"},{"tags":["python","object","naming"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13258415,"title":"Naming auto generated objects, python","body":"<p>Text in italic can be skipped.</p>\n\n<p><em>First of all: Forgive me if what I'm asking for is basic knowledge, easy to find answers too, or anything similar that may make my post annoying to anyone. I'm new to programming, and just started it to have an excuse not to read for exams.\nI'm trying to make a program that can kind of mimic evolution from a tribe of humans to..well, a more advanced tribe of humans. My goal is to some time in the future make a very simple Civilization-like game that focuses on people rather than buildings and units. Starting from scratch, knowing pretty much nothing about programming at the moment, i know this is a task I will probably never complete. Hopefully I'll learn something on the way though.\nBecause my knowledge is so limited, my questions will be clumsy and badly formulated. I'm sorry, thanks for reading.</em></p>\n\n<p>The current problem:\nI've made a class that makes objects that are supposed to represent people.</p>\n\n<p>The class looks like this at the moment:</p>\n\n<pre><code>class Settler:\n    settlerCount = 0\n    iqlistfemale = []\n    iqlistmale = []\n    maleCount = 0\n    femaleCount = 0\n    surnameMale = []\n    surnameFemale = []\n\n    def __init__(self, sex):\n        if sex==\"m\" or sex==\"f\" or sex==\"M\" or sex==\"F\":\n            self.name = choice(surnames)\n            Settler.settlerCount += 1\n            self.iq=round(random.normalvariate(100,10))\n            if sex==\"m\" or sex==\"M\":\n                self.sex = \"Male\"\n                Settler.iqlistmale=Settler.iqlistmale+[self.iq]\n                Settler.surnameMale += [self.name]\n                Settler.maleCount += 1\n            else:\n                self.sex = \"Female\"\n                Settler.iqlistfemale=Settler.iqlistfemale+[self.iq]\n                Settler.surnameFemale += [self.name]\n                Settler.femaleCount += 1\n</code></pre>\n\n<p>It will contain way more attributes later, this is just a beginning.</p>\n\n<p>I've also made a loop that will ask you for an amount of males to create, and then an amount of females to create.</p>\n\n<p>The loop-thing looks like this:</p>\n\n<pre><code>x=int(input(\"Number of male Settlers to generate? (1-20) \"))\nif x &gt;0 and x &lt;21:\n    tellergenerator=0  \n    while tellergenerator&lt;x:\n        Settler(\"M\")\n        tellergenerator=tellergenerator+1\n\nelse:\n    print(\"Wrong input!\")\n\n\n\nx=int(input(\"Number of female Settlers to generate? (1-20) \"))\nif x &gt;0 and x &lt;21:\n    tellergenerator=0  \n    while tellergenerator&lt;x:\n        Settler(\"F\")\n        tellergenerator=tellergenerator+1\n\nelse:\n    print(\"Wrong input!\")\n</code></pre>\n\n<p>Also, I've made a def thing that will allow you to call for information on the attributes of an object:</p>\n\n<pre><code>def displaySettler(self):\n        print(\"Name:\", self.name, \"Sex:\", self.sex, \"IQ:\", self.iq)\n</code></pre>\n\n<p><strong>Now, for the questions:</strong></p>\n\n<ol>\n<li>Main question: My loop-thing works fine, meaning it creates the number of objects of the right sex that I want to create. My problem is that it creates objects without names, as far as I know. This means I can't do the displaySettler() call, because it requires me to do nameofobject.displaySettler(). How can I, using some sort of loop function to create a bunch of objects, make those objects with names.</li>\n</ol>\n\n<p>I've found a way to combine a number to a string, which might allow me to put into the loop a system that creates object names like settler1, settler2, settler3, but the way I do that is to do something like</p>\n\n<pre><code>x=settler\ny=(some counter)\nz=x+str(y)\n</code></pre>\n\n<p>Is that something I can use? The only way I know to create my objects with name is by writing something like</p>\n\n<pre><code>settler1=Settler(\"F\")\n</code></pre>\n\n<p>or</p>\n\n<pre><code>w=Settler(\"F\")\n</code></pre>\n\n<p>is it possible to use the contents of variable z to name something?</p>\n\n<ol>\n<li>I'd also like to ask the following: As you might see from my class, I'm doing a bunch of lists. I'm thinking I have to make a list for every attribute for every sex, containing the particular attributes of all objects. I want those lists to be able to calculate the populations average value of each attribute, and things like that.</li>\n</ol>\n\n<p>Is it possible to get those values directly from the objects, and go through all the objects directly and calculate the average from that?</p>\n\n<p>Or to put it another way: If I have 200 objects, is there some way to get the IQs of all the objects added together?</p>\n\n<p>Thanks for reading (if anyone got this far). All constructive feedback will be much appreciated.</p>\n"},{"tags":["python","osx","dictionary","binary"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":42,"score":-3,"question_id":13257914,"title":"get an error when checking dictinonary's content in python","body":"<p>I'm surprised that I get an error when checking if a certain value in in my dictionary like this:</p>\n\n<pre><code>if src in mac_dict:\n</code></pre>\n\n<p>I have filled up my dictionaary like this:</p>\n\n<pre><code>data = database.get(mac, \"get_nodelist\", version=1)\nif data:\n    fh = StringIO(data)\n    version = ord(fh.read(1))\n    length = ord2b(fh.read(2))\n    length = length / 8\n    macs = {}\n    for i in xrange(0,length):\n        mac = fh.read(6)[-3:]\n        tdm = ord2b(fh.read(2))\n        macs[mac] = tdm\n        print hexlify(mac) + \" - \" + str(tdm)\n    fh.close()\n    fh = open(\"macs.bin\",\"wb\")\n    pickle.dump(macs,fh)\n    fh.close()\n    return macs\n</code></pre>\n\n<p>data contains 6 Bytes of mac adresses plus 2 Bytes of tdm in sa row. They seem to be decoded properly with the print statement but when I want to check if src (in binary) is part of mac_dict, my script throws an exception - even tho I definitely should be in there.. any hints?</p>\n\n<p>Thank you!\nRon</p>\n"},{"tags":["python","raspberry-pi","zbar"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13258883,"title":"Zbar Raspberry Pi Installation","body":"<p>I'm attempting to install zbar on my raspberry pi. I build the source by entering:  </p>\n\n<p>./configure<br>\nmake<br>\nmake install  </p>\n\n<p>After the install finishes, I enter python and attempt to import zbar. Doing this results in a segmentation fault.</p>\n\n<p>Any ideas on what could be the issue?</p>\n"},{"tags":["python","multithreading","mutex","shared-memory"],"answer_count":2,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":39,"score":3,"question_id":13256735,"title":"Mutex appropriate for fast single writer / slow readers (cpython)?","body":"<p>In my application, I have one single thread that is performing very fast processing on log lines to produce a float value. There is usually only a single other thread performing slow reads on the values at intervals. Every so often, other threads can come and go and also perform once-off reads on those values.</p>\n\n<p>My question is about the necessity of a mutex (in cpython), for this specific case where the data is simply the most recent data available. It is not a critical value that must be in sync with anything else (or even the other fields being written at the same time). Just simply... what the value is when it is.</p>\n\n<p>That being said, I know I could easily add a lock (or a readers / write lock) to guard the update of the value, but I wonder if the overhead of the acquire/release in rapid succession for the course of an entire log (lets say average 5000 lines) is not worth it just to do shared resources \"appropriately\".</p>\n\n<p>Based on the docs on <a href=\"http://docs.python.org/2/faq/library#what-kinds-of-global-value-mutation-are-thread-safe\" rel=\"nofollow\">What kinds of global value mutation are thread-safe?</a>, these assignments should be atomic operations.</p>\n\n<p>Here is a basic example of the logic:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import time\nfrom random import random, choice, randint\nfrom threading import Thread \n\nclass DataStructure(object):\n    def __init__(self):\n        self.f_val = 0.0\n        self.s_val = \"\"\n\ndef slow_reader(data):\n    \"\"\" \n    Loop much more slowly and read values \n    anywhere between 1 - 5 second intervals\n    \"\"\"\n    for _ in xrange(10):\n\n        f_val = data.f_val \n        # don't care about sync here\n        s_val = data.s_val\n\n        print f_val, s_val\n\n        # in real code could be even 30 or 60 seconds\n        time.sleep(randint(1,3))\n\ndef fast_writer(data):\n    \"\"\" Update data extremely often \"\"\"\n    for _ in xrange(20000):\n        f_val, s_val = do_work()\n\n        data.f_val = f_val\n        # don't care about sync here\n        data.s_val = s_val \n\n\nFLOAT_SRC = [random()*100 for _ in xrange(100)]\nSTR_SRC = ['foo', 'bar', 'biz', 'baz']\n\ndef do_work():\n    time.sleep(0.001)\n    return choice(FLOAT_SRC), choice(STR_SRC)\n\n\nif __name__ == \"__main__\":\n\n    data = DataStructure()\n\n    threads = [\n        Thread(target=slow_reader, args=(data,)),\n        Thread(target=fast_writer, args=(data,)),\n    ]\n\n    for t in threads:\n        t.daemon=True\n        t.start()\n\n    for t in threads:\n        t.join()\n</code></pre>\n\n<p>This represents the fast log parser (actually being read via a PIPE) doing work on each line, and a slow periodic reader grabbing whatever are the current values at that moment. At any time, another once-read thread could come and go to grab those same values from the data structure.</p>\n\n<p>Is this a situation where a mutex in cpython is not needed at all?</p>\n\n<p><strong>Edit</strong></p>\n\n<p>To clarify a bit more... I don't even need the float and string fields to be in sync from the last write. It is ok if the scheduler decides to switch contexts between the float and string reads. I'm just wondering if I even need the overhead of a lock to simply read whatever value is assigned at any moment in time.</p>\n\n<p>My concern is regarding the fact that the writer is going to be looping, on an extremely fast operating, locking and unlocking a lock that is often un-contended.</p>\n\n<p>Effectively assume this is all I care about in the <code>reader</code>:</p>\n\n<pre><code>def slow_reader(data):\n    for _ in xrange(10):\n        f_val = data.f_val \n        print f_val\n        time.sleep(randint(1,3))\n</code></pre>\n"},{"tags":["python","database"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13258793,"title":"new line character in fetchall() python","body":"<p>I am selecting data from a database in python.</p>\n\n<pre><code>cur.execute(\"Select a,b,c from tab1\")\nprint \"a,b,c\"\nprint \"\\n\"\ndata = cur.fetchall()\nprint \"\".join(str(e) for e in data).replace(\"(\",\"\").replace(\")\",\"\")\n</code></pre>\n\n<p>I want to put a newline character at the end of each row.</p>\n\n<p>Output should look like</p>\n\n<pre><code>a,b,c\nA,B,C        //These values are from the database.\nD,E,F\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["python","regex","python-2.7"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13205712,"title":"Read more than one line of a file","body":"<p>I am working on a python app to create an interface for a script(ish) visual novel framework. For now, I was able to read the file, create the <em>labels</em> or functions but when I read them, it just reads one line. Sort of like this:</p>\n\n<pre><code>&gt;&gt;&gt; from freddie import Freddie\n&gt;&gt;&gt; check = Freddie()\n&gt;&gt;&gt; check.read_script('script')\n&gt;&gt;&gt; check.read_label('start')\n'label start:\\n' # Only reads the first line and the whitespace\n</code></pre>\n\n<p>And the entire label is:</p>\n\n<pre><code>label start:\n\n    test \"Lorem ipsum\"\n\n    test \"Sir amet\"\n\nreturn\n</code></pre>\n\n<p>My function is:</p>\n\n<pre><code>def read_label(self, label):\n    search_label = re.search(\"label %s(.*)\\s\" % label, self.scripts.read(), re.MULTILINE)\n    return search_label.group()\n</code></pre>\n\n<p>Is there a way to make the regular expression read the entire label and the whitespace?</p>\n\n<p>Thanks for your time.</p>\n"},{"tags":["python","django-rest-framework"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13258087,"title":"Missing bootstrap resources in Django-Rest-Framework","body":"<p>I'm using the new <a href=\"http://django-rest-framework.org/topics/rest-framework-2-announcement.html\" rel=\"nofollow\" title=\"Django REST Framework 2.0\">django-rest-framework 2.0</a> and have been following the tutorial for creating a rest based API. The API is now complete, however I am having trouble getting the bootstrap resources to load, all return with a 404 Not Found from Django.</p>\n\n<p>I feel like the resources should be loaded from django-rest-framework module's static directory, And when I do a listing on 'python2.7/dist-packages/rest_framework/static/rest_framework' I see the css, js, and img directories I need with but I have been unable to find any place in the documentation that shows how to link the CSS from the module to my project.</p>\n\n<p>What is the best course of action here? Should I download the source and copy the folder into my /static directory? Symlinking is out of the question because I need to check the project into a central repo.. Ideas?</p>\n"},{"tags":["python","algorithm","scheduling"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":1,"view_count":104,"score":2,"question_id":13257826,"title":"Efficient scheduling of university courses","body":"<p>I'm currently working on a website that will allow students from my university to automatically generate valid schedules based on the courses they'd like to take.</p>\n\n<p>Before working on the site itself, I decided to tackle the issue of how to schedule the courses efficiently.</p>\n\n<p>A few clarifications:</p>\n\n<ol>\n<li><p>Each course at our university (and I assume at every other\nuniversity) comprises of one or more sections. So, for instance,\nCalculus I currently has 4 sections available. This means that, depending on the amount of sections, and whether or not the course has a lab, this drastically affects the scheduling process.</p></li>\n<li><p>Courses at our university are represented using a combination of subject abbreviation and course code. In the case of Calculus I: MATH 1110.</p></li>\n<li><p>The CRN is a code unique to a section.</p></li>\n<li><p>The university I study at is not mixed, meaning males and females study in (almost) separate campuses. What I mean by almost is that the campus is divided into two.</p></li>\n<li><p>The datetimes and timeranges dicts are meant to decreases calls to datetime.datetime.strptime(), which was a real bottleneck.</p></li>\n</ol>\n\n<p>My first attempt consisted of the algorithm looping continuously until 30 schedules were found. Schedules were created by randomly choosing a section from one of the inputted courses, and then trying to place sections from the remaining courses to try to construct a valid schedule. If not all of the courses fit into the schedule i.e. there were conflicts, the schedule was scrapped and the loop continued.</p>\n\n<p>Clearly, the above solution is flawed. The algorithm took too long to run, and relied too much on randomness.</p>\n\n<p>The second algorithm does the exact opposite of the old one. First, it generates a collection of all possible schedule combinations using itertools.product(). It then iterates through the schedules, crossing off any that are invalid. To ensure assorted sections, the schedule combinations are shuffled (random.shuffle()) before being validated. Again, there is a bit of randomness involved.</p>\n\n<p>After a bit of optimization, I was able to get the scheduler to run in under 1 second for an average schedule consisting of 5 courses. That's great, but the problem begins once you start adding more courses.</p>\n\n<p>To give you an idea, when I provide a certain set of inputs, the amount of combinations possible is so large that itertools.product() <em>does not terminate</em> in a reasonable amount of time, and eats up 1GB of RAM in the process.</p>\n\n<p>Obviously, if I'm going to make this a service, I'm going to need a faster and more efficient algorithm. Two that have popped up online and in IRC: dynamic programming and genetic algorithms.</p>\n\n<p>Dynamic programming cannot be applied to this problem because, if I understand the concept correctly, it involves breaking up the problem into smaller pieces, solving these pieces individually, and then bringing the solutions of these pieces together to form a complete solution. As far as I can see, this does not apply here.</p>\n\n<p>As for genetic algorithms, I do not understand them much, and cannot even begin to fathom how to apply one in such a situation. I also understand that a GA would be more efficient for an extremely large problem space, and this is not <em>that</em> large.</p>\n\n<p>What alternatives do I have? Is there a relatively understandable approach I can take to solve this problem? Or should I just stick to what I have and hope that not many people decide to take 8 courses next semester?</p>\n\n<p>I'm not a great writer, so I'm sorry for any ambiguities in the question. Please feel free to ask for clarification and I'll try my best to help.</p>\n\n<p>Here is the code in its entirety.</p>\n\n<p><a href=\"http://bpaste.net/show/ZY36uvAgcb1ujjUGKA1d/\" rel=\"nofollow\">http://bpaste.net/show/ZY36uvAgcb1ujjUGKA1d/</a></p>\n\n<p>Note: Sorry for using a misleading tag (scheduling). </p>\n"},{"tags":["python","date","date-conversion"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":50,"score":3,"question_id":13258554,"title":"Convert \"unknown format\" strings to datetime objects?","body":"<p>This is probably a very basic question but after reading documentation I still can't figure out how to do it...</p>\n\n<p>I have two strings in Python that contain dates of <em>unknown format</em>. I don't know what formats they are in, except I know that both are valid date-time expressions. For example, one of them might be in the ISO format and the other in some other format.</p>\n\n<p>All I need is to be able to compare the dates. What's the correct way to turn strings into appropriate date-time objects so that they can be compared?</p>\n\n<p>thanks!</p>\n"},{"tags":["python","numpy","interpolation"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13257167,"title":"Local linear approximation in numpy","body":"<p>I have some <code>x</code> and <code>y</code> data, where for every entry in the <code>x</code> vector there's a corresponding entry in the <code>y</code> vector. Furthermore, the <code>x</code> data are not evenly spaced. </p>\n\n<p>I'd like to interpolate between the <code>x</code> samples to obtain an even spacing in the <code>x</code> dimension, and to approximate the corresponding <code>y</code> value. In <strong>numpy</strong>, <code>interp1d</code> seems like a natural solution, but my problem has a caveat: the <code>x</code> values are not monotonically increasing (because both <code>x</code> and <code>y</code> are a function of time). The <code>interp1d</code> function, and the other functions from the interpolate module, thus give weird results at those points where <code>x</code> reverses direction. </p>\n\n<p>What I'd really like to do is simply fit a straight line between every set of two adjacent <code>x</code> points and then interpolate based on this very local approximation. Is there a function to do this in <strong>numpy</strong> or do I have to rig something up myself?</p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13258338,"title":"Making a dynamic variable set","body":"<p>I'm trying to put together a tool that has a notion of 'level'. \nEach 'level' has a set of variables that are needed to support the activity I want to achieve that are specific to each level. </p>\n\n<p>I have written a hard-coded version that works (to a degree) but it is limited to the number of levels I have hard-coded. It strikes me that there must be a slicker way of writing this func so can generate the level vars on the fly:</p>\n\n<pre><code>def levelVarsGetter(level):\n    if level == 1:\n        levelDict = {'URLRegEx':baseDict['L1Regex'], 'titleRegEx':baseDict['L1TitleRegex'], 'buildPortion':baseDict['L1buildPortion'], 'levelParser':'level_1'}\n    elif level ==2:\n        levelDict = {'URLRegEx':baseDict['L2Regex'], 'titleRegEx':baseDict['L2TitleRegex'], 'buildPortion':baseDict['L2buildPortion'], 'levelParser':'level_2'}\n    elif level ==3:\n        levelDict = {'URLRegEx':baseDict['L3Regex'], 'titleRegEx':baseDict['L3TitleRegex'], 'buildPortion':baseDict['L3buildPortion'], 'levelParser':'level_3'}\n    elif level ==4:\n        levelDict = {'URLRegEx':baseDict['L4Regex'], 'titleRegEx':baseDict['L4TitleRegex'], 'buildPortion':baseDict['L4buildPortion'], 'levelParser':'level_4'}\n    elif level ==5:\n        levelDict = {'URLRegEx':baseDict['L5Regex'], 'titleRegEx':baseDict['L5TitleRegex'], 'buildPortion':baseDict['L5buildPortion'], 'levelParser':'level_5'}\n    return levelDict \n</code></pre>\n\n<p>All the vars in the dict are manually entered in an initialisation func. There labels can be changed if required. </p>\n\n<p>for context, the referring code: </p>\n\n<pre><code>for x in xrange (1, baseDict['numberOfLevels']+1):\n    links=[]\n    levelDict= levelVarsGetter(x)\n    URLRegEx = levelDict['URLRegEx'] \n    titleRegEx = levelDict['titleRegEx']\n    buildPortion = levelDict['buildPortion']\n    level = levelDict['levelParser'] \n    go = siteParser()\n</code></pre>\n"},{"tags":["python","pythonpath"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":48,"score":1,"question_id":13254047,"title":"Module name different than directory name?","body":"<p>Let's assume I have a python package called <code>bestpackage</code>.</p>\n\n<p>Convention dictates that <code>bestpacakge</code> would also be a directory on <code>sys.path</code> that contains an  <code>__init__.py</code> to make the interpreter assume it can be imported from.</p>\n\n<p>Is there any way I can set a variable for the package name so the directory could be named something different than the directive I import it with?  Is there any way to make the  namespacing not care about the directory name and honor some other config instead?</p>\n\n<p>My super trendy client-side devs are just so much in love with these sexy <code>something.otherthing.js</code> project names for one of our smaller side projects!</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>To clarify, the main purpose of my question was to allow my client side guys continue to call the directories in their \"projects\" (the one we all have added to our paths) folder using their existing convention (some.app.js), even though in some cases they are in fact python packages that will be on the path and sourced to <code>import</code> statements internally.  I realize this is in practice a pretty horrible thing and so I ask more out of curiosity.  So part of the big problem here is circumventing the fact that the <code>.</code> in the directory name (and thereby the assumed package name) implies attribute access.  It doesn't really surprise me that this cannot be worked around, I was just curious if it was possible deeper in the \"magic\" behind import.</p>\n\n<p>There's some great responses here, but all rely on doing a classical import of some kind where the attribute accessor <code>.</code> will clash with the directory names.</p>\n"},{"tags":["python","regex"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13258445,"title":"Finding groups in Regex - Python","body":"<p>I am not able to understand the output of following code I just wrote. I am trying to extract the complete value of the group in a string value.</p>\n\n<pre><code>&gt;&gt; str1 = \"CREATE TABLE TABLE1 (NAME VARCHAR, PHONE VARCHAR) as SELECT NAME, PHONE FROM SCHEMA1.ADDRESS\"\n&gt;&gt; pat1 = re.compile(\"CREATE TABLE .+ FROM (\\w).+\")\n&gt;&gt; ret= pat1.search(str1)\n&gt;&gt; ret.groups()\n('S',)\n</code></pre>\n\n<p>I was expecting the value to be <code>SCHEMA1</code>. How can I retrieve the entire value ?</p>\n\n<p>Why I am doing this? </p>\n\n<p>I have a file filled with DML statements intended for different schemas. So, I need to create separate files for each schema with DML statement from the file mentioned before.</p>\n"},{"tags":["python","dictionary"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":66,"score":0,"question_id":13257660,"title":"Dictionary help in Python","body":"<p>Say someone was making a grade system, and they had a dictionary with each grade letter as value and a percentage as a key. How would you be able to pick a value if say, you had your key as 75% and you wanted it to print \"C\", but then it would still print \"C\" if you entered 74% or 79%.</p>\n"},{"tags":["python","python-module","data-validation"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":80,"score":2,"question_id":12235120,"title":"Which python module you use for simple data validation?","body":"<p>I'm writing a python module that will contain some functions that will manipulate a mongodb database. I am looking for a data validation module that can help me in validating input data passed to that function before saving it in database. Which python module/package you use for this purpose?</p>\n\n<p>For example, lets say one of the function in module is createUser(user) which accepts a python dictionary as argument. This dictionary contains user information to save in the database. Is there any module/package I can use to validate the data supplied in dictionary and return any errors?</p>\n"},{"tags":["python","idle"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13224221,"title":"Inserting into the IDLE history from a script in the IDLE shell","body":"<p>I want to be able to push code into the IDLE shell history from a script such that</p>\n\n<pre><code>&gt;&gt;&gt;somecode = \"\"\"\ndef somefunc():\n    pass\n\"\"\"\n&gt;&gt;&gt;idlelib.some_unknown_add_to_history_method(somecode)\n&gt;&gt;&gt;&lt;ALT-p&gt;\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>&gt;&gt;&gt;def somefunc():\n    pass\n</code></pre>\n\n<p>So that I can edit and re-evaluate somefunc just as if I had manually pasted or entered the code into the shell. Is there an existing way to do this, or will I need to write an IDLE extension?</p>\n"},{"tags":["python","nltk"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":103,"score":0,"question_id":12267544,"title":"Machine Translation using babelize_shell() in NLTK","body":"<p>Hi I am learning Natural Language processing using NLTK. I am trying to implement babelize_shell() example of the book. What I am doing is executing babelize_shell(), after that I am entering my string, followed by german as stated in the book, followed by run.</p>\n\n<p>The error I am getting is:</p>\n\n<p>Traceback (most recent call last):</p>\n\n<p>File \"\", line 1, in </p>\n\n<pre><code>babelize_shell()\n</code></pre>\n\n<p>File \"C:\\Python27\\lib\\site-packages\\nltk\\misc\\babelfish.py\", line 175, in babelize_shell</p>\n\n<pre><code>for count, new_phrase in enumerate(babelize(phrase, 'english', language)):\n</code></pre>\n\n<p>File \"C:\\Python27\\lib\\site-packages\\nltk\\misc\\babelfish.py\", line 126, in babelize</p>\n\n<pre><code>phrase = translate(phrase, next, flip[next])\n</code></pre>\n\n<p>File \"C:\\Python27\\lib\\site-packages\\nltk\\misc\\babelfish.py\", line 106, in translate</p>\n\n<pre><code>if not match: raise BabelfishChangedError(\"Can't recognize translated string.\")\n</code></pre>\n\n<p>BabelfishChangedError: Can't recognize translated string.</p>\n\n<p>example</p>\n\n<blockquote>\n  <blockquote>\n    <blockquote>\n      <p>babelize_shell()</p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n<p>NLTK Babelizer: type 'help' for a list of commands.</p>\n\n<p>Babel> how long before the next flight to Alice Springs?</p>\n\n<p>Babel> german</p>\n\n<p>Babel> run</p>\n\n<p>0> how long before the next flight to Alice Springs?</p>\n\n<p>1> wie lang vor dem folgenden Flug zu Alice Springs?</p>\n\n<p>2> how long before the following flight to Alice jump?</p>\n\n<p>3> wie lang vor dem folgenden Flug zu Alice springen Sie?</p>\n\n<p>4> how long before the following flight to Alice do you jump?</p>\n\n<p>5> wie lang, bevor der folgende Flug zu Alice tun, Sie springen?</p>\n\n<p>6> how long, before the following flight to Alice does, do you jump?</p>\n\n<p>7> wie lang bevor der folgende Flug zu Alice tut, tun Sie springen?</p>\n\n<p>8> how long before the following flight to Alice does, do you jump?</p>\n\n<p>9> wie lang, bevor der folgende Flug zu Alice tut, tun Sie springen?</p>\n\n<p>10> how long, before the following flight does to Alice, do do you jump? 11> wie lang bevor der folgende Flug zu Alice tut, Sie tun Sprung?</p>\n\n<p>12> how long before the following flight does leap to Alice, does you?</p>\n"},{"tags":["python","text","editing"],"answer_count":5,"favorite_count":2,"up_vote_count":3,"down_vote_count":1,"view_count":5915,"score":2,"question_id":1582750,"title":"edit text file using Python","body":"<p>I need to update a text file whenever my IP address changes, and then run a few commands from the shell afterwards.</p>\n\n<ol>\n<li><p>Create variable LASTKNOWN = \"212.171.135.53\" \nThis is the ip address we have while writing this script.</p></li>\n<li><p>Get the current IP address. It will change on a daily basis.</p></li>\n<li><p>Create variable CURRENT for the new IP.</p></li>\n<li><p>Compare (as strings) CURRENT to LASTKNOWN</p></li>\n<li><p>If they are the same, exit()</p></li>\n<li><p>If they differ, </p>\n\n<p>A. \"Copy\" the old config file (/etc/ipf.conf) containing LASTKNOWN IP address into /tmp\nB. Replace LASTKNOWN with CURRENT in the /tmp/ipf.conf file.<br />\nC. Using subprocess \"mv /tmp/ipf.conf /etc/ipf.conf\"<br />\nD. Using subprocess execute, \"ipf -Fa -f /etc/ipf.conf\"<br />\nE. Using subprocess execute, \"ipnat -CF -f /etc/ipnat.conf\"  </p></li>\n<li><p>exit()</p></li>\n</ol>\n\n<p>I know how to do steps 1 through 6. I fall down on the \"file editing\" part, A -> C. I can't tell what module to use or whether I should be editing the file in place. There are so many ways to do this, I can't decide on the best approach. I guess I want the most conservative one.</p>\n\n<p>I know how to use subprocess, so you don't need to comment on that.  </p>\n\n<p>I don't want to replace entire lines; just a specific dotted quad.   </p>\n\n<p>Thanks!</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":886,"score":2,"question_id":7086578,"title":"column user_id is not unique, with Django UserProfiles","body":"<p>I'm trying to add some extra attributes to a user by way of a User Profile in Django (1.2.5, the version supplied in Ubuntu natty), but whenever I create a new user through the admin console, with one of the new attributes included (eg, 'phone'), I get a \"column user_id is not unique\" IntegrityError.</p>\n\n<p>I see that other people have had this problem, and they seem to have solved it by adding a unique dispatch_uid to the userprofile creation signal, but that's not working for me:</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\nfrom django.db.models.signals import post_save\n\nclass UserProfile(models.Model):\n    user = models.OneToOneField(User)\n    phone = models.CharField(max_length=40,blank=True,null=True)\n\ndef create_user_profile(sender, instance, **kwargs):\n        UserProfile.objects.get_or_create(user=instance)\n\npost_save.connect(create_user_profile, sender=User, dispatch_uid=\"users-profilecreation-signal\")\n</code></pre>\n\n<p>AUTH_PROFILE_MODULE is set to point at this class, in settings.py.</p>\n\n<p>Anyone know what I'm doing wrong?</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":13257748,"title":"python os.fdopen(os.open()) can't be used for writing?","body":"<p>This question has to do with the answer to <a href=\"http://stackoverflow.com/questions/5624359/write-file-with-specific-permissions-in-python\">Write file with specific permissions in Python</a> for opening a file for writing (in python) with specific permissions.</p>\n\n<p>The code in the answer looks like:</p>\n\n<pre><code>with os.fdopen(os.open('foo', os.O_APPEND | os.O_CREAT, 0o644)) as out:\n  out.write(\"hello\\n\")\n</code></pre>\n\n<p>This code in 2.7.1 (my company does not have 2.7.3 installed) produces:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 2, in &lt;module&gt;\nIOError: File not open for writing\n</code></pre>\n\n<p><code>os.fdopen</code> has its own mode argument, but setting that doesn't help:</p>\n\n<pre><code>&gt;&gt;&gt; with os.fdopen(os.open('foo', os.O_APPEND | os.O_CREAT, 0o644), 'a') as out:\n...   out.write(\"hello\\n\")\n...\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nOSError: [Errno 22] Invalid argument\n</code></pre>\n\n<p>Long story short, I have not been able to figure out how to actually write to a file that has been opened via <code>os.fdopen</code> and <code>os.open</code>.  Any ideas?  Known bug in 2.7.1?</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["python","script","shutil"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13256243,"title":"Python script for moving directories/files while ignoring certain directories/files using shutil?","body":"<p>I'm looking to build a python script that moves files/directories from one directory to another while referencing a list that notes the files to be copied over.</p>\n\n<p>Here is what I have thus far:</p>\n\n<pre><code>import os, shutil\n\n// Read in origin &amp; destination from secrets.py Readlines() stores each line followed by a '/n' in a list\n\n    f = open('secrets.py', 'r')\n    paths = f.readlines()\n\n// Strip out those /n\n\n    srcPath = paths[0].rstrip('\\n')\n    destPath = paths[1].rstrip('\\n')\n\n// Close stream\n\n    f.close()\n\n// Empty destPath\n\n    for root, dirs, files in os.walk(destPath, topdown=False):\n        for name in files:\n            os.remove(os.path.join(root, name))\n        for name in dirs:\n            os.rmdir(os.path.join(root, name))\n\n// Copy &amp; move files into destination path\n\n    for srcDir, dirs, files in os.walk(srcPath):\n        destDir = srcDir.replace(srcPath, destPath)\n        if not os.path.exists(destDir):\n            os.mkdir(destDir)\n        for file in files:\n            srcFile = os.path.join(srcDir, file)\n            destFile = os.path.join(destDir, file)\n            if os.path.exists(destFile):\n                os.remove(destFile)\n            shutil.copy(srcFile, destDir)\n</code></pre>\n\n<p>The secrets.py files contains the src/dest paths.</p>\n\n<p>Currently this transfers all files/directories over. I'd like to read in another file that allows you to specify which files to transfer (rather than making a \"ignore\" list).</p>\n"},{"tags":["python","list","dictionary","sorting","tuples"],"answer_count":19,"favorite_count":127,"up_vote_count":270,"down_vote_count":2,"view_count":146759,"score":268,"question_id":613183,"title":"Python: Sort a dictionary by value","body":"<p>I have a dictionary of values read from 2 fields in a database: a string field and a numeric field. The string field is unique so that is the key of the dictionary.</p>\n\n<p>I can sort on the keys, but how can I sort based on the values?</p>\n\n<p>Note: I have read <a href=\"http://stackoverflow.com/questions/72899/in-python-how-do-i-sort-a-list-of-dictionaries-by-values-of-the-dictionary\">this post</a> and probably could change my code to have a list of dictionaries but since I do not really need a list of dictionaries I wanted to know if there a simpler solution.</p>\n"},{"tags":["python","html-parsing","beautifulsoup"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":20,"score":2,"question_id":13257674,"title":"Using Python & Beautiful Soup, can I obtain a tag list filtered by whether background attr is set?","body":"<p>I would like to obtain a list of tags from an html document, where the background attribute is set.</p>\n\n<p>So for example:</p>\n\n<pre><code>html=\"&lt;div&gt;\n    &lt;div&gt;&lt;/div&gt;\n    &lt;table background=\\\"anything\\\"&gt;\n    &lt;/table&gt;\n&lt;/div&gt;\"\n\nsoup = BeautifulSoup(html)\nresult = soup.findall(??)\n</code></pre>\n\n<p>In this case I would want the table tag to be present in the list. Note that the value of \"anything\" can be ... anything. Ideally I would like to filter the value of the background attribute based on a regex.</p>\n\n<p>My question is: Can I use Beautiful Soup to obtain a list filtered on whether the value of the background attribute is set? Even better, can I filter based on a regex applied to an attribute in one step?</p>\n"},{"tags":["python","string","list","insert"],"answer_count":6,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":114,"score":2,"question_id":11849088,"title":"Inserting values into a list whilst looping over it (Python)","body":"<p>I have the following list of lists:</p>\n\n<pre><code>sweet = [['1234-4321-1',[5, 6, -4, 11, 22]], ['1234-7834-1', [43, -5, 0, 0, -1]], ['1234-5376-1', [3, 0, -5, -6, 0]], ['1567-3454-1', [4, 6, 8, 3, 3]], ['1567-9987-1-', [1, 2, 1, -4, 5]]]\n</code></pre>\n\n<p>I wish to iterate over the list of lists and separate the different groups of sublists by the # character i.e. I wish the # to be inserted when the first element of the sublists string changes.</p>\n\n<p>desired result</p>\n\n<pre><code>&gt;&gt;sweet\n&gt;&gt;[['1234-4321-1',[5, 6, -4, 11, 22]], ['1234-7834-1', [43, -5, 0, 0, -1]], ['1234-5376-1', [3, 0, -5, -6, 0]], '#', ['1567-3454-1', [4, 6, 8, 3, 3]], ['1567-9987-1-', [1, 2, 1, -4, 5]]]\n</code></pre>\n\n<p>Trivial task perhaps but I am very new to Python, help much appreciated.</p>\n\n<p>EDIT</p>\n\n<p>I am awaret hat perhaps a dictionary now would be a better data structure and hence the '#' key may not be needed, I was aiming to use it as a separtor of the stations (first number in the string) so that I could do computations of the stations in isolation whilst iterating over the list.</p>\n\n<p>My goal you see is to iterate over the list (should make it a dictionary) and compute the difference between pairs of lists of ints within each important first number.    Desired final result looking like: {'1234': [[-38, 11, -4, 11, 23], [40, -5, 5, 6, -1]] '1567':[[3, 4, 7, 11, -2]] }</p>\n\n<p>Any help on this also much appreciated :)</p>\n"},{"tags":["python","sockets","select"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":13257047,"title":"Python - select() does not catch broken socket","body":"<p>I am implementing a server in Python. I have been following the tutorial on <a href=\"http://www.doughellmann.com/PyMOTW/select/index.html\" rel=\"nofollow\">Doug Hellmann's blog</a>: </p>\n\n<p>I have a problem with <code>select()</code> not catching broken or closed pipe.</p>\n\n<pre><code>    # Create socket \n    serversocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    # Non blocking socket\n    serversocket.setblocking(0)\n    # Bind socket\n    serversocket.bind((HOST, PORT))\n    # Socket listening\n    serversocket.listen(5)\n\n    # Sockets from which we expect to read\n    inputs = [ serversocket ]\n    # Sockets to which we expect to write\n    outputs = [ ]\n\n    resign = re.compile(\"resign\")\n\n    while inputs:\n        print \"Waiting for connection...\"\n        readable, writable, exceptional = select.select(inputs, outputs, inputs)\n\n        for s in exceptional:\n            print &gt;&gt;sys.stderr, 'handling exceptional condition for', s.getpeername()\n            # Stop listening for input on the connection\n            inputs.remove(s)\n            s.close()\n\n\n        for s in readable:\n            # SERVER LISTENS TO CONNEXION\n            if s is serversocket:\n\n                if some_stuff_is_true:\n                    connection, client_address = s.accept();\n                    print 'New connection from ', client_address\n                    connection.setblocking(0)\n                    inputs.append(connection)\n\n\n            # CLIENT READABLE\n            else:\n                data = s.recv(MAXLINE)\n                #If socket has data to be read\n                if data:\n                    print data # Test if data correclty received\n                    if resign.findall(data):\n                        inputs.remove(s)\n                        s.close()\n</code></pre>\n\n<p>When the client closes the socket normally, it is not catch by select, and when the client breaks the socket, it is not caught by `exceptional.</p>\n\n<p>How to make this server robust to closed/broken sockets?</p>\n"},{"tags":["python","string"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13256655,"title":"Finding repetitions in a string","body":"<p>For two days I have been researching for this and have not found anything so I decided to write my own string repetition detector. Basically the function</p>\n\n<pre><code>def findRepetitions (string):\n</code></pre>\n\n<p>would receive a string and search for any repetitions; returns a list of strings reduced to their simplest form.</p>\n\n<p>For a sample, it'd be:</p>\n\n<pre><code>findRepetitions (\"trololololo\") --&gt; [\"olo\"]\nfindRepetitions (\"bookkeeper\") ---&gt; [\"o\", \"k\", \"e\"]\nfindRepetitions (\"Hello, Molly\") -&gt; [\"l\", \"l\"]\nfindRepetitions (\"abcdefgh\") -----&gt; []\nfindRepetitions (\"102102102\") ----&gt; [\"102\"]\n</code></pre>\n\n<p>In the third example, the function returns [\"l\", \"l\"] instead of [\"ll\"], because I want to search for repetitions only in the neighboring characters.</p>\n\n<p>I know that this may be hard, but I've been literally thinking over this for a long time and cannot find any smart solution to this.</p>\n"},{"tags":["python","matplotlib","collision","scatter-plot"],"answer_count":1,"favorite_count":3,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13257580,"title":"python - matplotlib - Avoid plot text collisions with grid lines, border and other text","body":"<p>I'm generating a scatter plot and I was wondering if it is possible to avoid any overlaps between the gridlines and the text on the plot.</p>\n\n<p><img src=\"http://i.stack.imgur.com/Zy7f3.png\" alt=\"Example Plot\"></p>\n\n<p>For example, the first point has its text on the gridline which makes it hard to read.</p>\n\n<p>My code is below:</p>\n\n<pre><code>for i, j in zip(path_loss_list,throughput_values):\n    plt.annotate( \"%s\" %str(j), xy=(i,j), xytext=(-5, 5), ha='right', textcoords='offset points')\n</code></pre>\n"},{"tags":["python","web.py"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":12973842,"title":"receiving a file through curl webpy","body":"<p>i need to receive an file through CURL in webpy</p>\n\n<pre><code>import web\nimport json\n\nclass GetFile:\n\n    def POST(self):\n        try:\n            i = web.input()\n            data = web.data() \n        except Error(e):\n            print e\n</code></pre>\n\n<p>I am not sure how to do this because there is no example to receive an data from CURL</p>\n\n<pre><code>curl -o -H \"Content-type: text/xml; charset=utf-8\" -T doc.xml \"http://localhost:8080/get_file\n</code></pre>\n\n<p>I am getting an issue </p>\n\n<pre><code>HTTP/1.1 405 Method Not Allowed\nContent-Type: text/html\nAllow: GET\nTransfer-Encoding: chunked\nDate: Fri, 19 Oct 2012 11:54:13 GMT\nServer: localhost\n</code></pre>\n\n<p>can any one give me an example code to upload an file through curl and save it in a location.</p>\n"},{"tags":["python","eclipse","py2exe","distutils"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13237521,"title":"py2exe ImportError: no module named <package I have impemented>","body":"<p>I have implemented a package names myUtils, it consists of folder 'myUtils', file '<strong>init</strong>.py' and a number of *.py files with names != 'myUtils'. This package is included in myOtherProject.py and can be found/used when I run them from Eclipse.</p>\n\n<p>However, when I run py2exe on myOtherProject.py, resulting exe cannot find this module(error message \"ImportError: no module named myUtils\"). Trimmed version of my setup.exe:</p>\n\n<pre><code>from distutils.core import setup\nimport py2exe, sys\nsys.path.append(pathTo_myUtils)\nimport myUtils # this line works fine even if I comment out sys.path.append(...)\ndata_files_ = (('.', [\"C:\\\\Python27\\\\DLLs\\\\MSVCP90.dll\", \n                      \"C:\\\\Python27\\\\lib\\\\site-packages\\\\Pythonwin\\\\mfc90.dll\"]))\nsetup(windows=['myOtherProject.py'], options={'py2exe': {'excludes': ['tcl'], 'includes': ['myUtils'], 'dll_excludes': ['tk85.dll',  'tcl85.dll'] }}, data_files=data_files_)\n</code></pre>\n\n<p>How could I fix this? I am using Python 2.7 on WinXP.</p>\n"},{"tags":["python","google-app-engine","gae-datastore","gqlquery"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13257447,"title":"How to specify ID greater than <something> in the where clause?","body":"<p>Just recently tried something like the following in the appengine interactive console:</p>\n\n<pre><code>from google.appengine.ext import db\nfrom django.utils import simplejson\n\nclass TestDb(db.Model):\n    author = db.StringProperty()\n\ndef add(name):\n    t = TestDb()\n    t.author = name\n    t.put()\n#added some names...\nlst = db.GqlQuery(\"Select * from TestDb\")\n\nprint [(x.key().id(), x.author) for x in lst]\n</code></pre>\n\n<p>I know for fact that ID is not sequential, but I assume it will be ascending in order for every new record that comes in. </p>\n\n<p>Now I want to put a condition whose SQL would look something like:</p>\n\n<pre><code>SELECT * FROM TestDb WHERE ID &gt; 2\n</code></pre>\n\n<p>Is this possible via <code>GqlQuery()</code>?</p>\n"},{"tags":["python","logging"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":1,"view_count":12,"score":-1,"question_id":13257022,"title":"Compress logs using TimedRotatingFileHandler","body":"<p>I'm trying to compress and archive log files using <code>TimedRotatingFileHandler</code>, but I'm unsure which encoding schemes are available. I tried <code>zip</code> but got the  following error:</p>\n\n<pre><code>output = zlib.decompress(input)\n\nerror: Error -3 while decompressing data: incorrect header check\n</code></pre>\n"},{"tags":["python","http","python-3.x"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":327,"score":1,"question_id":9772854,"title":"Persistence of urllib.request connections to a HTTP server","body":"<p>I want to do some performance testing on one of our web servers, to see how the server handles a lot of persistent connections. Unfortunately, I'm not terribly familiar with HTTP  and web testing. Here's the Python code I've got for this so far:</p>\n\n<pre><code>import http.client\nimport argparse\nimport threading\n\n\ndef make_http_connection():\n    conn = http.client.HTTPConnection(options.server, timeout=30)\n    conn.connect()\n\n\nif __name__ == '__main__':\n    parser = argparse.ArgumentParser()\n\n    parser.add_argument(\"num\", type=int, help=\"Number of connections to make (integer)\")\n    parser.add_argument(\"server\", type=str, help=\"Server and port to connect to. Do not prepend \\'http://\\' for this\")\n\n    options = parser.parse_args()\n\n    for n in range(options.num):\n        connThread = threading.Thread(target = make_http_connection, args = ())\n        connThread.daemon = True\n        connThread.start()\n\n    while True:\n        try:\n            pass\n        except KeyboardInterrupt:\n            break\n</code></pre>\n\n<p>My main question is this: <em>How do I keep these connections alive?</em> I've set a long timeout, but that's a very crude method and I'm not even sure it affects the connection. Would simply requesting a byte or two every once in a while do it?</p>\n\n<p>(Also, on an unrelated note, is there a better procedure for waiting for a keyboard interrupt than the ugly <code>while True:</code> block at the end of my code?)</p>\n"},{"tags":["python","string","search","find"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":56,"score":2,"question_id":13256785,"title":"How to find the opposite char in a python string?","body":"<p>Such as there is a string s:</p>\n\n<pre><code>s = \"((abc)((123))())blabla\"\n</code></pre>\n\n<p>We know the beginning of s is \"(\" and we want to find the opposite of it, the \")\" before \"blabla\", how to do this in python? </p>\n\n<p>Is it possible to do this in a simple and intuitive way, without using status machines?\nor is there any library can do this?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13257188,"title":"Python, Django and flatpage","body":"<p>I'm trying to use Django and to add a flatpage.</p>\n\n<p>ValueError at /admin/flatpages/flatpage/add/</p>\n\n<p>Cannot use None as a query value</p>\n\n<pre><code>Request Method:     POST\nRequest URL:    http://localhost:8000/admin/flatpages/flatpage/add/\nDjango Version:     1.4.2\nException Type:     ValueError\nException Value:    \n</code></pre>\n\n<p>Cannot use None as a query value</p>\n\n<pre><code>Exception Location:     C:\\Python27\\lib\\site-packages\\django\\db\\models\\sql\\query.py in add_filter, line 1095\nPython Executable:  C:\\Python27\\python.exe\nPython Version:     2.7.3\nPython Path:    \n\n['C:\\\\Users\\\\ivo\\\\Desktop\\\\eclipse-jee-indigo\\\\workspace\\\\blog',\n 'C:\\\\Users\\\\ivo\\\\Desktop\\\\eclipse-jee-indigo\\\\workspace\\\\blog',\n...\n 'C:\\\\Python27\\\\lib\\\\site-packages\\\\Pythonwin']\n</code></pre>\n\n<p>How to get rid of it?</p>\n\n<p>Thank you</p>\n"},{"tags":["python","serialization"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13255893,"title":"Why can't we picke an instance of InteractiveInterpreter?","body":"<p>An attempt to pickle an instance of InteractiveInterpreter results in the following error</p>\n\n<pre>\n<code>\n  File \"\", line 1, in \n  File \"/usr/lib/python2.7/pickle.py\", line 224, in dump\n    self.save(obj)\n  File \"/usr/lib/python2.7/pickle.py\", line 286, in save\n    f(self, obj) # Call unbound method with explicit self\n  File \"/usr/lib/python2.7/pickle.py\", line 725, in save_inst\n    save(stuff)\n  File \"/usr/lib/python2.7/pickle.py\", line 286, in save\n    f(self, obj) # Call unbound method with explicit self\n  File \"/usr/lib/python2.7/pickle.py\", line 649, in save_dict\n    self._batch_setitems(obj.iteritems())\n  File \"/usr/lib/python2.7/pickle.py\", line 663, in _batch_setitems\n    save(v)\n  File \"/usr/lib/python2.7/pickle.py\", line 286, in save\n    f(self, obj) # Call unbound method with explicit self\n  File \"/usr/lib/python2.7/pickle.py\", line 649, in save_dict\n    self._batch_setitems(obj.iteritems())\n  File \"/usr/lib/python2.7/pickle.py\", line 663, in _batch_setitems\n    save(v)\n  File \"/usr/lib/python2.7/pickle.py\", line 286, in save\n    f(self, obj) # Call unbound method with explicit self\n  File \"/usr/lib/python2.7/pickle.py\", line 649, in save_dict\n    self._batch_setitems(obj.iteritems())\n  File \"/usr/lib/python2.7/pickle.py\", line 663, in _batch_setitems\n    save(v)\n  File \"/usr/lib/python2.7/pickle.py\", line 306, in save\n    rv = reduce(self.proto)\n  File \"/usr/lib/python2.7/copy_reg.py\", line 70, in _reduce_ex\n    raise TypeError, \"can't pickle %s objects\" % base.__name__\nTypeError: can't pickle ellipsis objects\n</code>\n</pre>\n\n<p>which is strange InteractiveInterpreter isn't an Ellipsis object according to what I know. Any reasons? And is there any alternate way to pickle InteractiveInterpreter Object?</p>\n"},{"tags":["python","django","linux","fork","zombie-process"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":33,"score":1,"question_id":13247956,"title":"python/django spawn background process and avoid zombie process","body":"<p>I need to spawn a background process in django, the view returns immediately, the background process continues make some changes, then update the db. This is done by <code>os.spawnl()</code> function to call a separate .py file.</p>\n\n<p>The problem is after the background process is done, it becames a zombie function <code>[python] &lt;defunct&gt;</code>.</p>\n\n<p>How do I avoid that? I followed <a href=\"http://stackoverflow.com/a/972383/41948\">this</a> and <a href=\"http://stackoverflow.com/a/5218394/41948\">this</a> example but I still got the child process as zombie after the django render process.</p>\n\n<p>I want to take this chance to practice my *nix process management skills so please do me a favor, don't give me Celery or other mq/async task solutions, and I hate dependencies.</p>\n"},{"tags":["python","list","subtraction"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":13238317,"title":"Python, in a list of lists compare first element of the first list to the first element of the second list","body":"<p>So I have this:</p>\n\n<pre><code>a = [[4, 8], [5, 6, 9, 10], [13]]\n</code></pre>\n\n<p>I want to get the difference (subtraction) between:</p>\n\n<pre><code>4 - 5 = a[0][0] - a[1][0]\n\n4 - 6 = a[0][0] - a[1][1]\n\n4 - 9 = a[0][0] - a[1][2]\n\n4 - 10 = a[0][0] - a[1][3]\n</code></pre>\n\n<p>and then move on to the 8:</p>\n\n<pre><code>8 - 5 = a[0][1] - a[1][0]\n\n8 - 6 = a[0][1] - a[1][1]\n\n...\n</code></pre>\n\n<p>And so on for all the sub-lists </p>\n\n<p>Any ideas?</p>\n\n<p>EDIT: The other comparisons would look like this:</p>\n\n<pre><code>5 - 13 = a[1][0] - a[2][0]\n\n6 - 13 = a[1][1] - a[2][0]\n\n9 - 13 = a[1][2] - a[2][0]\n\n10 - 13 = a[1][3] - a[2][0]\n</code></pre>\n\n<p>And because this is the second to last list, then it stops.</p>\n\n<p>I'm trying to implement the Quine-McCluskey method to minimize logic expressions.</p>\n"},{"tags":["python","command-line"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":40,"score":4,"question_id":13257491,"title":"Python function on the command line not working","body":"<p>Consider this simple python:</p>\n\n<pre><code>def cube(x): \n   return x*x*x;\n\nif __name__ == '__main__':\n    print(cube(4));\n</code></pre>\n\n<p>Works ok. But when I open up the python command line interpreter and do:</p>\n\n<pre><code>&gt;&gt;&gt; def cube(x): return x*x*x;\n... cube(4);\n</code></pre>\n\n<p>I get: </p>\n\n<pre><code>File \"&lt;stdin&gt;\", line 2\n    cube(4);\n     ^\nSyntaxEror: invalid syntax\n</code></pre>\n\n<p>What stupid thing are my doing wrong?</p>\n"},{"tags":["python","memory","sage"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13257179,"title":"Iterations in python consume whole memory - faulty code?","body":"<p>I have written some very simple trial-and-error code in Sage (a computer algebra system written in python where you can use regular python syntax in scripting). The little code snippet creates a polynomial and does some calculations with the coefficients, especially it determines the Groebner basis for the ideal generated by three expressions in the coefficients.</p>\n\n<p>The problem is: This program goes on and eats up all my memory until it's killed by the kernel. Every iteration consumes only like 200kB, but this memory is never freed again.</p>\n\n<p>Here is the code. The details are not that important and very bulky, therefore left out:</p>\n\n<pre><code>R = PolynomialRing(QQ, 2, 'bc', order='lex')\nexpr1, expr2, expr3 = ...\n\nfor i in range (0,50):\n    for j in range(i+1,50):\n        for k in range(j+1,50):\n            for l in range(k+1,50):\n                for m in range(l+1,50):\n                    for n in range(m+1,50):\n                        poly = (x-i)*(x-j)*(x-k)*(x-l)*(x-m)*(x-n)\n                        r = poly.coeffs()\n\n                        p1 = expr1.substitute(r...)\n                        p2 = expr2.substitute(r...)\n                        p3 = expr3.substitute(r...)\n\n                        I = (p1, p2, p3)*R\n                        B = I.groebner_basis()\n</code></pre>\n\n<p>As far as I understood python's memory management, the variables in the loop body are freed every so often. Now, it may be a programming problem, an internal python problem or some problem in the Sage routines. I don't know. Can you spot a problem with my code or is it something else?</p>\n"},{"tags":["python","matplotlib","scale","scatter-plot"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13257240,"title":"python - matplotlib - How to specify the scale for x axis","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/2849286/python-matplotlib-subplot-how-to-set-the-axis-range\">Python, Matplotlib, subplot: How to set the axis range?</a>  </p>\n</blockquote>\n\n\n\n<p>I would like to specify the scale of the x-axis for my scatter plot similar to excel.</p>\n\n<p>For example, I feed in the x axis values as follows:</p>\n\n<pre><code>x_values = [10, 20, 30, 40, 50, 60, 70, 80, 90, 100]\n</code></pre>\n\n<p>However, only the numbers with an even 1st digit appear.</p>\n\n<p>Is there a way to make it such that all numbers appear on the x-axis?</p>\n\n<p>Thanks,</p>\n\n<p>Parth</p>\n"},{"tags":["python","emacs","ropemacs","pymacs"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":23,"score":2,"question_id":13254442,"title":"Pymacs helper did not start after 30 seconds","body":"<p>I've seen other questions on this, but none of them were actually answered, and none of them are quite my issue.</p>\n\n<p>I have a new system, emacs 23.1, Centos 6.2 (I think). I downloaded the newest pymacs and installed it. However, I'm getting:</p>\n\n<pre><code>error: Pymacs helper did not start within 30 seconds\n</code></pre>\n\n<p>This is with a .emacs and .bashrc that have always worked before. Also, it appears that when I run from gnome, it does find the pymacs helper (but ropemacs doesn't run), but in KDE (which is what I'm actually trying to use) It gives the pymacs helper error. </p>\n"},{"tags":["python","xml-parsing","xsd","xml-binding","ddex"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13257384,"title":"How to correctly use GenerateDS for DDEX XML binding","body":"<p>I am interested in Python XML binding for reading input files conforming to this schema:\n<a href=\"http://ddex.net/xml/ern/341/release-notification.xsd\" rel=\"nofollow\">http://ddex.net/xml/ern/341/release-notification.xsd</a></p>\n\n<p>This XSD depends on a number of other ones though, most importantly:\n<a href=\"http://ddex.net/xml/20120404/ddexC.xsd\" rel=\"nofollow\">http://ddex.net/xml/20120404/ddexC.xsd</a> and\n<a href=\"http://ddex.net/xml/20120404/ddex.xsd\" rel=\"nofollow\">http://ddex.net/xml/20120404/ddex.xsd</a></p>\n\n<p>My first attempt is by using <a href=\"http://cutter.rexx.com/~dkuhlman/generateDS.html\" rel=\"nofollow\">generateDS</a>. I am able to successfully generate binding for release-notification.xsd if I use --no-process-includes with:</p>\n\n<pre><code>./generateDS.py --no-process-includes -o release-notification.py release-notification.xsd\n</code></pre>\n\n<p>However, this leaves me with a Python object that is mostly useless since most of the ComplexTypes are defined in <a href=\"http://ddex.net/xml/20120404/ddexC.xsd\" rel=\"nofollow\">ddexC.xsd</a>.</p>\n\n<p>If I try it without --no-process-includes, I get:</p>\n\n<pre><code>RuntimeError: Extension/restriction recursion detected.\nSuggest you check definitions of types ArtistRole and ArtistRole.\n</code></pre>\n\n<p>The definition referred to is this one:</p>\n\n<pre><code>&lt;xs:element name=\"ArtistRole\" maxOccurs=\"unbounded\" type=\"ddexC:ArtistRole\"&gt;\n....\n&lt;xs:complexType name=\"ArtistRole\"&gt;\n      &lt;xs:simpleContent&gt;\n         &lt;xs:extension base=\"ddex:ArtistRole\"&gt;\n....\n</code></pre>\n\n<p>So it seems like the ddex and ddexC namespaces get mixed up somehow and a circular reference is created.</p>\n\n<p>Any advice here?</p>\n"},{"tags":["python","python-3.x","pygame","pickle"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13257231,"title":"Python pickling error trying to pickle pygame Event object","body":"<p>I am trying to pickle a pygame.event.Event object:</p>\n\n<pre><code>eventObj= pygame.event.get()[0]\ndata= pickle.dumps(eventObj)\n</code></pre>\n\n<p>but I get this error:</p>\n\n<pre><code>_pickle.PicklingError: Can't pickle &lt;class 'Event'&gt;: attribute lookup builtins.Event failed\n</code></pre>\n"},{"tags":["python","search","nlp","nltk"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":146,"score":1,"question_id":9314041,"title":"Extract Product Core Key Words With (Python) NLTK","body":"<p>After reading \"Natural Language Processing With Python\" for a day, I'm still not quite clear if NLTK can be used to extract core key words for human input product descriptions --</p>\n\n<p>e.g., from this</p>\n\n<pre><code>Apple iPhone 4S (Latest Model) - 16GB - White or Black (Unlocked)\nANY GSM TMOBILE, AT&amp;T, Home, Smartphone\n</code></pre>\n\n<p>to</p>\n\n<pre><code>Apple iPhone 4S 16GB Smartphone\n</code></pre>\n\n<p>or this</p>\n\n<pre><code>Canon EOS 5D 12.8 MP DSLR Camera with lens, vert grip &amp; lots of extras\n</code></pre>\n\n<p>to</p>\n\n<pre><code>Canon EOS 5D 12.8 MP DSLR Camera\n</code></pre>\n\n<p>Any pointer will be much appreciated.</p>\n"},{"tags":["python","multidimensional-array","numpy","indexing"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":34,"score":2,"question_id":13255593,"title":"numpy array slicing, get one from each third dimension","body":"<p>I have a 3D array of data. I have a 2D array of indices, where the shape matches the first two dimensions of the data array, and it specfies the indices I want to pluck from the data array to make a 2D array. eg:</p>\n\n<pre><code> from numpy import *\n a = arange(3 * 5 * 7).reshape((3,5,7))\n getters = array([0,1,2] * (5)).reshape(3,5)\n</code></pre>\n\n<p>What I'm looking for is a syntax like <code>a[:, :, getters]</code> which returns an array of shape (3,5) by indexing independently into the third dimension of each item. However, <code>a[:, :, getters]</code> returns an array of shape (3,5,3,5). I can do it by iterating and building a new array, but this is pretty slow:</p>\n\n<pre><code> array([[col[getters[ri,ci]] for ci,col in enumerate(row)] for ri,row in enumerate(a)])\n # gives array([[  0,   8,  16,  21,  29],\n #    [ 37,  42,  50,  58,  63],\n #    [ 71,  79,  84,  92, 100]])\n</code></pre>\n\n<p>Is there a neat+fast way?</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13256732,"title":"Python script to read LANDSAT XML metafile","body":"<p>I need to obtain the scene ID for several Landsat images. The metadata for the images is contained in an xml file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;searchResponse xsi:schemaLocation=\"http://upe.ldcm.usgs.gov/schema/metadata\nhttp://earthexplorer.usgs.gov/EE/metadata.xsd\" \nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"    \nxmlns=\"http://upe.ldcm.usgs.gov/schema/metadata\"&gt;\n    &lt;metaData&gt;\n        &lt;browseAvailable&gt;Y&lt;/browseAvailable\n        &lt;browseURL&gt;http://earthexplorer.usgs.gov/browse/tm/146/41/1998/LT51460411998300XXX01.jpg&lt;/browseURL&gt; \n        &lt;sceneID&gt;LT51460411998300XXX01&lt;/sceneID&gt; \n        &lt;sensor&gt;LANDSAT_TM&lt;/sensor&gt; \n        &lt;acquisitionDate&gt;1998-10-27&lt;/acquisitionDate&gt; \n        &lt;dateUpdated&gt;2012-07-31&lt;/dateUpdated&gt; \n        &lt;path&gt;146&lt;/path&gt; \n        &lt;row&gt;41&lt;/row&gt; \n        &lt;...&gt;\n     &lt;/metaData&gt;\n     &lt;metaData&gt;\n        &lt;sceneID&gt;LT51460411998300XXX01&lt;/sceneID&gt; \n        &lt;sensor&gt;LANDSAT_TM&lt;/sensor&gt; \n        &lt;acquisitionDate&gt;1998-10-27&lt;/acquisitionDate&gt; \n        &lt;dateUpdated&gt;2012-07-31&lt;/dateUpdated&gt; \n        &lt;path&gt;146&lt;/path&gt; \n        &lt;row&gt;41&lt;/row&gt; \n        &lt;...&gt;\n    &lt;etc etc&gt;\n</code></pre>\n\n<p>The following code will list all the nodes in metaData (browseAvailable, browseURL, sceneID) but what I really want to do is just get a list of sceneID.</p>\n\n<pre><code>#!/usr/bin/python\n\n#import os\n#import sys\nfrom xml.dom.minidom import parse\n\nimport xml.etree.ElementTree as ET\n#import grass.script as grass\n\ntree = ET.parse('C:/Users/Simon/Documents/tif/Metadata/metadata_test1.xml')\nroot = tree.getroot()\n\nfor metadata in root:  \n    for data in metadata:          \n    sceneID = data.text\n        grass.message('data -&gt; %s' % (sceneID))\n</code></pre>\n\n<p>I've tried using the tools described on the Python xml.etree.ElementTree with no success. Could anyone help me adapt the code above to return sceneID only?</p>\n"},{"tags":["python"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":17,"score":2,"question_id":13256991,"title":"mechanize._response.httperror_seek_wrapper: HTTP Error 404: Not Found","body":"<p>I am trying to using the program fbruteforcer.py. I compiled it and it seems to work but not at all.</p>\n\n<p>The following works:</p>\n\n<pre><code>./wpbruteforcer.py -t www.pillolhacking.net -u admin -w wordlist\n</code></pre>\n\n<p>But when I try to change the destination site and the name of the user, I get the following traceback:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"./fbruteforcer.py\", line 253, in &lt;module&gt;\n    main()\n  File \"./fbruteforcer.py\", line 247, in main\n    releaser()\n  File \"./fbruteforcer.py\", line 183, in releaser\n    bruteforce(word.replace(\"\\n\",\"\"))\n  File \"./fbruteforcer.py\", line 152, in bruteforce\n    opensite = br.open(targetsite)\n  File \"/usr/local/lib/python2.7/dist-packages/mechanize/_mechanize.py\", line 203, in open\n    return self._mech_open(url, data, timeout=timeout)\n  File \"/usr/local/lib/python2.7/dist-packages/mechanize/_mechanize.py\", line 255, in \n_mech_open\n    raise response\nmechanize._response.httperror_seek_wrapper: HTTP Error 404: Not Found\n</code></pre>\n\n<p>I tried to search for a solution, but all I could find was <a href=\"http://osdir.com/ml/python.wwwsearch.general/2007-06/msg00021.html\" rel=\"nofollow\">this post</a>.</p>\n\n<p>Please someone help me idk what to do. Maybe I must download another mechanize package?</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":10893554,"title":"TimedRotatingFileHandler: Log only when detected time to rotate","body":"<p>I have a function that makes calls to a logger almost every second, however, I only want to log information an hour before the logfile rotates.</p>\n"},{"tags":["python","numpy","statistics"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":100,"score":1,"question_id":12269834,"title":"Is there any numpy autocorrellation function with standardized output?","body":"<p>I followed the advice of defining the autocorrelation function in another post:</p>\n\n<pre><code>def autocorr(x):\n    result = np.correlate(x, x, mode = 'full')\n    maxcorr = np.argmax(result)\n    #print 'maximum = ', result[maxcorr]\n    result = result / result[maxcorr]     # &lt;=== normalization\n\n    return result[result.size/2:]\n</code></pre>\n\n<p>however the maximum value was not \"1.0\". therefore I introduced the line tagged with \"&lt;=== normalization\"</p>\n\n<p>I tried the function with the dataset of \"Time series analysis\" (Box - Jenkins) chapter 2. I expected to get a result like fig. 2.7 in that book. However I got the following:</p>\n\n<p><img src=\"http://i.stack.imgur.com/t4txM.png\" alt=\"enter image description here\"></p>\n\n<p>anybody has an explanation for this strange not expected behaviour of autocorrelation?</p>\n\n<p>Addition (2012-09-07):</p>\n\n<p>I got into Python - programming and did the following:</p>\n\n<pre><code>from ClimateUtilities import *\nimport phys\n\n#\n# the above imports are from R.T.Pierrehumbert's book \"principles of planetary \n# climate\" \n# and the homepage of that book at \"cambridge University press\" ... they mostly  \n# define   the\n# class \"Curve()\" used in the below section which is not necessary in order to solve \n# my \n# numpy-problem ... :)\n#\nimport numpy as np;\nimport scipy.spatial.distance;\n\n# functions to be defined ... :\n#\n#\ndef autocorr(x):\n    result = np.correlate(x, x, mode = 'full')\n    maxcorr = np.argmax(result)\n    # print 'maximum = ', result[maxcorr]\n    result = result / result[maxcorr]\n    #   \n    return result[result.size/2:]\n\n##\n#  second try ... \"Box and Jenkins\" chapter 2.1 Autocorrelation Properties\n#                                               of stationary models\n##\n# from table 2.1 I get:\n\ns1 = np.array([47,64,23,71,38,64,55,41,59,48,71,35,57,40,58,44,\\\n              80,55,37,74,51,57,50,60,45,57,50,45,25,59,50,71,56,74,50,58,45,\\\n              54,36,54,48,55,45,57,50,62,44,64,43,52,38,59,\\\n              55,41,53,49,34,35,54,45,68,38,50,\\\n              60,39,59,40,57,54,23],dtype=float);\n\n# alternatively in order to test:\ns2 = np.array([47,64,23,71,38,64,55,41,59,48,71])\n\n##################################################################################3\n# according to BJ, ch.2\n###################################################################################3\nprint '*************************************************'\nglobal s1short, meanshort, stdShort, s1dev, s1shX, s1shXk\n\ns1short = s1\n#s1short = s2   # for testing take s2\n\nmeanshort = s1short.mean()\nstdShort = s1short.std()\n\ns1dev = s1short - meanshort\n#print 's1short = \\n', s1short, '\\nmeanshort = ', meanshort, '\\ns1deviation = \\n',\\\n#    s1dev, \\\n#      '\\nstdShort = ', stdShort\n\ns1sh_len = s1short.size\ns1shX = np.arange(1,s1sh_len + 1)\n#print 'Len = ', s1sh_len, '\\nx-value = ', s1shX\n\n##########################################################\n# c0 to be computed ...\n##########################################################\n\nsumY = 0\nkk = 1\nfor ii in s1shX:\n    #print 'ii-1 = ',ii-1, \n    if ii &gt; s1sh_len:\n        break\n    sumY += s1dev[ii-1]*s1dev[ii-1]\n    #print 'sumY = ',sumY, 's1dev**2 = ', s1dev[ii-1]*s1dev[ii-1]\n\nc0 = sumY / s1sh_len\nprint 'c0 = ', c0 \n##########################################################\n# now compute autocorrelation\n##########################################################\n\nauCorr = []\ns1shXk = s1shX\nlenS1 = s1sh_len\nnn = 1  # factor by which lenS1 should be divided in order\n        # to reduce computation length ... 1, 2, 3, 4\n        # should not exceed 4\n\n#print 's1shX = ',s1shX\n\nfor kk in s1shXk:\n    sumY = 0\n    for ii in s1shX:\n        #print 'ii-1 = ',ii-1, ' kk = ', kk, 'kk+ii-1 = ', kk+ii-1\n        if ii &gt;= s1sh_len or ii + kk - 1&gt;=s1sh_len/nn:\n            break\n        sumY += s1dev[ii-1]*s1dev[ii+kk-1]\n        #print sumY, s1dev[ii-1], '*', s1dev[ii+kk-1]\n\n    auCorrElement = sumY / s1sh_len\n    auCorrElement = auCorrElement / c0\n    #print 'sum = ', sumY, ' element = ', auCorrElement\n    auCorr.append(auCorrElement)\n    #print '', auCorr\n    #\n    #manipulate s1shX \n    #\n    s1shX = s1shXk[:lenS1-kk]\n    #print 's1shX = ',s1shX\n\n#print 'AutoCorr = \\n', auCorr\n#########################################################\n#\n# first 15 of above Values are consistent with\n# Box-Jenkins \"Time Series Analysis\", p.34 Table 2.2\n#\n#########################################################\ns1sh_sdt = s1dev.std()  # Standardabweichung short \n#print '\\ns1sh_std = ', s1sh_sdt\nprint '#########################################'\n\n# \"Curve()\" is a class from RTP ClimateUtilities.py\nc2 = Curve()\ns1shXfloat = np.ndarray(shape=(1,lenS1),dtype=float)\ns1shXfloat = s1shXk # to make floating point from integer\n                    # might be not necessary\n\n#print 'test plotting ... ', s1shXk, s1shXfloat\nc2.addCurve(s1shXfloat)\nc2.addCurve(auCorr, '', 'Autocorr')\nc2.PlotTitle = 'Autokorrelation'\n\nw2 = plot(c2)\n\n\n##########################################################\n#\n# now try function \"autocorr(arr)\" and plot it\n#\n##########################################################\n\nauCorr = autocorr(s1short)\n\nc3 = Curve()\nc3.addCurve( s1shXfloat )\nc3.addCurve( auCorr, '', 'Autocorr' )\nc3.PlotTitle = 'Autocorr with \"autocorr\"'\n\nw3 = plot(c3)\n\n#\n# well that should it be!\n#\n</code></pre>\n"},{"tags":["python","bioinformatics"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":41,"score":-2,"question_id":13257010,"title":"Ontology Program in Python","body":"<p>So I need help starting a program in which I have to read in a OBO formatted ontology, and I really have no idea about biology or python.  I can reasonably teach myself the python, but I was wondering if there were any tools to simplify the process, such as reading in and constructing a graph from the OBO file, or if I would have to start from scratch and write my own code for doing this.  The end results would need to be things like given a certain node ID, find subgroups from said node such as all node on same level, all children, parents, etc...</p>\n\n<p>Hope this isn't too vague!</p>\n"},{"tags":["python","matplotlib"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13256656,"title":"when using matplotlib with ipython notebook plt.show() function doesn't work","body":"<p>I launched the ipython notebook using:  </p>\n\n<pre><code>$ ipython notebook --pylab=inline \n</code></pre>\n\n<p>in the command prompt.</p>\n\n<p>when running this:</p>\n\n<pre><code>from matplotlib import pyplot as plt\nfig = plt.figure()\nax1 = fig.add_subplot(111)\nax1.plot([1,2,3])\n</code></pre>\n\n<p>it automatically plots the graph without having to use the plt.show() function, however I find that the plt.show function doesn't work for me, or some other funtions like plt.legend().</p>\n\n<p>Does anybody know why this is happening, or how i can fix it?</p>\n"},{"tags":["python","windows","pygame"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13218362,"title":"\"Fatal Python error: (pygame parachute) Segmentation Fault\" when changing window","body":"<p>I'm currently learning python and tried to make a little game using the pygame librabry. I use python 3.2.3 and pygame 1.9.2a with Windows Xp. Everything works fine, except one thing : if I go on another window when my game is running, it crashes and I get an error message in the console :</p>\n\n<pre><code>Fatal Python error: (pygame parachute) Segmentation Fault\n</code></pre>\n\n<p>This piece of code that I took out of my program seems to be causing the error, however I can't see anything wrong with it :</p>\n\n<pre><code>import pygame\nfrom pygame.locals import *\n\npygame.init()\n\nfenetre = pygame.display.set_mode((800, 600))\n\ngo = 1\n\nwhile go:\n    for event in pygame.event.get():\n        if event.type == QUIT:\n            go = 0\n</code></pre>\n\n<p>Thanks for your help !</p>\n"},{"tags":["python","subprocess","popen"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13243807,"title":"Popen waiting for child process even when the immediate child has terminated","body":"<p>I'm working with Python 2.7 on Windows 8/XP.</p>\n\n<p>I have a program A that runs another program B using the following code:</p>\n\n<pre><code>p = Popen([\"B\"], stdout=PIPE, stderr=PIPE)\nstdout, stderr = p.communicate()\nreturn\n</code></pre>\n\n<p>B runs a batch script C. C is a long running script and I want B to exit even though C has not finished. I have done it using the following code (in B):</p>\n\n<pre><code>p = Popen([\"C\"])\nreturn\n</code></pre>\n\n<p>When I run B, it works as expected. When I run A however, I expected it to exit when B exits. But A waits until C exits even though B has already exitted. Any ideas on what's happening and what possible solutions could be?</p>\n\n<p>Unfortunately, the obvious solution of changing A to look like B is not an option.</p>\n\n<p>Here is a functional sample code to illustrate this issue:\n<a href=\"https://dl.dropbox.com/u/15468178/popen.zip\" rel=\"nofollow\">https://dl.dropbox.com/u/15468178/popen.zip</a></p>\n\n<p>Any input is much appreciated.</p>\n"},{"tags":["python","recursion","tree","binary-search-tree","inorder"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13256529,"title":"Python: Binary search tree and recursion returning a nested list","body":"<p>Given a Binary Search Tree, for example:</p>\n\n<pre><code>        9\n            8\n    7\n5\n    3\n        2\n</code></pre>\n\n<p>I would like to get an in-order list of nodes with values between a and b (inclusive).</p>\n\n<p>I have implemented a recursive helper function:</p>\n\n<pre><code>def _range(root, a, b):\nnode_list = []\nif root.left:\n    node_list.append(_range(root.left, a, b))\nif root.value &gt;= a and root.value &lt;= b:\n    node_list.append(root)\nif root.right:\n    node_list.append(_range(root.right, a, b))\nreturn node_list\n</code></pre>\n\n<p>Which gives me:</p>\n\n<pre><code>[[[BTNode: 2], BTNode: 3], BTNode: 5, [BTNode: 7, [[BTNode: 8], BTNode: 9]]]\n</code></pre>\n\n<p>I however need:</p>\n\n<pre><code>[BTNode: 2, BTNode: 3, BTNode: 5, BTNode: 7, BTNode: 8, BTNode: 9]\n</code></pre>\n\n<p>Is there anyway to flatten the list? I realize that what I am doing is appending a list to another list, but am not sure how to fix this without breaking the code.</p>\n"},{"tags":["python","unix"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":64,"score":0,"question_id":13254351,"title":"Sorting contents of a file","body":"<p>In unix (specifically, I'm using <code>bash</code>), I can sort the contents of a file easily; given I have a file:</p>\n\n<pre><code>chris@chris:~$ cat testSort.txt \n3       1       test01\n8       2       test02\n6       3       test03\n7       4       test04\n1       5       test05\n</code></pre>\n\n<p>Running <code>sort</code> will return the sorted values based on the 1st column</p>\n\n<pre><code>chris@chris:~$ sort testSort.txt\n1       5       test05\n3       1       test01\n6       3       test03\n7       4       test04\n8       2       test02\n</code></pre>\n\n<p>the results of which I can pipe into a file or a program as necessary; is there a way as easy as this in python, or do I need to read my file in, save it as a data structure of some sort, and then save it again?</p>\n\n<p><strong>Confusion</strong></p>\n\n<p>I'm not sure why I've received a downvote - I asked if there was a way as simple as in unix (i.e. a 1 word command) to achieve a sort.  I even provided an example to show what I wanted? In what way does this mean that \"the question shows no research effort, it is unclear or not useful\"? </p>\n"},{"tags":["python"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":13256746,"title":"String to int conversion bug?","body":"<p>in python 2.6.6 when I use int() to convert a string to a number the below code doesn't behave correct if the string is 257 or larger.</p>\n\n<pre><code>curr = int(\"256\")  \nmyint = int(\"256\")  \nif curr is myint:  \n    print(\"true\")  \nelse:  \n    print(\"false\")  \n</code></pre>\n\n<p>this returns true which is correct</p>\n\n<pre><code>curr = int(\"257\")  \nmyint = int(\"257\")  \nif curr is myint:  \n    print(\"true\")  \nelse:  \n    print(\"false\")  \n</code></pre>\n\n<p>this returns false ???</p>\n"},{"tags":["python","parallel-processing","python-2.7"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13256648,"title":"Reloading function with parallel python (pp)","body":"<p>I'm taking a first stab at parallel processing using the Parallel Python (pp) module and am getting strange behavior when I change the called function.  It seems that any changes I make to a function, after the first use of pp, do not get noticed.  e.g. </p>\n\n<pre><code># Overly-simplified example, but it communicates the core problem!\nimport pp\n\ndef test(data): \n    return data*10\n\nppservers = ()\njob_server = pp.Server(ppservers=ppservers)\n\na = job_server.submit(test, (10,),(),())\n</code></pre>\n\n<p>Running this yields: a()=100</p>\n\n<p>But, if I change test: </p>\n\n<pre><code>def test(data):\n    return 'HELLO'\n</code></pre>\n\n<p>and F5 it, I still get: a()=100\nEven if I delete a, job_server, test I still get a()=100.  The only way I have found out of this is to restart my IDE (Spyder).  I suspect \"test\" is getting stored in pp somewhere.  This is annoying to have to restart the IDE just to test changes in my functions.  </p>\n"},{"tags":["javascript","jquery","python","jquery-ajax","flask"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13256325,"title":"JQuery/ Flask - send data from server to browser as JSON","body":"<p>Firstly excuse my ignorance, I'm very new to all this.</p>\n\n<p>My problem is that I'm trying to send json data stored in a mongodb of coordinates to a client browser. I have a python module which uses Twitter's Streaming API to store into the DB. This works fine, but when I try to send this to the client it displays nothing, evenhough I can see server terminal getting more data. I've not used Flask or JQuery before, so have based it on the example at <a href=\"http://flask.pocoo.org/docs/patterns/jquery/\" rel=\"nofollow\">http://flask.pocoo.org/docs/patterns/jquery/</a>.</p>\n\n<p>This is my code:</p>\n\n<pre><code>from flask import Flask, jsonify, render_template, request\nfrom pymongo import Connection \n\napp = Flask(__name__)\n\n@app.route('/_reader')\ndef reader():\n    db = Connection().tstream\n    coll = db.tweets_tail\n    cursor = coll.find({\"coordinates.type\" : \"Point\" }, {\"coordinates\" :1},tailable=True,timeout=False)\n    ci=0\n    while cursor.alive:\n        try:\n            doc = cursor.next()\n            ci += 1\n            print doc\n            print ci\n        except StopIteration:\n            pass\n    return jsonify(ci, doc)\n\n\n@app.route('/')\ndef index():\n    return render_template('index.html')\n\nif __name__ == '__main__':\n    app.run(debug=True, port= 8888)\n</code></pre>\n\n<p>This is my html client side:</p>\n\n<pre><code>{% extends \"layout.html\" %}\n{% block body %}\n&lt;script type=text/javascript&gt;\n  $(function() {\n       $.getJSON($SCRIPT_ROOT + '/_reader', \n       function(data) {\n        $(\"#result\").text(data.result);\n      });\n      return false;\n    });\n\n&lt;/script&gt;\n&lt;h1&gt;Coordinates&lt;/h1&gt;\n&lt;p&gt;\n   &lt;span id=result&gt;?&lt;/span&gt;\n{% endblock %}\n</code></pre>\n\n<p>I'm hoping that has new coordinate data is received it pushes this to the client.</p>\n\n<p>I hope somebody can help.</p>\n\n<p>Thanks</p>\n"},{"tags":["python","decorator","argparse"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13248487,"title":"(semi-) automatic generation of argparsers for functions","body":"<p><strong>tldnr: given a function, is there a way to automatically create an ArgumentParser from its signature?</strong></p>\n\n<p>I've got a bunch of functions that I'd like to expose to the command line. So basically, a module:</p>\n\n<pre><code> def copy(foo, bar, baz):\n    ...\n def move(from, to):\n    ...\n def unlink(parrot, nomore=True):\n    ...\n\n if __name__ == '__main__':\n     argparse stuff\n</code></pre>\n\n<p>which can be called from the command line like this:</p>\n\n<pre><code> python commands.py move spam ham\n python commands.py unlink --parrot Polly\n</code></pre>\n\n<p>Although this is pretty straightforward to implement, there's a lot of wiring involved:</p>\n\n<pre><code>parser = argparse.ArgumentParser(...)\nsubparsers = parser.add_subparsers()\n...\nc = subparsers.add_parser('unlink', description='Unlink a parrot')\nc.add_argument('--parrot', help='parrots name', required=True)\nc.add_argument('--nomore', help='this parrot is no more', action='store_true')\n...\nc = subparsers.add_parser('move', description='Move stuff')\n...\n</code></pre>\n\n<p>and so on, for each function. The worst thing, should function arguments change (and they do), the argparse stuff needs to be synchronized manually.</p>\n\n<p>It would be much nicer if the functions could provide argparse stuff for themselves, so that the main code would be like: </p>\n\n<pre><code>parser = argparse.ArgumentParser(...)\nsubparsers = parser.add_subparsers()\n\ncopy.register(subparsers)\nmove.register(subparsers)\nunlink.register(subparsers)\n...\n</code></pre>\n\n<p>I thought of something along these lines:</p>\n\n<pre><code>@args(\n    description='Unlink a parrot',\n    parrot={'required':True, 'help':'parrots name'},\n    nomore={'action': 'store_true', 'help': 'this parrot is no more'}\n)\ndef unlink(parrot, nomore=True):\n    ...\n</code></pre>\n\n<p>My questions:</p>\n\n<ul>\n<li>is there a library that does something like this?</li>\n<li>if no, is it possible to write such a decorator, and how?</li>\n<li>is there a other/better way to implement what I want?</li>\n</ul>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":19,"score":-2,"question_id":13256657,"title":"session storage path setting doesn't exist","body":"<p>I am trying to run a django project and the following error is displayed: 'The session storage path '/home/billy/myapps/my_server/../my_server/sessions' doesn't exist. Please set your SESSION_FILE_PATH setting to an existing directory in which Django can store session data.'\nI have tried googling out whats the problem but u have not found a specific answer to my problem. Any assistance is highly appreciated.</p>\n\n<p>Thanks</p>\n"},{"tags":["python","expression","sympy"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":601,"score":3,"question_id":7006626,"title":"How to calculate expression using sympy in python","body":"<p>I need a calculate below expression using sympy in python? </p>\n\n<pre><code>exp = '(a+b)*40-(c-a)/0.5'\n</code></pre>\n\n<p>In <code>a=6</code>, <code>b=5</code>, <code>c=2</code> this case how to calculate expression using sympy in python? Please help me.</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13256238,"title":"Simplest way of eliminating objects from queryset in Django","body":"<p>I have a query set,  <code>categories = unipart.categories.all()</code>, which is all the categories that a unipart object is linked to.</p>\n\n<p>However, I'd like to remove the top-level categories from this list -- ie. those with subcategories that the unipart is also listed within.</p>\n\n<p>Or those categories with a parent_id equal to one of the category_ids in the queryset.</p>\n\n<p>For example if a unipart was listed in:\nNutmeg (parent= Spices) and\nSpices (parent = Food)</p>\n\n<p>then I'd want to ONLY include Nutmeg -- so basically I want to 'pop' Spices from the queryset.</p>\n\n<p>What is the best way to do this? I would rather not use a list.</p>\n\n<p>Here's my models:</p>\n\n<pre><code>class UniPart (models.Model):\ncategories=models.ManyToManyField(Category, related_name = 'unipart')\n\nclass Category (MPTTModel):\n    category = models.CharField(max_length=250)\n    oc_id= models.IntegerField()\n    parent = TreeForeignKey('self', blank=True, null=True, related_name='children')\n    def __unicode__(self):\n</code></pre>\n"},{"tags":["python","delphi","python4delphi"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":68,"score":3,"question_id":13239083,"title":"Is there a way to debug a python script using the python4delphi components?","body":"<p>I want to add scripting capabilities to my application and I just came across python4delphi <a href=\"http://code.google.com/p/python4delphi/\" rel=\"nofollow\">http://code.google.com/p/python4delphi/</a>, which seems to be stable. \nAt first sight it looks very easy to use on the developers side, but I couldn't find a way to debug a script. Would be great if I could embed the IDLE IDE in my application, I just have no idea how to do it. </p>\n\n<p>Is there a easy way to add debugging capabilities with python4delphi? Should I use other script engines like pascalScript (seems to have been discontinued)?</p>\n\n<p>Edit: After having a look at PySctipt and pdb I realized that what I am looking is more like a visual editor with embedded debugging and the capability to read python4delphi custom modules (the ones where I export my delphi objects. Being a python noob I have no idea how p4d does this). I am probably asking too much, but would be great to find an implementation of that and not having to code it all from scratch.</p>\n"},{"tags":["python","interactive-shell","python-interactive"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13254044,"title":"How to store the current state of InteractiveInterpreter Object in a database?","body":"<p>I am trying to build an online Python Shell. I execute commands by creating an instance of <code>InteractiveInterpreter</code> and use the command <code>runcode</code>. For that I need to store the interpreter state in the database so that variables, functions, definitions and other values in the global and local namespaces can be used across commands. Is there a way to store the current state of the object <code>InteractiveInterpreter</code> that could be retrieved later and passed as an argument <code>local</code> to <code>InteractiveInterpreter</code> constructor or If I can't do this, what alternatives do I have to achieve the mentioned functionality?<br/>\nBelow is the pseudo code of what I am trying to achieve</p>\n\n<pre>\n<code>\ndef fun(code, sessionID):\n     session = Session()\n     # get the latest state of the interpreter object corresponding to SessionID\n     vars = session.getvars(sessionID)\n     it = InteractiveInterpreter(vars)\n     it.runcode(code)\n     #save back the new state of the interpreter object\n     session.setvars(it.getState(),sessionID)\n</code>\n</pre>\n\n<p>Here, session is an instance of table containing all the necessary information.</p>\n"},{"tags":["python","rest","web-applications","distributed-computing"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13255571,"title":"Durable architecture in Python distributed application","body":"<p>Wondering about durable architectures for distributed Python applications.\n<a href=\"http://stackoverflow.com/questions/13238930/architecture-solution-for-python-web-application\">This question I asked before</a> should provide a little guidance about the sort of application it is.  We would like to have the ability to have several code servers and several database servers, and ideally some method of deployment that is manageable and not too much of a pain.</p>\n\n<p>The question I mentioned provides an answer that I like, but I wonder how it could be made more durable, or if doing so requires using other technologies.  In particular:</p>\n\n<blockquote>\n  <p>I would have my frontend endpoints be the WSGI (because you already have that written) and write the backend to be distributed via messages. Then you would have a pool of backend nodes that would pull messages off of the Celery queue and complete the required work. It would look sort of like:</p>\n  \n  <p>Apache -> WSGI Containers -> Celery Message Queue -> Celery Workers.</p>\n  \n  <p>The apache nodes would be behind a load balancer of some kind. This would be a fairly simple architecture to scale and is, if done correctly, fairly reliable. Code for failure in a system like this and you will be fine.</p>\n</blockquote>\n\n<p>What is the best way to make durable applications? Any suggestions on how to either \"code for failure\" or design it differently so that we don't necessarily have to?  If you think Python might not be suited for this, that is also a valid solution.</p>\n"},{"tags":["jquery","python","django","django-forms","django-templates"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13251155,"title":"How should cloned Django forms be collected on submission?","body":"<p>I'm using standard Django Model Forms which are then used in HTML templates for an application system we're currently re-jigging. </p>\n\n<p>The tricky bit (for me at least) is one step in the process which dynamically adds additional forms to the HTML using a jQuery plugin called <a href=\"http://www.mdelrosso.com/sheepit/index.php?lng=en_GB\" rel=\"nofollow\">\"SheepIt\"</a> and I'm wondering how all the form data can be easily collected in the related view.</p>\n\n<p>The SheepIt bit: </p>\n\n<pre><code>$(document).ready(function() {   \n        var sheepItForm = $('#sheepItForm').sheepIt({\n            separator: '',\n            allowRemoveLast: true,\n            allowRemoveCurrent: true,\n            allowRemoveAll: false,\n            allowAdd: true,\n            allowAddN: false,\n            minFormsCount: 1,\n            iniFormsCount: 1\n        });\n\n    });\n</code></pre>\n\n<p>Template code:</p>\n\n<pre><code>&lt;div id=\"entry_form\"&gt;\n&lt;form method=\"post\" enctype=\"multipart/form-data\" action=\"/enter/2/\" id=\"sheepItForm\"&gt;\n    &lt;fieldset id=\"sheepItForm_template\"&gt;\n                &lt;a id=\"sheepItForm_remove_current\"&gt;X&lt;/a&gt;\n                &lt;div class=\"select\"&gt;{{ form.select }}&lt;/div&gt;\n                &lt;div class=\"text\"&gt;{{ form.text }}&lt;/div&gt;\n                &lt;div class=\"upload\"&gt;{{ form.upload }}&lt;/div&gt;\n    &lt;/fieldset&gt;\n\n     &lt;div id=\"sheepItForm_noforms_template\"&gt;No Entries&lt;/div&gt;\n\n     &lt;div id=\"sheepItForm_controls\"&gt;\n         &lt;div id=\"sheepItForm_add\"&gt;&lt;a&gt;&lt;strong&gt;+&lt;/strong&gt; Add Another Entry&lt;/a&gt;&lt;/div&gt;\n     &lt;/div&gt; \n\n{{ formset.management_form }}\n&lt;input type=\"submit\" value=\"Proceed to Payment\"&gt; \n&lt;/form&gt;&lt;/div&gt;\n</code></pre>\n\n<p>The above outputs a little form with buttons to add and remove clones of the form using the SheepIt plugin. </p>\n\n<p>Normally, we would collect the form data with something like:</p>\n\n<pre><code>form_data = request.POST.copy()\n</code></pre>\n\n<p>Or similar. Should I just iterate over everything collected in the post data or is there a better perhaps 'pythonic' way of handling these little clones? Perhaps gathering them into a formset then doing something similar to:</p>\n\n<pre><code>for f in formset.forms:\n    if f.is_valid():\n        f.save()\n</code></pre>\n\n<p>Edit:\nAnd here's some of the views code that I'm currently chopping and changing:</p>\n\n<pre><code>    form = EntryForm_2_set.form()\n    template_dict['form'] = form\n    if request.method == 'POST':\n        # from forms.py: EntryForm_2_set = forms.formsets.formset_factory(EntryForm_2, extra=0)\n        formset = EntryForm_2_set(request.POST)\n        if formset.is_valid():\n            for f in formset.forms:\n                if f.is_valid():\n                    f.save()\n            entry_url = reverse('entry-stage',kwargs={'stage':3}) \n            return HttpResponseRedirect(entry_url)\n    else:\n        formset = EntryForm_2_set()\n        template_dict['formset'] = formset\n    return render_to_response('submission-stage-two.html', template_dict, RequestContext(request)) \n</code></pre>\n\n<p>Any ideas guys?</p>\n"},{"tags":["python","emacs"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13253200,"title":"How to enable automatic indentation in python.el from fgallina","body":"<p>I have installed the python package in emacs which downloads the python.el from <a href=\"https://raw.github.com/fgallina/python.el/master/python.el\" rel=\"nofollow\">https://raw.github.com/fgallina/python.el/master/python.el</a></p>\n\n<p>I would like to have automatic indentation ie when I write <code>def a():</code> and press <code>RET</code> it should automatically indent with a TAB. However I have to manually press TAB for indenting ? How do I enable it ? </p>\n\n<p>This was the default behaviour in the python.el avalaible from <a href=\"https://launchpad.net/python-mode\" rel=\"nofollow\">https://launchpad.net/python-mode</a></p>\n\n<p>Any help will be appreciated,</p>\n\n<p>Thanks</p>\n"},{"tags":["python"],"answer_count":0,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":57,"score":3,"question_id":13244081,"title":"Can I insert deletable characters in python input buffer?","body":"<p>I want to automatically indent the next line of a console app but the user needs to be able to remove it.  <code>sys.stdout.write</code> and <code>print</code> make undeletable characters and I can't write to sys.stdin (as far as I know).  I'm essentially trying to get smart indenting but I can only nest deeper and deeper.  Any ideas on how to climb back out?</p>\n\n<p>Edit: I should have noted that this is part of a Windows program that uses IronPython.  While I could do something much fancier (and might in the future), I am hoping to quickly get a reasonably pleasant experience with very little effort as a starting point.</p>\n"},{"tags":["python","arrays","numpy"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":13256128,"title":"Select a subset of array based on inequality in Python","body":"<p>Say I have the following setup:</p>\n\n<pre><code>x=np.array(range(0,100))\ny=x**0.5\nz=x**2\n</code></pre>\n\n<p>How could I get all the values of y between 4 and 8, and create a new array that had a row for those y values, but also a row for the corresponding z values?</p>\n\n<p>i.e. 25 in x has a y value of 5 which is between 4 and 8, I'd like this value, but I'd also like the z value of 625 in the row below.</p>\n\n<p>The math equations are just an example, the forumals could be anything including bessel functions.</p>\n\n<p>Thanks</p>\n"},{"tags":["python","c","ruby","math","swap"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":5,"view_count":103,"score":-1,"question_id":13256099,"title":"How does this code swap the two numbers?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1826159/swapping-two-variable-value-without-using-3rd-variable\">Swapping two variable value without using 3rd variable</a>  </p>\n</blockquote>\n\n\n\n<p>I came across this code on Quora.\nFor C:</p>\n\n<pre><code>a^=b^=a^=b;\n</code></pre>\n\n<p>For Ruby/Python:</p>\n\n<pre><code>a,b=b,a\n</code></pre>\n"},{"tags":["python","algorithm","mergesort","inversion"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":80,"score":0,"question_id":13256018,"title":"Problems With Inversion Counting","body":"<p>Can anyone see any problems with my implementation of an inversion counter using the merge sort method? I get the right value for very small lists, but when I import a list of 100,000 or so integers, I get the wrong value. My implementation works like this: during merge, each time a variable is added from list <code>right</code> to list <code>left</code>, I increment a class counter <code>n</code> by <code>len(left)</code>. I do this until the lists have been fully merged and sorted, which, by my understanding of mergesort and inversions, should cover every possible inversion. Where am I going wrong?</p>\n\n<pre><code>from collections import deque\n\nm = []\nf = open(\"IntegerArray.txt\")\nfor line in f:\n    m.append(line)\n\nclass InversionCount:\n\n    def __init__(self, n):\n        self.n = n\n    def inversionMergeSort(self, m):\n        if len(m) &lt;= 1:\n            return m\n        half = len(m)/2\n        left = m[0:half]\n        right = m[half:]\n        left = self.inversionMergeSort(left)\n        right = self.inversionMergeSort(right)\n        return self.inversionSort(left, right)\n\n    def inversionSort(self, left, right):\n        leftQueue = deque(i for i in left)\n        rightQueue = deque(j for j in right)\n        orderedList = []\n        while len(leftQueue) &gt; 0 or len(rightQueue) &gt; 0:\n            if len(leftQueue) &gt; 0 and len(rightQueue) &gt; 0:\n                if leftQueue[0] &lt; rightQueue[0]:\n                    orderedList.append(leftQueue[0])\n                    leftQueue.popleft()\n                else:\n                    orderedList.append(rightQueue[0])\n                    self.n += len(leftQueue)\n                    rightQueue.popleft()\n            elif len(leftQueue) &gt; 0:\n                orderedList.append(leftQueue[0])\n                leftQueue.popleft()\n            elif len(rightQueue) &gt; 0:\n                orderedList.append(rightQueue[0])\n                rightQueue.popleft()\n        return orderedList\n\nnInversions = InversionCount(0)\nnInversions.inversionMergeSort(m)\nprint nInversions.n\n</code></pre>\n"},{"tags":["python","ios","encryption","decrypt"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":25,"score":3,"question_id":13255493,"title":"RNCryptor and Python server","body":"<p>I'm using RNCryptor to encrypt NSData on iOS and send it to a Python server. So far, so right. My problem comes when I try decrypt NSData on server side. </p>\n\n<p>RNCryptor embeds all relevant data in encrypted header, but I can not get the IV in the server side to decrypt data received.</p>\n\n<p>Any idea?</p>\n\n<p><strong>Configuration:</strong>\n<em>iOS 5.0 with RNCryptor / \nPython + Tornado Web Server</em></p>\n\n<p>Thanks!</p>\n"},{"tags":["python","list","dictionary","tuples"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13254797,"title":"Python Tuple Operation - Get Value","body":"<p>I have a tuple that contains province data.</p>\n\n<pre><code>CHOICES = (\n        ('', ''),\n        ('United States', (\n                ('AL', 'Alabama'),\n                ('AK', 'Alaska'),\n                ('AZ', 'Arizona'),\n                ('AR', 'Arkansas'),\n                ('CA', 'California'),\n                ('CO', 'Colorado'),\n                ('CT', 'Connecticut'),\n                ('DE', 'Delaware'),\n                ('DC', 'District of Columbia'),\n                ('FL', 'Florida'),\n                ('GA', 'Georgia'),\n                ('GU', 'Guam'),\n                ('HI', 'Hawaii'),\n                ('ID', 'Idaho'),\n                ('IL', 'Illinois'),\n                ('IN', 'Indiana'),\n                ('IA', 'Iowa'),\n                ('KS', 'Kansas'),\n                ('KY', 'Kentucky'),\n                ('LA', 'Louisiana'),\n                ('ME', 'Maine'),\n                ('MD', 'Maryland'),\n                ('MA', 'Massachusetts'),\n                ('MI', 'Michigan'),\n                ('MN', 'Minnesota'),\n                ('MS', 'Mississippi'),\n                ('MO', 'Missouri'),\n                ('MT', 'Montana'),\n                ('NE', 'Nebraska'),\n                ('NV', 'Nevada'),\n                ('NH', 'New Hampshire'),\n                ('NJ', 'New Jersey'),\n                ('NM', 'New Mexico'),\n                ('NY', 'New York'),\n                ('NC', 'North Carolina'),\n                ('ND', 'North Dakota'),\n                ('OH', 'Ohio'),\n                ('OK', 'Oklahoma'),\n                ('OR', 'Oregon'),\n                ('PA', 'Pennsylvania'),\n                ('PR', 'Puerto Rico'),\n                ('RI', 'Rhode Island'),\n                ('SC', 'South Carolina'),\n                ('SD', 'South Dakota'),\n                ('TN', 'Tennessee'),\n                ('TX', 'Texas'),\n                ('UT', 'Utah'),\n                ('VT', 'Vermont'),\n                ('VA', 'Virginia'),\n                ('VI', 'Virgin Islands'),\n                ('WA', 'Washington'),\n                ('WV', 'West Virginia'),\n                ('WI', 'Wisconsin'),\n                ('WY', 'Wyoming')\n            )\n        ),\n        ('Canada', (\n                ('AB', 'Alberta' , 1.05),\n                ('BC', 'British Columnbia', 1.12),\n                ('MB', 'Manitoba', 1.05),\n                ('NB', 'New Brunswick', 1.13),\n                ('NL', 'Newfoundland and Labrador', 1.13),\n                ('NT', 'Northwest Territories', 1.05),\n                ('NS', 'Nova Scotia', 1.15),\n                ('NU', 'Nunavut', 1.05),\n                ('PE', 'Prince Edward Island', 1.05),\n                ('SK', 'Saskatchewan', 1.05),\n                ('ON', 'Ontario', 1.13),\n                ('QC', 'Quebec', 1.05),\n                ('YT', 'Yukon', 1.05)\n            )\n        )\n    )\n</code></pre>\n\n<p>Is there an elegant way of getting the the number based on the province code if a Canadian province is selected.  example.  If I have the province ON is there a tuple operation that I can use to get the value 1.13.</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","cursor","mysql-python"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":9,"score":0,"question_id":13255410,"title":"Suppress cursor.execute() message in python MySQLdb","body":"<p>How to suppress the cursor.execute() message in MySQLdb.</p>\n\n<pre><code>&gt;&gt;&gt; from warnings import filterwarnings\n&gt;&gt;&gt; import MySQLdb\n&gt;&gt;&gt; filterwarnings('ignore', category = MySQLdb.Warning)\n&gt;&gt;&gt; db = MySQLdb.connect('127.0.0.1', 'root', '','')\n&gt;&gt;&gt; cursor = db.cursor()\n&gt;&gt;&gt; cursor.execute(\"select version()\")\n1L\n</code></pre>\n\n<p>I need to suppress this '1L' message</p>\n"},{"tags":["python"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":13255455,"title":"Same variable name for different values in nested loops.","body":"<p>This code is perfectly valid Python</p>\n\n<pre><code>x=[[1,2,3,4], [11,22,33,44]]\nfor e in x:\n    for e in e:\n        print e\n</code></pre>\n\n<p>Can someone please tell me why, and how this works?</p>\n\n<p>I understand that both the <code>e</code>'s are in different scopes, but how come using them together like this isn't causing an error?</p>\n"},{"tags":["python","capslock"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":62,"score":1,"question_id":13129804,"title":"Python - How to get current keylock status?","body":"<p>I'm attempting to write a simple programme that displays the current status of the different keylocks, but I'm unable to find a solution as to how to get the current status of them in Python. Thank you.</p>\n"},{"tags":["python","while-loop"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":13255769,"title":"stuck in while loop python","body":"<p>I am creating a chat server in python and got quite far as a noob in the language. I am having 1 problem at the moment which I want to solve before I go further, but I cannot seem to find how to get the problem solved. </p>\n\n<p>It is about a while loop that continues..</p>\n\n<p>in the below code is where it goes wrong</p>\n\n<pre><code>while 1:\n    try:\n        data = self.channel.recv ( 1024 )\n        print \"Message from client: \", data\n        if \"exit\" in data:\n            self.channel.send(\"You have closed youre connection.\\n\")\n            break\n    except KeyboardInterrupt:\n        break\n    except:\n        raise\n</code></pre>\n\n<p>When this piece of code get executed, on my client I need to enter \"exit\" to quit the connection. This works as a charm, but when I use CTRL+C to exit the connection, my server prints \"Message from client: \" a couple of thousand times.</p>\n\n<p>where am I going wrong?</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":20,"score":2,"question_id":13255758,"title":"numpy.savetxt \"tuple index out of range\"?","body":"<p>I'm trying to write a few lines into a text file, and here's the code I used:</p>\n\n<pre><code>import numpy as np\n\n# Generate some test data\ndata = np.arange(0.0,1000.0,50.0)\n\nwith file('test.txt', 'w') as outfile:      \n    outfile.write('# something')\n\n    for data_slice in data: \n        np.savetxt(outfile, data_slice, fmt='%1.4e')\n\n        outfile.write('# New slice\\n')\n</code></pre>\n\n<p>When the code runs up to the line with savetxt, I get this error:</p>\n\n<pre><code>     IndexError: tuple index out of range\n</code></pre>\n\n<p>Any idea why this happens? I tried removing the \"fmt\" part, but I get the same thing.</p>\n"},{"tags":["php","python","mysql","sphinx"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13239946,"title":"Sphinx Search indexing some fields but not others","body":"<p>I'm using generic Sphinx with Python (though I tested this against PHP as well and got the same problem). I have a table where I have several fields I want to be able to search in sphinx against but it seems like only some of the fields get indexed.</p>\n\n<p>Here's my source (dbconfig just has the connection information):</p>\n\n<pre><code>source bill_src : dbconfig\n{\n    sql_query       = \\ \n        SELECT id,title,official_title,summary,state,chamber,UNIX_TIMESTAMP(last_action) AS bill_date FROM bill\n\n    sql_attr_timestamp = bill_date\n\n    sql_query_info      = SELECT * FROM bill WHERE id=$id\n}\n</code></pre>\n\n<p>Here's the index</p>\n\n<pre><code>index bills\n{\n    source          = bill_src\n    path            = /var/data/bills\n    docinfo         = extern\n    charset_type        = sbcs\n}\n</code></pre>\n\n<p>I'm trying to use extended match mode. It seems that <code>title</code> and <code>summary</code> are fine but the <code>official_title</code>, the <code>state</code> and the <code>chamber</code> fields are ignored in the index. So for example if I do:</p>\n\n<p><code>@official_title Affordable Care Act</code> </p>\n\n<p>I get:</p>\n\n<pre><code>query error: no field 'official_title' found in schema\n</code></pre>\n\n<p>but the same query with @summary produces results. Any ideas what I'm missing?</p>\n\n<p><strong>EDIT</strong>\nHere's the table I'm trying to index:</p>\n\n<pre><code>+--------------------+--------------+------+-----+---------+----------------+\n| Field              | Type         | Null | Key | Default | Extra          |\n+--------------------+--------------+------+-----+---------+----------------+\n| id                 | int(11)      | NO   | PRI | NULL    | auto_increment |\n| bt50_id            | int(11)      | YES  | MUL | NULL    |                |\n| type               | varchar(10)  | YES  |     | NULL    |                |\n| title              | varchar(255) | YES  |     | NULL    |                |\n| official_title     | text         | YES  |     | NULL    |                |\n| summary            | text         | YES  |     | NULL    |                |\n| congresscritter_id | int(11)      | NO   | MUL | NULL    |                |\n| last_action        | datetime     | YES  |     | NULL    |                |\n| sunlight_id        | varchar(45)  | YES  |     | NULL    |                |\n| number             | int(11)      | YES  |     | NULL    |                |\n| state              | char(2)      | YES  |     | NULL    |                |\n| chamber            | varchar(45)  | YES  |     | NULL    |                |\n| session            | varchar(45)  | YES  |     | NULL    |                |\n| featured           | tinyint(1)   | YES  |     | 0       |                |\n| source_url         | varchar(255) | YES  |     |         |                |\n+--------------------+--------------+------+-----+---------+----------------+\n</code></pre>\n"},{"tags":["python","linux","wxpython"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":12624015,"title":"wx.NotificationMessage AttributeError: 'module' object has no attribute 'NotificationMessage'","body":"<p>I get this error when trying to use wxPython's NotificationMessage class:</p>\n\n<p>wx.NotificationMessage(\"\", \"Hello world!\").Show()\nAttributeError: 'module' object has no attribute 'NotificationMessage'</p>\n\n<p>The code is quite simply:</p>\n\n<pre><code>#!/usr/bin/python\n\nimport wx\n\napp = wx.App()\n\nwx.NotificationMessage(\"\", \"Hello world!\").Show()\n\napp.MainLoop()\n</code></pre>\n\n<p>What am I missing?</p>\n\n<p>This is running on Linux Mint 13, MATE 1.2 desktop environment, Python 2.7.3.</p>\n"},{"tags":["python"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":45,"score":-3,"question_id":13255470,"title":"Need some advise about if I should transfer to a Comp Science major","body":"<p>I am a freshman in college and this first semester I had to take a class in python as part of my Mechanical Engineering degree plan, I enjoyed it so much I am considering transferring to computer science. I realized how much I liked it when my brother saw me on the computer and asked if I had computer science homework, at that moment I realized I was just writing a program for the hell of it on a Friday night.</p>\n\n<p>I asked a friend of mine and he said python is like driving a go cart, it is fun but utterly useless, and the languages I'd have to learn are more like driving an 18 wheeler useful but boring. Not really sure how true that is but I really have no idea.</p>\n\n<p>I have already bought a java book and am planning on start over the winter break. I was wondering if there was anyway to gauge if it is for me.  </p>\n"},{"tags":["python","nlp","nltk"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13163027,"title":"most effective way to parse with nltk","body":"<p>What the most effective way to parse with nltk?\nI have a big vocabulary and take me age to parse with RecursiveDescentParser.\nThanks</p>\n"},{"tags":["python"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":68,"score":-1,"question_id":13255540,"title":"Got none back in python","body":"<pre><code>def fill_boxes(books, capacity):   \n    return fill_boxes1(books, capacity,[])\n\ndef fill_boxes1(books, capacity,m):    \n    if len(books) &lt;= capacity:\n        return [books]\n    elif 0 == capacity:\n        return [m] + [books]\n    else:\n        m = m + [books[0]]\n        return fill_boxes1(books[1:],capacity-1,m)\n</code></pre>\n\n<p>By this question, I can't use loop.</p>\n\n<p>books is a list of books and capacity is a positive integer.</p>\n\n<p>I want to make a new list which contains two lists.\nOne is the first \"capacity\" items in the \"books\", and second is the rest of the \"books\"<br>\nand I tried this    </p>\n\n<pre><code>fill_boxes([\"Fox in Socks\", \"Cat in the Hat\", \"Hop on Pop\", \"Green Eggs and Ham\"], 3)\n</code></pre>\n\n<p>but got none back, i wonder why ,thanks guys</p>\n"},{"tags":["python","crontab"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":49,"score":4,"question_id":13250365,"title":"Crontab fails to execute Python script","body":"<p><code>crontab</code> fails to execute a Python script. The command line I am using to run the Python script is ok.</p>\n\n<p><strong>These are solutions I had tried:</strong></p>\n\n<ul>\n<li>add <code>#!/usr/bin/env python</code> at the top of the <code>main.py</code></li>\n<li>add <code>PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin</code> at the top of <code>crontab</code></li>\n<li><code>chmod 777</code> to the <code>main.py</code> file</li>\n<li><code>service cron restart</code></li>\n</ul>\n\n<p><strong>my crontab is:</strong> </p>\n\n<pre><code>PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin\n\n*/1 * * * * python /home/python_prj/main.py\n</code></pre>\n\n<p><strong>and the log in /var/log/syslog is:</strong></p>\n\n<pre><code>Nov  6 07:08:01 localhost CRON[28146]: (root) CMD (python /home/python_prj/main.py)\n</code></pre>\n\n<p>and nothing else.</p>\n\n<p>The <code>main.py</code> script calls some methods from other modules under <code>python_prj</code>, does that matter?</p>\n\n<p>Anyone can help me?</p>\n"},{"tags":["python","django","amazon-s3"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":45,"score":0,"question_id":13233340,"title":"Amazon S3: I'm seeing 'Raw Content' stored rather than an image","body":"<p>I'm pinging an API which is giving me the path to an image. I am then opening/reading that image and saving it to a database on s3.</p>\n\n<p>The problem is that rather than storing the actual image, it's storing just the words <code>Raw Content</code>. What am I doing wrong? </p>\n\n<p>Here's my relevant code. Basically I store the path to the file in the field <code>coverart</code> and the function <code>store_in_s3_partpic</code> returns the path to the file. This function also obviously loads the content to S3.</p>\n\n<pre><code>pic = partpics['url']\n# CACHING\nimg_url = pic\nname = urlparse(img_url).path.split('/')[-1]\n#wrap your file content??\ncontent = ContentFile(urllib2.urlopen(img_url).read())\nunipart.coverart = store_in_s3_partpic(name, content)\n</code></pre>\n\n<p>Am I doing anything wrong here that would cause me to just see 'Raw Content'?</p>\n\n<p>Here's my store_in_s3_partpic code:</p>\n\n<pre><code>def store_in_s3_partpic(name, content):\n    print \"STORING PARTPIC\"\n    conn = S3Connection(settings.AWS_ACCESS_KEY_ID, settings.AWS_SECRET_ACCESS_KEY)\n    pathtofile = \"partpics/%s\" % (name)\n    b = conn.create_bucket('mybucket')\n    mime = mimetypes.guess_type(name)[0]\n    k = Key(b)\n    k.key = \"/media/partpics/%s\" % (name)\n    k.set_metadata(\"Content-Type\", mime)\n    k.set_contents_from_string(content)\n    k.set_acl(\"public-read\")\n    return pathtofile\n</code></pre>\n"},{"tags":["python","pyqt","scipy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13252993,"title":"Scipy normalization-- localize values to set discrete points","body":"<p>I am currently displaying two separate 2D images (x,y plane and z,y plane) that are derived from 96x512 arrays of 0-255 values.  I would like to be able to filter the data so that anything under a certain value is done away with (the highest values are indicative of targets).  What I would like to be able to do is from these images, separate discrete points that may be then mapped three-dimensionally as points, rather than mapping two intersecting planes.  I'm not entirely sure how to do this or where to start (I'm very new to python).  I am producing the images using scipy and have done some normalization and noise reduction, but I'm not sure how to then separate out anything over the threshold as it's own individual point.  Is this possible?</p>\n"},{"tags":["python","list","slice","del"],"answer_count":8,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":83,"score":4,"question_id":13244466,"title":"In Python, how do I delete the Nth list item from a list of lists (column delete)?","body":"<p>In Python, how do I delete a \"column\" from a list of lists?<br>\nGiven:</p>\n\n<pre><code>L = [\n     [\"a\",\"b\",\"C\",\"d\"],\n     [ 1,  2,  3,  4 ],\n     [\"w\",\"x\",\"y\",\"z\"]\n    ]\n</code></pre>\n\n<p>I would like to delete \"column\" 2 to get:</p>\n\n<pre><code>L = [\n     [\"a\",\"b\",\"d\"],\n     [ 1,  2,  4 ],\n     [\"w\",\"x\",\"z\"]\n    ]\n</code></pre>\n\n<p>Is there a <b>slice</b> or <b>del</b> method that will do that? Something like:</p>\n\n<pre><code>del L[:][2]\n</code></pre>\n"},{"tags":["python","beautifulsoup","tree-traversal"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13255308,"title":"beautiful soup get children that are Tags (not Navigable Strings) from a Tag","body":"<p>Beautiful soup documentation provides attributes .contents and .children to access the children of a given tag (a list and an iterable respectively), and includes both Navigable Strings and Tags. I want only the children of type Tag. </p>\n\n<p>I'm currently accomplishing this using list comprehension: </p>\n\n<pre><code>rows=[x for x in table.tbody.children if type(x)==bs4.element.Tag]\n</code></pre>\n\n<p>but I'm wondering if there is a better/more pythonic/built-in way to get just Tag children. </p>\n"},{"tags":["python","pyramid","mako"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13243500,"title":"How to access session variable in mako template and pyramid?","body":"<p>How the heck do you access a session variable in a mako template?  I'm sure this is stupid simple but I'm drawing blanks on every search I try....</p>\n\n<p>I have my view in Pyramid:</p>\n\n<pre><code>def ClientView(request):\n    session = request.session\n    session['selectedclientid'] = 'test' #selectedclient.id\n    session.save()\n    return dict(\n        logged_in=authenticated_userid(request)\n    )\n</code></pre>\n\n<p>and then in my template I'm just trying something like this:</p>\n\n<pre><code>% if session['selectedclientid'] != None:\n                The session has something\n            % endif\n</code></pre>\n\n<p>And this gives me a template error:</p>\n\n<pre><code>    % if session['selectedclientid'] != None:\nTypeError: 'Undefined' object has no attribute '__getitem__'\n</code></pre>\n\n<p>Am I setting the session variable wrong? Am I querying it wrong?  Do I even need to make a copy of the request.session object and .save() it in the first place?  Couldn't I just do request.session['myvariable'] = 'foo' and set it that way?  That still doesn't help me in pulling it back in the template.</p>\n\n<p>Thanks,</p>\n"},{"tags":["python","geospatial","matplotlib-basemap"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13240642,"title":"Automatically centering matplotlib basemap plot on plotted data","body":"<p>I am attempting to automatically center a stereographic plot around a set of data that I am plotting; though, the principal should work fine for most projections (I think). I unfortunately may not plot the data here, but one would see that the plotted area appears too wide and shifted south. </p>\n\n<p>I am using <a href=\"http://www.johndcook.com/python_longitude_latitude.html\" rel=\"nofollow\">John Cook's code</a> for calculating the distance between two points on (an assumed perfect) sphere. For the plot, I am setting the height to be the distance between the highest and lowest latitude along the median longitude for the data, and visa versa for the width of the plot.</p>\n\n<p>Is my approach incorrect, or is there a method more effective and versatile for other projections? I'd like to keep this in my tool-belt for future plots. Thanks!</p>\n\n<pre><code>from mpl_toolkits.basemap import Basemap\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport sys\nimport csv\nimport spheredistance as sd\n\n\nprint '\\n'\nif len(sys.argv) &lt; 3:\n    print &gt;&gt;sys.stderr,'Usage:',sys.argv[0],'&lt;datafile&gt; &lt;#rows to skip&gt;'\n    sys.exit(1)\nprint '\\n'\n\ndataFile = sys.argv[1]\ndataStream = open(dataFile, 'rb')\ndataReader = csv.reader(dataStream,delimiter='\\t')\nnumRows = sys.argv[2]\n\ndataValues = []\ndataLat = []\ndataLon = []\n\nprint 'Plotting Data From: '+dataFile\n\ndataReader.next()\nfor row in dataReader:\n    dataValues.append(row[0])\n    dataLat.append(float(row[1]))\n    dataLon.append(float(row[2]))\n\n# center and set extent of map\nearthRadius = 6378100 #meters\nfactor = 1.00\n\nlat0new = ((max(dataLat)-min(dataLat))/2)+min(dataLat)\nlon0new = ((max(dataLon)-min(dataLon))/2)+min(dataLon)\n\nmapH = sd.distance_on_unit_sphere(max(dataLat),lon0new,\n            min(dataLat),lon0new)*earthRadius*factor\n\nmapW = sd.distance_on_unit_sphere(lat0new,max(dataLon),\n            lat0new,min(dataLon))*earthRadius*factor\n\nprint max(dataLat), min(dataLat), lat0new\nprint max(dataLon), min(dataLon), lon0new\nprint mapH, mapW\n\n# setup stereographic basemap.\n# lat_ts is latitude of true scale.\n# lon_0,lat_0 is central point.\nm = Basemap(width=mapW,height=mapH,\n            resolution='l',projection='stere',\\\n            lat_0=lat0new,lon_0=lon0new)\n\n#m.shadedrelief()\nm.drawcoastlines(linewidth=0.2)\nm.fillcontinents(color='white', lake_color='aqua')\n\n#plot data points (omitted due to ownership)\n#x, y = m(dataLon,dataLat)\n#m.scatter(x,y,2,marker='o',color='k')\n\n# draw parallels and meridians.\nm.drawparallels(np.arange(-80.,81.,20.), labels=[1,0,0,0], fontsize=10)\nm.drawmeridians(np.arange(-180.,181.,20.), labels=[0,0,0,1], fontsize=10)\nm.drawmapboundary(fill_color='aqua')\n\nplt.title(\"Example\")\nplt.show()\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/WoD3l.png\" alt=\"enter image description here\"></p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13255148,"title":"Class Assignment Problems","body":"<p>Why is PyDev giving me this error: \"Class variable undefined\" when I try to implement a simple class for an inversion counting algorithm? Here's my code:</p>\n\n<pre><code>from collections import deque\n\nClass inversionCount:\n\n    def __init__(self, n):\n        self.n = n\n    def inversionMergeSort(m, n):\n        print m\n        if len(m) &lt;= 1:\n            n = 0\n            return (m, n)\n        half = len(m)/2\n        left = m[0:half]\n        right = m[half:]\n        left = mergeSort(left)\n        right = mergeSort(right)\n        return inversionSort(left, right)\n\n    def inversionSort(left, right, n):\n        leftQueue = deque(i for i in left)\n        rightQueue = deque(j for j in right)\n        orderedList = []\n        while len(leftQueue) &gt; 0 or len(rightQueue) &gt; 0:\n            if len(leftQueue) &gt; 0 and len(rightQueue) &gt; 0:\n                if leftQueue[0] &lt; rightQueue[0]:\n                    orderedList.append(leftQueue[0])\n                    leftQueue.popleft()\n                else:\n                    orderedList.append(rightQueue[0])\n                    if len(leftQueue) &gt; 1:\n                        self.n += len(leftQueue)\n                    rightQueue.popleft()\n            elif len(leftQueue) &gt; 0:\n                orderedList.append(leftQueue[0])\n                leftQueue.popleft()\n            elif len(rightQueue) &gt; 0:\n                orderedList.append(rightQueue[0])\n                rightQueue.popleft()\n        return (orderedList, n)\n</code></pre>\n\n<p>yet PyDev is failing to recognize that inversionCount is indeed a class. Any thoughts? </p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":44,"score":2,"question_id":13251882,"title":"Assembling Bytecode - PyCode New","body":"<p>The following code produces bytecode output as string. I want to replace some lines of the bytecode and reassemble and exec it. Do I need something like the ByteCodeAssember or can I do this with PyCode New?</p>\n\n<p><a href=\"http://docs.python.org/2/c-api/code.html#PyCode_New\" rel=\"nofollow\">http://docs.python.org/2/c-api/code.html#PyCode_New</a></p>\n\n<p><a href=\"http://pypi.python.org/pypi/BytecodeAssembler\" rel=\"nofollow\">http://pypi.python.org/pypi/BytecodeAssembler</a></p>\n\n<p>output</p>\n\n<pre><code>**********      code    **********                                                                                   \n\ntype: &lt;type 'str'&gt;                                                                                                   \ndef test(a,b):                                                                                                       \n    return a*b                                                                                                       \ntest(2,3)                                                                                                            \n\n**********      compiles into the bytecode      **********                                                           \n\ntype: &lt;type 'code'&gt;                                                                                                  \n  1           0 LOAD_CONST               0 (&lt;code object test at 0x101d1ca30, file \"&lt;string&gt;\", line 1&gt;)              \n              3 MAKE_FUNCTION            0                                                                           \n              6 STORE_NAME               0 (test)                                                                    \n\n  3           9 LOAD_NAME                0 (test)                                                                    \n             12 LOAD_CONST               1 (2)                                                                       \n             15 LOAD_CONST               2 (3)                                                                       \n             18 CALL_FUNCTION            2                                                                           \n             21 POP_TOP                                                                                              \n             22 LOAD_CONST               3 (None)                                                                    \n             25 RETURN_VALUE 3  \n\n**********  bytecode    **********\n\n'd\\x00\\x00\\x84\\x00\\x00Z\\x00\\x00e\\x00\\x00d\\x01\\x00d\\x02\\x00\\x83\\x02\\x00\\x01d\\x03\\x00S'\n</code></pre>\n\n<p>code</p>\n\n<pre><code>import dis                                                                                                           \nimport sys                                                                                                           \nimport inspect                                                                                                       \nimport new                                                                                                           \n\nclass writer:                                                                                                        \n    def __init__(self):                                                                                              \n        self.s = \"\"                                                                                                  \n\n    def write(self,text):                                                                                            \n        #print ': ',text                                                                                             \n        self.s += text                                                                                               \n\n#save stdout                                                                                                                     \norigstdout = sys.stdout                                                                                              \nw = writer()                                                                                                         \nsys.stdout = w                                                                                                       \n\n\ns = \"def test(a,b):\\n\\treturn a*b\\ntest(2,3)\"                                                                        \n\nc = compile(s,'&lt;string&gt;','exec')                                                                                     \n# dis calls stdout, so output is in w                                                                                                                         \nbytecode = dis.dis(c)                                                                                                \n\nsys.stdout = origstdout                                                                                              \n\ndef h(x):                                                                                                            \n    print '*'*10 + '\\t' + x + '\\t' + '*'*10 + '\\n'*1                                                                 \n\nh('code')                                                                                                            \nprint 'type: '+str(type(s))                                                                                          \nprint s + '\\n'                                                                                                       \n\nh('compiles into the bytecode')                                                                                      \nprint 'type: '+str(type(c))                                                                                          \nprint w.s\n\nh('bytecode')                                                                                                        \nprint repr(c.co_code)  \n</code></pre>\n"},{"tags":["python","datetime","group-by","data.frame","pandas"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":76,"score":0,"question_id":13223360,"title":"python split a pandas data frame by week or month and group the data based on these sp","body":"<pre><code>DateOccurred    CostCentre  TimeDifference\n03/09/2012  2073    28138\n03/09/2012  6078    34844\n03/09/2012  8273    31215\n03/09/2012  8367    28160\n03/09/2012  8959    32037\n03/09/2012  9292    30118\n03/09/2012  9532    34200\n03/09/2012  9705    27240\n03/09/2012  10085   31431\n03/09/2012  10220   22555\n04/09/2012  6078    41126\n04/09/2012  7569    31101\n04/09/2012  8273    30994\n04/09/2012  8959    30064\n04/09/2012  9532    34655\n04/09/2012  9705    26475\n04/09/2012  10085   31443\n04/09/2012  10220   33970\n05/09/2012  2073    28221\n05/09/2012  6078    27894\n05/09/2012  7569    29012\n05/09/2012  8239    42208\n05/09/2012  8273    31128\n05/09/2012  8367    27993\n05/09/2012  8959    20669\n05/09/2012  9292    33070\n05/09/2012  9532    8189\n05/09/2012  9705    27540\n05/09/2012  10085   28798\n05/09/2012  10220   23164\n06/09/2012  2073    28350\n06/09/2012  6078    35648\n06/09/2012  7042    27129\n06/09/2012  7569    31546\n06/09/2012  8239    39945\n06/09/2012  8273    31107\n06/09/2012  8367    27795\n06/09/2012  9292    32974\n06/09/2012  9532    30320\n06/09/2012  9705    37462\n06/09/2012  10085   31703\n06/09/2012  10220   7807\n06/09/2012  14573   186\n07/09/2012  0   0\n07/09/2012  0   0\n07/09/2012  2073    28036\n07/09/2012  6078    31969\n07/09/2012  7569    32941\n07/09/2012  8273    30073\n07/09/2012  8367    29391\n07/09/2012  9292    31927\n07/09/2012  9532    30127\n07/09/2012  9705    27604\n07/09/2012  10085   28108\n08/09/2012  2073    28463\n10/09/2012  6078    31266\n10/09/2012  8239    16390\n10/09/2012  8273    31140\n10/09/2012  8959    30858\n10/09/2012  9532    30794\n10/09/2012  9705    28752\n11/09/2012  0   0\n11/09/2012  0   0\n11/09/2012  0   0\n11/09/2012  0   0\n11/09/2012  0   0\n11/09/2012  2073    28159\n11/09/2012  6078    36835\n11/09/2012  8239    45354\n11/09/2012  8273    30922\n11/09/2012  8367    31382\n11/09/2012  8959    29670\n11/09/2012  9292    33582\n11/09/2012  9705    29394\n11/09/2012  10085   17140\n12/09/2012  2073    28283\n12/09/2012  6078    31139\n12/09/2012  7042    35063\n12/09/2012  8273    31075\n12/09/2012  8367    29795\n12/09/2012  9292    33496\n12/09/2012  9532    31669\n12/09/2012  9705    26166\n12/09/2012  10085   29889\n12/09/2012  10220   35656\n13/09/2012  2073    28144\n13/09/2012  6078    30544\n13/09/2012  7097    30866\n13/09/2012  8273    30772\n13/09/2012  8367    32387\n13/09/2012  8959    29307\n13/09/2012  9292    32348\n13/09/2012  9532    28137\n13/09/2012  9705    28823\n13/09/2012  10085   31543\n13/09/2012  10220   28293\n14/09/2012  0   12433\n14/09/2012  0   12434\n14/09/2012  0   12434\n14/09/2012  0   12434\n14/09/2012  0   12434\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   12433\n14/09/2012  0   0\n14/09/2012  0   12433\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   1720\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   384\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   0\n14/09/2012  0   383\n14/09/2012  2073    28438\n14/09/2012  6078    27255\n14/09/2012  8273    29989\n14/09/2012  8959    26892\n14/09/2012  9292    33202\n14/09/2012  9532    30862\n14/09/2012  9705    26857\n14/09/2012  10085   32657\n14/09/2012  10220   27296\n15/09/2012  6078    3832\n17/09/2012  6078    30004\n17/09/2012  7569    30390\n17/09/2012  8239    41421\n17/09/2012  8273    26337\n17/09/2012  8367    31631\n17/09/2012  8959    17989\n17/09/2012  9292    35703\n17/09/2012  9532    36542\n17/09/2012  9705    27488\n17/09/2012  10085   30849\n17/09/2012  10220   32575\n18/09/2012  2073    28293\n18/09/2012  6078    27450\n18/09/2012  7569    30323\n18/09/2012  8239    38481\n18/09/2012  8273    31154\n18/09/2012  8367    27944\n18/09/2012  8959    28196\n18/09/2012  9292    30844\n18/09/2012  9532    33128\n18/09/2012  9705    32100\n19/09/2012  2073    28227\n19/09/2012  6078    32243\n19/09/2012  7569    29041\n19/09/2012  8239    42791\n19/09/2012  8273    30966\n19/09/2012  8367    26420\n19/09/2012  8959    29394\n19/09/2012  9292    14865\n19/09/2012  9532    23618\n19/09/2012  10085   31614\n19/09/2012  10220   8686\n20/09/2012  2073    28260\n20/09/2012  6078    30446\n20/09/2012  7097    34909\n20/09/2012  7569    30869\n20/09/2012  8273    31079\n20/09/2012  8367    30162\n20/09/2012  9292    13104\n20/09/2012  9532    36614\n20/09/2012  9705    35617\n20/09/2012  10085   31821\n20/09/2012  10220   30055\n20/09/2012  14573   468\n21/09/2012  0   0\n21/09/2012  0   0\n21/09/2012  0   0\n21/09/2012  0   0\n21/09/2012  0   0\n21/09/2012  0   0\n21/09/2012  0   0\n21/09/2012  0   0\n21/09/2012  0   0\n21/09/2012  0   3\n21/09/2012  0   0\n21/09/2012  0   0\n21/09/2012  0   3\n21/09/2012  2073    28308\n21/09/2012  6078    33833\n21/09/2012  7569    32335\n21/09/2012  9292    33824\n21/09/2012  9532    33376\n21/09/2012  10220   21002\n22/09/2012  2073    28402\n23/09/2012  2073    28109\n24/09/2012  2073    28431\n24/09/2012  6078    30027\n24/09/2012  7097    31914\n24/09/2012  8239    35617\n24/09/2012  8273    30670\n24/09/2012  8367    29084\n24/09/2012  8959    31023\n24/09/2012  9292    34394\n24/09/2012  9532    31255\n24/09/2012  9705    18758\n24/09/2012  10085   29290\n24/09/2012  10220   33230\n25/09/2012  2073    28506\n25/09/2012  6078    32043\n25/09/2012  7042    34953\n25/09/2012  7569    30898\n25/09/2012  8239    41297\n25/09/2012  8273    31012\n25/09/2012  8367    29645\n25/09/2012  8959    29904\n25/09/2012  9532    37875\n25/09/2012  9705    13280\n25/09/2012  10085   35023\n25/09/2012  10220   31359\n26/09/2012  2073    28388\n26/09/2012  6078    29765\n26/09/2012  7097    31561\n26/09/2012  7569    29151\n26/09/2012  8239    40369\n26/09/2012  8367    28174\n26/09/2012  8959    26554\n26/09/2012  9292    32104\n26/09/2012  9532    33194\n26/09/2012  9705    30377\n26/09/2012  10085   31503\n26/09/2012  10220   28310\n27/09/2012  0   0\n27/09/2012  0   0\n27/09/2012  0   0\n27/09/2012  0   0\n27/09/2012  0   0\n27/09/2012  0   0\n27/09/2012  0   0\n27/09/2012  0   0\n27/09/2012  2073    28491\n27/09/2012  6078    31137\n27/09/2012  8239    38403\n27/09/2012  8273    31117\n27/09/2012  8367    28462\n27/09/2012  9292    32387\n27/09/2012  9532    23023\n27/09/2012  9705    32790\n27/09/2012  10085   33460\n27/09/2012  10220   31782\n28/09/2012  0   161\n28/09/2012  2073    28381\n28/09/2012  7569    32322\n28/09/2012  8239    38362\n28/09/2012  8273    30533\n28/09/2012  8959    17128\n28/09/2012  9292    32484\n28/09/2012  9532    18586\n28/09/2012  9705    27902\n29/09/2012  2073    28583\n</code></pre>\n\n<ol>\n<li>Above is a sample of a dataframe which has a million records</li>\n<li><em><strong>How can I slice or group it by Week or  Month and sum seconds column by cost centre.?</em>*</strong></li>\n<li>I have read/tried 30 of the articles on this site which appear by doing a search for<br>\nList item pandas, python, groupby, split, dataframe, week with out success. </li>\n<li>I am using python 2.7 and pandas 0.9.</li>\n<li>I've read the Time Series / Date functionality section in the pandas 0.9 tutorial but couldn't\n make anything work with a dataframe. I would like to use the features in there such as Business week</li>\n</ol>\n"},{"tags":["python","django","api","twisted","flask"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":1,"view_count":97,"score":1,"question_id":13253101,"title":"What is the best Python library for building APIs?","body":"<p>Which Python library or framework would you use to build an API service? I would like to expose a running Python application to calls from other machines - sort of like an API service, whose callbacks can talk to my main object system.</p>\n\n<p>One of my special requirements is that the main code must run uninterrupted the whole time, hence the API should be able to run in a separate thread and talk to the main model through a <code>Queue</code>.</p>\n\n<p>I tried using <em>Twisted</em> so far, because it has nice SOAP support, allowing me to not have to serialize anything. This is what the caller can look like:</p>\n\n<pre><code>import SOAPpy\np = SOAPpy.SOAPProxy('http://localhost:8088/')\nget = p.give(data=[\"my precious args\", 15, {\"brave\":\"sir robin\"}])\n</code></pre>\n\n<p>But on the down side:</p>\n\n<ol>\n<li>I can't run it as a background thread (I'm getting errors that signals don't work unless the reactor is in the main thread), meaning I have to reorganize my model code to be in the background making debugging harder. </li>\n<li>This automatic serialization is not all-powerful - not all objects can get passed, such as timedeltas or some custom objects.</li>\n</ol>\n\n<p>I considered using <em>Flask</em> or <em>Django</em> and some serialization format like <em>JSON</em>, but I'm not sure if they would do the trick, justifying the learning overhead.</p>\n\n<p>Is there some magic combo of:</p>\n\n<ul>\n<li>a nice background thread web listener whose callbacks can talk to the main model</li>\n<li>a simple, clean way to pass objects around, such as pickled objects or a way to quickly (de)serialize into JSON</li>\n<li>preferably some existing module that encompasses all this so that I don't have to reinvent the wheel</li>\n</ul>\n\n<p>that you would recommend?</p>\n"},{"tags":["python","django","git","heroku"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13237845,"title":"Deploy Django App to Heroku","body":"<pre><code>    Pushing to git@heroku.com:lebab.git\n\n-----&gt; Heroku receiving push\n-----&gt; Python/Django app detected\n-----&gt; Preparing Python interpreter (2.7.2)\n-----&gt; Creating Virtualenv version 1.7.2\n       New python executable in .heroku/venv/bin/python2.7\n       Also creating executable in .heroku/venv/bin/python\n</code></pre>\n\n<p><strong>* omission　*</strong></p>\n\n<pre><code>    -----&gt; Discovering process types\n\n         !     Heroku push rejected due\n\n to an unrecognized error.\n     !     We've been notified, see http://support.heroku.com if the problem persists.\n\n\n    To git@heroku.com:lebab.git\n     ! [remote rejected] master -&gt; master (pre-receive hook declined)\n    error: failed to push some refs to 'git@heroku.com:lebab.git'\n</code></pre>\n\n<p>I made django application, so I tried to deploy it to heroku.\nand get the error.\nwhat's mean? any ideas? \nIf should I give more info, I will.</p>\n"},{"tags":["python","django","pytz"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":16,"score":0,"question_id":13254409,"title":"UnknownTimeZoneError when using RequestContext","body":"<p>When using Django 1.4, I am getting an <code>UnknownTimeZoneError</code> for <code>America/Chicago</code> when using RequestContext, but it works without it...any ideas?</p>\n\n<p><b>Error Message</b></p>\n\n<pre><code>UnknownTimeZoneError at /my_proj/bad_view/\n'America/Chicago'\n</code></pre>\n\n<p><b>Source</b></p>\n\n<pre><code># This works\ndef good_view(request):\n    data = {}\n    return render_to_response('mytemplate.html',\n                              data)\n\n# This doesn't\ndef bad_view(request):\n    data = {}\n    return render_to_response('mytemplate.html',\n                              data,\n                              context_instance=RequestContext(request))\n</code></pre>\n"},{"tags":["python","xpath","selenium","selenium-rc","selenium-xpath"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13250908,"title":"Mouse the focus to an object using selenium python","body":"<p>I am automating a website using selenium RC and python 2.7 on Ubuntu Linux. Here is what I need to do:</p>\n\n<p>Go to the site <a href=\"http://borro.com\" rel=\"nofollow\">http://borro.com</a>.<br>\nScroll down to the bottom of the page using key down native command\nI need to hover the mouse on g +1 \nread the tool tip<br>\nclick on the name that appears in the tool tip.   </p>\n\n<p>The problem I am having is -- I need the mouse to physically move there, wait for say 2 secs and then read the tool tip and click on the name</p>\n\n<p>The mouse is not physically moving there and I think the focus is lost and it says element xpath not found.   <img src=\"http://i.stack.imgur.com/D7r9g.jpg\" alt=\"enter image description here\"></p>\n"},{"tags":["python","arrays","average"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13052447,"title":"Averaging scores of same type in an array in Python","body":"<p>Suppose I have a sample array that looks like this:</p>\n\n<pre><code>color_values = [{'score': 3, 'color': u'blue'}, {'score': 1, 'color': u'red'}, {'score': 4, 'color': u'green'}, {'score': 4, 'color': u'red'}, {'score': 2, 'color': u'blue'}]\n</code></pre>\n\n<p>How do I write a code in python for a new array which averages the score of all the same colors? So the new array would look like:</p>\n\n<pre><code>color_values = [{'score': 2.5, 'color': u'blue'}, {'score': 2.5, 'color': u'red'}, {'score': 4, 'color': u'green'}]\n</code></pre>\n"},{"tags":["python","bash","ssh","stdout","pid"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13202483,"title":"Redirect to a file output of remote python app started through ssh","body":"<p>[EDITED]</p>\n\n<p>I have a python app in a remote server that i need to debug, when I run the app locally it prints some debug information (including python tracebacks) that i need to monitor.</p>\n\n<p>Thanks to <a href=\"http://stackoverflow.com/users/1356721/jeremy\">jeremy</a> i got to monitor the output file using <em>tail -F</em> and studying his code I got <a href=\"http://jimmyg.org/blog/2009/working-with-python-subprocess.html\" rel=\"nofollow\">here</a> where i found the following variation of his command:</p>\n\n<pre><code>ssh root@$IP 'nohup python /root/python/run_dev_server.py &amp;&gt;&gt; /var/log/myapp.log &amp;'\n</code></pre>\n\n<p>This gets me almost exactly what i want, loggin information and python tracebacks, but i do not get any of the information displayed using <em>print</em> from python which i need.</p>\n\n<p>so I also tried his command:</p>\n\n<pre><code>ssh root@$IP 'nohup python /root/python/run_dev_server.py 2&gt;&amp;1 &gt;&gt; /var/log/myapp.log &amp;'\n</code></pre>\n\n<p>it logs in the file the output of the program from <em>print</em> and also the logging information, but all the tracebacks are lost so i cannot debug the python exceptions.</p>\n\n<p>Is there a way I can capture all the information produced by the app?</p>\n\n<p>Thanks in advance for any suggestion.</p>\n"},{"tags":["python","ssl","dropbox-api"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":155,"score":0,"question_id":10558088,"title":"Dropbox Python SDK SSL error","body":"<p>I am learning how to use the Dropbox Python SDK. However, I run into a problem when I try to generate my request token. Here is the code I am using (note that I have replaced my actual app key and secret with APP_KEY and APP_SECRET here, but I used my actual app key and secret when I try it out.)</p>\n\n<pre><code>from dropbox import client, rest, session\nAPP_KEY = 'APP_KEY'\nAPP_SECRET = 'APP_SECRET'\nACCESS_TYPE = 'app_folder'\nprint 'Creating session object'\nsess = session.DropboxSession(APP_KEY, APP_SECRET, ACCESS_TYPE)\nprint 'Session created!\\nCreating request token'\nrequest_token = sess.obtain_request_token()\nprint 'Created request token!'\nurl = sess.build_authorize_url(request_token)\nprint url\nraw_input()\naccess_token = sess.obtain_access_token(request_token)\nclient1 = client.DropboxClient(sess)\nprint client1.account_info()\n</code></pre>\n\n<p>I had the program print out messages as it was creating the different objects so that I could see where the error occurred. This is the output:</p>\n\n<pre><code>aaron@Aarons-Ubuntu-Computer:~/Twisted$ python example.py\nCreating session object\nSession created!\nCreating request token\nTraceback (most recent call last):\n  File \"example.py\", line 8, in &lt;module&gt;\n    request_token = sess.obtain_request_token()\nFile \"/usr/local/lib/python2.7/dist-packages/dropbox-1.4-py2.7.egg/dropbox/session.py\", line 160, in obtain_request_token\nresponse = rest.RESTClient.POST(url, headers=headers, params=params, raw_response=True)\nFile \"/usr/local/lib/python2.7/dist-packages/dropbox-1.4-py2.7.egg/dropbox/rest.py\", line 140, in POST\n  return cls.request(\"POST\", url, post_params=params, headers=headers, raw_response=raw_response)\nFile \"/usr/local/lib/python2.7/dist-packages/dropbox-1.4-py2.7.egg/dropbox/rest.py\", line 64, in request\n  conn = ProperHTTPSConnection(host, 443)\nFile \"/usr/local/lib/python2.7/dist-packages/dropbox-1.4-py2.7.egg/dropbox/rest.py\", line 214, in __init__\n  self.cert_reqs = ssl.CERT_REQUIRED\nAttributeError: 'module' object has no attribute 'CERT_REQUIRED'\n</code></pre>\n\n<p>I had tried using this code before, and I didn't experience this problem. I have also removed the Dropbox SDK and reinstalled it, with no result. What is causing this problem, and how can I fix it?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>After adding Kannan's code, the output looks like this:\n    <code>Ready</code>\n     <code>Generating session</code>\n<code>Session Generated!</code>\n<code>Generating request token</code>\n<code>['Certificate', 'CertificateOptions', 'CertificateRequest', 'Client', 'ClientContextFactory', 'Connector', 'ContextFactory', 'DN', 'DefaultOpenSSLContextFactory', 'DistinguishedName', 'KeyPair', 'Port', 'PrivateCertificate', 'SSL', 'Server', '__all__', '__builtins__', '__doc__', '__file__', '__name__', '__package__', 'implementedBy', 'implements', 'implementsOnly', 'interfaces', 'supported', 'tcp']</code>\nThen I get the error. I have tried re-created my SSL certificates with no luck.</p>\n"},{"tags":["python","fortran","ordering","pycuda","cula"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13252593,"title":"python and fortran ordering make trouble","body":"<p>I am using one python library which is a wrapped of a cuda library. This library store the matrices col-major in memory so when I am calling one function and getting back the result my answer is wrong.For example instead of :</p>\n\n<blockquote>\n  <p>[[-0.38764932  0.1408183  -0.24391053 -0.20077137]</p>\n  \n  <p>[-0.44930551  0.77030394 -0.05028782 -0.21411045]</p>\n  \n  <p>[-0.44013192 -0.50011465 -0.65923749 -0.10926226]</p>\n  \n  <p>[-0.11932364 -0.29815135  0.47275608 -0.81822219]</p>\n  \n  <p>[ 0.66324832  0.21861646 -0.52904292 -0.48210141]]</p>\n</blockquote>\n\n<p>I am getting :</p>\n\n<blockquote>\n  <p>[[-0.24959256 -0.50550108 -0.48640173 -0.1275829 ]</p>\n  \n  <p>[ 0.65521613  0.1408183   0.77030394 -0.50011465]</p>\n  \n  <p>[-0.29815135  0.21861646 -0.24391053 -0.05028782]</p>\n  \n  <p>[-0.65923749  0.47275608 -0.52904292 -0.20077137]</p>\n  \n  <p>[-0.21411045 -0.10926226 -0.81822219 -0.48210141]]</p>\n</blockquote>\n\n<p>if you just look at the last column of first matrix and last row of second one you see what I mean! I tried different stuff like <code>numpy.asfortranarray</code>  but no success!</p>\n\n<p>I appreciate any help!</p>\n\n<p><strong>update :</strong></p>\n\n<p>to adding some code this is what I am trying to do:</p>\n\n<p>I need one positive definite matrix and want to find k-largest  eigenvalues and corresponding vector. There is already one <strong>scipy</strong> function that which is <code>scipy.linalg.eigh()</code> :</p>\n\n<pre><code>def largest_cpu(k_,lo,hi):\n\n    w,v=spla.eigh(k_,eigvals=(lo,hi))\n\n    print v\n\n    return\n</code></pre>\n\n<p>which gives me the first result.</p>\n\n<p>now , I am using the Cuda library (CULA) to calculate the same thing:</p>\n\n<pre><code>def largest_gpu(k_,il,iu):\n\n#    k_gpu=cula.cula_gpuarray_like(k_)\n\n\n\n    k_gpu=cula.cula_gpuarray_like(k_)\n    uplo='L'\n    evrange='I'\n    abstol=(2.2204460492503131e-16)*2\n    lda=cula.get_lda(k)\n    jobz = 'V'\n    w = np.zeros(n,dtype=k_gpu.dtype,order='F')\n    w_gpu=cula.cula_gpuarray_like(w)\n    il=il\n    iu=iu\n    vl=0\n    vu=0\n\n\n\n    m=ctypes.c_int(iu-il+1)\n\n    z = np.zeros((lda,max(1,m.value)),dtype=k_gpu.dtype,order='F')\n    z_gpu = cula.cula_gpuarray_like(z)\n\n    ldz=cula.get_lda(z)\n    ifail=ctypes.c_int()\n\n#    calculating time and calling the function \n\n  cula.culaDeviceDsyevx(jobz,evrange,uplo,n,k_gpu,lda,vl,vu,il,iu,abstol,m,w_gpu,z_gpu,ldz,ifail)\n\nprint z_gpu\n\n\n\nreturn\n</code></pre>\n\n<p>which gives the second result\nand this is manual of this library <a href=\"http://www.hpc-sol.co.jp/products/cula/doc/CULA_dense_R15/CULAReferenceManual_R15.pdf\" rel=\"nofollow\">here</a>.just search for culaDeviceDsyevx.</p>\n"},{"tags":["python","list-comprehension"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":35,"score":3,"question_id":13254241,"title":"Removing key values pairs from a list of dictionaries","body":"<p>I have a list of dictionaries such as:</p>\n\n<pre><code>[{'mykey1':'myvalue1', 'mykey2':'myvalue2'}, {'mykey1':'myvalue1a', 'mykey2':'myvalue2a'}]\n</code></pre>\n\n<p>I need to remove all key values pairs from all dictionaries where the key is equal to mykey1.  I could do this by looping through and using the del statement, but I am wondering how I would create a new list using list comprehensions or lambdas which would just remove all key value pairs where the key was mykey1.</p>\n\n<p>Many thanks </p>\n"},{"tags":["python","django","apache","mod-wsgi"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":260,"score":0,"question_id":12099004,"title":"Django, mod_wsgi, Apache: Internal server error","body":"<p>I have configured Django 1.4 with mod_wsgi 2.0 and apache 2.2.3 in a Redhat server.\nBut when I try to access the server I get the following error: \n\"ERROR 500: Internal Server Error.\"</p>\n\n<pre><code>[root@lts5srv1 hardi]# wget mritest.domain.ch\n--2012-08-23 21:51:27--  http://mritest.domain.ch/\nResolving mritest.domain.ch... 127.0.0.1\nConnecting to mritest.domain.ch|127.0.0.1|:80... connected.\nHTTP request sent, awaiting response... 500 Internal Server Error\n2012-08-23 21:51:27 ERROR 500: Internal Server Error.\n</code></pre>\n\n<p>So I have the connection, but I don't get any valid response.\nDoes it depends on the django version, should I make the deployment with Django 1.3 ?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Apache error log:</p>\n\n<pre><code>[Thu Aug 23 22:34:04 2012] [error] [client 127.0.0.1] mod_wsgi (pid=7835): Exception occurred processing WSGI script '/home/django_www/hello/apache/django.wsgi'.\n[Thu Aug 23 22:34:04 2012] [error] Traceback (most recent call last):\n[Thu Aug 23 22:34:04 2012] [error] File \"/home/django_www/hello/apache/django.wsgi\", line 1, in &lt;module&gt; [Thu Aug 23 22:34:04 2012] [error] import os\n[Thu Aug 23 22:34:04 2012] [error] ImportError: No module named os\"\n</code></pre>\n"},{"tags":["python","sqlalchemy"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13254560,"title":"Is it possible to use SQLAlchemy without installing it?","body":"<p>For some reason, my ISP offers Python, and MySql, without having a MySql library installed. They have Django, but I'm not looking to use a full blown framework as yet.</p>\n\n<p>So, what I'm looking for is a library that will allow me access to MySql, but without the need to actually install the library. ie use some kind of local copy and import from there.</p>\n\n<p>SQLAlchemy appears to be the 'main' one to use, but I couldn't see any way to use it without installing first. </p>\n\n<p>Is it possible to use it 'raw'?</p>\n\n<p>If not, is there any other library that will allow me to use it without installing to access MySql?</p>\n"},{"tags":["python","django","django-templates"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":13254113,"title":"Distinguish a user depending on which page he comes from. Django","body":"<p>I would like to know if there is a way to differentiate a user depending on which page he comes from.</p>\n\n<p>In my template, I would like to display something only if the user comes from a specific view (I wan't to display the same page I display for the others users, but adding a popup telling him something).</p>\n\n<p>Is there a way to do that?</p>\n\n<p>Thank you for your help</p>\n"},{"tags":["python","google-app-engine","ide"],"answer_count":6,"favorite_count":1,"up_vote_count":8,"down_vote_count":0,"view_count":1529,"score":8,"question_id":3333544,"title":"Is there an online IDE for Google App Engine?","body":"<p>I am learning Google App Engine / Python and I love it. Unfortunately I am not allowed to use my own computer in the office and not allowed to install anything on the corporate machine.</p>\n\n<p>It would be so great to have an online IDE for Google App Engine where I could play with my Python code using any browser, including the one on my iPad.</p>\n\n<p>Maybe <a href=\"http://www.devunity.com/\" rel=\"nofollow\">http://www.devunity.com/</a> will be an online IDE for GAE some day. Do you know any existing way to program GAE in a browser?</p>\n"},{"tags":["python","smb"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13252443,"title":"pySMB Windows File Share Buffer Overflow","body":"<p>Hi I have been stuck on an error in python using the <a href=\"http://packages.python.org/pysmb/\" rel=\"nofollow\">pySMB</a> module.</p>\n\n<p>While making a script for myself I ran in to some trouble with trying to connect to a Network share. Here is the Python Code</p>\n\n<pre><code> from smb.SMBConnection import SMBConnection\n\n server_name = 'Server'\n client_name = 'My Computer'\n s = SMBConnection('guest', '', client_name, server_name, use_ntlm_v2 = True)\n s.connect('192.168.1.35', 139)\n\n print s.listShares()\n</code></pre>\n\n<p>So what happens is if this script is ran from a Windows Computer it works fine with either Linux Servers or Windows Servers. The Error I get is when i run the script in linux trying to Connect to a Share to a Windows Server.\n<img src=\"http://i.stack.imgur.com/V86Ep.png\" alt=\"Wireshark Capture\"></p>\n\n<p>Here is the Error in Python</p>\n\n<pre><code>File \"/media/HP v125w/programing/server_index.py\", line 10, in list_shares\n    return [shares.name for shares in connection.listShares() if not shares.isSpecial and not shares.name == 'print$']\n  File \"/usr/local/lib/python2.7/dist-packages/smb/SMBConnection.py\", line 134, in listShares\n    self._pollForNetBIOSPacket(timeout)\n  File \"/usr/local/lib/python2.7/dist-packages/smb/SMBConnection.py\", line 477, in _pollForNetBIOSPacket\n    self.feedData(data)\n  File \"/usr/local/lib/python2.7/dist-packages/nmb/base.py\", line 48, in feedData\n    self._processNMBSessionPacket(self.data_nmb)\n  File \"/usr/local/lib/python2.7/dist-packages/nmb/base.py\", line 78, in _processNMBSessionPacket\n    self.onNMBSessionMessage(packet.flags, packet.data)\n  File \"/usr/local/lib/python2.7/dist-packages/smb/base.py\", line 136, in onNMBSessionMessage\n    if self._updateState(self.smb_message):\n  File \"/usr/local/lib/python2.7/dist-packages/smb/base.py\", line 265, in _updateState_SMB2\n    req.callback(message, **req.kwargs)\n  File \"/usr/local/lib/python2.7/dist-packages/smb/base.py\", line 475, in closeCB\n    errback(OperationFailure(kwargs['error'], messages_history))\n  File \"/usr/local/lib/python2.7/dist-packages/smb/SMBConnection.py\", line 128, in eb\n    raise failure\nsmb.smb_structs.OperationFailure: Failed to list shares: Unable to retrieve shared device list\n==================== SMB Message 0 ====================\nSMB Header:\n-----------\nCommand: 0x03 (SMB2_COM_TREE_CONNECT) \nStatus: 0x00000000 \nFlags: 0x00 \nPID: 4415 \nMID: 3 \nTID: 0 \nData: 40 bytes \n09000000480020005c005c004800590050004e004f0054004f00410044005c004900500043002400 \nSMB Data Packet (hex):\n----------------------\nfe534d42400000000000000003000000000000000000000003000000000000003f110000000000007d00004c050400000000000000000000000000000000000009000000480020005c005c004800590050004e004f0054004f00410044005c004900500043002400\n==================== SMB Message 1 ====================\nSMB Header:\n-----------\nCommand: 0x03 (SMB2_COM_TREE_CONNECT) \nStatus: 0x00000000 \nFlags: 0x01 \nPID: 4415 \nMID: 3 \nTID: 1 \nData: 16 bytes \n100002003000000000000000ff011f00 \nSMB Data Packet (hex):\n----------------------\nfe534d42400000000000000003000100010000000000000003000000000000003f110000010000007d00004c0504000000000000000000000000000000000000100002003000000000000000ff011f00\n==================== SMB Message 2 ====================\nSMB Header:\n-----------\nCommand: 0x05 (SMB2_COM_CREATE) \nStatus: 0x00000000 \nFlags: 0x00 \nPID: 4415 \nMID: 4 \nTID: 1 \nData: 68 bytes \n3900000002000000000000000000000000000000000000009f0112000000000007000000010000004000400078000c000000000000000000730072007600730076006300 \nSMB Data Packet (hex):\n----------------------\nfe534d42400000000000000005000000000000000000000004000000000000003f110000010000007d00004c05040000000000000000000000000000000000003900000002000000000000000000000000000000000000009f0112000000000007000000010000004000400078000c000000000000000000730072007600730076006300\n==================== SMB Message 3 ====================\nSMB Header:\n-----------\nCommand: 0x05 (SMB2_COM_CREATE) \nStatus: 0x00000000 \nFlags: 0x01 \nPID: 4415 \nMID: 4 \nTID: 1 \nData: 88 bytes \n5900000001000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000800000007600730001ac03001002000001000000ffffffff0000000000000000 \nSMB Data Packet (hex):\n----------------------\nfe534d42400000000000000005000100010000000000000004000000000000003f110000010000007d00004c05040000000000000000000000000000000000005900000001000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000800000007600730001ac03001002000001000000ffffffff0000000000000000\n==================== SMB Message 4 ====================\nSMB Header:\n-----------\nCommand: 0x09 (SMB2_COM_WRITE) \nStatus: 0x00000000 \nFlags: 0x00 \nPID: 4415 \nMID: 5 \nTID: 1 \nData: 164 bytes \n3100700074000000000000000000000001ac03001002000001000000ffffffff0000000000000000000000000000000005000b03100000007400000002000000b810b810000000000200000000000100c84f324b7016d30112785a47bf6ee18803000000045d888aeb1cc9119fe808002b1048600200000001000100c84f324b7016d30112785a47bf6ee188030000002c1cb76c12984045030000000000000001000000 \nSMB Data Packet (hex):\n----------------------\nfe534d42400000000000000009000000000000000000000005000000000000003f110000010000007d00004c05040000000000000000000000000000000000003100700074000000000000000000000001ac03001002000001000000ffffffff0000000000000000000000000000000005000b03100000007400000002000000b810b810000000000200000000000100c84f324b7016d30112785a47bf6ee18803000000045d888aeb1cc9119fe808002b1048600200000001000100c84f324b7016d30112785a47bf6ee188030000002c1cb76c12984045030000000000000001000000\n==================== SMB Message 5 ====================\nSMB Header:\n-----------\nCommand: 0x09 (SMB2_COM_WRITE) \nStatus: 0x00000000 \nFlags: 0x01 \nPID: 4415 \nMID: 5 \nTID: 1 \nData: 16 bytes \n11000000740000000000000000000000 \nSMB Data Packet (hex):\n----------------------\nfe534d42400000000000000009000100010000000000000005000000000000003f110000010000007d00004c050400000000000000000000000000000000000011000000740000000000000000000000\n==================== SMB Message 6 ====================\nSMB Header:\n-----------\nCommand: 0x08 (SMB2_COM_READ) \nStatus: 0x00000000 \nFlags: 0x00 \nPID: 4415 \nMID: 6 \nTID: 1 \nData: 49 bytes \n3100000000040000000000000000000001ac03001002000001000000ffffffff0000000000000000000000000000000000 \nSMB Data Packet (hex):\n----------------------\nfe534d42400000000000000008000000000000000000000006000000000000003f110000010000007d00004c05040000000000000000000000000000000000003100000000040000000000000000000001ac03001002000001000000ffffffff0000000000000000000000000000000000\n==================== SMB Message 7 ====================\nSMB Header:\n-----------\nCommand: 0x08 (SMB2_COM_READ) \nStatus: 0x00000000 \nFlags: 0x01 \nPID: 4415 \nMID: 6 \nTID: 1 \nData: 108 bytes \n110050005c000000000000000000000005000c03100000005c00000002000000b810b810580a01000d005c504950455c73727673766300f60200000000000000045d888aeb1cc9119fe808002b10486002000000030003000000000000000000000000000000000000000000 \nSMB Data Packet (hex):\n----------------------\nfe534d42400000000000000008000100010000000000000006000000000000003f110000010000007d00004c0504000000000000000000000000000000000000110050005c000000000000000000000005000c03100000005c00000002000000b810b810580a01000d005c504950455c73727673766300f60200000000000000045d888aeb1cc9119fe808002b10486002000000030003000000000000000000000000000000000000000000\n==================== SMB Message 8 ====================\nSMB Header:\n-----------\nCommand: 0x0B (SMB2_COM_IOCTL) \nStatus: 0x00000000 \nFlags: 0x00 \nPID: 4415 \nMID: 7 \nTID: 1 \nData: 152 bytes \n3900000017c0110001ac03001002000001000000ffffffff7800000060000000000000000000000000000000000400000100000000000000050000031000000060000000030000004c00000000000f00000002000c000000000000000c0000005c005c004800590050004e004f0054004f004100440000000100000001000000040002000000000000000000ffffffff0800020000000000 \nSMB Data Packet (hex):\n----------------------\nfe534d4240000000000000000b000000000000000000000007000000000000003f110000010000007d00004c05040000000000000000000000000000000000003900000017c0110001ac03001002000001000000ffffffff7800000060000000000000000000000000000000000400000100000000000000050000031000000060000000030000004c00000000000f00000002000c000000000000000c0000005c005c004800590050004e004f0054004f004100440000000100000001000000040002000000000000000000ffffffff0800020000000000\n==================== SMB Message 9 ====================\nSMB Header:\n-----------\nCommand: 0x0B (SMB2_COM_IOCTL) \nStatus: 0x80000005 \nFlags: 0x01 \nPID: 4415 \nMID: 7 \nTID: 1 \nData: 1072 bytes \n3100000017c0110001ac03001002000001000000ffffffff70000000000000007000000000040000000000000000000005000203100000000405000003000000ec0400000000000001000000010000000000020013000000040002001300000008000200000000800c00020010000200000000001400020018000200000000001c00020020000200000000802400020028000200000000002c00020030000200000000803400020038000200000000003c00020040000200000000004400020048000200000000004c00020050000200030000805400020058000200000000005c00020060000200000000006400020068000200000000006c00020070000200000000007400020078000200000000007c00020080000200000000008400020088000200000000008c00020090000200000000009400020098000200000000009c000200070000000000000007000000410044004d0049004e002400000000000d000000000000000d000000520065006d006f00740065002000410064006d0069006e000000000006000000000000000600000041006e0069006d00650000000100000000000000010000000000000018000000000000001800000042006f006f006b0073002000280041007500640069006f002000260020005700720069007400740065006e00290000000100000000000000010000000000000003000000000000000300000043002400000000000e000000000000000e000000440065006600610075006c007400200073006800610072006500000012000000000000001200000043006900760069006c00200045006e00670069006e0065006500720069006e00670000000100000000000000010000000000000003000000000000000300000044002400000000000e000000000000000e000000440065006600610075006c0074002000730068006100720065000000060000000000000006000000470061006d00650073000000010000000000000001000000000000000a000000000000000a0000004800440020004d006f0076006900650073000000010000000000000001000000000000000b000000000000000b00000048004400540056002000530068006f007700730000000000010000000000000001000000000000000500000000000000050000004900500043002400000000000b000000000000000b000000520065006d006f00740065002000490050004300000000000700000000000000070000004d006f00760069006500730000000000010000000000000001000000000000000600000000000000060000004d0075007300690063000000010000000000000001000000000000000700000000000000070000005000750062006c006900630000000000010000000000000001000000000000000f000000000000000f0000005000750062006c00690063002000550070006c006f00610064007300000000000100000000000000 \nSMB Data Packet (hex):\n----------------------\nfe534d4240000000050000800b000100010000000000000007000000000000003f110000010000007d00004c05040000000000000000000000000000000000003100000017c0110001ac03001002000001000000ffffffff70000000000000007000000000040000000000000000000005000203100000000405000003000000ec0400000000000001000000010000000000020013000000040002001300000008000200000000800c00020010000200000000001400020018000200000000001c00020020000200000000802400020028000200000000002c00020030000200000000803400020038000200000000003c00020040000200000000004400020048000200000000004c00020050000200030000805400020058000200000000005c00020060000200000000006400020068000200000000006c00020070000200000000007400020078000200000000007c00020080000200000000008400020088000200000000008c00020090000200000000009400020098000200000000009c000200070000000000000007000000410044004d0049004e002400000000000d000000000000000d000000520065006d006f00740065002000410064006d0069006e000000000006000000000000000600000041006e0069006d00650000000100000000000000010000000000000018000000000000001800000042006f006f006b0073002000280041007500640069006f002000260020005700720069007400740065006e00290000000100000000000000010000000000000003000000000000000300000043002400000000000e000000000000000e000000440065006600610075006c007400200073006800610072006500000012000000000000001200000043006900760069006c00200045006e00670069006e0065006500720069006e00670000000100000000000000010000000000000003000000000000000300000044002400000000000e000000000000000e000000440065006600610075006c0074002000730068006100720065000000060000000000000006000000470061006d00650073000000010000000000000001000000000000000a000000000000000a0000004800440020004d006f0076006900650073000000010000000000000001000000000000000b000000000000000b00000048004400540056002000530068006f007700730000000000010000000000000001000000000000000500000000000000050000004900500043002400000000000b000000000000000b000000520065006d006f00740065002000490050004300000000000700000000000000070000004d006f00760069006500730000000000010000000000000001000000000000000600000000000000060000004d0075007300690063000000010000000000000001000000000000000700000000000000070000005000750062006c006900630000000000010000000000000001000000000000000f000000000000000f0000005000750062006c00690063002000550070006c006f00610064007300000000000100000000000000\n==================== SMB Message 10 ====================\nSMB Header:\n-----------\nCommand: 0x06 (SMB2_COM_CLOSE) \nStatus: 0x00000000 \nFlags: 0x00 \nPID: 4415 \nMID: 8 \nTID: 1 \nData: 24 bytes \n180000000000000001ac03001002000001000000ffffffff \nSMB Data Packet (hex):\n----------------------\nfe534d42400000000000000006000000000000000000000008000000000000003f110000010000007d00004c0504000000000000000000000000000000000000180000000000000001ac03001002000001000000ffffffff\n\n[Finished in 0.2s with exit code 1]\n</code></pre>\n\n<p>What is going wrong and how can I fix it?</p>\n"},{"tags":["android","python","opencv","stream"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":60,"score":-1,"question_id":13240868,"title":"Live stream in openCv using Android IP Camera (python)","body":"<p>I want to make a live stream in openCv using Android IP Camera, I have been trying with this code, but it doesn't work.\nWhat should I change in this code?</p>\n\n<pre><code>camera=cv.CaptureFromFile(\"http://192.168.0.10:8080/videofeed\")\nwhile True :\n  img =cv.QueryFrame(camera)\n  cv.ShowImage('Video',img)\n  if cv.WaitKey(0):\n    break   \ncv.ReleaseCapture(camera)\n</code></pre>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13253792,"title":"list of class objects (birds). each bird has a color. how do I most efficiently get a set of all colors?","body":"<p>I have a list of class objects, say birds. Each bird has a color. I want to easily get a set of bird colors from this list of birds. What is the quickest, most efficient way to do this?</p>\n"},{"tags":["python","networking","pycurl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13012823,"title":"pycurl CONNECT_TIME on windows","body":"<p>I am using windows with pycurl, I am having an issue with timings when returning the CONNECT_TIME where by timings are not accurate.</p>\n\n<p>Is there a way to make the connect_time in windows more accurate when using pycurl.</p>\n\n<p>At the moment I am using the following.</p>\n\n<pre><code>stats['connection_time'] = self.getinfo(CONNECT_TIME)\n</code></pre>\n\n<p>If I were to use the time.clock() methods around the code then this will not return the connection time but rather the total_time which is a deterrent metric.</p>\n"},{"tags":["python","mongodb"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":2,"view_count":63,"score":2,"question_id":13253759,"title":"Why do i get this Python indentation error?","body":"<p>I have a indentation error in Python and i dont know why and how to resolve it.</p>\n\n<p>I looked for special characters that i might have missed, but none found;</p>\n\n<p>Why do i get this error ?</p>\n\n<pre><code>user = {'_id':username}\n\nusers.find_one(user)\n</code></pre>\n\n<p><img src=\"http://i.stack.imgur.com/cr5Ed.png\" alt=\"enter image description here\"></p>\n\n<p>IN CONCLUSSION : NEVER MIX TABS WITH SPACES!</p>\n"},{"tags":["python","io-redirection"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13250050,"title":"Redirecting the output of a python function from STDOUT to variable in Python","body":"<p>This is what I am trying to achieve</p>\n\n<pre>\n<code>\ndef fun():\n    runner = InteractiveConsole()\n    while(True):\n        code = raw_input()\n        code.rstrip('\\n')\n        # I want to achieve the following\n        # By default the output and error of the 'code' is sent to STDOUT and STDERR\n        # I want to obtain the output in two variables out and err\n        out,err = runner.push(code)\n</code>\n</pre>\n\n<p>All the solution that I have looked at till now, use either pipes to issue separate script execution command (which is not possible in my case). Any other way I can achieve this?</p>\n"},{"tags":["python","tkinter","pil"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13253617,"title":"PIL loading jpg","body":"<p>I'm using PIL to load a jpg file and display it in a label widget. At first, I got \"decoding error\" from python and found this post on stack overflow - <a href=\"http://stackoverflow.com/questions/9070074/how-to-install-pil-on-mac-os-x-10-7-2-lion\">how to install PIL on mac os x 10.7.2 Lion</a> - and it's resolved the decoding error. However, the label doesn't display any image, just a white area. This is the code for loading image -</p>\n\n<pre><code>    script, file = argv \n    self.orgimg = Image.open(file)\n\n    #Original Image\n    img = ImageTk.PhotoImage(self.orgimg)\n    Label(self.root, image=img).grid(row=0,column=0,padx=5,pady=5)\n</code></pre>\n"},{"tags":["python"],"answer_count":2,"favorite_count":5,"up_vote_count":7,"down_vote_count":0,"view_count":548,"score":7,"question_id":6719309,"title":"Python distributions and environments for scientific computing","body":"<p>I apologize upfront if this question is too broad. I come from the MATLAB world and have relatively little experience with Python. </p>\n\n<p>After having spent some time reading about several Python-based environments and distributions for scientific computing, I feel that I still don't fully understand the landscape of solutions or the precise relationship between some notable packages, including: </p>\n\n<ul>\n<li><a href=\"http://www.scipy.org/\" rel=\"nofollow\">SciPy</a> </li>\n<li><a href=\"http://code.google.com/p/spyderlib/\" rel=\"nofollow\">Spyderlib</a> </li>\n<li><a href=\"http://www.pythonxy.com/\" rel=\"nofollow\">Pythonxy</a></li>\n<li><a href=\"http://www.enthought.com/products/epd.php\" rel=\"nofollow\">Enthought Python Distribution</a></li>\n<li><a href=\"http://www.sagemath.org/\" rel=\"nofollow\">Sage</a></li>\n</ul>\n\n<p>More specifically:</p>\n\n<ul>\n<li>Do any of the above packages provide similar functionality? Do they complement each other?</li>\n<li>Does the installation of any of them include or require the installation of any of the \nothers? If so, which ones include or require which?</li>\n</ul>\n\n<p>Less importantly, are there any other packages similar to the ones above that provide similar functionality? </p>\n\n<p>Thanks in advance</p>\n"},{"tags":["python","google-app-engine","web","webapp2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":278,"score":1,"question_id":8451914,"title":"webapp2 route fails","body":"<p>so I'm building my new website using app-engine with python and webapp2\nI'm having hard times to define the URIs in my web application</p>\n\n<p>the result I need is:</p>\n\n<pre><code>http://www.example.com/\nhttp://www.example.com/products/\nhttp://www.example.com/products/table\n</code></pre>\n\n<p>I thought it's an easy task, but apparently it is not (for me, anyway)</p>\n\n<p>I'm getting 404 error when I'm trying to load something like that:\n<a href=\"http://www.example.com/products/chair/\" rel=\"nofollow\">http://www.example.com/products/chair/</a></p>\n\n<p>where is my mistake?\nthanks in advanced :)</p>\n\n<pre><code>app = webapp2.WSGIApplication([\nwebapp2.Route('/', MainPage),\nwebapp2.Route('/products/', handler=MainProductsHandler),\nwebapp2.Route('/products/(\\w+)/', handler=ProductHandler)\n],debug=True)\n</code></pre>\n"},{"tags":["python","performance","path","directory"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13252980,"title":"Common pathname manipulations to save in a specific directory a file","body":"<p>I am writing a function where I read <code>inFile</code> in order to split it into two files (outFile1,outFile2).</p>\n\n<p>What I want is if <code>outFile1</code> and/or <code>outFile2</code> are specified without pathname directory (ex: <code>outFile1=\"result1.txt\"</code> and <code>outFile2=\"result2.txt\"</code>) both files are saved in the same directory as <code>inFile</code> (ex: inFile=\"C:\\mydata\\myfile.txt\"). If the  pathname directory for the output files is present, I wish to save the results in that directory.  </p>\n\n<p>when I don't report the the <code>outFile</code> pathname directory, the files are saved in the same directory as my python script.</p>\n\n<pre><code>def LAS2LASDivide(inFile,outFile1,outFile2,Parse,NumVal):\n    inFile_path, inFile_name_ext = os.path.split(os.path.abspath(inFile))\n    outFile1_path, outFile1_name_ext = os.path.split(os.path.abspath(outFile1))\n    outFile2_path, outFile2_name_ext = os.path.split(os.path.abspath(outFile2))\n    outFile1_name = os.path.splitext(outFile1_name_ext)[0]\n    outFile2_name = os.path.splitext(outFile2_name_ext)[0]\n</code></pre>\n\n<p>example</p>\n\n<pre><code>inFile=\"C:\\\\mydoc\\\\Area_18.las\"\noutFile1=\"Area_18_overlap.las\"\noutFile2=\"Area_18_clean.las\"\n\ninFile_path, inFile_name_ext = os.path.split(os.path.abspath(inFile))\ninFile_path, inFile_name_ext\n('C:\\\\mydoc', 'Area_18.las')\n\noutFile1_path, outFile1_name_ext = os.path.split(os.path.abspath(outFile1))\noutFile1_path, outFile1_name_ext \n('C:\\\\Program Files\\\\PyScripter', 'Area_18_overlap.las')\n</code></pre>\n\n<p>this is all my code (tested) modify with the suggestion of mgilson</p>\n\n<pre><code>import os\nfrom os import path\nfrom liblas import file as lasfile\n\n\ndef LAS2LASDivide(inFile,outFile1,outFile2,Parse,NumVal):\n    inFile_path, inFile_name_ext = os.path.split(os.path.abspath(inFile))\n    outFile1_path, outFile1_name_ext = os.path.split(os.path.abspath(outFile1))\n    outFile2_path, outFile2_name_ext = os.path.split(os.path.abspath(outFile2))\n    outFile1_name = os.path.splitext(outFile1_name_ext)[0]\n    outFile2_name = os.path.splitext(outFile2_name_ext)[0]\n    if outFile1_name != outFile2_name:\n        # function pesudo_switch\n        def pseudo_switch(x):\n            return {\n                \"i\": p.intensity,\n                \"r\": p.return_number,\n                \"n\": p.number_of_returns,\n                \"s\": p.scan_direction,\n                \"e\": p.flightline_edge,\n                \"c\": p.classification,\n                \"a\": p.scan_angle,\n            }[x]\n        h = lasfile.File(inFile,None,'r').header\n        # change the software id to libLAS\n        h.software_id = \"alessandro.montaghi@gmail.com\"\n        if not os.path.split(outFile1)[0]:\n            file_out1 = lasfile.File(os.path.abspath(\"{0}\\\\{1}.las\".format(inFile_path,outFile1_name)),mode='w',header= h)\n        else:\n            file_out1 = lasfile.File(os.path.abspath(\"{0}\\\\{1}.las\".format(outFile1_path,outFile1_name)),mode='w',header= h)\n        if not os.path.split(outFile2)[0]:\n            file_out2 = lasfile.File(os.path.abspath(\"{0}\\\\{1}.las\".format(inFile_path,outFile2_name)),mode='w',header= h)\n        else:\n            file_out2 = lasfile.File(os.path.abspath(\"{0}\\\\{1}.las\".format(outFile2_path,outFile2_name)),mode='w',header= h)\n        for p in lasfile.File(inFile,None,'r'):\n            if pseudo_switch(Parse) == int(NumVal):\n                file_out1.write(p)\n            elif pseudo_switch(Parse) != int(NumVal):\n                file_out2.write(p)\n        file_out1.close()\n        file_out2.close()\n    else:\n        print \"outFile1 and outFile2 cannot have the same name\"\n</code></pre>\n"},{"tags":["python","math","numpy","matplotlib","fft"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13253576,"title":"Calculating Area Under Individual Peaks in Python After FFT","body":"<p>I've generated a graph of a FFT, with a number of individual peaks, in Python 2.7.3. </p>\n\n<p><img src=\"http://i.stack.imgur.com/FXqSV.png\" alt=\"http://imgur.com/O9E0e\"></p>\n\n<p>I understand that to calculate the area under the whole graph, I can either sum the values or use trapz, but I'm struggling when trying to restrict these calculations to a single region. For example, I'd like to calculate just the area between 105 and 120Hz, or between 145 and 155Hz.</p>\n\n<p>If it helps, the code to generate this graph is:</p>\n\n<pre><code>x=arange(0,15,0.01)\n\ny=exp(-0.3*x)*exp(x*pi*20j)+exp(-0.9*x)*exp(x*pi*25j)+exp(-0.9*x)*exp(x*pi*15j)\n\nfft(y)\nplot(fft(y))\nxlabel('frequency (Hz)')\nshow()\n</code></pre>\n\n<p>I'm sure I'm probably just missing something relatively simple, but as a complete novice of programming I'd appreciate any help you can provide and a brief search of SO didn't provide any answers. Thanks.</p>\n"},{"tags":["python","sqlite","cursor"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":9,"score":0,"question_id":13253519,"title":"How to get value from Cursor execution result Python","body":"<p>I have a sqllite database in which the field dad_mmsi is created without a type:</p>\n\n<pre><code>c.execute('''CREATE TABLE IF NOT EXISTS AIS_anoniem\n             (dad_mmsi, dad_navstatus......)'''')\n</code></pre>\n\n<p>when i fetch the top result;</p>\n\n<pre><code>c.execute('SELECT DISTINCT dad_mmsi FROM AIS')\nprint c.fetchall()[0]\n</code></pre>\n\n<p>it prints: </p>\n\n<pre><code>(u'456000001',)\n</code></pre>\n\n<p>which is not the same as what i put in, because it is converted to a tuple. </p>\n\n<p>EDIT: since it is a tuple i need to access the index of the value i want:</p>\n\n<pre><code> print c.fetchall()[0][0] == '456000001'\n</code></pre>\n\n<p>gives me:</p>\n\n<pre><code> 'true' \n</code></pre>\n"},{"tags":["python","api","google","oauth","reporting"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13253528,"title":"Is it possible to use OAUTH 2 with the Google Reporting API?","body":"<p>I am currently using OAuth 1 for auth with the Reporting API with GData and Python.  Is it possible to use OAuth 2, I can't find a reference that this is doable?</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":5,"view_count":62,"score":-3,"question_id":13251717,"title":"Program doesn't produce any error or output","body":"<p>I have the following Python program:</p>\n\n<pre><code> import xml.etree.ElementTree as ET\n    import sys   \n\n    class MyXmlParser(object):\n\n        def __init__(self, users):\n            self.doc  = ET.parse(\"users.xml\")\n            self.root = self.doc.getroot()\n\n        def do_something(self, output = sys.stdout):\n            root_new  = ET.Element(\"users\") \n            for child in self.root:\n                username             = child.attrib['username']\n                password             = child.attrib['password']   \n                # create \"user\" here\n                user    = ET.SubElement(root_new, \"user\") \n                user.set(\"username\",username)               \n                user.set(\"password\",password) \n                # checking attribute - skip KeyError\n                try:\n                    remote_access   = child.attrib['remote_access']\n                    user.set(\"remote_access\", remote_access) \n                except KeyError:\n                    pass\n\n                for g in child.findall(\"group\"):\n                    # create \"group\" here\n                    group     = ET.SubElement(user,\"group\")  \n                    if g.text != \"lion\":\n                        group.text = g.text \n            tree = ET.ElementTree(root_new)\n            tree.write(output)\nif __name__ =='main':\n    parser = MyXmlParser()\n    parser.do_something()\n</code></pre>\n\n<p>And this is my xml :</p>\n\n<pre><code>&lt;users&gt;\n&lt;user username=\"admin\"  password=\"admin\" remote_access=\"yes\"&gt;&lt;/user&gt;\n&lt;user username=\"private_user1\" password=\"user1\" &gt;&lt;group&gt;group1&lt;/group&gt;&lt;group&gt;group2&lt;/group&gt;&lt;/user&gt;\n&lt;user username=\"private_user2\" fullname=\"user2\" password=\"user2\"&gt;&lt;group&gt;group1&lt;/group&gt;&lt;group&gt;group2&lt;/group&gt;&lt;/user&gt;\n&lt;/users&gt;\n</code></pre>\n\n<p>I can't find any mistake in this program. It should output some xml. But presently it's not giving any error or output. I expected some xml as output :( Thanks in advance</p>\n"},{"tags":["python","numpy"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":54,"score":3,"question_id":13252781,"title":"Concatenate all rows of a numpy matrix in python","body":"<p>I have a numpy matrix and would like to concatenate all of the rows together so I end up with one long array.</p>\n\n<pre><code>#example\n\ninput:\n[[1 2 3]\n [4 5 6}\n [7 8 9]]\n\noutput:\n[[1 2 3 4 5 6 7 8 9]]\n</code></pre>\n\n<p>The way I am doing it now doe not seem pythonic.  I'm sure there is a better way.</p>\n\n<pre><code>combined_x = x[0] \nfor index, row in enumerate(x):\n    if index!= 0:\n        combined_x = np.concatenate((combined_x,x[index]),axis=1)\n</code></pre>\n\n<p>Thank you for the help.</p>\n"},{"tags":["python","django","django-models","django-orm"],"answer_count":3,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":142,"score":5,"question_id":13138685,"title":"Django cross table model structure","body":"<p>I have a <em>System</em> model, and an <em>Interface</em> model. An Interface is the combination between two systems. Before, this interface was represented as an Excel sheet (cross table). Now I'd like to store it in a database.</p>\n\n<p>I tried creation an Interface model, with two foreign keys to System. This doesn't work because :</p>\n\n<ul>\n<li>It creates two different reverse relationships on the target model</li>\n<li>It doesn't avoid having duplicates (first and second rel swapped)</li>\n</ul>\n\n<p>I used this code :</p>\n\n<pre><code>class SystemInterface(Interface):\n    assigned_to = models.ManyToManyField(User)\n    first_system = models.ForeignKey(System)\n    second_system = models.ForeignKey(System)\n</code></pre>\n\n<p>Isn't there a better way to do this ?   </p>\n\n<p>I'd need to have symmetrical relations : it should'nt matter is a System is the \"first\" or \"second\" in an Interface.</p>\n"},{"tags":["python","sympy"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":26,"score":-1,"question_id":13245596,"title":"import sympy doesn't work","body":"<p>I can import sympy fine in the terminal but once I save it as a .py file and run it, it gives me the following error:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"/Users/Dao/Desktop/sympy.py\", line 3, in &lt;module&gt;\n    from sympy import Symbol\nFile \"/Users/Dao/Desktop/sympy.py\", line 3, in &lt;module&gt;\n    from sympy import Symbol\nImportError: cannot import name Symbol\n[Finished in 0.0s with exit code 1]\n</code></pre>\n\n<p>I'm a little confused as why this is happening... Any idea? </p>\n\n<p>Thank you!</p>\n"},{"tags":["python","descriptor"],"answer_count":1,"favorite_count":2,"up_vote_count":2,"down_vote_count":0,"view_count":74,"score":2,"question_id":12709194,"title":"The proper way of completely overriding attribute access in Python?","body":"<p>This naive class attempts to mimic the attribute access of basic python objects. <code>dict</code> and <code>cls</code> explicitly stores the attributes and the class. The effect is that accessing <code>.x</code> of an instance will return <code>dict[x]</code>, or if that fails, <code>cls.x</code>. Just like normal objects.</p>\n\n<pre><code>class Instance(object):\n    __slots__ = [\"dict\", \"cls\"]\n    def __getattribute__(self, key):\n        try:\n            return self.dict[key]\n        except KeyError:\n            return getattr(self.cls, key)\n    def __setattr__(self, key, value):\n        if key == \"__class__\":\n            self.cls = value\n        else:\n            self.dict[key] = value\n</code></pre>\n\n<p>But it's nowhere near as simple as that. One obvious issue is the complete disregard for descriptors. Just imagine that <code>cls</code> has properties. Doing <code>Instance.some_property = 10</code> should access the property as defined in <code>cls</code>, but will instead happily set <code>some_property</code> as an attribute in <code>dict</code>.</p>\n\n<p>Then there is the issue of binding methods of <code>cls</code> to instances of <code>Instance</code>, and possibly more that I don't even know.</p>\n\n<p>There seem to be a lot of details to get the above class to function as close to python objects as possible, and the docs for descriptors I've read so far hasn't made it clear how to get, simply put, everything right. </p>\n\n<p>What I am asking for is a reference for implementing a complete replacement for python's attribute access. That is, the above class, but correct.</p>\n"},{"tags":["python","lxml"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":59,"score":0,"question_id":13140185,"title":"lxml, parsing in reverse","body":"<p>I am parsing a large file (>9GB) and am using iterparse of lxml in Python to parse the file while clearing as I go forward. I was wondering, is there a way to parse backwards while clearing? I could see I how would implement this independently of lxml, but it would be nice to use this package.</p>\n\n<p>Thank you in advance!</p>\n"},{"tags":["python","emacs"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13247766,"title":"python-shell not working in emacs","body":"<p>I am trying to configure emacs for python development. I have installed the following packages from melpa - python-mode ipython.</p>\n\n<p>I would like to interactively develop, have the code file open in one frame and the python shell open in another, and have the ability to reload the changes in my code file in the shell.</p>\n\n<p>As per the article - <a href=\"http://pedrokroger.net/2010/07/configuring-emacs-as-a-python-ide-2/\" rel=\"nofollow\">http://pedrokroger.net/2010/07/configuring-emacs-as-a-python-ide-2/</a>, I should be able to load my code in the shell using C-c ! or M-x python-shell. However on executing either of this nothing happens !</p>\n\n<p>I have not downloaded the python-mode.el manually, but installed the packages from repos, is that creating a problem ?</p>\n\n<p>I would appreciate help in resolving this issue</p>\n"},{"tags":["python","google-app-engine"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":33,"score":2,"question_id":13252683,"title":"what does the cursor() method of GAE Query class return if the last result was already retrieved?","body":"<p>From the Google App Engine documentation:</p>\n\n<p>\"cursor() returns a base64-encoded cursor string denoting the position in the query's result set following the last result retrieved.\"</p>\n\n<p>What does it return if the the last result retrieved IS the last result in the query set? Wouldn't this mean that there is no position that can 'follow' the last result retrieved? Therefore, is 'None' returned?</p>\n"},{"tags":["python","string","syntax","int"],"answer_count":3,"favorite_count":0,"up_vote_count":6,"down_vote_count":0,"view_count":12027,"score":6,"question_id":2621243,"title":"the error \"invalid literal for int() with base 10:\" keeps coming up","body":"<p>I'm trying to write a very simple program, I want to print out the sum of all the multiples of 3 and 5 below 100, but, an error keeps accuring, saying \"invalid literal for int() with base 10:\" my program is as follows:</p>\n\n<pre><code>sum = \"\"\nsum_int = int(sum)\nfor i in range(1, 101):\n    if i % 5 == 0:\n        sum += i \n    elif i % 3 == 0:\n        sum += i\n    else:\n        sum += \"\"\n\nprint sum\n</code></pre>\n\n<p>Any help would be much appreciated.</p>\n"},{"tags":["python","opencv"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":79,"score":0,"question_id":12354628,"title":"Errors met while installing pyopencv 2.1.0 with opencv-2.4.2","body":"<p>I met some errors when I install pyopencv 2.1.0 with opencv-2.4.2, my python version is 2.7.3 and my os is OS X Mountain Lion, </p>\n\n<p>and the process information is below, I found some errors showed that the class 'Mat' is redefined, but I don't know how to fix it, does any friends could help me? thank!</p>\n\n<pre><code>sudo python setup.py install\nrunning install\nrunning bdist_egg\nrunning egg_info\nwriting requirements to package/pyopencv.egg-info/requires.txt\nwriting package/pyopencv.egg-info/PKG-INFO\nwriting top-level names to package/pyopencv.egg-info/top_level.txt\nwriting dependency_links to package/pyopencv.egg-info/dependency_links.txt\nreading manifest file 'package/pyopencv.egg-info/SOURCES.txt'\nwriting manifest file 'package/pyopencv.egg-info/SOURCES.txt'\ninstalling library code to build/bdist.macosx-10.8-x86_64/egg\nrunning install_lib\nrunning build_py\ncreating build/lib.macosx-10.8-x86_64-2.7\ncreating build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/__init__.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/common.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/config.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/cv_h.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/cv_hpp.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/cvaux.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/cvtypes_h.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/cvver_h.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/cxcore_h.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/cxcore_hpp.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/cxcore_hpp_point.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/cxcore_hpp_vec.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/cxerror_h.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/cxtypes_h.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/highgui.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/info.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/interfaces.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/ml.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\ncopying package/pyopencv/sdopencv.py -&gt; build/lib.macosx-10.8-x86_64-2.7/pyopencv\nrunning build_ext\nbuilding 'pyopencv.pyopencv_extras' extension\ncreating build/temp.macosx-10.8-x86_64-2.7\ncreating build/temp.macosx-10.8-x86_64-2.7/package\ncreating build/temp.macosx-10.8-x86_64-2.7/package/extras\ncreating build/temp.macosx-10.8-x86_64-2.7/package/extras/core\ncreating build/temp.macosx-10.8-x86_64-2.7/package/extras/sdopencv\n/usr/bin/clang -fno-strict-aliasing -fno-common -dynamic -pipe -O2 -fwrapv -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -dynamiclib -I/System/Library/Frameworks/Python.framework/Headers -I/opt/local/include -I/opt/local/include/opencv -I/opt/local/include -I~/Downloads/pyopencv-2.1.0.wr1.2.0/package -I~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras -I~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core -I~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv -I/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/core/include/numpy -I/opt/local/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c package/extras/core/ndarray.cpp -o build/temp.macosx-10.8-x86_64-2.7/package/extras/core/ndarray.o -O3 -DNDEBUG\nclang: warning: argument unused during compilation: '-dynamiclib'\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:58:13: error: \n      redefinition of 'Mat'\ninline Mat::Mat()\n            ^\n/opt/local/include/opencv2/core/mat.hpp:67:13: note: previous definition is here\ninline Mat::Mat() : size(&amp;rows)\n            ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:59:35: warning: \n      field 'step' will be initialized after field 'data' [-Wreorder]\n    : flags(0), rows(0), cols(0), step(0), data(0), refcount(0), ...\n                                  ^\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:58:13: error: \n      constructor for 'cv::Mat' must explicitly initialize the member 'size'\n      which does not have a default constructor\ninline Mat::Mat()\n            ^\n/opt/local/include/opencv2/core/core.hpp:1961:11: note: member is declared here\n    MSize size;\n          ^\n/opt/local/include/opencv2/core/core.hpp:1933:23: note: 'cv::Mat::MSize'\n      declared here\n    struct CV_EXPORTS MSize\n                      ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:61:13: error: \n      redefinition of 'Mat'\ninline Mat::Mat(int _rows, int _cols, int _type)\n            ^\n/opt/local/include/opencv2/core/mat.hpp:72:13: note: previous definition is here\ninline Mat::Mat(int _rows, int _cols, int _type) : size(&amp;rows)\n            ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:62:35: warning: \n      field 'step' will be initialized after field 'data' [-Wreorder]\n    : flags(0), rows(0), cols(0), step(0), data(0), refcount(0), ...\n                                  ^\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:61:13: error: \n      constructor for 'cv::Mat' must explicitly initialize the member 'size'\n      which does not have a default constructor\ninline Mat::Mat(int _rows, int _cols, int _type)\n            ^\n/opt/local/include/opencv2/core/core.hpp:1961:11: note: member is declared here\n    MSize size;\n          ^\n/opt/local/include/opencv2/core/core.hpp:1933:23: note: 'cv::Mat::MSize'\n      declared here\n    struct CV_EXPORTS MSize\n                      ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:68:13: error: \n      redefinition of 'Mat'\ninline Mat::Mat(int _rows, int _cols, int _type, const Scalar&amp; _s)\n            ^\n/opt/local/include/opencv2/core/mat.hpp:78:13: note: previous definition is here\ninline Mat::Mat(int _rows, int _cols, int _type, const Scalar&amp; _s) : size(&amp;rows)\n            ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:69:35: warning: \n      field 'step' will be initialized after field 'data' [-Wreorder]\n    : flags(0), rows(0), cols(0), step(0), data(0), refcount(0),\n                                  ^\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:68:13: error: \n      constructor for 'cv::Mat' must explicitly initialize the member 'size'\n      which does not have a default constructor\ninline Mat::Mat(int _rows, int _cols, int _type, const Scalar&amp; _s)\n            ^\n/opt/local/include/opencv2/core/core.hpp:1961:11: note: member is declared here\n    MSize size;\n          ^\n/opt/local/include/opencv2/core/core.hpp:1933:23: note: 'cv::Mat::MSize'\n      declared here\n    struct CV_EXPORTS MSize\n                      ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:79:13: error: \n      redefinition of 'Mat'\ninline Mat::Mat(Size _size, int _type)\n            ^\n/opt/local/include/opencv2/core/mat.hpp:85:13: note: previous definition is here\ninline Mat::Mat(Size _sz, int _type) : size(&amp;rows)\n            ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:80:35: warning: \n      field 'step' will be initialized after field 'data' [-Wreorder]\n    : flags(0), rows(0), cols(0), step(0), data(0), refcount(0),\n                                  ^\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:79:13: error: \n      constructor for 'cv::Mat' must explicitly initialize the member 'size'\n      which does not have a default constructor\ninline Mat::Mat(Size _size, int _type)\n            ^\n/opt/local/include/opencv2/core/core.hpp:1961:11: note: member is declared here\n    MSize size;\n          ^\n/opt/local/include/opencv2/core/core.hpp:1933:23: note: 'cv::Mat::MSize'\n      declared here\n    struct CV_EXPORTS MSize\n                      ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:87:13: error: \n      redefinition of 'Mat'\ninline Mat::Mat(Size _size, int _type, const Scalar&amp; _s)\n            ^\n/opt/local/include/opencv2/core/mat.hpp:91:13: note: previous definition is here\ninline Mat::Mat(Size _sz, int _type, const Scalar&amp; _s) : size(&amp;rows)\n            ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:88:31: warning: \n      field 'step' will be initialized after field 'data' [-Wreorder]\n: flags(0), rows(0), cols(0), step(0), data(0), refcount(0),\n                              ^\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:87:13: error: \n      constructor for 'cv::Mat' must explicitly initialize the member 'size'\n      which does not have a default constructor\ninline Mat::Mat(Size _size, int _type, const Scalar&amp; _s)\n            ^\n/opt/local/include/opencv2/core/core.hpp:1961:11: note: member is declared here\n    MSize size;\n          ^\n/opt/local/include/opencv2/core/core.hpp:1933:23: note: 'cv::Mat::MSize'\n      declared here\n    struct CV_EXPORTS MSize\n                      ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:98:13: error: \n      redefinition of 'Mat'\ninline Mat::Mat(const Mat&amp; m)\n            ^\n/opt/local/include/opencv2/core/mat.hpp:111:13: note: previous definition is\n      here\ninline Mat::Mat(const Mat&amp; m)\n            ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:99:51: warning: \n      field 'step' will be initialized after field 'data' [-Wreorder]\n    : flags(m.flags), rows(m.rows), cols(m.cols), step(m.step), data(m.data),\n                                                  ^\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:98:13: error: \n      constructor for 'cv::Mat' must explicitly initialize the member 'size'\n      which does not have a default constructor\ninline Mat::Mat(const Mat&amp; m)\n            ^\n/opt/local/include/opencv2/core/core.hpp:1961:11: note: member is declared here\n    MSize size;\n          ^\n/opt/local/include/opencv2/core/core.hpp:1933:23: note: 'cv::Mat::MSize'\n      declared here\n    struct CV_EXPORTS MSize\n                      ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:106:13: error: \n      redefinition of 'Mat'\ninline Mat::Mat(int _rows, int _cols, int _type, void* _data, size_t _step)\n            ^\n/opt/local/include/opencv2/core/mat.hpp:129:13: note: previous definition is\n      here\ninline Mat::Mat(int _rows, int _cols, int _type, void* _data, size_t _step)\n            ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:108:5: warning: \n      field 'step' will be initialized after field 'data' [-Wreorder]\n    step(_step), data((uchar*)_data), refcount(0),\n    ^\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:106:13: error: \n      constructor for 'cv::Mat' must explicitly initialize the member 'size'\n      which does not have a default constructor\ninline Mat::Mat(int _rows, int _cols, int _type, void* _data, size_t _step)\n            ^\n/opt/local/include/opencv2/core/core.hpp:1961:11: note: member is declared here\n    MSize size;\n          ^\n/opt/local/include/opencv2/core/core.hpp:1933:23: note: 'cv::Mat::MSize'\n      declared here\n    struct CV_EXPORTS MSize\n                      ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:126:13: error: \n      redefinition of 'Mat'\ninline Mat::Mat(Size _size, int _type, void* _data, size_t _step)\n            ^\n/opt/local/include/opencv2/core/mat.hpp:151:13: note: previous definition is\n      here\ninline Mat::Mat(Size _sz, int _type, void* _data, size_t _step)\n            ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:128:5: warning: \n      field 'step' will be initialized after field 'data' [-Wreorder]\n    step(_step), data((uchar*)_data), refcount(0),\n    ^\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:126:13: error: \n      constructor for 'cv::Mat' must explicitly initialize the member 'size'\n      which does not have a default constructor\ninline Mat::Mat(Size _size, int _type, void* _data, size_t _step)\n            ^\n/opt/local/include/opencv2/core/core.hpp:1961:11: note: member is declared here\n    MSize size;\n          ^\n/opt/local/include/opencv2/core/core.hpp:1933:23: note: 'cv::Mat::MSize'\n      declared here\n    struct CV_EXPORTS MSize\n                      ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:146:13: error: \n      constructor for 'cv::Mat' must explicitly initialize the member 'size'\n      which does not have a default constructor\ninline Mat::Mat(const Mat&amp; m, const Range&amp; rowRange, const Range&amp; colRange)\n            ^\n/opt/local/include/opencv2/core/core.hpp:1961:11: note: member is declared here\n    MSize size;\n          ^\n/opt/local/include/opencv2/core/core.hpp:1933:23: note: 'cv::Mat::MSize'\n      declared here\n    struct CV_EXPORTS MSize\n                      ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:149:10: error: \n      'operator=' is a protected member of 'cv::Mat::MStep'\n    step = m.step; refcount = m.refcount;\n    ~~~~ ^ ~~~~~~\n/opt/local/include/opencv2/core/core.hpp:1958:16: note: declared protected here\n        MStep&amp; operator = (const MStep&amp;);\n               ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:182:5: warning: \n      field 'step' will be initialized after field 'data' [-Wreorder]\n    step(m.step), data(m.data + roi.y*step), refcount(m.refcount),\n    ^\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:180:13: error: \n      constructor for 'cv::Mat' must explicitly initialize the member 'size'\n      which does not have a default constructor\ninline Mat::Mat(const Mat&amp; m, const Rect&amp; roi)\n            ^\n/opt/local/include/opencv2/core/core.hpp:1961:11: note: member is declared here\n    MSize size;\n          ^\n/opt/local/include/opencv2/core/core.hpp:1933:23: note: 'cv::Mat::MSize'\n      declared here\n    struct CV_EXPORTS MSize\n                      ^\nIn file included from package/extras/core/ndarray.cpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/ndarray.hpp:18:\nIn file included from ~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/core/opencv_headers.hpp:9:\n~/Downloads/pyopencv-2.1.0.wr1.2.0/package/extras/sdopencv/sdcxmat.hpp:197:35: warning: \n      field 'step' will be initialized after field 'data' [-Wreorder]\n    rows(m-&gt;rows), cols(m-&gt;cols), step(m-&gt;step), data(m-&gt;data.ptr), refcount(0),\n                                  ^\nfatal error: too many errors emitted, stopping now [-ferror-limit=]\n10 warnings and 20 errors generated.\nerror: command '/usr/bin/clang' failed with exit status 1\n</code></pre>\n"},{"tags":["python","list","recursion","dictionary","iteration"],"answer_count":5,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":82,"score":4,"question_id":13238255,"title":"Is it possible to turn a list into a nested dict of keys *without* recursion?","body":"<p>Supposing I had a list as follows:</p>\n\n<pre><code>mylist = ['a','b','c','d']\n</code></pre>\n\n<p>Is it possible to create, from this list, the following dict <strong>without</strong> using recursion/a recursive function?</p>\n\n<pre><code>{\n  'a': {\n    'b': {\n      'c': {\n        'd': { }\n      }\n    }\n  }\n}\n</code></pre>\n"},{"tags":["python","pandas"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13249135,"title":"Installing Pandas on Mac OSX","body":"<p>I'm having trouble installing the Python Pandas library on my Mac OSX computer.</p>\n\n<p>I type the following in Terminal:</p>\n\n<pre><code>    $ sudo easy_install pandas\n</code></pre>\n\n<p>But then I get the following:</p>\n\n<pre><code>    Searching for pandas\n    Reading http://pypi.python.org/simple/pandas/\n    Reading http://pandas.pydata.org\n    Reading http://pandas.sourceforge.net\n    Best match: pandas 0.9.0\n    Downloading http://pypi.python.org/packages/source/p/pandas/pandas-\n    0.9.0.zip#md5=04b1d8e11cc0fc30ae777499d89003ec\n    Processing pandas-0.9.0.zip\n    Writing /tmp/easy_install-ixjbQO/pandas-0.9.0/setup.cfg\n    Running pandas-0.9.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-ixjbQO/pandas-\n    0.9.0/egg-dist-tmp-EGREoT\n    warning: no files found matching 'setupegg.py'\n    no previously-included directories found matching 'doc/build'\n    warning: no previously-included files matching '*.so' found anywhere in distribution\n    warning: no previously-included files matching '*.pyd' found anywhere in distribution\n    warning: no previously-included files matching '*.pyc' found anywhere in distribution\n    warning: no previously-included files matching '.git*' found anywhere in distribution\n    warning: no previously-included files matching '.DS_Store' found anywhere in distribution\n    warning: no previously-included files matching '*.png' found anywhere in distribution\n    unable to execute gcc: No such file or directory\n    error: Setup script exited with error: command 'gcc' failed with exit status 1\n</code></pre>\n\n<p>I do have Xcode and gcc installed, however, gcc is only found when I type:</p>\n\n<pre><code>    $ gcc\n    -bash: gcc: command not found\n\n    $ gcc-4.2\n    i686-apple-darwin11-gcc-4.2.1: no input files\n</code></pre>\n\n<p>What should I do?</p>\n"},{"tags":["python","table","loops"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":761,"score":-2,"question_id":7800198,"title":"Table using nested loop, calculations not coming out correctly / completely","body":"<p>This has stumped me for several hours, and I am so close to the end, and I've tried several different variations, and it comes out in weird ways.</p>\n\n<p>I have also found different times this problem has been asked, but none of them seem to be having the problem I seem to be having.</p>\n\n<p>The question / problem:\nI am having can be seen in the output below this code. The calculation is not carrying across the columns for each respective row, and the calculation keeps taking in the same values into the row and col, apparently, and keeps outputting the same value, 35.7</p>\n\n<p>The code:</p>\n\n<pre><code>def WindChill():\nrow = 0\ncol = 0\ni = 0\nwchill = round((35.74 + 0.6215*(col) - 35.75*(row**16) + 0.4275*(col)*(row**16)), 1)\n\nprint(10 * \" \", \"|\", end = \"\")\n\nhead = -1\n\nfor i in range(1):\n    for col in range(-20, 70, 10):\n        print(3 * \" \", col, \"F\", 3 * \" \", \"|\", end = \" \")\n    print(\"\\n\", 150 * \"-\")\n\nwhile head &lt; 0:\n    for row in range(0, 55, 5):\n        if (len(str(row))) &lt; 2:\n            print(row, \"mph\", 4 * \" \", \"|\", end = \" \")\n\n        else:\n            print(row, \"mph\", 3 * \" \", \"|\", end = \" \")\n\n        print(3 * \" \", round(wchill, 1), 3 * \" \", \"|\", end = \" \")\n\n        col = 0\n        head += 1\n\n        print(\"\\n\", 150 * \"-\")\n    print()\n\nprint()\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>                  |    -20 F     |     -10 F     |     0 F     |     10 F     |     20 F     |     30 F     |     40 F     |     50 F     |     60 F     | \n       ------------------------------------------------------------------------------------------------------------------------------------------------------\n       0 mph      |     35.7     | \n       ------------------------------------------------------------------------------------------------------------------------------------------------------\n       5 mph      |     35.7     | \n       ------------------------------------------------------------------------------------------------------------------------------------------------------\n       10 mph     |     35.7     | \n       ------------------------------------------------------------------------------------------------------------------------------------------------------\n       15 mph     |     35.7     | \n       ------------------------------------------------------------------------------------------------------------------------------------------------------\n       20 mph     |     35.7     | \n       ------------------------------------------------------------------------------------------------------------------------------------------------------\n       25 mph     |     35.7     | \n       ------------------------------------------------------------------------------------------------------------------------------------------------------\n       30 mph     |     35.7     | \n       ------------------------------------------------------------------------------------------------------------------------------------------------------\n       35 mph     |     35.7     | \n       ------------------------------------------------------------------------------------------------------------------------------------------------------\n       40 mph     |     35.7     | \n       ------------------------------------------------------------------------------------------------------------------------------------------------------\n       45 mph     |     35.7     | \n       ------------------------------------------------------------------------------------------------------------------------------------------------------\n       50 mph     |     35.7     | \n       ------------------------------------------------------------------------------------------------------------------------------------------------------\n</code></pre>\n\n<p>Now, obviously, the 35.7 values are supposed to be different with each increment of 5 mph in wind speed, and it's supposed to calculate values all across the columns for each row, too.</p>\n\n<p>The table and calculations are supposed to look similar to the table at:\n<a href=\"http://www.nws.noaa.gov/os/windchill/index.shtml\" rel=\"nofollow\">http://www.nws.noaa.gov/os/windchill/index.shtml</a></p>\n"},{"tags":["python","html","parsing","html-parsing"],"answer_count":3,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":13267,"score":3,"question_id":3276040,"title":"How can I use the python HTMLParser library to extract data from a specific div tag?","body":"<p>I am trying to get a value out of a HTML page using the python HTMLParser library. The value I want to get hold of is within this html element:</p>\n\n<pre><code>...\n&lt;div id=\"remository\"&gt;20&lt;/div&gt;\n...\n</code></pre>\n\n<p>This is my HTMLParser class so far:</p>\n\n<pre><code>class LinksParser(HTMLParser.HTMLParser):\n  def __init__(self):\n    HTMLParser.HTMLParser.__init__(self)\n    self.seen = {}\n\n  def handle_starttag(self, tag, attributes):\n    if tag != 'div': return\n    for name, value in attributes:\n    if name == 'id' and value == 'remository':\n      #print value\n      return\n\n  def handle_data(self, data):\n    print data\n\n\np = LinksParser()\nf = urllib.urlopen(\"http://domain.com/somepage.html\")\nhtml = f.read()\np.feed(html)\np.close()\n</code></pre>\n\n<p>Can someone point me in the right direction? I want the class functionality to get the value 20.</p>\n"},{"tags":["python","google-app-engine","foursquare"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13252276,"title":"How do I get rid of \"Hello World\" in foursquare connected app?","body":"<p>When I upload my foursquare connected app to appspot via appengine launcher and when I go to the apps url I see \"Hello World!\" There isn't anything in my files that says anything about \"Hello World.\" It's not making another directory within my apps files and putting the \"Hello World\" files; I was able to get rid of that. </p>\n"},{"tags":["python","opencv","histogram"],"answer_count":3,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":68,"score":3,"question_id":13241675,"title":"Is it safe to do histogram comparison in this case?","body":"<p>As I don't know the limit of histogram comparison ,I decided to ask the wonderful community.<br>\nI have some images and I want to group them according to its similarity.every image has a unique colored lines starting from the top down to the bottom of the image,so what I did is taking a vertical projection through those colored lines and make a histogram for this projection for every image.It works well as two similar images should have two similar histogram (i.e both go up and down almost exactly the same rounds) as a human I can decide that both histograms are similar according to that uniquely feature even if one histogram doesn't have high values of its peaks (i.e that is a histogram of a faint image)  </p>\n\n<p>The images with its corresponding histograms:<br>\n....................<img src=\"http://imageshack.us/a/img571/948/onelg.jpg\" alt=\"1st\">..................................................<img src=\"http://imageshack.us/a/img255/642/twor.jpg\" alt=\"2nd\">........................................ <img src=\"http://imageshack.us/a/img577/3931/threeaw.jpg\" alt=\"3rd\">................ \n<img src=\"http://imageshack.us/a/img823/4343/onehq.png\" alt=\"1sth\"> <img src=\"http://imageshack.us/a/img687/3738/twoht.png\" alt=\"2ndh\"> <img src=\"http://imageshack.us/a/img43/9996/threeh.png\" alt=\"3rdh\"><br>\n.........................................................................<img src=\"http://imageshack.us/a/img690/7817/twodark.jpg\" alt=\"2nddarker\"><br>\n.................................................<img src=\"http://img20.imageshack.us/img20/6070/darkerh.png\" alt=\"2nddarkhist\">  </p>\n\n<p>I converted the two images to gray-scale , then I made a vertical projection of the image converting it to a histogram and As you may notice the first two histograms are similar but the third is kinda different that's because it has a switched colored lines.  </p>\n\n<p>Note:-<br>\n(1) considering the first two histograms .Although the highest beak is nearly 12, it isn't always the case with some images are darker or fainter but in the end it really gives the same morphology of the histogram if I can say that as you can notice the last histogram is of a darker image of the second one.  </p>\n\n<p><strong>My question is</strong> :Is it safe to do any kind of histogram comparison??Does histogram comparison mean that I can decide if two histograms have the same peaks for example? or may be in others words does histogram comparison tell me if two histograms have the same morphology??What is the best library or method to do this kind of comparison in <code>python</code>??  </p>\n\n<p><strong>Update</strong>:-<br>\n<strong>(1)</strong> As a reply @PepperoniPizza and @FedericoCristina ,In my case totally different images will surely have different histograms (you can rely on that) every image has a unique histogram morphology(i.e unique peaks) and the number of peaks varies from one image to another but two similar image should have the same number of peaks (in other words> if you look at their histogram, you can tell they kinda look like the same( lookat the 1st,2nd and the last histogram to see what I mean.<br>\n<strong>(2)</strong> To be clear about this I really don't want a solution of how I can group my images but I'm paying a lot of intention of how I can decide that two histograms have similar shape or morphology as a general case!!!!<br>\n<strong>(3)</strong> I know about <code>cv2.CompareHist()</code> but I don't know if it is a proper method to compare my histograms as I don't know how <code>cv2.CompareHist()</code> works(i.e I don't know on what base they do comparison) and actually <code>cv2.CompareHist()</code> has 4 types of histogram comparison which I don't know what is the best or even what is the alternative method to do such comparison.<br>\n<strong>(4)</strong> as a reply @remi,here is the point:-I had already 3 libraries in which they support histogram comparison,and it's kinda ambiguous -for me at least- to know what they meant by <em>histogram comparison</em> as some just do like <code>h1-h2</code> and then <code>calcuate(MSE)</code>so all it does is comparing values not the shape these values form in the histogram.So as I'm not that good at histograms and their math-work, I'm wondering if I really can compare histograms such a way.</p>\n\n<p>Thanks  </p>\n"},{"tags":["python","performance","csv","data","statistics"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":7,"view_count":54,"score":-6,"question_id":13251754,"title":"python generate unique counter from csv file","body":"<p>I have a huge csv (tab) file that is about 1 GB of student data for overall grades.<br/><br/>\n(section) Example:</p>\n\n<pre><code>Mandy 1Q 2011 82 English\nCarey 4Q 2010 70 Math\nFreeman 2Q 2012 52 Music\nDarrick 4Q 2010 82 Science\nOsvaldo 4Q 2012 59 Science\nOsvaldo 4Q 2012 79 Science\nJudy 1Q 2012 89 Science\nEmilia 2Q 2011 31 Music\nEmilia 2Q 2011 31 Music\nCordia 1Q 2011 79 Science\nCelestine 1Q 2012 62 English\nCelestine 1Q 2012 62 English\nOpal 4Q 2012 93 Math\nKarlene 1Q 2011 87 English\nKellie 2Q 2012 44 Science\n</code></pre>\n\n<p>I'm looking for:<br/>\nStudent Average, Max, Min (whole, Qtr, Yr) (by class type)<br/>\nAverage per class type (Whole, Qtr, Yr)<br/></p>\n\n<p>Thanks for any help</p>\n"},{"tags":["python","2d","physics"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":43,"score":0,"question_id":13252075,"title":"best libraries for developing a highway simulator?","body":"<p>I'm wondering if anybody knows which Python libraries are better for modeling 2d cars and routes in order to develop a simulator and libraries for managing 2d physics (mass, acceleration, velocity, force...)</p>\n\n<p>I never used python in this way and I think is a good way to learn. Thanks in advance!</p>\n"},{"tags":["python","django","query","mongodb","mongoengine"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":13204573,"title":"Trouble querying ListField with mongoengine","body":"<p>I'm using mongoengine, and I've got the following situation,</p>\n\n<p>My model:</p>\n\n<pre><code>class Item(Document):\n   ...\n   tags = ListField(StringField(max_length=30))\n</code></pre>\n\n<p>The query:</p>\n\n<pre><code>filters = {\n    'tags__contains': query\n}\ntags_with_counter = Item.objects.filter(**filters).item_frequencies('tags')\n</code></pre>\n\n<p>This returns a list of tuples containing the name of the tag, and the frequency. What I want to do is get only tags that contain <strong>query</strong> and their respective frequency. How can I do that?</p>\n"},{"tags":["android","python","egg","sl4a"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":159,"score":0,"question_id":8373322,"title":"How to build Python Eggs for Android SL4A?","body":"<p>Does anyone have any tutorial on How I should go about building a Python Egg for installing it in my android phone ? I want to install the library - Hachoir (https://bitbucket.org/haypo/hachoir/wiki/Home) which parses files. The library is completely written in Python. I tried following these steps but in vain - <a href=\"http://code.google.com/p/python-for-android/wiki/BuildingModules\" rel=\"nofollow\">http://code.google.com/p/python-for-android/wiki/BuildingModules</a></p>\n\n<p>Any help will be appreciated ! Thank you.</p>\n"},{"tags":["python","image-processing","numpy","pygame"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":51,"score":0,"question_id":13215836,"title":"accessing each element in a numpy array","body":"<p>I'm attempting to remove stray white pixels from an alpha channel mask by looking at the adjacent pixels, but have been getting TypeEror: 'numpy.ndarray' object is not callable\nI made an array using pygame.surfarray: \n<code>alphachannel3d = pygame.surfarray.pixels3d(alphachannel)</code>\nthen attempt to step through it and change pixel values from white to black: \n<code>  if (alphachannel3d[x] == (0, 0, 0)) &amp; (alphachannel3d[x + 3] == (255, 255, 255)) &amp; (alphachannel3d[x -3]==(255, 255, 255)):\n    alphachannel3d[x] = (255, 255, 255)</code></p>\n\n<p>Here is the loop:</p>\n\n<pre><code>x=1\n\nwhile 1:\n\n  count = x\n  print 'count is', count\n\n  print 'waiting 5 seconds'\n  pygame.time.wait(5000)\n\n\n  img = cam.get_image()\n\n  imgarray = pygame.PixelArray(img)\n\n  alphachannelarray = basearray.compare(imgarray, distance=0.09, weights=(0.01, 0.01, 0.01))\n\n  alphachannel = alphachannelarray.make_surface()\n\n  alphachannel3d = pygame.surfarray.pixels3d(alphachannel)\n\n\n  if (alphachannel3d[x] == (0, 0, 0)) &amp; (alphachannel3d[x + 3] == (255, 255, 255)) &amp; (alphachannel3d[x -3]==(255, 255, 255)):\n    alphachannel3d[x] = (255, 255, 255)\n\n  alphachannel = pygame.surfarray.make_surface(alphachannel3d)\n  srfcScreen.blit(alphachannel, (0,0))\n  print 'screen blitted'\n\n  pygame.display.flip()\n  print 'display flipped'\n\n  x = x+1\n</code></pre>\n"},{"tags":["python","json","json-encode"],"answer_count":1,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":34,"score":4,"question_id":13251788,"title":"Why doesn't this custom json encoder work?","body":"<p>While trying out an <a href=\"http://stackoverflow.com/a/13249927/355230\">answer</a> that initially suggested using a custom <code>JSONEncoder</code> subclass to solve a printing problem, I discovered that what the <a href=\"http://docs.python.org/2/library/json.html#basic-usage\" rel=\"nofollow\">documentation</a> suggests doing in the <em>Extending JSONEncoder:</em> section does not appear to work. Here's my code which is patterned after the <code>ComplexEncoder</code> example also in that section of the docs.</p>\n\n<pre><code>import json\n\nclass NoIndent(object):\n    def __init__(self, value):\n        self.value = value\n\nclass MyEncoder(json.JSONEncoder):\n    def default(self, obj):\n        print 'MyEncoder.default() called'\n        if isinstance(obj, NoIndent):\n            return 'MyEncoder::NoIndent object'  # hard code string for now\n        else:\n            return json.JSONEncoder.default(self, obj)\n\ndata_structure = {\n    'layer1': {\n        'layer2': {\n            'layer3_1': NoIndent([{\"x\":1,\"y\":7},{\"x\":0,\"y\":4},{\"x\":5,\"y\":3},{\"x\":6,\"y\":9}]),\n            'layer3_2': 'string'\n        }\n    }\n}\n\nprint json.dumps(data_structure, default=MyEncoder)\n</code></pre>\n\n<p>And this is the traceback that results:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Files\\PythonLib\\Stack Overflow\\json_parsing.py\", line 26, in &lt;module&gt;\n    print json.dumps(data_structure, default=MyEncoder)\n  File \"E:\\Program Files\\Python\\lib\\json\\__init__.py\", line 238, in dumps\n    **kw).encode(obj)\n  File \"E:\\Program Files\\Python\\lib\\json\\encoder.py\", line 201, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n  File \"E:\\Program Files\\Python\\lib\\json\\encoder.py\", line 264, in iterencode\n    return _iterencode(o, 0)\nRuntimeError: maximum recursion depth exceeded\n</code></pre>\n"},{"tags":["python","performance","numpy","cython"],"answer_count":1,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":81,"score":8,"question_id":13241724,"title":"Assigning values to array slices is slow","body":"<p>I'm trying to optimize a Python algorithm by implementing it in Cython. My question is regarding a certain performance bottleneck that exists in the following code:</p>\n\n<pre><code>@cython.boundscheck(False) # turn off bounds-checking for entire function\ndef anglesToRGB( np.ndarray[double, ndim=2] y, np.ndarray[double, ndim=2] x ):\n\ncdef double angle\ncdef double Hp\ncdef double C\ncdef double X\ncdef np.ndarray[double, ndim=3] res = np.zeros([y.shape[0], y.shape[1], 3], dtype=np.float64)\n\nfor i in xrange(y.shape[0]):\n    for j in xrange(y.shape[1]):\n        angle = atan2( y[i,j], x[i,j] )*180.0/PI+180\n\n        C = sqrt(pow(y[i,j],2)+pow(x[i,j],2))/360.0 #Chroma\n        Hp = angle/60.0\n        X = C*(1-fabs( Hp%2-1))\n\n        C *= 255\n        X *= 255\n\n        if (0. &lt;= Hp &lt; 1.):\n            res[i,j,:] = [C,X,0]\n        elif (1. &lt;= Hp &lt; 2.):\n            res[i,j,:] = [X,C,0]\n        elif (2. &lt;= Hp &lt; 3.):\n            res[i,j,:] = [0,C,X]\n        elif (3. &lt;= Hp &lt; 4.):\n            res[i,j,:] = [0,X,C]\n        elif (4. &lt;= Hp &lt; 5.):\n            res[i,j,:] = [X,C,C]\n        else:\n            res[i,j,:] = [C,0,X]\n\nreturn res\n</code></pre>\n\n<p>I've identified the major bottleneck to be when i assign a list of values to a slice of the res array, \nlike with</p>\n\n<pre><code>res[i,j,:] = [C,X,0]\n</code></pre>\n\n<p>However, if i change the assignment to</p>\n\n<pre><code>res[i,j,0] = C\nres[i,j,1] = X\nres[i,j,2] = 0\n</code></pre>\n\n<p>Then the code runs orders of magnitude faster.\nTo me this is strange because surely the Cython compiler should be smart enough to do this for me? Or do i need to provide it with some hints first?\nI should note that changing the slicing to 0:3 instead of : and making the list of values a numpy array doesn't improve the performance.</p>\n\n<p>What i'd like to know is why this operation is killing performance so badly and if there's any way to solve it without having to sacrifice the convenient list and slice notation.</p>\n\n<p>Best regards</p>\n"},{"tags":["python","performance"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":75,"score":0,"question_id":13112527,"title":"Python performance issues","body":"<p>I built a simple gravity simulation shown here:</p>\n\n<p><img src=\"http://i.stack.imgur.com/8YzWt.jpg\" alt=\"enter image description here\"></p>\n\n<p>At first, I used a variable timestep, by calculating how much it takes for one update, and applying that to the next one - standard stuff.</p>\n\n<p>However, this method reduces determinism, and results can vary from simulation to simulation - something I definitely do not want.</p>\n\n<p>I figured that I should use a fixed time step (10 seconds), but then I noticed that the simulation would speed up and down in regular intervals (of around 1 second).</p>\n\n<p>Why is that happening? Does it have to do anything with Python itself?</p>\n\n<p><br /></p>\n\n<h1>The code</h1>\n\n<p>The main loop:</p>\n\n<pre><code>while run:\n    uni.update(10)\n\n    for event in pygame.event.get():\n        if event.type == QUIT:\n            run = False\n</code></pre>\n\n<p>The update method:</p>\n\n<pre><code>def update (self, dt):\n    self.time += dt\n\n    for b1, b2 in combinations(self.bodies.values(), 2):\n        fg = self.Fg(b1, b2)\n\n        if b1.position.x &gt; b2.position.x:\n            b1.force.x -= fg.x\n            b2.force.x += fg.x\n        else:\n            b1.force.x += fg.x\n            b2.force.x -= fg.x\n\n\n        if b1.position.y &gt; b2.position.y:\n            b1.force.y -= fg.y\n            b2.force.y += fg.y\n        else:\n            b1.force.y += fg.y\n            b2.force.y -= fg.y\n\n\n    for b in self.bodies.itervalues():\n        ax = b.force.x/b.m\n        ay = b.force.y/b.m\n\n        b.position.x += b.velocity.x*dt\n        b.position.y += b.velocity.y*dt\n\n        nvx = ax*dt\n        nvy = ay*dt\n\n        b.position.x += 0.5*nvx*dt\n        b.position.y += 0.5*nvy*dt\n\n        b.velocity.x += nvx\n        b.velocity.y += nvy\n\n        b.force.x = 0\n        b.force.y = 0\n</code></pre>\n"},{"tags":["python","query","autocomplete","combobox","pyqt4"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13197267,"title":"QSqlRelationalTableModel and autocomplete field (PyQt4)","body":"<p>I have created a single-field tableview using QSqlRelationalTableModel. The only field in this tableview is taken from a table (mysql) with a long list of names. What is the right way to create an autocomplete when I write a name in the field which is logically connected with a query \"like\".</p>\n\n<pre><code>self.model = QtSql.QSqlRelationalTableModel()\n\nself.model.setTable(\"archlibri\")\nself.model.setHeaderData(0, QtCore.Qt.Horizontal, \"ID\")\nself.model.setHeaderData(1, QtCore.Qt.Horizontal, \"Autore\")\nself.model.setHeaderData(2, QtCore.Qt.Horizontal, \"Titolo\")\nself.model.setRelation(1, QtSql.QSqlRelation(\"elAutori\", \"aID\", \"aNome\"))\nself.model.select()\n\ntabella.setModel(self.model)       \n\ntabella.setItemDelegate(QtSql.QSqlRelationalDelegate(tabella))\n</code></pre>\n\n<p>Tabella is a QTableView. The column \"Autore\" (column have relation delegate) is where i want add a autocomplete when i write a name</p>\n"},{"tags":["python","python-2.3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":21,"score":2,"question_id":13250899,"title":"how to rsh ssh using python 2.3","body":"<p>I would like to write a script that performs the following Linux commands sequence:</p>\n\n<ol>\n<li>rsh rr01 ( here the system will ask for password ) </li>\n<li>ssh rr02 ( here the system will ask for password again) </li>\n<li>activate my app on some file</li>\n</ol>\n\n<p>I was naively (and stupidly) tried to accomplish that with a simple os.system \nbear in mind I using python 2.3 and would like to avoid adding modules (if possible).</p>\n\n<p>Thanks in advance! </p>\n"},{"tags":["python","python-2.7","progress-bar","console-application"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13251299,"title":"Creating a progress bar/status in Python text console","body":"<p>I'm coding a small Python script, that checks the records of a few domains. This is how I do it:</p>\n\n<pre><code>if results.short == True:\n        isonlist = False\n        for dnsbls in L:\n                try:\n                        if  socket.gethostbyname(\"%s.%s\" % (ip_reversed(results.IP), dnsbls)).startswith(\"127\"):\n                                isonlist = True\n                except (socket.gaierror):\n                        pass\n        if isonlist == True:\n                print \"1\"\n        else:\n                print \"0\"\n\nelse:\n        pass\n</code></pre>\n\n<p>Right now it outputs 1 if it get's a valid record and 0 if it doesn't.</p>\n\n<p>Now, I'd like for it to show a progress bar, like when you use wget and the likes.\nTried doing it like this:</p>\n\n<pre><code>number = number + 1\n</code></pre>\n\n<p>But that yields me 1 2 3 4 and so forth.</p>\n"},{"tags":["python","dictionary"],"answer_count":5,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13250519,"title":"create a dictionary for letters","body":"<p>I have been trying to build a function to get letter frequencies from a string and store them in a dictionary.</p>\n\n<p>I have done something like that : </p>\n\n<pre><code>s=\"today the weather was really nice\"\n\ndef get_letter_freq(s):\n    for letter in(s):\n        x=letter.split()\n    f=dict()\n    for each_letter in x:\n        if f.has_key(x):\n                   f[x]+=1\n        else:\n                    f[x]=1\nprint f\n</code></pre>\n\n<p>Could you help me put things into order and find my mistakes?</p>\n\n<p>Why I get an error that my 'f' is not defined?</p>\n"},{"tags":["python","unicode","python-3.x","filenames"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13250997,"title":"Delete all files in directory with non utf-8 symbols","body":"<p>I have a set of data, but I need to work only with <code>utf-8</code> data, so I need to delete all data with non-<code>utf-8</code> symbols.</p>\n\n<p>When I try to work with these files, I receive:</p>\n\n<pre><code>UnicodeDecodeError: 'charmap' codec can't decode byte 0x8d in position 3062: character maps to &lt;undefined&gt; and UnicodeDecodeError: 'utf8' codec can't decode byte 0xc1 in position 1576: invalid start byte \n</code></pre>\n\n<p>My code </p>\n\n<pre><code>class Corpus:\n        def __init__(self,path_to_dir=None):\n                self.path_to_dir = path_to_dir if path_to_dir else []\n\n\n        def emails_as_string(self):\n                for file_name in os.listdir(self.path_to_dir):\n                        if not file_name.startswith(\"!\"):\n                                with io.open(self.add_slash(self.path_to_dir)+file_name,'r', encoding ='utf-8') as body:\n                                        yield[file_name,body.read()]                        \n\n        def add_slash(self, path):\n                if path.endswith(\"/\"): return path\n                return path + \"/\"\n</code></pre>\n\n<p>I recive error here <code>yield[file_name,body.read()]</code> and  here<code>list_of_emails = mailsrch.findall(text)</code>, but when I work with utf-8 all great.</p>\n"},{"tags":["python","json","haskell","casting","aeson"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":108,"score":3,"question_id":13247750,"title":"Navigating JSON objects in a generic way in Haskell","body":"<p>My goal is to write a program in Haskell that takes the name of a json file and interprets the rest of the arguments as a path to navigate that json file by and print the value navigated to. The problem is because JSON can contain multiple value types, I don't know how to make Haskell's type system understand what I want. Here is the Haskell code with the \"navigate\" function I'm not able to implement correctly:</p>\n\n<pre><code>import qualified Data.Aeson as A\nimport qualified Data.ByteString.Char8 as BS\nimport qualified Data.ByteString.Lazy.Char8 as BSL\nimport Data.List\nimport Data.Maybe\nimport System.Environment\n\nparse :: String -&gt; A.Value\nparse = fromJust . A.decode . BSL.pack\n\nisInteger xs = case reads xs :: [(Integer, String)] of\n    [(_, \"\")] -&gt; True\n    _ -&gt; False\n\nnavigate :: A.Value -&gt; String -&gt; String\nnavigate value [] = value\nnavigate value [x:xs]\n    | isInteger x = ??? -- value is an array, get the xth element of it.\n    | otherwise = ??? -- value is an map, x is a key in it.\n\nmain :: IO ()\nmain = do\n     [filename:path] &lt;- getArgs\n     contents &lt;- readFile filename\n     let d = parse contents\n     putStrLn (show (navigate d path))\n</code></pre>\n\n<p>For reference, here is how the same program would have been written in Python:</p>\n\n<pre><code>from json import load\nfrom sys import argv    \ndef navigate(obj, path):\n    if not path:\n        return obj\n    head, tail = path[0], path[1:]\n    return navigate(obj[int(head) if head.isdigit() else head], tail)    \nif __name__ == '__main__':\n    fname, path = argv[1], argv[2:]\n    obj = load(open(fname))\n    print navigate(obj, path)\n</code></pre>\n\n<p>The program would be run like this:</p>\n\n<pre><code>$ cat data.json\n{\"foo\" : [[1, 2, 3, {\"bar\" : \"barf\"}]]} \n$ python showjson.py data.json foo 0 3 bar\nbarf\n</code></pre>\n"},{"tags":["python","windows","console","clear","python-interpreter"],"answer_count":14,"favorite_count":22,"up_vote_count":39,"down_vote_count":0,"view_count":36006,"score":39,"question_id":517970,"title":"How to clear python interpreter console?","body":"<p>Like most Python developers, I typically keep a console window open with the Python interpreter running to test commands, dir() stuff, help() stuff, etc.</p>\n\n<p>Like any console, after a while the visible backlog of past commands and prints gets to be cluttered, and sometimes confusing when re-running the same command several times.  I'm wondering if, and how, to clear the Python interpreter console.</p>\n\n<p>I've heard about doing a system call and either calling <code>cls</code> on Windows or <code>clear</code> on Linux, but I was hoping there was something I could command the interpreter itself to do.</p>\n\n<p><strong>Note:</strong> I'm running on Windows, so Ctrl+L doesn't work.</p>\n"},{"tags":["python","coding-style"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":54,"score":-1,"question_id":13251192,"title":"About python function return value best practice","body":"<p>Suppose I'm writing a function in python, this function can either be success or raise exception.</p>\n\n<p>So which one shall I use:</p>\n\n<ol>\n<li>return</li>\n<li>return True</li>\n<li>no return</li>\n</ol>\n\n<hr>\n\n<p>Edit:</p>\n\n<p>Thanks for response. In this case I mean to ask if return Value have no further meaning, shall I still do a <code>return True</code> or something.</p>\n\n<p>The case I'm working on is to write thrift server-side function, where I hesitated whether to use <code>void</code> or <code>boolean</code> type in the service api.</p>\n"},{"tags":["python","windows-7","m2crypto"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":629,"score":0,"question_id":6158125,"title":"Is there an M2Crypto installer for Windows 7 64-bit?","body":"<p>Is there an M2Crypto Windows installer for Python 2.7 64-bit?  If not is there a reason why one cannot be built?</p>\n"},{"tags":["python","function","powershell","script"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":40,"score":-4,"question_id":13251235,"title":"Copy details from a website into excel using a script","body":"<p>I'm hoping you can help me. I'm looking to find a way that I can write a script that copies details from a website and inserts them into a excel spreadsheet (for example) automatically.</p>\n\n<p>Thanks,</p>\n\n<p>Steven</p>\n"},{"tags":["python","python-2.7","bytearray"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":38,"score":0,"question_id":13251062,"title":"Bytearray in Python 2 is not behaving as expected","body":"<p>I am playing around with the bytearray type in python 2.7.3 and noticed this weird behaviour:</p>\n\n<p>Passing an integer argument to its constructor creates a bytearray of size equal to the integer filled with zero bytes:</p>\n\n<pre><code>&gt;&gt;&gt; s = bytearray(15)\n&gt;&gt;&gt; s\nbytearray(b'\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00')\n</code></pre>\n\n<p>However, if I attempt to create a bytearray with bytes set manually by me, <strong>the constructor seems to ignore/skip some of the bytes I create</strong>:</p>\n\n<pre><code>&gt;&gt;&gt; s = bytearray(b'\\x34\\x78\\x98\\xFF\\xFF')\n&gt;&gt;&gt; s\nbytearray(b'4x\\x98\\xff\\xff')\n</code></pre>\n\n<p><em><strong>Why is this happening? Is this a bug? Or am I missing something?</em></strong> <a href=\"http://docs.python.org/2.7/library/functions.html#bytearray\" rel=\"nofollow\">The python documentation is not very enlightening</a>.</p>\n"},{"tags":["python","pandas"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13250046,"title":"Pandas csv-import: Keep leading zeros in a column","body":"<p>I am importing study data into a Pandas data frame using <code>read_csv</code>. </p>\n\n<p>My subject codes are 6 numbers coding, among others, the day of birth. For some of my subjects this results in a code with a leading zero (e.g. \"010816\").</p>\n\n<p>When I import into Pandas, the leading zero is stripped of and the column is formatted as <code>int64</code>.</p>\n\n<p>Is there a way to import this column unchanged maybe as a string? </p>\n\n<p>I tried using a custom converter for the column, but it does not work - it seems as if the custom conversion takes place before Pandas converts to int.</p>\n"},{"tags":["python","class","inheritance","subclass","pandas"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13250499,"title":"Attributes to a subclass of pandas.DataFrame disappear after pickle","body":"<p>I am trying to add attributes to a subclass of pandas.DataFrame and they disappear after pickling and unpickling:</p>\n\n<pre><code>import cPickle\nimport pandas as pd\n\nclass MyClass(pd.DataFrame):\n    def __init__(self):\n        super(MyClass, self).__init__()\n        self.bar = 1\n\nmyc = MyClass()\nwith open('myc.pickle', 'wb')as myfile:\n    cPickle.dump(myc,myfile)\nwith open('myc.pickle', 'rb')as myfile:\n    b = cPickle.load(myfile)\nprint b.bar\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"test_df.py\", line 14, in &lt;module&gt;\nprint b.bar\nFile \"C:\\Python27\\lib\\site-packages\\pandas\\core\\frame.py\", line 1771, in __getattr__\n(type(self).__name__, name))\nAttributeError: 'MyClass' object has no attribute 'bar'\n</code></pre>\n\n<p>Any idea how I can add attributes safely?</p>\n"},{"tags":["python","reload","ipython"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13250796,"title":"ipython %load_ext missing","body":"<p>I try to set autoreload to my development process, but it seems, that the method I learned from <a href=\"http://stackoverflow.com/questions/5364050/reloading-submodules-in-ipython\">that</a> thread is not working with my versions.\nI tried </p>\n\n<ol>\n<li>ipython -V: 0.10 and python -V Python 2.6.6</li>\n<li>ipython -V: 0.10.1 and python -V Python 2.7.3</li>\n</ol>\n\n<p>but </p>\n\n<pre><code>%load_ext autoreload\n%autoreload 2\n</code></pre>\n\n<p>returns </p>\n\n<pre><code>ERROR: Magic function `load_ext` not found.\n</code></pre>\n\n<p>which is kind of obvious, because</p>\n\n<pre><code>In [1]: %lsmagic\nAvailable magic functions:\n%Exit  %Pprint  %Quit  %alias  %autocall  %autoindent  %automagic  %bg  %bookmark  %cd          %clear  %color_info  %colors  %cpaste  %debug  %dhist  %dirs  %doctest_mode  %ed  %edit  %env      %exit  %hist  %history  %logoff  %logon  %logstart  %logstate  %logstop  %lsmagic  %macro  %magic  %p  %page  %paste  %pdb  %pdef  %pdoc  %pfile  %pinfo  %popd  %profile  %prun  %psearch  %psource  %pushd  %pwd  %pycat  %quickref  %quit  %r  %rehash  %rehashx  %rep  %reset  %run  %runlog  %save  %sc  %store  %sx  %system_verbose  %time  %timeit  %unalias  %upgrade  %who  %who_ls  %whos  %xmode\n</code></pre>\n\n<p>this method is not available. How can I install other magic functions? </p>\n"},{"tags":["python","python-3.x","pygame","portable-executable"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":48,"score":0,"question_id":13219237,"title":"portable python 3.x and pygame","body":"<p>I am looking for version (custom/beta?) of portable python that is python 3.x and includes pygame.  I know pygame hasn't been fully converted to 3.x yet, but for what I need it for it works perfectly.</p>\n"},{"tags":["c++","python","functional-programming","lazy-evaluation"],"answer_count":5,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":158,"score":5,"question_id":13144280,"title":"Lazy transform in C++","body":"<p>I have the following Python snippet that I would like to reproduce using C++:</p>\n\n<pre><code>from itertools import count, imap\n\nsource = count(1)\npipe1 = imap(lambda x: 2 * x, source)\npipe2 = imap(lambda x: x + 1, pipe1)\nsink = imap(lambda x: 3 * x, pipe2)\nfor i in sink:\n    print i\n</code></pre>\n\n<p>I've heard of <a href=\"http://www.boost.org/doc/libs/1_51_0/libs/phoenix/doc/html/index.html\" rel=\"nofollow\">Boost Phoenix</a>, but I couldn't find an example of a lazy <code>transform</code> behaving in the same way as Python's <code>imap</code>. </p>\n\n<p>Edit: to clarify my question, the idea is not only to apply functions in sequence using a <code>for</code>, but rather to be able to use algorithms like <code>std::transform</code> on infinite generators. The way the functions are composed (in a more functional language like dialect) is also important, as the next step is function composition.</p>\n\n<p>Update: thanks bradgonesurfing, David Brown, and Xeo for the amazing answers! I chose Xeo's because it's the most concise and it gets me right where I wanted to be, but David's was very important into getting the concepts through. Also, bradgonesurfing's tipped Boost::Range :).</p>\n"},{"tags":["python","google-app-engine","memcached"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":79,"score":2,"question_id":13234556,"title":"Using memcache.add() instead of set()","body":"<p>Usually I do:</p>\n\n<pre><code>if not memcache.get('mykey'):\n   memcache.set('mykey', item)\n</code></pre>\n\n<p>However, today I saw <code>memcache.add()</code>, which appears to add an item only if it doesn't already exist. So is this equivalent to the code I have above? Can I just replace the code above with <code>memcache.add()</code>?</p>\n\n<p>Also, and more importantly, I'm using AppStats, and under RPC Call Traces, I get to see if my request calls <code>memcache.set()</code> or <code>get()</code> or <code>datastore.put()</code> or <code>get()</code>. When using the 2 lines of code above, I don't see anything for <code>memcache.set()</code>, which is expected. However, using only <code>memcache.add()</code> (without checking if the item already exists) always calls <code>memcache.set()</code>, even though <code>memcache.add()</code> returned false (meaning a new item was not inserted). Why is this the case?</p>\n"},{"tags":["python","django","django-database"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":13248593,"title":"django database delete specific number of entries","body":"<p>How to delete specific number of entries from the database?\nI did something like this</p>\n\n<pre><code>EntriesToDelete=Statusmessages.objects.filter(time__lt=date)[:30000]\nEntriesToDelete.delete()\n</code></pre>\n\n<p>But I get an error which says:\n<code>AssertionError. Cannot use 'limit' or 'offset' with delete</code>.</p>\n\n<p>How can I specify the number of entries to be deleted.</p>\n"},{"tags":["python","input","progress-bar","tk","ttk"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":59,"score":2,"question_id":13157214,"title":"Ttk progress-bar and general tk input","body":"<p>I'm using python 2.7 and TK to make a gui which accesses text files and uses data in them to do many things, but the one relevant here is sending a gchat message.\nCurrently, I have everything working, the point I need some help with is when I call my module to send the message, the message is sent perfectly, although I wanted the user to have an indication of the process happening, so I created a ttk.progressbar. but there is a few things I'd like to improve on this:</p>\n\n<p>1) I would like to change the appearance of the actual bar, upon viewing the source files, I couldn't see any options, and when I googled the problem the only fix I could find was to change the source code, I'm pretty sure this would only change it when ran with my files, then when the user runs it, it would be the standard? preferably, I'd like the bar to be transparent, although blue would work, I've seen some people having blue as a state in window machines, windows is my main concern, so if I could get say, blue in windows, but native elsewhere, that would be fine.</p>\n\n<p>2)this one is hopefully a bit more simple, but when the button is pressed it takes values from user input which can still be changed, maybe altering the outcome of the function, is there anyway to stop all input to a tk window, then resume when the function is complete?</p>\n\n<p>below is what I have so far, thank you for the help</p>\n\n<pre><code>            self.progressbar = ttk.Progressbar(self.gcTableButtonsFrame, length = 70, orient=HORIZONTAL, mode ='determinate')\n            self.progressbar.grid(column = 0, row = 0, sticky = 'n s')\n\n            #we then pass through the extension and the string 'test' through this fnction from the gchat module which will then send a \n            #gchat message to the extension passed through\n            self.bytes = 0\n            self.maxbytes = 0\n            self.start()\n            self.t = thread.start_new_thread(gchat.sendGChatMessage,(text, \"test\"))\n        except IndexError:\n            tkMessageBox.showinfo(\"Invalid Entry\", \"Please first select an Entry to send to\")\n\ndef start(self):\n    self.progressbar[\"value\"] = 0\n    self.maxbytes = 50000\n    self.progressbar[\"maximum\"] = 50000\n    self.read_bytes()\n\ndef read_bytes(self):\n    '''simulate reading 500 bytes; update progress bar'''\n    selection2 = self.gcTable.selection()\n    self.bytes += 700\n    self.progressbar[\"value\"] = self.bytes\n    if self.bytes &lt; self.maxbytes:\n            # read more bytes after 100 ms\n        Tk.after(self.mainPyWindow, 100, self.read_bytes)\n    else:\n        tkMessageBox.showinfo(\"Message Sent\", \"A GChat message has been sent to \" + self.gcTable.item(selection2, 'values')[1])\n        self.progressbar.destroy()\n</code></pre>\n"},{"tags":["python","xml"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":1218,"score":2,"question_id":3852968,"title":"How to convert XML to Dict","body":"<p>I want to find some great solution to convert XML to dict and vice versa in python</p>\n"},{"tags":["python","google-app-engine","gae-datastore"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":31,"score":0,"question_id":13241503,"title":"Which GAE Database Property Fits a Tag Property?","body":"<p>I want to have a property on a database model of mine in Google App Engine and I am not sure which category works the best.  I need it to be a tag cloud similar to the Tags on SO.  Would a text property be best or should I use a string property and make it repeated=True.</p>\n\n<p>The second seems best to me and then I can just divide the tags up with a comma as a delimiter.  My goal is to be able to search through these tags and count the total number of each type of tag.</p>\n\n<p>Does this seem like a reasonable solution?</p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":64,"score":1,"question_id":13250256,"title":"Circular Programming in Python (corecursion) - is it possible?","body":"<p>I know Python has some lazy implementations, and as such, I was wondering if it is possible to use circular programming in Python.</p>\n\n<p>If it isn't, why?</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":29,"score":-1,"question_id":13250382,"title":"how add python class to a xml parsing program","body":"<p>I have a program that will take input xml and print same xml as output. How can i implement class and method for that ?</p>\n\n<pre><code>import xml.etree.ElementTree as ET\nimport sys   \ndoc       = ET.parse(\"users.xml\")\nroot      = doc.getroot()\nroot_new  = ET.Element(\"users\") \nfor child in root:\n    username             = child.attrib['username']\n    password             = child.attrib['password']   \n    # create \"user\" here\n    user    = ET.SubElement(root_new, \"user\") \n    user.set(\"username\",username)               \n    user.set(\"password\",password) \n    #checking attribute for skipping KeyError\n    if 'remote_access' in child.attrib:\n        remote_access   = child.attrib['remote_access']\n        user.set(\"remote_access\",remote_access) \n    for g in child.findall(\"group\"):\n        # create \"group\" here\n        group     = ET.SubElement(user,\"group\")  \n        if g.text != \"lion\":\n            group.text = g.text \ntree = ET.ElementTree(root_new)\ntree.write(sys.stdout)\n</code></pre>\n\n<p>How to convert this to class concept . Thanks in advance.</p>\n"},{"tags":["python","xml","parsing","minidom"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":88,"score":0,"question_id":9729646,"title":"Python minidom unwanted whitespace","body":"<p>I'm using Python to write data into .xml files. I have this file named statistics.xml and everytime I call my method 'writeIntoXml()' it should add data to that statistics xml-file. Now Python does this perfectly, the only problem is it adds unwanted whitespace between all of my elements that were in the file before I wrote the new data into it. Like this:</p>\n\n<pre><code>&lt;AantalTicketsPerUur&gt;\n    &lt;Dag datum=\"2012-03-16\"&gt;\n        &lt;Aantal_tickets Aantal=\"24\" uurinterval=\"0u-1u\"/&gt;\n        &lt;Aantal_tickets Aantal=\"68\" uurinterval=\"1u-2u\"/&gt;\n        &lt;Aantal_tickets Aantal=\"112\" uurinterval=\"2u-3u\"/&gt;\n        &lt;Aantal_tickets Aantal=\"98\" uurinterval=\"3u-4u\"/&gt;\n    &lt;/Dag&gt;\n&lt;/AantalTicketsPerUur&gt;\n</code></pre>\n\n<p>becomes this (the elements without that whitespace inbetween are the new data): </p>\n\n<pre><code>&lt;AantalTicketsPerUur&gt;\n\n\n    &lt;Dag datum=\"2012-03-16\"&gt;\n\n\n        &lt;Aantal_tickets Aantal=\"24\" uurinterval=\"0u-1u\"/&gt;\n\n\n        &lt;Aantal_tickets Aantal=\"68\" uurinterval=\"1u-2u\"/&gt;\n\n\n        &lt;Aantal_tickets Aantal=\"112\" uurinterval=\"2u-3u\"/&gt;\n\n\n        &lt;Aantal_tickets Aantal=\"98\" uurinterval=\"3u-4u\"/&gt;\n\n\n    &lt;/Dag&gt;\n\n\n    &lt;Dag datum=\"2012-03-16\"&gt;\n        &lt;Aantal_tickets Aantal=\"24\" uurinterval=\"0u-1u\"/&gt;\n        &lt;Aantal_tickets Aantal=\"68\" uurinterval=\"1u-2u\"/&gt;\n        &lt;Aantal_tickets Aantal=\"112\" uurinterval=\"2u-3u\"/&gt;\n        &lt;Aantal_tickets Aantal=\"98\" uurinterval=\"3u-4u\"/&gt;\n    &lt;/Dag&gt;\n&lt;/AantalTicketsPerUur&gt;\n</code></pre>\n\n<p>How can I solve this? NOTE: I DO USE THE .toprettyxml() method</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["python","windows","sqlite3"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":13249211,"title":"Upgrade sqlite3 version using python 2.7.3 and pysqlite2 2.6.3","body":"<p>Good day.</p>\n\n<p>I have been learning python and sqlite recently and have trouble installing the latest version of sqlite3 (3.7.14.1). I am using python 2.7.3 in windows 7 and have installed the latest pysqlite2 version (2.6.3) using the windows installer. I have used the following code to import pysqlite and check the versions and these are the results:</p>\n\n<pre><code>&gt;&gt;&gt; from pysqlite2 import dbapi2 as sqlite3\n&gt;&gt;&gt; sqlite3.version\n'2.6.3'\n&gt;&gt;&gt; sqlite3.sqlite_version\n'3.7.6.2'\n</code></pre>\n\n<p>Based on the code above, the sqlite3 version used is an older one. I have downloaded the latest sqlite3.dll and have overwritten the one found in Python27\\DLLs\\ directory. But when I run sqlite3.sqlite_version, it still gives me the old version. However, when using the default python sqlite3 module it shows an old version of the module (2.6.0) and the latest version of the sqlite3.dll I just copied. See code below:</p>\n\n<pre><code>&gt;&gt;&gt; import sqlite3\n&gt;&gt;&gt; sqlite3.version\n'2.6.0'\n&gt;&gt;&gt; sqlite3.sqlite_version\n'3.7.14.1'\n</code></pre>\n\n<p>My question is, how do I upgrade pysqlite2 2.6.3's sqlite3 3.7.14.1? Can anyone help me?</p>\n\n<p>Thank you.</p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13250232,"title":"Else clause with for an while","body":"<p>You can use the <code>else</code> clause with <code>for</code> and <code>while</code> loops (<a href=\"http://docs.python.org/2/reference/compound_stmts.html#for\" rel=\"nofollow\">docs</a>).</p>\n\n<pre><code>def has_odd(l):      \n  for num in l:\n    if num % 2 != 0:\n      print \"odd's in the list\"\n      break\n  else:\n    print \"no odd's in the list\"\n</code></pre>\n\n<p>This construct helps to concolidate the code as opposed to the following equivalent:</p>\n\n<pre><code>def has_odd(l):\n  is_odd = False\n  for num in l:\n    if num % 2 != 0:\n      is_odd = True\n      break\n  if is_odd:\n    print \"odd's in the list\"\n  else:\n    print \"no odd's in the list\"\n</code></pre>\n\n<p>Yet, you don't see it used very often. What are the other use cases for the construct? </p>\n"},{"tags":["php","python","ruby","server-side"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":4,"view_count":51,"score":-3,"question_id":13250321,"title":"Third-party web developers. Should I care which server-side language they use (ie PHP, Ruby, Python, etc)?","body":"<p>I'm working a project where an external development team will be asked to build a beta of a new web service. Even though it's a beta as well as being functionally operable it also needs to demonstrate robustness in design; security; scalability and extensibility.</p>\n\n<p>I've personally hacked around in various languages (PHP, Javascript, C, J2ME, SQL, UNIX shells, etc), but I don't consider myself a professional programmer, so I'm interested in others opinions on whether I should even be concerned by the language chosen or if I should focus on the relevant management (PM approach, source code control, testing, etc)?</p>\n\n<p>Thanks,\nPeter</p>\n"},{"tags":["c#","python","arcgis","arcobjects","arcpy"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":385,"score":1,"question_id":9910461,"title":"how to set input and output parameters in arcobjects using c#, which call python script?","body":"<p>I have written a python script to geoprocessing ArcGIS data and set the workspace, input and output parameters inside the python code as: </p>\n\n<pre><code>env.workspace = arcpy.GetParameterAsText(0)\n# input feature class \ninFeatures = arcpy.GetParameterAsText(1)\n# output feature class\nTransect_featureclass = arcpy.GetParameterAsText(2)\n</code></pre>\n\n<p>Since I am new to ArcObjects using c# in Visual Studio 2010, I am trying to use ArcMap Add-in to add a button into the ArcMap desktop. But I didn't know how to call this python script from c#, and get something like a textbox popup and ask the information about the input and output parameters path. Since I directly call the python, it didn't work with the <code>GetParameterAsText</code> command inside the python code. </p>\n\n<p>I highly appreciate if someone there can help on this case. Thanks in advance.</p>\n"},{"tags":["python","django","apache","concurrency","mod-wsgi"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13171860,"title":"How django handles simultaneous requests with concurrency over global variables?","body":"<p>I have a django instance hosted via apache/mod_wsgi. I use <code>pre_save</code> and <code>post_save</code> signals to store the values before and after save for later comparisons. For that I use global variables to store the <code>pre_save</code> values which can be accessed in the <code>post_save</code> signal handler.</p>\n\n<p>My question is, if two requests A and B come together simultaneously requesting a same web service, will it be concurrent? The B should not read the global variable which is written by A and vice versa.</p>\n\n<p>PS: I don't use any threading <code>Lock</code> on variables.</p>\n"},{"tags":["python","pyopengl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13225374,"title":"Rendering 3d shapes in pyopengl","body":"<p>Hi Im looking for a tutorial on how to render 3d shapes in pyopengl and pygame. Ive found very few helpful resources, it would be greatly appreciated if you could point me to some.</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":50,"score":3,"question_id":13249481,"title":"Dynamic import of several names from a module","body":"<p>I am trying to import some symbols from one package into another. I have tried the following, with no luck as both are syntax errors.</p>\n\n<pre><code>from signal import SIG*    \n</code></pre>\n\n<p>or</p>\n\n<pre><code>import _signal\nimport _re\nfrom signal import [i for i in dir(_signal) if _re.search(\"^SIG\",i)!=None ]\n</code></pre>\n\n<p>Is there a way to do this.</p>\n"},{"tags":["python","comments"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":201,"score":1,"question_id":10682565,"title":"comment out nested triple quotes","body":"<p>In python to comment-out multiple  lines we use triple quotes</p>\n\n<pre><code>def x():\n   \"\"\"This code will \n      add 1 and 1 \"\"\"\n   a=1+1\n</code></pre>\n\n<p>but what if I have to comment out a block of code which already contains lot of other comment out blocks (triple quote comments). For example if I want to comment out this function fully..</p>\n\n<pre><code>\"\"\"\ndef x():\n   \"\"\"This code will \n      add 1 and 1 \"\"\"\n   a=1+1\n\"\"\"\n</code></pre>\n\n<p>This doesn't work. How can I comment out such blocks of code.</p>\n"},{"tags":["python","google-app-engine"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13246764,"title":"How to add a library to to my Google App Engine project?","body":"<p>In response to <a href=\"http://code.google.com/p/googleappengine/issues/detail?can=2&amp;start=0&amp;num=100&amp;q=&amp;colspec=ID%20Type%20Component%20Status%20Stars%20Summary%20Language%20Priority%20Owner%20Log&amp;groupby=&amp;sort=&amp;id=2749\" rel=\"nofollow\">this bug at Google</a> I am planning to replace the webob library with the newest release, WebOb version 1.2.3, which is rumored to fix the bug. I have downloaded the project from their website, and just adding it to the project root does not fix the problem. The folder with the downloaded project is named \"WebOb-1.2.3\"</p>\n\n<p>What needs to be done in App.yaml to include this newest version that i upload to the server?</p>\n\n<p>I am running python.</p>\n"},{"tags":["python"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":45,"score":2,"question_id":13243163,"title":"how to replace %s with one variable in python","body":"<p>I have a string like</p>\n\n<pre><code>strTemp='i don\\'t want %s repeat the %s variable again %s and again %s'%('aa','aa','aa','aa')\n</code></pre>\n\n<p>I want to replace all the %s with 'aa', so I have to repeat the 'aa' for many times, how can I tell the program that I want to replace all the %s just with the same variable, so I needn't type the variable for times</p>\n"},{"tags":["python","multithreading"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":46,"score":3,"question_id":13244336,"title":"Multithreaded Access to Python bytearray","body":"<p>It seems that since access to NumPy array data doesn't require calls into the Python interpreter, C extensions can manipulate these arrays after releasing the GIL. For instance, in <a href=\"http://stackoverflow.com/questions/8824739/global-interpreter-lock-and-access-to-data-eg-for-numpy-arrays\">this thread</a>.</p>\n\n<p>The built-in Python type bytearray supports the <a href=\"http://docs.python.org/3/c-api/buffer.html\" rel=\"nofollow\">Buffer Protocol</a>, one member of which is</p>\n\n<blockquote>\n  <p>void <strong>*buf</strong></p>\n  \n  <p>A pointer to the start of the logical structure described by the\n  buffer fields. [...]\n  For contiguous arrays, the value points to the beginning of the memory\n  block.</p>\n</blockquote>\n\n<p>My question is, can a C extension manipulate this <strong>buf</strong> after releasing the GIL (Py_BEGIN_ALLOW_THREADS) since accessing it no longer requires calls to the Python C API? Or does the nature of the Python garbage collector forbid this, since the bytearray, and its buf, might be moved during execution?</p>\n"},{"tags":["python","regex","parsing"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":52,"score":2,"question_id":13240119,"title":"Parsing single or double quotes and allow for escaped characters using regular expressions (in Python)","body":"<p>I have input that looks like a list of arguments:</p>\n\n<pre><code>input1 = '''\ntitle=\"My First Blog\" author='John Doe'\n'''\n</code></pre>\n\n<p>The values can be surrounded by single or double quotes, however, escaping is also allowed:</p>\n\n<pre><code>input2 = '''\ntitle='John\\'s First Blog' author=\"John Doe\"\n'''\n</code></pre>\n\n<p>Is there a way to use regular expressions to extract the key value pairs accounting for either single or double quotes and escaped quotes?</p>\n\n<p>Using python, I can use the following regular expression and handle the non-escaped quotes:</p>\n\n<pre><code>rex = r\"(\\w+)\\=(?P&lt;quote&gt;['\\\"])(.*?)(?P=quote)\"\n</code></pre>\n\n<p>The returns are then:</p>\n\n<pre><code>import re\nre.findall(rex, input1)\n[('title', '\"', 'My First Blog'), ('author', \"'\", 'John Doe')]\n</code></pre>\n\n<p>and</p>\n\n<pre><code>import re\nre.findall(rex, input2)\n[('title', \"'\", 'John'), ('author', '\"', 'John Doe')]\n</code></pre>\n\n<p>The latter being incorrect. I can't figure out how to handle escaped quotes--assumedly in the (.*?) section. I've been working with the solution in the posted answers on <a href=\"http://stackoverflow.com/questions/5452655/python-regex-to-match-text-in-single-quotes-ignoring-escaped-quotes-and-tabs-n\">Python regex to match text in single quotes, ignoring escaped quotes (and tabs/newlines)</a> to no avail.</p>\n\n<p>Technically, I don't need findall to return the quote character--rather just the key/value pairs--but that is easily dealt with.</p>\n\n<p>Any help would be appreciated! Thanks!</p>\n"},{"tags":["python","osx","wxpython","virtualenv"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13249880,"title":"Why are Python builds suddenly not Framework builds when using virtualenv?","body":"<p>I've installed Python 2.7 as a Framework build on my Mac. I've installed and confirmed that wxPython works with this Python build. But when I create a virtual environment with virtualenv, the resulting Python executable isn't a Framework build, or at least not according to wxPython:</p>\n\n<pre>This program needs access to the screen.\nPlease run with a Framework build of python, and only when you are\nlogged in on the main display of your Mac.</pre>\n\n<p>Any ideas?</p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":84,"score":3,"question_id":13219857,"title":"Parse python setup file","body":"<p>I need to write a python script that read and parse setup python file.\nsetup contain some variables and function calls.</p>\n\n<p>example:</p>\n\n<pre><code>setup.py\nx = 5\nmylist [ 1, 2, 3]\nmyfunc(4)\nmyfunc(5)\nmyfunc(30)\n\n\nmain.py\n.\nparse_setup('setup.py')\n.\n</code></pre>\n\n<p>I would like parse the setup file and \"see\" what kind of variables were defined and what kind of function calls.\nsince the setup file in written in python, I was thinking that the easiest thing would be to dynamically import the setup file (dynamically because setup file path is the input for main).</p>\n\n<p>the problem is that import fails since <code>myfucn()</code>, called in <code>setup.py</code>, is not defined.</p>\n\n<p>is there a way for me to intercept the <code>myfunc()</code> calls in <code>setup.py</code> and execute my own function defined in <code>main.py</code>?</p>\n\n<p>what if the function I want to execute is a member function?</p>\n\n<p>can anyone think of a better way for extracting the data in the setup file, I really don't want to read it line by line.</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","django","dynamic","django-models","models"],"answer_count":0,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":40,"score":1,"question_id":13070424,"title":"django-mutant creating models in django-admin","body":"<p>I started experimenting with <code>django-mutant 0.0.2</code> (on <code>django 1.4.2</code>), but due to the lack of documentation I got almost nowhere. The way I understood by the project description I could use it to create my models dynamically, so I thought I can wire it with the <code>django-admin</code> interface, so I can create the models and define all it's fields there. I saw some other alternatives like <code>django-eav</code>, <code>dynamo</code>, Will Hardy's <code>dynamic-models</code>, etc. but it sounds like this is the best implementation until now, so I thought I should use this.</p>\n\n<p>I've put this in <code>settings.py</code>:</p>\n\n<pre><code>INSTALLED_APPS = (\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.sites',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'django.contrib.admin',\n    'south',\n    'polymodels',\n    'mutant',\n    'mutant.contrib.boolean',\n    'mutant.contrib.temporal',\n    'mutant.contrib.file',\n    'mutant.contrib.numeric',\n    'mutant.contrib.text',\n    'mutant.contrib.web',\n    'mutant.contrib.related',\n    'dynamodels'   # this is the name of my testapp\n)\n</code></pre>\n\n<p>I opened up the source of <code>django-mutant</code> to figure out what should I do, and I thought it's enough to import the <code>mutant.models.ModelDefinition</code> and <code>mutant.models.FieldDefinition</code> into my <code>admin.py</code> and register them, so I tried this:</p>\n\n<pre><code>from django.contrib import admin\n\nfrom mutant import models\n\n\nclass ModelDefinitionAdmin(admin.ModelAdmin):\n    pass\n\nadmin.site.register(models.ModelDefinition, ModelDefinitionAdmin)\n\n\nclass FieldDefinitionAdmin(admin.ModelAdmin):\n    pass\n\nadmin.site.register(models.FieldDefinition, FieldDefinitionAdmin)\n</code></pre>\n\n<p>After a syncdb, I got it running, and I got a \"mutant\" section in my admin interface, inside it a \"Models definition\" and \"Fields\". I added a model successfully, although I couldn't specify any appname that is in the list of <code>INSTALLED_APPS</code>. Adding a field failed badly, for it's <code>Model def</code> parameter I did choose the model I created before(it was the only one on the list), and I did choose \"Integer field definition\" for <code>Content type</code>. Hitting the save button gave me this:</p>\n\n<pre><code>NotImplementedError at /admin/mutant/fielddefinition/add/\n\nNo exception supplied\n...\n...\n/home/user/dev/virenvs/dynamicmodels/lib/python2.6/site-packages/django_mutant-0.0.2-py2.6.egg/mutant/models/field/__init__.py in save\n        return super(FieldDefinition, self).save(*args, **kwargs) ...\n\n/home/user/dev/virenvs/dynamicmodels/lib/python2.6/site-packages/django_polymodels-1.0.1-py2.6.egg/polymodels/models.py in save\n        return super(BasePolymorphicModel, self).save(*args, **kwargs) ...\n\n/home/user/dev/virenvs/dynamicmodels/lib/python2.6/site-packages/django_mutant-0.0.2-py2.6.egg/mutant/models/model/__init__.py in save\n        self.model_def.model_class(force_create=True) ...\n\n/home/user/dev/virenvs/dynamicmodels/lib/python2.6/site-packages/django_mutant-0.0.2-py2.6.egg/mutant/models/model/__init__.py in model_class\n            model_class = self._create_model_class(existing_model_class) ...\n\n/home/user/dev/virenvs/dynamicmodels/lib/python2.6/site-packages/django_mutant-0.0.2-py2.6.egg/mutant/models/model/__init__.py in _create_model_class\n        attrs = self.get_model_attrs(existing_model_class) ...\n\n/home/user/dev/virenvs/dynamicmodels/lib/python2.6/site-packages/django_mutant-0.0.2-py2.6.egg/mutant/models/model/__init__.py in get_model_attrs\n                            for f in self.fielddefinitions.select_subclasses())) ...\n\n/home/user/dev/virenvs/dynamicmodels/lib/python2.6/site-packages/django_mutant-0.0.2-py2.6.egg/mutant/models/model/__init__.py in &lt;genexpr&gt;\n                            for f in self.fielddefinitions.select_subclasses())) ...\n\n/home/user/dev/virenvs/dynamicmodels/lib/python2.6/site-packages/django_mutant-0.0.2-py2.6.egg/mutant/models/field/__init__.py in field_instance\n        cls = self.get_field_class() ...\n\n/home/user/dev/virenvs/dynamicmodels/lib/python2.6/site-packages/django_mutant-0.0.2-py2.6.egg/mutant/models/field/__init__.py in get_field_class\n            raise NotImplementedError \n</code></pre>\n\n<p>So it may not be the way I should define my fields (or even models?).. On the project's page there is a snippet which subclasses the <code>FieldDefinition</code> class, creating a DateFieldDefinition, if I put that snippet into my <code>models.py</code> and register that class in my admin, I can add any type of fields successfully. Does it mean I have to subclass all field types I want to use to be able to create them in the admin? Are they actually bound to my Model when I create them this way? Is there a working example somewhere to show at least the basics?\nSorry this was the shortest version I could came up with, any suggestion would be appreciated.</p>\n\n<p><strong>UPDATE:</strong>\nI made a mistake in specifying the version I was trying, I got the NotImplementedError for the latest dev version(which is also 0.0.2 by the way), but when I tried the real 0.0.2 got from PyPi the same way as the dev, I got a form-error without an error-message, but something failed at validation definitely. So generally I'm not closer to the solution.</p>\n\n<p><strong>UPDATE2:</strong>\nI registered mutant's base field types dynamically in the admin, and I am able now to add/change/delete models and fields with this admin snippet:</p>\n\n<pre><code>from django.contrib import admin\n\nfrom mutant import models\n\nfor field_type in models.FieldDefinitionBase._field_definitions.values():\n    attrs = {'model': field_type}\n    FieldDefAdmin = type('{0}Admin'.format(field_type.__name__),\n                         (admin.ModelAdmin,),\n                         attrs)\n    admin.site.register(field_type, FieldDefAdmin)\n\n\nclass ModelDefinitionAdmin(admin.ModelAdmin):\n    model = models.ModelDefinition\n\nadmin.site.register(models.ModelDefinition, ModelDefinitionAdmin)\n</code></pre>\n\n<p>However when I inspect the actual data in my database from the mysql console for example, my table is not present in the database. There are mutant's tables, and they contain the entries about my model, and my fields, but I thought once the dynamic model class is constructed, it will be also written to the database as it is.</p>\n\n<p><strong>UPDATE3:</strong>\nActually I was wrong, the table is found in my database, it's just prefixed with \"mutant_\" so I didn't recognize it's there. Looks like this will be a valid method to work with it, although to make a decent user-friendly interface to operate with it will require more work.</p>\n"},{"tags":["python","qc"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13249697,"title":"How to Access QC Python VAPI-XP instance Parameters during run time (QC test lab)","body":"<p>I have a Python VAPi-XP script <strong>QCPythonTest</strong> in QC test lab having parameter \"Provider\"\nThere are 5 instances of this script within qc test lab with different parameter value in each instance. </p>\n\n<p>Iam executing script from QC itself , iam struggling to get the parameter actual value during run time.</p>\n\n<p>i know we can set the status using <strong>CurrentTSTest.Status</strong> but i want to execute the current test  as <strong>CurrentTSTest.ParameterValueFactory</strong> which doesn't seem to be possible. Is there any way  i can access parameter Value of \"<strong>CurrentTest</strong>\" instance w ?</p>\n\n<p>I can access it from external script when i get all instances of the <strong>QCPythonTest</strong> but iam after the Python Code which gives the current test parameter values when within QC. OTA library help doesnt help much. If anyone of you have done similiar stuff please do let me know. Would prefer Python way but dont mind any other language as long as it serves the purpose</p>\n"},{"tags":["python","google"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":13,"score":0,"question_id":13249147,"title":"Python/Google Apps Script integration","body":"<p>Would it be possible for some type of Python script to check services running on a linux box, and integrate with a google app script, so it would then populate a google doc spreadsheet stating whther a service is running or not ?</p>\n"},{"tags":["python","hide","stderr","scapy","output"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13249341,"title":"surpress scapy warning message when importing the module","body":"<p>I'm writing a small script, that gathers some information using scapy and then returns some xml code, that I'll pass on to the xmlrpc interface of metasploit. I'd like it that my script only returns xml, and no additional warnings etc.</p>\n\n<p>I can surpress most scapy output, with adding the option <code>verbose=0</code> to my sr1 command. What I still get before every output, and I assume it returns this warning when I'm loading the module, is:</p>\n\n<pre><code> WARNING: No route found for IPv6 destination :: (no default route?)\n</code></pre>\n\n<p>I can easily redirect that output, by calling my script like this:</p>\n\n<pre><code> ./myscript 2&gt; /dev/null\n</code></pre>\n\n<p>but I'd like to incorporate this into the script. For that I've found a hint, that one could have a NullDevice class, that doesn't write anything, and then set <code>sys.stderr</code> to an instantiation of that NullDevice class.</p>\n\n<p>This only works unfortunately after I've already loaded the module, so I still have the Warning, and it only redirects any following messages sent to stderr.</p>\n\n<p>How can I surpress that warning message to appear on my screen?</p>\n"},{"tags":["python","regex"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13248850,"title":"Python regex match","body":"<p>I am trying to match a text in a file</p>\n\n<pre><code>In [44]: with open(path) as f:\n   ....:     for line in f:\n   ....:         matched = re.search('^PARTITION BY HASH',line)\n   ....:         if matched is not None:\n   ....:             print matched.group()\n   ....:\n</code></pre>\n\n<p>The file contains lines like \nPARTITION BY HASH(SOME_THING);\nAnd also some other lines among which there is \nSUBPARTITION BY HASH(SOME_THING) which shouldn't be matched</p>\n\n<p>After the match i would like to delete that line.\nBut the print matched.group fails why ?</p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":48,"score":3,"question_id":13249121,"title":"Split into N elements a string by spaces preserving quoted substrings","body":"<p>I would like to split a string into 3 elements by spaces but I don't want the quoted substrings to be split (they can also contain backslash to escape the quotes).</p>\n\n<p>For instance:</p>\n\n<pre><code>\"command argument other arguments and options\"\n&gt;&gt; ['command', 'argument', 'other arguments and options']\n\n'command \"my argument\" other arguments and options'\n&gt;&gt; ['command', 'my argument', 'other arguments and options']\n\n'command \"my \\\"ugly\\\" argument\" other \"arguments\" and options'\n&gt;&gt; ['command', 'my \"ugly\" argument', 'other \"arguments\" and options']\n</code></pre>\n\n<p>I had a look at this <a href=\"http://stackoverflow.com/questions/79968/split-a-string-by-spaces-preserving-quoted-substrings-in-python\">similar question</a> but <code>shlex.split()</code> will also split the end of the string (and it will remove the quotes and the spaces) whereas I want to keep the third element intact.</p>\n\n<p>I tried to use <code>shlex.split(mystring)[0:2]</code> in order to get the first two elements but then I can't manage to find a good solution to extract the third element from the original string. Actually I wish I could use <code>shlex.split()</code> like the <code>str.split()</code> method with a <code>maxsplit</code> argument.</p>\n\n<p>Is there a better way to do this than using <code>shlex.split()</code>? Perhaps regexes? Thanks!</p>\n"},{"tags":["python","django","forms"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13248569,"title":"Not been able to process simple form in Django?","body":"<p>I am having problem with with a simple form POST. Here's my url.py:</p>\n\n<pre><code>urlpatterns = patterns('',\n\n    url(r'^admin/', include(admin.site.urls)),\n    url(r'^', 'fileupload.views.show_template'), \n    url(r'^upload_file/', 'fileupload.views.upload_file'),\n)\n</code></pre>\n\n<p>Here's my form.html:</p>\n\n<pre><code>form action=\"/upload_file/\" method=\"post\"&gt;\n    {% csrf_token %}\n        &lt;fieldset&gt;\n            &lt;legend&gt;Session&lt;/legend&gt;\n                &lt;label for=\"input-one\" class=\"float\"&gt;&lt;strong&gt;Session Name:&lt;/strong&gt;&lt;/label&gt;&lt;br /&gt;\n                &lt;input class=\"inp-text\" name=\"input-one-name\" id=\"session\" type=\"text\" size=\"30\" /&gt;&lt;br /&gt;\n\n                &lt;label for=\"input-two\" class=\"float\"&gt;&lt;strong&gt;Source:&lt;/strong&gt;&lt;/label&gt;&lt;br /&gt;\n                &lt;input class=\"inp-text\" name=\"input-two-name\"  id=\"source\" type=\"text\" size=\"30\" /&gt;\n\n                &lt;label for=\"input-two\" class=\"float\"&gt;&lt;strong&gt;Destination:&lt;/strong&gt;&lt;/label&gt;&lt;br /&gt;\n                &lt;input class=\"inp-text\" name=\"input-two-name\"  id=\"destination\" type=\"text\" size=\"30\" /&gt;\n        &lt;/fieldset&gt;\n\n\n\n        &lt;p&gt;&lt;input class=\"submit-button\" type=\"submit\" alt=\"SUBMIT\" name=\"Submit\" value=\"Save\" /&gt;&lt;/p&gt;\n        &lt;p&gt;&lt;input class=\"cancel-button\" type=\"reset\"  name=\"Save\" value=\"Cancel\" /&gt;&lt;/p&gt;\n    &lt;/form&gt;\n</code></pre>\n\n<p>Here's my views.py:</p>\n\n<pre><code>from django.http import HttpResponseRedirect\nfrom django.shortcuts import render_to_response\nfrom fileupload.forms import UploadFileForm\nfrom django.template import RequestContext\n\n\ndef show_template(request):\n    return render_to_response('form.html', {'form': 'form'},  context_instance=RequestContext(request))\n\ndef upload_file(request):\n    if request.method == 'POST':\n        form = UploadFileForm(request.POST)\n        if form.is_valid():\n            sessiong = form.cleaned_data['session']\n            sourceg = form.cleaned_data['source']\n            destinationg = form.cleaned_data['destination']\n            return HttpResponseRedirect('/thanks/') \n    else:\n        form = UploadFileForm()\n    return render_to_response('form.html', {'form': form},  context_instance=RequestContext(request))\n</code></pre>\n\n<p>The problem is whenever I fill up the form and hit Save the form is not processed at all which clearly means my view upload_file is not working at all. What might be the problem? The simple logic is: user fills up the form, click save and the data's are stored in python variable which later I plan to store in a database. </p>\n"},{"tags":["python","mapreduce"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13249234,"title":"Alternatives to mincemeatpy and octopy","body":"<p>Briefly, octopy and mincemeatpy are python implementations of map-reduce (light-weight), and clients can join the cluster in ad-hoc manner without requiring any installations (Of-course, except python). Here are the project details <a href=\"http://code.google.com/p/octopy/\" rel=\"nofollow\">OCTOPY</a> and <a href=\"https://github.com/michaelfairley/mincemeatpy\" rel=\"nofollow\">Mincemeatpy</a>.</p>\n\n<p>The problem with these is they need to hold the entire data in-memory (including intermediate key-value pairs). So even for a moderate size data, they throw out of memory exceptions.</p>\n\n<p>The key-reasons I'm using them are:</p>\n\n<ol>\n<li>Python.</li>\n<li>No cluster installation required.</li>\n<li>I just prototype, and I can directly port the algorithm once I'm ready. </li>\n</ol>\n\n<p>So my question is: Is there any package which handles the same stuff, but not just in-memory (which can handle moderate size data) ? </p>\n"},{"tags":["python","anchor","beautifulsoup","scraper"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":69,"score":0,"question_id":13247479,"title":"How to extract the text between some anchor tags?","body":"<p>I need to extract the name of the artists from an HTML page. Here's a snippet of the page:\n</p>\n\n<pre><code> &lt;/td&gt;\n &lt;td class=\"playbuttonCell\"&gt;\n   &lt;a class=\"playbutton preview-track\" href=\"/music/example\" data-analytics-redirect=\"false\"  &gt;\n      &lt;img class=\"transparent_png play_icon\" width=\"13\" height=\"13\" alt=\"Play\" src=\"http://cdn.last.fm/flatness/preview/play_indicator.png\" style=\"\" /&gt;\n    &lt;/a&gt;\n  &lt;/td&gt;\n  &lt;td class=\"subjectCell\" title=\"example, played 3 times\"&gt;\n    &lt;div&gt;\n      &lt;a href=\"/music/example-artist\"   &gt;Example artist name&lt;/a&gt;\n</code></pre>\n\n<p>I've tried this but isn't doing the job.\n</p>\n\n<pre><code>import urllib\nfrom bs4 import BeautifulSoup\n\nhtml = urllib.urlopen('http://www.last.fm/user/Jehl/charts?rangetype=overall&amp;subtype=artists').read()\nsoup = BeautifulSoup(html)\nprint soup('a')\n\nfor link in soup('a'):\n    print html\n</code></pre>\n\n<p>Where am I screwing up?</p>\n"},{"tags":["python","pil","imagefilter"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":583,"score":0,"question_id":3346980,"title":"How do the PIL ImageFilter enhancement filters work?","body":"<p>Where can I find information on what algorithms the PIL ImageFilter functions use? Like how does edge_enhance work? I'm looking to implement a difference of Gaussians filter but if PIL has a filter that works similarly I'll use that.</p>\n"},{"tags":["python","scrapy"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13241134,"title":"How to distinguish beetween two formats of text in Scrapy?","body":"<p>I am using <code>HtmlXPathSelector(response)</code> object in Scrapy, I need to get two kinds of text formats:</p>\n\n<p>My first text has the next format:</p>\n\n<pre><code>&lt;p&gt; Text, text, text, text, text, text, text, text, text &lt;/p&gt;\n&lt;p&gt;\n&lt;p&gt; Text, text, text, text, text. &lt;/p&gt;\n</code></pre>\n\n<p>My second text has the next format:</p>\n\n<pre><code>Text, text, text, text, text, text\n&lt;br&gt;\n&lt;br&gt;\nText, text, text..\n&lt;br&gt;\n&lt;br&gt;\n</code></pre>\n\n<p>when I use <code>x.select('//div[@id=\"texto\"]/text()').extract()</code> but not the second... I get something like this:</p>\n\n<pre><code>'content': [u'\\r\\n          ',\n                 u'\\r\\n',\n                 ...\n                 u'\\r\\n']\n</code></pre>\n\n<p>when I use <code>x.select('//div[@id=\"texto\"]/p/text()').extract()</code> I get the second one but not the first:</p>\n\n<p>How can I use a kind of <em>rule</em> in order to get both formats?</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I get the solution with the next code, but I feel is a dirty solution:</p>\n\n<pre><code>content = x.select('//div[@id=\"nota_texto\"]/p/text()').extract()\nif content == []:\n    data['content'] = x.select('//div[@id=\"nota_texto\"]/text()').extract()\nelse:\n    data['content'] = content\n</code></pre>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13249009,"title":"Implementing class concept is not working in python","body":"<p>Program 1 : function based :-</p>\n\n<pre><code>import xml.etree.ElementTree as ET\nimport sys   \ndoc       = ET.parse(\"users.xml\")\nroot      = doc.getroot()\nroot_new  = ET.Element(\"users\") \nfor child in root:\n    username             = child.attrib['username']\n    password             = child.attrib['password']   \n    # create \"user\" here\n    user    = ET.SubElement(root_new, \"user\") \n    user.set(\"username\",username)               \n    user.set(\"password\",password) \n    #checking attribute for skipping KeyError\n    if 'remote_access' in child.attrib:\n        remote_access   = child.attrib['remote_access']\n        user.set(\"remote_access\",remote_access) \n    for g in child.findall(\"group\"):\n        # create \"group\" here\n        group     = ET.SubElement(user,\"group\")  \n        if g.text != \"lion\":\n            group.text = g.text \ntree = ET.ElementTree(root_new)\ntree.write(sys.stdout)\n</code></pre>\n\n<p>This is xml :-</p>\n\n<pre><code>&lt;users&gt;\n&lt;user username=\"admin\"  password=\"admin\" remote_access=\"yes\"&gt;&lt;/user&gt;\n&lt;user username=\"private_user1\" password=\"user1\" &gt;&lt;group&gt;group1&lt;/group&gt;&lt;group&gt;group2&lt;/group&gt;&lt;/user&gt;\n&lt;user username=\"private_user2\" fullname=\"user2\" password=\"user2\"&gt;&lt;group&gt;group1&lt;/group&gt;&lt;group&gt;group2&lt;/group&gt;&lt;/user&gt;\n&lt;/users&gt;\n</code></pre>\n\n<p>my class implementaion :- fully wrong :(</p>\n\n<pre><code>import xml.etree.ElementTree as ET\nimport sys\n\nclass users_detail (object):\n\n    def __init__( self, xml_path ):\n     \"\"\"bla bla\n     \"\"\"\n    try:\n        doc = ET.parse(\"users.xml\")\n    except:\n        print 'xml not found' \n        root      = doc.getroot() \n        root_new  = ET.Element(\"users\") \n        for child in root:\n            username             = child.attrib['username']\n            password             = child.attrib['password']\n            user    = ET.SubElement(root_new, \"user\") \n            user.set(\"username\",username)               \n            user.set(\"password\",password) \n            if 'remote_access' in child.attrib:\n                remote_access   = child.attrib['remote_access']\n            for g in child.findall(\"group\"):\n                group     = ET.SubElement(user,\"group\")  \n                if g.text != \"lion\":\n                    group.text = g.text \n        tree = ET.ElementTree(root_new)\n        tree.write(sys.stdout)\nif __name__=='main':\n    users_detail() \n</code></pre>\n\n<p>How to implement this in better way via object oriented concept class. And my class implementaion is not working at all. please help me out. :(</p>\n\n<p>i need to make the above code into a Python Class : thats the requirment :(</p>\n"},{"tags":["python","django","django-urls"],"answer_count":4,"favorite_count":3,"up_vote_count":1,"down_vote_count":0,"view_count":703,"score":1,"question_id":2030225,"title":"How to get current_app for using with reverse in multi-deployable reusable Django application?","body":"<p>I'm writing reusable app. And I want to deploy it several times.</p>\n\n<p>Here is urls.py:</p>\n\n<pre><code>urlpatterns = patterns('',\n(r'^carphotos/', include('webui.photos.urls', app_name='car-photos') ),\n(r'^userphotos/', include('webui.photos.urls',  app_name='profile-photos') ),)\n</code></pre>\n\n<p>and photos/urls.py:</p>\n\n<pre><code>urlpatterns = patterns('webui.photos.views',\nurl(r'^$', album_list, name=\"album-list\" )\nurl(r'^newalbum/$', album_page, {'create': True}, name=\"album-create\"),)\n</code></pre>\n\n<p>On the album_list view I want to show url for creating new album album_page.</p>\n\n<p>I found that I have to use parameter current_app of reverse function to get proper URL.</p>\n\n<p>But how to get this current_app?\nI thought the answer is something simple. But I can't find it in django documentation.</p>\n\n<p>Thanks, Nick</p>\n"},{"tags":["c++","python","pointers","cython"],"answer_count":0,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":52,"score":4,"question_id":13248992,"title":"Cython std::pair of two pointers, expected an identifier or literal","body":"<p>Why in Cython is possible to wrap</p>\n\n<pre><code>std::pair&lt;int, Foo*&gt; myPair;\n</code></pre>\n\n<p>but not </p>\n\n<pre><code>std::pair&lt;Foo*,Bar*&gt; myPair;\n</code></pre>\n\n<p>In particular, wrapping in Cython the <code>std::pair</code> is done as follows:</p>\n\n<pre><code>pair[int, Foo*]\n</code></pre>\n\n<p>and works smoothly, but when the first element of is also a pointer I have problems:</p>\n\n<pre><code>pair[Foo*,Bar*] myPair2\n</code></pre>\n\n<p>I'm getting </p>\n\n<pre><code>pair[Foo*,Bar*] myPair2\n        ^\n------------------------------------------------------------\ntest.pyx:50:17: Expected an identifier or literal\n</code></pre>\n\n<p>I'm using Cython 0.17.1, g++ 4.4 on Linux</p>\n"},{"tags":["python","opencv"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":229,"score":0,"question_id":9917944,"title":"Sobel Function python opencv","body":"<p>I tried using Sobel function in python opencv but I get this error : </p>\n\n<p>terminate called after throwing an instance of 'int'\nAborted</p>\n\n<pre><code>from opencv.highgui import *\nimport cv \nimport sys\n\nimage = cv.LoadImage(\"image.jpg\")\nsize = cv.GetSize(image)\ngray_image = cv.CreateImage(size, 8, 1)\ncv.CvtColor(image, gray_image, cv.CV_RGB2GRAY)\ndf_dx = cv.CreateImage(size, 16, 1)\ncv.Sobel( gray_image, df_dx, 1, 0)\ncv.SaveImage('r.jpg',df_dx)\n</code></pre>\n\n<p>any help ?</p>\n"},{"tags":["python","review-board","pysvn"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":86,"score":0,"question_id":12511202,"title":"pysvn-1.7.6 on rhel6,error: Not a URL, existing file, or requirement spec:","body":"<p>I have Python 2.7.3 installed on RHEL 6, and when I tried to install pysvn-1.7.6, I got an error. What should I do?</p>\n\n<pre><code>/search/python/pysvn-1.7.6/Import/pycxx-6.2.4/CXX/Python2/Objects.hxx:2912: warning: deprecated conversion from string constant to 'char*'\nCompile: pysvn_svnenv.cpp into pysvn_svnenv.o\nCompile: pysvn_profile.cpp into pysvn_profile.o\nCompile: /search/python/pysvn-1.7.6/Import/pycxx-6.2.4/Src/cxxsupport.cxx into cxxsupport.o\nCompile: /search/python/pysvn-1.7.6/Import/pycxx-6.2.4/Src/cxx_extensions.cxx into cxx_extensions.o\nCompile: /search/python/pysvn-1.7.6/Import/pycxx-6.2.4/Src/cxxextensions.c into cxxextensions.o\nCompile: /search/python/pysvn-1.7.6/Import/pycxx-6.2.4/Src/IndirectPythonInterface.cxx into IndirectPythonInterface.o\nLink pysvn/_pysvn_2_7.so\nmake: *** No rule to make target `egg'.  Stop.\nerror: Not a URL, existing file, or requirement spec: 'dist/pysvn-1.7.6-py2.7-linux-x86_64.egg'\n</code></pre>\n"},{"tags":["java","python","reference","pass-by-reference"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13245641,"title":"Java Pass By Reference Transcode To Python","body":"<p>I have two questions:</p>\n\n<ol>\n<li><p>If I have the following code:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>private boolean handleCollision(Rectangle_Double test)\n{\n    Rectangle_Double s = test;\n    s.setLocation(s.X+xVelocity, s.Y);\n}\n</code></pre></li>\n</ol>\n\n<p>am I modifying the passed in Rectangle_Double? If so, what would be the best way to copy the passed in Rectangle_Double and modify it?</p>\n\n<p>Second, If I were to code this in python like so:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>def handleCollision(collidedLands, testRectangle)\n    s = testRectangle\n    s.setLocation(s.X+xVelocity, s.Y)\n</code></pre>\n\n<p>am I modifying the passed in testRectangle? If so, what would be the best way to copy the passed in testRectangle and modify it?</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","calculator"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":66,"score":0,"question_id":13246863,"title":"Python: Dealing with a second operator in calculator","body":"<p>I am creating a calculator program and I am nearly complete. The last problem I am encountering is dealing with a second operator.</p>\n\n<p>The program takes an expression with a maximum of two operators(ex.2/3*4). It splits it into 2,/,3,*,4 and the uses many varying functions to solve the expression. Now the specific part I am presenting below is the function that solves the first expression, (I have solved the rest of it already):</p>\n\n<pre><code>def firstOperationWithOneOperator(numEx1,numEx2,opEx1):\n\n    if opEx1==\"*\":\n        solution1=numEx1*numEx2\n        print(solution1)\n        return solution1\n    elif opEx1==\"/\":\n        solution1=numEx1/numEx2\n        print(solution1)\n        return solution1\n    elif opEx1==\"+\":\n        solution1=numEx1+numEx2\n        print(solution1)\n        return solution1\n    elif opEx1==\"-\":\n        solution1=numEx1-numEx2\n        print(solution1)\n        return solution1\n</code></pre>\n\n<p>So I now have a working function to solve something with one operator(ex.2/3) as you can see above. I needed some help finding out how to deal with a second operator while keeping the order of operations  in check. So how can I solve an expression such as 2+3*5? I will keep updating my OP with limitations as they are presented, if any. If anything is unclear please ask and I will edit the OP.</p>\n\n<p>EDIT:</p>\n\n<pre><code>def fowoo(nums1,fowoo(nums2,nums3,ops2),ops1):\n    print(fOWOO(nums1, fOWOO(nums2, nums3, ops2), ops1))\n</code></pre>\n"},{"tags":["python","opengl","texture","pyopengl"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":23,"score":1,"question_id":13248023,"title":"Making a texture translucent in PyOpenGL","body":"<p>In my scene I have a cube within a sphere. I would like to apply a RGB texture to a sphere and make it translucent.  I can import the texture, apply it to the sphere and make it translucent but i am not getting the result I want. </p>\n\n<p>My blend function is <code>glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA)</code></p>\n\n<p>My draw method is as follows:</p>\n\n<pre><code>def DrawGLScene():\n    rotation1  = 60\n    rotation2 = 60\n\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)\n    glEnable(GL_BLEND)\n    glLoadIdentity()\n    glTranslatef(0.0, 0.0, -8.0)\n    glRotatef(rotation1, 1.0, 0.0, 0.0)\n    glRotatef(rotation2, 0.0, 1.0, 0.0)\n    glColor4f(1.0,1.0,1.0,1.0)\n\n    glutSolidCube(2);\n    glEnable(GL_COLOR_MATERIAL)\n    glEnable(GL_TEXTURE_2D)\n    glBindTexture(GL_TEXTURE_2D,1)\n    glColor4f(1.0,1.0,1.0,0.3)\n    Q=gluNewQuadric()\n    gluQuadricNormals(Q, GL_SMOOTH)\n    gluQuadricTexture(Q, GL_TRUE)\n    glTexGeni(GL_S, GL_TEXTURE_GEN_MODE, GL_SPHERE_MAP)\n    glTexGeni(GL_T, GL_TEXTURE_GEN_MODE, GL_SPHERE_MAP)\n    gluSphere(Q, 2.35, 32, 16)\n    glDisable(GL_TEXTURE_2D)\n\n    glutSwapBuffers()\n</code></pre>\n\n<p>The result looks like this:</p>\n\n<p><img src=\"http://i.stack.imgur.com/EmC5m.png\" alt=\"Cant see the back side of the sphere and artifacts on the sphere\"></p>\n\n<p>It seemed there were depth problems as I could only see the back side of the sphere in parts in the bottom right.  I then set glDepthFunc(GL_LESS) for drawing the cube and glDepthFunc(GL_ALWAYS) for drawing the sphere which resulted in:</p>\n\n<p><img src=\"http://i.stack.imgur.com/itKig.png\" alt=\"Can now see the back of the sphere THROUGH the cube\"></p>\n\n<p>Now the back side of the sphere is showing through the cube.</p>\n\n<p>I have tried multiple combinations of glDepthFunc() for the objects but to no avail.  Is the problem to do with how I am handling depth, blending or something else?</p>\n\n<p>EDIT:</p>\n\n<p>Using <code>glEnable(GL_CULL_FACE)</code> and <code>glCullFace(GL_BACK)</code> in the first example gives me the following which is still not correct as now you cannot see the back of the sphere at all.</p>\n\n<p><img src=\"http://i.stack.imgur.com/DLv4M.png\" alt=\"with culling enabled\"></p>\n"},{"tags":["python","twisted"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":979,"score":2,"question_id":4314376,"title":"How can I install a python .egg file","body":"<p>I am trying to install twisted on python 2.6 and it seems that the Zop interface is missing.\nAlso it seems that it is a <code>.egg</code> file.  I downloaded this <code>.egg</code> file, now how can I install it?</p>\n"},{"tags":["python"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13248040,"title":"Acess modules from different directory","body":"<p>I have the following file structure</p>\n\n<pre><code>python/\n    A/\n        a.py\n        b.py\n    B/\n        c.py\n</code></pre>\n\n<p>So there are two folders A and B under the folder python and I want to import modules from a.py and b.py - import them in c.py ( B folder)</p>\n\n<p>I wrote an <code>__init__.py</code> with <code>__all__=['modulename']</code> and placed it in folder <code>B</code>. Now in my <code>c.py</code> I import the modules using <code>import</code> statement. This however does not seem to work. Any thoughts on how I can achieve the import of the modules in above case?</p>\n"},{"tags":["python","build","open-source","openvpn"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13248522,"title":"Error when build OpenVPN on Windows by Python based build","body":"<p>I have attempted to build OpenVPN verison 2.2.2 for Windows (client) using the Python based build script and I get the following errors:</p>\n\n<pre><code>   C:\\openvpn-build\\openvpn-2.2.2\\win&gt;python build_all.py -u\nDoing an unsigned build as requested\nTraceback (most recent call last):\n  File \"build_all.py\", line 69, in &lt;module&gt;\n    main(config)\n  File \"build_all.py\", line 51, in main\n    config_all(config)\n  File \"C:\\openvpn-build\\openvpn-2.2.2\\win\\config_all.py\", line 8, in main\n    config_ti(config)\n  File \"C:\\openvpn-build\\openvpn-2.2.2\\win\\config_ti.py\", line 13, in main\n    head_comment='# %s\\n\\n' % autogen)\n  File \"C:\\openvpn-build\\openvpn-2.2.2\\win\\wb.py\", line 190, in preprocess\n    fin = open(in_fn)\nIOError: [Errno 13] Permission denied: 'C:\\\\openvpn-build\\\\tapinstall\\\\7600\\\\sou\nrces'\n</code></pre>\n\n<p>Please help me fixed this error?</p>\n"},{"tags":["python","mysql","mysql-python"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13247957,"title":"MySQL did not give an error, but none of the rows got filled","body":"<p>I tried to fill a table in a database using MySQLdb. It did not give any errors, and once gave the warning </p>\n\n<pre><code>main.py:23: Warning: Data truncated for column 'other_id' at row 1\n  cur.execute(\"INSERT INTO map VALUES(%s,%s)\",(str(info[0]).replace('\\n',''), str(info[2].replace('\\n','').replace(\"'\",\"\"))))\n</code></pre>\n\n<p>so I thought it was working fine. However, when it was finished and I did a row count it turned out that nothing was added. Why was the data not added to the database? The code is below</p>\n\n<pre><code>def fillDatabase():\n    db = MySQLdb.connect(host=\"127.0.0.1\", \n                         user=\"root\", \n                         passwd=\"\", \n                         db=\"uniprot_map\") \n\n    cur = db.cursor() \n    conversion_file = open('idmapping.dat')\n    for line in conversion_file:\n        info = line.split('\\t')\n        cur.execute(\"INSERT INTO map VALUES(%s,%s)\",(str(info[0]).replace('\\n',''), str(info[2].replace('\\n','').replace(\"'\",\"\"))))\n\ndef test():\n    db = MySQLdb.connect(host=\"127.0.0.1\", \n                         user=\"root\", \n                         passwd=\"\", \n                         db=\"uniprot_map\") \n\n    cur = db.cursor() \n    cur.execute(\"SELECT COUNT(*) FROM map\")\n    rows = cur.fetchall()\n\n    for row in rows:\n        print row\n\ndef main():\n    fillDatabase()\n    test()\n</code></pre>\n"},{"tags":["python","django","django-forms","csrf"],"answer_count":2,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":2047,"score":4,"question_id":8089224,"title":"CSRF Token missing or incorrect","body":"<p>Beginner at Django here, I've been trying to fix this for a long time now.\nI do have 'django.middleware.csrf.CsrfViewMiddleware' in my middleware classes and I do have the token in my post form.</p>\n\n<p>Heres my code, what am I doing wrong?</p>\n\n<pre><code>from django.contrib.auth.forms import UserCreationForm\nfrom django.shortcuts import render_to_response\nfrom django.http import HttpResponseRedirect\nfrom chartsey.authentication.forms import RegistrationForm\nfrom django.template import RequestContext\nfrom django.core.context_processors import csrf\n\ndef register(request):\n\n    if request.method == 'POST':\n        c = RequestContext(request.POST, {})\n        form = RegistrationForm(c)\n        if form.is_valid():\n            new_user = form.save()\n            return HttpResponseRedirect(\"/\")\n    else:\n        form = RegistrationForm()\n\n    return render_to_response(\"register.html\",  {'form': form,  }, )\n</code></pre>\n\n<p>Here's my Template:</p>\n\n<pre><code>{% block content %}\n\n    &lt;h1&gt;Register&lt;/h1&gt;\n    &lt;form action=\"\" method=\"POST\"&gt; {% csrf_token %}\n        {{ form.as_p }}\n    &lt;input type=\"submit\" value=\"Submit\"&gt;\n    &lt;/form&gt;\n\n{% endblock %}\n</code></pre>\n"},{"tags":["python","xml","xml-parsing"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13247749,"title":"how to change a node value in python","body":"<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;info&gt;\n  &lt;/tags&gt;\n  &lt;/tags&gt;\n  &lt;area&gt;\n&lt;media&gt;\n    &lt;options&gt;\n         &lt;name&gt;Jaipur&lt;/name&gt;\n    &lt;/options&gt;\n&lt;/media&gt;\n  &lt;/area&gt;\n&lt;/info&gt;\n</code></pre>\n\n<p><br>\ni am totaly new in python, here is my xml file and i want to edit element value at run time in python<br>\nit means I want to change the <strong><code>&lt;name&gt;Jaipur&lt;/name&gt;</code> to <code>&lt;name&gt;Mumbai&lt;/name&gt;</code></strong></p>\n"},{"tags":["python","vbscript","sikuli"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13231834,"title":"How to get vbscript variables in sikuli?","body":"<p>I am sending excel data to sikuli using excel macro when clicking on a button in excel.I am using vbscript shell command to run the sikuli script by sending parameters like </p>\n\n<pre><code>rep = Shell(\"C:\\Sikuli\\Sikuli-IDE.exe -r C:\\iP4-Projects\\sikuliExamples\\test.sikuli\" &amp; RCount &amp; \" \" &amp; CCount)\n</code></pre>\n\n<p>But i dont know how to get these two parameters in sikuli .please help me if any one knows the syntax to get vbscript variables in sikuli or in python. </p>\n\n<p>Thanks.</p>\n"},{"tags":["python","arrays","list","max"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":86,"score":1,"question_id":13227578,"title":"python max of list of arrays","body":"<p>I have a list of arrays like:</p>\n\n<pre><code>a = [array([6,2]),array([8,3]),array([4,2])]\n</code></pre>\n\n<p>I tried <code>max(a)</code> which returns the following error:</p>\n\n<pre><code>ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()\n</code></pre>\n\n<p>I want it to return either a list or array like:</p>\n\n<pre><code>In: max(a)\nOut: [8,3]\n</code></pre>\n\n<p>I don't want to convert the inner arrays to list, because the size of the list is very big. Also I purposefully created like that to perform array operations.</p>\n"},{"tags":["python",".net","qt","pyqt"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13246470,"title":"Is it possible to prevent .NET runtime from unloading DLLs on exit?","body":"<p>We're writing a mixed mode application in Python, Qt4 (4.6.1 at the moment) and .NET (for integration reasons).</p>\n\n<p>Now, when the app exists normally, the .NET runtime is unloaded, which sens PROCESS_DETACH to all DLLs. This seem to cause a crash when QHostInfoLookupManager' destriuctor estrys the threadpool.</p>\n\n<p>Is there some way to prevent this, besides:</p>\n\n<ul>\n<li>TerminateProcess?</li>\n<li>Move .NET code to separate process to avoid Qt issues.</li>\n</ul>\n\n<p>The call stack is as follows, when I get a crash:</p>\n\n<pre><code>python26.dll!1e02edbf()     \n[Frames below may be incorrect and/or missing, no symbols loaded for python26.dll]  \npython26.dll!1e078aba()     \nQtCore.pyd!01971058()   \nQtCore4.dll!qt_message_output(QtMsgType msgType=QtWarningMsg, const char * buf=0x077526a8)  Line 2223 + 0x1c bytes  C++\nQtCore4.dll!qt_message(QtMsgType msgType=QtWarningMsg, const char * msg=0x671b8464, char * ap=0x0012f1d4)  Line 2297    C++\nQtCore4.dll!qWarning(const char * msg=0x671b8464, ...)  Line 2378 + 0x11 bytes  C++\nQtCore4.dll!QWaitCondition::~QWaitCondition()  Line 156 C++\nQtCore4.dll!QThreadPoolPrivate::~QThreadPoolPrivate()  + 0xa2 bytes C++\nQtCore4.dll!QThreadPoolPrivate::`scalar deleting destructor'()  + 0x8 bytes C++\nQtCore4.dll!QObject::~QObject()  Line 992 + 0x16 bytes  C++\nQtCore4.dll!QThreadPool::~QThreadPool()  Line 430 + 0xf bytes   C++\nQtNetwork4.dll!QHostInfoLookupManager::~QHostInfoLookupManager()  Line 454 + 0x23 bytes C++\nQtNetwork4.dll!QHostInfoLookupManager::`scalar deleting destructor'()  + 0x8 bytes  C++\nQtNetwork4.dll!`theHostInfoLookupManager'::`8'::`dynamic atexit destructor for 'cleanup''()  + 0x14 bytes   C++\nQtNetwork4.dll!_CRT_INIT(void * hDllHandle=0x00385f30, unsigned long dwReason=3694344, void * lpreserved=0x00385f08)  Line 449  C\nQtNetwork4.dll!__DllMainCRTStartup(void * hDllHandle=0x64000000, unsigned long dwReason=0, void * lpreserved=0x00000000)  Line 560 + 0x8 bytes  C\nQtNetwork4.dll!_DllMainCRTStartup(void * hDllHandle=0x64000000, unsigned long dwReason=0, void * lpreserved=0x00000001)  Line 510 + 0xe bytes   C\nntdll.dll!_LdrpCallInitRoutine@16()  + 0x14 bytes   \nntdll.dll!_LdrShutdownProcess@0()  - 0xfe bytes \nkernel32.dll!__ExitProcess@4()  + 0x42 bytes    \nkernel32.dll!7c81cb26()     \nmscorwks.dll!SafeExitProcess()  + 0xb7 bytes    \nmscorwks.dll!DisableRuntime()  - 0x199708 bytes \nmscoreei.dll!RuntimeDesc::ShutdownAllActiveRuntimes()  + 0x873e bytes   \nmscoreei.dll!_CorExitProcess@4()  + 0x26 bytes  \nmscoree.dll!_ShellShim_CorExitProcess@4()  + 0x94 bytes \nmsvcr90.dll!__crtCorExitProcess(int status=0)  Line 716 C\nmsvcr90.dll!__crtExitProcess(int status=0)  Line 722 + 0x8 bytes    C\nmsvcr90.dll!doexit(int code=0, int quick=0, int retcaller=0)  Line 632  C\nmsvcr90.dll!exit(int code=0)  Line 412 + 0xc bytes  C\npython26.dll!1e030405()     \npython26.dll!1e02cd93()     \npython26.dll!1e02e887()     \npython26.dll!1e02ccba()     \nMyApp.exe!orz::runPythonFile(const char * file=0x00a203f0, QDir pydir={...}, QString pypath={...})  Line 66 + 0x3e bytes    C++\nMyApp.exe!orz::the_main(int argc=2, char * * argv=0x003860e0)  Line 132 + 0x50 bytes    C++\nMyApp.exe!main(int argc=2, char * * argv=0x003860e0)  Line 152 + 0xd bytes  C++\nMyApp.exe!_WinMain@16()  + 0xb8 bytes   \nkernel32.dll!_BaseProcessStart@4()  + 0x23 bytes    \n</code></pre>\n\n<p>Maybe there's something my message handling, but I don't want the dll unload from .net anyway. I tried altering the my logging a bit to avoid the python call, but then I  get stuck \"no usermode threads running, app is deadlocked\",  seems related to <a href=\"http://qt-project.org/forums/viewthread/20462\" rel=\"nofollow\">http://qt-project.org/forums/viewthread/20462</a>.</p>\n\n<pre><code>ntdll.dll!_KiFastSystemCallRet@0()  \nntdll.dll!_NtWaitForSingleObject@12()  + 0xc bytes  \nkernel32.dll!_WaitForSingleObjectEx@12()  + 0x8b bytes  \nkernel32.dll!_WaitForSingleObject@8()  + 0x12 bytes \nQtCore4.dll!QWaitCondition::wait(QMutex * mutex=0x07ccf200, unsigned long time=4294967295)  Line 175 + 0x15 bytes   C++\nQtCore4.dll!QThreadPoolPrivate::waitForDone()  Line 295 + 0x10 bytes    C++\nQtCore4.dll!QThreadPool::~QThreadPool()  Line 429   C++\n</code></pre>\n\n<p>Qt does not support dll unloading, as quoted from the above post</p>\n\n<blockquote>\n  <p>“To be perfectly honest, I don’t know what to do with this task. I\n  seem to recall seeing cases where Windows threads would disappear at\n  application exit, yet the HANDLE to those threads would not be\n  signaled (meaning your app would deadlock if waiting on the handle).</p>\n  \n  <p>I am tempted to simply mark this as “Out of Scope”, since, as Thiago\n  says, we do not test nor really support unloading the Qt libraries\n  from the application once they have been loaded.”</p>\n</blockquote>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13243586,"title":"Finding index of list item which is assembled by Fraction class","body":"<p>I'm trying to find the index of specifyed element in my list that looks like this for example \nWhich is generated by xrange with Fractional.</p>\n\n<pre><code>&gt;&gt; print lst\n[Fraction(1, 8), Fraction(1, 7), Fraction(1, 6), Fraction(1, 5), Fraction(1, 4),          Fraction(2, 7), Fraction(1, 3), Fraction(3, 8), Fraction(2, 5), Fraction(3, 7), Fraction(1,   2), Fraction(4, 7), Fraction(3, 5), Fraction(5, 8), Fraction(2, 3), Fraction(5, 7), Fraction(3, 4), Fraction(4, 5), Fraction(5, 6), Fraction(6, 7), Fraction(7, 8)] \n</code></pre>\n\n<p>I have been trying everything. \nWhy doesn't this work. </p>\n\n<pre><code>lst.index(1,6) \n</code></pre>\n\n<p>or </p>\n\n<pre><code>lst.index( Fraction(1,6) )\n</code></pre>\n\n<p>and I have tried many more but I always get</p>\n\n<pre><code>print lst.index(Fraction(1,6))\nValueError: Fraction(1, 6) is not in list\n</code></pre>\n\n<p>Any advice ?</p>\n\n<p>More on how I created the list : </p>\n\n<pre><code>for d in xrange(1,limit+1):\n        for n in xrange(1,limit+1):\n                x = Fraction(n,d)\n                lst.append(x)\n</code></pre>\n"},{"tags":["python","google-app-engine","google-cloud-storage"],"answer_count":2,"favorite_count":2,"up_vote_count":0,"down_vote_count":0,"view_count":319,"score":0,"question_id":11364878,"title":"Upload images/video to google cloud storage using google app engine","body":"<p>I have read the question from \"Sending images to google cloud storage using google app engine\". (http://goo.gl/4nLno)\nHowever, the codes in the answer that the file will upload to blobstore first, so the file can not be exceeded 32MB.</p>\n\n<p>How can I upload the large file to Google Cloud Storage directly?</p>\n\n<p>I have checked the official document \"Upload Objects\" (http://goo.gl/oKmei), but I still don't know how to write a form to post a large file.</p>\n\n<p>Thanks for your help.</p>\n"},{"tags":["python","numpy","plot","matplotlib"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13247735,"title":"Python Plotting via Matplotlib - Can't get xlabel and ylabel to show up on plot","body":"<p>Here is a snippet of some running code. The plot generates, however, the xlabel and ylabel won't show up for some reason. </p>\n\n<pre><code>    pl.ion()\n    pl.plot(t[1000:10000:250],E_values,'ro')\n    pl.xlabel('Time')\n    pl.ylabel('Concentration')\n    pl.legend(['[E2F]'],loc='lower right')\n    pl.show()\n</code></pre>\n\n<p>Does anyone know what I'm doing wrong? I'm on Mac OS X.Thank you. </p>\n"},{"tags":["python","redis"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":22,"score":-3,"question_id":13247793,"title":"sequence number of jobs in python rq","body":"<p>I use <a href=\"http://python-rq.org/\" rel=\"nofollow\">python rq</a> for storing jobs.</p>\n\n<p>So I need function, that by job redis key return sequence number of this job in queue.</p>\n"},{"tags":["python","apache2","execution","uwsgi"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13247780,"title":"what are all the differences between running python code in apache2+uwsgi vs. command line?","body":"<p>consider the following python code (running as apache server's user in all cases):</p>\n\n<pre><code>import subprocess as sp\n_fname_in ='/path/to/existing/dir/file_in.pdf'\n_fname_out='/path/to/existing/dir/file_out.pdf'\n_from_page=1\n_to_page=4\ncmd = [\n    '/usr/bin/pdftk',\n    'A=%(_fname_in)s'%locals(),\n    'cat',\n    '%(_from_page)s-%(_to_page)s'%locals(),\n    'output',\n    '%(_fname_out)s'%locals(),\n]\np = sp.Popen(cmd,stdout=sp.PIPE,stderr=sp.PIPE)\noutput, errors = p.communicate()\n</code></pre>\n\n<p>The code above behaves differently when running in uwsgi, vs. ipython:</p>\n\n<ul>\n<li>ipython - simply works.</li>\n<li>when accessed via apache + uwsgi, the code simply gets stuck on the last line. </li>\n</ul>\n\n<p>When THAT happens, ps output shows 2 processes related to that command:</p>\n\n<ol>\n<li><p>shell invocation with PPID of the uwsgi python's PID, with cmd line as follows:</p>\n\n<p>sh -c /usr/bin/pdftk A /path/to/existing/dir/file_in.pdf </p></li>\n<li>the pdftk process itself, with this \"A &lt;>\" something.</li>\n</ol>\n\n<p>Note something replaced <code>'='</code> with <code>' '</code>\nNow, if I am running that very command from ipython, I am getting 3rd behaviour: a syntax error from pdftk.\nWhat confuses me is the fact the same command, under the SAME SHELL renders different results.</p>\n\n<p>Please explain why this may happen....</p>\n"},{"tags":["python","ctypes","nvidia"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":409,"score":0,"question_id":6165628,"title":"use python ctypes to interface with nvapi (follow up with demonstration code)","body":"<p>This is a follow up to my previous question: <a href=\"http://stackoverflow.com/questions/6163770/help-with-python-ctypes-and-nvapi\">help with python ctypes and nvapi</a></p>\n\n<p>I am posting another question because I already selected an answer in my previous question and the question has shifted direction now.</p>\n\n<p>Using python, I am trying to query nvapi.dll to get my gpu usage value.  </p>\n\n<p>This is how you would do it in C# (referenced below): <a href=\"http://code.google.com/p/open-hardware-monitor/source/browse/trunk/Hardware/Nvidia/NVAPI.cs\" rel=\"nofollow\">http://code.google.com/p/open-hardware-monitor/source/browse/trunk/Hardware/Nvidia/NVAPI.cs</a></p>\n\n<p>Because I only need a small subset of the functionality I don't really want to swap into using another language.  I think that ctypes should be able to do this... I just cannot figure out how to do it.  I have never really used Python ctypes before.</p>\n\n<p>In order to query for the gpu usage I first need to call the NvAPI_Initialize function.  One must also use the query interface to reference the function:</p>\n\n<pre><code>from ctypes import *\nnvapi = WinDLL(\"nvapi.dll\")\nnvapi_QueryInterface = nvapi.nvapi_QueryInterface\n</code></pre>\n\n<p>Using the above code, I have access to the nvapi_QueryInterface, but I cannot figure out how to replicate this portion:</p>\n\n<pre><code>private static void GetDelegate&lt;T&gt;(uint id, out T newDelegate)\n  where T : class\n{\n    IntPtr ptr = nvapi_QueryInterface(id);\n    if (ptr != IntPtr.Zero)\n    {\n        newDelegate =\n          Marshal.GetDelegateForFunctionPointer(ptr, typeof(T)) as T;\n    }\n    else\n    {\n        newDelegate = null;\n    }\n}\n</code></pre>\n\n<p>to reference the init and usage functions:</p>\n\n<pre><code>GetDelegate(0x0150E828, out NvAPI_Initialize);\nGetDelegate(0x189A1FDF, out NvAPI_GPU_GetUsages);\n</code></pre>\n\n<p>My understanding of this may still be wrong, but I've spent a good deal of time trying to figure this out so I hope someone can help push me in the right direction because I am a little lost as to how to proceed.</p>\n\n<p>Can someone help me understand how I can make this small portion of the code work directly in python?  I just need to be able to call the NvAPI_GPU_GetUsages function at the end of the day.</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","python-2.7"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":34,"score":0,"question_id":13246483,"title":"python program wraparound","body":"<p>I have the following program statement (program1.py)</p>\n\n<p>I have a program 1:</p>\n\n<pre><code>try:\n\nexcept:\n</code></pre>\n\n<p>I have another program 2 (program2.py):</p>\n\n<pre><code>def something: \n      print hello\n</code></pre>\n\n<p>is there a way when program 1 is imported into program 2 , that program 1 wraps around program 2, so the program should be</p>\n\n<pre><code>try:\n   def something: \n          print hello    # all program 2 components\n\nexcept:\n</code></pre>\n\n<p>I am confused on how to do this and any pointers would be appreciated </p>\n"},{"tags":["javascript","python","coldfusion"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":33,"score":-1,"question_id":13245480,"title":"Javascript popUp cfmail in Python","body":"<p>Using BeautifulSoup I extracted email links from a page.  I am interested in how you could send an email to links that produce a pop up email form.</p>\n\n<p>More simply put:\nIs is it <em>possible</em> to send an email to the an address with only this data?</p>\n\n<pre><code>href = javascript:popUp('cfmail.cfm?LName=LastName&amp;FName=FirstName')\n</code></pre>\n\n<p>Or if I follow the link in code is it possible to fill out the email form that it generates?</p>\n\n<p>Thank you</p>\n"},{"tags":["python","smtp"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13246456,"title":"Cannot send an email with python smtp","body":"<p>I am developing an application using python where I need to send a file through mail. I wrote a program to send the mail but dont know there's something wrong. The code is posted below. Please any one help me with this smtp library. Is there's anything i m missing? And also can someone please tell me what will be the host in smtp! I am using smtp.gmail.com.\nAlso can any one tell me how can i email a file (.csv file). Thanks for the help!</p>\n\n<pre><code>#!/usr/bin/python\n\nimport smtplib\n\nsender = 'someone@yahoo.com'\nreceivers = ['someone@yahoo.com']\n\nmessage = \"\"\"From: From Person &lt;someone@yahoo.com&gt;\nTo: To Person &lt;someone@yahoo.com&gt;\nSubject: SMTP e-mail test\n\nThis is a test e-mail message.\n\"\"\"\n\ntry:\n   smtpObj = smtplib.SMTP('smtp.gmail.com')\n   smtpObj.sendmail(sender, receivers, message)         \n   print \"Successfully sent email\"\nexcept:\n   print \"Error: unable to send email\"\n</code></pre>\n"},{"tags":["python","python-3.x","python-c-api","python-c-extension","python-extensions"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13075843,"title":"Python C extension: return PyFloat_FromDouble(double) segfault","body":"<p>I recently converted some slow python code into a C extension. It works beautifully, except that it generates a segfault at the 162nd call into it, right at the return statement.</p>\n\n<p>Here's how it works. Once, prior to all of the calls to the function I want to compute, I load the data into memory (remembering to INCREF the parent object):</p>\n\n<pre><code>static PyObject *grm_loadDosage(PyObject *self, PyObject *args) {\n /***\n Load the dosage matrix into global memory\n Global variables: DOSAGES_PYMAT - will be a pointer to the PyArrayObject of the dosage array (must incref this)\n                   DOSAGES - will be a pointer to the double array underlying DOSAGES_PYMAT\n ***/\n PyArrayObject *dosageMatrixArr;\n if ( ! PyArg_ParseTuple(args,\"O\",&amp;DOSAGES_PYMAT_OBJ) ) return NULL;\n if ( NULL == DOSAGES_PYMAT_OBJ ) return NULL;\n\n Py_INCREF(DOSAGES_PYMAT_OBJ);\n\n /* from PyObject to Python Array */\n dosageMatrixArr = pymatrix(DOSAGES_PYMAT_OBJ);\n /* get the row and col sizes */\n N_VARIANTS = dosageMatrixArr-&gt;dimensions[0];\n N_SAMPLES = dosageMatrixArr-&gt;dimensions[1];\n DOSAGES = pymatrix_to_Carray(dosageMatrixArr);\n Py_RETURN_TRUE;\n}\n</code></pre>\n\n<p>(see <a href=\"http://www.scipy.org/Cookbook/C_Extensions/NumPy_arrays\" rel=\"nofollow\">http://www.scipy.org/Cookbook/C_Extensions/NumPy_arrays</a> for the C-array method). I then reference the loaded double[][], DOSAGES in the function I will call from python:</p>\n\n<pre><code>static PyObject *grm_calcdistance(PyObject *self, PyObject *args) {\n /** Given column indeces (samples) of DOSAGES, and an array of row indeces (the variants missing for one or both),\n     calculate the distance **/\n int samI,samJ,nMissing, *missing;\n PyObject *missingObj;\n PyArrayObject *missingArr;\n printf(\"debug1\\n\");\n if ( ! PyArg_ParseTuple(args,\"iiOi\",&amp;samI,&amp;samJ,&amp;missingObj,&amp;nMissing) ) return NULL;\n if ( NULL == missingObj ) return NULL;\n missingArr = pyvector(missingObj);\n missing = pyvector_to_Carray(missingArr);\n double replaced1[nMissing];\n double replaced2[nMissing];\n printf(\"debug2\\n\");\n\n int missingVectorIdx;\n int missingVariantIdx;\n // for each sample, store the dosage at the missing site (as it could be missing\n // in the OTHER sample), and replace it with 0.0 in the dosage matrix\n for ( missingVectorIdx = 0; missingVectorIdx &lt; nMissing; missingVectorIdx++ ) {\n  printf(\"debugA: %d &lt; %d\\n\",missingVectorIdx,nMissing);\n  missingVariantIdx = missing[missingVectorIdx];\n  replaced1[missingVariantIdx] = DOSAGES[missingVariantIdx][samI];\n  replaced2[missingVariantIdx] = DOSAGES[missingVariantIdx][samJ];\n  printf(\"debugB\\n\");\n  DOSAGES[missingVariantIdx][samI]=0.0;\n  DOSAGES[missingVariantIdx][samJ]=0.0;\n }\n\n // calculate the distance (this uses DOSAGES which we just modified)\n double distance = _calcDistance(samI,samJ);\n\n printf(\"debug3\\n\");\n // put the values that we replaced with 0.0 back into the matrix\n for ( missingVectorIdx = 0; missingVectorIdx &lt; nMissing; missingVectorIdx++ ) {\n  missingVariantIdx = missing[missingVectorIdx];\n  DOSAGES[missingVariantIdx][samI] = replaced1[missingVariantIdx];\n  DOSAGES[missingVariantIdx][samJ] = replaced2[missingVariantIdx];\n }\n printf(\"debug4: %f\\n\",distance);\n // grab the python object wrapper and return it\n PyObject * distPy = PyFloat_FromDouble((double)distance);\n printf(\"debug5\\n\");\n if ( NULL == distPy )\n  printf(\"and is NULL\\n\");\n return distPy;\n\n}\n</code></pre>\n\n<p>With tons of debug statements (that you see), I've localized the segfault to the return statement. That is, after the instantiation of the python float object, but somewhere between calling return from C, and the next executed line of python (which is, you guessed it, a print(\"debugReturned\"). What I see in stdout is:</p>\n\n<pre><code>debug4: -0.025160\ndebug5\nSegmentation fault\n</code></pre>\n\n<p>So the double is not a strange value, the python object is properly created, it's not NULL, but there's some error between returning from C, and continuing in python. Sources online suggest that this might be a INCREF/DECREF problem, but also state that PyFloat_FromDouble() and Py_BuildValue(\"f\",double) generate new references, so don't need to be INCREF'd. Both choices generate this same result. While I'm reasonably certain that I need to INCREF the PyObject holding my matrix during my grm_loadDosage function, I've tried both with and without that INCREF, with the same behavior.</p>\n\n<p>Any ideas what's going on?</p>\n\n<p>Thanks</p>\n\n<p>Also, a stacktrace:</p>\n\n<pre><code>#0  0x0000000000000000 in ?? ()\n#1  0x000000000045aa5c in PyEval_EvalFrameEx (f=0x2aaae1ae3f60, throwflag=&lt;value optimized out&gt;) at Python/ceval.c:2515\n#2  0x000000000045ecb4 in call_function (f=0x3fb7494970227c55, throwflag=&lt;value optimized out&gt;) at Python/ceval.c:4009\n#3  PyEval_EvalFrameEx (f=0x3fb7494970227c55, throwflag=&lt;value optimized out&gt;) at Python/ceval.c:2692\n#4  0x000000000045ecb4 in call_function (f=0x95c880, throwflag=&lt;value optimized out&gt;) at Python/ceval.c:4009\n#5  PyEval_EvalFrameEx (f=0x95c880, throwflag=&lt;value optimized out&gt;) at Python/ceval.c:2692\n#6  0x000000000045f626 in PyEval_EvalCodeEx (_co=0x98abe0, globals=&lt;value optimized out&gt;, locals=&lt;value optimized out&gt;, args=0x0, argcount=0, kws=0x0, kwcount=0, defs=0x0, defcount=0, kwdefs=0x0,\n    closure=0x0) at Python/ceval.c:3350\n#7  0x000000000045f74b in PyEval_EvalCode (co=0x146b098, globals=0x71, locals=0xc7) at Python/ceval.c:767\n#8  0x0000000000482fab in run_mod (fp=0x881b80, filename=0x2aaaae257de0 \"/humgen/gsa-hphome1/chartl/projects/t2d/gcta/resources/bin/cGRM/calculateGRM.py\", start=&lt;value optimized out&gt;,\n    globals=0x81e340, locals=0x81e340, closeit=1, flags=0x7fffffffbfd0) at Python/pythonrun.c:1783\n#9  PyRun_FileExFlags (fp=0x881b80, filename=0x2aaaae257de0 \"/humgen/gsa-hphome1/chartl/projects/t2d/gcta/resources/bin/cGRM/calculateGRM.py\", start=&lt;value optimized out&gt;, globals=0x81e340,\n    locals=0x81e340, closeit=1, flags=0x7fffffffbfd0) at Python/pythonrun.c:1740\n#10 0x0000000000483268 in PyRun_SimpleFileExFlags (fp=&lt;value optimized out&gt;, filename=0x2aaaae257de0 \"/humgen/gsa-hphome1/chartl/projects/t2d/gcta/resources/bin/cGRM/calculateGRM.py\", closeit=1,\n    flags=0x7fffffffbfd0) at Python/pythonrun.c:1265\n#11 0x00000000004964d7 in run_file (argc=&lt;value optimized out&gt;, argv=0x7df010) at Modules/main.c:297\n#12 Py_Main (argc=&lt;value optimized out&gt;, argv=0x7df010) at Modules/main.c:692\n#13 0x000000000041563e in main (argc=11, argv=0x7fffffffc148) at ./Modules/python.c:59\n</code></pre>\n"},{"tags":["python","cocos2d","game"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":50,"score":1,"question_id":13246677,"title":"Cocos2d: AttributeError: 'Director' object has no attribute '_window_virtual_width'","body":"<p>We are using the cocos2d framework to create a game.  We're completely new to this framework, so we cannot get the director object to work as we are expecting.  Here is our code skeleton: </p>\n\n<pre><code>from cocos.director import director\nfrom cocos.layer import base_layers\n\n\nimport sys\nimport math\nimport os\n\nimport pyglet\nimport cocos\n\n\nworld_width = 1000\nworld_height = 1000\nclass NetworkMap(cocos.layer.ScrollableLayer):\n    def __init__(self, world_width, world_height):\n        self.world_width = world_width\n        self.world_height = world_height\n        super(NetworkMap, self).__init__()\n        bg = ColorLayer(170,170,0,255,width=500,height=500)\n        self.px_width = world_width\n        self.px_height = world_height\n        self.add(bg,z=0)\n\nclass TestScene(cocos.scene.Scene):\n    def __init__(self):\n        super(TestScene,self).__init__()\n\n    def on_enter():\n        director.push_handlers(self.on_cocos_resize)\n        super(TestScene, self).on_enter()\n\n    def on_cocos_resize(self, usable_width, usable_height):\n        self.f_refresh_marks()\n\ndef main():\n    scene = TestScene()\n    director.init(world_width, world_height, do_not_scale=True)\n    world_map = NetworkMap(world_width, world_height)\n    scroller = cocos.layer.ScrollingManager()\n    scroller.add(world_map)\n    scene.add(scroller)\n    director.run(scene)\n</code></pre>\n\n<p>So for some reason the director doesn't have all the attributes we want. \nOur stack trace is:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"map.py\", line 49, in &lt;module&gt;\nmain()\nFile \"map.py\", line 39, in main\nscene = TestScene()\nFile \"map.py\", line 29, in __init__\nsuper(TestScene,self).__init__()\nFile \"/usr/local/lib/python2.7/dist-packages/cocos2d-0.5.5-py2.7.egg/cocos/scene.py\",     line 95, in __init__\nsuper(Scene,self).__init__()\nFile \"/usr/local/lib/python2.7/dist-packages/cocos2d-0.5.5-py2.7.egg/cocos/cocosnode.py\", line 114, in __init__\nself.camera = Camera()\nFile \"/usr/local/lib/python2.7/dist-packages/cocos2d-0.5.5-py2.7.egg/cocos/camera.py\", line 56, in __init__\n self.restore()\n File \"/usr/local/lib/python2.7/dist-packages/cocos2d-0.5.5-py2.7.egg/cocos/camera.py\", line 76, in restore\n width, height = director.get_window_size()\n File \"/usr/local/lib/python2.7/dist-packages/cocos2d-0.5.5-py2.7.egg/cocos/director.py\", line 522, in get_window_size\n return ( self._window_virtual_width, self._window_virtual_height)\nAttributeError: 'Director' object has no attribute '_window_virtual_width'\n</code></pre>\n"},{"tags":["python","mvc","pyqt"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13247089,"title":"QAbstractTableModel and QComboBox together","body":"<p>I have a subclass of a <code>QAbstractTableModel</code> and I want to use <code>QComboBox</code> to display a dropbox for this table.</p>\n\n<p>But by default it shows just the first column of my table, which is not what I want. I've tried <code>setModelColumn</code> to shows the column 1 instead of 0 but it did not work.</p>\n\n<p>After having a look around in the internet, I've found 2 solutions:</p>\n\n<ol>\n<li>Create another <code>QAbstractListModel</code> from the same data in the <code>QAbstractTableModel</code></li>\n<li>Use a <code>QSortFilterProxyModel</code> to hide other columns</li>\n</ol>\n\n<p>Which is the best?\nThanks</p>\n"},{"tags":["javascript","python","html","xml","django"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13246974,"title":"Get XML from python HttpResponse","body":"<p>Is there any way how to GET xml data (via Javascript) from python HttpResponse and place it into body element on webpage?</p>\n\n<p>There is example of my xml in python:</p>\n\n<pre><code>import xml.etree.ElementTree as ET\n\nroot = ET.Element(\"table\")\n\ntr = ET.SubElement(root, \"tr\")\ntd = ET.SubElement(tr, \"td\")\ntd.text = \"some text\"\ntree = ET.ElementTree(root) \n\nresponse = HttpResponse(tree)\n</code></pre>\n\n<p>JS:</p>\n\n<pre><code>$(document).ready(function() {\n  $.get(\"http://localhost:8000/getXml\", function(data){\n    alert(data);\n  });      \n});\n</code></pre>\n\n<p>Thanks for help.</p>\n"},{"tags":["python","database","algorithm","sets"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13246654,"title":"Python finding out sets highest match","body":"<p>I want to make a tool to help me planning the production. </p>\n\n<p>I have table of 2000 products, and roughly 1500 different model plates (I am working in a foundry). Each model plate has up to 10 different (or same) models on it (models = products). When I get the order I break it down and end up with list such as:</p>\n\n<pre><code>product1 = 200\nproduct2 = 500\nproduct3 = 300\n</code></pre>\n\n<p>where productX is code and numbers are needed ammounts.</p>\n\n<p>I'd like to make a tool that would scan through the model plates and find me the plates that have most of the ordered pieces on it. I would also like to do it in Python because I am familiar with it and I have wrote programs that interact with our database before.</p>\n\n<p>Now I hope that I explained it well enough :)</p>\n"},{"tags":["python","tree","python-2.7","persistence"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":22,"score":0,"question_id":13245618,"title":"How to save big class (Trie class) in python ? please tell me","body":"<p>How to save big class (Trie class) in python ? I really Need your idea\nplease answer me! \nI read 60MB of text file, split each word inside file then use it to construct special tree called Trie() \nI spent about 10 hours to construct the Trie(). after this process finish, I want to save the class that I have already run because I do not want to spend 10 hour again when I want to use in the future.\nThe problem that I have is : \nHow to save Trie() class in python , could you please answer me? because import 'pickle' can not be use to save Trie() class in this case. (the Trie class is very big)</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":12839293,"title":"how to wait until the required window title appers in pywinauto","body":"<p>How to wait until the required window title to be appers using <strong>pywinauto</strong>?</p>\n\n<p>I have to wait for required window title, once I found that window title have to do some action on that window. How I can do this?</p>\n"},{"tags":["python","search-replace"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":82,"score":0,"question_id":13236875,"title":"python replace ; with , if line starts with keyword","body":"<p>I have a textfile containing thousands of entries like:</p>\n\n<pre><code>@INBOOK{Abu-Lughod1991,\n  chapter = {Writing against culture},\n  pages = {137-162},\n  title = {Recapturing anthropology},\n  publisher = {School of American Research Press},\n  year = {1991},\n  editor = {Richard Fox},\n  author = {Abu-Lughod, Lila},\n  address = {Santa Fe /NM},\n  abstract = {Im Zusammenhang mit der Debatte um die writing culture fomuliert AL\n        eine feministische Kritik und zeigt, wie von dort doch Anregungen\n        für die Reflektion der Schreibweise und Repräsentation gekommen sind.*},\n  crossref = {Rabinow1986},\n  keywords = {Frauen; Feminismus; Erzählung als EG; Repräsentation; Roman; Schreibtechnik;\n        James Clifford; writing culture; Dialog;},\n  owner = {xko},\n  systematik1 = {Anth\\theor\\Ethnographie},\n  systematik2 = {Anth\\theor\\Text &amp; Ges},\n  timestamp = {1995-12-02}\n}\n</code></pre>\n\n<p>I will replace all semicolons in the keywords - field to comma. But only in the keywords field - other fields should be untouched:</p>\n\n<pre><code>keywords = {Frauen, Feminismus, Erzählung als EG, Repräsentation, Roman, Schreibtechnik, James Clifford, writing culture, Dialog,},\n</code></pre>\n\n<p>I'm not a programmer and maybe the following code-snippet is a good starting point and i would really appreciate if someone could complete it.</p>\n\n<pre><code>outfile = open(\"literatur_comma.txt\", \"w\") \nfor line in open(\"literatur_semicolon.txt\", \"r\"): \n    if line  # starts with \"keywords\" replace all semicolon with comma\n        outfile.write(line) # write in new file\noutfile.close() \n</code></pre>\n\n<p>Thanks a lot!</p>\n\n<p>EDIT: \nThanks for all your answers and codes, that's great!\nI did a mistake in my thoughts and if i use my code-wrapper (with outfile), then it creates a new file with the keywords in it.\nHow can i use the same file and replaces only the semicolons to comma in keywords line?</p>\n"},{"tags":["python","tags","beautifulsoup"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":5,"view_count":92,"score":-3,"question_id":13233548,"title":"How can I extract the text between <a></a>?","body":"<p>I'm using Beautiful Soup, but couldn't figure out how to do it.</p>\n\n<pre><code>&lt;/td&gt;\n        &lt;td class=\"playbuttonCell\"&gt;\n        &lt;a class=\"playbutton preview-track\" href=\"/music/example\" data-analytics-redirect=\"false\"  &gt;&lt;img class=\"transparent_png play_icon\" width=\"13\" height=\"13\" alt=\"Play\" src=\"http://cdn.last.fm/flatness/preview/play_indicator.png\" style=\"\" /&gt;&lt;/a&gt;    &lt;/td&gt;\n                                                        &lt;td class=\"subjectCell\" title=\"example, played 3 times\"&gt;\n            &lt;div&gt;\n                                        &lt;a href=\"/music/example\"   &gt;here lies the text i need&lt;/a&gt;\n</code></pre>\n\n<p>this isn't doing the job</p>\n\n<pre><code>print soup('a')\n\nfor link in soup('a'):\n    print html   \n</code></pre>\n\n<p>prints everything, what else can i try?</p>\n"},{"tags":["python","sqlite"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13244393,"title":"SQLite insert or ignore and return original _rowid_","body":"<p>I've spent some time reading the SQLite <a href=\"http://www.sqlite.org/lang_conflict.html\" rel=\"nofollow\">docs</a>, various questions and answers here on Stack Overflow, and <a href=\"http://sqlite.1065341.n5.nabble.com/Keeping-ROWID-for-INSERT-OR-REPLACE-td34237.html\" rel=\"nofollow\">this thing</a>, but have not come to a full answer.</p>\n\n<p>I know that there is no way to do something like <code>INSERT OR IGNORE INTO foo VALUES(...)</code> with SQLite and get back the rowid of the original row, and that the closest to it would be <code>INSERT OR REPLACE</code> <strong>but that deletes the entire row and inserts a new row and thus gets a new rowid</strong>.</p>\n\n<p>Example table:</p>\n\n<pre><code>CREATE TABLE foo(\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    data TEXT\n);\n</code></pre>\n\n<p>Right now I can do:</p>\n\n<pre><code>sql = sqlite3.connect(\":memory:\")\n# create database\nsql.execute(\"INSERT OR IGNORE INTO foo(data) VALUES(?);\", (\"Some text.\", ))\nthe_id_of_the_row = None\nfor row in sql.execute(\"SELECT id FROM foo WHERE data = ?\", (\"Some text.\", )):\n    the_id_of_the_row = row[0]\n</code></pre>\n\n<p>But something ideal would look like:</p>\n\n<pre><code>the_id_of_the_row = sql.execute(\"INSERT OR IGNORE foo(data) VALUES(?)\", (\"Some text\", )).lastrowid\n</code></pre>\n\n<p><strong>What is the best (read: most efficient) way to insert a row into a table and return the rowid, or to ignore the row if it already exists and just get the rowid?</strong> Efficiency is important because this will be happening quite often.</p>\n\n<p><strong>Is there a way to <code>INSERT OR IGNORE</code> and return the rowid of the row that the ignored row was compared to?</strong> This would be great, as it would be just as efficient as an insert.</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13240016,"title":"Django model class decorator","body":"<p>I have a need to track changes on Django model instances. I'm aware of solutions like django-reversion but they are overkill for my cause.</p>\n\n<p>I had the idea to create a parameterized class decorator to fit this purpose. The arguments are the field names and a callback function. Here is the code I have at this time:</p>\n\n<pre><code>def audit_fields(fields, callback_fx):\n    def __init__(self, *args, **kwargs):\n        self.__old_init(*args, **kwargs)\n        self.__old_state = self.__get_state_helper()\n\n    def save(self, *args, **kwargs):\n        new_state = self.__get_state_helper()\n\n        for k,v in new_state.items():\n            if (self.__old_state[k] != v):\n                callback_fx(self, k, self.__old_state[k], v)\n\n        val = self.__old_save(*args, **kwargs)\n        self.__old_state = self.__get_state_helper()\n        return val\n\n    def __get_state_helper(self):\n        # make a list of field/values.\n        state_dict = dict()\n        for k,v in [(field.name, field.value_to_string(self)) for field in self._meta.fields if field.name in fields]:\n            state_dict[k] = v\n        return state_dict\n\n    def fx(clazz):\n        # Stash originals\n        clazz.__old_init = clazz.__init__\n        clazz.__old_save = clazz.save\n\n        # Override (and add helper)\n        clazz.__init__ = __init__\n        clazz.__get_state_helper = __get_state_helper\n        clazz.save = save\n        return clazz\n\n    return fx\n</code></pre>\n\n<p>And use it as follows (only relevant part):</p>\n\n<pre><code>@audit_fields([\"status\"], fx)\nclass Order(models.Model):\n    BASKET = \"BASKET\"\n    OPEN = \"OPEN\"\n    PAID = \"PAID\"\n    SHIPPED = \"SHIPPED\"\n    CANCELED = \"CANCELED\"\n    ORDER_STATES = ( (BASKET, 'BASKET'),\n                 (OPEN, 'OPEN'),\n                 (PAID, 'PAID'),\n                 (SHIPPED, 'SHIPPED'),\n                 (CANCELED, 'CANCELED') )\n    status = models.CharField(max_length=16, choices=ORDER_STATES, default=BASKET)\n</code></pre>\n\n<p>And test on the Django shell with:</p>\n\n<pre><code>from store.models import Order\no=Order()\no.status=Order.OPEN\no.save()\n</code></pre>\n\n<p>The error I receive then is:</p>\n\n<pre><code>TypeError: int() argument must be a string or a number, not 'Order'\n</code></pre>\n\n<p>The full stacktrace is here: <a href=\"https://gist.github.com/4020212\" rel=\"nofollow\">https://gist.github.com/4020212</a></p>\n\n<p>Thanks in advance and let me know if you would need more info!</p>\n\n<p><strong>EDIT:</strong> Question answered by randomhuman, code edited and usable as shown!</p>\n"},{"tags":["python","recursion"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":425,"score":3,"question_id":3719853,"title":"Why does my recursive funciton return None?","body":"<p>I'm currently trying to wrap my head around learning Python and I've come to a bit of a stall at recursive functions. In the text I'm using (<a href=\"http://www.greenteapress.com/thinkpython/\" rel=\"nofollow\">Think Python</a>), one of the exercises is to write a function that determines if number <em>a</em> is a power of number <em>b</em> using the following definition:</p>\n\n<blockquote>\n  <p>\"A number, a, is a power of b if it is divisible by b and a/b is a power of b. Write a function called is_power that takes parameters a and b and returns True if a is a power of b.\"</p>\n</blockquote>\n\n<p>The current state of my function is:</p>\n\n<pre><code>def isPower(a,b):\n    return a % b == 0 and (a/b) % b == 0\n\nprint isPower(num1,num2)\n</code></pre>\n\n<p>As it is, this produces the result I expect. However the chapter is focused on writing recursive functions to reduce redundancy and I'm not quite sure how I can turn the final \"(a/b) % b == 0\" into a recursion. I've attempted:</p>\n\n<pre><code>def isPower(a,b):\n    if a % b != 0:\n        return False\n    elif isPower((a/b),b):\n        return True\n</code></pre>\n\n<p>But that just returns None. </p>\n\n<p>What is the proper way to recurse this function?</p>\n"},{"tags":["python","django"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13207747,"title":"No model named \"myapp\" even though I've added it in settings.py","body":"<p>I'm getting the following error:</p>\n\n<pre><code>ImportError at /\nNo module named midi_app\nRequest Method: GET\nRequest URL:    http://127.0.0.1:8000/\nDjango Version: 1.4.1\nException Type: ImportError\nException Value:    No module named midi_app\nException Location: /Users/home/virtualenv/venv/lib/python2.7/site-packages/django/utils/importlib.py in import_module, line 35\nPython Executable:  /Users/home/virtualenv/venv/bin/python\n</code></pre>\n\n<p>I have added my app \"midi_app\" to the <code>INSTALLED_APPS</code> section in settings.py. I'm not sure why I'm seeing this error. Could the virtualenv have anything to do with it?</p>\n\n<p>Thanks. </p>\n\n<p>UPDATE: I've added as many directories as I can think of and I'm still seeing this error. Please see my path below. Please assist, I'm getting really frustrated. </p>\n\n<blockquote>\n  <p>'/Users/home/virtualenv/venv/lib/python27.zip', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/plat-darwin', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/plat-mac', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/plat-mac/lib-scriptpackages',</p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/lib-tk', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/lib-old', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/lib-dynload', </p>\n  \n  <p>'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7', </p>\n  \n  <p>'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',</p>\n  \n  <p>'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',</p>\n  \n  <p>'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',</p>\n  \n  <p>'/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',</p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/site-packages', </p>\n  \n  <p>'/Users/home/Desktop/Web Development/Django-1.4', </p>\n  \n  <p>'/Users/home/virtualenv/venv',  </p>\n  \n  <p>'/Users/home/Desktop/Web Development/Aptana Studio 3.0',  </p>\n  \n  <p>'/Users/home/virtualenv/venv/bin',</p>\n  \n  <p>'/Users/home/Desktop/Web Development',  </p>\n  \n  <p>'/Users/home/virtualenv',</p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/site-packages/PIL', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python27.zip',</p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/plat-darwin', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/plat-mac', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/plat-mac/lib-scriptpackages',</p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/lib-tk', </p>\n  \n  <p>'/Users/home/virtualenv/venv/lib/python2.7/lib-old'</p>\n</blockquote>\n"},{"tags":["python","numpy","scipy","kdtree"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13246694,"title":"Scipy kd-tree implementation throwing \"negative dimensions\"","body":"<p>I get the following error seemingly every time I try to do anything involving a kd-tree. Strangely, just days ago this very code was working fine, and it is still working fine on my colleague's machine (we are using the same repo).</p>\n\n<p>It seems to happen no matter what I pass in.</p>\n\n<p>Can anyone offer any insights?</p>\n\n<pre><code>  File \"filename.py\", line 69, in methodname\n    get_index = self.kd_tree.query(array_to_query)\n  File \"/Library/Python/2.7/site-packages/scipy-0.12.0.dev_ddd617d_20120920-py2.7-macosx-10.8-x86_64.egg/scipy/spatial/kdtree.py\", line 425, in query\n    for c in np.ndindex(retshape):\n  File \"/Library/Python/2.7/site-packages/numpy-1.8.0.dev_9597b1f_20120920-py2.7-macosx-10.8-x86_64.egg/numpy/lib/index_tricks.py\", line 536, in __init__\n    x = as_strided(_nx.zeros(1), shape=shape, strides=_nx.zeros_like(shape))\n  File \"/Library/Python/2.7/site-packages/numpy-1.8.0.dev_9597b1f_20120920-py2.7-macosx-10.8-x86_64.egg/numpy/lib/stride_tricks.py\", line 28, in as_strided\n    return np.asarray(DummyArray(interface, base=x))\n  File \"/Library/Python/2.7/site-packages/numpy-1.8.0.dev_9597b1f_20120920-py2.7-macosx-10.8-x86_64.egg/numpy/core/numeric.py\", line 320, in asarray\n    return array(a, dtype, copy=False, order=order)\nValueError: negative dimensions are not allowed\n</code></pre>\n"},{"tags":["python","recursion","ioerror"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13246114,"title":"Python IOError: Errno 13 Permission denied","body":"<p>Ok, I'm totally baffled.  I've been working on this all night and I can't get it to work.  I have premission to look into the file, all I want to do is read the darn thing.  Every time I try I get:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;pyshell#3&gt;\", line 1, in &lt;module&gt;\n    scan('test', rules, 0)\n  File \"C:\\Python32\\PythonStuff\\csc242hw7\\csc242hw7.py\", line 45, in scan\n    files = open(n, 'r')\nIOError: [Errno 13] Permission denied: 'test\\\\test'\n</code></pre>\n\n<p>Here is my code.  It's unfinished but I feel I should at least be getting correct values for the sections I am testing.  Basically I want to look into a folder, and if there is a file scan it looking for whatever I set my <code>signatures</code> to.  If there are folders I will or will not scan them depending on the <code>depth</code> specified.  If there is a <code>depth &lt; 0</code> then it will return.  If <code>depth == 0</code> then it will just scan the elements in the first folder.  If <code>depth &gt; 0</code> it will scan folders up until the specified depth.  None of that matters thought, because for whatever reason I don't have permission to read the file.  I have no idea what I am doing wrong.</p>\n\n<pre><code>def scan(pathname, signatures, depth):\n'''Recusively scans all the files contained in the folder pathname up\nuntil the specificed depth'''\n    # Reconstruct this!\n    if depth &lt; 0:\n        return\n    elif depth == 0:\n        for item in os.listdir(pathname):\n            n = os.path.join(pathname, item)\n            try:\n                # List a directory on n\n                scan(n, signatures, depth)\n            except:\n                # Do what you should for a file\n                files = open(n, 'r')\n                text = file.read()\n                for virus in signatures:\n                    if text.find(signatures[virus]) &gt; 0:\n                        print('{}, found virus {}'.format(n, virus))\n                files.close()\n</code></pre>\n\n<p>Just a quick edit:</p>\n\n<p>This code below does something very similar, but I can't control the depth.  It however, works fine.</p>\n\n<pre><code>def oldscan(pathname, signatures):\n    '''recursively scans all files contained, directly or\n       indirectly, in the folder pathname'''\n    for item in os.listdir(pathname):\n        n = os.path.join(pathname, item)\n        try:\n            oldscan(n, signatures)\n        except:\n            f = open(n, 'r')\n            s = f.read()\n            for virus in signatures:\n                if s.find(signatures[virus]) &gt; 0:\n                    print('{}, found virus {}'.format(n,virus))\n            f.close()\n</code></pre>\n"},{"tags":["python","django"],"answer_count":3,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":195,"score":5,"question_id":13188036,"title":"Loading dictionary object causing memory spike","body":"<p>I have a dictionary object with about 60,000 keys that I cache and access in my Django view. The view provides basic search functionality where I look for a search term in the dictionary like so:</p>\n\n<pre><code>projects_map = cache.get('projects_map')\nprojects_map.get('search term')\n</code></pre>\n\n<p>However, just grabbing the cached object (in line 1) causes a a giant spike in memory usage on the server - upwards of 100MBs sometimes - and the memory isn't released even after the values are returned and the template rendered.</p>\n\n<p>How can I keep the memory from jacking up like this? Also, I've tried explicitly deleting the object after I grab the value but even that doesn't release the memory spike. </p>\n\n<p>Any help is greatly appreciated.</p>\n"},{"tags":["python"],"answer_count":4,"favorite_count":3,"up_vote_count":7,"down_vote_count":0,"view_count":1196,"score":7,"question_id":3428769,"title":"Finding the largest delta between two integers in a list in python","body":"<p>I have a list of integers, i.e.:</p>\n\n<pre><code>values = [55, 55, 56, 57, 57, 57, 57, 62, 63, 64, 79, 80]\n</code></pre>\n\n<p>I am trying to find the largest difference between two consecutive numbers. In this case it would be 15 from 64->79. The numbers can be negative or positive, increasing or decreasing or both. The important thing is I need to find the largest delta between two consecutive numbers. </p>\n\n<p>What is the fastest way to do this? These lists can contain anywhere from hundreds to thousands of integers. </p>\n\n<p>Edit: This is the code I have right now:</p>\n\n<pre><code>    prev_value = values[0]\n    largest_delta = 0\n\n    for value in values:\n            delta = value - prev_value\n            if delta &gt; largest_delta:\n                    largest_delta = delta\n            prev_value = value\n\n    return largest_delta\n</code></pre>\n\n<p>Is there a faster way to do this? It takes a while.</p>\n"},{"tags":["python"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13246394,"title":"Ending pythonw.exe process on manual exit","body":"<p>I can't seem to find the right google search to figure out something that should be easy.</p>\n\n<p>I am using wxPython to create a GUI, and saving the Python files as .pyw so I don't have a console. Then I am importing another .py file into the main window when a user does an action. Doing so created the pythonw.exe instance that won't close. To be clear, the .pyw that opens if I only open the main console will clear from my processes if I don't open/insert the other .py file from the first file while running.</p>\n\n<p>When I use the program everything is perfectly fine, but when I use the Windows \"X\" button to close I still get pythonw.exe in my processes, and the file I am printing errors to is locked due to something else using it(the pythonw.exe). What code do I need to use to make sure that python is exiting completely? It also seems to stay whenever I build in a file - exit as well, and it is only staying on the processes if I insert the other module(only done with user input)</p>\n\n<p>Also this may be obvious but if I open the imported file manually it has the same behavior, as in the python.exe closes when I close out of the file.</p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":32,"score":1,"question_id":13246273,"title":"UnicodeDecodeError (once again) with format() but not with concatenation","body":"<p>I have a class chunk with text fields <code>title</code> and <code>text</code>. When I want to print them, I get (surprise, surprise!) <code>UnicodeDecodeError</code>. It gives me an error when I try to format an output string, but when I just concatenate text and title and return it, I get no error:</p>\n\n<pre><code>class Chunk:\n  # init, fields, ...\n\n  # this implementation will give me an error\n  def __str__( self ):\n    return u'{0} {1}'.format ( enc(self.text), enc(self.title) )\n\n  # but this is OK - all is printed without error\n  def __str__( self ):\n    return enc(self.text) + enc(self.title)\n\ndef enc(x):\n  return x.encode('utf-8','ignore') # tried many combinations of arguments...\n\n\nc = Chunk()\nc.text, c.title = ... # feed from external file\nprint c\n</code></pre>\n\n<p>Bum! Error!</p>\n\n<pre><code>return u'{0} {1}'.format ( enc(self.text), enc(self.title) )\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 2844: ordinal not in range(128)\n</code></pre>\n\n<p>I think I used all the possible combinations of <code>encode</code>/<code>decode</code>/<code>utf-8</code>/<code>ascii</code>/<code>replace</code>/<code>ignore</code>/...</p>\n\n<p>(the python unicode issue is <em>really</em> irritating!)</p>\n"},{"tags":["python","select","pygame","polling"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":87,"score":0,"question_id":12134948,"title":"Python select.select, select.poll: Corrupted Double-linked List","body":"<p>I have a rather large client-server network application, written in Python. I'm using select.poll to provide asynchronous capabilities. For the past six months, everything has worked fine. However, recently I changed some things and allowed the client to reliably log-off from the server. It appeared at first glance that the client was never receiving the request, and furthermore, it was blocking. When I killed the process with , I received the following output:</p>\n\n<pre><code>*** glibc detected *** /usr/bin/python: corrupted double-linked list: 0x0a9fea60 ***\n======= Backtrace: =========\n/lib/i386-linux-gnu/libc.so.6(+0x6cbe1)[0xd96be1]\n/lib/i386-linux-gnu/libc.so.6(+0x6fc1c)[0xd99c1c]\n/lib/i386-linux-gnu/libc.so.6(__libc_malloc+0x63)[0xd9b1d3]\n/usr/lib/i386-linux-gnu/libxcb.so.1(+0x8ff6)[0xb30ff6]\n/usr/lib/i386-linux-gnu/libxcb.so.1(+0x706d)[0xb2f06d]\n/usr/lib/i386-linux-gnu/libxcb.so.1(+0x75b5)[0xb2f5b5]\n/usr/lib/i386-linux-gnu/libxcb.so.1(xcb_writev+0x67)[0xb2f667]\n/usr/lib/i386-linux-gnu/libX11.so.6(_XSend+0x14b)[0x59b42b]\n/usr/lib/i386-linux-gnu/libX11.so.6(_XFlush+0x39)[0x59b889]\n/usr/lib/i386-linux-gnu/libX11.so.6(XFlush+0x31)[0x57ba81]\n/usr/lib/libSDL-1.2.so.0(+0x34dfe)[0x16adfe]\n/usr/lib/libSDL-1.2.so.0(+0x37998)[0x16d998]\n/usr/lib/libSDL-1.2.so.0(+0x393db)[0x16f3db]\n/usr/lib/libSDL-1.2.so.0(SDL_PumpEvents+0x3d)[0x140d7d]\n/usr/lib/libSDL-1.2.so.0(SDL_PollEvent+0x17)[0x140db7]\n/usr/lib/libSDL-1.2.so.0(SDL_EventState+0x58)[0x140f78]\n/usr/lib/libSDL-1.2.so.0(SDL_JoystickEventState+0x5b)[0x16810b]\n/usr/lib/python2.7/dist-packages/pygame/joystick.so(+0x196d)[0x55896d]\n/usr/lib/python2.7/dist-packages/pygame/base.so(+0x178a)[0x56078a]\n/usr/lib/python2.7/dist-packages/pygame/base.so(+0x17c7)[0x5607c7]\n/usr/bin/python(PyEval_EvalFrameEx+0x4332)[0x80de822]\n/usr/bin/python(PyEval_EvalCodeEx+0x127)[0x80e11e7]\n/usr/bin/python[0x8105a61]\n/usr/bin/python(PyObject_Call+0x4a)[0x80a464a]\n/usr/bin/python(PyEval_CallObjectWithKeywords+0x44)[0x80da034]\n/usr/bin/python(Py_Finalize+0xc7)[0x8070ee1]\n/usr/bin/python(Py_Main+0xc66)[0x805c109]\n/usr/bin/python(main+0x1b)[0x805b25b]\n/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xe7)[0xd40e37]\n/usr/bin/python[0x81074ad]\n</code></pre>\n\n<p>followed by a memory map, which I'm not posting for the sake of brevity. I ran the code under PDB, and found that the client was blocking <em>on the call to <code>pollingObject.poll(0)</code></em>, which shouldn't be blocking. So, I changed that call to <code>select.select([socket], [], [], 0)</code>, still without success. I'm using PyGame, if that makes a difference, as I know it sometimes does. I'm completely lost here. I know that Python overrides <code>malloc</code>, could it have something to do with that?</p>\n"},{"tags":["python","asynchronous","websocket","subprocess","tornado"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":35,"score":2,"question_id":13245984,"title":"python subprocess callback when updated output","body":"<p>I am using tornado. I hope the following is easy to understand, It's spawning a tcproute process and sending the output to the websocket's other end.</p>\n\n<pre><code>class TracerouteHandler(tornado.websocket.WebSocketHandler):\n  def open(self,ip):\n    p = subprocess.Popen(['traceroute',ip],stdout=subprocess.PIPE, stderr=subprocess.PIPE)\n    while p.poll() is None: #running\n      line=p.stdout.readline()\n      if line!=None and len(line)&gt;0:\n        self.write_message(json.dumps({'stdout':line})) \n    self.write_message(json.dumps({'stdout':'Done! For red marked ip addresses, the location couldn\\'t be determined with &lt;a href=\"http://hostip.info\"&gt;hostip.info&lt;/a&gt;. If you know the correct location, please update it there.'}))\n</code></pre>\n\n<p>The problem is that due to the <code>while p.poll() is None</code> loop, tornado blocks. Also, if there's nothing in p.stdout to read, the <code>p.stdout.readline</code> blocks. So I'd like to have some sort of callback mechanism that gets fired when I have something new in <code>p.stdout</code>. How do I do that?</p>\n"},{"tags":["python","regex"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13246197,"title":"re.sub in python 2.7","body":"<p>Trying to replace chunks of text in html files with 'xxx' using re.sub, python 2.7. I can only get it to work with basic strings that have no spaces or new lines. This code finds nothing to replace. I've tried DOTALL, and other things, but nothing works. It just prints the whole file. I've successfully used re.search, but this won't work. </p>\n\n<p>CODE:</p>\n\n<pre><code>print re.sub(r'table\\sstyle\\=(.+)script', r'xxx', text, re.S)\n</code></pre>\n\n<p>IS SEARCHING (text):</p>\n\n<pre><code>&lt;table style=\"background-color: #ecddb0\"&gt;\n&lt;tbody&gt;\n&lt;TR&gt;\n&lt;TD&gt;\n&lt;style type=\"text/css\"&gt;\nbody {\nbackground-color: #ffffff;\nmargin: 0px;\npadding: 0px 0 0 0px;\n&lt;/style&gt;\n&lt;script type=\"text/javascript\n</code></pre>\n"},{"tags":["python","regex"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":5,"view_count":41,"score":-5,"question_id":13245510,"title":"How to do auto formating of text in python?","body":"<p>I want to auto correct a para written in english. My criteria is:</p>\n\n<p><strong>Double or multiple spaces,commas and question marks should be replaced with the single.Space before comma(','),fullstops('.'),semicolon(';'),question mark ('?') and space after comma is mandatory</strong>.</p>\n"},{"tags":["python"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":50,"score":0,"question_id":13246116,"title":"Read files in python","body":"<p>Python learner. So please excuse me.\nI am following: <a href=\"http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files\" rel=\"nofollow\">http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files</a></p>\n\n<p>I want to read a file; here is my file:</p>\n\n<pre><code># cat test \nline1 word1\nline2 word2\nline3 word3\nline4 word4\n</code></pre>\n\n<p>and here it my code:</p>\n\n<pre><code>&gt;&gt;&gt; f = open ('test')\n&gt;&gt;&gt; for line in f:\n...     print f\n... \n&lt;open file 'test', mode 'r' at 0xb7729180&gt;\n&lt;open file 'test', mode 'r' at 0xb7729180&gt;\n&lt;open file 'test', mode 'r' at 0xb7729180&gt;\n&lt;open file 'test', mode 'r' at 0xb7729180&gt;\n</code></pre>\n\n<p>How and why i am getting above output? I was hoping that it will print each line per line. \nWhat am I missing here. looking at the link mentioned above, my syntax seems to be OK but the output is not </p>\n\n<p>Thanks.</p>\n"},{"tags":["python","string","unicode","printing"],"answer_count":9,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":1996,"score":3,"question_id":761361,"title":"Suppress the u'prefix indicating unicode' in python strings","body":"<p>Is there a way to globally suppress the unicode string indicator in python?  I'm working exclusively with unicode in an application, and do a lot of interactive stuff.  Having the u'prefix' show up in all of my debug output is unnecessary and obnoxious.  Can it be turned off?</p>\n"},{"tags":["python","gmail","oauth-2.0","gmail-imap","imaplib"],"answer_count":4,"favorite_count":2,"up_vote_count":5,"down_vote_count":0,"view_count":829,"score":5,"question_id":9134491,"title":"Access Gmail Imap with OAuth 2.0 Access token","body":"<p>I am using Google's Oauth 2.0 to get the user's access_token, but I dont know how to use it with imaplib to access inbox.</p>\n"},{"tags":["python","gmail","gmail-imap","imaplib"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":12375113,"title":"IMAP in Corporate Gmail","body":"<p>I am trying to download emails using imaplib with Python. I have tested the script using my own email account, but I am having trouble doing it for my corporate gmail (I don't know how the corporate gmail works, but I go to gmail.companyname.com to sign in). When I try running the script with imaplib.IMAP4_SSL(\"imap.gmail.companyname.com\", 993), I get an error gaierror name or service not known. Does anybody know how to connect to a my company gmail with imaplib?</p>\n"},{"tags":["python","scripting","spss"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13244985,"title":"Transpose in SPSS","body":"<p>I have 525 rows/records for 35 columns of data in an SPSS project. My goal is to run a q-mode PCA which is a PCA that is run on a transposed table.</p>\n\n<p>Are there any Python scripts for SPSS or other tips for automating this process?</p>\n"},{"tags":["python","sockets"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13245772,"title":"Show all open sockets in Python","body":"<p>In Python 2.7 is there a way to get information on all open sockets similar to what netstat/ss does in linux?</p>\n\n<p>I am interested in writing a small program (similar to EtherApe) that tracks when my computer opens a connection to a server.  </p>\n"},{"tags":["python","z3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13182307,"title":"Explanations in Fixedpoints Z3","body":"<p>When I enable the explanation generation option in fixedpoints Z3Py, I am getting a core dump with the following messages.</p>\n\n<blockquote>\n  <p>Error setting 'DL_GENERATE_EXPLANATIONS', reason: unknown option.<br>\n  terminate called after throwing an instance of 'z3_error'   Aborted\n  (core dumped)</p>\n</blockquote>\n\n<p>I am using Z3 4.2 on Ubuntu 12.04, and I get the error for the example given in Z3Py docs in the \"Explanations\" section.</p>\n\n<p>I am wondering what may be causing this problem.</p>\n"},{"tags":["python","django","active-directory","django-authentication"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13245756,"title":"Django Auth ldap works only for AUTH_LDAP_BIND_DN user","body":"<p>I'm trying to build user authentication against our LDAP using django-auth-ldap package.</p>\n\n<p>settings.py</p>\n\n<pre><code> AUTHENTICATION_BACKENDS = (\n    'django_auth_ldap.backend.LDAPBackend',\n    'django.contrib.auth.backends.ModelBackend',\n )\n\n import ldap\n from django_auth_ldap.config import LDAPSearch, GroupOfNamesType\n\n\n # Baseline configuration.\n AUTH_LDAP_SERVER_URI = \"ldap://ldap.example.com\"\n\n AUTH_LDAP_BIND_DN = \"cn=ldap_user,ou=PEOPLE, dc=example,dc=com\"\n AUTH_LDAP_BIND_PASSWORD = \"test123\"\n AUTH_LDAP_USER_SEARCH = LDAPSearch(\"ou=PEOPLE,dc=example,dc=com\",\n         ldap.SCOPE_SUBTREE, \"(cn=%(user)s)\")\n\n\n\n # Populate the Django user from the LDAP directory.\n AUTH_LDAP_USER_ATTR_MAP = {\n     \"first_name\": \"givenName\",\n     \"last_name\": \"sn\",\n     \"email\": \"mail\"\n     }\n</code></pre>\n\n<p>The above configuration works only for AUTH_LDAP_BIND_DN user (i.e ldap_user), but if i login using other name, authentication will fails.</p>\n\n<p>And also check all my users are in PEOPLE group.</p>\n\n<p>Why this configuration works only for one user?</p>\n"},{"tags":["python","list","dictionary"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13243883,"title":"iterating over a string in a list in a dictionary PYTHON","body":"<p>I've got a dictionary full of lists called \"possible\" with keys 'a' - 'z'.  Each key has the value of a list with 'a' through 'z' in it.  Essentially, 26 alphabets.  </p>\n\n<p>I clean a string into lowercase and strip the punctuation and save each word into a list named \"cleanedWords\".  </p>\n\n<p>I want to go through the list and if the word in the list has only two letters, remove the value 'c' from the key for both of the letters in the two letter word.  Then move on the the next 2 letter word and repeat.  </p>\n\n<p>This is the snippet with the error:</p>\n\n<pre><code>for y in cleanedWords:\n    if len(y) == 2:\n        for i in y:\n            possible[i].remove('c')\n</code></pre>\n\n<p>Here is the error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"F:\\python\\crypto\\cipher.py\", line 83, in &lt;module&gt;\n    possible[i].remove('c')\nValueError: list.remove(x): x not in list\n</code></pre>\n\n<p>Clearly I am doing something wrong.  Can someone point me in the right direction? Can I not call on \"y\" how I did? </p>\n\n<p>Tyler</p>\n"},{"tags":["c++","python","lua"],"answer_count":6,"favorite_count":0,"up_vote_count":6,"down_vote_count":2,"view_count":192,"score":4,"question_id":13242098,"title":"Why should I embed a scripting language?","body":"<p>I am learning C++ now and I have heard a lot about embedded scripting languages. I imagined it completely different.</p>\n\n<p>I thought I would write all of my performance heavy functions in C++ and call them out of a scripting language such as Lua or Python.</p>\n\n<p>But it seems it is the other way around. -> Write functions in Lua/Python and call them in C code. </p>\n\n<p><strong>What is the advantage of embedding a language in C++ instead of writing an API in C++ and calling those functions in another language?</strong></p>\n\n<p>Example: </p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>// function in c++\nint expensiveFunction(){\n  return 1;\n}\n</code></pre>\n\n<p>Then in Python I would call this function and I would have the performance from C++ but can make changes at runtime thanks to Python's runtime interpreter.</p>\n"},{"tags":["python","rdf","sparql"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":77,"score":2,"question_id":8287394,"title":"issue in installing SPARQLWrapper in python","body":"<p>I installed SPARQLWrapper in python\nin the installation it shows: \nInstalled c:\\python27\\lib\\site-packages\\sparqlwrapper-1.4.2-py2.7.egg</p>\n\n<p>egg file are available in sit-packages.</p>\n\n<p>When I tried to import SPARQLWrapper , the program cannot it.\nI am new to python and have no clue what are these egg files and how to handle it.</p>\n\n<p>could someone guide me how can i import SPARQL wrapper</p>\n"},{"tags":["python","list-comprehension"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13245470,"title":"Python: What is zip doing in this list comprehension","body":"<p>I am trying to understand this:</p>\n\n<pre><code>a = \"hello\"\nb = \"world\"\n[chr(ord(x) ^ ord(y)) for (x, y) in zip(a[:len(b)], b)]\n</code></pre>\n\n<p>I understand the <code>XOR</code> part but I don't get what zip is doing.</p>\n"},{"tags":["python","map","reduce","frequency-distribution"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":70,"score":2,"question_id":13242103,"title":"How to compute letter frequency in a string using pythons built-in map and reduce functions","body":"<p>I would like to compute the frequency of letters in a string using pythons map and reduce built-in functions. Could anyone offer some insight into how I might do this?</p>\n\n<p>What I've got so far:</p>\n\n<pre><code>s = \"the quick brown fox jumped over the lazy dog\"\n\n# Map function\nm = lambda x: (x,1)\n\n# Reduce\n# Add the two frequencies if they are the same\n# else.... Not sure how to put both back in the list\n# in the case where they are not the same.\nr = lambda x,y: (x[0], x[1] + y[1]) if x[0] == y[0] else ????\n\nfreq = reduce(r, map(m, s))\n</code></pre>\n\n<p>This works great when all the letters are the same.</p>\n\n<pre><code>&gt;&gt;&gt; s\n'aaaaaaa'\n&gt;&gt;&gt; map(m, s)\n[('a', 1), ('a', 1), ('a', 1), ('a', 1), ('a', 1), ('a', 1), ('a', 1)]\n&gt;&gt;&gt; reduce(r, map(m, s))\n('a', 7)\n</code></pre>\n\n<p>How do I get it to work nicely when there are different letters?</p>\n"},{"tags":["php","python","ruby","speech-to-text","transcription"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":1849,"score":0,"question_id":4583306,"title":"Speech-to-Text API","body":"<p>Does a decent one exist? </p>\n\n<p>I have a bunch of short mp3/wav files, and I'd like to use the API to transcribe them (and future sound files). PHP is preferred, but whatever works.</p>\n"},{"tags":["c++","python","qt","client"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":48,"score":0,"question_id":13236859,"title":"C++ Qt - QTcpSocket emit readyRead() but canReadLine() always false","body":"<p>I am writing a client in C++ and a server in Python.</p>\n\n<p>The server accepts the connection from the client, and sends to the client its player ID number, formated for the regular expression \"id\\s\\d\". (e.g. \"id 3\")</p>\n\n<pre><code> if s is serversocket:\n            print \"Listening...\"\n            if accept_connection or nb_player &lt; 5:\n                connection, client_address = s.accept();\n                print 'New connection from ', client_address\n                connection.setblocking(0)\n                inputs.append(connection)\n        # Send player I to new connection\n        connection.send(\"id \"+str(len(inputs)-1))\n</code></pre>\n\n<p>The client initializes its socket, and connect. I implemented <code>connected()</code> to display a message on the GUI, if it is emitted. It is emitted without problem. Same thing on the server side, I receive the connection without issues.</p>\n\n<pre><code>Window::Window(QWidget *parent) :\n    QDialog(parent),\n    ui(new Ui::Window)\n{\n    ui-&gt;setupUi(this);\n\n    /* Initialize socket */\n    socket = new QTcpSocket(this);\n    socket-&gt;connectToHost(\"localhost\", 13456);\n\n    connect(socket, SIGNAL(readyRead()), this, SLOT(data_received()));\n    connect(socket, SIGNAL(connected()), this, SLOT(connected()));\n}\n</code></pre>\n\n<p>The server receives data from the client without problem. <strong>It is the client that does not receive the information correctly.</strong> </p>\n\n<pre><code>void Window::data_received(){\n\n    QRegExp id_re(\"id\\\\s(\\\\d)\");\n\n    while (socket-&gt;canReadLine()){\n        /* Read line in socket (UTF-8 for accents)*/\n        ui-&gt;log-&gt;append(\"listening...\");\n        QString line = QString::fromUtf8(socket-&gt;readLine()).trimmed();\n\n        /* Player ID returned by server */\n        if ( id_re.indexIn(line) != -1){\n            //Test\n            ui-&gt;log-&gt;append(\"The ID arrived\");\n            //Extract ID\n            QString id_str = id_re.cap(1);\n            //Put in data structure of player\n            player-&gt;set_player_id(id_str);\n            //Display message\n            ui-&gt;log-&gt;append(QString(\"You are Player \"+ player-&gt;get_player_id()));\n\n        }\n    }\n}\n</code></pre>\n\n<p><code>get_player_id()</code> returns a <code>QString</code></p>\n\n<p>I targeted my problem down, and it seems that canReadLine() is never returning true, therefore I can never read it. What could cause that?</p>\n"},{"tags":["python","html"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13244878,"title":"font face and color syntax errror","body":"<p>I am trying to add font face and  color and running into following error</p>\n\n<pre><code>#Create the body of the message\nmsg_body=(\"&lt;HTML&gt;&lt;head&gt;&lt;/head&gt;\"\n          \"&lt;body&gt;BCC Warning:\"\n          \"&lt;br&gt;Hi All, &lt;br&gt;\"\n          \"&lt;br&gt;&lt;br&gt;\"\n          \"&lt;font face = \"Arial\" color=\"#990000\" &gt; Wiki @&lt;a href=%s&gt;%s&lt;/a&gt; (listed @ go\\wbit)&lt;/font&gt; &lt;br&gt;&lt;br&gt;\"\n          \"&lt;b&gt;Release notes:&lt;/b&gt; %s  &lt;br&gt;&lt;br&gt;\" \n          \"&lt;b&gt;Build Combo:&lt;/b&gt;&lt;br&gt;%s&lt;br&gt;&lt;br&gt;\" \n          \"&lt;b&gt;Loading instructions:&lt;/b&gt;&lt;br&gt;%s&lt;br&gt;&lt;br&gt;\"\n          \"&lt;b&gt;CR fixes:&lt;/b&gt;&lt;br&gt;%s&lt;br&gt;&lt;br&gt;\"\n          \"Thanks,&lt;br&gt;\"\n          \"Build team\"\n          \"&lt;/body&gt;&lt;/html&gt;\"\n          ) % (wikiURL,wikiURL,Releasenotes,table,Load_ins,crInfo)\n</code></pre>\n\n<p>Syntax error</p>\n\n<pre><code>\"&lt;font face = \"Arial\" &gt; Wiki @&lt;a href=%s&gt;%s&lt;/a&gt; (listed @ go\\wbit)&lt;/font&gt; &lt;br&gt;&lt;br&gt;\"\n                   ^\n</code></pre>\n\n<p>SyntaxError: invalid syntax</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":47,"score":0,"question_id":13245094,"title":"How to convert a function based program to class concept in python","body":"<p>I have a program,But that not contain class concept ( Python program follow some value to class concept) am really a new one in python world. So learning from the original way help me out to shine in this world. Can anyone kindly help me out, instead of making this question negative mark :(</p>\n\n<pre><code> import xml.etree.ElementTree as ET\n import sys\n\ndoc       = ET.parse(\"books.xml\")\nroot      = doc.getroot() \nroot_new  = ET.Element(\"books\") \nfor child in root:\n    name                = child.attrib['name']\n    cost                = child.attrib['cost']\n    # create \"book\" here\n    book    = ET.SubElement(root_new, \"book\") \n    book.set(\"name\",name)               \n    book.set(\"cost\",cost) \n    if 'color' in child.attrib:\n        color               = child.attrib['color']\n        book.set(\"color\",color) \n    if 'weight' in child.attrib:\n        weight              = child.attrib['weight']\n        book.set(\"weight\",weight)\n    for g in child.findall(\"cover\"):\n        # create \"group\" here\n       cover     = ET.SubElement(cover,\"cover\")  \n        if g.text != \"goldcover\":\n            cover.text = g.text \ntree = ET.ElementTree(root_new)\ntree.write(sys.stdout)\n</code></pre>\n\n<p>For understanding : my xml is ,</p>\n\n<pre><code>&lt;books&gt;\n&lt;book name=\"goodbook\" cost=\"10\" color=\"green\"&gt;&lt;/book&gt;\n&lt;book name=\"badbook\" cost=\"1000\" weight=\"100\"&gt;&lt;cover&gt;papperback&lt;/cover&gt;&lt;cover&gt;hardcover&lt;/cover&gt;&lt;/book&gt;\n&lt;book name=\"avgbook\" cost=\"99\" weight=\"120\"&gt;&lt;/book&gt;\n&lt;/books&gt;\n</code></pre>\n\n<p>As a fresher on python i hope some one will help me out , All valuable input are warmly welcomed.</p>\n"},{"tags":["python","google-app-engine"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13148512,"title":"Appengine SDK 1.7.3 not detecting updated files","body":"<p>I just updated to SDK 1.7.3 running on Linux. At the same time I switched to the SQLite datastore stub, suggested by the depreciation message.</p>\n\n<p>After this, edits to source files are not always detected, and I have to stop and restart the SDK after updating, probably one time in ten. Is anyone else seeing this? Any ideas on how to prevent it?</p>\n\n<p>UPDATE: Changes to <em>python</em> source files are not being detected. I haven't made any modifications to yaml files, and I believe that jinja2 template file modifications are being detected properly.</p>\n\n<p>UPDATE: I added some logging to the dev appserver and found that the file I'm editing is not being monitored. Continuing to trace what is happening.</p>\n"},{"tags":["python","django","aggregation","geodjango","snap-to-grid"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13171752,"title":"Aggregate/Group entries by grid location using geodjango's snap_to_grid","body":"<p>I'm trying to figure out the <a href=\"https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoquerysets/#django.contrib.gis.db.models.GeoQuerySet.snap_to_grid\" rel=\"nofollow\"><code>snap_to_grid()</code></a> method, which appears to do what I want, but I'm not sure how to use it.</p>\n\n<p>I have a model with several point fields:</p>\n\n<pre><code>class PointsOfInterest(models.Model):\n    name = models.CharField(max_length=150)\n    center = models.PointField()\n    point2 = models.PointField()\n    point3 = models.PointField()\n</code></pre>\n\n<p>I would like to query all points snapping them to a grid so that points near each other come back with the same location (basically aggregating/grouping by grid location).</p>\n\n<pre><code>&gt;&gt;&gt; print  PointsOfInterest.objects.snap_to_grid(300, field_name=\"center\")[0].center\nPOINT (368411.6666666666860692 2899475.0000000000000000)\n&gt;&gt;&gt; print  PointsOfInterest.objects.all()[0].center\nPOINT (368411.6666666666860692 2899475.0000000000000000)\n</code></pre>\n\n<p>It doesn't seem to be doing anything as the points aren't changing.\nI've tried the <code>.transform()</code> operation and that is responsive and updates the point to the desired projection.</p>\n\n<p>Am I misunderstanding how this method works, or is there a way to do this?</p>\n"},{"tags":["python","cron","openshift"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13224823,"title":"How to reference env directories of openshift in a python script?","body":"<p>OpenShift has these default dir's: </p>\n\n<pre><code># $_ENV['OPENSHIFT_INTERNAL_IP']  - IP Address assigned to the application\n# $_ENV['OPENSHIFT_GEAR_NAME']  - Application name\n# $_ENV['OPENSHIFT_GEAR_DIR']   - Application dir\n# $_ENV['OPENSHIFT_DATA_DIR']  - For persistent storage (between pushes)\n# $_ENV['OPENSHIFT_TMP_DIR']   - Temp storage (unmodified files deleted after 10 days)\n</code></pre>\n\n<p>How do reference them in a python script? \nExample script \"created a log file in log directory and log in data directory? </p>\n\n<pre><code>from time import strftime\n\nnow= strftime(\"%Y-%m-%d %H:%M:%S\")\nfn  = \"${OPENSHIFT_LOG_DIR}/test.log\"\nfn2 = \"${OPENSHIFT_DATA_DIR}/test.log\"\n#fn  = \"test.txt\"\n\ninput = \"appended text \" + now + \" \\n\"\n\nwith open(fn, \"ab\")  as f: \n       f.write(input)\nwith open(fn2, \"ab\") as f: \n       f.write(input)\n</code></pre>\n\n<p>Can these script be used with cron?</p>\n\n<p><strong>EDIT the BASH File:</strong></p>\n\n<pre><code>#! /bin/bash\n\n#date &gt;&gt; ${OPENSHIFT_LOG_DIR}/new.log\nsource $OPENSHIFT_HOMEDIR/python-2.6/virtenv/bin/activate\npython file.py\ndate &gt;&gt; ${OPENSHIFT_DATA_DIR}/new2data.log\n</code></pre>\n"},{"tags":["python","application","portal","intranet"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":23,"score":-1,"question_id":13244623,"title":"Development of an Application Portal","body":"<p>I have got a POC to complete where they want me to develop an portal where it allows the developers in a certain community to submit apps. And also for the normal user, these apps should be added to their dashboard and delete ones already if needed. This basically like an appstore for intranet where the usage of these apps are also web based. </p>\n\n<p>I searched many possibilities yet to find a good framework to help me doing this. </p>\n\n<p>I prefer Python yet javaScript is also fine. </p>\n\n<p>Please feel free to suggest any option. </p>\n\n<p>Thank you</p>\n"},{"tags":["python","string","int"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13243517,"title":"Dumb dumb dumb: Int stored as str?","body":"<p>Apparently I hit my head over the week end. </p>\n\n<p>I'm looping through a file to find the highest value and then return the value and number of lines. If I didn't convert <code>myMax</code> with <code>int()</code> I would get an unordered type error with the variable set as a string. What did I forget?!</p>\n\n<pre><code>def main():\n    myMax= 0\n    myCount = 0\n\n    myFile = open(\"numbers.dat\", 'r')\n    for line in myFile :\n        myCount = myCount + 1\n        if int(line) &gt; int(myMax): \n            myMax = line\n\n    myFile.close()\n\n    print (\"Out of %s lines, the highest value found was %s\" %(myCount, myMax))\n\nmain()  \n</code></pre>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":43,"score":-2,"question_id":13244645,"title":"Would the following code go into the if statement","body":"<pre><code>x = None\nif not x:\n   do_something()\n</code></pre>\n\n<p>^ Since x is None, will it enter the if statement?</p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13244568,"title":"about Dictionary write into a file","body":"<p>I want to write a dictionary into a file. the codes is:</p>\n\n<pre><code> fs = open( store_file , \"w\" )\n for k in store_dic:\n     temp_line = k + \" \" + store_dic[k] + \"\\n\"\n     fs.write( temp_line )\n     logger.info( \"store_record \" + store_file + \" \" + temp_line[:-1] )\n     fs.close\n</code></pre>\n\n<p>As you see, I traversal the dictionary of store_dic and write in the file at the same time.\nHave any other ways to improve this? Bacause I will call this codes every 6 seconds.</p>\n\n<p>Thank you.</p>\n"},{"tags":["python","django","redirect","location"],"answer_count":7,"favorite_count":23,"up_vote_count":59,"down_vote_count":2,"view_count":33127,"score":57,"question_id":523356,"title":"Python + Django page redirect","body":"<p>How do I accomplish a simple redirect (e.g. cflocation in ColdFusion, or header(location:http://) in django)?</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13244533,"title":"Iterating through xml in python through KeyError","body":"<p>My Xml :</p>\n\n<pre><code>&lt;books&gt;\n&lt;book name=\"goodbook\" cost=\"10\" color=\"green\"&gt;&lt;/book&gt;\n&lt;book name=\"badbook\" cost=\"1000\" weight=\"100\"&gt;&lt;/book&gt;\n&lt;book name=\"avgbook\" cost=\"99\" weight=\"120\"&gt;&lt;/book&gt;\n&lt;/books&gt;\n</code></pre>\n\n<p>My python code :-</p>\n\n<pre><code>import xml.etree.ElementTree as ET\nimport sys\ndoc       = ET.parse(\"books.xml\")\nroot      = doc.getroot() \nroot_new  = ET.Element(\"books\") \nfor child in root:\n       name                = child.attrib['name']\n       cost                = child.attrib['cost']\n       color               = child.attrib['color'] #KeyError\n       weight              = child.attrib['weight'] #KeyError\n       # create \"book\" here\n       book    = ET.SubElement(root_new, \"book\") \n       book.set(\"name\",name)               \n       book.set(\"cost\",cost) \n       book.set(\"color\",color) \n       book.set(\"weight\",weight)\ntree = ET.ElementTree(root_new)\ntree.write(sys.stdout)\n</code></pre>\n\n<p>What error am getting :-</p>\n\n<pre><code>python books.py \nTraceback (most recent call last):\n  File \"books.py\", line 10, in &lt;module&gt;\n    weight              = child.attrib['weight'] #KeyError\nKeyError: 'weight'\n</code></pre>\n\n<p>weight and color are throughing keyerror, because while iterating through loop \"color\" and \"weight\" attribute not found in all line. i need my out put should be same as input xml :( . \nHow can i skip this error and make it same as input xml . Thanks in advance.</p>\n"},{"tags":["python","tkinter","multiprocessing"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13228763,"title":"Using Multiprocessing module for updating Tkinter GUI","body":"<p>I have been trying to use Multiprocessing module for updating Tkinter GUI but when I run this code, it is giving Pickling error. </p>\n\n<pre><code># Test Code for Tkinter with threads\nimport Tkinter\nfrom multiprocessing import Queue\nimport multiprocessing\nimport time\n\n# Data Generator which will generate Data\ndef GenerateData():\n    global q\n    for i in range(10):\n        print \"Generating Some Data, Iteration %s\" %(i)\n        time.sleep(2)\n        q.put(\"Some Data from iteration %s \\n\" %(i))\n\ndef QueueHandler():\n    global q, text_wid\n    while True:\n        if not q.empty():\n            str = q.get()\n            text_wid.insert(\"end\", str)\n\n# Main Tkinter Application\ndef GUI():\n    global text_wid\n    tk = Tkinter.Tk()\n    text_wid = Tkinter.Text(tk)\n    text_wid.pack()\n    tk.mainloop()\n\nif __name__ == '__main__':\n# Queue which will be used for storing Data\n    tk = Tkinter.Tk()\n    text_wid = Tkinter.Text(tk)\n    q = multiprocessing .Queue()\n    t1 = multiprocessing.Process(target=GenerateData,args=(q,))\n    t2 = multiprocessing.Process(target=QueueHandler,args=(q,text_wid))\n    t1.start()\n    t2.start()\n    text_wid.pack()\n    tk.mainloop()\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>PicklingError: Can't pickle &lt;type 'thread.lock'&gt;: it's not found as thread.lock\n</code></pre>\n\n<p>If I remove the argument <code>text_wid</code>, then no error is reported but text widget is not updated with the data from the queque.</p>\n\n<p><strong>UPDATE :</strong></p>\n\n<p>I modified code so as to call the function to update the GUI whenever there is value in queue, thus preventing Tkinter widgets from being passed to separate process. Now, I am not getting any error but the widget is not updated with the data. However if i use mix of <code>Threading</code> and <code>Multiprocessing</code> module i.e. create a separate thread for handling data from the queue, then it works fine. My question why didn't it worked when i run the handler code in separate process. Am I not passing the data correctly. Below is the modified code:</p>\n\n<pre><code># Test Code for Tkinter with threads\nimport Tkinter\nimport multiprocessing\nfrom multiprocessing import Queue\nimport time\nimport threading\n\n# Data Generator which will generate Data\ndef GenerateData(q):\n    for i in range(10):\n        print \"Generating Some Data, Iteration %s\" %(i)\n        time.sleep(2)\n        q.put(\"Some Data from iteration %s \\n\" %(i))\n\ndef QueueHandler(q):\n    while True:\n        if not q.empty():\n            str = q.get()\n            update_gui(str)\n            #text_wid.insert(\"end\", str)\n\n# Main Tkinter Application\ndef GUI():\n    global text_wid\n    tk = Tkinter.Tk()\n    text_wid = Tkinter.Text(tk)\n    text_wid.pack()\n    tk.mainloop()\n\ndef update_gui(str):\n    global text_wid\n    text_wid.insert(\"end\", str)\n\nif __name__ == '__main__':\n# Queue which will be used for storing Data\n    tk = Tkinter.Tk()\n    text_wid = Tkinter.Text(tk)\n    q = multiprocessing.Queue()\n    t1 = multiprocessing.Process(target=GenerateData,args=(q,))\n    t2 = multiprocessing.Process(target=QueueHandler,args=(q,))\n    t1.start()\n    t2.start()\n    text_wid.pack()\n    tk.mainloop()\n</code></pre>\n"},{"tags":["python","mysql","sqlite3","flask"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":29,"score":3,"question_id":13244314,"title":"What alterations do I need to make for my Flask python application to use a MySQL database?","body":"<p>I am new to developing applications, and I have been trying to familiarize myself with doing so with Flask. I followed their great tutorial and read their equally-detailed documentation to create my first basic app which uses a SQLite3 database. </p>\n\n<p>To accomplish this, and per their instructions, I imported the following:</p>\n\n<pre><code>from __future__ import with_statement\nfrom contextlib import closing   \n\nimport sqlite3\nfrom flask import Flask, request, session, g, redirect, url_for, \\\n     abort, render_template, flash  \n</code></pre>\n\n<p>and have a file <code>schema.sql</code> set up with the following to configure the database:</p>\n\n<pre><code>drop table if exists entries;\ncreate table entries (\n  id integer primary key autoincrement,\n  title string not null,\n  text string not null\n);\n</code></pre>\n\n<p>I access the database using commands that again came from the <a href=\"http://flask.pocoo.org/docs/tutorial/views/#tutorial-views\" rel=\"nofollow\">Flask site tutorial</a>. I am under the impression that I need to, when creating applications where users create and manage their own accounts, implement a MySQL database instead. This being the case, what sorts of things about my database-related code do I need to change? I am sure there is quite a large difference between working with these two databases, so any point of reference – suggestions of tutorials to follow or documentation to read – would be greatly appreciated.</p>\n\n<p>Many thanks in advance.</p>\n"},{"tags":["python","scripting","3d","maya","autodesk"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":840,"score":0,"question_id":1881592,"title":"how (in maya) can i get the 3D position of the mouse?","body":"<p>i have created a dragger context in maya using the following code, pos holds my 2D coordinates of mouse cursor, i want to convert it into 3D coordinate to be the source of the ray i want to launch,, i want it either through python scripting or through the python api,, </p>\n\n<pre><code>import maya.cmds as mc\n\nmc.draggerContext( 'testContext', pressCommand='getCursorPos()',\n                    dragCommand='getCursorPos()', cursor='default')\n\ndef getCursorPos():\n\n    #--get the 2D position of cursor (on the view port)----\n\n    pos = mc.draggerContext( 'testContext', query=1, dragPoint=1) \n\n    #----convert to 3D coordinates in the scene--------\n    ????????\n</code></pre>\n\n<p>thanks in advance</p>\n"},{"tags":["python","dictionary","hdf5","h5py"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13241391,"title":"Reading in multiple hdf5 files and appending them to a new dictionary","body":"<p>I have a list of <code>hdf5</code> files which I would like to open and read in the appropriate values into a new dictionary and eventually write to a text file. I don't necessarily know the values, so the user defines them in an array as an input into the code. The number of files needed is defined by the number of days worth of data the user wants to look at. </p>\n\n<pre><code>new_data_dic = {}\n\nfor j in range(len(values)):\n    new_data_dic[values[j]] = rbsp_ephm[values[j]]\nfor i in (np.arange(len(filenames_a)-1)+1):\n        rbsp_ephm = h5py.File(filenames_a[i])\n        for j in range(len(values)):\n            new_data_dic[values[j]].append(rbsp_ephm[values[j]])\n</code></pre>\n\n<p>This works fine if I only have one file, but if I have two or more it seems to close the key? I'm not sure if this is exactly what is happening, but when I ask what <code>new_data_dic</code> is, for values it gives <code>{'Bfs_geo_a': &lt;Closed HDF5 dataset&gt;,...</code> which will not write to a text file. I've tried closing the hdf5 file before opening the next (<code>rbsp_ephm.close()</code>) but I get the same error.</p>\n\n<p>Thanks for any and all help! </p>\n"},{"tags":["python","hash","dictionary"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":52,"score":0,"question_id":13243577,"title":"Dictionary be a Key in a Dictionary Python","body":"<p>I want an O(1) method of checking if I have been in a state. The problem is that a state is defined by the position of a few zoombinis on a map. \nZoombini = {(1,1): 0, (2,2):1, (3,3):3}  {Position: Zoombini ID}\nI am using Breadth-First Search and am pushing onto my Queue this dictionary of positions. </p>\n\n<pre><code>dirs = [goNorth, goSouth, goWest, goEast] ## List of functions\nzoom = {}\nboulders = {}\nvisited = {} ## {(zoom{}): [{0,1,2},{int}]}\n             ## {Map: [color, distance] 0 = white, 1 = gray, 2 = black\nn = len(abyss)\nfor i in xrange(n):\n    for j in xrange(n):\n        if (abyss[i][j] == 'X'):\n            boulders[(i,j)] = True\n        elif (isInt(abyss[i][j])):\n            zoom[(i,j)] = int(abyss[i][j])      ## invariant only 1 zomb can have this position\n        elif (abyss[i][j] == '*'):\n              exit = (i, j)\nsQueue = Queue.Queue()\nzombnum = 0\ndone = False\ndistance = 0\nsQueue.put(zoom)\nwhile not(sQueue.empty()):\n    currZomMap = sQueue.get()\n    for zom in currZomMap.iterkeys(): ## zoom {(i,j): 0}\n        if not(zom == exit):\n            z = currZomMap[zom]\n            for fx in dirs: ## list of functions that returns resulting coordinate of going in some direction\n                newPos = fx(zom)\n                newZomMap = currZomMap.copy()\n                del(newZomMap[zom]) ## Delete the old position\n                newZomMap[newPos] = z ## Insert new Position\n                if not(visited.has_key(newZomMap)):\n                    sQueue.put(newZomMap)\n</code></pre>\n\n<p>My implementation isn't done but I need a better method of checking if I have already visited a state. I could make a function that creates an integer hash out of the dictionary but I don't think that I'd be able to efficiently. Time is also an issue. How can I go about this optimally?</p>\n"},{"tags":["python","asynchronous","flask"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":206,"score":1,"question_id":10316346,"title":"What library to use to achieve this aync operation in flask?","body":"<p>I'm using flask to build the backend api for an application, one thing I need to do is:  </p>\n\n<pre><code>1. get the content the user submited \n2. send a twitter with that content\n3. save the content to my DB and return the id of the new item\n</code></pre>\n\n<p>now the problem is that step 2 takes too long time so it slows down the total request time.</p>\n\n<p>to be more specific, step 2 is:  <code>twitter.send(content)</code></p>\n\n<p>How could I make step 2 async? PS: I don't need to know if step 2 is successful or not</p>\n"},{"tags":["python","sqlite3"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13244212,"title":"Prevent duplicate of multiple constraint sqlite3 python","body":"<p>Suppose I have a table :</p>\n\n<pre><code>Table A:\n\nId Name     Movie   Comment \n\n1  Foo     Bar  anything\n2  Foo     Bar  anything\n</code></pre>\n\n<p>Here I want to make sure that the user cannot insert Foo and Bar twice , but he is allowed to insert Foo , foobar .\nOne solution to prevent this duplication was to add this statement <code>ALTER TABLE table ADD UNIQUE KEY(Name , Movie).</code> That was probably for sql not sqlite. I wrote the same command in python for sqlite3 as <code>cur.execute(\"ALTER TABLE ADD UNIQUE KEY(Name,Movie)\")</code>. It gave me the error sqlite3.operationalerror: near \"unique\" syntax error. Is there anything that can be done while creating the table A , or is there any mistake in my sqlite query .</p>\n\n<p>Help is appreciated .</p>\n"},{"tags":["python","numpy","histogram"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":63,"score":0,"question_id":13205219,"title":"How does matplotlib's histogramdd work?","body":"<p>I find the output of histogramdd confusing. For example:</p>\n\n<pre><code>h, edges = histogramdd([[1,2,1],[4,2,1]],bins=2)\n\nh -&gt; [[ 1.  1.]\n     [ 1.  0.]]\nedges -&gt; [array([ 1. ,  1.5,  2. ]), array([ 1. ,  2.5,  4. ])]\n</code></pre>\n\n<p>Maybe I don't understand the <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.histogramdd.html\" rel=\"nofollow\">documentation</a>, but it seems to suggest that the input should be an array with <code>N</code> rows representing data points and <code>D</code> columns representing dimensions (so in this case, we are dealing with two data points in three dimensions) and I guess that each array in <code>edges</code> represents a different dimension but that doesn't seem to make sense based on the output <code>h</code>.</p>\n\n<p>How is this supposed to be interpreted?</p>\n\n<p>Thanks</p>\n"},{"tags":["python","loops","text"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":63,"score":0,"question_id":13243816,"title":"Reading text file using python, and matching against a value threshold","body":"<p>Sorry if this is a silly question, I am still a beginner with Python. </p>\n\n<p>I have a large number of .txt files (N > 1000) that have data of interest, and I wish to identify files whose \"mean\" value exceeds a given threshold (say, 0.5), and print the name of the file in which that is the case. The data in each file are organized like this:</p>\n\n<pre><code>[        \n    {\n    \"parameter\": {\n        \"max\": 0.6640571758027143, \n        \"mean\": 0.13404294175225137, \n        \"min\": 0.0, \n        \"std\": 0.09435715828616785\n    },\n\n\n  {\n    \"intensity\": [\n\n        {\n            \"max\": [\n                3.1719575216784217\n            ], \n            \"mean\": [\n                -3.552713678800501e-17\n            ], \n            \"min\": [\n                -2.707115982837323\n            ], \n            \"std\": [\n                1.0000000000000004\n]\n</code></pre>\n\n<p>To make matters slightly more complicated, I only wish to read the \"mean\" value for the \"parameter\" and not for \"intensity\". </p>\n\n<p>I had the idea that I should read this file in using a for loop, roughly containing the following code:</p>\n\n<pre><code>subjects = [allmyfilenames]\nfor subj in subjects:\n    file = open('C:/%s.txt' %subj, 'r')\n    for line in file.readlines(): print line\n</code></pre>\n\n<p>From there, I am a bit lost. How might I identify the correct line to use in matching against my threshold (0.5)? </p>\n\n<p>Many thanks in advance,</p>\n"},{"tags":["python","file","list","python-2.7"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":42,"score":3,"question_id":13244055,"title":"Python Read file. Make a List per line","body":"<p>So im wanting to read from a file and put each line of it into a list.</p>\n\n<p>Say I have a file named MyFile.txt or MyFile.csv containing the following three lines of numbers/decimals:</p>\n\n<pre><code>49.55,2,77.09,18,1,2.34,32.11\n33,11.22,33.21,56,76.55\n8,9,44.7,90.99,12.21,1.01\n</code></pre>\n\n<p>I want the program to open the file then read line one and put it into a list ~ say L1list. I then want it to make L2list &amp; L3list for lines 2 &amp; 3.\nOnce that's done I want to be able to work out the total for a list, average, max &amp; min etc. I'm pretty confident with this part using sum (), len(),max(), min() etc.</p>\n\n<p>Its the populating of the lists that has me stuck. Im getting the wrong totals, lengths etc.\nThought maybe its the full-stops or comers. but i need the decimal places and thought lists need the comers to separate.</p>\n\n<p>So far i have tried:</p>\n\n<pre><code>filename = 'MyFile.txt' \nfin=open(filename,'r')\nL1list = fin.readline()\nL2list = fin.readline()\nL3list = fin.readline()\n</code></pre>\n\n<p>Also:</p>\n\n<pre><code>L1list.append(fin.readline())\n</code></pre>\n\n<p>Along with:</p>\n\n<pre><code>L1list = [i.strip().split() for i in fin.readlines()]\n</code></pre>\n\n<p>A little stuck as to whats going wrong.</p>\n"},{"tags":["python","3d","matplotlib"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":13240633,"title":"Matplotlib plot pulse propagation in 3d","body":"<p>I'd like to plot pulse propagation in such a way at each step, it plots the pulse shape. In other words, I want a serie of x-z plots, for each values of y. Something like this (without color):\n<img src=\"http://i.stack.imgur.com/q71Ja.jpg\" alt=\"Pulse propagation\"> </p>\n\n<p>How can I do this using matplotlib (or Mayavi)? Here is what I did so far:</p>\n\n<pre><code>def drawPropagation(beta2, C, z):\n    \"\"\" beta2 in ps / km\n        C is chirp\n        z is an array of z positions \"\"\"\n    T = numpy.linspace(-10, 10, 100)\n    sx = T.size\n    sy = z.size\n\n    T = numpy.tile(T, (sy, 1))\n    z = numpy.tile(z, (sx, 1)).T\n\n    U = 1 / numpy.sqrt(1 - 1j*beta2*z * (1 + 1j * C)) * numpy.exp(- 0.5 * (1 + 1j * C) * T * T / (1 - 1j*beta2*z*(1 + 1j*C)))\n\n    fig = pyplot.figure()\n    ax = fig.add_subplot(1,1,1, projection='3d')\n    surf = ax.plot_wireframe(T, z, abs(U))\n</code></pre>\n"},{"tags":["python","regex"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":55,"score":1,"question_id":13244076,"title":"Why is 'r' used in regular expression in Python?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/2081640/what-exactly-do-u-and-rstring-flags-in-python-and-what-are-raw-string-litte\">What exactly do “u” and “r”string flags in Python, and what are raw string litterals?</a>  </p>\n</blockquote>\n\n\n\n<pre><code>p = re.compile(r'(\\b\\w+)\\s+\\1')\n\np.search('Paris in the the spring').group()\n</code></pre>\n\n<p>What is the meaning of <code>r</code> in the 1st line?</p>\n"},{"tags":["python","dll","py2exe","standalone","maya"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13244093,"title":"Building an exe for a python script that uses Maya modules (Py2exe)","body":"<p>I know this is a long shot but I'm hoping someone on here has any experience with this as I can't find anything mentioning it online. I have a python script that imports modules from Autodesk Maya. This python script is run through mayapy.exe instead of python.exe which is whats throwing me off. I would rather not have to include a bat file with my script and have the users set the location of mayapy.exe in order to use it. I would prefer to somehow package mayapy.exe with my script using something like py2exe. I'm a little lost on where to go from here honestly.</p>\n\n<p>If I run py2exe normally on my script, its result gives me the error cannot find maya.cmds, as expected. Is there a way I can find the dll to include? I tried running Dependency walker on mayapy.exe but I'm venturing into new territory here. There were only 2 dll's used from the Maya install directory base.dll and python26.dll, the rest were all system dlls. If anyone has tried any of this please share or if anyone has any advice or path I can look down or a website I can go to I would be very grateful. Thanks so much!</p>\n\n<p>P.s. In case it helps at all, this is the python script imports:</p>\n\n<pre><code>try:\n    import maya.standalone\n    maya.standalone.initialize()\nexcept:\n    pass\nimport maya.cmds as cmds\nimport maya.mel as mel\nfrom time import time as tTime\nfrom glob import iglob\nfrom shutil import copy\nfrom os.path import join\nfrom PyQt4 import QtCore\nfrom PyQt4 import QtGui\n</code></pre>\n\n<p>The point of the script is to create a maya file, do some things in it, then save it. Using the maya interpreter(mayapy.exe) it does this without ever opening maya, which is what I was wanting.</p>\n"},{"tags":["python","windows-7"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":2,"view_count":54,"score":-1,"question_id":13223037,"title":"Installing uncertainties module in python","body":"<p>How can I install the <a href=\"http://packages.python.org/uncertainties/#installation-and-download\" rel=\"nofollow\">uncertainties module</a>?</p>\n\n<p>I tried following the steps, I downloaded setup tools and typed in what it said but it gave me a syntax error, I also tried installing pip but it did the same thing.</p>\n\n<p>What am I doing, surely installing a module should be simple. The kind people below have led me to determine that I am typing the code provided in the wrong place</p>\n\n<pre><code>easy_install --upgrade uncertainties\n</code></pre>\n\n<p>I am on Windows 7 and using Python 2.7.3</p>\n\n<p>Thank you,</p>\n"},{"tags":["python","generator"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":47,"score":1,"question_id":13243766,"title":"Python Empty Generator Function","body":"<p>In python, one can easily define an iterator function, by putting the yield keyword in the function's body, such as:</p>\n\n<pre><code>def gen():\n    for i in range(100):\n        yield i\n</code></pre>\n\n<p>How can I define a generator function that yields no value (generates 0 values), the following code doesn't work, since python cannot know that it is supposed to be an generator and not a normal function:</p>\n\n<pre><code>def empty():\n    pass\n</code></pre>\n\n<p>I could do something like</p>\n\n<pre><code>def empty():\n    if False:\n        yield None\n</code></pre>\n\n<p>But that would be very ugly. Is there any nice way to realize an empty iterator function?</p>\n"},{"tags":["python","class"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13243671,"title":"Python - naming an instance of a class with a var value","body":"<p>I'm trying to instantiate a class object whose desired name is held in a variable that's created elsewhere. </p>\n\n<p>I can't figure out how to make the instance of the class have the name held by the variable. </p>\n\n<p>example:</p>\n\n<pre><code>class foo:\n    def __init__(self):\n        self.var1 = \"bar\"\n\nif __name__ == \"__main__\":\n    test = \"a\" # returned by another func.\n    [string held by variable 'test'] = foo()\n    print a.var1\n</code></pre>\n\n<p>Is this possible? (or even advisable...)</p>\n"},{"tags":["java","python","ruby","email","clojure"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13243581,"title":"Customizable mail server - what are my options?","body":"<p>I am interested to build a mail service that allows you to incorporate custom logic in the your mail server.</p>\n\n<p>For example, user A can reply to helloworld@mysite.com once and subsequent emails from user A to helloworld@mysite.com will not go through until certain actions are taken. </p>\n\n<p>I am looking for something simple and customizable, preferably open-sourced. I am fluent in most modern languages. </p>\n\n<p>What email servers do you guys recommend for this? </p>\n"},{"tags":["python","pyparsing"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":30,"score":3,"question_id":13241093,"title":"Why is pyparsing removing a named result?","body":"<p>Given the following minimal working example:</p>\n\n<pre><code>from pyparsing import *\nlatex_h  = QuotedString(\"$\")('latex')\nreg_text = Word(alphas)('text')\ngrammar  = OneOrMore( latex_h | reg_text )('line')\n\nsol = grammar.parseString('''dog $x^2$ cat''')\nprint sol.dump()\n</code></pre>\n\n<p>I expected the output to look like:</p>\n\n<pre><code>['dog', 'x^2', 'cat']\n- line: ['dog', 'x^2', 'cat']\n  - text: dog\n  - latex: x^2\n  - text: cat\n</code></pre>\n\n<p>but instead I got:</p>\n\n<pre><code>['dog', 'x^2', 'cat']\n- latex: x^2\n- line: ['dog', 'x^2', 'cat']\n  - latex: x^2\n  - text: cat\n- text: cat\n</code></pre>\n\n<p>I don't understand why in the parse tree did the <code>dog</code> get left behind? In addition, why are two elements of <code>text, latex</code> <em>outside</em> the <code>line</code>?</p>\n"},{"tags":["python","linux","opencv","face-detection","cropping"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":48,"score":5,"question_id":13211745,"title":"Detect face then autocrop pictures","body":"<p>I am trying to find an app that can detect faces in my pictures, make the detected face centered and crop 720 x 720 pixels of the picture. It is rather very time consuming &amp; meticulous to edit around hundreds of pictures I plan to do that.</p>\n\n<p>I have tried doing this using <a href=\"http://creatingwithcode.com/howto/face-detection-in-static-images-with-python/\" rel=\"nofollow\">python opencv mentioned here</a> but I think it is outdated. I've also tried <a href=\"http://www.givp.org/blog/2011/06/13/image-cropping-and-face-detection/\" rel=\"nofollow\">using this</a> but it's also giving me an error in my system. Also tried using face detection plugin for GIMP but it is designed for GIMP 2.6 but I am using 2.8 on a regular basis. I also tried doing what was posted at ultrahigh blog but it is very outdated (since I'm using a Precise derivative of Ubuntu, while the blogpost was made way back when it was still Hardy). Also tried using Phatch but there is no face detection so some cropped pictures have their face cut right off.</p>\n\n<p>I have tried all of the above and wasted half a day trying to make any of the above do what I needed to do.</p>\n\n<p>Do you guys have suggestion to achieve a goal to around 800 pictures I have.</p>\n\n<p>My operating system is Linux Mint 13 MATE.</p>\n\n<p>Note: I was going to add 2 more links but stackexchange prevented me to post two more links as I don't have much reputation yet.</p>\n"},{"tags":["python","split"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":38,"score":1,"question_id":13243461,"title":"Python Split With Delimiter In Field Value","body":"<p>I have a \"CSV\" with which some of the data fields happen to contain the comma delimiter as in the second row of the following sample data.</p>\n\n<pre><code>\"1\",\"stuff\",\"and\",\"things\"\n\"2\",\"black,white\",\"more\",\"stuff\"\n</code></pre>\n\n<p>I can't change the source data and I don't know how to str.split() and not split in the value \"black,white\".</p>\n\n<p>Ways I've approached my problem:</p>\n\n<ol>\n<li>I looked at partition() and don't see how that would benefit me.</li>\n<li>I'm sure a regex would capture data properly but I'm not sure how to tie one into splitting.</li>\n<li>Since every row in the source will always have the same number of fields I thought maybe setting maxsplit would help but talked myself out of that with the thinking that it would still split within \"black,white\" and I would end up loosing the last value (which would be \"stuff\" in this case).</li>\n</ol>\n\n<p>Certainly this is easy to overcome so I'm looking forward to learning something new!</p>\n\n<p>Your help is greatly appreciated.</p>\n"},{"tags":["python","function","scope"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13243652,"title":"How to deal with scope of variables in python","body":"<p>I have a python module that contains code for generating a large array, and it contains multiple functions for doing this. This is how I have it right now:</p>\n\n<pre><code>var1 = 0\nvar2 = 0\nvar3 = 0\nvar4 = 0\nvar5 = 0\nvar6 = 0\ndef main():\n    foo()\n    moo(var1,var2)\n    noo(var6)\ndef foo():\n    Math using vars\ndef moo():\n    More math\ndef noo():\n    More math\n</code></pre>\n\n<p>However, I cannot use vars 1-6 without first defying them inside there respective functions, as it throws a \"Referenced before assignment\" exception. It seems the best way to do this would be to use global, but that seems heavily frowned upon. Why is global not recommended? Would it be acceptable to use it here? How else should I go about this?</p>\n"},{"tags":["python","django","slug"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13243625,"title":"Generate slug field data for existing entries in database","body":"<p>I'm using Django 1.4 with South for migrations. I just added a slug field to one of my models and did a migration. The slug field is automatically populated for all new objects and works perfectly. </p>\n\n<p>I'm wondering, is there any way to force Django to create the slug field entries for all my existing data from before the migration...</p>\n\n<p>*edit \nI'm populating my slug field with this line in admin.py</p>\n\n<p>prepopulated_fields = {\"slug\": (\"name\",\"price\")}</p>\n"},{"tags":["python","django","query"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":22,"score":2,"question_id":13243575,"title":"Curious about how django achieves the ORM query optimization","body":"<p>I am no python expert and I am curious about how django optimize the following query</p>\n\n<pre><code>Model.objects.filter(field = 'abc')[0]\n</code></pre>\n\n<p>Somehow django will intelligently add '<code>limit 1</code>' to SQL query like '<code>select * from model where field = 'abc' limit 1</code>'</p>\n"},{"tags":["python","nosql","mongodb","pymongo"],"answer_count":1,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":931,"score":7,"question_id":4549871,"title":"Removing multiple MongoDB documents in Python","body":"<p>Greetings,</p>\n\n<p>I am attempting to remove multiple documents from a MongoDB collection using the following syntax. I don't know if this is correct as I found it somewhere on the internet and haven't been able to find anything since enforcing the legitimacy of this statement:</p>\n\n<pre><code>pymongo_collection_object.remove(\n    [\n        {\n            'sku': '100-00'\n        },\n        {\n            'sku': '200-00'\n        }\n    ]\n, safe=True)\n</code></pre>\n\n<p>I would expect the above code would remove both documents including a 'sku' value of '100-00' or '200-00' but unfortunately both documents are still present within the collection. I also tried casting both the 'sku' key and its value to Unicode as I know they are stored in this encoding. As you can tell I am also enabling safe mode ensuring that there is nothing out of line happening on the server side.</p>\n\n<p>Any help is appreciated, thank you!</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":23,"score":0,"question_id":13243330,"title":"How to tell which point in a grid is on the right, left, up, or down(max)","body":"<p>I have to make a program that asks for different points and then validates them (I've already done it). Afterward, it has to print which one is the higher point lower point on the left and on the right, if two points are on the same spot e.g. 132,5 and 132,4 I have to make them choose randomly which one prints.</p>\n\n<p>The map is actually a parc!</p>\n"},{"tags":["python","duplicates","psycopg2","raspberry-pi"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":36,"score":1,"question_id":13225613,"title":"Duplicate data being stored into database","body":"<p>I'm winding up with duplicate entries into a database when I run my script and I was wondering what I might be doing wrong.</p>\n\n<p><strong>Hardware</strong><br>\nI've got an instrument connected to my Raspberry Pi via serial communication at 115,200.  The instrument outputs a line of data every second and I'd like to store this data into the database.  Each line is terminated with a \\n.</p>\n\n<p><strong>Software</strong><br>\nPython 2.7.3rc2<br>\nPySerial<br>\nPostgreSQL 9.1<br>\nDebian Wheezy</p>\n\n<p>The database has one table called wattsup which I created:</p>\n\n<pre><code>CREATE TABLE wattsup (\n    wattsuplocation text\n    wattsuptime timestamp\n    wattsupvalue numeric\n);\n</code></pre>\n\n<p>My Python script looks like:</p>\n\n<pre><code>import serial\nimport time\nimport psycopg2\n\nser = serial.Serial('/dev/ttyUSB0', 115200)\nLocation = 'A'\n\nconn = psycopg2.connect(\"dbname='mydb' user='thotchi'\")\ncur = conn.cursor()\n\nInsert = \"INSERT INTO wattsup (wattsuplocation, wattsuptime, wattsupvalue) VALUES (%s, %s, %s)\"\n\nwhile 1:\n    line = ser.readline()\n\n    DataArray = line.split(',') #CSV output\n\n    if len(DataArray) != 21:\n        continue\n    else:\n        Time = time.strftime(\"%Y-%m-%d %H:%M:%S\")\n        Watts = float(DataArray[3]) / 10\n        cur.execute(Insert, (Location, Time, Watts))\n        conn.commit()\n</code></pre>\n\n<p>It generally works but I get some duplicates in data that I don't understand.  When I query the database, I can find data like.</p>\n\n<pre><code>A, 2012-11-04 18:00:00, 5.0\nA, 2012-11-04 18:00:01, 5.1\nA, 2012-11-04 18:00:02, 5.0\nA, 2012-11-04 18:00:03, 4.9\nA, 2012-11-04 18:00:04, 5.0\nA, 2012-11-04 18:00:05, 5.0\nA, 2012-11-04 18:00:05, 5.0\nA, 2012-11-04 18:00:05, 5.0\nA, 2012-11-04 18:00:05, 5.0\nA, 2012-11-04 18:00:06, 5.1\n</code></pre>\n\n<p>Notice that there are duplicate data (A, 2012-11-04 18:00:05, 5.0).  I know the instrument only outputs data at 1 second so I'm am certain it's not the instrument.  I tried changing the code some so that the commit occurs every 10 entries which seemed to improve the situation.</p>\n\n<p>Any idea what might be going on?  I'm stumped.</p>\n\n<p>Thanks!</p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":43,"score":2,"question_id":13243380,"title":"improving a word combination script","body":"<p>Any way to make this better or more simple? I know it generates a whole lot of words and when you try to combine more than 4 lines on one sentence it doesn't look the way it should.</p>\n\n<pre><code>infile = open('Wordlist.txt.txt','r')\nwordlist = []\nfor line in infile:\n    wordlist.append(line.strip())\ninfile.close()\noutfile = open('output.txt','w')\nfor word1 in wordlist:\n    for word2 in wordlist:\n        out = '%s %s' %(word1,word2)\n        #feel free to #comment one of these two lines to not output to file or screen\n        print out\n        outfile.write(out + '\\n')\n\noutfile.close()\n</code></pre>\n"},{"tags":["python","split","extract","wildcard","rename"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":5,"view_count":41,"score":-1,"question_id":13243098,"title":"extract values/renaming filename in python","body":"<p>I am trying to use python to rename a filename which contains values such as:  <code>~test1~test2~filename.csv</code></p>\n\n<p>I want to rename the file to filename.csv.  The tildes being my separator for the first two words, and I do not want those words in my finale file name.  These words are variables.  Any assistance would be appreciated.  Thanks!</p>\n"},{"tags":["python","numpy","cython"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":27,"score":2,"question_id":13243404,"title":"Cython numpy array shape, tuple assignments","body":"<p>I use the idiom</p>\n\n<pre><code> size_x, size_y, size_z = some_array.shape\n</code></pre>\n\n<p>quite often when dealing with numpy arrays. The same thing doesn't seem to work in Cython when the array in question has a type, e.g.</p>\n\n<pre><code> def someFunc(np.ndarray[np.float32_t, ndim=2] arr):\n      sx, sy = arr.shape\n</code></pre>\n\n<p>we end up with a compile error like</p>\n\n<pre><code>  Cannot convert 'npy_intp *' to Python object\n</code></pre>\n\n<p>which is possibly the result of the fact that \"shape\" gets converted to a C array (for faster access), so it's no longer a tuple.</p>\n\n<p>Is it possible to extract this tuple somehow even in Cython? (Or should I just stick with <code>sx, sy = arr.shape[0], arr.shape[1]</code>?)</p>\n"},{"tags":["php","python","web","automation","mechanize"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":12,"score":0,"question_id":13243426,"title":"How to automate WatchSeries.eu website navigation?","body":"<p><a href=\"http://watchseries.eu\" rel=\"nofollow\">http://watchseries.eu</a></p>\n\n<p>To be more specific, I need help getting past this 'gateway.php' file, that does NOT like automated users. </p>\n\n<p>If you're not familiar with the site, basically the flow is this:</p>\n\n<pre><code>Show Page -&gt; Pick Episode -&gt; List of Video Hosts -&gt; Putlocker Link -&gt; ??? -&gt; Putlocker\n</code></pre>\n\n<p>The problem I have is during the ??? part. It goes from a link of the form /open/cale/###/episodeid/###.html through gateway.php?link=[AlphaNumeric Stuff] and then either to Putlocker (good), or the watchseries 404 page (bad)</p>\n\n<p>I have tried PHP CURL, Python Mechanize, Selenium, and urllib/urllib2, nothing seems to make it past gateway.php</p>\n\n<p>Does anyone know how they are blocking automated attempts??? How to circumvent?</p>\n\n<p>Just FYI, I'm not trying to attack their site or batch use it, just creating a tool for personal use to speed up the time between show page and watching an episode. </p>\n"},{"tags":["python","csv"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":48,"score":0,"question_id":13242516,"title":"Writing to CSV - Rows, not columns","body":"<p>I am stuck on a problem where my script writes to multiple columns and not rows. I'm not sure what I am doing wrong. </p>\n\n<p>Disclosure - I am really new to programming. </p>\n\n<p>EDIT - Figured it out. This worked :-)</p>\n\n<p>Any thoughts?</p>\n\n<pre><code>import json\nimport csv\nimport subprocess\nimport urllib\nimport requests\nfrom unidecode import unidecode\n\ndef main():\n    list_writer= open_csv()\n    info = test_method()\n    for list in info:\n        write_to_csv(list_writer, list)\n\n\ndef test_method():\n    r = requests.get('https://api.github.com/legacy/repos/search/python'+'?start_page=1', auth=('user', 'pass'))\n    dict_of_repos = json.loads(r.text)\n    list_of_repos = dict_of_repos[\"repositories\"]\n    repo_information = []\n    for repo in list_of_repos:\n        indiv_repo = []\n        indiv_repo.append(repo[\"name\"])\n        indiv_repo.append(repo[\"fork\"])\n        print indiv_repo\n        repo_information.append(indiv_repo)\n    return repo_information\n\ndef open_csv():\n    github_csv = open('Githubcsv_1_2.csv', 'wb')\n    writer = csv.writer(github_csv)\n    return writer   \n\ndef write_to_csv(list_writer, info):\n    list_writer.writerow(info)\n    return\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"},{"tags":["python","installation","boto"],"answer_count":5,"favorite_count":1,"up_vote_count":8,"down_vote_count":2,"view_count":8927,"score":6,"question_id":2481287,"title":"How do I install boto?","body":"<p>So that I am able to work with it within my python scripts?</p>\n"},{"tags":["python","integer"],"answer_count":2,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":1442,"score":5,"question_id":7604966,"title":"Maximum and Minimum values for ints","body":"<p>I am looking for minimum and maximum values for integers in python. For eg., in Java, we have <code>Integer.MIN_VALUE</code> and <code>Integer.MAX_VALUE</code>. Is there something like this in python?</p>\n"},{"tags":["python","visual-studio"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":175,"score":0,"question_id":12678916,"title":"Installing Python Tools for Visual Studio 2012 (PTVS)","body":"<p>I installed the version for VS 2010 a few weeks ago, and it went flawlessly. I am not having such good luck for the version for VS 2012. What did I do wrong? I ran, in order, two installers from Microsoft, \"vs_isoshell.exe\", \"vs_intshelladditional.exe\", and then \"PTVS 1.5RC VS 2012.msi\". VS Shell 2012 came up, and the Python support appeared to be present. I used the Wizard to create a new Python project. It will not run when I click to debug it. Also, VS Shell does not display the bottom of the window correctly either. VS 2010 Shell and PTVS still work perfectly.</p>\n\n<p>What is the procedure for installing the 2012 version?</p>\n\n<p>EDIT: I see that the instructions for installing the 2010 version say to uninstall previous versions first. I am reluctant to uninstall the 2010 version. If I uninstall PTVS and run PTVS 1.5RC VS 2012.msi, will PTVS still work in VS 2010 Shell?</p>\n\n<p><a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=30670\" rel=\"nofollow\">Isolated shell</a></p>\n\n<p><a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=30663\" rel=\"nofollow\">Integrated shell</a></p>\n\n<p><a href=\"http://pytools.codeplex.com/\" rel=\"nofollow\">PTVS</a></p>\n\n<p><img src=\"http://i.stack.imgur.com/UoOlP.png\" alt=\"enter image description here\"></p>\n"},{"tags":["python","regex","negative-lookbehind"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13243295,"title":"Python Regex match so long as there's no character","body":"<p>I am having some trouble with another regular expression. For this one, my code is supposed to look for the pattern:</p>\n\n<pre><code>re.compile(r\"kill(?:ed|ing|s)\\D*(\\d+).*?(?:men|women|children|people)?\")\n</code></pre>\n\n<p>However, it is matching too aggressively. It happens to match a sentence which has the word 'killing' in it. But the pattern continues to collect until it reaches a digit further down in the text. In particular, it is matching:</p>\n\n<pre><code>killed in an apparent u.s. drone attack on a car in yemen on sunday, tribal sources and local officials said.the men's car was driving through the south-eastern province of maareb, a mostly desert region where militants have taken refuge after being driven from southern strongholds.yemen, where al qaeda militants exploited a security vacuum during last year's uprising that ousted president ali abdullah saleh, has seen an in10\n</code></pre>\n\n<p>This is not the behavior I'm after. I would like this pattern to fail if it cannot be found inside a single sentence. </p>\n\n<p>The solution I'm trying implement in pseudo code is:</p>\n\n<pre><code>find instance of 'kill'\nif what follows contains a period (\\.) before a digit, do not match.\n</code></pre>\n\n<p>My failed implementation looks like this:</p>\n\n<pre><code>re.compile(r\"kill(?:ed|ing|s)\\D*(?!:\\..*?)(\\d+).*?(?:men|women|children|people)?\")\n</code></pre>\n\n<p>I've tried a 'look-behind', but I have to specify a width. What I'm trying to do with the above is match any ending of 'kill', followed by any non-digit, but NOT match a period, and anything else is free to follow before the digit I'm after. </p>\n\n<p>Sadly, this code behaves the exact same in my test. Any help would be appreciated.</p>\n"},{"tags":["python","function","split"],"answer_count":4,"favorite_count":4,"up_vote_count":17,"down_vote_count":0,"view_count":14764,"score":17,"question_id":113655,"title":"Is there a function in python to split a word into a list?","body":"<p>Is there a function in python to split a word into a list of single letters? e.g:</p>\n\n<pre><code>s=\"Word to Split\"\n</code></pre>\n\n<p>to get</p>\n\n<pre><code>wordlist=['W','o','r','d','','t','o' ....]\n</code></pre>\n"},{"tags":["python","python-3.x"],"answer_count":8,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":72,"score":3,"question_id":13239232,"title":"Python unexpected indentaton error main()","body":"<p>I have no idea how to fix this.  I've tried retyping the program.</p>\n\n<p>I get an unexpected indentation error for the last main function.</p>\n\n<pre><code>resident = 81\nnonresident = 162\n\n\ndef main():\n\n    # initialize counters and total tuition\n    resident_counter = 0\n    nonresident_counter = 0\n    total_tuition = 0\n\n    print(\"Name \\tCode\\tCredits\\tTuition\")\n    print\n\n    try:\n        # open the data file\n        infile = open('enroll.txt', 'r')\n\n        # read the first value from the file\n        student_name = infile.readline()\n\n        # continue reading from file until the end\n        while student_name != '':\n\n            # strip the new line character and print the student's name\n            student_name = student_name.rstrip('\\n')\n            print(student_name, end='\\t')\n\n            # read the code type, strip the new line, and print it\n            code = infile.readline()\n            code = code_type.rstrip('\\n')\n            print(code_type, end='\\t')\n\n            # read the number of credits, strip the new line, and print it\n            credits = infile.readline()\n            credits = int(credits)\n            print(format(credits, '3.0f'), end='\\t')\n\n            # check the room type and compute the rental amount due \n            # increment the appropriate counter\n            if code_type == \"R\" or room_type == \"r\":\n                payment_due = credits * resident\n                resident_counter += 1\n            elif code_type == \"N\" or room_type == \"n\":\n                payment_due = credits * nonresident\n                nonresident_counter += 1\n            elif code_type != \"R\" or code_type != \"r\" or code_type != \"N\" or code_type != \"n\":\n                payment_due = 0\n\n            # accumulate the total room rent\n            tuition += payment_due\n\n            # print the appropriate detail line\n            if payment_due == 0:\n                print('invalid code')\n            else:\n                print('$', format(tuition, '8,.2f'))\n\n            # get the next studen't name\n            student_name = infile.readline()\n\n        # close the input file\n        infile.close()\n\n        # print the counters and payment total amount\n        print\n        print('total number of resident students: ', resident_counter)\n        print('total number of nonresident: ', nonresident_counter)\n        print\n        print('total students: ', end='')\n        print('$', format(tuition, ',.2f'))\n# execute the main function\n\nmain()\n</code></pre>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13243063,"title":"How to convert raw json objects into Json in python?","body":"<pre><code>[{\"changed_aspect\": \"media\", \"subscription_id\": xxxx, \"object\": \"user\", \"object_id\": \"xxxx\", \"time\": \"xxxxxx\"}]\n</code></pre>\n\n<p>That's the data I get from the server. </p>\n\n<p>jsondump = json.dump(data)</p>\n\n<p>but when I do jsondump[1][\"changed_aspect\"] it doesn't show the value media. Where am I going wrong?</p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13238433,"title":"Django - Complex query","body":"<p>Assuming i have two models:</p>\n\n<pre><code>class profile(models.Model):\n    #some fields here\n\nclass ratings(models.Model):\n    profile = models.ForeignKey(profile)\n    category = models.IntegerField()\n    points = models.IntegerField()\n</code></pre>\n\n<p>Assuming following state of MySQL table:</p>\n\n<pre><code>profile    |    category    |    points\n   1                1               10\n   1                1               10\n   1                2               10\n   1                3               0\n   1                4               10\n   1                4               10\n   1                4               10\n   1                5               0\n</code></pre>\n\n<p>I have following values in my POST data:</p>\n\n<pre><code>category_1_avg_val = 7\ncategory_2_avg_val = 5\ncategory_3_avg_val = 5\ncategory_4_avg_val = 7\ncategory_5_avg_val = 9\n</code></pre>\n\n<p>Now i want to get all profiles whose (average of points) (group by category) >= (avg values of category coming in post)</p>\n\n<p>I tried to do this one by one as</p>\n\n<pre><code>objects = profile.objects.filter(\n    ratings__category=1) \\\n    .annotate(avg_points=Avg('ratings__points'))\\\n    .filter(avg_points__gte=category_1_avg_val)\n\n\nobjects = objects.filter(\n    ratings__category=2) \\\n    .annotate(avg_points=Avg('ratings__points'))\\\n    .filter(avg_points__gte=category_2_avg_val)\n</code></pre>\n\n<p>But this is wrong I think. Please help me out. If return is a queryset that would be great.</p>\n"},{"tags":["python","r","rpy2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13242662,"title":"Unable to use Rpy2","body":"<p>Why I try to load Rpy2 in Python, the interpreter finds the module but as soon as I try to import anything from it, it returns an error:</p>\n\n<p>e.g. </p>\n\n<pre><code>import rpy2 # No errors, although it does not print anything\n</code></pre>\n\n<p>But</p>\n\n<pre><code>import rpy2.robjects \n</code></pre>\n\n<p>returns the following error:</p>\n\n<blockquote>\n  <p>/home/jimmy/.python_easy_install/rpy2-2.3.0beta1-py2.7-linux-x86_64.egg/rpy2/rinterface/_rinterface.so:\n  undefined symbol: Rf_translateCha rUTF8</p>\n</blockquote>\n\n<hr>\n\n<p>I followed the instructions in the website:</p>\n\n<p><strong>1.</strong> Installed R with the option for shared libraries:</p>\n\n<pre><code># &lt;go to the R source directory&gt;\nmake distclean\n./configure --enable-R-shlib\nmake\nmake install\n</code></pre>\n\n<p><strong>2.</strong> Added this to my <code>.bashhrc</code>:</p>\n\n<pre><code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$RHOME/lib\n</code></pre>\n\n<p><strong>3.</strong> And then installed <code>rpy2</code> with <code>easy_install</code> (I also tried with <code>pip</code>):</p>\n\n<pre><code>easy_install -d /home/jimmy/.python_easy_install rpy2\n</code></pre>\n\n<p>Why is it not working?</p>\n\n<p>This is all on Linux with the latest versions of <code>Rpy2</code>, <code>R</code> and <code>Python</code>.</p>\n"},{"tags":["python","python-3.x"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":37,"score":1,"question_id":13242837,"title":"Python 3. Return from a list","body":"<p>I have a list like this:</p>\n\n<pre><code>videos = ['http://www.youtube.com/watch?v=oKI-tD0L18A',\n           'http://www.youtube.com/watch?v=82LCKBdjywQ',\n           'http://www.youtube.com/watch?v=GpNSip5gyKo]\n</code></pre>\n\n<p>I want to return it as a list, but with the easier form like: \"youtu.be/(id) \" instead of \"http://www.youtube.com/watch?v=(id)\".</p>\n\n<p>I hope you guys understand my question. Thanks</p>\n"},{"tags":["python","couchdb","couchdb-python"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13242981,"title":"How to load from couchdb to list all objects?","body":"<p>I have simple class in Python like ( I am using Couchdb like database and mapping to Python objects couchdb-python)</p>\n\n<pre><code>class Battlefield(Document):\n    __nation__ = None\n    def __init__(self):\n        pass\n    def __load__(self):\n        pass\n</code></pre>\n\n<p>I have outer class Map like</p>\n\n<pre><code>class Map(object):\n    __battlefields__ = []\n    def __init__(self):\n        pass\n</code></pre>\n\n<p>Battlefields are in db battlefields. How to load all from db in list <strong>battlefields</strong> inside Map class ?</p>\n"},{"tags":["python","pyqt","pyqt4","pyside"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13242875,"title":"Python Crashing with QThreadPool","body":"<p>Trying to figure out why python.exe is crashing with using QThreadPool in this code. I read this was a bug in PyQT/PySide but I also read there was a work around but I am not sure how to implement it. But it may not be a bug but just my lack of knowledge on how to convert from C++ to Python so any ideas are greatly appreciated. </p>\n\n<p><strong>Relevant code parts posted</strong> </p>\n\n<pre><code>    def readyRead(self):\n        self.msg = self.socket.readAll()\n        self.task = Task()\n        self.task.result.connect(self.taskResult, Qt.DirectConnection)\n        self.task.setAutoDelete(True)\n        QThreadPool.globalInstance().start(self.task)\n\n....\n\n    @Slot(int)\n    def taskResult(self, iNumber):\n        self.buffer = QByteArray()\n        self.buffer.append(\"Task Result = \")\n        self.buffer.append(str(iNumber))\n        self.socket.write(self.buffer)\n</code></pre>\n\n<p>....</p>\n\n<pre><code>class Task(QObject, QRunnable):\n    result = Signal(int)\n\n    def __init__(self, parent=None):\n        QRunnable.__init__(self)\n\n    def run(self, iNumber):\n        for i in range(0, 100):\n            iNumber += i\n        print \"Task Done\"\n        self.result.emit(iNumber)\n</code></pre>\n"},{"tags":["python","pil","cpython"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":31,"score":2,"question_id":13242221,"title":"Does PIL resize() hold the GIL?","body":"<p>Example:</p>\n\n<pre><code>image = Image.open('foo.png')\n# releases the GIL?\nresized = image.resize((800, 600), Image.ANTIALIAS)\n# reacquires the GIL?\n</code></pre>\n\n<p>Obviously the variable assignment needs to hold the GIL, but it's difficult to break that up into two lines. :)</p>\n\n<p>If there are two threads doing image resizes, can those resizes run on two different cores?</p>\n"},{"tags":["python","strip"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":76,"score":0,"question_id":13241200,"title":"Python: cannot remove \\n","body":"<p>I want to remove <code>\\n</code> from the beginning lines like this <code>\\n  id int(10) NOT NULL</code>. I tried <code>strip()</code>, <code>rstrip()</code>, <code>lstrip()</code> <code>replace('\\n', '')</code>. I don't get it. What am I doing wrong?</p>\n\n<pre><code>print(column)\nprint(column.__class__)\nx = column.rstrip('\\n')\nprint(x)\nx = column.lstrip('\\n')\nprint(x)            \nx = column.strip('\\n')          \nprint(x)\nprint(repr(column))\n</code></pre>\n\n<p>gives</p>\n\n<pre><code>\\n  id int(10) NOT NULL\n&lt;type 'str'&gt;\n\\n  id int(10) NOT NULL\n\\n  id int(10) NOT NULL\n\\n  id int(10) NOT NULL\n\\n  id int(10) NOT NULL\n'\\\\n  `id` int(10) NOT NULL'\n</code></pre>\n"},{"tags":["python","html","google-app-engine","checkbox","webapp2"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":65,"score":0,"question_id":13242412,"title":"How to Take Checkboxes in Python","body":"<p>I am trying to use checkboxes in my HTML, return these checkboxes to my python backend, and then increment three counters if the box is clicked.</p>\n\n<p>Right now my HTML is as follows and works fine:</p>\n\n<pre><code>&lt;form method=\"post\"&gt;\n    &lt;input type=\"checkbox inline\" name=\"adjective\" value=\"entertaining\"&gt;Entertaining\n    &lt;input type=\"checkbox inline\" name=\"adjective\" value=\"informative\"&gt;Informative\n    &lt;input type=\"checkbox inline\" name=\"adjective\" value=\"exceptional\"&gt;Exceptional\n&lt;/form&gt;\n</code></pre>\n\n<p>and then on my python backend I have the following:</p>\n\n<pre><code>def post(self):\n    adjective = self.request.get('adjective ')\n\n    if adjective :\n        #somehow tell if the entertaining box was checked\n        #increment entertaining counter\n        #do the same for the others\n</code></pre>\n"},{"tags":["python","wmi","pywin32"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":121,"score":2,"question_id":13088618,"title":"wmi not available for some time after reboot","body":"<p>I'm having the problem with the WMI availability on logon.</p>\n\n<p>Right after reboot I open cmd and with python interpreter:</p>\n\n<pre><code>&gt;&gt;&gt; import wmi\n&gt;&gt;&gt; c = wmi.WMI()\n&gt;&gt;&gt; c.Win32_OperatingSystem()\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Python27\\lib\\site-packages\\wmi.py\", line 1147, in __getattr__\n    return getattr (self._namespace, attribute)\n  File \"C:\\Python27\\lib\\site-packages\\win32com\\client\\dynamic.py\", line 516, in\n__getattr__\n    raise AttributeError(\"%s.%s\" % (self._username_, attr))\nAttributeError: winmgmts:.Win32_OperatingSystem\n&gt;&gt;&gt;\n</code></pre>\n\n<p>5 minutes later I open <strong>another</strong> cmd and python interpreter:</p>\n\n<pre><code>Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win\n32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import wmi\n&gt;&gt;&gt; c = wmi.WMI()\n&gt;&gt;&gt; c.Win32_OperatingSystem()\n[&lt;_wmi_object: \\\\W520-ALEX-WIN7\\root\\cimv2:Win32_OperatingSystem=@&gt;]\n&gt;&gt;&gt;\n</code></pre>\n\n<p>NOTE: the first cmd still keeps saying <strong><em>AttributeError</em></strong> even 5 minutes later.</p>\n\n<p>NOTE 2: if I logout and login wmi is available, so it is somehow effected by reboot</p>\n\n<p>with process explorer I check the <em>environmental variables</em> and they are the same for both cmds</p>\n\n<p>What could that be? \nPlease help.</p>\n\n<p><strong>UPDATE:</strong> Apparently the problem is connecting to the wbem services:</p>\n\n<pre><code>&gt;&gt;&gt; import win32com.client\n&gt;&gt;&gt; win32com.client.Dispatch('WbemScripting.SWbemLocator')\n&lt;COMObject WbemScripting.SWbemLocator&gt;\n&gt;&gt;&gt; wmi_service= win32com.client.Dispatch('WbemScripting.SWbemLocator')\n&gt;&gt;&gt; wbem_service =  wmi_service.ConnectServer('.','root/cimv2')\n&gt;&gt;&gt; wbem_service\n&lt;COMObject &lt;unknown&gt;&gt;\n&gt;&gt;&gt; items = wbem_service.ExecQuery('Select * from Win32_OperatingSystem')\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"&lt;COMObject &lt;unknown&gt;&gt;\", line 3, in ExecQuery\n  File \"C:\\Python27\\lib\\site-packages\\win32com\\client\\dynamic.py\", line 282, in\n_ApplyTypes_\n    result = self._oleobj_.InvokeTypes(*(dispid, LCID, wFlags, retType, argTypes\n) + args)\npywintypes.com_error: (-2147352567, 'Exception occurred.', (0, u'SWbemServicesEx\n', u'Generic failure ', None, 0, -2147217407), None)\n&gt;&gt;&gt;\n</code></pre>\n\n<p>NOTE 3: <code>wmic os</code> always worked.</p>\n\n<p>NOTE 4: re-installing pywin32 package didn't help. Neither did Re-registering/re-compiling the WMI components and resetting of the WMI database (as recommended <a href=\"http://stackoverflow.com/a/7078421/1167879\">here</a>)</p>\n\n<p><strong>NOTE 5: my 4 Other laptops don't have this problem.</strong></p>\n\n<p>Also <strong>wmiprov.log</strong> has:</p>\n\n<pre><code>(Mon Oct 29 11:40:07 2012.248587) : ***************************************\n(Mon Oct 29 11:40:07 2012.248587) : Could not get pointer to binary resource for file:\n(Mon Oct 29 11:40:07 2012.248587) : C:\\Windows\\system32\\drivers\\ndis.sys[MofResourceName](Mon Oct 29 11:40:07 2012.248587) : \n(Mon Oct 29 11:40:07 2012.248587) : ***************************************\n(Mon Oct 29 11:40:07 2012.248587) : ***************************************\n(Mon Oct 29 11:40:07 2012.248587) : Could not get pointer to binary resource for file:\n(Mon Oct 29 11:40:07 2012.248587) : C:\\Windows\\system32\\drivers\\en-US\\ndis.sys.mui[MofResourceName](Mon Oct 29 11:40:07 2012.248587) : \n(Mon Oct 29 11:40:07 2012.248587) : ***************************************\n(Mon Oct 29 11:40:07 2012.248603) : ***************************************\n(Mon Oct 29 11:40:07 2012.248603) : Could not get pointer to binary resource for file:\n(Mon Oct 29 11:40:07 2012.248603) : C:\\Windows\\system32\\DRIVERS\\wmiacpi.sys[MofResource](Mon Oct 29 11:40:07 2012.248603) : \n(Mon Oct 29 11:40:07 2012.248603) : ***************************************\n(Mon Oct 29 11:40:07 2012.248603) : ***************************************\n(Mon Oct 29 11:40:07 2012.248603) : Could not get pointer to binary resource for file:\n(Mon Oct 29 11:40:07 2012.248603) : C:\\Windows\\system32\\DRIVERS\\monitor.sys[MonitorWMI](Mon Oct 29 11:40:07 2012.248603) : \n(Mon Oct 29 11:40:07 2012.248603) : ***************************************\n</code></pre>\n\n<p>NOTE 6: the WMIDiag tool report is at <a href=\"http://dl.dropbox.com/u/61886092/WMIDIAG-V2.1_WIN7_.CLI.SP1.64_W520-ALEX-WIN7_2012.10.26_18.34.00-REPORT.TXT\" rel=\"nofollow\">my dropbox</a></p>\n"},{"tags":["python","tkinter"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13225071,"title":"Tkinter - Configuring a Label","body":"<p>I'm making a maze game that's based on arrays.\nI have it so when the player(Value 1) reaches the end point (Value -5), my label changes from Level 1, to Level 2.</p>\n\n<p>I'm having problems implementing the level feature. I was wondering if anyone can help me.\nI believe I'm suppose to be using \"configure\", but it's not working out for me.</p>\n\n<p>I have level as a global variable.\nWhen the player reaches the end, it adjusts the level = 2, then recalls init(canvas)</p>\n"},{"tags":["python","macros","trac"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13233562,"title":"writing my first Trac macro","body":"<p>Ok, I've looked all over, and I <em>think</em> I'm doing this right, but I'm not getting any results.  Is there anyone out there who's written Trac macros that can guide me through the first steps?  Here's what I've written:</p>\n\n<pre><code>from trac.wiki.macros import WikiMacroBase\nfrom genshi.builder import tag\n\nclass MyMacro(WikiMacroBase):\n    \"\"\"Proof of concept\"\"\"\n\n    revision = \"$Rev$\"\n    url = \"$URL$\"\n\n    def expand_macro(self, formatter, name, args):\n        return tag.b(\"Hello world.\")\n</code></pre>\n\n<p>I've saved it as a  .py file and put it in my Trac project's /plugins directory.  Do I need to restart apache?  Am I correct in expecting <code>[[MyMacro]]</code> to output a <strong>Hello world.</strong> on the page?</p>\n"},{"tags":["python","3d","geometry"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13136828,"title":"Rotations in 3D","body":"<p>I have three vectors in 3D a,b,c. Now I want to calculate a rotation r that when applied to a yields a result parallel to b. Then the rotation r needs to be applied to c. </p>\n\n<p>How do I do this in python? Is it possible to do this with numpy/scipy?</p>\n"},{"tags":["c++","python","gcc","python-2.7"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13115988,"title":"C++ Compiling with Python.h Undefined Symbols","body":"<p>So, I've been trying to start using Python.h for a little project I want to work on that seems pretty /simple/. But before I start I want to try to learn how to use Python.h.\nSo I found this little example online.</p>\n\n<pre><code>#include \"Python/Python.h\"  \n\nint main(int argc, char** argv)  \n{  \n    Py_Initialize();  \n    PyRun_SimpleString(\"print 'Test'\");  \n    PyRun_SimpleString(\"print str(3 + 5)\"); \n    Py_Exit(0);  \n}\n</code></pre>\n\n<p>Seems pretty straight forward. When i first used</p>\n\n<pre><code>gcc test.cpp\n</code></pre>\n\n<p>to compile, i got some undefined symbols. I quickly found out I should use</p>\n\n<pre><code>-lpython2.7\n</code></pre>\n\n<p>then I found out I could also use</p>\n\n<pre><code>-L/Library/Frameworks/Python.framework/Versions/2.7/lib/\n</code></pre>\n\n<p>that didn't work (I made sure that /Library/Frameworks/Python/Versions/2.7/lib/ existed)\nI'm stuck, what do I do?\nI get</p>\n\n<pre><code>Undefined symbols:\n  \"_Py_Initialize\", referenced from:\n      _main in ccoUOSlc.o\n  \"_PyRun_SimpleStringFlags\", referenced from:\n      _main in ccoUOSlc.o\n      _main in ccoUOSlc.o\n  \"___gxx_personality_v0\", referenced from:\n      _main in ccoUOSlc.o\n      CIE in ccoUOSlc.o\n  \"_Py_Exit\", referenced from:\n      _main in ccoUOSlc.o\nld: symbol(s) not found\ncollect2: ld returned 1 exit status\n</code></pre>\n\n<p>EDIT:\nI just tried using the -Framework argument, and tried adding after the -L the -l python2.7 argument, and I now get</p>\n\n<pre><code>Undefined symbols:\n  \"___gxx_personality_v0\", referenced from:\n      _main in ccfvtJ4j.o\n      CIE in ccfvtJ4j.o\nld: symbol(s) not found\ncollect2: ld returned 1 exit status\n</code></pre>\n\n<p>Now what?</p>\n"},{"tags":["python","qt","delegates","pyside","qtableview"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":15,"score":1,"question_id":13242442,"title":"PySide delegate on QTableView with text and tick","body":"<p>I'm implementing a <code>QTableView</code> with a custom model and I need a cell that looks like this:\n<img src=\"http://oi47.tinypic.com/2jirkw.jpg\"/></p>\n\n<p>Currently I use the delegate below (adapted from other answers) to draw a flag (an html coloured text) on a single cell, clicking on the whole cell changes the flag.</p>\n\n<pre><code>class HTMLDelegate(QtGui.QStyledItemDelegate):\ndef Doc(self, options):\n    if options.text == \"0\":\n        return \"\"\n    elif options.text == \"1\":\n        return \"&lt;b&gt;&lt;font align='right' color='green'&gt;V&lt;/font&gt;&lt;/b&gt;\"\n    elif options.text == \"2\":\n        return \"&lt;font align='right' color='#FF8400'&gt;!!&lt;/font&gt;\"\n    elif options.text == \"3\":\n        return \"&lt;b&gt;&lt;font align='right' color='#CC0000'&gt;F&lt;/font&gt;&lt;/b&gt;\"\n    elif options.text == \"4\":\n        return \"&lt;b&gt;&lt;font align='right' color='#000000'&gt;X&lt;/font&gt;&lt;/b&gt;\"\n\ndef paint(self, painter, option, index):\n    options = QtGui.QStyleOptionViewItemV4(option)\n    self.initStyleOption(options,index)\n\n    style = QtGui.QApplication.style() if options.widget is None else options.widget.style()\n\n    doc = QtGui.QTextDocument()\n\n    background = None\n    doc.setHtml(self.Doc(options))\n\n    options.text = \"\"\n    style.drawControl(QtGui.QStyle.CE_ItemViewItem, options, painter);\n\n    ctx = QtGui.QAbstractTextDocumentLayout.PaintContext()\n\n    # Highlighting text if item is selected\n    #if (optionV4.state &amp; QStyle::State_Selected)\n    #    ctx.palette.setColor(QPalette::Text, optionV4.palette.color(QPalette::Active, QPalette::HighlightedText));\n\n    textRect = style.subElementRect(QtGui.QStyle.SE_ItemViewItemText, options, None)\n    painter.save()\n    if background:\n        painter.fillRect(options.rect, QtCore.Qt.yellow)\n    painter.translate(textRect.topLeft())\n    painter.setClipRect(textRect.translated(-textRect.topLeft()))\n\n    doc.documentLayout().draw(painter, ctx)\n\n    painter.restore()\n\ndef editorEvent(self, event, model, option, index):\n    if not (index.flags() &amp; QtCore.Qt.ItemIsEditable) &gt; 0:\n        return False\n\n    # Do not change the checkbox-state\n    if event.type() == QtCore.QEvent.MouseButtonRelease or event.type() == QtCore.QEvent.MouseButtonDblClick:\n        if event.button() != QtCore.Qt.LeftButton:\n            return False\n        if event.type() == QtCore.QEvent.MouseButtonDblClick:\n            return True\n    elif event.type() == QtCore.QEvent.KeyPress:\n        if event.key() != QtCore.Qt.Key_Space and event.key() != QtCore.Qt.Key_Select:\n            return False\n    else:\n        return False\n\n    # Change the flag-state\n    self.setModelData(None, model, index)\n    return False\n\n\ndef setModelData (self, editor, model, index):\n    '''\n    The user wanted to change the old flag into the next\n    '''\n    #newValue = not bool(index.model().data(index, QtCore.Qt.DisplayRole))\n    #model.setData(index, newValue, QtCore.Qt.EditRole)\n    oldFlagIndex = model.index(index.row(), COD_COL_FLAGS)\n    oldFlag = model.data(oldFlagIndex)\n\n    if type(oldFlag) == long:\n        newFlag = oldFlag + 1\n        if newFlag &gt; 4:\n            newFlag = 0\n    else:\n        newFlag = 0\n    model.setData(index, newFlag, QtCore.Qt.EditRole)\n</code></pre>\n\n<p>How can I accomplish this ?<br>\nThe options that I have in mind are:</p>\n\n<ul>\n<li><p>A delegate that draws text (rich or simple) along with a pixmap to the right</p></li>\n<li><p>A delegate that draws two strings of text (one normal and one rich, or both rich text) aligned one to the left and one to the right</p></li>\n</ul>\n\n<p>As an exercise, but not required for the app, it would be nice to trigger the flag change only when clicking on it instead of the whole cell.</p>\n\n<p>Thanks</p>\n"},{"tags":["python","gnuplot","sublimetext2","importerror"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13239839,"title":"Sublime Text2 Import error: No module named Gnuplot","body":"<p>I'm trying to use Gnuplot in a Python script I'm writing in Sublime Text. Whenever I build, I get the error message</p>\n\n<pre><code>Traceback (most recent call last): \n    File \"...\" line 4, in &lt;module&gt;\n       import Gnuplot\nImportError: No module named Gnuplot\n</code></pre>\n\n<p>If I do the exact same code lines directly in Terminal, I have no problem importing and using Gnuplot. </p>\n\n<p>The import error seems to be common, just with other modules. Usually the fix is related to PYTHONPATH. However, Gnuplot is on my computer located in </p>\n\n<pre><code>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages\n</code></pre>\n\n<p>and should thus be found. </p>\n\n<p>Anybody who's got a fix to this one?</p>\n"},{"tags":["php","python","mysql","gtfs"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":15,"score":0,"question_id":13242426,"title":"How do I use GTFS Real Time to get Alerts, Delays etc?","body":"<p>I've been programming PHP for a couple of years, and I'm looking at tackling the GTFS real time feeds. I've downloaded the GTFS files for a specific agency and am parsing them with PHP using the fgetcsv function. </p>\n\n<p>What I'm stuck on right now is, how the HECK do I use this information to find service delays etc. I'm used to parsing information through XML apis etc, but have not dealt with anything like this before. It seems that it requires some python knowledge which I do not know, but am willing to learn. </p>\n\n<p>If anyone can provide me with proper guidance, I'd GREATLY appreciate it. I can get it to store the records into MySQL, but am not sure if I just need to create queries against the current timestamp vs. the expected timestamp to see if there is a delay. I'm having a hard time trying to figure out what to do next. </p>\n\n<p>Any guidance would be greatly appreciated.</p>\n"},{"tags":["javascript","python","json"],"answer_count":7,"favorite_count":81,"up_vote_count":145,"down_vote_count":0,"view_count":39100,"score":145,"question_id":455580,"title":"JSON datetime between Python and JavaScript","body":"<p>I want to send a datetime.datetime object in serialized form from Python using <a href=\"http://en.wikipedia.org/wiki/JSON\" rel=\"nofollow\">JSON</a> and de-serialize in JavaScript using JSON. What is the best way to do this?</p>\n"},{"tags":["python","events","gui","wxpython","textctrl"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13242130,"title":"How can I get the position of the entered char?","body":"<p>I have a application which ask the user for a input (wx Python). I want to control what is inside the TextCtrl so I added the event: wx.EVT_CHAR. The function work properly except that I want the position of the curently entered charater.</p>\n\n<p>Let say I only want a charater to be at one place, I need the position of it. That my prob.</p>\n\n<pre><code>    def handle_keypress(self, event, entry):\n        key = event.GetKeyCode()\n        keycode = [1,2,3,4,5,6] #example\n\n        bool = False\n        for char in keycode:\n            if key == char:\n                bool = True\n                break\n\n        if bool == True:\n            event.Skip()\n</code></pre>\n\n<p>thx, I hope you guys can help me! </p>\n\n<p>PS: Sorry for my bad english :(</p>\n\n<p>EDIT:\nProblem solved!</p>\n\n<p>I though the problem would be in the EVT_CHAR: <a href=\"http://www.wxpython.org/docs/api/wx.KeyEvent-class.html\" rel=\"nofollow\">http://www.wxpython.org/docs/api/wx.KeyEvent-class.html</a></p>\n\n<p>But it's not, it was in the TextCtrl: <a href=\"http://www.wxpython.org/docs/api/wx.TextCtrl-class.html\" rel=\"nofollow\">http://www.wxpython.org/docs/api/wx.TextCtrl-class.html</a></p>\n\n<p>The method GetInsertionPoint() worked!</p>\n"},{"tags":["python","python-3.x","pygame"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13242245,"title":"Best Python / Pygame intermediate programming tutorial?","body":"<p>So, I've been learning about basic Python 3 programming for the last few months and I feel that I would like to start an \"intermediate\" level project designing a game. I've followed through a whole bunch of tutorials for making simple games and drawing objects to the screen, but I'd like to take it one step further in learning how to make a more advanced game. I'd like to make a fairly complex but original platforming game and I'm having trouble creating the code for it, right now I have something basic that looks like this:</p>\n\n<p><img src=\"https://dl.dropbox.com/u/53132286/Untitled.png\" alt=\"basic platforming game\"></p>\n\n<p>So, specifically what I would like to do is have a basic engine that I can pass an object (E.g. a \"dirt block\") the I've coded myself and have the engine simulate the world based on my parameters.</p>\n\n<p>So, can anyone recommend a useful set of more intermediate/advanced tutorials for me to learn how to make my own engine?</p>\n"},{"tags":["python","perl"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":81,"score":0,"question_id":13238526,"title":"batch delete smaller of two files","body":"<p>I am looking for a way to do a batch rename of a bunch of files based on the criteria mentioned below:</p>\n\n<p>The filelist looks similar to this, and should be alpha-numeric:</p>\n\n<ul>\n<li>A20100102-1.loc.txt </li>\n<li>A20100102.loc.txt</li>\n<li>A20100103-1.loc.txt</li>\n<li>A20100103.loc.txt\n...etc.</li>\n</ul>\n\n<p>The following pseudo-code is pretty close to the way I want it to behave, but I'm trying to figure out if sed, awk, python, perl, or a bash script is the way to go (I'm examining the options in order to figure out which implementation I might want to delve deeper into):</p>\n\n<pre><code>for all_files_in_dir:{\n  if(currentfile.name is_close_to previousfile.name){  //maybe regex here\n    var small_file = find_smaller_file_filename(currentfile.filesize, previousfile.filesize);\n    sys.remove(small_file);\n  }\n}\n</code></pre>\n\n<p>Thanks for any suggestions!  </p>\n"},{"tags":["python","html","forms"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":54,"score":0,"question_id":13241850,"title":"Why does this work via the command line, but not via a web browser?","body":"<p>Why does this work via the command line, but not my via a web browser?\n(both files in python only the 2nd one loads)</p>\n\n<pre><code>import cgi\nimport cgitb; cgitb.enable()\nimport BaseHTTPServer\nfrom SimpleHTTPServer import SimpleHTTPRequestHandler\n# get the info from the html form\nform = cgi.FieldStorage()\n#set up the html stuff\nreshtml = \"\"\"Content-Type: text/html\\n\n&lt;html&gt;\n &lt;head&gt;&lt;title&gt;login&lt;/title&gt;&lt;/head&gt;\n &lt;body&gt;\n \"\"\"\n\nprint reshtml \n\nUser_Name = form.getvalue('User_Name')\npassword = form.getvalue('Pass_Word')\nlog=\"info:  \"\nif User_Name == 'NAME' and password == 'passcode':\n    log=log+\"login passed \"\nelse:\n    log=log+\"login failed \"\nprint log\nprint '&lt;/body&gt;'\nprint '&lt;/html&gt;'\n</code></pre>\n\n<p>I invoke it using a file that passes in the parameters \"User_Name\" and \"Pass_Word\":</p>\n\n<pre><code>#!/Python27/python\nprint \"Content-type: text/html\"\nprint\nprint \"\"\"\n&lt;html&gt;&lt;head&gt;\n&lt;title&gt;log in&lt;/title&gt;\n&lt;/head&gt;&lt;body&gt;\n\"\"\"\nimport sha, time, Cookie, os, fileinput, cgi, cgitb \nimport sys\nimport BaseHTTPServer\nfrom SimpleHTTPServer import SimpleHTTPRequestHandler\nlog = \"info:  \"\ncookie = Cookie.SimpleCookie()\nstring_cookie = os.environ.get('HTTP_COOKIE')\nstring_cookie = str(string_cookie)\ninfoform = \"\"\"\n    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"styles/home.css\" media=\"screen\" /&gt;\n    &lt;div id=\"top\" style=\" height:50px;width:100%;position:absolute;left:0px;top:0px;\" &gt;\n    &lt;form action=\"router.py\" method=\"post\" target=\"_self\"&gt;\n    &lt;div id=\"form\" style=\"position:absolute;left:15px;top:20px;\" &gt;\n    &lt;input type=\"text\" name=\"User_Name\" value=\"User Name\"&gt;\n    &lt;input type=\"password\" name=\"Pass_Word\" value=\"Password\"&gt;\n    &lt;input type=\"hidden\" name=\"status_url\"&gt;\n    &lt;input type=\"submit\" value=\"Log in\"&gt; \n    &lt;/div&gt;\n    &lt;/form&gt;\n    &lt;div ID\"home\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div id=\"GBbody\" style=\"position:absolute;left:1px;top:55px;height:100%;width:100%;\" &gt;\n    &lt;p id=\"disply\"&gt;\n    &lt;center&gt;&lt;h2&gt;\n    Hi, and welcome!\n    &lt;/h2&gt;&lt;/center&gt;\n    &lt;h4&gt;    \n    Did you know: just the movie player and code that goes with it takes&lt;br&gt;\n    474 lines of code so-far, and may not work many web browsers (for the time being), however &lt;br&gt;\n    Google chrome is fully compatible at  this point.\n    &lt;/h4&gt;\n    &lt;/p&gt;\n    &lt;/div&gt;\n    \"\"\"\nloginas = \"\"\"\n&lt;form action=\"home.py\" method=\"post\" target=\"_self\"&gt;\n&lt;input type=\"submit\" value=\"Continue last session\" style=\"position:absolute;right:15px;top:20px;\"&gt; \n&lt;/form&gt;\n\"\"\"\nif \"sess\" in string_cookie:\n    infoform = infoform.replace('&lt;div ID\"home\"&gt;&lt;/div&gt;',loginas)\n    print infoform\nelse:\n    print infoform\n\nprint \"&lt;/body&gt;&lt;/html&gt;\"\n</code></pre>\n\n<p>but, it prints out an Internal Server Error page, help? Post script I have just reinstalled python 2.7.3</p>\n"},{"tags":["python","list","python-3.x"],"answer_count":5,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13241900,"title":"Explain the list values transformation","body":"<pre><code>x = [1, 2, 3]\ny = x\n\nx[1] = 'AB'\ny[1] = y[1][0]\n\nprint(x, y)\n&gt;&gt;&gt;\n[1, 'A', 3] [1, 'A', 3]\n</code></pre>\n\n<p>We assign 'AB' value to index 1 for x list so y list gets this value as well. Then we assign y[1][0] value to y[1], but what does y[1][0] notation mean?</p>\n"},{"tags":["python","multithreading","thread-local"],"answer_count":3,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":3219,"score":4,"question_id":1408171,"title":"Thread local storage in Python","body":"<p>How do I use thread local storage in Python?</p>\n\n<h3>Related</h3>\n\n<ul>\n<li><a href=\"http://stackoverflow.com/questions/104983/what-is-thread-local-storage-in-python-and-why-do-i-need-it\">What is “thread local storage” in Python, and why do I need it?</a> - This thread appears to be focused more on when variables are shared.</li>\n<li><a href=\"http://stackoverflow.com/questions/1403471/efficient-way-to-determine-whether-a-particular-function-is-on-the-stack-in-pytho/1403485#1403485\">Efficient way to determine whether a particular function is on the stack in Python</a> - Alex Martelli gives a nice solution</li>\n</ul>\n"},{"tags":["python","beautifulsoup"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":54,"score":-2,"question_id":13233890,"title":"Extract information within tag","body":"<p>I'm trying to learn BeautifulSoup but it takes a time. I hope you can help me with this.\nIn the code below, the same syntax is repeated several times and I would like to know how to create a list with: First item,Second item,....N:th item\nThe logic should be to find \"title=\" (which is unique) and then extract the string to the right of \"title=\". Probably very easy if you know how to do it...</p>\n\n<pre><code>&lt;td align=left valign=\"top\" class=\"small\" title=\"First item\" nowrap&gt;\n&lt;td align=left valign=\"top\" class=\"small\" title=\"Second item\" nowrap&gt;\n&lt;td align=left valign=\"top\" class=\"small\" title=\"N:th item\" nowrap&gt;\n</code></pre>\n"},{"tags":["python","numpy"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":60,"score":1,"question_id":13237522,"title":"No module named numpy","body":"<p>I have the following programs installed</p>\n\n<ol>\n<li>python 2.7 installed</li>\n<li>Numpy-1.6.2-python2.7</li>\n<li>Matplotlib-1.1.1-py2.7</li>\n</ol>\n\n<p>I believe numpy has been installed properly because when I type import numpy in python interpreter, it doesn't give me an error. I can also check the version of the numpy installed.</p>\n\n<p>I am getting the following error in my code on this line</p>\n\n<pre><code>import numpy as np\n</code></pre>\n\n<p>\"Exceptions.ImportError:No module named numpy\"</p>\n\n<p>Does anyone know a solution to this problem? Thanks!</p>\n"},{"tags":["python","database","olap","star-schema"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":46,"score":1,"question_id":13233809,"title":"Python Cubes OLAP Framework - how to work with joins?","body":"<p>I'm trying to use python's olap framework <a href=\"http://packages.python.org/cubes/\" rel=\"nofollow\">cubes</a> on a very simple database, but I am having some trouble joining tables.</p>\n\n<p>My schema looks like this:</p>\n\n<pre><code>Users table\nID | name\n\nProducts table\nID | name | price\n\nPurchases table\nID | user_id | product_id | date\n</code></pre>\n\n<p>And the cubes model:</p>\n\n<pre><code>{\n    'dimensions': [\n        {'name': 'user_id'},\n        {'name': 'product_id'},\n        {'name': 'date'},\n    ],\n    'cubes': [\n        {\n            'name': 'purchases',\n            'dimensions': ['user_id', 'product_id', 'date'],\n            'measures': ['price']\n            'mappings': {\n                'purchases.user_id': 'users.id',\n                'purchases.product_id': 'products.id',\n                'purchases.price': 'products.price'\n            },\n            'joins': [\n                {\n                    'master': 'purchases.user_id',\n                    'detail': 'users.id'\n                },\n                {\n                    'master': 'purchases.product_id',\n                    'detail': 'products.id'\n                }\n            ]\n        }\n    ]\n}\n</code></pre>\n\n<p>Now I would like to display all the purchases, showing the product's name, user's name and purchase date. I can't seem to find a way to do this. The documentation is a bit scarce.</p>\n\n<p>Thank you</p>\n"},{"tags":["python","sql","postgresql","pgadmin"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":88,"score":2,"question_id":13239004,"title":"Create SQL table with correct column types from CSV","body":"<p>I've looked a a number of questions on this site and cannot find an answer to the question: How to create <strong>multiple NEW tables</strong> in a database (in my case I am using PostgreSQL) <strong>from multiple CSV source files</strong>, where the new database table columns accurately reflect the data within the CSV columns?</p>\n\n<p>I can write the CREATE TABLE syntax just fine, and I can read the rows/values of a CSV file(s), but does a method already exist to inspect the CSV file(s) and accurately determine the column type?  Before I build my own, I wanted to check if this already existed.</p>\n\n<p>If it doesn't exist already, my idea would be to use Python, CSV module, and psycopg2 module to build a python script that would:</p>\n\n<ol>\n<li>Read the CSV file(s).</li>\n<li>Based upon a subset of records (10-100 rows?), iteratively inspect each column of each row to automatically determine the right column type of the data in the CSV.  Therefore, if row 1, column A had a value of 12345 (int), but row 2 of column A had a value of ABC (varchar), the system would automatically determine it should be a format varchar(5) based upon the combination of the data it found in the first two passes.  This process could go on as many times as the user felt necessary to determine the likely type and size of the column.</li>\n<li>Build the CREATE TABLE query as defined by the column inspection of the CSV.</li>\n<li>Execute the create table query.</li>\n<li>Load the data into the new table.</li>\n</ol>\n\n<p>Does a tool like this already exist within either SQL, PostgreSQL, Python, or is there another application I should be be using to accomplish this (similar to pgAdmin3)?</p>\n"},{"tags":["python","celery","django-celery"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":381,"score":3,"question_id":8876863,"title":"Task state and django-celery","body":"<p>I use django-celery and have task like this:</p>\n\n<pre><code>class TestTask(Task):\n    name = \"enabler.test_task\"\n\n    def run(self, **kw):\n        debug_log(\"begin test task\")\n        time.sleep(5)\n        debug_log(\"end test task\")\n\n    def on_success(self, retval, task_id, args, kwargs):\n        debug_log(\"on success\")\n\n    def on_failure(self, retval, task_id, args, kwargs):\n        debug_log(\"on failure\")\n</code></pre>\n\n<p>I use django shell to run task:</p>\n\n<pre><code>python manage.py shell\n\nr = tasks.TestTask().delay()\n</code></pre>\n\n<p>From celery log I see that task is executed:</p>\n\n<pre><code>[2012-01-16 08:13:29,362: INFO/MainProcess] Got task from broker: enabler.test_task[e2360811-d003-45bc-bbf8-c6fd5692c32c]\n[2012-01-16 08:13:29,390: DEBUG/PoolWorker-3] begin test task\n[2012-01-16 08:13:34,389: DEBUG/PoolWorker-3] end test task\n[2012-01-16 08:13:34,390: DEBUG/PoolWorker-3] on success\n[2012-01-16 08:13:34,390: INFO/MainProcess] Task enabler.test_task[e2360811-d003-45bc-bbf8-c6fd5692c32c] succeeded in 5.00004410744s: None\n</code></pre>\n\n<p>However when I check task state from hell I always got PENDING:</p>\n\n<pre><code>&gt;&gt;&gt; r = tasks.TestTask().delay()\n&gt;&gt;&gt; r\n&lt;AsyncResult: e2360811-d003-45bc-bbf8-c6fd5692c32c&gt;\n&gt;&gt;&gt; r.state\n'PENDING'\n&gt;&gt;&gt; r.state\n'PENDING'\n&gt;&gt;&gt; r.state\n'PENDING'\n&gt;&gt;&gt; r.state\n'PENDING'\n</code></pre>\n\n<p>even though task is well executed.</p>\n\n<p>Why this happens?</p>\n"},{"tags":["python","python-import"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13241827,"title":"What's the best way to do a just-in-time import of Python libraries?","body":"<p>I have a Python program that has several slow imports.  I'd like to delay importing them until they are needed.  For instance, if a user is just trying to print a help message, it is silly to import the slow modules. What's the most Pythonic way to do this?</p>\n\n<p>I'll add a solution I was playing with as a answer. I know you all can do better, though.</p>\n"},{"tags":["python","html","django","newline"],"answer_count":4,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":51,"score":7,"question_id":13241375,"title":"How to read back and print text with newlines from a Python (Django) string with HTML?","body":"<p>If someone types in a phrase, such as:</p>\n\n<pre><code>I see you driving\n\nround town with the girl I love,\n\nand I’m like: haiku.\n</code></pre>\n\n<p>(no blank lines between each line, but the text is written on three separate lines) into a text box on a web page, and then presses a button which is then stored in a database via <code>Django</code>, and that string is read back and printed on a page, how can I get it to print on an HTML page with the newlines still in the text? </p>\n\n<p>So instead of it being printed back as:\n<code>I see you driving round town with the girl I love, and I’m like: haiku.</code></p>\n\n<p>It would print as:</p>\n\n<pre><code>I see you driving\n\nround town with the girl I love,\n\nand I’m like: haiku.\n</code></pre>\n\n<p>I know that if I use: <code>(textarea)soAndSo.body(/textarea)</code>, this preserves the newlines that were in the file when the user typed it up originally. How can I get this same effect, but without having to use <code>textarea</code> boxes?</p>\n"},{"tags":["python","stream","itertools","chunking"],"answer_count":3,"favorite_count":0,"up_vote_count":5,"down_vote_count":0,"view_count":88,"score":5,"question_id":13239591,"title":"python: is there a library function for chunking an input stream?","body":"<p>I want to chunk an input stream for batch processing. Given an input list or generator,</p>\n\n<pre><code>x_in = [1, 2, 3, 4, 5, 6 ...]\n</code></pre>\n\n<p>I want a function that will return chunks of that input. Say, if <code>chunk_size=4</code>, then,</p>\n\n<pre><code>x_chunked = [[1, 2, 3, 4], [5, 6, ...], ...]\n</code></pre>\n\n<p>This is something I do over and over, and was wondering if there is a more standard way than writing it myself. Am I missing something in <code>itertools</code>? (One could solve the problem with <code>enumerate</code> and <code>groupby</code>, but that feels clunky.) In case anyone wants to see an implementation, here it is,</p>\n\n<pre><code>def chunk_input_stream(input_stream, chunk_size):\n    \"\"\"partition a generator in a streaming fashion\"\"\"\n    assert chunk_size &gt;= 1\n    accumulator = []\n    for x in input_stream:\n        accumulator.append(x)\n        if len(accumulator) == chunk_size:\n            yield accumulator\n            accumulator = []\n    if accumulator:\n        yield accumulator\n</code></pre>\n\n<h2>Edit</h2>\n\n<p>Inspired by kreativitea's answer, here's a solution with <code>islice</code>, which is straightforward &amp; doesn't require post-filtering,</p>\n\n<pre><code>from itertools import islice\n\ndef chunk_input_stream(input_stream, chunk_size):\n    while True:\n        chunk = list(islice(input_stream, chunk_size))\n        if chunk:\n            yield chunk\n        else:\n            return\n\n# test it with list(chunk_input_stream(iter([1, 2, 3, 4]), 3))\n</code></pre>\n"},{"tags":["python","pip"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":63,"score":1,"question_id":10805324,"title":"How to see the log or results from PIP","body":"<p>Using python PIP (pypi) in Windows 7, how can I keep the pop up window open to see the results of the install (especially if there was an issue)? Or Is there a log that I can review?</p>\n\n<p>Ex:\npip install selenium2Library</p>\n"},{"tags":["python"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":257,"score":2,"question_id":10885708,"title":"Write a python script that goes through the links on a page recursively","body":"<p>I'm doing a project for my school in which I would like to compare scam mails. I found this website: <a href=\"http://www.419scam.org/emails/\" rel=\"nofollow\">http://www.419scam.org/emails/</a>\nNow what I would like to do is to save every scam in apart documents then later on I can analyse them.\nHere is my code so far:</p>\n\n<pre><code>import BeautifulSoup, urllib2\n\naddress='http://www.419scam.org/emails/'\nhtml = urllib2.urlopen(address).read()\nf = open('test.txt', 'wb')\nf.write(html)\nf.close()\n</code></pre>\n\n<p>This saves me the whole html file in a text format, now I would like to strip the file and save the content of the html links to the scams:</p>\n\n<pre><code>&lt;a href=\"2011-12/01/index.htm\"&gt;01&lt;/a&gt; \n&lt;a href=\"2011-12/02/index.htm\"&gt;02&lt;/a&gt; \n&lt;a href=\"2011-12/03/index.htm\"&gt;03&lt;/a&gt;\n</code></pre>\n\n<p>etc.</p>\n\n<p>If i get that, I would still need to go a step further and open save another href. Any idea how do I do it in one python code?</p>\n\n<p>Thank you!</p>\n"},{"tags":["python","python-3.x"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":59,"score":-3,"question_id":13241326,"title":"Equal elements in two lists","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/8866652/determine-if-2-lists-have-the-same-elements-regardless-of-order\">Determine if 2 lists have the same elements, regardless of order?</a><br>\n  <a href=\"http://stackoverflow.com/questions/11140297/match-two-lists-of-letters-in-python\">Match two lists of letters in Python</a>  </p>\n</blockquote>\n\n\n\n<p>I have list <code>a</code> and list <code>b</code>. So I need to find, if lists have equal elements. I have no idea, but I am thinking about using <code>collections</code>.</p>\n"},{"tags":["python","google","google-api","google-bigquery"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13212991,"title":"How to query BigQuery programmatically from Python without end-user interaction?","body":"<p>This question seems like it should be so simple to answer, but after days of research and several dead ends, I can't seem to get query results out of <code>BigQuery</code> without it insisting on user-based OAuth. Has anyone had any luck with this? I am not using <code>Google AppEngine</code> for my app, it is hosted in <code>EC2</code>.  Here is the exact situation:</p>\n\n<pre><code>User wants reporting data --&gt;\nWeb server makes queries to BigQuery --&gt;\nData is transformed for use in WebApp and returned to User.\n</code></pre>\n\n<p>Whenever I follow the Google examples, I end up getting a web browser popping up asking for me to select a Google account to use for authentication.</p>\n\n<p>I would appreciate any help.</p>\n\n<p>Thanks!</p>\n"},{"tags":["c#","python","methods","arguments","ironpython"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":40,"score":2,"question_id":13231913,"title":"How do I call a specific Method from a Python Script in C#?","body":"<p>I'm wondering if there is a possibility to call a specific Method from a Python script over a C# project.</p>\n\n<p>I have no code... but my idea is:</p>\n\n<p>Python Code:</p>\n\n<pre><code>def SetHostInfos(Host,IP,Password):\n   Work to do...\n\ndef CalcAdd(Numb1,Numb2):\n   Work to do...\n</code></pre>\n\n<p>C# Code:</p>\n\n<pre><code>SetHostInfos(\"test\",\"0.0.0.0\",\"PWD\")\nresult = CalcAdd(12,13)\n</code></pre>\n\n<p>How can I call one of the Methods, from this Python script, over C#?</p>\n"},{"tags":[".net","python"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":335,"score":3,"question_id":6333044,"title":"Using C# Assemblies from Python via pythonnet","body":"<p>I am using Windows 7, 64-bit. I have managed to download and install pythonnet, so</p>\n\n<pre><code>import clr\nclr.AddReference(\"System.Windows.Forms\")\nfrom System.Windows.Forms import Form\n</code></pre>\n\n<p>works fine. I have also downloaded and compiled/run a C# application which creates lots of assemblies. The application in question is ARDrone-Control-.NET.</p>\n\n<p>How can I use the generated DLL files from Python (and not just the built-in C# classes).</p>\n\n<p>Since I have never used C# (which is why I want to use the library from Python), I'd be happy to clarify the question.</p>\n"},{"tags":["python","pdf","typography","pypdf"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":46,"score":0,"question_id":13236370,"title":"PDF bleed detection","body":"<p>I'm currently writing a little tool (Python + pyPdf) to test PDFs for printer conformity.</p>\n\n<p>Alas I already get confused at the first task: Detecting if the PDF has at least 3mm 'bleed' (border around the pages where nothing is printed). I already got that I can't detect the bleed for the complete document, since there doesn't seem to be a global one. On the pages however I can detect a total of five different boxes:</p>\n\n<ul>\n<li><code>mediaBox</code></li>\n<li><code>bleedBox</code></li>\n<li><code>trimBox</code></li>\n<li><code>cropBox</code></li>\n<li><code>artBox</code></li>\n</ul>\n\n<p>I read the <a href=\"http://pybrary.net/pyPdf/pythondoc-pyPdf.pdf.html#pyPdf.pdf.PageObject-class\" rel=\"nofollow\">pyPdf documentation</a> concerning those boxes, but the only one I understood is the <code>mediaBox</code> which seems to represent the overall page size (i.e. the paper).</p>\n\n<p>The <code>bleedBox</code> pretty obviously <em>ought</em> to define the bleed, but that doesn't always seem to be the case.</p>\n\n<p>Another thing I noted was that for instance with the <a href=\"http://www.cs.cmu.edu/~rwh/theses/okasaki.pdf\" rel=\"nofollow\">PDF</a>, all those boxes have the exact same size (implying no bleed at all) on each page, but when I open it there's a huge amount of bleed; This leads me to think that the individual text elements have their own offset.</p>\n\n<p>So, obviously, just calculating the bleed from <code>mediaBox</code> and <code>bleedBox</code> is not a viable option.</p>\n\n<p><strong>I would be more than delighted if anyone could shed some light on what those boxes actually are and what I can conclude from that (e.g. is one box always smaller than another one).</strong></p>\n\n<p>Bonus question: Can someone tell me what exactly the <em>\"default user space unit\"</em> mentioned in the <a href=\"http://pybrary.net/pyPdf/pythondoc-pyPdf.pdf.html#pyPdf.pdf.PageObject-class\" rel=\"nofollow\">documentation</a>? I'm pretty sure this refers to <code>mm</code> on my machine, but I'd like to enforce <code>mm</code> everywhere.</p>\n"},{"tags":["python","http"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":33,"score":-3,"question_id":13241338,"title":"How to use python SimpleHTTPServer to connect to computer outside network?","body":"<p>How do you use python SimpleHTTPServer to connect to a computer outside network?</p>\n\n<p>I have two servers. I want to run SimpleHTTPServer on one server and connect to it from another server and access the files there.</p>\n"},{"tags":["python","selenium","webdriver","selenium-webdriver"],"answer_count":3,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":77,"score":1,"question_id":12992861,"title":"selenium not finding the element","body":"<p>I am trying to select a textbox and enter text in it through selenium web driver. The html is as follows:</p>\n\n<pre><code>&lt;/div&gt;&lt;div&gt;\n    &lt;input name=\"mLayout$ctl00$ctl00$6$16$ctl00$Database\" type=\"text\" value=\"Enter database name\" maxlength=\"175\" size=\"26\" id=\"mLayout_ctl00_ctl00_6_16_ctl00_Database\" accesskey=\"s\" title=\"Go search this database\" class=\"InputContent GhostText\" onfocus=\"SearchBoxOnFocus(&amp;#39;mLayout_ctl00_ctl00_6_16_ctl00_Database&amp;#39;);\" onkeypress=\"if(!__TextBoxOnKeyPress(&amp;#39;mLayout$ctl00$ctl00$6$16$ctl00$GoButton&amp;#39;,event.which)) { return false; }\" /&gt;&amp;nbsp;&lt;input type=\"image\" name=\"mLayout$ctl00$ctl00$6$16$ctl00$GoButton\" id=\"mLayout_ctl00_ctl00_6_16_ctl00_GoButton\" title=\"Go search database\" src=\"http://images-statcont.westlaw.com/images/go_v602.gif\" alt=\"Go search database\" align=\"absmiddle\" onclick=\"javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&amp;quot;mLayout$ctl00$ctl00$6$16$ctl00$GoButton&amp;quot;, &amp;quot;&amp;quot;, true, &amp;quot;&amp;quot;, &amp;quot;&amp;quot;, false, false))\" style=\"height:18px;width:21px;border-width:0px;\" /&gt;\n&lt;/div&gt;&lt;div&gt;\n</code></pre>\n\n<p>I've tried the following </p>\n\n<pre><code>driver.find_element_by_id(\"mLayout_ctl00_ctl00_6_16_ctl00_Database\")\ndriver.find_element_by_name(\"mLayout$ctl00$ctl00$6$16$ctl00$Database\")\ndbElement = WebDriverWait(driver, 20).until(lambda x : x.find_element_by_id(\"mLayout_ctl00_ctl00_6_16_ctl00_Database\"))\n</code></pre>\n\n<p>Is there something special about the $ and _ characters is the fields? Why can't selenium locate these elements?</p>\n"},{"tags":["python","django","mod-wsgi","tornado"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":28,"score":1,"question_id":13238780,"title":"concurrent connections in tornado","body":"<p>I have a server running on tornado. I have a page that opens a <code>websocket</code> to the same server. Now I have observed that opening multiple instances of this page makes all of them wait except one. Only after that one has finished its websocket, does another one start. Is this normal tornado behaviour of I'm doing something wrong? </p>\n\n<p>Earlier my server was running with <code>django</code> but I migrated to <code>tornado</code> for the websocket support. For that I use fallback server as django. </p>\n\n<pre><code>#!/usr/bin/env python\n\n# Run this with\n# PYTHONPATH=. DJANGO_SETTINGS_MODULE=testsite.settings testsite/tornado_main.py\n# Serves by default at\n# http://localhost:8080/hello-tornado and\n# http://localhost:8080/hello-django\n\nfrom tornado.options import options, define, parse_command_line\nimport django.core.handlers.wsgi\nimport tornado.httpserver\nimport tornado.ioloop\nimport tornado.web\nimport tornado.wsgi\n\ndefine('port', type=int, default=8000)\n\nclass HelloHandler(tornado.web.RequestHandler):\n  def get(self):\n    self.write('Hello from tornado')\n\ndef main():\n  wsgi_app = tornado.wsgi.WSGIContainer(\n    django.core.handlers.wsgi.WSGIHandler())\n  tornado_app = tornado.web.Application(\n    [\n      ('/hello-tornado', HelloHandler),\n      ('.*', tornado.web.FallbackHandler, dict(fallback=wsgi_app)),\n      ])\n  server = tornado.httpserver.HTTPServer(tornado_app)\n  server.listen(options.port)\n  tornado.ioloop.IOLoop.instance().start()\n\nif __name__ == '__main__':\n  main()\n</code></pre>\n\n<p>Can I do something that can allow me to make multiple connections?</p>\n"},{"tags":["python","virtualenv"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":28,"score":2,"question_id":13239578,"title":"virtualenv --system-site-packages not using system site packages","body":"<p>I am under the impression that using the --system-site-packages flag with virtualenv will allow the virtual environment to use the already installed system packages. However I am finding that this is not the case. I am using a custom compiled version of python. You can see the problem in the steps below.</p>\n\n<pre><code>[user@machine django]$ which python\n/app/python/bin/python\n[user@machine django]$ which pip\n/app/python/bin/pip\n[user@machine django]$ which virtualenv\n/app/python/bin/virtualenv\n[user@machine django]$ python\nPython 2.7.3 (default, Jul 27 2012, 11:30:41)\n[GCC 4.1.2 20080704 (Red Hat 4.1.2-50)] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import django\n&gt;&gt;&gt; exit()\n[user@machine django]$ pip freeze\nDjango==1.4.2\ndistribute==0.6.30\nmercurial==2.3.2\npython-ldap==2.4.10\nvirtualenv==1.8.2\nwsgiref==0.1.2\n[user@machine django]$ pip --version\npip 1.2.1 from /app/python/lib/python2.7/site-packages (python 2.7)\n[user@machine django]$ env\n&lt;snip&gt;\nLD_LIBRARY_PATH=/app/python/lib:/app/openldap/lib:/app/instantclient_11_2\nPATH=/app/python/bin:/app/openldap/bin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/bin/cfdelivered:/home/user/bin:/app/oracle/product/java/jdk1.6.0_30/bin\nPYTHONPATH=/app/python/lib/python2.7\n[user@machine django]$ virtualenv --system-site-packages --distribute --python /app/python/bin/python2.7 foo\nRunning virtualenv with interpreter /app/python/bin/python2.7\nNew python executable in foo/bin/python2.7\nAlso creating executable in foo/bin/python\nInstalling distribute...&lt;snip&gt;...done.\nInstalling pip................done.\n[user@machine django]$ . foo/bin/activate\n(foo)[user@machine django]$ which python\n/app/xxx/django/foo/bin/python\n(foo)[user@machine django]$ which pip\n/app/xxx/django/foo/bin/pip\n(foo)[user@machine django]$ env\n&lt;snip&gt;\nLD_LIBRARY_PATH=/app/python/lib:/app/openldap/lib:/app/instantclient_11_2\nVIRTUAL_ENV=/app/xxx/django/foo\nPATH=/app/xxx/django/foo/bin:/app/python/bin:/app/openldap/bin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/bin/cfdelivered:/home/user/bin:/app/oracle/product/java/jdk1.6.0_30/bin\nPYTHONPATH=/app/python/lib/python2.7\n(foo)[user@machine django]$ python\nPython 2.7.3 (default, Jul 27 2012, 11:30:41)\n[GCC 4.1.2 20080704 (Red Hat 4.1.2-50)] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import django\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: No module named django\n&gt;&gt;&gt;\n</code></pre>\n\n<p>Results of python2.7 -c \"import sys;print(sys.path)\"</p>\n\n<p>Normal: </p>\n\n<pre><code>[user@machine django]$ python2.7 -c \"import sys;print(sys.path)\" ['', '/app/python/lib/python2.7/site-packages/cx_Oracle-5.1.2-py2.7-linux-x86_64.egg'‌​, '/app/python/lib/python2.7/site-packages/python_ldap-2.4.10-py2.7-linux-x86_64.e‌​gg', '/app/python/lib/python2.7', '/app/python/lib/python27.zip', '/app/python/lib/python2.7/plat-linux2', '/app/python/lib/python2.7/lib-tk', '/app/python/lib/python2.7/lib-old', '/app/python/lib/python2.7/lib-dynload', '/app/python/lib/python2.7/site-packages']\n</code></pre>\n\n<p>Inside venv: </p>\n\n<pre><code>(foo)[user@machine django]$ python2.7 -c \"import sys;print(sys.path)\" ['', '/app/xxx/django/foo/lib/python2.7/site-packages/distribute-0.6.28-py2.7.egg', '/app/xxx/django/foo/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg', '/app/python/lib/python2.7', '/app/xxx/django/foo/lib/python27.zip', '/app/xxx/django/foo/lib/python2.7', '/app/xxx/django/foo/lib/python2.7/plat-linux2', '/app/xxx/django/foo/lib/python2.7/lib-tk', '/app/xxx/django/foo/lib/python2.7/lib-old', '/app/xxx/django/foo/lib/python2.7/lib-dynload', '/app/xxx/django/foo/lib/python2.7/site-packages']\n</code></pre>\n"},{"tags":["python","image-processing","numpy","pil","template-matching"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13240176,"title":"Template Matching (Image Search) function in Python Imaging Library","body":"<p>I had a problem where I need to search for a pattern (present as a numpy ndarray) within another image (also present as a numpy ndarray) and compute a template match (minimum difference position in the image). My question is... is there any in-built image that I can possibly use in the Python Imaging Library or Numpy or anything possible that can do this without me manually writing a function to do so???</p>\n\n<p>Thank you....</p>\n"},{"tags":["python","qt","pyqt","pyside","pyqtgraph"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13240066,"title":"Graph (pyqtgraph) is not getting plotted inside QML generated window","body":"<p>I am trying to plot a graph inside a qml generated window. Since i need to use QML for GUI ( client requirement). I manage to get the graph window inside QML, but its plotting nothing. I dont know my code is correct or not, please suggest, point me in the right direction.</p>\n\n<p>main.py:</p>\n\n<pre><code>#! /usr/bin/python\n\nimport os\nimport sys\nfrom PySide import QtGui \nfrom PySide import QtCore\nfrom PySide import QtDeclarative\nimport numpy as np\nimport pyqtgraph as pg\n\nclass Graph (QtDeclarative.QDeclarativeItem):\n    def __init__(self, parent = None):\n        QtDeclarative.QDeclarativeItem.__init__(self, parent)\n\n        #----------- self.setFlag(QtGui.QGraphicsItem.ItemHasNoContents, False )\n\n\n        self.dataPlot = np.cos(np.linspace(0, 5 *np.pi , 1000))\n\n        self.graph = pg.PlotItem()\n        self.graph.plot( self.dataPlot, pen=(0,255,0))\n        self.graph.showGrid(x=True, y=True)\n\n\n        self.view = pg.GraphicsView()\n        self.view.setCentralItem(self.graph)\n        #-------------------------------------- self.setCentralWidget(self.view)\n\n        mProxy = QtGui.QGraphicsProxyWidget(self)\n        mProxy.setWidget(self.view)\n\n\nif __name__ == '__main__':    \n    app = QtGui.QApplication(sys.argv)\n\n    QtDeclarative.qmlRegisterType(Graph, 'myPyQtGraph', 1, 0, 'PyQtGraph')\n\n    view = QtDeclarative.QDeclarativeView()    \n    view.setSource(QtCore.QUrl('main.qml'))\n    view.setResizeMode(QtDeclarative.QDeclarativeView.SizeRootObjectToView)\n\n    rootObject = view.rootObject() \n    view.connect(view.engine() , QtCore.SIGNAL('quit()') ,app.instance( ) , QtCore.SLOT('quit()') )\n\n    view.show()    \n    sys.exit(app.exec_())\n</code></pre>\n\n<p>main.qml:</p>\n\n<pre><code>import QtQuick 1.1\nimport myPyQtGraph 1.0\n\nRectangle {\n    id : page\n    width: 900\n    height: 400\n    color:  \"#343434\"\n\n    PyQtGraph {\n        id: angleGraphID\n        anchors{\n            top: parent.top\n            left: parent.left\n            topMargin: 50\n            leftMargin: 50\n        }\n        width: 800\n        height: 300\n        //color: \"#f5deb3\"\n    }\n\n    Text {\n        id: text_Heading\n        anchors{\n            top: parent.top\n            left: parent.left\n            topMargin: 20\n            leftMargin: 50\n        }\n        text: qsTr(\"PyqtGraph QML Test\")\n        font.pixelSize: 12\n    }\n}\n</code></pre>\n\n<p>this is what i am getting right now:\n<img src=\"http://i.stack.imgur.com/xDqoi.png\" alt=\"enter image description here\"></p>\n"},{"tags":["python","graph","matplotlib"],"answer_count":1,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":56,"score":1,"question_id":13237854,"title":"python - matplotlib - Create a multiline graph with results summary underneath","body":"<p>I am working on developing automation in python for multi-line graphs.\nBelow is an example of what I would create manually in excel.</p>\n\n<p><img src=\"http://i.stack.imgur.com/HxcdK.png\" alt=\"Example Chart\"></p>\n\n<p>My current code is as follows:</p>\n\n<pre><code>    plt = pyplot\n    plt.plot(channel_list, udp_dl_values, label=\"UDP DL\")\n    plt.plot(channel_list, tcp_dl_values, label=\"TCP DL\")\n    plt.plot(channel_list, udp_ul_values, label=\"UDP UL\")\n    plt.plot(channel_list, tcp_ul_values, label=\"TCP UL\")\n    plt.grid()\n</code></pre>\n\n<p>Was wondering if I could create the above using scripts?</p>\n\n<p>Thanks,</p>\n\n<p>Parth</p>\n"},{"tags":["python","raspberry-pi","gpsd"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13240966,"title":"Run bash command in python script for X seconds","body":"<p>I have a gps hooked up to my raspberry pi and am trying to use it to geotag photos from an incoming camera. By issuing the command \"gpsd -nND2 /dev/ttyUSB0,\" I can get bash echo outputs of continuous gps data that can later be parsed. I only need to average 10 data points or so (collected over 10 seconds), however, and want to close gpsd down after that.</p>\n\n<p>My general timelapse program is written in python, so this is what I have so far:</p>\n\n<pre><code>(stdout, stderr) = Popen([\"gpsd\",\"-nND2,\"/dev/ttyUSB0\"], stdout=PIPE).communicate()\n</code></pre>\n\n<p>Unfortunately, this would output to variable <em>stdout</em> an unlimited number of data points that I can't parse. The output is much like a never-ending ping routine. How can I stop the data collection to make for a reasonable/parsable data dump?</p>\n\n<p>Thank you for your help.</p>\n"},{"tags":["python","django","apache","mod-wsgi"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13236766,"title":"Django mod-wsgi multiple instances of One Class object","body":"<p>I am currently using a DJango - apache installation (on mod_wsgi) to run a website (project) which hosts an intranet cards game, whose rules are complicated enogh that it requires only 1 master list+dict data structure of scores for each user. Individual user's score can be impacted by other users actions also. I am using a Score class which I instantiate in urls.py and all players / users access this class' object [scObj = Scorer('Spades') ]. internally in this obj there are Dicts of players actions, score updates etc etc. </p>\n\n<pre><code>    class Scorer:\n        def __init__(self, suitname):\n            self.__suitname = suitname\n</code></pre>\n\n<p>The scorer class is separately stored in Scorer.py </p>\n\n<pre><code>    scObjs = (Scorer('Spades'), Scorer('Hearts'), Scorer('Clubs'), Scorer('Diamonds'),)\n</code></pre>\n\n<p>The objects are created in urls.py</p>\n\n<p>This model was running perfectly in the DEV deployement. When I moved to PROD in apache, this broke (as in there are multiple instances of scObj being created, so a score update from player-1's move on player-2 is not reflected in a different move by player-3 on player-2) . I need to simulate a singleton class behaviour / global scObj behaviour, which I am not able to do. I am running apache in worker - mpm - multithreaded mode, so I assume that the problem of multiple copies of scObj being there due to multi-process is not there.</p>\n\n<p>Is the problem related to mod_wsgi?</p>\n"},{"tags":["python","twisted","instance"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":48,"score":2,"question_id":13239244,"title":"how to kill twisted protocol instances python","body":"<p>I have a server application written in python using twisted and I'd like to know how to kill instances of my protocol (bottalk).  Everytime I get a new client connection, I see the instance in memory (print Factory.clients) .. but let's say I want to kill one of those instances from the server side (drop a specific client connection)?  Is this possible?  I've tried looking for a phrase using lineReceived, then if it matches, self.transport.loseConnection().  But that doesn't seem to reference the instance anymore or something..  </p>\n\n<pre><code>class bottalk(LineReceiver):\n\n    from os import linesep as delimiter\n\n    def connectionMade(self):\n            Factory.clients.append(self)\n            print Factory.clients\n\n    def lineReceived(self, line):\n            for bots in Factory.clients[1:]:\n                    bots.message(line)\n            if line == \"killme\":\n                    self.transport.loseConnection()\n\n    def message(self, message):\n            self.transport.write(message + '\\n')\n\nclass botfactory(Factory):\n\n    def buildProtocol(self, addr):\n            return bottalk()\n\nFactory.clients = []\n\nstdio.StandardIO(bottalk())\n\nreactor.listenTCP(8123, botfactory())\n\nreactor.run()\n</code></pre>\n"},{"tags":["python","computational-geometry"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":55,"score":2,"question_id":13240615,"title":"Width of an arbitrary polygon","body":"<p>I need a way to characterize the size of sets of 2-D points, so I can determine whether to render them as individual points in a space or as representative polygons, dependent on the scale of the viewport.  I already have an algorithm to calculate the convex hull of the set to produce the representative polygon, but I need a way to characterize its size.  One obvious measure is the maximum distance between points on the convex whole, which is the diameter of the set.  But I'm really more interested in the size of its cross-section perpendicular to its diameter, to figure out how narrow the bounding polygon is.  Is there a simple way to do this, given the sorted list of vertices and and the indices of the furthest points (ideally in Python)?</p>\n\n<p>Or alternatively, is there an easy way to calculate the radii of the minimal area bounding ellipse of a set of points?  I have seen some approaches to this problem, but nothing that I can readily convert to Python, so I'm really looking for something that's turnkey.</p>\n"},{"tags":["python","django","api","models"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13240991,"title":"Query Set for Models Retrieved from External API","body":"<p>I am currently developing a web app that uses the Amazon Product API to get information on books. I use a Book model that contains only the ASIN amazon identification code that looks a bit like this:</p>\n\n<pre><code>class Book(models.Model):\n    asin = models.CharField(max_length-10, unique=True)\n    def retrieve(self, **kwargs):\n        kwargs['ItemId'] = self.asin\n        self.xml = amazon_lookup(**kwargs) # returns BeautifulSoup\n    @property\n    def title(self):\n        try:\n            return self.xml.ItemAttriibutes.Author.text\n        except AttributeError: # happens when xml has not been populated\n            return None\n    ...\n\n\nclass BookManager(models.Manager):\n    def retrieve(self, **kwargs):\n        kwargs['SearchIndex'] = 'Books'\n        book_search = amazon_search(**kwargs)\n        books = []\n        for item in book_search:\n            book = self.get_or_create(asin=item.ASIN.text)[0]\n            book.xml = item\n            books.append(book)\n        return books\n</code></pre>\n\n<p>And then I can call it with</p>\n\n<pre><code>b = Book.objects.retrieve(Keywords=\"foo bar\")\nb.retrieve(ResponseGroup=\"Images,ItemAttributes,...\")\nt = b.title\n</code></pre>\n\n<p><strong>This works well enough for tests, but I want a more robust system for future use.</strong></p>\n\n<p>What I'd really like to do is be able to perform searches with query sets so that frequently accessed results can be cached. As it stands, every request for a book detail view creates a new amazon API call.  My job would be a lot easier if all the API calls were handled inside Query Sets alongside database calls.  Unfortunately, I've found the Django Query Set documentation pretty cryptic and lacking when it comes to customization.  This surely isn't a rare use case.  </p>\n\n<p><strong>Can anyone provide the idiomatic way of handling a problem like this, or a good resource on the subject?</strong></p>\n"},{"tags":["python","beautifulsoup"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13240700,"title":"python/beautifulsoup to find all <a href> with specific anchor text","body":"<p>I am trying to use beautiful soup to parse html and find all href with a specific anchor tag</p>\n\n<pre><code>&lt;a href=\"http://example.com\"&gt;TEXT&lt;/a&gt;\n&lt;a href=\"http://example.com/link\"&gt;TEXT&lt;/a&gt;\n&lt;a href=\"http://example.com/page\"&gt;TEXT&lt;/a&gt;\n</code></pre>\n\n<p>all the links I am looking for have the exact same anchor text, in this case TEXT. I am NOT looking for the word TEXT, I want to use the word TEXT to find all the different HREF</p>\n\n<p>edit:</p>\n\n<p>for clarification looking for something similar to using the class to parse for the links</p>\n\n<pre><code>&lt;a href=\"http://example.com\" class=\"visible\"&gt;TEXT&lt;/a&gt;\n&lt;a href=\"http://example.com/link\" class=\"visible\"&gt;TEXT&lt;/a&gt;\n&lt;a href=\"http://example.com/page\" class=\"visible\"&gt;TEXT&lt;/a&gt;\n</code></pre>\n\n<p>and then using</p>\n\n<pre><code>findAll('a', 'visible')\n</code></pre>\n\n<p>except the HTML I am parsing doesn't have a class but always the same anchor text</p>\n"},{"tags":["python","apache","mod-wsgi"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":42,"score":3,"question_id":13238404,"title":"Importing python modules with mod_wsgi","body":"<p>We are trying to get out wsgi application working on mod_wsgi.  We have run it before using <code>wsgiref.simple_server</code>, as a debugging environment.  Now, we want to move it over to using Apache httpd to integrate with loading static files under the same port, and to provide an environment more suitable for production.</p>\n\n<p>The httpd.conf file we have set up looks like this:</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n\n    DocumentRoot /var/www/\n\n    ErrorLog /var/www/log/error_log\n\n    LogLevel debug\n\n    WSGIScriptAlias /app /var/www/python/resource/rest.py\n\n    &lt;Directory /var/www/python/&gt;\n            Order allow,deny\n            Allow from all\n    &lt;/Directory&gt;\n\n    &lt;Directory /&gt;\n            Order allow,deny\n            Allow from all\n\n            RewriteEngine On\n            # Some rewrites go here\n\n    &lt;/Directory&gt;\n\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>With this setup, we can access the main application file, rest.py (under <code>http://myhost/app</code>), but any imports to modules (like <code>from module1 import function</code> where module1 is under the same directory as rest.py) are failing with an <code>ImportError</code>.</p>\n\n<p>I suspect this has to do with having to set some sort of environment variable, but I have added <code>/var/www/python</code> to <code>sys.path</code> on the main application method and it doesn't work.  Any help or pointers with this would be really appreciated.</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","pandas"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":57,"score":3,"question_id":13239297,"title":"Python Pandas -- Random sampling of time series","body":"<p>New to Pandas, looking for the most efficient way to do this.</p>\n\n<p>I have a Series of DataFrames.  Each DataFrame has the same columns but different indexes, and they are indexed by date.  The Series is indexed by ticker symbol.  So each item in the Sequence represents a single time series of each individual stock's performance.</p>\n\n<p>I need to randomly generate a list of n data frames, where each dataframe is a subset of some random assortment of the available stocks' histories.  It's ok if there is overlap, so long as start end end dates are different.</p>\n\n<p>This following code does it, but it's really slow, and I'm wondering if there's a better way to go about it:</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def random_sample(data=None, timesteps=100, batch_size=100, subset='train'):\n    if type(data) != pd.Series:\n        return None\n\n    if subset=='validate':\n        offset = 0\n    elif subset=='test':\n        offset = 200\n    elif subset=='train':\n        offset = 400\n\n    tickers = np.random.randint(0, len(data), size=len(data))\n\n    ret_data = []\n    while len(ret_data) != batch_size:\n        for t in tickers:\n            data_t = data[t]\n            max_len = len(data_t)-timesteps-1\n            if len(ret_data)==batch_size: break\n            if max_len-offset &lt; 0: continue\n\n            index = np.random.randint(offset, max_len)\n            d = data_t[index:index+timesteps]\n            if len(d)==timesteps: ret_data.append(d)\n\n    return ret_data\n</code></pre>\n\n<p><strong>Profile output:</strong></p>\n\n<pre><code>Timer unit: 1e-06 s\n\nFile: finance.py\nFunction: random_sample at line 137\nTotal time: 0.016142 s\n\nLine #      Hits         Time  Per Hit   % Time  Line Contents\n==============================================================\n   137                                           @profile\n   138                                           def random_sample(data=None, timesteps=100, batch_size=100, subset='train'):\n   139         1            5      5.0      0.0      if type(data) != pd.Series:\n   140                                                   return None\n   141\n   142         1            1      1.0      0.0      if subset=='validate':\n   143                                                   offset = 0\n   144         1            1      1.0      0.0      elif subset=='test':\n   145                                                   offset = 200\n   146         1            0      0.0      0.0      elif subset=='train':\n   147         1            1      1.0      0.0          offset = 400\n   148\n   149         1         1835   1835.0     11.4      tickers = np.random.randint(0, len(data), size=len(data))\n   150\n   151         1            2      2.0      0.0      ret_data = []\n   152         2            3      1.5      0.0      while len(ret_data) != batch_size:\n   153       116          148      1.3      0.9          for t in tickers:\n   154       116         2497     21.5     15.5              data_t = data[t]\n   155       116          317      2.7      2.0              max_len = len(data_t)-timesteps-1\n   156       116           80      0.7      0.5              if len(ret_data)==batch_size: break\n   157       115           69      0.6      0.4              if max_len-offset &lt; 0: continue\n   158\n   159       100          101      1.0      0.6              index = np.random.randint(offset, max_len)\n   160       100        10840    108.4     67.2              d = data_t[index:index+timesteps]\n   161       100          241      2.4      1.5              if len(d)==timesteps: ret_data.append(d)\n   162\n   163         1            1      1.0      0.0      return ret_data\n</code></pre>\n"},{"tags":["python"],"answer_count":4,"favorite_count":2,"up_vote_count":10,"down_vote_count":0,"view_count":5171,"score":10,"question_id":4152963,"title":"Get the name of current script with Python","body":"<p>I'm trying to get the name of the Python script that is currently running.</p>\n\n<p>For example, I have a script called <code>foo.py</code> and I would like to do something like this inside it:</p>\n\n<pre><code>print Scriptname\n</code></pre>\n\n<p>and get: <code>foo.py</code>.</p>\n"},{"tags":["python","database","postgresql"],"answer_count":3,"favorite_count":3,"up_vote_count":10,"down_vote_count":0,"view_count":4128,"score":10,"question_id":1219326,"title":"How do I do database transactions with psycopg2/python db api?","body":"<p>Im fiddling with psycopg2 , and while there's a .commit() and .rollback() there's no .begin() or similar to start a transaction , or so it seems ?\nI'd expect to be able to do </p>\n\n<pre><code>db.begin() # possible even set the isolation level here\ncurs = db.cursor()\ncursor.execute('select etc... for update')\n...\ncursor.execute('update ... etc.')\ndb.commit();\n</code></pre>\n\n<p>So, how do transactions work with psycopg2 ? \nHow would I set/change the isolation level ?</p>\n"},{"tags":["python","linux","ms-word","rtf"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":43,"score":3,"question_id":13202944,"title":"Number of pages in a doc, docx or rtf file using python","body":"<p>I would like to count the number of pages in a RTF or MS Word document, using python. Is this possible?</p>\n"},{"tags":["python","bug"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":979,"score":-4,"question_id":13217084,"title":"Try to Fix bug using python","body":"<p>word wrapping function using recursion in Python</p>\n"},{"tags":["python","word","wrapping"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":282,"score":-4,"question_id":13199201,"title":"Writing word wrapping function using recursion in Python?","body":"<p>word wrapping function using recursion in Python</p>\n"},{"tags":["python","rest","web-applications"],"answer_count":2,"favorite_count":1,"up_vote_count":6,"down_vote_count":0,"view_count":65,"score":6,"question_id":13238930,"title":"Architecture solution for Python Web application","body":"<p>We're setting up a Python REST web application.  Right now, we're using WSGI, but we might do some changes to that in the future (using Twisted, for example, to improve on scalability or some other feature).  I would really like some help regarding what is considered a good architecture for a Web application in Python.</p>\n\n<p>In general our app serves dynamic content, processes a moderate to high level of data from clients, performs pretty high-demand database, network and filesystem calls and should be \"easily\" scalable (quotes here because if a solution is great but somewhat tough to configure for scalability, it would definitely be thought of as good).  We would probably like to evolve this into a highly parallel application in the mid-to-long term.  Google App Engine is <em>not</em> an accepted suggestion, mainly because of its cost.</p>\n\n<p>My question is this:</p>\n\n<ol>\n<li>Is using WSGI a good idea?  Should we be looking into something like Twisted instead?</li>\n<li>Should we use Apache as a reverse proxy for our static files?</li>\n<li>Is there some different pattern or architecture that we should consider\nthat I haven't mentioned? (Even if completely obvious).</li>\n</ol>\n\n<p>Any help at all with this would be very appreciated.  Thanks a lot!</p>\n"},{"tags":["python","multidimensional-array","numpy"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":13240117,"title":"Reverse an arbitrary dimension in an ndarray","body":"<p>I'm working with an n-dimensional array, and I'd like a way to reverse a numbered dimension. So rather than</p>\n\n<pre><code>rev = a[:,:,::-1]\n</code></pre>\n\n<p>I'd like to be able to write</p>\n\n<pre><code>rev = a.reverse(dimension=2)\n</code></pre>\n\n<p>or something similar. I can't seem to find examples that don't rely on the former syntax. </p>\n"},{"tags":["python","list"],"answer_count":6,"favorite_count":9,"up_vote_count":21,"down_vote_count":1,"view_count":11426,"score":20,"question_id":263457,"title":"Merging/adding lists in Python","body":"<p>I'm pretty sure there should be a more Pythonic way of doing this - but I can't think of one: How can I merge a two-dimensional list into a one-dimensional list? Sort of like zip/map but with more than two iterators.</p>\n\n<p>Example - I have the following list:</p>\n\n<pre><code>array = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n</code></pre>\n\n<p>I want to have</p>\n\n<pre><code>result = [12, 15, 18] # [1+4+7, 2+5+8, 3+6+9]\n</code></pre>\n\n<p>So far what I've come up with is:</p>\n\n<pre><code>def add_list(array):\n    number_items = len(array[0])\n    result = [0] * number_items\n    for index in range(number_items):\n        for line in array:\n            result[index] += line[index]\n    return result\n</code></pre>\n\n<p>But that doesn't look very elegant/Pythonic to me. Aside from not checking if all the \"lines\" in the 2D array are of the same length, can be added to each other, etc. What would be a better way to do it?</p>\n"},{"tags":["python","google-app-engine","memcached"],"answer_count":0,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":61,"score":4,"question_id":13234094,"title":"Why does calling get() on memcache increase item count in Google App Engine?","body":"<p>I'm looking at the Memcache Viewer in my admin console on my deployed Google App Engine NDB app. For testing, I'm using the remote api. I'm doing something very simple: <code>memcache.get('somekey')</code>. For some reason, everytime I call this line and hit refresh on my statistics, the item count goes up by 2. This happens whether or not the key exists in memcache.</p>\n\n<p>Any ideas why this could happen? Is this normal?</p>\n"},{"tags":["python","python-2.7"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":4,"view_count":47,"score":-3,"question_id":13239841,"title":"OverflowError exception not detected in python","body":"<p>This is my following program</p>\n\n<pre><code>try:\n    class __Euler3__:\n    n = 600851475143\n    primeFactors = []\n\n    for i in range(2,n):\n        if (n%i ==0):\n            primeFactors.append(i)\n            n = n/i\n            i = i -1 #reset i\n            print primeFactors\n\nexcept OverflowError as e:\n       print \"the error is\" , e\n</code></pre>\n\n<p>but for some reason the Overflowerror mechanism is not able to catch this exception\nI am using python 2.7</p>\n"},{"tags":["python","executable"],"answer_count":4,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":1319,"score":1,"question_id":5719111,"title":"How to make exe file from pyc file","body":"<p>I want to create the window executable file of my project  , I don't want to share the source code my project . i want to know where i started or which tool I use to create complete software . I use linux , py2exe does not run in linux,is there any other tool which is similar to py2exe?</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":8,"down_vote_count":0,"view_count":81,"score":8,"question_id":13215433,"title":"Get self.__module__ of class regardless of how imported","body":"<p>I have a library class where depending how it's imported, a method that relies on the <code>self.__module__</code> for identification changes behavior - depending on if I import it relatively or absolutely.  Is there a way to force the <code>self.__name__</code> attribute of a class to return itself absolutely?  </p>\n\n<p>I realize one solution would be to force everyone to import the subclasses in the same way, but was wondering if there was a way to force it from the library's standpoint.</p>\n\n<p><strong>Summarized Structure</strong></p>\n\n<p>I have a module in a library</p>\n\n<pre><code>project/\n    mylib/\n        foo.py\n            LibraryClass\n            def get_name(self):\n                return \"%s.%s.%s\" % \\\n                    (self.__module__, self.__class__.__name__, self.some_init_property)\n    prog/\n        utils.py\n            fooClass(LibraryClass)\n        bar.py\n            def some_func()\n               #see below\n</code></pre>\n\n<p>In <code>mylib</code>, I have an importer import all subclasses of <code>LibraryClass</code> via a the string of the classname in our django project's settings file.</p>\n\n<p>Basically, the behavior we're seeing is depending on how you import.\nSo there are two behaviors I'm observing in bar.py:</p>\n\n<pre><code>def some_func_absolute():\n    from prog.utils import fooClass\n    f = fooClass(\"lalala\")\n    print f.get_name()\n    #prints prog.utils.fooClass.lalala\n</code></pre>\n\n<p>Versus</p>\n\n<pre><code> def some_func_relative():\n    from utils import fooClass\n    f = fooClass(\"lalala\")\n    print f.get_name()\n    #prints foo.fooClass.lalala\n</code></pre>\n"},{"tags":["python","windows-7","python-2.7","hidden-files"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13240120,"title":"Check for windows hidden file in python script?","body":"<p>There are several threads for example this one <a href=\"http://stackoverflow.com/questions/7099290/how-to-ignore-hidden-files-using-os-listdir-python\">How to ignore hidden files using os.listdir()? - Python</a> which explain how to check for hidden file using posix OS. How can I do this in windows7 using python 2.7?</p>\n\n<p>I cannot use glob - which ignores hidden files. The background is I am using os.walk and not glob because I need to search a folder structure recursively. </p>\n\n<p>thanks</p>\n"},{"tags":["python","list","loops","while-loop"],"answer_count":8,"favorite_count":0,"up_vote_count":9,"down_vote_count":4,"view_count":321,"score":5,"question_id":13236159,"title":"Create List With Numbers Getting Greater Each Time Python","body":"<p>How can I make a function that will create a list, increasing the amount of numbers it contains each time to a specified value?</p>\n\n<p>For example if the max was 4, the list would contain</p>\n\n<pre><code>1, 2, 2, 3, 3, 3, 4, 4, 4, 4\n</code></pre>\n\n<p>It's difficult to explain what I'm looking for, but from the example I think you'll understand!</p>\n\n<p>Thanks</p>\n"},{"tags":["python","windows","pip"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13225707,"title":"Python packages on windows: pip or native installers?","body":"<p>What are the relative merits of installing python packages on windows using pip as opposed to using packaged installers (exe/msi)?</p>\n"},{"tags":["python","python-3.x","nonetype"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13238697,"title":"comparison with type of None variables","body":"<p>I know that comparison of types is not recommended, but I have some code that does this in an if elif series. However, I am confused as to how None values work.</p>\n\n<pre><code>def foo(object)\n    otype = type(object)\n    #if otype is None: # this doesn't work\n    if object is None: # this works fine\n        print(\"yep\")\n    elif otype is int:\n    elif ...\n</code></pre>\n\n<p>How come I can compare just fine with <code>is int</code> and so forth, but not with <code>is None</code>? types.NoneType seems to be gone in Python 3.2, so I can't use that...</p>\n\n<p>The following</p>\n\n<pre><code>i = 1\nprint(i)\nprint(type(i))\nprint(i is None)\nprint(type(i) is int)\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>1\n&lt;class 'int'&gt;\nFalse\nTrue\n</code></pre>\n\n<p>whereas </p>\n\n<pre><code>i = None\nprint(i)\nprint(type(i))\nprint(i is None)\nprint(type(i) is None)\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>None\n&lt;class 'NoneType'&gt;\nTrue\nFalse\n</code></pre>\n\n<p>I guess <code>None</code> is special, but what gives? Does <code>NoneType</code> actually exist, or is Python lying to me?</p>\n"},{"tags":["python"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":6,"view_count":56,"score":-6,"question_id":13239983,"title":"Matching Bacteria","body":"<p>The input to this problem is a list of matches for samples. Each line contains the name of the sample, the numeric match level (between 0.0 and 1.0), and the bacterial name in that order, separated by tabs.</p>\n\n<pre><code>Sample1 0.7 Staph\nSample1 0.5 Strep\nSample1 0.3 E-coli\nSample2 0.6 Strep\nSample2 0.5 E-coli\nSample2 0.4 Myco\nSample3 0.8 Strep\nSample3 0.5 Staph\nSample3 0.1 Myco\n</code></pre>\n\n<p>Write a function sample_match(filename) that prints out the sample name of the best match for each bacterial name. For the input above, sample_match should print:</p>\n\n<pre><code>E-coli 0.5 Sample2\nMyco 0.4 Sample2\nStaph 0.7 Sample1\nStrep 0.8 Sample3\n</code></pre>\n\n<p>Note that the output must be in alphabetic order by match name, with the match value to one decimal digit. \nHint: this problem is much easier to solve if you create two dictionaries. One dictionary keeps track of the top match for each bacterial site and the other keeping the sample name of that match. \nExtra Hint: You can’t sort a dictionary. You can’t sort the keys of a dictionary. But you can convert the keys to a list and then sort the list. Try k=list(dictname.keys()) and then k.sort().</p>\n"},{"tags":["python","login","passwords"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13239656,"title":"Python And 401 reponse","body":"<p>I just wanna ask how to make a connection [user+pass] with A page that give you 401 response.</p>\n\n<p>For example in php its seem like that</p>\n\n<pre><code>$ch = curl_init();\n\ncurl_setopt($ch, CURLOPT_URL, 'https://192.168.1.1/');\n\ncurl_setopt($ch, CURLOPT_USERPWD, $user.':'.$pass);\n\ncurl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);\n\ncurl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);\n\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\n\ncurl_setopt($ch, CURLOPT_TIMEOUT, 4);\n\n$result = curl_exec($ch);\n\n$returnCode = (int)curl_getinfo($ch, CURLINFO_HTTP_CODE);\n</code></pre>\n"},{"tags":["python","amazon-s3","boto"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13226940,"title":"Boto script to download latest file from s3 bucket","body":"<p>I like to write a boto python script to download the recent most file from the s3 bucket i.e. for eg I have 100 files in a s3 bucket I need to download the recent most uploaded file in it.</p>\n\n<p>Is there a way to download the recent most modified file from S3 using python boto</p>\n\n<p>THanks in advance </p>\n"},{"tags":["python","libxml2"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":25,"score":0,"question_id":13238598,"title":"How to determine if a node is a leaf node in libxml2?","body":"<p>Consider this piece of xml:</p>\n\n<pre><code>...\n&lt;DataType&gt;\n &lt;name&gt;AccountStatus&lt;/name&gt;\n &lt;description&gt;This field indicates the account status&lt;/description&gt;\n &lt;ValidValue&gt;\n  &lt;value&gt;A&lt;/value&gt;\n  &lt;description&gt;Account is Active&lt;/description&gt;\n  &lt;name&gt;ACTIVE&lt;/name&gt;\n &lt;/ValidValue&gt;\n &lt;ValidValue&gt;\n  &lt;value&gt;I&lt;/value&gt;\n  &lt;description&gt;Account is Inactive&lt;/description&gt;\n  &lt;name&gt;INACTIVE&lt;/name&gt;\n &lt;/ValidValue&gt;\n&lt;/DataType&gt;\n&lt;DataType&gt;\n &lt;name&gt;\n ...\n</code></pre>\n\n<p>I would like to know if a given node is a leaf node or not.\nFor example, \"name\", \"description\" and \"value\" are leaf nodes.\n\"ValidValue\" is not because it contains subelements.</p>\n\n<p>This is what I tried:</p>\n\n<pre><code>import libxml2\ndoc       = libxml2.parseFile(\"data_types.xml\")\nxml_query = doc.xpathNewContext()\nnode_list = xml_query.xpathEval('/path/to/DataType')\nfor node in node_list:\n    print '%s' % k.get_children()\n    print '%s' % k.isText()\n</code></pre>\n\n<p>Somehow get_children() and isText() behave weirdly. isText() returns 0 for the \"name\" node (?), and I couldn't quite figurewhat to do with the output of get_children().</p>\n\n<p>Surely I could hack something into another xpath query and figure it out, but I suspect there should be a very straight forward way to do this using <code>libxml2</code>, which is what I'm looking for.</p>\n"},{"tags":["python","list","sorting","callback"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1957,"score":1,"question_id":5213033,"title":"Sort list of list with custom compare function in Python","body":"<p>I know there are several questions named like this, but I can't seems to get their answers to work.</p>\n\n<p>I have a list of lists, 50 times 5 elements. Now I want to sort this list by applying a custom compare function to each element. This function calculates the fitness of the list by which the elements shall be sorted. I created two functions, compare and fitness:</p>\n\n<pre><code>def compare(item1, item2):\n    return (fitness(item1) &lt; fitness(item2))\n</code></pre>\n\n<p>and</p>\n\n<pre><code>def fitness(item):\n    return item[0]+item[1]+item[2]+item[3]+item[4]\n</code></pre>\n\n<p>Then I tried to call them by:</p>\n\n<pre><code>sorted(mylist, cmp=compare)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sorted(mylist, key=fitness)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sorted(mylist, cmp=compare, key=fitness)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>sorted(mylist, cmp=lambda x,y: compare(x,y))\n</code></pre>\n\n<p>Also I tried list.sort() with the same parameters. But in any case the functions don't get a list as an argument but a <code>None</code>. I have no idea why that is, coming from mostly C++ this contradicts any idea of a callback function for me. How can I sort this lists with a custom function?</p>\n\n<p><strong>Edit</strong>\nI found my mistake. In the chain that creates the original list one function didn't return anything but the return value was used. Sorry for the bother</p>\n"},{"tags":["python","pyqt"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":34,"score":-1,"question_id":13231622,"title":"How to ask if a button in a list of buttons is clicked","body":"<p>I have a list of buttons, and I don't know how to have the functionality of each button in the list.</p>\n\n<pre><code>flatButton = QtGui.QPushButton(\"Band \" + str(i))\nself.Layout1.addWidget(flatButton)\nlist.append(flatButton)\n</code></pre>\n"},{"tags":["python","dictionary"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":64,"score":0,"question_id":13239279,"title":"Is it possible to add <key, value> pair at the end of the dictionary in python","body":"<p>When I introduce new  pair it is inserted at the beginning of dictionary. Is it possible to append it at the end?</p>\n"},{"tags":["python","dependency-injection","python-3.x","mocking","stdin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13238566,"title":"Python: equivalent of input using sys.stdin","body":"<p>I want to test some (python 3) code that directly uses the <code>print</code> and <code>input</code> functions.  As I understand it, the easiest way to do this is by dependency injection: modifying the code so that it takes input and output streams as arguments, using <code>sys.stdin</code> and <code>sys.stdout</code> by default and passing in mock objects during testing.  It's obvious what to do with <code>print</code> calls:</p>\n\n<pre><code>print(text)\n#replaced with...\nprint(text, file=output_stream)\n</code></pre>\n\n<p>However, <code>input</code> doesn't have arguments for input and output streams.  Does the following code correctly reproduce its behaviour?</p>\n\n<pre><code>text = input(prompt)\n#replaced with...\nprint(prompt, file=output_stream, end='')\ntext = input_stream.readline()[:-1]\n</code></pre>\n\n<p>I had a look at the implementation of <code>input</code>, and it does quite a lot of magic, calling <code>sys.stdin.fileno</code> and examining <code>sys.stdin.encoding</code> and <code>sys.stdin.errors</code> rather than calling any of the <code>read*</code> methods - I wouldn't know where to start with mocking those.</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":82,"score":1,"question_id":13239159,"title":"Why does IDLE continue to crash?","body":"<p>Idle keeps crashing and I can't figure it out. After restarting the computer and reinstalling Python, none of which seemed to work, I looked to my peers and was told to \"install one of the Tcl/Tk\". After getting another opinion I was also told that I already had this and found it to be true but decided to try it anyway since it continued to crash. Nothing has improved and I have an assignment due.</p>\n\n<p>Any ideas on why this continues to happen and what I can do to fix the crash?</p>\n\n<hr>\n\n<p><strong>Problem details</strong>:</p>\n\n<pre><code>Process:         Python [1183]\nPath:            /Applications/Python 3.3/IDLE.app/Contents/MacOS/Python\nIdentifier:      org.python.IDLE\nVersion:         3.3.0 (3.3.0)\nCode Type:       X86-64 (Native)\nParent Process:  launchd [793]\n\nDate/Time:       2012-11-05 14:10:54.124 -0500\nOS Version:      Mac OS X 10.7.5 (11G63)\nReport Version:  9\n\nInterval Since Last Report:          181805 sec\nCrashes Since Last Report:           4\nPer-App Interval Since Last Report:  20 sec\nPer-App Crashes Since Last Report:   4\nAnonymous UUID:                      68994A08-7FFB-4074-A553-CB60A60BB412\n\nCrashed Thread:  0  Dispatch queue: com.apple.main-thread\n\nException Type:  EXC_CRASH (SIGABRT)\nException Codes: 0x0000000000000000, 0x0000000000000000\n\nApplication Specific Information:\n*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Error (1007) creating CGSWindow on line 263'\n</code></pre>\n"},{"tags":["python","switch-statement"],"answer_count":21,"favorite_count":49,"up_vote_count":102,"down_vote_count":1,"view_count":43914,"score":101,"question_id":60208,"title":"Replacements for switch statement in python?","body":"<p>I want to write a function in python that returns different fixed values based on the value of an input index.  In other languages I would use a switch or case statement, but python does not appear to have a switch statement.  What are the recommended python solutions in this scenario?</p>\n"},{"tags":["python","python-3.x"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":22,"score":1,"question_id":13239445,"title":"Get body name using email lib","body":"<p>I use email lib to parse emails like this:</p>\n\n<pre><code>f = open('path/to/email','r')\nmsg = email.message_from_file(f)\nprint msg['From']\nlmrn@mailexcite.com\n</code></pre>\n\n<p>But <code>msg</code> hasn't key Body, so what I suppose to do?</p>\n"},{"tags":["python","c"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":32,"score":2,"question_id":13238192,"title":"Global PyObject* variable in C-Python extension","body":"<p>In a C extension to my Python program, I am trying to improve performance by setting two of the inputs to the main C function (which is called millions of times) as global variables, as they don't change often, so that I don't have to keep supplying them from Python using a lambda wrapper to the C function (which wastes a nontrivial amount of time). My code looks like this. First I declare the global variables at the top of the file:</p>\n\n<pre><code>unsigned char* splitArray;\nPyObject* wordCmp;\n</code></pre>\n\n<p>Then the Python API function to set them:</p>\n\n<pre><code>static PyObject* py_set_globals(PyObject *self, PyObject *args)\n{\n    free(wordCmp);\n    free(splitArray);\n\n    char* splitChars;\n    PyObject* wordC;\n\n    if (!PyArg_ParseTuple(args, \"sO\", &amp;splitChars, &amp;wordC))\n        return NULL;\n\n    wordCmp = (PyObject*)malloc(sizeof(PyObject));\n    memcpy(wordCmp, wordC, sizeof(PyObject));\n    splitArray = splitchars_to_mapping(splitChars);\n\n    return Py_BuildValue(\"\");\n}\n</code></pre>\n\n<p>In this case, splitArray is assigned to a 128-character array which is malloc'ed in the function splitchars_to_mapping, and wordCmp is a Python function object that is passed to C. Anyway, as far as I can tell, the char* splitArray works fine as a global variable, but when I later try to call wordCmp using PyEval_CallObject, Python/C crashes. So I have two questions:</p>\n\n<ol>\n<li>Why doesn't C crash immediately when I try to free the uninitialized pointers wordCmp and splitArray at the beginning of the function?</li>\n<li>Why am I unable to call wordCmp later when I have properly stored it on the heap and saved a reference to it as a global?</li>\n</ol>\n"},{"tags":["python","traceback"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13210436,"title":"Get full traceback","body":"<p>How can i get full traceback in the following case, including the calls of <code>func2</code> and <code>func</code> functions?</p>\n\n<pre><code>import traceback\n\ndef func():\n    try:\n        raise Exception('Dummy')\n    except:\n        traceback.print_exc()\n\ndef func2():\n    func()\n\n\nfunc2()\n</code></pre>\n\n<p>When i run this, i get:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"test.py\", line 5, in func\n    raise Exception('Dummy')\nException: Dummy\n</code></pre>\n\n<p><code>traceback.format_stack()</code> is not what i want, as need <code>traceback</code> object to be passed to a third party module.</p>\n\n<p>I am particularly interested in this case:</p>\n\n<pre><code>import logging\n\n\ndef func():\n    try:\n        raise Exception('Dummy')\n    except:\n        logging.exception(\"Something awful happened!\")\n\n\ndef func2():\n    func()\n\n\nfunc2()\n</code></pre>\n\n<p>In this case i am getting:</p>\n\n<pre><code>ERROR:root:Something awful happened!\nTraceback (most recent call last):\n  File \"test.py\", line 9, in func\n    raise Exception('Dummy')\nException: Dummy\n</code></pre>\n"},{"tags":["python","selenium","webdriver","selenium-chromedriver","chromedriver"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13227346,"title":"set chrome options with remote driver","body":"<p>So there's a nice <a href=\"http://peter.sh/experiments/chromium-command-line-switches/\" rel=\"nofollow\">long list of switches</a> that can be passed to the chromedriver.</p>\n\n<p>I would like to use some of them, specifically <code>--disable-logging</code>.</p>\n\n<p>I do no want to (only) use chromedriver locally though, I'd like to write all my code to use  <code>webdriver.Remote()</code>.</p>\n\n<p>Here's the code I use to setup a chrome driver and it works great for a vanilla chrome instance.</p>\n\n<pre><code>driver = webdriver.Remote(\n    command_executor = 'http://127.0.0.1:4444/wd/hub',\n    desired_capabilities = {\n        'browserName': 'chrome',\n    }\n)\n</code></pre>\n\n<p>However I can not figure out how to pass in additional options.</p>\n\n<p>When I look at <code>driver.capabilities</code> I see the following</p>\n\n<pre><code>{\n    u'rotatable': False,\n    u'browserConnectionEnabled': False,\n    u'acceptSslCerts': False,\n    u'cssSelectorsEnabled': True,\n    u'javascriptEnabled': True,\n    u'nativeEvents': True,\n    u'databaseEnabled': False,\n    u'chrome.chromedriverVersion': u'23.0.1240.0',\n    u'locationContextEnabled': False,\n    u'takesScreenshot': True,\n    u'platform': u'MAC',\n    u'browserName': u'chrome',\n    u'webdriver.remote.sessionid': u'1352096075502',\n    u'version': u'22.0.1229.94',\n    u'applicationCacheEnabled': False,\n    u'webStorageEnabled': True,\n    u'handlesAlerts': True,\n    u'chrome.nativeEvents': False\n}\n</code></pre>\n\n<p>I don't <a href=\"http://selenium-python.readthedocs.org/en/latest/api.html\" rel=\"nofollow\">see any other arguments</a> (besides <code>desired_capabilities</code>) for passing arguments to chromedriver through <code>webdriver.Remote</code>. Is this true? Am I missing something? Is there some other strategy for customizing chromedriver?</p>\n\n<p>There's a nice example on the CromeDrive wiki page that shows <a href=\"http://code.google.com/p/selenium/wiki/ChromeDriver\" rel=\"nofollow\">\"Starting Chromium with Specific Flags\"</a> however all the example are for <code>webdriver.Chrome()</code>; the example is in java too, so it might not even work in python.</p>\n\n<p>If anyone has gotten this to work or can tell me this just will not work I'd appreciate it. Thanks.</p>\n\n<p><strong>New Problem</strong></p>\n\n<p>I'm not sure the best way to handle follow up questions.</p>\n\n<p>So, I got the answer to my question, but I'm still having trouble turning off logging. Checkout the following logger line.</p>\n\n<pre><code>[0.455][INFO]:      Launching chrome: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome --enable-logging --log-level=1 --disable-hang-monitor --disable-prompt-on-repost --dom-automation --full-memory-crash-report --no-default-browser-check --no-first-run --disable-background-networking --disable-sync --disable-translate --disable-web-resources --safebrowsing-disable-auto-update --safebrowsing-disable-download-protection --disable-client-side-phishing-detection --disable-component-update --disable-default-apps --use-mock-keychain --ignore-certificate-errors --disable-logging about:blank\n</code></pre>\n\n<p>I can pass the argument <code>--disable-logging</code> to chromedriver but all it seems to care about is the first argument enabling logging. I guess I need to find out where the default arguments are for new instances of Chrome are kept.</p>\n\n<p>Thanks for the help. I'm further then I was.</p>\n\n<p>I may have to start a new question.</p>\n"},{"tags":["python","osx","pycairo"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":19,"score":0,"question_id":13187420,"title":"pycairo install error on osx","body":"<p>While I am installing pycairo using easy_install on osx, there is an error message as following:</p>\n\n<pre><code>Searching for pycairo\nReading http://pypi.python.org/simple/pycairo/\nReading http://cairographics.org/pycairo\nBest match: pycairo 1.10.0\nDownloading http://cairographics.org/releases/pycairo-1.10.0.tar.bz2\nProcessing pycairo-1.10.0.tar.bz2\nerror: Couldn't find a setup script in /tmp/easy_install-hnheQI/pycairo-1.10.0.tar.bz2\n</code></pre>\n\n<p>Please help me out. Thanks in advance.</p>\n"},{"tags":["python","instruments","ios-ui-automation","xcode-instruments"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":66,"score":-1,"question_id":13126910,"title":"How can I run Instruments from Python?","body":"<p>Anyone know how to run Instruments from Python? I tired to use os.system and it didn't work. </p>\n\n<p>If I run Instruments from a command line, I only need to run: </p>\n\n<pre><code>instruments -w id -t xxxxxxxxxxxxxx xx.js\n</code></pre>\n\n<p>I will need to run the above in python. I suppose the following will work</p>\n\n<pre><code>import os\nos.system('instruments -w id -t xxxxx xx.js')\n</code></pre>\n\n<p>I also tried with os.system ('open -a instruments xxxxxx') </p>\n\n<p>Neither way worked. Anyone have a better idea?</p>\n\n<p>I expected it to run instruments just like running it from command line. And start to run javascritps using instruments. It didn't happen. What happened was just a 256 printed out. </p>\n"},{"tags":["python","django","multithreading","multiprocessing","multiprocess"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":18,"score":1,"question_id":13239087,"title":"Django Multiprocessing oddity","body":"<p>In using ./manage.py shell to exercise some code, I've come across something I don't understand.</p>\n\n<pre><code>Python 2.6.6 (r266:84292, Sep 11 2012, 08:34:23)\n[GCC 4.4.6 20120305 (Red Hat 4.4.6-4)] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n(InteractiveConsole)\n&gt;&gt;&gt; from multiprocessing import Process\n&gt;&gt;&gt; from django.core.management import call_command\n&gt;&gt;&gt; p = Process(target=call_command(\"processphoto\", 1000))\nSuccessfully populated photo \"1000\"  (This is output from my processphoto command)\n&gt;&gt;&gt;\n</code></pre>\n\n<p>I never get the opportunity to do a <code>p.start()</code> or set any other variables on the process.  It appears to execute on instantation.  When I try to use the code in my view, I don't appear to get multiple processes spawning at all, everything remains on the one core.</p>\n\n<p>What am I doing wrong, or misunderstanding?  I want to generate separate <code>manage.py processphoto</code> commands in separate processes to fully utilize the multi-core server.</p>\n"},{"tags":["python","datetime"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13237903,"title":"counting forward work out how long time a is after time b","body":"<p>I need a way to find out how long one datetime.time is after another datetime.time  Quite simple, but... the problem is that my time values are in 24 hour time so it's not as simple as negating one value from another. Instead i need to work out how long time_b is after time_a if I were to count forward in time and at midnight time loops round, i.e.</p>\n\n<pre><code>time_a = 09:00\ntime_b = 04:00\n</code></pre>\n\n<p>Here time_b is 19 hours after time_a</p>\n\n<pre><code>def time_after_time(time_a, time_b):\n\n    a_hour = time_a.hour\n    a_minute = time_a.minute\n    b_hour = time_b.hour\n    b_minute = time_b.minute\n\n    out_hour = b_hour - a_hour\n    out_minute = b_minute - a_minute\n\n    if out_hour &lt; 0:\n        out_hour += 24\n\n    if out_minute &lt; 0:\n        out_hour -= 1\n        out_minute += 60\n\n    return datetime.time(out_hour, out_minute)\n</code></pre>\n\n<p>This was my first try but its giving false results.</p>\n\n<p>Can anyone think of a cleaner/correct way to do this?</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":44,"score":3,"question_id":13239002,"title":"ignoring directories in os.walk()?","body":"<p>I wish to ignore some directories in my os.walk().</p>\n\n<p>I do:</p>\n\n<pre><code>folders_to_ignore = ['C:\\\\Users\\\\me\\\\AppData\\\\'];\ndef find_files(directory, pattern):\nfor root, dirs, files in os.walk(directory):\n    dir[:] = [d for d in dirs if not is_folder_to_ignore(d)];\n    for basename in files:\n        if fnmatch.fnmatch(basename, pattern):\n            filename = os.path.join(root, basename)\n            print(\"filename=\" + filename);\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>  File \"C:\\Users\\me\\workspaces\\pythonWS\\FileUtils\\findfiles.py\", line 29, in find_files\n  dir[:] = [d for d in dirs if not is_folder_to_ignore(d)];\n</code></pre>\n\n<p>TypeError: 'builtin_function_or_method' object does not support item assignment</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks.</p>\n"},{"tags":["python","web-scraping","mechanize","scraper"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":26,"score":0,"question_id":13216736,"title":"Scraping my SCPD videos: Cannot get past preloader page after successful login","body":"<p>I am trying to download videos from Stanford Center for Professional Development for a course that I am enrolled in. The WMV/SL players on the website are terrible and it's a nightmare to watch a video, especially when you have to rewind a second or two to view a point that you might have missed.</p>\n\n<p>I have written a Python script (and using Mechanize) which can be seen here: <a href=\"https://github.com/abhinavsood/scrape-scpd-videos/blob/master/scrape.py\" rel=\"nofollow\">https://github.com/abhinavsood/scrape-scpd-videos/blob/master/scrape.py</a></p>\n\n<p>What I have been able to achieve so far:\n1. Successful login\n2. Open the page where courses are listed\n3. Find the requested course\n4. Emulate clicking on the link to online videos for the requested course (by submitting a hidden form with a course-specific parameter as input)</p>\n\n<p>A page with a preloader image, successfully, loads after this step which says 'Your online resources are loading'.</p>\n\n<p>Markup of this page is:</p>\n\n<pre><code>&lt;script&gt;\n window.resizeTo(1024, 900);\n&lt;/script&gt;\n&lt;html&gt;\n &lt;head&gt;\n  &lt;script&gt;\n   function submitForm(){\n    document.forms['form0'].submit();\nreturn false;\n}\n  &lt;/script&gt;\n &lt;/head&gt;\n &lt;body onload=\"javascript:submitForm();\"&gt;\n  &lt;p&gt;\n   &lt;br /&gt;\n   &lt;br /&gt;\n   &lt;br /&gt;\n   &lt;br /&gt;\n   &lt;center&gt;\n    &lt;img src=\"../images2/icons/icon_loading.gif\" /&gt;\n   &lt;/center&gt;\n  &lt;/p&gt;\n  &lt;p style=\"font-color: #404950; font-size: 11px;font-family: Verdana,Tahoma,Helvetica,sans-serif;\"&gt;\n   Your online resources are loading...\n   &lt;center&gt;\n    &lt;!-- \nLoading Icon -- Terms of Use\n    - You are encouraged and legally entitled to copy and modify any animated gif`s, generated by http://preloaders.net web-site.\n    - All animated gif`s are completely free to use in all projects (web and desktop applications, freeware and commercial projects)\n    - You are encouraged, but NOT obligated to place any reference to http://preloaders.net web-site to use it`s content in any projects and applications\n--&gt;\n   &lt;/center&gt;\n  &lt;/p&gt;\n  &lt;form name=\"form0\" action=\"http://MyVideos.stanford.edu/OCE/ProEdCourseInfo.aspx?coll=a9f243a6-467b-4504-b280-c80caf49f007\" target=\"_self\" method=\"post\"&gt;\n   &lt;input type=\"hidden\" name=\"AuthInfo\" value=\"&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt; &amp;lt;AuthInfo&amp;gt;&amp;lt;ClientIP&amp;gt;122.252.231.5&amp;lt;/ClientIP&amp;gt;&amp;lt;UserName&amp;gt;abhinavsood&amp;lt;/UserName&amp;gt;&amp;lt;SUID&amp;gt;&amp;lt;/SUID&amp;gt;&amp;lt;TuitionProfile&amp;gt;Online Course&amp;lt;/TuitionProfile&amp;gt;&amp;lt;AccessStartDate&amp;gt;10-06-2011&amp;lt;/AccessStartDate&amp;gt;&amp;lt;AccessEndDate&amp;gt;15-01-2013&amp;lt;/AccessEndDate&amp;gt;&amp;lt;URL&amp;gt;http://MyVideos.stanford.edu/OCE/ProEdCourseInfo.aspx?coll=a9f243a6-467b-4504-b280-c80caf49f007&amp;lt;/URL&amp;gt;&amp;lt;Timestamp&amp;gt;03-11-2012 11:49:46&amp;lt;/Timestamp&amp;gt;&amp;lt;/AuthInfo&amp;gt;\" /&gt;\n   &lt;input type=\"hidden\" name=\"MAC\" value=\"fafa0e97a47a10f80ec3ce7373bbf4426634f464\" /&gt;\n   &lt;input type=\"hidden\" name=\"MacKey\" value=\"null\" /&gt;\n  &lt;/form&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>From what I understand, the hidden form in this page gets submitted on body <code>onload</code>. I am trying to wait for a few seconds with <code>sleep(10)</code> and then submit this form using Python by doing</p>\n\n<pre><code># reached the preloader page, now what?\nbr.select_form(nr=0)\n\nbr.find_control(\"AuthInfo\").disabled = False\nbr.find_control(\"MAC\").disabled = False\nbr.find_control(\"MacKey\").disabled = False\nbr.form.set_all_readonly(False)\n\nresponse = br.form.submit()\n</code></pre>\n\n<p>But the response is a 'content requires authentication' page, not the page with course details and list of videos as I can see in a modern browser like Firefox or Chrome. What am I doing wrong?</p>\n\n<p>This is what the form submit looks like. The 302 redirect seems to fail me. 'Location' is correct, but then on redirect it seems that authentication data is lost and again a 302 redirect is issued. </p>\n\n<pre><code>send: 'POST /oce/proedcourseinfo.aspx?coll=a9f243a6-467b-4504-b280-c80caf49f007 HTTP/1.1\\r\\nOrigin: https://scpd.stanford.edu\\r\\nContent-Length: 1\\r\\nAccept-Encoding: gzip\\r\\nConnection: close\\r\\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\\r\\nAccept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3\\r\\nHost: myvideos.stanford.edu\\r\\nReferer: https://scpd.stanford.edu/onlineResource/publicOnlineResourceDetail.do\\r\\nCache-Control: max-age=0\\r\\nContent-Type: application/x-www-form-urlencoded\\r\\n\\r\\n '\nreply: 'HTTP/1.1 302 Found\\r\\n'\nheader: Cache-Control: private\nheader: Transfer-Encoding: chunked\nheader: Content-Type: text/html; charset=utf-8\nheader: Location: /oce/proedcourseinfo.aspx?coll=a9f243a6-467b-4504-b280-c80caf49f007&amp;AspxAutoDetectCookieSupport=1\nheader: Server: Microsoft-IIS/7.0\nheader: X-AspNet-Version: 2.0.50727\nheader: Set-Cookie: AspxAutoDetectCookieSupport=1; path=/\nheader: X-Powered-By: ASP.NET\nheader: Date: Mon, 05 Nov 2012 14:04:06 GMT\nheader: Connection: close\n</code></pre>\n\n<p>&shy;</p>\n\n<pre><code>send: 'GET /oce/proedcourseinfo.aspx?coll=a9f243a6-467b-4504-b280-c80caf49f007&amp;AspxAutoDetectCookieSupport=1 HTTP/1.1\\r\\nOrigin: https://scpd.stanford.edu\\r\\nAccept-Encoding: gzip\\r\\nConnection: close\\r\\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\\r\\nAccept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3\\r\\nHost: myvideos.stanford.edu\\r\\nReferer: http://myvideos.stanford.edu/oce/proedcourseinfo.aspx?coll=a9f243a6-467b-4504-b280-c80caf49f007\\r\\nCache-Control: max-age=0\\r\\nCookie: AspxAutoDetectCookieSupport=1\\r\\nContent-Type: application/x-www-form-urlencoded\\r\\n\\r\\n'\nreply: 'HTTP/1.1 302 Found\\r\\n'\nheader: Cache-Control: private\nheader: Content-Type: text/html; charset=utf-8\nheader: Location: /errors/login.aspx?errorMessage=Could not Authenticate user\nheader: Server: Microsoft-IIS/7.0\nheader: Set-Cookie: ASP.NET_SessionId=25b20355hnv3jw55fama1f45; path=/; HttpOnly\nheader: X-AspNet-Version: 2.0.50727\nheader: X-Powered-By: ASP.NET\nheader: Date: Mon, 05 Nov 2012 14:04:06 GMT\nheader: Connection: close\nheader: Content-Length: 184\n</code></pre>\n\n<p>&shy;</p>\n\n<pre><code>send: 'GET /errors/login.aspx?errorMessage=Could%20not%20Authenticate%20user HTTP/1.1\\r\\nOrigin: https://scpd.stanford.edu\\r\\nAccept-Encoding: gzip\\r\\nConnection: close\\r\\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\\r\\nAccept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3\\r\\nHost: myvideos.stanford.edu\\r\\nReferer: http://myvideos.stanford.edu/oce/proedcourseinfo.aspx?coll=a9f243a6-467b-4504-b280-c80caf49f007\\r\\nCache-Control: max-age=0\\r\\nCookie: ASP.NET_SessionId=25b20355hnv3jw55fama1f45; AspxAutoDetectCookieSupport=1\\r\\nContent-Type: application/x-www-form-urlencoded\\r\\n\\r\\n'\nreply: 'HTTP/1.1 200 OK\\r\\n'\nheader: Cache-Control: private\nheader: Content-Type: text/html; charset=utf-8\nheader: Server: Microsoft-IIS/7.0\nheader: X-AspNet-Version: 2.0.50727\nheader: X-Powered-By: ASP.NET\nheader: Date: Mon, 05 Nov 2012 14:04:08 GMT\nheader: Connection: close\nheader: Content-Length: 6583\n</code></pre>\n\n<p>Any help would be greatly appreciated!</p>\n"},{"tags":["python","numpy","pca"],"answer_count":3,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":80,"score":2,"question_id":13224362,"title":"PCA Analysis with Python","body":"<p>I have a (26424 x 144) array and I want to perform PCA analysis over it using Python. However, there is no particular place on the web that explains about how to achieve this task (There are some sites which just do PCA according to their own - there is no generalized way of doing so that I can find). Anybody with any sort of help will do great.</p>\n"},{"tags":["python","pyqt4","qlineedit","maskedinput"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13226408,"title":"How to use QInputMask and QDoubleValidator in PyQt4?","body":"<p>I created a QLineEdit lineEdit_X_Position input in PyQt4.</p>\n\n<p>I have created a input mask with self.ui.lineEdit_X_Position.setInputMask(\"00,000.00;_\").</p>\n\n<p>I set the lineEdit with default value self.ui.lineEdit_X_Position.setText( format('6543.21', \",.2f\") ).</p>\n\n<p>When I view the UI, it shows X_Position as \"6_,543.21\" instead of \"_6,543.21\".\nI tried to set the default with self.ui.lineEdit_X_Position.setText( format('6543.21', \"9.2f\") ), but results = \"65,43_.21\".</p>\n\n<p>It gets worst when the default value is \"543.21\". I get results as \"54,3__.21\".</p>\n\n<p>Is this a bug in QInputMask?\nHow to get the correct result with the QInputMask format that I want, where user can only enter numbers?</p>\n\n<p>Also, if I want to validate the double results, how to use the QDoubleValidator?\nThe valid range is 0.00 to 10,000.00.</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["python","cython","python-sphinx"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13238736,"title":"how to document cython function on readthedocs","body":"<p>On <a href=\"http://readthedocs.org\" rel=\"nofollow\">ReadTheDocs</a> I am not allowed to compile <code>cython</code> extensions, is it possible to configure <code>sphinx</code> in order to extract the docstrings from the <code>cython</code> files without actually compiling them?</p>\n\n<p>thanks!</p>\n"},{"tags":["python"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":28,"score":-3,"question_id":13238648,"title":"401 Unauthorized Connection","body":"<p>I just wanna ask how to make a connexion with 401 Unauthorized . And Login in / \nFor example in php its seem like that<br>\n<a href=\"http://pastie.org/5191316\" rel=\"nofollow\">http://pastie.org/5191316</a></p>\n"},{"tags":["python","mongodb","scrapy","tor"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13238357,"title":"Scrapy + Tor + Mongodb","body":"<p>I face a problem when using Scrapy + Mongodb with Tor. I get the following error when I try to have a mongodb pipeline in Scrapy.</p>\n\n<pre><code>2012-11-05 13:41:14-0500 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware\n|S-chain|-&lt;&gt;-127.0.0.1:9050-&lt;&gt;&lt;&gt;-127.0.0.1:27017-&lt;--denied\nTraceback (most recent call last):\n  File \"/usr/bin/scrapy\", line 4, in &lt;module&gt;\n    execute()\n  File \"/usr/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 131, in execute\n    _run_print_help(parser, _run_command, cmd, args, opts)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 97, in _run_print_help\n    func(*a, **kw)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 138, in _run_command\n    cmd.run(args, opts)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/commands/crawl.py\", line 42, in run\n    q = self.crawler.queue\n  File \"/usr/lib/python2.7/dist-packages/scrapy/command.py\", line 33, in crawler\n    self._crawler.configure()\n  File \"/usr/lib/python2.7/dist-packages/scrapy/crawler.py\", line 43, in configure\n    self.engine = ExecutionEngine(self.settings, self._spider_closed)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/core/engine.py\", line 33, in __init__\n    self.scraper = Scraper(self, self.settings)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/core/scraper.py\", line 66, in __init__\n    self.itemproc = itemproc_cls.from_settings(settings)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/middleware.py\", line 33, in from_settings\n    mw = mwcls()\n  File \"/home/bharani/ABCD_scraper/political_forum_scraper/pipelines.py\", line 9, in __init__\n    settings['MONGODB_PORT'])\n  File \"/usr/local/lib/python2.7/dist-packages/pymongo/connection.py\", line 290, in __init__\n    self.__find_node()\n  File \"/usr/local/lib/python2.7/dist-packages/pymongo/connection.py\", line 586, in __find_node\n    raise AutoReconnect(', '.join(errors))\npymongo.errors.AutoReconnect: could not connect to localhost:27017: [Errno 111] Connection refused\n</code></pre>\n\n<p>I am not sure how to resolve this. When I do not use <code>proxychains</code>, it crawls perfectly fine.</p>\n\n<p>Any help is appreciated.</p>\n\n<p>Thanks.</p>\n\n<hr>\n\n<p>Edit:</p>\n\n<p>It's not code specific. See this link: <a href=\"http://isbullsh.it/2012/04/Web-crawling-with-scrapy/\" rel=\"nofollow\">http://isbullsh.it/2012/04/Web-crawling-with-scrapy/</a></p>\n\n<p>This is a simple tutorial to use <code>Scrapy</code> with <code>MongoDB</code>. We are supposed to call</p>\n\n<p><code>scrapy crawl isbullshit</code></p>\n\n<p>to run the crawler which works perfectly fine. To use <code>Tor</code>, it should be called like this:</p>\n\n<p><code>proxychains scrapy crawl isbullshit</code></p>\n\n<p>Which does not work for me. The source code of the tutorial is here: <a href=\"https://github.com/BaltoRouberol/isbullshit-crawler\" rel=\"nofollow\">https://github.com/BaltoRouberol/isbullshit-crawler</a></p>\n"},{"tags":["python","beautifulsoup","iterate"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13238370,"title":"how to iterate over multiple \"div\" with certain class, and stop when class changes?","body":"<p>Questions says it all but in a few line..\nI've got HTML page which looks like this </p>\n\n<pre class=\"lang-html prettyprint-override\"><code>             ...\n&lt;div class=\"line-up\" .. &gt; .. &lt;/&gt;\n&lt;div class=\"line-down\" ..&gt; .. &lt;/&gt;\n&lt;div class=\"line-down\" ..&gt; .. &lt;/&gt;\n&lt;div class=\"line-down\" ..&gt; .. &lt;/&gt;\n            ...\n&lt;div class=\"line-up\" ..&gt; .. &lt;/&gt;\n&lt;div class=\"line-down\" ..&gt; .. &lt;/&gt;\n</code></pre>\n\n<p>I want to be able to iterate through each <code>&lt;div class=\"line-down\"&gt;</code> belonging to one <code>&lt;div class=\"line-up\"&gt;</code>\nand go on with the next <code>&lt;div class=\"line-down\"..&gt;</code>  .\nI can already iterate through each <code>&lt;div class=\"line-up\"&gt;</code> with :</p>\n\n<pre><code>for first_line in soup.findAll(\"div\",class_=\"line-up\"):\n</code></pre>\n\n<p>But I just can't find what to do to iterate with the next div and stopping at a point.\nAny ideas?</p>\n"},{"tags":["python","google-app-engine","oauth","google-bigquery","google-api-python-client"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":73,"score":4,"question_id":13212115,"title":"from oauth2client.appengine import oauth2decorator_from_clientsecrets ImportError: No module named appengine","body":"<p>I' getting the following error while trying to run my application</p>\n\n<pre><code>from oauth2client.appengine import oauth2decorator_from_clientsecrets\nImportError: No module named appengine\n</code></pre>\n\n<p>Here is my main.py code</p>\n\n<pre><code>import httplib2\nimport os\nfrom google.appengine.ext import webapp\nfrom google.appengine.ext.webapp.util import run_wsgi_app\nfrom oauth2client.appengine import oauth2decorator_from_clientsecrets\n\nCLIENT_SECRETS = os.path.join(os.path.dirname(__file__), 'client_secrets.json')\n\ndecorator = oauth2decorator_from_clientsecrets(CLIENT_SECRETS,\n'https://www.googleapis.com/auth/bigquery')\n\nclass MainHandler(webapp.RequestHandler):\n    @decorator.oauth_required\n    def get(self):\n       self.response.out.write(\"Hello Dashboard!\\n\")\n\napplication = webapp.WSGIApplication([\n     ('/', MainHandler),\n     ], debug=True)\n\ndef main():\n    run_wsgi_app(application)\n\nif __name__ == '__main__':\n   main()\n</code></pre>\n\n<p>And here is my app.yaml</p>\n\n<pre><code>application: hellomydashboard\nversion: 1\nruntime: python27\napi_version: 1\nthreadsafe: false\n\nhandlers:\n- url: /favicon\\.ico\n  static_files: favicon.ico\n  upload: favicon\\.ico\n\n- url: /oauth2callback\n  script: oauth2client/appengine.py\n\n- url: .*\n  script: main.app\n</code></pre>\n"},{"tags":["python","couchdb"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13238471,"title":"Exception AttributeError: \"'NoneType' object has no attribute 'WARNING'\" in <bound method xxx.__del__ of <yyy.xxx object at 0xd08c48c>> ignored","body":"<p>First some introduction to my problem: one of my (complex) objects needs to be cleaned up when it is going to be destroyed. The reason is that it has a list of documents which must be eventually sent to a couchdb instance (the list is kept in order to perform bulk writes). If the object is deleted, the list of documents must be sent to the server.</p>\n\n<p>Sending the list to the server is a complicated process: you need to get the current revision  of the documents that you want to update, before actually sending them. Documents could be already present in couchdb, could be deleted, etc. Couchdb is a bit complicated in this regard. I just mention this to make clear that I can not re-implement this functionality just for the sake of solving my problem (see below).</p>\n\n<p>In this process, I rely on some global objects to perform some actions: specifically, I have a module <code>log</code> object, as I have in all my code, to perform logging.</p>\n\n<p>And all this action is triggered from the <code>__del__</code> method in my class. But when my objects are deleted, I get the error message:</p>\n\n<pre><code>Exception AttributeError: \"'NoneType' object has no attribute 'WARNING'\" in &lt;bound method xxx.__del__ of &lt;yyy.xxx object at 0xd08c48c&gt;&gt; ignored \n</code></pre>\n\n<p>Obviously, the module <code>log</code> object is not present when the object is being deleted. My questions are:</p>\n\n<ol>\n<li>Why are the global objects (in this case module objects) not defined anymore?</li>\n<li>In what order does python delete global objects? Can I change this order? Can I mark an object as \"last to delete\"?</li>\n<li>What can I do to prevent this behavior?</li>\n</ol>\n\n<p>If this can not be changed, I am in a big trouble. The same pattern is in all around my code, where my classes rely in a module <code>log</code> object to perform logging, or any other module object. Most of my classes do not implement a <code>__del__</code> method, but some do.</p>\n"},{"tags":["python","mysql","python-3.x"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13234614,"title":"python 3 euro sign not encoded correctly","body":"<p>I am using a script to retrieve some data from a MySQL database with prices in different currencies.</p>\n\n<p>Every currency symbol works fine, except for the euro sign (<code>€</code>), which returns the little square with the numbers <code>0 0 8 0</code>.</p>\n\n<p>It is the same result of:</p>\n\n<pre><code>print ('\\x80')\n</code></pre>\n\n<p>The collation of the table is <code>utf8_general_ci</code>.</p>\n\n<p>I have no idea of what I am doing wrong, if it's on my script or on the settings of the table</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["python","ruby","windows","cmd","system"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":27,"score":2,"question_id":13237600,"title":"Ruby system call not observing path for python scripts","body":"<p>This works:</p>\n\n<pre><code>system \"python \\\"C:/Program Files (x86)/Google/google_appengine/someScript.py\\\"\n</code></pre>\n\n<p>This doesn't work:</p>\n\n<pre><code>system \"python \\\"someScript.py\\\"\n</code></pre>\n\n<p>The directory containing <code>someScript.py</code> is added to my windows <code>PATH</code> variable, so if I open a CMD window and type:</p>\n\n<pre><code>someScript.py\n</code></pre>\n\n<p>it runs fine.</p>\n\n<p>How do I make is so that my ruby script is able to call <code>someScript.py</code> while observing the windows environment path variable so I don't have to specify an absolute path for the python script?</p>\n"},{"tags":["python","selenium","webdriver","selenium-webdriver"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":13107825,"title":"accessing form tag with selenium web driver","body":"<p>I am trying to locate a tag on a page, but so far finding it by name/id/xpath have not worked. This is what I've tried to locate it by xpath:</p>\n\n<pre><code>db = driver.find_element_by_xpath(\"/html/body/form\")\n</code></pre>\n\n<p>and also </p>\n\n<pre><code>driver.find_element_by_xpath(\"//form[@id='formControl']\")\n</code></pre>\n\n<p>Both of these return the error:</p>\n\n<pre><code>selenium.common.exceptions.NoSuchElementException: Message: u'Unable to locate element:\n</code></pre>\n\n<p>It's as if it can not find the form on the page. Any ideas of how to fix?</p>\n\n<p>Here's the beginning of the html on the page:</p>\n\n<pre><code>&lt;html&gt;\n  &lt;body id=\"bodyControl\" class=\"PersonalizationPage ContentPage Layout_PageUsesRegions\" onunload=\"closeTimeoutWarningPopupWindow();return true;\" onload=\"return __MasterOnLoad();\" onresize=\"return __MasterOnResize();\"&gt;\n    &lt;form name=\"formControl\" method=\"post\" action=\"default.wl?appflag=65.14&amp;amp;bhcp=1&amp;amp;MT=208&amp;amp;rs=LAWS2.0&amp;amp;strRecreate=no&amp;amp;sv=Split&amp;amp;transfertoken=10281204301250d0dbca913e4aa6887c7d425f4ede9c&amp;amp;vr=2.0\" id=\"formControl\" target=\"_top\"&gt;\n</code></pre>\n"},{"tags":["python","google-app-engine"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":50,"score":2,"question_id":13226727,"title":"How do i unit test in google app engine?","body":"<p>After searching and even reading the documentation on app engine unit testing am still unable to make it work on my project.</p>\n\n<p>The task is simple, I have my models and request handlers in main.py.\nI have installed <a href=\"https://github.com/jgeewax/gaetestbed/\" rel=\"nofollow\">gaetestbed</a> and included it on my test class.</p>\n\n<p>My tests class looks like this;</p>\n\n<pre><code>from main import CloudDocument   # My model\nclass TestCloudDocument(DataStoreTestCase, unittest.TestCase):\n    def test_find_document(self):\n        self.assertEqual(CloudDocument.all().count(), 0)\n</code></pre>\n\n<p>When i run the above test it returns True yet my datastore has records, i would have expected this test to fail.</p>\n\n<p>It seems like the test class does not see the datastore of my application. How can i make it\nsee and access my local datastore?</p>\n\n<p>Gath</p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":58,"score":-1,"question_id":13237812,"title":"Assertion Error:?","body":"<p>I have written this function but i keep getting assertion error and i don't know why???</p>\n\n<pre><code>  def amino(codonfile, DNA):\n        \"\"\"This function reads the 64-line codon file and then converts the DNA string entered into an amino acid string.\"\"\"\n        codonfile = []\n        for line in codonfile:\n            x,y = line.split()\n            if DNA == dict[x]:\n                return dict[y]\n    codonfile = open(\"codon.txt\",\"r\")   \n    codonfile.close\n\n    assert(amino(\"codon.txt\",\"TTT\")== \"Phe\")\n    assert(amino(\"codon.txt\",\"TTATTCTTGTCT\")== \"LeuPheLeuSer\")\n    assert(amino(\"codon.txt\",\"TTAGGGCCCTAC\")== \"LueGlyProTyr\")\n    print(\"passed\")\n</code></pre>\n"},{"tags":["python","python-3.x","argparse"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13237955,"title":"Python Argparse without command keyword","body":"<p>So, what i am trying to do is LS Mimic in Python code.</p>\n\n<p>I have completed most of the commands, but i have one thing that i cant find the solution</p>\n\n<p>So, if the <code>ls</code> command gets this command line,</p>\n\n<p><code>ls test1</code></p>\n\n<p>It should find the <code>test1</code> directory and then do the <code>ls</code> in that directory.</p>\n\n<p>However, since I can only find ways of creating arguments that needs a keyword before the \nactual usage, I cant find the way of doing this..</p>\n\n<p>it cant be something like this </p>\n\n<p><code>ls -move_dir test1</code></p>\n\n<p>it is fine if for the program to think if there is no command, it will treat as above way.\n( it will find that directory and run <code>ls</code> ) </p>\n\n<p>Please help me !! </p>\n"},{"tags":["python","sorting","dictionary"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":51,"score":2,"question_id":13237941,"title":"sorting list of nested dictionaries in python","body":"<p>I have something like </p>\n\n<pre><code>[\n    {\n        \"key\": { \"subkey1\":1, \"subkey2\":\"a\"  }\n    },\n    {\n        \"key\": { \"subkey1\":10, \"subkey2\":\"b\" }\n    },\n    {\n        \"key\": { \"subkey1\":5, \"subkey2\":\"c\" }\n    }\n]\n</code></pre>\n\n<p>And would need to have : </p>\n\n<pre><code>[\n    {\n        \"key\": { \"subkey1\":10, \"subkey2\":\"b\" }\n    },\n    {\n        \"key\": { \"subkey1\":5, \"subkey2\":\"c\" }\n    },\n    {\n        \"key\": { \"subkey1\":1, \"subkey2\":\"a\" }\n    }\n]\n</code></pre>\n\n<p>Many thanks!</p>\n\n<p>EDIT : I'd like to sort by subkey1, this wasn't clear previously.</p>\n"},{"tags":["python","sqlite3","python-2.7"],"answer_count":0,"favorite_count":1,"up_vote_count":5,"down_vote_count":0,"view_count":46,"score":5,"question_id":13237788,"title":"Using multiple cursors in a nested loop in sqlite3 from python-2.7","body":"<p>I’ve been having problems using multiple cursors on a single sqlite database within a nested loop. I found a solution that works for me, but it’s limited and I haven’t seen this specific problem documented online. I’m posting this so:\n-- A clear problem/solution is available\n-- To see if there’s a better solution\n-- Perhaps I’ve found a defect in the sqlite3 python module</p>\n\n<p>Here’s the situation:\nMy Python app is storing social relationship data in sqlite. The dataset includes a one-to-many relationship between two tables: myConnections and sharedConnections. The former has one row for each connection. The sharedConnections table has 0:N rows, depending on how many connections are shared. To build the structure, I use a nested loop. In the outside loop I visit each row in myConnections. In the inside loop, I populate the sharedConnections table. The code looks like this:</p>\n\n<pre><code>curOuter = db.cursor()  \nfor row in curOuter.execute('SELECT * FROM myConnections'):    \n    id  = row[0]  \n    curInner = db.cursor()  \n    scList = retrieve_shared_connections(id)  \n    for sc in scList:  \n        curInner.execute('''INSERT INTO sharedConnections(IdConnectedToMe, IdShared) VALUES (?,?)''', (id,sc))  \ndb.commit()  \n</code></pre>\n\n<p>The result is odd. The <code>sharedConnections</code> table gets duplicate entries for the first two records in <code>myConnections</code>. They’re a bit collated. A’s connections, B’s connections, followed by A and then B again.  After the initial stutter, the processing is correct! Example:</p>\n\n<pre><code>myConnections\n-------------\na   \nb  \nc  \nd  \n\nsharedConnections\n-------------\na-&gt;b  \na-&gt;c  \nb-&gt;c  \nb-&gt;d  \na-&gt;b  \na-&gt;c  \nb-&gt;c  \nb-&gt;d  \n</code></pre>\n\n<p>The solution is imperfect. Instead of using the iterator from the outside loop cursor, I <code>SELECT</code>, then <code>fetchall()</code> and loop through the resulting list. Since my dataset is pretty small, this is OK.</p>\n\n<pre><code>curOuter = db.cursor()\ncurOuter.execute('SELECT * FROM myConnections'):\nrows = curOuter.fetchall()\nfor row in rows:    \n    id  = row[0]\n    curInner = db.cursor()\n    scList = retrieve_shared_connections(id)\n    for sc in scList:\n        curInner.execute('''INSERT INTO sharedConnections(IdConnectedToMe, IdShared) VALUES (?,?)''', (id,sc))\ndb.commit()\n</code></pre>\n\n<p>There you have it. Using two cursors against different tables in the same sqlite database within a nested loop doesn’t seem to work. What’s more, it doesn’t fail, it just gives odd results.</p>\n\n<p>So:\n-- Is this truly the best solution?<br>\n-- Is there a better solution?<br>\n-- Is this a defect that should be addressed?</p>\n"},{"tags":["python","mysql","ubuntu","python-3.x","pymysql"],"answer_count":0,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":71,"score":0,"question_id":13237535,"title":"TypeError: unsupported operand type(s) for %: 'bytes' and 'tuple'","body":"<pre><code>TypeError: unsupported operand type(s) for %: 'bytes' and 'tuple'\n</code></pre>\n\n<p>The setup is as follows:\n<code>Eloipool</code> is a bitcoinmining pool software <a href=\"http://gitorious.org/bitcoin/eloipool\" rel=\"nofollow\">http://gitorious.org/bitcoin/eloipool</a>\nPyMySQL is required for the MySQL database connection <a href=\"https://github.com/petehunt/PyMySQL\" rel=\"nofollow\">https://github.com/petehunt/PyMySQL</a> .</p>\n\n<p>The system is ubuntu 12.04.</p>\n\n<pre><code>root@j064:/opt/PyMySQL# locate Python.h\n/usr/include/python2.7/Python.h\n/usr/include/python3.2mu/Python.h\n/usr/include/wx-2.8/wx/wxPython/wxPython.h\nroot@j064:/opt/PyMySQL#\n</code></pre>\n\n<p><code>Eloipool</code> (Python3 and up) is located in <code>/opt/eloipool/</code>\nPyMySQL is located in <code>/opt/PyMySQL/pymysql/</code>\nPyMySQL comes with a Python3 compilant patch located in <code>/opt/PyMySQL/py3k/pymysql/</code></p>\n\n<p>I tried symlinks to both versions in the eloipool folder, the default version will ask for all subfolders and files from <code>/opt/PyMySQL/pymysql/</code>, I could not even try as pymysql and <code>eloipool</code> have a file called util.py.</p>\n\n<p>When I symlink the <code>/opt/PyMySQL/py3k/pymysql/</code> version I get the following error when running eloipool:</p>\n\n<pre><code>root@j064:/opt/eloipool# ./eloipool.py\n\n&gt;&gt;&gt; 2012-11-05 17:27:28,138     merkleMaker     INFO    New block: 000000000000026ea479ce7585db76c170190fce7bc46c0406767523d1846e96 (height: 206615; bits: 1a0513c5)\n2012-11-05 17:27:28,246 restoreState    INFO    Restoring saved state from 'eloipool.worklog' (196 bytes)\n2012-11-05 17:27:28,248 restoreState    INFO    State restored successfully\n2012-11-05 17:27:28,248 restoreState    INFO    Total downtime: 96.0659 seconds\n2012-11-05 17:27:28,295 JSONRPCServer   INFO    Waiting 13.1 seconds to longpoll\n2012-11-05 17:27:29,214 JSONRPCServer   INFO    Ignoring longpoll attempt while another is waiting\n2012-11-05 17:27:41,431 JSONRPCServer   INFO    Longpoll woke up 1 clients in 0.000 seconds\n2012-11-05 17:28:28,353 WorkLogPruner   DEBUG   Pruned 0 jobs\n2012-11-05 17:29:28,389 WorkLogPruner   DEBUG   Pruned 0 jobs\n2012-11-05 17:29:33,805 JSONRPCHandler  ERROR   Error during JSON-RPC call: doJSON_getwork['00000002d1846e96067675237bc46c0470190fce85db76c1a479ce750000026e000000002b3b2cd67c438323e27e2d23671e4cf07e28c0c96756f5e0edef21d4d6c502795097f74d1a0513c5eef5f556000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000']\nTraceback (most recent call last):\n  File \"/opt/eloipool/jsonrpcserver.py\", line 196, in _doJSON_i\n    rv = getattr(self, method)(*params)\n  File \"/opt/eloipool/jsonrpc_getwork.py\", line 44, in doJSON_getwork\n    return self.doJSON_submitwork(data)\n  File \"/opt/eloipool/jsonrpc_getwork.py\", line 79, in doJSON_submitwork\n    self.server.receiveShare(share)\n  File \"./eloipool.py\", line 457, in receiveShare\n    i(share)\n  File \"/opt/eloipool/sharelogging/sql.py\", line 65, in logShare\n    dbc.execute(stmt, params)\n  File \"/opt/eloipool/pymysql/cursors.py\", line 108, in execute\n    query = query % escaped_args\nTypeError: unsupported operand type(s) for %: 'bytes' and 'tuple'\n\n\n&gt;&gt;&gt; exit()\n2012-11-05 17:29:38,577 stopServers     INFO    Stopping servers...\n2012-11-05 17:29:38,577 Waker for BitcoinNode   DEBUG   Read wakeup\n2012-11-05 17:29:38,587 saveState       INFO    Saving work state to 'eloipool.worklog'...\n2012-11-05 17:29:38,603 exit    INFO    Goodbye...\nTerminated\nroot@j064:/opt/eloipool#\n</code></pre>\n\n<p>The MYSQL schema:</p>\n\n<pre><code>-- phpMyAdmin SQL Dump\n-- version 3.4.10.2\n-- http://www.phpmyadmin.net\n--\n-- Host: localhost:3306\n-- Erstellungszeit: 05. Nov 2012 um 17:55\n-- Server Version: 5.5.24\n-- PHP-Version: 5.3.10\n\nSET SQL_MODE=\"NO_AUTO_VALUE_ON_ZERO\";\nSET time_zone = \"+00:00\";\n\n\n/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;\n/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;\n/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;\n/*!40101 SET NAMES utf8 */;\n\n--\n-- Datenbank: `simplec`\n--\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `accountBalance`\n--\n\nCREATE TABLE IF NOT EXISTS `accountBalance` (\n  `id` int(255) NOT NULL AUTO_INCREMENT,\n  `userId` int(255) NOT NULL,\n  `balance` varchar(40) DEFAULT NULL,\n  `sendAddress` varchar(255) DEFAULT '',\n  `paid` varchar(40) DEFAULT '0',\n  `threshold` tinyint(4) DEFAULT '0',\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `userId` (`userId`),\n  KEY `b_userId` (`userId`)\n) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=706 ;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `locks`\n--\n\nCREATE TABLE IF NOT EXISTS `locks` (\n  `name` varchar(11) NOT NULL,\n  `locked` tinyint(4) NOT NULL,\n  PRIMARY KEY (`name`)\n) ENGINE=MyISAM DEFAULT CHARSET=utf8;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `networkBlocks`\n--\n\nCREATE TABLE IF NOT EXISTS `networkBlocks` (\n  `id` int(255) NOT NULL AUTO_INCREMENT,\n  `blockNumber` int(255) NOT NULL,\n  `timestamp` int(255) NOT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=5876 ;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `news`\n--\n\nCREATE TABLE IF NOT EXISTS `news` (\n  `id` int(10) NOT NULL AUTO_INCREMENT,\n  `message` varchar(255) NOT NULL,\n  `timestap` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `title` varchar(255) CHARACTER SET latin1 COLLATE latin1_bin NOT NULL DEFAULT ' ',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `pool_worker`\n--\n\nCREATE TABLE IF NOT EXISTS `pool_worker` (\n  `id` int(255) NOT NULL AUTO_INCREMENT,\n  `associatedUserId` int(255) NOT NULL,\n  `username` char(50) DEFAULT NULL,\n  `password` char(255) DEFAULT NULL,\n  `allowed_hosts` text,\n  PRIMARY KEY (`id`),\n  KEY `p_username` (`username`),\n  KEY `pool_worker_associatedUserId` (`associatedUserId`),\n  KEY `pool_worker_username` (`username`)\n) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1398 ;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `settings`\n--\n\nCREATE TABLE IF NOT EXISTS `settings` (\n  `setting` varchar(255) NOT NULL,\n  `value` varchar(255) DEFAULT NULL,\n  PRIMARY KEY (`setting`),\n  KEY `set_setting` (`setting`)\n) ENGINE=MyISAM DEFAULT CHARSET=latin1;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `shares`\n--\n\nCREATE TABLE IF NOT EXISTS `shares` (\n  `id` bigint(30) NOT NULL AUTO_INCREMENT,\n  `rem_host` varchar(255) NOT NULL,\n  `username` varchar(120) NOT NULL,\n  `our_result` enum('Y','N') NOT NULL,\n  `upstream_result` enum('Y','N') DEFAULT NULL,\n  `reason` varchar(50) DEFAULT NULL,\n  `solution` varchar(257) NOT NULL,\n  `time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  KEY `shares_username` (`username`),\n  KEY `shares_time` (`time`),\n  KEY `shares_our_result` (`our_result`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `shares_counted`\n--\n\nCREATE TABLE IF NOT EXISTS `shares_counted` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `blockNumber` int(11) NOT NULL,\n  `userId` int(11) NOT NULL,\n  `count` int(11) NOT NULL,\n  `invalid` int(11) NOT NULL DEFAULT '0',\n  PRIMARY KEY (`id`)\n) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=614 ;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `unconfirmed_rewards`\n--\n\nCREATE TABLE IF NOT EXISTS `unconfirmed_rewards` (\n  `id` int(255) NOT NULL AUTO_INCREMENT,\n  `userId` int(255) NOT NULL,\n  `blockNumber` int(255) NOT NULL,\n  `amount` varchar(40) NOT NULL,\n  `rewarded` enum('N','Y') NOT NULL DEFAULT 'N',\n  `shares` int(255) NOT NULL DEFAULT '0',\n  PRIMARY KEY (`id`),\n  KEY `unconfirmed_rewards_blockNumber` (`blockNumber`),\n  KEY `unconfirmed_rewards_rewarded` (`rewarded`),\n  KEY `unconfirmed_rewards_userId` (`userId`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `userHashrates`\n--\n\nCREATE TABLE IF NOT EXISTS `userHashrates` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `userId` int(255) NOT NULL,\n  `hashrate` int(11) NOT NULL DEFAULT '0',\n  PRIMARY KEY (`id`),\n  KEY `timestamp` (`timestamp`),\n  KEY `userHashrates_id1` (`userId`),\n  KEY `userId_timestamp` (`userId`,`timestamp`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `webUsers`\n--\n\nCREATE TABLE IF NOT EXISTS `webUsers` (\n  `id` int(255) NOT NULL AUTO_INCREMENT,\n  `admin` int(1) NOT NULL,\n  `username` varchar(40) NOT NULL,\n  `pass` varchar(255) NOT NULL,\n  `email` varchar(255) NOT NULL COMMENT 'Assocaited email: used for validating users, and re-setting passwords',\n  `emailAuthPin` varchar(10) NOT NULL COMMENT 'The pin required to authorize that email address',\n  `secret` varchar(10) NOT NULL,\n  `loggedIp` varchar(255) NOT NULL,\n  `sessionTimeoutStamp` int(255) NOT NULL,\n  `accountLocked` int(255) NOT NULL COMMENT 'This is the timestamp when the account will be unlocked(usually used to lock accounts that are trying to be bruteforced)',\n  `accountFailedAttempts` int(2) NOT NULL COMMENT 'This counts the number of failed attempts for web login',\n  `pin` varchar(255) NOT NULL COMMENT 'four digit pin to allow account changes',\n  `share_count` int(11) NOT NULL DEFAULT '0',\n  `stale_share_count` int(11) NOT NULL DEFAULT '0',\n  `shares_this_round` int(11) NOT NULL DEFAULT '0',\n  `api_key` varchar(255) CHARACTER SET latin1 COLLATE latin1_bin DEFAULT NULL,\n  `activeEmail` int(1) DEFAULT NULL,\n  `donate_percent` varchar(11) DEFAULT '1',\n  `btc_lock` enum('0','1') NOT NULL DEFAULT '0',\n  PRIMARY KEY (`id`),\n  KEY `u_username` (`username`)\n) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=710 ;\n\n-- --------------------------------------------------------\n\n--\n-- Tabellenstruktur für Tabelle `winning_shares`\n--\n\nCREATE TABLE IF NOT EXISTS `winning_shares` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `blockNumber` int(11) NOT NULL,\n  `username` varchar(11) NOT NULL,\n  `share_id` int(255) NOT NULL DEFAULT '0',\n  `rewarded` enum('N','Y') NOT NULL DEFAULT 'N',\n  `amount` varchar(40) NOT NULL DEFAULT '0',\n  `confirms` smallint(6) NOT NULL DEFAULT '0',\n  `txid` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,\n  `scored` enum('N','Y') NOT NULL DEFAULT 'N',\n  PRIMARY KEY (`id`),\n  KEY `winning_shares_scored` (`scored`)\n) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=14 ;\n\n/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;\n/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;\n/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;\n</code></pre>\n\n<p>My conclusion is I either installed PyMySQL the wrong way, I useed the wrong python version or its broken as a buddy claimed.</p>\n\n<p>However, this really is not a flake post, I urgently need to get this to work with my limited knowledge of the linux os, thanks for all constructive responses in advance.</p>\n"},{"tags":["python","matplotlib"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":727,"score":1,"question_id":9103166,"title":"multiple axis in matplotlib with different scales","body":"<p>How can multiple scales can be implemented in Matplotlib? I am not talking about the primary and secondary axis plotted against the same x-axis but something like many trends which have different scales and can be identified with their colors plotted in same y-axis. </p>\n\n<p>For example, if I have <code>trend1 ([0,1,2,3,4])</code> and <code>trend2 ([5000,6000,7000,8000,9000])</code> to be plotted against time and want two trends to be of different colors and in Y-axis, different scales, how can I accomplish this with Matplotlib? </p>\n\n<p>When I checked into MATPLOTLIB, they say that they don't have this for now though it is definitely on their WISHLIST, Is there a way around to make this happen?</p>\n\n<p>Is their any other plotting tools for python that can make this happen?</p>\n"},{"tags":["python","numpy","pandas"],"answer_count":5,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":604,"score":2,"question_id":11361985,"title":"Output data from all columns in a dataframe in pandas","body":"<p>I have a csv file with the name <code>params.csv</code>. I opened up <code>ipython qtconsole</code> and created a pandas dataframe using:</p>\n\n<pre><code>import pandas\nparamdata = pandas.read_csv('params.csv', names=paramnames)\n</code></pre>\n\n<p>where, <code>paramnames</code> is a python list of string objects. Example of <code>paramnames</code> (the length of actual list is 22):</p>\n\n<pre><code>paramnames = [\"id\",\n\"fc\",\n\"mc\",\n\"markup\",\n\"asplevel\",\n\"aspreview\",\n\"reviewpd\"]\n</code></pre>\n\n<p>At the ipython prompt if I type <code>paramdata</code> and press enter then I do not get the dataframe with columns and values as shown in examples on <a href=\"http://pandas.sourceforge.net/indexing.html#additional-column-access\" rel=\"nofollow\">Pandas website</a>. Instead, I get information about the dataframe. I get:</p>\n\n<pre><code>In[35]: paramdata\nOut[35]: \n&lt;class 'pandas.core.frame.DataFrame'&gt;\nInt64Index: 59 entries, 0 to 58\nData columns:\nid                    59  non-null values\nfc                    59  non-null values\nmc                    59  non-null values\nmarkup                59  non-null values\nasplevel              59  non-null values\naspreview             59  non-null values\nreviewpd              59  non-null values\n</code></pre>\n\n<p>If I type <code>paramdata['mc']</code> then I do get the values as expected for the <code>mc</code> column. I have two questions:</p>\n\n<p>(1) In the examples on the pandas website (see, for example, the output of <code>df</code> here: <a href=\"http://pandas.sourceforge.net/indexing.html#additional-column-access\" rel=\"nofollow\">http://pandas.sourceforge.net/indexing.html#additional-column-access</a>) typing the name of the dataframe gives the actual data. Why am I getting information about the dataframe as shown above instead of the actual data? Do I need to set some output options somewhere?</p>\n\n<p>(2) How do I output all columns in the dataframe to the screen without having to type their names, i.e., without having to type something like <code>paramdata[['id','fc','mc']]</code>. </p>\n\n<p>I am using pandas version 0.8. </p>\n\n<p>Thank you.</p>\n"},{"tags":["python","implementation","pysandbox"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13237459,"title":"Implement online Python Shell using Pysandbox","body":"<p>I want to build an online Python shell like <a href=\"http://shell.appspot.com/\" rel=\"nofollow\">this</a>. Currently I am trying to build a module\nin Python which does the following things</p>\n\n<ol>\n<li>Creates a new session.</li>\n<li>Runs a code passed as string keeping and maintains the environment variables of the current session.</li>\n</ol>\n\n<p>I am trying to achieve this using <a href=\"https://github.com/haypo/pysandbox\" rel=\"nofollow\">Pysandbox</a>. Here is my effort till now</p>\n\n<pre><code>from sandbox import Sandbox, SandboxConfig\nfrom optparse import OptionParser\nimport sys,traceback\n\nclass Runner:\n    def __init__(self):\n        self.options = self.parseOptions()\n        self.sandbox = Sandbox(self.createConfig())\n        self.localvars = dict()\n    def parseOptions(self):\n        parser = OptionParser(usage=\"%prog [options]\")\n        SandboxConfig.createOptparseOptions(parser, default_timeout=None)\n        parser.add_option(\"--debug\",\n            help=\"Debug mode\",\n            action=\"store_true\", default=False)\n        parser.add_option(\"--verbose\", \"-v\",\n            help=\"Verbose mode\",\n            action=\"store_true\", default=False)\n        parser.add_option(\"--quiet\", \"-q\",\n            help=\"Quiet mode\",\n            action=\"store_true\", default=False)\n        options, argv = parser.parse_args()\n        if argv:\n            parser.print_help()\n            exit(1)\n        if options.quiet:\n            options.verbose = False\n        return options\n\n    def createConfig(self):\n        config = SandboxConfig.fromOptparseOptions(self.options)\n        config.enable('traceback')\n        config.enable('stdin')\n        config.enable('stdout')\n        config.enable('stderr')\n        config.enable('exit')\n        config.enable('site')\n        config.enable('encodings')\n        config._builtins_whitelist.add('compile')\n        config.allowModuleSourceCode('code')\n        config.allowModule('sys',\n            'api_version', 'version', 'hexversion')\n        config.allowSafeModule('sys', 'version_info')\n        if self.options.debug:\n            config.allowModule('sys', '_getframe')\n            config.allowSafeModule('_sandbox', '_test_crash')\n            config.allowModuleSourceCode('sandbox')\n        if not config.cpython_restricted:\n            config.allowPath(__file__)\n        return config\n    def Run(self,code):\n        # log and compile the statement up front\n        try:\n            #logging.info('Compiling and evaluating:\\n%s' % statement)\n            compiled = compile(code, '&lt;string&gt;', 'single')\n        except:\n            traceback.print_exc(file=sys.stdout)\n            return\n        try:\n            self.sandbox.execute(code)\n        except:\n            traceback.print_exc(file=sys.stdout)\n\ndef f():\n    f = open('test.py')\n    code = ''\n    for lines in f:\n        code = code+lines\n    runner = Runner()\n    runner.Run('a = 5')\n    runner.Run('b = 5')\n    runner.Run('print a+b')\nf()\n</code></pre>\n\n<p>I am encountering 3 major problems.</p>\n\n<ol>\n<li><p>How to nicely display error? For example, running the above code results in following output</p>\n\n<p>File \"execute.py\", line 60, in Run\n    self.sandbox.execute(code)\n  File \"/home/aaa/aaa/aaa/pysandbox-master/sandbox/sandbox_class.py\", line 90, in execute\n    return self.execute_subprocess(self, code, globals, locals)\n  File \"/home/aaa/aaa/aaa/pysandbox-master/sandbox/subprocess_parent.py\", line 119, in execute_subprocess\n    raise output_data['error']\nNameError: name 'a' is not defined</p></li>\n</ol>\n\n<p>The undesirable thing here is the call traceback of \"execute.py\". I just want the function to return the following error.</p>\n\n<pre><code>NameError: name 'a' is not defined\n</code></pre>\n\n<ol>\n<li><p>How do I maintain the environment of the current session? For example, in the above code sequence </p>\n\n<p>a = 5<br/>\nb = 5<br/>\nprint a+b<br/></p></li>\n</ol>\n\n<p>should result in output 10.\nAny ideas?</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":19,"score":1,"question_id":13237060,"title":"in python error while importing GeoIP on CentOs server","body":"<p>I am using Django, and when I am using the geoip package or importing GeoIP I am getting the following error on centos, while it is working well on ubuntu 12.04.</p>\n\n<p>The error is as follows</p>\n\n<pre><code> from django.contrib.gis.utils.geoip import GeoIP\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/lib/python2.6/site-packages/django/contrib/gis/utils/geoip.py\", line 67, in &lt;module&gt;\n    'Try setting GEOIP_LIBRARY_PATH in your settings.' % lib_name)\ndjango.contrib.gis.utils.geoip.GeoIPException: Could not find the GeoIP library (tried \"GeoIP\"). Try setting GEOIP_LIBRARY_PATH in your settings.\n</code></pre>\n\n<p>please try to help me out, I can't go further without this.</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":14,"view_count":83,"score":-14,"question_id":13237253,"title":"Read file into dictionary","body":"<p>Write function amino(codonfile, DNA) that reads the 64-line codon file (hint: into a dictionary) and then converts the DNA string entered into an amino acid string. Return that string.</p>\n\n<pre><code>TTT Phe\nTTC Phe\nTTA Leu\nTTG Leu\nTCT Ser\nTCC Ser\nTCA Ser\nTCG Ser\nTAT Tyr\nTAC Tyr\nTAA Ter\nTAG Ter\n</code></pre>\n\n<p>So a call to amino(“codon.txt”,”TTATTCTTGTCT”) would return “LeuPheLeuSer”.\nInclude three asserts to verify that your function works.</p>\n"},{"tags":["python","smtp","gmail"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13237189,"title":"how to send mail with expiry date, auto delete from inbox","body":"<p>this is the method to send mail by python program.</p>\n\n<pre><code>def Send_Mail(self, username, password, receiver, subject, body):\n    username = str(username)\n    password = str(password)\n    receiver = str(receiver)\n    subject = str(subject)\n    body = str(body)\n    Username = username\n    Password = password\n    Sender = username\n    Destination = [receiver]\n    Subject = subject\n    Content = body\n    text_subtype = 'html'\n    SMTPserver = 'smtp.gmail.com'\n    msg = MIMEText(Content, text_subtype)\n    msg['Subject'] = Subject\n    msg['From'] = Sender\n    conn = SMTP(SMTPserver)\n    conn.set_debuglevel(False)\n    conn.login(Username, Password)\n    conn.sendmail(Sender, Destination, msg.as_string())\n    conn.close()\n</code></pre>\n\n<p>calling this method by </p>\n\n<pre><code>Classname.Send_Mail(&lt;emailid&gt;,&lt;password&gt;,&lt;destination email-id&gt;,&lt;subject&gt;,&lt;body&gt;\n</code></pre>\n\n<p>this code is working perfectly,\nbut need to set expiry date while sending mail,so that sent mail must auto delete from the inbox after specified time. \nhelp would be appreciated.  </p>\n"},{"tags":["python","sorting","lambda"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":731,"score":0,"question_id":7371935,"title":"Sort a string in lexicographic order python","body":"<p>I want to sort a string to a list in lexicographic order as</p>\n\n<pre><code>str='aAaBbcCdE'\n</code></pre>\n\n<p>to </p>\n\n<pre><code>['A','a','a','B','b','C','c','d','E']\n</code></pre>\n\n<p>but <code>sorted()</code> gives me this output:</p>\n\n<pre><code>['A','B','C','E','a','a','b','c','d']\n</code></pre>\n\n<p>Please help me.</p>\n"},{"tags":["python","gui","wxpython","listctrl"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":20,"score":1,"question_id":13123746,"title":"Custom headers organization in ListCtrl or another widget in wxPython","body":"<p>I've written code for ListCtrl in wxPython:</p>\n\n<p><img src=\"http://i.stack.imgur.com/86ZgW.png\" alt=\"List Control\"></p>\n\n<pre><code>...\nself.list_ctrl = wx.ListCtrl(panel, size=(-1,150), style=wx.LC_REPORT|wx.BORDER_SUNKEN)\nself.list_ctrl.InsertColumn(0, 'Name')\nself.list_ctrl.InsertColumn(1, 'Old value')\nself.list_ctrl.InsertColumn(2, 'New value')\nself.list_ctrl.InsertColumn(3, 'Old percent')\nself.list_ctrl.InsertColumn(4, 'New percent')\n...\n</code></pre>\n\n<p>But I want to get the ListCtrl (or another widget) with following headers organization:</p>\n\n<p><img src=\"http://i.stack.imgur.com/mTpkq.png\" alt=\"Headers organization\"></p>\n\n<p>I think that It hardy to solve this problem using ListCtrl, may be use another widget in wxPython?</p>\n"},{"tags":["python","recursion"],"answer_count":3,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":115,"score":4,"question_id":13103965,"title":"solving fully parenthesized expressions with recursion","body":"<p>I am having trouble coming up with a recursive method that can solve fully parenthesized equations..such as <code>((3+2)/(1+4))</code>.  I was able to come up with a recursive solution for solving infix expressions like <code>+*+3421</code> using recursion, but for something like <code>((3+2)/(1+4))</code> I am a little stuck.</p>\n\n<pre><code>def evalPrefix(exp):\n    it = iter(exp)\n    return evalPrefixInner(it)\n\ndef evalPrefixInner(it):\n    item = it.next()\n    if isInt(item):\n        return int(item)\n    else: \n        operand1 = evalPrefixInner(it)\n        operand2 = evalPrefixInner(it)\n        return execute(item, operand1, operand2)\n</code></pre>\n"},{"tags":["python","py2exe"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":16,"score":1,"question_id":13236405,"title":"How to put files in folders using py2exe.","body":"<p><p>Hi!</p><p>I made a chess engine in python which i then compiled to .exe using py2exe. The problem is that it doesn't look very neat when i have all the strange files gathered together in the same folder (dist). I'd like to make a new folder inside the dist folder that contains all the helper files, so all my dist folder contains is the folder holding the helper files and the main launch application. However, i can't simply copy the helper files to a new folder, as the computer doesn't find them then and raises an error.</p></p>\n\n<p>How can it be solved? Also, i'm using inno setup to make an installation, but i can't figure out how to find a solution there, either.</p>\n\n<p>Thank you very much!</p>\n"},{"tags":["python","linux","windows","deployment"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":63,"score":2,"question_id":13236601,"title":"What deployment framework to use?","body":"<p>We are trying to figure out what deployment method/framework to use with a python application, it has a basic wsgi server to make some REST resources available and a set of static web pages with the interface that are served through apache.</p>\n\n<p><strong>The situation is as follows:</strong></p>\n\n<p>My team works in isolated parts of the program and sometimes together in specific modules, we have different testing servers and one master server, we all work locally, sync the code using git, and then run a bash script that copies the files from the windows machines to the indicated linux server(using ssh) and then restarts the app. After thinking about it this doesn't seem to be the right way to do it, the script overwrites all the files in the server with the local files everytime.</p>\n\n<p>We want to be able to work in the same server without the worry of overwriting other people's code and we need to deploy to different servers to avoid restarting the service while others work with it and in the near future we need to deploy to the master or several clones of the master server when the application reaches a more mature state.</p>\n\n<p>We found serveral options: capistrano, kwate, chef or fortress, even fleet but we wanted to have opinions from people that has used them to be sure it is what we need.</p>\n\n<p><strong>So this are the main questions:</strong></p>\n\n<ol>\n<li><p>Are these the kind of programs we should be looking at to achive a\nsafe concurrent deployment process?</p></li>\n<li><p>Which one have you used/recommend and why? do you think it would\nhelp in our actual situation?</p></li>\n</ol>\n\n<p>Thank you so much for your feedback and advice on this.</p>\n"},{"tags":["python","ruby","perl","security","penetration-testing"],"answer_count":13,"favorite_count":10,"up_vote_count":9,"down_vote_count":4,"view_count":2387,"score":5,"question_id":76408,"title":"Which of these scripting languages is more appropriate for pen-testing?","body":"<p>First of all, I want to avoid a flame-war on languages. The languages to choose from are Perl, Python and Ruby . I want to mention that I'm comfortable with all of them, but the problem is that I can't focus just on one. </p>\n\n<p>If, for example, I see a cool Perl module, I have to try it out. If I see a nice Python app, I have to know how it's made. If I see a Ruby DSL or some Ruby voodoo, I'm hooked on Ruby for a while.</p>\n\n<p>Right now I'm working as a Java developer, but plan on taking CEH in the near future. My question is: for tool writing and exploit development, which language do you find to be the most appropriate?</p>\n\n<p>Again, I don't want to cause a flame-war or any trouble, I just want honest opinions from scripters that know what they're doing.</p>\n\n<p>One more thing: maybe some of you will ask \"Why settle on one language?\". To answer this: I would like to choose only one language, in order to try to master it.</p>\n"},{"tags":["python","html","django","html5","twitter-bootstrap"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13168606,"title":"Passing value to Bootstrap modal in Django","body":"<p>I have a nice modal showing a delete confirmation dialog each time user wants to delete data. The problem is many of my views render a list of elements in the template, and each element has its detail as well as a tiny delete red button. Of course in django the view passes a list of elements to the template, for example a list of clients, and they are rendered in a table like the following:</p>\n\n<pre><code>&lt;table class=\"table table-striped\"&gt;  \n    &lt;thead&gt;  \n      &lt;tr&gt;\n        &lt;th&gt;Email&lt;/th&gt;\n      &lt;/tr&gt;  \n    &lt;/thead&gt;  \n    &lt;tbody&gt;\n      {% for client in clientes %}\n        &lt;tr&gt;  \n          &lt;td&gt;{{ client.email }}&lt;/td&gt;\n          &lt;td&gt;\n            &lt;div class=\"btn-group\"&gt;\n              &lt;!-- Delete button --&gt;\n              &lt;a href=\"#myModal\" class=\"btn btn-danger btn-mini\" title=\"Eliminar\"&gt;\n                &lt;i class=\"icon-trash icon-white\"&gt;&lt;/i&gt;&lt;/a&gt;\n            &lt;/div&gt;\n          &lt;/td&gt;\n        &lt;/tr&gt; \n      {% endfor %}\n    &lt;/tbody&gt;  \n</code></pre>\n\n<p> </p>\n\n<p>I would like to have a Bootstrap modal every time user presses on the delete-button to appear and confirm he is deleting some data. Now, I have managed to make the modal appear and delete the user, but not the correct user, modal somehow its only getting, or trying to delete the first user in the list. You can check my entire template with modal in the following link: <a href=\"http://pastie.org/5145275\" rel=\"nofollow\">FULL HTML</a></p>\n\n<p>In the end, my problem is somehow related to passing the correct {{ client }} to the modal and not the first one on the list of clients, I'm supposing that happens because of the first declared modal on the for and then does not declare it anymore.</p>\n\n<p>For example, I got 3 clients in the table:</p>\n\n<pre><code>client1@something.com         detele-button\nclient2@something.com         detele-button\nclient3@something.com         detele-button\n</code></pre>\n\n<p>No matter what client delete-button I press, it always shows the modal with client1 data, and actually erases it if press confirm delete.</p>\n\n<p>Thank you.</p>\n\n<p>edit1: href was not ok.</p>\n"},{"tags":["python","zip"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":73,"score":0,"question_id":12886768,"title":"Simple way to unzip file in Python on all OSes?","body":"<p>I've been looking around Stack Overflow et al, and I can't seem to find what I'm looking for. Is there a simple Python function that would allow unzipping a .zip file like so?: <code>unzip(ZipSource, DestinationDirectory)</code>\nSo far, what I've found requires 20 lines of cryptic for loops. If I need to def something like that, that's fine, but I need it to act the same on Windows, Mac and Linux: always produce a file if the zip is a file, directory if the zip is a directory, and directory if the zip is multiple files; always inside, not at, the given destination directory</p>\n\n<p>Bottom line (\"real question\"): How does one unzip a file in Python?</p>\n"},{"tags":["python","sqlalchemy"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":29,"score":1,"question_id":13224933,"title":"Return more then One field from database SQLAlchemy","body":"<p>This line:</p>\n\n<pre><code>used_emails = [row.email for row\n           in db.execute(select([halo4.c.email], halo4.c.email!=''))]\n</code></pre>\n\n<p>Returns:</p>\n\n<pre><code>['first.last@domain.com', 'first.last@domain.com', 'first.last@domain.com', 'first.last@domain.com', 'first.last@domain.com']\n</code></pre>\n\n<p>I use this to find a match:</p>\n\n<pre><code>if recipient in used_emails:\n</code></pre>\n\n<p>If it finds a match I need to pull another field (halo4.c.code) from the database in the same row. Any suggestions on how to do this?</p>\n"},{"tags":["python","string","list"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":2,"view_count":104,"score":1,"question_id":12135739,"title":"Add characters (',') every time a certain character ( , )is encountered ? Python 2.7.3","body":"<p>Let's say you had a string</p>\n\n<pre><code>test = 'wow, hello, how, are, you, doing'\n</code></pre>\n\n<p>and you wanted</p>\n\n<pre><code>full_list = ['wow','hello','how','are','you','doing']\n</code></pre>\n\n<p>i know you would start out with an empty list:</p>\n\n<pre><code>empty_list = []\n</code></pre>\n\n<p>and would create a for loop to append the items into a list</p>\n\n<p>i'm just confused on how to go about this,</p>\n\n<p>I was trying something along the lines of:</p>\n\n<pre><code>for i in test:\n    if i == ',':\n</code></pre>\n\n<p>then I get stuck . . . </p>\n"},{"tags":["python","r","google-scholar"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":85,"score":3,"question_id":13200709,"title":"Extract Google Scholar results using Python (or R)","body":"<p>I'd like to use python to scrape google scholar search results. I found two different script to do that, one is [<code>gscholar.py</code>](<a href=\"https://github.com/venthur/gscholar\" rel=\"nofollow\">link</a>) and the other is <code>scholar.py</code> (can that one be used as a python library?). </p>\n\n<p>Now, I should maybe say that I'm totally new to python, so sorry if I miss the obvious! </p>\n\n<p>The problem is when I use <code>gscholar.py</code> as explained in the README file, I get as a result </p>\n\n<p><code>query() takes at least 2 arguments (1 given)</code>. </p>\n\n<p>Even when I specify another argument (e.g. <code>gscholar.query(\"my query\", allresults=True)</code>, I get </p>\n\n<p><code>query() takes at least 2 arguments (2 given)</code>. </p>\n\n<p>This puzzles me. I also tried to specify the third possible argument (<code>outformat=4</code>; which is the BibTex format) but this gives me a list of function errors. A colleague advised me to import BeautifulSoup and <a href=\"http://code.activestate.com/recipes/523047-search-google-scholar/\" rel=\"nofollow\">this</a> before running the query, but also that doesn't change the problem. Any suggestions how to solve the problem?</p>\n\n<p>I found code for R (see <a href=\"http://www.github.com/gimoya/theBioBucket-Archives/blob/master/R/Functions/GScholarScraper_3.1.R\" rel=\"nofollow\">link</a>) as a solution but got quickly blocked by google. Maybe someone could suggest how improve that code to avoid being blocked? Any help would be appreciated! Thanks!</p>\n"},{"tags":["c++","python","parsing","clang"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":30,"score":2,"question_id":13236500,"title":"How to parse single file using Python bindings to Clang?","body":"<p>I am writing simple tool to help with refactoring source code of our application. I would like to parse C++ code based on wxWidgets library which defines GUI and produce XML .ui file to use with Qt. I need to get all function calls and value of arguments. Currently I am toying with Python bindings to Clang, using the example code below I get tokens and their kind and location, but cursor kind is always CursorKind.INVALID_FILE.</p>\n\n<pre><code>import sys\nimport clang.cindex\n\ndef find_typerefs(node):\n    \"\"\" Find all references to the type named 'typename'\n    \"\"\"\n\n    for t in node.get_tokens():\n        if not node.location.file != sys.argv[1]:\n            continue\n        if t.kind.value != 0 and t.kind.value != 1 and t.kind.value != 4:\n            print t.spelling\n            print t.location\n            print t.cursor.kind\n            print t.kind\n            print \"\\n\"\n\nindex = clang.cindex.Index.create()\ntu = index.parse(sys.argv[1])\nprint 'Translation unit:', tu.spelling\nfind_typerefs(tu.cursor)\n</code></pre>\n\n<p>What is the correct way to determine cursor kind?</p>\n\n<p>I couldn't find any documentation except few blog posts, but they were outdated or not covering this topic. I was neither unable to work it out from examples that came with clang .</p>\n"},{"tags":["c#","python","dll","ctypes"],"answer_count":1,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":246,"score":3,"question_id":10892567,"title":"Load DLL file and Call Functions in Python","body":"<p>I have the problem loading the DLL file and calling the functions in Python.\nI have tried a lot of tutorials, but still can't figure out how it works.\nThis is my class to export as DLL file. I use simple C# code.</p>\n\n<pre><code>namespace DemoClassLib\n{\n    public class cLib\n    {\n        public int increment(int x)\n        {\n            return x + 1;\n        }\n    }\n}\n</code></pre>\n\n<p>After building the C# code, I get the DLL file called \"DemoClassLib.dll\".\nI use ctypes to load the DLL file. Everything is okay until now.</p>\n\n<pre><code>from ctypes import *\nmyDll = WinDLL('D:\\\\Resources\\\\DemoClassLib\\\\bin\\\\Debug\\\\DemoClassLib.dll')\n</code></pre>\n\n<p>Starting from that point, I can't continue.\nAll the commands I have tried are failed.</p>\n\n<pre><code>n = c_int(1)\nmyDll.increment(n)\n</code></pre>\n\n<p>It keeps on showing me the errors.\nHow can I call the method \"increment()\" in Python?\nAnd how can I pass the input and retrieve the output from that?\nI am very new to Python.\nCan someone help me please?\nI would be very appreciated if you can provide me the source code tutorial.</p>\n"},{"tags":["python","sqlite"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":35,"score":3,"question_id":13235994,"title":"Supporting sqlite and sqlite3","body":"<p>I have an application that needs to support Python 2.4 and 2.6.  With 2.6, sqlite3 replaces sqlite.  Is there much else I need to worry about other than <code>paramstyle</code> differences?  Is this a decent way of handling that?</p>\n\n<pre><code>try:\n    import sqlite3 as sqlite\nexcept ImportError:\n    import sqlite\n\n...\n\nif sqlite.paramstyle == 'qmark':\n    query = 'SELECT foo FROM bar where baz = ?'\nelse:\n    query = 'SELECT foo FROM bar where baz = %s'\ncursor.execute(query, params)\n</code></pre>\n"},{"tags":["python","unicode","matplotlib","ipython","ipython-notebook"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13236086,"title":"Unicode in ipython notebook","body":"<p>I'm trying to get a \"degree\" sign (°) in a matplotlib plot from ipython notebook.</p>\n\n<p>When I run</p>\n\n<pre><code>ax = plt.gca()\nax.set_xlabel(\"something at 55\" + unicode(\"\\xc2\", errors='replace'))\nax.plot([0.,1.,], [0.,1.])\n</code></pre>\n\n<p>I get a plot, but instead of the degree sign, I have a strange black square with a question mark. This also happens when I try to <code>savefig</code> the figure to PDF.</p>\n\n<p>If I try to run</p>\n\n<pre><code>ax = plt.gca()\nax.set_xlabel(\"something at 55°\")\nax.plot([0.,1.,], [0.,1.])\n</code></pre>\n\n<p>I get an error (see below).</p>\n\n<p>Any idea what I'm doing wrong? </p>\n\n<pre><code>---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n/usr/lib/python2.7/dist-packages/IPython/zmq/pylab/backend_inline.pyc in show(close)\n    100     try:\n    101         for figure_manager in Gcf.get_all_fig_managers():\n--&gt; 102             send_figure(figure_manager.canvas.figure)\n    103     finally:\n    104         show._to_draw = []\n\n/usr/lib/python2.7/dist-packages/IPython/zmq/pylab/backend_inline.pyc in send_figure(fig)\n    188     \"\"\"\n    189     fmt = InlineBackend.instance().figure_format\n--&gt; 190     data = print_figure(fig, fmt)\n    191     # print_figure will return None if there's nothing to draw:\n\n    192     if data is None:\n\n/usr/lib/python2.7/dist-packages/IPython/core/pylabtools.pyc in print_figure(fig, fmt)\n    102     try:\n    103         bytes_io = BytesIO()\n--&gt; 104         fig.canvas.print_figure(bytes_io, format=fmt, bbox_inches='tight')\n    105         data = bytes_io.getvalue()\n    106     finally:\n\n/usr/lib/pymodules/python2.7/matplotlib/backend_bases.pyc in print_figure(self, filename, dpi, facecolor, edgecolor, orientation, format, **kwargs)\n   1981                     orientation=orientation,\n   1982                     dryrun=True,\n-&gt; 1983                     **kwargs)\n   1984                 renderer = self.figure._cachedRenderer\n   1985                 bbox_inches = self.figure.get_tightbbox(renderer)\n\n/usr/lib/pymodules/python2.7/matplotlib/backends/backend_agg.pyc in print_png(self, filename_or_obj, *args, **kwargs)\n    467 \n    468     def print_png(self, filename_or_obj, *args, **kwargs):\n--&gt; 469         FigureCanvasAgg.draw(self)\n    470         renderer = self.get_renderer()\n    471         original_dpi = renderer.dpi\n\n/usr/lib/pymodules/python2.7/matplotlib/backends/backend_agg.pyc in draw(self)\n    419 \n    420         try:\n--&gt; 421             self.figure.draw(self.renderer)\n    422         finally:\n    423             RendererAgg.lock.release()\n\n/usr/lib/pymodules/python2.7/matplotlib/artist.pyc in draw_wrapper(artist, renderer, *args, **kwargs)\n     53     def draw_wrapper(artist, renderer, *args, **kwargs):\n     54         before(artist, renderer)\n---&gt; 55         draw(artist, renderer, *args, **kwargs)\n     56         after(artist, renderer)\n     57 \n\n/usr/lib/pymodules/python2.7/matplotlib/figure.pyc in draw(self, renderer)\n    896         dsu.sort(key=itemgetter(0))\n    897         for zorder, a, func, args in dsu:\n--&gt; 898             func(*args)\n    899 \n    900         renderer.close_group('figure')\n\n/usr/lib/pymodules/python2.7/matplotlib/artist.pyc in draw_wrapper(artist, renderer, *args, **kwargs)\n     53     def draw_wrapper(artist, renderer, *args, **kwargs):\n     54         before(artist, renderer)\n---&gt; 55         draw(artist, renderer, *args, **kwargs)\n     56         after(artist, renderer)\n     57 \n\n/usr/lib/pymodules/python2.7/matplotlib/axes.pyc in draw(self, renderer, inframe)\n   1995 \n   1996         for zorder, a in dsu:\n-&gt; 1997             a.draw(renderer)\n   1998 \n   1999         renderer.close_group('axes')\n\n/usr/lib/pymodules/python2.7/matplotlib/artist.pyc in draw_wrapper(artist, renderer, *args, **kwargs)\n     53     def draw_wrapper(artist, renderer, *args, **kwargs):\n     54         before(artist, renderer)\n---&gt; 55         draw(artist, renderer, *args, **kwargs)\n     56         after(artist, renderer)\n     57 \n\n/usr/lib/pymodules/python2.7/matplotlib/axis.pyc in draw(self, renderer, *args, **kwargs)\n   1052         self._update_label_position(ticklabelBoxes, ticklabelBoxes2)\n   1053 \n-&gt; 1054         self.label.draw(renderer)\n   1055 \n   1056         self._update_offset_text_position(ticklabelBoxes, ticklabelBoxes2)\n\n/usr/lib/pymodules/python2.7/matplotlib/artist.pyc in draw_wrapper(artist, renderer, *args, **kwargs)\n     53     def draw_wrapper(artist, renderer, *args, **kwargs):\n     54         before(artist, renderer)\n---&gt; 55         draw(artist, renderer, *args, **kwargs)\n     56         after(artist, renderer)\n     57 \n\n/usr/lib/pymodules/python2.7/matplotlib/text.pyc in draw(self, renderer)\n    524         renderer.open_group('text', self.get_gid())\n    525 \n--&gt; 526         bbox, info = self._get_layout(renderer)\n    527         trans = self.get_transform()\n    528 \n\n/usr/lib/pymodules/python2.7/matplotlib/text.pyc in _get_layout(self, renderer)\n    303         baseline = 0\n    304         for i, line in enumerate(lines):\n--&gt; 305             clean_line, ismath = self.is_math_text(line)\n    306             if clean_line:\n    307                 w, h, d = get_text_width_height_descent(clean_line,\n\n/usr/lib/pymodules/python2.7/matplotlib/text.pyc in is_math_text(s)\n    987             return s, 'TeX'\n    988 \n--&gt; 989         if cbook.is_math_text(s):\n    990             return s, True\n    991         else:\n\n/usr/lib/pymodules/python2.7/matplotlib/cbook.pyc in is_math_text(s)\n   1836     except UnicodeDecodeError:\n   1837         raise ValueError(\n-&gt; 1838             \"matplotlib display text must have all code points &lt; 128 or use Unicode strings\")\n   1839 \n   1840     dollar_count = s.count(r'$') - s.count(r'\\$')\n\nValueError: matplotlib display text must have all code points &lt; 128 or use Unicode strings\n</code></pre>\n"},{"tags":["python","unit-testing","dynamic"],"answer_count":3,"favorite_count":5,"up_vote_count":13,"down_vote_count":0,"view_count":2169,"score":13,"question_id":1193909,"title":"Python's unittest and dynamic creation of test cases","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/32899/how-to-generate-dynamic-parametrized-unit-tests-in-python\">How to generate dynamic (parametrized) unit tests in python?</a>  </p>\n</blockquote>\n\n\n\n<p>Is there a way to dynamically create <code>unittest</code> test cases? I have tried the following..</p>\n\n<pre><code>class test_filenames(unittest.TestCase):\n\n    def setUp(self):\n        for category, testcases in files.items():\n            for testindex, curtest in enumerate(testcases):\n                def thetest():\n                    parser = FileParser(curtest['input'])\n                    theep = parser.parse()\n                    self.assertEquals(theep.episodenumber, curtest['episodenumber'])\n\n                setattr(self, 'test_%s_%02d' % (category, testindex), thetest)\n</code></pre>\n\n<p>..which creates all the methods correctly (they show up in <code>dir()</code> and are callable), but unittest's test detector, nor <code>nosetest</code> executes them (\"Ran 0 tests in ...\")</p>\n\n<p>Since I may be asking the wrong question - what I am trying to achieve:</p>\n\n<p>I have a file containing test data, a list of input filenames, and expected data (simplified to <code>episodenumber</code> in the above code), stored in a Python dictionary. The key is the category, the value is a list of test cases, for example..</p>\n\n<pre><code>test_cases = {}\ntest_cases['example_1'] = [\n    {'input': 'test.01',\n    'episodenumber': 1},\n    {'input': 'test.02',\n    'episodenumber': 2}\n]\n\ntest_cases['example_2'] = [\n    {'input': 'another.123',\n    'episodenumber': 123},\n    {'input': 'test.e42',\n    'episodenumber': 32}\n]\n</code></pre>\n\n<p>Currently I just loop over all the data, call <code>self.assertEquals</code> on each test. The problem is, if one fails, I don't see the rest of the failures as they are also grouped into one test, which aborts when an assertion fails.</p>\n\n<p>The way around this, I thought, would be to (dynamically) create a function for each test case, perhaps there is a better way?</p>\n"},{"tags":["python","google-app-engine"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":37,"score":0,"question_id":13206438,"title":"Google App Engine Update Issue","body":"<p>I am working on an application (python based), which is deployed on GAE, it was working fine till last day, but I can't seem to update any code on app engine since this morning, it is complaining about some sort of issue with password, I have double checked and email id and password are correct.</p>\n\n<p>here is the stack trace which I receive:</p>\n\n<pre>10:47 PM Cloning 706 static files.\n2012-11-03 22:47:07,913 WARNING appengine_rpc.py:542 ssl module not found.\nWithout the ssl module, the identity of the remote host cannot be verified, and\nconnections may NOT be secure. To fix this, please install the ssl module from\nhttp://pypi.python.org/pypi/ssl .\nTo learn more, see https://developers.google.com/appengine/kb/general#rpcssl \nPassword for user@gmail.com: 2012-11-03 22:47:07,913 ERROR appcfg.py:2266 An unexpected error occurred. Aborting. \nTraceback (most recent call last):\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appcfg.py\", line 2208, in DoUpload\n    missing_files = self.Begin()\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appcfg.py\", line 1934, in Begin\n    CloneFiles('/api/appversion/cloneblobs', blobs_to_clone, 'static')\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appcfg.py\", line 1929, in CloneFiles\n    result = self.Send(url, payload=BuildClonePostBody(chunk))\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appcfg.py\", line 1841, in Send\n    return self.rpcserver.Send(url, payload=payload, **self.params)\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appengine_rpc.py\", line 403, in Send\n    self._Authenticate()\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appengine_rpc.py\", line 543, in _Authenticate\n    super(HttpRpcServer, self)._Authenticate()\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appengine_rpc.py\", line 293, in _Authenticate\n    credentials = self.auth_function()\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appcfg.py\", line 2758, in GetUserCredentials\n    password = self.raw_input_fn(password_prompt)\nEOFError: EOF when reading a line\n10:47 PM Rolling back the update.\n2012-11-03 22:47:08,818 WARNING appengine_rpc.py:542 ssl module not found.\nWithout the ssl module, the identity of the remote host cannot be verified, and\nconnections may NOT be secure. To fix this, please install the ssl module from\nhttp://pypi.python.org/pypi/ssl .\nTo learn more, see https://developers.google.com/appengine/kb/general#rpcssl \nPassword for user@gmail.com: Traceback (most recent call last):\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\appcfg.py\", line 171, in \n    run_file(__file__, globals())\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\appcfg.py\", line 167, in run_file\n    execfile(script_path, globals_)\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appcfg.py\", line 4322, in \n    main(sys.argv)\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appcfg.py\", line 4313, in main\n    result = AppCfgApp(argv).Run()\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appcfg.py\", line 2599, in Run\n    self.action(self)\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appcfg.py\", line 4048, in __call__\n    return method()\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appcfg.py\", line 3065, in Update\n    self.UpdateVersion(rpcserver, self.basepath, appyaml)\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appcfg.py\", line 3047, in UpdateVersion\n    lambda path: self.opener(os.path.join(basepath, path), 'rb'))\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appcfg.py\", line 2267, in DoUpload\n    self.Rollback()\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appcfg.py\", line 2150, in Rollback\n    self.Send('/api/appversion/rollback')\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appcfg.py\", line 1841, in Send\n    return self.rpcserver.Send(url, payload=payload, **self.params)\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appengine_rpc.py\", line 403, in Send\n    self._Authenticate()\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appengine_rpc.py\", line 543, in _Authenticate\n    super(HttpRpcServer, self)._Authenticate()\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appengine_rpc.py\", line 293, in _Authenticate\n    credentials = self.auth_function()\n  File \"C:\\Program Files (x86)\\Google\\google_appengine\\google\\appengine\\tools\\appcfg.py\", line 2758, in GetUserCredentials\n    password = self.raw_input_fn(password_prompt)\nEOFError: EOF when reading a line\n2012-11-03 22:47:09 (Process exited with code 1)\n\nYou can close this window now.</pre>\n\n<p>Any Help will be appreciated.</p>\n\n<p>P.S, I have tried from command line as well as Google app engine launcher.</p>\n\n<p>Thanks</p>\n"},{"tags":["python","search","csv"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13235514,"title":"Compare a searchlist to each row of csv file using Python","body":"<p>I have a list of search items:</p>\n\n<pre><code>search = (\"EPP3424\", \"EPP5423\", \"EPP4567\", Continues... )\n</code></pre>\n\n<p>I want to check each row of a csv file where each row looks like this:</p>\n\n<pre><code>(\"1206502\", \"EPP5423\", \"97334343\")\nnext row...\n</code></pre>\n\n<p>If any of the items in the search list appear in the row of the csv, add that entire row to a new list.</p>\n\n<p>Problem is I can get it to only match one results, I can't seem to get it to loop over the items correctly.     </p>\n\n<pre><code>csvFile = open(fRoot + \"\\\\SearchEPP.csv\", 'r')\ntry:\n    csvReader = csv.reader(csvFile)\n    for row in csvReader:\n        if all(s in row for s in search):\n            print \"Match\"\n            allEPP.append(row)\n        else:\n            print \"no match\"\nfinally:\n    csvFile.close()\n</code></pre>\n\n<p>Python 2.6, Windows 7</p>\n\n<p>UPDATE: </p>\n\n<p>Here's what I tried doing based on your response, still only returns one record.</p>\n\n<pre><code>f = open(fRoot + \"\\\\EPP.txt\", \"r\")\n\nsearch = list()\nfor row in f:\n    search.append(row)\n\nsearch = set(search)   \n\n#search = (\"EPP2383\", \"EPP2384\")\n\nallEPP = list()\n\ncsvFile = open(fRoot + \"\\\\SearchEPP.csv\", 'r')\ntry:\n    csvReader = csv.reader(csvFile)\n    for row in csvReader:\n        if any(r in search for r in row):\n            print \"Match\"\n            allEPP.append(row)\n        else:\n            print \".\"\nfinally:\n    csvFile.close()\n</code></pre>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":6,"view_count":47,"score":-6,"question_id":13235850,"title":"python file testing","body":"<p>I have a task I am trying to do for a class and am very stuck. If someone could please guide me in the right direction...</p>\n\n<blockquote>\n  <p>The task:</p>\n  \n  <p>write a module containing a function to examine the contents of the\n  current working        directory and print out a count of how many\n  files have each extension (\".txt\", \".doc\", etc.)</p>\n  \n  <p>Write a separate module to verify by testing that the function gives\n  correct results.</p>\n</blockquote>\n\n<p>any help will be awesome, I have tried a couple different things using glob to get current drive, but the main issue I am having is how to actually test this...</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13235853,"title":"Check if a string is valid absolute path address format","body":"<p>I have a string which contains user input for a directory address on a linux system.  I need to check if it is properly formatted and <em>could</em> be an address in Python 2.6.  It's important to note that this is not on the current system so I can't check if it is there using os.path nor can I try to create the directories as the function will be run many times.</p>\n\n<p>These strings will always be absolute paths, so my first thought was to look for a leading slash. From there I wondered about checking if the rest of the string only contains valid characters and does not contain any double slashes.  This seems a little clunky, any other ideas?  Thanks in advance.</p>\n"},{"tags":["python","audio"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":47,"score":-3,"question_id":13234896,"title":"Modifying Sound in Python","body":"<p>Ive been trying to figure out this question, but I am a little confused.</p>\n\n<blockquote>\n  <p>Write a function <code>countValues(sound,lower,upper)</code> to count the number of sample values in the range <code>(lower,upper)</code>. If the number is 0, then print \"2The is no sample values in the range.\" Otherwise, print \"There are <strong>* sample values in this range.\" (*</strong> is the number of sample values in the range). </p>\n</blockquote>\n\n<p>If you use gettysburg10.wav, you will see the result.</p>\n\n<pre><code>&gt;&gt;&gt; countValues(sound, 1,10)\nThere are 7829 sample values in this range.\n&gt;&gt;&gt; countValues(sound, 1,100)\nThere are 49615 sample values in this range.\n&gt;&gt;&gt; countValues(sound, 10000,100000)\nThere is no sample value in this range.\n</code></pre>\n\n<p>I was not exactly sure what the upper and lower value range represents, and in what I have written so far I think mine is checking something with the indexs.  </p>\n\n<p>This is what I have so far</p>\n\n<pre><code>def countValues(sound,lower,upper):\n  for sample in range(getSampleValueAt(sound,lower), getSampleValueAt(sound,upper)):\n    print sample\n</code></pre>\n\n<p>I was just trying to get the right values to print first, then I will finish the rest of that part of the program.</p>\n\n<p>Here is the sound file -- <a href=\"http://www2.cs.uic.edu/~i101/SoundFiles/gettysburg10.wav\" rel=\"nofollow\">gettysburg10.wav</a></p>\n"},{"tags":["python","django","django-models","django-admin"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":77,"score":0,"question_id":13234023,"title":"How to save many to many field?","body":"<p>I want to count tags . I have Post model and tags model and post model has manytomany field to tags. When I want to add new post meanwhile I add tags for post , it has to increase tag count number.</p>\n\n<p>My Post and Tags model:</p>\n\n<pre><code>class Post(models.Model):\n\n    tags = models.ManyToManyField(Tag,blank=True,null=True,verbose_name=_('tags'))\n\n    def save(self)\n       super(Post, self).save()\n       for i in self.tags.all():\n       i.save() \n\nclass Tag(models.Model):\n\n    name=models.CharField(max_length=30,verbose_name=_('name'))\n    count = models.IntegerField(blank=True,null=True,default=0)\n    slug = models.SlugField(blank=True,null=True)\n\n    def save(self):\n       self.slug = slugify(self.name.upper())\n       self.count = Post.objects.filter(tags__name=self.name).count()\n       super(Tag, self).save()\n</code></pre>\n\n<p>When I added new post , I look up the tag model and see count number does not change but when I press the save button in Tags Admin then I see the real count. But I want to see real count when I look up the tag admin without pressing the save button in tag.</p>\n\n<p>Also I want that when I edit the post it should not increase the tags count again.</p>\n"},{"tags":["python","function","mirror"],"answer_count":3,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":52,"score":3,"question_id":12807712,"title":"Python function to mirror an image vertically from R to L","body":"<p>I am trying to write a python function to mirror the right half of a picture to the left half.  So far I have this code but it works in the opposite way (it mirrors from L to R)  I know it must be a few simple changes, but I just seem to have a block now.  Any help appreciated.</p>\n\n<pre><code>def mirrorVertical(source):\n  mirrorPoint = getWidth(source) / 2\n  width = getWidth(source)\n  for y in range(0,getHeight(source)):\n    for x in range(0,mirrorPoint):\n      leftPixel = getPixel(source,x,y)\n      rightPixel = getPixel(source,width - x - 1,y)\n      color = getColor(leftPixel)\n      setColor(rightPixel,color)\n</code></pre>\n"},{"tags":["python","elementtree"],"answer_count":2,"favorite_count":1,"up_vote_count":23,"down_vote_count":0,"view_count":8875,"score":23,"question_id":222375,"title":"ElementTree XPath - Select Element based on attribute","body":"<p>I am having trouble using the attribute XPath Selector in ElementTree, which I should be able to do according to the <a href=\"http://effbot.org/zone/element-xpath.htm\" rel=\"nofollow\">Documentation</a></p>\n\n<p>Here's some sample code</p>\n\n<p><strong>XML</strong></p>\n\n<pre><code>&lt;root&gt;\n &lt;target name=\"1\"&gt;\n    &lt;a&gt;&lt;/a&gt;\n    &lt;b&gt;&lt;/b&gt;\n &lt;/target&gt;\n &lt;target name=\"2\"&gt;\n    &lt;a&gt;&lt;/a&gt;\n    &lt;b&gt;&lt;/b&gt;\n &lt;/target&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p><strong>Python</strong></p>\n\n<pre><code>def parse(document):\n    root = et.parse(document)\n    for target in root.findall(\"//target[@name='a']\"):\n        print target._children\n</code></pre>\n\n<p>I am receiving the following Exception:</p>\n\n<pre><code>expected path separator ([)\n</code></pre>\n"},{"tags":["python","emacs"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":51,"score":1,"question_id":13224577,"title":"Drop-Down Autocompletion in Emacs' Python-Mode","body":"<p>I have installed python-mode and have auto-complete working with <code>M-Tab</code>, but when I execute it, the possible completions end up in my other open frame. Is there a way to get emacs to,</p>\n\n<ol>\n<li>Use a dropdown menu to show me potential completions (or a Vim-style quick-fix frame)</li>\n<li>Automatically fill in potential completions as I press <code>M-tab</code> over and over?</li>\n</ol>\n\n<p><strong>EDIT:</strong> After a bit of surfing I've realized that <a href=\"http://cx4a.org/software/auto-complete/\" rel=\"nofollow\">auto-complete</a> is the plugin I'm looking for (at least with respect to drop-down menus), but I'm still not sure how to get <code>python-mode</code>'s candidate detection into auto-complete.  I tried <code>ac-python</code>, but it seems like it was freezing emacs...</p>\n"},{"tags":["python","urllib2","urlopen"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":38,"score":-2,"question_id":13232203,"title":"Problems getting the page source with urlopen","body":"<p>The webplayer on this site <a href=\"http://rockantenne.de/webplayer\" rel=\"nofollow\">http://rockantenne.de/webplayer</a> has a playlist available with all the songs played so far on that day.</p>\n\n<p>When I am in <em>Firefox</em> and press Ctrl-U to see the source code of the page I can see all the songs played. However if I use <strong>urllib2.urlopen</strong> and then read() it, everything is the same except the songs are left out.</p>\n\n<p>Can anyone tell me what is the problem here?</p>\n\n<p>Thanks</p>\n"},{"tags":["iphone","python","script"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13234915,"title":"Change Iphone Photo filenames","body":"<p>Running into a much discussed issue in the Apple realm. I have 2 iPhones and the file name sequence is the same, so when I sync them to my laptop they overwrite each other or get the <code>photoname(2).jpg</code> structure. I know there isn't a way to change the actual iPhone settings but is there a script (I'm thinking python) where I can batch change the names of files when they sync to my laptop?</p>\n"},{"tags":["python","intersection","multiset"],"answer_count":2,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":101,"score":1,"question_id":12253361,"title":"Python list intersection with non unique items","body":"<p>I have two strings and I would like to have the intersection on them <em>including</em> duplicate items:</p>\n\n<pre><code>str_a = \"aabbcc\"\nstr_b = \"aabd\"\n\nlist(set(str_a) &amp; set(str_b))\n&gt;&gt; \"ab\"\n</code></pre>\n\n<p>I would like to have it return:</p>\n\n<pre><code>&gt;&gt; \"aab\"\n</code></pre>\n\n<p>Any ideas?</p>\n"},{"tags":["python","numpy","python-2.7"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13235187,"title":"fractional part of numpy array","body":"<p>I need to get only the fractional part of an array.\nusing numpy or simply python modf function is convenient.</p>\n\n<p>In case we big arrays of positive fractional data, that can be as big as (1000000,3) for instance, what is more convenient to do: </p>\n\n<pre><code>numpy.modf(array)[0]  \narray-numpy.trunc(array)\n</code></pre>\n\n<p>In my opinion 2 is faster and cheaper in memory usage ... but not sure. What do python and numpy experts think ?</p>\n"},{"tags":["c++","python","wrapper","cython"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13064527,"title":"Cython mapping c++ data structures","body":"<p>I'm using cython to wrap my C++ class:</p>\n\n<p><code>Foo.h</code></p>\n\n<pre><code>class Foo\n{\nprivate:\n    std::map&lt;int,int &gt; myMap;\n    std::vector&lt;int&gt; myVector;\npublic:\n    // An example of internal structures initialization\n    Foo()\n    {\n        for (int i=0; i&lt;10; i++)\n        {\n             myVector.push_back(i);\n             myMap[i]=i*i;\n        }\n    }\n    std::map&lt;int,int&gt; getMyMap()\n    {\n        return myMap;\n    }\n    std::vector&lt;int&gt; getMyVector()\n    {\n        return myVector;\n    }\n}\n</code></pre>\n\n<p>I'm wondering if there is some way to get the <code>std::map</code> as python <code>dict</code> and the std::vector as python <code>list</code> without explicitly creating (and thus wasting memory) copies of such structures.</p>\n\n<p>A temptative implementation for the std::vector is the following:</p>\n\n<pre><code>cdef extern from \"Foo.h\":\n    cdef cppclass Foo:\n    Foo()\n    vector[int]  getMyVector()\n\n\ncdef class pyFoo:\ncdef Foo *thisptr      # hold a C++ instance which we're wrapping\ndef __cinit__(self):\n    self.thisptr = new Foo()\n\ndef getMyVector(self):\n    cdef vector[int] aa\n    cdef int N\n    b= []\n    aa = self.thisptr.getMyVector()\n    N=aa.size()\n    for i in range(N):\n        b.append(aa[i])\n    return b;\n</code></pre>\n\n<p>But this clearly must store two structures containing the same data. I'm wondering if there is a way to map from c++ to list with cython or should I use boost::python?</p>\n"},{"tags":["python","flask","neo4j","py2neo"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13233107,"title":"using neo4J (server) from python with transaction","body":"<p>I'm currently building a web service using python / flask and would like to build my data layer on top of neo4j, since my core data structure is inherently a graph.\nI'm a bit confused by the different technologies offered by neo4j for that case. Especially : </p>\n\n<p>1/ i originally planned on using the REST Api through py2neo , but the lack of transaction is a bit of a problem.</p>\n\n<p>2/ The \"embedded database\" neo4j doesn't seem to suit my case very well. I guess it's useful when you're working with batch and one-time analytics, and don't need to store the database on a different server from the web server.</p>\n\n<p>3/ I've stumbled upon the neo4django project, but i'm not sure this one offers transaction support (since there are no native client to neo4j for python), and if it would be a problem to use it outside django itself. In fact, after having looked at the project's documentation, i feel like it has exactly the same limitations, aka no transaction (but then, how can you build a real-world service when you can corrupt your model upon a single connection timeout ?). I don't even understand what is the use for that project.</p>\n\n<p>Could anyone could recommend anything ? I feel completely stuck.</p>\n\n<p>Thanks</p>\n"},{"tags":["python"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13234792,"title":"python's function-attributes: getting a list/dict of all assigned attributes","body":"<p>Out of pure curiosity: Is there an easy way (not more then two lines of code) to access the dictionary/list of assigned attributes of a function (from within that function)?</p>\n\n<p>e.g.:</p>\n\n<pre><code>def func(*args):\n    print(\"# of arguments = {0} \".format(len(args)))       # normal arguments\n    print(\"# of attributes = {0}\".format(len(func_attrs))) # function-attributes\n\nfunc()\n\nfunc.func_attr_1 = 'How do i get all attributes from within the associated function?'\nfunc.func_attr_2 = 'How do i get all attributes from within the associated function?'\n</code></pre>\n\n<p>Since functions are callable objects it's possible to provide them with attributes, but\nthere doesn't seem to bee a way to access a list of these attributes in an easy way.</p>\n\n<p><code>locals()</code> and <code>globals()</code> weren't helpful.\n<code>dir()</code> seems to do the trick, BUT you have to filter your attributes. Thats's somewhat inconvenient if you don't know the attribute-name in advance.</p>\n\n<p>If i can assign an attribute there must .. should be a way to access their directory from within.</p>\n\n<p><strong>UPDATE</strong>:</p>\n\n<p>i totaly forgot to actually call/invoke = instantiate the function before trying to access the attributes. ... my bad! - sry and thx for the answers ;-)</p>\n\n<p>naturally i tried <code>func.__dict__</code> and <code>dir(func)</code>, but just didn't instantiate the function-object before doing so ... and in my original test i initially defined a attribute from within the function, then didn't call the function, but tried to access the function-attribute from the outer-scope - which naturally failed! </p>\n"},{"tags":["python","pickle"],"answer_count":8,"favorite_count":11,"up_vote_count":12,"down_vote_count":0,"view_count":12069,"score":12,"question_id":890485,"title":"Python: How do I write a list to file and then pull it back into memory (dict represented as a string convert to dict) later?","body":"<p>More specific dupe of <a href=\"http://stackoverflow.com/questions/875228/simple-data-storing-in-python\">875228—Simple data storing in Python</a>.</p>\n\n<p>I have a rather large dict (6 GB) and I need to do some processing on it.  I'm trying out several document clustering methods, so I need to have the whole thing in memory at once.  I have other functions to run on this data, but the contents will not change.</p>\n\n<p>Currently, every time I think of new functions I have to write them, and then re-generate the dict.  I'm looking for a way to write this dict to a file, so that I can load it into memory instead of recalculating all it's values.</p>\n\n<p>to oversimplify things it looks something like:\n    {((('word','list'),(1,2),(1,3)),(...)):0.0, ....}</p>\n\n<p>I feel that python must have a better way than me looping around through some string looking for : and ( trying to parse it into a dictionary.</p>\n"},{"tags":["php","python","ruby","jvm","scalability"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":10,"view_count":105,"score":-10,"question_id":13234946,"title":"Why All JVM languages are highly salable than other","body":"<p>I always heard that the JVM languages you can scale it as you want, and when people talk about performance the JVM languages come on top (scala, or even native java) rather than Ruby,PHP and python (am not sure regarding python maybe you can scale as you want).</p>\n\n<p>I think Native java code is faster than scala and other JVM language but scala become popular cause they combine(functional and Object Oriented) </p>\n"},{"tags":["python","string"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":105,"score":-2,"question_id":13234463,"title":"Basic python string","body":"<p>We just started working with string in my CSCI class, but I'm confused with a recent assignment.  </p>\n\n<blockquote>\n  <p>You are given a long string: </p>\n</blockquote>\n\n<pre><code>\"\"\"Justin$Calculus$90$Java$85$Python88$\nTaylor$Calculus$73$Java$95$Python86$\nDrew$Calculus$80$Java$75$Python94$\n\"\"\"\n</code></pre>\n\n<blockquote>\n  <p>The string has three lines. It contains three students’ scores of\n  three courses. Write a function <code>findScore(student, subject)</code>. When\n  you call the function such as <code>findScore(‘Drew’,’Java’)</code>, the function\n  prints <code>“Drew got 75 of the course Java.”</code> </p>\n  \n  <p>In addition to the function <code>findScore(student, subject)</code>, you can\n  write other functions. All the functions are inside one program.</p>\n</blockquote>\n\n<p>I would assume that I need to assign this string to a variable, but do I use one variable, or one for each line?</p>\n\n<p>Any ideas of a start would be greatly appreciated. I'm new to python so bear with me. Also, what is the significance of the <code>$</code> signs? </p>\n"},{"tags":["c#","python","linux","mono","serial-port"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":42,"score":1,"question_id":13206524,"title":"Error with high baud rates using SerialPort on Mono Linux","body":"<p>I have to communicate in Mono with a device through FTDI RS485 connector (which has usual comport software interface) on 1000000 baud rate. OS - Linux (Ubuntu... Mint13 to be particular), mono 2.10.2.</p>\n\n<p>First I run simple python test program on Linux:</p>\n\n<pre><code> &gt;&gt; import serial\n &gt;&gt; ser = serial.Serial(\"/dev/ttyUSB0\",1000000, timeout=0.5)\n &gt;&gt; ser.write(\":DCS3FF8;\")   # Some message to the device with crc\n &gt;&gt; ser.readall()\n ':CDS P0 M0 E0 L1 S07B3B;'  #This is the correct response from the device\n\n &gt;&gt; print ser\n Serial&lt;id=0x2ce71d0, open=True&gt;(port='/dev/ttyUSB0', baudrate=1000000, bytesize=8, parity='N', stopbits=1, timeout=0.5, xonxoff=False, rtscts=False, dsrdtr=False)\n</code></pre>\n\n<p>The device responds correctly. Everything works fine. This shows that everything is running fine on Linux.</p>\n\n<p>Then I exit python and try to use Mono with code:</p>\n\n<pre><code>     var serialPort = new SerialPort();\n     serialPort.PortName = \"/dev/ttyUSB0\";\n     serialPort.BaudRate = 1000000;\n\n     serialPort.Open();\n     serialPort.Write(\":DCS3FF8;\");\n     Thread.Sleep(150);\n     Console.WriteLine(\"BytesToRead: '{0}'\", serialPort.BytesToRead);\n     Console.WriteLine(\"Existing   : '{0}'\", serialPort.ReadExisting());\n</code></pre>\n\n<p>Compile and run it with command:</p>\n\n<pre><code>     dmcs serial_try.cs &amp;&amp; mono serial_try.exe\n</code></pre>\n\n<p>And get TimeoutException,  serialPort.BytesToRead is 0. At the same time I see that the connector is flashing with both lights (something is transferring). </p>\n\n<p>When I run <strong>the same code on .NET on Windows</strong>, it <strong>successfully communicates</strong> with the device and receive the same message as with python. </p>\n\n<p>So what is the catch with SerialPort on mono? Do I miss some setting or configuration? </p>\n"},{"tags":["python","activemq","stomp"],"answer_count":2,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":917,"score":3,"question_id":6234630,"title":"activemq how to configure to work with stomp in python","body":"<p>I have activemq installed and running locally, but when I run the following script, I get an error:  </p>\n\n<pre><code>\n#!/usr/bin/env python\n\nimport time\nimport sys\nimport stomp\n\nclass MyListener(object):\n    def on_error(self, headers, message):\n        print 'received an error %s' % message\n    def on_message(self, headers, message):\n        print 'received a message %s' % message\n\nconn = stomp.Connection(host_and_ports=[('localhost', 61616)])\nconn.set_listener('', MyListener())\nconn.start()\nconn.connect()\nconn.subscribe(destination='/home/bitcycle/svn/cass/queue.test', ack='auto')\nconn.send('Test', destination='/home/bitcycle/svn/cass/queue.test')\ntime.sleep(2)\nconn.disconnect()\n</code></pre>\n\n<p>error:</p>\n\n<p>./proc.py </p>\n\n<pre><code>\nNo handlers could be found for logger \"stomp.py\"\nTraceback (most recent call last):\n  File \"./proc.py\", line 20, in \n    conn.disconnect()\n  File \"/usr/local/lib/python2.7/dist-packages/stomp.py-3.0.3-py2.7.egg/stomp/connect.py\", line 387, in disconnect\n    self.__send_frame_helper('DISCONNECT', '', utils.merge_headers([self.__connect_headers, headers, keyword_headers]), [ ])\n  File \"/usr/local/lib/python2.7/dist-packages/stomp.py-3.0.3-py2.7.egg/stomp/connect.py\", line 453, in __send_frame_helper\n    self.__send_frame(command, headers, payload)\n  File \"/usr/local/lib/python2.7/dist-packages/stomp.py-3.0.3-py2.7.egg/stomp/connect.py\", line 489, in __send_frame\n    raise exception.NotConnectedException()\nstomp.exception.NotConnectedException\n</code></pre>\n\n<p>Can someone help me to understand what i need to do to get this to work?  I would like to use activemq for inter-process communication.</p>\n"},{"tags":["python","encoding","ascii"],"answer_count":5,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":325,"score":0,"question_id":7456758,"title":"How to find a non-ascii byte in my code?","body":"<p>While making my App Engine app I suddenly ran into an error which shows every couple of requests:</p>\n\n<pre><code>    run_wsgi_app(application)\n  File \"/home/ubuntu/Programs/google/google_appengine/google/appengine/ext/webapp/util.py\", line 98, in run_wsgi_app\n    run_bare_wsgi_app(add_wsgi_middleware(application))\n  File \"/home/ubuntu/Programs/google/google_appengine/google/appengine/ext/webapp/util.py\", line 118, in run_bare_wsgi_app\n    for data in result:\n  File \"/home/ubuntu/Programs/google/google_appengine/google/appengine/ext/appstats/recording.py\", line 897, in appstats_wsgi_wrapper\n    result = app(environ, appstats_start_response)\n  File \"/home/ubuntu/Programs/google/google_appengine/google/appengine/ext/webapp/_webapp25.py\", line 717, in __call__\n    handler.handle_exception(e, self.__debug)\n  File \"/home/ubuntu/Programs/google/google_appengine/google/appengine/ext/webapp/_webapp25.py\", line 463, in handle_exception\n    self.error(500)\n  File \"/home/ubuntu/Programs/google/google_appengine/google/appengine/ext/webapp/_webapp25.py\", line 436, in error\n    self.response.clear()\n  File \"/home/ubuntu/Programs/google/google_appengine/google/appengine/ext/webapp/_webapp25.py\", line 288, in clear\n    self.out.seek(0)\n  File \"/usr/lib/python2.7/StringIO.py\", line 106, in seek\n    self.buf += ''.join(self.buflist)\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xd7 in position 208: ordinal not in range(128)\n</code></pre>\n\n<p>I really have no idea where this could be, it only happens when I use a specific function but it's impossible to track all string I have.\nIt's possible this byte is a character like <code>' \" [ ]</code> etc, but only in another language</p>\n\n<p>How can I find this byte and possibly other ones?</p>\n\n<p>I am running GAE with python 2.7 in ubuntu 11.04</p>\n\n<p>Thanks.</p>\n\n<p><strong>*updated*</strong></p>\n\n<p>This is the code I ended up using:\n    from codecs import BOM_UTF8\n    from os import listdir, path\n    p = \"path\"</p>\n\n<pre><code>def loopPath(p, times=0):\n    for fname in listdir(p):\n        filePath = path.join(p, fname)\n        if path.isdir(filePath):\n            return loopPath(filePath, times+1)\n\n        if fname.split('.', 1)[1] != 'py': continue\n\n        f = open(filePath, 'r')\n        ln = 0\n        for line in f:\n            #print line[:3] == BOM_UTF8\n            if not ln and line[:3] == BOM_UTF8:\n                line = line[4:]\n            col = 0\n            for c in list(line):\n                if ord(c) &gt; 128:\n                    raise Exception('Found \"'+line[c]+'\" line %d column %d in %s' % (ln+1, col, filePath))\n                col += 1\n            ln += 1\n        f.close()\n\nloopPath(p)\n</code></pre>\n"},{"tags":["python","unicode","python-2.x"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13233436,"title":"How to concatenate multiple unicode string?","body":"<p>I have two unicode string <code>'가'</code> and <code>'ㄱ'</code> and I want to concatenate them to get <code>\"가ㄱ\"</code></p>\n\n<p>This is my code:</p>\n\n<pre><code>output1 = unicodeQueue(self.queue) # first unicode result\noutput2 = unicodeQueue(self.bufferQueue) # second unicode result\nsequence = [output1, output2]\nprint sequence\noutput = ''.join(sequence)\nreturn output\n</code></pre>\n\n<p>And this is the output I'm getting:</p>\n\n<pre><code>[u'\\uac00', u'\\u3131']\nㄱ가가ㄱ가\n</code></pre>\n\n<p>I don't know why it doesn't produce correct result, can anyone help me with this?</p>\n"},{"tags":["python","oracle","cx-oracle"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13234196,"title":"\"error: cannot locate an Oracle software installation\" When trying to install cx_Oracle","body":"<p>Newbie here trying to use python to do some database analysis.  I keep getting the error:\n\"error: cannot locate an Oracle software installation\"  When installing CX_oracle (via easy_install).</p>\n\n<p>The problem is I do not have oracle on my local machine, I'm trying to use python to connect to the main oracle server. I have have setup another program to do this(visualdb) and I had a .jar file I used as the driver but I'm not sure how to use it in this case.</p>\n\n<p>Any suggestions?</p>\n"},{"tags":["python","orm","sqlalchemy","metadata"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13234137,"title":"Get the relationship metadata from sqlalchemy","body":"<p>I have a very simple User class definition:</p>\n\n<pre><code>class User(Base):\n    implements(interfaces.IUser)\n    __tablename__ = 'users'\n    #Fields description\n    id = Column(Integer, primary_key=True)\n\n    client_id = Column(Integer, ForeignKey('w2_client.id'))\n    client = relationship(\"Client\", backref=backref('users', order_by=id))\n</code></pre>\n\n<p>I want to generate automatically a GUI to edit the object User (and other type of class). So I need to get all the meta data of the table, for example, I can do:</p>\n\n<pre><code>    for c in User.__table__.columns:\n        print c.name, c.type, c.nullable, c.primary_key, c.foreign_keys\n</code></pre>\n\n<p>But I can not get any information about the relationship \"client\", the c.foreign_keys just shows me the table related to the foreign_keys but not the attribute \"client\" I've defined.\nPlease let me know if my question is not clear</p>\n"},{"tags":["python","youtube","history","gdata"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":24,"score":1,"question_id":13233487,"title":"watch History feed gdata python","body":"<p>I'm trying to get history feed from YouTube of an authenticated user with python. \nThis is my code :</p>\n\n<pre><code>yt_service = gdata.youtube.service.YouTubeService()\ndef LogIn():\n  login_name = raw_input('Email:')\n  login_pass = getpass.getpass()\n  try:\n    yt_service.email = login_name\n    yt_service.password = login_pass\n    yt_service.ProgrammaticLogin()\n  except:\n    print 'False username or password. Unable to authenticate.'\n    exit();\n\ndef GetHistoryFeed():\n  uri = 'https://gdata.youtube.com/feeds/api/users/default/watch_history?v=2'\n  feed = yt_service.GetYouTubeVideoFeed(uri)\n  #PrintVideoFeed(yt_service.GetYouTubeVideoFeed(uri),'history')\n\nLogIn()\n\nGetHistoryFeed() \n</code></pre>\n\n<p>and it says gdata.service.RequestError: {'status': 400, 'body': 'Invalid request URI', 'reason': 'Bad Request'} . I know I have to make a authenticated Get request , but i don't know how. What am I doing wrong ? </p>\n"},{"tags":["python","python-2.7","memoization"],"answer_count":3,"favorite_count":3,"up_vote_count":9,"down_vote_count":0,"view_count":166,"score":9,"question_id":11815873,"title":"memoization library for python 2.7","body":"<p>I see that python 3.2 has memoization as a decorator in functools library. \n<a href=\"http://docs.python.org/py3k/library/functools.html#functools.lru_cache\">http://docs.python.org/py3k/library/functools.html#functools.lru_cache</a></p>\n\n<p>Unfortunately it is not yet backported to 2.7. Is there any specific reason as why it is not available in 2.7? Is there any 3rd party library providing the same feature or should I write my own? </p>\n"},{"tags":["python","optimization","code-efficiency"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":74,"score":1,"question_id":13232936,"title":"Python combinations of 2 lists","body":"<p>What is the <code>pythonic</code> way to calculated all the product combinations of two lists. So given two lists of length <code>n</code> I'd liked to return a list of length <code>2^n</code> containing the products. </p>\n\n<p>Like <code>list(itertools.product(on,off))</code> but the results should use all four elements not only combination pairs like:</p>\n\n<pre><code>[(1.05, 5.53), (1.05, 3.12), (1.05, 3.75), (1.05, 4.75), (1.5, 5.53), (1.5, 3.12), (1.5, 3.75), (1.5, 4.75), (2.1, 5.53), (2.1, 3.12), (2.1, 3.75), (2.1, 4.75), (1.7, 5.53), (1.7, 3.12), (1.7, 3.75), (1.7, 4.75)]\n</code></pre>\n\n<p>So more like this:</p>\n\n<pre><code>off = [5.53,3.12,3.75,4.75]\non = [1.05,1.5,2.1,1.7]\n\n# calculate combinations\nx = combinations(on,off)\n\n# Where... \n# x[0] = off[0] * off[1] * off[2] * off[3] i.e\n# x[0] = 5.53 * 3.12 * 3.75 * 4.75\n#\n# x[1] = off[0] * off[1] * off[2] * on[3] i.e\n# x[1] = 5.53 * 3.12 * 3.75 * 1.7\n#\n# x[2] = off[0] * off[1] * on[2] * on[3] i.e\n# x[2] = 5.53 * 3.12 * 2.1 * 1.7\n#\n# ...\n#\n# x[15] = on[0] * on[1] * on[2] * on[3] i.e\n# x[15] = 1.05 * 1.5 * 2.1 * 1.7\n</code></pre>\n\n<p>The output can be similar to the <code>itertools.product()</code> method <em>i.e</em> <code>[(5.53, 3.12, 3.75, 4.75),(5.53, 3.12, 3.75, 1.7), ...]</code>  I need to calculate the product but I'm interesting in the combination method. </p>\n\n<p><em>Note:</em> When I say <code>pythonic</code> way of doing this I mean a simple one or two lines taking advantage of pythons structures, libraries <em>(itertools ect)</em>. </p>\n"},{"tags":["python","project-euler"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":60,"score":-3,"question_id":13232721,"title":"Is there any better solution for projecteuler 15?","body":"<p>my code is like this which work too long for rows and cols > 15, is there any better solutions ? \nProblem link: <a href=\"https://projecteuler.net/problem=15\" rel=\"nofollow\">https://projecteuler.net/problem=15</a></p>\n\n<pre><code>#!/usr/bin/env python\nrows = 3\ncols = 3\nstart_row = 0\nstart_col = 0\ncount = 0\n\ndef trace(row, col):\n    if row == rows and col == cols:\n        global count\n        count += 1\n        return \n    if col + 1 &lt;= cols:\n        # print row, col\n        trace(row, col + 1)\n\n    if row + 1 &lt;= rows:\n        # print row, col\n        trace(row + 1, col)\n\ntrace(start_row, start_col)\nprint count\n</code></pre>\n"},{"tags":["python","string","list","quotes"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":60,"score":0,"question_id":13227313,"title":"Python convert a long string to a list without single quotes","body":"<p>I have a long string that I want store it as a list. But it always has single quotes at the beginning and the end. How to remove them? Thanks.</p>\n\n<p>Samples</p>\n\n<pre><code>&gt;&gt;&gt; string\n&gt;&gt;&gt; '\"2012-11-05\", \"filename\", 1, 2, 3, 4, 5, 6, 7, 0.11, 0.22, 0.33'\n&gt;&gt;&gt; string.split(\"'\")\n&gt;&gt;&gt; ['\"2012-11-05\", \"filename\", 1, 2, 3, 4, 5, 6, 7, 0.11, 0.22, 0.33']\n</code></pre>\n\n<p>Question is how can I get result like this below without single quotes?</p>\n\n<pre><code>&gt;&gt;&gt; [\"2012-11-05\", \"filename\", 1, 2, 3, 4, 5, 6, 7, 0.11, 0.22, 0.33]\n</code></pre>\n"},{"tags":["python","import"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13233931,"title":"Python: Disabling relative import","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1900189/how-to-access-a-standard-library-module-in-python-when-there-is-a-local-module-w\">How to access a standard-library module in Python when there is a local module with the same name?</a>  </p>\n</blockquote>\n\n\n\n<p>I'm using Python 2.6.</p>\n\n<p>I only use absolute imports in my application. Now I have this:</p>\n\n<pre><code>myapp \n  |\n   -- myscript \n   -- json\n        |\n         -- anotherscript.py\n</code></pre>\n\n<p>In myscript, I have:</p>\n\n<pre><code>import json\nimport myapp.json.anotherscript\n</code></pre>\n\n<p>Because of Python relative import mechanism, import json does not import the built-in library as I want, but my custom json package into current namespace. </p>\n\n<p>Is there a way to disable relative imports in Python or at least a hack to avoid it in this case? Otherwise, i'll have to rename my package to something else that does not make so much sense as jsonutils.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["python","matplotlib"],"answer_count":4,"favorite_count":25,"up_vote_count":18,"down_vote_count":0,"view_count":14491,"score":18,"question_id":2369492,"title":"Generate a heatmap in MatPlotLib using a scatter data set","body":"<p>I have a set of X,Y data points (about 10k) that are easy to plot as a scatter plot but that I would like to represent as a heatmap.</p>\n\n<p>I looked through the examples in MatPlotLib and they all seem to already start with heatmap cell values to generate the image.</p>\n\n<p>Is there a method that converts a bunch of x,y, all different, to a heatmap (where zones with higher frequency of x,y would be \"warmer\")?</p>\n"},{"tags":["python","csv","data"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13222933,"title":"Parsing through CSV using DictReader in Python","body":"<p>I have a large CSV file with many columns, something like this:</p>\n\n<pre><code>id, col1, col2, col3, col4, col5\n1, a, b, 2, d, e\n2, b, c, 4, e, f\n3, c, d, 6, f, g\n</code></pre>\n\n<p>I want to be able to create a dictionary in which only certain columns are used. For example, the dictionary would have the id number, col2, and col3. Additionally, it should only store the rows that have the highest 10 numbers in col2. This is the code I have:</p>\n\n<pre><code>import csv \nreader = csv.DictReader(open('SNPs.csv', newline=''), delimiter=',', quotechar='\"')\n</code></pre>\n\n<p>But I do not know how to tell it to ignore certain columns, and I don't think that I can use max() to return multiple values.</p>\n\n<pre><code>max(2, 4) returns 4. \n</code></pre>\n\n<p><strong>EDIT</strong>\nI tried using Daniel's Code, but for some reason the sort function isn't working correctly. (I also need to use reverse sort instead of sort). It only outputs four different keys, and additionally, they aren't actually sorted in descending numerical order. It also returns the headers as one of the values. </p>\n\n<pre><code>import csv\nf = open('SNPs.csv', \"rU\")\nreader = csv.reader(f)\noutput = [row for row in reader]\noutput.sort(key=lambda x: x[32], reverse=True)\nprint dict((row[10], (row[11], row[8], row[32])) for row in output[:10])\n</code></pre>\n"},{"tags":["python","currying","with-statement"],"answer_count":5,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":70,"score":1,"question_id":13210785,"title":"Currying using python with-statement?","body":"<p>I am not sure if this is 'good python practice', but would it be possible to, say, define a custom File-object that could do something like:</p>\n\n<pre><code>myfile = myopen('myfile.txt')\nwith myfile:\n    write('Hello World!') #notice we don't put \"myfile.write(..)\" here!\n</code></pre>\n\n<p>i.e the File-context creates a <i>function</i> \"write()\" so that we don't have to type myfile.write(..) etc. It saves typing and makes the purpose clearer in some cases. For instance:</p>\n\n<pre><code>myboard = ChessBoard()\nwith ChessBoard():\n    make_move(\"e4\")\n    make_move(\"e5\")\n    give_up()\n</code></pre>\n\n<p>as opposed to</p>\n\n<pre><code>myboard = ChessBoard()\nwith ChessBoard():\n    make_move(\"e4\",board=myboard)\n    make_move(\"e5\",board=myboard)\n    give_up(board=myboard)\n</code></pre>\n\n<p>The question is: should I do this? and HOW can I do it? I am guessing I would have to modify the globals()-dict somehow, but that seems like a bad idea..</p>\n\n<p>EDIT: Ok thanks! I got multiple good answers advising me not to do this. So I won't do it :o)</p>\n"},{"tags":["android","python","sl4a"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":98,"score":1,"question_id":8666245,"title":"Displaying different characters instead of special characters","body":"<p>I am new to sl4a. My problem is that when I type following characters (special characters except <code>@</code>) from keyboard in python interpreter in android emulator, it displays the unexpected characters.</p>\n\n<p>When I type <code>shift+1(!)</code> it displays <code>^[0P</code> and following:</p>\n\n<pre><code>shift+3(#) =&gt; ^[0R\nshift+4($) =&gt; ^[0S\nshift+5(%) =&gt; ^[[15~\nshift+6(^) =&gt; ^[[17~\nshift+7(&amp;) =&gt; ^[[18~\nshift+8(*) =&gt; ^[[19~\nshift+9[(] =&gt; ^[[20~\nshift+0()) =&gt; ^[[21~ \n</code></pre>\n\n<p>Why the interpreter is displaying the unexpected characters (as mentioned above)?\nPlease help me to get rid of the problem.</p>\n"},{"tags":["python","numpy","fft"],"answer_count":4,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":1190,"score":1,"question_id":5398304,"title":"Fourier transform of a Gaussian is not a Gaussian, but thats wrong! - Python","body":"<p>I am trying to utilize Numpy's fft function, however when I give the function a simple gausian function the fft of that gausian function is not a gausian, its close but its halved so that each half is at either end of the x axis.</p>\n\n<p>The Gaussian function I'm calculating is \ny = exp(-x^2)</p>\n\n<p>Here is my code:</p>\n\n<pre><code>from cmath import *\nfrom numpy import multiply\nfrom numpy.fft import fft\nfrom pylab import plot, show\n\n\"\"\" Basically the standard range() function but with float support \"\"\"\ndef frange (min_value, max_value, step):\n    value = float(min_value)\n    array = []\n    while value &lt; float(max_value):\n        array.append(value)\n        value += float(step)\n    return array\n\n\nN = 256.0 # number of steps\ny = []\nx = frange(-5, 5, 10/N)\n\n# fill array y with values of the Gaussian function   \ncache = -multiply(x, x)\nfor i in cache: y.append(exp(i))\n\nY = fft(y)\n\n# plot the fft of the gausian function\nplot(x, abs(Y))\nshow()\n</code></pre>\n\n<p>The result is not quite right, cause the FFT of a Gaussian function should be a Gaussian function itself...</p>\n"},{"tags":["android","python","twitter","sl4a","tweepy"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":94,"score":0,"question_id":10938261,"title":"How to use tweepy module with sl4a and py4a?","body":"<p>I am trying to build a twitter client written in python using tweepy and make it run on sl4a (using py4a) on Android. But i seem to fail to import tweepy module in my main script. The script does not run. Please tell me the correct way to use tweepy in sl4a because copy-pasting the tweepy directory in sl4a's scripts directory does not work.</p>\n"},{"tags":["python","arrays","numpy"],"answer_count":4,"favorite_count":0,"up_vote_count":10,"down_vote_count":0,"view_count":1381,"score":10,"question_id":5891410,"title":"numpy array initialization (fill with identical values)","body":"<p>I need to create a numpy array of length <code>n</code>, each element of which is <code>v</code>.</p>\n\n<p>Is there anything better than:</p>\n\n<pre><code>a = empty(n)\nfor i in range(n):\n    a[i] = v\n</code></pre>\n\n<p>I know <code>zeros</code> and <code>ones</code> would work for v = 0, 1. I could use <code>v * ones(n)</code>, but it won't work when <code>v</code> is <code>None</code>, and also would be much slower.</p>\n"},{"tags":["python","multiprocessing"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":47,"score":0,"question_id":13233112,"title":"Multiprocessing in Python: impossible to get back my results (get()) (happens rarely)","body":"<p>I use Multiprocessing in Python in order to do several requests to a database (and other stuff):</p>\n\n<pre><code>po = multiprocessing.Pool()\nfor element in setOfElements:\n    results.append(po.apply_async(myDBRequestModule, (element, other stuff...)))                    \npo.close()\npo.join()\nfor r in results:\n    newSet.add(r.get())\n</code></pre>\n\n<p>myDBRequestModule returns an object I defined, made of a list and two numbers. I redefined the hash function, in order to define what I mean by equality in my sets of these objects:</p>\n\n<pre><code>class myObject:\n    def __init__(self, aList, aNumber, anotherNumber):\n        self.list = aList\n        self.number1 = aNumber\n        self.number2 = anotherNumber\n    def __hash__(self):\n        # turn elements of list into a string, in order to hash the string\n        hash_text = \"\"\n        for element in self.list:\n            hash_text += str(element.x.id) # I use the ID of the element of my list...\n        return hash(hash_text)\n    def __eq__(self, other):\n        self_hash_text = \"\"\n        other_hash_text = \"\"\n        for element in self.list:\n            self_hash_text += str(element.x.id)\n        for element in other.listDest:\n            other_hash_text += str(element.x.id)\n        return self_hash_text == other_hash_text \n</code></pre>\n\n<p>And in most cases it works as it should. Twice, for no known reason and in exactly the same context, I had a bug:</p>\n\n<pre><code>newSet.add(r.get())\nFile \"/usr/lib/python2.6/multiprocessing/pool.py\", line 422, in get\n    raise self._value\nTypeError: 'str' object does not support item assignment\n</code></pre>\n\n<p>It comes from the get method (last line):</p>\n\n<pre><code>def get(self, timeout=None):\n    self.wait(timeout)\n    if not self._ready:\n        raise TimeoutError\n    if self._success:\n        return self._value\n    else:\n        raise self._value\n</code></pre>\n\n<p>Since I had this mistake only once and it disappeared, I decided to give up earlier, but it created a second problem recently, and I really don't know how to fight this bug.\nIn particular, it's difficult for me to tell why it happens almost never, and usually works perfectly fine.</p>\n"},{"tags":["python","serial-port","hex","pyserial"],"answer_count":1,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":274,"score":4,"question_id":11763295,"title":"Sending Command Parameters to Serial Port using Python","body":"<p>I am using python's pySerial library to communicate to a machine (lunar photometer if you must know). The machine has built in scenarios that I can call by sending specific hex values corresponding to those scenarios via a com/serial port. For example, the following code works fine for the \"Park secnario\" in the machine.</p>\n\n<pre><code>s.write('\\x11') #s is my serial object, '\\x11' is the command for the park senario\ns.write('\\x12') #'\\x12' is the command for the TrackSun scenario\n</code></pre>\n\n<p>The above code works as intended and the machine responds to these commands. However, there is a bult in Goto scenario which is activated by the command '\\x02'. My problem is that the goto command takes horizontal and vertical angles as parameters as well in this format GoTo where xxxx and yyyy are the two angles. How do i pass in those parameters in my s.write() command. I have tried:\n    s.write('\\x02 xxxx yyyy')\nwhich does not seem to work. Am i doing something wrong with passing the parameters? The command works fine when i use hyperterminal (in hex mode) with the following code:</p>\n\n<pre><code>8/1/2012 11:37:36.048 [TX] - 02 30 34 3B 30 3F 3A 3D 3B 03 \n8/1/2012 11:37:51.166 [RX] - 01 \n</code></pre>\n\n<p>EDIT:\nHere is an example of the 'Park Scenario' command sent using hyperterminal, just in case.</p>\n\n<pre><code>8/1/2012 12:14:56.649 [TX] - 11 \n8/1/2012 12:15:07.962 [RX] - 01 \n</code></pre>\n"},{"tags":["python","fork"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":78,"score":0,"question_id":12867359,"title":"execution of instructions in a child process","body":"<p>I want to exit from a child process when the execution of <code>os.system(comm)</code> will be done.</p>\n\n<p>My code is:</p>\n\n<pre><code>pid = os.fork()\nif pid == 0: \n         #instruction\nelse:\n         comm = \"python file.py\"\n         os.system(comm)\n         sys.exit(\"error\")\n</code></pre>\n\n<p>Now, my file <code>file.py</code> contains a loop, and I can get out from it only if the condition is satisfied. But, even when the condition is not satisfied, the program exits from the loop and displays the message <em><code>error</code></em>. </p>\n\n<p>Also it doesn't execute the rest of instructions in <code>file.py</code>.</p>\n\n<p><code>file.py</code> is :</p>\n\n<pre><code>while 1:\n       if(condition):\n           break\n# rest of instructions\n</code></pre>\n"},{"tags":["python","templates","flask","jinja2"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13222925,"title":"How do I enable autoescaping in templates with a .jhtml extension in Flask?","body":"<p><a href=\"http://flask.pocoo.org/docs/templating/#jinja-setup\" rel=\"nofollow\">The Flask docs state</a>:</p>\n\n<blockquote>\n  <p>autoescaping is enabled for all templates ending in .html, .htm, .xml as well as .xhtml</p>\n</blockquote>\n\n<p>How do I enable autoescaping for templates ending with a .jhtml extension?</p>\n"},{"tags":["python","numpy","row","iteration","column"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":3,"view_count":74,"score":0,"question_id":13213872,"title":"Row Order in Python and abstraction to a Cartesian plane","body":"<p>How to translate the coordinate system of a 2D Cartesian plane (x,y) to a matrix with indexes a[i,j]?</p>\n\n<p>Say you have to simulate heat conduction in a 2D plane using the Finite Difference method. You're given the boundaries of the system as a point in the lower left, <code>pos_inf</code>, and a point in the upper right, <code>pos_sup</code>.</p>\n\n<p>The results form a surface map, where the index a[i,j] stores the value of the temperature of that point, and have to be stored in a matrix with indexes <code>i</code>, <code>j</code>, as <code>a[i,j]</code>. With the same spacing h for the both directions, how should the discretization be done, and how does the row-ordering that Python follows interferes with that?</p>\n"},{"tags":["python","file"],"answer_count":5,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":1423,"score":4,"question_id":1432126,"title":"how to get content of a small ascii file in python?","body":"<p>Let's say we want to implement an equivalent of the PHP's <a href=\"http://fr2.php.net/manual/en/function.file-get-contents.php\" rel=\"nofollow\"><code>file_get_content</code></a>.</p>\n\n<p>What is the best practice? (elegant and reliable)</p>\n\n<p>Here are some proposition, are they correct?</p>\n\n<p>using <code>with</code> statement:</p>\n\n<pre><code>def file_get_contents(filename):\n    with file(filename) as f:\n        s = f.read()\n    return s\n</code></pre>\n\n<p>is using standard <code>open()</code> safe?</p>\n\n<pre><code>def file_get_contents(filename):\n    return open(filename).read()\n</code></pre>\n\n<p>What happens to file descriptor in either solution?</p>\n"},{"tags":["python"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":25,"score":1,"question_id":13233453,"title":"Detecting a thermal printer on Android Tablet and printing","body":"<p>I have an Andoid tablet which is not under Google Play Store recoginized category i.e. its model number is not the one which we can access the APK's and install them. I have to manually install the packages by downloading them from net. This device has the thermal printer attached on it. I tried to access it through Python but failed to do so as I am not able to detect the printer nor to check on which port it is so that I can give prints from it. The device is not showing any print option for files like .txt ot pdf's. Any help is appreciated.</p>\n\n<p>Following is the code snippet of Python I tried to access the printer but did not worked...</p>\n\n<pre><code>class ThermalPrinter(object):\n    BAUDRATE = 19200\n    TIMEOUT = 3\n    SERIALPORT = '/dev/ttyO2'\n    # pixels with more color value (average for multiple channels) are counted as white\n    # tweak this if your images appear too black or too white\n    black_threshold = 48\n    # pixels with less alpha than this are counted as white\n    alpha_threshold = 127\n\n    printer = None\n\n    _ESC = chr(27) \n\n if __name__ == '__main__':\n    import sys, os\n\n    if len(sys.argv) == 2:\n        serialport = sys.argv[1]\n    else:\n        serialport = ThermalPrinter.SERIALPORT\n\n\n    if not os.path.exists(serialport):\n        sys.exit(\"ERROR: Serial port not found at: %s\" % serialport)\n\n    print \"Testing printer on port %s\" % serialport\n    p = ThermalPrinter(serialport=serialport)\n    p.print_text(\"\\nHello maailma. How's it going?\\n\")\n    p.print_text(\"Part of this \")\n\n\n     import Image, ImageDraw    \n    i = Image.open(\"a.png\")\n    data = list(i.getdata())\n    w, h = i.size\n    p.print_bitmap(data, w, h, True)\n    p.linefeed()\n</code></pre>\n"},{"tags":["python","soap","wsdl","soappy","zsi"],"answer_count":4,"favorite_count":12,"up_vote_count":8,"down_vote_count":0,"view_count":11585,"score":8,"question_id":273002,"title":"Generating a WSDL using Python and SOAPpy","body":"<p>First of all, I will admit I am a novice to web services, although I'm familiar with HTML and basic web stuff.  I created a quick-and-dirty web service using Python that calls a stored procedure in a MySQL database, that simply returns a BIGINT value.  I want to return this value in the web service, and I want to generate a WSDL that I can give our web developers. I might add that the stored procedure only returns one value.</p>\n\n<p>Here's some example code:</p>\n\n<pre><code>#!/usr/bin/python\n\nimport SOAPpy\nimport MySQLdb\n\ndef getNEXTVAL():\n    cursor = db.cursor()\n    cursor.execute( \"CALL my_stored_procedure()\" )  # Returns a number\n    result=cursor.fetchall()\n\n    for record in result:\n        return record[0]\n\ndb=MySQLdb.connect(host=\"localhost\", user=\"myuser\", passwd=\"********\", db=\"testing\")\nserver = SOAPpy.SOAPServer((\"10.1.22.29\", 8080))\nserver.registerFunction(getNEXTVAL)\nserver.serve_forever()\n</code></pre>\n\n<p>I want to generate a WSDL that I can give to the web folks, and I'm wondering if it's possible to have SOAPpy just generate one for me.  Is this possible?</p>\n"},{"tags":["python","environment-variables","virtualenv"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13231007,"title":"How to set a environment variable with virtualenv?","body":"<p>I'm trying to set up an external program / lib written in python - on debian squeeze.</p>\n\n<p>The error I get when I try to launch it that the \"environment variable is not set\" - it's an exception throw by the developer. So I guess, I have to define it, but where ?</p>\n\n<ol>\n<li>I've thought virtualenv and path were the same, so I've written a .pth loaded at the launch. It solved some mistake but not all.</li>\n<li>I've read use export in <code>~/.bashrc</code> but I'm not sure it is read in a virtualenv, and I don't want those export be read even when I don't use this virtualenv. </li>\n<li>I've read too to use export in <code>virtualenv/bin/activate</code>, but it doesn't seem to work correctly.</li>\n</ol>\n\n<p>I'm trying to install <a href=\"http://www.urbansim.org/Download/LinuxInstallation\" rel=\"nofollow\">Opus and Urbansim</a>.</p>\n\n<p>Here is what I get when launching:</p>\n\n<pre><code>(opus-env)touki@touki:~/Projects/opus-env$ ./src/opus_gui/opus.py  \nTraceback (most recent call last):\n  File \"./src/opus_gui/opus.py\", line 14, in &lt;module&gt;\n    from opus_gui.main.controllers.opus_gui_configuration import OpusGuiConfiguration  \n  File \"/home/touki/Projects/opus-test/src/opus_gui/main/controllers/opus_gui_configuration.py\", line 12, in &lt;module&gt;\n    from opus_core import paths  \n  File \"/home/touki/Projects/opus-test/src/opus_core/paths.py\", line 44, in &lt;module&gt;\n    OPUS_HOME = _safe_getenv('OPUS_HOME', _get_default_opus_home)  \n  File \"/home/touki/Projects/opus-test/src/opus_core/paths.py\", line 33, in _safe_getenv\n    return os.environ[key] if key in os.environ else default_func()  \n  File \"/home/touki/Projects/opus-test/src/opus_core/paths.py\", line 36, in _get_default_opus_home  \n    raise Exception('OPUS_HOME environment variable must be set.') \nException: OPUS_HOME environment variable must be set.\n</code></pre>\n\n<p>Any ideas ?</p>\n\n<p>Thanks in advance</p>\n\n<p>NB.: I've searched, autoenv combine virtualenvwrapper seems to provide an answer, but I would prefer not use external programs.</p>\n"},{"tags":["python","math"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13226038,"title":"calculating angle between two lines in python","body":"<p>I am trying to calculate the angle between two lines in python.\nI searched the internet and found the equation on how to do it. But I don't always get accurate result. Some of the results are clearly false when other seems correct.\nMy code is given below:</p>\n\n<pre><code>def angle(pt1,pt2):\n    m1 = (pt1.getY() - pt1.getY())/1\n    m2 = (pt2.getY() - pt1.getY())/(pt2.getX()-pt1.getX())\n\n    tnAngle = (m1-m2)/(1+(m1*m2))\n    return math.atan(tnAngle)\n\ndef calculate(pt,ls):\n    i=2\n    for x in ls:\n        pt2 = point(x,i)\n        i=i+1\n        ang = angle(pt,pt2)*180/math.pi\n        ang = ang * (-1)\n        print ang\n\n\npt = point(3,1)\nls = [1,7,0,4,9,6,150]\n\ncalculate(pt,ls)\n</code></pre>\n\n<p>the result it produces is :</p>\n\n<p>45.0\n0.0\n45.0\n-75.9637565321\n0.0\n-63.4349488229\n0.0</p>\n\n<p>The problem is that I don't understand why the second result, fifth and the last one are zeroed they intersect since they share a point and the other point in not duplicated since the value in the array is different.</p>\n\n<p>Thanks in advance for any help.</p>\n\n<hr>\n\n<p>thanks for all your comment it was very helpfull</p>\n"},{"tags":["python","directory-structure","temporary-directory"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13233048,"title":"How can I check if a directory is a temporary directory in Python","body":"<p>I know how to create a temporary directory in Python using <code>tempfile</code>.</p>\n\n<p>I have though a class that encapsulates the user environment. I have also a Unit test which creates a temporary dummy user environment and populates it with some files that are used for testing. After this is done I want to clean everything up, thus removing everything from that dummy user directory (using <code>shutils.rmtree</code>)</p>\n\n<p>I have a dummy class wrapping the original one that prevents it from getting the real user directory and returns the dummy instead. Though I'm afraid somebody might forget this and perhaps change it or completely remove the wrapper class. This might work and the developer will end up loosing everything from his/her home directory. Though this might teach him/her a good lesson, it is not acceptable.</p>\n\n<p>I can check that '/tmp/' is at the path start of the user home, so that I know it's safe to delete, but that won't work with windows. As tempfile already knows how to create a directory it would be also able to tell if a directory is in the <em>temporal</em> area.\nThough I can't find out how to do it.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["python","wxpython","cx-freeze","shelve"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":44,"score":1,"question_id":13164245,"title":"Python and Freeze Application with shelve.py","body":"<p>I am trying to freeze an application that involves the use of the shelve module.  To freeze it, I am using the GUI2EXE python code and utilizing the cx_freeze portion (everything works great if i remove the shelve part).  </p>\n\n<p>When I go to run my compiled application, it complains of</p>\n\n<pre><code>File \"anydbm.pyc\", line 62, in ?\nImportError: no dbm clone found; tried ['dbhash', 'gdbm', 'dbm',\n'dumbdbm']\n</code></pre>\n\n<p>I have searched around for answers.  Most of them said to add this to the script:</p>\n\n<pre><code>for i in ['dbhash', 'gdbm', 'dbm', 'dumbdbm']:\n    try: eval('import '+i)\n    except: pass\n</code></pre>\n\n<p>But, this didn't do anything for me.  If i include the dbhash module i then get errors related to no bsddb module exists.  I cannot seem to figure this problem out.  Did i implement the above incorrectly?  Am i missing something?</p>\n\n<p>PS, I need to use cx_freeze -- the others (py2exe, pyinstaller) do not work well with the other portions of my program.  Also, i really would like to use shelve  -- like i said, it compiles and works fine without it.  </p>\n\n<p>Thanks!</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Per Mike's request, I have attached the setup script.  Yes, I have tried to include the modules (not shown) but it doesn't work.  I have even included anydbm and dbhash in my main script.  This doesn't seem to work either.  </p>\n\n<p>Also, if you know of a better way to store my variables/lists/dicts/etc than shelve, I would love to know.  I tried ZODB (didn't build well either).  Currently, i did find pdict (with PersistentDict) and this works well when I freeze the application.  However, I find shelve to be faster.  Would like to get shelve working if possible...</p>\n\n<p>My setup script:</p>\n\n<pre><code>from cx_Freeze import setup, Executable\n\nincludes = []\nexcludes = ['_gtkagg', '_tkagg', 'bsddb', 'curses', 'email', 'pywin.debugger',\n            'pywin.debugger.dbgcon', 'pywin.dialogs', 'tcl',\n            'Tkconstants', 'Tkinter']\npackages = []\npath = []\n\nfor i in ['dbhash', 'gdbm', 'dbm', 'dumbdbm']:\n    try: \n        eval('import '+i)\n    except: \n        pass\n\n\nGUI2Exe_Target_1 = Executable(\n    # what to build\n    script = \"myscript.py\",\n    initScript = None,\n    base = 'Win32GUI',\n    targetDir = r\"dist\",\n    targetName = \"myscript.exe\",\n    compress = True,\n    copyDependentFiles = False,\n    appendScriptToExe = False,\n    appendScriptToLibrary = False,\n    icon = None\n    )\n\nsetup(\n\n    version = \"0.1\",\n    description = \"No Description\",\n    author = \"No Author\",\n    name = \"cx_Freeze Sample File\",\n\n    options = {\"build_exe\": {\"includes\": includes,\n                             \"excludes\": excludes,\n                             \"packages\": packages,\n                             \"path\": path\n                             }\n               },\n\n    executables = [GUI2Exe_Target_1]\n    )\n</code></pre>\n"},{"tags":["python","google-app-engine","logging"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":43,"score":1,"question_id":13206295,"title":"logging.fileConfig() acting weird on Google app engine","body":"<p>I have a simple webapp2 app on Google app engine. Here is the code</p>\n\n<pre><code># log.py.........................................................................\nlogging_defaults = {\n    'loglevel': 'DEBUG',\n}\nlogging_config = \"\"\"\\\n[loggers]\nkeys=root\n\n[handlers]\nkeys=stderr\n\n[formatters]\nkeys=default\n\n[logger_root]\nlevel=%(loglevel)s\nhandlers=stderr\n\n[handler_stderr]\nclass=StreamHandler\nlevel=NOTSET\nformatter=default\nargs=(sys.stderr, )\n\n[formatter_default]\nformat=%(asctime)s %(levelname)s %(name)s:%(lineno)d %(message)s\ndatefmt=\n\"\"\"\n\nimport logging\nimport logging.config\nimport logging.handlers\nfrom cStringIO import StringIO\nconfig_file = StringIO(logging_config)\nlogging.config.fileConfig(config_file, logging_defaults)\nl = logging.getLogger(__name__)\n\n# helloworld.py......................................................\n\nimport webapp2\nfrom log import l\n\nclass MainPage(webapp2.RequestHandler):\n  def get(self):\n      l.debug('debug message')\n      l.info('info message')\n      l.warn('warn message')\n      l.error('error message')\n      l.critical('critical message')\n      self.response.headers['Content-Type'] = 'text/plain'\n      self.response.write(\"hello me!! It's me here ;)\")\n\napp = webapp2.WSGIApplication([('/', MainPage)],\n                              debug=True)\n</code></pre>\n\n<p>And here is the screen-shot of the logs produced in app engine dashboard</p>\n\n<p><img src=\"http://i.stack.imgur.com/4SAnh.png\" alt=\"log-screenshot\"></p>\n\n<p>As you can see the logs show up fine, but every log is marked with 'E' which represents error even if it's not an error. And as far as I can tell this happens everytime I use</p>\n\n<pre><code>logging.config.fileConfig()\n</code></pre>\n\n<p>Is there a fix to this problem ?</p>\n\n<p>PS: I know there are other methods to configure logging. But I am asking for fileConfig() only.</p>\n\n<p>UPDATE: I tried using loading from a real file with fileConfig() and using dictConfig() but each time the problem persists.</p>\n"},{"tags":["python","gtk","pygtk"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13150763,"title":"Collapse empty gtk.CellRenderer","body":"<p>I have a <code>gtk.TreeViewColumn</code> that contains 14 <code>gtk.CellRendererPixbuf</code> attributes. Most of them are empty most of the time (the assiciated <code>TreeStore</code> value is <code>None</code>).</p>\n\n<p>These icons always appear spaced as though they were all present, however I would like empty cell renderers to collapse, stacking the icons which are there on the left.</p>\n\n<p>This is how it currently appears:</p>\n\n<p><img src=\"http://i.stack.imgur.com/3LZX1.png\" alt=\"enter image description here\"></p>\n\n<p>The missing icons are associated with <code>None</code>. </p>\n\n<p>I have looked through the <code>TreeViewColumn</code> and <code>CellRenderer</code> documentation but I am stumped.</p>\n"},{"tags":["python","argparse"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13232913,"title":"Forcing argparse to take everything as one input","body":"<p>Is there any way to make <code>argparse</code> pass several arguments as one? That is, I would like</p>\n\n<pre><code>foo bar baz\n</code></pre>\n\n<p>to make <code>argparse</code> pass </p>\n\n<pre><code>\"bar baz\"\n</code></pre>\n\n<p>as the argument.</p>\n"},{"tags":["python","import","module","package"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13232935,"title":"Module and package with same name","body":"<p>Can I have a package and a module with the same name in Python?</p>\n\n<p>ex:</p>\n\n<pre><code>import json\nimport myapp.json.jsoncustommodule\n</code></pre>\n\n<p>I don't know if this has anything to do with the fact that json is in Python built-in library.</p>\n\n<p>In most languages, this is acceptable. However, Python seems to confuse both things, even if they are in different parent packages.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":72,"score":0,"question_id":12298351,"title":"Running a continuous Python process and memory management","body":"<p>I am new to Python.My current assignment is to run a python program continuously,it is going to be a cron job kind of thing, internally it will have objects which is going to be updated every 24hrs and then basically write the details in a file. </p>\n\n<p>Some advice required about the memory management</p>\n\n<p>1) Should I use single process or multi threaded.As there is a scope in the program which can be done parallel.As it is going to run continuously some clarification would be required about the memory consumption of these threads also do I need to cleanup the resources of the threads after each execution.Is there any clean up method available for threads in python.</p>\n\n<p>2) When I do a object allocation in Python , do I need to think about the destructor as well or Python will do the gc.</p>\n\n<p>Please let me know the thoughts on this and what would be the best approach.\nThanks in advance.</p>\n"},{"tags":["python","osx"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":49,"score":3,"question_id":13231895,"title":"Python on OS X: Getting local date time patterns","body":"<p>Has anyone managed to use locale on OS X to derive a default local date and time format ? (I need to parse simple dates and times in a variety of locales).</p>\n\n<p>For the moment, I am resorting to osascript …</p>\n\n<pre><code>from subprocess import Popen, PIPE\n\ncmd = \"osascript -e \" + \"\"\"'\n    tell (current date)\n        set {its year, its month, its day} to {2001, 2, 3}\n        set {its hours, its minutes, its seconds} to {4, 5, 6}\n        return its short date string &amp; tab &amp; its time string\n    end tell'\"\"\"\n\nstr_date, err_num = Popen(cmd, shell=True, \\\n    stdin=PIPE, stdout=PIPE, stderr=PIPE).communicate()\n\nstr_date, _, str_time = str_date.rpartition('   ')\nstr_date_pattern = str_date.replace('2001', '%Y').replace('02', '%m').replace('03','%d')\nstr_time_pattern = str_time.replace('04', '%H').replace('05', '%M').replace('06', '%S').rstrip()\n</code></pre>\n\n<p>which returns something like:</p>\n\n<pre><code>'%d/%m/%Y', '%H:%M:%S'\n</code></pre>\n"},{"tags":["python","class","methods","composition","cython"],"answer_count":1,"favorite_count":2,"up_vote_count":3,"down_vote_count":0,"view_count":380,"score":3,"question_id":5331016,"title":"Using self-defined Cython code from other Cython code","body":"<p>I am currently trying to optimize my Python program and got started with Cython in order to reduce the function calling overhead and perhaps later on include optimized C-libraries functions.</p>\n\n<p>So I ran into the first problem:</p>\n\n<p>I am using composition in my code to create a larger class. So far I have gotten one of my Python classes converted to Cython (which was difficult enough). Here's the code:</p>\n\n<pre><code>import numpy as np\ncimport numpy as np\nctypedef np.float64_t dtype_t\nctypedef np.complex128_t cplxtype_t\nctypedef Py_ssize_t index_t\n\ncdef class bendingForcesClass(object):\n    cdef dtype_t bendingRigidity\n    cdef np.ndarray matrixPrefactor\n    cdef np.ndarray bendingForces\n\n    def __init__(self, dtype_t bendingRigidity, np.ndarray[dtype_t, ndim=2] waveNumbersNorm):\n        self.bendingRigidity = bendingRigidity\n        self.matrixPrefactor = -self.bendingRigidity * waveNumbersNorm ** 2\n\n    cpdef np.ndarray calculate(self, np.ndarray membraneHeight):\n        cdef np.ndarray bendingForces\n        bendingForces = self.matrixPrefactor * membraneHeight\n        return bendingForces\n</code></pre>\n\n<p>From my composed Python/Cython class I am calling the class-method <code>calculate</code>, so that in my composed class I have the following (reduced) code:</p>\n\n<pre><code>from bendingForcesClass import bendingForcesClass\n\ncdef class membraneClass(object):\n    def  __init__(self, systemSideLength, lowerCutoffLength, bendingRigidity):\n        self.bendingForces = bendingForcesClass(bendingRigidity, self.waveNumbers.norm)\n\n    def calculateForces(self, heightR):\n        return self.bendingForces.calculate(heightR)\n</code></pre>\n\n<p>I have found out that <code>cpdef</code> makes the method/functions callable from Python and Cython, which is great and works, as long as I don't try to define the type of <code>self.bendingForces</code> beforehand - which according to <a href=\"http://wiki.cython.org/EarlyBindingForSpeed\" rel=\"nofollow\">http://wiki.cython.org/EarlyBindingForSpeed</a> is necessary in order to remove the function-calling overhead. I have tried the following, which does not work:</p>\n\n<pre><code>from bendingForcesClass import bendingForcesClass\nfrom bendingForcesClass cimport bendingForcesClass\n\n    cdef class membraneClass(object):\n        cdef bendingForcesClass bendingForces\n\n        def  __init__(self, systemSideLength, lowerCutoffLength, bendingRigidity):\n            self.bendingForces = bendingForcesClass(bendingRigidity, self.waveNumbers.norm)\n\n        def calculateForces(self, heightR):\n            return self.bendingForces.calculate(heightR)\n</code></pre>\n\n<p>With this I get this error, when trying to build <code>membraneClass.pyx</code> with Cython:</p>\n\n<pre><code>membraneClass.pyx:18:6: 'bendingForcesClass' is not a type identifier\nbuilding 'membraneClass' extension\n</code></pre>\n\n<p>Note that the declarations are in two separate files, which makes this more difficult.</p>\n\n<p>So I how do I get this done? I would be very thankful if someone could give me a pointer, as I can't find any information about this, besides the link given above.</p>\n\n<p>Thanks and best regards!</p>\n"},{"tags":["python","csv","sheet"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":28,"score":0,"question_id":13232604,"title":"how to read data from multiple sheets in a single csv file using python","body":"<p>I am using python and i had a csv file with data in multiple sheets.</p>\n\n<p>So we can read data from csv file using python as below</p>\n\n<p>Suppose the data in <code>data.csv</code> file in <code>sheet1</code> is below</p>\n\n<pre><code>what    |   are   |  you   | doing | however\nhello   |   that  |  would |   be  | useful\n\ncsv_file = \"/home/user/csv_folder/data.csv\" \n\nfor line in open(csv_file,'r'):\n    print line\n    ..........\n    ..........\n</code></pre>\n\n<p>The output for the above will be as below</p>\n\n<pre><code>\"what are you doing however\"\n\"hello that would be useful\"\n</code></pre>\n\n<p>but in the same <code>data.csv</code> file, i had data in another <code>sheet2</code> as below</p>\n\n<pre><code>This    |   will   |  be   |   second  | sheet | data\nThat    |   would  |  lot  |   useful  | now\n</code></pre>\n\n<p>Now what i am trying to do is to print the data which is present in another <code>sheets</code>(more than 1 sheets if present in a single csv file).</p>\n\n<p>Can anyone let me now how we can print the data in all the sheets present in a single <code>csv</code> file ?</p>\n\n<p>Can anyone please share a bit of python code that process more than one sheet present in a single csv file ?</p>\n"},{"tags":["javascript","python","html","redis","flask"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13232830,"title":"redis doesn't send data to client browser","body":"<p>I'm following the example at <a href=\"http://blog.comsysto.com/2012/07/10/real-time-twitter-heat-map-with-mongodb/#comment-1043\" rel=\"nofollow\">http://blog.comsysto.com/2012/07/10/real-time-twitter-heat-map-with-mongodb/#comment-1043</a> and the program doesn't seem to be sending any data from the redis db to the client in order to visualise the tweets. This is the python program that run the server:</p>\n\n<pre><code>#!/bin/env python\n# encoding: utf-8\n\n\"\"\"\nWebservice prototype for exposing cell data via\nHTTP and JSON/JSONP\n\"\"\"\n\n\nDB = 'tstream'\nCELLS_COLLECTION = 'tweets'\n\n\nimport json\nimport time\nimport math\nimport redis\nimport threading\nimport signal\nimport sys\nfrom flask import Flask\nfrom flask import request\nfrom flask import abort\nfrom flask import url_for\nfrom flask import make_response\nfrom flask import Response\nfrom pymongo import Connection\nfrom bson import json_util\nfrom threading import Thread\n\n\nred = redis.StrictRedis()\n\ndef signal_handler(signal, frame):\n    print 'You pressed Ctrl+C!'\n    sys.exit(0)\n\ndef tail_mongo_thread():\n    print \"beginning to tail...\"\n    db = Connection().tstream\n    coll = db.tweets_tail\n    cursor = coll.find({\"coordinates.type\" : \"Point\" }, {\"coordinates\"     :1},tailable=True,timeout=False)\n    ci=0\n    while cursor.alive:\n        try:\n            doc = cursor.next()\n            ci += 1\n            red.publish('chat', u'%s' % json.dumps(doc,default=json_util.default))\n        except StopIteration:\n            pass\n\ndef event_stream():\n    pubsub = red.pubsub()\n    pubsub.subscribe('chat')\n    i=0\n    for message in pubsub.listen():\n        i+=1\n        print i\n        yield 'data: %s\\n\\n' % message['data']\n\napp = Flask(__name__)\n@app.route('/tweets')\ndef tweets():\n\n    url_for('static', filename='map.html')\n    url_for('static', filename='jquery-1.7.2.min.js')\n    url_for('static', filename='jquery.eventsource.js')\n    url_for('static', filename='jquery-1.7.2.js')\n     return Response(event_stream(), headers={'Content-Type':'text/event-stream'})\n\ndef runThread():\n    st = Thread( target = tail_mongo_thread )\n    st.start()\n\n\nif __name__ == '__main__':\n    signal.signal(signal.SIGINT, signal_handler)\n    app.before_first_request(runThread)\n    app.run(debug=True, host='0.0.0.0') \n</code></pre>\n\n<p>The html page is:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;script type=\"text/javascript\" src=\"https://maps.googleapis.com/maps/api     /js?sensor=false&amp;libraries=visualization\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"jquery-1.7.2.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"jquery.eventsource.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"heatmap.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"heatmap-gmaps.js\"&gt;&lt;/script&gt;\n\n\n\n&lt;script type=\"text/javascript\"&gt;\n  var map, pointarray, heatmap;\n  var taxiData = [\n    new google.maps.LatLng(37.782551, -122.445368)\n  ];\n\n\n\n  function initialize() {\n       var heatOptions = {\n\"radius\": 30,\n\"element\": \"map_canvas\",\n\"visible\": true,\n\"opacity\": 60,\n\"gradient\": { 0.45: \"rgb(0,0,255)\", 0.55: \"rgb(0,255,255)\", 0.65: \"rgb(0,255,0)\", 0.95: \"yellow\", 1.0: \"rgb(255,0,0)\" }\n  };\n\n\n\n  var myOptions = {\n      zoom: 2,\n      center: new google.maps.LatLng(37.774546, -122.433523),\n      mapTypeId: google.maps.MapTypeId.ROADMAP};\n\n    map = new google.maps.Map(document.getElementById(\"map_canvas\"),myOptions);\n    heatmap = new HeatmapOverlay(map, heatOptions);\n    google.maps.event.addListener(map, \"idle\", function(){\n    //heatmap.setDataSet(testData);\n    });\n\n     $.eventsource({\n        label: \"json-event-source\",\n        url: \"http://localhost:5000/tweets?callback=loomit\",\n        dataType: \"json\",\n      open: function() {\n\n        console.log( \"opened\" );\n\n    },\n    message: function( data ) {\n\n        console.log( data.coordinates.coordinates );\n        heatmap.addDataPoint(data.coordinates.coordinates[1], data.coordinates.coordinates[0]);\n\n    },\n     // $.eventsource(\"close\", \"json-event-source\");\n\n\n  }\n\n  )};\n\n\n&lt;/script&gt;\n\n\n\n &lt;body onload=\"initialize()\"&gt;\n    &lt;div id=\"result\"&gt;&lt;/div&gt;\n    &lt;div id=\"map_canvas\" style=\"height: 600px; width: 800px;\"&gt;&lt;/div&gt;\n    &lt;button onclick=\"toggleHeatmap()\"&gt;Toggle Heatmap&lt;/button&gt;\n    &lt;button onclick=\"changeGradient()\"&gt;Change gradient&lt;/button&gt;\n    &lt;button onclick=\"changeRadius()\"&gt;Change radius&lt;/button&gt;\n    &lt;button onclick=\"changeOpacity()\"&gt;Change opacity&lt;/button&gt;\n  &lt;/body&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>It apparently works, so I'm confused when I try to run it nothing is sent to the client.</p>\n\n<p>Thanks</p>\n"},{"tags":["python","thread-safety"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":30,"score":0,"question_id":13232670,"title":"Thread Safety in File I/O","body":"<p>I have a class which contains methods for read and write data into a file. It also has methods for opening and closing the file. How can I make the read and write operations thread safe in Python? i.e. if a write operation is under progress, it should block all other threads until it has finished the operation.</p>\n"},{"tags":["python","list"],"answer_count":3,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":84,"score":4,"question_id":13214798,"title":"Is there a str.join() for lists?","body":"<p>I understand <code>str.join()</code>:</p>\n\n<pre><code>&gt;&gt;&gt; '|'.join(['1','2','3'])\n'1|2|3'\n</code></pre>\n\n<p>Is there something which outputs a list? Is there a function that will output:</p>\n\n<pre><code>['1', '|', '2','|', '3']\n</code></pre>\n\n<p>That is, a <code>str.join()</code> for lists? (or any other iterable?)</p>\n"},{"tags":["python","sql"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13232555,"title":"Debug Executed Sql in Python","body":"<p>I am executing some sql in python as follows </p>\n\n<pre><code>statement = \"select * from TEST_TABLE\"\ndebug(\"Statement: %s\" % (statement, ))\ncursor = gblDBConnection.cursor()\ncursor.execute(statement)\n</code></pre>\n\n<p>I can debug the statement using a debug function I have written but would also like to debug the actual values returned ie after sql execution.</p>\n\n<p>Is there a way of doing this?</p>\n"},{"tags":["python","excel","win32com","office-2013"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13121529,"title":"Python Makepy with Office 2013 (office 15)","body":"<p>I'm using python and excel with office 2010 and have no problems there.\nI used python's makepy module in order to bind to the txcel com objects.</p>\n\n<p>However, on a different computer I've installed office 2013 and when I launched makepy no excel option was listed (as opposed to office 2010 where 'Microsoft Excel 14.0 Object Library' is listed by makepy).</p>\n\n<p>I've searched for 'Microsoft Excel 15.0 Object Library' in the registry and it is there.\nI tried to use : <code>makepy -d 'Microsoft Excel 15.0 Object Library'</code> \nbut that didn't work.</p>\n\n<p>Help will be much appreciated.\nThanks.</p>\n"},{"tags":["python","windows","screenshot","pil","rounded-corners"],"answer_count":1,"favorite_count":1,"up_vote_count":15,"down_vote_count":0,"view_count":744,"score":15,"question_id":5999007,"title":"Active window screenshot with Python PIL and windows API: how to deal with rounded corners?","body":"<p>For <a href=\"http://code.google.com/p/quickscreenshots\" rel=\"nofollow\">this project</a>, I'm taking screenshots with the Windows API (to deal with multi-screens) and convert it to a PIL image; then I add a shadow around the window if wanted.</p>\n\n<p>My problem is, the screenshot is actually of the window's rectangle; meaning I capture the background behind it around rounded-corners and I don't want that. I googled quite a bit and found docs and tuts around transparency, and I'm guessing I should find a way to get the shape of the window in order to make it a mask that I would apply to the (rectangle) image i've got. But I found noway to get that mask. Could any one help?</p>\n\n<p>Below is my code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>hwnd = win32gui.GetForegroundWindow()\n\nl, t, r, b = win32gui.GetWindowRect(hwnd)\nw = r - l\nh = b - t\n\nhwndDC = win32gui.GetWindowDC(hwnd)\nmfcDC  = win32ui.CreateDCFromHandle(hwndDC)\nsaveDC = mfcDC.CreateCompatibleDC()\n\nsaveBitMap = win32ui.CreateBitmap()\nsaveBitMap.CreateCompatibleBitmap(mfcDC, w, h)\nsaveDC.SelectObject(saveBitMap)\n\nsaveDC.BitBlt((0, 0), (w, h),  mfcDC,  (0, 0),  win32con.SRCCOPY)\n\n#add cursor\nif showcursor:\n    curFlags, curH, (curX, curY) = win32gui.GetCursorInfo()\n    saveDC.DrawIcon((curX, curY), curH)\n\n#load into PIL image\n\"\"\"http://stackoverflow.com/questions/4199497/image-frombuffer-with-16-bit-image-data\"\"\"\nbmpinfo = saveBitMap.GetInfo()\nbmpstr = saveBitMap.GetBitmapBits(True)\nim = Image.frombuffer(\n    'RGB',\n    (bmpinfo['bmWidth'], bmpinfo['bmHeight']),\n    bmpstr, 'raw', 'BGRX', 0, 1)\n\nwin32gui.DeleteObject(saveBitMap.GetHandle())\nsaveDC.DeleteDC()\nmfcDC.DeleteDC()\nwin32gui.ReleaseDC(hwnd, hwndDC)\n\nreturn im\n</code></pre>\n\n<p>Below is a slightly magnified screenshot of a window above a blue background:</p>\n\n<p><img src=\"http://i.stack.imgur.com/4ZUIE.jpg\" width=\"508\" height=\"108\"></p>\n\n<p>As you can see there are blue corners that shouldn't be there.</p>\n"},{"tags":["python","math"],"answer_count":2,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":262,"score":7,"question_id":9775731,"title":"Clamping floating numbers in Python?","body":"<p>Is there a built-in function for this in Python 2.6?</p>\n\n<p>Something like:</p>\n\n<pre><code>clamp(myValue, min, max)\n</code></pre>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":3,"view_count":68,"score":-3,"question_id":13232145,"title":"Python ; Go back to a line if condition = false","body":"<p>In my Title I mean that :</p>\n\n<pre><code>    myCellar = [\"doritos\", \"chips\", \"chocolates\", \"\"]\n    productsInDemand = input(\"Write a product : \")\n\n   for supply in myCellar :\n      if productsInDemand == supply:\n         print(\"This product we have : '\",productsInDemand ,\"'\")\n         break\n   else:\n      print(\"This product we have not : '\",productsInDemand ,\"'\")\n      (go back to the line 1)\n</code></pre>\n\n<p>If I will write a product that does not excist in 'mycellar' then the program will go back to the first line to write again a product .</p>\n"},{"tags":["python","neural-network","pybrain"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":24,"score":2,"question_id":13231644,"title":"how to give input to a trained and tested PyBrain network and how to get the result","body":"<p>I am predicting a value, I have 2 input layer and an output layer. Here is my code in which I have trained a PyBrain network and then tested it, I am missing how should I give a set of input to the network and how do I get the result. Please help me to proceed forward.</p>\n\n<pre><code> ds = SupervisedDataSet(2,1)\n tf = open('data.csv','r')\n for line in tf.readlines():\n data = [float(x) for x in line.strip().split(',') if x != '']\n indata =  tuple(data[:2])\n outdata = tuple(data[2:])\n ds.addSample(indata,outdata)\n\n n = buildNetwork(ds.indim,8,8,ds.outdim,recurrent=True)\n t = BackpropTrainer(n,learningrate=0.01,momentum=0.5,verbose=True)\n t.trainOnDataset(ds,1000)\n t.testOnData(verbose=True)\n</code></pre>\n\n<p>what I should do next to give an input and predict on the input, How do I get the result for that set of input. Thanks!!</p>\n"},{"tags":["python","linux","append"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":200,"score":1,"question_id":7561663,"title":"Appending to the end of a file in a concurrent environment","body":"<p>What steps need to be taken to ensure that \"full\" lines are <strong>always</strong> correctly appended to the end of a file if multiple of the following (example) program are running concurrently.</p>\n\n<pre><code>#!/usr/bin/env python\nimport random\npasswd_text=open(\"passwd.txt\",\"a+\")\nu=(\"jsmith:x:1001:1000:Joe Smith,Room 1007,(234)555-8917,(234)555-0077,jsmith@rosettacode.org:/home/jsmith:/bin/sh\",\n  \"jdoe:x:1002:1000:Jane Doe,Room 1004,(234)555-8914,(234)555-0044,jdoe@rosettacode.org:/home/jdoe:/bin/sh\",\n  \"xyz:x:1003:1000:X Yz,Room 1003,(234)555-8913,(234)555-0033,xyz@rosettacode.org:/home/xyz:/bin/sh\")\nfor i in range(random.randint(1,2)):\n  print &gt;&gt; passwd_text, random.choice(u)\npasswd_text.close()\n</code></pre>\n\n<p>And: Can an \"all or nothing\" append be guaranteed (on linux/unix) even if the the disk becomes full, or \"ulimit -f\" has been set?</p>\n\n<p>(Note similar question: <a href=\"http://stackoverflow.com/questions/4706499/how-do-you-append-to-file-in-python\">How do you append to file in python?</a>)</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":26,"score":1,"question_id":13232093,"title":"How to find and get the text from html file using python?","body":"<p>Hi i have used this tag to find the content of tag from html file.</p>\n\n<pre><code>def everything_between(text,begin,end):\n    idx1=content.find(begin)\n    idx2=content.find(end,idx1)\n    return content[idx1+len(begin):idx2].strip()\n\ncontent=open('page.html').read()\ntitle=everything_between(content,'&lt;ul class=\"members\"&gt;','&lt;/ul&gt;')\ninteresting=everything_between(content,'INTERESTING:','bodystuff')\nprint(title)\n</code></pre>\n\n<p>but in tag <code>&lt;ul class=\"member\"&gt;</code> there are multiple <code>&lt;ahref&gt;</code> tags,\ni want to get the content between <code>&lt;a href&gt;</code> that has   <code>&lt;a href=\"/history/member/\"&gt;</code></p>\n\n<p>the script should get the values between <code>&lt;a href=\"/history/member/\"&gt;&lt;/a&gt;</code>.</p>\n\n<p>how can i do this?</p>\n"},{"tags":["python","stock"],"answer_count":2,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13216848,"title":"How to live stream stock price using python","body":"<p>At first I want to find some API, but I have searched on the internet and didn't find anything \n really helpful.</p>\n\n<p>\"Real time\" I mean live stream the stock price on a webpage without a refresh.</p>\n\n<p>If there is not such API, would my following method be a good way to implement this?\n1. Python side, call yahoo finance api to get the most recent price.\n2. Browser side, use ajax to constantly call server side to get the price and display the price. More specifically, I am thinking to use setInterval in jquery to achieve this.</p>\n\n<p>How does this approach look?</p>\n\n<p>Actually this is not specific to stock price data, any website that need to constantly retrieve data from server side need to consider this problem. For example google chat, facebook news feed, and so on. Can anybody tell me in general how to achieve live streaming data from server to browser?</p>\n"},{"tags":["python","amazon","beautifulsoup","mechanize"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":30,"score":1,"question_id":13231937,"title":"BeautifulSoup and Amazon.co.uk","body":"<p>I am trying to parse amazon to compile a list of prices, as part of a bigger project relating to statistics. However, I am stumped. I was wondering If anyone can review my code and tell me where I went wrong?</p>\n\n<pre><code>#!/usr/bin/python\n# -*- coding:  utf-8 -*-\nimport mechanize\nfrom bs4 import BeautifulSoup\n\nURL_00 = \"http://www.amazon.co.uk/Call-Duty-Black-Ops-PS3/dp/B007WPF7FE/ref=sr_1_2?ie=UTF8&amp;qid=1352117194&amp;sr=8-2\"\n\nbro = mechanize.Browser()\nresp = bro.open(URL_00)\nhtml = resp.get_data()\nsoup_00 = BeautifulSoup(html)\nprice = soup_00.find('b', {'class':'priceLarge'})\nprint price #this should return at the very least the text enclosed in a tag\n</code></pre>\n\n<p>According to the screenshot, what I wrote above should work, shouldn't it?</p>\n\n<p><img src=\"http://i.stack.imgur.com/SXRUt.png\" alt=\"http://i.imgur.com/bPVe1.png (cannot post an image as a newbie..)\"></p>\n\n<p>Well all I get in the print out is \"[]\", if I change the line before last to this:</p>\n\n<pre><code> price = soup_00.find('b', {'class':'priceLarge'}).contents[0].string\n</code></pre>\n\n<p>or</p>\n\n<pre><code>price = soup_00.find('b', {'class':'priceLarge'}).text\n</code></pre>\n\n<p>I get a \"noneType\" error.</p>\n\n<p>I am quite confused as to why this is happening. The page encoding in the URL on chrome says UTF8, to which my script is adjusted in line #2.\nI have changed it to ISO (as per inner HTML of the page) but this makes zero difference, so I am positive encoding is not the issue here.</p>\n\n<p>Also, don't know if this is relevant at all, but my system locale on linux being UTF-8 should not cause a problem should it?</p>\n\n<p>Any ideas would be welcome.</p>\n"},{"tags":["python","django","python-sphinx"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":14,"score":0,"question_id":13231997,"title":"sphinx autodoc - added project path but still getting error 'module not found' . using default python path","body":"<p>I added my project path to conf.py like this : </p>\n\n<pre><code>  sys.path.insert(0, \"path\")\n</code></pre>\n\n<p>I think it is using the project path correctly as i am getting error if i had entered anything else in the above command </p>\n\n<p>Problem is , it is using the default python present. The python i am using is present in my virtual env, so I tried giving the path /venv/bin/python, venv/ to the path like the above command , still referring to the same old default python .</p>\n"},{"tags":["python"],"answer_count":6,"favorite_count":4,"up_vote_count":5,"down_vote_count":1,"view_count":2777,"score":4,"question_id":4463098,"title":"Where can I find a good online Python course?","body":"<p>Does anyone know where I can find a quality online Python course that would be suitable for someone with a math/engineering background, but not in software?</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":37,"score":-2,"question_id":13231683,"title":"process multiple key down in python?","body":"<p>i am very new in python, i have multiple options such as 1 to 99 and i want to select 23 as an windows after pressing f2 i press 2 and 3 and then press enter, number 23 is get selected. i want to do this in ubuntu 10.04. what will be procedure? i am writting some code </p>\n\n<pre><code>def keyDown(self,e):\n    if e.keystring == \"f2\":                \n        selectedNumber = 0\n    elif e.keystring == \"enter\":\n        print selectedNumber\n        selectedNumber =0\n    else:\n        selectedNumber +=int(e.keystring)\n</code></pre>\n\n<p>thanks in advance</p>\n"},{"tags":["python","multithreading","asynchronous","twisted"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":58,"score":0,"question_id":13112984,"title":"Threads vs Asynchronous Networking (Twisted) Python","body":"<p>I am writing an implementation of a NAT.  My algorithm is as follows:</p>\n\n<ol>\n<li>Packet comes in</li>\n<li>Check against lookup table if external, add to lookup table if internal</li>\n<li>Swap the source address and send the packet on its way</li>\n</ol>\n\n<p>I have been reading about Twisted.  I was curious if Twisted takes advantage of multicore CPUs?  Assume the system has thousands of users and one packet comes right after the other.  With twisted can the lookup table operations be taking place at the same time on each core.  I hear with threads the GIL will not allow this anyway.  Perhaps I could benifit from multiprocessing></p>\n\n<p>Nginix is asynchronous and happily serves thousands of users at the same time.</p>\n"},{"tags":["python","ssh","pexpect"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":23,"score":0,"question_id":13231717,"title":"Python Pexpect SSH Command Line Login Arguments","body":"<p>I'm using the pexpect.py script to login and get hostname information.<br>\nBasically I run it like this </p>\n\n<pre><code>~$:./pexpect.py -h{hostname} -u{user} -p{password}\n</code></pre>\n\n<p>You will see below that it's automated to run a few commands and close out.  I'd like to be able to add line at the end so the user can pick and choose what information they would like to see. So instead of the above command line it would look something like:</p>\n\n<pre><code>~$:./pexpexct.py -h{hostname} -u{username} -p{password} -x{user defined} -z{user defined}\n</code></pre>\n\n<p>Basically a list with -x being.. say uptime and -z being ifconfig.. there would also be -a, -b , -c.  I'm lost as how to add those arguments in the code:</p>\n\n<pre><code>#!/usr/bin/env python\n# -h : hostname of the remote server to login to.\n# -u : username to user for login.\n# -p : Password to user for login. \n\nimport os, sys, time, re, getopt, getpass\nimport traceback\nimport pexpect\n\nCOMMAND_PROMPT = '[#$] '\nTERMINAL_PROMPT = '(?i)terminal type\\?'\nTERMINAL_TYPE = 'vt100'\n\nSSH_NEWKEY = '(?i)are you sure you want to continue connecting'\n\ndef exit_with_usage():\n    print globals()['__doc__']\n    os._exit(1)\n\ndef main():\n    global COMMAND_PROMPT, TERMINAL_PROMPT, TERMINAL_TYPE, SSH_NEWKEY\n    ## Parse the options, arguments, get ready, etc.\n    try:\n        optlist, args = getopt.getopt(sys.argv[1:], 'h:u:p:', ['help','?'])\n    except Exception, e:\n        print str(e)\n        exit_with_usage()\n    options = dict(optlist)\n    if len(args) &gt; 1:\n        exit_with_usage()\n\n    if [elem for elem in options if elem in ['-?','--?','--help']]:\n        print \"Help:\"\n        exit_with_usage()\n\n    if '-h' in options:\n        host = options['-h']\n    else:\n        host = raw_input('hostname: ')\n    if '-u' in options:\n        user = options['-u']\n    else:\n        user = raw_input('username: ')\n    if '-p' in options:\n        password = options['-p']\n    else:\n        password = getpass.getpass('password: ')\n\n## Login via SSH\n\n    child = pexpect.spawn('ssh -l %s %s'%(user, host))\n    i = child.expect([pexpect.TIMEOUT, SSH_NEWKEY, COMMAND_PROMPT, '(?i)password'])\n    if i == 0:\n            print 'ERROR! could not login with SSH. Here is what SSH said:'\n            print child.before, child.after\n            print str(child)\n            sys.exit (1)\n    if i == 1: # In this case SSH does not have the public key cached.\n            child.sendline ('yes')\n            child.expect ('(?i)password')\n    if i == 2:\n            # This may happen if a public key was setup to automatically login.\n            # But beware, the COMMAND_PROMPT at this point is very trivial and\n            # could be fooled by some output in the MOTD or login message.\n            pass\n    if i == 3:\n            child.sendline(password)\n            # Now we are either at the command prompt or\n            # the login process is asking for our terminal type.\n            i = child.expect ([COMMAND_PROMPT, TERMINAL_PROMPT])\n            if i == 1:\n                child.sendline (TERMINAL_TYPE)\n                child.expect (COMMAND_PROMPT)\n\n        COMMAND_PROMPT = \"\\[PEXPECT\\]\\$ \"\n        child.sendline (\"PS1='[PEXPECT]\\$ '\") # In case of sh-style\n        i = child.expect ([pexpect.TIMEOUT, COMMAND_PROMPT], timeout=10)\n        if i == 0:\n            print \"# Couldn't set sh-style prompt -- trying csh-style.\"\n            child.sendline (\"set prompt='[PEXPECT]\\$ '\")\n            i = child.expect ([pexpect.TIMEOUT, COMMAND_PROMPT], timeout=10)\n            if i == 0:\n                print \"Failed to set command prompt using sh or csh style.\"\n                print \"Response was:\"\n                print child.before\n                sys.exit (1)\n\n# Now we should be at the command prompt and ready to run some commands.\n# print '---------------------------------------'\n# print 'Report of commands run on remote host.'\n# print '---------------------------------------'\n\n# Run uname.\n        child.sendline ('uname -a')\n        child.expect (COMMAND_PROMPT)\n        print child.before\n        if 'linux' in child.before.lower():\n            LINUX_MODE = 1\n        else:\n            LINUX_MODE = 0\n\n# Run and parse 'uptime'.\n        child.sendline ('uptime')\n        child.expect('up\\s+(.*?),\\s+([0-9]+) users?,\\s+load averages?: ([0-9]+\\.[0-9][0-9]),?\\s+([0-9]+\\.[0-9][0-9]),?\\s+([0-9]+\\.[0-9][0-9])')\n    duration, users, av1, av5, av15 = child.match.groups()\n        days = '0'\n        hours = '0'\n        mins = '0'\n        if 'day' in duration:\n            child.match = re.search('([0-9]+)\\s+day',duration)\n            days = str(int(child.match.group(1)))\n        if ':' in duration:\n            child.match = re.search('([0-9]+):([0-9]+)',duration)\n            hours = str(int(child.match.group(1)))\n            mins = str(int(child.match.group(2)))\n        if 'min' in duration:\n            child.match = re.search('([0-9]+)\\s+min',duration)\n            mins = str(int(child.match.group(1)))\n        print\n        print 'Uptime: %s days, %s users, %s (1 min), %s (5 min), %s (15 min)' % (\n            duration, users, av1, av5, av15)\n        child.expect (COMMAND_PROMPT)\n\n# Run Current Date.\n        child.sendline ('date')\n        child.expect (COMMAND_PROMPT)\n        print child.before\n\n# Run vmstat.\n    #    child.sendline ('vmstat')\n    #    child.expect (COMMAND_PROMPT)\n    #    print child.before\n\n# Run free.\n    #    if LINUX_MODE:\n    #        child.sendline ('free') # Linux systems only.\n    #        child.expect (COMMAND_PROMPT)\n    #        print child.before\n\n# Run df.\n    #    child.sendline ('df')\n    #    child.expect (COMMAND_PROMPT)\n    #    print child.before\n\n# Run lsof.\n    #    child.sendline ('lsof')\n    #    child.expect (COMMAND_PROMPT)\n    #    print child.before\n\n# Run netstat\n    #    child.sendline ('netstat')\n    #    child.expect (COMMAND_PROMPT)\n    #    print child.before\n\n# Run MySQL show status.\n    #    child.sendline ('mysql -p -e \"SHOW STATUS;\"')\n    #    child.expect (PASSWORD_PROMPT_MYSQL)\n    #    child.sendline (password_mysql)\n    #    child.expect (COMMAND_PROMPT)\n    #    print\n    #    print child.before\n\n# Now exit the remote host.\n        child.sendline ('exit')\n        index = child.expect([pexpect.EOF, \"(?i)there are stopped jobs\"])\n        if index==1:\n            child.sendline(\"exit\")\n            child.expect(EOF)\n\n    if __name__ == \"__main__\":\n\n        try:\n            main()\n        except Exception, e:\n            print str(e)\n            traceback.print_exc()\n            os._exit(1)\n</code></pre>\n"},{"tags":["python","django","uml"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":829,"score":2,"question_id":3676476,"title":"Is there an app to create UML from django models?","body":"<p>I am looking for a way to generate UML diagrams from a Django application <code>Model</code> structure.</p>\n\n<p>Epydoc doesn't work with Django models because it needs django's settings.py to be imported and <code>manage.py   graph_models</code> generates unreadable output, not easily parsable and hard to convert to UML.</p>\n\n<p>Is there any tool avaialble to do that?</p>\n"},{"tags":["python","exchange","win32com","activesync"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13231611,"title":"Send command to exchange server via ActiveSync using Python","body":"<p>I want to fetch the settings information for an user. The needed command is documented here: <a href=\"http://msdn.microsoft.com/en-us/library/ee202944%28v=exchg.80%29.aspx\" rel=\"nofollow\">ActiveSync Command Reference Protocol Specification</a>\nI assume I have to use win32com.client.Dispatch(\"Something\") to get an ActiveSync connection to my Exchange server which I can use to issue the mentioned 'Settings' command.</p>\n\n<p>Seems like there is no library available: <a href=\"http://stackoverflow.com/questions/12547131/python-exchange-activesync-library\">Python Exchange ActiveSync Library</a></p>\n"},{"tags":["python","centos","yum"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":3152,"score":1,"question_id":10624511,"title":"Upgrade python without breaking yum","body":"<p>I recently installed Python 2.7.3 on a CentOS machine by compiling from source. Python 2.7.3 is installed at /opt/python2.7 and when I installed it I just changed /usr/bin/python to point to the new version. This apparently is wrong though because when I did it it broke yum. I would get the following.</p>\n\n<pre><code>There was a problem importing one of the Python modules\nrequired to run yum. The error leading to this problem was:\n\n   No module named yum\n\nPlease install a package which provides this module, or\nverify that the module is installed correctly.\n\nIt's possible that the above module doesn't match the\ncurrent version of Python, which is:\n2.7.3 (default, May 15 2012, 17:45:42) \n[GCC 4.4.4 20100726 (Red Hat 4.4.4-13)]\n\nIf you cannot solve this problem yourself, please go to \nthe yum faq at:\n  http://yum.baseurl.org/wiki/Faq\n</code></pre>\n\n<p>I changed /usr/bin/python to point back to the python 2.6.6 but now 2.6.6 is the default version of python. Any idea how to fix this?</p>\n"},{"tags":["python","mongodb","pymongo"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13231071,"title":"can't connect mongodb in python","body":"<p>I can't connect mongodb on server with debian and python 2.6.6 on this line:</p>\n\n<pre><code>connection = pymongo.Connection('mongodb://localhost', safe = True)\n</code></pre>\n\n<p>TypeError: <strong>init</strong>() got an unexpected keyword argument 'safe'</p>\n\n<p>The same code works on window machine with python 2.7.3.\nCould you please explain how to correct this error?</p>\n\n<p>I have pymongo version 2.3 on machine where it works and 1.7 where it doesn't work.</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":3,"view_count":34,"score":-2,"question_id":13231321,"title":"How to parse the html file from python?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/717541/parsing-html-in-python\">Parsing HTML in Python</a>  </p>\n</blockquote>\n\n\n\n<p>i am newbie to python, i am using python.i have downloaded the HTML file from my site.and that downloaded HTML file has some urls. i want only some urls from that HTML file to be write in to separate text file using python.how can i do this? can anyone help me?</p>\n"},{"tags":["python","google-cloud-messaging"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":62,"score":0,"question_id":13231210,"title":"Bad request response from Google cloud messaging server, using urllib2","body":"<p>I have been trying to send messages to the GCM server using python <code>urllib2</code>. But it has been returning <code>Error 400</code> (suggesting <code>Malformed JSON</code>). This is a very similar question to <a href=\"http://stackoverflow.com/questions/11697096/google-cloud-messaging-http-error-400-bad-request\">Google Cloud Messaging HTTP Error 400: Bad Request</a> but I have already tried the solution provided there, which did not work for me.</p>\n\n<p>Please find my code below</p>\n\n<pre><code>idarr = []\nfor obj in objects:\n    idarr.append(str(obj[\"gcid\"]))\n\nkey =  \"AIzaxxxxxxL9xxxxxxxxxxxxxxxxxxxWbk\"\ndata = { \"registration_ids\": idarr , \"data\": \"on\" }\ndata = json.dumps(data)\nheaders = {\"Content-Type\":\"application/json\",\"Authorization\": \"key=\"+key}\nrequest = urllib2.Request('https://android.googleapis.com/gcm/send',data,headers )\nf=urllib2.urlopen(request)\n</code></pre>\n\n<p>Also  I am presenting here the json I am posting in the data field</p>\n\n<pre><code>{\n    \"data\": \"on\", \n    \"registration_ids\": [\n         \"APA91bEPvyQuqRndnwZ94YxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxnmFVPy6nv4mPU5UyhDEZ7Jha9HnrV9nXQf25ojs8Hc_-Bw8-ElJ320koeL0PGL6hnWj0xuyltozoND_x\",\n         \"APA91bEPvyQxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxVPy6nv4mPU5UyhDEZ7Jha9HnrV9nXQf25ojs8Hc_-Bw8-ElJ320koeL0PGL6hnWj0xuyltozoND_x\"\n    ]\n} \n</code></pre>\n"},{"tags":["python","python-3.x"],"answer_count":4,"favorite_count":1,"up_vote_count":4,"down_vote_count":0,"view_count":102,"score":4,"question_id":13228939,"title":"Convention to print an object in python","body":"<p>Is there any standard convention to print an object in python. I know that if I just try to print the object it would print the memory address but I would like to overwrite that method and be able to print human readable format of the object to help in debugging.</p>\n\n<p>is there any standard convention people follow or is it not a good way to define such a method instead there are better alternatives?</p>\n"},{"tags":["python","fabric"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":26,"score":-1,"question_id":13231111,"title":"Python - Fabric how to set output value","body":"<p>On my remote server , to execute ; </p>\n\n<pre><code>git pull\n</code></pre>\n\n<p>command; i need to run <code>su</code>. and type a password..</p>\n\n<p>here is my fabfile.py:</p>\n\n<pre><code>from fabric.api import *\n\nenv.hosts=['user@remote.com']\n\n\n\ndef pull():\n    dir = '/opt/sites/sosyate'\n    with cd(dir):\n        run('git pull')\n\n\ndef su():\n    run('su')\n</code></pre>\n\n<p>i need to be root to execute <code>pull()</code> function. but when i call su() function. remote asks me password; after i typed password it becomes regular command line and expect something to command from me.</p>\n\n<p>i cant call my other fabric function. i need to set <code>su</code> passsword in my fabric file.</p>\n\n<p>thank you</p>\n"},{"tags":["python","redis"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13231095,"title":"Using Redis for Python to process mass data but the Redis server always shut down.","body":"<p>I want to open DB0 on my Redis server, process data in it, and write to DB1. There're about 3 million keys in DB0. To reduce hard disk operation, I use \"CONFIG SET save \"300 10000\"\" to make the server write to disk every 5 minutes. This is my code:\n<i>    </p>\n\n<pre><code>    import redis\n\n    idLinkoutIds = redis.Redis(host='127.0.0.1', port=6379, db=0)\n    idLinkinIds = redis.Redis(host='127.0.0.1', port=6379, db=1)\n\n    i = 0\n    allKeys = idLinkoutIds.keys() # There're 3,228,675 keys.\n\n    for key in allKeys:\n        if i % 100000 == 0:\n            print str(i / 10000) + ' million ids completet'\n        i += 1\n\n        linkOutIds = idLinkoutIds.lrange(key, start=0, end=-1)\n        for eachKey in linkOutIds:\n            idLinkinIds.lpush(eachKey, key) # Write to DB1\n        idLinkoutIds.delete(key) # DB0 is useless, I just need DB1\n\n    idLinkoutIds.save()      \n    idLinkinIds.save()\n\n    print 'Done'\n</code></pre>\n\n<p></i>\n When 1 million keys are processed, the Redis server just shutdown and I got \"ConnectionError: Error 10061 connecting 127.0.0.1:6379\". Then I delete idLinkoutIds.delete(key) just for try and the server shutdown again when 0.8 million keys are processed.</p>\n\n<p>I think it's not the reason of hardware cause I'm using a 64 bit OS and 8G RAM. So I'm really confused. The server just shut down. Who can give me a direction. </p>\n"},{"tags":["python","mongodb","python-3.x"],"answer_count":3,"favorite_count":5,"up_vote_count":8,"down_vote_count":0,"view_count":1717,"score":8,"question_id":5360715,"title":"Is there an equivalent of PyMongo for Python 3.2?","body":"<p>I attempted to install <strong>pymongo</strong> to my Windows box with Python 3.2 through <strong>easy_install</strong>, only to find that it will not install due to incompatibilities with Python 3.2.</p>\n\n<p>Therefore, is there an equivalent to pymongo that will work with Python 3.2? MongoDB is an integral part of the application I was developing on Python 2.7, and to move to Python 3.2 I will need to retain this interactivity.</p>\n\n<p>Thanks!</p>\n"},{"tags":["python","google-app-engine","memcached"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":28,"score":0,"question_id":13224338,"title":"Force immediate availability of item in Memcache","body":"<p>Using Google App Engine NDB, most aspects of memcache are handled automatically. However, an item does not become available in Memcache until it is read at least once. So first the item must be read using get, and then memcache stores it. Put() removes it from memcache.</p>\n\n<p>However, I need something to be available in memcache immediately on put. I'm new to memcache, so I'm not entirely sure how everything works behind the scenes, but there are two ways I can do this:</p>\n\n<ol>\n<li>Immediately after a put() of an entity, do a get(), just so that it becomes available in memcache.</li>\n<li>Immediately after a put(), manually set the item in memcache. This would make sense, but I'm not sure if there are any gotachas with this approach. If I manually set something in memcache, will this interfere with the rest of NDB's automatic memcache handling?\n<strong>Also</strong>, what key should I use when setting something in memcache manually so that upon a get, the automatic memcache handler knows what to look for?</li>\n</ol>\n"},{"tags":["python","windows","python-2.7","64bit","levenshtein-distance"],"answer_count":0,"favorite_count":1,"up_vote_count":2,"down_vote_count":1,"view_count":52,"score":1,"question_id":13140175,"title":"Are there Windows binaries available for the Python Levenshtein library anywhere?","body":"<p><em>Update 2012-11-05</em>: Unfortunately this question is closed so I can't post an answer, but I found pre-compiled binaries for python-Levenshtein <a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/#uncategorized\" rel=\"nofollow\">here</a>. Keep in mind that this is a private site though, and you should not necessarily trust that the binaries are safe. They do work though, for that I can vouch.</p>\n\n<hr>\n\n<p>I need to get one of my projects working on Windows computers, and my project utilizes <a href=\"http://pypi.python.org/pypi/python-Levenshtein/\" rel=\"nofollow\">python-Levenshtein</a>. I really don't want to get into the nightmare of compiling Python libraries containing C code on a Windows computer, so are there some pre-compiled binaries of this library out there?</p>\n\n<p><em>Note: I know <a href=\"http://code.activestate.com/pypm/python-levenshtein\" rel=\"nofollow\">ActiveState has the library I'm looking for</a> available but the 64-bit Windows version that I need is locked and requires the \"Business License\" which is extremely expensive.</em></p>\n"},{"tags":["python","python-2.3"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":64,"score":0,"question_id":13229646,"title":"get line number which variable is defined in a different file","body":"<p>is it possible for me to get the line number which variable is defined in a different file.\nfor example:</p>\n\n<pre><code>file1.py\nx = 5\nmylist = [ 1, 2, 3]\n\n\nfile2.py\n\nexecfile(\"file1.py\")\n# TODO\n# get line number of 'x' or 'mylist'\n</code></pre>\n\n<p>I assume each variable is defined only once but just in case what if they defined multiple times?</p>\n\n<p>Thanks</p>\n"},{"tags":["python","google-app-engine","task-queue","channel-api"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13201532,"title":"How can I get the Python Task Queue and Channel API to send messages and respond to requests during a long-running process?","body":"<p>This is a probably basic question, but I have not been able to find the answer.  </p>\n\n<p>I have a long-running process that produces data every few minutes that I would like the client to receive as soon as it is ready.  Currently I have the long-running process in a Task Queue, and it adds channel messages to another Task Queue from within a for loop.  The client successfully receives the channel messages and downloads the data using a get request; however, the messages are being sent from the task queue after the long-running process finishes (after about 10 minutes) instead of when the messages are added to the task queue.<br>\nHow can I have the messages in the task queue sent immediately?  Do I need to have the for loop broken into several tasks?  The for loop creates a number of dictionaries I think I would need to post to the data store and then retrieve for the next iteration (does not seem like an ideal solution), unless there is an easier way to return data from a task.</p>\n\n<p>When I do not add the messages to a Task Queue and send the messages directly in the for loop, the server does not seem to respond to the client's get request for the data (possibly due to the for loop of the long-running process blocking the response?)</p>\n\n<p>Here is a simplified version of my server code:</p>\n\n<pre><code>from google.appengine.ext import db\nfrom google.appengine.api import channel\nfrom google.appengine.api import taskqueue\nfrom google.appengine.api import rdbms\n\nclass MainPage(webapp2.RequestHandler):\ndef get(self):\n## This opens the GWT app    \n\nclass Service_handler(webapp2.RequestHandler):\ndef get(self, parameters):\n## This is called by the GWT app and generates the data to be \n## sent to the client. \n    #This adds the long-process to a task queue\n    taskqueue.Task(url='/longprocess/', params = {'json_request': json_request}).add(queue_name='longprocess-queue')\n\nclass longprocess_handler(webapp2.RequestHandler):\ndef post(self):\n   #This has a for loop that recursively uses data in dictionaries to \n   #produce kml files every few minutes\n   for j in range(0, Time):\n      # Process data\n      # Send message to client using a task queue to send the message.\n      taskqueue.Task(url='/send/', params).add(queue_name=send_queue_name)\n\nclass send_handler(webapp2.RequestHandler):\ndef post(self):\n    # This sends the message to the client\n    # This is currently not happening until the long-process finishes,\n    # but I would like it to occur immediately.\n\n\nclass kml_handler(webapp2.RequestHandler):\ndef get(self, client_id):\n##  When the client receives the message, it picks up the data here.\n\napp = webapp2.WSGIApplication([\n                        webapp2.Route(r'/', handler=MainPage),\n                        webapp2.Route(r'/Service/', handler=Service_handler),\n                        webapp2.Route(r'/_ah/channel/&lt;connected&gt;/', handler = connection_handler),\n                        webapp2.Route(r'/longprocess/', handler = longprocess_handler),\n                        webapp2.Route(r'/kml/&lt;client_id&gt;', handler = kml_handler),\n                        webapp2.Route(r'/send/', handler = send_handler)\n                        ],\n                      debug=True)\n</code></pre>\n\n<p>Do I need to break up the long-process into tasks that send and retrieve results from the data store in order to have the send_handler execute immediately, or am I missing something?  Thanks</p>\n"},{"tags":["python","numpy","windows-8"],"answer_count":0,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":69,"score":3,"question_id":13230302,"title":"NumPy on Python 3.3 on Windows 8","body":"<p>I am trying to get NumPy to work on my new Windows 8 installation, with Python 3.3 installed. When I try (both) installers from <a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/\" rel=\"nofollow\">here</a>, they crash when I click 'Install'.</p>\n\n<p>Has anyone had success with the same setup?</p>\n\n<hr>\n\n<p>EDIT: Error image: <img src=\"http://i.stack.imgur.com/ZdhdN.png\" alt=\"enter image description here\"></p>\n"},{"tags":["python","sockets","socketserver"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":68,"score":1,"question_id":13229688,"title":"Only receiving one byte from socket","body":"<p>I coded a server program using python.</p>\n\n<p>I'm trying to get a string but i got only a character!\nHow can I receive a string?</p>\n\n<pre><code>def handleclient(connection):                                           \n    while True:                             \n        rec = connection.recv(200)\n        if rec == \"help\": #when I put help in the client program, rec = 'h' and not to \"help\"\n            connection.send(\"Help Menu!\")\n\n\n    connection.send(rec)\n    connection.close()\n\ndef main():\n   while True:\n        connection, addr = sckobj.accept()   \n        connection.send(\"Hello\\n\\r\")\n        connection.send(\"Message: \")   \n        IpClient = addr[0]\n        print 'Server was connected by :',IpClient\n\n\n        thread.start_new(handleclient, (connection,))   \n</code></pre>\n"},{"tags":["python","mongodb","python-2.7","bottle","mongoengine"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":53,"score":0,"question_id":13230284,"title":"Convert mongodb return object to dictionary","body":"<p>I'm using the bottle framework together with mongoengine.\nI have an orders model :</p>\n\n<pre><code>class OrderDetail(Option):\n    orderDetailsQty = FloatField()\n\n    def to_dict(self):\n        return mongo_to_dict_helper(self)\n\n\nclass Order(Document):\n    userName = StringField(required=True)\n    orderDate = DateTimeField()\n    orderStatus = ListField(EmbeddedDocumentField(Status))\n    orderDetails = ListField(EmbeddedDocumentField(OrderDetail))\n    orderComments = ListField(EmbeddedDocumentField(Comment))\n    isActive = BooleanField()\n\n    def to_dict(self):\n        orderObj = mongo_to_dict_helper(self)\n        orderDetailList = []\n        for orderDetail in orderObj[\"orderDetails\"]:\n            orderDetailList.append(orderDetail.__dict__)\n        orderObj[\"OrderDetails\"] = orderDetailList\n        return (self)\n</code></pre>\n\n<p>When mongodb is queried I get an object which is then converted in to a dict by using the following function :</p>\n\n<pre><code>def mongo_to_dict_helper(obj):\n    return_data = []\n    for field_name in obj._fields:\n        if field_name in (\"id\",):\n            continue\n        data = obj._data[field_name]\n\n        if isinstance(obj._fields[field_name], StringField):\n            return_data.append((field_name, str(data)))\n        elif isinstance(obj._fields[field_name], FloatField):\n            return_data.append((field_name, float(data)))\n        elif isinstance(obj._fields[field_name], IntField):\n            return_data.append((field_name, int(data)))\n        elif isinstance(obj._fields[field_name], ListField):\n            return_data.append((field_name, int(data)))\n        else:\n            # You can define your logic for returning elements\n            pass\n    return dict(return_data)\n</code></pre>\n\n<p>I found this function after a long search in the internet. Later found out that this function also fails while defining a member as the ListField(EmbeddedDocumentField(obj)).</p>\n\n<p>I also tried writing a condition for catching the specific case of EmbeddedDocumentField :</p>\n\n<pre><code>elif isinstance(obj._fields[field_name], EmbeddedDocumentField):\n    return_data.append(mongo_to_dict_helper(data))\n</code></pre>\n\n<p>but that didn't do any good either.</p>\n\n<p>Anyone have a workaround for this issue ?</p>\n"},{"tags":["python","cassandra","cql"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":57,"score":1,"question_id":13217434,"title":"Insert to cassandra from python using cql","body":"<p>I'm planning to insert data to bellow CF that has compound keys.</p>\n\n<pre><code>CREATE TABLE event_attend (\n    event_id int,\n    event_type varchar,\n    event_user_id int,\n    PRIMARY KEY (event_id, event_type)    #compound keys...\n);\n</code></pre>\n\n<p>But I can't insert data to this CF from python using cql.\n(http://code.google.com/a/apache-extras.org/p/cassandra-dbapi2/)</p>\n\n<pre><code>import cql\nconnection = cql.connect(host, port, keyspace)\ncursor = connection.cursor()\ncursor.execute(\"INSERT INTO event_attend (event_id, event_type, event_user_id) VALUES (1, 'test', 2)\", dict({}) )\n</code></pre>\n\n<p>I get the following traceback:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"./v2_initial.py\", line 153, in &lt;module&gt;\n  db2cass.execute()\nFile \"./v2_initial.py\", line 134, in execute\n  cscursor.execute(\"insert into event_attend (event_id, event_type, event_user_id ) values (1, 'test', 2)\", dict({}))\nFile \"/usr/local/pythonbrew/pythons/Python-2.7.2/lib/python2.7/site-packages/cql-1.4.0-py2.7.egg/cql/cursor.py\", line 80, in execute\n  response = self.get_response(prepared_q, cl)\nFile \"/usr/local/pythonbrew/pythons/Python-2.7.2/lib/python2.7/site-packages/cql-1.4.0-py2.7.egg/cql/thrifteries.py\", line 80, in get_response\n  return self.handle_cql_execution_errors(doquery, compressed_q, compress)\nFile \"/usr/local/pythonbrew/pythons/Python-2.7.2/lib/python2.7/site-packages/cql-1.4.0-py2.7.egg/cql/thrifteries.py\", line 98, in handle_cql_execution_errors\n  raise cql.ProgrammingError(\"Bad Request: %s\" % ire.why)\ncql.apivalues.ProgrammingError: Bad Request: unable to make int from 'event_user_id'\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"},{"tags":["python","django"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":83,"score":1,"question_id":5369225,"title":"What does \"children__\" mean in Django? Where is it documented?","body":"<p>I am trying to parse this Django code (without any familiarity with Django, I might add)</p>\n\n<pre><code>Question.objects.filter(children__marked=True)\n</code></pre>\n\n<p>I know the model contains a table called \"forum_node\" with one of the column named \"marked\". From what I understand, this statement fetches all the questions where any of its children (= answers) are accepted (or \"marked\"). How does this magic work?</p>\n"},{"tags":["python","azure"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13229551,"title":"How to connect python to SQL Azure?","body":"<p>I would like to develop an apps using python/webapp2, which is required SQL Azure database hosted in Azure Cloud. How can i connect python to SQL Azure?</p>\n"},{"tags":["python","internationalization","pyramid","jinja2"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13177258,"title":"Pyramid i18n use two locale directories","body":"<p>How to use locale directory from include package and locale directory in my own project.</p>\n\n<p>My main function</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>settings = dict(settings)\nsettings.setdefault('jinja2.i18n.domain', 'mypackage1, mypackage2') #NOT WORK!!!\n\nconfig.include(\"mypackage1\")\nconfig.add_jinja2_search_path((\"mypackage1:templates\",\n                               \"mypackage2:templates\"))\n\nconfig.add_translation_dirs(\"mypackage1:locale/\",\n                            \"mypackage2:locale/\")\nconfig.add_jinja2_search_path((\"mypackage1:templates\",\n                               \"mypackage2:templates\"))\n\nreturn config.make_wsgi_app()\n</code></pre>\n"},{"tags":["python","sql","database","firebird","firebird2.5"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":38,"score":-2,"question_id":13230203,"title":"Receiving quantity and list of fields of the table in Firebird","body":"<p>What sql request receives quantity of fields of the table Firebird in firebirdsql connection with database? What sql request receives the list of fields of the table Firebird in firebirdsql connection with database? It is not duplicate of <a href=\"http://stackoverflow.com/questions/13227764/receiving-quantity-and-list-of-fields-of-the-table\">Receiving quantity and list of fields of the table</a>, Now I want to know this for firebird database with firebirdsql connection in Python?</p>\n"},{"tags":["python","list","python-2.7"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13218865,"title":"List duplicate data concatenation in python","body":"<p>i am a newbie in python and facing issue in getting this output</p>\n\n<pre><code> a = [('textVerify', 'AH', 'SELECT SERVICES'), ('textVerify', 'F7', 'test1&gt;'),('audioVerify', '091;0'), ('imageVerify', 'duck.gif'),('imageVerify', 'egg.gif')]\n</code></pre>\n\n<p>i want to create a new list which should hold all the 0th unique element like</p>\n\n<pre><code>  audioVerify,imageVerify,textVerify\n</code></pre>\n\n<p>so the result expected is</p>\n\n<pre><code> ['textVerify',(('AH', 'SELECT SERVICES'), ('F7', 'test1&gt;'))  'audioVerify', ('091;0'),  ('imageVerify', ('duck.gif','egg.gif')]\n</code></pre>\n"},{"tags":["python","parsing","dateutil"],"answer_count":4,"favorite_count":1,"up_vote_count":7,"down_vote_count":0,"view_count":362,"score":7,"question_id":7028689,"title":"How to parse multiple dates from a block of text in Python (or another language)","body":"<p>I have a string that has several date values in it, and I want to parse them all out. The string is natural language, so the best thing I've found so far is <a href=\"http://labix.org/python-dateutil\">dateutil</a>. </p>\n\n<p>Unfortunately, if a string has multiple date values in it, dateutil throws an error:</p>\n\n<pre><code>&gt;&gt;&gt; s = \"I like peas on 2011-04-23, and I also like them on easter and my birthday, the 29th of July, 1928\"\n&gt;&gt;&gt; parse(s, fuzzy=True)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/lib/pymodules/python2.7/dateutil/parser.py\", line 697, in parse\n    return DEFAULTPARSER.parse(timestr, **kwargs)\n  File \"/usr/lib/pymodules/python2.7/dateutil/parser.py\", line 303, in parse\n    raise ValueError, \"unknown string format\"\nValueError: unknown string format\n</code></pre>\n\n<p>Any thoughts on how to parse all dates from a long string? Ideally, a list would be created, but I can handle that myself if I need to.</p>\n\n<p>I'm using Python, but at this point, other languages are probably OK, if they get the job done.</p>\n\n<p>PS - I guess I could recursively split the input file in the middle and try, try again until it works, but it's a hell of a hack.</p>\n"},{"tags":["python"],"answer_count":4,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":88,"score":1,"question_id":13229760,"title":"Does Python support ++?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/1485841/behaviour-of-increment-and-decrement-operators-in-python\">Behaviour of increment and decrement operators in Python</a>  </p>\n</blockquote>\n\n\n\n<p>I'm new to Python, I'm confused about ++ python. I've tried to ++num but num's value is not changed:</p>\n\n<pre><code>&gt;&gt;&gt; a = 1\n&gt;&gt;&gt; ++a\n1\n&gt;&gt;&gt; print a\n1\n&gt;&gt;&gt; print(++a)\n1\n</code></pre>\n\n<p>Could somebody explain this? If Python support ++, why num has not changed. If it doesn't why can I use ++?</p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":40,"score":0,"question_id":13229572,"title":"Dynamic classes import and object building","body":"<p>I have a python package which gathers multiple modules. In those modules, I have multiple classes heriting from a Component class. I'd like to make the load of those classes dynamic and to build some object dynamically.</p>\n\n<pre><code>ex: \npackage/module1.py\n       /module2.py\n</code></pre>\n\n<p>in <code>module1.py</code>, there is multiple classes heriting from the class Component, the same with <code>module2.py</code>, of course the number of classes and package is unknown. The final user define which object has to be built in a config file. In order to iter throught modules, I use the pkgutil.iter_modules which is working. From my function in charge to build the components, I do like this:</p>\n\n<pre><code>[...]\nmyPckge = __import__('package.module1', globals(), locals(), ['class1'], -1)\ncmpt_object = locals()[component_name](self, component_prefix, *args)\n[...]\n</code></pre>\n\n<p>However, this is not working as the class is not recognized, the following works but is not dynamic:</p>\n\n<pre><code>cmpt_object = myPckge.class1(self, component_prefix, *args)\n</code></pre>\n\n<p>thanks for your reply</p>\n"},{"tags":["c++","python","pipe","popen","unbuffered"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":50,"score":0,"question_id":13229825,"title":"Unbuffered communication between C++ and Python","body":"<p>I want to pass data from C++ to Python in Linux and I do this through a pipe.\nMy C++ program looks like this:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;stdio.h&gt;\n#include&lt;sstream&gt;\n#include&lt;math.h&gt;\n\nint main() {\n    FILE *cmd;\n\n    std::ostringstream ss;\n    double val;\n\n    cmd = popen(\"python plot.py\",\"w\");\n    for (int i=0; i&lt;100; i++) {\n        val = cos(3.14159*i/40);\n        ss.str(\"\");\n        ss &lt;&lt; val &lt;&lt; std::endl;\n        fputs(ss.str().c_str(),cmd);\n        fflush(cmd);\n    }\n    fputs(\"\\n\",cmd);\n    fflush(cmd);\n    pclose(cmd);\n    return 0;     \n}\n</code></pre>\n\n<p>The corresponding python function plot.py looks like:</p>\n\n<pre><code>fig, = plt.plot([],[])\nindex = 0\nplt.ion()\nwhile True:\n    data = sys.stdin.readline().strip()\n    if not data:\n        plt.ioff()\n        break\n    index = index + 1\n    val = [float(n) for n in self.data.split()]\n\n    fig.set_xdata(numpy.append(fig.get_xdata(),index))\n    fig.set_ydata(numpy.append(fig.get_ydata(),val))\n    axis = list(plt.axis())\n    min_x = 0      \n    max_x = max(self.fig.get_xdata())\n    min_y = min(self.fig.get_ydata())\n    max_y = max(self.fig.get_ydata())\n    axis[0] = min_x\n    axis[1] = max_x\n    axis[2] = min_y\n    axis[3] = max_y\n    plt.axis(axis)\n    plt.draw()\nplt.show()\n</code></pre>\n\n<p>Now my problem is that there seems to be a buffering of data from my c++ function before data is being passed to the python function, which I am not able to get rid of. I have searched for a solution but have not been able to find any. The best suggestion I could find was to use setvbuf in the c++ function, so I also tried to include the following line to the c++ function</p>\n\n<pre><code>setvbuf(cmd,NULL,_IONBUF,0)\n</code></pre>\n\n<p>But that did not have any effects.</p>\n\n<p>Does anyone know how I can pass data from my c++ function to python in an unbuffered manner?</p>\n"},{"tags":["python","arrays","list","max"],"answer_count":3,"favorite_count":1,"up_vote_count":0,"down_vote_count":2,"view_count":54,"score":-2,"question_id":13229542,"title":"python max of list of arrays with lists","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/13227578/python-max-of-list-of-arrays\">python max of list of arrays</a>  </p>\n</blockquote>\n\n\n\n<p>I have a list of arrays like:</p>\n\n<pre><code>a = [array([ [6,2] , [6,2] ]),array([ [8,3],[8,3] ]),array([ [4,2],[4,2] ])]\n</code></pre>\n\n<p>I tried <code>max(a)</code> which returns the following error:</p>\n\n<pre><code>ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()\n</code></pre>\n\n<p>I want it to return either a list or array like:</p>\n\n<pre><code>In: max(a)\nOut: [[8,3],[8,3]]\n</code></pre>\n\n<p>I don't want to convert the inner arrays to list, because the size of the list is very big. Also I purposefully created like that to perform array operations.</p>\n"},{"tags":["python","random","numbers"],"answer_count":15,"favorite_count":16,"up_vote_count":25,"down_vote_count":1,"view_count":6928,"score":24,"question_id":2076838,"title":"Generating non-repeating random numbers in Python","body":"<p>Ok this is one of those trickier than it sounds questions so I'm turning to stack overflow because I can't think of a good answer. Here is what I want: I need Python to generate a simple a list of numbers from 0 to 1,000,000,000 in random order to be used for serial numbers (using a random number so that you can't tell how many have been assigned or do timing attacks as easily, i.e. guessing the next one that will come up). These numbers are stored in a database table (indexed) along with the information linked to them. The program generating them doesn't run forever so it can't rely on internal state.</p>\n\n<p>No big deal right? Just generate a list of numbers, shove them into an array and use Python \"random.shuffle(big_number_array)\" and we're done. Problem is I'd like to avoid having to store a list of numbers (and thus read the file, pop one off the top, save the file and close it). I'd rather generate them on the fly. Problem is that the solutions I can think of have problems:</p>\n\n<p>1) Generate a random number and then check if it has already been used. If it has been used generate a new number, check, repeat as needed until I find an unused one. Problem here is that I may get unlucky and generate a lot of used numbers before getting one that is unused. Possible fix: use a very large pool of numbers to reduce the chances of this (but then I end up with silly long numbers).</p>\n\n<p>2) Generate a random number and then check if it has already been used. If it has been used add or subtract one from the number and check again, keep repeating until I hit an unused number. Problem is this is no longer a random number as I have introduced bias (eventually I will get clumps of numbers and you'd be able to predict the next number with a better chance of success).</p>\n\n<p>3) Generate a random number and then check if it has already been used. If it has been used add or subtract another randomly generated random number and check again, problem is we're back to simply generating random numbers and checking as in solution 1.</p>\n\n<p>4) Suck it up and generate the random list and save it, have a daemon put them into a Queue so there are numbers available (and avoid constantly opening and closing a file, batching it instead). </p>\n\n<p>5) Generate much larger random numbers and hash them (i.e. using MD5) to get a smaller numeric value, we should rarely get collisions, but I end up with larger than needed numbers again.</p>\n\n<p>6) Prepend or append time based information to the random number (i.e. unix timestamp) to reduce chances of a collision, again I get larger numbers than I need.</p>\n\n<p>Anyone have any clever ideas that will reduce the chances of a \"collision\" (i.e. generating a random number that is already taken) but will also allow me to keep the number \"small\" (i.e. less than a billion (or a thousand million for your europeans =)).</p>\n\n<p>Answer and why I accepted it:</p>\n\n<p>So I will simply go with 1, and hope it's not an issue, however if it is I will go with the deterministic solution of generating all the numbers and storing them so that there is a guarentee of getting a new random number, and I can use \"small\" numbers (i.e. 9 digits instead of an MD5/etc.). </p>\n"},{"tags":["python","django","django-timezone"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":44,"score":0,"question_id":13225890,"title":"Django default=timezone.now() saves records using \"old\" time","body":"<p>This issue has been occurring on and off for a few weeks now, and its unlike any that has come up with my project. </p>\n\n<p>So two of the models that are used have a timestamp field, which is on default set to <code>timezone.now()</code>. </p>\n\n<p>So here is the sequence that raises error flags:</p>\n\n<pre><code>Model one is created at time 7:30 PM\nModel two is created at time 10:00 PM, but in the \n   MySQL database it's stored as 7:30 PM! Despite having default=timezone.now()\n\nNow ... Every model that is created in a mystery time (I didn't record), will\nhave it's time stamp saved under 7:30 PM, not the actual time, UNTILL a certain\nduration passes, then a new time will be set and all the following models will\nhave that new time... Bizzare\n</code></pre>\n\n<p>Some extra details which may help in discovering the issue:</p>\n\n<p>I have a bunch of methods that I use to strip my timezones of their <code>tzinfo</code>'s and replace them with UTC. </p>\n\n<p>This is because I'm doing a <code>timezone.now()</code> - creationTime calculation to create a: \"model was posted this long ago\" feature\nin the project. However, this really should not be the cause of the problem.</p>\n\n<p>I don't think using <code>datetime.datetime.now()</code> will make any differences either.</p>\n\n<p>Anyways, thanks for the help!</p>\n"},{"tags":["python","argparse"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":38,"score":0,"question_id":13109103,"title":"More flexible command line parameter parser than ArgParse?","body":"<p>I want to parse a parameter like:</p>\n\n<pre><code>command --ethX\n</code></pre>\n\n<p>Where X is a number starting from 0. Is that possible directly with ArgParse ? As it seems not, is there a way to ask ArgParse to let the programmer deals with this parameter, but keeping the parameter like <code>ethX</code> when printing help ?</p>\n\n<p>If not, is there any parser alternative in python which can do this ?</p>\n"},{"tags":["python","django","facebook-graph-api"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13228847,"title":"Resolve FB GraphAPI picture call to the final URL","body":"<p>I'm developing an application that displays a users/friends photos. For the most part I can pull photos from the album, however for user/album cover photos, all that is given is the object ID for which the following URL provides the image:</p>\n\n<p><code>https://graph.facebook.com/1015146931380136/picture?access_token=ABCDEFG&amp;type=picture</code></p>\n\n<p>Which when viewed redirects the user to the image file itself such as:</p>\n\n<p><code>https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash4/420455_1015146931380136_78924167_s.jpg</code></p>\n\n<p>My question is, is there a Pythonic or GraphAPI method to resolve the final image path an avoid sending the Access Token to the end user?</p>\n"},{"tags":["python","data-structures","hash","immutable"],"answer_count":7,"favorite_count":8,"up_vote_count":16,"down_vote_count":0,"view_count":2201,"score":16,"question_id":2671376,"title":"Hashable, immutable","body":"<p>From a recent SO question (see <a href=\"http://stackoverflow.com/questions/2671211/create-a-dictionary-in-python-which-is-indexed-by-lists\">http://stackoverflow.com/questions/2671211/create-a-dictionary-in-python-which-is-indexed-by-lists</a>) I realized I probably had a wrong concept of the meaning of hashable and immutable objects in python.</p>\n\n<p>What hashable means in practice?,</p>\n\n<p>What the relation between hashable and immmutable is?</p>\n\n<p>There are mutable objects that are hashable? And immutable not hashable? </p>\n"},{"tags":["python","wxpython"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13229281,"title":"wxPython: Placement of scrollbar in ScrolledPanel","body":"<p>I was wondering if there is any way to control the location of the scrollbar from a scrolledpanel? More specifically: I use a horizontally scrolled panel and it would be nice if the scrollbar was on top of the panel (instead of bottom) and would only span 80% of the horizontal distance.</p>\n\n<p>Is something like this possible?</p>\n\n<p>Thanks...</p>\n"},{"tags":["python","django","portability"],"answer_count":4,"favorite_count":1,"up_vote_count":9,"down_vote_count":0,"view_count":2750,"score":9,"question_id":5493776,"title":"Django: 'current_tags' is not a valid tag library","body":"<p>I have a small Django project I received from a friend. The code works perfectly on his system. However, on my system I get the following error message when running the server:</p>\n\n<blockquote>\n  <p><strong>TemplateSyntaxError at /</strong></p>\n  \n  <p>'current_tags' is not a valid tag library: Template library current_tags not found, tried django.templatetags.current_tags</p>\n</blockquote>\n\n<p>The problem is with a line in an html file:</p>\n\n<pre><code>{% load current_tags %}\n</code></pre>\n\n<p>This exact same code works on his system with no errors. What could that be?</p>\n"},{"tags":["python","r","time-series","forecasting"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":1,"view_count":84,"score":0,"question_id":13197097,"title":"Forecast Package from R in Python","body":"<p>I found forecast package from R the best solution for time series analysis and forecasting. </p>\n\n<p>I want to use it in Python. Could I use rpy and after take the forecast package in Python?</p>\n"},{"tags":["python"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":76,"score":-4,"question_id":13228686,"title":"Two questions about Python","body":"<pre><code>def punctuation(x,y):\n if len(x) == 0:\n     return y\n\n if '.' in x[0]:\n     x[1] = x[1].capitalize()\n     return punctuation(x[1:],y.append(x[0]))\n elif '!' in x[0]:\n     x[1] = x[1].capitalize()\n     return punctuation(x[1:],y.append(x[0]))\n elif '?' in x[0]:\n     x[1] = x[1].capitalize()\n     return punctuation(x[1:],y.append(x[1]))\n else:\n     return punctuation(x[1:],x[0])\n\n\n z = ['!a','b'] \n punctuation(z,[])\n</code></pre>\n\n<p>Hope to get  ['!a','b'] ,which means if the first item contains (!,?,.),the second one become capitalize</p>\n\n<pre><code>Q3_p1 = \"Enter the digit on the phone (0-9): \"\nQ3_p2 = \"Enter the number of key presses (&gt;0): \"\n\n\n\ndef enter_msg(n):\n    x=raw_input(Q3_p1)\n    y=raw_input(Q3_p1)\n    Jay = Jay_chou(x,y)\n    return Jay\n\n def Jay_chou(d,n):\n\n     if d==0: return \" \" \n     elif d==1: return [\".\", \",\", \"?\"][n%3-1]\n     elif d==2: return [\"a\", \"b\", \"c\"][n%3-1]\n     elif d==3: return [\"d\", \"e\", \"f\"][n%3-1]\n     elif d==4: return [\"g\", \"h\", \"i\"][n%3-1]\n     elif d==5: return [\"j\", \"k\", \"l\"][n%3-1]\n     elif d==6: return [\"m\", \"n\", \"o\"][n%3-1]\n     elif d==7: return [\"p\", \"q\", \"r\", \"s\"][n%4-1]\n     elif d==8: return [\"t\", \"u\", \"v\"][n%3-1]\n     else: return [\"w\", \"x\", \"y\", \"z\"][n%4-1]\n\n\n enter_msg(2)\n</code></pre>\n\n<p>i don't know why i got the error\ni see this:</p>\n\n<pre><code>Enter the digit on the phone (0-9): 1\n\nEnter the digit on the phone (0-9): 1\n\n['1', '1']\n\nTypeError: not all arguments converted during string formatting\n</code></pre>\n"},{"tags":["python","osx","unicode","ide","utf-8"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":433,"score":2,"question_id":6701570,"title":"Can't input unicode in python IDE (Mac OS X)","body":"<p>I'm trying to collect some unicode raw_input in the default python IDE, and as far as I'm aware, it should be as simple as:</p>\n\n<pre><code>&gt;&gt;&gt; c = raw_input()\n日本語\n&gt;&gt;&gt; print c\n日本語\n</code></pre>\n\n<p>However, when I try to input the unicode characters, the computer beeps some protestations and I end up with an empty string.  (To do this, I click on the IME switcher near the time and select the appropriate input method [which in this case is Japanese input).  Outside of the python IDE, the input works fine, I can input the characters and the system recognizes them as having been input.  In the IDE, I'll type some hiragana, and the drop-down kanji selection window appears as usual, but when I select the appropriate representation and hit enter, those beeps come and I wind up with nothing.  I figure there's a setting involved somewhere that I've missed.</p>\n\n<p>versions are:</p>\n\n<pre><code>Python 2.6.1 (r261:67515, Jun 24 2010, 21:47:49) \n[GCC 4.2.1 (Apple Inc. build 5646)] on darwin\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Python 2.5.4 (r254:67916, Jun 24 2010, 21:47:25) \n[GCC 4.2.1 (Apple Inc. build 5646)] on darwin\n</code></pre>\n\n<p>neither of which work.  There's also this:</p>\n\n<pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; sys.getdefaultencoding()\n'ascii'\n&gt;&gt;&gt; sys.stdin.encoding\n'UTF-8'\n&gt;&gt;&gt; sys.stdout.encoding\n'UTF-8'\n&gt;&gt;&gt; sys.getfilesystemencoding()\n'utf-8'\n</code></pre>\n\n<p>but from what I've read, the defaultencoding is a mysterious beast.  Changing it doesn't actually fix anything anyway.  That is, </p>\n\n<pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; sys.setdefaultencoding('utf-8')\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'module' object has no attribute 'setdefaultencoding'\n&gt;&gt;&gt; reload(sys)\n&lt;module 'sys' (built-in)&gt;\n&gt;&gt;&gt; sys.setdefaultencoding('utf-8')\n&gt;&gt;&gt; # !!!\n... c = raw_input()\nno dice!\n</code></pre>\n\n<p>doesn't work.  Just more beeping.  I can't cut-and-paste Japanese text from other applications, either.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["python","layout","plot","matplotlib"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":27,"score":0,"question_id":13228254,"title":"subplots are overlapping axis labels","body":"<p>I have created a figure in python which contains multiple subplots. I have also added various axis labels to some of the axes on the figures. For examples:</p>\n\n<pre><code>plt.xlabel('Phase ($^\\circ$)',fontsize=10)\n</code></pre>\n\n<p>I notice though, that when the final figure is produced, the other subplots are allowed to overlap and obscure the words of the axis labels.</p>\n\n<p>Is there a way that I can stop this happening?</p>\n"},{"tags":["python","python-2.7"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":45,"score":1,"question_id":13227494,"title":"Paging output from print statement","body":"<p>I'm essentially trying to achieve this:</p>\n\n<pre><code>&gt;&gt;&gt;print \"SOME_VERY_LONG_TEXT\" | more\n</code></pre>\n\n<p>Of course, it doesn't work in Python 2.7(IDLE). </p>\n\n<p>Also, I tried pager 1.2's page function (http://pypi.python.org/pypi/pager/1.2),  but I don't know how to get it to work correctly. </p>\n\n<p>Any ideas?</p>\n\n<p><strong>[UPDATE]</strong></p>\n\n<p>I found a lazy way, as follows,</p>\n\n<p><code>\n   import pydoc</p>\n\n<p>pydoc.pager(\"SOME_VERY_LONG_TEXT\") \n   </code></p>\n"},{"tags":["python","decorator","fsm"],"answer_count":2,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":36,"score":2,"question_id":13228620,"title":"Create class with decorator","body":"<p>I've implemented a <code>Finite state machine</code> in python. This works but implementing a state needs to write unnecessary code.</p>\n\n<pre><code>class State:\n    def __init__(self):\n        &lt;do something&gt;\n\n    def __call__():\n       &lt;do something different&gt;\n\nclass ConcreteState(State):\n    def __init__(self):\n       super().__init__()\n\n    def __call__():\n        super().__call__()\n       &lt;do concrete state implementation&gt;\n</code></pre>\n\n<p>Is it possible to make a <code>decorator</code> in order to implement a concrete state like the following example?</p>\n\n<pre><code>@StateDecorator\ndef concreteState():\n   &lt;do concrete state implementation&gt;\n</code></pre>\n"},{"tags":["python","python-3.x"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":57,"score":0,"question_id":13226680,"title":"Python - occurrence of substring in a list of lists","body":"<p>I am working with a function that would search for a substring in a list of lists, as the first three characters of each item in the list.  For example, if the substring is <code>'aaa'</code> and the list of lists is <code>[['aaa111', 'aba123', 'aaa123'], ['aaa302', 'cad222']]</code>, I would like the function to return a list of percentages <code>[66, 50]</code>, since <code>'aaa'</code> appears in the first list 2/3 times, and in the second list 1/2 times.  So far I have:</p>\n\n<pre><code>def percentage(list_of_lists, substring):\n    count = 0\n    percentage = []\n    for item in list_of_lists:\n        for i in item:\n            if substring == i[0:3]:\n                count += 1\n        percentage.append(int(count / len(item) * 100))\n    return percentage\n</code></pre>\n\n<p>I understand that my code may be excessive, but I'm just getting the gist of Python so I'm not worried.  </p>\n\n<pre><code>&gt;&gt;&gt; percentage([['aaa111', 'aba123', 'aaa123'], ['aaa302', 'cad222']], 'aaa')\n[66, 150]\n</code></pre>\n\n<p>How do I make it count list by list in my list_of_lists?</p>\n"},{"tags":["python","cruisecontrol.net","nant"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":11,"score":0,"question_id":13228677,"title":"Run python script from CruiseControl.NET","body":"<p>Is is posible to run a python script from Cruisecontrol.Net ? Is there a CCNEt task or a nant task that can be used? </p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":24,"score":0,"question_id":13226398,"title":"Reading data through XML file tag and inseting newline while outputting to outlook","body":"<p>I have the following data in an XML file which i am reading using the below mentioned python code and then writing that to outlook,when its written to outlook I see all the data gets printed in one line..I want to print one line after the other,I tried to use \"br\" tag in the xml file at the end of everyline,wrap each line around \"br\"and \"/br\" but nothing seems to work,any suggestions?\nXML</p>\n\n<pre><code>&lt;rel_notes&gt;\n    1.)Please move to this build for all further test and development \n    activities .\n    2.)Please use this as a basebuild to verify \n    compilation and sanity\n    3.)Any CL that nees to be integrated must \n    have a CL\n&lt;/rel_notes&gt;\n</code></pre>\n\n<p>Python code</p>\n\n<pre><code>from xml.etree import cElementTree as etree\ntree = etree.parse(file)\nReleasenotes = ('\\n'.join(elem.text for elem in tree.iter('rel_notes')))\n</code></pre>\n\n<p>OUTPUT</p>\n\n<pre><code>Release notes: 1.)Please move to this build for all further test and development activities 2.)Please use this as a basebuild to verify compilation and sanity 3.)Any CL that nees to be integrated must have a CL\n</code></pre>\n"},{"tags":["python","xml","xml-parsing"],"answer_count":3,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":60,"score":2,"question_id":13228223,"title":"Iterating through a xml is not working in python","body":"<p>My XML:</p>\n\n<pre><code>&lt;animals&gt;\n  &lt;animal name=\"fox\" fullname=\"fullfox\"&gt;&lt;/animal&gt;\n  &lt;animal name=\"dog\" fullname=\"halfdog\"&gt;&lt;food&gt;milk&lt;/food&gt;&lt;food&gt;rice&lt;/food&gt;&lt;food&gt;meat&lt;/food&gt;   &lt;/animal&gt;\n  &lt;animal name=\"cow\" fullname=\"doublecow\"&gt;&lt;food&gt;grass&lt;/food&gt;&lt;/animal&gt;\n  &lt;animal name=\"blabla\" fullname=\"fullbla\"&gt;&lt;/animal&gt;\n&lt;/animals&gt;\n</code></pre>\n\n<p>I'm trying to parse this XML to get same XML as output.</p>\n\n<pre><code>doc    = ET.parse(\"an.xml\")\nroot = doc.getroot() #Returns the root element for this tree.\nroot_new  = ET.Element(\"animals\") \nfor child in root:\n    name = child.attrib['name']\n    fullname = child.attrib['fullname']\n\nfor g in root.findall(\"*/food\"):\n    animal    = ET.SubElement(root_new, \"animal\") \n    food     = ET.SubElement(animal, \"food\")   \n    food.text = g.text\n    animal.set(\"name\",name)               \n    animal.set(\"fullname\",fullname) \n\ntree = ET.ElementTree(root_new)\ntree.write(sys.stdout)\n</code></pre>\n\n<p>But am getting only last value</p>\n\n<pre><code>&lt;animals&gt;\n  &lt;animal fullname=\"fullbla\" name=\"blabla\"&gt;&lt;food&gt;milk&lt;/food&gt;&lt;/animal&gt;\n  &lt;animal fullname=\"fullbla\" name=\"blabla\"&gt;&lt;food&gt;rice&lt;/food&gt;&lt;/animal&gt;\n  &lt;animal fullname=\"fullbla\" name=\"blabla\"&gt;&lt;food&gt;meat&lt;/food&gt;&lt;/animal&gt;\n  &lt;animal fullname=\"fullbla\" name=\"blabla\"&gt;&lt;food&gt;grass&lt;/food&gt;&lt;/animal&gt;\n&lt;/animals&gt;\n</code></pre>\n\n<p>And food node also wrong, how to iterate exactly like my input XML?</p>\n"},{"tags":["python","django","filter","queryset","modelform"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":32,"score":0,"question_id":13227434,"title":"How to set modelform instance based queryset results","body":"<p>I have a querylist that returns possible solutions to a problem. The list returns the results that I am expecting. I am trying to add a checkbox form that correlates to each item on the querylist. Its not too fancy, I just need to check the box and update the model. I have two <strong>models</strong>:</p>\n\n<pre><code>149 class TaskSolution(models.Model):                                                                                                           \n150     solution          = models.TextField()                                                                                                  \n151     submitter         = models.ForeignKey(User, null=True, blank=True)                                                                       \n152     relatedtask       = models.ForeignKey(Task, null=True, blank=True)                                                                      \n153     solutionnumber    = models.IntegerField(editable=False)                                                                                 \n154     date_created      = models.DateTimeField(editable=False)                                                                                 \n155     date_updated      = models.DateTimeField(editable=False)                                                                                \n156     confimed_solution = models.BooleanField()                                                                                               \n157     objects           = SolutionVoteManager()\n\n160     def save(self, *args, **kwargs):                                                                                                        \n161         if not self.id:                                                                                                                     \n162             self.date_created = datetime.now()                                                                                              \n163         self.date_updated = datetime.now()                                                                                                  \n164         super(TaskSolution, self).save(*args, **kwargs)                                                                                     \n\n166     def __unicode__(self):                                                                                                                  \n167         return self.id                                                                                                                      \n\n169     def __unicode__(self):                                                                                                                  \n170         return \"%s\" % self.object_pk                                                                                                        \n\n172     def __unicode__(self):                                                                                                                  \n173         return self.solution  \n\n\n184 class MarkedSolved(models.Model):                                                                                                           \n185     is_solution      = models.BooleanField(verbose_name='')                                                                                 \n186     related_idea     = models.ForeignKey(Idea, editable=False)                                                                              \n187     related_task     = models.ForeignKey(Task, editable=False)                                                                              \n188     related_solution = models.IntegerField(editable=False)                                                                                  \n189     date_updated     = models.DateTimeField(editable=False)                                                                                 \n\n191     def save(self, *args, **kwargs):                                                                                                        \n192         self.date_updated = datetime.now()                                                                                                  \n193         super(MarkedSolved, self).save(*args, **kwargs)                                                                                     \n\n195     def __unicode__(self):                                                                                                                  \n196         return self.id                                                                                                                      \n\n198     def __unicode__(self):                                                                                                                  \n199         return \"%s\" % self.object_pk                                                                                                        \n\n201     def __unicode__(self):                                                                                                                  \n202         return \"%s\" % self.is_solution\n\n204 class MarkedSolved(ModelForm):                                                                                                          \n205     class Meta:                                                                                                                             \n206         model = MarkedSolved      \n</code></pre>\n\n<p>Now in my <strong>View</strong> I have the following queryset:</p>\n\n<pre><code>solution_list = TaskSolution.objects.filter(relatedtask__id=task_id) \n</code></pre>\n\n<p>This is fine as it returns the solutions as expected. The issue I am now having is I would Like the MarkSolved form initial value to correlate with the solution_list value.</p>\n\n<pre><code> 393 if request.method == 'POST':                                                                                                                                                                                                                              \n 394         mark_solved_form = PostMarkedSolved(data=request.POST, instance=solution_task)\n</code></pre>\n\n<p>Essentially I am looking for a query like this:</p>\n\n<pre><code>select * from markedsolved a, tasksolution b where a.related_solution=b.solutionnumber and a.related_solution=1 and b.solutionnumber=1 and a.related_task_id = 5 and b.relatedtask_id=5;\n</code></pre>\n\n<p>Where all the values match up from the two models in the queryset. That query returns the exact results I would like, but I am at a loss on now to populate the initial value based on the solution_list results.</p>\n"},{"tags":["python","mongodb","mongoengine"],"answer_count":3,"favorite_count":0,"up_vote_count":0,"down_vote_count":1,"view_count":31,"score":-1,"question_id":13219461,"title":"issue in mongoengine: ReferenceFields will default to using ObjectId","body":"<p>Following this official <a href=\"https://mongoengine-odm.readthedocs.org/en/latest/tutorial.html\" rel=\"nofollow\">tutorial</a> I've coded this:</p>\n\n<pre><code>#! /usr/bin/env python\n\nfrom mongoengine import *\n\nconnect('tumbleblog')\n\n\nclass User(Document):\n  email = StringField(required=True)\n  first_name = StringField(max_length=50)\n  last_name = StringField(max_length=50)\n\nclass Comment(EmbeddedDocument):\n  content = StringField()\n  name = StringField(max_length=120)\n\nclass Post(Document):\n  title = StringField(max_length=120, required=True)\n  author = ReferenceField(User, reverse_delete_rule=CASCADE)\n  tags = ListField(StringField(max_length=30))\n  comments = ListField(EmbeddedDocumentField(Comment))\n\nclass TextPost(Post):\n  content = StringField()\n\nclass ImagePost(Post):\n  image_path = StringField()\n\nclass LinkPost(Post):\n  link_url = StringField()\n\n\njohn = User(email=\"example@gmail.com\",first_name='john', last_name='doe')\njohn.save()\n</code></pre>\n\n<p>But I don't know why when trying to run it it says:</p>\n\n<pre><code>/Library/Python/2.7/site-packages/mongoengine/fields.py:736: FutureWarning: ReferenceFields will default to using ObjectId  strings in 0.8, set DBRef=True if this isn't desired\n  warnings.warn(msg, FutureWarning)\n/Library/Python/2.7/site-packages/mongoengine/base.py:589: FutureWarning: TextPost uses inheritance, the default for allow_inheritance is changing to off by default. Please add it to the document meta.\n  FutureWarning\n/Library/Python/2.7/site-packages/mongoengine/base.py:589: FutureWarning: ImagePost uses inheritance, the default for allow_inheritance is changing to off by default. Please add it to the document meta.\n  FutureWarning\n/Library/Python/2.7/site-packages/mongoengine/base.py:589: FutureWarning: LinkPost uses inheritance, the default for allow_inheritance is changing to off by default. Please add it to the document meta.\n  FutureWarning\n[Finished in 0.2s]\n</code></pre>\n\n<p>Where I went wrong? I've followed the official tutorial..Did I miss something?</p>\n\n<p>PS\nMongodb is up and running</p>\n"},{"tags":["python","sql","database","ms-access","pyodbc"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":54,"score":2,"question_id":13227764,"title":"Receiving quantity and list of fields of the table","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/4539254/how-to-get-datatypes-of-specific-fields-of-an-access-database-using-pyodbc\">How to get datatypes of specific fields of an Access database using pyodbc?</a>  </p>\n</blockquote>\n\n\n\n<p>What sql request receives quantity of fields of the table Access in pyodbc connection with database? What sql request receives the list of fields of the table Access in pyodbc connection with database?</p>\n"},{"tags":["python","python-2.7"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":27,"score":1,"question_id":13227818,"title":"\"Import Error: dynamic module does not define init function (init_mysql)\" importing MySQLdb on OS X","body":"<p>I installed the mysqldb for python on mac os x, but it gives me the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"build/bdist.macosx-10.6-intel/egg/MySQLdb/__init__.py\", line 19, in &lt;module&gt;\n  File \"build/bdist.macosx-10.6-intel/egg/_mysql.py\", line 7, in &lt;module&gt;\n  File \"build/bdist.macosx-10.6-intel/egg/_mysql.py\", line 6, in __bootstrap__\nImportError: dynamic module does not define init function (init_mysql)\n</code></pre>\n\n<p>How can I solve this issue?</p>\n"},{"tags":["python","datetime","time","time-measurement"],"answer_count":9,"favorite_count":8,"up_vote_count":12,"down_vote_count":1,"view_count":26138,"score":11,"question_id":766335,"title":"Python speed testing - Time Difference - milliseconds","body":"<p>What is the proper way to compare 2 times in Python in order to speed test a section of code? I tried reading the API docs. I'm not sure I understand the timedelta thing.</p>\n\n<p>So far I have this code:</p>\n\n<pre><code>from datetime import datetime\n\ntstart = datetime.now()\nprint t1\n\n# code to speed test\n\ntend = datetime.now()\nprint t2\n# what am I missing?\n# I'd like to print the time diff here\n</code></pre>\n"},{"tags":["python","python-2.7"],"answer_count":4,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":45,"score":3,"question_id":13225312,"title":"Interleave two lists of different length in python v. 2?","body":"<p>I am trying to write a Python function that takes two lists as arguments and interleaves them.  The order of the component lists should be preserved.  If the lists do not have the same length, the elements of the longer list should end up at the\nend of the resulting list.\nFor example, I'd like to put this in Shell:</p>\n\n<pre><code>interleave([\"a\", \"b\"], [1, 2, 3, 4])\n</code></pre>\n\n<p>And get this back:</p>\n\n<pre><code>[\"a\", 1, \"b\", 2, 3, 4]\n</code></pre>\n\n<p>If you can help me I'd appreciate it.</p>\n"},{"tags":["python","file","python-2.7"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":131,"score":0,"question_id":13227970,"title":"How to effectively remove a line in the middle of a large file?","body":"<blockquote>\n  <p><strong>Possible Duplicate:</strong><br>\n  <a href=\"http://stackoverflow.com/questions/2329417/fastest-way-to-delete-a-line-from-large-file-in-python\">Fastest Way to Delete a Line from Large File in Python</a><br>\n  <a href=\"http://stackoverflow.com/questions/8868499/how-to-edit-a-line-in-middle-of-txt-file-without-overwriting-everything\">How to edit a line in middle of txt file without overwriting everything?</a>  </p>\n</blockquote>\n\n\n\n<p>I know I can read every line into a list, remove a line, then write the list back.</p>\n\n<p>But the file is large, is there a way to remove a part in the middle of the file, and needn't rewrite the whole file?</p>\n"},{"tags":["python","datetime","numpy","pandas"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":31,"score":1,"question_id":13227865,"title":"How to convert from pandas.DatetimeIndex to numpy.datetime64?","body":"<p>How to convert from <code>pandas.DatetimeIndex</code> to <code>numpy.datetime64</code>?</p>\n\n<p>I get:</p>\n\n<pre><code>&gt;&gt;&gt; type(df.index.to_datetime())\nOut[56]: pandas.tseries.index.DatetimeIndex\n</code></pre>\n\n<p>Is it safe to do <code>numpy.array(datetimeindex,dtype=numpy.datetime64)</code>?</p>\n"},{"tags":["python","google-app-engine"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13225540,"title":"Is there a way to atomically run a function as a transaction within google app engine when the function modifies more than five entity groups?","body":"<p>I'm developing on google app engine.  The focus of this question is a python function that modifies hundreds of entity groups.  The function takes one string argument.  I want to execute this function as a transaction because there are instances right now when the same function with the same string argument are simultaneously run, resulting in unexpected results.  I want the function to execute in parallel if the string arguments are different, but not if the string arguments are the same, they should be run serially.</p>\n\n<p>Is there a way to run a transaction on a function that modifies so many entity groups?  So far, the only solution I can think of is flipping a database flag for each unique string parameter, and checking for the flag (deferring execution if the flag is set as True).  Is there a more elegant solution?</p>\n"},{"tags":["python","google-app-engine","http-headers","craigslist"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":39,"score":0,"question_id":13226598,"title":"How to remove the Google App Engine default header when fetching a URL?","body":"<p>I'm trying to build a small app on GAE to help me manage the craigslist listing I'm interested in. I want to fetch some data from these listings from my app, but every time I do so I get a 404 from craigslist. </p>\n\n<p>After some investigation it turns out my code is not the culprit: craigslist looks at the HTTP headers and systematically returns a 404 when it finds \"AppEngine-Google\" in the User-Agent header!</p>\n\n<p>You can see that with curl:</p>\n\n<pre><code>curl http://sfbay.craigslist.org/\n</code></pre>\n\n<p>works (returns the page).</p>\n\n<pre><code>curl http://sfbay.craigslist.org/ --header \"User-Agent: AppEngine-Google\"\n</code></pre>\n\n<p>doesn't give anything.</p>\n\n<p>Any idea how I could remove this header which is set by default by GAE? Or another idea to get around the issue?</p>\n"},{"tags":["python","date","datetime"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":52,"score":1,"question_id":13227597,"title":"How to compare dates only (and not the time) in python","body":"<p>I have 2 datetime objects. One only has the date and the other one has date &amp; time. I want to compare the dates only (and not the time). \nThis is what I have:</p>\n\n<pre><code>d2=datetime.date(d1.year,d1.month,d1.day)\nprint d2 == d1.date\n</code></pre>\n\n<p>It prints out false. Any idea why? </p>\n\n<p>Thank you! </p>\n"},{"tags":["python","soap","soap-client"],"answer_count":17,"favorite_count":79,"up_vote_count":138,"down_vote_count":0,"view_count":65032,"score":138,"question_id":206154,"title":"What's the best SOAP client library for Python, and where is the documentation for it?","body":"<p>I've never used <a href=\"http://en.wikipedia.org/wiki/SOAP\" rel=\"nofollow\">SOAP</a> before and I'm sort of new to Python.  I'm doing this to get myself acquainted with both technologies.  I've installed <a href=\"http://trac.optio.webfactional.com/wiki/soaplib\" rel=\"nofollow\">SOAPlib</a> and I've tried to read their <a href=\"http://trac.optio.webfactional.com/wiki/Client\" rel=\"nofollow\">Client</a> documentation, but I don't understand it too well.  Is there anything else I can look into which is more suited for being a SOAP Client library for Python?</p>\n\n<p>Edit: Just in case it helps, I'm using Python 2.6.</p>\n"},{"tags":["python","scrapy"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":34,"score":1,"question_id":13227546,"title":"Scrapy crawls first page but does not follow links","body":"<p>I can't figure out why Scrapy is crawling the first page but not following the links to crawl the subsequent pages. It must be something to do with the Rules. Much appreciated. Thank you!</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from scrapy.contrib.spiders import CrawlSpider, Rule\nfrom scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor\nfrom scrapy.selector import HtmlXPathSelector\nfrom craigslist_sample.items import CraigslistItem\n\nclass MySpider(CrawlSpider):\n    name = \"craig\"\n    allowed_domains = [\"sfbay.craigslist.org\"]\n    start_urls = [\"http://sfbay.craigslist.org/acc/\"]   \n\n    rules = (Rule (SgmlLinkExtractor(allow=(\"index100\\.html\", ),restrict_xpaths=('//p[@id=\"nextpage\"]',))\n    , callback=\"parse_items\", follow= True),\n    )   \n\n    def parse_items(self, response):\n        hxs = HtmlXPathSelector(response)\n        titles = hxs.select(\"//p\")\n        items = []\n        for titles in titles:\n            item = CraigslistItem()\n            item [\"title\"] = titles.select(\"a/text()\").extract()\n            item [\"link\"] = titles.select(\"a/@href\").extract()\n            items.append(item)\n        return(items)\n\nspider = MySpider()\n</code></pre>\n"},{"tags":["python","openoffice.org","pyuno"],"answer_count":3,"favorite_count":2,"up_vote_count":1,"down_vote_count":0,"view_count":1603,"score":1,"question_id":4270962,"title":"Using pyuno with my existing python installation","body":"<p>I'm trying to use PyUNO as a method to convert different document formats (doc, wordperfect, html, etc) to PDF from within my Django server.  I'm having a heck of a time getting <code>import uno</code> to work.  It seems to fail when doing <code>import pyuno</code>, with a message of <code>ImportError: DLL Load Failed: The specified module could not be found</code>.</p>\n\n<p>The only way I can get this to work is to use the Python 2.6 that came with OpenOffice, but I really want to use my other 2.6 installation.  The docs for PyUNO are all for Python 2.2, and reputed to be out-of-date.  </p>\n\n<p>I'm guessing that some (or all) of the following files need to be copied from the OpenOffice directory to my site-packages directory (or some subdirectory thereof):</p>\n\n<pre><code>pythonloader.py\npythonloader.uno.ull\npythonloader.uno.ini\npythonscript.py\npyuno.pyd\n</code></pre>\n\n<p>Has anyone had any success getting this to work?</p>\n\n<p>This is on Windows.</p>\n"},{"tags":["python","unicode"],"answer_count":2,"favorite_count":4,"up_vote_count":6,"down_vote_count":0,"view_count":1187,"score":6,"question_id":2571515,"title":"Using a Unicode format for Python's `time.strftime()`","body":"<p>I am trying to call Python's <code>time.strftime()</code> function using a Unicode format string:</p>\n\n<pre><code>u'%d\\u200f/%m\\u200f/%Y %H:%M:%S'\n</code></pre>\n\n<p>(<a href=\"http://www.fileformat.info/info/unicode/char/200f/index.htm\"><code>\\u200f</code></a> is the \"Right-To-Left Mark\" (RLM).)</p>\n\n<p>However, I am getting an exception that the RLM character cannot be encoded into ascii:</p>\n\n<blockquote>\n  <p>UnicodeEncodeError: 'ascii' codec can't encode character u'\\u200f' in position 2: ordinal not in range(128)</p>\n</blockquote>\n\n<p>I have tried searching for an alternative but could not find a reasonable one. Is there an alternative to this function, or a way to make it work with Unicode characters?</p>\n"},{"tags":["python","google-app-engine","google","oauth-2.0","google-bigquery"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13221978,"title":"Getting Error: redirect_uri_mismatch The redirect URI in the request: http://localhost:8080/oauth2callback did not match a registered redirect URI","body":"<p>I'm getting this error while trying to run my application...</p>\n\n<pre><code>The redirect URI in the request: http://localhost:8080/oauth2callback did not match a registered redirect URI\n</code></pre>\n\n<p>In google API console i have registered my redirect urls </p>\n\n<pre><code>Redirect URIs:  http://localhost:8080/\n</code></pre>\n\n<p>And in the client_secrets.json also i'm using the same as redirect url\nI'm following this tutorial\n<a href=\"https://developers.google.com/bigquery/articles/dashboard#addoauth2\" rel=\"nofollow\">https://developers.google.com/bigquery/articles/dashboard#addoauth2</a></p>\n\n<p>Edit:</p>\n\n<p>I just made some changes to the existing code</p>\n\n<p>Now the</p>\n\n<pre><code>redirect URIs in API console is     http://localhost:8080/oauth2callback\n</code></pre>\n\n<p>And here is  my app.yaml</p>\n\n<pre><code>application: hellomydashboard\nversion: 1\nruntime: python\napi_version: 1\n\nhandlers:\n- url: /favicon\\.ico\n  static_files: favicon.ico\n  upload: favicon\\.ico\n\n- url: /oauth2callback\n  script: oauth2client/appengine.py\n\n- url: .*\n  script: main.py\n</code></pre>\n\n<p>Now though its not showing any error but it displays a blank page.</p>\n\n<p>Here is my main.py</p>\n\n<pre><code>from bqclient import BigQueryClient\nimport httplib2\nimport os\nfrom google.appengine.api import memcache\nfrom google.appengine.ext import webapp\nfrom google.appengine.ext.webapp.util import run_wsgi_app\nfrom oauth2client.appengine import oauth2decorator_from_clientsecrets\n\n# Project ID for project to receive bill.\n# During limited availability preview, there is no bill.\n# The value should be your quoted Client ID number \n# which you previously recorded from code.google.com/apis/console\n\n# REPLACE THIS NUMBER WITH YOUR CLIENT ID\nPROJECT_ID = \"My Project ID\"  #i just replaced dat\nDATASET = \"samples\"\nTABLE = \"natality\"\n\n# CLIENT_SECRETS, name of a file containing the OAuth 2.0\n# information for this application.\nCLIENT_SECRETS = os.path.join(os.path.dirname(__file__),\n    'client_secrets.json')\n\nhttp = httplib2.Http(memcache)\ndecorator = oauth2decorator_from_clientsecrets(CLIENT_SECRETS,\n    'https://www.googleapis.com/auth/bigquery')\n\nbq = BigQueryClient(http, decorator)\n\nclass MainHandler(webapp.RequestHandler):\n    @decorator.oauth_required\n    def get(self):\n        self.response.out.write(\"Hello Dashboard!\\n\")\n\n\napplication = webapp.WSGIApplication([\n   ('/', MainHandler),\n], debug=True)\n\ndef main():\n   run_wsgi_app(application)\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>So according to main.py if everything is fine it must print Hello Dashboard but it isn't</p>\n"},{"tags":["python","pdb"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13225913,"title":"In pdb (python debugger), can I set a breakpoint on a builtin function?","body":"<p>I want to set a breakpoint on the set.update() function, but when I try, I get an error message.</p>\n\n<p>Example:</p>\n\n<pre><code>ss= set()\nss.update('a')\n</code></pre>\n\n<p>Breakpoint:</p>\n\n<pre><code>b set.update\nb ss.update\n</code></pre>\n\n<p>Errors:</p>\n\n<pre><code>The specified object 'ss.update' is not a function\nor was not found along sys.path.\n\nThe specified object 'set.update' is not a function\nor was not found along sys.path.\n</code></pre>\n\n<p>(Note, I also tried with the parentheses at the end, e.g., <code>b set.update()</code>, but still got the error. I didn't print all the permutations of errors.)</p>\n"},{"tags":["python"],"answer_count":4,"favorite_count":0,"up_vote_count":2,"down_vote_count":2,"view_count":61,"score":0,"question_id":13226848,"title":"Reuse specific lines of code","body":"<p>Suppose I use this block of code very often in my Python file</p>\n\n<pre><code>if x == 1:\n  x += 1\nelse:\n  x -= 1\n</code></pre>\n\n<p>Is there a way to \"copy\" this code, so that I don't have to type these four lines repeatedly throughout the file?</p>\n"},{"tags":["python","google-app-engine","oauth-2.0","yaml"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":42,"score":0,"question_id":13227212,"title":"What does this thing in app.yaml mean","body":"<p>Here is app.yaml code</p>\n\n<pre><code>application: hellodashboard\nversion: 1\nruntime: python\napi_version: 1\n\nhandlers:\n- url: /favicon\\.ico\n  static_files: favicon.ico\n  upload: favicon\\.ico\n\n- url: /oauth2callback\n  script: oauth2client/appengine.py\n\n- url: .*\n  script: main.py\n</code></pre>\n\n<p>I wanted to know what does</p>\n\n<pre><code> - url: /oauth2callback\n  script: oauth2client/appengine.py\n</code></pre>\n\n<p>mean?\nI know the second line indicate that there is a script called appengine.py in oauth2client directory.But what does <strong>url:/oauth2callback</strong> indicate.</p>\n"},{"tags":["python","image-processing","opencv"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":20,"score":0,"question_id":13225525,"title":"\"System error: new style getargs format but argument is not a tuple\" when using cv2.blur","body":"<p>I am just trying to apply a filter to an image using cv2, the opencv python bindings. Here is what my code look like:</p>\n\n<pre><code>im = cv2.imread('./test_imgs/zzzyj.jpg')\ncv2.imshow('Image', cv2.blur(im, 2)\ncv2.waitKey(0)\n</code></pre>\n\n<p>It's almost copy-and-paste from the <a href=\"http://docs.opencv.org/modules/imgproc/doc/filtering.html#void%20blur%28InputArray%20src,%20OutputArray%20dst,%20Size%20ksize,%20Point%20anchor,%20int%20borderType%29\" rel=\"nofollow\">documentation</a>. However, it just doesn't work, with no more trace than this message:</p>\n\n<pre><code>SystemError: new style getargs format but argument is not a tuple\n</code></pre>\n\n<p>The same error occurs with GaussianBlur, but not with medianBlur. Any thoughts?</p>\n"},{"tags":["python","planar-graph"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":15,"score":-2,"question_id":13226802,"title":"python planar graph generator library","body":"<p>I am looking for the library of planar graph generator to test my program. </p>\n\n<p>Please give me some hints or feedback. </p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["python","transform","data.frame","pandas"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":347,"score":1,"question_id":9339184,"title":"Python: Pandas, Dataframe, Convert 1column data into 2D data format","body":"<p>This is Pandas dataframe\nI want to convert 1D data into 2D array form </p>\n\n<p>How to convert from </p>\n\n<pre><code>  'A'  'B'  'C'\n1  10   11   a  \n2  10   12   b\n3  10   13   c \n4  20   11   d  \n5  20   12   e\n6  20   13   f\n\nto this 2d array as the following\n\n   11 12 13\n10  a  b  c \n20  d  e  f\n</code></pre>\n"},{"tags":["python","printing","flush"],"answer_count":9,"favorite_count":30,"up_vote_count":179,"down_vote_count":1,"view_count":81446,"score":178,"question_id":230751,"title":"How to flush output of Python print?","body":"<p>I would like to force Python's print function to output to the screen.</p>\n"},{"tags":["python","scripting"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13226203,"title":"What python codes can I run on my hosting server (or service)","body":"<p>I've been doing some codes on python and I really love working on it, but I do have a question and I don`t seem to find the answer to it....</p>\n\n<p>What types of codes or script can I run on a website, or hosted service like <code>hostgator</code>..?</p>\n\n<p>Let me give some description about why do I ask this. I know that I could do some database web apps base on server side scripting and stuff like that,, but my question in more related to other ideas that I have in mind but I`m not sure that it can be done.</p>\n\n<p>For example.. </p>\n\n<p>I have a small script using <code>urllib2</code> and <code>Beautifulsoup</code>, that opens a website, reads the <code>html</code> tags, gets the info that I need and the it stores the values to some variables, and finally it post that value on sharing sites... I do this mostly every day on my pc and the script runs like a charm.... </p>\n\n<p>I think my question is, can this be done on a regular web server like <code>hostgator</code>, or It can't be done and I`ll have to keep running the code on my pc?</p>\n\n<p>I`m fairly new to python and web apps and I have no idea what types of scripts I could or could not run on my websites...</p>\n\n<p>Please any help would be really great</p>\n"},{"tags":["python","pandas","multi-index"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13226029,"title":"Benefits of panda's multiindex?","body":"<p>So I learned that I can use DataFrame.groupby without having a MultiIndex to do subsampling/cross-sections.</p>\n\n<p>On the other hand, when I have a MultiIndex on a DataFrame, I still need to use DataFrame.groupby to do sub-sampling/cross-sections.</p>\n\n<p>So what is a MultiIndex good for apart from the quite helpful and pretty display of the hierarchies when printing?</p>\n"},{"tags":["python","file"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":43,"score":0,"question_id":13226123,"title":"Python read files in directory and concatenate","body":"<p>I want to write a Python script that searches all folders in the current directory, looks for all <code>.txt</code> files, and creates a file that is a concatenation of all those files (in any order) in the current directory. If folders have subfolders, it should not search those subfolders. An example is</p>\n\n<pre><code>main_folder\n  folder_1\n    sub_folder\n      file1.txt\n    file2.txt\n  folder_2\n    file3.txt\n</code></pre>\n\n<p>The script is placed inside <code>main_folder</code>. It should create a file that is a concatenation of <code>file2.txt</code> and <code>file3.txt</code> (in any order) inside <code>main_folder</code>. </p>\n\n<p>My question is: How can I tell Python to traverse through the folders, look for <code>.txt</code> files, without going into the subfolders?</p>\n"},{"tags":["python","django","django-admin"],"answer_count":1,"favorite_count":2,"up_vote_count":4,"down_vote_count":0,"view_count":61,"score":4,"question_id":13191594,"title":"How can i do pagination for M2M Django","body":"<pre><code>class Movie(models.Model):\n    title= models.CharField(max_length=100,)\n    votes=models.IntegerField(null=True)\n    year=models.IntegerField(null=True)\n    aspect_ration=models.CharField(max_length=50,)\n    mpaa=models.CharField(max_length=200,)\n    rating =models.CharField(max_length=20,)\n    imdbid=models.CharField(max_length=50,)\n    top_250_rank=models.IntegerField(null=True)\n    cover_url=models.CharField(max_length=500,)\n    plot_outline=models.TextField(blank=True, null=True)\n    summary= models.TextField(blank=True, null=True)\n    pub_date = models.DateTimeField(null=True, blank=True,default=datetime.today())\n    akas_id = models.ManyToManyField('Akas', verbose_name=u'Akas ID',related_name=\"Akas_M2M_Movie\")\n\n\nclass Akas(models.Model):\n     name=models.CharField(max_length=500,)\n     def __unicode__(self):\n        return u'%s' % (self.name)\n     class Meta:\n         verbose_name = 'Other Movie Title'\n         verbose_name_plural = 'Other Movie Titles'\n    db_table = 'Akas'\n</code></pre>\n\n<p>In the 'Akas' table i have 2225188 record So The Change view takes long time to load this  field. What is the solution to resolve this issue ? Can i do pagination for the m2m widget ?</p>\n\n<p>Can any one help for this issue ?  In admin.py i am using filter_horizontal = ['Akas',]\n<img src=\"http://i.stack.imgur.com/Rlxfb.png\" alt=\"Image showing Bellow for the Aka Table \"></p>\n"},{"tags":["python","django"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":17,"score":0,"question_id":13225520,"title":"Django Generic Edit Views To Accept An Instance","body":"<p>given that I have a Version model which References product model, how can I create generic create or update views that uses an instance of the Product model in the form given this url:</p>\n\n<pre><code>url(r'^product/(?P&lt;pk&gt;\\d+)/create_version', ProductVersionCreateView.as_view(), name='workspace_product_create_version'),\n</code></pre>\n\n<p>thanks in advance!</p>\n"},{"tags":["python"],"answer_count":3,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":59,"score":1,"question_id":13226200,"title":"How to loop through inside a child node","body":"<pre><code>&lt;person&gt;\n&lt;user name=\"david\" password=\"super\"&gt;&lt;groups&gt;meganfox&lt;/groups&gt;&lt;/user&gt;\n&lt;user name=\"alen\" password=\"boss\"&gt;&lt;groups&gt;marvik&lt;/groups&gt;&lt;/user&gt;\n&lt;/person&gt;\n</code></pre>\n\n<p>I like to get the text value of \"groups\" . but its getting always None.</p>\n\n<pre><code>import xml.etree.ElementTree as ET\n\ndoc    = ET.parse(\"users.xml\")\nroot = doc.getroot() #Returns the root element for this tree.\nroot_new  = ET.Element(\"person\") \nfor child in root:\n    name                = child.attrib['name']\n    password             = child.attrib['password']\nfor groups in child.findall('groups'): #this is not working for me :(\n    gpvalue =  groups.text \n\n    user  = ET.SubElement(root_new, \"user\") # create subelement in cycle! \n    group = ET.SubElement(user, \"groups\")\n    user.set(\"name\",name)               \n    user.set(\"password\",password) \n    group.text = gpvalue\n\ntree = ET.ElementTree(root_new)\ntree.write(\"new.xml\")\n\nimport sys\ntree.write(sys.stdout)\n</code></pre>\n\n<p>Output am getting :(</p>\n\n<pre><code>&lt;person&gt;\n    &lt;user name=\"david\" password=\"super\"&gt;&lt;/groups&gt;&lt;/user&gt;\n    &lt;user name=\"alen\" password=\"boss\"&gt;&lt;/groups&gt;&lt;/user&gt;\n  &lt;/person&gt;\n</code></pre>\n\n<p>There is no groups text value. its print only a closed groups. please check the output</p>\n"},{"tags":["python","tkinter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":2,"view_count":37,"score":-2,"question_id":13225721,"title":"Tkinter exception","body":"<p>When I call <code>self.root.destroy()</code>, I get this exception. How do I get rid of it?</p>\n\n<pre><code>Exception in Tkinter callback\nTraceback (most recent call last):\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk/Tkinter.py\", line 1410, in __call__\n    return self.func(*args)\n  File \"game2-update.py\", line 24, in &lt;lambda&gt;\n    self.exit=Button(self.root,text=\"Exit\",command=lambda:self.root.destroy())\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk/Tkinter.py\", line 1727, in destroy\n    for c in self.children.values(): c.destroy()\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk/Tkinter.py\", line 1983, in destroy\n    Misc.destroy(self)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk/Tkinter.py\", line 351, in destroy\n    self.tk.deletecommand(name)\nTclError: can't delete Tcl command\n</code></pre>\n\n<p>Edit : I think I found where this exception coming from. When I comment out this piece of code - self.root.after_cancel(self.after_stack[id]) - it stops showing. This code basically cancel scheduled execution of a function that deletes squares. Can anyone tell me why this is happening?</p>\n"},{"tags":["python","python-3.x"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":55,"score":0,"question_id":13201822,"title":"Python 3 static members","body":"<p>I am trying to achieve the following:</p>\n\n<pre><code>class A:\n    username = None\n    username = get_username()\n    def get_username(self):\n        if username is None:\n            try:\n                uname = os.environ[\"USER\"]\n            except:\n                printf(\"Couldn't find a user name\")\n            return uname\n        return username\n</code></pre>\n\n<p>Not sure how to achieve this. I'm sure I'm missing some \"self.\" prefixes but this is the first time I'm working with python and static members.</p>\n\n<p>In a sense I want a class with some members and functions to calculate values for these members but I don't want recalculations. I would also like these to be static functions and data members.</p>\n\n<p>The problem is that the line \"username = get_username()\" the function hasn't already been defined. If I put username after the function then it's not </p>\n"},{"tags":["python","list","recursion"],"answer_count":5,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":91,"score":2,"question_id":13205875,"title":"Add an item into a list recursively","body":"<p>Hi. I was wondering if there is a way to add items into a list recursively. The function is supposed to print the path names of the file that matches with fname. So fname is the name of the file and the path is the folder in which the file is located. If there are folders inside the path folder it will go inside and look for the fname file. so far I am able to find all the files. But I am not able to append the list recursively.</p>\n\n<pre><code>def findAll(fname, path): \n lst= []\n for item in os.listdir(path):\n        n = os.path.join(path, item)\n    try:\n        if item == fname:\n            lst.append(n)\n    except:\n        findAll(fname,n)\nreturn lst\n</code></pre>\n"},{"tags":["python","reflection","type-conversion","introspection","python-datamodel"],"answer_count":3,"favorite_count":0,"up_vote_count":7,"down_vote_count":0,"view_count":4254,"score":7,"question_id":622161,"title":"Python Reflection and Type Conversion","body":"<p>In Python, functions like str(), int(), float(), etc. are generally used to perform type conversions.  However, these require you to know at development time what type you want to convert to.  A subproblem of some Python code I'm trying to write is as follows:</p>\n\n<p>Given two variables, <code>foo</code> and <code>bar</code>, find the type of <code>foo</code>.  (It is not known at development time, as this is generic code.)  Then, attempt to convert <code>bar</code> to whatever type <code>foo</code> is.  If this cannot be done, throw an exception.</p>\n\n<p>For example, let's say you call the function that does this <code>conv</code>.  Its signature would look like</p>\n\n<pre><code>def conv(foo, bar) :\n    # Do stuff.\n</code></pre>\n\n<p>It would be called something like:</p>\n\n<pre><code>result = conv(3.14, \"2.718\")  # result is now 2.718, as a float.\n</code></pre>\n"},{"tags":["python","dictionary"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":73,"score":3,"question_id":13225755,"title":"Convert list of keys and list of values to a dictionary","body":"<p>I have these lists:</p>\n\n<pre><code>list1 = [\"a\",\"b\",\"c\"]\nlist2 = [\"1\",\"2\",\"3\"]\n</code></pre>\n\n<p>I need to add them to a dictionary, where list1 is the key and list2 is the value.</p>\n\n<p>I wrote this code:</p>\n\n<pre><code>d = {}\nfor i in list1:\n    for j in list2:\n        d[i] = j\nprint d\n</code></pre>\n\n<p>The output is this:</p>\n\n<pre><code>{'a':'3','b':'3','c':'3'}\n</code></pre>\n\n<p>What's wrong with this code? How can I write it so the output is</p>\n\n<pre><code>{'a':'1','b':'2','c':'3'}\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["python","django","heroku","psycopg2","hstore"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":21,"score":0,"question_id":13225830,"title":"django-hstore on Heroku","body":"<p>I've got a Django (v 1.3.3) project deployed on Heroku (cedar stack).  It uses the recommended dj_database_url for configuring settings.DATABASES.  Everything works great (to this point).</p>\n\n<p>However, I want to start using <a href=\"https://github.com/jordanm/django-hstore\" rel=\"nofollow\">django-hstore</a> for part of the application.  According to the docs, you have to change the database engine in settings.py to: </p>\n\n<pre><code>'ENGINE': 'django_hstore.postgresql_psycopg2',\n</code></pre>\n\n<p>As a result, in my settings.py file, I do the following:</p>\n\n<pre><code>DATABASES = {'default': dj_database_url.config()}\nDATABASES['default']['ENGINE'] = 'django_hstore.postgresql_psycopg2'\n</code></pre>\n\n<p>Everything works fine for me, locally.  And my models that have hstore fields work great (values are dictionaries).</p>\n\n<p>However, when I deploy to Heroku, the database engine gets reset/overridden to:</p>\n\n<pre><code>ENGINE: 'django.db.backends.postgresql_psycopg2'\n</code></pre>\n\n<p>In an attempt at debugging it, I have put a print after setting the engine in my settings file.  Then, I run bash:</p>\n\n<pre><code>heroku run bash\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>python myapp/manage.py shell\n</code></pre>\n\n<p>when I run this, my print statement shows me the correct (desired) database settings with the desired engine (django_hstore.postgresql_psycopg2).  However, if I then do:</p>\n\n<pre><code>from django.conf import settings\nprint settings.DATABASES\n</code></pre>\n\n<p>I can see the database engine is no longer django_hstore, but set back to the normal (non-hstore) value.  And if I import one of my models and do a get to load an object, the value in the hstore field is a string, and any attempt to access a key will throw and error:</p>\n\n<pre><code>TypeError: string indices must be integers, not str\n</code></pre>\n\n<p>Please keep in mind that this works find locally.  But, after deploying to heroku, any attempt at accessing values as dictionaries throws the TypeError above.</p>\n\n<p>My questions are:</p>\n\n<ul>\n<li>Does anyone know why my engine is getting overridden?  And if so, how do I fix this?</li>\n</ul>\n\n<p>or</p>\n\n<ul>\n<li>Is there another way to use the hstore field with Django 1.3.3 that might not require having to change the engine (and therefore be a bit more Heroku friendly)</li>\n</ul>\n"},{"tags":["python","recursion","path"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":35,"score":0,"question_id":13225711,"title":"return text file path","body":"<p>I want to return the path of a file, If it is found by the program, but I want it to continue to loop(or recursively repeat) the program until all files are checked.</p>\n\n<pre><code>def findAll(fname, path):\nfor item in os.listdir(path):\n    n = os.path.join(path, item)\n    try:\n        findAll(n, fname)\n    except:\n        if item == fname:\n            print(os.idontknow(item))\n</code></pre>\n\n<p>So I'm having trouble with calling the path, right now I have </p>\n\n<pre><code>os.idontknow(item) \n</code></pre>\n\n<p>as a place holder</p>\n\n<p>Input is :</p>\n\n<pre><code>findAll('fileA.txt', 'testpath')\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>['testpat\\\\fileA.txt', 'testpath\\\\folder1\\\\folder11\\\\fileA.txt','testpath\\\\folder2\\\\fileA.txt']\n</code></pre>\n"},{"tags":["python","recursion","iterator","generator"],"answer_count":2,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13225625,"title":"Building a generator from a recursive algorithm","body":"<p>I have a recursive method that I'm using to walk over a red black tree, and store various node information (in the list <code>storage</code>). </p>\n\n<pre><code>def _walk (self, storage, func, starting_node) :\n    if starting_node is not self._nil :\n        self._walk(storage, func, starting_node.left)\n        storage.append(func(starting_node))\n        self._walk(storage, func, starting_node.right)\n</code></pre>\n\n<p>However, I'd like to re-implement this method so that it builds a generator (from what I understand this should save both time and memory). What's the \"best\" way of doing that?</p>\n"},{"tags":["python","matplotlib","networkx"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":35,"score":1,"question_id":13223191,"title":"Animate drawing networkx edges","body":"<p>I have a networkx spring layout that represents a network topology\nKey nodes are color as red and the other are blue\nThe routes to the key nodes edges are indicated with dashes\nHow can I animate the drawing the networkx edges with a specified time interval?</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport matplotlib.pyplot as plt\nimport networkx as nx\nimport matplotlib as mpl\n\nG=nx.Graph()\n\nG.add_edge('a','b',weight=0.6)\nG.add_edge('a','c',weight=0.2)\nG.add_edge('c','d',weight=0.1)\nG.add_edge('c','e',weight=0.7)\nG.add_edge('c','f',weight=0.9)\nG.add_edge('a','d',weight=0.3)\n\nelarge=[(u,v) for (u,v,d) in G.edges(data=True) if d['weight'] &gt;0.5]\nesmall=[(u,v) for (u,v,d) in G.edges(data=True) if d['weight'] &lt;=0.5]\n\n#specify an initial position that is not random e.g. use a circular layout\npos=nx.circular_layout(G)\npos=nx.spring_layout(G,dim=2,pos=pos) # positions for all nodes\n#pos=nx.spring_layout(G) # positions for all nodes\nprint \"Graph xy positions\"\nprint  pos\n\n# nodes\nnx.draw_networkx_nodes(G,pos,node_size=700)\n\n# edges\nnx.draw_networkx_edges(G,pos,edgelist=elarge,\n                width=6)\nnx.draw_networkx_edges(G,pos,edgelist=esmall,\n                width=6,alpha=0.5,edge_color='b',style='dashed')\n\n# labels\nnx.draw_networkx_labels(G,pos,font_size=20,font_family='sans-serif')\n\nplt.xlim(-0.05,1.05)\nplt.ylim(-0.05,1.05)\nplt.axis('off')\n</code></pre>\n"},{"tags":["python","gui","class","menu","tkinter"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":590,"score":1,"question_id":3520494,"title":"Class menu in Tkinter Gui","body":"<p>I'm working on a Gui and I'd like to know if it is possible to make the menu property of a window a separate class on my script for a clearer and more enhancement prone code.</p>\n\n<p>my code currently is :</p>\n\n<pre><code>class Application(Frame):\n   \"\"\" main window application \"\"\"\n   def __init__(self, boss = None):\n   (...)\n   self.menu = Menu(self)\n   self.master.config(menu = self.menu)\n\n   self.select = Menu(self.menu)\n   self.menu.add_cascade(label = 'Select', menu = self.select)\n   self.select.add_command(label = 'Select all', command = self.select_all)\n   ...\n</code></pre>\n\n<p>And I would prefer something like :</p>\n\n<pre><code>class MenuBar:\n\n    # all the content of the menu here\n\nclass Application(Frame):\n   (...)\n   self.menu = MenuBar(self) ?\n</code></pre>\n\n<p>rgds,</p>\n"},{"tags":["python","opencv"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13225600,"title":"CaptureFromFile failing (PyOpencv)","body":"<p>I had a sample code running on my machine which doesn't run on another.<br>\nIn particular, that code just does :</p>\n\n<pre><code>from cv2 import cv\ntry: capture = cv.CaptureFromFile('clip.avi')    \nexcept: print 'error loading the video' \nnFrames = int( cv.GetCaptureProperty(capture, cv.CV_CAP_PROP_FRAME_COUNT))\nprint nFrames\n</code></pre>\n\n<p>On the machine which fails, the result is that nFrames = 0 (as well as the width, height, fps, fourcc etc.), but no exception is raised. I tried using an uncompressed video to make sure there is no codec issues. It also doesn't work with an MPEG1 video, nor any other videos I tried.<br>\nSo :</p>\n\n<ul>\n<li>Is-there a way to know what's going on, since there is no error\nhandling here (no exception raised, no error message, and I didn't\nfind a \"GetLastError\" function in pyOpenCV) ? </li>\n<li>Any idea what could be the issue ?</li>\n</ul>\n\n<p>Thanks!</p>\n"},{"tags":["python","list","dictionary","python-2.7"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":54,"score":1,"question_id":13225254,"title":"Preserving python dictionary order - (Continuation of python dict )","body":"<p><a href=\"http://stackoverflow.com/questions/13218865/list-duplicate-data-concatenation-in-python/13220621\">List duplicate data concatenation in python</a></p>\n\n<p>This is in continuation of list issue but here i want to preserver the order of the dict</p>\n\n<pre><code>listData=[('audioVerify', '091;0'), ('imageVerify', 'icon091.gif'), ('bufferVerify', '\\x01?')]\n    methodList = {}\nfor item in listData:\n    methodList.setdefault(item[0],[]).append(item[1:])\nfor method in methodList:\n    arguments = methodList[method]\n    s = [method,arguments]\n    print s\n</code></pre>\n\n<p>when i iterate the list it gives the following</p>\n\n<pre><code>  ['audioVerify', [('091;0',)]]\n  ['bufferVerify', [('\\x01?',)]]\n  ['imageVerify', [('icon091.gif',)]]\n</code></pre>\n\n<p>but what are the possibilities where i can preserve the order as below:</p>\n\n<pre><code>  ['audioVerify', [('091;0',)]]\n  ['imageVerify', [('icon091.gif',)]]\n  ['bufferVerify', [('\\x01?',)]]\n</code></pre>\n"},{"tags":["python","python-2.7","urllib","raw"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":39,"score":1,"question_id":13225484,"title":"Can't access Project Gutenberg raw text","body":"<p>I have a problem accessing the Project Gutenberg Library...\nI am using Python 2.7.3.\nI can access the NLTK library and work with python, but when attempting to access raw text, it doesn't allow me to.</p>\n\n<p>The text I was accessing is Crime and Punishment, it's len(raw) should equal 1176831, but instead gives me a len(raw) of 288.\nHere is the code that I used:</p>\n\n<pre><code>&gt;&gt;&gt; from __future__ import division\n&gt;&gt;&gt; import nltk, re, pprint\n&gt;&gt;&gt; from urllib import urlopen\n&gt;&gt;&gt; url = \"http://www.gutenberg.org/files/2554/2554.txt\"\n&gt;&gt;&gt; raw = urlopen(url).read()\n&gt;&gt;&gt; type(raw)\n&lt;type 'str'&gt;\n&gt;&gt;&gt; len(raw)\n288\n&gt;&gt;&gt; raw\n'&lt;!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\"&gt;\\n&lt;html&gt;&lt;head&gt;\\n&lt;title&gt;403 Forbidden&lt;/title&gt;\\n&lt;/head&gt;&lt;body&gt;\\n&lt;h1&gt;Forbidden&lt;/h1&gt;\\n&lt;p&gt;You don\\'t have permission to access /files/2554/2554.txt\\non this server.&lt;/p&gt;\\n&lt;hr&gt;\\n&lt;address&gt;Apache Server at www.gutenberg.org Port 80&lt;/address&gt;\\n&lt;/body&gt;&lt;/html&gt;\\n'\n&gt;&gt;&gt; \n</code></pre>\n"},{"tags":["python","argparse"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":29,"score":0,"question_id":13225373,"title":"argparse: using subparsers and parse_known_args together","body":"<pre><code>#!/usr/bin/env python2.7\n\nimport argparse\n\ndef add_common_args(parser):\n\n    parser.add_argument(\n        '--common1',\n        required=True,\n        help='common 1')\n\n    parser.add_argument(\n        '--common2',\n        help='common 2')\n\n    parser.add_argument(\n        '--common3',\n        help='common 3')\n\n    print 'added common args'\n\ndef add_specific_args(parser):\n\n    parser.add_argument(\n        '--specific1',\n        required=True,\n        help='specific 1')\n\n    parser.add_argument(\n        '--specific2',\n        help='specific 2')\n\n    parser.add_argument(\n        '--specific3',\n        help='specific 3')\n\n    print 'added specific args'\n\nparser = argparse.ArgumentParser()\n\nparser.add_argument('proj')\n\nsubparsers = parser.add_subparsers(dest='cat')\n\nsub1 = subparsers.add_parser('sub1')\n\nadd_common_args(sub1)\n\nsub2 = subparsers.add_parser('sub2')\n\nadd_common_args(sub2)\n\nknown, remaining = parser.parse_known_args()\n\nprint 'known=%s remaining=%s' % (known, remaining)\n\nif known.proj == 'proj':\n\n    print 'known.proj == proj'\n\n    if known.cat == 'sub1':\n\n        print 'known.cat == cat'\n\n        add_specific_args(sub1)\n\nargs = parser.parse_args(namespace=known, args=remaining)\n\nprint args\n</code></pre>\n\n<p>The file has a name of test.py.  With the following args:</p>\n\n<pre><code>./test.py proj sub1 --help\n</code></pre>\n\n<p>The 'specific args' are not added.  Furthermore, if I use the required 'common1' with these args:</p>\n\n<pre><code>./test.py proj sub1 --common1 c1\n</code></pre>\n\n<p>I get the following output:</p>\n\n<pre><code>usage: test.py [-h] proj {sub2,sub1} ...\ntest.py: error: too few arguments\n</code></pre>\n\n<p>I basically want to determine which args will be added based on two variables; the position 'proj' and the subparser name 'cat'.  Is this possible?  If so how should I do it?</p>\n\n<p>Thanks,\nScott</p>\n"},{"tags":["python","class"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":4,"view_count":59,"score":-4,"question_id":13224369,"title":"how to use classes in python","body":"<p>I have a list of book and and a list of ratings for the book from users. </p>\n\n<p>[User1,2,1,3,6]..<br/>\n[User2,4,1,4 2]..<br/></p>\n\n<p>[Book1,Book2,Book3,Book4]<br/>\nratings from(1-4) </p>\n\n<p>example\nif Book 1 is \"The Pope\" <br/>\nthe raitings for the the book are [3,3,3,2]<br/>\nthe print out is \n         The Pope [3,3,3,2] [ ] </p>\n\n<p>using a class </p>\n\n<p>here is the set up for my class.</p>\n\n<pre><code>class Book(object):\n      booktotal=0\n      accept=[]\n      def __init__(self, Title= \" \", Rating=()):\n          self.scale=[1,2,3,4]\n          self.book = Title\n          self.rating= Rating\n          self.accept=[]\n          book.population +=1\n      def AddRating(self,rating):\n          if rating in self.scale:\n              accepted.append(rating)\n          else:\n              pass\n\n          return self.accept\n\n      def Average(self):\n          Avg=sum[accept]/3\n\n      def __str__(self):\n          return '{0} - {1} - {2}'.format(self.book, self.rating,self.accept)\n</code></pre>\n\n<p>how do i get it to print out the average and the number of reviews</p>\n"},{"tags":["python","recursion","virus"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":49,"score":0,"question_id":13225358,"title":"basic virus scan recursion","body":"<p>so I'm writing code that takes a <code>pathname</code>, a <code>signature</code>, and the third parameter is a <code>number</code> that represents the depth of subdirectories that should be scanned.</p>\n\n<p>So lets say I have a <strong>file: test</strong>:</p>\n\n<pre><code>In it is test1 folder,test2 folder,antivirus.py,simple.py\nIn test1 folder is antivirus1.py\nIn test2 folder is test3 folder, and antivirus2.py\nIn test3 folder is antivirus3.py\n</code></pre>\n\n<p><strong>So this is how it should work:</strong></p>\n\n<pre><code>&gt;&gt;&gt;scan('test',rules, 0)\ntest\\antivirus.py, found virus Virus2\ntest\\antivirus.py, found virus Virus1\n&gt;&gt;&gt;\n&gt;&gt;&gt;scan('test',rules, 2)\ntest\\antivirus.py, found virus Virus2\ntest\\antivirus.py, found virus Virus1\ntest\\test1\\antivirus1.py, found virus Virus2\ntest\\test1\\antivirus1.py, found virus Virus1\ntest\\test2\\antivirus2.py, found virus Virus2\ntest\\test2\\antivirus2.py, found virus Virus1\n</code></pre>\n\n<p><strong>Here is my current code:</strong></p>\n\n<pre><code>def scan(pathname, signatures, depth):\n    for item in os.listdir(pathname) and depth &gt; 0:\n        n = os.path.join(pathname, item)\n        try:\n            scan(n, signatures, depth-1)\n        except:\n            f = open(n, 'r')\n            s = f.read()\n            for virus in signatures:\n                if s.find(signatures[virus]) &gt; 0:\n                    print('{}, found virus {}'.format(n,virus))\n            f.close()\n</code></pre>\n"},{"tags":["python"],"answer_count":1,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":36,"score":0,"question_id":13225201,"title":"Print out table in a format specified by user in Python?","body":"<p>The program starts as how many rows? how many coloumns? Alignment of each coloumn?(Left(L), Centre(C), Right(R)). Then accept entries(data in table) from the user. The entries should be printed in the format specified by the user? Here's what I have done so far:</p>\n\n<pre><code>rows = input(\"How many rows?\")\ncoloumns = input(\"How many coloumns?\")\nalignment = raw_input(\"Enter alignment of each table?\")\nentry = raw_input(\"Enter rows x cols entries:\")\nprint entry\n</code></pre>\n\n<p>I think I have to format entry in such a way that it comes out exactly how the user wants. How can I do it? Thanks</p>\n"},{"tags":["python","sorting","dictionary"],"answer_count":2,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":49,"score":1,"question_id":13130934,"title":"Sorting a nested dictionary in a custom fashion","body":"<p>I am trying to sort a recursively sort a 2 level nested default dict. I have not been able to figure out how to do this properly. My problem statement is given below:</p>\n\n<ol>\n<li>First level key must be a natural sort.</li>\n<li><p>Second level key must be sorted in a specific order. I have tried to create a list whose indices represent the order of the elements. My code snippet is given below: </p>\n\n<pre><code>import operator\nimport collections\ntrade_group_totals = collections.defaultdict(lambda:collections.defaultdict(float))    \ntrade_group_totals['foo']['ABC'] = 100\ntrade_group_totals['foo']['XYZ'] = 50\ntrade_group_totals['bar']['ABC'] = 150\ntrade_group_totals['bar']['XYZ'] = 250\n</code></pre></li>\n</ol>\n\n<p>My sorting index comparison:</p>\n\n<pre><code>trade_groups = ['XYZ', 'ABC']\n\ndef TradeGroupSort(trade_group):\n   return trade_groups.index(trade_group)   \n\ndef SortTotals(totals, sort_function_one, sort_function_two):\n  return [\n      (k1, v1) for k1, v1 in [(k, sorted(v.iteritems(), key=sort_function_two))\n           for k, v in sorted(totals.iteritems(), key=sort_function_one)]]\n</code></pre>\n\n<p>I am invoking the function as follows:</p>\n\n<pre><code>SortTotals(\n    trade_group_totals, operator.itemgetter(0),\n    sort_function_two=lambda x: operator.methodcaller('TradeGroupSort', x))\n</code></pre>\n\n<p>My expected output should be:</p>\n\n<pre><code>[('bar', [('XYZ', 50), ('ABC', 100)]), ('foo', [('XYZ', 250), ('ABC', 150)])]\n</code></pre>\n\n<p>But the generated output is</p>\n\n<pre><code>[('bar', [('XYZ', 50), ('ABC', 150)]), ('foo', [('ABC', 150), ('XYZ', 250)])]\n</code></pre>\n\n<p>Any assistance would be appreciated.</p>\n\n<p>Thanks,</p>\n\n<p>Kartik </p>\n"},{"tags":["python","processes","tornado","inter-process-communicat"],"answer_count":0,"favorite_count":1,"up_vote_count":0,"down_vote_count":0,"view_count":33,"score":0,"question_id":13225281,"title":"Stopping tornado web server","body":"<p>I know this question has already been asked, but the proposed solutions don't work for me. I'd like to run the tornado and would also like to be able to stop it somehow from another application's command. </p>\n\n<p>The problem is, when following the solution in <a href=\"http://pastebin.com/KU3KN0Zh\" rel=\"nofollow\">http://pastebin.com/KU3KN0Zh</a>, how do I call the <code>stopTornado()</code> method if the process is already running (assuming the sleep and <code>stopTornado</code> at the end would be removed)? </p>\n\n<p>I would essentially need another python script that could call this method (or send a message to the starttornado script).</p>\n\n<p>Does anyone have an idea of how to accomplish this?</p>\n"},{"tags":["python","gui","python-2.7","tkinter"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":22,"score":0,"question_id":13225227,"title":"python tkinter getting label to update after variable change","body":"<p>First and formost I'm sorry for asking a similar question twice in this short amount of time, its just that I am completely stuck and my assignment is due really soon (my fault). I'm really stuck on how to change the <code>balance</code> from 0 (the default should be 100 not sure why its showing that) to a number that changes depending on whether or not the user wins or loses. Any help would be appreciated.<br>\nAnything to point me in the right direction would be amazing.</p>\n\n<pre><code>from __future__ import division \nfrom Tkinter import *\nimport tkMessageBox\nimport os\nimport subprocess\nfrom random import randrange\nfrom random import shuffle\nfrom random import choice\nfrom time import sleep\nimport sys, time\nfrom select import select\n\n\n\nclass MyApp(object):\n\n    a = choice(range(1, 12))\n    b = choice(range(1, 12))\n    money = 100\n    bet = 5\n    hand = 0\n    m = 100\n\n    def __init__(self):\n        self.root = Tk()\n        self.root.wm_title(\"The Game of 21\")\n        m = IntVar()\n\n        Label(self.root, textvariable = m).grid(row=0, column=0, sticky=E)\n\n        self.root.mainloop()\n\n    def gameOn(self):\n        \"\"\"Setup the application's main window as a 2x5 grid\"\"\"\n        self.root = Tk()\n        self.root.wm_title(\"The Game of 21\")\n        a = choice(range(1, 12))\n        b = choice(range(1, 12))\n\n\n        self.cards = StringVar()\n        Label(self.root, text = 'Cards dealt:').grid(row = 1, column = 0, sticky = W) #cards dealt\n        Label(self.root, text = self.a).grid(row = 1, column = 1, sticky = E)        # card 1 (aka card a)\n        Label(self.root, text = ',').grid(row = 1, column = 2)      # inserting a comma between card1 and card2\n        Label(self.root, text = self.b).grid(row = 1, column = 3)        # card 2 (aka card b)\n        Label(self.root, text = 'Total = %d' %(self.a + self.b + self.hand)).grid(row = 1, column = 4)  # card 1 + card 2\n        Label(self.root, text = \"Time remaining:\").grid(row = 3, column = 1) \n\n        Button(self.root, text=\"Hit\", command=self.hit).grid(row = 2, column = 0)  #create a button\n        Button(self.root, text=\"Stand\" , command=self.stand).grid(row = 2, column = 1) # create a button\n\n\n    def hit(self):\n        self.hand = choice(range(1, 12))  \n        total = self.hand + self.a + self.b \n        dealerHand = choice(range(14,25))\n#         self.bet.set(amount)\n        self.root.destroy()\n\n        result = \"Dealer wins. You lose.\"# , self.money = self.money - self.bet, m.set(self.money)\n\n        if dealerHand &gt; 21 and total &lt; 22: \n            self.money = self.money - self.bet\n            m.set(self.money)\n            result = \"Winner! Winner! Chicken Dinner!\"\n        if total &gt; 21:\n            result\n            self.money = self.money - self.bet\n            m.set(self.money)\n\n        elif total &gt; dealerHand:\n            self.money = self.money + self.bet\n            m.set(self.money)\n\n            result = \"Winner! Winner! Chicken Dinner!\" \n        elif total == dealerHand: \n            self.money = self.money - self.bet\n            m.set(self.money)\n\n            result = \"Dealer wins. You lose.\" \n        print self.money\n        tkMessageBox.showinfo(\"Results\" , \"Hand = %d\\nDealer = %d\\n%s\" %((total), (dealerHand), result)) # print result\n\n\n    def stand(self): \n        self.hand = 0\n        total = self.hand + self.a + self.b \n        dealerHand = choice(range(14,25))    \n        self.root.destroy()\n\n        result = \"Dealer wins. You lose.\"\n        if dealerHand &gt; 21 and total &lt; 22: \n            self.money += self.bet\n            result = \"Winner! Winner! Chicken Dinner!\"\n        if total &gt; 21: \n            self.money += self.bet\n            result\n        elif total &gt; dealerHand: \n            self.money += self.bet\n            result = \"Winner! Winner! Chicken Dinner!\" \n        elif total == dealerHand: \n            self.money += self.bet\n            result = \"Dealer wins. You lose.\" \n        print self.money\n        tkMessageBox.showinfo(\"Results\" , \"Your hand: %d\\nDealer: %d\\n%s\" %((self.hand + self.a + self.b), (dealerHand), result)) # print result\n\n\n\n\nMyApp()\n</code></pre>\n"},{"tags":["python","google-app-engine"],"answer_count":0,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":39,"score":2,"question_id":13224341,"title":"GAE Returning 404 after period of no traffic","body":"<p>I'm new to GAE and python (also my first post on Stack Overflow). I have a basic site up on GAE. I'm using Python 2.7. There is little traffic to it, since I am the only one accessing it at this point. </p>\n\n<p>The problem is that whenever I hit the main url after a period of inactivity (longer then 10-15 minutes), I get a 404 from my ISP (Rogers). After about 15 seconds, if I retry the main url, the page loads.</p>\n\n<p>I thought it might have been because the instances had to spin up. So I upgraded have a paid GAE account, and set it up so that there is a minimum of one instance running at all times. The GAE dashboard shows at lease one instance running for the past day. But the problem persists.</p>\n\n<p>Here is my app.yaml</p>\n\n<pre><code>application: resumesite\nversion: 1\nruntime: python27\napi_version: 1\nthreadsafe: yes\n\nhandlers:\n  - url: /static\n    static_dir: static\n\n  - url: /.*\n    script: main.app\n\ninbound_services:\n  - warmup\n\nlibraries:\n  - name: jinja2\n    version: latest\n</code></pre>\n\n<p>Any help would be appreciated</p>\n"},{"tags":["python","image","loops","wxwidgets"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":25,"score":1,"question_id":13225042,"title":"Python and wx.Image: How to apply a simple function to every pixel FAST?","body":"<p>I am dealing with</p>\n\n<ol>\n<li><code>myWxImage</code>, an image.</li>\n<li><code>myLabelImage</code>, a numpy array that has the same shape as the image and contains one label (an integer) for every pixel</li>\n<li><code>myLookupTable</code>, a 1-dimensional numpy array, i.e. a vector, that has as many entries as there are labels. (I use it to map labels to floating point numbers.)</li>\n</ol>\n\n<p>The goal is to iterate through the pixels and, for every pixel, consider its label, look up the corresponding floating point number and multiply it with the color of this pixel. </p>\n\n<p>The following code does exactly this but is <strong>too slow</strong>. Do you have a simple suggestion how to do this faster without resorting to C++ or GPU programming which would, of course, make a lot of sense here?</p>\n\n<pre><code>weightedImage = wx.EmptyImage(myWxImage.Width, myWxImage.Height)\nrgb = numpy.zeros(3, dtype=int);\nfor x in range(0, myWxImage.Width):\n    for y in range(0, myWxImage.Height):\n        label = myLabelImage[x, y]\n        weight = myLookUpTable[label]\n        rgb[0] = myWxImage.GetRed(x, y)\n        rgb[1] = myWxImage.GetGreen(x, y)\n        rgb[2] = myWxImage.GetBlue(x, y)\n        rgb = rgb * weight\n        weightedImage.SetRGB(x, y, rgb[0], rgb[1], rgb[2])\nmyBitmap = wx.BitmapFromImage(weightedImage)\n\n# draw myBitmap\n</code></pre>\n"},{"tags":["python","io","keyboard"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":37,"score":1,"question_id":13224920,"title":"make a keyboard input command from a python script","body":"<p>is there any way to make keyboard input from my program. suppose my program reeives \"1\" from a socket. how this data can be converted to a real time keyboard hit. means when \"1\" would receive , the computer would think that i pressed \"1\" .</p>\n"},{"tags":["python"],"answer_count":5,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":117,"score":3,"question_id":13221896,"title":"Python: Partial sum of numbers","body":"<p>can you help me with code which returns partial sum of numbers in text file? \nI must import text file, then make a code for partial sums without tools ..etc.</p>\n\n<p>My input: </p>\n\n<pre><code>4\n13\n23\n21\n11\n</code></pre>\n\n<p>The output should be (without brackets or commas):</p>\n\n<pre><code>4 \n17\n40\n61 \n72\n</code></pre>\n\n<p>I was trying to make code in python, but could only do total sum and not partial one. \nIf i use the <code>+=</code> operator for generator, it gives me an error!</p>\n"},{"tags":["python","lambda","key","max","project-euler"],"answer_count":2,"favorite_count":0,"up_vote_count":4,"down_vote_count":0,"view_count":101,"score":4,"question_id":13219320,"title":"Python avoiding lambda for key which needs two callables (function composition)","body":"<p>I was working on <a href=\"http://projecteuler.net/problem=14\" rel=\"nofollow\">project euler problem 14</a> and as a first attempt I whipped up this brute-force solution:</p>\n\n<pre><code>def collatz(n, memo={1: [1]}):\n  if n not in memo:\n    memo[n] = [n] + collatz(3 * n + 1 if n % 2 else n // 2)\n  return memo[n]\n\ndef p014():\n  return max(xrange(1, 10**6), key=lambda n: len(collatz(n)))\n</code></pre>\n\n<p>My question is about that lambda, I'm usually reluctant to use them but I don't know any elegant way to avoid it in this case.  Is there something in <code>functools</code> or other to chain two callables, or any other neat alternative I'm missing?</p>\n"},{"tags":["python","pyside"],"answer_count":1,"favorite_count":0,"up_vote_count":1,"down_vote_count":0,"view_count":21,"score":1,"question_id":13224391,"title":"PySide.QtGui.QDialog issue","body":"<p>I want to draw a frame around my borderless dialog while it gets resized interactively but it seems like <code>QDialog.setSizeGripEnabled(True)</code> and <code>QWidget.resizeEvent</code> doen't work well together. The dialog can't be resized interactively, is this a known problem ?</p>\n\n<pre><code>class MyDialog(QtGui.QDialog):\n\n    def __init__(self,x,y):\n        QtGui.QDialog.__init__(self)\n        self.setWindowFlags(QtCore.Qt.FramelessWindowHint)\n        self.setGeometry(x,y,250,300)    \n        self.setSizeGripEnabled(True)\n\n        self.frame = QtGui.QFrame(self)\n        self.frame.setGeometry(self.rect())\n        self.frame.setFrameShape(QtGui.QFrame.StyledPanel)\n        self.frame.setFrameShadow(QtGui.QFrame.Plain)\n        etc...\n\n    def resizeEvent( self, event ):\n        r = self.rect()\n        s = event.size()\n        self.frame.setGeometry( r.x(), r.y(), s.width(), s.height() )\n</code></pre>\n"},{"tags":["python","pyopengl"],"answer_count":1,"favorite_count":1,"up_vote_count":1,"down_vote_count":1,"view_count":33,"score":0,"question_id":13224677,"title":"pyopengl tutorials","body":"<p>im fairly advanced with python, and i want to use pygame and pyopengl to do some basic 3d. I've never done anything really 3d in any language before. Do you think you could point me in the direction of some tutorials on this matter, Thanks in advance.</p>\n"},{"tags":["python","tornado"],"answer_count":4,"favorite_count":1,"up_vote_count":3,"down_vote_count":0,"view_count":2423,"score":3,"question_id":5011135,"title":"python tornado setup","body":"<p>I want to use a Python framework that handles sessions (user auth), templating along with MySQL database access (although I can use MySQLdb quite nicely)</p>\n\n<p>Tornado looks promising but, I just can't see how to use it. The sample given has a port listen feature. Does it replace Apache? Exactly how do I configure my server (Centos 5.4) and LAMP setup for this, or is there a better option?</p>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":2,"down_vote_count":0,"view_count":26,"score":2,"question_id":13223971,"title":"Python 3 Extracting Candidate Words from a Debate File","body":"<p>This is my first post, so I'm sorry if I do anything wrong. That said, I searched for the question and found something similar that was never answered due to the OP not giving sufficient information. This is also homework, so I'm just looking for a hint. I really want to get this on my own.</p>\n\n<p>I need to read in a debate file (.txt), and pull and store all of the lines that one candidate says to put in a word cloud. The file format is supposed to help, but I'm blanking on how to do this. The hint is that each time a new person speaks, their name followed by a colon is the first word in the first line. However, candidates' data can span multiple lines. I am supposed to store each person's lines separately. Here is a sample of the file:</p>\n\n<blockquote>\n  <p>LEHRER: This debate and the next three -- two presidential, one vice\n  presidential -- are sponsored by the Commission on Presidential\n  Debates. Tonight's 90 minutes will be about domestic issues and will\n  follow a format designed by the commission. There will be six roughly\n  15-minute segments with two-minute answers for the first question,\n  then open discussion for the remainder of each segment.</p>\n  \n  <p>Gentlemen, welcome to you both. Let's start the economy, segment one,\n  and let's begin with jobs. What are the major differences between the\n  two of you about how you would go about creating new jobs?</p>\n  \n  <p>LEHRER: You have two minutes. Each of you have two minutes to start. A\n  coin toss has determined, Mr. President, you go first.</p>\n  \n  <p>OBAMA: Well, thank you very much, Jim, for this opportunity. I want to\n  thank Governor Romney and the University of Denver for your\n  hospitality.</p>\n  \n  <p>There are a lot of points I want to make tonight, but the most\n  important one is that 20 years ago I became the luckiest man on Earth\n  because Michelle Obama agreed to marry me.</p>\n</blockquote>\n\n<p>This is what I have for a function so far:</p>\n\n<pre><code>def getCandidate(myFile):    \n    file = open(myFile, \"r\")\n    obama = []\n    romney = []\n    lehrer = []\n    file = file.readlines()\n</code></pre>\n\n<p>I'm just not sure how to iterate through the data so that it separates each person's words correctly. I created a dummy file to create the word cloud, and I'm able to do that fine, so all I am wondering is how to extract the information I need.</p>\n\n<p>Thank you! If there is more information I can offer please let me know. This is a beginning Python course.</p>\n\n<p>EDIT: New code added from a response. This works to an extent, but only grabs the first line of each candidate's response, not their entire response. I need to write code that continues to store each line under that candidate until a new name is at the start of a line.</p>\n\n<pre><code>def getCandidate(myFile, candidate):   \n    file = open(myFile, \"r\")\n    OBAMA = []\n    ROMNEY = []\n    LEHRER = []\n    file = file.readlines()\n    for line in file:\n        if line.startswith(\"OBAMA:\"):\n            OBAMA.append(line)\n        if line.startswith(\"ROMNEY:\"):\n            ROMNEY.append(line)\n        if line.startswith(\"LEHRER:\"):\n            LEHRER.append(line)\n    if candidate == \"OBAMA\":\n        return OBAMA\n    if candidate == \"ROMNEY\":\n        return ROMNEY\n</code></pre>\n"},{"tags":["python"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":41,"score":0,"question_id":13224527,"title":"How do I import a file/list from a server/website using Python","body":"<p>I would like to have an always updating list by using standard txt file that python has to grab from a server/website.</p>\n\n<p>Example</p>\n\n<pre><code>    women =[\"Dare1\",\"Dare2\",\"Dare3\",\"Dare4\",\"Dare5\",\"Dare6\"]\n\n   men = [\"Dare1\",\"Dare2\",\"Dare3\",\"Dare4\",\"Dare5\",\"Dare6\"]\n</code></pre>\n\n<p>Then once the program is reopened, it grab the updated txt</p>\n\n<pre><code>    women =[\"Dare1\",\"Dare2\",\"Dare3\",\"Dare4\",\"Dare5\",\"Dare6\",\"Dare7\"]\n\n   men = [\"Dare1\",\"Dare2\",\"Dare3\",\"Dare4\",\"Dare5\",\"Dare6\"]\n</code></pre>\n"},{"tags":["python","redis","flask"],"answer_count":0,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":56,"score":0,"question_id":13222122,"title":"redis blocking application","body":"<p>I'm using redis pub/sub and get no data is sent to the client browser. I think it might be because redis is blocking? This is the error I get...is it possible to prevent this:</p>\n\n<pre><code>Exception happened during processing of request from ('127.0.0.1', 49231)\nTraceback (most recent call last):\nFile \"/usr/lib/python2.7/SocketServer.py\", line 284, in _handle_request_noblock\nself.process_request(request, client_address)\nFile \"/usr/lib/python2.7/SocketServer.py\", line 310, in process_request\nself.finish_request(request, client_address)\nFile \"/usr/lib/python2.7/SocketServer.py\", line 323, in finish_request\nself.RequestHandlerClass(request, client_address, self)\nFile \"/usr/lib/python2.7/SocketServer.py\", line 640, in __init__\nself.finish()\nFile \"/usr/lib/python2.7/SocketServer.py\", line 693, in finish\nself.wfile.flush()\nFile \"/usr/lib/python2.7/socket.py\", line 303, in flush\nself._sock.sendall(view[write_offset:write_offset+buffer_size])\nerror: [Errno 32] Broken pipe\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["python","sorting","csv","dictionary"],"answer_count":4,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":46,"score":0,"question_id":13224487,"title":"Sort() not working correctly in Python for Dict","body":"<p>I have a CSV file with many columns. I am trying to sort the rows based on the value in one of the columns (in descending numerical order). And I only wnat it to output the top 10. However, when I use the following code, I get an incorrect output.</p>\n\n<pre><code>import csv\nf = open('SNPs.csv', \"rU\")\nreader = csv.reader(f)\noutput = [row for row in reader]\noutput.sort(key=lambda x: x[32], reverse=True)\nprint dict((row[10], (row[11], row[8], row[32])) for row in output[:10])\n</code></pre>\n\n<p>The output looks something like:</p>\n\n<pre><code>'XRgroup8': ('38', '2', '0.47'), '2': ('30', '13', '0.37'), 'Chromosome': ('Position', 'Distance', 'GC'), 'XRgroup5': ('54', '1', '0.45')\n</code></pre>\n\n<p>So clearly it isn't returning 10 values and they aren't in order. Any ideas?</p>\n"},{"tags":["python","pygame"],"answer_count":1,"favorite_count":1,"up_vote_count":2,"down_vote_count":0,"view_count":42,"score":2,"question_id":13126817,"title":"Creating new variables at the global scope with eval","body":"<p>I am trying to enable the user of my drawing program (written in python with pygame) to rename selected objects, then be able to access them through the live interpreter by their names. The following is a method of the base class of all drawable objects. When this code is run, I get no errors, but when I try to access the object through its new name, I am told that the variable with that name is not defined.\nAny ideas why this might be?</p>\n\n<pre><code>def rename(self,newName):\n\n    \"\"\"\n    Gives this drawable a new name by which the user my reference it in\n    code\n    \"\"\"\n\n    #Create a new variable in the global scope\n    command =  'global ' + newName + '\\n'\n\n    #Tie it to me\n    command += newName + ' = self' + '\\n'\n\n    #If I already had a name, I'll remove this reference\n    if self.name != None:\n        command += 'del ' + self.name\n\n    #Execute the command\n    exec(command)\n\n    #Make this adjustment internally\n    self.name = newName\n</code></pre>\n"},{"tags":["python","regex","html-parsing","beautifulsoup"],"answer_count":3,"favorite_count":1,"up_vote_count":1,"down_vote_count":0,"view_count":984,"score":1,"question_id":4270742,"title":"How to remove whitespace in BeautifulSoup","body":"<p>I have a bunch of HTML I'm parsing with BeautifulSoup and it's been going pretty well except for one minor snag. I want to save the output into a single-lined string, with the following as my current output:</p>\n\n<pre><code>    &lt;li&gt;&lt;span class=\"plaincharacterwrap break\"&gt;\n                    Zazzafooky but one two three!\n                &lt;/span&gt;&lt;/li&gt;\n&lt;li&gt;&lt;span class=\"plaincharacterwrap break\"&gt;\n                    Zazzafooky2\n                &lt;/span&gt;&lt;/li&gt;\n&lt;li&gt;&lt;span class=\"plaincharacterwrap break\"&gt;\n                    Zazzafooky3\n                &lt;/span&gt;&lt;/li&gt;\n</code></pre>\n\n<p>Ideally I'd like</p>\n\n<pre><code>&lt;li&gt;&lt;span class=\"plaincharacterwrap break\"&gt;Zazzafooky but one two three!&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span class=\"plaincharacterwrap break\"&gt;Zazzafooky2&lt;/span&gt;&lt;/li&gt;\n</code></pre>\n\n<p>There's a lot of redundant whitespace that I'd like to get rid of but it's not necessarily removable using <code>strip()</code>, nor can I blatantly remove all the spaces because I need to retain the text. How can I do it? It seems like a common enough problem that regex would be overkill, but is that the only way?</p>\n\n<p>I don't have any <code>&lt;pre&gt;</code> tags so I can be a little more forceful there.</p>\n\n<p>Thanks once again!</p>\n"},{"tags":["python","python-2.7","tkinter","typeerror"],"answer_count":1,"favorite_count":0,"up_vote_count":0,"down_vote_count":0,"view_count":18,"score":0,"question_id":13224441,"title":"python tkinter blackjack game, typerror when adding two variables","body":"<p>This is my code: </p>\n\n<pre><code>from __future__ import division \nfrom Tkinter import *\nimport tkMessageBox\nimport os\nimport subprocess\nfrom random import randrange\nfrom random import shuffle\nfrom random import choice\nfrom time import sleep\nimport sys, time\nfrom select import select\n\n\nclass MyApp(object):\n\n    a = choice(range(1, 12))\n    b = choice(range(1, 12))\n    money = 100\n    bet = 5\n    hand = 0\n\n\n    def __init__(self):\n        self.root = Tk()\n        self.root.wm_title(\"The Game of 21\")\n        Label(self.root, text=\"Balance: %d\" %(self.money)).grid(row=0, column=0, sticky=E)\n        Label(self.root, text=\"Choose Bet:\").grid(row=2, column=0, sticky=E)\n        Button(self.root, text=\"5\", command=self.bet).grid(row = 2, column = 1)  #create a button\n        Button(self.root, text=\"10\", command=self.bet).grid(row = 2, column = 2)  #create a button\n        Button(self.root, text=\"25\", command=self.bet).grid(row = 2, column = 3)  #create a button\n        Button(self.root, text=\"50\", command=self.bet).grid(row = 2, column = 4)  #create a button\n\n        Button(self.root, text=\"Deal\", command=self.gameOn).grid(row = 5, column = 1)  #create a button\n        Button(self.root, text=\"Exit\", command=self.root.destroy).grid(row = 5, column = 2)  #create a button\n\n        self.root.mainloop()\n\n    def gameOn(self):\n        \"\"\"Setup the application's main window as a 2x5 grid\"\"\"\n        self.root = Tk()\n        self.root.wm_title(\"The Game of 21\")\n        self.bet = DoubleVar()\n\n        self.cards = StringVar()\n        Label(self.root, text = 'Cards dealt:').grid(row = 1, column = 0, sticky = W) #cards dealt\n        Label(self.root, text = self.a).grid(row = 1, column = 1, sticky = E)        # card 1 (aka card a)\n        Label(self.root, text = ',').grid(row = 1, column = 2)      # inserting a comma between card1 and card2\n        Label(self.root, text = self.b).grid(row = 1, column = 3)        # card 2 (aka card b)\n        Label(self.root, text = 'Total = %d' %(self.a + self.b + self.hand)).grid(row = 1, column = 4)  # card 1 + card 2\n        Label(self.root, text = \"Time remaining:\").grid(row = 3, column = 1) \n\n        Button(self.root, text=\"Hit\", command=self.hit).grid(row = 2, column = 0)  #create a button\n        Button(self.root, text=\"Stand\" , command=self.stand).grid(row = 2, column = 1) # create a button\n\n\n\n\n#   def bet(betAmount):\n#       self.bet = 10\n\n    def hit(self):\n        self.hand = choice(range(1, 12))  \n        total = self.hand + self.a + self.b \n        dealerHand = choice(range(14,25))\n\n\n        self.root.destroy()\n\n        result = \"Dealer wins. You lose.\"\n        if dealerHand &gt; 21 and total &lt; 22: \n            self.money = self.money - self.bet\n            result = \"Winner! Winner! Chicken Dinner!\"\n        if total &gt; 21:\n            result\n            self.money = self.money - self.bet\n        elif total &gt; dealerHand:\n            self.money = self.money + self.bet\n            result = \"Winner! Winner! Chicken Dinner!\" \n        elif total == dealerHand: \n            self.money = self.money - self.bet\n            result = \"Dealer wins. You lose.\" \n        tkMessageBox.showinfo(\"Results\" , \"Hand = %d\\nDealer = %d\\n%s\" %((self.hand + self.a + self.b), (dealerHand), result)) # print result\n\n\n    def stand(self): \n        self.hand = 0\n        total = self.hand + self.a + self.b \n        dealerHand = choice(range(14,25))    \n        self.root.destroy()\n\n        result = \"Dealer wins. You lose.\"\n        if dealerHand &gt; 21 and total &lt; 22: \n            self.money += bet\n            result = \"Winner! Winner! Chicken Dinner!\"\n        if total &gt; 21: \n            self.money += bet\n            result\n        elif total &gt; dealerHand: \n            self.money += bet\n            result = \"Winner! Winner! Chicken Dinner!\" \n        elif total == dealerHand: \n            self.money += bet\n            result = \"Dealer wins. You lose.\" \n        print self.money\n        tkMessageBox.showinfo(\"Results\" , \"Your hand: %d\\nDealer: %d\\n%s\" %((self.hand + self.a + self.b), (dealerHand), result)) # print result\n\n\n\n\nMyApp()\n</code></pre>\n\n<p>Basically what I am trying to do is create a blackjack type game, I want to have four buttons (which I've made) and when you click them it changes the <code>bet</code> variable. My problem is know even when I try and set a default variable of 5 it won't work; I get a TypeError. I also have no clue how to update the \"balance\" on the first window as money goes up and down. Sorry for the messy code its been a long day and I think I've done as much as possible on my own. </p>\n\n<p>Edit: The error that pops up is: </p>\n\n<pre><code>line 75, in hit\n    self.money = self.money - self.bet\nTypeError: unsupported operand type(s) for -: 'int' and 'instance'\n</code></pre>\n"},{"tags":["python","string","format"],"answer_count":1,"favorite_count":0,"up_vote_count":3,"down_vote_count":0,"view_count":30,"score":3,"question_id":13224474,"title":"formatting python string that contains ${}","body":"<p>I need to print out a string that contains ${} with format() method</p>\n\n<p>For example, I'd like to print out </p>\n\n<p><code>\"hello ${a} hello\"</code></p>\n\n<p>using this python code</p>\n\n<pre><code>print \"{string1} ${a} {string1}\".format(string1=\"hello\")\n</code></pre>\n\n<p>However, I get  KeyError'a', as format() expects an input string for {a}.\nHow can I teach format() to ignore ${a}?</p>\n"}]}
